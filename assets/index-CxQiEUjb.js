const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditComplaintPage-DeqLRp-d.js","assets/EditComplaintPage-B-q2gbHC.css","assets/AddPatientPage-Ci8VKKYC.js","assets/AddPatientPage-CvaX_3Vg.css"])))=>i.map(i=>d[i]);
var lW=Object.defineProperty;var HM=t=>{throw TypeError(t)};var cW=(t,e,n)=>e in t?lW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var wr=(t,e,n)=>cW(t,typeof e!="symbol"?e+"":e,n),K_=(t,e,n)=>e.has(t)||HM("Cannot "+n);var Re=(t,e,n)=>(K_(t,e,"read from private field"),n?n.call(t):e.get(t)),Vt=(t,e,n)=>e.has(t)?HM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Pt=(t,e,n,a)=>(K_(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n),wn=(t,e,n)=>(K_(t,e,"access private method"),n);var fj=(t,e,n,a)=>({set _(i){Pt(t,e,i,n)},get _(){return Re(t,e,a)}});function uW(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(a,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q_={exports:{}},Vx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function dW(){if(GM)return Vx;GM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:a,key:o,ref:i!==void 0?i:null,props:s}}return Vx.Fragment=e,Vx.jsx=n,Vx.jsxs=n,Vx}var WM;function hW(){return WM||(WM=1,Q_.exports=dW()),Q_.exports}var r=hW(),X_={exports:{}},xn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YM;function fW(){if(YM)return xn;YM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g($){return $===null||typeof $!="object"?null:($=p&&$[p]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function w($,ie,xe){this.props=$,this.context=ie,this.refs=j,this.updater=xe||x}w.prototype.isReactComponent={},w.prototype.setState=function($,ie){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ie,"setState")},w.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function _(){}_.prototype=w.prototype;function T($,ie,xe){this.props=$,this.context=ie,this.refs=j,this.updater=xe||x}var C=T.prototype=new _;C.constructor=T,b(C,w.prototype),C.isPureReactComponent=!0;var A=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function I($,ie,xe,X,Ie,$e){return xe=$e.ref,{$$typeof:t,type:$,key:ie,ref:xe!==void 0?xe:null,props:$e}}function R($,ie){return I($.type,ie,void 0,void 0,void 0,$.props)}function q($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function U($){var ie={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(xe){return ie[xe]})}var F=/\/+/g;function B($,ie){return typeof $=="object"&&$!==null&&$.key!=null?U(""+$.key):ie.toString(36)}function V(){}function W($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(V,V):($.status="pending",$.then(function(ie){$.status==="pending"&&($.status="fulfilled",$.value=ie)},function(ie){$.status==="pending"&&($.status="rejected",$.reason=ie)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function G($,ie,xe,X,Ie){var $e=typeof $;($e==="undefined"||$e==="boolean")&&($=null);var Be=!1;if($===null)Be=!0;else switch($e){case"bigint":case"string":case"number":Be=!0;break;case"object":switch($.$$typeof){case t:case e:Be=!0;break;case f:return Be=$._init,G(Be($._payload),ie,xe,X,Ie)}}if(Be)return Ie=Ie($),Be=X===""?"."+B($,0):X,A(Ie)?(xe="",Be!=null&&(xe=Be.replace(F,"$&/")+"/"),G(Ie,ie,xe,"",function(Se){return Se})):Ie!=null&&(q(Ie)&&(Ie=R(Ie,xe+(Ie.key==null||$&&$.key===Ie.key?"":(""+Ie.key).replace(F,"$&/")+"/")+Be)),ie.push(Ie)),1;Be=0;var Le=X===""?".":X+":";if(A($))for(var ce=0;ce<$.length;ce++)X=$[ce],$e=Le+B(X,ce),Be+=G(X,ie,xe,$e,Ie);else if(ce=g($),typeof ce=="function")for($=ce.call($),ce=0;!(X=$.next()).done;)X=X.value,$e=Le+B(X,ce++),Be+=G(X,ie,xe,$e,Ie);else if($e==="object"){if(typeof $.then=="function")return G(W($),ie,xe,X,Ie);throw ie=String($),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Be}function z($,ie,xe){if($==null)return $;var X=[],Ie=0;return G($,X,"","",function($e){return ie.call(xe,$e,Ie++)}),X}function Y($){if($._status===-1){var ie=$._result;ie=ie(),ie.then(function(xe){($._status===0||$._status===-1)&&($._status=1,$._result=xe)},function(xe){($._status===0||$._status===-1)&&($._status=2,$._result=xe)}),$._status===-1&&($._status=0,$._result=ie)}if($._status===1)return $._result.default;throw $._result}var Q=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function K(){}return xn.Children={map:z,forEach:function($,ie,xe){z($,function(){ie.apply(this,arguments)},xe)},count:function($){var ie=0;return z($,function(){ie++}),ie},toArray:function($){return z($,function(ie){return ie})||[]},only:function($){if(!q($))throw Error("React.Children.only expected to receive a single React element child.");return $}},xn.Component=w,xn.Fragment=n,xn.Profiler=i,xn.PureComponent=T,xn.StrictMode=a,xn.Suspense=c,xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,xn.__COMPILER_RUNTIME={__proto__:null,c:function($){return k.H.useMemoCache($)}},xn.cache=function($){return function(){return $.apply(null,arguments)}},xn.cloneElement=function($,ie,xe){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var X=b({},$.props),Ie=$.key,$e=void 0;if(ie!=null)for(Be in ie.ref!==void 0&&($e=void 0),ie.key!==void 0&&(Ie=""+ie.key),ie)!P.call(ie,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ie.ref===void 0||(X[Be]=ie[Be]);var Be=arguments.length-2;if(Be===1)X.children=xe;else if(1<Be){for(var Le=Array(Be),ce=0;ce<Be;ce++)Le[ce]=arguments[ce+2];X.children=Le}return I($.type,Ie,void 0,void 0,$e,X)},xn.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},xn.createElement=function($,ie,xe){var X,Ie={},$e=null;if(ie!=null)for(X in ie.key!==void 0&&($e=""+ie.key),ie)P.call(ie,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(Ie[X]=ie[X]);var Be=arguments.length-2;if(Be===1)Ie.children=xe;else if(1<Be){for(var Le=Array(Be),ce=0;ce<Be;ce++)Le[ce]=arguments[ce+2];Ie.children=Le}if($&&$.defaultProps)for(X in Be=$.defaultProps,Be)Ie[X]===void 0&&(Ie[X]=Be[X]);return I($,$e,void 0,void 0,null,Ie)},xn.createRef=function(){return{current:null}},xn.forwardRef=function($){return{$$typeof:l,render:$}},xn.isValidElement=q,xn.lazy=function($){return{$$typeof:f,_payload:{_status:-1,_result:$},_init:Y}},xn.memo=function($,ie){return{$$typeof:u,type:$,compare:ie===void 0?null:ie}},xn.startTransition=function($){var ie=k.T,xe={};k.T=xe;try{var X=$(),Ie=k.S;Ie!==null&&Ie(xe,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(K,Q)}catch($e){Q($e)}finally{k.T=ie}},xn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},xn.use=function($){return k.H.use($)},xn.useActionState=function($,ie,xe){return k.H.useActionState($,ie,xe)},xn.useCallback=function($,ie){return k.H.useCallback($,ie)},xn.useContext=function($){return k.H.useContext($)},xn.useDebugValue=function(){},xn.useDeferredValue=function($,ie){return k.H.useDeferredValue($,ie)},xn.useEffect=function($,ie,xe){var X=k.H;if(typeof xe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect($,ie)},xn.useId=function(){return k.H.useId()},xn.useImperativeHandle=function($,ie,xe){return k.H.useImperativeHandle($,ie,xe)},xn.useInsertionEffect=function($,ie){return k.H.useInsertionEffect($,ie)},xn.useLayoutEffect=function($,ie){return k.H.useLayoutEffect($,ie)},xn.useMemo=function($,ie){return k.H.useMemo($,ie)},xn.useOptimistic=function($,ie){return k.H.useOptimistic($,ie)},xn.useReducer=function($,ie,xe){return k.H.useReducer($,ie,xe)},xn.useRef=function($){return k.H.useRef($)},xn.useState=function($){return k.H.useState($)},xn.useSyncExternalStore=function($,ie,xe){return k.H.useSyncExternalStore($,ie,xe)},xn.useTransition=function(){return k.H.useTransition()},xn.version="19.1.0",xn}var KM;function DD(){return KM||(KM=1,X_.exports=fW()),X_.exports}var v=DD();const Ce=Hn(v),QM=uW({__proto__:null,default:Ce},[v]);var J_={exports:{}},Hx={},Z_={exports:{}},eC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XM;function pW(){return XM||(XM=1,function(t){function e(z,Y){var Q=z.length;z.push(Y);e:for(;0<Q;){var K=Q-1>>>1,$=z[K];if(0<i($,Y))z[K]=Y,z[Q]=$,Q=K;else break e}}function n(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var Y=z[0],Q=z.pop();if(Q!==Y){z[0]=Q;e:for(var K=0,$=z.length,ie=$>>>1;K<ie;){var xe=2*(K+1)-1,X=z[xe],Ie=xe+1,$e=z[Ie];if(0>i(X,Q))Ie<$&&0>i($e,X)?(z[K]=$e,z[Ie]=Q,K=Ie):(z[K]=X,z[xe]=Q,K=xe);else if(Ie<$&&0>i($e,Q))z[K]=$e,z[Ie]=Q,K=Ie;else break e}}return Y}function i(z,Y){var Q=z.sortIndex-Y.sortIndex;return Q!==0?Q:z.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,p=null,g=3,x=!1,b=!1,j=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(z){for(var Y=n(u);Y!==null;){if(Y.callback===null)a(u);else if(Y.startTime<=z)a(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function k(z){if(j=!1,A(z),!b)if(n(c)!==null)b=!0,P||(P=!0,B());else{var Y=n(u);Y!==null&&G(k,Y.startTime-z)}}var P=!1,I=-1,R=5,q=-1;function U(){return w?!0:!(t.unstable_now()-q<R)}function F(){if(w=!1,P){var z=t.unstable_now();q=z;var Y=!0;try{e:{b=!1,j&&(j=!1,T(I),I=-1),x=!0;var Q=g;try{t:{for(A(z),p=n(c);p!==null&&!(p.expirationTime>z&&U());){var K=p.callback;if(typeof K=="function"){p.callback=null,g=p.priorityLevel;var $=K(p.expirationTime<=z);if(z=t.unstable_now(),typeof $=="function"){p.callback=$,A(z),Y=!0;break t}p===n(c)&&a(c),A(z)}else a(c);p=n(c)}if(p!==null)Y=!0;else{var ie=n(u);ie!==null&&G(k,ie.startTime-z),Y=!1}}break e}finally{p=null,g=Q,x=!1}Y=void 0}}finally{Y?B():P=!1}}}var B;if(typeof C=="function")B=function(){C(F)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=F,B=function(){W.postMessage(null)}}else B=function(){_(F,0)};function G(z,Y){I=_(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Q=g;g=Y;try{return z()}finally{g=Q}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=g;g=z;try{return Y()}finally{g=Q}},t.unstable_scheduleCallback=function(z,Y,Q){var K=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?K+Q:K):Q=K,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Q+$,z={id:f++,callback:Y,priorityLevel:z,startTime:Q,expirationTime:$,sortIndex:-1},Q>K?(z.sortIndex=Q,e(u,z),n(c)===null&&z===n(u)&&(j?(T(I),I=-1):j=!0,G(k,Q-K))):(z.sortIndex=$,e(c,z),b||x||(b=!0,P||(P=!0,B()))),z},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(z){var Y=g;return function(){var Q=g;g=Y;try{return z.apply(this,arguments)}finally{g=Q}}}}(eC)),eC}var JM;function mW(){return JM||(JM=1,Z_.exports=pW()),Z_.exports}var tC={exports:{}},ui={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZM;function gW(){if(ZM)return ui;ZM=1;var t=DD();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,u,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:u,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ui.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,ui.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(c,u,null,f)},ui.flushSync=function(c){var u=o.T,f=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=u,a.p=f,a.d.f()}},ui.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,a.d.C(c,u))},ui.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},ui.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,p=l(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?a.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:x}):f==="script"&&a.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ui.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=l(u.as,u.crossOrigin);a.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&a.d.M(c)},ui.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,p=l(f,u.crossOrigin);a.d.L(c,f,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ui.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=l(u.as,u.crossOrigin);a.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else a.d.m(c)},ui.requestFormReset=function(c){a.d.r(c)},ui.unstable_batchedUpdates=function(c,u){return c(u)},ui.useFormState=function(c,u,f){return o.H.useFormState(c,u,f)},ui.useFormStatus=function(){return o.H.useHostTransitionStatus()},ui.version="19.1.0",ui}var eI;function uB(){if(eI)return tC.exports;eI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tC.exports=gW(),tC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI;function yW(){if(tI)return Hx;tI=1;var t=mW(),e=DD(),n=uB();function a(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var h=d,m=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(m=h.return),d=h.return;while(d)}return h.tag===3?m:null}function o(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function l(d){if(s(d)!==d)throw Error(a(188))}function c(d){var h=d.alternate;if(!h){if(h=s(d),h===null)throw Error(a(188));return h!==d?null:d}for(var m=d,S=h;;){var E=m.return;if(E===null)break;var L=E.alternate;if(L===null){if(S=E.return,S!==null){m=S;continue}break}if(E.child===L.child){for(L=E.child;L;){if(L===m)return l(E),d;if(L===S)return l(E),h;L=L.sibling}throw Error(a(188))}if(m.return!==S.return)m=E,S=L;else{for(var Z=!1,pe=E.child;pe;){if(pe===m){Z=!0,m=E,S=L;break}if(pe===S){Z=!0,S=E,m=L;break}pe=pe.sibling}if(!Z){for(pe=L.child;pe;){if(pe===m){Z=!0,m=L,S=E;break}if(pe===S){Z=!0,S=L,m=E;break}pe=pe.sibling}if(!Z)throw Error(a(189))}}if(m.alternate!==S)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?d:h}function u(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d;for(d=d.child;d!==null;){if(h=u(d),h!==null)return h;d=d.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function B(d){return d===null||typeof d!="object"?null:(d=F&&d[F]||d["@@iterator"],typeof d=="function"?d:null)}var V=Symbol.for("react.client.reference");function W(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===V?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case b:return"Fragment";case w:return"Profiler";case j:return"StrictMode";case k:return"Suspense";case P:return"SuspenseList";case q:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case x:return"Portal";case C:return(d.displayName||"Context")+".Provider";case T:return(d._context.displayName||"Context")+".Consumer";case A:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case I:return h=d.displayName||null,h!==null?h:W(d.type)||"Memo";case R:h=d._payload,d=d._init;try{return W(d(h))}catch{}}return null}var G=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},K=[],$=-1;function ie(d){return{current:d}}function xe(d){0>$||(d.current=K[$],K[$]=null,$--)}function X(d,h){$++,K[$]=d.current,d.current=h}var Ie=ie(null),$e=ie(null),Be=ie(null),Le=ie(null);function ce(d,h){switch(X(Be,h),X($e,d),X(Ie,null),h.nodeType){case 9:case 11:d=(d=h.documentElement)&&(d=d.namespaceURI)?Or(d):0;break;default:if(d=h.tagName,h=h.namespaceURI)h=Or(h),d=$r(h,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}xe(Ie),X(Ie,d)}function Se(){xe(Ie),xe($e),xe(Be)}function Ve(d){d.memoizedState!==null&&X(Le,d);var h=Ie.current,m=$r(h,d.type);h!==m&&(X($e,d),X(Ie,m))}function Ae(d){$e.current===d&&(xe(Ie),xe($e)),Le.current===d&&(xe(Le),zu._currentValue=Q)}var ue=Object.prototype.hasOwnProperty,Te=t.unstable_scheduleCallback,oe=t.unstable_cancelCallback,be=t.unstable_shouldYield,_e=t.unstable_requestPaint,Ne=t.unstable_now,ee=t.unstable_getCurrentPriorityLevel,ge=t.unstable_ImmediatePriority,de=t.unstable_UserBlockingPriority,ae=t.unstable_NormalPriority,ne=t.unstable_LowPriority,se=t.unstable_IdlePriority,je=t.log,Ee=t.unstable_setDisableYieldValue,J=null,ye=null;function me(d){if(typeof je=="function"&&Ee(d),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(J,d)}catch{}}var he=Math.clz32?Math.clz32:Fe,De=Math.log,nt=Math.LN2;function Fe(d){return d>>>=0,d===0?32:31-(De(d)/nt|0)|0}var Ge=256,it=4194304;function wt(d){var h=d&42;if(h!==0)return h;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function we(d,h,m){var S=d.pendingLanes;if(S===0)return 0;var E=0,L=d.suspendedLanes,Z=d.pingedLanes;d=d.warmLanes;var pe=S&134217727;return pe!==0?(S=pe&~L,S!==0?E=wt(S):(Z&=pe,Z!==0?E=wt(Z):m||(m=pe&~d,m!==0&&(E=wt(m))))):(pe=S&~L,pe!==0?E=wt(pe):Z!==0?E=wt(Z):m||(m=S&~d,m!==0&&(E=wt(m)))),E===0?0:h!==0&&h!==E&&(h&L)===0&&(L=E&-E,m=h&-h,L>=m||L===32&&(m&4194048)!==0)?h:E}function Qe(d,h){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&h)===0}function Xe(d,h){switch(d){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ut(){var d=Ge;return Ge<<=1,(Ge&4194048)===0&&(Ge=256),d}function Ct(){var d=it;return it<<=1,(it&62914560)===0&&(it=4194304),d}function bt(d){for(var h=[],m=0;31>m;m++)h.push(d);return h}function ke(d,h){d.pendingLanes|=h,h!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function ot(d,h,m,S,E,L){var Z=d.pendingLanes;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=m,d.entangledLanes&=m,d.errorRecoveryDisabledLanes&=m,d.shellSuspendCounter=0;var pe=d.entanglements,Oe=d.expirationTimes,Je=d.hiddenUpdates;for(m=Z&~m;0<m;){var dt=31-he(m),pt=1<<dt;pe[dt]=0,Oe[dt]=-1;var tt=Je[dt];if(tt!==null)for(Je[dt]=null,dt=0;dt<tt.length;dt++){var Ze=tt[dt];Ze!==null&&(Ze.lane&=-536870913)}m&=~pt}S!==0&&Tt(d,S,0),L!==0&&E===0&&d.tag!==0&&(d.suspendedLanes|=L&~(Z&~h))}function Tt(d,h,m){d.pendingLanes|=h,d.suspendedLanes&=~h;var S=31-he(h);d.entangledLanes|=h,d.entanglements[S]=d.entanglements[S]|1073741824|m&4194090}function Ue(d,h){var m=d.entangledLanes|=h;for(d=d.entanglements;m;){var S=31-he(m),E=1<<S;E&h|d[S]&h&&(d[S]|=h),m&=~E}}function jt(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function kt(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Kn(){var d=Y.p;return d!==0?d:(d=window.event,d===void 0?32:oj(d.type))}function vt(d,h){var m=Y.p;try{return Y.p=d,h()}finally{Y.p=m}}var Dt=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Dt,Qn="__reactProps$"+Dt,br="__reactContainer$"+Dt,Ba="__reactEvents$"+Dt,Jr="__reactListeners$"+Dt,wa="__reactHandles$"+Dt,pn="__reactResources$"+Dt,qr="__reactMarker$"+Dt;function Tn(d){delete d[Ht],delete d[Qn],delete d[Ba],delete d[Jr],delete d[wa]}function Rn(d){var h=d[Ht];if(h)return h;for(var m=d.parentNode;m;){if(h=m[br]||m[Ht]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(d=K1(d);d!==null;){if(m=d[Ht])return m;d=K1(d)}return h}d=m,m=d.parentNode}return null}function et(d){if(d=d[Ht]||d[br]){var h=d.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return d}return null}function gt(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d.stateNode;throw Error(a(33))}function St(d){var h=d[pn];return h||(h=d[pn]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Ot(d){d[qr]=!0}var Sn=new Set,Ln={};function Na(d,h){xi(d,h),xi(d+"Capture",h)}function xi(d,h){for(Ln[d]=h,d=0;d<h.length;d++)Sn.add(h[d])}var fo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ed={},Pd={};function VS(d){return ue.call(Pd,d)?!0:ue.call(Ed,d)?!1:fo.test(d)?Pd[d]=!0:(Ed[d]=!0,!1)}function Bf(d,h,m){if(VS(h))if(m===null)d.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":d.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){d.removeAttribute(h);return}}d.setAttribute(h,""+m)}}function qf(d,h,m){if(m===null)d.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(h);return}d.setAttribute(h,""+m)}}function $s(d,h,m,S){if(S===null)d.removeAttribute(m);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(m);return}d.setAttributeNS(h,m,""+S)}}var Uf,Zg;function Qc(d){if(Uf===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);Uf=h&&h[1]||"",Zg=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Uf+d+Zg}var ey=!1;function ty(d,h){if(!d||ey)return"";ey=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(Ze){var tt=Ze}Reflect.construct(d,[],pt)}else{try{pt.call()}catch(Ze){tt=Ze}d.call(pt.prototype)}}else{try{throw Error()}catch(Ze){tt=Ze}(pt=d())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(Ze){if(Ze&&tt&&typeof Ze.stack=="string")return[Ze.stack,tt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=S.DetermineComponentFrameRoot(),Z=L[0],pe=L[1];if(Z&&pe){var Oe=Z.split(`
`),Je=pe.split(`
`);for(E=S=0;S<Oe.length&&!Oe[S].includes("DetermineComponentFrameRoot");)S++;for(;E<Je.length&&!Je[E].includes("DetermineComponentFrameRoot");)E++;if(S===Oe.length||E===Je.length)for(S=Oe.length-1,E=Je.length-1;1<=S&&0<=E&&Oe[S]!==Je[E];)E--;for(;1<=S&&0<=E;S--,E--)if(Oe[S]!==Je[E]){if(S!==1||E!==1)do if(S--,E--,0>E||Oe[S]!==Je[E]){var dt=`
`+Oe[S].replace(" at new "," at ");return d.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",d.displayName)),dt}while(1<=S&&0<=E);break}}}finally{ey=!1,Error.prepareStackTrace=m}return(m=d?d.displayName||d.name:"")?Qc(m):""}function HS(d){switch(d.tag){case 26:case 27:case 5:return Qc(d.type);case 16:return Qc("Lazy");case 13:return Qc("Suspense");case 19:return Qc("SuspenseList");case 0:case 15:return ty(d.type,!1);case 11:return ty(d.type.render,!1);case 1:return ty(d.type,!0);case 31:return Qc("Activity");default:return""}}function ny(d){try{var h="";do h+=HS(d),d=d.return;while(d);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function vi(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function ry(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ay(d){var h=ry(d)?"checked":"value",m=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),S=""+d[h];if(!d.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,L=m.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return E.call(this)},set:function(Z){S=""+Z,L.call(this,Z)}}),Object.defineProperty(d,h,{enumerable:m.enumerable}),{getValue:function(){return S},setValue:function(Z){S=""+Z},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function Vf(d){d._valueTracker||(d._valueTracker=ay(d))}function iy(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var m=h.getValue(),S="";return d&&(S=ry(d)?d.checked?"true":"false":d.value),d=S,d!==m?(h.setValue(d),!0):!1}function Hl(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var Qb=/[\n"\\]/g;function Vi(d){return d.replace(Qb,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Hf(d,h,m,S,E,L,Z,pe){d.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?d.type=Z:d.removeAttribute("type"),h!=null?Z==="number"?(h===0&&d.value===""||d.value!=h)&&(d.value=""+vi(h)):d.value!==""+vi(h)&&(d.value=""+vi(h)):Z!=="submit"&&Z!=="reset"||d.removeAttribute("value"),h!=null?Dd(d,Z,vi(h)):m!=null?Dd(d,Z,vi(m)):S!=null&&d.removeAttribute("value"),E==null&&L!=null&&(d.defaultChecked=!!L),E!=null&&(d.checked=E&&typeof E!="function"&&typeof E!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?d.name=""+vi(pe):d.removeAttribute("name")}function sy(d,h,m,S,E,L,Z,pe){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(d.type=L),h!=null||m!=null){if(!(L!=="submit"&&L!=="reset"||h!=null))return;m=m!=null?""+vi(m):"",h=h!=null?""+vi(h):m,pe||h===d.value||(d.value=h),d.defaultValue=h}S=S??E,S=typeof S!="function"&&typeof S!="symbol"&&!!S,d.checked=pe?d.checked:!!S,d.defaultChecked=!!S,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(d.name=Z)}function Dd(d,h,m){h==="number"&&Hl(d.ownerDocument)===d||d.defaultValue===""+m||(d.defaultValue=""+m)}function Xc(d,h,m,S){if(d=d.options,h){h={};for(var E=0;E<m.length;E++)h["$"+m[E]]=!0;for(m=0;m<d.length;m++)E=h.hasOwnProperty("$"+d[m].value),d[m].selected!==E&&(d[m].selected=E),E&&S&&(d[m].defaultSelected=!0)}else{for(m=""+vi(m),h=null,E=0;E<d.length;E++){if(d[E].value===m){d[E].selected=!0,S&&(d[E].defaultSelected=!0);return}h!==null||d[E].disabled||(h=d[E])}h!==null&&(h.selected=!0)}}function oy(d,h,m){if(h!=null&&(h=""+vi(h),h!==d.value&&(d.value=h),m==null)){d.defaultValue!==h&&(d.defaultValue=h);return}d.defaultValue=m!=null?""+vi(m):""}function Gf(d,h,m,S){if(h==null){if(S!=null){if(m!=null)throw Error(a(92));if(G(S)){if(1<S.length)throw Error(a(93));S=S[0]}m=S}m==null&&(m=""),h=m}m=vi(h),d.defaultValue=m,S=d.textContent,S===m&&S!==""&&S!==null&&(d.value=S)}function Ko(d,h){if(h){var m=d.firstChild;if(m&&m===d.lastChild&&m.nodeType===3){m.nodeValue=h;return}}d.textContent=h}var Jc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ly(d,h,m){var S=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?S?d.setProperty(h,""):h==="float"?d.cssFloat="":d[h]="":S?d.setProperty(h,m):typeof m!="number"||m===0||Jc.has(h)?h==="float"?d.cssFloat=m:d[h]=(""+m).trim():d[h]=m+"px"}function cy(d,h,m){if(h!=null&&typeof h!="object")throw Error(a(62));if(d=d.style,m!=null){for(var S in m)!m.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?d.setProperty(S,""):S==="float"?d.cssFloat="":d[S]="");for(var E in h)S=h[E],h.hasOwnProperty(E)&&m[E]!==S&&ly(d,E,S)}else for(var L in h)h.hasOwnProperty(L)&&ly(d,L,h[L])}function uy(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Od(d){return Jb.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Wf=null;function dy(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Zc=null,eu=null;function hy(d){var h=et(d);if(h&&(d=h.stateNode)){var m=d[Qn]||null;e:switch(d=h.stateNode,h.type){case"input":if(Hf(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=d;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Vi(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var S=m[h];if(S!==d&&S.form===d.form){var E=S[Qn]||null;if(!E)throw Error(a(90));Hf(S,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(h=0;h<m.length;h++)S=m[h],S.form===d.form&&iy(S)}break e;case"textarea":oy(d,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Xc(d,!!m.multiple,h,!1)}}}var fy=!1;function Zb(d,h,m){if(fy)return d(h,m);fy=!0;try{var S=d(h);return S}finally{if(fy=!1,(Zc!==null||eu!==null)&&(Wp(),Zc&&(h=Zc,d=eu,eu=Zc=null,hy(h),d)))for(h=0;h<d.length;h++)hy(d[h])}}function Md(d,h){var m=d.stateNode;if(m===null)return null;var S=m[Qn]||null;if(S===null)return null;m=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(d=d.type,S=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!S;break e;default:d=!1}if(d)return null;if(m&&typeof m!="function")throw Error(a(231,h,typeof m));return m}var po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Id=!1;if(po)try{var Rd={};Object.defineProperty(Rd,"passive",{get:function(){Id=!0}}),window.addEventListener("test",Rd,Rd),window.removeEventListener("test",Rd,Rd)}catch{Id=!1}var Qo=null,py=null,Yf=null;function e0(){if(Yf)return Yf;var d,h=py,m=h.length,S,E="value"in Qo?Qo.value:Qo.textContent,L=E.length;for(d=0;d<m&&h[d]===E[d];d++);var Z=m-d;for(S=1;S<=Z&&h[m-S]===E[L-S];S++);return Yf=E.slice(d,1<S?1-S:void 0)}function or(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function tr(){return!0}function t0(){return!1}function Xa(d){function h(m,S,E,L,Z){this._reactName=m,this._targetInst=E,this.type=S,this.nativeEvent=L,this.target=Z,this.currentTarget=null;for(var pe in d)d.hasOwnProperty(pe)&&(m=d[pe],this[pe]=m?m(L):L[pe]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?tr:t0,this.isPropagationStopped=t0,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),h}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kf=Xa(Gl),Ld=f({},Gl,{view:0,detail:0}),GS=Xa(Ld),Qf,my,Qr,tu=f({},Ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Qr&&(Qr&&d.type==="mousemove"?(Qf=d.screenX-Qr.screenX,my=d.screenY-Qr.screenY):my=Qf=0,Qr=d),Qf)},movementY:function(d){return"movementY"in d?d.movementY:my}}),Xo=Xa(tu),n0=f({},tu,{dataTransfer:0}),gy=Xa(n0),Hi=f({},Ld,{relatedTarget:0}),Xf=Xa(Hi),r0=f({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),a0=Xa(r0),i0=f({},Gl,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),s0=Xa(i0),o0=f({},Gl,{data:0}),Ja=Xa(o0),WS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l0(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=YS[d])?!!h[d]:!1}function zs(){return l0}var Jf=f({},Ld,{key:function(d){if(d.key){var h=WS[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=or(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Gi[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(d){return d.type==="keypress"?or(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?or(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),yy=Xa(Jf),Ar=f({},tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mo=Xa(Ar),xy=f({},Ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),KS=Xa(xy),vy=f({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),QS=Xa(vy),XS=f({},tu,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),JS=Xa(XS),c0=f({},Gl,{newState:0,oldState:0}),Zf=Xa(c0),nu=[9,13,27,32],by=po&&"CompositionEvent"in window,ru=null;po&&"documentMode"in document&&(ru=document.documentMode);var u0=po&&"TextEvent"in window&&!ru,ep=po&&(!by||ru&&8<ru&&11>=ru),tp=" ",jy=!1;function d0(d,h){switch(d){case"keyup":return nu.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function np(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Jo=!1;function ZS(d,h){switch(d){case"compositionend":return np(h);case"keypress":return h.which!==32?null:(jy=!0,tp);case"textInput":return d=h.data,d===tp&&jy?null:d;default:return null}}function h0(d,h){if(Jo)return d==="compositionend"||!by&&d0(d,h)?(d=e0(),Yf=py=Qo=null,Jo=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return ep&&h.locale!=="ko"?null:h.data;default:return null}}var bi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rp(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!bi[d.type]:h==="textarea"}function au(d,h,m,S){Zc?eu?eu.push(S):eu=[S]:Zc=S,h=em(h,"onChange"),0<h.length&&(m=new Kf("onChange","change",null,m,S),d.push({event:m,listeners:h}))}var iu=null,su=null;function e_(d){B1(d,0)}function ap(d){var h=gt(d);if(iy(h))return d}function f0(d,h){if(d==="change")return h}var p0=!1;if(po){var wy;if(po){var Zo="oninput"in document;if(!Zo){var m0=document.createElement("div");m0.setAttribute("oninput","return;"),Zo=typeof m0.oninput=="function"}wy=Zo}else wy=!1;p0=wy&&(!document.documentMode||9<document.documentMode)}function g0(){iu&&(iu.detachEvent("onpropertychange",ip),su=iu=null)}function ip(d){if(d.propertyName==="value"&&ap(su)){var h=[];au(h,su,d,dy(d)),Zb(e_,h)}}function y0(d,h,m){d==="focusin"?(g0(),iu=h,su=m,iu.attachEvent("onpropertychange",ip)):d==="focusout"&&g0()}function el(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return ap(su)}function sp(d,h){if(d==="click")return ap(h)}function t_(d,h){if(d==="input"||d==="change")return ap(h)}function n_(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var ji=typeof Object.is=="function"?Object.is:n_;function Bs(d,h){if(ji(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var m=Object.keys(d),S=Object.keys(h);if(m.length!==S.length)return!1;for(S=0;S<m.length;S++){var E=m[S];if(!ue.call(h,E)||!ji(d[E],h[E]))return!1}return!0}function Wi(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Ny(d,h){var m=Wi(d);d=0;for(var S;m;){if(m.nodeType===3){if(S=d+m.textContent.length,d<=h&&S>=h)return{node:m,offset:h-d};d=S}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Wi(m)}}function x0(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?x0(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function v0(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var h=Hl(d.document);h instanceof d.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)d=h.contentWindow;else break;h=Hl(d.document)}return h}function Sy(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}var r_=po&&"documentMode"in document&&11>=document.documentMode,ou=null,tl=null,He=null,st=!1;function rt(d,h,m){var S=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;st||ou==null||ou!==Hl(S)||(S=ou,"selectionStart"in S&&Sy(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),He&&Bs(He,S)||(He=S,S=em(tl,"onSelect"),0<S.length&&(h=new Kf("onSelect","select",null,h,m),d.push({event:h,listeners:S}),h.target=ou)))}function At(d,h){var m={};return m[d.toLowerCase()]=h.toLowerCase(),m["Webkit"+d]="webkit"+h,m["Moz"+d]="moz"+h,m}var Zt={animationend:At("Animation","AnimationEnd"),animationiteration:At("Animation","AnimationIteration"),animationstart:At("Animation","AnimationStart"),transitionrun:At("Transition","TransitionRun"),transitionstart:At("Transition","TransitionStart"),transitioncancel:At("Transition","TransitionCancel"),transitionend:At("Transition","TransitionEnd")},$n={},Zr={};po&&(Zr=document.createElement("div").style,"AnimationEvent"in window||(delete Zt.animationend.animation,delete Zt.animationiteration.animation,delete Zt.animationstart.animation),"TransitionEvent"in window||delete Zt.transitionend.transition);function zn(d){if($n[d])return $n[d];if(!Zt[d])return d;var h=Zt[d],m;for(m in h)if(h.hasOwnProperty(m)&&m in Zr)return $n[d]=h[m];return d}var op=zn("animationend"),b0=zn("animationiteration"),wi=zn("animationstart"),lp=zn("transitionrun"),a_=zn("transitionstart"),lu=zn("transitioncancel"),Fd=zn("transitionend"),$d=new Map,Xn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xn.push("scrollEnd");function ms(d,h){$d.set(d,h),Na(h,[d])}var _y=new WeakMap;function qa(d,h){if(typeof d=="object"&&d!==null){var m=_y.get(d);return m!==void 0?m:(h={value:d,source:h,stack:ny(h)},_y.set(d,h),h)}return{value:d,source:h,stack:ny(h)}}var Yi=[],cu=0,Cy=0;function Wl(){for(var d=cu,h=Cy=cu=0;h<d;){var m=Yi[h];Yi[h++]=null;var S=Yi[h];Yi[h++]=null;var E=Yi[h];Yi[h++]=null;var L=Yi[h];if(Yi[h++]=null,S!==null&&E!==null){var Z=S.pending;Z===null?E.next=E:(E.next=Z.next,Z.next=E),S.pending=E}L!==0&&zd(m,E,L)}}function gs(d,h,m,S){Yi[cu++]=d,Yi[cu++]=h,Yi[cu++]=m,Yi[cu++]=S,Cy|=S,d.lanes|=S,d=d.alternate,d!==null&&(d.lanes|=S)}function uu(d,h,m,S){return gs(d,h,m,S),Bd(d)}function Yl(d,h){return gs(d,null,null,h),Bd(d)}function zd(d,h,m){d.lanes|=m;var S=d.alternate;S!==null&&(S.lanes|=m);for(var E=!1,L=d.return;L!==null;)L.childLanes|=m,S=L.alternate,S!==null&&(S.childLanes|=m),L.tag===22&&(d=L.stateNode,d===null||d._visibility&1||(E=!0)),d=L,L=L.return;return d.tag===3?(L=d.stateNode,E&&h!==null&&(E=31-he(m),d=L.hiddenUpdates,S=d[E],S===null?d[E]=[h]:S.push(h),h.lane=m|536870912),L):null}function Bd(d){if(50<Du)throw Du=0,bx=null,Error(a(185));for(var h=d.return;h!==null;)d=h,h=d.return;return d.tag===3?d.stateNode:null}var Kl={};function cp(d,h,m,S){this.tag=d,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Za(d,h,m,S){return new cp(d,h,m,S)}function Ql(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Ua(d,h){var m=d.alternate;return m===null?(m=Za(d.tag,h,d.key,d.mode),m.elementType=d.elementType,m.type=d.type,m.stateNode=d.stateNode,m.alternate=d,d.alternate=m):(m.pendingProps=h,m.type=d.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=d.flags&65011712,m.childLanes=d.childLanes,m.lanes=d.lanes,m.child=d.child,m.memoizedProps=d.memoizedProps,m.memoizedState=d.memoizedState,m.updateQueue=d.updateQueue,h=d.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=d.sibling,m.index=d.index,m.ref=d.ref,m.refCleanup=d.refCleanup,m}function qd(d,h){d.flags&=65011714;var m=d.alternate;return m===null?(d.childLanes=0,d.lanes=h,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type,h=m.dependencies,d.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),d}function up(d,h,m,S,E,L){var Z=0;if(S=d,typeof d=="function")Ql(d)&&(Z=1);else if(typeof d=="string")Z=I_(d,m,Ie.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case q:return d=Za(31,m,h,E),d.elementType=q,d.lanes=L,d;case b:return Xl(m.children,E,L,h);case j:Z=8,E|=24;break;case w:return d=Za(12,m,h,E|2),d.elementType=w,d.lanes=L,d;case k:return d=Za(13,m,h,E),d.elementType=k,d.lanes=L,d;case P:return d=Za(19,m,h,E),d.elementType=P,d.lanes=L,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case _:case C:Z=10;break e;case T:Z=9;break e;case A:Z=11;break e;case I:Z=14;break e;case R:Z=16,S=null;break e}Z=29,m=Error(a(130,d===null?"null":typeof d,"")),S=null}return h=Za(Z,m,h,E),h.elementType=d,h.type=S,h.lanes=L,h}function Xl(d,h,m,S){return d=Za(7,d,S,h),d.lanes=m,d}function Ty(d,h,m){return d=Za(6,d,null,h),d.lanes=m,d}function du(d,h,m){return h=Za(4,d.children!==null?d.children:[],d.key,h),h.lanes=m,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}var go=[],nl=0,dp=null,Ud=0,Ki=[],Qi=0,_r=null,Er=1,yo="";function Jl(d,h){go[nl++]=Ud,go[nl++]=dp,dp=d,Ud=h}function ky(d,h,m){Ki[Qi++]=Er,Ki[Qi++]=yo,Ki[Qi++]=_r,_r=d;var S=Er;d=yo;var E=32-he(S)-1;S&=~(1<<E),m+=1;var L=32-he(h)+E;if(30<L){var Z=E-E%5;L=(S&(1<<Z)-1).toString(32),S>>=Z,E-=Z,Er=1<<32-he(h)+E|m<<E|S,yo=L+d}else Er=1<<L|m<<E|S,yo=d}function Ay(d){d.return!==null&&(Jl(d,1),ky(d,1,0))}function Vd(d){for(;d===dp;)dp=go[--nl],go[nl]=null,Ud=go[--nl],go[nl]=null;for(;d===_r;)_r=Ki[--Qi],Ki[Qi]=null,yo=Ki[--Qi],Ki[Qi]=null,Er=Ki[--Qi],Ki[Qi]=null}var sa=null,Pr=null,kn=!1,ys=null,ei=!1,hu=Error(a(519));function Xi(d){var h=Error(a(418,""));throw rl(qa(h,d)),hu}function j0(d){var h=d.stateNode,m=d.type,S=d.memoizedProps;switch(h[Ht]=d,h[Qn]=S,m){case"dialog":Cn("cancel",h),Cn("close",h);break;case"iframe":case"object":case"embed":Cn("load",h);break;case"video":case"audio":for(m=0;m<Dh.length;m++)Cn(Dh[m],h);break;case"source":Cn("error",h);break;case"img":case"image":case"link":Cn("error",h),Cn("load",h);break;case"details":Cn("toggle",h);break;case"input":Cn("invalid",h),sy(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),Vf(h);break;case"select":Cn("invalid",h);break;case"textarea":Cn("invalid",h),Gf(h,S.value,S.defaultValue,S.children),Vf(h)}m=S.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||S.suppressHydrationWarning===!0||V1(h.textContent,m)?(S.popover!=null&&(Cn("beforetoggle",h),Cn("toggle",h)),S.onScroll!=null&&Cn("scroll",h),S.onScrollEnd!=null&&Cn("scrollend",h),S.onClick!=null&&(h.onclick=tm),h=!0):h=!1,h||Xi(d)}function w0(d){for(sa=d.return;sa;)switch(sa.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:sa=sa.return}}function Hd(d){if(d!==sa)return!1;if(!kn)return w0(d),kn=!0,!1;var h=d.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=d.type,m=!(m!=="form"&&m!=="button")||rm(d.type,d.memoizedProps)),m=!m),m&&Pr&&Xi(d),w0(d),h===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8)if(m=d.data,m==="/$"){if(h===0){Pr=Ns(d.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;d=d.nextSibling}Pr=null}}else h===27?(h=Pr,rs(d.type)?(d=Mx,Mx=null,Pr=d):Pr=h):Pr=sa?Ns(d.stateNode.nextSibling):null;return!0}function Gd(){Pr=sa=null,kn=!1}function N0(){var d=ys;return d!==null&&(li===null?li=d:li.push.apply(li,d),ys=null),d}function rl(d){ys===null?ys=[d]:ys.push(d)}var Zl=ie(null),al=null,fe=null;function Ni(d,h,m){X(Zl,h._currentValue),h._currentValue=m}function Ji(d){d._currentValue=Zl.current,xe(Zl)}function ti(d,h,m){for(;d!==null;){var S=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),d===m)break;d=d.return}}function vn(d,h,m,S){var E=d.child;for(E!==null&&(E.return=d);E!==null;){var L=E.dependencies;if(L!==null){var Z=E.child;L=L.firstContext;e:for(;L!==null;){var pe=L;L=E;for(var Oe=0;Oe<h.length;Oe++)if(pe.context===h[Oe]){L.lanes|=m,pe=L.alternate,pe!==null&&(pe.lanes|=m),ti(L.return,m,d),S||(Z=null);break e}L=pe.next}}else if(E.tag===18){if(Z=E.return,Z===null)throw Error(a(341));Z.lanes|=m,L=Z.alternate,L!==null&&(L.lanes|=m),ti(Z,m,d),Z=null}else Z=E.child;if(Z!==null)Z.return=E;else for(Z=E;Z!==null;){if(Z===d){Z=null;break}if(E=Z.sibling,E!==null){E.return=Z.return,Z=E;break}Z=Z.return}E=Z}}function Wd(d,h,m,S){d=null;for(var E=h,L=!1;E!==null;){if(!L){if((E.flags&524288)!==0)L=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var Z=E.alternate;if(Z===null)throw Error(a(387));if(Z=Z.memoizedProps,Z!==null){var pe=E.type;ji(E.pendingProps.value,Z.value)||(d!==null?d.push(pe):d=[pe])}}else if(E===Le.current){if(Z=E.alternate,Z===null)throw Error(a(387));Z.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(d!==null?d.push(zu):d=[zu])}E=E.return}d!==null&&vn(h,d,m,S),h.flags|=262144}function hp(d){for(d=d.firstContext;d!==null;){if(!ji(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function ec(d){al=d,fe=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Ur(d){return S0(al,d)}function fp(d,h){return al===null&&ec(d),S0(d,h)}function S0(d,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},fe===null){if(d===null)throw Error(a(308));fe=h,d.dependencies={lanes:0,firstContext:h},d.flags|=524288}else fe=fe.next=h;return m}var i_=typeof AbortController<"u"?AbortController:function(){var d=[],h=this.signal={aborted:!1,addEventListener:function(m,S){d.push(S)}};this.abort=function(){h.aborted=!0,d.forEach(function(m){return m()})}},s_=t.unstable_scheduleCallback,o_=t.unstable_NormalPriority,mr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ey(){return{controller:new i_,data:new Map,refCount:0}}function Yd(d){d.refCount--,d.refCount===0&&s_(o_,function(){d.controller.abort()})}var Kd=null,Py=0,fu=0,ni=null;function l_(d,h){if(Kd===null){var m=Kd=[];Py=0,fu=Zp(),ni={status:"pending",value:void 0,then:function(S){m.push(S)}}}return Py++,h.then(_0,_0),h}function _0(){if(--Py===0&&Kd!==null){ni!==null&&(ni.status="fulfilled");var d=Kd;Kd=null,fu=0,ni=null;for(var h=0;h<d.length;h++)(0,d[h])()}}function c_(d,h){var m=[],S={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return d.then(function(){S.status="fulfilled",S.value=h;for(var E=0;E<m.length;E++)(0,m[E])(h)},function(E){for(S.status="rejected",S.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),S}var C0=z.S;z.S=function(d,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&l_(d,h),C0!==null&&C0(d,h)};var tc=ie(null);function xo(){var d=tc.current;return d!==null?d:jr.pooledCache}function pp(d,h){h===null?X(tc,tc.current):X(tc,h.pool)}function T0(){var d=xo();return d===null?null:{parent:mr._currentValue,pool:d}}var Va=Error(a(460)),k0=Error(a(474)),mp=Error(a(542)),Dy={then:function(){}};function A0(d){return d=d.status,d==="fulfilled"||d==="rejected"}function gp(){}function Oy(d,h,m){switch(m=d[m],m===void 0?d.push(h):m!==h&&(h.then(gp,gp),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,P0(d),d;default:if(typeof h.status=="string")h.then(gp,gp);else{if(d=jr,d!==null&&100<d.shellSuspendCounter)throw Error(a(482));d=h,d.status="pending",d.then(function(S){if(h.status==="pending"){var E=h;E.status="fulfilled",E.value=S}},function(S){if(h.status==="pending"){var E=h;E.status="rejected",E.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,P0(d),d}throw pu=h,Va}}var pu=null;function E0(){if(pu===null)throw Error(a(459));var d=pu;return pu=null,d}function P0(d){if(d===Va||d===mp)throw Error(a(483))}var qs=!1;function nc(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mu(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function il(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function vo(d,h,m){var S=d.updateQueue;if(S===null)return null;if(S=S.shared,(rr&2)!==0){var E=S.pending;return E===null?h.next=h:(h.next=E.next,E.next=h),S.pending=h,h=Bd(d),zd(d,null,m),h}return gs(d,S,h,m),Bd(d)}function Qd(d,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var S=h.lanes;S&=d.pendingLanes,m|=S,h.lanes=m,Ue(d,m)}}function xs(d,h){var m=d.updateQueue,S=d.alternate;if(S!==null&&(S=S.updateQueue,m===S)){var E=null,L=null;if(m=m.firstBaseUpdate,m!==null){do{var Z={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};L===null?E=L=Z:L=L.next=Z,m=m.next}while(m!==null);L===null?E=L=h:L=L.next=h}else E=L=h;m={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:L,shared:S.shared,callbacks:S.callbacks},d.updateQueue=m;return}d=m.lastBaseUpdate,d===null?m.firstBaseUpdate=h:d.next=h,m.lastBaseUpdate=h}var Xd=!1;function vs(){if(Xd){var d=ni;if(d!==null)throw d}}function Pa(d,h,m,S){Xd=!1;var E=d.updateQueue;qs=!1;var L=E.firstBaseUpdate,Z=E.lastBaseUpdate,pe=E.shared.pending;if(pe!==null){E.shared.pending=null;var Oe=pe,Je=Oe.next;Oe.next=null,Z===null?L=Je:Z.next=Je,Z=Oe;var dt=d.alternate;dt!==null&&(dt=dt.updateQueue,pe=dt.lastBaseUpdate,pe!==Z&&(pe===null?dt.firstBaseUpdate=Je:pe.next=Je,dt.lastBaseUpdate=Oe))}if(L!==null){var pt=E.baseState;Z=0,dt=Je=Oe=null,pe=L;do{var tt=pe.lane&-536870913,Ze=tt!==pe.lane;if(Ze?(Fn&tt)===tt:(S&tt)===tt){tt!==0&&tt===fu&&(Xd=!0),dt!==null&&(dt=dt.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Kt=d,Yt=pe;tt=h;var cr=m;switch(Yt.tag){case 1:if(Kt=Yt.payload,typeof Kt=="function"){pt=Kt.call(cr,pt,tt);break e}pt=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=Yt.payload,tt=typeof Kt=="function"?Kt.call(cr,pt,tt):Kt,tt==null)break e;pt=f({},pt,tt);break e;case 2:qs=!0}}tt=pe.callback,tt!==null&&(d.flags|=64,Ze&&(d.flags|=8192),Ze=E.callbacks,Ze===null?E.callbacks=[tt]:Ze.push(tt))}else Ze={lane:tt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},dt===null?(Je=dt=Ze,Oe=pt):dt=dt.next=Ze,Z|=tt;if(pe=pe.next,pe===null){if(pe=E.shared.pending,pe===null)break;Ze=pe,pe=Ze.next,Ze.next=null,E.lastBaseUpdate=Ze,E.shared.pending=null}}while(!0);dt===null&&(Oe=pt),E.baseState=Oe,E.firstBaseUpdate=Je,E.lastBaseUpdate=dt,L===null&&(E.shared.lanes=0),pl|=Z,d.lanes=Z,d.memoizedState=pt}}function D0(d,h){if(typeof d!="function")throw Error(a(191,d));d.call(h)}function My(d,h){var m=d.callbacks;if(m!==null)for(d.callbacks=null,d=0;d<m.length;d++)D0(m[d],h)}var rc=ie(null),sl=ie(0);function bo(d,h){d=Ao,X(sl,d),X(rc,h),Ao=d|h.baseLanes}function yp(){X(sl,Ao),X(rc,rc.current)}function Iy(){Ao=sl.current,xe(rc),xe(sl)}var bs=0,yn=null,nr=null,An=null,gu=!1,ac=!1,Da=!1,yu=0,ol=0,Zi=null,O0=0;function Pn(){throw Error(a(321))}function Jd(d,h){if(h===null)return!1;for(var m=0;m<h.length&&m<d.length;m++)if(!ji(d[m],h[m]))return!1;return!0}function Ry(d,h,m,S,E,L){return bs=L,yn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,z.H=d===null||d.memoizedState===null?G0:ex,Da=!1,L=m(S,E),Da=!1,ac&&(L=I0(h,m,S,E)),M0(d),L}function M0(d){z.H=ch;var h=nr!==null&&nr.next!==null;if(bs=0,An=nr=yn=null,gu=!1,ol=0,Zi=null,h)throw Error(a(300));d===null||pa||(d=d.dependencies,d!==null&&hp(d)&&(pa=!0))}function I0(d,h,m,S){yn=d;var E=0;do{if(ac&&(Zi=null),ol=0,ac=!1,25<=E)throw Error(a(301));if(E+=1,An=nr=null,d.updateQueue!=null){var L=d.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}z.H=W0,L=h(m,S)}while(ac);return L}function Ly(){var d=z.H,h=d.useState()[0];return h=typeof h.then=="function"?Zd(h):h,d=d.useState()[0],(nr!==null?nr.memoizedState:null)!==d&&(yn.flags|=1024),h}function Fy(){var d=yu!==0;return yu=0,d}function ic(d,h,m){h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~m}function xp(d){if(gu){for(d=d.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}gu=!1}bs=0,An=nr=yn=null,ac=!1,ol=yu=0,Zi=null}function ri(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?yn.memoizedState=An=d:An=An.next=d,An}function ea(){if(nr===null){var d=yn.alternate;d=d!==null?d.memoizedState:null}else d=nr.next;var h=An===null?yn.memoizedState:An.next;if(h!==null)An=h,nr=d;else{if(d===null)throw yn.alternate===null?Error(a(467)):Error(a(310));nr=d,d={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},An===null?yn.memoizedState=An=d:An=An.next=d}return An}function sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zd(d){var h=ol;return ol+=1,Zi===null&&(Zi=[]),d=Oy(Zi,d,h),h=yn,(An===null?h.memoizedState:An.next)===null&&(h=h.alternate,z.H=h===null||h.memoizedState===null?G0:ex),d}function vp(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Zd(d);if(d.$$typeof===C)return Ur(d)}throw Error(a(438,String(d)))}function eh(d){var h=null,m=yn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var S=yn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(E){return E.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=sc(),yn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(d),S=0;S<d;S++)m[S]=U;return h.index++,m}function Us(d,h){return typeof h=="function"?h(d):h}function bp(d){var h=ea();return $y(h,nr,d)}function $y(d,h,m){var S=d.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=m;var E=d.baseQueue,L=S.pending;if(L!==null){if(E!==null){var Z=E.next;E.next=L.next,L.next=Z}h.baseQueue=E=L,S.pending=null}if(L=d.baseState,E===null)d.memoizedState=L;else{h=E.next;var pe=Z=null,Oe=null,Je=h,dt=!1;do{var pt=Je.lane&-536870913;if(pt!==Je.lane?(Fn&pt)===pt:(bs&pt)===pt){var tt=Je.revertLane;if(tt===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),pt===fu&&(dt=!0);else if((bs&tt)===tt){Je=Je.next,tt===fu&&(dt=!0);continue}else pt={lane:0,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Oe===null?(pe=Oe=pt,Z=L):Oe=Oe.next=pt,yn.lanes|=tt,pl|=tt;pt=Je.action,Da&&m(L,pt),L=Je.hasEagerState?Je.eagerState:m(L,pt)}else tt={lane:pt,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Oe===null?(pe=Oe=tt,Z=L):Oe=Oe.next=tt,yn.lanes|=pt,pl|=pt;Je=Je.next}while(Je!==null&&Je!==h);if(Oe===null?Z=L:Oe.next=pe,!ji(L,d.memoizedState)&&(pa=!0,dt&&(m=ni,m!==null)))throw m;d.memoizedState=L,d.baseState=Z,d.baseQueue=Oe,S.lastRenderedState=L}return E===null&&(S.lanes=0),[d.memoizedState,S.dispatch]}function zy(d){var h=ea(),m=h.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=d;var S=m.dispatch,E=m.pending,L=h.memoizedState;if(E!==null){m.pending=null;var Z=E=E.next;do L=d(L,Z.action),Z=Z.next;while(Z!==E);ji(L,h.memoizedState)||(pa=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),m.lastRenderedState=L}return[L,S]}function By(d,h,m){var S=yn,E=ea(),L=kn;if(L){if(m===void 0)throw Error(a(407));m=m()}else m=h();var Z=!ji((nr||E).memoizedState,m);Z&&(E.memoizedState=m,pa=!0),E=E.queue;var pe=wp.bind(null,S,E,d);if(rh(2048,8,pe,[d]),E.getSnapshot!==h||Z||An!==null&&An.memoizedState.tag&1){if(S.flags|=2048,xu(9,Tp(),R0.bind(null,S,E,m,h),null),jr===null)throw Error(a(349));L||(bs&124)!==0||jp(S,h,m)}return m}function jp(d,h,m){d.flags|=16384,d={getSnapshot:h,value:m},h=yn.updateQueue,h===null?(h=sc(),yn.updateQueue=h,h.stores=[d]):(m=h.stores,m===null?h.stores=[d]:m.push(d))}function R0(d,h,m,S){h.value=m,h.getSnapshot=S,qy(h)&&Uy(d)}function wp(d,h,m){return m(function(){qy(h)&&Uy(d)})}function qy(d){var h=d.getSnapshot;d=d.value;try{var m=h();return!ji(d,m)}catch{return!0}}function Uy(d){var h=Yl(d,2);h!==null&&ki(h,d,2)}function Np(d){var h=ri();if(typeof d=="function"){var m=d;if(d=m(),Da){me(!0);try{m()}finally{me(!1)}}}return h.memoizedState=h.baseState=d,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:d},h}function th(d,h,m,S){return d.baseState=m,$y(d,nr,typeof S=="function"?S:Us)}function u_(d,h,m,S,E){if(Pp(d))throw Error(a(485));if(d=h.action,d!==null){var L={payload:E,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){L.listeners.push(Z)}};z.T!==null?m(!0):L.isTransition=!1,S(L),m=h.pending,m===null?(L.next=h.pending=L,Vy(h,L)):(L.next=m.next,h.pending=m.next=L)}}function Vy(d,h){var m=h.action,S=h.payload,E=d.state;if(h.isTransition){var L=z.T,Z={};z.T=Z;try{var pe=m(E,S),Oe=z.S;Oe!==null&&Oe(Z,pe),Hy(d,h,pe)}catch(Je){Sp(d,h,Je)}finally{z.T=L}}else try{L=m(E,S),Hy(d,h,L)}catch(Je){Sp(d,h,Je)}}function Hy(d,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(S){L0(d,h,S)},function(S){return Sp(d,h,S)}):L0(d,h,m)}function L0(d,h,m){h.status="fulfilled",h.value=m,F0(h),d.state=m,h=d.pending,h!==null&&(m=h.next,m===h?d.pending=null:(m=m.next,h.next=m,Vy(d,m)))}function Sp(d,h,m){var S=d.pending;if(d.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=m,F0(h),h=h.next;while(h!==S)}d.action=null}function F0(d){d=d.listeners;for(var h=0;h<d.length;h++)(0,d[h])()}function _p(d,h){return h}function Gy(d,h){if(kn){var m=jr.formState;if(m!==null){e:{var S=yn;if(kn){if(Pr){t:{for(var E=Pr,L=ei;E.nodeType!==8;){if(!L){E=null;break t}if(E=Ns(E.nextSibling),E===null){E=null;break t}}L=E.data,E=L==="F!"||L==="F"?E:null}if(E){Pr=Ns(E.nextSibling),S=E.data==="F!";break e}}Xi(S)}S=!1}S&&(h=m[0])}}return m=ri(),m.memoizedState=m.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_p,lastRenderedState:h},m.queue=S,m=Xy.bind(null,yn,S),S.dispatch=m,S=Np(!1),L=Jy.bind(null,yn,!1,S.queue),S=ri(),E={state:h,dispatch:null,action:d,pending:null},S.queue=E,m=u_.bind(null,yn,E,L,m),E.dispatch=m,S.memoizedState=d,[h,m,!1]}function Cp(d){var h=ea();return $0(h,nr,d)}function $0(d,h,m){if(h=$y(d,h,_p)[0],d=bp(Us)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=Zd(h)}catch(Z){throw Z===Va?mp:Z}else S=h;h=ea();var E=h.queue,L=E.dispatch;return m!==h.memoizedState&&(yn.flags|=2048,xu(9,Tp(),Wy.bind(null,E,m),null)),[S,L,d]}function Wy(d,h){d.action=h}function mn(d){var h=ea(),m=nr;if(m!==null)return $0(h,m,d);ea(),h=h.memoizedState,m=ea();var S=m.queue.dispatch;return m.memoizedState=d,[h,S,!1]}function xu(d,h,m,S){return d={tag:d,create:m,deps:S,inst:h,next:null},h=yn.updateQueue,h===null&&(h=sc(),yn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=d.next=d:(S=m.next,m.next=d,d.next=S,h.lastEffect=d),d}function Tp(){return{destroy:void 0,resource:void 0}}function vu(){return ea().memoizedState}function nh(d,h,m,S){var E=ri();S=S===void 0?null:S,yn.flags|=d,E.memoizedState=xu(1|h,Tp(),m,S)}function rh(d,h,m,S){var E=ea();S=S===void 0?null:S;var L=E.memoizedState.inst;nr!==null&&S!==null&&Jd(S,nr.memoizedState.deps)?E.memoizedState=xu(h,L,m,S):(yn.flags|=d,E.memoizedState=xu(1|h,L,m,S))}function z0(d,h){nh(8390656,8,d,h)}function Si(d,h){rh(2048,8,d,h)}function B0(d,h){return rh(4,2,d,h)}function ah(d,h){return rh(4,4,d,h)}function kp(d,h){if(typeof h=="function"){d=d();var m=h(d);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function Yy(d,h,m){m=m!=null?m.concat([d]):null,rh(4,4,kp.bind(null,h,d),m)}function Ap(){}function ai(d,h){var m=ea();h=h===void 0?null:h;var S=m.memoizedState;return h!==null&&Jd(h,S[1])?S[0]:(m.memoizedState=[d,h],d)}function jo(d,h){var m=ea();h=h===void 0?null:h;var S=m.memoizedState;if(h!==null&&Jd(h,S[1]))return S[0];if(S=d(),Da){me(!0);try{d()}finally{me(!1)}}return m.memoizedState=[S,h],S}function ih(d,h,m){return m===void 0||(bs&1073741824)!==0?d.memoizedState=h:(d.memoizedState=m,d=b1(),yn.lanes|=d,pl|=d,m)}function Ky(d,h,m,S){return ji(m,h)?m:rc.current!==null?(d=ih(d,m,S),ji(d,h)||(pa=!0),d):(bs&42)===0?(pa=!0,d.memoizedState=m):(d=b1(),yn.lanes|=d,pl|=d,h)}function sh(d,h,m,S,E){var L=Y.p;Y.p=L!==0&&8>L?L:8;var Z=z.T,pe={};z.T=pe,Jy(d,!1,h,m);try{var Oe=E(),Je=z.S;if(Je!==null&&Je(pe,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var dt=c_(Oe,S);oc(d,h,dt,Ma(d))}else oc(d,h,S,Ma(d))}catch(pt){oc(d,h,{then:function(){},status:"rejected",reason:pt},Ma())}finally{Y.p=L,z.T=Z}}function q0(){}function oh(d,h,m,S){if(d.tag!==5)throw Error(a(476));var E=Qy(d).queue;sh(d,E,h,Q,m===null?q0:function(){return Ep(d),m(S)})}function Qy(d){var h=d.memoizedState;if(h!==null)return h;h={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:Q},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:m},next:null},d.memoizedState=h,d=d.alternate,d!==null&&(d.memoizedState=h),h}function Ep(d){var h=Qy(d).next.queue;oc(d,h,{},Ma())}function lh(){return Ur(zu)}function wo(){return ea().memoizedState}function U0(){return ea().memoizedState}function ll(d){for(var h=d.return;h!==null;){switch(h.tag){case 24:case 3:var m=Ma();d=il(m);var S=vo(h,d,m);S!==null&&(ki(S,h,m),Qd(S,h,m)),h={cache:Ey()},d.payload=h;return}h=h.return}}function V0(d,h,m){var S=Ma();m={lane:S,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Pp(d)?H0(h,m):(m=uu(d,h,m,S),m!==null&&(ki(m,d,S),Zy(m,h,S)))}function Xy(d,h,m){var S=Ma();oc(d,h,m,S)}function oc(d,h,m,S){var E={lane:S,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Pp(d))H0(h,E);else{var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var Z=h.lastRenderedState,pe=L(Z,m);if(E.hasEagerState=!0,E.eagerState=pe,ji(pe,Z))return gs(d,h,E,0),jr===null&&Wl(),!1}catch{}finally{}if(m=uu(d,h,E,S),m!==null)return ki(m,d,S),Zy(m,h,S),!0}return!1}function Jy(d,h,m,S){if(S={lane:2,revertLane:Zp(),action:S,hasEagerState:!1,eagerState:null,next:null},Pp(d)){if(h)throw Error(a(479))}else h=uu(d,m,S,2),h!==null&&ki(h,d,2)}function Pp(d){var h=d.alternate;return d===yn||h!==null&&h===yn}function H0(d,h){ac=gu=!0;var m=d.pending;m===null?h.next=h:(h.next=m.next,m.next=h),d.pending=h}function Zy(d,h,m){if((m&4194048)!==0){var S=h.lanes;S&=d.pendingLanes,m|=S,h.lanes=m,Ue(d,m)}}var ch={readContext:Ur,use:vp,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn},G0={readContext:Ur,use:vp,useCallback:function(d,h){return ri().memoizedState=[d,h===void 0?null:h],d},useContext:Ur,useEffect:z0,useImperativeHandle:function(d,h,m){m=m!=null?m.concat([d]):null,nh(4194308,4,kp.bind(null,h,d),m)},useLayoutEffect:function(d,h){return nh(4194308,4,d,h)},useInsertionEffect:function(d,h){nh(4,2,d,h)},useMemo:function(d,h){var m=ri();h=h===void 0?null:h;var S=d();if(Da){me(!0);try{d()}finally{me(!1)}}return m.memoizedState=[S,h],S},useReducer:function(d,h,m){var S=ri();if(m!==void 0){var E=m(h);if(Da){me(!0);try{m(h)}finally{me(!1)}}}else E=h;return S.memoizedState=S.baseState=E,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:E},S.queue=d,d=d.dispatch=V0.bind(null,yn,d),[S.memoizedState,d]},useRef:function(d){var h=ri();return d={current:d},h.memoizedState=d},useState:function(d){d=Np(d);var h=d.queue,m=Xy.bind(null,yn,h);return h.dispatch=m,[d.memoizedState,m]},useDebugValue:Ap,useDeferredValue:function(d,h){var m=ri();return ih(m,d,h)},useTransition:function(){var d=Np(!1);return d=sh.bind(null,yn,d.queue,!0,!1),ri().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,h,m){var S=yn,E=ri();if(kn){if(m===void 0)throw Error(a(407));m=m()}else{if(m=h(),jr===null)throw Error(a(349));(Fn&124)!==0||jp(S,h,m)}E.memoizedState=m;var L={value:m,getSnapshot:h};return E.queue=L,z0(wp.bind(null,S,L,d),[d]),S.flags|=2048,xu(9,Tp(),R0.bind(null,S,L,m,h),null),m},useId:function(){var d=ri(),h=jr.identifierPrefix;if(kn){var m=yo,S=Er;m=(S&~(1<<32-he(S)-1)).toString(32)+m,h=""+h+"R"+m,m=yu++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=O0++,h=""+h+"r"+m.toString(32)+"";return d.memoizedState=h},useHostTransitionStatus:lh,useFormState:Gy,useActionState:Gy,useOptimistic:function(d){var h=ri();h.memoizedState=h.baseState=d;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=Jy.bind(null,yn,!0,m),m.dispatch=h,[d,h]},useMemoCache:eh,useCacheRefresh:function(){return ri().memoizedState=ll.bind(null,yn)}},ex={readContext:Ur,use:vp,useCallback:ai,useContext:Ur,useEffect:Si,useImperativeHandle:Yy,useInsertionEffect:B0,useLayoutEffect:ah,useMemo:jo,useReducer:bp,useRef:vu,useState:function(){return bp(Us)},useDebugValue:Ap,useDeferredValue:function(d,h){var m=ea();return Ky(m,nr.memoizedState,d,h)},useTransition:function(){var d=bp(Us)[0],h=ea().memoizedState;return[typeof d=="boolean"?d:Zd(d),h]},useSyncExternalStore:By,useId:wo,useHostTransitionStatus:lh,useFormState:Cp,useActionState:Cp,useOptimistic:function(d,h){var m=ea();return th(m,nr,d,h)},useMemoCache:eh,useCacheRefresh:U0},W0={readContext:Ur,use:vp,useCallback:ai,useContext:Ur,useEffect:Si,useImperativeHandle:Yy,useInsertionEffect:B0,useLayoutEffect:ah,useMemo:jo,useReducer:zy,useRef:vu,useState:function(){return zy(Us)},useDebugValue:Ap,useDeferredValue:function(d,h){var m=ea();return nr===null?ih(m,d,h):Ky(m,nr.memoizedState,d,h)},useTransition:function(){var d=zy(Us)[0],h=ea().memoizedState;return[typeof d=="boolean"?d:Zd(d),h]},useSyncExternalStore:By,useId:wo,useHostTransitionStatus:lh,useFormState:mn,useActionState:mn,useOptimistic:function(d,h){var m=ea();return nr!==null?th(m,nr,d,h):(m.baseState=d,[d,m.queue.dispatch])},useMemoCache:eh,useCacheRefresh:U0},oa=null,ii=0;function Dp(d){var h=ii;return ii+=1,oa===null&&(oa=[]),Oy(oa,d,h)}function uh(d,h){h=h.props.ref,d.ref=h!==void 0?h:null}function lc(d,h){throw h.$$typeof===p?Error(a(525)):(d=Object.prototype.toString.call(h),Error(a(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d)))}function cc(d){var h=d._init;return h(d._payload)}function tx(d){function h(We,qe){if(d){var Ke=We.deletions;Ke===null?(We.deletions=[qe],We.flags|=16):Ke.push(qe)}}function m(We,qe){if(!d)return null;for(;qe!==null;)h(We,qe),qe=qe.sibling;return null}function S(We){for(var qe=new Map;We!==null;)We.key!==null?qe.set(We.key,We):qe.set(We.index,We),We=We.sibling;return qe}function E(We,qe){return We=Ua(We,qe),We.index=0,We.sibling=null,We}function L(We,qe,Ke){return We.index=Ke,d?(Ke=We.alternate,Ke!==null?(Ke=Ke.index,Ke<qe?(We.flags|=67108866,qe):Ke):(We.flags|=67108866,qe)):(We.flags|=1048576,qe)}function Z(We){return d&&We.alternate===null&&(We.flags|=67108866),We}function pe(We,qe,Ke,ht){return qe===null||qe.tag!==6?(qe=Ty(Ke,We.mode,ht),qe.return=We,qe):(qe=E(qe,Ke),qe.return=We,qe)}function Oe(We,qe,Ke,ht){var Mt=Ke.type;return Mt===b?dt(We,qe,Ke.props.children,ht,Ke.key):qe!==null&&(qe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===R&&cc(Mt)===qe.type)?(qe=E(qe,Ke.props),uh(qe,Ke),qe.return=We,qe):(qe=up(Ke.type,Ke.key,Ke.props,null,We.mode,ht),uh(qe,Ke),qe.return=We,qe)}function Je(We,qe,Ke,ht){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==Ke.containerInfo||qe.stateNode.implementation!==Ke.implementation?(qe=du(Ke,We.mode,ht),qe.return=We,qe):(qe=E(qe,Ke.children||[]),qe.return=We,qe)}function dt(We,qe,Ke,ht,Mt){return qe===null||qe.tag!==7?(qe=Xl(Ke,We.mode,ht,Mt),qe.return=We,qe):(qe=E(qe,Ke),qe.return=We,qe)}function pt(We,qe,Ke){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=Ty(""+qe,We.mode,Ke),qe.return=We,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case g:return Ke=up(qe.type,qe.key,qe.props,null,We.mode,Ke),uh(Ke,qe),Ke.return=We,Ke;case x:return qe=du(qe,We.mode,Ke),qe.return=We,qe;case R:var ht=qe._init;return qe=ht(qe._payload),pt(We,qe,Ke)}if(G(qe)||B(qe))return qe=Xl(qe,We.mode,Ke,null),qe.return=We,qe;if(typeof qe.then=="function")return pt(We,Dp(qe),Ke);if(qe.$$typeof===C)return pt(We,fp(We,qe),Ke);lc(We,qe)}return null}function tt(We,qe,Ke,ht){var Mt=qe!==null?qe.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Mt!==null?null:pe(We,qe,""+Ke,ht);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case g:return Ke.key===Mt?Oe(We,qe,Ke,ht):null;case x:return Ke.key===Mt?Je(We,qe,Ke,ht):null;case R:return Mt=Ke._init,Ke=Mt(Ke._payload),tt(We,qe,Ke,ht)}if(G(Ke)||B(Ke))return Mt!==null?null:dt(We,qe,Ke,ht,null);if(typeof Ke.then=="function")return tt(We,qe,Dp(Ke),ht);if(Ke.$$typeof===C)return tt(We,qe,fp(We,Ke),ht);lc(We,Ke)}return null}function Ze(We,qe,Ke,ht,Mt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return We=We.get(Ke)||null,pe(qe,We,""+ht,Mt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case g:return We=We.get(ht.key===null?Ke:ht.key)||null,Oe(qe,We,ht,Mt);case x:return We=We.get(ht.key===null?Ke:ht.key)||null,Je(qe,We,ht,Mt);case R:var bn=ht._init;return ht=bn(ht._payload),Ze(We,qe,Ke,ht,Mt)}if(G(ht)||B(ht))return We=We.get(Ke)||null,dt(qe,We,ht,Mt,null);if(typeof ht.then=="function")return Ze(We,qe,Ke,Dp(ht),Mt);if(ht.$$typeof===C)return Ze(We,qe,Ke,fp(qe,ht),Mt);lc(qe,ht)}return null}function Kt(We,qe,Ke,ht){for(var Mt=null,bn=null,zt=qe,Qt=qe=0,ya=null;zt!==null&&Qt<Ke.length;Qt++){zt.index>Qt?(ya=zt,zt=null):ya=zt.sibling;var Bn=tt(We,zt,Ke[Qt],ht);if(Bn===null){zt===null&&(zt=ya);break}d&&zt&&Bn.alternate===null&&h(We,zt),qe=L(Bn,qe,Qt),bn===null?Mt=Bn:bn.sibling=Bn,bn=Bn,zt=ya}if(Qt===Ke.length)return m(We,zt),kn&&Jl(We,Qt),Mt;if(zt===null){for(;Qt<Ke.length;Qt++)zt=pt(We,Ke[Qt],ht),zt!==null&&(qe=L(zt,qe,Qt),bn===null?Mt=zt:bn.sibling=zt,bn=zt);return kn&&Jl(We,Qt),Mt}for(zt=S(zt);Qt<Ke.length;Qt++)ya=Ze(zt,We,Qt,Ke[Qt],ht),ya!==null&&(d&&ya.alternate!==null&&zt.delete(ya.key===null?Qt:ya.key),qe=L(ya,qe,Qt),bn===null?Mt=ya:bn.sibling=ya,bn=ya);return d&&zt.forEach(function(Sl){return h(We,Sl)}),kn&&Jl(We,Qt),Mt}function Yt(We,qe,Ke,ht){if(Ke==null)throw Error(a(151));for(var Mt=null,bn=null,zt=qe,Qt=qe=0,ya=null,Bn=Ke.next();zt!==null&&!Bn.done;Qt++,Bn=Ke.next()){zt.index>Qt?(ya=zt,zt=null):ya=zt.sibling;var Sl=tt(We,zt,Bn.value,ht);if(Sl===null){zt===null&&(zt=ya);break}d&&zt&&Sl.alternate===null&&h(We,zt),qe=L(Sl,qe,Qt),bn===null?Mt=Sl:bn.sibling=Sl,bn=Sl,zt=ya}if(Bn.done)return m(We,zt),kn&&Jl(We,Qt),Mt;if(zt===null){for(;!Bn.done;Qt++,Bn=Ke.next())Bn=pt(We,Bn.value,ht),Bn!==null&&(qe=L(Bn,qe,Qt),bn===null?Mt=Bn:bn.sibling=Bn,bn=Bn);return kn&&Jl(We,Qt),Mt}for(zt=S(zt);!Bn.done;Qt++,Bn=Ke.next())Bn=Ze(zt,We,Qt,Bn.value,ht),Bn!==null&&(d&&Bn.alternate!==null&&zt.delete(Bn.key===null?Qt:Bn.key),qe=L(Bn,qe,Qt),bn===null?Mt=Bn:bn.sibling=Bn,bn=Bn);return d&&zt.forEach(function(G_){return h(We,G_)}),kn&&Jl(We,Qt),Mt}function cr(We,qe,Ke,ht){if(typeof Ke=="object"&&Ke!==null&&Ke.type===b&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case g:e:{for(var Mt=Ke.key;qe!==null;){if(qe.key===Mt){if(Mt=Ke.type,Mt===b){if(qe.tag===7){m(We,qe.sibling),ht=E(qe,Ke.props.children),ht.return=We,We=ht;break e}}else if(qe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===R&&cc(Mt)===qe.type){m(We,qe.sibling),ht=E(qe,Ke.props),uh(ht,Ke),ht.return=We,We=ht;break e}m(We,qe);break}else h(We,qe);qe=qe.sibling}Ke.type===b?(ht=Xl(Ke.props.children,We.mode,ht,Ke.key),ht.return=We,We=ht):(ht=up(Ke.type,Ke.key,Ke.props,null,We.mode,ht),uh(ht,Ke),ht.return=We,We=ht)}return Z(We);case x:e:{for(Mt=Ke.key;qe!==null;){if(qe.key===Mt)if(qe.tag===4&&qe.stateNode.containerInfo===Ke.containerInfo&&qe.stateNode.implementation===Ke.implementation){m(We,qe.sibling),ht=E(qe,Ke.children||[]),ht.return=We,We=ht;break e}else{m(We,qe);break}else h(We,qe);qe=qe.sibling}ht=du(Ke,We.mode,ht),ht.return=We,We=ht}return Z(We);case R:return Mt=Ke._init,Ke=Mt(Ke._payload),cr(We,qe,Ke,ht)}if(G(Ke))return Kt(We,qe,Ke,ht);if(B(Ke)){if(Mt=B(Ke),typeof Mt!="function")throw Error(a(150));return Ke=Mt.call(Ke),Yt(We,qe,Ke,ht)}if(typeof Ke.then=="function")return cr(We,qe,Dp(Ke),ht);if(Ke.$$typeof===C)return cr(We,qe,fp(We,Ke),ht);lc(We,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,qe!==null&&qe.tag===6?(m(We,qe.sibling),ht=E(qe,Ke),ht.return=We,We=ht):(m(We,qe),ht=Ty(Ke,We.mode,ht),ht.return=We,We=ht),Z(We)):m(We,qe)}return function(We,qe,Ke,ht){try{ii=0;var Mt=cr(We,qe,Ke,ht);return oa=null,Mt}catch(zt){if(zt===Va||zt===mp)throw zt;var bn=Za(29,zt,null,We.mode);return bn.lanes=ht,bn.return=We,bn}finally{}}}var uc=tx(!0),Y0=tx(!1),_i=ie(null),Ha=null;function es(d){var h=d.alternate;X(Vr,Vr.current&1),X(_i,d),Ha===null&&(h===null||rc.current!==null||h.memoizedState!==null)&&(Ha=d)}function K0(d){if(d.tag===22){if(X(Vr,Vr.current),X(_i,d),Ha===null){var h=d.alternate;h!==null&&h.memoizedState!==null&&(Ha=d)}}else No()}function No(){X(Vr,Vr.current),X(_i,_i.current)}function Vs(d){xe(_i),Ha===d&&(Ha=null),xe(Vr)}var Vr=ie(0);function dh(d){for(var h=d;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Wa(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function bu(d,h,m,S){h=d.memoizedState,m=m(S,h),m=m==null?h:f({},h,m),d.memoizedState=m,d.lanes===0&&(d.updateQueue.baseState=m)}var hh={enqueueSetState:function(d,h,m){d=d._reactInternals;var S=Ma(),E=il(S);E.payload=h,m!=null&&(E.callback=m),h=vo(d,E,S),h!==null&&(ki(h,d,S),Qd(h,d,S))},enqueueReplaceState:function(d,h,m){d=d._reactInternals;var S=Ma(),E=il(S);E.tag=1,E.payload=h,m!=null&&(E.callback=m),h=vo(d,E,S),h!==null&&(ki(h,d,S),Qd(h,d,S))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var m=Ma(),S=il(m);S.tag=2,h!=null&&(S.callback=h),h=vo(d,S,m),h!==null&&(ki(h,d,m),Qd(h,d,m))}};function fh(d,h,m,S,E,L,Z){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(S,L,Z):h.prototype&&h.prototype.isPureReactComponent?!Bs(m,S)||!Bs(E,L):!0}function Q0(d,h,m,S){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,S),h.state!==d&&hh.enqueueReplaceState(h,h.state,null)}function cl(d,h){var m=h;if("ref"in h){m={};for(var S in h)S!=="ref"&&(m[S]=h[S])}if(d=d.defaultProps){m===h&&(m=f({},m));for(var E in d)m[E]===void 0&&(m[E]=d[E])}return m}var dc=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function nx(d){dc(d)}function Op(d){console.error(d)}function X0(d){dc(d)}function ph(d,h){try{var m=d.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function Hs(d,h,m){try{var S=d.onCaughtError;S(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Mp(d,h,m){return m=il(m),m.tag=3,m.payload={element:null},m.callback=function(){ph(d,h)},m}function rx(d){return d=il(d),d.tag=3,d}function J0(d,h,m,S){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var L=S.value;d.payload=function(){return E(L)},d.callback=function(){Hs(h,m,S)}}var Z=m.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(d.callback=function(){Hs(h,m,S),typeof E!="function"&&(ml===null?ml=new Set([this]):ml.add(this));var pe=S.stack;this.componentDidCatch(S.value,{componentStack:pe!==null?pe:""})})}function Z0(d,h,m,S,E){if(m.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=m.alternate,h!==null&&Wd(h,m,E,!0),m=_i.current,m!==null){switch(m.tag){case 13:return Ha===null?wx():m.alternate===null&&Hr===0&&(Hr=3),m.flags&=-257,m.flags|=65536,m.lanes=E,S===Dy?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([S]):h.add(S),_x(d,S,E)),!1;case 22:return m.flags|=65536,S===Dy?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([S]):m.add(S)),_x(d,S,E)),!1}throw Error(a(435,m.tag))}return _x(d,S,E),wx(),!1}if(kn)return h=_i.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=E,S!==hu&&(d=Error(a(422),{cause:S}),rl(qa(d,m)))):(S!==hu&&(h=Error(a(423),{cause:S}),rl(qa(h,m))),d=d.current.alternate,d.flags|=65536,E&=-E,d.lanes|=E,S=qa(S,m),E=Mp(d.stateNode,S,E),xs(d,E),Hr!==4&&(Hr=2)),!1;var L=Error(a(520),{cause:S});if(L=qa(L,m),Sh===null?Sh=[L]:Sh.push(L),Hr!==4&&(Hr=2),h===null)return!0;S=qa(S,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,d=E&-E,m.lanes|=d,d=Mp(m.stateNode,S,d),xs(m,d),!1;case 1:if(h=m.type,L=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(ml===null||!ml.has(L))))return m.flags|=65536,E&=-E,m.lanes|=E,E=rx(E),J0(E,d,m,S),xs(m,E),!1}m=m.return}while(m!==null);return!1}var e1=Error(a(461)),pa=!1;function Cr(d,h,m,S){h.child=d===null?Y0(h,null,m,S):uc(h,d.child,m,S)}function Ip(d,h,m,S,E){m=m.render;var L=h.ref;if("ref"in S){var Z={};for(var pe in S)pe!=="ref"&&(Z[pe]=S[pe])}else Z=S;return ec(h),S=Ry(d,h,m,Z,L,E),pe=Fy(),d!==null&&!pa?(ic(d,h,E),So(d,h,E)):(kn&&pe&&Ay(h),h.flags|=1,Cr(d,h,S,E),h.child)}function Rp(d,h,m,S,E){if(d===null){var L=m.type;return typeof L=="function"&&!Ql(L)&&L.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=L,Lp(d,h,L,S,E)):(d=up(m.type,null,S,h,h.mode,E),d.ref=h.ref,d.return=h,h.child=d)}if(L=d.child,!js(d,E)){var Z=L.memoizedProps;if(m=m.compare,m=m!==null?m:Bs,m(Z,S)&&d.ref===h.ref)return So(d,h,E)}return h.flags|=1,d=Ua(L,S),d.ref=h.ref,d.return=h,h.child=d}function Lp(d,h,m,S,E){if(d!==null){var L=d.memoizedProps;if(Bs(L,S)&&d.ref===h.ref)if(pa=!1,h.pendingProps=S=L,js(d,E))(d.flags&131072)!==0&&(pa=!0);else return h.lanes=d.lanes,So(d,h,E)}return ju(d,h,m,S,E)}function mh(d,h,m){var S=h.pendingProps,E=S.children,L=d!==null?d.memoizedState:null;if(S.mode==="hidden"){if((h.flags&128)!==0){if(S=L!==null?L.baseLanes|m:m,d!==null){for(E=h.child=d.child,L=0;E!==null;)L=L|E.lanes|E.childLanes,E=E.sibling;h.childLanes=L&~S}else h.childLanes=0,h.child=null;return hc(d,h,S,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},d!==null&&pp(h,L!==null?L.cachePool:null),L!==null?bo(h,L):yp(),K0(h);else return h.lanes=h.childLanes=536870912,hc(d,h,L!==null?L.baseLanes|m:m,m)}else L!==null?(pp(h,L.cachePool),bo(h,L),No(),h.memoizedState=null):(d!==null&&pp(h,null),yp(),No());return Cr(d,h,E,m),h.child}function hc(d,h,m,S){var E=xo();return E=E===null?null:{parent:mr._currentValue,pool:E},h.memoizedState={baseLanes:m,cachePool:E},d!==null&&pp(h,null),yp(),K0(h),d!==null&&Wd(d,h,S,!0),null}function Ut(d,h){var m=h.ref;if(m===null)d!==null&&d.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(a(284));(d===null||d.ref!==m)&&(h.flags|=4194816)}}function ju(d,h,m,S,E){return ec(h),m=Ry(d,h,m,S,void 0,E),S=Fy(),d!==null&&!pa?(ic(d,h,E),So(d,h,E)):(kn&&S&&Ay(h),h.flags|=1,Cr(d,h,m,E),h.child)}function Fp(d,h,m,S,E,L){return ec(h),h.updateQueue=null,m=I0(h,S,m,E),M0(d),S=Fy(),d!==null&&!pa?(ic(d,h,L),So(d,h,L)):(kn&&S&&Ay(h),h.flags|=1,Cr(d,h,m,L),h.child)}function ul(d,h,m,S,E){if(ec(h),h.stateNode===null){var L=Kl,Z=m.contextType;typeof Z=="object"&&Z!==null&&(L=Ur(Z)),L=new m(S,L),h.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=hh,h.stateNode=L,L._reactInternals=h,L=h.stateNode,L.props=S,L.state=h.memoizedState,L.refs={},nc(h),Z=m.contextType,L.context=typeof Z=="object"&&Z!==null?Ur(Z):Kl,L.state=h.memoizedState,Z=m.getDerivedStateFromProps,typeof Z=="function"&&(bu(h,m,Z,S),L.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(Z=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),Z!==L.state&&hh.enqueueReplaceState(L,L.state,null),Pa(h,S,L,E),vs(),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(d===null){L=h.stateNode;var pe=h.memoizedProps,Oe=cl(m,pe);L.props=Oe;var Je=L.context,dt=m.contextType;Z=Kl,typeof dt=="object"&&dt!==null&&(Z=Ur(dt));var pt=m.getDerivedStateFromProps;dt=typeof pt=="function"||typeof L.getSnapshotBeforeUpdate=="function",pe=h.pendingProps!==pe,dt||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(pe||Je!==Z)&&Q0(h,L,S,Z),qs=!1;var tt=h.memoizedState;L.state=tt,Pa(h,S,L,E),vs(),Je=h.memoizedState,pe||tt!==Je||qs?(typeof pt=="function"&&(bu(h,m,pt,S),Je=h.memoizedState),(Oe=qs||fh(h,m,Oe,S,tt,Je,Z))?(dt||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(h.flags|=4194308)):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=Je),L.props=S,L.state=Je,L.context=Z,S=Oe):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{L=h.stateNode,mu(d,h),Z=h.memoizedProps,dt=cl(m,Z),L.props=dt,pt=h.pendingProps,tt=L.context,Je=m.contextType,Oe=Kl,typeof Je=="object"&&Je!==null&&(Oe=Ur(Je)),pe=m.getDerivedStateFromProps,(Je=typeof pe=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Z!==pt||tt!==Oe)&&Q0(h,L,S,Oe),qs=!1,tt=h.memoizedState,L.state=tt,Pa(h,S,L,E),vs();var Ze=h.memoizedState;Z!==pt||tt!==Ze||qs||d!==null&&d.dependencies!==null&&hp(d.dependencies)?(typeof pe=="function"&&(bu(h,m,pe,S),Ze=h.memoizedState),(dt=qs||fh(h,m,dt,S,tt,Ze,Oe)||d!==null&&d.dependencies!==null&&hp(d.dependencies))?(Je||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(S,Ze,Oe),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(S,Ze,Oe)),typeof L.componentDidUpdate=="function"&&(h.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof L.componentDidUpdate!="function"||Z===d.memoizedProps&&tt===d.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Z===d.memoizedProps&&tt===d.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=Ze),L.props=S,L.state=Ze,L.context=Oe,S=dt):(typeof L.componentDidUpdate!="function"||Z===d.memoizedProps&&tt===d.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Z===d.memoizedProps&&tt===d.memoizedState||(h.flags|=1024),S=!1)}return L=S,Ut(d,h),S=(h.flags&128)!==0,L||S?(L=h.stateNode,m=S&&typeof m.getDerivedStateFromError!="function"?null:L.render(),h.flags|=1,d!==null&&S?(h.child=uc(h,d.child,null,E),h.child=uc(h,null,m,E)):Cr(d,h,m,E),h.memoizedState=L.state,d=h.child):d=So(d,h,E),d}function t1(d,h,m,S){return Gd(),h.flags|=256,Cr(d,h,m,S),h.child}var gh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $p(d){return{baseLanes:d,cachePool:T0()}}function ma(d,h,m){return d=d!==null?d.childLanes&~m:0,h&&(d|=ns),d}function n1(d,h,m){var S=h.pendingProps,E=!1,L=(h.flags&128)!==0,Z;if((Z=L)||(Z=d!==null&&d.memoizedState===null?!1:(Vr.current&2)!==0),Z&&(E=!0,h.flags&=-129),Z=(h.flags&32)!==0,h.flags&=-33,d===null){if(kn){if(E?es(h):No(),kn){var pe=Pr,Oe;if(Oe=pe){e:{for(Oe=pe,pe=ei;Oe.nodeType!==8;){if(!pe){pe=null;break e}if(Oe=Ns(Oe.nextSibling),Oe===null){pe=null;break e}}pe=Oe}pe!==null?(h.memoizedState={dehydrated:pe,treeContext:_r!==null?{id:Er,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},Oe=Za(18,null,null,0),Oe.stateNode=pe,Oe.return=h,h.child=Oe,sa=h,Pr=null,Oe=!0):Oe=!1}Oe||Xi(h)}if(pe=h.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))return Wa(pe)?h.lanes=32:h.lanes=536870912,null;Vs(h)}return pe=S.children,S=S.fallback,E?(No(),E=h.mode,pe=yh({mode:"hidden",children:pe},E),S=Xl(S,E,m,null),pe.return=h,S.return=h,pe.sibling=S,h.child=pe,E=h.child,E.memoizedState=$p(m),E.childLanes=ma(d,Z,m),h.memoizedState=gh,S):(es(h),ax(h,pe))}if(Oe=d.memoizedState,Oe!==null&&(pe=Oe.dehydrated,pe!==null)){if(L)h.flags&256?(es(h),h.flags&=-257,h=ix(d,h,m)):h.memoizedState!==null?(No(),h.child=d.child,h.flags|=128,h=null):(No(),E=S.fallback,pe=h.mode,S=yh({mode:"visible",children:S.children},pe),E=Xl(E,pe,m,null),E.flags|=2,S.return=h,E.return=h,S.sibling=E,h.child=S,uc(h,d.child,null,m),S=h.child,S.memoizedState=$p(m),S.childLanes=ma(d,Z,m),h.memoizedState=gh,h=E);else if(es(h),Wa(pe)){if(Z=pe.nextSibling&&pe.nextSibling.dataset,Z)var Je=Z.dgst;Z=Je,S=Error(a(419)),S.stack="",S.digest=Z,rl({value:S,source:null,stack:null}),h=ix(d,h,m)}else if(pa||Wd(d,h,m,!1),Z=(m&d.childLanes)!==0,pa||Z){if(Z=jr,Z!==null&&(S=m&-m,S=(S&42)!==0?1:jt(S),S=(S&(Z.suspendedLanes|m))!==0?0:S,S!==0&&S!==Oe.retryLane))throw Oe.retryLane=S,Yl(d,S),ki(Z,d,S),e1;pe.data==="$?"||wx(),h=ix(d,h,m)}else pe.data==="$?"?(h.flags|=192,h.child=d.child,h=null):(d=Oe.treeContext,Pr=Ns(pe.nextSibling),sa=h,kn=!0,ys=null,ei=!1,d!==null&&(Ki[Qi++]=Er,Ki[Qi++]=yo,Ki[Qi++]=_r,Er=d.id,yo=d.overflow,_r=h),h=ax(h,S.children),h.flags|=4096);return h}return E?(No(),E=S.fallback,pe=h.mode,Oe=d.child,Je=Oe.sibling,S=Ua(Oe,{mode:"hidden",children:S.children}),S.subtreeFlags=Oe.subtreeFlags&65011712,Je!==null?E=Ua(Je,E):(E=Xl(E,pe,m,null),E.flags|=2),E.return=h,S.return=h,S.sibling=E,h.child=S,S=E,E=h.child,pe=d.child.memoizedState,pe===null?pe=$p(m):(Oe=pe.cachePool,Oe!==null?(Je=mr._currentValue,Oe=Oe.parent!==Je?{parent:Je,pool:Je}:Oe):Oe=T0(),pe={baseLanes:pe.baseLanes|m,cachePool:Oe}),E.memoizedState=pe,E.childLanes=ma(d,Z,m),h.memoizedState=gh,S):(es(h),m=d.child,d=m.sibling,m=Ua(m,{mode:"visible",children:S.children}),m.return=h,m.sibling=null,d!==null&&(Z=h.deletions,Z===null?(h.deletions=[d],h.flags|=16):Z.push(d)),h.child=m,h.memoizedState=null,m)}function ax(d,h){return h=yh({mode:"visible",children:h},d.mode),h.return=d,d.child=h}function yh(d,h){return d=Za(22,d,null,h),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function ix(d,h,m){return uc(h,d.child,null,m),d=ax(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function sx(d,h,m){d.lanes|=h;var S=d.alternate;S!==null&&(S.lanes|=h),ti(d.return,h,m)}function ox(d,h,m,S,E){var L=d.memoizedState;L===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:m,tailMode:E}:(L.isBackwards=h,L.rendering=null,L.renderingStartTime=0,L.last=S,L.tail=m,L.tailMode=E)}function r1(d,h,m){var S=h.pendingProps,E=S.revealOrder,L=S.tail;if(Cr(d,h,S.children,m),S=Vr.current,(S&2)!==0)S=S&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&sx(d,m,h);else if(d.tag===19)sx(d,m,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}S&=1}switch(X(Vr,S),E){case"forwards":for(m=h.child,E=null;m!==null;)d=m.alternate,d!==null&&dh(d)===null&&(E=m),m=m.sibling;m=E,m===null?(E=h.child,h.child=null):(E=m.sibling,m.sibling=null),ox(h,!1,E,m,L);break;case"backwards":for(m=null,E=h.child,h.child=null;E!==null;){if(d=E.alternate,d!==null&&dh(d)===null){h.child=E;break}d=E.sibling,E.sibling=m,m=E,E=d}ox(h,!0,m,null,L);break;case"together":ox(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function So(d,h,m){if(d!==null&&(h.dependencies=d.dependencies),pl|=h.lanes,(m&h.childLanes)===0)if(d!==null){if(Wd(d,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(d!==null&&h.child!==d.child)throw Error(a(153));if(h.child!==null){for(d=h.child,m=Ua(d,d.pendingProps),h.child=m,m.return=h;d.sibling!==null;)d=d.sibling,m=m.sibling=Ua(d,d.pendingProps),m.return=h;m.sibling=null}return h.child}function js(d,h){return(d.lanes&h)!==0?!0:(d=d.dependencies,!!(d!==null&&hp(d)))}function Ga(d,h,m){switch(h.tag){case 3:ce(h,h.stateNode.containerInfo),Ni(h,mr,d.memoizedState.cache),Gd();break;case 27:case 5:Ve(h);break;case 4:ce(h,h.stateNode.containerInfo);break;case 10:Ni(h,h.type,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(es(h),h.flags|=128,null):(m&h.child.childLanes)!==0?n1(d,h,m):(es(h),d=So(d,h,m),d!==null?d.sibling:null);es(h);break;case 19:var E=(d.flags&128)!==0;if(S=(m&h.childLanes)!==0,S||(Wd(d,h,m,!1),S=(m&h.childLanes)!==0),E){if(S)return r1(d,h,m);h.flags|=128}if(E=h.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),X(Vr,Vr.current),S)break;return null;case 22:case 23:return h.lanes=0,mh(d,h,m);case 24:Ni(h,mr,d.memoizedState.cache)}return So(d,h,m)}function zp(d,h,m){if(d!==null)if(d.memoizedProps!==h.pendingProps)pa=!0;else{if(!js(d,m)&&(h.flags&128)===0)return pa=!1,Ga(d,h,m);pa=(d.flags&131072)!==0}else pa=!1,kn&&(h.flags&1048576)!==0&&ky(h,Ud,h.index);switch(h.lanes=0,h.tag){case 16:e:{d=h.pendingProps;var S=h.elementType,E=S._init;if(S=E(S._payload),h.type=S,typeof S=="function")Ql(S)?(d=cl(S,d),h.tag=1,h=ul(null,h,S,d,m)):(h.tag=0,h=ju(null,h,S,d,m));else{if(S!=null){if(E=S.$$typeof,E===A){h.tag=11,h=Ip(null,h,S,d,m);break e}else if(E===I){h.tag=14,h=Rp(null,h,S,d,m);break e}}throw h=W(S)||S,Error(a(306,h,""))}}return h;case 0:return ju(d,h,h.type,h.pendingProps,m);case 1:return S=h.type,E=cl(S,h.pendingProps),ul(d,h,S,E,m);case 3:e:{if(ce(h,h.stateNode.containerInfo),d===null)throw Error(a(387));S=h.pendingProps;var L=h.memoizedState;E=L.element,mu(d,h),Pa(h,S,null,m);var Z=h.memoizedState;if(S=Z.cache,Ni(h,mr,S),S!==L.cache&&vn(h,[mr],m,!0),vs(),S=Z.element,L.isDehydrated)if(L={element:S,isDehydrated:!1,cache:Z.cache},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){h=t1(d,h,S,m);break e}else if(S!==E){E=qa(Error(a(424)),h),rl(E),h=t1(d,h,S,m);break e}else{switch(d=h.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(Pr=Ns(d.firstChild),sa=h,kn=!0,ys=null,ei=!0,m=Y0(h,null,S,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Gd(),S===E){h=So(d,h,m);break e}Cr(d,h,S,m)}h=h.child}return h;case 26:return Ut(d,h),d===null?(m=Z1(h.type,null,h.pendingProps,null))?h.memoizedState=m:kn||(m=h.type,d=h.pendingProps,S=mc(Be.current).createElement(m),S[Ht]=h,S[Qn]=d,ua(S,m,d),Ot(S),h.stateNode=S):h.memoizedState=Z1(h.type,d.memoizedProps,h.pendingProps,d.memoizedState),null;case 27:return Ve(h),d===null&&kn&&(S=h.stateNode=Q1(h.type,h.pendingProps,Be.current),sa=h,ei=!0,E=Pr,rs(h.type)?(Mx=E,Pr=Ns(S.firstChild)):Pr=E),Cr(d,h,h.pendingProps.children,m),Ut(d,h),d===null&&(h.flags|=4194304),h.child;case 5:return d===null&&kn&&((E=S=Pr)&&(S=Y1(S,h.type,h.pendingProps,ei),S!==null?(h.stateNode=S,sa=h,Pr=Ns(S.firstChild),ei=!1,E=!0):E=!1),E||Xi(h)),Ve(h),E=h.type,L=h.pendingProps,Z=d!==null?d.memoizedProps:null,S=L.children,rm(E,L)?S=null:Z!==null&&rm(E,Z)&&(h.flags|=32),h.memoizedState!==null&&(E=Ry(d,h,Ly,null,null,m),zu._currentValue=E),Ut(d,h),Cr(d,h,S,m),h.child;case 6:return d===null&&kn&&((d=m=Pr)&&(m=im(m,h.pendingProps,ei),m!==null?(h.stateNode=m,sa=h,Pr=null,d=!0):d=!1),d||Xi(h)),null;case 13:return n1(d,h,m);case 4:return ce(h,h.stateNode.containerInfo),S=h.pendingProps,d===null?h.child=uc(h,null,S,m):Cr(d,h,S,m),h.child;case 11:return Ip(d,h,h.type,h.pendingProps,m);case 7:return Cr(d,h,h.pendingProps,m),h.child;case 8:return Cr(d,h,h.pendingProps.children,m),h.child;case 12:return Cr(d,h,h.pendingProps.children,m),h.child;case 10:return S=h.pendingProps,Ni(h,h.type,S.value),Cr(d,h,S.children,m),h.child;case 9:return E=h.type._context,S=h.pendingProps.children,ec(h),E=Ur(E),S=S(E),h.flags|=1,Cr(d,h,S,m),h.child;case 14:return Rp(d,h,h.type,h.pendingProps,m);case 15:return Lp(d,h,h.type,h.pendingProps,m);case 19:return r1(d,h,m);case 31:return S=h.pendingProps,m=h.mode,S={mode:S.mode,children:S.children},d===null?(m=yh(S,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Ua(d.child,S),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return mh(d,h,m);case 24:return ec(h),S=Ur(mr),d===null?(E=xo(),E===null&&(E=jr,L=Ey(),E.pooledCache=L,L.refCount++,L!==null&&(E.pooledCacheLanes|=m),E=L),h.memoizedState={parent:S,cache:E},nc(h),Ni(h,mr,E)):((d.lanes&m)!==0&&(mu(d,h),Pa(h,null,null,m),vs()),E=d.memoizedState,L=h.memoizedState,E.parent!==S?(E={parent:S,cache:S},h.memoizedState=E,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=E),Ni(h,mr,S)):(S=L.cache,Ni(h,mr,S),S!==E.cache&&vn(h,[mr],m,!0))),Cr(d,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function _o(d){d.flags|=4}function Bp(d,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!da(h)){if(h=_i.current,h!==null&&((Fn&4194048)===Fn?Ha!==null:(Fn&62914560)!==Fn&&(Fn&536870912)===0||h!==Ha))throw pu=Dy,k0;d.flags|=8192}}function qp(d,h){h!==null&&(d.flags|=4),d.flags&16384&&(h=d.tag!==22?Ct():536870912,d.lanes|=h,ku|=h)}function xh(d,h){if(!kn)switch(d.tailMode){case"hidden":h=d.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?d.tail=null:m.sibling=null;break;case"collapsed":m=d.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:S.sibling=null}}function gr(d){var h=d.alternate!==null&&d.alternate.child===d.child,m=0,S=0;if(h)for(var E=d.child;E!==null;)m|=E.lanes|E.childLanes,S|=E.subtreeFlags&65011712,S|=E.flags&65011712,E.return=d,E=E.sibling;else for(E=d.child;E!==null;)m|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=d,E=E.sibling;return d.subtreeFlags|=S,d.childLanes=m,h}function a1(d,h,m){var S=h.pendingProps;switch(Vd(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(h),null;case 1:return gr(h),null;case 3:return m=h.stateNode,S=null,d!==null&&(S=d.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),Ji(mr),Se(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(d===null||d.child===null)&&(Hd(h)?_o(h):d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,N0())),gr(h),null;case 26:return m=h.memoizedState,d===null?(_o(h),m!==null?(gr(h),Bp(h,m)):(gr(h),h.flags&=-16777217)):m?m!==d.memoizedState?(_o(h),gr(h),Bp(h,m)):(gr(h),h.flags&=-16777217):(d.memoizedProps!==S&&_o(h),gr(h),h.flags&=-16777217),null;case 27:Ae(h),m=Be.current;var E=h.type;if(d!==null&&h.stateNode!=null)d.memoizedProps!==S&&_o(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return gr(h),null}d=Ie.current,Hd(h)?j0(h):(d=Q1(E,S,m),h.stateNode=d,_o(h))}return gr(h),null;case 5:if(Ae(h),m=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==S&&_o(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return gr(h),null}if(d=Ie.current,Hd(h))j0(h);else{switch(E=mc(Be.current),d){case 1:d=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:d=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":d=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":d=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":d=E.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof S.is=="string"?E.createElement("select",{is:S.is}):E.createElement("select"),S.multiple?d.multiple=!0:S.size&&(d.size=S.size);break;default:d=typeof S.is=="string"?E.createElement(m,{is:S.is}):E.createElement(m)}}d[Ht]=h,d[Qn]=S;e:for(E=h.child;E!==null;){if(E.tag===5||E.tag===6)d.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break e;for(;E.sibling===null;){if(E.return===null||E.return===h)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}h.stateNode=d;e:switch(ua(d,m,S),m){case"button":case"input":case"select":case"textarea":d=!!S.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&_o(h)}}return gr(h),h.flags&=-16777217,null;case 6:if(d&&h.stateNode!=null)d.memoizedProps!==S&&_o(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(a(166));if(d=Be.current,Hd(h)){if(d=h.stateNode,m=h.memoizedProps,S=null,E=sa,E!==null)switch(E.tag){case 27:case 5:S=E.memoizedProps}d[Ht]=h,d=!!(d.nodeValue===m||S!==null&&S.suppressHydrationWarning===!0||V1(d.nodeValue,m)),d||Xi(h)}else d=mc(d).createTextNode(S),d[Ht]=h,h.stateNode=d}return gr(h),null;case 13:if(S=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(E=Hd(h),S!==null&&S.dehydrated!==null){if(d===null){if(!E)throw Error(a(318));if(E=h.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[Ht]=h}else Gd(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;gr(h),E=!1}else E=N0(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=E),E=!0;if(!E)return h.flags&256?(Vs(h),h):(Vs(h),null)}if(Vs(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=S!==null,d=d!==null&&d.memoizedState!==null,m){S=h.child,E=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(E=S.alternate.memoizedState.cachePool.pool);var L=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(L=S.memoizedState.cachePool.pool),L!==E&&(S.flags|=2048)}return m!==d&&m&&(h.child.flags|=8192),qp(h,h.updateQueue),gr(h),null;case 4:return Se(),d===null&&Ex(h.stateNode.containerInfo),gr(h),null;case 10:return Ji(h.type),gr(h),null;case 19:if(xe(Vr),E=h.memoizedState,E===null)return gr(h),null;if(S=(h.flags&128)!==0,L=E.rendering,L===null)if(S)xh(E,!1);else{if(Hr!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(L=dh(d),L!==null){for(h.flags|=128,xh(E,!1),d=L.updateQueue,h.updateQueue=d,qp(h,d),h.subtreeFlags=0,d=m,m=h.child;m!==null;)qd(m,d),m=m.sibling;return X(Vr,Vr.current&1|2),h.child}d=d.sibling}E.tail!==null&&Ne()>Au&&(h.flags|=128,S=!0,xh(E,!1),h.lanes=4194304)}else{if(!S)if(d=dh(L),d!==null){if(h.flags|=128,S=!0,d=d.updateQueue,h.updateQueue=d,qp(h,d),xh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!L.alternate&&!kn)return gr(h),null}else 2*Ne()-E.renderingStartTime>Au&&m!==536870912&&(h.flags|=128,S=!0,xh(E,!1),h.lanes=4194304);E.isBackwards?(L.sibling=h.child,h.child=L):(d=E.last,d!==null?d.sibling=L:h.child=L,E.last=L)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=Ne(),h.sibling=null,d=Vr.current,X(Vr,S?d&1|2:d&1),h):(gr(h),null);case 22:case 23:return Vs(h),Iy(),S=h.memoizedState!==null,d!==null?d.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(m&536870912)!==0&&(h.flags&128)===0&&(gr(h),h.subtreeFlags&6&&(h.flags|=8192)):gr(h),m=h.updateQueue,m!==null&&qp(h,m.retryQueue),m=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(m=d.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==m&&(h.flags|=2048),d!==null&&xe(tc),null;case 24:return m=null,d!==null&&(m=d.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Ji(mr),gr(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function i1(d,h){switch(Vd(h),h.tag){case 1:return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return Ji(mr),Se(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 26:case 27:case 5:return Ae(h),null;case 13:if(Vs(h),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Gd()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return xe(Vr),null;case 4:return Se(),null;case 10:return Ji(h.type),null;case 22:case 23:return Vs(h),Iy(),d!==null&&xe(tc),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 24:return Ji(mr),null;case 25:return null;default:return null}}function s1(d,h){switch(Vd(h),h.tag){case 3:Ji(mr),Se();break;case 26:case 27:case 5:Ae(h);break;case 4:Se();break;case 13:Vs(h);break;case 19:xe(Vr);break;case 10:Ji(h.type);break;case 22:case 23:Vs(h),Iy(),d!==null&&xe(tc);break;case 24:Ji(mr)}}function vh(d,h){try{var m=h.updateQueue,S=m!==null?m.lastEffect:null;if(S!==null){var E=S.next;m=E;do{if((m.tag&d)===d){S=void 0;var L=m.create,Z=m.inst;S=L(),Z.destroy=S}m=m.next}while(m!==E)}}catch(pe){yr(h,h.return,pe)}}function dl(d,h,m){try{var S=h.updateQueue,E=S!==null?S.lastEffect:null;if(E!==null){var L=E.next;S=L;do{if((S.tag&d)===d){var Z=S.inst,pe=Z.destroy;if(pe!==void 0){Z.destroy=void 0,E=h;var Oe=m,Je=pe;try{Je()}catch(dt){yr(E,Oe,dt)}}}S=S.next}while(S!==L)}}catch(dt){yr(h,h.return,dt)}}function o1(d){var h=d.updateQueue;if(h!==null){var m=d.stateNode;try{My(h,m)}catch(S){yr(d,d.return,S)}}}function lx(d,h,m){m.props=cl(d.type,d.memoizedProps),m.state=d.memoizedState;try{m.componentWillUnmount()}catch(S){yr(d,h,S)}}function wu(d,h){try{var m=d.ref;if(m!==null){switch(d.tag){case 26:case 27:case 5:var S=d.stateNode;break;case 30:S=d.stateNode;break;default:S=d.stateNode}typeof m=="function"?d.refCleanup=m(S):m.current=S}}catch(E){yr(d,h,E)}}function Gs(d,h){var m=d.ref,S=d.refCleanup;if(m!==null)if(typeof S=="function")try{S()}catch(E){yr(d,h,E)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){yr(d,h,E)}else m.current=null}function Up(d){var h=d.type,m=d.memoizedProps,S=d.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&S.focus();break e;case"img":m.src?S.src=m.src:m.srcSet&&(S.srcset=m.srcSet)}}catch(E){yr(d,d.return,E)}}function Vp(d,h,m){try{var S=d.stateNode;__(S,d.type,m,h),S[Qn]=h}catch(E){yr(d,d.return,E)}}function Nu(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&rs(d.type)||d.tag===4}function bh(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Nu(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&rs(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Hp(d,h,m){var S=d.tag;if(S===5||S===6)d=d.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(d,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(d),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=tm));else if(S!==4&&(S===27&&rs(d.type)&&(m=d.stateNode,h=null),d=d.child,d!==null))for(Hp(d,h,m),d=d.sibling;d!==null;)Hp(d,h,m),d=d.sibling}function jh(d,h,m){var S=d.tag;if(S===5||S===6)d=d.stateNode,h?m.insertBefore(d,h):m.appendChild(d);else if(S!==4&&(S===27&&rs(d.type)&&(m=d.stateNode),d=d.child,d!==null))for(jh(d,h,m),d=d.sibling;d!==null;)jh(d,h,m),d=d.sibling}function wh(d){var h=d.stateNode,m=d.memoizedProps;try{for(var S=d.type,E=h.attributes;E.length;)h.removeAttributeNode(E[0]);ua(h,S,m),h[Ht]=d,h[Qn]=m}catch(L){yr(d,d.return,L)}}var Ws=!1,Zn=!1,Co=!1,l1=typeof WeakSet=="function"?WeakSet:Set,la=null;function d_(d,h){if(d=d.containerInfo,ws=cm,d=v0(d),Sy(d)){if("selectionStart"in d)var m={start:d.selectionStart,end:d.selectionEnd};else e:{m=(m=d.ownerDocument)&&m.defaultView||window;var S=m.getSelection&&m.getSelection();if(S&&S.rangeCount!==0){m=S.anchorNode;var E=S.anchorOffset,L=S.focusNode;S=S.focusOffset;try{m.nodeType,L.nodeType}catch{m=null;break e}var Z=0,pe=-1,Oe=-1,Je=0,dt=0,pt=d,tt=null;t:for(;;){for(var Ze;pt!==m||E!==0&&pt.nodeType!==3||(pe=Z+E),pt!==L||S!==0&&pt.nodeType!==3||(Oe=Z+S),pt.nodeType===3&&(Z+=pt.nodeValue.length),(Ze=pt.firstChild)!==null;)tt=pt,pt=Ze;for(;;){if(pt===d)break t;if(tt===m&&++Je===E&&(pe=Z),tt===L&&++dt===S&&(Oe=Z),(Ze=pt.nextSibling)!==null)break;pt=tt,tt=pt.parentNode}pt=Ze}m=pe===-1||Oe===-1?null:{start:pe,end:Oe}}else m=null}m=m||{start:0,end:0}}else m=null;for(nm={focusedElem:d,selectionRange:m},cm=!1,la=h;la!==null;)if(h=la,d=h.child,(h.subtreeFlags&1024)!==0&&d!==null)d.return=h,la=d;else for(;la!==null;){switch(h=la,L=h.alternate,d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&L!==null){d=void 0,m=h,E=L.memoizedProps,L=L.memoizedState,S=m.stateNode;try{var Kt=cl(m.type,E,m.elementType===m.type);d=S.getSnapshotBeforeUpdate(Kt,L),S.__reactInternalSnapshotBeforeUpdate=d}catch(Yt){yr(m,m.return,Yt)}}break;case 3:if((d&1024)!==0){if(d=h.stateNode.containerInfo,m=d.nodeType,m===9)Ox(d);else if(m===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":Ox(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(a(163))}if(d=h.sibling,d!==null){d.return=h.return,la=d;break}la=h.return}}function c1(d,h,m){var S=m.flags;switch(m.tag){case 0:case 11:case 15:hl(d,m),S&4&&vh(5,m);break;case 1:if(hl(d,m),S&4)if(d=m.stateNode,h===null)try{d.componentDidMount()}catch(Z){yr(m,m.return,Z)}else{var E=cl(m.type,h.memoizedProps);h=h.memoizedState;try{d.componentDidUpdate(E,h,d.__reactInternalSnapshotBeforeUpdate)}catch(Z){yr(m,m.return,Z)}}S&64&&o1(m),S&512&&wu(m,m.return);break;case 3:if(hl(d,m),S&64&&(d=m.updateQueue,d!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{My(d,h)}catch(Z){yr(m,m.return,Z)}}break;case 27:h===null&&S&4&&wh(m);case 26:case 5:hl(d,m),h===null&&S&4&&Up(m),S&512&&wu(m,m.return);break;case 12:hl(d,m);break;case 13:hl(d,m),S&4&&h1(d,m),S&64&&(d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(m=Qp.bind(null,m),Iu(d,m))));break;case 22:if(S=m.memoizedState!==null||Ws,!S){h=h!==null&&h.memoizedState!==null||Zn,E=Ws;var L=Zn;Ws=S,(Zn=h)&&!L?ko(d,m,(m.subtreeFlags&8772)!==0):hl(d,m),Ws=E,Zn=L}break;case 30:break;default:hl(d,m)}}function u1(d){var h=d.alternate;h!==null&&(d.alternate=null,u1(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&Tn(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Dr=null,si=!1;function To(d,h,m){for(m=m.child;m!==null;)d1(d,h,m),m=m.sibling}function d1(d,h,m){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(J,m)}catch{}switch(m.tag){case 26:Zn||Gs(m,h),To(d,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Zn||Gs(m,h);var S=Dr,E=si;rs(m.type)&&(Dr=m.stateNode,si=!1),To(d,h,m),Oh(m.stateNode),Dr=S,si=E;break;case 5:Zn||Gs(m,h);case 6:if(S=Dr,E=si,Dr=null,To(d,h,m),Dr=S,si=E,Dr!==null)if(si)try{(Dr.nodeType===9?Dr.body:Dr.nodeName==="HTML"?Dr.ownerDocument.body:Dr).removeChild(m.stateNode)}catch(L){yr(m,h,L)}else try{Dr.removeChild(m.stateNode)}catch(L){yr(m,h,L)}break;case 18:Dr!==null&&(si?(d=Dr,am(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,m.stateNode),Bh(d)):am(Dr,m.stateNode));break;case 4:S=Dr,E=si,Dr=m.stateNode.containerInfo,si=!0,To(d,h,m),Dr=S,si=E;break;case 0:case 11:case 14:case 15:Zn||dl(2,m,h),Zn||dl(4,m,h),To(d,h,m);break;case 1:Zn||(Gs(m,h),S=m.stateNode,typeof S.componentWillUnmount=="function"&&lx(m,h,S)),To(d,h,m);break;case 21:To(d,h,m);break;case 22:Zn=(S=Zn)||m.memoizedState!==null,To(d,h,m),Zn=S;break;default:To(d,h,m)}}function h1(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Bh(d)}catch(m){yr(h,h.return,m)}}function h_(d){switch(d.tag){case 13:case 19:var h=d.stateNode;return h===null&&(h=d.stateNode=new l1),h;case 22:return d=d.stateNode,h=d._retryCache,h===null&&(h=d._retryCache=new l1),h;default:throw Error(a(435,d.tag))}}function cx(d,h){var m=h_(d);h.forEach(function(S){var E=x_.bind(null,d,S);m.has(S)||(m.add(S),S.then(E,E))})}function Ci(d,h){var m=h.deletions;if(m!==null)for(var S=0;S<m.length;S++){var E=m[S],L=d,Z=h,pe=Z;e:for(;pe!==null;){switch(pe.tag){case 27:if(rs(pe.type)){Dr=pe.stateNode,si=!1;break e}break;case 5:Dr=pe.stateNode,si=!1;break e;case 3:case 4:Dr=pe.stateNode.containerInfo,si=!0;break e}pe=pe.return}if(Dr===null)throw Error(a(160));d1(L,Z,E),Dr=null,si=!1,L=E.alternate,L!==null&&(L.return=null),E.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)ux(h,d),h=h.sibling}var ts=null;function ux(d,h){var m=d.alternate,S=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Ci(h,d),oi(d),S&4&&(dl(3,d,d.return),vh(3,d),dl(5,d,d.return));break;case 1:Ci(h,d),oi(d),S&512&&(Zn||m===null||Gs(m,m.return)),S&64&&Ws&&(d=d.updateQueue,d!==null&&(S=d.callbacks,S!==null&&(m=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=m===null?S:m.concat(S))));break;case 26:var E=ts;if(Ci(h,d),oi(d),S&512&&(Zn||m===null||Gs(m,m.return)),S&4){var L=m!==null?m.memoizedState:null;if(S=d.memoizedState,m===null)if(S===null)if(d.stateNode===null){e:{S=d.type,m=d.memoizedProps,E=E.ownerDocument||E;t:switch(S){case"title":L=E.getElementsByTagName("title")[0],(!L||L[qr]||L[Ht]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=E.createElement(S),E.head.insertBefore(L,E.querySelector("head > title"))),ua(L,S,m),L[Ht]=d,Ot(L),S=L;break e;case"link":var Z=nj("link","href",E).get(S+(m.href||""));if(Z){for(var pe=0;pe<Z.length;pe++)if(L=Z[pe],L.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&L.getAttribute("rel")===(m.rel==null?null:m.rel)&&L.getAttribute("title")===(m.title==null?null:m.title)&&L.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){Z.splice(pe,1);break t}}L=E.createElement(S),ua(L,S,m),E.head.appendChild(L);break;case"meta":if(Z=nj("meta","content",E).get(S+(m.content||""))){for(pe=0;pe<Z.length;pe++)if(L=Z[pe],L.getAttribute("content")===(m.content==null?null:""+m.content)&&L.getAttribute("name")===(m.name==null?null:m.name)&&L.getAttribute("property")===(m.property==null?null:m.property)&&L.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&L.getAttribute("charset")===(m.charSet==null?null:m.charSet)){Z.splice(pe,1);break t}}L=E.createElement(S),ua(L,S,m),E.head.appendChild(L);break;default:throw Error(a(468,S))}L[Ht]=d,Ot(L),S=L}d.stateNode=S}else rj(E,d.type,d.stateNode);else d.stateNode=tj(E,S,d.memoizedProps);else L!==S?(L===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):L.count--,S===null?rj(E,d.type,d.stateNode):tj(E,S,d.memoizedProps)):S===null&&d.stateNode!==null&&Vp(d,d.memoizedProps,m.memoizedProps)}break;case 27:Ci(h,d),oi(d),S&512&&(Zn||m===null||Gs(m,m.return)),m!==null&&S&4&&Vp(d,d.memoizedProps,m.memoizedProps);break;case 5:if(Ci(h,d),oi(d),S&512&&(Zn||m===null||Gs(m,m.return)),d.flags&32){E=d.stateNode;try{Ko(E,"")}catch(Ze){yr(d,d.return,Ze)}}S&4&&d.stateNode!=null&&(E=d.memoizedProps,Vp(d,E,m!==null?m.memoizedProps:E)),S&1024&&(Co=!0);break;case 6:if(Ci(h,d),oi(d),S&4){if(d.stateNode===null)throw Error(a(162));S=d.memoizedProps,m=d.stateNode;try{m.nodeValue=S}catch(Ze){yr(d,d.return,Ze)}}break;case 3:if($u=null,E=ts,ts=un(h.containerInfo),Ci(h,d),ts=E,oi(d),S&4&&m!==null&&m.memoizedState.isDehydrated)try{Bh(h.containerInfo)}catch(Ze){yr(d,d.return,Ze)}Co&&(Co=!1,f1(d));break;case 4:S=ts,ts=un(d.stateNode.containerInfo),Ci(h,d),oi(d),ts=S;break;case 12:Ci(h,d),oi(d);break;case 13:Ci(h,d),oi(d),d.child.flags&8192&&d.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(yx=Ne()),S&4&&(S=d.updateQueue,S!==null&&(d.updateQueue=null,cx(d,S)));break;case 22:E=d.memoizedState!==null;var Oe=m!==null&&m.memoizedState!==null,Je=Ws,dt=Zn;if(Ws=Je||E,Zn=dt||Oe,Ci(h,d),Zn=dt,Ws=Je,oi(d),S&8192)e:for(h=d.stateNode,h._visibility=E?h._visibility&-2:h._visibility|1,E&&(m===null||Oe||Ws||Zn||fc(d)),m=null,h=d;;){if(h.tag===5||h.tag===26){if(m===null){Oe=m=h;try{if(L=Oe.stateNode,E)Z=L.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{pe=Oe.stateNode;var pt=Oe.memoizedProps.style,tt=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;pe.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Ze){yr(Oe,Oe.return,Ze)}}}else if(h.tag===6){if(m===null){Oe=h;try{Oe.stateNode.nodeValue=E?"":Oe.memoizedProps}catch(Ze){yr(Oe,Oe.return,Ze)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===d)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=d.updateQueue,S!==null&&(m=S.retryQueue,m!==null&&(S.retryQueue=null,cx(d,m))));break;case 19:Ci(h,d),oi(d),S&4&&(S=d.updateQueue,S!==null&&(d.updateQueue=null,cx(d,S)));break;case 30:break;case 21:break;default:Ci(h,d),oi(d)}}function oi(d){var h=d.flags;if(h&2){try{for(var m,S=d.return;S!==null;){if(Nu(S)){m=S;break}S=S.return}if(m==null)throw Error(a(160));switch(m.tag){case 27:var E=m.stateNode,L=bh(d);jh(d,L,E);break;case 5:var Z=m.stateNode;m.flags&32&&(Ko(Z,""),m.flags&=-33);var pe=bh(d);jh(d,pe,Z);break;case 3:case 4:var Oe=m.stateNode.containerInfo,Je=bh(d);Hp(d,Je,Oe);break;default:throw Error(a(161))}}catch(dt){yr(d,d.return,dt)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function f1(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var h=d;f1(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),d=d.sibling}}function hl(d,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)c1(d,h.alternate,h),h=h.sibling}function fc(d){for(d=d.child;d!==null;){var h=d;switch(h.tag){case 0:case 11:case 14:case 15:dl(4,h,h.return),fc(h);break;case 1:Gs(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&lx(h,h.return,m),fc(h);break;case 27:Oh(h.stateNode);case 26:case 5:Gs(h,h.return),fc(h);break;case 22:h.memoizedState===null&&fc(h);break;case 30:fc(h);break;default:fc(h)}d=d.sibling}}function ko(d,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,E=d,L=h,Z=L.flags;switch(L.tag){case 0:case 11:case 15:ko(E,L,m),vh(4,L);break;case 1:if(ko(E,L,m),S=L,E=S.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Je){yr(S,S.return,Je)}if(S=L,E=S.updateQueue,E!==null){var pe=S.stateNode;try{var Oe=E.shared.hiddenCallbacks;if(Oe!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Oe.length;E++)D0(Oe[E],pe)}catch(Je){yr(S,S.return,Je)}}m&&Z&64&&o1(L),wu(L,L.return);break;case 27:wh(L);case 26:case 5:ko(E,L,m),m&&S===null&&Z&4&&Up(L),wu(L,L.return);break;case 12:ko(E,L,m);break;case 13:ko(E,L,m),m&&Z&4&&h1(E,L);break;case 22:L.memoizedState===null&&ko(E,L,m),wu(L,L.return);break;case 30:break;default:ko(E,L,m)}h=h.sibling}}function dx(d,h){var m=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(m=d.memoizedState.cachePool.pool),d=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(d=h.memoizedState.cachePool.pool),d!==m&&(d!=null&&d.refCount++,m!=null&&Yd(m))}function hx(d,h){d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Yd(d))}function Ys(d,h,m,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)p1(d,h,m,S),h=h.sibling}function p1(d,h,m,S){var E=h.flags;switch(h.tag){case 0:case 11:case 15:Ys(d,h,m,S),E&2048&&vh(9,h);break;case 1:Ys(d,h,m,S);break;case 3:Ys(d,h,m,S),E&2048&&(d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Yd(d)));break;case 12:if(E&2048){Ys(d,h,m,S),d=h.stateNode;try{var L=h.memoizedProps,Z=L.id,pe=L.onPostCommit;typeof pe=="function"&&pe(Z,h.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Oe){yr(h,h.return,Oe)}}else Ys(d,h,m,S);break;case 13:Ys(d,h,m,S);break;case 23:break;case 22:L=h.stateNode,Z=h.alternate,h.memoizedState!==null?L._visibility&2?Ys(d,h,m,S):Nh(d,h):L._visibility&2?Ys(d,h,m,S):(L._visibility|=2,Su(d,h,m,S,(h.subtreeFlags&10256)!==0)),E&2048&&dx(Z,h);break;case 24:Ys(d,h,m,S),E&2048&&hx(h.alternate,h);break;default:Ys(d,h,m,S)}}function Su(d,h,m,S,E){for(E=E&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var L=d,Z=h,pe=m,Oe=S,Je=Z.flags;switch(Z.tag){case 0:case 11:case 15:Su(L,Z,pe,Oe,E),vh(8,Z);break;case 23:break;case 22:var dt=Z.stateNode;Z.memoizedState!==null?dt._visibility&2?Su(L,Z,pe,Oe,E):Nh(L,Z):(dt._visibility|=2,Su(L,Z,pe,Oe,E)),E&&Je&2048&&dx(Z.alternate,Z);break;case 24:Su(L,Z,pe,Oe,E),E&&Je&2048&&hx(Z.alternate,Z);break;default:Su(L,Z,pe,Oe,E)}h=h.sibling}}function Nh(d,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=d,S=h,E=S.flags;switch(S.tag){case 22:Nh(m,S),E&2048&&dx(S.alternate,S);break;case 24:Nh(m,S),E&2048&&hx(S.alternate,S);break;default:Nh(m,S)}h=h.sibling}}var Oa=8192;function _u(d){if(d.subtreeFlags&Oa)for(d=d.child;d!==null;)m1(d),d=d.sibling}function m1(d){switch(d.tag){case 26:_u(d),d.flags&Oa&&d.memoizedState!==null&&L_(ts,d.memoizedState,d.memoizedProps);break;case 5:_u(d);break;case 3:case 4:var h=ts;ts=un(d.stateNode.containerInfo),_u(d),ts=h;break;case 22:d.memoizedState===null&&(h=d.alternate,h!==null&&h.memoizedState!==null?(h=Oa,Oa=16777216,_u(d),Oa=h):_u(d));break;default:_u(d)}}function g1(d){var h=d.alternate;if(h!==null&&(d=h.child,d!==null)){h.child=null;do h=d.sibling,d.sibling=null,d=h;while(d!==null)}}function Cu(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var S=h[m];la=S,x1(S,d)}g1(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)y1(d),d=d.sibling}function y1(d){switch(d.tag){case 0:case 11:case 15:Cu(d),d.flags&2048&&dl(9,d,d.return);break;case 3:Cu(d);break;case 12:Cu(d);break;case 22:var h=d.stateNode;d.memoizedState!==null&&h._visibility&2&&(d.return===null||d.return.tag!==13)?(h._visibility&=-3,Gp(d)):Cu(d);break;default:Cu(d)}}function Gp(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var S=h[m];la=S,x1(S,d)}g1(d)}for(d=d.child;d!==null;){switch(h=d,h.tag){case 0:case 11:case 15:dl(8,h,h.return),Gp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,Gp(h));break;default:Gp(h)}d=d.sibling}}function x1(d,h){for(;la!==null;){var m=la;switch(m.tag){case 0:case 11:case 15:dl(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var S=m.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Yd(m.memoizedState.cache)}if(S=m.child,S!==null)S.return=m,la=S;else e:for(m=d;la!==null;){S=la;var E=S.sibling,L=S.return;if(u1(S),S===m){la=null;break e}if(E!==null){E.return=L,la=E;break e}la=L}}}var f_={getCacheForType:function(d){var h=Ur(mr),m=h.data.get(d);return m===void 0&&(m=d(),h.data.set(d,m)),m}},fx=typeof WeakMap=="function"?WeakMap:Map,rr=0,jr=null,_n=null,Fn=0,ar=0,Ti=null,fl=!1,Tu=!1,px=!1,Ao=0,Hr=0,pl=0,pc=0,mx=0,ns=0,ku=0,Sh=null,li=null,gx=!1,yx=0,Au=1/0,_h=null,ml=null,Sa=0,gl=null,Eu=null,Pu=0,xx=0,vx=null,v1=null,Du=0,bx=null;function Ma(){if((rr&2)!==0&&Fn!==0)return Fn&-Fn;if(z.T!==null){var d=fu;return d!==0?d:Zp()}return Kn()}function b1(){ns===0&&(ns=(Fn&536870912)===0||kn?ut():536870912);var d=_i.current;return d!==null&&(d.flags|=32),ns}function ki(d,h,m){(d===jr&&(ar===2||ar===9)||d.cancelPendingCommit!==null)&&(Ou(d,0),yl(d,Fn,ns,!1)),ke(d,m),((rr&2)===0||d!==jr)&&(d===jr&&((rr&2)===0&&(pc|=m),Hr===4&&yl(d,Fn,ns,!1)),Ks(d))}function j1(d,h,m){if((rr&6)!==0)throw Error(a(327));var S=!m&&(h&124)===0&&(h&d.expiredLanes)===0||Qe(d,h),E=S?g_(d,h):Nx(d,h,!0),L=S;do{if(E===0){Tu&&!S&&yl(d,h,0,!1);break}else{if(m=d.current.alternate,L&&!p_(m)){E=Nx(d,h,!1),L=!1;continue}if(E===2){if(L=h,d.errorRecoveryDisabledLanes&L)var Z=0;else Z=d.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){h=Z;e:{var pe=d;E=Sh;var Oe=pe.current.memoizedState.isDehydrated;if(Oe&&(Ou(pe,Z).flags|=256),Z=Nx(pe,Z,!1),Z!==2){if(px&&!Oe){pe.errorRecoveryDisabledLanes|=L,pc|=L,E=4;break e}L=li,li=E,L!==null&&(li===null?li=L:li.push.apply(li,L))}E=Z}if(L=!1,E!==2)continue}}if(E===1){Ou(d,0),yl(d,h,0,!0);break}e:{switch(S=d,L=E,L){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:yl(S,h,ns,!fl);break e;case 2:li=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(E=yx+300-Ne(),10<E)){if(yl(S,h,ns,!fl),we(S,0,!0)!==0)break e;S.timeoutHandle=H1(w1.bind(null,S,m,li,_h,gx,h,ns,pc,ku,fl,L,2,-0,0),E);break e}w1(S,m,li,_h,gx,h,ns,pc,ku,fl,L,0,-0,0)}}break}while(!0);Ks(d)}function w1(d,h,m,S,E,L,Z,pe,Oe,Je,dt,pt,tt,Ze){if(d.timeoutHandle=-1,pt=h.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(ga={stylesheets:null,count:0,unsuspend:R_},m1(h),pt=F_(),pt!==null)){d.cancelPendingCommit=pt(Ch.bind(null,d,h,L,m,S,E,Z,pe,Oe,dt,1,tt,Ze)),yl(d,L,Z,!Je);return}Ch(d,h,L,m,S,E,Z,pe,Oe)}function p_(d){for(var h=d;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var S=0;S<m.length;S++){var E=m[S],L=E.getSnapshot;E=E.value;try{if(!ji(L(),E))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function yl(d,h,m,S){h&=~mx,h&=~pc,d.suspendedLanes|=h,d.pingedLanes&=~h,S&&(d.warmLanes|=h),S=d.expirationTimes;for(var E=h;0<E;){var L=31-he(E),Z=1<<L;S[L]=-1,E&=~Z}m!==0&&Tt(d,m,h)}function Wp(){return(rr&6)===0?(Ah(0),!1):!0}function jx(){if(_n!==null){if(ar===0)var d=_n.return;else d=_n,fe=al=null,xp(d),oa=null,ii=0,d=_n;for(;d!==null;)s1(d.alternate,d),d=d.return;_n=null}}function Ou(d,h){var m=d.timeoutHandle;m!==-1&&(d.timeoutHandle=-1,T_(m)),m=d.cancelPendingCommit,m!==null&&(d.cancelPendingCommit=null,m()),jx(),jr=d,_n=m=Ua(d.current,null),Fn=h,ar=0,Ti=null,fl=!1,Tu=Qe(d,h),px=!1,ku=ns=mx=pc=pl=Hr=0,li=Sh=null,gx=!1,(h&8)!==0&&(h|=h&32);var S=d.entangledLanes;if(S!==0)for(d=d.entanglements,S&=h;0<S;){var E=31-he(S),L=1<<E;h|=d[E],S&=~L}return Ao=h,Wl(),m}function N1(d,h){yn=null,z.H=ch,h===Va||h===mp?(h=E0(),ar=3):h===k0?(h=E0(),ar=4):ar=h===e1?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Ti=h,_n===null&&(Hr=1,ph(d,qa(h,d.current)))}function S1(){var d=z.H;return z.H=ch,d===null?ch:d}function _1(){var d=z.A;return z.A=f_,d}function wx(){Hr=4,fl||(Fn&4194048)!==Fn&&_i.current!==null||(Tu=!0),(pl&134217727)===0&&(pc&134217727)===0||jr===null||yl(jr,Fn,ns,!1)}function Nx(d,h,m){var S=rr;rr|=2;var E=S1(),L=_1();(jr!==d||Fn!==h)&&(_h=null,Ou(d,h)),h=!1;var Z=Hr;e:do try{if(ar!==0&&_n!==null){var pe=_n,Oe=Ti;switch(ar){case 8:jx(),Z=6;break e;case 3:case 2:case 9:case 6:_i.current===null&&(h=!0);var Je=ar;if(ar=0,Ti=null,Mu(d,pe,Oe,Je),m&&Tu){Z=0;break e}break;default:Je=ar,ar=0,Ti=null,Mu(d,pe,Oe,Je)}}m_(),Z=Hr;break}catch(dt){N1(d,dt)}while(!0);return h&&d.shellSuspendCounter++,fe=al=null,rr=S,z.H=E,z.A=L,_n===null&&(jr=null,Fn=0,Wl()),Z}function m_(){for(;_n!==null;)Sx(_n)}function g_(d,h){var m=rr;rr|=2;var S=S1(),E=_1();jr!==d||Fn!==h?(_h=null,Au=Ne()+500,Ou(d,h)):Tu=Qe(d,h);e:do try{if(ar!==0&&_n!==null){h=_n;var L=Ti;t:switch(ar){case 1:ar=0,Ti=null,Mu(d,h,L,1);break;case 2:case 9:if(A0(L)){ar=0,Ti=null,T1(h);break}h=function(){ar!==2&&ar!==9||jr!==d||(ar=7),Ks(d)},L.then(h,h);break e;case 3:ar=7;break e;case 4:ar=5;break e;case 7:A0(L)?(ar=0,Ti=null,T1(h)):(ar=0,Ti=null,Mu(d,h,L,7));break;case 5:var Z=null;switch(_n.tag){case 26:Z=_n.memoizedState;case 5:case 27:var pe=_n;if(!Z||da(Z)){ar=0,Ti=null;var Oe=pe.sibling;if(Oe!==null)_n=Oe;else{var Je=pe.return;Je!==null?(_n=Je,Yp(Je)):_n=null}break t}}ar=0,Ti=null,Mu(d,h,L,5);break;case 6:ar=0,Ti=null,Mu(d,h,L,6);break;case 8:jx(),Hr=6;break e;default:throw Error(a(462))}}C1();break}catch(dt){N1(d,dt)}while(!0);return fe=al=null,z.H=S,z.A=E,rr=m,_n!==null?0:(jr=null,Fn=0,Wl(),Hr)}function C1(){for(;_n!==null&&!be();)Sx(_n)}function Sx(d){var h=zp(d.alternate,d,Ao);d.memoizedProps=d.pendingProps,h===null?Yp(d):_n=h}function T1(d){var h=d,m=h.alternate;switch(h.tag){case 15:case 0:h=Fp(m,h,h.pendingProps,h.type,void 0,Fn);break;case 11:h=Fp(m,h,h.pendingProps,h.type.render,h.ref,Fn);break;case 5:xp(h);default:s1(m,h),h=_n=qd(h,Ao),h=zp(m,h,Ao)}d.memoizedProps=d.pendingProps,h===null?Yp(d):_n=h}function Mu(d,h,m,S){fe=al=null,xp(h),oa=null,ii=0;var E=h.return;try{if(Z0(d,E,h,m,Fn)){Hr=1,ph(d,qa(m,d.current)),_n=null;return}}catch(L){if(E!==null)throw _n=E,L;Hr=1,ph(d,qa(m,d.current)),_n=null;return}h.flags&32768?(kn||S===1?d=!0:Tu||(Fn&536870912)!==0?d=!1:(fl=d=!0,(S===2||S===9||S===3||S===6)&&(S=_i.current,S!==null&&S.tag===13&&(S.flags|=16384))),k1(h,d)):Yp(h)}function Yp(d){var h=d;do{if((h.flags&32768)!==0){k1(h,fl);return}d=h.return;var m=a1(h.alternate,h,Ao);if(m!==null){_n=m;return}if(h=h.sibling,h!==null){_n=h;return}_n=h=d}while(h!==null);Hr===0&&(Hr=5)}function k1(d,h){do{var m=i1(d.alternate,d);if(m!==null){m.flags&=32767,_n=m;return}if(m=d.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(d=d.sibling,d!==null)){_n=d;return}_n=d=m}while(d!==null);Hr=6,_n=null}function Ch(d,h,m,S,E,L,Z,pe,Oe){d.cancelPendingCommit=null;do Kp();while(Sa!==0);if((rr&6)!==0)throw Error(a(327));if(h!==null){if(h===d.current)throw Error(a(177));if(L=h.lanes|h.childLanes,L|=Cy,ot(d,m,L,Z,pe,Oe),d===jr&&(_n=jr=null,Fn=0),Eu=h,gl=d,Pu=m,xx=L,vx=E,v1=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,R1(ae,function(){return O1(),null})):(d.callbackNode=null,d.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=z.T,z.T=null,E=Y.p,Y.p=2,Z=rr,rr|=4;try{d_(d,h,m)}finally{rr=Z,Y.p=E,z.T=S}}Sa=1,A1(),E1(),P1()}}function A1(){if(Sa===1){Sa=0;var d=gl,h=Eu,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=z.T,z.T=null;var S=Y.p;Y.p=2;var E=rr;rr|=4;try{ux(h,d);var L=nm,Z=v0(d.containerInfo),pe=L.focusedElem,Oe=L.selectionRange;if(Z!==pe&&pe&&pe.ownerDocument&&x0(pe.ownerDocument.documentElement,pe)){if(Oe!==null&&Sy(pe)){var Je=Oe.start,dt=Oe.end;if(dt===void 0&&(dt=Je),"selectionStart"in pe)pe.selectionStart=Je,pe.selectionEnd=Math.min(dt,pe.value.length);else{var pt=pe.ownerDocument||document,tt=pt&&pt.defaultView||window;if(tt.getSelection){var Ze=tt.getSelection(),Kt=pe.textContent.length,Yt=Math.min(Oe.start,Kt),cr=Oe.end===void 0?Yt:Math.min(Oe.end,Kt);!Ze.extend&&Yt>cr&&(Z=cr,cr=Yt,Yt=Z);var We=Ny(pe,Yt),qe=Ny(pe,cr);if(We&&qe&&(Ze.rangeCount!==1||Ze.anchorNode!==We.node||Ze.anchorOffset!==We.offset||Ze.focusNode!==qe.node||Ze.focusOffset!==qe.offset)){var Ke=pt.createRange();Ke.setStart(We.node,We.offset),Ze.removeAllRanges(),Yt>cr?(Ze.addRange(Ke),Ze.extend(qe.node,qe.offset)):(Ke.setEnd(qe.node,qe.offset),Ze.addRange(Ke))}}}}for(pt=[],Ze=pe;Ze=Ze.parentNode;)Ze.nodeType===1&&pt.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<pt.length;pe++){var ht=pt[pe];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}cm=!!ws,nm=ws=null}finally{rr=E,Y.p=S,z.T=m}}d.current=h,Sa=2}}function E1(){if(Sa===2){Sa=0;var d=gl,h=Eu,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=z.T,z.T=null;var S=Y.p;Y.p=2;var E=rr;rr|=4;try{c1(d,h.alternate,h)}finally{rr=E,Y.p=S,z.T=m}}Sa=3}}function P1(){if(Sa===4||Sa===3){Sa=0,_e();var d=gl,h=Eu,m=Pu,S=v1;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Sa=5:(Sa=0,Eu=gl=null,D1(d,d.pendingLanes));var E=d.pendingLanes;if(E===0&&(ml=null),kt(m),h=h.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(J,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=z.T,E=Y.p,Y.p=2,z.T=null;try{for(var L=d.onRecoverableError,Z=0;Z<S.length;Z++){var pe=S[Z];L(pe.value,{componentStack:pe.stack})}}finally{z.T=h,Y.p=E}}(Pu&3)!==0&&Kp(),Ks(d),E=d.pendingLanes,(m&4194090)!==0&&(E&42)!==0?d===bx?Du++:(Du=0,bx=d):Du=0,Ah(0)}}function D1(d,h){(d.pooledCacheLanes&=h)===0&&(h=d.pooledCache,h!=null&&(d.pooledCache=null,Yd(h)))}function Kp(d){return A1(),E1(),P1(),O1()}function O1(){if(Sa!==5)return!1;var d=gl,h=xx;xx=0;var m=kt(Pu),S=z.T,E=Y.p;try{Y.p=32>m?32:m,z.T=null,m=vx,vx=null;var L=gl,Z=Pu;if(Sa=0,Eu=gl=null,Pu=0,(rr&6)!==0)throw Error(a(331));var pe=rr;if(rr|=4,y1(L.current),p1(L,L.current,Z,m),rr=pe,Ah(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(J,L)}catch{}return!0}finally{Y.p=E,z.T=S,D1(d,h)}}function M1(d,h,m){h=qa(m,h),h=Mp(d.stateNode,h,2),d=vo(d,h,2),d!==null&&(ke(d,2),Ks(d))}function yr(d,h,m){if(d.tag===3)M1(d,d,m);else for(;h!==null;){if(h.tag===3){M1(h,d,m);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(ml===null||!ml.has(S))){d=qa(m,d),m=rx(2),S=vo(h,m,2),S!==null&&(J0(m,S,h,d),ke(S,2),Ks(S));break}}h=h.return}}function _x(d,h,m){var S=d.pingCache;if(S===null){S=d.pingCache=new fx;var E=new Set;S.set(h,E)}else E=S.get(h),E===void 0&&(E=new Set,S.set(h,E));E.has(m)||(px=!0,E.add(m),d=y_.bind(null,d,h,m),h.then(d,d))}function y_(d,h,m){var S=d.pingCache;S!==null&&S.delete(h),d.pingedLanes|=d.suspendedLanes&m,d.warmLanes&=~m,jr===d&&(Fn&m)===m&&(Hr===4||Hr===3&&(Fn&62914560)===Fn&&300>Ne()-yx?(rr&2)===0&&Ou(d,0):mx|=m,ku===Fn&&(ku=0)),Ks(d)}function I1(d,h){h===0&&(h=Ct()),d=Yl(d,h),d!==null&&(ke(d,h),Ks(d))}function Qp(d){var h=d.memoizedState,m=0;h!==null&&(m=h.retryLane),I1(d,m)}function x_(d,h){var m=0;switch(d.tag){case 13:var S=d.stateNode,E=d.memoizedState;E!==null&&(m=E.retryLane);break;case 19:S=d.stateNode;break;case 22:S=d.stateNode._retryCache;break;default:throw Error(a(314))}S!==null&&S.delete(h),I1(d,m)}function R1(d,h){return Te(d,h)}var Th=null,xl=null,Xp=!1,kh=!1,Jp=!1,vl=0;function Ks(d){d!==xl&&d.next===null&&(xl===null?Th=xl=d:xl=xl.next=d),kh=!0,Xp||(Xp=!0,Cx())}function Ah(d,h){if(!Jp&&kh){Jp=!0;do for(var m=!1,S=Th;S!==null;){if(d!==0){var E=S.pendingLanes;if(E===0)var L=0;else{var Z=S.suspendedLanes,pe=S.pingedLanes;L=(1<<31-he(42|d)+1)-1,L&=E&~(Z&~pe),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(m=!0,F1(S,L))}else L=Fn,L=we(S,S===jr?L:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(L&3)===0||Qe(S,L)||(m=!0,F1(S,L));S=S.next}while(m);Jp=!1}}function v_(){Eh()}function Eh(){kh=Xp=!1;var d=0;vl!==0&&(C_()&&(d=vl),vl=0);for(var h=Ne(),m=null,S=Th;S!==null;){var E=S.next,L=Ph(S,h);L===0?(S.next=null,m===null?Th=E:m.next=E,E===null&&(xl=m)):(m=S,(d!==0||(L&3)!==0)&&(kh=!0)),S=E}Ah(d)}function Ph(d,h){for(var m=d.suspendedLanes,S=d.pingedLanes,E=d.expirationTimes,L=d.pendingLanes&-62914561;0<L;){var Z=31-he(L),pe=1<<Z,Oe=E[Z];Oe===-1?((pe&m)===0||(pe&S)!==0)&&(E[Z]=Xe(pe,h)):Oe<=h&&(d.expiredLanes|=pe),L&=~pe}if(h=jr,m=Fn,m=we(d,d===h?m:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),S=d.callbackNode,m===0||d===h&&(ar===2||ar===9)||d.cancelPendingCommit!==null)return S!==null&&S!==null&&oe(S),d.callbackNode=null,d.callbackPriority=0;if((m&3)===0||Qe(d,m)){if(h=m&-m,h===d.callbackPriority)return h;switch(S!==null&&oe(S),kt(m)){case 2:case 8:m=de;break;case 32:m=ae;break;case 268435456:m=se;break;default:m=ae}return S=L1.bind(null,d),m=Te(m,S),d.callbackPriority=h,d.callbackNode=m,h}return S!==null&&S!==null&&oe(S),d.callbackPriority=2,d.callbackNode=null,2}function L1(d,h){if(Sa!==0&&Sa!==5)return d.callbackNode=null,d.callbackPriority=0,null;var m=d.callbackNode;if(Kp()&&d.callbackNode!==m)return null;var S=Fn;return S=we(d,d===jr?S:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),S===0?null:(j1(d,S,h),Ph(d,Ne()),d.callbackNode!=null&&d.callbackNode===m?L1.bind(null,d):null)}function F1(d,h){if(Kp())return null;j1(d,h,!0)}function Cx(){k_(function(){(rr&6)!==0?Te(ge,v_):Eh()})}function Zp(){return vl===0&&(vl=ut()),vl}function $1(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Od(""+d)}function z1(d,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,d.id&&m.setAttribute("form",d.id),h.parentNode.insertBefore(m,h),d=new FormData(d),m.parentNode.removeChild(m),d}function b_(d,h,m,S,E){if(h==="submit"&&m&&m.stateNode===E){var L=$1((E[Qn]||null).action),Z=S.submitter;Z&&(h=(h=Z[Qn]||null)?$1(h.formAction):Z.getAttribute("formAction"),h!==null&&(L=h,Z=null));var pe=new Kf("action","action",null,S,E);d.push({event:pe,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(vl!==0){var Oe=Z?z1(E,Z):new FormData(E);oh(m,{pending:!0,data:Oe,method:E.method,action:L},null,Oe)}}else typeof L=="function"&&(pe.preventDefault(),Oe=Z?z1(E,Z):new FormData(E),oh(m,{pending:!0,data:Oe,method:E.method,action:L},L,Oe))},currentTarget:E}]})}}for(var Tx=0;Tx<Xn.length;Tx++){var kx=Xn[Tx],j_=kx.toLowerCase(),w_=kx[0].toUpperCase()+kx.slice(1);ms(j_,"on"+w_)}ms(op,"onAnimationEnd"),ms(b0,"onAnimationIteration"),ms(wi,"onAnimationStart"),ms("dblclick","onDoubleClick"),ms("focusin","onFocus"),ms("focusout","onBlur"),ms(lp,"onTransitionRun"),ms(a_,"onTransitionStart"),ms(lu,"onTransitionCancel"),ms(Fd,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Na("onBeforeInput",["compositionend","keypress","textInput","paste"]),Na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dh));function B1(d,h){h=(h&4)!==0;for(var m=0;m<d.length;m++){var S=d[m],E=S.event;S=S.listeners;e:{var L=void 0;if(h)for(var Z=S.length-1;0<=Z;Z--){var pe=S[Z],Oe=pe.instance,Je=pe.currentTarget;if(pe=pe.listener,Oe!==L&&E.isPropagationStopped())break e;L=pe,E.currentTarget=Je;try{L(E)}catch(dt){dc(dt)}E.currentTarget=null,L=Oe}else for(Z=0;Z<S.length;Z++){if(pe=S[Z],Oe=pe.instance,Je=pe.currentTarget,pe=pe.listener,Oe!==L&&E.isPropagationStopped())break e;L=pe,E.currentTarget=Je;try{L(E)}catch(dt){dc(dt)}E.currentTarget=null,L=Oe}}}}function Cn(d,h){var m=h[Ba];m===void 0&&(m=h[Ba]=new Set);var S=d+"__bubble";m.has(S)||(q1(h,d,2,!1),m.add(S))}function Ax(d,h,m){var S=0;h&&(S|=4),q1(m,d,S,h)}var ci="_reactListening"+Math.random().toString(36).slice(2);function Ex(d){if(!d[ci]){d[ci]=!0,Sn.forEach(function(m){m!=="selectionchange"&&(N_.has(m)||Ax(m,!1,d),Ax(m,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[ci]||(h[ci]=!0,Ax("selectionchange",!1,h))}}function q1(d,h,m,S){switch(oj(h)){case 2:var E=B_;break;case 8:E=Bu;break;default:E=zx}m=E.bind(null,h,m,d),E=void 0,!Id||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(E=!0),S?E!==void 0?d.addEventListener(h,m,{capture:!0,passive:E}):d.addEventListener(h,m,!0):E!==void 0?d.addEventListener(h,m,{passive:E}):d.addEventListener(h,m,!1)}function Eo(d,h,m,S,E){var L=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var Z=S.tag;if(Z===3||Z===4){var pe=S.stateNode.containerInfo;if(pe===E)break;if(Z===4)for(Z=S.return;Z!==null;){var Oe=Z.tag;if((Oe===3||Oe===4)&&Z.stateNode.containerInfo===E)return;Z=Z.return}for(;pe!==null;){if(Z=Rn(pe),Z===null)return;if(Oe=Z.tag,Oe===5||Oe===6||Oe===26||Oe===27){S=L=Z;continue e}pe=pe.parentNode}}S=S.return}Zb(function(){var Je=L,dt=dy(m),pt=[];e:{var tt=$d.get(d);if(tt!==void 0){var Ze=Kf,Kt=d;switch(d){case"keypress":if(or(m)===0)break e;case"keydown":case"keyup":Ze=yy;break;case"focusin":Kt="focus",Ze=Xf;break;case"focusout":Kt="blur",Ze=Xf;break;case"beforeblur":case"afterblur":Ze=Xf;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=Xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=gy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=KS;break;case op:case b0:case wi:Ze=a0;break;case Fd:Ze=QS;break;case"scroll":case"scrollend":Ze=GS;break;case"wheel":Ze=JS;break;case"copy":case"cut":case"paste":Ze=s0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=mo;break;case"toggle":case"beforetoggle":Ze=Zf}var Yt=(h&4)!==0,cr=!Yt&&(d==="scroll"||d==="scrollend"),We=Yt?tt!==null?tt+"Capture":null:tt;Yt=[];for(var qe=Je,Ke;qe!==null;){var ht=qe;if(Ke=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Ke===null||We===null||(ht=Md(qe,We),ht!=null&&Yt.push(on(qe,ht,Ke))),cr)break;qe=qe.return}0<Yt.length&&(tt=new Ze(tt,Kt,null,m,dt),pt.push({event:tt,listeners:Yt}))}}if((h&7)===0){e:{if(tt=d==="mouseover"||d==="pointerover",Ze=d==="mouseout"||d==="pointerout",tt&&m!==Wf&&(Kt=m.relatedTarget||m.fromElement)&&(Rn(Kt)||Kt[br]))break e;if((Ze||tt)&&(tt=dt.window===dt?dt:(tt=dt.ownerDocument)?tt.defaultView||tt.parentWindow:window,Ze?(Kt=m.relatedTarget||m.toElement,Ze=Je,Kt=Kt?Rn(Kt):null,Kt!==null&&(cr=s(Kt),Yt=Kt.tag,Kt!==cr||Yt!==5&&Yt!==27&&Yt!==6)&&(Kt=null)):(Ze=null,Kt=Je),Ze!==Kt)){if(Yt=Xo,ht="onMouseLeave",We="onMouseEnter",qe="mouse",(d==="pointerout"||d==="pointerover")&&(Yt=mo,ht="onPointerLeave",We="onPointerEnter",qe="pointer"),cr=Ze==null?tt:gt(Ze),Ke=Kt==null?tt:gt(Kt),tt=new Yt(ht,qe+"leave",Ze,m,dt),tt.target=cr,tt.relatedTarget=Ke,ht=null,Rn(dt)===Je&&(Yt=new Yt(We,qe+"enter",Kt,m,dt),Yt.target=Ke,Yt.relatedTarget=cr,ht=Yt),cr=ht,Ze&&Kt)t:{for(Yt=Ze,We=Kt,qe=0,Ke=Yt;Ke;Ke=ca(Ke))qe++;for(Ke=0,ht=We;ht;ht=ca(ht))Ke++;for(;0<qe-Ke;)Yt=ca(Yt),qe--;for(;0<Ke-qe;)We=ca(We),Ke--;for(;qe--;){if(Yt===We||We!==null&&Yt===We.alternate)break t;Yt=ca(Yt),We=ca(We)}Yt=null}else Yt=null;Ze!==null&&Gr(pt,tt,Ze,Yt,!1),Kt!==null&&cr!==null&&Gr(pt,cr,Kt,Yt,!0)}}e:{if(tt=Je?gt(Je):window,Ze=tt.nodeName&&tt.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&tt.type==="file")var Mt=f0;else if(rp(tt))if(p0)Mt=t_;else{Mt=el;var bn=y0}else Ze=tt.nodeName,!Ze||Ze.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Je&&uy(Je.elementType)&&(Mt=f0):Mt=sp;if(Mt&&(Mt=Mt(d,Je))){au(pt,Mt,m,dt);break e}bn&&bn(d,tt,Je),d==="focusout"&&Je&&tt.type==="number"&&Je.memoizedProps.value!=null&&Dd(tt,"number",tt.value)}switch(bn=Je?gt(Je):window,d){case"focusin":(rp(bn)||bn.contentEditable==="true")&&(ou=bn,tl=Je,He=null);break;case"focusout":He=tl=ou=null;break;case"mousedown":st=!0;break;case"contextmenu":case"mouseup":case"dragend":st=!1,rt(pt,m,dt);break;case"selectionchange":if(r_)break;case"keydown":case"keyup":rt(pt,m,dt)}var zt;if(by)e:{switch(d){case"compositionstart":var Qt="onCompositionStart";break e;case"compositionend":Qt="onCompositionEnd";break e;case"compositionupdate":Qt="onCompositionUpdate";break e}Qt=void 0}else Jo?d0(d,m)&&(Qt="onCompositionEnd"):d==="keydown"&&m.keyCode===229&&(Qt="onCompositionStart");Qt&&(ep&&m.locale!=="ko"&&(Jo||Qt!=="onCompositionStart"?Qt==="onCompositionEnd"&&Jo&&(zt=e0()):(Qo=dt,py="value"in Qo?Qo.value:Qo.textContent,Jo=!0)),bn=em(Je,Qt),0<bn.length&&(Qt=new Ja(Qt,d,null,m,dt),pt.push({event:Qt,listeners:bn}),zt?Qt.data=zt:(zt=np(m),zt!==null&&(Qt.data=zt)))),(zt=u0?ZS(d,m):h0(d,m))&&(Qt=em(Je,"onBeforeInput"),0<Qt.length&&(bn=new Ja("onBeforeInput","beforeinput",null,m,dt),pt.push({event:bn,listeners:Qt}),bn.data=zt)),b_(pt,d,Je,m,dt)}B1(pt,h)})}function on(d,h,m){return{instance:d,listener:h,currentTarget:m}}function em(d,h){for(var m=h+"Capture",S=[];d!==null;){var E=d,L=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||L===null||(E=Md(d,m),E!=null&&S.unshift(on(d,E,L)),E=Md(d,h),E!=null&&S.push(on(d,E,L))),d.tag===3)return S;d=d.return}return[]}function ca(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function Gr(d,h,m,S,E){for(var L=h._reactName,Z=[];m!==null&&m!==S;){var pe=m,Oe=pe.alternate,Je=pe.stateNode;if(pe=pe.tag,Oe!==null&&Oe===S)break;pe!==5&&pe!==26&&pe!==27||Je===null||(Oe=Je,E?(Je=Md(m,L),Je!=null&&Z.unshift(on(m,Je,Oe))):E||(Je=Md(m,L),Je!=null&&Z.push(on(m,Je,Oe)))),m=m.return}Z.length!==0&&d.push({event:h,listeners:Z})}var S_=/\r\n?/g,bl=/\u0000|\uFFFD/g;function U1(d){return(typeof d=="string"?d:""+d).replace(S_,`
`).replace(bl,"")}function V1(d,h){return h=U1(h),U1(d)===h}function tm(){}function lr(d,h,m,S,E,L){switch(m){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||Ko(d,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&Ko(d,""+S);break;case"className":qf(d,"class",S);break;case"tabIndex":qf(d,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":qf(d,m,S);break;case"style":cy(d,S,L);break;case"data":if(h!=="object"){qf(d,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||m!=="href")){d.removeAttribute(m);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){d.removeAttribute(m);break}S=Od(""+S),d.setAttribute(m,S);break;case"action":case"formAction":if(typeof S=="function"){d.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(m==="formAction"?(h!=="input"&&lr(d,h,"name",E.name,E,null),lr(d,h,"formEncType",E.formEncType,E,null),lr(d,h,"formMethod",E.formMethod,E,null),lr(d,h,"formTarget",E.formTarget,E,null)):(lr(d,h,"encType",E.encType,E,null),lr(d,h,"method",E.method,E,null),lr(d,h,"target",E.target,E,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){d.removeAttribute(m);break}S=Od(""+S),d.setAttribute(m,S);break;case"onClick":S!=null&&(d.onclick=tm);break;case"onScroll":S!=null&&Cn("scroll",d);break;case"onScrollEnd":S!=null&&Cn("scrollend",d);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(m=S.__html,m!=null){if(E.children!=null)throw Error(a(60));d.innerHTML=m}}break;case"multiple":d.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":d.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){d.removeAttribute("xlink:href");break}m=Od(""+S),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?d.setAttribute(m,""+S):d.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?d.setAttribute(m,""):d.removeAttribute(m);break;case"capture":case"download":S===!0?d.setAttribute(m,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?d.setAttribute(m,S):d.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?d.setAttribute(m,S):d.removeAttribute(m);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?d.removeAttribute(m):d.setAttribute(m,S);break;case"popover":Cn("beforetoggle",d),Cn("toggle",d),Bf(d,"popover",S);break;case"xlinkActuate":$s(d,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":$s(d,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":$s(d,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":$s(d,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":$s(d,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":$s(d,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":$s(d,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":$s(d,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":$s(d,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Bf(d,"is",S);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Xb.get(m)||m,Bf(d,m,S))}}function Px(d,h,m,S,E,L){switch(m){case"style":cy(d,S,L);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(m=S.__html,m!=null){if(E.children!=null)throw Error(a(60));d.innerHTML=m}}break;case"children":typeof S=="string"?Ko(d,S):(typeof S=="number"||typeof S=="bigint")&&Ko(d,""+S);break;case"onScroll":S!=null&&Cn("scroll",d);break;case"onScrollEnd":S!=null&&Cn("scrollend",d);break;case"onClick":S!=null&&(d.onclick=tm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ln.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),h=m.slice(2,E?m.length-7:void 0),L=d[Qn]||null,L=L!=null?L[m]:null,typeof L=="function"&&d.removeEventListener(h,L,E),typeof S=="function")){typeof L!="function"&&L!==null&&(m in d?d[m]=null:d.hasAttribute(m)&&d.removeAttribute(m)),d.addEventListener(h,S,E);break e}m in d?d[m]=S:S===!0?d.setAttribute(m,""):Bf(d,m,S)}}}function ua(d,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cn("error",d),Cn("load",d);var S=!1,E=!1,L;for(L in m)if(m.hasOwnProperty(L)){var Z=m[L];if(Z!=null)switch(L){case"src":S=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:lr(d,h,L,Z,m,null)}}E&&lr(d,h,"srcSet",m.srcSet,m,null),S&&lr(d,h,"src",m.src,m,null);return;case"input":Cn("invalid",d);var pe=L=Z=E=null,Oe=null,Je=null;for(S in m)if(m.hasOwnProperty(S)){var dt=m[S];if(dt!=null)switch(S){case"name":E=dt;break;case"type":Z=dt;break;case"checked":Oe=dt;break;case"defaultChecked":Je=dt;break;case"value":L=dt;break;case"defaultValue":pe=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(a(137,h));break;default:lr(d,h,S,dt,m,null)}}sy(d,L,pe,Oe,Je,Z,E,!1),Vf(d);return;case"select":Cn("invalid",d),S=Z=L=null;for(E in m)if(m.hasOwnProperty(E)&&(pe=m[E],pe!=null))switch(E){case"value":L=pe;break;case"defaultValue":Z=pe;break;case"multiple":S=pe;default:lr(d,h,E,pe,m,null)}h=L,m=Z,d.multiple=!!S,h!=null?Xc(d,!!S,h,!1):m!=null&&Xc(d,!!S,m,!0);return;case"textarea":Cn("invalid",d),L=E=S=null;for(Z in m)if(m.hasOwnProperty(Z)&&(pe=m[Z],pe!=null))switch(Z){case"value":S=pe;break;case"defaultValue":E=pe;break;case"children":L=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(91));break;default:lr(d,h,Z,pe,m,null)}Gf(d,S,E,L),Vf(d);return;case"option":for(Oe in m)if(m.hasOwnProperty(Oe)&&(S=m[Oe],S!=null))switch(Oe){case"selected":d.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:lr(d,h,Oe,S,m,null)}return;case"dialog":Cn("beforetoggle",d),Cn("toggle",d),Cn("cancel",d),Cn("close",d);break;case"iframe":case"object":Cn("load",d);break;case"video":case"audio":for(S=0;S<Dh.length;S++)Cn(Dh[S],d);break;case"image":Cn("error",d),Cn("load",d);break;case"details":Cn("toggle",d);break;case"embed":case"source":case"link":Cn("error",d),Cn("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in m)if(m.hasOwnProperty(Je)&&(S=m[Je],S!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:lr(d,h,Je,S,m,null)}return;default:if(uy(h)){for(dt in m)m.hasOwnProperty(dt)&&(S=m[dt],S!==void 0&&Px(d,h,dt,S,m,void 0));return}}for(pe in m)m.hasOwnProperty(pe)&&(S=m[pe],S!=null&&lr(d,h,pe,S,m,null))}function __(d,h,m,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,L=null,Z=null,pe=null,Oe=null,Je=null,dt=null;for(Ze in m){var pt=m[Ze];if(m.hasOwnProperty(Ze)&&pt!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":Oe=pt;default:S.hasOwnProperty(Ze)||lr(d,h,Ze,null,S,pt)}}for(var tt in S){var Ze=S[tt];if(pt=m[tt],S.hasOwnProperty(tt)&&(Ze!=null||pt!=null))switch(tt){case"type":L=Ze;break;case"name":E=Ze;break;case"checked":Je=Ze;break;case"defaultChecked":dt=Ze;break;case"value":Z=Ze;break;case"defaultValue":pe=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(a(137,h));break;default:Ze!==pt&&lr(d,h,tt,Ze,S,pt)}}Hf(d,Z,pe,Oe,Je,dt,L,E);return;case"select":Ze=Z=pe=tt=null;for(L in m)if(Oe=m[L],m.hasOwnProperty(L)&&Oe!=null)switch(L){case"value":break;case"multiple":Ze=Oe;default:S.hasOwnProperty(L)||lr(d,h,L,null,S,Oe)}for(E in S)if(L=S[E],Oe=m[E],S.hasOwnProperty(E)&&(L!=null||Oe!=null))switch(E){case"value":tt=L;break;case"defaultValue":pe=L;break;case"multiple":Z=L;default:L!==Oe&&lr(d,h,E,L,S,Oe)}h=pe,m=Z,S=Ze,tt!=null?Xc(d,!!m,tt,!1):!!S!=!!m&&(h!=null?Xc(d,!!m,h,!0):Xc(d,!!m,m?[]:"",!1));return;case"textarea":Ze=tt=null;for(pe in m)if(E=m[pe],m.hasOwnProperty(pe)&&E!=null&&!S.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:lr(d,h,pe,null,S,E)}for(Z in S)if(E=S[Z],L=m[Z],S.hasOwnProperty(Z)&&(E!=null||L!=null))switch(Z){case"value":tt=E;break;case"defaultValue":Ze=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==L&&lr(d,h,Z,E,S,L)}oy(d,tt,Ze);return;case"option":for(var Kt in m)if(tt=m[Kt],m.hasOwnProperty(Kt)&&tt!=null&&!S.hasOwnProperty(Kt))switch(Kt){case"selected":d.selected=!1;break;default:lr(d,h,Kt,null,S,tt)}for(Oe in S)if(tt=S[Oe],Ze=m[Oe],S.hasOwnProperty(Oe)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Oe){case"selected":d.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:lr(d,h,Oe,tt,S,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in m)tt=m[Yt],m.hasOwnProperty(Yt)&&tt!=null&&!S.hasOwnProperty(Yt)&&lr(d,h,Yt,null,S,tt);for(Je in S)if(tt=S[Je],Ze=m[Je],S.hasOwnProperty(Je)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(a(137,h));break;default:lr(d,h,Je,tt,S,Ze)}return;default:if(uy(h)){for(var cr in m)tt=m[cr],m.hasOwnProperty(cr)&&tt!==void 0&&!S.hasOwnProperty(cr)&&Px(d,h,cr,void 0,S,tt);for(dt in S)tt=S[dt],Ze=m[dt],!S.hasOwnProperty(dt)||tt===Ze||tt===void 0&&Ze===void 0||Px(d,h,dt,tt,S,Ze);return}}for(var We in m)tt=m[We],m.hasOwnProperty(We)&&tt!=null&&!S.hasOwnProperty(We)&&lr(d,h,We,null,S,tt);for(pt in S)tt=S[pt],Ze=m[pt],!S.hasOwnProperty(pt)||tt===Ze||tt==null&&Ze==null||lr(d,h,pt,tt,S,Ze)}var ws=null,nm=null;function mc(d){return d.nodeType===9?d:d.ownerDocument}function Or(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $r(d,h){if(d===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&h==="foreignObject"?0:d}function rm(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Dx=null;function C_(){var d=window.event;return d&&d.type==="popstate"?d===Dx?!1:(Dx=d,!0):(Dx=null,!1)}var H1=typeof setTimeout=="function"?setTimeout:void 0,T_=typeof clearTimeout=="function"?clearTimeout:void 0,G1=typeof Promise=="function"?Promise:void 0,k_=typeof queueMicrotask=="function"?queueMicrotask:typeof G1<"u"?function(d){return G1.resolve(null).then(d).catch(W1)}:H1;function W1(d){setTimeout(function(){throw d})}function rs(d){return d==="head"}function am(d,h){var m=h,S=0,E=0;do{var L=m.nextSibling;if(d.removeChild(m),L&&L.nodeType===8)if(m=L.data,m==="/$"){if(0<S&&8>S){m=S;var Z=d.ownerDocument;if(m&1&&Oh(Z.documentElement),m&2&&Oh(Z.body),m&4)for(m=Z.head,Oh(m),Z=m.firstChild;Z;){var pe=Z.nextSibling,Oe=Z.nodeName;Z[qr]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||m.removeChild(Z),Z=pe}}if(E===0){d.removeChild(L),Bh(h);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:S=m.charCodeAt(0)-48;else S=0;m=L}while(m);Bh(h)}function Ox(d){var h=d.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ox(m),Tn(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}d.removeChild(m)}}function Y1(d,h,m,S){for(;d.nodeType===1;){var E=m;if(d.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(S){if(!d[qr])switch(h){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(L=d.getAttribute("rel"),L==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(L!==E.rel||d.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||d.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||d.getAttribute("title")!==(E.title==null?null:E.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(L=d.getAttribute("src"),(L!==(E.src==null?null:E.src)||d.getAttribute("type")!==(E.type==null?null:E.type)||d.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&L&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(h==="input"&&d.type==="hidden"){var L=E.name==null?null:""+E.name;if(E.type==="hidden"&&d.getAttribute("name")===L)return d}else return d;if(d=Ns(d.nextSibling),d===null)break}return null}function im(d,h,m){if(h==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!m||(d=Ns(d.nextSibling),d===null))return null;return d}function Wa(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function Iu(d,h){var m=d.ownerDocument;if(d.data!=="$?"||m.readyState==="complete")h();else{var S=function(){h(),m.removeEventListener("DOMContentLoaded",S)};m.addEventListener("DOMContentLoaded",S),d._reactRetry=S}}function Ns(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return d}var Mx=null;function K1(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var m=d.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return d;h--}else m==="/$"&&h++}d=d.previousSibling}return null}function Q1(d,h,m){switch(h=mc(m),d){case"html":if(d=h.documentElement,!d)throw Error(a(452));return d;case"head":if(d=h.head,!d)throw Error(a(453));return d;case"body":if(d=h.body,!d)throw Error(a(454));return d;default:throw Error(a(451))}}function Oh(d){for(var h=d.attributes;h.length;)d.removeAttributeNode(h[0]);Tn(d)}var Ai=new Map,Qs=new Set;function un(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var Xs=Y.d;Y.d={f:as,r:X1,D:A_,C:J1,L:sm,m:E_,X:D_,S:P_,M:O_};function as(){var d=Xs.f(),h=Wp();return d||h}function X1(d){var h=et(d);h!==null&&h.tag===5&&h.type==="form"?Ep(h):Xs.r(d)}var Ru=typeof document>"u"?null:document;function Jn(d,h,m){var S=Ru;if(S&&typeof h=="string"&&h){var E=Vi(h);E='link[rel="'+d+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),Qs.has(E)||(Qs.add(E),d={rel:d,crossOrigin:m,href:h},S.querySelector(E)===null&&(h=S.createElement("link"),ua(h,"link",d),Ot(h),S.head.appendChild(h)))}}function A_(d){Xs.D(d),Jn("dns-prefetch",d,null)}function J1(d,h){Xs.C(d,h),Jn("preconnect",d,h)}function sm(d,h,m){Xs.L(d,h,m);var S=Ru;if(S&&d&&h){var E='link[rel="preload"][as="'+Vi(h)+'"]';h==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+Vi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+Vi(m.imageSizes)+'"]')):E+='[href="'+Vi(d)+'"]';var L=E;switch(h){case"style":L=Lu(d);break;case"script":L=Fu(d)}Ai.has(L)||(d=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:d,as:h},m),Ai.set(L,d),S.querySelector(E)!==null||h==="style"&&S.querySelector(Mh(L))||h==="script"&&S.querySelector(Ih(L))||(h=S.createElement("link"),ua(h,"link",d),Ot(h),S.head.appendChild(h)))}}function E_(d,h){Xs.m(d,h);var m=Ru;if(m&&d){var S=h&&typeof h.as=="string"?h.as:"script",E='link[rel="modulepreload"][as="'+Vi(S)+'"][href="'+Vi(d)+'"]',L=E;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=Fu(d)}if(!Ai.has(L)&&(d=f({rel:"modulepreload",href:d},h),Ai.set(L,d),m.querySelector(E)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Ih(L)))return}S=m.createElement("link"),ua(S,"link",d),Ot(S),m.head.appendChild(S)}}}function P_(d,h,m){Xs.S(d,h,m);var S=Ru;if(S&&d){var E=St(S).hoistableStyles,L=Lu(d);h=h||"default";var Z=E.get(L);if(!Z){var pe={loading:0,preload:null};if(Z=S.querySelector(Mh(L)))pe.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":h},m),(m=Ai.get(L))&&Rh(d,m);var Oe=Z=S.createElement("link");Ot(Oe),ua(Oe,"link",d),Oe._p=new Promise(function(Je,dt){Oe.onload=Je,Oe.onerror=dt}),Oe.addEventListener("load",function(){pe.loading|=1}),Oe.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,om(Z,h,S)}Z={type:"stylesheet",instance:Z,count:1,state:pe},E.set(L,Z)}}}function D_(d,h){Xs.X(d,h);var m=Ru;if(m&&d){var S=St(m).hoistableScripts,E=Fu(d),L=S.get(E);L||(L=m.querySelector(Ih(E)),L||(d=f({src:d,async:!0},h),(h=Ai.get(E))&&Ix(d,h),L=m.createElement("script"),Ot(L),ua(L,"link",d),m.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},S.set(E,L))}}function O_(d,h){Xs.M(d,h);var m=Ru;if(m&&d){var S=St(m).hoistableScripts,E=Fu(d),L=S.get(E);L||(L=m.querySelector(Ih(E)),L||(d=f({src:d,async:!0,type:"module"},h),(h=Ai.get(E))&&Ix(d,h),L=m.createElement("script"),Ot(L),ua(L,"link",d),m.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},S.set(E,L))}}function Z1(d,h,m,S){var E=(E=Be.current)?un(E):null;if(!E)throw Error(a(446));switch(d){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Lu(m.href),m=St(E).hoistableStyles,S=m.get(h),S||(S={type:"style",instance:null,count:0,state:null},m.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){d=Lu(m.href);var L=St(E).hoistableStyles,Z=L.get(d);if(Z||(E=E.ownerDocument||E,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(d,Z),(L=E.querySelector(Mh(d)))&&!L._p&&(Z.instance=L,Z.state.loading=5),Ai.has(d)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ai.set(d,m),L||M_(E,d,m,Z.state))),h&&S===null)throw Error(a(528,""));return Z}if(h&&S!==null)throw Error(a(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Fu(m),m=St(E).hoistableScripts,S=m.get(h),S||(S={type:"script",instance:null,count:0,state:null},m.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,d))}}function Lu(d){return'href="'+Vi(d)+'"'}function Mh(d){return'link[rel="stylesheet"]['+d+"]"}function ej(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function M_(d,h,m,S){d.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=d.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),ua(h,"link",m),Ot(h),d.head.appendChild(h))}function Fu(d){return'[src="'+Vi(d)+'"]'}function Ih(d){return"script[async]"+d}function tj(d,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var S=d.querySelector('style[data-href~="'+Vi(m.href)+'"]');if(S)return h.instance=S,Ot(S),S;var E=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return S=(d.ownerDocument||d).createElement("style"),Ot(S),ua(S,"style",E),om(S,m.precedence,d),h.instance=S;case"stylesheet":E=Lu(m.href);var L=d.querySelector(Mh(E));if(L)return h.state.loading|=4,h.instance=L,Ot(L),L;S=ej(m),(E=Ai.get(E))&&Rh(S,E),L=(d.ownerDocument||d).createElement("link"),Ot(L);var Z=L;return Z._p=new Promise(function(pe,Oe){Z.onload=pe,Z.onerror=Oe}),ua(L,"link",S),h.state.loading|=4,om(L,m.precedence,d),h.instance=L;case"script":return L=Fu(m.src),(E=d.querySelector(Ih(L)))?(h.instance=E,Ot(E),E):(S=m,(E=Ai.get(L))&&(S=f({},m),Ix(S,E)),d=d.ownerDocument||d,E=d.createElement("script"),Ot(E),ua(E,"link",S),d.head.appendChild(E),h.instance=E);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,om(S,m.precedence,d));return h.instance}function om(d,h,m){for(var S=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=S.length?S[S.length-1]:null,L=E,Z=0;Z<S.length;Z++){var pe=S[Z];if(pe.dataset.precedence===h)L=pe;else if(L!==E)break}L?L.parentNode.insertBefore(d,L.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(d,h.firstChild))}function Rh(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.title==null&&(d.title=h.title)}function Ix(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.integrity==null&&(d.integrity=h.integrity)}var $u=null;function nj(d,h,m){if($u===null){var S=new Map,E=$u=new Map;E.set(m,S)}else E=$u,S=E.get(m),S||(S=new Map,E.set(m,S));if(S.has(d))return S;for(S.set(d,null),m=m.getElementsByTagName(d),E=0;E<m.length;E++){var L=m[E];if(!(L[qr]||L[Ht]||d==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=L.getAttribute(h)||"";Z=d+Z;var pe=S.get(Z);pe?pe.push(L):S.set(Z,[L])}}return S}function rj(d,h,m){d=d.ownerDocument||d,d.head.insertBefore(m,h==="title"?d.querySelector("head > title"):null)}function I_(d,h,m){if(m===1||h.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return d=h.disabled,typeof h.precedence=="string"&&d==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function da(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var ga=null;function R_(){}function L_(d,h,m){if(ga===null)throw Error(a(475));var S=ga;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var E=Lu(m.href),L=d.querySelector(Mh(E));if(L){d=L._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(S.count++,S=Lh.bind(S),d.then(S,S)),h.state.loading|=4,h.instance=L,Ot(L);return}L=d.ownerDocument||d,m=ej(m),(E=Ai.get(E))&&Rh(m,E),L=L.createElement("link"),Ot(L);var Z=L;Z._p=new Promise(function(pe,Oe){Z.onload=pe,Z.onerror=Oe}),ua(L,"link",m),h.instance=L}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(h,d),(d=h.state.preload)&&(h.state.loading&3)===0&&(S.count++,h=Lh.bind(S),d.addEventListener("load",h),d.addEventListener("error",h))}}function F_(){if(ga===null)throw Error(a(475));var d=ga;return d.stylesheets&&d.count===0&&Rx(d,d.stylesheets),0<d.count?function(h){var m=setTimeout(function(){if(d.stylesheets&&Rx(d,d.stylesheets),d.unsuspend){var S=d.unsuspend;d.unsuspend=null,S()}},6e4);return d.unsuspend=h,function(){d.unsuspend=null,clearTimeout(m)}}:null}function Lh(){if(this.count--,this.count===0){if(this.stylesheets)Rx(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var lm=null;function Rx(d,h){d.stylesheets=null,d.unsuspend!==null&&(d.count++,lm=new Map,h.forEach($_,d),lm=null,Lh.call(d))}function $_(d,h){if(!(h.state.loading&4)){var m=lm.get(d);if(m)var S=m.get(null);else{m=new Map,lm.set(d,m);for(var E=d.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<E.length;L++){var Z=E[L];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(m.set(Z.dataset.precedence,Z),S=Z)}S&&m.set(null,S)}E=h.instance,Z=E.getAttribute("data-precedence"),L=m.get(Z)||S,L===S&&m.set(null,E),m.set(Z,E),this.count++,S=Lh.bind(this),E.addEventListener("load",S),E.addEventListener("error",S),L?L.parentNode.insertBefore(E,L.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(E,d.firstChild)),h.state.loading|=4}}var zu={$$typeof:C,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function z_(d,h,m,S,E,L,Z,pe){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=S,this.onUncaughtError=E,this.onCaughtError=L,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function aj(d,h,m,S,E,L,Z,pe,Oe,Je,dt,pt){return d=new z_(d,h,m,Z,pe,Oe,Je,pt),h=1,L===!0&&(h|=24),L=Za(3,null,null,h),d.current=L,L.stateNode=d,h=Ey(),h.refCount++,d.pooledCache=h,h.refCount++,L.memoizedState={element:S,isDehydrated:m,cache:h},nc(L),d}function ij(d){return d?(d=Kl,d):Kl}function Lx(d,h,m,S,E,L){E=ij(E),S.context===null?S.context=E:S.pendingContext=E,S=il(h),S.payload={element:m},L=L===void 0?null:L,L!==null&&(S.callback=L),m=vo(d,S,h),m!==null&&(ki(m,d,h),Qd(m,d,h))}function Fx(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var m=d.retryLane;d.retryLane=m!==0&&m<h?m:h}}function $x(d,h){Fx(d,h),(d=d.alternate)&&Fx(d,h)}function sj(d){if(d.tag===13){var h=Yl(d,67108864);h!==null&&ki(h,d,67108864),$x(d,67108864)}}var cm=!0;function B_(d,h,m,S){var E=z.T;z.T=null;var L=Y.p;try{Y.p=2,zx(d,h,m,S)}finally{Y.p=L,z.T=E}}function Bu(d,h,m,S){var E=z.T;z.T=null;var L=Y.p;try{Y.p=8,zx(d,h,m,S)}finally{Y.p=L,z.T=E}}function zx(d,h,m,S){if(cm){var E=Bx(S);if(E===null)Eo(d,h,S,um,m),lj(d,S);else if(U_(E,d,h,m,S))S.stopPropagation();else if(lj(d,S),h&4&&-1<q_.indexOf(d)){for(;E!==null;){var L=et(E);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var Z=wt(L.pendingLanes);if(Z!==0){var pe=L;for(pe.pendingLanes|=2,pe.entangledLanes|=2;Z;){var Oe=1<<31-he(Z);pe.entanglements[1]|=Oe,Z&=~Oe}Ks(L),(rr&6)===0&&(Au=Ne()+500,Ah(0))}}break;case 13:pe=Yl(L,2),pe!==null&&ki(pe,L,2),Wp(),$x(L,2)}if(L=Bx(S),L===null&&Eo(d,h,S,um,m),L===E)break;E=L}E!==null&&S.stopPropagation()}else Eo(d,h,S,null,m)}}function Bx(d){return d=dy(d),qx(d)}var um=null;function qx(d){if(um=null,d=Rn(d),d!==null){var h=s(d);if(h===null)d=null;else{var m=h.tag;if(m===13){if(d=o(h),d!==null)return d;d=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null)}}return um=d,null}function oj(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ee()){case ge:return 2;case de:return 8;case ae:case ne:return 32;case se:return 268435456;default:return 32}default:return 32}}var dm=!1,Po=null,jl=null,wl=null,Fh=new Map,$h=new Map,Nl=[],q_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lj(d,h){switch(d){case"focusin":case"focusout":Po=null;break;case"dragenter":case"dragleave":jl=null;break;case"mouseover":case"mouseout":wl=null;break;case"pointerover":case"pointerout":Fh.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":$h.delete(h.pointerId)}}function zh(d,h,m,S,E,L){return d===null||d.nativeEvent!==L?(d={blockedOn:h,domEventName:m,eventSystemFlags:S,nativeEvent:L,targetContainers:[E]},h!==null&&(h=et(h),h!==null&&sj(h)),d):(d.eventSystemFlags|=S,h=d.targetContainers,E!==null&&h.indexOf(E)===-1&&h.push(E),d)}function U_(d,h,m,S,E){switch(h){case"focusin":return Po=zh(Po,d,h,m,S,E),!0;case"dragenter":return jl=zh(jl,d,h,m,S,E),!0;case"mouseover":return wl=zh(wl,d,h,m,S,E),!0;case"pointerover":var L=E.pointerId;return Fh.set(L,zh(Fh.get(L)||null,d,h,m,S,E)),!0;case"gotpointercapture":return L=E.pointerId,$h.set(L,zh($h.get(L)||null,d,h,m,S,E)),!0}return!1}function cj(d){var h=Rn(d.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=o(m),h!==null){d.blockedOn=h,vt(d.priority,function(){if(m.tag===13){var S=Ma();S=jt(S);var E=Yl(m,S);E!==null&&ki(E,m,S),$x(m,S)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){d.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}d.blockedOn=null}function hm(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var m=Bx(d.nativeEvent);if(m===null){m=d.nativeEvent;var S=new m.constructor(m.type,m);Wf=S,m.target.dispatchEvent(S),Wf=null}else return h=et(m),h!==null&&sj(h),d.blockedOn=m,!1;h.shift()}return!0}function uj(d,h,m){hm(d)&&m.delete(h)}function V_(){dm=!1,Po!==null&&hm(Po)&&(Po=null),jl!==null&&hm(jl)&&(jl=null),wl!==null&&hm(wl)&&(wl=null),Fh.forEach(uj),$h.forEach(uj)}function fm(d,h){d.blockedOn===h&&(d.blockedOn=null,dm||(dm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,V_)))}var pm=null;function dj(d){pm!==d&&(pm=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){pm===d&&(pm=null);for(var h=0;h<d.length;h+=3){var m=d[h],S=d[h+1],E=d[h+2];if(typeof S!="function"){if(qx(S||m)===null)continue;break}var L=et(m);L!==null&&(d.splice(h,3),h-=3,oh(L,{pending:!0,data:E,method:m.method,action:S},S,E))}}))}function Bh(d){function h(Oe){return fm(Oe,d)}Po!==null&&fm(Po,d),jl!==null&&fm(jl,d),wl!==null&&fm(wl,d),Fh.forEach(h),$h.forEach(h);for(var m=0;m<Nl.length;m++){var S=Nl[m];S.blockedOn===d&&(S.blockedOn=null)}for(;0<Nl.length&&(m=Nl[0],m.blockedOn===null);)cj(m),m.blockedOn===null&&Nl.shift();if(m=(d.ownerDocument||d).$$reactFormReplay,m!=null)for(S=0;S<m.length;S+=3){var E=m[S],L=m[S+1],Z=E[Qn]||null;if(typeof L=="function")Z||dj(m);else if(Z){var pe=null;if(L&&L.hasAttribute("formAction")){if(E=L,Z=L[Qn]||null)pe=Z.formAction;else if(qx(E)!==null)continue}else pe=Z.action;typeof pe=="function"?m[S+1]=pe:(m.splice(S,3),S-=3),dj(m)}}}function Ux(d){this._internalRoot=d}mm.prototype.render=Ux.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(a(409));var m=h.current,S=Ma();Lx(m,S,d,h,null,null)},mm.prototype.unmount=Ux.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Lx(d.current,2,null,d,null,null),Wp(),h[br]=null}};function mm(d){this._internalRoot=d}mm.prototype.unstable_scheduleHydration=function(d){if(d){var h=Kn();d={blockedOn:null,target:d,priority:h};for(var m=0;m<Nl.length&&h!==0&&h<Nl[m].priority;m++);Nl.splice(m,0,d),m===0&&cj(d)}};var hj=e.version;if(hj!=="19.1.0")throw Error(a(527,hj,"19.1.0"));Y.findDOMNode=function(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(a(188)):(d=Object.keys(d).join(","),Error(a(268,d)));return d=c(h),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var H_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gm.isDisabled&&gm.supportsFiber)try{J=gm.inject(H_),ye=gm}catch{}}return Hx.createRoot=function(d,h){if(!i(d))throw Error(a(299));var m=!1,S="",E=nx,L=Op,Z=X0,pe=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(Z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(pe=h.unstable_transitionCallbacks)),h=aj(d,1,!1,null,null,m,S,E,L,Z,pe,null),d[br]=h.current,Ex(d),new Ux(h)},Hx.hydrateRoot=function(d,h,m){if(!i(d))throw Error(a(299));var S=!1,E="",L=nx,Z=Op,pe=X0,Oe=null,Je=null;return m!=null&&(m.unstable_strictMode===!0&&(S=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(L=m.onUncaughtError),m.onCaughtError!==void 0&&(Z=m.onCaughtError),m.onRecoverableError!==void 0&&(pe=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Oe=m.unstable_transitionCallbacks),m.formState!==void 0&&(Je=m.formState)),h=aj(d,1,!0,h,m??null,S,E,L,Z,pe,Oe,Je),h.context=ij(null),m=h.current,S=Ma(),S=jt(S),E=il(S),E.callback=null,vo(m,E,S),m=S,h.current.lanes=m,ke(h,m),Ks(h),d[br]=h.current,Ex(d),new mm(h)},Hx.version="19.1.0",Hx}var nI;function xW(){if(nI)return J_.exports;nI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),J_.exports=yW(),J_.exports}var vW=xW(),Rg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bW={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Qu,PD,Zz,jW=(Zz=class{constructor(){Vt(this,Qu,bW);Vt(this,PD,!1)}setTimeoutProvider(t){Pt(this,Qu,t)}setTimeout(t,e){return Re(this,Qu).setTimeout(t,e)}clearTimeout(t){Re(this,Qu).clearTimeout(t)}setInterval(t,e){return Re(this,Qu).setInterval(t,e)}clearInterval(t){Re(this,Qu).clearInterval(t)}},Qu=new WeakMap,PD=new WeakMap,Zz),Jh=new jW;function wW(t){setTimeout(t,0)}var vf=typeof window>"u"||"Deno"in globalThis;function Mi(){}function NW(t,e){return typeof t=="function"?t(e):t}function eE(t){return typeof t=="number"&&t>=0&&t!==1/0}function dB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ld(t,e){return typeof t=="function"?t(e):t}function to(t,e){return typeof t=="function"?t(e):t}function rI(t,e){const{type:n="all",exact:a,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(a){if(e.queryHash!==OD(o,e.options))return!1}else if(!Pv(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function aI(t,e){const{exact:n,status:a,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(bf(e.options.mutationKey)!==bf(s))return!1}else if(!Pv(e.options.mutationKey,s))return!1}return!(a&&e.state.status!==a||i&&!i(e))}function OD(t,e){return((e==null?void 0:e.queryKeyHashFn)||bf)(t)}function bf(t){return JSON.stringify(t,(e,n)=>tE(n)?Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{}):n)}function Pv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Pv(t[n],e[n])):!1}var SW=Object.prototype.hasOwnProperty;function hB(t,e,n=0){if(t===e)return t;if(n>500)return e;const a=iI(t)&&iI(e);if(!a&&!(tE(t)&&tE(e)))return e;const s=(a?t:Object.keys(t)).length,o=a?e:Object.keys(e),l=o.length,c=a?new Array(l):{};let u=0;for(let f=0;f<l;f++){const p=a?f:o[f],g=t[p],x=e[p];if(g===x){c[p]=g,(a?f<s:SW.call(t,p))&&u++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){c[p]=x;continue}const b=hB(g,x,n+1);c[p]=b,b===g&&u++}return s===l&&u===s?t:c}function dw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function iI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function tE(t){if(!sI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!sI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function sI(t){return Object.prototype.toString.call(t)==="[object Object]"}function _W(t){return new Promise(e=>{Jh.setTimeout(e,t)})}function nE(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?hB(t,e):e}function CW(t,e,n=0){const a=[...t,e];return n&&a.length>n?a.slice(1):a}function TW(t,e,n=0){const a=[e,...t];return n&&a.length>n?a.slice(0,-1):a}var MD=Symbol();function fB(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===MD?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function ID(t,e){return typeof t=="function"?t(...e):!!t}function kW(t,e,n){let a=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),a||(a=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var sf,Xu,Vm,eB,AW=(eB=class extends Rg{constructor(){super();Vt(this,sf);Vt(this,Xu);Vt(this,Vm);Pt(this,Vm,e=>{if(!vf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Re(this,Xu)||this.setEventListener(Re(this,Vm))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,Xu))==null||e.call(this),Pt(this,Xu,void 0))}setEventListener(e){var n;Pt(this,Vm,e),(n=Re(this,Xu))==null||n.call(this),Pt(this,Xu,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){Re(this,sf)!==e&&(Pt(this,sf,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Re(this,sf)=="boolean"?Re(this,sf):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},sf=new WeakMap,Xu=new WeakMap,Vm=new WeakMap,eB),RD=new AW;function rE(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function a(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{a({status:"fulfilled",value:i}),t(i)},n.reject=i=>{a({status:"rejected",reason:i}),e(i)},n}var EW=wW;function PW(){let t=[],e=0,n=l=>{l()},a=l=>{l()},i=EW;const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{a(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{i=l}}}var Ta=PW(),Hm,Ju,Gm,tB,DW=(tB=class extends Rg{constructor(){super();Vt(this,Hm,!0);Vt(this,Ju);Vt(this,Gm);Pt(this,Gm,e=>{if(!vf&&window.addEventListener){const n=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}})}onSubscribe(){Re(this,Ju)||this.setEventListener(Re(this,Gm))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,Ju))==null||e.call(this),Pt(this,Ju,void 0))}setEventListener(e){var n;Pt(this,Gm,e),(n=Re(this,Ju))==null||n.call(this),Pt(this,Ju,e(this.setOnline.bind(this)))}setOnline(e){Re(this,Hm)!==e&&(Pt(this,Hm,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return Re(this,Hm)}},Hm=new WeakMap,Ju=new WeakMap,Gm=new WeakMap,tB),hw=new DW;function OW(t){return Math.min(1e3*2**t,3e4)}function pB(t){return(t??"online")==="online"?hw.isOnline():!0}var aE=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function mB(t){let e=!1,n=0,a;const i=rE(),s=()=>i.status!=="pending",o=j=>{var w;if(!s()){const _=new aE(j);g(_),(w=t.onCancel)==null||w.call(t,_)}},l=()=>{e=!0},c=()=>{e=!1},u=()=>RD.isFocused()&&(t.networkMode==="always"||hw.isOnline())&&t.canRun(),f=()=>pB(t.networkMode)&&t.canRun(),p=j=>{s()||(a==null||a(),i.resolve(j))},g=j=>{s()||(a==null||a(),i.reject(j))},x=()=>new Promise(j=>{var w;a=_=>{(s()||u())&&j(_)},(w=t.onPause)==null||w.call(t)}).then(()=>{var j;a=void 0,s()||(j=t.onContinue)==null||j.call(t)}),b=()=>{if(s())return;let j;const w=n===0?t.initialPromise:void 0;try{j=w??t.fn()}catch(_){j=Promise.reject(_)}Promise.resolve(j).then(p).catch(_=>{var P;if(s())return;const T=t.retry??(vf?0:3),C=t.retryDelay??OW,A=typeof C=="function"?C(n,_):C,k=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,_);if(e||!k){g(_);return}n++,(P=t.onFail)==null||P.call(t,n,_),_W(A).then(()=>u()?void 0:x()).then(()=>{e?g(_):b()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?b():x().then(b),i)}}var of,nB,gB=(nB=class{constructor(){Vt(this,of)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eE(this.gcTime)&&Pt(this,of,Jh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vf?1/0:5*60*1e3))}clearGcTimeout(){Re(this,of)&&(Jh.clearTimeout(Re(this,of)),Pt(this,of,void 0))}},of=new WeakMap,nB),lf,Wm,eo,cf,Ia,Nb,uf,Io,vc,rB,MW=(rB=class extends gB{constructor(e){super();Vt(this,Io);Vt(this,lf);Vt(this,Wm);Vt(this,eo);Vt(this,cf);Vt(this,Ia);Vt(this,Nb);Vt(this,uf);Pt(this,uf,!1),Pt(this,Nb,e.defaultOptions),this.setOptions(e.options),this.observers=[],Pt(this,cf,e.client),Pt(this,eo,Re(this,cf).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Pt(this,lf,lI(this.options)),this.state=e.state??Re(this,lf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Re(this,Ia))==null?void 0:e.promise}setOptions(e){if(this.options={...Re(this,Nb),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=lI(this.options);n.data!==void 0&&(this.setState(oI(n.data,n.dataUpdatedAt)),Pt(this,lf,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Re(this,eo).remove(this)}setData(e,n){const a=nE(this.state.data,e,this.options);return wn(this,Io,vc).call(this,{data:a,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),a}setState(e,n){wn(this,Io,vc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var a,i;const n=(a=Re(this,Ia))==null?void 0:a.promise;return(i=Re(this,Ia))==null||i.cancel(e),n?n.then(Mi).catch(Mi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Re(this,lf))}isActive(){return this.observers.some(e=>to(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===MD||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ld(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!dB(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Re(this,Ia))==null||n.continue()}onOnline(){var n;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Re(this,Ia))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Re(this,eo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Re(this,Ia)&&(Re(this,uf)?Re(this,Ia).cancel({revert:!0}):Re(this,Ia).cancelRetry()),this.scheduleGc()),Re(this,eo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wn(this,Io,vc).call(this,{type:"invalidate"})}async fetch(e,n){var c,u,f,p,g,x,b,j,w,_,T,C;if(this.state.fetchStatus!=="idle"&&((c=Re(this,Ia))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Re(this,Ia))return Re(this,Ia).continueRetry(),Re(this,Ia).promise}if(e&&this.setOptions(e),!this.options.queryFn){const A=this.observers.find(k=>k.options.queryFn);A&&this.setOptions(A.options)}const a=new AbortController,i=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(Pt(this,uf,!0),a.signal)})},s=()=>{const A=fB(this.options,n),P=(()=>{const I={client:Re(this,cf),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return Pt(this,uf,!1),this.options.persister?this.options.persister(A,P,this):A(P)},l=(()=>{const A={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Re(this,cf),state:this.state,fetchFn:s};return i(A),A})();(u=this.options.behavior)==null||u.onFetch(l,this),Pt(this,Wm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&wn(this,Io,vc).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Pt(this,Ia,mB({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:A=>{A instanceof aE&&A.revert&&this.setState({...Re(this,Wm),fetchStatus:"idle"}),a.abort()},onFail:(A,k)=>{wn(this,Io,vc).call(this,{type:"failed",failureCount:A,error:k})},onPause:()=>{wn(this,Io,vc).call(this,{type:"pause"})},onContinue:()=>{wn(this,Io,vc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const A=await Re(this,Ia).start();if(A===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(A),(x=(g=Re(this,eo).config).onSuccess)==null||x.call(g,A,this),(j=(b=Re(this,eo).config).onSettled)==null||j.call(b,A,this.state.error,this),A}catch(A){if(A instanceof aE){if(A.silent)return Re(this,Ia).promise;if(A.revert){if(this.state.data===void 0)throw A;return this.state.data}}throw wn(this,Io,vc).call(this,{type:"error",error:A}),(_=(w=Re(this,eo).config).onError)==null||_.call(w,A,this),(C=(T=Re(this,eo).config).onSettled)==null||C.call(T,this.state.data,A,this),A}finally{this.scheduleGc()}}},lf=new WeakMap,Wm=new WeakMap,eo=new WeakMap,cf=new WeakMap,Ia=new WeakMap,Nb=new WeakMap,uf=new WeakMap,Io=new WeakSet,vc=function(e){const n=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...yB(a.data,this.options),fetchMeta:e.meta??null};case"success":const i={...a,...oI(e.data,e.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Pt(this,Wm,e.manual?i:void 0),i;case"error":const s=e.error;return{...a,error:s,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=n(this.state),Ta.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),Re(this,eo).notify({query:this,type:"updated",action:e})})},rB);function yB(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pB(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function oI(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function lI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,a=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ss,Un,Sb,Di,df,Ym,jc,Zu,_b,Km,Qm,hf,ff,ed,Xm,pr,fv,iE,sE,oE,lE,cE,uE,dE,xB,aB,IW=(aB=class extends Rg{constructor(e,n){super();Vt(this,pr);Vt(this,ss);Vt(this,Un);Vt(this,Sb);Vt(this,Di);Vt(this,df);Vt(this,Ym);Vt(this,jc);Vt(this,Zu);Vt(this,_b);Vt(this,Km);Vt(this,Qm);Vt(this,hf);Vt(this,ff);Vt(this,ed);Vt(this,Xm,new Set);this.options=n,Pt(this,ss,e),Pt(this,Zu,null),Pt(this,jc,rE()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Re(this,Un).addObserver(this),cI(Re(this,Un),this.options)?wn(this,pr,fv).call(this):this.updateResult(),wn(this,pr,lE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hE(Re(this,Un),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hE(Re(this,Un),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,wn(this,pr,cE).call(this),wn(this,pr,uE).call(this),Re(this,Un).removeObserver(this)}setOptions(e){const n=this.options,a=Re(this,Un);if(this.options=Re(this,ss).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof to(this.options.enabled,Re(this,Un))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");wn(this,pr,dE).call(this),Re(this,Un).setOptions(this.options),n._defaulted&&!dw(this.options,n)&&Re(this,ss).getQueryCache().notify({type:"observerOptionsUpdated",query:Re(this,Un),observer:this});const i=this.hasListeners();i&&uI(Re(this,Un),a,this.options,n)&&wn(this,pr,fv).call(this),this.updateResult(),i&&(Re(this,Un)!==a||to(this.options.enabled,Re(this,Un))!==to(n.enabled,Re(this,Un))||ld(this.options.staleTime,Re(this,Un))!==ld(n.staleTime,Re(this,Un)))&&wn(this,pr,iE).call(this);const s=wn(this,pr,sE).call(this);i&&(Re(this,Un)!==a||to(this.options.enabled,Re(this,Un))!==to(n.enabled,Re(this,Un))||s!==Re(this,ed))&&wn(this,pr,oE).call(this,s)}getOptimisticResult(e){const n=Re(this,ss).getQueryCache().build(Re(this,ss),e),a=this.createResult(n,e);return LW(this,a)&&(Pt(this,Di,a),Pt(this,Ym,this.options),Pt(this,df,Re(this,Un).state)),a}getCurrentResult(){return Re(this,Di)}trackResult(e,n){return new Proxy(e,{get:(a,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Re(this,jc).status==="pending"&&Re(this,jc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,i))})}trackProp(e){Re(this,Xm).add(e)}getCurrentQuery(){return Re(this,Un)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Re(this,ss).defaultQueryOptions(e),a=Re(this,ss).getQueryCache().build(Re(this,ss),n);return a.fetch().then(()=>this.createResult(a,n))}fetch(e){return wn(this,pr,fv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Re(this,Di)))}createResult(e,n){var q;const a=Re(this,Un),i=this.options,s=Re(this,Di),o=Re(this,df),l=Re(this,Ym),u=e!==a?e.state:Re(this,Sb),{state:f}=e;let p={...f},g=!1,x;if(n._optimisticResults){const U=this.hasListeners(),F=!U&&cI(e,n),B=U&&uI(e,a,n,i);(F||B)&&(p={...p,...yB(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:b,errorUpdatedAt:j,status:w}=p;x=p.data;let _=!1;if(n.placeholderData!==void 0&&x===void 0&&w==="pending"){let U;s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(U=s.data,_=!0):U=typeof n.placeholderData=="function"?n.placeholderData((q=Re(this,Qm))==null?void 0:q.state.data,Re(this,Qm)):n.placeholderData,U!==void 0&&(w="success",x=nE(s==null?void 0:s.data,U,n),g=!0)}if(n.select&&x!==void 0&&!_)if(s&&x===(o==null?void 0:o.data)&&n.select===Re(this,_b))x=Re(this,Km);else try{Pt(this,_b,n.select),x=n.select(x),x=nE(s==null?void 0:s.data,x,n),Pt(this,Km,x),Pt(this,Zu,null)}catch(U){Pt(this,Zu,U)}Re(this,Zu)&&(b=Re(this,Zu),x=Re(this,Km),j=Date.now(),w="error");const T=p.fetchStatus==="fetching",C=w==="pending",A=w==="error",k=C&&T,P=x!==void 0,R={status:w,fetchStatus:p.fetchStatus,isPending:C,isSuccess:w==="success",isError:A,isInitialLoading:k,isLoading:k,data:x,dataUpdatedAt:p.dataUpdatedAt,error:b,errorUpdatedAt:j,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:A&&!P,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:A&&P,isStale:LD(e,n),refetch:this.refetch,promise:Re(this,jc),isEnabled:to(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const U=R.data!==void 0,F=R.status==="error"&&!U,B=G=>{F?G.reject(R.error):U&&G.resolve(R.data)},V=()=>{const G=Pt(this,jc,R.promise=rE());B(G)},W=Re(this,jc);switch(W.status){case"pending":e.queryHash===a.queryHash&&B(W);break;case"fulfilled":(F||R.data!==W.value)&&V();break;case"rejected":(!F||R.error!==W.reason)&&V();break}}return R}updateResult(){const e=Re(this,Di),n=this.createResult(Re(this,Un),this.options);if(Pt(this,df,Re(this,Un).state),Pt(this,Ym,this.options),Re(this,df).data!==void 0&&Pt(this,Qm,Re(this,Un)),dw(n,e))return;Pt(this,Di,n);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!Re(this,Xm).size)return!0;const o=new Set(s??Re(this,Xm));return this.options.throwOnError&&o.add("error"),Object.keys(Re(this,Di)).some(l=>{const c=l;return Re(this,Di)[c]!==e[c]&&o.has(c)})};wn(this,pr,xB).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&wn(this,pr,lE).call(this)}},ss=new WeakMap,Un=new WeakMap,Sb=new WeakMap,Di=new WeakMap,df=new WeakMap,Ym=new WeakMap,jc=new WeakMap,Zu=new WeakMap,_b=new WeakMap,Km=new WeakMap,Qm=new WeakMap,hf=new WeakMap,ff=new WeakMap,ed=new WeakMap,Xm=new WeakMap,pr=new WeakSet,fv=function(e){wn(this,pr,dE).call(this);let n=Re(this,Un).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Mi)),n},iE=function(){wn(this,pr,cE).call(this);const e=ld(this.options.staleTime,Re(this,Un));if(vf||Re(this,Di).isStale||!eE(e))return;const a=dB(Re(this,Di).dataUpdatedAt,e)+1;Pt(this,hf,Jh.setTimeout(()=>{Re(this,Di).isStale||this.updateResult()},a))},sE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Re(this,Un)):this.options.refetchInterval)??!1},oE=function(e){wn(this,pr,uE).call(this),Pt(this,ed,e),!(vf||to(this.options.enabled,Re(this,Un))===!1||!eE(Re(this,ed))||Re(this,ed)===0)&&Pt(this,ff,Jh.setInterval(()=>{(this.options.refetchIntervalInBackground||RD.isFocused())&&wn(this,pr,fv).call(this)},Re(this,ed)))},lE=function(){wn(this,pr,iE).call(this),wn(this,pr,oE).call(this,wn(this,pr,sE).call(this))},cE=function(){Re(this,hf)&&(Jh.clearTimeout(Re(this,hf)),Pt(this,hf,void 0))},uE=function(){Re(this,ff)&&(Jh.clearInterval(Re(this,ff)),Pt(this,ff,void 0))},dE=function(){const e=Re(this,ss).getQueryCache().build(Re(this,ss),this.options);if(e===Re(this,Un))return;const n=Re(this,Un);Pt(this,Un,e),Pt(this,Sb,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},xB=function(e){Ta.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Re(this,Di))}),Re(this,ss).getQueryCache().notify({query:Re(this,Un),type:"observerResultsUpdated"})})},aB);function RW(t,e){return to(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function cI(t,e){return RW(t,e)||t.state.data!==void 0&&hE(t,e,e.refetchOnMount)}function hE(t,e,n){if(to(e.enabled,t)!==!1&&ld(e.staleTime,t)!=="static"){const a=typeof n=="function"?n(t):n;return a==="always"||a!==!1&&LD(t,e)}return!1}function uI(t,e,n,a){return(t!==e||to(a.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&LD(t,n)}function LD(t,e){return to(e.enabled,t)!==!1&&t.isStaleByTime(ld(e.staleTime,t))}function LW(t,e){return!dw(t.getCurrentResult(),e)}function dI(t){return{onFetch:(e,n)=>{var f,p,g,x,b;const a=e.options,i=(g=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,s=((x=e.state.data)==null?void 0:x.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let j=!1;const w=C=>{kW(C,()=>e.signal,()=>j=!0)},_=fB(e.options,e.fetchOptions),T=async(C,A,k)=>{if(j)return Promise.reject();if(A==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:A,direction:k?"backward":"forward",meta:e.options.meta};return w(F),F})(),R=await _(I),{maxPages:q}=e.options,U=k?TW:CW;return{pages:U(C.pages,R,q),pageParams:U(C.pageParams,A,q)}};if(i&&s.length){const C=i==="backward",A=C?FW:hI,k={pages:s,pageParams:o},P=A(a,k);l=await T(k,P,C)}else{const C=t??s.length;do{const A=c===0?o[0]??a.initialPageParam:hI(a,l);if(c>0&&A==null)break;l=await T(l,A),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var j,w;return(w=(j=e.options).persister)==null?void 0:w.call(j,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function hI(t,{pages:e,pageParams:n}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,n[a],n):void 0}function FW(t,{pages:e,pageParams:n}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,n[0],n):void 0}var Cb,Cl,Oi,pf,Tl,Hu,iB,$W=(iB=class extends gB{constructor(e){super();Vt(this,Tl);Vt(this,Cb);Vt(this,Cl);Vt(this,Oi);Vt(this,pf);Pt(this,Cb,e.client),this.mutationId=e.mutationId,Pt(this,Oi,e.mutationCache),Pt(this,Cl,[]),this.state=e.state||vB(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Re(this,Cl).includes(e)||(Re(this,Cl).push(e),this.clearGcTimeout(),Re(this,Oi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Pt(this,Cl,Re(this,Cl).filter(n=>n!==e)),this.scheduleGc(),Re(this,Oi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Re(this,Cl).length||(this.state.status==="pending"?this.scheduleGc():Re(this,Oi).remove(this))}continue(){var e;return((e=Re(this,pf))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,u,f,p,g,x,b,j,w,_,T,C,A,k,P,I,R,q;const n=()=>{wn(this,Tl,Hu).call(this,{type:"continue"})},a={client:Re(this,Cb),meta:this.options.meta,mutationKey:this.options.mutationKey};Pt(this,pf,mB({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:(U,F)=>{wn(this,Tl,Hu).call(this,{type:"failed",failureCount:U,error:F})},onPause:()=>{wn(this,Tl,Hu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Re(this,Oi).canRun(this)}));const i=this.state.status==="pending",s=!Re(this,pf).canStart();try{if(i)n();else{wn(this,Tl,Hu).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(o=Re(this,Oi).config).onMutate)==null?void 0:l.call(o,e,this,a));const F=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,e,a));F!==this.state.context&&wn(this,Tl,Hu).call(this,{type:"pending",context:F,variables:e,isPaused:s})}const U=await Re(this,pf).start();return await((p=(f=Re(this,Oi).config).onSuccess)==null?void 0:p.call(f,U,e,this.state.context,this,a)),await((x=(g=this.options).onSuccess)==null?void 0:x.call(g,U,e,this.state.context,a)),await((j=(b=Re(this,Oi).config).onSettled)==null?void 0:j.call(b,U,null,this.state.variables,this.state.context,this,a)),await((_=(w=this.options).onSettled)==null?void 0:_.call(w,U,null,e,this.state.context,a)),wn(this,Tl,Hu).call(this,{type:"success",data:U}),U}catch(U){try{await((C=(T=Re(this,Oi).config).onError)==null?void 0:C.call(T,U,e,this.state.context,this,a))}catch(F){Promise.reject(F)}try{await((k=(A=this.options).onError)==null?void 0:k.call(A,U,e,this.state.context,a))}catch(F){Promise.reject(F)}try{await((I=(P=Re(this,Oi).config).onSettled)==null?void 0:I.call(P,void 0,U,this.state.variables,this.state.context,this,a))}catch(F){Promise.reject(F)}try{await((q=(R=this.options).onSettled)==null?void 0:q.call(R,void 0,U,e,this.state.context,a))}catch(F){Promise.reject(F)}throw wn(this,Tl,Hu).call(this,{type:"error",error:U}),U}finally{Re(this,Oi).runNext(this)}}},Cb=new WeakMap,Cl=new WeakMap,Oi=new WeakMap,pf=new WeakMap,Tl=new WeakSet,Hu=function(e){const n=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ta.batch(()=>{Re(this,Cl).forEach(a=>{a.onMutationUpdate(e)}),Re(this,Oi).notify({mutation:this,type:"updated",action:e})})},iB);function vB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wc,Ro,Tb,sB,zW=(sB=class extends Rg{constructor(e={}){super();Vt(this,wc);Vt(this,Ro);Vt(this,Tb);this.config=e,Pt(this,wc,new Set),Pt(this,Ro,new Map),Pt(this,Tb,0)}build(e,n,a){const i=new $W({client:e,mutationCache:this,mutationId:++fj(this,Tb)._,options:e.defaultMutationOptions(n),state:a});return this.add(i),i}add(e){Re(this,wc).add(e);const n=pj(e);if(typeof n=="string"){const a=Re(this,Ro).get(n);a?a.push(e):Re(this,Ro).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Re(this,wc).delete(e)){const n=pj(e);if(typeof n=="string"){const a=Re(this,Ro).get(n);if(a)if(a.length>1){const i=a.indexOf(e);i!==-1&&a.splice(i,1)}else a[0]===e&&Re(this,Ro).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=pj(e);if(typeof n=="string"){const a=Re(this,Ro).get(n),i=a==null?void 0:a.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var a;const n=pj(e);if(typeof n=="string"){const i=(a=Re(this,Ro).get(n))==null?void 0:a.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ta.batch(()=>{Re(this,wc).forEach(e=>{this.notify({type:"removed",mutation:e})}),Re(this,wc).clear(),Re(this,Ro).clear()})}getAll(){return Array.from(Re(this,wc))}find(e){const n={exact:!0,...e};return this.getAll().find(a=>aI(n,a))}findAll(e={}){return this.getAll().filter(n=>aI(e,n))}notify(e){Ta.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ta.batch(()=>Promise.all(e.map(n=>n.continue().catch(Mi))))}},wc=new WeakMap,Ro=new WeakMap,Tb=new WeakMap,sB);function pj(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Nc,td,os,Sc,Mc,Xj,fE,oB,BW=(oB=class extends Rg{constructor(n,a){super();Vt(this,Mc);Vt(this,Nc);Vt(this,td);Vt(this,os);Vt(this,Sc);Pt(this,Nc,n),this.setOptions(a),this.bindMethods(),wn(this,Mc,Xj).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const a=this.options;this.options=Re(this,Nc).defaultMutationOptions(n),dw(this.options,a)||Re(this,Nc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Re(this,os),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&bf(a.mutationKey)!==bf(this.options.mutationKey)?this.reset():((i=Re(this,os))==null?void 0:i.state.status)==="pending"&&Re(this,os).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Re(this,os))==null||n.removeObserver(this)}onMutationUpdate(n){wn(this,Mc,Xj).call(this),wn(this,Mc,fE).call(this,n)}getCurrentResult(){return Re(this,td)}reset(){var n;(n=Re(this,os))==null||n.removeObserver(this),Pt(this,os,void 0),wn(this,Mc,Xj).call(this),wn(this,Mc,fE).call(this)}mutate(n,a){var i;return Pt(this,Sc,a),(i=Re(this,os))==null||i.removeObserver(this),Pt(this,os,Re(this,Nc).getMutationCache().build(Re(this,Nc),this.options)),Re(this,os).addObserver(this),Re(this,os).execute(n)}},Nc=new WeakMap,td=new WeakMap,os=new WeakMap,Sc=new WeakMap,Mc=new WeakSet,Xj=function(){var a;const n=((a=Re(this,os))==null?void 0:a.state)??vB();Pt(this,td,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},fE=function(n){Ta.batch(()=>{var a,i,s,o,l,c,u,f;if(Re(this,Sc)&&this.hasListeners()){const p=Re(this,td).variables,g=Re(this,td).context,x={client:Re(this,Nc),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(i=(a=Re(this,Sc)).onSuccess)==null||i.call(a,n.data,p,g,x)}catch(b){Promise.reject(b)}try{(o=(s=Re(this,Sc)).onSettled)==null||o.call(s,n.data,null,p,g,x)}catch(b){Promise.reject(b)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=Re(this,Sc)).onError)==null||c.call(l,n.error,p,g,x)}catch(b){Promise.reject(b)}try{(f=(u=Re(this,Sc)).onSettled)==null||f.call(u,void 0,n.error,p,g,x)}catch(b){Promise.reject(b)}}}this.listeners.forEach(p=>{p(Re(this,td))})})},oB),kl,lB,qW=(lB=class extends Rg{constructor(e={}){super();Vt(this,kl);this.config=e,Pt(this,kl,new Map)}build(e,n,a){const i=n.queryKey,s=n.queryHash??OD(i,n);let o=this.get(s);return o||(o=new MW({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:a,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Re(this,kl).has(e.queryHash)||(Re(this,kl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Re(this,kl).get(e.queryHash);n&&(e.destroy(),n===e&&Re(this,kl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ta.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Re(this,kl).get(e)}getAll(){return[...Re(this,kl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(a=>rI(n,a))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(a=>rI(e,a)):n}notify(e){Ta.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ta.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ta.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},kl=new WeakMap,lB),na,nd,rd,Jm,Zm,ad,eg,tg,cB,UW=(cB=class{constructor(t={}){Vt(this,na);Vt(this,nd);Vt(this,rd);Vt(this,Jm);Vt(this,Zm);Vt(this,ad);Vt(this,eg);Vt(this,tg);Pt(this,na,t.queryCache||new qW),Pt(this,nd,t.mutationCache||new zW),Pt(this,rd,t.defaultOptions||{}),Pt(this,Jm,new Map),Pt(this,Zm,new Map),Pt(this,ad,0)}mount(){fj(this,ad)._++,Re(this,ad)===1&&(Pt(this,eg,RD.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,na).onFocus())})),Pt(this,tg,hw.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,na).onOnline())})))}unmount(){var t,e;fj(this,ad)._--,Re(this,ad)===0&&((t=Re(this,eg))==null||t.call(this),Pt(this,eg,void 0),(e=Re(this,tg))==null||e.call(this),Pt(this,tg,void 0))}isFetching(t){return Re(this,na).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Re(this,nd).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Re(this,na).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Re(this,na).build(this,e),a=n.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ld(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return Re(this,na).findAll(t).map(({queryKey:e,state:n})=>{const a=n.data;return[e,a]})}setQueryData(t,e,n){const a=this.defaultQueryOptions({queryKey:t}),i=Re(this,na).get(a.queryHash),s=i==null?void 0:i.state.data,o=NW(e,s);if(o!==void 0)return Re(this,na).build(this,a).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Ta.batch(()=>Re(this,na).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Re(this,na).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Re(this,na);Ta.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Re(this,na);return Ta.batch(()=>(n.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},a=Ta.batch(()=>Re(this,na).findAll(t).map(i=>i.cancel(n)));return Promise.all(a).then(Mi).catch(Mi)}invalidateQueries(t,e={}){return Ta.batch(()=>(Re(this,na).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},a=Ta.batch(()=>Re(this,na).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Mi)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(a).then(Mi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Re(this,na).build(this,e);return n.isStaleByTime(ld(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Mi).catch(Mi)}fetchInfiniteQuery(t){return t.behavior=dI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Mi).catch(Mi)}ensureInfiniteQueryData(t){return t.behavior=dI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return hw.isOnline()?Re(this,nd).resumePausedMutations():Promise.resolve()}getQueryCache(){return Re(this,na)}getMutationCache(){return Re(this,nd)}getDefaultOptions(){return Re(this,rd)}setDefaultOptions(t){Pt(this,rd,t)}setQueryDefaults(t,e){Re(this,Jm).set(bf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Re(this,Jm).values()],n={};return e.forEach(a=>{Pv(t,a.queryKey)&&Object.assign(n,a.defaultOptions)}),n}setMutationDefaults(t,e){Re(this,Zm).set(bf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Re(this,Zm).values()],n={};return e.forEach(a=>{Pv(t,a.mutationKey)&&Object.assign(n,a.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Re(this,rd).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=OD(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===MD&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Re(this,rd).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Re(this,na).clear(),Re(this,nd).clear()}},na=new WeakMap,nd=new WeakMap,rd=new WeakMap,Jm=new WeakMap,Zm=new WeakMap,ad=new WeakMap,eg=new WeakMap,tg=new WeakMap,cB),bB=v.createContext(void 0),hs=t=>{const e=v.useContext(bB);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},VW=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(bB.Provider,{value:t,children:e})),jB=v.createContext(!1),HW=()=>v.useContext(jB);jB.Provider;function GW(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var WW=v.createContext(GW()),YW=()=>v.useContext(WW),KW=(t,e,n)=>{const a=n!=null&&n.state.error&&typeof t.throwOnError=="function"?ID(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||a)&&(e.isReset()||(t.retryOnMount=!1))},QW=t=>{v.useEffect(()=>{t.clearReset()},[t])},XW=({result:t,errorResetBoundary:e,throwOnError:n,query:a,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&a&&(i&&t.data===void 0||ID(n,[t.error,a])),JW=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...i)=>n(a(...i)):n(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ZW=(t,e)=>t.isLoading&&t.isFetching&&!e,eY=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,fI=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function tY(t,e,n){var g,x,b,j;const a=HW(),i=YW(),s=hs(),o=s.defaultQueryOptions(t);(x=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",JW(o),KW(o,i,l),QW(i);const c=!s.getQueryCache().get(o.queryHash),[u]=v.useState(()=>new e(s,o)),f=u.getOptimisticResult(o),p=!a&&t.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(w=>{const _=p?u.subscribe(Ta.batchCalls(w)):Mi;return u.updateResult(),_},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),v.useEffect(()=>{u.setOptions(o)},[o,u]),eY(o,f))throw fI(o,u,i);if(XW({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((j=(b=s.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||j.call(b,o,f),o.experimental_prefetchInRender&&!vf&&ZW(f,a)){const w=c?fI(o,u,i):l==null?void 0:l.promise;w==null||w.catch(Mi).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?f:u.trackResult(f)}function FN(t,e){return tY(t,IW)}function nY(t,e){const n=hs(),[a]=v.useState(()=>new BW(n,t));v.useEffect(()=>{a.setOptions(t)},[a,t]);const i=v.useSyncExternalStore(v.useCallback(o=>a.subscribe(Ta.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),s=v.useCallback((o,l)=>{a.mutate(o,l).catch(Mi)},[a]);if(i.error&&ID(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const rY=new UW({defaultOptions:{queries:{staleTime:0,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!1}}}),Wt={clinicSettings:["clinicSettings"],clinicSubscription:["clinicSubscription"],patients:{all:["patients"],list:t=>["patients","list",t],detail:t=>["patients","detail",t],context:t=>["patients","context",t]},queue:{all:["queue"],today:["queue","today"],entry:t=>["queue","entry",t],latest:t=>["queue","patient",t,"latest"]},staff:{all:["staff"],list:["staff","list"],detail:t=>["staff","detail",t]},pharmacyOrders:{all:["pharmacyOrders"],detail:t=>["pharmacyOrders","detail",t],byPatient:t=>["pharmacyOrders","patient",t]},labOrders:{all:["labOrders"],detail:t=>["labOrders","detail",t],byPatient:t=>["labOrders","patient",t]},drugs:{all:["drugs"],list:["drugs","list"],detail:t=>["drugs","detail",t]},labTests:{all:["labTests"],list:["labTests","list"]},patientDebts:{balance:t=>["patientDebts","balance",t]},dental:{records:t=>["dental","records",t]}},aY="modulepreload",iY=function(t){return"/"+t},pI={},$N=function(e,n,a){let i=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(n.map(u=>{if(u=iY(u),u in pI)return;pI[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":aY,f||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((x,b)=>{g.addEventListener("load",x),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},Pm=({message:t="Newtons Ai HMS",fullScreen:e=!1})=>r.jsx("div",{className:`loading-container ${e?"fullscreen":""}`,children:r.jsxs("div",{className:"loading-content",children:[r.jsxs("div",{className:"spinner-ring",children:[r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{})]}),r.jsx("div",{className:"loading-title",children:t}),e&&r.jsx("div",{className:"loading-subtitle",children:"Optimizing your experience..."})]})});function sY(t={}){const{nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i}=t,[s,o]=v.useState(!1),l=v.useRef(a);l.current=a;const c=v.useRef(i);return c.current=i,v.useEffect(()=>{const u=document.createElement("script");return u.src="https://accounts.google.com/gsi/client",n&&(u.src+=`?hl=${n}`),u.async=!0,u.defer=!0,u.nonce=e,u.onload=()=>{var f;o(!0),(f=l.current)===null||f===void 0||f.call(l)},u.onerror=()=>{var f;o(!1),(f=c.current)===null||f===void 0||f.call(c)},document.body.appendChild(u),()=>{document.body.removeChild(u)}},[e]),s}const wB=v.createContext(null);function oY({clientId:t,nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i,children:s}){const o=sY({nonce:e,onScriptLoadSuccess:a,onScriptLoadError:i,locale:n}),l=v.useMemo(()=>({locale:n,clientId:t,scriptLoadedSuccessfully:o}),[t,o]);return Ce.createElement(wB.Provider,{value:l},s)}function lY(){const t=v.useContext(wB);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function cY(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const uY={large:40,medium:32,small:20};function dY({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:a,type:i="standard",theme:s="outline",size:o="large",text:l,shape:c,logo_alignment:u,width:f,click_listener:p,state:g,containerProps:x,...b}){const j=v.useRef(null),{clientId:w,locale:_,scriptLoadedSuccessfully:T}=lY(),C=v.useRef(t);C.current=t;const A=v.useRef(e);A.current=e;const k=v.useRef(a);return k.current=a,v.useEffect(()=>{var P,I,R,q,U,F,B,V,W;if(T)return(R=(I=(P=window==null?void 0:window.google)===null||P===void 0?void 0:P.accounts)===null||I===void 0?void 0:I.id)===null||R===void 0||R.initialize({client_id:w,callback:G=>{var z;if(!(G!=null&&G.credential))return(z=A.current)===null||z===void 0?void 0:z.call(A);const{credential:Y,select_by:Q}=G;C.current({credential:Y,clientId:cY(G),select_by:Q})},...b}),(F=(U=(q=window==null?void 0:window.google)===null||q===void 0?void 0:q.accounts)===null||U===void 0?void 0:U.id)===null||F===void 0||F.renderButton(j.current,{type:i,theme:s,size:o,text:l,shape:c,logo_alignment:u,width:f,locale:_,click_listener:p,state:g}),n&&((W=(V=(B=window==null?void 0:window.google)===null||B===void 0?void 0:B.accounts)===null||V===void 0?void 0:V.id)===null||W===void 0||W.prompt(k.current)),()=>{var G,z,Y;n&&((Y=(z=(G=window==null?void 0:window.google)===null||G===void 0?void 0:G.accounts)===null||z===void 0?void 0:z.id)===null||Y===void 0||Y.cancel())}},[w,T,n,i,s,o,l,c,u,f,_]),Ce.createElement("div",{...x,ref:j,style:{height:uY[o],...x==null?void 0:x.style}})}var Gx={},mI;function hY(){if(mI)return Gx;mI=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.parse=o,Gx.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,x){const b=new s,j=g.length;if(j<2)return b;const w=(x==null?void 0:x.decode)||f;let _=0;do{const T=g.indexOf("=",_);if(T===-1)break;const C=g.indexOf(";",_),A=C===-1?j:C;if(T>A){_=g.lastIndexOf(";",T-1)+1;continue}const k=l(g,_,T),P=c(g,T,k),I=g.slice(k,P);if(b[I]===void 0){let R=l(g,T+1,A),q=c(g,A,R);const U=w(g.slice(R,q));b[I]=U}_=A+1}while(_<j);return b}function l(g,x,b){do{const j=g.charCodeAt(x);if(j!==32&&j!==9)return x}while(++x<b);return b}function c(g,x,b){for(;x>b;){const j=g.charCodeAt(--x);if(j!==32&&j!==9)return x+1}return b}function u(g,x,b){const j=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const w=j(x);if(!e.test(w))throw new TypeError(`argument val is invalid: ${x}`);let _=g+"="+w;if(!b)return _;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);_+="; Max-Age="+b.maxAge}if(b.domain){if(!n.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);_+="; Domain="+b.domain}if(b.path){if(!a.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);_+="; Path="+b.path}if(b.expires){if(!p(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);_+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(_+="; HttpOnly"),b.secure&&(_+="; Secure"),b.partitioned&&(_+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return _}function f(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return Gx}hY();var gI="popstate";function fY(t={}){function e(a,i){let{pathname:s,search:o,hash:l}=a.location;return pE("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){return typeof i=="string"?i:Dv(i)}return mY(e,n,null,t)}function Yr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function oo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pY(){return Math.random().toString(36).substring(2,10)}function yI(t,e){return{usr:t.state,key:t.key,idx:e}}function pE(t,e,n=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Lg(e):e,state:n,key:e&&e.key||a||pY()}}function Dv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Lg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function mY(t,e,n,a={}){let{window:i=document.defaultView,v5Compat:s=!1}=a,o=i.history,l="POP",c=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let w=f(),_=w==null?null:w-u;u=w,c&&c({action:l,location:j.location,delta:_})}function g(w,_){l="PUSH";let T=pE(j.location,w,_);u=f()+1;let C=yI(T,u),A=j.createHref(T);try{o.pushState(C,"",A)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(A)}s&&c&&c({action:l,location:j.location,delta:1})}function x(w,_){l="REPLACE";let T=pE(j.location,w,_);u=f();let C=yI(T,u),A=j.createHref(T);o.replaceState(C,"",A),s&&c&&c({action:l,location:j.location,delta:0})}function b(w){return gY(w)}let j={get action(){return l},get location(){return t(i,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(gI,p),c=w,()=>{i.removeEventListener(gI,p),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let _=b(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:x,go(w){return o.go(w)}};return j}function gY(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Yr(n,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Dv(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function NB(t,e,n="/"){return yY(t,e,n,!1)}function yY(t,e,n,a){let i=typeof e=="string"?Lg(e):e,s=Ic(i.pathname||"/",n);if(s==null)return null;let o=SB(t);xY(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=AY(s);l=TY(o[c],u,a)}return l}function SB(t,e=[],n=[],a=""){let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Yr(c.relativePath.startsWith(a),`Absolute route path "${c.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(a.length));let u=Ac([a,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(Yr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),SB(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:_Y(u,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of _B(s.path))i(s,o,c)}),e}function _B(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(a.length===0)return i?[s,""]:[s];let o=_B(a.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function xY(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:CY(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var vY=/^:[\w-]+$/,bY=3,jY=2,wY=1,NY=10,SY=-2,xI=t=>t==="*";function _Y(t,e){let n=t.split("/"),a=n.length;return n.some(xI)&&(a+=SY),e&&(a+=jY),n.filter(i=>!xI(i)).reduce((i,s)=>i+(vY.test(s)?bY:s===""?wY:NY),a)}function CY(t,e){return t.length===e.length&&t.slice(0,-1).every((a,i)=>a===e[i])?t[t.length-1]-e[e.length-1]:0}function TY(t,e,n=!1){let{routesMeta:a}=t,i={},s="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],u=l===a.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=fw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!p&&u&&n&&!a[a.length-1].route.index&&(p=fw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Ac([s,p.pathname]),pathnameBase:OY(Ac([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Ac([s,p.pathnameBase]))}return o}function fw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=kY(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:a.reduce((u,{paramName:f,isOptional:p},g)=>{if(f==="*"){let b=l[g]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function kY(t,e=!1,n=!0){oo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function AY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oo(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ic(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function EY(t,e="/"){let{pathname:n,search:a="",hash:i=""}=typeof t=="string"?Lg(t):t;return{pathname:n?n.startsWith("/")?n:PY(n,e):e,search:MY(a),hash:IY(i)}}function PY(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function nC(t,e,n,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DY(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FD(t){let e=DY(t);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function $D(t,e,n,a=!1){let i;typeof t=="string"?i=Lg(t):(i={...t},Yr(!i.pathname||!i.pathname.includes("?"),nC("?","pathname","search",i)),Yr(!i.pathname||!i.pathname.includes("#"),nC("#","pathname","hash",i)),Yr(!i.search||!i.search.includes("#"),nC("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!a&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=EY(i,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var Ac=t=>t.join("/").replace(/\/\/+/g,"/"),OY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function RY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var CB=["POST","PUT","PATCH","DELETE"];new Set(CB);var LY=["GET",...CB];new Set(LY);var Fg=v.createContext(null);Fg.displayName="DataRouter";var zN=v.createContext(null);zN.displayName="DataRouterState";var TB=v.createContext({isTransitioning:!1});TB.displayName="ViewTransition";var FY=v.createContext(new Map);FY.displayName="Fetchers";var $Y=v.createContext(null);$Y.displayName="Await";var Ho=v.createContext(null);Ho.displayName="Navigation";var kb=v.createContext(null);kb.displayName="Location";var Go=v.createContext({outlet:null,matches:[],isDataRoute:!1});Go.displayName="Route";var zD=v.createContext(null);zD.displayName="RouteError";function zY(t,{relative:e}={}){Yr($g(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=v.useContext(Ho),{hash:i,pathname:s,search:o}=Ab(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Ac([n,s])),a.createHref({pathname:l,search:o,hash:i})}function $g(){return v.useContext(kb)!=null}function Br(){return Yr($g(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(kb).location}var kB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function AB(t){v.useContext(Ho).static||v.useLayoutEffect(t)}function Lt(){let{isDataRoute:t}=v.useContext(Go);return t?ZY():BY()}function BY(){Yr($g(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Fg),{basename:e,navigator:n}=v.useContext(Ho),{matches:a}=v.useContext(Go),{pathname:i}=Br(),s=JSON.stringify(FD(a)),o=v.useRef(!1);return AB(()=>{o.current=!0}),v.useCallback((c,u={})=>{if(oo(o.current,kB),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=$D(c,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ac([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,s,i,t])}v.createContext(null);function $a(){let{matches:t}=v.useContext(Go),e=t[t.length-1];return e?e.params:{}}function Ab(t,{relative:e}={}){let{matches:n}=v.useContext(Go),{pathname:a}=Br(),i=JSON.stringify(FD(n));return v.useMemo(()=>$D(t,JSON.parse(i),a,e==="path"),[t,i,a,e])}function qY(t,e){return EB(t,e)}function EB(t,e,n,a){var T;Yr($g(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=v.useContext(Ho),{matches:o}=v.useContext(Go),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";PB(u,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=Br(),x;if(e){let C=typeof e=="string"?Lg(e):e;Yr(f==="/"||((T=C.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=g;let b=x.pathname||"/",j=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=!s&&n&&n.matches&&n.matches.length>0?n.matches:NB(t,{pathname:j});oo(p||w!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),oo(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=WY(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Ac([f,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ac([f,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,a);return e&&_?v.createElement(kb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function UY(){let t=JY(),e=RY(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}var VY=v.createElement(UY,null),HY=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Go.Provider,{value:this.props.routeContext},v.createElement(zD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GY({routeContext:t,match:e,children:n}){let a=v.useContext(Fg);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Go.Provider,{value:t},n)}function WY(t,e=[],n=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Yr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:f,errors:p}=n,g=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||g){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,f)=>{let p,g=!1,x=null,b=null;n&&(p=s&&u.route.id?s[u.route.id]:void 0,x=u.route.errorElement||VY,o&&(l<0&&f===0?(PB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):l===f&&(g=!0,b=u.route.hydrateFallbackElement||null)));let j=e.concat(i.slice(0,f+1)),w=()=>{let _;return p?_=x:g?_=b:u.route.Component?_=v.createElement(u.route.Component,null):u.route.element?_=u.route.element:_=c,v.createElement(GY,{match:u,routeContext:{outlet:c,matches:j,isDataRoute:n!=null},children:_})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?v.createElement(HY,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):w()},null)}function BD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YY(t){let e=v.useContext(Fg);return Yr(e,BD(t)),e}function KY(t){let e=v.useContext(zN);return Yr(e,BD(t)),e}function QY(t){let e=v.useContext(Go);return Yr(e,BD(t)),e}function qD(t){let e=QY(t),n=e.matches[e.matches.length-1];return Yr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function XY(){return qD("useRouteId")}function JY(){var a;let t=v.useContext(zD),e=KY("useRouteError"),n=qD("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[n]}function ZY(){let{router:t}=YY("useNavigate"),e=qD("useNavigate"),n=v.useRef(!1);return AB(()=>{n.current=!0}),v.useCallback(async(i,s={})=>{oo(n.current,kB),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var vI={};function PB(t,e,n){!e&&!vI[t]&&(vI[t]=!0,oo(!1,n))}v.memo(eK);function eK({routes:t,future:e,state:n}){return EB(t,void 0,n,e)}function qt({to:t,replace:e,state:n,relative:a}){Yr($g(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=v.useContext(Ho);oo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(Go),{pathname:o}=Br(),l=Lt(),c=$D(t,FD(s),o,a==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:a})},[l,u,a,e,n]),null}function yt(t){Yr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tK({basename:t="/",children:e=null,location:n,navigationType:a="POP",navigator:i,static:s=!1}){Yr(!$g(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Lg(n));let{pathname:c="/",search:u="",hash:f="",state:p=null,key:g="default"}=n,x=v.useMemo(()=>{let b=Ic(c,o);return b==null?null:{location:{pathname:b,search:u,hash:f,state:p,key:g},navigationType:a}},[o,c,u,f,p,g,a]);return oo(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(Ho.Provider,{value:l},v.createElement(kb.Provider,{children:e,value:x}))}function km({children:t,location:e}){return qY(mE(t),e)}function mE(t,e=[]){let n=[];return v.Children.forEach(t,(a,i)=>{if(!v.isValidElement(a))return;let s=[...e,i];if(a.type===v.Fragment){n.push.apply(n,mE(a.props.children,s));return}Yr(a.type===yt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yr(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||s.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=mE(a.props.children,s)),n.push(o)}),n}var Jj="get",Zj="application/x-www-form-urlencoded";function BN(t){return t!=null&&typeof t.tagName=="string"}function nK(t){return BN(t)&&t.tagName.toLowerCase()==="button"}function rK(t){return BN(t)&&t.tagName.toLowerCase()==="form"}function aK(t){return BN(t)&&t.tagName.toLowerCase()==="input"}function iK(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sK(t,e){return t.button===0&&(!e||e==="_self")&&!iK(t)}function gE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let a=t[n];return e.concat(Array.isArray(a)?a.map(i=>[n,i]):[[n,a]])},[]))}function oK(t,e){let n=gE(t);return e&&e.forEach((a,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var mj=null;function lK(){if(mj===null)try{new FormData(document.createElement("form"),0),mj=!1}catch{mj=!0}return mj}var cK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rC(t){return t!=null&&!cK.has(t)?(oo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zj}"`),null):t}function uK(t,e){let n,a,i,s,o;if(rK(t)){let l=t.getAttribute("action");a=l?Ic(l,e):null,n=t.getAttribute("method")||Jj,i=rC(t.getAttribute("enctype"))||Zj,s=new FormData(t)}else if(nK(t)||aK(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(a=c?Ic(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Jj,i=rC(t.getAttribute("formenctype"))||rC(l.getAttribute("enctype"))||Zj,s=new FormData(l,t),!lK()){let{name:u,type:f,value:p}=t;if(f==="image"){let g=u?`${u}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else u&&s.append(u,p)}}else{if(BN(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Jj,a=null,i=Zj,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:a,method:n.toLowerCase(),encType:i,formData:s,body:o}}function UD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function dK(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hK(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function fK(t,e,n){let a=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await dK(s,n);return o.links?o.links():[]}return[]}));return yK(a.flat(1).filter(hK).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bI(t,e,n,a,i,s){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var f;return n[u].pathname!==c.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var p;let f=a.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function pK(t,e,{includeHydrateFallback:n}={}){return mK(t.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function mK(t){return[...new Set(t)]}function gK(t){let e={},n=Object.keys(t).sort();for(let a of n)e[a]=t[a];return e}function yK(t,e){let n=new Set;return new Set(e),t.reduce((a,i)=>{let s=JSON.stringify(gK(i));return n.has(s)||(n.add(s),a.push({key:s,link:i})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xK=new Set([100,101,204,205]);function vK(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ic(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function DB(){let t=v.useContext(Fg);return UD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function bK(){let t=v.useContext(zN);return UD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var VD=v.createContext(void 0);VD.displayName="FrameworkContext";function OB(){let t=v.useContext(VD);return UD(t,"You must render this element inside a <HydratedRouter> element"),t}function jK(t,e){let n=v.useContext(VD),[a,i]=v.useState(!1),[s,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:p}=e,g=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let j=_=>{_.forEach(T=>{o(T.isIntersecting)})},w=new IntersectionObserver(j,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),v.useEffect(()=>{if(a){let j=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(j)}}},[a]);let x=()=>{i(!0)},b=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,g,{}]:[s,g,{onFocus:Wx(l,x),onBlur:Wx(c,b),onMouseEnter:Wx(u,x),onMouseLeave:Wx(f,b),onTouchStart:Wx(p,x)}]:[!1,g,{}]}function Wx(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function wK({page:t,...e}){let{router:n}=DB(),a=v.useMemo(()=>NB(n.routes,t,n.basename),[n.routes,t,n.basename]);return a?v.createElement(SK,{page:t,matches:a,...e}):null}function NK(t){let{manifest:e,routeModules:n}=OB(),[a,i]=v.useState([]);return v.useEffect(()=>{let s=!1;return fK(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),a}function SK({page:t,matches:e,...n}){let a=Br(),{manifest:i,routeModules:s}=OB(),{basename:o}=DB(),{loaderData:l,matches:c}=bK(),u=v.useMemo(()=>bI(t,e,c,i,a,"data"),[t,e,c,i,a]),f=v.useMemo(()=>bI(t,e,c,i,a,"assets"),[t,e,c,i,a]),p=v.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let b=new Set,j=!1;if(e.forEach(_=>{var C;let T=i.routes[_.route.id];!T||!T.hasLoader||(!u.some(A=>A.route.id===_.route.id)&&_.route.id in l&&((C=s[_.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?j=!0:b.add(_.route.id))}),b.size===0)return[];let w=vK(t,o);return j&&b.size>0&&w.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[o,l,a,i,u,e,t,s]),g=v.useMemo(()=>pK(f,i),[f,i]),x=NK(f);return v.createElement(v.Fragment,null,p.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),g.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:j})=>v.createElement("link",{key:b,...j})))}function _K(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var MB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MB&&(window.__reactRouterVersion="7.6.0")}catch{}function CK({basename:t,children:e,window:n}){let a=v.useRef();a.current==null&&(a.current=fY({window:n,v5Compat:!0}));let i=a.current,[s,o]=v.useState({action:i.action,location:i.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>i.listen(l),[i,l]),v.createElement(tK,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var IB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vr=v.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:i,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:p,...g},x){let{basename:b}=v.useContext(Ho),j=typeof u=="string"&&IB.test(u),w,_=!1;if(typeof u=="string"&&j&&(w=u,MB))try{let q=new URL(window.location.href),U=u.startsWith("//")?new URL(q.protocol+u):new URL(u),F=Ic(U.pathname,b);U.origin===q.origin&&F!=null?u=F+U.search+U.hash:_=!0}catch{oo(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=zY(u,{relative:i}),[C,A,k]=jK(a,g),P=EK(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:i,viewTransition:p});function I(q){e&&e(q),q.defaultPrevented||P(q)}let R=v.createElement("a",{...g,...k,href:w||T,onClick:_||s?e:I,ref:_K(x,A),target:c,"data-discover":!j&&n==="render"?"true":void 0});return C&&!j?v.createElement(v.Fragment,null,R,v.createElement(wK,{page:T})):R});vr.displayName="Link";var TK=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:i=!1,style:s,to:o,viewTransition:l,children:c,...u},f){let p=Ab(o,{relative:u.relative}),g=Br(),x=v.useContext(zN),{navigator:b,basename:j}=v.useContext(Ho),w=x!=null&&IK(p)&&l===!0,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,T=g.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&j&&(C=Ic(C,j)||C);const A=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let k=T===_||!i&&T.startsWith(_)&&T.charAt(A)==="/",P=C!=null&&(C===_||!i&&C.startsWith(_)&&C.charAt(_.length)==="/"),I={isActive:k,isPending:P,isTransitioning:w},R=k?e:void 0,q;typeof a=="function"?q=a(I):q=[a,k?"active":null,P?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let U=typeof s=="function"?s(I):s;return v.createElement(vr,{...u,"aria-current":R,className:q,ref:f,style:U,to:o,viewTransition:l},typeof c=="function"?c(I):c)});TK.displayName="NavLink";var kK=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:i,state:s,method:o=Jj,action:l,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:p,...g},x)=>{let b=OK(),j=MK(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&IB.test(l),T=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let A=C.nativeEvent.submitter,k=(A==null?void 0:A.getAttribute("formmethod"))||o;b(A||C.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:s,relative:u,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:w,action:j,onSubmit:a?c:T,...g,"data-discover":!_&&t==="render"?"true":void 0})});kK.displayName="Form";function AK(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RB(t){let e=v.useContext(Fg);return Yr(e,AK(t)),e}function EK(t,{target:e,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=Lt(),c=Br(),u=Ab(t,{relative:s});return v.useCallback(f=>{if(sK(f,e)){f.preventDefault();let p=n!==void 0?n:Dv(c)===Dv(u);l(t,{replace:p,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,u,n,a,e,t,i,s,o])}function LB(t){oo(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(gE(t)),n=v.useRef(!1),a=Br(),i=v.useMemo(()=>oK(a.search,n.current?null:e.current),[a.search]),s=Lt(),o=v.useCallback((l,c)=>{const u=gE(typeof l=="function"?l(i):l);n.current=!0,s("?"+u,c)},[s,i]);return[i,o]}var PK=0,DK=()=>`__${String(++PK)}__`;function OK(){let{router:t}=RB("useSubmit"),{basename:e}=v.useContext(Ho),n=XY();return v.useCallback(async(a,i={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=uK(a,e);if(i.navigate===!1){let f=i.fetcherKey||DK();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function MK(t,{relative:e}={}){let{basename:n}=v.useContext(Ho),a=v.useContext(Go);Yr(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),s={...Ab(t||".",{relative:e})},o=Br();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ac([n,s.pathname])),Dv(s)}function IK(t,e={}){let n=v.useContext(TB);Yr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=RB("useViewTransitionState"),i=Ab(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ic(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=Ic(n.nextLocation.pathname,a)||n.nextLocation.pathname;return fw(i.pathname,o)!=null||fw(i.pathname,s)!=null}[...xK];var HD=uB();class RK extends v.Component{constructor(){super(...arguments);wr(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){console.error("Uncaught error:",n,a)}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const FB=v.createContext(void 0),LK=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState({startDate:null,endDate:null}),[s,o]=v.useState(null),[l,c]=v.useState(null),[u,f]=v.useState(null),p=v.useCallback(()=>n(!0),[]),g=v.useCallback(()=>n(!1),[]),x=v.useCallback(()=>n(A=>!A),[]),b=v.useCallback(A=>{f(()=>A)},[]),j=v.useCallback(A=>{u?u(A):console.warn("Analysis navigator not registered")},[u]),[w,_]=v.useState(null),T=v.useCallback(A=>{_(()=>A)},[]),C=v.useCallback(async()=>w?await w():(console.warn("Analysis refresher not registered"),null),[w]);return r.jsx(FB.Provider,{value:{isOpen:e,openAssistant:p,closeAssistant:g,toggleAssistant:x,analysisDateRange:a,setAnalysisDateRange:i,analysisData:s,setAnalysisData:o,analysisNavigate:j,registerAnalysisNavigator:b,refreshAnalysis:C,registerAnalysisRefresher:T,pageContext:l,setPageContext:c},children:t})},qN=()=>{const t=v.useContext(FB);if(t===void 0)throw new Error("useClinicAssistantContext must be used within a ClinicAssistantProvider");return t},$B=v.createContext(void 0),FK=({children:t})=>{const[e,n]=v.useState([]),[a,i]=v.useState(null),[s,o]=v.useState(""),[l,c]=v.useState(0),[u,f]=v.useState([]),p=v.useCallback(j=>{n(w=>[...w,j])},[]),g=v.useCallback((j,w)=>{n(_=>_.map(T=>T.id===j?{...T,...w}:T))},[]),x=v.useCallback(j=>{n(w=>w.filter(_=>_.id!==j))},[]),b=v.useCallback(()=>{n([]),i(null),o(""),c(0),f([])},[]);return r.jsx($B.Provider,{value:{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:u,setDistributors:f,addPurchaseRow:p,updatePurchaseRow:g,removePurchaseRow:x,resetPurchase:b},children:t})},zB=()=>{const t=v.useContext($B);if(!t)throw new Error("usePurchaseContext must be used within a PurchaseProvider");return t},BB=v.createContext(void 0),$K=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(""),s=v.useCallback(()=>n(!0),[]),o=v.useCallback(()=>n(!1),[]),l=v.useCallback(()=>n(c=>!c),[]);return v.useEffect(()=>{const c=u=>{(u.ctrlKey||u.metaKey)&&u.key==="k"&&(u.preventDefault(),l()),u.key==="Escape"&&e&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,l,o]),r.jsx(BB.Provider,{value:{isOpen:e,openCommandBar:s,closeCommandBar:o,toggleCommandBar:l,preFilledQuery:a,setPreFilledQuery:i},children:t})},Rc=()=>{const t=v.useContext(BB);if(t===void 0)throw new Error("useCommandBar must be used within a CommandBarProvider");return t};function Lc(t){return Array.isArray?Array.isArray(t):VB(t)==="[object Array]"}function zK(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function BK(t){return t==null?"":zK(t)}function Pl(t){return typeof t=="string"}function qB(t){return typeof t=="number"}function qK(t){return t===!0||t===!1||UK(t)&&VB(t)=="[object Boolean]"}function UB(t){return typeof t=="object"}function UK(t){return UB(t)&&t!==null}function Es(t){return t!=null}function aC(t){return!t.trim().length}function VB(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const VK="Incorrect 'index' type",HK=t=>`Invalid value for key ${t}`,GK=t=>`Pattern length exceeds max of ${t}.`,WK=t=>`Missing ${t} property in key`,YK=t=>`Property 'weight' in key '${t}' must be a positive integer`,jI=Object.prototype.hasOwnProperty;class KK{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(a=>{let i=HB(a);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(a=>{a.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function HB(t){let e=null,n=null,a=null,i=1,s=null;if(Pl(t)||Lc(t))a=t,e=wI(t),n=yE(t);else{if(!jI.call(t,"name"))throw new Error(WK("name"));const o=t.name;if(a=o,jI.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(YK(o));e=wI(o),n=yE(o),s=t.getFn}return{path:e,id:n,weight:i,src:a,getFn:s}}function wI(t){return Lc(t)?t:t.split(".")}function yE(t){return Lc(t)?t.join("."):t}function QK(t,e){let n=[],a=!1;const i=(s,o,l)=>{if(Es(s))if(!o[l])n.push(s);else{let c=o[l];const u=s[c];if(!Es(u))return;if(l===o.length-1&&(Pl(u)||qB(u)||qK(u)))n.push(BK(u));else if(Lc(u)){a=!0;for(let f=0,p=u.length;f<p;f+=1)i(u[f],o,l+1)}else o.length&&i(u,o,l+1)}};return i(t,Pl(e)?e.split("."):e,0),a?n:n[0]}const XK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},JK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},ZK={location:0,threshold:.6,distance:100},eQ={useExtendedSearch:!1,getFn:QK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ln={...JK,...XK,...ZK,...eQ};const tQ=/[^ ]+/g;function nQ(t=1,e=3){const n=new Map,a=Math.pow(10,e);return{get(i){const s=i.match(tQ).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),l=parseFloat(Math.round(o*a)/a);return n.set(s,l),l},clear(){n.clear()}}}class GD{constructor({getFn:e=ln.getFn,fieldNormWeight:n=ln.fieldNormWeight}={}){this.norm=nQ(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,a)=>{this._keysMap[n.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Pl(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Pl(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,a=this.size();n<a;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Es(e)||aC(e))return;let a={v:e,i:n,n:this.norm.get(e)};this.records.push(a)}_addObject(e,n){let a={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(Es(o)){if(Lc(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:f}=c.pop();if(Es(f))if(Pl(f)&&!aC(f)){let p={v:f,i:u,n:this.norm.get(f)};l.push(p)}else Lc(f)&&f.forEach((p,g)=>{c.push({nestedArrIndex:g,value:p})})}a.$[s]=l}else if(Pl(o)&&!aC(o)){let l={v:o,n:this.norm.get(o)};a.$[s]=l}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function GB(t,e,{getFn:n=ln.getFn,fieldNormWeight:a=ln.fieldNormWeight}={}){const i=new GD({getFn:n,fieldNormWeight:a});return i.setKeys(t.map(HB)),i.setSources(e),i.create(),i}function rQ(t,{getFn:e=ln.getFn,fieldNormWeight:n=ln.fieldNormWeight}={}){const{keys:a,records:i}=t,s=new GD({getFn:e,fieldNormWeight:n});return s.setKeys(a),s.setIndexRecords(i),s}function gj(t,{errors:e=0,currentLocation:n=0,expectedLocation:a=0,distance:i=ln.distance,ignoreLocation:s=ln.ignoreLocation}={}){const o=e/t.length;if(s)return o;const l=Math.abs(a-n);return i?o+l/i:l?1:o}function aQ(t=[],e=ln.minMatchCharLength){let n=[],a=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let l=t[s];l&&a===-1?a=s:!l&&a!==-1&&(i=s-1,i-a+1>=e&&n.push([a,i]),a=-1)}return t[s-1]&&s-a>=e&&n.push([a,s-1]),n}const Qh=32;function iQ(t,e,n,{location:a=ln.location,distance:i=ln.distance,threshold:s=ln.threshold,findAllMatches:o=ln.findAllMatches,minMatchCharLength:l=ln.minMatchCharLength,includeMatches:c=ln.includeMatches,ignoreLocation:u=ln.ignoreLocation}={}){if(e.length>Qh)throw new Error(GK(Qh));const f=e.length,p=t.length,g=Math.max(0,Math.min(a,p));let x=s,b=g;const j=l>1||c,w=j?Array(p):[];let _;for(;(_=t.indexOf(e,b))>-1;){let I=gj(e,{currentLocation:_,expectedLocation:g,distance:i,ignoreLocation:u});if(x=Math.min(I,x),b=_+f,j){let R=0;for(;R<f;)w[_+R]=1,R+=1}}b=-1;let T=[],C=1,A=f+p;const k=1<<f-1;for(let I=0;I<f;I+=1){let R=0,q=A;for(;R<q;)gj(e,{errors:I,currentLocation:g+q,expectedLocation:g,distance:i,ignoreLocation:u})<=x?R=q:A=q,q=Math.floor((A-R)/2+R);A=q;let U=Math.max(1,g-q+1),F=o?p:Math.min(g+q,p)+f,B=Array(F+2);B[F+1]=(1<<I)-1;for(let W=F;W>=U;W-=1){let G=W-1,z=n[t.charAt(G)];if(j&&(w[G]=+!!z),B[W]=(B[W+1]<<1|1)&z,I&&(B[W]|=(T[W+1]|T[W])<<1|1|T[W+1]),B[W]&k&&(C=gj(e,{errors:I,currentLocation:G,expectedLocation:g,distance:i,ignoreLocation:u}),C<=x)){if(x=C,b=G,b<=g)break;U=Math.max(1,2*g-b)}}if(gj(e,{errors:I+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:u})>x)break;T=B}const P={isMatch:b>=0,score:Math.max(.001,C)};if(j){const I=aQ(w,l);I.length?c&&(P.indices=I):P.isMatch=!1}return P}function sQ(t){let e={};for(let n=0,a=t.length;n<a;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<a-n-1}return e}const pw=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class WB{constructor(e,{location:n=ln.location,threshold:a=ln.threshold,distance:i=ln.distance,includeMatches:s=ln.includeMatches,findAllMatches:o=ln.findAllMatches,minMatchCharLength:l=ln.minMatchCharLength,isCaseSensitive:c=ln.isCaseSensitive,ignoreDiacritics:u=ln.ignoreDiacritics,ignoreLocation:f=ln.ignoreLocation}={}){if(this.options={location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:f},e=c?e:e.toLowerCase(),e=u?pw(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(x,b)=>{this.chunks.push({pattern:x,alphabet:sQ(x),startIndex:b})},g=this.pattern.length;if(g>Qh){let x=0;const b=g%Qh,j=g-b;for(;x<j;)p(this.pattern.substr(x,Qh),x),x+=Qh;if(b){const w=g-Qh;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=a?pw(e):e,this.pattern===e){let j={isMatch:!0,score:0};return i&&(j.indices=[[0,e.length-1]]),j}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:f}=this.options;let p=[],g=0,x=!1;this.chunks.forEach(({pattern:j,alphabet:w,startIndex:_})=>{const{isMatch:T,score:C,indices:A}=iQ(e,j,w,{location:s+_,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:i,ignoreLocation:f});T&&(x=!0),g+=C,T&&A&&(p=[...p,...A])});let b={isMatch:x,score:x?g/this.chunks.length:1};return x&&i&&(b.indices=p),b}}class gd{constructor(e){this.pattern=e}static isMultiMatch(e){return NI(e,this.multiRegex)}static isSingleMatch(e){return NI(e,this.singleRegex)}search(){}}function NI(t,e){const n=t.match(e);return n?n[1]:null}class oQ extends gd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class lQ extends gd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const a=e.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class cQ extends gd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class uQ extends gd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class dQ extends gd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class hQ extends gd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class YB extends gd{constructor(e,{location:n=ln.location,threshold:a=ln.threshold,distance:i=ln.distance,includeMatches:s=ln.includeMatches,findAllMatches:o=ln.findAllMatches,minMatchCharLength:l=ln.minMatchCharLength,isCaseSensitive:c=ln.isCaseSensitive,ignoreDiacritics:u=ln.ignoreDiacritics,ignoreLocation:f=ln.ignoreLocation}={}){super(e),this._bitapSearch=new WB(e,{location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class KB extends gd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,a;const i=[],s=this.pattern.length;for(;(a=e.indexOf(this.pattern,n))>-1;)n=a+s,i.push([a,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const xE=[oQ,KB,cQ,uQ,hQ,dQ,lQ,YB],SI=xE.length,fQ=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,pQ="|";function mQ(t,e={}){return t.split(pQ).map(n=>{let a=n.trim().split(fQ).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=a.length;s<o;s+=1){const l=a[s];let c=!1,u=-1;for(;!c&&++u<SI;){const f=xE[u];let p=f.isMultiMatch(l);p&&(i.push(new f(p,e)),c=!0)}if(!c)for(u=-1;++u<SI;){const f=xE[u];let p=f.isSingleMatch(l);if(p){i.push(new f(p,e));break}}}return i})}const gQ=new Set([YB.type,KB.type]);class yQ{constructor(e,{isCaseSensitive:n=ln.isCaseSensitive,ignoreDiacritics:a=ln.ignoreDiacritics,includeMatches:i=ln.includeMatches,minMatchCharLength:s=ln.minMatchCharLength,ignoreLocation:o=ln.ignoreLocation,findAllMatches:l=ln.findAllMatches,location:c=ln.location,threshold:u=ln.threshold,distance:f=ln.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:u,distance:f},e=n?e:e.toLowerCase(),e=a?pw(e):e,this.pattern=e,this.query=mQ(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:i,ignoreDiacritics:s}=this.options;e=i?e:e.toLowerCase(),e=s?pw(e):e;let o=0,l=[],c=0;for(let u=0,f=n.length;u<f;u+=1){const p=n[u];l.length=0,o=0;for(let g=0,x=p.length;g<x;g+=1){const b=p[g],{isMatch:j,indices:w,score:_}=b.search(e);if(j){if(o+=1,c+=_,a){const T=b.constructor.type;gQ.has(T)?l=[...l,...w]:l.push(w)}}else{c=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:c/o};return a&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const vE=[];function xQ(...t){vE.push(...t)}function bE(t,e){for(let n=0,a=vE.length;n<a;n+=1){let i=vE[n];if(i.condition(t,e))return new i(t,e)}return new WB(t,e)}const mw={AND:"$and",OR:"$or"},jE={PATH:"$path",PATTERN:"$val"},wE=t=>!!(t[mw.AND]||t[mw.OR]),vQ=t=>!!t[jE.PATH],bQ=t=>!Lc(t)&&UB(t)&&!wE(t),_I=t=>({[mw.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function QB(t,e,{auto:n=!0}={}){const a=i=>{let s=Object.keys(i);const o=vQ(i);if(!o&&s.length>1&&!wE(i))return a(_I(i));if(bQ(i)){const c=o?i[jE.PATH]:s[0],u=o?i[jE.PATTERN]:i[c];if(!Pl(u))throw new Error(HK(c));const f={keyId:yE(c),pattern:u};return n&&(f.searcher=bE(u,e)),f}let l={children:[],operator:s[0]};return s.forEach(c=>{const u=i[c];Lc(u)&&u.forEach(f=>{l.children.push(a(f))})}),l};return wE(t)||(t=_I(t)),a(t)}function jQ(t,{ignoreFieldNorm:e=ln.ignoreFieldNorm}){t.forEach(n=>{let a=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;a*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:s))}),n.score=a})}function wQ(t,e){const n=t.matches;e.matches=[],Es(n)&&n.forEach(a=>{if(!Es(a.indices)||!a.indices.length)return;const{indices:i,value:s}=a;let o={indices:i,value:s};a.key&&(o.key=a.key.src),a.idx>-1&&(o.refIndex=a.idx),e.matches.push(o)})}function NQ(t,e){e.score=t.score}function SQ(t,e,{includeMatches:n=ln.includeMatches,includeScore:a=ln.includeScore}={}){const i=[];return n&&i.push(wQ),a&&i.push(NQ),t.map(s=>{const{idx:o}=s,l={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(s,l)}),l})}class uo{constructor(e,n={},a){this.options={...ln,...n},this.options.useExtendedSearch,this._keyStore=new KK(this.options.keys),this.setCollection(e,a)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof GD))throw new Error(VK);this._myIndex=n||GB(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Es(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let a=0,i=this._docs.length;a<i;a+=1){const s=this._docs[a];e(s,a)&&(this.removeAt(a),a-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:a,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=Pl(e)?Pl(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return jQ(c,{ignoreFieldNorm:l}),s&&c.sort(o),qB(n)&&n>-1&&(c=c.slice(0,n)),SQ(c,this._docs,{includeMatches:a,includeScore:i})}_searchStringList(e){const n=bE(e,this.options),{records:a}=this._myIndex,i=[];return a.forEach(({v:s,i:o,n:l})=>{if(!Es(s))return;const{isMatch:c,score:u,indices:f}=n.searchIn(s);c&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:l,indices:f}]})}),i}_searchLogical(e){const n=QB(e,this.options),a=(l,c,u)=>{if(!l.children){const{keyId:p,searcher:g}=l,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:g});return x&&x.length?[{idx:u,item:c,matches:x}]:[]}const f=[];for(let p=0,g=l.children.length;p<g;p+=1){const x=l.children[p],b=a(x,c,u);if(b.length)f.push(...b);else if(l.operator===mw.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:c})=>{if(Es(l)){let u=a(n,l,c);u.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),u.forEach(({matches:f})=>{s[c].matches.push(...f)}))}}),o}_searchObjectList(e){const n=bE(e,this.options),{keys:a,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!Es(o))return;let c=[];a.forEach((u,f)=>{c.push(...this._findMatches({key:u,value:o[f],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:e,value:n,searcher:a}){if(!Es(n))return[];let i=[];if(Lc(n))n.forEach(({v:s,i:o,n:l})=>{if(!Es(s))return;const{isMatch:c,score:u,indices:f}=a.searchIn(s);c&&i.push({score:u,key:e,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:u}=a.searchIn(s);l&&i.push({score:c,key:e,value:s,norm:o,indices:u})}return i}}uo.version="7.1.0";uo.createIndex=GB;uo.parseIndex=rQ;uo.config=ln;uo.parseQuery=QB;xQ(yQ);var iC,CI;function _Q(){if(CI)return iC;CI=1;var t="Expected a function",e=NaN,n="[object Symbol]",a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof ao=="object"&&ao&&ao.Object===Object&&ao,u=typeof self=="object"&&self&&self.Object===Object&&self,f=c||u||Function("return this")(),p=Object.prototype,g=p.toString,x=Math.max,b=Math.min,j=function(){return f.Date.now()};function w(k,P,I){var R,q,U,F,B,V,W=0,G=!1,z=!1,Y=!0;if(typeof k!="function")throw new TypeError(t);P=A(P)||0,_(I)&&(G=!!I.leading,z="maxWait"in I,U=z?x(A(I.maxWait)||0,P):U,Y="trailing"in I?!!I.trailing:Y);function Q(Le){var ce=R,Se=q;return R=q=void 0,W=Le,F=k.apply(Se,ce),F}function K(Le){return W=Le,B=setTimeout(xe,P),G?Q(Le):F}function $(Le){var ce=Le-V,Se=Le-W,Ve=P-ce;return z?b(Ve,U-Se):Ve}function ie(Le){var ce=Le-V,Se=Le-W;return V===void 0||ce>=P||ce<0||z&&Se>=U}function xe(){var Le=j();if(ie(Le))return X(Le);B=setTimeout(xe,$(Le))}function X(Le){return B=void 0,Y&&R?Q(Le):(R=q=void 0,F)}function Ie(){B!==void 0&&clearTimeout(B),W=0,R=V=q=B=void 0}function $e(){return B===void 0?F:X(j())}function Be(){var Le=j(),ce=ie(Le);if(R=arguments,q=this,V=Le,ce){if(B===void 0)return K(V);if(z)return B=setTimeout(xe,P),Q(V)}return B===void 0&&(B=setTimeout(xe,P)),F}return Be.cancel=Ie,Be.flush=$e,Be}function _(k){var P=typeof k;return!!k&&(P=="object"||P=="function")}function T(k){return!!k&&typeof k=="object"}function C(k){return typeof k=="symbol"||T(k)&&g.call(k)==n}function A(k){if(typeof k=="number")return k;if(C(k))return e;if(_(k)){var P=typeof k.valueOf=="function"?k.valueOf():k;k=_(P)?P+"":P}if(typeof k!="string")return k===0?k:+k;k=k.replace(a,"");var I=s.test(k);return I||o.test(k)?l(k.slice(2),I?2:8):i.test(k)?e:+k}return iC=w,iC}var CQ=_Q();const $l=Hn(CQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),TI=t=>{const e=kQ(t);return e.charAt(0).toUpperCase()+e.slice(1)},XB=(...t)=>t.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:s,iconNode:o,...l},c)=>v.createElement("svg",{ref:c,...AQ,width:e,height:e,stroke:t,strokeWidth:a?Number(n)*24/Number(e):n,className:XB("lucide",i),...l},[...o.map(([u,f])=>v.createElement(u,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=(t,e)=>{const n=v.forwardRef(({className:a,...i},s)=>v.createElement(EQ,{ref:s,iconNode:e,className:XB(`lucide-${TQ(TI(t))}`,`lucide-${t}`,a),...i}));return n.displayName=TI(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],_c=ct("activity",PQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],JB=ct("align-justify",DQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],kI=ct("arrow-down",OQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],sn=ct("arrow-left",MQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],RQ=ct("arrow-right",IQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],AI=ct("arrow-up",LQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],$Q=ct("beaker",FQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],BQ=ct("bed-double",zQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],UQ=ct("bed",qQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],HQ=ct("bell",VQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],EI=ct("book-open",GQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],jf=ct("bot",WQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],KQ=ct("brain-circuit",YQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],WD=ct("brain",QQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],JQ=ct("briefcase-medical",XQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],eX=ct("building",ZQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],PI=ct("calendar-check-2",tX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],YD=ct("calendar-days",nX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ia=ct("calendar",rX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],NE=ct("camera",aX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],SE=ct("chart-pie",iX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ms=ct("check",sX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ZB=ct("chevron-down",oX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Eb=ct("chevron-left",lX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yd=ct("chevron-right",cX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dX=ct("chevron-up",uX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Fr=ct("circle-alert",hX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Wo=ct("circle-check-big",fX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pv=ct("circle-check",pX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yj=ct("circle-help",mX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],DI=ct("circle-minus",gX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ds=ct("circle-plus",yX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],vX=ct("circle-user",xX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ng=ct("clipboard-list",bX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],ew=ct("clipboard",jX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],zg=ct("clock",wX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],SX=ct("command",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],OI=ct("copy",_X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],gw=ct("credit-card",CX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ud=ct("dollar-sign",TX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],AX=ct("download",kX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fm=ct("eye",EX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],DX=ct("file-check",PX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Xr=ct("file-text",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Zh=ct("file",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],eq=ct("film",IX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],us=ct("flask-conical",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],FX=ct("funnel",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],_E=ct("globe",$X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],wf=ct("grid-3x3",zX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Qa=ct("hash",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],UX=ct("heart-pulse",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],HX=ct("heart",VX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],MI=ct("history",GX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],CE=ct("house",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],yw=ct("image",YX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Dl=ct("info",KX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],tq=ct("key",QX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],rg=ct("layout-dashboard",XX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],nq=ct("layout-grid",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],II=ct("lightbulb",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],rq=ct("link",eJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Pb=ct("list",tJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],lo=ct("loader-circle",nJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],aJ=ct("loader",rJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],sJ=ct("lock",iJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],aq=ct("log-out",oJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],RI=ct("mail",lJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],KD=ct("map-pin",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uJ=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],iq=ct("maximize-2",uJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],sC=ct("message-circle",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],fJ=ct("mic-off",hJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],UN=ct("mic",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],gJ=ct("minimize-2",mJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],xJ=ct("monitor",yJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],sq=ct("music",vJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],LI=ct("package-open",bJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],dd=ct("package",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],NJ=ct("palette",wJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],FI=ct("panels-top-left",SJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],QD=ct("paperclip",_J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],TJ=ct("pause",CJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Os=ct("pen",kJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],EJ=ct("percent",AJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ag=ct("phone",PJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],so=ct("pill",DJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],oq=ct("play",OJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vn=ct("plus",MJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Nf=ct("printer",IJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],TE=ct("refresh-cw",RJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],$I=ct("rocket",LJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],$J=ct("rotate-ccw",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],lq=ct("rotate-cw",zJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bi=ct("save",BJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],En=ct("search",qJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Db=ct("send",UJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],zI=ct("server-crash",VJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hd=ct("settings",HJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],cq=ct("share-2",GJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],YJ=ct("shield-check",WJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ig=ct("shield",KJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],kE=ct("shopping-cart",QJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],JJ=ct("smile",XJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],xw=ct("sparkles",ZJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],qo=ct("split",eZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],qi=ct("square-pen",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],rZ=ct("square",nZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],BI=ct("star",aZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Sf=ct("stethoscope",iZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Ob=ct("table",sZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],lZ=ct("tag",oZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],uZ=ct("target",cZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Wn=ct("trash-2",dZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],fZ=ct("trending-up",hZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mZ=ct("triangle-alert",pZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],XD=ct("truck",gZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ov=ct("upload",yZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],uq=ct("user-check",xZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],VN=ct("user-plus",vZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yn=ct("user",bZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],zi=ct("users",jZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],NZ=ct("video",wZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],vw=ct("wallet",SZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rt=ct("x",_Z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],qI=ct("zap",CZ);function TZ(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const kZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,AZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,EZ={};function UI(t,e){return(EZ.jsx?AZ:kZ).test(t)}const PZ=/[ \t\n\f\r]/g;function DZ(t){return typeof t=="object"?t.type==="text"?VI(t.value):!1:VI(t)}function VI(t){return t.replace(PZ,"")===""}class Mb{constructor(e,n,a){this.normal=n,this.property=e,a&&(this.space=a)}}Mb.prototype.normal={};Mb.prototype.property={};Mb.prototype.space=void 0;function dq(t,e){const n={},a={};for(const i of t)Object.assign(n,i.property),Object.assign(a,i.normal);return new Mb(n,a,e)}function AE(t){return t.toLowerCase()}class fs{constructor(e,n){this.attribute=n,this.property=e}}fs.prototype.attribute="";fs.prototype.booleanish=!1;fs.prototype.boolean=!1;fs.prototype.commaOrSpaceSeparated=!1;fs.prototype.commaSeparated=!1;fs.prototype.defined=!1;fs.prototype.mustUseProperty=!1;fs.prototype.number=!1;fs.prototype.overloadedBoolean=!1;fs.prototype.property="";fs.prototype.spaceSeparated=!1;fs.prototype.space=void 0;let OZ=0;const gn=If(),xa=If(),hq=If(),_t=If(),Mr=If(),$m=If(),Cs=If();function If(){return 2**++OZ}const EE=Object.freeze(Object.defineProperty({__proto__:null,boolean:gn,booleanish:xa,commaOrSpaceSeparated:Cs,commaSeparated:$m,number:_t,overloadedBoolean:hq,spaceSeparated:Mr},Symbol.toStringTag,{value:"Module"})),oC=Object.keys(EE);class JD extends fs{constructor(e,n,a,i){let s=-1;if(super(e,n),HI(this,"space",i),typeof a=="number")for(;++s<oC.length;){const o=oC[s];HI(this,oC[s],(a&EE[o])===EE[o])}}}JD.prototype.defined=!0;function HI(t,e,n){n&&(t[e]=n)}function Bg(t){const e={},n={};for(const[a,i]of Object.entries(t.properties)){const s=new JD(a,t.transform(t.attributes||{},a),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),e[a]=s,n[AE(a)]=a,n[AE(s.attribute)]=a}return new Mb(e,n,t.space)}const fq=Bg({properties:{ariaActiveDescendant:null,ariaAtomic:xa,ariaAutoComplete:null,ariaBusy:xa,ariaChecked:xa,ariaColCount:_t,ariaColIndex:_t,ariaColSpan:_t,ariaControls:Mr,ariaCurrent:null,ariaDescribedBy:Mr,ariaDetails:null,ariaDisabled:xa,ariaDropEffect:Mr,ariaErrorMessage:null,ariaExpanded:xa,ariaFlowTo:Mr,ariaGrabbed:xa,ariaHasPopup:null,ariaHidden:xa,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Mr,ariaLevel:_t,ariaLive:null,ariaModal:xa,ariaMultiLine:xa,ariaMultiSelectable:xa,ariaOrientation:null,ariaOwns:Mr,ariaPlaceholder:null,ariaPosInSet:_t,ariaPressed:xa,ariaReadOnly:xa,ariaRelevant:null,ariaRequired:xa,ariaRoleDescription:Mr,ariaRowCount:_t,ariaRowIndex:_t,ariaRowSpan:_t,ariaSelected:xa,ariaSetSize:_t,ariaSort:null,ariaValueMax:_t,ariaValueMin:_t,ariaValueNow:_t,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function pq(t,e){return e in t?t[e]:e}function mq(t,e){return pq(t,e.toLowerCase())}const MZ=Bg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:$m,acceptCharset:Mr,accessKey:Mr,action:null,allow:null,allowFullScreen:gn,allowPaymentRequest:gn,allowUserMedia:gn,alt:null,as:null,async:gn,autoCapitalize:null,autoComplete:Mr,autoFocus:gn,autoPlay:gn,blocking:Mr,capture:null,charSet:null,checked:gn,cite:null,className:Mr,cols:_t,colSpan:null,content:null,contentEditable:xa,controls:gn,controlsList:Mr,coords:_t|$m,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gn,defer:gn,dir:null,dirName:null,disabled:gn,download:hq,draggable:xa,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gn,formTarget:null,headers:Mr,height:_t,hidden:gn,high:_t,href:null,hrefLang:null,htmlFor:Mr,httpEquiv:Mr,id:null,imageSizes:null,imageSrcSet:null,inert:gn,inputMode:null,integrity:null,is:null,isMap:gn,itemId:null,itemProp:Mr,itemRef:Mr,itemScope:gn,itemType:Mr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gn,low:_t,manifest:null,max:null,maxLength:_t,media:null,method:null,min:null,minLength:_t,multiple:gn,muted:gn,name:null,nonce:null,noModule:gn,noValidate:gn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gn,optimum:_t,pattern:null,ping:Mr,placeholder:null,playsInline:gn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gn,referrerPolicy:null,rel:Mr,required:gn,reversed:gn,rows:_t,rowSpan:_t,sandbox:Mr,scope:null,scoped:gn,seamless:gn,selected:gn,shadowRootClonable:gn,shadowRootDelegatesFocus:gn,shadowRootMode:null,shape:null,size:_t,sizes:null,slot:null,span:_t,spellCheck:xa,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_t,step:null,style:null,tabIndex:_t,target:null,title:null,translate:null,type:null,typeMustMatch:gn,useMap:null,value:xa,width:_t,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Mr,axis:null,background:null,bgColor:null,border:_t,borderColor:null,bottomMargin:_t,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gn,declare:gn,event:null,face:null,frame:null,frameBorder:null,hSpace:_t,leftMargin:_t,link:null,longDesc:null,lowSrc:null,marginHeight:_t,marginWidth:_t,noResize:gn,noHref:gn,noShade:gn,noWrap:gn,object:null,profile:null,prompt:null,rev:null,rightMargin:_t,rules:null,scheme:null,scrolling:xa,standby:null,summary:null,text:null,topMargin:_t,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_t,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gn,disableRemotePlayback:gn,prefix:null,property:null,results:_t,security:null,unselectable:null},space:"html",transform:mq}),IZ=Bg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Cs,accentHeight:_t,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_t,amplitude:_t,arabicForm:null,ascent:_t,attributeName:null,attributeType:null,azimuth:_t,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_t,by:null,calcMode:null,capHeight:_t,className:Mr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_t,diffuseConstant:_t,direction:null,display:null,dur:null,divisor:_t,dominantBaseline:null,download:gn,dx:null,dy:null,edgeMode:null,editable:null,elevation:_t,enableBackground:null,end:null,event:null,exponent:_t,externalResourcesRequired:null,fill:null,fillOpacity:_t,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:$m,g2:$m,glyphName:$m,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_t,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_t,horizOriginX:_t,horizOriginY:_t,id:null,ideographic:_t,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_t,k:_t,k1:_t,k2:_t,k3:_t,k4:_t,kernelMatrix:Cs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_t,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_t,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_t,overlineThickness:_t,paintOrder:null,panose1:null,path:null,pathLength:_t,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Mr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_t,pointsAtY:_t,pointsAtZ:_t,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Cs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Cs,rev:Cs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Cs,requiredFeatures:Cs,requiredFonts:Cs,requiredFormats:Cs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_t,specularExponent:_t,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_t,strikethroughThickness:_t,string:null,stroke:null,strokeDashArray:Cs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_t,strokeOpacity:_t,strokeWidth:null,style:null,surfaceScale:_t,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Cs,tabIndex:_t,tableValues:null,target:null,targetX:_t,targetY:_t,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Cs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_t,underlineThickness:_t,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_t,values:null,vAlphabetic:_t,vMathematical:_t,vectorEffect:null,vHanging:_t,vIdeographic:_t,version:null,vertAdvY:_t,vertOriginX:_t,vertOriginY:_t,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_t,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:pq}),gq=Bg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),yq=Bg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:mq}),xq=Bg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),RZ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},LZ=/[A-Z]/g,GI=/-[a-z]/g,FZ=/^data[-\w.:]+$/i;function $Z(t,e){const n=AE(e);let a=e,i=fs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&FZ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(GI,BZ);a="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!GI.test(s)){let o=s.replace(LZ,zZ);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=JD}return new i(a,e)}function zZ(t){return"-"+t.toLowerCase()}function BZ(t){return t.charAt(1).toUpperCase()}const qZ=dq([fq,MZ,gq,yq,xq],"html"),ZD=dq([fq,IZ,gq,yq,xq],"svg");function UZ(t){return t.join(" ").trim()}var ym={},lC,WI;function VZ(){if(WI)return lC;WI=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,u="/",f="*",p="",g="comment",x="declaration";lC=function(j,w){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];w=w||{};var _=1,T=1;function C(V){var W=V.match(e);W&&(_+=W.length);var G=V.lastIndexOf(c);T=~G?V.length-G:T+V.length}function A(){var V={line:_,column:T};return function(W){return W.position=new k(V),R(),W}}function k(V){this.start=V,this.end={line:_,column:T},this.source=w.source}k.prototype.content=j;function P(V){var W=new Error(w.source+":"+_+":"+T+": "+V);if(W.reason=V,W.filename=w.source,W.line=_,W.column=T,W.source=j,!w.silent)throw W}function I(V){var W=V.exec(j);if(W){var G=W[0];return C(G),j=j.slice(G.length),W}}function R(){I(n)}function q(V){var W;for(V=V||[];W=U();)W!==!1&&V.push(W);return V}function U(){var V=A();if(!(u!=j.charAt(0)||f!=j.charAt(1))){for(var W=2;p!=j.charAt(W)&&(f!=j.charAt(W)||u!=j.charAt(W+1));)++W;if(W+=2,p===j.charAt(W-1))return P("End of comment missing");var G=j.slice(2,W-2);return T+=2,C(G),j=j.slice(W),T+=2,V({type:g,comment:G})}}function F(){var V=A(),W=I(a);if(W){if(U(),!I(i))return P("property missing ':'");var G=I(s),z=V({type:x,property:b(W[0].replace(t,p)),value:G?b(G[0].replace(t,p)):p});return I(o),z}}function B(){var V=[];q(V);for(var W;W=F();)W!==!1&&(V.push(W),q(V));return V}return R(),B()};function b(j){return j?j.replace(l,p):p}return lC}var YI;function HZ(){if(YI)return ym;YI=1;var t=ym&&ym.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ym,"__esModule",{value:!0}),ym.default=n;var e=t(VZ());function n(a,i){var s=null;if(!a||typeof a!="string")return s;var o=(0,e.default)(a),l=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var u=c.property,f=c.value;l?i(u,f,c):f&&(s=s||{},s[u]=f)}}),s}return ym}var Yx={},KI;function GZ(){if(KI)return Yx;KI=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(u){return!u||n.test(u)||t.test(u)},o=function(u,f){return f.toUpperCase()},l=function(u,f){return"".concat(f,"-")},c=function(u,f){return f===void 0&&(f={}),s(u)?u:(u=u.toLowerCase(),f.reactCompat?u=u.replace(i,l):u=u.replace(a,l),u.replace(e,o))};return Yx.camelCase=c,Yx}var Kx,QI;function WZ(){if(QI)return Kx;QI=1;var t=Kx&&Kx.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(HZ()),n=GZ();function a(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return a.default=a,Kx=a,Kx}var YZ=WZ();const KZ=Hn(YZ),vq=bq("end"),eO=bq("start");function bq(t){return e;function e(n){const a=n&&n.position&&n.position[t]||{};if(typeof a.line=="number"&&a.line>0&&typeof a.column=="number"&&a.column>0)return{line:a.line,column:a.column,offset:typeof a.offset=="number"&&a.offset>-1?a.offset:void 0}}}function QZ(t){const e=eO(t),n=vq(t);if(e&&n)return{start:e,end:n}}function jv(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?XI(t.position):"start"in t||"end"in t?XI(t):"line"in t||"column"in t?PE(t):""}function PE(t){return JI(t&&t.line)+":"+JI(t&&t.column)}function XI(t){return PE(t&&t.start)+"-"+PE(t&&t.end)}function JI(t){return t&&typeof t=="number"?t:1}class yi extends Error{constructor(e,n,a){super(),typeof n=="string"&&(a=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof a=="string"){const c=a.indexOf(":");c===-1?s.ruleId=a:(s.source=a.slice(0,c),s.ruleId=a.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=jv(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}yi.prototype.file="";yi.prototype.name="";yi.prototype.reason="";yi.prototype.message="";yi.prototype.stack="";yi.prototype.column=void 0;yi.prototype.line=void 0;yi.prototype.ancestors=void 0;yi.prototype.cause=void 0;yi.prototype.fatal=void 0;yi.prototype.place=void 0;yi.prototype.ruleId=void 0;yi.prototype.source=void 0;const tO={}.hasOwnProperty,XZ=new Map,JZ=/[A-Z]/g,ZZ=new Set(["table","tbody","thead","tfoot","tr"]),eee=new Set(["td","th"]),jq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function tee(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let a;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");a=cee(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");a=lee(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:a,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?ZD:qZ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=wq(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function wq(t,e,n){if(e.type==="element")return nee(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return ree(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return iee(t,e,n);if(e.type==="mdxjsEsm")return aee(t,e);if(e.type==="root")return see(t,e,n);if(e.type==="text")return oee(t,e)}function nee(t,e,n){const a=t.schema;let i=a;e.tagName.toLowerCase()==="svg"&&a.space==="html"&&(i=ZD,t.schema=i),t.ancestors.push(e);const s=Sq(t,e.tagName,!1),o=uee(t,e);let l=rO(t,e);return ZZ.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!DZ(c):!0})),Nq(t,o,s,e),nO(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function ree(t,e){if(e.data&&e.data.estree&&t.evaluater){const a=e.data.estree.body[0];return a.type,t.evaluater.evaluateExpression(a.expression)}Mv(t,e.position)}function aee(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Mv(t,e.position)}function iee(t,e,n){const a=t.schema;let i=a;e.name==="svg"&&a.space==="html"&&(i=ZD,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:Sq(t,e.name,!0),o=dee(t,e),l=rO(t,e);return Nq(t,o,s,e),nO(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function see(t,e,n){const a={};return nO(a,rO(t,e)),t.create(e,t.Fragment,a,n)}function oee(t,e){return e.value}function Nq(t,e,n,a){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=a)}function nO(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function lee(t,e,n){return a;function a(i,s,o,l){const u=Array.isArray(o.children)?n:e;return l?u(s,o,l):u(s,o)}}function cee(t,e){return n;function n(a,i,s,o){const l=Array.isArray(s.children),c=eO(a);return e(i,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function uee(t,e){const n={};let a,i;for(i in e.properties)if(i!=="children"&&tO.call(e.properties,i)){const s=hee(t,i,e.properties[i]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&eee.has(e.tagName)?a=l:n[o]=l}}if(a){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=a}return n}function dee(t,e){const n={};for(const a of e.attributes)if(a.type==="mdxJsxExpressionAttribute")if(a.data&&a.data.estree&&t.evaluater){const s=a.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Mv(t,e.position);else{const i=a.name;let s;if(a.value&&typeof a.value=="object")if(a.value.data&&a.value.data.estree&&t.evaluater){const l=a.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Mv(t,e.position);else s=a.value===null?!0:a.value;n[i]=s}return n}function rO(t,e){const n=[];let a=-1;const i=t.passKeys?new Map:XZ;for(;++a<e.children.length;){const s=e.children[a];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=i.get(c)||0;o=c+"-"+u,i.set(c,u+1)}}const l=wq(t,s,o);l!==void 0&&n.push(l)}return n}function hee(t,e,n){const a=$Z(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=a.commaSeparated?TZ(n):UZ(n)),a.property==="style"){let i=typeof n=="object"?n:fee(t,String(n));return t.stylePropertyNameCase==="css"&&(i=pee(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&a.space?RZ[a.property]||a.property:a.attribute,n]}}function fee(t,e){try{return KZ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const a=n,i=new yi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=jq+"#cannot-parse-style-attribute",i}}function Sq(t,e,n){let a;if(!n)a={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const l=UI(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}a=o}else a=UI(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(a.type==="Literal"){const i=a.value;return tO.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(a);Mv(t)}function Mv(t,e){const n=new yi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=jq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pee(t){const e={};let n;for(n in t)tO.call(t,n)&&(e[mee(n)]=t[n]);return e}function mee(t){let e=t.replace(JZ,gee);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function gee(t){return"-"+t.toLowerCase()}const cC={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},yee={};function aO(t,e){const n=yee,a=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return _q(t,a,i)}function _q(t,e,n){if(xee(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return ZI(t.children,e,n)}return Array.isArray(t)?ZI(t,e,n):""}function ZI(t,e,n){const a=[];let i=-1;for(;++i<t.length;)a[i]=_q(t[i],e,n);return a.join("")}function xee(t){return!!(t&&typeof t=="object")}const eR=document.createElement("i");function iO(t){const e="&"+t+";";eR.innerHTML=e;const n=eR.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Is(t,e,n,a){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,a.length<1e4)o=Array.from(a),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<a.length;)o=a.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function no(t,e){return t.length>0?(Is(t,t.length,0,e),t):e}const tR={}.hasOwnProperty;function Cq(t){const e={};let n=-1;for(;++n<t.length;)vee(e,t[n]);return e}function vee(t,e){let n;for(n in e){const i=(tR.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){tR.call(i,o)||(i[o]=[]);const l=s[o];bee(i[o],Array.isArray(l)?l:l?[l]:[])}}}function bee(t,e){let n=-1;const a=[];for(;++n<e.length;)(e[n].add==="after"?t:a).push(e[n]);Is(t,0,0,a)}function Tq(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function zo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ri=xd(/[A-Za-z]/),mi=xd(/[\dA-Za-z]/),jee=xd(/[#-'*+\--9=?A-Z^-~]/);function bw(t){return t!==null&&(t<32||t===127)}const DE=xd(/\d/),wee=xd(/[\dA-Fa-f]/),Nee=xd(/[!-/:-@[-`{-~]/);function Xt(t){return t!==null&&t<-2}function kr(t){return t!==null&&(t<0||t===32)}function Mn(t){return t===-2||t===-1||t===32}const HN=xd(new RegExp("\\p{P}|\\p{S}","u")),_f=xd(/\s/);function xd(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function qg(t){const e=[];let n=-1,a=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&mi(t.charCodeAt(n+1))&&mi(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(a,n),encodeURIComponent(o)),a=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(a)}function Gn(t,e,n,a){const i=a?a-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Mn(c)?(t.enter(n),l(c)):e(c)}function l(c){return Mn(c)&&s++<i?(t.consume(c),l):(t.exit(n),e(c))}}const See={tokenize:_ee};function _ee(t){const e=t.attempt(this.parser.constructs.contentInitial,a,i);let n;return e;function a(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Gn(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Xt(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const Cee={tokenize:Tee},nR={tokenize:kee};function Tee(t){const e=this,n=[];let a=0,i,s,o;return l;function l(C){if(a<n.length){const A=n[a];return e.containerState=A[1],t.attempt(A[0].continuation,c,u)(C)}return u(C)}function c(C){if(a++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&T();const A=e.events.length;let k=A,P;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){P=e.events[k][1].end;break}_(a);let I=A;for(;I<e.events.length;)e.events[I][1].end={...P},I++;return Is(e.events,k+1,0,e.events.slice(A)),e.events.length=I,u(C)}return l(C)}function u(C){if(a===n.length){if(!i)return g(C);if(i.currentConstruct&&i.currentConstruct.concrete)return b(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(nR,f,p)(C)}function f(C){return i&&T(),_(a),g(C)}function p(C){return e.parser.lazy[e.now().line]=a!==n.length,o=e.now().offset,b(C)}function g(C){return e.containerState={},t.attempt(nR,x,b)(C)}function x(C){return a++,n.push([e.currentConstruct,e.containerState]),g(C)}function b(C){if(C===null){i&&T(),_(0),t.consume(C);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),j(C)}function j(C){if(C===null){w(t.exit("chunkFlow"),!0),_(0),t.consume(C);return}return Xt(C)?(t.consume(C),w(t.exit("chunkFlow")),a=0,e.interrupt=void 0,l):(t.consume(C),j)}function w(C,A){const k=e.sliceStream(C);if(A&&k.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(k),e.parser.lazy[C.start.line]){let P=i.events.length;for(;P--;)if(i.events[P][1].start.offset<o&&(!i.events[P][1].end||i.events[P][1].end.offset>o))return;const I=e.events.length;let R=I,q,U;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(q){U=e.events[R][1].end;break}q=!0}for(_(a),P=I;P<e.events.length;)e.events[P][1].end={...U},P++;Is(e.events,R+1,0,e.events.slice(I)),e.events.length=P}}function _(C){let A=n.length;for(;A-- >C;){const k=n[A];e.containerState=k[1],k[0].exit.call(e,t)}n.length=C}function T(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function kee(t,e,n){return Gn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function sg(t){if(t===null||kr(t)||_f(t))return 1;if(HN(t))return 2}function GN(t,e,n){const a=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!a.includes(s)&&(e=s(e,n),a.push(s))}return e}const OE={name:"attention",resolveAll:Aee,tokenize:Eee};function Aee(t,e){let n=-1,a,i,s,o,l,c,u,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(a=n;a--;)if(t[a][0]==="exit"&&t[a][1].type==="attentionSequence"&&t[a][1]._open&&e.sliceSerialize(t[a][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[a][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[a][1].end.offset-t[a][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[a][1].end.offset-t[a][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[a][1].end},g={...t[n][1].start};rR(p,-c),rR(g,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[a][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},s={type:c>1?"strongText":"emphasisText",start:{...t[a][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[a][1].end={...o.start},t[n][1].start={...l.end},u=[],t[a][1].end.offset-t[a][1].start.offset&&(u=no(u,[["enter",t[a][1],e],["exit",t[a][1],e]])),u=no(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=no(u,GN(e.parser.constructs.insideSpan.null,t.slice(a+1,n),e)),u=no(u,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,u=no(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,Is(t,a-1,n-a+3,u),n=a+u.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Eee(t,e){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,i=sg(a);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const u=t.exit("attentionSequence"),f=sg(c),p=!f||f===2&&i||n.includes(c),g=!i||i===2&&f||n.includes(a);return u._open=!!(s===42?p:p&&(i||!g)),u._close=!!(s===42?g:g&&(f||!p)),e(c)}}function rR(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Pee={name:"autolink",tokenize:Dee};function Dee(t,e,n){let a=0;return i;function i(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(x){return Ri(x)?(t.consume(x),o):x===64?n(x):u(x)}function o(x){return x===43||x===45||x===46||mi(x)?(a=1,l(x)):u(x)}function l(x){return x===58?(t.consume(x),a=0,c):(x===43||x===45||x===46||mi(x))&&a++<32?(t.consume(x),l):(a=0,u(x))}function c(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||bw(x)?n(x):(t.consume(x),c)}function u(x){return x===64?(t.consume(x),f):jee(x)?(t.consume(x),u):n(x)}function f(x){return mi(x)?p(x):n(x)}function p(x){return x===46?(t.consume(x),a=0,f):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):g(x)}function g(x){if((x===45||mi(x))&&a++<63){const b=x===45?g:p;return t.consume(x),b}return n(x)}}const Ib={partial:!0,tokenize:Oee};function Oee(t,e,n){return a;function a(s){return Mn(s)?Gn(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Xt(s)?e(s):n(s)}}const kq={continuation:{tokenize:Iee},exit:Ree,name:"blockQuote",tokenize:Mee};function Mee(t,e,n){const a=this;return i;function i(o){if(o===62){const l=a.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Mn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function Iee(t,e,n){const a=this;return i;function i(o){return Mn(o)?Gn(t,s,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(kq,e,n)(o)}}function Ree(t){t.exit("blockQuote")}const Aq={name:"characterEscape",tokenize:Lee};function Lee(t,e,n){return a;function a(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return Nee(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const Eq={name:"characterReference",tokenize:Fee};function Fee(t,e,n){const a=this;let i=0,s,o;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=mi,f(p))}function u(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=wee,f):(t.enter("characterReferenceValue"),s=7,o=DE,f(p))}function f(p){if(p===59&&i){const g=t.exit("characterReferenceValue");return o===mi&&!iO(a.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(p)&&i++<s?(t.consume(p),f):n(p)}}const aR={partial:!0,tokenize:zee},iR={concrete:!0,name:"codeFenced",tokenize:$ee};function $ee(t,e,n){const a=this,i={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(P){return u(P)}function u(P){const I=a.events[a.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=P,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(P)}function f(P){return P===l?(o++,t.consume(P),f):o<3?n(P):(t.exit("codeFencedFenceSequence"),Mn(P)?Gn(t,p,"whitespace")(P):p(P))}function p(P){return P===null||Xt(P)?(t.exit("codeFencedFence"),a.interrupt?e(P):t.check(aR,j,A)(P)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(P))}function g(P){return P===null||Xt(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(P)):Mn(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Gn(t,x,"whitespace")(P)):P===96&&P===l?n(P):(t.consume(P),g)}function x(P){return P===null||Xt(P)?p(P):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(P))}function b(P){return P===null||Xt(P)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(P)):P===96&&P===l?n(P):(t.consume(P),b)}function j(P){return t.attempt(i,A,w)(P)}function w(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),_}function _(P){return s>0&&Mn(P)?Gn(t,T,"linePrefix",s+1)(P):T(P)}function T(P){return P===null||Xt(P)?t.check(aR,j,A)(P):(t.enter("codeFlowValue"),C(P))}function C(P){return P===null||Xt(P)?(t.exit("codeFlowValue"),T(P)):(t.consume(P),C)}function A(P){return t.exit("codeFenced"),e(P)}function k(P,I,R){let q=0;return U;function U(G){return P.enter("lineEnding"),P.consume(G),P.exit("lineEnding"),F}function F(G){return P.enter("codeFencedFence"),Mn(G)?Gn(P,B,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):B(G)}function B(G){return G===l?(P.enter("codeFencedFenceSequence"),V(G)):R(G)}function V(G){return G===l?(q++,P.consume(G),V):q>=o?(P.exit("codeFencedFenceSequence"),Mn(G)?Gn(P,W,"whitespace")(G):W(G)):R(G)}function W(G){return G===null||Xt(G)?(P.exit("codeFencedFence"),I(G)):R(G)}}}function zee(t,e,n){const a=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}const uC={name:"codeIndented",tokenize:qee},Bee={partial:!0,tokenize:Uee};function qee(t,e,n){const a=this;return i;function i(u){return t.enter("codeIndented"),Gn(t,s,"linePrefix",5)(u)}function s(u){const f=a.events[a.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):Xt(u)?t.attempt(Bee,o,c)(u):(t.enter("codeFlowValue"),l(u))}function l(u){return u===null||Xt(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),l)}function c(u){return t.exit("codeIndented"),e(u)}}function Uee(t,e,n){const a=this;return i;function i(o){return a.parser.lazy[a.now().line]?n(o):Xt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Gn(t,s,"linePrefix",5)(o)}function s(o){const l=a.events[a.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Xt(o)?i(o):n(o)}}const Vee={name:"codeText",previous:Gee,resolve:Hee,tokenize:Wee};function Hee(t){let e=t.length-4,n=3,a,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(a=n;++a<e;)if(t[a][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(a=n-1,e++;++a<=e;)i===void 0?a!==e&&t[a][1].type!=="lineEnding"&&(i=a):(a===e||t[a][1].type==="lineEnding")&&(t[i][1].type="codeTextData",a!==i+2&&(t[i][1].end=t[a-1][1].end,t.splice(i+2,a-i-2),e-=a-i-2,a=i+2),i=void 0);return t}function Gee(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Wee(t,e,n){let a=0,i,s;return o;function o(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),a++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(s=t.enter("codeTextSequence"),i=0,f(p)):Xt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),u(p))}function u(p){return p===null||p===32||p===96||Xt(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),u)}function f(p){return p===96?(t.consume(p),i++,f):i===a?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(s.type="codeTextData",u(p))}}class Yee{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const a=n??Number.POSITIVE_INFINITY;return a<this.left.length?this.left.slice(e,a):e>this.left.length?this.right.slice(this.right.length-a+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-a+this.left.length).reverse())}splice(e,n,a){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return a&&Qx(this.left,a),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Qx(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Qx(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Qx(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Qx(this.left,n.reverse())}}}function Qx(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Pq(t){const e={};let n=-1,a,i,s,o,l,c,u;const f=new Yee(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(a=f.get(n),n&&a[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=a[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(a[0]==="enter")a[1].contentType&&(Object.assign(e,Kee(f,n)),n=e[n],u=!0);else if(a[1]._container){for(s=n,i=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(a[1].end={...f.get(i)[1].start},l=f.slice(i,n),l.unshift(a),f.splice(i,n-i+1,l))}}return Is(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function Kee(t,e){const n=t.get(e)[1],a=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=a.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let f,p,g=-1,x=n,b=0,j=0;const w=[j];for(;x;){for(;t.get(++i)[1]!==x;);s.push(i),x._tokenizer||(f=a.sliceStream(x),x.next||f.push(null),p&&o.defineSkip(x.start),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=x,x=x.next}for(x=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(j=g+1,w.push(j),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(o.events=[],x?(x._tokenizer=void 0,x.previous=void 0):w.pop(),g=w.length;g--;){const _=l.slice(w[g],w[g+1]),T=s.pop();c.push([T,T+_.length-1]),t.splice(T,2,_)}for(c.reverse(),g=-1;++g<c.length;)u[b+c[g][0]]=b+c[g][1],b+=c[g][1]-c[g][0]-1;return u}const Qee={resolve:Jee,tokenize:Zee},Xee={partial:!0,tokenize:ete};function Jee(t){return Pq(t),t}function Zee(t,e){let n;return a;function a(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):Xt(l)?t.check(Xee,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function ete(t,e,n){const a=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Gn(t,s,"linePrefix")}function s(o){if(o===null||Xt(o))return n(o);const l=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(a.parser.constructs.flow,n,e)(o)}}function Dq(t,e,n,a,i,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(_){return _===60?(t.enter(a),t.enter(i),t.enter(s),t.consume(_),t.exit(s),g):_===null||_===32||_===41||bw(_)?n(_):(t.enter(a),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),j(_))}function g(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(a),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),x(_))}function x(_){return _===62?(t.exit("chunkString"),t.exit(l),g(_)):_===null||_===60||Xt(_)?n(_):(t.consume(_),_===92?b:x)}function b(_){return _===60||_===62||_===92?(t.consume(_),x):x(_)}function j(_){return!f&&(_===null||_===41||kr(_))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(a),e(_)):f<u&&_===40?(t.consume(_),f++,j):_===41?(t.consume(_),f--,j):_===null||_===32||_===40||bw(_)?n(_):(t.consume(_),_===92?w:j)}function w(_){return _===40||_===41||_===92?(t.consume(_),j):j(_)}}function Oq(t,e,n,a,i,s){const o=this;let l=0,c;return u;function u(x){return t.enter(a),t.enter(i),t.consume(x),t.exit(i),t.enter(s),f}function f(x){return l>999||x===null||x===91||x===93&&!c||x===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(x):x===93?(t.exit(s),t.enter(i),t.consume(x),t.exit(i),t.exit(a),e):Xt(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||x===91||x===93||Xt(x)||l++>999?(t.exit("chunkString"),f(x)):(t.consume(x),c||(c=!Mn(x)),x===92?g:p)}function g(x){return x===91||x===92||x===93?(t.consume(x),l++,p):p(x)}}function Mq(t,e,n,a,i,s){let o;return l;function l(g){return g===34||g===39||g===40?(t.enter(a),t.enter(i),t.consume(g),t.exit(i),o=g===40?41:g,c):n(g)}function c(g){return g===o?(t.enter(i),t.consume(g),t.exit(i),t.exit(a),e):(t.enter(s),u(g))}function u(g){return g===o?(t.exit(s),c(o)):g===null?n(g):Xt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),Gn(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===o||g===null||Xt(g)?(t.exit("chunkString"),u(g)):(t.consume(g),g===92?p:f)}function p(g){return g===o||g===92?(t.consume(g),f):f(g)}}function wv(t,e){let n;return a;function a(i){return Xt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,a):Mn(i)?Gn(t,a,n?"linePrefix":"lineSuffix")(i):e(i)}}const tte={name:"definition",tokenize:rte},nte={partial:!0,tokenize:ate};function rte(t,e,n){const a=this;let i;return s;function s(x){return t.enter("definition"),o(x)}function o(x){return Oq.call(a,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return i=zo(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),c):n(x)}function c(x){return kr(x)?wv(t,u)(x):u(x)}function u(x){return Dq(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function f(x){return t.attempt(nte,p,p)(x)}function p(x){return Mn(x)?Gn(t,g,"whitespace")(x):g(x)}function g(x){return x===null||Xt(x)?(t.exit("definition"),a.parser.defined.push(i),e(x)):n(x)}}function ate(t,e,n){return a;function a(l){return kr(l)?wv(t,i)(l):n(l)}function i(l){return Mq(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Mn(l)?Gn(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Xt(l)?e(l):n(l)}}const ite={name:"hardBreakEscape",tokenize:ste};function ste(t,e,n){return a;function a(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Xt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const ote={name:"headingAtx",resolve:lte,tokenize:cte};function lte(t,e){let n=t.length-2,a=3,i,s;return t[a][1].type==="whitespace"&&(a+=2),n-2>a&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&t[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(i={type:"atxHeadingText",start:t[a][1].start,end:t[n][1].end},s={type:"chunkText",start:t[a][1].start,end:t[n][1].end,contentType:"text"},Is(t,a,n-a+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function cte(t,e,n){let a=0;return i;function i(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&a++<6?(t.consume(f),o):f===null||kr(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||Xt(f)?(t.exit("atxHeading"),e(f)):Mn(f)?Gn(t,l,"whitespace")(f):(t.enter("atxHeadingText"),u(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),l(f))}function u(f){return f===null||f===35||kr(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),u)}}const ute=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sR=["pre","script","style","textarea"],dte={concrete:!0,name:"htmlFlow",resolveTo:pte,tokenize:mte},hte={partial:!0,tokenize:yte},fte={partial:!0,tokenize:gte};function pte(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function mte(t,e,n){const a=this;let i,s,o,l,c;return u;function u(X){return f(X)}function f(X){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(X),p}function p(X){return X===33?(t.consume(X),g):X===47?(t.consume(X),s=!0,j):X===63?(t.consume(X),i=3,a.interrupt?e:$):Ri(X)?(t.consume(X),o=String.fromCharCode(X),w):n(X)}function g(X){return X===45?(t.consume(X),i=2,x):X===91?(t.consume(X),i=5,l=0,b):Ri(X)?(t.consume(X),i=4,a.interrupt?e:$):n(X)}function x(X){return X===45?(t.consume(X),a.interrupt?e:$):n(X)}function b(X){const Ie="CDATA[";return X===Ie.charCodeAt(l++)?(t.consume(X),l===Ie.length?a.interrupt?e:B:b):n(X)}function j(X){return Ri(X)?(t.consume(X),o=String.fromCharCode(X),w):n(X)}function w(X){if(X===null||X===47||X===62||kr(X)){const Ie=X===47,$e=o.toLowerCase();return!Ie&&!s&&sR.includes($e)?(i=1,a.interrupt?e(X):B(X)):ute.includes(o.toLowerCase())?(i=6,Ie?(t.consume(X),_):a.interrupt?e(X):B(X)):(i=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(X):s?T(X):C(X))}return X===45||mi(X)?(t.consume(X),o+=String.fromCharCode(X),w):n(X)}function _(X){return X===62?(t.consume(X),a.interrupt?e:B):n(X)}function T(X){return Mn(X)?(t.consume(X),T):U(X)}function C(X){return X===47?(t.consume(X),U):X===58||X===95||Ri(X)?(t.consume(X),A):Mn(X)?(t.consume(X),C):U(X)}function A(X){return X===45||X===46||X===58||X===95||mi(X)?(t.consume(X),A):k(X)}function k(X){return X===61?(t.consume(X),P):Mn(X)?(t.consume(X),k):C(X)}function P(X){return X===null||X===60||X===61||X===62||X===96?n(X):X===34||X===39?(t.consume(X),c=X,I):Mn(X)?(t.consume(X),P):R(X)}function I(X){return X===c?(t.consume(X),c=null,q):X===null||Xt(X)?n(X):(t.consume(X),I)}function R(X){return X===null||X===34||X===39||X===47||X===60||X===61||X===62||X===96||kr(X)?k(X):(t.consume(X),R)}function q(X){return X===47||X===62||Mn(X)?C(X):n(X)}function U(X){return X===62?(t.consume(X),F):n(X)}function F(X){return X===null||Xt(X)?B(X):Mn(X)?(t.consume(X),F):n(X)}function B(X){return X===45&&i===2?(t.consume(X),z):X===60&&i===1?(t.consume(X),Y):X===62&&i===4?(t.consume(X),ie):X===63&&i===3?(t.consume(X),$):X===93&&i===5?(t.consume(X),K):Xt(X)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(hte,xe,V)(X)):X===null||Xt(X)?(t.exit("htmlFlowData"),V(X)):(t.consume(X),B)}function V(X){return t.check(fte,W,xe)(X)}function W(X){return t.enter("lineEnding"),t.consume(X),t.exit("lineEnding"),G}function G(X){return X===null||Xt(X)?V(X):(t.enter("htmlFlowData"),B(X))}function z(X){return X===45?(t.consume(X),$):B(X)}function Y(X){return X===47?(t.consume(X),o="",Q):B(X)}function Q(X){if(X===62){const Ie=o.toLowerCase();return sR.includes(Ie)?(t.consume(X),ie):B(X)}return Ri(X)&&o.length<8?(t.consume(X),o+=String.fromCharCode(X),Q):B(X)}function K(X){return X===93?(t.consume(X),$):B(X)}function $(X){return X===62?(t.consume(X),ie):X===45&&i===2?(t.consume(X),$):B(X)}function ie(X){return X===null||Xt(X)?(t.exit("htmlFlowData"),xe(X)):(t.consume(X),ie)}function xe(X){return t.exit("htmlFlow"),e(X)}}function gte(t,e,n){const a=this;return i;function i(o){return Xt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}function yte(t,e,n){return a;function a(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Ib,e,n)}}const xte={name:"htmlText",tokenize:vte};function vte(t,e,n){const a=this;let i,s,o;return l;function l($){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume($),c}function c($){return $===33?(t.consume($),u):$===47?(t.consume($),k):$===63?(t.consume($),C):Ri($)?(t.consume($),R):n($)}function u($){return $===45?(t.consume($),f):$===91?(t.consume($),s=0,b):Ri($)?(t.consume($),T):n($)}function f($){return $===45?(t.consume($),x):n($)}function p($){return $===null?n($):$===45?(t.consume($),g):Xt($)?(o=p,Y($)):(t.consume($),p)}function g($){return $===45?(t.consume($),x):p($)}function x($){return $===62?z($):$===45?g($):p($)}function b($){const ie="CDATA[";return $===ie.charCodeAt(s++)?(t.consume($),s===ie.length?j:b):n($)}function j($){return $===null?n($):$===93?(t.consume($),w):Xt($)?(o=j,Y($)):(t.consume($),j)}function w($){return $===93?(t.consume($),_):j($)}function _($){return $===62?z($):$===93?(t.consume($),_):j($)}function T($){return $===null||$===62?z($):Xt($)?(o=T,Y($)):(t.consume($),T)}function C($){return $===null?n($):$===63?(t.consume($),A):Xt($)?(o=C,Y($)):(t.consume($),C)}function A($){return $===62?z($):C($)}function k($){return Ri($)?(t.consume($),P):n($)}function P($){return $===45||mi($)?(t.consume($),P):I($)}function I($){return Xt($)?(o=I,Y($)):Mn($)?(t.consume($),I):z($)}function R($){return $===45||mi($)?(t.consume($),R):$===47||$===62||kr($)?q($):n($)}function q($){return $===47?(t.consume($),z):$===58||$===95||Ri($)?(t.consume($),U):Xt($)?(o=q,Y($)):Mn($)?(t.consume($),q):z($)}function U($){return $===45||$===46||$===58||$===95||mi($)?(t.consume($),U):F($)}function F($){return $===61?(t.consume($),B):Xt($)?(o=F,Y($)):Mn($)?(t.consume($),F):q($)}function B($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(t.consume($),i=$,V):Xt($)?(o=B,Y($)):Mn($)?(t.consume($),B):(t.consume($),W)}function V($){return $===i?(t.consume($),i=void 0,G):$===null?n($):Xt($)?(o=V,Y($)):(t.consume($),V)}function W($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||kr($)?q($):(t.consume($),W)}function G($){return $===47||$===62||kr($)?q($):n($)}function z($){return $===62?(t.consume($),t.exit("htmlTextData"),t.exit("htmlText"),e):n($)}function Y($){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),Q}function Q($){return Mn($)?Gn(t,K,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):K($)}function K($){return t.enter("htmlTextData"),o($)}}const sO={name:"labelEnd",resolveAll:Nte,resolveTo:Ste,tokenize:_te},bte={tokenize:Cte},jte={tokenize:Tte},wte={tokenize:kte};function Nte(t){let e=-1;const n=[];for(;++e<t.length;){const a=t[e][1];if(n.push(t[e]),a.type==="labelImage"||a.type==="labelLink"||a.type==="labelEnd"){const i=a.type==="labelImage"?4:2;a.type="data",e+=i}}return t.length!==n.length&&Is(t,0,t.length,n),t}function Ste(t,e){let n=t.length,a=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){a=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+a+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",u,e]],l=no(l,t.slice(s+1,s+a+3)),l=no(l,[["enter",f,e]]),l=no(l,GN(e.parser.constructs.insideSpan.null,t.slice(s+a+4,o-3),e)),l=no(l,[["exit",f,e],t[o-2],t[o-1],["exit",u,e]]),l=no(l,t.slice(o+1)),l=no(l,[["exit",c,e]]),Is(t,s,t.length,l),t}function _te(t,e,n){const a=this;let i=a.events.length,s,o;for(;i--;)if((a.events[i][1].type==="labelImage"||a.events[i][1].type==="labelLink")&&!a.events[i][1]._balanced){s=a.events[i][1];break}return l;function l(g){return s?s._inactive?p(g):(o=a.parser.defined.includes(zo(a.sliceSerialize({start:s.end,end:a.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),c):n(g)}function c(g){return g===40?t.attempt(bte,f,o?f:p)(g):g===91?t.attempt(jte,f,o?u:p)(g):o?f(g):p(g)}function u(g){return t.attempt(wte,f,p)(g)}function f(g){return e(g)}function p(g){return s._balanced=!0,n(g)}}function Cte(t,e,n){return a;function a(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),i}function i(p){return kr(p)?wv(t,s)(p):s(p)}function s(p){return p===41?f(p):Dq(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return kr(p)?wv(t,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?Mq(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function u(p){return kr(p)?wv(t,f)(p):f(p)}function f(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function Tte(t,e,n){const a=this;return i;function i(l){return Oq.call(a,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return a.parser.defined.includes(zo(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function kte(t,e,n){return a;function a(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const Ate={name:"labelStartImage",resolveAll:sO.resolveAll,tokenize:Ete};function Ete(t,e,n){const a=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(l):e(l)}}const Pte={name:"labelStartLink",resolveAll:sO.resolveAll,tokenize:Dte};function Dte(t,e,n){const a=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(o):e(o)}}const dC={name:"lineEnding",tokenize:Ote};function Ote(t,e){return n;function n(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Gn(t,e,"linePrefix")}}const tw={name:"thematicBreak",tokenize:Mte};function Mte(t,e,n){let a=0,i;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,l(u)}function l(u){return u===i?(t.enter("thematicBreakSequence"),c(u)):a>=3&&(u===null||Xt(u))?(t.exit("thematicBreak"),e(u)):n(u)}function c(u){return u===i?(t.consume(u),a++,c):(t.exit("thematicBreakSequence"),Mn(u)?Gn(t,l,"whitespace")(u):l(u))}}const is={continuation:{tokenize:Fte},exit:zte,name:"list",tokenize:Lte},Ite={partial:!0,tokenize:Bte},Rte={partial:!0,tokenize:$te};function Lte(t,e,n){const a=this,i=a.events[a.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(x){const b=a.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!a.containerState.marker||x===a.containerState.marker:DE(x)){if(a.containerState.type||(a.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(tw,n,u)(x):u(x);if(!a.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(x)}return n(x)}function c(x){return DE(x)&&++o<10?(t.consume(x),c):(!a.interrupt||o<2)&&(a.containerState.marker?x===a.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),u(x)):n(x)}function u(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||x,t.check(Ib,a.interrupt?n:f,t.attempt(Ite,g,p))}function f(x){return a.containerState.initialBlankLine=!0,s++,g(x)}function p(x){return Mn(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),g):n(x)}function g(x){return a.containerState.size=s+a.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function Fte(t,e,n){const a=this;return a.containerState._closeFlow=void 0,t.check(Ib,i,s);function i(l){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,Gn(t,e,"listItemIndent",a.containerState.size+1)(l)}function s(l){return a.containerState.furtherBlankLines||!Mn(l)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,o(l)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,t.attempt(Rte,e,o)(l))}function o(l){return a.containerState._closeFlow=!0,a.interrupt=void 0,Gn(t,t.attempt(is,e,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function $te(t,e,n){const a=this;return Gn(t,i,"listItemIndent",a.containerState.size+1);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===a.containerState.size?e(s):n(s)}}function zte(t){t.exit(this.containerState.type)}function Bte(t,e,n){const a=this;return Gn(t,i,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=a.events[a.events.length-1];return!Mn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const oR={name:"setextUnderline",resolveTo:qte,tokenize:Ute};function qte(t,e){let n=t.length,a,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){a=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[a][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[a][1],e]),t[a][1].end={...t[s][1].end}):t[a][1]=o,t.push(["exit",o,e]),t}function Ute(t,e,n){const a=this;let i;return s;function s(u){let f=a.events.length,p;for(;f--;)if(a.events[f][1].type!=="lineEnding"&&a.events[f][1].type!=="linePrefix"&&a.events[f][1].type!=="content"){p=a.events[f][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||p)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===i?(t.consume(u),l):(t.exit("setextHeadingLineSequence"),Mn(u)?Gn(t,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Xt(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const Vte={tokenize:Hte};function Hte(t){const e=this,n=t.attempt(Ib,a,t.attempt(this.parser.constructs.flowInitial,i,Gn(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Qee,i)),"linePrefix")));return n;function a(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Gte={resolveAll:Rq()},Wte=Iq("string"),Yte=Iq("text");function Iq(t){return{resolveAll:Rq(t==="text"?Kte:void 0),tokenize:e};function e(n){const a=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(f){return u(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const p=i[f];let g=-1;if(p)for(;++g<p.length;){const x=p[g];if(!x.previous||x.previous.call(a,a.previous))return!0}return!1}}}function Rq(t){return e;function e(n,a){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,a):n}}function Kte(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const a=t[n-1][1],i=e.sliceStream(a);let s=i.length,o=-1,l=0,c;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const u={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:a.start._bufferIndex+o,_index:a.start._index+s,line:a.end.line,column:a.end.column-l,offset:a.end.offset-l},end:{...a.end}};a.end={...u.start},a.start.offset===a.end.offset?Object.assign(a,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const Qte={42:is,43:is,45:is,48:is,49:is,50:is,51:is,52:is,53:is,54:is,55:is,56:is,57:is,62:kq},Xte={91:tte},Jte={[-2]:uC,[-1]:uC,32:uC},Zte={35:ote,42:tw,45:[oR,tw],60:dte,61:oR,95:tw,96:iR,126:iR},ene={38:Eq,92:Aq},tne={[-5]:dC,[-4]:dC,[-3]:dC,33:Ate,38:Eq,42:OE,60:[Pee,xte],91:Pte,92:[ite,Aq],93:sO,95:OE,96:Vee},nne={null:[OE,Gte]},rne={null:[42,95]},ane={null:[]},ine=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:rne,contentInitial:Xte,disable:ane,document:Qte,flow:Zte,flowInitial:Jte,insideSpan:nne,string:ene,text:tne},Symbol.toStringTag,{value:"Module"}));function sne(t,e,n){let a={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const c={attempt:I(k),check:I(P),consume:T,enter:C,exit:A,interrupt:I(P,{interrupt:!0})},u={code:null,containerState:{},defineSkip:j,events:[],now:b,parser:t,previous:null,sliceSerialize:g,sliceStream:x,write:p};let f=e.tokenize.call(u,c);return e.resolveAll&&s.push(e),u;function p(F){return o=no(o,F),w(),o[o.length-1]!==null?[]:(R(e,0),u.events=GN(s,u.events,u),u.events)}function g(F,B){return lne(x(F),B)}function x(F){return one(o,F)}function b(){const{_bufferIndex:F,_index:B,line:V,column:W,offset:G}=a;return{_bufferIndex:F,_index:B,line:V,column:W,offset:G}}function j(F){i[F.line]=F.column,U()}function w(){let F;for(;a._index<o.length;){const B=o[a._index];if(typeof B=="string")for(F=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===F&&a._bufferIndex<B.length;)_(B.charCodeAt(a._bufferIndex));else _(B)}}function _(F){f=f(F)}function T(F){Xt(F)?(a.line++,a.column=1,a.offset+=F===-3?2:1,U()):F!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===o[a._index].length&&(a._bufferIndex=-1,a._index++)),u.previous=F}function C(F,B){const V=B||{};return V.type=F,V.start=b(),u.events.push(["enter",V,u]),l.push(V),V}function A(F){const B=l.pop();return B.end=b(),u.events.push(["exit",B,u]),B}function k(F,B){R(F,B.from)}function P(F,B){B.restore()}function I(F,B){return V;function V(W,G,z){let Y,Q,K,$;return Array.isArray(W)?xe(W):"tokenize"in W?xe([W]):ie(W);function ie(Be){return Le;function Le(ce){const Se=ce!==null&&Be[ce],Ve=ce!==null&&Be.null,Ae=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Ve)?Ve:Ve?[Ve]:[]];return xe(Ae)(ce)}}function xe(Be){return Y=Be,Q=0,Be.length===0?z:X(Be[Q])}function X(Be){return Le;function Le(ce){return $=q(),K=Be,Be.partial||(u.currentConstruct=Be),Be.name&&u.parser.constructs.disable.null.includes(Be.name)?$e():Be.tokenize.call(B?Object.assign(Object.create(u),B):u,c,Ie,$e)(ce)}}function Ie(Be){return F(K,$),G}function $e(Be){return $.restore(),++Q<Y.length?X(Y[Q]):z}}}function R(F,B){F.resolveAll&&!s.includes(F)&&s.push(F),F.resolve&&Is(u.events,B,u.events.length-B,F.resolve(u.events.slice(B),u)),F.resolveTo&&(u.events=F.resolveTo(u.events,u))}function q(){const F=b(),B=u.previous,V=u.currentConstruct,W=u.events.length,G=Array.from(l);return{from:W,restore:z};function z(){a=F,u.previous=B,u.currentConstruct=V,u.events.length=W,l=G,U()}}function U(){a.line in i&&a.column<2&&(a.column=i[a.line],a.offset+=i[a.line]-1)}}function one(t,e){const n=e.start._index,a=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(a,s)];else{if(o=t.slice(n,i),a>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(a):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function lne(t,e){let n=-1;const a=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,a.push(o)}return a.join("")}function cne(t){const a={constructs:Cq([ine,...(t||{}).extensions||[]]),content:i(See),defined:[],document:i(Cee),flow:i(Vte),lazy:{},string:i(Wte),text:i(Yte)};return a;function i(s){return o;function o(l){return sne(a,s,l)}}}function une(t){for(;!Pq(t););return t}const lR=/[\0\t\n\r]/g;function dne(){let t=1,e="",n=!0,a;return i;function i(s,o,l){const c=[];let u,f,p,g,x;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,e="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(lR.lastIndex=p,u=lR.exec(s),g=u&&u.index!==void 0?u.index:s.length,x=s.charCodeAt(g),!u){e=s.slice(p);break}if(x===10&&p===g&&a)c.push(-3),a=void 0;else switch(a&&(c.push(-5),a=void 0),p<g&&(c.push(s.slice(p,g)),t+=g-p),x){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:a=!0,t=1}p=g+1}return l&&(a&&c.push(-5),e&&c.push(e),c.push(null)),c}}const hne=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function fne(t){return t.replace(hne,pne)}function pne(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Tq(n.slice(s?2:1),s?16:10)}return iO(n)||t}const Lq={}.hasOwnProperty;function mne(t,e,n){return typeof e!="string"&&(n=e,e=void 0),gne(n)(une(cne(n).document().write(dne()(t,e,!0))))}function gne(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ge),autolinkProtocol:q,autolinkEmail:q,atxHeading:s(be),blockQuote:s(Ve),characterEscape:q,characterReference:q,codeFenced:s(Ae),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ae,o),codeText:s(ue,o),codeTextData:q,data:q,codeFlowValue:q,definition:s(Te),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(oe),hardBreakEscape:s(_e),hardBreakTrailing:s(_e),htmlFlow:s(Ne,o),htmlFlowData:q,htmlText:s(Ne,o),htmlTextData:q,image:s(ee),label:o,link:s(ge),listItem:s(ae),listItemValue:g,listOrdered:s(de,p),listUnordered:s(de),paragraph:s(ne),reference:X,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(be),strong:s(se),thematicBreak:s(Ee)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:Se,autolinkProtocol:ce,blockQuote:c(),characterEscapeValue:U,characterReferenceMarkerHexadecimal:$e,characterReferenceMarkerNumeric:$e,characterReferenceValue:Be,characterReference:Le,codeFenced:c(w),codeFencedFence:j,codeFencedFenceInfo:x,codeFencedFenceMeta:b,codeFlowValue:U,codeIndented:c(_),codeText:c(G),codeTextData:U,data:U,definition:c(),definitionDestinationString:A,definitionLabelString:T,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(B),hardBreakTrailing:c(B),htmlFlow:c(V),htmlFlowData:U,htmlText:c(W),htmlTextData:U,image:c(Y),label:K,labelText:Q,lineEnding:F,link:c(z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Ie,resourceDestinationString:$,resourceTitleString:ie,resource:xe,setextHeading:c(R),setextHeadingLineSequence:I,setextHeadingText:P,strong:c(),thematicBreak:c()}};Fq(e,(t||{}).mdastExtensions||[]);const n={};return a;function a(J){let ye={type:"root",children:[]};const me={stack:[ye],tokenStack:[],config:e,enter:l,exit:u,buffer:o,resume:f,data:n},he=[];let De=-1;for(;++De<J.length;)if(J[De][1].type==="listOrdered"||J[De][1].type==="listUnordered")if(J[De][0]==="enter")he.push(De);else{const nt=he.pop();De=i(J,nt,De)}for(De=-1;++De<J.length;){const nt=e[J[De][0]];Lq.call(nt,J[De][1].type)&&nt[J[De][1].type].call(Object.assign({sliceSerialize:J[De][2].sliceSerialize},me),J[De][1])}if(me.tokenStack.length>0){const nt=me.tokenStack[me.tokenStack.length-1];(nt[1]||cR).call(me,void 0,nt[0])}for(ye.position={start:qu(J.length>0?J[0][1].start:{line:1,column:1,offset:0}),end:qu(J.length>0?J[J.length-2][1].end:{line:1,column:1,offset:0})},De=-1;++De<e.transforms.length;)ye=e.transforms[De](ye)||ye;return ye}function i(J,ye,me){let he=ye-1,De=-1,nt=!1,Fe,Ge,it,wt;for(;++he<=me;){const we=J[he];switch(we[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{we[0]==="enter"?De++:De--,wt=void 0;break}case"lineEndingBlank":{we[0]==="enter"&&(Fe&&!wt&&!De&&!it&&(it=he),wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wt=void 0}if(!De&&we[0]==="enter"&&we[1].type==="listItemPrefix"||De===-1&&we[0]==="exit"&&(we[1].type==="listUnordered"||we[1].type==="listOrdered")){if(Fe){let Qe=he;for(Ge=void 0;Qe--;){const Xe=J[Qe];if(Xe[1].type==="lineEnding"||Xe[1].type==="lineEndingBlank"){if(Xe[0]==="exit")continue;Ge&&(J[Ge][1].type="lineEndingBlank",nt=!0),Xe[1].type="lineEnding",Ge=Qe}else if(!(Xe[1].type==="linePrefix"||Xe[1].type==="blockQuotePrefix"||Xe[1].type==="blockQuotePrefixWhitespace"||Xe[1].type==="blockQuoteMarker"||Xe[1].type==="listItemIndent"))break}it&&(!Ge||it<Ge)&&(Fe._spread=!0),Fe.end=Object.assign({},Ge?J[Ge][1].start:we[1].end),J.splice(Ge||he,0,["exit",Fe,we[2]]),he++,me++}if(we[1].type==="listItemPrefix"){const Qe={type:"listItem",_spread:!1,start:Object.assign({},we[1].start),end:void 0};Fe=Qe,J.splice(he,0,["enter",Qe,we[2]]),he++,me++,it=void 0,wt=!0}}}return J[ye][1]._spread=nt,me}function s(J,ye){return me;function me(he){l.call(this,J(he),he),ye&&ye.call(this,he)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(J,ye,me){this.stack[this.stack.length-1].children.push(J),this.stack.push(J),this.tokenStack.push([ye,me||void 0]),J.position={start:qu(ye.start),end:void 0}}function c(J){return ye;function ye(me){J&&J.call(this,me),u.call(this,me)}}function u(J,ye){const me=this.stack.pop(),he=this.tokenStack.pop();if(he)he[0].type!==J.type&&(ye?ye.call(this,J,he[0]):(he[1]||cR).call(this,J,he[0]));else throw new Error("Cannot close `"+J.type+"` ("+jv({start:J.start,end:J.end})+"): its not open");me.position.end=qu(J.end)}function f(){return aO(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(J){if(this.data.expectingFirstListItemValue){const ye=this.stack[this.stack.length-2];ye.start=Number.parseInt(this.sliceSerialize(J),10),this.data.expectingFirstListItemValue=void 0}}function x(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.lang=J}function b(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.meta=J}function j(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.value=J.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.value=J.replace(/(\r?\n|\r)$/g,"")}function T(J){const ye=this.resume(),me=this.stack[this.stack.length-1];me.label=ye,me.identifier=zo(this.sliceSerialize(J)).toLowerCase()}function C(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.title=J}function A(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.url=J}function k(J){const ye=this.stack[this.stack.length-1];if(!ye.depth){const me=this.sliceSerialize(J).length;ye.depth=me}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function I(J){const ye=this.stack[this.stack.length-1];ye.depth=this.sliceSerialize(J).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function q(J){const me=this.stack[this.stack.length-1].children;let he=me[me.length-1];(!he||he.type!=="text")&&(he=je(),he.position={start:qu(J.start),end:void 0},me.push(he)),this.stack.push(he)}function U(J){const ye=this.stack.pop();ye.value+=this.sliceSerialize(J),ye.position.end=qu(J.end)}function F(J){const ye=this.stack[this.stack.length-1];if(this.data.atHardBreak){const me=ye.children[ye.children.length-1];me.position.end=qu(J.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ye.type)&&(q.call(this,J),U.call(this,J))}function B(){this.data.atHardBreak=!0}function V(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.value=J}function W(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.value=J}function G(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.value=J}function z(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=ye,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function Y(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=ye,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function Q(J){const ye=this.sliceSerialize(J),me=this.stack[this.stack.length-2];me.label=fne(ye),me.identifier=zo(ye).toLowerCase()}function K(){const J=this.stack[this.stack.length-1],ye=this.resume(),me=this.stack[this.stack.length-1];if(this.data.inReference=!0,me.type==="link"){const he=J.children;me.children=he}else me.alt=ye}function $(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.url=J}function ie(){const J=this.resume(),ye=this.stack[this.stack.length-1];ye.title=J}function xe(){this.data.inReference=void 0}function X(){this.data.referenceType="collapsed"}function Ie(J){const ye=this.resume(),me=this.stack[this.stack.length-1];me.label=ye,me.identifier=zo(this.sliceSerialize(J)).toLowerCase(),this.data.referenceType="full"}function $e(J){this.data.characterReferenceType=J.type}function Be(J){const ye=this.sliceSerialize(J),me=this.data.characterReferenceType;let he;me?(he=Tq(ye,me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):he=iO(ye);const De=this.stack[this.stack.length-1];De.value+=he}function Le(J){const ye=this.stack.pop();ye.position.end=qu(J.end)}function ce(J){U.call(this,J);const ye=this.stack[this.stack.length-1];ye.url=this.sliceSerialize(J)}function Se(J){U.call(this,J);const ye=this.stack[this.stack.length-1];ye.url="mailto:"+this.sliceSerialize(J)}function Ve(){return{type:"blockquote",children:[]}}function Ae(){return{type:"code",lang:null,meta:null,value:""}}function ue(){return{type:"inlineCode",value:""}}function Te(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function oe(){return{type:"emphasis",children:[]}}function be(){return{type:"heading",depth:0,children:[]}}function _e(){return{type:"break"}}function Ne(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function ge(){return{type:"link",title:null,url:"",children:[]}}function de(J){return{type:"list",ordered:J.type==="listOrdered",start:null,spread:J._spread,children:[]}}function ae(J){return{type:"listItem",spread:J._spread,checked:null,children:[]}}function ne(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function je(){return{type:"text",value:""}}function Ee(){return{type:"thematicBreak"}}}function qu(t){return{line:t.line,column:t.column,offset:t.offset}}function Fq(t,e){let n=-1;for(;++n<e.length;){const a=e[n];Array.isArray(a)?Fq(t,a):yne(t,a)}}function yne(t,e){let n;for(n in e)if(Lq.call(e,n))switch(n){case"canContainEols":{const a=e[n];a&&t[n].push(...a);break}case"transforms":{const a=e[n];a&&t[n].push(...a);break}case"enter":case"exit":{const a=e[n];a&&Object.assign(t[n],a);break}}}function cR(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+jv({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+jv({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+jv({start:e.start,end:e.end})+") is still open")}function xne(t){const e=this;e.parser=n;function n(a){return mne(a,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function vne(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function bne(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function jne(t,e){const n=e.value?e.value+`
`:"",a={};e.lang&&(a.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function wne(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Nne(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Sne(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",a=String(e.identifier).toUpperCase(),i=qg(a.toLowerCase()),s=t.footnoteOrder.indexOf(a);let o,l=t.footnoteCounts.get(a);l===void 0?(l=0,t.footnoteOrder.push(a),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(a,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,u),t.applyData(e,u)}function _ne(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Cne(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function $q(t,e){const n=e.referenceType;let a="]";if(n==="collapsed"?a+="[]":n==="full"&&(a+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+a}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=a:i.push({type:"text",value:a}),i}function Tne(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return $q(t,e);const i={src:qg(a.url||""),alt:e.alt};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function kne(t,e){const n={src:qg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,a),t.applyData(e,a)}function Ane(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,a),t.applyData(e,a)}function Ene(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return $q(t,e);const i={href:qg(a.url||"")};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function Pne(t,e){const n={href:qg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function Dne(t,e,n){const a=t.all(e),i=n?One(n):zq(e),s={},o=[];if(typeof e.checked=="boolean"){const f=a[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},a.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<a.length;){const f=a[l];(i||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?o.push(...f.children):o.push(f)}const c=a[a.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function One(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let a=-1;for(;!e&&++a<n.length;)e=zq(n[a])}return e}function zq(t){const e=t.spread;return e??t.children.length>1}function Mne(t,e){const n={},a=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<a.length;){const o=a[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(a,!0)};return t.patch(e,s),t.applyData(e,s)}function Ine(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Rne(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Lne(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Fne(t,e){const n=t.all(e),a=n.shift(),i=[];if(a){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([a],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=eO(e.children[1]),c=vq(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function $ne(t,e,n){const a=n?n.children:void 0,s=(a?a.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let c=-1;const u=[];for(;++c<l;){const p=e.children[c],g={},x=o?o[c]:void 0;x&&(g.align=x);let b={type:"element",tagName:s,properties:g,children:[]};p&&(b.children=t.all(p),t.patch(p,b),b=t.applyData(p,b)),u.push(b)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,f),t.applyData(e,f)}function zne(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const uR=9,dR=32;function Bne(t){const e=String(t),n=/\r?\n|\r/g;let a=n.exec(e),i=0;const s=[];for(;a;)s.push(hR(e.slice(i,a.index),i>0,!0),a[0]),i=a.index+a[0].length,a=n.exec(e);return s.push(hR(e.slice(i),i>0,!1)),s.join("")}function hR(t,e,n){let a=0,i=t.length;if(e){let s=t.codePointAt(a);for(;s===uR||s===dR;)a++,s=t.codePointAt(a)}if(n){let s=t.codePointAt(i-1);for(;s===uR||s===dR;)i--,s=t.codePointAt(i-1)}return i>a?t.slice(a,i):""}function qne(t,e){const n={type:"text",value:Bne(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Une(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Vne={blockquote:vne,break:bne,code:jne,delete:wne,emphasis:Nne,footnoteReference:Sne,heading:_ne,html:Cne,imageReference:Tne,image:kne,inlineCode:Ane,linkReference:Ene,link:Pne,listItem:Dne,list:Mne,paragraph:Ine,root:Rne,strong:Lne,table:Fne,tableCell:zne,tableRow:$ne,text:qne,thematicBreak:Une,toml:xj,yaml:xj,definition:xj,footnoteDefinition:xj};function xj(){}const Bq=-1,WN=0,Nv=1,jw=2,oO=3,lO=4,cO=5,uO=6,qq=7,Uq=8,fR=typeof self=="object"?self:globalThis,Hne=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),a=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case WN:case Bq:return n(o,i);case Nv:{const l=n([],i);for(const c of o)l.push(a(c));return l}case jw:{const l=n({},i);for(const[c,u]of o)l[a(c)]=a(u);return l}case oO:return n(new Date(o),i);case lO:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case cO:{const l=n(new Map,i);for(const[c,u]of o)l.set(a(c),a(u));return l}case uO:{const l=n(new Set,i);for(const c of o)l.add(a(c));return l}case qq:{const{name:l,message:c}=o;return n(new fR[l](c),i)}case Uq:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new fR[s](o),i)};return a},pR=t=>Hne(new Map,t)(0),xm="",{toString:Gne}={},{keys:Wne}=Object,Xx=t=>{const e=typeof t;if(e!=="object"||!t)return[WN,e];const n=Gne.call(t).slice(8,-1);switch(n){case"Array":return[Nv,xm];case"Object":return[jw,xm];case"Date":return[oO,xm];case"RegExp":return[lO,xm];case"Map":return[cO,xm];case"Set":return[uO,xm];case"DataView":return[Nv,n]}return n.includes("Array")?[Nv,n]:n.includes("Error")?[qq,n]:[jw,n]},vj=([t,e])=>t===WN&&(e==="function"||e==="symbol"),Yne=(t,e,n,a)=>{const i=(o,l)=>{const c=a.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=Xx(o);switch(l){case WN:{let f=o;switch(c){case"bigint":l=Uq,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return i([Bq],o)}return i([l,f],o)}case Nv:{if(c){let g=o;return c==="DataView"?g=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(g=new Uint8Array(o)),i([c,[...g]],o)}const f=[],p=i([l,f],o);for(const g of o)f.push(s(g));return p}case jw:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],p=i([l,f],o);for(const g of Wne(o))(t||!vj(Xx(o[g])))&&f.push([s(g),s(o[g])]);return p}case oO:return i([l,o.toISOString()],o);case lO:{const{source:f,flags:p}=o;return i([l,{source:f,flags:p}],o)}case cO:{const f=[],p=i([l,f],o);for(const[g,x]of o)(t||!(vj(Xx(g))||vj(Xx(x))))&&f.push([s(g),s(x)]);return p}case uO:{const f=[],p=i([l,f],o);for(const g of o)(t||!vj(Xx(g)))&&f.push(s(g));return p}}const{message:u}=o;return i([l,{name:c,message:u}],o)};return s},mR=(t,{json:e,lossy:n}={})=>{const a=[];return Yne(!(e||n),!!e,new Map,a)(t),a},ww=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?pR(mR(t,e)):structuredClone(t):(t,e)=>pR(mR(t,e));function Kne(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Qne(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Xne(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Kne,a=t.options.footnoteBackLabel||Qne,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[c]);if(!u)continue;const f=t.all(u),p=String(u.identifier).toUpperCase(),g=qg(p.toLowerCase());let x=0;const b=[],j=t.footnoteCounts.get(p);for(;j!==void 0&&++x<=j;){b.length>0&&b.push({type:"text",value:" "});let T=typeof n=="string"?n:n(c,x);typeof T=="string"&&(T={type:"text",value:T}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof a=="string"?a:a(c,x),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const w=f[f.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const T=w.children[w.children.length-1];T&&T.type==="text"?T.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...b)}else f.push(...b);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(f,!0)};t.patch(u,_),l.push(_)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...ww(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const YN=function(t){if(t==null)return tre;if(typeof t=="function")return KN(t);if(typeof t=="object")return Array.isArray(t)?Jne(t):Zne(t);if(typeof t=="string")return ere(t);throw new Error("Expected function, string, or object as test")};function Jne(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=YN(t[n]);return KN(a);function a(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Zne(t){const e=t;return KN(n);function n(a){const i=a;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function ere(t){return KN(e);function e(n){return n&&n.type===t}}function KN(t){return e;function e(n,a,i){return!!(nre(n)&&t.call(this,n,typeof a=="number"?a:void 0,i||void 0))}}function tre(){return!0}function nre(t){return t!==null&&typeof t=="object"&&"type"in t}const Vq=[],rre=!0,ME=!1,are="skip";function Hq(t,e,n,a){let i;typeof e=="function"&&typeof n!="function"?(a=n,n=e):i=e;const s=YN(i),o=a?-1:1;l(t,void 0,[])();function l(c,u,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const x=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=Vq,b,j,w;if((!e||s(c,u,f[f.length-1]||void 0))&&(x=ire(n(c,f)),x[0]===ME))return x;if("children"in c&&c.children){const _=c;if(_.children&&x[0]!==are)for(j=(a?_.children.length:-1)+o,w=f.concat(_);j>-1&&j<_.children.length;){const T=_.children[j];if(b=l(T,j,w)(),b[0]===ME)return b;j=typeof b[1]=="number"?b[1]:j+o}}return x}}}function ire(t){return Array.isArray(t)?t:typeof t=="number"?[rre,t]:t==null?Vq:[t]}function dO(t,e,n,a){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=a),Hq(t,s,l,i);function l(c,u){const f=u[u.length-1],p=f?f.children.indexOf(c):void 0;return o(c,p,f)}}const IE={}.hasOwnProperty,sre={};function ore(t,e){const n=e||sre,a=new Map,i=new Map,s=new Map,o={...Vne,...n.handlers},l={all:u,applyData:cre,definitionById:a,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:lre,wrap:dre};return dO(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?a:i,g=String(f.identifier).toUpperCase();p.has(g)||p.set(g,f)}}),l;function c(f,p){const g=f.type,x=l.handlers[g];if(IE.call(l.handlers,g)&&x)return x(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in f){const{children:j,...w}=f,_=ww(w);return _.children=l.all(f),_}return ww(f)}return(l.options.unknownHandler||ure)(l,f,p)}function u(f){const p=[];if("children"in f){const g=f.children;let x=-1;for(;++x<g.length;){const b=l.one(g[x],f);if(b){if(x&&g[x-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=gR(b.value)),!Array.isArray(b)&&b.type==="element")){const j=b.children[0];j&&j.type==="text"&&(j.value=gR(j.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function lre(t,e){t.position&&(e.position=QZ(t))}function cre(t,e){let n=e;if(t&&t.data){const a=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof a=="string")if(n.type==="element")n.tagName=a;else{const o="children"in n?n.children:[n];n={type:"element",tagName:a,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,ww(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function ure(t,e){const n=e.data||{},a="value"in e&&!(IE.call(n,"hProperties")||IE.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function dre(t,e){const n=[];let a=-1;for(e&&n.push({type:"text",value:`
`});++a<t.length;)a&&n.push({type:"text",value:`
`}),n.push(t[a]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function gR(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function yR(t,e){const n=ore(t,e),a=n.one(t,void 0),i=Xne(n),s=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function hre(t,e){return t&&"run"in t?async function(n,a){const i=yR(n,{file:a,...e});await t.run(i,a)}:function(n,a){return yR(n,{file:a,...t||e})}}function xR(t){if(t)throw t}var hC,vR;function fre(){if(vR)return hC;vR=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},s=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var f=t.call(u,"constructor"),p=u.constructor&&u.constructor.prototype&&t.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!f&&!p)return!1;var g;for(g in u);return typeof g>"u"||t.call(u,g)},o=function(u,f){n&&f.name==="__proto__"?n(u,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):u[f.name]=f.newValue},l=function(u,f){if(f==="__proto__")if(t.call(u,f)){if(a)return a(u,f).value}else return;return u[f]};return hC=function c(){var u,f,p,g,x,b,j=arguments[0],w=1,_=arguments.length,T=!1;for(typeof j=="boolean"&&(T=j,j=arguments[1]||{},w=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});w<_;++w)if(u=arguments[w],u!=null)for(f in u)p=l(j,f),g=l(u,f),j!==g&&(T&&g&&(s(g)||(x=i(g)))?(x?(x=!1,b=p&&i(p)?p:[]):b=p&&s(p)?p:{},o(j,{name:f,newValue:c(T,b,g)})):typeof g<"u"&&o(j,{name:f,newValue:g}));return j},hC}var pre=fre();const fC=Hn(pre);function RE(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function mre(){const t=[],e={run:n,use:a};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...u){const f=t[++s];let p=-1;if(c){o(c);return}for(;++p<i.length;)(u[p]===null||u[p]===void 0)&&(u[p]=i[p]);i=u,f?gre(f,l)(...u):o(null,...u)}}function a(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function gre(t,e){let n;return a;function a(...o){const l=t.length>o.length;let c;l&&o.push(i);try{c=t.apply(this,o)}catch(u){const f=u;if(l&&n)throw f;return i(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}const _l={basename:yre,dirname:xre,extname:vre,join:bre,sep:"/"};function yre(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Rb(t);let n=0,a=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1);return a<0?"":t.slice(n,a)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(a=i):(l=-1,a=o));return n===a?a=o:a<0&&(a=t.length),t.slice(n,a)}function xre(t){if(Rb(t),t.length===0)return".";let e=-1,n=t.length,a;for(;--n;)if(t.codePointAt(n)===47){if(a){e=n;break}}else a||(a=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function vre(t){Rb(t);let e=t.length,n=-1,a=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){a=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===a+1?"":t.slice(i,n)}function bre(...t){let e=-1,n;for(;++e<t.length;)Rb(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":jre(n)}function jre(t){Rb(t);const e=t.codePointAt(0)===47;let n=wre(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function wre(t,e){let n="",a=0,i=-1,s=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||a!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",a=0):(n=n.slice(0,c),a=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",a=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",a=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),a=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Rb(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Nre={cwd:Sre};function Sre(){return"/"}function LE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function _re(t){if(typeof t=="string")t=new URL(t);else if(!LE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Cre(t)}function Cre(t){if(t.hostname!==""){const a=new TypeError('File URL host must be "localhost" or empty on darwin');throw a.code="ERR_INVALID_FILE_URL_HOST",a}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const a=e.codePointAt(n+2);if(a===70||a===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const pC=["history","path","basename","stem","extname","dirname"];class Gq{constructor(e){let n;e?LE(e)?n={path:e}:typeof e=="string"||Tre(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Nre.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let a=-1;for(;++a<pC.length;){const s=pC[a];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)pC.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?_l.basename(this.path):void 0}set basename(e){gC(e,"basename"),mC(e,"basename"),this.path=_l.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?_l.dirname(this.path):void 0}set dirname(e){bR(this.basename,"dirname"),this.path=_l.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?_l.extname(this.path):void 0}set extname(e){if(mC(e,"extname"),bR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_l.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){LE(e)&&(e=_re(e)),gC(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?_l.basename(this.path,this.extname):void 0}set stem(e){gC(e,"stem"),mC(e,"stem"),this.path=_l.join(this.dirname||"",e+(this.extname||""))}fail(e,n,a){const i=this.message(e,n,a);throw i.fatal=!0,i}info(e,n,a){const i=this.message(e,n,a);return i.fatal=void 0,i}message(e,n,a){const i=new yi(e,n,a);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function mC(t,e){if(t&&t.includes(_l.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+_l.sep+"`")}function gC(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function bR(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Tre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const kre=function(t){const a=this.constructor.prototype,i=a[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,a),s},Are={}.hasOwnProperty;class hO extends kre{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=mre()}copy(){const e=new hO;let n=-1;for(;++n<this.attachers.length;){const a=this.attachers[n];e.use(...a)}return e.data(fC(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(vC("data",this.frozen),this.namespace[e]=n,this):Are.call(this.namespace,e)&&this.namespace[e]||void 0:e?(vC("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...a]=this.attachers[this.freezeIndex];if(a[0]===!1)continue;a[0]===!0&&(a[0]=void 0);const i=n.call(e,...a);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=bj(e),a=this.parser||this.Parser;return yC("parse",a),a(String(n),n)}process(e,n){const a=this;return this.freeze(),yC("process",this.parser||this.Parser),xC("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=bj(e),c=a.parse(l);a.run(c,l,function(f,p,g){if(f||!p||!g)return u(f);const x=p,b=a.stringify(x,g);Dre(b)?g.value=b:g.result=b,u(f,g)});function u(f,p){f||!p?o(f):s?s(p):n(void 0,p)}}}processSync(e){let n=!1,a;return this.freeze(),yC("processSync",this.parser||this.Parser),xC("processSync",this.compiler||this.Compiler),this.process(e,i),wR("processSync","process",n),a;function i(s,o){n=!0,xR(s),a=o}}run(e,n,a){jR(e),this.freeze();const i=this.transformers;return!a&&typeof n=="function"&&(a=n,n=void 0),a?s(void 0,a):new Promise(s);function s(o,l){const c=bj(n);i.run(e,c,u);function u(f,p,g){const x=p||e;f?l(f):o?o(x):a(void 0,x,g)}}}runSync(e,n){let a=!1,i;return this.run(e,n,s),wR("runSync","run",a),i;function s(o,l){xR(o),i=l,a=!0}}stringify(e,n){this.freeze();const a=bj(n),i=this.compiler||this.Compiler;return xC("stringify",i),jR(e),i(e,a)}use(e,...n){const a=this.attachers,i=this.namespace;if(vC("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...p]=u;c(f,p)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(i.settings=fC(!0,i.settings,u.settings))}function l(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const p=u[f];s(p)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let p=-1,g=-1;for(;++p<a.length;)if(a[p][0]===u){g=p;break}if(g===-1)a.push([u,...f]);else if(f.length>0){let[x,...b]=f;const j=a[g][1];RE(j)&&RE(x)&&(x=fC(!0,j,x)),a[g]=[u,x,...b]}}}}const Ere=new hO().freeze();function yC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function xC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function vC(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function jR(t){if(!RE(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function wR(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function bj(t){return Pre(t)?t:new Gq(t)}function Pre(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Dre(t){return typeof t=="string"||Ore(t)}function Ore(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Mre="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",NR=[],SR={allowDangerousHtml:!0},Ire=/^(https?|ircs?|mailto|xmpp)$/i,Rre=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function fd(t){const e=Lre(t),n=Fre(t);return $re(e.runSync(e.parse(n),n),t)}function Lre(t){const e=t.rehypePlugins||NR,n=t.remarkPlugins||NR,a=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...SR}:SR;return Ere().use(xne).use(n).use(hre,a).use(e)}function Fre(t){const e=t.children||"",n=new Gq;return typeof e=="string"&&(n.value=e),n}function $re(t,e){const n=e.allowedElements,a=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||zre;for(const f of Rre)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+Mre+f.id,void 0);return dO(t,u),tee(t,{Fragment:r.Fragment,components:i,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function u(f,p,g){if(f.type==="raw"&&g&&typeof p=="number")return o?g.children.splice(p,1):g.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let x;for(x in cC)if(Object.hasOwn(cC,x)&&Object.hasOwn(f.properties,x)){const b=f.properties[x],j=cC[x];(j===null||j.includes(f.tagName))&&(f.properties[x]=c(String(b||""),x,f))}}if(f.type==="element"){let x=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!x&&a&&typeof p=="number"&&(x=!a(f,p,g)),x&&g&&typeof p=="number")return l&&f.children?g.children.splice(p,1,...f.children):g.children.splice(p,1),p}}}function zre(t){const e=t.indexOf(":"),n=t.indexOf("?"),a=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||a!==-1&&e>a||Ire.test(t.slice(0,e))?t:""}function _R(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let a=0,i=n.indexOf(e);for(;i!==-1;)a++,i=n.indexOf(e,i+e.length);return a}function Bre(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function qre(t,e,n){const i=YN((n||{}).ignore||[]),s=Ure(e);let o=-1;for(;++o<s.length;)Hq(t,"text",l);function l(u,f){let p=-1,g;for(;++p<f.length;){const x=f[p],b=g?g.children:void 0;if(i(x,b?b.indexOf(x):void 0,g))return;g=x}if(g)return c(u,f)}function c(u,f){const p=f[f.length-1],g=s[o][0],x=s[o][1];let b=0;const w=p.children.indexOf(u);let _=!1,T=[];g.lastIndex=0;let C=g.exec(u.value);for(;C;){const A=C.index,k={index:C.index,input:C.input,stack:[...f,u]};let P=x(...C,k);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?g.lastIndex=A+1:(b!==A&&T.push({type:"text",value:u.value.slice(b,A)}),Array.isArray(P)?T.push(...P):P&&T.push(P),b=A+C[0].length,_=!0),!g.global)break;C=g.exec(u.value)}return _?(b<u.value.length&&T.push({type:"text",value:u.value.slice(b)}),p.children.splice(w,1,...T)):T=[u],w+T.length}}function Ure(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let a=-1;for(;++a<n.length;){const i=n[a];e.push([Vre(i[0]),Hre(i[1])])}return e}function Vre(t){return typeof t=="string"?new RegExp(Bre(t),"g"):t}function Hre(t){return typeof t=="function"?t:function(){return t}}const bC="phrasing",jC=["autolink","link","image","label"];function Gre(){return{transforms:[Zre],enter:{literalAutolink:Yre,literalAutolinkEmail:wC,literalAutolinkHttp:wC,literalAutolinkWww:wC},exit:{literalAutolink:Jre,literalAutolinkEmail:Xre,literalAutolinkHttp:Kre,literalAutolinkWww:Qre}}}function Wre(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:bC,notInConstruct:jC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:bC,notInConstruct:jC},{character:":",before:"[ps]",after:"\\/",inConstruct:bC,notInConstruct:jC}]}}function Yre(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function wC(t){this.config.enter.autolinkProtocol.call(this,t)}function Kre(t){this.config.exit.autolinkProtocol.call(this,t)}function Qre(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Xre(t){this.config.exit.autolinkEmail.call(this,t)}function Jre(t){this.exit(t)}function Zre(t){qre(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,eae],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),tae]],{ignore:["link","linkReference"]})}function eae(t,e,n,a,i){let s="";if(!Wq(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!nae(n)))return!1;const o=rae(n+a);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function tae(t,e,n,a){return!Wq(a,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function nae(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function rae(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],a=n.indexOf(")");const i=_R(t,"(");let s=_R(t,")");for(;a!==-1&&i>s;)t+=n.slice(0,a+1),n=n.slice(a+1),a=n.indexOf(")"),s++;return[t,n]}function Wq(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||_f(n)||HN(n))&&(!e||n!==47)}Yq.peek=hae;function aae(){this.buffer()}function iae(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function sae(){this.buffer()}function oae(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function lae(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function cae(t){this.exit(t)}function uae(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function dae(t){this.exit(t)}function hae(){return"["}function Yq(t,e,n,a){const i=n.createTracker(a);let s=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=i.move("]"),s}function fae(){return{enter:{gfmFootnoteCallString:aae,gfmFootnoteCall:iae,gfmFootnoteDefinitionLabelString:sae,gfmFootnoteDefinition:oae},exit:{gfmFootnoteCallString:lae,gfmFootnoteCall:cae,gfmFootnoteDefinitionLabelString:uae,gfmFootnoteDefinition:dae}}}function pae(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Yq},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(a,i,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(a),{before:c,after:"]"})),f(),c+=l.move("]:"),a.children&&a.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(a,l.current()),e?Kq:mae))),u(),c}}function mae(t,e,n){return e===0?t:Kq(t,e,n)}function Kq(t,e,n){return(n?"":"    ")+t}const gae=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Qq.peek=jae;function yae(){return{canContainEols:["delete"],enter:{strikethrough:vae},exit:{strikethrough:bae}}}function xae(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:gae}],handlers:{delete:Qq}}}function vae(t){this.enter({type:"delete",children:[]},t)}function bae(t){this.exit(t)}function Qq(t,e,n,a){const i=n.createTracker(a),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function jae(){return"~"}function wae(t){return t.length}function Nae(t,e){const n=e||{},a=(n.align||[]).concat(),i=n.stringLength||wae,s=[],o=[],l=[],c=[];let u=0,f=-1;for(;++f<t.length;){const j=[],w=[];let _=-1;for(t[f].length>u&&(u=t[f].length);++_<t[f].length;){const T=Sae(t[f][_]);if(n.alignDelimiters!==!1){const C=i(T);w[_]=C,(c[_]===void 0||C>c[_])&&(c[_]=C)}j.push(T)}o[f]=j,l[f]=w}let p=-1;if(typeof a=="object"&&"length"in a)for(;++p<u;)s[p]=CR(a[p]);else{const j=CR(a);for(;++p<u;)s[p]=j}p=-1;const g=[],x=[];for(;++p<u;){const j=s[p];let w="",_="";j===99?(w=":",_=":"):j===108?w=":":j===114&&(_=":");let T=n.alignDelimiters===!1?1:Math.max(1,c[p]-w.length-_.length);const C=w+"-".repeat(T)+_;n.alignDelimiters!==!1&&(T=w.length+T+_.length,T>c[p]&&(c[p]=T),x[p]=T),g[p]=C}o.splice(1,0,g),l.splice(1,0,x),f=-1;const b=[];for(;++f<o.length;){const j=o[f],w=l[f];p=-1;const _=[];for(;++p<u;){const T=j[p]||"";let C="",A="";if(n.alignDelimiters!==!1){const k=c[p]-(w[p]||0),P=s[p];P===114?C=" ".repeat(k):P===99?k%2?(C=" ".repeat(k/2+.5),A=" ".repeat(k/2-.5)):(C=" ".repeat(k/2),A=C):A=" ".repeat(k)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(C),_.push(T),n.alignDelimiters!==!1&&_.push(A),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==u-1)&&_.push("|")}b.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return b.join(`
`)}function Sae(t){return t==null?"":String(t)}function CR(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function _ae(t,e,n,a){const i=n.enter("blockquote"),s=n.createTracker(a);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Cae);return i(),o}function Cae(t,e,n){return">"+(n?"":" ")+t}function Tae(t,e){return TR(t,e.inConstruct,!0)&&!TR(t,e.notInConstruct,!1)}function TR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let a=-1;for(;++a<e.length;)if(t.includes(e[a]))return!0;return!1}function kR(t,e,n,a){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Tae(n.stack,n.unsafe[i]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function kae(t,e){const n=String(t);let a=n.indexOf(e),i=a,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===i?++s>o&&(o=s):s=1,i=a+e.length,a=n.indexOf(e,i);return o}function Aae(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Eae(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Pae(t,e,n,a){const i=Eae(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Aae(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(s,Dae);return p(),g}const l=n.createTracker(a),c=i.repeat(Math.max(kae(s,i)+1,3)),u=n.enter("codeFenced");let f=l.move(c);if(t.lang){const p=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),u(),f}function Dae(t,e,n){return(n?"":"    ")+t}function fO(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Oae(t,e,n,a){const i=fO(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(a);let u=c.move("[");return u+=c.move(n.safe(n.associationId(t),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=c.move(" "+i),u+=c.move(n.safe(t.title,{before:u,after:i,...c.current()})),u+=c.move(i),l()),o(),u}function Mae(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Iv(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Nw(t,e,n){const a=sg(t),i=sg(e);return a===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:a===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Xq.peek=Iae;function Xq(t,e,n,a){const i=Mae(n),s=n.enter("emphasis"),o=n.createTracker(a),l=o.move(i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const u=c.charCodeAt(0),f=Nw(a.before.charCodeAt(a.before.length-1),u,i);f.inside&&(c=Iv(u)+c.slice(1));const p=c.charCodeAt(c.length-1),g=Nw(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Iv(p));const x=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function Iae(t,e,n){return n.options.emphasis||"*"}function Rae(t,e){let n=!1;return dO(t,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return n=!0,ME}),!!((!t.depth||t.depth<3)&&aO(t)&&(e.options.setext||n))}function Lae(t,e,n,a){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(a);if(Rae(t,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return p(),f(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Iv(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}Jq.peek=Fae;function Jq(t){return t.value||""}function Fae(){return"<"}Zq.peek=$ae;function Zq(t,e,n,a){const i=fO(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(a);let u=c.move("![");return u+=c.move(n.safe(t.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=c.move(" "+i),u+=c.move(n.safe(t.title,{before:u,after:i,...c.current()})),u+=c.move(i),l()),u+=c.move(")"),o(),u}function $ae(){return"!"}e9.peek=zae;function e9(t,e,n,a){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("![");const u=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!u||u!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function zae(){return"!"}t9.peek=Bae;function t9(t,e,n){let a=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(a);)i+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(a);){let u=c.index;a.charCodeAt(u)===10&&a.charCodeAt(u-1)===13&&u--,a=a.slice(0,u)+" "+a.slice(c.index+1)}}return i+a+i}function Bae(){return"`"}function n9(t,e){const n=aO(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}r9.peek=qae;function r9(t,e,n,a){const i=fO(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(a);let l,c;if(n9(t,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(t,{before:p,after:">",...o.current()})),p+=o.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),u+=o.move(" "+i),u+=o.move(n.safe(t.title,{before:u,after:i,...o.current()})),u+=o.move(i),c()),u+=o.move(")"),l(),u}function qae(t,e,n){return n9(t,n)?"<":"["}a9.peek=Uae;function a9(t,e,n,a){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("[");const u=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!u||u!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Uae(){return"["}function pO(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Vae(t){const e=pO(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Hae(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function i9(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Gae(t,e,n,a){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?Hae(n):pO(n);const l=t.ordered?o==="."?")":".":Vae(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),i9(n)===o&&f){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(t,a);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),u}function Wae(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Yae(t,e,n,a){const i=Wae(n);let s=n.bulletCurrent||pO(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(a);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,l.current()),f);return c(),u;function f(p,g,x){return g?(x?"":" ".repeat(o))+p:(x?s:s+" ".repeat(o-s.length))+p}}function Kae(t,e,n,a){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,a);return s(),i(),o}const Qae=YN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Xae(t,e,n,a){return(t.children.some(function(o){return Qae(o)})?n.containerPhrasing:n.containerFlow).call(n,t,a)}function Jae(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}s9.peek=Zae;function s9(t,e,n,a){const i=Jae(n),s=n.enter("strong"),o=n.createTracker(a),l=o.move(i+i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const u=c.charCodeAt(0),f=Nw(a.before.charCodeAt(a.before.length-1),u,i);f.inside&&(c=Iv(u)+c.slice(1));const p=c.charCodeAt(c.length-1),g=Nw(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Iv(p));const x=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function Zae(t,e,n){return n.options.strong||"*"}function eie(t,e,n,a){return n.safe(t.value,a)}function tie(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function nie(t,e,n){const a=(i9(n)+(n.options.ruleSpaces?" ":"")).repeat(tie(n));return n.options.ruleSpaces?a.slice(0,-1):a}const o9={blockquote:_ae,break:kR,code:Pae,definition:Oae,emphasis:Xq,hardBreak:kR,heading:Lae,html:Jq,image:Zq,imageReference:e9,inlineCode:t9,link:r9,linkReference:a9,list:Gae,listItem:Yae,paragraph:Kae,root:Xae,strong:s9,text:eie,thematicBreak:nie};function rie(){return{enter:{table:aie,tableData:AR,tableHeader:AR,tableRow:sie},exit:{codeText:oie,table:iie,tableData:NC,tableHeader:NC,tableRow:NC}}}function aie(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function iie(t){this.exit(t),this.data.inTable=void 0}function sie(t){this.enter({type:"tableRow",children:[]},t)}function NC(t){this.exit(t)}function AR(t){this.enter({type:"tableCell",children:[]},t)}function oie(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,lie));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function lie(t,e){return e==="|"?e:t}function cie(t){const e=t||{},n=e.tableCellPadding,a=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:o,tableCell:c,tableRow:l}};function o(x,b,j,w){return u(f(x,j,w),x.align)}function l(x,b,j,w){const _=p(x,j,w),T=u([_]);return T.slice(0,T.indexOf(`
`))}function c(x,b,j,w){const _=j.enter("tableCell"),T=j.enter("phrasing"),C=j.containerPhrasing(x,{...w,before:s,after:s});return T(),_(),C}function u(x,b){return Nae(x,{align:b,alignDelimiters:a,padding:n,stringLength:i})}function f(x,b,j){const w=x.children;let _=-1;const T=[],C=b.enter("table");for(;++_<w.length;)T[_]=p(w[_],b,j);return C(),T}function p(x,b,j){const w=x.children;let _=-1;const T=[],C=b.enter("tableRow");for(;++_<w.length;)T[_]=c(w[_],x,b,j);return C(),T}function g(x,b,j){let w=o9.inlineCode(x,b,j);return j.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function uie(){return{exit:{taskListCheckValueChecked:ER,taskListCheckValueUnchecked:ER,paragraph:hie}}}function die(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:fie}}}function ER(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function hie(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const a=n.children[0];if(a&&a.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const l=i[s];if(l.type==="paragraph"){o=l;break}}o===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}}this.exit(t)}function fie(t,e,n,a){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(a);s&&l.move(o);let c=o9.listItem(t,e,n,{...a,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+o}}function pie(){return[Gre(),fae(),yae(),rie(),uie()]}function mie(t){return{extensions:[Wre(),pae(t),xae(),cie(t),die()]}}const gie={tokenize:wie,partial:!0},l9={tokenize:Nie,partial:!0},c9={tokenize:Sie,partial:!0},u9={tokenize:_ie,partial:!0},yie={tokenize:Cie,partial:!0},d9={name:"wwwAutolink",tokenize:bie,previous:f9},h9={name:"protocolAutolink",tokenize:jie,previous:p9},Vc={name:"emailAutolink",tokenize:vie,previous:m9},Bl={};function xie(){return{text:Bl}}let qh=48;for(;qh<123;)Bl[qh]=Vc,qh++,qh===58?qh=65:qh===91&&(qh=97);Bl[43]=Vc;Bl[45]=Vc;Bl[46]=Vc;Bl[95]=Vc;Bl[72]=[Vc,h9];Bl[104]=[Vc,h9];Bl[87]=[Vc,d9];Bl[119]=[Vc,d9];function vie(t,e,n){const a=this;let i,s;return o;function o(p){return!FE(p)||!m9.call(a,a.previous)||mO(a.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(p))}function l(p){return FE(p)?(t.consume(p),l):p===64?(t.consume(p),c):n(p)}function c(p){return p===46?t.check(yie,f,u)(p):p===45||p===95||mi(p)?(s=!0,t.consume(p),c):f(p)}function u(p){return t.consume(p),i=!0,c}function f(p){return s&&i&&Ri(a.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function bie(t,e,n){const a=this;return i;function i(o){return o!==87&&o!==119||!f9.call(a,a.previous)||mO(a.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(gie,t.attempt(l9,t.attempt(c9,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function jie(t,e,n){const a=this;let i="",s=!1;return o;function o(p){return(p===72||p===104)&&p9.call(a,a.previous)&&!mO(a.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),t.consume(p),l):n(p)}function l(p){if(Ri(p)&&i.length<5)return i+=String.fromCodePoint(p),t.consume(p),l;if(p===58){const g=i.toLowerCase();if(g==="http"||g==="https")return t.consume(p),c}return n(p)}function c(p){return p===47?(t.consume(p),s?u:(s=!0,c)):n(p)}function u(p){return p===null||bw(p)||kr(p)||_f(p)||HN(p)?n(p):t.attempt(l9,t.attempt(c9,f),n)(p)}function f(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function wie(t,e,n){let a=0;return i;function i(o){return(o===87||o===119)&&a<3?(a++,t.consume(o),i):o===46&&a===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Nie(t,e,n){let a,i,s;return o;function o(u){return u===46||u===95?t.check(u9,c,l)(u):u===null||kr(u)||_f(u)||u!==45&&HN(u)?c(u):(s=!0,t.consume(u),o)}function l(u){return u===95?a=!0:(i=a,a=void 0),t.consume(u),o}function c(u){return i||a||!s?n(u):e(u)}}function Sie(t,e){let n=0,a=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&a<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(u9,e,s)(o):o===null||kr(o)||_f(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&a++,t.consume(o),i}}function _ie(t,e,n){return a;function a(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),a):l===38?(t.consume(l),s):l===93?(t.consume(l),i):l===60||l===null||kr(l)||_f(l)?e(l):n(l)}function i(l){return l===null||l===40||l===91||kr(l)||_f(l)?e(l):a(l)}function s(l){return Ri(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),a):Ri(l)?(t.consume(l),o):n(l)}}function Cie(t,e,n){return a;function a(s){return t.consume(s),i}function i(s){return mi(s)?n(s):e(s)}}function f9(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||kr(t)}function p9(t){return!Ri(t)}function m9(t){return!(t===47||FE(t))}function FE(t){return t===43||t===45||t===46||t===95||mi(t)}function mO(t){let e=t.length,n=!1;for(;e--;){const a=t[e][1];if((a.type==="labelLink"||a.type==="labelImage")&&!a._balanced){n=!0;break}if(a._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Tie={tokenize:Iie,partial:!0};function kie(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Die,continuation:{tokenize:Oie},exit:Mie}},text:{91:{name:"gfmFootnoteCall",tokenize:Pie},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Aie,resolveTo:Eie}}}}function Aie(t,e,n){const a=this;let i=a.events.length;const s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let o;for(;i--;){const c=a.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=zo(a.sliceSerialize({start:o.end,end:a.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function Eie(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const a={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",a,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",a,e]];return t.splice(n,t.length-n+1,...l),t}function Pie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s=0,o;return l;function l(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(p){if(s>999||p===93&&!o||p===null||p===91||kr(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return i.includes(zo(a.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return kr(p)||(o=!0),s++,t.consume(p),p===92?f:u}function f(p){return p===91||p===92||p===93?(t.consume(p),s++,u):u(p)}}function Die(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(b){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(b){return b===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(b)}function f(b){if(o>999||b===93&&!l||b===null||b===91||kr(b))return n(b);if(b===93){t.exit("chunkString");const j=t.exit("gfmFootnoteDefinitionLabelString");return s=zo(a.sliceSerialize(j)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return kr(b)||(l=!0),o++,t.consume(b),b===92?p:f}function p(b){return b===91||b===92||b===93?(t.consume(b),o++,f):f(b)}function g(b){return b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),i.includes(s)||i.push(s),Gn(t,x,"gfmFootnoteDefinitionWhitespace")):n(b)}function x(b){return e(b)}}function Oie(t,e,n){return t.check(Ib,e,t.attempt(Tie,e,n))}function Mie(t){t.exit("gfmFootnoteDefinition")}function Iie(t,e,n){const a=this;return Gn(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function Rie(t){let n=(t||{}).singleTilde;const a={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}};function i(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},g=[["enter",f,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",p,l]],x=l.parser.constructs.insideSpan.null;x&&Is(g,g.length,0,GN(x,o.slice(u+1,c),l)),Is(g,g.length,0,[["exit",p,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Is(o,u-1,c-u+3,g),c=u+g.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,f=this.events;let p=0;return g;function g(b){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(b):(o.enter("strikethroughSequenceTemporary"),x(b))}function x(b){const j=sg(u);if(b===126)return p>1?c(b):(o.consume(b),p++,x);if(p<2&&!n)return c(b);const w=o.exit("strikethroughSequenceTemporary"),_=sg(b);return w._open=!_||_===2&&!!j,w._close=!j||j===2&&!!_,l(b)}}}class Lie{constructor(){this.map=[]}add(e,n,a){Fie(this,e,n,a)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const a=[];for(;n>0;)n-=1,a.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];a.push(e.slice()),e.length=0;let i=a.pop();for(;i;){for(const s of i)e.push(s);i=a.pop()}this.map.length=0}}function Fie(t,e,n,a){let i=0;if(!(n===0&&a.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...a);return}i+=1}t.map.push([e,n,a])}}function $ie(t,e){let n=!1;const a=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&a.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=a.length-1;a[s]=a[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return a}function zie(){return{flow:{null:{name:"table",tokenize:Bie,resolveAll:qie}}}}function Bie(t,e,n){const a=this;let i=0,s=0,o;return l;function l(U){let F=a.events.length-1;for(;F>-1;){const W=a.events[F][1].type;if(W==="lineEnding"||W==="linePrefix")F--;else break}const B=F>-1?a.events[F][1].type:null,V=B==="tableHead"||B==="tableRow"?P:c;return V===P&&a.parser.lazy[a.now().line]?n(U):V(U)}function c(U){return t.enter("tableHead"),t.enter("tableRow"),u(U)}function u(U){return U===124||(o=!0,s+=1),f(U)}function f(U){return U===null?n(U):Xt(U)?s>1?(s=0,a.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(U),t.exit("lineEnding"),x):n(U):Mn(U)?Gn(t,f,"whitespace")(U):(s+=1,o&&(o=!1,i+=1),U===124?(t.enter("tableCellDivider"),t.consume(U),t.exit("tableCellDivider"),o=!0,f):(t.enter("data"),p(U)))}function p(U){return U===null||U===124||kr(U)?(t.exit("data"),f(U)):(t.consume(U),U===92?g:p)}function g(U){return U===92||U===124?(t.consume(U),p):p(U)}function x(U){return a.interrupt=!1,a.parser.lazy[a.now().line]?n(U):(t.enter("tableDelimiterRow"),o=!1,Mn(U)?Gn(t,b,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):b(U))}function b(U){return U===45||U===58?w(U):U===124?(o=!0,t.enter("tableCellDivider"),t.consume(U),t.exit("tableCellDivider"),j):k(U)}function j(U){return Mn(U)?Gn(t,w,"whitespace")(U):w(U)}function w(U){return U===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(U),t.exit("tableDelimiterMarker"),_):U===45?(s+=1,_(U)):U===null||Xt(U)?A(U):k(U)}function _(U){return U===45?(t.enter("tableDelimiterFiller"),T(U)):k(U)}function T(U){return U===45?(t.consume(U),T):U===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(U),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C(U))}function C(U){return Mn(U)?Gn(t,A,"whitespace")(U):A(U)}function A(U){return U===124?b(U):U===null||Xt(U)?!o||i!==s?k(U):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(U)):k(U)}function k(U){return n(U)}function P(U){return t.enter("tableRow"),I(U)}function I(U){return U===124?(t.enter("tableCellDivider"),t.consume(U),t.exit("tableCellDivider"),I):U===null||Xt(U)?(t.exit("tableRow"),e(U)):Mn(U)?Gn(t,I,"whitespace")(U):(t.enter("data"),R(U))}function R(U){return U===null||U===124||kr(U)?(t.exit("data"),I(U)):(t.consume(U),U===92?q:R)}function q(U){return U===92||U===124?(t.consume(U),R):R(U)}}function qie(t,e){let n=-1,a=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,f,p;const g=new Lie;for(;++n<t.length;){const x=t[n],b=x[1];x[0]==="enter"?b.type==="tableHead"?(l=!1,c!==0&&(PR(g,e,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",u,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(a=!0,p=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",f,e]])),i=b.type==="tableDelimiterRow"?2:f?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(a=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=jj(g,e,s,i,void 0,p),s=[0,0,0,0]),o[2]=n)):b.type==="tableCellDivider"&&(a?a=!1:(s[1]!==0&&(o[0]=o[1],p=jj(g,e,s,i,void 0,p)),s=o,o=[s[1],n,0,0])):b.type==="tableHead"?(l=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],p=jj(g,e,s,i,n,p)):o[1]!==0&&(p=jj(g,e,o,i,n,p)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&PR(g,e,c,u,f),g.consume(e.events),n=-1;++n<e.events.length;){const x=e.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=$ie(e.events,n))}return t}function jj(t,e,n,a,i,s){const o=a===1?"tableHeader":a===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Am(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=Am(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=Am(e.events,n[2]),f=Am(e.events,n[3]),p={type:l,start:Object.assign({},u),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",p,e]]),a!==2){const g=e.events[n[2]],x=e.events[n[3]];if(g[1].end=Object.assign({},x[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,j=n[3]-n[2]-1;t.add(b,j,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return i!==void 0&&(s.end=Object.assign({},Am(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function PR(t,e,n,a,i){const s=[],o=Am(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),a.end=Object.assign({},o),s.push(["exit",a,e]),t.add(n+1,0,s)}function Am(t,e){const n=t[e],a=n[0]==="enter"?"start":"end";return n[1][a]}const Uie={name:"tasklistCheck",tokenize:Hie};function Vie(){return{text:{91:Uie}}}function Hie(t,e,n){const a=this;return i;function i(c){return a.previous!==null||!a._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return kr(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Xt(c)?e(c):Mn(c)?t.check({tokenize:Gie},e,n)(c):n(c)}}function Gie(t,e,n){return Gn(t,a,"whitespace");function a(i){return i===null?n(i):e(i)}}function Wie(t){return Cq([xie(),kie(),Rie(t),zie(),Vie()])}const Yie={};function pd(t){const e=this,n=t||Yie,a=e.data(),i=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),o=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);i.push(Wie(n)),s.push(pie()),o.push(mie(n))}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Kie,Qie;function Xie(){return{geminiUrl:Kie,vertexUrl:Qie}}function Jie(t,e,n){var a,i,s;if(!(!((a=t.httpOptions)===null||a===void 0)&&a.baseUrl)){const o=Xie();return t.vertexai?(i=o.vertexUrl)!==null&&i!==void 0?i:e:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lb{}function cn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(a,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function O(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let u=0;u<c.length;u++){const f=c[u];O(f,e.slice(s+1),n[u])}else for(const u of c)O(u,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];O(c[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const a=e[e.length-1],i=t[a];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else t[a]=n}function D(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const a=e[n];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(o=>D(o,e.slice(n+1))):void 0}else return}else t=t[a]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function g9(t,e){const n=Kr(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function y9(t,e){return Array.isArray(e)?e.map(n=>Sw(t,n)):[Sw(t,e)]}function Sw(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Zie(t,e){const n=Sw(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function ese(t,e){const n=Sw(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function DR(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function x9(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>DR(t,n)):[DR(t,e)]}function $E(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function OR(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function MR(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ls(t,e){if(e==null)throw new Error("ContentUnion is required");return $E(e)?e:{role:"user",parts:x9(t,e)}}function v9(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const a=ls(t,n);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(t.isVertexAI()){const n=ls(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ls(t,n)):[ls(t,e)]}function vd(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(OR(e)||MR(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ls(t,e)]}const n=[],a=[],i=$E(e[0]);for(const s of e){const o=$E(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)n.push(s);else{if(OR(s)||MR(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");a.push(s)}}return i||n.push({role:"user",parts:x9(t,a)}),n}function b9(t,e){return e}function j9(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function QN(t,e){return e}function XN(t,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function tse(t,e,n,a=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===a;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function bd(t,e){if(typeof e!="string")throw new Error("name must be a string");return tse(t,e,"cachedContents")}function w9(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function jd(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function nse(t){return t!=null&&typeof t=="object"&&"name"in t}function rse(t){return t!=null&&typeof t=="object"&&"video"in t}function ase(t){return t!=null&&typeof t=="object"&&"uri"in t}function N9(t,e){var n;let a;if(nse(e)&&(a=e.name),!(ase(e)&&(a=e.uri,a===void 0))&&!(rse(e)&&(a=(n=e.video)===null||n===void 0?void 0:n.uri,a===void 0))){if(typeof e=="string"&&(a=e),a===void 0)throw new Error("Could not extract file name from the provided input.");if(a.startsWith("https://")){const s=a.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${a}`);a=s[0]}else a.startsWith("files/")&&(a=a.split("files/")[1]);return a}}function S9(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function _9(t,e){for(const n of["models","tunedModels","publisherModels"])if(ise(e,n))return e[n];return[]}function ise(t,e){return t!==null&&typeof t=="object"&&e in t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sse(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function ose(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],sse(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function IR(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>ose(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function lse(){return{}}function cse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function use(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],cse(t,a)),n}function dse(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],lse());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],use(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function hse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function fse(t,e){const n={},a=D(e,["functionCallingConfig"]);if(a!=null&&O(n,["functionCallingConfig"],hse(t,a)),D(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function pse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);n!==void 0&&s!=null&&O(n,["expireTime"],s);const o=D(e,["displayName"]);n!==void 0&&o!=null&&O(n,["displayName"],o);const l=D(e,["contents"]);if(n!==void 0&&l!=null){let p=vd(t,l);Array.isArray(p)&&(p=p.map(g=>IR(t,g))),O(n,["contents"],p)}const c=D(e,["systemInstruction"]);n!==void 0&&c!=null&&O(n,["systemInstruction"],IR(t,ls(t,c)));const u=D(e,["tools"]);if(n!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>dse(t,g))),O(n,["tools"],p)}const f=D(e,["toolConfig"]);return n!==void 0&&f!=null&&O(n,["toolConfig"],fse(t,f)),a}function mse(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],g9(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],pse(t,i,n)),n}function gse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],bd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function yse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],bd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function xse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);return n!==void 0&&s!=null&&O(n,["expireTime"],s),a}function vse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],bd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],xse(t,i,n)),n}function bse(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function jse(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],bse(t,a,n)),n}function wse(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Nse(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],wse(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function RR(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Nse(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Sse(){return{}}function _se(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Cse(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],_se(t,a)),n}function Tse(){return{}}function kse(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function Ase(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],kse(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function Ese(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],Ase(t,a)),n}function Pse(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Sse());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],Cse(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],Tse());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],Ese(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const u=D(e,["functionDeclarations"]);return u!=null&&O(n,["functionDeclarations"],u),n}function Dse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function Ose(t,e){const n={},a=D(e,["latitude"]);a!=null&&O(n,["latitude"],a);const i=D(e,["longitude"]);return i!=null&&O(n,["longitude"],i),n}function Mse(t,e){const n={},a=D(e,["latLng"]);return a!=null&&O(n,["latLng"],Ose(t,a)),n}function Ise(t,e){const n={},a=D(e,["functionCallingConfig"]);a!=null&&O(n,["functionCallingConfig"],Dse(t,a));const i=D(e,["retrievalConfig"]);return i!=null&&O(n,["retrievalConfig"],Mse(t,i)),n}function Rse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);n!==void 0&&s!=null&&O(n,["expireTime"],s);const o=D(e,["displayName"]);n!==void 0&&o!=null&&O(n,["displayName"],o);const l=D(e,["contents"]);if(n!==void 0&&l!=null){let p=vd(t,l);Array.isArray(p)&&(p=p.map(g=>RR(t,g))),O(n,["contents"],p)}const c=D(e,["systemInstruction"]);n!==void 0&&c!=null&&O(n,["systemInstruction"],RR(t,ls(t,c)));const u=D(e,["tools"]);if(n!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>Pse(t,g))),O(n,["tools"],p)}const f=D(e,["toolConfig"]);return n!==void 0&&f!=null&&O(n,["toolConfig"],Ise(t,f)),a}function Lse(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],g9(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Rse(t,i,n)),n}function Fse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],bd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function $se(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],bd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function zse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);return n!==void 0&&s!=null&&O(n,["expireTime"],s),a}function Bse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],bd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],zse(t,i,n)),n}function qse(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function Use(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],qse(t,a,n)),n}function nw(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["model"]);s!=null&&O(n,["model"],s);const o=D(e,["createTime"]);o!=null&&O(n,["createTime"],o);const l=D(e,["updateTime"]);l!=null&&O(n,["updateTime"],l);const c=D(e,["expireTime"]);c!=null&&O(n,["expireTime"],c);const u=D(e,["usageMetadata"]);return u!=null&&O(n,["usageMetadata"],u),n}function Vse(){return{}}function Hse(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>nw(t,o))),O(n,["cachedContents"],s)}return n}function rw(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["model"]);s!=null&&O(n,["model"],s);const o=D(e,["createTime"]);o!=null&&O(n,["createTime"],o);const l=D(e,["updateTime"]);l!=null&&O(n,["updateTime"],l);const c=D(e,["expireTime"]);c!=null&&O(n,["expireTime"],c);const u=D(e,["usageMetadata"]);return u!=null&&O(n,["usageMetadata"],u),n}function Gse(){return{}}function Wse(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>rw(t,o))),O(n,["cachedContents"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var og;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(og||(og={}));class JN{constructor(e,n,a,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,a,i)}init(e,n,a){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};a?typeof a=="object"?o=Object.assign({},a):o=a:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var LR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(LR||(LR={}));var FR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(FR||(FR={}));var $R;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})($R||($R={}));var zR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(zR||(zR={}));var BR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(BR||(BR={}));var qR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qR||(qR={}));var UR;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(UR||(UR={}));var lg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"})(lg||(lg={}));var VR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY"})(VR||(VR={}));var HR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HR||(HR={}));var GR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(GR||(GR={}));var WR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(WR||(WR={}));var YR;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(YR||(YR={}));var md;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(md||(md={}));var KR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(KR||(KR={}));var zE;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zE||(zE={}));var QR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(QR||(QR={}));var XR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(XR||(XR={}));var JR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(JR||(JR={}));var ZR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(ZR||(ZR={}));var e4;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(e4||(e4={}));var t4;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(t4||(t4={}));var n4;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(n4||(n4={}));var r4;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(r4||(r4={}));var a4;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(a4||(a4={}));var i4;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(i4||(i4={}));var s4;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(s4||(s4={}));var o4;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(o4||(o4={}));var l4;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(l4||(l4={}));var c4;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(c4||(c4={}));var u4;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(u4||(u4={}));var d4;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(d4||(d4={}));var h4;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(h4||(h4={}));var f4;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(f4||(f4={}));class wj{get text(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const g of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,b]of Object.entries(g))x!=="text"&&x!=="thought"&&(b!==null||b!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,u+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&f.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,a,i,s,o,l,c,u;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,a,i,s,o,l,c,u;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class p4{}class m4{}class Yse{}class Kse{}class g4{}class y4{}class x4{}class Qse{}class v4{}class b4{}class j4{}class Xse{}class BE{constructor(e){const n={};for(const a of e.headers.entries())n[a[0]]=a[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Jse{}class Zse{}class eoe{get text(){var e,n,a;let i="",s=!1;const o=[];for(const l of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[c,u]of Object.entries(l))c!=="text"&&c!=="thought"&&u!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,i+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,a;let i="";const s=[];for(const o of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class toe extends Lb{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new JN(og.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(n),n)}async create(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Lse(this.apiClient,e);return l=cn("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>rw(this.apiClient,f))}else{const u=mse(this.apiClient,e);return l=cn("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>nw(this.apiClient,f))}}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Fse(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>rw(this.apiClient,f))}else{const u=gse(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>nw(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=$se(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Gse(),p=new b4;return Object.assign(p,f),p})}else{const u=yse(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Vse(),p=new b4;return Object.assign(p,f),p})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Bse(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>rw(this.apiClient,f))}else{const u=vse(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>nw(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Use(this.apiClient,e);return l=cn("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Wse(this.apiClient,f),g=new j4;return Object.assign(g,p),g})}else{const u=jse(this.apiClient,e);return l=cn("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Hse(this.apiClient,f),g=new j4;return Object.assign(g,p),g})}}}function w4(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],a=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fi(t){return this instanceof fi?(this.v=t,this):new fi(t)}function _w(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(x){return function(b){return Promise.resolve(b).then(x,p)}}function l(x,b){a[x]&&(i[x]=function(j){return new Promise(function(w,_){s.push([x,j,w,_])>1||c(x,j)})},b&&(i[x]=b(i[x])))}function c(x,b){try{u(a[x](b))}catch(j){g(s[0][3],j)}}function u(x){x.value instanceof fi?Promise.resolve(x.value.v).then(f,p):g(s[0][2],x)}function f(x){c("next",x)}function p(x){c("throw",x)}function g(x,b){x(b),s.shift(),s.length&&c(s[0][0],s[0][1])}}function qE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof w4=="function"?w4(t):t[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(s){n[s]=t[s]&&function(o){return new Promise(function(l,c){o=t[s](o),i(l,c,o.done,o.value)})}}function i(s,o,l,c){Promise.resolve(c).then(function(u){s({value:u,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function noe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:C9(n)}function C9(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function roe(t){if(t.length!==0){if(t[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function aoe(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let a=0,i=t[0];for(;a<n;)if(t[a].role==="user")i=t[a],a++;else{const s=[];let o=!0;for(;a<n&&t[a].role==="model";)s.push(t[a]),o&&!C9(t[a])&&(o=!1),a++;o&&(e.push(i),e.push(...s))}return e}class ioe{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new soe(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class soe{constructor(e,n,a,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=a,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),roe(s)}async sendMessage(e){var n;await this.sendPromise;const a=ls(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o;const c=(o=(s=(await i).candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=c?[c]:[];this.recordHistory(a,u)})(),await this.sendPromise,i}async sendMessageStream(e){var n;await this.sendPromise;const a=ls(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,a)}getHistory(e=!1){return e?aoe(this.history):this.history}processStreamResponse(e,n){var a,i;return _w(this,arguments,function*(){var o,l,c,u;const f=[];try{for(var p=!0,g=qE(e),x;x=yield fi(g.next()),o=x.done,!o;p=!0){u=x.value,p=!1;const b=u;if(noe(b)){const j=(i=(a=b.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content;j!==void 0&&f.push(j)}yield yield fi(b)}}catch(b){l={error:b}}finally{try{!p&&!o&&(c=g.return)&&(yield fi(c.call(g)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n){let a=[];n.length>0&&n.every(i=>i.role==="model")?a=n:a.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ooe(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function loe(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],ooe(t,a,n)),n}function coe(t,e){const n={},a=D(e,["details"]);a!=null&&O(n,["details"],a);const i=D(e,["message"]);i!=null&&O(n,["message"],i);const s=D(e,["code"]);return s!=null&&O(n,["code"],s),n}function uoe(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["mimeType"]);s!=null&&O(n,["mimeType"],s);const o=D(e,["sizeBytes"]);o!=null&&O(n,["sizeBytes"],o);const l=D(e,["createTime"]);l!=null&&O(n,["createTime"],l);const c=D(e,["expirationTime"]);c!=null&&O(n,["expirationTime"],c);const u=D(e,["updateTime"]);u!=null&&O(n,["updateTime"],u);const f=D(e,["sha256Hash"]);f!=null&&O(n,["sha256Hash"],f);const p=D(e,["uri"]);p!=null&&O(n,["uri"],p);const g=D(e,["downloadUri"]);g!=null&&O(n,["downloadUri"],g);const x=D(e,["state"]);x!=null&&O(n,["state"],x);const b=D(e,["source"]);b!=null&&O(n,["source"],b);const j=D(e,["videoMetadata"]);j!=null&&O(n,["videoMetadata"],j);const w=D(e,["error"]);return w!=null&&O(n,["error"],coe(t,w)),n}function doe(t,e){const n={},a=D(e,["file"]);a!=null&&O(n,["file"],uoe(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function hoe(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","file"],N9(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function foe(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","file"],N9(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function poe(t,e){const n={},a=D(e,["details"]);a!=null&&O(n,["details"],a);const i=D(e,["message"]);i!=null&&O(n,["message"],i);const s=D(e,["code"]);return s!=null&&O(n,["code"],s),n}function UE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["mimeType"]);s!=null&&O(n,["mimeType"],s);const o=D(e,["sizeBytes"]);o!=null&&O(n,["sizeBytes"],o);const l=D(e,["createTime"]);l!=null&&O(n,["createTime"],l);const c=D(e,["expirationTime"]);c!=null&&O(n,["expirationTime"],c);const u=D(e,["updateTime"]);u!=null&&O(n,["updateTime"],u);const f=D(e,["sha256Hash"]);f!=null&&O(n,["sha256Hash"],f);const p=D(e,["uri"]);p!=null&&O(n,["uri"],p);const g=D(e,["downloadUri"]);g!=null&&O(n,["downloadUri"],g);const x=D(e,["state"]);x!=null&&O(n,["state"],x);const b=D(e,["source"]);b!=null&&O(n,["source"],b);const j=D(e,["videoMetadata"]);j!=null&&O(n,["videoMetadata"],j);const w=D(e,["error"]);return w!=null&&O(n,["error"],poe(t,w)),n}function moe(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>UE(t,o))),O(n,["files"],s)}return n}function goe(){return{}}function yoe(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xoe extends Lb{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new JN(og.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>UE(this.apiClient,n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=loe(this.apiClient,e);return s=cn("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const u=moe(this.apiClient,c),f=new Xse;return Object.assign(f,u),f})}}async createInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=doe(this.apiClient,e);return s=cn("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=goe(),u=new Jse;return Object.assign(u,c),u})}}async get(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hoe(this.apiClient,e);return s=cn("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>UE(this.apiClient,c))}}async delete(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=foe(this.apiClient,e);return s=cn("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=yoe(),u=new Zse;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function voe(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function boe(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function joe(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],voe(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function woe(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],boe(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function Noe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>joe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Soe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>woe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function _oe(){return{}}function Coe(){return{}}function Toe(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function koe(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Aoe(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Toe(t,a)),n}function Eoe(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],koe(t,a)),n}function Poe(){return{}}function Doe(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function Ooe(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],Doe(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function Moe(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],Ooe(t,a)),n}function Ioe(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],_oe());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],Aoe(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function Roe(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Coe());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],Eoe(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],Poe());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],Moe(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const u=D(e,["functionDeclarations"]);return u!=null&&O(n,["functionDeclarations"],u),n}function Loe(t,e){const n={},a=D(e,["handle"]);if(a!=null&&O(n,["handle"],a),D(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function Foe(t,e){const n={},a=D(e,["handle"]);a!=null&&O(n,["handle"],a);const i=D(e,["transparent"]);return i!=null&&O(n,["transparent"],i),n}function N4(){return{}}function S4(){return{}}function $oe(t,e){const n={},a=D(e,["disabled"]);a!=null&&O(n,["disabled"],a);const i=D(e,["startOfSpeechSensitivity"]);i!=null&&O(n,["startOfSpeechSensitivity"],i);const s=D(e,["endOfSpeechSensitivity"]);s!=null&&O(n,["endOfSpeechSensitivity"],s);const o=D(e,["prefixPaddingMs"]);o!=null&&O(n,["prefixPaddingMs"],o);const l=D(e,["silenceDurationMs"]);return l!=null&&O(n,["silenceDurationMs"],l),n}function zoe(t,e){const n={},a=D(e,["disabled"]);a!=null&&O(n,["disabled"],a);const i=D(e,["startOfSpeechSensitivity"]);i!=null&&O(n,["startOfSpeechSensitivity"],i);const s=D(e,["endOfSpeechSensitivity"]);s!=null&&O(n,["endOfSpeechSensitivity"],s);const o=D(e,["prefixPaddingMs"]);o!=null&&O(n,["prefixPaddingMs"],o);const l=D(e,["silenceDurationMs"]);return l!=null&&O(n,["silenceDurationMs"],l),n}function Boe(t,e){const n={},a=D(e,["automaticActivityDetection"]);a!=null&&O(n,["automaticActivityDetection"],$oe(t,a));const i=D(e,["activityHandling"]);i!=null&&O(n,["activityHandling"],i);const s=D(e,["turnCoverage"]);return s!=null&&O(n,["turnCoverage"],s),n}function qoe(t,e){const n={},a=D(e,["automaticActivityDetection"]);a!=null&&O(n,["automaticActivityDetection"],zoe(t,a));const i=D(e,["activityHandling"]);i!=null&&O(n,["activityHandling"],i);const s=D(e,["turnCoverage"]);return s!=null&&O(n,["turnCoverage"],s),n}function Uoe(t,e){const n={},a=D(e,["targetTokens"]);return a!=null&&O(n,["targetTokens"],a),n}function Voe(t,e){const n={},a=D(e,["targetTokens"]);return a!=null&&O(n,["targetTokens"],a),n}function Hoe(t,e){const n={},a=D(e,["triggerTokens"]);a!=null&&O(n,["triggerTokens"],a);const i=D(e,["slidingWindow"]);return i!=null&&O(n,["slidingWindow"],Uoe(t,i)),n}function Goe(t,e){const n={},a=D(e,["triggerTokens"]);a!=null&&O(n,["triggerTokens"],a);const i=D(e,["slidingWindow"]);return i!=null&&O(n,["slidingWindow"],Voe(t,i)),n}function Woe(t,e,n){const a={},i=D(e,["generationConfig"]);n!==void 0&&i!=null&&O(n,["setup","generationConfig"],i);const s=D(e,["responseModalities"]);n!==void 0&&s!=null&&O(n,["setup","generationConfig","responseModalities"],s);const o=D(e,["temperature"]);n!==void 0&&o!=null&&O(n,["setup","generationConfig","temperature"],o);const l=D(e,["topP"]);n!==void 0&&l!=null&&O(n,["setup","generationConfig","topP"],l);const c=D(e,["topK"]);n!==void 0&&c!=null&&O(n,["setup","generationConfig","topK"],c);const u=D(e,["maxOutputTokens"]);n!==void 0&&u!=null&&O(n,["setup","generationConfig","maxOutputTokens"],u);const f=D(e,["mediaResolution"]);n!==void 0&&f!=null&&O(n,["setup","generationConfig","mediaResolution"],f);const p=D(e,["seed"]);n!==void 0&&p!=null&&O(n,["setup","generationConfig","seed"],p);const g=D(e,["speechConfig"]);n!==void 0&&g!=null&&O(n,["setup","generationConfig","speechConfig"],g);const x=D(e,["systemInstruction"]);n!==void 0&&x!=null&&O(n,["setup","systemInstruction"],Noe(t,ls(t,x)));const b=D(e,["tools"]);if(n!==void 0&&b!=null){let A=XN(t,b);Array.isArray(A)&&(A=A.map(k=>Ioe(t,QN(t,k)))),O(n,["setup","tools"],A)}const j=D(e,["sessionResumption"]);n!==void 0&&j!=null&&O(n,["setup","sessionResumption"],Loe(t,j));const w=D(e,["inputAudioTranscription"]);n!==void 0&&w!=null&&O(n,["setup","inputAudioTranscription"],N4());const _=D(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&O(n,["setup","outputAudioTranscription"],N4());const T=D(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&O(n,["setup","realtimeInputConfig"],Boe(t,T));const C=D(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&O(n,["setup","contextWindowCompression"],Hoe(t,C)),a}function Yoe(t,e,n){const a={},i=D(e,["generationConfig"]);n!==void 0&&i!=null&&O(n,["setup","generationConfig"],i);const s=D(e,["responseModalities"]);n!==void 0&&s!=null&&O(n,["setup","generationConfig","responseModalities"],s);const o=D(e,["temperature"]);n!==void 0&&o!=null&&O(n,["setup","generationConfig","temperature"],o);const l=D(e,["topP"]);n!==void 0&&l!=null&&O(n,["setup","generationConfig","topP"],l);const c=D(e,["topK"]);n!==void 0&&c!=null&&O(n,["setup","generationConfig","topK"],c);const u=D(e,["maxOutputTokens"]);n!==void 0&&u!=null&&O(n,["setup","generationConfig","maxOutputTokens"],u);const f=D(e,["mediaResolution"]);n!==void 0&&f!=null&&O(n,["setup","generationConfig","mediaResolution"],f);const p=D(e,["seed"]);n!==void 0&&p!=null&&O(n,["setup","generationConfig","seed"],p);const g=D(e,["speechConfig"]);n!==void 0&&g!=null&&O(n,["setup","generationConfig","speechConfig"],g);const x=D(e,["systemInstruction"]);n!==void 0&&x!=null&&O(n,["setup","systemInstruction"],Soe(t,ls(t,x)));const b=D(e,["tools"]);if(n!==void 0&&b!=null){let A=XN(t,b);Array.isArray(A)&&(A=A.map(k=>Roe(t,QN(t,k)))),O(n,["setup","tools"],A)}const j=D(e,["sessionResumption"]);n!==void 0&&j!=null&&O(n,["setup","sessionResumption"],Foe(t,j));const w=D(e,["inputAudioTranscription"]);n!==void 0&&w!=null&&O(n,["setup","inputAudioTranscription"],S4());const _=D(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&O(n,["setup","outputAudioTranscription"],S4());const T=D(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&O(n,["setup","realtimeInputConfig"],qoe(t,T));const C=D(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&O(n,["setup","contextWindowCompression"],Goe(t,C)),a}function Koe(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["setup","model"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Woe(t,i,n)),n}function Qoe(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["setup","model"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Yoe(t,i,n)),n}function Xoe(){return{}}function Joe(){return{}}function Zoe(){return{}}function ele(){return{}}function tle(t,e){const n={},a=D(e,["media"]);a!=null&&O(n,["mediaChunks"],y9(t,a));const i=D(e,["audio"]);i!=null&&O(n,["audio"],ese(t,i));const s=D(e,["audioStreamEnd"]);s!=null&&O(n,["audioStreamEnd"],s);const o=D(e,["video"]);o!=null&&O(n,["video"],Zie(t,o));const l=D(e,["text"]);return l!=null&&O(n,["text"],l),D(e,["activityStart"])!=null&&O(n,["activityStart"],Xoe()),D(e,["activityEnd"])!=null&&O(n,["activityEnd"],Zoe()),n}function nle(t,e){const n={},a=D(e,["media"]);if(a!=null&&O(n,["mediaChunks"],y9(t,a)),D(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=D(e,["audioStreamEnd"]);if(i!=null&&O(n,["audioStreamEnd"],i),D(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(D(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return D(e,["activityStart"])!=null&&O(n,["activityStart"],Joe()),D(e,["activityEnd"])!=null&&O(n,["activityEnd"],ele()),n}function rle(){return{}}function ale(){return{}}function ile(t,e){const n={},a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function sle(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function ole(t,e){const n={},a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],ile(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function lle(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],sle(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function cle(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>ole(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function ule(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>lle(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function _4(t,e){const n={},a=D(e,["text"]);a!=null&&O(n,["text"],a);const i=D(e,["finished"]);return i!=null&&O(n,["finished"],i),n}function C4(t,e){const n={},a=D(e,["text"]);a!=null&&O(n,["text"],a);const i=D(e,["finished"]);return i!=null&&O(n,["finished"],i),n}function dle(t,e){const n={},a=D(e,["modelTurn"]);a!=null&&O(n,["modelTurn"],cle(t,a));const i=D(e,["turnComplete"]);i!=null&&O(n,["turnComplete"],i);const s=D(e,["interrupted"]);s!=null&&O(n,["interrupted"],s);const o=D(e,["groundingMetadata"]);o!=null&&O(n,["groundingMetadata"],o);const l=D(e,["generationComplete"]);l!=null&&O(n,["generationComplete"],l);const c=D(e,["inputTranscription"]);c!=null&&O(n,["inputTranscription"],_4(t,c));const u=D(e,["outputTranscription"]);return u!=null&&O(n,["outputTranscription"],_4(t,u)),n}function hle(t,e){const n={},a=D(e,["modelTurn"]);a!=null&&O(n,["modelTurn"],ule(t,a));const i=D(e,["turnComplete"]);i!=null&&O(n,["turnComplete"],i);const s=D(e,["interrupted"]);s!=null&&O(n,["interrupted"],s);const o=D(e,["groundingMetadata"]);o!=null&&O(n,["groundingMetadata"],o);const l=D(e,["generationComplete"]);l!=null&&O(n,["generationComplete"],l);const c=D(e,["inputTranscription"]);c!=null&&O(n,["inputTranscription"],C4(t,c));const u=D(e,["outputTranscription"]);return u!=null&&O(n,["outputTranscription"],C4(t,u)),n}function fle(t,e){const n={},a=D(e,["id"]);a!=null&&O(n,["id"],a);const i=D(e,["args"]);i!=null&&O(n,["args"],i);const s=D(e,["name"]);return s!=null&&O(n,["name"],s),n}function ple(t,e){const n={},a=D(e,["args"]);a!=null&&O(n,["args"],a);const i=D(e,["name"]);return i!=null&&O(n,["name"],i),n}function mle(t,e){const n={},a=D(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>fle(t,s))),O(n,["functionCalls"],i)}return n}function gle(t,e){const n={},a=D(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>ple(t,s))),O(n,["functionCalls"],i)}return n}function yle(t,e){const n={},a=D(e,["ids"]);return a!=null&&O(n,["ids"],a),n}function xle(t,e){const n={},a=D(e,["ids"]);return a!=null&&O(n,["ids"],a),n}function Nj(t,e){const n={},a=D(e,["modality"]);a!=null&&O(n,["modality"],a);const i=D(e,["tokenCount"]);return i!=null&&O(n,["tokenCount"],i),n}function Sj(t,e){const n={},a=D(e,["modality"]);a!=null&&O(n,["modality"],a);const i=D(e,["tokenCount"]);return i!=null&&O(n,["tokenCount"],i),n}function vle(t,e){const n={},a=D(e,["promptTokenCount"]);a!=null&&O(n,["promptTokenCount"],a);const i=D(e,["cachedContentTokenCount"]);i!=null&&O(n,["cachedContentTokenCount"],i);const s=D(e,["responseTokenCount"]);s!=null&&O(n,["responseTokenCount"],s);const o=D(e,["toolUsePromptTokenCount"]);o!=null&&O(n,["toolUsePromptTokenCount"],o);const l=D(e,["thoughtsTokenCount"]);l!=null&&O(n,["thoughtsTokenCount"],l);const c=D(e,["totalTokenCount"]);c!=null&&O(n,["totalTokenCount"],c);const u=D(e,["promptTokensDetails"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(b=>Nj(t,b))),O(n,["promptTokensDetails"],x)}const f=D(e,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(b=>Nj(t,b))),O(n,["cacheTokensDetails"],x)}const p=D(e,["responseTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>Nj(t,b))),O(n,["responseTokensDetails"],x)}const g=D(e,["toolUsePromptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(b=>Nj(t,b))),O(n,["toolUsePromptTokensDetails"],x)}return n}function ble(t,e){const n={},a=D(e,["promptTokenCount"]);a!=null&&O(n,["promptTokenCount"],a);const i=D(e,["cachedContentTokenCount"]);i!=null&&O(n,["cachedContentTokenCount"],i);const s=D(e,["candidatesTokenCount"]);s!=null&&O(n,["responseTokenCount"],s);const o=D(e,["toolUsePromptTokenCount"]);o!=null&&O(n,["toolUsePromptTokenCount"],o);const l=D(e,["thoughtsTokenCount"]);l!=null&&O(n,["thoughtsTokenCount"],l);const c=D(e,["totalTokenCount"]);c!=null&&O(n,["totalTokenCount"],c);const u=D(e,["promptTokensDetails"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(j=>Sj(t,j))),O(n,["promptTokensDetails"],b)}const f=D(e,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(j=>Sj(t,j))),O(n,["cacheTokensDetails"],b)}const p=D(e,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(j=>Sj(t,j))),O(n,["responseTokensDetails"],b)}const g=D(e,["toolUsePromptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(j=>Sj(t,j))),O(n,["toolUsePromptTokensDetails"],b)}const x=D(e,["trafficType"]);return x!=null&&O(n,["trafficType"],x),n}function jle(t,e){const n={},a=D(e,["timeLeft"]);return a!=null&&O(n,["timeLeft"],a),n}function wle(t,e){const n={},a=D(e,["timeLeft"]);return a!=null&&O(n,["timeLeft"],a),n}function Nle(t,e){const n={},a=D(e,["newHandle"]);a!=null&&O(n,["newHandle"],a);const i=D(e,["resumable"]);i!=null&&O(n,["resumable"],i);const s=D(e,["lastConsumedClientMessageIndex"]);return s!=null&&O(n,["lastConsumedClientMessageIndex"],s),n}function Sle(t,e){const n={},a=D(e,["newHandle"]);a!=null&&O(n,["newHandle"],a);const i=D(e,["resumable"]);i!=null&&O(n,["resumable"],i);const s=D(e,["lastConsumedClientMessageIndex"]);return s!=null&&O(n,["lastConsumedClientMessageIndex"],s),n}function _le(t,e){const n={};D(e,["setupComplete"])!=null&&O(n,["setupComplete"],rle());const i=D(e,["serverContent"]);i!=null&&O(n,["serverContent"],dle(t,i));const s=D(e,["toolCall"]);s!=null&&O(n,["toolCall"],mle(t,s));const o=D(e,["toolCallCancellation"]);o!=null&&O(n,["toolCallCancellation"],yle(t,o));const l=D(e,["usageMetadata"]);l!=null&&O(n,["usageMetadata"],vle(t,l));const c=D(e,["goAway"]);c!=null&&O(n,["goAway"],jle(t,c));const u=D(e,["sessionResumptionUpdate"]);return u!=null&&O(n,["sessionResumptionUpdate"],Nle(t,u)),n}function Cle(t,e){const n={};D(e,["setupComplete"])!=null&&O(n,["setupComplete"],ale());const i=D(e,["serverContent"]);i!=null&&O(n,["serverContent"],hle(t,i));const s=D(e,["toolCall"]);s!=null&&O(n,["toolCall"],gle(t,s));const o=D(e,["toolCallCancellation"]);o!=null&&O(n,["toolCallCancellation"],xle(t,o));const l=D(e,["usageMetadata"]);l!=null&&O(n,["usageMetadata"],ble(t,l));const c=D(e,["goAway"]);c!=null&&O(n,["goAway"],wle(t,c));const u=D(e,["sessionResumptionUpdate"]);return u!=null&&O(n,["sessionResumptionUpdate"],Sle(t,u)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tle(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function kle(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Tle(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function ZN(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>kle(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Ale(t,e){const n={};if(D(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=D(e,["category"]);a!=null&&O(n,["category"],a);const i=D(e,["threshold"]);return i!=null&&O(n,["threshold"],i),n}function Ele(){return{}}function Ple(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Dle(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Ple(t,a)),n}function Ole(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Ele());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],Dle(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function Mle(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function Ile(t,e){const n={},a=D(e,["functionCallingConfig"]);if(a!=null&&O(n,["functionCallingConfig"],Mle(t,a)),D(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function Rle(t,e){const n={},a=D(e,["voiceName"]);return a!=null&&O(n,["voiceName"],a),n}function Lle(t,e){const n={},a=D(e,["prebuiltVoiceConfig"]);return a!=null&&O(n,["prebuiltVoiceConfig"],Rle(t,a)),n}function Fle(t,e){const n={},a=D(e,["voiceConfig"]);a!=null&&O(n,["voiceConfig"],Lle(t,a));const i=D(e,["languageCode"]);return i!=null&&O(n,["languageCode"],i),n}function $le(t,e){const n={},a=D(e,["includeThoughts"]);a!=null&&O(n,["includeThoughts"],a);const i=D(e,["thinkingBudget"]);return i!=null&&O(n,["thinkingBudget"],i),n}function zle(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],ZN(t,ls(t,i)));const s=D(e,["temperature"]);s!=null&&O(a,["temperature"],s);const o=D(e,["topP"]);o!=null&&O(a,["topP"],o);const l=D(e,["topK"]);l!=null&&O(a,["topK"],l);const c=D(e,["candidateCount"]);c!=null&&O(a,["candidateCount"],c);const u=D(e,["maxOutputTokens"]);u!=null&&O(a,["maxOutputTokens"],u);const f=D(e,["stopSequences"]);f!=null&&O(a,["stopSequences"],f);const p=D(e,["responseLogprobs"]);p!=null&&O(a,["responseLogprobs"],p);const g=D(e,["logprobs"]);g!=null&&O(a,["logprobs"],g);const x=D(e,["presencePenalty"]);x!=null&&O(a,["presencePenalty"],x);const b=D(e,["frequencyPenalty"]);b!=null&&O(a,["frequencyPenalty"],b);const j=D(e,["seed"]);j!=null&&O(a,["seed"],j);const w=D(e,["responseMimeType"]);w!=null&&O(a,["responseMimeType"],w);const _=D(e,["responseSchema"]);if(_!=null&&O(a,["responseSchema"],b9(t,_)),D(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(D(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=D(e,["safetySettings"]);if(n!==void 0&&T!=null){let U=T;Array.isArray(U)&&(U=U.map(F=>Ale(t,F))),O(n,["safetySettings"],U)}const C=D(e,["tools"]);if(n!==void 0&&C!=null){let U=XN(t,C);Array.isArray(U)&&(U=U.map(F=>Ole(t,QN(t,F)))),O(n,["tools"],U)}const A=D(e,["toolConfig"]);if(n!==void 0&&A!=null&&O(n,["toolConfig"],Ile(t,A)),D(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=D(e,["cachedContent"]);n!==void 0&&k!=null&&O(n,["cachedContent"],bd(t,k));const P=D(e,["responseModalities"]);P!=null&&O(a,["responseModalities"],P);const I=D(e,["mediaResolution"]);I!=null&&O(a,["mediaResolution"],I);const R=D(e,["speechConfig"]);if(R!=null&&O(a,["speechConfig"],Fle(t,j9(t,R))),D(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=D(e,["thinkingConfig"]);return q!=null&&O(a,["thinkingConfig"],$le(t,q)),a}function T4(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=vd(t,i);Array.isArray(o)&&(o=o.map(l=>ZN(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["generationConfig"],zle(t,s,n)),n}function Ble(t,e,n){const a={},i=D(e,["taskType"]);n!==void 0&&i!=null&&O(n,["requests[]","taskType"],i);const s=D(e,["title"]);n!==void 0&&s!=null&&O(n,["requests[]","title"],s);const o=D(e,["outputDimensionality"]);if(n!==void 0&&o!=null&&O(n,["requests[]","outputDimensionality"],o),D(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(D(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function qle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);i!=null&&O(n,["requests[]","content"],v9(t,i));const s=D(e,["config"]);s!=null&&O(n,["config"],Ble(t,s,n));const o=D(e,["model"]);return o!==void 0&&O(n,["requests[]","model"],Kr(t,o)),n}function Ule(t,e,n){const a={};if(D(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(D(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=D(e,["numberOfImages"]);n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i);const s=D(e,["aspectRatio"]);n!==void 0&&s!=null&&O(n,["parameters","aspectRatio"],s);const o=D(e,["guidanceScale"]);if(n!==void 0&&o!=null&&O(n,["parameters","guidanceScale"],o),D(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=D(e,["safetyFilterLevel"]);n!==void 0&&l!=null&&O(n,["parameters","safetySetting"],l);const c=D(e,["personGeneration"]);n!==void 0&&c!=null&&O(n,["parameters","personGeneration"],c);const u=D(e,["includeSafetyAttributes"]);n!==void 0&&u!=null&&O(n,["parameters","includeSafetyAttributes"],u);const f=D(e,["includeRaiReason"]);n!==void 0&&f!=null&&O(n,["parameters","includeRaiReason"],f);const p=D(e,["language"]);n!==void 0&&p!=null&&O(n,["parameters","language"],p);const g=D(e,["outputMimeType"]);n!==void 0&&g!=null&&O(n,["parameters","outputOptions","mimeType"],g);const x=D(e,["outputCompressionQuality"]);if(n!==void 0&&x!=null&&O(n,["parameters","outputOptions","compressionQuality"],x),D(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(D(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function Vle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],Ule(t,s,n)),n}function Hle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Gle(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);n!==void 0&&o!=null&&O(n,["_query","filter"],o);const l=D(e,["queryBase"]);return n!==void 0&&l!=null&&O(n,["_url","models_url"],S9(t,l)),a}function Wle(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Gle(t,a,n)),n}function Yle(t,e,n){const a={},i=D(e,["displayName"]);n!==void 0&&i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);n!==void 0&&s!=null&&O(n,["description"],s);const o=D(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&O(n,["defaultCheckpointId"],o),a}function Kle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Yle(t,i,n)),n}function Qle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Xle(t,e){const n={};if(D(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(D(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(D(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Jle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=vd(t,i);Array.isArray(o)&&(o=o.map(l=>ZN(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],Xle(t,s)),n}function Zle(t,e){const n={};if(D(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=D(e,["imageBytes"]);a!=null&&O(n,["bytesBase64Encoded"],jd(t,a));const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function ece(t,e,n){const a={},i=D(e,["numberOfVideos"]);if(n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i),D(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(D(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=D(e,["durationSeconds"]);if(n!==void 0&&s!=null&&O(n,["parameters","durationSeconds"],s),D(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=D(e,["aspectRatio"]);if(n!==void 0&&o!=null&&O(n,["parameters","aspectRatio"],o),D(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=D(e,["personGeneration"]);if(n!==void 0&&l!=null&&O(n,["parameters","personGeneration"],l),D(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=D(e,["negativePrompt"]);if(n!==void 0&&c!=null&&O(n,["parameters","negativePrompt"],c),D(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function tce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["image"]);s!=null&&O(n,["instances[0]","image"],Zle(t,s));const o=D(e,["config"]);return o!=null&&O(n,["config"],ece(t,o,n)),n}function nce(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function rce(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],nce(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function Ug(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>rce(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function ace(t,e){const n={},a=D(e,["featureSelectionPreference"]);return a!=null&&O(n,["featureSelectionPreference"],a),n}function ice(t,e){const n={},a=D(e,["method"]);a!=null&&O(n,["method"],a);const i=D(e,["category"]);i!=null&&O(n,["category"],i);const s=D(e,["threshold"]);return s!=null&&O(n,["threshold"],s),n}function sce(){return{}}function oce(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function lce(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],oce(t,a)),n}function cce(){return{}}function uce(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function dce(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],uce(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function hce(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],dce(t,a)),n}function T9(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],sce());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],lce(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],cce());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],hce(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const u=D(e,["functionDeclarations"]);return u!=null&&O(n,["functionDeclarations"],u),n}function fce(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function pce(t,e){const n={},a=D(e,["latitude"]);a!=null&&O(n,["latitude"],a);const i=D(e,["longitude"]);return i!=null&&O(n,["longitude"],i),n}function mce(t,e){const n={},a=D(e,["latLng"]);return a!=null&&O(n,["latLng"],pce(t,a)),n}function gce(t,e){const n={},a=D(e,["functionCallingConfig"]);a!=null&&O(n,["functionCallingConfig"],fce(t,a));const i=D(e,["retrievalConfig"]);return i!=null&&O(n,["retrievalConfig"],mce(t,i)),n}function yce(t,e){const n={},a=D(e,["voiceName"]);return a!=null&&O(n,["voiceName"],a),n}function xce(t,e){const n={},a=D(e,["prebuiltVoiceConfig"]);return a!=null&&O(n,["prebuiltVoiceConfig"],yce(t,a)),n}function vce(t,e){const n={},a=D(e,["voiceConfig"]);a!=null&&O(n,["voiceConfig"],xce(t,a));const i=D(e,["languageCode"]);return i!=null&&O(n,["languageCode"],i),n}function bce(t,e){const n={},a=D(e,["includeThoughts"]);a!=null&&O(n,["includeThoughts"],a);const i=D(e,["thinkingBudget"]);return i!=null&&O(n,["thinkingBudget"],i),n}function jce(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],Ug(t,ls(t,i)));const s=D(e,["temperature"]);s!=null&&O(a,["temperature"],s);const o=D(e,["topP"]);o!=null&&O(a,["topP"],o);const l=D(e,["topK"]);l!=null&&O(a,["topK"],l);const c=D(e,["candidateCount"]);c!=null&&O(a,["candidateCount"],c);const u=D(e,["maxOutputTokens"]);u!=null&&O(a,["maxOutputTokens"],u);const f=D(e,["stopSequences"]);f!=null&&O(a,["stopSequences"],f);const p=D(e,["responseLogprobs"]);p!=null&&O(a,["responseLogprobs"],p);const g=D(e,["logprobs"]);g!=null&&O(a,["logprobs"],g);const x=D(e,["presencePenalty"]);x!=null&&O(a,["presencePenalty"],x);const b=D(e,["frequencyPenalty"]);b!=null&&O(a,["frequencyPenalty"],b);const j=D(e,["seed"]);j!=null&&O(a,["seed"],j);const w=D(e,["responseMimeType"]);w!=null&&O(a,["responseMimeType"],w);const _=D(e,["responseSchema"]);_!=null&&O(a,["responseSchema"],b9(t,_));const T=D(e,["routingConfig"]);T!=null&&O(a,["routingConfig"],T);const C=D(e,["modelSelectionConfig"]);C!=null&&O(a,["modelConfig"],ace(t,C));const A=D(e,["safetySettings"]);if(n!==void 0&&A!=null){let W=A;Array.isArray(W)&&(W=W.map(G=>ice(t,G))),O(n,["safetySettings"],W)}const k=D(e,["tools"]);if(n!==void 0&&k!=null){let W=XN(t,k);Array.isArray(W)&&(W=W.map(G=>T9(t,QN(t,G)))),O(n,["tools"],W)}const P=D(e,["toolConfig"]);n!==void 0&&P!=null&&O(n,["toolConfig"],gce(t,P));const I=D(e,["labels"]);n!==void 0&&I!=null&&O(n,["labels"],I);const R=D(e,["cachedContent"]);n!==void 0&&R!=null&&O(n,["cachedContent"],bd(t,R));const q=D(e,["responseModalities"]);q!=null&&O(a,["responseModalities"],q);const U=D(e,["mediaResolution"]);U!=null&&O(a,["mediaResolution"],U);const F=D(e,["speechConfig"]);F!=null&&O(a,["speechConfig"],vce(t,j9(t,F)));const B=D(e,["audioTimestamp"]);B!=null&&O(a,["audioTimestamp"],B);const V=D(e,["thinkingConfig"]);return V!=null&&O(a,["thinkingConfig"],bce(t,V)),a}function k4(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=vd(t,i);Array.isArray(o)&&(o=o.map(l=>Ug(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["generationConfig"],jce(t,s,n)),n}function wce(t,e,n){const a={},i=D(e,["taskType"]);n!==void 0&&i!=null&&O(n,["instances[]","task_type"],i);const s=D(e,["title"]);n!==void 0&&s!=null&&O(n,["instances[]","title"],s);const o=D(e,["outputDimensionality"]);n!==void 0&&o!=null&&O(n,["parameters","outputDimensionality"],o);const l=D(e,["mimeType"]);n!==void 0&&l!=null&&O(n,["instances[]","mimeType"],l);const c=D(e,["autoTruncate"]);return n!==void 0&&c!=null&&O(n,["parameters","autoTruncate"],c),a}function Nce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);i!=null&&O(n,["instances[]","content"],v9(t,i));const s=D(e,["config"]);return s!=null&&O(n,["config"],wce(t,s,n)),n}function Sce(t,e,n){const a={},i=D(e,["outputGcsUri"]);n!==void 0&&i!=null&&O(n,["parameters","storageUri"],i);const s=D(e,["negativePrompt"]);n!==void 0&&s!=null&&O(n,["parameters","negativePrompt"],s);const o=D(e,["numberOfImages"]);n!==void 0&&o!=null&&O(n,["parameters","sampleCount"],o);const l=D(e,["aspectRatio"]);n!==void 0&&l!=null&&O(n,["parameters","aspectRatio"],l);const c=D(e,["guidanceScale"]);n!==void 0&&c!=null&&O(n,["parameters","guidanceScale"],c);const u=D(e,["seed"]);n!==void 0&&u!=null&&O(n,["parameters","seed"],u);const f=D(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&O(n,["parameters","safetySetting"],f);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const g=D(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&O(n,["parameters","includeSafetyAttributes"],g);const x=D(e,["includeRaiReason"]);n!==void 0&&x!=null&&O(n,["parameters","includeRaiReason"],x);const b=D(e,["language"]);n!==void 0&&b!=null&&O(n,["parameters","language"],b);const j=D(e,["outputMimeType"]);n!==void 0&&j!=null&&O(n,["parameters","outputOptions","mimeType"],j);const w=D(e,["outputCompressionQuality"]);n!==void 0&&w!=null&&O(n,["parameters","outputOptions","compressionQuality"],w);const _=D(e,["addWatermark"]);n!==void 0&&_!=null&&O(n,["parameters","addWatermark"],_);const T=D(e,["enhancePrompt"]);return n!==void 0&&T!=null&&O(n,["parameters","enhancePrompt"],T),a}function _ce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],Sce(t,s,n)),n}function gO(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["gcsUri"],a);const i=D(e,["imageBytes"]);i!=null&&O(n,["bytesBase64Encoded"],jd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Cce(t,e){const n={},a=D(e,["maskMode"]);a!=null&&O(n,["maskMode"],a);const i=D(e,["segmentationClasses"]);i!=null&&O(n,["maskClasses"],i);const s=D(e,["maskDilation"]);return s!=null&&O(n,["dilation"],s),n}function Tce(t,e){const n={},a=D(e,["controlType"]);a!=null&&O(n,["controlType"],a);const i=D(e,["enableControlImageComputation"]);return i!=null&&O(n,["computeControl"],i),n}function kce(t,e){const n={},a=D(e,["styleDescription"]);return a!=null&&O(n,["styleDescription"],a),n}function Ace(t,e){const n={},a=D(e,["subjectType"]);a!=null&&O(n,["subjectType"],a);const i=D(e,["subjectDescription"]);return i!=null&&O(n,["subjectDescription"],i),n}function Ece(t,e){const n={},a=D(e,["referenceImage"]);a!=null&&O(n,["referenceImage"],gO(t,a));const i=D(e,["referenceId"]);i!=null&&O(n,["referenceId"],i);const s=D(e,["referenceType"]);s!=null&&O(n,["referenceType"],s);const o=D(e,["maskImageConfig"]);o!=null&&O(n,["maskImageConfig"],Cce(t,o));const l=D(e,["controlImageConfig"]);l!=null&&O(n,["controlImageConfig"],Tce(t,l));const c=D(e,["styleImageConfig"]);c!=null&&O(n,["styleImageConfig"],kce(t,c));const u=D(e,["subjectImageConfig"]);return u!=null&&O(n,["subjectImageConfig"],Ace(t,u)),n}function Pce(t,e,n){const a={},i=D(e,["outputGcsUri"]);n!==void 0&&i!=null&&O(n,["parameters","storageUri"],i);const s=D(e,["negativePrompt"]);n!==void 0&&s!=null&&O(n,["parameters","negativePrompt"],s);const o=D(e,["numberOfImages"]);n!==void 0&&o!=null&&O(n,["parameters","sampleCount"],o);const l=D(e,["aspectRatio"]);n!==void 0&&l!=null&&O(n,["parameters","aspectRatio"],l);const c=D(e,["guidanceScale"]);n!==void 0&&c!=null&&O(n,["parameters","guidanceScale"],c);const u=D(e,["seed"]);n!==void 0&&u!=null&&O(n,["parameters","seed"],u);const f=D(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&O(n,["parameters","safetySetting"],f);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const g=D(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&O(n,["parameters","includeSafetyAttributes"],g);const x=D(e,["includeRaiReason"]);n!==void 0&&x!=null&&O(n,["parameters","includeRaiReason"],x);const b=D(e,["language"]);n!==void 0&&b!=null&&O(n,["parameters","language"],b);const j=D(e,["outputMimeType"]);n!==void 0&&j!=null&&O(n,["parameters","outputOptions","mimeType"],j);const w=D(e,["outputCompressionQuality"]);n!==void 0&&w!=null&&O(n,["parameters","outputOptions","compressionQuality"],w);const _=D(e,["editMode"]);n!==void 0&&_!=null&&O(n,["parameters","editMode"],_);const T=D(e,["baseSteps"]);return n!==void 0&&T!=null&&O(n,["parameters","editConfig","baseSteps"],T),a}function Dce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Ece(t,c))),O(n,["instances[0]","referenceImages"],l)}const o=D(e,["config"]);return o!=null&&O(n,["config"],Pce(t,o,n)),n}function Oce(t,e,n){const a={},i=D(e,["includeRaiReason"]);n!==void 0&&i!=null&&O(n,["parameters","includeRaiReason"],i);const s=D(e,["outputMimeType"]);n!==void 0&&s!=null&&O(n,["parameters","outputOptions","mimeType"],s);const o=D(e,["outputCompressionQuality"]);n!==void 0&&o!=null&&O(n,["parameters","outputOptions","compressionQuality"],o);const l=D(e,["numberOfImages"]);n!==void 0&&l!=null&&O(n,["parameters","sampleCount"],l);const c=D(e,["mode"]);return n!==void 0&&c!=null&&O(n,["parameters","mode"],c),a}function Mce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["image"]);i!=null&&O(n,["instances[0]","image"],gO(t,i));const s=D(e,["upscaleFactor"]);s!=null&&O(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=D(e,["config"]);return o!=null&&O(n,["config"],Oce(t,o,n)),n}function Ice(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Rce(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);n!==void 0&&o!=null&&O(n,["_query","filter"],o);const l=D(e,["queryBase"]);return n!==void 0&&l!=null&&O(n,["_url","models_url"],S9(t,l)),a}function Lce(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Rce(t,a,n)),n}function Fce(t,e,n){const a={},i=D(e,["displayName"]);n!==void 0&&i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);n!==void 0&&s!=null&&O(n,["description"],s);const o=D(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&O(n,["defaultCheckpointId"],o),a}function $ce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Fce(t,i,n)),n}function zce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Bce(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],Ug(t,ls(t,i)));const s=D(e,["tools"]);if(n!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>T9(t,c))),O(n,["tools"],l)}const o=D(e,["generationConfig"]);return n!==void 0&&o!=null&&O(n,["generationConfig"],o),a}function qce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=vd(t,i);Array.isArray(o)&&(o=o.map(l=>Ug(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],Bce(t,s,n)),n}function Uce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=vd(t,i);Array.isArray(o)&&(o=o.map(l=>Ug(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],s),n}function Vce(t,e,n){const a={},i=D(e,["numberOfVideos"]);n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i);const s=D(e,["outputGcsUri"]);n!==void 0&&s!=null&&O(n,["parameters","storageUri"],s);const o=D(e,["fps"]);n!==void 0&&o!=null&&O(n,["parameters","fps"],o);const l=D(e,["durationSeconds"]);n!==void 0&&l!=null&&O(n,["parameters","durationSeconds"],l);const c=D(e,["seed"]);n!==void 0&&c!=null&&O(n,["parameters","seed"],c);const u=D(e,["aspectRatio"]);n!==void 0&&u!=null&&O(n,["parameters","aspectRatio"],u);const f=D(e,["resolution"]);n!==void 0&&f!=null&&O(n,["parameters","resolution"],f);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const g=D(e,["pubsubTopic"]);n!==void 0&&g!=null&&O(n,["parameters","pubsubTopic"],g);const x=D(e,["negativePrompt"]);n!==void 0&&x!=null&&O(n,["parameters","negativePrompt"],x);const b=D(e,["enhancePrompt"]);return n!==void 0&&b!=null&&O(n,["parameters","enhancePrompt"],b),a}function Hce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["image"]);s!=null&&O(n,["instances[0]","image"],gO(t,s));const o=D(e,["config"]);return o!=null&&O(n,["config"],Vce(t,o,n)),n}function Gce(t,e){const n={},a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Wce(t,e){const n={},a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Gce(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function Yce(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Wce(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Kce(t,e){const n={},a=D(e,["citationSources"]);return a!=null&&O(n,["citations"],a),n}function Qce(t,e){const n={},a=D(e,["content"]);a!=null&&O(n,["content"],Yce(t,a));const i=D(e,["citationMetadata"]);i!=null&&O(n,["citationMetadata"],Kce(t,i));const s=D(e,["tokenCount"]);s!=null&&O(n,["tokenCount"],s);const o=D(e,["finishReason"]);o!=null&&O(n,["finishReason"],o);const l=D(e,["avgLogprobs"]);l!=null&&O(n,["avgLogprobs"],l);const c=D(e,["groundingMetadata"]);c!=null&&O(n,["groundingMetadata"],c);const u=D(e,["index"]);u!=null&&O(n,["index"],u);const f=D(e,["logprobsResult"]);f!=null&&O(n,["logprobsResult"],f);const p=D(e,["safetyRatings"]);return p!=null&&O(n,["safetyRatings"],p),n}function A4(t,e){const n={},a=D(e,["candidates"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Qce(t,c))),O(n,["candidates"],l)}const i=D(e,["modelVersion"]);i!=null&&O(n,["modelVersion"],i);const s=D(e,["promptFeedback"]);s!=null&&O(n,["promptFeedback"],s);const o=D(e,["usageMetadata"]);return o!=null&&O(n,["usageMetadata"],o),n}function Xce(t,e){const n={},a=D(e,["values"]);return a!=null&&O(n,["values"],a),n}function Jce(){return{}}function Zce(t,e){const n={},a=D(e,["embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Xce(t,o))),O(n,["embeddings"],s)}return D(e,["metadata"])!=null&&O(n,["metadata"],Jce()),n}function eue(t,e){const n={},a=D(e,["bytesBase64Encoded"]);a!=null&&O(n,["imageBytes"],jd(t,a));const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function k9(t,e){const n={},a=D(e,["safetyAttributes","categories"]);a!=null&&O(n,["categories"],a);const i=D(e,["safetyAttributes","scores"]);i!=null&&O(n,["scores"],i);const s=D(e,["contentType"]);return s!=null&&O(n,["contentType"],s),n}function tue(t,e){const n={},a=D(e,["_self"]);a!=null&&O(n,["image"],eue(t,a));const i=D(e,["raiFilteredReason"]);i!=null&&O(n,["raiFilteredReason"],i);const s=D(e,["_self"]);return s!=null&&O(n,["safetyAttributes"],k9(t,s)),n}function nue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>tue(t,o))),O(n,["generatedImages"],s)}const i=D(e,["positivePromptSafetyAttributes"]);return i!=null&&O(n,["positivePromptSafetyAttributes"],k9(t,i)),n}function rue(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["updateTime"]);return s!=null&&O(n,["updateTime"],s),n}function VE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);s!=null&&O(n,["description"],s);const o=D(e,["version"]);o!=null&&O(n,["version"],o);const l=D(e,["_self"]);l!=null&&O(n,["tunedModelInfo"],rue(t,l));const c=D(e,["inputTokenLimit"]);c!=null&&O(n,["inputTokenLimit"],c);const u=D(e,["outputTokenLimit"]);u!=null&&O(n,["outputTokenLimit"],u);const f=D(e,["supportedGenerationMethods"]);return f!=null&&O(n,["supportedActions"],f),n}function aue(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["_self"]);if(i!=null){let s=_9(t,i);Array.isArray(s)&&(s=s.map(o=>VE(t,o))),O(n,["models"],s)}return n}function iue(){return{}}function sue(t,e){const n={},a=D(e,["totalTokens"]);a!=null&&O(n,["totalTokens"],a);const i=D(e,["cachedContentTokenCount"]);return i!=null&&O(n,["cachedContentTokenCount"],i),n}function oue(t,e){const n={},a=D(e,["video","uri"]);a!=null&&O(n,["uri"],a);const i=D(e,["video","encodedVideo"]);i!=null&&O(n,["videoBytes"],jd(t,i));const s=D(e,["encoding"]);return s!=null&&O(n,["mimeType"],s),n}function lue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],oue(t,a)),n}function cue(t,e){const n={},a=D(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>lue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function uue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response","generateVideoResponse"]);return l!=null&&O(n,["response"],cue(t,l)),n}function due(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function hue(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],due(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function fue(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>hue(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function pue(t,e){const n={},a=D(e,["citations"]);return a!=null&&O(n,["citations"],a),n}function mue(t,e){const n={},a=D(e,["content"]);a!=null&&O(n,["content"],fue(t,a));const i=D(e,["citationMetadata"]);i!=null&&O(n,["citationMetadata"],pue(t,i));const s=D(e,["finishMessage"]);s!=null&&O(n,["finishMessage"],s);const o=D(e,["finishReason"]);o!=null&&O(n,["finishReason"],o);const l=D(e,["avgLogprobs"]);l!=null&&O(n,["avgLogprobs"],l);const c=D(e,["groundingMetadata"]);c!=null&&O(n,["groundingMetadata"],c);const u=D(e,["index"]);u!=null&&O(n,["index"],u);const f=D(e,["logprobsResult"]);f!=null&&O(n,["logprobsResult"],f);const p=D(e,["safetyRatings"]);return p!=null&&O(n,["safetyRatings"],p),n}function E4(t,e){const n={},a=D(e,["candidates"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>mue(t,f))),O(n,["candidates"],u)}const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["responseId"]);s!=null&&O(n,["responseId"],s);const o=D(e,["modelVersion"]);o!=null&&O(n,["modelVersion"],o);const l=D(e,["promptFeedback"]);l!=null&&O(n,["promptFeedback"],l);const c=D(e,["usageMetadata"]);return c!=null&&O(n,["usageMetadata"],c),n}function gue(t,e){const n={},a=D(e,["truncated"]);a!=null&&O(n,["truncated"],a);const i=D(e,["token_count"]);return i!=null&&O(n,["tokenCount"],i),n}function yue(t,e){const n={},a=D(e,["values"]);a!=null&&O(n,["values"],a);const i=D(e,["statistics"]);return i!=null&&O(n,["statistics"],gue(t,i)),n}function xue(t,e){const n={},a=D(e,["billableCharacterCount"]);return a!=null&&O(n,["billableCharacterCount"],a),n}function vue(t,e){const n={},a=D(e,["predictions[]","embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>yue(t,o))),O(n,["embeddings"],s)}const i=D(e,["metadata"]);return i!=null&&O(n,["metadata"],xue(t,i)),n}function bue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["gcsUri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["imageBytes"],jd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function A9(t,e){const n={},a=D(e,["safetyAttributes","categories"]);a!=null&&O(n,["categories"],a);const i=D(e,["safetyAttributes","scores"]);i!=null&&O(n,["scores"],i);const s=D(e,["contentType"]);return s!=null&&O(n,["contentType"],s),n}function yO(t,e){const n={},a=D(e,["_self"]);a!=null&&O(n,["image"],bue(t,a));const i=D(e,["raiFilteredReason"]);i!=null&&O(n,["raiFilteredReason"],i);const s=D(e,["_self"]);s!=null&&O(n,["safetyAttributes"],A9(t,s));const o=D(e,["prompt"]);return o!=null&&O(n,["enhancedPrompt"],o),n}function jue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>yO(t,o))),O(n,["generatedImages"],s)}const i=D(e,["positivePromptSafetyAttributes"]);return i!=null&&O(n,["positivePromptSafetyAttributes"],A9(t,i)),n}function wue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>yO(t,s))),O(n,["generatedImages"],i)}return n}function Nue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>yO(t,s))),O(n,["generatedImages"],i)}return n}function Sue(t,e){const n={},a=D(e,["endpoint"]);a!=null&&O(n,["name"],a);const i=D(e,["deployedModelId"]);return i!=null&&O(n,["deployedModelId"],i),n}function _ue(t,e){const n={},a=D(e,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["updateTime"]);return s!=null&&O(n,["updateTime"],s),n}function Cue(t,e){const n={},a=D(e,["checkpointId"]);a!=null&&O(n,["checkpointId"],a);const i=D(e,["epoch"]);i!=null&&O(n,["epoch"],i);const s=D(e,["step"]);return s!=null&&O(n,["step"],s),n}function HE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);s!=null&&O(n,["description"],s);const o=D(e,["versionId"]);o!=null&&O(n,["version"],o);const l=D(e,["deployedModels"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(x=>Sue(t,x))),O(n,["endpoints"],g)}const c=D(e,["labels"]);c!=null&&O(n,["labels"],c);const u=D(e,["_self"]);u!=null&&O(n,["tunedModelInfo"],_ue(t,u));const f=D(e,["defaultCheckpointId"]);f!=null&&O(n,["defaultCheckpointId"],f);const p=D(e,["checkpoints"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>Cue(t,x))),O(n,["checkpoints"],g)}return n}function Tue(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["_self"]);if(i!=null){let s=_9(t,i);Array.isArray(s)&&(s=s.map(o=>HE(t,o))),O(n,["models"],s)}return n}function kue(){return{}}function Aue(t,e){const n={},a=D(e,["totalTokens"]);return a!=null&&O(n,["totalTokens"],a),n}function Eue(t,e){const n={},a=D(e,["tokensInfo"]);return a!=null&&O(n,["tokensInfo"],a),n}function Pue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["uri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["videoBytes"],jd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Due(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Pue(t,a)),n}function Oue(t,e){const n={},a=D(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Due(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function Mue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response"]);return l!=null&&O(n,["response"],Oue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iue="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Rue(t,e,n){const a=new eoe;let i;if(n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),t.isVertexAI()){const s=Cle(t,i);Object.assign(a,s)}else{const s=_le(t,i);Object.assign(a,s)}e(a)}class Lue{constructor(e,n,a){this.apiClient=e,this.auth=n,this.webSocketFactory=a}async connect(e){var n,a,i,s;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const u=Bue(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u);else{const A=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${A}`}let f=()=>{};const p=new Promise(A=>{f=A}),g=e.callbacks,x=function(){var A;(A=g==null?void 0:g.onopen)===null||A===void 0||A.call(g),f({})},b=this.apiClient,j={onopen:x,onmessage:A=>{Rue(b,g.onmessage,A)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(A){},onclose:(a=g==null?void 0:g.onclose)!==null&&a!==void 0?a:function(A){}},w=this.webSocketFactory.create(c,zue(u),j);w.connect(),await p;let _=Kr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const A=this.apiClient.getProject(),k=this.apiClient.getLocation();_=`projects/${A}/locations/${k}/`+_}let T={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[md.AUDIO]}:e.config.responseModalities=[md.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=Qoe(this.apiClient,C):T=Koe(this.apiClient,C),delete T.config,w.send(JSON.stringify(T)),new $ue(w,this.apiClient)}}const Fue={turnComplete:!0};class $ue{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let a=[];try{a=vd(e,n.turns),e.isVertexAI()?a=a.map(i=>Ug(e,i)):a=a.map(i=>ZN(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:a,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let a=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?a=n.functionResponses:a=[n.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const s of a){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Iue)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},Fue),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:nle(this.apiClient,e)}:n={realtimeInput:tle(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function zue(t){const e={};return t.forEach((n,a)=>{e[a]=n}),e}function Bue(t){const e=new Headers;for(const[n,a]of Object.entries(t))e.append(n,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class que extends Lb{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(a=>{var i;let s;const o=[];if(a!=null&&a.generatedImages)for(const c of a.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s}:l={generatedImages:o},l}),this.list=async n=>{var a;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((a=o.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new JN(og.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const a={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(a.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async n=>{let a={numberOfImages:1,mode:"upscale"};n.config&&(a=Object.assign(Object.assign({},a),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:a};return await this.upscaleImageInternal(i)}}async generateContentInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=k4(this.apiClient,e);return l=cn("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=E4(this.apiClient,f),g=new wj;return Object.assign(g,p),g})}else{const u=T4(this.apiClient,e);return l=cn("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=A4(this.apiClient,f),g=new wj;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=k4(this.apiClient,e);l=cn("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(p){return _w(this,arguments,function*(){var g,x,b,j;try{for(var w=!0,_=qE(p),T;T=yield fi(_.next()),g=T.done,!g;w=!0){j=T.value,w=!1;const A=E4(f,yield fi(j.json())),k=new wj;Object.assign(k,A),yield yield fi(k)}}catch(C){x={error:C}}finally{try{!w&&!g&&(b=_.return)&&(yield fi(b.call(_)))}finally{if(x)throw x.error}}})})}else{const u=T4(this.apiClient,e);l=cn("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return _w(this,arguments,function*(){var g,x,b,j;try{for(var w=!0,_=qE(p),T;T=yield fi(_.next()),g=T.done,!g;w=!0){j=T.value,w=!1;const A=A4(f,yield fi(j.json())),k=new wj;Object.assign(k,A),yield yield fi(k)}}catch(C){x={error:C}}finally{try{!w&&!g&&(b=_.return)&&(yield fi(b.call(_)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Nce(this.apiClient,e);return l=cn("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=vue(this.apiClient,f),g=new p4;return Object.assign(g,p),g})}else{const u=qle(this.apiClient,e);return l=cn("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Zce(this.apiClient,f),g=new p4;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=_ce(this.apiClient,e);return l=cn("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=jue(this.apiClient,f),g=new m4;return Object.assign(g,p),g})}else{const u=Vle(this.apiClient,e);return l=cn("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=nue(this.apiClient,f),g=new m4;return Object.assign(g,p),g})}}async editImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Dce(this.apiClient,e);return s=cn("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const u=wue(this.apiClient,c),f=new Yse;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Mce(this.apiClient,e);return s=cn("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Nue(this.apiClient,c),f=new Kse;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Ice(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>HE(this.apiClient,f))}else{const u=Hle(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>VE(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Lce(this.apiClient,e);return l=cn("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Tue(this.apiClient,f),g=new g4;return Object.assign(g,p),g})}else{const u=Wle(this.apiClient,e);return l=cn("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=aue(this.apiClient,f),g=new g4;return Object.assign(g,p),g})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=$ce(this.apiClient,e);return l=cn("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>HE(this.apiClient,f))}else{const u=Kle(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>VE(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=zce(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=kue(),p=new y4;return Object.assign(p,f),p})}else{const u=Qle(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=iue(),p=new y4;return Object.assign(p,f),p})}}async countTokens(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=qce(this.apiClient,e);return l=cn("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Aue(this.apiClient,f),g=new x4;return Object.assign(g,p),g})}else{const u=Jle(this.apiClient,e);return l=cn("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=sue(this.apiClient,f),g=new x4;return Object.assign(g,p),g})}}async computeTokens(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Uce(this.apiClient,e);return s=cn("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Eue(this.apiClient,c),f=new Qse;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Hce(this.apiClient,e);return l=cn("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>Mue(this.apiClient,f))}else{const u=tce(this.apiClient,e);return l=cn("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>uue(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uue(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["_url","operationName"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Vue(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["_url","operationName"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Hue(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["operationName"],a);const i=D(e,["resourceName"]);i!=null&&O(n,["_url","resourceName"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],s),n}function Gue(t,e){const n={},a=D(e,["video","uri"]);a!=null&&O(n,["uri"],a);const i=D(e,["video","encodedVideo"]);i!=null&&O(n,["videoBytes"],jd(t,i));const s=D(e,["encoding"]);return s!=null&&O(n,["mimeType"],s),n}function Wue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Gue(t,a)),n}function Yue(t,e){const n={},a=D(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Wue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function Kue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response","generateVideoResponse"]);return l!=null&&O(n,["response"],Yue(t,l)),n}function Que(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["uri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["videoBytes"],jd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Xue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Que(t,a)),n}function Jue(t,e){const n={},a=D(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Xue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function P4(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response"]);return l!=null&&O(n,["response"],Jue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zue extends Lb{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,a=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;return a&&"httpOptions"in a&&(s=a.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:a})}async getVideosOperationInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Vue(this.apiClient,e);return l=cn("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>P4(this.apiClient,f))}else{const u=Uue(this.apiClient,e);return l=cn("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Kue(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Hue(this.apiClient,e);return s=cn("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>P4(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ede="Content-Type",tde="X-Server-Timeout",nde="User-Agent",rde="x-goog-api-client",ade="0.14.1",ide=`google-genai-sdk/${ade}`,sde="v1beta1",ode="v1beta",D4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class E9 extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class GE extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class lde{constructor(e){var n,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:sde,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:ode,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,a){const i=[this.getRequestUrlInternal(n)];return a&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))i.searchParams.append(o,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const a=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?a[i]=Object.assign(Object.assign({},a[i]),s):s!==void 0&&(a[i]=s);return a}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,a){if(n&&n.timeout||a){const i=new AbortController,s=i.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>i.abort(),n.timeout),a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await O4(i),new BE(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await O4(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return _w(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield fi(i.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(c);try{const p=JSON.parse(u);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),x=g.status,b=g.code,j=`got status: ${x}. ${JSON.stringify(p)}`;if(b>=400&&b<500)throw new E9(j);if(b>=500&&b<600)throw new GE(j)}}catch(p){const g=p;if(g.name==="ClientError"||g.name==="ServerError")throw p}o+=u;let f=o.match(D4);for(;f;){const p=f[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield fi(new BE(g)),o=o.slice(f[0].length),f=o.match(D4)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},n=ide+" "+this.clientOptions.userAgentExtra;return e[nde]=n,e[rde]=n,e[ede]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))n.append(a,i);e.timeout&&e.timeout>0&&n.append(tde,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var a;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const l=(a=n==null?void 0:n.mimeType)!==null&&a!==void 0?a:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var a;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:cn("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(a=o==null?void 0:o.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function O4(t){var e;if(t===void 0)throw new GE("response is undefined");if(!t.ok){const n=t.status,a=t.statusText;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=`got status: ${n} ${a}. ${JSON.stringify(i)}`;throw n>=400&&n<500?new E9(s):n>=500&&n<600?new GE(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function ude(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);return n!==void 0&&o!=null&&O(n,["_query","filter"],o),a}function dde(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],ude(t,a,n)),n}function hde(t,e){const n={},a=D(e,["textInput"]);a!=null&&O(n,["textInput"],a);const i=D(e,["output"]);return i!=null&&O(n,["output"],i),n}function fde(t,e){const n={};if(D(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=D(e,["examples"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>hde(t,s))),O(n,["examples","examples"],i)}return n}function pde(t,e,n){const a={};if(D(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=D(e,["tunedModelDisplayName"]);if(n!==void 0&&i!=null&&O(n,["displayName"],i),D(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=D(e,["epochCount"]);n!==void 0&&s!=null&&O(n,["tuningTask","hyperparameters","epochCount"],s);const o=D(e,["learningRateMultiplier"]);if(o!=null&&O(a,["tuningTask","hyperparameters","learningRateMultiplier"],o),D(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(D(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=D(e,["batchSize"]);n!==void 0&&l!=null&&O(n,["tuningTask","hyperparameters","batchSize"],l);const c=D(e,["learningRate"]);return n!==void 0&&c!=null&&O(n,["tuningTask","hyperparameters","learningRate"],c),a}function mde(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["trainingDataset"]);i!=null&&O(n,["tuningTask","trainingData"],fde(t,i));const s=D(e,["config"]);return s!=null&&O(n,["config"],pde(t,s,n)),n}function gde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function yde(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);return n!==void 0&&o!=null&&O(n,["_query","filter"],o),a}function xde(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],yde(t,a,n)),n}function vde(t,e,n){const a={},i=D(e,["gcsUri"]);if(n!==void 0&&i!=null&&O(n,["supervisedTuningSpec","trainingDatasetUri"],i),D(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function bde(t,e){const n={},a=D(e,["gcsUri"]);return a!=null&&O(n,["validationDatasetUri"],a),n}function jde(t,e,n){const a={},i=D(e,["validationDataset"]);n!==void 0&&i!=null&&O(n,["supervisedTuningSpec"],bde(t,i));const s=D(e,["tunedModelDisplayName"]);n!==void 0&&s!=null&&O(n,["tunedModelDisplayName"],s);const o=D(e,["description"]);n!==void 0&&o!=null&&O(n,["description"],o);const l=D(e,["epochCount"]);n!==void 0&&l!=null&&O(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=D(e,["learningRateMultiplier"]);n!==void 0&&c!=null&&O(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const u=D(e,["exportLastCheckpointOnly"]);n!==void 0&&u!=null&&O(n,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const f=D(e,["adapterSize"]);if(n!==void 0&&f!=null&&O(n,["supervisedTuningSpec","hyperParameters","adapterSize"],f),D(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(D(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return a}function wde(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["trainingDataset"]);i!=null&&O(n,["supervisedTuningSpec","trainingDatasetUri"],vde(t,i,n));const s=D(e,["config"]);return s!=null&&O(n,["config"],jde(t,s,n)),n}function Nde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["model"],a);const i=D(e,["name"]);return i!=null&&O(n,["endpoint"],i),n}function P9(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["state"]);i!=null&&O(n,["state"],w9(t,i));const s=D(e,["createTime"]);s!=null&&O(n,["createTime"],s);const o=D(e,["tuningTask","startTime"]);o!=null&&O(n,["startTime"],o);const l=D(e,["tuningTask","completeTime"]);l!=null&&O(n,["endTime"],l);const c=D(e,["updateTime"]);c!=null&&O(n,["updateTime"],c);const u=D(e,["description"]);u!=null&&O(n,["description"],u);const f=D(e,["baseModel"]);f!=null&&O(n,["baseModel"],f);const p=D(e,["_self"]);p!=null&&O(n,["tunedModel"],Nde(t,p));const g=D(e,["distillationSpec"]);g!=null&&O(n,["distillationSpec"],g);const x=D(e,["experiment"]);x!=null&&O(n,["experiment"],x);const b=D(e,["labels"]);b!=null&&O(n,["labels"],b);const j=D(e,["pipelineJob"]);j!=null&&O(n,["pipelineJob"],j);const w=D(e,["tunedModelDisplayName"]);return w!=null&&O(n,["tunedModelDisplayName"],w),n}function Sde(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>P9(t,o))),O(n,["tuningJobs"],s)}return n}function _de(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);return o!=null&&O(n,["error"],o),n}function Cde(t,e){const n={},a=D(e,["checkpointId"]);a!=null&&O(n,["checkpointId"],a);const i=D(e,["epoch"]);i!=null&&O(n,["epoch"],i);const s=D(e,["step"]);s!=null&&O(n,["step"],s);const o=D(e,["endpoint"]);return o!=null&&O(n,["endpoint"],o),n}function Tde(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],a);const i=D(e,["endpoint"]);i!=null&&O(n,["endpoint"],i);const s=D(e,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Cde(t,l))),O(n,["checkpoints"],o)}return n}function WE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["state"]);i!=null&&O(n,["state"],w9(t,i));const s=D(e,["createTime"]);s!=null&&O(n,["createTime"],s);const o=D(e,["startTime"]);o!=null&&O(n,["startTime"],o);const l=D(e,["endTime"]);l!=null&&O(n,["endTime"],l);const c=D(e,["updateTime"]);c!=null&&O(n,["updateTime"],c);const u=D(e,["error"]);u!=null&&O(n,["error"],u);const f=D(e,["description"]);f!=null&&O(n,["description"],f);const p=D(e,["baseModel"]);p!=null&&O(n,["baseModel"],p);const g=D(e,["tunedModel"]);g!=null&&O(n,["tunedModel"],Tde(t,g));const x=D(e,["supervisedTuningSpec"]);x!=null&&O(n,["supervisedTuningSpec"],x);const b=D(e,["tuningDataStats"]);b!=null&&O(n,["tuningDataStats"],b);const j=D(e,["encryptionSpec"]);j!=null&&O(n,["encryptionSpec"],j);const w=D(e,["partnerModelTuningSpec"]);w!=null&&O(n,["partnerModelTuningSpec"],w);const _=D(e,["distillationSpec"]);_!=null&&O(n,["distillationSpec"],_);const T=D(e,["experiment"]);T!=null&&O(n,["experiment"],T);const C=D(e,["labels"]);C!=null&&O(n,["labels"],C);const A=D(e,["pipelineJob"]);A!=null&&O(n,["pipelineJob"],A);const k=D(e,["tunedModelDisplayName"]);return k!=null&&O(n,["tunedModelDisplayName"],k),n}function kde(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>WE(t,o))),O(n,["tuningJobs"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ade extends Lb{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new JN(og.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const a=await this.tuneMldevInternal(n);let i="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?i=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(i=a.name.split("/operations/")[0]),{name:i,state:zE.JOB_STATE_QUEUED}}}}async getInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=gde(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>WE(this.apiClient,f))}else{const u=cde(this.apiClient,e);return l=cn("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>P9(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=xde(this.apiClient,e);return l=cn("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=kde(this.apiClient,f),g=new v4;return Object.assign(g,p),g})}else{const u=dde(this.apiClient,e);return l=cn("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Sde(this.apiClient,f),g=new v4;return Object.assign(g,p),g})}}async tuneInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=wde(this.apiClient,e);return s=cn("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>WE(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=mde(this.apiClient,e);return s=cn("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>_de(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ede{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Pde=1024*1024*8,Dde=3,Ode=1e3,Mde=2,SC="x-goog-upload-status";async function Ide(t,e,n){var a,i,s;let o=0,l=0,c=new BE(new Response),u="upload";for(o=t.size;l<o;){const p=Math.min(Pde,o-l),g=t.slice(l,l+p);l+p>=o&&(u+=", finalize");let x=0,b=Ode;for(;x<Dde&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((a=c==null?void 0:c.headers)===null||a===void 0)&&a[SC]));)x++,await Lde(b),b=b*Mde;if(l+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[SC])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[SC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Rde(t){return{size:t.size,type:t.type}}function Lde(t){return new Promise(e=>setTimeout(e,t))}class Fde{async upload(e,n,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ide(e,n,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rde(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $de{create(e,n,a){return new zde(e,n,a)}}class zde{constructor(e,n,a){this.url=e,this.headers=n,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M4="x-goog-api-key";class Bde{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(M4)===null&&e.append(M4,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qde="gl-node/";class xO{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const a=Jie(e,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const i=new Bde(this.apiKey);this.apiClient=new lde({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:qde+"web",uploader:new Fde,downloader:new Ede}),this.models=new que(this.apiClient),this.live=new Lue(this.apiClient,i,new $de),this.chats=new ioe(this.models,this.apiClient),this.caches=new toe(this.apiClient),this.files=new xoe(this.apiClient),this.operations=new Zue(this.apiClient),this.tunings=new Ade(this.apiClient)}}const Ude=()=>{const t=localStorage.getItem("currentClinicId");return t||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},vO=()=>localStorage.getItem("authToken");class Vde{constructor(){wr(this,"listeners",[]);wr(this,"activeRequests",0)}subscribe(e){return this.listeners.push(e),e(this.activeRequests>0),()=>this.unsubscribe(e)}unsubscribe(e){this.listeners=this.listeners.filter(n=>n!==e)}notify(e){e?this.activeRequests++:this.activeRequests=Math.max(0,this.activeRequests-1);const n=this.activeRequests>0;this.listeners.forEach(a=>a(n))}}const YE=new Vde,Hde="https://backend.newtons.in",Gde=()=>localStorage.getItem("authToken"),le=async(t,e={})=>{const n=Gde(),a={...e.headers};n&&(a.Authorization=`Bearer ${n}`),!(e.body instanceof FormData)&&!a["Content-Type"]&&(a["Content-Type"]="application/json");const i=a;let s=t.startsWith("/")?t:`/${t}`;s.startsWith("/api/")||(s=`/api${s}`);const o=`${Hde}${s}`;YE.notify(!0);try{console.log(`Making API call to: ${o}`);const l=await fetch(o,{...e,headers:i});if(l.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!l.ok){let c=`HTTP error! status: ${l.status}`;try{const u=await l.json();c=(u==null?void 0:u.message)||(u==null?void 0:u.error)||c}catch{}throw console.error(`API Error: ${l.status} ${l.statusText} - ${c}`),new Error(c)}return l}catch(l){throw l instanceof TypeError&&l.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",l):console.error("API Fetch Error:",l),l}finally{YE.notify(!1)}},_C="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Wde="models/gemini-3-flash-preview",Yde=`You are an intelligent Clinic Hub Assistant for a Clinic Management System. Your role is to help the Clinic Administrator or Doctor manage their clinic ecosystem efficiently.

You have access to the current state of the clinic settings and the staff list. You can perform actions to update these settings or manage staff members.

**Capabilities:**
1.  **View Settings & Staff:** User can ask about current charges, clinic details, or staff members. Answer based on the provided context.
2.  **Update Settings:** Change fees, clinic name, address, etc.
3.  **Manage Staff:** Add new staff members or update existing ones.
4.  **Voice AI Settings:** Update the \`voice_ai_language\` for the Live API Assistant. Available codes:
    -   India: \`en-US\` (English), \`hi-IN\` (Hindi), \`te-IN\` (Telugu), \`bn-IN\` (Bengali), \`mr-IN\` (Marathi), \`ta-IN\` (Tamil), \`gu-IN\` (Gujarati), \`kn-IN\` (Kannada), \`ml-IN\` (Malayalam), \`pa-IN\` (Punjabi)
    -   Global: \`es-ES\` (Spanish), \`fr-FR\` (French), \`de-DE\` (German), \`it-IT\` (Italian), \`pt-PT\` (Portuguese), \`ru-RU\` (Russian), \`ja-JP\` (Japanese), \`ko-KR\` (Korean), \`zh-CN\` (Chinese), \`ar-SA\` (Arabic).
5.  **Analyze Financials & Inventory:** Access the Analysis Dashboard to view revenue, expenses, and inventory movement. Set date ranges to filter data.
6.  **Manage Inventory:** Update pharmacy tokens (drugs) and lab tests. You will reference items by their **Serial Number** as provided in the context.
7.  **Purchase Management:** Search for distributors, select one, and build a purchase order by adding items. You can add multiple items at once. Editing items uses Serial Numbers.
8.  **Looping & Reasoning:** You should think step-by-step. If a user request involves multiple steps or if you need to check something after an action, you can continue the loop.
9.  **Follow-up:** If critical information is missing, ask the user.
10.  **Manage Custom Columns:** You can add or remove custom columns/fields for various entities (patients, drugs, lab_tests). Use the \`manage_custom_columns\` action.
11.  **Custom Fields Data:** When searching or updating items (like drugs or patients), pay attention to their \`custom_fields\`. You can update these fields using the \`update_drug\` (or similar) action by passing a \`custom_fields\` object with key-value pairs. Keys must match the \`key\` defined in the Clinic Settings.
12.  **Custom Tables:** You can create entirely new tables to track anything (e.g., "Gym Members", "Diet Plans"). Use \`create_custom_table\`. You can then add rows to these tables using \`add_table_row\` (requires Table ID) and update them with \`update_table_row\`. meaningful descriptions are helpful.
13.  **Dashboards:** You can create persistent custom dashboards using \`create_custom_dashboard\` or show a specialized temporary view using \`render_temporary_dashboard\`.
     - Use \`render_temporary_dashboard\` when the user asks to "show", "view", or "see" data (e.g., "Show me John's meds").
     - Use \`create_custom_dashboard\` when the user explicitly asks to "create a dashboard" or "save a view".
     - **Data Sources:** Use the provided "Dashboard Data Sources" context to know valid keys (e.g., \`api:patients\`, \`table:123\`).
       - **Advanced Features:** You can add **Charts** (bar, line, pie) and **Filters** to widgets.
       - **Filters (SERVER-SIDE):** Use the \`filters\` array in config. Filters are applied on the server for efficiency.
         - **Supported Operators:**
           - \`equals\` or \`eq\`: Exact match
           - \`neq\` or \`not_equals\`: Not equal
           - \`contains\` or \`like\`: Case-insensitive substring match
           - \`starts_with\`: Value starts with
           - \`ends_with\`: Value ends with
           - \`gt\` or \`greater_than\`: Greater than
           - \`gte\`: Greater than or equal
           - \`lt\` or \`less_than\`: Less than
           - \`lte\`: Less than or equal
           - \`in\`: Value in array (value should be array)
           - \`not_in\`: Value not in array
           - \`is_null\`: Field is null
           - \`is_not_null\`: Field is not null
           - \`between\`: Value between two values (value should be [min, max])
         - **Filterable Fields:** The "Dashboard Data Sources" in context includes a \`filterableFields\` list for each source. You **MUST** use these fields.
           - **Mixed Tables:** Sources like \`api:pharmacy-orders\` or \`api:lab-orders\` support filtering by associated **Patient** data using \`patient_name\`, \`patient_phone\`, and \`token\`.
         - **Example 1:** User: "Show pharmacy orders for John" -> Action: \`render_temporary_dashboard\` with widget config: \`filters: [{ field: 'patient_name', operator: 'contains', value: 'John' }]\`
         - **Example 2:** User: "Show orders for Token 123" -> \`filters: [{ field: 'token', operator: 'equals', value: 123 }]\`
         - **Example 3:** \`filters: [{ field: 'expiry_date', operator: 'lt', value: '2024-01-01' }, { field: 'stock', operator: 'gt', value: 0 }]\`
         - Smartly infer dates for "expired" (lt today), "expiring this week" (between today and next week), etc.
       - **Charts:** Set \`type: 'chart'\`. Config requires \`chartType\`, \`xAxisKey\` (category), \`dataKey\` (value).

**Interpretation Rules:**
- **Analysis Dates:** When the user asks for analysis (financial or inventory) for a specific time range (e.g., "last month", "yesterday"), you **MUST** include \`startDate\` and \`endDate\` in the \`navigate_to\` action for \`/dashboard/analysis\`.
- If the user says "add drug", "buy medicine", or "new stock", they **usually mean "Add Item to Purchase Order"** (use \`add_purchase_items\` or navigate to \`/dashboard/purchase\`).
- **Prerequisite:** If you are using ANY purchase tools (\`add_purchase_items\`, \`search_distributor_purchase\`, \`set_distributor_purchase\`, \`edit_purchase_items\`), you **MUST** include a \`navigate_to\` action with \`page: "/dashboard/purchase"\` as the **FIRST** action in your list, unless you are already on that page.
- **ONLY** use \`update_drug\` (create) if the user explicitly says "create new drug definition" or "add to master inventory".
- The correct route for purchasing is \`/dashboard/purchase\`.

- **Drug Name & Brand Handling (CRITICAL):**
  - "Name" refers to the **Composition Name** (or Generic Name).
  - "Brand Name" refers to the **Brand Name**.
  - **Auto-Computation:** If the user provides a *Brand Name* (e.g., "Tab Dolo 650"), you **MUST** automatically:
    1.  Infer the **Composition** (e.g., "Tab Paracetamol 650mg") and use it for the "name" field.
    2.  Use the provided brand for the "brand_name" field (e.g., "Dolo 650").
    3.  Infer the **pack size** if implied (e.g., "1x10") and use it for the "pack" field.
  - If the user provides only a Brand Name and you cannot confidently infer the Composition, you **MUST** use \`ask_followup_question\` to ask the user for the composition.
  - Apply this logic to both \`add_purchase_items\` and \`update_drug\` actions.

- **Inventory Navigation:** If you execute "update_drug" or "search_pharmacy_inventory", you **MUST** include a "navigate_to" action for "/dashboard/inventory". If you searched for or updated a specific term, append it as "?search=Term" (e.g. "/dashboard/inventory?search=Paracetamol").
- **Lab Navigation:** If you execute "update_lab_test", you **MUST** include a "navigate_to" action for "/lab-inventory", unless you are already on that page.

**Action Tools:**
You can perform the following actions. Return a JSON array of actions.

\`\`\`json
[
    {
        "action": "update_clinic_settings",
        "updates": {
            "admissionCharge": "number string",
            "perDayCharge": "number string",
            "otherCharges": "number string",
            "name": "string",
            "address": "string",
            "notes": "string",
            "logoUrl": "string",
            "upi_id": "string",
            "low_stock_threshold": number,
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "gemini_api_key": "string",
            "voice_ai_language": "string (e.g. 'en-US', 'te-IN')"
        }
    },
    {
        "action": "create_staff_member",
        "staff": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null
        }
    },
    {
        "action": "update_staff_member",
        "id": "string | number",
        "updates": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null,
            "active": boolean
        }
    },
    {
        "action": "set_analysis_dates",
        "startDate": "YYYY-MM-DD",
        "endDate": "YYYY-MM-DD"
    },
    {
        "action": "navigate_to",
        "page": "/dashboard/inventory" | "/lab-inventory" | "/dashboard/queue" | "/dashboard/staff" | "/dashboard/purchase" | "/dashboard/analysis" | "/dashboard/clinic-hub" | "/billing" | "/dashboard/patients",
        "section": "financial" | "inventory" | "string (optional)",
        "startDate": "YYYY-MM-DD (optional, for analysis page)",
        "endDate": "YYYY-MM-DD (optional, for analysis page)"
    },
    {
        "action": "highlight_section",
        "elementId": "string"
    },
    {
        "action": "refresh_analysis"
    },
    {
        "action": "ask_followup_question",
        "question": "string"
    },
    {
        "action": "search_pharmacy_inventory",
        "query": "string (name, brand, or composition)"
    },
    {
        "action": "update_drug",
        "id": "number",
        "updates": {
            "name": "string",
            "brand_name": "string",
            "description": "string",
            "mrp": "number (MRP)",
            "stock": "number",
            "pack": "string (e.g. strip, bottle)",
            "supplier": "string",
            "expiry_date": "YYYY-MM-DD",
            "rate": "number",
            "box_number": "string",
            "gst": "number",
            "margin": "number",
            "discount": "number",
            "batch": "string",
            "hsn_code": "string",
            "mfg": "string",
            "mfg": "string",
            "loose": "number",
            "custom_fields": "object { key: value } (Optional: Update custom field values)"
        }
    },
    {
        "action": "update_lab_test",
        "serial_number": 1,
        "updates": {
            "name": "string",
            "price": "number",
            "description": "string",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit }"
        }
    },
    {
        "action": "search_lab_inventory",
        "query": "string (test name or description)"
    },
    {
        "action": "create_lab_test",
        "test": {
            "name": "string",
            "price": "number",
            "description": "string (optional)",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit } (optional)"
        }
    },
    {
        "action": "search_distributor_purchase",
        "query": "string"
    },
    {
        "action": "set_distributor_purchase",
        "distributorId": "string"
    },
    {
        "action": "add_purchase_items",
        "items": [
            {
                "name": "string (Composition Name)",
                "brand_name": "string",
                "stock": "number (quantity)",
                "rate": "number (buying price)",
                "mrp": "number",
                "pack": "string",
                "expiry_date": "YYYY-MM-DD",
                "batch": "string",
                "discount": "number",
                "gst": "number"
            }
        ]
    },
    {
        "action": "edit_purchase_items",
        "updates": [
            {
                "serial_number": "number (The Row # from context)",
                "field": "string (name, stock, rate, etc.)",
                "value": "string | number"
            }
        ]
    },
    {
        "action": "end_task",
        "summary": "string"
    },
    {
        "action": "open_new_case",
        "name": "string (Patient Name)",
        "age": "number (optional)",
        "gender": "M | F | O (optional)",
        "phone": "string (optional)",
        "complaint": "string (The medical complaint/reason)"
    },
    {
        "action": "manage_custom_columns",
        "entity": "patients" | "drugs" | "lab_tests",
        "operation": "add" | "remove",
        "column": {
            "label": "string",
            "type": "text" | "number" | "date" | "boolean",
            "required": boolean
        }
    },
    {
        "action": "create_custom_table",
        "name": "string",
        "description": "string (optional)",
        "columns": [
            {
                "label": "string",
                "type": "text" | "number" | "date" | "boolean",
                "required": boolean
            }
        ]
    },
    {
        "action": "add_table_row",
        "tableId": "string (The ID of the custom table)",
        "data": "object { key: value } (Keys must match column keys derived from labels)"
    },
    {
        "tableId": "string",
        "recordId": "string (The ID of the row/record to update)",
        "data": "object { key: value } (Updates to apply)"
    },
    {
        "action": "create_custom_dashboard",
        "name": "string",
        "description": "string (optional)",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string (one of the keys from Dashboard Data Sources, e.g. api:patients, table:xyz)",
                "config": "object { columns?: string[], label?: string, chartType?: 'bar'|'line'|'pie', xAxisKey?: string, dataKey?: string, filters?: Array<{field, operator, value}> }"
            }
        ]
    },
    {
        "action": "render_temporary_dashboard",
        "title": "string",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string",
                "config": "object { columns?: [], label?, chartType?, xAxisKey?, dataKey?, filters?: [] }"
            }
        ]
    }
]
\`\`\`

**Navigation Reference:**
- **Pharmacy Inventory:** \`/dashboard/inventory\`
- **Lab Inventory:** \`/lab-inventory\`
- **Doctor Queue:** \`/dashboard/queue\`
- **Staff Management:** \`/dashboard/staff\`
- **All Patients:** \`/dashboard/patients\`
- **Billing:** \`/billing\`
- **Purchase Page:** \`/dashboard/purchase\`
- **Analysis:** \`/dashboard/analysis\`
- **Clinic Hub:** \`/dashboard/clinic-hub\`
\`\`\`

**Rules:**
-   **Always** return a JSON array as the last part of your response.
-   If the user's request is satisfied, use the \`end_task\` action with a summary of what was done.
-   If you need more info, use \`ask_followup_question\`.
-   If you perform an action (like updating settings), and there's nothing else to do *immediately* but you want to confirm it's done, you can return the action. The system will execute it and call you back with the result. Then you can \`end_task\`.
-   For \`create_staff_member\`, if password is not provided by user, generate a secure random password and mention it in the summary.
-   Update numeric strings as strings (e.g., "500.00").
-   **CRITICAL DO's and DON'Ts:**
    -   **DO NOT** fill in empty fields (like \`gemini_api_key\`, \`logoUrl\`, \`upi_id\`, etc.) with fake, placeholder, or example data.
    -   **ONLY** update fields that the user *intentionally* asked to change.
    -   **PRESERVE** existing values for any fields not explicitly mentioned in the user's request.
    -   If a field is empty and the user didn't ask to set it, **leave it empty**.
    -   Do not invent values.
`;async function Kde(){var n;if(!vO()&&_C)return _C;let e=null;try{const a=await le("/api/clinics/settings");if(a.ok){const i=await a.json();(n=i.gemini_api_key)!=null&&n.trim()&&(e=i.gemini_api_key.trim())}}catch(a){console.warn("Error fetching updated key",a)}if(e)return e;try{const a=await le("/api/global-settings/app_gemini_api_key");if(a.ok){const s=(await a.json()).value;if(s&&s.trim()!=="")return s.trim()}}catch(a){console.warn("Could not fetch global API key.",a)}return _C}async function Qde(t,e,n=[],a){var f,p,g,x,b,j;let i=(f=e.settings)==null?void 0:f.gemini_api_key;if(!i||!i.trim())try{i=await Kde()}catch(w){console.warn("Using fallback key or failing:",w)}if(!i)throw new Error("No Gemini API Key provided in settings or environment.");const s=new xO({apiKey:i}),o=[];o.push({role:"user",parts:[{text:Yde}]}),o.push({role:"model",parts:[{text:"Understood. I am ready to assist with Clinic Hub management."}]}),n.forEach(w=>{o.push({role:w.role,parts:[{text:w.text}]})});const u=[{text:`
    Context:
    ${`
    --- Current Clinic Context ---
    Settings: ${JSON.stringify(e.settings,null,2)}
    
    Custom Columns Configuration: ${JSON.stringify(e.settings.custom_columns_config||{},null,2)}

    Custom Tables (Available for adding/editing rows): ${JSON.stringify(e.customTables||[],null,2)}
    
    Dashboard Data Sources (Use these keys for widgets): ${JSON.stringify(e.dashboardDataSources||[],null,2)}

    --- DYNAMIC CONTEXT DATA (Configured tables with <200 rows) ---
    ${Object.entries(e.dynamicContextData||{}).map(([w,_])=>{const T=(_.data||[]).slice(0,50).map((C,A)=>({_sn:A+1,...C}));return`${_.label||w} (${_.count||0} records): ${JSON.stringify(T,null,2)}`}).join(`

`)}
    --- END DYNAMIC CONTEXT ---

    Staff List: ${JSON.stringify(e.staffList.map(w=>({id:w.id||w._id,name:w.name,role:w.role,email:w.email,active:w.active,opd_fee:w.opd_fee})),null,2)}
    
    Previous Action Results (if any): ${JSON.stringify(e.actionResults||[],null,2)}

    Analysis Data (if active): ${JSON.stringify(e.analysisData||{},null,2)}

    Pharmacy Inventory: ${e.pharmacyInventory?JSON.stringify(e.pharmacyInventory,null,2):"Not loaded. Use 'search_pharmacy_inventory' to find items."}

    Distributors List: ${JSON.stringify((e.distributors||[]).map(w=>({serial_number:w.serial_number,name:w.name,contact_person:w.contact_person,phone:w.phone,remainingBalance:w.remainingBalance})),null,2)}

    Lab Tests Inventory: ${JSON.stringify((e.labInventory||[]).map(w=>({serial:w.serial_number,name:w.name,price:w.price,description:w.description,default_parameters:w.default_parameters})),null,2)}

    Current Purchase Page Rows: ${JSON.stringify((e.purchaseRows||[]).map((w,_)=>({serial_number:_+1,name:w.name,stock:w.stock,rate:w.rate,mrp:w.mrp,net_value:(w.stock*w.rate).toFixed(2)})),null,2)}

    Current Application Page Context: ${e.pageContext?JSON.stringify(e.pageContext,null,2):"Unknown/General Dashboard"}
    `}

    User Query/Input:
    ${t}
    `}];if(a){const w=a.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");u.push({inlineData:{data:w,mimeType:"image/jpeg"}})}o.push({role:"user",parts:u});try{const w={model:Wde,contents:o,generationConfig:{temperature:.7,maxOutputTokens:2048,responseMimeType:"text/plain"}},_=await s.models.generateContentStream(w);let T="";for await(const C of _){const A=C;A.text&&typeof A.text=="function"?T+=A.text():(j=(b=(x=(g=(p=A.candidates)==null?void 0:p[0])==null?void 0:g.content)==null?void 0:x.parts)==null?void 0:b[0])!=null&&j.text&&(T+=A.candidates[0].content.parts[0].text)}if(!T)throw new Error("Empty response from AI");return T}catch(w){throw console.error("Gemini Interaction Error:",w),new Error("Failed to communicate with AI Assistant.")}}const bO=({settings:t,staffList:e,onSettingsUpdate:n,onStaffUpdate:a,onHighlight:i,enableDynamicContext:s=!1})=>{const o=Lt(),l=hs(),{setAnalysisDateRange:c,analysisData:u,analysisNavigate:f,refreshAnalysis:p,pageContext:g}=qN(),{setDistributors:x,setSelectedDistributor:b,setSearchTerm:j,addPurchaseRow:w,updatePurchaseRow:_,distributors:T,purchaseRows:C}=zB(),[A,k]=v.useState(""),P=v.useRef(u),I=v.useRef(C);v.useEffect(()=>{P.current=u},[u]),v.useEffect(()=>{I.current=C},[C]);const[R,q]=v.useState([]),[U,F]=v.useState([]),[B,V]=v.useState([]),[W,G]=v.useState(!1),[z,Y]=v.useState(null),Q=v.useRef(!1),K=v.useRef(0),$=5,ie=()=>{Q.current=!1,G(!1),V(Ae=>[...Ae,{role:"system",text:" Task stopped by user."}])},xe=Ae=>{const ue=new FileReader;ue.onloadend=()=>{Y(ue.result)},ue.readAsDataURL(Ae)},X=()=>{Y(null)},[Ie,$e]=v.useState(null),Be=()=>$e(null),Le=async(Ae,ue)=>{if(!Ie)return;const Te={name:Ae,description:ue,widgets:Ie.widgets};if(!(await le("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)})).ok)throw new Error("Failed to save dashboard");$e(null)},ce=async(Ae,ue,Te=[],oe)=>{var be,_e,Ne;if(Q.current){if(K.current+=1,K.current>$){V(ee=>[...ee,{role:"system",text:" Task limit reached. Stopping automatically."}]),G(!1),Q.current=!1;return}try{let ee=t,ge=e,de=[],ae=[],ne=[],se=[],je=[];try{const[we,Qe]=await Promise.all([le("/api/clinics/settings"),le("/staff")]);if(we.ok&&Qe.ok){const Xe=await we.json(),ut=await Qe.json(),[Ct,bt,ke,ot]=await Promise.all([le("/api/drugs"),le("/api/lab-tests"),le("/api/distributors"),le("/api/custom-tables"),le("/api/dashboards/data-sources")]);if(Ct.ok){const Tt=await Ct.json();de=Tt.drugs||Tt||[]}if(bt.ok){const Ue=(await bt.json()).map((jt,kt)=>({...jt,serial_number:kt+1}));ae=Ue,q(Ue)}if(ke.ok&&(ne=(await ke.json()||[]).map((Ue,jt)=>({...Ue,serial_number:jt+1}))),ot.ok){const Tt=await ot.json();se=Tt,F(Tt)}try{const Tt=await le("/api/dashboards/data-sources");Tt.ok&&(je=await Tt.json())}catch(Tt){console.warn("Failed to fetch dashboard sources",Tt)}ee={...Xe,admissionCharge:parseFloat(Xe.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(Xe.perDayCharge||0).toFixed(2),otherCharges:parseFloat(Xe.otherCharges||0).toFixed(2),aiMemory:Xe.aiMemory||"",clinicWideSystemPrompt:Xe.clinicWideSystemPrompt||"",gemini_api_key:Xe.gemini_api_key||"",low_stock_threshold:Xe.low_stock_threshold!==void 0&&Xe.low_stock_threshold!==null?String(Xe.low_stock_threshold):"10",name:Xe.name||"",logoUrl:Xe.logoUrl||"",upi_id:Xe.upi_id||"",address:Xe.address||"",notes:Xe.notes||"",clinic_id:Xe.clinic_id},ge=ut.map(Tt=>({...Tt,id:Tt._id||Tt.id}))}}catch(we){console.warn("Failed to fetch fresh context for AI loop, falling back to props",we)}let Ee={};if(s)try{const we=await le("/api/ai-context/data");we.ok&&(Ee=await we.json())}catch(we){console.warn("Failed to fetch dynamic AI context",we)}const J={settings:ee,staffList:ge,analysisData:P.current,pharmacyInventory:de.length>50?void 0:de,labInventory:ae,distributors:ne,purchaseRows:I.current,actionResults:Te,pageContext:g||void 0,customTables:se,dashboardDataSources:je,dynamicContextData:Ee},ye=ue.filter(we=>we.role!=="system"),me=await Qde(Ae,J,ye,oe);if(!Q.current)return;let he=[];try{const we=me.match(/\[[\s\S]*\]/);if(we)he=JSON.parse(we[0]);else{V(Qe=>[...Qe,{role:"model",text:me}]),G(!1),Q.current=!1;return}}catch(we){console.error("Failed to parse AI response",we),V(Qe=>[...Qe,{role:"model",text:"I'm having trouble processing that. Please try again."}]),G(!1),Q.current=!1;return}const De=[];let nt=[],Fe=[];for(const we of he){if(!Q.current)break;if(we.action==="end_task"){V(Qe=>[...Qe,{role:"model",text:we.summary}]),G(!1),Q.current=!1;return}if(we.action==="ask_followup_question"){V(Qe=>[...Qe,{role:"model",text:we.question}]),G(!1),Q.current=!1;return}try{if(we.action==="update_clinic_settings"){const Qe=we.updates;Object.keys(Qe).forEach(Ct=>nt.push(`setting-${Ct}`));const Xe={...ee,...Qe},ut={...Xe,admissionCharge:parseFloat(Xe.admissionCharge),perDayCharge:parseFloat(Xe.perDayCharge),otherCharges:parseFloat(Xe.otherCharges),low_stock_threshold:parseInt(Xe.low_stock_threshold)};await le("/api/clinics/settings",{method:"PUT",body:JSON.stringify(ut)}),n&&n(),De.push({action:"update_clinic_settings",status:"success"}),Fe.push({role:"system",text:" Updated clinic settings"})}if(we.action==="create_staff_member"&&(await le("/api/staff",{method:"POST",body:JSON.stringify({...we.staff,clinic_id:ee.clinic_id})}),a&&a(),De.push({action:"create_staff_member",status:"success",name:we.staff.name}),Fe.push({role:"system",text:` Created staff member: ${we.staff.name}`})),we.action==="update_staff_member"){const Qe=we.id;await le(`/api/staff/${Qe}`,{method:"PUT",body:JSON.stringify(we.updates)}),a&&a(),nt.push(`staff-member-${Qe}`),De.push({action:"update_staff_member",status:"success",id:Qe}),Fe.push({role:"system",text:" Updated staff member details"})}if(we.action==="set_analysis_dates"){const{startDate:Qe,endDate:Xe}=we;c({startDate:new Date(Qe),endDate:new Date(Xe)}),De.push({action:"set_analysis_dates",status:"success",startDate:Qe,endDate:Xe}),Fe.push({role:"system",text:` Set analysis dates: ${Qe} to ${Xe}`})}if(we.action==="navigate_to"){let Qe=we.page;if(we.page&&we.page.includes("analysis")&&we.startDate&&we.endDate){const Xe=Qe.includes("?")?"&":"?";Qe=`${Qe}${Xe}startDate=${we.startDate}&endDate=${we.endDate}`}else we.page&&we.page.includes("analysis")&&((be=P.current)!=null&&be.startDate)&&((_e=P.current)!=null&&_e.endDate);o(Qe),we.section&&setTimeout(()=>f(we.section),500),De.push({action:"navigate_to",status:"success",page:Qe}),Fe.push({role:"system",text:` Navigated to ${Qe}`})}if(we.action==="highlight_section"&&(nt.push(we.elementId),De.push({action:"highlight_section",status:"success",id:we.elementId})),we.action==="refresh_analysis"){Fe.push({role:"system",text:" Refreshing analysis data..."});const Qe=await p();Qe?(P.current=Qe,De.push({action:"refresh_analysis",status:"success",summary:"Data refreshed successfully"}),Fe.push({role:"system",text:" Analysis data refreshed"})):(De.push({action:"refresh_analysis",status:"error",error:"No data returned"}),Fe.push({role:"system",text:" Failed to refresh analysis data"}))}if(we.action==="search_pharmacy_inventory"){const Qe=we.query.toLowerCase(),Xe=de.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Qe)||Ct.brand_name&&Ct.brand_name.toLowerCase().includes(Qe)||Ct.description&&Ct.description.toLowerCase().includes(Qe)),ut=Xe.slice(0,10);De.push({action:"search_pharmacy_inventory",status:"success",count:Xe.length,results:ut}),Xe.length>0?Fe.push({role:"system",text:` Found ${Xe.length} matches for "${we.query}". Showing top ${ut.length}.`}):Fe.push({role:"system",text:` No matches found for "${we.query}"`})}if(we.action==="update_drug"){const Qe=we.id;try{const Xe=de.find(bt=>bt.id===Qe);if(!Xe)throw new Error(`Drug with ID ${Qe} not found.`);const ut={...we.updates};ut.custom_fields&&(ut.custom_fields={...Xe.custom_fields||{},...ut.custom_fields});const Ct={...Xe,...ut};await le(`/api/drugs/${Qe}`,{method:"PUT",body:JSON.stringify(Ct)}),De.push({action:"update_drug",status:"success",id:Qe,updates:we.updates}),Fe.push({role:"system",text:` Updated drug: ${Xe.name}`}),$e({title:`Updated: ${Xe.name}`,widgets:[{id:"edited-drug",type:"table",title:`Drug Updated: ${Xe.name}`,dataSource:"api:drugs",config:{filters:[{field:"id",operator:"equals",value:Qe}],columns:["name","brand_name","stock","mrp","expiry_date","pack"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Xe){De.push({action:"update_drug",status:"error",error:Xe.message}),Fe.push({role:"system",text:` Failed to update drug: ${Xe.message}`})}}if(we.action==="update_lab_test"){const Qe=ae.find(Xe=>Xe.serial_number===we.serial_number);if(Qe){const Xe={...Qe,...we.updates};await le(`/api/lab-tests/${Qe.id}`,{method:"PUT",body:JSON.stringify(Xe)}),De.push({action:"update_lab_test",status:"success",item:Qe.name}),Fe.push({role:"system",text:` Updated lab test: ${Qe.name}`}),$e({title:`Updated: ${Qe.name}`,widgets:[{id:"edited-lab-test",type:"table",title:`Lab Test Updated: ${Qe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Qe.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}else De.push({action:"update_lab_test",status:"error",error:`Test with serial ${we.serial_number} not found`}),Fe.push({role:"system",text:` Lab test with serial ${we.serial_number} not found`})}if(we.action==="search_lab_inventory"){const Qe=we.query.toLowerCase(),Xe=ae.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Qe)||Ct.description&&Ct.description.toLowerCase().includes(Qe)),ut=Xe.slice(0,10);De.push({action:"search_lab_inventory",status:"success",count:Xe.length,results:ut.map(Ct=>({serial_number:Ct.serial_number,id:Ct.id,name:Ct.name,price:Ct.price,description:Ct.description}))}),Xe.length>0?Fe.push({role:"system",text:` Found ${Xe.length} lab tests for "${we.query}". Showing top ${ut.length}.`}):Fe.push({role:"system",text:` No lab tests found for "${we.query}"`})}if(we.action==="create_lab_test")try{const Qe=we.test,Xe={name:Qe.name,price:parseFloat(Qe.price)||0,description:Qe.description||"",default_parameters:Qe.default_parameters||[]},ut=await le("/api/lab-tests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)});if(!ut.ok){const bt=await ut.json();throw new Error(bt.message||"Failed to create lab test")}const Ct=await ut.json();De.push({action:"create_lab_test",status:"success",id:Ct.id,name:Qe.name}),Fe.push({role:"system",text:` Created lab test: ${Qe.name}`}),$e({title:`Created: ${Qe.name}`,widgets:[{id:"created-lab-test",type:"table",title:`New Lab Test: ${Qe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Ct.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Qe){De.push({action:"create_lab_test",status:"error",error:Qe.message}),Fe.push({role:"system",text:` Failed to create lab test: ${Qe.message}`})}if(we.action==="search_distributor_purchase"){const Qe=we.query,Xe=await le(`/api/distributors?search=${encodeURIComponent(Qe)}`);if(Xe.ok){const ut=await Xe.json();x(ut),j(Qe),De.push({action:"search_distributor_purchase",status:"success",count:ut.length,results:ut}),Fe.push({role:"system",text:` Found ${ut.length} distributors for "${Qe}"`})}else De.push({action:"search_distributor_purchase",status:"error",error:Xe.statusText}),Fe.push({role:"system",text:" Failed to search distributors"})}if(we.action==="set_distributor_purchase"){const Qe=we.distributorId;let Xe=T.find(ut=>ut.id===Qe);Xe?(b(Xe),j(Xe.name),De.push({action:"set_distributor_purchase",status:"success",distributor:Xe.name}),Fe.push({role:"system",text:` Selected distributor: ${Xe.name}`})):(De.push({action:"set_distributor_purchase",status:"error",error:"Distributor not found in current search results. Please search first."}),Fe.push({role:"system",text:" Distributor not found. Please search first."}))}if(we.action==="add_purchase_items"){const Qe=we.items;let Xe=0;Qe.forEach(ut=>{const bt={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:ut.name||"",composition:ut.composition||"",description:ut.description||"",mrp:ut.mrp||0,stock:ut.stock||0,pack:ut.pack||"",supplier:"",expiry_date:ut.expiry_date||"",rate:ut.rate||0,box_number:ut.box_number||"",gst:ut.gst||0,margin:ut.margin||0,discount:ut.discount||0,brand_name:ut.brand_name||"",batch:ut.batch||"",hsn_code:ut.hsn_code||"",mfg:ut.mfg||"",loose:ut.loose||0,last_updated:"",created_at:""};w(bt),Xe++}),De.push({action:"add_purchase_items",status:"success",count:Xe}),Fe.push({role:"system",text:` Added ${Xe} items to purchase list`})}if(we.action==="edit_purchase_items"){const Qe=we.updates;let Xe=0;const ut=I.current||[];Qe.forEach(Ct=>{if(Ct.serial_number){const bt=Ct.serial_number-1,ke=ut[bt];ke&&ke.id?(_(ke.id,{[Ct.field]:Ct.value}),Xe++):(console.warn(`Row with serial number ${Ct.serial_number} not found.`),Fe.push({role:"system",text:` Row #${Ct.serial_number} not found.`}))}}),De.push({action:"edit_purchase_items",status:"success",count:Xe}),Fe.push({role:"system",text:` Updated ${Xe} items`})}if(we.action==="open_new_case"){const{name:Qe,age:Xe,gender:ut,complaint:Ct,phone:bt}=we;try{const ke=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Qe||"New Patient",age:Xe||null,gender:ut||null,phone:bt||null,address:null})});if(!ke.ok){const kt=await ke.json().catch(()=>({}));throw ke.status===403&&((Ne=kt.message)!=null&&Ne.includes("Patient limit"))?new Error(`Patient limit reached: ${kt.message}`):new Error(kt.message||"Failed to create patient")}const ot=await ke.json();if(!ot||!ot.id)throw new Error("Created patient has no ID");const Tt=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:ot.id,complaint:Ct||"New Case"})});if(!Tt.ok)throw new Error("Failed to create queue entry");const Ue=await Tt.json(),jt=ot.id;jt&&(l.prefetchQuery({queryKey:Wt.patients.context(jt),queryFn:()=>le(`/api/patients/${jt}/context`).then(kt=>kt.json()),staleTime:1e3*60*5}),l.prefetchQuery({queryKey:Wt.patientDebts.balance(jt),queryFn:()=>le(`/api/patient-debts/${jt}/balance`).then(kt=>kt.json()),staleTime:1e3*60}),l.prefetchQuery({queryKey:Wt.queue.latest(jt),queryFn:()=>le(`/api/queue/patient/${jt}/latest`).then(kt=>kt.json()),staleTime:1e3*5})),o(`/dashboard/edit-complaint/${Ue.id}`,{state:{initialComplaint:Ct}}),De.push({action:"open_new_case",status:"success",patientId:ot.id,queueId:Ue.id}),Fe.push({role:"system",text:` Opened new case for ${Qe}`}),G(!1),Q.current=!1;return}catch(ke){ke.message.includes("Patient limit")&&(o("/start-clinic-subscription"),Fe.push({role:"system",text:" Patient limit reached. Redirecting to subscription."})),De.push({action:"open_new_case",status:"error",error:ke.message}),Fe.push({role:"system",text:` Failed to open new case: ${ke.message}`})}}if(we.action==="manage_custom_columns"){const{entity:Qe,operation:Xe,column:ut}=we,Ct=ee.custom_columns_config||{drugs:[],patients:[],lab_tests:[]};let ke=[...Ct[Qe]||[]];if(Xe==="add"){const Tt=ut.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke.some(Ue=>Ue.key===Tt)||ke.push({...ut,key:Tt})}else if(Xe==="remove"){const Tt=ut.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke=ke.filter(Ue=>Ue.key!==Tt&&Ue.label!==ut.label)}const ot={...Ct,[Qe]:ke};await le("/api/clinics/settings",{method:"PUT",body:JSON.stringify({...ee,custom_columns_config:ot})}),n&&n(),De.push({action:"manage_custom_columns",status:"success",entity:Qe,operation:Xe,column:ut.label}),Fe.push({role:"system",text:` ${Xe==="add"?"Added":"Removed"} custom column '${ut.label}' for ${Qe}`})}if(we.action==="create_custom_table"){const{name:Qe,description:Xe,columns:ut}=we,Ct=ut.map(ot=>({...ot,key:ot.label.toLowerCase().replace(/[^a-z0-9]/g,"_")})),bt=await le("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Qe,description:Xe,columns:Ct})});if(!bt.ok)throw new Error("Failed to create table");const ke=await bt.json();F(ot=>[...ot,ke]),De.push({action:"create_custom_table",status:"success",tableId:ke.id}),Fe.push({role:"system",text:` Created custom table: ${Qe}`})}if(we.action==="add_table_row"){const{tableId:Qe,data:Xe}=we;if(!(await le(`/api/custom-tables/${Qe}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Xe})})).ok)throw new Error("Failed to add row");De.push({action:"add_table_row",status:"success"}),Fe.push({role:"system",text:" Added row to table"})}if(we.action==="update_table_row"){const{recordId:Qe,data:Xe}=we;if(!(await le(`/api/custom-tables/records/${Qe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Xe})})).ok)throw new Error("Failed to update row");De.push({action:"update_table_row",status:"success"}),Fe.push({role:"system",text:" Updated row"})}if(we.action==="create_custom_dashboard"){const{name:Qe,description:Xe,widgets:ut}=we,Ct=await le("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Qe,description:Xe,widgets:ut})});if(!Ct.ok)throw new Error("Failed to create dashboard");const bt=await Ct.json();De.push({action:"create_custom_dashboard",status:"success",id:bt.id}),Fe.push({role:"system",text:` Created dashboard: ${Qe}`})}we.action==="render_temporary_dashboard"&&($e({title:we.title,widgets:we.widgets}),De.push({action:"render_temporary_dashboard",status:"success"}),Fe.push({role:"system",text:` Showing temporary dashboard: ${we.title}`}))}catch(Qe){console.error("Action execution failed",we,Qe),De.push({action:we.action,status:"error",error:Qe.message}),Fe.push({role:"system",text:` Failed to execute action: ${we.action}`})}}nt.length>0&&i&&setTimeout(()=>i(nt),500),Fe.length>0&&V(we=>[...we,...Fe]);const Ge=[...Te,...De],it=`Reflecting on previous actions: ${JSON.stringify(De)}. What is the next step? If done, call end_task.`,wt=[...ue,...Fe,{role:"model",text:me},{role:"user",text:it}];await ce(it,wt,Ge,void 0)}catch(ee){console.error(ee),V(ge=>[...ge,{role:"model",text:"Something went wrong."}]),G(!1),Q.current=!1}}},Se=v.useCallback(()=>{V([]),k(""),G(!1),Q.current=!1,K.current=0,Y(null)},[]);return{chatQuery:A,setChatQuery:k,chatHistory:B,isProcessing:W,handleSendMessage:Ae=>{const ue=Ae!==void 0?Ae:A;if(!ue.trim()&&!z)return;Q.current=!0,G(!0),K.current=0;const Te={role:"user",text:ue};z&&(Te.text+=" [Image Attached]"),V(be=>[...be,Te]);const oe=z||void 0;k(""),Y(null),ce(ue,B,[],oe)},refreshChat:Se,stopGeneration:ie,selectedImage:z,handleImageSelect:xe,clearImage:X,temporaryDashboard:Ie,closeTemporaryDashboard:Be,saveTemporaryDashboard:Le}},te=({className:t="",width:e,height:n,variant:a="rectangular",animate:i=!0,style:s={}})=>{const o={width:e,height:n,...s};return r.jsx("div",{className:`skeleton skeleton-${a} ${i?"skeleton-animate":""} ${t}`,style:o})};var CC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var I4;function Xde(){return I4||(I4=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=i(s,a(l)))}return s}function a(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)e.call(s,l)&&s[l]&&(o=i(o,l));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(CC)),CC.exports}var Jde=Xde();const id=Hn(Jde);function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function Zde(t,e){if(Cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Cf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D9(t){var e=Zde(t,"string");return Cf(e)=="symbol"?e:e+""}function mv(t,e,n){return(e=D9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R4(Object(n),!0).forEach(function(a){mv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R4(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ehe(t){if(Array.isArray(t))return t}function the(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function KE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function O9(t,e){if(t){if(typeof t=="string")return KE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KE(t,e):void 0}}function nhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ec(t,e){return ehe(t)||the(t,e)||O9(t,e)||nhe()}function rhe(t,e){if(t==null)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;n[a]=t[a]}return n}function Hc(t,e){if(t==null)return{};var n,a,i=rhe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var ahe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function ihe(t){var e=t.defaultInputValue,n=e===void 0?"":e,a=t.defaultMenuIsOpen,i=a===void 0?!1:a,s=t.defaultValue,o=s===void 0?null:s,l=t.inputValue,c=t.menuIsOpen,u=t.onChange,f=t.onInputChange,p=t.onMenuClose,g=t.onMenuOpen,x=t.value,b=Hc(t,ahe),j=v.useState(l!==void 0?l:n),w=Ec(j,2),_=w[0],T=w[1],C=v.useState(c!==void 0?c:i),A=Ec(C,2),k=A[0],P=A[1],I=v.useState(x!==void 0?x:o),R=Ec(I,2),q=R[0],U=R[1],F=v.useCallback(function(Q,K){typeof u=="function"&&u(Q,K),U(Q)},[u]),B=v.useCallback(function(Q,K){var $;typeof f=="function"&&($=f(Q,K)),T($!==void 0?$:Q)},[f]),V=v.useCallback(function(){typeof g=="function"&&g(),P(!0)},[g]),W=v.useCallback(function(){typeof p=="function"&&p(),P(!1)},[p]),G=l!==void 0?l:_,z=c!==void 0?c:k,Y=x!==void 0?x:q;return Jt(Jt({},b),{},{inputValue:G,menuIsOpen:z,onChange:F,onInputChange:B,onMenuClose:W,onMenuOpen:V,value:Y})}function rn(){return rn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rn.apply(null,arguments)}function she(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L4(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,D9(a.key),a)}}function ohe(t,e,n){return e&&L4(t.prototype,e),n&&L4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function QE(t,e){return QE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QE(t,e)}function lhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QE(t,e)}function Cw(t){return Cw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cw(t)}function M9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M9=function(){return!!t})()}function che(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uhe(t,e){if(e&&(Cf(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return che(t)}function dhe(t){var e=M9();return function(){var n,a=Cw(t);if(e){var i=Cw(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return uhe(this,n)}}function hhe(t){if(Array.isArray(t))return KE(t)}function fhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function phe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jO(t){return hhe(t)||fhe(t)||O9(t)||phe()}function mhe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function ghe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var yhe=function(){function t(n){var a=this;this._insertTag=function(i){var s;a.tags.length===0?a.insertionPoint?s=a.insertionPoint.nextSibling:a.prepend?s=a.container.firstChild:s=a.before:s=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(i,s),a.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(a){a.forEach(this._insertTag)},e.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ghe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=mhe(i);try{s.insertRule(a,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(a));this.ctr++},e.flush=function(){this.tags.forEach(function(a){var i;return(i=a.parentNode)==null?void 0:i.removeChild(a)}),this.tags=[],this.ctr=0},t}(),di="-ms-",Tw="-moz-",ir="-webkit-",I9="comm",wO="rule",NO="decl",xhe="@import",R9="@keyframes",vhe="@layer",bhe=Math.abs,eS=String.fromCharCode,jhe=Object.assign;function whe(t,e){return Ka(t,0)^45?(((e<<2^Ka(t,0))<<2^Ka(t,1))<<2^Ka(t,2))<<2^Ka(t,3):0}function L9(t){return t.trim()}function Nhe(t,e){return(t=e.exec(t))?t[0]:t}function sr(t,e,n){return t.replace(e,n)}function XE(t,e){return t.indexOf(e)}function Ka(t,e){return t.charCodeAt(e)|0}function Rv(t,e,n){return t.slice(e,n)}function Al(t){return t.length}function SO(t){return t.length}function _j(t,e){return e.push(t),t}function She(t,e){return t.map(e).join("")}var tS=1,cg=1,F9=0,ds=0,ba=0,Vg="";function nS(t,e,n,a,i,s,o){return{value:t,root:e,parent:n,type:a,props:i,children:s,line:tS,column:cg,length:o,return:""}}function Jx(t,e){return jhe(nS("",null,null,"",null,null,0),t,{length:-t.length},e)}function _he(){return ba}function Che(){return ba=ds>0?Ka(Vg,--ds):0,cg--,ba===10&&(cg=1,tS--),ba}function Rs(){return ba=ds<F9?Ka(Vg,ds++):0,cg++,ba===10&&(cg=1,tS++),ba}function Il(){return Ka(Vg,ds)}function aw(){return ds}function Fb(t,e){return Rv(Vg,t,e)}function Lv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $9(t){return tS=cg=1,F9=Al(Vg=t),ds=0,[]}function z9(t){return Vg="",t}function iw(t){return L9(Fb(ds-1,JE(t===91?t+2:t===40?t+1:t)))}function The(t){for(;(ba=Il())&&ba<33;)Rs();return Lv(t)>2||Lv(ba)>3?"":" "}function khe(t,e){for(;--e&&Rs()&&!(ba<48||ba>102||ba>57&&ba<65||ba>70&&ba<97););return Fb(t,aw()+(e<6&&Il()==32&&Rs()==32))}function JE(t){for(;Rs();)switch(ba){case t:return ds;case 34:case 39:t!==34&&t!==39&&JE(ba);break;case 40:t===41&&JE(t);break;case 92:Rs();break}return ds}function Ahe(t,e){for(;Rs()&&t+ba!==57;)if(t+ba===84&&Il()===47)break;return"/*"+Fb(e,ds-1)+"*"+eS(t===47?t:Rs())}function Ehe(t){for(;!Lv(Il());)Rs();return Fb(t,ds)}function Phe(t){return z9(sw("",null,null,null,[""],t=$9(t),0,[0],t))}function sw(t,e,n,a,i,s,o,l,c){for(var u=0,f=0,p=o,g=0,x=0,b=0,j=1,w=1,_=1,T=0,C="",A=i,k=s,P=a,I=C;w;)switch(b=T,T=Rs()){case 40:if(b!=108&&Ka(I,p-1)==58){XE(I+=sr(iw(T),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=iw(T);break;case 9:case 10:case 13:case 32:I+=The(b);break;case 92:I+=khe(aw()-1,7);continue;case 47:switch(Il()){case 42:case 47:_j(Dhe(Ahe(Rs(),aw()),e,n),c);break;default:I+="/"}break;case 123*j:l[u++]=Al(I)*_;case 125*j:case 59:case 0:switch(T){case 0:case 125:w=0;case 59+f:_==-1&&(I=sr(I,/\f/g,"")),x>0&&Al(I)-p&&_j(x>32?$4(I+";",a,n,p-1):$4(sr(I," ","")+";",a,n,p-2),c);break;case 59:I+=";";default:if(_j(P=F4(I,e,n,u,f,i,l,C,A=[],k=[],p),s),T===123)if(f===0)sw(I,e,P,P,A,s,p,l,k);else switch(g===99&&Ka(I,3)===110?100:g){case 100:case 108:case 109:case 115:sw(t,P,P,a&&_j(F4(t,P,P,0,0,i,l,C,i,A=[],p),k),i,k,p,l,a?A:k);break;default:sw(I,P,P,P,[""],k,0,l,k)}}u=f=x=0,j=_=1,C=I="",p=o;break;case 58:p=1+Al(I),x=b;default:if(j<1){if(T==123)--j;else if(T==125&&j++==0&&Che()==125)continue}switch(I+=eS(T),T*j){case 38:_=f>0?1:(I+="\f",-1);break;case 44:l[u++]=(Al(I)-1)*_,_=1;break;case 64:Il()===45&&(I+=iw(Rs())),g=Il(),f=p=Al(C=I+=Ehe(aw())),T++;break;case 45:b===45&&Al(I)==2&&(j=0)}}return s}function F4(t,e,n,a,i,s,o,l,c,u,f){for(var p=i-1,g=i===0?s:[""],x=SO(g),b=0,j=0,w=0;b<a;++b)for(var _=0,T=Rv(t,p+1,p=bhe(j=o[b])),C=t;_<x;++_)(C=L9(j>0?g[_]+" "+T:sr(T,/&\f/g,g[_])))&&(c[w++]=C);return nS(t,e,n,i===0?wO:l,c,u,f)}function Dhe(t,e,n){return nS(t,e,n,I9,eS(_he()),Rv(t,2,-2),0)}function $4(t,e,n,a){return nS(t,e,n,NO,Rv(t,0,a),Rv(t,a+1,-1),a)}function zm(t,e){for(var n="",a=SO(t),i=0;i<a;i++)n+=e(t[i],i,t,e)||"";return n}function Ohe(t,e,n,a){switch(t.type){case vhe:if(t.children.length)break;case xhe:case NO:return t.return=t.return||t.value;case I9:return"";case R9:return t.return=t.value+"{"+zm(t.children,a)+"}";case wO:t.value=t.props.join(",")}return Al(n=zm(t.children,a))?t.return=t.value+"{"+n+"}":""}function Mhe(t){var e=SO(t);return function(n,a,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,a,i,s)||"";return o}}function Ihe(t){return function(e){e.root||(e=e.return)&&t(e)}}function Rhe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Lhe=function(e,n,a){for(var i=0,s=0;i=s,s=Il(),i===38&&s===12&&(n[a]=1),!Lv(s);)Rs();return Fb(e,ds)},Fhe=function(e,n){var a=-1,i=44;do switch(Lv(i)){case 0:i===38&&Il()===12&&(n[a]=1),e[a]+=Lhe(ds-1,n,a);break;case 2:e[a]+=iw(i);break;case 4:if(i===44){e[++a]=Il()===58?"&\f":"",n[a]=e[a].length;break}default:e[a]+=eS(i)}while(i=Rs());return e},$he=function(e,n){return z9(Fhe($9(e),n))},z4=new WeakMap,zhe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,a=e.parent,i=e.column===a.column&&e.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!z4.get(a))&&!i){z4.set(e,!0);for(var s=[],o=$he(n,s),l=a.props,c=0,u=0;c<o.length;c++)for(var f=0;f<l.length;f++,u++)e.props[u]=s[c]?o[c].replace(/&\f/g,l[f]):l[f]+" "+o[c]}}},Bhe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function B9(t,e){switch(whe(t,e)){case 5103:return ir+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ir+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ir+t+Tw+t+di+t+t;case 6828:case 4268:return ir+t+di+t+t;case 6165:return ir+t+di+"flex-"+t+t;case 5187:return ir+t+sr(t,/(\w+).+(:[^]+)/,ir+"box-$1$2"+di+"flex-$1$2")+t;case 5443:return ir+t+di+"flex-item-"+sr(t,/flex-|-self/,"")+t;case 4675:return ir+t+di+"flex-line-pack"+sr(t,/align-content|flex-|-self/,"")+t;case 5548:return ir+t+di+sr(t,"shrink","negative")+t;case 5292:return ir+t+di+sr(t,"basis","preferred-size")+t;case 6060:return ir+"box-"+sr(t,"-grow","")+ir+t+di+sr(t,"grow","positive")+t;case 4554:return ir+sr(t,/([^-])(transform)/g,"$1"+ir+"$2")+t;case 6187:return sr(sr(sr(t,/(zoom-|grab)/,ir+"$1"),/(image-set)/,ir+"$1"),t,"")+t;case 5495:case 3959:return sr(t,/(image-set\([^]*)/,ir+"$1$`$1");case 4968:return sr(sr(t,/(.+:)(flex-)?(.*)/,ir+"box-pack:$3"+di+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ir+t+t;case 4095:case 3583:case 4068:case 2532:return sr(t,/(.+)-inline(.+)/,ir+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Al(t)-1-e>6)switch(Ka(t,e+1)){case 109:if(Ka(t,e+4)!==45)break;case 102:return sr(t,/(.+:)(.+)-([^]+)/,"$1"+ir+"$2-$3$1"+Tw+(Ka(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~XE(t,"stretch")?B9(sr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ka(t,e+1)!==115)break;case 6444:switch(Ka(t,Al(t)-3-(~XE(t,"!important")&&10))){case 107:return sr(t,":",":"+ir)+t;case 101:return sr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ir+(Ka(t,14)===45?"inline-":"")+"box$3$1"+ir+"$2$3$1"+di+"$2box$3")+t}break;case 5936:switch(Ka(t,e+11)){case 114:return ir+t+di+sr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ir+t+di+sr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ir+t+di+sr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ir+t+di+t+t}return t}var qhe=function(e,n,a,i){if(e.length>-1&&!e.return)switch(e.type){case NO:e.return=B9(e.value,e.length);break;case R9:return zm([Jx(e,{value:sr(e.value,"@","@"+ir)})],i);case wO:if(e.length)return She(e.props,function(s){switch(Nhe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zm([Jx(e,{props:[sr(s,/:(read-\w+)/,":"+Tw+"$1")]})],i);case"::placeholder":return zm([Jx(e,{props:[sr(s,/:(plac\w+)/,":"+ir+"input-$1")]}),Jx(e,{props:[sr(s,/:(plac\w+)/,":"+Tw+"$1")]}),Jx(e,{props:[sr(s,/:(plac\w+)/,di+"input-$1")]})],i)}return""})}},Uhe=[qhe],Vhe=function(e){var n=e.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(j){var w=j.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var i=e.stylisPlugins||Uhe,s={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(j){for(var w=j.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)s[w[_]]=!0;l.push(j)});var c,u=[zhe,Bhe];{var f,p=[Ohe,Ihe(function(j){f.insert(j)})],g=Mhe(u.concat(i,p)),x=function(w){return zm(Phe(w),g)};c=function(w,_,T,C){f=T,x(w?w+"{"+_.styles+"}":_.styles),C&&(b.inserted[_.name]=!0)}}var b={key:n,sheet:new yhe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return b.sheet.hydrate(l),b},TC={exports:{}},ur={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B4;function Hhe(){if(B4)return ur;B4=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,a=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,j=t?Symbol.for("react.block"):60121,w=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,T=t?Symbol.for("react.scope"):60119;function C(k){if(typeof k=="object"&&k!==null){var P=k.$$typeof;switch(P){case e:switch(k=k.type,k){case c:case u:case a:case s:case i:case p:return k;default:switch(k=k&&k.$$typeof,k){case l:case f:case b:case x:case o:return k;default:return P}}case n:return P}}}function A(k){return C(k)===u}return ur.AsyncMode=c,ur.ConcurrentMode=u,ur.ContextConsumer=l,ur.ContextProvider=o,ur.Element=e,ur.ForwardRef=f,ur.Fragment=a,ur.Lazy=b,ur.Memo=x,ur.Portal=n,ur.Profiler=s,ur.StrictMode=i,ur.Suspense=p,ur.isAsyncMode=function(k){return A(k)||C(k)===c},ur.isConcurrentMode=A,ur.isContextConsumer=function(k){return C(k)===l},ur.isContextProvider=function(k){return C(k)===o},ur.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},ur.isForwardRef=function(k){return C(k)===f},ur.isFragment=function(k){return C(k)===a},ur.isLazy=function(k){return C(k)===b},ur.isMemo=function(k){return C(k)===x},ur.isPortal=function(k){return C(k)===n},ur.isProfiler=function(k){return C(k)===s},ur.isStrictMode=function(k){return C(k)===i},ur.isSuspense=function(k){return C(k)===p},ur.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===a||k===u||k===s||k===i||k===p||k===g||typeof k=="object"&&k!==null&&(k.$$typeof===b||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===f||k.$$typeof===w||k.$$typeof===_||k.$$typeof===T||k.$$typeof===j)},ur.typeOf=C,ur}var q4;function Ghe(){return q4||(q4=1,TC.exports=Hhe()),TC.exports}var kC,U4;function Whe(){if(U4)return kC;U4=1;var t=Ghe(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=a,s[t.Memo]=i;function o(b){return t.isMemo(b)?i:s[b.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function x(b,j,w){if(typeof j!="string"){if(g){var _=p(j);_&&_!==g&&x(b,_,w)}var T=c(j);u&&(T=T.concat(u(j)));for(var C=o(b),A=o(j),k=0;k<T.length;++k){var P=T[k];if(!n[P]&&!(w&&w[P])&&!(A&&A[P])&&!(C&&C[P])){var I=f(j,P);try{l(b,P,I)}catch{}}}}return b}return kC=x,kC}Whe();var Yhe=!0;function Khe(t,e,n){var a="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(a+=i+" ")}),a}var q9=function(e,n,a){var i=e.key+"-"+n.name;(a===!1||Yhe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Qhe=function(e,n,a){q9(e,n,a);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Xhe(t){for(var e=0,n,a=0,i=t.length;i>=4;++a,i-=4)n=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(a+2)&255)<<16;case 2:e^=(t.charCodeAt(a+1)&255)<<8;case 1:e^=t.charCodeAt(a)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Jhe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Zhe=/[A-Z]|^ms/g,efe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,U9=function(e){return e.charCodeAt(1)===45},V4=function(e){return e!=null&&typeof e!="boolean"},AC=Rhe(function(t){return U9(t)?t:t.replace(Zhe,"-$&").toLowerCase()}),H4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(efe,function(a,i,s){return El={name:i,styles:s,next:El},i})}return Jhe[e]!==1&&!U9(e)&&typeof n=="number"&&n!==0?n+"px":n};function Fv(t,e,n){if(n==null)return"";var a=n;if(a.__emotion_styles!==void 0)return a;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return El={name:i.name,styles:i.styles,next:El},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)El={name:o.name,styles:o.styles,next:El},o=o.next;var l=s.styles+";";return l}return tfe(t,e,n)}case"function":{if(t!==void 0){var c=El,u=n(t);return El=c,Fv(t,e,u)}break}}var f=n;return f}function tfe(t,e,n){var a="";if(Array.isArray(n))for(var i=0;i<n.length;i++)a+=Fv(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var l=o;V4(l)&&(a+=AC(s)+":"+H4(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var c=0;c<o.length;c++)V4(o[c])&&(a+=AC(s)+":"+H4(s,o[c])+";");else{var u=Fv(t,e,o);switch(s){case"animation":case"animationName":{a+=AC(s)+":"+u+";";break}default:a+=s+"{"+u+"}"}}}return a}var G4=/label:\s*([^\s;{]+)\s*(;|$)/g,El;function V9(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,i="";El=void 0;var s=t[0];if(s==null||s.raw===void 0)a=!1,i+=Fv(n,e,s);else{var o=s;i+=o[0]}for(var l=1;l<t.length;l++)if(i+=Fv(n,e,t[l]),a){var c=s;i+=c[l]}G4.lastIndex=0;for(var u="",f;(f=G4.exec(i))!==null;)u+="-"+f[1];var p=Xhe(i)+u;return{name:p,styles:i,next:El}}var nfe=function(e){return e()},rfe=QM.useInsertionEffect?QM.useInsertionEffect:!1,afe=rfe||nfe,H9=v.createContext(typeof HTMLElement<"u"?Vhe({key:"css"}):null);H9.Provider;var ife=function(e){return v.forwardRef(function(n,a){var i=v.useContext(H9);return e(n,i,a)})},sfe=v.createContext({}),_O={}.hasOwnProperty,ZE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ofe=function(e,n){var a={};for(var i in n)_O.call(n,i)&&(a[i]=n[i]);return a[ZE]=e,a},lfe=function(e){var n=e.cache,a=e.serialized,i=e.isStringTag;return q9(n,a,i),afe(function(){return Qhe(n,a,i)}),null},cfe=ife(function(t,e,n){var a=t.css;typeof a=="string"&&e.registered[a]!==void 0&&(a=e.registered[a]);var i=t[ZE],s=[a],o="";typeof t.className=="string"?o=Khe(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var l=V9(s,void 0,v.useContext(sfe));o+=e.key+"-"+l.name;var c={};for(var u in t)_O.call(t,u)&&u!=="css"&&u!==ZE&&(c[u]=t[u]);return c.className=o,n&&(c.ref=n),v.createElement(v.Fragment,null,v.createElement(lfe,{cache:e,serialized:l,isStringTag:typeof i=="string"}),v.createElement(i,c))}),ufe=cfe,Gt=function(e,n){var a=arguments;if(n==null||!_O.call(n,"css"))return v.createElement.apply(void 0,a);var i=a.length,s=new Array(i);s[0]=ufe,s[1]=ofe(e,n);for(var o=2;o<i;o++)s[o]=a[o];return v.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(Gt||(Gt={}));function CO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return V9(e)}function dfe(){var t=CO.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function hfe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const ffe=Math.min,pfe=Math.max,kw=Math.round,Cj=Math.floor,Aw=t=>({x:t,y:t});function mfe(t){const{x:e,y:n,width:a,height:i}=t;return{width:a,height:i,top:n,left:e,right:e+a,bottom:n+i,x:e,y:n}}function rS(){return typeof window<"u"}function G9(t){return Y9(t)?(t.nodeName||"").toLowerCase():"#document"}function Fc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function W9(t){var e;return(e=(Y9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Y9(t){return rS()?t instanceof Node||t instanceof Fc(t).Node:!1}function gfe(t){return rS()?t instanceof Element||t instanceof Fc(t).Element:!1}function TO(t){return rS()?t instanceof HTMLElement||t instanceof Fc(t).HTMLElement:!1}function W4(t){return!rS()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fc(t).ShadowRoot}const yfe=new Set(["inline","contents"]);function K9(t){const{overflow:e,overflowX:n,overflowY:a,display:i}=kO(t);return/auto|scroll|overlay|hidden|clip/.test(e+a+n)&&!yfe.has(i)}function xfe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vfe=new Set(["html","body","#document"]);function bfe(t){return vfe.has(G9(t))}function kO(t){return Fc(t).getComputedStyle(t)}function jfe(t){if(G9(t)==="html")return t;const e=t.assignedSlot||t.parentNode||W4(t)&&t.host||W9(t);return W4(e)?e.host:e}function Q9(t){const e=jfe(t);return bfe(e)?t.ownerDocument?t.ownerDocument.body:t.body:TO(e)&&K9(e)?e:Q9(e)}function Ew(t,e,n){var a;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Q9(t),s=i===((a=t.ownerDocument)==null?void 0:a.body),o=Fc(i);if(s){const l=eP(o);return e.concat(o,o.visualViewport||[],K9(i)?i:[],l&&n?Ew(l):[])}return e.concat(i,Ew(i,[],n))}function eP(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function wfe(t){const e=kO(t);let n=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const i=TO(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:a,l=kw(n)!==s||kw(a)!==o;return l&&(n=s,a=o),{width:n,height:a,$:l}}function AO(t){return gfe(t)?t:t.contextElement}function Y4(t){const e=AO(t);if(!TO(e))return Aw(1);const n=e.getBoundingClientRect(),{width:a,height:i,$:s}=wfe(e);let o=(s?kw(n.width):n.width)/a,l=(s?kw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Nfe=Aw(0);function Sfe(t){const e=Fc(t);return!xfe()||!e.visualViewport?Nfe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _fe(t,e,n){return!1}function K4(t,e,n,a){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),s=AO(t);let o=Aw(1);e&&(o=Y4(t));const l=_fe()?Sfe(s):Aw(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(s){const g=Fc(s),x=a;let b=g,j=eP(b);for(;j&&a&&x!==b;){const w=Y4(j),_=j.getBoundingClientRect(),T=kO(j),C=_.left+(j.clientLeft+parseFloat(T.paddingLeft))*w.x,A=_.top+(j.clientTop+parseFloat(T.paddingTop))*w.y;c*=w.x,u*=w.y,f*=w.x,p*=w.y,c+=C,u+=A,b=Fc(j),j=eP(b)}}return mfe({width:f,height:p,x:c,y:u})}function X9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Cfe(t,e){let n=null,a;const i=W9(t);function s(){var l;clearTimeout(a),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=t.getBoundingClientRect(),{left:f,top:p,width:g,height:x}=u;if(l||e(),!g||!x)return;const b=Cj(p),j=Cj(i.clientWidth-(f+g)),w=Cj(i.clientHeight-(p+x)),_=Cj(f),C={rootMargin:-b+"px "+-j+"px "+-w+"px "+-_+"px",threshold:pfe(0,ffe(1,c))||1};let A=!0;function k(P){const I=P[0].intersectionRatio;if(I!==c){if(!A)return o();I?o(!1,I):a=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!X9(u,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(k,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,C)}n.observe(t)}return o(!0),s}function Tfe(t,e,n,a){a===void 0&&(a={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,u=AO(t),f=i||s?[...u?Ew(u):[],...Ew(e)]:[];f.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=u&&l?Cfe(u,n):null;let g=-1,x=null;o&&(x=new ResizeObserver(_=>{let[T]=_;T&&T.target===u&&x&&(x.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),n()}),u&&!c&&x.observe(u),x.observe(e));let b,j=c?K4(t):null;c&&w();function w(){const _=K4(t);j&&!X9(j,_)&&n(),j=_,b=requestAnimationFrame(w)}return n(),()=>{var _;f.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p==null||p(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(b)}}var tP=v.useLayoutEffect,kfe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Pw=function(){};function Afe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function Efe(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var s=[].concat(a);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(Afe(t,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var Q4=function(e){return $fe(e)?e.filter(Boolean):Cf(e)==="object"&&e!==null?[e]:[]},J9=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Hc(e,kfe);return Jt({},n)},aa=function(e,n,a){var i=e.cx,s=e.getStyles,o=e.getClassNames,l=e.className;return{css:s(n,e),className:i(a??{},o(n,e),l)}};function aS(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function Pfe(t){return aS(t)?window.innerHeight:t.clientHeight}function Z9(t){return aS(t)?window.pageYOffset:t.scrollTop}function Dw(t,e){if(aS(t)){window.scrollTo(0,e);return}t.scrollTop=e}function Dfe(t){var e=getComputedStyle(t),n=e.position==="absolute",a=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&a.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function Ofe(t,e,n,a){return n*((t=t/a-1)*t*t+1)+e}function Tj(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Pw,i=Z9(t),s=e-i,o=10,l=0;function c(){l+=o;var u=Ofe(l,i,s,n);Dw(t,u),l<n?window.requestAnimationFrame(c):a(t)}c()}function X4(t,e){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=e.offsetHeight/3;a.bottom+i>n.bottom?Dw(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):a.top-i<n.top&&Dw(t,Math.max(e.offsetTop-i,0))}function Mfe(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function J4(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Ife(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var eU=!1,Rfe={get passive(){return eU=!0}},kj=typeof window<"u"?window:{};kj.addEventListener&&kj.removeEventListener&&(kj.addEventListener("p",Pw,Rfe),kj.removeEventListener("p",Pw,!1));var Lfe=eU;function Ffe(t){return t!=null}function $fe(t){return Array.isArray(t)}function Aj(t,e,n){return t?e:n}var zfe=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var l=Ec(o,1),c=l[0];return!a.includes(c)});return s.reduce(function(o,l){var c=Ec(l,2),u=c[0],f=c[1];return o[u]=f,o},{})},Bfe=["children","innerProps"],qfe=["children","innerProps"];function Ufe(t){var e=t.maxHeight,n=t.menuEl,a=t.minHeight,i=t.placement,s=t.shouldScroll,o=t.isFixedPosition,l=t.controlHeight,c=Dfe(n),u={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return u;var f=c.getBoundingClientRect(),p=f.height,g=n.getBoundingClientRect(),x=g.bottom,b=g.height,j=g.top,w=n.offsetParent.getBoundingClientRect(),_=w.top,T=o?window.innerHeight:Pfe(c),C=Z9(c),A=parseInt(getComputedStyle(n).marginBottom,10),k=parseInt(getComputedStyle(n).marginTop,10),P=_-k,I=T-j,R=P+C,q=p-C-j,U=x-T+C+A,F=C+j-k,B=160;switch(i){case"auto":case"bottom":if(I>=b)return{placement:"bottom",maxHeight:e};if(q>=b&&!o)return s&&Tj(c,U,B),{placement:"bottom",maxHeight:e};if(!o&&q>=a||o&&I>=a){s&&Tj(c,U,B);var V=o?I-A:q-A;return{placement:"bottom",maxHeight:V}}if(i==="auto"||o){var W=e,G=o?P:R;return G>=a&&(W=Math.min(G-A-l,e)),{placement:"top",maxHeight:W}}if(i==="bottom")return s&&Dw(c,U),{placement:"bottom",maxHeight:e};break;case"top":if(P>=b)return{placement:"top",maxHeight:e};if(R>=b&&!o)return s&&Tj(c,F,B),{placement:"top",maxHeight:e};if(!o&&R>=a||o&&P>=a){var z=e;return(!o&&R>=a||o&&P>=a)&&(z=o?P-k:R-k),s&&Tj(c,F,B),{placement:"top",maxHeight:z}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}function Vfe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var tU=function(e){return e==="auto"?"bottom":e},Hfe=function(e,n){var a,i=e.placement,s=e.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return Jt((a={label:"menu"},mv(a,Vfe(i),"100%"),mv(a,"position","absolute"),mv(a,"width","100%"),mv(a,"zIndex",1),a),n?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},nU=v.createContext(null),Gfe=function(e){var n=e.children,a=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,l=e.menuShouldScrollIntoView,c=e.theme,u=v.useContext(nU)||{},f=u.setPortalPlacement,p=v.useRef(null),g=v.useState(i),x=Ec(g,2),b=x[0],j=x[1],w=v.useState(null),_=Ec(w,2),T=_[0],C=_[1],A=c.spacing.controlHeight;return tP(function(){var k=p.current;if(k){var P=o==="fixed",I=l&&!P,R=Ufe({maxHeight:i,menuEl:k,minHeight:a,placement:s,shouldScroll:I,isFixedPosition:P,controlHeight:A});j(R.maxHeight),C(R.placement),f==null||f(R.placement)}},[i,s,o,l,a,f,A]),n({ref:p,placerProps:Jt(Jt({},e),{},{placement:T||tU(s),maxHeight:b})})},Wfe=function(e){var n=e.children,a=e.innerRef,i=e.innerProps;return Gt("div",rn({},aa(e,"menu",{menu:!0}),{ref:a},i),n)},Yfe=Wfe,Kfe=function(e,n){var a=e.maxHeight,i=e.theme.spacing.baseUnit;return Jt({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},Qfe=function(e){var n=e.children,a=e.innerProps,i=e.innerRef,s=e.isMulti;return Gt("div",rn({},aa(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},a),n)},rU=function(e,n){var a=e.theme,i=a.spacing.baseUnit,s=a.colors;return Jt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Xfe=rU,Jfe=rU,Zfe=function(e){var n=e.children,a=n===void 0?"No options":n,i=e.innerProps,s=Hc(e,Bfe);return Gt("div",rn({},aa(Jt(Jt({},s),{},{children:a,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),a)},epe=function(e){var n=e.children,a=n===void 0?"Loading...":n,i=e.innerProps,s=Hc(e,qfe);return Gt("div",rn({},aa(Jt(Jt({},s),{},{children:a,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),a)},tpe=function(e){var n=e.rect,a=e.offset,i=e.position;return{left:n.left,position:i,top:a,width:n.width,zIndex:1}},npe=function(e){var n=e.appendTo,a=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,l=e.menuPosition,c=v.useRef(null),u=v.useRef(null),f=v.useState(tU(o)),p=Ec(f,2),g=p[0],x=p[1],b=v.useMemo(function(){return{setPortalPlacement:x}},[]),j=v.useState(null),w=Ec(j,2),_=w[0],T=w[1],C=v.useCallback(function(){if(i){var I=Mfe(i),R=l==="fixed"?0:window.pageYOffset,q=I[g]+R;(q!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&T({offset:q,rect:I})}},[i,l,g,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);tP(function(){C()},[C]);var A=v.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),i&&c.current&&(u.current=Tfe(i,c.current,C,{elementResize:"ResizeObserver"in window}))},[i,C]);tP(function(){A()},[A]);var k=v.useCallback(function(I){c.current=I,A()},[A]);if(!n&&l!=="fixed"||!_)return null;var P=Gt("div",rn({ref:k},aa(Jt(Jt({},e),{},{offset:_.offset,position:l,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),a);return Gt(nU.Provider,{value:b},n?HD.createPortal(P,n):P)},rpe=function(e){var n=e.isDisabled,a=e.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},ape=function(e){var n=e.children,a=e.innerProps,i=e.isDisabled,s=e.isRtl;return Gt("div",rn({},aa(e,"container",{"--is-disabled":i,"--is-rtl":s}),a),n)},ipe=function(e,n){var a=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Jt({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},spe=function(e){var n=e.children,a=e.innerProps,i=e.isMulti,s=e.hasValue;return Gt("div",rn({},aa(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),a),n)},ope=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},lpe=function(e){var n=e.children,a=e.innerProps;return Gt("div",rn({},aa(e,"indicatorsContainer",{indicators:!0}),a),n)},Z4,cpe=["size"],upe=["innerProps","isRtl","size"],dpe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},aU=function(e){var n=e.size,a=Hc(e,cpe);return Gt("svg",rn({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:dpe},a))},EO=function(e){return Gt(aU,rn({size:20},e),Gt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},iU=function(e){return Gt(aU,rn({size:20},e),Gt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},sU=function(e,n){var a=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Jt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:a?o.neutral60:o.neutral20,padding:s*2,":hover":{color:a?o.neutral80:o.neutral40}})},hpe=sU,fpe=function(e){var n=e.children,a=e.innerProps;return Gt("div",rn({},aa(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),n||Gt(iU,null))},ppe=sU,mpe=function(e){var n=e.children,a=e.innerProps;return Gt("div",rn({},aa(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),n||Gt(EO,null))},gpe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Jt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:a?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},ype=function(e){var n=e.innerProps;return Gt("span",rn({},n,aa(e,"indicatorSeparator",{"indicator-separator":!0})))},xpe=dfe(Z4||(Z4=hfe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),vpe=function(e,n){var a=e.isFocused,i=e.size,s=e.theme,o=s.colors,l=s.spacing.baseUnit;return Jt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:a?o.neutral60:o.neutral20,padding:l*2})},EC=function(e){var n=e.delay,a=e.offset;return Gt("span",{css:CO({animation:"".concat(xpe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},bpe=function(e){var n=e.innerProps,a=e.isRtl,i=e.size,s=i===void 0?4:i,o=Hc(e,upe);return Gt("div",rn({},aa(Jt(Jt({},o),{},{innerProps:n,isRtl:a,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Gt(EC,{delay:0,offset:a}),Gt(EC,{delay:160,offset:!0}),Gt(EC,{delay:320,offset:!a}))},jpe=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return Jt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:a?o.neutral5:o.neutral0,borderColor:a?o.neutral10:i?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},wpe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,l=e.menuIsOpen;return Gt("div",rn({ref:s},aa(e,"control",{control:!0,"control--is-disabled":a,"control--is-focused":i,"control--menu-is-open":l}),o,{"aria-disabled":a||void 0}),n)},Npe=wpe,Spe=["data"],_pe=function(e,n){var a=e.theme.spacing;return n?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},Cpe=function(e){var n=e.children,a=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,l=e.headingProps,c=e.innerProps,u=e.label,f=e.theme,p=e.selectProps;return Gt("div",rn({},aa(e,"group",{group:!0}),c),Gt(o,rn({},l,{selectProps:p,theme:f,getStyles:i,getClassNames:s,cx:a}),u),Gt("div",null,n))},Tpe=function(e,n){var a=e.theme,i=a.colors,s=a.spacing;return Jt({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},kpe=function(e){var n=J9(e);n.data;var a=Hc(n,Spe);return Gt("div",rn({},aa(e,"groupHeading",{"group-heading":!0}),a))},Ape=Cpe,Epe=["innerRef","isDisabled","isHidden","inputClassName"],Ppe=function(e,n){var a=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,l=s.colors;return Jt(Jt({visibility:a?"hidden":"visible",transform:i?"translateZ(0)":""},Dpe),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},oU={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Dpe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Jt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},oU)},Ope=function(e){return Jt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},oU)},Mpe=function(e){var n=e.cx,a=e.value,i=J9(e),s=i.innerRef,o=i.isDisabled,l=i.isHidden,c=i.inputClassName,u=Hc(i,Epe);return Gt("div",rn({},aa(e,"input",{"input-container":!0}),{"data-value":a||""}),Gt("input",rn({className:n({input:!0},c),ref:s,style:Ope(l),disabled:o},u)))},Ipe=Mpe,Rpe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors;return Jt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},Lpe=function(e,n){var a=e.theme,i=a.borderRadius,s=a.colors,o=e.cropWithEllipsis;return Jt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Fpe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors,l=e.isFocused;return Jt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},lU=function(e){var n=e.children,a=e.innerProps;return Gt("div",a,n)},$pe=lU,zpe=lU;function Bpe(t){var e=t.children,n=t.innerProps;return Gt("div",rn({role:"button"},n),e||Gt(EO,{size:14}))}var qpe=function(e){var n=e.children,a=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,l=e.removeProps,c=e.selectProps,u=a.Container,f=a.Label,p=a.Remove;return Gt(u,{data:i,innerProps:Jt(Jt({},aa(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},Gt(f,{data:i,innerProps:Jt({},aa(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),Gt(p,{data:i,innerProps:Jt(Jt({},aa(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},Upe=qpe,Vpe=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,l=o.spacing,c=o.colors;return Jt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?c.primary:i?c.primary25:"transparent",color:a?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:s?c.primary:c.primary50}})},Hpe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,l=e.innerProps;return Gt("div",rn({},aa(e,"option",{option:!0,"option--is-disabled":a,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":a},l),n)},Gpe=Hpe,Wpe=function(e,n){var a=e.theme,i=a.spacing,s=a.colors;return Jt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Ype=function(e){var n=e.children,a=e.innerProps;return Gt("div",rn({},aa(e,"placeholder",{placeholder:!0}),a),n)},Kpe=Ype,Qpe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return Jt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:a?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Xpe=function(e){var n=e.children,a=e.isDisabled,i=e.innerProps;return Gt("div",rn({},aa(e,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),i),n)},Jpe=Xpe,Zpe={ClearIndicator:mpe,Control:Npe,DropdownIndicator:fpe,DownChevron:iU,CrossIcon:EO,Group:Ape,GroupHeading:kpe,IndicatorsContainer:lpe,IndicatorSeparator:ype,Input:Ipe,LoadingIndicator:bpe,Menu:Yfe,MenuList:Qfe,MenuPortal:npe,LoadingMessage:epe,NoOptionsMessage:Zfe,MultiValue:Upe,MultiValueContainer:$pe,MultiValueLabel:zpe,MultiValueRemove:Bpe,Option:Gpe,Placeholder:Kpe,SelectContainer:ape,SingleValue:Jpe,ValueContainer:spe},eme=function(e){return Jt(Jt({},Zpe),e.components)},e3=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function tme(t,e){return!!(t===e||e3(t)&&e3(e))}function nme(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!tme(t[n],e[n]))return!1;return!0}function rme(t,e){e===void 0&&(e=nme);var n=null;function a(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return a.clear=function(){n=null},a}var ame={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ime=function(e){return Gt("span",rn({css:ame},e))},t3=ime,sme={guidance:function(e){var n=e.isSearchable,a=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,a=e.label,i=a===void 0?"":a,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,a=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,l=e.selectValue,c=e.isDisabled,u=e.isSelected,f=e.isAppleDevice,p=function(j,w){return j&&j.length?"".concat(j.indexOf(w)+1," of ").concat(j.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(p(l,a),".");if(n==="menu"&&f){var g=c?" disabled":"",x="".concat(u?" selected":"").concat(g);return"".concat(o).concat(x,", ").concat(p(i,a),".")}return""},onFilter:function(e){var n=e.inputValue,a=e.resultsMessage;return"".concat(a).concat(n?" for search term "+n:"",".")}},ome=function(e){var n=e.ariaSelection,a=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,l=e.selectValue,c=e.selectProps,u=e.id,f=e.isAppleDevice,p=c.ariaLiveMessages,g=c.getOptionLabel,x=c.inputValue,b=c.isMulti,j=c.isOptionDisabled,w=c.isSearchable,_=c.menuIsOpen,T=c.options,C=c.screenReaderStatus,A=c.tabSelectsValue,k=c.isLoading,P=c["aria-label"],I=c["aria-live"],R=v.useMemo(function(){return Jt(Jt({},sme),p||{})},[p]),q=v.useMemo(function(){var G="";if(n&&R.onChange){var z=n.option,Y=n.options,Q=n.removedValue,K=n.removedValues,$=n.value,ie=function(ce){return Array.isArray(ce)?null:ce},xe=Q||z||ie($),X=xe?g(xe):"",Ie=Y||K||void 0,$e=Ie?Ie.map(g):[],Be=Jt({isDisabled:xe&&j(xe,l),label:X,labels:$e},n);G=R.onChange(Be)}return G},[n,R,j,l,g]),U=v.useMemo(function(){var G="",z=a||i,Y=!!(a&&l&&l.includes(a));if(z&&R.onFocus){var Q={focused:z,label:g(z),isDisabled:j(z,l),isSelected:Y,options:s,context:z===a?"menu":"value",selectValue:l,isAppleDevice:f};G=R.onFocus(Q)}return G},[a,i,g,j,R,s,l,f]),F=v.useMemo(function(){var G="";if(_&&T.length&&!k&&R.onFilter){var z=C({count:s.length});G=R.onFilter({inputValue:x,resultsMessage:z})}return G},[s,x,_,R,T,C,k]),B=(n==null?void 0:n.action)==="initial-input-focus",V=v.useMemo(function(){var G="";if(R.guidance){var z=i?"value":_?"menu":"input";G=R.guidance({"aria-label":P,context:z,isDisabled:a&&j(a,l),isMulti:b,isSearchable:w,tabSelectsValue:A,isInitialFocus:B})}return G},[P,a,i,b,j,w,_,R,l,A,B]),W=Gt(v.Fragment,null,Gt("span",{id:"aria-selection"},q),Gt("span",{id:"aria-focused"},U),Gt("span",{id:"aria-results"},F),Gt("span",{id:"aria-guidance"},V));return Gt(v.Fragment,null,Gt(t3,{id:u},B&&W),Gt(t3,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!B&&W))},lme=ome,nP=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],cme=new RegExp("["+nP.map(function(t){return t.letters}).join("")+"]","g"),cU={};for(var PC=0;PC<nP.length;PC++)for(var DC=nP[PC],OC=0;OC<DC.letters.length;OC++)cU[DC.letters[OC]]=DC.base;var uU=function(e){return e.replace(cme,function(n){return cU[n]})},ume=rme(uU),n3=function(e){return e.replace(/^\s+|\s+$/g,"")},dme=function(e){return"".concat(e.label," ").concat(e.value)},hme=function(e){return function(n,a){if(n.data.__isNew__)return!0;var i=Jt({ignoreCase:!0,ignoreAccents:!0,stringify:dme,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,l=i.stringify,c=i.trim,u=i.matchFrom,f=c?n3(a):a,p=c?n3(l(n)):l(n);return s&&(f=f.toLowerCase(),p=p.toLowerCase()),o&&(f=ume(f),p=uU(p)),u==="start"?p.substr(0,f.length)===f:p.indexOf(f)>-1}},fme=["innerRef"];function pme(t){var e=t.innerRef,n=Hc(t,fme),a=zfe(n,"onExited","in","enter","exit","appear");return Gt("input",rn({ref:e},a,{css:CO({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var mme=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function gme(t){var e=t.isEnabled,n=t.onBottomArrive,a=t.onBottomLeave,i=t.onTopArrive,s=t.onTopLeave,o=v.useRef(!1),l=v.useRef(!1),c=v.useRef(0),u=v.useRef(null),f=v.useCallback(function(w,_){if(u.current!==null){var T=u.current,C=T.scrollTop,A=T.scrollHeight,k=T.clientHeight,P=u.current,I=_>0,R=A-k-C,q=!1;R>_&&o.current&&(a&&a(w),o.current=!1),I&&l.current&&(s&&s(w),l.current=!1),I&&_>R?(n&&!o.current&&n(w),P.scrollTop=A,q=!0,o.current=!0):!I&&-_>C&&(i&&!l.current&&i(w),P.scrollTop=0,q=!0,l.current=!0),q&&mme(w)}},[n,a,i,s]),p=v.useCallback(function(w){f(w,w.deltaY)},[f]),g=v.useCallback(function(w){c.current=w.changedTouches[0].clientY},[]),x=v.useCallback(function(w){var _=c.current-w.changedTouches[0].clientY;f(w,_)},[f]),b=v.useCallback(function(w){if(w){var _=Lfe?{passive:!1}:!1;w.addEventListener("wheel",p,_),w.addEventListener("touchstart",g,_),w.addEventListener("touchmove",x,_)}},[x,g,p]),j=v.useCallback(function(w){w&&(w.removeEventListener("wheel",p,!1),w.removeEventListener("touchstart",g,!1),w.removeEventListener("touchmove",x,!1))},[x,g,p]);return v.useEffect(function(){if(e){var w=u.current;return b(w),function(){j(w)}}},[e,b,j]),function(w){u.current=w}}var r3=["boxSizing","height","overflow","paddingRight","position"],a3={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function i3(t){t.cancelable&&t.preventDefault()}function s3(t){t.stopPropagation()}function o3(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function l3(){return"ontouchstart"in window||navigator.maxTouchPoints}var c3=!!(typeof window<"u"&&window.document&&window.document.createElement),Zx=0,vm={capture:!1,passive:!1};function yme(t){var e=t.isEnabled,n=t.accountForScrollbars,a=n===void 0?!0:n,i=v.useRef({}),s=v.useRef(null),o=v.useCallback(function(c){if(c3){var u=document.body,f=u&&u.style;if(a&&r3.forEach(function(b){var j=f&&f[b];i.current[b]=j}),a&&Zx<1){var p=parseInt(i.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,x=window.innerWidth-g+p||0;Object.keys(a3).forEach(function(b){var j=a3[b];f&&(f[b]=j)}),f&&(f.paddingRight="".concat(x,"px"))}u&&l3()&&(u.addEventListener("touchmove",i3,vm),c&&(c.addEventListener("touchstart",o3,vm),c.addEventListener("touchmove",s3,vm))),Zx+=1}},[a]),l=v.useCallback(function(c){if(c3){var u=document.body,f=u&&u.style;Zx=Math.max(Zx-1,0),a&&Zx<1&&r3.forEach(function(p){var g=i.current[p];f&&(f[p]=g)}),u&&l3()&&(u.removeEventListener("touchmove",i3,vm),c&&(c.removeEventListener("touchstart",o3,vm),c.removeEventListener("touchmove",s3,vm)))}},[a]);return v.useEffect(function(){if(e){var c=s.current;return o(c),function(){l(c)}}},[e,o,l]),function(c){s.current=c}}var xme=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},vme={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function bme(t){var e=t.children,n=t.lockEnabled,a=t.captureEnabled,i=a===void 0?!0:a,s=t.onBottomArrive,o=t.onBottomLeave,l=t.onTopArrive,c=t.onTopLeave,u=gme({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),f=yme({isEnabled:n}),p=function(x){u(x),f(x)};return Gt(v.Fragment,null,n&&Gt("div",{onClick:xme,css:vme}),e(p))}var jme={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},wme=function(e){var n=e.name,a=e.onFocus;return Gt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:jme,value:"",onChange:function(){}})},Nme=wme;function PO(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Sme(){return PO(/^iPhone/i)}function dU(){return PO(/^Mac/i)}function _me(){return PO(/^iPad/i)||dU()&&navigator.maxTouchPoints>1}function Cme(){return Sme()||_me()}function Tme(){return dU()||Cme()}var kme=function(e){return e.label},Ame=function(e){return e.label},Eme=function(e){return e.value},Pme=function(e){return!!e.isDisabled},Dme={clearIndicator:ppe,container:rpe,control:jpe,dropdownIndicator:hpe,group:_pe,groupHeading:Tpe,indicatorsContainer:ope,indicatorSeparator:gpe,input:Ppe,loadingIndicator:vpe,loadingMessage:Jfe,menu:Hfe,menuList:Kfe,menuPortal:tpe,multiValue:Rpe,multiValueLabel:Lpe,multiValueRemove:Fpe,noOptionsMessage:Xfe,option:Vpe,placeholder:Wpe,singleValue:Qpe,valueContainer:ipe},Ome={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Mme=4,hU=4,Ime=38,Rme=hU*2,Lme={baseUnit:hU,controlHeight:Ime,menuGutter:Rme},MC={borderRadius:Mme,colors:Ome,spacing:Lme},Fme={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:J4(),captureMenuScroll:!J4(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:hme(),formatGroupLabel:kme,getOptionLabel:Ame,getOptionValue:Eme,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Pme,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Ife(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function u3(t,e,n,a){var i=mU(t,e,n),s=gU(t,e,n),o=pU(t,e),l=Ow(t,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:l,index:a}}function ow(t,e){return t.options.map(function(n,a){if("options"in n){var i=n.options.map(function(o,l){return u3(t,o,e,l)}).filter(function(o){return h3(t,o)});return i.length>0?{type:"group",data:n,options:i,index:a}:void 0}var s=u3(t,n,e,a);return h3(t,s)?s:void 0}).filter(Ffe)}function fU(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,jO(n.options.map(function(a){return a.data}))):e.push(n.data),e},[])}function d3(t,e){return t.reduce(function(n,a){return a.type==="group"?n.push.apply(n,jO(a.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(a.index,"-").concat(i.index)}}))):n.push({data:a.data,id:"".concat(e,"-").concat(a.index)}),n},[])}function $me(t,e){return fU(ow(t,e))}function h3(t,e){var n=t.inputValue,a=n===void 0?"":n,i=e.data,s=e.isSelected,o=e.label,l=e.value;return(!xU(t)||!s)&&yU(t,{label:o,value:l,data:i},a)}function zme(t,e){var n=t.focusedValue,a=t.selectValue,i=a.indexOf(n);if(i>-1){var s=e.indexOf(n);if(s>-1)return n;if(i<e.length)return e[i]}return null}function Bme(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var IC=function(e,n){var a,i=(a=e.find(function(s){return s.data===n}))===null||a===void 0?void 0:a.id;return i||null},pU=function(e,n){return e.getOptionLabel(n)},Ow=function(e,n){return e.getOptionValue(n)};function mU(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function gU(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var a=Ow(t,e);return n.some(function(i){return Ow(t,i)===a})}function yU(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var xU=function(e){var n=e.hideSelectedOptions,a=e.isMulti;return n===void 0?a:n},qme=1,vU=function(t){lhe(n,t);var e=dhe(n);function n(a){var i;if(she(this,n),i=e.call(this,a),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(c){i.controlRef=c},i.focusedOptionRef=null,i.getFocusedOptionRef=function(c){i.focusedOptionRef=c},i.menuListRef=null,i.getMenuListRef=function(c){i.menuListRef=c},i.inputRef=null,i.getInputRef=function(c){i.inputRef=c},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(c,u){var f=i.props,p=f.onChange,g=f.name;u.name=g,i.ariaOnChange(c,u),p(c,u)},i.setValue=function(c,u,f){var p=i.props,g=p.closeMenuOnSelect,x=p.isMulti,b=p.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:b}),g&&(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(c,{action:u,option:f})},i.selectOption=function(c){var u=i.props,f=u.blurInputOnSelect,p=u.isMulti,g=u.name,x=i.state.selectValue,b=p&&i.isOptionSelected(c,x),j=i.isOptionDisabled(c,x);if(b){var w=i.getOptionValue(c);i.setValue(x.filter(function(_){return i.getOptionValue(_)!==w}),"deselect-option",c)}else if(!j)p?i.setValue([].concat(jO(x),[c]),"select-option",c):i.setValue(c,"select-option");else{i.ariaOnChange(c,{action:"select-option",option:c,name:g});return}f&&i.blurInput()},i.removeValue=function(c){var u=i.props.isMulti,f=i.state.selectValue,p=i.getOptionValue(c),g=f.filter(function(b){return i.getOptionValue(b)!==p}),x=Aj(u,g,g[0]||null);i.onChange(x,{action:"remove-value",removedValue:c}),i.focusInput()},i.clearValue=function(){var c=i.state.selectValue;i.onChange(Aj(i.props.isMulti,[],null),{action:"clear",removedValues:c})},i.popValue=function(){var c=i.props.isMulti,u=i.state.selectValue,f=u[u.length-1],p=u.slice(0,u.length-1),g=Aj(c,p,p[0]||null);f&&i.onChange(g,{action:"pop-value",removedValue:f})},i.getFocusedOptionId=function(c){return IC(i.state.focusableOptionsWithIds,c)},i.getFocusableOptionsWithIds=function(){return d3(ow(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return Efe.apply(void 0,[i.props.classNamePrefix].concat(u))},i.getOptionLabel=function(c){return pU(i.props,c)},i.getOptionValue=function(c){return Ow(i.props,c)},i.getStyles=function(c,u){var f=i.props.unstyled,p=Dme[c](u,f);p.boxSizing="border-box";var g=i.props.styles[c];return g?g(p,u):p},i.getClassNames=function(c,u){var f,p;return(f=(p=i.props.classNames)[c])===null||f===void 0?void 0:f.call(p,u)},i.getElementId=function(c){return"".concat(i.state.instancePrefix,"-").concat(c)},i.getComponents=function(){return eme(i.props)},i.buildCategorizedOptions=function(){return ow(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return fU(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(c,u){i.setState({ariaSelection:Jt({value:c},u)})},i.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(c){i.blockOptionHover=!1},i.onControlMouseDown=function(c){if(!c.defaultPrevented){var u=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&i.onMenuClose():u&&i.openMenu("first"):(u&&(i.openAfterFocus=!0),i.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},i.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!i.props.isDisabled){var u=i.props,f=u.isMulti,p=u.menuIsOpen;i.focusInput(),p?(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()):i.openMenu("first"),c.preventDefault()}},i.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(i.clearValue(),c.preventDefault(),i.openAfterFocus=!1,c.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(c){typeof i.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&aS(c.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(c)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(c){var u=c.touches,f=u&&u.item(0);f&&(i.initialTouchX=f.clientX,i.initialTouchY=f.clientY,i.userIsDragging=!1)},i.onTouchMove=function(c){var u=c.touches,f=u&&u.item(0);if(f){var p=Math.abs(f.clientX-i.initialTouchX),g=Math.abs(f.clientY-i.initialTouchY),x=5;i.userIsDragging=p>x||g>x}},i.onTouchEnd=function(c){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(c.target)&&i.menuListRef&&!i.menuListRef.contains(c.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(c){i.userIsDragging||i.onControlMouseDown(c)},i.onClearIndicatorTouchEnd=function(c){i.userIsDragging||i.onClearIndicatorMouseDown(c)},i.onDropdownIndicatorTouchEnd=function(c){i.userIsDragging||i.onDropdownIndicatorMouseDown(c)},i.handleInputChange=function(c){var u=i.props.inputValue,f=c.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(f,{action:"input-change",prevInputValue:u}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(c){i.props.onFocus&&i.props.onFocus(c),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(c){var u=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(c),i.onInputChange("",{action:"input-blur",prevInputValue:u}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(c){if(!(i.blockOptionHover||i.state.focusedOption===c)){var u=i.getFocusableOptions(),f=u.indexOf(c);i.setState({focusedOption:c,focusedOptionId:f>-1?i.getFocusedOptionId(c):null})}},i.shouldHideSelectedOptions=function(){return xU(i.props)},i.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),i.focus()},i.onKeyDown=function(c){var u=i.props,f=u.isMulti,p=u.backspaceRemovesValue,g=u.escapeClearsValue,x=u.inputValue,b=u.isClearable,j=u.isDisabled,w=u.menuIsOpen,_=u.onKeyDown,T=u.tabSelectsValue,C=u.openMenuOnFocus,A=i.state,k=A.focusedOption,P=A.focusedValue,I=A.selectValue;if(!j&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(i.blockOptionHover=!0,c.key){case"ArrowLeft":if(!f||x)return;i.focusValue("previous");break;case"ArrowRight":if(!f||x)return;i.focusValue("next");break;case"Delete":case"Backspace":if(x)return;if(P)i.removeValue(P);else{if(!p)return;f?i.popValue():b&&i.clearValue()}break;case"Tab":if(i.isComposing||c.shiftKey||!w||!T||!k||C&&i.isOptionSelected(k,I))return;i.selectOption(k);break;case"Enter":if(c.keyCode===229)break;if(w){if(!k||i.isComposing)return;i.selectOption(k);break}return;case"Escape":w?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:x}),i.onMenuClose()):b&&g&&i.clearValue();break;case" ":if(x)return;if(!w){i.openMenu("first");break}if(!k)return;i.selectOption(k);break;case"ArrowUp":w?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":w?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!w)return;i.focusOption("pageup");break;case"PageDown":if(!w)return;i.focusOption("pagedown");break;case"Home":if(!w)return;i.focusOption("first");break;case"End":if(!w)return;i.focusOption("last");break;default:return}c.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++qme),i.state.selectValue=Q4(a.value),a.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),l=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[l],i.state.focusedOptionId=IC(s,o[l])}return i}return ohe(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&X4(this.menuListRef,this.focusedOptionRef),Tme()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&i.isDisabled||c&&l&&!i.menuIsOpen)&&this.focusInput(),c&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(X4(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,u=this.buildFocusableOptions(),f=i==="first"?0:u.length-1;if(!this.props.isMulti){var p=u.indexOf(l[0]);p>-1&&(f=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[f],focusedOptionId:this.getFocusedOptionId(u[f])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var u=o.length-1,f=-1;if(o.length){switch(i){case"previous":c===0?f=0:c===-1?f=u:f=c-1;break;case"next":c>-1&&c<u&&(f=c+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,u=l.indexOf(o);o||(u=-1),i==="up"?c=u>0?u-1:l.length-1:i==="down"?c=(u+1)%l.length:i==="pageup"?(c=u-s,c<0&&(c=0)):i==="pagedown"?(c=u+s,c>l.length-1&&(c=l.length-1)):i==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(MC):Jt(Jt({},MC),this.props.theme):MC}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,u=this.selectOption,f=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,b=p.options,j=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:j,isMulti:g,isRtl:x,options:b,selectOption:u,selectProps:p,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return mU(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return gU(this.props,i,s)}},{key:"filterOption",value:function(i,s){return yU(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,l=i.inputId,c=i.inputValue,u=i.tabIndex,f=i.form,p=i.menuIsOpen,g=i.required,x=this.getComponents(),b=x.Input,j=this.state,w=j.inputIsHidden,_=j.ariaSelection,T=this.commonProps,C=l||this.getElementId("input"),A=Jt(Jt(Jt({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?v.createElement(b,rn({},T,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:s,isHidden:w,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:f,type:"text",value:c},A)):v.createElement(pme,rn({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Pw,onFocus:this.onInputFocus,disabled:s,tabIndex:u,inputMode:"none",form:f,value:""},A))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,u=s.MultiValueRemove,f=s.SingleValue,p=s.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,j=x.isDisabled,w=x.isMulti,_=x.inputValue,T=x.placeholder,C=this.state,A=C.selectValue,k=C.focusedValue,P=C.isFocused;if(!this.hasValue()||!b)return _?null:v.createElement(p,rn({},g,{key:"placeholder",isDisabled:j,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),T);if(w)return A.map(function(R,q){var U=R===k,F="".concat(i.getOptionLabel(R),"-").concat(i.getOptionValue(R));return v.createElement(o,rn({},g,{components:{Container:l,Label:c,Remove:u},isFocused:U,isDisabled:j,key:F,index:q,removeProps:{onClick:function(){return i.removeValue(R)},onTouchEnd:function(){return i.removeValue(R)},onMouseDown:function(V){V.preventDefault()}},data:R}),i.formatOptionLabel(R,"value"))});if(_)return null;var I=A[0];return v.createElement(f,rn({},g,{data:I,isDisabled:j}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||u)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:p,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,f=this.state.isFocused;if(!s||!u)return null;var p={"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:p,isDisabled:c,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused;return v.createElement(o,rn({},l,{isDisabled:c,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:u,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,u=s.MenuList,f=s.MenuPortal,p=s.LoadingMessage,g=s.NoOptionsMessage,x=s.Option,b=this.commonProps,j=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,T=w.inputValue,C=w.isLoading,A=w.loadingMessage,k=w.minMenuHeight,P=w.maxMenuHeight,I=w.menuIsOpen,R=w.menuPlacement,q=w.menuPosition,U=w.menuPortalTarget,F=w.menuShouldBlockScroll,B=w.menuShouldScrollIntoView,V=w.noOptionsMessage,W=w.onMenuScrollToTop,G=w.onMenuScrollToBottom;if(!I)return null;var z=function(X,Ie){var $e=X.type,Be=X.data,Le=X.isDisabled,ce=X.isSelected,Se=X.label,Ve=X.value,Ae=j===Be,ue=Le?void 0:function(){return i.onOptionHover(Be)},Te=Le?void 0:function(){return i.selectOption(Be)},oe="".concat(i.getElementId("option"),"-").concat(Ie),be={id:oe,onClick:Te,onMouseMove:ue,onMouseOver:ue,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:ce};return v.createElement(x,rn({},b,{innerProps:be,data:Be,isDisabled:Le,isSelected:ce,key:oe,label:Se,type:$e,value:Ve,isFocused:Ae,innerRef:Ae?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(X.data,"menu"))},Y;if(this.hasOptions())Y=this.getCategorizedOptions().map(function(xe){if(xe.type==="group"){var X=xe.data,Ie=xe.options,$e=xe.index,Be="".concat(i.getElementId("group"),"-").concat($e),Le="".concat(Be,"-heading");return v.createElement(o,rn({},b,{key:Be,data:X,options:Ie,Heading:l,headingProps:{id:Le,data:xe.data},label:i.formatGroupLabel(xe.data)}),xe.options.map(function(ce){return z(ce,"".concat($e,"-").concat(ce.index))}))}else if(xe.type==="option")return z(xe,"".concat(xe.index))});else if(C){var Q=A({inputValue:T});if(Q===null)return null;Y=v.createElement(p,b,Q)}else{var K=V({inputValue:T});if(K===null)return null;Y=v.createElement(g,b,K)}var $={minMenuHeight:k,maxMenuHeight:P,menuPlacement:R,menuPosition:q,menuShouldScrollIntoView:B},ie=v.createElement(Gfe,rn({},b,$),function(xe){var X=xe.ref,Ie=xe.placerProps,$e=Ie.placement,Be=Ie.maxHeight;return v.createElement(c,rn({},b,$,{innerRef:X,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:C,placement:$e}),v.createElement(bme,{captureEnabled:_,onTopArrive:W,onBottomArrive:G,lockEnabled:F},function(Le){return v.createElement(u,rn({},b,{innerRef:function(Se){i.getMenuListRef(Se),Le(Se)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:C,maxHeight:Be,focusedOption:j}),Y)}))});return U||q==="fixed"?v.createElement(f,rn({},b,{appendTo:U,controlElement:this.controlRef,menuPlacement:R,menuPosition:q}),ie):ie}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,u=s.name,f=s.required,p=this.state.selectValue;if(f&&!this.hasValue()&&!l)return v.createElement(Nme,{name:u,onFocus:this.onValueInputFocus});if(!(!u||l))if(c)if(o){var g=p.map(function(j){return i.getOptionValue(j)}).join(o);return v.createElement("input",{name:u,type:"hidden",value:g})}else{var x=p.length>0?p.map(function(j,w){return v.createElement("input",{key:"i-".concat(w),name:u,type:"hidden",value:i.getOptionValue(j)})}):v.createElement("input",{name:u,type:"hidden",value:""});return v.createElement("div",null,x)}else{var b=p[0]?this.getOptionValue(p[0]):"";return v.createElement("input",{name:u,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,u=s.isFocused,f=s.selectValue,p=this.getFocusableOptions();return v.createElement(lme,rn({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:u,selectValue:f,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,l=i.SelectContainer,c=i.ValueContainer,u=this.props,f=u.className,p=u.id,g=u.isDisabled,x=u.menuIsOpen,b=this.state.isFocused,j=this.commonProps=this.getCommonProps();return v.createElement(l,rn({},j,{className:f,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),v.createElement(s,rn({},j,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),v.createElement(c,rn({},j,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),v.createElement(o,rn({},j,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,u=s.ariaSelection,f=s.isFocused,p=s.prevWasFocused,g=s.instancePrefix,x=i.options,b=i.value,j=i.menuIsOpen,w=i.inputValue,_=i.isMulti,T=Q4(b),C={};if(o&&(b!==o.value||x!==o.options||j!==o.menuIsOpen||w!==o.inputValue)){var A=j?$me(i,T):[],k=j?d3(ow(i,T),"".concat(g,"-option")):[],P=l?zme(s,T):null,I=Bme(s,A),R=IC(k,I);C={selectValue:T,focusedOption:I,focusedOptionId:R,focusableOptionsWithIds:k,focusedValue:P,clearFocusValueOnUpdate:!1}}var q=c!=null&&i!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},U=u,F=f&&p;return f&&!F&&(U={value:Aj(_,T,T[0]||null),options:T,action:"initial-input-focus"},F=!p),(u==null?void 0:u.action)==="initial-input-focus"&&(U=null),Jt(Jt(Jt({},C),q),{},{prevProps:i,ariaSelection:U,prevWasFocused:F})}}]),n}(v.Component);vU.defaultProps=Fme;var Ume=v.forwardRef(function(t,e){var n=ihe(t);return v.createElement(vU,rn({ref:e},n))}),bU=Ume;const bm=new Map,jU=(()=>{const t=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async e=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),e!=null&&e.id&&bm.has(e.id)){const i=bm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&bm.set(e.id,a),a}catch{if(await t,e!=null&&e.id&&bm.has(e.id)){const i=bm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&bm.set(e.id,a),a}}})();function Vme(t){var e=atob(t),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n.buffer}const Hme=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,wU=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,Ej=new Map,rP=(t,e)=>{const n=new Blob([`registerProcessor("${t}", ${e})`],{type:"application/javascript"});return URL.createObjectURL(n)};var RC={exports:{}},f3;function Gme(){return f3||(f3=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)e.call(f,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(u){var f=n?n+u:u,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,f,p,g,x,b){var j=n?n+u:u;if(!this._events[j])return!1;var w=this._events[j],_=arguments.length,T,C;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,p),!0;case 4:return w.fn.call(w.context,f,p,g),!0;case 5:return w.fn.call(w.context,f,p,g,x),!0;case 6:return w.fn.call(w.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];w.fn.apply(w.context,T)}else{var A=w.length,k;for(C=0;C<A;C++)switch(w[C].once&&this.removeListener(u,w[C].fn,void 0,!0),_){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,f);break;case 3:w[C].fn.call(w[C].context,f,p);break;case 4:w[C].fn.call(w[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];w[C].fn.apply(w[C].context,T)}}return!0},l.prototype.on=function(u,f,p){return s(this,u,f,p,!1)},l.prototype.once=function(u,f,p){return s(this,u,f,p,!0)},l.prototype.removeListener=function(u,f,p,g){var x=n?n+u:u;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,w=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&w.push(b[j]);w.length?this._events[x]=w.length===1?w[0]:w:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(RC)),RC.exports}var Wme=Gme();const NU=Hn(Wme);function Yme(t){for(var e="",n=new Uint8Array(t),a=n.byteLength,i=0;i<a;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}class SU extends NU{constructor(n=16e3){super();wr(this,"stream");wr(this,"audioContext");wr(this,"source");wr(this,"recording",!1);wr(this,"recordingWorklet");wr(this,"vuWorklet");wr(this,"starting",null);this.sampleRate=n}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async n=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await jU({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const a="audio-recorder-worklet",i=rP(a,Hme);await this.audioContext.audioWorklet.addModule(i),this.recordingWorklet=new AudioWorkletNode(this.audioContext,a),this.recordingWorklet.port.onmessage=async o=>{const l=o.data.data.int16arrayBuffer;if(l){const c=Yme(l);this.emit("data",c)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(rP(s,wU)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=o=>{this.emit("volume",o.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,n(),this.starting=null})}stop(){const n=()=>{var a,i;(a=this.source)==null||a.disconnect(),(i=this.stream)==null||i.getTracks().forEach(s=>s.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(n);return}n()}}const Kme=3,Qme=({active:t,volume:e,hover:n})=>{const a=v.useRef([]);return v.useEffect(()=>{let i=null;const s=()=>{a.current.forEach((o,l)=>{o&&(o.style.height=`${Math.min(24,4+e*(l===1?400:60))}px`)}),i=window.setTimeout(s,100)};return s(),()=>clearTimeout(i)},[e]),r.jsx("div",{className:id("audioPulse",{active:t,hover:n}),children:Array(Kme).fill(null).map((i,s)=>r.jsx("div",{ref:o=>{a.current[s]=o},style:{animationDelay:`${s*133}ms`}},s))})};var gv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Xme=gv.exports,p3;function Jme(){return p3||(p3=1,function(t,e){(function(){var n,a="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",p=1,g=2,x=4,b=1,j=2,w=1,_=2,T=4,C=8,A=16,k=32,P=64,I=128,R=256,q=512,U=30,F="...",B=800,V=16,W=1,G=2,z=3,Y=1/0,Q=9007199254740991,K=17976931348623157e292,$=NaN,ie=4294967295,xe=ie-1,X=ie>>>1,Ie=[["ary",I],["bind",w],["bindKey",_],["curry",C],["curryRight",A],["flip",q],["partial",k],["partialRight",P],["rearg",R]],$e="[object Arguments]",Be="[object Array]",Le="[object AsyncFunction]",ce="[object Boolean]",Se="[object Date]",Ve="[object DOMException]",Ae="[object Error]",ue="[object Function]",Te="[object GeneratorFunction]",oe="[object Map]",be="[object Number]",_e="[object Null]",Ne="[object Object]",ee="[object Promise]",ge="[object Proxy]",de="[object RegExp]",ae="[object Set]",ne="[object String]",se="[object Symbol]",je="[object Undefined]",Ee="[object WeakMap]",J="[object WeakSet]",ye="[object ArrayBuffer]",me="[object DataView]",he="[object Float32Array]",De="[object Float64Array]",nt="[object Int8Array]",Fe="[object Int16Array]",Ge="[object Int32Array]",it="[object Uint8Array]",wt="[object Uint8ClampedArray]",we="[object Uint16Array]",Qe="[object Uint32Array]",Xe=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,Ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,ot=RegExp(bt.source),Tt=RegExp(ke.source),Ue=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/[\\^$.*+?()[\]{}|]/g,Qn=RegExp(Ht.source),br=/^\s+/,Ba=/\s/,Jr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wa=/\{\n\/\* \[wrapped with (.+)\] \*/,pn=/,? & /,qr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tn=/[()=,{}\[\]\/\s]/,Rn=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,St=/^[-+]0x[0-9a-f]+$/i,Ot=/^0b[01]+$/i,Sn=/^\[object .+?Constructor\]$/,Ln=/^0o[0-7]+$/i,Na=/^(?:0|[1-9]\d*)$/,xi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fo=/($^)/,Ed=/['\n\r\u2028\u2029\\]/g,Pd="\\ud800-\\udfff",VS="\\u0300-\\u036f",Bf="\\ufe20-\\ufe2f",qf="\\u20d0-\\u20ff",$s=VS+Bf+qf,Uf="\\u2700-\\u27bf",Zg="a-z\\xdf-\\xf6\\xf8-\\xff",Qc="\\xac\\xb1\\xd7\\xf7",ey="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ty="\\u2000-\\u206f",HS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ny="A-Z\\xc0-\\xd6\\xd8-\\xde",vi="\\ufe0e\\ufe0f",ry=Qc+ey+ty+HS,ay="[']",Vf="["+Pd+"]",iy="["+ry+"]",Hl="["+$s+"]",Qb="\\d+",Vi="["+Uf+"]",Hf="["+Zg+"]",sy="[^"+Pd+ry+Qb+Uf+Zg+ny+"]",Dd="\\ud83c[\\udffb-\\udfff]",Xc="(?:"+Hl+"|"+Dd+")",oy="[^"+Pd+"]",Gf="(?:\\ud83c[\\udde6-\\uddff]){2}",Ko="[\\ud800-\\udbff][\\udc00-\\udfff]",Jc="["+ny+"]",ly="\\u200d",cy="(?:"+Hf+"|"+sy+")",uy="(?:"+Jc+"|"+sy+")",Xb="(?:"+ay+"(?:d|ll|m|re|s|t|ve))?",Jb="(?:"+ay+"(?:D|LL|M|RE|S|T|VE))?",Od=Xc+"?",Wf="["+vi+"]?",dy="(?:"+ly+"(?:"+[oy,Gf,Ko].join("|")+")"+Wf+Od+")*",Zc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",hy=Wf+Od+dy,fy="(?:"+[Vi,Gf,Ko].join("|")+")"+hy,Zb="(?:"+[oy+Hl+"?",Hl,Gf,Ko,Vf].join("|")+")",Md=RegExp(ay,"g"),po=RegExp(Hl,"g"),Id=RegExp(Dd+"(?="+Dd+")|"+Zb+hy,"g"),Rd=RegExp([Jc+"?"+Hf+"+"+Xb+"(?="+[iy,Jc,"$"].join("|")+")",uy+"+"+Jb+"(?="+[iy,Jc+cy,"$"].join("|")+")",Jc+"?"+cy+"+"+Xb,Jc+"+"+Jb,eu,Zc,Qb,fy].join("|"),"g"),Qo=RegExp("["+ly+Pd+$s+vi+"]"),py=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],e0=-1,or={};or[he]=or[De]=or[nt]=or[Fe]=or[Ge]=or[it]=or[wt]=or[we]=or[Qe]=!0,or[$e]=or[Be]=or[ye]=or[ce]=or[me]=or[Se]=or[Ae]=or[ue]=or[oe]=or[be]=or[Ne]=or[de]=or[ae]=or[ne]=or[Ee]=!1;var tr={};tr[$e]=tr[Be]=tr[ye]=tr[me]=tr[ce]=tr[Se]=tr[he]=tr[De]=tr[nt]=tr[Fe]=tr[Ge]=tr[oe]=tr[be]=tr[Ne]=tr[de]=tr[ae]=tr[ne]=tr[se]=tr[it]=tr[wt]=tr[we]=tr[Qe]=!0,tr[Ae]=tr[ue]=tr[Ee]=!1;var t0={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ld=parseFloat,GS=parseInt,Qf=typeof ao=="object"&&ao&&ao.Object===Object&&ao,my=typeof self=="object"&&self&&self.Object===Object&&self,Qr=Qf||my||Function("return this")(),tu=e&&!e.nodeType&&e,Xo=tu&&!0&&t&&!t.nodeType&&t,n0=Xo&&Xo.exports===tu,gy=n0&&Qf.process,Hi=function(){try{var He=Xo&&Xo.require&&Xo.require("util").types;return He||gy&&gy.binding&&gy.binding("util")}catch{}}(),Xf=Hi&&Hi.isArrayBuffer,r0=Hi&&Hi.isDate,a0=Hi&&Hi.isMap,i0=Hi&&Hi.isRegExp,s0=Hi&&Hi.isSet,o0=Hi&&Hi.isTypedArray;function Ja(He,st,rt){switch(rt.length){case 0:return He.call(st);case 1:return He.call(st,rt[0]);case 2:return He.call(st,rt[0],rt[1]);case 3:return He.call(st,rt[0],rt[1],rt[2])}return He.apply(st,rt)}function WS(He,st,rt,At){for(var Zt=-1,$n=He==null?0:He.length;++Zt<$n;){var Zr=He[Zt];st(At,Zr,rt(Zr),He)}return At}function Gi(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At&&st(He[rt],rt,He)!==!1;);return He}function YS(He,st){for(var rt=He==null?0:He.length;rt--&&st(He[rt],rt,He)!==!1;);return He}function l0(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(!st(He[rt],rt,He))return!1;return!0}function zs(He,st){for(var rt=-1,At=He==null?0:He.length,Zt=0,$n=[];++rt<At;){var Zr=He[rt];st(Zr,rt,He)&&($n[Zt++]=Zr)}return $n}function Jf(He,st){var rt=He==null?0:He.length;return!!rt&&nu(He,st,0)>-1}function yy(He,st,rt){for(var At=-1,Zt=He==null?0:He.length;++At<Zt;)if(rt(st,He[At]))return!0;return!1}function Ar(He,st){for(var rt=-1,At=He==null?0:He.length,Zt=Array(At);++rt<At;)Zt[rt]=st(He[rt],rt,He);return Zt}function mo(He,st){for(var rt=-1,At=st.length,Zt=He.length;++rt<At;)He[Zt+rt]=st[rt];return He}function xy(He,st,rt,At){var Zt=-1,$n=He==null?0:He.length;for(At&&$n&&(rt=He[++Zt]);++Zt<$n;)rt=st(rt,He[Zt],Zt,He);return rt}function KS(He,st,rt,At){var Zt=He==null?0:He.length;for(At&&Zt&&(rt=He[--Zt]);Zt--;)rt=st(rt,He[Zt],Zt,He);return rt}function vy(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(st(He[rt],rt,He))return!0;return!1}var QS=ep("length");function XS(He){return He.split("")}function JS(He){return He.match(qr)||[]}function c0(He,st,rt){var At;return rt(He,function(Zt,$n,Zr){if(st(Zt,$n,Zr))return At=$n,!1}),At}function Zf(He,st,rt,At){for(var Zt=He.length,$n=rt+(At?1:-1);At?$n--:++$n<Zt;)if(st(He[$n],$n,He))return $n;return-1}function nu(He,st,rt){return st===st?n_(He,st,rt):Zf(He,ru,rt)}function by(He,st,rt,At){for(var Zt=rt-1,$n=He.length;++Zt<$n;)if(At(He[Zt],st))return Zt;return-1}function ru(He){return He!==He}function u0(He,st){var rt=He==null?0:He.length;return rt?np(He,st)/rt:$}function ep(He){return function(st){return st==null?n:st[He]}}function tp(He){return function(st){return He==null?n:He[st]}}function jy(He,st,rt,At,Zt){return Zt(He,function($n,Zr,zn){rt=At?(At=!1,$n):st(rt,$n,Zr,zn)}),rt}function d0(He,st){var rt=He.length;for(He.sort(st);rt--;)He[rt]=He[rt].value;return He}function np(He,st){for(var rt,At=-1,Zt=He.length;++At<Zt;){var $n=st(He[At]);$n!==n&&(rt=rt===n?$n:rt+$n)}return rt}function Jo(He,st){for(var rt=-1,At=Array(He);++rt<He;)At[rt]=st(rt);return At}function ZS(He,st){return Ar(st,function(rt){return[rt,He[rt]]})}function h0(He){return He&&He.slice(0,Ny(He)+1).replace(br,"")}function bi(He){return function(st){return He(st)}}function rp(He,st){return Ar(st,function(rt){return He[rt]})}function au(He,st){return He.has(st)}function iu(He,st){for(var rt=-1,At=He.length;++rt<At&&nu(st,He[rt],0)>-1;);return rt}function su(He,st){for(var rt=He.length;rt--&&nu(st,He[rt],0)>-1;);return rt}function e_(He,st){for(var rt=He.length,At=0;rt--;)He[rt]===st&&++At;return At}var ap=tp(t0),f0=tp(Xa);function p0(He){return"\\"+Kf[He]}function wy(He,st){return He==null?n:He[st]}function Zo(He){return Qo.test(He)}function m0(He){return py.test(He)}function g0(He){for(var st,rt=[];!(st=He.next()).done;)rt.push(st.value);return rt}function ip(He){var st=-1,rt=Array(He.size);return He.forEach(function(At,Zt){rt[++st]=[Zt,At]}),rt}function y0(He,st){return function(rt){return He(st(rt))}}function el(He,st){for(var rt=-1,At=He.length,Zt=0,$n=[];++rt<At;){var Zr=He[rt];(Zr===st||Zr===f)&&(He[rt]=f,$n[Zt++]=rt)}return $n}function sp(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=At}),rt}function t_(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=[At,At]}),rt}function n_(He,st,rt){for(var At=rt-1,Zt=He.length;++At<Zt;)if(He[At]===st)return At;return-1}function ji(He,st,rt){for(var At=rt+1;At--;)if(He[At]===st)return At;return At}function Bs(He){return Zo(He)?v0(He):QS(He)}function Wi(He){return Zo(He)?Sy(He):XS(He)}function Ny(He){for(var st=He.length;st--&&Ba.test(He.charAt(st)););return st}var x0=tp(Gl);function v0(He){for(var st=Id.lastIndex=0;Id.test(He);)++st;return st}function Sy(He){return He.match(Id)||[]}function r_(He){return He.match(Rd)||[]}var ou=function He(st){st=st==null?Qr:tl.defaults(Qr.Object(),st,tl.pick(Qr,Yf));var rt=st.Array,At=st.Date,Zt=st.Error,$n=st.Function,Zr=st.Math,zn=st.Object,op=st.RegExp,b0=st.String,wi=st.TypeError,lp=rt.prototype,a_=$n.prototype,lu=zn.prototype,Fd=st["__core-js_shared__"],$d=a_.toString,Xn=lu.hasOwnProperty,ms=0,_y=function(){var y=/[^.]+$/.exec(Fd&&Fd.keys&&Fd.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),qa=lu.toString,Yi=$d.call(zn),cu=Qr._,Cy=op("^"+$d.call(Xn).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wl=n0?st.Buffer:n,gs=st.Symbol,uu=st.Uint8Array,Yl=Wl?Wl.allocUnsafe:n,zd=y0(zn.getPrototypeOf,zn),Bd=zn.create,Kl=lu.propertyIsEnumerable,cp=lp.splice,Za=gs?gs.isConcatSpreadable:n,Ql=gs?gs.iterator:n,Ua=gs?gs.toStringTag:n,qd=function(){try{var y=ul(zn,"defineProperty");return y({},"",{}),y}catch{}}(),up=st.clearTimeout!==Qr.clearTimeout&&st.clearTimeout,Xl=At&&At.now!==Qr.Date.now&&At.now,Ty=st.setTimeout!==Qr.setTimeout&&st.setTimeout,du=Zr.ceil,go=Zr.floor,nl=zn.getOwnPropertySymbols,dp=Wl?Wl.isBuffer:n,Ud=st.isFinite,Ki=lp.join,Qi=y0(zn.keys,zn),_r=Zr.max,Er=Zr.min,yo=At.now,Jl=st.parseInt,ky=Zr.random,Ay=lp.reverse,Vd=ul(st,"DataView"),sa=ul(st,"Map"),Pr=ul(st,"Promise"),kn=ul(st,"Set"),ys=ul(st,"WeakMap"),ei=ul(zn,"create"),hu=ys&&new ys,Xi={},j0=Co(Vd),w0=Co(sa),Hd=Co(Pr),Gd=Co(kn),N0=Co(ys),rl=gs?gs.prototype:n,Zl=rl?rl.valueOf:n,al=rl?rl.toString:n;function fe(y){if($r(y)&&!on(y)&&!(y instanceof vn)){if(y instanceof ti)return y;if(Xn.call(y,"__wrapped__"))return la(y)}return new ti(y)}var Ni=function(){function y(){}return function(N){if(!Or(N))return{};if(Bd)return Bd(N);y.prototype=N;var M=new y;return y.prototype=n,M}}();function Ji(){}function ti(y,N){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!N,this.__index__=0,this.__values__=n}fe.templateSettings={escape:Ue,evaluate:jt,interpolate:kt,variable:"",imports:{_:fe}},fe.prototype=Ji.prototype,fe.prototype.constructor=fe,ti.prototype=Ni(Ji.prototype),ti.prototype.constructor=ti;function vn(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function Wd(){var y=new vn(this.__wrapped__);return y.__actions__=oa(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=oa(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=oa(this.__views__),y}function hp(){if(this.__filtered__){var y=new vn(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function ec(){var y=this.__wrapped__.value(),N=this.__dir__,M=on(y),H=N<0,re=M?y.length:0,ve=n1(0,re,this.__views__),Pe=ve.start,ze=ve.end,Ye=ze-Pe,ft=H?ze:Pe-1,mt=this.__iteratees__,xt=mt.length,Et=0,$t=Er(Ye,this.__takeCount__);if(!M||!H&&re==Ye&&$t==Ye)return q0(y,this.__actions__);var en=[];e:for(;Ye--&&Et<$t;){ft+=N;for(var jn=-1,tn=y[ft];++jn<xt;){var Dn=mt[jn],qn=Dn.iteratee,Ss=Dn.type,Ei=qn(tn);if(Ss==G)tn=Ei;else if(!Ei){if(Ss==W)continue e;break e}}en[Et++]=tn}return en}vn.prototype=Ni(Ji.prototype),vn.prototype.constructor=vn;function Ur(y){var N=-1,M=y==null?0:y.length;for(this.clear();++N<M;){var H=y[N];this.set(H[0],H[1])}}function fp(){this.__data__=ei?ei(null):{},this.size=0}function S0(y){var N=this.has(y)&&delete this.__data__[y];return this.size-=N?1:0,N}function i_(y){var N=this.__data__;if(ei){var M=N[y];return M===c?n:M}return Xn.call(N,y)?N[y]:n}function s_(y){var N=this.__data__;return ei?N[y]!==n:Xn.call(N,y)}function o_(y,N){var M=this.__data__;return this.size+=this.has(y)?0:1,M[y]=ei&&N===n?c:N,this}Ur.prototype.clear=fp,Ur.prototype.delete=S0,Ur.prototype.get=i_,Ur.prototype.has=s_,Ur.prototype.set=o_;function mr(y){var N=-1,M=y==null?0:y.length;for(this.clear();++N<M;){var H=y[N];this.set(H[0],H[1])}}function Ey(){this.__data__=[],this.size=0}function Yd(y){var N=this.__data__,M=mu(N,y);if(M<0)return!1;var H=N.length-1;return M==H?N.pop():cp.call(N,M,1),--this.size,!0}function Kd(y){var N=this.__data__,M=mu(N,y);return M<0?n:N[M][1]}function Py(y){return mu(this.__data__,y)>-1}function fu(y,N){var M=this.__data__,H=mu(M,y);return H<0?(++this.size,M.push([y,N])):M[H][1]=N,this}mr.prototype.clear=Ey,mr.prototype.delete=Yd,mr.prototype.get=Kd,mr.prototype.has=Py,mr.prototype.set=fu;function ni(y){var N=-1,M=y==null?0:y.length;for(this.clear();++N<M;){var H=y[N];this.set(H[0],H[1])}}function l_(){this.size=0,this.__data__={hash:new Ur,map:new(sa||mr),string:new Ur}}function _0(y){var N=ju(this,y).delete(y);return this.size-=N?1:0,N}function c_(y){return ju(this,y).get(y)}function C0(y){return ju(this,y).has(y)}function tc(y,N){var M=ju(this,y),H=M.size;return M.set(y,N),this.size+=M.size==H?0:1,this}ni.prototype.clear=l_,ni.prototype.delete=_0,ni.prototype.get=c_,ni.prototype.has=C0,ni.prototype.set=tc;function xo(y){var N=-1,M=y==null?0:y.length;for(this.__data__=new ni;++N<M;)this.add(y[N])}function pp(y){return this.__data__.set(y,c),this}function T0(y){return this.__data__.has(y)}xo.prototype.add=xo.prototype.push=pp,xo.prototype.has=T0;function Va(y){var N=this.__data__=new mr(y);this.size=N.size}function k0(){this.__data__=new mr,this.size=0}function mp(y){var N=this.__data__,M=N.delete(y);return this.size=N.size,M}function Dy(y){return this.__data__.get(y)}function A0(y){return this.__data__.has(y)}function gp(y,N){var M=this.__data__;if(M instanceof mr){var H=M.__data__;if(!sa||H.length<i-1)return H.push([y,N]),this.size=++M.size,this;M=this.__data__=new ni(H)}return M.set(y,N),this.size=M.size,this}Va.prototype.clear=k0,Va.prototype.delete=mp,Va.prototype.get=Dy,Va.prototype.has=A0,Va.prototype.set=gp;function Oy(y,N){var M=on(y),H=!M&&Eo(y),re=!M&&!H&&bl(y),ve=!M&&!H&&!re&&Iu(y),Pe=M||H||re||ve,ze=Pe?Jo(y.length,b0):[],Ye=ze.length;for(var ft in y)(N||Xn.call(y,ft))&&!(Pe&&(ft=="length"||re&&(ft=="offset"||ft=="parent")||ve&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||js(ft,Ye)))&&ze.push(ft);return ze}function pu(y){var N=y.length;return N?y[Cp(0,N-1)]:n}function E0(y,N){return wh(oa(y),vs(N,0,y.length))}function P0(y){return wh(oa(y))}function qs(y,N,M){(M!==n&&!ci(y[N],M)||M===n&&!(N in y))&&xs(y,N,M)}function nc(y,N,M){var H=y[N];(!(Xn.call(y,N)&&ci(H,M))||M===n&&!(N in y))&&xs(y,N,M)}function mu(y,N){for(var M=y.length;M--;)if(ci(y[M][0],N))return M;return-1}function il(y,N,M,H){return bo(y,function(re,ve,Pe){N(H,re,M(re),Pe)}),H}function vo(y,N){return y&&ii(N,da(N),y)}function Qd(y,N){return y&&ii(N,ga(N),y)}function xs(y,N,M){N=="__proto__"&&qd?qd(y,N,{configurable:!0,enumerable:!0,value:M,writable:!0}):y[N]=M}function Xd(y,N){for(var M=-1,H=N.length,re=rt(H),ve=y==null;++M<H;)re[M]=ve?n:Rh(y,N[M]);return re}function vs(y,N,M){return y===y&&(M!==n&&(y=y<=M?y:M),N!==n&&(y=y>=N?y:N)),y}function Pa(y,N,M,H,re,ve){var Pe,ze=N&p,Ye=N&g,ft=N&x;if(M&&(Pe=re?M(y,H,re,ve):M(y)),Pe!==n)return Pe;if(!Or(y))return y;var mt=on(y);if(mt){if(Pe=ix(y),!ze)return oa(y,Pe)}else{var xt=ma(y),Et=xt==ue||xt==Te;if(bl(y))return Xy(y,ze);if(xt==Ne||xt==$e||Et&&!re){if(Pe=Ye||Et?{}:sx(y),!ze)return Ye?uh(y,Qd(Pe,y)):Dp(y,vo(Pe,y))}else{if(!tr[xt])return re?y:{};Pe=ox(y,xt,ze)}}ve||(ve=new Va);var $t=ve.get(y);if($t)return $t;ve.set(y,Pe),Y1(y)?y.forEach(function(tn){Pe.add(Pa(tn,N,M,tn,y,ve))}):rm(y)&&y.forEach(function(tn,Dn){Pe.set(Dn,Pa(tn,N,M,Dn,y,ve))});var en=ft?Ye?Rp:Ip:Ye?ga:da,jn=mt?n:en(y);return Gi(jn||y,function(tn,Dn){jn&&(Dn=tn,tn=y[Dn]),nc(Pe,Dn,Pa(tn,N,M,Dn,y,ve))}),Pe}function D0(y){var N=da(y);return function(M){return My(M,y,N)}}function My(y,N,M){var H=M.length;if(y==null)return!H;for(y=zn(y);H--;){var re=M[H],ve=N[re],Pe=y[re];if(Pe===n&&!(re in y)||!ve(Pe))return!1}return!0}function rc(y,N,M){if(typeof y!="function")throw new wi(o);return Nu(function(){y.apply(n,M)},N)}function sl(y,N,M,H){var re=-1,ve=Jf,Pe=!0,ze=y.length,Ye=[],ft=N.length;if(!ze)return Ye;M&&(N=Ar(N,bi(M))),H?(ve=yy,Pe=!1):N.length>=i&&(ve=au,Pe=!1,N=new xo(N));e:for(;++re<ze;){var mt=y[re],xt=M==null?mt:M(mt);if(mt=H||mt!==0?mt:0,Pe&&xt===xt){for(var Et=ft;Et--;)if(N[Et]===xt)continue e;Ye.push(mt)}else ve(N,xt,H)||Ye.push(mt)}return Ye}var bo=tx(Da),yp=tx(yu,!0);function Iy(y,N){var M=!0;return bo(y,function(H,re,ve){return M=!!N(H,re,ve),M}),M}function bs(y,N,M){for(var H=-1,re=y.length;++H<re;){var ve=y[H],Pe=N(ve);if(Pe!=null&&(ze===n?Pe===Pe&&!Wa(Pe):M(Pe,ze)))var ze=Pe,Ye=ve}return Ye}function yn(y,N,M,H){var re=y.length;for(M=un(M),M<0&&(M=-M>re?0:re+M),H=H===n||H>re?re:un(H),H<0&&(H+=re),H=M>H?0:Xs(H);M<H;)y[M++]=N;return y}function nr(y,N){var M=[];return bo(y,function(H,re,ve){N(H,re,ve)&&M.push(H)}),M}function An(y,N,M,H,re){var ve=-1,Pe=y.length;for(M||(M=So),re||(re=[]);++ve<Pe;){var ze=y[ve];N>0&&M(ze)?N>1?An(ze,N-1,M,H,re):mo(re,ze):H||(re[re.length]=ze)}return re}var gu=uc(),ac=uc(!0);function Da(y,N){return y&&gu(y,N,da)}function yu(y,N){return y&&ac(y,N,da)}function ol(y,N){return zs(N,function(M){return ws(y[M])})}function Zi(y,N){N=wo(N,y);for(var M=0,H=N.length;y!=null&&M<H;)y=y[Zn(N[M++])];return M&&M==H?y:n}function O0(y,N,M){var H=N(y);return on(y)?H:mo(H,M(y))}function Pn(y){return y==null?y===n?je:_e:Ua&&Ua in zn(y)?t1(y):o1(y)}function Jd(y,N){return y>N}function Ry(y,N){return y!=null&&Xn.call(y,N)}function M0(y,N){return y!=null&&N in zn(y)}function I0(y,N,M){return y>=Er(N,M)&&y<_r(N,M)}function Ly(y,N,M){for(var H=M?yy:Jf,re=y[0].length,ve=y.length,Pe=ve,ze=rt(ve),Ye=1/0,ft=[];Pe--;){var mt=y[Pe];Pe&&N&&(mt=Ar(mt,bi(N))),Ye=Er(mt.length,Ye),ze[Pe]=!M&&(N||re>=120&&mt.length>=120)?new xo(Pe&&mt):n}mt=y[0];var xt=-1,Et=ze[0];e:for(;++xt<re&&ft.length<Ye;){var $t=mt[xt],en=N?N($t):$t;if($t=M||$t!==0?$t:0,!(Et?au(Et,en):H(ft,en,M))){for(Pe=ve;--Pe;){var jn=ze[Pe];if(!(jn?au(jn,en):H(y[Pe],en,M)))continue e}Et&&Et.push(en),ft.push($t)}}return ft}function Fy(y,N,M,H){return Da(y,function(re,ve,Pe){N(H,M(re),ve,Pe)}),H}function ic(y,N,M){N=wo(N,y),y=wu(y,N);var H=y==null?y:y[Zn(Oa(N))];return H==null?n:Ja(H,y,M)}function xp(y){return $r(y)&&Pn(y)==$e}function ri(y){return $r(y)&&Pn(y)==ye}function ea(y){return $r(y)&&Pn(y)==Se}function sc(y,N,M,H,re){return y===N?!0:y==null||N==null||!$r(y)&&!$r(N)?y!==y&&N!==N:Zd(y,N,M,H,sc,re)}function Zd(y,N,M,H,re,ve){var Pe=on(y),ze=on(N),Ye=Pe?Be:ma(y),ft=ze?Be:ma(N);Ye=Ye==$e?Ne:Ye,ft=ft==$e?Ne:ft;var mt=Ye==Ne,xt=ft==Ne,Et=Ye==ft;if(Et&&bl(y)){if(!bl(N))return!1;Pe=!0,mt=!1}if(Et&&!mt)return ve||(ve=new Va),Pe||Iu(y)?Z0(y,N,M,H,re,ve):e1(y,N,Ye,M,H,re,ve);if(!(M&b)){var $t=mt&&Xn.call(y,"__wrapped__"),en=xt&&Xn.call(N,"__wrapped__");if($t||en){var jn=$t?y.value():y,tn=en?N.value():N;return ve||(ve=new Va),re(jn,tn,M,H,ve)}}return Et?(ve||(ve=new Va),pa(y,N,M,H,re,ve)):!1}function vp(y){return $r(y)&&ma(y)==oe}function eh(y,N,M,H){var re=M.length,ve=re,Pe=!H;if(y==null)return!ve;for(y=zn(y);re--;){var ze=M[re];if(Pe&&ze[2]?ze[1]!==y[ze[0]]:!(ze[0]in y))return!1}for(;++re<ve;){ze=M[re];var Ye=ze[0],ft=y[Ye],mt=ze[1];if(Pe&&ze[2]){if(ft===n&&!(Ye in y))return!1}else{var xt=new Va;if(H)var Et=H(ft,mt,Ye,y,N,xt);if(!(Et===n?sc(mt,ft,b|j,H,xt):Et))return!1}}return!0}function Us(y){if(!Or(y)||qp(y))return!1;var N=ws(y)?Cy:Sn;return N.test(Co(y))}function bp(y){return $r(y)&&Pn(y)==de}function $y(y){return $r(y)&&ma(y)==ae}function zy(y){return $r(y)&&mc(y.length)&&!!or[Pn(y)]}function By(y){return typeof y=="function"?y:y==null?Ze:typeof y=="object"?on(y)?Np(y[0],y[1]):Uy(y):Bn(y)}function jp(y){if(!gr(y))return Qi(y);var N=[];for(var M in zn(y))Xn.call(y,M)&&M!="constructor"&&N.push(M);return N}function R0(y){if(!Or(y))return dl(y);var N=gr(y),M=[];for(var H in y)H=="constructor"&&(N||!Xn.call(y,H))||M.push(H);return M}function wp(y,N){return y<N}function qy(y,N){var M=-1,H=ca(y)?rt(y.length):[];return bo(y,function(re,ve,Pe){H[++M]=N(re,ve,Pe)}),H}function Uy(y){var N=Fp(y);return N.length==1&&N[0][2]?i1(N[0][0],N[0][1]):function(M){return M===y||eh(M,y,N)}}function Np(y,N){return zp(y)&&a1(N)?i1(Zn(y),N):function(M){var H=Rh(M,y);return H===n&&H===N?$u(M,y):sc(N,H,b|j)}}function th(y,N,M,H,re){y!==N&&gu(N,function(ve,Pe){if(re||(re=new Va),Or(ve))u_(y,N,Pe,M,th,H,re);else{var ze=H?H(Up(y,Pe),ve,Pe+"",y,N,re):n;ze===n&&(ze=ve),qs(y,Pe,ze)}},ga)}function u_(y,N,M,H,re,ve,Pe){var ze=Up(y,M),Ye=Up(N,M),ft=Pe.get(Ye);if(ft){qs(y,M,ft);return}var mt=ve?ve(ze,Ye,M+"",y,N,Pe):n,xt=mt===n;if(xt){var Et=on(Ye),$t=!Et&&bl(Ye),en=!Et&&!$t&&Iu(Ye);mt=Ye,Et||$t||en?on(ze)?mt=ze:Gr(ze)?mt=oa(ze):$t?(xt=!1,mt=Xy(Ye,!0)):en?(xt=!1,mt=Zy(Ye,!0)):mt=[]:rs(Ye)||Eo(Ye)?(mt=ze,Eo(ze)?mt=X1(ze):(!Or(ze)||ws(ze))&&(mt=sx(Ye))):xt=!1}xt&&(Pe.set(Ye,mt),re(mt,Ye,H,ve,Pe),Pe.delete(Ye)),qs(y,M,mt)}function Vy(y,N){var M=y.length;if(M)return N+=N<0?M:0,js(N,M)?y[N]:n}function Hy(y,N,M){N.length?N=Ar(N,function(ve){return on(ve)?function(Pe){return Zi(Pe,ve.length===1?ve[0]:ve)}:ve}):N=[Ze];var H=-1;N=Ar(N,bi(Ut()));var re=qy(y,function(ve,Pe,ze){var Ye=Ar(N,function(ft){return ft(ve)});return{criteria:Ye,index:++H,value:ve}});return d0(re,function(ve,Pe){return G0(ve,Pe,M)})}function L0(y,N){return Sp(y,N,function(M,H){return $u(y,H)})}function Sp(y,N,M){for(var H=-1,re=N.length,ve={};++H<re;){var Pe=N[H],ze=Zi(y,Pe);M(ze,Pe)&&vu(ve,wo(Pe,y),ze)}return ve}function F0(y){return function(N){return Zi(N,y)}}function _p(y,N,M,H){var re=H?by:nu,ve=-1,Pe=N.length,ze=y;for(y===N&&(N=oa(N)),M&&(ze=Ar(y,bi(M)));++ve<Pe;)for(var Ye=0,ft=N[ve],mt=M?M(ft):ft;(Ye=re(ze,mt,Ye,H))>-1;)ze!==y&&cp.call(ze,Ye,1),cp.call(y,Ye,1);return y}function Gy(y,N){for(var M=y?N.length:0,H=M-1;M--;){var re=N[M];if(M==H||re!==ve){var ve=re;js(re)?cp.call(y,re,1):ih(y,re)}}return y}function Cp(y,N){return y+go(ky()*(N-y+1))}function $0(y,N,M,H){for(var re=-1,ve=_r(du((N-y)/(M||1)),0),Pe=rt(ve);ve--;)Pe[H?ve:++re]=y,y+=M;return Pe}function Wy(y,N){var M="";if(!y||N<1||N>Q)return M;do N%2&&(M+=y),N=go(N/2),N&&(y+=y);while(N);return M}function mn(y,N){return bh(lx(y,N,Ze),y+"")}function xu(y){return pu(Bu(y))}function Tp(y,N){var M=Bu(y);return wh(M,vs(N,0,M.length))}function vu(y,N,M,H){if(!Or(y))return y;N=wo(N,y);for(var re=-1,ve=N.length,Pe=ve-1,ze=y;ze!=null&&++re<ve;){var Ye=Zn(N[re]),ft=M;if(Ye==="__proto__"||Ye==="constructor"||Ye==="prototype")return y;if(re!=Pe){var mt=ze[Ye];ft=H?H(mt,Ye,ze):n,ft===n&&(ft=Or(mt)?mt:js(N[re+1])?[]:{})}nc(ze,Ye,ft),ze=ze[Ye]}return y}var nh=hu?function(y,N){return hu.set(y,N),y}:Ze,rh=qd?function(y,N){return qd(y,"toString",{configurable:!0,enumerable:!1,value:Je(N),writable:!0})}:Ze;function z0(y){return wh(Bu(y))}function Si(y,N,M){var H=-1,re=y.length;N<0&&(N=-N>re?0:re+N),M=M>re?re:M,M<0&&(M+=re),re=N>M?0:M-N>>>0,N>>>=0;for(var ve=rt(re);++H<re;)ve[H]=y[H+N];return ve}function B0(y,N){var M;return bo(y,function(H,re,ve){return M=N(H,re,ve),!M}),!!M}function ah(y,N,M){var H=0,re=y==null?H:y.length;if(typeof N=="number"&&N===N&&re<=X){for(;H<re;){var ve=H+re>>>1,Pe=y[ve];Pe!==null&&!Wa(Pe)&&(M?Pe<=N:Pe<N)?H=ve+1:re=ve}return re}return kp(y,N,Ze,M)}function kp(y,N,M,H){var re=0,ve=y==null?0:y.length;if(ve===0)return 0;N=M(N);for(var Pe=N!==N,ze=N===null,Ye=Wa(N),ft=N===n;re<ve;){var mt=go((re+ve)/2),xt=M(y[mt]),Et=xt!==n,$t=xt===null,en=xt===xt,jn=Wa(xt);if(Pe)var tn=H||en;else ft?tn=en&&(H||Et):ze?tn=en&&Et&&(H||!$t):Ye?tn=en&&Et&&!$t&&(H||!jn):$t||jn?tn=!1:tn=H?xt<=N:xt<N;tn?re=mt+1:ve=mt}return Er(ve,xe)}function Yy(y,N){for(var M=-1,H=y.length,re=0,ve=[];++M<H;){var Pe=y[M],ze=N?N(Pe):Pe;if(!M||!ci(ze,Ye)){var Ye=ze;ve[re++]=Pe===0?0:Pe}}return ve}function Ap(y){return typeof y=="number"?y:Wa(y)?$:+y}function ai(y){if(typeof y=="string")return y;if(on(y))return Ar(y,ai)+"";if(Wa(y))return al?al.call(y):"";var N=y+"";return N=="0"&&1/y==-1/0?"-0":N}function jo(y,N,M){var H=-1,re=Jf,ve=y.length,Pe=!0,ze=[],Ye=ze;if(M)Pe=!1,re=yy;else if(ve>=i){var ft=N?null:X0(y);if(ft)return sp(ft);Pe=!1,re=au,Ye=new xo}else Ye=N?[]:ze;e:for(;++H<ve;){var mt=y[H],xt=N?N(mt):mt;if(mt=M||mt!==0?mt:0,Pe&&xt===xt){for(var Et=Ye.length;Et--;)if(Ye[Et]===xt)continue e;N&&Ye.push(xt),ze.push(mt)}else re(Ye,xt,M)||(Ye!==ze&&Ye.push(xt),ze.push(mt))}return ze}function ih(y,N){return N=wo(N,y),y=wu(y,N),y==null||delete y[Zn(Oa(N))]}function Ky(y,N,M,H){return vu(y,N,M(Zi(y,N)),H)}function sh(y,N,M,H){for(var re=y.length,ve=H?re:-1;(H?ve--:++ve<re)&&N(y[ve],ve,y););return M?Si(y,H?0:ve,H?ve+1:re):Si(y,H?ve+1:0,H?re:ve)}function q0(y,N){var M=y;return M instanceof vn&&(M=M.value()),xy(N,function(H,re){return re.func.apply(re.thisArg,mo([H],re.args))},M)}function oh(y,N,M){var H=y.length;if(H<2)return H?jo(y[0]):[];for(var re=-1,ve=rt(H);++re<H;)for(var Pe=y[re],ze=-1;++ze<H;)ze!=re&&(ve[re]=sl(ve[re]||Pe,y[ze],N,M));return jo(An(ve,1),N,M)}function Qy(y,N,M){for(var H=-1,re=y.length,ve=N.length,Pe={};++H<re;){var ze=H<ve?N[H]:n;M(Pe,y[H],ze)}return Pe}function Ep(y){return Gr(y)?y:[]}function lh(y){return typeof y=="function"?y:Ze}function wo(y,N){return on(y)?y:zp(y,N)?[y]:Ws(Jn(y))}var U0=mn;function ll(y,N,M){var H=y.length;return M=M===n?H:M,!N&&M>=H?y:Si(y,N,M)}var V0=up||function(y){return Qr.clearTimeout(y)};function Xy(y,N){if(N)return y.slice();var M=y.length,H=Yl?Yl(M):new y.constructor(M);return y.copy(H),H}function oc(y){var N=new y.constructor(y.byteLength);return new uu(N).set(new uu(y)),N}function Jy(y,N){var M=N?oc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.byteLength)}function Pp(y){var N=new y.constructor(y.source,gt.exec(y));return N.lastIndex=y.lastIndex,N}function H0(y){return Zl?zn(Zl.call(y)):{}}function Zy(y,N){var M=N?oc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.length)}function ch(y,N){if(y!==N){var M=y!==n,H=y===null,re=y===y,ve=Wa(y),Pe=N!==n,ze=N===null,Ye=N===N,ft=Wa(N);if(!ze&&!ft&&!ve&&y>N||ve&&Pe&&Ye&&!ze&&!ft||H&&Pe&&Ye||!M&&Ye||!re)return 1;if(!H&&!ve&&!ft&&y<N||ft&&M&&re&&!H&&!ve||ze&&M&&re||!Pe&&re||!Ye)return-1}return 0}function G0(y,N,M){for(var H=-1,re=y.criteria,ve=N.criteria,Pe=re.length,ze=M.length;++H<Pe;){var Ye=ch(re[H],ve[H]);if(Ye){if(H>=ze)return Ye;var ft=M[H];return Ye*(ft=="desc"?-1:1)}}return y.index-N.index}function ex(y,N,M,H){for(var re=-1,ve=y.length,Pe=M.length,ze=-1,Ye=N.length,ft=_r(ve-Pe,0),mt=rt(Ye+ft),xt=!H;++ze<Ye;)mt[ze]=N[ze];for(;++re<Pe;)(xt||re<ve)&&(mt[M[re]]=y[re]);for(;ft--;)mt[ze++]=y[re++];return mt}function W0(y,N,M,H){for(var re=-1,ve=y.length,Pe=-1,ze=M.length,Ye=-1,ft=N.length,mt=_r(ve-ze,0),xt=rt(mt+ft),Et=!H;++re<mt;)xt[re]=y[re];for(var $t=re;++Ye<ft;)xt[$t+Ye]=N[Ye];for(;++Pe<ze;)(Et||re<ve)&&(xt[$t+M[Pe]]=y[re++]);return xt}function oa(y,N){var M=-1,H=y.length;for(N||(N=rt(H));++M<H;)N[M]=y[M];return N}function ii(y,N,M,H){var re=!M;M||(M={});for(var ve=-1,Pe=N.length;++ve<Pe;){var ze=N[ve],Ye=H?H(M[ze],y[ze],ze,M,y):n;Ye===n&&(Ye=y[ze]),re?xs(M,ze,Ye):nc(M,ze,Ye)}return M}function Dp(y,N){return ii(y,gh(y),N)}function uh(y,N){return ii(y,$p(y),N)}function lc(y,N){return function(M,H){var re=on(M)?WS:il,ve=N?N():{};return re(M,y,Ut(H,2),ve)}}function cc(y){return mn(function(N,M){var H=-1,re=M.length,ve=re>1?M[re-1]:n,Pe=re>2?M[2]:n;for(ve=y.length>3&&typeof ve=="function"?(re--,ve):n,Pe&&Ga(M[0],M[1],Pe)&&(ve=re<3?n:ve,re=1),N=zn(N);++H<re;){var ze=M[H];ze&&y(N,ze,H,ve)}return N})}function tx(y,N){return function(M,H){if(M==null)return M;if(!ca(M))return y(M,H);for(var re=M.length,ve=N?re:-1,Pe=zn(M);(N?ve--:++ve<re)&&H(Pe[ve],ve,Pe)!==!1;);return M}}function uc(y){return function(N,M,H){for(var re=-1,ve=zn(N),Pe=H(N),ze=Pe.length;ze--;){var Ye=Pe[y?ze:++re];if(M(ve[Ye],Ye,ve)===!1)break}return N}}function Y0(y,N,M){var H=N&w,re=es(y);function ve(){var Pe=this&&this!==Qr&&this instanceof ve?re:y;return Pe.apply(H?M:this,arguments)}return ve}function _i(y){return function(N){N=Jn(N);var M=Zo(N)?Wi(N):n,H=M?M[0]:N.charAt(0),re=M?ll(M,1).join(""):N.slice(1);return H[y]()+re}}function Ha(y){return function(N){return xy(E(Po(N).replace(Md,"")),y,"")}}function es(y){return function(){var N=arguments;switch(N.length){case 0:return new y;case 1:return new y(N[0]);case 2:return new y(N[0],N[1]);case 3:return new y(N[0],N[1],N[2]);case 4:return new y(N[0],N[1],N[2],N[3]);case 5:return new y(N[0],N[1],N[2],N[3],N[4]);case 6:return new y(N[0],N[1],N[2],N[3],N[4],N[5]);case 7:return new y(N[0],N[1],N[2],N[3],N[4],N[5],N[6])}var M=Ni(y.prototype),H=y.apply(M,N);return Or(H)?H:M}}function K0(y,N,M){var H=es(y);function re(){for(var ve=arguments.length,Pe=rt(ve),ze=ve,Ye=hc(re);ze--;)Pe[ze]=arguments[ze];var ft=ve<3&&Pe[0]!==Ye&&Pe[ve-1]!==Ye?[]:el(Pe,Ye);if(ve-=ft.length,ve<M)return nx(y,N,Vr,re.placeholder,n,Pe,ft,n,n,M-ve);var mt=this&&this!==Qr&&this instanceof re?H:y;return Ja(mt,this,Pe)}return re}function No(y){return function(N,M,H){var re=zn(N);if(!ca(N)){var ve=Ut(M,3);N=da(N),M=function(ze){return ve(re[ze],ze,re)}}var Pe=y(N,M,H);return Pe>-1?re[ve?N[Pe]:Pe]:n}}function Vs(y){return Cr(function(N){var M=N.length,H=M,re=ti.prototype.thru;for(y&&N.reverse();H--;){var ve=N[H];if(typeof ve!="function")throw new wi(o);if(re&&!Pe&&mh(ve)=="wrapper")var Pe=new ti([],!0)}for(H=Pe?H:M;++H<M;){ve=N[H];var ze=mh(ve),Ye=ze=="wrapper"?Lp(ve):n;Ye&&Bp(Ye[0])&&Ye[1]==(I|C|k|R)&&!Ye[4].length&&Ye[9]==1?Pe=Pe[mh(Ye[0])].apply(Pe,Ye[3]):Pe=ve.length==1&&Bp(ve)?Pe[ze]():Pe.thru(ve)}return function(){var ft=arguments,mt=ft[0];if(Pe&&ft.length==1&&on(mt))return Pe.plant(mt).value();for(var xt=0,Et=M?N[xt].apply(this,ft):mt;++xt<M;)Et=N[xt].call(this,Et);return Et}})}function Vr(y,N,M,H,re,ve,Pe,ze,Ye,ft){var mt=N&I,xt=N&w,Et=N&_,$t=N&(C|A),en=N&q,jn=Et?n:es(y);function tn(){for(var Dn=arguments.length,qn=rt(Dn),Ss=Dn;Ss--;)qn[Ss]=arguments[Ss];if($t)var Ei=hc(tn),_s=e_(qn,Ei);if(H&&(qn=ex(qn,H,re,$t)),ve&&(qn=W0(qn,ve,Pe,$t)),Dn-=_s,$t&&Dn<ft){var ha=el(qn,Ei);return nx(y,N,Vr,tn.placeholder,M,qn,ha,ze,Ye,ft-Dn)}var Do=xt?M:this,gc=Et?Do[y]:y;return Dn=qn.length,ze?qn=Gs(qn,ze):en&&Dn>1&&qn.reverse(),mt&&Ye<Dn&&(qn.length=Ye),this&&this!==Qr&&this instanceof tn&&(gc=jn||es(gc)),gc.apply(Do,qn)}return tn}function dh(y,N){return function(M,H){return Fy(M,y,N(H),{})}}function bu(y,N){return function(M,H){var re;if(M===n&&H===n)return N;if(M!==n&&(re=M),H!==n){if(re===n)return H;typeof M=="string"||typeof H=="string"?(M=ai(M),H=ai(H)):(M=Ap(M),H=Ap(H)),re=y(M,H)}return re}}function hh(y){return Cr(function(N){return N=Ar(N,bi(Ut())),mn(function(M){var H=this;return y(N,function(re){return Ja(re,H,M)})})})}function fh(y,N){N=N===n?" ":ai(N);var M=N.length;if(M<2)return M?Wy(N,y):N;var H=Wy(N,du(y/Bs(N)));return Zo(N)?ll(Wi(H),0,y).join(""):H.slice(0,y)}function Q0(y,N,M,H){var re=N&w,ve=es(y);function Pe(){for(var ze=-1,Ye=arguments.length,ft=-1,mt=H.length,xt=rt(mt+Ye),Et=this&&this!==Qr&&this instanceof Pe?ve:y;++ft<mt;)xt[ft]=H[ft];for(;Ye--;)xt[ft++]=arguments[++ze];return Ja(Et,re?M:this,xt)}return Pe}function cl(y){return function(N,M,H){return H&&typeof H!="number"&&Ga(N,M,H)&&(M=H=n),N=Qs(N),M===n?(M=N,N=0):M=Qs(M),H=H===n?N<M?1:-1:Qs(H),$0(N,M,H,y)}}function dc(y){return function(N,M){return typeof N=="string"&&typeof M=="string"||(N=as(N),M=as(M)),y(N,M)}}function nx(y,N,M,H,re,ve,Pe,ze,Ye,ft){var mt=N&C,xt=mt?Pe:n,Et=mt?n:Pe,$t=mt?ve:n,en=mt?n:ve;N|=mt?k:P,N&=~(mt?P:k),N&T||(N&=-4);var jn=[y,N,re,$t,xt,en,Et,ze,Ye,ft],tn=M.apply(n,jn);return Bp(y)&&Vp(tn,jn),tn.placeholder=H,Hp(tn,y,N)}function Op(y){var N=Zr[y];return function(M,H){if(M=as(M),H=H==null?0:Er(un(H),292),H&&Ud(M)){var re=(Jn(M)+"e").split("e"),ve=N(re[0]+"e"+(+re[1]+H));return re=(Jn(ve)+"e").split("e"),+(re[0]+"e"+(+re[1]-H))}return N(M)}}var X0=kn&&1/sp(new kn([,-0]))[1]==Y?function(y){return new kn(y)}:Mt;function ph(y){return function(N){var M=ma(N);return M==oe?ip(N):M==ae?t_(N):ZS(N,y(N))}}function Hs(y,N,M,H,re,ve,Pe,ze){var Ye=N&_;if(!Ye&&typeof y!="function")throw new wi(o);var ft=H?H.length:0;if(ft||(N&=-97,H=re=n),Pe=Pe===n?Pe:_r(un(Pe),0),ze=ze===n?ze:un(ze),ft-=re?re.length:0,N&P){var mt=H,xt=re;H=re=n}var Et=Ye?n:Lp(y),$t=[y,N,M,H,re,mt,xt,ve,Pe,ze];if(Et&&vh($t,Et),y=$t[0],N=$t[1],M=$t[2],H=$t[3],re=$t[4],ze=$t[9]=$t[9]===n?Ye?0:y.length:_r($t[9]-ft,0),!ze&&N&(C|A)&&(N&=-25),!N||N==w)var en=Y0(y,N,M);else N==C||N==A?en=K0(y,N,ze):(N==k||N==(w|k))&&!re.length?en=Q0(y,N,M,H):en=Vr.apply(n,$t);var jn=Et?nh:Vp;return Hp(jn(en,$t),y,N)}function Mp(y,N,M,H){return y===n||ci(y,lu[M])&&!Xn.call(H,M)?N:y}function rx(y,N,M,H,re,ve){return Or(y)&&Or(N)&&(ve.set(N,y),th(y,N,n,rx,ve),ve.delete(N)),y}function J0(y){return rs(y)?n:y}function Z0(y,N,M,H,re,ve){var Pe=M&b,ze=y.length,Ye=N.length;if(ze!=Ye&&!(Pe&&Ye>ze))return!1;var ft=ve.get(y),mt=ve.get(N);if(ft&&mt)return ft==N&&mt==y;var xt=-1,Et=!0,$t=M&j?new xo:n;for(ve.set(y,N),ve.set(N,y);++xt<ze;){var en=y[xt],jn=N[xt];if(H)var tn=Pe?H(jn,en,xt,N,y,ve):H(en,jn,xt,y,N,ve);if(tn!==n){if(tn)continue;Et=!1;break}if($t){if(!vy(N,function(Dn,qn){if(!au($t,qn)&&(en===Dn||re(en,Dn,M,H,ve)))return $t.push(qn)})){Et=!1;break}}else if(!(en===jn||re(en,jn,M,H,ve))){Et=!1;break}}return ve.delete(y),ve.delete(N),Et}function e1(y,N,M,H,re,ve,Pe){switch(M){case me:if(y.byteLength!=N.byteLength||y.byteOffset!=N.byteOffset)return!1;y=y.buffer,N=N.buffer;case ye:return!(y.byteLength!=N.byteLength||!ve(new uu(y),new uu(N)));case ce:case Se:case be:return ci(+y,+N);case Ae:return y.name==N.name&&y.message==N.message;case de:case ne:return y==N+"";case oe:var ze=ip;case ae:var Ye=H&b;if(ze||(ze=sp),y.size!=N.size&&!Ye)return!1;var ft=Pe.get(y);if(ft)return ft==N;H|=j,Pe.set(y,N);var mt=Z0(ze(y),ze(N),H,re,ve,Pe);return Pe.delete(y),mt;case se:if(Zl)return Zl.call(y)==Zl.call(N)}return!1}function pa(y,N,M,H,re,ve){var Pe=M&b,ze=Ip(y),Ye=ze.length,ft=Ip(N),mt=ft.length;if(Ye!=mt&&!Pe)return!1;for(var xt=Ye;xt--;){var Et=ze[xt];if(!(Pe?Et in N:Xn.call(N,Et)))return!1}var $t=ve.get(y),en=ve.get(N);if($t&&en)return $t==N&&en==y;var jn=!0;ve.set(y,N),ve.set(N,y);for(var tn=Pe;++xt<Ye;){Et=ze[xt];var Dn=y[Et],qn=N[Et];if(H)var Ss=Pe?H(qn,Dn,Et,N,y,ve):H(Dn,qn,Et,y,N,ve);if(!(Ss===n?Dn===qn||re(Dn,qn,M,H,ve):Ss)){jn=!1;break}tn||(tn=Et=="constructor")}if(jn&&!tn){var Ei=y.constructor,_s=N.constructor;Ei!=_s&&"constructor"in y&&"constructor"in N&&!(typeof Ei=="function"&&Ei instanceof Ei&&typeof _s=="function"&&_s instanceof _s)&&(jn=!1)}return ve.delete(y),ve.delete(N),jn}function Cr(y){return bh(lx(y,n,oi),y+"")}function Ip(y){return O0(y,da,gh)}function Rp(y){return O0(y,ga,$p)}var Lp=hu?function(y){return hu.get(y)}:Mt;function mh(y){for(var N=y.name+"",M=Xi[N],H=Xn.call(Xi,N)?M.length:0;H--;){var re=M[H],ve=re.func;if(ve==null||ve==y)return re.name}return N}function hc(y){var N=Xn.call(fe,"placeholder")?fe:y;return N.placeholder}function Ut(){var y=fe.iteratee||Kt;return y=y===Kt?By:y,arguments.length?y(arguments[0],arguments[1]):y}function ju(y,N){var M=y.__data__;return _o(N)?M[typeof N=="string"?"string":"hash"]:M.map}function Fp(y){for(var N=da(y),M=N.length;M--;){var H=N[M],re=y[H];N[M]=[H,re,a1(re)]}return N}function ul(y,N){var M=wy(y,N);return Us(M)?M:n}function t1(y){var N=Xn.call(y,Ua),M=y[Ua];try{y[Ua]=n;var H=!0}catch{}var re=qa.call(y);return H&&(N?y[Ua]=M:delete y[Ua]),re}var gh=nl?function(y){return y==null?[]:(y=zn(y),zs(nl(y),function(N){return Kl.call(y,N)}))}:W_,$p=nl?function(y){for(var N=[];y;)mo(N,gh(y)),y=zd(y);return N}:W_,ma=Pn;(Vd&&ma(new Vd(new ArrayBuffer(1)))!=me||sa&&ma(new sa)!=oe||Pr&&ma(Pr.resolve())!=ee||kn&&ma(new kn)!=ae||ys&&ma(new ys)!=Ee)&&(ma=function(y){var N=Pn(y),M=N==Ne?y.constructor:n,H=M?Co(M):"";if(H)switch(H){case j0:return me;case w0:return oe;case Hd:return ee;case Gd:return ae;case N0:return Ee}return N});function n1(y,N,M){for(var H=-1,re=M.length;++H<re;){var ve=M[H],Pe=ve.size;switch(ve.type){case"drop":y+=Pe;break;case"dropRight":N-=Pe;break;case"take":N=Er(N,y+Pe);break;case"takeRight":y=_r(y,N-Pe);break}}return{start:y,end:N}}function ax(y){var N=y.match(wa);return N?N[1].split(pn):[]}function yh(y,N,M){N=wo(N,y);for(var H=-1,re=N.length,ve=!1;++H<re;){var Pe=Zn(N[H]);if(!(ve=y!=null&&M(y,Pe)))break;y=y[Pe]}return ve||++H!=re?ve:(re=y==null?0:y.length,!!re&&mc(re)&&js(Pe,re)&&(on(y)||Eo(y)))}function ix(y){var N=y.length,M=new y.constructor(N);return N&&typeof y[0]=="string"&&Xn.call(y,"index")&&(M.index=y.index,M.input=y.input),M}function sx(y){return typeof y.constructor=="function"&&!gr(y)?Ni(zd(y)):{}}function ox(y,N,M){var H=y.constructor;switch(N){case ye:return oc(y);case ce:case Se:return new H(+y);case me:return Jy(y,M);case he:case De:case nt:case Fe:case Ge:case it:case wt:case we:case Qe:return Zy(y,M);case oe:return new H;case be:case ne:return new H(y);case de:return Pp(y);case ae:return new H;case se:return H0(y)}}function r1(y,N){var M=N.length;if(!M)return y;var H=M-1;return N[H]=(M>1?"& ":"")+N[H],N=N.join(M>2?", ":" "),y.replace(Jr,`{
/* [wrapped with `+N+`] */
`)}function So(y){return on(y)||Eo(y)||!!(Za&&y&&y[Za])}function js(y,N){var M=typeof y;return N=N??Q,!!N&&(M=="number"||M!="symbol"&&Na.test(y))&&y>-1&&y%1==0&&y<N}function Ga(y,N,M){if(!Or(M))return!1;var H=typeof N;return(H=="number"?ca(M)&&js(N,M.length):H=="string"&&N in M)?ci(M[N],y):!1}function zp(y,N){if(on(y))return!1;var M=typeof y;return M=="number"||M=="symbol"||M=="boolean"||y==null||Wa(y)?!0:vt.test(y)||!Kn.test(y)||N!=null&&y in zn(N)}function _o(y){var N=typeof y;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?y!=="__proto__":y===null}function Bp(y){var N=mh(y),M=fe[N];if(typeof M!="function"||!(N in vn.prototype))return!1;if(y===M)return!0;var H=Lp(M);return!!H&&y===H[0]}function qp(y){return!!_y&&_y in y}var xh=Fd?ws:Y_;function gr(y){var N=y&&y.constructor,M=typeof N=="function"&&N.prototype||lu;return y===M}function a1(y){return y===y&&!Or(y)}function i1(y,N){return function(M){return M==null?!1:M[y]===N&&(N!==n||y in zn(M))}}function s1(y){var N=Eh(y,function(H){return M.size===u&&M.clear(),H}),M=N.cache;return N}function vh(y,N){var M=y[1],H=N[1],re=M|H,ve=re<(w|_|I),Pe=H==I&&M==C||H==I&&M==R&&y[7].length<=N[8]||H==(I|R)&&N[7].length<=N[8]&&M==C;if(!(ve||Pe))return y;H&w&&(y[2]=N[2],re|=M&w?0:T);var ze=N[3];if(ze){var Ye=y[3];y[3]=Ye?ex(Ye,ze,N[4]):ze,y[4]=Ye?el(y[3],f):N[4]}return ze=N[5],ze&&(Ye=y[5],y[5]=Ye?W0(Ye,ze,N[6]):ze,y[6]=Ye?el(y[5],f):N[6]),ze=N[7],ze&&(y[7]=ze),H&I&&(y[8]=y[8]==null?N[8]:Er(y[8],N[8])),y[9]==null&&(y[9]=N[9]),y[0]=N[0],y[1]=re,y}function dl(y){var N=[];if(y!=null)for(var M in zn(y))N.push(M);return N}function o1(y){return qa.call(y)}function lx(y,N,M){return N=_r(N===n?y.length-1:N,0),function(){for(var H=arguments,re=-1,ve=_r(H.length-N,0),Pe=rt(ve);++re<ve;)Pe[re]=H[N+re];re=-1;for(var ze=rt(N+1);++re<N;)ze[re]=H[re];return ze[N]=M(Pe),Ja(y,this,ze)}}function wu(y,N){return N.length<2?y:Zi(y,Si(N,0,-1))}function Gs(y,N){for(var M=y.length,H=Er(N.length,M),re=oa(y);H--;){var ve=N[H];y[H]=js(ve,M)?re[ve]:n}return y}function Up(y,N){if(!(N==="constructor"&&typeof y[N]=="function")&&N!="__proto__")return y[N]}var Vp=jh(nh),Nu=Ty||function(y,N){return Qr.setTimeout(y,N)},bh=jh(rh);function Hp(y,N,M){var H=N+"";return bh(y,r1(H,l1(ax(H),M)))}function jh(y){var N=0,M=0;return function(){var H=yo(),re=V-(H-M);if(M=H,re>0){if(++N>=B)return arguments[0]}else N=0;return y.apply(n,arguments)}}function wh(y,N){var M=-1,H=y.length,re=H-1;for(N=N===n?H:N;++M<N;){var ve=Cp(M,re),Pe=y[ve];y[ve]=y[M],y[M]=Pe}return y.length=N,y}var Ws=s1(function(y){var N=[];return y.charCodeAt(0)===46&&N.push(""),y.replace(Dt,function(M,H,re,ve){N.push(re?ve.replace(Rn,"$1"):H||M)}),N});function Zn(y){if(typeof y=="string"||Wa(y))return y;var N=y+"";return N=="0"&&1/y==-1/0?"-0":N}function Co(y){if(y!=null){try{return $d.call(y)}catch{}try{return y+""}catch{}}return""}function l1(y,N){return Gi(Ie,function(M){var H="_."+M[0];N&M[1]&&!Jf(y,H)&&y.push(H)}),y.sort()}function la(y){if(y instanceof vn)return y.clone();var N=new ti(y.__wrapped__,y.__chain__);return N.__actions__=oa(y.__actions__),N.__index__=y.__index__,N.__values__=y.__values__,N}function d_(y,N,M){(M?Ga(y,N,M):N===n)?N=1:N=_r(un(N),0);var H=y==null?0:y.length;if(!H||N<1)return[];for(var re=0,ve=0,Pe=rt(du(H/N));re<H;)Pe[ve++]=Si(y,re,re+=N);return Pe}function c1(y){for(var N=-1,M=y==null?0:y.length,H=0,re=[];++N<M;){var ve=y[N];ve&&(re[H++]=ve)}return re}function u1(){var y=arguments.length;if(!y)return[];for(var N=rt(y-1),M=arguments[0],H=y;H--;)N[H-1]=arguments[H];return mo(on(M)?oa(M):[M],An(N,1))}var Dr=mn(function(y,N){return Gr(y)?sl(y,An(N,1,Gr,!0)):[]}),si=mn(function(y,N){var M=Oa(N);return Gr(M)&&(M=n),Gr(y)?sl(y,An(N,1,Gr,!0),Ut(M,2)):[]}),To=mn(function(y,N){var M=Oa(N);return Gr(M)&&(M=n),Gr(y)?sl(y,An(N,1,Gr,!0),n,M):[]});function d1(y,N,M){var H=y==null?0:y.length;return H?(N=M||N===n?1:un(N),Si(y,N<0?0:N,H)):[]}function h1(y,N,M){var H=y==null?0:y.length;return H?(N=M||N===n?1:un(N),N=H-N,Si(y,0,N<0?0:N)):[]}function h_(y,N){return y&&y.length?sh(y,Ut(N,3),!0,!0):[]}function cx(y,N){return y&&y.length?sh(y,Ut(N,3),!0):[]}function Ci(y,N,M,H){var re=y==null?0:y.length;return re?(M&&typeof M!="number"&&Ga(y,N,M)&&(M=0,H=re),yn(y,N,M,H)):[]}function ts(y,N,M){var H=y==null?0:y.length;if(!H)return-1;var re=M==null?0:un(M);return re<0&&(re=_r(H+re,0)),Zf(y,Ut(N,3),re)}function ux(y,N,M){var H=y==null?0:y.length;if(!H)return-1;var re=H-1;return M!==n&&(re=un(M),re=M<0?_r(H+re,0):Er(re,H-1)),Zf(y,Ut(N,3),re,!0)}function oi(y){var N=y==null?0:y.length;return N?An(y,1):[]}function f1(y){var N=y==null?0:y.length;return N?An(y,Y):[]}function hl(y,N){var M=y==null?0:y.length;return M?(N=N===n?1:un(N),An(y,N)):[]}function fc(y){for(var N=-1,M=y==null?0:y.length,H={};++N<M;){var re=y[N];H[re[0]]=re[1]}return H}function ko(y){return y&&y.length?y[0]:n}function dx(y,N,M){var H=y==null?0:y.length;if(!H)return-1;var re=M==null?0:un(M);return re<0&&(re=_r(H+re,0)),nu(y,N,re)}function hx(y){var N=y==null?0:y.length;return N?Si(y,0,-1):[]}var Ys=mn(function(y){var N=Ar(y,Ep);return N.length&&N[0]===y[0]?Ly(N):[]}),p1=mn(function(y){var N=Oa(y),M=Ar(y,Ep);return N===Oa(M)?N=n:M.pop(),M.length&&M[0]===y[0]?Ly(M,Ut(N,2)):[]}),Su=mn(function(y){var N=Oa(y),M=Ar(y,Ep);return N=typeof N=="function"?N:n,N&&M.pop(),M.length&&M[0]===y[0]?Ly(M,n,N):[]});function Nh(y,N){return y==null?"":Ki.call(y,N)}function Oa(y){var N=y==null?0:y.length;return N?y[N-1]:n}function _u(y,N,M){var H=y==null?0:y.length;if(!H)return-1;var re=H;return M!==n&&(re=un(M),re=re<0?_r(H+re,0):Er(re,H-1)),N===N?ji(y,N,re):Zf(y,ru,re,!0)}function m1(y,N){return y&&y.length?Vy(y,un(N)):n}var g1=mn(Cu);function Cu(y,N){return y&&y.length&&N&&N.length?_p(y,N):y}function y1(y,N,M){return y&&y.length&&N&&N.length?_p(y,N,Ut(M,2)):y}function Gp(y,N,M){return y&&y.length&&N&&N.length?_p(y,N,n,M):y}var x1=Cr(function(y,N){var M=y==null?0:y.length,H=Xd(y,N);return Gy(y,Ar(N,function(re){return js(re,M)?+re:re}).sort(ch)),H});function f_(y,N){var M=[];if(!(y&&y.length))return M;var H=-1,re=[],ve=y.length;for(N=Ut(N,3);++H<ve;){var Pe=y[H];N(Pe,H,y)&&(M.push(Pe),re.push(H))}return Gy(y,re),M}function fx(y){return y==null?y:Ay.call(y)}function rr(y,N,M){var H=y==null?0:y.length;return H?(M&&typeof M!="number"&&Ga(y,N,M)?(N=0,M=H):(N=N==null?0:un(N),M=M===n?H:un(M)),Si(y,N,M)):[]}function jr(y,N){return ah(y,N)}function _n(y,N,M){return kp(y,N,Ut(M,2))}function Fn(y,N){var M=y==null?0:y.length;if(M){var H=ah(y,N);if(H<M&&ci(y[H],N))return H}return-1}function ar(y,N){return ah(y,N,!0)}function Ti(y,N,M){return kp(y,N,Ut(M,2),!0)}function fl(y,N){var M=y==null?0:y.length;if(M){var H=ah(y,N,!0)-1;if(ci(y[H],N))return H}return-1}function Tu(y){return y&&y.length?Yy(y):[]}function px(y,N){return y&&y.length?Yy(y,Ut(N,2)):[]}function Ao(y){var N=y==null?0:y.length;return N?Si(y,1,N):[]}function Hr(y,N,M){return y&&y.length?(N=M||N===n?1:un(N),Si(y,0,N<0?0:N)):[]}function pl(y,N,M){var H=y==null?0:y.length;return H?(N=M||N===n?1:un(N),N=H-N,Si(y,N<0?0:N,H)):[]}function pc(y,N){return y&&y.length?sh(y,Ut(N,3),!1,!0):[]}function mx(y,N){return y&&y.length?sh(y,Ut(N,3)):[]}var ns=mn(function(y){return jo(An(y,1,Gr,!0))}),ku=mn(function(y){var N=Oa(y);return Gr(N)&&(N=n),jo(An(y,1,Gr,!0),Ut(N,2))}),Sh=mn(function(y){var N=Oa(y);return N=typeof N=="function"?N:n,jo(An(y,1,Gr,!0),n,N)});function li(y){return y&&y.length?jo(y):[]}function gx(y,N){return y&&y.length?jo(y,Ut(N,2)):[]}function yx(y,N){return N=typeof N=="function"?N:n,y&&y.length?jo(y,n,N):[]}function Au(y){if(!(y&&y.length))return[];var N=0;return y=zs(y,function(M){if(Gr(M))return N=_r(M.length,N),!0}),Jo(N,function(M){return Ar(y,ep(M))})}function _h(y,N){if(!(y&&y.length))return[];var M=Au(y);return N==null?M:Ar(M,function(H){return Ja(N,n,H)})}var ml=mn(function(y,N){return Gr(y)?sl(y,N):[]}),Sa=mn(function(y){return oh(zs(y,Gr))}),gl=mn(function(y){var N=Oa(y);return Gr(N)&&(N=n),oh(zs(y,Gr),Ut(N,2))}),Eu=mn(function(y){var N=Oa(y);return N=typeof N=="function"?N:n,oh(zs(y,Gr),n,N)}),Pu=mn(Au);function xx(y,N){return Qy(y||[],N||[],nc)}function vx(y,N){return Qy(y||[],N||[],vu)}var v1=mn(function(y){var N=y.length,M=N>1?y[N-1]:n;return M=typeof M=="function"?(y.pop(),M):n,_h(y,M)});function Du(y){var N=fe(y);return N.__chain__=!0,N}function bx(y,N){return N(y),y}function Ma(y,N){return N(y)}var b1=Cr(function(y){var N=y.length,M=N?y[0]:0,H=this.__wrapped__,re=function(ve){return Xd(ve,y)};return N>1||this.__actions__.length||!(H instanceof vn)||!js(M)?this.thru(re):(H=H.slice(M,+M+(N?1:0)),H.__actions__.push({func:Ma,args:[re],thisArg:n}),new ti(H,this.__chain__).thru(function(ve){return N&&!ve.length&&ve.push(n),ve}))});function ki(){return Du(this)}function j1(){return new ti(this.value(),this.__chain__)}function w1(){this.__values__===n&&(this.__values__=Ai(this.value()));var y=this.__index__>=this.__values__.length,N=y?n:this.__values__[this.__index__++];return{done:y,value:N}}function p_(){return this}function yl(y){for(var N,M=this;M instanceof Ji;){var H=la(M);H.__index__=0,H.__values__=n,N?re.__wrapped__=H:N=H;var re=H;M=M.__wrapped__}return re.__wrapped__=y,N}function Wp(){var y=this.__wrapped__;if(y instanceof vn){var N=y;return this.__actions__.length&&(N=new vn(this)),N=N.reverse(),N.__actions__.push({func:Ma,args:[fx],thisArg:n}),new ti(N,this.__chain__)}return this.thru(fx)}function jx(){return q0(this.__wrapped__,this.__actions__)}var Ou=lc(function(y,N,M){Xn.call(y,M)?++y[M]:xs(y,M,1)});function N1(y,N,M){var H=on(y)?l0:Iy;return M&&Ga(y,N,M)&&(N=n),H(y,Ut(N,3))}function S1(y,N){var M=on(y)?zs:nr;return M(y,Ut(N,3))}var _1=No(ts),wx=No(ux);function Nx(y,N){return An(Ch(y,N),1)}function m_(y,N){return An(Ch(y,N),Y)}function g_(y,N,M){return M=M===n?1:un(M),An(Ch(y,N),M)}function C1(y,N){var M=on(y)?Gi:bo;return M(y,Ut(N,3))}function Sx(y,N){var M=on(y)?YS:yp;return M(y,Ut(N,3))}var T1=lc(function(y,N,M){Xn.call(y,M)?y[M].push(N):xs(y,M,[N])});function Mu(y,N,M,H){y=ca(y)?y:Bu(y),M=M&&!H?un(M):0;var re=y.length;return M<0&&(M=_r(re+M,0)),im(y)?M<=re&&y.indexOf(N,M)>-1:!!re&&nu(y,N,M)>-1}var Yp=mn(function(y,N,M){var H=-1,re=typeof N=="function",ve=ca(y)?rt(y.length):[];return bo(y,function(Pe){ve[++H]=re?Ja(N,Pe,M):ic(Pe,N,M)}),ve}),k1=lc(function(y,N,M){xs(y,M,N)});function Ch(y,N){var M=on(y)?Ar:qy;return M(y,Ut(N,3))}function A1(y,N,M,H){return y==null?[]:(on(N)||(N=N==null?[]:[N]),M=H?n:M,on(M)||(M=M==null?[]:[M]),Hy(y,N,M))}var E1=lc(function(y,N,M){y[M?0:1].push(N)},function(){return[[],[]]});function P1(y,N,M){var H=on(y)?xy:jy,re=arguments.length<3;return H(y,Ut(N,4),M,re,bo)}function D1(y,N,M){var H=on(y)?KS:jy,re=arguments.length<3;return H(y,Ut(N,4),M,re,yp)}function Kp(y,N){var M=on(y)?zs:nr;return M(y,Ph(Ut(N,3)))}function O1(y){var N=on(y)?pu:xu;return N(y)}function M1(y,N,M){(M?Ga(y,N,M):N===n)?N=1:N=un(N);var H=on(y)?E0:Tp;return H(y,N)}function yr(y){var N=on(y)?P0:z0;return N(y)}function _x(y){if(y==null)return 0;if(ca(y))return im(y)?Bs(y):y.length;var N=ma(y);return N==oe||N==ae?y.size:jp(y).length}function y_(y,N,M){var H=on(y)?vy:B0;return M&&Ga(y,N,M)&&(N=n),H(y,Ut(N,3))}var I1=mn(function(y,N){if(y==null)return[];var M=N.length;return M>1&&Ga(y,N[0],N[1])?N=[]:M>2&&Ga(N[0],N[1],N[2])&&(N=[N[0]]),Hy(y,An(N,1),[])}),Qp=Xl||function(){return Qr.Date.now()};function x_(y,N){if(typeof N!="function")throw new wi(o);return y=un(y),function(){if(--y<1)return N.apply(this,arguments)}}function R1(y,N,M){return N=M?n:N,N=y&&N==null?y.length:N,Hs(y,I,n,n,n,n,N)}function Th(y,N){var M;if(typeof N!="function")throw new wi(o);return y=un(y),function(){return--y>0&&(M=N.apply(this,arguments)),y<=1&&(N=n),M}}var xl=mn(function(y,N,M){var H=w;if(M.length){var re=el(M,hc(xl));H|=k}return Hs(y,H,N,M,re)}),Xp=mn(function(y,N,M){var H=w|_;if(M.length){var re=el(M,hc(Xp));H|=k}return Hs(N,H,y,M,re)});function kh(y,N,M){N=M?n:N;var H=Hs(y,C,n,n,n,n,n,N);return H.placeholder=kh.placeholder,H}function Jp(y,N,M){N=M?n:N;var H=Hs(y,A,n,n,n,n,n,N);return H.placeholder=Jp.placeholder,H}function vl(y,N,M){var H,re,ve,Pe,ze,Ye,ft=0,mt=!1,xt=!1,Et=!0;if(typeof y!="function")throw new wi(o);N=as(N)||0,Or(M)&&(mt=!!M.leading,xt="maxWait"in M,ve=xt?_r(as(M.maxWait)||0,N):ve,Et="trailing"in M?!!M.trailing:Et);function $t(ha){var Do=H,gc=re;return H=re=n,ft=ha,Pe=y.apply(gc,Do),Pe}function en(ha){return ft=ha,ze=Nu(Dn,N),mt?$t(ha):Pe}function jn(ha){var Do=ha-Ye,gc=ha-ft,VM=N-Do;return xt?Er(VM,ve-gc):VM}function tn(ha){var Do=ha-Ye,gc=ha-ft;return Ye===n||Do>=N||Do<0||xt&&gc>=ve}function Dn(){var ha=Qp();if(tn(ha))return qn(ha);ze=Nu(Dn,jn(ha))}function qn(ha){return ze=n,Et&&H?$t(ha):(H=re=n,Pe)}function Ss(){ze!==n&&V0(ze),ft=0,H=Ye=re=ze=n}function Ei(){return ze===n?Pe:qn(Qp())}function _s(){var ha=Qp(),Do=tn(ha);if(H=arguments,re=this,Ye=ha,Do){if(ze===n)return en(Ye);if(xt)return V0(ze),ze=Nu(Dn,N),$t(Ye)}return ze===n&&(ze=Nu(Dn,N)),Pe}return _s.cancel=Ss,_s.flush=Ei,_s}var Ks=mn(function(y,N){return rc(y,1,N)}),Ah=mn(function(y,N,M){return rc(y,as(N)||0,M)});function v_(y){return Hs(y,q)}function Eh(y,N){if(typeof y!="function"||N!=null&&typeof N!="function")throw new wi(o);var M=function(){var H=arguments,re=N?N.apply(this,H):H[0],ve=M.cache;if(ve.has(re))return ve.get(re);var Pe=y.apply(this,H);return M.cache=ve.set(re,Pe)||ve,Pe};return M.cache=new(Eh.Cache||ni),M}Eh.Cache=ni;function Ph(y){if(typeof y!="function")throw new wi(o);return function(){var N=arguments;switch(N.length){case 0:return!y.call(this);case 1:return!y.call(this,N[0]);case 2:return!y.call(this,N[0],N[1]);case 3:return!y.call(this,N[0],N[1],N[2])}return!y.apply(this,N)}}function L1(y){return Th(2,y)}var F1=U0(function(y,N){N=N.length==1&&on(N[0])?Ar(N[0],bi(Ut())):Ar(An(N,1),bi(Ut()));var M=N.length;return mn(function(H){for(var re=-1,ve=Er(H.length,M);++re<ve;)H[re]=N[re].call(this,H[re]);return Ja(y,this,H)})}),Cx=mn(function(y,N){var M=el(N,hc(Cx));return Hs(y,k,n,N,M)}),Zp=mn(function(y,N){var M=el(N,hc(Zp));return Hs(y,P,n,N,M)}),$1=Cr(function(y,N){return Hs(y,R,n,n,n,N)});function z1(y,N){if(typeof y!="function")throw new wi(o);return N=N===n?N:un(N),mn(y,N)}function b_(y,N){if(typeof y!="function")throw new wi(o);return N=N==null?0:_r(un(N),0),mn(function(M){var H=M[N],re=ll(M,0,N);return H&&mo(re,H),Ja(y,this,re)})}function Tx(y,N,M){var H=!0,re=!0;if(typeof y!="function")throw new wi(o);return Or(M)&&(H="leading"in M?!!M.leading:H,re="trailing"in M?!!M.trailing:re),vl(y,N,{leading:H,maxWait:N,trailing:re})}function kx(y){return R1(y,1)}function j_(y,N){return Cx(lh(N),y)}function w_(){if(!arguments.length)return[];var y=arguments[0];return on(y)?y:[y]}function Dh(y){return Pa(y,x)}function N_(y,N){return N=typeof N=="function"?N:n,Pa(y,x,N)}function B1(y){return Pa(y,p|x)}function Cn(y,N){return N=typeof N=="function"?N:n,Pa(y,p|x,N)}function Ax(y,N){return N==null||My(y,N,da(N))}function ci(y,N){return y===N||y!==y&&N!==N}var Ex=dc(Jd),q1=dc(function(y,N){return y>=N}),Eo=xp(function(){return arguments}())?xp:function(y){return $r(y)&&Xn.call(y,"callee")&&!Kl.call(y,"callee")},on=rt.isArray,em=Xf?bi(Xf):ri;function ca(y){return y!=null&&mc(y.length)&&!ws(y)}function Gr(y){return $r(y)&&ca(y)}function S_(y){return y===!0||y===!1||$r(y)&&Pn(y)==ce}var bl=dp||Y_,U1=r0?bi(r0):ea;function V1(y){return $r(y)&&y.nodeType===1&&!rs(y)}function tm(y){if(y==null)return!0;if(ca(y)&&(on(y)||typeof y=="string"||typeof y.splice=="function"||bl(y)||Iu(y)||Eo(y)))return!y.length;var N=ma(y);if(N==oe||N==ae)return!y.size;if(gr(y))return!jp(y).length;for(var M in y)if(Xn.call(y,M))return!1;return!0}function lr(y,N){return sc(y,N)}function Px(y,N,M){M=typeof M=="function"?M:n;var H=M?M(y,N):n;return H===n?sc(y,N,n,M):!!H}function ua(y){if(!$r(y))return!1;var N=Pn(y);return N==Ae||N==Ve||typeof y.message=="string"&&typeof y.name=="string"&&!rs(y)}function __(y){return typeof y=="number"&&Ud(y)}function ws(y){if(!Or(y))return!1;var N=Pn(y);return N==ue||N==Te||N==Le||N==ge}function nm(y){return typeof y=="number"&&y==un(y)}function mc(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=Q}function Or(y){var N=typeof y;return y!=null&&(N=="object"||N=="function")}function $r(y){return y!=null&&typeof y=="object"}var rm=a0?bi(a0):vp;function Dx(y,N){return y===N||eh(y,N,Fp(N))}function C_(y,N,M){return M=typeof M=="function"?M:n,eh(y,N,Fp(N),M)}function H1(y){return W1(y)&&y!=+y}function T_(y){if(xh(y))throw new Zt(s);return Us(y)}function G1(y){return y===null}function k_(y){return y==null}function W1(y){return typeof y=="number"||$r(y)&&Pn(y)==be}function rs(y){if(!$r(y)||Pn(y)!=Ne)return!1;var N=zd(y);if(N===null)return!0;var M=Xn.call(N,"constructor")&&N.constructor;return typeof M=="function"&&M instanceof M&&$d.call(M)==Yi}var am=i0?bi(i0):bp;function Ox(y){return nm(y)&&y>=-9007199254740991&&y<=Q}var Y1=s0?bi(s0):$y;function im(y){return typeof y=="string"||!on(y)&&$r(y)&&Pn(y)==ne}function Wa(y){return typeof y=="symbol"||$r(y)&&Pn(y)==se}var Iu=o0?bi(o0):zy;function Ns(y){return y===n}function Mx(y){return $r(y)&&ma(y)==Ee}function K1(y){return $r(y)&&Pn(y)==J}var Q1=dc(wp),Oh=dc(function(y,N){return y<=N});function Ai(y){if(!y)return[];if(ca(y))return im(y)?Wi(y):oa(y);if(Ql&&y[Ql])return g0(y[Ql]());var N=ma(y),M=N==oe?ip:N==ae?sp:Bu;return M(y)}function Qs(y){if(!y)return y===0?y:0;if(y=as(y),y===Y||y===-1/0){var N=y<0?-1:1;return N*K}return y===y?y:0}function un(y){var N=Qs(y),M=N%1;return N===N?M?N-M:N:0}function Xs(y){return y?vs(un(y),0,ie):0}function as(y){if(typeof y=="number")return y;if(Wa(y))return $;if(Or(y)){var N=typeof y.valueOf=="function"?y.valueOf():y;y=Or(N)?N+"":N}if(typeof y!="string")return y===0?y:+y;y=h0(y);var M=Ot.test(y);return M||Ln.test(y)?GS(y.slice(2),M?2:8):St.test(y)?$:+y}function X1(y){return ii(y,ga(y))}function Ru(y){return y?vs(un(y),-9007199254740991,Q):y===0?y:0}function Jn(y){return y==null?"":ai(y)}var A_=cc(function(y,N){if(gr(N)||ca(N)){ii(N,da(N),y);return}for(var M in N)Xn.call(N,M)&&nc(y,M,N[M])}),J1=cc(function(y,N){ii(N,ga(N),y)}),sm=cc(function(y,N,M,H){ii(N,ga(N),y,H)}),E_=cc(function(y,N,M,H){ii(N,da(N),y,H)}),P_=Cr(Xd);function D_(y,N){var M=Ni(y);return N==null?M:vo(M,N)}var O_=mn(function(y,N){y=zn(y);var M=-1,H=N.length,re=H>2?N[2]:n;for(re&&Ga(N[0],N[1],re)&&(H=1);++M<H;)for(var ve=N[M],Pe=ga(ve),ze=-1,Ye=Pe.length;++ze<Ye;){var ft=Pe[ze],mt=y[ft];(mt===n||ci(mt,lu[ft])&&!Xn.call(y,ft))&&(y[ft]=ve[ft])}return y}),Z1=mn(function(y){return y.push(n,rx),Ja(Lh,n,y)});function Lu(y,N){return c0(y,Ut(N,3),Da)}function Mh(y,N){return c0(y,Ut(N,3),yu)}function ej(y,N){return y==null?y:gu(y,Ut(N,3),ga)}function M_(y,N){return y==null?y:ac(y,Ut(N,3),ga)}function Fu(y,N){return y&&Da(y,Ut(N,3))}function Ih(y,N){return y&&yu(y,Ut(N,3))}function tj(y){return y==null?[]:ol(y,da(y))}function om(y){return y==null?[]:ol(y,ga(y))}function Rh(y,N,M){var H=y==null?n:Zi(y,N);return H===n?M:H}function Ix(y,N){return y!=null&&yh(y,N,Ry)}function $u(y,N){return y!=null&&yh(y,N,M0)}var nj=dh(function(y,N,M){N!=null&&typeof N.toString!="function"&&(N=qa.call(N)),y[N]=M},Je(Ze)),rj=dh(function(y,N,M){N!=null&&typeof N.toString!="function"&&(N=qa.call(N)),Xn.call(y,N)?y[N].push(M):y[N]=[M]},Ut),I_=mn(ic);function da(y){return ca(y)?Oy(y):jp(y)}function ga(y){return ca(y)?Oy(y,!0):R0(y)}function R_(y,N){var M={};return N=Ut(N,3),Da(y,function(H,re,ve){xs(M,N(H,re,ve),H)}),M}function L_(y,N){var M={};return N=Ut(N,3),Da(y,function(H,re,ve){xs(M,re,N(H,re,ve))}),M}var F_=cc(function(y,N,M){th(y,N,M)}),Lh=cc(function(y,N,M,H){th(y,N,M,H)}),lm=Cr(function(y,N){var M={};if(y==null)return M;var H=!1;N=Ar(N,function(ve){return ve=wo(ve,y),H||(H=ve.length>1),ve}),ii(y,Rp(y),M),H&&(M=Pa(M,p|g|x,J0));for(var re=N.length;re--;)ih(M,N[re]);return M});function Rx(y,N){return zu(y,Ph(Ut(N)))}var $_=Cr(function(y,N){return y==null?{}:L0(y,N)});function zu(y,N){if(y==null)return{};var M=Ar(Rp(y),function(H){return[H]});return N=Ut(N),Sp(y,M,function(H,re){return N(H,re[0])})}function z_(y,N,M){N=wo(N,y);var H=-1,re=N.length;for(re||(re=1,y=n);++H<re;){var ve=y==null?n:y[Zn(N[H])];ve===n&&(H=re,ve=M),y=ws(ve)?ve.call(y):ve}return y}function aj(y,N,M){return y==null?y:vu(y,N,M)}function ij(y,N,M,H){return H=typeof H=="function"?H:n,y==null?y:vu(y,N,M,H)}var Lx=ph(da),Fx=ph(ga);function $x(y,N,M){var H=on(y),re=H||bl(y)||Iu(y);if(N=Ut(N,4),M==null){var ve=y&&y.constructor;re?M=H?new ve:[]:Or(y)?M=ws(ve)?Ni(zd(y)):{}:M={}}return(re?Gi:Da)(y,function(Pe,ze,Ye){return N(M,Pe,ze,Ye)}),M}function sj(y,N){return y==null?!0:ih(y,N)}function cm(y,N,M){return y==null?y:Ky(y,N,lh(M))}function B_(y,N,M,H){return H=typeof H=="function"?H:n,y==null?y:Ky(y,N,lh(M),H)}function Bu(y){return y==null?[]:rp(y,da(y))}function zx(y){return y==null?[]:rp(y,ga(y))}function Bx(y,N,M){return M===n&&(M=N,N=n),M!==n&&(M=as(M),M=M===M?M:0),N!==n&&(N=as(N),N=N===N?N:0),vs(as(y),N,M)}function um(y,N,M){return N=Qs(N),M===n?(M=N,N=0):M=Qs(M),y=as(y),I0(y,N,M)}function qx(y,N,M){if(M&&typeof M!="boolean"&&Ga(y,N,M)&&(N=M=n),M===n&&(typeof N=="boolean"?(M=N,N=n):typeof y=="boolean"&&(M=y,y=n)),y===n&&N===n?(y=0,N=1):(y=Qs(y),N===n?(N=y,y=0):N=Qs(N)),y>N){var H=y;y=N,N=H}if(M||y%1||N%1){var re=ky();return Er(y+re*(N-y+Ld("1e-"+((re+"").length-1))),N)}return Cp(y,N)}var oj=Ha(function(y,N,M){return N=N.toLowerCase(),y+(M?dm(N):N)});function dm(y){return S(Jn(y).toLowerCase())}function Po(y){return y=Jn(y),y&&y.replace(xi,ap).replace(po,"")}function jl(y,N,M){y=Jn(y),N=ai(N);var H=y.length;M=M===n?H:vs(un(M),0,H);var re=M;return M-=N.length,M>=0&&y.slice(M,re)==N}function wl(y){return y=Jn(y),y&&Tt.test(y)?y.replace(ke,f0):y}function Fh(y){return y=Jn(y),y&&Qn.test(y)?y.replace(Ht,"\\$&"):y}var $h=Ha(function(y,N,M){return y+(M?"-":"")+N.toLowerCase()}),Nl=Ha(function(y,N,M){return y+(M?" ":"")+N.toLowerCase()}),q_=_i("toLowerCase");function lj(y,N,M){y=Jn(y),N=un(N);var H=N?Bs(y):0;if(!N||H>=N)return y;var re=(N-H)/2;return fh(go(re),M)+y+fh(du(re),M)}function zh(y,N,M){y=Jn(y),N=un(N);var H=N?Bs(y):0;return N&&H<N?y+fh(N-H,M):y}function U_(y,N,M){y=Jn(y),N=un(N);var H=N?Bs(y):0;return N&&H<N?fh(N-H,M)+y:y}function cj(y,N,M){return M||N==null?N=0:N&&(N=+N),Jl(Jn(y).replace(br,""),N||0)}function hm(y,N,M){return(M?Ga(y,N,M):N===n)?N=1:N=un(N),Wy(Jn(y),N)}function uj(){var y=arguments,N=Jn(y[0]);return y.length<3?N:N.replace(y[1],y[2])}var V_=Ha(function(y,N,M){return y+(M?"_":"")+N.toLowerCase()});function fm(y,N,M){return M&&typeof M!="number"&&Ga(y,N,M)&&(N=M=n),M=M===n?ie:M>>>0,M?(y=Jn(y),y&&(typeof N=="string"||N!=null&&!am(N))&&(N=ai(N),!N&&Zo(y))?ll(Wi(y),0,M):y.split(N,M)):[]}var pm=Ha(function(y,N,M){return y+(M?" ":"")+S(N)});function dj(y,N,M){return y=Jn(y),M=M==null?0:vs(un(M),0,y.length),N=ai(N),y.slice(M,M+N.length)==N}function Bh(y,N,M){var H=fe.templateSettings;M&&Ga(y,N,M)&&(N=n),y=Jn(y),N=sm({},N,H,Mp);var re=sm({},N.imports,H.imports,Mp),ve=da(re),Pe=rp(re,ve),ze,Ye,ft=0,mt=N.interpolate||fo,xt="__p += '",Et=op((N.escape||fo).source+"|"+mt.source+"|"+(mt===kt?et:fo).source+"|"+(N.evaluate||fo).source+"|$","g"),$t="//# sourceURL="+(Xn.call(N,"sourceURL")?(N.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++e0+"]")+`
`;y.replace(Et,function(tn,Dn,qn,Ss,Ei,_s){return qn||(qn=Ss),xt+=y.slice(ft,_s).replace(Ed,p0),Dn&&(ze=!0,xt+=`' +
__e(`+Dn+`) +
'`),Ei&&(Ye=!0,xt+=`';
`+Ei+`;
__p += '`),qn&&(xt+=`' +
((__t = (`+qn+`)) == null ? '' : __t) +
'`),ft=_s+tn.length,tn}),xt+=`';
`;var en=Xn.call(N,"variable")&&N.variable;if(!en)xt=`with (obj) {
`+xt+`
}
`;else if(Tn.test(en))throw new Zt(l);xt=(Ye?xt.replace(Xe,""):xt).replace(ut,"$1").replace(Ct,"$1;"),xt="function("+(en||"obj")+`) {
`+(en?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ze?", __e = _.escape":"")+(Ye?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xt+`return __p
}`;var jn=L(function(){return $n(ve,$t+"return "+xt).apply(n,Pe)});if(jn.source=xt,ua(jn))throw jn;return jn}function Ux(y){return Jn(y).toLowerCase()}function mm(y){return Jn(y).toUpperCase()}function hj(y,N,M){if(y=Jn(y),y&&(M||N===n))return h0(y);if(!y||!(N=ai(N)))return y;var H=Wi(y),re=Wi(N),ve=iu(H,re),Pe=su(H,re)+1;return ll(H,ve,Pe).join("")}function H_(y,N,M){if(y=Jn(y),y&&(M||N===n))return y.slice(0,Ny(y)+1);if(!y||!(N=ai(N)))return y;var H=Wi(y),re=su(H,Wi(N))+1;return ll(H,0,re).join("")}function gm(y,N,M){if(y=Jn(y),y&&(M||N===n))return y.replace(br,"");if(!y||!(N=ai(N)))return y;var H=Wi(y),re=iu(H,Wi(N));return ll(H,re).join("")}function d(y,N){var M=U,H=F;if(Or(N)){var re="separator"in N?N.separator:re;M="length"in N?un(N.length):M,H="omission"in N?ai(N.omission):H}y=Jn(y);var ve=y.length;if(Zo(y)){var Pe=Wi(y);ve=Pe.length}if(M>=ve)return y;var ze=M-Bs(H);if(ze<1)return H;var Ye=Pe?ll(Pe,0,ze).join(""):y.slice(0,ze);if(re===n)return Ye+H;if(Pe&&(ze+=Ye.length-ze),am(re)){if(y.slice(ze).search(re)){var ft,mt=Ye;for(re.global||(re=op(re.source,Jn(gt.exec(re))+"g")),re.lastIndex=0;ft=re.exec(mt);)var xt=ft.index;Ye=Ye.slice(0,xt===n?ze:xt)}}else if(y.indexOf(ai(re),ze)!=ze){var Et=Ye.lastIndexOf(re);Et>-1&&(Ye=Ye.slice(0,Et))}return Ye+H}function h(y){return y=Jn(y),y&&ot.test(y)?y.replace(bt,x0):y}var m=Ha(function(y,N,M){return y+(M?" ":"")+N.toUpperCase()}),S=_i("toUpperCase");function E(y,N,M){return y=Jn(y),N=M?n:N,N===n?m0(y)?r_(y):JS(y):y.match(N)||[]}var L=mn(function(y,N){try{return Ja(y,n,N)}catch(M){return ua(M)?M:new Zt(M)}}),Z=Cr(function(y,N){return Gi(N,function(M){M=Zn(M),xs(y,M,xl(y[M],y))}),y});function pe(y){var N=y==null?0:y.length,M=Ut();return y=N?Ar(y,function(H){if(typeof H[1]!="function")throw new wi(o);return[M(H[0]),H[1]]}):[],mn(function(H){for(var re=-1;++re<N;){var ve=y[re];if(Ja(ve[0],this,H))return Ja(ve[1],this,H)}})}function Oe(y){return D0(Pa(y,p))}function Je(y){return function(){return y}}function dt(y,N){return y==null||y!==y?N:y}var pt=Vs(),tt=Vs(!0);function Ze(y){return y}function Kt(y){return By(typeof y=="function"?y:Pa(y,p))}function Yt(y){return Uy(Pa(y,p))}function cr(y,N){return Np(y,Pa(N,p))}var We=mn(function(y,N){return function(M){return ic(M,y,N)}}),qe=mn(function(y,N){return function(M){return ic(y,M,N)}});function Ke(y,N,M){var H=da(N),re=ol(N,H);M==null&&!(Or(N)&&(re.length||!H.length))&&(M=N,N=y,y=this,re=ol(N,da(N)));var ve=!(Or(M)&&"chain"in M)||!!M.chain,Pe=ws(y);return Gi(re,function(ze){var Ye=N[ze];y[ze]=Ye,Pe&&(y.prototype[ze]=function(){var ft=this.__chain__;if(ve||ft){var mt=y(this.__wrapped__),xt=mt.__actions__=oa(this.__actions__);return xt.push({func:Ye,args:arguments,thisArg:y}),mt.__chain__=ft,mt}return Ye.apply(y,mo([this.value()],arguments))})}),y}function ht(){return Qr._===this&&(Qr._=cu),this}function Mt(){}function bn(y){return y=un(y),mn(function(N){return Vy(N,y)})}var zt=hh(Ar),Qt=hh(l0),ya=hh(vy);function Bn(y){return zp(y)?ep(Zn(y)):F0(y)}function Sl(y){return function(N){return y==null?n:Zi(y,N)}}var G_=cl(),zG=cl(!0);function W_(){return[]}function Y_(){return!1}function BG(){return{}}function qG(){return""}function UG(){return!0}function VG(y,N){if(y=un(y),y<1||y>Q)return[];var M=ie,H=Er(y,ie);N=Ut(N),y-=ie;for(var re=Jo(H,N);++M<y;)N(M);return re}function HG(y){return on(y)?Ar(y,Zn):Wa(y)?[y]:oa(Ws(Jn(y)))}function GG(y){var N=++ms;return Jn(y)+N}var WG=bu(function(y,N){return y+N},0),YG=Op("ceil"),KG=bu(function(y,N){return y/N},1),QG=Op("floor");function XG(y){return y&&y.length?bs(y,Ze,Jd):n}function JG(y,N){return y&&y.length?bs(y,Ut(N,2),Jd):n}function ZG(y){return u0(y,Ze)}function eW(y,N){return u0(y,Ut(N,2))}function tW(y){return y&&y.length?bs(y,Ze,wp):n}function nW(y,N){return y&&y.length?bs(y,Ut(N,2),wp):n}var rW=bu(function(y,N){return y*N},1),aW=Op("round"),iW=bu(function(y,N){return y-N},0);function sW(y){return y&&y.length?np(y,Ze):0}function oW(y,N){return y&&y.length?np(y,Ut(N,2)):0}return fe.after=x_,fe.ary=R1,fe.assign=A_,fe.assignIn=J1,fe.assignInWith=sm,fe.assignWith=E_,fe.at=P_,fe.before=Th,fe.bind=xl,fe.bindAll=Z,fe.bindKey=Xp,fe.castArray=w_,fe.chain=Du,fe.chunk=d_,fe.compact=c1,fe.concat=u1,fe.cond=pe,fe.conforms=Oe,fe.constant=Je,fe.countBy=Ou,fe.create=D_,fe.curry=kh,fe.curryRight=Jp,fe.debounce=vl,fe.defaults=O_,fe.defaultsDeep=Z1,fe.defer=Ks,fe.delay=Ah,fe.difference=Dr,fe.differenceBy=si,fe.differenceWith=To,fe.drop=d1,fe.dropRight=h1,fe.dropRightWhile=h_,fe.dropWhile=cx,fe.fill=Ci,fe.filter=S1,fe.flatMap=Nx,fe.flatMapDeep=m_,fe.flatMapDepth=g_,fe.flatten=oi,fe.flattenDeep=f1,fe.flattenDepth=hl,fe.flip=v_,fe.flow=pt,fe.flowRight=tt,fe.fromPairs=fc,fe.functions=tj,fe.functionsIn=om,fe.groupBy=T1,fe.initial=hx,fe.intersection=Ys,fe.intersectionBy=p1,fe.intersectionWith=Su,fe.invert=nj,fe.invertBy=rj,fe.invokeMap=Yp,fe.iteratee=Kt,fe.keyBy=k1,fe.keys=da,fe.keysIn=ga,fe.map=Ch,fe.mapKeys=R_,fe.mapValues=L_,fe.matches=Yt,fe.matchesProperty=cr,fe.memoize=Eh,fe.merge=F_,fe.mergeWith=Lh,fe.method=We,fe.methodOf=qe,fe.mixin=Ke,fe.negate=Ph,fe.nthArg=bn,fe.omit=lm,fe.omitBy=Rx,fe.once=L1,fe.orderBy=A1,fe.over=zt,fe.overArgs=F1,fe.overEvery=Qt,fe.overSome=ya,fe.partial=Cx,fe.partialRight=Zp,fe.partition=E1,fe.pick=$_,fe.pickBy=zu,fe.property=Bn,fe.propertyOf=Sl,fe.pull=g1,fe.pullAll=Cu,fe.pullAllBy=y1,fe.pullAllWith=Gp,fe.pullAt=x1,fe.range=G_,fe.rangeRight=zG,fe.rearg=$1,fe.reject=Kp,fe.remove=f_,fe.rest=z1,fe.reverse=fx,fe.sampleSize=M1,fe.set=aj,fe.setWith=ij,fe.shuffle=yr,fe.slice=rr,fe.sortBy=I1,fe.sortedUniq=Tu,fe.sortedUniqBy=px,fe.split=fm,fe.spread=b_,fe.tail=Ao,fe.take=Hr,fe.takeRight=pl,fe.takeRightWhile=pc,fe.takeWhile=mx,fe.tap=bx,fe.throttle=Tx,fe.thru=Ma,fe.toArray=Ai,fe.toPairs=Lx,fe.toPairsIn=Fx,fe.toPath=HG,fe.toPlainObject=X1,fe.transform=$x,fe.unary=kx,fe.union=ns,fe.unionBy=ku,fe.unionWith=Sh,fe.uniq=li,fe.uniqBy=gx,fe.uniqWith=yx,fe.unset=sj,fe.unzip=Au,fe.unzipWith=_h,fe.update=cm,fe.updateWith=B_,fe.values=Bu,fe.valuesIn=zx,fe.without=ml,fe.words=E,fe.wrap=j_,fe.xor=Sa,fe.xorBy=gl,fe.xorWith=Eu,fe.zip=Pu,fe.zipObject=xx,fe.zipObjectDeep=vx,fe.zipWith=v1,fe.entries=Lx,fe.entriesIn=Fx,fe.extend=J1,fe.extendWith=sm,Ke(fe,fe),fe.add=WG,fe.attempt=L,fe.camelCase=oj,fe.capitalize=dm,fe.ceil=YG,fe.clamp=Bx,fe.clone=Dh,fe.cloneDeep=B1,fe.cloneDeepWith=Cn,fe.cloneWith=N_,fe.conformsTo=Ax,fe.deburr=Po,fe.defaultTo=dt,fe.divide=KG,fe.endsWith=jl,fe.eq=ci,fe.escape=wl,fe.escapeRegExp=Fh,fe.every=N1,fe.find=_1,fe.findIndex=ts,fe.findKey=Lu,fe.findLast=wx,fe.findLastIndex=ux,fe.findLastKey=Mh,fe.floor=QG,fe.forEach=C1,fe.forEachRight=Sx,fe.forIn=ej,fe.forInRight=M_,fe.forOwn=Fu,fe.forOwnRight=Ih,fe.get=Rh,fe.gt=Ex,fe.gte=q1,fe.has=Ix,fe.hasIn=$u,fe.head=ko,fe.identity=Ze,fe.includes=Mu,fe.indexOf=dx,fe.inRange=um,fe.invoke=I_,fe.isArguments=Eo,fe.isArray=on,fe.isArrayBuffer=em,fe.isArrayLike=ca,fe.isArrayLikeObject=Gr,fe.isBoolean=S_,fe.isBuffer=bl,fe.isDate=U1,fe.isElement=V1,fe.isEmpty=tm,fe.isEqual=lr,fe.isEqualWith=Px,fe.isError=ua,fe.isFinite=__,fe.isFunction=ws,fe.isInteger=nm,fe.isLength=mc,fe.isMap=rm,fe.isMatch=Dx,fe.isMatchWith=C_,fe.isNaN=H1,fe.isNative=T_,fe.isNil=k_,fe.isNull=G1,fe.isNumber=W1,fe.isObject=Or,fe.isObjectLike=$r,fe.isPlainObject=rs,fe.isRegExp=am,fe.isSafeInteger=Ox,fe.isSet=Y1,fe.isString=im,fe.isSymbol=Wa,fe.isTypedArray=Iu,fe.isUndefined=Ns,fe.isWeakMap=Mx,fe.isWeakSet=K1,fe.join=Nh,fe.kebabCase=$h,fe.last=Oa,fe.lastIndexOf=_u,fe.lowerCase=Nl,fe.lowerFirst=q_,fe.lt=Q1,fe.lte=Oh,fe.max=XG,fe.maxBy=JG,fe.mean=ZG,fe.meanBy=eW,fe.min=tW,fe.minBy=nW,fe.stubArray=W_,fe.stubFalse=Y_,fe.stubObject=BG,fe.stubString=qG,fe.stubTrue=UG,fe.multiply=rW,fe.nth=m1,fe.noConflict=ht,fe.noop=Mt,fe.now=Qp,fe.pad=lj,fe.padEnd=zh,fe.padStart=U_,fe.parseInt=cj,fe.random=qx,fe.reduce=P1,fe.reduceRight=D1,fe.repeat=hm,fe.replace=uj,fe.result=z_,fe.round=aW,fe.runInContext=He,fe.sample=O1,fe.size=_x,fe.snakeCase=V_,fe.some=y_,fe.sortedIndex=jr,fe.sortedIndexBy=_n,fe.sortedIndexOf=Fn,fe.sortedLastIndex=ar,fe.sortedLastIndexBy=Ti,fe.sortedLastIndexOf=fl,fe.startCase=pm,fe.startsWith=dj,fe.subtract=iW,fe.sum=sW,fe.sumBy=oW,fe.template=Bh,fe.times=VG,fe.toFinite=Qs,fe.toInteger=un,fe.toLength=Xs,fe.toLower=Ux,fe.toNumber=as,fe.toSafeInteger=Ru,fe.toString=Jn,fe.toUpper=mm,fe.trim=hj,fe.trimEnd=H_,fe.trimStart=gm,fe.truncate=d,fe.unescape=h,fe.uniqueId=GG,fe.upperCase=m,fe.upperFirst=S,fe.each=C1,fe.eachRight=Sx,fe.first=ko,Ke(fe,function(){var y={};return Da(fe,function(N,M){Xn.call(fe.prototype,M)||(y[M]=N)}),y}(),{chain:!1}),fe.VERSION=a,Gi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){fe[y].placeholder=fe}),Gi(["drop","take"],function(y,N){vn.prototype[y]=function(M){M=M===n?1:_r(un(M),0);var H=this.__filtered__&&!N?new vn(this):this.clone();return H.__filtered__?H.__takeCount__=Er(M,H.__takeCount__):H.__views__.push({size:Er(M,ie),type:y+(H.__dir__<0?"Right":"")}),H},vn.prototype[y+"Right"]=function(M){return this.reverse()[y](M).reverse()}}),Gi(["filter","map","takeWhile"],function(y,N){var M=N+1,H=M==W||M==z;vn.prototype[y]=function(re){var ve=this.clone();return ve.__iteratees__.push({iteratee:Ut(re,3),type:M}),ve.__filtered__=ve.__filtered__||H,ve}}),Gi(["head","last"],function(y,N){var M="take"+(N?"Right":"");vn.prototype[y]=function(){return this[M](1).value()[0]}}),Gi(["initial","tail"],function(y,N){var M="drop"+(N?"":"Right");vn.prototype[y]=function(){return this.__filtered__?new vn(this):this[M](1)}}),vn.prototype.compact=function(){return this.filter(Ze)},vn.prototype.find=function(y){return this.filter(y).head()},vn.prototype.findLast=function(y){return this.reverse().find(y)},vn.prototype.invokeMap=mn(function(y,N){return typeof y=="function"?new vn(this):this.map(function(M){return ic(M,y,N)})}),vn.prototype.reject=function(y){return this.filter(Ph(Ut(y)))},vn.prototype.slice=function(y,N){y=un(y);var M=this;return M.__filtered__&&(y>0||N<0)?new vn(M):(y<0?M=M.takeRight(-y):y&&(M=M.drop(y)),N!==n&&(N=un(N),M=N<0?M.dropRight(-N):M.take(N-y)),M)},vn.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},vn.prototype.toArray=function(){return this.take(ie)},Da(vn.prototype,function(y,N){var M=/^(?:filter|find|map|reject)|While$/.test(N),H=/^(?:head|last)$/.test(N),re=fe[H?"take"+(N=="last"?"Right":""):N],ve=H||/^find/.test(N);re&&(fe.prototype[N]=function(){var Pe=this.__wrapped__,ze=H?[1]:arguments,Ye=Pe instanceof vn,ft=ze[0],mt=Ye||on(Pe),xt=function(Dn){var qn=re.apply(fe,mo([Dn],ze));return H&&Et?qn[0]:qn};mt&&M&&typeof ft=="function"&&ft.length!=1&&(Ye=mt=!1);var Et=this.__chain__,$t=!!this.__actions__.length,en=ve&&!Et,jn=Ye&&!$t;if(!ve&&mt){Pe=jn?Pe:new vn(this);var tn=y.apply(Pe,ze);return tn.__actions__.push({func:Ma,args:[xt],thisArg:n}),new ti(tn,Et)}return en&&jn?y.apply(this,ze):(tn=this.thru(xt),en?H?tn.value()[0]:tn.value():tn)})}),Gi(["pop","push","shift","sort","splice","unshift"],function(y){var N=lp[y],M=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",H=/^(?:pop|shift)$/.test(y);fe.prototype[y]=function(){var re=arguments;if(H&&!this.__chain__){var ve=this.value();return N.apply(on(ve)?ve:[],re)}return this[M](function(Pe){return N.apply(on(Pe)?Pe:[],re)})}}),Da(vn.prototype,function(y,N){var M=fe[N];if(M){var H=M.name+"";Xn.call(Xi,H)||(Xi[H]=[]),Xi[H].push({name:N,func:M})}}),Xi[Vr(n,_).name]=[{name:"wrapper",func:n}],vn.prototype.clone=Wd,vn.prototype.reverse=hp,vn.prototype.value=ec,fe.prototype.at=b1,fe.prototype.chain=ki,fe.prototype.commit=j1,fe.prototype.next=w1,fe.prototype.plant=yl,fe.prototype.reverse=Wp,fe.prototype.toJSON=fe.prototype.valueOf=fe.prototype.value=jx,fe.prototype.first=fe.prototype.head,Ql&&(fe.prototype[Ql]=p_),fe},tl=ou();Xo?((Xo.exports=tl)._=tl,tu._=tl):Qr._=tl}).call(Xme)}(gv,gv.exports)),gv.exports}var _U=Jme();class Zme{constructor(e){wr(this,"sampleRate",24e3);wr(this,"bufferSize",7680);wr(this,"audioQueue",[]);wr(this,"isPlaying",!1);wr(this,"isStreamComplete",!1);wr(this,"checkInterval",null);wr(this,"scheduledTime",0);wr(this,"initialBufferTime",.1);wr(this,"gainNode");wr(this,"source");wr(this,"endOfQueueAudioSource",null);wr(this,"onComplete",()=>{});this.context=e,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(e,n,a){let i=Ej.get(this.context);if(i&&i[e])return i[e].handlers.push(a),Promise.resolve(this);i||(Ej.set(this.context,{}),i=Ej.get(this.context)),i[e]={handlers:[a]};const s=rP(e,n);await this.context.audioWorklet.addModule(s);const o=new AudioWorkletNode(this.context,e);return i[e].node=o,this}_processPCM16Chunk(e){const n=new Float32Array(e.length/2),a=new DataView(e.buffer);for(let i=0;i<e.length/2;i++)try{const s=a.getInt16(i*2,!0);n[i]=s/32768}catch(s){console.error(s)}return n}addPCM16(e){this.isStreamComplete=!1;let n=this._processPCM16Chunk(e);for(;n.length>=this.bufferSize;){const a=n.slice(0,this.bufferSize);this.audioQueue.push(a),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const n=this.context.createBuffer(1,e.length,this.sampleRate);return n.getChannelData(0).set(e),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),a=this.createAudioBuffer(n),i=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=i,i.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===i&&(this.endOfQueueAudioSource=null,this.onComplete())}),i.buffer=a,i.connect(this.gainNode);const s=Ej.get(this.context);s&&Object.entries(s).forEach(([,l])=>{const{node:c,handlers:u}=l;c&&(i.connect(c),c.port.onmessage=function(f){u.forEach(p=>{p.call(c.port,f)})},c.connect(this.context.destination))});const o=Math.max(this.scheduledTime,this.context.currentTime);i.start(o),this.scheduledTime=o+a.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function ege(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"screen",start:async()=>{const l=await navigator.mediaDevices.getDisplayMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}function tge(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"webcam",start:async()=>{const l=await navigator.mediaDevices.getUserMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}class nge extends NU{constructor(n){super();wr(this,"client");wr(this,"_status","disconnected");wr(this,"_session",null);wr(this,"_model",null);wr(this,"config",null);this.client=new xO(n),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(n,a){const i={date:new Date,type:n,message:a};this.emit("log",i)}async connect(n,a){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=a,this._model=n;const i={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:n,config:a,callbacks:i})}catch(s){return console.error("Error connecting to GenAI Live:",s),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var n;return this.session?((n=this.session)==null||n.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(n){this.log("server.error",n.message),this.emit("error",n)}onclose(n){this.log("server.close",`disconnected ${n.reason?`with reason: ${n.reason}`:""}`),this.emit("close",n)}async onmessage(n){var a;if(n.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(n.toolCall){this.log("server.toolCall",n),this.emit("toolcall",n.toolCall);return}if(n.toolCallCancellation){this.log("server.toolCallCancellation",n),this.emit("toolcallcancellation",n.toolCallCancellation);return}if(n.serverContent){const{serverContent:i}=n;if("interrupted"in i){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in i&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in i){let s=((a=i.modelTurn)==null?void 0:a.parts)||[];const o=s.filter(f=>{var p;return f.inlineData&&((p=f.inlineData.mimeType)==null?void 0:p.startsWith("audio/pcm"))}),l=o.map(f=>{var p;return(p=f.inlineData)==null?void 0:p.data}),c=_U.difference(s,o);if(l.forEach(f=>{if(f){const p=Vme(f);this.emit("audio",p),this.log("server.audio",`buffer (${p.byteLength})`)}}),!c.length)return;s=c;const u={modelTurn:{parts:s}};this.emit("content",u),this.log("server.content",n)}}else console.log("received unmatched message",n)}sendRealtimeInput(n){var o;let a=!1,i=!1;for(const l of n)if((o=this.session)==null||o.sendRealtimeInput({media:l}),l.mimeType.includes("audio")&&(a=!0),l.mimeType.includes("image")&&(i=!0),a&&i)break;const s=a&&i?"audio + video":a?"audio":i?"video":"unknown";this.log("client.realtimeInput",s)}sendToolResponse(n){var a;n.functionResponses&&n.functionResponses.length&&((a=this.session)==null||a.sendToolResponse({functionResponses:n.functionResponses}),this.log("client.toolResponse",n))}send(n,a=!0){var i;(i=this.session)==null||i.sendClientContent({turns:n,turnComplete:a}),this.log("client.send",{turns:Array.isArray(n)?n:[n],turnComplete:a})}}function rge(t){const e=v.useMemo(()=>new nge(t),[t]),n=v.useRef(null),[a,i]=v.useState("models/gemini-2.5-flash-live-preview"),[s,o]=v.useState({}),[l,c]=v.useState(!1),[u,f]=v.useState(0),p=null;v.useEffect(()=>{n.current||jU({id:"audio-out"}).then(b=>{n.current=new Zme(b),n.current.addWorklet("vumeter-out",wU,j=>{f(j.data.volume)}).then(()=>{})})},[n]),v.useEffect(()=>{const b=()=>{c(!0)},j=()=>{c(!1)},w=A=>{console.error("error",A)},_=()=>{var A;return(A=n.current)==null?void 0:A.stop()},T=A=>{var k;return(k=n.current)==null?void 0:k.addPCM16(new Uint8Array(A))},C=()=>{};return e.on("error",w).on("open",b).on("close",j).on("interrupted",_).on("audio",T).on("content",C),()=>{e.off("error",w).off("open",b).off("close",j).off("interrupted",_).off("audio",T).off("content",C).disconnect()}},[e]);const g=v.useCallback(async()=>{if(!s)throw new Error("config has not been set");e.disconnect(),await e.connect(a,s)},[e,s,a]),x=v.useCallback(async()=>{e.disconnect(),c(!1)},[c,e]);return{client:e,config:s,setConfig:o,model:a,setModel:i,connected:l,connect:g,disconnect:x,volume:u,aiSummary:p}}const CU=v.createContext(void 0),iS=({options:t,children:e})=>{const n=rge(t);return r.jsx(CU.Provider,{value:n,children:e})},wd=()=>{const t=v.useContext(CU);if(!t)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return t};function age(){const{config:t,setConfig:e}=wd(),[n,a]=v.useState({value:"audio",label:"audio"}),i=v.useCallback(s=>{e({...t,responseModalities:[s==="audio"?md.AUDIO:md.TEXT]})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(bU,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:n,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:s=>{a(s),s&&(s.value==="audio"||s.value==="text")&&i(s.value)}})]})}const m3=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function ige(){const{config:t,setConfig:e}=wd();v.useEffect(()=>{var l,c,u;const s=((u=(c=(l=t.speechConfig)==null?void 0:l.voiceConfig)==null?void 0:c.prebuiltVoiceConfig)==null?void 0:u.voiceName)||"Atari02";a({value:s,label:s})},[t]);const[n,a]=v.useState(m3[5]),i=v.useCallback(s=>{e({...t,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(bU,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:n,defaultValue:n,options:m3,onChange:s=>{a(s),s&&i(s.value)}})]})}function sge(){const[t,e]=v.useState(!1),{config:n,setConfig:a,connected:i}=wd(),s=v.useMemo(()=>Array.isArray(n.tools)?n.tools.filter(u=>Array.isArray(u.functionDeclarations)).map(u=>u.functionDeclarations).filter(u=>!!u).flat():[],[n]),o=v.useMemo(()=>{var u;return n.systemInstruction?typeof n.systemInstruction=="string"?n.systemInstruction:Array.isArray(n.systemInstruction)?n.systemInstruction.map(f=>typeof f=="string"?f:f.text).join(`
`):typeof n.systemInstruction=="object"&&"parts"in n.systemInstruction&&((u=n.systemInstruction.parts)==null?void 0:u.map(f=>f.text).join(`
`))||"":""},[n]),l=v.useCallback(u=>{const f={...n,systemInstruction:u.target.value};a(f)},[n,a]),c=v.useCallback((u,f)=>{var g;const p={...n,tools:((g=n.tools)==null?void 0:g.map(x=>{const b=x;return Array.isArray(b.functionDeclarations)?{...x,functionDeclarations:b.functionDeclarations.map(j=>j.name===u?{...j,description:f}:j)}:x}))||[]};a(p)},[n,a]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>e(!t),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:t?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${i?"disabled":""}`,children:[i&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(age,{}),r.jsx(ige,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:l,value:o}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:s.map((u,f)=>{var p;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:u.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((p=u.parameters)==null?void 0:p.properties)||{}).map((g,x)=>r.jsx("span",{children:g},x))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:u.description,onBlur:g=>c(u.name,g.target.value)},`fd-${u.description}`)]},`function-${f}`)})})})]})})]})}const g3=v.memo(({isStreaming:t,onIcon:e,offIcon:n,start:a,stop:i})=>t?r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:e})}):r.jsx("button",{className:"action-button",onClick:a,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}));function oge({videoRef:t,children:e,onVideoStreamChange:n=()=>{},supportsVideo:a,enableEditingSettings:i}){const s=[tge(),ege()],[o,l]=v.useState(null),[c,u]=s,[f,p]=v.useState(0),[g]=v.useState(()=>new SU),[x,b]=v.useState(!1),j=v.useRef(null),w=v.useRef(null),{client:_,connected:T,connect:C,disconnect:A,volume:k}=wd();v.useEffect(()=>{!T&&w.current&&w.current.focus()},[T]),v.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(f*200,8))}px`)},[f]),v.useEffect(()=>{const I=R=>{_.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:R}])};return T&&!x&&g?g.on("data",I).on("volume",p).start():g.stop(),()=>{g.off("data",I).off("volume",p)}},[T,_,x,g]),v.useEffect(()=>{t.current&&(t.current.srcObject=o);let I=-1;function R(){const q=t.current,U=j.current;if(!q||!U)return;const F=U.getContext("2d");if(U.width=q.videoWidth*.25,U.height=q.videoHeight*.25,U.width+U.height>0){F.drawImage(q,0,0,U.width,U.height);const B=U.toDataURL("image/jpeg",1),V=B.slice(B.indexOf(",")+1,1/0);_.sendRealtimeInput([{mimeType:"image/jpeg",data:V}])}T&&(I=window.setTimeout(R,1e3/.5))}return T&&o!==null&&requestAnimationFrame(R),()=>{clearTimeout(I)}},[T,o,_,t]);const P=I=>async()=>{if(I){const R=await I.start();l(R),n(R)}else l(null),n(null);s.filter(R=>R!==I).forEach(R=>R.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:j}),r.jsxs("nav",{className:id("actions-nav",{disabled:!T}),children:[r.jsx("button",{className:id("action-button mic-button",{recording:!x&&T}),onClick:()=>b(!x),children:x?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx(Qme,{volume:k,active:T,hover:!1})}),a&&r.jsxs(r.Fragment,{children:[r.jsx(g3,{isStreaming:u.isStreaming,start:P(u),stop:P(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(g3,{isStreaming:c.isStreaming,start:P(c),stop:P(),onIcon:"videocam_off",offIcon:"videocam"})]}),e]}),r.jsxs("div",{className:id("connection-container",{connected:T}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:w,className:id("action-button connect-toggle",{connected:T}),onClick:T?A:C,children:r.jsx("span",{className:"material-symbols-outlined filled",children:T?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),i?r.jsx(sge,{}):""]})}const y3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:lg.OBJECT,properties:{summary:{type:lg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},lge=({patientData:t,tokenNumber:e})=>{const[n,a]=v.useState(""),{client:i,setConfig:s,setModel:o}=wd();return v.useEffect(()=>{o("models/gemini-2.5-flash-live-preview"),s({responseModalities:[md.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[y3]}]})},[s,o]),v.useEffect(()=>{const l=c=>{if(!c.functionCalls)return;const u=c.functionCalls.find(f=>f.name===y3.name);if(u){const f=u.args.summary;a(f)}c.functionCalls.length&&setTimeout(()=>{var f;return i.sendToolResponse({functionResponses:(f=c.functionCalls)==null?void 0:f.map(p=>({response:{output:{success:!0}},id:p.id,name:p.name}))})},200)};return i.on("toolcall",l),()=>{i.off("toolcall",l)}},[i]),v.useEffect(()=>{if(n){const l=encodeURIComponent(n);e?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${e}&caseDetails=${l}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${l}`}},[n,e]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),e&&r.jsxs("h2",{children:["Token Number: ",e]}),t&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(t,null,2)})]}),n&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:n})]})]})},x3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function cge(){if(!vO())return console.warn("No auth token found, using default Live API key."),x3;try{const e=await le("/api/clinics/gemini-api-key");if(e.ok){const a=(await e.json()).geminiApiKey;if(a)return a}}catch(e){console.error("Failed to fetch clinic-specific Live API key:",e)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),x3}function uge(){const t=v.useRef(null),[e,n]=v.useState(null),[a,i]=v.useState(null);return v.useEffect(()=>{(async()=>{try{const o=await cge();i({apiKey:o})}catch(o){console.error("Error setting Live API options:",o)}})()},[]),a?r.jsx("div",{className:"App",children:r.jsx(iS,{options:a,children:r.jsx(dge,{videoRef:t,setVideoStream:n,videoStream:e})})}):r.jsx("div",{children:"Loading Live API settings..."})}const dge=({videoRef:t,setVideoStream:e,videoStream:n})=>{const[a,i]=v.useState(null),[s,o]=v.useState(null),{connected:l,client:c,connect:u,config:f,model:p}=wd(),[g,x]=v.useState(""),b=v.useRef(null),[j,w]=v.useState(!1);v.useEffect(()=>{const T=window.matchMedia("(prefers-color-scheme: dark)"),C=A=>{document.documentElement.setAttribute("data-theme",A.matches?"dark":"light")};return C(T),T.addEventListener("change",C),()=>T.removeEventListener("change",C)},[]),v.useEffect(()=>{const T=new URLSearchParams(window.location.search),C={};for(const[A,k]of T.entries())A==="token_number"?o(k):C[A]=k;i(C)},[]),v.useEffect(()=>{Object.keys(f).length>0&&p&&u()},[u,f,p]),v.useEffect(()=>{if(l&&a&&!j){const T=JSON.stringify(a,null,2);c.send([{text:T}]),x(""),w(!0)}},[l,a,c,j]),v.useEffect(()=>{a&&x(JSON.stringify(a,null,2))},[a]);const _=()=>{c.send([{text:g}]),x(""),b.current&&(b.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx(lge,{patientData:a,tokenNumber:s}),r.jsx("video",{className:id("stream",{hidden:!t.current||!n}),ref:t,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:id("input-container",{disabled:!l}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:b,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),T.stopPropagation(),_())},onChange:T=>x(T.target.value),value:g}),r.jsx("span",{className:id("input-content-placeholder",{hidden:g.length}),children:"Typesomething..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:_,children:"send"})]})}),r.jsx(oge,{videoRef:t,supportsVideo:!0,onVideoStreamChange:e,enableEditingSettings:!0})]})})},v3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",TU=({isActive:t,volume:e,size:n="normal"})=>{const a=t&&e>.01,i=a?Math.max(3,Math.min(12,3+e*30)):3,s=n==="mini";return r.jsx("div",{className:`ai-avatar-container ${t?"active":""} ${s?"mini":""}`,children:r.jsxs("svg",{viewBox:"0 0 200 200",className:"ai-avatar-svg",children:[r.jsxs("defs",{children:[r.jsxs("radialGradient",{id:`avatarGlow${s?"Mini":""}`,cx:"50%",cy:"50%",r:"50%",children:[r.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:a?.5:t?.3:.1}),r.jsx("stop",{offset:"100%",stopColor:"#059669",stopOpacity:"0"})]}),r.jsxs("linearGradient",{id:`hairGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#1e1b4b"}),r.jsx("stop",{offset:"100%",stopColor:"#312e81"})]}),r.jsxs("linearGradient",{id:`skinGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd5ce"}),r.jsx("stop",{offset:"100%",stopColor:"#f9bbb2"})]}),r.jsxs("linearGradient",{id:`coatGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),r.jsx("stop",{offset:"100%",stopColor:"#f1f5f9"})]}),r.jsxs("linearGradient",{id:`scrubsGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#0ea5e9"}),r.jsx("stop",{offset:"100%",stopColor:"#0284c7"})]})]}),r.jsx("circle",{cx:"100",cy:"100",r:"95",fill:`url(#avatarGlow${s?"Mini":""})`,className:"avatar-glow"}),r.jsx("circle",{cx:"100",cy:"100",r:"85",fill:"#ecfdf5",stroke:"#a7f3d0",strokeWidth:"2"}),r.jsx("ellipse",{cx:"100",cy:"185",rx:"55",ry:"35",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#e2e8f0",strokeWidth:"1"}),r.jsx("path",{d:"M75 155 L85 175 L90 155",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#cbd5e1",strokeWidth:"1"}),r.jsx("path",{d:"M125 155 L115 175 L110 155",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#cbd5e1",strokeWidth:"1"}),r.jsx("path",{d:"M90 155 L100 165 L110 155 L110 175 L90 175 Z",fill:`url(#scrubsGradient${s?"Mini":""})`}),r.jsx("path",{d:"M70 165 Q65 155 75 145",stroke:"#374151",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M130 165 Q135 155 125 145",stroke:"#374151",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),r.jsx("circle",{cx:"70",cy:"168",r:"5",fill:"#374151"}),r.jsx("circle",{cx:"70",cy:"168",r:"3",fill:"#6b7280"}),r.jsx("circle",{cx:"130",cy:"168",r:"5",fill:"#374151"}),r.jsx("circle",{cx:"130",cy:"168",r:"3",fill:"#6b7280"}),r.jsx("path",{d:"M77 145 Q85 140 90 145",stroke:"#374151",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M123 145 Q115 140 110 145",stroke:"#374151",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"100",cy:"70",rx:"42",ry:"35",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("rect",{x:"90",y:"130",width:"20",height:"25",fill:`url(#skinGradient${s?"Mini":""})`,rx:"5"}),r.jsx("ellipse",{cx:"100",cy:"92",rx:"35",ry:"38",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("path",{d:"M58 75 Q60 90 65 95 L68 85 Q65 75 58 75",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M142 75 Q140 90 135 95 L132 85 Q135 75 142 75",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M60 70 Q80 50 115 55 Q135 60 140 70 Q120 45 80 45 Q60 55 60 70",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M78 80 Q84 78 90 80",stroke:"#3d3d5c",strokeWidth:"1.2",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M110 80 Q116 78 122 80",stroke:"#3d3d5c",strokeWidth:"1.2",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"84",cy:"90",rx:"9",ry:"10",fill:"white"}),r.jsx("ellipse",{cx:"116",cy:"90",rx:"9",ry:"10",fill:"white"}),r.jsx("circle",{cx:"84",cy:"91",r:"6",fill:"#2d4a3e",children:r.jsx("animate",{attributeName:"cy",values:"91;90;91",dur:"4s",repeatCount:"indefinite"})}),r.jsx("circle",{cx:"116",cy:"91",r:"6",fill:"#2d4a3e",children:r.jsx("animate",{attributeName:"cy",values:"91;90;91",dur:"4s",repeatCount:"indefinite"})}),r.jsx("circle",{cx:"84",cy:"91",r:"3",fill:"#1a1a2e"}),r.jsx("circle",{cx:"116",cy:"91",r:"3",fill:"#1a1a2e"}),r.jsx("ellipse",{cx:"86",cy:"88",rx:"2.5",ry:"3",fill:"white"}),r.jsx("ellipse",{cx:"118",cy:"88",rx:"2.5",ry:"3",fill:"white"}),r.jsx("circle",{cx:"82",cy:"93",r:"1",fill:"white",opacity:"0.7"}),r.jsx("circle",{cx:"114",cy:"93",r:"1",fill:"white",opacity:"0.7"}),r.jsx("ellipse",{cx:"70",cy:"102",rx:"7",ry:"4",fill:"#ffb5b5",opacity:"0.5"}),r.jsx("ellipse",{cx:"130",cy:"102",rx:"7",ry:"4",fill:"#ffb5b5",opacity:"0.5"}),r.jsx("path",{d:"M100 97 L99 102",stroke:"#daa89b",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"100",cy:"112",rx:a?5:6,ry:i,fill:"#d4726a"}),!a&&r.jsx("path",{d:"M94 110 Q100 116 106 110",stroke:"#d4726a",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"63",cy:"90",rx:"4",ry:"6",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("ellipse",{cx:"137",cy:"90",rx:"4",ry:"6",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("circle",{cx:"135",cy:"165",r:"8",fill:"#ef4444"}),r.jsx("rect",{x:"133",y:"160",width:"4",height:"10",fill:"white",rx:"1"}),r.jsx("rect",{x:"130",y:"163",width:"10",height:"4",fill:"white",rx:"1"}),a&&r.jsxs(r.Fragment,{children:[r.jsxs("circle",{cx:"100",cy:"100",r:"90",stroke:"#10b981",strokeWidth:"2",fill:"none",opacity:"0.6",children:[r.jsx("animate",{attributeName:"r",values:"90;95;90",dur:"1.5s",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"opacity",values:"0.6;0.2;0.6",dur:"1.5s",repeatCount:"indefinite"})]}),r.jsxs("circle",{cx:"100",cy:"100",r:"95",stroke:"#34d399",strokeWidth:"1.5",fill:"none",opacity:"0.4",children:[r.jsx("animate",{attributeName:"r",values:"95;100;95",dur:"1.5s",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"opacity",values:"0.4;0.1;0.4",dur:"1.5s",repeatCount:"indefinite"})]})]})]})})},hge=v.forwardRef(({videoRef:t,supportsVideo:e,onVideoStreamChange:n,textInput:a,onSubmitTextInput:i},s)=>{var P;const{connected:o,connect:l,disconnect:c,client:u,volume:f}=wd(),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState(!1),[_]=v.useState(()=>new SU),T=async()=>{o?await c():(await l(),a.trim()&&i())};v.useEffect(()=>{const I=R=>{u.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:R}])};return o&&!p?_.on("data",I).start():_.stop(),()=>{_.off("data",I),_.stop()}},[o,u,p,_]);const C=v.useCallback(async()=>{if(x)k==null||k.getTracks().forEach(I=>I.stop()),n(null),b(!1);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),b(!0)}catch(I){console.error("Error accessing webcam:",I),b(!1)}},[x,n,t]),A=v.useCallback(async()=>{if(j)k==null||k.getTracks().forEach(I=>I.stop()),n(null),w(!1);else try{const I=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),w(!0)}catch(I){console.error("Error accessing screen share:",I),w(!1)}},[j,n,t]),k=(P=t.current)==null?void 0:P.srcObject;return v.useEffect(()=>()=>{k&&k.getTracks().forEach(I=>I.stop())},[k]),v.useImperativeHandle(s,()=>({handleConnect:T})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>g(!p),disabled:!o,className:`live-api-control-button ${o&&!p?"mic-active":"mic-inactive"}`,"aria-label":p?"Unmute microphone":"Mute microphone",children:p?r.jsx(fJ,{className:"w-5 h-5"}):r.jsx(UN,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-mini-avatar-container",children:r.jsx(TU,{isActive:o,volume:f,size:"mini"})}),e&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:A,disabled:!o,className:`live-api-control-button ${j?"video-active":"video-inactive"}`,"aria-label":j?"Stop screen share":"Start screen share",children:r.jsx(xJ,{className:"w-5 h-5"})}),r.jsx("button",{onClick:C,disabled:!o,className:`live-api-control-button ${x?"video-active":"video-inactive"}`,"aria-label":x?"Turn off webcam":"Turn on webcam",children:r.jsx(NZ,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${o?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:o?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:T,className:`live-api-connect-button ${o?"connected":"disconnected"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(TJ,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(oq,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),fge=({tokenNumber:t,aiSummary:e,clinicName:n,isActive:a,volume:i})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-avatar-section",children:[r.jsx(TU,{isActive:a,volume:i}),r.jsx("div",{className:"avatar-status-text",children:a?"Listening...":"Ready to assist"})]}),r.jsxs("div",{className:"hospital-reception-info-section",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:n.charAt(0)})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"hospital-reception-title",children:[n," AI"]}),r.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",n," Reception Assistant"]})]})]}),t&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:t})]}),e&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:e})]})]})]}),b3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:lg.OBJECT,properties:{summary:{type:lg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},pge=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:i,voiceAiLanguage:s,lastMotionTimestamp:o,backgroundMode:l})=>{const c=v.useRef(null),u=v.useRef(null),[f,p]=v.useState(null),[g,x]=v.useState("hi"),{client:b,connected:j,setConfig:w,setModel:_,disconnect:T,connect:C,volume:A}=wd(),k=v.useRef(!1),P=v.useRef(Date.now()),I=v.useRef(!1);v.useEffect(()=>{k.current=j,j&&(P.current=Date.now(),I.current=!1)},[j]),v.useEffect(()=>{if(o){if(P.current=Date.now(),k.current)return;j||C()}},[o,C,j]),v.useEffect(()=>{if(!o||!j)return;const W=setInterval(()=>{const z=Date.now()-P.current;z>25e3&&z<3e4&&!I.current&&(I.current=!0,b.send([{text:"I'll be here if you need more help!"}])),z>3e4&&(console.log("No motion for 30s. Disconnecting session."),T(),t())},1e3);return()=>clearInterval(W)},[o,j,b,T,t]);const R=v.useMemo(()=>{let W=`Your job is to:

If patient details like name, age, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (Name, Age) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's Name and Age only. Do not ask for their phone number.

    You should guess the patient's sex based on their voice or appearance.

For every visit, collect the patient's history by asking questions.

CRITICAL WORKFLOW - DO NOT USE THE 'case_summary' TOOL YET.

Phase 1: History Collection (MANDATORY LOOP)
Once you have the basics, you MUST ask the patient about their complaints.
- Ask clarifying questions to understand the onset, duration, severity, and associated symptoms.
- DO NOT just accept a one-line complaint.
- Loop your questions until you are confident you have a complete medical history.

Phase 2: Billing Check Protocol
ONLY after you are confident you have the complete history, proceed to the Billing Check Protocol immediately:
1. Ask: 'Would you like to get the tests done?'
   - IF PATIENT SAYS YES: STOP questioning. Do NOT mention medications (they will get them after reports).
     Result -> Lab: Yes, Pharmacy: No.
   - IF PATIENT SAYS NO: Ask: 'Would you like to get the medications?'
     - IF YES: Result -> Lab: No, Pharmacy: Yes.
     - IF NO: Result -> Lab: No, Pharmacy: No.

Phase 3: Final Summary
Only AFTER establishing the billing preferences as per the logic above, you MUST call the 'case_summary' tool IMMEDIATELY.

CRITICAL INSTRUCTION: DO NOT output the summary as spoken text or thoughts. You MUST using the function call \`case_summary\`.

The 'case_summary' MUST be comprehensive and include:
- Patient Name, Age, Sex
- Medical History & Complaints
- Billing Preferences (e.g., 'Billing Preference: Lab - Yes, Pharmacy - No')

Do not call the tool multiple times. Wait until you have ALL the info, then generate the single final summary tool call. Do not say goodbye before calling the tool.`;e&&(W+=`

Patient Data: ${JSON.stringify(e,null,2)}`);const z={"en-US":"English","hi-IN":"Hindi","te-IN":"Telugu","bn-IN":"Bengali","mr-IN":"Marathi","ta-IN":"Tamil","gu-IN":"Gujarati","kn-IN":"Kannada","ml-IN":"Malayalam","pa-IN":"Punjabi","es-ES":"Spanish","fr-FR":"French","de-DE":"German","it-IT":"Italian","pt-PT":"Portuguese","ru-RU":"Russian","ja-JP":"Japanese","ko-KR":"Korean","zh-CN":"Chinese","ar-SA":"Arabic"}[s]||"English";return W+=` You should always speak in ${z}.`,s==="te-IN"&&(W+=" Dont write the telugu words in english."),{responseModalities:[md.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:W}]},tools:[{functionDeclarations:[b3]}]}},[e,s]);v.useEffect(()=>{if(_("models/gemini-2.5-flash-native-audio-preview-12-2025"),w(R),!o){const W=setTimeout(()=>{u.current&&!j&&u.current.handleConnect()},2e3);return()=>clearTimeout(W)}},[w,_,R,j,o]),v.useEffect(()=>()=>{j&&T()},[j,T]);const[q,U]=v.useState(null);v.useEffect(()=>{const W=G=>{if(!G.functionCalls)return;const z=G.functionCalls.find(Y=>Y.name===b3.name);if(z){const Y=z.args.summary;U(Y),a(Y),setTimeout(()=>{T(),t()},1e3)}G.functionCalls.length&&setTimeout(()=>{var Y;return b.sendToolResponse({functionResponses:(Y=G.functionCalls)==null?void 0:Y.map(Q=>({response:{output:{success:!0}},id:Q.id,name:Q.name}))})},200)};return b.on("toolcall",W),()=>{b.off("toolcall",W)}},[b,a]);const F=()=>{g.trim()&&(b.send([{text:g}]),x(""))},B=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),F())},V=async()=>{U(null),a(null),x("hi"),j?(T(),setTimeout(()=>{C()},500)):C()};return r.jsx("div",{className:"live-api-modal-overlay",style:l?{opacity:0,pointerEvents:"none",position:"absolute",zIndex:-1}:{},children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:i.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:i}),r.jsxs("p",{className:"live-api-modal-subtitle",children:[i," Hospital Assistant"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:V,className:"live-api-modal-close-button",title:"Refresh Session","aria-label":"Refresh session",children:r.jsx(lq,{className:"w-5 h-5"})}),r.jsx("button",{onClick:t,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx(Rt,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(fge,{patientData:e,tokenNumber:n,aiSummary:q,clinicName:i,isActive:j,volume:A}),f&&r.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:g,onChange:W=>x(W.target.value),onKeyDown:B,placeholder:"Type your message here...",disabled:!j,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:F,disabled:!j||!g.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx(Db,{className:"w-5 h-5"})})]})}),r.jsx(hge,{ref:u,videoRef:c,supportsVideo:!0,onVideoStreamChange:p,textInput:g,onSubmitTextInput:F})]})})]})})},sS=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,lastMotionTimestamp:i,backgroundMode:s})=>{const[o,l]=v.useState(null),[c,u]=v.useState("Newtons Ai"),[f,p]=v.useState("en-US"),[g,x]=v.useState(!0);if(v.useEffect(()=>{(async()=>{try{let w=null,_="Newtons Ai",T="en-US";try{const C=await le("/api/clinics/settings");if(C.ok){const A=await C.json();A.name&&A.name!==""&&(_=A.name),A.gemini_api_key&&A.gemini_api_key.trim()!==""&&(w=A.gemini_api_key.trim()),A.voice_ai_language&&(T=A.voice_ai_language)}}catch(C){console.warn("Failed to fetch clinic settings",C)}if(u(_),p(T),w)l(w);else{try{const C=await le("/api/global-settings/app_gemini_api_key");if(C.ok){const A=await C.json();if(A.value&&A.value.trim()!==""){l(A.value.trim());return}}}catch(C){console.warn("Failed to fetch global key fallback",C)}l(v3)}}catch(w){console.error("Unexpected error in getSettings:",w),l(v3)}finally{x(!1)}})()},[]),g)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsx("div",{className:"live-api-modal-header",style:{borderBottom:"none"},children:r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx(te,{variant:"circular",width:40,height:40}),r.jsxs("div",{style:{marginLeft:"12px"},children:[r.jsx(te,{width:120,height:24}),r.jsx(te,{width:180,height:14,style:{marginTop:"4px"}})]})]})}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx(te,{variant:"circular",width:64,height:64,style:{margin:"0 auto"}}),r.jsx(te,{width:200,height:32,style:{margin:"16px auto 8px"}}),r.jsx(te,{width:250,height:16,style:{margin:"0 auto"}})]}),r.jsxs("div",{className:"hospital-reception-token-card",style:{background:"transparent",boxShadow:"none"},children:[r.jsx(te,{width:140,height:20,style:{margin:"0 auto 8px"}}),r.jsx(te,{width:100,height:48,style:{margin:"0 auto"}})]})]})}),r.jsx("div",{className:"live-api-control-tray",style:{position:"relative"},children:r.jsx("div",{className:"live-api-control-tray-inner",style:{justifyContent:"center"},children:r.jsx("div",{className:"live-api-loading-text",children:"Initializing AI Assistant..."})})})]})});if(!o)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Error: API Key not available."})})});const b={apiKey:o};return r.jsx(iS,{options:b,children:r.jsx(pge,{onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:c,voiceAiLanguage:f,lastMotionTimestamp:i,backgroundMode:s})})},oS=()=>{const[t,e]=v.useState(null),[n,a]=v.useState(!0),[i,s]=v.useState(null),o=v.useCallback(async()=>{a(!0),s(null);try{const c=await le("/api/clinics/settings");if(!c.ok)throw new Error("Failed to fetch clinic settings");const u=await c.json();e(u)}catch(c){s(c instanceof Error?c.message:"An error occurred")}finally{a(!1)}},[]);v.useEffect(()=>{o()},[o]);const l=(t==null?void 0:t.custom_columns_config)||{};return{settings:t,customColumnsConfig:l,loading:n,error:i,refetch:o}},mge="_overlay_79cew_5",gge="_overlayMinimized_79cew_55",yge="_modal_79cew_65",xge="_minimized_79cew_97",vge="_contentWrapper_79cew_113",bge="_exiting_79cew_161",jge="_header_79cew_183",wge="_inputWrapper_79cew_197",Nge="_inputContainer_79cew_215",Sge="_minimizedSearchIcon_79cew_273",_ge="_input_79cew_197",Cge="_controlsGroup_79cew_347",Tge="_iconButton_79cew_373",kge="_sendButton_79cew_413",Age="_dragBar_79cew_459",Ege="_dragBarTitle_79cew_489",Pge="_dragBarControls_79cew_519",Dge="_dragBarControlsRight_79cew_537",Oge="_newChatBtn_79cew_553",Mge="_windowControlBtn_79cew_589",Ige="_content_79cew_113",Rge="_overlayContent_79cew_687",Lge="_section_79cew_711",Fge="_sectionTitle_79cew_723",$ge="_recentList_79cew_743",zge="_recentPill_79cew_767",Bge="_recentName_79cew_807",qge="_recentToken_79cew_819",Uge="_recentInfo_79cew_837",Vge="_examplesGrid_79cew_849",Hge="_exampleCard_79cew_861",Gge="_exampleIcon_79cew_897",Wge="_exampleText_79cew_905",Yge="_chatSectionFill_79cew_919",Kge="_chatMessagesFill_79cew_935",Qge="_chatBubble_79cew_955",Xge="_chatBubbleUser_79cew_975",Jge="_chatBubbleModel_79cew_991",Zge="_chatBubbleSystem_79cew_1009",eye="_processing_79cew_1025",tye="_spinner_79cew_1043",nye="_resultItem_79cew_1065",rye="_resultName_79cew_1093",aye="_resultToken_79cew_1103",iye="_resultDetails_79cew_1115",sye="_noResults_79cew_1125",It={overlay:mge,overlayMinimized:gge,modal:yge,minimized:xge,contentWrapper:vge,exiting:bge,header:jge,inputWrapper:wge,inputContainer:Nge,minimizedSearchIcon:Sge,input:_ge,controlsGroup:Cge,iconButton:Tge,sendButton:kge,dragBar:Age,dragBarTitle:Ege,dragBarControls:Pge,dragBarControlsRight:Dge,newChatBtn:Oge,windowControlBtn:Mge,content:Ige,overlayContent:Rge,section:Lge,sectionTitle:Fge,recentList:$ge,recentPill:zge,recentName:Bge,recentToken:qge,recentInfo:Uge,examplesGrid:Vge,exampleCard:Hge,exampleIcon:Gge,exampleText:Wge,chatSectionFill:Yge,chatMessagesFill:Kge,chatBubble:Qge,chatBubbleUser:Xge,chatBubbleModel:Jge,chatBubbleSystem:Zge,processing:eye,spinner:tye,resultItem:nye,resultName:rye,resultToken:aye,resultDetails:iye,noResults:sye};var LC,j3;function Nd(){if(j3)return LC;j3=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return LC=t,LC}var FC,w3;function kU(){if(w3)return FC;w3=1;var t=typeof ao=="object"&&ao&&ao.Object===Object&&ao;return FC=t,FC}var $C,N3;function ql(){if(N3)return $C;N3=1;var t=kU(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return $C=n,$C}var zC,S3;function oye(){if(S3)return zC;S3=1;var t=ql(),e=function(){return t.Date.now()};return zC=e,zC}var BC,_3;function lye(){if(_3)return BC;_3=1;var t=/\s/;function e(n){for(var a=n.length;a--&&t.test(n.charAt(a)););return a}return BC=e,BC}var qC,C3;function cye(){if(C3)return qC;C3=1;var t=lye(),e=/^\s+/;function n(a){return a&&a.slice(0,t(a)+1).replace(e,"")}return qC=n,qC}var UC,T3;function $b(){if(T3)return UC;T3=1;var t=ql(),e=t.Symbol;return UC=e,UC}var VC,k3;function uye(){if(k3)return VC;k3=1;var t=$b(),e=Object.prototype,n=e.hasOwnProperty,a=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),c=o[i];try{o[i]=void 0;var u=!0}catch{}var f=a.call(o);return u&&(l?o[i]=c:delete o[i]),f}return VC=s,VC}var HC,A3;function dye(){if(A3)return HC;A3=1;var t=Object.prototype,e=t.toString;function n(a){return e.call(a)}return HC=n,HC}var GC,E3;function Gc(){if(E3)return GC;E3=1;var t=$b(),e=uye(),n=dye(),a="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:a:s&&s in Object(l)?e(l):n(l)}return GC=o,GC}var WC,P3;function Wc(){if(P3)return WC;P3=1;function t(e){return e!=null&&typeof e=="object"}return WC=t,WC}var YC,D3;function Hg(){if(D3)return YC;D3=1;var t=Gc(),e=Wc(),n="[object Symbol]";function a(i){return typeof i=="symbol"||e(i)&&t(i)==n}return YC=a,YC}var KC,O3;function AU(){if(O3)return KC;O3=1;var t=cye(),e=Nd(),n=Hg(),a=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return a;if(e(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=e(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=t(u);var p=s.test(u);return p||o.test(u)?l(u.slice(2),p?2:8):i.test(u)?a:+u}return KC=c,KC}var QC,M3;function EU(){if(M3)return QC;M3=1;var t=Nd(),e=oye(),n=AU(),a="Expected a function",i=Math.max,s=Math.min;function o(l,c,u){var f,p,g,x,b,j,w=0,_=!1,T=!1,C=!0;if(typeof l!="function")throw new TypeError(a);c=n(c)||0,t(u)&&(_=!!u.leading,T="maxWait"in u,g=T?i(n(u.maxWait)||0,c):g,C="trailing"in u?!!u.trailing:C);function A(V){var W=f,G=p;return f=p=void 0,w=V,x=l.apply(G,W),x}function k(V){return w=V,b=setTimeout(R,c),_?A(V):x}function P(V){var W=V-j,G=V-w,z=c-W;return T?s(z,g-G):z}function I(V){var W=V-j,G=V-w;return j===void 0||W>=c||W<0||T&&G>=g}function R(){var V=e();if(I(V))return q(V);b=setTimeout(R,P(V))}function q(V){return b=void 0,C&&f?A(V):(f=p=void 0,x)}function U(){b!==void 0&&clearTimeout(b),w=0,f=j=p=b=void 0}function F(){return b===void 0?x:q(e())}function B(){var V=e(),W=I(V);if(f=arguments,p=this,j=V,W){if(b===void 0)return k(j);if(T)return clearTimeout(b),b=setTimeout(R,c),A(j)}return b===void 0&&(b=setTimeout(R,c)),x}return B.cancel=U,B.flush=F,B}return QC=o,QC}var hye=EU();const DO=Hn(hye),zb=({columns:t,data:e,onSave:n,onRowAdd:a,onRowDelete:i,onRowClick:s,onRowHover:o,editable:l=!0,showRowNumbers:c=!0,title:u})=>{const[f,p]=v.useState(e),[g,x]=v.useState(null),[b,j]=v.useState(""),[w,_]=v.useState(""),[T,C]=v.useState(null),[A,k]=v.useState(!1),[P,I]=v.useState(new Set);Ce.useEffect(()=>{p(e),k(!1)},[e]);const R=v.useMemo(()=>{let z=[...f];if(w.trim()){const Y=w.toLowerCase();z=z.filter(Q=>Object.values(Q).some(K=>K!=null&&String(K).toLowerCase().includes(Y)))}return T&&z.sort((Y,Q)=>{const K=Y[T.key],$=Q[T.key];return K==null?1:$==null?-1:K<$?T.direction==="asc"?-1:1:K>$?T.direction==="asc"?1:-1:0}),z},[f,w,T]),q=(z,Y)=>{var K;if(!l)return;const Q=t.find($=>$.key===Y);(Q==null?void 0:Q.editable)!==!1&&(x({row:z,col:Y}),j(String(((K=f[z])==null?void 0:K[Y])??"")))},U=()=>{var z;if(g){const Y=[...f],Q=t.find($=>$.key===g.col);let K=b;(Q==null?void 0:Q.type)==="number"&&(K=parseFloat(K)||0),(Q==null?void 0:Q.type)==="boolean"&&(K=K.toLowerCase()==="true"||K==="1"),((z=Y[g.row])==null?void 0:z[g.col])!==K&&(Y[g.row]={...Y[g.row],[g.col]:K},p(Y),k(!0))}x(null)},F=z=>{if(z.key==="Enter")U();else if(z.key==="Escape")x(null);else if(z.key==="Tab"&&(z.preventDefault(),U(),g)){const Y=t.findIndex(K=>K.key===g.col),Q=t[Y+1];Q?setTimeout(()=>q(g.row,Q.key),0):g.row<f.length-1&&setTimeout(()=>q(g.row+1,t[0].key),0)}},B=z=>{C(Y=>(Y==null?void 0:Y.key)===z?Y.direction==="asc"?{key:z,direction:"desc"}:null:{key:z,direction:"asc"})},V=()=>{n&&(n(f),k(!1))},W=()=>{const z=t.map(xe=>xe.label).join(","),Y=f.map(xe=>t.map(X=>{const Ie=xe[X.key];return typeof Ie=="string"&&Ie.includes(",")?`"${Ie}"`:Ie}).join(",")),Q=[z,...Y].join(`
`),K=new Blob([Q],{type:"text/csv"}),$=URL.createObjectURL(K),ie=document.createElement("a");ie.href=$,ie.download=`${u||"data"}.csv`,ie.click()},G=z=>{const Y=new Set(P);Y.has(z)?Y.delete(z):Y.add(z),I(Y)};return r.jsxs("div",{className:"excel-grid",children:[r.jsxs("div",{className:"excel-toolbar",children:[r.jsxs("div",{className:"excel-search",children:[r.jsx("input",{type:"text",placeholder:" Search...",value:w,onChange:z=>_(z.target.value)}),w&&r.jsx("button",{className:"clear-search",onClick:()=>_(""),children:r.jsx(Rt,{size:14})})]}),r.jsxs("div",{className:"excel-actions",children:[a&&r.jsxs("button",{onClick:a,className:"excel-btn",title:"Add Row",children:[r.jsx(Vn,{size:16})," Add"]}),r.jsxs("button",{onClick:W,className:"excel-btn",title:"Export CSV",children:[r.jsx(AX,{size:16})," Export"]}),l&&n&&r.jsxs("button",{onClick:V,className:`excel-btn save-btn ${A?"has-changes":""}`,disabled:!A,title:"Save Changes",children:[r.jsx(Bi,{size:16})," Save"]})]})]}),r.jsxs("div",{className:"excel-status",children:[w&&r.jsxs("span",{children:["Showing ",R.length," of ",f.length]}),A&&r.jsx("span",{className:"unsaved-indicator",children:" Unsaved changes"})]}),r.jsx("div",{className:"excel-table-wrapper",children:r.jsxs("table",{className:"excel-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[c&&r.jsx("th",{className:"row-num-header",children:"#"}),t.map(z=>r.jsx("th",{onClick:()=>B(z.key),style:{width:z.width,cursor:"pointer"},children:r.jsxs("div",{className:"th-content",children:[z.label,(T==null?void 0:T.key)===z.key&&(T.direction==="asc"?r.jsx(dX,{size:14}):r.jsx(ZB,{size:14}))]})},z.key)),i&&r.jsx("th",{className:"action-col",children:""})]})}),r.jsx("tbody",{children:R.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:t.length+(c?1:0)+(i?1:0),className:"no-data",children:"No data found"})}):R.map((z,Y)=>r.jsxs("tr",{className:`${P.has(Y)?"selected":""} ${s?"clickable-row":""}`,onClick:()=>s&&s(z,Y),onMouseEnter:()=>o&&o(z,Y),style:s?{cursor:"pointer"}:void 0,children:[c&&r.jsx("td",{className:"row-num",onClick:()=>G(Y),children:Y+1}),t.map(Q=>r.jsx("td",{onClick:()=>q(Y,Q.key),className:`
                                                ${(g==null?void 0:g.row)===Y&&(g==null?void 0:g.col)===Q.key?"editing":""}
                                                ${Q.editable===!1?"read-only":""}
                                            `,children:(g==null?void 0:g.row)===Y&&(g==null?void 0:g.col)===Q.key?r.jsx("input",{type:Q.type==="number"?"number":"text",value:b,onChange:K=>j(K.target.value),onBlur:U,onKeyDown:F,autoFocus:!0}):r.jsx("span",{children:z[Q.key]??""})},Q.key)),i&&r.jsx("td",{className:"action-col",children:r.jsx("button",{className:"delete-row",onClick:()=>i(Y),children:r.jsx(Rt,{size:14})})})]},z.id||Y))})]})}),r.jsxs("div",{className:"excel-footer",children:[r.jsxs("span",{children:[f.length," rows"]}),P.size>0&&r.jsxs("span",{children:[P.size," selected"]})]})]})};function PU(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=PU(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function fn(){for(var t,e,n=0,a="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=PU(t))&&(a&&(a+=" "),a+=e);return a}var XC,I3;function ps(){if(I3)return XC;I3=1;var t=Array.isArray;return XC=t,XC}var JC,R3;function OO(){if(R3)return JC;R3=1;var t=ps(),e=Hg(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:a.test(s)||!n.test(s)||o!=null&&s in Object(o)}return JC=i,JC}var ZC,L3;function MO(){if(L3)return ZC;L3=1;var t=Gc(),e=Nd(),n="[object AsyncFunction]",a="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==a||c==i||c==n||c==s}return ZC=o,ZC}var e2,F3;function fye(){if(F3)return e2;F3=1;var t=ql(),e=t["__core-js_shared__"];return e2=e,e2}var t2,$3;function pye(){if($3)return t2;$3=1;var t=fye(),e=function(){var a=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function n(a){return!!e&&e in a}return t2=n,t2}var n2,z3;function DU(){if(z3)return n2;z3=1;var t=Function.prototype,e=t.toString;function n(a){if(a!=null){try{return e.call(a)}catch{}try{return a+""}catch{}}return""}return n2=n,n2}var r2,B3;function mye(){if(B3)return r2;B3=1;var t=MO(),e=pye(),n=Nd(),a=DU(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,f=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||e(g))return!1;var x=t(g)?f:s;return x.test(a(g))}return r2=p,r2}var a2,q3;function gye(){if(q3)return a2;q3=1;function t(e,n){return e==null?void 0:e[n]}return a2=t,a2}var i2,U3;function Rf(){if(U3)return i2;U3=1;var t=mye(),e=gye();function n(a,i){var s=e(a,i);return t(s)?s:void 0}return i2=n,i2}var s2,V3;function lS(){if(V3)return s2;V3=1;var t=Rf(),e=t(Object,"create");return s2=e,s2}var o2,H3;function yye(){if(H3)return o2;H3=1;var t=lS();function e(){this.__data__=t?t(null):{},this.size=0}return o2=e,o2}var l2,G3;function xye(){if(G3)return l2;G3=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return l2=t,l2}var c2,W3;function vye(){if(W3)return c2;W3=1;var t=lS(),e="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return a.call(o,s)?o[s]:void 0}return c2=i,c2}var u2,Y3;function bye(){if(Y3)return u2;Y3=1;var t=lS(),e=Object.prototype,n=e.hasOwnProperty;function a(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return u2=a,u2}var d2,K3;function jye(){if(K3)return d2;K3=1;var t=lS(),e="__lodash_hash_undefined__";function n(a,i){var s=this.__data__;return this.size+=this.has(a)?0:1,s[a]=t&&i===void 0?e:i,this}return d2=n,d2}var h2,Q3;function wye(){if(Q3)return h2;Q3=1;var t=yye(),e=xye(),n=vye(),a=bye(),i=jye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,h2=s,h2}var f2,X3;function Nye(){if(X3)return f2;X3=1;function t(){this.__data__=[],this.size=0}return f2=t,f2}var p2,J3;function IO(){if(J3)return p2;J3=1;function t(e,n){return e===n||e!==e&&n!==n}return p2=t,p2}var m2,Z3;function cS(){if(Z3)return m2;Z3=1;var t=IO();function e(n,a){for(var i=n.length;i--;)if(t(n[i][0],a))return i;return-1}return m2=e,m2}var g2,eL;function Sye(){if(eL)return g2;eL=1;var t=cS(),e=Array.prototype,n=e.splice;function a(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return g2=a,g2}var y2,tL;function _ye(){if(tL)return y2;tL=1;var t=cS();function e(n){var a=this.__data__,i=t(a,n);return i<0?void 0:a[i][1]}return y2=e,y2}var x2,nL;function Cye(){if(nL)return x2;nL=1;var t=cS();function e(n){return t(this.__data__,n)>-1}return x2=e,x2}var v2,rL;function Tye(){if(rL)return v2;rL=1;var t=cS();function e(n,a){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,a])):i[s][1]=a,this}return v2=e,v2}var b2,aL;function uS(){if(aL)return b2;aL=1;var t=Nye(),e=Sye(),n=_ye(),a=Cye(),i=Tye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,b2=s,b2}var j2,iL;function RO(){if(iL)return j2;iL=1;var t=Rf(),e=ql(),n=t(e,"Map");return j2=n,j2}var w2,sL;function kye(){if(sL)return w2;sL=1;var t=wye(),e=uS(),n=RO();function a(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return w2=a,w2}var N2,oL;function Aye(){if(oL)return N2;oL=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return N2=t,N2}var S2,lL;function dS(){if(lL)return S2;lL=1;var t=Aye();function e(n,a){var i=n.__data__;return t(a)?i[typeof a=="string"?"string":"hash"]:i.map}return S2=e,S2}var _2,cL;function Eye(){if(cL)return _2;cL=1;var t=dS();function e(n){var a=t(this,n).delete(n);return this.size-=a?1:0,a}return _2=e,_2}var C2,uL;function Pye(){if(uL)return C2;uL=1;var t=dS();function e(n){return t(this,n).get(n)}return C2=e,C2}var T2,dL;function Dye(){if(dL)return T2;dL=1;var t=dS();function e(n){return t(this,n).has(n)}return T2=e,T2}var k2,hL;function Oye(){if(hL)return k2;hL=1;var t=dS();function e(n,a){var i=t(this,n),s=i.size;return i.set(n,a),this.size+=i.size==s?0:1,this}return k2=e,k2}var A2,fL;function LO(){if(fL)return A2;fL=1;var t=kye(),e=Eye(),n=Pye(),a=Dye(),i=Oye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,A2=s,A2}var E2,pL;function OU(){if(pL)return E2;pL=1;var t=LO(),e="Expected a function";function n(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var u=a.apply(this,o);return s.cache=c.set(l,u)||c,u};return s.cache=new(n.Cache||t),s}return n.Cache=t,E2=n,E2}var P2,mL;function Mye(){if(mL)return P2;mL=1;var t=OU(),e=500;function n(a){var i=t(a,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return P2=n,P2}var D2,gL;function Iye(){if(gL)return D2;gL=1;var t=Mye(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,u){s.push(c?u.replace(n,"$1"):l||o)}),s});return D2=a,D2}var O2,yL;function FO(){if(yL)return O2;yL=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=Array(i);++a<i;)s[a]=n(e[a],a,e);return s}return O2=t,O2}var M2,xL;function Rye(){if(xL)return M2;xL=1;var t=$b(),e=FO(),n=ps(),a=Hg(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(a(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return M2=o,M2}var I2,vL;function MU(){if(vL)return I2;vL=1;var t=Rye();function e(n){return n==null?"":t(n)}return I2=e,I2}var R2,bL;function IU(){if(bL)return R2;bL=1;var t=ps(),e=OO(),n=Iye(),a=MU();function i(s,o){return t(s)?s:e(s,o)?[s]:n(a(s))}return R2=i,R2}var L2,jL;function hS(){if(jL)return L2;jL=1;var t=Hg();function e(n){if(typeof n=="string"||t(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return L2=e,L2}var F2,wL;function $O(){if(wL)return F2;wL=1;var t=IU(),e=hS();function n(a,i){i=t(i,a);for(var s=0,o=i.length;a!=null&&s<o;)a=a[e(i[s++])];return s&&s==o?a:void 0}return F2=n,F2}var $2,NL;function RU(){if(NL)return $2;NL=1;var t=$O();function e(n,a,i){var s=n==null?void 0:t(n,a);return s===void 0?i:s}return $2=e,$2}var Lye=RU();const Ls=Hn(Lye);var z2,SL;function Fye(){if(SL)return z2;SL=1;function t(e){return e==null}return z2=t,z2}var $ye=Fye();const dn=Hn($ye);var B2,_L;function zye(){if(_L)return B2;_L=1;var t=Gc(),e=ps(),n=Wc(),a="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==a}return B2=i,B2}var Bye=zye();const Tf=Hn(Bye);var qye=MO();const an=Hn(qye);var Uye=Nd();const Gg=Hn(Uye);var q2={exports:{}},dr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CL;function Vye(){if(CL)return dr;CL=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function j(w){if(typeof w=="object"&&w!==null){var _=w.$$typeof;switch(_){case t:switch(w=w.type,w){case n:case i:case a:case u:case f:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case c:case g:case p:case s:return w;default:return _}}case e:return _}}}return dr.ContextConsumer=o,dr.ContextProvider=s,dr.Element=t,dr.ForwardRef=c,dr.Fragment=n,dr.Lazy=g,dr.Memo=p,dr.Portal=e,dr.Profiler=i,dr.StrictMode=a,dr.Suspense=u,dr.SuspenseList=f,dr.isAsyncMode=function(){return!1},dr.isConcurrentMode=function(){return!1},dr.isContextConsumer=function(w){return j(w)===o},dr.isContextProvider=function(w){return j(w)===s},dr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},dr.isForwardRef=function(w){return j(w)===c},dr.isFragment=function(w){return j(w)===n},dr.isLazy=function(w){return j(w)===g},dr.isMemo=function(w){return j(w)===p},dr.isPortal=function(w){return j(w)===e},dr.isProfiler=function(w){return j(w)===i},dr.isStrictMode=function(w){return j(w)===a},dr.isSuspense=function(w){return j(w)===u},dr.isSuspenseList=function(w){return j(w)===f},dr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===i||w===a||w===u||w===f||w===x||typeof w=="object"&&w!==null&&(w.$$typeof===g||w.$$typeof===p||w.$$typeof===s||w.$$typeof===o||w.$$typeof===c||w.$$typeof===b||w.getModuleId!==void 0)},dr.typeOf=j,dr}var TL;function Hye(){return TL||(TL=1,q2.exports=Vye()),q2.exports}var Gye=Hye(),U2,kL;function LU(){if(kL)return U2;kL=1;var t=Gc(),e=Wc(),n="[object Number]";function a(i){return typeof i=="number"||e(i)&&t(i)==n}return U2=a,U2}var V2,AL;function Wye(){if(AL)return V2;AL=1;var t=LU();function e(n){return t(n)&&n!=+n}return V2=e,V2}var Yye=Wye();const Wg=Hn(Yye);var Kye=LU();const Qye=Hn(Kye);var Li=function(e){return e===0?0:e>0?1:-1},ef=function(e){return Tf(e)&&e.indexOf("%")===e.length-1},Nt=function(e){return Qye(e)&&!Wg(e)},Xye=function(e){return dn(e)},Aa=function(e){return Nt(e)||Tf(e)},Jye=0,Lf=function(e){var n=++Jye;return"".concat(e||"").concat(n)},Fi=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Nt(e)&&!Tf(e))return a;var s;if(ef(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Wg(s)&&(s=a),i&&s>n&&(s=n),s},Ku=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Zye=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,a={},i=0;i<n;i++)if(!a[e[i]])a[e[i]]=!0;else return!0;return!1},ka=function(e,n){return Nt(e)&&Nt(n)?function(a){return e+a*(n-e)}:function(){return n}};function Mw(t,e,n){return!t||!t.length?null:t.find(function(a){return a&&(typeof e=="function"?e(a):Ls(a,e))===n})}var exe=function(e,n){return Nt(e)&&Nt(n)?e-n:Tf(e)&&Tf(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Bm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var a in e)if({}.hasOwnProperty.call(e,a)&&!{}.hasOwnProperty.call(t,a))return!1;return!0}function aP(t){"@babel/helpers - typeof";return aP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aP(t)}var txe=["viewBox","children"],nxe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],EL=["points","pathLength"],H2={svg:txe,polygon:EL,polyline:EL},zO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Iw=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(v.isValidElement(e)&&(a=e.props),!Gg(a))return null;var i={};return Object.keys(a).forEach(function(s){zO.includes(s)&&(i[s]=n||function(o){return a[s](a,o)})}),i},rxe=function(e,n,a){return function(i){return e(n,a,i),null}},kf=function(e,n,a){if(!Gg(e)||aP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];zO.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=rxe(o,n,a))}),i},axe=["children"],ixe=["children"];function PL(t,e){if(t==null)return{};var n=sxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function sxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function iP(t){"@babel/helpers - typeof";return iP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iP(t)}var DL={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Pc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},OL=null,G2=null,BO=function t(e){if(e===OL&&Array.isArray(G2))return G2;var n=[];return v.Children.forEach(e,function(a){dn(a)||(Gye.isFragment(a)?n=n.concat(t(a.props.children)):n.push(a))}),G2=n,OL=e,n};function Fs(t,e){var n=[],a=[];return Array.isArray(e)?a=e.map(function(i){return Pc(i)}):a=[Pc(e)],BO(t).forEach(function(i){var s=Ls(i,"type.displayName")||Ls(i,"type.name");a.indexOf(s)!==-1&&n.push(i)}),n}function As(t,e){var n=Fs(t,e);return n&&n[0]}var ML=function(e){if(!e||!e.props)return!1;var n=e.props,a=n.width,i=n.height;return!(!Nt(a)||a<=0||!Nt(i)||i<=0)},oxe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lxe=function(e){return e&&e.type&&Tf(e.type)&&oxe.indexOf(e.type)>=0},FU=function(e){return e&&iP(e)==="object"&&"clipDot"in e},cxe=function(e,n,a,i){var s,o=(s=H2==null?void 0:H2[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!an(e)&&(i&&o.includes(n)||nxe.includes(n))||a&&zO.includes(n)},Bt=function(e,n,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(v.isValidElement(e)&&(i=e.props),!Gg(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;cxe((l=i)===null||l===void 0?void 0:l[o],o,n,a)&&(s[o]=i[o])}),s},sP=function t(e,n){if(e===n)return!0;var a=v.Children.count(e);if(a!==v.Children.count(n))return!1;if(a===0)return!0;if(a===1)return IL(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<a;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!IL(s,o))return!1}return!0},IL=function(e,n){if(dn(e)&&dn(n))return!0;if(!dn(e)&&!dn(n)){var a=e.props||{},i=a.children,s=PL(a,axe),o=n.props||{},l=o.children,c=PL(o,ixe);return i&&l?Bm(s,c)&&sP(i,l):!i&&!l?Bm(s,c):!1}return!1},RL=function(e,n){var a=[],i={};return BO(e).forEach(function(s,o){if(lxe(s))a.push(s);else if(s){var l=Pc(s.type),c=n[l]||{},u=c.handler,f=c.once;if(u&&(!f||!i[l])){var p=u(s,l,o);a.push(p),i[l]=!0}}}),a},uxe=function(e){var n=e&&e.type;return n&&DL[n]?DL[n]:null},dxe=function(e,n){return BO(n).indexOf(e)},hxe=["children","width","height","viewBox","className","style","title","desc"];function oP(){return oP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oP.apply(this,arguments)}function fxe(t,e){if(t==null)return{};var n=pxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function pxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function lP(t){var e=t.children,n=t.width,a=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,u=fxe(t,hxe),f=i||{width:n,height:a,x:0,y:0},p=fn("recharts-surface",s);return Ce.createElement("svg",oP({},Bt(u,!0,"svg"),{className:p,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Ce.createElement("title",null,l),Ce.createElement("desc",null,c),e)}var mxe=["children","className"];function cP(){return cP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cP.apply(this,arguments)}function gxe(t,e){if(t==null)return{};var n=yxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function yxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var In=Ce.forwardRef(function(t,e){var n=t.children,a=t.className,i=gxe(t,mxe),s=fn("recharts-layer",a);return Ce.createElement("g",cP({className:s},Bt(i,!0),{ref:e}),n)}),Bo=function(e,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s]},W2,LL;function xxe(){if(LL)return W2;LL=1;function t(e,n,a){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),a=a>s?s:a,a<0&&(a+=s),s=n>a?0:a-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}return W2=t,W2}var Y2,FL;function vxe(){if(FL)return Y2;FL=1;var t=xxe();function e(n,a,i){var s=n.length;return i=i===void 0?s:i,!a&&i>=s?n:t(n,a,i)}return Y2=e,Y2}var K2,$L;function $U(){if($L)return K2;$L=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(u){return l.test(u)}return K2=c,K2}var Q2,zL;function bxe(){if(zL)return Q2;zL=1;function t(e){return e.split("")}return Q2=t,Q2}var X2,BL;function jxe(){if(BL)return X2;BL=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=u+"?",j="["+s+"]?",w="(?:"+x+"(?:"+[f,p,g].join("|")+")"+j+b+")*",_=j+b+w,T="(?:"+[f+l+"?",l,p,g,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+T+_,"g");function A(k){return k.match(C)||[]}return X2=A,X2}var J2,qL;function wxe(){if(qL)return J2;qL=1;var t=bxe(),e=$U(),n=jxe();function a(i){return e(i)?n(i):t(i)}return J2=a,J2}var Z2,UL;function Nxe(){if(UL)return Z2;UL=1;var t=vxe(),e=$U(),n=wxe(),a=MU();function i(s){return function(o){o=a(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),u=l?t(l,1).join(""):o.slice(1);return c[s]()+u}}return Z2=i,Z2}var eT,VL;function Sxe(){if(VL)return eT;VL=1;var t=Nxe(),e=t("toUpperCase");return eT=e,eT}var _xe=Sxe();const fS=Hn(_xe);function Rr(t){return function(){return t}}const zU=Math.cos,Rw=Math.sin,Yo=Math.sqrt,Lw=Math.PI,pS=2*Lw,uP=Math.PI,dP=2*uP,Wh=1e-6,Cxe=dP-Wh;function BU(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Txe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return BU;const n=10**e;return function(a){this._+=a[0];for(let i=1,s=a.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}class kxe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?BU:Txe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,a,i){this._append`Q${+e},${+n},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(e,n,a,i,s,o){this._append`C${+e},${+n},${+a},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,a,i,s){if(e=+e,n=+n,a=+a,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=a-e,u=i-n,f=o-e,p=l-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Wh)if(!(Math.abs(p*c-u*f)>Wh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let x=a-o,b=i-l,j=c*c+u*u,w=x*x+b*b,_=Math.sqrt(j),T=Math.sqrt(g),C=s*Math.tan((uP-Math.acos((j+g-w)/(2*_*T)))/2),A=C/T,k=C/_;Math.abs(A-1)>Wh&&this._append`L${e+A*f},${n+A*p}`,this._append`A${s},${s},0,0,${+(p*x>f*b)},${this._x1=e+k*c},${this._y1=n+k*u}`}}arc(e,n,a,i,s,o){if(e=+e,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(i),c=a*Math.sin(i),u=e+l,f=n+c,p=1^o,g=o?i-s:s-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Wh||Math.abs(this._y1-f)>Wh)&&this._append`L${u},${f}`,a&&(g<0&&(g=g%dP+dP),g>Cxe?this._append`A${a},${a},0,1,${p},${e-l},${n-c}A${a},${a},0,1,${p},${this._x1=u},${this._y1=f}`:g>Wh&&this._append`A${a},${a},0,${+(g>=uP)},${p},${this._x1=e+a*Math.cos(s)},${this._y1=n+a*Math.sin(s)}`)}rect(e,n,a,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function qO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);e=a}return t},()=>new kxe(e)}function UO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qU(t){this._context=t}qU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function mS(t){return new qU(t)}function UU(t){return t[0]}function VU(t){return t[1]}function HU(t,e){var n=Rr(!0),a=null,i=mS,s=null,o=qO(l);t=typeof t=="function"?t:t===void 0?UU:Rr(t),e=typeof e=="function"?e:e===void 0?VU:Rr(e);function l(c){var u,f=(c=UO(c)).length,p,g=!1,x;for(a==null&&(s=i(x=o())),u=0;u<=f;++u)!(u<f&&n(p=c[u],u,c))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,u,c),+e(p,u,c));if(x)return s=null,x+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Rr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Rr(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Rr(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,a!=null&&(s=i(a)),l):i},l.context=function(c){return arguments.length?(c==null?a=s=null:s=i(a=c),l):a},l}function Pj(t,e,n){var a=null,i=Rr(!0),s=null,o=mS,l=null,c=qO(u);t=typeof t=="function"?t:t===void 0?UU:Rr(+t),e=typeof e=="function"?e:Rr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?VU:Rr(+n);function u(p){var g,x,b,j=(p=UO(p)).length,w,_=!1,T,C=new Array(j),A=new Array(j);for(s==null&&(l=o(T=c())),g=0;g<=j;++g){if(!(g<j&&i(w=p[g],g,p))===_)if(_=!_)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=g-1;b>=x;--b)l.point(C[b],A[b]);l.lineEnd(),l.areaEnd()}_&&(C[g]=+t(w,g,p),A[g]=+e(w,g,p),l.point(a?+a(w,g,p):C[g],n?+n(w,g,p):A[g]))}if(T)return l=null,T+""||null}function f(){return HU().defined(i).curve(o).context(s)}return u.x=function(p){return arguments.length?(t=typeof p=="function"?p:Rr(+p),a=null,u):t},u.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Rr(+p),u):t},u.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:Rr(+p),u):a},u.y=function(p){return arguments.length?(e=typeof p=="function"?p:Rr(+p),n=null,u):e},u.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Rr(+p),u):e},u.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Rr(+p),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(a).y(e)},u.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Rr(!!p),u):i},u.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),u):o},u.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),u):s},u}class GU{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Axe(t){return new GU(t,!0)}function Exe(t){return new GU(t,!1)}const VO={draw(t,e){const n=Yo(e/Lw);t.moveTo(n,0),t.arc(0,0,n,0,pS)}},Pxe={draw(t,e){const n=Yo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},WU=Yo(1/3),Dxe=WU*2,Oxe={draw(t,e){const n=Yo(e/Dxe),a=n*WU;t.moveTo(0,-n),t.lineTo(a,0),t.lineTo(0,n),t.lineTo(-a,0),t.closePath()}},Mxe={draw(t,e){const n=Yo(e),a=-n/2;t.rect(a,a,n,n)}},Ixe=.8908130915292852,YU=Rw(Lw/10)/Rw(7*Lw/10),Rxe=Rw(pS/10)*YU,Lxe=-zU(pS/10)*YU,Fxe={draw(t,e){const n=Yo(e*Ixe),a=Rxe*n,i=Lxe*n;t.moveTo(0,-n),t.lineTo(a,i);for(let s=1;s<5;++s){const o=pS*s/5,l=zU(o),c=Rw(o);t.lineTo(c*n,-l*n),t.lineTo(l*a-c*i,c*a+l*i)}t.closePath()}},tT=Yo(3),$xe={draw(t,e){const n=-Yo(e/(tT*3));t.moveTo(0,n*2),t.lineTo(-tT*n,-n),t.lineTo(tT*n,-n),t.closePath()}},Js=-.5,Zs=Yo(3)/2,hP=1/Yo(12),zxe=(hP/2+1)*3,Bxe={draw(t,e){const n=Yo(e/zxe),a=n/2,i=n*hP,s=a,o=n*hP+n,l=-s,c=o;t.moveTo(a,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Js*a-Zs*i,Zs*a+Js*i),t.lineTo(Js*s-Zs*o,Zs*s+Js*o),t.lineTo(Js*l-Zs*c,Zs*l+Js*c),t.lineTo(Js*a+Zs*i,Js*i-Zs*a),t.lineTo(Js*s+Zs*o,Js*o-Zs*s),t.lineTo(Js*l+Zs*c,Js*c-Zs*l),t.closePath()}};function qxe(t,e){let n=null,a=qO(i);t=typeof t=="function"?t:Rr(t||VO),e=typeof e=="function"?e:Rr(e===void 0?64:+e);function i(){let s;if(n||(n=s=a()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Rr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Rr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Fw(){}function $w(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function KU(t){this._context=t}KU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$w(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$w(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Uxe(t){return new KU(t)}function QU(t){this._context=t}QU.prototype={areaStart:Fw,areaEnd:Fw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:$w(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vxe(t){return new QU(t)}function XU(t){this._context=t}XU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:$w(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Hxe(t){return new XU(t)}function JU(t){this._context=t}JU.prototype={areaStart:Fw,areaEnd:Fw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Gxe(t){return new JU(t)}function HL(t){return t<0?-1:1}function GL(t,e,n){var a=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(a||i<0&&-0),o=(n-t._y1)/(i||a<0&&-0),l=(s*i+o*a)/(a+i);return(HL(s)+HL(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function WL(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function nT(t,e,n){var a=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-a)/3;t._context.bezierCurveTo(a+l,i+l*e,s-l,o-l*n,s,o)}function zw(t){this._context=t}zw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:nT(this,this._t0,WL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,nT(this,WL(this,n=GL(this,t,e)),n);break;default:nT(this,this._t0,n=GL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function ZU(t){this._context=new e7(t)}(ZU.prototype=Object.create(zw.prototype)).point=function(t,e){zw.prototype.point.call(this,e,t)};function e7(t){this._context=t}e7.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,a,i,s){this._context.bezierCurveTo(e,t,a,n,s,i)}};function Wxe(t){return new zw(t)}function Yxe(t){return new ZU(t)}function t7(t){this._context=t}t7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var a=YL(t),i=YL(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(a[0][s],i[0][s],a[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function YL(t){var e,n=t.length-1,a,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)a=i[e]/s[e-1],s[e]-=a,o[e]-=a*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Kxe(t){return new t7(t)}function gS(t,e){this._context=t,this._t=e}gS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Qxe(t){return new gS(t,.5)}function Xxe(t){return new gS(t,0)}function Jxe(t){return new gS(t,1)}function ug(t,e){if((o=t.length)>1)for(var n=1,a,i,s=t[e[0]],o,l=s.length;n<o;++n)for(i=s,s=t[e[n]],a=0;a<l;++a)s[a][1]+=s[a][0]=isNaN(i[a][1])?i[a][0]:i[a][1]}function fP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Zxe(t,e){return t[e]}function eve(t){const e=[];return e.key=t,e}function tve(){var t=Rr([]),e=fP,n=ug,a=Zxe;function i(s){var o=Array.from(t.apply(this,arguments),eve),l,c=o.length,u=-1,f;for(const p of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+a(p,o[l].key,u,s)]).data=p;for(l=0,f=UO(e(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Rr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(a=typeof s=="function"?s:Rr(+s),i):a},i.order=function(s){return arguments.length?(e=s==null?fP:typeof s=="function"?s:Rr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??ug,i):n},i}function nve(t,e){if((a=t.length)>0){for(var n,a,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<a;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<a;++n)t[n][i][1]/=o}ug(t,e)}}function rve(t,e){if((i=t.length)>0){for(var n=0,a=t[e[0]],i,s=a.length;n<s;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}ug(t,e)}}function ave(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,a=1,i,s,o;a<s;++a){for(var l=0,c=0,u=0;l<o;++l){for(var f=t[e[l]],p=f[a][1]||0,g=f[a-1][1]||0,x=(p-g)/2,b=0;b<l;++b){var j=t[e[b]],w=j[a][1]||0,_=j[a-1][1]||0;x+=w-_}c+=p,u+=x*p}i[a-1][1]+=i[a-1][0]=n,c&&(n-=u/c)}i[a-1][1]+=i[a-1][0]=n,ug(t,e)}}function $v(t){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(t)}var ive=["type","size","sizeType"];function pP(){return pP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pP.apply(this,arguments)}function KL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function QL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(n),!0).forEach(function(a){sve(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function sve(t,e,n){return e=ove(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ove(t){var e=lve(t,"string");return $v(e)=="symbol"?e:e+""}function lve(t,e){if($v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if($v(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cve(t,e){if(t==null)return{};var n=uve(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function uve(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var n7={symbolCircle:VO,symbolCross:Pxe,symbolDiamond:Oxe,symbolSquare:Mxe,symbolStar:Fxe,symbolTriangle:$xe,symbolWye:Bxe},dve=Math.PI/180,hve=function(e){var n="symbol".concat(fS(e));return n7[n]||VO},fve=function(e,n,a){if(n==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*dve;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},pve=function(e,n){n7["symbol".concat(fS(e))]=n},HO=function(e){var n=e.type,a=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=cve(e,ive),u=QL(QL({},c),{},{type:a,size:s,sizeType:l}),f=function(){var w=hve(a),_=qxe().type(w).size(fve(s,l,a));return _()},p=u.className,g=u.cx,x=u.cy,b=Bt(u,!0);return g===+g&&x===+x&&s===+s?Ce.createElement("path",pP({},b,{className:fn("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(x,")"),d:f()})):null};HO.registerSymbol=pve;function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}function mP(){return mP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},mP.apply(this,arguments)}function XL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function mve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XL(Object(n),!0).forEach(function(a){zv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function gve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yve(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a7(a.key),a)}}function xve(t,e,n){return e&&yve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vve(t,e,n){return e=Bw(e),bve(t,r7()?Reflect.construct(e,n||[],Bw(t).constructor):e.apply(t,n))}function bve(t,e){if(e&&(dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jve(t)}function jve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r7=function(){return!!t})()}function Bw(t){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bw(t)}function wve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gP(t,e)}function gP(t,e){return gP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},gP(t,e)}function zv(t,e,n){return e=a7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a7(t){var e=Nve(t,"string");return dg(e)=="symbol"?e:e+""}function Nve(t,e){if(dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Oo=32,GO=function(t){function e(){return gve(this,e),vve(this,e,arguments)}return wve(e,t),xve(e,[{key:"renderIcon",value:function(a){var i=this.props.inactiveColor,s=Oo/2,o=Oo/6,l=Oo/3,c=a.inactive?i:a.color;if(a.type==="plainline")return Ce.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:s,x2:Oo,y2:s,className:"recharts-legend-icon"});if(a.type==="line")return Ce.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Oo,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(a.type==="rect")return Ce.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Oo/8,"h").concat(Oo,"v").concat(Oo*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Ce.isValidElement(a.legendIcon)){var u=mve({},a);return delete u.legendIcon,Ce.cloneElement(a.legendIcon,u)}return Ce.createElement(HO,{fill:c,cx:s,cy:s,size:Oo,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,f={x:0,y:0,width:Oo,height:Oo},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(x,b){var j=x.formatter||c,w=fn(zv(zv({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var _=an(x.value)?null:x.value;Bo(!an(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=x.inactive?u:x.color;return Ce.createElement("li",mP({className:w,style:p,key:"legend-item-".concat(b)},kf(a.props,x,b)),Ce.createElement(lP,{width:o,height:o,viewBox:f,style:g},a.renderIcon(x)),Ce.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},j?j(_,x,b):_))})}},{key:"render",value:function(){var a=this.props,i=a.payload,s=a.layout,o=a.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Ce.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(v.PureComponent);zv(GO,"displayName","Legend");zv(GO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var rT,JL;function Sve(){if(JL)return rT;JL=1;var t=uS();function e(){this.__data__=new t,this.size=0}return rT=e,rT}var aT,ZL;function _ve(){if(ZL)return aT;ZL=1;function t(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}return aT=t,aT}var iT,e5;function Cve(){if(e5)return iT;e5=1;function t(e){return this.__data__.get(e)}return iT=t,iT}var sT,t5;function Tve(){if(t5)return sT;t5=1;function t(e){return this.__data__.has(e)}return sT=t,sT}var oT,n5;function kve(){if(n5)return oT;n5=1;var t=uS(),e=RO(),n=LO(),a=200;function i(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<a-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return oT=i,oT}var lT,r5;function i7(){if(r5)return lT;r5=1;var t=uS(),e=Sve(),n=_ve(),a=Cve(),i=Tve(),s=kve();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=a,o.prototype.has=i,o.prototype.set=s,lT=o,lT}var cT,a5;function Ave(){if(a5)return cT;a5=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return cT=e,cT}var uT,i5;function Eve(){if(i5)return uT;i5=1;function t(e){return this.__data__.has(e)}return uT=t,uT}var dT,s5;function s7(){if(s5)return dT;s5=1;var t=LO(),e=Ave(),n=Eve();function a(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return a.prototype.add=a.prototype.push=e,a.prototype.has=n,dT=a,dT}var hT,o5;function o7(){if(o5)return hT;o5=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(e[a],a,e))return!0;return!1}return hT=t,hT}var fT,l5;function l7(){if(l5)return fT;l5=1;function t(e,n){return e.has(n)}return fT=t,fT}var pT,c5;function c7(){if(c5)return pT;c5=1;var t=s7(),e=o7(),n=l7(),a=1,i=2;function s(o,l,c,u,f,p){var g=c&a,x=o.length,b=l.length;if(x!=b&&!(g&&b>x))return!1;var j=p.get(o),w=p.get(l);if(j&&w)return j==l&&w==o;var _=-1,T=!0,C=c&i?new t:void 0;for(p.set(o,l),p.set(l,o);++_<x;){var A=o[_],k=l[_];if(u)var P=g?u(k,A,_,l,o,p):u(A,k,_,o,l,p);if(P!==void 0){if(P)continue;T=!1;break}if(C){if(!e(l,function(I,R){if(!n(C,R)&&(A===I||f(A,I,c,u,p)))return C.push(R)})){T=!1;break}}else if(!(A===k||f(A,k,c,u,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return pT=s,pT}var mT,u5;function Pve(){if(u5)return mT;u5=1;var t=ql(),e=t.Uint8Array;return mT=e,mT}var gT,d5;function Dve(){if(d5)return gT;d5=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i,s){a[++n]=[s,i]}),a}return gT=t,gT}var yT,h5;function WO(){if(h5)return yT;h5=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i){a[++n]=i}),a}return yT=t,yT}var xT,f5;function Ove(){if(f5)return xT;f5=1;var t=$b(),e=Pve(),n=IO(),a=c7(),i=Dve(),s=WO(),o=1,l=2,c="[object Boolean]",u="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",b="[object Set]",j="[object String]",w="[object Symbol]",_="[object ArrayBuffer]",T="[object DataView]",C=t?t.prototype:void 0,A=C?C.valueOf:void 0;function k(P,I,R,q,U,F,B){switch(R){case T:if(P.byteLength!=I.byteLength||P.byteOffset!=I.byteOffset)return!1;P=P.buffer,I=I.buffer;case _:return!(P.byteLength!=I.byteLength||!F(new e(P),new e(I)));case c:case u:case g:return n(+P,+I);case f:return P.name==I.name&&P.message==I.message;case x:case j:return P==I+"";case p:var V=i;case b:var W=q&o;if(V||(V=s),P.size!=I.size&&!W)return!1;var G=B.get(P);if(G)return G==I;q|=l,B.set(P,I);var z=a(V(P),V(I),q,U,F,B);return B.delete(P),z;case w:if(A)return A.call(P)==A.call(I)}return!1}return xT=k,xT}var vT,p5;function u7(){if(p5)return vT;p5=1;function t(e,n){for(var a=-1,i=n.length,s=e.length;++a<i;)e[s+a]=n[a];return e}return vT=t,vT}var bT,m5;function Mve(){if(m5)return bT;m5=1;var t=u7(),e=ps();function n(a,i,s){var o=i(a);return e(a)?o:t(o,s(a))}return bT=n,bT}var jT,g5;function Ive(){if(g5)return jT;g5=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=0,o=[];++a<i;){var l=e[a];n(l,a,e)&&(o[s++]=l)}return o}return jT=t,jT}var wT,y5;function Rve(){if(y5)return wT;y5=1;function t(){return[]}return wT=t,wT}var NT,x5;function Lve(){if(x5)return NT;x5=1;var t=Ive(),e=Rve(),n=Object.prototype,a=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return a.call(o,l)}))}:e;return NT=s,NT}var ST,v5;function Fve(){if(v5)return ST;v5=1;function t(e,n){for(var a=-1,i=Array(e);++a<e;)i[a]=n(a);return i}return ST=t,ST}var _T,b5;function $ve(){if(b5)return _T;b5=1;var t=Gc(),e=Wc(),n="[object Arguments]";function a(i){return e(i)&&t(i)==n}return _T=a,_T}var CT,j5;function YO(){if(j5)return CT;j5=1;var t=$ve(),e=Wc(),n=Object.prototype,a=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&a.call(o,"callee")&&!i.call(o,"callee")};return CT=s,CT}var yv={exports:{}},TT,w5;function zve(){if(w5)return TT;w5=1;function t(){return!1}return TT=t,TT}yv.exports;var N5;function d7(){return N5||(N5=1,function(t,e){var n=ql(),a=zve(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||a;t.exports=u}(yv,yv.exports)),yv.exports}var kT,S5;function KO(){if(S5)return kT;S5=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(a,i){var s=typeof a;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(a))&&a>-1&&a%1==0&&a<i}return kT=n,kT}var AT,_5;function QO(){if(_5)return AT;_5=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return AT=e,AT}var ET,C5;function Bve(){if(C5)return ET;C5=1;var t=Gc(),e=QO(),n=Wc(),a="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",b="[object String]",j="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",A="[object Int8Array]",k="[object Int16Array]",P="[object Int32Array]",I="[object Uint8Array]",R="[object Uint8ClampedArray]",q="[object Uint16Array]",U="[object Uint32Array]",F={};F[T]=F[C]=F[A]=F[k]=F[P]=F[I]=F[R]=F[q]=F[U]=!0,F[a]=F[i]=F[w]=F[s]=F[_]=F[o]=F[l]=F[c]=F[u]=F[f]=F[p]=F[g]=F[x]=F[b]=F[j]=!1;function B(V){return n(V)&&e(V.length)&&!!F[t(V)]}return ET=B,ET}var PT,T5;function h7(){if(T5)return PT;T5=1;function t(e){return function(n){return e(n)}}return PT=t,PT}var xv={exports:{}};xv.exports;var k5;function qve(){return k5||(k5=1,function(t,e){var n=kU(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,o=s&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(xv,xv.exports)),xv.exports}var DT,A5;function f7(){if(A5)return DT;A5=1;var t=Bve(),e=h7(),n=qve(),a=n&&n.isTypedArray,i=a?e(a):t;return DT=i,DT}var OT,E5;function Uve(){if(E5)return OT;E5=1;var t=Fve(),e=YO(),n=ps(),a=d7(),i=KO(),s=f7(),o=Object.prototype,l=o.hasOwnProperty;function c(u,f){var p=n(u),g=!p&&e(u),x=!p&&!g&&a(u),b=!p&&!g&&!x&&s(u),j=p||g||x||b,w=j?t(u.length,String):[],_=w.length;for(var T in u)(f||l.call(u,T))&&!(j&&(T=="length"||x&&(T=="offset"||T=="parent")||b&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,_)))&&w.push(T);return w}return OT=c,OT}var MT,P5;function Vve(){if(P5)return MT;P5=1;var t=Object.prototype;function e(n){var a=n&&n.constructor,i=typeof a=="function"&&a.prototype||t;return n===i}return MT=e,MT}var IT,D5;function p7(){if(D5)return IT;D5=1;function t(e,n){return function(a){return e(n(a))}}return IT=t,IT}var RT,O5;function Hve(){if(O5)return RT;O5=1;var t=p7(),e=t(Object.keys,Object);return RT=e,RT}var LT,M5;function Gve(){if(M5)return LT;M5=1;var t=Vve(),e=Hve(),n=Object.prototype,a=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))a.call(s,l)&&l!="constructor"&&o.push(l);return o}return LT=i,LT}var FT,I5;function Bb(){if(I5)return FT;I5=1;var t=MO(),e=QO();function n(a){return a!=null&&e(a.length)&&!t(a)}return FT=n,FT}var $T,R5;function yS(){if(R5)return $T;R5=1;var t=Uve(),e=Gve(),n=Bb();function a(i){return n(i)?t(i):e(i)}return $T=a,$T}var zT,L5;function Wve(){if(L5)return zT;L5=1;var t=Mve(),e=Lve(),n=yS();function a(i){return t(i,n,e)}return zT=a,zT}var BT,F5;function Yve(){if(F5)return BT;F5=1;var t=Wve(),e=1,n=Object.prototype,a=n.hasOwnProperty;function i(s,o,l,c,u,f){var p=l&e,g=t(s),x=g.length,b=t(o),j=b.length;if(x!=j&&!p)return!1;for(var w=x;w--;){var _=g[w];if(!(p?_ in o:a.call(o,_)))return!1}var T=f.get(s),C=f.get(o);if(T&&C)return T==o&&C==s;var A=!0;f.set(s,o),f.set(o,s);for(var k=p;++w<x;){_=g[w];var P=s[_],I=o[_];if(c)var R=p?c(I,P,_,o,s,f):c(P,I,_,s,o,f);if(!(R===void 0?P===I||u(P,I,l,c,f):R)){A=!1;break}k||(k=_=="constructor")}if(A&&!k){var q=s.constructor,U=o.constructor;q!=U&&"constructor"in s&&"constructor"in o&&!(typeof q=="function"&&q instanceof q&&typeof U=="function"&&U instanceof U)&&(A=!1)}return f.delete(s),f.delete(o),A}return BT=i,BT}var qT,$5;function Kve(){if($5)return qT;$5=1;var t=Rf(),e=ql(),n=t(e,"DataView");return qT=n,qT}var UT,z5;function Qve(){if(z5)return UT;z5=1;var t=Rf(),e=ql(),n=t(e,"Promise");return UT=n,UT}var VT,B5;function m7(){if(B5)return VT;B5=1;var t=Rf(),e=ql(),n=t(e,"Set");return VT=n,VT}var HT,q5;function Xve(){if(q5)return HT;q5=1;var t=Rf(),e=ql(),n=t(e,"WeakMap");return HT=n,HT}var GT,U5;function Jve(){if(U5)return GT;U5=1;var t=Kve(),e=RO(),n=Qve(),a=m7(),i=Xve(),s=Gc(),o=DU(),l="[object Map]",c="[object Object]",u="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",x=o(t),b=o(e),j=o(n),w=o(a),_=o(i),T=s;return(t&&T(new t(new ArrayBuffer(1)))!=g||e&&T(new e)!=l||n&&T(n.resolve())!=u||a&&T(new a)!=f||i&&T(new i)!=p)&&(T=function(C){var A=s(C),k=A==c?C.constructor:void 0,P=k?o(k):"";if(P)switch(P){case x:return g;case b:return l;case j:return u;case w:return f;case _:return p}return A}),GT=T,GT}var WT,V5;function Zve(){if(V5)return WT;V5=1;var t=i7(),e=c7(),n=Ove(),a=Yve(),i=Jve(),s=ps(),o=d7(),l=f7(),c=1,u="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function b(j,w,_,T,C,A){var k=s(j),P=s(w),I=k?f:i(j),R=P?f:i(w);I=I==u?p:I,R=R==u?p:R;var q=I==p,U=R==p,F=I==R;if(F&&o(j)){if(!o(w))return!1;k=!0,q=!1}if(F&&!q)return A||(A=new t),k||l(j)?e(j,w,_,T,C,A):n(j,w,I,_,T,C,A);if(!(_&c)){var B=q&&x.call(j,"__wrapped__"),V=U&&x.call(w,"__wrapped__");if(B||V){var W=B?j.value():j,G=V?w.value():w;return A||(A=new t),C(W,G,_,T,A)}}return F?(A||(A=new t),a(j,w,_,T,C,A)):!1}return WT=b,WT}var YT,H5;function XO(){if(H5)return YT;H5=1;var t=Zve(),e=Wc();function n(a,i,s,o,l){return a===i?!0:a==null||i==null||!e(a)&&!e(i)?a!==a&&i!==i:t(a,i,s,o,n,l)}return YT=n,YT}var KT,G5;function ebe(){if(G5)return KT;G5=1;var t=i7(),e=XO(),n=1,a=2;function i(s,o,l,c){var u=l.length,f=u,p=!c;if(s==null)return!f;for(s=Object(s);u--;){var g=l[u];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++u<f;){g=l[u];var x=g[0],b=s[x],j=g[1];if(p&&g[2]){if(b===void 0&&!(x in s))return!1}else{var w=new t;if(c)var _=c(b,j,x,s,o,w);if(!(_===void 0?e(j,b,n|a,c,w):_))return!1}}return!0}return KT=i,KT}var QT,W5;function g7(){if(W5)return QT;W5=1;var t=Nd();function e(n){return n===n&&!t(n)}return QT=e,QT}var XT,Y5;function tbe(){if(Y5)return XT;Y5=1;var t=g7(),e=yS();function n(a){for(var i=e(a),s=i.length;s--;){var o=i[s],l=a[o];i[s]=[o,l,t(l)]}return i}return XT=n,XT}var JT,K5;function y7(){if(K5)return JT;K5=1;function t(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==void 0||e in Object(a))}}return JT=t,JT}var ZT,Q5;function nbe(){if(Q5)return ZT;Q5=1;var t=ebe(),e=tbe(),n=y7();function a(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return ZT=a,ZT}var ek,X5;function rbe(){if(X5)return ek;X5=1;function t(e,n){return e!=null&&n in Object(e)}return ek=t,ek}var tk,J5;function abe(){if(J5)return tk;J5=1;var t=IU(),e=YO(),n=ps(),a=KO(),i=QO(),s=hS();function o(l,c,u){c=t(c,l);for(var f=-1,p=c.length,g=!1;++f<p;){var x=s(c[f]);if(!(g=l!=null&&u(l,x)))break;l=l[x]}return g||++f!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&a(x,p)&&(n(l)||e(l)))}return tk=o,tk}var nk,Z5;function ibe(){if(Z5)return nk;Z5=1;var t=rbe(),e=abe();function n(a,i){return a!=null&&e(a,i,t)}return nk=n,nk}var rk,e6;function sbe(){if(e6)return rk;e6=1;var t=XO(),e=RU(),n=ibe(),a=OO(),i=g7(),s=y7(),o=hS(),l=1,c=2;function u(f,p){return a(f)&&i(p)?s(o(f),p):function(g){var x=e(g,f);return x===void 0&&x===p?n(g,f):t(p,x,l|c)}}return rk=u,rk}var ak,t6;function Yg(){if(t6)return ak;t6=1;function t(e){return e}return ak=t,ak}var ik,n6;function obe(){if(n6)return ik;n6=1;function t(e){return function(n){return n==null?void 0:n[e]}}return ik=t,ik}var sk,r6;function lbe(){if(r6)return sk;r6=1;var t=$O();function e(n){return function(a){return t(a,n)}}return sk=e,sk}var ok,a6;function cbe(){if(a6)return ok;a6=1;var t=obe(),e=lbe(),n=OO(),a=hS();function i(s){return n(s)?t(a(s)):e(s)}return ok=i,ok}var lk,i6;function Ul(){if(i6)return lk;i6=1;var t=nbe(),e=sbe(),n=Yg(),a=ps(),i=cbe();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?a(o)?e(o[0],o[1]):t(o):i(o)}return lk=s,lk}var ck,s6;function x7(){if(s6)return ck;s6=1;function t(e,n,a,i){for(var s=e.length,o=a+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return ck=t,ck}var uk,o6;function ube(){if(o6)return uk;o6=1;function t(e){return e!==e}return uk=t,uk}var dk,l6;function dbe(){if(l6)return dk;l6=1;function t(e,n,a){for(var i=a-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return dk=t,dk}var hk,c6;function hbe(){if(c6)return hk;c6=1;var t=x7(),e=ube(),n=dbe();function a(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return hk=a,hk}var fk,u6;function fbe(){if(u6)return fk;u6=1;var t=hbe();function e(n,a){var i=n==null?0:n.length;return!!i&&t(n,a,0)>-1}return fk=e,fk}var pk,d6;function pbe(){if(d6)return pk;d6=1;function t(e,n,a){for(var i=-1,s=e==null?0:e.length;++i<s;)if(a(n,e[i]))return!0;return!1}return pk=t,pk}var mk,h6;function mbe(){if(h6)return mk;h6=1;function t(){}return mk=t,mk}var gk,f6;function gbe(){if(f6)return gk;f6=1;var t=m7(),e=mbe(),n=WO(),a=1/0,i=t&&1/n(new t([,-0]))[1]==a?function(s){return new t(s)}:e;return gk=i,gk}var yk,p6;function ybe(){if(p6)return yk;p6=1;var t=s7(),e=fbe(),n=pbe(),a=l7(),i=gbe(),s=WO(),o=200;function l(c,u,f){var p=-1,g=e,x=c.length,b=!0,j=[],w=j;if(f)b=!1,g=n;else if(x>=o){var _=u?null:i(c);if(_)return s(_);b=!1,g=a,w=new t}else w=u?[]:j;e:for(;++p<x;){var T=c[p],C=u?u(T):T;if(T=f||T!==0?T:0,b&&C===C){for(var A=w.length;A--;)if(w[A]===C)continue e;u&&w.push(C),j.push(T)}else g(w,C,f)||(w!==j&&w.push(C),j.push(T))}return j}return yk=l,yk}var xk,m6;function xbe(){if(m6)return xk;m6=1;var t=Ul(),e=ybe();function n(a,i){return a&&a.length?e(a,t(i,2)):[]}return xk=n,xk}var vbe=xbe();const g6=Hn(vbe);function v7(t,e,n){return e===!0?g6(t,n):an(e)?g6(t,e):t}function hg(t){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(t)}var bbe=["ref"];function y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function yc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(n),!0).forEach(function(a){xS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function jbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x6(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,j7(a.key),a)}}function wbe(t,e,n){return e&&x6(t.prototype,e),n&&x6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nbe(t,e,n){return e=qw(e),Sbe(t,b7()?Reflect.construct(e,n||[],qw(t).constructor):e.apply(t,n))}function Sbe(t,e){if(e&&(hg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _be(t)}function _be(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b7=function(){return!!t})()}function qw(t){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qw(t)}function Cbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yP(t,e)}function yP(t,e){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},yP(t,e)}function xS(t,e,n){return e=j7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j7(t){var e=Tbe(t,"string");return hg(e)=="symbol"?e:e+""}function Tbe(t,e){if(hg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(hg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function kbe(t,e){if(t==null)return{};var n=Abe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Abe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Ebe(t){return t.value}function Pbe(t,e){if(Ce.isValidElement(t))return Ce.cloneElement(t,e);if(typeof t=="function")return Ce.createElement(t,e);e.ref;var n=kbe(e,bbe);return Ce.createElement(GO,n)}var v6=1,Dc=function(t){function e(){var n;jbe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=Nbe(this,e,[].concat(i)),xS(n,"lastBoundingBox",{width:-1,height:-1}),n}return Cbe(e,t),wbe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>v6||Math.abs(i.height-this.lastBoundingBox.height)>v6)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,a&&a(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,f=i.chartHeight,p,g;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&s==="vertical"){var x=this.getBBoxSnapshot();p={left:((u||0)-x.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();g={top:((f||0)-b.height)/2}}else g=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return yc(yc({},p),g)}},{key:"render",value:function(){var a=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,f=i.payload,p=yc(yc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Ce.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){a.wrapperNode=x}},Pbe(s,yc(yc({},this.props),{},{payload:v7(f,u,Ebe)})))}}],[{key:"getWithHeight",value:function(a,i){var s=yc(yc({},this.defaultProps),a.props),o=s.layout;return o==="vertical"&&Nt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||i}:null}}])}(v.PureComponent);xS(Dc,"displayName","Legend");xS(Dc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var vk,b6;function Dbe(){if(b6)return vk;b6=1;var t=$b(),e=YO(),n=ps(),a=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(a&&s&&s[a])}return vk=i,vk}var bk,j6;function w7(){if(j6)return bk;j6=1;var t=u7(),e=Dbe();function n(a,i,s,o,l){var c=-1,u=a.length;for(s||(s=e),l||(l=[]);++c<u;){var f=a[c];i>0&&s(f)?i>1?n(f,i-1,s,o,l):t(l,f):o||(l[l.length]=f)}return l}return bk=n,bk}var jk,w6;function Obe(){if(w6)return jk;w6=1;function t(e){return function(n,a,i){for(var s=-1,o=Object(n),l=i(n),c=l.length;c--;){var u=l[e?c:++s];if(a(o[u],u,o)===!1)break}return n}}return jk=t,jk}var wk,N6;function Mbe(){if(N6)return wk;N6=1;var t=Obe(),e=t();return wk=e,wk}var Nk,S6;function N7(){if(S6)return Nk;S6=1;var t=Mbe(),e=yS();function n(a,i){return a&&t(a,i,e)}return Nk=n,Nk}var Sk,_6;function Ibe(){if(_6)return Sk;_6=1;var t=Bb();function e(n,a){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=a?o:-1,c=Object(i);(a?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return Sk=e,Sk}var _k,C6;function JO(){if(C6)return _k;C6=1;var t=N7(),e=Ibe(),n=e(t);return _k=n,_k}var Ck,T6;function S7(){if(T6)return Ck;T6=1;var t=JO(),e=Bb();function n(a,i){var s=-1,o=e(a)?Array(a.length):[];return t(a,function(l,c,u){o[++s]=i(l,c,u)}),o}return Ck=n,Ck}var Tk,k6;function Rbe(){if(k6)return Tk;k6=1;function t(e,n){var a=e.length;for(e.sort(n);a--;)e[a]=e[a].value;return e}return Tk=t,Tk}var kk,A6;function Lbe(){if(A6)return kk;A6=1;var t=Hg();function e(n,a){if(n!==a){var i=n!==void 0,s=n===null,o=n===n,l=t(n),c=a!==void 0,u=a===null,f=a===a,p=t(a);if(!u&&!p&&!l&&n>a||l&&c&&f&&!u&&!p||s&&c&&f||!i&&f||!o)return 1;if(!s&&!l&&!p&&n<a||p&&i&&o&&!s&&!l||u&&i&&o||!c&&o||!f)return-1}return 0}return kk=e,kk}var Ak,E6;function Fbe(){if(E6)return Ak;E6=1;var t=Lbe();function e(n,a,i){for(var s=-1,o=n.criteria,l=a.criteria,c=o.length,u=i.length;++s<c;){var f=t(o[s],l[s]);if(f){if(s>=u)return f;var p=i[s];return f*(p=="desc"?-1:1)}}return n.index-a.index}return Ak=e,Ak}var Ek,P6;function $be(){if(P6)return Ek;P6=1;var t=FO(),e=$O(),n=Ul(),a=S7(),i=Rbe(),s=h7(),o=Fbe(),l=Yg(),c=ps();function u(f,p,g){p.length?p=t(p,function(j){return c(j)?function(w){return e(w,j.length===1?j[0]:j)}:j}):p=[l];var x=-1;p=t(p,s(n));var b=a(f,function(j,w,_){var T=t(p,function(C){return C(j)});return{criteria:T,index:++x,value:j}});return i(b,function(j,w){return o(j,w,g)})}return Ek=u,Ek}var Pk,D6;function zbe(){if(D6)return Pk;D6=1;function t(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}return Pk=t,Pk}var Dk,O6;function Bbe(){if(O6)return Dk;O6=1;var t=zbe(),e=Math.max;function n(a,i,s){return i=e(i===void 0?a.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),u=Array(c);++l<c;)u[l]=o[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=o[l];return f[i]=s(u),t(a,this,f)}}return Dk=n,Dk}var Ok,M6;function qbe(){if(M6)return Ok;M6=1;function t(e){return function(){return e}}return Ok=t,Ok}var Mk,I6;function _7(){if(I6)return Mk;I6=1;var t=Rf(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Mk=e,Mk}var Ik,R6;function Ube(){if(R6)return Ik;R6=1;var t=qbe(),e=_7(),n=Yg(),a=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return Ik=a,Ik}var Rk,L6;function Vbe(){if(L6)return Rk;L6=1;var t=800,e=16,n=Date.now;function a(i){var s=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Rk=a,Rk}var Lk,F6;function Hbe(){if(F6)return Lk;F6=1;var t=Ube(),e=Vbe(),n=e(t);return Lk=n,Lk}var Fk,$6;function Gbe(){if($6)return Fk;$6=1;var t=Yg(),e=Bbe(),n=Hbe();function a(i,s){return n(e(i,s,t),i+"")}return Fk=a,Fk}var $k,z6;function vS(){if(z6)return $k;z6=1;var t=IO(),e=Bb(),n=KO(),a=Nd();function i(s,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return $k=i,$k}var zk,B6;function Wbe(){if(B6)return zk;B6=1;var t=w7(),e=$be(),n=Gbe(),a=vS(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&a(s,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return zk=i,zk}var Ybe=Wbe();const ZO=Hn(Ybe);function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function xP(){return xP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},xP.apply(this,arguments)}function Kbe(t,e){return Zbe(t)||Jbe(t,e)||Xbe(t,e)||Qbe()}function Qbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xbe(t,e){if(t){if(typeof t=="string")return q6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q6(t,e)}}function q6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Jbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Zbe(t){if(Array.isArray(t))return t}function U6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Bk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U6(Object(n),!0).forEach(function(a){e0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function e0e(t,e,n){return e=t0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t0e(t){var e=n0e(t,"string");return Bv(e)=="symbol"?e:e+""}function n0e(t,e){if(Bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Bv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r0e(t){return Array.isArray(t)&&Aa(t[0])&&Aa(t[1])?t.join(" ~ "):t}var a0e=function(e){var n=e.separator,a=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,f=e.payload,p=e.formatter,g=e.itemSorter,x=e.wrapperClassName,b=e.labelClassName,j=e.label,w=e.labelFormatter,_=e.accessibilityLayer,T=_===void 0?!1:_,C=function(){if(f&&f.length){var B={padding:0,margin:0},V=(g?ZO(f,g):f).map(function(W,G){if(W.type==="none")return null;var z=Bk({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},l),Y=W.formatter||p||r0e,Q=W.value,K=W.name,$=Q,ie=K;if(Y&&$!=null&&ie!=null){var xe=Y(Q,K,W,G,f);if(Array.isArray(xe)){var X=Kbe(xe,2);$=X[0],ie=X[1]}else $=xe}return Ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:z},Aa(ie)?Ce.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,Aa(ie)?Ce.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Ce.createElement("span",{className:"recharts-tooltip-item-value"},$),Ce.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return Ce.createElement("ul",{className:"recharts-tooltip-item-list",style:B},V)}return null},A=Bk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Bk({margin:0},u),P=!dn(j),I=P?j:"",R=fn("recharts-default-tooltip",x),q=fn("recharts-tooltip-label",b);P&&w&&f!==void 0&&f!==null&&(I=w(j,f));var U=T?{role:"status","aria-live":"assertive"}:{};return Ce.createElement("div",xP({className:R,style:A},U),Ce.createElement("p",{className:q,style:k},Ce.isValidElement(I)?I:"".concat(I)),C())};function qv(t){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(t)}function Dj(t,e,n){return e=i0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i0e(t){var e=s0e(t,"string");return qv(e)=="symbol"?e:e+""}function s0e(t,e){if(qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ev="recharts-tooltip-wrapper",o0e={visibility:"hidden"};function l0e(t){var e=t.coordinate,n=t.translateX,a=t.translateY;return fn(ev,Dj(Dj(Dj(Dj({},"".concat(ev,"-right"),Nt(n)&&e&&Nt(e.x)&&n>=e.x),"".concat(ev,"-left"),Nt(n)&&e&&Nt(e.x)&&n<e.x),"".concat(ev,"-bottom"),Nt(a)&&e&&Nt(e.y)&&a>=e.y),"".concat(ev,"-top"),Nt(a)&&e&&Nt(e.y)&&a<e.y))}function V6(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&Nt(s[a]))return s[a];var f=n[a]-l-i,p=n[a]+i;if(e[a])return o[a]?f:p;if(o[a]){var g=f,x=c[a];return g<x?Math.max(p,c[a]):Math.max(f,c[a])}var b=p+l,j=c[a]+u;return b>j?Math.max(f,c[a]):Math.max(p,c[a])}function c0e(t){var e=t.translateX,n=t.translateY,a=t.useTranslate3d;return{transform:a?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function u0e(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,f,p;return o.height>0&&o.width>0&&n?(f=V6({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=V6({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=c0e({translateX:f,translateY:p,useTranslate3d:l})):u=o0e,{cssProperties:u,cssClasses:l0e({translateX:f,translateY:p,coordinate:n})}}function fg(t){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}function H6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function G6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H6(Object(n),!0).forEach(function(a){bP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function d0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h0e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,T7(a.key),a)}}function f0e(t,e,n){return e&&h0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function p0e(t,e,n){return e=Uw(e),m0e(t,C7()?Reflect.construct(e,n||[],Uw(t).constructor):e.apply(t,n))}function m0e(t,e){if(e&&(fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g0e(t)}function g0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C7=function(){return!!t})()}function Uw(t){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uw(t)}function y0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vP(t,e)}function vP(t,e){return vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},vP(t,e)}function bP(t,e,n){return e=T7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T7(t){var e=x0e(t,"string");return fg(e)=="symbol"?e:e+""}function x0e(t,e){if(fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(fg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var W6=1,v0e=function(t){function e(){var n;d0e(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=p0e(this,e,[].concat(i)),bP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),bP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return y0e(e,t),f0e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>W6||Math.abs(a.height-this.state.lastBoundingBox.height)>W6)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,f=i.coordinate,p=i.hasPayload,g=i.isAnimationActive,x=i.offset,b=i.position,j=i.reverseDirection,w=i.useTranslate3d,_=i.viewBox,T=i.wrapperStyle,C=u0e({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:b,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:_}),A=C.cssClasses,k=C.cssProperties,P=G6(G6({transition:g&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},T);return Ce.createElement("div",{tabIndex:-1,className:A,style:P,ref:function(R){a.wrapperNode=R}},u)}}])}(v.PureComponent),b0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Sd={isSsr:b0e()};function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}function Y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function K6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(n),!0).forEach(function(a){eM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function j0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w0e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,A7(a.key),a)}}function N0e(t,e,n){return e&&w0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S0e(t,e,n){return e=Vw(e),_0e(t,k7()?Reflect.construct(e,n||[],Vw(t).constructor):e.apply(t,n))}function _0e(t,e){if(e&&(pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C0e(t)}function C0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k7=function(){return!!t})()}function Vw(t){return Vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vw(t)}function T0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jP(t,e)}function jP(t,e){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},jP(t,e)}function eM(t,e,n){return e=A7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A7(t){var e=k0e(t,"string");return pg(e)=="symbol"?e:e+""}function k0e(t,e){if(pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function A0e(t){return t.dataKey}function E0e(t,e){return Ce.isValidElement(t)?Ce.cloneElement(t,e):typeof t=="function"?Ce.createElement(t,e):Ce.createElement(a0e,e)}var Ii=function(t){function e(){return j0e(this,e),S0e(this,e,arguments)}return T0e(e,t),N0e(e,[{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,f=i.coordinate,p=i.filterNull,g=i.isAnimationActive,x=i.offset,b=i.payload,j=i.payloadUniqBy,w=i.position,_=i.reverseDirection,T=i.useTranslate3d,C=i.viewBox,A=i.wrapperStyle,k=b??[];p&&k.length&&(k=v7(b.filter(function(I){return I.value!=null&&(I.hide!==!0||a.props.includeHidden)}),j,A0e));var P=k.length>0;return Ce.createElement(v0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:g,active:s,coordinate:f,hasPayload:P,offset:x,position:w,reverseDirection:_,useTranslate3d:T,viewBox:C,wrapperStyle:A},E0e(u,K6(K6({},this.props),{},{payload:k})))}}])}(v.PureComponent);eM(Ii,"displayName","Tooltip");eM(Ii,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Sd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var qk,Q6;function P0e(){if(Q6)return qk;Q6=1;var t=EU(),e=Nd(),n="Expected a function";function a(i,s,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,s,{leading:l,maxWait:s,trailing:c})}return qk=a,qk}var D0e=P0e();const E7=Hn(D0e);function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}function X6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Oj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X6(Object(n),!0).forEach(function(a){O0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function O0e(t,e,n){return e=M0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M0e(t){var e=I0e(t,"string");return Uv(e)=="symbol"?e:e+""}function I0e(t,e){if(Uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Uv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R0e(t,e){return z0e(t)||$0e(t,e)||F0e(t,e)||L0e()}function L0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F0e(t,e){if(t){if(typeof t=="string")return J6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J6(t,e)}}function J6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function $0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function z0e(t){if(Array.isArray(t))return t}var lw=v.forwardRef(function(t,e){var n=t.aspect,a=t.initialDimension,i=a===void 0?{width:-1,height:-1}:a,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,f=u===void 0?0:u,p=t.minHeight,g=t.maxHeight,x=t.children,b=t.debounce,j=b===void 0?0:b,w=t.id,_=t.className,T=t.onResize,C=t.style,A=C===void 0?{}:C,k=v.useRef(null),P=v.useRef();P.current=T,v.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var I=v.useState({containerWidth:i.width,containerHeight:i.height}),R=R0e(I,2),q=R[0],U=R[1],F=v.useCallback(function(V,W){U(function(G){var z=Math.round(V),Y=Math.round(W);return G.containerWidth===z&&G.containerHeight===Y?G:{containerWidth:z,containerHeight:Y}})},[]);v.useEffect(function(){var V=function(K){var $,ie=K[0].contentRect,xe=ie.width,X=ie.height;F(xe,X),($=P.current)===null||$===void 0||$.call(P,xe,X)};j>0&&(V=E7(V,j,{trailing:!0,leading:!1}));var W=new ResizeObserver(V),G=k.current.getBoundingClientRect(),z=G.width,Y=G.height;return F(z,Y),W.observe(k.current),function(){W.disconnect()}},[F,j]);var B=v.useMemo(function(){var V=q.containerWidth,W=q.containerHeight;if(V<0||W<0)return null;Bo(ef(o)||ef(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Bo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var G=ef(o)?V:o,z=ef(c)?W:c;n&&n>0&&(G?z=G/n:z&&(G=z*n),g&&z>g&&(z=g)),Bo(G>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,z,o,c,f,p,n);var Y=!Array.isArray(x)&&Pc(x.type).endsWith("Chart");return Ce.Children.map(x,function(Q){return Ce.isValidElement(Q)?v.cloneElement(Q,Oj({width:G,height:z},Y?{style:Oj({height:"100%",width:"100%",maxHeight:z,maxWidth:G},Q.props.style)}:{})):Q})},[n,x,c,g,p,f,q,o]);return Ce.createElement("div",{id:w?"".concat(w):void 0,className:fn("recharts-responsive-container",_),style:Oj(Oj({},A),{},{width:o,height:c,minWidth:f,minHeight:p,maxHeight:g}),ref:k},B)}),qb=function(e){return null};qb.displayName="Cell";function Vv(t){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(t)}function Z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function wP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z6(Object(n),!0).forEach(function(a){B0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function B0e(t,e,n){return e=q0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q0e(t){var e=U0e(t,"string");return Vv(e)=="symbol"?e:e+""}function U0e(t,e){if(Vv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Vv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jm={widthCache:{},cacheCount:0},V0e=2e3,H0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},eF="recharts_measurement_span";function G0e(t){var e=wP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Sv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Sd.isSsr)return{width:0,height:0};var a=G0e(n),i=JSON.stringify({text:e,copyStyle:a});if(jm.widthCache[i])return jm.widthCache[i];try{var s=document.getElementById(eF);s||(s=document.createElement("span"),s.setAttribute("id",eF),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=wP(wP({},H0e),a);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return jm.widthCache[i]=c,++jm.cacheCount>V0e&&(jm.cacheCount=0,jm.widthCache={}),c}catch{return{width:0,height:0}}},W0e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Hv(t){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(t)}function Hw(t,e){return X0e(t)||Q0e(t,e)||K0e(t,e)||Y0e()}function Y0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K0e(t,e){if(t){if(typeof t=="string")return tF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tF(t,e)}}function tF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Q0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function X0e(t){if(Array.isArray(t))return t}function J0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nF(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,e1e(a.key),a)}}function Z0e(t,e,n){return e&&nF(t.prototype,e),n&&nF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function e1e(t){var e=t1e(t,"string");return Hv(e)=="symbol"?e:e+""}function t1e(t,e){if(Hv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Hv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,n1e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,r1e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,P7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},a1e=Object.keys(P7),Dm="NaN";function i1e(t,e){return t*P7[e]}var Mj=function(){function t(e,n){J0e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!n1e.test(n)&&(this.num=NaN,this.unit=""),a1e.includes(n)&&(this.num=i1e(e,n),this.unit="px")}return Z0e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,i=(a=r1e.exec(n))!==null&&a!==void 0?a:[],s=Hw(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function D7(t){if(t.includes(Dm))return Dm;for(var e=t;e.includes("*")||e.includes("/");){var n,a=(n=rF.exec(e))!==null&&n!==void 0?n:[],i=Hw(a,4),s=i[1],o=i[2],l=i[3],c=Mj.parse(s??""),u=Mj.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Dm;e=e.replace(rF,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,g=(p=aF.exec(e))!==null&&p!==void 0?p:[],x=Hw(g,4),b=x[1],j=x[2],w=x[3],_=Mj.parse(b??""),T=Mj.parse(w??""),C=j==="+"?_.add(T):_.subtract(T);if(C.isNaN())return Dm;e=e.replace(aF,C.toString())}return e}var iF=/\(([^()]*)\)/;function s1e(t){for(var e=t;e.includes("(");){var n=iF.exec(e),a=Hw(n,2),i=a[1];e=e.replace(iF,D7(i))}return e}function o1e(t){var e=t.replace(/\s+/g,"");return e=s1e(e),e=D7(e),e}function l1e(t){try{return o1e(t)}catch{return Dm}}function Uk(t){var e=l1e(t.slice(5,-1));return e===Dm?"":e}var c1e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],u1e=["dx","dy","angle","className","breakAll"];function NP(){return NP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},NP.apply(this,arguments)}function sF(t,e){if(t==null)return{};var n=d1e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function d1e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function oF(t,e){return m1e(t)||p1e(t,e)||f1e(t,e)||h1e()}function h1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f1e(t,e){if(t){if(typeof t=="string")return lF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lF(t,e)}}function lF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function p1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function m1e(t){if(Array.isArray(t))return t}var O7=/[ \f\n\r\t\v\u2028\u2029]+/,M7=function(e){var n=e.children,a=e.breakAll,i=e.style;try{var s=[];dn(n)||(a?s=n.toString().split(""):s=n.toString().split(O7));var o=s.map(function(c){return{word:c,width:Sv(c,i).width}}),l=a?0:Sv("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},g1e=function(e,n,a,i,s){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,f=Nt(o),p=l,g=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(z,Y){var Q=Y.word,K=Y.width,$=z[z.length-1];if($&&(i==null||s||$.width+K+a<Number(i)))$.words.push(Q),$.width+=K+a;else{var ie={words:[Q],width:K};z.push(ie)}return z},[])},x=g(n),b=function(G){return G.reduce(function(z,Y){return z.width>Y.width?z:Y})};if(!f)return x;for(var j="",w=function(G){var z=p.slice(0,G),Y=M7({breakAll:u,style:c,children:z+j}).wordsWithComputedWidth,Q=g(Y),K=Q.length>o||b(Q).width>Number(i);return[K,Q]},_=0,T=p.length-1,C=0,A;_<=T&&C<=p.length-1;){var k=Math.floor((_+T)/2),P=k-1,I=w(P),R=oF(I,2),q=R[0],U=R[1],F=w(k),B=oF(F,1),V=B[0];if(!q&&!V&&(_=k+1),q&&V&&(T=k-1),!q&&V){A=U;break}C++}return A||x},cF=function(e){var n=dn(e)?[]:e.toString().split(O7);return[{words:n}]},y1e=function(e){var n=e.width,a=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((n||a)&&!Sd.isSsr){var c,u,f=M7({breakAll:o,children:i,style:s});if(f){var p=f.wordsWithComputedWidth,g=f.spaceWidth;c=p,u=g}else return cF(i);return g1e({breakAll:o,children:i,maxLines:l,style:s},c,u,n,a)}return cF(i)},uF="#808080",Af=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,f=e.scaleToFit,p=f===void 0?!1:f,g=e.textAnchor,x=g===void 0?"start":g,b=e.verticalAnchor,j=b===void 0?"end":b,w=e.fill,_=w===void 0?uF:w,T=sF(e,c1e),C=v.useMemo(function(){return y1e({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),A=T.dx,k=T.dy,P=T.angle,I=T.className,R=T.breakAll,q=sF(T,u1e);if(!Aa(a)||!Aa(s))return null;var U=a+(Nt(A)?A:0),F=s+(Nt(k)?k:0),B;switch(j){case"start":B=Uk("calc(".concat(u,")"));break;case"middle":B=Uk("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:B=Uk("calc(".concat(C.length-1," * -").concat(l,")"));break}var V=[];if(p){var W=C[0].width,G=T.width;V.push("scale(".concat((Nt(G)?G/W:1)/W,")"))}return P&&V.push("rotate(".concat(P,", ").concat(U,", ").concat(F,")")),V.length&&(q.transform=V.join(" ")),Ce.createElement("text",NP({},Bt(q,!0),{x:U,y:F,className:fn("recharts-text",I),textAnchor:x,fill:_.includes("url")?uF:_}),C.map(function(z,Y){var Q=z.words.join(R?"":" ");return Ce.createElement("tspan",{x:U,dy:Y===0?B:l,key:"".concat(Q,"-").concat(Y)},Q)}))};function cd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x1e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tM(t){let e,n,a;t.length!==2?(e=cd,n=(l,c)=>cd(t(l),c),a=(l,c)=>t(l)-c):(e=t===cd||t===x1e?t:v1e,n=t,a=t);function i(l,c,u=0,f=l.length){if(u<f){if(e(c,c)!==0)return f;do{const p=u+f>>>1;n(l[p],c)<0?u=p+1:f=p}while(u<f)}return u}function s(l,c,u=0,f=l.length){if(u<f){if(e(c,c)!==0)return f;do{const p=u+f>>>1;n(l[p],c)<=0?u=p+1:f=p}while(u<f)}return u}function o(l,c,u=0,f=l.length){const p=i(l,c,u,f-1);return p>u&&a(l[p-1],c)>-a(l[p],c)?p-1:p}return{left:i,center:o,right:s}}function v1e(){return 0}function I7(t){return t===null?NaN:+t}function*b1e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const j1e=tM(cd),Ub=j1e.right;tM(I7).center;class dF extends Map{constructor(e,n=S1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[a,i]of e)this.set(a,i)}get(e){return super.get(hF(this,e))}has(e){return super.has(hF(this,e))}set(e,n){return super.set(w1e(this,e),n)}delete(e){return super.delete(N1e(this,e))}}function hF({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):n}function w1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):(t.set(a,n),n)}function N1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)&&(n=t.get(a),t.delete(a)),n}function S1e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function _1e(t=cd){if(t===cd)return R7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const a=t(e,n);return a||a===0?a:(t(n,n)===0)-(t(e,e)===0)}}function R7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const C1e=Math.sqrt(50),T1e=Math.sqrt(10),k1e=Math.sqrt(2);function Gw(t,e,n){const a=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(a)),s=a/Math.pow(10,i),o=s>=C1e?10:s>=T1e?5:s>=k1e?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?Gw(t,e,n*2):[l,c,u]}function SP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const a=e<t,[i,s,o]=a?Gw(e,t,n):Gw(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function _P(t,e,n){return e=+e,t=+t,n=+n,Gw(t,e,n)[2]}function CP(t,e,n){e=+e,t=+t,n=+n;const a=e<t,i=a?_P(e,t,n):_P(t,e,n);return(a?-1:1)*(i<0?1/-i:i)}function fF(t,e){let n;for(const a of t)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function pF(t,e){let n;for(const a of t)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function L7(t,e,n=0,a=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(t.length-1,a)),!(n<=e&&e<=a))return t;for(i=i===void 0?R7:_1e(i);a>n;){if(a-n>600){const c=a-n+1,u=e-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(c-p)/c)*(u-c/2<0?-1:1),x=Math.max(n,Math.floor(e-u*p/c+g)),b=Math.min(a,Math.floor(e+(c-u)*p/c+g));L7(t,e,x,b,i)}const s=t[e];let o=n,l=a;for(tv(t,n,e),i(t[a],s)>0&&tv(t,n,a);o<l;){for(tv(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?tv(t,n,l):(++l,tv(t,l,a)),l<=e&&(n=l+1),e<=l&&(a=l-1)}return t}function tv(t,e,n){const a=t[e];t[e]=t[n],t[n]=a}function A1e(t,e,n){if(t=Float64Array.from(b1e(t)),!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return pF(t);if(e>=1)return fF(t);var a,i=(a-1)*e,s=Math.floor(i),o=fF(L7(t,s).subarray(0,s+1)),l=pF(t.subarray(s+1));return o+(l-o)*(i-s)}}function E1e(t,e,n=I7){if(!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return+n(t[0],0,t);if(e>=1)return+n(t[a-1],a-1,t);var a,i=(a-1)*e,s=Math.floor(i),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function P1e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var a=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++a<i;)s[a]=t+a*n;return s}function ho(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Yc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const TP=Symbol("implicit");function nM(){var t=new dF,e=[],n=[],a=TP;function i(s){let o=t.get(s);if(o===void 0){if(a!==TP)return a;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new dF;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return nM(e,n).unknown(a)},ho.apply(i,arguments),i}function Gv(){var t=nM().unknown(void 0),e=t.domain,n=t.range,a=0,i=1,s,o,l=!1,c=0,u=0,f=.5;delete t.unknown;function p(){var g=e().length,x=i<a,b=x?i:a,j=x?a:i;s=(j-b)/Math.max(1,g-c+u*2),l&&(s=Math.floor(s)),b+=(j-b-s*(g-c))*f,o=s*(1-c),l&&(b=Math.round(b),o=Math.round(o));var w=P1e(g).map(function(_){return b+s*_});return n(x?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([a,i]=g,a=+a,i=+i,p()):[a,i]},t.rangeRound=function(g){return[a,i]=g,a=+a,i=+i,l=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(g){return arguments.length?(l=!!g,p()):l},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,p()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return Gv(e(),[a,i]).round(l).paddingInner(c).paddingOuter(u).align(f)},ho.apply(p(),arguments)}function F7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return F7(e())},t}function _v(){return F7(Gv.apply(null,arguments).paddingInner(1))}function rM(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $7(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function Vb(){}var Wv=.7,Ww=1/Wv,qm="\\s*([+-]?\\d+)\\s*",Yv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D1e=/^#([0-9a-f]{3,8})$/,O1e=new RegExp(`^rgb\\(${qm},${qm},${qm}\\)$`),M1e=new RegExp(`^rgb\\(${Rl},${Rl},${Rl}\\)$`),I1e=new RegExp(`^rgba\\(${qm},${qm},${qm},${Yv}\\)$`),R1e=new RegExp(`^rgba\\(${Rl},${Rl},${Rl},${Yv}\\)$`),L1e=new RegExp(`^hsl\\(${Yv},${Rl},${Rl}\\)$`),F1e=new RegExp(`^hsla\\(${Yv},${Rl},${Rl},${Yv}\\)$`),mF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rM(Vb,Kv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gF,formatHex:gF,formatHex8:$1e,formatHsl:z1e,formatRgb:yF,toString:yF});function gF(){return this.rgb().formatHex()}function $1e(){return this.rgb().formatHex8()}function z1e(){return z7(this).formatHsl()}function yF(){return this.rgb().formatRgb()}function Kv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=D1e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?xF(e):n===3?new cs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ij(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ij(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=O1e.exec(t))?new cs(e[1],e[2],e[3],1):(e=M1e.exec(t))?new cs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=I1e.exec(t))?Ij(e[1],e[2],e[3],e[4]):(e=R1e.exec(t))?Ij(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=L1e.exec(t))?jF(e[1],e[2]/100,e[3]/100,1):(e=F1e.exec(t))?jF(e[1],e[2]/100,e[3]/100,e[4]):mF.hasOwnProperty(t)?xF(mF[t]):t==="transparent"?new cs(NaN,NaN,NaN,0):null}function xF(t){return new cs(t>>16&255,t>>8&255,t&255,1)}function Ij(t,e,n,a){return a<=0&&(t=e=n=NaN),new cs(t,e,n,a)}function B1e(t){return t instanceof Vb||(t=Kv(t)),t?(t=t.rgb(),new cs(t.r,t.g,t.b,t.opacity)):new cs}function kP(t,e,n,a){return arguments.length===1?B1e(t):new cs(t,e,n,a??1)}function cs(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}rM(cs,kP,$7(Vb,{brighter(t){return t=t==null?Ww:Math.pow(Ww,t),new cs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wv:Math.pow(Wv,t),new cs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new cs(mf(this.r),mf(this.g),mf(this.b),Yw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vF,formatHex:vF,formatHex8:q1e,formatRgb:bF,toString:bF}));function vF(){return`#${tf(this.r)}${tf(this.g)}${tf(this.b)}`}function q1e(){return`#${tf(this.r)}${tf(this.g)}${tf(this.b)}${tf((isNaN(this.opacity)?1:this.opacity)*255)}`}function bF(){const t=Yw(this.opacity);return`${t===1?"rgb(":"rgba("}${mf(this.r)}, ${mf(this.g)}, ${mf(this.b)}${t===1?")":`, ${t})`}`}function Yw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tf(t){return t=mf(t),(t<16?"0":"")+t.toString(16)}function jF(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $o(t,e,n,a)}function z7(t){if(t instanceof $o)return new $o(t.h,t.s,t.l,t.opacity);if(t instanceof Vb||(t=Kv(t)),!t)return new $o;if(t instanceof $o)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,i=Math.min(e,n,a),s=Math.max(e,n,a),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-a)/l+(n<a)*6:n===s?o=(a-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new $o(o,l,c,t.opacity)}function U1e(t,e,n,a){return arguments.length===1?z7(t):new $o(t,e,n,a??1)}function $o(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}rM($o,U1e,$7(Vb,{brighter(t){return t=t==null?Ww:Math.pow(Ww,t),new $o(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wv:Math.pow(Wv,t),new $o(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,i=2*n-a;return new cs(Vk(t>=240?t-240:t+120,i,a),Vk(t,i,a),Vk(t<120?t+240:t-120,i,a),this.opacity)},clamp(){return new $o(wF(this.h),Rj(this.s),Rj(this.l),Yw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yw(this.opacity);return`${t===1?"hsl(":"hsla("}${wF(this.h)}, ${Rj(this.s)*100}%, ${Rj(this.l)*100}%${t===1?")":`, ${t})`}`}}));function wF(t){return t=(t||0)%360,t<0?t+360:t}function Rj(t){return Math.max(0,Math.min(1,t||0))}function Vk(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const aM=t=>()=>t;function V1e(t,e){return function(n){return t+n*e}}function H1e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}function G1e(t){return(t=+t)==1?B7:function(e,n){return n-e?H1e(e,n,t):aM(isNaN(e)?n:e)}}function B7(t,e){var n=e-t;return n?V1e(t,n):aM(isNaN(t)?e:t)}const NF=function t(e){var n=G1e(e);function a(i,s){var o=n((i=kP(i)).r,(s=kP(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),u=B7(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=c(f),i.opacity=u(f),i+""}}return a.gamma=t,a}(1);function W1e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,a=e.slice(),i;return function(s){for(i=0;i<n;++i)a[i]=t[i]*(1-s)+e[i]*s;return a}}function Y1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function K1e(t,e){var n=e?e.length:0,a=t?Math.min(n,t.length):0,i=new Array(a),s=new Array(n),o;for(o=0;o<a;++o)i[o]=Kg(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<a;++o)s[o]=i[o](l);return s}}function Q1e(t,e){var n=new Date;return t=+t,e=+e,function(a){return n.setTime(t*(1-a)+e*a),n}}function Kw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function X1e(t,e){var n={},a={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Kg(t[i],e[i]):a[i]=e[i];return function(s){for(i in n)a[i]=n[i](s);return a}}var AP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hk=new RegExp(AP.source,"g");function J1e(t){return function(){return t}}function Z1e(t){return function(e){return t(e)+""}}function eje(t,e){var n=AP.lastIndex=Hk.lastIndex=0,a,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(a=AP.exec(t))&&(i=Hk.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(a=a[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Kw(a,i)})),n=Hk.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Z1e(c[0].x):J1e(e):(e=c.length,function(u){for(var f=0,p;f<e;++f)l[(p=c[f]).i]=p.x(u);return l.join("")})}function Kg(t,e){var n=typeof e,a;return e==null||n==="boolean"?aM(e):(n==="number"?Kw:n==="string"?(a=Kv(e))?(e=a,NF):eje:e instanceof Kv?NF:e instanceof Date?Q1e:Y1e(e)?W1e:Array.isArray(e)?K1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?X1e:Kw)(t,e)}function iM(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function tje(t,e){e===void 0&&(e=t,t=Kg);for(var n=0,a=e.length-1,i=e[0],s=new Array(a<0?0:a);n<a;)s[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return s[l](o-l)}}function nje(t){return function(){return t}}function Qw(t){return+t}var SF=[0,1];function $i(t){return t}function EP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:nje(isNaN(e)?NaN:.5)}function rje(t,e){var n;return t>e&&(n=t,t=e,e=n),function(a){return Math.max(t,Math.min(e,a))}}function aje(t,e,n){var a=t[0],i=t[1],s=e[0],o=e[1];return i<a?(a=EP(i,a),s=n(o,s)):(a=EP(a,i),s=n(s,o)),function(l){return s(a(l))}}function ije(t,e,n){var a=Math.min(t.length,e.length)-1,i=new Array(a),s=new Array(a),o=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<a;)i[o]=EP(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=Ub(t,l,1,a)-1;return s[c](i[c](l))}}function Hb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bS(){var t=SF,e=SF,n=Kg,a,i,s,o=$i,l,c,u;function f(){var g=Math.min(t.length,e.length);return o!==$i&&(o=rje(t[0],t[g-1])),l=g>2?ije:aje,c=u=null,p}function p(g){return g==null||isNaN(g=+g)?s:(c||(c=l(t.map(a),e,n)))(a(o(g)))}return p.invert=function(g){return o(i((u||(u=l(e,t.map(a),Kw)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Qw),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=iM,f()},p.clamp=function(g){return arguments.length?(o=g?!0:$i,f()):o!==$i},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,x){return a=g,i=x,f()}}function sM(){return bS()($i,$i)}function sje(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Xw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,a=t.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+t.slice(n+1)]}function mg(t){return t=Xw(Math.abs(t)),t?t[1]:NaN}function oje(t,e){return function(n,a){for(var i=n.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>a));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function lje(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var cje=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qv(t){if(!(e=cje.exec(t)))throw new Error("invalid format: "+t);var e;return new oM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Qv.prototype=oM.prototype;function oM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}oM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function uje(t){e:for(var e=t.length,n=1,a=-1,i;n<e;++n)switch(t[n]){case".":a=i=n;break;case"0":a===0&&(a=n),i=n;break;default:if(!+t[n])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(i+1):t}var q7;function dje(t,e){var n=Xw(t,e);if(!n)return t+"";var a=n[0],i=n[1],s=i-(q7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=a.length;return s===o?a:s>o?a+new Array(s-o+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+Xw(t,Math.max(0,e+s-1))[0]}function _F(t,e){var n=Xw(t,e);if(!n)return t+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const CF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:sje,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>_F(t*100,e),r:_F,s:dje,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function TF(t){return t}var kF=Array.prototype.map,AF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hje(t){var e=t.grouping===void 0||t.thousands===void 0?TF:oje(kF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?TF:lje(kF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(p){p=Qv(p);var g=p.fill,x=p.align,b=p.sign,j=p.symbol,w=p.zero,_=p.width,T=p.comma,C=p.precision,A=p.trim,k=p.type;k==="n"?(T=!0,k="g"):CF[k]||(C===void 0&&(C=12),A=!0,k="g"),(w||g==="0"&&x==="=")&&(w=!0,g="0",x="=");var P=j==="$"?n:j==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",I=j==="$"?a:/[%p]/.test(k)?o:"",R=CF[k],q=/[defgprs%]/.test(k);C=C===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function U(F){var B=P,V=I,W,G,z;if(k==="c")V=R(F)+V,F="";else{F=+F;var Y=F<0||1/F<0;if(F=isNaN(F)?c:R(Math.abs(F),C),A&&(F=uje(F)),Y&&+F==0&&b!=="+"&&(Y=!1),B=(Y?b==="("?b:l:b==="-"||b==="("?"":b)+B,V=(k==="s"?AF[8+q7/3]:"")+V+(Y&&b==="("?")":""),q){for(W=-1,G=F.length;++W<G;)if(z=F.charCodeAt(W),48>z||z>57){V=(z===46?i+F.slice(W+1):F.slice(W))+V,F=F.slice(0,W);break}}}T&&!w&&(F=e(F,1/0));var Q=B.length+F.length+V.length,K=Q<_?new Array(_-Q+1).join(g):"";switch(T&&w&&(F=e(K+F,K.length?_-V.length:1/0),K=""),x){case"<":F=B+F+V+K;break;case"=":F=B+K+F+V;break;case"^":F=K.slice(0,Q=K.length>>1)+B+F+V+K.slice(Q);break;default:F=K+B+F+V;break}return s(F)}return U.toString=function(){return p+""},U}function f(p,g){var x=u((p=Qv(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(mg(g)/3)))*3,j=Math.pow(10,-b),w=AF[8+b/3];return function(_){return x(j*_)+w}}return{format:u,formatPrefix:f}}var Lj,lM,U7;fje({thousands:",",grouping:[3],currency:["$",""]});function fje(t){return Lj=hje(t),lM=Lj.format,U7=Lj.formatPrefix,Lj}function pje(t){return Math.max(0,-mg(Math.abs(t)))}function mje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mg(e)/3)))*3-mg(Math.abs(t)))}function gje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,mg(e)-mg(t))+1}function V7(t,e,n,a){var i=CP(t,e,n),s;switch(a=Qv(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return a.precision==null&&!isNaN(s=mje(i,o))&&(a.precision=s),U7(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(s=gje(i,Math.max(Math.abs(t),Math.abs(e))))&&(a.precision=s-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(s=pje(i))&&(a.precision=s-(a.type==="%")*2);break}}return lM(a)}function _d(t){var e=t.domain;return t.ticks=function(n){var a=e();return SP(a[0],a[a.length-1],n??10)},t.tickFormat=function(n,a){var i=e();return V7(i[0],i[i.length-1],n??10,a)},t.nice=function(n){n==null&&(n=10);var a=e(),i=0,s=a.length-1,o=a[i],l=a[s],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=i,i=s,s=u);f-- >0;){if(u=_P(o,l,n),u===c)return a[i]=o,a[s]=l,e(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Jw(){var t=sM();return t.copy=function(){return Hb(t,Jw())},ho.apply(t,arguments),_d(t)}function H7(t){var e;function n(a){return a==null||isNaN(a=+a)?e:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(t=Array.from(a,Qw),n):t.slice()},n.unknown=function(a){return arguments.length?(e=a,n):e},n.copy=function(){return H7(t).unknown(e)},t=arguments.length?Array.from(t,Qw):[0,1],_d(n)}function G7(t,e){t=t.slice();var n=0,a=t.length-1,i=t[n],s=t[a],o;return s<i&&(o=n,n=a,a=o,o=i,i=s,s=o),t[n]=e.floor(i),t[a]=e.ceil(s),t}function EF(t){return Math.log(t)}function PF(t){return Math.exp(t)}function yje(t){return-Math.log(-t)}function xje(t){return-Math.exp(-t)}function vje(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bje(t){return t===10?vje:t===Math.E?Math.exp:e=>Math.pow(t,e)}function jje(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function DF(t){return(e,n)=>-t(-e,n)}function cM(t){const e=t(EF,PF),n=e.domain;let a=10,i,s;function o(){return i=jje(a),s=bje(a),n()[0]<0?(i=DF(i),s=DF(s),t(yje,xje)):t(EF,PF),e}return e.base=function(l){return arguments.length?(a=+l,o()):a},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],f=c[c.length-1];const p=f<u;p&&([u,f]=[f,u]);let g=i(u),x=i(f),b,j;const w=l==null?10:+l;let _=[];if(!(a%1)&&x-g<w){if(g=Math.floor(g),x=Math.ceil(x),u>0){for(;g<=x;++g)for(b=1;b<a;++b)if(j=g<0?b/s(-g):b*s(g),!(j<u)){if(j>f)break;_.push(j)}}else for(;g<=x;++g)for(b=a-1;b>=1;--b)if(j=g>0?b/s(-g):b*s(g),!(j<u)){if(j>f)break;_.push(j)}_.length*2<w&&(_=SP(u,f,w))}else _=SP(g,x,Math.min(x-g,w)).map(s);return p?_.reverse():_},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Qv(c)).precision==null&&(c.trim=!0),c=lM(c)),l===1/0)return c;const u=Math.max(1,a*l/e.ticks().length);return f=>{let p=f/s(Math.round(i(f)));return p*a<a-.5&&(p*=a),p<=u?c(f):""}},e.nice=()=>n(G7(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function W7(){const t=cM(bS()).domain([1,10]);return t.copy=()=>Hb(t,W7()).base(t.base()),ho.apply(t,arguments),t}function OF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function MF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function uM(t){var e=1,n=t(OF(e),MF(e));return n.constant=function(a){return arguments.length?t(OF(e=+a),MF(e)):e},_d(n)}function Y7(){var t=uM(bS());return t.copy=function(){return Hb(t,Y7()).constant(t.constant())},ho.apply(t,arguments)}function IF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function wje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Nje(t){return t<0?-t*t:t*t}function dM(t){var e=t($i,$i),n=1;function a(){return n===1?t($i,$i):n===.5?t(wje,Nje):t(IF(n),IF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,a()):n},_d(e)}function hM(){var t=dM(bS());return t.copy=function(){return Hb(t,hM()).exponent(t.exponent())},ho.apply(t,arguments),t}function Sje(){return hM.apply(null,arguments).exponent(.5)}function RF(t){return Math.sign(t)*t*t}function _je(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function K7(){var t=sM(),e=[0,1],n=!1,a;function i(s){var o=_je(t(s));return isNaN(o)?a:n?Math.round(o):o}return i.invert=function(s){return t.invert(RF(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Qw)).map(RF)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return K7(t.domain(),e).round(n).clamp(t.clamp()).unknown(a)},ho.apply(i,arguments),_d(i)}function Q7(){var t=[],e=[],n=[],a;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=E1e(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?a:e[Ub(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(cd),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.quantiles=function(){return n.slice()},s.copy=function(){return Q7().domain(t).range(e).unknown(a)},ho.apply(s,arguments)}function X7(){var t=0,e=1,n=1,a=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[Ub(a,c,0,n)]:s}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,a[0]]:u>=n?[a[n-1],e]:[a[u-1],a[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return X7().domain([t,e]).range(i).unknown(s)},ho.apply(_d(o),arguments)}function J7(){var t=[.5],e=[0,1],n,a=1;function i(s){return s!=null&&s<=s?e[Ub(t,s,0,a)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),a=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),a=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return J7().domain(t).range(e).unknown(n)},ho.apply(i,arguments)}const Gk=new Date,Wk=new Date;function Ea(t,e,n,a){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},i.filter=s=>Ea(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(Gk.setTime(+s),Wk.setTime(+o),t(Gk),t(Wk),Math.floor(n(Gk,Wk))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(a?o=>a(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Zw=Ea(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Zw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ea(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Zw);Zw.range;const Cc=1e3,io=Cc*60,Tc=io*60,$c=Tc*24,fM=$c*7,LF=$c*30,Yk=$c*365,nf=Ea(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Cc)},(t,e)=>(e-t)/Cc,t=>t.getUTCSeconds());nf.range;const pM=Ea(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cc)},(t,e)=>{t.setTime(+t+e*io)},(t,e)=>(e-t)/io,t=>t.getMinutes());pM.range;const mM=Ea(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*io)},(t,e)=>(e-t)/io,t=>t.getUTCMinutes());mM.range;const gM=Ea(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cc-t.getMinutes()*io)},(t,e)=>{t.setTime(+t+e*Tc)},(t,e)=>(e-t)/Tc,t=>t.getHours());gM.range;const yM=Ea(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Tc)},(t,e)=>(e-t)/Tc,t=>t.getUTCHours());yM.range;const Gb=Ea(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*io)/$c,t=>t.getDate()-1);Gb.range;const jS=Ea(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$c,t=>t.getUTCDate()-1);jS.range;const Z7=Ea(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$c,t=>Math.floor(t/$c));Z7.range;function Ff(t){return Ea(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*io)/fM)}const wS=Ff(0),eN=Ff(1),Cje=Ff(2),Tje=Ff(3),gg=Ff(4),kje=Ff(5),Aje=Ff(6);wS.range;eN.range;Cje.range;Tje.range;gg.range;kje.range;Aje.range;function $f(t){return Ea(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/fM)}const NS=$f(0),tN=$f(1),Eje=$f(2),Pje=$f(3),yg=$f(4),Dje=$f(5),Oje=$f(6);NS.range;tN.range;Eje.range;Pje.range;yg.range;Dje.range;Oje.range;const xM=Ea(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());xM.range;const vM=Ea(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());vM.range;const zc=Ea(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());zc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ea(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});zc.range;const Bc=Ea(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Bc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ea(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Bc.range;function eV(t,e,n,a,i,s){const o=[[nf,1,Cc],[nf,5,5*Cc],[nf,15,15*Cc],[nf,30,30*Cc],[s,1,io],[s,5,5*io],[s,15,15*io],[s,30,30*io],[i,1,Tc],[i,3,3*Tc],[i,6,6*Tc],[i,12,12*Tc],[a,1,$c],[a,2,2*$c],[n,1,fM],[e,1,LF],[e,3,3*LF],[t,1,Yk]];function l(u,f,p){const g=f<u;g&&([u,f]=[f,u]);const x=p&&typeof p.range=="function"?p:c(u,f,p),b=x?x.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,p){const g=Math.abs(f-u)/p,x=tM(([,,w])=>w).right(o,g);if(x===o.length)return t.every(CP(u/Yk,f/Yk,p));if(x===0)return Zw.every(Math.max(CP(u,f,p),1));const[b,j]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return b.every(j)}return[l,c]}const[Mje,Ije]=eV(Bc,vM,NS,Z7,yM,mM),[Rje,Lje]=eV(zc,xM,wS,Gb,gM,pM);function Kk(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function nv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Fje(t){var e=t.dateTime,n=t.date,a=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=rv(i),f=av(i),p=rv(s),g=av(s),x=rv(o),b=av(o),j=rv(l),w=av(l),_=rv(c),T=av(c),C={a:Y,A:Q,b:K,B:$,c:null,d:UF,e:UF,f:owe,g:ywe,G:vwe,H:awe,I:iwe,j:swe,L:tV,m:lwe,M:cwe,p:ie,q:xe,Q:GF,s:WF,S:uwe,u:dwe,U:hwe,V:fwe,w:pwe,W:mwe,x:null,X:null,y:gwe,Y:xwe,Z:bwe,"%":HF},A={a:X,A:Ie,b:$e,B:Be,c:null,d:VF,e:VF,f:Swe,g:Mwe,G:Rwe,H:jwe,I:wwe,j:Nwe,L:rV,m:_we,M:Cwe,p:Le,q:ce,Q:GF,s:WF,S:Twe,u:kwe,U:Awe,V:Ewe,w:Pwe,W:Dwe,x:null,X:null,y:Owe,Y:Iwe,Z:Lwe,"%":HF},k={a:U,A:F,b:B,B:V,c:W,d:BF,e:BF,f:ewe,g:zF,G:$F,H:qF,I:qF,j:Qje,L:Zje,m:Kje,M:Xje,p:q,q:Yje,Q:nwe,s:rwe,S:Jje,u:Uje,U:Vje,V:Hje,w:qje,W:Gje,x:G,X:z,y:zF,Y:$F,Z:Wje,"%":twe};C.x=P(n,C),C.X=P(a,C),C.c=P(e,C),A.x=P(n,A),A.X=P(a,A),A.c=P(e,A);function P(Se,Ve){return function(Ae){var ue=[],Te=-1,oe=0,be=Se.length,_e,Ne,ee;for(Ae instanceof Date||(Ae=new Date(+Ae));++Te<be;)Se.charCodeAt(Te)===37&&(ue.push(Se.slice(oe,Te)),(Ne=FF[_e=Se.charAt(++Te)])!=null?_e=Se.charAt(++Te):Ne=_e==="e"?" ":"0",(ee=Ve[_e])&&(_e=ee(Ae,Ne)),ue.push(_e),oe=Te+1);return ue.push(Se.slice(oe,Te)),ue.join("")}}function I(Se,Ve){return function(Ae){var ue=nv(1900,void 0,1),Te=R(ue,Se,Ae+="",0),oe,be;if(Te!=Ae.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Ve&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(oe=Qk(nv(ue.y,0,1)),be=oe.getUTCDay(),oe=be>4||be===0?tN.ceil(oe):tN(oe),oe=jS.offset(oe,(ue.V-1)*7),ue.y=oe.getUTCFullYear(),ue.m=oe.getUTCMonth(),ue.d=oe.getUTCDate()+(ue.w+6)%7):(oe=Kk(nv(ue.y,0,1)),be=oe.getDay(),oe=be>4||be===0?eN.ceil(oe):eN(oe),oe=Gb.offset(oe,(ue.V-1)*7),ue.y=oe.getFullYear(),ue.m=oe.getMonth(),ue.d=oe.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),be="Z"in ue?Qk(nv(ue.y,0,1)).getUTCDay():Kk(nv(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(be+5)%7:ue.w+ue.U*7-(be+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,Qk(ue)):Kk(ue)}}function R(Se,Ve,Ae,ue){for(var Te=0,oe=Ve.length,be=Ae.length,_e,Ne;Te<oe;){if(ue>=be)return-1;if(_e=Ve.charCodeAt(Te++),_e===37){if(_e=Ve.charAt(Te++),Ne=k[_e in FF?Ve.charAt(Te++):_e],!Ne||(ue=Ne(Se,Ae,ue))<0)return-1}else if(_e!=Ae.charCodeAt(ue++))return-1}return ue}function q(Se,Ve,Ae){var ue=u.exec(Ve.slice(Ae));return ue?(Se.p=f.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function U(Se,Ve,Ae){var ue=x.exec(Ve.slice(Ae));return ue?(Se.w=b.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function F(Se,Ve,Ae){var ue=p.exec(Ve.slice(Ae));return ue?(Se.w=g.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function B(Se,Ve,Ae){var ue=_.exec(Ve.slice(Ae));return ue?(Se.m=T.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function V(Se,Ve,Ae){var ue=j.exec(Ve.slice(Ae));return ue?(Se.m=w.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function W(Se,Ve,Ae){return R(Se,e,Ve,Ae)}function G(Se,Ve,Ae){return R(Se,n,Ve,Ae)}function z(Se,Ve,Ae){return R(Se,a,Ve,Ae)}function Y(Se){return o[Se.getDay()]}function Q(Se){return s[Se.getDay()]}function K(Se){return c[Se.getMonth()]}function $(Se){return l[Se.getMonth()]}function ie(Se){return i[+(Se.getHours()>=12)]}function xe(Se){return 1+~~(Se.getMonth()/3)}function X(Se){return o[Se.getUTCDay()]}function Ie(Se){return s[Se.getUTCDay()]}function $e(Se){return c[Se.getUTCMonth()]}function Be(Se){return l[Se.getUTCMonth()]}function Le(Se){return i[+(Se.getUTCHours()>=12)]}function ce(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var Ve=P(Se+="",C);return Ve.toString=function(){return Se},Ve},parse:function(Se){var Ve=I(Se+="",!1);return Ve.toString=function(){return Se},Ve},utcFormat:function(Se){var Ve=P(Se+="",A);return Ve.toString=function(){return Se},Ve},utcParse:function(Se){var Ve=I(Se+="",!0);return Ve.toString=function(){return Se},Ve}}}var FF={"-":"",_:" ",0:"0"},za=/^\s*\d+/,$je=/^%/,zje=/[\\^$*+?|[\]().{}]/g;function er(t,e,n){var a=t<0?"-":"",i=(a?-t:t)+"",s=i.length;return a+(s<n?new Array(n-s+1).join(e)+i:i)}function Bje(t){return t.replace(zje,"\\$&")}function rv(t){return new RegExp("^(?:"+t.map(Bje).join("|")+")","i")}function av(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function qje(t,e,n){var a=za.exec(e.slice(n,n+1));return a?(t.w=+a[0],n+a[0].length):-1}function Uje(t,e,n){var a=za.exec(e.slice(n,n+1));return a?(t.u=+a[0],n+a[0].length):-1}function Vje(t,e,n){var a=za.exec(e.slice(n,n+2));return a?(t.U=+a[0],n+a[0].length):-1}function Hje(t,e,n){var a=za.exec(e.slice(n,n+2));return a?(t.V=+a[0],n+a[0].length):-1}function Gje(t,e,n){var a=za.exec(e.slice(n,n+2));return a?(t.W=+a[0],n+a[0].length):-1}function $F(t,e,n){var a=za.exec(e.slice(n,n+4));return a?(t.y=+a[0],n+a[0].length):-1}function zF(t,e,n){var a=za.exec(e.slice(n,n+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function Wje(t,e,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function Yje(t,e,n){var a=za.exec(e.slice(n,n+1));return a?(t.q=a[0]*3-3,n+a[0].length):-1}function Kje(t,e,n){var a=za.exec(e.slice(n,n+2));return a?(t.m=a[0]-1,n+a[0].length):-1}function BF(t,e,n){var a=za.exec(e.slice(n,n+2));return a?(t.d=+a[0],n+a[0].length):-1}function Qje(t,e,n){var a=za.exec(e.slice(n,n+3));return a?(t.m=0,t.d=+a[0],n+a[0].length):-1}function qF(t,e,n){var a=za.exec(e.slice(n,n+2));return a?(t.H=+a[0],n+a[0].length):-1}function Xje(t,e,n){var a=za.exec(e.slice(n,n+2));return a?(t.M=+a[0],n+a[0].length):-1}function Jje(t,e,n){var a=za.exec(e.slice(n,n+2));return a?(t.S=+a[0],n+a[0].length):-1}function Zje(t,e,n){var a=za.exec(e.slice(n,n+3));return a?(t.L=+a[0],n+a[0].length):-1}function ewe(t,e,n){var a=za.exec(e.slice(n,n+6));return a?(t.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function twe(t,e,n){var a=$je.exec(e.slice(n,n+1));return a?n+a[0].length:-1}function nwe(t,e,n){var a=za.exec(e.slice(n));return a?(t.Q=+a[0],n+a[0].length):-1}function rwe(t,e,n){var a=za.exec(e.slice(n));return a?(t.s=+a[0],n+a[0].length):-1}function UF(t,e){return er(t.getDate(),e,2)}function awe(t,e){return er(t.getHours(),e,2)}function iwe(t,e){return er(t.getHours()%12||12,e,2)}function swe(t,e){return er(1+Gb.count(zc(t),t),e,3)}function tV(t,e){return er(t.getMilliseconds(),e,3)}function owe(t,e){return tV(t,e)+"000"}function lwe(t,e){return er(t.getMonth()+1,e,2)}function cwe(t,e){return er(t.getMinutes(),e,2)}function uwe(t,e){return er(t.getSeconds(),e,2)}function dwe(t){var e=t.getDay();return e===0?7:e}function hwe(t,e){return er(wS.count(zc(t)-1,t),e,2)}function nV(t){var e=t.getDay();return e>=4||e===0?gg(t):gg.ceil(t)}function fwe(t,e){return t=nV(t),er(gg.count(zc(t),t)+(zc(t).getDay()===4),e,2)}function pwe(t){return t.getDay()}function mwe(t,e){return er(eN.count(zc(t)-1,t),e,2)}function gwe(t,e){return er(t.getFullYear()%100,e,2)}function ywe(t,e){return t=nV(t),er(t.getFullYear()%100,e,2)}function xwe(t,e){return er(t.getFullYear()%1e4,e,4)}function vwe(t,e){var n=t.getDay();return t=n>=4||n===0?gg(t):gg.ceil(t),er(t.getFullYear()%1e4,e,4)}function bwe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+er(e/60|0,"0",2)+er(e%60,"0",2)}function VF(t,e){return er(t.getUTCDate(),e,2)}function jwe(t,e){return er(t.getUTCHours(),e,2)}function wwe(t,e){return er(t.getUTCHours()%12||12,e,2)}function Nwe(t,e){return er(1+jS.count(Bc(t),t),e,3)}function rV(t,e){return er(t.getUTCMilliseconds(),e,3)}function Swe(t,e){return rV(t,e)+"000"}function _we(t,e){return er(t.getUTCMonth()+1,e,2)}function Cwe(t,e){return er(t.getUTCMinutes(),e,2)}function Twe(t,e){return er(t.getUTCSeconds(),e,2)}function kwe(t){var e=t.getUTCDay();return e===0?7:e}function Awe(t,e){return er(NS.count(Bc(t)-1,t),e,2)}function aV(t){var e=t.getUTCDay();return e>=4||e===0?yg(t):yg.ceil(t)}function Ewe(t,e){return t=aV(t),er(yg.count(Bc(t),t)+(Bc(t).getUTCDay()===4),e,2)}function Pwe(t){return t.getUTCDay()}function Dwe(t,e){return er(tN.count(Bc(t)-1,t),e,2)}function Owe(t,e){return er(t.getUTCFullYear()%100,e,2)}function Mwe(t,e){return t=aV(t),er(t.getUTCFullYear()%100,e,2)}function Iwe(t,e){return er(t.getUTCFullYear()%1e4,e,4)}function Rwe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?yg(t):yg.ceil(t),er(t.getUTCFullYear()%1e4,e,4)}function Lwe(){return"+0000"}function HF(){return"%"}function GF(t){return+t}function WF(t){return Math.floor(+t/1e3)}var wm,iV,sV;Fwe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Fwe(t){return wm=Fje(t),iV=wm.format,wm.parse,sV=wm.utcFormat,wm.utcParse,wm}function $we(t){return new Date(t)}function zwe(t){return t instanceof Date?+t:+new Date(+t)}function bM(t,e,n,a,i,s,o,l,c,u){var f=sM(),p=f.invert,g=f.domain,x=u(".%L"),b=u(":%S"),j=u("%I:%M"),w=u("%I %p"),_=u("%a %d"),T=u("%b %d"),C=u("%B"),A=u("%Y");function k(P){return(c(P)<P?x:l(P)<P?b:o(P)<P?j:s(P)<P?w:a(P)<P?i(P)<P?_:T:n(P)<P?C:A)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?g(Array.from(P,zwe)):g().map($we)},f.ticks=function(P){var I=g();return t(I[0],I[I.length-1],P??10)},f.tickFormat=function(P,I){return I==null?k:u(I)},f.nice=function(P){var I=g();return(!P||typeof P.range!="function")&&(P=e(I[0],I[I.length-1],P??10)),P?g(G7(I,P)):f},f.copy=function(){return Hb(f,bM(t,e,n,a,i,s,o,l,c,u))},f}function Bwe(){return ho.apply(bM(Rje,Lje,zc,xM,wS,Gb,gM,pM,nf,iV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qwe(){return ho.apply(bM(Mje,Ije,Bc,vM,NS,jS,yM,mM,nf,sV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function SS(){var t=0,e=1,n,a,i,s,o=$i,l=!1,c;function u(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(s(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),a=s(e=+e),i=n===a?0:1/(a-n),u):[t,e]},u.clamp=function(p){return arguments.length?(l=!!p,u):l},u.interpolator=function(p){return arguments.length?(o=p,u):o};function f(p){return function(g){var x,b;return arguments.length?([x,b]=g,o=p(x,b),u):[o(0),o(1)]}}return u.range=f(Kg),u.rangeRound=f(iM),u.unknown=function(p){return arguments.length?(c=p,u):c},function(p){return s=p,n=p(t),a=p(e),i=n===a?0:1/(a-n),u}}function Cd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function oV(){var t=_d(SS()($i));return t.copy=function(){return Cd(t,oV())},Yc.apply(t,arguments)}function lV(){var t=cM(SS()).domain([1,10]);return t.copy=function(){return Cd(t,lV()).base(t.base())},Yc.apply(t,arguments)}function cV(){var t=uM(SS());return t.copy=function(){return Cd(t,cV()).constant(t.constant())},Yc.apply(t,arguments)}function jM(){var t=dM(SS());return t.copy=function(){return Cd(t,jM()).exponent(t.exponent())},Yc.apply(t,arguments)}function Uwe(){return jM.apply(null,arguments).exponent(.5)}function uV(){var t=[],e=$i;function n(a){if(a!=null&&!isNaN(a=+a))return e((Ub(t,a,1)-1)/(t.length-1))}return n.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let i of a)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(cd),n},n.interpolator=function(a){return arguments.length?(e=a,n):e},n.range=function(){return t.map((a,i)=>e(i/(t.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(i,s)=>A1e(t,s/a))},n.copy=function(){return uV(e).domain(t)},Yc.apply(n,arguments)}function _S(){var t=0,e=.5,n=1,a=1,i,s,o,l,c,u=$i,f,p=!1,g;function x(j){return isNaN(j=+j)?g:(j=.5+((j=+f(j))-s)*(a*j<a*s?l:c),u(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([t,e,n]=j,i=f(t=+t),s=f(e=+e),o=f(n=+n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x):[t,e,n]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(u=j,x):u};function b(j){return function(w){var _,T,C;return arguments.length?([_,T,C]=w,u=tje(j,[_,T,C]),x):[u(0),u(.5),u(1)]}}return x.range=b(Kg),x.rangeRound=b(iM),x.unknown=function(j){return arguments.length?(g=j,x):g},function(j){return f=j,i=j(t),s=j(e),o=j(n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x}}function dV(){var t=_d(_S()($i));return t.copy=function(){return Cd(t,dV())},Yc.apply(t,arguments)}function hV(){var t=cM(_S()).domain([.1,1,10]);return t.copy=function(){return Cd(t,hV()).base(t.base())},Yc.apply(t,arguments)}function fV(){var t=uM(_S());return t.copy=function(){return Cd(t,fV()).constant(t.constant())},Yc.apply(t,arguments)}function wM(){var t=dM(_S());return t.copy=function(){return Cd(t,wM()).exponent(t.exponent())},Yc.apply(t,arguments)}function Vwe(){return wM.apply(null,arguments).exponent(.5)}const YF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Gv,scaleDiverging:dV,scaleDivergingLog:hV,scaleDivergingPow:wM,scaleDivergingSqrt:Vwe,scaleDivergingSymlog:fV,scaleIdentity:H7,scaleImplicit:TP,scaleLinear:Jw,scaleLog:W7,scaleOrdinal:nM,scalePoint:_v,scalePow:hM,scaleQuantile:Q7,scaleQuantize:X7,scaleRadial:K7,scaleSequential:oV,scaleSequentialLog:lV,scaleSequentialPow:jM,scaleSequentialQuantile:uV,scaleSequentialSqrt:Uwe,scaleSequentialSymlog:cV,scaleSqrt:Sje,scaleSymlog:Y7,scaleThreshold:J7,scaleTime:Bwe,scaleUtc:qwe,tickFormat:V7},Symbol.toStringTag,{value:"Module"}));var Xk,KF;function CS(){if(KF)return Xk;KF=1;var t=Hg();function e(n,a,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=a(l);if(c!=null&&(u===void 0?c===c&&!t(c):i(c,u)))var u=c,f=l}return f}return Xk=e,Xk}var Jk,QF;function pV(){if(QF)return Jk;QF=1;function t(e,n){return e>n}return Jk=t,Jk}var Zk,XF;function Hwe(){if(XF)return Zk;XF=1;var t=CS(),e=pV(),n=Yg();function a(i){return i&&i.length?t(i,n,e):void 0}return Zk=a,Zk}var Gwe=Hwe();const sd=Hn(Gwe);var eA,JF;function mV(){if(JF)return eA;JF=1;function t(e,n){return e<n}return eA=t,eA}var tA,ZF;function Wwe(){if(ZF)return tA;ZF=1;var t=CS(),e=mV(),n=Yg();function a(i){return i&&i.length?t(i,n,e):void 0}return tA=a,tA}var Ywe=Wwe();const TS=Hn(Ywe);var nA,e$;function Kwe(){if(e$)return nA;e$=1;var t=FO(),e=Ul(),n=S7(),a=ps();function i(s,o){var l=a(s)?t:n;return l(s,e(o,3))}return nA=i,nA}var rA,t$;function Qwe(){if(t$)return rA;t$=1;var t=w7(),e=Kwe();function n(a,i){return t(e(a,i),1)}return rA=n,rA}var Xwe=Qwe();const Jwe=Hn(Xwe);var aA,n$;function Zwe(){if(n$)return aA;n$=1;var t=XO();function e(n,a){return t(n,a)}return aA=e,aA}var eNe=Zwe();const Ef=Hn(eNe);var Qg=1e9,tNe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SM,Wr=!0,co="[DecimalError] ",gf=co+"Invalid argument: ",NM=co+"Exponent out of range: ",Xg=Math.floor,Yh=Math.pow,nNe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ps,Ra=1e7,zr=7,gV=9007199254740991,nN=Xg(gV/zr),Ft={};Ft.absoluteValue=Ft.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ft.comparedTo=Ft.cmp=function(t){var e,n,a,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(a=s.d.length,i=t.d.length,e=0,n=a<i?a:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return a===i?0:a>i^s.s<0?1:-1};Ft.decimalPlaces=Ft.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ft.dividedBy=Ft.div=function(t){return Oc(this,new this.constructor(t))};Ft.dividedToIntegerBy=Ft.idiv=function(t){var e=this,n=e.constructor;return Tr(Oc(e,new n(t),0,1),n.precision)};Ft.equals=Ft.eq=function(t){return!this.cmp(t)};Ft.exponent=function(){return ja(this)};Ft.greaterThan=Ft.gt=function(t){return this.cmp(t)>0};Ft.greaterThanOrEqualTo=Ft.gte=function(t){return this.cmp(t)>=0};Ft.isInteger=Ft.isint=function(){return this.e>this.d.length-2};Ft.isNegative=Ft.isneg=function(){return this.s<0};Ft.isPositive=Ft.ispos=function(){return this.s>0};Ft.isZero=function(){return this.s===0};Ft.lessThan=Ft.lt=function(t){return this.cmp(t)<0};Ft.lessThanOrEqualTo=Ft.lte=function(t){return this.cmp(t)<1};Ft.logarithm=Ft.log=function(t){var e,n=this,a=n.constructor,i=a.precision,s=i+5;if(t===void 0)t=new a(10);else if(t=new a(t),t.s<1||t.eq(Ps))throw Error(co+"NaN");if(n.s<1)throw Error(co+(n.s?"NaN":"-Infinity"));return n.eq(Ps)?new a(0):(Wr=!1,e=Oc(Xv(n,s),Xv(t,s),s),Wr=!0,Tr(e,i))};Ft.minus=Ft.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vV(e,t):yV(e,(t.s=-t.s,t))};Ft.modulo=Ft.mod=function(t){var e,n=this,a=n.constructor,i=a.precision;if(t=new a(t),!t.s)throw Error(co+"NaN");return n.s?(Wr=!1,e=Oc(n,t,0,1).times(t),Wr=!0,n.minus(e)):Tr(new a(n),i)};Ft.naturalExponential=Ft.exp=function(){return xV(this)};Ft.naturalLogarithm=Ft.ln=function(){return Xv(this)};Ft.negated=Ft.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ft.plus=Ft.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?yV(e,t):vV(e,(t.s=-t.s,t))};Ft.precision=Ft.sd=function(t){var e,n,a,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(gf+t);if(e=ja(i)+1,a=i.d.length-1,n=a*zr+1,a=i.d[a],a){for(;a%10==0;a/=10)n--;for(a=i.d[0];a>=10;a/=10)n++}return t&&e>n?e:n};Ft.squareRoot=Ft.sqrt=function(){var t,e,n,a,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(co+"NaN")}for(t=ja(l),Wr=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Ol(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Xg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),a=new c(e)):a=new c(i.toString()),n=c.precision,i=o=n+3;;)if(s=a,a=s.plus(Oc(l,s,o+2)).times(.5),Ol(s.d).slice(0,o)===(e=Ol(a.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Tr(s,n+1,0),s.times(s).eq(l)){a=s;break}}else if(e!="9999")break;o+=4}return Wr=!0,Tr(a,n)};Ft.times=Ft.mul=function(t){var e,n,a,i,s,o,l,c,u,f=this,p=f.constructor,g=f.d,x=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=x.length,c<u&&(s=g,g=x,x=s,o=c,c=u,u=o),s=[],o=c+u,a=o;a--;)s.push(0);for(a=u;--a>=0;){for(e=0,i=c+a;i>a;)l=s[i]+x[a]*g[i-a-1]+e,s[i--]=l%Ra|0,e=l/Ra|0;s[i]=(s[i]+e)%Ra|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Wr?Tr(t,p.precision):t};Ft.toDecimalPlaces=Ft.todp=function(t,e){var n=this,a=n.constructor;return n=new a(n),t===void 0?n:(zl(t,0,Qg),e===void 0?e=a.rounding:zl(e,0,8),Tr(n,t+ja(n)+1,e))};Ft.toExponential=function(t,e){var n,a=this,i=a.constructor;return t===void 0?n=Pf(a,!0):(zl(t,0,Qg),e===void 0?e=i.rounding:zl(e,0,8),a=Tr(new i(a),t+1,e),n=Pf(a,!0,t+1)),n};Ft.toFixed=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?Pf(i):(zl(t,0,Qg),e===void 0?e=s.rounding:zl(e,0,8),a=Tr(new s(i),t+ja(i)+1,e),n=Pf(a.abs(),!1,t+ja(a)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ft.toInteger=Ft.toint=function(){var t=this,e=t.constructor;return Tr(new e(t),ja(t)+1,e.rounding)};Ft.toNumber=function(){return+this};Ft.toPower=Ft.pow=function(t){var e,n,a,i,s,o,l=this,c=l.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(Ps);if(l=new c(l),!l.s){if(t.s<1)throw Error(co+"Infinity");return l}if(l.eq(Ps))return l;if(a=c.precision,t.eq(Ps))return Tr(l,a);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=f<0?-f:f)<=gV){for(i=new c(Ps),e=Math.ceil(a/zr+4),Wr=!1;n%2&&(i=i.times(l),a$(i.d,e)),n=Xg(n/2),n!==0;)l=l.times(l),a$(l.d,e);return Wr=!0,t.s<0?new c(Ps).div(i):Tr(i,a)}}else if(s<0)throw Error(co+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Wr=!1,i=t.times(Xv(l,a+u)),Wr=!0,i=xV(i),i.s=s,i};Ft.toPrecision=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?(n=ja(i),a=Pf(i,n<=s.toExpNeg||n>=s.toExpPos)):(zl(t,1,Qg),e===void 0?e=s.rounding:zl(e,0,8),i=Tr(new s(i),t,e),n=ja(i),a=Pf(i,t<=n||n<=s.toExpNeg,t)),a};Ft.toSignificantDigits=Ft.tosd=function(t,e){var n=this,a=n.constructor;return t===void 0?(t=a.precision,e=a.rounding):(zl(t,1,Qg),e===void 0?e=a.rounding:zl(e,0,8)),Tr(new a(n),t,e)};Ft.toString=Ft.valueOf=Ft.val=Ft.toJSON=Ft[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ja(t),n=t.constructor;return Pf(t,e<=n.toExpNeg||e>=n.toExpPos)};function yV(t,e){var n,a,i,s,o,l,c,u,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Wr?Tr(e,p):e;if(c=t.d,u=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(a=c,s=-s,l=u.length):(a=u,i=o,l=c.length),o=Math.ceil(p/zr),l=o>l?o+1:l+1,s>l&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,a=u,u=c,c=a),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/Ra|0,c[s]%=Ra;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Wr?Tr(e,p):e}function zl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(gf+t)}function Ol(t){var e,n,a,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)a=t[e]+"",n=zr-a.length,n&&(s+=Yu(n)),s+=a;o=t[e],a=o+"",n=zr-a.length,n&&(s+=Yu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Oc=function(){function t(a,i){var s,o=0,l=a.length;for(a=a.slice();l--;)s=a[l]*i+o,a[l]=s%Ra|0,o=s/Ra|0;return o&&a.unshift(o),a}function e(a,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(a[l]!=i[l]){c=a[l]>i[l]?1:-1;break}return c}function n(a,i,s){for(var o=0;s--;)a[s]-=o,o=a[s]<i[s]?1:0,a[s]=o*Ra+a[s]-i[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,i,s,o){var l,c,u,f,p,g,x,b,j,w,_,T,C,A,k,P,I,R,q=a.constructor,U=a.s==i.s?1:-1,F=a.d,B=i.d;if(!a.s)return new q(a);if(!i.s)throw Error(co+"Division by zero");for(c=a.e-i.e,I=B.length,k=F.length,x=new q(U),b=x.d=[],u=0;B[u]==(F[u]||0);)++u;if(B[u]>(F[u]||0)&&--c,s==null?T=s=q.precision:o?T=s+(ja(a)-ja(i))+1:T=s,T<0)return new q(0);if(T=T/zr+2|0,u=0,I==1)for(f=0,B=B[0],T++;(u<k||f)&&T--;u++)C=f*Ra+(F[u]||0),b[u]=C/B|0,f=C%B|0;else{for(f=Ra/(B[0]+1)|0,f>1&&(B=t(B,f),F=t(F,f),I=B.length,k=F.length),A=I,j=F.slice(0,I),w=j.length;w<I;)j[w++]=0;R=B.slice(),R.unshift(0),P=B[0],B[1]>=Ra/2&&++P;do f=0,l=e(B,j,I,w),l<0?(_=j[0],I!=w&&(_=_*Ra+(j[1]||0)),f=_/P|0,f>1?(f>=Ra&&(f=Ra-1),p=t(B,f),g=p.length,w=j.length,l=e(p,j,g,w),l==1&&(f--,n(p,I<g?R:B,g))):(f==0&&(l=f=1),p=B.slice()),g=p.length,g<w&&p.unshift(0),n(j,p,w),l==-1&&(w=j.length,l=e(B,j,I,w),l<1&&(f++,n(j,I<w?R:B,w))),w=j.length):l===0&&(f++,j=[0]),b[u++]=f,l&&j[0]?j[w++]=F[A]||0:(j=[F[A]],w=1);while((A++<k||j[0]!==void 0)&&T--)}return b[0]||b.shift(),x.e=c,Tr(x,o?s+ja(x)+1:s)}}();function xV(t,e){var n,a,i,s,o,l,c=0,u=0,f=t.constructor,p=f.precision;if(ja(t)>16)throw Error(NM+ja(t));if(!t.s)return new f(Ps);for(Wr=!1,l=p,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(a=Math.log(Yh(2,u))/Math.LN10*2+5|0,l+=a,n=i=s=new f(Ps),f.precision=l;;){if(i=Tr(i.times(t),l),n=n.times(++c),o=s.plus(Oc(i,n,l)),Ol(o.d).slice(0,l)===Ol(s.d).slice(0,l)){for(;u--;)s=Tr(s.times(s),l);return f.precision=p,e==null?(Wr=!0,Tr(s,p)):s}s=o}}function ja(t){for(var e=t.e*zr,n=t.d[0];n>=10;n/=10)e++;return e}function iA(t,e,n){if(e>t.LN10.sd())throw Wr=!0,n&&(t.precision=n),Error(co+"LN10 precision limit exceeded");return Tr(new t(t.LN10),e)}function Yu(t){for(var e="";t--;)e+="0";return e}function Xv(t,e){var n,a,i,s,o,l,c,u,f,p=1,g=10,x=t,b=x.d,j=x.constructor,w=j.precision;if(x.s<1)throw Error(co+(x.s?"NaN":"-Infinity"));if(x.eq(Ps))return new j(0);if(e==null?(Wr=!1,u=w):u=e,x.eq(10))return e==null&&(Wr=!0),iA(j,u);if(u+=g,j.precision=u,n=Ol(b),a=n.charAt(0),s=ja(x),Math.abs(s)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)x=x.times(t),n=Ol(x.d),a=n.charAt(0),p++;s=ja(x),a>1?(x=new j("0."+n),s++):x=new j(a+"."+n.slice(1))}else return c=iA(j,u+2,w).times(s+""),x=Xv(new j(a+"."+n.slice(1)),u-g).plus(c),j.precision=w,e==null?(Wr=!0,Tr(x,w)):x;for(l=o=x=Oc(x.minus(Ps),x.plus(Ps),u),f=Tr(x.times(x),u),i=3;;){if(o=Tr(o.times(f),u),c=l.plus(Oc(o,new j(i),u)),Ol(c.d).slice(0,u)===Ol(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(iA(j,u+2,w).times(s+""))),l=Oc(l,new j(p),u),j.precision=w,e==null?(Wr=!0,Tr(l,w)):l;l=c,i+=2}}function r$(t,e){var n,a,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(n<0&&(n=a),n+=+e.slice(a+1),e=e.substring(0,a)):n<0&&(n=e.length),a=0;e.charCodeAt(a)===48;)++a;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(a,i),e){if(i-=a,n=n-a-1,t.e=Xg(n/zr),t.d=[],a=(n+1)%zr,n<0&&(a+=zr),a<i){for(a&&t.d.push(+e.slice(0,a)),i-=zr;a<i;)t.d.push(+e.slice(a,a+=zr));e=e.slice(a),a=zr-e.length}else a-=i;for(;a--;)e+="0";if(t.d.push(+e),Wr&&(t.e>nN||t.e<-nN))throw Error(NM+n)}else t.s=0,t.e=0,t.d=[0];return t}function Tr(t,e,n){var a,i,s,o,l,c,u,f,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(a=e-o,a<0)a+=zr,i=e,u=p[f=0];else{if(f=Math.ceil((a+1)/zr),s=p.length,f>=s)return t;for(u=s=p[f],o=1;s>=10;s/=10)o++;a%=zr,i=a-zr+o}if(n!==void 0&&(s=Yh(10,o-i-1),l=u/s%10|0,c=e<0||p[f+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?i>0?u/Yh(10,o-i):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(s=ja(t),p.length=1,e=e-s-1,p[0]=Yh(10,(zr-e%zr)%zr),t.e=Xg(-e/zr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(a==0?(p.length=f,s=1,f--):(p.length=f+1,s=Yh(10,zr-a),p[f]=i>0?(u/Yh(10,o-i)%Yh(10,i)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==Ra&&(p[0]=1,++t.e);break}else{if(p[f]+=s,p[f]!=Ra)break;p[f--]=0,s=1}for(a=p.length;p[--a]===0;)p.pop();if(Wr&&(t.e>nN||t.e<-nN))throw Error(NM+ja(t));return t}function vV(t,e){var n,a,i,s,o,l,c,u,f,p,g=t.constructor,x=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Wr?Tr(e,x):e;if(c=t.d,p=e.d,a=e.e,u=t.e,c=c.slice(),o=u-a,o){for(f=o<0,f?(n=c,o=-o,l=p.length):(n=p,a=u,l=c.length),i=Math.max(Math.ceil(x/zr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=p.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){f=c[i]<p[i];break}o=0}for(f&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(s=i;s&&c[--s]===0;)c[s]=Ra-1;--c[s],c[i]+=Ra}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(e.d=c,e.e=a,Wr?Tr(e,x):e):new g(0)}function Pf(t,e,n){var a,i=ja(t),s=Ol(t.d),o=s.length;return e?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Yu(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Yu(-i-1)+s,n&&(a=n-o)>0&&(s+=Yu(a))):i>=o?(s+=Yu(i+1-o),n&&(a=n-i-1)>0&&(s=s+"."+Yu(a))):((a=i+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(i+1===o&&(s+="."),s+=Yu(a))),t.s<0?"-"+s:s}function a$(t,e){if(t.length>e)return t.length=e,!0}function bV(t){var e,n,a;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(gf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return r$(o,s.toString())}else if(typeof s!="string")throw Error(gf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,nNe.test(s))r$(o,s);else throw Error(gf+s)}if(i.prototype=Ft,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=bV,i.config=i.set=rNe,t===void 0&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<a.length;)t.hasOwnProperty(n=a[e++])||(t[n]=this[n]);return i.config(t),i}function rNe(t){if(!t||typeof t!="object")throw Error(co+"Object expected");var e,n,a,i=["precision",1,Qg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((a=t[n=i[e]])!==void 0)if(Xg(a)===a&&a>=i[e+1]&&a<=i[e+2])this[n]=a;else throw Error(gf+n+": "+a);if((a=t[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(gf+n+": "+a);return this}var SM=bV(tNe);Ps=new SM(1);const Sr=SM;function aNe(t){return lNe(t)||oNe(t)||sNe(t)||iNe()}function iNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sNe(t,e){if(t){if(typeof t=="string")return PP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PP(t,e)}}function oNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function lNe(t){if(Array.isArray(t))return PP(t)}function PP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var cNe=function(e){return e},jV={},wV=function(e){return e===jV},i$=function(e){return function n(){return arguments.length===0||arguments.length===1&&wV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},uNe=function t(e,n){return e===1?n:i$(function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==jV}).length;return o>=e?n.apply(void 0,i):t(e-o,i$(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=i.map(function(p){return wV(p)?c.shift():p});return n.apply(void 0,aNe(f).concat(c))}))})},kS=function(e){return uNe(e.length,e)},DP=function(e,n){for(var a=[],i=e;i<n;++i)a[i-e]=i;return a},dNe=kS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),hNe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(!n.length)return cNe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},OP=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},NV=function(e){var n=null,a=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,a=e.apply(void 0,s)),a}};function fNe(t){var e;return t===0?e=1:e=Math.floor(new Sr(t).abs().log(10).toNumber())+1,e}function pNe(t,e,n){for(var a=new Sr(t),i=0,s=[];a.lt(e)&&i<1e5;)s.push(a.toNumber()),a=a.add(n),i++;return s}var mNe=kS(function(t,e,n){var a=+t,i=+e;return a+n*(i-a)}),gNe=kS(function(t,e,n){var a=e-+t;return a=a||1/0,(n-t)/a}),yNe=kS(function(t,e,n){var a=e-+t;return a=a||1/0,Math.max(0,Math.min(1,(n-t)/a))});const AS={rangeStep:pNe,getDigitCount:fNe,interpolateNumber:mNe,uninterpolateNumber:gNe,uninterpolateTruncation:yNe};function MP(t){return bNe(t)||vNe(t)||SV(t)||xNe()}function xNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function bNe(t){if(Array.isArray(t))return IP(t)}function Jv(t,e){return NNe(t)||wNe(t,e)||SV(t,e)||jNe()}function jNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SV(t,e){if(t){if(typeof t=="string")return IP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IP(t,e)}}function IP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function wNe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],a=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));a=!0);}catch(c){i=!0,s=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function NNe(t){if(Array.isArray(t))return t}function _V(t){var e=Jv(t,2),n=e[0],a=e[1],i=n,s=a;return n>a&&(i=a,s=n),[i,s]}function CV(t,e,n){if(t.lte(0))return new Sr(0);var a=AS.getDigitCount(t.toNumber()),i=new Sr(10).pow(a),s=t.div(i),o=a!==1?.05:.1,l=new Sr(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new Sr(Math.ceil(c))}function SNe(t,e,n){var a=1,i=new Sr(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(a=new Sr(10).pow(AS.getDigitCount(t)-1),i=new Sr(Math.floor(i.div(a).toNumber())).mul(a)):s>1&&(i=new Sr(Math.floor(t)))}else t===0?i=new Sr(Math.floor((e-1)/2)):n||(i=new Sr(Math.floor(t)));var o=Math.floor((e-1)/2),l=hNe(dNe(function(c){return i.add(new Sr(c-o).mul(a)).toNumber()}),DP);return l(0,e)}function TV(t,e,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Sr(0),tickMin:new Sr(0),tickMax:new Sr(0)};var s=CV(new Sr(e).sub(t).div(n-1),a,i),o;t<=0&&e>=0?o=new Sr(0):(o=new Sr(t).add(e).div(2),o=o.sub(new Sr(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new Sr(e).sub(o).div(s).toNumber()),u=l+c+1;return u>n?TV(t,e,n,a,i+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:s,tickMin:o.sub(new Sr(l).mul(s)),tickMax:o.add(new Sr(c).mul(s))})}function _Ne(t){var e=Jv(t,2),n=e[0],a=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=_V([n,a]),c=Jv(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var p=f===1/0?[u].concat(MP(DP(0,i-1).map(function(){return 1/0}))):[].concat(MP(DP(0,i-1).map(function(){return-1/0})),[f]);return n>a?OP(p):p}if(u===f)return SNe(u,i,s);var g=TV(u,f,o,s),x=g.step,b=g.tickMin,j=g.tickMax,w=AS.rangeStep(b,j.add(new Sr(.1).mul(x)),x);return n>a?OP(w):w}function CNe(t,e){var n=Jv(t,2),a=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=_V([a,i]),l=Jv(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[a,i];if(c===u)return[c];var f=Math.max(e,2),p=CV(new Sr(u).sub(c).div(f-1),s,0),g=[].concat(MP(AS.rangeStep(new Sr(c),new Sr(u).sub(new Sr(.99).mul(p)),p)),[u]);return a>i?OP(g):g}var TNe=NV(_Ne),kNe=NV(CNe),ANe="Invariant failed";function Df(t,e){throw new Error(ANe)}var ENe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function rN(){return rN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rN.apply(this,arguments)}function PNe(t,e){return INe(t)||MNe(t,e)||ONe(t,e)||DNe()}function DNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ONe(t,e){if(t){if(typeof t=="string")return s$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s$(t,e)}}function s$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function MNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function INe(t){if(Array.isArray(t))return t}function RNe(t,e){if(t==null)return{};var n=LNe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function LNe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function FNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ne(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,EV(a.key),a)}}function zNe(t,e,n){return e&&$Ne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BNe(t,e,n){return e=aN(e),qNe(t,kV()?Reflect.construct(e,n||[],aN(t).constructor):e.apply(t,n))}function qNe(t,e){if(e&&(xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UNe(t)}function UNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kV=function(){return!!t})()}function aN(t){return aN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aN(t)}function VNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RP(t,e)}function RP(t,e){return RP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},RP(t,e)}function AV(t,e,n){return e=EV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EV(t){var e=HNe(t,"string");return xg(e)=="symbol"?e:e+""}function HNe(t,e){if(xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(xg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wb=function(t){function e(){return FNe(this,e),BNe(this,e,arguments)}return VNe(e,t),zNe(e,[{key:"render",value:function(){var a=this.props,i=a.offset,s=a.layout,o=a.width,l=a.dataKey,c=a.data,u=a.dataPointFormatter,f=a.xAxis,p=a.yAxis,g=RNe(a,ENe),x=Bt(g,!1);this.props.direction==="x"&&f.type!=="number"&&Df();var b=c.map(function(j){var w=u(j,l),_=w.x,T=w.y,C=w.value,A=w.errorVal;if(!A)return null;var k=[],P,I;if(Array.isArray(A)){var R=PNe(A,2);P=R[0],I=R[1]}else P=I=A;if(s==="vertical"){var q=f.scale,U=T+i,F=U+o,B=U-o,V=q(C-P),W=q(C+I);k.push({x1:W,y1:F,x2:W,y2:B}),k.push({x1:V,y1:U,x2:W,y2:U}),k.push({x1:V,y1:F,x2:V,y2:B})}else if(s==="horizontal"){var G=p.scale,z=_+i,Y=z-o,Q=z+o,K=G(C-P),$=G(C+I);k.push({x1:Y,y1:$,x2:Q,y2:$}),k.push({x1:z,y1:K,x2:z,y2:$}),k.push({x1:Y,y1:K,x2:Q,y2:K})}return Ce.createElement(In,rN({className:"recharts-errorBar",key:"bar-".concat(k.map(function(ie){return"".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))},x),k.map(function(ie){return Ce.createElement("line",rN({},ie,{key:"line-".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))}))});return Ce.createElement(In,{className:"recharts-errorBars"},b)}}])}(Ce.Component);AV(Wb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});AV(Wb,"displayName","ErrorBar");function Zv(t){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zv(t)}function o$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Uh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(n),!0).forEach(function(a){GNe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function GNe(t,e,n){return e=WNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WNe(t){var e=YNe(t,"string");return Zv(e)=="symbol"?e:e+""}function YNe(t,e){if(Zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Zv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PV=function(e){var n=e.children,a=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=As(n,Dc);if(!o)return null;var l=Dc.defaultProps,c=l!==void 0?Uh(Uh({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(a||[]).reduce(function(f,p){var g=p.item,x=p.props,b=x.sectors||x.data||[];return f.concat(b.map(function(j){return{type:o.props.iconType||g.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):u=(a||[]).map(function(f){var p=f.item,g=p.type.defaultProps,x=g!==void 0?Uh(Uh({},g),p.props):{},b=x.dataKey,j=x.name,w=x.legendType,_=x.hide;return{inactive:_,dataKey:b,type:c.iconType||w||"square",color:_M(p),value:j||b,payload:x}}),Uh(Uh(Uh({},c),Dc.getWithHeight(o,i)),{},{payload:u,item:o})};function eb(t){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eb(t)}function l$(t){return JNe(t)||XNe(t)||QNe(t)||KNe()}function KNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QNe(t,e){if(t){if(typeof t=="string")return LP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LP(t,e)}}function XNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JNe(t){if(Array.isArray(t))return LP(t)}function LP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function c$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ra(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(n),!0).forEach(function(a){Um(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Um(t,e,n){return e=ZNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZNe(t){var e=eSe(t,"string");return eb(e)=="symbol"?e:e+""}function eSe(t,e){if(eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(eb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fa(t,e,n){return dn(t)||dn(e)?n:Aa(e)?Ls(t,e,n):an(e)?e(t):n}function Cv(t,e,n,a){var i=Jwe(t,function(l){return fa(l,e)});if(n==="number"){var s=i.filter(function(l){return Nt(l)||parseFloat(l)});return s.length?[TS(s),sd(s)]:[1/0,-1/0]}var o=a?i.filter(function(l){return!dn(l)}):i;return o.map(function(l){return Aa(l)||l instanceof Date?l:""})}var tSe=function(e){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var f=u>0?i[u-1].coordinate:i[l-1].coordinate,p=i[u].coordinate,g=u>=l-1?i[0].coordinate:i[u+1].coordinate,x=void 0;if(Li(p-f)!==Li(g-p)){var b=[];if(Li(g-p)===Li(c[1]-c[0])){x=g;var j=p+c[1]-c[0];b[0]=Math.min(j,(j+f)/2),b[1]=Math.max(j,(j+f)/2)}else{x=f;var w=g+c[1]-c[0];b[0]=Math.min(p,(w+p)/2),b[1]=Math.max(p,(w+p)/2)}var _=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>_[0]&&e<=_[1]||e>=b[0]&&e<=b[1]){o=i[u].index;break}}else{var T=Math.min(f,g),C=Math.max(f,g);if(e>(T+p)/2&&e<=(C+p)/2){o=i[u].index;break}}}else for(var A=0;A<l;A++)if(A===0&&e<=(a[A].coordinate+a[A+1].coordinate)/2||A>0&&A<l-1&&e>(a[A].coordinate+a[A-1].coordinate)/2&&e<=(a[A].coordinate+a[A+1].coordinate)/2||A===l-1&&e>(a[A].coordinate+a[A-1].coordinate)/2){o=a[A].index;break}return o},_M=function(e){var n,a=e,i=a.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?ra(ra({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},nSe=function(e){var n=e.barSize,a=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var f=s[l[c]].stackGroups,p=Object.keys(f),g=0,x=p.length;g<x;g++){var b=f[p[g]],j=b.items,w=b.cateAxisId,_=j.filter(function(I){return Pc(I.type).indexOf("Bar")>=0});if(_&&_.length){var T=_[0].type.defaultProps,C=T!==void 0?ra(ra({},T),_[0].props):_[0].props,A=C.barSize,k=C[w];o[k]||(o[k]=[]);var P=dn(A)?n:A;o[k].push({item:_[0],stackList:_.slice(1),barSize:dn(P)?void 0:Fi(P,a,0)})}}return o},rSe=function(e){var n=e.barGap,a=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Fi(n,i,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var g=!1,x=i/c,b=o.reduce(function(A,k){return A+k.barSize||0},0);b+=(c-1)*u,b>=i&&(b-=(c-1)*u,u=0),b>=i&&x>0&&(g=!0,x*=.9,b=c*x);var j=(i-b)/2>>0,w={offset:j-u,size:0};f=o.reduce(function(A,k){var P={item:k.item,position:{offset:w.offset+w.size+u,size:g?x:k.barSize}},I=[].concat(l$(A),[P]);return w=I[I.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(R){I.push({item:R,position:w})}),I},p)}else{var _=Fi(a,i,0,!0);i-2*_-(c-1)*u<=0&&(u=0);var T=(i-2*_-(c-1)*u)/c;T>1&&(T>>=0);var C=l===+l?Math.min(T,l):T;f=o.reduce(function(A,k,P){var I=[].concat(l$(A),[{item:k.item,position:{offset:_+(T+u)*P+(T-C)/2,size:C}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(R){I.push({item:R,position:I[I.length-1].position})}),I},p)}return f},aSe=function(e,n,a,i){var s=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),u=PV({children:s,legendWidth:c});if(u){var f=i||{},p=f.width,g=f.height,x=u.align,b=u.verticalAlign,j=u.layout;if((j==="vertical"||j==="horizontal"&&b==="middle")&&x!=="center"&&Nt(e[x]))return ra(ra({},e),{},Um({},x,e[x]+(p||0)));if((j==="horizontal"||j==="vertical"&&x==="center")&&b!=="middle"&&Nt(e[b]))return ra(ra({},e),{},Um({},b,e[b]+(g||0)))}return e},iSe=function(e,n,a){return dn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},DV=function(e,n,a,i,s){var o=n.props.children,l=Fs(o,Wb).filter(function(u){return iSe(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,f){var p=fa(f,a);if(dn(p))return u;var g=Array.isArray(p)?[TS(p),sd(p)]:[p,p],x=c.reduce(function(b,j){var w=fa(f,j,0),_=g[0]-Math.abs(Array.isArray(w)?w[0]:w),T=g[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(_,b[0]),Math.max(T,b[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},sSe=function(e,n,a,i,s){var o=n.map(function(l){return DV(e,l,a,s,i)}).filter(function(l){return!dn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},OV=function(e,n,a,i,s){var o=n.map(function(c){var u=c.props.dataKey;return a==="number"&&u&&DV(e,c,u,i)||Cv(e,u,a,s)});if(a==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,p=u.length;f<p;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},MV=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},IV=function(e,n,a,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===a&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(a),l},kc=function(e,n,a){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||a)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Li(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(p){var g=s?s.indexOf(p):p;return{coordinate:i(g)+u,value:p,offset:u}});return f.filter(function(p){return!Wg(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,g){return{coordinate:i(p)+u,value:p,index:g,offset:u}}):i.ticks&&!a?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+u,value:p,offset:u}}):i.domain().map(function(p,g){return{coordinate:i(p)+u,value:s?s[p]:p,index:g,offset:u}})},sA=new WeakMap,Fj=function(e,n){if(typeof n!="function")return e;sA.has(e)||sA.set(e,new WeakMap);var a=sA.get(e);if(a.has(n))return a.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,i),i},RV=function(e,n,a){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Gv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Jw(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:_v(),realScaleType:"point"}:s==="category"?{scale:Gv(),realScaleType:"band"}:{scale:Jw(),realScaleType:"linear"};if(Tf(i)){var c="scale".concat(fS(i));return{scale:(YF[c]||_v)(),realScaleType:YF[c]?c:"point"}}return an(i)?{scale:i}:{scale:_v(),realScaleType:"point"}},u$=1e-4,LV=function(e){var n=e.domain();if(!(!n||n.length<=2)){var a=n.length,i=e.range(),s=Math.min(i[0],i[1])-u$,o=Math.max(i[0],i[1])+u$,l=e(n[0]),c=e(n[a-1]);(l<s||l>o||c<s||c>o)&&e.domain([n[0],n[a-1]])}},oSe=function(e,n){if(!e)return null;for(var a=0,i=e.length;a<i;a++)if(e[a].item===n)return e[a].position;return null},lSe=function(e,n){if(!n||n.length!==2||!Nt(n[0])||!Nt(n[1]))return e;var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Nt(e[0])||e[0]<a)&&(s[0]=a),(!Nt(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<a&&(s[1]=a),s},cSe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0,l=0;l<n;++l){var c=Wg(e[l][a][1])?e[l][a][0]:e[l][a][1];c>=0?(e[l][a][0]=s,e[l][a][1]=s+c,s=e[l][a][1]):(e[l][a][0]=o,e[l][a][1]=o+c,o=e[l][a][1])}},uSe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0;o<n;++o){var l=Wg(e[o][a][1])?e[o][a][0]:e[o][a][1];l>=0?(e[o][a][0]=s,e[o][a][1]=s+l,s=e[o][a][1]):(e[o][a][0]=0,e[o][a][1]=0)}},dSe={sign:cSe,expand:nve,none:ug,silhouette:rve,wiggle:ave,positive:uSe},hSe=function(e,n,a){var i=n.map(function(l){return l.props.dataKey}),s=dSe[a],o=tve().keys(i).value(function(l,c){return+fa(l,c,0)}).order(fP).offset(s);return o(e)},fSe=function(e,n,a,i,s,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(p,g){var x,b=(x=g.type)!==null&&x!==void 0&&x.defaultProps?ra(ra({},g.type.defaultProps),g.props):g.props,j=b.stackId,w=b.hide;if(w)return p;var _=b[a],T=p[_]||{hasStack:!1,stackGroups:{}};if(Aa(j)){var C=T.stackGroups[j]||{numericAxisId:a,cateAxisId:i,items:[]};C.items.push(g),T.hasStack=!0,T.stackGroups[j]=C}else T.stackGroups[Lf("_stackId_")]={numericAxisId:a,cateAxisId:i,items:[g]};return ra(ra({},p),{},Um({},_,T))},c),f={};return Object.keys(u).reduce(function(p,g){var x=u[g];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(j,w){var _=x.stackGroups[w];return ra(ra({},j),{},Um({},w,{numericAxisId:a,cateAxisId:i,items:_.items,stackedData:hSe(e,_.items,s)}))},b)}return ra(ra({},p),{},Um({},g,x))},f)},FV=function(e,n){var a=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=a||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var f=TNe(u,s,l);return e.domain([TS(f),sd(f)]),{niceTicks:f}}if(s&&i==="number"){var p=e.domain(),g=kNe(p,s,l);return{niceTicks:g}}return null};function iN(t){var e=t.axis,n=t.ticks,a=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!dn(i[e.dataKey])){var l=Mw(n,"value",i[e.dataKey]);if(l)return l.coordinate+a/2}return n[s]?n[s].coordinate+a/2:null}var c=fa(i,dn(o)?e.dataKey:o);return dn(c)?null:e.scale(c)}var d$=function(e){var n=e.axis,a=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return a[l]?a[l].coordinate+i:null;var c=fa(o,n.dataKey,n.domain[l]);return dn(c)?null:n.scale(c)-s/2+i},pSe=function(e){var n=e.numericAxis,a=n.scale.domain();if(n.type==="number"){var i=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);return i<=0&&s>=0?0:s<0?s:i}return a[0]},mSe=function(e,n){var a,i=(a=e.type)!==null&&a!==void 0&&a.defaultProps?ra(ra({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Aa(s)){var o=n[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},gSe=function(e){return e.reduce(function(n,a){return[TS(a.concat([n[0]]).filter(Nt)),sd(a.concat([n[1]]).filter(Nt))]},[1/0,-1/0])},$V=function(e,n,a){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(u,f){var p=gSe(f.slice(n,a+1));return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},h$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FP=function(e,n,a){if(an(e))return e(n,a);if(!Array.isArray(e))return n;var i=[];if(Nt(e[0]))i[0]=a?e[0]:Math.min(e[0],n[0]);else if(h$.test(e[0])){var s=+h$.exec(e[0])[1];i[0]=n[0]-s}else an(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Nt(e[1]))i[1]=a?e[1]:Math.max(e[1],n[1]);else if(f$.test(e[1])){var o=+f$.exec(e[1])[1];i[1]=n[1]+o}else an(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},sN=function(e,n,a){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!a||i>0)return i}if(e&&n&&n.length>=2){for(var s=ZO(n,function(p){return p.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],f=s[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},p$=function(e,n,a){return!e||!e.length||Ef(e,Ls(a,"type.defaultProps.domain"))?n:e},zV=function(e,n){var a=e.type.defaultProps?ra(ra({},e.type.defaultProps),e.props):e.props,i=a.dataKey,s=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,u=a.chartType,f=a.hide;return ra(ra({},Bt(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:_M(e),value:fa(n,i),type:c,payload:n,chartType:u,hide:f})};function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}function m$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function bc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(n),!0).forEach(function(a){BV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function BV(t,e,n){return e=ySe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ySe(t){var e=xSe(t,"string");return tb(e)=="symbol"?e:e+""}function xSe(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(tb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vSe(t,e){return NSe(t)||wSe(t,e)||jSe(t,e)||bSe()}function bSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jSe(t,e){if(t){if(typeof t=="string")return g$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g$(t,e)}}function g$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function wSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function NSe(t){if(Array.isArray(t))return t}var oN=Math.PI/180,SSe=function(e){return e*180/Math.PI},Lr=function(e,n,a,i){return{x:e+Math.cos(-oN*i)*a,y:n+Math.sin(-oN*i)*a}},qV=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},_Se=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,f=Fi(e.cx,o,o/2),p=Fi(e.cy,l,l/2),g=qV(o,l,a),x=Fi(e.innerRadius,g,0),b=Fi(e.outerRadius,g,g*.8),j=Object.keys(n);return j.reduce(function(w,_){var T=n[_],C=T.domain,A=T.reversed,k;if(dn(T.range))i==="angleAxis"?k=[c,u]:i==="radiusAxis"&&(k=[x,b]),A&&(k=[k[1],k[0]]);else{k=T.range;var P=k,I=vSe(P,2);c=I[0],u=I[1]}var R=RV(T,s),q=R.realScaleType,U=R.scale;U.domain(C).range(k),LV(U);var F=FV(U,bc(bc({},T),{},{realScaleType:q})),B=bc(bc(bc({},T),F),{},{range:k,radius:b,realScaleType:q,scale:U,cx:f,cy:p,innerRadius:x,outerRadius:b,startAngle:c,endAngle:u});return bc(bc({},w),{},BV({},_,B))},{})},CSe=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(a-s,2)+Math.pow(i-o,2))},TSe=function(e,n){var a=e.x,i=e.y,s=n.cx,o=n.cy,l=CSe({x:a,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(a-s)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:SSe(u),angleInRadian:u}},kSe=function(e){var n=e.startAngle,a=e.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:a-o*360}},ASe=function(e,n){var a=n.startAngle,i=n.endAngle,s=Math.floor(a/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},y$=function(e,n){var a=e.x,i=e.y,s=TSe({x:a,y:i},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=kSe(n),p=f.startAngle,g=f.endAngle,x=l,b;if(p<=g){for(;x>g;)x-=360;for(;x<p;)x+=360;b=x>=p&&x<=g}else{for(;x>p;)x-=360;for(;x<g;)x+=360;b=x>=g&&x<=p}return b?bc(bc({},n),{},{radius:o,angle:ASe(x,n)}):null},UV=function(e){return!v.isValidElement(e)&&!an(e)&&typeof e!="boolean"?e.className:""};function nb(t){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(t)}var ESe=["offset"];function PSe(t){return ISe(t)||MSe(t)||OSe(t)||DSe()}function DSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OSe(t,e){if(t){if(typeof t=="string")return $P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $P(t,e)}}function MSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ISe(t){if(Array.isArray(t))return $P(t)}function $P(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function RSe(t,e){if(t==null)return{};var n=LSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function LSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function x$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ca(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(n),!0).forEach(function(a){FSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function FSe(t,e,n){return e=$Se(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Se(t){var e=zSe(t,"string");return nb(e)=="symbol"?e:e+""}function zSe(t,e){if(nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(nb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rb(){return rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rb.apply(this,arguments)}var BSe=function(e){var n=e.value,a=e.formatter,i=dn(e.children)?n:e.children;return an(a)?a(i):i},qSe=function(e,n){var a=Li(n-e),i=Math.min(Math.abs(n-e),360);return a*i},USe=function(e,n,a){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,u=c.cx,f=c.cy,p=c.innerRadius,g=c.outerRadius,x=c.startAngle,b=c.endAngle,j=c.clockWise,w=(p+g)/2,_=qSe(x,b),T=_>=0?1:-1,C,A;i==="insideStart"?(C=x+T*o,A=j):i==="insideEnd"?(C=b-T*o,A=!j):i==="end"&&(C=b+T*o,A=j),A=_<=0?A:!A;var k=Lr(u,f,w,C),P=Lr(u,f,w,C+(A?1:-1)*359),I="M".concat(k.x,",").concat(k.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(A?0:1,`,
    `).concat(P.x,",").concat(P.y),R=dn(e.id)?Lf("recharts-radial-line-"):e.id;return Ce.createElement("text",rb({},a,{dominantBaseline:"central",className:fn("recharts-radial-bar-label",l)}),Ce.createElement("defs",null,Ce.createElement("path",{id:R,d:I})),Ce.createElement("textPath",{xlinkHref:"#".concat(R)},n))},VSe=function(e){var n=e.viewBox,a=e.offset,i=e.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,f=s.startAngle,p=s.endAngle,g=(f+p)/2;if(i==="outside"){var x=Lr(o,l,u+a,g),b=x.x,j=x.y;return{x:b,y:j,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var w=(c+u)/2,_=Lr(o,l,w,g),T=_.x,C=_.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},HSe=function(e){var n=e.viewBox,a=e.parentViewBox,i=e.offset,s=e.position,o=n,l=o.x,c=o.y,u=o.width,f=o.height,p=f>=0?1:-1,g=p*i,x=p>0?"end":"start",b=p>0?"start":"end",j=u>=0?1:-1,w=j*i,_=j>0?"end":"start",T=j>0?"start":"end";if(s==="top"){var C={x:l+u/2,y:c-p*i,textAnchor:"middle",verticalAnchor:x};return Ca(Ca({},C),a?{height:Math.max(c-a.y,0),width:u}:{})}if(s==="bottom"){var A={x:l+u/2,y:c+f+g,textAnchor:"middle",verticalAnchor:b};return Ca(Ca({},A),a?{height:Math.max(a.y+a.height-(c+f),0),width:u}:{})}if(s==="left"){var k={x:l-w,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return Ca(Ca({},k),a?{width:Math.max(k.x-a.x,0),height:f}:{})}if(s==="right"){var P={x:l+u+w,y:c+f/2,textAnchor:T,verticalAnchor:"middle"};return Ca(Ca({},P),a?{width:Math.max(a.x+a.width-P.x,0),height:f}:{})}var I=a?{width:u,height:f}:{};return s==="insideLeft"?Ca({x:l+w,y:c+f/2,textAnchor:T,verticalAnchor:"middle"},I):s==="insideRight"?Ca({x:l+u-w,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},I):s==="insideTop"?Ca({x:l+u/2,y:c+g,textAnchor:"middle",verticalAnchor:b},I):s==="insideBottom"?Ca({x:l+u/2,y:c+f-g,textAnchor:"middle",verticalAnchor:x},I):s==="insideTopLeft"?Ca({x:l+w,y:c+g,textAnchor:T,verticalAnchor:b},I):s==="insideTopRight"?Ca({x:l+u-w,y:c+g,textAnchor:_,verticalAnchor:b},I):s==="insideBottomLeft"?Ca({x:l+w,y:c+f-g,textAnchor:T,verticalAnchor:x},I):s==="insideBottomRight"?Ca({x:l+u-w,y:c+f-g,textAnchor:_,verticalAnchor:x},I):Gg(s)&&(Nt(s.x)||ef(s.x))&&(Nt(s.y)||ef(s.y))?Ca({x:l+Fi(s.x,u),y:c+Fi(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):Ca({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},GSe=function(e){return"cx"in e&&Nt(e.cx)};function La(t){var e=t.offset,n=e===void 0?5:e,a=RSe(t,ESe),i=Ca({offset:n},a),s=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,f=i.className,p=f===void 0?"":f,g=i.textBreakAll;if(!s||dn(l)&&dn(c)&&!v.isValidElement(u)&&!an(u))return null;if(v.isValidElement(u))return v.cloneElement(u,i);var x;if(an(u)){if(x=v.createElement(u,i),v.isValidElement(x))return x}else x=BSe(i);var b=GSe(s),j=Bt(i,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return USe(i,x,j);var w=b?VSe(i):HSe(i);return Ce.createElement(Af,rb({className:fn("recharts-label",p)},j,w,{breakAll:g}),x)}La.displayName="Label";var VV=function(e){var n=e.cx,a=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,f=e.outerRadius,p=e.x,g=e.y,x=e.top,b=e.left,j=e.width,w=e.height,_=e.clockWise,T=e.labelViewBox;if(T)return T;if(Nt(j)&&Nt(w)){if(Nt(p)&&Nt(g))return{x:p,y:g,width:j,height:w};if(Nt(x)&&Nt(b))return{x,y:b,width:j,height:w}}return Nt(p)&&Nt(g)?{x:p,y:g,width:0,height:0}:Nt(n)&&Nt(a)?{cx:n,cy:a,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:_}:e.viewBox?e.viewBox:{}},WSe=function(e,n){return e?e===!0?Ce.createElement(La,{key:"label-implicit",viewBox:n}):Aa(e)?Ce.createElement(La,{key:"label-implicit",viewBox:n,value:e}):v.isValidElement(e)?e.type===La?v.cloneElement(e,{key:"label-implicit",viewBox:n}):Ce.createElement(La,{key:"label-implicit",content:e,viewBox:n}):an(e)?Ce.createElement(La,{key:"label-implicit",content:e,viewBox:n}):Gg(e)?Ce.createElement(La,rb({viewBox:n},e,{key:"label-implicit"})):null:null},YSe=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var i=e.children,s=VV(e),o=Fs(i,La).map(function(c,u){return v.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!a)return o;var l=WSe(e.label,n||s);return[l].concat(PSe(o))};La.parseViewBox=VV;La.renderCallByParent=YSe;var oA,v$;function KSe(){if(v$)return oA;v$=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return oA=t,oA}var QSe=KSe();const XSe=Hn(QSe);function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}var JSe=["valueAccessor"],ZSe=["data","dataKey","clockWise","id","textBreakAll"];function e_e(t){return a_e(t)||r_e(t)||n_e(t)||t_e()}function t_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n_e(t,e){if(t){if(typeof t=="string")return zP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zP(t,e)}}function r_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function a_e(t){if(Array.isArray(t))return zP(t)}function zP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function lN(){return lN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},lN.apply(this,arguments)}function b$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function j$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b$(Object(n),!0).forEach(function(a){i_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function i_e(t,e,n){return e=s_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s_e(t){var e=o_e(t,"string");return ab(e)=="symbol"?e:e+""}function o_e(t,e){if(ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ab(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w$(t,e){if(t==null)return{};var n=l_e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function l_e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var c_e=function(e){return Array.isArray(e.value)?XSe(e.value):e.value};function Ll(t){var e=t.valueAccessor,n=e===void 0?c_e:e,a=w$(t,JSe),i=a.data,s=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,u=w$(a,ZSe);return!i||!i.length?null:Ce.createElement(In,{className:"recharts-label-list"},i.map(function(f,p){var g=dn(s)?n(f,p):fa(f&&f.payload,s),x=dn(l)?{}:{id:"".concat(l,"-").concat(p)};return Ce.createElement(La,lN({},Bt(f,!0),u,x,{parentViewBox:f.parentViewBox,value:g,textBreakAll:c,viewBox:La.parseViewBox(dn(o)?f:j$(j$({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Ll.displayName="LabelList";function u_e(t,e){return t?t===!0?Ce.createElement(Ll,{key:"labelList-implicit",data:e}):Ce.isValidElement(t)||an(t)?Ce.createElement(Ll,{key:"labelList-implicit",data:e,content:t}):Gg(t)?Ce.createElement(Ll,lN({data:e},t,{key:"labelList-implicit"})):null:null}function d_e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=Fs(a,Ll).map(function(o,l){return v.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=u_e(t.label,e);return[s].concat(e_e(i))}Ll.renderCallByParent=d_e;function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},BP.apply(this,arguments)}function N$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function S$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N$(Object(n),!0).forEach(function(a){h_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function h_e(t,e,n){return e=f_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f_e(t){var e=p_e(t,"string");return ib(e)=="symbol"?e:e+""}function p_e(t,e){if(ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ib(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m_e=function(e,n){var a=Li(n-e),i=Math.min(Math.abs(n-e),359.999);return a*i},$j=function(e){var n=e.cx,a=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,f=c*(l?1:-1)+i,p=Math.asin(c/f)/oN,g=u?s:s+o*p,x=Lr(n,a,f,g),b=Lr(n,a,i,g),j=u?s-o*p:s,w=Lr(n,a,f*Math.cos(p*oN),j);return{center:x,circleTangency:b,lineTangency:w,theta:p}},HV=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=m_e(o,l),u=o+c,f=Lr(n,a,s,o),p=Lr(n,a,s,u),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var x=Lr(n,a,i,o),b=Lr(n,a,i,u);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(n,",").concat(a," Z");return g},g_e=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,f=e.endAngle,p=Li(f-u),g=$j({cx:n,cy:a,radius:s,angle:u,sign:p,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,b=g.lineTangency,j=g.theta,w=$j({cx:n,cy:a,radius:s,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:c}),_=w.circleTangency,T=w.lineTangency,C=w.theta,A=c?Math.abs(u-f):Math.abs(u-f)-j-C;if(A<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):HV({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:u,endAngle:f});var k="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(p<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var P=$j({cx:n,cy:a,radius:i,angle:u,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=P.circleTangency,R=P.lineTangency,q=P.theta,U=$j({cx:n,cy:a,radius:i,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),F=U.circleTangency,B=U.lineTangency,V=U.theta,W=c?Math.abs(u-f):Math.abs(u-f)-q-V;if(W<0&&o===0)return"".concat(k,"L").concat(n,",").concat(a,"Z");k+="L".concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(W>180),",").concat(+(p>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(R.x,",").concat(R.y,"Z")}else k+="L".concat(n,",").concat(a,"Z");return k},y_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},GV=function(e){var n=S$(S$({},y_e),e),a=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,g=n.className;if(o<s||f===p)return null;var x=fn("recharts-sector",g),b=o-s,j=Fi(l,b,0,!0),w;return j>0&&Math.abs(f-p)<360?w=g_e({cx:a,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,b/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:p}):w=HV({cx:a,cy:i,innerRadius:s,outerRadius:o,startAngle:f,endAngle:p}),Ce.createElement("path",BP({},Bt(n,!0),{className:x,d:w,role:"img"}))};function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}function qP(){return qP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},qP.apply(this,arguments)}function _$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function C$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(n),!0).forEach(function(a){x_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function x_e(t,e,n){return e=v_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v_e(t){var e=b_e(t,"string");return sb(e)=="symbol"?e:e+""}function b_e(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(sb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T$={curveBasisClosed:Vxe,curveBasisOpen:Hxe,curveBasis:Uxe,curveBumpX:Axe,curveBumpY:Exe,curveLinearClosed:Gxe,curveLinear:mS,curveMonotoneX:Wxe,curveMonotoneY:Yxe,curveNatural:Kxe,curveStep:Qxe,curveStepAfter:Jxe,curveStepBefore:Xxe},zj=function(e){return e.x===+e.x&&e.y===+e.y},iv=function(e){return e.x},sv=function(e){return e.y},j_e=function(e,n){if(an(e))return e;var a="curve".concat(fS(e));return(a==="curveMonotone"||a==="curveBump")&&n?T$["".concat(a).concat(n==="vertical"?"Y":"X")]:T$[a]||mS},w_e=function(e){var n=e.type,a=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,f=j_e(a,l),p=u?s.filter(function(j){return zj(j)}):s,g;if(Array.isArray(o)){var x=u?o.filter(function(j){return zj(j)}):o,b=p.map(function(j,w){return C$(C$({},j),{},{base:x[w]})});return l==="vertical"?g=Pj().y(sv).x1(iv).x0(function(j){return j.base.x}):g=Pj().x(iv).y1(sv).y0(function(j){return j.base.y}),g.defined(zj).curve(f),g(b)}return l==="vertical"&&Nt(o)?g=Pj().y(sv).x1(iv).x0(o):Nt(o)?g=Pj().x(iv).y1(sv).y0(o):g=HU().x(iv).y(sv),g.defined(zj).curve(f),g(p)},yf=function(e){var n=e.className,a=e.points,i=e.path,s=e.pathRef;if((!a||!a.length)&&!i)return null;var o=a&&a.length?w_e(e):i;return v.createElement("path",qP({},Bt(e,!1),Iw(e),{className:fn("recharts-curve",n),d:o,ref:s}))},lA={exports:{}},cA,k$;function N_e(){if(k$)return cA;k$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return cA=t,cA}var uA,A$;function S_e(){if(A$)return uA;A$=1;var t=N_e();function e(){}function n(){}return n.resetWarningCache=e,uA=function(){function a(o,l,c,u,f,p){if(p!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}a.isRequired=a;function i(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},uA}var E$;function __e(){return E$||(E$=1,lA.exports=S_e()()),lA.exports}var C_e=__e();const hr=Hn(C_e);var T_e=Object.getOwnPropertyNames,k_e=Object.getOwnPropertySymbols,A_e=Object.prototype.hasOwnProperty;function P$(t,e){return function(a,i,s){return t(a,i,s)&&e(a,i,s)}}function Bj(t){return function(n,a,i){if(!n||!a||typeof n!="object"||typeof a!="object")return t(n,a,i);var s=i.cache,o=s.get(n),l=s.get(a);if(o&&l)return o===a&&l===n;s.set(n,a),s.set(a,n);var c=t(n,a,i);return s.delete(n),s.delete(a),c}}function D$(t){return T_e(t).concat(k_e(t))}var E_e=Object.hasOwn||function(t,e){return A_e.call(t,e)};function zf(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var P_e="__v",D_e="__o",O_e="_owner",O$=Object.getOwnPropertyDescriptor,M$=Object.keys;function M_e(t,e,n){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!n.equals(t[a],e[a],a,a,t,e,n))return!1;return!0}function I_e(t,e){return zf(t.getTime(),e.getTime())}function R_e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function L_e(t,e){return t===e}function I$(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=e.entries(),f=!1,p=0;(l=u.next())&&!l.done;){if(i[p]){p++;continue}var g=o.value,x=l.value;if(n.equals(g[0],x[0],c,p,t,e,n)&&n.equals(g[1],x[1],g[0],x[0],t,e,n)){f=i[p]=!0;break}p++}if(!f)return!1;c++}return!0}var F_e=zf;function $_e(t,e,n){var a=M$(t),i=a.length;if(M$(e).length!==i)return!1;for(;i-- >0;)if(!WV(t,e,n,a[i]))return!1;return!0}function ov(t,e,n){var a=D$(t),i=a.length;if(D$(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=a[i],!WV(t,e,n,s)||(o=O$(t,s),l=O$(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function z_e(t,e){return zf(t.valueOf(),e.valueOf())}function B_e(t,e){return t.source===e.source&&t.flags===e.flags}function R$(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!i[f]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){u=i[f]=!0;break}f++}if(!u)return!1}return!0}function q_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function U_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function WV(t,e,n,a){return(a===O_e||a===D_e||a===P_e)&&(t.$$typeof||e.$$typeof)?!0:E_e(e,a)&&n.equals(t[a],e[a],a,a,t,e,n)}var V_e="[object Arguments]",H_e="[object Boolean]",G_e="[object Date]",W_e="[object Error]",Y_e="[object Map]",K_e="[object Number]",Q_e="[object Object]",X_e="[object RegExp]",J_e="[object Set]",Z_e="[object String]",eCe="[object URL]",tCe=Array.isArray,L$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,F$=Object.assign,nCe=Object.prototype.toString.call.bind(Object.prototype.toString);function rCe(t){var e=t.areArraysEqual,n=t.areDatesEqual,a=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,f=t.areSetsEqual,p=t.areTypedArraysEqual,g=t.areUrlsEqual;return function(b,j,w){if(b===j)return!0;if(b==null||j==null)return!1;var _=typeof b;if(_!==typeof j)return!1;if(_!=="object")return _==="number"?o(b,j,w):_==="function"?i(b,j,w):!1;var T=b.constructor;if(T!==j.constructor)return!1;if(T===Object)return l(b,j,w);if(tCe(b))return e(b,j,w);if(L$!=null&&L$(b))return p(b,j,w);if(T===Date)return n(b,j,w);if(T===RegExp)return u(b,j,w);if(T===Map)return s(b,j,w);if(T===Set)return f(b,j,w);var C=nCe(b);return C===G_e?n(b,j,w):C===X_e?u(b,j,w):C===Y_e?s(b,j,w):C===J_e?f(b,j,w):C===Q_e?typeof b.then!="function"&&typeof j.then!="function"&&l(b,j,w):C===eCe?g(b,j,w):C===W_e?a(b,j,w):C===V_e?l(b,j,w):C===H_e||C===K_e||C===Z_e?c(b,j,w):!1}}function aCe(t){var e=t.circular,n=t.createCustomConfig,a=t.strict,i={areArraysEqual:a?ov:M_e,areDatesEqual:I_e,areErrorsEqual:R_e,areFunctionsEqual:L_e,areMapsEqual:a?P$(I$,ov):I$,areNumbersEqual:F_e,areObjectsEqual:a?ov:$_e,arePrimitiveWrappersEqual:z_e,areRegExpsEqual:B_e,areSetsEqual:a?P$(R$,ov):R$,areTypedArraysEqual:a?ov:q_e,areUrlsEqual:U_e};if(n&&(i=F$({},i,n(i))),e){var s=Bj(i.areArraysEqual),o=Bj(i.areMapsEqual),l=Bj(i.areObjectsEqual),c=Bj(i.areSetsEqual);i=F$({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function iCe(t){return function(e,n,a,i,s,o,l){return t(e,n,l)}}function sCe(t){var e=t.circular,n=t.comparator,a=t.createState,i=t.equals,s=t.strict;if(a)return function(c,u){var f=a(),p=f.cache,g=p===void 0?e?new WeakMap:void 0:p,x=f.meta;return n(c,u,{cache:g,equals:i,meta:x,strict:s})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var oCe=Td();Td({strict:!0});Td({circular:!0});Td({circular:!0,strict:!0});Td({createInternalComparator:function(){return zf}});Td({strict:!0,createInternalComparator:function(){return zf}});Td({circular:!0,createInternalComparator:function(){return zf}});Td({circular:!0,createInternalComparator:function(){return zf},strict:!0});function Td(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,a=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=aCe(t),c=rCe(l),u=a?a(c):iCe(c);return sCe({circular:n,comparator:c,createState:i,equals:u,strict:o})}function lCe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function $$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):lCe(i)};requestAnimationFrame(a)}function UP(t){"@babel/helpers - typeof";return UP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UP(t)}function cCe(t){return fCe(t)||hCe(t)||dCe(t)||uCe()}function uCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dCe(t,e){if(t){if(typeof t=="string")return z$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z$(t,e)}}function z$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function hCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fCe(t){if(Array.isArray(t))return t}function pCe(){var t={},e=function(){return null},n=!1,a=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=cCe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){$$(i.bind(null,u),c);return}i(c),$$(i.bind(null,u));return}UP(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,a(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function B$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function q$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(n),!0).forEach(function(a){YV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function YV(t,e,n){return e=mCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mCe(t){var e=gCe(t,"string");return ob(e)==="symbol"?e:String(e)}function gCe(t,e){if(ob(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ob(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yCe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(a,i){return a.filter(function(s){return i.includes(s)})})},xCe=function(e){return e},vCe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Tv=function(e,n){return Object.keys(n).reduce(function(a,i){return q$(q$({},a),{},YV({},i,e(i,n[i])))},{})},U$=function(e,n,a){return e.map(function(i){return"".concat(vCe(i)," ").concat(n,"ms ").concat(a)}).join(",")};function bCe(t,e){return NCe(t)||wCe(t,e)||KV(t,e)||jCe()}function jCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function NCe(t){if(Array.isArray(t))return t}function SCe(t){return TCe(t)||CCe(t)||KV(t)||_Ce()}function _Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KV(t,e){if(t){if(typeof t=="string")return VP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VP(t,e)}}function CCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TCe(t){if(Array.isArray(t))return VP(t)}function VP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var cN=1e-4,QV=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},XV=function(e,n){return e.map(function(a,i){return a*Math.pow(n,i)}).reduce(function(a,i){return a+i})},V$=function(e,n){return function(a){var i=QV(e,n);return XV(i,a)}},kCe=function(e,n){return function(a){var i=QV(e,n),s=[].concat(SCe(i.map(function(o,l){return o*l}).slice(1)),[0]);return XV(s,a)}},H$=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),f=bCe(u,4);i=f[0],s=f[1],o=f[2],l=f[3]}}}var p=V$(i,o),g=V$(s,l),x=kCe(i,o),b=function(_){return _>1?1:_<0?0:_},j=function(_){for(var T=_>1?1:_,C=T,A=0;A<8;++A){var k=p(C)-T,P=x(C);if(Math.abs(k-T)<cN||P<cN)return g(C);C=b(C-k/P)}return g(C)};return j.isStepper=!1,j},ACe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,a=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(f,p,g){var x=-(f-p)*a,b=g*s,j=g+(x-b)*l/1e3,w=g*l/1e3+f;return Math.abs(w-p)<cN&&Math.abs(j)<cN?[p,0]:[w,j]};return c.isStepper=!0,c.dt=l,c},ECe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return H$(i);case"spring":return ACe();default:if(i.split("(")[0]==="cubic-bezier")return H$(i)}return typeof i=="function"?i:null};function lb(t){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(t)}function G$(t){return OCe(t)||DCe(t)||JV(t)||PCe()}function PCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OCe(t){if(Array.isArray(t))return GP(t)}function W$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(n),!0).forEach(function(a){HP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function HP(t,e,n){return e=MCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MCe(t){var e=ICe(t,"string");return lb(e)==="symbol"?e:String(e)}function ICe(t,e){if(lb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(lb(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RCe(t,e){return $Ce(t)||FCe(t,e)||JV(t,e)||LCe()}function LCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JV(t,e){if(t){if(typeof t=="string")return GP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GP(t,e)}}function GP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function FCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function $Ce(t){if(Array.isArray(t))return t}var uN=function(e,n,a){return e+(n-e)*a},WP=function(e){var n=e.from,a=e.to;return n!==a},zCe=function t(e,n,a){var i=Tv(function(s,o){if(WP(o)){var l=e(o.from,o.to,o.velocity),c=RCe(l,2),u=c[0],f=c[1];return Ya(Ya({},o),{},{from:u,velocity:f})}return o},n);return a<1?Tv(function(s,o){return WP(o)?Ya(Ya({},o),{},{velocity:uN(o.velocity,i[s].velocity,a),from:uN(o.from,i[s].from,a)}):o},n):t(e,i,a-1)};const BCe=function(t,e,n,a,i){var s=yCe(t,e),o=s.reduce(function(w,_){return Ya(Ya({},w),{},HP({},_,[t[_],e[_]]))},{}),l=s.reduce(function(w,_){return Ya(Ya({},w),{},HP({},_,{from:t[_],velocity:0,to:e[_]}))},{}),c=-1,u,f,p=function(){return null},g=function(){return Tv(function(_,T){return T.from},l)},x=function(){return!Object.values(l).filter(WP).length},b=function(_){u||(u=_);var T=_-u,C=T/n.dt;l=zCe(n,l,C),i(Ya(Ya(Ya({},t),e),g())),u=_,x()||(c=requestAnimationFrame(p))},j=function(_){f||(f=_);var T=(_-f)/a,C=Tv(function(k,P){return uN.apply(void 0,G$(P).concat([n(T)]))},o);if(i(Ya(Ya(Ya({},t),e),C)),T<1)c=requestAnimationFrame(p);else{var A=Tv(function(k,P){return uN.apply(void 0,G$(P).concat([n(1)]))},o);i(Ya(Ya(Ya({},t),e),A))}};return p=n.isStepper?b:j,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}var qCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function UCe(t,e){if(t==null)return{};var n=VCe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function VCe(t,e){if(t==null)return{};var n={},a=Object.keys(t),i,s;for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function dA(t){return YCe(t)||WCe(t)||GCe(t)||HCe()}function HCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GCe(t,e){if(t){if(typeof t=="string")return YP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YP(t,e)}}function WCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function YCe(t){if(Array.isArray(t))return YP(t)}function YP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Mo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y$(Object(n),!0).forEach(function(a){vv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function vv(t,e,n){return e=ZV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QCe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,ZV(a.key),a)}}function XCe(t,e,n){return e&&QCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZV(t){var e=JCe(t,"string");return vg(e)==="symbol"?e:String(e)}function JCe(t,e){if(vg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(vg(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KP(t,e)}function KP(t,e){return KP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},KP(t,e)}function e2e(t){var e=t2e();return function(){var a=dN(t),i;if(e){var s=dN(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return QP(this,i)}}function QP(t,e){if(e&&(vg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XP(t)}function XP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dN(t){return dN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dN(t)}var Uo=function(t){ZCe(n,t);var e=e2e(n);function n(a,i){var s;KCe(this,n),s=e.call(this,a,i);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,p=o.steps,g=o.children,x=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(XP(s)),s.changeStyle=s.changeStyle.bind(XP(s)),!l||x<=0)return s.state={style:{}},typeof g=="function"&&(s.state={style:f}),QP(s);if(p&&p.length)s.state={style:p[0].style};else if(u){if(typeof g=="function")return s.state={style:u},QP(s);s.state={style:c?vv({},c,u):u}}else s.state={style:{}};return s}return XCe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,f=s.to,p=s.from,g=this.state.style;if(l){if(!o){var x={style:c?vv({},c,f):f};this.state&&g&&(c&&g[c]!==f||!c&&g!==f)&&this.setState(x);return}if(!(oCe(i.to,f)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=b||u?p:i.to;if(this.state&&g){var w={style:c?vv({},c,j):j};(c&&g[c]!==j||!c&&g!==j)&&this.setState(w)}this.runAnimation(Mo(Mo({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,u=i.easing,f=i.begin,p=i.onAnimationEnd,g=i.onAnimationStart,x=BCe(o,l,ECe(u),c,this.changeStyle),b=function(){s.stopJSAnimation=x()};this.manager.start([g,f,b,c,p])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],f=u.style,p=u.duration,g=p===void 0?0:p,x=function(j,w,_){if(_===0)return j;var T=w.duration,C=w.easing,A=C===void 0?"ease":C,k=w.style,P=w.properties,I=w.onAnimationEnd,R=_>0?o[_-1]:w,q=P||Object.keys(k);if(typeof A=="function"||A==="spring")return[].concat(dA(j),[s.runJSAnimation.bind(s,{from:R.style,to:k,duration:T,easing:A}),T]);var U=U$(q,T,A),F=Mo(Mo(Mo({},R.style),k),{},{transition:U});return[].concat(dA(j),[F,T,I]).filter(xCe)};return this.manager.start([c].concat(dA(o.reduce(x,[f,Math.max(g,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=pCe());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,f=i.onAnimationStart,p=i.onAnimationEnd,g=i.steps,x=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var j=l?vv({},l,c):c,w=U$(Object.keys(j),o,u);b.start([f,s,Mo(Mo({},j),{},{transition:w}),o,p])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=UCe(i,qCe),u=v.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||u===0||o<=0)return s;var p=function(x){var b=x.props,j=b.style,w=j===void 0?{}:j,_=b.className,T=v.cloneElement(x,Mo(Mo({},c),{},{style:Mo(Mo({},w),f),className:_}));return T};return u===1?p(v.Children.only(s)):Ce.createElement("div",null,v.Children.map(s,function(g){return p(g)}))}}]),n}(v.PureComponent);Uo.displayName="Animate";Uo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Uo.propTypes={from:hr.oneOfType([hr.object,hr.string]),to:hr.oneOfType([hr.object,hr.string]),attributeName:hr.string,duration:hr.number,begin:hr.number,easing:hr.oneOfType([hr.string,hr.func]),steps:hr.arrayOf(hr.shape({duration:hr.number.isRequired,style:hr.object.isRequired,easing:hr.oneOfType([hr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),hr.func]),properties:hr.arrayOf("string"),onAnimationEnd:hr.func})),children:hr.oneOfType([hr.node,hr.func]),isActive:hr.bool,canBegin:hr.bool,onAnimationEnd:hr.func,shouldReAnimate:hr.bool,onAnimationStart:hr.func,onAnimationReStart:hr.func};function cb(t){"@babel/helpers - typeof";return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cb(t)}function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},hN.apply(this,arguments)}function n2e(t,e){return s2e(t)||i2e(t,e)||a2e(t,e)||r2e()}function r2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a2e(t,e){if(t){if(typeof t=="string")return K$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K$(t,e)}}function K$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function i2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function s2e(t){if(Array.isArray(t))return t}function Q$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function X$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q$(Object(n),!0).forEach(function(a){o2e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function o2e(t,e,n){return e=l2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l2e(t){var e=c2e(t,"string");return cb(e)=="symbol"?e:e+""}function c2e(t,e){if(cb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(cb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var J$=function(e,n,a,i,s){var o=Math.min(Math.abs(a)/2,Math.abs(i)/2),l=i>=0?1:-1,c=a>=0?1:-1,u=i>=0&&a>=0||i<0&&a<0?1:0,f;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=s[g]>o?o:s[g];f="M".concat(e,",").concat(n+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(u,",").concat(e+c*p[0],",").concat(n)),f+="L ".concat(e+a-c*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(u,`,
        `).concat(e+a,",").concat(n+l*p[1])),f+="L ".concat(e+a,",").concat(n+i-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(u,`,
        `).concat(e+a-c*p[2],",").concat(n+i)),f+="L ".concat(e+c*p[3],",").concat(n+i),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-l*p[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var b=Math.min(o,s);f="M ".concat(e,",").concat(n+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+c*b,",").concat(n,`
            L `).concat(e+a-c*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+a,",").concat(n+l*b,`
            L `).concat(e+a,",").concat(n+i-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+a-c*b,",").concat(n+i,`
            L `).concat(e+c*b,",").concat(n+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e,",").concat(n+i-l*b," Z")}else f="M ".concat(e,",").concat(n," h ").concat(a," v ").concat(i," h ").concat(-a," Z");return f},u2e=function(e,n){if(!e||!n)return!1;var a=e.x,i=e.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),f=Math.max(s,s+l),p=Math.min(o,o+c),g=Math.max(o,o+c);return a>=u&&a<=f&&i>=p&&i<=g}return!1},d2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CM=function(e){var n=X$(X$({},d2e),e),a=v.useRef(),i=v.useState(-1),s=n2e(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var A=a.current.getTotalLength();A&&l(A)}catch{}},[]);var c=n.x,u=n.y,f=n.width,p=n.height,g=n.radius,x=n.className,b=n.animationEasing,j=n.animationDuration,w=n.animationBegin,_=n.isAnimationActive,T=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||p!==+p||f===0||p===0)return null;var C=fn("recharts-rectangle",x);return T?Ce.createElement(Uo,{canBegin:o>0,from:{width:f,height:p,x:c,y:u},to:{width:f,height:p,x:c,y:u},duration:j,animationEasing:b,isActive:T},function(A){var k=A.width,P=A.height,I=A.x,R=A.y;return Ce.createElement(Uo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:j,isActive:_,easing:b},Ce.createElement("path",hN({},Bt(n,!0),{className:C,d:J$(I,R,k,P,g),ref:a})))}):Ce.createElement("path",hN({},Bt(n,!0),{className:C,d:J$(c,u,f,p,g)}))},h2e=["points","className","baseLinePoints","connectNulls"];function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Om.apply(this,arguments)}function f2e(t,e){if(t==null)return{};var n=p2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function p2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Z$(t){return x2e(t)||y2e(t)||g2e(t)||m2e()}function m2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g2e(t,e){if(t){if(typeof t=="string")return JP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JP(t,e)}}function y2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function x2e(t){if(Array.isArray(t))return JP(t)}function JP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var e8=function(e){return e&&e.x===+e.x&&e.y===+e.y},v2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(a){e8(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),e8(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},kv=function(e,n){var a=v2e(e);n&&(a=[a.reduce(function(s,o){return[].concat(Z$(s),Z$(o))},[])]);var i=a.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(i,"Z"):i},b2e=function(e,n,a){var i=kv(e,a);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(kv(n.reverse(),a).slice(1))},j2e=function(e){var n=e.points,a=e.className,i=e.baseLinePoints,s=e.connectNulls,o=f2e(e,h2e);if(!n||!n.length)return null;var l=fn("recharts-polygon",a);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=b2e(n,i,s);return Ce.createElement("g",{className:l},Ce.createElement("path",Om({},Bt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?Ce.createElement("path",Om({},Bt(o,!0),{fill:"none",d:kv(n,s)})):null,c?Ce.createElement("path",Om({},Bt(o,!0),{fill:"none",d:kv(i,s)})):null)}var f=kv(n,s);return Ce.createElement("path",Om({},Bt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function ZP(){return ZP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ZP.apply(this,arguments)}var Yb=function(e){var n=e.cx,a=e.cy,i=e.r,s=e.className,o=fn("recharts-dot",s);return n===+n&&a===+a&&i===+i?v.createElement("circle",ZP({},Bt(e,!1),Iw(e),{className:o,cx:n,cy:a,r:i})):null};function ub(t){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(t)}var w2e=["x","y","top","left","width","height","className"];function eD(){return eD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},eD.apply(this,arguments)}function t8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function N2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t8(Object(n),!0).forEach(function(a){S2e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function S2e(t,e,n){return e=_2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _2e(t){var e=C2e(t,"string");return ub(e)=="symbol"?e:e+""}function C2e(t,e){if(ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ub(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T2e(t,e){if(t==null)return{};var n=k2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function k2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var A2e=function(e,n,a,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(a)},E2e=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,f=e.width,p=f===void 0?0:f,g=e.height,x=g===void 0?0:g,b=e.className,j=T2e(e,w2e),w=N2e({x:a,y:s,top:l,left:u,width:p,height:x},j);return!Nt(a)||!Nt(s)||!Nt(p)||!Nt(x)||!Nt(l)||!Nt(u)?null:Ce.createElement("path",eD({},Bt(w,!0),{className:fn("recharts-cross",b),d:A2e(a,s,p,x,l,u)}))},hA,n8;function P2e(){if(n8)return hA;n8=1;var t=CS(),e=pV(),n=Ul();function a(i,s){return i&&i.length?t(i,n(s,2),e):void 0}return hA=a,hA}var D2e=P2e();const O2e=Hn(D2e);var fA,r8;function M2e(){if(r8)return fA;r8=1;var t=CS(),e=Ul(),n=mV();function a(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return fA=a,fA}var I2e=M2e();const R2e=Hn(I2e);var L2e=["cx","cy","angle","ticks","axisLine"],F2e=["ticks","tick","angle","tickFormatter","stroke"];function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function Av(){return Av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Av.apply(this,arguments)}function a8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Vh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a8(Object(n),!0).forEach(function(a){ES(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function i8(t,e){if(t==null)return{};var n=$2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function $2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function z2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,tH(a.key),a)}}function B2e(t,e,n){return e&&s8(t.prototype,e),n&&s8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function q2e(t,e,n){return e=fN(e),U2e(t,eH()?Reflect.construct(e,n||[],fN(t).constructor):e.apply(t,n))}function U2e(t,e){if(e&&(bg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V2e(t)}function V2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eH=function(){return!!t})()}function fN(t){return fN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fN(t)}function H2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tD(t,e)}function tD(t,e){return tD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},tD(t,e)}function ES(t,e,n){return e=tH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tH(t){var e=G2e(t,"string");return bg(e)=="symbol"?e:e+""}function G2e(t,e){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(bg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var PS=function(t){function e(){return z2e(this,e),q2e(this,e,arguments)}return H2e(e,t),B2e(e,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Lr(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=O2e(l,function(f){return f.coordinate||0}),u=R2e(l,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=a.axisLine,u=i8(a,L2e),f=l.reduce(function(b,j){return[Math.min(b[0],j.coordinate),Math.max(b[1],j.coordinate)]},[1/0,-1/0]),p=Lr(i,s,f[0],o),g=Lr(i,s,f[1],o),x=Vh(Vh(Vh({},Bt(u,!1)),{},{fill:"none"},Bt(c,!1)),{},{x1:p.x,y1:p.y,x2:g.x,y2:g.y});return Ce.createElement("line",Av({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,f=i8(i,F2e),p=this.getTickTextAnchor(),g=Bt(f,!1),x=Bt(o,!1),b=s.map(function(j,w){var _=a.getTickValueCoord(j),T=Vh(Vh(Vh(Vh({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},g),{},{stroke:"none",fill:u},x),{},{index:w},_),{},{payload:j});return Ce.createElement(In,Av({className:fn("recharts-polar-radius-axis-tick",UV(o)),key:"tick-".concat(j.coordinate)},kf(a.props,j,w)),e.renderTickItem(o,T,c?c(j.value,w):j.value))});return Ce.createElement(In,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:Ce.createElement(In,{className:fn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),La.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Ce.isValidElement(a)?o=Ce.cloneElement(a,i):an(a)?o=a(i):o=Ce.createElement(Af,Av({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(v.PureComponent);ES(PS,"displayName","PolarRadiusAxis");ES(PS,"axisType","radiusAxis");ES(PS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Xh.apply(this,arguments)}function o8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Hh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o8(Object(n),!0).forEach(function(a){DS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function W2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,rH(a.key),a)}}function Y2e(t,e,n){return e&&l8(t.prototype,e),n&&l8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K2e(t,e,n){return e=pN(e),Q2e(t,nH()?Reflect.construct(e,n||[],pN(t).constructor):e.apply(t,n))}function Q2e(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X2e(t)}function X2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nH=function(){return!!t})()}function pN(t){return pN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pN(t)}function J2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nD(t,e)}function nD(t,e){return nD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},nD(t,e)}function DS(t,e,n){return e=rH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rH(t){var e=Z2e(t,"string");return jg(e)=="symbol"?e:e+""}function Z2e(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(jg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var eTe=Math.PI/180,tTe=1e-5,OS=function(t){function e(){return W2e(this,e),K2e(this,e,arguments)}return J2e(e,t),Y2e(e,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,f=u||8,p=Lr(s,o,l,a.coordinate),g=Lr(s,o,l+(c==="inner"?-1:1)*f,a.coordinate);return{x1:p.x,y1:p.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*eTe),o;return s>tTe?o=i==="outer"?"start":"end":s<-1e-5?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,l=a.axisLine,c=a.axisLineType,u=Hh(Hh({},Bt(this.props,!1)),{},{fill:"none"},Bt(l,!1));if(c==="circle")return Ce.createElement(Yb,Xh({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var f=this.props.ticks,p=f.map(function(g){return Lr(i,s,o,g.coordinate)});return Ce.createElement(j2e,Xh({className:"recharts-polar-angle-axis-line"},u,{points:p}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,f=Bt(this.props,!1),p=Bt(o,!1),g=Hh(Hh({},f),{},{fill:"none"},Bt(l,!1)),x=s.map(function(b,j){var w=a.getTickLineCoord(b),_=a.getTickTextAnchor(b),T=Hh(Hh(Hh({textAnchor:_},f),{},{stroke:"none",fill:u},p),{},{index:j,payload:b,x:w.x2,y:w.y2});return Ce.createElement(In,Xh({className:fn("recharts-polar-angle-axis-tick",UV(o)),key:"tick-".concat(b.coordinate)},kf(a.props,b,j)),l&&Ce.createElement("line",Xh({className:"recharts-polar-angle-axis-tick-line"},g,w)),o&&e.renderTickItem(o,T,c?c(b.value,j):b.value))});return Ce.createElement(In,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:Ce.createElement(In,{className:fn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Ce.isValidElement(a)?o=Ce.cloneElement(a,i):an(a)?o=a(i):o=Ce.createElement(Af,Xh({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(v.PureComponent);DS(OS,"displayName","PolarAngleAxis");DS(OS,"axisType","angleAxis");DS(OS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var pA,c8;function nTe(){if(c8)return pA;c8=1;var t=p7(),e=t(Object.getPrototypeOf,Object);return pA=e,pA}var mA,u8;function rTe(){if(u8)return mA;u8=1;var t=Gc(),e=nTe(),n=Wc(),a="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function u(f){if(!n(f)||t(f)!=a)return!1;var p=e(f);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==c}return mA=u,mA}var aTe=rTe();const iTe=Hn(aTe);var gA,d8;function sTe(){if(d8)return gA;d8=1;var t=Gc(),e=Wc(),n="[object Boolean]";function a(i){return i===!0||i===!1||e(i)&&t(i)==n}return gA=a,gA}var oTe=sTe();const lTe=Hn(oTe);function db(t){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(t)}function mN(){return mN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},mN.apply(this,arguments)}function cTe(t,e){return fTe(t)||hTe(t,e)||dTe(t,e)||uTe()}function uTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dTe(t,e){if(t){if(typeof t=="string")return h8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h8(t,e)}}function h8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function hTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function fTe(t){if(Array.isArray(t))return t}function f8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function p8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f8(Object(n),!0).forEach(function(a){pTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function pTe(t,e,n){return e=mTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mTe(t){var e=gTe(t,"string");return db(e)=="symbol"?e:e+""}function gTe(t,e){if(db(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(db(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m8=function(e,n,a,i,s){var o=a-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+a,",").concat(n),l+="L ".concat(e+a-o/2,",").concat(n+s),l+="L ".concat(e+a-o/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},yTe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xTe=function(e){var n=p8(p8({},yTe),e),a=v.useRef(),i=v.useState(-1),s=cTe(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var C=a.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,u=n.y,f=n.upperWidth,p=n.lowerWidth,g=n.height,x=n.className,b=n.animationEasing,j=n.animationDuration,w=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||p!==+p||g!==+g||f===0&&p===0||g===0)return null;var T=fn("recharts-trapezoid",x);return _?Ce.createElement(Uo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:g,x:c,y:u},to:{upperWidth:f,lowerWidth:p,height:g,x:c,y:u},duration:j,animationEasing:b,isActive:_},function(C){var A=C.upperWidth,k=C.lowerWidth,P=C.height,I=C.x,R=C.y;return Ce.createElement(Uo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:j,easing:b},Ce.createElement("path",mN({},Bt(n,!0),{className:T,d:m8(I,R,A,k,P),ref:a})))}):Ce.createElement("g",null,Ce.createElement("path",mN({},Bt(n,!0),{className:T,d:m8(c,u,f,p,g)})))},vTe=["option","shapeType","propTransformer","activeClassName","isActive"];function hb(t){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hb(t)}function bTe(t,e){if(t==null)return{};var n=jTe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function jTe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function g8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function gN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g8(Object(n),!0).forEach(function(a){wTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function wTe(t,e,n){return e=NTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NTe(t){var e=STe(t,"string");return hb(e)=="symbol"?e:e+""}function STe(t,e){if(hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(hb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Te(t,e){return gN(gN({},e),t)}function CTe(t,e){return t==="symbols"}function y8(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Ce.createElement(CM,n);case"trapezoid":return Ce.createElement(xTe,n);case"sector":return Ce.createElement(GV,n);case"symbols":if(CTe(e))return Ce.createElement(HO,n);break;default:return null}}function TTe(t){return v.isValidElement(t)?t.props:t}function aH(t){var e=t.option,n=t.shapeType,a=t.propTransformer,i=a===void 0?_Te:a,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=bTe(t,vTe),u;if(v.isValidElement(e))u=v.cloneElement(e,gN(gN({},c),TTe(e)));else if(an(e))u=e(c);else if(iTe(e)&&!lTe(e)){var f=i(e,c);u=Ce.createElement(y8,{shapeType:n,elementProps:f})}else{var p=c;u=Ce.createElement(y8,{shapeType:n,elementProps:p})}return l?Ce.createElement(In,{className:o},u):u}function MS(t,e){return e!=null&&"trapezoids"in t.props}function IS(t,e){return e!=null&&"sectors"in t.props}function fb(t,e){return e!=null&&"points"in t.props}function kTe(t,e){var n,a,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.y)||t.y===e.y;return i&&s}function ATe(t,e){var n=t.endAngle===e.endAngle,a=t.startAngle===e.startAngle;return n&&a}function ETe(t,e){var n=t.x===e.x,a=t.y===e.y,i=t.z===e.z;return n&&a&&i}function PTe(t,e){var n;return MS(t,e)?n=kTe:IS(t,e)?n=ATe:fb(t,e)&&(n=ETe),n}function DTe(t,e){var n;return MS(t,e)?n="trapezoids":IS(t,e)?n="sectors":fb(t,e)&&(n="points"),n}function OTe(t,e){if(MS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(IS(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return fb(t,e)?e.payload:{}}function MTe(t){var e=t.activeTooltipItem,n=t.graphicalItem,a=t.itemData,i=DTe(n,e),s=OTe(n,e),o=a.filter(function(c,u){var f=Ef(s,c),p=n.props[i].filter(function(b){var j=PTe(n,e);return j(b,e)}),g=n.props[i].indexOf(p[p.length-1]),x=u===g;return f&&x}),l=a.indexOf(o[o.length-1]);return l}var cw;function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function Mm(){return Mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Mm.apply(this,arguments)}function x8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x8(Object(n),!0).forEach(function(a){ro(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ITe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,sH(a.key),a)}}function RTe(t,e,n){return e&&v8(t.prototype,e),n&&v8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function LTe(t,e,n){return e=yN(e),FTe(t,iH()?Reflect.construct(e,n||[],yN(t).constructor):e.apply(t,n))}function FTe(t,e){if(e&&(wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Te(t)}function $Te(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iH=function(){return!!t})()}function yN(t){return yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yN(t)}function zTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rD(t,e)}function rD(t,e){return rD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},rD(t,e)}function ro(t,e,n){return e=sH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sH(t){var e=BTe(t,"string");return wg(e)=="symbol"?e:e+""}function BTe(t,e){if(wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(wg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vl=function(t){function e(n){var a;return ITe(this,e),a=LTe(this,e,[n]),ro(a,"pieRef",null),ro(a,"sectorRefs",[]),ro(a,"id",Lf("recharts-pie-")),ro(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),an(i)&&i()}),ro(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),an(i)&&i()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return zTe(e,t),RTe(e,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,f=Bt(this.props,!1),p=Bt(o,!1),g=Bt(l,!1),x=o&&o.offsetRadius||20,b=a.map(function(j,w){var _=(j.startAngle+j.endAngle)/2,T=Lr(j.cx,j.cy,j.outerRadius+x,_),C=Ir(Ir(Ir(Ir({},f),j),{},{stroke:"none"},p),{},{index:w,textAnchor:e.getTextAnchor(T.x,j.cx)},T),A=Ir(Ir(Ir(Ir({},f),j),{},{fill:"none",stroke:j.fill},g),{},{index:w,points:[Lr(j.cx,j.cy,j.outerRadius,_),T]}),k=c;return dn(c)&&dn(u)?k="value":dn(c)&&(k=u),Ce.createElement(In,{key:"label-".concat(j.startAngle,"-").concat(j.endAngle,"-").concat(j.midAngle,"-").concat(w)},l&&e.renderLabelLineItem(l,A,"line"),e.renderLabelItem(o,C,fa(j,k)))});return Ce.createElement(In,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return a.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&a.length!==1)return null;var p=i.isActiveIndex(f),g=c&&i.hasActiveIndex()?c:null,x=p?o:g,b=Ir(Ir({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return Ce.createElement(In,Mm({ref:function(w){w&&!i.sectorRefs.includes(w)&&i.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},kf(i.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),Ce.createElement(aH,Mm({option:x,isActive:p,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,p=this.state,g=p.prevSectors,x=p.prevIsAnimationActive;return Ce.createElement(Uo,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var j=b.t,w=[],_=s&&s[0],T=_.startAngle;return s.forEach(function(C,A){var k=g&&g[A],P=A>0?Ls(C,"paddingAngle",0):0;if(k){var I=ka(k.endAngle-k.startAngle,C.endAngle-C.startAngle),R=Ir(Ir({},C),{},{startAngle:T+P,endAngle:T+I(j)+P});w.push(R),T=R.endAngle}else{var q=C.endAngle,U=C.startAngle,F=ka(0,q-U),B=F(j),V=Ir(Ir({},C),{},{startAngle:T+P,endAngle:T+B+P});w.push(V),T=V.endAngle}}),Ce.createElement(In,null,a.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!Ef(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,u=i.cx,f=i.cy,p=i.innerRadius,g=i.outerRadius,x=i.isAnimationActive,b=this.state.isAnimationFinished;if(s||!o||!o.length||!Nt(u)||!Nt(f)||!Nt(p)||!Nt(g))return null;var j=fn("recharts-pie",l);return Ce.createElement(In,{tabIndex:this.props.rootTabIndex,className:j,ref:function(_){a.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),La.renderCallByParent(this.props,null,!1),(!x||b)&&Ll.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i,s){if(Ce.isValidElement(a))return Ce.cloneElement(a,i);if(an(a))return a(i);var o=fn("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Ce.createElement(yf,Mm({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,i,s){if(Ce.isValidElement(a))return Ce.cloneElement(a,i);var o=s;if(an(a)&&(o=a(i),Ce.isValidElement(o)))return o;var l=fn("recharts-pie-label-text",typeof a!="boolean"&&!an(a)?a.className:"");return Ce.createElement(Af,Mm({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(v.PureComponent);cw=Vl;ro(Vl,"displayName","Pie");ro(Vl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Sd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ro(Vl,"parseDeltaAngle",function(t,e){var n=Li(e-t),a=Math.min(Math.abs(e-t),360);return n*a});ro(Vl,"getRealPieData",function(t){var e=t.data,n=t.children,a=Bt(t,!1),i=Fs(n,qb);return e&&e.length?e.map(function(s,o){return Ir(Ir(Ir({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return Ir(Ir({},a),s.props)}):[]});ro(Vl,"parseCoordinateOfPie",function(t,e){var n=e.top,a=e.left,i=e.width,s=e.height,o=qV(i,s),l=a+Fi(t.cx,i,i/2),c=n+Fi(t.cy,s,s/2),u=Fi(t.innerRadius,o,0),f=Fi(t.outerRadius,o,o*.8),p=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:p}});ro(Vl,"getComposedData",function(t){var e=t.item,n=t.offset,a=e.type.defaultProps!==void 0?Ir(Ir({},e.type.defaultProps),e.props):e.props,i=cw.getRealPieData(a);if(!i||!i.length)return null;var s=a.cornerRadius,o=a.startAngle,l=a.endAngle,c=a.paddingAngle,u=a.dataKey,f=a.nameKey,p=a.valueKey,g=a.tooltipType,x=Math.abs(a.minAngle),b=cw.parseCoordinateOfPie(a,n),j=cw.parseDeltaAngle(o,l),w=Math.abs(j),_=u;dn(u)&&dn(p)?(Bo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):dn(u)&&(Bo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=p);var T=i.filter(function(R){return fa(R,_,0)!==0}).length,C=(w>=360?T:T-1)*c,A=w-T*x-C,k=i.reduce(function(R,q){var U=fa(q,_,0);return R+(Nt(U)?U:0)},0),P;if(k>0){var I;P=i.map(function(R,q){var U=fa(R,_,0),F=fa(R,f,q),B=(Nt(U)?U:0)/k,V;q?V=I.endAngle+Li(j)*c*(U!==0?1:0):V=o;var W=V+Li(j)*((U!==0?x:0)+B*A),G=(V+W)/2,z=(b.innerRadius+b.outerRadius)/2,Y=[{name:F,value:U,payload:R,dataKey:_,type:g}],Q=Lr(b.cx,b.cy,z,G);return I=Ir(Ir(Ir({percent:B,cornerRadius:s,name:F,tooltipPayload:Y,midAngle:G,middleRadius:z,tooltipPosition:Q},R),b),{},{value:fa(R,_),startAngle:V,endAngle:W,payload:R,paddingAngle:Li(j)*c}),I})}return Ir(Ir({},b),{},{sectors:P,data:i})});var yA,b8;function qTe(){if(b8)return yA;b8=1;var t=Math.ceil,e=Math.max;function n(a,i,s,o){for(var l=-1,c=e(t((i-a)/(s||1)),0),u=Array(c);c--;)u[o?c:++l]=a,a+=s;return u}return yA=n,yA}var xA,j8;function oH(){if(j8)return xA;j8=1;var t=AU(),e=1/0,n=17976931348623157e292;function a(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*n}return i===i?i:0}return xA=a,xA}var vA,w8;function UTe(){if(w8)return vA;w8=1;var t=qTe(),e=vS(),n=oH();function a(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return vA=a,vA}var bA,N8;function VTe(){if(N8)return bA;N8=1;var t=UTe(),e=t();return bA=e,bA}var HTe=VTe();const xN=Hn(HTe);function pb(t){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(t)}function S8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function _8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S8(Object(n),!0).forEach(function(a){lH(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function lH(t,e,n){return e=GTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GTe(t){var e=WTe(t,"string");return pb(e)=="symbol"?e:e+""}function WTe(t,e){if(pb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(pb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YTe=["Webkit","Moz","O","ms"],KTe=function(e,n){var a=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=YTe.reduce(function(s,o){return _8(_8({},s),{},lH({},o+a,n))},{});return i[e]=n,i};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},vN.apply(this,arguments)}function C8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function jA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C8(Object(n),!0).forEach(function(a){ks(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function QTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,uH(a.key),a)}}function XTe(t,e,n){return e&&T8(t.prototype,e),n&&T8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function JTe(t,e,n){return e=bN(e),ZTe(t,cH()?Reflect.construct(e,n||[],bN(t).constructor):e.apply(t,n))}function ZTe(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eke(t)}function eke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cH=function(){return!!t})()}function bN(t){return bN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bN(t)}function tke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aD(t,e)}function aD(t,e){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},aD(t,e)}function ks(t,e,n){return e=uH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uH(t){var e=nke(t,"string");return Ng(e)=="symbol"?e:e+""}function nke(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ng(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rke=function(e){var n=e.data,a=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=_v().domain(xN(0,c)).range([s,s+o-l]),f=u.domain().map(function(p){return u(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(a),endX:u(i),scale:u,scaleValues:f}},k8=function(e){return e.changedTouches&&!!e.changedTouches.length},Sg=function(t){function e(n){var a;return QTe(this,e),a=JTe(this,e,[n]),ks(a,"handleDrag",function(i){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(i):a.state.isSlideMoving&&a.handleSlideDrag(i)}),ks(a,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&a.handleDrag(i.changedTouches[0])}),ks(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=a.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),a.detachDragEndListener()}),ks(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),ks(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),ks(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),ks(a,"handleSlideDragStart",function(i){var s=k8(i)?i.changedTouches[0]:i;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return tke(e,t),XTe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var i=a.startX,s=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,p=Math.min(i,s),g=Math.max(i,s),x=e.getIndexInRange(o,p),b=e.getIndexInRange(o,g);return{startIndex:x-x%c,endIndex:b===f?f:b-b%c}}},{key:"getTextOfTick",value:function(a){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=fa(s[a],l,a);return an(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,f=c.width,p=c.travellerWidth,g=c.startIndex,x=c.endIndex,b=c.onChange,j=a.pageX-s;j>0?j=Math.min(j,u+f-p-l,u+f-p-o):j<0&&(j=Math.max(j,u-o,u-l));var w=this.getIndex({startX:o+j,endX:l+j});(w.startIndex!==g||w.endIndex!==x)&&b&&b(w),this.setState({startX:o+j,endX:l+j,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,i){var s=k8(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],f=this.props,p=f.x,g=f.width,x=f.travellerWidth,b=f.onChange,j=f.gap,w=f.data,_={startX:this.state.startX,endX:this.state.endX},T=a.pageX-s;T>0?T=Math.min(T,p+g-x-u):T<0&&(T=Math.max(T,p-u)),_[o]=u+T;var C=this.getIndex(_),A=C.startIndex,k=C.endIndex,P=function(){var R=w.length-1;return o==="startX"&&(l>c?A%j===0:k%j===0)||l<c&&k===R||o==="endX"&&(l>c?k%j===0:A%j===0)||l>c&&k===R};this.setState(ks(ks({},o,u+T),"brushMoveStartX",a.pageX),function(){b&&P()&&b(C)})}},{key:"handleTravellerMoveKeyboard",value:function(a,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[i],p=l.indexOf(f);if(p!==-1){var g=p+a;if(!(g===-1||g>=l.length)){var x=l[g];i==="startX"&&x>=u||i==="endX"&&x<=c||this.setState(ks({},i,x),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.fill,u=a.stroke;return Ce.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.data,u=a.children,f=a.padding,p=v.Children.only(u);return p?Ce.cloneElement(p,{x:i,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,i){var s,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,p=c.height,g=c.traveller,x=c.ariaLabel,b=c.data,j=c.startIndex,w=c.endIndex,_=Math.max(a,this.props.x),T=jA(jA({},Bt(this.props,!1)),{},{x:_,y:u,width:f,height:p}),C=x||"Min value: ".concat((s=b[j])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=b[w])===null||o===void 0?void 0:o.name);return Ce.createElement(In,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(g,T))}},{key:"renderSlide",value:function(a,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,f=Math.min(a,i)+u,p=Math.max(Math.abs(i-a)-u,0);return Ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var a=this.props,i=a.startIndex,s=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,u=a.stroke,f=this.state,p=f.startX,g=f.endX,x=5,b={pointerEvents:"none",fill:u};return Ce.createElement(In,{className:"recharts-brush-texts"},Ce.createElement(Af,vN({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-x,y:o+l/2},b),this.getTextOfTick(i)),Ce.createElement(Af,vN({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+c+x,y:o+l/2},b),this.getTextOfTick(s)))}},{key:"render",value:function(){var a=this.props,i=a.data,s=a.className,o=a.children,l=a.x,c=a.y,u=a.width,f=a.height,p=a.alwaysShowText,g=this.state,x=g.startX,b=g.endX,j=g.isTextActive,w=g.isSlideMoving,_=g.isTravellerMoving,T=g.isTravellerFocused;if(!i||!i.length||!Nt(l)||!Nt(c)||!Nt(u)||!Nt(f)||u<=0||f<=0)return null;var C=fn("recharts-brush",s),A=Ce.Children.count(o)===1,k=KTe("userSelect","none");return Ce.createElement(In,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(j||w||_||T||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var i=a.x,s=a.y,o=a.width,l=a.height,c=a.stroke,u=Math.floor(s+l/2)-1;return Ce.createElement(Ce.Fragment,null,Ce.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),Ce.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),Ce.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,i){var s;return Ce.isValidElement(a)?s=Ce.cloneElement(a,i):an(a)?s=a(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(a,i){var s=a.data,o=a.width,l=a.x,c=a.travellerWidth,u=a.updateId,f=a.startIndex,p=a.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return jA({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?rke({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var g=i.scale.domain().map(function(x){return i.scale(x)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(a.startIndex),endX:i.scale(a.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(a,i){for(var s=a.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>i?l=c:o=c}return i>=a[l]?l:o}}])}(v.PureComponent);ks(Sg,"displayName","Brush");ks(Sg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var wA,A8;function ake(){if(A8)return wA;A8=1;var t=JO();function e(n,a){var i;return t(n,function(s,o,l){return i=a(s,o,l),!i}),!!i}return wA=e,wA}var NA,E8;function ike(){if(E8)return NA;E8=1;var t=o7(),e=Ul(),n=ake(),a=ps(),i=vS();function s(o,l,c){var u=a(o)?t:n;return c&&i(o,l,c)&&(l=void 0),u(o,e(l,3))}return NA=s,NA}var ske=ike();const oke=Hn(ske);var Fl=function(e,n){var a=e.alwaysShow,i=e.ifOverflow;return a&&(i="extendDomain"),i===n},SA,P8;function lke(){if(P8)return SA;P8=1;var t=_7();function e(n,a,i){a=="__proto__"&&t?t(n,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[a]=i}return SA=e,SA}var _A,D8;function cke(){if(D8)return _A;D8=1;var t=lke(),e=N7(),n=Ul();function a(i,s){var o={};return s=n(s,3),e(i,function(l,c,u){t(o,c,s(l,c,u))}),o}return _A=a,_A}var uke=cke();const dke=Hn(uke);var CA,O8;function hke(){if(O8)return CA;O8=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(!n(e[a],a,e))return!1;return!0}return CA=t,CA}var TA,M8;function fke(){if(M8)return TA;M8=1;var t=JO();function e(n,a){var i=!0;return t(n,function(s,o,l){return i=!!a(s,o,l),i}),i}return TA=e,TA}var kA,I8;function pke(){if(I8)return kA;I8=1;var t=hke(),e=fke(),n=Ul(),a=ps(),i=vS();function s(o,l,c){var u=a(o)?t:e;return c&&i(o,l,c)&&(l=void 0),u(o,n(l,3))}return kA=s,kA}var mke=pke();const dH=Hn(mke);var gke=["x","y"];function mb(t){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(t)}function iD(){return iD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},iD.apply(this,arguments)}function R8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function lv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R8(Object(n),!0).forEach(function(a){yke(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function yke(t,e,n){return e=xke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xke(t){var e=vke(t,"string");return mb(e)=="symbol"?e:e+""}function vke(t,e){if(mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(mb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bke(t,e){if(t==null)return{};var n=jke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function jke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function wke(t,e){var n=t.x,a=t.y,i=bke(t,gke),s="".concat(n),o=parseInt(s,10),l="".concat(a),c=parseInt(l,10),u="".concat(e.height||i.height),f=parseInt(u,10),p="".concat(e.width||i.width),g=parseInt(p,10);return lv(lv(lv(lv(lv({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function L8(t){return Ce.createElement(aH,iD({shapeType:"rectangle",propTransformer:wke,activeClassName:"recharts-active-bar"},t))}var Nke=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,i){if(typeof e=="number")return e;var s=Nt(a)||Xye(a);return s?e(a,i):(s||Df(),n)}},Ske=["value","background"],hH;function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function _ke(t,e){if(t==null)return{};var n=Cke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Cke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function jN(){return jN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},jN.apply(this,arguments)}function F8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function va(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F8(Object(n),!0).forEach(function(a){od(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Tke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,pH(a.key),a)}}function kke(t,e,n){return e&&$8(t.prototype,e),n&&$8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ake(t,e,n){return e=wN(e),Eke(t,fH()?Reflect.construct(e,n||[],wN(t).constructor):e.apply(t,n))}function Eke(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pke(t)}function Pke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fH=function(){return!!t})()}function wN(t){return wN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wN(t)}function Dke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sD(t,e)}function sD(t,e){return sD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},sD(t,e)}function od(t,e,n){return e=pH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pH(t){var e=Oke(t,"string");return _g(e)=="symbol"?e:e+""}function Oke(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(_g(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kd=function(t){function e(){var n;Tke(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=Ake(this,e,[].concat(i)),od(n,"state",{isAnimationFinished:!1}),od(n,"id",Lf("recharts-bar-")),od(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),od(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return Dke(e,t),kke(e,[{key:"renderRectanglesStatically",value:function(a){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,f=Bt(this.props,!1);return a&&a.map(function(p,g){var x=g===c,b=x?u:o,j=va(va(va({},f),p),{},{isActive:x,option:b,index:g,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ce.createElement(In,jN({className:"recharts-bar-rectangle"},kf(i.props,p,g),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(g)}),Ce.createElement(L8,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,f=i.animationEasing,p=i.animationId,g=this.state.prevData;return Ce.createElement(Uo,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,j=s.map(function(w,_){var T=g&&g[_];if(T){var C=ka(T.x,w.x),A=ka(T.y,w.y),k=ka(T.width,w.width),P=ka(T.height,w.height);return va(va({},w),{},{x:C(b),y:A(b),width:k(b),height:P(b)})}if(o==="horizontal"){var I=ka(0,w.height),R=I(b);return va(va({},w),{},{y:w.y+w.height-R,height:R})}var q=ka(0,w.width),U=q(b);return va(va({},w),{},{width:U})});return Ce.createElement(In,null,a.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var a=this.props,i=a.data,s=a.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!Ef(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var a=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=Bt(this.props.background,!1);return s.map(function(u,f){u.value;var p=u.background,g=_ke(u,Ske);if(!p)return null;var x=va(va(va(va(va({},g),{},{fill:"#eee"},p),c),kf(a.props,u,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Ce.createElement(L8,jN({key:"background-bar-".concat(f),option:a.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,p=Fs(f,Wb);if(!p)return null;var g=u==="vertical"?o[0].height/2:o[0].width/2,x=function(w,_){var T=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:T,errorVal:fa(w,_)}},b={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Ce.createElement(In,b,p.map(function(j){return Ce.cloneElement(j,{key:"error-bar-".concat(i,"-").concat(j.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var a=this.props,i=a.hide,s=a.data,o=a.className,l=a.xAxis,c=a.yAxis,u=a.left,f=a.top,p=a.width,g=a.height,x=a.isAnimationActive,b=a.background,j=a.id;if(i||!s||!s.length)return null;var w=this.state.isAnimationFinished,_=fn("recharts-bar",o),T=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,A=T||C,k=dn(j)?this.id:j;return Ce.createElement(In,{className:_},T||C?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(k)},Ce.createElement("rect",{x:T?u:u-p/2,y:C?f:f-g/2,width:T?p:p*2,height:C?g:g*2}))):null,Ce.createElement(In,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(k,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,k),(!x||w)&&Ll.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:i.curData}:a.data!==i.curData?{curData:a.data}:null}}])}(v.PureComponent);hH=kd;od(kd,"displayName","Bar");od(kd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Sd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});od(kd,"getComposedData",function(t){var e=t.props,n=t.item,a=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=oSe(a,n);if(!x)return null;var b=e.layout,j=n.type.defaultProps,w=j!==void 0?va(va({},j),n.props):n.props,_=w.dataKey,T=w.children,C=w.minPointSize,A=b==="horizontal"?o:s,k=u?A.scale.domain():null,P=pSe({numericAxis:A}),I=Fs(T,qb),R=p.map(function(q,U){var F,B,V,W,G,z;u?F=lSe(u[f+U],k):(F=fa(q,_),Array.isArray(F)||(F=[P,F]));var Y=Nke(C,hH.defaultProps.minPointSize)(F[1],U);if(b==="horizontal"){var Q,K=[o.scale(F[0]),o.scale(F[1])],$=K[0],ie=K[1];B=d$({axis:s,ticks:l,bandSize:i,offset:x.offset,entry:q,index:U}),V=(Q=ie??$)!==null&&Q!==void 0?Q:void 0,W=x.size;var xe=$-ie;if(G=Number.isNaN(xe)?0:xe,z={x:B,y:o.y,width:W,height:o.height},Math.abs(Y)>0&&Math.abs(G)<Math.abs(Y)){var X=Li(G||Y)*(Math.abs(Y)-Math.abs(G));V-=X,G+=X}}else{var Ie=[s.scale(F[0]),s.scale(F[1])],$e=Ie[0],Be=Ie[1];if(B=$e,V=d$({axis:o,ticks:c,bandSize:i,offset:x.offset,entry:q,index:U}),W=Be-$e,G=x.size,z={x:s.x,y:V,width:s.width,height:G},Math.abs(Y)>0&&Math.abs(W)<Math.abs(Y)){var Le=Li(W||Y)*(Math.abs(Y)-Math.abs(W));W+=Le}}return va(va(va({},q),{},{x:B,y:V,width:W,height:G,value:u?F:F[1],payload:q,background:z},I&&I[U]&&I[U].props),{},{tooltipPayload:[zV(n,q)],tooltipPosition:{x:B+W/2,y:V+G/2}})});return va({data:R,layout:b},g)});function gb(t){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}function Mke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,mH(a.key),a)}}function Ike(t,e,n){return e&&z8(t.prototype,e),n&&z8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function B8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Lo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B8(Object(n),!0).forEach(function(a){RS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function RS(t,e,n){return e=mH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mH(t){var e=Rke(t,"string");return gb(e)=="symbol"?e:e+""}function Rke(t,e){if(gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TM=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.layout,u=e.children,f=Object.keys(n),p={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},g=!!As(u,kd);return f.reduce(function(x,b){var j=n[b],w=j.orientation,_=j.domain,T=j.padding,C=T===void 0?{}:T,A=j.mirror,k=j.reversed,P="".concat(w).concat(A?"Mirror":""),I,R,q,U,F;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var B=_[1]-_[0],V=1/0,W=j.categoricalDomain.sort(exe);if(W.forEach(function(Ie,$e){$e>0&&(V=Math.min((Ie||0)-(W[$e-1]||0),V))}),Number.isFinite(V)){var G=V/B,z=j.layout==="vertical"?a.height:a.width;if(j.padding==="gap"&&(I=G*z/2),j.padding==="no-gap"){var Y=Fi(e.barCategoryGap,G*z),Q=G*z/2;I=Q-Y-(Q-Y)/z*Y}}}i==="xAxis"?R=[a.left+(C.left||0)+(I||0),a.left+a.width-(C.right||0)-(I||0)]:i==="yAxis"?R=c==="horizontal"?[a.top+a.height-(C.bottom||0),a.top+(C.top||0)]:[a.top+(C.top||0)+(I||0),a.top+a.height-(C.bottom||0)-(I||0)]:R=j.range,k&&(R=[R[1],R[0]]);var K=RV(j,s,g),$=K.scale,ie=K.realScaleType;$.domain(_).range(R),LV($);var xe=FV($,Lo(Lo({},j),{},{realScaleType:ie}));i==="xAxis"?(F=w==="top"&&!A||w==="bottom"&&A,q=a.left,U=p[P]-F*j.height):i==="yAxis"&&(F=w==="left"&&!A||w==="right"&&A,q=p[P]-F*j.width,U=a.top);var X=Lo(Lo(Lo({},j),xe),{},{realScaleType:ie,x:q,y:U,scale:$,width:i==="xAxis"?a.width:j.width,height:i==="yAxis"?a.height:j.height});return X.bandSize=sN(X,xe),!j.hide&&i==="xAxis"?p[P]+=(F?-1:1)*X.height:j.hide||(p[P]+=(F?-1:1)*X.width),Lo(Lo({},x),{},RS({},b,X))},{})},gH=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(a,s),y:Math.min(i,o),width:Math.abs(s-a),height:Math.abs(o-i)}},Lke=function(e){var n=e.x1,a=e.y1,i=e.x2,s=e.y2;return gH({x:n,y:a},{x:i,y:s})},yH=function(){function t(e){Mke(this,t),this.scale=e}return Ike(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.bandAware,s=a.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),i=a[0],s=a[a.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();RS(yH,"EPS",1e-4);var kM=function(e){var n=Object.keys(e).reduce(function(a,i){return Lo(Lo({},a),{},RS({},i,yH.create(e[i])))},{});return Lo(Lo({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return dke(i,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return dH(i,function(s,o){return n[o].isInRange(s)})}})};function Fke(t){return(t%180+180)%180}var $ke=function(e){var n=e.width,a=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Fke(i),o=s*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},AA,q8;function zke(){if(q8)return AA;q8=1;var t=Ul(),e=Bb(),n=yS();function a(i){return function(s,o,l){var c=Object(s);if(!e(s)){var u=t(o,3);s=n(s),o=function(p){return u(c[p],p,c)}}var f=i(s,o,l);return f>-1?c[u?s[f]:f]:void 0}}return AA=a,AA}var EA,U8;function Bke(){if(U8)return EA;U8=1;var t=oH();function e(n){var a=t(n),i=a%1;return a===a?i?a-i:a:0}return EA=e,EA}var PA,V8;function qke(){if(V8)return PA;V8=1;var t=x7(),e=Ul(),n=Bke(),a=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var u=l==null?0:n(l);return u<0&&(u=a(c+u,0)),t(s,e(o,3),u)}return PA=i,PA}var DA,H8;function Uke(){if(H8)return DA;H8=1;var t=zke(),e=qke(),n=t(e);return DA=n,DA}var Vke=Uke();const Hke=Hn(Vke);var Gke=OU();const Wke=Hn(Gke);var Yke=Wke(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),AM=v.createContext(void 0),EM=v.createContext(void 0),xH=v.createContext(void 0),vH=v.createContext({}),bH=v.createContext(void 0),jH=v.createContext(0),wH=v.createContext(0),G8=function(e){var n=e.state,a=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,f=Yke(s);return Ce.createElement(AM.Provider,{value:a},Ce.createElement(EM.Provider,{value:i},Ce.createElement(vH.Provider,{value:s},Ce.createElement(xH.Provider,{value:f},Ce.createElement(bH.Provider,{value:o},Ce.createElement(jH.Provider,{value:u},Ce.createElement(wH.Provider,{value:c},l)))))))},Kke=function(){return v.useContext(bH)},NH=function(e){var n=v.useContext(AM);n==null&&Df();var a=n[e];return a==null&&Df(),a},Qke=function(){var e=v.useContext(AM);return Ku(e)},Xke=function(){var e=v.useContext(EM),n=Hke(e,function(a){return dH(a.domain,Number.isFinite)});return n||Ku(e)},SH=function(e){var n=v.useContext(EM);n==null&&Df();var a=n[e];return a==null&&Df(),a},Jke=function(){var e=v.useContext(xH);return e},Zke=function(){return v.useContext(vH)},PM=function(){return v.useContext(wH)},DM=function(){return v.useContext(jH)};function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function eAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,CH(a.key),a)}}function nAe(t,e,n){return e&&tAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rAe(t,e,n){return e=NN(e),aAe(t,_H()?Reflect.construct(e,n||[],NN(t).constructor):e.apply(t,n))}function aAe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iAe(t)}function iAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _H(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_H=function(){return!!t})()}function NN(t){return NN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NN(t)}function sAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oD(t,e)}function oD(t,e){return oD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},oD(t,e)}function W8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Y8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W8(Object(n),!0).forEach(function(a){OM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function OM(t,e,n){return e=CH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CH(t){var e=oAe(t,"string");return Cg(e)=="symbol"?e:e+""}function oAe(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lAe(t,e){return hAe(t)||dAe(t,e)||uAe(t,e)||cAe()}function cAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uAe(t,e){if(t){if(typeof t=="string")return K8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K8(t,e)}}function K8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function dAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function hAe(t){if(Array.isArray(t))return t}function lD(){return lD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},lD.apply(this,arguments)}var fAe=function(e,n){var a;return Ce.isValidElement(e)?a=Ce.cloneElement(e,n):an(e)?a=e(n):a=Ce.createElement("line",lD({},n,{className:"recharts-reference-line-line"})),a},pAe=function(e,n,a,i,s,o,l,c,u){var f=s.x,p=s.y,g=s.width,x=s.height;if(a){var b=u.y,j=e.y.apply(b,{position:o});if(Fl(u,"discard")&&!e.y.isInRange(j))return null;var w=[{x:f+g,y:j},{x:f,y:j}];return c==="left"?w.reverse():w}if(n){var _=u.x,T=e.x.apply(_,{position:o});if(Fl(u,"discard")&&!e.x.isInRange(T))return null;var C=[{x:T,y:p+x},{x:T,y:p}];return l==="top"?C.reverse():C}if(i){var A=u.segment,k=A.map(function(P){return e.apply(P,{position:o})});return Fl(u,"discard")&&oke(k,function(P){return!e.isInRange(P)})?null:k}return null};function mAe(t){var e=t.x,n=t.y,a=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=Kke(),f=NH(i),p=SH(s),g=Jke();if(!u||!g)return null;Bo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=kM({x:f.scale,y:p.scale}),b=Aa(e),j=Aa(n),w=a&&a.length===2,_=pAe(x,b,j,w,g,t.position,f.orientation,p.orientation,t);if(!_)return null;var T=lAe(_,2),C=T[0],A=C.x,k=C.y,P=T[1],I=P.x,R=P.y,q=Fl(t,"hidden")?"url(#".concat(u,")"):void 0,U=Y8(Y8({clipPath:q},Bt(t,!0)),{},{x1:A,y1:k,x2:I,y2:R});return Ce.createElement(In,{className:fn("recharts-reference-line",l)},fAe(o,U),La.renderCallByParent(t,Lke({x1:A,y1:k,x2:I,y2:R})))}var MM=function(t){function e(){return eAe(this,e),rAe(this,e,arguments)}return sAe(e,t),nAe(e,[{key:"render",value:function(){return Ce.createElement(mAe,this.props)}}])}(Ce.Component);OM(MM,"displayName","ReferenceLine");OM(MM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function cD(){return cD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cD.apply(this,arguments)}function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function Q8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function X8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q8(Object(n),!0).forEach(function(a){LS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function gAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,kH(a.key),a)}}function xAe(t,e,n){return e&&yAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vAe(t,e,n){return e=SN(e),bAe(t,TH()?Reflect.construct(e,n||[],SN(t).constructor):e.apply(t,n))}function bAe(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jAe(t)}function jAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TH=function(){return!!t})()}function SN(t){return SN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SN(t)}function wAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uD(t,e)}function uD(t,e){return uD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},uD(t,e)}function LS(t,e,n){return e=kH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kH(t){var e=NAe(t,"string");return Tg(e)=="symbol"?e:e+""}function NAe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Tg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var SAe=function(e){var n=e.x,a=e.y,i=e.xAxis,s=e.yAxis,o=kM({x:i.scale,y:s.scale}),l=o.apply({x:n,y:a},{bandAware:!0});return Fl(e,"discard")&&!o.isInRange(l)?null:l},FS=function(t){function e(){return gAe(this,e),vAe(this,e,arguments)}return wAe(e,t),xAe(e,[{key:"render",value:function(){var a=this.props,i=a.x,s=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,u=Aa(i),f=Aa(s);if(Bo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var p=SAe(this.props);if(!p)return null;var g=p.x,x=p.y,b=this.props,j=b.shape,w=b.className,_=Fl(this.props,"hidden")?"url(#".concat(c,")"):void 0,T=X8(X8({clipPath:_},Bt(this.props,!0)),{},{cx:g,cy:x});return Ce.createElement(In,{className:fn("recharts-reference-dot",w)},e.renderDot(j,T),La.renderCallByParent(this.props,{x:g-o,y:x-o,width:2*o,height:2*o}))}}])}(Ce.Component);LS(FS,"displayName","ReferenceDot");LS(FS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});LS(FS,"renderDot",function(t,e){var n;return Ce.isValidElement(t)?n=Ce.cloneElement(t,e):an(t)?n=t(e):n=Ce.createElement(Yb,cD({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function dD(){return dD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},dD.apply(this,arguments)}function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function J8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Z8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J8(Object(n),!0).forEach(function(a){$S(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function _Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,EH(a.key),a)}}function TAe(t,e,n){return e&&CAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kAe(t,e,n){return e=_N(e),AAe(t,AH()?Reflect.construct(e,n||[],_N(t).constructor):e.apply(t,n))}function AAe(t,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EAe(t)}function EAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AH=function(){return!!t})()}function _N(t){return _N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_N(t)}function PAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hD(t,e)}function hD(t,e){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},hD(t,e)}function $S(t,e,n){return e=EH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EH(t){var e=DAe(t,"string");return kg(e)=="symbol"?e:e+""}function DAe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(kg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var OAe=function(e,n,a,i,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,f=s.xAxis,p=s.yAxis;if(!f||!p)return null;var g=kM({x:f.scale,y:p.scale}),x={x:e?g.x.apply(o,{position:"start"}):g.x.rangeMin,y:a?g.y.apply(c,{position:"start"}):g.y.rangeMin},b={x:n?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(u,{position:"end"}):g.y.rangeMax};return Fl(s,"discard")&&(!g.isInRange(x)||!g.isInRange(b))?null:gH(x,b)},zS=function(t){function e(){return _Ae(this,e),kAe(this,e,arguments)}return PAe(e,t),TAe(e,[{key:"render",value:function(){var a=this.props,i=a.x1,s=a.x2,o=a.y1,l=a.y2,c=a.className,u=a.alwaysShow,f=a.clipPathId;Bo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Aa(i),g=Aa(s),x=Aa(o),b=Aa(l),j=this.props.shape;if(!p&&!g&&!x&&!b&&!j)return null;var w=OAe(p,g,x,b,this.props);if(!w&&!j)return null;var _=Fl(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Ce.createElement(In,{className:fn("recharts-reference-area",c)},e.renderRect(j,Z8(Z8({clipPath:_},Bt(this.props,!0)),w)),La.renderCallByParent(this.props,w))}}])}(Ce.Component);$S(zS,"displayName","ReferenceArea");$S(zS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});$S(zS,"renderRect",function(t,e){var n;return Ce.isValidElement(t)?n=Ce.cloneElement(t,e):an(t)?n=t(e):n=Ce.createElement(CM,dD({},e,{className:"recharts-reference-area-rect"})),n});function PH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var a=[],i=0;i<t.length;i+=e)a.push(t[i]);return a}function MAe(t,e,n){var a={width:t.width+e.width,height:t.height+e.height};return $ke(a,n)}function IAe(t,e,n){var a=n==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:a?i:s,end:a?i+o:s+l}:{start:a?i+o:s+l,end:a?i:s}}function CN(t,e,n,a,i){if(t*e<t*a||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-a)>=0&&t*(e+t*s/2-i)<=0}function RAe(t,e){return PH(t,e+1)}function LAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=e.start,l=e.end,c=0,u=1,f=o,p=function(){var b=a==null?void 0:a[c];if(b===void 0)return{v:PH(a,u)};var j=c,w,_=function(){return w===void 0&&(w=n(b,j)),w},T=b.coordinate,C=c===0||CN(t,T,_,f,l);C||(c=0,f=o,u+=1),C&&(f=T+t*(_()/2+i),c+=u)},g;u<=s.length;)if(g=p(),g)return g.v;return[]}function yb(t){"@babel/helpers - typeof";return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yb(t)}function ez(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ez(Object(n),!0).forEach(function(a){FAe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ez(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function FAe(t,e,n){return e=$Ae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ae(t){var e=zAe(t,"string");return yb(e)=="symbol"?e:e+""}function zAe(t,e){if(yb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(yb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=s.length,l=e.start,c=e.end,u=function(g){var x=s[g],b,j=function(){return b===void 0&&(b=n(x,g)),b};if(g===o-1){var w=t*(x.coordinate+t*j()/2-c);s[g]=x=hi(hi({},x),{},{tickCoord:w>0?x.coordinate-w*t:x.coordinate})}else s[g]=x=hi(hi({},x),{},{tickCoord:x.coordinate});var _=CN(t,x.tickCoord,j,l,c);_&&(c=x.tickCoord-t*(j()/2+i),s[g]=hi(hi({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return s}function qAe(t,e,n,a,i,s){var o=(a||[]).slice(),l=o.length,c=e.start,u=e.end;if(s){var f=a[l-1],p=n(f,l-1),g=t*(f.coordinate+t*p/2-u);o[l-1]=f=hi(hi({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate});var x=CN(t,f.tickCoord,function(){return p},c,u);x&&(u=f.tickCoord-t*(p/2+i),o[l-1]=hi(hi({},f),{},{isShow:!0}))}for(var b=s?l-1:l,j=function(T){var C=o[T],A,k=function(){return A===void 0&&(A=n(C,T)),A};if(T===0){var P=t*(C.coordinate-t*k()/2-c);o[T]=C=hi(hi({},C),{},{tickCoord:P<0?C.coordinate-P*t:C.coordinate})}else o[T]=C=hi(hi({},C),{},{tickCoord:C.coordinate});var I=CN(t,C.tickCoord,k,c,u);I&&(c=C.tickCoord+t*(k()/2+i),o[T]=hi(hi({},C),{},{isShow:!0}))},w=0;w<b;w++)j(w);return o}function IM(t,e,n){var a=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,f=t.unit,p=t.angle;if(!i||!i.length||!a)return[];if(Nt(c)||Sd.isSsr)return RAe(i,typeof c=="number"&&Nt(c)?c:0);var g=[],x=l==="top"||l==="bottom"?"width":"height",b=f&&x==="width"?Sv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},j=function(C,A){var k=an(u)?u(C.value,A):C.value;return x==="width"?MAe(Sv(k,{fontSize:e,letterSpacing:n}),b,p):Sv(k,{fontSize:e,letterSpacing:n})[x]},w=i.length>=2?Li(i[1].coordinate-i[0].coordinate):1,_=IAe(s,w,x);return c==="equidistantPreserveStart"?LAe(w,_,j,i,o):(c==="preserveStart"||c==="preserveStartEnd"?g=qAe(w,_,j,i,o,c==="preserveStartEnd"):g=BAe(w,_,j,i,o),g.filter(function(T){return T.isShow}))}var UAe=["viewBox"],VAe=["viewBox"],HAe=["ticks"];function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Im.apply(this,arguments)}function tz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function _a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tz(Object(n),!0).forEach(function(a){RM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tz(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function OA(t,e){if(t==null)return{};var n=GAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function GAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function WAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nz(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,OH(a.key),a)}}function YAe(t,e,n){return e&&nz(t.prototype,e),n&&nz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KAe(t,e,n){return e=TN(e),QAe(t,DH()?Reflect.construct(e,n||[],TN(t).constructor):e.apply(t,n))}function QAe(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XAe(t)}function XAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DH=function(){return!!t})()}function TN(t){return TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TN(t)}function JAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fD(t,e)}function fD(t,e){return fD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},fD(t,e)}function RM(t,e,n){return e=OH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OH(t){var e=ZAe(t,"string");return Ag(e)=="symbol"?e:e+""}function ZAe(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ag(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Jg=function(t){function e(n){var a;return WAe(this,e),a=KAe(this,e,[n]),a.state={fontSize:"",letterSpacing:""},a}return JAe(e,t),YAe(e,[{key:"shouldComponentUpdate",value:function(a,i){var s=a.viewBox,o=OA(a,UAe),l=this.props,c=l.viewBox,u=OA(l,VAe);return!Bm(s,c)||!Bm(o,u)||!Bm(i,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var i=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,f=i.tickSize,p=i.mirror,g=i.tickMargin,x,b,j,w,_,T,C=p?-1:1,A=a.tickSize||f,k=Nt(a.tickCoord)?a.tickCoord:a.coordinate;switch(u){case"top":x=b=a.coordinate,w=o+ +!p*c,j=w-C*A,T=j-C*g,_=k;break;case"left":j=w=a.coordinate,b=s+ +!p*l,x=b-C*A,_=x-C*g,T=k;break;case"right":j=w=a.coordinate,b=s+ +p*l,x=b+C*A,_=x+C*g,T=k;break;default:x=b=a.coordinate,w=o+ +p*c,j=w+C*A,T=j+C*g,_=k;break}return{line:{x1:x,y1:j,x2:b,y2:w},tick:{x:_,y:T}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.orientation,u=a.mirror,f=a.axisLine,p=_a(_a(_a({},Bt(this.props,!1)),Bt(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var g=+(c==="top"&&!u||c==="bottom"&&u);p=_a(_a({},p),{},{x1:i,y1:s+g*l,x2:i+o,y2:s+g*l})}else{var x=+(c==="left"&&!u||c==="right"&&u);p=_a(_a({},p),{},{x1:i+x*o,y1:s,x2:i+x*o,y2:s+l})}return Ce.createElement("line",Im({},p,{className:fn("recharts-cartesian-axis-line",Ls(f,"className"))}))}},{key:"renderTicks",value:function(a,i,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,p=l.tickFormatter,g=l.unit,x=IM(_a(_a({},this.props),{},{ticks:a}),i,s),b=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),w=Bt(this.props,!1),_=Bt(f,!1),T=_a(_a({},w),{},{fill:"none"},Bt(c,!1)),C=x.map(function(A,k){var P=o.getTickLineCoord(A),I=P.line,R=P.tick,q=_a(_a(_a(_a({textAnchor:b,verticalAnchor:j},w),{},{stroke:"none",fill:u},_),R),{},{index:k,payload:A,visibleTicksCount:x.length,tickFormatter:p});return Ce.createElement(In,Im({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},kf(o.props,A,k)),c&&Ce.createElement("line",Im({},T,I,{className:fn("recharts-cartesian-axis-tick-line",Ls(c,"className"))})),f&&e.renderTickItem(f,q,"".concat(an(p)?p(A.value,k):A.value).concat(g||"")))});return Ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var a=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,f=i.hide;if(f)return null;var p=this.props,g=p.ticks,x=OA(p,HAe),b=g;return an(c)&&(b=g&&g.length>0?c(this.props):c(x)),o<=0||l<=0||!b||!b.length?null:Ce.createElement(In,{className:fn("recharts-cartesian-axis",u),ref:function(w){a.layerReference=w}},s&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),La.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,i,s){var o,l=fn(i.className,"recharts-cartesian-axis-tick-value");return Ce.isValidElement(a)?o=Ce.cloneElement(a,_a(_a({},i),{},{className:l})):an(a)?o=a(_a(_a({},i),{},{className:l})):o=Ce.createElement(Af,Im({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(v.Component);RM(Jg,"displayName","CartesianAxis");RM(Jg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var eEe=["x1","y1","x2","y2","key"],tEe=["offset"];function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function rz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rz(Object(n),!0).forEach(function(a){nEe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rz(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nEe(t,e,n){return e=rEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rEe(t){var e=aEe(t,"string");return Of(e)=="symbol"?e:e+""}function aEe(t,e){if(Of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Of(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rf.apply(this,arguments)}function az(t,e){if(t==null)return{};var n=iEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function iEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var sEe=function(e){var n=e.fill;if(!n||n==="none")return null;var a=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return Ce.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function MH(t,e){var n;if(Ce.isValidElement(t))n=Ce.cloneElement(t,e);else if(an(t))n=t(e);else{var a=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=az(e,eEe),u=Bt(c,!1);u.offset;var f=az(u,tEe);n=Ce.createElement("line",rf({},f,{x1:a,y1:i,x2:s,y2:o,fill:"none",key:l}))}return n}function oEe(t){var e=t.x,n=t.width,a=t.horizontal,i=a===void 0?!0:a,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=pi(pi({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return MH(i,u)});return Ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function lEe(t){var e=t.y,n=t.height,a=t.vertical,i=a===void 0?!0:a,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=pi(pi({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return MH(i,u)});return Ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function cEe(t){var e=t.horizontalFill,n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var f=l.map(function(g){return Math.round(g+i-i)}).sort(function(g,x){return g-x});i!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?i+o-g:f[x+1]-g;if(j<=0)return null;var w=x%e.length;return Ce.createElement("rect",{key:"react-".concat(x),y:g,x:a,height:j,width:s,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function uEe(t){var e=t.vertical,n=e===void 0?!0:e,a=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!a||!a.length)return null;var f=u.map(function(g){return Math.round(g+s-s)}).sort(function(g,x){return g-x});s!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?s+l-g:f[x+1]-g;if(j<=0)return null;var w=x%a.length;return Ce.createElement("rect",{key:"react-".concat(x),x:g,y:o,width:j,height:c,stroke:"none",fill:a[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var dEe=function(e,n){var a=e.xAxis,i=e.width,s=e.height,o=e.offset;return IV(IM(pi(pi(pi({},Jg.defaultProps),a),{},{ticks:kc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},hEe=function(e,n){var a=e.yAxis,i=e.width,s=e.height,o=e.offset;return IV(IM(pi(pi(pi({},Jg.defaultProps),a),{},{ticks:kc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},Nm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function xb(t){var e,n,a,i,s,o,l=PM(),c=DM(),u=Zke(),f=pi(pi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Nm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Nm.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:Nm.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Nm.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Nm.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Nm.verticalFill,x:Nt(t.x)?t.x:u.left,y:Nt(t.y)?t.y:u.top,width:Nt(t.width)?t.width:u.width,height:Nt(t.height)?t.height:u.height}),p=f.x,g=f.y,x=f.width,b=f.height,j=f.syncWithTicks,w=f.horizontalValues,_=f.verticalValues,T=Qke(),C=Xke();if(!Nt(x)||x<=0||!Nt(b)||b<=0||!Nt(p)||p!==+p||!Nt(g)||g!==+g)return null;var A=f.verticalCoordinatesGenerator||dEe,k=f.horizontalCoordinatesGenerator||hEe,P=f.horizontalPoints,I=f.verticalPoints;if((!P||!P.length)&&an(k)){var R=w&&w.length,q=k({yAxis:C?pi(pi({},C),{},{ticks:R?w:C.ticks}):void 0,width:l,height:c,offset:u},R?!0:j);Bo(Array.isArray(q),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Of(q),"]")),Array.isArray(q)&&(P=q)}if((!I||!I.length)&&an(A)){var U=_&&_.length,F=A({xAxis:T?pi(pi({},T),{},{ticks:U?_:T.ticks}):void 0,width:l,height:c,offset:u},U?!0:j);Bo(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Of(F),"]")),Array.isArray(F)&&(I=F)}return Ce.createElement("g",{className:"recharts-cartesian-grid"},Ce.createElement(sEe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Ce.createElement(oEe,rf({},f,{offset:u,horizontalPoints:P,xAxis:T,yAxis:C})),Ce.createElement(lEe,rf({},f,{offset:u,verticalPoints:I,xAxis:T,yAxis:C})),Ce.createElement(cEe,rf({},f,{horizontalPoints:P})),Ce.createElement(uEe,rf({},f,{verticalPoints:I})))}xb.displayName="CartesianGrid";var fEe=["type","layout","connectNulls","ref"],pEe=["key"];function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function iz(t,e){if(t==null)return{};var n=mEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function mEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Ev(){return Ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Ev.apply(this,arguments)}function sz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sz(Object(n),!0).forEach(function(a){Fo(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sz(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Sm(t){return vEe(t)||xEe(t)||yEe(t)||gEe()}function gEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yEe(t,e){if(t){if(typeof t=="string")return pD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pD(t,e)}}function xEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vEe(t){if(Array.isArray(t))return pD(t)}function pD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function bEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oz(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,RH(a.key),a)}}function jEe(t,e,n){return e&&oz(t.prototype,e),n&&oz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wEe(t,e,n){return e=kN(e),NEe(t,IH()?Reflect.construct(e,n||[],kN(t).constructor):e.apply(t,n))}function NEe(t,e){if(e&&(Eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SEe(t)}function SEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IH=function(){return!!t})()}function kN(t){return kN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kN(t)}function _Ee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mD(t,e)}function mD(t,e){return mD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},mD(t,e)}function Fo(t,e,n){return e=RH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RH(t){var e=CEe(t,"string");return Eg(e)=="symbol"?e:e+""}function CEe(t,e){if(Eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kb=function(t){function e(){var n;bEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=wEe(this,e,[].concat(i)),Fo(n,"state",{isAnimationFinished:!0,totalLength:0}),Fo(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Fo(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(_,T){return _+T});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/u),p=o%u,g=l-o,x=[],b=0,j=0;b<c.length;j+=c[b],++b)if(j+c[b]>p){x=[].concat(Sm(c.slice(0,b)),[p-j]);break}var w=x.length%2===0?[0,g]:[g];return[].concat(Sm(e.repeat(c,f)),Sm(x),w).map(function(_){return"".concat(_,"px")}).join(", ")}),Fo(n,"id",Lf("recharts-line-")),Fo(n,"pathRef",function(o){n.mainCurve=o}),Fo(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Fo(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return _Ee(e,t),jEe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,p=Fs(f,Wb);if(!p)return null;var g=function(j,w){return{x:j.x,y:j.y,value:j.value,errorVal:fa(j.payload,w)}},x={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Ce.createElement(In,x,p.map(function(b){return Ce.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:g})}))}},{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,p=Bt(this.props,!1),g=Bt(c,!0),x=u.map(function(j,w){var _=Ts(Ts(Ts({key:"dot-".concat(w),r:3},p),g),{},{index:w,cx:j.x,cy:j.y,value:j.value,dataKey:f,payload:j.payload,points:u});return e.renderDotItem(c,_)}),b={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Ce.createElement(In,Ev({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(a,i,s,o){var l=this.props,c=l.type,u=l.layout,f=l.connectNulls;l.ref;var p=iz(l,fEe),g=Ts(Ts(Ts({},Bt(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:a},o),{},{type:c,layout:u,connectNulls:f});return Ce.createElement(yf,Ev({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=o.animateNewValues,j=o.width,w=o.height,_=this.state,T=_.prevPoints,C=_.totalLength;return Ce.createElement(Uo,{begin:f,duration:p,isActive:u,easing:g,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var k=A.t;if(T){var P=T.length/l.length,I=l.map(function(B,V){var W=Math.floor(V*P);if(T[W]){var G=T[W],z=ka(G.x,B.x),Y=ka(G.y,B.y);return Ts(Ts({},B),{},{x:z(k),y:Y(k)})}if(b){var Q=ka(j*2,B.x),K=ka(w/2,B.y);return Ts(Ts({},B),{},{x:Q(k),y:K(k)})}return Ts(Ts({},B),{},{x:B.x,y:B.y})});return s.renderCurveStatically(I,a,i)}var R=ka(0,C),q=R(k),U;if(c){var F="".concat(c).split(/[,\s]+/gim).map(function(B){return parseFloat(B)});U=s.getStrokeDasharray(q,C,F)}else U=s.generateSimpleStrokeDasharray(C,q);return s.renderCurveStatically(l,a,i,{strokeDasharray:U})})}},{key:"renderCurve",value:function(a,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!u&&f>0||!Ef(u,o))?this.renderCurveWithAnimation(a,i):this.renderCurveStatically(o,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.xAxis,f=i.yAxis,p=i.top,g=i.left,x=i.width,b=i.height,j=i.isAnimationActive,w=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=fn("recharts-line",c),A=u&&u.allowDataOverflow,k=f&&f.allowDataOverflow,P=A||k,I=dn(w)?this.id:w,R=(a=Bt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},q=R.r,U=q===void 0?3:q,F=R.strokeWidth,B=F===void 0?2:F,V=FU(o)?o:{},W=V.clipDot,G=W===void 0?!0:W,z=U*2+B;return Ce.createElement(In,{className:C},A||k?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(I)},Ce.createElement("rect",{x:A?g:g-x/2,y:k?p:p-b/2,width:A?x:x*2,height:k?b:b*2})),!G&&Ce.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Ce.createElement("rect",{x:g-z/2,y:p-z/2,width:x+z,height:b+z}))):null,!T&&this.renderCurve(P,I),this.renderErrorBar(P,I),(T||o)&&this.renderDots(P,G,I),(!j||_)&&Ll.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,i){for(var s=a.length%2!==0?[].concat(Sm(a),[0]):a,o=[],l=0;l<i;++l)o=[].concat(Sm(o),Sm(s));return o}},{key:"renderDotItem",value:function(a,i){var s;if(Ce.isValidElement(a))s=Ce.cloneElement(a,i);else if(an(a))s=a(i);else{var o=i.key,l=iz(i,pEe),c=fn("recharts-line-dot",typeof a!="boolean"?a.className:"");s=Ce.createElement(Yb,Ev({key:o},l,{className:c}))}return s}}])}(v.PureComponent);Fo(Kb,"displayName","Line");Fo(Kb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Sd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Fo(Kb,"getComposedData",function(t){var e=t.props,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,u=t.offset,f=e.layout,p=c.map(function(g,x){var b=fa(g,o);return f==="horizontal"?{x:iN({axis:n,ticks:i,bandSize:l,entry:g,index:x}),y:dn(b)?null:a.scale(b),value:b,payload:g}:{x:dn(b)?null:n.scale(b),y:iN({axis:a,ticks:s,bandSize:l,entry:g,index:x}),value:b,payload:g}});return Ts({points:p,layout:f},u)});var TEe=["layout","type","stroke","connectNulls","isRange","ref"],kEe=["key"],LH;function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function FH(t,e){if(t==null)return{};var n=AEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function AEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function af(){return af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},af.apply(this,arguments)}function lz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Gu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(n),!0).forEach(function(a){Ml(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lz(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function EEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cz(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,zH(a.key),a)}}function PEe(t,e,n){return e&&cz(t.prototype,e),n&&cz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function DEe(t,e,n){return e=AN(e),OEe(t,$H()?Reflect.construct(e,n||[],AN(t).constructor):e.apply(t,n))}function OEe(t,e){if(e&&(Pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MEe(t)}function MEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $H(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($H=function(){return!!t})()}function AN(t){return AN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AN(t)}function IEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gD(t,e)}function gD(t,e){return gD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},gD(t,e)}function Ml(t,e,n){return e=zH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zH(t){var e=REe(t,"string");return Pg(e)=="symbol"?e:e+""}function REe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ad=function(t){function e(){var n;EEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=DEe(this,e,[].concat(i)),Ml(n,"state",{isAnimationFinished:!0}),Ml(n,"id",Lf("recharts-area-")),Ml(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),an(o)&&o()}),Ml(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),an(o)&&o()}),n}return IEe(e,t),PEe(e,[{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,f=c.points,p=c.dataKey,g=Bt(this.props,!1),x=Bt(u,!0),b=f.map(function(w,_){var T=Gu(Gu(Gu({key:"dot-".concat(_),r:3},g),x),{},{index:_,cx:w.x,cy:w.y,dataKey:p,value:w.value,payload:w.payload,points:f});return e.renderDotItem(u,T)}),j={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Ce.createElement(In,af({className:"recharts-area-dots"},j),b)}},{key:"renderHorizontalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,u=o[o.length-1].x,f=a*Math.abs(c-u),p=sd(o.map(function(g){return g.y||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(sd(s.map(function(g){return g.y||0})),p)),Nt(p)?Ce.createElement("rect",{x:c<u?c:c-f,y:0,width:f,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,u=o[o.length-1].y,f=a*Math.abs(c-u),p=sd(o.map(function(g){return g.x||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(sd(s.map(function(g){return g.x||0})),p)),Nt(p)?Ce.createElement("rect",{x:0,y:c<u?c:c-f,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(a){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,i,s,o){var l=this.props,c=l.layout,u=l.type,f=l.stroke,p=l.connectNulls,g=l.isRange;l.ref;var x=FH(l,TEe);return Ce.createElement(In,{clipPath:s?"url(#clipPath-".concat(o,")"):null},Ce.createElement(yf,af({},Bt(x,!0),{points:a,connectNulls:p,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Ce.createElement(yf,af({},Bt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:a})),f!=="none"&&g&&Ce.createElement(yf,af({},Bt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=this.state,j=b.prevPoints,w=b.prevBaseLine;return Ce.createElement(Uo,{begin:f,duration:p,isActive:u,easing:g,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var T=_.t;if(j){var C=j.length/l.length,A=l.map(function(R,q){var U=Math.floor(q*C);if(j[U]){var F=j[U],B=ka(F.x,R.x),V=ka(F.y,R.y);return Gu(Gu({},R),{},{x:B(T),y:V(T)})}return R}),k;if(Nt(c)&&typeof c=="number"){var P=ka(w,c);k=P(T)}else if(dn(c)||Wg(c)){var I=ka(w,0);k=I(T)}else k=c.map(function(R,q){var U=Math.floor(q*C);if(w[U]){var F=w[U],B=ka(F.x,R.x),V=ka(F.y,R.y);return Gu(Gu({},R),{},{x:B(T),y:V(T)})}return R});return s.renderAreaStatically(A,k,a,i)}return Ce.createElement(In,null,Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(T))),Ce.createElement(In,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,a,i)))})}},{key:"renderArea",value:function(a,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,f=u.prevPoints,p=u.prevBaseLine,g=u.totalLength;return c&&o&&o.length&&(!f&&g>0||!Ef(f,o)||!Ef(p,l))?this.renderAreaWithAnimation(a,i):this.renderAreaStatically(o,l,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.top,f=i.left,p=i.xAxis,g=i.yAxis,x=i.width,b=i.height,j=i.isAnimationActive,w=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=fn("recharts-area",c),A=p&&p.allowDataOverflow,k=g&&g.allowDataOverflow,P=A||k,I=dn(w)?this.id:w,R=(a=Bt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},q=R.r,U=q===void 0?3:q,F=R.strokeWidth,B=F===void 0?2:F,V=FU(o)?o:{},W=V.clipDot,G=W===void 0?!0:W,z=U*2+B;return Ce.createElement(In,{className:C},A||k?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(I)},Ce.createElement("rect",{x:A?f:f-x/2,y:k?u:u-b/2,width:A?x:x*2,height:k?b:b*2})),!G&&Ce.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Ce.createElement("rect",{x:f-z/2,y:u-z/2,width:x+z,height:b+z}))):null,T?null:this.renderArea(P,I),(o||T)&&this.renderDots(P,G,I),(!j||_)&&Ll.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:a.points!==i.curPoints||a.baseLine!==i.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(v.PureComponent);LH=Ad;Ml(Ad,"displayName","Area");Ml(Ad,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Sd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ml(Ad,"getBaseValue",function(t,e,n,a){var i=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(Nt(l)&&typeof l=="number")return l;var c=i==="horizontal"?a:n,u=c.scale.domain();if(c.type==="number"){var f=Math.max(u[0],u[1]),p=Math.min(u[0],u[1]);return l==="dataMin"?p:l==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Ml(Ad,"getComposedData",function(t){var e=t.props,n=t.item,a=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=e.layout,b=u&&u.length,j=LH.getBaseValue(e,n,a,i),w=x==="horizontal",_=!1,T=p.map(function(A,k){var P;b?P=u[f+k]:(P=fa(A,c),Array.isArray(P)?_=!0:P=[j,P]);var I=P[1]==null||b&&fa(A,c)==null;return w?{x:iN({axis:a,ticks:s,bandSize:l,entry:A,index:k}),y:I?null:i.scale(P[1]),value:P,payload:A}:{x:I?null:a.scale(P[1]),y:iN({axis:i,ticks:o,bandSize:l,entry:A,index:k}),value:P,payload:A}}),C;return b||_?C=T.map(function(A){var k=Array.isArray(A.value)?A.value[0]:null;return w?{x:A.x,y:k!=null&&A.y!=null?i.scale(k):null}:{x:k!=null?a.scale(k):null,y:A.y}}):C=w?i.scale(j):a.scale(j),Gu({points:T,baseLine:C,layout:x,isRange:_},g)});Ml(Ad,"renderDotItem",function(t,e){var n;if(Ce.isValidElement(t))n=Ce.cloneElement(t,e);else if(an(t))n=t(e);else{var a=fn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=FH(e,kEe);n=Ce.createElement(Yb,af({},s,{key:i,className:a}))}return n});function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function LEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,UH(a.key),a)}}function $Ee(t,e,n){return e&&FEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zEe(t,e,n){return e=EN(e),BEe(t,BH()?Reflect.construct(e,n||[],EN(t).constructor):e.apply(t,n))}function BEe(t,e){if(e&&(Dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qEe(t)}function qEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BH=function(){return!!t})()}function EN(t){return EN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},EN(t)}function UEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yD(t,e)}function yD(t,e){return yD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},yD(t,e)}function qH(t,e,n){return e=UH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UH(t){var e=VEe(t,"string");return Dg(e)=="symbol"?e:e+""}function VEe(t,e){if(Dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xD(){return xD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},xD.apply(this,arguments)}function HEe(t){var e=t.xAxisId,n=PM(),a=DM(),i=NH(e);return i==null?null:v.createElement(Jg,xD({},i,{className:fn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return kc(o,!0)}}))}var qc=function(t){function e(){return LEe(this,e),zEe(this,e,arguments)}return UEe(e,t),$Ee(e,[{key:"render",value:function(){return v.createElement(HEe,this.props)}}])}(v.Component);qH(qc,"displayName","XAxis");qH(qc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function GEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,GH(a.key),a)}}function YEe(t,e,n){return e&&WEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function KEe(t,e,n){return e=PN(e),QEe(t,VH()?Reflect.construct(e,n||[],PN(t).constructor):e.apply(t,n))}function QEe(t,e){if(e&&(Og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XEe(t)}function XEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VH=function(){return!!t})()}function PN(t){return PN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},PN(t)}function JEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vD(t,e)}function vD(t,e){return vD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},vD(t,e)}function HH(t,e,n){return e=GH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GH(t){var e=ZEe(t,"string");return Og(e)=="symbol"?e:e+""}function ZEe(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Og(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function bD(){return bD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},bD.apply(this,arguments)}var ePe=function(e){var n=e.yAxisId,a=PM(),i=DM(),s=SH(n);return s==null?null:v.createElement(Jg,bD({},s,{className:fn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:i},ticksGenerator:function(l){return kc(l,!0)}}))},Uc=function(t){function e(){return GEe(this,e),KEe(this,e,arguments)}return JEe(e,t),YEe(e,[{key:"render",value:function(){return v.createElement(ePe,this.props)}}])}(v.Component);HH(Uc,"displayName","YAxis");HH(Uc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function uz(t){return aPe(t)||rPe(t)||nPe(t)||tPe()}function tPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nPe(t,e){if(t){if(typeof t=="string")return jD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jD(t,e)}}function rPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aPe(t){if(Array.isArray(t))return jD(t)}function jD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var wD=function(e,n,a,i,s){var o=Fs(e,MM),l=Fs(e,FS),c=[].concat(uz(o),uz(l)),u=Fs(e,zS),f="".concat(i,"Id"),p=i[0],g=n;if(c.length&&(g=c.reduce(function(j,w){if(w.props[f]===a&&Fl(w.props,"extendDomain")&&Nt(w.props[p])){var _=w.props[p];return[Math.min(j[0],_),Math.max(j[1],_)]}return j},g)),u.length){var x="".concat(p,"1"),b="".concat(p,"2");g=u.reduce(function(j,w){if(w.props[f]===a&&Fl(w.props,"extendDomain")&&Nt(w.props[x])&&Nt(w.props[b])){var _=w.props[x],T=w.props[b];return[Math.min(j[0],_,T),Math.max(j[1],_,T)]}return j},g)}return s&&s.length&&(g=s.reduce(function(j,w){return Nt(w)?[Math.min(j[0],w),Math.max(j[1],w)]:j},g)),g},MA={exports:{}},dz;function iPe(){return dz||(dz=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)e.call(f,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(u){var f=n?n+u:u,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,f,p,g,x,b){var j=n?n+u:u;if(!this._events[j])return!1;var w=this._events[j],_=arguments.length,T,C;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,p),!0;case 4:return w.fn.call(w.context,f,p,g),!0;case 5:return w.fn.call(w.context,f,p,g,x),!0;case 6:return w.fn.call(w.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];w.fn.apply(w.context,T)}else{var A=w.length,k;for(C=0;C<A;C++)switch(w[C].once&&this.removeListener(u,w[C].fn,void 0,!0),_){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,f);break;case 3:w[C].fn.call(w[C].context,f,p);break;case 4:w[C].fn.call(w[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];w[C].fn.apply(w[C].context,T)}}return!0},l.prototype.on=function(u,f,p){return s(this,u,f,p,!1)},l.prototype.once=function(u,f,p){return s(this,u,f,p,!0)},l.prototype.removeListener=function(u,f,p,g){var x=n?n+u:u;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,w=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&w.push(b[j]);w.length?this._events[x]=w.length===1?w[0]:w:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(MA)),MA.exports}var sPe=iPe();const oPe=Hn(sPe);var IA=new oPe,RA="recharts.syncMouseEvents";function vb(t){"@babel/helpers - typeof";return vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vb(t)}function lPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cPe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,WH(a.key),a)}}function uPe(t,e,n){return e&&cPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LA(t,e,n){return e=WH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WH(t){var e=dPe(t,"string");return vb(e)=="symbol"?e:e+""}function dPe(t,e){if(vb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(vb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hPe=function(){function t(){lPe(this,t),LA(this,"activeIndex",0),LA(this,"coordinateList",[]),LA(this,"layout","horizontal")}return uPe(t,[{key:"setDetails",value:function(n){var a,i=n.coordinateList,s=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,f=n.offset,p=f===void 0?null:f,g=n.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(a=s??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,p=s+c+u,g=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:g})}}}])}();function fPe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var a=t==null?void 0:t[0],i=t==null?void 0:t[1];if(a&&i&&Nt(a)&&Nt(i))return!0}return!1}function pPe(t,e,n,a){var i=a/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?a:n.width-1,height:t==="horizontal"?n.height-1:a}}function YH(t){var e=t.cx,n=t.cy,a=t.radius,i=t.startAngle,s=t.endAngle,o=Lr(e,n,a,i),l=Lr(e,n,a,s);return{points:[o,l],cx:e,cy:n,radius:a,startAngle:i,endAngle:s}}function mPe(t,e,n){var a,i,s,o;if(t==="horizontal")a=e.x,s=a,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,a=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,f=e.outerRadius,p=e.angle,g=Lr(l,c,u,p),x=Lr(l,c,f,p);a=g.x,i=g.y,s=x.x,o=x.y}else return YH(e);return[{x:a,y:i},{x:s,y:o}]}function bb(t){"@babel/helpers - typeof";return bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bb(t)}function hz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function qj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hz(Object(n),!0).forEach(function(a){gPe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hz(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function gPe(t,e,n){return e=yPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yPe(t){var e=xPe(t,"string");return bb(e)=="symbol"?e:e+""}function xPe(t,e){if(bb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(bb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vPe(t){var e,n,a=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,f=t.tooltipAxisBandSize,p=t.layout,g=t.chartName,x=(e=a.props.cursor)!==null&&e!==void 0?e:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!x||!s||!o||g!=="ScatterChart"&&i!=="axis")return null;var b,j=yf;if(g==="ScatterChart")b=o,j=E2e;else if(g==="BarChart")b=pPe(p,o,c,f),j=CM;else if(p==="radial"){var w=YH(o),_=w.cx,T=w.cy,C=w.radius,A=w.startAngle,k=w.endAngle;b={cx:_,cy:T,startAngle:A,endAngle:k,innerRadius:C,outerRadius:C},j=GV}else b={points:mPe(p,o,c)},j=yf;var P=qj(qj(qj(qj({stroke:"#ccc",pointerEvents:"none"},c),b),Bt(x,!1)),{},{payload:l,payloadIndex:u,className:fn("recharts-tooltip-cursor",x.className)});return v.isValidElement(x)?v.cloneElement(x,P):v.createElement(j,P)}var bPe=["item"],jPe=["children","className","width","height","style","compact","title","desc"];function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function Rm(){return Rm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Rm.apply(this,arguments)}function fz(t,e){return SPe(t)||NPe(t,e)||QH(t,e)||wPe()}function wPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function SPe(t){if(Array.isArray(t))return t}function pz(t,e){if(t==null)return{};var n=_Pe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function _Pe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function CPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TPe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,XH(a.key),a)}}function kPe(t,e,n){return e&&TPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function APe(t,e,n){return e=DN(e),EPe(t,KH()?Reflect.construct(e,n||[],DN(t).constructor):e.apply(t,n))}function EPe(t,e){if(e&&(Mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PPe(t)}function PPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KH=function(){return!!t})()}function DN(t){return DN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},DN(t)}function DPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ND(t,e)}function ND(t,e){return ND=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},ND(t,e)}function Ig(t){return IPe(t)||MPe(t)||QH(t)||OPe()}function OPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QH(t,e){if(t){if(typeof t=="string")return SD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SD(t,e)}}function MPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IPe(t){if(Array.isArray(t))return SD(t)}function SD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function mz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mz(Object(n),!0).forEach(function(a){nn(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mz(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nn(t,e,n){return e=XH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XH(t){var e=RPe(t,"string");return Mg(e)=="symbol"?e:e+""}function RPe(t,e){if(Mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Mg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LPe={xAxis:["bottom","top"],yAxis:["left","right"]},FPe={width:"100%",height:"100%"},JH={x:0,y:0};function Uj(t){return t}var $Pe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},zPe=function(e,n,a,i){var s=n.find(function(f){return f&&f.index===a});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return lt(lt(lt({},i),Lr(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=i.angle;return lt(lt(lt({},i),Lr(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return JH},BS=function(e,n){var a=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(a??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Ig(l),Ig(u)):l},[]);return o.length>0?o:e&&e.length&&Nt(i)&&Nt(s)?e.slice(i,s+1):[]};function ZH(t){return t==="number"?[0,"auto"]:void 0}var _D=function(e,n,a,i){var s=e.graphicalItems,o=e.tooltipAxis,l=BS(n,e);return a<0||!s||!s.length||a>=l.length?null:s.reduce(function(c,u){var f,p=(f=u.props.data)!==null&&f!==void 0?f:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=a&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var g;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;g=Mw(x,o.dataKey,i)}else g=p&&p[a]||l[a];return g?[].concat(Ig(c),[zV(u,g)]):c},[])},gz=function(e,n,a,i){var s=i||{x:e.chartX,y:e.chartY},o=$Pe(s,a),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,f=tSe(o,l,u,c);if(f>=0&&u){var p=u[f]&&u[f].value,g=_D(e,n,f,p),x=zPe(a,l,f,s);return{activeTooltipIndex:f,activeLabel:p,activePayload:g,activeCoordinate:x}}return null},BPe=function(e,n){var a=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=e.layout,p=e.children,g=e.stackOffset,x=MV(f,s);return a.reduce(function(b,j){var w,_=j.type.defaultProps!==void 0?lt(lt({},j.type.defaultProps),j.props):j.props,T=_.type,C=_.dataKey,A=_.allowDataOverflow,k=_.allowDuplicatedCategory,P=_.scale,I=_.ticks,R=_.includeHidden,q=_[o];if(b[q])return b;var U=BS(e.data,{graphicalItems:i.filter(function(xe){var X,Ie=o in xe.props?xe.props[o]:(X=xe.type.defaultProps)===null||X===void 0?void 0:X[o];return Ie===q}),dataStartIndex:c,dataEndIndex:u}),F=U.length,B,V,W;fPe(_.domain,A,T)&&(B=FP(_.domain,null,A),x&&(T==="number"||P!=="auto")&&(W=Cv(U,C,"category")));var G=ZH(T);if(!B||B.length===0){var z,Y=(z=_.domain)!==null&&z!==void 0?z:G;if(C){if(B=Cv(U,C,T),T==="category"&&x){var Q=Zye(B);k&&Q?(V=B,B=xN(0,F)):k||(B=p$(Y,B,j).reduce(function(xe,X){return xe.indexOf(X)>=0?xe:[].concat(Ig(xe),[X])},[]))}else if(T==="category")k?B=B.filter(function(xe){return xe!==""&&!dn(xe)}):B=p$(Y,B,j).reduce(function(xe,X){return xe.indexOf(X)>=0||X===""||dn(X)?xe:[].concat(Ig(xe),[X])},[]);else if(T==="number"){var K=sSe(U,i.filter(function(xe){var X,Ie,$e=o in xe.props?xe.props[o]:(X=xe.type.defaultProps)===null||X===void 0?void 0:X[o],Be="hide"in xe.props?xe.props.hide:(Ie=xe.type.defaultProps)===null||Ie===void 0?void 0:Ie.hide;return $e===q&&(R||!Be)}),C,s,f);K&&(B=K)}x&&(T==="number"||P!=="auto")&&(W=Cv(U,C,"category"))}else x?B=xN(0,F):l&&l[q]&&l[q].hasStack&&T==="number"?B=g==="expand"?[0,1]:$V(l[q].stackGroups,c,u):B=OV(U,i.filter(function(xe){var X=o in xe.props?xe.props[o]:xe.type.defaultProps[o],Ie="hide"in xe.props?xe.props.hide:xe.type.defaultProps.hide;return X===q&&(R||!Ie)}),T,f,!0);if(T==="number")B=wD(p,B,q,s,I),Y&&(B=FP(Y,B,A));else if(T==="category"&&Y){var $=Y,ie=B.every(function(xe){return $.indexOf(xe)>=0});ie&&(B=$)}}return lt(lt({},b),{},nn({},q,lt(lt({},_),{},{axisType:s,domain:B,categoricalDomain:W,duplicateDomain:V,originalDomain:(w=_.domain)!==null&&w!==void 0?w:G,isCategorical:x,layout:f})))},{})},qPe=function(e,n){var a=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=e.layout,p=e.children,g=BS(e.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:u}),x=g.length,b=MV(f,s),j=-1;return a.reduce(function(w,_){var T=_.type.defaultProps!==void 0?lt(lt({},_.type.defaultProps),_.props):_.props,C=T[o],A=ZH("number");if(!w[C]){j++;var k;return b?k=xN(0,x):l&&l[C]&&l[C].hasStack?(k=$V(l[C].stackGroups,c,u),k=wD(p,k,C,s)):(k=FP(A,OV(g,a.filter(function(P){var I,R,q=o in P.props?P.props[o]:(I=P.type.defaultProps)===null||I===void 0?void 0:I[o],U="hide"in P.props?P.props.hide:(R=P.type.defaultProps)===null||R===void 0?void 0:R.hide;return q===C&&!U}),"number",f),i.defaultProps.allowDataOverflow),k=wD(p,k,C,s)),lt(lt({},w),{},nn({},C,lt(lt({axisType:s},i.defaultProps),{},{hide:!0,orientation:Ls(LPe,"".concat(s,".").concat(j%2),null),domain:k,originalDomain:A,isCategorical:b,layout:f})))}return w},{})},UPe=function(e,n){var a=n.axisType,i=a===void 0?"xAxis":a,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=e.children,p="".concat(i,"Id"),g=Fs(f,s),x={};return g&&g.length?x=BPe(e,{axes:g,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(x=qPe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),x},VPe=function(e){var n=Ku(e),a=kc(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:ZO(a,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:sN(n,a)}},yz=function(e){var n=e.children,a=e.defaultShowTooltip,i=As(n,Sg),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},HPe=function(e){return!e||!e.length?!1:e.some(function(n){var a=Pc(n&&n.type);return a&&a.indexOf("Bar")>=0})},xz=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},GPe=function(e,n){var a=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=a.width,f=a.height,p=a.children,g=a.margin||{},x=As(p,Sg),b=As(p,Dc),j=Object.keys(c).reduce(function(k,P){var I=c[P],R=I.orientation;return!I.mirror&&!I.hide?lt(lt({},k),{},nn({},R,k[R]+I.width)):k},{left:g.left||0,right:g.right||0}),w=Object.keys(o).reduce(function(k,P){var I=o[P],R=I.orientation;return!I.mirror&&!I.hide?lt(lt({},k),{},nn({},R,Ls(k,"".concat(R))+I.height)):k},{top:g.top||0,bottom:g.bottom||0}),_=lt(lt({},w),j),T=_.bottom;x&&(_.bottom+=x.props.height||Sg.defaultProps.height),b&&n&&(_=aSe(_,i,a,n));var C=u-_.left-_.right,A=f-_.top-_.bottom;return lt(lt({brushBottom:T},_),{},{width:Math.max(C,0),height:Math.max(A,0)})},WPe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},qS=function(e){var n=e.chartName,a=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,f=e.formatAxisMap,p=e.defaultProps,g=function(_,T){var C=T.graphicalItems,A=T.stackGroups,k=T.offset,P=T.updateId,I=T.dataStartIndex,R=T.dataEndIndex,q=_.barSize,U=_.layout,F=_.barGap,B=_.barCategoryGap,V=_.maxBarSize,W=xz(U),G=W.numericAxisName,z=W.cateAxisName,Y=HPe(C),Q=[];return C.forEach(function(K,$){var ie=BS(_.data,{graphicalItems:[K],dataStartIndex:I,dataEndIndex:R}),xe=K.type.defaultProps!==void 0?lt(lt({},K.type.defaultProps),K.props):K.props,X=xe.dataKey,Ie=xe.maxBarSize,$e=xe["".concat(G,"Id")],Be=xe["".concat(z,"Id")],Le={},ce=c.reduce(function(ae,ne){var se=T["".concat(ne.axisType,"Map")],je=xe["".concat(ne.axisType,"Id")];se&&se[je]||ne.axisType==="zAxis"||Df();var Ee=se[je];return lt(lt({},ae),{},nn(nn({},ne.axisType,Ee),"".concat(ne.axisType,"Ticks"),kc(Ee)))},Le),Se=ce[z],Ve=ce["".concat(z,"Ticks")],Ae=A&&A[$e]&&A[$e].hasStack&&mSe(K,A[$e].stackGroups),ue=Pc(K.type).indexOf("Bar")>=0,Te=sN(Se,Ve),oe=[],be=Y&&nSe({barSize:q,stackGroups:A,totalSize:WPe(ce,z)});if(ue){var _e,Ne,ee=dn(Ie)?V:Ie,ge=(_e=(Ne=sN(Se,Ve,!0))!==null&&Ne!==void 0?Ne:ee)!==null&&_e!==void 0?_e:0;oe=rSe({barGap:F,barCategoryGap:B,bandSize:ge!==Te?ge:Te,sizeList:be[Be],maxBarSize:ee}),ge!==Te&&(oe=oe.map(function(ae){return lt(lt({},ae),{},{position:lt(lt({},ae.position),{},{offset:ae.position.offset-ge/2})})}))}var de=K&&K.type&&K.type.getComposedData;de&&Q.push({props:lt(lt({},de(lt(lt({},ce),{},{displayedData:ie,props:_,dataKey:X,item:K,bandSize:Te,barPosition:oe,offset:k,stackedData:Ae,layout:U,dataStartIndex:I,dataEndIndex:R}))),{},nn(nn(nn({key:K.key||"item-".concat($)},G,ce[G]),z,ce[z]),"animationId",P)),childIndex:dxe(K,_.children),item:K})}),Q},x=function(_,T){var C=_.props,A=_.dataStartIndex,k=_.dataEndIndex,P=_.updateId;if(!ML({props:C}))return null;var I=C.children,R=C.layout,q=C.stackOffset,U=C.data,F=C.reverseStackOrder,B=xz(R),V=B.numericAxisName,W=B.cateAxisName,G=Fs(I,a),z=fSe(U,G,"".concat(V,"Id"),"".concat(W,"Id"),q,F),Y=c.reduce(function(xe,X){var Ie="".concat(X.axisType,"Map");return lt(lt({},xe),{},nn({},Ie,UPe(C,lt(lt({},X),{},{graphicalItems:G,stackGroups:X.axisType===V&&z,dataStartIndex:A,dataEndIndex:k}))))},{}),Q=GPe(lt(lt({},Y),{},{props:C,graphicalItems:G}),T==null?void 0:T.legendBBox);Object.keys(Y).forEach(function(xe){Y[xe]=f(C,Y[xe],Q,xe.replace("Map",""),n)});var K=Y["".concat(W,"Map")],$=VPe(K),ie=g(C,lt(lt({},Y),{},{dataStartIndex:A,dataEndIndex:k,updateId:P,graphicalItems:G,stackGroups:z,offset:Q}));return lt(lt({formattedGraphicalItems:ie,graphicalItems:G,offset:Q,stackGroups:z},$),Y)},b=function(w){function _(T){var C,A,k;return CPe(this,_),k=APe(this,_,[T]),nn(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),nn(k,"accessibilityManager",new hPe),nn(k,"handleLegendBBoxUpdate",function(P){if(P){var I=k.state,R=I.dataStartIndex,q=I.dataEndIndex,U=I.updateId;k.setState(lt({legendBBox:P},x({props:k.props,dataStartIndex:R,dataEndIndex:q,updateId:U},lt(lt({},k.state),{},{legendBBox:P}))))}}),nn(k,"handleReceiveSyncEvent",function(P,I,R){if(k.props.syncId===P){if(R===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(I)}}),nn(k,"handleBrushChange",function(P){var I=P.startIndex,R=P.endIndex;if(I!==k.state.dataStartIndex||R!==k.state.dataEndIndex){var q=k.state.updateId;k.setState(function(){return lt({dataStartIndex:I,dataEndIndex:R},x({props:k.props,dataStartIndex:I,dataEndIndex:R,updateId:q},k.state))}),k.triggerSyncEvent({dataStartIndex:I,dataEndIndex:R})}}),nn(k,"handleMouseEnter",function(P){var I=k.getMouseInfo(P);if(I){var R=lt(lt({},I),{},{isTooltipActive:!0});k.setState(R),k.triggerSyncEvent(R);var q=k.props.onMouseEnter;an(q)&&q(R,P)}}),nn(k,"triggeredAfterMouseMove",function(P){var I=k.getMouseInfo(P),R=I?lt(lt({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(R),k.triggerSyncEvent(R);var q=k.props.onMouseMove;an(q)&&q(R,P)}),nn(k,"handleItemMouseEnter",function(P){k.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),nn(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),nn(k,"handleMouseMove",function(P){P.persist(),k.throttleTriggeredAfterMouseMove(P)}),nn(k,"handleMouseLeave",function(P){k.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};k.setState(I),k.triggerSyncEvent(I);var R=k.props.onMouseLeave;an(R)&&R(I,P)}),nn(k,"handleOuterEvent",function(P){var I=uxe(P),R=Ls(k.props,"".concat(I));if(I&&an(R)){var q,U;/.*touch.*/i.test(I)?U=k.getMouseInfo(P.changedTouches[0]):U=k.getMouseInfo(P),R((q=U)!==null&&q!==void 0?q:{},P)}}),nn(k,"handleClick",function(P){var I=k.getMouseInfo(P);if(I){var R=lt(lt({},I),{},{isTooltipActive:!0});k.setState(R),k.triggerSyncEvent(R);var q=k.props.onClick;an(q)&&q(R,P)}}),nn(k,"handleMouseDown",function(P){var I=k.props.onMouseDown;if(an(I)){var R=k.getMouseInfo(P);I(R,P)}}),nn(k,"handleMouseUp",function(P){var I=k.props.onMouseUp;if(an(I)){var R=k.getMouseInfo(P);I(R,P)}}),nn(k,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),nn(k,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&k.handleMouseDown(P.changedTouches[0])}),nn(k,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&k.handleMouseUp(P.changedTouches[0])}),nn(k,"handleDoubleClick",function(P){var I=k.props.onDoubleClick;if(an(I)){var R=k.getMouseInfo(P);I(R,P)}}),nn(k,"handleContextMenu",function(P){var I=k.props.onContextMenu;if(an(I)){var R=k.getMouseInfo(P);I(R,P)}}),nn(k,"triggerSyncEvent",function(P){k.props.syncId!==void 0&&IA.emit(RA,k.props.syncId,P,k.eventEmitterSymbol)}),nn(k,"applySyncEvent",function(P){var I=k.props,R=I.layout,q=I.syncMethod,U=k.state.updateId,F=P.dataStartIndex,B=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)k.setState(lt({dataStartIndex:F,dataEndIndex:B},x({props:k.props,dataStartIndex:F,dataEndIndex:B,updateId:U},k.state)));else if(P.activeTooltipIndex!==void 0){var V=P.chartX,W=P.chartY,G=P.activeTooltipIndex,z=k.state,Y=z.offset,Q=z.tooltipTicks;if(!Y)return;if(typeof q=="function")G=q(Q,P);else if(q==="value"){G=-1;for(var K=0;K<Q.length;K++)if(Q[K].value===P.activeLabel){G=K;break}}var $=lt(lt({},Y),{},{x:Y.left,y:Y.top}),ie=Math.min(V,$.x+$.width),xe=Math.min(W,$.y+$.height),X=Q[G]&&Q[G].value,Ie=_D(k.state,k.props.data,G),$e=Q[G]?{x:R==="horizontal"?Q[G].coordinate:ie,y:R==="horizontal"?xe:Q[G].coordinate}:JH;k.setState(lt(lt({},P),{},{activeLabel:X,activeCoordinate:$e,activePayload:Ie,activeTooltipIndex:G}))}else k.setState(P)}),nn(k,"renderCursor",function(P){var I,R=k.state,q=R.isTooltipActive,U=R.activeCoordinate,F=R.activePayload,B=R.offset,V=R.activeTooltipIndex,W=R.tooltipAxisBandSize,G=k.getTooltipEventType(),z=(I=P.props.active)!==null&&I!==void 0?I:q,Y=k.props.layout,Q=P.key||"_recharts-cursor";return Ce.createElement(vPe,{key:Q,activeCoordinate:U,activePayload:F,activeTooltipIndex:V,chartName:n,element:P,isActive:z,layout:Y,offset:B,tooltipAxisBandSize:W,tooltipEventType:G})}),nn(k,"renderPolarAxis",function(P,I,R){var q=Ls(P,"type.axisType"),U=Ls(k.state,"".concat(q,"Map")),F=P.type.defaultProps,B=F!==void 0?lt(lt({},F),P.props):P.props,V=U&&U[B["".concat(q,"Id")]];return v.cloneElement(P,lt(lt({},V),{},{className:fn(q,V.className),key:P.key||"".concat(I,"-").concat(R),ticks:kc(V,!0)}))}),nn(k,"renderPolarGrid",function(P){var I=P.props,R=I.radialLines,q=I.polarAngles,U=I.polarRadius,F=k.state,B=F.radiusAxisMap,V=F.angleAxisMap,W=Ku(B),G=Ku(V),z=G.cx,Y=G.cy,Q=G.innerRadius,K=G.outerRadius;return v.cloneElement(P,{polarAngles:Array.isArray(q)?q:kc(G,!0).map(function($){return $.coordinate}),polarRadius:Array.isArray(U)?U:kc(W,!0).map(function($){return $.coordinate}),cx:z,cy:Y,innerRadius:Q,outerRadius:K,key:P.key||"polar-grid",radialLines:R})}),nn(k,"renderLegend",function(){var P=k.state.formattedGraphicalItems,I=k.props,R=I.children,q=I.width,U=I.height,F=k.props.margin||{},B=q-(F.left||0)-(F.right||0),V=PV({children:R,formattedGraphicalItems:P,legendWidth:B,legendContent:u});if(!V)return null;var W=V.item,G=pz(V,bPe);return v.cloneElement(W,lt(lt({},G),{},{chartWidth:q,chartHeight:U,margin:F,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),nn(k,"renderTooltip",function(){var P,I=k.props,R=I.children,q=I.accessibilityLayer,U=As(R,Ii);if(!U)return null;var F=k.state,B=F.isTooltipActive,V=F.activeCoordinate,W=F.activePayload,G=F.activeLabel,z=F.offset,Y=(P=U.props.active)!==null&&P!==void 0?P:B;return v.cloneElement(U,{viewBox:lt(lt({},z),{},{x:z.left,y:z.top}),active:Y,label:G,payload:Y?W:[],coordinate:V,accessibilityLayer:q})}),nn(k,"renderBrush",function(P){var I=k.props,R=I.margin,q=I.data,U=k.state,F=U.offset,B=U.dataStartIndex,V=U.dataEndIndex,W=U.updateId;return v.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Fj(k.handleBrushChange,P.props.onChange),data:q,x:Nt(P.props.x)?P.props.x:F.left,y:Nt(P.props.y)?P.props.y:F.top+F.height+F.brushBottom-(R.bottom||0),width:Nt(P.props.width)?P.props.width:F.width,startIndex:B,endIndex:V,updateId:"brush-".concat(W)})}),nn(k,"renderReferenceElement",function(P,I,R){if(!P)return null;var q=k,U=q.clipPathId,F=k.state,B=F.xAxisMap,V=F.yAxisMap,W=F.offset,G=P.type.defaultProps||{},z=P.props,Y=z.xAxisId,Q=Y===void 0?G.xAxisId:Y,K=z.yAxisId,$=K===void 0?G.yAxisId:K;return v.cloneElement(P,{key:P.key||"".concat(I,"-").concat(R),xAxis:B[Q],yAxis:V[$],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:U})}),nn(k,"renderActivePoints",function(P){var I=P.item,R=P.activePoint,q=P.basePoint,U=P.childIndex,F=P.isRange,B=[],V=I.props.key,W=I.item.type.defaultProps!==void 0?lt(lt({},I.item.type.defaultProps),I.item.props):I.item.props,G=W.activeDot,z=W.dataKey,Y=lt(lt({index:U,dataKey:z,cx:R.x,cy:R.y,r:4,fill:_M(I.item),strokeWidth:2,stroke:"#fff",payload:R.payload,value:R.value},Bt(G,!1)),Iw(G));return B.push(_.renderActiveDot(G,Y,"".concat(V,"-activePoint-").concat(U))),q?B.push(_.renderActiveDot(G,lt(lt({},Y),{},{cx:q.x,cy:q.y}),"".concat(V,"-basePoint-").concat(U))):F&&B.push(null),B}),nn(k,"renderGraphicChild",function(P,I,R){var q=k.filterFormatItem(P,I,R);if(!q)return null;var U=k.getTooltipEventType(),F=k.state,B=F.isTooltipActive,V=F.tooltipAxis,W=F.activeTooltipIndex,G=F.activeLabel,z=k.props.children,Y=As(z,Ii),Q=q.props,K=Q.points,$=Q.isRange,ie=Q.baseLine,xe=q.item.type.defaultProps!==void 0?lt(lt({},q.item.type.defaultProps),q.item.props):q.item.props,X=xe.activeDot,Ie=xe.hide,$e=xe.activeBar,Be=xe.activeShape,Le=!!(!Ie&&B&&Y&&(X||$e||Be)),ce={};U!=="axis"&&Y&&Y.props.trigger==="click"?ce={onClick:Fj(k.handleItemMouseEnter,P.props.onClick)}:U!=="axis"&&(ce={onMouseLeave:Fj(k.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Fj(k.handleItemMouseEnter,P.props.onMouseEnter)});var Se=v.cloneElement(P,lt(lt({},q.props),ce));function Ve(ne){return typeof V.dataKey=="function"?V.dataKey(ne.payload):null}if(Le)if(W>=0){var Ae,ue;if(V.dataKey&&!V.allowDuplicatedCategory){var Te=typeof V.dataKey=="function"?Ve:"payload.".concat(V.dataKey.toString());Ae=Mw(K,Te,G),ue=$&&ie&&Mw(ie,Te,G)}else Ae=K==null?void 0:K[W],ue=$&&ie&&ie[W];if(Be||$e){var oe=P.props.activeIndex!==void 0?P.props.activeIndex:W;return[v.cloneElement(P,lt(lt(lt({},q.props),ce),{},{activeIndex:oe})),null,null]}if(!dn(Ae))return[Se].concat(Ig(k.renderActivePoints({item:q,activePoint:Ae,basePoint:ue,childIndex:W,isRange:$})))}else{var be,_e=(be=k.getItemByXY(k.state.activeCoordinate))!==null&&be!==void 0?be:{graphicalItem:Se},Ne=_e.graphicalItem,ee=Ne.item,ge=ee===void 0?P:ee,de=Ne.childIndex,ae=lt(lt(lt({},q.props),ce),{},{activeIndex:de});return[v.cloneElement(ge,ae),null,null]}return $?[Se,null,null]:[Se,null]}),nn(k,"renderCustomized",function(P,I,R){return v.cloneElement(P,lt(lt({key:"recharts-customized-".concat(R)},k.props),k.state))}),nn(k,"renderMap",{CartesianGrid:{handler:Uj,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:Uj},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:Uj},YAxis:{handler:Uj},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((C=T.id)!==null&&C!==void 0?C:Lf("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=E7(k.triggeredAfterMouseMove,(A=T.throttleDelay)!==null&&A!==void 0?A:1e3/60),k.state={},k}return DPe(_,w),kPe(_,[{key:"componentDidMount",value:function(){var C,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,A=C.children,k=C.data,P=C.height,I=C.layout,R=As(A,Ii);if(R){var q=R.props.defaultIndex;if(!(typeof q!="number"||q<0||q>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[q]&&this.state.tooltipTicks[q].value,F=_D(this.state,k,q,U),B=this.state.tooltipTicks[q].coordinate,V=(this.state.offset.top+P)/2,W=I==="horizontal",G=W?{x:B,y:V}:{y:B,x:V},z=this.state.formattedGraphicalItems.find(function(Q){var K=Q.item;return K.type.name==="Scatter"});z&&(G=lt(lt({},G),z.props.points[q].tooltipPosition),F=z.props.points[q].tooltipPayload);var Y={activeTooltipIndex:q,isTooltipActive:!0,activeLabel:U,activePayload:F,activeCoordinate:G};this.setState(Y),this.renderCursor(R),this.accessibilityManager.setIndex(q)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var k,P;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(C){sP([As(C.children,Ii)],[As(this.props.children,Ii)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=As(this.props.children,Ii);if(C&&typeof C.props.shared=="boolean"){var A=C.props.shared?"axis":"item";return l.indexOf(A)>=0?A:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var A=this.container,k=A.getBoundingClientRect(),P=W0e(k),I={chartX:Math.round(C.pageX-P.left),chartY:Math.round(C.pageY-P.top)},R=k.width/A.offsetWidth||1,q=this.inRange(I.chartX,I.chartY,R);if(!q)return null;var U=this.state,F=U.xAxisMap,B=U.yAxisMap,V=this.getTooltipEventType(),W=gz(this.state,this.props.data,this.props.layout,q);if(V!=="axis"&&F&&B){var G=Ku(F).scale,z=Ku(B).scale,Y=G&&G.invert?G.invert(I.chartX):null,Q=z&&z.invert?z.invert(I.chartY):null;return lt(lt({},I),{},{xValue:Y,yValue:Q},W)}return W?lt(lt({},I),W):null}},{key:"inRange",value:function(C,A){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,I=C/k,R=A/k;if(P==="horizontal"||P==="vertical"){var q=this.state.offset,U=I>=q.left&&I<=q.left+q.width&&R>=q.top&&R<=q.top+q.height;return U?{x:I,y:R}:null}var F=this.state,B=F.angleAxisMap,V=F.radiusAxisMap;if(B&&V){var W=Ku(B);return y$({x:I,y:R},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,A=this.getTooltipEventType(),k=As(C,Ii),P={};k&&A==="axis"&&(k.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Iw(this.props,this.handleOuterEvent);return lt(lt({},I),P)}},{key:"addListener",value:function(){IA.on(RA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){IA.removeListener(RA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,A,k){for(var P=this.state.formattedGraphicalItems,I=0,R=P.length;I<R;I++){var q=P[I];if(q.item===C||q.props.key===C.key||A===Pc(q.item.type)&&k===q.childIndex)return q}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,A=this.state.offset,k=A.left,P=A.top,I=A.height,R=A.width;return Ce.createElement("defs",null,Ce.createElement("clipPath",{id:C},Ce.createElement("rect",{x:k,y:P,height:I,width:R})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(A,k){var P=fz(k,2),I=P[0],R=P[1];return lt(lt({},A),{},nn({},I,R.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(A,k){var P=fz(k,2),I=P[0],R=P[1];return lt(lt({},A),{},nn({},I,R.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(C){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(C){var A=this.state,k=A.formattedGraphicalItems,P=A.activeItem;if(k&&k.length)for(var I=0,R=k.length;I<R;I++){var q=k[I],U=q.props,F=q.item,B=F.type.defaultProps!==void 0?lt(lt({},F.type.defaultProps),F.props):F.props,V=Pc(F.type);if(V==="Bar"){var W=(U.data||[]).find(function(Q){return u2e(C,Q)});if(W)return{graphicalItem:q,payload:W}}else if(V==="RadialBar"){var G=(U.data||[]).find(function(Q){return y$(C,Q)});if(G)return{graphicalItem:q,payload:G}}else if(MS(q,P)||IS(q,P)||fb(q,P)){var z=MTe({graphicalItem:q,activeTooltipItem:P,itemData:B.data}),Y=B.activeIndex===void 0?z:B.activeIndex;return{graphicalItem:lt(lt({},q),{},{childIndex:Y}),payload:fb(q,P)?B.data[z]:q.props.data[z]}}}return null}},{key:"render",value:function(){var C=this;if(!ML(this))return null;var A=this.props,k=A.children,P=A.className,I=A.width,R=A.height,q=A.style,U=A.compact,F=A.title,B=A.desc,V=pz(A,jPe),W=Bt(V,!1);if(U)return Ce.createElement(G8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement(lP,Rm({},W,{width:I,height:R,title:F,desc:B}),this.renderClipPath(),RL(k,this.renderMap)));if(this.props.accessibilityLayer){var G,z;W.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,W.role=(z=this.props.role)!==null&&z!==void 0?z:"application",W.onKeyDown=function(Q){C.accessibilityManager.keyboardEvent(Q)},W.onFocus=function(){C.accessibilityManager.focus()}}var Y=this.parseEventsOfWrapper();return Ce.createElement(G8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement("div",Rm({className:fn("recharts-wrapper",P),style:lt({position:"relative",cursor:"default",width:I,height:R},q)},Y,{ref:function(K){C.container=K}}),Ce.createElement(lP,Rm({},W,{width:I,height:R,title:F,desc:B,style:FPe}),this.renderClipPath(),RL(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);nn(b,"displayName",n),nn(b,"defaultProps",lt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),nn(b,"getDerivedStateFromProps",function(w,_){var T=w.dataKey,C=w.data,A=w.children,k=w.width,P=w.height,I=w.layout,R=w.stackOffset,q=w.margin,U=_.dataStartIndex,F=_.dataEndIndex;if(_.updateId===void 0){var B=yz(w);return lt(lt(lt({},B),{},{updateId:0},x(lt(lt({props:w},B),{},{updateId:0}),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:P,prevLayout:I,prevStackOffset:R,prevMargin:q,prevChildren:A})}if(T!==_.prevDataKey||C!==_.prevData||k!==_.prevWidth||P!==_.prevHeight||I!==_.prevLayout||R!==_.prevStackOffset||!Bm(q,_.prevMargin)){var V=yz(w),W={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},G=lt(lt({},gz(_,C,I)),{},{updateId:_.updateId+1}),z=lt(lt(lt({},V),W),G);return lt(lt(lt({},z),x(lt({props:w},z),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:P,prevLayout:I,prevStackOffset:R,prevMargin:q,prevChildren:A})}if(!sP(A,_.prevChildren)){var Y,Q,K,$,ie=As(A,Sg),xe=ie&&(Y=(Q=ie.props)===null||Q===void 0?void 0:Q.startIndex)!==null&&Y!==void 0?Y:U,X=ie&&(K=($=ie.props)===null||$===void 0?void 0:$.endIndex)!==null&&K!==void 0?K:F,Ie=xe!==U||X!==F,$e=!dn(C),Be=$e&&!Ie?_.updateId:_.updateId+1;return lt(lt({updateId:Be},x(lt(lt({props:w},_),{},{updateId:Be,dataStartIndex:xe,dataEndIndex:X}),_)),{},{prevChildren:A,dataStartIndex:xe,dataEndIndex:X})}return null}),nn(b,"renderActiveDot",function(w,_,T){var C;return v.isValidElement(w)?C=v.cloneElement(w,_):an(w)?C=w(_):C=Ce.createElement(Yb,_),Ce.createElement(In,{className:"recharts-active-dot",key:T},C)});var j=v.forwardRef(function(_,T){return Ce.createElement(b,Rm({},_,{ref:T}))});return j.displayName=b.displayName,j},YPe=qS({chartName:"LineChart",GraphicalChild:Kb,axisComponents:[{axisType:"xAxis",AxisComp:qc},{axisType:"yAxis",AxisComp:Uc}],formatAxisMap:TM}),eG=qS({chartName:"BarChart",GraphicalChild:kd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:qc},{axisType:"yAxis",AxisComp:Uc}],formatAxisMap:TM}),tG=qS({chartName:"PieChart",GraphicalChild:Vl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:OS},{axisType:"radiusAxis",AxisComp:PS}],formatAxisMap:_Se,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),KPe=qS({chartName:"AreaChart",GraphicalChild:Ad,axisComponents:[{axisType:"xAxis",AxisComp:qc},{axisType:"yAxis",AxisComp:Uc}],formatAxisMap:TM});const LM=({widget:t,className:e="",autoHideEmptyColumns:n=!1})=>{const a=Lt(),i=hs(),[s,o]=v.useState(null),[l,c]=v.useState(null),[u,f]=v.useState([]),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,w]=v.useState(""),[_,T]=v.useState(!1);v.useEffect(()=>{const I=async()=>{var R,q,U,F,B,V;g(!0),b(null);try{const W=t.dataSource,G=((R=t.config)==null?void 0:R.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0;let z=[];if(G&&(W.startsWith("api:")||W.startsWith("table:"))){const Y=await le("/api/dashboards/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:W,filters:t.config.filters})});if(Y.ok){const Q=await Y.json();z=Array.isArray(Q)?Q:Q.data||[],o(z)}else throw new Error("Failed to fetch filtered data")}else{let Y="";const Q={"api:patients":{url:"/api/patients?limit=50",dataKey:"patients"},"api:drugs":{url:"/api/drugs?limit=50",dataKey:"drugs"},"api:recurring-medications":{url:"/api/recurring-medications?limit=50"},"api:pharmacy-orders":{url:"/api/pharmacy/orders?limit=50",dataKey:"orders"},"api:lab-orders":{url:"/api/lab/orders?limit=50",dataKey:"orders"},"api:lab-tests":{url:"/api/lab/tests?limit=50",dataKey:"tests"},"api:queue":{url:"/api/queue?limit=50",dataKey:"queue"},"api:bills":{url:"/api/bills?limit=100",dataKey:"bills"}};if(Q[W])Y=Q[W].url;else if(W.startsWith("join:"))Y=`/api/dashboards/joined-data?join=${W.split(":")[1]}&limit=50`;else if(W.startsWith("dynamic:")){const $=W.split(":"),ie=$[1],xe=$[2],X=((U=(q=t.config)==null?void 0:q.primaryColumns)==null?void 0:U.join(","))||"",Ie=((B=(F=t.config)==null?void 0:F.relatedColumns)==null?void 0:B.join(","))||"";Y=`/api/dashboards/dynamic-join?primary=${ie}&related=${xe}&primaryCols=${X}&relatedCols=${Ie}&limit=50`}else W.startsWith("table:")?Y=`/api/custom-tables/${W.split(":")[1]}/records?limit=50`:Y=`/api/${W.replace("api:","")}?limit=50`;const K=await le(Y);if(K.ok){const $=await K.json();Array.isArray($)?z=$:(V=Q[W])!=null&&V.dataKey&&$[Q[W].dataKey]?z=$[Q[W].dataKey]:$.data?z=$.data:z=Object.values($).find(xe=>Array.isArray(xe))||[],o(z)}else throw new Error(`Failed to fetch data from ${W}`)}if(t.type==="table"&&n&&z.length>0){const Q=(t.config.columns||[...new Set(z.flatMap(K=>Object.keys(K)))]).filter(K=>z.some($=>{const ie=$[K];return ie!=null&&ie!==""&&(Array.isArray(ie)?ie.length>0:!0)}));f(Q)}else f(t.config.columns||[])}catch(W){b(W.message)}finally{g(!1)}};t.dataSource&&I()},[t.dataSource,t.config]),v.useEffect(()=>{var F,B;if(!s||!Array.isArray(s)){c(s);return}let I=[...s];const R=t.dataSource,U=((F=t.config)==null?void 0:F.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0&&(R.startsWith("api:")||R.startsWith("table:"));if((B=t.config)!=null&&B.filters&&Array.isArray(t.config.filters)&&!U&&(I=I.filter(V=>t.config.filters.every(W=>{const G=V[W.field],z=W.value;switch(W.operator){case"equals":return G==z;case"neq":return G!=z;case"contains":return String(G).toLowerCase().includes(String(z).toLowerCase());case"gt":return G>z;case"lt":return G<z;case"gte":return G>=z;case"lte":return G<=z;default:return!0}}))),j){const V=j.toLowerCase();I=I.filter(W=>Object.values(W).some(G=>String(G).toLowerCase().includes(V)))}c(I)},[s,t.config,j]);const C=I=>{I&&(i.prefetchQuery({queryKey:Wt.patients.context(I),queryFn:async()=>{const R=await le(`/api/patients/${I}/context`);if(!R.ok)throw new Error("Failed to fetch patient context");return R.json()},staleTime:1e3*60*5}),i.prefetchQuery({queryKey:Wt.patientDebts.balance(I),queryFn:async()=>{const R=await le(`/api/patient-debts/${I}/balance`);if(!R.ok)throw new Error("Failed to fetch patient debt");return R.json()},staleTime:1e3*60}),i.prefetchQuery({queryKey:Wt.queue.latest(I),queryFn:async()=>{const R=await le(`/api/queue/patient/${I}/latest`);if(!R.ok){if(R.status===404)return null;throw new Error("Failed to fetch queue status")}return R.json()},staleTime:1e3*5}))},A=v.useMemo(()=>DO(I=>C(I),500),[]);v.useEffect(()=>()=>{A.cancel()},[A]);const k=()=>{var R,q,U;if(p)return r.jsxs("div",{className:"widget-loading",children:[r.jsx(aJ,{className:"spin"})," Loading..."]});if(x)return r.jsxs("div",{className:"widget-error",children:["Error: ",x]});const I=l||[];if(t.type==="stat"){const F=Array.isArray(I)?I.length:0;return r.jsxs("div",{className:"widget-stat",children:[r.jsx("div",{className:"stat-value",children:F}),r.jsx("div",{className:"stat-label",children:((R=t.config)==null?void 0:R.label)||"Total Records"})]})}if(t.type==="chart"){if(!Array.isArray(I)||I.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const{chartType:F="bar",xAxisKey:B="name",dataKey:V="value"}=t.config,W=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return r.jsx("div",{style:{width:"100%",height:350,minHeight:200},children:r.jsx(lw,{width:"100%",height:"100%",children:F==="line"?r.jsxs(YPe,{data:I,children:[r.jsx(xb,{strokeDasharray:"3 3"}),r.jsx(qc,{dataKey:B}),r.jsx(Uc,{}),r.jsx(Ii,{}),r.jsx(Dc,{}),r.jsx(Kb,{type:"monotone",dataKey:V,stroke:"#8884d8",activeDot:{r:8}})]}):F==="pie"?r.jsxs(tG,{children:[r.jsx(Vl,{data:I,cx:"50%",cy:"50%",labelLine:!1,label:({name:G,percent:z})=>`${G} ${(z*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:V,nameKey:B,children:I.map((G,z)=>r.jsx(qb,{fill:W[z%W.length]},`cell-${z}`))}),r.jsx(Ii,{})]}):r.jsxs(eG,{data:I,children:[r.jsx(xb,{strokeDasharray:"3 3"}),r.jsx(qc,{dataKey:B}),r.jsx(Uc,{}),r.jsx(Ii,{}),r.jsx(Dc,{}),r.jsx(kd,{dataKey:V,fill:"#82ca9d"})]})})})}if(t.type==="table"){if(!Array.isArray(I)||I.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const B=(u.length>0?u:((q=t.config)==null?void 0:q.columns)||(I[0]?Object.keys(I[0]).slice(0,5):[])).map(z=>({key:z,label:z.replace(/_/g," ").replace(/\b\w/g,Y=>Y.toUpperCase()),editable:!1})),V=async z=>{try{const Y=t.dataSource;if(Y.startsWith("table:")){const Q=Y.split(":")[1];for(const K of z)K.id&&await le(`/api/custom-tables/${Q}/records/${K.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:K})})}else alert("Changes saved locally. Built-in table edits require specific API integration.")}catch(Y){console.error("Error saving data:",Y),alert("Failed to save changes")}};if(I.length<=10){const z=((U=t.config)==null?void 0:U.columns)||Object.keys(I[0]).filter(Q=>!Q.startsWith("_")&&Q!=="id"),Y=Q=>{const K=Q.patient_id||Q.patientId;K&&a(`/dashboard/edit-complaint/patient/${K}`)};return r.jsx("div",{className:"widget-detail-cards",children:I.map((Q,K)=>{const $=Q.patient_id||Q.patientId,ie=!!$;return r.jsxs("div",{className:`detail-card ${ie?"clickable":""}`,onClick:ie?()=>Y(Q):void 0,onMouseEnter:()=>ie&&A($),style:ie?{cursor:"pointer"}:void 0,children:[r.jsxs("div",{className:"detail-card-header",children:[r.jsx("span",{className:"detail-card-title",children:Q.name||Q.patient_name||Q.title||Q.brand_name||`Record ${K+1}`}),Q.token&&r.jsxs("span",{className:"detail-card-badge",children:["Token #",Q.token]}),Q.status&&r.jsx("span",{className:`detail-card-status status-${Q.status.toLowerCase()}`,children:Q.status})]}),r.jsx("div",{className:"detail-card-fields",children:z.map(xe=>{const X=Q[xe];if(X==null||X===""||xe==="name"||xe==="title")return null;const Ie=xe.replace(/_/g," ").replace(/\b\w/g,Be=>Be.toUpperCase()),$e=typeof X=="object"?JSON.stringify(X):String(X);return r.jsxs("div",{className:"detail-field",children:[r.jsx("span",{className:"detail-field-label",children:Ie}),r.jsx("span",{className:"detail-field-value",children:$e})]},xe)})})]},Q.id||K)})})}const W=z=>{const Y=z.patient_id||z.patientId;Y&&a(`/dashboard/edit-complaint/patient/${Y}`)},G=z=>{const Y=z.patient_id||z.patientId;Y&&A(Y)};return r.jsxs("div",{className:"widget-table-container",children:[r.jsxs("div",{className:"widget-table-search",children:[r.jsx(En,{size:14}),r.jsx("input",{type:"text",placeholder:"Search...",value:j,onChange:z=>w(z.target.value)})]}),r.jsx(zb,{columns:B,data:I,editable:!0,showRowNumbers:!0,title:"",onSave:V,onRowClick:W,onRowHover:G})]})}return r.jsx("div",{children:"Unsupported widget type"})},P=r.jsxs("div",{className:`dashboard-widget ${e}`,children:[r.jsxs("div",{className:"widget-header",children:[r.jsx("h3",{children:t.title}),r.jsx("button",{className:"widget-expand-btn",onClick:()=>T(!0),title:"Expand",children:r.jsx(iq,{size:14})})]}),r.jsx("div",{className:"widget-content",children:k()})]});return r.jsxs(r.Fragment,{children:[P,_&&r.jsx("div",{className:"widget-modal-overlay",onClick:()=>T(!1),children:r.jsxs("div",{className:"widget-modal-content",onClick:I=>I.stopPropagation(),children:[r.jsxs("div",{className:"widget-modal-header",children:[r.jsx("h2",{children:t.title}),r.jsx("button",{onClick:()=>T(!1),className:"widget-modal-close",children:r.jsx(Rt,{size:20})})]}),r.jsx("div",{className:"widget-modal-body",children:k()})]})})]})},QPe=({isOpen:t,onClose:e,title:n,widgets:a,onSave:i})=>{const[s,o]=v.useState(!1),[l,c]=v.useState(n),[u,f]=v.useState(""),[p,g]=v.useState(!1);if(!t)return null;const x=async()=>{if(!(!i||!l.trim())){g(!0);try{await i(l,u),o(!1),e()}catch(b){console.error("Failed to save dashboard:",b),alert("Failed to save dashboard")}finally{g(!1)}}};return r.jsx("div",{className:"temp-dash-overlay",onClick:e,children:r.jsxs("div",{className:"temp-dash-modal",onClick:b=>b.stopPropagation(),children:[r.jsxs("div",{className:"temp-dash-header",children:[r.jsxs("div",{className:"temp-dash-title-group",children:[r.jsx("div",{className:"temp-dash-icon",children:r.jsx(rg,{size:16})}),r.jsxs("div",{className:"temp-dash-title-text",children:[r.jsx("h2",{children:n}),r.jsxs("span",{className:"temp-dash-ai-badge",children:[r.jsx(xw,{size:8})," AI Generated"]})]})]}),r.jsxs("div",{className:"temp-dash-actions",children:[i&&!s&&r.jsxs("button",{onClick:()=>o(!0),className:"temp-dash-save-btn",children:[r.jsx(Bi,{size:12})," Save"]}),r.jsx("button",{onClick:e,className:"temp-dash-close-btn",children:r.jsx(Rt,{size:16})})]})]}),s&&r.jsxs("div",{className:"temp-dash-save-form",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:l,onChange:b=>c(b.target.value),autoFocus:!0}),r.jsx("input",{type:"text",placeholder:"Description (optional)",value:u,onChange:b=>f(b.target.value)}),r.jsxs("div",{className:"temp-dash-save-actions",children:[r.jsx("button",{onClick:()=>o(!1),className:"temp-dash-cancel-btn",children:"Cancel"}),r.jsx("button",{onClick:x,className:"temp-dash-confirm-btn",disabled:p||!l.trim(),children:p?"Saving...":"Confirm"})]})]}),r.jsx("div",{className:"temp-dash-body",children:a.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets to display."}):r.jsx("div",{className:"temp-dash-grid",children:a.map((b,j)=>r.jsx(LM,{widget:b,isEditing:!1,autoHideEmptyColumns:!0},b.id||`widget-${j}`))})})]})})},vz=()=>$N(()=>import("./EditComplaintPage-DeqLRp-d.js"),__vite__mapDeps([0,1])),XPe=()=>$N(()=>import("./AddPatientPage-Ci8VKKYC.js"),__vite__mapDeps([2,3])),Vj=[{name:"Dashboard",path:"/dashboard",icon:r.jsx(rg,{size:16}),keywords:["home","main","analytics","stats"],roles:["all"]},{name:"Clinic Hub",path:"/dashboard/clinic-hub",icon:r.jsx(_c,{size:16}),keywords:["central","hub","overview"],roles:["admin","superadmin"]},{name:"Analysis Dashboard",path:"/dashboard/analysis",icon:r.jsx(_c,{size:16}),keywords:["reports","stats","finance","money"],roles:["admin","superadmin"]},{name:"Live AI Assistant",path:"/live-api",icon:r.jsx(jf,{size:16}),keywords:["ai","chat","voice","assistant"],roles:["all"]},{name:"Clinic Subscriptions",path:"/dashboard/clinic-subscriptions",icon:r.jsx(_c,{size:16}),keywords:["plans","billing","tenants"],roles:["superadmin"]},{name:"User Management",path:"/dashboard/users",icon:r.jsx(zi,{size:16}),keywords:["admins","clinics","accounts"],roles:["superadmin"]},{name:"Patient Search",path:"/dashboard/search-patient",icon:r.jsx(En,{size:16}),keywords:["find","lookup","patient"],roles:["all"]},{name:"All Patients",path:"/dashboard/all-patients",icon:r.jsx(zi,{size:16}),keywords:["list","records","database"],roles:["admin","receptionist","doctor"]},{name:"Add New Patient",path:"/dashboard/add-patient",icon:r.jsx(VN,{size:16}),keywords:["register","new","create","onboard"],roles:["admin","receptionist","doctor"]},{name:"Admissions",path:"/manage-admission",icon:r.jsx(JQ,{size:16}),keywords:["ipd","admit","discharge","rooms"],roles:["admin","doctor","receptionist"]},{name:"Appointment Queue",path:"/dashboard/reception",icon:r.jsx(zi,{size:16}),keywords:["queue","reception","waiting","appointments"],roles:["admin","receptionist","superadmin"]},{name:"Doctor Queue",path:"/dashboard/queue",icon:r.jsx(_c,{size:16}),keywords:["waiting","patients","consultation"],roles:["admin","doctor","superadmin"]},{name:"Pharmacy Inventory",path:"/dashboard/inventory",icon:r.jsx(so,{size:16}),keywords:["drugs","medicine","stock","pharmacy"],roles:["admin","pharmacy"]},{name:"Pharmacy Queue",path:"/dashboard/pharmacy-queue",icon:r.jsx(so,{size:16}),keywords:["orders","billing","dispense"],roles:["admin","pharmacy","superadmin"]},{name:"Add New Drug",path:"/dashboard/inventory/add",icon:r.jsx(so,{size:16}),keywords:["create","medicine","stock"],roles:["admin","pharmacy"]},{name:"Add Pharmacy Order",path:"/dashboard/add-order",icon:r.jsx(kE,{size:16}),keywords:["sell","bill","dispense"],roles:["admin","pharmacy"]},{name:"Refill Reminders",path:"/refill-reminders",icon:r.jsx(ia,{size:16}),keywords:["recurring","sms","alert"],roles:["admin","pharmacy"]},{name:"Distributors",path:"/dashboard/distributors",icon:r.jsx(XD,{size:16}),keywords:["suppliers","vendors","stock"],roles:["admin","pharmacy"]},{name:"Purchase",path:"/dashboard/purchase",icon:r.jsx(kE,{size:16}),keywords:["buy","procurement","stock"],roles:["admin","pharmacy"]},{name:"Lab Panel",path:"/dashboard/lab",icon:r.jsx(us,{size:16}),keywords:["billing","orders","queue"],roles:["admin","lab","superadmin"]},{name:"Create Lab Order",path:"/create-lab-order",icon:r.jsx(us,{size:16}),keywords:["test","pathology","diagnostics"],roles:["admin","doctor","lab"]},{name:"Search Lab Reports",path:"/lab/search-report",icon:r.jsx(En,{size:16}),keywords:["results","history","find"],roles:["admin","doctor","lab"]},{name:"Lab Inventory",path:"/lab-inventory",icon:r.jsx(us,{size:16}),keywords:["reagents","tests","stock"],roles:["admin","lab"]},{name:"Dental",path:"/dashboard/dental",icon:r.jsx(_c,{size:16}),keywords:["teeth","dentist","chart","odontogram"],roles:["admin","doctor","superadmin"]},{name:"Create Custom Bill",path:"/create-custom-bill",icon:r.jsx(Xr,{size:16}),keywords:["invoice","custom","charge"],roles:["admin","receptionist"]},{name:"Billing History",path:"/billing",icon:r.jsx(gw,{size:16}),keywords:["transactions","payments","history"],roles:["admin","receptionist"]},{name:"Patient Debt Management",path:"/dashboard/patient-debt",icon:r.jsx(gw,{size:16}),keywords:["debt","due","outstanding","balance"],roles:["admin","pharmacy","receptionist"]},{name:"Custom Tables",path:"/custom-tables",icon:r.jsx(Xr,{size:16}),keywords:["database","sheets","custom data"],roles:["admin","superadmin"]},{name:"Custom Dashboards",path:"/dashboards",icon:r.jsx(rg,{size:16}),keywords:["charts","reports","analytics"],roles:["admin","doctor","superadmin"]},{name:"Staff Management",path:"/dashboard/staff",icon:r.jsx(ig,{size:16}),keywords:["users","employees","roles","admin"],roles:["admin","superadmin"]},{name:"Role Management",path:"/dashboard/roles",icon:r.jsx(ig,{size:16}),keywords:["roles","permissions","access","custom roles"],roles:["admin","superadmin"]}],bz=[{icon:"",text:"Update Paracetamol stock to 100",roles:["admin","pharmacy"]},{icon:"",text:"Change CBC Test price to 350",roles:["admin","lab","superadmin"]},{icon:"",text:"Set Voice AI language to Hindi",roles:["all"]},{icon:"",text:"Show revenue for last month",roles:["admin","superadmin"]},{icon:"",text:"Purchase 50 strips of Aspirin",roles:["admin","pharmacy"]},{icon:"",text:"Update consultation fee to 500",roles:["admin","superadmin"]},{icon:"",text:"Add new staff member",roles:["admin","superadmin"]},{icon:"",text:"Register: John Doe, 25M, Fever",roles:["all"]},{icon:"",text:"Check Metformin availability",roles:["admin","pharmacy","doctor"]}],JPe=({user:t})=>{const{isOpen:e,closeCommandBar:n}=Rc(),a=Lt(),i=Br(),s=v.useRef(null),[o,l]=v.useState(""),[c,u]=v.useState([]),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[w,_]=v.useState(!0),[T,C]=v.useState(!0),{customColumnsConfig:A}=oS(),k=(A==null?void 0:A.patients)||[],[P,I]=v.useState(null),[R,q]=v.useState(!1),U=hs(),{chatHistory:F,isProcessing:B,handleSendMessage:V,setChatQuery:W,refreshChat:G,selectedImage:z,handleImageSelect:Y,clearImage:Q,temporaryDashboard:K,closeTemporaryDashboard:$,saveTemporaryDashboard:ie}=bO({settings:{},staffList:[],enableDynamicContext:!1}),xe=Ue=>{Ue&&(U.prefetchQuery({queryKey:Wt.patients.context(Ue),queryFn:async()=>{const jt=await le(`/api/patients/${Ue}/context`);if(!jt.ok)throw new Error("Failed to fetch patient context");return jt.json()},staleTime:5*60*1e3}),U.prefetchQuery({queryKey:Wt.patientDebts.balance(Ue),queryFn:async()=>{const jt=await le(`/api/patient-debts/${Ue}/balance`);return jt.ok?jt.json():{netDebt:0}},staleTime:1*60*1e3}),U.prefetchQuery({queryKey:Wt.queue.latest(Ue),queryFn:async()=>{const jt=await le(`/api/queue/patient/${Ue}/latest`);if(!jt.ok)throw new Error("Failed to fetch latest queue status");const kt=await jt.json();return kt!=null&&kt._id&&U.prefetchQuery({queryKey:Wt.queue.entry(kt._id),queryFn:async()=>{const Kn=await le(`/api/queue/doctor/complaint/${kt._id}`);if(!Kn.ok)throw new Error("Failed to fetch complaint record");return Kn.json()},staleTime:1*60*1e3}),kt},staleTime:5e3}),U.prefetchQuery({queryKey:Wt.dental.records(Ue),queryFn:async()=>{const jt=await le(`/api/dental/patient/${Ue}`);if(!jt.ok)throw new Error("Failed to fetch dental records");return jt.json()},staleTime:5*60*1e3}))},X=v.useMemo(()=>t?Vj.filter(Ue=>Ue.roles.includes("all")||t.role&&Ue.roles.includes(t.role)):Vj,[t]),Ie=v.useMemo(()=>t?bz.filter(Ue=>Ue.roles.includes("all")||t.role&&Ue.roles.includes(t.role)):bz,[t]),$e=v.useMemo(()=>new uo(X,{keys:["name","keywords"],threshold:.3}),[X]),[Be,Le]=v.useState(!1),[ce,Se]=v.useState(!1),[Ve,Ae]=v.useState(!1);v.useEffect(()=>{if(e)Le(!0),Ae(!1);else{Ae(!0);const Ue=setTimeout(()=>{Le(!1),Ae(!1),G()},200);return()=>clearTimeout(Ue)}},[e,G]);const{setPageContext:ue}=qN();v.useEffect(()=>{if(e){const Ue=i.pathname,jt=Vj.find(kt=>kt.path===Ue)||Vj.find(kt=>Ue.startsWith(kt.path)&&kt.path!=="/dashboard");ue(jt?{name:jt.name,path:Ue,data:{role:jt.roles}}:{name:"Current Page",path:Ue})}},[e,i.pathname,ue]);const Te=v.useRef(null),oe=Ue=>{var kt;const jt=(kt=Ue.target.files)==null?void 0:kt[0];jt&&Y(jt)},[be,_e]=v.useState({x:0,y:0}),[Ne,ee]=v.useState(!1),ge=v.useRef({x:0,y:0}),de=v.useRef({x:0,y:0}),ae=v.useRef(!1),ne=v.useRef(null);v.useEffect(()=>{const Ue=kt=>{if(!Ne)return;ae.current=!0;const Kn=kt.clientX-ge.current.x,vt=kt.clientY-ge.current.y;let Dt=de.current.x+Kn,Ht=de.current.y+vt;if(ne.current){const Qn=ne.current.offsetWidth,br=ne.current.offsetHeight,Ba=(window.innerWidth-Qn)/2,Jr=(window.innerHeight-br)/2,wa=Math.max(0,Ba),pn=Math.max(0,Jr);Dt=Math.max(-wa,Math.min(wa,Dt)),Ht=Math.max(-pn,Math.min(pn,Ht))}_e({x:Dt,y:Ht})},jt=()=>{ee(!1)};return Ne&&(window.addEventListener("mousemove",Ue),window.addEventListener("mouseup",jt)),()=>{window.removeEventListener("mousemove",Ue),window.removeEventListener("mouseup",jt)}},[Ne]),v.useEffect(()=>{i.pathname==="/dashboard"&&(l(""),p([]),x([])),e&&(i.pathname==="/dashboard"?q(!1):q(!0))},[i.pathname]),v.useEffect(()=>{(f.length>0||g.length>0)&&R&&q(!1)},[f,g]),v.useEffect(()=>{if(e&&window.innerWidth<=768){window.history.pushState({commandBarOpen:!0},"");const Ue=jt=>{jt.preventDefault(),q(!0)};return window.addEventListener("popstate",Ue),()=>{window.removeEventListener("popstate",Ue)}}},[e]),v.useEffect(()=>{R||_e({x:0,y:0})},[R]),v.useEffect(()=>{W(o)},[o]),v.useEffect(()=>{e&&!R&&s.current&&setTimeout(()=>{if(s.current){s.current.focus();const Ue=s.current.value.length;Ue>0&&s.current.setSelectionRange(Ue,Ue)}},50)},[e,R]),v.useEffect(()=>{if(!e||R||!(window.innerWidth<=768))return;const jt=window.scrollY,kt=document.body.style.overflow,Kn=document.documentElement.style.overflow,vt=document.body.style.position,Dt=document.body.style.top,Ht=document.body.style.width;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${jt}px`,document.body.style.width="100%",()=>{document.documentElement.style.overflow=Kn,document.body.style.overflow=kt,document.body.style.position=vt,document.body.style.top=Dt,document.body.style.width=Ht,window.scrollTo(0,jt)}},[e,R]);const se=Ue=>{!Ue.trim()&&!z||(q(!1),V(Ue),l(""),p([]),x([]))},{preFilledQuery:je,setPreFilledQuery:Ee}=Rc();v.useEffect(()=>{e&&je&&(l(je),setTimeout(()=>{se(je),Ee("")},300))},[e,je,Ee]),v.useEffect(()=>{P&&(l(P),Se(!1),setTimeout(()=>se(P),50),I(null))},[P]);const J=()=>{Se(!0)},ye=()=>{l(""),p([]),x([]),G(),s.current&&s.current.focus()};v.useEffect(()=>{e&&(async()=>{_(!0);try{const jt=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),kt=await le(`/api/patients?${jt.toString()}`);if(kt.ok){const Kn=await kt.json();u(Kn.patients||[])}}catch(jt){console.error("Error fetching recent patients:",jt)}finally{_(!1)}})()},[e]);const me=v.useMemo(()=>$l(async Ue=>{const jt=Ue.trim(),kt=/^\d+$/.test(jt),Kn=jt.split(/\s+/).length;if(jt.length>1){const vt=$e.search(jt);x(vt.map(Dt=>Dt.item))}else x([]);if(jt.length<2||kt&&jt.length>10||!kt&&Kn>3){p([]),j(!1);return}j(!0);try{const vt=new URLSearchParams({search:encodeURIComponent(Ue),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Dt=await le(`/api/patients?${vt.toString()}`);if(Dt.ok){const Ht=await Dt.json();p(Ht.patients||[])}}catch(vt){console.error("Search error:",vt)}finally{j(!1),vz()}},300),[t]),he=Ue=>{const jt=Ue.target.value;l(jt),me(jt)},De=Ue=>{Ue.id&&a(`/dashboard/edit-complaint/patient/${Ue.id}`)},nt=Ue=>{a(Ue.path)},Fe=Ue=>{Ue.path==="/dashboard/add-patient"&&XPe()},Ge=Ue=>{l(Ue),setTimeout(()=>se(Ue),50)},it=async()=>{if(o.trim()){j(!0);try{const Ue=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),age:null,gender:null,phone:null})});if(!Ue.ok){const vt=await Ue.json();throw new Error(vt.message||"Failed to create patient")}const jt=await Ue.json();let kt=null;const Kn=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:jt.id,complaint:"Walk-in (Quick Create)"})});if(Kn.ok&&(kt=(await Kn.json()).id),kt)a(`/dashboard/edit-complaint/${kt}`);else{const vt=await le(`/api/queue/patient/${jt.id}/latest`);if(vt.ok){const Dt=await vt.json();Dt&&Dt._id&&a(`/dashboard/edit-complaint/${Dt._id}`)}}n()}catch(Ue){console.error("Failed to create patient:",Ue),alert("Failed to create patient. Please try again.")}finally{j(!1)}}},wt=Ue=>{o.trim()&&se(o)},we=Ue=>{Ue.key==="Enter"&&!Ue.shiftKey&&(Ue.preventDefault(),wt())},Qe=Ue=>{Ue.target===Ue.currentTarget&&n()};if(!e&&!Be)return null;const Xe=o.trim().length>0||(f.length>0||g.length>0)&&!b,ut=o.length===0&&f.length===0&&g.length===0,Ct=o.length>=3&&f.length===0&&g.length===0&&!b,bt=F.length>0||B,ke=!bt||Xe,ot=bt&&Xe,Tt=bt&&!T&&!R&&!Xe;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${It.overlay} ${R?It.overlayMinimized:""} ${Ve?It.exiting:""}`,onClick:Qe,children:r.jsxs("div",{ref:ne,className:`${It.modal} ${R?It.minimized:""} ${Tt?It.collapsed:""} ${Ve?It.exiting:""}`,style:{transform:`translate(${be.x}px, ${be.y}px)`,height:Tt?"auto":void 0},onClick:()=>{ae.current||(R?q(!1):Tt&&C(!0))},children:[r.jsxs("div",{className:It.dragBar,onMouseDown:Ue=>{Ue.target.closest("button")||(ee(!0),ae.current=!1,ge.current={x:Ue.clientX,y:Ue.clientY},de.current={x:be.x,y:be.y})},children:[r.jsxs("div",{className:It.dragBarControls,children:[r.jsx("button",{className:It.windowControlBtn,onClick:n,title:"Close",children:r.jsx(Rt,{size:24,color:"#64748b"})}),r.jsx("button",{className:It.windowControlBtn,onClick:()=>q(!R),title:R?"Maximize":"Minimize",children:R?r.jsx(iq,{size:24,color:"#64748b"}):r.jsx(gJ,{size:24,color:"#64748b"})})]}),r.jsx("div",{className:It.dragBarTitle,children:bt?r.jsxs(r.Fragment,{children:[r.jsx(jf,{size:14,className:"text-violet-600"}),r.jsx("span",{children:"AI Assistant"})]}):Xe?r.jsxs(r.Fragment,{children:[r.jsx(En,{size:14,className:"text-blue-500"}),r.jsx("span",{children:"Search Results"})]}):r.jsx("span",{style:{opacity:.5,fontWeight:500},children:"Clinic Manager AI"})}),r.jsx("div",{className:It.dragBarControlsRight,children:r.jsx("button",{className:It.newChatBtn,onClick:ye,title:"New Chat",children:r.jsx(qi,{size:20})})})]}),r.jsxs("div",{className:It.contentWrapper,children:[bt&&r.jsx("div",{className:It.chatSectionFill,children:r.jsxs("div",{className:It.chatMessagesFill,children:[F.map((Ue,jt)=>r.jsx("div",{className:`${It.chatBubble} ${Ue.role==="user"?It.chatBubbleUser:Ue.role==="model"?It.chatBubbleModel:It.chatBubbleSystem}`,children:Ue.role==="model"?r.jsx(fd,{remarkPlugins:[pd],children:Ue.text}):Ue.text},jt)),B&&r.jsxs("div",{className:It.processing,children:[r.jsx(lo,{size:14,className:It.spinner}),"Thinking..."]})]})}),ke&&r.jsxs("div",{className:ot?It.overlayContent:It.content,children:[ut&&!bt&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Newly Registered"}),r.jsx("div",{className:It.recentList,children:w?[1,2,3,4,5].map(Ue=>r.jsx(te,{width:100,height:32,style:{borderRadius:"16px"}},Ue)):c.length>0?c.map(Ue=>r.jsxs("div",{className:It.recentPill,onClick:()=>De(Ue),onMouseEnter:()=>xe(Ue.id),children:[r.jsx("span",{className:It.recentName,children:Ue.name||"Patient"}),r.jsxs("span",{className:It.recentToken,children:["#",Ue.token]}),r.jsxs("span",{className:It.recentInfo,children:[Ue.age?`${Ue.age}y`:""," ",Ue.gender||""]})]},Ue.id)):r.jsx("div",{className:It.recentInfo,style:{opacity:.5},children:"No recent patients found."})})]}),ut&&!bt&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Try Asking AI..."}),r.jsx("div",{className:It.examplesGrid,children:Ie.map((Ue,jt)=>r.jsxs("div",{className:It.exampleCard,onClick:()=>Ge(Ue.text),children:[r.jsx("span",{className:It.exampleIcon,children:Ue.icon}),r.jsx("span",{className:It.exampleText,children:Ue.text})]},jt))})]}),b&&r.jsx("div",{className:It.section,children:r.jsxs("div",{className:It.processing,children:[r.jsx(lo,{size:16,className:It.spinner}),"Searching..."]})}),g.length>0&&!b&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Pages Found"}),r.jsx("div",{className:It.resultsList,children:g.map((Ue,jt)=>r.jsxs("div",{className:It.resultItem,onClick:()=>nt(Ue),onMouseEnter:()=>Fe(Ue),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{color:"#7c3aed"},children:Ue.icon}),r.jsx("span",{className:It.resultName,children:Ue.name})]}),r.jsx("span",{className:It.resultDetails,style:{fontSize:"0.7rem"},children:"Jump to page"})]},jt))})]}),Xe&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Patients Found"}),r.jsxs("div",{className:It.resultsList,children:[o.trim().length>0&&r.jsx("div",{className:It.resultItem,onClick:it,style:{border:"1px dashed #6366f1",backgroundColor:"#f5f3ff"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#8b5cf6",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(VN,{size:16})}),r.jsxs("div",{children:[r.jsxs("span",{className:It.resultName,style:{color:"#7c3aed"},children:['Create "',o,'"']}),r.jsx("div",{className:"text-xs text-violet-600 mt-0.5",children:"Add new patient"})]})]})}),f.map(Ue=>r.jsxs("div",{className:It.resultItem,onClick:()=>De(Ue),onMouseEnter:()=>{vz(),xe(Ue.id)},children:[r.jsxs("div",{children:[r.jsxs("span",{className:It.resultToken,children:["[#",Ue.token,"]"]}),r.jsx("span",{className:It.resultName,children:Ue.name})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[Ue.age&&r.jsxs("span",{children:[Ue.age," Yrs"]}),Ue.gender&&r.jsx("span",{children:Ue.gender}),r.jsxs("span",{children:["ID: ",Ue.id.slice(-6).toUpperCase()]}),k.map(jt=>{var Kn;const kt=(Kn=Ue.custom_fields)==null?void 0:Kn[jt.key];return kt?r.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 border border-slate-200",children:[jt.label,": ",String(kt)]},jt.key):null})]})]},Ue.id))]})]}),Ct&&!bt&&r.jsx("div",{className:It.section,children:r.jsxs("div",{className:It.noResults,children:["Press ",r.jsx("strong",{children:"Enter"}),' to send "',o,'" to AI Assistant']})})]})]}),r.jsxs("div",{className:It.header,children:[r.jsx("div",{className:It.inputWrapper,children:r.jsxs("div",{className:It.inputContainer,children:[r.jsx("div",{className:It.minimizedSearchIcon,children:r.jsx(En,{size:24})}),r.jsx("textarea",{ref:Ue=>{s.current=Ue,Ue&&(Ue.style.height="auto",Ue.style.height=Math.min(Ue.scrollHeight,150)+"px")},className:It.input,placeholder:R?"Type here...":"Search (Name/Token/Phone), Ask AI, or Enter New Case (Name Age Sex Complaint)...",value:o,onChange:Ue=>{he(Ue),Ue.target.style.height="auto",Ue.target.style.height=Math.min(Ue.target.scrollHeight,150)+"px"},onKeyDown:we,onFocus:Ue=>{Ue.target.scrollIntoView=()=>{},setTimeout(()=>{ne.current&&(ne.current.scrollTop=ne.current.scrollHeight)},100)},rows:1,disabled:B}),z&&r.jsxs("div",{style:{position:"relative",marginRight:"0.5rem"},children:[r.jsx("img",{src:z,alt:"Selected",style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #e2e8f0"}}),r.jsx("button",{onClick:Q,style:{position:"absolute",top:-4,right:-4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",padding:"1px",cursor:"pointer",display:"flex"},children:r.jsx(Rt,{size:8})})]}),r.jsxs("div",{className:It.controlsGroup,children:[r.jsx("button",{className:It.iconButton,onClick:()=>{var Ue;return(Ue=Te.current)==null?void 0:Ue.click()},title:"Attach Image",children:r.jsx(QD,{size:16})}),(o.trim().length>0||z)&&r.jsx("button",{className:`${It.iconButton} ${It.sendButton}`,onClick:()=>se(o),title:"Send to AI",children:r.jsx(Db,{size:16})}),r.jsx("button",{className:It.iconButton,onClick:J,title:"Voice Input",children:r.jsx(UN,{size:16})})]})]})}),r.jsx("input",{type:"file",ref:Te,onChange:oe,accept:"image/*",style:{display:"none"}})]})]})}),ce&&r.jsx(sS,{onClose:()=>Se(!1),patientData:null,tokenNumber:null,onAiSummaryChange:Ue=>{console.log("AI Summary:",Ue),I(Ue)}}),K&&r.jsx(QPe,{isOpen:!!K,onClose:$,title:K.title,widgets:K.widgets,onSave:ie})]})};var nG={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jz=Ce.createContext&&Ce.createContext(nG),ZPe=["attr","size","title"];function eDe(t,e){if(t==null)return{};var n=tDe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function tDe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function ON(){return ON=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ON.apply(this,arguments)}function wz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function MN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wz(Object(n),!0).forEach(function(a){nDe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wz(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nDe(t,e,n){return e=rDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rDe(t){var e=aDe(t,"string");return typeof e=="symbol"?e:e+""}function aDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rG(t){return t&&t.map((e,n)=>Ce.createElement(e.tag,MN({key:n},e.attr),rG(e.child)))}function Ui(t){return e=>Ce.createElement(iDe,ON({attr:MN({},t.attr)},e),rG(t.child))}function iDe(t){var e=n=>{var{attr:a,size:i,title:s}=t,o=eDe(t,ZPe),l=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Ce.createElement("svg",ON({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,o,{className:c,style:MN(MN({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ce.createElement("title",null,s),t.children)};return jz!==void 0?Ce.createElement(jz.Consumer,null,n=>e(n)):e(nG)}function sDe(t){return Ui({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function Nz(t){return Ui({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function _m(t){return Ui({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function Sz(t){return Ui({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function FA(t){return Ui({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function Wu(t){return Ui({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Hj(t){return Ui({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(t)}function Gh(t){return Ui({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(t)}function cv(t){return Ui({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(t)}function Em(t){return Ui({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function aG(t){return Ui({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function _z(t){return Ui({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function oDe(t){return Ui({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function Gj(t){return Ui({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function Cm(t){return Ui({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const iG={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Wu},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:Hj},{path:"/dashboard/users",name:"User Management",icon:Cm}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Wu}]},{title:"Clinic Management",links:[{path:"/dashboard/clinic-hub",name:"Clinic Hub",icon:Sz},{path:"/dashboard/staff",name:"Staff Management",icon:Cm},{path:"/dashboard/roles",name:"Role Management",icon:Gj},{path:"/dashboard/clinic-files",name:"Clinic Files",icon:_m},{path:"/custom-tables",name:"Custom Tables",icon:_m},{path:"/dashboards",name:"Custom Dashboards",icon:Nz}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:Hj},{path:"/dashboard/patients",name:"All Patients",icon:Cm},{path:"/dashboard/patients/search",name:"Search Patient",icon:Em},{path:"/dashboard/files",name:"Patient Files",icon:_m}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:_m},{path:"/dashboard/inventory",name:"Inventory Management",icon:cv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:cv},{path:"/dashboard/distributors",name:"Distributor Management",icon:Cm}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:_z},{path:"/dashboard/reception",name:"Appointment Queue",icon:Wu},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:Gh},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:Gh}]},{title:"Role Operations",links:[{path:"/manage-admission",name:"Admission Desk",icon:Gj},{path:"/dashboard/pharmacy-queue",name:"Pharmacy Queue",icon:cv},{path:"/dashboard/lab",name:"Lab Panel",icon:FA},{path:"/billing",name:"Billing",icon:Gh},{path:"/create-custom-bill",name:"Custom Bill",icon:Gh}]},{title:"Help & Support",links:[{path:"/dashboard/guide",name:"User Guide",icon:sDe}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search-patient",name:"Patient Search",icon:Em},{path:"/dashboard/add-patient",name:"Add Patient",icon:Hj},{path:"/manage-admission",name:"Manage Admission",icon:Gj}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:FA},{path:"/billing",name:"Billing",icon:Gh}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:_z}]},{title:"Analytics",links:[{path:"/dashboards",name:"Custom Dashboards",icon:Nz}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Appointment Queue",icon:Wu}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:Cm},{path:"/dashboard/add-patient",name:"Add Patient",icon:Hj},{path:"/dashboard/search-patient",name:"Search Patient",icon:Em}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:Gh},{path:"/manage-admission",name:"Manage Admission",icon:Gj},{path:"/dashboard/patient-debt",name:"Patient Debt Management",icon:Gh}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Wu},{path:"/lab-inventory",name:"Lab Test Inventory",icon:FA},{path:"/lab/search-report",name:"Search Lab Report",icon:Em}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Wu},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:cv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:cv},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:_m},{path:"/dashboard/distributors",name:"Distributor Management",icon:Cm}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:_m},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:Sz},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:Em}]}],patient:[{title:"Patient Portal",links:[{path:"/patient-dashboard",name:"My Dashboard",icon:Wu}]}]},FM=async()=>{const t=await le("/api/clinic-subscriptions/plans",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription plans")}return t.json()},lDe=async t=>{const e=await le(`/api/clinic-subscriptions/cancel/${t}`,{method:"PUT"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to cancel clinic subscription")}return e.json()},cDe=async t=>{const e=await le(`/api/clinic-subscriptions/plans/${t}`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to fetch clinic subscription plan")}return e.json()},uDe=async t=>{const e=await le("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to create clinic subscription plan")}return e.json()},dDe=async(t,e)=>{const n=await le(`/api/clinic-subscriptions/plans/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to update clinic subscription plan")}return n.json()},hDe=async t=>{const e=await le(`/api/clinic-subscriptions/plans/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to deactivate clinic subscription plan")}return e.json()},fDe=async t=>{const e=await le("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to initiate clinic subscription")}return e.json()},pDe=async()=>{try{const t=await le("/api/clinic-subscriptions/pending",{method:"GET"});return t.ok?t.json():null}catch(t){return console.error("Error checking for pending subscription:",t),null}},mDe=async()=>{const t=await le("/api/clinics/subscription-status",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription status")}return t.json()};function gDe(t=!0){return FN({queryKey:Wt.clinicSubscription,queryFn:mDe,enabled:t,staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!0})}const yDe="_container_c9bhr_3",xDe="_header_c9bhr_21",vDe="_titleGroup_c9bhr_41",bDe="_title_c9bhr_41",jDe="_closeButton_c9bhr_59",wDe="_messageList_c9bhr_79",NDe="_emptyState_c9bhr_108",SDe="_emptyStateIcon_c9bhr_119",_De="_exampleContainer_c9bhr_145",CDe="_exampleChip_c9bhr_153",TDe="_messageRow_c9bhr_176",kDe="_messageRowUser_c9bhr_194",ADe="_messageRowModel_c9bhr_198",EDe="_messageRowSystem_c9bhr_202",PDe="_bubble_c9bhr_208",DDe="_bubbleUser_c9bhr_224",ODe="_bubbleModel_c9bhr_234",MDe="_bubbleSystem_c9bhr_247",IDe="_processingIndicator_c9bhr_330",RDe="_spin_c9bhr_343",LDe="_inputArea_c9bhr_358",FDe="_imagePreviewContainer_c9bhr_365",$De="_inputContainer_c9bhr_376",zDe="_inputField_c9bhr_393",BDe="_sendButton_c9bhr_407",fr={container:yDe,header:xDe,titleGroup:vDe,title:bDe,closeButton:jDe,messageList:wDe,emptyState:NDe,emptyStateIcon:SDe,exampleContainer:_De,exampleChip:CDe,messageRow:TDe,messageRowUser:kDe,messageRowModel:ADe,messageRowSystem:EDe,bubble:PDe,bubbleUser:DDe,bubbleModel:ODe,bubbleSystem:MDe,processingIndicator:IDe,spin:RDe,inputArea:LDe,imagePreviewContainer:FDe,inputContainer:$De,inputField:zDe,sendButton:BDe},sG=({onClose:t,settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s})=>{const{chatQuery:o,setChatQuery:l,chatHistory:c,isProcessing:u,handleSendMessage:f,refreshChat:p,stopGeneration:g,selectedImage:x,handleImageSelect:b,clearImage:j}=bO({settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s}),w=v.useRef(null),_=v.useRef(null),T=()=>{var P;(P=w.current)==null||P.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{T()},[c,u]);const C=P=>{var R;const I=(R=P.target.files)==null?void 0:R[0];I&&b(I)},A=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],k=P=>{l(P)};return r.jsxs("div",{className:fr.container,children:[r.jsxs("header",{className:fr.header,children:[r.jsxs("div",{className:fr.titleGroup,children:[r.jsx(jf,{size:20,className:"text-violet-600"}),r.jsx("h3",{className:fr.title,children:"Clinic Assistant"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:p,className:fr.closeButton,title:"Refresh Chat",children:r.jsx(lq,{size:18})}),r.jsx("button",{onClick:t,className:fr.closeButton,title:"Close",children:r.jsx(Rt,{size:20})})]})]}),r.jsxs("div",{className:fr.messageList,children:[c.length===0&&r.jsxs("div",{className:fr.emptyState,children:[r.jsx(jf,{size:48,className:fr.emptyStateIcon}),r.jsx("p",{children:"How can I help you manage the clinic today?"}),r.jsx("div",{className:fr.exampleContainer,children:A.map((P,I)=>r.jsx("button",{className:fr.exampleChip,onClick:()=>k(P),children:P},I))})]}),c.map((P,I)=>r.jsx("div",{className:`${fr.messageRow} ${P.role==="user"?fr.messageRowUser:P.role==="model"?fr.messageRowModel:fr.messageRowSystem}`,children:r.jsx("div",{className:`${fr.bubble} ${P.role==="user"?fr.bubbleUser:P.role==="model"?fr.bubbleModel:fr.bubbleSystem}`,children:P.role==="user"||P.role==="system"?P.text:r.jsx(fd,{remarkPlugins:[pd],children:P.text})})},I)),u&&r.jsx("div",{className:`${fr.messageRow} ${fr.messageRowModel}`,children:r.jsxs("div",{className:fr.processingIndicator,children:[r.jsx(lo,{size:14,className:fr.spin}),"Thinking..."]})}),r.jsx("div",{ref:w})]}),r.jsxs("div",{className:fr.inputArea,children:[x&&r.jsxs("div",{className:fr.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[r.jsx("img",{src:x,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),r.jsx("button",{onClick:j,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:r.jsx(Rt,{size:12})})]}),r.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),r.jsxs("div",{className:fr.inputContainer,children:[r.jsx("input",{type:"file",ref:_,onChange:C,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:fr.sendButton,onClick:()=>{var P;return(P=_.current)==null?void 0:P.click()},disabled:u,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:r.jsx(QD,{size:18})}),r.jsx("input",{type:"text",className:fr.inputField,placeholder:"Type your request...",value:o,onChange:P=>l(P.target.value),onKeyDown:P=>P.key==="Enter"&&!u&&f(),disabled:u,autoFocus:!0}),u?r.jsx("button",{className:fr.sendButton,onClick:g,title:"Stop Generating",style:{color:"#ef4444"},children:r.jsx(rZ,{size:18,fill:"currentColor"})}):r.jsx("button",{className:fr.sendButton,onClick:()=>f(),disabled:!o.trim()&&!x,children:r.jsx(Db,{size:18})})]})]})]})};function Kc(t,e=100){const n=v.useRef(!1);v.useEffect(()=>{if(n.current)return;const a=setTimeout(()=>{const i=document,s=['input[type="text"]:not([disabled]):not([readonly])','input[type="search"]:not([disabled]):not([readonly])','input[type="email"]:not([disabled]):not([readonly])','input[type="tel"]:not([disabled]):not([readonly])','input[type="url"]:not([disabled]):not([readonly])',"input:not([type]):not([disabled]):not([readonly])"].join(", "),o=i.querySelectorAll(s),l=Array.from(o).filter(c=>{const u=window.getComputedStyle(c),f=c.getBoundingClientRect();return u.display!=="none"&&u.visibility!=="hidden"&&u.opacity!=="0"&&f.width>0&&f.height>0});if(l.length>0){const c=l[0];c.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{c.focus()},50),n.current=!0}},e);return()=>clearTimeout(a)},[t,e])}const qDe=({onLoginSuccess:t})=>{const[e,n]=v.useState(""),[a,i]=v.useState(""),[s,o]=v.useState(null),[l,c]=v.useState(!1),u=Lt();Kc();const f=async x=>{x.preventDefault(),c(!0),o(null);try{const b=await le("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!b.ok){let w=`Login failed with status: ${b.status}`;try{w=(await b.json()).message||w}catch{try{const T=await b.text();T&&(w=`${w} - ${T}`)}catch{}}throw new Error(w)}const j=await b.json();console.log("Login successful:",j),localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?u("/dashboard/queue"):u("/dashboard")}catch(b){console.error("Login failed:",b),o(b.message||"Login failed. Please check your credentials.")}finally{c(!1)}},p=async x=>{c(!0),o(null);try{const b=await le("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x.credential})});if(!b.ok)throw new Error("Google Sign-In failed");const j=await b.json();localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?u("/dashboard/queue"):u("/dashboard")}catch(b){console.error("Google Login Error:",b),o("Google Sign-In failed. Please try again.")}finally{c(!1)}},g=()=>{console.error("Google Login Failed"),o("Google Sign-In was unsuccessful. Please try again.")};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Newtons AI HMS"}),r.jsx("p",{className:"auth-subtitle",children:"Sign in to continue"}),r.jsxs("form",{onSubmit:f,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>n(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"email",children:"Email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:x=>i(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"password",children:"Password"})]}),s&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:s})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:l,className:"auth-submit-button",children:l?"Signing in...":"Sign In"})})]}),r.jsx("div",{className:"google-login-container",children:r.jsx(dY,{onSuccess:p,onError:g,useOneTap:!0})}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Are you a patient?"," ",r.jsx(vr,{to:"/patient-login",className:"auth-navigation-link",children:"Patient Login"})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(vr,{to:"/register",className:"auth-navigation-link",children:"Create account"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},UDe=({onLoginSuccess:t})=>{const[e,n]=v.useState("login"),[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([]),[u,f]=v.useState(null),[p,g]=v.useState(!1),[x,b]=v.useState(""),[j,w]=v.useState(null),[_,T]=v.useState(""),[C,A]=v.useState([]),k=Lt();Ce.useEffect(()=>{e==="clinic_search"&&C.length===0&&(async()=>{g(!0);try{const F=await le("/api/clinics/search?query=Newton"),B=await F.json();F.ok&&A(B.clinics.slice(0,4))}catch(F){console.error("Failed to fetch clinic suggestions:",F)}finally{g(!1)}})()},[e,C.length]);const P=async U=>{U.preventDefault(),g(!0),f(null);try{const F=await le("/api/auth/patient-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a,tokenNumber:s})}),B=await F.json();if(F.ok){const V={...B.patient,role:"patient"};localStorage.setItem("authToken",B.token),localStorage.setItem("currentUser",JSON.stringify(V)),t(V),k("/patient-dashboard")}else f(B.message||"Login failed. Please check your phone and token.")}catch{f("Connection error")}finally{g(!1)}},I=async U=>{U.preventDefault(),g(!0),f(null);try{const F=await le("/api/auth/patient-lookup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a})}),B=await F.json();F.ok?(c(B.accounts),n("lookup")):f(B.message||"Lookup failed")}catch{f("Connection error")}finally{g(!1)}},R=async U=>{U.preventDefault(),g(!0),f(null);try{const F=await le(`/api/clinics/search?query=${_}`),B=await F.json();F.ok?A(B.clinics):f(B.message||"Search failed")}catch{f("Connection error")}finally{g(!1)}},q=async U=>{if(U.preventDefault(),!!j){g(!0),f(null);try{const F=await le("/api/auth/patient-register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a,name:x,clinicId:j.id})}),B=await F.json();if(F.ok){const V={...B.patient,role:"patient"};localStorage.setItem("authToken",B.token),localStorage.setItem("currentUser",JSON.stringify(V)),t(V),alert(`Registration successful! Your unique Token Number is: ${B.patient_token_number}. Keep it safe for future logins.`),k("/patient-dashboard")}else f(B.message||"Registration failed")}catch{f("Connection error")}finally{g(!1)}}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Patient Portal"}),r.jsx("p",{className:"auth-subtitle",children:"Welcome back! Login to see your health history."}),u&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:u})}),e==="login"&&r.jsxs("form",{onSubmit:P,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"tel",required:!0,value:a,onChange:U=>i(U.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Phone Number"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"number",required:!0,value:s,onChange:U=>o(U.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Token Number"})]}),r.jsx("button",{type:"submit",disabled:p,className:"auth-submit-button",children:p?"Verifying...":"Login Now"}),r.jsx("div",{className:"auth-helper-links",style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.jsx("button",{type:"button",onClick:()=>n("clinic_search"),className:"auth-secondary-btn",style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0",background:"white",color:"#0f172a",fontWeight:600,cursor:"pointer"},children:"New Patient? Register Here"})})]}),e==="lookup"&&r.jsxs("div",{className:"auth-form",children:[r.jsxs("p",{className:"auth-subtitle",children:["Checking records for: ",r.jsx("b",{children:a||"none"})]}),a?r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",margin:"1rem 0"},children:l.length>0?l.map(U=>r.jsxs("div",{className:"auth-text-input",style:{textAlign:"left",padding:"1rem",height:"auto",background:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontWeight:600},children:U.patientName}),r.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:U.clinicName})]},U.patientId)):r.jsx("p",{style:{fontSize:"0.85rem",color:"#64748b"},children:"No existing records found. Please contact your clinic or register below."})}),r.jsx("button",{onClick:()=>n("login"),className:"auth-submit-button",children:"Back to Login"})]}):r.jsxs("form",{onSubmit:I,className:"auth-form",style:{width:"100%"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"tel",required:!0,value:a,onChange:U=>i(U.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Enter Phone Number"})]}),r.jsx("button",{type:"submit",disabled:p,className:"auth-submit-button",children:"Search"})]})]}),e==="clinic_search"&&r.jsxs("div",{className:"auth-form",children:[r.jsx("p",{className:"auth-subtitle",children:"Search for your clinic:"}),r.jsxs("form",{onSubmit:R,style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",width:"100%"},children:[r.jsxs("div",{className:"form-group",style:{flex:1,marginBottom:0},children:[r.jsx("input",{type:"text",required:!0,value:_,onChange:U=>T(U.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Clinic Name"})]}),r.jsx("button",{type:"submit",disabled:p,className:"auth-submit-button",style:{width:"auto",marginTop:0},children:"Go"})]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",maxHeight:"200px",overflowY:"auto",width:"100%"},children:C.map(U=>r.jsxs("button",{onClick:()=>{w(U),n("register")},className:"auth-text-input",style:{textAlign:"left",padding:"0.75rem",cursor:"pointer",height:"auto"},children:[r.jsx("div",{style:{fontWeight:600},children:U.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:U.address})]},U.id))}),r.jsx("button",{onClick:()=>n("login"),className:"auth-navigation-link",style:{background:"none",border:"none",cursor:"pointer",width:"100%",marginTop:"1rem"},children:"Back"})]}),e==="register"&&j&&r.jsxs("form",{onSubmit:q,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"text",required:!0,value:a,onChange:U=>i(U.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Phone Number"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"text",required:!0,value:x,onChange:U=>b(U.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Full Name"})]}),r.jsx("button",{type:"submit",disabled:p,className:"auth-submit-button",children:p?"Registering...":"Register"}),r.jsx("button",{onClick:()=>n("clinic_search"),className:"auth-navigation-link",style:{background:"none",border:"none",cursor:"pointer",width:"100%",marginTop:"1rem"},children:"Back"})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Are you a Doctor/Staff?"," ",r.jsx(vr,{to:"/login",className:"auth-navigation-link",children:"Staff Login"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},VDe=`You are an expert OPD (Outpatient Department) medical assistant for a Doctor in a clinic in India. You will receive all the medical data of the patient including complaints (history), labs, pharmacy orders, etc., along with their date and time. Your primary goal is to assist the doctor and analyze patient chief complaints (Co), provide a structured clinical assessment including lab test suggestions (Lx), differential diagnoses (Dx), and a treatment plan (Tx). You have access to tools (actions) to order lab tests and pharmacy items, and update patient details.



**1. Definitions:**
   - Co: Chief complaints
   - Pt: Patient (assume living in India)
   - Lx: Laboratory tests
   - Dx: Differential Diagnosis
   - Tx: Treatment Plan

**2. Workflow:**
   - Analyze Co, generate Lx, Dx, and Tx sections as described below.
   - **Prioritization for Orders:** Always prioritize using \`edit_pharmacy_order\` or \`edit_lab_order\` if there are existing pending orders for the patient, before considering \`create_pharmacy_order\` or \`create_lab_order\`.
   - using edit_lab_order edits the lab order with the given serial numnber use to add new tests to the existing order or remove the tests from existing order, marking the status affects all tests in the order not only the test,always use this tool if there are pending lab orders instead of creating new orders.
   - using edit_pharmacy_order edits the pharmacy order with the given serial numnber to add new items to the existing order, update existing items, or remove items (either by \`items_to_remove\` or by setting \`quantity\` to 0). Always use this tool if there are pending pharmacy orders instead of creating new orders.
   - using bill_lab_order will navigate the user to the billing page for the specific lab order. Use this when the user expresses intent to bill a lab order.
   - using create_and_bill_lab_order will create a new lab order and immediately bill it (navigating to the print/bill screen). Use this when the user says "create and bill", "order and bill", or similar for NEW tests.
   - using bill_pharmacy_order will bill an existing pharmacy order (identified by serial number).
   - using create_and_bill_pharmacy_order will create a new pharmacy order and immediately bill it. Use this when the user says "prescribe and bill", "order and bill meds", etc.
   - If your Lx section suggests tests from the inventory, use the \`create_lab_order\` action, but only for tests that are both clinically required and have not already been ordered or are still pending. Skip tests that are already ordered and in pending.
   - If your Tx section prescribes medications, use the \`create_pharmacy_order\` action  but only for medications that are clinically required and have not already been prescribed or are still pending. Skip medications that are already dispensed or already ordered.
   - If your Tx section prescribes medications that are *not* available in the inventory, use the \`prescription_for_unavailable_drugs\` parameter within the \`create_pharmacy_order\` action to specify the prescription details. **IMPORTANT:** This string MUST be a **Markdown table** with columns: 'Drug Name', 'Quantity', 'Dosage', 'Directions'. Do not use plain text.
   - When ordering pharmacy items, specify both \`pack_quantity\` (number of full packs) and \`loose_quantity\` (number of individual units). The system will handle the conversion based on the drug's pack size.
   - **Patient Details Management:** Always store or update patient name, age, sex, and phone number using the \`update_patient_details\` action. If patient name, age, or sex is received as 'New Patient - Direct Entry', 'N/A', or blank, treat it as missing data; if the user input provides anything resembling a name, age, or sex (e.g., shiva 25m, robin 50m, priya 19f), update them using the \`update_patient_details\` action. If details are missing, you can ask the user for the missing details using the \`ask_followup_question\` action.
   - Always update new complaints of the patient using the \`add_complaint_history\` action.
   - If you generate a concise summary of the patient's current situation based on the interaction and history, use the \`update_case_summary\` action to save it.
   - Remember, when you use \`update_case_summary\`, the previous case summary will be replaced by the new one, so you can use it like a short-term memory to store other stuff that **keeps changing**, like the current treatment plan, plan of action, active problems, or current vitals, etc.
   - When you use \`add_complaint_history\`, it will add the complaint to the previous ones. You will be given all the previous complaints back in every query, so you can use it to store other long-term facts that do **not change**, like the history of a chronic illness, surgical history, allergies, or social history, etc.
   - while placing or editing a pharmacy order make sure to set the \`pack_quantity\` and \`loose_quantity\` right.
   - Use the \`update_clinic_ai_memory\` action to store or update **various types of clinic-wide persistent information in a concise way**. This can include 'summaries of common patient encounters'+'summeries of previous **Clinic-wide AI Memory**'(e.g., 'Patient X, 50m, chronic gastritis, last visit YYYY-MM-DD, prescribed Z, follow-up in N days'+'**Clinic-wide AI Memory** summary'), notes on local health trends, common diagnostic patterns observed in the clinic, specific operational protocols. This memory is shared across all interactions for the clinic and helps tailor responses to its specific context over time.
    -   **Recurring Medications:**
        -   Use \`create_recurring_medication_order\` to add a new recurring medication.
        -   Use \`edit_recurring_medication_order\` to edit an existing recurring medication (using its serial number).
        -   Recurring medications are long-term prescriptions (e.g., for chronic conditions) that automatically re-order or remind.
    -   **Important: Preventing Loops** If you determine that no further actions are needed (e.g., you have already performed necessary actions, or the user's input does not require any specific action), you **MUST** use the \`end_task\` action. This explicitly signals that your task is complete and prevents the system from re-prompting you unnecessarily.
**3.**Multiple Actions:** You can perform multiple actions (like ordering labs AND meds, adding complaints, updating patient information, and asking a follow-up question) in a single response by including multiple action objects within the main JSON array.


**4. Chief Complaints (Co):**
   - Analyze the provided chief complaints.
   - Present them in a table with two columns: 'Relevant Complaint (Score 8-10)' and 'Irrelevant Complaint (Score 0-7)', based on clinical relevance.

**5. Lab Tests (Lx):**
   - Suggest the most probable basic lab tests based on the clinical picture, ordered by likelihood.
   - If a basic test is positive/abnormal, suggest relevant advanced tests.
   - **Inventory Check:** Compare suggested tests against the provided inventory list.
   - **Table 1: Available Lab Tests:** Present tests *available* in the inventory in a table with columns: '**Clinical Importance (High/Medium/Low)**', 'Lab Test'. If suggesting tests from this table, prepare to use the \`create_lab_order\` tool in your response.
   - **Table 2: Unavailable Lab Tests:** Present tests *not available* in the inventory in a separate table with columns: '**Clinical Importance (High/Medium/Low)**', 'Unavailable Basic Test'. Clearly state these are not orderable via the tool (generate Table 2 only when required tests are unavailable).

**6. Differential Diagnosis (Dx):**
   - List potential differential diagnoses.
   - Provide a confidence score (0-10) for each.
   - Present in a table with columns: 'Differential Diagnosis' and 'Confidence Score (0-10)'.

**7. Treatment Plan (Tx):**
   - Create a structured treatment plan including ideal medications based on the diagnosis.
   - **Inventory Check:** Compare prescribed medications against the provided inventory list.
   - **Table 1: Available Medications:** Present medications *available* in the inventory in a table with columns: 'Time Frame' (from and to dates), 'Treatment Goal', 'Intervention', 'Medication Type', 'Drug Form', 'Drug Name', 'Regimen (Dose, Freq)', 'Duration'. Before using the \`create_pharmacy_order\` tool, check if an order for the same drug has already been placed for this patient today. If an order already exists for today, do *not* create a duplicate order. If no order exists for today, prepare to use the \`create_pharmacy_order\` tool in your response.
   - **Table 2: Unavailable Medications:** Present medications *not available* in the inventory in a separate table with columns: 'Unavailable Drug Name', 'Ideal Regimen', 'Reasoning/Indication', '**Clinical Importance (High/Medium/Low)**', 'Suggested Available Substitute (from inventory, if possible)'. Clearly state these are not orderable via the tool (generate Table 2 only when required medications are unavailable in the inventory).

**8. Tools / Actions:**
   When you need to perform actions like ordering tests/meds, updating patient info, or adding history, use the following JSON array format. The response should ONLY contain this JSON array, nothing else.

   ****STRICT JSON****>>>>>>\`\`\`json
[
  { "action": "create_pharmacy_order", "items": [ { "name": "Drug Name", "pack_quantity": number, "loose_quantity": number, "tabletsPerDay": number | null, "numberOfDays": number | null, "directions_to_use": "string | null" } ], "prescription_for_unavailable_drugs": "string | null" },
  { "action": "edit_pharmacy_order", "serialNumber": number, "items": [ { "name": "Drug Name", "pack_quantity": number, "loose_quantity": number, "tabletsPerDay": number | null, "numberOfDays": number | null, "directions_to_use": "string | null" } ], "items_to_remove": [ { "drug_id": number | null, "name": "Drug Name" } ], "status": "pending" | "billed" | "dispensed" | "cancelled", "prescription_for_unavailable_drugs": "string | null" },
  { "action": "bill_pharmacy_order", "serialNumber": number },
  { "action": "create_and_bill_pharmacy_order", "items": [ { "name": "Drug Name", "pack_quantity": number, "loose_quantity": number, "tabletsPerDay": number | null, "numberOfDays": number | null, "directions_to_use": "string | null" } ], "prescription_for_unavailable_drugs": "string | null" },
  { "action": "create_lab_order", "tests": [ { "name": "Test Name" } ] },
  { "action": "edit_lab_order", "serialNumber": number, "tests": [ { "name": "Test Name" } ], "items_to_remove": [ { "id": number | string | null, "name": "Test Name" } ], "status": "pending" | "billed" | "collected" | "processing" | "report_ready" | "completed" | "cancelled" | "reported" },
  { "action": "create_lab_report", "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ] },
  { "action": "edit_lab_report", "serialNumber": number, "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ] },
  { "action": "create_lab_report", "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ] },
  { "action": "edit_lab_report", "serialNumber": number, "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ] },
  { "action": "edit_lab_order_and_create_report", "serialNumber": number, "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ], "items_to_remove": [ { "id": number | string | null, "name": "Test Name" } ] },
  { "action": "create_and_bill_lab_order", "tests": [ { "name": "Test Name" } ] },
  { "action": "add_complaint_history", "complaint": "Specific past complaint text..." },
  { "action": "update_patient_details", "name": "New Name (optional)", "age": number (optional), "gender": "M" | "F" | "O" | null (optional), "phone_number": "string (optional)" },
  { "action": "update_case_summary", "summary": "Concise summary text..." },
  { "action": "update_clinic_ai_memory", "memory_content": "New clinic-wide AI memory content..." },
  { "action": "create_recurring_medication_order", "items": [ { "medication_name": "Drug Name", "drug_id": "string | null", "quantity": number, "frequency_days": number, "next_delivery_date": "YYYY-MM-DD", "tablets_per_day": number | null, "number_of_days": number | null, "directions": "string | null", "notes": "string | null" } ] },
  { "action": "edit_recurring_medication_order", "serialNumber": number, "updates": { "medication_name": "string (opt)", "quantity": number, "frequency_days": number, "status": "active" | "paused" | "stopped", "next_delivery_date": "YYYY-MM-DD", "number_of_days": number, "tablets_per_day": number, "directions": "string" } },
  { "action": "end_task" }
]
\`\`\`

   - **Multiple Actions in One Response:** You can include multiple action objects within this single JSON array if several actions are required based on your analysis (e.g., adding history AND ordering labs).
   - **Prioritization Within the Array:** If including multiple actions, order them within the array according to this priority:
     1. \`add_complaint_history\`
     2. \`update_patient_details\`
     3. \`update_case_summary\`
     4. \`update_clinic_ai_memory\`
     5. \`create_lab_order\`
     6. \`edit_lab_order\`
     7. \`create_pharmacy_order\`
     8. \`edit_pharmacy_order\`
     9. \`bill_lab_order\`
   - **Structure:**
     The AI response can be a flat array of actions OR a list of "function call" objects containing grouped actions.
     **Option 1: Flat Array (Simple)**
     \`\`\`json
     [
       { "action": "add_complaint_history", ... },
       { "action": "create_lab_order", ... }
     ]
     \`\`\`
     **Option 2: Grouped Function Calls (Complex)**
     You can group actions under logical "function calls" if needed.
     \`\`\`json
     [
       {
         "function_call": "assess_patient",
         "actions": [
           { "action": "ask_followup_question", "question": "..." }
         ]
       },
       {
         "function_call": "prescribe_treatment",
         "actions": [
            { "action": "create_pharmacy_order", "items": [...] },
            { "action": "create_lab_order", "tests": [...] }
         ]
       }
     ]
     \`\`\`

   - **Example (Multiple Actions):**
     \`\`\`json
     [
       { "action": "add_complaint_history", "complaint": "Patient also reports mild fever since yesterday." },
       { "action": "create_lab_order", "tests": [ { "name": "CBC" } ] }
     ]
     \`\`\`

   - **\`ask_followup_question\`**: Use this action (either standalone or inside a group) only when you need clarification.
     \`\`\`json
     {
       "action": "ask_followup_question",
       "question": "Your clear, specific question here.",
       "options": ["Optional Answer 1", "Optional Answer 2"]
     }
     \`\`\`
     *Description:* Ask the user a question to gather additional information needed to complete the task. This tool should be used when you encounter ambiguities, need clarification, or require more details to proceed effectively. It allows for interactive problem-solving by enabling direct communication with the user. Use this tool judiciously to maintain a balance between gathering necessary information and avoiding excessive back-and-forth.
     *Parameters:*
       - question: (required) The question to ask the user. This should be a clear, specific question that addresses the information you need.
       - options: (optional) An array of 2-5 options for the user to choose from. Each option should be a string describing a possible answer. You may not always need to provide options, but it may be helpful in many cases where it can save the user from having to type out a response manually.
   - **\`bill_lab_order\`**: Use this action when the intention is to proceed to billing for a specific lab order.
     \`\`\`json
     { "action": "bill_lab_order", "serialNumber": number }
     \`\`\`
     *Description:* Initiates the billing process for a specific lab order, helping the user navigate to the billing screen.
     *Parameters:*
       - serialNumber: (required) The serial number of the lab order to bill.


**Important:**
- Ensure all tables are clearly formatted using Markdown.
- Strictly adhere to the inventory constraints for labs and medications when deciding whether to use \`create_lab_order\` or \`create_pharmacy_order\`.
- When using actions, provide ONLY the JSON array (or the single JSON object for \`ask_followup_question\`) as the *very last* part of your response, after all other content including tables. Do not include any other text after the JSON.

**Plan Mode:**
When the user asks a question about a patient's condition or general medical topics (not entering new medical data), respond in PLAN MODE. In this mode, focus on answering the user's inquiry, clarifying their request, brainstorming ideas, or architecting a solution (like exploring treatment options). Ask clarifying questions if needed. Present detailed plans or explanations **using clear table formats and markdown (like bolding) for easy readability**. Engage in back-and-back discussion to finalize details. Do not use action tools (\`create_lab_order\`, \`create_pharmacy_order\`, \`add_complaint_history\`, \`update_patient_details\`) while in PLAN MODE).`,Cz="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",HDe="models/gemini-3-flash-preview";async function GDe(){if(!vO())return console.warn("No auth token found, using default Gemini API key."),Cz;let e=null;try{const n=await le("/api/clinics/settings");if(n.ok){const a=await n.json();a.gemini_api_key&&a.gemini_api_key.trim()!==""&&(e=a.gemini_api_key.trim())}}catch(n){console.warn("Could not fetch clinic settings (or key missing), proceeding to global fallback.",n)}if(e)return e;try{const n=await le("/api/global-settings/app_gemini_api_key");if(n.ok){const i=(await n.json()).value;if(i&&i.trim()!=="")return i.trim()}}catch(n){console.warn("Could not fetch global API key.",n)}return console.warn("Clinic-specific and global Gemini API keys not found, using default env var."),Cz}let $A=null;async function oG(){if(!$A){const t=await GDe();$A=new xO({apiKey:t})}return $A}async function ZLe(t,e){const{query:n,currentDateTime:a,patientName:i,patientAge:s,patientGender:o,case_summary:l,case_summary_last_updated:c,clinic_ai_memory:u,clinic_ai_memory_last_updated:f,clinic_wide_system_prompt:p,labHistory:g,pharmacyOrders:x,pastComplaints:b,pharmacyInventory:j,labInventory:w,recurringMedications:_}=t;let T=`Patient Complaint: ${n}`;if(l&&(T+=`

--- Case Summary (Provided by Doctor) ---
${l}`,c))try{const B=new Date(c).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});T+=`
(Last Updated: ${B})`}catch{console.warn(`Could not format case_summary_last_updated: ${c}`),T+=`
(Last Updated: ${c})`}if(i&&(T+=`

Patient Name: ${i}`),s!=null&&(T+=`
Patient Age: ${s}`),o&&(T+=`
Patient Gender: ${o}`),a)try{const B=new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});T+=`

Current Interaction Time: ${B}`}catch{console.warn(`Could not format currentDateTime: ${a}`),T+=`

Current Interaction Time: ${a}`}if(u&&(T+=`

--- Clinic-wide AI Memory/Context ---
${u}`,f))try{const B=new Date(f).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});T+=`
(Last Updated: ${B})`}catch{console.warn(`Could not format clinic_ai_memory_last_updated: ${f}`),T+=`
(Last Updated: ${f})`}let C="";g&&Array.isArray(g)&&g.length>0&&(C=`

--- Lab History (Orders & Reports) ---
`,g.forEach(B=>{let V="Unknown Date";try{V=new Date(B.orderDate).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date for lab order: ${B.orderDate}`)}if(C+=`
Order #${B.serialNumber} Date: ${V} (Status: ${B.status})
`,C+=`Tests: ${B.tests.map(W=>W.name).join(", ")}
`,B.report){let W="Unknown Date";try{W=new Date(B.report.reportDate).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date for lab report: ${B.report.reportDate}`)}C+=`  -> Report Date: ${W}
`,B.report.tests&&Array.isArray(B.report.tests)?(C+=`     Findings:
`,B.report.tests.forEach(G=>{C+=`       - Test: ${G.testName}
`,G.parameters&&Array.isArray(G.parameters)&&G.parameters.forEach(z=>{C+=`         - ${z.name}: ${z.value} (Normal: ${z.normal_range})
`})})):(C+=`     Findings: ${B.report.reportContent||"N/A"}
`,B.report.error&&(C+=`     Note: ${B.report.error}
`))}C+=`---
`}),T+=C);let A="";x&&Array.isArray(x)&&x.length>0&&(A=`

--- Recent Pharmacy Orders ---
`,x.forEach(B=>{let V="Unknown Date/Time";try{V=new Date(B.date).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date/time for pharmacy order: ${B.date}`)}A+=`
Order #${B.serialNumber} Date/Time: ${V} (Status: ${B.status})
`,A+=`Prescribed By: ${B.prescribedBy||"N/A"}
`,B.dispensedBy&&(A+=`Dispensed By: ${B.dispensedBy}
`),A+=`Medications:
`,B.medications.forEach(W=>{A+=`  - ${W.name} (Qty: ${W.quantity}`,W.tabletsPerDay&&(A+=`, ${W.tabletsPerDay}/day`),W.numberOfDays&&(A+=` for ${W.numberOfDays} days`),A+=`)
`}),B.prescriptionForUnavailableDrugs&&(A+=`  Prescription for Unavailable Drugs: ${B.prescriptionForUnavailableDrugs}
`),A+=`---
`}),T+=A);let k="";_&&Array.isArray(_)&&_.length>0&&(k=`

--- Recurring Medications (Active) ---
`,_.forEach((B,V)=>{let W=`${V+1}. ${B.medicationName} (${B.frequencyDays} days)`;if(B.tabletsPerDay&&(W+=` - ${B.tabletsPerDay} tabs/day`),B.numberOfDays&&(W+=` for ${B.numberOfDays} days`),W+=` [Status: ${B.status}]`,B.nextDeliveryDate)try{const G=new Date(B.nextDeliveryDate).toLocaleDateString();W+=` (Next: ${G})`}catch{}k+=`${W}
`}),T+=k);let P="";b&&Array.isArray(b)&&b.length>0&&(P=`

--- Past Complaints History ---
`,b.forEach(B=>{let V="Unknown Date/Time";try{V=new Date(B.createdAt).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date/time for past complaint: ${B.createdAt}`)}P+=`
Date/Time: ${V}
Complaint: ${B.complaint||"N/A"}
---
`}),T+=P);let I="";j&&Array.isArray(j)&&j.length>0&&(I=`

--- Current Pharmacy Inventory (Stock Levels) ---
`,j.forEach(B=>{let V=`${B.stock??0} packs`;B.loose!==void 0&&B.loose!==null&&B.loose>0&&(V+=`, ${B.loose} loose`);let W=`- ${B.name} (Pack: ${B.pack??"N/A"}): ${V}`;const G=[];B.brand_name&&G.push(`Brand: ${B.brand_name}`),B.batch&&G.push(`Batch: ${B.batch}`),B.expiry_date&&G.push(`Exp: ${B.expiry_date}`),G.length>0&&(W+=` [${G.join(", ")}]`),I+=`${W}
`}),T+=I);let R="";w&&Array.isArray(w)&&w.length>0&&(R=`

--- Available Lab Tests (with Parameters) ---
`,w.forEach(B=>{R+=`- ${B.name} (Price: ${B.price??"N/A"})
`,B.default_parameters&&Array.isArray(B.default_parameters)&&B.default_parameters.length>0&&B.default_parameters.forEach(V=>{let W=`    * ${V.name}`;V.unit&&(W+=` (${V.unit})`),V.normal_range?W+=` [Normal: ${V.normal_range}]`:V.lower_limit!==void 0&&V.upper_limit!==void 0&&V.lower_limit!==null&&V.upper_limit!==null&&(W+=` [Normal: ${V.lower_limit} - ${V.upper_limit}]`),R+=`${W}
`})}),T+=R);const q=[{text:VDe}];p&&p.trim()!==""&&q.push({text:`--- Additional Clinic-Specific Instructions ---
${p}`});const U=[{text:T}];if(e){const B=new FileReader,V=await new Promise((W,G)=>{B.onloadend=()=>{typeof B.result=="string"?W(B.result.split(",")[1]):G(new Error("Failed to read image file as base64."))},B.onerror=G,B.readAsDataURL(e)});U.push({inlineData:{mimeType:e.type,data:V}})}const F=[];q.length>0&&F.push({role:"user",parts:q}),F.push({role:"user",parts:U});try{const B={model:HDe,contents:F,generationConfig:{temperature:.7,maxOutputTokens:1024,responseMimeType:"text/plain"}},W=await(await oG()).models.generateContentStream(B);let G="";for await(const z of W)if(z&&typeof z.text=="function"){const Y=z.text;Y&&(G+=Y)}else z&&z.candidates&&z.candidates[0]&&z.candidates[0].content&&z.candidates[0].content.parts&&z.candidates[0].content.parts[0]&&z.candidates[0].content.parts[0].text&&(G+=z.candidates[0].content.parts[0].text);if(G&&G.trim()!=="")return G.trim();throw console.error("Empty or invalid response received from Gemini API stream."),new Error("Failed to get suggestion from AI (Gemini). Empty or invalid stream response.")}catch(B){console.error("Error calling Gemini API:",B);let V="Failed to get suggestion from Gemini.";throw B.message&&(V=`Error processing Gemini request: ${B.message}`),new Error(V)}}const WDe=`You are a helpful, empathetic, and clear medical assistant for a patient using the OPD Zero app.
Your goal is to answer the patient's questions about their medical history, lab results, and prescriptions based ONLY on the provided context.

**Guidelines:**
1.  **Audience:** You are talking directly to the patient or their family member. Use simple, non-medical language where possible. Explain medical terms if you must use them.
2.  **Tone:** Be reassuring, professional, and polite.
3.  **Scope:** Answer questions *only* using the information provided in the context (Lab Reports, Pharmacy Orders, Medical Visits).
4.  **No Diagnosis:** Do NOT diagnose new conditions or prescribe new medications. You are an AI assistant helping them understand existing records. If they ask for medical advice about a new problem, advise them to visit the clinic.
5.  **Context-Aware:** You will receive a filtered history for specific patients (e.g., just "Ramesh's" history). Answer specifically about that person.
6.  **Formatting:** Use Markdown to make your answers easy to read (lists, bold text for emphasis).
7.  **Safety:** If a user asks something harmful or completely unrelated to their medical records, politely decline.

**What you can do:**
- Explain what a specific lab test means (e.g., "What is HbA1c?").
- Summarize their last visit.
- List their active medications.
- Clarify instructions (e.g., "How do I take this medicine?" if instructions are in the record).
`,YDe="models/gemini-3-flash-preview";async function KDe(t,e){var o,l,c,u,f;const{patientName:n,history:a}=e;let i=`Current Patient Context: **${n}**

`;!a||a.length===0?i+=`No medical history records found for this patient.
`:(i+=`Medical Records:
`,a.forEach(p=>{const g=new Date(p.date).toLocaleDateString();p.type==="medical"?i+=`- [${g}] Medical Visit at ${p.clinicName}: ${p.description}
`:p.type==="lab"?(i+=`- [${g}] Lab Report at ${p.clinicName}:
  Tests: ${p.description}
`,p.tests&&Array.isArray(p.tests)&&p.tests.forEach(x=>{i+=`    * ${x.testName}`,x.parameters&&x.parameters.forEach(b=>i+=` (${b.name}: ${b.value})`),i+=`
`}),p.report_content&&(i+=`  Summary: ${p.report_content}
`)):p.type==="pharmacy"&&(i+=`- [${g}] Pharmacy Order at ${p.clinicName} (${p.description})
`,p.medications&&Array.isArray(p.medications)&&p.medications.forEach(x=>{i+=`    * ${x.name} (Qty: ${x.quantity})
`}))}));const s=`Patient Question: "${t}"

${i}`;try{const g=await(await oG()).models.generateContent({model:YDe,contents:[{role:"user",parts:[{text:WDe}]},{role:"model",parts:[{text:"Understood. I will act as a helpful medical assistant for the patient, following all the guidelines."}]},{role:"user",parts:[{text:s}]}],config:{maxOutputTokens:4096,temperature:.7}}),x=(f=(u=(c=(l=(o=g==null?void 0:g.candidates)==null?void 0:o[0])==null?void 0:l.content)==null?void 0:c.parts)==null?void 0:u[0])==null?void 0:f.text;if(x)return x;throw new Error("Empty response from AI.")}catch(p){throw console.error("Patient AI Chat Error:",p),new Error("I'm having trouble connecting right now. Please try again later.")}}const zA="pac_selectedPatients",QDe=({isOpen:t,onClose:e,initialPatientName:n,fullHistory:a,allPatientNames:i,initialSelectedNames:s,onSelectionChange:o})=>{const[l,c]=v.useState([]),[u,f]=v.useState(""),[p,g]=v.useState(!1),x=v.useRef(null),[b,j]=v.useState(s),w=v.useRef(null),[_,T]=v.useState(!0),[C,A]=v.useState([]),k=()=>{var B;(B=x.current)==null||B.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{if(t){let B=[];try{const W=localStorage.getItem(zA);W&&(B=JSON.parse(W))}catch{}const V=B.length>0?B.filter(W=>i.includes(W)):s;j(V),A(V),i.length>1&&V.length===0?T(!0):(T(!1),setTimeout(()=>{var W;return(W=w.current)==null?void 0:W.focus()},50),setTimeout(()=>{var W;return(W=w.current)==null?void 0:W.focus()},200))}},[t,s,i]),v.useEffect(()=>{if(t&&!_&&l.length===0){const B=b.length>0?b.join(" & "):n||"your";c([{role:"model",text:`Hello! I'm your digital health assistant. I can help answer questions about **${B}**'s medical records. What would you like to know?`}])}},[t,_,n,b]),v.useEffect(()=>{k()},[l,p]);const P=B=>{j(B);try{localStorage.setItem(zA,JSON.stringify(B))}catch{}o==null||o(B)},I=B=>{j(V=>{const W=V.includes(B)?V.filter(G=>G!==B):[...V,B];try{localStorage.setItem(zA,JSON.stringify(W))}catch{}return o==null||o(W),W})},R=B=>{A(V=>V.includes(B)?V.filter(W=>W!==B):[...V,B])},q=()=>{P(C),T(!1),c([]),setTimeout(()=>{var B;return(B=w.current)==null?void 0:B.focus()},100)},U=()=>b.length===0?a:a.filter(B=>b.includes(B.patientName)),F=async()=>{if(!u.trim()||p)return;const B=u.trim();f(""),c(V=>[...V,{role:"user",text:B}]),g(!0);try{const V=U(),G={patientName:b.length>0?b.join(", "):n||"Patient",history:V},z=await KDe(B,G);c(Y=>[...Y,{role:"model",text:z}])}catch{c(W=>[...W,{role:"model",text:"I'm sorry, I encountered an error while trying to answer your question. Please try again."}])}finally{g(!1)}};return t?_&&i.length>1?r.jsx("div",{className:"pac-overlay",children:r.jsxs("div",{className:"pac-window pac-selector-window",children:[r.jsx("div",{className:"pac-header",children:r.jsxs("div",{className:"pac-header-top",children:[r.jsxs("div",{className:"pac-title-row",children:[r.jsx("div",{className:"pac-avatar",children:r.jsx(zi,{size:24})}),r.jsxs("div",{className:"pac-title-text",children:[r.jsx("h3",{children:"Who do you want to ask about?"}),r.jsx("p",{className:"pac-subtitle",children:"Select patient(s) or continue with all"})]})]}),r.jsx("button",{onClick:e,className:"pac-close-btn",children:r.jsx(Rt,{size:20})})]})}),r.jsx("div",{className:"pac-selector-body",children:i.map(B=>r.jsxs("button",{className:`pac-patient-card ${C.includes(B)?"selected":""}`,onClick:()=>R(B),children:[r.jsx("div",{className:"pac-patient-icon",children:r.jsx(Yn,{size:20})}),r.jsx("span",{className:"pac-patient-name",children:B}),r.jsx("div",{className:`pac-check ${C.includes(B)?"checked":""}`,children:C.includes(B)&&""})]},B))}),r.jsxs("div",{className:"pac-selector-footer",children:[r.jsxs("button",{className:"pac-start-btn secondary",onClick:()=>{A([]),q()},children:[r.jsx(zi,{size:16}),"Ask about all"]}),r.jsxs("button",{className:"pac-start-btn primary",disabled:C.length===0,onClick:q,children:["Continue",r.jsx(RQ,{size:16})]})]})]})}):r.jsx("div",{className:"pac-overlay",children:r.jsxs("div",{className:"pac-window",children:[r.jsxs("div",{className:"pac-header",children:[r.jsxs("div",{className:"pac-header-top",children:[r.jsxs("div",{className:"pac-title-row",children:[r.jsx("div",{className:"pac-avatar",children:r.jsx(jf,{size:24})}),r.jsxs("div",{className:"pac-title-text",children:[r.jsx("h3",{children:"Ask AI"}),r.jsx("p",{className:"pac-subtitle",children:b.length===0?"All Records":b.join(", ")})]})]}),r.jsx("button",{onClick:e,className:"pac-close-btn",children:r.jsx(Rt,{size:20})})]}),r.jsxs("div",{className:"pac-filters",children:[r.jsx("button",{className:`pac-chip ${b.length===0?"active":""}`,onClick:()=>P([]),children:"All Records"}),i.map(B=>r.jsx("button",{className:`pac-chip ${b.includes(B)?"active":""}`,onClick:()=>I(B),children:B},B))]})]}),r.jsxs("div",{className:"pac-messages",children:[l.map((B,V)=>r.jsx("div",{className:`pac-msg-row ${B.role}`,children:r.jsx("div",{className:`pac-bubble ${B.role} pac-markdown`,children:r.jsx(fd,{remarkPlugins:[pd],components:{ul:({node:W,...G})=>r.jsx("ul",{...G}),ol:({node:W,...G})=>r.jsx("ol",{...G}),strong:({node:W,...G})=>r.jsx("strong",{style:{fontWeight:700},...G})},children:B.text})})},V)),p&&r.jsx("div",{className:"pac-msg-row model",children:r.jsxs("div",{className:"pac-typing",children:[r.jsx("div",{className:"pac-dot"}),r.jsx("div",{className:"pac-dot"}),r.jsx("div",{className:"pac-dot"})]})}),r.jsx("div",{ref:x})]}),r.jsx("div",{className:"pac-input-zone",children:r.jsxs("form",{className:"pac-input-wrapper",onSubmit:B=>{B.preventDefault(),F()},children:[r.jsx("input",{ref:w,type:"text",value:u,onChange:B=>f(B.target.value),placeholder:"Type a message...",className:"pac-input",autoFocus:!0}),r.jsx("button",{type:"submit",disabled:!u.trim()||p,className:"pac-send-btn",children:r.jsx(Db,{size:18})})]})})]})}):null},XDe=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(()=>{try{const Q=localStorage.getItem("pac_selectedPatients");if(Q)return JSON.parse(Q)}catch{}return[]}),[c,u]=v.useState([]),[f,p]=v.useState(null),[g,x]=v.useState(!1),[b,j]=v.useState(null),[w,_]=v.useState({name:"",age:"",gender:"M"}),[T,C]=v.useState(!1),A=Lt();v.useEffect(()=>{const Q=localStorage.getItem("currentUser");if(!Q){A("/patient-login");return}p(JSON.parse(Q)),(async()=>{try{const $=await le("/api/auth/patient-history/global");if($.ok){const ie=await $.json();e(ie.history||[]),u(ie.profiles||[])}else s("Failed to fetch medical records.")}catch($){console.error("Error fetching patient history:",$),s("A server error occurred. Please try again later.")}finally{a(!1)}})()},[A]);const k=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),A("/patient-login")},P=Array.from(new Set(t.map(Q=>Q.patientName).filter(Boolean))),I=o.length===0?t:t.filter(Q=>o.includes(Q.patientName)),R=Q=>{l(K=>{const $=K.includes(Q)?K.filter(ie=>ie!==Q):[...K,Q];try{localStorage.setItem("pac_selectedPatients",JSON.stringify($))}catch{}return $})},q=Q=>{l(Q);try{localStorage.setItem("pac_selectedPatients",JSON.stringify(Q))}catch{}},U=(Q,K)=>{var xe;Q.stopPropagation();const $=c.filter(X=>X.name===K);if($.length===0)return;const ie=$[0];j({...ie,allIds:$.map(X=>X.id)}),_({name:ie.name,age:((xe=ie.age)==null?void 0:xe.toString())||"",gender:ie.gender||"M"}),x(!0)},F=async Q=>{if(Q.preventDefault(),!(!b||!b.allIds)){a(!0);try{const K=b.allIds.map($=>le(`/api/auth/patient/${$}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:w.name,age:w.age?parseInt(w.age):null,gender:w.gender})}));if(await Promise.all(K),u($=>$.map(ie=>b.allIds.includes(ie.id)?{...ie,name:w.name,age:w.age,gender:w.gender}:ie)),e($=>$.map(ie=>b.allIds.includes(ie.patientId)?{...ie,patientName:w.name}:ie)),o.includes(b.name)&&l($=>$.map(ie=>ie===b.name?w.name:ie)),b.allIds.includes(f==null?void 0:f.id)){const $={...f,name:w.name};p($),localStorage.setItem("currentUser",JSON.stringify($))}x(!1)}catch(K){console.error("Update error:",K),alert("Failed to update some records. Please try again.")}finally{a(!1)}}},B=I.reduce((Q,K)=>{const $=new Date(K.date).toISOString().split("T")[0],ie=`${K.clinicId}-${$}`;return Q[ie]||(Q[ie]={clinicId:K.clinicId,clinicName:K.clinicName,patientName:K.patientName,date:$,items:[]}),Q[ie].items.push(K),Q},{}),V=Object.values(B).sort((Q,K)=>new Date(K.date).getTime()-new Date(Q.date).getTime()),W=Q=>{const K={year:"numeric",month:"short",day:"numeric"};return new Date(Q).toLocaleDateString(void 0,K)},G=Q=>{switch(Q){case"lab":return r.jsx(Xr,{size:16});case"pharmacy":return r.jsx(so,{size:16});case"medical":return r.jsx(MI,{size:16});default:return r.jsx(zg,{size:16})}},z=Q=>{if(!Q.report_content||!Q.tests)return null;try{const K=JSON.parse(Q.report_content||"{}");if(typeof K=="object"&&K!==null)return r.jsx("div",{className:"detail-table-container",children:Q.tests.map($=>r.jsxs("div",{className:"test-group",children:[r.jsx("h5",{className:"test-title",children:$.name}),K[$.id]?r.jsxs("table",{className:"record-detail-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(K[$.id]).map(([ie,xe])=>{var Ie;const X=(Ie=$.default_parameters)==null?void 0:Ie.find($e=>$e.name===ie);return r.jsxs("tr",{children:[r.jsx("td",{children:ie}),r.jsxs("td",{children:[String(xe)," ",(X==null?void 0:X.unit)||""]}),r.jsx("td",{className:"normal-range",children:(X==null?void 0:X.normal_range)||"N/A"})]},ie)})})]}):r.jsx("p",{className:"no-data",children:"No results recorded."})]},$.id))})}catch{return r.jsx("div",{className:"raw-content",children:Q.report_content})}return null},Y=Q=>!Q.medications||Q.medications.length===0?null:r.jsx("div",{className:"detail-table-container",children:r.jsxs("table",{className:"record-detail-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Drug Name"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Dosage"}),r.jsx("th",{children:"Directions"})]})}),r.jsx("tbody",{children:Q.medications.map((K,$)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:K.name})}),r.jsx("td",{children:K.loose_quantity||K.pack_quantity||"-"}),r.jsx("td",{children:K.tabletsPerDay&&K.numberOfDays?`${K.tabletsPerDay} tab/day for ${K.numberOfDays} days`:"-"}),r.jsx("td",{children:K.directions_to_use||"-"})]},K.id||$))})]})});return n?r.jsxs("div",{className:"patient-dashboard-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Loading your medical profile..."})]}):r.jsxs("div",{className:"patient-history-container",children:[r.jsxs("header",{className:"patient-history-header",children:[r.jsxs("div",{className:"header-content",children:[r.jsxs("div",{className:"welcome-section",children:[r.jsxs("h1",{children:["Hello, ",f==null?void 0:f.name]}),r.jsx("p",{className:"welcome-subtitle",children:"Unified Medical Records"})]}),r.jsx("button",{onClick:k,className:"logout-btn",title:"Logout",children:r.jsx(aq,{size:20})})]}),P.length>0&&r.jsx("div",{className:"name-filter-section",children:r.jsxs("div",{className:"name-filter-bar",children:[r.jsx("button",{className:`filter-chip ${o.length===0?"active":""}`,onClick:()=>l([]),children:"All Records"}),P.map(Q=>r.jsxs("div",{className:`filter-chip-wrapper ${o.includes(Q)?"active":""}`,children:[r.jsx("button",{className:"filter-chip-text",onClick:()=>R(Q),children:Q}),r.jsx("button",{className:"filter-chip-edit",onClick:K=>U(K,Q),title:"Edit Profile",children:r.jsx(Os,{size:12})})]},Q)),r.jsxs("button",{className:"filter-chip ai-chip",onClick:()=>{console.log("Ask AI clicked, setting open to true"),C(!0)},children:[r.jsx(jf,{size:14}),"Ask AI"]})]})})]}),g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"edit-profile-modal glass-card",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Edit Profile"}),r.jsx("button",{onClick:()=>x(!1),className:"close-btn",children:r.jsx(Rt,{size:20})})]}),r.jsxs("form",{onSubmit:F,className:"edit-profile-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name"}),r.jsx("input",{type:"text",required:!0,value:w.name,onChange:Q=>_({...w,name:Q.target.value}),className:"modal-input"})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Age"}),r.jsx("input",{type:"number",value:w.age,onChange:Q=>_({...w,age:Q.target.value}),className:"modal-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Gender"}),r.jsxs("select",{value:w.gender,onChange:Q=>_({...w,gender:Q.target.value}),className:"modal-input",children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"cancel-btn",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:n,className:"save-btn",children:[r.jsx(Bi,{size:16}),n?"Saving...":"Save Changes"]})]})]})]})}),r.jsxs("main",{className:"history-main",children:[i&&r.jsxs("div",{className:"error-card glass-card",children:[r.jsx(Fr,{size:20}),r.jsx("p",{children:i})]}),V.length===0&&!i?r.jsxs("div",{className:"empty-state glass-card",children:[r.jsx(MI,{size:40}),r.jsx("h3",{children:"No records found"}),r.jsx("p",{children:"We couldn't find any medical records associated with your phone number."})]}):r.jsx("div",{className:"timeline-container",children:V.map(Q=>r.jsxs("div",{className:"visit-card glass-card",children:[r.jsxs("div",{className:"visit-header",children:[r.jsxs("div",{className:"visit-clinic",children:[r.jsx(KD,{size:14}),r.jsxs("span",{children:[Q.clinicName," ",Q.patientName&&r.jsxs("span",{className:"patient-name-tag",children:["(",Q.patientName,")"]})]})]}),r.jsxs("div",{className:"visit-date",children:[r.jsx(ia,{size:14}),r.jsx("span",{children:W(Q.date)})]})]}),r.jsx("div",{className:"visit-items",children:Q.items.map(K=>r.jsxs("div",{className:"visit-item",children:[r.jsx("div",{className:`item-icon ${K.type}-icon`,children:G(K.type)}),r.jsxs("div",{className:"item-details",children:[r.jsxs("div",{className:"item-meta",children:[r.jsx("span",{className:"item-type",children:K.type}),r.jsx("span",{className:"item-time",children:new Date(K.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.jsx("h4",{className:"item-main-title",children:K.description||K.title}),K.type==="lab"&&z(K),K.type==="pharmacy"&&Y(K),K.type==="medical"&&K.description&&r.jsx("p",{className:"medical-desc",children:K.description})]})]},`${K.type}-${K.id}`))})]},`${Q.clinicId}-${Q.date}`))})]}),r.jsx("footer",{className:"patient-footer",children:r.jsx("p",{children:"from Newtons AI"})}),r.jsx(QDe,{isOpen:T,onClose:()=>C(!1),initialPatientName:(f==null?void 0:f.name)||"Patient",fullHistory:t,allPatientNames:P,initialSelectedNames:o,onSelectionChange:q})]})},JDe=()=>{const[t,e]=v.useState(""),[n,a]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(null),[f,p]=v.useState(!1),g=Lt(),x=async b=>{b.preventDefault(),p(!0),u(null);try{const j=await le("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:t,userName:n,userEmail:i,userPassword:o})}),w=await j.json();if(!j.ok)throw new Error(w.message||`HTTP error! status: ${j.status}`);console.log("Registration successful:",w),g("/login")}catch(j){console.error("Registration failed:",j),u(j.message||"Registration failed. Please try again.")}finally{p(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:t,onChange:b=>e(b.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:n,onChange:b=>a(b.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:i,onChange:b=>s(b.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"userEmail",children:"Email"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:o,onChange:b=>l(b.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"userPassword",children:"Password"})]}),c&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:c})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:f,className:"auth-submit-button",children:f?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(vr,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},ZDe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i})=>{const s=Br(),[o,l]=v.useState(""),c=iG[n]||[],[u,f]=v.useState(500),p=v.useRef(!1),g=v.useCallback(w=>{p.current=!0,w.preventDefault()},[]),x=v.useCallback(()=>{p.current=!1},[]),b=v.useCallback(w=>{if(p.current){const _=window.innerWidth-w.clientX;_>250&&_<window.innerWidth*.8&&f(_)}},[]);v.useEffect(()=>(window.addEventListener("mousemove",b),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",x)}),[b,x]);const j=c.map(w=>({...w,links:w.links.filter(_=>_.name.toLowerCase().includes(o.toLowerCase()))})).filter(w=>w.links.length>0);return r.jsxs("div",{className:`side-panel ${a?"open":""}`,style:{width:`${u}px`,right:a?"0":`-${u}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:g}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(vr,{to:"/dashboard",className:"home-button",onClick:i,children:r.jsx(Wu,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Em,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:o,onChange:w=>l(w.target.value)})]}),r.jsx("button",{className:"close-button",onClick:i,children:""})]}),r.jsx("nav",{children:j.map((w,_)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:w.title}),r.jsx("ul",{className:"sub-page-list",children:w.links.map(T=>{const C=T.icon;return r.jsx("li",{children:r.jsxs(vr,{to:T.path,className:s.pathname===T.path?"active":"",onClick:i,children:[C&&r.jsx(C,{})," ",T.name]})},T.path)})})]},_))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(aG,{})," Logout"]})]})]})},eOe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i,roleNavigation:s})=>{const o=Br(),l=s[n]||[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mobile-side-panel-overlay ${a?"open":""}`,onClick:i}),r.jsxs("div",{className:`mobile-side-panel ${a?"open":""}`,children:[r.jsxs("div",{className:"mobile-side-panel-header",children:[r.jsx("h3",{children:"Menu"}),r.jsx("button",{className:"close-button",onClick:i,children:r.jsx(oDe,{})})]}),r.jsx("nav",{children:l.map((c,u)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:c.title}),r.jsx("ul",{className:"sub-page-list",children:c.links.map(f=>{const p=f.icon;return r.jsx("li",{children:r.jsxs(vr,{to:f.path,className:o.pathname===f.path?"active":"",onClick:i,children:[p&&r.jsx(p,{})," ",f.name]})},f.path)})})]},u))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(aG,{})," Logout"]})]})]})]})},Uu={"/dashboard":{label:"Dashboard"},"/dashboard/staff":{label:"Staff Management",parent:"/dashboard"},"/dashboard/staff/add":{label:"Add Staff",parent:"/dashboard/staff"},"/dashboard/staff/edit":{label:"Edit Staff",parent:"/dashboard/staff"},"/dashboard/roles":{label:"Role Management",parent:"/dashboard"},"/dashboard/patients":{label:"All Patients",parent:"/dashboard"},"/dashboard/patients/add":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search-patient":{label:"Search Patient",parent:"/dashboard"},"/dashboard/clinic-hub":{label:"Clinic Hub",parent:"/dashboard"},"/dashboard/reception":{label:"Appointment Queue",parent:"/dashboard"},"/dashboard/pharmacy-queue":{label:"Pharmacy Queue",parent:"/dashboard"},"/dashboard/lab":{label:"Lab Panel",parent:"/dashboard"},"/dashboard/inventory":{label:"Inventory",parent:"/dashboard"},"/dashboard/inventory/add":{label:"Add Drug",parent:"/dashboard/inventory"},"/dashboard/inventory/edit":{label:"Edit Drug",parent:"/dashboard/inventory"},"/dashboard/purchase":{label:"Purchase",parent:"/dashboard"},"/dashboard/distributors":{label:"Distributors",parent:"/dashboard"},"/dashboard/patient-debts":{label:"Patient Debts",parent:"/dashboard"},"/dashboard/add-order":{label:"Add Pharmacy Order",parent:"/dashboard"},"/dashboard/edit-pharmacy-order":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/pharmacy-billing":{label:"Pharmacy Billing",parent:"/dashboard"},"/dashboard/analysis":{label:"Analysis",parent:"/dashboard"},"/dashboard/settings":{label:"Settings",parent:"/dashboard"},"/dashboard/search-patient-records":{label:"Search Records",parent:"/dashboard"},"/dashboard/queue":{label:"Queue",parent:"/dashboard"},"/dashboard/add-patient":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search":{label:"Patient Search",parent:"/dashboard"},"/dashboard/patients/search":{label:"Search Patient",parent:"/dashboard"},"/dashboard/subscriptions":{label:"Subscriptions",parent:"/dashboard"},"/dashboard/subscriptions/add":{label:"Add Plan",parent:"/dashboard/subscriptions"},"/dashboard/subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/subscriptions"},"/dashboard/clinic-subscriptions":{label:"Clinic Subscriptions",parent:"/dashboard"},"/dashboard/clinic-subscriptions/add":{label:"Add Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/clinic-subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/users":{label:"User Management",parent:"/dashboard"},"/dashboard/lab-billing":{label:"Lab Billing",parent:"/dashboard"},"/lab-inventory":{label:"Lab Inventory",parent:"/dashboard"},"/lab/search-report":{label:"Search Lab Report",parent:"/dashboard"},"/create-lab-order":{label:"Create Lab Order",parent:"/dashboard"},"/enter-lab-report":{label:"Enter Lab Report",parent:"/dashboard"},"/view-lab-report":{label:"View Lab Report",parent:"/dashboard"},"/lab/report/:id":{label:"Lab Report",parent:"/lab/search-report"},"/lab/enter-report/:id":{label:"Enter Report",parent:"/lab/search-report"},"/lab/view-report/:id":{label:"View Report",parent:"/lab/search-report"},"/billing":{label:"Billing",parent:"/dashboard"},"/dashboard/doctor-billing":{label:"Doctor Billing",parent:"/dashboard"},"/dashboard/doctor-billing/:id":{label:"Doctor Bill",parent:"/dashboard/doctor-billing"},"/create-custom-bill":{label:"Create Custom Bill",parent:"/dashboard"},"/patient":{label:"Patient",parent:"/dashboard"},"/patient/:id/admission-billing":{label:"Admission Billing",parent:"/manage-admission"},"/patient/:id/admission-bill":{label:"Admission Bill",parent:"/patient/:id/admission-billing"},"/patient/:id/lab-reports":{label:"Lab Reports",parent:"/patient"},"/patient/:id/pharmacy-orders":{label:"Pharmacy Orders",parent:"/patient"},"/patient/:id/complaints":{label:"Past Complaints",parent:"/patient"},"/edit-complaint":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/:id":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/patient/:id":{label:"New Complaint",parent:"/dashboard"},"/start-subscription":{label:"Start Subscription",parent:"/dashboard"},"/start-subscription/:id":{label:"Start Subscription",parent:"/dashboard"},"/manage-admission":{label:"Manage Admission",parent:"/dashboard"},"/dashboard/guide":{label:"User Guide",parent:"/dashboard"},"/custom-tables":{label:"Custom Tables",parent:"/dashboard"},"/custom-tables/:id":{label:"Table Records",parent:"/custom-tables"},"/dashboards":{label:"Dashboards",parent:"/dashboard"},"/dashboards/new":{label:"New Dashboard",parent:"/dashboards"},"/dashboards/:id":{label:"Dashboard View",parent:"/dashboards"},"/dashboards/:id/edit":{label:"Edit Dashboard",parent:"/dashboards"},"/dashboard/pharmacy-billing/:id":{label:"Pharmacy Bill",parent:"/dashboard/pharmacy-billing"},"/dashboard/lab-billing/:id":{label:"Lab Bill",parent:"/dashboard/lab-billing"},"/dashboard/edit-pharmacy-order/:id":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/orders/:id":{label:"Order Details",parent:"/dashboard/add-order"},"/refill-reminders":{label:"Refill Reminders",parent:"/dashboard"},"/start-clinic-subscription":{label:"Start Clinic Subscription",parent:"/dashboard"},"/dashboard/all-patients":{label:"All Patients",parent:"/dashboard"}},Tz=t=>t.split("/").map(e=>{const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),a=/^\d+$/.test(e);return n||a?":id":e}).join("/"),tOe=t=>{if(Uu[t])return Uu[t].label;const e=Tz(t);if(Uu[e])return Uu[e].label;const n=t.split("/"),a=n[n.length-1],i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a),s=/^\d+$/.test(a);if(i||s){const o=n.slice(0,-1).join("/"),l=Tz(o);if(Uu[l])return Uu[l].label;if(Uu[o])return Uu[o].label}return a.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},nOe=()=>{const t=Br(),e=v.useMemo(()=>{const n=t.pathname.split("/").filter(s=>s!=="");if(n.length===0||n[0]==="login"||n[0]==="registration")return[];const a=[];let i="";return n.forEach((s,o)=>{if(i+=`/${s}`,o===0&&s==="dashboard")a.push({label:"Home",path:"/dashboard",isLast:o===n.length-1});else if(s!=="dashboard"){const l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s),c=/^\d+$/.test(s);let u=tOe(i);(l||c)&&u.replace(/\s/g,"").toLowerCase()===s.replace(/[-_]/g,"").toLowerCase()&&(l?u=`#${s.substring(0,8)}`:c&&(u=`#${s}`)),a.push({label:u,path:i,isLast:o===n.length-1})}}),n[0]!=="dashboard"&&a.length>0&&a.unshift({label:"Home",path:"/dashboard",isLast:!1}),a},[t.pathname]);return e.length===0?null:r.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:r.jsx("ol",{className:"breadcrumb-list",children:e.map((n,a)=>r.jsxs("li",{className:"breadcrumb-item",children:[a>0&&r.jsx(yd,{className:"breadcrumb-separator",size:14}),n.isLast?r.jsxs("span",{className:"breadcrumb-current","aria-current":"page",children:[a===0&&r.jsx(CE,{size:14,className:"breadcrumb-home-icon"}),n.label]}):r.jsxs(vr,{to:n.path,className:"breadcrumb-link",children:[a===0&&r.jsx(CE,{size:14,className:"breadcrumb-home-icon"}),n.label]})]},n.path))})})},rOe="_container_1bwyv_5",aOe="_visualContainer_1bwyv_33",iOe="_mobileDashboardGrid_1bwyv_49",sOe="_mobileDashboardItem_1bwyv_87",oOe="_mobileDashboardIcon_1bwyv_195",lOe="_mobileDashboardLabel_1bwyv_233",cOe="_brandTitle_1bwyv_331",uOe="_searchBar_1bwyv_387",dOe="_searchIconWrapper_1bwyv_435",hOe="_searchIcon_1bwyv_435",fOe="_placeholderText_1bwyv_459",pOe="_shortcutHint_1bwyv_479",mOe="_key_1bwyv_495",gOe="_plus_1bwyv_519",yOe="_micButtonWrapper_1bwyv_529",xOe="_micIcon_1bwyv_577",vOe="_newlyRegisteredSection_1bwyv_901",bOe="_recentList_1bwyv_917",jOe="_recentPatientPill_1bwyv_931",wOe="_recentNameContainer_1bwyv_957",NOe="_recentInfo_1bwyv_969",SOe="_newlyRegisteredLabel_1bwyv_1007",_Oe="_recentName_1bwyv_957",COe="_recentToken_1bwyv_1171",Nr={container:rOe,visualContainer:aOe,mobileDashboardGrid:iOe,mobileDashboardItem:sOe,mobileDashboardIcon:oOe,mobileDashboardLabel:lOe,brandTitle:cOe,searchBar:uOe,searchIconWrapper:dOe,searchIcon:hOe,placeholderText:fOe,shortcutHint:pOe,key:mOe,plus:gOe,micButtonWrapper:yOe,micIcon:xOe,newlyRegisteredSection:vOe,recentList:bOe,recentPatientPill:jOe,recentNameContainer:wOe,recentInfo:NOe,newlyRegisteredLabel:SOe,recentName:_Oe,recentToken:COe},TOe=[{label:"Doctor",icon:r.jsx(Sf,{size:24}),path:"/dashboard/doctor"},{label:"Labs",icon:r.jsx(ew,{size:24}),path:"/create-lab-order"},{label:"Clinic",icon:r.jsx(nq,{size:24}),path:"/dashboard/clinic-hub"},{label:"Inventory",icon:r.jsx(so,{size:24}),path:"/dashboard/inventory"},{label:"Analysis",icon:r.jsx(ew,{size:24}),path:"/dashboard/analysis"},{label:"Dental",icon:r.jsx(JJ,{size:24}),path:"/dashboard/dental"},{label:"New Order",icon:r.jsx(so,{size:24}),path:"/dashboard/add-order"},{label:"Files",icon:r.jsx(ew,{size:24}),path:"/dashboard/files"},{label:"Clinic Files",icon:r.jsx(Xr,{size:24}),path:"/dashboard/clinic-files"},{label:"Distributors",icon:r.jsx(XD,{size:24}),path:"/dashboard/distributors"},{label:"Custom Bill",icon:r.jsx(Xr,{size:24}),path:"/create-custom-bill"},{label:"Patients",icon:r.jsx(zi,{size:24}),path:"/dashboard/patients"},{label:"Debts",icon:r.jsx(gw,{size:24}),path:"/dashboard/patient-debts"}],lG="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",kOe={apiKey:lG},AOe=()=>{const{openCommandBar:t,isOpen:e,setPreFilledQuery:n}=Rc(),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=Lt(),c=b=>{b.stopPropagation(),i(!0)};v.useEffect(()=>{s&&(i(!1),n&&n(s),t(),o(null))},[s,t,n]);const u=hs(),{data:f,isLoading:p}=FN({queryKey:["recentPatients"],queryFn:async()=>{const b=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),j=await le(`/api/patients?${b.toString()}`);if(!j.ok)throw new Error("Failed to fetch recent patients");return j.json()},staleTime:60*1e3});v.useEffect(()=>{u.prefetchQuery({queryKey:Wt.clinicSettings,queryFn:async()=>{const b=await le("/api/clinics/settings");if(!b.ok)throw new Error("Failed to fetch clinic settings");return b.json()},staleTime:30*60*1e3}),u.prefetchQuery({queryKey:Wt.drugs.all,queryFn:async()=>{const b=await le("/api/drugs");if(!b.ok)throw new Error("Failed to fetch drugs");const j=await b.json();return j.drugs||j},staleTime:10*60*1e3}),u.prefetchQuery({queryKey:Wt.labTests.all,queryFn:async()=>{const b=await le("/api/lab-tests");if(!b.ok)throw new Error("Failed to fetch lab tests");return b.json()},staleTime:10*60*1e3})},[u]);const g=(f==null?void 0:f.patients)||[],x=b=>{b&&(u.prefetchQuery({queryKey:Wt.patients.context(b),queryFn:async()=>{const j=await le(`/api/patients/${b}/context`);if(!j.ok)throw new Error("Failed to fetch patient context");return j.json()},staleTime:5*60*1e3}),u.prefetchQuery({queryKey:Wt.dental.records(b),queryFn:async()=>{const j=await le(`/api/dental/patient/${b}`);if(!j.ok)throw new Error("Failed to fetch dental records");return j.json()},staleTime:5*60*1e3}),u.prefetchQuery({queryKey:Wt.patientDebts.balance(b),queryFn:async()=>{const j=await le(`/api/patient-debts/${b}/balance`);return j.ok?j.json():{netDebt:0}},staleTime:1*60*1e3}),u.prefetchQuery({queryKey:Wt.queue.latest(b),queryFn:async()=>{const j=await le(`/api/queue/patient/${b}/latest`);if(!j.ok)throw new Error("Failed to fetch latest queue status");const w=await j.json();return w!=null&&w._id&&u.prefetchQuery({queryKey:Wt.queue.entry(w._id),queryFn:async()=>{const _=await le(`/api/queue/doctor/complaint/${w._id}`);if(!_.ok)throw new Error("Failed to fetch complaint record");return _.json()},staleTime:1*60*1e3}),w},staleTime:5e3}))};return r.jsxs("div",{className:Nr.container,children:[r.jsx("div",{className:Nr.mobileDashboardGrid,children:TOe.map((b,j)=>r.jsxs("div",{className:Nr.mobileDashboardItem,onClick:()=>l(b.path),children:[r.jsx("div",{className:Nr.mobileDashboardIcon,children:b.icon}),r.jsx("span",{className:Nr.mobileDashboardLabel,children:b.label})]},j))}),r.jsxs("div",{className:Nr.visualContainer,children:[r.jsx("h1",{className:Nr.brandTitle,children:"Newtons Ai"}),!e&&r.jsxs("div",{className:Nr.searchBar,onClick:()=>t(),children:[r.jsx("div",{className:Nr.searchIconWrapper,children:r.jsx(En,{className:Nr.searchIcon})}),r.jsx("span",{className:Nr.placeholderText,children:"Search or Ask AI..."}),r.jsx("div",{className:Nr.micButtonWrapper,onClick:c,children:r.jsx(UN,{className:Nr.micIcon})}),r.jsxs("div",{className:Nr.shortcutHint,children:[r.jsx("span",{className:Nr.key,children:"Ctrl"}),r.jsx("span",{className:Nr.plus,children:"+"}),r.jsx("span",{className:Nr.key,children:"K"})]})]})]}),!e&&(p||g.length>0)&&r.jsxs("div",{className:Nr.newlyRegisteredSection,children:[r.jsx("div",{className:Nr.newlyRegisteredLabel,children:"Newly Registered"}),r.jsx("div",{className:Nr.recentList,children:p?[1,2,3,4,5].map(b=>r.jsxs("div",{className:Nr.recentPatientPill,style:{cursor:"default"},children:[r.jsxs("div",{className:Nr.recentNameContainer,children:[r.jsx(te,{width:100,height:18}),r.jsx(te,{width:30,height:20})]}),r.jsx("div",{className:Nr.recentInfo,children:r.jsx(te,{width:80,height:14})})]},b)):g.map(b=>r.jsxs("div",{className:Nr.recentPatientPill,onClick:()=>l(`/dashboard/edit-complaint/patient/${b.id}`),onMouseEnter:()=>b.id&&x(b.id),children:[r.jsxs("div",{className:Nr.recentNameContainer,children:[r.jsx("span",{className:Nr.recentName,children:b.name||"New Patient"}),r.jsxs("span",{className:Nr.recentToken,children:["#",b.token]})]}),r.jsxs("div",{className:Nr.recentInfo,children:[b.age?`${b.age} yrs`:"",b.age&&b.gender?" / ":"",b.gender||""]})]},b.id))})]}),a&&lG&&r.jsx(iS,{options:kOe,children:r.jsx(sS,{onClose:()=>i(!1),patientData:null,tokenNumber:null,onAiSummaryChange:o})})]})},cG=({queueList:t,onPatientClick:e})=>{const i=Array.from({length:13},(o,l)=>8+l),s={};return i.forEach(o=>s[o]=[]),t.forEach(o=>{const c=new Date(o.createdAt).getHours();c>=8&&c<=20&&s[c].push(o)}),r.jsx("div",{className:"appointment-timeline-container",children:i.map(o=>r.jsxs("div",{className:"timeline-hour-row",children:[r.jsx("div",{className:"timeline-time-label",children:r.jsxs("span",{className:"time-text",children:[o>12?o-12:o," ",o>=12?"PM":"AM"]})}),r.jsxs("div",{className:"timeline-track",children:[s[o].length===0?r.jsx("div",{className:"timeline-empty-slot"}):r.jsx("div",{className:"timeline-appointments-group",children:s[o].map(l=>{var c,u;return r.jsxs("div",{className:`timeline-card status-${l.status}`,onClick:()=>e(l),children:[r.jsxs("div",{className:"timeline-card-header",children:[r.jsx("span",{className:"patient-name-card",children:(c=l.Patient)==null?void 0:c.name}),r.jsxs("span",{className:"token-badge",children:["#",l.token_no]})]}),r.jsxs("div",{className:"timeline-card-details",children:[((u=l.Patient)==null?void 0:u.phone)&&r.jsxs("div",{className:"detail-row",children:[r.jsx(ag,{size:12}),r.jsx("span",{children:l.Patient.phone})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx(zg,{size:12}),r.jsx("span",{children:new Date(l.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),r.jsx("div",{className:`status-line-indicator status-color-${l.status}`})]},l.id)})}),r.jsx("div",{className:"timeline-grid-line"})]})]},o))})},uG=({isOpen:t,onClose:e,onAppointmentBooked:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState([]),[l,c]=v.useState(null),[u,f]=v.useState(""),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState(null);v.useEffect(()=>{t&&(i(""),o([]),c(null),f(""),w(null))},[t]);const _=Ce.useMemo(()=>$l(async P=>{if(P.length<2){o([]),b(!1);return}b(!0);try{const I=new URLSearchParams({search:encodeURIComponent(P),page:"1",limit:"10"}),R=await le(`/api/patients?${I.toString()}`);if(R.ok){const q=await R.json();o(q.patients||[])}}catch(I){console.error("Error searching patients:",I)}finally{b(!1)}},300),[]),T=P=>{const I=P.target.value;i(I),l&&c(null),I.length>=2?(b(!0),_(I)):o([])},C=P=>{c(P),i(P.name),o([])},A=async()=>{if(a.trim()){g(!0);try{const P=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.trim(),age:null,gender:null,phone:null})});if(!P.ok){const q=await P.json();throw new Error(q.message||"Failed to create patient")}const I=await P.json(),R={id:I.id,name:I.name,phone:I.phone,age:I.age,gender:I.gender,token:I.token};C(R)}catch(P){console.error("Failed to create patient:",P),w(P.message||"Failed to create patient")}finally{g(!1)}}},k=async()=>{if(!l){w("Please select a patient.");return}if(!u){w("Please select a date and time.");return}g(!0),w(null);try{if(!(await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id,date:new Date(u).toISOString(),description:"Appointment"})})).ok)throw new Error("Failed to book appointment");n(),e()}catch(P){console.error("Error booking appointment:",P),w(P.message||"Failed to book appointment.")}finally{g(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content appointment-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{style:{fontSize:"1.15rem"},children:"Book Appointment"}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx(Rt,{size:18})})]}),r.jsxs("div",{className:"modal-body",children:[j&&r.jsx("div",{className:"error-message",style:{padding:"6px 10px",fontSize:"0.85rem"},children:j}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{style:{fontSize:"0.8rem",marginBottom:"4px"},children:"Search Patient"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{className:"search-icon-input",size:16}),r.jsx("input",{type:"text",placeholder:"Name, phone, or ID...",value:a,onChange:T,className:"modal-input",style:{padding:"8px 10px 8px 34px",fontSize:"0.9rem"}}),x&&r.jsx("div",{className:"spinner-sm"}),(s.length>0||a.length>0&&!x)&&!l&&r.jsxs("div",{className:"search-results-dropdown",style:{maxHeight:"180px"},children:[a.trim().length>0&&!x&&r.jsx("div",{className:"search-result-item create-patient-item",onClick:A,style:{padding:"8px 12px"},children:r.jsxs("div",{className:"patient-info",style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("div",{className:"create-icon-wrapper",style:{width:"28px",height:"28px"},children:r.jsx(VN,{size:14,color:"white"})}),r.jsxs("div",{children:[r.jsxs("span",{className:"name",style:{color:"#7c3aed",fontSize:"0.9rem"},children:['Create "',a,'"']}),r.jsx("span",{className:"details",style:{color:"#7c3aed",fontSize:"0.75rem"},children:"Add new patient"})]})]})}),s.map(P=>r.jsxs("div",{className:"search-result-item",onClick:()=>C(P),style:{padding:"8px 12px"},children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",style:{fontSize:"0.9rem"},children:P.name}),r.jsxs("span",{className:"details",style:{fontSize:"0.75rem"},children:[P.age?`${P.age} yrs`:""," ",P.gender?`/ ${P.gender}`:""]})]}),P.phone&&r.jsx("span",{className:"phone",style:{fontSize:"0.75rem"},children:P.phone})]},P.id))]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{style:{fontSize:"0.8rem",marginBottom:"4px"},children:"Appointment Date & Time"}),r.jsx("div",{className:"date-input-wrapper",children:r.jsx("input",{type:"datetime-local",className:"modal-input",value:u,onChange:P=>f(P.target.value),style:{padding:"8px 10px",fontSize:"0.9rem"}})})]}),l&&r.jsxs("div",{className:"selected-patient-preview",style:{marginTop:"4px"},children:[r.jsx("div",{className:"preview-label",style:{fontSize:"0.75rem"},children:"Selected Patient:"}),r.jsxs("div",{className:"preview-card",style:{padding:"8px",gap:"10px"},children:[r.jsx(Yn,{size:18,style:{color:"var(--primary-color)"}}),r.jsxs("div",{children:[r.jsx("strong",{style:{fontSize:"0.9rem"},children:l.name}),r.jsxs("div",{style:{fontSize:"0.75rem"},children:[l.age?`${l.age} yrs`:"-"," / ",l.gender||"-"]})]})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:k,className:"submit-button",disabled:p||!l||!u,children:p?"Booking...":"Book Appointment"})]})]})}):null},EOe=async t=>{const e=t?`/api/queue?date=${t}`:"/api/queue",n=await le(e);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()};function dG(t){return FN({queryKey:["queue",t||"today"],queryFn:()=>EOe(t),staleTime:5e3,refetchInterval:7e3,placeholderData:e=>e,refetchOnMount:"always",refetchOnWindowFocus:!0})}function POe(){const t=hs();return nY({mutationFn:async({queueId:e,status:n,doctorId:a})=>{const i=await le(`/api/queue/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,doctorId:a})});if(!i.ok)throw new Error("Failed to update queue status");return i.json()},onSuccess:(e,{queueId:n})=>{t.invalidateQueries({queryKey:Wt.queue.today}),t.invalidateQueries({queryKey:Wt.queue.entry(n)})}})}const Wj=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},DOe=t=>{if(!t)return"Unknown Date";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},BA=({title:t,icon:e,items:n,renderItemContent:a,isLoading:i,noDataText:s})=>{const o=v.useMemo(()=>{const l={};n.forEach(u=>{if(isNaN(u.date.getTime())){l["Unknown Date"]||(l["Unknown Date"]=[]),l["Unknown Date"].push(u);return}const f=DOe(u.originalDateString);l[f]||(l[f]=[]),l[f].push(u)});const c=Object.keys(l);return c.sort((u,f)=>{if(u==="Unknown Date")return 1;if(f==="Unknown Date")return-1;try{const p=b=>{const j=b.split(" ");if(j.length===3){const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(j[1]);if(_!==-1)return new Date(parseInt(j[2]),_,parseInt(j[0]))}return new Date(b)},g=p(u),x=p(f);if(!isNaN(g.getTime())&&!isNaN(x.getTime()))return x.getTime()-g.getTime()}catch(p){console.error("Error parsing date for sorting:",p)}return f.localeCompare(u)}),c.map(u=>({date:u,items:l[u]}))},[n]);return r.jsxs("div",{className:"dcp-group-card",children:[r.jsxs("h4",{className:"dcp-group-header",children:[e&&r.jsx(e,{size:14,className:"dcp-group-icon"}),t]}),r.jsxs("div",{className:"dcp-group-content",children:[i&&r.jsx("div",{className:"dcp-history-items",children:[1,2].map(l=>r.jsxs("div",{className:"dcp-history-item",style:{border:"none"},children:[r.jsx(te,{width:"60%",height:16,style:{marginBottom:"8px"}}),r.jsx(te,{width:"30%",height:12})]},l))}),!i&&n.length===0&&r.jsx("p",{className:"dcp-history-empty",children:s}),!i&&n.length>0&&r.jsx("div",{children:o.map(({date:l,items:c})=>r.jsxs("div",{className:"dcp-date-group",children:[r.jsx("h5",{className:"dcp-date-label",children:l}),r.jsx("div",{className:"dcp-date-items",children:c.map((u,f)=>r.jsx("div",{className:"dcp-history-item",children:a(u)},`${u.type}-${u.originalDateString}-${f}`))})]},l))})]})]})},Yj=()=>{var Ve,Ae;const{openCommandBar:t}=Rc(),[e,n]=v.useState(new Date),[a,i]=v.useState("list"),[s,o]=v.useState(!1),l=e.toISOString().split("T")[0],{data:c,isLoading:u,refetch:f,isError:p}=dG(l),g=(c==null?void 0:c.list)||[],x=(c==null?void 0:c.summary)||{currentPatient:null,nextPatient:null,waitingCount:0},b=u,[j,w]=v.useState(!1),[_,T]=v.useState(null),C=()=>{f()},[A,k]=v.useState(null),[P,I]=v.useState(null),[R,q]=v.useState(null),[U,F]=v.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[B,V]=v.useState(!1),[W,G]=v.useState(null),{patientId:z}=$a(),Y=Lt(),Q=hs(),K=ue=>{ue&&(Q.prefetchQuery({queryKey:Wt.patients.context(ue),queryFn:async()=>{const Te=await le(`/api/patients/${ue}/context`);if(!Te.ok)throw new Error("Failed to fetch patient context");return Te.json()},staleTime:5*60*1e3}),Q.prefetchQuery({queryKey:Wt.patientDebts.balance(ue),queryFn:async()=>{const Te=await le(`/api/patient-debts/${ue}/balance`);return Te.ok?Te.json():{netDebt:0}},staleTime:1*60*1e3}),Q.prefetchQuery({queryKey:Wt.queue.latest(ue),queryFn:async()=>{const Te=await le(`/api/queue/patient/${ue}/latest`);if(!Te.ok)throw new Error("Failed to fetch latest queue status");const oe=await Te.json();return oe!=null&&oe._id&&Q.prefetchQuery({queryKey:Wt.queue.entry(oe._id),queryFn:async()=>{const be=await le(`/api/queue/doctor/complaint/${oe._id}`);if(!be.ok)throw new Error("Failed to fetch complaint record");return be.json()},staleTime:1*60*1e3}),oe},staleTime:5e3}),Q.prefetchQuery({queryKey:Wt.dental.records(ue),queryFn:async()=>{const Te=await le(`/api/dental/patient/${ue}`);if(!Te.ok)throw new Error("Failed to fetch dental records");return Te.json()},staleTime:5*60*1e3}))},$=v.useCallback(async ue=>{q(null),k(null),I(null),V(!0),G(null),F({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const Te=await le(`/api/patients/${ue}`);if(!Te.ok)throw new Error(`Patient details fetch failed (${Te.status})`);const oe=await Te.json();k(oe);const be=await le(`/api/queue/patient/${ue}/latest`);if(!be.ok&&be.status!==404)throw new Error(`Queue entry fetch failed (${be.status})`);if(be.ok){const _e=await be.json();I(_e)}await ie(ue)}catch(Te){console.error("Error fetching specific patient data:",Te),q(Te.message||"Failed to load patient data."),G(Te.message||"Failed to load patient history.")}finally{V(!1)}},[]),ie=v.useCallback(async ue=>{V(!0),G(null);try{const[Te,oe,be,_e]=await Promise.all([le(`/api/queue/patient/${ue}/complaints`),le(`/api/lab/patient/${ue}`),le(`/api/lab/orders/patient/${ue}?status=pending`),le(`/api/pharmacy-orders/patient/${ue}`)]),Ne=Te.ok?await Te.json():[],ee=oe.ok?await oe.json():[],ge=be.ok?await be.json():[],de=_e.ok?await _e.json():[];F({pastComplaints:Ne||[],labReports:ee||[],pendingLabOrders:ge||[],pharmacyOrders:de||[]})}catch(Te){console.error("Error fetching patient history:",Te),G(Te.message||"Failed to load patient history."),F({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{V(!1)}},[]);v.useEffect(()=>{z?$(z):(k(null),I(null),f())},[z,$,f]),v.useEffect(()=>{var ue;if(!z&&((ue=x.currentPatient)==null?void 0:ue.status)==="consulting"){const Te=x.currentPatient._id;Te&&Y(`/dashboard/edit-complaint/${Te}`)}},[z,x.currentPatient,Y]),v.useEffect(()=>{var ue;!z&&((ue=x.currentPatient)!=null&&ue.patientId)?ie(x.currentPatient.patientId):!z&&!x.currentPatient&&(F({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),V(!1),G(null))},[z,(Ve=x.currentPatient)==null?void 0:Ve.patientId,ie]);const xe=((Ae=x.currentPatient)==null?void 0:Ae.patientId)||(z?parseInt(z,10):null),X=v.useMemo(()=>{if(!xe||!U.pastComplaints)return[];const ue=U.pastComplaints.map(Te=>({date:new Date(Te.createdAt),type:"Complaint",data:Te,originalDateString:Te.createdAt})).filter(Te=>!isNaN(Te.date.getTime()));return ue.sort((Te,oe)=>oe.date.getTime()-Te.date.getTime()),ue},[xe,U.pastComplaints]),Ie=v.useMemo(()=>{if(!xe)return[];const ue=[];return(U.pendingLabOrders??[]).forEach(Te=>{const oe=new Date(Te.createdAt);isNaN(oe.getTime())||ue.push({date:oe,type:"Lab Order (Pending)",data:Te,originalDateString:Te.createdAt})}),(U.labReports??[]).forEach(Te=>{const oe=Te.reportCreatedAt?new Date(Te.reportCreatedAt):null;oe&&!isNaN(oe.getTime())&&ue.push({date:oe,type:"Lab Report",data:Te,originalDateString:Te.reportCreatedAt})}),ue.sort((Te,oe)=>oe.date.getTime()-Te.date.getTime()),ue},[xe,U.pendingLabOrders,U.labReports]),$e=v.useMemo(()=>{if(!xe||!U.pharmacyOrders)return[];const ue=U.pharmacyOrders.map(Te=>({date:new Date(Te.date),type:"Pharmacy Order",data:Te,originalDateString:Te.date})).filter(Te=>!isNaN(Te.date.getTime()));return ue.sort((Te,oe)=>oe.date.getTime()-Te.date.getTime()),ue},[xe,U.pharmacyOrders]),Be=async()=>{w(!0),T(null);try{await le("/api/queue/doctor/next",{method:"POST"}),await f()}catch(ue){console.error("Error calling next patient:",ue),T(ue.message||"Failed to call next patient.")}finally{w(!1)}},Le=ue=>{switch(ue){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return ue}},[ce,Se]=v.useState("info");return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dcp-container",children:[r.jsxs("div",{className:"dcp-header-row",children:[r.jsx("button",{onClick:()=>Y(-1),className:"dcp-back-btn",children:r.jsx(sn,{size:20})}),r.jsx("h1",{className:"dcp-title",children:"Doctor Consultation Panel"})]}),z?r.jsxs(r.Fragment,{children:[R&&r.jsx("div",{className:"dcp-error",children:R}),A&&r.jsx("div",{className:"dcp-card dcp-card-violet",children:r.jsxs("div",{className:"dcp-card-content",children:[r.jsxs("div",{className:"dcp-mobile-tabs",children:[r.jsx("button",{className:`dcp-mobile-tab ${ce==="info"?"active":""}`,onClick:()=>Se("info"),children:"Patient Record"}),r.jsx("button",{className:`dcp-mobile-tab ${ce==="history"?"active":""}`,onClick:()=>Se("history"),children:"History"})]}),r.jsxs("div",{className:"dcp-flex-split",children:[r.jsxs("div",{className:`dcp-flex-half dcp-tab-info ${ce==="info"?"":"hidden"}`,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("div",{className:"dcp-section-header dcp-section-header-violet",children:"Patient Record"}),r.jsxs("button",{onClick:()=>Y("/dashboard/doctor"),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem"},children:[r.jsx(sn,{size:12})," Back to Queue"]})]}),r.jsx("div",{className:"dcp-patient-name dcp-patient-name-gradient",children:A.name}),r.jsxs("div",{className:"dcp-patient-meta",style:{marginBottom:"12px"},children:[r.jsxs("span",{className:"dcp-patient-badge",children:[A.age||"N/A"," Yrs"]}),r.jsx("span",{className:"dcp-patient-badge",children:A.gender||"N/A"})]}),r.jsxs("div",{className:"dcp-activity-box",children:[r.jsx("div",{className:"dcp-activity-label",children:"Latest Activity"}),P?r.jsxs("div",{children:[r.jsxs("div",{className:"dcp-activity-content",children:[r.jsx("strong",{children:"Complaint:"})," ",P.complaint||r.jsx("span",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"None"})]}),r.jsxs("div",{style:{marginTop:"8px"},children:[r.jsx("span",{className:`dcp-status ${P.status==="consulting"?"dcp-status-consulting":P.status==="seen"?"dcp-status-seen":P.status==="waiting"?"dcp-status-waiting":""}`,children:Le(P.status)}),P.status==="consulting"&&P._id&&r.jsx("button",{onClick:()=>Y(`/dashboard/edit-complaint/${P._id}`),onMouseEnter:()=>K(String(A.id)),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px",padding:"4px 12px"},children:"Resume"})]}),_&&r.jsx("div",{className:"dcp-error-card",style:{marginBottom:"16px"},children:_}),P.case_summary&&r.jsxs("div",{className:"dcp-ai-summary",style:{marginTop:"10px"},children:[r.jsx("div",{className:"dcp-ai-label",children:" AI Summary"}),r.jsx("p",{className:"dcp-ai-text",children:P.case_summary})]})]}):r.jsx("p",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"No queue entry found for this patient today."})]})]}),r.jsxs("div",{className:`dcp-flex-half dcp-history-section dcp-tab-history ${ce==="history"?"":"hidden"} dcp-desktop-only`,children:[r.jsxs("div",{className:"dcp-history-header",children:[r.jsx("span",{className:"dcp-history-title",children:"Patient History"}),B&&r.jsx(te,{width:60,height:14})]}),W&&r.jsx("div",{className:"dcp-error",children:W}),r.jsxs("div",{className:"dcp-history-scroll dcp-scrollbar",children:[r.jsx(BA,{title:"Past Complaints",icon:Xr,items:X,isLoading:B,noDataText:"No past complaints.",renderItemContent:ue=>r.jsxs("div",{children:[ue.data.complaint,r.jsx("div",{className:"dcp-history-timestamp",children:Wj(ue.originalDateString)})]})}),r.jsx(BA,{title:"Lab Reports",icon:us,items:Ie,isLoading:B,noDataText:"No lab history.",renderItemContent:ue=>ue.type==="Lab Order (Pending)"?r.jsxs("div",{children:[r.jsx("span",{className:"dcp-type-pending",children:"Pending Order"}),r.jsx("div",{children:ue.data.tests.map(Te=>Te.name).join(", ")}),r.jsx("div",{className:"dcp-history-timestamp",children:Wj(ue.originalDateString)})]}):r.jsxs("div",{children:[r.jsxs("span",{className:"dcp-type-report",children:["Report: ",ue.data.testName]}),r.jsxs("div",{style:{fontStyle:"italic"},children:['"',ue.data.reportFindings.substring(0,50),ue.data.reportFindings.length>50?"...":"",'"']}),r.jsx("div",{className:"dcp-history-timestamp",children:Wj(ue.originalDateString)})]})}),r.jsx(BA,{title:"Medications",icon:dd,items:$e,isLoading:B,noDataText:"No pharmacy history.",renderItemContent:ue=>r.jsxs("div",{children:[ue.data.medications.map(Te=>`${Te.name} (${Te.pack_quantity||0}p ${Te.loose_quantity||0}l)`).join(", "),r.jsxs("div",{className:"dcp-history-timestamp",children:[Wj(ue.originalDateString),"  ",r.jsx("span",{style:{textTransform:"capitalize"},children:ue.data.status})]})]})}),X.length===0&&Ie.length===0&&$e.length===0&&!B&&r.jsx("div",{className:"dcp-empty-state",children:"No history records found."})]})]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[p&&r.jsx("div",{className:"dcp-error",children:"Failed to fetch queue data."}),b&&!x.currentPatient?r.jsxs("div",{className:"dcp-card",style:{padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx(te,{width:"40%",height:32}),r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx(te,{width:"60%",height:24}),r.jsx(te,{width:"40%",height:16,style:{marginTop:"8px"}})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsx(te,{width:"100%",height:80,style:{borderRadius:"12px"}})}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[r.jsx(te,{width:180,height:40}),r.jsx(te,{width:120,height:40})]})]}):r.jsx("div",{className:"dcp-empty-state",children:x.currentPatient?"Redirecting to consultation...":"No patient currently being seen. Use 'Call Next' or search for a patient record."})]}),r.jsxs("div",{className:"dcp-scheduler-section",children:[r.jsx("div",{className:"queue-header",children:r.jsx("div",{className:"queue-actions",children:r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${a==="list"?"active":""}`,onClick:()=>i("list"),title:"List View",children:r.jsx(JB,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${a==="timeline"?"active":""}`,onClick:()=>i("timeline"),title:"Timeline View",children:r.jsx(YD,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(ia,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:e.toISOString().split("T")[0],onChange:ue=>n(new Date(ue.target.value))})]}),r.jsxs("button",{onClick:()=>o(!0),className:"appointment-button",children:[r.jsx(zg,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]}),r.jsx("button",{onClick:()=>t(),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px"},children:"Search Patient"})]})})}),r.jsx(uG,{isOpen:s,onClose:()=>{o(!1),f()},onAppointmentBooked:C}),u&&g.length===0?r.jsx("div",{style:{padding:"20px"},children:r.jsx(te,{width:"100%",height:200})}):a==="timeline"?r.jsx(cG,{queueList:g,onPatientClick:ue=>Y(`/dashboard/edit-complaint/${ue.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Details"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:g.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"20px"},children:"No appointments for this date."})}):g.map(ue=>{var Te,oe,be;return r.jsxs("tr",{onClick:()=>Y(`/dashboard/edit-complaint/${ue.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:["#",ue.token_no]}),r.jsx("td",{children:r.jsx("div",{className:"patient-info",children:r.jsx("span",{className:"name",children:(Te=ue.Patient)==null?void 0:Te.name})})}),r.jsxs("td",{className:"hidden-mobile",children:[(oe=ue.Patient)==null?void 0:oe.age,"y, ",(be=ue.Patient)==null?void 0:be.gender,"  ",ue.complaint||"-"]}),r.jsx("td",{children:r.jsx("span",{className:`dcp-status ${ue.status==="waiting"?"dcp-status-waiting":ue.status==="consulting"?"dcp-status-consulting":ue.status==="seen"?"dcp-status-seen":""}`,children:Le(ue.status)})}),r.jsx("td",{children:r.jsx("button",{className:"dcp-btn dcp-btn-outline",style:{padding:"4px 8px",fontSize:"0.75rem"},children:"View"})})]},ue.id)})})]})})]}),r.jsxs("div",{className:"dcp-bottom-bar",children:[r.jsx("button",{onClick:Be,disabled:j||b||!x.nextPatient||!!x.currentPatient,className:"dcp-btn dcp-btn-teal",children:"Call Next Patient"}),r.jsxs("div",{className:"dcp-waiting-count",children:[x.waitingCount," patients waiting"]})]})]})]})})},OOe="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",MOe={apiKey:OOe},bv=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,u]=v.useState(!1),[f,p]=v.useState(null),g=v.useRef(null),[x,b]=v.useState(!1),[j,w]=v.useState(!1),[_,T]=v.useState(null),[C,A]=v.useState(null),[k,P]=v.useState([]),[I,R]=v.useState(!0),[q,U]=v.useState(!1);Kc();const F=Lt(),B=Br(),V=bO({settings:{},staffList:[]}),W=hs(),G=ue=>{ue&&(W.prefetchQuery({queryKey:Wt.patients.context(ue),queryFn:async()=>{const Te=await le(`/api/patients/${ue}/context`);if(!Te.ok)throw new Error("Failed to fetch patient context");return Te.json()},staleTime:5*60*1e3}),W.prefetchQuery({queryKey:Wt.patientDebts.balance(ue),queryFn:async()=>{const Te=await le(`/api/patient-debts/${ue}/balance`);return Te.ok?Te.json():{netDebt:0}},staleTime:1*60*1e3}),W.prefetchQuery({queryKey:Wt.queue.latest(ue),queryFn:async()=>{const Te=await le(`/api/queue/patient/${ue}/latest`);if(!Te.ok)throw new Error("Failed to fetch latest queue status");const oe=await Te.json();return oe!=null&&oe._id&&W.prefetchQuery({queryKey:Wt.queue.entry(oe._id),queryFn:async()=>{const be=await le(`/api/queue/doctor/complaint/${oe._id}`);if(!be.ok)throw new Error("Failed to fetch complaint record");return be.json()},staleTime:1*60*1e3}),oe},staleTime:5e3}),W.prefetchQuery({queryKey:Wt.dental.records(ue),queryFn:async()=>{const Te=await le(`/api/dental/patient/${ue}`);if(!Te.ok)throw new Error("Failed to fetch dental records");return Te.json()},staleTime:5*60*1e3}))},z=v.useMemo(()=>$l(ue=>G(ue),500),[]);v.useEffect(()=>()=>{z.cancel()},[z]);const{selectedImage:Y,handleImageSelect:Q,clearImage:K}=V,$=v.useRef(null),ie=ue=>{var oe;const Te=(oe=ue.target.files)==null?void 0:oe[0];Te&&Q(Te)};v.useEffect(()=>{V.chatHistory.length>0&&q&&V.isProcessing},[V.chatHistory.length]),v.useEffect(()=>{(async()=>{R(!0);try{const Te=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),oe=await le(`/api/patients?${Te.toString()}`);if(oe.ok){const be=await oe.json();P(be.patients||[])}}catch(Te){console.error("Error fetching recent patients:",Te)}finally{R(!1)}})()},[]),v.useEffect(()=>{V.setChatQuery(t)},[t]);const xe=v.useCallback(async ue=>{if(!(ue||t).trim()){p("Please enter complaint details.");return}u(!0),p(null),ue&&ue!==V.chatQuery&&V.setChatQuery(ue);try{V.handleSendMessage(),e("")}catch(oe){console.error("AI Error:",oe),p("AI failed to process. Try again."),u(!1)}},[t,V]);v.useEffect(()=>{!V.isProcessing&&c&&u(!1)},[V.isProcessing,c]),v.useEffect(()=>{const ue=g.current;ue&&(ue.style.height="auto",ue.style.height=`${ue.scrollHeight}px`);const oe=new URLSearchParams(B.search).get("caseDetails");if(oe){const be=decodeURIComponent(oe);be!==t&&(e(be),b(!0))}},[B.search,t]),v.useEffect(()=>{x&&t.trim()&&(F(B.pathname,{replace:!0}),xe(t),b(!1))},[x,t,xe,F,B.pathname]),v.useEffect(()=>{const ue=g.current;ue&&(ue.style.height="auto",ue.style.height=`${ue.scrollHeight}px`)},[t]),v.useEffect(()=>{_&&(e(_),w(!1),V.setChatQuery(_),setTimeout(()=>V.handleSendMessage(),0),T(null))},[_,V]);const X=()=>{A({id:null,token:null,name:"New Case",age:null,gender:null}),w(!0)},Ie=v.useMemo(()=>$l(async ue=>{const Te=ue.trim(),oe=/^\d+$/.test(Te),be=Te.split(/\s+/).length;if(Te.length<2||oe&&Te.length>10||!oe&&be>2){a([]),s(!1),l(null);return}s(!0),l(null);try{const _e=new URLSearchParams({search:encodeURIComponent(ue),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),Ne=await le(`/api/patients?${_e.toString()}`);if(!Ne.ok){const ge=await Ne.text();throw new Error(`API Error (${Ne.status}): ${ge||Ne.statusText}`)}const ee=await Ne.json();a(ee.patients)}catch(_e){console.error("Error searching patients:",_e),l(_e.message||"Failed to search patients."),a([])}finally{s(!1)}},300),[]),$e=ue=>{const Te=ue.target.value;e(Te);const oe=Te.trim(),be=/^\d+$/.test(oe),_e=oe.split(/\s+/).length;oe.length>=2&&!(be&&oe.length>10||!be&&_e>2)?s(!0):(s(!1),a([])),Ie(Te)},Be=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),t.trim()&&!i&&Ae())},Le=async ue=>{ue&&ue.id&&F(`/dashboard/edit-complaint/patient/${ue.id}`)},ce=[{icon:"",title:"Example: Fever & Cold",description:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough",text:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough"},{icon:"",title:"Example: Stomach Ache",description:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days",text:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days"}],Se=ue=>{e(ue),setTimeout(()=>{V.handleSendMessage(ue),e(""),a([])},50)},Ve=()=>{e(""),a([]),V.refreshChat()},Ae=()=>{!t.trim()&&!Y||(Ie.cancel(),V.handleSendMessage(t),e(""),a([]))};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsx("button",{onClick:()=>F("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"}),r.jsx("button",{onClick:()=>F(-1),className:"patient-search-button patient-search-button-back",children:r.jsx(sn,{size:16})})]}),r.jsxs("div",{className:"patient-search-content-box",children:[o&&r.jsx("p",{className:"patient-search-error",children:o}),f&&r.jsx("p",{className:"patient-search-error",children:f}),I?r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:[1,2,3,4,5].map(ue=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(te,{width:100,height:18}),r.jsx(te,{width:30,height:14})]}),r.jsx("div",{className:"recent-info",children:r.jsx(te,{width:60,height:12})})]},ue))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}):k.length>0&&r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:k.map(ue=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>Le(ue),onMouseEnter:()=>ue.id&&z(ue.id),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:ue.name||"New Patient"}),r.jsxs("span",{className:"recent-token",children:["#",ue.token]})]}),r.jsxs("div",{className:"recent-info",children:[ue.age," yrs / ",ue.gender]})]},ue.id))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}),V.chatHistory.length===0&&n.length===0&&r.jsxs("div",{className:"example-cases-section",children:[r.jsxs("div",{className:"example-cases-header",children:[r.jsx("span",{className:"sparkles-icon",children:""}),r.jsx("h3",{children:"Try AI with Example Cases"})]}),r.jsx("div",{className:"example-cards-container",children:ce.map((ue,Te)=>r.jsxs("div",{className:"example-case-card",onClick:()=>Se(ue.text),children:[r.jsx("div",{className:"example-icon",children:ue.icon}),r.jsxs("div",{className:"example-content",children:[r.jsx("div",{className:"example-title",children:ue.title}),r.jsx("div",{className:"example-description",children:ue.description})]})]},Te))})]})]}),V.chatHistory.length>0&&!c&&r.jsxs("div",{className:`ai-chat-overlay ${q?"minimized":""}`,children:[r.jsxs("div",{className:"ai-chat-header",children:[r.jsx("span",{children:"AI Assistant"}),r.jsx("div",{className:"ai-chat-controls",children:r.jsx("button",{className:"icon-btn",onClick:()=>Ve(),title:"Clear Chat",children:r.jsx(Rt,{size:16})})})]}),r.jsxs("div",{className:"ai-chat-messages",children:[V.chatHistory.map((ue,Te)=>r.jsx("div",{className:`chat-bubble ${ue.role==="model"?"model":"user"}`,children:ue.role==="system"?r.jsx("i",{children:ue.text}):ue.text},Te)),V.isProcessing&&r.jsx("div",{className:"chat-bubble model",children:"Typing..."})]})]}),n.length>0&&!c&&r.jsxs("div",{className:"patient-search-results-overlay",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"#64748b"},children:"Found Patients"}),r.jsx("button",{onClick:()=>a([]),style:{border:"none",background:"transparent",color:"#94a3b8",cursor:"pointer"},children:r.jsx(Rt,{size:14})})]}),n.map(ue=>r.jsxs("div",{onClick:()=>Le(ue),onMouseEnter:()=>ue.id&&z(ue.id),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",ue.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:ue.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[ue.age?`${ue.age} yrs`:"",ue.age&&ue.gender?" / ":"",ue.gender||"N/A"]})]},ue.id))]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[r.jsxs("div",{className:"cmd-input-container",children:[Y&&r.jsxs("div",{className:"cmd-image-preview",children:[r.jsx("img",{src:Y,alt:"Selected"}),r.jsx("button",{className:"cmd-image-delete",onClick:K,children:r.jsx(Rt,{size:12})})]}),r.jsx("textarea",{ref:g,placeholder:"Search (Name/Token/Phone), Ask AI, or Enter New Case...",value:t,onChange:$e,onKeyDown:Be,className:"cmd-input",disabled:c||V.isProcessing,rows:1}),r.jsxs("div",{className:"cmd-controls-group",children:[r.jsx("input",{type:"file",ref:$,onChange:ie,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:"cmd-icon-btn",onClick:()=>{var ue;return(ue=$.current)==null?void 0:ue.click()},title:"Attach Image",children:r.jsx(QD,{})}),r.jsx("button",{className:"cmd-icon-btn",onClick:X,title:"Voice Input",children:r.jsx(UN,{})}),(t.length>0||Y)&&r.jsx("button",{className:"cmd-icon-btn send-btn",onClick:Ae,title:"Send",children:r.jsx(Db,{})})]})]}),j&&r.jsx(iS,{options:MOe,children:r.jsx(sS,{onClose:()=>w(!1),patientData:C,tokenNumber:null,onAiSummaryChange:T})})]})]})},$M=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(!1),c=Lt(),u=v.useRef(null);v.useEffect(()=>{const C=A=>{u.current&&!u.current.contains(A.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const f=v.useCallback(_U.debounce(async C=>{if(C.trim().length<2){a([]),s(!1);return}s(!0);try{const A=new URLSearchParams({search:encodeURIComponent(C),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),k=await le(`/api/patients?${A.toString()}`);if(!k.ok)throw new Error("Failed to fetch patients");const P=await k.json();a(P.patients)}catch{a([])}finally{s(!1)}},400),[]);v.useEffect(()=>(t?(s(!0),f(t)):(a([]),f.cancel(),s(!1)),()=>f.cancel()),[t,f]);const p=C=>{c(`/patient/${encodeURIComponent(C.id)}/admission-billing`)},g=()=>{e(""),a([]),l(!1)},x=C=>C.slice(0,1).toUpperCase(),[b,j]=v.useState(!1),[w,_]=v.useState(!1),T=async()=>{_(!0);try{const C=await le("/api/patients/discharge-all",{method:"POST"}),A=await C.json();C.ok?(alert(A.message),a([]),e("")):alert(A.message||"Failed to discharge patients")}catch(C){console.error("Bulk discharge error:",C),alert("An error occurred while processing bulk discharge.")}finally{_(!1),j(!1)}};return r.jsxs("div",{className:"ma-container",children:[r.jsxs("div",{className:"ma-header-section",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ma-title",children:"Manage Admission"}),r.jsx("p",{className:"ma-subtitle",children:"Search for a patient to admit, discharge, or view billing details"})]}),r.jsx("button",{className:"ma-discharge-all-btn",onClick:()=>j(!0),children:"Discharge Everyone"})]}),b&&r.jsx("div",{className:"ma-modal-overlay",children:r.jsxs("div",{className:"ma-modal-content",children:[r.jsx("h3",{children:"Confirm Bulk Discharge"}),r.jsxs("p",{children:["Are you sure you want to discharge ",r.jsx("strong",{children:"ALL"})," currently admitted patients?"]}),r.jsx("div",{className:"ma-modal-warning",children:r.jsx("p",{children:" This will finalize bills for all admitted patients."})}),r.jsxs("div",{className:"ma-modal-actions",children:[r.jsx("button",{className:"ma-modal-cancel",onClick:()=>j(!1),disabled:w,children:"Cancel"}),r.jsx("button",{className:"ma-modal-confirm",onClick:T,disabled:w,children:w?"Processing...":"Yes, Discharge All"})]})]})}),r.jsxs("div",{className:"ma-search-wrapper",ref:u,children:[i?r.jsxs("div",{className:"ma-loading-spinner",children:[r.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]}):r.jsx(En,{className:"ma-search-icon",size:20}),r.jsx("input",{type:"text",value:t,onChange:C=>{e(C.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search by Name, Phone, or Token...",className:"ma-search-input",autoFocus:!0}),t&&r.jsx("div",{className:"ma-clear-icon",onClick:g,children:r.jsx(Rt,{size:18})}),r.jsxs("div",{className:`ma-results-dropdown ${o&&(n.length>0||i)?"open":""}`,children:[n.map(C=>{const A=C.admission_date&&!C.discharge_date;return r.jsxs("div",{onClick:()=>p(C),className:"ma-result-item",children:[r.jsxs("div",{className:"ma-patient-info",children:[r.jsx("div",{className:"ma-avatar",children:x(C.name)}),r.jsxs("div",{className:"ma-patient-text",children:[r.jsxs("h4",{children:[C.name,r.jsxs("span",{className:"ma-patient-token",children:["#",C.token]})]}),r.jsxs("p",{className:"ma-patient-subtext",children:[C.phone||"No phone","  ",C.age?`${C.age} Y`:"","  ",C.gender||""]})]})]}),r.jsx("div",{className:`ma-badge ${A?"ma-badge-admitted":"ma-badge-discharged"}`,children:A?"ADMITTED":"NOT ADMITTED"})]},C.id)}),t.length>2&&!i&&n.length===0&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:['No patients found matching "',t,'"']})]})]})]})},kz=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Yes/No"},{value:"computed",label:"Computed (Formula)"}],zM=({isOpen:t,onClose:e,entityType:n,entityLabel:a,currentConfig:i,onConfigUpdated:s})=>{const[o,l]=v.useState([]),[c,u]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState({key:"",label:"",type:"text",required:!1,formula:""});v.useEffect(()=>{t&&(l(i[n]||[]),p(null),x({key:"",label:"",type:"text",required:!1,formula:""}))},[t,i,n]);const b=T=>T.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),j=()=>{var C;if(!g.label.trim()){p("Column label is required");return}if(g.type==="computed"&&!((C=g.formula)!=null&&C.trim())){p("Formula is required for computed columns");return}const T=b(g.label);if(o.some(A=>A.key===T)){p("A column with this name already exists");return}l([...o,{...g,key:T}]),x({key:"",label:"",type:"text",required:!1,formula:""}),p(null)},w=T=>{l(o.filter(C=>C.key!==T))},_=async()=>{u(!0),p(null);try{const T={...i,[n]:o};if(!(await le("/api/clinics/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_columns_config:T})})).ok)throw new Error("Failed to save custom columns");s(T),e()}catch(T){p(T.message||"Failed to save")}finally{u(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content manage-columns-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsxs("h2",{children:["Manage Custom Columns - ",a]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Rt,{size:18})})]}),f&&r.jsx("div",{className:"error-message",children:f}),r.jsxs("div",{className:"columns-list",children:[r.jsx("h4",{children:"Current Custom Columns"}),o.length===0?r.jsx("p",{className:"no-columns",children:"No custom columns defined yet."}):r.jsx("div",{style:{overflowX:"auto",borderRadius:"6px",border:"1px solid var(--border-color, #e5e7eb)"},children:r.jsxs("table",{className:"columns-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Label"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Details"}),r.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),r.jsx("tbody",{children:o.map(T=>{var C;return r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:500},children:T.label}),r.jsx("td",{children:((C=kz.find(A=>A.value===T.type))==null?void 0:C.label)||T.type}),r.jsx("td",{children:T.type==="computed"?r.jsx("code",{className:"computed-formula",children:T.formula}):r.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:T.required?"Required":"Optional"})}),r.jsx("td",{style:{textAlign:"center"},children:r.jsx("button",{onClick:()=>w(T.key),className:"remove-column-btn",title:"Remove Column",style:{padding:"0.2rem"},children:r.jsx(Wn,{size:14})})})]},T.key)})})]})})]}),r.jsxs("div",{className:"add-column-section",children:[r.jsx("h4",{children:"Add New Column"}),r.jsxs("div",{className:"add-column-form",children:[r.jsx("input",{type:"text",placeholder:"Label (e.g., BMI)",value:g.label,onChange:T=>x({...g,label:T.target.value}),className:"column-input",style:{flex:1.5}}),r.jsx("select",{value:g.type,onChange:T=>x({...g,type:T.target.value}),className:"column-select",children:kz.map(T=>r.jsx("option",{value:T.value,children:T.label},T.value))}),g.type==="computed"?r.jsx("input",{type:"text",placeholder:"Formula (e.g. weight / (height * height))",value:g.formula||"",onChange:T=>x({...g,formula:T.target.value}),className:"column-input",style:{flex:2}}):r.jsxs("label",{className:"required-checkbox",children:[r.jsx("input",{type:"checkbox",checked:g.required,onChange:T=>x({...g,required:T.target.checked})}),r.jsx("span",{style:{fontSize:"0.8rem"},children:"Required"})]}),r.jsxs("button",{onClick:j,className:"add-column-btn",children:[r.jsx(Vn,{size:14})," Add"]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:e,className:"cancel-btn",disabled:c,children:"Cancel"}),r.jsxs("button",{onClick:_,className:"save-btn",disabled:c,children:[r.jsx(Bi,{size:16})," ",c?"Saving...":"Save Changes"]})]})]})}):null},qA=15,CD=()=>{const t=Lt(),{customColumnsConfig:e,refetch:n}=oS(),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(!0),[u,f]=v.useState(null),[p,g]=v.useState(""),[x,b]=v.useState(1),[j,w]=v.useState(1),[_,T]=v.useState(0),[C,A]=v.useState("created_at"),k=hs(),P=ee=>{ee&&(k.prefetchQuery({queryKey:Wt.patients.context(ee),queryFn:async()=>{const ge=await le(`/api/patients/${ee}/context`);if(!ge.ok)throw new Error("Failed to fetch patient context");return ge.json()},staleTime:5*60*1e3}),k.prefetchQuery({queryKey:Wt.patientDebts.balance(ee),queryFn:async()=>{const ge=await le(`/api/patient-debts/${ee}/balance`);return ge.ok?ge.json():{netDebt:0}},staleTime:1*60*1e3}),k.prefetchQuery({queryKey:Wt.queue.latest(ee),queryFn:async()=>{const ge=await le(`/api/queue/patient/${ee}/latest`);if(!ge.ok)throw new Error("Failed to fetch latest queue status");const de=await ge.json();return de!=null&&de._id&&k.prefetchQuery({queryKey:Wt.queue.entry(de._id),queryFn:async()=>{const ae=await le(`/api/queue/doctor/complaint/${de._id}`);if(!ae.ok)throw new Error("Failed to fetch complaint record");return ae.json()},staleTime:1*60*1e3}),de},staleTime:5e3}),k.prefetchQuery({queryKey:Wt.dental.records(ee),queryFn:async()=>{const ge=await le(`/api/dental/patient/${ee}`);if(!ge.ok)throw new Error("Failed to fetch dental records");return ge.json()},staleTime:5*60*1e3}))},I=v.useMemo(()=>DO(ee=>P(ee),500),[]);v.useEffect(()=>()=>{I.cancel()},[I]);const[R,q]=v.useState("desc"),[U,F]=v.useState(""),[B,V]=v.useState(!1),[W,G]=v.useState(null),[z,Y]=v.useState([]),[Q,K]=v.useState(""),[$,ie]=v.useState(!1),[xe,X]=v.useState(null),[Ie,$e]=v.useState(!0),[Be,Le]=v.useState(null),[ce,Se]=v.useState(p);Kc(),v.useEffect(()=>{const ee=setTimeout(()=>{Se(p),b(1)},500);return()=>{clearTimeout(ee)}},[p]);const Ve=v.useCallback(async()=>{$e(!0),Le(null);try{const ee=await le("/api/subscriptions");if(!ee.ok){let de=`Failed to fetch subscription plans (${ee.status})`;try{de=(await ee.json()).message||de}catch{}throw new Error(de)}const ge=await ee.json();Y(ge)}catch(ee){console.error("Error fetching subscription plans:",ee),Le(ee.message||"An unknown error occurred while fetching plans."),Y([])}finally{$e(!1)}},[]),Ae=v.useCallback(async(ee,ge,de,ae,ne)=>{c(!0),f(null);try{const se=new URLSearchParams({page:ee.toString(),limit:qA.toString(),sortBy:de,sortOrder:ae});ge&&se.append("search",ge),ne&&se.append("gender",ne);const je=await le(`/api/patients?${se.toString()}`);if(!je.ok){const J=await je.json();throw new Error(J.message||"Failed to fetch patients")}const Ee=await je.json();o(Ee.patients),T(Ee.totalCount),b(Ee.currentPage),w(Ee.totalPages)}catch(se){console.error("Error fetching patients:",se),f(`Failed to load patients: ${se.message}`),o([]),T(0),b(1),w(1)}finally{c(!1)}},[]);v.useEffect(()=>{Ae(x,ce,C,R,U),Ve()},[x,ce,C,R,U,Ae,Ve]);const ue=ee=>{const ge=C===ee&&R==="asc"?"desc":"asc";A(ee),q(ge),b(1)},Te=ee=>{try{return new Date(ee).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},oe=()=>{V(!1),G(null),K(""),X(null),ie(!1)},be=async(ee,ge)=>{o(de=>de.map(ae=>ae.id===ee?{...ae,insurance_type:ge}:ae));try{const de=await le(`/api/patients/${ee}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:ge})});if(!de.ok){const ae=await de.json();throw new Error(ae.message||"Failed to update insurance type")}}catch(de){console.error("Error updating insurance type:",de),Ae(x,ce,C,R,U)}},_e=(ee,ge)=>{const de=new Date(ee),ae=ge.interval||1;switch(ge.period){case"daily":de.setDate(ee.getDate()+ae);break;case"weekly":de.setDate(ee.getDate()+ae*7);break;case"monthly":de.setMonth(ee.getMonth()+ae);break;case"yearly":de.setFullYear(ee.getFullYear()+ae);break;default:console.warn(`Unknown subscription period: ${ge.period}. Defaulting to 1 month.`),de.setMonth(ee.getMonth()+1)}return de},Ne=async()=>{if(!W||!Q){X("Please select a subscription plan.");return}const ee=z.find(ge=>ge.id===Q);if(!ee){X("Selected plan details not found.");return}ie(!0),X(null);try{const ge=new Date,de=_e(ge,ee),ae={subscription_plan_id:Q,subscription_status:"active",subscription_start_date:ge.toISOString(),subscription_end_date:de.toISOString(),subscription_payment_method:"manual"},ne=await le(`/api/patients/${W.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!ne.ok){const se=await ne.json();throw new Error(se.message||"Failed to update patient subscription")}oe(),Ae(x,ce,C,R,U)}catch(ge){console.error("Error starting subscription:",ge),X(`Failed to start subscription: ${ge.message}`)}finally{ie(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("div",{className:"all-patients-header-section",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:16})}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(Yn,{size:28}),"All Patients"]})]}),r.jsxs("div",{className:"controls-container",children:[!Ie&&!Be&&z.length>0&&r.jsx("div",{className:"compact-subscriptions",children:z.map(ee=>r.jsxs("span",{className:"plan-chip",title:`${ee.name}: ${ee.price} / ${ee.interval} ${ee.period}${ee.description?" - "+ee.description:""}`,children:[ee.name,": ",ee.price]},ee.id))}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:ee=>g(ee.target.value)}),r.jsx(En,{className:"search-input-icon",size:16})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("div",{className:"filter-select-container",children:[r.jsx(FX,{size:14,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:U,onChange:ee=>F(ee.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Gender"}),r.jsx("option",{value:"M",children:"M"}),r.jsx("option",{value:"F",children:"F"}),r.jsx("option",{value:"O",children:"O"})]})]})}),r.jsxs("button",{onClick:()=>i(!0),className:"action-button",title:"Manage Custom Columns",children:[r.jsx(hd,{size:14})," Columns"]})]})]}),u&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:u})]}),l?r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:50,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:40,height:20})}),r.jsx("th",{children:r.jsx(te,{width:60,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:120,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:40,height:20})}),r.jsx("td",{className:"patient-name",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:120,height:20})]})}),r.jsx("td",{children:r.jsx(te,{width:30,height:20})}),r.jsx("td",{children:r.jsx(te,{width:30,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(te,{width:100,height:32})}),r.jsx("td",{children:r.jsx(te,{width:80,height:32,style:{borderRadius:"4px"}})})]},ee))})]})}):s.length===0?r.jsx("div",{className:"empty-state",children:ce?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ue("name"),children:["Name",C==="name"&&(R==="asc"?r.jsx(AI,{size:14,className:"sort-icon"}):r.jsx(kI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ue("created_at"),children:["Registered On",C==="created_at"&&(R==="asc"?r.jsx(AI,{size:14,className:"sort-icon"}):r.jsx(kI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:s.map(ee=>r.jsxs(Ce.Fragment,{children:[r.jsxs("tr",{className:"patient-row clickable-row",onClick:()=>t(`/dashboard/edit-complaint/patient/${ee.id}`),onMouseEnter:()=>I(ee.id),children:[r.jsx("td",{children:ee.token??"-"}),r.jsx("td",{className:"patient-name",children:ee.name}),r.jsx("td",{children:ee.age??"-"}),r.jsx("td",{children:ee.gender??"-"}),r.jsx("td",{children:ee.phone??"-"}),r.jsx("td",{children:ee.address??"-"}),r.jsx("td",{children:Te(ee.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${ee.subscription_status==="active"?"active":ee.subscription_status==="cancelled"||ee.subscription_status==="expired"?"inactive":"none"}`,children:ee.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:ee.insurance_type,onClick:ge=>ge.stopPropagation(),onChange:ge=>be(ee.id,ge.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:ge=>{ge.stopPropagation(),t(`/start-subscription/${ee.id}`)},className:"action-button",children:"Start Sub"})})]}),e.patients&&e.patients.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:10,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:e.patients.map(ge=>{var de;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[ge.label,":"]})," ",(de=ee.custom_fields)!=null&&de[ge.key]?String(ee.custom_fields[ge.key]):"-"]},ge.key)})})})})]},ee.id))})]})}),j>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(x-1)*qA+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(x*qA,_)})," ","of"," ",r.jsx("span",{className:"font-medium",children:_})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>b(ee=>Math.max(ee-1,1)),disabled:x===1||l,className:"pagination-button",children:[r.jsx(Eb,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:x})," of ",r.jsx("span",{className:"font-medium",children:j})]}),r.jsxs("button",{onClick:()=>b(ee=>Math.min(ee+1,j)),disabled:x===j||l,className:"pagination-button",children:["Next",r.jsx(yd,{size:16,className:"next-icon"})]})]})]})]}),B&&W&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",W.name]}),r.jsx("button",{onClick:oe,className:"subscription-modal-close-button",children:r.jsx(Rt,{size:24})})]}),xe&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:xe})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:Q,onChange:ee=>K(ee.target.value),className:"form-select",disabled:$||Ie||Be!==null||z.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),Ie?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):Be?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):z.length>0?z.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.name," - ",ee.price," (",ee.interval," ",ee.period,ee.interval>1?"s":"",")"]},ee.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),Be&&r.jsx("p",{className:"error-message",children:Be}),z.length===0&&!Ie&&!Be&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:oe,disabled:$,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:Ne,disabled:!Q||$,className:"subscription-modal-button submit",children:$?"Starting...":"Start Subscription"})]})]})}),r.jsx(zM,{isOpen:a,onClose:()=>i(!1),entityType:"patients",entityLabel:"Patients",currentConfig:e,onConfigUpdated:()=>{n()}})]})},hG=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(!1),[u,f]=v.useState(!1),p=/^\+?[0-9\s\-().]{7,20}$/,g=v.useMemo(()=>$l(async _=>{if(_.trim().length<2){i([]),o(!1);return}o(!0);try{const T=new URLSearchParams({search:encodeURIComponent(_),page:"1",limit:"8",sortBy:"name",sortOrder:"asc"}),C=await le(`/api/patients?${T.toString()}`);if(!C.ok)throw new Error("Failed to search");const A=await C.json();i(A.patients)}catch{i([])}finally{o(!1)}},300),[]),x=_=>{const T=_.target.value;n(T),c(p.test(T)),o(!0),f(!0),g(T)},b=v.useCallback(_=>{t("/billing",{state:{patientId:_.id,patientName:_.name}})},[t]),j=v.useCallback(async()=>{if(!(!e||!l)){o(!0);try{const T=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Direct Patient",phone:e,age:null,gender:null,token:null})});if(!T.ok)throw new Error("Failed to create patient");const C=await T.json();b(C)}catch(_){alert(`Error: ${_.message}`)}finally{o(!1)}}},[e,l,b]),w=_=>_.slice(0,1).toUpperCase();return r.jsxs("div",{className:"ccb-container",children:[r.jsxs("div",{className:"ccb-header-section",children:[r.jsx("button",{onClick:()=>t(-1),className:"ccb-back-button",title:"Go Back",children:r.jsx(sn,{size:24})}),r.jsx("h1",{className:"ccb-title",children:"Create Custom Bill"}),r.jsx("p",{className:"ccb-subtitle",children:"Search for a patient to bill manually, or create a new one instantly."})]}),r.jsxs("div",{className:"ccb-search-wrapper",children:[r.jsx(En,{className:"ccb-search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by Name, Phone, or Token...",value:e,onChange:x,onFocus:()=>f(!0),className:"ccb-search-input",autoFocus:!0}),e&&r.jsx("div",{className:"ccb-clear-icon",onClick:()=>{n(""),i([]),f(!1)},children:r.jsx(Rt,{size:18})}),r.jsxs("div",{className:`ccb-results-dropdown ${u&&(a.length>0||s||e.length>2&&a.length===0)?"open":""}`,children:[s&&r.jsx("div",{className:"p-4 flex justify-center items-center",children:r.jsx("div",{className:"ccb-spinner"})}),!s&&a.map(_=>r.jsxs("div",{onClick:()=>b(_),className:"ccb-result-item",children:[r.jsxs("div",{className:"ccb-patient-info",children:[r.jsx("div",{className:"ccb-avatar",children:w(_.name)}),r.jsxs("div",{className:"ccb-patient-details",children:[r.jsx("h4",{children:_.name}),r.jsxs("p",{className:"ccb-patient-meta",children:[_.phone||"No phone","  ",_.gender||"-","  ",_.age?`${_.age}y`:"-"]})]})]}),r.jsxs("span",{className:"ccb-token-badge",children:["#",_.token]})]},_.id)),!s&&a.length===0&&e.length>2&&r.jsxs("div",{className:"ccb-create-action",children:[r.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No patients found."}),l&&r.jsxs("button",{onClick:j,className:"ccb-create-btn w-full",children:["Create Patient with Phone ",e]})]})]})]})]})},fG=({currentUser:t})=>{const e=Lt(),n=hs(),[a,i]=v.useState("select_patient"),[s,o]=v.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=v.useState(null),[u,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(""),[j,w]=v.useState([]),[_,T]=v.useState(""),[C,A]=v.useState([]),[k,P]=v.useState(!1),[I,R]=v.useState(null),[q,U]=v.useState(null),[F,B]=v.useState(null),[V,W]=v.useState(!1),[G,z]=v.useState(!1),[Y,Q]=v.useState(!1),K=/^\+?[0-9\s\-().]{7,20}$/,$=/^[a-zA-Z\s'-]{2,}$/,ie=v.useCallback(async()=>{if(!(u.length>0)){W(!0),B(null);try{const oe=await le("/api/lab-tests");if(!oe.ok)throw new Error("Failed to fetch lab tests");const be=await oe.json();f(be)}catch(oe){console.error("Failed to fetch available lab tests:",oe),B("Could not load lab test list: "+oe.message),f([])}finally{W(!1)}}},[u.length]),xe=oe=>{oe&&(n.prefetchQuery({queryKey:Wt.patients.context(oe),queryFn:async()=>{const be=await le(`/api/patients/${oe}/context`);if(!be.ok)throw new Error("Failed to fetch patient context");return be.json()},staleTime:1e3*60*5}),n.prefetchQuery({queryKey:Wt.patientDebts.balance(oe),queryFn:async()=>{const be=await le(`/api/patient-debts/${oe}/balance`);if(!be.ok)throw new Error("Failed to fetch patient debt");return be.json()},staleTime:1e3*60}),n.prefetchQuery({queryKey:Wt.queue.latest(oe),queryFn:async()=>{const be=await le(`/api/queue/patient/${oe}/latest`);if(!be.ok){if(be.status===404)return null;throw new Error("Failed to fetch queue status")}return be.json()},staleTime:1e3*5}))},X=v.useMemo(()=>new uo(u,{keys:["name","description"],threshold:.3,ignoreLocation:!0}),[u]);v.useEffect(()=>{if(!x){w([]);return}const oe=X.search(x).map(be=>be.item);w(oe.slice(0,10))},[x,X]);const Ie=v.useCallback(oe=>{const be={id:oe.id,name:oe.name,token:oe.token,age:oe.age,gender:oe.gender,phone:oe.phone};c(be),i("create_order"),g([]),b(""),w([]),B(null),ie()},[ie]),$e=v.useMemo(()=>$l(async oe=>{if(oe.trim().length<2){A([]),P(!1),R(null);return}P(!0),R(null);try{const be=new URLSearchParams({search:encodeURIComponent(oe),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),_e=await le(`/api/patients?${be.toString()}`);if(!_e.ok){const ee=await _e.text();throw new Error(`API Error (${_e.status}): ${ee||_e.statusText}`)}const Ne=await _e.json();A(Ne.patients)}catch(be){console.error("Error searching lab patients:",be),R(be.message||"Failed to search lab patients."),A([])}finally{P(!1)}},300),[K,$]),Be=oe=>{const be=oe.target.value;T(be),z(K.test(be)),Q($.test(be)&&!K.test(be)),P(!0),$e(be)},Le=v.useCallback(async oe=>{if(!_||oe==="phone"&&!G||oe==="name"&&!Y){R(`Invalid ${oe} to create a new patient.`);return}P(!0),R(null);try{const _e=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:oe==="name"?_:"direct lab",phone:oe==="phone"?_:null,age:null,gender:null,token:null})});if(!_e.ok){const ee=await _e.json();throw new Error(ee.message||`Failed to create patient: ${_e.statusText}`)}const Ne=await _e.json();alert(`New patient "${Ne.name}" created with ${oe==="phone"?`phone ${Ne.phone}`:`name ${Ne.name}`}.`),Ie({id:Ne.id,name:Ne.name,token:Ne.token??null,age:Ne.age??null,gender:Ne.gender??null,phone:Ne.phone})}catch(be){console.error("Error creating new patient:",be),R(be.message||"Failed to create new patient.")}finally{P(!1)}},[_,G,Y,Ie]),ce=()=>{i("select_patient"),c(null),T(""),A([]),R(null)},Se=oe=>{const{name:be,value:_e}=oe.target;o(Ne=>({...Ne,[be]:be==="age"?_e?parseInt(_e,10):void 0:_e}))},Ve=async oe=>{if(oe.preventDefault(),U(null),!s.name){U("Patient Name is required.");return}const be={name:s.name,age:s.age,gender:s.gender,phone:s.phone,address:s.address};try{const _e=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});if(!_e.ok){const ee=await _e.json();throw new Error(ee.message||`Failed to create patient: ${_e.statusText}`)}const Ne=await _e.json();Ie({id:Ne.id,name:Ne.name,token:Ne.token??null,age:Ne.age??null,gender:Ne.gender??null,phone:Ne.phone})}catch(_e){console.error("Failed to create patient:",_e),U(_e.message||"Failed to create patient. Please try again.")}},Ae=oe=>{if(p.some(be=>be.id===oe.id)){B(`${oe.name} is already in the order.`),setTimeout(()=>B(null),3e3),b(""),w([]);return}g(be=>[...be,{...oe}]),b(""),w([])},ue=oe=>{g(be=>be.filter(_e=>_e.id!==oe))},Te=async oe=>{if(oe.preventDefault(),B(null),!l){B("No patient selected.");return}if(p.length===0){B("No lab tests selected.");return}const be={patient_id:l.id,tests:p.map(_e=>({id:_e.id,name:_e.name,price:_e.price}))};console.log("Submitting Lab Order:",be);try{const _e=await le("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});if(!_e.ok){const ge=await _e.json();throw console.error("API Error Data:",ge),new Error(ge.message||`Failed to create lab order: ${_e.statusText}`)}const Ne=await _e.json();console.log("Lab Order Creation Result:",Ne);let ee=l.queueId;if(!ee){const ge=await le(`/api/queue/patient/${l.id}/latest`);if(ge.ok){const de=await ge.json();de!=null&&de._id&&(ee=de._id)}}if(!ee){const ge=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!ge.ok){const ae=await ge.text();throw new Error(`Failed to create queue entry for redirection: ${ae||ge.statusText}`)}const de=await ge.json();if(de!=null&&de.id)ee=de.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}(t==null?void 0:t.role)==="lab"?e("/dashboard"):e(`/dashboard/edit-complaint/${ee}`)}catch(_e){console.error("Failed to create lab order:",_e),B(_e.message||"Failed to create lab order.")}};return v.useEffect(()=>{ie()},[ie]),r.jsxs("div",{className:"create-lab-order-container",children:[r.jsxs("div",{className:"create-lab-order-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button","aria-label":"Go back",children:r.jsx(sn,{size:20})}),r.jsx("h1",{className:"create-lab-order-title",children:"Create New Lab Order"}),r.jsx("div",{style:{width:"64px"}})," "]}),(a==="select_patient"||a==="create_patient")&&r.jsxs("div",{className:"glass-card",children:[a==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"header-with-action",children:r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Select Patient"})}),r.jsxs("div",{className:"search-container",children:[r.jsx(En,{className:"search-icon",size:20}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No...",value:_,onChange:Be,className:"modern-input",autoFocus:!0,autoComplete:"off"}),k&&r.jsx("div",{style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(te,{width:80,height:14})})]}),k&&r.jsx("ul",{className:"patient-list",children:[1,2,3].map(oe=>r.jsxs("li",{className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx(te,{width:120,height:20}),r.jsx(te,{width:50,height:24,style:{borderRadius:"12px"}})]}),r.jsx("div",{className:"patient-details",children:r.jsx(te,{width:200,height:16})})]},oe))}),I&&r.jsxs("div",{className:"error-message",children:[r.jsx(Fr,{size:18}),I]}),C.length>0&&r.jsx("ul",{className:"patient-list",children:C.map(oe=>r.jsxs("li",{onClick:()=>Ie(oe),onMouseEnter:()=>xe(oe.id),className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("strong",{children:oe.name}),r.jsxs("span",{className:"token-badge",children:["#",oe.token||"N/A"]})]}),r.jsxs("div",{className:"patient-details",children:[oe.age?`${oe.age} yrs`:"",oe.gender?` / ${oe.gender}`:"",oe.phone?`  ${oe.phone}`:""]})]},oe.id))}),_.length>=2&&!k&&C.length===0&&!I&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{className:"no-data-message",style:{background:"none",border:"none",padding:0},children:['No patients found matching "',_,'".']}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},children:[G&&r.jsxs("button",{type:"button",onClick:()=>Le("phone"),className:"secondary-button",children:['Create "Direct Lab" Patient (Phone: ',_,")"]}),Y&&r.jsxs("button",{type:"button",onClick:()=>Le("name"),className:"secondary-button",children:["Create Patient (Name: ",_,")"]})]})]}),_.length<2&&!k&&r.jsx("div",{className:"info-message",children:"Start typing to search for a patient..."})]}),a==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"New Patient Registration"}),r.jsx("button",{onClick:ce,className:"text-button",children:" Back to Search "})]}),q&&r.jsxs("div",{className:"error-message",children:[r.jsx(Fr,{size:18}),q]}),r.jsxs("form",{onSubmit:Ve,children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-name",className:"form-label",children:"Patient Name *"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Yn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:s.name,onChange:Se,className:"modern-input",placeholder:"Enter full name"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:s.age??"",onChange:Se,className:"modern-input",style:{paddingLeft:"16px"},placeholder:"e.g. 30"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:s.gender??"",onChange:Se,className:"modern-input",style:{paddingLeft:"16px"},children:[r.jsx("option",{value:"",children:"Select Gender..."}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-phone",className:"form-label",children:"Phone Number"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(ag,{className:"search-icon",size:18}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:s.phone||"",onChange:Se,className:"modern-input",placeholder:"e.g. 9876543210"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-address",className:"form-label",children:"Address"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(KD,{className:"search-icon",size:18,style:{top:"20px"}}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:s.address||"",onChange:Se,className:"modern-input",style:{resize:"none"},placeholder:"Enter address (optional)"})]})]})]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:ce,className:"secondary-button",children:" Cancel "}),r.jsxs("button",{type:"submit",className:"primary-button",children:[r.jsx(Vn,{size:18}),"Create & Proceed"]})]})]})]})]}),a==="create_order"&&l&&r.jsxs("div",{className:"glass-card",children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Create Lab Order"}),r.jsx("button",{onClick:ce,className:"text-button",children:" Change Patient "})]}),r.jsxs("div",{className:"patient-summary",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Yn,{size:20,className:"highlight-primary"}),r.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:l.name})]}),r.jsxs("div",{className:"patient-details",style:{marginLeft:"30px",marginTop:"4px"},children:[l.age?`${l.age} yrs`:"Age N/A",l.gender&&`  ${l.gender}`,l.phone&&`  ${l.phone}`]})]}),F&&r.jsxs("div",{className:"error-message",children:[r.jsx(Fr,{size:18}),F]}),r.jsxs("form",{onSubmit:Te,children:[r.jsxs("div",{className:"form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",className:"form-label",children:"Add Lab Test"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[V?r.jsx("div",{style:{position:"absolute",right:"45px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(te,{width:24,height:24,variant:"circular"})}):r.jsx(En,{className:"search-icon",size:18}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search tests (e.g. CBC, Lipid Profile)...",value:x,onChange:oe=>b(oe.target.value),className:"modern-input",disabled:V,autoComplete:"off"}),V&&x&&r.jsx("div",{className:"search-results-dropdown",children:[1,2,3].map(oe=>r.jsxs("div",{className:"search-result-item",children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"20%",height:20})]},oe))}),x&&j.length>0&&r.jsx("div",{className:"search-results-dropdown",children:j.map(oe=>r.jsxs("div",{onClick:()=>Ae(oe),className:"search-result-item",children:[r.jsx("span",{style:{fontWeight:500},children:oe.name}),r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(oe.price).toFixed(2)]})]},oe.id))}),x&&j.length===0&&!V&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px",padding:"10px",fontSize:"0.9rem"},children:['No tests found matching "',x,'".']})]})]}),r.jsxs("div",{style:{marginTop:"30px"},children:[r.jsxs("h4",{className:"card-title",style:{fontSize:"1.1rem"},children:["Selected Tests (",p.length,")"]}),p.length===0?r.jsx("div",{className:"info-message",children:"No tests added yet. Search above to add tests."}):r.jsx("div",{className:"selected-tests-list",children:p.map(oe=>r.jsxs("div",{className:"selected-test-item",children:[r.jsx("div",{style:{flex:1},children:r.jsx("div",{style:{fontWeight:500},children:oe.name})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(oe.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ue(oe.id),className:"remove-button",title:"Remove Test",children:r.jsx(Wn,{size:18})})]})]},oe.id))})]}),p.length>0&&r.jsxs("div",{className:"total-price",children:["Total: ",p.reduce((oe,be)=>oe+parseFloat(be.price),0).toFixed(2)]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:ce,className:"secondary-button",children:" Cancel Order "}),r.jsxs("button",{type:"submit",disabled:p.length===0,className:"primary-button",children:[r.jsx(kE,{size:18}),"Create Lab Order"]})]})]})]})]})},pG=({patient:t,onClose:e,onSave:n})=>{const[a,i]=v.useState({name:t.name,age:t.age,gender:t.gender,phone:t.phone||""}),[s,o]=v.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{await n({...a,phone:a.phone||void 0}),e()}catch(u){console.error(u),alert("Failed to update patient")}finally{o(!1)}};return r.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:r.jsxs("div",{className:"modal-content",style:{backgroundColor:"var(--surface-color, white)",padding:"1.25rem",borderRadius:"var(--radius-lg, 12px)",width:"380px",maxWidth:"90%",boxShadow:"var(--shadow-lg, 0 10px 25px rgba(0,0,0,0.15))",border:"1px solid var(--border-color, #e2e8f0)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border-color, #e2e8f0)",marginBottom:"1rem"},children:[r.jsx("h3",{style:{margin:0,fontSize:"1.15rem",fontWeight:700,color:"var(--text-color, #333)"},children:"Edit Patient"}),r.jsx("button",{onClick:e,style:{border:"none",background:"none",cursor:"pointer",color:"var(--text-secondary, #666)",padding:"4px"},children:r.jsx(Rt,{size:18})})]}),r.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Full Name"}),r.jsx("input",{type:"text",value:a.name,onChange:c=>i({...a,name:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"},required:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Age"}),r.jsx("input",{type:"number",value:a.age||"",onChange:c=>i({...a,age:parseInt(c.target.value)||0}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Gender"}),r.jsxs("select",{value:a.gender||"",onChange:c=>i({...a,gender:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)",background:"white"},children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Phone Number"}),r.jsx("input",{type:"tel",value:a.phone,onChange:c=>i({...a,phone:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"},placeholder:"Optional"})]}),r.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--border-color, #e2e8f0)",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:e,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)",background:"none",fontSize:"0.9rem",cursor:"pointer"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"save-btn",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:"var(--primary-color, #3b82f6)",color:"white",fontSize:"0.9rem",fontWeight:500,display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},disabled:s,children:s?"Saving...":r.jsxs(r.Fragment,{children:[r.jsx(Bi,{size:16})," Save Details"]})})]})]})]})})},Az=[{value:"general",label:"General"},{value:"diagnostic",label:"Diagnostic"},{value:"treatment",label:"Treatment"},{value:"minor_surgery",label:"Minor Surgery"}],IOe=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,category:"general"});v.useEffect(()=>{b()},[]);const b=async()=>{s(!0);try{const C=await le("/api/medical/procedures");if(C.ok){const A=await C.json();a(A)}}catch(C){console.error(C)}finally{s(!1)}},j=async()=>{if(!(!g.name||!g.cost))try{(await le("/api/medical/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,category:"general"}),b(),e())}catch(C){console.error(C)}},w=async C=>{try{(await le(`/api/medical/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),u({}),b(),e())}catch(A){console.error(A)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await le(`/api/medical/procedures/${C}`,{method:"DELETE"})).ok&&(b(),e())}catch(A){console.error(A)}},T=C=>{l(C.id),u({name:C.name,cost:C.cost,category:C.category})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Medical Procedures"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await le("/api/medical/procedures/import-defaults",{method:"POST"}),b(),e()}catch(C){console.error(C)}},className:"btn-secondary btn-compact",children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Rt,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{className:"p-20 text-center",children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"w-40",children:"Name"}),r.jsx("th",{className:"w-20",children:"Category"}),r.jsx("th",{className:"w-20",children:"Cost ()"}),r.jsx("th",{className:"w-20",children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"text-center p-20 text-muted",children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:A=>u({...c,name:A.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsx("select",{className:"edit-select",value:c.category||"general",onChange:A=>u({...c,category:A.target.value}),children:Az.map(A=>r.jsx("option",{value:A.value,children:A.label},A.value))})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:A=>u({...c,cost:parseFloat(A.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>w(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(Bi,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Rt,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.category}`,children:C.category.replace("_"," ")})}),r.jsxs("td",{className:"fw-500",children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(Os,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Wn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:C=>x({...g,name:C.target.value})}),r.jsx("select",{className:"form-select",value:g.category||"general",onChange:C=>x({...g,category:C.target.value}),children:Az.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:C=>x({...g,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:j,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Vn,{size:18})," Add New Procedure"]})})]})})};var ROe=Object.defineProperty,IN=Object.getOwnPropertySymbols,mG=Object.prototype.hasOwnProperty,gG=Object.prototype.propertyIsEnumerable,Ez=(t,e,n)=>e in t?ROe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TD=(t,e)=>{for(var n in e||(e={}))mG.call(e,n)&&Ez(t,n,e[n]);if(IN)for(var n of IN(e))gG.call(e,n)&&Ez(t,n,e[n]);return t},kD=(t,e)=>{var n={};for(var a in t)mG.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&IN)for(var a of IN(t))e.indexOf(a)<0&&gG.call(t,a)&&(n[a]=t[a]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Mf;(t=>{const e=class On{constructor(c,u,f,p){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<On.MIN_VERSION||c>On.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let g=[];for(let b=0;b<this.size;b++)g.push(!1);for(let b=0;b<this.size;b++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(f);if(this.drawCodewords(x),p==-1){let b=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const w=this.getPenaltyScore();w<b&&(p=j,b=w),this.applyMask(j)}}i(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,u){const f=t.QrSegment.makeSegments(c);return On.encodeSegments(f,u)}static encodeBinary(c,u){const f=t.QrSegment.makeBytes(c);return On.encodeSegments([f],u)}static encodeSegments(c,u,f=1,p=40,g=-1,x=!0){if(!(On.MIN_VERSION<=f&&f<=p&&p<=On.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let b,j;for(b=f;;b++){const C=On.getNumDataCodewords(b,u)*8,A=o.getTotalBits(c,b);if(A<=C){j=A;break}if(b>=p)throw new RangeError("Data too long")}for(const C of[On.Ecc.MEDIUM,On.Ecc.QUARTILE,On.Ecc.HIGH])x&&j<=On.getNumDataCodewords(b,C)*8&&(u=C);let w=[];for(const C of c){n(C.mode.modeBits,4,w),n(C.numChars,C.mode.numCharCountBits(b),w);for(const A of C.getData())w.push(A)}i(w.length==j);const _=On.getNumDataCodewords(b,u)*8;i(w.length<=_),n(0,Math.min(4,_-w.length),w),n(0,(8-w.length%8)%8,w),i(w.length%8==0);for(let C=236;w.length<_;C^=253)n(C,8,w);let T=[];for(;T.length*8<w.length;)T.push(0);return w.forEach((C,A)=>T[A>>>3]|=C<<7-(A&7)),new On(b,u,T,g)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let f=0;f<u;f++)for(let p=0;p<u;p++)f==0&&p==0||f==0&&p==u-1||f==u-1&&p==0||this.drawAlignmentPattern(c[f],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let f=u;for(let g=0;g<10;g++)f=f<<1^(f>>>9)*1335;const p=(u<<10|f)^21522;i(p>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,a(p,g));this.setFunctionModule(8,7,a(p,6)),this.setFunctionModule(8,8,a(p,7)),this.setFunctionModule(7,8,a(p,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,a(p,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,a(p,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,a(p,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let f=0;f<12;f++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;i(u>>>18==0);for(let f=0;f<18;f++){const p=a(u,f),g=this.size-11+f%3,x=Math.floor(f/3);this.setFunctionModule(g,x,p),this.setFunctionModule(x,g,p)}}drawFinderPattern(c,u){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const g=Math.max(Math.abs(p),Math.abs(f)),x=c+p,b=u+f;0<=x&&x<this.size&&0<=b&&b<this.size&&this.setFunctionModule(x,b,g!=2&&g!=4)}}drawAlignmentPattern(c,u){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,u+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(c,u,f){this.modules[u][c]=f,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,f=this.errorCorrectionLevel;if(c.length!=On.getNumDataCodewords(u,f))throw new RangeError("Invalid argument");const p=On.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][u],g=On.ECC_CODEWORDS_PER_BLOCK[f.ordinal][u],x=Math.floor(On.getNumRawDataModules(u)/8),b=p-x%p,j=Math.floor(x/p);let w=[];const _=On.reedSolomonComputeDivisor(g);for(let C=0,A=0;C<p;C++){let k=c.slice(A,A+j-g+(C<b?0:1));A+=k.length;const P=On.reedSolomonComputeRemainder(k,_);C<b&&k.push(0),w.push(k.concat(P))}let T=[];for(let C=0;C<w[0].length;C++)w.forEach((A,k)=>{(C!=j-g||k>=b)&&T.push(A[C])});return i(T.length==x),T}drawCodewords(c){if(c.length!=Math.floor(On.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let g=0;g<2;g++){const x=f-g,j=(f+1&2)==0?this.size-1-p:p;!this.isFunction[j][x]&&u<c.length*8&&(this.modules[j][x]=a(c[u>>>3],7-(u&7)),u++)}}i(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let f=0;f<this.size;f++){let p;switch(c){case 0:p=(f+u)%2==0;break;case 1:p=u%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+u)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(u/2))%2==0;break;case 5:p=f*u%2+f*u%3==0;break;case 6:p=(f*u%2+f*u%3)%2==0;break;case 7:p=((f+u)%2+f*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][f]&&p&&(this.modules[u][f]=!this.modules[u][f])}}getPenaltyScore(){let c=0;for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[g][w]==x?(b++,b==5?c+=On.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*On.PENALTY_N3),x=this.modules[g][w],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*On.PENALTY_N3}for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][g]==x?(b++,b==5?c+=On.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*On.PENALTY_N3),x=this.modules[w][g],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*On.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let x=0;x<this.size-1;x++){const b=this.modules[g][x];b==this.modules[g][x+1]&&b==this.modules[g+1][x]&&b==this.modules[g+1][x+1]&&(c+=On.PENALTY_N2)}let u=0;for(const g of this.modules)u=g.reduce((x,b)=>x+(b?1:0),u);const f=this.size*this.size,p=Math.ceil(Math.abs(u*20-f*10)/f)-1;return i(0<=p&&p<=9),c+=p*On.PENALTY_N4,i(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let f=[6];for(let p=this.size-7;f.length<c;p-=u)f.splice(1,0,p);return f}}static getNumRawDataModules(c){if(c<On.MIN_VERSION||c>On.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const f=Math.floor(c/7)+2;u-=(25*f-10)*f-55,c>=7&&(u-=36)}return i(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(On.getNumRawDataModules(c)/8)-On.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*On.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let p=0;p<c-1;p++)u.push(0);u.push(1);let f=1;for(let p=0;p<c;p++){for(let g=0;g<u.length;g++)u[g]=On.reedSolomonMultiply(u[g],f),g+1<u.length&&(u[g]^=u[g+1]);f=On.reedSolomonMultiply(f,2)}return u}static reedSolomonComputeRemainder(c,u){let f=u.map(p=>0);for(const p of c){const g=p^f.shift();f.push(0),u.forEach((x,b)=>f[b]^=On.reedSolomonMultiply(x,g))}return f}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(u>>>p&1)*c;return i(f>>>8==0),f}finderPenaltyCountPatterns(c){const u=c[1];i(u<=this.size*3);const f=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(f&&c[0]>=u*4&&c[6]>=u?1:0)+(f&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,f){return c&&(this.finderPenaltyAddHistory(u,f),u=0),u+=this.size,this.finderPenaltyAddHistory(u,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let f=c-1;f>=0;f--)u.push(l>>>f&1)}function a(l,c){return(l>>>c&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const s=class ta{constructor(c,u,f){if(this.mode=c,this.numChars=u,this.bitData=f,u<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(c){let u=[];for(const f of c)n(f,8,u);return new ta(ta.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!ta.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let f=0;f<c.length;){const p=Math.min(c.length-f,3);n(parseInt(c.substring(f,f+p),10),p*3+1,u),f+=p}return new ta(ta.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!ta.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],f;for(f=0;f+2<=c.length;f+=2){let p=ta.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f))*45;p+=ta.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f+1)),n(p,11,u)}return f<c.length&&n(ta.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f)),6,u),new ta(ta.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:ta.isNumeric(c)?[ta.makeNumeric(c)]:ta.isAlphanumeric(c)?[ta.makeAlphanumeric(c)]:[ta.makeBytes(ta.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,u);else if(c<16384)n(2,2,u),n(c,14,u);else if(c<1e6)n(6,3,u),n(c,21,u);else throw new RangeError("ECI assignment value out of range");return new ta(ta.Mode.ECI,0,u)}static isNumeric(c){return ta.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return ta.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let f=0;for(const p of c){const g=p.mode.numCharCountBits(u);if(p.numChars>=1<<g)return 1/0;f+=4+g+p.bitData.length}return f}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let f=0;f<c.length;f++)c.charAt(f)!="%"?u.push(c.charCodeAt(f)):(u.push(parseInt(c.substring(f+1,f+3),16)),f+=2);return u}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})(Mf||(Mf={}));(t=>{(e=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Mf||(Mf={}));(t=>{(e=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Mf||(Mf={}));var Lm=Mf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var LOe={L:Lm.QrCode.Ecc.LOW,M:Lm.QrCode.Ecc.MEDIUM,Q:Lm.QrCode.Ecc.QUARTILE,H:Lm.QrCode.Ecc.HIGH},yG=128,xG="L",vG="#FFFFFF",bG="#000000",jG=!1,wG=1,FOe=4,$Oe=0,zOe=.1;function NG(t,e=0){const n=[];return t.forEach(function(a,i){let s=null;a.forEach(function(o,l){if(!o&&s!==null){n.push(`M${s+e} ${i+e}h${l-s}v1H${s+e}z`),s=null;return}if(l===a.length-1){if(!o)return;s===null?n.push(`M${l+e},${i+e} h1v1H${l+e}z`):n.push(`M${s+e},${i+e} h${l+1-s}v1H${s+e}z`);return}o&&s===null&&(s=l)})}),n.join("")}function SG(t,e){return t.slice().map((n,a)=>a<e.y||a>=e.y+e.h?n:n.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function BOe(t,e,n,a){if(a==null)return null;const i=t.length+n*2,s=Math.floor(e*zOe),o=i/e,l=(a.width||s)*o,c=(a.height||s)*o,u=a.x==null?t.length/2-l/2:a.x*o,f=a.y==null?t.length/2-c/2:a.y*o,p=a.opacity==null?1:a.opacity;let g=null;if(a.excavate){let b=Math.floor(u),j=Math.floor(f),w=Math.ceil(l+u-b),_=Math.ceil(c+f-j);g={x:b,y:j,w,h:_}}const x=a.crossOrigin;return{x:u,y:f,h:c,w:l,excavation:g,opacity:p,crossOrigin:x}}function qOe(t,e){return e!=null?Math.max(Math.floor(e),0):t?FOe:$Oe}function _G({value:t,level:e,minVersion:n,includeMargin:a,marginSize:i,imageSettings:s,size:o,boostLevel:l}){let c=Ce.useMemo(()=>{const b=(Array.isArray(t)?t:[t]).reduce((j,w)=>(j.push(...Lm.QrSegment.makeSegments(w)),j),[]);return Lm.QrCode.encodeSegments(b,LOe[e],n,void 0,void 0,l)},[t,e,n,l]);const{cells:u,margin:f,numCells:p,calculatedImageSettings:g}=Ce.useMemo(()=>{let x=c.getModules();const b=qOe(a,i),j=x.length+b*2,w=BOe(x,o,b,s);return{cells:x,margin:b,numCells:j,calculatedImageSettings:w}},[c,o,s,a,i]);return{qrcode:c,margin:f,cells:u,numCells:p,calculatedImageSettings:g}}var UOe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Fa=Ce.forwardRef(function(e,n){const a=e,{value:i,size:s=yG,level:o=xG,bgColor:l=vG,fgColor:c=bG,includeMargin:u=jG,minVersion:f=wG,boostLevel:p,marginSize:g,imageSettings:x}=a,j=kD(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=j,_=kD(j,["style"]),T=x==null?void 0:x.src,C=Ce.useRef(null),A=Ce.useRef(null),k=Ce.useCallback(W=>{C.current=W,typeof n=="function"?n(W):n&&(n.current=W)},[n]),[P,I]=Ce.useState(!1),{margin:R,cells:q,numCells:U,calculatedImageSettings:F}=_G({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:u,marginSize:g,imageSettings:x,size:s});Ce.useEffect(()=>{if(C.current!=null){const W=C.current,G=W.getContext("2d");if(!G)return;let z=q;const Y=A.current,Q=F!=null&&Y!==null&&Y.complete&&Y.naturalHeight!==0&&Y.naturalWidth!==0;Q&&F.excavation!=null&&(z=SG(q,F.excavation));const K=window.devicePixelRatio||1;W.height=W.width=s*K;const $=s/U*K;G.scale($,$),G.fillStyle=l,G.fillRect(0,0,U,U),G.fillStyle=c,UOe?G.fill(new Path2D(NG(z,R))):q.forEach(function(ie,xe){ie.forEach(function(X,Ie){X&&G.fillRect(Ie+R,xe+R,1,1)})}),F&&(G.globalAlpha=F.opacity),Q&&G.drawImage(Y,F.x+R,F.y+R,F.w,F.h)}}),Ce.useEffect(()=>{I(!1)},[T]);const B=TD({height:s,width:s},w);let V=null;return T!=null&&(V=Ce.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{I(!0)},ref:A,crossOrigin:F==null?void 0:F.crossOrigin})),Ce.createElement(Ce.Fragment,null,Ce.createElement("canvas",TD({style:B,height:s,width:s,ref:k,role:"img"},_)),V)});Fa.displayName="QRCodeCanvas";var VOe=Ce.forwardRef(function(e,n){const a=e,{value:i,size:s=yG,level:o=xG,bgColor:l=vG,fgColor:c=bG,includeMargin:u=jG,minVersion:f=wG,boostLevel:p,title:g,marginSize:x,imageSettings:b}=a,j=kD(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:_,numCells:T,calculatedImageSettings:C}=_G({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:u,marginSize:x,imageSettings:b,size:s});let A=_,k=null;b!=null&&C!=null&&(C.excavation!=null&&(A=SG(_,C.excavation)),k=Ce.createElement("image",{href:b.src,height:C.h,width:C.w,x:C.x+w,y:C.y+w,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const P=NG(A,w);return Ce.createElement("svg",TD({height:s,width:s,viewBox:`0 0 ${T} ${T}`,ref:n,role:"img"},j),!!g&&Ce.createElement("title",null,g),Ce.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),Ce.createElement("path",{fill:c,d:P,shapeRendering:"crispEdges"}),k)});VOe.displayName="QRCodeSVG";const HOe=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var _e,Ne,ee,ge,de,ae,ne;const[i,s]=v.useState(null),[o,l]=v.useState(!0),[c,u]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState([]),[b,j]=v.useState("cash"),[w,_]=v.useState(!1),[T,C]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[A,k]=v.useState(0),[P,I]=v.useState(""),[R,q]=v.useState(""),[U,F]=v.useState(""),[B,V]=v.useState(null),[W,G]=v.useState(null),[z,Y]=v.useState(!1),Q=()=>{T.length>=5||C(se=>[...se,{id:crypto.randomUUID(),method:"cash",amount:0}])},K=se=>{T.length<=2||C(je=>je.filter(Ee=>Ee.id!==se))},$=(se,je,Ee)=>{C(J=>J.map(ye=>ye.id===se?{...ye,[je]:Ee}:ye))},ie=se=>{const je=T.filter(J=>J.id!==se).reduce((J,ye)=>J+ye.amount,0),Ee=Math.max(0,Be-je);$(se,"amount",Ee)},xe=se=>{const je=Math.min(100,Math.max(0,se||0));k(je),x(Ee=>Ee.map(J=>({...J,discount_percentage:je})))},X=(se,je)=>{const Ee=Math.min(100,Math.max(0,je||0));x(J=>J.map((ye,me)=>me===se?{...ye,discount_percentage:Ee}:ye))},Ie=v.useMemo(()=>g.reduce((se,je)=>se+(je.price??je.cost??0),0),[g]),$e=v.useMemo(()=>g.reduce((se,je)=>{const J=(je.price??je.cost??0)*(je.discount_percentage??0)/100;return se+J},0),[g]),Be=Ie-$e,Le=v.useMemo(()=>T.reduce((se,je)=>se+je.amount,0),[T]),ce=Be-Le,Se=Math.abs(ce)<.01,Ve=v.useMemo(()=>w?T.some(se=>se.method==="credit"):b==="credit",[w,T,b]),Ae=async()=>{var se,je;if(!i)return u("No record data available to bill."),null;if(g.length===0)return u("Cannot bill an empty procedure list."),null;p(!0),u(null);try{const Ee=g.map(Ge=>{const it=Ge.price??Ge.cost??0,wt=it*((Ge.discount_percentage??0)/100),we=it-wt;return{name:Ge.name,price:it,quantity:1,total:we,item_id:Ge.id||`proc_${Date.now()}`,type:"service",discount_percentage:Ge.discount_percentage??0}}),J=w?((se=T[0])==null?void 0:se.method)||"cash":b,ye=w?T.map(Ge=>({method:Ge.method,amount:Ge.amount})):void 0,me={patientId:i.patientId.id,items:Ee,amount:Be,paymentMode:J,splitPayments:ye,type:"consultation",related_id:i.id,status:"paid",discountPercentage:A},he=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)}),De=await he.json();if(!he.ok||!De.id)throw new Error(De.message||"Failed to create bill.");(await le(`/api/medical/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:De.id})})).ok||console.error("Failed to update medical record status"),s(Ge=>Ge?{...Ge,status:"billed",billId:De.id}:null);const Fe=w?((je=T.find(Ge=>Ge.method==="credit"))==null?void 0:je.amount)||0:b==="credit"?Be:0;if(Fe>0)try{await le(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Fe,related_bill_id:De.id,notes:`Medical Bill #${De.id}${w?" (Split Payment - Credit portion)":""}`})})}catch(Ge){console.error("Failed to create debt entry:",Ge)}return a&&a(),De.id}catch(Ee){return console.error("Billing process failed:",Ee),u(Ee.message||"Failed to create bill."),null}finally{p(!1)}},ue=()=>{window.print()},Te=async()=>{await Ae()&&setTimeout(()=>window.print(),300)},oe=async()=>{if(n){l(!0),u(null);try{const se=await le(`/api/medical/${n}`);if(!se.ok)throw new Error("Failed to fetch medical record");const je=await se.json(),Ee=je.Patient||{},J={id:je.id,patientId:{id:Ee.id||je.patient_id,name:Ee.name||"Unknown",patient_token_number:Ee.patient_token_number,age:Ee.age,gender:Ee.gender},clinicId:je.clinic_id,selectedProcedures:je.selected_procedures||[],status:je.status,billId:je.bill_id,createdAt:je.createdAt||je.date,date:je.date,notes:je.notes};s(J);const ye=(je.selected_procedures||[]).map(me=>({...me,price:me.cost,discount_percentage:0}));x(ye);try{const me=await le("/api/clinics/settings");if(me.ok){const he=await me.json();I(he.name||""),q(he.address||""),F(he.notes||""),he.upi_id&&V(`upi://pay?pa=${he.upi_id}&pn=${encodeURIComponent(he.name||"Clinic")}&cu=INR`)}}catch(me){console.error("Failed to fetch clinic settings",me)}}catch(se){u(se.message||"Failed to load record")}finally{l(!1)}}},be=async()=>{var se;if((se=i==null?void 0:i.patientId)!=null&&se.id){Y(!0);try{const je=await le(`/api/patient-debts/patient/${i.patientId.id}/balance`);if(je.ok){const Ee=await je.json();G(Ee.balance||0)}}catch(je){console.error("Failed to fetch patient debt",je)}finally{Y(!1)}}};return v.useEffect(()=>{t&&n&&oe()},[t,n]),v.useEffect(()=>{var se;(se=i==null?void 0:i.patientId)!=null&&se.id&&be()},[(_e=i==null?void 0:i.patientId)==null?void 0:_e.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Medical Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Rt,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsx("div",{className:"space-y-4 p-5",children:r.jsx(te,{width:100,height:20})})]})})]})})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"MEDICAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:P||"Clinic Name"}),(R||U)&&r.jsxs("div",{className:"clinic-details-print",children:[R&&r.jsx("span",{className:"small-text clinic-address",children:R}),U&&r.jsx("span",{className:"small-text clinic-notes",children:U})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",((Ne=i.patientId)==null?void 0:Ne.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((ee=i.patientId)==null?void 0:ee.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",((ge=i.patientId)==null?void 0:ge.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((de=i.patientId)==null?void 0:de.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Xr,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((se,je)=>{const Ee=se.price??se.cost??0,J=Ee*(se.discount_percentage??0)/100,ye=Ee-J;return r.jsxs("tr",{children:[r.jsx("td",{children:je+1}),r.jsx("td",{children:se.name}),r.jsx("td",{children:Ee.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:se.discount_percentage===0?"":se.discount_percentage,onChange:me=>X(je,parseFloat(me.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:ye.toFixed(2)})]},je)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",A.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",$e.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Be.toFixed(2)]})})]}),B&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(w&&T.some(se=>se.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:B,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",$e.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:A===0?"":A,onChange:se=>xe(parseFloat(se.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Be.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:B?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:B,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${w?"active":""}`,onClick:()=>_(!w),disabled:f||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:w?"2px solid #4facfe":"1px solid #ddd",background:w?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:w?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:w?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(qo,{size:14}),"Split Pay"]})]}),w?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(qo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",Be.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:T.map((se,je)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:je+1}),r.jsxs("select",{value:se.method,onChange:Ee=>$(se.id,"method",Ee.target.value),className:`split-payment-select ${se.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:se.amount===0?"":se.amount,onChange:Ee=>$(se.id,"amount",parseFloat(Ee.target.value)||0),placeholder:"0",className:`split-payment-input ${se.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed"})]}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>ie(se.id),className:"split-payment-btn split-payment-btn-fill",disabled:f||i.status==="billed",children:"Fill"}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>K(se.id),className:"split-payment-btn split-payment-btn-remove",disabled:f||i.status==="billed",children:r.jsx(Wn,{size:12})})]},se.id))}),T.length<5&&r.jsxs("button",{type:"button",onClick:Q,className:"split-payment-add-btn",disabled:f||i.status==="billed",children:[r.jsx(Vn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Le.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(ce)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(ce)<.01?"":ce>0?"":"",Math.abs(ce)<.01?"Balanced":ce>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ce).toFixed(2)]})]}),!Se&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",Be.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:se=>j(se.target.value),className:"payment-mode-select",disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),Ve&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),z?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:W&&W>0?"#dc3545":"#28a745"},children:["",(W||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:w?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(w?((ae=T.find(se=>se.method==="credit"))==null?void 0:ae.amount)||0:Be).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((W||0)+(w?((ne=T.find(se=>se.method==="credit"))==null?void 0:ne.amount)||0:Be)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ue,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:Te,className:"primary-button",disabled:f||w&&!Se,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Ms,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:ue,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},Pz=/^\+?[0-9\s\-().]{7,20}$/,GOe=/^[a-zA-Z\s'-]{2,}$/,CG=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[u,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState([]),[_,T]=v.useState(!0),C=Br();v.useEffect(()=>{C.state&&C.state.patient&&Ae(C.state.patient)},[C.state]);const[A,k]=v.useState([]),[P,I]=v.useState(""),[R,q]=v.useState(!1),[U,F]=v.useState("plan"),[B,V]=v.useState([]),[W,G]=v.useState([]),[z,Y]=v.useState(!1),[Q,K]=v.useState(""),[$,ie]=v.useState(!1),[xe,X]=v.useState(null),[Ie,$e]=v.useState(null);v.useEffect(()=>{Le(),Be()},[]);const Be=async()=>{try{const ae=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),ne=await le(`/api/patients?${ae.toString()}`);if(ne.ok){const se=await ne.json();w(se.patients||[])}}catch(ae){console.error("Error fetching recent patients",ae)}finally{T(!1)}},Le=async()=>{try{const ae=await le("/api/medical/procedures");if(ae.ok){const ne=await ae.json();G(ne)}}catch(ae){console.error("Error fetching procedures",ae)}};v.useEffect(()=>{(async()=>{if(!l){V([]),$e(null),I(""),k([]);return}try{const ne=await le(`/api/medical/patient/${l.id}`);if(ne.ok){const se=await ne.json();V(se);const je=new Date().toDateString(),Ee=se.find(J=>J.status==="draft"&&new Date(J.date||J.createdAt||Date.now()).toDateString()===je);Ee?($e(Ee.id),I(Ee.notes||""),k(Ee.selected_procedures.map(J=>({instanceId:crypto.randomUUID(),procedureId:J.id,name:J.name,price:J.cost,category:J.category})))):($e(null),I(""),k([]))}}catch(ne){console.error("Error fetching history",ne)}})()},[l]);const ce=v.useMemo(()=>$l(async ae=>{if(!ae.trim()||ae.length<2){i([]),o(!1);return}o(!0);try{const ne=await le(`/api/patients?search=${encodeURIComponent(ae)}&limit=10`);if(ne.ok){const se=await ne.json();i(se.patients||[])}}catch(ne){console.error("Search error:",ne)}finally{o(!1)}},300),[]);v.useEffect(()=>{ce(e)},[e,ce]);const Se=ae=>{const ne=ae.target.value;n(ne),g(Pz.test(ne)),b(GOe.test(ne)&&!Pz.test(ne))},Ve=async ae=>{if(!(!e||ae==="phone"&&!p||ae==="name"&&!x)){o(!0);try{const se=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ae==="name"?e:"direct medical",phone:ae==="phone"?e:null,age:null,gender:null,token:null})});if(se.ok){const je=await se.json();Ae({id:je.id,name:je.name,token:je.token??null,age:je.age??null,gender:je.gender??null,phone:je.phone})}else alert("Failed to create patient")}catch(ne){console.error("Error creating patient:",ne),alert("Error creating patient")}finally{o(!1)}}},Ae=ae=>{c(ae),n(""),i([])},ue=()=>{c(null),k([]),I("")},Te=async ae=>{if(!l)return;const ne=await le(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(ne.ok)await ne.json(),c(se=>se?{...se,...ae}:null);else throw new Error("Failed to update")},oe=ae=>{const ne={instanceId:crypto.randomUUID(),procedureId:ae.id,name:ae.name,price:ae.cost,category:ae.category};k(se=>[...se,ne])},be=ae=>{k(ne=>ne.filter(se=>se.instanceId!==ae))},_e=(ae,ne)=>{k(se=>se.map(je=>je.instanceId===ae?{...je,price:ne}:je))},Ne=ae=>{const ne=B.find(se=>se.id===ae);ne&&($e(ne.id),I(ne.notes||""),k(ne.selected_procedures.map(se=>({instanceId:crypto.randomUUID(),procedureId:se.id,name:se.name,price:se.cost,category:se.category}))),F("plan"))},ee=async(ae=!0)=>{var ne;if(l){q(!0);try{const se=A.map(J=>({id:J.procedureId,name:J.name,cost:J.price,category:J.category})),je={patientId:l.id,selectedProcedures:se,notes:P};let Ee;if(Ie?((ne=B.find(ye=>ye.id===Ie))==null?void 0:ne.status)==="draft"?Ee=await le(`/api/medical/${Ie}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}):Ee=await le("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}):Ee=await le("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}),Ee.ok){const J=await Ee.json();$e(J.id);const ye=await le(`/api/medical/patient/${l.id}`);if(ye.ok){const me=await ye.json();V(me)}ae?(X(J.id),ie(!0)):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save medical record.")}catch(se){console.error(se),alert("Error saving record.")}finally{q(!1)}}},ge=v.useMemo(()=>A.reduce((ae,ne)=>ae+ne.price,0),[A]),de=v.useMemo(()=>{const ae={};return W.filter(se=>se.name.toLowerCase().includes(Q.toLowerCase())||se.category.toLowerCase().includes(Q.toLowerCase())).forEach(se=>{const je=se.category||"general";ae[je]||(ae[je]=[]),ae[je].push(se)}),ae},[W,Q]);return r.jsxs("div",{className:"medical-page-container printable-section",children:[r.jsxs("header",{className:"medical-header no-print",children:[r.jsxs("div",{className:"medical-title-group",children:[r.jsx(Sf,{className:"medical-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"medical-title",children:"Medical Procedures"}),r.jsx("p",{className:"medical-subtitle",children:"Create medical procedure records and bills"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(Os,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:ue,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Rt,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(En,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"medical-search-input header-input",value:e,onChange:Se}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(ae=>r.jsxs("div",{onClick:()=>Ae(ae),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:ae.name}),r.jsxs("div",{className:"patient-meta",children:[ae.age," yrs / ",ae.gender,"  ",ae.phone]})]}),r.jsx(Yn,{size:16,color:"var(--mp-text-sec)"})]},ae.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--mp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>Ve(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"medical-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container no-print",children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--mp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"medical-search-input",value:e,onChange:Se}),s&&r.jsx("div",{className:"search-spinner"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(ae=>r.jsxs("div",{onClick:()=>Ae(ae),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:ae.name}),r.jsxs("div",{className:"patient-meta",children:[ae.age," yrs / ",ae.gender,"  ",ae.phone]})]}),r.jsx(Yn,{size:16,color:"var(--mp-text-sec)"})]},ae.id))})]}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown",style:{padding:"16px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--mp-text-sec)",marginBottom:"12px"},children:['No patients found for "',e,'"']}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[p&&r.jsxs("button",{type:"button",onClick:()=>Ve("phone"),className:"create-patient-btn",children:[r.jsx(Vn,{size:16})," Create patient with phone: ",e]}),x&&r.jsxs("button",{type:"button",onClick:()=>Ve("name"),className:"create-patient-btn",children:[r.jsx(Vn,{size:16})," Create patient: ",e]})]})]}),e.length<2&&r.jsxs("div",{className:"recent-patients-section",children:[r.jsx("h3",{children:"Recent Patients"}),_?r.jsx("div",{className:"recent-patients-list",children:[1,2,3].map(ae=>r.jsx("div",{className:"recent-patient-chip skeleton",children:r.jsx(te,{width:100,height:20})},ae))}):r.jsx("div",{className:"recent-patients-list",children:j.map(ae=>r.jsxs("button",{onClick:()=>Ae(ae),className:"recent-patient-chip",children:[r.jsx("span",{className:"chip-avatar",children:ae.name.charAt(0)}),r.jsx("span",{children:ae.name})]},ae.id))})]})]}),l&&r.jsx("div",{className:"medical-workspace no-print",children:r.jsxs("div",{className:"medical-grid",children:[r.jsxs("section",{className:"procedures-section no-print",children:[r.jsxs("div",{className:"medical-card procedures-container",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:"Available Procedures"}),r.jsx("button",{className:"manage-procedures-btn",onClick:()=>Y(!0),children:"Manage"})]}),r.jsx("div",{className:"procedure-search-bar",style:{padding:"0 16px 12px 16px"},children:r.jsxs("div",{className:"search-input-wrapper header-variant",style:{background:"var(--mp-bg-sec)"},children:[r.jsx(En,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search procedures...",className:"medical-search-input header-input",value:Q,onChange:ae=>K(ae.target.value),style:{background:"transparent"}}),Q&&r.jsx("button",{onClick:()=>K(""),className:"clear-search-btn",style:{border:"none",background:"transparent",cursor:"pointer",color:"var(--mp-text-sec)"},children:r.jsx(Rt,{size:14})})]})}),r.jsx("div",{className:"procedures-list",children:Object.entries(de).map(([ae,ne])=>r.jsxs("div",{className:"procedure-category-group",children:[r.jsx("h4",{className:"category-label",children:ae.replace("_"," ")}),ne.map(se=>r.jsxs("div",{onClick:()=>oe(se),className:"procedure-item",children:[r.jsx("span",{className:"proc-name",children:se.name}),r.jsxs("span",{className:"proc-cost",children:["",se.cost]})]},se.id))]},ae))})]}),r.jsxs("div",{className:"medical-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("span",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>ee(!1),disabled:R,children:[r.jsx(Bi,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:P,onChange:ae=>I(ae.target.value)})]})]}),r.jsx("section",{className:"plan-section no-print",children:r.jsxs("div",{className:"medical-card full-height",children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{className:U==="plan"?"active":"",onClick:()=>F("plan"),children:"Treatment Plan"}),r.jsx("button",{className:U==="history"?"active":"",onClick:()=>F("history"),children:"History"})]}),U==="plan"&&r.jsxs("div",{className:"treatment-plan-container",children:[r.jsx("div",{className:"treatment-plan-list",children:A.length===0?r.jsx("p",{className:"empty-plan-message no-print",children:"Click on procedures to add them to the treatment plan."}):A.map(ae=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",children:ae.name}),r.jsxs("div",{className:"plan-item-controls",children:[r.jsx("input",{type:"number",className:"cost-input",value:ae.price,onChange:ne=>_e(ae.instanceId,parseFloat(ne.target.value)||0)}),r.jsx("button",{className:"remove-proc-btn",onClick:()=>be(ae.instanceId),children:r.jsx(Wn,{size:14})})]})]},ae.instanceId))}),A.length>0&&r.jsxs("div",{className:"plan-total",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{className:"total-amount",children:["",ge.toFixed(2)]})]})]}),U==="history"&&r.jsx("div",{className:"history-list",children:B.length===0?r.jsx("p",{className:"empty-plan-message",children:"No previous records found."}):B.map(ae=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(ae.date||ae.createdAt||Date.now()).toLocaleDateString()}),r.jsx("span",{className:`record-status status-${ae.status}`,children:ae.status})]}),r.jsx("div",{className:"history-procedures",children:ae.selected_procedures.map((ne,se)=>r.jsx("span",{className:"history-proc-tag",children:ne.name},se))}),ae.notes&&r.jsxs("div",{className:"history-notes",children:[r.jsx("strong",{children:"Notes:"})," ",ae.notes.substring(0,100),"..."]}),r.jsxs("div",{className:"history-record-actions",children:[ae.status==="draft"&&r.jsxs("button",{className:"edit-record-btn",onClick:()=>Ne(ae.id),children:[r.jsx(Os,{size:14})," Edit"]}),ae.bill_id&&r.jsxs("button",{className:"view-bill-btn",onClick:()=>{X(ae.id),ie(!0)},children:[r.jsx(Xr,{size:14})," View Bill"]})]})]},ae.id))}),r.jsx("div",{className:"action-footer no-print",children:r.jsx("button",{className:"save-btn",onClick:()=>ee(!0),disabled:R||A.length===0,children:R?"Saving...":"Save & Bill"})})]})})]})}),u&&l&&r.jsx(pG,{patient:l,onClose:()=>f(!1),onSave:Te}),z&&r.jsx(IOe,{onClose:()=>Y(!1),onUpdate:Le}),$&&xe&&r.jsx(HOe,{isOpen:$,onClose:()=>ie(!1),recordId:xe,onBillingComplete:()=>{l&&le(`/api/medical/patient/${l.id}`).then(ae=>ae.json()).then(ae=>V(ae)).catch(console.error)}})]})},WOe=({isOpen:t,onClose:e,patientId:n,patientName:a,onRecordPayment:i})=>{const[s,o]=v.useState([]),[l,c]=v.useState(null),[u,f]=v.useState(null),[p,g]=v.useState(!1),x=v.useCallback(async()=>{if(!(!t||!n)){g(!0),f(null);try{const j=await le(`/api/patient-debts/${n}/transactions`);if(!j.ok)throw new Error(`Failed to fetch transactions: ${j.statusText}`);const _=(await j.json()).map(A=>({...A,debt_value:parseFloat(A.debt_value),amount_paid:parseFloat(A.amount_paid),balance_remaining:parseFloat(A.balance_remaining)}));o(_);const T=await le(`/api/patient-debts/${n}/balance`);if(!T.ok)throw new Error(`Failed to fetch balance: ${T.statusText}`);const C=await T.json();c({patientId:C.patientId,patientName:C.patientName,totalDebtValue:parseFloat(C.totalDebtValue),totalAmountPaid:parseFloat(C.totalAmountPaid),netDebt:parseFloat(C.netDebt)})}catch(j){console.error("Error fetching transactions/balance:",j),f(j.message||"Failed to load transactions or balance.")}finally{g(!1)}}},[t,n]);if(v.useEffect(()=>{t&&x()},[t,x]),!t)return null;const b=r.jsxs("div",{id:"debt-history-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #debt-history-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: flex-start !important; /* Start from top for long lists */
                        overflow-y: auto !important;
                    }
                    #debt-history-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                        margin: 0 !important;
                        padding: 20px !important;
                    }
                    /* Ensure visibility of children */
                    #debt-history-modal-root * { visibility: visible !important; }
                    
                    /* Hide non-print elements */
                    .modal-close-button,
                    .view-button,
                    .modal-actions {
                        display: none !important;
                    }
                    
                    .balance-summary {
                         page-break-inside: avoid;
                    }
                    
                    .debt-table {
                        width: 100% !important;
                    }
                    
                    /* Reset table colors for print */
                    .debt-table th {
                        background-color: #f3f4f6 !important;
                        color: black !important;
                        -webkit-print-color-adjust: exact;
                    }
                }
            `}),r.jsxs("div",{className:"modal-content large-modal printable-section",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border-color)",paddingBottom:"0.75rem",marginBottom:"1rem"},children:[r.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:700,color:"var(--text-color)"},children:["Debt History: ",a]}),r.jsxs("button",{onClick:()=>window.print(),className:"action-text-button view-button",style:{padding:"0.4rem 0.8rem"},title:"Print Ledger",children:[r.jsx(Nf,{size:14})," ",r.jsx("span",{style:{fontSize:"0.85rem"},children:"Print Ledger"})]})]}),u&&r.jsx("div",{className:"modal-error-message",children:u}),p&&r.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}),!p&&l&&r.jsxs("div",{className:"balance-summary",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem"},children:[r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",backgroundColor:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Debt"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["",l.totalDebtValue.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",backgroundColor:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Paid"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--success-color)"},children:["",l.totalAmountPaid.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--success-color)",backgroundColor:l.netDebt>0?"rgba(239, 68, 68, 0.05)":"rgba(16, 185, 129, 0.05)",borderColor:l.netDebt>0?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Net Outstanding"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:800,color:l.netDebt>0?"var(--danger-color)":"var(--success-color)"},children:["",l.netDebt.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsx("h4",{style:{fontSize:"1rem",marginTop:"1.25rem",marginBottom:"0.75rem"},children:"Transaction History"}),!p&&s.length===0?r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"No transactions recorded for this patient."}):r.jsx("div",{className:"table-responsive",style:{marginTop:"0"},children:r.jsxs("table",{className:"debt-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Debt Added"}),r.jsx("th",{children:"Payment"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:s.map(j=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",style:{whiteSpace:"nowrap"},children:new Date(j.transaction_date).toLocaleDateString()}),r.jsx("td",{"data-label":"Debt Added",className:j.debt_value>0?"debt-added":"",style:{fontWeight:500},children:j.debt_value>0?`+ ${j.debt_value.toLocaleString("en-IN",{minimumFractionDigits:2})}`:"-"}),r.jsx("td",{"data-label":"Payment",className:j.amount_paid>0?"payment-received":"",style:{fontWeight:500},children:j.amount_paid>0?`- ${j.amount_paid.toLocaleString("en-IN",{minimumFractionDigits:2})}`:"-"}),r.jsxs("td",{"data-label":"Balance",style:{fontWeight:600},children:["",j.balance_remaining.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsx("td",{"data-label":"Mode",children:j.payment_mode?j.payment_mode.charAt(0).toUpperCase()+j.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:j.notes||"",children:j.notes||"-"})]},j.id))})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>{i()},className:"button-submit",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Record Payment"}),r.jsx("button",{type:"button",onClick:e,className:"button-cancel",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Close"})]})]})]});return HD.createPortal(b,document.body)},YOe=({isOpen:t,onClose:e,patientId:n,patientName:a,currentDebt:i,onPaymentSuccess:s})=>{const[o,l]=v.useState(""),[c,u]=v.useState(""),[f,p]=v.useState(""),[g,x]=v.useState("cash"),[b,j]=v.useState(null),[w,_]=v.useState(!1);v.useEffect(()=>{t&&(l(new Date().toISOString().split("T")[0]),u(""),p(""),x("cash"),j(null),_(!1))},[t]);const T=async A=>{if(A.preventDefault(),j(null),!n)return;const k=parseFloat(c||"0");if(k<=0){j("Payment amount must be greater than 0");return}_(!0);try{const P=await le(`/api/patient-debts/${n}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:o,amount_paid:k,notes:f,payment_mode:g})});if(!P.ok){const I=await P.json();throw new Error(I.message||"Failed to add payment.")}s(),e(),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(P){console.error("Error adding payment:",P),j(P.message||"Failed to add payment.")}finally{_(!1)}};if(!t||!t)return null;const C=r.jsxs("div",{id:"add-payment-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                 /* Print styles for Add Payment Modal (if ever needed to print the form itself) */
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #add-payment-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: center !important;
                        justify-content: center !important;
                    }
                    #add-payment-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                    }
                    #add-payment-modal-root * { visibility: visible !important; }
                    .button-cancel, .button-submit, .modal-close-button { display: none !important; }
                }
            `}),r.jsxs("div",{className:"modal-content small-modal",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h3",{children:"Record Payment"}),r.jsxs("div",{className:"modal-header-subtitle",children:["Patient: ",a]})]}),r.jsxs("div",{className:"current-debt-info highlight-debt",children:[r.jsx("span",{children:"Outstanding Debt"}),r.jsxs("strong",{children:["",parseFloat(i).toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),b&&r.jsx("div",{className:"modal-error-message",children:b}),r.jsxs("form",{onSubmit:T,children:[r.jsxs("div",{className:"form-grid-2",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_date",children:"Date"}),r.jsx("input",{type:"date",id:"payment_date",value:o,onChange:A=>l(A.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_mode",children:"Mode"}),r.jsxs("select",{id:"payment_mode",value:g,onChange:A=>x(A.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid ()"}),r.jsx("input",{type:"number",id:"amount_paid",value:c,onChange:A=>u(A.target.value),step:"0.01",min:"0.01",className:"amount-input",placeholder:"0.00",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_notes",children:"Notes"}),r.jsx("textarea",{id:"payment_notes",value:f,onChange:A=>p(A.target.value),placeholder:"e.g., Partial payment via cash",className:"h-60"})]}),r.jsxs("div",{className:"modal-actions mt-0 pt-16",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",disabled:w,children:w?"Recording...":"Record Payment"})]})]})]})]});return HD.createPortal(C,document.body)},RN=()=>{const t=Lt(),e=hs(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(""),[f,p]=v.useState("debtHighToLow"),[g,x]=v.useState(!0),[b,j]=v.useState(""),[w,_]=v.useState(!1),[T,C]=v.useState(!1),[A,k]=v.useState(null),[P,I]=v.useState(0),R=v.useMemo(()=>{let z=[...n];g&&(z=z.filter(Q=>parseFloat(Q.netDebt)>0));const Y=parseFloat(b);switch(!isNaN(Y)&&Y>0&&(z=z.filter(Q=>parseFloat(Q.netDebt)>=Y)),f){case"name":z.sort((Q,K)=>Q.name.localeCompare(K.name));break;case"debtHighToLow":z.sort((Q,K)=>parseFloat(K.netDebt)-parseFloat(Q.netDebt));break;case"debtLowToHigh":z.sort((Q,K)=>parseFloat(Q.netDebt)-parseFloat(K.netDebt));break}return z},[n,g,b,f]),q=v.useCallback(async()=>{s(!0),l(null);try{const z=c?`/api/patient-debts?search=${encodeURIComponent(c)}`:"/api/patient-debts",Y=await le(z);if(!Y.ok)throw new Error(`Failed to fetch patients with debt: ${Y.statusText}`);const Q=await Y.json();a(Q);const K=Q.reduce(($,ie)=>$+parseFloat(ie.netDebt||"0"),0);I(K)}catch(z){console.error("Failed to fetch patients with debt:",z),l(z.message||"Failed to load patients with debt.")}finally{s(!1)}},[c]);v.useEffect(()=>{q()},[q]);const U=z=>{z&&(e.prefetchQuery({queryKey:Wt.patients.context(z),queryFn:async()=>{const Y=await le(`/api/patients/${z}/context`);if(!Y.ok)throw new Error("Failed to fetch patient context");return Y.json()},staleTime:1e3*60*5}),e.prefetchQuery({queryKey:Wt.patientDebts.balance(z),queryFn:async()=>{const Y=await le(`/api/patient-debts/${z}/balance`);if(!Y.ok)throw new Error("Failed to fetch patient debt");return Y.json()},staleTime:1e3*60}),e.prefetchQuery({queryKey:Wt.queue.latest(z),queryFn:async()=>{const Y=await le(`/api/queue/patient/${z}/latest`);if(!Y.ok){if(Y.status===404)return null;throw new Error("Failed to fetch queue status")}return Y.json()},staleTime:1e3*5}))},F=v.useCallback(()=>{q()},[q]),B=z=>{k(z),_(!0)},V=()=>{_(!1),k(null)},W=z=>{k(z),C(!0)},G=()=>{C(!1),k(null)};return i?r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(te,{width:80,height:36}),r.jsx(te,{width:200,height:32})]}),r.jsx(te,{width:250,height:36})]}),r.jsxs("div",{className:"filter-container",children:[r.jsx(te,{width:200,height:40}),r.jsx(te,{width:120,height:40}),r.jsx(te,{width:100,height:40}),r.jsx(te,{width:150,height:40})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Total Debt Value"}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6].map(z=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:32})})]},z))})]})})]}):r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(sn,{size:20})}),r.jsx("h2",{children:"Patient Debt Management"})]}),r.jsxs("div",{className:`total-debt-display ${P>0?"debt-positive":"debt-zero"}`,children:[r.jsx(ud,{size:20}),r.jsx("strong",{children:"Total Outstanding Debt:"})," ",P.toFixed(2)]})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("div",{className:"filter-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:c,onChange:z=>u(z.target.value),className:"filter-search-input"}),r.jsxs("select",{id:"sortBy",value:f,onChange:z=>p(z.target.value),className:"filter-select",title:"Sort by",children:[r.jsx("option",{value:"debtHighToLow",children:"Debt "}),r.jsx("option",{value:"debtLowToHigh",children:"Debt "}),r.jsx("option",{value:"name",children:"Name A-Z"})]}),r.jsx("input",{type:"number",id:"minDebt",value:b,onChange:z=>j(z.target.value),placeholder:"Min ",min:"0",className:"filter-number-input",title:"Minimum debt amount"}),r.jsxs("label",{className:"filter-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:z=>x(z.target.checked)}),"Outstanding only"]}),r.jsxs("span",{className:"filter-count",children:[R.length,"/",n.length]})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsxs("th",{children:[r.jsx(Yn,{size:14})," Patient Name"]}),r.jsxs("th",{children:[r.jsx(ag,{size:14})," Phone"]}),r.jsxs("th",{children:[r.jsx(gw,{size:14})," Total Debt Value"]}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{className:"actions-cell",children:"Actions"})]})}),r.jsx("tbody",{children:R.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"no-results-message",children:c?"No patients found matching your search.":"No patients with outstanding debt."})}):R.map(z=>r.jsxs("tr",{onClick:()=>t(`/dashboard/edit-complaint/patient/${z.id}`),onMouseEnter:()=>U(z.id),style:{cursor:"pointer"},title:"Click to view patient details",children:[r.jsx("td",{"data-label":"Patient Name",children:r.jsxs("div",{className:"patient-name-cell",children:[r.jsx("strong",{children:z.name}),z.age&&z.gender&&r.jsxs("span",{className:"patient-meta",children:[z.age,"y / ",z.gender]})]})}),r.jsx("td",{"data-label":"Phone",children:z.phone||"-"}),r.jsxs("td",{"data-label":"Total Debt Value",children:["",z.totalDebtValue]}),r.jsxs("td",{"data-label":"Total Paid",className:"amount-paid",children:["",z.totalAmountPaid]}),r.jsxs("td",{"data-label":"Net Debt",className:parseFloat(z.netDebt)>0?"debt-outstanding":"debt-clear",children:["",z.netDebt]}),r.jsx("td",{className:"actions-cell",onClick:Y=>Y.stopPropagation(),children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsxs("button",{onClick:()=>B(z),className:"action-text-button view-button",title:"View Transactions",children:[r.jsx(Fm,{size:16})," View History"]}),r.jsxs("button",{onClick:()=>W(z),className:"action-text-button add-payment-button",title:"Record Payment",children:[r.jsx(Ds,{size:16})," Record Payment"]})]})})]},z.id))})]})}),w&&A&&r.jsx(WOe,{isOpen:w,onClose:V,patientId:A.id,patientName:A.name,onRecordPayment:()=>{V(),C(!0)}}),T&&A&&r.jsx(YOe,{isOpen:T,onClose:G,patientId:A.id,patientName:A.name,currentDebt:A.netDebt,onPaymentSuccess:()=>{F(),_(!0)}})]})},TG=()=>{const t=Lt(),e=Br(),[n,a]=v.useState(""),[i,s]=v.useState([]),[o,l]=v.useState(!1),[c,u]=v.useState(null),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[w,_]=v.useState(!1),[T,C]=v.useState("idle"),[A,k]=v.useState(null),[P,I]=v.useState(""),R=v.useMemo(()=>$l(async ce=>{if(ce.trim().length<2){s([]),l(!1);return}l(!0);try{const Se=new URLSearchParams({search:encodeURIComponent(ce),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Ve=await le(`/api/patients?${Se.toString()}`);if(Ve.ok){const Ae=await Ve.json();s(Ae.patients||[])}}catch(Se){console.error("Search failed",Se)}finally{l(!1)}},300),[]),q=ce=>{const Se=ce.target.value;a(Se),Se.length>=2?(l(!0),R(Se)):(s([]),l(!1))},U=v.useCallback(async ce=>{_(!0);try{const Se=await le(`/api/patient-files/${ce}`);if(Se.ok){const Ve=await Se.json();x(Ve)}}catch(Se){console.error("Failed to fetch files",Se)}finally{_(!1)}},[]),F=ce=>{u({id:ce.id,name:ce.name,age:ce.age,gender:ce.gender,phone:ce.phone,token:ce.token}),a(""),I(""),s([]),k(null),C("idle"),p([]),U(ce.id)},B=()=>{u(null),p([]),x([]),C("idle")};Ce.useEffect(()=>{if(e.state&&e.state.patient){const ce=e.state.patient;F(ce)}},[e.state]);const V=ce=>{if(ce.target.files){const Se=Array.from(ce.target.files);p(Ve=>[...Ve,...Se]),C("idle")}},W=ce=>{p(Se=>Se.filter((Ve,Ae)=>Ae!==ce))},G=async ce=>{if(confirm("Are you sure you want to delete this file?"))try{(await le(`/api/patient-files/${ce}`,{method:"DELETE"})).ok?x(Ve=>Ve.filter(Ae=>Ae.id!==ce)):alert("Failed to delete file.")}catch(Se){console.error("Delete error",Se),alert("Error deleting file.")}},z=ce=>ce.startsWith("image/")?r.jsx(yw,{size:20}):ce==="application/pdf"?r.jsx(Xr,{size:20}):ce.startsWith("video/")?r.jsx(eq,{size:20}):ce.startsWith("audio/")?r.jsx(sq,{size:20}):r.jsx(Zh,{size:20}),Y=ce=>{if(ce===0)return"0 Bytes";const Se=1024,Ve=["Bytes","KB","MB","GB"],Ae=Math.floor(Math.log(ce)/Math.log(Se));return parseFloat((ce/Math.pow(Se,Ae)).toFixed(2))+" "+Ve[Ae]},Q=async()=>{if(!(!c||f.length===0)){j(!0),k(null),C("idle");try{const ce=new FormData;f.forEach(Ve=>{ce.append("files",Ve)});const Se=await le(`/api/patient-files/${c.id}`,{method:"POST",body:ce});if(Se.ok){C("success");const Ve=await Se.json();Ve.files&&x(Ae=>[...Ve.files,...Ae]),setTimeout(()=>{p([]),C("idle")},1500)}else throw new Error("Upload failed")}catch(ce){console.error("Upload error",ce),k("Failed to upload files. Please try again."),C("error")}finally{j(!1)}}},[K,$]=v.useState(null),[ie,xe]=v.useState(""),X=v.useRef(null),Ie=()=>{X.current&&(X.current.value="",X.current.click())},$e=ce=>{$(ce.id),xe(ce.original_name)},Be=()=>{$(null),xe("")},Le=async ce=>{if(ie.trim())try{(await le(`/api/patient-files/${ce}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:ie})})).ok?(x(Ve=>Ve.map(Ae=>Ae.id===ce?{...Ae,original_name:ie}:Ae)),$(null)):alert("Failed to rename file.")}catch(Se){console.error("Rename error",Se),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(sn,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Patient Files"})]})}),c?r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"selected-patient-header",children:[r.jsx("div",{className:"patient-avatar",children:c.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"selected-patient-info",children:[r.jsx("h2",{className:"selected-patient-name",children:c.name}),r.jsxs("div",{className:"selected-patient-details",children:[r.jsxs("span",{children:["Token: #",c.token||"NA"]}),c.gender&&r.jsxs("span",{children:[" ",c.gender]}),c.age&&r.jsxs("span",{children:[" ",c.age," yrs"]}),c.phone&&r.jsxs("span",{children:[" ",c.phone]})]}),r.jsx("input",{ref:X,type:"file",multiple:!0,onChange:V,style:{display:"none"}})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Ie,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx(Ov,{size:18}),r.jsx("span",{children:"Upload"})]}),r.jsx("button",{onClick:B,className:"secondary-btn change-patient-btn",children:"Change Patient"})]})]}),(g.length>0||w)&&r.jsxs("div",{className:"existing-files-section mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(Zh,{className:"text-indigo-500",size:20}),"Uploaded Files (",g.length,")"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(En,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search in Drive...",value:P,onChange:ce=>I(ce.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),w?r.jsx("div",{className:"flex justify-center p-8",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(te,{width:300,height:20}),r.jsx(te,{width:300,height:20}),r.jsx(te,{width:300,height:20})]})}):r.jsxs("div",{className:"file-grid",children:[g.filter(ce=>ce.original_name.toLowerCase().includes(P.toLowerCase())).map(ce=>{const Se=ce.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[Se?r.jsx("img",{src:ce.url,alt:ce.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:z(ce.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:ce.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-text-btn download",title:"Download",children:"Download"}),r.jsx("button",{onClick:()=>$e(ce),className:"action-text-btn rename",title:"Rename",children:"Rename"}),r.jsx("button",{onClick:()=>G(ce.id),className:"action-text-btn delete",title:"Delete",children:"Delete"})]})]}),r.jsx("div",{className:"file-card-meta",children:K===ce.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:ie,onChange:Ve=>xe(Ve.target.value),className:"rename-input",autoFocus:!0,onKeyDown:Ve=>{Ve.key==="Enter"&&Le(ce.id),Ve.key==="Escape"&&Be()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>Le(ce.id),className:"icon-btn text-green-600",children:r.jsx(Ms,{size:14})}),r.jsx("button",{onClick:Be,className:"icon-btn text-red-500",children:r.jsx(Rt,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:Se?r.jsx(yw,{size:16,className:"text-purple-500"}):z(ce.mime_type)}),r.jsx("a",{href:ce.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:ce.original_name,children:ce.original_name})]})})]},ce.id)}),g.filter(ce=>ce.original_name.toLowerCase().includes(P.toLowerCase())).length===0&&P&&r.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(En,{size:48,className:"text-slate-200"}),r.jsxs("p",{children:['No files found matching "',P,'"']})]})})]})]}),(f.length>0||T==="success"||A)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:f.length>0?"Pending Uploads":"Upload Status"}),A&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(Fr,{size:20}),A]}),T==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Ms,{size:20}),"Files uploaded successfully!"]}),f.length>0&&r.jsx("div",{className:"file-list",children:f.map((ce,Se)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(Zh,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:ce.name,children:ce.name}),r.jsx("div",{className:"file-size",children:Y(ce.size)})]}),r.jsx("button",{onClick:()=>W(Se),className:"remove-file-btn",title:"Remove file",children:r.jsx(Rt,{size:16})})]},Se))}),f.length>0&&r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{onClick:()=>p([]),className:"secondary-btn",disabled:b,children:"Clear"}),r.jsx("button",{onClick:Q,className:"primary-btn",disabled:b,children:b?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx(Ov,{size:18}),"Upload ",f.length," File",f.length!==1?"s":""]})})]})]})]}):r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-slate-700",children:[r.jsx(En,{className:"text-indigo-500"}),"Search Patient"]}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{className:"search-icon-files",size:20}),r.jsx("input",{type:"text",placeholder:"Enter patient name, phone, or token...",value:n,onChange:q,className:"search-input",autoFocus:!0})]}),o?r.jsx("div",{className:"patient-results-list",children:[1,2,3].map(ce=>r.jsxs("div",{className:"patient-result-item",style:{cursor:"default"},children:[r.jsx(te,{width:150,height:20}),r.jsx(te,{width:100,height:16})]},ce))}):i.length>0&&r.jsx("ul",{className:"patient-results-list",children:i.map(ce=>r.jsxs("li",{className:"patient-result-item",onClick:()=>F(ce),children:[r.jsxs("div",{children:[r.jsx("div",{className:"patient-name-text",children:ce.name}),r.jsxs("div",{className:"patient-meta",children:[r.jsxs("span",{children:["#",ce.token||"N/A"]}),ce.gender&&r.jsx("span",{children:ce.gender}),ce.age&&r.jsxs("span",{children:[ce.age," yrs"]})]})]}),r.jsx("div",{className:"patient-phone",children:ce.phone})]},ce.id))}),n.length>=2&&!o&&i.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"30px",color:"#94a3b8"},children:['No patients found matching "',n,'"']})]})]})},BM=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(!0),[u,f]=v.useState("idle"),[p,g]=v.useState(null),[x,b]=v.useState(""),j=v.useCallback(async()=>{c(!0);try{const G=await le("/api/clinic-files");if(G.ok){const z=await G.json();n(z)}}catch(G){console.error("Failed to fetch clinic files",G)}finally{c(!1)}},[]);v.useEffect(()=>{j()},[j]);const w=G=>{if(G.target.files){const z=Array.from(G.target.files);i(Y=>[...Y,...z]),f("idle")}},_=G=>{i(z=>z.filter((Y,Q)=>Q!==G))},T=async G=>{if(confirm("Are you sure you want to delete this file?"))try{(await le(`/api/clinic-files/${G}`,{method:"DELETE"})).ok?n(Y=>Y.filter(Q=>Q.id!==G)):alert("Failed to delete file.")}catch(z){console.error("Delete error",z),alert("Error deleting file.")}},C=G=>G.startsWith("image/")?r.jsx(yw,{size:20}):G==="application/pdf"?r.jsx(Xr,{size:20}):G.startsWith("video/")?r.jsx(eq,{size:20}):G.startsWith("audio/")?r.jsx(sq,{size:20}):r.jsx(Zh,{size:20}),A=G=>{if(G===0)return"0 Bytes";const z=1024,Y=["Bytes","KB","MB","GB"],Q=Math.floor(Math.log(G)/Math.log(z));return parseFloat((G/Math.pow(z,Q)).toFixed(2))+" "+Y[Q]},k=async()=>{if(a.length!==0){o(!0),g(null),f("idle");try{const G=new FormData;a.forEach(Y=>{G.append("files",Y)});const z=await le("/api/clinic-files",{method:"POST",body:G});if(z.ok){f("success");const Y=await z.json();Y.files&&n(Q=>[...Y.files,...Q]),setTimeout(()=>{i([]),f("idle")},1500)}else throw new Error("Upload failed")}catch(G){console.error("Upload error",G),g("Failed to upload files. Please try again."),f("error")}finally{o(!1)}}},[P,I]=v.useState(null),[R,q]=v.useState(""),U=v.useRef(null),F=()=>{U.current&&(U.current.value="",U.current.click())},B=G=>{I(G.id),q(G.original_name)},V=()=>{I(null),q("")},W=async G=>{if(R.trim())try{(await le(`/api/clinic-files/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:R})})).ok?(n(Y=>Y.map(Q=>Q.id===G?{...Q,original_name:R}:Q)),I(null)):alert("Failed to rename file.")}catch(z){console.error("Rename error",z),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(sn,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Clinic Files"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:U,type:"file",multiple:!0,onChange:w,style:{display:"none"}}),r.jsxs("button",{onClick:F,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx(Ov,{size:18}),r.jsx("span",{children:"Upload Files"})]})]})]})}),r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(Zh,{className:"text-indigo-500",size:20}),"Clinic Drive (",e.length," files)"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(En,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search files...",value:x,onChange:G=>b(G.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),l?r.jsx("div",{className:"file-grid",children:[1,2,3,4].map(G=>r.jsxs("div",{className:"file-card-item",children:[r.jsx(te,{height:150}),r.jsx("div",{className:"p-3",children:r.jsx(te,{height:20,width:"80%"})})]},G))}):r.jsxs("div",{className:"file-grid",children:[e.filter(G=>G.original_name.toLowerCase().includes(x.toLowerCase())).map(G=>{const z=G.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[z?r.jsx("img",{src:G.url,alt:G.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:C(G.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:G.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-text-btn download",title:"Download",children:"Download"}),r.jsx("button",{onClick:()=>B(G),className:"action-text-btn rename",title:"Rename",children:"Rename"}),r.jsx("button",{onClick:()=>T(G.id),className:"action-text-btn delete",title:"Delete",children:"Delete"})]})]}),r.jsx("div",{className:"file-card-meta",children:P===G.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:R,onChange:Y=>q(Y.target.value),className:"rename-input",autoFocus:!0,onKeyDown:Y=>{Y.key==="Enter"&&W(G.id),Y.key==="Escape"&&V()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>W(G.id),className:"icon-btn text-green-600",children:r.jsx(Ms,{size:14})}),r.jsx("button",{onClick:V,className:"icon-btn text-red-500",children:r.jsx(Rt,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:z?r.jsx(yw,{size:16,className:"text-purple-500"}):C(G.mime_type)}),r.jsx("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:G.original_name,children:G.original_name})]})})]},G.id)}),e.filter(G=>G.original_name.toLowerCase().includes(x.toLowerCase())).length===0&&!l&&r.jsx("div",{className:"col-span-full text-center py-20 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(Zh,{size:48,className:"text-slate-200"}),r.jsx("p",{children:x?`No files found matching "${x}"`:"This clinic's drive is empty. Upload some files!"})]})})]}),(a.length>0||u==="success"||p)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:a.length>0?"Pending Uploads":"Upload Status"}),p&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(Fr,{size:20}),p]}),u==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Ms,{size:20}),"Files uploaded successfully!"]}),a.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"file-list max-h-60 overflow-y-auto mb-6",children:a.map((G,z)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(Zh,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:G.name,children:G.name}),r.jsx("div",{className:"file-size",children:A(G.size)})]}),r.jsx("button",{onClick:()=>_(z),className:"remove-file-btn",title:"Remove file",children:r.jsx(Rt,{size:16})})]},z))}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>i([]),className:"secondary-btn",disabled:s,children:"Clear All"}),r.jsx("button",{onClick:k,className:"primary-btn",disabled:s,children:s?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx(Ov,{size:18}),"Upload ",a.length," File",a.length!==1?"s":""]})})]})]})]})]})]})},uw=()=>{const t=Lt(),e=Br(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState([]),[c,u]=v.useState(""),[f,p]=v.useState([]),[g,x]=v.useState(null),[b,j]=v.useState(!1),[w,_]=v.useState(null),[T,C]=v.useState(!0),[A,k]=v.useState(""),[P,I]=v.useState([]),[R,q]=v.useState(!1),[U,F]=v.useState(null),[B,V]=v.useState(!1),[W,G]=v.useState(!1),[z,Y]=v.useState([]),[Q,K]=v.useState(!1),[$,ie]=v.useState(null),xe=/^\+?[0-9\s\-().]{7,20}$/,X=/^[a-zA-Z\s'-]{2,}$/,Ie=v.useCallback(async()=>{try{const ne=await le("/api/drugs");if(!ne.ok)throw new Error("Failed to fetch drugs");const se=await ne.json(),je=se.drugs||se||[];s(je)}catch(ne){console.error("Failed to fetch available drugs:",ne),x("Could not load drug list. "+ne.message)}},[]),$e=v.useCallback(async ne=>{K(!0),ie(null);try{const se=await le(`/api/pharmacy-orders/patient/${ne}`);if(!se.ok){const Ee=await se.json().catch(()=>({}));throw new Error(Ee.message||`HTTP error! status: ${se.status}`)}const je=await se.json();Y(je||[])}catch(se){console.error("Failed to fetch previous pharmacy orders:",se),ie(`Could not load previous orders: ${se.message}`)}finally{K(!1)}},[]);v.useEffect(()=>{var ne;Ie(),(ne=e.state)!=null&&ne.patient?Se(e.state.patient):C(!0)},[Ie,e.state]),v.useEffect(()=>{n!=null&&n.id?$e(n.id):Y([])},[n,$e]);const Be=v.useMemo(()=>new uo(i,{keys:["name","brand_name"],threshold:.3}),[i]);v.useEffect(()=>{if(!c){p([]);return}const ne=Be.search(c).map(se=>se.item);p(ne.slice(0,10))},[c,Be]);const Le=v.useMemo(()=>$l(async ne=>{if(ne.trim().length<2){I([]),q(!1),F(null);return}q(!0),F(null);try{const se=new URLSearchParams({search:encodeURIComponent(ne),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),je=await le(`/api/patients?${se.toString()}`);if(!je.ok){const J=await je.text();throw new Error(`API Error (${je.status}): ${J||je.statusText}`)}const Ee=await je.json();I(Ee.patients)}catch(se){console.error("Error searching patients:",se),F(se.message||"Failed to search patients."),I([])}finally{q(!1)}},300),[xe]),ce=ne=>{const se=ne.target.value;k(se),V(xe.test(se)),G(X.test(se)&&!xe.test(se)),q(!0),Le(se)},Se=v.useCallback(ne=>{a(ne),C(!1),k(""),I([]),F(null)},[]),Ve=v.useCallback(async ne=>{if(!A||ne==="phone"&&!B||ne==="name"&&!W){F(`Invalid ${ne} to create a new patient.`);return}q(!0),F(null);try{const je=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ne==="name"?A:"direct pharmacy",phone:ne==="phone"?A:null,age:null,gender:null,token:null})});if(!je.ok){const J=await je.json();throw new Error(J.message||`Failed to create patient: ${je.statusText}`)}const Ee=await je.json();alert(`New patient "${Ee.name}" created with ${ne==="phone"?`phone ${Ee.phone}`:`name ${Ee.name}`}.`),Se(Ee)}catch(se){console.error("Error creating new patient:",se),F(se.message||"Failed to create new patient.")}finally{q(!1)}},[A,B,W,Se]),Ae=()=>{a(null),C(!0),l([]),x(null),Y([])},ue=ne=>{if(o.some(se=>se.drug_id===ne.id)){const se=ne.name||ne.brand_name||"This drug";x(`${se} is already in the order.`),setTimeout(()=>x(null),3e3),u(""),p([]);return}l(se=>[...se,{drug_id:ne.id,name:ne.name||ne.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,mrp:Number(ne.mrp)||0,originalMrp:Number(ne.mrp)||0,stock:ne.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(ne.mrp)||0)/(oe(ne.pack)||1),pack:ne.pack}]),u(""),p([])},Te=()=>{const ne=c.trim();if(!ne){x("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>x(null),3e3);return}t("/dashboard/inventory/add",{state:{initialDrugName:ne}}),u(""),p([])},oe=ne=>{if(!ne)return null;const se=ne.match(/(?:\d+x)?(\d+)/);return se?parseInt(se[1],10):null},be=ne=>{l(se=>se.filter(je=>(je.drug_id??je.name)!==ne))},_e=(ne,se)=>{l(je=>je.map(Ee=>{if((Ee.drug_id??Ee.name)===ne&&Ee.isLoose){const ye=oe(Ee.pack),me=Math.max(0,se),he=me*(ye??1)+(Ee.looseUnits??0);return{...Ee,loosePacks:me,looseQuantity:he,pack_quantity:me}}return Ee}))},Ne=(ne,se)=>{l(je=>je.map(Ee=>{if((Ee.drug_id??Ee.name)===ne&&Ee.isLoose){const ye=oe(Ee.pack),me=Math.max(0,se),he=(Ee.loosePacks??0)*(ye??1)+me;return{...Ee,looseUnits:me,looseQuantity:he}}return Ee}))},ee=ne=>{const se=[];ne.medications.forEach(je=>{if(o.find(J=>J.drug_id&&je.drug_id&&J.drug_id===je.drug_id||J.name.toLowerCase()===je.name.toLowerCase()))l(J=>J.map(ye=>{if(ye.drug_id&&je.drug_id&&ye.drug_id===je.drug_id||ye.name.toLowerCase()===je.name.toLowerCase()){const me=(ye.pack_quantity??0)+(je.pack_quantity??0),he=(ye.loose_quantity??0)+(je.loose_quantity??0),De=je.tabletsPerDay??ye.tabletsPerDay,nt=je.numberOfDays??ye.numberOfDays,Fe=oe(ye.pack),Ge=me*(Fe??1)+he;return{...ye,pack_quantity:me,loose_quantity:he,directions_to_use:je.directions_to_use??ye.directions_to_use,tabletsPerDay:De,numberOfDays:nt,looseQuantity:Ge,loosePacks:Math.floor(Ge/(Fe??1)),looseUnits:Ge%(Fe??1)}}return ye}));else{let J=je.drug_id,ye=je.drug_id?i.find(me=>me.id===je.drug_id):void 0;if(!J&&je.name){const me=i.find(he=>he.name&&he.name.toLowerCase()===je.name.toLowerCase());me&&(J=me.id,ye=me)}se.push({drug_id:J,name:je.name,pack_quantity:je.pack_quantity??0,loose_quantity:je.loose_quantity??0,directions_to_use:je.directions_to_use,tabletsPerDay:je.tabletsPerDay??1,numberOfDays:je.numberOfDays??1,mrp:ye?ye.mrp:je.pack_price,originalMrp:ye?ye.mrp:je.pack_price,stock:ye?ye.stock:je.stock,isLoose:!0,loosePacks:0,looseUnits:(je.pack_quantity??0)*(oe((ye==null?void 0:ye.pack)||je.pack)??1)+(je.loose_quantity??0),looseQuantity:(je.pack_quantity??0)*(oe((ye==null?void 0:ye.pack)||je.pack)??1)+(je.loose_quantity??0),pricePerLooseUnit:(ye?Number(ye.mrp):Number(je.pack_price)||0)/(oe((ye==null?void 0:ye.pack)||je.pack)||1),pack:(ye==null?void 0:ye.pack)||je.pack})}}),l(je=>[...je,...se]),ne.prescriptionForUnavailableDrugs&&(!w||!w.includes(ne.prescriptionForUnavailableDrugs))&&_(je=>je?`${je}

-- From Order ${ne.id.substring(0,8)} --
${ne.prescriptionForUnavailableDrugs}`:ne.prescriptionForUnavailableDrugs),x("Medications from previous order added to current order."),setTimeout(()=>x(null),3e3)},ge=async ne=>{if(ne.preventDefault(),x(null),j(!0),!n){x("No patient selected for the order."),j(!1);return}if(o.length===0&&!(w!=null&&w.trim())){x("Please add at least one medication or provide a prescription for unavailable drugs."),j(!1);return}const se=o.filter(Ee=>{const J=Ee.looseQuantity??0;return J<=0||Ee.stock!==void 0&&J>Ee.stock});if(se.length>0){x(`Invalid quantity or insufficient stock for: ${se.map(Ee=>Ee.name).join(", ")}`),j(!1);return}const je={patient_id:n.id,items:o.map(Ee=>{const J=Ee.mrp??0,ye=Ee.pricePerLooseUnit??0,me=ye*(Ee.looseQuantity??0);return{drug_id:Ee.drug_id===void 0?null:Ee.drug_id,name:Ee.name,pack_quantity:Ee.loosePacks??0,loose_quantity:Ee.looseUnits??0,pack_price:J,loose_price:ye,total_price:me,price:Ee.originalMrp??0,directions_to_use:Ee.directions_to_use===void 0?null:Ee.directions_to_use,tabletsPerDay:Ee.tabletsPerDay??1,numberOfDays:Ee.numberOfDays??1}}),order_total:de,prescription_for_unavailable_drugs:w};try{const Ee=await le("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!Ee.ok){const J=await Ee.json();throw new Error(J.message||`Failed to create order: ${Ee.statusText}`)}t(-1)}catch(Ee){console.error("Failed to create pharmacy order:",Ee),x(Ee.message||"Failed to create order. Please try again.")}finally{j(!1)}},de=v.useMemo(()=>o.reduce((ne,se)=>{const je=se.isLoose?se.pricePerLooseUnit??0:se.mrp??0,Ee=se.isLoose?se.looseQuantity??0:se.quantity??0;return ne+je*Ee},0),[o]),ae=(Number(de)||0).toFixed(2);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(sn,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),T&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:A,onChange:ce,className:"custom-text-input mt-1",autoFocus:!0})]}),U&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:U})," ",R?r.jsx("div",{className:"patient-search-results items-loading mt-1",children:[1,2,3].map(ne=>r.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(te,{width:40,height:20}),r.jsx(te,{width:120,height:20})]}),r.jsx("div",{className:"mt-1 sm:mt-0",children:r.jsx(te,{width:150,height:16})})]})},ne))}):P.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",P.map(ne=>r.jsxs("li",{onClick:()=>Se({id:ne.id,name:ne.name,token:ne.token,age:ne.age,gender:ne.gender,phone:ne.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",ne.token]}),ne.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[ne.age?`${ne.age} yrs`:"Age N/A",ne.gender?` / ${ne.gender}`:" / Gender N/A",ne.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",ne.phone]})]})]}),ne.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",ne.phone]})]},ne.id))]})]}),A.length>=2&&!R&&P.length===0&&!U&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',A,'".']}),B&&r.jsx("button",{type:"button",onClick:()=>Ve("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:R,children:'Create "direct pharmacy" Patient with this Phone'}),W&&r.jsx("button",{type:"button",onClick:()=>Ve("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:R,children:"Create Patient with this Name"})]}),A.length<2&&!R&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),n&&!T&&r.jsxs("form",{onSubmit:ge,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:n.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:n.token??"N/A"}),n.age&&`    Age: ${n.age}`,n.gender&&`    Gender: ${n.gender}`,n.phone&&`    Phone: ${n.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${n.id}`,children:["ID: ",n.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:Ae,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),g&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:g})," ",Q?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:[1,2].map(ne=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx(te,{width:180,height:20}),r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx(te,{width:"90%",height:16}),r.jsx(te,{width:"70%",height:16})]}),r.jsx(te,{width:"100%",height:36,style:{borderRadius:"6px"}})]},ne))})]}):$?r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:$}):z.length>0?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:z.map(ne=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(ne.date).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ne.status==="dispensed"?"bg-green-100 text-green-800":ne.status==="pending"?"bg-yellow-100 text-yellow-800":ne.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:ne.status.charAt(0).toUpperCase()+ne.status.slice(1)})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:ne.medications.map((se,je)=>r.jsxs("li",{children:[r.jsx("strong",{children:se.name}),": ",se.quantity," Qty",se.directions_to_use&&` - Directions: ${se.directions_to_use}`]},je))}),ne.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),r.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",r.jsx(fd,{remarkPlugins:[pd],children:ne.prescriptionForUnavailableDrugs})]})]}),r.jsxs("button",{type:"button",onClick:()=>ee(ne),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[r.jsx(Vn,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},ne.id))})]}):n&&r.jsx("div",{className:"content-section text-center py-4 mt-4",children:r.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:w??"",onChange:ne=>_(ne.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:c,onChange:ne=>u(ne.target.value),className:"custom-text-input mt-1"}),c&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",f.length>0&&r.jsxs("ul",{children:[" ",f.map(ne=>r.jsxs("li",{onClick:()=>ue(ne),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:ne.name||ne.brand_name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",ne.stock??"N/A",", MRP: ",Number(ne.mrp||0).toFixed(2),")"]})]},ne.id))]}),c.trim()&&!i.some(ne=>ne.name&&ne.name.toLowerCase()===c.trim().toLowerCase()||ne.brand_name&&ne.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsxs("div",{onClick:Te,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',c.trim(),'" as new item']}),c.trim()&&f.length===0&&i.some(ne=>ne.name&&ne.name.toLowerCase()===c.trim().toLowerCase()||ne.brand_name&&ne.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",o.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),o.length>0&&r.jsx("ul",{className:"space-y-4",children:o.map(ne=>{const se=ne.drug_id??ne.name,je=!ne.drug_id;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${je?"custom":""}`,children:[" ",ne.name,je?" (custom)":""]}),!je&&ne.pricePerLooseUnit!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(ne.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),ne.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${ne.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",ne.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-packs-${se}`,className:"dosage-label",children:"Packs:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>_e(se,(ne.loosePacks??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-packs-${se}`,min:"0",value:ne.loosePacks||"",onChange:Ee=>{const J=parseInt(Ee.target.value,10);_e(se,isNaN(J)?0:J)},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>_e(se,(ne.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-units-${se}`,className:"dosage-label",children:"Loose:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>Ne(se,(ne.looseUnits??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-units-${se}`,min:"0",value:ne.looseUnits||"",onChange:Ee=>{const J=parseInt(Ee.target.value,10);Ne(se,isNaN(J)?0:J)},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>Ne(se,(ne.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),ne.pack&&r.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",ne.pack.split("x")[1]||ne.pack," per pack)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((ne.pricePerLooseUnit??0)*(ne.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>be(se),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(Wn,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-per-day-${se}`,className:"dosage-label",children:"Per Day:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(J=>J.drug_id===se?{...J,tabletsPerDay:Math.max(1,(J.tabletsPerDay??1)-1)}:J)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`tablets-per-day-${se}`,min:"1",value:ne.tabletsPerDay??1,onChange:Ee=>{const J=parseInt(Ee.target.value,10);l(ye=>ye.map(me=>me.drug_id===se?{...me,tabletsPerDay:isNaN(J)?1:Math.max(1,J)}:me))},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(J=>J.drug_id===se?{...J,tabletsPerDay:(J.tabletsPerDay??1)+1}:J)),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`number-of-days-${se}`,className:"dosage-label",children:"No. Days:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(J=>J.drug_id===se?{...J,numberOfDays:Math.max(1,(J.numberOfDays??1)-1)}:J)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`number-of-days-${se}`,min:"1",value:ne.numberOfDays??1,onChange:Ee=>{const J=parseInt(Ee.target.value,10);l(ye=>ye.map(me=>me.drug_id===se?{...me,numberOfDays:isNaN(J)?1:Math.max(1,J)}:me))},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(J=>J.drug_id===se?{...J,numberOfDays:(J.numberOfDays??1)+1}:J)),className:"quantity-btn",children:"+"})]})]})]}),r.jsx("div",{className:"flex items-center mt-2",children:ne.pack&&oe(ne.pack)&&r.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const Ee=oe(ne.pack),J=ne.looseQuantity??0;if(Ee&&Ee>0){const ye=Math.floor(J/Ee),me=J%Ee;return`(Subtract: ${ye} packs, ${me} loose)`}return""})()})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${se}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${se}`,placeholder:"e.g., 'After food', 'Twice a day'",value:ne.directions_to_use??"",onChange:Ee=>{const J=Ee.target.value;l(ye=>ye.map(me=>(me.drug_id??me.name)===se?{...me,directions_to_use:J}:me))},className:"dosage-input text-sm w-full mt-1"})]})]},se)})})]}),o.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",ae]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:b||o.length===0&&!(w!=null&&w.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${b||o.length===0&&!(w!=null&&w.trim())?"":"hover:opacity-90"}`,children:b?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},KOe=()=>{const t=v.useRef(null),e=v.useRef(null),[n,a]=v.useState(!1),[i,s]=v.useState(0),[o,l]=v.useState(!1),[c,u]=v.useState(!1),[f,p]=v.useState(null),g=30,x=100,b=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:!0});t.current&&(t.current.srcObject=_,u(!0),p(null))}catch(_){console.error("Error accessing camera:",_),p("Camera access denied. Please allow camera permissions to use motion detection."),u(!1)}},j=()=>{var T;const _=(T=t.current)==null?void 0:T.srcObject;_&&_.getTracks().forEach(C=>C.stop()),u(!1)};v.useEffect(()=>(b(),()=>j()),[]),v.useEffect(()=>{if(!c)return;let _;const T=e.current,C=t.current;if(!T||!C)return;const A=T.getContext("2d",{willReadFrequently:!0});if(!A)return;const k=320,P=240;T.width=k,T.height=P;let I=null;const R=()=>{if(C.readyState===C.HAVE_ENOUGH_DATA){A.drawImage(C,0,0,k,P);const U=A.getImageData(0,0,k,P).data;if(I){let F=0;for(let B=0;B<U.length;B+=4*4){const V=Math.abs(U[B]-I[B]),W=Math.abs(U[B+1]-I[B+1]),G=Math.abs(U[B+2]-I[B+2]);V+W+G>g&&F++}if(F>x){const B=Date.now();s(B),a(!0),o||l(!0)}else a(!1)}I=U}_=requestAnimationFrame(R)};return R(),()=>{cancelAnimationFrame(_)}},[c,o]);const w=()=>{l(!1)};return r.jsxs("div",{className:"motion-detect-container",style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{className:"status-header bg-white p-4 rounded-lg shadow-sm flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${c?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.jsx(NE,{size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Motion Detection Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:c?"Camera Active - Monitoring":"Camera Inactive"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${n?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(_c,{size:16}),r.jsx("span",{className:"font-medium",children:n?"Motion Detected!":"No Motion"})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${o?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(_E,{size:16}),r.jsx("span",{className:"font-medium",children:o?"AI Assistant Active":"AI Assistant Idle"})]})]})]}),f&&r.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:f}),r.jsxs("div",{className:"video-feed-container bg-black rounded-lg overflow-hidden relative shadow-lg",style:{maxWidth:"640px",margin:"0 auto"},children:[r.jsx("video",{ref:t,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",display:c?"block":"none"}}),r.jsx("canvas",{ref:e,style:{display:"none"}}),!c&&!f&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:r.jsxs("div",{className:"text-center",children:[r.jsx(NE,{size:48,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Connecting to camera..."})]})})]}),o&&r.jsx(sS,{onClose:w,patientData:null,tokenNumber:null,onAiSummaryChange:()=>{},lastMotionTimestamp:i,backgroundMode:!0})]})},QOe=async()=>{const t=await le("/api/staff");if(!t.ok)throw new Error("Failed to fetch staff");const e=await t.json();return e.staff||e||[]};function XOe(){return FN({queryKey:[...Wt.staff.list,"doctors"],queryFn:QOe,staleTime:5*60*1e3,select:t=>t.filter(e=>e.role==="doctor"||e.role==="admin")})}const UA=({currentUser:t})=>{const[e,n]=v.useState("queue"),[a,i]=v.useState(""),[s,o]=v.useState(new Date),l=s.toISOString().split("T")[0],[c,u]=v.useState(!1),[f,p]=v.useState("list"),{data:g,isLoading:x,refetch:b}=dG(l),j=(g==null?void 0:g.list)||[],{data:w=[],isLoading:_}=XOe(),T=POe(),C=hs(),[A,k]=v.useState(null),[P,I]=v.useState(null),R=Lt(),q=Br(),U=()=>{b()};v.useEffect(()=>{const ie=new URLSearchParams(q.search).get("tab");ie&&z.find(X=>X.id===ie)&&n(ie)},[q.search]),v.useEffect(()=>{e==="queue"&&b()},[e,b]);const F=v.useCallback(async($,ie)=>{if(console.log(`Attempting to assign doctor ${ie} to queue ${$}`),I(null),k(null),!ie){console.log("No doctor ID provided, skipping assignment.");return}const xe=j.find($e=>$e.id===$);if(!xe){console.error(`Queue entry ${$} not found in local state.`),I("Queue entry not found.");return}if(xe.doctor_id===ie){console.log(`Queue ${$} already assigned to doctor ${ie}. Skipping.`);return}const X=async $e=>{if(!$e||!$e.id||!$e.name){I("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",$e);return}const Be=async()=>{try{await T.mutateAsync({queueId:$,status:"waiting",doctorId:ie});const Le=w.find(ce=>ce.id===ie);return console.log(`Successfully assigned doctor ${Le==null?void 0:Le.name} to queue ${$}.`),!0}catch(Le){return console.error(`Error assigning doctor for queue ${$}:`,Le),I(`Failed to assign doctor: ${Le.message}`),!1}};$e.subscription_status==="active"?(console.log(`Patient ${$e.name} (ID: ${$e.id}) has active subscription. Assigning doctor directly.`),await Be()):(console.log(`Patient ${$e.name} (ID: ${$e.id}) does not have active subscription. Navigating to billing WITHOUT assigning doctor yet.`),R(`/dashboard/doctor-billing/${$}?doctorId=${ie}`))},Ie=xe.Patient;if(Ie&&Ie.id&&Ie.name)console.log("Patient details found in state. Proceeding with assignment."),await X(Ie);else{console.warn(`Patient details missing for queue entry ${$}. Fetching patient ${xe.patient_id}...`);try{const $e=await le(`/api/patients/${xe.patient_id}`);if(!$e.ok){const Le=await $e.json().catch(()=>({}));throw new Error(Le.message||`Failed to fetch patient details (status ${$e.status})`)}const Be=await $e.json();console.log("Successfully fetched patient details:",Be),await X(Be)}catch($e){console.error(`Failed to fetch patient details for patient ID ${xe.patient_id}:`,$e),I(`Failed to fetch required patient details: ${$e.message}`)}}},[w,j,R,T]),B=$=>{$&&(C.prefetchQuery({queryKey:Wt.patients.context($),queryFn:async()=>{const ie=await le(`/api/patients/${$}/context`);if(!ie.ok)throw new Error("Failed to fetch patient context");return ie.json()},staleTime:5*60*1e3}),C.prefetchQuery({queryKey:Wt.patientDebts.balance($),queryFn:async()=>{const ie=await le(`/api/patient-debts/${$}/balance`);return ie.ok?ie.json():{netDebt:0}},staleTime:1*60*1e3}),C.prefetchQuery({queryKey:Wt.queue.latest($),queryFn:async()=>{const ie=await le(`/api/queue/patient/${$}/latest`);if(!ie.ok)throw new Error("Failed to fetch latest queue status");const xe=await ie.json();return xe!=null&&xe._id&&C.prefetchQuery({queryKey:Wt.queue.entry(xe._id),queryFn:async()=>{const X=await le(`/api/queue/doctor/complaint/${xe._id}`);if(!X.ok)throw new Error("Failed to fetch complaint record");return X.json()},staleTime:1*60*1e3}),xe},staleTime:5e3}),C.prefetchQuery({queryKey:Wt.dental.records($),queryFn:async()=>{const ie=await le(`/api/dental/patient/${$}`);if(!ie.ok)throw new Error("Failed to fetch dental records");return ie.json()},staleTime:5*60*1e3}))},V=v.useMemo(()=>DO($=>B($),500),[]);v.useEffect(()=>()=>{V.cancel()},[V]);const W=async($,ie)=>{var X;I(null);const xe=ie==="consulting"?"start consultation":"complete visit";try{await T.mutateAsync({queueId:$,status:ie,doctorId:ie==="consulting"&&((X=j.find(Ie=>Ie.id===$))==null?void 0:X.doctor_id)||void 0})}catch(Ie){console.error(`Error trying to ${xe}:`,Ie),I(`Failed to ${xe}: ${Ie.message}`)}},G=async($,ie)=>{let xe="red";ie==="red"?xe="green":ie==="green"?xe="blue":ie==="blue"?xe=null:xe="red";try{if(!(await le(`/api/patients/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_code:xe})})).ok)throw new Error("Failed to update patient color");b()}catch(X){console.error("Error updating patient color:",X)}},z=[{id:"queue",label:"Queue",icon:r.jsx(zi,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(En,{size:20})},{id:"manage-admission",label:"Admissions",icon:r.jsx(BQ,{size:20})},{id:"all-patients",label:"Patients",icon:r.jsx(Pb,{size:20})},{id:"lab",label:"Lab",icon:r.jsx(ew,{size:20})},{id:"custom-bill",label:"Bill",icon:r.jsx(Ds,{size:20})},{id:"medical",label:"Medical",icon:r.jsx(UX,{size:20})},{id:"motion-detect",label:"Motion",icon:r.jsx(NE,{size:20})},{id:"debt-management",label:"Debt",icon:r.jsx(ud,{size:20})},{id:"patient-files",label:"Files",icon:r.jsx(Xr,{size:20})},{id:"clinic-files",label:"Clinic Files",icon:r.jsx(Xr,{size:20})},{id:"add-order",label:"New Order",icon:r.jsx(so,{size:20})}],Y=$=>{try{return new Date($).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},Q=j.filter($=>{var ie,xe;return(xe=(ie=$.Patient)==null?void 0:ie.name)==null?void 0:xe.toLowerCase().includes(a.toLowerCase())}),{openCommandBar:K}=Rc();return r.jsxs("div",{className:"reception-app",children:[P&&r.jsxs("div",{className:"reception-error",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:P})]}),r.jsx("div",{className:"reception-nav",children:z.map($=>r.jsxs("button",{className:`reception-nav-item ${e===$.id?"active":""}`,onClick:()=>{$.id==="newtons-ai"?K():n($.id)},children:[r.jsx("span",{children:$.icon}),$.label]},$.id))}),r.jsxs("div",{className:"reception-main",children:[e==="queue"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"reception-header",children:[r.jsxs("div",{className:"reception-actions",children:[r.jsxs("div",{className:"reception-search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patients...",className:"reception-search-input",value:a,onChange:$=>i($.target.value)}),r.jsx(En,{className:"reception-search-icon",size:18})]}),r.jsxs("div",{className:"reception-controls",children:[r.jsxs("div",{className:"reception-view-toggle",children:[r.jsxs("button",{className:`reception-toggle-option ${f==="list"?"active":""}`,onClick:()=>p("list"),title:"List View",children:[r.jsx(JB,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"List"})]}),r.jsxs("button",{className:`reception-toggle-option ${f==="timeline"?"active":""}`,onClick:()=>p("timeline"),title:"Timeline View",children:[r.jsx(YD,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"Timeline"})]})]}),r.jsx("div",{className:"reception-btn-icon",style:{width:"auto",padding:"0 10px",gap:"8px"},children:r.jsx("input",{type:"date",className:"bg-transparent border-none outline-none text-sm dark:text-white",value:s.toISOString().split("T")[0],onChange:$=>o(new Date($.target.value))})}),r.jsxs("button",{onClick:()=>u(!0),className:"reception-btn-primary",children:[r.jsx(zg,{size:16}),r.jsx("span",{children:"Book Appointment"})]})]})]}),r.jsxs("div",{className:"reception-stats",children:[r.jsxs("div",{className:"reception-stat-card stat-waiting",children:[r.jsx("div",{className:"reception-stat-label",children:"Waiting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter($=>$.status==="waiting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-consulting",children:[r.jsx("div",{className:"reception-stat-label",children:"Consulting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter($=>$.status==="consulting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-completed",children:[r.jsx("div",{className:"reception-stat-label",children:"Completed"}),r.jsx("div",{className:"reception-stat-value",children:j.filter($=>$.status==="seen").length})]})]})]}),r.jsx(uG,{isOpen:c,onClose:()=>{u(!1),b()},onAppointmentBooked:U}),x&&j.length===0?r.jsx("div",{className:"reception-card",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:50,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{className:"hidden md:table-cell",children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:120,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map($=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:40,height:20})}),r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsx(te,{width:120,height:32})})]},$))})]})}):Q.length===0?r.jsx("div",{className:"empty-queue-message",children:a?"No patients found matching your search.":"Queue is empty."}):f==="timeline"?r.jsx(cG,{queueList:Q,onPatientClick:$=>R(`/dashboard/edit-complaint/${$.id}`)}):r.jsx("div",{className:"reception-card reception-table-wrapper",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"hidden-mobile",children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Phone"}),r.jsx("th",{className:"hidden-mobile",children:"Complaint"}),r.jsx("th",{className:"hidden-mobile",children:"Subscription"}),r.jsx("th",{className:"hidden-mobile",children:"Time"}),r.jsx("th",{className:"text-center",children:"Action"})]})}),r.jsx("tbody",{children:Q.map($=>{var ie,xe,X,Ie,$e,Be,Le,ce,Se,Ve,Ae,ue;return r.jsxs("tr",{onClick:()=>R(`/dashboard/edit-complaint/${$.id}`),onMouseEnter:()=>$.patient_id&&V($.patient_id),className:"reception-row",children:[r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsxs("span",{className:"queue-token",children:["#",$.token_no]})," "]}),r.jsx("td",{children:r.jsxs("div",{className:"patient-cell-content",children:[r.jsx("span",{className:"reception-color-dot",style:{backgroundColor:((ie=$.Patient)==null?void 0:ie.color_code)||"#cbd5e1"},onClick:Te=>{var oe;Te.stopPropagation(),(oe=$.Patient)!=null&&oe.id&&G($.Patient.id,$.Patient.color_code)},title:"Click to change color"}),r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:((xe=$.Patient)==null?void 0:xe.name)||"N/A"}),r.jsxs("span",{className:"details",children:[(X=$.Patient)!=null&&X.age?`${$.Patient.age}y`:"",(Ie=$.Patient)!=null&&Ie.gender?`, ${$.Patient.gender}`:""]})]})]})}),r.jsxs("td",{className:"desktop-only",children:[" ",r.jsx("div",{className:"text-sm text-gray-500",children:(($e=$.Patient)==null?void 0:$e.phone)||"-"})," "]}),r.jsx("td",{className:"desktop-only",children:r.jsx("span",{className:"reception-badge badge-neutral",children:$.complaint||"-"})}),r.jsxs("td",{className:"desktop-only",children:[r.jsx("span",{className:`reception-badge ${((Be=$.Patient)==null?void 0:Be.subscription_status)==="active"?"badge-active":((Le=$.Patient)==null?void 0:Le.subscription_status)==="cancelled"||((ce=$.Patient)==null?void 0:ce.subscription_status)==="expired"?"badge-inactive":"badge-neutral"}`,children:((Se=$.Patient)==null?void 0:Se.subscription_status)??"None"}),$.Patient&&$.Patient.id&&$.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:Te=>{Te.stopPropagation(),$.Patient&&R(`/start-subscription/${$.Patient.id}`)},className:"btn-start-sub ml-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden-mobile text-sm text-gray-500",children:Y($.createdAt)}),r.jsx("td",{className:"action-doctor-cell",children:A===$.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:Te=>Te.stopPropagation(),children:r.jsxs("select",{value:"",onChange:Te=>F($.id,Te.target.value),onBlur:()=>k(null),className:"doctor-select",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),_?r.jsx("option",{disabled:!0,children:"Loading..."}):w.length>0?w.map(Te=>r.jsx("option",{value:Te.id,children:Te.name},Te.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:Te=>Te.stopPropagation(),children:[$.status==="waiting"&&r.jsx(r.Fragment,{children:(Ve=$.User)!=null&&Ve.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:$.User.name}),r.jsx("button",{onClick:()=>W($.id,"consulting"),className:"btn-action btn-start",children:"Start"})]}):_?r.jsx(te,{width:80,height:20}):w.length===0?r.jsx("span",{className:"text-red-500 text-xs",children:"No docs"}):w.length===1?r.jsxs("button",{onClick:()=>F($.id,w[0].id),className:"btn-action btn-assign",children:["Assign ",w[0].name.split(" ")[0]]}):r.jsx("button",{onClick:()=>k($.id),className:"btn-action btn-assign",children:"Assign"})}),$.status==="consulting"&&r.jsxs(r.Fragment,{children:[((Ae=$.User)==null?void 0:Ae.name)&&r.jsx("span",{className:"doctor-name-display",children:$.User.name}),r.jsx("button",{onClick:()=>W($.id,"seen"),className:"btn-action btn-complete",children:"Complete"})]}),$.status==="seen"&&r.jsxs(r.Fragment,{children:[((ue=$.User)==null?void 0:ue.name)&&r.jsx("span",{className:"doctor-name-display",children:$.User.name}),r.jsx("span",{className:"text-gray-400 italic text-xs",children:"Done"})]}),$.status==="cancelled"&&r.jsx("span",{className:"text-red-500 italic text-xs",children:"Cancelled"})]})})]},$.id)})})]})})]}),e==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx(fG,{currentUser:t}),r.jsxs("button",{onClick:()=>R("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(En,{size:16}),"Search Lab Reports"]})]}),e==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx(bv,{})}),e==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx($M,{})}),e==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(CD,{})}),e==="custom-bill"&&r.jsx("div",{className:"custom-bill-tab-content",children:r.jsx(hG,{})}),e==="medical"&&r.jsx("div",{className:"medical-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(CG,{})}),e==="motion-detect"&&r.jsx("div",{className:"motion-detect-tab-content",style:{height:"100%"},children:r.jsx(KOe,{})}),e==="debt-management"&&r.jsx("div",{className:"debt-management-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(RN,{})}),e==="patient-files"&&r.jsx("div",{className:"patient-files-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(TG,{})}),e==="clinic-files"&&r.jsx("div",{className:"clinic-files-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(BM,{})}),e==="add-order"&&r.jsx("div",{className:"add-order-tab-content",style:{height:"100%",overflow:"auto"},children:r.jsx(uw,{})})]})]})},kG=6048e5,JOe=864e5,AG=6e4,EG=36e5,Dz=Symbol.for("constructDateFrom");function Vo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Dz in t?t[Dz](e):t instanceof Date?new t.constructor(e):new Date(e)}function gi(t,e){return Vo(e||t,t)}function ZOe(t,e,n){const a=gi(t,n==null?void 0:n.in);if(isNaN(e))return Vo(t,NaN);const i=a.getDate(),s=Vo(t,a.getTime());s.setMonth(a.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(a.setFullYear(s.getFullYear(),s.getMonth(),i),a)}let eMe={};function US(){return eMe}function jb(t,e){var l,c,u,f;const n=US(),a=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,i=gi(t,e==null?void 0:e.in),s=i.getDay(),o=(s<a?7:0)+s-a;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function LN(t,e){return jb(t,{...e,weekStartsOn:1})}function PG(t,e){const n=gi(t,e==null?void 0:e.in),a=n.getFullYear(),i=Vo(n,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const s=LN(i),o=Vo(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=LN(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=l.getTime()?a:a-1}function Oz(t){const e=gi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function tMe(t,...e){const n=Vo.bind(null,e.find(a=>typeof a=="object"));return e.map(n)}function Mz(t,e){const n=gi(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function nMe(t,e,n){const[a,i]=tMe(n==null?void 0:n.in,t,e),s=Mz(a),o=Mz(i),l=+s-Oz(s),c=+o-Oz(o);return Math.round((l-c)/JOe)}function rMe(t,e){const n=PG(t,e),a=Vo(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),LN(a)}function aMe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function AD(t){return!(!aMe(t)&&typeof t!="number"||isNaN(+gi(t)))}function iMe(t,e){const n=gi(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const sMe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oMe=(t,e,n)=>{let a;const i=sMe[t];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function VA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const lMe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cMe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uMe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dMe={date:VA({formats:lMe,defaultWidth:"full"}),time:VA({formats:cMe,defaultWidth:"full"}),dateTime:VA({formats:uMe,defaultWidth:"full"})},hMe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fMe=(t,e,n,a)=>hMe[t];function uv(t){return(e,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let i;if(a==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const pMe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mMe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gMe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yMe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xMe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vMe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bMe=(t,e)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},jMe={ordinalNumber:bMe,era:uv({values:pMe,defaultWidth:"wide"}),quarter:uv({values:mMe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:uv({values:gMe,defaultWidth:"wide"}),day:uv({values:yMe,defaultWidth:"wide"}),dayPeriod:uv({values:xMe,defaultWidth:"wide",formattingValues:vMe,defaultFormattingWidth:"wide"})};function dv(t){return(e,n={})=>{const a=n.width,i=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?NMe(l,p=>p.test(o)):wMe(l,p=>p.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const f=e.slice(o.length);return{value:u,rest:f}}}function wMe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function NMe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function SMe(t){return(e,n={})=>{const a=e.match(t.matchPattern);if(!a)return null;const i=a[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const _Me=/^(\d+)(th|st|nd|rd)?/i,CMe=/\d+/i,TMe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kMe={any:[/^b/i,/^(a|c)/i]},AMe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},EMe={any:[/1/i,/2/i,/3/i,/4/i]},PMe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},DMe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},OMe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},MMe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},IMe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},RMe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},LMe={ordinalNumber:SMe({matchPattern:_Me,parsePattern:CMe,valueCallback:t=>parseInt(t,10)}),era:dv({matchPatterns:TMe,defaultMatchWidth:"wide",parsePatterns:kMe,defaultParseWidth:"any"}),quarter:dv({matchPatterns:AMe,defaultMatchWidth:"wide",parsePatterns:EMe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:dv({matchPatterns:PMe,defaultMatchWidth:"wide",parsePatterns:DMe,defaultParseWidth:"any"}),day:dv({matchPatterns:OMe,defaultMatchWidth:"wide",parsePatterns:MMe,defaultParseWidth:"any"}),dayPeriod:dv({matchPatterns:IMe,defaultMatchWidth:"any",parsePatterns:RMe,defaultParseWidth:"any"})},FMe={code:"en-US",formatDistance:oMe,formatLong:dMe,formatRelative:fMe,localize:jMe,match:LMe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $Me(t,e){const n=gi(t,e==null?void 0:e.in);return nMe(n,iMe(n))+1}function zMe(t,e){const n=gi(t,e==null?void 0:e.in),a=+LN(n)-+rMe(n);return Math.round(a/kG)+1}function DG(t,e){var f,p,g,x;const n=gi(t,e==null?void 0:e.in),a=n.getFullYear(),i=US(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(g=i.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,o=Vo((e==null?void 0:e.in)||t,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const l=jb(o,e),c=Vo((e==null?void 0:e.in)||t,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const u=jb(c,e);return+n>=+l?a+1:+n>=+u?a:a-1}function BMe(t,e){var l,c,u,f;const n=US(),a=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,i=DG(t,e),s=Vo((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,a),s.setHours(0,0,0,0),jb(s,e)}function qMe(t,e){const n=gi(t,e==null?void 0:e.in),a=+jb(n,e)-+BMe(n,e);return Math.round(a/kG)+1}function xr(t,e){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return n+a}const Vu={y(t,e){const n=t.getFullYear(),a=n>0?n:1-n;return xr(e==="yy"?a%100:a,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):xr(n+1,2)},d(t,e){return xr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return xr(t.getHours()%12||12,e.length)},H(t,e){return xr(t.getHours(),e.length)},m(t,e){return xr(t.getMinutes(),e.length)},s(t,e){return xr(t.getSeconds(),e.length)},S(t,e){const n=e.length,a=t.getMilliseconds(),i=Math.trunc(a*Math.pow(10,n-3));return xr(i,e.length)}},Tm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Iz={G:function(t,e,n){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const a=t.getFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return Vu.y(t,e)},Y:function(t,e,n,a){const i=DG(t,a),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return xr(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):xr(s,e.length)},R:function(t,e){const n=PG(t);return xr(n,e.length)},u:function(t,e){const n=t.getFullYear();return xr(n,e.length)},Q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return xr(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return xr(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,n){const a=t.getMonth();switch(e){case"M":case"MM":return Vu.M(t,e);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,n){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return xr(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,n,a){const i=qMe(t,a);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):xr(i,e.length)},I:function(t,e,n){const a=zMe(t);return e==="Io"?n.ordinalNumber(a,{unit:"week"}):xr(a,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Vu.d(t,e)},D:function(t,e,n){const a=$Me(t);return e==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):xr(a,e.length)},E:function(t,e,n){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return xr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return xr(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const a=t.getDay(),i=a===0?7:a;switch(e){case"i":return String(i);case"ii":return xr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const a=t.getHours();let i;switch(a===12?i=Tm.noon:a===0?i=Tm.midnight:i=a/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const a=t.getHours();let i;switch(a>=17?i=Tm.evening:a>=12?i=Tm.afternoon:a>=4?i=Tm.morning:i=Tm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Vu.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Vu.H(t,e)},K:function(t,e,n){const a=t.getHours()%12;return e==="Ko"?n.ordinalNumber(a,{unit:"hour"}):xr(a,e.length)},k:function(t,e,n){let a=t.getHours();return a===0&&(a=24),e==="ko"?n.ordinalNumber(a,{unit:"hour"}):xr(a,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Vu.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Vu.s(t,e)},S:function(t,e){return Vu.S(t,e)},X:function(t,e,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return Lz(a);case"XXXX":case"XX":return Kh(a);case"XXXXX":case"XXX":default:return Kh(a,":")}},x:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"x":return Lz(a);case"xxxx":case"xx":return Kh(a);case"xxxxx":case"xxx":default:return Kh(a,":")}},O:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Rz(a,":");case"OOOO":default:return"GMT"+Kh(a,":")}},z:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Rz(a,":");case"zzzz":default:return"GMT"+Kh(a,":")}},t:function(t,e,n){const a=Math.trunc(+t/1e3);return xr(a,e.length)},T:function(t,e,n){return xr(+t,e.length)}};function Rz(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=Math.trunc(a/60),s=a%60;return s===0?n+String(i):n+String(i)+e+xr(s,2)}function Lz(t,e){return t%60===0?(t>0?"-":"+")+xr(Math.abs(t)/60,2):Kh(t,e)}function Kh(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=xr(Math.trunc(a/60),2),s=xr(a%60,2);return n+i+e+s}const Fz=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},OG=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},UMe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return Fz(t,e);let s;switch(a){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Fz(a,e)).replace("{{time}}",OG(i,e))},VMe={p:OG,P:UMe},HMe=/^D+$/,GMe=/^Y+$/,WMe=["D","DD","YY","YYYY"];function YMe(t){return HMe.test(t)}function KMe(t){return GMe.test(t)}function QMe(t,e,n){const a=XMe(t,e,n);if(console.warn(a),WMe.includes(t))throw new RangeError(a)}function XMe(t,e,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const JMe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZMe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eIe=/^'([^]*?)'?$/,tIe=/''/g,nIe=/[a-zA-Z]/;function xf(t,e,n){var f,p,g,x;const a=US(),i=a.locale??FMe,s=a.firstWeekContainsDate??((p=(f=a.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=a.weekStartsOn??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=gi(t,n==null?void 0:n.in);if(!AD(l))throw new RangeError("Invalid time value");let c=e.match(ZMe).map(b=>{const j=b[0];if(j==="p"||j==="P"){const w=VMe[j];return w(b,i.formatLong)}return b}).join("").match(JMe).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const j=b[0];if(j==="'")return{isToken:!1,value:rIe(b)};if(Iz[j])return{isToken:!0,value:b};if(j.match(nIe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(b=>{if(!b.isToken)return b.value;const j=b.value;(KMe(j)||YMe(j))&&QMe(j,e,String(t));const w=Iz[j[0]];return w(l,j,i.localize,u)}).join("")}function rIe(t){const e=t.match(eIe);return e?e[1].replace(tIe,"'"):t}function HA(t,e){return+gi(t)<+gi(e)}function $z(t,e){const n=()=>Vo(e==null?void 0:e.in,NaN),i=oIe(t);let s;if(i.date){const u=lIe(i.date,2);s=cIe(u.restDateString,u.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(i.time&&(l=uIe(i.time),isNaN(l)))return n();if(i.timezone){if(c=dIe(i.timezone),isNaN(c))return n()}else{const u=new Date(o+l),f=gi(0,e==null?void 0:e.in);return f.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),f.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),f}return gi(o+l+c,e==null?void 0:e.in)}const Kj={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},aIe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,iIe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,sIe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function oIe(t){const e={},n=t.split(Kj.dateTimeDelimiter);let a;if(n.length>2)return e;if(/:/.test(n[0])?a=n[0]:(e.date=n[0],a=n[1],Kj.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Kj.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){const i=Kj.timezone.exec(a);i?(e.time=a.replace(i[1],""),e.timezone=i[1]):e.time=a}return e}function lIe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(n);if(!a)return{year:NaN,restDateString:""};const i=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((a[1]||a[2]).length)}}function cIe(t,e){if(e===null)return new Date(NaN);const n=t.match(aIe);if(!n)return new Date(NaN);const a=!!n[4],i=hv(n[1]),s=hv(n[2])-1,o=hv(n[3]),l=hv(n[4]),c=hv(n[5])-1;if(a)return gIe(e,l,c)?hIe(e,l,c):new Date(NaN);{const u=new Date(0);return!pIe(e,s,o)||!mIe(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}}function hv(t){return t?parseInt(t):1}function uIe(t){const e=t.match(iIe);if(!e)return NaN;const n=GA(e[1]),a=GA(e[2]),i=GA(e[3]);return yIe(n,a,i)?n*EG+a*AG+i*1e3:NaN}function GA(t){return t&&parseFloat(t.replace(",","."))||0}function dIe(t){if(t==="Z")return 0;const e=t.match(sIe);if(!e)return 0;const n=e[1]==="+"?-1:1,a=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return xIe(a,i)?n*(a*EG+i*AG):NaN}function hIe(t,e,n){const a=new Date(0);a.setUTCFullYear(t,0,4);const i=a.getUTCDay()||7,s=(e-1)*7+n+1-i;return a.setUTCDate(a.getUTCDate()+s),a}const fIe=[31,null,31,30,31,30,31,31,30,31,30,31];function MG(t){return t%400===0||t%4===0&&t%100!==0}function pIe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(fIe[e]||(MG(t)?29:28))}function mIe(t,e){return e>=1&&e<=(MG(t)?366:365)}function gIe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function yIe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function xIe(t,e){return e>=0&&e<=59}const qM=({isEmbedded:t=!1})=>{const{customColumnsConfig:e,refetch:n}=oS(),a=e.lab_tests||[],[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,u]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState(!1),[b,j]=v.useState(null),[w,_]=v.useState(!1),[T,C]=v.useState(null),A=v.useRef(null),[k,P]=v.useState(!1),[I,R]=v.useState(null),[q,U]=v.useState(!1),[F,B]=v.useState(!1),[V,W]=v.useState(null),[G,z]=v.useState({name:"",description:"",price:"",default_parameters:[]}),Y=v.useCallback(async()=>{x(!0),j(null),C(null),R(null);try{const oe=await le("/api/lab-tests");if(!oe.ok)throw new Error(`HTTP error! status: ${oe.status}`);const be=await oe.json();u(be)}catch(oe){console.error("Error fetching lab tests:",oe),j(oe.message||"Failed to fetch lab tests.")}finally{x(!1)}},[]);v.useEffect(()=>{Y()},[Y]);const Q=oe=>{const{name:be,value:_e}=oe.target;z(Ne=>({...Ne,[be]:_e}))},K=(oe,be,_e)=>{const Ne=[...G.default_parameters],ee=Ne[oe];if(be==="type")switch(ee.type=_e,_e){case"number":ee.defaultValue=0,ee.lower_limit=null,ee.upper_limit=null,ee.unit="";break;case"boolean":ee.defaultValue=!1,ee.lower_limit=void 0,ee.upper_limit=void 0,ee.unit=void 0;break;case"string":default:ee.defaultValue="",ee.lower_limit=void 0,ee.upper_limit=void 0,ee.unit=void 0;break}else be==="defaultValue"?ee.type==="number"?ee.defaultValue=parseFloat(_e)||0:(ee.type,ee.defaultValue=_e):be==="lower_limit"||be==="upper_limit"?ee[be]=_e===""?null:parseFloat(_e):ee[be]=_e;z(ge=>({...ge,default_parameters:Ne}))},$=()=>{z(oe=>({...oe,default_parameters:[...oe.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},ie=oe=>{z(be=>({...be,default_parameters:be.default_parameters.filter((_e,Ne)=>Ne!==oe)}))},xe=async oe=>{oe.preventDefault(),x(!0),j(null);const be=V!==null,_e=be?`/api/lab-tests/${V}`:"/api/lab-tests",Ne=be?"PUT":"POST";try{const ee=await le(_e,{method:Ne,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:G.name,description:G.description,price:parseFloat(G.price),default_parameters:G.default_parameters})});if(!ee.ok){const ge=await ee.json();throw new Error(ge.message||`HTTP error! status: ${ee.status}`)}B(!1),W(null),z({name:"",description:"",price:"",default_parameters:[]}),Y()}catch(ee){console.error(`Error ${be?"updating":"adding"} lab test:`,ee),j(ee.message||`Failed to ${be?"update":"add"} lab test.`)}finally{x(!1)}},X=()=>{W(null),z({name:"",description:"",price:"",default_parameters:[]}),B(!0)},Ie=oe=>{if(V===oe.id)W(null);else{W(oe.id);const be=(oe.default_parameters||[]).map(_e=>({..._e,unit:_e.unit||"",lower_limit:_e.lower_limit===void 0?null:_e.lower_limit,upper_limit:_e.upper_limit===void 0?null:_e.upper_limit}));z({name:oe.name,description:oe.description||"",price:oe.price,default_parameters:be}),B(!1)}},$e=async oe=>{if(window.confirm("Are you sure you want to delete this lab test?")){x(!0),j(null);try{const be=await le(`/api/lab-tests/${oe}`,{method:"DELETE"});if(!be.ok){const _e=await be.json();throw new Error(_e.message||`HTTP error! status: ${be.status}`)}Y()}catch(be){console.error("Error deleting lab test:",be),j(be.message||"Failed to delete lab test.")}finally{x(!1)}}},Be=()=>{B(!1),W(null),j(null),z({name:"",description:"",price:"",default_parameters:[]})},Le=async oe=>{if(!oe){C("No file selected.");return}_(!0),C(null),j(null);const be=new FormData;be.append("file",oe);try{const _e=await le("/api/lab-tests/import",{method:"POST",body:be});if(!_e.ok){const Ne=await _e.json();throw new Error(Ne.message||`Import failed: ${_e.statusText}`)}Y()}catch(_e){console.error("Error importing lab tests from Excel:",_e),C(_e.message||"Failed to import lab tests from Excel.")}finally{_(!1)}},ce=async oe=>{if(oe.target.files&&oe.target.files[0]){const be=oe.target.files[0];await Le(be),oe.target&&(oe.target.value="")}},Se=async oe=>{const be=oe==="xray"?"X-Ray":"biochemistry and pathology";if(window.confirm(`Are you sure you want to import default ${be} tests? This will add new tests and may duplicate existing ones if names match.`)){P(!0),R(null),j(null);try{const _e=await le("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:oe})});if(!_e.ok){const Ne=await _e.json();throw new Error(Ne.message||`Default import failed: ${_e.statusText}`)}Y()}catch(_e){console.error(`Error importing default ${oe} lab tests:`,_e),R(_e.message||`Failed to import default ${oe} lab tests.`)}finally{P(!1)}}},Ve=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){U(!0),j(null),C(null),R(null);try{const oe=await le("/api/lab-tests/all",{method:"DELETE"});if(!oe.ok){const be=await oe.json();throw new Error(be.message||`Delete all failed: ${oe.statusText}`)}Y()}catch(oe){console.error("Error deleting all lab tests:",oe),j(oe.message||"Failed to delete all lab tests.")}finally{U(!1)}}},Ae=g||w||k||q,ue=v.useMemo(()=>new uo(c,{keys:["name","description","default_parameters.name"],threshold:.3,ignoreLocation:!0}),[c]),Te=v.useMemo(()=>f?ue.search(f).map(oe=>oe.item):c,[c,f,ue]);return r.jsxs("div",{className:`lab-inventory-card ${t?"embedded":""}`,style:t?{border:"none",boxShadow:"none",padding:0}:{},children:[!t&&r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsx("div",{className:"mb-4",style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:r.jsx("input",{type:"text",placeholder:"Search by test name...",value:f,onChange:oe=>p(oe.target.value),className:"lab-inventory-input",style:{maxWidth:"300px",marginRight:"10px"}})}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:X,className:"lab-inventory-button",disabled:Ae,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var oe;return(oe=A.current)==null?void 0:oe.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:w?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:A,onChange:ce,accept:".xlsx, .xls",style:{display:"none"},disabled:w}),r.jsx("button",{onClick:()=>Se("general"),className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:k?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:()=>Se("xray"),className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:k?"Importing X-Rays...":"Import X-Rays"}),r.jsx("button",{onClick:Ve,className:"lab-inventory-button lab-inventory-button-danger",disabled:Ae,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:q?"Deleting All...":"Delete All Tests"}),r.jsxs("button",{onClick:()=>s(!0),className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,title:"Manage Custom Columns",children:[r.jsx(hd,{size:16,style:{marginRight:"4px"}})," Columns"]}),r.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"auto"},children:[r.jsxs("button",{onClick:()=>l(!1),className:`view-mode-btn ${o?"":"active"}`,title:"List View",children:[r.jsx(Pb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>l(!0),className:`view-mode-btn ${o?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(wf,{size:18})," Excel"]})]})]}),b&&r.jsx("div",{className:"error-text mb-4",children:b}),T&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",T]}),I&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",I]}),F&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:xe,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:G.name,onChange:Q,className:"lab-inventory-input",required:!0,disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:G.description,onChange:Q,rows:3,className:"lab-inventory-input",disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:G.price,onChange:Q,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),G.default_parameters.map((oe,be)=>{var _e,Ne;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:oe.name,onChange:ee=>K(be,"name",ee.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:oe.type,onChange:ee=>K(be,"type",ee.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),oe.type==="boolean"?r.jsxs("select",{value:oe.defaultValue.toString(),onChange:ee=>K(be,"defaultValue",ee.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:oe.type==="number"?"number":"text",placeholder:"Default Value",value:oe.defaultValue.toString(),onChange:ee=>K(be,"defaultValue",ee.target.value),className:"lab-inventory-input"}),oe.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:oe.lower_limit===null?"":((_e=oe.lower_limit)==null?void 0:_e.toString())??"",onChange:ee=>K(be,"lower_limit",ee.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:oe.upper_limit===null?"":((Ne=oe.upper_limit)==null?void 0:Ne.toString())??"",onChange:ee=>K(be,"upper_limit",ee.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:oe.unit||"",onChange:ee=>K(be,"unit",ee.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ie(be),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},be)}),r.jsx("button",{type:"button",onClick:$,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Be,className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:Ae,children:g?"Saving...":"Add Test"})]})]})]}),Ae&&!F?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"mb-4 flex gap-2",children:[1,2,3,4,5].map(oe=>r.jsx(te,{width:100,height:36},oe))}),r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"}),r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(oe=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:"60%",height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:"90%",height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(te,{width:40,height:20}),r.jsx(te,{width:50,height:20})]})})]},oe))})]}),r.jsx("p",{className:"loading-text mt-2 text-sm italic text-gray-500",children:w?"Importing Excel data...":k?"Importing default data...":"Loading tests..."})]}):null,!Ae&&Te.length===0&&!b&&!T&&!I&&r.jsx("p",{className:"no-data-message",children:f?`No lab tests found matching "${f}".`:"No lab tests found. Add one or import from Excel to get started."}),o&&Te.length>0?r.jsx(zb,{columns:[{key:"name",label:"Test Name",editable:!0,type:"text"},{key:"description",label:"Description",editable:!0,type:"text"},{key:"price",label:"Price",editable:!0,type:"number"}],data:Te,editable:!0,showRowNumbers:!0,title:"Lab Test Inventory",onSave:async oe=>{const be=oe.map(async _e=>{const Ne=c.find(ee=>ee.id===_e.id);if(Ne&&(Ne.name!==_e.name||Ne.price!==_e.price||Ne.description!==_e.description))return le(`/api/lab-tests/${_e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)})});try{await Promise.all(be),Y()}catch(_e){alert("Error saving changes"),console.error(_e)}}}):!Ae&&Te.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:Te.map(oe=>{const be=V===oe.id,_e=oe.price&&typeof oe.price=="string"?parseFloat(oe.price):NaN,Ne=isNaN(_e)?"0.00":_e.toFixed(2);return r.jsxs(Ce.Fragment,{children:[r.jsxs("tr",{onClick:()=>Ie(oe),style:{cursor:"pointer"},children:[r.jsx("td",{children:oe.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:oe.description||"-"}),r.jsxs("td",{children:["",Ne]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:ee=>{ee.stopPropagation(),Ie(oe)},className:"lab-inventory-link",disabled:Ae,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:ee=>{ee.stopPropagation(),$e(oe.id)},className:"lab-inventory-link",disabled:Ae,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),a.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:a.map(ee=>{var ge;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[ee.label,":"]})," ",(ge=oe.custom_fields)!=null&&ge[ee.key]?String(oe.custom_fields[ee.key]):"-"]},ee.key)})})})}),be&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:xe,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:G.name,onChange:Q,className:"lab-inventory-input",required:!0,disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:G.description,onChange:Q,rows:3,className:"lab-inventory-input",disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:G.price,onChange:Q,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),G.default_parameters.map((ee,ge)=>{var de,ae;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:ee.name,onChange:ne=>K(ge,"name",ne.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:ee.type,onChange:ne=>K(ge,"type",ne.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),ee.type==="boolean"?r.jsxs("select",{value:ee.defaultValue.toString(),onChange:ne=>K(ge,"defaultValue",ne.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:ee.type==="number"?"number":"text",placeholder:"Default Value",value:ee.defaultValue.toString(),onChange:ne=>K(ge,"defaultValue",ne.target.value),className:"lab-inventory-input"}),ee.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:ee.lower_limit===null?"":((de=ee.lower_limit)==null?void 0:de.toString())??"",onChange:ne=>K(ge,"lower_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:ee.upper_limit===null?"":((ae=ee.upper_limit)==null?void 0:ae.toString())??"",onChange:ne=>K(ge,"upper_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:ee.unit||"",onChange:ne=>K(ge,"unit",ne.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ie(ge),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},ge)}),r.jsx("button",{type:"button",onClick:$,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Be,className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:Ae,children:g?"Saving...":"Update Test"})]})]})]})})})]},oe.id)})})]})]}),r.jsx(zM,{isOpen:i,onClose:()=>s(!1),entityType:"lab_tests",entityLabel:"Lab Tests",currentConfig:e,onConfigUpdated:()=>{n()}})]})},vIe=t=>{let e="";if(!t.report_content)return"No report content available.";e+=`*Report Date:* ${t.report_date?new Date(t.report_date).toLocaleDateString():"N/A"}

`;try{const n=JSON.parse(t.report_content);typeof n=="object"&&n!==null&&t.tests?t.tests.forEach((a,i)=>{e+=`*Test: ${a.name}*
`,n[a.id]?Object.entries(n[a.id]).forEach(([s,o])=>{var f;const l=(f=a.default_parameters)==null?void 0:f.find(p=>p.name===s);let c=String(o),u="";if(l){const p=l.unit?` _${l.unit}_`:"";if(l.type==="boolean"){const g=o===!0||o==="true";c=g?"*Reactive*":"Non-Reactive",g||(u="`Normal: Non-Reactive`")}else if(l.type==="number"){const g=typeof o=="string"?parseFloat(o):typeof o=="number"?o:NaN;if(l.lower_limit!=null||l.upper_limit!=null){let x=[];l.lower_limit!=null&&x.push(`${l.lower_limit}`),l.upper_limit!=null&&x.push(`${l.upper_limit}`),u=`\`Normal: ${x.join(" - ")}\`${p}`,!isNaN(g)&&(l.lower_limit!=null&&g<l.lower_limit||l.upper_limit!=null&&g>l.upper_limit)&&(c=`*${c}*`)}}l.unit&&(c+=p)}e+=`${s}: ${c}
`,u&&((l==null?void 0:l.type)==="boolean"&&(o===!0||o==="true")||(e+=`${u}
`))}):e+=`_No parameters reported for this test._
`,i<t.tests.length-1&&(e+=`
`)}):e+=t.report_content}catch{e+=t.report_content}return e},UM=t=>{var o;if(!((o=t==null?void 0:t.Patient)!=null&&o.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(t!=null&&t.report_content)){alert("Cannot share report: No report content is available to share.");return}const e=t.Patient.name||"Patient",n=vIe(t),a=`Hello ${e},

Your lab report is ready.

${n}`,s=`https://wa.me/${bIe(t.Patient.phone)}?text=${encodeURIComponent(a)}`;window.open(s,"_blank")},bIe=t=>{let e=t.replace(/\D/g,"");const n=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,a=e.match(n);return a?e="91"+a[1]:e.startsWith("91")||(e="91"+e),e},zz=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(!0),[c,u]=v.useState(null),[f,p]=v.useState("orders"),[g,x]=v.useState(1),[b]=v.useState(20),[j,w]=v.useState(0),_=v.useMemo(()=>Math.ceil(j/b),[j,b]),T=v.useCallback(async(F=1,B="")=>{s(!0),u(null);try{const V=new URLSearchParams({page:String(F),limit:String(b)});B&&V.append("search",B);const W=await le(`/api/lab?${V.toString()}`);if(!W.ok)throw new Error(`HTTP error! status: ${W.status}`);const G=await W.json(),z=G.orders.map(Y=>{var Q,K;return{id:Y.id,labTokenNumber:String(Y.lab_token_number??"N/A"),patientName:((Q=Y.Patient)==null?void 0:Q.name)||"N/A",patientId:Y.patient_id,patientTokenNumber:String(((K=Y.Patient)==null?void 0:K.patient_token_number)??"N/A"),tests:(Y.tests||[]).map($=>$.name||"Unknown Test"),date:xf(new Date(Y.createdAt),"yyyy-MM-dd"),status:Y.status,reportId:Y.reportId,billId:Y.billId}});e(z),w(G.totalCount),x(F)}catch(V){console.error("Failed to fetch lab orders:",V),u(V instanceof Error?V.message:"An unknown error occurred"),e([]),w(0)}finally{s(!1),l(!1)}},[b]);v.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${g}, Search term: "${n}"`),n.length===0||n.length>=2?(console.log(`Condition met (length ${n.length}). Fetching orders...`),T(g,n)):console.log(`Condition not met (length ${n.length}). Not fetching.`)},[T,g,n]),v.useEffect(()=>{const F=setTimeout(()=>{n.length>=2?g!==1&&x(1):n.length<2&&g!==1&&x(1)},1e3);return()=>{clearTimeout(F)}},[n]);const C=async(F,B)=>{console.log(`Updating order ${F} to status ${B}`);try{const V=await le(`/api/lab/${F}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:B})});if(!V.ok){const W=await V.json();throw new Error(W.message||`Failed to update status: ${V.status}`)}if(B==="completed"){const W=await le(`/api/lab/orders/${F}/report`);if(W.ok){const G=await W.json();UM(G)}}await T(g,n),console.log(`Order ${F} status updated to ${B}, refetching page ${g}`)}catch(V){console.error("Error updating status:",V),alert(`Failed to update status: ${V instanceof Error?V.message:"Unknown error"}`)}},{openCommandBar:A}=Rc(),k=Lt(),P=F=>{if(!F){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}F.billId?(console.log(`Navigating to existing bill for Bill ID: ${F.billId}, Patient: ${F.patientName}`),k("/billing",{state:{billId:F.billId,patientId:F.patientId,patientName:F.patientName,billType:"lab"}})):(console.log(`Navigating to LabBillingPage for Order ID: ${F.id}`),k(`/dashboard/lab-billing/${F.id}`))},I=F=>{F&&F.id?k(`/lab/report/${F.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},R=F=>{switch(F){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:F,className:"status-badge"}}};if(i&&o)return r.jsxs("div",{className:"admin-panel-container",children:[r.jsx("div",{className:"admin-nav-bar",children:[1,2,3,4].map(F=>r.jsx(te,{width:100,height:40,style:{borderRadius:"8px",margin:"0 8px"}},F))}),r.jsxs("div",{className:"admin-content-section",style:{padding:"20px"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx(te,{width:200,height:32}),r.jsx(te,{width:300,height:40})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(te,{width:150,height:32})})]},F))})]})})]})]});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(Fr,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:c}),r.jsx("button",{onClick:()=>T(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const q=()=>{g>1&&x(F=>F-1)},U=()=>{g<_&&x(F=>F+1)};return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("div",{className:"admin-nav-bar",children:[r.jsxs("button",{onClick:()=>k(-1),className:"admin-nav-button",title:"Back",children:[r.jsx(sn,{})," Back"]}),r.jsxs("button",{onClick:()=>p("orders"),className:`admin-nav-button ${f==="orders"?"active":""}`,children:[r.jsx(CE,{})," Orders"]}),r.jsx("button",{onClick:()=>k("/create-lab-order"),className:"admin-nav-button",children:"Create New Lab Order"}),r.jsxs("button",{onClick:()=>p("inventory"),className:`admin-nav-button ${f==="inventory"?"active":""}`,children:[r.jsx($Q,{})," Inventory"]}),r.jsxs("button",{onClick:()=>A(),className:"admin-nav-button",children:[r.jsx(WD,{})," Newton's AI"]})]}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[f==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:n,onChange:F=>a(F.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(En,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[i&&!c&&t.length===0&&[1,2,3,4,5].map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(te,{width:150,height:32})})]},F)),!i&&!c&&t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."})}),!i&&!c&&t.map(F=>{const B=R(F.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:F.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",F.patientTokenNumber]})]}),r.jsx("td",{children:F.tests.map((V,W)=>r.jsx("div",{children:V},W))}),r.jsx("td",{className:"hidden md:table-cell",children:F.date}),r.jsx("td",{children:r.jsx("span",{className:B.className,children:B.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[F.status==="pending"&&r.jsx("button",{onClick:()=>P(F),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),F.status==="billed"&&r.jsx("button",{onClick:()=>C(F.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),F.status==="collected"&&r.jsx("button",{onClick:()=>C(F.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(F.status==="processing"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>I(F),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>C(F.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(F.status==="completed"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>{F.id?k(`/lab/view-report/${F.id}`):(console.error("Attempted to view report for an order with no ID:",F),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},F.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[i&&!c&&t.length===0&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>r.jsx("div",{className:"lab-order-card",children:r.jsx(te,{width:"100%",height:150})},F))}),!i&&!c&&t.length===0&&r.jsx("div",{className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."}),!i&&!c&&t.map(F=>{const B=R(F.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:F.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",F.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:F.date})]}),r.jsx("span",{className:`${B.className} lab-card-status-pill`,children:B.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),F.tests.map((V,W)=>r.jsx("div",{className:"lab-card-test-item",children:V},W)),F.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[F.status==="pending"&&r.jsx("button",{onClick:()=>P(F),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),F.status==="billed"&&r.jsx("button",{onClick:()=>C(F.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),F.status==="collected"&&r.jsx("button",{onClick:()=>C(F.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(F.status==="processing"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>I(F),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>C(F.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(F.status==="completed"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>{F.id?k(`/lab/view-report/${F.id}`):(console.error("Attempted to view report for an order with no ID:",F),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},F.id)})]}),!i&&j>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(g-1)*b+1})," ","to"," ",r.jsx("strong",{children:Math.min(g*b,j)})," ","of"," ",r.jsx("strong",{children:j})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:q,disabled:g===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(Eb,{size:18})}),r.jsxs("span",{children:["Page ",g," of ",_]}),r.jsx("button",{onClick:U,disabled:g===_,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(yd,{size:18})})]})]})]}),f==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(qM,{})]})]})})," "]})},WA=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(null),c=Lt(),u=v.useRef(null),{openCommandBar:f}=Rc(),p=hs(),g=R=>{R&&(p.prefetchQuery({queryKey:Wt.patients.context(R),queryFn:async()=>{const q=await le(`/api/patients/${R}/context`);if(!q.ok)throw new Error("Failed to fetch patient context");return q.json()},staleTime:5*60*1e3}),p.prefetchQuery({queryKey:Wt.patientDebts.balance(R),queryFn:async()=>{const q=await le(`/api/patient-debts/${R}/balance`);return q.ok?q.json():{netDebt:0}},staleTime:1*60*1e3}),p.prefetchQuery({queryKey:Wt.queue.latest(R),queryFn:async()=>{const q=await le(`/api/queue/patient/${R}/latest`);if(!q.ok)throw new Error("Failed to fetch latest queue status");const U=await q.json();return U!=null&&U._id&&p.prefetchQuery({queryKey:Wt.queue.entry(U._id),queryFn:async()=>{const F=await le(`/api/queue/doctor/complaint/${U._id}`);if(!F.ok)throw new Error("Failed to fetch complaint record");return F.json()},staleTime:1*60*1e3}),U},staleTime:5e3}),p.prefetchQuery({queryKey:Wt.dental.records(R),queryFn:async()=>{const q=await le(`/api/dental/patient/${R}`);if(!q.ok)throw new Error("Failed to fetch dental records");return q.json()},staleTime:5*60*1e3}))},[x,b]=v.useState(1),[j,w]=v.useState(1),_=10,T=v.useCallback(async(R,q,U)=>{s(!0),l(null);try{let F=`/api/pharmacy-orders?page=${R}&limit=${q}`;U&&U.trim()!==""&&(F+=`&search=${encodeURIComponent(U.trim())}`);const B=await le(F);if(!B.ok)throw new Error(`Failed to fetch orders: ${B.statusText} (${B.status})`);const V=await B.json();V&&Array.isArray(V.orders)?(e(V.orders),w(V.totalPages||1),b(V.currentPage||R)):e([])}catch(F){console.error("Failed to fetch pharmacy orders:",F),l(F.message||"Failed to fetch orders."),e([])}finally{s(!1)}},[]);v.useEffect(()=>(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{T(n?1:x,_,n)},500),()=>{u.current&&clearTimeout(u.current)}),[n,x,T]);const C=R=>c(`/dashboard/edit-pharmacy-order/${R}`),A=R=>c(`/dashboard/edit-complaint/patient/${R.patientId}`),k=R=>{const q=t.find(U=>U.id===R);if(q){const U=q.medications.map(F=>({name:F.name,pack_quantity:F.pack_quantity,loose_quantity:F.loose_quantity,price:F.price??0,pack_price:F.pack_price,loose_price:F.loose_price,total_price:F.total_price,isLoose:F.isLoose,unit:F.unit,drug_id:F.drug_id?String(F.drug_id):null,tabletsPerDay:F.tabletsPerDay,numberOfDays:F.numberOfDays,directions_to_use:F.directions_to_use,discount_percentage:0,batch:F.batch,expiry_date:F.expiry_date}));c(`/dashboard/pharmacy-billing/${R}`,{state:{initialItems:U}})}},P=async(R,q)=>{const U=t.find(F=>F.id===R);if(U)try{const F=await le(`/api/pharmacy-orders/${R}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:q,medications:U.medications})});if(F.ok){const B=await F.json();e(V=>V.map(W=>W.id===B.id?{...W,status:B.status}:W))}}catch(F){console.error("Status update failed",F),alert("Failed to update status")}},I=R=>`pq-pill ${R}`;return r.jsxs("div",{className:"pq-container",children:[r.jsxs("div",{className:"pq-header",children:[r.jsxs("div",{className:"pq-nav-actions",children:[r.jsxs("button",{onClick:()=>c("/dashboard/add-order"),className:"pq-btn",children:[r.jsx(Ds,{})," Add Order"]}),r.jsxs("button",{onClick:()=>c("/dashboard/inventory"),className:"pq-btn",children:[r.jsx(dd,{})," Inventory"]}),r.jsxs("button",{onClick:()=>f(),className:"pq-btn",children:[r.jsx(WD,{})," Newton's AI"]}),r.jsxs("button",{onClick:()=>c("/dashboard/distributors"),className:"pq-btn",children:[r.jsx(dd,{})," Distributors"]})]}),r.jsxs("div",{className:"pq-search-wrap",children:[r.jsx(En,{className:"pq-search-icon"}),r.jsx("input",{className:"pq-search-input",placeholder:"Search orders...",value:n,onChange:R=>a(R.target.value)})]})]}),r.jsxs("div",{className:"pq-card",children:[r.jsxs("div",{className:"pq-card-content",children:[i&&t.length===0&&r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3].map(R=>r.jsx(te,{height:40,className:"mb-2"},R))}),o&&r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]}),!i&&!o&&t.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."}),!i&&t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pq-table-wrapper",children:r.jsxs("table",{className:"pq-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map(R=>r.jsxs("tr",{className:"pq-row",onClick:()=>A(R),onMouseEnter:()=>g(R.patientId),children:[r.jsxs("td",{children:[r.jsx("div",{className:"pq-text-bold",children:R.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",R.patientTokenNumber]})]}),r.jsx("td",{children:r.jsxs("div",{className:"pq-nested-table-wrap",children:[r.jsx("table",{className:"pq-nested-table",children:r.jsx("tbody",{children:R.medications.map((q,U)=>r.jsxs("tr",{children:[r.jsx("td",{className:"pq-text-bold",children:q.name}),r.jsxs("td",{children:[q.pack_quantity>0&&`Pack: ${q.pack_quantity} `,q.loose_quantity>0&&`Loose: ${q.loose_quantity}`]}),r.jsx("td",{className:"pq-text-sm",children:q.directions_to_use})]},U))})}),R.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"mt-1 text-xs opacity-75 pq-markdown",children:[r.jsx("strong",{children:"Note:"})," ",r.jsx(fd,{remarkPlugins:[pd],children:R.prescriptionForUnavailableDrugs})]})]})}),r.jsx("td",{className:"pq-text-sm",children:new Date(R.date).toLocaleDateString()}),r.jsxs("td",{className:"pq-text-mono pq-text-bold",children:["",Number(R.order_total||0).toFixed(2)]}),r.jsx("td",{children:r.jsx("span",{className:I(R.status),children:R.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pq-actions",children:[R.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:q=>{q.stopPropagation(),C(R.id)},className:"pq-action-btn pq-btn-edit",children:[r.jsx(qi,{size:12})," Edit"]}),r.jsxs("button",{onClick:q=>{q.stopPropagation(),k(R.id)},className:"pq-action-btn pq-btn-bill",children:[r.jsx(ud,{size:12})," Bill"]})]}),R.status==="billed"&&r.jsxs("button",{onClick:q=>{q.stopPropagation(),P(R.id,"dispensed")},className:"pq-action-btn pq-btn-dispense",children:[r.jsx(Wo,{size:12})," Dispense"]}),(R.status==="pending"||R.status==="billed")&&r.jsx("button",{onClick:q=>{q.stopPropagation(),P(R.id,"cancelled")},className:"pq-action-btn pq-btn-cancel",children:"Cancel"}),r.jsx("button",{onClick:q=>{q.stopPropagation(),A(R)},onMouseEnter:()=>g(R.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})]})})]},R.id))})]})}),r.jsx("div",{className:"pq-card-list",children:t.map(R=>r.jsxs("div",{className:"pq-mobile-card",onClick:()=>A(R),onMouseEnter:()=>g(R.patientId),children:[r.jsxs("div",{className:"pq-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pq-text-bold",children:R.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",R.patientTokenNumber]})]}),r.jsx("span",{className:I(R.status),children:R.status})]}),r.jsx("div",{className:"mb-2",children:R.medications.slice(0,3).map((q,U)=>r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[q.name," (",q.pack_quantity>0?`${q.pack_quantity}p`:""," ",q.loose_quantity>0?`${q.loose_quantity}l`:"",")"]},U))}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("div",{className:"pq-text-mono pq-text-bold",children:["",Number(R.order_total||0).toFixed(2)]}),r.jsx("div",{className:"pq-actions",children:r.jsx("button",{onClick:q=>{q.stopPropagation(),A(R)},onMouseEnter:()=>g(R.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})})]})]},R.id))})]})]}),!i&&j>1&&r.jsxs("div",{className:"pq-footer px-4 pb-4",children:[r.jsxs("div",{className:"pq-page-info",children:["Page ",x," of ",j]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"pq-pagination-btn",disabled:x===1,onClick:()=>b(R=>Math.max(1,R-1)),children:r.jsx(Eb,{size:16})}),r.jsx("button",{className:"pq-pagination-btn",disabled:x===j,onClick:()=>b(R=>Math.min(j,R+1)),children:r.jsx(yd,{size:16})})]})]})]})]})},YA=10,jIe=3,IG=({isEmbedded:t=!1,initialSearch:e=""})=>{const n=Lt(),{customColumnsConfig:a,refetch:i}=oS(),s=a.drugs||[],[o,l]=v.useState(!1),[c,u]=v.useState(!1),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(e),[w,_]=v.useState(!0),[T,C]=v.useState(null),[A,k]=v.useState(new Set),[P,I]=v.useState("all"),R=async()=>{try{const ke=await le("/api/inventory/download-csv");if(!ke.ok)throw new Error(`Failed to download CSV: ${ke.statusText}`);const ot=await ke.blob(),Tt=window.URL.createObjectURL(ot),Ue=document.createElement("a");Ue.href=Tt,Ue.download="pharmacy_inventory.csv",document.body.appendChild(Ue),Ue.click(),Ue.remove(),window.URL.revokeObjectURL(Tt)}catch(ke){console.error("Failed to download CSV:",ke),C(ke.message||"Failed to download inventory CSV. Please try again.")}},[q,U]=v.useState(!1),[F,B]=v.useState(!1),[V,W]=v.useState(null),[G,z]=v.useState(!1),[Y,Q]=v.useState(new Set),[K,$]=v.useState(1),ie=8,[xe,X]=v.useState(null),[Ie,$e]=v.useState(0),[Be,Le]=v.useState(!1),[ce,Se]=v.useState(null),[Ve,Ae]=v.useState(1),[ue,Te]=v.useState(!1),oe=K*ie,be=oe-ie,_e=g.slice(be,oe),Ne=Math.ceil(g.length/ie);v.useEffect(()=>{$(1)},[b,P]);const ee=v.useCallback(async()=>{_(!0),C(null);try{const ke=await le("/api/drugs");if(!ke.ok)throw new Error(`Failed to fetch drugs: ${ke.statusText} (${ke.status})`);const ot=await ke.json();let Tt=Array.isArray(ot)?ot:ot.drugs||[];Tt=Tt.map(Ue=>({...Ue,mrp:parseFloat(String(Ue.mrp))||0,rate:Ue.rate!==null&&Ue.rate!==void 0?parseFloat(String(Ue.rate)):null,stock:parseInt(String(Ue.stock),10)||0,gst:Ue.gst!==null&&Ue.gst!==void 0?parseFloat(String(Ue.gst)):null,margin:Ue.margin!==null&&Ue.margin!==void 0?parseFloat(String(Ue.margin)):null,discount:Ue.discount!==null&&Ue.discount!==void 0?parseFloat(String(Ue.discount)):null})),p(Tt),x(Tt)}catch(ke){console.error("Failed to fetch drugs:",ke),C(ke.message||"Failed to load inventory. Please try again.")}finally{_(!1)}},[]);v.useEffect(()=>{ee()},[ee]),v.useEffect(()=>{e&&j(e)},[e]);const ge=v.useMemo(()=>new uo(f,{keys:["name","brand_name","description","supplier","box_number"],threshold:.3,ignoreLocation:!0}),[f]);v.useEffect(()=>{let ke=f;b&&(ke=ge.search(b).map(Ue=>Ue.item));const ot=new Date,Tt=ZOe(ot,jIe);P==="low-stock"?ke=ke.filter(Ue=>Ue.stock<=YA):P==="near-expiry"?ke=ke.filter(Ue=>{if(!Ue.expiry_date)return!1;const jt=$z(Ue.expiry_date);return AD(jt)&&HA(jt,Tt)&&!HA(jt,ot)}):P==="expired"&&(ke=ke.filter(Ue=>{if(!Ue.expiry_date)return!1;const jt=$z(Ue.expiry_date);return AD(jt)&&HA(jt,ot)})),x(ke)},[b,f,P,ge]);const de=()=>{U(!1),X(null)},ae=ke=>{$e(parseInt(ke.target.value,10)||0)},ne=async ke=>{if(ke.preventDefault(),C(null),!xe||!xe.id||Ie===0){C("No drug selected or adjustment amount is zero.");return}try{const ot=await le(`/api/drugs/${xe.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:Ie})});if(!ot.ok){const Ue=await ot.json();throw new Error(Ue.message||`Failed to adjust stock: ${ot.statusText}`)}const Tt=await ot.json();p(Ue=>Ue.map(jt=>jt.id===Tt.id?Tt:jt)),de()}catch(ot){console.error("Failed to adjust stock:",ot),C(ot.message||"Failed to adjust stock. Please try again.")}},se=ke=>{W(ke),B(!0)},je=()=>{B(!1),W(null)},Ee=async()=>{if(!V||!V.id){C("No drug selected for deletion.");return}_(!0),C(null);try{const ke=await le(`/api/drugs/${V.id}`,{method:"DELETE"});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete drug: ${ke.statusText}`)}ee(),je()}catch(ke){console.error("Failed to delete drug:",ke),C(ke.message||"Failed to delete drug. Please try again.")}finally{_(!1)}},J=()=>{z(!0)},ye=()=>{z(!1)},[me,he]=v.useState(!1),De=()=>{Y.size>0&&he(!0)},nt=()=>{he(!1)},Fe=async()=>{if(Y.size===0){C("No drugs selected for deletion.");return}_(!0),C(null);try{const ke=await le("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(Y)})});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete selected drugs: ${ke.statusText}`)}ee(),Q(new Set),nt()}catch(ke){console.error("Failed to delete selected drugs:",ke),C(ke.message||"Failed to delete selected drugs. Please try again.")}finally{_(!1)}},Ge=async()=>{_(!0),C(null);try{const ke=await le("/api/drugs/all",{method:"DELETE"});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete all drugs: ${ke.statusText}`)}ee(),ye()}catch(ke){console.error("Failed to delete all drugs:",ke),C(ke.message||"Failed to delete all drugs. Please try again.")}finally{_(!1)}},it=ke=>{if(!ke)return null;const ot=ke.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return ot?parseInt(ot[1],10):null},wt=ke=>{Se(ke),Ae(1),Le(!0)},we=()=>{Le(!1),Se(null),Ae(1)},Qe=ke=>{Ae(parseInt(ke.target.value,10)||0)},Xe=async ke=>{if(ke.preventDefault(),C(null),!ce||!ce.id||Ve<=0){C("No drug selected or invalid number of packs to convert.");return}const ot=it(ce.pack);if(!ot||ot<=0){C(`Cannot convert "${ce.name}" to loose. Invalid pack unit: ${ce.pack||"N/A"}.`);return}if(Ve>(ce.stock??0)){C(`Cannot convert ${Ve} packs. Only ${ce.stock??0} packs are in stock.`);return}try{const Tt=await le(`/api/drugs/${ce.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:Ve,packSize:ot})});if(!Tt.ok){const jt=await Tt.json();throw new Error(jt.message||`Failed to convert to loose: ${Tt.statusText}`)}const Ue=await Tt.json();p(jt=>jt.map(kt=>kt.id===Ue.id?Ue:kt)),we()}catch(Tt){console.error("Failed to convert to loose:",Tt),C(Tt.message||"Failed to convert to loose. Please try again.")}finally{_(!1)}},ut=()=>{Te(!0)},Ct=()=>{Te(!1)},bt=async()=>{_(!0),C(null);try{const ke=await le("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to add default medications: ${ke.statusText}`)}ee(),Ct()}catch(ke){console.error("Failed to add default medications:",ke),C(ke.message||"Failed to add default medications. Please try again.")}finally{_(!1)}};return w?r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsx("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[1,2,3,4].map(ke=>r.jsx(te,{width:120,height:36},ke))}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsx(te,{width:100,height:36}),[1,2,3,4].map(ke=>r.jsx(te,{width:120,height:36},ke))]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsx(te,{width:"100%",height:40,style:{maxWidth:"600px"}}),r.jsx(te,{width:150,height:40})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx(te,{width:20,height:20})}),r.jsx("th",{children:"DRUG DETAILS"}),r.jsx("th",{children:"PACK"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{className:"qty-header",children:"STOCK"}),r.jsx("th",{className:"mrp-header",children:"MRP"}),r.jsx("th",{className:"rate-header",children:"RATE"}),r.jsx("th",{children:"BOX"}),r.jsx("th",{children:"DISC %"}),r.jsx("th",{children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ke=>r.jsxs("tr",{children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx(te,{width:20,height:20})}),r.jsxs("td",{children:[r.jsx(te,{width:"80%",height:20}),r.jsx(te,{width:"40%",height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsxs("td",{children:[r.jsx(te,{width:40,height:20}),r.jsx(te,{width:60,height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:40,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(te,{width:20,height:20}),r.jsx(te,{width:20,height:20}),r.jsx(te,{width:20,height:20})]})})]},ke))})]})})]}):T?r.jsxs("div",{className:"error-indicator",children:["Error: ",T]}):r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline add-drug-button",children:[r.jsx(Ds,{size:18}),"Add New Drug"]}),r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline",children:[r.jsx(Ds,{size:18}),"Purchase Page"]}),r.jsxs("button",{onClick:()=>n("/dashboard/distributors"),className:"action-button-outline",children:[r.jsx(Ds,{size:18}),"Distributors"]}),r.jsxs("button",{onClick:()=>l(!0),className:"action-button-outline",title:"Manage Custom Columns",children:[r.jsx(hd,{size:18}),"Columns"]})]}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>u(!1),className:`view-mode-btn ${c?"":"active"}`,title:"List View",children:[r.jsx(Pb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>u(!0),className:`view-mode-btn ${c?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(wf,{size:18})," Excel"]})]}),r.jsx("button",{onClick:R,className:"action-button-outline",children:"Download CSV"}),r.jsxs("button",{onClick:ut,className:"action-button-outline",children:[r.jsx(Ds,{size:18}),"Import Defaults"]}),r.jsxs("button",{onClick:De,className:"action-button-outline delete-button-outline",disabled:Y.size===0,children:[r.jsx(Wn,{size:18}),"Delete (",Y.size,")"]}),r.jsxs("button",{onClick:J,className:"action-button-outline delete-all-button-outline",children:[r.jsx(Wn,{size:18}),"Delete All"]})]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsxs("div",{className:"search-input-wrapper",style:{maxWidth:"600px"},children:[r.jsx(En,{size:20,className:"search-input-icon"}),r.jsx("input",{type:"text",placeholder:"Search drugs...",value:b,onChange:ke=>j(ke.target.value),className:"inventory-search-input"})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("select",{value:P,onChange:ke=>I(ke.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})})]}),c?r.jsx("div",{className:"inventory-table-container",style:{padding:"1rem"},children:r.jsx(zb,{title:"Pharmacy Inventory",columns:[{key:"name",label:"Drug Name",type:"text",editable:!0},{key:"brand_name",label:"Brand Name",type:"text",editable:!0},{key:"pack",label:"Pack",type:"text",editable:!0},{key:"expiry_date",label:"Expiry",type:"date",editable:!0},{key:"stock",label:"Stock",type:"number",editable:!0},{key:"mrp",label:"MRP",type:"number",editable:!0},{key:"rate",label:"Rate",type:"number",editable:!0},{key:"box_number",label:"Box",type:"text",editable:!0},{key:"discount",label:"Discount %",type:"number",editable:!0},{key:"gst",label:"GST %",type:"number",editable:!0},{key:"supplier",label:"Supplier",type:"text",editable:!0}],data:g,onSave:async ke=>{try{for(const ot of ke)ot.id&&await le(`/api/drugs/${ot.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)});ee()}catch(ot){console.error("Failed to save:",ot),C(ot.message||"Failed to save changes")}},editable:!0,showRowNumbers:!0})}):r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx("input",{type:"checkbox",onChange:ke=>{if(ke.target.checked){const ot=new Set(g.map(Tt=>Tt.id));Q(ot)}else Q(new Set)},checked:Y.size===g.length&&g.length>0,disabled:g.length===0})}),r.jsx("th",{className:"drug-name-header",children:"DRUG DETAILS"}),r.jsx("th",{className:"pack-header",children:"PACK"}),r.jsx("th",{className:"expiry-header",children:"EXPIRY"}),r.jsx("th",{className:"text-stock qty-header",children:"STOCK"}),r.jsx("th",{className:"text-price mrp-header",children:"MRP"}),r.jsx("th",{className:"text-cost rate-header",children:"RATE"}),r.jsx("th",{className:"box-number-header",children:"BOX"}),r.jsx("th",{className:"discount-header",children:"DISC %"}),r.jsx("th",{className:"margin-header",children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsxs("tbody",{children:[g.length===0&&r.jsx("tr",{className:"no-results-message",children:r.jsx("td",{colSpan:11,children:"No drugs found matching your search."})}),_e.map(ke=>r.jsxs(Ce.Fragment,{children:[r.jsxs("tr",{className:"drug-row",onClick:()=>{const ot=new Set(A);ot.has(ke.id)&&ke.id!==void 0?ot.delete(ke.id):ke.id!==void 0&&ot.add(ke.id),k(ot)},children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx("input",{type:"checkbox",onClick:ot=>ot.stopPropagation(),checked:Y.has(ke.id),onChange:()=>{const ot=new Set(Y);ot.has(ke.id)?ot.delete(ke.id):ot.add(ke.id),Q(ot)}})}),r.jsx("td",{className:"drug-name-cell",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("span",{className:"text-xs text-muted-foreground",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:ke.name})]})}),r.jsx("td",{className:"text-muted pack-cell",children:ke.pack||"-"}),r.jsx("td",{className:"text-muted",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"}),r.jsxs("td",{className:`text-stock ${ke.stock<=YA?"low-stock":""}`,children:[r.jsx("div",{style:{fontWeight:"bold"},children:ke.stock}),r.jsx("div",{className:"loose-quantity",children:ke.loose!==null&&ke.loose!==void 0?`${ke.loose} loose`:"0 loose"})]}),r.jsxs("td",{className:"text-muted text-price",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]}),r.jsx("td",{className:"text-muted text-cost",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"}),r.jsx("td",{className:"text-muted",children:ke.box_number||"-"}),r.jsx("td",{className:"text-muted",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"}),r.jsx("td",{className:"text-muted",children:(()=>{const ot=ke.mrp||0,Tt=ke.rate||0,Ue=ke.discount||0,jt=ke.gst||0,Kn=Tt*(1-Ue/100)*(1+jt/100),vt=ot-Kn;return`${(ot>0?vt/ot*100:0).toFixed(2)}%`})()}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:ot=>{ot.stopPropagation(),n(`/dashboard/inventory/edit/${ke.id}`)},className:"action-icon-button",title:"Edit Drug",children:r.jsx(qi,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),se(ke)},className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(Wn,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),X(ke),U(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:r.jsx(DI,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),wt(ke)},className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!ke.pack||it(ke.pack)===null,children:r.jsx(LI,{size:16})})]})})]}),A.has(ke.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:11,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",ke.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",ke.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Batch:"})," ",ke.batch||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"HSN Code:"})," ",ke.hsn_code||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"MFG:"})," ",ke.mfg||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose Price:"}),(()=>{const ot=it(ke.pack);return ot&&ot>0&&typeof ke.mrp=="number"?`${(ke.mrp/ot).toFixed(2)}`:"N/A"})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"GST:"})," ",ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(ke.last_updated).toLocaleString()]}),s.length>0&&r.jsx("div",{className:"custom-fields-display",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px dashed var(--border-color)"},children:s.map(ot=>{var Tt;return r.jsxs("p",{children:[r.jsxs("strong",{children:[ot.label,":"]})," ",(Tt=ke.custom_fields)!=null&&Tt[ot.key]?String(ke.custom_fields[ot.key]):"-"]},ot.key)})})]})})})]},ke.id))]})]})}),r.jsx("div",{className:`inventory-grid-mobile ${t?"embedded":""}`,style:{display:c?"none":void 0},children:g.length===0?r.jsx("div",{className:"inventory-card-empty",children:"No drugs found matching your search."}):_e.map(ke=>r.jsxs("div",{className:"inventory-card",onClick:()=>{const ot=new Set(A);ot.has(ke.id)&&ke.id!==void 0?ot.delete(ke.id):ke.id!==void 0&&ot.add(ke.id),k(ot)},children:[r.jsxs("div",{className:"inventory-card-header",children:[r.jsxs("div",{className:"inventory-card-drug-info",children:[r.jsx("h4",{className:"inventory-card-drug-name",children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("div",{className:"inventory-card-brand-name",children:ke.name})]}),r.jsx("div",{className:"inventory-card-checkbox",onClick:ot=>ot.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:Y.has(ke.id),onChange:()=>{const ot=new Set(Y);ot.has(ke.id)?ot.delete(ke.id):ot.add(ke.id),Q(ot)}})})]}),r.jsxs("div",{className:"inventory-card-body",children:[r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Stock"}),r.jsxs("span",{className:`inventory-card-field-value stock-value ${ke.stock<=YA?"stock-low":""}`,children:[ke.stock,r.jsxs("span",{className:"inventory-card-loose",children:[" (",ke.loose??0," loose)"]})]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"MRP"}),r.jsxs("span",{className:"inventory-card-field-value price-value",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Pack"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.pack||"-"})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Expiry"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"})]})]}),A.has(ke.id)&&r.jsxs("div",{className:"inventory-card-expanded",children:[r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Rate"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Box"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.box_number||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Supplier"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.supplier||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Batch"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.batch||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"HSN Code"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.hsn_code||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Discount"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"GST"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"})]}),s.length>0&&s.map(ot=>{var Tt;return r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:ot.label}),r.jsx("span",{className:"inventory-card-expanded-value",children:(Tt=ke.custom_fields)!=null&&Tt[ot.key]?String(ke.custom_fields[ot.key]):"-"})]},ot.key)})]}),r.jsxs("div",{className:"inventory-card-actions",onClick:ot=>ot.stopPropagation(),children:[r.jsxs("button",{className:"inventory-card-action-btn btn-edit",onClick:()=>n(`/dashboard/inventory/edit/${ke.id}`),title:"Edit Drug",children:[r.jsx(qi,{size:14}),"Edit"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-delete",onClick:()=>se(ke),title:"Delete Drug",children:[r.jsx(Wn,{size:14}),"Delete"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-adjust",onClick:()=>{X(ke),U(!0)},title:"Adjust Stock",children:[r.jsx(DI,{size:14}),"Adjust"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-convert",onClick:()=>wt(ke),title:"Convert to Loose",disabled:!ke.pack||it(ke.pack)===null,children:[r.jsx(LI,{size:14}),"Loose"]})]})]},ke.id))}),Ne>1&&r.jsxs("div",{className:"pagination-controls",style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",backgroundColor:"var(--card-bg, #fff)",borderTop:"1px solid var(--border-color)"},children:[r.jsx("button",{onClick:()=>$(ke=>Math.max(ke-1,1)),disabled:K===1,className:"pagination-button",children:"Previous"}),r.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Page ",K," of ",Ne]}),r.jsx("button",{onClick:()=>$(ke=>Math.min(ke+1,Ne)),disabled:K===Ne,className:"pagination-button",children:"Next"})]}),F&&V&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:je,className:"modal-close-button",children:r.jsx(Rt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:V.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:je,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ee,className:"button-delete",children:"Delete"})]})]})}),q&&xe&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:de,className:"modal-close-button",children:r.jsx(Rt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:xe.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Stock: ",xe.stock]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:ne,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:Ie===0?"":Ie,onChange:ae,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:de,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),G&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ye,className:"modal-close-button",children:r.jsx(Rt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ye,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ge,className:"button-delete",children:"Delete All"})]})]})}),me&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:nt,className:"modal-close-button",children:r.jsx(Rt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:Y.size})," selected drug(s)? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:nt,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Fe,className:"button-delete",children:"Delete Selected"})]})]})}),Be&&ce&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:we,className:"modal-close-button",children:r.jsx(Rt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Convert to Loose"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:ce.name||"Unnamed Drug"}),r.jsx("br",{}),"Pack Size: ",ce.pack,r.jsx("br",{}),"Current Stock: ",ce.stock," packs, ",ce.loose??0," loose units."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:Xe,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"packsToConvert",className:"form-label",children:"Packs to Convert"}),r.jsx("input",{type:"number",name:"packsToConvert",id:"packsToConvert",required:!0,step:"1",min:"1",max:ce.stock,value:Ve===0?"":Ve,onChange:Qe,className:"form-input"}),r.jsxs("p",{className:"form-help-text",children:["Converting ",Ve," pack(s) will add ",Ve*(it(ce.pack)||0)," loose units."]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:we,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Convert"})]})]})]})}),ue&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ct,className:"modal-close-button",children:r.jsx(Rt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),r.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ct,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:bt,className:"button-submit",children:"Add Defaults"})]})]})}),r.jsx(zM,{isOpen:o,onClose:()=>l(!1),entityType:"drugs",entityLabel:"Pharmacy Drugs",currentConfig:a,onConfigUpdated:()=>{i()}})]})},wIe=()=>{const t=Lt();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},RG=()=>{const{id:t}=$a(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null),j=v.useCallback(async()=>{if(!t){l("Drug ID is missing."),s(!1);return}s(!0),l(null);try{const C=await le(`/api/drugs/${t}`);if(!C.ok){const k=await C.json();throw new Error(k.message||`Failed to fetch drug: ${C.statusText}`)}let A=await C.json();A={...A,name:A.name||"",brand_name:A.brand_name||"",mrp:parseFloat(String(A.mrp))||0,rate:A.rate!==null&&A.rate!==void 0?parseFloat(String(A.rate)):null,stock:parseInt(String(A.stock),10)||0,gst:A.gst!==null&&A.gst!==void 0?parseFloat(String(A.gst)):null,margin:A.margin!==null&&A.margin!==void 0?parseFloat(String(A.margin)):null,discount:A.discount!==null&&A.discount!==void 0?parseFloat(String(A.discount)):null,batch:A.batch||"",hsn_code:A.hsn_code||"",mfg:A.mfg||"",loose:A.loose!==null&&A.loose!==void 0?parseInt(String(A.loose),10):null},a(A)}catch(C){console.error("Failed to fetch drug:",C),l(C.message||"Failed to load drug data. Please try again.")}finally{s(!1)}},[t]);v.useEffect(()=>{j()},[j]),v.useEffect(()=>{const C=k=>{k.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var P;(P=b.current)==null||P.focus()},0),k.preventDefault()))},A=k=>{g.current&&!g.current.contains(k.target)&&p(!1)};return document.addEventListener("keydown",C),document.addEventListener("mousedown",A),()=>{document.removeEventListener("keydown",C),document.removeEventListener("mousedown",A)}},[f]);const w=C=>{const{name:A,value:k,type:P}=C.target;a(I=>I?{...I,[A]:P==="number"?parseFloat(k)||null:k}:null)},_=()=>{e(-1)},T=async C=>{if(C.preventDefault(),l(null),u(!0),!n||!n.id){l("Cannot edit drug: No drug data available."),u(!1);return}if(n.mrp===void 0||n.stock===void 0){l("MRP and Stock Quantity are required."),u(!1);return}const A={...n,name:n.name===""?null:n.name,brand_name:n.brand_name===""?null:n.brand_name,rate:n.rate===0?null:n.rate,expiry_date:n.expiry_date===""?null:n.expiry_date,gst:n.gst===0?null:n.gst,margin:n.margin===0?null:n.margin,discount:n.discount===0?null:n.discount,batch:n.batch===""?null:n.batch,hsn_code:n.hsn_code===""?null:n.hsn_code,mfg:n.mfg===""?null:n.mfg,loose:n.loose===0?null:n.loose};try{const k=await le(`/api/drugs/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!k.ok){const P=await k.json();throw new Error(P.message||`Failed to update drug: ${k.statusText}`)}await k.json(),e(-1)}catch(k){console.error("Failed to update drug:",k),l(k.message||"Failed to update drug. Please try again.")}finally{u(!1)}};return i?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):o&&!n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",o]})}):n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",n.name]}),r.jsx("button",{onClick:_,className:"cancel-button",title:"Go Back",children:r.jsx(Rt,{size:24})})]}),o&&r.jsx("div",{className:"error-message-submit",children:o}),r.jsxs("form",{onSubmit:T,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Dl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",value:n.name||"",onChange:w,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Dl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:n.brand_name||"",onChange:w,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Dl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"edit-mrp",required:!0,step:"0.01",min:"0",value:n.mrp||"",onChange:w,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Dl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"edit-stock",required:!0,step:"1",min:"0",value:n.stock||"",onChange:w,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"edit-pack",value:n.pack||"",onChange:w,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:n.expiry_date||"",onChange:w,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:n.box_number||"",onChange:w,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:n.description||"",onChange:w,className:"custom-text-input",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:n.supplier||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"edit-rate",step:"0.01",min:"0",value:n.rate??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:b})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:n.gst??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:n.margin??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:n.discount??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:n.batch||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:n.hsn_code||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:n.mfg||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),r.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:n.loose??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:_,disabled:c,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:20,children:c?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},NIe=({clinicId:t})=>{const e=Lt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,u]=v.useState([]),[f,p]=v.useState(!0),g=async()=>{try{const w=await le("/api/clinic-roles");if(w.ok){const _=await w.json();u(_)}}catch(w){console.error("Failed to fetch roles:",w)}finally{p(!1)}};v.useEffect(()=>{s(t?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly."),g()},[t]);const x=w=>{const{name:_,value:T}=w.target;a(C=>{const A={...C,[_]:T};return _==="role"&&T!=="doctor"&&(A.opd_fee=""),A})},b=async w=>{if(w.preventDefault(),s(null),!n.name||!n.email||!n.role||!n.password){s("Name, Email, Role, and Password are required.");return}if(!t){s("Clinic information is missing. Cannot add staff.");return}const _={...n,clinic_id:t,opd_fee:n.role==="doctor"&&n.opd_fee?parseFloat(String(n.opd_fee)):null};if(_.role==="doctor"&&n.opd_fee&&isNaN(_.opd_fee)){s("Invalid OPD Fee format. Please enter a number.");return}l(!0);try{const T=await le("/api/staff",{method:"POST",body:JSON.stringify(_)});if(!T.ok){const C=await T.json();throw new Error(C.message||"Server responded with an error")}e(-1)}catch(T){s(`Failed to add staff: ${T.message}`)}finally{l(!1)}},j=()=>{e(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:j,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(sn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Fr,{size:18,className:"mr-2 text-red-500"}),i]}),r.jsxs("form",{onSubmit:b,className:`staff-form ${t?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:n.name||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:n.email||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:x,required:!0,disabled:o||!t||f,children:f?r.jsx("option",{value:"",children:"Loading roles..."}):c.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):c.map(w=>r.jsx("option",{value:w.key,children:w.name},w.key))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:n.password||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Create a password"})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:n.opd_fee||"",onChange:x,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:o||!t}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:o||!t,children:[o?r.jsx(lo,{size:18,className:"animate-spin mr-2"}):r.jsx(Vn,{size:18,className:"mr-2"}),o?"Adding...":"Add Staff Member"]})]})]})},SIe=()=>{const{id:t}=$a(),e=Lt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState([]),[w,_]=v.useState(!0),T=async()=>{try{const I=await le("/api/clinic-roles");if(I.ok){const R=await I.json();j(R)}}catch(I){console.error("Failed to fetch roles:",I)}finally{_(!1)}},C=v.useCallback(async()=>{if(!t){p("Staff ID is missing."),l(!1);return}l(!0),p(null),x(null);try{const I=await le(`/staff/${t}`);if(!I.ok){const q=await I.json();throw new Error(q.message||`HTTP error! status: ${I.status}`)}const R=await I.json();a({name:R.name,email:R.email,role:R.role,opd_fee:R.opd_fee??"",active:R.active})}catch(I){p(`Failed to load staff details: ${I.message}`)}finally{l(!1)}},[t]);v.useEffect(()=>{C(),T()},[C]);const A=I=>{const{name:R,value:q,type:U}=I.target;if(U==="checkbox"){const{checked:F}=I.target;a(B=>({...B,[R]:F}))}else a(F=>({...F,[R]:q}))},k=I=>{s(I.target.value)},P=async I=>{if(I.preventDefault(),!t){p("Staff ID is missing.");return}u(!0),p(null),x(null);const R={name:n.name,email:n.email,role:n.role,active:n.active};if(n.role==="doctor"){const q=n.opd_fee?parseFloat(String(n.opd_fee)):null;if(q!==null&&isNaN(q)){p("OPD Fee must be a valid number."),u(!1);return}R.opd_fee=q}else R.opd_fee=null;i.trim()!==""&&(R.password=i.trim());try{const q=await le(`/staff/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!q.ok){const U=await q.json();throw new Error(U.message||`HTTP error! status: ${q.status}`)}x("Staff details updated successfully!"),s(""),setTimeout(()=>e(-1),1500)}catch(q){p(`Failed to update staff: ${q.message}`)}finally{u(!1)}};return o?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(lo,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(sn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),f&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Fr,{size:18,className:"mr-2 text-red-500"}),f,r.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),g&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}),g,r.jsx("button",{onClick:()=>x(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),r.jsxs("form",{onSubmit:P,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:A,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email||"",onChange:A,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:A,required:!0,disabled:w,children:w?r.jsx("option",{value:"",children:"Loading roles..."}):b.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]}):b.map(I=>r.jsx("option",{value:I.key,children:I.name},I.key))})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:n.opd_fee||"",onChange:A,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:n.active??!0,onChange:A}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:i,onChange:k,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(lo,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Bi,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},Bz=()=>{const{patientId:t}=$a(),e=Lt(),[n,a]=v.useState([]),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,u]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){u("Patient ID not provided.");return}l(!0),u(null);try{const g=await le(`/api/patients/${t}`);if(!g.ok)throw new Error(`Failed to fetch patient details: ${g.status}`);const x=await g.json();s({name:x.name,age:x.age,gender:x.gender});const b=await le(`/api/patients/${t}/complaints`);if(b.ok){const w=(await b.json()).sort((_,T)=>new Date(T.createdAt).getTime()-new Date(_.createdAt).getTime());a(w)}else if(b.status===404)a([]);else throw new Error(`Failed to fetch complaints: ${b.status}`)}catch(g){console.error("Error fetching past complaints or patient info:",g),u(`Failed to load data. ${g.message}`),a([]),s(null)}finally{l(!1)}})()},[t]);const f=p=>{navigator.clipboard.writeText(p).then(()=>console.log("Complaint copied to clipboard")).catch(g=>console.error("Failed to copy complaint: ",g))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:i.name})," (",i.age??"N/A"," / ",i.gender??"N/A",")"]}),c&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",c]}),o&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!o&&n.length===0&&!c&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!o&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(p.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.complaint}),r.jsx("button",{onClick:()=>f(p.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},p.id))})]})},_Ie=t=>{if(t===0)return"Zero";const e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],a=l=>l===0?"":l<20?e[l]:l<100?n[Math.floor(l/10)]+(l%10?" "+e[l%10]:""):e[Math.floor(l/100)]+" Hundred"+(l%100?" and "+a(l%100):""),i=Math.floor(t),s=Math.round((t-i)*100);let o="";return i>=1e7&&(o+=a(Math.floor(i/1e7))+" Crore "),i>=1e5&&(o+=a(Math.floor(i%1e7/1e5))+" Lakh "),i>=1e3&&(o+=a(Math.floor(i%1e5/1e3))+" Thousand "),i>=100&&(o+=a(Math.floor(i%1e3/100))+" Hundred "),i%100&&(o+=(o?"and ":"")+a(i%100)),o=o.trim()+" Rupees",s>0&&(o+=" and "+a(s)+" Paise"),o+" Only"},CIe=t=>{const e=typeof t=="string"?parseInt(t,10):t;return`INV-${String(e).padStart(6,"0")}`},KA=500,qz="defaultConsultationFee",TIe=({patientId:t,billId:e,queueId:n,onBillCreated:a,onBillUpdated:i,initialItems:s=[],billType:o="other",relatedId:l,initialStatus:c="pending",initialDiscountPercentage:u=0,readOnlyMode:f=!1,doctorId:p,labOrderId:g,patientInsuranceType:x})=>{const[b,j]=v.useState(null),[w,_]=v.useState([]),T=v.useRef([]),[C,A]=v.useState(""),[k,P]=v.useState(""),[I,R]=v.useState(1),[q,U]=v.useState(u),[F,B]=v.useState("cash"),[V,W]=v.useState(!1),[G,z]=v.useState(null),[Y,Q]=v.useState(!1),[K,$]=v.useState(!1),[ie,xe]=v.useState(!1),[X,Ie]=v.useState(null),[$e,Be]=v.useState([]),[Le,ce]=v.useState(null),[Se,Ve]=v.useState(""),[Ae,ue]=v.useState("cash"),[Te,oe]=v.useState(!1),[be,_e]=v.useState(!1),[Ne,ee]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),ge=()=>{Ne.length<5&&ee(et=>[...et,{id:Date.now().toString(),method:"cash",amount:0}])},de=et=>{Ne.length>2&&ee(gt=>gt.filter(St=>St.id!==et))},ae=(et,gt,St)=>{ee(Ot=>Ot.map(Ln=>Ln.id===et?gt==="method"?{...Ln,method:St}:{...Ln,amount:Math.max(0,St)}:Ln))},ne=(et,gt)=>{const St=Ne.filter(Sn=>Sn.id!==et).reduce((Sn,Ln)=>Sn+Ln.amount,0),Ot=Math.max(0,gt-St);ee(Sn=>Sn.map(Ln=>Ln.id===et?{...Ln,amount:Ot}:Ln))},[se,je]=v.useState(null),[Ee,J]=v.useState(!1),[ye,me]=v.useState(KA),[he,De]=v.useState(KA.toString()),[nt,Fe]=v.useState(""),[Ge,it]=v.useState(""),[wt,we]=v.useState(""),[Qe,Xe]=v.useState(""),[ut,Ct]=v.useState(""),bt=e?"view_pay":"create";v.useEffect(()=>{const et=localStorage.getItem(qz),gt=et?parseFloat(et):KA;isNaN(gt)||(me(gt),De(gt.toString()))},[]);const ke=s.length===0;v.useEffect(()=>{t?(async()=>{W(!0),z(null);try{const gt=await le(`/api/patients/${t}`);if(!gt.ok){const Ot=await gt.json().catch(()=>({}));throw new Error(Ot.message||"Failed to fetch patient details")}const St=await gt.json();j(St)}catch(gt){z(`Failed to load patient details: ${gt.message}`),j(null)}finally{W(!1)}})():j(null)},[t]),v.useEffect(()=>{e?(async()=>{xe(!0),z(null),Ie(null),Be([]),ce(null);try{const gt=await le(`/api/bills/${e}`);if(!gt.ok){const Ot=await gt.json().catch(()=>({}));throw new Error(Ot.message||"Failed to fetch bill details")}const St=await gt.json();if(!St.bill||!St.payments||!St.calculated)throw new Error("Invalid bill details structure.");Ie(St.bill),Be(St.payments),ce(St.calculated),U(St.bill.discount_percentage!==void 0&&St.bill.discount_percentage!==null?parseFloat(St.bill.discount_percentage.toString()):0),St.bill.payment_mode&&B(St.bill.payment_mode),!b&&St.bill.patient_id&&ot(St.bill.patient_id.toString())}catch(gt){z(`Failed to load bill details: ${gt.message}`),Ie(null),Be([]),ce(null)}finally{xe(!1)}})():(Ie(null),Be([]),ce(null))},[e]),v.useEffect(()=>{(async()=>{try{const gt=await le("/api/clinics/settings");if(!gt.ok)throw new Error("Failed to fetch clinic settings");const St=await gt.json();Fe(St.upi_id||""),it(St.name||""),we(St.address||""),Xe(St.notes||"")}catch(gt){console.error("Error fetching clinic settings:",gt)}})()},[]);const ot=async et=>{W(!0);try{const gt=await le(`/api/patients/${et}`);if(!gt.ok)throw new Error("Failed to fetch patient");const St=await gt.json();j(St)}catch(gt){console.error("Error fetching patient details:",gt),j(null)}finally{W(!1)}},Tt=v.useCallback(async et=>{$(!0),z(null);const gt=et.filter(St=>St.drug_id!=null).map(async St=>{try{const Ot=await le(`/api/drugs/${St.drug_id}`);if(!Ot.ok)throw new Error(`Drug ${St.drug_id} not found.`);const Sn=await Ot.json();return{...St,price:Sn.price,total:Sn.price*St.quantity}}catch{return z(Sn=>`${Sn?Sn+"; ":""}Failed to fetch price for ${St.name}`),St}});try{const St=await Promise.all(gt);_(Ot=>{const Sn=new Map(St.map(Ln=>[Ln.id,Ln]));return Ot.map(Ln=>Sn.get(Ln.id)||Ln)})}catch{}finally{$(!1)}},[le]);v.useEffect(()=>{if(e){_([]),T.current=[];return}JSON.stringify(s)===JSON.stringify(T.current)||(async()=>{let St=[];if(s&&s.length>0)St=s.map((Ot,Sn)=>({...Ot,id:`initial-${Sn}-${Date.now()}`})),B(c==="paid"?"cash":x==="no_cash_insurance"?"no_cash_insurance":"cash"),U(u),o==="pharmacy"&&!f&&await Tt(St);else if(t&&ke&&o==="consultation"){let Ot=ye;if(p)try{const Sn=await le(`/api/staff/${p}`);if(!Sn.ok){const Na=await Sn.json().catch(()=>({}));throw new Error(Na.message||"Doctor not found or error fetching fee")}const Ln=await Sn.json();Ln.opd_fee!=null&&!isNaN(parseFloat(String(Ln.opd_fee)))&&parseFloat(String(Ln.opd_fee))>=0&&(Ot=parseFloat(String(Ln.opd_fee)))}catch(Sn){z(Ln=>`${Ln?Ln+"; ":""}Could not fetch doctor's fee, using default. (${Sn.message})`)}St=[{id:Date.now(),name:"Consultation Fee",price:Ot,quantity:1,total:Ot*1,drug_id:null}],B(x==="no_cash_insurance"?"no_cash_insurance":"cash")}else St=[],B(x==="no_cash_insurance"?"no_cash_insurance":"cash");_(St),T.current=s})()},[e,t,p,s,o,ye,ke,c,f,Tt,u,x]);const Ue=()=>{const et=parseFloat(k);if(!f)if(C&&!isNaN(et)&&et>=0&&I>0){if(C.trim().toLowerCase()==="consultation fee"&&w.some(St=>St.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const gt={id:Date.now(),name:C.trim(),price:et,quantity:I,total:et*I,drug_id:null};_([...w,gt]),A(""),P(""),R(1)}else alert("Invalid item details.")},jt=et=>{f||_(w.filter(gt=>gt.id!==et))},kt=v.useMemo(()=>{let et=w.reduce((gt,St)=>gt+St.total,0);return bt==="create"&&q>0&&(et=et*(1-q/100)),(Le==null?void 0:Le.totalDue)!==void 0&&(Le==null?void 0:Le.totalDue)!==null?Le.totalDue:et},[w,Le,q,bt]),Kn=v.useMemo(()=>w.reduce((et,gt)=>et+gt.total,0),[w]),vt=v.useMemo(()=>Kn*(q/100),[Kn,q]),Dt=v.useMemo(()=>(Le==null?void 0:Le.totalPaid)??0,[Le]),Ht=v.useMemo(()=>(Le==null?void 0:Le.balance)!==void 0&&(Le==null?void 0:Le.balance)!==null?Le.balance:kt-Dt,[Le,kt,Dt]);v.useEffect(()=>{if(kt>0&&nt){const et=`upi://pay?pa=${nt}&pn=${encodeURIComponent(Ge)}&am=${kt.toFixed(2)}&cu=INR`;Ct(et)}else Ct("")},[kt,nt,Ge]),v.useEffect(()=>{(async()=>{if(F==="credit"&&t){J(!0);try{const gt=await le(`/api/patient-debts/${t}/balance`);if(gt.ok){const St=await gt.json();je(St.netDebt||0)}else je(0)}catch(gt){console.error("Error fetching patient debt:",gt),je(0)}finally{J(!1)}}})()},[F,t]);const Qn=()=>{const et=parseFloat(he);!isNaN(et)&&et>=0?(me(et),localStorage.setItem(qz,et.toString())):alert("Invalid fee amount.")},br=async(et,gt)=>{Q(!0),z(null);try{const St=await le("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:gt,billId:et})}),Ot=await St.json();if(!St.ok||!Ot.order)throw new Error(Ot.message||"Failed to create Razorpay order.");const{key_id:Sn,order:Ln}=Ot,Na={key:Sn,amount:Ln.amount,currency:Ln.currency,name:"Newtons Ai HMS Clinic",description:`Bill Payment for Patient ID: ${t}`,order_id:Ln.id,handler:async function(xi){try{const fo=await le("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:xi.razorpay_payment_id,razorpay_order_id:xi.razorpay_order_id,razorpay_signature:xi.razorpay_signature,billId:et})}),Ed=await fo.json();if(fo.ok&&Ed.success)a&&a(et),i&&i(),setTimeout(()=>window.print(),200);else throw new Error(Ed.message||"Payment verification failed.")}catch(fo){z(`Payment verification failed: ${fo.message}. Contact support.`)}finally{Q(!1)}},prefill:{name:(b==null?void 0:b.name)||""},notes:{bill_id:et,patient_id:t},theme:{color:"#3399cc"},modal:{ondismiss:function(){z("Payment cancelled."),Q(!1)}}};if(window.Razorpay)new window.Razorpay(Na).open();else throw new Error("Razorpay SDK not loaded.")}catch(St){z(`Failed to initiate online payment: ${St.message}`),Q(!1)}},Ba=async()=>{if(!e){z("Bill ID is missing.");return}const et=be?Jr:parseFloat(Se);if(isNaN(et)||et<=0){z("Please enter a valid positive payment amount.");return}oe(!0),z(null);try{if(be){for(const gt of Ne)if(gt.amount>0){const St=await le(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:gt.amount,payment_mode:gt.method})});if(!St.ok){const Ot=await St.json();throw new Error(Ot.message||`Failed to record ${gt.method} payment`)}}}else{const gt={amount_paid:et,payment_mode:Ae},St=await le(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(gt)}),Ot=await St.json();if(!St.ok)throw new Error(Ot.message||`Failed to record payment (Status: ${St.status})`)}Ve(""),be&&(ee([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),_e(!1)),i?i():console.log("Payment recorded.")}catch(gt){z(`Failed to record payment: ${gt.message}`)}finally{oe(!1)}},Jr=Ne.reduce((et,gt)=>et+gt.amount,0),wa=Math.abs(Jr-(bt==="create"?kt:Jr))<.01,pn=be?Ne.some(et=>et.method==="credit"):bt==="create"?F==="credit":Ae==="credit",qr=async()=>{if(bt==="view_pay")return;if(!t){z("Patient ID is missing for creating a bill.");return}if(w.length===0){z("Cannot finalize an empty bill.");return}if(be&&Math.abs(Jr-kt)>.01){z(`Split payment total (${Jr.toFixed(2)}) must match the bill total (${kt.toFixed(2)}).`);return}Q(!0),z(null);const et=kt,gt=w.map(({id:Ot,...Sn})=>Sn),St={patientId:t,queueId:n||null,items:gt,amount:et,paymentMode:be?"split":F==="online"?"online":F,type:o,related_id:l||g||null,status:F==="online"?"pending":be||F?"paid":"pending",discountPercentage:q,labOrderId:g||null};if(be&&(St.splitPayments=Ne.map(Ot=>({method:Ot.method,amount:Ot.amount}))),F==="online"&&!be)try{const Ot=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Sn=await Ot.json();if(!Ot.ok)throw new Error(Sn.message||"Failed to create pending bill.");br(Sn.id,Math.round(et*100))}catch(Ot){z(`Failed to create pending bill: ${Ot.message}`),Q(!1)}else{if(!F&&!be){z("Payment mode required."),Q(!1);return}setTimeout(()=>window.print(),200);try{const Ot=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Sn=await Ot.json();if(!Ot.ok)throw new Error(Sn.message||"Failed to create bill.");if(pn&&t){const Ln=be?Ne.filter(Na=>Na.method==="credit").reduce((Na,xi)=>Na+xi.amount,0):F==="credit"?et:0;if(Ln>0)try{await le(`/api/patient-debts/${t}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ln,related_bill_id:Sn.id,notes:`Bill #${Sn.id} (Credit Part)`})})}catch(Na){console.error("Failed to create debt entry:",Na)}}a&&a(Sn.id),Q(!1)}catch(Ot){z(`Failed to process bill: ${Ot.message}`),Q(!1)}}},Tn=(X==null?void 0:X.status)??c,Rn=bt==="view_pay"&&X&&Tn==="pending";return!t&&!e?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):V||bt==="view_pay"&&ie?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):bt==="view_pay"&&!X&&!ie&&G?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",G]}):bt==="create"&&!b&&!V&&G?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",G]}):r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:Ge?`${Ge}`:"Bill"}),(wt||Qe)&&r.jsxs("div",{className:"clinic-details-print",children:[wt&&r.jsx("span",{className:"small-text clinic-address",children:wt}),Qe&&r.jsx("span",{className:"small-text clinic-notes",children:Qe})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient"]})," ",(b==null?void 0:b.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]}),X&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"# Invoice"})," ",CIe(X.id)]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",b==null?void 0:b.name]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," ID"]})," ",b==null?void 0:b.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Age/Gender"]})," ",(b==null?void 0:b.age)??"N/A"," / ",(b==null?void 0:b.gender)??"N/A"]}),bt==="view_pay"&&X&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(so,{size:16})," Bill ID"]})," ",X.id]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Bill Items"}),bt==="create"&&o==="pharmacy"&&!f&&w.some(et=>et.drug_id!=null)&&r.jsxs("button",{onClick:()=>Tt(w),disabled:K,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(TE,{size:14,className:`lucide ${K?"animate-spin":""}`}),K?"Refreshing...":"Refresh"]})]}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"}),bt==="create"&&!f&&r.jsx("th",{className:"no-print",children:"Action"})]})}),r.jsxs("tbody",{children:[bt==="create"&&w.map((et,gt)=>r.jsxs("tr",{children:[r.jsx("td",{children:gt+1}),r.jsx("td",{children:et.name}),r.jsx("td",{children:et.quantity}),r.jsxs("td",{children:["",et.price.toFixed(2)]}),r.jsxs("td",{children:["",et.total.toFixed(2)]}),!f&&r.jsx("td",{className:"no-print",children:typeof et.id=="number"&&et.name!=="Consultation Fee"?r.jsxs("button",{onClick:()=>jt(et.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx(Rt,{size:16})," "]}):r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(sJ,{size:14})," "]})})]},et.id)),bt==="view_pay"&&X&&X.items.map((et,gt)=>r.jsxs("tr",{children:[r.jsx("td",{children:gt+1}),r.jsx("td",{children:et.name}),r.jsx("td",{children:et.quantity}),r.jsxs("td",{children:["",et.price.toFixed(2)]}),r.jsxs("td",{children:["",(et.total??et.price*et.quantity).toFixed(2)]})]},gt)),(bt==="create"&&w.length===0||bt==="view_pay"&&(X==null?void 0:X.items.length)===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"20px"},children:"No items added."})})]})]}),bt==="create"&&!f&&r.jsxs("div",{className:"add-item-form no-print",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item Description"}),r.jsx("input",{type:"text",value:C,onChange:et=>A(et.target.value),placeholder:"Service Name",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:I,onChange:et=>R(parseInt(et.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"100px"},children:[r.jsx("label",{children:"Price ()"}),r.jsx("input",{type:"number",value:k,onChange:et=>P(et.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:Ue,className:"add-item-button",children:"Add Item"}),o==="consultation"&&r.jsxs("div",{className:"default-fee-section",style:{marginLeft:"auto",display:"flex",alignItems:"flex-end",gap:"5px"},children:[r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{children:"Default Fee"}),r.jsx("input",{type:"number",value:he,onChange:et=>De(et.target.value),style:{width:"80px",padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}})]}),r.jsx("button",{onClick:Qn,className:"secondary-button",style:{padding:"10px"},children:r.jsx(Bi,{size:16})})]})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Kn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",q,"%)"]}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",kt.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px dashed #ddd"},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9em",marginBottom:"5px"},children:"Payment Mode:"}),be?Ne.map((et,gt)=>et.amount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:et.method.toUpperCase()}),r.jsxs("span",{children:["",et.amount.toFixed(2)]})]},gt)):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:F?F.toUpperCase():"CASH"}),r.jsxs("span",{children:["",kt.toFixed(2)]})]}),bt==="view_pay"&&$e&&$e.length>0&&r.jsxs("div",{style:{marginTop:"5px"},children:[r.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:"Payment History:"}),$e.map(et=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8em"},children:[r.jsxs("span",{children:[et.payment_mode," (",new Date(et.payment_date).toLocaleDateString(),")"]}),r.jsxs("span",{children:["",et.amount_paid]})]},et.id))]})]}),pn&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",fontSize:"0.85em",fontWeight:500},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Prev. Debt:"}),r.jsxs("span",{children:["",(se||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Net Payable:"}),r.jsxs("span",{children:["",((se||0)+(be?Ne.filter(et=>et.method==="credit").reduce((et,gt)=>et+gt.amount,0):F==="credit"?kt:0)).toFixed(2)]})]})]})]}),ut&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(Fa,{value:ut,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Kn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),bt==="create"&&!f?r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:q,onChange:et=>U(parseFloat(et.target.value)||0),min:"0",max:"100",className:"discount-input-total"}),"%"]}):r.jsxs("span",{children:[q,"%"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Amount"}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",kt.toFixed(2)]})]}),bt==="view_pay"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"summary-row",style:{color:"green"},children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Dt.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",style:{color:"red",fontWeight:"bold"},children:[r.jsx("span",{children:"Balance Due"}),r.jsxs("span",{children:["",Ht.toFixed(2)]})]})]}),r.jsx("div",{className:"qr-code-container",children:ut?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:ut,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available."})}),bt==="create"&&r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>_e(!be),disabled:f||Y,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:be?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:be?"rgba(79, 172, 254, 0.1)":"transparent",color:be?"#4facfe":"#666",cursor:f||Y?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14})," Split"]})]}),be?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Jr.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:Ne.map((et,gt)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:gt+1}),r.jsxs("select",{value:et.method,onChange:St=>ae(et.id,"method",St.target.value),className:"split-payment-select",disabled:Y,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:et.amount||"",onChange:St=>ae(et.id,"amount",parseFloat(St.target.value)||0),className:"split-payment-input",disabled:Y})]}),Ne.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ne(et.id,kt),className:"split-payment-btn split-payment-btn-fill",title:"Fill",children:"Buy"}),r.jsx("button",{type:"button",onClick:()=>de(et.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Wn,{size:12})})]})]},et.id))}),Ne.length<5&&r.jsxs("button",{type:"button",onClick:ge,className:"split-payment-add-btn",disabled:Y,children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Required:"}),r.jsxs("span",{style:{fontWeight:600},children:["",kt.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${wa?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:wa?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",Jr.toFixed(2)]})]})]})]}):r.jsxs("select",{id:"paymentMode",value:F,onChange:et=>B(et.target.value),className:"payment-mode-select",disabled:f||Y,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"}),r.jsx("option",{value:"online",children:"Online (Razorpay)"})]})]}),bt==="create"&&F==="credit"&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Ee?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:se&&se>0?"#dc3545":"#28a745"},children:["",(se||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"This Bill:"}),r.jsxs("strong",{children:["+ ",kt.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((se||0)+kt).toFixed(2)]})]})]})]}),bt==="create"&&!f&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:qr,className:"primary-button",disabled:Y||w.length===0,children:Y?"Processing...":"Finalise and Bill"})}),bt==="view_pay"&&r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:()=>window.print(),className:"secondary-button",children:"Print Bill"}),Rn&&Ht>0&&r.jsxs("div",{className:"payment-recording-section",style:{marginTop:"20px",borderTop:"1px dashed #ccc",paddingTop:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("h3",{style:{fontSize:"1em",marginBottom:"0"},children:"Record Payment"}),r.jsxs("button",{type:"button",onClick:()=>_e(!be),disabled:Te,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",fontSize:"0.75rem",border:be?"1px solid #4facfe":"1px solid #ccc",borderRadius:"4px",backgroundColor:be?"rgba(79, 172, 254, 0.1)":"transparent",color:be?"#4facfe":"#666",cursor:Te?"not-allowed":"pointer"},children:[r.jsx(qo,{size:12})," Split"]})]}),be?r.jsxs("div",{className:"split-payment-wrapper",style:{marginBottom:"10px",fontSize:"0.9em"},children:[r.jsx("div",{className:"split-payment-list",children:Ne.map(et=>r.jsxs("div",{className:"split-payment-row",children:[r.jsxs("select",{value:et.method,onChange:gt=>ae(et.id,"method",gt.target.value),className:"split-payment-select",disabled:Te,style:{padding:"4px"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Ins."}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",style:{left:"5px",fontSize:"0.8em"},children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:et.amount||"",onChange:gt=>ae(et.id,"amount",parseFloat(gt.target.value)||0),className:"split-payment-input",style:{paddingLeft:"15px"},disabled:Te})]}),Ne.length>2&&r.jsx("button",{type:"button",onClick:()=>de(et.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Wn,{size:12})})]},et.id))}),Ne.length<5&&r.jsxs("button",{type:"button",onClick:ge,className:"split-payment-add-btn",disabled:Te,style:{fontSize:"0.8em",padding:"4px"},children:[r.jsx(Vn,{size:12})," Add"]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em",marginTop:"5px",color:"#666"},children:[r.jsxs("span",{children:["Paying: ",r.jsxs("strong",{children:["",Jr.toFixed(2)]})]}),r.jsxs("span",{style:{color:Jr>Ht?"red":"inherit"},children:["Max: ",Ht.toFixed(2)]})]})]}):r.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:Se,onChange:et=>Ve(et.target.value),placeholder:`Max ${Ht.toFixed(2)}`,className:"custom-text-input",style:{flex:1}}),r.jsxs("select",{value:Ae,onChange:et=>ue(et.target.value),className:"custom-select-input",style:{width:"auto"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("button",{onClick:Ba,disabled:Te||be&&Jr<=0||!be&&(!Se||parseFloat(Se)<=0),className:"primary-button",style:{width:"100%",fontSize:"0.9em"},children:Te?"Recording...":"Record Payment"})]})]})]})})]}),r.jsxs("div",{className:"amount-in-words-print print-only",children:[r.jsx("strong",{children:"Amount in Words:"})," ",_Ie(bt==="view_pay"&&X?X.amount:kt)]}),r.jsxs("div",{className:"terms-conditions-print print-only",children:[r.jsx("h4",{children:"Terms & Conditions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Goods once sold will not be taken back or exchanged."}),r.jsx("li",{children:"All disputes are subject to local jurisdiction."}),r.jsx("li",{children:"Please retain this bill for future reference."})]})]}),r.jsxs("div",{className:"signature-section-print print-only",children:[r.jsx("div",{className:"receiver-sign",children:r.jsx("div",{className:"sign-line",children:"Receiver's Signature"})}),r.jsxs("div",{className:"authorized-sign",children:[r.jsxs("div",{className:"for-clinic",children:["For ",Ge||"Clinic"]}),r.jsx("div",{className:"sign-line",children:"Authorised Signatory"})]})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{className:"thank-you",children:"Thank you for your visit!"}),r.jsx("p",{className:"computer-generated",children:"This is a computer generated invoice and does not require a physical signature."})]})]})]})},kIe=()=>{const t=Lt(),e=Br(),{patientId:n,queueId:a,patientName:i,initialItems:s,billType:o,relatedId:l,initialStatus:c,initialDiscountPercentage:u,doctorId:f,billId:p,labOrderId:g}=e.state||{},[x,b]=v.useState(null),[j,w]=v.useState(null),[_,T]=v.useState(null),[C,A]=v.useState(null),[k,P]=v.useState(null),[I,R]=v.useState(null),[q,U]=v.useState(null),[F,B]=v.useState(null),[V,W]=v.useState(!0),[G,z]=v.useState(null),[Y,Q]=v.useState(i||"");v.useEffect(()=>{if(!n){console.error("BillingPage loaded without required patientId in location state."),t("/");return}(async()=>{W(!0),z(null);try{let Ie=n,$e=s||null,Be=c||null,Le=o||null,ce=l||null,Se=u!==void 0?parseFloat(u):null,Ve=i||null,Ae=null;if(p){console.log(`Fetching details for Bill ID: ${p}`);const ue=await le(`/api/bills/${p}`);if(!ue.ok){const oe=await ue.json().catch(()=>({message:`Failed to fetch bill details for ID ${p}`}));throw new Error(oe.message||`Failed to fetch bill details (Status: ${ue.status})`)}const Te=await ue.json();if(console.log("Fetched Bill Data:",Te),$e=Te.bill.items||[],Be=Te.bill.status||"pending",Le=Te.bill.type||null,ce=Te.bill.related_id||null,Se=Te.bill.discount_percentage!==void 0&&Te.bill.discount_percentage!==null?parseFloat(Te.bill.discount_percentage):0,Ie=Te.bill.patient_id,A($e),P(Be),R(Le),U(ce),B(Se),Ie){const oe=await le(`/api/patients/${Ie}`);if(oe.ok){const be=await oe.json();Ve=be.name,Ae=be.phone??null,T(be.insurance_type??null),Q(Ve),w(Ae)}else console.warn(`Could not fetch patient details for ID ${Ie} from bill.`),Q("Patient (Not Found)")}else console.warn(`Bill ${p} does not have an associated patient_id.`),Q("Patient (Unknown)")}else if(g){console.log(`Fetching details for Lab Order ID: ${g}`);const ue=await le(`/api/lab/${g}`);if(!ue.ok){let oe=`Failed to fetch lab order details (Status: ${ue.status} ${ue.statusText})`;try{oe=(await ue.json()).message||oe}catch{console.error("Response was not valid JSON:",await ue.text())}throw new Error(oe)}const Te=await ue.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(Te,null,2)),$e=(Te.tests||[]).filter(oe=>oe&&typeof oe.name=="string"&&oe.price!==void 0&&oe.id!==void 0).map(oe=>{const be=parseFloat(oe.price||"0"),_e=!isNaN(be)&&isFinite(be)?be:0;return{item_id:oe.id,name:oe.name,price:_e,quantity:1,total:_e*1,type:"lab_test"}}),$e&&$e.length===0&&(Te.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",Te.tests),z(oe=>`${oe?oe+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),Be="pending",Le="lab",ce=g,Ie=Te.patient_id,A($e),P(Be),R(Le),U(ce),Ie){const oe=await le(`/api/patients/${Ie}`);if(oe.ok){const be=await oe.json();Ve=be.name,Ae=be.phone??null,T(be.insurance_type??null),Q(Ve),w(Ae)}else console.warn(`Could not fetch patient details for ID ${Ie} from lab order.`),Q("Patient (Not Found)")}else console.warn(`Lab Order ${g} does not have an associated patient_id.`),Q("Patient (Unknown)")}else if(A(s||null),P(c||null),R(o||null),U(l||null),B(u!==void 0?parseFloat(u):null),Q(i||`ID ${n}`),Ie){const ue=await le(`/api/patients/${Ie}`);if(ue.ok){const Te=await ue.json();w(Te.phone??null),T(Te.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${Ie}.`)}if(a){const ue=await le(`/api/queue/${a}`);if(ue.ok){const Te=await ue.json();b(Te.token_number)}else console.warn(`Could not fetch queue details for ID ${a}.`)}}catch(Ie){console.error("Error fetching billing page details:",Ie),z(`Failed to load details: ${Ie.message}`),A(null),P(null),R(null),U(null),Q(i||""),w(null),b(null)}finally{W(!1)}})()},[n,p,g,a,t]);const K=X=>{console.log(`Billing process completed for patient ID ${n}. New Bill ID: ${X}`),t(-1)},$=()=>{console.log(`Bill updated for patient ID ${n}.`),t(-1)};if(!n)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(zI,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(V)return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx(te,{width:80,height:32})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx(te,{width:300,height:32})}),r.jsxs("div",{className:"patient-info-bar mb-6",style:{display:"flex",gap:"1rem",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:120,height:20}),r.jsx(te,{width:140,height:20})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 space-y-4",children:[r.jsx(te,{width:"100%",height:200,className:"rounded-lg"}),r.jsx(te,{width:"100%",height:150,className:"rounded-lg"})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(te,{width:"100%",height:300,className:"rounded-lg"})})]})]})]});if(G)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(zI,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:G}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>t(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const xe=(k??c)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(sn,{size:20,className:"lucide"})})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[p?"Bill Details":g?"Create Lab Bill":"Create Bill"," for Patient: ",Y||`ID ${n}`]}),r.jsxs("div",{className:"patient-info-bar",children:[x!==null&&r.jsxs("span",{children:[r.jsx(Qa,{size:14,className:"lucide"})," Token: ",x]}),j&&r.jsxs("span",{children:[r.jsx(ag,{size:14,className:"lucide"})," Phone: ",j]}),g&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(us,{size:14,className:"lucide"})," Lab Order: ",g.substring(0,8),"..."]}),!j&&x===null&&!g&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),_&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(YJ,{size:14,className:"lucide"})," Insurance: ",_.replace(/_/g," ").replace(/\b\w/g,X=>X.toUpperCase())]}),!j&&x===null&&!g&&!_&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(TIe,{patientId:n,labOrderId:g,queueId:a,onBillCreated:K,onBillUpdated:$,initialItems:C??s,billType:I??o,relatedId:q??l,initialStatus:k??c,initialDiscountPercentage:F??u,readOnlyMode:xe,doctorId:f,patientInsuranceType:_??void 0})]})]})},Uz=()=>{const{patientId:t}=$a(),e=Lt(),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,u]=v.useState("");return v.useEffect(()=>{(async()=>{if(!t){l("Patient ID not provided in URL.");return}s(!0),l(null),a([]);try{try{const x=await le(`/api/patients/${t}`);if(x.ok){const b=await x.json();u(b.name)}}catch(x){console.warn("Could not fetch patient name:",x)}console.log(`Fetching pharmacy orders for patient ID: ${t}`);const p=await le(`/api/pharmacy-orders/patient/${t}`);if(!p.ok){const x=await p.json().catch(()=>({}));throw new Error(x.message||`HTTP error! status: ${p.status}`)}const g=await p.json();console.log("Fetched Pharmacy Orders:",g),a(g||[])}catch(p){console.error("Error fetching pharmacy orders:",p),l(`Failed to load pharmacy orders: ${p.message}`)}finally{s(!1)}})()},[t]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(sn,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(dd,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",c&&`for ${c}`]}),r.jsx("div",{})," "]}),i&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(te,{width:150,height:20}),r.jsx(te,{width:100,height:20})]}),r.jsx(te,{width:200,height:20,className:"mb-2"}),r.jsx(te,{width:180,height:20,className:"mb-3"}),r.jsx(te,{width:120,height:24,className:"mb-2"}),r.jsxs("div",{className:"space-y-1 ml-4",children:[r.jsx(te,{width:"80%",height:16}),r.jsx(te,{width:"70%",height:16}),r.jsx(te,{width:"60%",height:16})]})]},f))}),o&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:o}),!i&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!i&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(f.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",f.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",f.prescribedBy||"N/A"]}),f.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",f.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:f.medications.map((p,g)=>r.jsxs("li",{children:[p.name," - Qty: ",p.quantity,p.tabletsPerDay&&` (${p.tabletsPerDay} per day`,p.numberOfDays&&` for ${p.numberOfDays} days)`,!p.tabletsPerDay&&p.numberOfDays&&` (for ${p.numberOfDays} days)`,p.tabletsPerDay&&!p.numberOfDays&&")"]},g))})]},f.id))})]})},LG=()=>{const{orderId:t}=$a(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(null),[o,l]=v.useState([]),[c,u]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState([]),[b,j]=v.useState(null),[w,_]=v.useState(!1),[T,C]=v.useState(null),[A,k]=v.useState(!0);Kc();const P=v.useCallback(async()=>{k(!0);try{const z=await le(`/api/pharmacy-orders/${t}`);if(!z.ok)throw new Error("Failed to fetch order details");const Y=await z.json();a(Y),s({id:Y.patientId,name:Y.patientName||"N/A",token:Y.patientTokenNumber}),C(Y.prescriptionForUnavailableDrugs);const Q=Y.medications.map(K=>{const $=q(K.pack),ie=K.pack_quantity*($??1)+K.loose_quantity;return{...K,isLoose:!0,loosePacks:K.pack_quantity,looseUnits:K.loose_quantity,looseQuantity:ie,pack_price:K.pack_price,loose_price:K.loose_price,total_price:K.total_price,pricePerLooseUnit:K.loose_price,originalPrice:K.pack_price,box_number:K.box_number,pack:K.pack,batch:K.batch,expiry_date:K.expiry_date,discount_percentage:K.discount_percentage}});u(Q)}catch(z){j("Could not load order details. "+z.message)}finally{k(!1)}},[t]),I=v.useCallback(async()=>{try{const z=await le("/api/drugs");if(!z.ok)throw new Error("Failed to fetch drugs");const Y=await z.json(),Q=Y.drugs||Y||[];l(Q)}catch(z){j("Could not load drug list. "+z.message)}},[]);v.useEffect(()=>{P(),I()},[P,I]);const R=v.useMemo(()=>new uo(o,{keys:["name","brand_name"],threshold:.3}),[o]);v.useEffect(()=>{if(!f){x([]);return}const z=R.search(f).map(Y=>Y.item);x(z.slice(0,10))},[f,R]);const q=z=>{if(!z)return null;const Y=z.match(/(?:\d+x)?(\d+)/);return Y?parseInt(Y[1],10):null},U=z=>{if(c.some(Y=>Y.drug_id===z.id)){j(`${z.name||z.brand_name} is already in the order.`),setTimeout(()=>j(null),3e3),p(""),x([]);return}u(Y=>[...Y,{drug_id:z.id,name:z.name||z.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(z.mrp)||0,loose_price:(Number(z.mrp)||0)/(q(z.pack)||1),total_price:(Number(z.mrp)||0)/(q(z.pack)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:z.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(z.mrp)||0)/(q(z.pack)||1),originalPrice:Number(z.mrp)||0,pack:z.pack}]),p(""),x([])},F=z=>{u(Y=>Y.filter(Q=>(Q.drug_id??Q.name)!==z))},B=(z,Y)=>{u(Q=>Q.map(K=>{if((K.drug_id??K.name)===z&&K.isLoose){const $=q(K.pack),ie=Math.max(0,Y),xe=ie*($??1)+(K.looseUnits??0);return{...K,loosePacks:ie,looseQuantity:xe,pack_quantity:ie}}return K}))},V=(z,Y)=>{u(Q=>Q.map(K=>{if((K.drug_id??K.name)===z&&K.isLoose){const $=q(K.pack),ie=Math.max(0,Y),xe=(K.loosePacks??0)*($??1)+ie;return{...K,looseUnits:ie,looseQuantity:xe,loose_quantity:ie}}return K}))},W=async z=>{if(z.preventDefault(),j(null),_(!0),c.length===0&&!(T!=null&&T.trim())){j("Please add at least one medication or provide a prescription."),_(!1);return}const Y=c.filter(K=>{const $=K.looseQuantity??0;return $<=0||K.stock!==void 0&&$>K.stock});if(Y.length>0){j(`Invalid quantity or insufficient stock for: ${Y.map(K=>K.name).join(", ")}`),_(!1);return}const Q={items:c.map(K=>({drug_id:K.drug_id??null,name:K.name,pack_quantity:K.loosePacks??0,loose_quantity:K.looseUnits??0,pack_price:K.pack_price??0,loose_price:K.loose_price??0,total_price:(K.loose_price??0)*(K.looseQuantity??0),discount_percentage:K.discount_percentage??0,directions_to_use:K.directions_to_use??null,tabletsPerDay:K.tabletsPerDay??1,numberOfDays:K.numberOfDays??1})),prescription_for_unavailable_drugs:T,order_total:G};try{const K=await le(`/api/pharmacy-orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!K.ok){const $=await K.json();throw new Error($.message||"Failed to update order")}e(-1)}catch(K){j(K.message||"Failed to update order. Please try again.")}finally{_(!1)}},G=v.useMemo(()=>c.reduce((z,Y)=>{const Q=Y.loose_price??0,K=Y.looseQuantity??0;return z+Q*K},0),[c]);return A?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(te,{variant:"circular",width:40,height:40}),r.jsx(te,{width:300,height:32})]}),r.jsx("div",{className:"header-right",children:r.jsx(te,{width:100,height:32,style:{borderRadius:"16px"}})})]}),r.jsx("div",{className:"order-meta",style:{display:"flex",gap:"1rem",margin:"1rem 0"},children:r.jsx(te,{width:200,height:24})}),r.jsxs("div",{className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(te,{width:200,height:24})}),r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(te,{height:42})})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(te,{width:250,height:24})}),r.jsxs("div",{className:"table-container",style:{padding:"0 1rem 1rem"},children:[r.jsxs("div",{className:"table-header-row",style:{display:"flex",gap:"1rem",padding:"1rem"},children:[r.jsx(te,{width:"30%",height:20}),r.jsx(te,{width:"20%",height:20}),r.jsx(te,{width:"20%",height:20}),r.jsx(te,{width:"15%",height:20}),r.jsx(te,{width:"5%",height:20})]}),r.jsx("div",{className:"table-body",children:[1,2,3].map(z=>r.jsxs("div",{className:"table-row",style:{display:"flex",gap:"1rem",padding:"1rem",borderBottom:"1px solid #eee"},children:[r.jsxs("div",{style:{width:"30%"},children:[r.jsx(te,{width:"80%",height:20,className:"mb-2"}),r.jsx(te,{width:"40%",height:14})]}),r.jsx(te,{width:"20%",height:36}),r.jsx(te,{width:"20%",height:36}),r.jsx(te,{width:"15%",height:20,style:{alignSelf:"center"}}),r.jsx(te,{width:"5%",height:24,style:{alignSelf:"center"}})]},z))})]})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx(te,{width:180,height:24})}),r.jsx("div",{style:{padding:"1rem"},children:r.jsx(te,{height:80})})]}),r.jsx("div",{style:{marginTop:"20px"},children:r.jsx(te,{height:48,width:"100%"})})]})]})]}):n?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:r.jsx(sn,{size:20})}),r.jsxs("h2",{className:"page-title",children:["EDIT ORDER ",r.jsxs("span",{className:"text-gray-500 text-lg font-normal ml-2",children:[i==null?void 0:i.name," #",n.id.substring(0,4)]})]})]}),r.jsx("div",{className:"header-right",children:r.jsx("span",{className:"status-badge",children:n.status.toUpperCase()})})]}),r.jsx("div",{className:"order-meta",children:r.jsxs("span",{className:"order-date",children:[" Order Date: ",new Date(n.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})}),r.jsxs("form",{onSubmit:W,className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{children:" Find & Add Medication"})}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or brand...",value:f,onChange:z=>p(z.target.value),className:"search-input"}),f&&r.jsx("div",{className:"dropdown-results",children:g.length>0?r.jsx("ul",{children:g.map(z=>r.jsxs("li",{onClick:()=>U(z),className:"dropdown-item",children:[r.jsx("span",{className:"drug-name",children:z.name||z.brand_name}),r.jsxs("span",{className:"drug-meta",children:["(Stock: ",z.stock??"N/A",", MRP: ",Number(z.mrp||0).toFixed(2),")"]})]},z.id))}):r.jsxs("div",{className:"p-3 text-gray-500 text-sm",children:['No drugs found matching "',f,'"']})})]})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{children:[" Medications in Order ",r.jsxs("span",{className:"item-count",children:[c.length," items"]})]})}),c.length>0?r.jsxs("div",{className:"table-container",children:[r.jsxs("div",{className:"table-header-row",children:[r.jsx("div",{className:"col-medication",children:"MEDICATION"}),r.jsx("div",{className:"col-directions",children:"DIRECTIONS"}),r.jsx("div",{className:"col-quantity",children:"QUANTITY"}),r.jsx("div",{className:"col-subtotal",children:"SUBTOTAL"}),r.jsx("div",{className:"col-action"})]}),r.jsx("div",{className:"table-body",children:c.map(z=>{const Y=z.drug_id??z.name;return r.jsxs("div",{className:"table-row",children:[r.jsxs("div",{className:"col-medication",children:[r.jsx("span",{className:"med-name",children:z.name}),z.pack&&r.jsx("span",{className:"med-unit text-xs text-gray-500 block",children:z.pack}),r.jsxs("div",{className:"stock-info",children:[" Stock: ",r.jsxs("span",{className:"stock-value",children:[" ",z.stock!==void 0?z.pack?`BOX OF ${q(z.pack)}`:z.stock:"N/A"]})]})]}),r.jsx("div",{className:"col-directions",children:r.jsx("input",{type:"text",placeholder:"1 tablet twice daily...",value:z.directions_to_use??"",onChange:Q=>{const K=Q.target.value;u($=>$.map(ie=>(ie.drug_id??ie.name)===Y?{...ie,directions_to_use:K}:ie))},className:"directions-input"})}),r.jsx("div",{className:"col-quantity",children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"PACKS"}),r.jsx("input",{type:"number",min:"0",value:z.loosePacks||"",onChange:Q=>B(Y,Q.target.value===""?0:parseInt(Q.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"LOOSE"}),r.jsx("input",{type:"number",min:"0",value:z.looseUnits||"",onChange:Q=>V(Y,Q.target.value===""?0:parseInt(Q.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]})]})}),r.jsxs("div",{className:"col-subtotal",children:["",(Number((z.pricePerLooseUnit??0)*(z.looseQuantity??0))||0).toFixed(2)]}),r.jsx("div",{className:"col-action",children:r.jsx("button",{type:"button",onClick:()=>F(Y),className:"delete-btn",title:"Remove Item",children:r.jsx(Wn,{size:18,strokeWidth:2.5})})})]},Y)})})]}):r.jsx("div",{className:"empty-state",children:"No medications added. Search above to add."})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx("h3",{children:" Prescription Notes"})}),r.jsx("textarea",{rows:3,value:T??"",onChange:z=>C(z.target.value||null),placeholder:"Add notes about unavailable drugs...",className:"notes-input"})]}),r.jsxs("button",{type:"submit",disabled:w,className:"confirm-btn",style:{width:"100%",margin:"20px 0 0 0"},children:[r.jsx("span",{className:"check-icon",children:""})," ",w?"Updating...":"Confirm Changes"]}),b&&r.jsx("div",{className:"error-alert mt-4",children:b})]})]})]}):r.jsx("div",{className:"p-6 text-red-500 flex justify-center items-center h-screen",children:"Order not found or failed to load."})},AIe=(t,e,n,a="non-black")=>{if(isNaN(t)||isNaN(e)||t<=0||e<=0)return null;let i;return n==="female"?t<=.7?i=141*Math.pow(t/.7,-.329)*Math.pow(.993,e):i=141*Math.pow(t/.7,-1.209)*Math.pow(.993,e):t<=.9?i=141*Math.pow(t/.9,-.411)*Math.pow(.993,e):i=141*Math.pow(t/.9,-1.209)*Math.pow(.993,e),a==="black"&&(i*=1.018),parseFloat(i.toFixed(2))},EIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0||n>=400)return null;const a=t-e-n/5;return parseFloat(a.toFixed(2))},PIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},DIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},OIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=t-(e+n);return parseFloat(a.toFixed(2))},MIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=2*t+e/18+n/2.8;return parseFloat(a.toFixed(2))},IIe=t=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(t),Vz=()=>{var _e,Ne;const{orderId:t}=$a(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState(null),[w,_]=v.useState({}),[T,C]=v.useState(null),[A,k]=v.useState(!1),[P,I]=v.useState(""),[R,q]=v.useState(!1),[U,F]=v.useState(""),[B,V]=v.useState(""),[W,G]=v.useState(!1),[z,Y]=v.useState(""),[Q,K]=v.useState([]),[$,ie]=v.useState(null),[xe,X]=v.useState(!1),Ie=v.useCallback(async()=>{var ee,ge;if(t){l(!0),p(null);try{const de=await le(`/api/lab/${t}`);if(!de.ok){const se=await de.json().catch(()=>({message:`HTTP error! status: ${de.status}`}));throw new Error(se.message||`HTTP error! status: ${de.status}`)}const ae=await de.json();if(a(ae),ae.createdAt)try{const se=new Date(ae.createdAt),je=new Date(se.getTime()-se.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(je)}catch(se){console.error("Error formatting date for edit:",se)}if(ae.report_date)try{const se=new Date(ae.report_date),je=new Date(se.getTime()-se.getTimezoneOffset()*6e4).toISOString().slice(0,16);F(je)}catch(se){console.error("Error formatting report date for edit:",se)}else{const se=new Date,je=new Date(se.getTime()-se.getTimezoneOffset()*6e4).toISOString().slice(0,16);F(je)}ae.referral_doctor&&Y(ae.referral_doctor),ae.Patient&&(x(ae.Patient.age??null),j(((ee=ae.Patient.gender)==null?void 0:ee.toLowerCase())==="f"||((ge=ae.Patient.gender)==null?void 0:ge.toLowerCase())==="female"?"female":"male")),ae.uploaded_by&&ie(ae.uploaded_by);const ne={};if(ae.tests&&ae.tests.forEach(se=>{ne[se.id]={},se.default_parameters&&se.default_parameters.length>0?se.default_parameters.forEach(je=>{ne[se.id][je.name]=je.defaultValue}):ne[se.id].report_content=""}),ae.report_content)try{const se=JSON.parse(ae.report_content);typeof se=="object"&&se!==null&&!Array.isArray(se)?s(se):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),s(ne))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),s(ne)}else s({})}catch(de){console.error("Failed to fetch lab order details:",de),p(de instanceof Error?de.message:"An unknown error occurred while fetching order details.")}finally{l(!1)}}},[t]);v.useEffect(()=>{t?Ie():(p("No Order ID provided in the URL."),l(!1))},[t,Ie]),v.useEffect(()=>{(async()=>{try{const ge=await le("/api/clinics/settings");if(ge.ok){const de=await ge.json();V(de.labLetterheadUrl||"")}}catch(ge){console.error("Error fetching clinic settings:",ge)}})()},[]),v.useEffect(()=>{(async()=>{try{const ge=await le("/staff");if(ge.ok){const de=await ge.json();K(de)}}catch(ge){console.error("Error fetching staff:",ge)}})()},[]);const $e=(ee,ge,de)=>{s(ae=>{var Xe,ut,Ct,bt,ke,ot,Tt,Ue,jt,kt,Kn,vt,Dt,Ht,Qn,br,Ba,Jr,wa;const ne={...ae,[ee]:{...ae[ee],[ge]:de}},se=parseFloat((Xe=ne[ee])==null?void 0:Xe.Creatinine),je=g,Ee=b;if(ge==="Creatinine"&&!isNaN(se)&&je!==null&&Ee!==null){const pn=AIe(se,je,Ee);pn!==null&&((ut=n==null?void 0:n.tests.find(Tn=>Tn.id===ee))!=null&&ut.default_parameters.find(Tn=>Tn.name==="eGFR"))&&(ne[ee].eGFR=pn)}const J=parseFloat((Ct=ne[ee])==null?void 0:Ct["Total Cholesterol"]),ye=parseFloat((bt=ne[ee])==null?void 0:bt["HDL Cholesterol"]),me=parseFloat((ke=ne[ee])==null?void 0:ke.Triglycerides);if((ge==="Total Cholesterol"||ge==="HDL Cholesterol"||ge==="Triglycerides")&&!isNaN(J)&&!isNaN(ye)&&!isNaN(me)){const pn=EIe(J,ye,me);pn!==null&&((ot=n==null?void 0:n.tests.find(Tn=>Tn.id===ee))!=null&&ot.default_parameters.find(Tn=>Tn.name==="LDL Cholesterol"))&&(ne[ee]["LDL Cholesterol"]=pn)}const he=parseFloat((Tt=ne[ee])==null?void 0:Tt["Total Bilirubin"]),De=parseFloat((Ue=ne[ee])==null?void 0:Ue["Direct Bilirubin"]);if((ge==="Total Bilirubin"||ge==="Direct Bilirubin")&&!isNaN(he)&&!isNaN(De)){const pn=PIe(he,De);pn!==null&&((jt=n==null?void 0:n.tests.find(Tn=>Tn.id===ee))!=null&&jt.default_parameters.find(Tn=>Tn.name==="Indirect Bilirubin"))&&(ne[ee]["Indirect Bilirubin"]=pn)}const nt=parseFloat((kt=ne[ee])==null?void 0:kt["Total Protein"]),Fe=parseFloat((Kn=ne[ee])==null?void 0:Kn.Albumin);if((ge==="Total Protein"||ge==="Albumin")&&!isNaN(nt)&&!isNaN(Fe)){const pn=DIe(nt,Fe);pn!==null&&((vt=n==null?void 0:n.tests.find(Tn=>Tn.id===ee))!=null&&vt.default_parameters.find(Tn=>Tn.name==="Globulin"))&&(ne[ee].Globulin=pn)}const Ge=parseFloat((Dt=ne[ee])==null?void 0:Dt.Sodium),it=parseFloat((Ht=ne[ee])==null?void 0:Ht.Chloride),wt=parseFloat((Qn=ne[ee])==null?void 0:Qn.Bicarbonate);if((ge==="Sodium"||ge==="Chloride"||ge==="Bicarbonate")&&!isNaN(Ge)&&!isNaN(it)&&!isNaN(wt)){const pn=OIe(Ge,it,wt);pn!==null&&((br=n==null?void 0:n.tests.find(Tn=>Tn.id===ee))!=null&&br.default_parameters.find(Tn=>Tn.name==="Anion Gap"))&&(ne[ee]["Anion Gap"]=pn)}const we=parseFloat((Ba=ne[ee])==null?void 0:Ba.Glucose),Qe=parseFloat((Jr=ne[ee])==null?void 0:Jr.BUN);if((ge==="Sodium"||ge==="Glucose"||ge==="BUN")&&!isNaN(Ge)&&!isNaN(we)&&!isNaN(Qe)){const pn=MIe(Ge,we,Qe);pn!==null&&((wa=n==null?void 0:n.tests.find(Tn=>Tn.id===ee))!=null&&wa.default_parameters.find(Tn=>Tn.name==="Osmolality"))&&(ne[ee].Osmolality=pn)}return ne})},Be=async ee=>{const ge=i[ee]||{},de=n==null?void 0:n.tests.find(je=>je.id===ee);if(!de)return;const ae={};de.default_parameters&&de.default_parameters.forEach(je=>{ae[je.name]=je.defaultValue});const ne={...ae,...ge},se={...i,[ee]:ne};s(se),u(!0),p(null);try{const je=await le(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(se),isPartial:!0,uploaded_by:$})});if(!je.ok)throw new Error(`Save failed: ${je.status}`)}catch(je){console.error("Error saving test report:",je),alert("Failed to save test report.")}finally{u(!1)}},Le=async(ee=null)=>{if(!n||!n.tests||!t){alert("Order details not loaded.");return}u(!0),p(null);try{let ge;if(ee===null){const ae={};n.tests.forEach(ne=>{const se=i[ne.id]||{},je={};ne.default_parameters&&ne.default_parameters.forEach(Ee=>{Ee.defaultValue!==void 0&&Ee.defaultValue!==null&&(je[Ee.name]=Ee.defaultValue)}),ae[ne.id]={...je,...se},(!ne.default_parameters||ne.default_parameters.length===0)&&!ae[ne.id].report_content&&(ae[ne.id].report_content="")}),ge=ae,s(ae)}else{const ae=i[ee]||{},ne=n.tests.find(Ee=>Ee.id===ee);if(!ne){u(!1);return}const se={};ne.default_parameters&&ne.default_parameters.forEach(Ee=>{se[Ee.name]=Ee.defaultValue});const je={...se,...ae};ge={...i,[ee]:je},s(ge)}const de=await le(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(ge),isPartial:ee!==null,uploaded_by:$})});if(!de.ok)throw new Error(`Save failed: ${de.status}`);C(ee),setTimeout(()=>{window.print()},100)}catch(ge){console.error("Error saving before print:",ge),alert("Failed to save report before printing.")}finally{u(!1)}},ce=()=>{n&&UM(n)},Se=async()=>{if(!n||!n.tests){alert("Order details not loaded.");return}if(!t){alert("Cannot submit report without an Order ID.");return}const ee={};if(n.tests.forEach(ge=>{const de=i[ge.id]||{},ae={};ge.default_parameters&&ge.default_parameters.forEach(ne=>{ne.defaultValue!==void 0&&ne.defaultValue!==null&&(ae[ne.name]=ne.defaultValue)}),ee[ge.id]={...ae,...de},(!ge.default_parameters||ge.default_parameters.length===0)&&!ee[ge.id].report_content&&(ee[ge.id].report_content="")}),Object.keys(ee).length===0){alert("Report content cannot be empty.");return}s(ee),u(!0),p(null);try{const ge=await le(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(ee),uploaded_by:$})});if(!ge.ok){const de=await ge.json().catch(()=>({message:`Submission failed: ${ge.status}`}));throw new Error(de.message||`Submission failed: ${ge.status}`)}e(-1)}catch(ge){console.error("Error submitting report:",ge),p(ge instanceof Error?ge.message:"An unknown error occurred during submission.")}finally{u(!1)}},Ve=async()=>{if(!(!t||!P))try{const ee=await le(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(P).toISOString()})});if(!ee.ok)throw new Error("Failed to update date");const ge=await ee.json();ge.order&&a(de=>de?{...de,createdAt:ge.order.createdAt}:null),k(!1)}catch(ee){console.error("Failed to update date:",ee),alert("Failed to update date")}},Ae=async()=>{if(!(!t||!U))try{const ee=await le(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportDate:new Date(U).toISOString()})});if(!ee.ok)throw new Error("Failed to update report date");const ge=await ee.json();ge.order&&a(de=>de?{...de,report_date:ge.order.report_date}:null),q(!1)}catch(ee){console.error("Failed to update report date:",ee),alert("Failed to update report date")}},ue=async()=>{if(t)try{const ee=await le(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralDoctor:z})});if(!ee.ok)throw new Error("Failed to update referral doctor");const ge=await ee.json();ge.order&&(Y(ge.order.referral_doctor||""),a(de=>de?{...de,referral_doctor:ge.order.referral_doctor}:null)),G(!1)}catch(ee){console.error("Failed to update referral doctor:",ee),alert("Failed to update referral doctor")}};if(o)return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[r.jsx(te,{width:200,height:28}),r.jsxs("div",{className:"header-actions",style:{display:"flex",gap:"8px"},children:[r.jsx(te,{width:80,height:32}),r.jsx(te,{width:80,height:32}),r.jsx(te,{width:80,height:32})]})]}),r.jsxs("div",{className:"lab-inventory-card no-print summary-card",style:{margin:"1rem",padding:"0"},children:[r.jsx("div",{className:"lab-inventory-header summary-header",style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:r.jsx(te,{width:120,height:20})}),r.jsxs("div",{className:"summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem"},children:[r.jsx(te,{height:24}),r.jsx(te,{height:24}),r.jsx(te,{height:24}),r.jsx(te,{height:24})]})]}),r.jsx("div",{className:"lab-tests-container no-print",style:{padding:"1rem"},children:[1,2].map(ee=>r.jsxs("div",{className:"test-card",style:{marginBottom:"1.5rem",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"white"},children:[r.jsxs("div",{className:"test-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsx(te,{width:250,height:24}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsx(te,{width:70,height:30}),r.jsx(te,{width:36,height:30})]})]}),r.jsx("div",{className:"parameter-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(ge=>r.jsxs("div",{className:"parameter-item",children:[r.jsx(te,{width:"30%",height:16,style:{marginBottom:"0.5rem"}}),r.jsx(te,{height:40})]},ge))})]},ee))})]})});if(f&&!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Fr,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:f}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:r.jsx(sn,{size:16})})]})});if(!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Dl,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${t}.`}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:r.jsx(sn,{size:16})})]})});const Te=(_e=n==null?void 0:n.Patient)==null?void 0:_e.name,oe=(Ne=n==null?void 0:n.Patient)==null?void 0:Ne.patient_token_number;return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",children:[r.jsx("h2",{children:"Enter Lab Report"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:r.jsx(sn,{size:16})}),r.jsxs("button",{onClick:()=>Le(null),className:"lab-inventory-button compact-btn",title:"Print Full Report",children:[r.jsx(Nf,{size:16}),r.jsx("span",{className:"btn-text",children:"Print"})]}),r.jsxs("button",{onClick:ce,className:"lab-inventory-button whatsapp-btn compact-btn",title:"Share via WhatsApp",children:[r.jsx(cq,{size:16}),r.jsx("span",{className:"btn-text",children:"Share"})]})]})]}),n&&r.jsxs("div",{className:"lab-inventory-card no-print summary-card",children:[r.jsxs("h3",{className:"lab-inventory-header summary-header",children:[r.jsx(Dl,{size:14})," Summary"]}),r.jsxs("div",{className:"summary-grid",children:[r.jsxs("div",{className:"summary-item",children:[r.jsx(Yn,{size:13,className:"icon"}),r.jsx("strong",{children:"Patient:"})," ",Te??"N/A"," (",oe??"N/A",")"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(Yn,{size:13,className:"icon"}),r.jsx("strong",{children:"Age / Sex:"})," ",g??"N/A"," / ",b?b.charAt(0).toUpperCase()+b.slice(1):"N/A"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(PI,{size:13,className:"icon"}),r.jsx("strong",{children:"Ordered:"})," ",A?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:P,onChange:ee=>I(ee.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Ve,className:"icon-btn save",children:r.jsx(Ms,{size:12})}),r.jsx("button",{onClick:()=>k(!1),className:"icon-btn cancel",children:r.jsx(Rt,{size:12})})]}):r.jsxs(r.Fragment,{children:[xf(new Date(n.createdAt),"dd MMM, HH:mm"),r.jsx("button",{onClick:()=>k(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Os,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(PI,{size:13,className:"icon"}),r.jsx("strong",{children:"Reported:"})," ",R?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:U,onChange:ee=>F(ee.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Ae,className:"icon-btn save",children:r.jsx(Ms,{size:12})}),r.jsx("button",{onClick:()=>q(!1),className:"icon-btn cancel",children:r.jsx(Rt,{size:12})})]}):r.jsxs(r.Fragment,{children:[n.report_date?xf(new Date(n.report_date),"dd MMM, HH:mm"):"Not Set",r.jsx("button",{onClick:()=>q(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Os,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",style:{position:"relative"},children:[r.jsx(Yn,{size:13,className:"icon"}),r.jsx("strong",{children:"Ref. By:"})," ",W?r.jsxs("div",{className:"staff-search-wrapper",style:{display:"inline-block",position:"relative"},children:[r.jsx("input",{type:"text",value:z,onChange:ee=>{Y(ee.target.value),X(!0)},onFocus:()=>X(!0),placeholder:"Enter ref name...",className:"lab-inventory-input date-input",style:{width:"180px",padding:"2px 8px",fontSize:"0.85rem"},autoFocus:!0}),r.jsx("button",{onClick:ue,className:"icon-btn save",children:r.jsx(Ms,{size:12})}),r.jsx("button",{onClick:()=>G(!1),className:"icon-btn cancel",children:r.jsx(Rt,{size:12})}),xe&&r.jsxs("div",{className:"staff-dropdown",style:{position:"absolute",top:"100%",left:0,width:"250px",maxHeight:"200px",overflowY:"auto",backgroundColor:"white",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",zIndex:1e3,marginTop:"4px"},children:[Q.filter(ee=>ee.name.toLowerCase().includes(z.toLowerCase())).map(ee=>r.jsxs("div",{className:"staff-option",style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",fontSize:"0.85rem"},onClick:()=>{Y(ee.name),X(!1)},children:[r.jsx("div",{style:{fontWeight:"600"},children:ee.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"#666"},children:ee.role})]},ee.id)),Q.filter(ee=>ee.name.toLowerCase().includes(z.toLowerCase())).length===0&&r.jsx("div",{style:{padding:"8px 12px",color:"#888",fontSize:"0.85rem"},children:"No staff found"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{onClick:()=>G(!0),style:{cursor:"pointer",borderBottom:"1px dashed #ccc"},children:z||"Add Ref"}),r.jsx("button",{onClick:()=>G(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Os,{size:11})})]})]})]})]}),r.jsxs("div",{className:"lab-tests-container no-print",children:[n==null?void 0:n.tests.map(ee=>{var ge;return r.jsxs("div",{className:"test-card",children:[r.jsxs("div",{className:"test-header",children:[r.jsx("h4",{children:ee.name}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsxs("button",{type:"button",onClick:de=>{de.stopPropagation(),Be(ee.id)},className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:[r.jsx(Bi,{size:14}),r.jsx("span",{className:"btn-text",children:"Save"})]}),r.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),Le(ee.id)},className:"lab-inventory-button compact-btn",title:"Print",children:r.jsx(Nf,{size:14})})]})]}),r.jsx("div",{className:"test-parameters-body",children:ee.default_parameters&&ee.default_parameters.length>0?r.jsx("div",{className:"parameter-grid",children:ee.default_parameters.map(de=>{var J,ye;const ae=(J=i[ee.id])==null?void 0:J[de.name],ne=ae!==void 0?ae:de.defaultValue??"",se=de.type==="number"&&ne!==""&&(de.lower_limit!=null&&parseFloat(String(ne))<de.lower_limit||de.upper_limit!=null&&parseFloat(String(ne))>de.upper_limit),je=IIe(de.name),Ee=(ye=w[ee.id])==null?void 0:ye[de.name];return r.jsxs("div",{className:"parameter-item",children:[r.jsxs("label",{className:"parameter-label",htmlFor:`${ee.id}-${de.name}`,children:[de.name," ",de.unit&&r.jsxs("span",{className:"parameter-unit",children:["(",de.unit,")"]})]}),r.jsxs("div",{className:"input-wrapper",children:[de.type==="boolean"?r.jsxs("select",{id:`${ee.id}-${de.name}`,value:(ne==null?void 0:ne.toString())??"false",onChange:me=>$e(ee.id,de.name,me.target.value==="true"),className:"lab-inventory-input parameter-input",disabled:c,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${ee.id}-${de.name}`,type:de.type==="number"?"number":"text",value:ne,onChange:me=>$e(ee.id,de.name,me.target.value),className:`lab-inventory-input parameter-input ${se?"abnormal-result":""} ${je?"calculated-input":""}`,disabled:c||je&&!Ee,placeholder:de.lower_limit!=null&&de.upper_limit!=null?`${de.lower_limit}-${de.upper_limit}`:""}),je&&r.jsx("button",{type:"button",onClick:()=>_(me=>({...me,[ee.id]:{...me[ee.id]||{},[de.name]:!Ee}})),className:"edit-calculated-btn",title:Ee?"Lock":"Edit",children:r.jsx(Os,{size:11})})]})]},de.name)})}):r.jsxs("div",{className:"parameter-item",style:{width:"100%"},children:[r.jsx("label",{className:"parameter-label",htmlFor:`${ee.id}-report_content`,children:"Results / Observations"}),r.jsx("textarea",{id:`${ee.id}-report_content`,value:((ge=i[ee.id])==null?void 0:ge.report_content)??"",onChange:de=>$e(ee.id,"report_content",de.target.value),className:"lab-inventory-input parameter-textarea",rows:3,placeholder:`Enter results for ${ee.name}...`,disabled:c})]})})]},ee.id)}),f&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(Fr,{size:15,className:"inline mr-1"}),f]})]}),r.jsx("div",{className:"form-actions-footer no-print",children:r.jsx("button",{type:"button",onClick:Se,disabled:c,className:"lab-inventory-button lab-inventory-button-primary submit-btn",children:c?r.jsxs(r.Fragment,{children:[r.jsx(lo,{className:"animate-spin",size:16})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Bi,{size:16})," Save All"]})})}),r.jsxs("div",{className:"printable-only",children:[B&&r.jsx("div",{className:"print-letterhead-container",children:r.jsx("img",{src:B,alt:"Lab Letterhead",className:"print-letterhead-image"})}),n&&n.Patient&&r.jsxs("div",{style:{marginBottom:"20px",borderBottom:"1px solid #ccc",paddingBottom:"10px"},children:[r.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Lab Report"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"12px"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Patient Name:"})," ",n.Patient.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age / Sex:"})," ",g??"N/A"," / ",b?b.charAt(0).toUpperCase()+b.slice(1):"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. By:"})," ",z||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",xf(new Date(n.createdAt),"PPpp")]})]})]}),n==null?void 0:n.tests.filter(ee=>T===null||ee.id===T).map(ee=>{var ge;return r.jsxs("div",{style:{marginBottom:"20px",pageBreakInside:"avoid"},children:[r.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"5px"},children:ee.name}),ee.default_parameters&&ee.default_parameters.length>0?r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f9f9f9"},children:[r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Parameter"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Result"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Units"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Normal Range"})]})}),r.jsx("tbody",{children:ee.default_parameters.map(de=>{var J;const ae=(J=i[ee.id])==null?void 0:J[de.name],ne=typeof ae=="string"?parseFloat(ae):typeof ae=="number"?ae:NaN,se=de.type==="number"&&!isNaN(ne)&&ae!==""&&(de.lower_limit!=null&&ne<de.lower_limit||de.upper_limit!=null&&ne>de.upper_limit),je=de.type==="boolean"&&(ae===!0||ae==="true"),Ee=de.type==="boolean"?ae===!0||ae==="true"?"Reactive":"Non-Reactive":ae??"";return r.jsxs("tr",{children:[r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:de.name}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee",fontWeight:se||je?"bold":"normal",color:se?"red":je?"green":"inherit"},children:Ee}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:de.unit??""}),r.jsxs("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:[de.lower_limit!==null&&de.lower_limit!==void 0&&`> ${de.lower_limit}`,de.lower_limit!==null&&de.lower_limit!==void 0&&de.upper_limit!==null&&de.upper_limit!==void 0&&" - ",de.upper_limit!==null&&de.upper_limit!==void 0&&`< ${de.upper_limit}`]})]},de.name)})})]}):r.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"12px",padding:"10px"},children:((ge=i[ee.id])==null?void 0:ge.report_content)||"No report content entered."})]},ee.id)})]})]})})},RIe=()=>{const{orderId:t}=$a(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(""),f=v.useCallback(async g=>{if(!g){l("No Order ID specified in the URL."),s(!1),a(null);return}s(!0),l(null),a(null);try{console.log(`Fetching order details for ID: ${g}`);const x=await le(`/api/lab/orders/${g}/report`);if(!x.ok){let j;try{j=await x.json()}catch{j={message:`Server returned status ${x.status}`}}throw console.error("Fetch order details error response:",j),new Error(j.message||`Failed to fetch order details: ${x.status}`)}const b=await x.json();if(console.log("Received order data:",b),!b)throw console.error("Invalid order data structure:",b),new Error("Invalid order data received from server.");a(b)}catch(x){console.error("Error fetching order details:",x),l(x instanceof Error?x.message:"An unknown error occurred while fetching the order details")}finally{s(!1)}},[le]);v.useEffect(()=>{f(t)},[t,f]),v.useEffect(()=>{(async()=>{try{const x=await le("/api/clinics/settings");if(x.ok){const b=await x.json();u(b.labLetterheadUrl||"")}}catch(x){console.error("Error fetching clinic settings:",x)}})()},[]);const p=()=>{n&&UM(n)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(vr,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(En,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:r.jsx(sn,{size:16})}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(Nf,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(cq,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",t||"None Specified",")"]}),i&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),o&&!i&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(Fr,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:o}),t&&r.jsx("button",{onClick:()=>f(t),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[c&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:c,alt:"Lab Letterhead",className:"print-letterhead-image"})}),!i&&!o&&(n==null?void 0:n.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Yn,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",n.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",n.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",n.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",n.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",n.Patient.id]}),n.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",n.Patient.phone]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. By:"})," ",n.referral_doctor||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Report Date:"})," ",n.report_date?new Date(n.report_date).toLocaleString():"N/A"]})]})]}),!i&&!o&&(n==null?void 0:n.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Xr,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const g=JSON.parse(n.report_content||"{}");return typeof g=="object"&&g!==null&&n.tests?n.tests.map(x=>r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:x.name}),g[x.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(g[x.id]).map(([b,j])=>{var k;const w=(k=x.default_parameters)==null?void 0:k.find(P=>P.name===b),_=typeof j=="string"?parseFloat(j):typeof j=="number"?j:NaN,T=(w==null?void 0:w.type)==="number"&&!isNaN(_)&&(w.lower_limit!=null&&_<w.lower_limit||w.upper_limit!=null&&_>w.upper_limit),C=(w==null?void 0:w.type)==="boolean"?j===!0||j==="true"?"Reactive":"Non-Reactive":String(j),A=(w==null?void 0:w.type)==="boolean"&&(j===!0||j==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:b}),r.jsxs("td",{className:`${T?"abnormal-result":""} ${A?"reactive-result":""}`,children:[C," ",w==null?void 0:w.unit]}),r.jsx("td",{children:w&&w.type==="number"&&(w.lower_limit!==null||w.upper_limit!==null)?r.jsxs(r.Fragment,{children:[w.lower_limit!=null&&` > ${w.lower_limit}`,w.lower_limit!=null&&w.upper_limit!=null&&" - ",w.upper_limit!=null&&` < ${w.upper_limit}`,w.unit&&` ${w.unit}`]}):((w==null?void 0:w.type)==="boolean","N/A")})]},b)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},x.id)):r.jsx(fd,{remarkPlugins:[pd],children:n.report_content})}catch{return r.jsx(fd,{remarkPlugins:[pd],children:n.report_content||"*No findings recorded.*"})}})()})]})]}),!i&&!o&&!(n!=null&&n.report_content)&&!(n!=null&&n.Patient)&&t&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",t,". The order might be processing, does not exist, or the ID is incorrect."]}),!t&&!i&&!o&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(vr,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},LIe=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(null),[u,f]=v.useState(e);Kc(),v.useEffect(()=>{const j=setTimeout(()=>{f(e)},500);return()=>{clearTimeout(j)}},[e]),v.useEffect(()=>{p()},[u]);const p=async()=>{const j=e.trim();if(!j){o([]),c(null);return}i(!0),c(null),o([]),console.log(`Searching for: ${j}`);try{const w=await le("/api/lab");if(!w.ok){let P;try{P=await w.json()}catch{P={message:`Server returned status ${w.status}`}}throw console.error("Search fetch error response:",P),new Error(P.message||`HTTP error! status: ${w.status}`)}const{orders:_}=await w.json();console.log("Received lab orders for search:",_);const C=_.filter(P=>!!P.report_content).map(P=>{var I,R;return{id:P.id,labTokenNumber:String(P.lab_token_number??"N/A"),patientName:((I=P.Patient)==null?void 0:I.name)||"N/A",patientId:P.patient_id,patientTokenNumber:String(((R=P.Patient)==null?void 0:R.patient_token_number)??"N/A"),tests:(P.tests||[]).map(q=>q.name||"Unknown Test"),date:xf(new Date(P.createdAt),"yyyy-MM-dd"),status:P.status}}),A=new uo(C,{keys:["patientName","labTokenNumber","patientTokenNumber","tests","id","patientId"],threshold:.3,ignoreLocation:!0}),k=e.trim()?A.search(e).map(P=>P.item):C;console.log("Filtered search results:",k),o(k),k.length===0&&j?c(`No matching reports found for "${j}".`):c(null)}catch(w){console.error("Failed to search lab reports:",w),c(w instanceof Error?w.message:"An unknown error occurred during search")}finally{i(!1)}},g=j=>{console.log(`Result clicked, navigating to view report for order ID: ${j}`),t(`/lab/view-report/${j}`)},x=j=>{switch(j){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:j,color:"text-gray-600 bg-gray-100"}}},b=j=>{switch(j){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(sn,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(En,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:e,onChange:j=>n(j.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[a&&r.jsx("div",{className:"loading-text",children:"Searching..."}),l&&!a&&r.jsxs("div",{className:"error-text",children:[r.jsx(Fr,{size:20,className:"inline mr-2"})," ",l]}),s.length>0&&!a&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:s.map(j=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(j.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(vX,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),j.patientName," (Token: ",j.patientTokenNumber,")"]}),r.jsx("span",{className:b(j.status),children:x(j.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(Xr,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",j.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(lZ,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",j.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx(YD,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",j.date]})]})]},j.id))}),!a&&s.length===0&&!l&&e.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',e,'".']}),!a&&s.length===0&&!l&&!e.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},Hz=()=>{const{patientId:t}=$a(),e=Lt(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(null),[f,p]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){l("Patient ID is missing from the URL."),s(!1);return}s(!0),l(null),a([]),p(null);try{const b=await le(`/api/patients/${t}`);if(b.ok){const _=await b.json();p(_.name||`Patient ID: ${t}`)}else console.warn(`Failed to fetch patient name for ID ${t}`),p(`Patient ID: ${t}`);const j=await le(`/api/lab/patient/${t}`);if(!j.ok){const _=await j.json().catch(()=>({}));throw new Error(_.message||`HTTP error! status: ${j.status}`)}const w=await j.json();a(w||[])}catch(b){console.error("Error fetching data:",b),l(`Failed to load data: ${b.message}`)}finally{s(!1)}})()},[t]);const g=x=>{x.report_content?e(`/lab/view-report/${x.id}`):e(`/lab/enter-report/${x.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",f?`for ${f}`:`for Patient ID: ${t}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!t){alert("Patient ID is missing. Cannot create a new report.");return}try{const x=await le("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:t})});if(!x.ok){const j=await x.json().catch(()=>({message:`Failed to create new lab order: ${x.status}`}));throw new Error(j.message||`Failed to create new lab order: ${x.status}`)}const b=await x.json();e(`/lab/enter-report/${b.newOrderId}`)}catch(x){console.error("Error creating new lab order:",x),alert(`Error creating new lab order: ${x.message}`)}},className:"lab-inventory-button",disabled:!t,title:t?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(Ds,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(sn,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:i?r.jsx("div",{className:"skeleton-reports-list",children:[1,2,3].map(x=>r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsx(te,{variant:"circular",width:24,height:24,style:{marginRight:"15px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx(te,{width:"40%",height:20,style:{marginBottom:"8px"}}),r.jsx(te,{width:"60%",height:16})]})]}),r.jsx("div",{style:{marginLeft:"10px"},children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})})]},x))}):o?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(mZ,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:o})]}):n.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Xr,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(vr,{to:`/lab/create-order/${t}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):c?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",c.report_date?xf(new Date(c.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>u(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(sn,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(c.tests||[]).map(x=>x.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(fd,{remarkPlugins:[pd],children:c.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:n.map(x=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(x),tabIndex:0,onKeyPress:b=>b.key==="Enter"&&g(x),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Xr,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",xf(new Date(x.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",x.tests&&x.tests.length>0?x.tests.map(b=>b.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.status&&r.jsx("span",{className:$Ie(x.status),children:FIe(x.status)}),r.jsx(yd,{size:20,style:{color:"#6c757d"}})]})]},x.id))})})]})})},FIe=t=>{if(!t)return"Unknown";switch(t.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t.charAt(0).toUpperCase()+t.slice(1)}},$Ie=t=>{if(!t)return"status-badge";switch(t.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},FG=()=>{const t=Lt(),[e]=LB(),n=e.get("search")||"",[a,i]=v.useState("pharmacy");return Kc(void 0,300),r.jsxs("div",{className:"inventory-management-container",style:{padding:"10px 15px",backgroundColor:"var(--background-color)",minHeight:"100vh"},children:[r.jsxs("div",{className:"inventory-header",style:{marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"action-icon-button",title:"Go Back",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-primary)"},children:r.jsx(sn,{size:20})}),r.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700",color:"var(--text-primary)"},children:"Inventory Management"})]}),r.jsxs("div",{className:"inventory-tabs",style:{display:"flex",gap:"4px",backgroundColor:"var(--card-bg, #f3f4f6)",padding:"3px",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("button",{onClick:()=>i("pharmacy"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="pharmacy"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="pharmacy"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="pharmacy"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="pharmacy"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="pharmacy"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(so,{size:16}),"Pharmacy Stock"]}),r.jsxs("button",{onClick:()=>i("lab"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="lab"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="lab"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="lab"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="lab"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="lab"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(us,{size:16}),"Lab Stock"]})]})]}),r.jsx("div",{className:"inventory-content",style:{backgroundColor:"var(--card-bg, #fff)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:a==="pharmacy"?r.jsx(IG,{isEmbedded:!0,initialSearch:n}):r.jsx(qM,{isEmbedded:!0})})]})},zIe=({fetchWithAuth:t})=>{const e=Lt(),[n,a]=v.useState(!0),[i,s]=v.useState([]),[o,l]=v.useState(null),[c,u]=v.useState(null),f=v.useCallback(async()=>{a(!0),l(null);try{const b=await(await t("/staff")).json();s(b.map(j=>({...j,id:j._id||j.id})))}catch(x){l(`Failed to load staff data: ${x.message}`),s([])}finally{a(!1)}},[t]);v.useEffect(()=>{f()},[f]),v.useEffect(()=>{if(c){const x=setTimeout(()=>u(null),5e3);return()=>clearTimeout(x)}},[c]);const p=x=>{switch(x){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},g=x=>{switch(x){case"doctor":return r.jsx(Sf,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(uq,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx(so,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(us,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(hd,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(zi,{size:16,className:"mr-2 text-gray-500"})}};return n?r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(te,{width:40,height:40,variant:"circular"}),r.jsx(te,{width:200,height:32})]}),r.jsx(te,{width:150,height:40})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(te,{width:80,height:32})})]},x))})]})})]}):r.jsxs("div",{className:"staff-page-container",children:[c&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[c.type==="success"?r.jsx(Wo,{size:18,className:"mr-2"}):r.jsx(Fr,{size:18,className:"mr-2"}),r.jsx("span",{children:c.message}),r.jsx("button",{onClick:()=>u(null),className:"ml-auto text-xl font-bold",children:""})]}),o&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(Fr,{size:18,className:"mr-2 text-red-500"}),o,r.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(sn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>e("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(Vn,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0&&!n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):i.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsx("td",{className:"hidden md:table-cell",children:x.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(x.role)}`,children:[g(x.role),x.role.charAt(0).toUpperCase()+x.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:x.role==="doctor"?x.opd_fee?parseFloat(String(x.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>e(`/dashboard/staff/edit/${x.id}`),className:"edit-link",disabled:x.role==="admin",title:"Edit Staff",children:[r.jsx(qi,{size:16})," Edit"]})})]},x.id))})]})})]})},Gz=()=>{var Te,oe,be,_e,Ne,ee,ge,de,ae,ne,se,je,Ee,J,ye,me,he,De,nt;const{patientId:t,billId:e}=$a(),n=Lt(),[a,i]=v.useState(null),[s,o]=v.useState(!0),[l,c]=v.useState(null),[u,f]=v.useState(""),[p,g]=v.useState("cash"),[x,b]=v.useState(!1),[j,w]=v.useState(""),[_,T]=v.useState(""),[C,A]=v.useState(""),[k,P]=v.useState(""),[I,R]=v.useState([]),[q,U]=v.useState(""),[F,B]=v.useState(!1),[V,W]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),G=()=>{V.length<5&&W(Fe=>[...Fe,{id:Date.now().toString(),method:"cash",amount:0}])},z=Fe=>{V.length>2&&W(Ge=>Ge.filter(it=>it.id!==Fe))},Y=(Fe,Ge,it)=>{W(wt=>wt.map(we=>we.id===Fe?Ge==="method"?{...we,method:it}:{...we,amount:Math.max(0,it)}:we))},Q=(Fe,Ge)=>{const it=V.filter(we=>we.id!==Fe).reduce((we,Qe)=>we+Qe.amount,0),wt=Math.max(0,Ge-it);W(we=>we.map(Qe=>Qe.id===Fe?{...Qe,amount:wt}:Qe))},[K,$]=v.useState([]),[ie,xe]=v.useState(0),X=((Te=a==null?void 0:a.patient)==null?void 0:Te.insurance_type)==="no_cash_insurance";v.useEffect(()=>{g(X?"no_cash_insurance":"cash")},[X]),v.useEffect(()=>{e&&(async()=>{o(!0),c(null);try{const[Ge,it,wt]=await Promise.all([le(`/api/bills/${e}`),le("/api/clinics/settings").catch(()=>null),le(`/api/bills?patientId=${t}`).catch(()=>null)]);if(!Ge.ok)throw new Error(`HTTP error! status: ${Ge.status}`);const we=await Ge.json();if(!we||!we.bill||!we.calculated)throw new Error("Incomplete data structure received from backend.");if(we.bill.type!=="admission")throw new Error(`Unexpected bill type: ${we.bill.type}. Expected 'admission'.`);const Qe=Array.isArray(we.admissionPayments)?we.admissionPayments:[];if(i({...we.bill,amount:we.bill.amount,created_at:we.bill.createdAt||we.bill.created_at,items:(we.bill.items||[]).map(Xe=>({...Xe,price:parseFloat(Xe.price)||0,quantity:parseInt(Xe.quantity)||1})),AdmissionPayments:Qe,calculated:we.calculated,admissionRecord:we.admissionRecord,patient:we.bill.Patient?{id:we.bill.Patient.id,name:we.bill.Patient.name,admission_date:we.bill.Patient.admission_date,discharge_date:we.bill.Patient.discharge_date,token:we.bill.Patient.patient_token_number||we.bill.Patient.token,insurance_type:we.bill.Patient.insurance_type}:void 0}),it&&it.ok){const Xe=await it.json();w(Xe.name||""),T(Xe.address||""),A(Xe.notes||""),P(Xe.upi_id||"")}try{const Xe=await le(`/api/patients/${t}/admission-payments`);if(Xe.ok){const ut=await Xe.json();R(ut)}}catch(Xe){console.error("Failed to fetch payment history:",Xe)}if(wt&&wt.ok){const ut=((await wt.json()).bills||[]).filter(bt=>bt.type==="admission"&&bt.id!==e).map(bt=>{var ot,Tt;const ke=bt.AdmissionRecord;return{id:bt.id,amount:ke?parseFloat(ke.total_amount):parseFloat(bt.amount)||0,status:ke?ke.balance<=0||ke.status==="discharged"&&ke.balance<=0?"paid":"pending":bt.status,created_at:bt.createdAt||bt.created_at,admission_date:ke?ke.admission_date:((ot=bt.Patient)==null?void 0:ot.admission_date)||bt.admission_date,discharge_date:ke?ke.discharge_date:((Tt=bt.Patient)==null?void 0:Tt.discharge_date)||bt.discharge_date,admissionRecord:ke}});$(ut);const Ct=ut.filter(bt=>bt.admissionRecord?bt.admissionRecord.balance>0:bt.status!=="paid").reduce((bt,ke)=>ke.admissionRecord?bt+(typeof ke.admissionRecord.balance=="string"?parseFloat(ke.admissionRecord.balance):ke.admissionRecord.balance):bt+ke.amount,0);xe(Ct)}}catch(Ge){console.error("Failed to fetch admission bill details:",Ge),c(Ge instanceof Error?Ge.message:"An unknown error occurred")}finally{o(!1)}})()},[e,t]),v.useEffect(()=>{(async()=>{if(!e){if(!t){c("Patient ID is missing."),o(!1);return}try{o(!0);const Ge=await le(`/api/patients/${t}`);if(Ge.ok){const it=await Ge.json();if(it){if(it.admission_date&&!it.discharge_date){const we=await le(`/api/patients/${t}/active-bill?type=admission`);if(we.ok){const Qe=await we.json();if(Qe&&Qe.id){n(`/patient/${t}/admission-bill/${Qe.id}`,{replace:!0});return}}}i({id:0,patient_id:it.id,type:"admission",amount:"0",status:"pending",created_at:new Date().toISOString(),AdmissionPayments:[],calculated:{totalPaid:0,totalDue:0,balance:0,daysStayed:0,perDayCharge:0},patient:{id:it.id,name:it.name,admission_date:it.admission_date,discharge_date:it.discharge_date,token:it.token,insurance_type:it.insurance_type}});const wt=await le(`/api/bills?patientId=${t}`);if(wt.ok){const Qe=((await wt.json()).bills||[]).filter(Xe=>Xe.type==="admission").map(Xe=>{var Ct,bt;const ut=Xe.AdmissionRecord;return{id:Xe.id,amount:ut?parseFloat(ut.total_amount):parseFloat(Xe.amount)||0,status:ut?ut.balance<=0||ut.status==="discharged"&&ut.balance<=0?"paid":"pending":Xe.status,created_at:Xe.createdAt||Xe.created_at,admission_date:ut?ut.admission_date:((Ct=Xe.Patient)==null?void 0:Ct.admission_date)||Xe.admission_date,discharge_date:ut?ut.discharge_date:((bt=Xe.Patient)==null?void 0:bt.discharge_date)||Xe.discharge_date,admissionRecord:ut}});$(Qe)}}else c("Patient not found")}}catch(Ge){console.error("Error fetching patient status:",Ge),c("Failed to load patient details")}finally{o(!1)}}})()},[t,e,n]);const Ie=async()=>{if(t){b(!0);try{const Fe=await le(`/api/patients/${t}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Fe.ok){const it=await Fe.json();throw new Error(it.message||"Failed to admit patient")}const Ge=await Fe.json();Ge.bill&&Ge.bill.id?n(`/patient/${t}/admission-bill/${Ge.bill.id}`):window.location.reload()}catch(Fe){c(Fe instanceof Error?Fe.message:"Failed to admit patient"),b(!1)}}},$e=async()=>{if(t&&window.confirm("Are you sure you want to discharge this patient? This will finalize the bill.")){b(!0);try{const Fe=await le(`/api/patients/${t}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Fe.ok){const Ge=await Fe.json();throw new Error(Ge.message||"Failed to discharge patient")}window.location.reload()}catch(Fe){c(Fe instanceof Error?Fe.message:"Failed to discharge patient"),b(!1)}}},Be=((oe=a==null?void 0:a.patient)==null?void 0:oe.admission_date)&&!((be=a==null?void 0:a.patient)!=null&&be.discharge_date),Le=!!((_e=a==null?void 0:a.patient)!=null&&_e.discharge_date);v.useEffect(()=>{var it,wt;const Ge=Number(((it=a==null?void 0:a.calculated)==null?void 0:it.balance)??((wt=a==null?void 0:a.admissionRecord)==null?void 0:wt.balance)??0)+ie;if(Ge>0&&k){const we=`upi://pay?pa=${k}&pn=${encodeURIComponent(j||"Clinic")}&am=${Ge.toFixed(2)}&cu=INR`;U(we)}else U("")},[a,ie,k,j]);const ce=V.reduce((Fe,Ge)=>Fe+Ge.amount,0),Se=async Fe=>{var we,Qe;Fe.preventDefault();const it=Number(((we=a==null?void 0:a.calculated)==null?void 0:we.balance)??((Qe=a==null?void 0:a.admissionRecord)==null?void 0:Qe.balance)??0)+ie,wt=F?ce:parseFloat(u);if(!t||wt<=0||wt>it+.1){c(`Please enter a valid amount. Max payable: ${it.toFixed(2)}`);return}c(null),b(!0);try{if(F){for(const Ct of V)if(Ct.amount>0){const bt=await le(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:Ct.amount,payment_mode:Ct.method})});if(!bt.ok){const ke=await bt.json();throw new Error(ke.message||`Failed to record ${Ct.method} payment`)}}}else{const Ct=await le(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(u),payment_mode:p})});if(!Ct.ok){const bt=await Ct.json();throw new Error(bt.message||`HTTP error! status: ${Ct.status}`)}}const ut=await(await le(`/api/bills/${e}`)).json();if(ut&&ut.bill&&ut.calculated&&ut.admissionPayments)i({...ut.bill,amount:parseFloat(ut.bill.amount),AdmissionPayments:ut.admissionPayments,calculated:ut.calculated,patient:ut.bill.Patient?{id:ut.bill.Patient.id,name:ut.bill.Patient.name,admission_date:ut.bill.Patient.admission_date,discharge_date:ut.bill.Patient.discharge_date,token:ut.bill.Patient.token,insurance_type:ut.bill.Patient.insurance_type}:void 0});else throw new Error("Invalid data structure received after payment submission.");f(""),g("cash"),F&&(W([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),B(!1)),setTimeout(()=>{window.print()},100)}catch(Xe){console.error("Failed to submit payment:",Xe),c(Xe instanceof Error?Xe.message:"Failed to record payment")}finally{b(!1)}},Ve=()=>{window.print()};if(s)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(te,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]})]})]})})]})]})});if(l)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>n(-1),className:"back-button",children:r.jsx(sn,{size:20})}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"error-message-box",children:["Error: ",l]})]})});if(!a||!a.calculated)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"error-message-box",children:"No bill details found or data is incomplete."})});const Ae=Number(a.calculated&&a.calculated.balance!==void 0?a.calculated.balance:a.admissionRecord?a.admissionRecord.balance:0),ue=a.status==="paid"||Ae<=0;return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"ADMISSION BILL"}),r.jsx("h2",{className:"clinic-name-print",children:j||"Hospital"}),(_||C)&&r.jsxs("div",{className:"clinic-details-print",children:[_&&r.jsx("span",{className:"small-text clinic-address",children:_}),C&&r.jsx("span",{className:"small-text clinic-notes",children:C})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient"]})," ",((Ne=a.patient)==null?void 0:Ne.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((ee=a.patient)==null?void 0:ee.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(sn,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{children:"Patient Information"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[!Be&&!Le&&r.jsxs("button",{onClick:Ie,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(VN,{size:16})," Admit Patient"]}),Be&&r.jsxs("button",{onClick:$e,disabled:x,className:"secondary-button",style:{fontSize:"0.85em",padding:"6px 12px",background:"#dc3545",color:"white"},children:[r.jsx(aq,{size:16})," Discharge"]}),Le&&r.jsxs("button",{onClick:Ie,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx($J,{size:16})," Re-Admit"]})]})]}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",((ge=a.patient)==null?void 0:ge.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((de=a.patient)==null?void 0:de.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(UQ,{size:16})," Bill ID"]})," ",a.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Created"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Admission Charges Breakdown"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsxs("tbody",{children:[a.admissionRecord?r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]})]}),a.admissionRecord.days_stayed?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString(),a.admissionRecord.discharge_date?` - ${new Date(a.admissionRecord.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.admissionRecord.days_stayed," days"]}),r.jsxs("td",{children:["",Number(a.admissionRecord.per_day_charge).toFixed(2)]}),r.jsxs("td",{children:["",(Number(a.admissionRecord.days_stayed)*Number(a.admissionRecord.per_day_charge)).toFixed(2)]})]}):a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges (Ongoing)",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString()," - Today)"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]}):null]}):r.jsxs(r.Fragment,{children:[a.items&&a.items.length>0?a.items.map((Fe,Ge)=>r.jsxs("tr",{children:[r.jsx("td",{children:Ge+1}),r.jsx("td",{children:Fe.name}),r.jsx("td",{children:Fe.quantity}),r.jsxs("td",{children:["",Fe.price.toFixed(2)]}),r.jsxs("td",{children:["",(Fe.price*Fe.quantity).toFixed(2)]})]},`item-${Ge}`)):r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Initial Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]})]}),a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:(((ae=a.items)==null?void 0:ae.length)||1)+1}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",(ne=a.patient)!=null&&ne.admission_date?new Date(a.patient.admission_date).toLocaleDateString():"",(se=a.patient)!=null&&se.discharge_date?` - ${new Date(a.patient.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]})]}),r.jsxs("tr",{className:"subtotal-row current-admission-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Current Admission Total"}),r.jsxs("td",{children:["",Number(((je=a.calculated)==null?void 0:je.totalDue)??((Ee=a.admissionRecord)==null?void 0:Ee.total_amount)??0).toFixed(2)]})]}),K.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("tr",{className:"section-header-row previous-admissions-header",children:r.jsx("td",{colSpan:5,style:{fontWeight:600,textAlign:"center"},children:"Previous Admissions"})}),K.map((Fe,Ge)=>r.jsxs("tr",{className:Fe.status!=="paid"?"bill-row-unpaid":"bill-row-paid",children:[r.jsx("td",{children:Ge+1}),r.jsxs("td",{children:["Admission - ",Fe.admission_date?new Date(Fe.admission_date).toLocaleDateString():"N/A",Fe.discharge_date&&r.jsxs("small",{style:{display:"block",color:"inherit",opacity:.8,fontSize:"0.75em"},children:["Discharged: ",new Date(Fe.discharge_date).toLocaleDateString()]})]}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Fe.amount.toFixed(2)]}),r.jsxs("td",{className:Fe.status!=="paid"?"text-danger":"text-success",children:["",Fe.amount.toFixed(2),Fe.status==="paid"&&r.jsx("small",{style:{marginLeft:"4px"},children:"(Paid)"})]})]},Fe.id)),ie>0&&r.jsxs("tr",{className:"subtotal-row unpaid-balance-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Previous Unpaid Balance"}),r.jsxs("td",{children:["",ie.toFixed(2)]})]})]}),r.jsxs("tr",{className:`grand-total-row-dynamic ${ie>0?"grand-total-unpaid":"grand-total-paid"}`,children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"GRAND TOTAL"}),r.jsxs("td",{style:{fontSize:"1.1em"},children:["",(Number(((J=a.calculated)==null?void 0:J.totalDue)??((ye=a.admissionRecord)==null?void 0:ye.total_amount)??0)+ie).toFixed(2)]})]})]})]})]}),I.length>0&&r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Payment History"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DATE"}),r.jsx("th",{children:"MODE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsx("tbody",{children:I.map((Fe,Ge)=>{var it;return r.jsxs("tr",{children:[r.jsx("td",{children:Ge+1}),r.jsx("td",{children:Fe.payment_date?new Date(Fe.payment_date).toLocaleDateString():"N/A"}),r.jsx("td",{style:{textTransform:"capitalize"},children:((it=Fe.payment_mode)==null?void 0:it.replace(/_/g," "))||"N/A"}),r.jsxs("td",{children:["",(Number(Fe.amount_paid)||0).toFixed(2)]})]},Fe.id)})})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",Number(((me=a.calculated)==null?void 0:me.totalDue)??((he=a.admissionRecord)==null?void 0:he.total_amount)??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Number(((De=a.calculated)==null?void 0:De.totalPaid)??((nt=a.admissionRecord)==null?void 0:nt.total_paid)??0).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Balance Due: ",Ae.toFixed(2)]})})]}),q&&Ae>0&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(Fa,{value:q,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",(a.calculated.totalDue||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Days Stayed"}),r.jsx("span",{children:a.calculated.daysStayed??0})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{style:{color:"#28a745"},children:["",(a.calculated.totalPaid||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Balance Due"}),r.jsxs("strong",{style:{color:Ae>0?"#dc3545":"#28a745"},children:["",Ae.toFixed(2)]})]}),K.length>0&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #dee2e6"},children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",color:"#495057"},children:"Previous Admissions"}),K.map(Fe=>r.jsxs("div",{className:"summary-row",style:{fontSize:"0.8rem"},children:[r.jsxs("span",{style:{color:"#6c757d"},children:[Fe.admission_date?new Date(Fe.admission_date).toLocaleDateString():"N/A",Fe.status!=="paid"&&r.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"(Unpaid)"})]}),r.jsxs("span",{style:{color:Fe.status!=="paid"?"#dc3545":"#28a745"},children:["",Fe.amount.toFixed(2)]})]},Fe.id)),ie>0&&r.jsxs("div",{className:"summary-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e9ecef"},children:[r.jsx("strong",{style:{color:"#dc3545",fontSize:"0.875rem"},children:"Previous Balance"}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",ie.toFixed(2)]})]})]}),ie>0&&r.jsxs("div",{className:"summary-row grand-total-row",style:{marginTop:"0.75rem",background:"#fff3cd"},children:[r.jsx("strong",{style:{color:"#856404"},children:"Total Outstanding"}),r.jsxs("strong",{style:{color:"#856404"},children:["",(Ae+ie).toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:q&&Ae>0?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:q,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):Ae<=0?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#28a745"},children:[r.jsx(pv,{size:48}),r.jsx("p",{style:{marginTop:"10px",fontWeight:600},children:"Fully Paid"})]}):r.jsx("p",{children:"UPI QR code not available."})}),!ue&&r.jsxs("form",{onSubmit:Se,children:[r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>B(!F),disabled:x,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:F?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:F?"rgba(79, 172, 254, 0.1)":"transparent",color:F?"#4facfe":"#666",cursor:x?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),F?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ce.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:V.map((Fe,Ge)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Ge+1}),r.jsxs("select",{value:Fe.method,onChange:it=>Y(Fe.id,"method",it.target.value),className:"split-payment-select",disabled:x,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Fe.amount||"",onChange:it=>Y(Fe.id,"amount",parseFloat(it.target.value)||0),className:"split-payment-input",disabled:x})]}),V.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>Q(Fe.id,Ae+ie),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining balance",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>z(Fe.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},Fe.id))}),V.length<5&&r.jsxs("button",{type:"button",onClick:G,className:"split-payment-add-btn",disabled:x,children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Max Payable:"}),r.jsxs("span",{style:{fontWeight:600},children:["",(Ae+ie).toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${ce<=Ae+ie+.1?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:ce<=Ae+ie+.1?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",ce.toFixed(2)]})]}),ce>Ae+ie+.1&&r.jsx("div",{className:"split-payment-warning",children:" Amount exceeds balance!"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"payment-input-group",style:{marginBottom:"15px"},children:[r.jsx("label",{htmlFor:"paymentAmount",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Amount ()"}),r.jsx("input",{type:"number",id:"paymentAmount",value:u,onChange:Fe=>f(Fe.target.value),placeholder:`Max ${(Ae+ie).toFixed(2)}`,min:"0.01",step:"0.01",max:Ae+ie,className:"payment-mode-select",required:!0})]}),r.jsxs("div",{className:"payment-input-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:p,onChange:Fe=>g(Fe.target.value),className:"payment-mode-select",disabled:X,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),X&&r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"})]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{type:"button",onClick:Ve,className:"secondary-button print-preview-button",children:"Print Preview"}),r.jsx("button",{type:"submit",className:"primary-button",disabled:x||!F&&(!u||parseFloat(u)<=0||parseFloat(u)>Ae+ie)||F&&(ce<=0||ce>Ae+ie+.1),children:x?"Processing...":"Record Payment & Print"})]})]}),ue&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Ve,className:"secondary-button",children:"Print Bill"})})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for choosing our hospital!"}),r.jsx("p",{children:"This is a computer-generated bill and does not require a signature."})]})]})})},BIe=t=>{switch(t){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},qIe=()=>{const{orderId:t}=$a(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(!1),[f,p]=v.useState({}),[g,x]=v.useState(""),[b,j]=v.useState(""),[w,_]=v.useState("cash"),T=v.useMemo(()=>(n==null?void 0:n.medications.reduce((F,B)=>{const V=B.total_price??0,W=V*(B.discount_percentage??0)/100;return F+V-W},0))??0,[n==null?void 0:n.medications]),C=5,A=v.useMemo(()=>!n||!n.medications?0:n.medications.reduce((F,B,V)=>{var K,$;const W=B.drug_id??`index-${V}`,G=((K=f[W])==null?void 0:K.pack)||0,z=(($=f[W])==null?void 0:$.loose)||0,Y=B.pack_price??0,Q=B.loose_price??0;return F+G*Y+z*Q},0),[n,f]),k=v.useCallback(async()=>{if(!t){l("Order ID is missing."),s(!1);return}s(!0),l(null);try{const F=await le(`/api/pharmacy-orders/${t}`);if(!F.ok)throw F.status===404?new Error(`Order with ID ${t} not found.`):new Error(`Failed to fetch order details: ${F.statusText} (${F.status})`);const B=await F.json();console.log("Fetched order data after return:",B);const W=B.medications.map(z=>z.pack_price&&z.loose_price&&z.loose_price>0?{...z,unitsPerPack:Math.round(z.pack_price/z.loose_price)}:{...z,unitsPerPack:0}).map(z=>({...z,discount_percentage:z.discount_percentage??0}));a({...B,medications:W});const G={};W.forEach((z,Y)=>{const Q=z.drug_id??`index-${Y}`;G[Q]={pack:0,loose:0}}),p(G)}catch(F){console.error("Failed to fetch order details:",F),l(F.message||"Failed to load order details.")}finally{s(!1)}},[t]);v.useEffect(()=>{k()},[k]),v.useEffect(()=>{(async()=>{try{const B=await le("/api/clinics/settings");if(!B.ok)throw new Error("Failed to fetch clinic settings");const V=await B.json();console.log("Fetched clinic settings:",V),x(V.upi_id||"")}catch(B){console.error("Error fetching clinic settings:",B)}})()},[]),v.useEffect(()=>{if((n==null?void 0:n.order_total)!==void 0&&n.order_total>0&&g){const F=`upi://pay?pa=${g}&pn=ClinicName&am=${n.order_total.toFixed(2)}&cu=INR`;j(F)}else j("")},[n==null?void 0:n.order_total,g]);const P=(F,B)=>{a(V=>{if(!V)return null;const W=V.medications.map((z,Y)=>(z.drug_id??`index-${Y}`)===F?{...z,discount_percentage:isNaN(B)?0:B}:z),G=W.reduce((z,Y)=>{const Q=Y.total_price??0,K=Q*(Y.discount_percentage??0)/100;return z+Q-K},0);return{...V,medications:W,order_total:G}})},I=(F,B,V)=>{p(W=>{const G=V.unitsPerPack||0,Y=V.pack_quantity*G+V.loose_quantity,Q=Math.max(0,Math.min(B,Y));let K=0,$=Q;return G>0&&(K=Math.floor(Q/G),$=Q%G),{...W,[F]:{pack:K,loose:$}}})},R=async()=>{const F=n==null?void 0:n.medications.map((B,V)=>{var Y,Q;const W=B.drug_id??`index-${V}`,G=((Y=f[W])==null?void 0:Y.pack)||0,z=((Q=f[W])==null?void 0:Q.loose)||0;return G>0||z>0?{drug_id:B.drug_id,name:B.name,pack_quantity:B.pack_quantity,loose_quantity:B.loose_quantity,returnPackQuantity:G,returnLooseQuantity:z}:null}).filter(B=>B!==null);if(!F||F.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!t){alert("Order ID is missing. Cannot process return.");return}if(!F){alert("Could not prepare items for return.");return}u(!0),l(null);try{const B=await le(`/api/pharmacy-orders/${t}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:F})}),V=await B.json();if(!B.ok)throw new Error(V.message||`Failed to process return: ${B.statusText}`);const W={};n==null||n.medications.forEach((G,z)=>{const Y=G.drug_id??`index-${z}`;W[Y]={pack:0,loose:0}}),p(W),k()}catch(B){console.error("Failed to process return:",B),l(B.message||"An error occurred while processing the return."),alert(`Error processing return: ${B.message||"Unknown error"}`)}finally{u(!1)}};if(i)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(o)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(sn,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",o]})]});if(!n)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(sn,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const q=()=>{window.print()},U=BIe(n.status);return r.jsx("div",{className:"pharmacy-order-details-page",children:r.jsxs("div",{className:"order-details-container printable-section",children:[r.jsxs("div",{className:"order-details-header no-print",children:[r.jsx("h1",{children:"Pharmacy Order Details"}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(sn,{size:20})}),r.jsxs("button",{onClick:q,className:"print-button",children:[r.jsx(Nf,{size:18})," Print Bill"]})]})]}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{children:"Mahajan Pharmacy"}),r.jsxs("div",{className:"clinic-details-print",children:[r.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),r.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),r.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Token:"})," 12"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),r.jsxs("div",{className:"order-info-section no-print",children:[r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Order ID:"})," ",n.id]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Patient:"})," ",n.patientName||"N/A"," (",n.patientTokenNumber||"N/A",")"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Prescribed By:"})," ",n.prescribedBy||"N/A"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`status-pill ${U.text} ${U.bg}`,children:n.status})]})]}),r.jsxs("div",{className:"medications-section",children:[r.jsx("h2",{children:"Medications Ordered"}),n.medications.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PACK QTY"}),r.jsx("th",{children:"PACK PRICE"}),r.jsx("th",{children:"LOOSE QTY"}),r.jsx("th",{children:"LOOSE PRICE"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),r.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),r.jsx("tbody",{children:n.medications.map((F,B)=>{var K,$;const V=F.drug_id??`index-${B}`,W=F.total_price??0,G=W*(F.discount_percentage??0)/100,z=W-G,Y=((K=f[V])==null?void 0:K.pack)||0,Q=(($=f[V])==null?void 0:$.loose)||0;return r.jsxs("tr",{children:[r.jsx("td",{children:F.name}),r.jsx("td",{children:F.pack_quantity??0}),r.jsx("td",{children:F.pack_price!=null?Number(F.pack_price).toFixed(2):"N/A"}),r.jsx("td",{children:F.loose_quantity??0}),r.jsx("td",{children:F.loose_price!=null?Number(F.loose_price).toFixed(2):"N/A"}),r.jsx("td",{children:F.price!=null?Number(F.price).toFixed(2):"N/A"})," ",r.jsx("td",{children:F.price!=null?Number(F.price).toFixed(2):"N/A"})," ",r.jsxs("td",{children:[r.jsx("input",{type:"number",value:F.discount_percentage??0,onChange:ie=>P(V,parseFloat(ie.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),r.jsxs("span",{className:"print-only",children:[F.discount_percentage??0,"%"]})]}),r.jsxs("td",{children:[C.toFixed(1),"%"]}),r.jsx("td",{children:z.toFixed(2)}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:F.pack_quantity,value:Y,onChange:ie=>{const X=(parseInt(ie.target.value,10)||0)*(F.unitsPerPack||0)+Q;I(V,X,F)},className:"return-quantity-input"})}),r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:F.loose_quantity+F.pack_quantity*(F.unitsPerPack||0)-Y*(F.unitsPerPack||0),value:Q,onChange:ie=>{const xe=parseInt(ie.target.value,10)||0,X=Y*(F.unitsPerPack||0)+xe;I(V,X,F)},className:"return-quantity-input"})})]})]},V)})})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",T.toFixed(2)]})}),r.jsxs("div",{className:"order-total-section no-print",children:[r.jsx("span",{className:"total-label",children:"Order Total:"}),r.jsxs("span",{className:"total-amount",children:["",T.toFixed(2)]})]}),r.jsxs("div",{className:"payment-section no-print",children:[r.jsxs("div",{className:"payment-mode-group",children:[r.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),r.jsxs("select",{id:"paymentMode",value:w,onChange:F=>_(F.target.value),className:"payment-mode-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),b&&r.jsxs("div",{className:"qr-code-container",children:[r.jsx(Fa,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]})]}),(n.status==="dispensed"||n.status==="billed")&&n.medications.length>0&&r.jsxs("div",{className:"return-action-section no-print",children:[A>0&&r.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",A.toFixed(2)]}),r.jsx("button",{onClick:R,disabled:Object.values(f).every(F=>F.pack===0&&F.loose===0)||c,className:"process-return-button",children:c?r.jsxs(r.Fragment,{children:[r.jsx(TE,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(TE,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},UIe=async()=>{const t=await le("/subscriptions");if(!t.ok)throw new Error("Failed to fetch subscription plans");return await t.json()},VIe=async t=>{const e=await le(`/subscriptions/${t}`);if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(n.message||"Failed to fetch subscription plan details")}return await e.json()},HIe=async t=>{const e=await le("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(n.message||"Failed to create subscription plan")}return await e.json()},GIe=async(t,e)=>{const n=await le(`/subscriptions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(a.message||"Failed to update subscription plan")}return await n.json()},WIe=async t=>{const e=await le(`/subscriptions/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(n.message||"Failed to deactivate subscription plan")}return await e.json()},YIe=async(t,e)=>{const n=await le("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:t,planId:e})});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(a.message||"Failed to initiate Razorpay subscription")}return await n.json()},KIe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),u=v.useCallback(async()=>{i(!0),o(null);try{const p=await UIe();n(p)}catch(p){o(p.message||"Failed to fetch subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{u()},[u]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await WIe(p),c({type:"success",message:"Plan deactivated successfully!"}),u()}catch(g){o(g.message||"Failed to deactivate plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}):r.jsx(Fr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Rt,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:16})}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>t("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(Vn,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(te,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(qi,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Wn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},QIe=()=>{const t=Lt(),[e,n]=v.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const u=g=>{const{name:x,value:b}=g.target;n(j=>({...j,[x]:b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await HIe(e),c({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}):r.jsx(Fr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Rt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:u,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:u,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:u})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:r.jsx(sn,{size:16})}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},XIe=()=>{const{id:t}=$a(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,u]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),u(!1);return}u(!0),p(null);try{const T=await VIe(t);a(T),s({name:T.name,description:T.description||"",price:T.price,period:T.period,interval:T.interval,razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{u(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:A}=T.target;s(k=>({...k,[C]:A}))},w=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await GIe(t,i),x({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const A=C.message||"Failed to update plan.";p(A),x({type:"error",message:A})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Wo,{size:18,className:"mr-2"}):r.jsx(Fr,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Rt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:w,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval||1,onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:r.jsx(sn,{size:16})}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},JIe=()=>{const{patientId:t}=$a(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(""),[c,u]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState("manual"),[b,j]=v.useState(!1),[w,_]=v.useState(null),T=v.useCallback(async()=>{u(!0),p(null);try{const k=await le(`/api/patients/${t}`);if(!k.ok){const q=await k.json();throw new Error(q.message||"Failed to fetch patient details")}const P=await k.json();a(P);const I=await le("/api/subscriptions");if(!I.ok){const q=await I.json();throw new Error(q.message||"Failed to fetch subscription plans")}const R=await I.json();s(R.filter(q=>q.status==="active"))}catch(k){console.error("Error fetching data:",k),p(`Failed to load data: ${k.message}`)}finally{u(!1)}},[t]);v.useEffect(()=>{t?T():(p("Patient ID is missing."),u(!1))},[t,T]);const C=(k,P)=>{const I=new Date(k),R=P.interval||1;switch(P.period){case"daily":I.setDate(k.getDate()+R);break;case"weekly":I.setDate(k.getDate()+R*7);break;case"monthly":I.setMonth(k.getMonth()+R);break;case"yearly":I.setFullYear(k.getFullYear()+R);break;default:console.warn(`Unknown subscription period: ${P.period}. Defaulting to 1 month.`),I.setMonth(k.getMonth()+1)}return I},A=async()=>{if(!t||!o){_("Please select a subscription plan.");return}const k=i.find(P=>P.id===o);if(!k){_("Selected plan details not found.");return}j(!0),_(null);try{const P=new Date,I=C(P,k);if(g==="manual"){const R={subscription_plan_id:o,subscription_status:"active",subscription_start_date:P.toISOString(),subscription_end_date:I.toISOString(),subscription_payment_method:"manual"},q=await le(`/api/patients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!q.ok){const U=await q.json();throw new Error(U.message||"Failed to start subscription manually")}e("/all-patients")}else if(g==="razorpay"){console.log("Initiating Razorpay subscription for plan:",k);const R=await YIe(t,o);if(R&&R.short_url)window.location.href=R.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(P){console.error("Error starting subscription:",P),_(`Failed to start subscription: ${P.message}`),j(!1)}};return c?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):f?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:f})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(sn,{size:16})})]}):n?r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(sn,{size:16})}),r.jsxs("h1",{children:[r.jsx(Yn,{size:28})," ","Start Subscription for ",n.name]}),w&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:w})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),i.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:i.map(k=>r.jsxs("div",{className:`subscription-plan-card ${o===k.id?"selected-plan":""}`,onClick:()=>l(k.id),children:[r.jsx("h3",{children:k.name}),r.jsxs("p",{className:"price",children:["",k.price]}),r.jsxs("p",{className:"duration",children:["Every ",k.interval," ",k.period,k.interval>1?"s":""]}),k.description&&r.jsx("p",{children:k.description})]},k.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:g==="manual",onChange:()=>x("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:g==="razorpay",onChange:()=>x("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:A,disabled:!o||b||i.length===0,className:"subscription-btn",children:[b&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),b?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(sn,{size:16})})]})},ZIe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),u=v.useCallback(async()=>{i(!0),o(null);try{const p=await FM();n(p)}catch(p){o(p.message||"Failed to fetch clinic subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{u()},[u]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await hDe(p),c({type:"success",message:"Clinic plan deactivated successfully!"}),u()}catch(g){o(g.message||"Failed to deactivate clinic plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}):r.jsx(Fr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Rt,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(sn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>t("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(Vn,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(te,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/clinic-subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(qi,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Wn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},eRe=()=>{const t=Lt(),[e,n]=v.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const u=g=>{const{name:x,value:b,type:j}=g.target;n(w=>({...w,[x]:j==="number"?parseFloat(b):b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await uDe(e),c({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/clinic-subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create clinic plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}):r.jsx(Fr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Rt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:u,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:u,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:u})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},tRe=()=>{const{id:t}=$a(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,u]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),u(!1);return}u(!0),p(null);try{const T=await cDe(t);a(T),s({name:T.name,description:T.description||"",price:Number(T.price),period:T.period,interval:Number(T.interval),razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch clinic plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{u(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:A,type:k}=T.target;s(P=>({...P,[C]:k==="number"?parseFloat(A):A}))},w=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await dDe(t,i),x({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const A=C.message||"Failed to update clinic plan.";p(A),x({type:"error",message:A})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Wo,{size:18,className:"mr-2"}):r.jsx(Fr,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Rt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:w,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval!==void 0?i.interval:"",onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},nRe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(""),[s,o]=v.useState(!0),[l,c]=v.useState(null),[u,f]=v.useState(!1),[p,g]=v.useState(null),x=v.useCallback(async()=>{c(null);try{const w=(await FM()).filter(_=>_.status==="active");n(w),w.length>0&&!a&&i(w[0].id)}catch(j){console.error("Error fetching plans:",j),c(`Failed to load subscription plans: ${j.message}`)}},[]);v.useEffect(()=>{(async()=>{o(!0);try{const w=await pDe();if(w&&w.short_url){window.location.href=w.short_url,c("You have a pending subscription. Redirecting to payment...");return}await x()}catch(w){console.error("Error during initial page load:",w),c(`An unexpected error occurred: ${w.message}`)}finally{o(!1)}})()},[x]);const b=async()=>{if(!a){g("Please select a clinic subscription plan.");return}const j=e.find(w=>w.id===a);if(!j){g("Selected plan details not found.");return}f(!0),g(null);try{console.log("Initiating Razorpay clinic subscription for plan:",j);const w=await fDe(a);if(w&&w.short_url)window.location.href=w.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(w){console.error("Error starting clinic subscription:",w),g(`Failed to start clinic subscription: ${w.message}`),f(!1)}};return s?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):l?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:16})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:16})}),r.jsxs("h1",{children:[r.jsx(eX,{size:28}),"Buy Pro Plan for Clinic"]}),p&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:p})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),e.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:e.map(j=>r.jsxs("div",{className:`subscription-plan-card ${a===j.id?"selected-plan":""}`,onClick:()=>i(j.id),children:[r.jsx("h3",{children:j.name}),r.jsxs("p",{className:"price",children:["",Number(j.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",j.interval," ",j.period,j.interval>1?"s":""]}),j.description&&r.jsx("p",{children:j.description})]},j.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:b,disabled:!a||u||e.length===0,className:"subscription-btn",children:[u&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),u?"Initiating Payment...":"Buy Pro Plan"]})})]})},rRe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(!0),[l,c]=v.useState(null),[u,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,w]=v.useState({name:"",email:"",password:"",role:"user"}),[_,T]=v.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[C,A]=v.useState(""),[k,P]=v.useState(""),[I,R]=v.useState(!1),[q,U]=v.useState(null),[F,B]=v.useState([]),[V,W]=v.useState(""),[G,z]=v.useState(!1),[Y,Q]=v.useState(null);v.useEffect(()=>{const ce=setTimeout(()=>{P(C)},500);return()=>{clearTimeout(ce)}},[C]),v.useEffect(()=>{K(k)},[k]);const K=async(ce="")=>{i(!0);try{const Se=ce?`/api/users?search=${encodeURIComponent(ce)}`:"/api/users",Ae=await(await le(Se)).json();n(Ae),c(null)}catch(Se){c("Failed to fetch users."),console.error(Se)}finally{i(!1),o(!1)}},$=async ce=>{ce.preventDefault();try{await le("/users",{method:"POST",body:JSON.stringify(j)}),f(!1),w({name:"",email:"",password:"",role:"user"}),K()}catch(Se){c("Failed to add user."),console.error(Se)}},ie=async ce=>{if(ce.preventDefault(),!x)return;const{password:Se,confirmPassword:Ve,...Ae}=_,ue={...Ae};if(Se){if(Se.length<6){c("Password must be at least 6 characters long.");return}if(Se!==Ve){c("Passwords do not match.");return}ue.password=Se}try{await le(`/users/${x.id}`,{method:"PUT",body:JSON.stringify(ue)}),g(!1),b(null),T({..._,password:"",confirmPassword:""}),K()}catch(Te){c("Failed to update user."),console.error(Te)}},xe=async ce=>{if(window.confirm("Are you sure you want to delete this user?"))try{await le(`/users/${ce}`,{method:"DELETE"}),K()}catch(Se){c("Failed to delete user."),console.error(Se)}},X=ce=>{b(ce),T({name:ce.name,email:ce.email,role:ce.role,password:"",confirmPassword:""}),g(!0)},Ie=async()=>{z(!0);try{const ce=await FM();B(ce),ce.length>0&&W(ce[0].id),Q(null)}catch(ce){Q("Failed to fetch subscription plans."),console.error(ce)}finally{z(!1)}},$e=ce=>{U(ce),R(!0),Ie()},Be=async ce=>{if(ce.preventDefault(),!q||!V){c("Please select a clinic and a plan.");return}try{await le("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:q,planId:V})}),R(!1),U(null),W(""),K(),c(null)}catch(Se){c("Failed to manually activate clinic subscription."),console.error(Se)}},Le=async ce=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await lDe(ce),K(),c(null)}catch(Se){c("Failed to cancel subscription."),console.error(Se)}};return a&&s?r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("div",{className:"back-button",style:{width:80,height:32},children:r.jsx(te,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(te,{width:200,height:32})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx(te,{width:"100%",height:40,style:{maxWidth:"300px"}}),r.jsx(te,{width:150,height:40})]}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(ce=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(te,{width:150,height:32})})]},ce))})]})]}):l&&s?r.jsx("div",{className:"error-message",children:l}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:C,onChange:ce=>A(ce.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>f(!0),className:"add-user-button",children:"Add New User"})]}),u&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>f(!1),children:""}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:$,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:j.name,onChange:ce=>w({...j,name:ce.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:j.email,onChange:ce=>w({...j,email:ce.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:j.password,onChange:ce=>w({...j,password:ce.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:j.role,onChange:ce=>w({...j,role:ce.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),p&&x&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>g(!1),children:""}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:ie,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:_.name,onChange:ce=>T({..._,name:ce.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:_.email,onChange:ce=>T({..._,email:ce.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:_.role,onChange:ce=>T({..._,role:ce.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"New Password (optional):"}),r.jsx("input",{type:"password",value:_.password,onChange:ce=>T({..._,password:ce.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm New Password:"}),r.jsx("input",{type:"password",value:_.confirmPassword,onChange:ce=>T({..._,confirmPassword:ce.target.value})})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),I&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>R(!1),children:""}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),G&&r.jsx("div",{children:"Loading plans..."}),Y&&r.jsx("div",{className:"error-message",children:Y}),!G&&!Y&&F.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!G&&!Y&&F.length>0&&r.jsxs("form",{onSubmit:Be,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:V,onChange:ce=>W(ce.target.value),required:!0,children:F.map(ce=>r.jsxs("option",{value:ce.id,children:[ce.name," - $",ce.price,"/",ce.interval," ",ce.period]},ce.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(ce=>{var ue,Te;const Se=ce.clinic_id||"N/A",Ve=((Te=(ue=ce.Clinic)==null?void 0:ue.ClinicSubscriptions)==null?void 0:Te.some(oe=>oe.status==="active"))??!1,Ae=Ve?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:ce.name}),r.jsx("td",{children:ce.email}),r.jsx("td",{children:ce.role}),r.jsx("td",{children:Se}),r.jsx("td",{children:Se!=="N/A"?r.jsx("span",{className:Ve?"pro-badge":"standard-badge",children:Ae}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>X(ce),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>xe(ce.id),className:"delete-button",children:"Delete"}),ce.clinic_id&&!Ve&&r.jsx("button",{onClick:()=>$e(ce.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),ce.clinic_id&&Ve&&r.jsx("button",{onClick:()=>Le(ce.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},ce.id)})})]})]})},aRe="_modalOverlay_cydw9_3",iRe="_modalContent_cydw9_29",sRe="_modalHeader_cydw9_53",oRe="_modalTitle_cydw9_71",lRe="_modalCloseButton_cydw9_83",cRe="_modalBody_cydw9_111",uRe="_formGroup_cydw9_119",dRe="_inputField_cydw9_143",hRe="_errorText_cydw9_177",fRe="_successText_cydw9_195",pRe="_modalFooter_cydw9_213",mRe="_button_cydw9_229",gRe="_buttonPrimary_cydw9_249",yRe="_buttonSecondary_cydw9_267",Pi={modalOverlay:aRe,modalContent:iRe,modalHeader:sRe,modalTitle:oRe,modalCloseButton:lRe,modalBody:cRe,formGroup:uRe,inputField:dRe,errorText:hRe,successText:fRe,modalFooter:pRe,button:mRe,buttonPrimary:gRe,buttonSecondary:yRe},xRe=({isOpen:t,onClose:e})=>{const[n,a]=v.useState(""),[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,u]=v.useState(null),[f,p]=v.useState(null);Kc(void 0,t?200:99999),v.useEffect(()=>{t&&g()},[t]);const g=async()=>{s(!0),u(null);try{const b=await le("/api/global-settings/app_gemini_api_key");if(b.ok){const j=await b.json();a(j.value||"")}else b.status}catch(b){console.warn("Could not fetch existing key:",b)}finally{s(!1)}},x=async()=>{l(!0),u(null),p(null);try{if(!(await le("/api/global-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"app_gemini_api_key",value:n})})).ok)throw new Error("Failed to save API Key");p("API Key updated successfully!"),setTimeout(()=>{e(),p(null)},1500)}catch(b){u(b.message||"Error saving key")}finally{l(!1)}};return t?r.jsx("div",{className:Pi.modalOverlay,children:r.jsxs("div",{className:Pi.modalContent,children:[r.jsxs("div",{className:Pi.modalHeader,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(tq,{size:24}),r.jsx("h3",{className:Pi.modalTitle,children:"App Gemini API Key"})]}),r.jsx("button",{onClick:e,className:Pi.modalCloseButton,children:r.jsx(Rt,{size:20})})]}),r.jsxs("div",{className:Pi.modalBody,children:[c&&r.jsx("div",{className:Pi.errorText,children:c}),f&&r.jsx("div",{className:Pi.successText,children:f}),r.jsxs("div",{className:Pi.formGroup,children:[r.jsx("label",{htmlFor:"gemini-key",children:"Gemini API Key"}),i?r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}}):r.jsx("input",{type:"text",id:"gemini-key",value:n,onChange:b=>a(b.target.value),className:Pi.inputField,placeholder:"Enter Gemini API Key (AIza...)",disabled:o})]}),r.jsx("p",{style:{fontSize:"0.9em",color:"var(--secondary-text-color, #666)"},children:"This key will be used as a fallback for all clinics if their specific Gemini API key is not configured."})]}),r.jsxs("div",{className:Pi.modalFooter,children:[r.jsx("button",{onClick:e,className:`${Pi.button} ${Pi.buttonSecondary}`,disabled:o,children:"Cancel"}),r.jsx("button",{onClick:x,className:`${Pi.button} ${Pi.buttonPrimary}`,disabled:o,children:o?"Saving...":"Save Key"})]})]})}):null},vRe=()=>{const[t,e]=v.useState(!1);return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(hd,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(vr,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(ud,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(vr,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(zi,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]}),r.jsxs("div",{className:"admin-panel-card",onClick:()=>e(!0),style:{cursor:"pointer"},children:[r.jsx(tq,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage App Gemini API Key"}),r.jsx("p",{children:"Update the fallback Gemini API key used by the application."})]})]}),r.jsx(xRe,{isOpen:t,onClose:()=>e(!1)})]})},QA="tutorialCurrentStep",bRe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,u;n(!0);try{const f=await le("/api/drugs/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((u=p.details)==null?void 0:u.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default medications imported successfully!","pharmacyImport")}else t(!1,"Failed to import medications.")}catch{t(!1,"Error importing medications.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ms,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(lo,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ng,{size:18})," Import Drugs"]})})]})},jRe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,u;n(!0);try{const f=await le("/api/lab-tests/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((u=p.details)==null?void 0:u.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default lab tests imported successfully!","labImport")}else t(!1,"Failed to import lab tests.")}catch{t(!1,"Error importing lab tests.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ms,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(lo,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(us,{size:18})," Import Tests"]})})]})},wRe=({onOpenCommandBar:t})=>r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),r.jsx("button",{onClick:t,className:"tutorial-button primary large-button",children:r.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",r.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),XA=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:r.jsx(xw,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:r.jsx(ng,{size:48,className:"step-icon pharmacy"}),component:bRe,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:r.jsx(us,{size:48,className:"step-icon lab"}),component:jRe,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:r.jsx(KQ,{size:48,className:"step-icon ai"}),component:wRe,actionText:null,isLast:!0}],NRe=({onClose:t,onMarkAsSeen:e})=>{const{openCommandBar:n}=Rc(),[a,i]=v.useState(()=>{const w=localStorage.getItem(QA);return w?parseInt(w,10):0}),[s,o]=v.useState(!1),[l,c]=v.useState(null),[u,f]=v.useState(null);v.useEffect(()=>{localStorage.setItem(QA,a.toString()),c(null)},[a]);const p=()=>{o(!0),setTimeout(()=>{i(w=>Math.min(w+1,XA.length-1)),o(!1)},300)},g=(w,_,T)=>{f(w),c(_),w&&(T==="pharmacyImport"||T==="labImport")&&setTimeout(p,1e3)},x=()=>{e(),t(),localStorage.removeItem(QA)},b=()=>{x(),setTimeout(()=>{n()},100)},j=XA[a];return r.jsx("div",{className:"tutorial-overlay",children:r.jsxs("div",{className:`tutorial-card ${s?"fade-out":"fade-in"}`,children:[r.jsxs("div",{className:"tutorial-visual",children:[r.jsx("div",{className:"icon-circle",children:j.icon}),r.jsx("div",{className:"step-indicators",children:XA.map((w,_)=>r.jsx("div",{className:`step-dot ${_===a?"active":""} ${_<a?"completed":""}`},_))})]}),r.jsxs("div",{className:"tutorial-content",children:[r.jsx("button",{className:"close-button",onClick:x,title:"Close Tutorial",children:r.jsx(Rt,{size:20})}),r.jsxs("div",{className:"text-content",children:[r.jsx("h2",{children:j.title}),r.jsx("p",{className:"description",children:j.description})]}),r.jsxs("div",{className:"interactive-area",children:[j.component?r.jsx(j.component,{onActionComplete:g,onOpenCommandBar:b}):null,l&&r.jsx("div",{className:`status-message ${u?"success":"error"}`,children:l})]}),r.jsxs("div",{className:"action-footer",children:[j.showSkip&&r.jsx("button",{onClick:p,className:"tutorial-button text-only",children:"Skip for now"}),j.actionText&&r.jsxs("button",{onClick:p,className:"tutorial-button primary",children:[j.actionText," ",r.jsx(yd,{size:16})]})]})]})]})})},SRe=({isOpen:t,onClose:e,onSuccess:n,medication:a,initialPatient:i,initialItems:s})=>{const[o,l]=v.useState(""),[c,u]=v.useState([]),[f,p]=v.useState(null),[g,x]=v.useState(!1);Kc(void 0,t?200:99999),v.useEffect(()=>{if(t&&a){j([{id:Date.now(),medication_name:a.medicationName,drug_id:null,quantity:a.quantity,tablets_per_day:a.tabletsPerDay||1,number_of_days:a.numberOfDays||30,directions:a.directions||"",notes:a.notes||""}]),_(a.frequencyDays);try{const Le=new Date(a.nextDeliveryDate);isNaN(Le.getTime())||C(Le.toISOString().split("T")[0])}catch(Le){console.error("Error parsing date",Le)}p({id:a.patientId,name:a.patientName,phone:a.patientPhone,patient_token_number:a.patientToken})}else t&&(i||s)?(s&&s.length>0&&j(s),i&&p(i)):t&&!a&&!s&&(j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30),C(""),p(null),l(""))},[t,a,i,s]);const[b,j]=v.useState([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),[w,_]=v.useState(30),[T,C]=v.useState(""),[A,k]=v.useState(null),[P,I]=v.useState(""),[R,q]=v.useState([]),[U,F]=v.useState(!1),[B,V]=v.useState(!1),[W,G]=v.useState(null),z=v.useRef(null),Y=v.useRef(null);v.useEffect(()=>{if(t){const Le=new Date;Le.setDate(Le.getDate()+30),C(Le.toISOString().split("T")[0])}},[t]);const Q=v.useCallback(async Le=>{if(!Le.trim()){u([]);return}x(!0);try{const ce=await le(`/api/patients?search=${encodeURIComponent(Le)}&limit=10`);if(ce.ok){const Se=await ce.json();u(Se.patients||[])}}catch(ce){console.error("Error searching patients:",ce)}finally{x(!1)}},[]);v.useEffect(()=>{z.current&&clearTimeout(z.current),o&&!f?z.current=setTimeout(()=>Q(o),300):u([])},[o,f,Q]);const K=v.useCallback(async Le=>{if(!Le.trim()){q([]);return}F(!0);try{const ce=await le(`/api/drugs?search=${encodeURIComponent(Le)}&limit=10`);if(ce.ok){const Se=await ce.json();q(Se.drugs||[])}}catch(ce){console.error("Error searching drugs:",ce)}finally{F(!1)}},[]);v.useEffect(()=>{Y.current&&clearTimeout(Y.current),P&&A!==null?Y.current=setTimeout(()=>K(P),300):q([])},[P,A,K]);const $=Le=>{if(!Le)return 1;const ce=Le.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return ce?parseInt(ce[1],10):1},ie=Le=>{p(Le),l(`${Le.name} (${Le.patient_token_number})`),u([])},xe=(Le,ce)=>{const Se=[...b];Se[ce]={...Se[ce],medication_name:Le.name,drug_id:Le.id,pack_size:$(Le.pack),packs:0,loose:0,quantity:0},j(Se),k(null),I(""),q([])},X=(Le,ce,Se)=>{const Ve=[...b],Ae={...Ve[Le]},ue=Ae.pack_size||1;if(ce==="packs"||ce==="loose"){const Te=parseInt(Se)||0;ce==="packs"&&(Ae.packs=Te),ce==="loose"&&(Ae.loose=Te);const oe=Ae.packs||0,be=Ae.loose||0;Ae.quantity=oe*ue+be}else if(ce==="tablets_per_day"||ce==="number_of_days"){ce==="tablets_per_day"&&(Ae.tablets_per_day=Se),ce==="number_of_days"&&(Ae.number_of_days=Se);const Te=parseFloat(Ae.tablets_per_day.toString())||0,oe=parseInt(Ae.number_of_days.toString())||0,be=Math.ceil(Te*oe);Ae.quantity=be,Ae.packs=Math.floor(be/ue),Ae.loose=be%ue}else Ae[ce]=Se;Ve[Le]=Ae,j(Ve)},Ie=()=>{j([...b,{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:w,directions:"",notes:"",packs:0,loose:0,pack_size:1}])},$e=Le=>{b.length>1&&j(b.filter((ce,Se)=>Se!==Le))},Be=async Le=>{if(Le.preventDefault(),G(null),!f){G("Please select a patient.");return}if(b.some(Se=>!Se.medication_name||Se.quantity<=0)){G("Please ensure all items have a medication name and valid quantity.");return}V(!0);try{const Se={patient_id:f.id,items:b.map(Ae=>({medication_name:Ae.medication_name,drug_id:Ae.drug_id,quantity:Ae.quantity,tablets_per_day:Ae.tablets_per_day,number_of_days:Ae.number_of_days,directions:Ae.directions,notes:Ae.notes,frequency_days:w,next_delivery_date:T}))},Ve=await le("/api/recurring-medications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!Ve.ok){const Ae=await Ve.json();throw new Error(Ae.message+(Ae.error?": "+Ae.error:"")||"Failed to create recurring medication.")}n(),e(),p(null),l(""),j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30)}catch(Se){G(Se.message)}finally{V(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"add-recurring-modal",style:{maxWidth:"800px",width:"95%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Add Recurring Medication Order"}),r.jsx("button",{className:"close-btn",onClick:e,children:r.jsx(Rt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[W&&r.jsx("div",{className:"error-message",children:W}),r.jsxs("form",{onSubmit:Be,className:"recurring-form",children:[r.jsxs("div",{className:"order-settings-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsxs("label",{children:[r.jsx(Yn,{size:16})," Patient"]}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patient...",value:o,onChange:Le=>{l(Le.target.value),p(null)},className:f?"selected":"unselected"}),g&&r.jsx("span",{className:"spinner",children:"..."}),o&&!f&&c.length>0&&r.jsx("ul",{className:"suggestions-list",children:c.map(Le=>r.jsxs("li",{onClick:()=>ie(Le),children:[r.jsx("div",{className:"suggestion-name",children:Le.name}),r.jsxs("div",{className:"suggestion-details",children:[Le.phone,"  ",Le.patient_token_number]})]},Le.id))})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(zg,{size:16})," Frequency"]}),r.jsxs("select",{value:w,onChange:Le=>{const ce=parseInt(Le.target.value);_(ce);const Se=new Date;Se.setDate(Se.getDate()+ce),C(Se.toISOString().split("T")[0]);const Ve=b.map(Ae=>({...Ae,number_of_days:ce}));j(Ve)},children:[r.jsx("option",{value:15,children:"Every 15 Days"}),r.jsx("option",{value:30,children:"Every 30 Days"}),r.jsx("option",{value:60,children:"Every 60 Days"}),r.jsx("option",{value:90,children:"Every 90 Days"})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(ia,{size:16})," Next Delivery"]}),r.jsx("input",{type:"date",value:T,onChange:Le=>C(Le.target.value)})]})]}),r.jsx("hr",{className:"divider"}),r.jsxs("div",{className:"items-header",children:[r.jsx("h4",{children:"Medications"}),r.jsxs("button",{type:"button",className:"add-item-btn",onClick:Ie,children:[r.jsx(Vn,{size:14})," Add Drug"]})]}),r.jsx("div",{className:"items-list",children:b.map((Le,ce)=>r.jsxs("div",{className:"medication-item-row",children:[r.jsxs("div",{className:"row-top",children:[r.jsxs("div",{className:"form-group med-search-group",children:[r.jsx("label",{children:"Drug Name"}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drug...",value:A===ce?P:Le.medication_name,onFocus:()=>{k(ce),I(Le.medication_name)},onChange:Se=>{I(Se.target.value),X(ce,"medication_name",Se.target.value)}}),A===ce&&U&&r.jsx("span",{className:"spinner",children:"..."}),A===ce&&P&&R.length>0&&r.jsx("ul",{className:"suggestions-list",children:R.map(Se=>r.jsxs("li",{onClick:()=>xe(Se,ce),children:[r.jsx("div",{className:"suggestion-name",children:Se.name}),r.jsxs("div",{className:"suggestion-details",children:["Stock: ",Se.stock]})]},Se.id))})]})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Tabs/Day"}),r.jsx("input",{type:"number",min:"0.5",step:"0.5",value:Le.tablets_per_day,onChange:Se=>X(ce,"tablets_per_day",Se.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Days"}),r.jsx("input",{type:"number",min:"1",value:Le.number_of_days,onChange:Se=>X(ce,"number_of_days",Se.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Packs"}),r.jsx("input",{type:"number",min:"0",value:Le.packs||"",onChange:Se=>X(ce,"packs",Se.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Loose"}),r.jsx("input",{type:"number",min:"0",value:Le.loose||"",onChange:Se=>X(ce,"loose",Se.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Total"}),r.jsx("input",{type:"number",value:Le.quantity,disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]}),r.jsx("button",{type:"button",className:"remove-btn",onClick:()=>$e(ce),disabled:b.length===1,children:r.jsx(Wn,{size:16})})]}),r.jsxs("div",{className:"row-bottom",children:[r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Directions (e.g. 1-0-1 after food)",value:Le.directions,onChange:Se=>X(ce,"directions",Se.target.value)})}),r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Notes",value:Le.notes,onChange:Se=>X(ce,"notes",Se.target.value)})})]})]},Le.id))}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-submit",disabled:B,children:B?"Creating...":"Create Recurring Order"})]})]})]})]})}):null},_Re=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(""),[c,u]=v.useState(1),[f,p]=v.useState(1),[g,x]=v.useState(0),[b,j]=v.useState(!1),[w,_]=v.useState(void 0),T=10,C=v.useRef(null);Kc();const A=v.useCallback(async(F,B)=>{a(!0),s(null);try{let V=`/api/recurring-medications?page=${F}&limit=${T}`;B&&(V+=`&search=${encodeURIComponent(B)}`);const W=await le(V);if(!W.ok)throw new Error("Failed to fetch recurring medications.");const G=await W.json();e(G.medications),p(G.totalPages),x(G.total),u(G.page)}catch(V){console.error(V),s(V.message||"An error occurred while fetching data.")}finally{a(!1)}},[]);v.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{A(c,o)},500),()=>{C.current&&clearTimeout(C.current)}),[o,c,A]);const k=F=>{l(F.target.value),u(1)},P=F=>{F>=1&&F<=f&&u(F)},I=F=>{_(F),j(!0)},R=()=>{A(c,o),j(!1),_(void 0)},q=F=>F===30?"Every 30 Days (Monthly)":F===15?"Every 15 Days":`Every ${F} Days`,U=F=>{switch(F){case"active":return"status-pill status-pill-active";case"paused":return"status-pill status-pill-paused";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill"}};return r.jsxs("div",{className:"refill-reminders-container",children:[r.jsxs("div",{className:"refill-header",children:[r.jsx("h3",{className:"refill-title",children:"Recurring Medications"}),r.jsxs("div",{className:"refill-actions",children:[r.jsxs("button",{className:"refill-action-button btn-add",onClick:()=>{_(void 0),j(!0)},children:[r.jsx(Ds,{size:16})," Add New"]}),r.jsxs("div",{className:"search-box",children:[r.jsx("input",{type:"text",placeholder:"Search patient, phone, medication...",value:o,onChange:k}),r.jsx(En,{size:18,className:"search-icon"})]})]})]}),i&&r.jsx("div",{className:"error-message-box",children:i}),r.jsx("div",{className:"refill-table-container",children:n?r.jsx("div",{className:"loading-pulse",children:"Loading..."}):t.length===0?r.jsx("div",{className:"empty-state",children:"No recurring medications found."}):r.jsx("div",{className:"refill-grouped-list",children:Object.values(t.reduce((F,B)=>{const V=B.patientId;return F[V]||(F[V]={patientId:B.patientId,patientName:B.patientName,patientPhone:B.patientPhone,patientToken:B.patientToken,medications:[]}),F[V].medications.push(B),F},{})).map(F=>r.jsxs("div",{className:"patient-medication-group-card",children:[r.jsxs("div",{className:"group-header",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("h4",{className:"patient-name",children:F.patientName}),r.jsxs("span",{className:"patient-meta",children:["Token: ",F.patientToken,"  Phone: ",F.patientPhone]})]}),r.jsx("div",{className:"group-actions"})]}),r.jsxs("table",{className:"refill-table group-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Medication"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Frequency"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:F.medications.map(B=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"med-name",children:B.medicationName}),(B.tabletsPerDay||B.numberOfDays||B.directions)&&r.jsxs("div",{className:"med-usage-details",style:{fontSize:"0.8em",color:"#666"},children:[B.tabletsPerDay&&r.jsxs("span",{children:[B.tabletsPerDay," tabs/day  "]}),B.numberOfDays&&r.jsxs("span",{children:[B.numberOfDays," days "]})]}),B.notes&&r.jsxs("div",{className:"med-notes",children:["Note: ",B.notes]})]}),r.jsx("td",{children:B.quantity}),r.jsx("td",{children:r.jsx("span",{className:"frequency-badge",children:q(B.frequencyDays)})}),r.jsx("td",{children:r.jsx("div",{className:"date-display",children:new Date(B.nextDeliveryDate).toLocaleDateString()})}),r.jsx("td",{children:r.jsx("span",{className:U(B.status),children:B.status})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",title:"Edit",onClick:()=>I(B),children:r.jsx(qi,{size:16})}),r.jsx("button",{className:"action-btn delete",title:"Delete/Cancel",children:r.jsx(Wn,{size:16})})]})})]},B.id))})]})]},F.patientId))})}),!n&&f>1&&r.jsxs("div",{className:"pagination-container",children:[r.jsxs("span",{className:"pagination-info",children:["Page ",c," of ",f," (Total ",g,")"]}),r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("button",{onClick:()=>P(c-1),disabled:c===1,className:"page-btn",children:[r.jsx(Eb,{size:16})," Prev"]}),r.jsxs("button",{onClick:()=>P(c+1),disabled:c===f,className:"page-btn",children:["Next ",r.jsx(yd,{size:16})]})]})]}),r.jsx(SRe,{isOpen:b,onClose:()=>{j(!1),_(void 0)},onSuccess:R,medication:w})]})},CRe=()=>{const t=Lt(),e=Br();return v.useEffect(()=>{const n=new URLSearchParams(e.search),a=n.get("token"),i=n.get("caseDetails");a?(async()=>{try{const o=await le(`/api/patients?search=${a}&limit=1`);if(!o.ok)throw new Error("Failed to fetch patient by token");const c=(await o.json()).patients[0];if(!c)throw new Error("Patient with the given token not found");const u=await le(`/api/queue/patient/${c.id}/latest`);if(u.ok){const g=await u.json();if(g!=null&&g._id){t(`/dashboard/edit-complaint/${g._id}`,{state:{initialComplaint:i}});return}}const f=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,complaint:i})});if(!f.ok)throw new Error("Failed to create queue entry");const p=await f.json();if(p!=null&&p.id)t(`/dashboard/edit-complaint/${p.id}`,{state:{initialComplaint:i}});else throw new Error("Failed to get ID from new queue entry.")}catch(o){console.error("Error handling complaint URL:",o),t("/dashboard/search-patient")}})():t("/dashboard/search-patient")},[e,t]),r.jsx("div",{children:"Loading..."})},Wz=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(null),[l,c]=v.useState(!1),[u,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState(!1),[_,T]=v.useState(!1),[C,A]=v.useState(null),[k,P]=v.useState([]),[I,R]=v.useState(null),[q,U]=v.useState(""),[F,B]=v.useState(""),[V,W]=v.useState(""),[G,z]=v.useState(""),[Y,Q]=v.useState(""),[K,$]=v.useState(""),[ie,xe]=v.useState(""),[X,Ie]=v.useState(""),[$e,Be]=v.useState(""),[Le,ce]=v.useState(""),[Se,Ve]=v.useState(""),[Ae,ue]=v.useState("cash"),Te=v.useCallback(async()=>{i(!0),o(null);try{const he=await le("/api/distributors");if(!he.ok)throw new Error(`Failed to fetch distributors: ${he.statusText}`);const De=await he.json();n(De)}catch(he){console.error("Failed to fetch distributors:",he),o(he.message||"Failed to load distributors.")}finally{i(!1)}},[]);v.useEffect(()=>{Te()},[Te]);const oe=async he=>{he.preventDefault(),o(null);try{const De=await le("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:q,contact_person:F,phone:V,email:G,address:Y,gst_number:K,drug_license_number:ie})});if(!De.ok){const nt=await De.json();throw new Error(nt.message||"Failed to add distributor.")}de(),Te()}catch(De){console.error("Error adding distributor:",De),o(De.message||"Failed to add distributor.")}},be=async he=>{if(he.preventDefault(),o(null),!!C)try{const De=await le(`/api/distributors/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:q,contact_person:F,phone:V,email:G,address:Y,gst_number:K,drug_license_number:ie})});if(!De.ok){const nt=await De.json();throw new Error(nt.message||"Failed to update distributor.")}ne(),Te()}catch(De){console.error("Error updating distributor:",De),o(De.message||"Failed to update distributor.")}},_e=async()=>{if(o(null),!!C)try{const he=await le(`/api/distributors/${C.id}`,{method:"DELETE"});if(!he.ok){const De=await he.json();throw new Error(De.message||"Failed to delete distributor.")}je(),Te()}catch(he){console.error("Error deleting distributor:",he),o(he.message||"Failed to delete distributor.")}},Ne=v.useCallback(async he=>{o(null);try{const De=await le(`/api/distributors/${he}/payments`);if(!De.ok)throw new Error(`Failed to fetch payments: ${De.statusText}`);const Fe=(await De.json()).map(wt=>({...wt,order_value:parseFloat(wt.order_value),amount_paid:parseFloat(wt.amount_paid),balance_remaining:parseFloat(wt.balance_remaining)}));P(Fe);const Ge=await le(`/api/distributors/${he}/balance`);if(!Ge.ok)throw new Error(`Failed to fetch balance: ${Ge.statusText}`);const it=await Ge.json();R({totalOrderValue:parseFloat(it.totalOrderValue),totalAmountPaid:parseFloat(it.totalAmountPaid),remainingBalance:parseFloat(it.remainingBalance)})}catch(De){console.error("Error fetching payments/balance:",De),o(De.message||"Failed to load payments or balance.")}},[]),ee=async he=>{if(he.preventDefault(),o(null),!!C)try{const De=await le(`/api/distributors/${C.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:X,order_value:parseFloat($e||"0"),amount_paid:parseFloat(Le||"0"),notes:Se,payment_mode:Ae})});if(!De.ok){const nt=await De.json();throw new Error(nt.message||"Failed to add payment.")}T(!1),await Ne(C.id),w(!0),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(De){console.error("Error adding payment:",De),o(De.message||"Failed to add payment.")}},ge=()=>{U(""),B(""),W(""),z(""),Q(""),$(""),xe(""),o(null),f(!0)},de=()=>{f(!1)},ae=he=>{A(he),U(he.name),B(he.contact_person||""),W(he.phone||""),z(he.email||""),Q(he.address||""),$(he.gst_number||""),xe(he.drug_license_number||""),o(null),g(!0)},ne=()=>{g(!1),A(null)},se=he=>{A(he),o(null),b(!0)},je=()=>{b(!1),A(null)},Ee=he=>{A(he),Ne(he.id),o(null),w(!0)},J=()=>{w(!1),A(null),P([]),R(null)},ye=he=>{A(he),Ie(new Date().toISOString().split("T")[0]),Be("0"),ce("0"),Ve(""),ue("cash"),o(null),T(!0)},me=()=>{T(!1),A(null)};return a?r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",style:{marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(te,{width:80,height:36}),r.jsx(te,{width:200,height:32})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx(te,{width:150,height:36}),r.jsx(te,{width:150,height:36}),r.jsx(te,{width:180,height:36})]})]}),r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact Person"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(he=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:30})})]},he))})]})})]}):s?r.jsxs("div",{className:"error-indicator",children:["Error: ",s]}):r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>t(-1),className:"dmp-button dmp-button-secondary",title:"Go Back",children:[r.jsx(sn,{size:20})," Back"]}),r.jsx("h2",{children:"Distributor Management"})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("div",{className:"view-mode-toggle",style:{display:"flex",gap:"8px"},children:[r.jsxs("button",{onClick:()=>c(!1),className:`dmp-button ${l?"dmp-button-secondary":"dmp-button-primary"}`,title:"List View",children:[r.jsx(Pb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>c(!0),className:`dmp-button ${l?"dmp-button-primary":"dmp-button-secondary"}`,title:"Excel Mode (Edit)",children:[r.jsx(wf,{size:18})," Excel"]})]}),r.jsxs("button",{onClick:ge,className:"dmp-button dmp-button-primary",children:[r.jsx(Ds,{size:18}),"Add Distributor"]})]})]}),(()=>{const he=e.reduce((nt,Fe)=>nt+parseFloat(Fe.remainingBalance||"0"),0),De=he>=0;return r.jsxs("div",{className:"stats-container",children:[r.jsxs("div",{className:`stat-card ${De?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Total Balance"}),r.jsxs("span",{className:"value",children:["",he.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Distributors"}),r.jsx("span",{className:"value",children:e.length})]})]})})(),r.jsx("div",{className:"table-wrapper",children:l?r.jsx(zb,{columns:[{key:"name",label:"Name",editable:!0,type:"text"},{key:"contact_person",label:"Contact Person",editable:!0,type:"text"},{key:"phone",label:"Phone",editable:!0,type:"text"},{key:"email",label:"Email",editable:!0,type:"text"},{key:"address",label:"Address",editable:!0,type:"text"},{key:"gst_number",label:"GST Number",editable:!0,type:"text"},{key:"drug_license_number",label:"Drug License",editable:!0,type:"text"}],data:e,editable:!0,showRowNumbers:!0,title:"Distributors",onSave:async he=>{const De=he.map(async nt=>{const Fe=e.find(Ge=>Ge.id===nt.id);if(Fe&&JSON.stringify(Fe)!==JSON.stringify(nt))return le(`/api/distributors/${nt.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)})});try{await Promise.all(De),Te()}catch(nt){alert("Error saving changes"),console.error(nt)}}}):r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name / Contact"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Tax / License"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"2rem",color:"var(--dmp-text-secondary)"},children:"No distributors found."})}):e.map(he=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"primary-text",children:he.name}),r.jsx("div",{className:"secondary-text",children:he.contact_person})]}),r.jsxs("td",{children:[r.jsx("div",{className:"secondary-text",children:he.phone||"-"}),r.jsx("div",{className:"secondary-text",children:he.email||"-"}),r.jsx("div",{className:"secondary-text",children:he.address||"-"})]}),r.jsxs("td",{children:[r.jsxs("div",{className:"secondary-text",children:["GST: ",he.gst_number||"-"]}),r.jsxs("div",{className:"secondary-text",children:["DL: ",he.drug_license_number||"-"]})]}),r.jsx("td",{children:r.jsxs("span",{className:`status-badge ${parseFloat(he.remainingBalance||"0")>0?"balance-ok":"balance-owed"}`,children:["",he.remainingBalance||"0.00"]})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>Ee(he),className:"dmp-button-icon",title:"View Payments & Balance",children:r.jsx(Fm,{size:18})}),r.jsx("button",{onClick:()=>ye(he),className:"dmp-button-icon",title:"Add Payment",children:r.jsx(vw,{size:18})}),r.jsx("button",{onClick:()=>ae(he),className:"dmp-button-icon edit",title:"Edit Distributor",children:r.jsx(qi,{size:18})}),r.jsx("button",{onClick:()=>se(he),className:"dmp-button-icon delete",title:"Delete Distributor",children:r.jsx(Wn,{size:18})})]})})]},he.id))})]})}),u&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:de,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Add New Distributor"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem",padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:s}),r.jsxs("form",{onSubmit:oe,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"name",children:"Name:"}),r.jsx("input",{type:"text",id:"name",className:"dmp-input",style:{padding:"0.6rem"},value:q,onChange:he=>U(he.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"contact_person",className:"dmp-input",style:{padding:"0.6rem"},value:F,onChange:he=>B(he.target.value)})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"phone",className:"dmp-input",style:{padding:"0.6rem"},value:V,onChange:he=>W(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"email",children:"Email:"}),r.jsx("input",{type:"email",id:"email",className:"dmp-input",style:{padding:"0.6rem"},value:G,onChange:he=>z(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"address",children:"Address:"}),r.jsx("textarea",{id:"address",className:"dmp-textarea",style:{padding:"0.6rem",minHeight:"60px"},value:Y,onChange:he=>Q(he.target.value)})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"gst_number",className:"dmp-input",style:{padding:"0.6rem"},value:K,onChange:he=>$(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"drug_license_number",children:"Drug License:"}),r.jsx("input",{type:"text",id:"drug_license_number",className:"dmp-input",style:{padding:"0.6rem"},value:ie,onChange:he=>xe(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("button",{type:"button",onClick:de,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Add Distributor"})]})]})]})}),p&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:ne,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Edit Distributor"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem",padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:s}),r.jsxs("form",{onSubmit:be,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-name",children:"Name:"}),r.jsx("input",{type:"text",id:"edit-name",className:"dmp-input",style:{padding:"0.6rem"},value:q,onChange:he=>U(he.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"edit-contact_person",className:"dmp-input",style:{padding:"0.6rem"},value:F,onChange:he=>B(he.target.value)})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"edit-phone",className:"dmp-input",style:{padding:"0.6rem"},value:V,onChange:he=>W(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-email",children:"Email:"}),r.jsx("input",{type:"email",id:"edit-email",className:"dmp-input",style:{padding:"0.6rem"},value:G,onChange:he=>z(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-address",children:"Address:"}),r.jsx("textarea",{id:"edit-address",className:"dmp-textarea",style:{padding:"0.6rem",minHeight:"60px"},value:Y,onChange:he=>Q(he.target.value)})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"edit-gst_number",className:"dmp-input",style:{padding:"0.6rem"},value:K,onChange:he=>$(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-drug_license_number",children:"Drug License:"}),r.jsx("input",{type:"text",id:"edit-drug_license_number",className:"dmp-input",style:{padding:"0.6rem"},value:ie,onChange:he=>xe(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("button",{type:"button",onClick:ne,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Save Changes"})]})]})]})}),x&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:je,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Confirm Delete"}),r.jsxs("p",{children:['Are you sure you want to delete distributor "',C.name,'"?']}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:je,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:_e,className:"dmp-button dmp-button-primary",style:{backgroundColor:"var(--dmp-danger-color)"},children:"Delete"})]})]})}),j&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal printable-section",style:{maxWidth:"900px"},children:[r.jsx("button",{onClick:J,className:"dmp-modal-close",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.5rem",marginBottom:"1rem"},children:[r.jsxs("h3",{className:"dmp-modal-title",style:{marginBottom:0},children:["Ledger: ",C.name]}),r.jsxs("button",{onClick:()=>window.print(),className:"dmp-button dmp-button-primary",style:{padding:"0.4rem 0.8rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"8px"},title:"Print Ledger",children:[r.jsx(Nf,{size:14})," Print Ledger"]})]}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),I&&r.jsxs("div",{className:"stats-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem",marginBottom:"1.25rem"},children:[r.jsxs("div",{className:"stat-card",style:{padding:"0.75rem",border:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Order Value"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem"},children:["",I.totalOrderValue.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"stat-card",style:{padding:"0.75rem",border:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Total Paid"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem",color:"var(--dmp-success-color)"},children:["",I.totalAmountPaid.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:`stat-card ${I.remainingBalance>0?"positive":"negative"}`,style:{padding:"0.75rem",border:"1px solid",borderColor:I.remainingBalance>0?"rgba(0, 208, 132, 0.2)":"rgba(255, 77, 79, 0.2)",backgroundColor:I.remainingBalance>0?"rgba(0, 208, 132, 0.05)":"rgba(255, 77, 79, 0.05)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Balance"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem",color:I.remainingBalance>0?"var(--dmp-success-color)":"var(--dmp-danger-color)"},children:["",I.remainingBalance.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsx("h4",{style:{fontSize:"1rem",marginTop:"1rem",marginBottom:"0.5rem"},children:"Payment History"}),k.length===0?r.jsx("p",{children:"No payments recorded for this distributor."}):r.jsx("div",{className:"table-wrapper",style:{boxShadow:"none",border:"1px solid var(--dmp-bg-primary)"},children:r.jsxs("table",{className:"dmp-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Date"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Order"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Paid"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Balance"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Mode"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Notes"})]})}),r.jsx("tbody",{children:k.map(he=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(he.payment_date).toLocaleDateString()}),r.jsxs("td",{"data-label":"Order",style:{fontWeight:500},children:["",he.order_value.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsxs("td",{"data-label":"Paid",style:{fontWeight:500,color:"var(--dmp-success-color)"},children:["",he.amount_paid.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsxs("td",{"data-label":"Balance",style:{fontWeight:600},children:["",he.balance_remaining.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsx("td",{"data-label":"Mode",children:he.payment_mode?he.payment_mode.charAt(0).toUpperCase()+he.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:he.notes||"",children:he.notes||"-"})]},he.id))})]})}),r.jsx("div",{className:"dmp-modal-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",onClick:J,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Close"})})]})}),_&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"420px"},children:[r.jsx("button",{onClick:me,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Add Payment"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:ee,children:[r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_date",children:"Date:"}),r.jsx("input",{type:"date",id:"payment_date",className:"dmp-input",value:X,onChange:he=>Ie(he.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_mode",children:"Mode:"}),r.jsxs("select",{id:"payment_mode",className:"dmp-select",value:Ae,onChange:he=>ue(he.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"order_value",children:"Order Value:"}),r.jsx("input",{type:"number",id:"order_value",className:"dmp-input",value:$e,onChange:he=>Be(he.target.value),step:"0.01"})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"amount_paid",children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount_paid",className:"dmp-input",value:Le,onChange:he=>ce(he.target.value),step:"0.01"})]})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",className:"dmp-textarea",value:Se,onChange:he=>Ve(he.target.value),rows:2,style:{resize:"none"}})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"1.25rem"},children:[r.jsx("button",{type:"button",onClick:me,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Add Payment"})]})]})]})})]})},Qj=t=>{if(!t)return"";let e=t.toLowerCase();return e=e.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),e=e.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),e=e.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),e},TRe=(t,e)=>{if(!t||!e||e.length===0)return;const n=Qj(t);let a=e.find(o=>Qj(o.name)===n);if(a)return a;let i=e.find(o=>Qj(o.name).includes(n));if(i)return i;let s=e.find(o=>n.includes(Qj(o.name)));if(s)return s},kRe=({isOpen:t,onClose:e,excelHeaders:n,onConfirm:a,availableFields:i})=>{const[s,o]=v.useState({});if(v.useEffect(()=>{t&&c()},[t,n,i]),!t)return null;const l=(f,p)=>{o(g=>({...g,[f]:p}))},c=()=>{const f={};n.forEach(p=>{const g=i.map(b=>({name:b})),x=TRe(p,g);x&&(f[p]=x.name)}),o(f)},u=()=>{const f={};for(const p in s)s[p]&&s[p]!=="none"&&(f[p]=s[p]);a(f),e()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content excel-mapping-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h3",{children:"Match File Columns"}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Rt,{size:18})})]}),r.jsx("p",{className:"modal-description",children:'Match file columns to app fields. Use "Auto Match" for suggestions.'}),r.jsx("div",{className:"modal-actions-top",children:r.jsx("button",{type:"button",onClick:c,className:"button-auto-match",children:"Auto Match"})}),r.jsxs("div",{className:"column-mapping-grid",children:[r.jsx("div",{className:"grid-header",children:"Excel Column"}),r.jsx("div",{className:"grid-header",children:"App Field"}),n.map((f,p)=>r.jsxs(Ce.Fragment,{children:[r.jsx("div",{className:"excel-header-cell",children:f}),r.jsx("div",{className:"app-field-cell",children:r.jsxs("select",{value:s[f]||"",onChange:g=>l(f,g.target.value),className:"app-field-select",children:[r.jsx("option",{value:"",children:"-- Select Field --"}),r.jsx("option",{value:"none",children:"None (Ignore Column)"}),i.map((g,x)=>r.jsx("option",{value:g,children:g==="name"?"Composition Name":g==="brand_name"?"Brand Name":g==="price"?"MRP":g==="buying_price"?"Rate":g==="unit"?"Pack":g==="batch"?"Batch":g==="hsn_code"?"HSN Code":g==="mfg"?"MFG":g==="loose_quantity"?"Loose":g.replace(/_/g," ").replace(/\b\w/g,b=>b.toUpperCase())},x))]})})]},p))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:u,className:"button-submit",children:"Confirm Mapping"})]})]})})},ARe=({entityType:t,config:e,values:n,onChange:a,className:i=""})=>{const o=(e[t]||[]).filter(c=>c.type!=="computed");if(o.length===0)return null;const l=c=>{const u=n[c.key]??"";switch(c.type){case"number":return r.jsx("input",{type:"number",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:f=>a(c.key,f.target.value===""?null:parseFloat(f.target.value)),className:"custom-text-input mt-1",placeholder:c.label,required:c.required});case"date":return r.jsx("input",{type:"date",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",required:c.required});case"boolean":return r.jsx("input",{type:"checkbox",id:`custom_${c.key}`,name:`custom_${c.key}`,checked:!!u,onChange:f=>a(c.key,f.target.checked),className:"custom-checkbox mt-1"});case"text":default:return r.jsx("input",{type:"text",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",placeholder:c.label,required:c.required})}};return r.jsxs("div",{className:`custom-fields-section ${i}`,children:[r.jsx("h4",{className:"custom-fields-title",children:"Custom Fields"}),r.jsx("div",{className:"custom-fields-grid",children:o.map(c=>r.jsxs("div",{className:"custom-field-item",children:[r.jsxs("label",{htmlFor:`custom_${c.key}`,className:"form-label",children:[c.label,c.required&&r.jsx("span",{className:"required-star",children:"*"})]}),l(c)]},c.key))})]})},ERe=({isOpen:t,onClose:e,onDrugAddedToPurchase:n,customColumnsConfig:a={}})=>{const[i,s]=v.useState({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),[o,l]=v.useState(null),[c,u]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null);v.useEffect(()=>{t&&(s({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),l(null),u(!1),p(!1))},[t]),v.useEffect(()=>{const T=A=>{A.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var k;(k=b.current)==null||k.focus()},0),A.preventDefault()))},C=A=>{g.current&&!g.current.contains(A.target)&&p(!1)};return document.addEventListener("keydown",T),document.addEventListener("mousedown",C),()=>{document.removeEventListener("keydown",T),document.removeEventListener("mousedown",C)}},[f]);const j=T=>{const{name:C,value:A,type:k}=T.target;s(P=>({...P,[C]:k==="number"?parseFloat(A)||null:A}))},w=(T,C)=>{s(A=>({...A,custom_fields:{...A.custom_fields,[T]:C}}))},_=T=>{if(T.preventDefault(),l(null),u(!0),i.mrp===void 0||i.stock===void 0){l("MRP and Stock Quantity are required."),u(!1);return}const C={...i,name:i.name===""?null:i.name,composition:i.composition===""?null:i.composition,rate:i.rate===0?null:i.rate,expiry_date:i.expiry_date===""?null:i.expiry_date,gst:i.gst===0?null:i.gst,margin:i.margin===0?null:i.margin,discount:i.discount===0?null:i.discount,brand_name:i.brand_name===""?null:i.brand_name,batch:i.batch===""?null:i.batch,hsn_code:i.hsn_code===""?null:i.hsn_code,mfg:i.mfg===""?null:i.mfg,loose:i.loose===0?null:i.loose,custom_fields:i.custom_fields||{}};n(C),u(!1),e()};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content add-drug-form-container",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:e,className:"cancel-button",title:"Close",children:r.jsx(Rt,{size:18})})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("form",{onSubmit:_,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid-2",children:[r.jsxs("div",{className:"span-2 form-group",children:[r.jsxs("label",{htmlFor:"name",className:"form-label",children:["Composition Name",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Dl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. Optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",value:i.name||"",onChange:j,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})]}),r.jsxs("div",{className:"span-2 form-group",children:[r.jsxs("label",{htmlFor:"brand_name",className:"form-label",children:["Brand Name",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Dl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. Optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:i.brand_name||"",onChange:j,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"mrp",className:"form-label",children:["MRP () *",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Dl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Price for the pack size."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"mrp",required:!0,step:"0.01",min:"0",value:i.mrp||"",onChange:j,className:"custom-text-input",placeholder:"0.00",tabIndex:3})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"stock",className:"form-label",children:["Quantity *",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Dl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Number of packs in stock."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,step:"1",min:"0",value:i.stock||"",onChange:j,className:"custom-text-input",placeholder:"0",tabIndex:4})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pack",className:"form-label",children:"Pack (e.g., strip)"}),r.jsx("input",{type:"text",name:"pack",id:"pack",value:i.pack||"",onChange:j,className:"custom-text-input",placeholder:"e.g., strip",tabIndex:5})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:i.expiry_date||"",onChange:j,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:i.box_number||"",onChange:j,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[r.jsxs("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},tabIndex:8,ref:x,children:["Others",r.jsx("span",{children:f?"":"+"})]}),f&&r.jsxs("div",{className:"form-grid-2",style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary, #f9fafb)",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("div",{className:"span-2 form-group",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:2,value:i.description||"",onChange:j,className:"custom-text-input",tabIndex:9,style:{minHeight:"60px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"rate",step:"0.01",min:"0",value:i.rate??"",onChange:j,placeholder:"Buying Price",className:"custom-text-input",tabIndex:10,ref:b})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:i.gst??"",onChange:j,placeholder:"5",className:"custom-text-input",tabIndex:11})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:i.margin??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:i.discount??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"batch",value:i.batch||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:14})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:i.hsn_code||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"mfg",value:i.mfg||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Qty"}),r.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:i.loose??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:17})]})]})]})]}),r.jsx("div",{style:{marginTop:"1rem"},children:r.jsx(ARe,{entityType:"drugs",config:a,values:i.custom_fields||{},onChange:w})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:e,disabled:c,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:19,children:c?"Adding...":"Add Drug"})]})]})]})}):null},PRe=({purchaseRows:t,onCellChange:e,onRemoveDrug:n,onAddEmptyRow:a})=>{const i=v.useRef(new Map),s=["name","mrp","stock","pack","expiry_date","rate","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],o=(l,c,u)=>{if(l.key==="Tab"){l.preventDefault();const f=s.indexOf(u);if(f!==-1){const p=(f+1)%s.length,g=s[p],x=i.current.get(`${c}-${g}`);x==null||x.focus()}}};return t.length===0?r.jsxs("div",{className:"no-drugs-message",children:[r.jsx("p",{children:"No drugs added to the purchase list yet."}),r.jsxs("button",{onClick:a,className:"action-button add-drug-to-table-button",children:[r.jsx(Ds,{size:18,className:"button-icon"}),"Add the first drug"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"purchase-drugs-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Composition Name"}),r.jsx("th",{children:"MRP ()"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Pack"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Rate ()"}),r.jsx("th",{children:"Brand Name"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{children:"GST (%)"}),r.jsx("th",{children:"Discount (%)"}),r.jsx("th",{children:"Margin (%)"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"HSN Code"}),r.jsx("th",{children:"MFG"}),r.jsx("th",{children:"Loose"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map((l,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("input",{type:"text",value:l.name||"",onChange:u=>e(u,l.id,"name"),onKeyDown:u=>o(u,l.id,"name"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-name`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.mrp||"",onChange:u=>e(u,l.id,"mrp"),onKeyDown:u=>o(u,l.id,"mrp"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-mrp`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.stock||"",onChange:u=>e(u,l.id,"stock"),onKeyDown:u=>o(u,l.id,"stock"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-stock`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.pack||"",onChange:u=>e(u,l.id,"pack"),onKeyDown:u=>o(u,l.id,"pack"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-pack`,u)}})}),r.jsx("td",{children:l.supplier||"N/A"}),r.jsx("td",{children:r.jsx("input",{type:"date",value:l.expiry_date||"",onChange:u=>e(u,l.id,"expiry_date"),onKeyDown:u=>o(u,l.id,"expiry_date"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-expiry_date`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.rate||"",onChange:u=>e(u,l.id,"rate"),onKeyDown:u=>o(u,l.id,"rate"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-rate`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.brand_name||"",onChange:u=>e(u,l.id,"brand_name"),onKeyDown:u=>o(u,l.id,"brand_name"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-brand_name`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.box_number||"",onChange:u=>e(u,l.id,"box_number"),onKeyDown:u=>o(u,l.id,"box_number"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-box_number`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.gst||"",onChange:u=>e(u,l.id,"gst"),onKeyDown:u=>o(u,l.id,"gst"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-gst`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.discount||"",onChange:u=>e(u,l.id,"discount"),onKeyDown:u=>o(u,l.id,"discount"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-discount`,u)}})}),r.jsx("td",{children:(()=>{const u=l.mrp||0,f=l.rate||0,p=l.gst!==null&&l.gst!==void 0?l.gst/100*f:0,g=l.discount!==null&&l.discount!==void 0?l.discount/100*u:0,x=u-(f+p)-g;return`${(u>0?x/u*100:0).toFixed(2)}%`})()}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.batch||"",onChange:u=>e(u,l.id,"batch"),onKeyDown:u=>o(u,l.id,"batch"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-batch`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.hsn_code||"",onChange:u=>e(u,l.id,"hsn_code"),onKeyDown:u=>o(u,l.id,"hsn_code"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-hsn_code`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.mfg||"",onChange:u=>e(u,l.id,"mfg"),onKeyDown:u=>o(u,l.id,"mfg"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-mfg`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.loose||"",onChange:u=>e(u,l.id,"loose"),onKeyDown:u=>o(u,l.id,"loose"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-loose`,u)}})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>n(l.id),className:"delete-button",title:"Remove Item",children:r.jsx(Wn,{size:16})})})]},l.id||c))})]})})},DRe="_container_7ak2k_7",ORe="_header_7ak2k_207",MRe="_backButton_7ak2k_221",IRe="_title_7ak2k_265",RRe="_stickyActionBar_7ak2k_287",LRe="_actionRow_7ak2k_317",FRe="_inputWrapper_7ak2k_335",$Re="_inputIcon_7ak2k_345",zRe="_input_7ak2k_335",BRe="_quickDistributors_7ak2k_401",qRe="_distributorChip_7ak2k_417",URe="_distributorChipIcon_7ak2k_463",VRe="_selectedInfo_7ak2k_473",HRe="_resultsDropdown_7ak2k_503",GRe="_resultItem_7ak2k_537",WRe="_buttonGroup_7ak2k_565",YRe="_button_7ak2k_565",KRe="_buttonPrimary_7ak2k_609",QRe="_buttonSecondary_7ak2k_631",XRe="_buttonAccent_7ak2k_653",JRe="_buttonDisabled_7ak2k_675",ZRe="_tableSection_7ak2k_691",e4e="_cardTitle_7ak2k_707",t4e="_cardIcon_7ak2k_727",n4e="_footer_7ak2k_947",r4e="_totalValue_7ak2k_981",a4e="_footerControls_7ak2k_1005",i4e="_paidInputGroup_7ak2k_1017",s4e="_paidLabel_7ak2k_1029",o4e="_paidInput_7ak2k_1017",l4e="_errorMsg_7ak2k_1075",hn={container:DRe,header:ORe,backButton:MRe,title:IRe,stickyActionBar:RRe,actionRow:LRe,inputWrapper:FRe,inputIcon:$Re,input:zRe,quickDistributors:BRe,distributorChip:qRe,distributorChipIcon:URe,selectedInfo:VRe,resultsDropdown:HRe,resultItem:GRe,buttonGroup:WRe,button:YRe,buttonPrimary:KRe,buttonSecondary:QRe,buttonAccent:XRe,buttonDisabled:JRe,tableSection:ZRe,cardTitle:e4e,cardIcon:t4e,footer:n4e,totalValue:r4e,footerControls:a4e,paidInputGroup:i4e,paidLabel:s4e,paidInput:o4e,errorMsg:l4e},Yz=()=>{const t=Lt(),{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:u,setDistributors:f}=zB(),[p,g]=v.useState(!1),[x,b]=v.useState(!0),j=v.useRef(null),w=v.useRef(null),[_,T]=v.useState(!1),C=v.useRef(null),[A,k]=v.useState(!1),[P,I]=v.useState([]),[R,q]=v.useState(null),[U,F]=v.useState(null),[B,V]=v.useState(!1),[W,G]=v.useState([]),z=["name","description","mrp","stock","pack","supplier","expiry_date","rate","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"];v.useEffect(()=>{(async()=>{b(!0);try{const _e=await le("/api/distributors?limit=4");if(_e.ok){const Ne=await _e.json();G(Array.isArray(Ne)?Ne.slice(0,4):[])}}catch(_e){console.error("Failed to fetch initial distributors",_e)}finally{b(!1)}})()},[]);const Y=()=>{const _e={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",mrp:0,stock:0,pack:"",supplier:a?a.name:"",expiry_date:"",rate:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};n(Ne=>[...Ne,_e])},Q=async(be,_e)=>{if(!be){F("No file provided for import.");return}if(!a){F("Please select a distributor before importing.");return}g(!0),F(null);const Ne=new FormData;Ne.append("inventoryFile",be),Ne.append("columnMapping",JSON.stringify(_e));try{const ee=await le("/api/drugs/parse-excel",{method:"POST",body:Ne});if(!ee.ok){const de=await ee.json();throw new Error(de.message||`Failed to parse Excel file: ${ee.statusText}`)}const ge=await ee.json();n(de=>[...de,...ge.map(ae=>({...ae,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:a?a.name:ae.supplier}))])}catch(ee){console.error("Failed to parse Excel file:",ee),F(ee.message||"Failed to parse Excel file. Please check the file format and try again.")}finally{j.current&&(j.current.value=""),g(!1),q(null)}},K=async be=>{if(be.target.files&&be.target.files[0]){const _e=be.target.files[0];q(_e),F(null),g(!0);const Ne=new FormData;Ne.append("inventoryFile",_e);try{const ee=await le("/api/drugs/get-file-headers",{method:"POST",body:Ne});if(!ee.ok){const de=await ee.json();throw new Error(de.message||`Failed to get file headers: ${ee.statusText}`)}const{headers:ge}=await ee.json();I(ge),k(!0)}catch(ee){console.error("Failed to get file headers:",ee),F(ee.message||"Failed to read file headers. Please check the file format and try again."),q(null)}finally{g(!1)}}else q(null)},$=be=>{R?Q(R,be):F("No file selected for import after mapping."),k(!1)},ie=()=>{k(!1),I([]),q(null),j.current&&(j.current.value="")},xe=()=>{var be;(be=j.current)==null||be.click()},X=async be=>{if(be.target.files&&be.target.files[0]){const _e=be.target.files[0];F(null),g(!0);const Ne=new FormData;Ne.append("file",_e),Ne.append("output_type","csv");const ge={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const de=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:ge,body:Ne});if(!de.ok){const me=await de.json();throw new Error(me.message||`Failed to extract data from image/PDF: ${de.statusText}`)}const ae=await de.json();if(!ae.success||!ae.content)throw new Error(ae.detail||"Nanonets API did not return expected content.");let ne=ae.content;ne=ne.split(`
`).filter(me=>!me.startsWith("#")&&me.trim()!=="").join(`
`);const je=new File([ne],"extracted_data.csv",{type:"text/csv"}),Ee=new FormData;Ee.append("inventoryFile",je);const J=await le("/api/drugs/get-file-headers",{method:"POST",body:Ee});if(!J.ok){const me=await J.json();throw new Error(me.message||`Failed to get headers from extracted CSV: ${J.statusText}`)}const{headers:ye}=await J.json();I(ye),q(je),k(!0)}catch(de){console.error("Failed to extract data from image/PDF:",de),F(de.message||"Failed to extract data from image/PDF. Please check the file and try again.")}finally{w.current&&(w.current.value=""),g(!1)}}},Ie=()=>{var be;(be=w.current)==null||be.click()},$e=()=>{if(!a){F("Please select a distributor before adding a drug manually.");return}V(!0)},Be=()=>{V(!1),F(null)},Le=be=>{n(_e=>[..._e,{...be,id:Date.now().toString(),supplier:a?a.name:be.supplier}]),Be()},ce=be=>{n(_e=>_e.filter(Ne=>Ne.id!==be))},Se=(be,_e,Ne)=>{const{value:ee}=be.target;n(ge=>ge.map(de=>{if(de.id===_e){let ae=ee;Ne==="expiry_date"?ae=ee.trim()===""?null:ee:["mrp","stock","rate","gst","margin","discount","loose"].includes(Ne)&&(ae=parseFloat(ee),isNaN(ae)&&(ae=null));const ne={...de,[Ne]:ae};return Ne==="name"&&a&&!ne.supplier&&(ne.supplier=a.name),ne}return de}))},Ve=v.useCallback(()=>e.reduce((be,_e)=>{const Ne=_e.stock||0,ee=_e.rate||0,ge=_e.gst||0,de=_e.discount||0;let ae=ee*(1-de/100),ne=Ne*ae;return ne+=ne*(ge/100),be+ne},0),[e]),Ae=async()=>{if(!a){F("Please select a distributor before submitting the purchase.");return}const be=e.filter(_e=>Object.values(_e).some(Ne=>typeof Ne=="string"&&Ne.trim()!==""||typeof Ne=="number"&&Ne!==0||Ne!=null&&typeof Ne!="string"&&typeof Ne!="number"));if(be.length===0){F("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),g(!1);return}g(!0),F(null);try{for(const ge of be){const de={...ge,expiry_date:ge.expiry_date===""?null:ge.expiry_date,distributorId:a.id},ae=await le("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(!ae.ok){const ne=await ae.json();throw new Error(ne.message||`Failed to add drug ${ge.name}: ${ae.statusText}`)}}const _e=Ve(),Ne=new Date().toISOString().split("T")[0],ee=await le(`/api/distributors/${a.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:Ne,order_value:_e,amount_paid:l,notes:"Payment from purchase page."})});if(!ee.ok){const ge=await ee.json();throw new Error(ge.message||`Failed to record distributor payment: ${ee.statusText}`)}n([]),i(null),o(""),c(0),t("/dashboard/inventory")}catch(_e){console.error("Failed to submit purchase:",_e),F(_e.message||"Failed to submit purchase. Please try again.")}finally{g(!1)}},ue=v.useCallback(async be=>{if(be.trim()===""){f([]);return}try{const _e=await le(`/api/distributors?search=${encodeURIComponent(be)}`);if(!_e.ok)throw new Error(`Failed to fetch distributors: ${_e.statusText}`);const Ne=await _e.json();f(Ne)}catch(_e){console.error("Failed to fetch distributors:",_e),F(_e.message||"Failed to load distributors.")}},[]),Te=be=>{const _e=be.target.value;o(_e),i(null),C.current&&clearTimeout(C.current),_e.trim()!==""?C.current=setTimeout(()=>{ue(_e),T(!0)},300):(f([]),T(!1))},oe=be=>{i(be),o(be.name),T(!1),f([])};return v.useEffect(()=>{const be=_e=>{_e.target instanceof HTMLElement&&!_e.target.closest(`.${hn.inputWrapper}`)&&T(!1)};return document.addEventListener("mousedown",be),()=>{document.removeEventListener("mousedown",be),C.current&&clearTimeout(C.current)}},[]),r.jsxs("div",{className:hn.container,children:[r.jsxs("div",{className:hn.header,children:[r.jsx("button",{onClick:()=>t(-1),className:hn.backButton,title:"Go Back",children:r.jsx(sn,{size:24})}),r.jsx("h2",{className:hn.title,children:"Purchase Inventory"})]}),U&&r.jsxs("div",{className:hn.errorMsg,children:[r.jsx(Fr,{size:20}),U]}),r.jsx("div",{className:hn.stickyActionBar,children:r.jsxs("div",{className:hn.actionRow,children:[r.jsxs("div",{style:{flex:1,minWidth:"300px",position:"relative"},children:[r.jsxs("div",{className:hn.inputWrapper,children:[r.jsx(En,{className:hn.inputIcon,size:20}),r.jsx("input",{type:"text",placeholder:"Search distributor...",value:s,onChange:Te,onFocus:()=>s.trim()!==""&&T(!0),className:hn.input}),_&&u.length>0&&r.jsx("ul",{className:hn.resultsDropdown,children:u.map(be=>r.jsx("li",{onClick:()=>oe(be),className:hn.resultItem,children:be.name},be.id))})]}),x?r.jsx("div",{className:hn.quickDistributors,children:[1,2,3,4].map(be=>r.jsx(te,{width:100,height:32,style:{borderRadius:"16px"}},be))}):W.length>0&&!a&&r.jsx("div",{className:hn.quickDistributors,children:W.map(be=>r.jsxs("button",{className:hn.distributorChip,onClick:()=>oe(be),children:[r.jsx(Yn,{className:hn.distributorChipIcon}),be.name]},be.id))}),a&&r.jsxs("div",{className:hn.selectedInfo,style:{marginTop:"0.5rem",marginBottom:0},children:[r.jsx(Wo,{size:18}),r.jsxs("span",{children:["Selected: ",r.jsx("strong",{children:a.name})]})]})]}),r.jsxs("div",{className:hn.buttonGroup,children:[r.jsx("input",{ref:j,type:"file",className:"sr-only",style:{display:"none"},accept:".xlsx, .xls, .csv",onChange:K}),r.jsx("input",{ref:w,type:"file",className:"sr-only",style:{display:"none"},accept:".pdf, .png, .jpg, .jpeg",onChange:X}),r.jsxs("button",{onClick:xe,disabled:p||!a,className:`${hn.button} ${hn.buttonPrimary} ${p||!a?hn.buttonDisabled:""}`,title:a?"":"Select a distributor to import",children:[r.jsx(Ov,{size:18}),p?"Processing...":"Import Excel/CSV"]}),r.jsxs("button",{onClick:Ie,disabled:p||!a,className:`${hn.button} ${hn.buttonSecondary} ${p||!a?hn.buttonDisabled:""}`,title:a?"":"Select a distributor",children:[r.jsx(Xr,{size:18}),"Scan Image/PDF"]}),r.jsxs("button",{onClick:$e,disabled:!a,className:`${hn.button} ${hn.buttonAccent} ${a?"":hn.buttonDisabled}`,title:a?"":"Select a distributor",children:[r.jsx(Ds,{size:18}),"Add Manually"]})]})]})}),r.jsx(kRe,{isOpen:A,onClose:ie,excelHeaders:P,onConfirm:$,availableFields:z}),B&&r.jsx(ERe,{isOpen:B,onClose:Be,onDrugAddedToPurchase:Le}),r.jsxs("div",{className:hn.tableSection,children:[r.jsxs("div",{className:hn.cardTitle,children:[r.jsx(Ob,{className:hn.cardIcon,size:24}),"Purchase Items (",e.length,")"]}),r.jsx(PRe,{purchaseRows:e,onCellChange:Se,onRemoveDrug:ce,onAddEmptyRow:Y})]}),r.jsxs("div",{className:hn.footer,children:[r.jsxs("button",{onClick:Y,className:`${hn.button} ${hn.buttonSecondary}`,children:[r.jsx(Ds,{size:18}),"Add New Row"]}),r.jsxs("div",{className:hn.footerControls,children:[r.jsxs("div",{className:hn.paidInputGroup,children:[r.jsx("label",{htmlFor:"amount-paid",className:hn.paidLabel,children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount-paid",value:l,onChange:be=>c(parseFloat(be.target.value)||0),placeholder:"0.00",className:hn.paidInput,step:"0.01",disabled:!a})]}),r.jsxs("div",{className:hn.totalValue,children:["Total: ",r.jsxs("span",{children:["",Ve().toFixed(2)]})]}),r.jsx("button",{onClick:Ae,disabled:p||e.length===0||!a,className:`${hn.button} ${hn.buttonPrimary} ${hn.submitButton} ${p||!a||e.length===0?hn.buttonDisabled:""}`,style:{padding:"0.8rem 1.5rem",fontSize:"1rem"},children:p?"Submitting...":"Complete Purchase"})]})]})]})},c4e=t=>{if(!t)return 1;const e=t.match(/(?:\d+x)?(\d+)/);return e&&e[1]?parseInt(e[1],10):1},u4e=()=>{const t=Lt(),e=Br(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,u]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[w,_]=v.useState(""),[T,C]=v.useState(""),[A,k]=v.useState(""),[P,I]=v.useState(""),[R,q]=v.useState(0),U=v.useRef(!1),[F,B]=v.useState(null),[V,W]=v.useState(!1),[G,z]=v.useState(!1),[Y,Q]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),K=()=>{Y.length<5&&Q(Ne=>[...Ne,{id:Date.now().toString(),method:"cash",amount:0}])},$=Ne=>{Y.length>2&&Q(ee=>ee.filter(ge=>ge.id!==Ne))},ie=(Ne,ee,ge)=>{Q(de=>{const ae=de.map(ne=>ne.id===Ne?ee==="method"?{...ne,method:ge}:{...ne,amount:Math.max(0,ge)}:ne);if(ee==="amount"&&ae.length===2){const se=ae.findIndex(J=>J.id===Ne)===0?1:0,je=Math.max(0,ge),Ee=Ae-je;ae[se]={...ae[se],amount:Math.max(0,Ee)}}return ae})},xe=(Ne,ee)=>{const ge=Y.filter(ae=>ae.id!==Ne).reduce((ae,ne)=>ae+ne.amount,0),de=Math.max(0,ee-ge);Q(ae=>ae.map(ne=>ne.id===Ne?{...ne,amount:de}:ne))},X=Ne=>{const ee=Math.max(0,Math.min(100,isNaN(Ne)?0:Ne));U.current=!0,q(ee);const ge=i.map(de=>({...de,discount_percentage:ee}));s(ge)},Ie=(Ne,ee)=>{const ge=[...i];ge[Ne].discount_percentage=isNaN(ee)?0:ee,s(ge)};v.useEffect(()=>{if(U.current){U.current=!1;return}const Ne=i.reduce((de,ae)=>de+(ae.total_price??0),0);if(Ne===0){q(0);return}const ge=i.reduce((de,ae)=>{const se=(ae.total_price??0)*((ae.discount_percentage??0)/100);return de+se},0)/Ne*100;q(de=>Math.abs(de-ge)>.01?ge:de)},[i]);const $e=async()=>{if(!n)return u("No order data available to bill."),null;if(i.length===0)return u("Cannot bill an empty order."),null;p(!0),u(null);try{const Ne=i.map(se=>{const je=(se.pricePerLooseUnit??0)*(se.looseQuantity??0),Ee=je*((se.discount_percentage??0)/100),J=je-Ee;return{name:se.name,pack_quantity:se.loosePacks??0,loose_quantity:se.looseUnits??0,price:se.originalPrice??0,pack_price:se.originalPrice??0,loose_price:se.pricePerLooseUnit??0,total:J,drug_id:se.drug_id,discount_percentage:se.discount_percentage??0,batch:se.batch,expiry_date:se.expiry_date}}),ee={patientId:n.patientId,queueId:n.id,items:Ne,amount:Ae,paymentMode:G?"split":g,type:"pharmacy",related_id:n.id,status:"paid",discountPercentage:R};G&&(ee.splitPayments=Y.map(se=>({method:se.method,amount:se.amount})));const ge=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)}),de=await ge.json();if(!ge.ok||!de.id)throw new Error(de.message||"Failed to create bill.");const ae=await le(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:de.id,medications:i})});if(!ae.ok){const se=await ae.text();throw new Error(`Failed to update pharmacy order status: ${ae.statusText} - ${se}`)}a(se=>se?{...se,status:"billed",bill_id:de.id}:null);const ne=G?Y.filter(se=>se.method==="credit").reduce((se,je)=>se+je.amount,0):g==="credit"?Ae:0;if(ne>0)try{await le(`/api/patient-debts/${n.patientId}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:ne,related_bill_id:de.id,notes:`Pharmacy Bill #${de.id}`})})}catch(se){console.error("Failed to create debt entry:",se)}return t(`/dashboard/pharmacy-billing/${n.id}`,{replace:!0,state:{order:{...n,status:"billed",bill_id:de.id},initialItems:i}}),de.id}catch(Ne){return console.error("Billing process failed:",Ne),u(Ne.message||"Failed to mark order as billed. Please try again."),null}finally{p(!1)}},Be=async()=>{if(n)try{const Ne=await le(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed",medications:i})});if(!Ne.ok){const ee=await Ne.text();console.error("Failed to dispense order:",ee)}}catch(Ne){console.error("Error dispensing order:",Ne)}},Le=()=>{window.print()},ce=async()=>{await $e()&&(window.print(),await Be(),t(-1))};v.useEffect(()=>{const Ne=e.pathname.split("/"),ee=Ne[Ne.length-1];ee?(async()=>{try{l(!0);const[de,ae,ne]=await Promise.all([le(`/api/pharmacy-orders/${ee}`),le("/api/drugs").then(J=>J.ok?J.json():null).catch(()=>null),le("/api/clinics/settings").then(J=>J.ok?J.json():null).catch(()=>null)]);if(!de.ok)throw new Error("Failed to fetch pharmacy order details");const se=await de.json();a(se);let je=[];ae&&(je=ae.drugs||ae||[]),ne&&(_(ne.upi_id||""),C(ne.name||""),k(ne.address||""),I(ne.notes||""));const Ee=se.medications.map(J=>{const ye=c4e(J.unit),me=(J.pack_quantity??0)*ye+(J.loose_quantity??0),he=je.find(wt=>J.drug_id&&String(wt.id)===String(J.drug_id)||wt.name.toLowerCase()===J.name.toLowerCase()),De=J.batch||(he==null?void 0:he.batch)||(he==null?void 0:he.batch_number),nt=J.expiry_date||(he==null?void 0:he.expiry_date),Fe=Number(J.pack_price)||Number(he==null?void 0:he.mrp)||0,Ge=Number(he==null?void 0:he.rate)||0;let it=Number(J.loose_price)||0;return it===0&&(Fe>0&&ye>0?it=Fe/ye:Ge>0&&(it=Ge)),{...J,isLoose:!0,loosePacks:J.pack_quantity??0,looseUnits:J.loose_quantity??0,looseQuantity:me,pack_price:Fe,loose_price:it,total_price:Number(J.total_price)||it*me,pricePerLooseUnit:it,originalPrice:Fe,discount_percentage:Number(J.discount_percentage)??0,directions_to_use:J.directions_to_use,tabletsPerDay:J.tabletsPerDay,numberOfDays:J.numberOfDays,batch:De,expiry_date:nt}});s(Ee)}catch(de){console.error("Failed to fetch data:",de),u(de.message||"Failed to load order details.")}finally{l(!1)}})():(u("No pharmacy order ID provided."),l(!1))},[e.pathname]);const Se=v.useMemo(()=>i.reduce((Ne,ee)=>Ne+(ee.total_price??0),0),[i]),Ve=v.useMemo(()=>i.reduce((Ne,ee)=>{const de=(ee.total_price??0)*(ee.discount_percentage??0)/100;return Ne+de},0),[i]),Ae=v.useMemo(()=>Se-Ve,[Se,Ve]),ue=v.useMemo(()=>Y.reduce((Ne,ee)=>Ne+ee.amount,0),[Y]),Te=v.useMemo(()=>Ae-ue,[Ae,ue]),oe=v.useMemo(()=>Math.abs(Te)<.01,[Te]),be=v.useMemo(()=>G?Y.some(Ne=>Ne.method==="credit"&&Ne.amount>0):g==="credit",[G,Y,g]),_e=v.useMemo(()=>G?Y.filter(Ne=>Ne.method==="credit").reduce((Ne,ee)=>Ne+ee.amount,0):g==="credit"?Ae:0,[G,Y,g,Ae]);return v.useEffect(()=>{if(Ae>0&&w){const Ne=`upi://pay?pa=${w}&pn=ClinicName&am=${Ae.toFixed(2)}&cu=INR`;j(Ne)}else j("")},[Ae,w]),v.useEffect(()=>{(async()=>{if(g==="credit"&&(n!=null&&n.patientId)){W(!0);try{const ee=await le(`/api/patient-debts/${n.patientId}/balance`);if(ee.ok){const ge=await ee.json();B(ge.netDebt||0)}else B(0)}catch(ee){console.error("Error fetching patient debt:",ee),B(0)}finally{W(!1)}}})()},[g,n==null?void 0:n.patientId]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(te,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:30,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:60,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(Ne=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:20,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:90,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})})]},Ne))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:28}),r.jsx(te,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(te,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T?`${T} Pharmacy`:"Pharmacy Bill"}),(A||P)&&r.jsxs("div",{className:"clinic-details-print",children:[A&&r.jsx("span",{className:"small-text clinic-address",children:A}),P&&r.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Pharmacy Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(so,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Medications"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"BATCH"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{children:"QUANTITY"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((Ne,ee)=>{var se;const ge=Ne.total_price??0,de=ge*(Ne.discount_percentage??0)/100,ae=ge-de;return r.jsxs("tr",{children:[r.jsx("td",{children:ee+1}),r.jsx("td",{children:Ne.name}),r.jsx("td",{children:Ne.batch||"N/A"}),r.jsx("td",{children:Ne.expiry_date?new Date(Ne.expiry_date).toLocaleDateString():"N/A"}),r.jsxs("td",{children:[r.jsxs("div",{children:["Packs: ",Ne.loosePacks??0]}),r.jsxs("div",{children:["Loose: ",Ne.looseUnits??0]})]}),r.jsx("td",{children:((se=Ne.originalPrice)==null?void 0:se.toFixed(2))??"N/A"}),r.jsx("td",{children:((Ne.pricePerLooseUnit??0)*(1-(Ne.discount_percentage??0)/100)).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:Ne.discount_percentage===0?"":Ne.discount_percentage,onChange:je=>Ie(ee,parseFloat(je.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsxs("td",{children:[5 .toFixed(1),"%"]}),r.jsx("td",{children:ae.toFixed(2)})]},ee)})})]}):r.jsx("p",{children:"No medications in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Se.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",R.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"GST (Included)"}),r.jsxs("span",{children:["",(Ae*.05).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ae.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:G?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),G&&Y.map((Ne,ee)=>Ne.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:Ne.method==="cash"?"Cash":Ne.method==="upi"?"UPI":Ne.method==="card"?"Card":Ne.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",Ne.amount.toFixed(2)]})]},ee))]}),F!==null&&(F>0||be)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(F??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(F??0).toFixed(2)]})]}),be&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",_e.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((F??0)+(be?_e:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:b,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Se.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:R===0?"":R,onChange:Ne=>X(parseFloat(Ne.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ae.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>z(!G),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:G?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:G?"rgba(79, 172, 254, 0.1)":"transparent",color:G?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),G?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Ae.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:Y.map((Ne,ee)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ee+1}),r.jsxs("select",{value:Ne.method,onChange:ge=>ie(Ne.id,"method",ge.target.value),className:`split-payment-select ${Ne.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Ne.amount||"",onChange:ge=>ie(Ne.id,"amount",parseFloat(ge.target.value)||0),className:`split-payment-input ${Ne.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),Y.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>xe(Ne.id,Ae),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>$(Ne.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},Ne.id))}),Y.length<5&&r.jsxs("button",{type:"button",onClick:K,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${oe?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[oe?"":Te>0?"":"",oe?"Balanced":Te>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Te).toFixed(2)]})]}),!oe&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",Ae.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:g,onChange:Ne=>x(Ne.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),be&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),V?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:F&&F>0?"#dc3545":"#28a745"},children:["",(F||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",_e.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((F||0)+_e).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[n.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Le,className:"secondary-button print-preview-button no-print",disabled:f||i.length===0,children:"Print Preview"}),r.jsx("button",{onClick:ce,className:"primary-button",disabled:f||i.length===0,children:f?"Processing...":"Finalise and Bill"})]}),n.status==="billed"&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${n.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},d4e=()=>{const t=Lt(),e=Br(),[n,a]=v.useState(null),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState([]),[f,p]=v.useState(!0),[g,x]=v.useState(null),[b,j]=v.useState(!1),[w,_]=v.useState("cash"),[T,C]=v.useState(""),[A,k]=v.useState(""),[P,I]=v.useState(""),[R,q]=v.useState(""),[U,F]=v.useState(""),[B,V]=v.useState(0),W=v.useRef(!1),[G,z]=v.useState(null),[Y,Q]=v.useState(!1),[K,$]=v.useState(!1),[ie,xe]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),X=()=>{ie.length<5&&xe(de=>[...de,{id:Date.now().toString(),method:"cash",amount:0}])},Ie=de=>{ie.length>2&&xe(ae=>ae.filter(ne=>ne.id!==de))},$e=(de,ae,ne)=>{xe(se=>{const je=se.map(Ee=>Ee.id===de?ae==="method"?{...Ee,method:ne}:{...Ee,amount:Math.max(0,ne)}:Ee);if(ae==="amount"&&je.length===2){const J=je.findIndex(he=>he.id===de)===0?1:0,ye=Math.max(0,ne),me=oe-ye;je[J]={...je[J],amount:Math.max(0,me)}}return je})},Be=(de,ae)=>{const ne=ie.filter(je=>je.id!==de).reduce((je,Ee)=>je+Ee.amount,0),se=Math.max(0,ae-ne);xe(je=>je.map(Ee=>Ee.id===de?{...Ee,amount:se}:Ee))},Le=de=>{const ae=Math.max(0,Math.min(100,isNaN(de)?0:de));W.current=!0,V(ae);const ne=c.map(se=>({...se,discount_percentage:ae}));u(ne)},ce=(de,ae)=>{const ne=[...c];ne[de].discount_percentage=isNaN(ae)?0:ae,u(ne)};v.useEffect(()=>{if(W.current){W.current=!1;return}const de=c.reduce((se,je)=>se+(je.price??0),0);if(de===0){V(0);return}const ne=c.reduce((se,je)=>{const J=(je.price??0)*((je.discount_percentage??0)/100);return se+J},0)/de*100;V(se=>Math.abs(se-ne)>.01?ne:se)},[c]);const Se=async()=>{if(!n)return x("No order data available to bill."),null;if(c.length===0)return x("Cannot bill an empty order."),null;j(!0),x(null);try{const de=c.map(J=>{const ye=J.price,me=ye*((J.discount_percentage??0)/100),he=ye-me;return{name:J.name,price:J.price,quantity:1,total:he,item_id:J.id,type:"lab_test",discount_percentage:J.discount_percentage??0}}),ae={patientId:n.patient_id,items:de,amount:oe,paymentMode:K?"split":w,type:"lab",related_id:n.id,status:"paid",discountPercentage:B};K&&(ae.splitPayments=ie.map(J=>({method:J.method,amount:J.amount})));const ne=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)}),se=await ne.json();if(!ne.ok||!se.id)throw new Error(se.message||"Failed to create bill.");const je=await le(`/api/lab/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:se.id})});if(!je.ok){const J=await je.text();throw new Error(`Failed to update lab order status: ${je.statusText} - ${J}`)}a(J=>J?{...J,status:"billed",bill_id:se.id}:null);const Ee=K?ie.filter(J=>J.method==="credit").reduce((J,ye)=>J+ye.amount,0):w==="credit"?oe:0;if(Ee>0)try{await le(`/api/patient-debts/${n.patient_id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ee,related_bill_id:se.id,notes:`Lab Bill #${se.id}`})})}catch(J){console.error("Failed to create debt entry:",J)}return t(`/dashboard/lab-billing/${n.id}`,{replace:!0,state:{...e.state,order:{...n,status:"billed",bill_id:se.id}}}),se.id}catch(de){return console.error("Billing process failed:",de),x(de.message||"Failed to mark order as billed. Please try again."),null}finally{j(!1)}},Ve=()=>{window.print()},Ae=async()=>{await Se()&&(window.print(),t(-1))};v.useEffect(()=>{const de=e.pathname.split("/"),ae=de[de.length-1];ae?(async()=>{try{const[se,je]=await Promise.all([le(`/api/lab/${ae}`),le("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!se.ok)throw new Error("Failed to fetch lab order details");const Ee=await se.json();a(Ee);const J=Ee.patient_id?le(`/api/patients/${Ee.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1});if(je.ok&&"json"in je){const he=await je.json();k(he.upi_id||""),I(he.name||""),q(he.address||""),F(he.notes||"")}const ye=await J;if(ye.ok&&"json"in ye){const he=await ye.json();s(he.name),l(he.patient_token_number)}const me=Ee.tests.map(he=>({...he,price:typeof he.price=="string"?parseFloat(he.price):Number(he.price)||0,discount_percentage:0,total_price:typeof he.price=="string"?parseFloat(he.price):Number(he.price)||0}));u(me)}catch(se){console.error("Failed to fetch data:",se),x(se.message||"Failed to load order details.")}finally{p(!1)}})():(x("No lab order ID provided."),p(!1))},[e.pathname]);const ue=v.useMemo(()=>c.reduce((de,ae)=>de+(ae.price??0),0),[c]),Te=v.useMemo(()=>c.reduce((de,ae)=>{const se=(ae.price??0)*(ae.discount_percentage??0)/100;return de+se},0),[c]),oe=v.useMemo(()=>ue-Te,[ue,Te]),be=v.useMemo(()=>ie.reduce((de,ae)=>de+ae.amount,0),[ie]),_e=v.useMemo(()=>oe-be,[oe,be]),Ne=v.useMemo(()=>Math.abs(_e)<.01,[_e]),ee=v.useMemo(()=>K?ie.some(de=>de.method==="credit"&&de.amount>0):w==="credit",[K,ie,w]),ge=v.useMemo(()=>K?ie.filter(de=>de.method==="credit").reduce((de,ae)=>de+ae.amount,0):w==="credit"?oe:0,[K,ie,w,oe]);return v.useEffect(()=>{if(oe>0&&A){const de=`upi://pay?pa=${A}&pn=ClinicName&am=${oe.toFixed(2)}&cu=INR`;C(de)}else C("")},[oe,A]),v.useEffect(()=>{(async()=>{if(ee&&(n!=null&&n.patient_id)){Q(!0);try{const ae=await le(`/api/patient-debts/${n.patient_id}/balance`);if(ae.ok){const ne=await ae.json();z(ne.netDebt||0)}else z(0)}catch(ae){console.error("Error fetching patient debt:",ae),z(0)}finally{Q(!1)}}})()},[ee,n==null?void 0:n.patient_id]),f?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(te,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(te,{width:200,height:20}),r.jsx(te,{width:150,height:20}),r.jsx(te,{width:180,height:20}),r.jsx(te,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:24}),r.jsx(te,{width:100,height:24})]}),r.jsx(te,{width:"100%",height:150})," ",r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})})]})]})}):g?r.jsxs("div",{className:"error-message-box",children:["Error: ",g]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:P?`${P} Lab`:"Lab Bill"}),(R||U)&&r.jsxs("div",{className:"clinic-details-print",children:[R&&r.jsx("span",{className:"small-text clinic-address",children:R}),U&&r.jsx("span",{className:"small-text clinic-notes",children:U})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:20})}),r.jsx("h1",{children:"Lab Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(us,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Lab Tests"})}),c.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"TEST DESCRIPTION"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:c.map((de,ae)=>{const ne=de.price??0,se=ne*(de.discount_percentage??0)/100,je=ne-se;return r.jsxs("tr",{children:[r.jsx("td",{children:ae+1}),r.jsx("td",{children:de.name}),r.jsx("td",{children:typeof de.price=="number"?de.price.toFixed(2):Number(de.price||0).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:de.discount_percentage||"",onChange:Ee=>ce(ae,parseFloat(Ee.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:je.toFixed(2)})]},ae)})})]}):r.jsx("p",{children:"No tests in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",B.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Te.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",oe.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:K?"Split Payment":w==="cash"?"Cash":w==="upi"?"UPI":w==="card"?"Card":w==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),K&&ie.map((de,ae)=>de.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:de.method==="cash"?"Cash":de.method==="upi"?"UPI":de.method==="card"?"Card":de.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",de.amount.toFixed(2)]})]},ae))]}),G!==null&&(G>0||ee)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(G??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(G??0).toFixed(2)]})]}),ee&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ge.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((G??0)+(ee?ge:0)).toFixed(2)]})]})]})]}),T&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${w!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:T,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Te.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:B===0?"":B,onChange:de=>Le(parseFloat(de.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:b||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",oe.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:T?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:T,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>$(!K),disabled:b||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:K?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:K?"rgba(79, 172, 254, 0.1)":"transparent",color:K?"#4facfe":"#666",cursor:b||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),K?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",oe.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:ie.map((de,ae)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ae+1}),r.jsxs("select",{value:de.method,onChange:ne=>$e(de.id,"method",ne.target.value),className:`split-payment-select ${de.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:de.amount||"",onChange:ne=>$e(de.id,"amount",parseFloat(ne.target.value)||0),className:`split-payment-input ${de.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed"})]}),ie.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>Be(de.id,oe),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>Ie(de.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},de.id))}),ie.length<5&&r.jsxs("button",{type:"button",onClick:X,className:"split-payment-add-btn",disabled:b||n.status==="billed",children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ne?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Ne?"":_e>0?"":"",Ne?"Balanced":_e>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(_e).toFixed(2)]})]}),!Ne&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",oe.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:w,onChange:de=>_(de.target.value),className:"payment-mode-select",disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),ee&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Y?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:G&&G>0?"#dc3545":"#28a745"},children:["",(G||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ge.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((G||0)+ge).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:Ve,className:"secondary-button print-preview-button no-print",disabled:b||c.length===0,children:"Print Preview"}),n.status!=="billed"&&r.jsx("button",{onClick:Ae,className:"primary-button",disabled:b||c.length===0,children:b?"Processing...":"Finalise and Bill"}),n.status==="billed"&&n.bill_id&&r.jsx("button",{onClick:()=>t("/billing",{state:{billId:n.bill_id}}),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})]}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},h4e=500,f4e=()=>{const t=Lt(),{queueId:e}=$a(),[n]=LB(),a=n.get("doctorId"),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,u]=v.useState(null),[f,p]=v.useState(null),[g,x]=v.useState([]),[b,j]=v.useState(!0),[w,_]=v.useState(null),[T,C]=v.useState(!1),[A,k]=v.useState(!1),[P,I]=v.useState(null),[R,q]=v.useState("cash"),[U,F]=v.useState(""),[B,V]=v.useState(""),[W,G]=v.useState(""),[z,Y]=v.useState(""),[Q,K]=v.useState(""),[$,ie]=v.useState(0),[xe,X]=v.useState(null),[Ie,$e]=v.useState(!1),[Be,Le]=v.useState(!1),[ce,Se]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ve=()=>{ce.length<5&&Se(J=>[...J,{id:Date.now().toString(),method:"cash",amount:0}])},Ae=J=>{ce.length>2&&Se(ye=>ye.filter(me=>me.id!==J))},ue=(J,ye,me)=>{Se(he=>{const De=he.map(nt=>nt.id===J?ye==="method"?{...nt,method:me}:{...nt,amount:Math.max(0,me)}:nt);if(ye==="amount"&&De.length===2){const Fe=De.findIndex(wt=>wt.id===J)===0?1:0,Ge=Math.max(0,me),it=_e-Ge;De[Fe]={...De[Fe],amount:Math.max(0,it)}}return De})},Te=(J,ye)=>{const me=ce.filter(De=>De.id!==J).reduce((De,nt)=>De+nt.amount,0),he=Math.max(0,ye-me);Se(De=>De.map(nt=>nt.id===J?{...nt,amount:he}:nt))};v.useEffect(()=>{(async()=>{if(!e){_("No queue ID provided."),j(!1);return}try{j(!0),_(null);const[ye,me]=await Promise.all([le(`/api/queue/${e}`),le("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ye.ok)throw new Error("Failed to fetch queue entry");const he=await ye.json();if(s(he),me.ok&&"json"in me){const it=await me.json();V(it.upi_id||""),G(it.name||""),Y(it.address||""),K(it.notes||"")}const De=a||he.doctor_id,[nt,Fe]=await Promise.all([he.patient_id?le(`/api/patients/${he.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1}),De?le(`/api/staff/${De}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1})]);if(nt.ok&&"json"in nt){const it=await nt.json();l(it)}let Ge=h4e;if(De&&(p(De),Fe.ok&&"json"in Fe)){const it=await Fe.json();u(it),it.opd_fee!=null&&!isNaN(parseFloat(String(it.opd_fee)))&&(Ge=parseFloat(String(it.opd_fee)))}x([{name:"Consultation Fee",quantity:1,price:Ge,total:Ge,discount_percentage:0}])}catch(ye){console.error("Failed to fetch data:",ye),_(ye.message||"Failed to load billing details.")}finally{j(!1)}})()},[e,a]);const oe=v.useMemo(()=>g.reduce((J,ye)=>J+ye.total,0),[g]),be=v.useMemo(()=>oe*($/100),[oe,$]),_e=v.useMemo(()=>oe-be,[oe,be]),Ne=v.useMemo(()=>ce.reduce((J,ye)=>J+ye.amount,0),[ce]),ee=v.useMemo(()=>_e-Ne,[_e,Ne]),ge=v.useMemo(()=>Math.abs(ee)<.01,[ee]),de=v.useMemo(()=>Be?ce.some(J=>J.method==="credit"&&J.amount>0):R==="credit",[Be,ce,R]),ae=v.useMemo(()=>Be?ce.filter(J=>J.method==="credit").reduce((J,ye)=>J+ye.amount,0):R==="credit"?_e:0,[Be,ce,R,_e]);v.useEffect(()=>{if(_e>0&&B){const J=`upi://pay?pa=${B}&pn=${encodeURIComponent(W)}&am=${_e.toFixed(2)}&cu=INR`;F(J)}else F("")},[_e,B,W]),v.useEffect(()=>{(async()=>{if(de&&(o!=null&&o.id)){$e(!0);try{const ye=await le(`/api/patient-debts/${o.id}/balance`);if(ye.ok){const me=await ye.json();X(me.netDebt||0)}else X(0)}catch(ye){console.error("Error fetching patient debt:",ye),X(0)}finally{$e(!1)}}})()},[de,o==null?void 0:o.id]);const ne=J=>{const ye=Math.max(0,Math.min(100,isNaN(J)?0:J));ie(ye)},se=async()=>{if(!i||!o)return _("Missing queue or patient data."),null;if(g.length===0)return _("Cannot create an empty bill."),null;C(!0),_(null);try{const J=g.map(nt=>({name:nt.name,quantity:nt.quantity,price:nt.price,total:nt.total*(1-$/100)})),ye={patientId:o.id,queueId:i.id,items:J,amount:_e,paymentMode:Be?"split":R,type:"consultation",related_id:i.id,status:"paid",discountPercentage:$};Be&&(ye.splitPayments=ce.map(nt=>({method:nt.method,amount:nt.amount})));const me=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ye)}),he=await me.json();if(!me.ok||!he.id)throw new Error(he.message||"Failed to create bill.");const De=Be?ce.filter(nt=>nt.method==="credit").reduce((nt,Fe)=>nt+Fe.amount,0):R==="credit"?_e:0;if(De>0)try{await le(`/api/patient-debts/${o.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:De,related_bill_id:he.id,notes:`Consultation Bill #${he.id}`})})}catch(nt){console.error("Failed to create debt entry:",nt)}if(f&&i.id)try{const nt={status:"waiting",doctorId:f},Fe=await le(`/api/queue/${i.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)});if(Fe.ok)console.log(`Doctor ${f} assigned to queue ${i.id} after billing.`);else{const Ge=await Fe.json();console.error("Failed to assign doctor to queue:",Ge.message)}}catch(nt){console.error("Error assigning doctor to queue:",nt)}return k(!0),I(he.id),he.id}catch(J){return console.error("Billing process failed:",J),_(J.message||"Failed to create bill. Please try again."),null}finally{C(!1)}},je=()=>{window.print()},Ee=async()=>{await se()&&(window.print(),t(-1))};return b?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(te,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(te,{width:200,height:20}),r.jsx(te,{width:150,height:20}),r.jsx(te,{width:180,height:20}),r.jsx(te,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:24}),r.jsx(te,{width:100,height:24})]}),r.jsx(te,{width:"100%",height:150})," ",r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})})]})]})}):w?r.jsxs("div",{className:"error-message-box",children:["Error: ",w]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:W||"Clinic Bill"}),(z||Q)&&r.jsxs("div",{className:"clinic-details-print",children:[z&&r.jsx("span",{className:"small-text clinic-address",children:z}),Q&&r.jsx("span",{className:"small-text clinic-notes",children:Q})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date().toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:20})}),r.jsx("h1",{children:"Consultation Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Patient ID"]})," ",(o==null?void 0:o.id)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date().toLocaleDateString()]}),c&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Sf,{size:16})," Doctor"]})," ",c.name]}),i.complaint&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Complaint"})," ",i.complaint]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Bill Items"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((J,ye)=>{const me=J.total*($/100),he=J.total-me;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:J.name}),r.jsx("td",{children:J.quantity}),r.jsxs("td",{children:["",J.price.toFixed(2)]}),r.jsxs("td",{children:["",he.toFixed(2)]})]},ye)})})]}):r.jsx("p",{children:"No items in this bill."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",oe.toFixed(2)]})]}),$>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",$.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",be.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",_e.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:Be?"Split Payment":R==="cash"?"Cash":R==="upi"?"UPI":R==="card"?"Card":R==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),Be&&ce.map((J,ye)=>J.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:J.method==="cash"?"Cash":J.method==="upi"?"UPI":J.method==="card"?"Card":J.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",J.amount.toFixed(2)]})]},ye))]}),xe!==null&&(xe>0||de)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(xe??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(xe??0).toFixed(2)]})]}),de&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((xe??0)+(de?ae:0)).toFixed(2)]})]})]})]}),U&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${R!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:U,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",oe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["- ",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:$===0?"":$,onChange:J=>ne(parseFloat(J.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:T||A}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",_e.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:U?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:U,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>Le(!Be),disabled:T||A,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:Be?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:Be?"rgba(79, 172, 254, 0.1)":"transparent",color:Be?"#4facfe":"#666",cursor:T||A?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),Be?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",_e.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:ce.map((J,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:J.method,onChange:me=>ue(J.id,"method",me.target.value),className:`split-payment-select ${J.method==="credit"?"is-credit":""}`,disabled:T||A,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:J.amount||"",onChange:me=>ue(J.id,"amount",parseFloat(me.target.value)||0),className:`split-payment-input ${J.method==="credit"?"is-credit":""}`,disabled:T||A})]}),ce.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>Te(J.id,_e),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>Ae(J.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},J.id))}),ce.length<5&&r.jsxs("button",{type:"button",onClick:Ve,className:"split-payment-add-btn",disabled:T||A,children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ne.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${ge?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[ge?"":ee>0?"":"",ge?"Balanced":ee>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ee).toFixed(2)]})]}),!ge&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",_e.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:R,onChange:J=>q(J.target.value),className:"payment-mode-select",disabled:T||A,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),de&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Ie?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:xe&&xe>0?"#dc3545":"#28a745"},children:["",(xe||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ae.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((xe||0)+ae).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[!A&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:je,className:"secondary-button print-preview-button no-print",disabled:T||g.length===0,children:"Print Preview"}),r.jsx("button",{onClick:Ee,className:"primary-button",disabled:T||g.length===0,children:T?"Processing...":"Finalise and Bill"})]}),A&&P&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${P}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your visit!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No queue data available."})},p4e=({isOpen:t,onClose:e,onStaffAdded:n,clinicId:a,fetchWithAuth:i})=>{const[s,o]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[l,c]=v.useState(null),[u,f]=v.useState(!1),[p,g]=v.useState([]),[x,b]=v.useState(!1),j=v.useCallback(async()=>{b(!0);try{const T=await i("/api/clinic-roles");if(T.ok){const C=await T.json();g(C)}}catch(T){console.error("Failed to fetch roles:",T)}finally{b(!1)}},[i]);v.useEffect(()=>{t&&(j(),o({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),c(null))},[t,j]);const w=T=>{const{name:C,value:A}=T.target;o(k=>{const P={...k,[C]:A};return C==="role"&&A!=="doctor"&&(P.opd_fee=""),P})},_=async T=>{if(T.preventDefault(),c(null),!s.name||!s.email||!s.role||!s.password){c("Name, Email, Role, and Password are required.");return}if(!a){c("Clinic information is missing. Cannot add staff.");return}const C={...s,clinic_id:a,opd_fee:s.role==="doctor"&&s.opd_fee?parseFloat(String(s.opd_fee)):null};if(C.role==="doctor"&&s.opd_fee&&isNaN(C.opd_fee)){c("Invalid OPD Fee format. Please enter a number.");return}f(!0);try{const A=await i("/api/staff",{method:"POST",body:JSON.stringify(C)});if(!A.ok){const k=await A.json();throw new Error(k.message||"Server responded with an error")}n(),e()}catch(A){c(`Failed to add staff: ${A.message}`)}finally{f(!1)}};return t?r.jsx("div",{className:"staff-modal-overlay",children:r.jsxs("div",{className:"staff-modal-content",children:[r.jsxs("div",{className:"staff-modal-header",children:[r.jsx("h2",{className:"staff-modal-title",children:"Add New Staff"}),r.jsx("button",{onClick:e,className:"staff-modal-close",children:r.jsx(Rt,{size:20})})]}),l&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-3 py-2 rounded-lg relative mb-3 flex items-center",role:"alert",children:[r.jsx(Fr,{size:14,className:"mr-2 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:l})]}),r.jsxs("form",{onSubmit:_,className:"space-y-3",children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Full Name"}),r.jsx("input",{type:"text",name:"name",value:s.name||"",onChange:w,required:!0,disabled:u,placeholder:"Full name",className:"custom-text-input"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:s.email||"",onChange:w,required:!0,disabled:u,placeholder:"Email",className:"custom-text-input"})]}),r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Password"}),r.jsx("input",{type:"password",name:"password",value:s.password||"",onChange:w,required:!0,disabled:u,placeholder:"Initial password",className:"custom-text-input"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Assign Role"}),r.jsx("select",{name:"role",value:s.role||"receptionist",onChange:w,required:!0,disabled:u||x,className:"custom-select-input",children:x?r.jsx("option",{value:"",children:"Loading..."}):p.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):p.map(T=>r.jsx("option",{value:T.key,children:T.name},T.key))})]}),s.role==="doctor"&&r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"OPD Fee ()"}),r.jsx("input",{type:"number",name:"opd_fee",value:s.opd_fee||"",onChange:w,step:"0.01",min:"0",placeholder:"e.g., 500",disabled:u,className:"custom-text-input"})]})]}),r.jsxs("div",{className:"staff-modal-footer",children:[r.jsx("button",{type:"button",onClick:e,className:"btn-compact border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:u,children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn-compact bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50",disabled:u,children:[u?r.jsx(lo,{size:16,className:"animate-spin mr-2"}):r.jsx(Vn,{size:16,className:"mr-2"}),u?"Adding...":"Add Staff"]})]})]})]})}):null},m4e=({staffId:t,isOpen:e,onClose:n,onStaffUpdated:a,fetchWithAuth:i})=>{const[s,o]=v.useState(null),[l,c]=v.useState(null),[u,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState([]),[j,w]=v.useState(!1),_=v.useCallback(async()=>{w(!0);try{const k=await i("/api/clinic-roles");if(k.ok){const P=await k.json();b(P)}}catch(k){console.error("Failed to fetch roles:",k)}finally{w(!1)}},[i]),T=v.useCallback(async()=>{if(t){f(!0),c(null);try{const k=await i(`/staff/${t}`);if(!k.ok)throw new Error("Failed to fetch staff member");const P=await k.json();o({...P,id:P._id||P.id,opd_fee:P.opd_fee!==null&&P.opd_fee!==void 0?parseFloat(String(P.opd_fee)).toFixed(2):""})}catch(k){c(`Failed to load staff data: ${k.message}`)}finally{f(!1)}}},[t,i]);v.useEffect(()=>{e&&t?(T(),_()):(o(null),c(null))},[e,t,T,_]);const C=k=>{const{name:P,value:I,type:R}=k.target;o(q=>{if(!q)return null;let U=I;R==="checkbox"&&(U=k.target.checked);const F={...q,[P]:U};return P==="role"&&I!=="doctor"&&(F.opd_fee=""),F})},A=async k=>{if(k.preventDefault(),!s||!t)return;if(c(null),!s.name||!s.email||!s.role){c("Name, Email, and Role are required.");return}const P={name:s.name,email:s.email,role:s.role,active:s.active,opd_fee:s.role==="doctor"&&s.opd_fee?parseFloat(String(s.opd_fee)):null};if(P.role==="doctor"&&s.opd_fee&&isNaN(P.opd_fee)){c("Invalid OPD Fee format. Please enter a number.");return}g(!0);try{const I=await i(`/staff/${t}`,{method:"PUT",body:JSON.stringify(P)});if(!I.ok){const R=await I.json();throw new Error(R.message||"Failed to update staff")}a(),n()}catch(I){c(`Failed to update staff: ${I.message}`)}finally{g(!1)}};return e?r.jsx("div",{className:"staff-modal-overlay",children:r.jsxs("div",{className:"staff-modal-content",children:[r.jsxs("div",{className:"staff-modal-header",children:[r.jsx("h3",{className:"staff-modal-title",children:"Edit Staff"}),r.jsx("button",{onClick:n,className:"staff-modal-close",children:r.jsx(Rt,{size:20})})]}),l&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-3 py-2 rounded-lg relative mb-3 flex items-center",role:"alert",children:[r.jsx(Fr,{size:14,className:"mr-2 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:l})]}),u?r.jsxs("div",{className:"py-10 flex flex-col items-center justify-center text-gray-500",children:[r.jsx(lo,{size:28,className:"animate-spin mb-3 text-teal-600"}),r.jsx("p",{className:"text-sm",children:"Loading details..."})]}):s?r.jsxs("form",{onSubmit:A,className:"space-y-3",children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Full Name"}),r.jsx("input",{type:"text",name:"name",required:!0,value:s.name||"",onChange:C,className:"custom-text-input",disabled:p})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Role"}),r.jsx("select",{name:"role",required:!0,value:s.role||"",onChange:C,className:"custom-select-input",disabled:p||j,children:j?r.jsx("option",{value:"",children:"Loading..."}):x.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):x.map(k=>r.jsx("option",{value:k.key,children:k.name},k.key))})]}),r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Email"}),r.jsx("input",{type:"email",name:"email",required:!0,value:s.email||"",onChange:C,className:"custom-text-input",disabled:p})]})]}),s.role==="doctor"&&r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"OPD Fee ()"}),r.jsx("input",{type:"number",name:"opd_fee",value:s.opd_fee||"",onChange:C,className:"custom-text-input",step:"0.01",min:"0",placeholder:"e.g., 500",disabled:p})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[r.jsx("input",{type:"checkbox",id:"staff-active",name:"active",checked:s.active??!0,onChange:C,className:"w-3.5 h-3.5 rounded text-teal-600 focus:ring-teal-500"}),r.jsx("label",{htmlFor:"staff-active",className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:"Account Active"})]}),r.jsxs("div",{className:"staff-modal-footer",children:[r.jsx("button",{type:"button",onClick:n,className:"btn-compact border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:p,children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn-compact bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50",disabled:p,children:[p?r.jsx(lo,{size:16,className:"animate-spin mr-2"}):r.jsx(Wo,{size:16,className:"mr-2"}),p?"Saving...":"Save"]})]})]}):null]})}):null},g4e=()=>{const[t,e]=v.useState(!0),[n,a]=v.useState([]),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[g,x]=v.useState(null),[b,j]=v.useState(!1),[w,_]=v.useState(null),[T,C]=v.useState(!1),A=(V,W)=>{x({type:V,message:W}),setTimeout(()=>x(null),3e3)},k=V=>{switch(V){case"doctor":return r.jsx(Sf,{size:14,className:"text-blue-600"});case"receptionist":return r.jsx(uq,{size:14,className:"text-green-600"});case"pharmacy":return r.jsx(so,{size:14,className:"text-purple-600"});case"lab":return r.jsx(us,{size:14,className:"text-yellow-600"});default:return r.jsx(hd,{size:14,className:"text-gray-500"})}},P=V=>{switch(V){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},I=v.useCallback(async()=>{e(!0);try{const V=await le("/staff");if(V.ok){const W=await V.json();a(W.map(G=>({...G,id:G._id||G.id})))}}catch(V){console.error("Error fetching staff:",V),A("error","Failed to load staff list")}finally{e(!1)}},[]),R=v.useCallback(async()=>{l(!0);try{const V=await le("/api/clinics/settings");if(V.ok){const W=await V.json();p({admissionCharge:parseFloat(W.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(W.perDayCharge||0).toFixed(2),otherCharges:parseFloat(W.otherCharges||0).toFixed(2),aiMemory:W.aiMemory||"",clinicWideSystemPrompt:W.clinicWideSystemPrompt||"",gemini_api_key:W.gemini_api_key||"",low_stock_threshold:W.low_stock_threshold!==void 0&&W.low_stock_threshold!==null?String(W.low_stock_threshold):"10",name:W.name||"",logoUrl:W.logoUrl||"",labLetterheadUrl:W.labLetterheadUrl||"",upi_id:W.upi_id||"",address:W.address||"",notes:W.notes||"",clinic_id:W.clinic_id,voice_ai_language:W.voice_ai_language||"en-US"})}}catch(V){console.error("Error fetching settings:",V),A("error","Failed to load settings")}finally{l(!1)}},[]);v.useEffect(()=>{I(),R()},[I,R]);const q=V=>{const{name:W,value:G}=V.target;p(z=>({...z,[W]:G}))},U=async()=>{u(!0);try{const V=parseFloat(f.admissionCharge),W=parseFloat(f.perDayCharge),G=parseFloat(f.otherCharges),z=parseInt(f.low_stock_threshold);if((await le("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:f.name,admissionCharge:V,perDayCharge:W,otherCharges:G,aiMemory:f.aiMemory,clinicWideSystemPrompt:f.clinicWideSystemPrompt,gemini_api_key:f.gemini_api_key,low_stock_threshold:z,logoUrl:f.logoUrl,labLetterheadUrl:f.labLetterheadUrl,upi_id:f.upi_id,address:f.address,notes:f.notes,voice_ai_language:f.voice_ai_language})})).ok)A("success","Changes saved successfully");else throw new Error("Failed to save")}catch(V){console.error("Error saving settings:",V),A("error","Failed to save settings")}finally{u(!1)}},F=n.filter(V=>V.name.toLowerCase().includes(i.toLowerCase())||V.role.toLowerCase().includes(i.toLowerCase())),B=async V=>{for(const W of V){const G=document.getElementById(W);G&&(G.scrollIntoView({behavior:"smooth",block:"center"}),G.classList.add("ai-feedback-glow"),await new Promise(z=>setTimeout(z,1500)),G.classList.remove("ai-feedback-glow"))}};return r.jsxs("div",{className:"clinic-hub-container",children:[r.jsxs("header",{className:"clinic-hub-header",children:[r.jsxs("div",{className:"clinic-hub-title",children:[r.jsx("h1",{children:"Clinic Hub"}),r.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),r.jsxs("div",{className:"clinic-hub-actions",children:[g&&r.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${g.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.message}),r.jsxs("button",{className:"btn-add-staff",onClick:()=>j(!0),children:[r.jsx(Vn,{size:16})," Add Staff"]}),r.jsxs("button",{className:"btn-save-changes",onClick:U,disabled:c,children:[r.jsx(Bi,{size:16})," ",c?"Saving...":"Save Changes"]})]})]}),r.jsxs("main",{className:"clinic-hub-content",children:[r.jsxs("div",{className:"team-directory-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(zi,{size:18,className:"text-gray-500"}),r.jsxs("span",{className:"panel-title",children:["Team Directory (",n.length,")"]})]}),r.jsx("div",{className:"search-container",children:r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{size:16,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:i,onChange:V=>s(V.target.value)})]})}),r.jsx("div",{className:"team-list",children:t?r.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map(V=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(te,{variant:"circular",width:40,height:40}),r.jsxs("div",{className:"flex-1",children:[r.jsx(te,{width:120,height:16,className:"mb-1"}),r.jsx(te,{width:80,height:12})]})]},V))}):F.length===0?r.jsx("div",{className:"empty-state",children:"No staff found."}):F.map(V=>r.jsxs("div",{id:`staff-member-${V.id}`,className:"team-member-item",children:[r.jsx("div",{className:`member-avatar ${P(V.role)}`,children:V.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"member-info",children:[r.jsx("div",{className:"member-name",children:V.name}),r.jsxs("div",{className:"member-role",children:[k(V.role),V.role]})]}),r.jsx("span",{className:`member-status ${V.active?"status-active":"status-inactive"}`,children:V.active?"Active":"Inactive"}),r.jsx("button",{className:"btn-edit-member",onClick:()=>_(V.id),children:r.jsx(qi,{size:16})})]},V.id))})]}),r.jsxs("div",{className:"config-console-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(nq,{size:18,className:"text-gray-500"}),r.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),o?r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):r.jsxs("div",{className:"config-content",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(KD,{size:16})," CLINIC IDENTITY & LOCATION"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Clinic Name"}),r.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:f.name,onChange:q})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Logo URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:f.logoUrl,onChange:q})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:f.labLetterheadUrl,onChange:q})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Address"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:f.address,onChange:q})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(ud,{size:16})," FINANCIAL OPERATIONS"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Admission Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:f.admissionCharge,onChange:q})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Per Day Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:f.perDayCharge,onChange:q})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Other Charges ()"}),r.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:f.otherCharges,onChange:q})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"UPI ID"}),r.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:f.upi_id,onChange:q})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(WD,{size:16})," INVENTORY & AI"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:f.low_stock_threshold,onChange:q})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Voice AI Language"}),r.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:f.voice_ai_language,onChange:V=>p(W=>({...W,voice_ai_language:V.target.value})),children:[r.jsx("option",{value:"en-US",children:"English"}),r.jsx("option",{value:"hi-IN",children:"Hindi"}),r.jsx("option",{value:"te-IN",children:"Telugu"}),r.jsx("option",{value:"bn-IN",children:"Bengali"}),r.jsx("option",{value:"mr-IN",children:"Marathi"}),r.jsx("option",{value:"ta-IN",children:"Tamil"}),r.jsx("option",{value:"gu-IN",children:"Gujarati"}),r.jsx("option",{value:"kn-IN",children:"Kannada"}),r.jsx("option",{value:"ml-IN",children:"Malayalam"}),r.jsx("option",{value:"pa-IN",children:"Punjabi"}),r.jsx("option",{value:"es-ES",children:"Spanish"}),r.jsx("option",{value:"fr-FR",children:"French"}),r.jsx("option",{value:"de-DE",children:"German"}),r.jsx("option",{value:"it-IT",children:"Italian"}),r.jsx("option",{value:"pt-PT",children:"Portuguese"}),r.jsx("option",{value:"ru-RU",children:"Russian"}),r.jsx("option",{value:"ja-JP",children:"Japanese"}),r.jsx("option",{value:"ko-KR",children:"Korean"}),r.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),r.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Gemini API Key"}),r.jsx("input",{type:"password",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:f.gemini_api_key,onChange:q,placeholder:"******************"})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),r.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:f.clinicWideSystemPrompt,onChange:q,placeholder:"Instructions for the AI..."})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),r.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:f.aiMemory,onChange:q,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),T&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:r.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:r.jsx(sG,{onClose:()=>C(!1),settings:f,staffList:n,onSettingsUpdate:R,onStaffUpdate:I,onHighlight:B})})}),r.jsx(p4e,{isOpen:b,onClose:()=>j(!1),onStaffAdded:I,clinicId:f.clinic_id,fetchWithAuth:le}),r.jsx(m4e,{staffId:w,isOpen:!!w,onClose:()=>_(null),onStaffUpdated:I,fetchWithAuth:le})]})},y4e="_container_13uqm_121",x4e="_header_13uqm_141",v4e="_title_13uqm_187",b4e="_controls_13uqm_203",j4e="_dateInputGroup_13uqm_231",w4e="_dateInputLabel_13uqm_255",N4e="_dateInput_13uqm_231",S4e="_section_13uqm_297",_4e="_sectionTitle_13uqm_325",C4e="_statsGrid_13uqm_351",T4e="_statCard_13uqm_365",k4e="_statTitle_13uqm_397",A4e="_statValue_13uqm_415",E4e="_statSubtitle_13uqm_431",P4e="_revenueGrid_13uqm_443",D4e="_revenueCard_13uqm_469",O4e="_revenueCardTitle_13uqm_485",M4e="_revenueCardList_13uqm_505",I4e="_revenueCardListItem_13uqm_517",R4e="_tableContainer_13uqm_557",L4e="_table_13uqm_557",F4e="_textRight_13uqm_639",$4e="_textGreen_13uqm_647",z4e="_textRed_13uqm_655",B4e="_loadingContainer_13uqm_673",q4e="_errorAlert_13uqm_693",U4e="_backButton_13uqm_759",V4e="_chartsGrid_13uqm_797",H4e="_chartCard_13uqm_823",G4e="_chartWrapper_13uqm_873",at={container:y4e,header:x4e,title:v4e,controls:b4e,dateInputGroup:j4e,dateInputLabel:w4e,dateInput:N4e,section:S4e,sectionTitle:_4e,statsGrid:C4e,statCard:T4e,statTitle:k4e,statValue:A4e,statSubtitle:E4e,revenueGrid:P4e,revenueCard:D4e,revenueCardTitle:O4e,revenueCardList:M4e,revenueCardListItem:I4e,tableContainer:R4e,table:L4e,textRight:F4e,textGreen:$4e,textRed:z4e,loadingContainer:B4e,errorAlert:q4e,backButton:U4e,chartsGrid:V4e,chartCard:H4e,chartWrapper:G4e},Kz=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],JA=({active:t,payload:e,label:n})=>t&&e&&e.length?r.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-800",children:n}),e.map((a,i)=>r.jsxs("p",{style:{color:a.color},className:"text-sm",children:[a.name,": ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a.value)]},i))]}):null,W4e=()=>{const t=Lt(),e=Br(),n=new URLSearchParams(e.search),a=n.get("startDate"),i=n.get("endDate"),s=new Date().toISOString().split("T")[0],[o,l]=v.useState(a||s),[c,u]=v.useState(i||s),[f,p]=v.useState(!1),[g,x]=v.useState(null),{setAnalysisDateRange:b,analysisDateRange:j,setAnalysisData:w,registerAnalysisNavigator:_,registerAnalysisRefresher:T}=qN(),[C,A]=v.useState(0),[k,P]=v.useState(0),[I,R]=v.useState(0),[q,U]=v.useState(null),[F,B]=v.useState(null),[V,W]=v.useState(null),[G,z]=v.useState({reception:{},pharmacy:{},lab:{},dental:{}}),[Y,Q]=v.useState(0),[K,$]=v.useState(null),[ie,xe]=v.useState([]),[X,Ie]=v.useState(null),[$e,Be]=v.useState(null),[Le,ce]=v.useState(null),[Se,Ve]=v.useState([]),[Ae,ue]=v.useState(null),[Te,oe]=v.useState(0),be=v.useCallback(async(ge,de)=>{p(!0),x(null);const ae=ge||o,ne=de||c;if(A(0),P(0),R(0),U(null),B(null),W(null),z({reception:{},pharmacy:{},lab:{},dental:{}}),Ie(null),Ie(null),Q(0),$(null),xe([]),Be(null),ce(null),Ve([]),ue(null),oe(0),!ae||!ne){x("Please select both start and end dates."),p(!1);return}try{const se=Ude(),[je,Ee,J,ye,me,he]=await Promise.all([le(`/api/bills?startDate=${o}&endDate=${c}&limit=10000`),le(`/api/payment/admission?startDate=${o}&endDate=${c}`),le(`/api/subscriptions/transactions/manual?startDate=${o}&endDate=${c}`),le(`/api/patient-debts/collections/analysis?startDate=${o}&endDate=${c}`),se?le(`/api/inventory/comprehensive-analysis?startDate=${o}&endDate=${c}&clinicId=${se}`):Promise.resolve(null),le(`/api/distributors/payments/analysis?startDate=${o}&endDate=${c}`)]);if(je.ok&&Ee.ok&&J.ok){const De=await je.json(),nt=await Ee.json(),Fe=await J.json(),Ge=De.bills||[],it=nt.admissionPayments||[],wt=Fe||[];let we={totalRevenue:0,totalCashCollected:0,revenueByType:{consultation:0,pharmacy:0,lab:0,dental:0,other:0},cashByMode:{},revenueByMode:{},detailedRevenue:{reception:{},pharmacy:{},lab:{},dental:{}},dailyRevenue:new Map,pharmacyReturns:0,discountByType:{reception:0,pharmacy:0,lab:0,dental:0,other:0},byUser:{}};const Qe=new Map,Xe=new Set;let ut=0,Ct=0,bt=0,ke=0;const ot=(vt,Dt)=>{const Ht=vt.split("T")[0];we.dailyRevenue.set(Ht,(we.dailyRevenue.get(Ht)||0)+Dt)},Tt=(vt,Dt,Ht,Qn,br=!0)=>{const Ba=Dt.toLowerCase()==="credit";br&&(we.totalRevenue+=vt,we.revenueByType.hasOwnProperty(Ht)?we.revenueByType[Ht]+=vt:we.revenueByType.other=(we.revenueByType.other||0)+vt,ot(Qn,vt),we.revenueByMode[Dt]=(we.revenueByMode[Dt]||0)+vt),Ba||(we.totalCashCollected+=vt,we.cashByMode[Dt]=(we.cashByMode[Dt]||0)+vt),br&&(Ht==="pharmacy"?we.detailedRevenue.pharmacy[Dt]=(we.detailedRevenue.pharmacy[Dt]||0)+vt:Ht==="lab"?we.detailedRevenue.lab[Dt]=(we.detailedRevenue.lab[Dt]||0)+vt:Ht==="dental"?we.detailedRevenue.dental[Dt]=(we.detailedRevenue.dental[Dt]||0)+vt:Ht!=="debt"&&(we.detailedRevenue.reception[Dt]=(we.detailedRevenue.reception[Dt]||0)+vt)),Ht==="debt"&&(we.detailedRevenue.debt=we.detailedRevenue.debt||{},we.detailedRevenue.debt[Dt]=(we.detailedRevenue.debt[Dt]||0)+vt)};if(Ge.forEach(vt=>{var Dt,Ht,Qn,br,Ba,Jr;if(vt.status==="paid"||vt.type==="pharmacy_return"){let wa=parseFloat(vt.amount.toString()),pn=vt.type||"other";if(pn==="pharmacy_return"&&(we.pharmacyReturns+=wa,pn="pharmacy"),vt.split_payments&&Array.isArray(vt.split_payments)&&vt.split_payments.length>0)vt.split_payments.forEach(Rn=>{const et=parseFloat(Rn.amount.toString()),gt=Rn.method||"Unknown",St=gt.toLowerCase()==="credit";we.totalRevenue+=et,we.revenueByType.hasOwnProperty(pn)?we.revenueByType[pn]+=et:we.revenueByType.other=(we.revenueByType.other||0)+et,ot(vt.createdAt,et),we.revenueByMode[gt]=(we.revenueByMode[gt]||0)+et,St||(we.totalCashCollected+=et,we.cashByMode[gt]=(we.cashByMode[gt]||0)+et),pn==="pharmacy"?we.detailedRevenue.pharmacy[gt]=(we.detailedRevenue.pharmacy[gt]||0)+et:pn==="lab"?we.detailedRevenue.lab[gt]=(we.detailedRevenue.lab[gt]||0)+et:pn==="dental"?we.detailedRevenue.dental[gt]=(we.detailedRevenue.dental[gt]||0)+et:we.detailedRevenue.reception[gt]=(we.detailedRevenue.reception[gt]||0)+et});else{const Rn=vt.payment_mode||"Unknown";Tt(wa,Rn,pn,vt.createdAt,!0)}let qr=0;if(vt.items&&Array.isArray(vt.items)&&(qr=vt.items.reduce((Rn,et)=>{const gt=et.discount_percentage||0;if(gt>0&&gt<100){const Ot=(et.total||et.total_price||0)*(gt/(100-gt));return Rn+Ot}return Rn},0)),qr>0){pn==="pharmacy"?we.discountByType.pharmacy+=qr:pn==="lab"?we.discountByType.lab+=qr:pn==="dental"?we.discountByType.dental+=qr:pn==="consultation"||pn==="other"?we.discountByType.reception+=qr:we.discountByType.other+=qr;const Rn=vt.created_by||((Dt=vt.Creator)==null?void 0:Dt.id)||"unknown";if(Rn!=="unknown"){const et=((Ht=vt.Creator)==null?void 0:Ht.name)||"Unknown User",gt=((Qn=vt.Creator)==null?void 0:Qn.role)||"unknown";we.byUser[Rn]||(we.byUser[Rn]={id:Rn,name:et,role:gt,revenue:0,cashFlow:0,discount:0}),we.byUser[Rn].discount+=qr}}const Tn=vt.created_by||((br=vt.Creator)==null?void 0:br.id)||"unknown";if(Tn!=="unknown"){const Rn=((Ba=vt.Creator)==null?void 0:Ba.name)||"Unknown User",et=((Jr=vt.Creator)==null?void 0:Jr.role)||"unknown";if(we.byUser[Tn]||(we.byUser[Tn]={id:Tn,name:Rn,role:et,revenue:0,cashFlow:0,discount:0}),we.byUser[Tn].revenue+=wa,!(vt.payment_mode==="credit"||vt.payment_mode==="no_cash_insurance")){let St=0;vt.split_payments&&vt.split_payments.length>0?vt.split_payments.forEach(Ot=>{Ot.method!=="credit"&&Ot.method!=="no_cash_insurance"&&(St+=parseFloat(Ot.amount.toString()))}):St=wa,we.byUser[Tn].cashFlow+=St}}if(vt.Patient){const Rn=vt.Patient.id,et=new Date(vt.Patient.createdAt||"2000-01-01")>=new Date(ae);et?bt+=wa:ke+=wa,Xe.has(Rn)||(Xe.add(Rn),et?ut++:Ct++)}vt.items&&Array.isArray(vt.items)&&vt.items.forEach(Rn=>{if(Rn.name){const et=Qe.get(Rn.name)||{count:0,revenue:0},gt=parseFloat((Rn.quantity||0).toString()),St=parseFloat((Rn.total||Rn.total_price||0).toString());Qe.set(Rn.name,{count:et.count+gt,revenue:et.revenue+St})}})}}),it.forEach(vt=>{Tt(parseFloat(vt.amount_paid.toString()),vt.payment_mode||"Unknown","consultation",vt.payment_date,!0)}),wt.forEach(vt=>{var Qn,br;const Dt=parseFloat(((br=(Qn=vt.subscriptionPlan)==null?void 0:Qn.price)==null?void 0:br.toString())??"0"),Ht=vt.subscription_payment_method||"manual";Tt(Dt,Ht,"consultation",vt.subscription_start_date,!0)}),ye.ok){const Dt=(await ye.json()).paymentModeBreakdown||{};Object.entries(Dt).forEach(([Ht,Qn])=>{const br=Number(Qn);Tt(br,Ht,"debt","",!1)})}P(we.totalCashCollected),A(we.totalRevenue),R(we.pharmacyReturns),U(we.cashByMode),B(we.revenueByMode),W(we.revenueByType),z(we.detailedRevenue),Be(we.discountByType);const Ue=Object.values(we.byUser).sort((vt,Dt)=>Dt.revenue-vt.revenue);ce(Ue),ue({newPatients:ut,returningPatients:Ct,newPatientRevenue:bt,returningPatientRevenue:ke});const jt=Array.from(Qe.entries()).map(([vt,Dt])=>({name:vt,...Dt})).sort((vt,Dt)=>Dt.count-vt.count).slice(0,10);Ve(jt);const kt=Ge.length>0?we.totalRevenue/Ge.length:0;if(oe(kt),he&&he.ok){const vt=await he.json();Q(vt.totalPaid||0),$(vt.paymentModeBreakdown||{})}const Kn=Array.from(we.dailyRevenue.entries()).sort((vt,Dt)=>new Date(vt[0]).getTime()-new Date(Dt[0]).getTime()).map(([vt,Dt])=>({date:vt,amount:Dt}));xe(Kn)}if(me&&me.ok){const De=await me.json();Ie(De)}}catch(se){console.error("Analysis Fetch Error:",se),x("Failed to fetch analysis data. Please try again.")}finally{p(!1)}},[o,c]);v.useEffect(()=>{_(ge=>{const de=`analysis-${ge}`,ae=document.getElementById(de);ae&&(ae.scrollIntoView({behavior:"smooth",block:"center"}),ae.classList.add("ai-highlight-glow"),setTimeout(()=>ae.classList.remove("ai-highlight-glow"),2e3))})},[_]),v.useEffect(()=>{T(async()=>(await be(),null))},[T,be]),v.useEffect(()=>{if(j.startDate&&j.endDate){const ge=j.startDate.toISOString().split("T")[0],de=j.endDate.toISOString().split("T")[0];(ge!==o||de!==c)&&(l(ge),u(de))}},[j]),v.useEffect(()=>{const ge=new URLSearchParams(e.search),de=ge.get("section"),ae=ge.get("startDate"),ne=ge.get("endDate");if(ae&&ne){l(ae),u(ne);const se=j.startDate?j.startDate.toISOString().split("T")[0]:null,je=j.endDate?j.endDate.toISOString().split("T")[0]:null;(se!==ae||je!==ne)&&b({startDate:new Date(ae),endDate:new Date(ne)})}if(de){const se=`analysis-${de}`;setTimeout(()=>{const je=document.getElementById(se);je&&(je.scrollIntoView({behavior:"smooth",block:"center"}),je.classList.add("ai-highlight-glow"),setTimeout(()=>je.classList.remove("ai-highlight-glow"),2e3))},500)}},[e.search]),v.useEffect(()=>{be()},[o,c,be]),v.useEffect(()=>{!f&&(k>0||X)&&w({totalRevenue:C,totalCashFlow:k,totalExpenses:Y,netCashFlow:k-Y,collectionsBreakdown:q,revenueBreakdown:F,inventoryValue:0,pharmacyRevenue:(V==null?void 0:V.pharmacy)||0,labRevenue:(V==null?void 0:V.lab)||0,dentalRevenue:(V==null?void 0:V.dental)||0,receptionRevenue:((V==null?void 0:V.consultation)||0)+((V==null?void 0:V.other)||0),inventorySummary:X?{totalItemsAnalyzed:X.pharmacyAnalysis.length,netPositiveItems:X.pharmacyAnalysis.filter(ge=>ge.net_change>0).length}:null})},[C,k,Y,q,F,X,V,f,w]);const _e=ge=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(ge),Ne=v.useMemo(()=>F?Object.entries(F).map(([ge,de])=>({name:ge,value:de})):[],[F]),ee=v.useMemo(()=>V?[{name:"Consultation",value:V.consultation},{name:"Pharmacy",value:V.pharmacy},{name:"Lab",value:V.lab},{name:"Dental",value:V.dental},{name:"Debt Collections",value:V.debt||0},{name:"Other",value:V.other||0}].filter(ge=>ge.value>0):[],[V]);return r.jsxs("div",{className:at.container,children:[r.jsxs("div",{className:at.header,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:at.backButton,title:"Go Back",children:[r.jsx(sn,{size:20})," Back"]}),r.jsx("h1",{className:at.title,children:"Analysis Dashboard"})]}),r.jsxs("div",{className:at.controls,children:[r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"From:"}),r.jsx("input",{type:"date",className:at.dateInput,value:o,onChange:ge=>{l(ge.target.value),c&&b({startDate:new Date(ge.target.value),endDate:new Date(c)})}})]}),r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"To:"}),r.jsx("input",{type:"date",className:at.dateInput,value:c,onChange:ge=>{u(ge.target.value),o&&b({startDate:new Date(o),endDate:new Date(ge.target.value)})}})]})]})]}),g&&r.jsxs("div",{className:at.errorAlert,children:[r.jsx(Fr,{size:20}),r.jsx("span",{children:g})]}),!f&&r.jsxs("div",{children:[r.jsxs("section",{className:at.section,id:"analysis-expenses",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(vw,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Cash Flow Analysis"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Cash Inflow"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-success)"},children:_e(k)}),r.jsx("div",{className:at.statSubtitle,children:"Collections (Cash, UPI, etc.)"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Expenses"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-danger)"},children:_e(Y)}),r.jsx("div",{className:at.statSubtitle,children:"Distributor Payments"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Net Cash Flow"}),r.jsx("div",{className:at.statValue,style:{color:k-Y>=0?"var(--accent-success)":"var(--accent-danger)"},children:_e(k-Y)}),r.jsx("div",{className:at.statSubtitle,children:"Inflow - Outflow"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Avg. Bill Value"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:_e(Te)}),r.jsx("div",{className:at.statSubtitle,children:"Per Visit Average"})]})]}),r.jsxs("div",{className:at.revenueGrid,style:{marginTop:"1rem"},children:[q&&Object.keys(q).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Collections Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(q).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]}),K&&Object.keys(K).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Expense Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(K).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]})]})]}),r.jsxs("section",{className:at.section,id:"analysis-financial",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(ud,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Financial Performance"})]}),r.jsx("div",{className:at.statsGrid,children:r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Revenue Generated"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:_e(C)}),r.jsx("div",{className:at.statSubtitle,children:"Billings & Services (Accrual)"})]})}),r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{children:"Revenue Trend (Daily)"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(lw,{width:"100%",height:300,children:r.jsxs(KPe,{data:ie,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"var(--accent-primary)",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"var(--accent-primary)",stopOpacity:.05})]})}),r.jsx(xb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(qc,{dataKey:"date",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Uc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:ge=>`${ge/1e3}k`}),r.jsx(Ii,{content:r.jsx(JA,{})}),r.jsx(Ad,{type:"monotone",dataKey:"amount",stroke:"var(--accent-primary)",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Payment Method Distribution"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(lw,{width:"100%",height:300,children:r.jsxs(tG,{children:[r.jsx(Vl,{data:Ne,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:Ne.map((ge,de)=>r.jsx(qb,{fill:Kz[de%Kz.length]},`cell-${de}`))}),r.jsx(Ii,{content:r.jsx(JA,{})}),r.jsx(Dc,{verticalAlign:"bottom",height:36,formatter:ge=>r.jsx("span",{style:{color:"var(--text-primary)"},children:ge})})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Revenue by Source"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(lw,{width:"100%",height:300,children:r.jsxs(eG,{data:ee,children:[r.jsx(xb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(qc,{dataKey:"name",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Uc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:ge=>`${ge/1e3}k`}),r.jsx(Ii,{content:r.jsx(JA,{}),cursor:{fill:"var(--bg-primary)"}}),r.jsx(kd,{dataKey:"value",fill:"var(--accent-success)",radius:[4,4,0,0]})]})})})]})]}),G&&r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(SE,{style:{color:"var(--text-secondary)"},size:20}),r.jsx("h3",{children:"Detailed Breakdown"})]}),G&&r.jsxs("div",{className:at.revenueGrid,children:[r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:_e(((V==null?void 0:V.consultation)||0)+((V==null?void 0:V.other)||0))}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(G.reception).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:_e((V==null?void 0:V.pharmacy)||0)}),I<0&&r.jsxs("div",{className:`${at.textRed} text-sm mb-2`,children:["Returns: ",_e(I)]}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(G.pharmacy).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:_e((V==null?void 0:V.lab)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(G.lab).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:_e((V==null?void 0:V.dental)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(G.dental).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]})]}),$e&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(EJ,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Revenue Lost Due to Discount"})]}),$e.reception>0||$e.pharmacy>0||$e.lab>0||$e.dental>0||$e.other>0?r.jsxs("div",{className:at.revenueGrid,children:[$e.reception>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.reception)})]}),$e.pharmacy>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.pharmacy)})]}),$e.lab>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.lab)})]}),$e.dental>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.dental)})]}),$e.other>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Others"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.other)})]}),r.jsxs("div",{className:at.revenueCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Total Revenue Lost"}),r.jsx("div",{className:at.statValue,style:{fontSize:"2rem",color:"var(--accent-danger)",marginBottom:"0"},children:_e($e.reception+$e.pharmacy+$e.lab+$e.dental+$e.other)})]})]}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No discounts applied in this period."})]}),Le&&Le.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(zi,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"User Performance Breakdown"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"User"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Revenue"}),r.jsx("th",{children:"Cash Collected"}),r.jsx("th",{children:"Discount Given"})]})}),r.jsx("tbody",{children:Le.map(ge=>r.jsxs("tr",{children:[r.jsx("td",{children:ge.name}),r.jsx("td",{style:{textTransform:"capitalize"},children:ge.role}),r.jsx("td",{style:{color:"var(--accent-success)"},children:_e(ge.revenue)}),r.jsx("td",{children:_e(ge.cashFlow)}),r.jsx("td",{style:{color:"var(--accent-warning)"},children:_e(ge.discount)})]},ge.id))})]})})]}),Ae&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(zi,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"Patient Analytics"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"New Patients"}),r.jsx("div",{className:at.statValue,children:Ae.newPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-success)"},children:[_e(Ae.newPatientRevenue)," Rev"]})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Returning"}),r.jsx("div",{className:at.statValue,children:Ae.returningPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-primary)"},children:[_e(Ae.returningPatientRevenue)," Rev"]})]})]})]}),Se.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(dd,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Top Performing Items"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Quantity Sold"}),r.jsx("th",{children:"Revenue Generated"})]})}),r.jsx("tbody",{children:Se.map((ge,de)=>r.jsxs("tr",{children:[r.jsx("td",{children:ge.name}),r.jsx("td",{children:ge.count}),r.jsx("td",{style:{color:"var(--accent-success)"},children:_e(ge.revenue)})]},de))})]})})]})]}),r.jsxs("section",{className:at.section,id:"analysis-inventory",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(dd,{style:{color:"var(--accent-success)"},size:24}),r.jsx("h2",{children:"Inventory Movement"})]}),X&&X.pharmacyAnalysis.length>0?r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Stock In"}),r.jsx("th",{children:"Stock Out"}),r.jsx("th",{children:"Net Change"}),r.jsx("th",{className:at.textRight,children:"Est. Revenue"}),r.jsx("th",{className:at.textRight,children:"Est. Profit"})]})}),r.jsx("tbody",{children:X.pharmacyAnalysis.map(ge=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600},children:ge.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:ge.supplier})]}),r.jsxs("td",{className:at.textGreen,children:["+",ge.quantity_in,Object.entries(ge.quantity_in_by_reason).map(([de,ae])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[de,": ",ae]},de))]}),r.jsxs("td",{className:at.textRed,children:["-",ge.quantity_out,Object.entries(ge.quantity_out_by_reason).map(([de,ae])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[de,": ",ae]},de))]}),r.jsx("td",{children:r.jsxs("span",{style:{fontWeight:600},className:ge.net_change>=0?at.textGreen:at.textRed,children:[ge.net_change>0?"+":"",ge.net_change]})}),r.jsx("td",{className:at.textRight,children:_e(ge.revenue)}),r.jsx("td",{className:`${at.textRight} ${ge.profit>=0?at.textGreen:at.textRed}`,children:_e(ge.profit)})]},ge.drug_id))})]})}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No inventory movement recorded for this period."})]})]}),f&&r.jsxs("div",{className:at.loadingContainer,style:{display:"block"},children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:200,height:24})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"80%",height:32}),r.jsx(te,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"80%",height:32}),r.jsx(te,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"80%",height:32}),r.jsx(te,{width:"40%",height:16})]})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx(te,{width:180,height:24,className:"mb-4"}),r.jsx(te,{width:"100%",height:250})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(te,{width:180,height:24,className:"mb-4"}),r.jsx(te,{width:"100%",height:200,variant:"circular",style:{margin:"0 auto"}})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(te,{width:180,height:24,className:"mb-4"}),r.jsx(te,{width:"100%",height:250})]})]})})]})]})},Y4e=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[,s]=v.useState(null),[o,l]=v.useState(!1),[c,u]=v.useState(null),[f,p]=v.useState({name:"",description:"",columns:[]}),g=async()=>{i(!0);try{const C=await le("/api/custom-tables");if(!C.ok)throw new Error("Failed to fetch tables");const A=await C.json();n(A)}catch(C){s(C.message)}finally{i(!1)}};v.useEffect(()=>{g()},[]);const x=C=>{C?(u(C),p({name:C.name,description:C.description,columns:[...C.columns]})):(u(null),p({name:"",description:"",columns:[]})),l(!0)},b=async()=>{try{const C=c?`/api/custom-tables/${c.id}`:"/api/custom-tables";if(!(await le(C,{method:c?"PUT":"POST",body:JSON.stringify(f)})).ok)throw new Error("Failed to save table");l(!1),g()}catch(C){alert(C.message)}},j=async C=>{if(confirm("Are you sure? This will delete all data in this table!"))try{await le(`/api/custom-tables/${C}`,{method:"DELETE"}),g()}catch(A){alert(A.message)}},w=()=>{p(C=>({...C,columns:[...C.columns,{key:`col_${Date.now()}`,label:"New Column",type:"text"}]}))},_=(C,A,k)=>{const P=[...f.columns];P[C]={...P[C],[A]:k},A==="label"&&(P[C].key=k.toLowerCase().replace(/[^a-z0-9]/g,"_")),p(I=>({...I,columns:P}))},T=C=>{p(A=>({...A,columns:A.columns.filter((k,P)=>P!==C)}))};return r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("h1",{children:[r.jsx(Ob,{size:24})," Custom Tables Manager"]}),r.jsxs("button",{className:"primary-button",onClick:()=>x(),children:[r.jsx(Vn,{size:16})," Create New Table"]})]}),a?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"tables-grid",children:e.map(C=>r.jsxs("div",{className:"table-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:C.name}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>x(C),children:r.jsx(qi,{size:16})}),r.jsx("button",{onClick:()=>j(C.id),className:"danger",children:r.jsx(Wn,{size:16})})]})]}),r.jsx("p",{className:"description",children:C.description||"No description"}),r.jsxs("div",{className:"column-preview",children:[C.columns.length," columns defined"]}),r.jsx("button",{className:"secondary-button",onClick:()=>t(`/custom-tables/${C.id}`),children:"View Data & Records"})]},C.id))}),o&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:c?"Edit Table":"Create New Table"}),r.jsx("button",{onClick:()=>l(!1),children:r.jsx(Rt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Table Name"}),r.jsx("input",{value:f.name,onChange:C=>p({...f,name:C.target.value}),placeholder:"e.g., Equipment Log"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value})})]}),r.jsxs("div",{className:"columns-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h3",{children:"Columns"}),r.jsx("button",{onClick:w,className:"icon-button",children:r.jsx(Vn,{size:16})})]}),f.columns.map((C,A)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{value:C.label,onChange:k=>_(A,"label",k.target.value),placeholder:"Column Name"}),r.jsxs("select",{value:C.type,onChange:k=>_(A,"type",k.target.value),children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>T(A),className:"danger",children:r.jsx(Wn,{size:14})})]},A))]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:b,className:"primary-button",children:"Save Table"})})]})})]})},K4e=()=>{const{id:t}=$a(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,u]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState(!1),[b,j]=v.useState(null),[w,_]=v.useState({});v.useEffect(()=>{t&&T()},[t]);const T=async()=>{l(!0);try{const I=await le(`/api/custom-tables/${t}`);if(!I.ok)throw new Error("Failed to fetch table definition");const R=await I.json();a(R);const q=await le(`/api/custom-tables/${t}/records`);if(!q.ok)throw new Error("Failed to fetch records");const U=await q.json();s(U)}catch(I){u(I.message)}finally{l(!1)}},C=I=>{I?(j(I),_({...I.data})):(j(null),_({})),x(!0)},A=async()=>{try{const I=b?`/api/custom-tables/records/${b.id}`:`/api/custom-tables/${t}/records`;if(!(await le(I,{method:b?"PUT":"POST",body:JSON.stringify({data:w})})).ok)throw new Error("Failed to save record");x(!1),T()}catch(I){alert(I.message)}},k=async I=>{if(confirm("Delete this record?"))try{await le(`/api/custom-tables/records/${I}`,{method:"DELETE"}),T()}catch(R){alert(R.message)}},P=I=>{const R=w[I.key]||"";switch(I.type){case"boolean":return r.jsxs("select",{value:R,onChange:q=>_({...w,[I.key]:q.target.value}),children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"true",children:"Yes"}),r.jsx("option",{value:"false",children:"No"})]});case"number":return r.jsx("input",{type:"number",value:R,onChange:q=>_({...w,[I.key]:q.target.value})});case"date":return r.jsx("input",{type:"date",value:R,onChange:q=>_({...w,[I.key]:q.target.value})});default:return r.jsx("input",{type:"text",value:R,onChange:q=>_({...w,[I.key]:q.target.value})})}};return o?r.jsx("div",{className:"p-4",children:"Loading..."}):c||!n?r.jsxs("div",{className:"p-4 error",children:["Error: ",c||"Table not found"]}):r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[r.jsx("button",{onClick:()=>e("/custom-tables"),className:"icon-button",children:r.jsx(sn,{size:20})}),r.jsx("h1",{children:n.name})]}),r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>p(!1),className:`view-mode-btn ${f?"":"active"}`,title:"List View",children:[r.jsx(Pb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>p(!0),className:`view-mode-btn ${f?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(wf,{size:18})," Excel"]})]}),r.jsxs("button",{className:"primary-button",onClick:()=>C(),children:[r.jsx(Vn,{size:16})," Add Record"]})]}),r.jsx("div",{className:"table-wrapper",style:{background:"var(--bg-card)",borderRadius:"12px",padding:"20px",overflowX:"auto"},children:f?r.jsx(zb,{columns:n.columns.map(I=>({key:I.key,label:I.label,editable:!0,type:I.type})),data:i.map(I=>({...I.data,id:I.id})),editable:!0,showRowNumbers:!0,title:n.name,onSave:async I=>{const R=I.map(async q=>{const U=i.find(F=>F.id===q.id);if(U&&JSON.stringify(U.data)!==JSON.stringify(q)){const{id:F,...B}=q;if(JSON.stringify(U.data)!==JSON.stringify(B))return le(`/api/custom-tables/records/${q.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:B})})}});try{await Promise.all(R),T()}catch(q){alert("Error saving changes"),console.error(q)}}}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[n.columns.map(I=>r.jsx("th",{style:{textAlign:"left",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:I.label},I.key)),r.jsx("th",{style:{width:"100px",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:n.columns.length+1,style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"No records yet"})}):i.map(I=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.columns.map(R=>r.jsx("td",{style:{padding:"12px"},children:R.type==="boolean"?I.data[R.key]==="true"?"Yes":"No":String(I.data[R.key]||"-")},R.key)),r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>C(I),className:"icon-button",children:r.jsx(qi,{size:16})}),r.jsx("button",{onClick:()=>k(I.id),className:"icon-button",style:{color:"#dc3545"},children:r.jsx(Wn,{size:16})})]})})]},I.id))})]})}),g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:b?"Edit Record":"Add New Record"}),r.jsx("button",{onClick:()=>x(!1),children:r.jsx(Rt,{size:20})})]}),r.jsx("div",{className:"modal-body",children:n.columns.map(I=>r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:I.label}),P(I)]},I.key))}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:A,className:"primary-button",children:"Save Record"})})]})})]})},Q4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(""),o=Lt();v.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await le("/api/dashboards");if(p.ok){const g=await p.json();e(g)}}catch(p){console.error("Error fetching dashboards:",p)}finally{a(!1)}},c=async(p,g)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await le(`/api/dashboards/${g}`,{method:"DELETE"}),e(t.filter(x=>x.id!==g))}catch(x){console.error("Error deleting dashboard:",x)}},u=p=>{try{const g=new Date(p);return g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:g.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},f=t.filter(p=>p.name.toLowerCase().includes(i.toLowerCase())||p.description&&p.description.toLowerCase().includes(i.toLowerCase()));return r.jsxs("div",{className:"custom-dashboards-container",children:[r.jsxs("div",{className:"cdp-header",children:[r.jsxs("div",{className:"cdp-title-row",children:[r.jsxs("div",{className:"cdp-title",children:[r.jsx("div",{className:"cdp-icon",children:r.jsx(wf,{size:20})}),r.jsxs("div",{children:[r.jsx("h1",{children:"Custom Dashboards"}),r.jsxs("span",{className:"cdp-subtitle",children:[t.length," dashboard",t.length!==1?"s":""]})]})]}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Vn,{size:16}),r.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),t.length>0&&r.jsxs("div",{className:"cdp-search",children:[r.jsx(En,{size:16}),r.jsx("input",{type:"text",placeholder:"Search dashboards...",value:i,onChange:p=>s(p.target.value)})]})]}),r.jsx("div",{className:"cdp-content",children:n?r.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(p=>r.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx(te,{width:18,height:18,variant:"circular"}),r.jsx(te,{width:80,height:12})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx(te,{width:"70%",height:24,style:{marginBottom:"8px"}}),r.jsx(te,{width:"90%",height:16})]}),r.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[r.jsx(te,{width:60,height:32}),r.jsx(te,{width:60,height:32}),r.jsx(te,{width:32,height:32})]})]},p))}):f.length===0?r.jsxs("div",{className:"cdp-empty",children:[r.jsx("div",{className:"cdp-empty-icon",children:r.jsx(rg,{size:48})}),i?r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No results found"}),r.jsx("p",{children:"Try a different search term"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No dashboards yet"}),r.jsx("p",{children:"Create your first custom dashboard to get started"}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Vn,{size:16})," Create Dashboard"]})]})]}):r.jsx("div",{className:"cdp-grid",children:f.map(p=>r.jsxs("div",{className:"cdp-card",onClick:()=>o(`/dashboards/${p.id}`),children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx("div",{className:"cdp-card-icon",children:r.jsx(rg,{size:18})}),r.jsx("div",{className:"cdp-card-meta",children:p.created_at&&r.jsxs("span",{className:"cdp-card-date",children:[r.jsx(ia,{size:12}),u(p.created_at)]})})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx("h3",{children:p.name}),r.jsx("p",{children:p.description||"No description"})]}),r.jsxs("div",{className:"cdp-card-footer",children:[r.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}`)},children:[r.jsx(Fm,{size:14}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}/edit`)},children:[r.jsx(qi,{size:14}),r.jsx("span",{children:"Edit"})]}),r.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:g=>c(g,p.id),children:r.jsx(Wn,{size:14})})]})]},p.id))})})]})},X4e=({isOpen:t,onClose:e,onConfirm:n})=>{const[a,i]=v.useState({}),[s,o]=v.useState(""),[l,c]=v.useState(""),[u,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(!1);v.useEffect(()=>{t&&j()},[t]);const j=async()=>{b(!0);try{const I=await le("/api/dashboards/table-relations");if(I.ok){const R=await I.json();i(R);const q=Object.keys(R);q.length>0&&o(q[0])}}catch(I){console.error("Error fetching table relations:",I)}finally{b(!1)}},w=I=>{o(I),c(""),f([]),g([])},_=I=>{c(I),g([])},T=(I,R,q)=>{I.includes(q)?R(I.filter(U=>U!==q)):R([...I,q])},C=()=>{var I,R;if(!s||!l){alert("Please select both primary and related tables");return}if(u.length===0&&p.length===0){alert("Please select at least one column");return}n({primary:s,related:l,primaryColumns:u,relatedColumns:p,primaryLabel:((I=a[s])==null?void 0:I.label)||s,relatedLabel:((R=a[l])==null?void 0:R.label)||l}),e()};if(!t)return null;const A=a[s],k=(A==null?void 0:A.relations)||{},P=a[l];return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content join-builder-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsxs("h3",{children:[r.jsx(rq,{size:18,style:{marginRight:"6px"}})," Join Tables Builder"]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Rt,{size:18})})]}),r.jsx("div",{className:"join-builder-body",children:x?r.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"var(--text-secondary, #64748b)"},children:"Loading tables..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"join-step-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 1:"})," Select Primary Table"]}),r.jsx("select",{value:s,onChange:I=>w(I.target.value),className:"join-select",children:Object.entries(a).filter(([I,R])=>Object.keys(R.relations).length>0).map(([I,R])=>r.jsx("option",{value:I,children:R.label},I))})]}),s&&Object.keys(k).length>0&&r.jsxs("div",{className:"join-step-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 2:"})," Select Related Table"]}),r.jsxs("select",{value:l,onChange:I=>_(I.target.value),className:"join-select",children:[r.jsx("option",{value:"",children:"-- Select --"}),Object.entries(k).map(([I,R])=>r.jsxs("option",{value:I,children:[R.label," (via ",R.foreignKey,")"]},I))]})]}),s&&A&&r.jsxs("div",{className:"join-step-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",A.label,":"]})}),r.jsx("div",{className:"columns-chip-container",children:A.columns.map(I=>r.jsxs("label",{className:`column-chip-label ${u.includes(I)?"primary-selected":"unselected"}`,children:[r.jsx("input",{type:"checkbox",checked:u.includes(I),onChange:()=>T(u,f,I),style:{display:"none"}}),I]},I))})]}),l&&P&&r.jsxs("div",{className:"join-step-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",P.label,":"]})}),r.jsx("div",{className:"columns-chip-container",children:P.columns.map(I=>r.jsxs("label",{className:`column-chip-label ${p.includes(I)?"related-selected":"unselected"}`,children:[r.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>T(p,g,I),style:{display:"none"}}),I]},I))})]}),(u.length>0||p.length>0)&&r.jsxs("div",{className:"join-preview-box",children:[r.jsx("span",{className:"join-preview-title",children:"Preview Columns:"}),r.jsxs("div",{className:"join-preview-content",children:[u.map(I=>r.jsxs("span",{className:"join-preview-primary",children:[A==null?void 0:A.label,".",I]},I)),p.map(I=>r.jsxs("span",{className:"join-preview-related",children:[P==null?void 0:P.label,".",I]},I))]})]})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"join-btn join-btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{className:"join-btn join-btn-primary",onClick:C,disabled:!l||x,children:"Create Joined Widget"})]})]})})},J4e=({isOpen:t,onClose:e,onCreated:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([{key:"name",label:"Name",type:"text"}]),[u,f]=v.useState(!1),p=()=>{c([...l,{key:"",label:"",type:"text"}])},g=j=>{c(l.filter((w,_)=>_!==j))},x=(j,w,_)=>{const T=[...l];T[j]={...T[j],[w]:_},w==="label"&&!T[j].key&&(T[j].key=_.toLowerCase().replace(/\s+/g,"_")),c(T)},b=async()=>{if(!a.trim()){alert("Table name is required");return}if(l.length===0||l.some(j=>!j.key||!j.label)){alert("All columns must have a key and label");return}f(!0);try{(await le("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,description:s,columns:l})})).ok?(n(),e(),i(""),o(""),c([{key:"name",label:"Name",type:"text"}])):alert("Failed to create table")}catch(j){console.error("Error creating table:",j),alert("Error creating table")}finally{f(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content create-table-modal-content",children:[r.jsxs("div",{className:"create-table-header",children:[r.jsxs("h3",{children:[r.jsx(Ob,{size:20})," Create Custom Table"]}),r.jsx("button",{onClick:e,className:"close-btn",children:r.jsx(Rt,{size:20})})]}),r.jsxs("div",{className:"form-content",children:[r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Table Name *"}),r.jsx("input",{type:"text",value:a,onChange:j=>i(j.target.value),placeholder:"e.g., Patient Notes, Appointments",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),placeholder:"Optional description",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Columns"}),r.jsx("div",{className:"columns-container",children:l.map((j,w)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{type:"text",value:j.label,onChange:_=>x(w,"label",_.target.value),placeholder:"Column label",className:"modal-input column-label-input"}),r.jsx("input",{type:"text",value:j.key,onChange:_=>x(w,"key",_.target.value),placeholder:"key",className:"modal-input column-key-input"}),r.jsxs("select",{value:j.type,onChange:_=>x(w,"type",_.target.value),className:"column-type-select",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>g(w),className:"remove-col-btn",disabled:l.length<=1,children:r.jsx(Wn,{size:16})})]},w))}),r.jsxs("button",{onClick:p,className:"add-col-btn",children:[r.jsx(Vn,{size:14})," Add Column"]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:b,disabled:u,className:"create-button",children:u?"Creating...":"Create Table"})]})]})}):null},Qz=()=>{const{id:t}=$a(),e=Lt(),n=!!t,[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([]),[u,f]=v.useState(!1),[p,g]=v.useState([]),[x,b]=v.useState(!1),[j,w]=v.useState("stat"),[_,T]=v.useState(""),[C,A]=v.useState("api:patients"),[k,P]=v.useState([]),[I,R]=v.useState(!1),[q,U]=v.useState(!1);v.useEffect(()=>{F(),n&&B()},[t]);const F=async()=>{try{const K=await le("/api/dashboards/data-sources");if(K.ok){const $=await K.json();g($),$.length>0&&A($[0].key)}}catch(K){console.error("Error fetching data sources:",K)}},B=async()=>{try{const K=await le(`/api/dashboards/${t}`);if(K.ok){const $=await K.json();i($.name),o($.description),c($.widgets||[])}}catch(K){console.error("Error fetching dashboard:",K)}},V=async()=>{if(!a.trim())return alert("Name is required");f(!0);try{const K={name:a,description:s,widgets:l},$=n?`/api/dashboards/${t}`:"/api/dashboards";(await le($,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})).ok?e("/dashboards"):alert("Failed to save dashboard")}catch(K){console.error("Error saving dashboard:",K)}finally{f(!1)}},W=()=>{var ie;const K=p.find(xe=>xe.key===C),$={id:Date.now().toString(),type:j,title:_||(K==null?void 0:K.label)||"New Widget",dataSource:C,config:{columns:k.length>0?k:((ie=K==null?void 0:K.columns)==null?void 0:ie.slice(0,3))||[]}};c([...l,$]),b(!1),T(""),P([])},G=K=>{c(l.filter($=>$.id!==K))},z=K=>{A(K),P([])},Y=p.find(K=>K.key===C),Q=K=>{const $={id:Date.now().toString(),type:"table",title:`${K.primaryLabel} + ${K.relatedLabel}`,dataSource:`dynamic:${K.primary}:${K.related}`,config:{primaryColumns:K.primaryColumns,relatedColumns:K.relatedColumns}};c([...l,$])};return r.jsxs("div",{className:"dashboard-builder-container",children:[r.jsxs("div",{className:"builder-header",children:[r.jsxs("button",{className:"back-btn",onClick:()=>e("/dashboards"),children:[r.jsx(sn,{size:16})," Back"]}),r.jsxs("div",{className:"title-inputs",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:a,onChange:K=>i(K.target.value),className:"dashboard-name-input"}),r.jsx("input",{type:"text",placeholder:"Description (Optional)",value:s,onChange:K=>o(K.target.value),className:"dashboard-desc-input"})]}),r.jsxs("button",{className:"primary-button",onClick:V,disabled:u,children:[r.jsx(Bi,{size:16})," ",u?"Saving...":"Save Dashboard"]})]}),r.jsx("div",{className:"widgets-area",children:l.length===0?r.jsxs("div",{className:"empty-canvas",children:[r.jsx("p",{children:"Canvas is empty. Add a widget to start."}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"},children:[r.jsxs("button",{onClick:()=>b(!0),className:"add-widget-btn",children:[r.jsx(Vn,{size:16})," Add Widget"]}),r.jsxs("button",{onClick:()=>R(!0),className:"add-widget-btn",style:{background:"#2196F3"},children:[r.jsx(rq,{size:16})," Create Joined Widget"]}),r.jsxs("button",{onClick:()=>U(!0),className:"add-widget-btn",style:{background:"#4CAF50"},children:[r.jsx(Ob,{size:16})," Create Custom Table"]})]})]}):r.jsxs("div",{className:"widgets-grid",children:[l.map(K=>r.jsxs("div",{className:"widget-wrapper",children:[r.jsx("div",{className:"widget-actions-overlay",children:r.jsx("button",{onClick:()=>G(K.id),className:"remove-widget-btn",children:r.jsx(Wn,{size:14})})}),r.jsx(LM,{widget:K})]},K.id)),r.jsxs("div",{className:"add-more-card",onClick:()=>b(!0),children:[r.jsx(Vn,{size:24}),r.jsx("span",{children:"Add Widget"})]})]})}),x&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h3",{children:"Add Widget"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title (Optional)"}),r.jsx("input",{type:"text",placeholder:"Leave blank for auto-title",value:_,onChange:K=>T(K.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type"}),r.jsxs("select",{value:j,onChange:K=>w(K.target.value),children:[r.jsx("option",{value:"stat",children:"Statistic (Count)"}),r.jsx("option",{value:"table",children:"Table (List)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Data Source"}),r.jsxs("select",{value:C,onChange:K=>z(K.target.value),children:[r.jsx("optgroup",{label:"Single Tables",children:p.filter(K=>!K.isCustom&&!K.isJoin).map(K=>r.jsx("option",{value:K.key,children:K.label},K.key))}),p.some(K=>K.isJoin)&&r.jsx("optgroup",{label:"Joined Tables (Multi-Table)",children:p.filter(K=>K.isJoin).map(K=>r.jsx("option",{value:K.key,children:K.label},K.key))}),p.some(K=>K.isCustom)&&r.jsx("optgroup",{label:"Custom Tables",children:p.filter(K=>K.isCustom).map(K=>r.jsx("option",{value:K.key,children:K.label},K.key))})]}),Y&&r.jsx("small",{style:{color:"#666"},children:Y.description})]}),j==="table"&&(Y==null?void 0:Y.columns)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Columns to Display (select multiple)"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Y.columns.map(K=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:k.includes(K),onChange:$=>{$.target.checked?P([...k,K]):P(k.filter(ie=>ie!==K))}}),K]},K))})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>b(!1),children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:W,children:"Add"})]})]})}),r.jsx(X4e,{isOpen:I,onClose:()=>R(!1),onConfirm:Q}),r.jsx(J4e,{isOpen:q,onClose:()=>U(!1),onCreated:()=>F()})]})},Z4e=()=>{const{id:t}=$a(),e=Lt(),[n,a]=v.useState(null);if(v.useEffect(()=>{(async()=>{try{const o=await le(`/api/dashboards/${t}`);if(o.ok){const l=await o.json();a(l)}}catch(o){console.error("Error fetching dashboard:",o)}})()},[t]),!n)return r.jsx("div",{className:"temp-dash-empty",children:"Loading..."});const i=n.widgets||[];return r.jsxs("div",{className:"saved-dash-container",children:[r.jsxs("div",{className:"saved-dash-header",children:[r.jsxs("div",{className:"saved-dash-title-group",children:[r.jsx("button",{className:"saved-dash-back-btn",onClick:()=>e("/dashboards"),children:r.jsx(sn,{size:16})}),r.jsx("div",{className:"saved-dash-icon",children:r.jsx(rg,{size:16})}),r.jsxs("div",{className:"saved-dash-title-text",children:[r.jsx("h2",{children:n.name}),n.description&&r.jsx("span",{className:"saved-dash-description",children:n.description})]})]}),r.jsx("div",{className:"saved-dash-actions",children:r.jsxs("button",{className:"saved-dash-edit-btn",onClick:()=>e(`/dashboards/${t}/edit`),children:[r.jsx(qi,{size:12})," Edit"]})})]}),r.jsx("div",{className:"saved-dash-body",children:i.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets in this dashboard. Click Edit to add some!"}):r.jsx("div",{className:"temp-dash-grid",children:i.map((s,o)=>r.jsx(LM,{widget:s,autoHideEmptyColumns:!0},s.id||`view-widget-${o}`))})})]})},ZA=["#8b5cf6","#3b82f6","#06b6d4","#10b981","#22c55e","#f59e0b","#f97316","#ef4444","#ec4899","#a855f7"],e3e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,u]=v.useState(!1),[f,p]=v.useState({name:"",key:"",color:"#6b7280",description:""}),[g,x]=v.useState(!1),b=async()=>{a(!0),s(null);try{const q=await le("/api/clinic-roles");if(q.ok){const U=await q.json();e(U)}else s("Failed to load roles")}catch{s("Failed to connect to server")}finally{a(!1)}};v.useEffect(()=>{b()},[]);const j=q=>q.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),w=q=>{p(U=>({...U,name:q,key:o?U.key:j(q)}))},_=async()=>{if(f.name.trim()){x(!0);try{const q=await le("/api/clinic-roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),key:f.key||j(f.name),color:f.color,description:f.description.trim()||null})});if(q.ok)await b(),u(!1),p({name:"",key:"",color:"#6b7280",description:""});else{const U=await q.json();s(U.message||"Failed to create role")}}catch{s("Failed to create role")}finally{x(!1)}}},T=async()=>{if(!(!o||!f.name.trim())){x(!0);try{const q=await le(`/api/clinic-roles/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),color:f.color,description:f.description.trim()||null})});if(q.ok)await b(),l(null),p({name:"",key:"",color:"#6b7280",description:""});else{const U=await q.json();s(U.message||"Failed to update role")}}catch{s("Failed to update role")}finally{x(!1)}}},C=async q=>{if(!q.isSystem&&window.confirm(`Delete role "${q.name}"? This cannot be undone.`))try{const U=await le(`/api/clinic-roles/${q.id}`,{method:"DELETE"});if(U.ok)await b();else{const F=await U.json();s(F.message||"Failed to delete role")}}catch{s("Failed to delete role")}},A=q=>{l(q),p({name:q.name,key:q.key,color:q.color,description:q.description||""}),u(!1)},k=()=>{u(!0),l(null),p({name:"",key:"",color:ZA[Math.floor(Math.random()*ZA.length)],description:""})},P=()=>{u(!1),l(null),p({name:"",key:"",color:"#6b7280",description:""})},I=t.filter(q=>q.isSystem),R=t.filter(q=>!q.isSystem);return r.jsxs("div",{className:"role-management-page",children:[r.jsxs("div",{className:"role-management-header",children:[r.jsxs("div",{className:"header-title",children:[r.jsx(ig,{size:28}),r.jsxs("div",{children:[r.jsx("h1",{children:"Role Management"}),r.jsx("p",{children:"Manage custom roles for your clinic staff"})]})]}),r.jsxs("button",{className:"create-role-btn",onClick:k,disabled:c,children:[r.jsx(Vn,{size:18}),"Create Custom Role"]})]}),i&&r.jsxs("div",{className:"role-error-banner",children:[r.jsx(Fr,{size:18}),i,r.jsx("button",{onClick:()=>s(null),children:r.jsx(Rt,{size:16})})]}),(c||o)&&r.jsxs("div",{className:"role-form-card",children:[r.jsx("h3",{children:o?"Edit Role":"Create New Role"}),r.jsxs("div",{className:"role-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Name *"}),r.jsx("input",{type:"text",value:f.name,onChange:q=>w(q.target.value),placeholder:"e.g., Senior Doctor, Ward Nurse"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Key"}),r.jsx("input",{type:"text",value:f.key,onChange:q=>p(U=>({...U,key:q.target.value})),placeholder:"auto-generated",disabled:!!o})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:q=>p(U=>({...U,description:q.target.value})),placeholder:"Brief description of role responsibilities"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx(NJ,{size:14}),"Color"]}),r.jsxs("div",{className:"color-picker",children:[ZA.map(q=>r.jsx("button",{className:`color-option ${f.color===q?"selected":""}`,style:{background:q},onClick:()=>p(U=>({...U,color:q}))},q)),r.jsx("input",{type:"color",value:f.color,onChange:q=>p(U=>({...U,color:q.target.value})),className:"custom-color-input"})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"cancel-btn",onClick:P,children:"Cancel"}),r.jsxs("button",{className:"save-btn",onClick:o?T:_,disabled:g||!f.name.trim(),children:[r.jsx(Ms,{size:16}),g?"Saving...":o?"Update Role":"Create Role"]})]})]})]}),r.jsxs("div",{className:"roles-container",children:[r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"System Roles"}),r.jsx("p",{className:"section-desc",children:"Default roles - can be customized but not deleted"}),n?r.jsx("div",{className:"roles-grid",children:[1,2,3].map(q=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",style:{marginBottom:"10px"},children:[r.jsx(te,{variant:"circular",width:12,height:12,style:{marginRight:"8px"}}),r.jsx(te,{width:100,height:20})]}),r.jsx(te,{width:80,height:16,style:{marginBottom:"10px"}}),r.jsx(te,{width:"100%",height:20}),r.jsx("div",{className:"role-actions",style:{marginTop:"15px"},children:r.jsx(te,{width:60,height:24})})]},q))}):r.jsx("div",{className:"roles-grid",children:I.map(q=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:q.color}}),r.jsx("span",{className:"role-name",children:q.name}),r.jsx("span",{className:"system-badge",children:"System"})]}),r.jsx("div",{className:"role-key",children:q.key}),q.description&&r.jsx("div",{className:"role-description",children:q.description}),r.jsx("div",{className:"role-actions",children:r.jsxs("button",{className:"edit-role-btn",onClick:()=>A(q),children:[r.jsx(Os,{size:14}),"Edit"]})})]},q.id))})]}),r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"Custom Roles"}),r.jsx("p",{className:"section-desc",children:"Roles created for your clinic"}),R.length===0?r.jsxs("div",{className:"no-roles",children:[r.jsx(ig,{size:32}),r.jsx("p",{children:"No custom roles created yet"}),r.jsxs("button",{onClick:k,children:[r.jsx(Vn,{size:16}),"Create your first custom role"]})]}):r.jsx("div",{className:"roles-grid",children:R.map(q=>r.jsxs("div",{className:"role-card custom",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:q.color}}),r.jsx("span",{className:"role-name",children:q.name})]}),r.jsx("div",{className:"role-key",children:q.key}),q.description&&r.jsx("div",{className:"role-description",children:q.description}),r.jsxs("div",{className:"role-actions",children:[r.jsxs("button",{className:"edit-role-btn",onClick:()=>A(q),children:[r.jsx(Os,{size:14}),"Edit"]}),r.jsxs("button",{className:"delete-role-btn",onClick:()=>C(q),children:[r.jsx(Wn,{size:14}),"Delete"]})]})]},q.id))})]})]})]})},t3e="_container_9z3gj_47",n3e="_progressBar_9z3gj_67",r3e="_sidebar_9z3gj_97",a3e="_sidebarTitle_9z3gj_161",i3e="_searchBox_9z3gj_193",s3e="_searchInput_9z3gj_203",o3e="_searchIcon_9z3gj_237",l3e="_navSection_9z3gj_255",c3e="_navSectionTitle_9z3gj_263",u3e="_navLink_9z3gj_287",d3e="_activeNavLink_9z3gj_367",h3e="_navLinkIcon_9z3gj_387",f3e="_content_9z3gj_409",p3e="_header_9z3gj_425",m3e="_headerContent_9z3gj_493",g3e="_title_9z3gj_503",y3e="_subtitle_9z3gj_563",x3e="_heroVideoWrapper_9z3gj_577",v3e="_heroVideo_9z3gj_577",b3e="_headerBadges_9z3gj_623",j3e="_headerBadge_9z3gj_623",w3e="_section_9z3gj_673",N3e="_sectionTitle_9z3gj_713",S3e="_sectionTitleIcon_9z3gj_737",_3e="_sectionContent_9z3gj_761",C3e="_featureList_9z3gj_799",T3e="_featureItem_9z3gj_815",k3e="_featureIcon_9z3gj_847",A3e="_featureText_9z3gj_861",E3e="_infoBox_9z3gj_887",P3e="_infoBoxTitle_9z3gj_929",D3e="_infoBoxContent_9z3gj_951",O3e="_workflowList_9z3gj_965",M3e="_kbd_9z3gj_1007",I3e="_moduleLinkBtn_9z3gj_1227",R3e="_uiGrid_9z3gj_1279",L3e="_uiCard_9z3gj_1293",F3e="_uiLabel_9z3gj_1325",$3e="_demoBtn_9z3gj_1349",z3e="_demoBtnPrimary_9z3gj_1371",B3e="_demoBtnSecondary_9z3gj_1383",q3e="_demoBtnDanger_9z3gj_1395",U3e="_demoBadge_9z3gj_1409",V3e="_demoBadgeSuccess_9z3gj_1433",H3e="_demoBadgeWarning_9z3gj_1445",G3e="_demoBadgeError_9z3gj_1457",W3e="_iconRow_9z3gj_1469",Y3e="_faqList_9z3gj_1503",K3e="_faqItem_9z3gj_1517",Q3e="_faqQuestion_9z3gj_1541",X3e="_faqIcon_9z3gj_1571",J3e="_faqIconOpen_9z3gj_1581",Z3e="_faqAnswer_9z3gj_1589",eLe="_footer_9z3gj_1635",tLe="_footerText_9z3gj_1653",nLe="_footerBrand_9z3gj_1665",rLe="_floatingParticles_9z3gj_1689",aLe="_particle_9z3gj_1711",iLe="_headerLabel_9z3gj_1865",sLe="_waveEmoji_9z3gj_1893",oLe="_headerActions_9z3gj_1905",lLe="_headerBtn_9z3gj_1919",cLe="_headerBtnSecondary_9z3gj_1961",uLe="_statsSection_9z3gj_2011",dLe="_statCard_9z3gj_2025",hLe="_statIcon_9z3gj_2057",fLe="_statValue_9z3gj_2087",pLe="_statLabel_9z3gj_2101",mLe="_quickTipsSection_9z3gj_2121",gLe="_quickTipsHeader_9z3gj_2137",yLe="_tipNav_9z3gj_2171",xLe="_tipCard_9z3gj_2233",vLe="_tipIcon_9z3gj_2279",bLe="_tipContent_9z3gj_2299",jLe="_tipIndicators_9z3gj_2327",wLe="_tipIndicator_9z3gj_2327",NLe="_tipIndicatorActive_9z3gj_2371",SLe="_shortcutsGrid_9z3gj_2391",_Le="_shortcutCard_9z3gj_2405",CLe="_shortcutCardActive_9z3gj_2431",TLe="_shortcutKeys_9z3gj_2445",kLe="_kbdPlus_9z3gj_2459",ALe="_kbdActive_9z3gj_2471",ELe="_shortcutInfo_9z3gj_2485",PLe="_shortcutAction_9z3gj_2493",DLe="_shortcutDesc_9z3gj_2507",OLe="_fabContainer_9z3gj_3125",MLe="_fabButton_9z3gj_3147",ILe="_fabContent_9z3gj_3189",RLe="_contactRow_9z3gj_3243",LLe="_contactIcon_9z3gj_3261",FLe="_copyBtn_9z3gj_3271",Me={container:t3e,progressBar:n3e,sidebar:r3e,sidebarTitle:a3e,searchBox:i3e,searchInput:s3e,searchIcon:o3e,navSection:l3e,navSectionTitle:c3e,navLink:u3e,activeNavLink:d3e,navLinkIcon:h3e,content:f3e,header:p3e,headerContent:m3e,title:g3e,subtitle:y3e,heroVideoWrapper:x3e,heroVideo:v3e,headerBadges:b3e,headerBadge:j3e,section:w3e,sectionTitle:N3e,sectionTitleIcon:S3e,sectionContent:_3e,featureList:C3e,featureItem:T3e,featureIcon:k3e,featureText:A3e,infoBox:E3e,infoBoxTitle:P3e,infoBoxContent:D3e,workflowList:O3e,kbd:M3e,moduleLinkBtn:I3e,uiGrid:R3e,uiCard:L3e,uiLabel:F3e,demoBtn:$3e,demoBtnPrimary:z3e,demoBtnSecondary:B3e,demoBtnDanger:q3e,demoBadge:U3e,demoBadgeSuccess:V3e,demoBadgeWarning:H3e,demoBadgeError:G3e,iconRow:W3e,faqList:Y3e,faqItem:K3e,faqQuestion:Q3e,faqIcon:X3e,faqIconOpen:J3e,faqAnswer:Z3e,footer:eLe,footerText:tLe,footerBrand:nLe,floatingParticles:rLe,particle:aLe,headerLabel:iLe,waveEmoji:sLe,headerActions:oLe,headerBtn:lLe,headerBtnSecondary:cLe,statsSection:uLe,statCard:dLe,statIcon:hLe,statValue:fLe,statLabel:pLe,quickTipsSection:mLe,quickTipsHeader:gLe,tipNav:yLe,tipCard:xLe,tipIcon:vLe,tipContent:bLe,tipIndicators:jLe,tipIndicator:wLe,tipIndicatorActive:NLe,shortcutsGrid:SLe,shortcutCard:_Le,shortcutCardActive:CLe,shortcutKeys:TLe,kbdPlus:kLe,kbdActive:ALe,shortcutInfo:ELe,shortcutAction:PLe,shortcutDesc:DLe,fabContainer:OLe,fabButton:MLe,fabContent:ILe,contactRow:RLe,contactIcon:LLe,copyBtn:FLe},$Le=(t,e=2e3)=>{const[n,a]=v.useState(0),[i,s]=v.useState(!1),o=v.useRef(null);return v.useEffect(()=>{const l=new IntersectionObserver(([c])=>{c.isIntersecting&&s(!0)},{threshold:.3});return o.current&&l.observe(o.current),()=>l.disconnect()},[]),v.useEffect(()=>{if(!i)return;let l=null;const c=u=>{l||(l=u);const f=Math.min((u-l)/e,1);a(Math.floor(f*t)),f<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[i,t,e]),{count:n,ref:o}},zLe=()=>{const[t,e]=v.useState("getting-started"),[n,a]=v.useState(""),[i,s]=v.useState(0),[o,l]=v.useState(null),[c,u]=v.useState(!1),[f,p]=v.useState(0),[g,x]=v.useState(null),b=v.useRef(null),j=v.useCallback(()=>{const R=document.documentElement.scrollHeight-window.innerHeight,q=window.scrollY/R*100;s(Math.min(q,100))},[]);v.useEffect(()=>{const R=()=>{const q=document.querySelectorAll("section[id]");let U="";q.forEach(F=>{const B=F.offsetTop;window.scrollY>=B-120&&(U=F.getAttribute("id")||"")}),U&&e(U),j()};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[j]);const w=R=>{const q=document.getElementById(R);q&&window.scrollTo({top:q.offsetTop-80,behavior:"smooth"})},_={navigation:[{id:"getting-started",label:"Getting Started",icon:$I},{id:"clinical-workflow",label:"Doctor Workflow",icon:ng},{id:"financial-mgmt",label:"Financial Control",icon:ud},{id:"analytics",label:"Analytics & Insights",icon:SE},{id:"pharmacy-inventory",label:"Pharmacy & Stock",icon:dd},{id:"advanced-lab",label:"Advanced Lab Mgmt",icon:us},{id:"ipd-admission",label:"IPD & Admission",icon:Sf},{id:"custom-data",label:"System Customization",icon:wf},{id:"admin",label:"Administration",icon:hd}],reference:[{id:"ui-reference",label:"Interface & UI",icon:Fm},{id:"troubleshooting",label:"Troubleshooting",icon:yj}]},T=R=>n?R.filter(q=>q.label.toLowerCase().includes(n.toLowerCase())):R,C=({id:R,label:q,Icon:U})=>r.jsxs("a",{className:`${Me.navLink} ${t===R?Me.activeNavLink:""}`,onClick:()=>w(R),children:[r.jsx(U,{className:Me.navLinkIcon,size:18}),q]}),A=[{question:"Bill not printing correctly?",answer:"Ensure pop-ups are not blocked in your browser. Also, check if your printer is properly configured in system settings. For thermal printers, verify the paper size matches the bill format."},{question:"Sync issues with data?",answer:"Make sure your internet connection is stable. The system auto-syncs when online. You can also manually trigger sync from the settings menu. If issues persist, try clearing browser cache."},{question:"How to reset my password?",answer:"Contact your clinic administrator who can reset your password from the Staff Management section. For security reasons, passwords cannot be self-reset without admin approval."},{question:"AI suggestions not appearing?",answer:'AI features require an active internet connection. Also ensure AI features are enabled in Clinic Settings under the "AI & Automation" tab.'},{question:"How do I record a partial payment for patient debt?",answer:"Navigate to Financial Control -> Patient Debts. Click on a patient's name to view their full transaction history. Use the payment recording form at the bottom to enter the amount paid and save."},{question:"How can I set up normal ranges for Lab tests?",answer:"Go to Advanced Lab Management -> Test Master. Click 'Edit' on a test, then go to the 'Parameters' tab. Here you can define min/max values, units, and default results."}],k=[{icon:II,title:"Pro Tip: Voice Commands",description:'Use the AI Command Bar to speak naturally. Say "Create prescription for John" to get started instantly!',color:"#f59e0b"},{icon:qI,title:"Speed Boost",description:"Double-click any patient name in the queue to instantly open their full history.",color:"#8b5cf6"},{icon:uZ,title:"Smart Billing",description:"The system auto-suggests medicine quantities based on prescription duration!",color:"#10b981"},{icon:BI,title:"Favorites",description:"Star frequently prescribed medicines to access them from your quick-add panel.",color:"#ef4444"}];v.useEffect(()=>{const R=setInterval(()=>{p(q=>(q+1)%k.length)},5e3);return()=>clearInterval(R)},[k.length]);const P=[{icon:zi,value:1e4,suffix:"+",label:"Patients Managed",color:"#6366f1"},{icon:zg,value:75,suffix:"%",label:"Time Saved",color:"#10b981"},{icon:fZ,value:99,suffix:".9%",label:"Uptime",color:"#f59e0b"},{icon:HX,value:50,suffix:"+",label:"Happy Clinics",color:"#ef4444"}],I=[{keys:["Ctrl","K"],action:"Open Command Bar",description:"Quick access to AI assistant and navigation"},{keys:["Ctrl","P"],action:"Quick Print",description:"Print current document or bill"},{keys:["Ctrl","S"],action:"Save Record",description:"Save current form or entry"},{keys:["Esc"],action:"Close Modal",description:"Close any open dialog or panel"}];return r.jsxs("div",{className:Me.container,children:[r.jsx("div",{className:Me.progressBar,style:{width:`${i}%`}}),r.jsxs("aside",{className:Me.sidebar,children:[r.jsxs("h2",{className:Me.sidebarTitle,children:[r.jsx(EI,{size:22}),"User Guide"]}),r.jsxs("div",{className:Me.searchBox,children:[r.jsx(En,{className:Me.searchIcon,size:16}),r.jsx("input",{type:"text",className:Me.searchInput,placeholder:"Search topics...",value:n,onChange:R=>a(R.target.value)})]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(Xr,{size:12}),"Navigation"]}),T(_.navigation).map(R=>r.jsx(C,{id:R.id,label:R.label,Icon:R.icon},R.id))]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(BI,{size:12}),"Reference"]}),T(_.reference).map(R=>r.jsx(C,{id:R.id,label:R.label,Icon:R.icon},R.id))]})]}),r.jsxs("main",{className:Me.content,ref:b,children:[r.jsxs("header",{className:Me.header,children:[r.jsxs("div",{className:Me.floatingParticles,children:[r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle})]}),r.jsxs("div",{className:Me.headerContent,children:[r.jsxs("div",{className:Me.headerLabel,children:[r.jsx(EI,{size:16}),"Complete Documentation"]}),r.jsxs("h1",{className:Me.title,children:["Master Newtons Ai HMS ",r.jsx("span",{className:Me.waveEmoji,children:""})]}),r.jsx("p",{className:Me.subtitle,children:"Your comprehensive guide to maximizing efficiency with the AI-Powered Health Management System. Master every feature and transform your clinical workflow."}),r.jsx("div",{className:Me.heroVideoWrapper,children:r.jsx("iframe",{className:Me.heroVideo,src:"https://www.youtube.com/embed/VEDfh5NkXRw?si=BM8JuGXEO8Nl6x7E&vq=hd720",title:"Newtons Ai HMS Guide",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}),r.jsxs("div",{className:Me.headerBadges,children:[r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(ig,{size:14}),"HIPAA Compliant"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(xw,{size:14}),"AI Powered"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(_E,{size:14}),"Multi-Language"]})]}),r.jsxs("div",{className:Me.headerActions,children:[r.jsxs("button",{className:Me.headerBtn,onClick:()=>w("getting-started"),children:[r.jsx(oq,{size:16}),"Get Started"]}),r.jsxs("button",{className:Me.headerBtnSecondary,onClick:()=>w("troubleshooting"),children:[r.jsx(yj,{size:16}),"Need Help?"]})]})]})]}),r.jsx("section",{className:Me.statsSection,children:P.map((R,q)=>{const{count:U,ref:F}=$Le(R.value);return r.jsxs("div",{className:Me.statCard,ref:F,children:[r.jsx("div",{className:Me.statIcon,style:{backgroundColor:`${R.color}15`,color:R.color},children:r.jsx(R.icon,{size:24})}),r.jsxs("div",{className:Me.statValue,style:{color:R.color},children:[U,R.suffix]}),r.jsx("div",{className:Me.statLabel,children:R.label})]},q)})}),r.jsxs("section",{className:Me.quickTipsSection,children:[r.jsxs("div",{className:Me.quickTipsHeader,children:[r.jsxs("h3",{children:[r.jsx(II,{size:20})," Quick Tips"]}),r.jsxs("div",{className:Me.tipNav,children:[r.jsx("button",{onClick:()=>p(R=>(R-1+k.length)%k.length),children:r.jsx(Eb,{size:18})}),r.jsxs("span",{children:[f+1," / ",k.length]}),r.jsx("button",{onClick:()=>p(R=>(R+1)%k.length),children:r.jsx(yd,{size:18})})]})]}),r.jsxs("div",{className:Me.tipCard,children:[r.jsx("div",{className:Me.tipIcon,style:{backgroundColor:`${k[f].color}15`,color:k[f].color},children:Ce.createElement(k[f].icon,{size:28})}),r.jsxs("div",{className:Me.tipContent,children:[r.jsx("h4",{children:k[f].title}),r.jsx("p",{children:k[f].description})]})]},f),r.jsx("div",{className:Me.tipIndicators,children:k.map((R,q)=>r.jsx("button",{className:`${Me.tipIndicator} ${f===q?Me.tipIndicatorActive:""}`,onClick:()=>p(q)},q))})]}),r.jsxs("section",{id:"getting-started",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx($I,{size:18})}),"Getting Started"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Welcome to the Newtons Ai HMS. This guide will help you navigate and master the system's features, from clinical workflows to advanced financial analytics."}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(xw,{size:18}),"Multi-Platform Accessibility"]}),r.jsx("div",{className:Me.infoBoxContent,children:"Newtons Ai is a PWA (Progressive Web App). You can install it on your Desktop, Android, or iOS device for a native-like experience with faster performance and offline support."})]}),r.jsx("div",{className:Me.shortcutsGrid,children:I.map((R,q)=>r.jsxs("div",{className:`${Me.shortcutCard} ${g===R.action?Me.shortcutCardActive:""}`,onMouseEnter:()=>x(R.action),onMouseLeave:()=>x(null),children:[r.jsx("div",{className:Me.shortcutKeys,children:R.keys.map((U,F)=>r.jsxs(Ce.Fragment,{children:[r.jsx("kbd",{className:`${Me.kbd} ${g===R.action?Me.kbdActive:""}`,children:U}),F<R.keys.length-1&&r.jsx("span",{className:Me.kbdPlus,children:"+"})]},F))}),r.jsxs("div",{className:Me.shortcutInfo,children:[r.jsx("div",{className:Me.shortcutAction,children:R.action}),r.jsx("div",{className:Me.shortcutDesc,children:R.description})]})]},q))}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(SX,{size:14})," Smart Navigation"]}),r.jsxs("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:["Press ",r.jsx("kbd",{className:Me.kbd,children:"Ctrl"})," + ",r.jsx("kbd",{className:Me.kbd,children:"K"})," anywhere to open the Command Bar. Instantly jump to patients, bills, or settings."]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(zi,{size:14})," Multi-Role Access"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"The system adapts to your role: Doctor, Receptionist, Pharmacist, or Lab Technician."})]})]})]})]}),r.jsxs("section",{id:"clinical-workflow",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(ng,{size:18})}),"Doctor Workflow & Live Queue"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"The Doctor Consultation Panel is optimized for speed and clarity, providing all necessary patient context at a single glance."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(_c,{size:14})," Live Queue Control"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Use the "Call Next" buttons to manage the patient flow. The system automatically marks seen patients and updates the waiting list.'}),r.jsx(vr,{to:"/dashboard/doctor",className:Me.moduleLinkBtn,children:"Consultation Panel"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(jf,{size:14})," AI Patient Briefs"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:`" AI Brief" provides a summarized snapshot of the patient's current complaint and relevant history saving valuable consultation time.`})]})]}),r.jsx("h3",{children:"Comprehensive History"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(pv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Unified Timeline:"})," View past complaints, lab reports, and medications in a single, chronologically grouped view."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(DX,{size:16,className:Me.featureIcon,style:{color:"var(--guide-primary)"}}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"One-Click Action:"})," From the history view, copy past medications to new prescriptions or quickly re-order tests."]})]})]})]})]}),r.jsxs("section",{id:"financial-mgmt",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(ud,{size:18})}),"Financial Control & Debt Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Keep your clinic's finances healthy with precise billing and proactive debt management."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(vw,{size:14})," Debt Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Monitor all outstanding balances in the Patent Debt module. View individual transaction histories and record settlements."}),r.jsx(vr,{to:"/dashboard/admin/patient-debts",className:Me.moduleLinkBtn,children:"Manage Debt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Xr,{size:14})," Custom Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Need to bill for something non-standard? Use the Custom Bill tool to create items on-the-fly."}),r.jsx(vr,{to:"/create-custom-bill",className:Me.moduleLinkBtn,children:"Custom Bill"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(ig,{size:18}),"Payment Verification"]}),r.jsx("div",{className:Me.infoBoxContent,children:'The system tracks payment modes (Cash, UPI, Card, Credit). "Credit" sales are automatically added to the Patient Debt list for later follow-up.'})]})]})]}),r.jsxs("section",{id:"analytics",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(SE,{size:18})}),"Analytics & Insights"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Transition from simply managing data to understanding it. The Analysis Dashboard provides deep insights into your operations."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(_c,{size:14})," Revenue vs Cash Flow"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Compare Sales (Accrual) against actual Cash Collected (Cash Basis) to understand your true liquidity."}),r.jsx(vr,{to:"/dashboard/analysis",className:Me.moduleLinkBtn,children:"Open Analysis"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(FI,{size:14})," Dept. Analysis"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"See exactly which departments (Pharmacy, Lab, OPD) are driving your clinic's growth."})]})]}),r.jsx("h3",{children:"Advanced Metrics"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(pv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Inventory Movement:"})," Analyze stock inflow vs outflow to predict future procurement needs."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(pv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Profit Estimation:"})," View estimated profits based on cost of goods sold (COGS) vs revenue generated."]})]})]})]})]}),r.jsxs("section",{id:"pharmacy-inventory",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(dd,{size:18})}),"Pharmacy & Inventory Tracking"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Maintain optimal stock levels and manage supplier relationships effortlessly."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(XD,{size:14})," Distributor Mgmt"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep a directory of suppliers, track payments made to them, and manage purchase entries."}),r.jsx(vr,{to:"/dashboard/distributors",className:Me.moduleLinkBtn,children:"Distributors"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(HQ,{size:14})," Refill Reminders"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automatically notify patients when their chronic medication stock is about to run out."}),r.jsx(vr,{to:"/refill-reminders",className:Me.moduleLinkBtn,children:"Refill Alerts"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(_c,{size:18}),"Stock-Out Alerts"]}),r.jsx("div",{className:Me.infoBoxContent,children:"High-demand items are highlighted when stock falls below your defined threshold, ensuring you never run out of critical medicines."})]})]})]}),r.jsxs("section",{id:"advanced-lab",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(us,{size:18})}),"Advanced Lab Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Go beyond simple test lists. Configure complex diagnostic parameters with automated clinical validation."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(En,{size:14})," Multi-Parameter Search"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Find reports by Patient Name, ID, Token, or even specific Test Name. The intelligent search uses fuzzy matching."}),r.jsx(vr,{to:"/lab/search-report",className:Me.moduleLinkBtn,children:"Find Reports"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(us,{size:14})," Test Master"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define parametric data, normal ranges, and automated formatting for your reports."}),r.jsx(vr,{to:"/lab-inventory",className:Me.moduleLinkBtn,children:"Configure Tests"})]})]})]})]}),r.jsxs("section",{id:"ipd-admission",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(Sf,{size:18})}),"IPD & Admission Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Manage the full lifecycle of in-patient care, from the moment of admission to final discharge and billing."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Yn,{size:14})," In-Patient Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep track of all currently admitted patients, their ward assignments, and duration of stay."}),r.jsx(vr,{to:"/manage-admission",className:Me.moduleLinkBtn,children:"Admission Mgmt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(vw,{size:14})," Cumulative Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automated daily room charges combined with services and medications consumed during the stay."})]})]}),r.jsx("h3",{children:"Workflow Steps"}),r.jsxs("ol",{className:Me.workflowList,children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Admit:"})," Register the patient and set the admission date and bed details."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Manage:"})," Record observations and clinical notes throughout the stay."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Discharge:"})," Finalize all pending charges and generate the discharge summary."]})]})]})]}),r.jsxs("section",{id:"custom-data",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(wf,{size:18})}),"System Customization"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Newtons Ai HMS is designed to be extensible. Create your own data structures and visualization tools."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Ob,{size:14})," Custom Tables"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define new data types (e.g., Equipment Logs, Consent Forms). Support for text, number, date, and boolean."}),r.jsx(vr,{to:"/custom-tables",className:Me.moduleLinkBtn,children:"Data Tables"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(FI,{size:14})," Custom Dashboards"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Build your own reporting views. Drag and drop widgets to visualize your performance."}),r.jsx(vr,{to:"/dashboards",className:Me.moduleLinkBtn,children:"Manage Dashboards"})]})]})]})]}),r.jsxs("section",{id:"admin",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(hd,{size:18})}),"Administration"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Central command for clinic owners. Access critical functions and manage staff permissions."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(zi,{size:14})," Staff & Permissions"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Add/edit staff and define exactly what each role can see and do in the system."}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[r.jsx(vr,{to:"/dashboard/staff",className:Me.moduleLinkBtn,children:"Staff"}),r.jsx(vr,{to:"/dashboard/roles",className:Me.moduleLinkBtn,children:"Roles"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(ia,{size:14})," Subscription Plans"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Manage your patients' subscription plans, billing cycles, and membership statuses."}),r.jsx(vr,{to:"/dashboard/subscriptions",className:Me.moduleLinkBtn,children:"Subscriptions"})]})]})]})]}),r.jsxs("section",{id:"ui-reference",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(Fm,{size:18})}),"Interface & UI Reference"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Familiarize yourself with the common UI elements used throughout the application."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Action Buttons"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnPrimary}`,children:"Primary / Save"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnSecondary}`,children:"Secondary"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnDanger}`,children:"Danger / Delete"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Status Indicators"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeSuccess}`,children:[r.jsx(pv,{size:12}),"Paid / Completed"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeWarning}`,children:[r.jsx(qI,{size:12}),"Pending / Due"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeError}`,children:[r.jsx(yj,{size:12}),"Overdue / Failed"]})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Common Icons"}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(qi,{size:16})," ",r.jsx("span",{children:"Edit Record"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Wn,{size:16})," ",r.jsx("span",{children:"Delete Item"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Fm,{size:16})," ",r.jsx("span",{children:"View Details"})]})]})]})]})]}),r.jsxs("section",{id:"troubleshooting",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(yj,{size:18})}),"Troubleshooting & Support"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(_E,{size:18}),"Offline Support (PWA)"]}),r.jsxs("div",{className:Me.infoBoxContent,children:["Newtons Ai HMS is a ",r.jsx("strong",{children:"Progressive Web App (PWA)"}),'. Install it on your desktop or mobile home screen using the "Install" button in the header for faster loading and offline syncing of critical data.']})]}),r.jsxs("div",{className:Me.infoBox,style:{borderLeftColor:"var(--guide-accent)"},children:[r.jsxs("span",{className:Me.infoBoxTitle,style:{color:"var(--guide-accent)"},children:[r.jsx(sC,{size:18}),"Need Direct Support?"]}),r.jsx("div",{className:Me.infoBoxContent,children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(ag,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"+91 63631 11328"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(RI,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"shiva@newtons.in"})]})]})})]}),r.jsx("h3",{children:"Frequently Asked Questions"}),r.jsx("div",{className:Me.faqList,children:A.map((R,q)=>r.jsxs("div",{className:Me.faqItem,children:[r.jsxs("div",{className:Me.faqQuestion,onClick:()=>l(o===q?null:q),children:[r.jsx("span",{children:R.question}),r.jsx(ZB,{size:18,className:`${Me.faqIcon} ${o===q?Me.faqIconOpen:""}`})]}),o===q&&r.jsx("div",{className:Me.faqAnswer,children:R.answer})]},q))})]})]}),r.jsx("footer",{className:Me.footer,children:r.jsxs("p",{className:Me.footerText,children:[" ",new Date().getFullYear()," ",r.jsx("span",{className:Me.footerBrand,children:"Newtons Ai"}),". Empowering Healthcare through Intelligence."]})})]}),r.jsxs("div",{className:Me.fabContainer,children:[c&&r.jsxs("div",{className:Me.fabContent,children:[r.jsxs("h4",{children:[r.jsx(sC,{size:18}),"Customer Care"]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(ag,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"+91 63631 11328"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("+916363111328"),title:"Copy Phone",children:r.jsx(OI,{size:14})})]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(RI,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"shiva@newtons.in"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("shiva@newtons.in"),title:"Copy Email",children:r.jsx(OI,{size:14})})]})]}),r.jsx("button",{className:Me.fabButton,onClick:()=>u(!c),title:"Customer Support",children:c?r.jsx(Rt,{size:24}):r.jsx(sC,{size:24})})]})]})},BLe=t=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(t)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(t)?{type:"premolar",roots:1}:[6,11,22,27].includes(t)?{type:"canine",roots:1}:t>=1&&t<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(t)?{type:"molar",roots:2}:[43,48,53,58].includes(t)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(t)?{type:"incisor",roots:1}:{type:"incisor",roots:1},xc=({toothNumber:t,conditions:e=[],className:n,style:a,isSelected:i,bridgeConnectPrevious:s})=>{const{type:o}=BLe(t),l=t<=16||t>=41&&t<=50,c="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",u="M7,25 Q5,40 10,44 Q14,40 14,26",f="M29,25 Q31,40 26,44 Q22,40 22,26",p="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",g="M10,24 Q16,44 18,45 Q20,44 26,24",x="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",b="M10,25 Q18,48 26,25",j="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",w="M12,25 Q18,46 24,25";let _=c,T=[u,f];o==="incisor"?(_=j,T=[w]):o==="canine"?(_=x,T=[b]):o==="premolar"&&(_=p,T=[g]);const C=e.includes("condition-rct"),A=e.includes("condition-filling"),k=e.includes("condition-crown"),P=e.includes("condition-bridge"),I=e.includes("condition-extraction"),R=e.includes("condition-implant"),q=e.includes("condition-others"),U=C?"#e9d5ff":"#f3f4f6",F=I?"#fee2e2":"#ffffff",B=I?"#ef4444":P?"#0891b2":R?"#475569":q?"#f97316":k?"#b45309":i?"#3b82f6":"#6b7280",V=i||P||k||R||q?2:1.5,W=l?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return r.jsxs("svg",{viewBox:"0 0 36 50",className:n,style:{width:"100%",height:"100%",overflow:"visible",...a},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),r.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),r.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),r.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),r.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[r.jsx("stop",{offset:"0%",stopColor:"#475569"}),r.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),r.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),s&&r.jsx("path",{d:W,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),R?r.jsxs("g",{children:[r.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:B,strokeWidth:"1"}),r.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[r.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),r.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),r.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),r.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:B,strokeWidth:"1",rx:"1"})]}):r.jsx("g",{fill:U,stroke:B,strokeWidth:V,strokeLinejoin:"round",children:T.map((G,z)=>r.jsx("path",{d:G},z))}),C&&!R&&r.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:o==="molar"?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M12,28 L11,42"}),r.jsx("path",{d:"M24,28 L25,42"})]}):r.jsx("path",{d:"M18,25 L18,44"})}),r.jsx("path",{d:_,fill:P?"url(#bridgeGradient)":k?"url(#goldGradient)":F,stroke:B,strokeWidth:V,strokeLinejoin:"round"}),A&&!k&&!P&&!R&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),q&&!k&&!P&&!R&&!A&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#f97316",stroke:"#ea580c",strokeWidth:"1"}),I&&r.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[r.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),r.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},wb=(t,e="fdi")=>e==="universal"?t<=32?t.toString():t>=41&&t<=50?String.fromCharCode(65+(t-41)):t>=51&&t<=60?String.fromCharCode(75+(t-51)):t.toString():e==="fdi"?t>=1&&t<=8?(18-(t-1)).toString():t>=9&&t<=16?(21+(t-9)).toString():t>=17&&t<=24?(38-(t-17)).toString():t>=25&&t<=32?(41+(t-25)).toString():t>=41&&t<=45?(55-(t-41)).toString():t>=46&&t<=50?(61+(t-46)).toString():t>=51&&t<=55?(75-(t-51)).toString():t>=56&&t<=60?(81+(t-56)).toString():t.toString():t.toString(),$G=({selectedTeeth:t,toothConditions:e={},toothDetails:n={},onToothClick:a,onEditPastRecord:i,onPrint:s,numberingSystem:o="fdi"})=>{const[l,c]=Ce.useState("permanent"),u=Array.from({length:16},(_,T)=>T+1),f=Array.from({length:16},(_,T)=>32-T),p=Array.from({length:10},(_,T)=>41+T),g=Array.from({length:10},(_,T)=>60-T),[x,b]=Ce.useState(null),j=_=>{const T=e[_]||[],C=t.includes(_);let A=[],k="#9ca3af",P;const I=T.includes("condition-extraction");return C&&(k="#3b82f6"),T.includes("condition-filling")&&A.push("#60a5fa"),T.includes("condition-rct")&&A.push("#c084fc"),T.includes("condition-crown")&&(A.push("#fcd34d"),k="#d97706"),T.includes("condition-bridge")&&(A.push("#22d3ee"),k="#0891b2"),T.includes("condition-implant")&&(A.push("#94a3b8"),k="#475569"),T.includes("condition-extraction")&&(A.push("#fee2e2"),k="#ef4444"),T.includes("condition-others")&&(A.push("#ffedd5"),k="#f97316"),A.length===0&&C&&A.push("#eff6ff"),A.length===0&&A.push("#ffffff"),{fillColors:A,borderColor:k,overlayColor:P,isSelected:C,hasExtraction:I}},w=_=>{const{isSelected:T}=j(_),C=e[_]||[],A=n[_],k=_<=16||_>=41&&_<=50,P=C.includes("condition-bridge");let I=!1;if(P){let q=null;k?(_>1&&_<=16&&(q=_-1),_>41&&_<=50&&(q=_-1)):(_<32&&_>=17&&(q=_+1),_<60&&_>=51&&(q=_+1)),q!==null&&(e[q]||[]).includes("condition-bridge")&&(I=!0)}const R=wb(_,o);return r.jsxs("div",{onClick:()=>a(_),onMouseEnter:()=>b(_),onMouseLeave:()=>b(null),className:`tooth-item-container ${T?"selected":""}`,title:"",children:[r.jsx("div",{className:"tooth-number-label",children:R}),r.jsx("div",{className:"tooth-svg-wrapper",style:{transform:k?"rotate(180deg)":"none"},children:r.jsx(xc,{toothNumber:_,conditions:C,isSelected:T,bridgeConnectPrevious:I})}),x===_&&A&&A.length>0&&r.jsxs("div",{className:"tooth-tooltip-window",children:[r.jsxs("div",{className:"tooltip-header",children:["Tooth ",R]}),r.jsx("ul",{className:"tooltip-list",children:A.map((q,U)=>r.jsxs("li",{className:"tooltip-detail-item",children:[r.jsxs("span",{className:"detail-text",children:[q.name," ",r.jsxs("small",{children:["(",q.date,")"]})]}),q.isPast&&i&&r.jsx("button",{className:"tooltip-edit-btn",onClick:F=>{F.stopPropagation(),i(q.recordId)},title:"Edit this record",children:r.jsx(Os,{size:12})})]},U))})]})]},_)};return r.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[r.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[r.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[r.jsx("button",{className:`view-toggle-btn ${l==="permanent"?"active":""}`,onClick:()=>c("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="permanent"?"#fff":"transparent",boxShadow:l==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),r.jsx("button",{className:`view-toggle-btn ${l==="primary"?"active":""}`,onClick:()=>c("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="primary"?"#fff":"transparent",boxShadow:l==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),s&&r.jsxs("button",{onClick:_=>{_.stopPropagation(),s()},className:"chart-print-btn no-print",title:"Print Report",children:[r.jsx(Nf,{size:16}),r.jsx("span",{children:"Print Report"})]})]}),r.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?u.slice(0,8).map(_=>w(_)):p.slice(0,5).map(_=>w(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?u.slice(8).map(_=>w(_)):p.slice(5).map(_=>w(_))})]}),r.jsxs("div",{className:"midline-divider",children:[r.jsx("div",{className:"divider-line"}),r.jsx("span",{className:"chart-label",children:"Midline"}),r.jsx("div",{className:"divider-line"})]}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(0,8).map(_=>w(_)):g.slice(0,5).map(_=>w(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(8).map(_=>w(_)):g.slice(5).map(_=>w(_))})]}),r.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),r.jsx("span",{children:"Healthy"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),r.jsx("span",{children:"Filling (Dot)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),r.jsx("span",{children:"RCT (Root Lines)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),r.jsx("span",{children:"Crown"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),r.jsx("span",{children:"Bridge"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),r.jsx("span",{children:"Implant"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),r.jsx("span",{children:"Extraction (X)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-others"],style:{width:16,height:22}})}),r.jsx("span",{children:"Others"})]})]}),r.jsxs("div",{className:"print-only-details-summary print-only",children:[r.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(n).length===0?r.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):r.jsxs("table",{className:"print-details-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Tooth"}),r.jsx("th",{children:"Procedure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:Object.entries(n).sort(([_],[T])=>parseInt(_)-parseInt(T)).map(([_,T])=>r.jsx(Ce.Fragment,{children:T.map((C,A)=>r.jsxs("tr",{children:[A===0?r.jsxs("td",{rowSpan:T.length,className:"tooth-cell",children:["Tooth ",wb(parseInt(_),o)]}):null,r.jsx("td",{children:C.name}),r.jsx("td",{children:C.date})]},`${_}-${A}`))},_))})]})]})]})},qLe=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,type:"general"}),[b,j]=v.useState(""),w=n.filter(P=>P.name.toLowerCase().includes(b.toLowerCase()));v.useEffect(()=>{_()},[]);const _=async()=>{s(!0);try{const P=await le("/api/dental/procedures");if(P.ok){const I=await P.json();a(I)}}catch(P){console.error(P)}finally{s(!1)}},T=async()=>{if(!(!g.name||!g.cost))try{(await le("/api/dental/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,type:"general"}),_(),e())}catch(P){console.error(P)}},C=async P=>{try{(await le(`/api/dental/procedures/${P}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),u({}),_(),e())}catch(I){console.error(I)}},A=async P=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await le(`/api/dental/procedures/${P}`,{method:"DELETE"})).ok&&(_(),e())}catch(I){console.error(I)}},k=P=>{l(P.id),u({name:P.name,cost:P.cost,type:P.type})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await le("/api/dental/procedures/import-defaults",{method:"POST"}),_(),e()}catch(P){console.error(P)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Rt,{size:20})})]})]}),r.jsx("div",{className:"mpm-search-container",children:r.jsxs("div",{className:"mpm-search-wrapper",children:[r.jsx(En,{className:"mpm-search-icon",size:18}),r.jsx("input",{type:"text",className:"mpm-search-input",placeholder:"Search procedures...",value:b,onChange:P=>j(P.target.value)}),b&&r.jsx("button",{className:"mpm-search-clear",onClick:()=>j(""),children:r.jsx(Rt,{size:16})})]})}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Type"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:w.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):w.map(P=>r.jsx("tr",{children:o===P.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:I=>u({...c,name:I.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsxs("select",{className:"edit-select",value:c.type||"general",onChange:I=>u({...c,type:I.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"}),r.jsx("option",{value:"others",children:"Others"})]})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:I=>u({...c,cost:parseFloat(I.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>C(P.id),className:"action-btn btn-save",title:"Save",children:r.jsx(Bi,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Rt,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:P.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${P.type}`,children:P.type})}),r.jsxs("td",{style:{fontWeight:500},children:["",P.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>k(P),className:"action-btn btn-edit",title:"Edit",children:r.jsx(Os,{size:18})}),r.jsx("button",{onClick:()=>A(P.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Wn,{size:18})})]})]})},P.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:P=>x({...g,name:P.target.value})}),r.jsxs("select",{className:"form-select",value:g.type||"general",onChange:P=>x({...g,type:P.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"}),r.jsx("option",{value:"others",children:"Others"})]}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:P=>x({...g,cost:parseFloat(P.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:T,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Vn,{size:18})," Add New Procedure"]})})]})})},ULe=({toothNumber:t,procedures:e,history:n=[],onSelect:a,onClose:i,onManageProcedures:s,numberingSystem:o="universal"})=>{const[l,c]=v.useState(""),[u,f]=v.useState(n.length>0?"history":"add"),p=wb(t,o),g=v.useMemo(()=>e.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),[e,l]);return r.jsx("div",{className:"tooth-modal-overlay",children:r.jsxs("div",{className:"tooth-modal-content",children:[r.jsxs("div",{className:"tooth-modal-header",children:[r.jsxs("h3",{className:"tooth-modal-title",children:["Tooth ",p]}),r.jsx("button",{onClick:i,className:"tooth-modal-close-btn",children:r.jsx(Rt,{size:20})})]}),n.length>0&&r.jsxs("div",{className:"tooth-modal-tabs",children:[r.jsx("button",{className:`tooth-modal-tab ${u==="add"?"active":""}`,onClick:()=>f("add"),children:"Add Procedure"}),r.jsxs("button",{className:`tooth-modal-tab ${u==="history"?"active":""}`,onClick:()=>f("history"),children:["History (",n.length,")"]})]}),u==="add"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"tooth-modal-search-box",style:{display:"flex",gap:"8px",alignItems:"center"},children:[r.jsxs("div",{className:"tooth-modal-search-wrapper",style:{flex:1},children:[r.jsx(En,{size:16,className:"tooth-modal-search-icon"}),r.jsx("input",{type:"text",placeholder:"Search procedures...",value:l,onChange:x=>c(x.target.value),className:"tooth-modal-search-input",autoFocus:!0})]}),s&&r.jsxs("button",{onClick:s,className:"modal-manage-btn",title:"Manage Procedures",children:[r.jsx(ng,{size:16}),r.jsx("span",{children:"Manage"})]})]}),r.jsx("div",{className:"tooth-modal-list",children:g.length===0?r.jsx("div",{className:"tooth-modal-empty",children:"No procedures found."}):r.jsx("div",{className:"flex-col",children:g.map(x=>r.jsxs("button",{onClick:()=>a(x),className:"tooth-modal-item",children:[r.jsxs("div",{children:[r.jsx("div",{className:"tooth-modal-item-name",children:x.name}),r.jsx("div",{className:"tooth-modal-item-type",children:x.type})]}),r.jsxs("div",{className:"tooth-modal-item-cost-group",children:[r.jsxs("span",{children:["",x.cost]}),r.jsx(Vn,{size:16})]})]},x.id))})})]}),u==="history"&&r.jsx("div",{className:"tooth-modal-list",children:n.map((x,b)=>r.jsxs("div",{className:"tooth-modal-history-item",children:[r.jsx("div",{className:"tooth-modal-history-name",children:x.name}),r.jsxs("div",{className:"tooth-modal-history-date",children:[x.date," ",x.isPast?"(Past)":"(Current)"]})]},b))})]})})},VLe=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var Ne,ee,ge,de,ae,ne,se,je,Ee;const[i,s]=v.useState(null),[o,l]=v.useState([]),[c,u]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(!1),[b,j]=v.useState("cash"),[w,_]=v.useState(""),[T,C]=v.useState(""),[A,k]=v.useState(""),[P,I]=v.useState(""),[R,q]=v.useState(""),[U,F]=v.useState(!1),[B,V]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[W,G]=v.useState(0),z=v.useRef(!1),[Y,Q]=v.useState(null),[K,$]=v.useState(!1),ie=()=>{const J=B.map(me=>me.method),ye=["cash","upi","card","no_cash_insurance","credit"].filter(me=>!J.includes(me));ye.length>0&&V([...B,{id:crypto.randomUUID(),method:ye[0],amount:0}])},xe=J=>{B.length>2&&V(B.filter(ye=>ye.id!==J))},X=(J,ye,me)=>{V(he=>{const De=he.map(nt=>nt.id===J?ye==="method"?{...nt,method:me}:{...nt,amount:Math.max(0,me)}:nt);if(ye==="amount"&&De.length===2){const Fe=De.findIndex(wt=>wt.id===J)===0?1:0,Ge=Math.max(0,me),it=Te-Ge;De[Fe]={...De[Fe],amount:Math.max(0,it)}}return De})},Ie=J=>{const ye=B.filter(he=>he.id!==J).reduce((he,De)=>he+De.amount,0),me=Math.max(0,Te-ye);X(J,"amount",me)},$e=v.useMemo(()=>B.reduce((J,ye)=>J+ye.amount,0),[B]),Be=J=>{const ye=Math.max(0,Math.min(100,isNaN(J)?0:J));z.current=!0,G(ye);const me=o.map(he=>({...he,discount_percentage:ye}));l(me)},Le=(J,ye)=>{const me=[...o];me[J].discount_percentage=isNaN(ye)?0:ye,l(me)};v.useEffect(()=>{if(z.current){z.current=!1;return}const J=o.reduce((he,De)=>he+(De.price??0),0);if(J===0){G(0);return}const me=o.reduce((he,De)=>{const Fe=(De.price??0)*((De.discount_percentage??0)/100);return he+Fe},0)/J*100;G(he=>Math.abs(he-me)>.01?me:he)},[o]);const ce=async()=>{var J,ye;if(!i)return p("No record data available to bill."),null;if(o.length===0)return p("Cannot bill an empty procedure list."),null;x(!0),p(null);try{const me=o.map(we=>{const Qe=we.price,Xe=Qe*((we.discount_percentage??0)/100),ut=Qe-Xe;return{name:we.name,price:we.price,quantity:1,total:ut,item_id:we.id||`proc_${Date.now()}`,type:"service",discount_percentage:we.discount_percentage??0}}),he=U?((J=B[0])==null?void 0:J.method)||"cash":b,De=U?B.map(we=>({method:we.method,amount:we.amount})):void 0,nt={patientId:i.patientId.id,items:me,amount:Te,paymentMode:he,splitPayments:De,type:"dental",related_id:i.id,status:"paid",discountPercentage:W},Fe=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)}),Ge=await Fe.json();if(!Fe.ok||!Ge.id)throw new Error(Ge.message||"Failed to create bill.");(await le(`/api/dental/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:Ge.id})})).ok||console.error("Failed to update dental record status"),s(we=>we?{...we,status:"billed",billId:Ge.id}:null);const wt=U?((ye=B.find(we=>we.method==="credit"))==null?void 0:ye.amount)||0:b==="credit"?Te:0;if(wt>0)try{await le(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:wt,related_bill_id:Ge.id,notes:`Dental Bill #${Ge.id}${U?" (Split Payment - Credit portion)":""}`})})}catch(we){console.error("Failed to create debt entry:",we)}return a&&a(),Ge.id}catch(me){return console.error("Billing process failed:",me),p(me.message||"Failed to create bill."),null}finally{x(!1)}},Se=()=>{window.print()},Ve=async()=>{await ce()&&setTimeout(()=>window.print(),800)};v.useEffect(()=>{t&&n&&(async()=>{u(!0);try{const[ye,me]=await Promise.all([le(`/api/dental/${n}`),le("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!ye.ok)throw new Error("Failed to fetch dental record");const he=await ye.json(),De={...he,patientId:he.Patient||he.patientId};if(s(De),me.ok){const Ge=await me.json();C(Ge.upi_id||""),k(Ge.name||""),I(Ge.address||""),q(Ge.notes||"")}const Fe=(De.selected_procedures||De.selectedProcedures||[]).map(Ge=>({...Ge,price:Ge.cost,discount_percentage:0}));l(Fe)}catch(ye){console.error("Failed to fetch data:",ye),p(ye.message)}finally{u(!1)}})()},[t,n]);const Ae=v.useMemo(()=>o.reduce((J,ye)=>J+(ye.price??0),0),[o]),ue=v.useMemo(()=>o.reduce((J,ye)=>{const he=(ye.price??0)*(ye.discount_percentage??0)/100;return J+he},0),[o]),Te=v.useMemo(()=>Ae-ue,[Ae,ue]),oe=v.useMemo(()=>Te-$e,[Te,$e]),be=v.useMemo(()=>Math.abs(oe)<.01,[oe]);v.useEffect(()=>{if(U&&B.length>=1&&$e===0){const J=[...B];J[0].amount=Te,V(J)}},[U,Te]),v.useEffect(()=>{if(Te>0&&T){const J=`upi://pay?pa=${T}&pn=${encodeURIComponent(A)}&am=${Te.toFixed(2)}&cu=INR`;_(J)}else _("")},[Te,T,A]);const _e=v.useMemo(()=>U?B.some(J=>J.method==="credit"):b==="credit",[U,B,b]);return v.useEffect(()=>{(async()=>{var ye;if(_e&&((ye=i==null?void 0:i.patientId)!=null&&ye.id)){$(!0);try{const me=await le(`/api/patient-debts/${i.patientId.id}/balance`);if(me.ok){const he=await me.json();Q(he.netDebt||0)}else Q(0)}catch{Q(0)}finally{$(!1)}}})()},[_e,(Ne=i==null?void 0:i.patientId)==null?void 0:Ne.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Dental Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Rt,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:c?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:30,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3].map(J=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:20,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:90,height:20})})]},J))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:28}),r.jsx(te,{width:100,height:28})]})]})]})})]})})}):f?r.jsxs("div",{className:"error-message-box",children:["Error: ",f]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:A||"Clinic Name"}),(P||R)&&r.jsxs("div",{className:"clinic-details-print",children:[P&&r.jsx("span",{className:"small-text clinic-address",children:P}),R&&r.jsx("span",{className:"small-text clinic-notes",children:R})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",((ee=i.patientId)==null?void 0:ee.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((ge=i.patientId)==null?void 0:ge.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",((de=i.patientId)==null?void 0:de.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((ae=i.patientId)==null?void 0:ae.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Xr,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"dental-chart-section-modal",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Dental Chart"})}),r.jsx("div",{className:"chart-wrapper-modal",children:r.jsx($G,{selectedTeeth:[],onToothClick:()=>{},toothConditions:(()=>{const J={};return i.teeth&&i.teeth.forEach(ye=>{ye.procedures.forEach(me=>{var De,nt;const he=((De=i.selected_procedures)==null?void 0:De.find(Fe=>Fe.id===me))||((nt=i.selectedProcedures)==null?void 0:nt.find(Fe=>Fe.id===me));if(he&&he.type&&he.type!=="general"){J[ye.toothNumber]||(J[ye.toothNumber]=[]);const Fe=`condition-${he.type}`;J[ye.toothNumber].includes(Fe)||J[ye.toothNumber].push(Fe)}})}),J})(),toothDetails:(()=>{const J={};return i.teeth&&i.teeth.forEach(ye=>{J[ye.toothNumber]||(J[ye.toothNumber]=[]),ye.procedures.forEach(me=>{var De,nt;const he=((De=i.selected_procedures)==null?void 0:De.find(Fe=>Fe.id===me))||((nt=i.selectedProcedures)==null?void 0:nt.find(Fe=>Fe.id===me));he&&J[ye.toothNumber].push({name:he.name,date:new Date(i.date||i.createdAt).toLocaleDateString()})})}),J})()})})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),o.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:o.map((J,ye)=>{const me=J.price??0,he=me*(J.discount_percentage??0)/100,De=me-he;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:J.name}),r.jsx("td",{children:J.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:J.discount_percentage===0?"":J.discount_percentage,onChange:nt=>Le(ye,parseFloat(nt.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:De.toFixed(2)})]},ye)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",W.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ue.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Te.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"12px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px"},children:"Payment Details:"}),U?r.jsx("div",{className:"split-payment-details-print",children:B.map(J=>r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:J.method.toUpperCase()}),r.jsxs("span",{children:["",J.amount.toFixed(2)]})]},J.id))}):r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Mode"}),r.jsx("span",{children:b.toUpperCase()})]})]}),(b==="credit"||U&&B.some(J=>J.method==="credit"))&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px",color:"#e53e3e"},children:"Credit/Debt Information:"}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Credit Amount"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",U?(((ne=B.find(J=>J.method==="credit"))==null?void 0:ne.amount)||0).toFixed(2):Te.toFixed(2)]})]}),(Y??0)>0&&r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(Y??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px",fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((Y??0)+(U?((se=B.find(J=>J.method==="credit"))==null?void 0:se.amount)||0:Te)).toFixed(2)]})]})]})]}),w&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(U&&B.some(J=>J.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:w,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:W===0?"":W,onChange:J=>Be(parseFloat(J.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:g||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Te.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:w?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:w,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${U?"active":""}`,onClick:()=>F(!U),disabled:g||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:U?"2px solid #4facfe":"1px solid #ddd",background:U?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:U?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:U?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(qo,{size:14}),"Split Pay"]})]}),U?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(qo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",Te.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:B.map((J,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:J.method,onChange:me=>X(J.id,"method",me.target.value),className:`split-payment-select ${J.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:J.amount===0?"":J.amount,onChange:me=>X(J.id,"amount",parseFloat(me.target.value)||0),placeholder:"0",className:`split-payment-input ${J.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed"})]}),B.length>2&&r.jsx("button",{type:"button",onClick:()=>Ie(J.id),className:"split-payment-btn split-payment-btn-fill",disabled:g||i.status==="billed",children:"Fill"}),B.length>2&&r.jsx("button",{type:"button",onClick:()=>xe(J.id),className:"split-payment-btn split-payment-btn-remove",disabled:g||i.status==="billed",children:r.jsx(Wn,{size:12})})]},J.id))}),B.length<5&&r.jsxs("button",{type:"button",onClick:ie,className:"split-payment-add-btn",disabled:g||i.status==="billed",children:[r.jsx(Vn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",$e.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(oe)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(oe)<.01?"":oe>0?"":"",Math.abs(oe)<.01?"Balanced":oe>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(oe).toFixed(2)]})]}),!be&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",Te.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:J=>j(J.target.value),className:"payment-mode-select",disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),_e&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),K?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:Y&&Y>0?"#dc3545":"#28a745"},children:["",(Y||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:U?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(U?((je=B.find(J=>J.method==="credit"))==null?void 0:je.amount)||0:Te).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((Y||0)+(U?((Ee=B.find(J=>J.method==="credit"))==null?void 0:Ee.amount)||0:Te)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Se,className:"secondary-button print-preview-button no-print",disabled:g,children:"Print Preview"}),r.jsx("button",{onClick:Ve,className:"primary-button",disabled:g||U&&!be,children:g?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Ms,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:Se,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},Xz=/^\+?[0-9\s\-().]{7,20}$/,HLe=/^[a-zA-Z\s'-]{2,}$/,GLe=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[u,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState([]),[_,T]=v.useState(!0),[C,A]=v.useState(()=>{const me=localStorage.getItem("dentalNumberingSystem");return me==="fdi"||me==="universal"?me:"fdi"});v.useEffect(()=>{localStorage.setItem("dentalNumberingSystem",C)},[C]);const k=Br();v.useEffect(()=>{k.state&&k.state.patient&&Te(k.state.patient)},[k.state]);const[P,I]=v.useState([]),[R,q]=v.useState([]),[U,F]=v.useState({}),[B,V]=v.useState(""),[W,G]=v.useState(!1),[z,Y]=v.useState("plan"),[Q,K]=v.useState([]),[$,ie]=v.useState([]),[xe,X]=v.useState(!1),[Ie,$e]=v.useState(!1),[Be,Le]=v.useState(null);v.useEffect(()=>{Se(),ce()},[]);const ce=async()=>{try{const me=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),he=await le(`/api/patients?${me.toString()}`);if(he.ok){const De=await he.json();w(De.patients||[])}}catch(me){console.error("Error fetching recent patients",me)}finally{T(!1)}},Se=async()=>{try{const me=await le("/api/dental/procedures");if(me.ok){const he=await me.json();ie(he)}}catch(me){console.error("Error fetching procedures",me)}};v.useEffect(()=>{(async()=>{if(!l){K([]),Le(null),V(""),q([]),F({}),I([]);return}try{const he=await le(`/api/dental/patient/${l.id}`);if(he.ok){const De=await he.json();K(De);const nt=new Date().toDateString(),Fe=De.find(Ge=>Ge.status==="draft"&&new Date(Ge.date||Ge.createdAt||Date.now()).toDateString()===nt);if(Fe){Le(Fe.id),V(Fe.notes||"");const Ge=Fe.selected_procedures.filter(we=>!Fe.teeth.some(Qe=>Qe.procedures.includes(we.id)));q(Ge.map(we=>({instanceId:crypto.randomUUID(),procedureId:we.id,name:we.name,price:we.cost,type:we.type})));const it={},wt=[];Fe.teeth.forEach(we=>{const Qe=we.procedures.map(Xe=>{const ut=Fe.selected_procedures.find(Ct=>Ct.id===Xe)||$.find(Ct=>Ct.id===Xe);return{instanceId:crypto.randomUUID(),procedureId:Xe,name:ut?ut.name:Xe,price:ut?ut.cost:0,type:ut?ut.type:"general"}});Qe.length>0&&(it[we.toothNumber]=Qe,wt.push(we.toothNumber))}),F(it),I(wt)}else Le(null),V(""),q([]),F({}),I([])}}catch(he){console.error("Error fetching history",he)}})()},[l,$]);const Ve=v.useMemo(()=>$l(async me=>{if(!me.trim()||me.length<2){i([]),o(!1);return}o(!0);try{const he=await le(`/api/patients?search=${encodeURIComponent(me)}&limit=10`);if(he.ok){const De=await he.json();i(De.patients||[])}}catch(he){console.error("Search error:",he)}finally{o(!1)}},300),[]);v.useEffect(()=>{Ve(e)},[e,Ve]);const Ae=me=>{const he=me.target.value;n(he),g(Xz.test(he)),b(HLe.test(he)&&!Xz.test(he))},ue=async me=>{if(!(!e||me==="phone"&&!p||me==="name"&&!x)){o(!0);try{const De=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:me==="name"?e:"direct dental",phone:me==="phone"?e:null,age:null,gender:null,token:null})});if(De.ok){const nt=await De.json();Te({id:nt.id,name:nt.name,token:nt.token??null,age:nt.age??null,gender:nt.gender??null,phone:nt.phone})}else alert("Failed to create patient")}catch(he){console.error("Error creating patient:",he),alert("Error creating patient")}finally{o(!1)}}},Te=me=>{c(me),n(""),i([])},oe=()=>{c(null),I([]),q([]),F({}),V("")},be=async me=>{if(!l)return;const he=await le(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)});if(he.ok)await he.json(),c(De=>De?{...De,...me}:null);else throw new Error("Failed to update")},[_e,Ne]=v.useState(null),ee=me=>{Ne(me)},ge=me=>{if(!_e)return;const he={instanceId:crypto.randomUUID(),procedureId:me.id,name:me.name,price:me.cost,type:me.type};F(De=>{const nt=De[_e]||[];return{...De,[_e]:[...nt,he]}}),I(De=>De.includes(_e)?De:[...De,_e]),Ne(null)},de=()=>{const me={},he={},De=(Ge,it)=>{me[Ge]||(me[Ge]=[]);const wt=`condition-${it}`;me[Ge].includes(wt)||me[Ge].push(wt)},nt=(Ge,it)=>{he[Ge]||(he[Ge]=[]),he[Ge].push(it)};return[...Q].sort((Ge,it)=>new Date(Ge.date).getTime()-new Date(it.date).getTime()).forEach(Ge=>{Ge.teeth&&Array.isArray(Ge.teeth)&&Ge.teeth.forEach(it=>{it.procedures.forEach(wt=>{var Qe;let we=(Qe=Ge.selected_procedures)==null?void 0:Qe.find(Xe=>Xe.id===wt);we||(we=$.find(Xe=>Xe.id===wt)),we&&we.type!=="general"?(De(it.toothNumber,we.type),nt(it.toothNumber,{name:we.name,date:new Date(Ge.date||Ge.createdAt||0).toLocaleDateString(),recordId:Ge.id,isPast:!0})):wt&&nt(it.toothNumber,{name:`Procedure: ${wt}`,date:new Date(Ge.date||Ge.createdAt||0).toLocaleDateString(),recordId:Ge.id,isPast:!0})})})}),Object.keys(U).forEach(Ge=>{const it=parseInt(Ge),wt=U[it];wt&&wt.length>0&&wt.forEach(we=>{we.type!=="general"&&(De(it,we.type),nt(it,{name:we.name,date:"Current",isPast:!1}))})}),{conditions:me,details:he}},{conditions:ae,details:ne}=v.useMemo(()=>de(),[Q,U,$]),se=me=>{const he=Q.find(Ge=>Ge.id===me);if(!he)return;V(he.notes||"");const De=he.selected_procedures.filter(Ge=>!he.teeth.some(it=>it.procedures.includes(Ge.id)));q(De.map(Ge=>({instanceId:crypto.randomUUID(),procedureId:Ge.id,name:Ge.name,price:Ge.cost,type:Ge.type})));const nt={},Fe=[];he.teeth.forEach(Ge=>{const it=Ge.procedures.map(wt=>{const we=he.selected_procedures.find(Qe=>Qe.id===wt)||$.find(Qe=>Qe.id===wt);return{instanceId:crypto.randomUUID(),procedureId:wt,name:we?we.name:wt,price:we?we.cost:0,type:we?we.type:"general"}});it.length>0&&(nt[Ge.toothNumber]=it,Fe.push(Ge.toothNumber))}),F(nt),I(Fe),Y("plan")},je=(me,he)=>{he?(F(De=>{const nt={...De};return nt[he]=(De[he]||[]).filter(Fe=>Fe.instanceId!==me),nt[he].length===0&&delete nt[he],nt}),I(De=>De)):q(De=>De.filter(nt=>nt.instanceId!==me))},Ee=(me,he,De)=>{De?F(nt=>({...nt,[De]:(nt[De]||[]).map(Fe=>Fe.instanceId===me?{...Fe,price:he}:Fe)})):q(nt=>nt.map(Fe=>Fe.instanceId===me?{...Fe,price:he}:Fe))},J=()=>{window.print()},ye=async(me=!0)=>{var he;if(l){G(!0);try{const nt=[...R,...Object.values(U).flat()].map(we=>({id:we.procedureId,name:we.name,cost:we.price,type:we.type})),Ge=Object.keys(U).map(Number).map(we=>({toothNumber:we,procedures:(U[we]||[]).map(Qe=>Qe.procedureId),notes:B})),it={patientId:l.id,teeth:Ge,selectedProcedures:nt,notes:B};let wt;if(Be?((he=Q.find(Qe=>Qe.id===Be))==null?void 0:he.status)==="draft"?wt=await le(`/api/dental/${Be}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await le("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await le("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}),wt.ok){const we=await wt.json();Le(we.id);const Qe=await le(`/api/dental/patient/${l.id}`);if(Qe.ok){const Xe=await Qe.json();K(Xe)}me?$e(!0):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save dental record.")}catch(De){console.error(De),alert("Error saving record.")}finally{G(!1)}}};return r.jsxs("div",{className:"dental-page-container printable-section",children:[r.jsxs("header",{className:"dental-header",children:[r.jsxs("div",{className:"dental-title-group",children:[r.jsx(Xr,{className:"dental-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"dental-title",children:"Dental Report"}),r.jsx("p",{className:"dental-subtitle",children:"Create new dental records and bills"})]}),r.jsxs("div",{className:"numbering-toggle",style:{marginLeft:"auto",marginRight:"16px",display:"flex",gap:"4px",background:"var(--dp-bg-sec)",padding:"4px",borderRadius:"8px"},children:[r.jsx("button",{onClick:()=>A("universal"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="universal"?"var(--dp-card-bg)":"transparent",boxShadow:C==="universal"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="universal"?"var(--dp-text)":"var(--dp-text-sec)"},children:"Universal"}),r.jsx("button",{onClick:()=>A("fdi"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="fdi"?"var(--dp-card-bg)":"transparent",boxShadow:C==="fdi"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="fdi"?"var(--dp-text)":"var(--dp-text-sec)"},children:"FDI"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(Os,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:oe,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Rt,{size:16})})]}),r.jsxs("button",{onClick:()=>X(!0),className:"header-manage-procs-btn no-print",title:"Manage Dental Procedures",children:[r.jsx(ng,{size:16}),r.jsx("span",{children:"Manage Procedures"})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(En,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"dental-search-input header-input",value:e,onChange:Ae}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(me=>r.jsxs("div",{onClick:()=>Te(me),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:me.name}),r.jsxs("div",{className:"patient-meta",children:[me.age," yrs / ",me.gender,"  ",me.phone]})]}),r.jsx(Yn,{size:16,color:"var(--dp-text-sec)"})]},me.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>ue(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"dental-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container",children:[!l&&r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--dp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"dental-search-input",value:e,onChange:Ae,autoFocus:!0}),s&&r.jsx("div",{className:"search-spinner"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(me=>r.jsxs("div",{onClick:()=>Te(me),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:me.name}),r.jsxs("div",{className:"patient-meta",children:[me.age," yrs / ",me.gender,"  ",me.phone]})]}),r.jsx(Yn,{size:18,color:"var(--dp-text-sec)"})]},me.id))})]}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{style:{color:"var(--dp-text-sec)",marginBottom:"15px"},children:['No patients found matching "',e,'".']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:(p||x)&&r.jsxs("button",{type:"button",onClick:()=>ue(p?"phone":"name"),className:"register-new-btn",style:{backgroundColor:"var(--dp-card-bg)",border:"1px solid var(--dp-primary)",padding:"8px 16px",borderRadius:"8px"},children:['Create "',e,'"']})})]}),!l&&r.jsx("div",{style:{marginTop:"32px"},children:r.jsx("button",{onClick:()=>X(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage Procedures"})}),!l&&(_||j.length>0)&&r.jsxs("div",{className:"recent-registered-section",children:[r.jsx("div",{className:"recent-registered-label",children:"Recent Patients"}),r.jsx("div",{className:"recent-list",children:_?[1,2,3].map(me=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(te,{width:100,height:18}),r.jsx(te,{width:30,height:20})]}),r.jsx("div",{className:"recent-info",children:r.jsx(te,{width:80,height:14})})]},me)):j.map(me=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>Te(me),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:me.name||"New Patient"}),me.token&&r.jsxs("span",{className:"recent-token",children:["#",me.token]})]}),r.jsxs("div",{className:"recent-info",children:[me.age?`${me.age} yrs`:"",me.age&&me.gender?" / ":"",me.gender||""]})]},me.id))})]})]}),l&&r.jsx("div",{className:"dental-workspace",children:r.jsxs("div",{className:"dental-grid",children:[r.jsxs("div",{className:"chart-section",children:[r.jsx("div",{className:"dental-card chart-card-scroll",children:r.jsx($G,{selectedTeeth:P,toothConditions:ae,toothDetails:ne,onToothClick:ee,onEditPastRecord:se,onPrint:J,numberingSystem:C})}),r.jsxs("div",{className:"dental-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("h4",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>ye(!1),disabled:W,title:"Save notes and procedures without billing",children:[r.jsx(Bi,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:B,onChange:me=>V(me.target.value)})]})]}),r.jsx("div",{className:"dental-card procedures-section",children:r.jsxs("div",{className:"treatment-plan-container",style:{borderTop:"none"},children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{onClick:()=>Y("plan"),className:z==="plan"?"active":"",children:"Treatment Plan"}),r.jsx("button",{onClick:()=>Y("history"),className:z==="history"?"active":"",children:"Visit History"})]}),r.jsx("div",{className:"treatment-plan-list custom-scrollbar",children:z==="plan"?r.jsx(r.Fragment,{children:R.length===0&&Object.keys(U).length===0?r.jsx("div",{className:"no-print",style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"Select a tooth to add procedures."}):r.jsxs(r.Fragment,{children:[R.length>0&&r.jsxs("div",{className:"plan-group",children:[r.jsx("h4",{children:"General"}),R.map(me=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:me.name,children:me.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:me.price,onChange:he=>Ee(me.instanceId,parseFloat(he.target.value)||0),className:"cost-input"}),r.jsx("button",{onClick:()=>je(me.instanceId),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Rt,{size:14})})]})]},me.instanceId))]}),Object.entries(U).map(([me,he])=>he.length===0?null:r.jsxs("div",{className:"plan-group",children:[r.jsxs("h4",{children:["Tooth ",wb(parseInt(me),C)]}),he.map(De=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:De.name,children:De.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:De.price,onChange:nt=>Ee(De.instanceId,parseFloat(nt.target.value)||0,parseInt(me)),className:"cost-input"}),r.jsx("button",{onClick:()=>je(De.instanceId,parseInt(me)),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Rt,{size:14})})]})]},De.instanceId))]},me))]})}):r.jsx("div",{className:"history-list",children:Q.length===0?r.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"No past visits found."}):Q.map(me=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(me.date).toLocaleDateString()}),r.jsx("span",{className:"record-status",children:me.status})]}),r.jsxs("div",{className:"history-record-body",children:[me.teeth.map(he=>r.jsxs("div",{className:"history-tooth-group",children:[r.jsxs("strong",{children:["Tooth ",wb(he.toothNumber,C),":"]})," ",he.procedures.map(De=>{const nt=me.selected_procedures.find(Fe=>Fe.id===De)||$.find(Fe=>Fe.id===De);return nt?nt.name:De}).join(", ")]},he.toothNumber)),me.notes&&r.jsx("p",{className:"history-notes",children:r.jsxs("em",{children:["Notes: ",me.notes]})}),me.status==="billed"&&r.jsx("div",{className:"history-record-actions mt-3",children:r.jsxs("button",{onClick:()=>{Le(me.id),$e(!0)},className:"view-bill-btn",children:[r.jsx(Xr,{size:14})," View Bill"]})})]})]},me.id))})}),r.jsx("div",{className:"action-footer",children:r.jsx("button",{onClick:()=>ye(!0),className:"save-btn",disabled:W||R.length===0&&Object.keys(U).length===0,children:W?"Saving...":"Save & Bill"})})]})})]})}),u&&l&&r.jsx(pG,{patient:l,onClose:()=>f(!1),onSave:be}),xe&&r.jsx(qLe,{onClose:()=>X(!1),onUpdate:Se}),_e!==null&&r.jsx(ULe,{toothNumber:_e,procedures:$.map(me=>({id:me.id,name:me.name,cost:me.cost,type:me.type})),history:ne[_e]||[],onSelect:ge,onManageProcedures:()=>{Ne(null),X(!0)},onClose:()=>Ne(null),numberingSystem:C}),r.jsx(VLe,{isOpen:Ie,recordId:Be,onClose:()=>{$e(!1),oe()},onBillingComplete:()=>{}})]})},WLe=()=>{var _e,Ne,ee,ge,de;const t=Lt(),e=Br(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,u]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[w,_]=v.useState(""),[T,C]=v.useState(""),[A,k]=v.useState(""),[P,I]=v.useState(""),[R,q]=v.useState(!1),[U,F]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),B=()=>{U.length<5&&F(ae=>[...ae,{id:Date.now().toString(),method:"cash",amount:0}])},V=ae=>{U.length>2&&F(ne=>ne.filter(se=>se.id!==ae))},W=(ae,ne,se)=>{F(je=>{const Ee=je.map(J=>J.id===ae?ne==="method"?{...J,method:se}:{...J,amount:Math.max(0,se)}:J);if(ne==="amount"&&Ee.length===2){const ye=Ee.findIndex(De=>De.id===ae)===0?1:0,me=Math.max(0,se),he=Ve-me;Ee[ye]={...Ee[ye],amount:Math.max(0,he)}}return Ee})},G=(ae,ne)=>{const se=U.filter(Ee=>Ee.id!==ae).reduce((Ee,J)=>Ee+J.amount,0),je=Math.max(0,ne-se);F(Ee=>Ee.map(J=>J.id===ae?{...J,amount:je}:J))},[z,Y]=v.useState(0),Q=v.useRef(!1),[K,$]=v.useState(null),[ie,xe]=v.useState(!1),X=ae=>{const ne=Math.max(0,Math.min(100,isNaN(ae)?0:ae));Q.current=!0,Y(ne);const se=i.map(je=>({...je,discount_percentage:ne}));s(se)},Ie=(ae,ne)=>{const se=[...i];se[ae].discount_percentage=isNaN(ne)?0:ne,s(se)};v.useEffect(()=>{if(Q.current){Q.current=!1;return}const ae=i.reduce((je,Ee)=>je+(Ee.price??0),0);if(ae===0){Y(0);return}const se=i.reduce((je,Ee)=>{const ye=(Ee.price??0)*((Ee.discount_percentage??0)/100);return je+ye},0)/ae*100;Y(je=>Math.abs(je-se)>.01?se:je)},[i]);const $e=async()=>{if(!n)return u("No record data available to bill."),null;if(i.length===0)return u("Cannot bill an empty procedure list."),null;p(!0),u(null);try{const ae=i.map(ye=>{const me=ye.price,he=me*((ye.discount_percentage??0)/100),De=me-he;return{name:ye.name,price:ye.price,quantity:1,total:De,item_id:ye.id||`proc_${Date.now()}`,type:"service",discount_percentage:ye.discount_percentage??0}}),ne={patientId:n.patientId.id,items:ae,amount:Ve,paymentMode:R?"split":g,type:"dental",related_id:n.id,status:"paid",discountPercentage:z};R&&(ne.splitPayments=U.map(ye=>({method:ye.method,amount:ye.amount})));const se=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)}),je=await se.json();if(!se.ok||!je.id)throw new Error(je.message||"Failed to create bill.");(await le(`/api/dental/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:je.id})})).ok||console.error("Failed to update dental record status"),a(ye=>ye?{...ye,status:"billed",billId:je.id}:null);const J=R?U.filter(ye=>ye.method==="credit").reduce((ye,me)=>ye+me.amount,0):g==="credit"?Ve:0;if(J>0)try{await le(`/api/patient-debts/${n.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:J,related_bill_id:je.id,notes:`Dental Bill #${je.id}`})})}catch(ye){console.error("Failed to create debt entry:",ye)}return je.id}catch(ae){return console.error("Billing process failed:",ae),u(ae.message||"Failed to create bill."),null}finally{p(!1)}},Be=()=>{window.print()},Le=async()=>{await $e()&&setTimeout(()=>window.print(),500)};v.useEffect(()=>{const ae=e.pathname.split("/"),ne=ae[ae.length-1];ne?(async()=>{l(!0);try{const[je,Ee]=await Promise.all([le(`/api/dental/${ne}`),le("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!je.ok)throw new Error("Failed to fetch dental record");const J=await je.json(),ye={...J,patientId:J.Patient||J.patientId};if(a(ye),Ee.ok){const De=await Ee.json();_(De.upi_id||""),C(De.name||""),k(De.address||""),I(De.notes||"")}const he=(ye.selected_procedures||ye.selectedProcedures||[]).map(De=>({...De,price:De.cost,discount_percentage:0}));s(he)}catch(je){console.error("Failed to fetch data:",je),u(je.message)}finally{l(!1)}})():(u("No record ID provided."),l(!1))},[e.pathname]);const ce=v.useMemo(()=>i.reduce((ae,ne)=>ae+(ne.price??0),0),[i]),Se=v.useMemo(()=>i.reduce((ae,ne)=>{const je=(ne.price??0)*(ne.discount_percentage??0)/100;return ae+je},0),[i]),Ve=v.useMemo(()=>ce-Se,[ce,Se]),Ae=v.useMemo(()=>U.reduce((ae,ne)=>ae+ne.amount,0),[U]),ue=v.useMemo(()=>Ve-Ae,[Ve,Ae]),Te=v.useMemo(()=>Math.abs(ue)<.01,[ue]),oe=v.useMemo(()=>R?U.some(ae=>ae.method==="credit"&&ae.amount>0):g==="credit",[R,U,g]),be=v.useMemo(()=>R?U.filter(ae=>ae.method==="credit").reduce((ae,ne)=>ae+ne.amount,0):g==="credit"?Ve:0,[R,U,g,Ve]);return v.useEffect(()=>{if(Ve>0&&w){const ae=`upi://pay?pa=${w}&pn=${encodeURIComponent(T)}&am=${Ve.toFixed(2)}&cu=INR`;j(ae)}else j("")},[Ve,w,T]),v.useEffect(()=>{(async()=>{var ne;if(oe&&((ne=n==null?void 0:n.patientId)!=null&&ne.id)){xe(!0);try{const se=await le(`/api/patient-debts/${n.patientId.id}/balance`);if(se.ok){const je=await se.json();$(je.netDebt||0)}else $(0)}catch{$(0)}finally{xe(!1)}}})()},[oe,(_e=n==null?void 0:n.patientId)==null?void 0:_e.id]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(te,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:30,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(ae=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:20,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:90,height:20})})]},ae))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:28}),r.jsx(te,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(te,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T||"Clinic Name"}),(A||P)&&r.jsxs("div",{className:"clinic-details-print",children:[A&&r.jsx("span",{className:"small-text clinic-address",children:A}),P&&r.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",((Ne=n.patientId)==null?void 0:Ne.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((ee=n.patientId)==null?void 0:ee.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date(n.date||n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Dental Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Yn,{size:16})," Patient Name"]})," ",((ge=n.patientId)==null?void 0:ge.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((de=n.patientId)==null?void 0:de.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Xr,{size:16})," Record ID"]})," ",n.id.substring(n.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ia,{size:16})," Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((ae,ne)=>{const se=ae.price??0,je=se*(ae.discount_percentage??0)/100,Ee=se-je;return r.jsxs("tr",{children:[r.jsx("td",{children:ne+1}),r.jsx("td",{children:ae.name}),r.jsx("td",{children:ae.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ae.discount_percentage===0?"":ae.discount_percentage,onChange:J=>Ie(ne,parseFloat(J.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Ee.toFixed(2)})]},ne)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",z.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Se.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ve.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:R?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),R&&U.map((ae,ne)=>ae.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:ae.method==="cash"?"Cash":ae.method==="upi"?"UPI":ae.method==="card"?"Card":ae.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",ae.amount.toFixed(2)]})]},ne))]}),K!==null&&(K>0||oe)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(K??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(K??0).toFixed(2)]})]}),oe&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((K??0)+(oe?be:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:b,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Se.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:z===0?"":z,onChange:ae=>X(parseFloat(ae.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ve.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>q(!R),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:R?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:R?"rgba(79, 172, 254, 0.1)":"transparent",color:R?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),R?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Ve.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:U.map((ae,ne)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ne+1}),r.jsxs("select",{value:ae.method,onChange:se=>W(ae.id,"method",se.target.value),className:`split-payment-select ${ae.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ae.amount||"",onChange:se=>W(ae.id,"amount",parseFloat(se.target.value)||0),className:`split-payment-input ${ae.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),U.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>G(ae.id,Ve),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>V(ae.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},ae.id))}),U.length<5&&r.jsxs("button",{type:"button",onClick:B,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ae.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Te?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Te?"":ue>0?"":"",Te?"Balanced":ue>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ue).toFixed(2)]})]}),!Te&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",Ve.toFixed(2)]})]})]}):r.jsxs("select",{value:g,onChange:ae=>x(ae.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),oe&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),ie?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:K&&K>0?"#dc3545":"#28a745"},children:["",(K||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",be.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((K||0)+be).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:n.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Be,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:Le,className:"primary-button",disabled:f,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Ms,{size:20})," Bill Generated"]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})]}):r.jsx("div",{className:"error-message-box",children:"No record found."})},ED=v.lazy(()=>$N(()=>import("./AddPatientPage-Ci8VKKYC.js"),__vite__mapDeps([2,3]))),Jz=v.lazy(()=>$N(()=>import("./EditComplaintPage-DeqLRp-d.js"),__vite__mapDeps([0,1])));function YLe(){const[t,e]=v.useState(!1),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(!1),f=A=>{a(A),e(!0),A.role==="admin"&&!A.has_seen_tutorial&&u(!0)},p=()=>{e(!1),a(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};v.useEffect(()=>{const A=localStorage.getItem("authToken"),k=localStorage.getItem("currentUser");if(A&&k)try{const P=JSON.parse(k);a(P),e(!0),P.role==="admin"&&!P.has_seen_tutorial&&u(!0)}catch(P){console.error("Error parsing stored user data:",P),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}s(!1)},[]);const{data:g}=gDe(t&&!!n);v.useEffect(()=>{g?l(g):t||l(null)},[g,t]);const[x,b]=v.useState(null),[j,w]=v.useState(!1);v.useEffect(()=>{const A=k=>{k.preventDefault(),b(k),w(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",A),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),w(!1)),()=>{window.removeEventListener("beforeinstallprompt",A)}},[]),v.useEffect(()=>{const A=window.matchMedia("(prefers-color-scheme: dark)"),k=()=>{A.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return k(),A.addEventListener("change",k),()=>{A.removeEventListener("change",k),document.body.classList.remove("dark-mode")}},[]);const _=v.useCallback(async()=>{if(!x){console.log("Install prompt event not available.");return}const A=x;A.prompt();const{outcome:k}=await A.userChoice;console.log(`User response to the install prompt: ${k}`),b(null),w(!1)},[x]),T=async()=>{if(n)try{(await le(`/api/users/${n.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(a(k=>k?{...k,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...n,has_seen_tutorial:!0})),u(!1)):console.error("Failed to update tutorial status on backend.")}catch(A){console.error("Error marking tutorial as seen:",A)}};return i?r.jsx(Pm,{}):r.jsx(oY,{clientId:"277898779560-33obduhn8r758rini4qagetdrupvisri.apps.googleusercontent.com",children:r.jsx($K,{children:r.jsx(LK,{children:r.jsx(FK,{children:r.jsxs(CK,{children:[r.jsx(RK,{children:r.jsxs(km,{children:[r.jsx(yt,{path:"/login",element:t?r.jsx(qt,{to:"/dashboard"}):r.jsx(qDe,{onLoginSuccess:f})}),r.jsx(yt,{path:"/patient-login",element:t?r.jsx(qt,{to:"/dashboard"}):r.jsx(UDe,{onLoginSuccess:f})}),r.jsx(yt,{path:"/patient-dashboard",element:t&&(n==null?void 0:n.role)==="patient"?r.jsx(XDe,{}):r.jsx(qt,{to:"/patient-login"})}),r.jsx(yt,{path:"/patient/:patientId/lab-reports",element:t&&(n==null?void 0:n.role)==="patient"?r.jsx(Hz,{}):r.jsx(qt,{to:"/patient-login"})}),r.jsx(yt,{path:"/patient/:patientId/pharmacy-orders",element:t&&(n==null?void 0:n.role)==="patient"?r.jsx(Uz,{}):r.jsx(qt,{to:"/patient-login"})}),r.jsx(yt,{path:"/patient/:patientId/complaints",element:t&&(n==null?void 0:n.role)==="patient"?r.jsx(Bz,{}):r.jsx(qt,{to:"/patient-login"})}),r.jsx(yt,{path:"/register",element:t?r.jsx(qt,{to:"/dashboard"}):r.jsx(JDe,{})}),r.jsx(yt,{path:"/handle-complaint-url",element:t?r.jsx(CRe,{}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/live-api",element:t?r.jsx(uge,{}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/create-lab-order",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(fG,{currentUser:n})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/manage-admission",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx($M,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/lab/report/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Vz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/lab/enter-report/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Vz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/add-patient",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(v.Suspense,{fallback:r.jsx(Pm,{}),children:r.jsx(ED,{})})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/billing",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(kIe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/edit-complaint/:recordId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(Pm,{}),children:r.jsx(Jz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/edit-complaint/patient/:patientId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(Pm,{}),children:r.jsx(Jz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/edit-pharmacy-order/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(LG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/guide",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(zLe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/clinic-files",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(BM,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/*",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:KLe(n.role,n,le)}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/lab/view-report/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RIe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/lab/search-report",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(LIe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/lab-reports",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Hz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/pharmacy-orders",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Uz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/inventory",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(FG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/patient-debt",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RN,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/inventory/add",element:t&&n?r.jsx(qt,{to:"/dashboard/purchase",replace:!0}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/dental",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(GLe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/medical",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(CG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/dental-billing/:id",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(WLe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/inventory/edit/:id",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/lab-inventory",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(qM,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/complaints",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Bz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/admission-bill/:billId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Gz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/admission-billing",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Gz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/start-subscription/:patientId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(JIe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/start-clinic-subscription",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(nRe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/refill-reminders",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(_Re,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/create-custom-bill",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(hG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/pharmacy-billing/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(u4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/lab-billing/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(d4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/doctor-billing/:queueId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(f4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/custom-tables",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Y4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/custom-tables/:id",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(K4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboards",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Q4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboards/new",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Qz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboards/:id",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Z4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboards/:id/edit",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Qz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/analysis",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(W4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/clinic-hub",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(g4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/files",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(TG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(yt,{path:"*",element:r.jsx(qt,{to:t?"/dashboard":"/login"})})]})}),c&&(n==null?void 0:n.role)==="admin"&&r.jsx(NRe,{onClose:()=>u(!1),onMarkAsSeen:T}),t&&n&&r.jsx(QLe,{user:n}),t&&n&&r.jsx(JPe,{user:n})]})})})})})}const KLe=(t,e,n)=>{switch(t){case"superadmin":return r.jsxs(km,{children:[r.jsx(yt,{index:!0,element:r.jsx(vRe,{})}),r.jsx(yt,{path:"clinic-subscriptions",element:r.jsx(ZIe,{})}),r.jsx(yt,{path:"clinic-subscriptions/add",element:r.jsx(eRe,{})}),r.jsx(yt,{path:"clinic-subscriptions/edit/:id",element:r.jsx(tRe,{})}),r.jsx(yt,{path:"users",element:r.jsx(rRe,{})})," ",r.jsx(yt,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(km,{children:[r.jsx(yt,{index:!0,element:r.jsx(AOe,{})}),r.jsx(yt,{path:"search-patient",element:r.jsx(bv,{})}),r.jsx(yt,{path:"patients",element:r.jsx(CD,{})}),r.jsx(yt,{path:"doctor",element:r.jsx(Yj,{})}),r.jsx(yt,{path:"staff",element:r.jsx(zIe,{fetchWithAuth:n})}),r.jsx(yt,{path:"staff/add",element:r.jsx(NIe,{clinicId:e==null?void 0:e.clinic_id})}),r.jsx(yt,{path:"staff/edit/:id",element:r.jsx(SIe,{})}),r.jsx(yt,{path:"roles",element:r.jsx(e3e,{})}),r.jsx(yt,{path:"patients/add",element:r.jsx(v.Suspense,{fallback:r.jsx(Pm,{}),children:r.jsx(ED,{})})}),r.jsx(yt,{path:"inventory",element:r.jsx(IG,{})}),r.jsx(yt,{path:"inventory/edit/:id",element:r.jsx(RG,{})}),r.jsx(yt,{path:"distributors",element:r.jsx(Wz,{})}),r.jsx(yt,{path:"patient-debts",element:r.jsx(RN,{})})," ",r.jsx(yt,{path:"purchase",element:r.jsx(Yz,{})})," ",r.jsx(yt,{path:"queue",element:r.jsx(Yj,{})}),r.jsx(yt,{path:"subscriptions",element:r.jsx(KIe,{})}),r.jsx(yt,{path:"subscriptions/add",element:r.jsx(QIe,{})}),r.jsx(yt,{path:"subscriptions/edit/:id",element:r.jsx(XIe,{})}),r.jsx(yt,{path:"manage-admission",element:r.jsx($M,{})}),r.jsx(yt,{path:"reception",element:r.jsx(UA,{currentUser:e})}),r.jsx(yt,{path:"lab",element:r.jsx(zz,{})}),r.jsx(yt,{path:"pharmacy-queue",element:r.jsx(WA,{})}),r.jsx(yt,{path:"add-order",element:r.jsx(uw,{})}),r.jsx(yt,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(km,{children:[r.jsx(yt,{index:!0,element:r.jsx(qt,{to:"search-patient",replace:!0})}),r.jsx(yt,{path:"search-patient",element:r.jsx(bv,{})}),r.jsx(yt,{path:"queue",element:r.jsx(Yj,{})}),r.jsx(yt,{path:":patientId",element:r.jsx(Yj,{})}),r.jsx(yt,{path:"add-patient",element:r.jsx(v.Suspense,{fallback:r.jsx(Pm,{}),children:r.jsx(ED,{})})}),r.jsx(yt,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(km,{children:[r.jsx(yt,{index:!0,element:r.jsx(UA,{currentUser:e})}),r.jsx(yt,{path:"reception",element:r.jsx(UA,{currentUser:e})})," ",r.jsx(yt,{path:"all-patients",element:r.jsx(CD,{})}),r.jsx(yt,{path:"search-patient",element:r.jsx(bv,{})}),r.jsx(yt,{path:"clinic-files",element:r.jsx(BM,{})}),r.jsx(yt,{path:"add-order",element:r.jsx(uw,{})}),r.jsx(yt,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(zz,{});case"pharmacy":return r.jsxs(km,{children:[r.jsx(yt,{index:!0,element:r.jsx(WA,{})}),r.jsx(yt,{path:"pharmacy-queue",element:r.jsx(WA,{})})," ",r.jsx(yt,{path:"inventory",element:r.jsx(FG,{})}),r.jsx(yt,{path:"settings",element:r.jsx(wIe,{})}),r.jsx(yt,{path:"add-order",element:r.jsx(uw,{})}),r.jsx(yt,{path:"edit-pharmacy-order/:orderId",element:r.jsx(LG,{})}),r.jsx(yt,{path:"orders/:orderId",element:r.jsx(qIe,{})}),r.jsx(yt,{path:"search-patient-records",element:r.jsx(bv,{})}),r.jsx(yt,{path:"distributors",element:r.jsx(Wz,{})}),r.jsx(yt,{path:"patient-debts",element:r.jsx(RN,{})})," ",r.jsx(yt,{path:"purchase",element:r.jsx(Yz,{})})," ",r.jsx(yt,{path:"*",element:r.jsx(qt,{to:"/dashboard",replace:!0})})]});case"patient":return r.jsx(qt,{to:"/patient-dashboard",replace:!0});default:return r.jsxs("div",{children:["Unknown role (",t,") or dashboard not implemented."]},t)}},Nn=({user:t,onLogout:e,children:n,showInstallPrompt:a,onInstallClick:i,clinicProPlanStatus:s})=>{const o=Lt(),[l,c]=v.useState(!1),[u,f]=v.useState(window.innerWidth<=768),[p,g]=v.useState(null),[x,b]=v.useState(!1);v.useEffect(()=>YE.subscribe(T=>{b(T)}),[]),v.useEffect(()=>{const T=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const C=await le("/api/clinics/settings");if(C.ok){const A=await C.json();g(A.logoUrl)}else console.error("Failed to fetch clinic details for display:",C.statusText),g(null)}catch(C){console.error("Error fetching clinic details for display:",C),g(null)}else g(null)})()},[t==null?void 0:t.clinic_id]);const j=()=>{c(!l)},{toggleCommandBar:w,isOpen:_}=Rc();return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),o("/dashboard")},className:"logo-container",children:r.jsx("img",{src:p||"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("span",{className:"app-title-link",children:"Newtons Ai"}),r.jsxs("span",{className:"user-role-panel",children:["(",(t.role||"user").charAt(0).toUpperCase()+(t.role||"user").slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[a&&r.jsxs("button",{onClick:i,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),r.jsxs("a",{href:"https://store.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"shop-button",title:"Visit Store",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),r.jsx("span",{children:"Shop"})]}),!u&&r.jsxs("button",{onClick:()=>o("/dashboard/guide"),className:"guide-button",title:"User Guide",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),r.jsx("span",{children:"Guide"})]}),s&&(s.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>o("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),!_&&r.jsx("button",{onClick:w,className:"command-bar-button",title:"Search & Commands (Ctrl+K)",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"m21 21-4.3-4.3"})]})}),r.jsx("button",{className:"hamburger-icon",onClick:j,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),x&&r.jsx("div",{className:"global-loading-bar"})]}),r.jsxs("main",{className:"main-content",children:[r.jsx(nOe,{}),n]}),u?r.jsx(eOe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j,roleNavigation:iG}):r.jsx(ZDe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j}),!u&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j}),!u&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j})]})},QLe=({user:t})=>{const{isOpen:e,closeAssistant:n}=qN(),a=Lt(),[i,s]=v.useState(null),[o,l]=v.useState([]);return v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const[u,f]=await Promise.all([le("/api/clinics/settings"),le("/api/staff")]);u.ok&&s(await u.json()),f.ok&&l(await f.json())}catch(u){console.error("Failed to fetch initial AI context",u)}})()},[t.clinic_id]),e?r.jsx("div",{className:"ai-assistant-wrapper",children:r.jsx(sG,{onClose:n,settings:i,staffList:o,onSettingsUpdate:()=>{},onStaffUpdate:()=>{},onHighlight:c=>{c.forEach(u=>{if(u.startsWith("navigate_")){const f=u.replace("navigate_","");a(`/dashboard/analysis?section=${f}`)}else{const f=document.getElementById(u);f&&(f.scrollIntoView({behavior:"smooth",block:"center"}),f.classList.add("ai-highlight-glow"),setTimeout(()=>f.classList.remove("ai-highlight-glow"),2e3))}})}})}):null};vW.createRoot(document.getElementById("root")).render(r.jsx(v.StrictMode,{children:r.jsx(VW,{client:rY,children:r.jsx(YLe,{})})}));export{sn as A,WOe as B,zg as C,ud as D,Fm as E,uo as F,YOe as G,Qa as H,xc as I,Sf as J,En as K,sS as L,fd as M,OI as N,$G as O,Nf as P,Fa as Q,Ce as R,te as S,Wn as T,VN as U,hd as V,QD as W,Rt as X,UN as Y,AI as Z,SRe as _,Kc as a,uq as b,ct as c,Bi as d,ZLe as e,le as f,Hn as g,TRe as h,ia as i,r as j,Vn as k,Yn as l,HD as m,pd as n,FN as o,Rc as p,Wt as q,v as r,$a as s,hs as t,Lt as u,Br as v,Xr as w,Wo as x,dX as y,ZB as z};

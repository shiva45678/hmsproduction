import{j as e,S as a,f as y}from"./index-B0SGsixC.js";import{j as g,u as b,r as n}from"./react-vendor-Cc0P4_ZX.js";import{W as N,Q as w}from"./ui-vendor-CZgqa0n4.js";import"./utils-vendor-azd6ta8e.js";import"./ai-vendor-CB5T-uN5.js";import"./chart-vendor-BcjzKorn.js";const E=()=>{const{patientId:i}=g(),j=b(),[o,h]=n.useState([]),[l,x]=n.useState(!1),[d,m]=n.useState(null),[p,f]=n.useState("");return n.useEffect(()=>{(async()=>{if(!i){m("Patient ID not provided in URL.");return}x(!0),m(null),h([]);try{try{const r=await y(`/api/patients/${i}`);if(r.ok){const u=await r.json();f(u.name)}}catch(r){console.warn("Could not fetch patient name:",r)}console.log(`Fetching pharmacy orders for patient ID: ${i}`);const s=await y(`/api/pharmacy-orders/patient/${i}`);if(!s.ok){const r=await s.json().catch(()=>({}));throw new Error(r.message||`HTTP error! status: ${s.status}`)}const c=await s.json();console.log("Fetched Pharmacy Orders:",c),h(c||[])}catch(s){console.error("Error fetching pharmacy orders:",s),m(`Failed to load pharmacy orders: ${s.message}`)}finally{x(!1)}})()},[i]),e.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[e.jsxs("button",{onClick:()=>j(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(N,{size:16,className:"mr-1"}),"Back"]}),e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[e.jsx(w,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",p&&`for ${p}`]}),e.jsx("div",{})," "]}),l&&e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx(a,{width:150,height:20}),e.jsx(a,{width:100,height:20})]}),e.jsx(a,{width:200,height:20,className:"mb-2"}),e.jsx(a,{width:180,height:20,className:"mb-3"}),e.jsx(a,{width:120,height:24,className:"mb-2"}),e.jsxs("div",{className:"space-y-1 ml-4",children:[e.jsx(a,{width:"80%",height:16}),e.jsx(a,{width:"70%",height:16}),e.jsx(a,{width:"60%",height:16})]})]},t))}),d&&e.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:d}),!l&&o.length===0&&!d&&e.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!l&&o.length>0&&e.jsx("div",{className:"space-y-4",children:o.map(t=>e.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm font-medium capitalize",children:[e.jsx("strong",{children:"Status:"})," ",t.status]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Prescribed By:"})," ",t.prescribedBy||"N/A"]}),t.dispensedBy&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Dispensed By:"})," ",t.dispensedBy]}),e.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),e.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:t.medications.map((s,c)=>e.jsxs("li",{children:[s.name," - Qty: ",s.quantity,s.tabletsPerDay&&` (${s.tabletsPerDay} per day`,s.numberOfDays&&` for ${s.numberOfDays} days)`,!s.tabletsPerDay&&s.numberOfDays&&` (for ${s.numberOfDays} days)`,s.tabletsPerDay&&!s.numberOfDays&&")"]},c))})]},t.id))})]})};export{E as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditComplaintPage-Bw9Fp656.js","assets/EditComplaintPage-CcMBOQ67.css","assets/AddPatientPage-JtwODJpc.js","assets/AddPatientPage-CvaX_3Vg.css"])))=>i.map(i=>d[i]);
var HG=Object.defineProperty;var OM=t=>{throw TypeError(t)};var GG=(t,e,n)=>e in t?HG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yr=(t,e,n)=>GG(t,typeof e!="symbol"?e+"":e,n),U_=(t,e,n)=>e.has(t)||OM("Cannot "+n);var Le=(t,e,n)=>(U_(t,e,"read from private field"),n?n.call(t):e.get(t)),zt=(t,e,n)=>e.has(t)?OM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Et=(t,e,n,a)=>(U_(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n),xn=(t,e,n)=>(U_(t,e,"access private method"),n);var cj=(t,e,n,a)=>({set _(i){Et(t,e,i,n)},get _(){return Le(t,e,a)}});function WG(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(a,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Un(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V_={exports:{}},Fx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DM;function YG(){if(DM)return Fx;DM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:a,key:o,ref:i!==void 0?i:null,props:s}}return Fx.Fragment=e,Fx.jsx=n,Fx.jsxs=n,Fx}var MM;function KG(){return MM||(MM=1,V_.exports=YG()),V_.exports}var r=KG(),H_={exports:{}},pn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IM;function QG(){if(IM)return pn;IM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function S(z,ce,we){this.props=z,this.context=ce,this.refs=j,this.updater=we||x}S.prototype.isReactComponent={},S.prototype.setState=function(z,ce){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ce,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=S.prototype;function T(z,ce,we){this.props=z,this.context=ce,this.refs=j,this.updater=we||x}var C=T.prototype=new _;C.constructor=T,b(C,S.prototype),C.isPureReactComponent=!0;var P=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(z,ce,we,K,Ie,We){return we=We.ref,{$$typeof:t,type:z,key:ce,ref:we!==void 0?we:null,props:We}}function F(z,ce){return I(z.type,ce,void 0,void 0,void 0,z.props)}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function $(z){var ce={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(we){return ce[we]})}var L=/\/+/g;function V(z,ce){return typeof z=="object"&&z!==null&&z.key!=null?$(""+z.key):ce.toString(36)}function H(){}function te(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(H,H):(z.status="pending",z.then(function(ce){z.status==="pending"&&(z.status="fulfilled",z.value=ce)},function(ce){z.status==="pending"&&(z.status="rejected",z.reason=ce)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function X(z,ce,we,K,Ie){var We=typeof z;(We==="undefined"||We==="boolean")&&(z=null);var Re=!1;if(z===null)Re=!0;else switch(We){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(z.$$typeof){case t:case e:Re=!0;break;case f:return Re=z._init,X(Re(z._payload),ce,we,K,Ie)}}if(Re)return Ie=Ie(z),Re=K===""?"."+V(z,0):K,P(Ie)?(we="",Re!=null&&(we=Re.replace(L,"$&/")+"/"),X(Ie,ce,we,"",function(ae){return ae})):Ie!=null&&(B(Ie)&&(Ie=F(Ie,we+(Ie.key==null||z&&z.key===Ie.key?"":(""+Ie.key).replace(L,"$&/")+"/")+Re)),ce.push(Ie)),1;Re=0;var Fe=K===""?".":K+":";if(P(z))for(var ve=0;ve<z.length;ve++)K=z[ve],We=Fe+V(K,ve),Re+=X(K,ce,we,We,Ie);else if(ve=g(z),typeof ve=="function")for(z=ve.call(z),ve=0;!(K=z.next()).done;)K=K.value,We=Fe+V(K,ve++),Re+=X(K,ce,we,We,Ie);else if(We==="object"){if(typeof z.then=="function")return X(te(z),ce,we,K,Ie);throw ce=String(z),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return Re}function q(z,ce,we){if(z==null)return z;var K=[],Ie=0;return X(z,K,"","",function(We){return ce.call(we,We,Ie++)}),K}function Y(z){if(z._status===-1){var ce=z._result;ce=ce(),ce.then(function(we){(z._status===0||z._status===-1)&&(z._status=1,z._result=we)},function(we){(z._status===0||z._status===-1)&&(z._status=2,z._result=we)}),z._status===-1&&(z._status=0,z._result=ce)}if(z._status===1)return z._result.default;throw z._result}var se=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function G(){}return pn.Children={map:q,forEach:function(z,ce,we){q(z,function(){ce.apply(this,arguments)},we)},count:function(z){var ce=0;return q(z,function(){ce++}),ce},toArray:function(z){return q(z,function(ce){return ce})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},pn.Component=S,pn.Fragment=n,pn.Profiler=i,pn.PureComponent=T,pn.StrictMode=a,pn.Suspense=c,pn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,pn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return k.H.useMemoCache(z)}},pn.cache=function(z){return function(){return z.apply(null,arguments)}},pn.cloneElement=function(z,ce,we){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var K=b({},z.props),Ie=z.key,We=void 0;if(ce!=null)for(Re in ce.ref!==void 0&&(We=void 0),ce.key!==void 0&&(Ie=""+ce.key),ce)!O.call(ce,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ce.ref===void 0||(K[Re]=ce[Re]);var Re=arguments.length-2;if(Re===1)K.children=we;else if(1<Re){for(var Fe=Array(Re),ve=0;ve<Re;ve++)Fe[ve]=arguments[ve+2];K.children=Fe}return I(z.type,Ie,void 0,void 0,We,K)},pn.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},pn.createElement=function(z,ce,we){var K,Ie={},We=null;if(ce!=null)for(K in ce.key!==void 0&&(We=""+ce.key),ce)O.call(ce,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Ie[K]=ce[K]);var Re=arguments.length-2;if(Re===1)Ie.children=we;else if(1<Re){for(var Fe=Array(Re),ve=0;ve<Re;ve++)Fe[ve]=arguments[ve+2];Ie.children=Fe}if(z&&z.defaultProps)for(K in Re=z.defaultProps,Re)Ie[K]===void 0&&(Ie[K]=Re[K]);return I(z,We,void 0,void 0,null,Ie)},pn.createRef=function(){return{current:null}},pn.forwardRef=function(z){return{$$typeof:l,render:z}},pn.isValidElement=B,pn.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:Y}},pn.memo=function(z,ce){return{$$typeof:d,type:z,compare:ce===void 0?null:ce}},pn.startTransition=function(z){var ce=k.T,we={};k.T=we;try{var K=z(),Ie=k.S;Ie!==null&&Ie(we,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(G,se)}catch(We){se(We)}finally{k.T=ce}},pn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},pn.use=function(z){return k.H.use(z)},pn.useActionState=function(z,ce,we){return k.H.useActionState(z,ce,we)},pn.useCallback=function(z,ce){return k.H.useCallback(z,ce)},pn.useContext=function(z){return k.H.useContext(z)},pn.useDebugValue=function(){},pn.useDeferredValue=function(z,ce){return k.H.useDeferredValue(z,ce)},pn.useEffect=function(z,ce,we){var K=k.H;if(typeof we=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(z,ce)},pn.useId=function(){return k.H.useId()},pn.useImperativeHandle=function(z,ce,we){return k.H.useImperativeHandle(z,ce,we)},pn.useInsertionEffect=function(z,ce){return k.H.useInsertionEffect(z,ce)},pn.useLayoutEffect=function(z,ce){return k.H.useLayoutEffect(z,ce)},pn.useMemo=function(z,ce){return k.H.useMemo(z,ce)},pn.useOptimistic=function(z,ce){return k.H.useOptimistic(z,ce)},pn.useReducer=function(z,ce,we){return k.H.useReducer(z,ce,we)},pn.useRef=function(z){return k.H.useRef(z)},pn.useState=function(z){return k.H.useState(z)},pn.useSyncExternalStore=function(z,ce,we){return k.H.useSyncExternalStore(z,ce,we)},pn.useTransition=function(){return k.H.useTransition()},pn.version="19.1.0",pn}var RM;function SO(){return RM||(RM=1,H_.exports=QG()),H_.exports}var v=SO();const Ce=Un(v),LM=WG({__proto__:null,default:Ce},[v]);var G_={exports:{}},$x={},W_={exports:{}},Y_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FM;function XG(){return FM||(FM=1,function(t){function e(q,Y){var se=q.length;q.push(Y);e:for(;0<se;){var G=se-1>>>1,z=q[G];if(0<i(z,Y))q[G]=Y,q[se]=z,se=G;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var Y=q[0],se=q.pop();if(se!==Y){q[0]=se;e:for(var G=0,z=q.length,ce=z>>>1;G<ce;){var we=2*(G+1)-1,K=q[we],Ie=we+1,We=q[Ie];if(0>i(K,se))Ie<z&&0>i(We,K)?(q[G]=We,q[Ie]=se,G=Ie):(q[G]=K,q[we]=se,G=we);else if(Ie<z&&0>i(We,se))q[G]=We,q[Ie]=se,G=Ie;else break e}}return Y}function i(q,Y){var se=q.sortIndex-Y.sortIndex;return se!==0?se:q.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,p=null,g=3,x=!1,b=!1,j=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function P(q){for(var Y=n(d);Y!==null;){if(Y.callback===null)a(d);else if(Y.startTime<=q)a(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(d)}}function k(q){if(j=!1,P(q),!b)if(n(c)!==null)b=!0,O||(O=!0,V());else{var Y=n(d);Y!==null&&X(k,Y.startTime-q)}}var O=!1,I=-1,F=5,B=-1;function $(){return S?!0:!(t.unstable_now()-B<F)}function L(){if(S=!1,O){var q=t.unstable_now();B=q;var Y=!0;try{e:{b=!1,j&&(j=!1,T(I),I=-1),x=!0;var se=g;try{t:{for(P(q),p=n(c);p!==null&&!(p.expirationTime>q&&$());){var G=p.callback;if(typeof G=="function"){p.callback=null,g=p.priorityLevel;var z=G(p.expirationTime<=q);if(q=t.unstable_now(),typeof z=="function"){p.callback=z,P(q),Y=!0;break t}p===n(c)&&a(c),P(q)}else a(c);p=n(c)}if(p!==null)Y=!0;else{var ce=n(d);ce!==null&&X(k,ce.startTime-q),Y=!1}}break e}finally{p=null,g=se,x=!1}Y=void 0}}finally{Y?V():O=!1}}}var V;if(typeof C=="function")V=function(){C(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,te=H.port2;H.port1.onmessage=L,V=function(){te.postMessage(null)}}else V=function(){_(L,0)};function X(q,Y){I=_(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var se=g;g=Y;try{return q()}finally{g=se}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=g;g=q;try{return Y()}finally{g=se}},t.unstable_scheduleCallback=function(q,Y,se){var G=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?G+se:G):se=G,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=se+z,q={id:f++,callback:Y,priorityLevel:q,startTime:se,expirationTime:z,sortIndex:-1},se>G?(q.sortIndex=se,e(d,q),n(c)===null&&q===n(d)&&(j?(T(I),I=-1):j=!0,X(k,se-G))):(q.sortIndex=z,e(c,q),b||x||(b=!0,O||(O=!0,V()))),q},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(q){var Y=g;return function(){var se=g;g=Y;try{return q.apply(this,arguments)}finally{g=se}}}}(Y_)),Y_}var $M;function JG(){return $M||($M=1,W_.exports=XG()),W_.exports}var K_={exports:{}},ii={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BM;function ZG(){if(BM)return ii;BM=1;var t=SO();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ii.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,ii.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(c,d,null,f)},ii.flushSync=function(c){var d=o.T,f=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=d,a.p=f,a.d.f()}},ii.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,a.d.C(c,d))},ii.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},ii.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?a.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:x}):f==="script"&&a.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ii.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);a.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&a.d.M(c)},ii.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);a.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ii.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=l(d.as,d.crossOrigin);a.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else a.d.m(c)},ii.requestFormReset=function(c){a.d.r(c)},ii.unstable_batchedUpdates=function(c,d){return c(d)},ii.useFormState=function(c,d,f){return o.H.useFormState(c,d,f)},ii.useFormStatus=function(){return o.H.useHostTransitionStatus()},ii.version="19.1.0",ii}var zM;function QB(){if(zM)return K_.exports;zM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),K_.exports=ZG(),K_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM;function eW(){if(qM)return $x;qM=1;var t=JG(),e=SO(),n=QB();function a(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var h=u,m=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(m=h.return),u=h.return;while(u)}return h.tag===3?m:null}function o(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function l(u){if(s(u)!==u)throw Error(a(188))}function c(u){var h=u.alternate;if(!h){if(h=s(u),h===null)throw Error(a(188));return h!==u?null:u}for(var m=u,N=h;;){var A=m.return;if(A===null)break;var R=A.alternate;if(R===null){if(N=A.return,N!==null){m=N;continue}break}if(A.child===R.child){for(R=A.child;R;){if(R===m)return l(A),u;if(R===N)return l(A),h;R=R.sibling}throw Error(a(188))}if(m.return!==N.return)m=A,N=R;else{for(var J=!1,pe=A.child;pe;){if(pe===m){J=!0,m=A,N=R;break}if(pe===N){J=!0,N=A,m=R;break}pe=pe.sibling}if(!J){for(pe=R.child;pe;){if(pe===m){J=!0,m=R,N=A;break}if(pe===N){J=!0,N=R,m=A;break}pe=pe.sibling}if(!J)throw Error(a(189))}}if(m.alternate!==N)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?u:h}function d(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=d(u),h!==null)return h;u=u.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function V(u){return u===null||typeof u!="object"?null:(u=L&&u[L]||u["@@iterator"],typeof u=="function"?u:null)}var H=Symbol.for("react.client.reference");function te(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===H?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case S:return"Profiler";case j:return"StrictMode";case k:return"Suspense";case O:return"SuspenseList";case B:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case x:return"Portal";case C:return(u.displayName||"Context")+".Provider";case T:return(u._context.displayName||"Context")+".Consumer";case P:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case I:return h=u.displayName||null,h!==null?h:te(u.type)||"Memo";case F:h=u._payload,u=u._init;try{return te(u(h))}catch{}}return null}var X=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},G=[],z=-1;function ce(u){return{current:u}}function we(u){0>z||(u.current=G[z],G[z]=null,z--)}function K(u,h){z++,G[z]=u.current,u.current=h}var Ie=ce(null),We=ce(null),Re=ce(null),Fe=ce(null);function ve(u,h){switch(K(Re,h),K(We,u),K(Ie,null),h.nodeType){case 9:case 11:u=(u=h.documentElement)&&(u=u.namespaceURI)?Er(u):0;break;default:if(u=h.tagName,h=h.namespaceURI)h=Er(h),u=Ir(h,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}we(Ie),K(Ie,u)}function ae(){we(Ie),we(We),we(Re)}function je(u){u.memoizedState!==null&&K(Fe,u);var h=Ie.current,m=Ir(h,u.type);h!==m&&(K(We,u),K(Ie,m))}function ue(u){We.current===u&&(we(Ie),we(We)),Fe.current===u&&(we(Fe),Fu._currentValue=se)}var me=Object.prototype.hasOwnProperty,oe=t.unstable_scheduleCallback,Q=t.unstable_cancelCallback,ie=t.unstable_shouldYield,xe=t.unstable_requestPaint,ee=t.unstable_now,Se=t.unstable_getCurrentPriorityLevel,qe=t.unstable_ImmediatePriority,Ge=t.unstable_UserBlockingPriority,Ne=t.unstable_NormalPriority,ne=t.unstable_LowPriority,de=t.unstable_IdlePriority,Te=t.log,Ee=t.unstable_setDisableYieldValue,W=null,ye=null;function he(u){if(typeof Te=="function"&&Ee(u),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(W,u)}catch{}}var ge=Math.clz32?Math.clz32:Oe,_e=Math.log,ze=Math.LN2;function Oe(u){return u>>>=0,u===0?32:31-(_e(u)/ze|0)|0}var He=256,nt=4194304;function mt(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function De(u,h,m){var N=u.pendingLanes;if(N===0)return 0;var A=0,R=u.suspendedLanes,J=u.pingedLanes;u=u.warmLanes;var pe=N&134217727;return pe!==0?(N=pe&~R,N!==0?A=mt(N):(J&=pe,J!==0?A=mt(J):m||(m=pe&~u,m!==0&&(A=mt(m))))):(pe=N&~R,pe!==0?A=mt(pe):J!==0?A=mt(J):m||(m=N&~u,m!==0&&(A=mt(m)))),A===0?0:h!==0&&h!==A&&(h&R)===0&&(R=A&-A,m=h&-h,R>=m||R===32&&(m&4194048)!==0)?h:A}function Je(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function et(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ut(){var u=He;return He<<=1,(He&4194048)===0&&(He=256),u}function _t(){var u=nt;return nt<<=1,(nt&62914560)===0&&(nt=4194304),u}function vt(u){for(var h=[],m=0;31>m;m++)h.push(u);return h}function ke(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function lt(u,h,m,N,A,R){var J=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var pe=u.entanglements,Pe=u.expirationTimes,Xe=u.hiddenUpdates;for(m=J&~m;0<m;){var ot=31-ge(m),ft=1<<ot;pe[ot]=0,Pe[ot]=-1;var tt=Xe[ot];if(tt!==null)for(Xe[ot]=null,ot=0;ot<tt.length;ot++){var Ze=tt[ot];Ze!==null&&(Ze.lane&=-536870913)}m&=~ft}N!==0&&Tt(u,N,0),R!==0&&A===0&&u.tag!==0&&(u.suspendedLanes|=R&~(J&~h))}function Tt(u,h,m){u.pendingLanes|=h,u.suspendedLanes&=~h;var N=31-ge(h);u.entangledLanes|=h,u.entanglements[N]=u.entanglements[N]|1073741824|m&4194090}function Ue(u,h){var m=u.entangledLanes|=h;for(u=u.entanglements;m;){var N=31-ge(m),A=1<<N;A&h|u[N]&h&&(u[N]|=h),m&=~A}}function jt(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Ct(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Xn(){var u=Y.p;return u!==0?u:(u=window.event,u===void 0?32:rj(u.type))}function br(u,h){var m=Y.p;try{return Y.p=u,h()}finally{Y.p=m}}var Vn=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Vn,wn="__reactProps$"+Vn,la="__reactContainer$"+Vn,Hn="__reactEvents$"+Vn,Ha="__reactListeners$"+Vn,$l="__reactHandles$"+Vn,zo="__reactResources$"+Vn,Bl="__reactMarker$"+Vn;function Sd(u){delete u[Cn],delete u[wn],delete u[Hn],delete u[Ha],delete u[$l]}function qo(u){var h=u[Cn];if(h)return h;for(var m=u.parentNode;m;){if(h=m[la]||m[Cn]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(u=H1(u);u!==null;){if(m=u[Cn])return m;u=H1(u)}return h}u=m,m=u.parentNode}return null}function at(u){if(u=u[Cn]||u[la]){var h=u.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return u}return null}function Nt(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u.stateNode;throw Error(a(33))}function St(u){var h=u[zo];return h||(h=u[zo]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function It(u){u[Bl]=!0}var vn=new Set,On={};function ya(u,h){fi(u,h),fi(u+"Capture",h)}function fi(u,h){for(On[u]=h,u=0;u<h.length;u++)vn.add(h[u])}var ro=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_d={},Cd={};function FS(u){return me.call(Cd,u)?!0:me.call(_d,u)?!1:ro.test(u)?Cd[u]=!0:(_d[u]=!0,!1)}function Lf(u,h,m){if(FS(h))if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(h);return;case"boolean":var N=h.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){u.removeAttribute(h);return}}u.setAttribute(h,""+m)}}function Ff(u,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttribute(h,""+m)}}function Ps(u,h,m,N){if(N===null)u.removeAttribute(m);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(h,m,""+N)}}var $f,Wg;function Yc(u){if($f===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);$f=h&&h[1]||"",Wg=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$f+u+Wg}var Yg=!1;function Kg(u,h){if(!u||Yg)return"";Yg=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(h){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(Ze){var tt=Ze}Reflect.construct(u,[],ft)}else{try{ft.call()}catch(Ze){tt=Ze}u.call(ft.prototype)}}else{try{throw Error()}catch(Ze){tt=Ze}(ft=u())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(Ze){if(Ze&&tt&&typeof Ze.stack=="string")return[Ze.stack,tt.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=N.DetermineComponentFrameRoot(),J=R[0],pe=R[1];if(J&&pe){var Pe=J.split(`
`),Xe=pe.split(`
`);for(A=N=0;N<Pe.length&&!Pe[N].includes("DetermineComponentFrameRoot");)N++;for(;A<Xe.length&&!Xe[A].includes("DetermineComponentFrameRoot");)A++;if(N===Pe.length||A===Xe.length)for(N=Pe.length-1,A=Xe.length-1;1<=N&&0<=A&&Pe[N]!==Xe[A];)A--;for(;1<=N&&0<=A;N--,A--)if(Pe[N]!==Xe[A]){if(N!==1||A!==1)do if(N--,A--,0>A||Pe[N]!==Xe[A]){var ot=`
`+Pe[N].replace(" at new "," at ");return u.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",u.displayName)),ot}while(1<=N&&0<=A);break}}}finally{Yg=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Yc(m):""}function $S(u){switch(u.tag){case 26:case 27:case 5:return Yc(u.type);case 16:return Yc("Lazy");case 13:return Yc("Suspense");case 19:return Yc("SuspenseList");case 0:case 15:return Kg(u.type,!1);case 11:return Kg(u.type.render,!1);case 1:return Kg(u.type,!0);case 31:return Yc("Activity");default:return""}}function Qg(u){try{var h="";do h+=$S(u),u=u.return;while(u);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function pi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Xg(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Jg(u){var h=Xg(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),N=""+u[h];if(!u.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,R=m.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return A.call(this)},set:function(J){N=""+J,R.call(this,J)}}),Object.defineProperty(u,h,{enumerable:m.enumerable}),{getValue:function(){return N},setValue:function(J){N=""+J},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function Bf(u){u._valueTracker||(u._valueTracker=Jg(u))}function Zg(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var m=h.getValue(),N="";return u&&(N=Xg(u)?u.checked?"true":"false":u.value),u=N,u!==m?(h.setValue(u),!0):!1}function zl(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Gb=/[\n"\\]/g;function Li(u){return u.replace(Gb,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function zf(u,h,m,N,A,R,J,pe){u.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?u.type=J:u.removeAttribute("type"),h!=null?J==="number"?(h===0&&u.value===""||u.value!=h)&&(u.value=""+pi(h)):u.value!==""+pi(h)&&(u.value=""+pi(h)):J!=="submit"&&J!=="reset"||u.removeAttribute("value"),h!=null?Td(u,J,pi(h)):m!=null?Td(u,J,pi(m)):N!=null&&u.removeAttribute("value"),A==null&&R!=null&&(u.defaultChecked=!!R),A!=null&&(u.checked=A&&typeof A!="function"&&typeof A!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?u.name=""+pi(pe):u.removeAttribute("name")}function ey(u,h,m,N,A,R,J,pe){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(u.type=R),h!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||h!=null))return;m=m!=null?""+pi(m):"",h=h!=null?""+pi(h):m,pe||h===u.value||(u.value=h),u.defaultValue=h}N=N??A,N=typeof N!="function"&&typeof N!="symbol"&&!!N,u.checked=pe?u.checked:!!N,u.defaultChecked=!!N,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(u.name=J)}function Td(u,h,m){h==="number"&&zl(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function Kc(u,h,m,N){if(u=u.options,h){h={};for(var A=0;A<m.length;A++)h["$"+m[A]]=!0;for(m=0;m<u.length;m++)A=h.hasOwnProperty("$"+u[m].value),u[m].selected!==A&&(u[m].selected=A),A&&N&&(u[m].defaultSelected=!0)}else{for(m=""+pi(m),h=null,A=0;A<u.length;A++){if(u[A].value===m){u[A].selected=!0,N&&(u[A].defaultSelected=!0);return}h!==null||u[A].disabled||(h=u[A])}h!==null&&(h.selected=!0)}}function ty(u,h,m){if(h!=null&&(h=""+pi(h),h!==u.value&&(u.value=h),m==null)){u.defaultValue!==h&&(u.defaultValue=h);return}u.defaultValue=m!=null?""+pi(m):""}function qf(u,h,m,N){if(h==null){if(N!=null){if(m!=null)throw Error(a(92));if(X(N)){if(1<N.length)throw Error(a(93));N=N[0]}m=N}m==null&&(m=""),h=m}m=pi(h),u.defaultValue=m,N=u.textContent,N===m&&N!==""&&N!==null&&(u.value=N)}function Uo(u,h){if(h){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=h;return}}u.textContent=h}var Qc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ny(u,h,m){var N=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?N?u.setProperty(h,""):h==="float"?u.cssFloat="":u[h]="":N?u.setProperty(h,m):typeof m!="number"||m===0||Qc.has(h)?h==="float"?u.cssFloat=m:u[h]=(""+m).trim():u[h]=m+"px"}function ry(u,h,m){if(h!=null&&typeof h!="object")throw Error(a(62));if(u=u.style,m!=null){for(var N in m)!m.hasOwnProperty(N)||h!=null&&h.hasOwnProperty(N)||(N.indexOf("--")===0?u.setProperty(N,""):N==="float"?u.cssFloat="":u[N]="");for(var A in h)N=h[A],h.hasOwnProperty(A)&&m[A]!==N&&ny(u,A,N)}else for(var R in h)h.hasOwnProperty(R)&&ny(u,R,h[R])}function ay(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kd(u){return Yb.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Uf=null;function iy(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Xc=null,Jc=null;function sy(u){var h=at(u);if(h&&(u=h.stateNode)){var m=u[wn]||null;e:switch(u=h.stateNode,h.type){case"input":if(zf(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Li(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var N=m[h];if(N!==u&&N.form===u.form){var A=N[wn]||null;if(!A)throw Error(a(90));zf(N,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(h=0;h<m.length;h++)N=m[h],N.form===u.form&&Zg(N)}break e;case"textarea":ty(u,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Kc(u,!!m.multiple,h,!1)}}}var oy=!1;function Kb(u,h,m){if(oy)return u(h,m);oy=!0;try{var N=u(h);return N}finally{if(oy=!1,(Xc!==null||Jc!==null)&&(Up(),Xc&&(h=Xc,u=Jc,Jc=Xc=null,sy(h),u)))for(h=0;h<u.length;h++)sy(u[h])}}function Ad(u,h){var m=u.stateNode;if(m===null)return null;var N=m[wn]||null;if(N===null)return null;m=N[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(u=u.type,N=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!N;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(a(231,h,typeof m));return m}var ao=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ed=!1;if(ao)try{var Pd={};Object.defineProperty(Pd,"passive",{get:function(){Ed=!0}}),window.addEventListener("test",Pd,Pd),window.removeEventListener("test",Pd,Pd)}catch{Ed=!1}var Vo=null,ly=null,Vf=null;function Qb(){if(Vf)return Vf;var u,h=ly,m=h.length,N,A="value"in Vo?Vo.value:Vo.textContent,R=A.length;for(u=0;u<m&&h[u]===A[u];u++);var J=m-u;for(N=1;N<=J&&h[m-N]===A[R-N];N++);return Vf=A.slice(u,1<N?1-N:void 0)}function ar(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function Jn(){return!0}function Xb(){return!1}function Ga(u){function h(m,N,A,R,J){this._reactName=m,this._targetInst=A,this.type=N,this.nativeEvent=R,this.target=J,this.currentTarget=null;for(var pe in u)u.hasOwnProperty(pe)&&(m=u[pe],this[pe]=m?m(R):R[pe]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Jn:Xb,this.isPropagationStopped=Xb,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),h}var ql={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hf=Ga(ql),Od=f({},ql,{view:0,detail:0}),BS=Ga(Od),Gf,cy,Hr,Zc=f({},Od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Hr&&(Hr&&u.type==="mousemove"?(Gf=u.screenX-Hr.screenX,cy=u.screenY-Hr.screenY):cy=Gf=0,Hr=u),Gf)},movementY:function(u){return"movementY"in u?u.movementY:cy}}),Ho=Ga(Zc),Jb=f({},Zc,{dataTransfer:0}),uy=Ga(Jb),Fi=f({},Od,{relatedTarget:0}),Wf=Ga(Fi),Zb=f({},ql,{animationName:0,elapsedTime:0,pseudoElement:0}),e0=Ga(Zb),t0=f({},ql,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),n0=Ga(t0),r0=f({},ql,{data:0}),Wa=Ga(r0),zS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a0(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=qS[u])?!!h[u]:!1}function Os(){return a0}var Yf=f({},Od,{key:function(u){if(u.key){var h=zS[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=ar(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?$i[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(u){return u.type==="keypress"?ar(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?ar(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),dy=Ga(Yf),Cr=f({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),io=Ga(Cr),hy=f({},Od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),US=Ga(hy),fy=f({},ql,{propertyName:0,elapsedTime:0,pseudoElement:0}),VS=Ga(fy),HS=f({},Zc,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),GS=Ga(HS),i0=f({},ql,{newState:0,oldState:0}),Kf=Ga(i0),eu=[9,13,27,32],py=ao&&"CompositionEvent"in window,tu=null;ao&&"documentMode"in document&&(tu=document.documentMode);var s0=ao&&"TextEvent"in window&&!tu,Qf=ao&&(!py||tu&&8<tu&&11>=tu),Xf=" ",my=!1;function o0(u,h){switch(u){case"keyup":return eu.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jf(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Go=!1;function WS(u,h){switch(u){case"compositionend":return Jf(h);case"keypress":return h.which!==32?null:(my=!0,Xf);case"textInput":return u=h.data,u===Xf&&my?null:u;default:return null}}function l0(u,h){if(Go)return u==="compositionend"||!py&&o0(u,h)?(u=Qb(),Vf=ly=Vo=null,Go=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Qf&&h.locale!=="ko"?null:h.data;default:return null}}var mi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zf(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!mi[u.type]:h==="textarea"}function nu(u,h,m,N){Xc?Jc?Jc.push(N):Jc=[N]:Xc=N,h=Qp(h,"onChange"),0<h.length&&(m=new Hf("onChange","change",null,m,N),u.push({event:m,listeners:h}))}var ru=null,au=null;function YS(u){L1(u,0)}function ep(u){var h=Nt(u);if(Zg(h))return u}function c0(u,h){if(u==="change")return h}var u0=!1;if(ao){var gy;if(ao){var Wo="oninput"in document;if(!Wo){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),Wo=typeof d0.oninput=="function"}gy=Wo}else gy=!1;u0=gy&&(!document.documentMode||9<document.documentMode)}function h0(){ru&&(ru.detachEvent("onpropertychange",tp),au=ru=null)}function tp(u){if(u.propertyName==="value"&&ep(au)){var h=[];nu(h,au,u,iy(u)),Kb(YS,h)}}function f0(u,h,m){u==="focusin"?(h0(),ru=h,au=m,ru.attachEvent("onpropertychange",tp)):u==="focusout"&&h0()}function Yo(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return ep(au)}function np(u,h){if(u==="click")return ep(h)}function KS(u,h){if(u==="input"||u==="change")return ep(h)}function QS(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var gi=typeof Object.is=="function"?Object.is:QS;function Ds(u,h){if(gi(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var m=Object.keys(u),N=Object.keys(h);if(m.length!==N.length)return!1;for(N=0;N<m.length;N++){var A=m[N];if(!me.call(h,A)||!gi(u[A],h[A]))return!1}return!0}function Bi(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function yy(u,h){var m=Bi(u);u=0;for(var N;m;){if(m.nodeType===3){if(N=u+m.textContent.length,u<=h&&N>=h)return{node:m,offset:h-u};u=N}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Bi(m)}}function p0(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?p0(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function m0(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var h=zl(u.document);h instanceof u.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)u=h.contentWindow;else break;h=zl(u.document)}return h}function xy(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}var XS=ao&&"documentMode"in document&&11>=document.documentMode,iu=null,Ko=null,Ve=null,it=!1;function rt(u,h,m){var N=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;it||iu==null||iu!==zl(N)||(N=iu,"selectionStart"in N&&xy(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Ve&&Ds(Ve,N)||(Ve=N,N=Qp(Ko,"onSelect"),0<N.length&&(h=new Hf("onSelect","select",null,h,m),u.push({event:h,listeners:N}),h.target=iu)))}function kt(u,h){var m={};return m[u.toLowerCase()]=h.toLowerCase(),m["Webkit"+u]="webkit"+h,m["Moz"+u]="moz"+h,m}var Kt={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionrun:kt("Transition","TransitionRun"),transitionstart:kt("Transition","TransitionStart"),transitioncancel:kt("Transition","TransitionCancel"),transitionend:kt("Transition","TransitionEnd")},In={},Gr={};ao&&(Gr=document.createElement("div").style,"AnimationEvent"in window||(delete Kt.animationend.animation,delete Kt.animationiteration.animation,delete Kt.animationstart.animation),"TransitionEvent"in window||delete Kt.transitionend.transition);function Rn(u){if(In[u])return In[u];if(!Kt[u])return u;var h=Kt[u],m;for(m in h)if(h.hasOwnProperty(m)&&m in Gr)return In[u]=h[m];return u}var rp=Rn("animationend"),g0=Rn("animationiteration"),yi=Rn("animationstart"),ap=Rn("transitionrun"),JS=Rn("transitionstart"),su=Rn("transitioncancel"),Dd=Rn("transitionend"),Md=new Map,Gn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gn.push("scrollEnd");function cs(u,h){Md.set(u,h),ya(h,[u])}var vy=new WeakMap;function Ra(u,h){if(typeof u=="object"&&u!==null){var m=vy.get(u);return m!==void 0?m:(h={value:u,source:h,stack:Qg(h)},vy.set(u,h),h)}return{value:u,source:h,stack:Qg(h)}}var zi=[],ou=0,by=0;function Ul(){for(var u=ou,h=by=ou=0;h<u;){var m=zi[h];zi[h++]=null;var N=zi[h];zi[h++]=null;var A=zi[h];zi[h++]=null;var R=zi[h];if(zi[h++]=null,N!==null&&A!==null){var J=N.pending;J===null?A.next=A:(A.next=J.next,J.next=A),N.pending=A}R!==0&&Id(m,A,R)}}function us(u,h,m,N){zi[ou++]=u,zi[ou++]=h,zi[ou++]=m,zi[ou++]=N,by|=N,u.lanes|=N,u=u.alternate,u!==null&&(u.lanes|=N)}function lu(u,h,m,N){return us(u,h,m,N),Rd(u)}function Vl(u,h){return us(u,null,null,h),Rd(u)}function Id(u,h,m){u.lanes|=m;var N=u.alternate;N!==null&&(N.lanes|=m);for(var A=!1,R=u.return;R!==null;)R.childLanes|=m,N=R.alternate,N!==null&&(N.childLanes|=m),R.tag===22&&(u=R.stateNode,u===null||u._visibility&1||(A=!0)),u=R,R=R.return;return u.tag===3?(R=u.stateNode,A&&h!==null&&(A=31-ge(m),u=R.hiddenUpdates,N=u[A],N===null?u[A]=[h]:N.push(h),h.lane=m|536870912),R):null}function Rd(u){if(50<Eu)throw Eu=0,px=null,Error(a(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}var Hl={};function ip(u,h,m,N){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ya(u,h,m,N){return new ip(u,h,m,N)}function Gl(u){return u=u.prototype,!(!u||!u.isReactComponent)}function La(u,h){var m=u.alternate;return m===null?(m=Ya(u.tag,h,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=h,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,h=u.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function Ld(u,h){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,h=m.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function sp(u,h,m,N,A,R){var J=0;if(N=u,typeof u=="function")Gl(u)&&(J=1);else if(typeof u=="string")J=A_(u,m,Ie.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case B:return u=Ya(31,m,h,A),u.elementType=B,u.lanes=R,u;case b:return Wl(m.children,A,R,h);case j:J=8,A|=24;break;case S:return u=Ya(12,m,h,A|2),u.elementType=S,u.lanes=R,u;case k:return u=Ya(13,m,h,A),u.elementType=k,u.lanes=R,u;case O:return u=Ya(19,m,h,A),u.elementType=O,u.lanes=R,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _:case C:J=10;break e;case T:J=9;break e;case P:J=11;break e;case I:J=14;break e;case F:J=16,N=null;break e}J=29,m=Error(a(130,u===null?"null":typeof u,"")),N=null}return h=Ya(J,m,h,A),h.elementType=u,h.type=N,h.lanes=R,h}function Wl(u,h,m,N){return u=Ya(7,u,N,h),u.lanes=m,u}function jy(u,h,m){return u=Ya(6,u,null,h),u.lanes=m,u}function cu(u,h,m){return h=Ya(4,u.children!==null?u.children:[],u.key,h),h.lanes=m,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}var so=[],Qo=0,op=null,Fd=0,qi=[],Ui=0,jr=null,Tr=1,oo="";function Yl(u,h){so[Qo++]=Fd,so[Qo++]=op,op=u,Fd=h}function wy(u,h,m){qi[Ui++]=Tr,qi[Ui++]=oo,qi[Ui++]=jr,jr=u;var N=Tr;u=oo;var A=32-ge(N)-1;N&=~(1<<A),m+=1;var R=32-ge(h)+A;if(30<R){var J=A-A%5;R=(N&(1<<J)-1).toString(32),N>>=J,A-=J,Tr=1<<32-ge(h)+A|m<<A|N,oo=R+u}else Tr=1<<R|m<<A|N,oo=u}function Ny(u){u.return!==null&&(Yl(u,1),wy(u,1,0))}function $d(u){for(;u===op;)op=so[--Qo],so[Qo]=null,Fd=so[--Qo],so[Qo]=null;for(;u===jr;)jr=qi[--Ui],qi[Ui]=null,oo=qi[--Ui],qi[Ui]=null,Tr=qi[--Ui],qi[Ui]=null}var Zr=null,kr=null,Nn=!1,ds=null,Ka=!1,uu=Error(a(519));function Vi(u){var h=Error(a(418,""));throw Xo(Ra(h,u)),uu}function y0(u){var h=u.stateNode,m=u.type,N=u.memoizedProps;switch(h[Cn]=u,h[wn]=N,m){case"dialog":jn("cancel",h),jn("close",h);break;case"iframe":case"object":case"embed":jn("load",h);break;case"video":case"audio":for(m=0;m<Th.length;m++)jn(Th[m],h);break;case"source":jn("error",h);break;case"img":case"image":case"link":jn("error",h),jn("load",h);break;case"details":jn("toggle",h);break;case"input":jn("invalid",h),ey(h,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0),Bf(h);break;case"select":jn("invalid",h);break;case"textarea":jn("invalid",h),qf(h,N.value,N.defaultValue,N.children),Bf(h)}m=N.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||N.suppressHydrationWarning===!0||B1(h.textContent,m)?(N.popover!=null&&(jn("beforetoggle",h),jn("toggle",h)),N.onScroll!=null&&jn("scroll",h),N.onScrollEnd!=null&&jn("scrollend",h),N.onClick!=null&&(h.onclick=Xp),h=!0):h=!1,h||Vi(u)}function x0(u){for(Zr=u.return;Zr;)switch(Zr.tag){case 5:case 13:Ka=!1;return;case 27:case 3:Ka=!0;return;default:Zr=Zr.return}}function Bd(u){if(u!==Zr)return!1;if(!Nn)return x0(u),Nn=!0,!1;var h=u.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||Zp(u.type,u.memoizedProps)),m=!m),m&&kr&&Vi(u),x0(u),h===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(h===0){kr=ys(u.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;u=u.nextSibling}kr=null}}else h===27?(h=kr,Qi(u.type)?(u=kx,kx=null,kr=u):kr=h):kr=Zr?ys(u.stateNode.nextSibling):null;return!0}function zd(){kr=Zr=null,Nn=!1}function v0(){var u=ds;return u!==null&&(ri===null?ri=u:ri.push.apply(ri,u),ds=null),u}function Xo(u){ds===null?ds=[u]:ds.push(u)}var Kl=ce(null),Jo=null,fe=null;function xi(u,h,m){K(Kl,h._currentValue),h._currentValue=m}function Hi(u){u._currentValue=Kl.current,we(Kl)}function Qa(u,h,m){for(;u!==null;){var N=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,N!==null&&(N.childLanes|=h)):N!==null&&(N.childLanes&h)!==h&&(N.childLanes|=h),u===m)break;u=u.return}}function mn(u,h,m,N){var A=u.child;for(A!==null&&(A.return=u);A!==null;){var R=A.dependencies;if(R!==null){var J=A.child;R=R.firstContext;e:for(;R!==null;){var pe=R;R=A;for(var Pe=0;Pe<h.length;Pe++)if(pe.context===h[Pe]){R.lanes|=m,pe=R.alternate,pe!==null&&(pe.lanes|=m),Qa(R.return,m,u),N||(J=null);break e}R=pe.next}}else if(A.tag===18){if(J=A.return,J===null)throw Error(a(341));J.lanes|=m,R=J.alternate,R!==null&&(R.lanes|=m),Qa(J,m,u),J=null}else J=A.child;if(J!==null)J.return=A;else for(J=A;J!==null;){if(J===u){J=null;break}if(A=J.sibling,A!==null){A.return=J.return,J=A;break}J=J.return}A=J}}function qd(u,h,m,N){u=null;for(var A=h,R=!1;A!==null;){if(!R){if((A.flags&524288)!==0)R=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var J=A.alternate;if(J===null)throw Error(a(387));if(J=J.memoizedProps,J!==null){var pe=A.type;gi(A.pendingProps.value,J.value)||(u!==null?u.push(pe):u=[pe])}}else if(A===Fe.current){if(J=A.alternate,J===null)throw Error(a(387));J.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(u!==null?u.push(Fu):u=[Fu])}A=A.return}u!==null&&mn(h,u,m,N),h.flags|=262144}function lp(u){for(u=u.firstContext;u!==null;){if(!gi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Ql(u){Jo=u,fe=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Fr(u){return b0(Jo,u)}function cp(u,h){return Jo===null&&Ql(u),b0(u,h)}function b0(u,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},fe===null){if(u===null)throw Error(a(308));fe=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else fe=fe.next=h;return m}var ZS=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(m,N){u.push(N)}};this.abort=function(){h.aborted=!0,u.forEach(function(m){return m()})}},e_=t.unstable_scheduleCallback,t_=t.unstable_NormalPriority,hr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sy(){return{controller:new ZS,data:new Map,refCount:0}}function Ud(u){u.refCount--,u.refCount===0&&e_(t_,function(){u.controller.abort()})}var Vd=null,_y=0,du=0,Xa=null;function n_(u,h){if(Vd===null){var m=Vd=[];_y=0,du=Kp(),Xa={status:"pending",value:void 0,then:function(N){m.push(N)}}}return _y++,h.then(j0,j0),h}function j0(){if(--_y===0&&Vd!==null){Xa!==null&&(Xa.status="fulfilled");var u=Vd;Vd=null,du=0,Xa=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function r_(u,h){var m=[],N={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return u.then(function(){N.status="fulfilled",N.value=h;for(var A=0;A<m.length;A++)(0,m[A])(h)},function(A){for(N.status="rejected",N.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),N}var w0=q.S;q.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&n_(u,h),w0!==null&&w0(u,h)};var Xl=ce(null);function lo(){var u=Xl.current;return u!==null?u:gr.pooledCache}function up(u,h){h===null?K(Xl,Xl.current):K(Xl,h.pool)}function N0(){var u=lo();return u===null?null:{parent:hr._currentValue,pool:u}}var Fa=Error(a(460)),S0=Error(a(474)),dp=Error(a(542)),Cy={then:function(){}};function _0(u){return u=u.status,u==="fulfilled"||u==="rejected"}function hp(){}function Ty(u,h,m){switch(m=u[m],m===void 0?u.push(h):m!==h&&(h.then(hp,hp),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,T0(u),u;default:if(typeof h.status=="string")h.then(hp,hp);else{if(u=gr,u!==null&&100<u.shellSuspendCounter)throw Error(a(482));u=h,u.status="pending",u.then(function(N){if(h.status==="pending"){var A=h;A.status="fulfilled",A.value=N}},function(N){if(h.status==="pending"){var A=h;A.status="rejected",A.reason=N}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,T0(u),u}throw hu=h,Fa}}var hu=null;function C0(){if(hu===null)throw Error(a(459));var u=hu;return hu=null,u}function T0(u){if(u===Fa||u===dp)throw Error(a(483))}var Ms=!1;function Jl(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fu(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Zo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function co(u,h,m){var N=u.updateQueue;if(N===null)return null;if(N=N.shared,(er&2)!==0){var A=N.pending;return A===null?h.next=h:(h.next=A.next,A.next=h),N.pending=h,h=Rd(u),Id(u,null,m),h}return us(u,N,h,m),Rd(u)}function Hd(u,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var N=h.lanes;N&=u.pendingLanes,m|=N,h.lanes=m,Ue(u,m)}}function hs(u,h){var m=u.updateQueue,N=u.alternate;if(N!==null&&(N=N.updateQueue,m===N)){var A=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var J={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?A=R=J:R=R.next=J,m=m.next}while(m!==null);R===null?A=R=h:R=R.next=h}else A=R=h;m={baseState:N.baseState,firstBaseUpdate:A,lastBaseUpdate:R,shared:N.shared,callbacks:N.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=h}var Gd=!1;function fs(){if(Gd){var u=Xa;if(u!==null)throw u}}function _a(u,h,m,N){Gd=!1;var A=u.updateQueue;Ms=!1;var R=A.firstBaseUpdate,J=A.lastBaseUpdate,pe=A.shared.pending;if(pe!==null){A.shared.pending=null;var Pe=pe,Xe=Pe.next;Pe.next=null,J===null?R=Xe:J.next=Xe,J=Pe;var ot=u.alternate;ot!==null&&(ot=ot.updateQueue,pe=ot.lastBaseUpdate,pe!==J&&(pe===null?ot.firstBaseUpdate=Xe:pe.next=Xe,ot.lastBaseUpdate=Pe))}if(R!==null){var ft=A.baseState;J=0,ot=Xe=Pe=null,pe=R;do{var tt=pe.lane&-536870913,Ze=tt!==pe.lane;if(Ze?(Dn&tt)===tt:(N&tt)===tt){tt!==0&&tt===du&&(Gd=!0),ot!==null&&(ot=ot.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Ht=u,Vt=pe;tt=h;var sr=m;switch(Vt.tag){case 1:if(Ht=Vt.payload,typeof Ht=="function"){ft=Ht.call(sr,ft,tt);break e}ft=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Vt.payload,tt=typeof Ht=="function"?Ht.call(sr,ft,tt):Ht,tt==null)break e;ft=f({},ft,tt);break e;case 2:Ms=!0}}tt=pe.callback,tt!==null&&(u.flags|=64,Ze&&(u.flags|=8192),Ze=A.callbacks,Ze===null?A.callbacks=[tt]:Ze.push(tt))}else Ze={lane:tt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},ot===null?(Xe=ot=Ze,Pe=ft):ot=ot.next=Ze,J|=tt;if(pe=pe.next,pe===null){if(pe=A.shared.pending,pe===null)break;Ze=pe,pe=Ze.next,Ze.next=null,A.lastBaseUpdate=Ze,A.shared.pending=null}}while(!0);ot===null&&(Pe=ft),A.baseState=Pe,A.firstBaseUpdate=Xe,A.lastBaseUpdate=ot,R===null&&(A.shared.lanes=0),ll|=J,u.lanes=J,u.memoizedState=ft}}function k0(u,h){if(typeof u!="function")throw Error(a(191,u));u.call(h)}function ky(u,h){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)k0(m[u],h)}var Zl=ce(null),el=ce(0);function uo(u,h){u=bo,K(el,u),K(Zl,h),bo=u|h.baseLanes}function fp(){K(el,bo),K(Zl,Zl.current)}function Ay(){bo=el.current,we(Zl),we(el)}var ps=0,fn=null,Zn=null,Sn=null,pu=!1,ec=!1,Ca=!1,mu=0,tl=0,Gi=null,A0=0;function Tn(){throw Error(a(321))}function Wd(u,h){if(h===null)return!1;for(var m=0;m<h.length&&m<u.length;m++)if(!gi(u[m],h[m]))return!1;return!0}function Ey(u,h,m,N,A,R){return ps=R,fn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,q.H=u===null||u.memoizedState===null?q0:Yy,Ca=!1,R=m(N,A),Ca=!1,ec&&(R=P0(h,m,N,A)),E0(u),R}function E0(u){q.H=ah;var h=Zn!==null&&Zn.next!==null;if(ps=0,Sn=Zn=fn=null,pu=!1,tl=0,Gi=null,h)throw Error(a(300));u===null||ca||(u=u.dependencies,u!==null&&lp(u)&&(ca=!0))}function P0(u,h,m,N){fn=u;var A=0;do{if(ec&&(Gi=null),tl=0,ec=!1,25<=A)throw Error(a(301));if(A+=1,Sn=Zn=null,u.updateQueue!=null){var R=u.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}q.H=U0,R=h(m,N)}while(ec);return R}function Py(){var u=q.H,h=u.useState()[0];return h=typeof h.then=="function"?Yd(h):h,u=u.useState()[0],(Zn!==null?Zn.memoizedState:null)!==u&&(fn.flags|=1024),h}function Oy(){var u=mu!==0;return mu=0,u}function tc(u,h,m){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~m}function pp(u){if(pu){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}pu=!1}ps=0,Sn=Zn=fn=null,ec=!1,tl=mu=0,Gi=null}function Ja(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?fn.memoizedState=Sn=u:Sn=Sn.next=u,Sn}function Wr(){if(Zn===null){var u=fn.alternate;u=u!==null?u.memoizedState:null}else u=Zn.next;var h=Sn===null?fn.memoizedState:Sn.next;if(h!==null)Sn=h,Zn=u;else{if(u===null)throw fn.alternate===null?Error(a(467)):Error(a(310));Zn=u,u={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},Sn===null?fn.memoizedState=Sn=u:Sn=Sn.next=u}return Sn}function nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yd(u){var h=tl;return tl+=1,Gi===null&&(Gi=[]),u=Ty(Gi,u,h),h=fn,(Sn===null?h.memoizedState:Sn.next)===null&&(h=h.alternate,q.H=h===null||h.memoizedState===null?q0:Yy),u}function mp(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Yd(u);if(u.$$typeof===C)return Fr(u)}throw Error(a(438,String(u)))}function Kd(u){var h=null,m=fn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var N=fn.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(h={data:N.data.map(function(A){return A.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=nc(),fn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(u),N=0;N<u;N++)m[N]=$;return h.index++,m}function Is(u,h){return typeof h=="function"?h(u):h}function gp(u){var h=Wr();return Dy(h,Zn,u)}function Dy(u,h,m){var N=u.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=m;var A=u.baseQueue,R=N.pending;if(R!==null){if(A!==null){var J=A.next;A.next=R.next,R.next=J}h.baseQueue=A=R,N.pending=null}if(R=u.baseState,A===null)u.memoizedState=R;else{h=A.next;var pe=J=null,Pe=null,Xe=h,ot=!1;do{var ft=Xe.lane&-536870913;if(ft!==Xe.lane?(Dn&ft)===ft:(ps&ft)===ft){var tt=Xe.revertLane;if(tt===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),ft===du&&(ot=!0);else if((ps&tt)===tt){Xe=Xe.next,tt===du&&(ot=!0);continue}else ft={lane:0,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Pe===null?(pe=Pe=ft,J=R):Pe=Pe.next=ft,fn.lanes|=tt,ll|=tt;ft=Xe.action,Ca&&m(R,ft),R=Xe.hasEagerState?Xe.eagerState:m(R,ft)}else tt={lane:ft,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Pe===null?(pe=Pe=tt,J=R):Pe=Pe.next=tt,fn.lanes|=ft,ll|=ft;Xe=Xe.next}while(Xe!==null&&Xe!==h);if(Pe===null?J=R:Pe.next=pe,!gi(R,u.memoizedState)&&(ca=!0,ot&&(m=Xa,m!==null)))throw m;u.memoizedState=R,u.baseState=J,u.baseQueue=Pe,N.lastRenderedState=R}return A===null&&(N.lanes=0),[u.memoizedState,N.dispatch]}function My(u){var h=Wr(),m=h.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=u;var N=m.dispatch,A=m.pending,R=h.memoizedState;if(A!==null){m.pending=null;var J=A=A.next;do R=u(R,J.action),J=J.next;while(J!==A);gi(R,h.memoizedState)||(ca=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),m.lastRenderedState=R}return[R,N]}function Iy(u,h,m){var N=fn,A=Wr(),R=Nn;if(R){if(m===void 0)throw Error(a(407));m=m()}else m=h();var J=!gi((Zn||A).memoizedState,m);J&&(A.memoizedState=m,ca=!0),A=A.queue;var pe=xp.bind(null,N,A,u);if(Jd(2048,8,pe,[u]),A.getSnapshot!==h||J||Sn!==null&&Sn.memoizedState.tag&1){if(N.flags|=2048,gu(9,Np(),O0.bind(null,N,A,m,h),null),gr===null)throw Error(a(349));R||(ps&124)!==0||yp(N,h,m)}return m}function yp(u,h,m){u.flags|=16384,u={getSnapshot:h,value:m},h=fn.updateQueue,h===null?(h=nc(),fn.updateQueue=h,h.stores=[u]):(m=h.stores,m===null?h.stores=[u]:m.push(u))}function O0(u,h,m,N){h.value=m,h.getSnapshot=N,Ry(h)&&Ly(u)}function xp(u,h,m){return m(function(){Ry(h)&&Ly(u)})}function Ry(u){var h=u.getSnapshot;u=u.value;try{var m=h();return!gi(u,m)}catch{return!0}}function Ly(u){var h=Vl(u,2);h!==null&&Ni(h,u,2)}function vp(u){var h=Ja();if(typeof u=="function"){var m=u;if(u=m(),Ca){he(!0);try{m()}finally{he(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:u},h}function Qd(u,h,m,N){return u.baseState=m,Dy(u,Zn,typeof N=="function"?N:Is)}function a_(u,h,m,N,A){if(Tp(u))throw Error(a(485));if(u=h.action,u!==null){var R={payload:A,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){R.listeners.push(J)}};q.T!==null?m(!0):R.isTransition=!1,N(R),m=h.pending,m===null?(R.next=h.pending=R,Fy(h,R)):(R.next=m.next,h.pending=m.next=R)}}function Fy(u,h){var m=h.action,N=h.payload,A=u.state;if(h.isTransition){var R=q.T,J={};q.T=J;try{var pe=m(A,N),Pe=q.S;Pe!==null&&Pe(J,pe),$y(u,h,pe)}catch(Xe){bp(u,h,Xe)}finally{q.T=R}}else try{R=m(A,N),$y(u,h,R)}catch(Xe){bp(u,h,Xe)}}function $y(u,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(N){D0(u,h,N)},function(N){return bp(u,h,N)}):D0(u,h,m)}function D0(u,h,m){h.status="fulfilled",h.value=m,M0(h),u.state=m,h=u.pending,h!==null&&(m=h.next,m===h?u.pending=null:(m=m.next,h.next=m,Fy(u,m)))}function bp(u,h,m){var N=u.pending;if(u.pending=null,N!==null){N=N.next;do h.status="rejected",h.reason=m,M0(h),h=h.next;while(h!==N)}u.action=null}function M0(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function jp(u,h){return h}function By(u,h){if(Nn){var m=gr.formState;if(m!==null){e:{var N=fn;if(Nn){if(kr){t:{for(var A=kr,R=Ka;A.nodeType!==8;){if(!R){A=null;break t}if(A=ys(A.nextSibling),A===null){A=null;break t}}R=A.data,A=R==="F!"||R==="F"?A:null}if(A){kr=ys(A.nextSibling),N=A.data==="F!";break e}}Vi(N)}N=!1}N&&(h=m[0])}}return m=Ja(),m.memoizedState=m.baseState=h,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jp,lastRenderedState:h},m.queue=N,m=Hy.bind(null,fn,N),N.dispatch=m,N=vp(!1),R=Gy.bind(null,fn,!1,N.queue),N=Ja(),A={state:h,dispatch:null,action:u,pending:null},N.queue=A,m=a_.bind(null,fn,A,R,m),A.dispatch=m,N.memoizedState=u,[h,m,!1]}function wp(u){var h=Wr();return I0(h,Zn,u)}function I0(u,h,m){if(h=Dy(u,h,jp)[0],u=gp(Is)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var N=Yd(h)}catch(J){throw J===Fa?dp:J}else N=h;h=Wr();var A=h.queue,R=A.dispatch;return m!==h.memoizedState&&(fn.flags|=2048,gu(9,Np(),zy.bind(null,A,m),null)),[N,R,u]}function zy(u,h){u.action=h}function dn(u){var h=Wr(),m=Zn;if(m!==null)return I0(h,m,u);Wr(),h=h.memoizedState,m=Wr();var N=m.queue.dispatch;return m.memoizedState=u,[h,N,!1]}function gu(u,h,m,N){return u={tag:u,create:m,deps:N,inst:h,next:null},h=fn.updateQueue,h===null&&(h=nc(),fn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=u.next=u:(N=m.next,m.next=u,u.next=N,h.lastEffect=u),u}function Np(){return{destroy:void 0,resource:void 0}}function yu(){return Wr().memoizedState}function Xd(u,h,m,N){var A=Ja();N=N===void 0?null:N,fn.flags|=u,A.memoizedState=gu(1|h,Np(),m,N)}function Jd(u,h,m,N){var A=Wr();N=N===void 0?null:N;var R=A.memoizedState.inst;Zn!==null&&N!==null&&Wd(N,Zn.memoizedState.deps)?A.memoizedState=gu(h,R,m,N):(fn.flags|=u,A.memoizedState=gu(1|h,R,m,N))}function R0(u,h){Xd(8390656,8,u,h)}function vi(u,h){Jd(2048,8,u,h)}function L0(u,h){return Jd(4,2,u,h)}function Zd(u,h){return Jd(4,4,u,h)}function Sp(u,h){if(typeof h=="function"){u=u();var m=h(u);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function qy(u,h,m){m=m!=null?m.concat([u]):null,Jd(4,4,Sp.bind(null,h,u),m)}function _p(){}function Za(u,h){var m=Wr();h=h===void 0?null:h;var N=m.memoizedState;return h!==null&&Wd(h,N[1])?N[0]:(m.memoizedState=[u,h],u)}function ho(u,h){var m=Wr();h=h===void 0?null:h;var N=m.memoizedState;if(h!==null&&Wd(h,N[1]))return N[0];if(N=u(),Ca){he(!0);try{u()}finally{he(!1)}}return m.memoizedState=[N,h],N}function eh(u,h,m){return m===void 0||(ps&1073741824)!==0?u.memoizedState=h:(u.memoizedState=m,u=g1(),fn.lanes|=u,ll|=u,m)}function Uy(u,h,m,N){return gi(m,h)?m:Zl.current!==null?(u=eh(u,m,N),gi(u,h)||(ca=!0),u):(ps&42)===0?(ca=!0,u.memoizedState=m):(u=g1(),fn.lanes|=u,ll|=u,h)}function th(u,h,m,N,A){var R=Y.p;Y.p=R!==0&&8>R?R:8;var J=q.T,pe={};q.T=pe,Gy(u,!1,h,m);try{var Pe=A(),Xe=q.S;if(Xe!==null&&Xe(pe,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var ot=r_(Pe,N);rc(u,h,ot,ka(u))}else rc(u,h,N,ka(u))}catch(ft){rc(u,h,{then:function(){},status:"rejected",reason:ft},ka())}finally{Y.p=R,q.T=J}}function F0(){}function nh(u,h,m,N){if(u.tag!==5)throw Error(a(476));var A=Vy(u).queue;th(u,A,h,se,m===null?F0:function(){return Cp(u),m(N)})}function Vy(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:se},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:m},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function Cp(u){var h=Vy(u).next.queue;rc(u,h,{},ka())}function rh(){return Fr(Fu)}function fo(){return Wr().memoizedState}function $0(){return Wr().memoizedState}function nl(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var m=ka();u=Zo(m);var N=co(h,u,m);N!==null&&(Ni(N,h,m),Hd(N,h,m)),h={cache:Sy()},u.payload=h;return}h=h.return}}function B0(u,h,m){var N=ka();m={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Tp(u)?z0(h,m):(m=lu(u,h,m,N),m!==null&&(Ni(m,u,N),Wy(m,h,N)))}function Hy(u,h,m){var N=ka();rc(u,h,m,N)}function rc(u,h,m,N){var A={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Tp(u))z0(h,A);else{var R=u.alternate;if(u.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var J=h.lastRenderedState,pe=R(J,m);if(A.hasEagerState=!0,A.eagerState=pe,gi(pe,J))return us(u,h,A,0),gr===null&&Ul(),!1}catch{}finally{}if(m=lu(u,h,A,N),m!==null)return Ni(m,u,N),Wy(m,h,N),!0}return!1}function Gy(u,h,m,N){if(N={lane:2,revertLane:Kp(),action:N,hasEagerState:!1,eagerState:null,next:null},Tp(u)){if(h)throw Error(a(479))}else h=lu(u,m,N,2),h!==null&&Ni(h,u,2)}function Tp(u){var h=u.alternate;return u===fn||h!==null&&h===fn}function z0(u,h){ec=pu=!0;var m=u.pending;m===null?h.next=h:(h.next=m.next,m.next=h),u.pending=h}function Wy(u,h,m){if((m&4194048)!==0){var N=h.lanes;N&=u.pendingLanes,m|=N,h.lanes=m,Ue(u,m)}}var ah={readContext:Fr,use:mp,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn,useHostTransitionStatus:Tn,useFormState:Tn,useActionState:Tn,useOptimistic:Tn,useMemoCache:Tn,useCacheRefresh:Tn},q0={readContext:Fr,use:mp,useCallback:function(u,h){return Ja().memoizedState=[u,h===void 0?null:h],u},useContext:Fr,useEffect:R0,useImperativeHandle:function(u,h,m){m=m!=null?m.concat([u]):null,Xd(4194308,4,Sp.bind(null,h,u),m)},useLayoutEffect:function(u,h){return Xd(4194308,4,u,h)},useInsertionEffect:function(u,h){Xd(4,2,u,h)},useMemo:function(u,h){var m=Ja();h=h===void 0?null:h;var N=u();if(Ca){he(!0);try{u()}finally{he(!1)}}return m.memoizedState=[N,h],N},useReducer:function(u,h,m){var N=Ja();if(m!==void 0){var A=m(h);if(Ca){he(!0);try{m(h)}finally{he(!1)}}}else A=h;return N.memoizedState=N.baseState=A,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:A},N.queue=u,u=u.dispatch=B0.bind(null,fn,u),[N.memoizedState,u]},useRef:function(u){var h=Ja();return u={current:u},h.memoizedState=u},useState:function(u){u=vp(u);var h=u.queue,m=Hy.bind(null,fn,h);return h.dispatch=m,[u.memoizedState,m]},useDebugValue:_p,useDeferredValue:function(u,h){var m=Ja();return eh(m,u,h)},useTransition:function(){var u=vp(!1);return u=th.bind(null,fn,u.queue,!0,!1),Ja().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,m){var N=fn,A=Ja();if(Nn){if(m===void 0)throw Error(a(407));m=m()}else{if(m=h(),gr===null)throw Error(a(349));(Dn&124)!==0||yp(N,h,m)}A.memoizedState=m;var R={value:m,getSnapshot:h};return A.queue=R,R0(xp.bind(null,N,R,u),[u]),N.flags|=2048,gu(9,Np(),O0.bind(null,N,R,m,h),null),m},useId:function(){var u=Ja(),h=gr.identifierPrefix;if(Nn){var m=oo,N=Tr;m=(N&~(1<<32-ge(N)-1)).toString(32)+m,h=""+h+"R"+m,m=mu++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=A0++,h=""+h+"r"+m.toString(32)+"";return u.memoizedState=h},useHostTransitionStatus:rh,useFormState:By,useActionState:By,useOptimistic:function(u){var h=Ja();h.memoizedState=h.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=Gy.bind(null,fn,!0,m),m.dispatch=h,[u,h]},useMemoCache:Kd,useCacheRefresh:function(){return Ja().memoizedState=nl.bind(null,fn)}},Yy={readContext:Fr,use:mp,useCallback:Za,useContext:Fr,useEffect:vi,useImperativeHandle:qy,useInsertionEffect:L0,useLayoutEffect:Zd,useMemo:ho,useReducer:gp,useRef:yu,useState:function(){return gp(Is)},useDebugValue:_p,useDeferredValue:function(u,h){var m=Wr();return Uy(m,Zn.memoizedState,u,h)},useTransition:function(){var u=gp(Is)[0],h=Wr().memoizedState;return[typeof u=="boolean"?u:Yd(u),h]},useSyncExternalStore:Iy,useId:fo,useHostTransitionStatus:rh,useFormState:wp,useActionState:wp,useOptimistic:function(u,h){var m=Wr();return Qd(m,Zn,u,h)},useMemoCache:Kd,useCacheRefresh:$0},U0={readContext:Fr,use:mp,useCallback:Za,useContext:Fr,useEffect:vi,useImperativeHandle:qy,useInsertionEffect:L0,useLayoutEffect:Zd,useMemo:ho,useReducer:My,useRef:yu,useState:function(){return My(Is)},useDebugValue:_p,useDeferredValue:function(u,h){var m=Wr();return Zn===null?eh(m,u,h):Uy(m,Zn.memoizedState,u,h)},useTransition:function(){var u=My(Is)[0],h=Wr().memoizedState;return[typeof u=="boolean"?u:Yd(u),h]},useSyncExternalStore:Iy,useId:fo,useHostTransitionStatus:rh,useFormState:dn,useActionState:dn,useOptimistic:function(u,h){var m=Wr();return Zn!==null?Qd(m,Zn,u,h):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Kd,useCacheRefresh:$0},ea=null,ei=0;function kp(u){var h=ei;return ei+=1,ea===null&&(ea=[]),Ty(ea,u,h)}function ih(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function ac(u,h){throw h.$$typeof===p?Error(a(525)):(u=Object.prototype.toString.call(h),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function ic(u){var h=u._init;return h(u._payload)}function Ky(u){function h(Ye,Be){if(u){var Qe=Ye.deletions;Qe===null?(Ye.deletions=[Be],Ye.flags|=16):Qe.push(Be)}}function m(Ye,Be){if(!u)return null;for(;Be!==null;)h(Ye,Be),Be=Be.sibling;return null}function N(Ye){for(var Be=new Map;Ye!==null;)Ye.key!==null?Be.set(Ye.key,Ye):Be.set(Ye.index,Ye),Ye=Ye.sibling;return Be}function A(Ye,Be){return Ye=La(Ye,Be),Ye.index=0,Ye.sibling=null,Ye}function R(Ye,Be,Qe){return Ye.index=Qe,u?(Qe=Ye.alternate,Qe!==null?(Qe=Qe.index,Qe<Be?(Ye.flags|=67108866,Be):Qe):(Ye.flags|=67108866,Be)):(Ye.flags|=1048576,Be)}function J(Ye){return u&&Ye.alternate===null&&(Ye.flags|=67108866),Ye}function pe(Ye,Be,Qe,dt){return Be===null||Be.tag!==6?(Be=jy(Qe,Ye.mode,dt),Be.return=Ye,Be):(Be=A(Be,Qe),Be.return=Ye,Be)}function Pe(Ye,Be,Qe,dt){var Pt=Qe.type;return Pt===b?ot(Ye,Be,Qe.props.children,dt,Qe.key):Be!==null&&(Be.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===F&&ic(Pt)===Be.type)?(Be=A(Be,Qe.props),ih(Be,Qe),Be.return=Ye,Be):(Be=sp(Qe.type,Qe.key,Qe.props,null,Ye.mode,dt),ih(Be,Qe),Be.return=Ye,Be)}function Xe(Ye,Be,Qe,dt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Qe.containerInfo||Be.stateNode.implementation!==Qe.implementation?(Be=cu(Qe,Ye.mode,dt),Be.return=Ye,Be):(Be=A(Be,Qe.children||[]),Be.return=Ye,Be)}function ot(Ye,Be,Qe,dt,Pt){return Be===null||Be.tag!==7?(Be=Wl(Qe,Ye.mode,dt,Pt),Be.return=Ye,Be):(Be=A(Be,Qe),Be.return=Ye,Be)}function ft(Ye,Be,Qe){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Be=jy(""+Be,Ye.mode,Qe),Be.return=Ye,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case g:return Qe=sp(Be.type,Be.key,Be.props,null,Ye.mode,Qe),ih(Qe,Be),Qe.return=Ye,Qe;case x:return Be=cu(Be,Ye.mode,Qe),Be.return=Ye,Be;case F:var dt=Be._init;return Be=dt(Be._payload),ft(Ye,Be,Qe)}if(X(Be)||V(Be))return Be=Wl(Be,Ye.mode,Qe,null),Be.return=Ye,Be;if(typeof Be.then=="function")return ft(Ye,kp(Be),Qe);if(Be.$$typeof===C)return ft(Ye,cp(Ye,Be),Qe);ac(Ye,Be)}return null}function tt(Ye,Be,Qe,dt){var Pt=Be!==null?Be.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Pt!==null?null:pe(Ye,Be,""+Qe,dt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:return Qe.key===Pt?Pe(Ye,Be,Qe,dt):null;case x:return Qe.key===Pt?Xe(Ye,Be,Qe,dt):null;case F:return Pt=Qe._init,Qe=Pt(Qe._payload),tt(Ye,Be,Qe,dt)}if(X(Qe)||V(Qe))return Pt!==null?null:ot(Ye,Be,Qe,dt,null);if(typeof Qe.then=="function")return tt(Ye,Be,kp(Qe),dt);if(Qe.$$typeof===C)return tt(Ye,Be,cp(Ye,Qe),dt);ac(Ye,Qe)}return null}function Ze(Ye,Be,Qe,dt,Pt){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Ye=Ye.get(Qe)||null,pe(Be,Ye,""+dt,Pt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case g:return Ye=Ye.get(dt.key===null?Qe:dt.key)||null,Pe(Be,Ye,dt,Pt);case x:return Ye=Ye.get(dt.key===null?Qe:dt.key)||null,Xe(Be,Ye,dt,Pt);case F:var gn=dt._init;return dt=gn(dt._payload),Ze(Ye,Be,Qe,dt,Pt)}if(X(dt)||V(dt))return Ye=Ye.get(Qe)||null,ot(Be,Ye,dt,Pt,null);if(typeof dt.then=="function")return Ze(Ye,Be,Qe,kp(dt),Pt);if(dt.$$typeof===C)return Ze(Ye,Be,Qe,cp(Be,dt),Pt);ac(Be,dt)}return null}function Ht(Ye,Be,Qe,dt){for(var Pt=null,gn=null,Ft=Be,Gt=Be=0,ha=null;Ft!==null&&Gt<Qe.length;Gt++){Ft.index>Gt?(ha=Ft,Ft=null):ha=Ft.sibling;var Ln=tt(Ye,Ft,Qe[Gt],dt);if(Ln===null){Ft===null&&(Ft=ha);break}u&&Ft&&Ln.alternate===null&&h(Ye,Ft),Be=R(Ln,Be,Gt),gn===null?Pt=Ln:gn.sibling=Ln,gn=Ln,Ft=ha}if(Gt===Qe.length)return m(Ye,Ft),Nn&&Yl(Ye,Gt),Pt;if(Ft===null){for(;Gt<Qe.length;Gt++)Ft=ft(Ye,Qe[Gt],dt),Ft!==null&&(Be=R(Ft,Be,Gt),gn===null?Pt=Ft:gn.sibling=Ft,gn=Ft);return Nn&&Yl(Ye,Gt),Pt}for(Ft=N(Ft);Gt<Qe.length;Gt++)ha=Ze(Ft,Ye,Gt,Qe[Gt],dt),ha!==null&&(u&&ha.alternate!==null&&Ft.delete(ha.key===null?Gt:ha.key),Be=R(ha,Be,Gt),gn===null?Pt=ha:gn.sibling=ha,gn=ha);return u&&Ft.forEach(function(xl){return h(Ye,xl)}),Nn&&Yl(Ye,Gt),Pt}function Vt(Ye,Be,Qe,dt){if(Qe==null)throw Error(a(151));for(var Pt=null,gn=null,Ft=Be,Gt=Be=0,ha=null,Ln=Qe.next();Ft!==null&&!Ln.done;Gt++,Ln=Qe.next()){Ft.index>Gt?(ha=Ft,Ft=null):ha=Ft.sibling;var xl=tt(Ye,Ft,Ln.value,dt);if(xl===null){Ft===null&&(Ft=ha);break}u&&Ft&&xl.alternate===null&&h(Ye,Ft),Be=R(xl,Be,Gt),gn===null?Pt=xl:gn.sibling=xl,gn=xl,Ft=ha}if(Ln.done)return m(Ye,Ft),Nn&&Yl(Ye,Gt),Pt;if(Ft===null){for(;!Ln.done;Gt++,Ln=Qe.next())Ln=ft(Ye,Ln.value,dt),Ln!==null&&(Be=R(Ln,Be,Gt),gn===null?Pt=Ln:gn.sibling=Ln,gn=Ln);return Nn&&Yl(Ye,Gt),Pt}for(Ft=N(Ft);!Ln.done;Gt++,Ln=Qe.next())Ln=Ze(Ft,Ye,Gt,Ln.value,dt),Ln!==null&&(u&&Ln.alternate!==null&&Ft.delete(Ln.key===null?Gt:Ln.key),Be=R(Ln,Be,Gt),gn===null?Pt=Ln:gn.sibling=Ln,gn=Ln);return u&&Ft.forEach(function(B_){return h(Ye,B_)}),Nn&&Yl(Ye,Gt),Pt}function sr(Ye,Be,Qe,dt){if(typeof Qe=="object"&&Qe!==null&&Qe.type===b&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:e:{for(var Pt=Qe.key;Be!==null;){if(Be.key===Pt){if(Pt=Qe.type,Pt===b){if(Be.tag===7){m(Ye,Be.sibling),dt=A(Be,Qe.props.children),dt.return=Ye,Ye=dt;break e}}else if(Be.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===F&&ic(Pt)===Be.type){m(Ye,Be.sibling),dt=A(Be,Qe.props),ih(dt,Qe),dt.return=Ye,Ye=dt;break e}m(Ye,Be);break}else h(Ye,Be);Be=Be.sibling}Qe.type===b?(dt=Wl(Qe.props.children,Ye.mode,dt,Qe.key),dt.return=Ye,Ye=dt):(dt=sp(Qe.type,Qe.key,Qe.props,null,Ye.mode,dt),ih(dt,Qe),dt.return=Ye,Ye=dt)}return J(Ye);case x:e:{for(Pt=Qe.key;Be!==null;){if(Be.key===Pt)if(Be.tag===4&&Be.stateNode.containerInfo===Qe.containerInfo&&Be.stateNode.implementation===Qe.implementation){m(Ye,Be.sibling),dt=A(Be,Qe.children||[]),dt.return=Ye,Ye=dt;break e}else{m(Ye,Be);break}else h(Ye,Be);Be=Be.sibling}dt=cu(Qe,Ye.mode,dt),dt.return=Ye,Ye=dt}return J(Ye);case F:return Pt=Qe._init,Qe=Pt(Qe._payload),sr(Ye,Be,Qe,dt)}if(X(Qe))return Ht(Ye,Be,Qe,dt);if(V(Qe)){if(Pt=V(Qe),typeof Pt!="function")throw Error(a(150));return Qe=Pt.call(Qe),Vt(Ye,Be,Qe,dt)}if(typeof Qe.then=="function")return sr(Ye,Be,kp(Qe),dt);if(Qe.$$typeof===C)return sr(Ye,Be,cp(Ye,Qe),dt);ac(Ye,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint"?(Qe=""+Qe,Be!==null&&Be.tag===6?(m(Ye,Be.sibling),dt=A(Be,Qe),dt.return=Ye,Ye=dt):(m(Ye,Be),dt=jy(Qe,Ye.mode,dt),dt.return=Ye,Ye=dt),J(Ye)):m(Ye,Be)}return function(Ye,Be,Qe,dt){try{ei=0;var Pt=sr(Ye,Be,Qe,dt);return ea=null,Pt}catch(Ft){if(Ft===Fa||Ft===dp)throw Ft;var gn=Ya(29,Ft,null,Ye.mode);return gn.lanes=dt,gn.return=Ye,gn}finally{}}}var sc=Ky(!0),V0=Ky(!1),bi=ce(null),$a=null;function Wi(u){var h=u.alternate;K($r,$r.current&1),K(bi,u),$a===null&&(h===null||Zl.current!==null||h.memoizedState!==null)&&($a=u)}function H0(u){if(u.tag===22){if(K($r,$r.current),K(bi,u),$a===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&($a=u)}}else po()}function po(){K($r,$r.current),K(bi,bi.current)}function Rs(u){we(bi),$a===u&&($a=null),we($r)}var $r=ce(0);function sh(u){for(var h=u;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||za(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function xu(u,h,m,N){h=u.memoizedState,m=m(N,h),m=m==null?h:f({},h,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var oh={enqueueSetState:function(u,h,m){u=u._reactInternals;var N=ka(),A=Zo(N);A.payload=h,m!=null&&(A.callback=m),h=co(u,A,N),h!==null&&(Ni(h,u,N),Hd(h,u,N))},enqueueReplaceState:function(u,h,m){u=u._reactInternals;var N=ka(),A=Zo(N);A.tag=1,A.payload=h,m!=null&&(A.callback=m),h=co(u,A,N),h!==null&&(Ni(h,u,N),Hd(h,u,N))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var m=ka(),N=Zo(m);N.tag=2,h!=null&&(N.callback=h),h=co(u,N,m),h!==null&&(Ni(h,u,m),Hd(h,u,m))}};function lh(u,h,m,N,A,R,J){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(N,R,J):h.prototype&&h.prototype.isPureReactComponent?!Ds(m,N)||!Ds(A,R):!0}function G0(u,h,m,N){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,N),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,N),h.state!==u&&oh.enqueueReplaceState(h,h.state,null)}function rl(u,h){var m=h;if("ref"in h){m={};for(var N in h)N!=="ref"&&(m[N]=h[N])}if(u=u.defaultProps){m===h&&(m=f({},m));for(var A in u)m[A]===void 0&&(m[A]=u[A])}return m}var oc=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function Qy(u){oc(u)}function Ap(u){console.error(u)}function W0(u){oc(u)}function ch(u,h){try{var m=u.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(N){setTimeout(function(){throw N})}}function Ls(u,h,m){try{var N=u.onCaughtError;N(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Ep(u,h,m){return m=Zo(m),m.tag=3,m.payload={element:null},m.callback=function(){ch(u,h)},m}function Xy(u){return u=Zo(u),u.tag=3,u}function Y0(u,h,m,N){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var R=N.value;u.payload=function(){return A(R)},u.callback=function(){Ls(h,m,N)}}var J=m.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(u.callback=function(){Ls(h,m,N),typeof A!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var pe=N.stack;this.componentDidCatch(N.value,{componentStack:pe!==null?pe:""})})}function K0(u,h,m,N,A){if(m.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(h=m.alternate,h!==null&&qd(h,m,A,!0),m=bi.current,m!==null){switch(m.tag){case 13:return $a===null?gx():m.alternate===null&&Br===0&&(Br=3),m.flags&=-257,m.flags|=65536,m.lanes=A,N===Cy?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([N]):h.add(N),vx(u,N,A)),!1;case 22:return m.flags|=65536,N===Cy?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([N])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([N]):m.add(N)),vx(u,N,A)),!1}throw Error(a(435,m.tag))}return vx(u,N,A),gx(),!1}if(Nn)return h=bi.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=A,N!==uu&&(u=Error(a(422),{cause:N}),Xo(Ra(u,m)))):(N!==uu&&(h=Error(a(423),{cause:N}),Xo(Ra(h,m))),u=u.current.alternate,u.flags|=65536,A&=-A,u.lanes|=A,N=Ra(N,m),A=Ep(u.stateNode,N,A),hs(u,A),Br!==4&&(Br=2)),!1;var R=Error(a(520),{cause:N});if(R=Ra(R,m),vh===null?vh=[R]:vh.push(R),Br!==4&&(Br=2),h===null)return!0;N=Ra(N,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,u=A&-A,m.lanes|=u,u=Ep(m.stateNode,N,u),hs(m,u),!1;case 1:if(h=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(cl===null||!cl.has(R))))return m.flags|=65536,A&=-A,m.lanes|=A,A=Xy(A),Y0(A,u,m,N),hs(m,A),!1}m=m.return}while(m!==null);return!1}var Q0=Error(a(461)),ca=!1;function wr(u,h,m,N){h.child=u===null?V0(h,null,m,N):sc(h,u.child,m,N)}function Pp(u,h,m,N,A){m=m.render;var R=h.ref;if("ref"in N){var J={};for(var pe in N)pe!=="ref"&&(J[pe]=N[pe])}else J=N;return Ql(h),N=Ey(u,h,m,J,R,A),pe=Oy(),u!==null&&!ca?(tc(u,h,A),mo(u,h,A)):(Nn&&pe&&Ny(h),h.flags|=1,wr(u,h,N,A),h.child)}function Op(u,h,m,N,A){if(u===null){var R=m.type;return typeof R=="function"&&!Gl(R)&&R.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=R,Dp(u,h,R,N,A)):(u=sp(m.type,null,N,h,h.mode,A),u.ref=h.ref,u.return=h,h.child=u)}if(R=u.child,!ms(u,A)){var J=R.memoizedProps;if(m=m.compare,m=m!==null?m:Ds,m(J,N)&&u.ref===h.ref)return mo(u,h,A)}return h.flags|=1,u=La(R,N),u.ref=h.ref,u.return=h,h.child=u}function Dp(u,h,m,N,A){if(u!==null){var R=u.memoizedProps;if(Ds(R,N)&&u.ref===h.ref)if(ca=!1,h.pendingProps=N=R,ms(u,A))(u.flags&131072)!==0&&(ca=!0);else return h.lanes=u.lanes,mo(u,h,A)}return vu(u,h,m,N,A)}function uh(u,h,m){var N=h.pendingProps,A=N.children,R=u!==null?u.memoizedState:null;if(N.mode==="hidden"){if((h.flags&128)!==0){if(N=R!==null?R.baseLanes|m:m,u!==null){for(A=h.child=u.child,R=0;A!==null;)R=R|A.lanes|A.childLanes,A=A.sibling;h.childLanes=R&~N}else h.childLanes=0,h.child=null;return lc(u,h,N,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&up(h,R!==null?R.cachePool:null),R!==null?uo(h,R):fp(),H0(h);else return h.lanes=h.childLanes=536870912,lc(u,h,R!==null?R.baseLanes|m:m,m)}else R!==null?(up(h,R.cachePool),uo(h,R),po(),h.memoizedState=null):(u!==null&&up(h,null),fp(),po());return wr(u,h,A,m),h.child}function lc(u,h,m,N){var A=lo();return A=A===null?null:{parent:hr._currentValue,pool:A},h.memoizedState={baseLanes:m,cachePool:A},u!==null&&up(h,null),fp(),H0(h),u!==null&&qd(u,h,N,!0),null}function Bt(u,h){var m=h.ref;if(m===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(a(284));(u===null||u.ref!==m)&&(h.flags|=4194816)}}function vu(u,h,m,N,A){return Ql(h),m=Ey(u,h,m,N,void 0,A),N=Oy(),u!==null&&!ca?(tc(u,h,A),mo(u,h,A)):(Nn&&N&&Ny(h),h.flags|=1,wr(u,h,m,A),h.child)}function Mp(u,h,m,N,A,R){return Ql(h),h.updateQueue=null,m=P0(h,N,m,A),E0(u),N=Oy(),u!==null&&!ca?(tc(u,h,R),mo(u,h,R)):(Nn&&N&&Ny(h),h.flags|=1,wr(u,h,m,R),h.child)}function al(u,h,m,N,A){if(Ql(h),h.stateNode===null){var R=Hl,J=m.contextType;typeof J=="object"&&J!==null&&(R=Fr(J)),R=new m(N,R),h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=oh,h.stateNode=R,R._reactInternals=h,R=h.stateNode,R.props=N,R.state=h.memoizedState,R.refs={},Jl(h),J=m.contextType,R.context=typeof J=="object"&&J!==null?Fr(J):Hl,R.state=h.memoizedState,J=m.getDerivedStateFromProps,typeof J=="function"&&(xu(h,m,J,N),R.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(J=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),J!==R.state&&oh.enqueueReplaceState(R,R.state,null),_a(h,N,R,A),fs(),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!0}else if(u===null){R=h.stateNode;var pe=h.memoizedProps,Pe=rl(m,pe);R.props=Pe;var Xe=R.context,ot=m.contextType;J=Hl,typeof ot=="object"&&ot!==null&&(J=Fr(ot));var ft=m.getDerivedStateFromProps;ot=typeof ft=="function"||typeof R.getSnapshotBeforeUpdate=="function",pe=h.pendingProps!==pe,ot||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(pe||Xe!==J)&&G0(h,R,N,J),Ms=!1;var tt=h.memoizedState;R.state=tt,_a(h,N,R,A),fs(),Xe=h.memoizedState,pe||tt!==Xe||Ms?(typeof ft=="function"&&(xu(h,m,ft,N),Xe=h.memoizedState),(Pe=Ms||lh(h,m,Pe,N,tt,Xe,J))?(ot||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(h.flags|=4194308)):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=N,h.memoizedState=Xe),R.props=N,R.state=Xe,R.context=J,N=Pe):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!1)}else{R=h.stateNode,fu(u,h),J=h.memoizedProps,ot=rl(m,J),R.props=ot,ft=h.pendingProps,tt=R.context,Xe=m.contextType,Pe=Hl,typeof Xe=="object"&&Xe!==null&&(Pe=Fr(Xe)),pe=m.getDerivedStateFromProps,(Xe=typeof pe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(J!==ft||tt!==Pe)&&G0(h,R,N,Pe),Ms=!1,tt=h.memoizedState,R.state=tt,_a(h,N,R,A),fs();var Ze=h.memoizedState;J!==ft||tt!==Ze||Ms||u!==null&&u.dependencies!==null&&lp(u.dependencies)?(typeof pe=="function"&&(xu(h,m,pe,N),Ze=h.memoizedState),(ot=Ms||lh(h,m,ot,N,tt,Ze,Pe)||u!==null&&u.dependencies!==null&&lp(u.dependencies))?(Xe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(N,Ze,Pe),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(N,Ze,Pe)),typeof R.componentDidUpdate=="function"&&(h.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof R.componentDidUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=1024),h.memoizedProps=N,h.memoizedState=Ze),R.props=N,R.state=Ze,R.context=Pe,N=ot):(typeof R.componentDidUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=1024),N=!1)}return R=N,Bt(u,h),N=(h.flags&128)!==0,R||N?(R=h.stateNode,m=N&&typeof m.getDerivedStateFromError!="function"?null:R.render(),h.flags|=1,u!==null&&N?(h.child=sc(h,u.child,null,A),h.child=sc(h,null,m,A)):wr(u,h,m,A),h.memoizedState=R.state,u=h.child):u=mo(u,h,A),u}function X0(u,h,m,N){return zd(),h.flags|=256,wr(u,h,m,N),h.child}var dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ip(u){return{baseLanes:u,cachePool:N0()}}function ua(u,h,m){return u=u!==null?u.childLanes&~m:0,h&&(u|=Ki),u}function J0(u,h,m){var N=h.pendingProps,A=!1,R=(h.flags&128)!==0,J;if((J=R)||(J=u!==null&&u.memoizedState===null?!1:($r.current&2)!==0),J&&(A=!0,h.flags&=-129),J=(h.flags&32)!==0,h.flags&=-33,u===null){if(Nn){if(A?Wi(h):po(),Nn){var pe=kr,Pe;if(Pe=pe){e:{for(Pe=pe,pe=Ka;Pe.nodeType!==8;){if(!pe){pe=null;break e}if(Pe=ys(Pe.nextSibling),Pe===null){pe=null;break e}}pe=Pe}pe!==null?(h.memoizedState={dehydrated:pe,treeContext:jr!==null?{id:Tr,overflow:oo}:null,retryLane:536870912,hydrationErrors:null},Pe=Ya(18,null,null,0),Pe.stateNode=pe,Pe.return=h,h.child=Pe,Zr=h,kr=null,Pe=!0):Pe=!1}Pe||Vi(h)}if(pe=h.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))return za(pe)?h.lanes=32:h.lanes=536870912,null;Rs(h)}return pe=N.children,N=N.fallback,A?(po(),A=h.mode,pe=hh({mode:"hidden",children:pe},A),N=Wl(N,A,m,null),pe.return=h,N.return=h,pe.sibling=N,h.child=pe,A=h.child,A.memoizedState=Ip(m),A.childLanes=ua(u,J,m),h.memoizedState=dh,N):(Wi(h),Jy(h,pe))}if(Pe=u.memoizedState,Pe!==null&&(pe=Pe.dehydrated,pe!==null)){if(R)h.flags&256?(Wi(h),h.flags&=-257,h=Zy(u,h,m)):h.memoizedState!==null?(po(),h.child=u.child,h.flags|=128,h=null):(po(),A=N.fallback,pe=h.mode,N=hh({mode:"visible",children:N.children},pe),A=Wl(A,pe,m,null),A.flags|=2,N.return=h,A.return=h,N.sibling=A,h.child=N,sc(h,u.child,null,m),N=h.child,N.memoizedState=Ip(m),N.childLanes=ua(u,J,m),h.memoizedState=dh,h=A);else if(Wi(h),za(pe)){if(J=pe.nextSibling&&pe.nextSibling.dataset,J)var Xe=J.dgst;J=Xe,N=Error(a(419)),N.stack="",N.digest=J,Xo({value:N,source:null,stack:null}),h=Zy(u,h,m)}else if(ca||qd(u,h,m,!1),J=(m&u.childLanes)!==0,ca||J){if(J=gr,J!==null&&(N=m&-m,N=(N&42)!==0?1:jt(N),N=(N&(J.suspendedLanes|m))!==0?0:N,N!==0&&N!==Pe.retryLane))throw Pe.retryLane=N,Vl(u,N),Ni(J,u,N),Q0;pe.data==="$?"||gx(),h=Zy(u,h,m)}else pe.data==="$?"?(h.flags|=192,h.child=u.child,h=null):(u=Pe.treeContext,kr=ys(pe.nextSibling),Zr=h,Nn=!0,ds=null,Ka=!1,u!==null&&(qi[Ui++]=Tr,qi[Ui++]=oo,qi[Ui++]=jr,Tr=u.id,oo=u.overflow,jr=h),h=Jy(h,N.children),h.flags|=4096);return h}return A?(po(),A=N.fallback,pe=h.mode,Pe=u.child,Xe=Pe.sibling,N=La(Pe,{mode:"hidden",children:N.children}),N.subtreeFlags=Pe.subtreeFlags&65011712,Xe!==null?A=La(Xe,A):(A=Wl(A,pe,m,null),A.flags|=2),A.return=h,N.return=h,N.sibling=A,h.child=N,N=A,A=h.child,pe=u.child.memoizedState,pe===null?pe=Ip(m):(Pe=pe.cachePool,Pe!==null?(Xe=hr._currentValue,Pe=Pe.parent!==Xe?{parent:Xe,pool:Xe}:Pe):Pe=N0(),pe={baseLanes:pe.baseLanes|m,cachePool:Pe}),A.memoizedState=pe,A.childLanes=ua(u,J,m),h.memoizedState=dh,N):(Wi(h),m=u.child,u=m.sibling,m=La(m,{mode:"visible",children:N.children}),m.return=h,m.sibling=null,u!==null&&(J=h.deletions,J===null?(h.deletions=[u],h.flags|=16):J.push(u)),h.child=m,h.memoizedState=null,m)}function Jy(u,h){return h=hh({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function hh(u,h){return u=Ya(22,u,null,h),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function Zy(u,h,m){return sc(h,u.child,null,m),u=Jy(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function ex(u,h,m){u.lanes|=h;var N=u.alternate;N!==null&&(N.lanes|=h),Qa(u.return,h,m)}function tx(u,h,m,N,A){var R=u.memoizedState;R===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:N,tail:m,tailMode:A}:(R.isBackwards=h,R.rendering=null,R.renderingStartTime=0,R.last=N,R.tail=m,R.tailMode=A)}function Z0(u,h,m){var N=h.pendingProps,A=N.revealOrder,R=N.tail;if(wr(u,h,N.children,m),N=$r.current,(N&2)!==0)N=N&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&ex(u,m,h);else if(u.tag===19)ex(u,m,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}N&=1}switch(K($r,N),A){case"forwards":for(m=h.child,A=null;m!==null;)u=m.alternate,u!==null&&sh(u)===null&&(A=m),m=m.sibling;m=A,m===null?(A=h.child,h.child=null):(A=m.sibling,m.sibling=null),tx(h,!1,A,m,R);break;case"backwards":for(m=null,A=h.child,h.child=null;A!==null;){if(u=A.alternate,u!==null&&sh(u)===null){h.child=A;break}u=A.sibling,A.sibling=m,m=A,A=u}tx(h,!0,m,null,R);break;case"together":tx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function mo(u,h,m){if(u!==null&&(h.dependencies=u.dependencies),ll|=h.lanes,(m&h.childLanes)===0)if(u!==null){if(qd(u,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(a(153));if(h.child!==null){for(u=h.child,m=La(u,u.pendingProps),h.child=m,m.return=h;u.sibling!==null;)u=u.sibling,m=m.sibling=La(u,u.pendingProps),m.return=h;m.sibling=null}return h.child}function ms(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&lp(u)))}function Ba(u,h,m){switch(h.tag){case 3:ve(h,h.stateNode.containerInfo),xi(h,hr,u.memoizedState.cache),zd();break;case 27:case 5:je(h);break;case 4:ve(h,h.stateNode.containerInfo);break;case 10:xi(h,h.type,h.memoizedProps.value);break;case 13:var N=h.memoizedState;if(N!==null)return N.dehydrated!==null?(Wi(h),h.flags|=128,null):(m&h.child.childLanes)!==0?J0(u,h,m):(Wi(h),u=mo(u,h,m),u!==null?u.sibling:null);Wi(h);break;case 19:var A=(u.flags&128)!==0;if(N=(m&h.childLanes)!==0,N||(qd(u,h,m,!1),N=(m&h.childLanes)!==0),A){if(N)return Z0(u,h,m);h.flags|=128}if(A=h.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),K($r,$r.current),N)break;return null;case 22:case 23:return h.lanes=0,uh(u,h,m);case 24:xi(h,hr,u.memoizedState.cache)}return mo(u,h,m)}function Rp(u,h,m){if(u!==null)if(u.memoizedProps!==h.pendingProps)ca=!0;else{if(!ms(u,m)&&(h.flags&128)===0)return ca=!1,Ba(u,h,m);ca=(u.flags&131072)!==0}else ca=!1,Nn&&(h.flags&1048576)!==0&&wy(h,Fd,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var N=h.elementType,A=N._init;if(N=A(N._payload),h.type=N,typeof N=="function")Gl(N)?(u=rl(N,u),h.tag=1,h=al(null,h,N,u,m)):(h.tag=0,h=vu(null,h,N,u,m));else{if(N!=null){if(A=N.$$typeof,A===P){h.tag=11,h=Pp(null,h,N,u,m);break e}else if(A===I){h.tag=14,h=Op(null,h,N,u,m);break e}}throw h=te(N)||N,Error(a(306,h,""))}}return h;case 0:return vu(u,h,h.type,h.pendingProps,m);case 1:return N=h.type,A=rl(N,h.pendingProps),al(u,h,N,A,m);case 3:e:{if(ve(h,h.stateNode.containerInfo),u===null)throw Error(a(387));N=h.pendingProps;var R=h.memoizedState;A=R.element,fu(u,h),_a(h,N,null,m);var J=h.memoizedState;if(N=J.cache,xi(h,hr,N),N!==R.cache&&mn(h,[hr],m,!0),fs(),N=J.element,R.isDehydrated)if(R={element:N,isDehydrated:!1,cache:J.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=X0(u,h,N,m);break e}else if(N!==A){A=Ra(Error(a(424)),h),Xo(A),h=X0(u,h,N,m);break e}else{switch(u=h.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(kr=ys(u.firstChild),Zr=h,Nn=!0,ds=null,Ka=!0,m=V0(h,null,N,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(zd(),N===A){h=mo(u,h,m);break e}wr(u,h,N,m)}h=h.child}return h;case 26:return Bt(u,h),u===null?(m=K1(h.type,null,h.pendingProps,null))?h.memoizedState=m:Nn||(m=h.type,u=h.pendingProps,N=dc(Re.current).createElement(m),N[Cn]=h,N[wn]=u,ra(N,m,u),It(N),h.stateNode=N):h.memoizedState=K1(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:return je(h),u===null&&Nn&&(N=h.stateNode=G1(h.type,h.pendingProps,Re.current),Zr=h,Ka=!0,A=kr,Qi(h.type)?(kx=A,kr=ys(N.firstChild)):kr=A),wr(u,h,h.pendingProps.children,m),Bt(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&Nn&&((A=N=kr)&&(N=V1(N,h.type,h.pendingProps,Ka),N!==null?(h.stateNode=N,Zr=h,kr=ys(N.firstChild),Ka=!1,A=!0):A=!1),A||Vi(h)),je(h),A=h.type,R=h.pendingProps,J=u!==null?u.memoizedProps:null,N=R.children,Zp(A,R)?N=null:J!==null&&Zp(A,J)&&(h.flags|=32),h.memoizedState!==null&&(A=Ey(u,h,Py,null,null,m),Fu._currentValue=A),Bt(u,h),wr(u,h,N,m),h.child;case 6:return u===null&&Nn&&((u=m=kr)&&(m=tm(m,h.pendingProps,Ka),m!==null?(h.stateNode=m,Zr=h,kr=null,u=!0):u=!1),u||Vi(h)),null;case 13:return J0(u,h,m);case 4:return ve(h,h.stateNode.containerInfo),N=h.pendingProps,u===null?h.child=sc(h,null,N,m):wr(u,h,N,m),h.child;case 11:return Pp(u,h,h.type,h.pendingProps,m);case 7:return wr(u,h,h.pendingProps,m),h.child;case 8:return wr(u,h,h.pendingProps.children,m),h.child;case 12:return wr(u,h,h.pendingProps.children,m),h.child;case 10:return N=h.pendingProps,xi(h,h.type,N.value),wr(u,h,N.children,m),h.child;case 9:return A=h.type._context,N=h.pendingProps.children,Ql(h),A=Fr(A),N=N(A),h.flags|=1,wr(u,h,N,m),h.child;case 14:return Op(u,h,h.type,h.pendingProps,m);case 15:return Dp(u,h,h.type,h.pendingProps,m);case 19:return Z0(u,h,m);case 31:return N=h.pendingProps,m=h.mode,N={mode:N.mode,children:N.children},u===null?(m=hh(N,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=La(u.child,N),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return uh(u,h,m);case 24:return Ql(h),N=Fr(hr),u===null?(A=lo(),A===null&&(A=gr,R=Sy(),A.pooledCache=R,R.refCount++,R!==null&&(A.pooledCacheLanes|=m),A=R),h.memoizedState={parent:N,cache:A},Jl(h),xi(h,hr,A)):((u.lanes&m)!==0&&(fu(u,h),_a(h,null,null,m),fs()),A=u.memoizedState,R=h.memoizedState,A.parent!==N?(A={parent:N,cache:N},h.memoizedState=A,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=A),xi(h,hr,N)):(N=R.cache,xi(h,hr,N),N!==A.cache&&mn(h,[hr],m,!0))),wr(u,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function go(u){u.flags|=4}function Lp(u,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!aa(h)){if(h=bi.current,h!==null&&((Dn&4194048)===Dn?$a!==null:(Dn&62914560)!==Dn&&(Dn&536870912)===0||h!==$a))throw hu=Cy,S0;u.flags|=8192}}function Fp(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?_t():536870912,u.lanes|=h,Cu|=h)}function fh(u,h){if(!Nn)switch(u.tailMode){case"hidden":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var N=null;m!==null;)m.alternate!==null&&(N=m),m=m.sibling;N===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:N.sibling=null}}function fr(u){var h=u.alternate!==null&&u.alternate.child===u.child,m=0,N=0;if(h)for(var A=u.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags&65011712,N|=A.flags&65011712,A.return=u,A=A.sibling;else for(A=u.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags,N|=A.flags,A.return=u,A=A.sibling;return u.subtreeFlags|=N,u.childLanes=m,h}function e1(u,h,m){var N=h.pendingProps;switch($d(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fr(h),null;case 1:return fr(h),null;case 3:return m=h.stateNode,N=null,u!==null&&(N=u.memoizedState.cache),h.memoizedState.cache!==N&&(h.flags|=2048),Hi(hr),ae(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Bd(h)?go(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,v0())),fr(h),null;case 26:return m=h.memoizedState,u===null?(go(h),m!==null?(fr(h),Lp(h,m)):(fr(h),h.flags&=-16777217)):m?m!==u.memoizedState?(go(h),fr(h),Lp(h,m)):(fr(h),h.flags&=-16777217):(u.memoizedProps!==N&&go(h),fr(h),h.flags&=-16777217),null;case 27:ue(h),m=Re.current;var A=h.type;if(u!==null&&h.stateNode!=null)u.memoizedProps!==N&&go(h);else{if(!N){if(h.stateNode===null)throw Error(a(166));return fr(h),null}u=Ie.current,Bd(h)?y0(h):(u=G1(A,N,m),h.stateNode=u,go(h))}return fr(h),null;case 5:if(ue(h),m=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==N&&go(h);else{if(!N){if(h.stateNode===null)throw Error(a(166));return fr(h),null}if(u=Ie.current,Bd(h))y0(h);else{switch(A=dc(Re.current),u){case 1:u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=A.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof N.is=="string"?A.createElement("select",{is:N.is}):A.createElement("select"),N.multiple?u.multiple=!0:N.size&&(u.size=N.size);break;default:u=typeof N.is=="string"?A.createElement(m,{is:N.is}):A.createElement(m)}}u[Cn]=h,u[wn]=N;e:for(A=h.child;A!==null;){if(A.tag===5||A.tag===6)u.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}h.stateNode=u;e:switch(ra(u,m,N),m){case"button":case"input":case"select":case"textarea":u=!!N.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&go(h)}}return fr(h),h.flags&=-16777217,null;case 6:if(u&&h.stateNode!=null)u.memoizedProps!==N&&go(h);else{if(typeof N!="string"&&h.stateNode===null)throw Error(a(166));if(u=Re.current,Bd(h)){if(u=h.stateNode,m=h.memoizedProps,N=null,A=Zr,A!==null)switch(A.tag){case 27:case 5:N=A.memoizedProps}u[Cn]=h,u=!!(u.nodeValue===m||N!==null&&N.suppressHydrationWarning===!0||B1(u.nodeValue,m)),u||Vi(h)}else u=dc(u).createTextNode(N),u[Cn]=h,h.stateNode=u}return fr(h),null;case 13:if(N=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(A=Bd(h),N!==null&&N.dehydrated!==null){if(u===null){if(!A)throw Error(a(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));A[Cn]=h}else zd(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;fr(h),A=!1}else A=v0(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=A),A=!0;if(!A)return h.flags&256?(Rs(h),h):(Rs(h),null)}if(Rs(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=N!==null,u=u!==null&&u.memoizedState!==null,m){N=h.child,A=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(A=N.alternate.memoizedState.cachePool.pool);var R=null;N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(R=N.memoizedState.cachePool.pool),R!==A&&(N.flags|=2048)}return m!==u&&m&&(h.child.flags|=8192),Fp(h,h.updateQueue),fr(h),null;case 4:return ae(),u===null&&Sx(h.stateNode.containerInfo),fr(h),null;case 10:return Hi(h.type),fr(h),null;case 19:if(we($r),A=h.memoizedState,A===null)return fr(h),null;if(N=(h.flags&128)!==0,R=A.rendering,R===null)if(N)fh(A,!1);else{if(Br!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(R=sh(u),R!==null){for(h.flags|=128,fh(A,!1),u=R.updateQueue,h.updateQueue=u,Fp(h,u),h.subtreeFlags=0,u=m,m=h.child;m!==null;)Ld(m,u),m=m.sibling;return K($r,$r.current&1|2),h.child}u=u.sibling}A.tail!==null&&ee()>Tu&&(h.flags|=128,N=!0,fh(A,!1),h.lanes=4194304)}else{if(!N)if(u=sh(R),u!==null){if(h.flags|=128,N=!0,u=u.updateQueue,h.updateQueue=u,Fp(h,u),fh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!R.alternate&&!Nn)return fr(h),null}else 2*ee()-A.renderingStartTime>Tu&&m!==536870912&&(h.flags|=128,N=!0,fh(A,!1),h.lanes=4194304);A.isBackwards?(R.sibling=h.child,h.child=R):(u=A.last,u!==null?u.sibling=R:h.child=R,A.last=R)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=ee(),h.sibling=null,u=$r.current,K($r,N?u&1|2:u&1),h):(fr(h),null);case 22:case 23:return Rs(h),Ay(),N=h.memoizedState!==null,u!==null?u.memoizedState!==null!==N&&(h.flags|=8192):N&&(h.flags|=8192),N?(m&536870912)!==0&&(h.flags&128)===0&&(fr(h),h.subtreeFlags&6&&(h.flags|=8192)):fr(h),m=h.updateQueue,m!==null&&Fp(h,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),N=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(N=h.memoizedState.cachePool.pool),N!==m&&(h.flags|=2048),u!==null&&we(Xl),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Hi(hr),fr(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function t1(u,h){switch($d(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Hi(hr),ae(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return ue(h),null;case 13:if(Rs(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(a(340));zd()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return we($r),null;case 4:return ae(),null;case 10:return Hi(h.type),null;case 22:case 23:return Rs(h),Ay(),u!==null&&we(Xl),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return Hi(hr),null;case 25:return null;default:return null}}function n1(u,h){switch($d(h),h.tag){case 3:Hi(hr),ae();break;case 26:case 27:case 5:ue(h);break;case 4:ae();break;case 13:Rs(h);break;case 19:we($r);break;case 10:Hi(h.type);break;case 22:case 23:Rs(h),Ay(),u!==null&&we(Xl);break;case 24:Hi(hr)}}function ph(u,h){try{var m=h.updateQueue,N=m!==null?m.lastEffect:null;if(N!==null){var A=N.next;m=A;do{if((m.tag&u)===u){N=void 0;var R=m.create,J=m.inst;N=R(),J.destroy=N}m=m.next}while(m!==A)}}catch(pe){pr(h,h.return,pe)}}function il(u,h,m){try{var N=h.updateQueue,A=N!==null?N.lastEffect:null;if(A!==null){var R=A.next;N=R;do{if((N.tag&u)===u){var J=N.inst,pe=J.destroy;if(pe!==void 0){J.destroy=void 0,A=h;var Pe=m,Xe=pe;try{Xe()}catch(ot){pr(A,Pe,ot)}}}N=N.next}while(N!==R)}}catch(ot){pr(h,h.return,ot)}}function r1(u){var h=u.updateQueue;if(h!==null){var m=u.stateNode;try{ky(h,m)}catch(N){pr(u,u.return,N)}}}function nx(u,h,m){m.props=rl(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(N){pr(u,h,N)}}function bu(u,h){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var N=u.stateNode;break;case 30:N=u.stateNode;break;default:N=u.stateNode}typeof m=="function"?u.refCleanup=m(N):m.current=N}}catch(A){pr(u,h,A)}}function Fs(u,h){var m=u.ref,N=u.refCleanup;if(m!==null)if(typeof N=="function")try{N()}catch(A){pr(u,h,A)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){pr(u,h,A)}else m.current=null}function $p(u){var h=u.type,m=u.memoizedProps,N=u.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&N.focus();break e;case"img":m.src?N.src=m.src:m.srcSet&&(N.srcset=m.srcSet)}}catch(A){pr(u,u.return,A)}}function Bp(u,h,m){try{var N=u.stateNode;v_(N,u.type,m,h),N[wn]=h}catch(A){pr(u,u.return,A)}}function ju(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Qi(u.type)||u.tag===4}function mh(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||ju(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Qi(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function zp(u,h,m){var N=u.tag;if(N===5||N===6)u=u.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(u),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=Xp));else if(N!==4&&(N===27&&Qi(u.type)&&(m=u.stateNode,h=null),u=u.child,u!==null))for(zp(u,h,m),u=u.sibling;u!==null;)zp(u,h,m),u=u.sibling}function gh(u,h,m){var N=u.tag;if(N===5||N===6)u=u.stateNode,h?m.insertBefore(u,h):m.appendChild(u);else if(N!==4&&(N===27&&Qi(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(gh(u,h,m),u=u.sibling;u!==null;)gh(u,h,m),u=u.sibling}function yh(u){var h=u.stateNode,m=u.memoizedProps;try{for(var N=u.type,A=h.attributes;A.length;)h.removeAttributeNode(A[0]);ra(h,N,m),h[Cn]=u,h[wn]=m}catch(R){pr(u,u.return,R)}}var $s=!1,Yn=!1,yo=!1,a1=typeof WeakSet=="function"?WeakSet:Set,ta=null;function i_(u,h){if(u=u.containerInfo,gs=im,u=m0(u),xy(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var N=m.getSelection&&m.getSelection();if(N&&N.rangeCount!==0){m=N.anchorNode;var A=N.anchorOffset,R=N.focusNode;N=N.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var J=0,pe=-1,Pe=-1,Xe=0,ot=0,ft=u,tt=null;t:for(;;){for(var Ze;ft!==m||A!==0&&ft.nodeType!==3||(pe=J+A),ft!==R||N!==0&&ft.nodeType!==3||(Pe=J+N),ft.nodeType===3&&(J+=ft.nodeValue.length),(Ze=ft.firstChild)!==null;)tt=ft,ft=Ze;for(;;){if(ft===u)break t;if(tt===m&&++Xe===A&&(pe=J),tt===R&&++ot===N&&(Pe=J),(Ze=ft.nextSibling)!==null)break;ft=tt,tt=ft.parentNode}ft=Ze}m=pe===-1||Pe===-1?null:{start:pe,end:Pe}}else m=null}m=m||{start:0,end:0}}else m=null;for(Jp={focusedElem:u,selectionRange:m},im=!1,ta=h;ta!==null;)if(h=ta,u=h.child,(h.subtreeFlags&1024)!==0&&u!==null)u.return=h,ta=u;else for(;ta!==null;){switch(h=ta,R=h.alternate,u=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&R!==null){u=void 0,m=h,A=R.memoizedProps,R=R.memoizedState,N=m.stateNode;try{var Ht=rl(m.type,A,m.elementType===m.type);u=N.getSnapshotBeforeUpdate(Ht,R),N.__reactInternalSnapshotBeforeUpdate=u}catch(Vt){pr(m,m.return,Vt)}}break;case 3:if((u&1024)!==0){if(u=h.stateNode.containerInfo,m=u.nodeType,m===9)Tx(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Tx(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(a(163))}if(u=h.sibling,u!==null){u.return=h.return,ta=u;break}ta=h.return}}function i1(u,h,m){var N=m.flags;switch(m.tag){case 0:case 11:case 15:sl(u,m),N&4&&ph(5,m);break;case 1:if(sl(u,m),N&4)if(u=m.stateNode,h===null)try{u.componentDidMount()}catch(J){pr(m,m.return,J)}else{var A=rl(m.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(A,h,u.__reactInternalSnapshotBeforeUpdate)}catch(J){pr(m,m.return,J)}}N&64&&r1(m),N&512&&bu(m,m.return);break;case 3:if(sl(u,m),N&64&&(u=m.updateQueue,u!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{ky(u,h)}catch(J){pr(m,m.return,J)}}break;case 27:h===null&&N&4&&yh(m);case 26:case 5:sl(u,m),h===null&&N&4&&$p(m),N&512&&bu(m,m.return);break;case 12:sl(u,m);break;case 13:sl(u,m),N&4&&l1(u,m),N&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=Gp.bind(null,m),Du(u,m))));break;case 22:if(N=m.memoizedState!==null||$s,!N){h=h!==null&&h.memoizedState!==null||Yn,A=$s;var R=Yn;$s=N,(Yn=h)&&!R?vo(u,m,(m.subtreeFlags&8772)!==0):sl(u,m),$s=A,Yn=R}break;case 30:break;default:sl(u,m)}}function s1(u){var h=u.alternate;h!==null&&(u.alternate=null,s1(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Sd(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ar=null,ti=!1;function xo(u,h,m){for(m=m.child;m!==null;)o1(u,h,m),m=m.sibling}function o1(u,h,m){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(W,m)}catch{}switch(m.tag){case 26:Yn||Fs(m,h),xo(u,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Yn||Fs(m,h);var N=Ar,A=ti;Qi(m.type)&&(Ar=m.stateNode,ti=!1),xo(u,h,m),kh(m.stateNode),Ar=N,ti=A;break;case 5:Yn||Fs(m,h);case 6:if(N=Ar,A=ti,Ar=null,xo(u,h,m),Ar=N,ti=A,Ar!==null)if(ti)try{(Ar.nodeType===9?Ar.body:Ar.nodeName==="HTML"?Ar.ownerDocument.body:Ar).removeChild(m.stateNode)}catch(R){pr(m,h,R)}else try{Ar.removeChild(m.stateNode)}catch(R){pr(m,h,R)}break;case 18:Ar!==null&&(ti?(u=Ar,em(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Rh(u)):em(Ar,m.stateNode));break;case 4:N=Ar,A=ti,Ar=m.stateNode.containerInfo,ti=!0,xo(u,h,m),Ar=N,ti=A;break;case 0:case 11:case 14:case 15:Yn||il(2,m,h),Yn||il(4,m,h),xo(u,h,m);break;case 1:Yn||(Fs(m,h),N=m.stateNode,typeof N.componentWillUnmount=="function"&&nx(m,h,N)),xo(u,h,m);break;case 21:xo(u,h,m);break;case 22:Yn=(N=Yn)||m.memoizedState!==null,xo(u,h,m),Yn=N;break;default:xo(u,h,m)}}function l1(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Rh(u)}catch(m){pr(h,h.return,m)}}function s_(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new a1),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new a1),h;default:throw Error(a(435,u.tag))}}function rx(u,h){var m=s_(u);h.forEach(function(N){var A=h_.bind(null,u,N);m.has(N)||(m.add(N),N.then(A,A))})}function ji(u,h){var m=h.deletions;if(m!==null)for(var N=0;N<m.length;N++){var A=m[N],R=u,J=h,pe=J;e:for(;pe!==null;){switch(pe.tag){case 27:if(Qi(pe.type)){Ar=pe.stateNode,ti=!1;break e}break;case 5:Ar=pe.stateNode,ti=!1;break e;case 3:case 4:Ar=pe.stateNode.containerInfo,ti=!0;break e}pe=pe.return}if(Ar===null)throw Error(a(160));o1(R,J,A),Ar=null,ti=!1,R=A.alternate,R!==null&&(R.return=null),A.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)ax(h,u),h=h.sibling}var Yi=null;function ax(u,h){var m=u.alternate,N=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:ji(h,u),ni(u),N&4&&(il(3,u,u.return),ph(3,u),il(5,u,u.return));break;case 1:ji(h,u),ni(u),N&512&&(Yn||m===null||Fs(m,m.return)),N&64&&$s&&(u=u.updateQueue,u!==null&&(N=u.callbacks,N!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?N:m.concat(N))));break;case 26:var A=Yi;if(ji(h,u),ni(u),N&512&&(Yn||m===null||Fs(m,m.return)),N&4){var R=m!==null?m.memoizedState:null;if(N=u.memoizedState,m===null)if(N===null)if(u.stateNode===null){e:{N=u.type,m=u.memoizedProps,A=A.ownerDocument||A;t:switch(N){case"title":R=A.getElementsByTagName("title")[0],(!R||R[Bl]||R[Cn]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=A.createElement(N),A.head.insertBefore(R,A.querySelector("head > title"))),ra(R,N,m),R[Cn]=u,It(R),N=R;break e;case"link":var J=J1("link","href",A).get(N+(m.href||""));if(J){for(var pe=0;pe<J.length;pe++)if(R=J[pe],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){J.splice(pe,1);break t}}R=A.createElement(N),ra(R,N,m),A.head.appendChild(R);break;case"meta":if(J=J1("meta","content",A).get(N+(m.content||""))){for(pe=0;pe<J.length;pe++)if(R=J[pe],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){J.splice(pe,1);break t}}R=A.createElement(N),ra(R,N,m),A.head.appendChild(R);break;default:throw Error(a(468,N))}R[Cn]=u,It(R),N=R}u.stateNode=N}else Z1(A,u.type,u.stateNode);else u.stateNode=X1(A,N,u.memoizedProps);else R!==N?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,N===null?Z1(A,u.type,u.stateNode):X1(A,N,u.memoizedProps)):N===null&&u.stateNode!==null&&Bp(u,u.memoizedProps,m.memoizedProps)}break;case 27:ji(h,u),ni(u),N&512&&(Yn||m===null||Fs(m,m.return)),m!==null&&N&4&&Bp(u,u.memoizedProps,m.memoizedProps);break;case 5:if(ji(h,u),ni(u),N&512&&(Yn||m===null||Fs(m,m.return)),u.flags&32){A=u.stateNode;try{Uo(A,"")}catch(Ze){pr(u,u.return,Ze)}}N&4&&u.stateNode!=null&&(A=u.memoizedProps,Bp(u,A,m!==null?m.memoizedProps:A)),N&1024&&(yo=!0);break;case 6:if(ji(h,u),ni(u),N&4){if(u.stateNode===null)throw Error(a(162));N=u.memoizedProps,m=u.stateNode;try{m.nodeValue=N}catch(Ze){pr(u,u.return,Ze)}}break;case 3:if(Lu=null,A=Yi,Yi=on(h.containerInfo),ji(h,u),Yi=A,ni(u),N&4&&m!==null&&m.memoizedState.isDehydrated)try{Rh(h.containerInfo)}catch(Ze){pr(u,u.return,Ze)}yo&&(yo=!1,c1(u));break;case 4:N=Yi,Yi=on(u.stateNode.containerInfo),ji(h,u),ni(u),Yi=N;break;case 12:ji(h,u),ni(u);break;case 13:ji(h,u),ni(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(dx=ee()),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,rx(u,N)));break;case 22:A=u.memoizedState!==null;var Pe=m!==null&&m.memoizedState!==null,Xe=$s,ot=Yn;if($s=Xe||A,Yn=ot||Pe,ji(h,u),Yn=ot,$s=Xe,ni(u),N&8192)e:for(h=u.stateNode,h._visibility=A?h._visibility&-2:h._visibility|1,A&&(m===null||Pe||$s||Yn||cc(u)),m=null,h=u;;){if(h.tag===5||h.tag===26){if(m===null){Pe=m=h;try{if(R=Pe.stateNode,A)J=R.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{pe=Pe.stateNode;var ft=Pe.memoizedProps.style,tt=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;pe.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Ze){pr(Pe,Pe.return,Ze)}}}else if(h.tag===6){if(m===null){Pe=h;try{Pe.stateNode.nodeValue=A?"":Pe.memoizedProps}catch(Ze){pr(Pe,Pe.return,Ze)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}N&4&&(N=u.updateQueue,N!==null&&(m=N.retryQueue,m!==null&&(N.retryQueue=null,rx(u,m))));break;case 19:ji(h,u),ni(u),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,rx(u,N)));break;case 30:break;case 21:break;default:ji(h,u),ni(u)}}function ni(u){var h=u.flags;if(h&2){try{for(var m,N=u.return;N!==null;){if(ju(N)){m=N;break}N=N.return}if(m==null)throw Error(a(160));switch(m.tag){case 27:var A=m.stateNode,R=mh(u);gh(u,R,A);break;case 5:var J=m.stateNode;m.flags&32&&(Uo(J,""),m.flags&=-33);var pe=mh(u);gh(u,pe,J);break;case 3:case 4:var Pe=m.stateNode.containerInfo,Xe=mh(u);zp(u,Xe,Pe);break;default:throw Error(a(161))}}catch(ot){pr(u,u.return,ot)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function c1(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;c1(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),u=u.sibling}}function sl(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)i1(u,h.alternate,h),h=h.sibling}function cc(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:il(4,h,h.return),cc(h);break;case 1:Fs(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&nx(h,h.return,m),cc(h);break;case 27:kh(h.stateNode);case 26:case 5:Fs(h,h.return),cc(h);break;case 22:h.memoizedState===null&&cc(h);break;case 30:cc(h);break;default:cc(h)}u=u.sibling}}function vo(u,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var N=h.alternate,A=u,R=h,J=R.flags;switch(R.tag){case 0:case 11:case 15:vo(A,R,m),ph(4,R);break;case 1:if(vo(A,R,m),N=R,A=N.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Xe){pr(N,N.return,Xe)}if(N=R,A=N.updateQueue,A!==null){var pe=N.stateNode;try{var Pe=A.shared.hiddenCallbacks;if(Pe!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Pe.length;A++)k0(Pe[A],pe)}catch(Xe){pr(N,N.return,Xe)}}m&&J&64&&r1(R),bu(R,R.return);break;case 27:yh(R);case 26:case 5:vo(A,R,m),m&&N===null&&J&4&&$p(R),bu(R,R.return);break;case 12:vo(A,R,m);break;case 13:vo(A,R,m),m&&J&4&&l1(A,R);break;case 22:R.memoizedState===null&&vo(A,R,m),bu(R,R.return);break;case 30:break;default:vo(A,R,m)}h=h.sibling}}function ix(u,h){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Ud(m))}function sx(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Ud(u))}function Bs(u,h,m,N){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)u1(u,h,m,N),h=h.sibling}function u1(u,h,m,N){var A=h.flags;switch(h.tag){case 0:case 11:case 15:Bs(u,h,m,N),A&2048&&ph(9,h);break;case 1:Bs(u,h,m,N);break;case 3:Bs(u,h,m,N),A&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Ud(u)));break;case 12:if(A&2048){Bs(u,h,m,N),u=h.stateNode;try{var R=h.memoizedProps,J=R.id,pe=R.onPostCommit;typeof pe=="function"&&pe(J,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Pe){pr(h,h.return,Pe)}}else Bs(u,h,m,N);break;case 13:Bs(u,h,m,N);break;case 23:break;case 22:R=h.stateNode,J=h.alternate,h.memoizedState!==null?R._visibility&2?Bs(u,h,m,N):xh(u,h):R._visibility&2?Bs(u,h,m,N):(R._visibility|=2,wu(u,h,m,N,(h.subtreeFlags&10256)!==0)),A&2048&&ix(J,h);break;case 24:Bs(u,h,m,N),A&2048&&sx(h.alternate,h);break;default:Bs(u,h,m,N)}}function wu(u,h,m,N,A){for(A=A&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var R=u,J=h,pe=m,Pe=N,Xe=J.flags;switch(J.tag){case 0:case 11:case 15:wu(R,J,pe,Pe,A),ph(8,J);break;case 23:break;case 22:var ot=J.stateNode;J.memoizedState!==null?ot._visibility&2?wu(R,J,pe,Pe,A):xh(R,J):(ot._visibility|=2,wu(R,J,pe,Pe,A)),A&&Xe&2048&&ix(J.alternate,J);break;case 24:wu(R,J,pe,Pe,A),A&&Xe&2048&&sx(J.alternate,J);break;default:wu(R,J,pe,Pe,A)}h=h.sibling}}function xh(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=u,N=h,A=N.flags;switch(N.tag){case 22:xh(m,N),A&2048&&ix(N.alternate,N);break;case 24:xh(m,N),A&2048&&sx(N.alternate,N);break;default:xh(m,N)}h=h.sibling}}var Ta=8192;function Nu(u){if(u.subtreeFlags&Ta)for(u=u.child;u!==null;)d1(u),u=u.sibling}function d1(u){switch(u.tag){case 26:Nu(u),u.flags&Ta&&u.memoizedState!==null&&P_(Yi,u.memoizedState,u.memoizedProps);break;case 5:Nu(u);break;case 3:case 4:var h=Yi;Yi=on(u.stateNode.containerInfo),Nu(u),Yi=h;break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=Ta,Ta=16777216,Nu(u),Ta=h):Nu(u));break;default:Nu(u)}}function h1(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Su(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];ta=N,p1(N,u)}h1(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)f1(u),u=u.sibling}function f1(u){switch(u.tag){case 0:case 11:case 15:Su(u),u.flags&2048&&il(9,u,u.return);break;case 3:Su(u);break;case 12:Su(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,qp(u)):Su(u);break;default:Su(u)}}function qp(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];ta=N,p1(N,u)}h1(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:il(8,h,h.return),qp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,qp(h));break;default:qp(h)}u=u.sibling}}function p1(u,h){for(;ta!==null;){var m=ta;switch(m.tag){case 0:case 11:case 15:il(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var N=m.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:Ud(m.memoizedState.cache)}if(N=m.child,N!==null)N.return=m,ta=N;else e:for(m=u;ta!==null;){N=ta;var A=N.sibling,R=N.return;if(s1(N),N===m){ta=null;break e}if(A!==null){A.return=R,ta=A;break e}ta=R}}}var o_={getCacheForType:function(u){var h=Fr(hr),m=h.data.get(u);return m===void 0&&(m=u(),h.data.set(u,m)),m}},ox=typeof WeakMap=="function"?WeakMap:Map,er=0,gr=null,bn=null,Dn=0,tr=0,wi=null,ol=!1,_u=!1,lx=!1,bo=0,Br=0,ll=0,uc=0,cx=0,Ki=0,Cu=0,vh=null,ri=null,ux=!1,dx=0,Tu=1/0,bh=null,cl=null,xa=0,ul=null,ku=null,Au=0,hx=0,fx=null,m1=null,Eu=0,px=null;function ka(){if((er&2)!==0&&Dn!==0)return Dn&-Dn;if(q.T!==null){var u=du;return u!==0?u:Kp()}return Xn()}function g1(){Ki===0&&(Ki=(Dn&536870912)===0||Nn?ut():536870912);var u=bi.current;return u!==null&&(u.flags|=32),Ki}function Ni(u,h,m){(u===gr&&(tr===2||tr===9)||u.cancelPendingCommit!==null)&&(Pu(u,0),dl(u,Dn,Ki,!1)),ke(u,m),((er&2)===0||u!==gr)&&(u===gr&&((er&2)===0&&(uc|=m),Br===4&&dl(u,Dn,Ki,!1)),zs(u))}function y1(u,h,m){if((er&6)!==0)throw Error(a(327));var N=!m&&(h&124)===0&&(h&u.expiredLanes)===0||Je(u,h),A=N?u_(u,h):yx(u,h,!0),R=N;do{if(A===0){_u&&!N&&dl(u,h,0,!1);break}else{if(m=u.current.alternate,R&&!l_(m)){A=yx(u,h,!1),R=!1;continue}if(A===2){if(R=h,u.errorRecoveryDisabledLanes&R)var J=0;else J=u.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){h=J;e:{var pe=u;A=vh;var Pe=pe.current.memoizedState.isDehydrated;if(Pe&&(Pu(pe,J).flags|=256),J=yx(pe,J,!1),J!==2){if(lx&&!Pe){pe.errorRecoveryDisabledLanes|=R,uc|=R,A=4;break e}R=ri,ri=A,R!==null&&(ri===null?ri=R:ri.push.apply(ri,R))}A=J}if(R=!1,A!==2)continue}}if(A===1){Pu(u,0),dl(u,h,0,!0);break}e:{switch(N=u,R=A,R){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:dl(N,h,Ki,!ol);break e;case 2:ri=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(A=dx+300-ee(),10<A)){if(dl(N,h,Ki,!ol),De(N,0,!0)!==0)break e;N.timeoutHandle=z1(x1.bind(null,N,m,ri,bh,ux,h,Ki,uc,Cu,ol,R,2,-0,0),A);break e}x1(N,m,ri,bh,ux,h,Ki,uc,Cu,ol,R,0,-0,0)}}break}while(!0);zs(u)}function x1(u,h,m,N,A,R,J,pe,Pe,Xe,ot,ft,tt,Ze){if(u.timeoutHandle=-1,ft=h.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(da={stylesheets:null,count:0,unsuspend:E_},d1(h),ft=O_(),ft!==null)){u.cancelPendingCommit=ft(jh.bind(null,u,h,R,m,N,A,J,pe,Pe,ot,1,tt,Ze)),dl(u,R,J,!Xe);return}jh(u,h,R,m,N,A,J,pe,Pe)}function l_(u){for(var h=u;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var N=0;N<m.length;N++){var A=m[N],R=A.getSnapshot;A=A.value;try{if(!gi(R(),A))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function dl(u,h,m,N){h&=~cx,h&=~uc,u.suspendedLanes|=h,u.pingedLanes&=~h,N&&(u.warmLanes|=h),N=u.expirationTimes;for(var A=h;0<A;){var R=31-ge(A),J=1<<R;N[R]=-1,A&=~J}m!==0&&Tt(u,m,h)}function Up(){return(er&6)===0?(Sh(0),!1):!0}function mx(){if(bn!==null){if(tr===0)var u=bn.return;else u=bn,fe=Jo=null,pp(u),ea=null,ei=0,u=bn;for(;u!==null;)n1(u.alternate,u),u=u.return;bn=null}}function Pu(u,h){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,j_(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),mx(),gr=u,bn=m=La(u.current,null),Dn=h,tr=0,wi=null,ol=!1,_u=Je(u,h),lx=!1,Cu=Ki=cx=uc=ll=Br=0,ri=vh=null,ux=!1,(h&8)!==0&&(h|=h&32);var N=u.entangledLanes;if(N!==0)for(u=u.entanglements,N&=h;0<N;){var A=31-ge(N),R=1<<A;h|=u[A],N&=~R}return bo=h,Ul(),m}function v1(u,h){fn=null,q.H=ah,h===Fa||h===dp?(h=C0(),tr=3):h===S0?(h=C0(),tr=4):tr=h===Q0?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,wi=h,bn===null&&(Br=1,ch(u,Ra(h,u.current)))}function b1(){var u=q.H;return q.H=ah,u===null?ah:u}function j1(){var u=q.A;return q.A=o_,u}function gx(){Br=4,ol||(Dn&4194048)!==Dn&&bi.current!==null||(_u=!0),(ll&134217727)===0&&(uc&134217727)===0||gr===null||dl(gr,Dn,Ki,!1)}function yx(u,h,m){var N=er;er|=2;var A=b1(),R=j1();(gr!==u||Dn!==h)&&(bh=null,Pu(u,h)),h=!1;var J=Br;e:do try{if(tr!==0&&bn!==null){var pe=bn,Pe=wi;switch(tr){case 8:mx(),J=6;break e;case 3:case 2:case 9:case 6:bi.current===null&&(h=!0);var Xe=tr;if(tr=0,wi=null,Ou(u,pe,Pe,Xe),m&&_u){J=0;break e}break;default:Xe=tr,tr=0,wi=null,Ou(u,pe,Pe,Xe)}}c_(),J=Br;break}catch(ot){v1(u,ot)}while(!0);return h&&u.shellSuspendCounter++,fe=Jo=null,er=N,q.H=A,q.A=R,bn===null&&(gr=null,Dn=0,Ul()),J}function c_(){for(;bn!==null;)xx(bn)}function u_(u,h){var m=er;er|=2;var N=b1(),A=j1();gr!==u||Dn!==h?(bh=null,Tu=ee()+500,Pu(u,h)):_u=Je(u,h);e:do try{if(tr!==0&&bn!==null){h=bn;var R=wi;t:switch(tr){case 1:tr=0,wi=null,Ou(u,h,R,1);break;case 2:case 9:if(_0(R)){tr=0,wi=null,N1(h);break}h=function(){tr!==2&&tr!==9||gr!==u||(tr=7),zs(u)},R.then(h,h);break e;case 3:tr=7;break e;case 4:tr=5;break e;case 7:_0(R)?(tr=0,wi=null,N1(h)):(tr=0,wi=null,Ou(u,h,R,7));break;case 5:var J=null;switch(bn.tag){case 26:J=bn.memoizedState;case 5:case 27:var pe=bn;if(!J||aa(J)){tr=0,wi=null;var Pe=pe.sibling;if(Pe!==null)bn=Pe;else{var Xe=pe.return;Xe!==null?(bn=Xe,Vp(Xe)):bn=null}break t}}tr=0,wi=null,Ou(u,h,R,5);break;case 6:tr=0,wi=null,Ou(u,h,R,6);break;case 8:mx(),Br=6;break e;default:throw Error(a(462))}}w1();break}catch(ot){v1(u,ot)}while(!0);return fe=Jo=null,q.H=N,q.A=A,er=m,bn!==null?0:(gr=null,Dn=0,Ul(),Br)}function w1(){for(;bn!==null&&!ie();)xx(bn)}function xx(u){var h=Rp(u.alternate,u,bo);u.memoizedProps=u.pendingProps,h===null?Vp(u):bn=h}function N1(u){var h=u,m=h.alternate;switch(h.tag){case 15:case 0:h=Mp(m,h,h.pendingProps,h.type,void 0,Dn);break;case 11:h=Mp(m,h,h.pendingProps,h.type.render,h.ref,Dn);break;case 5:pp(h);default:n1(m,h),h=bn=Ld(h,bo),h=Rp(m,h,bo)}u.memoizedProps=u.pendingProps,h===null?Vp(u):bn=h}function Ou(u,h,m,N){fe=Jo=null,pp(h),ea=null,ei=0;var A=h.return;try{if(K0(u,A,h,m,Dn)){Br=1,ch(u,Ra(m,u.current)),bn=null;return}}catch(R){if(A!==null)throw bn=A,R;Br=1,ch(u,Ra(m,u.current)),bn=null;return}h.flags&32768?(Nn||N===1?u=!0:_u||(Dn&536870912)!==0?u=!1:(ol=u=!0,(N===2||N===9||N===3||N===6)&&(N=bi.current,N!==null&&N.tag===13&&(N.flags|=16384))),S1(h,u)):Vp(h)}function Vp(u){var h=u;do{if((h.flags&32768)!==0){S1(h,ol);return}u=h.return;var m=e1(h.alternate,h,bo);if(m!==null){bn=m;return}if(h=h.sibling,h!==null){bn=h;return}bn=h=u}while(h!==null);Br===0&&(Br=5)}function S1(u,h){do{var m=t1(u.alternate,u);if(m!==null){m.flags&=32767,bn=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(u=u.sibling,u!==null)){bn=u;return}bn=u=m}while(u!==null);Br=6,bn=null}function jh(u,h,m,N,A,R,J,pe,Pe){u.cancelPendingCommit=null;do Hp();while(xa!==0);if((er&6)!==0)throw Error(a(327));if(h!==null){if(h===u.current)throw Error(a(177));if(R=h.lanes|h.childLanes,R|=by,lt(u,m,R,J,pe,Pe),u===gr&&(bn=gr=null,Dn=0),ku=h,ul=u,Au=m,hx=R,fx=A,m1=N,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,O1(Ne,function(){return A1(),null})):(u.callbackNode=null,u.callbackPriority=0),N=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||N){N=q.T,q.T=null,A=Y.p,Y.p=2,J=er,er|=4;try{i_(u,h,m)}finally{er=J,Y.p=A,q.T=N}}xa=1,_1(),C1(),T1()}}function _1(){if(xa===1){xa=0;var u=ul,h=ku,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=q.T,q.T=null;var N=Y.p;Y.p=2;var A=er;er|=4;try{ax(h,u);var R=Jp,J=m0(u.containerInfo),pe=R.focusedElem,Pe=R.selectionRange;if(J!==pe&&pe&&pe.ownerDocument&&p0(pe.ownerDocument.documentElement,pe)){if(Pe!==null&&xy(pe)){var Xe=Pe.start,ot=Pe.end;if(ot===void 0&&(ot=Xe),"selectionStart"in pe)pe.selectionStart=Xe,pe.selectionEnd=Math.min(ot,pe.value.length);else{var ft=pe.ownerDocument||document,tt=ft&&ft.defaultView||window;if(tt.getSelection){var Ze=tt.getSelection(),Ht=pe.textContent.length,Vt=Math.min(Pe.start,Ht),sr=Pe.end===void 0?Vt:Math.min(Pe.end,Ht);!Ze.extend&&Vt>sr&&(J=sr,sr=Vt,Vt=J);var Ye=yy(pe,Vt),Be=yy(pe,sr);if(Ye&&Be&&(Ze.rangeCount!==1||Ze.anchorNode!==Ye.node||Ze.anchorOffset!==Ye.offset||Ze.focusNode!==Be.node||Ze.focusOffset!==Be.offset)){var Qe=ft.createRange();Qe.setStart(Ye.node,Ye.offset),Ze.removeAllRanges(),Vt>sr?(Ze.addRange(Qe),Ze.extend(Be.node,Be.offset)):(Qe.setEnd(Be.node,Be.offset),Ze.addRange(Qe))}}}}for(ft=[],Ze=pe;Ze=Ze.parentNode;)Ze.nodeType===1&&ft.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<ft.length;pe++){var dt=ft[pe];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}im=!!gs,Jp=gs=null}finally{er=A,Y.p=N,q.T=m}}u.current=h,xa=2}}function C1(){if(xa===2){xa=0;var u=ul,h=ku,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=q.T,q.T=null;var N=Y.p;Y.p=2;var A=er;er|=4;try{i1(u,h.alternate,h)}finally{er=A,Y.p=N,q.T=m}}xa=3}}function T1(){if(xa===4||xa===3){xa=0,xe();var u=ul,h=ku,m=Au,N=m1;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?xa=5:(xa=0,ku=ul=null,k1(u,u.pendingLanes));var A=u.pendingLanes;if(A===0&&(cl=null),Ct(m),h=h.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(W,h,void 0,(h.current.flags&128)===128)}catch{}if(N!==null){h=q.T,A=Y.p,Y.p=2,q.T=null;try{for(var R=u.onRecoverableError,J=0;J<N.length;J++){var pe=N[J];R(pe.value,{componentStack:pe.stack})}}finally{q.T=h,Y.p=A}}(Au&3)!==0&&Hp(),zs(u),A=u.pendingLanes,(m&4194090)!==0&&(A&42)!==0?u===px?Eu++:(Eu=0,px=u):Eu=0,Sh(0)}}function k1(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,Ud(h)))}function Hp(u){return _1(),C1(),T1(),A1()}function A1(){if(xa!==5)return!1;var u=ul,h=hx;hx=0;var m=Ct(Au),N=q.T,A=Y.p;try{Y.p=32>m?32:m,q.T=null,m=fx,fx=null;var R=ul,J=Au;if(xa=0,ku=ul=null,Au=0,(er&6)!==0)throw Error(a(331));var pe=er;if(er|=4,f1(R.current),u1(R,R.current,J,m),er=pe,Sh(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(W,R)}catch{}return!0}finally{Y.p=A,q.T=N,k1(u,h)}}function E1(u,h,m){h=Ra(m,h),h=Ep(u.stateNode,h,2),u=co(u,h,2),u!==null&&(ke(u,2),zs(u))}function pr(u,h,m){if(u.tag===3)E1(u,u,m);else for(;h!==null;){if(h.tag===3){E1(h,u,m);break}else if(h.tag===1){var N=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(cl===null||!cl.has(N))){u=Ra(m,u),m=Xy(2),N=co(h,m,2),N!==null&&(Y0(m,N,h,u),ke(N,2),zs(N));break}}h=h.return}}function vx(u,h,m){var N=u.pingCache;if(N===null){N=u.pingCache=new ox;var A=new Set;N.set(h,A)}else A=N.get(h),A===void 0&&(A=new Set,N.set(h,A));A.has(m)||(lx=!0,A.add(m),u=d_.bind(null,u,h,m),h.then(u,u))}function d_(u,h,m){var N=u.pingCache;N!==null&&N.delete(h),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,gr===u&&(Dn&m)===m&&(Br===4||Br===3&&(Dn&62914560)===Dn&&300>ee()-dx?(er&2)===0&&Pu(u,0):cx|=m,Cu===Dn&&(Cu=0)),zs(u)}function P1(u,h){h===0&&(h=_t()),u=Vl(u,h),u!==null&&(ke(u,h),zs(u))}function Gp(u){var h=u.memoizedState,m=0;h!==null&&(m=h.retryLane),P1(u,m)}function h_(u,h){var m=0;switch(u.tag){case 13:var N=u.stateNode,A=u.memoizedState;A!==null&&(m=A.retryLane);break;case 19:N=u.stateNode;break;case 22:N=u.stateNode._retryCache;break;default:throw Error(a(314))}N!==null&&N.delete(h),P1(u,m)}function O1(u,h){return oe(u,h)}var wh=null,hl=null,Wp=!1,Nh=!1,Yp=!1,fl=0;function zs(u){u!==hl&&u.next===null&&(hl===null?wh=hl=u:hl=hl.next=u),Nh=!0,Wp||(Wp=!0,bx())}function Sh(u,h){if(!Yp&&Nh){Yp=!0;do for(var m=!1,N=wh;N!==null;){if(u!==0){var A=N.pendingLanes;if(A===0)var R=0;else{var J=N.suspendedLanes,pe=N.pingedLanes;R=(1<<31-ge(42|u)+1)-1,R&=A&~(J&~pe),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,M1(N,R))}else R=Dn,R=De(N,N===gr?R:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(R&3)===0||Je(N,R)||(m=!0,M1(N,R));N=N.next}while(m);Yp=!1}}function f_(){_h()}function _h(){Nh=Wp=!1;var u=0;fl!==0&&(b_()&&(u=fl),fl=0);for(var h=ee(),m=null,N=wh;N!==null;){var A=N.next,R=Ch(N,h);R===0?(N.next=null,m===null?wh=A:m.next=A,A===null&&(hl=m)):(m=N,(u!==0||(R&3)!==0)&&(Nh=!0)),N=A}Sh(u)}function Ch(u,h){for(var m=u.suspendedLanes,N=u.pingedLanes,A=u.expirationTimes,R=u.pendingLanes&-62914561;0<R;){var J=31-ge(R),pe=1<<J,Pe=A[J];Pe===-1?((pe&m)===0||(pe&N)!==0)&&(A[J]=et(pe,h)):Pe<=h&&(u.expiredLanes|=pe),R&=~pe}if(h=gr,m=Dn,m=De(u,u===h?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N=u.callbackNode,m===0||u===h&&(tr===2||tr===9)||u.cancelPendingCommit!==null)return N!==null&&N!==null&&Q(N),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||Je(u,m)){if(h=m&-m,h===u.callbackPriority)return h;switch(N!==null&&Q(N),Ct(m)){case 2:case 8:m=Ge;break;case 32:m=Ne;break;case 268435456:m=de;break;default:m=Ne}return N=D1.bind(null,u),m=oe(m,N),u.callbackPriority=h,u.callbackNode=m,h}return N!==null&&N!==null&&Q(N),u.callbackPriority=2,u.callbackNode=null,2}function D1(u,h){if(xa!==0&&xa!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(Hp()&&u.callbackNode!==m)return null;var N=Dn;return N=De(u,u===gr?N:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N===0?null:(y1(u,N,h),Ch(u,ee()),u.callbackNode!=null&&u.callbackNode===m?D1.bind(null,u):null)}function M1(u,h){if(Hp())return null;y1(u,h,!0)}function bx(){w_(function(){(er&6)!==0?oe(qe,f_):_h()})}function Kp(){return fl===0&&(fl=ut()),fl}function I1(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:kd(""+u)}function R1(u,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,u.id&&m.setAttribute("form",u.id),h.parentNode.insertBefore(m,h),u=new FormData(u),m.parentNode.removeChild(m),u}function p_(u,h,m,N,A){if(h==="submit"&&m&&m.stateNode===A){var R=I1((A[wn]||null).action),J=N.submitter;J&&(h=(h=J[wn]||null)?I1(h.formAction):J.getAttribute("formAction"),h!==null&&(R=h,J=null));var pe=new Hf("action","action",null,N,A);u.push({event:pe,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(fl!==0){var Pe=J?R1(A,J):new FormData(A);nh(m,{pending:!0,data:Pe,method:A.method,action:R},null,Pe)}}else typeof R=="function"&&(pe.preventDefault(),Pe=J?R1(A,J):new FormData(A),nh(m,{pending:!0,data:Pe,method:A.method,action:R},R,Pe))},currentTarget:A}]})}}for(var jx=0;jx<Gn.length;jx++){var wx=Gn[jx],m_=wx.toLowerCase(),g_=wx[0].toUpperCase()+wx.slice(1);cs(m_,"on"+g_)}cs(rp,"onAnimationEnd"),cs(g0,"onAnimationIteration"),cs(yi,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(ap,"onTransitionRun"),cs(JS,"onTransitionStart"),cs(su,"onTransitionCancel"),cs(Dd,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Th));function L1(u,h){h=(h&4)!==0;for(var m=0;m<u.length;m++){var N=u[m],A=N.event;N=N.listeners;e:{var R=void 0;if(h)for(var J=N.length-1;0<=J;J--){var pe=N[J],Pe=pe.instance,Xe=pe.currentTarget;if(pe=pe.listener,Pe!==R&&A.isPropagationStopped())break e;R=pe,A.currentTarget=Xe;try{R(A)}catch(ot){oc(ot)}A.currentTarget=null,R=Pe}else for(J=0;J<N.length;J++){if(pe=N[J],Pe=pe.instance,Xe=pe.currentTarget,pe=pe.listener,Pe!==R&&A.isPropagationStopped())break e;R=pe,A.currentTarget=Xe;try{R(A)}catch(ot){oc(ot)}A.currentTarget=null,R=Pe}}}}function jn(u,h){var m=h[Hn];m===void 0&&(m=h[Hn]=new Set);var N=u+"__bubble";m.has(N)||(F1(h,u,2,!1),m.add(N))}function Nx(u,h,m){var N=0;h&&(N|=4),F1(m,u,N,h)}var ai="_reactListening"+Math.random().toString(36).slice(2);function Sx(u){if(!u[ai]){u[ai]=!0,vn.forEach(function(m){m!=="selectionchange"&&(y_.has(m)||Nx(m,!1,u),Nx(m,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[ai]||(h[ai]=!0,Nx("selectionchange",!1,h))}}function F1(u,h,m,N){switch(rj(h)){case 2:var A=I_;break;case 8:A=$u;break;default:A=Mx}m=A.bind(null,h,m,u),A=void 0,!Ed||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(A=!0),N?A!==void 0?u.addEventListener(h,m,{capture:!0,passive:A}):u.addEventListener(h,m,!0):A!==void 0?u.addEventListener(h,m,{passive:A}):u.addEventListener(h,m,!1)}function jo(u,h,m,N,A){var R=N;if((h&1)===0&&(h&2)===0&&N!==null)e:for(;;){if(N===null)return;var J=N.tag;if(J===3||J===4){var pe=N.stateNode.containerInfo;if(pe===A)break;if(J===4)for(J=N.return;J!==null;){var Pe=J.tag;if((Pe===3||Pe===4)&&J.stateNode.containerInfo===A)return;J=J.return}for(;pe!==null;){if(J=qo(pe),J===null)return;if(Pe=J.tag,Pe===5||Pe===6||Pe===26||Pe===27){N=R=J;continue e}pe=pe.parentNode}}N=N.return}Kb(function(){var Xe=R,ot=iy(m),ft=[];e:{var tt=Md.get(u);if(tt!==void 0){var Ze=Hf,Ht=u;switch(u){case"keypress":if(ar(m)===0)break e;case"keydown":case"keyup":Ze=dy;break;case"focusin":Ht="focus",Ze=Wf;break;case"focusout":Ht="blur",Ze=Wf;break;case"beforeblur":case"afterblur":Ze=Wf;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=Ho;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=US;break;case rp:case g0:case yi:Ze=e0;break;case Dd:Ze=VS;break;case"scroll":case"scrollend":Ze=BS;break;case"wheel":Ze=GS;break;case"copy":case"cut":case"paste":Ze=n0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=io;break;case"toggle":case"beforetoggle":Ze=Kf}var Vt=(h&4)!==0,sr=!Vt&&(u==="scroll"||u==="scrollend"),Ye=Vt?tt!==null?tt+"Capture":null:tt;Vt=[];for(var Be=Xe,Qe;Be!==null;){var dt=Be;if(Qe=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||Qe===null||Ye===null||(dt=Ad(Be,Ye),dt!=null&&Vt.push(tn(Be,dt,Qe))),sr)break;Be=Be.return}0<Vt.length&&(tt=new Ze(tt,Ht,null,m,ot),ft.push({event:tt,listeners:Vt}))}}if((h&7)===0){e:{if(tt=u==="mouseover"||u==="pointerover",Ze=u==="mouseout"||u==="pointerout",tt&&m!==Uf&&(Ht=m.relatedTarget||m.fromElement)&&(qo(Ht)||Ht[la]))break e;if((Ze||tt)&&(tt=ot.window===ot?ot:(tt=ot.ownerDocument)?tt.defaultView||tt.parentWindow:window,Ze?(Ht=m.relatedTarget||m.toElement,Ze=Xe,Ht=Ht?qo(Ht):null,Ht!==null&&(sr=s(Ht),Vt=Ht.tag,Ht!==sr||Vt!==5&&Vt!==27&&Vt!==6)&&(Ht=null)):(Ze=null,Ht=Xe),Ze!==Ht)){if(Vt=Ho,dt="onMouseLeave",Ye="onMouseEnter",Be="mouse",(u==="pointerout"||u==="pointerover")&&(Vt=io,dt="onPointerLeave",Ye="onPointerEnter",Be="pointer"),sr=Ze==null?tt:Nt(Ze),Qe=Ht==null?tt:Nt(Ht),tt=new Vt(dt,Be+"leave",Ze,m,ot),tt.target=sr,tt.relatedTarget=Qe,dt=null,qo(ot)===Xe&&(Vt=new Vt(Ye,Be+"enter",Ht,m,ot),Vt.target=Qe,Vt.relatedTarget=sr,dt=Vt),sr=dt,Ze&&Ht)t:{for(Vt=Ze,Ye=Ht,Be=0,Qe=Vt;Qe;Qe=na(Qe))Be++;for(Qe=0,dt=Ye;dt;dt=na(dt))Qe++;for(;0<Be-Qe;)Vt=na(Vt),Be--;for(;0<Qe-Be;)Ye=na(Ye),Qe--;for(;Be--;){if(Vt===Ye||Ye!==null&&Vt===Ye.alternate)break t;Vt=na(Vt),Ye=na(Ye)}Vt=null}else Vt=null;Ze!==null&&zr(ft,tt,Ze,Vt,!1),Ht!==null&&sr!==null&&zr(ft,sr,Ht,Vt,!0)}}e:{if(tt=Xe?Nt(Xe):window,Ze=tt.nodeName&&tt.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&tt.type==="file")var Pt=c0;else if(Zf(tt))if(u0)Pt=KS;else{Pt=Yo;var gn=f0}else Ze=tt.nodeName,!Ze||Ze.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Xe&&ay(Xe.elementType)&&(Pt=c0):Pt=np;if(Pt&&(Pt=Pt(u,Xe))){nu(ft,Pt,m,ot);break e}gn&&gn(u,tt,Xe),u==="focusout"&&Xe&&tt.type==="number"&&Xe.memoizedProps.value!=null&&Td(tt,"number",tt.value)}switch(gn=Xe?Nt(Xe):window,u){case"focusin":(Zf(gn)||gn.contentEditable==="true")&&(iu=gn,Ko=Xe,Ve=null);break;case"focusout":Ve=Ko=iu=null;break;case"mousedown":it=!0;break;case"contextmenu":case"mouseup":case"dragend":it=!1,rt(ft,m,ot);break;case"selectionchange":if(XS)break;case"keydown":case"keyup":rt(ft,m,ot)}var Ft;if(py)e:{switch(u){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else Go?o0(u,m)&&(Gt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Gt="onCompositionStart");Gt&&(Qf&&m.locale!=="ko"&&(Go||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Go&&(Ft=Qb()):(Vo=ot,ly="value"in Vo?Vo.value:Vo.textContent,Go=!0)),gn=Qp(Xe,Gt),0<gn.length&&(Gt=new Wa(Gt,u,null,m,ot),ft.push({event:Gt,listeners:gn}),Ft?Gt.data=Ft:(Ft=Jf(m),Ft!==null&&(Gt.data=Ft)))),(Ft=s0?WS(u,m):l0(u,m))&&(Gt=Qp(Xe,"onBeforeInput"),0<Gt.length&&(gn=new Wa("onBeforeInput","beforeinput",null,m,ot),ft.push({event:gn,listeners:Gt}),gn.data=Ft)),p_(ft,u,Xe,m,ot)}L1(ft,h)})}function tn(u,h,m){return{instance:u,listener:h,currentTarget:m}}function Qp(u,h){for(var m=h+"Capture",N=[];u!==null;){var A=u,R=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||R===null||(A=Ad(u,m),A!=null&&N.unshift(tn(u,A,R)),A=Ad(u,h),A!=null&&N.push(tn(u,A,R))),u.tag===3)return N;u=u.return}return[]}function na(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function zr(u,h,m,N,A){for(var R=h._reactName,J=[];m!==null&&m!==N;){var pe=m,Pe=pe.alternate,Xe=pe.stateNode;if(pe=pe.tag,Pe!==null&&Pe===N)break;pe!==5&&pe!==26&&pe!==27||Xe===null||(Pe=Xe,A?(Xe=Ad(m,R),Xe!=null&&J.unshift(tn(m,Xe,Pe))):A||(Xe=Ad(m,R),Xe!=null&&J.push(tn(m,Xe,Pe)))),m=m.return}J.length!==0&&u.push({event:h,listeners:J})}var x_=/\r\n?/g,pl=/\u0000|\uFFFD/g;function $1(u){return(typeof u=="string"?u:""+u).replace(x_,`
`).replace(pl,"")}function B1(u,h){return h=$1(h),$1(u)===h}function Xp(){}function ir(u,h,m,N,A,R){switch(m){case"children":typeof N=="string"?h==="body"||h==="textarea"&&N===""||Uo(u,N):(typeof N=="number"||typeof N=="bigint")&&h!=="body"&&Uo(u,""+N);break;case"className":Ff(u,"class",N);break;case"tabIndex":Ff(u,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":Ff(u,m,N);break;case"style":ry(u,N,R);break;case"data":if(h!=="object"){Ff(u,"data",N);break}case"src":case"href":if(N===""&&(h!=="a"||m!=="href")){u.removeAttribute(m);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(m);break}N=kd(""+N),u.setAttribute(m,N);break;case"action":case"formAction":if(typeof N=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(h!=="input"&&ir(u,h,"name",A.name,A,null),ir(u,h,"formEncType",A.formEncType,A,null),ir(u,h,"formMethod",A.formMethod,A,null),ir(u,h,"formTarget",A.formTarget,A,null)):(ir(u,h,"encType",A.encType,A,null),ir(u,h,"method",A.method,A,null),ir(u,h,"target",A.target,A,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(m);break}N=kd(""+N),u.setAttribute(m,N);break;case"onClick":N!=null&&(u.onclick=Xp);break;case"onScroll":N!=null&&jn("scroll",u);break;case"onScrollEnd":N!=null&&jn("scrollend",u);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(a(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(a(60));u.innerHTML=m}}break;case"multiple":u.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":u.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){u.removeAttribute("xlink:href");break}m=kd(""+N),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,""+N):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":N===!0?u.setAttribute(m,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,N):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?u.setAttribute(m,N):u.removeAttribute(m);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?u.removeAttribute(m):u.setAttribute(m,N);break;case"popover":jn("beforetoggle",u),jn("toggle",u),Lf(u,"popover",N);break;case"xlinkActuate":Ps(u,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":Ps(u,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":Ps(u,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":Ps(u,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":Ps(u,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":Ps(u,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":Ps(u,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":Ps(u,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":Ps(u,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":Lf(u,"is",N);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Wb.get(m)||m,Lf(u,m,N))}}function _x(u,h,m,N,A,R){switch(m){case"style":ry(u,N,R);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(a(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(a(60));u.innerHTML=m}}break;case"children":typeof N=="string"?Uo(u,N):(typeof N=="number"||typeof N=="bigint")&&Uo(u,""+N);break;case"onScroll":N!=null&&jn("scroll",u);break;case"onScrollEnd":N!=null&&jn("scrollend",u);break;case"onClick":N!=null&&(u.onclick=Xp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!On.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),h=m.slice(2,A?m.length-7:void 0),R=u[wn]||null,R=R!=null?R[m]:null,typeof R=="function"&&u.removeEventListener(h,R,A),typeof N=="function")){typeof R!="function"&&R!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(h,N,A);break e}m in u?u[m]=N:N===!0?u.setAttribute(m,""):Lf(u,m,N)}}}function ra(u,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jn("error",u),jn("load",u);var N=!1,A=!1,R;for(R in m)if(m.hasOwnProperty(R)){var J=m[R];if(J!=null)switch(R){case"src":N=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:ir(u,h,R,J,m,null)}}A&&ir(u,h,"srcSet",m.srcSet,m,null),N&&ir(u,h,"src",m.src,m,null);return;case"input":jn("invalid",u);var pe=R=J=A=null,Pe=null,Xe=null;for(N in m)if(m.hasOwnProperty(N)){var ot=m[N];if(ot!=null)switch(N){case"name":A=ot;break;case"type":J=ot;break;case"checked":Pe=ot;break;case"defaultChecked":Xe=ot;break;case"value":R=ot;break;case"defaultValue":pe=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(a(137,h));break;default:ir(u,h,N,ot,m,null)}}ey(u,R,pe,Pe,Xe,J,A,!1),Bf(u);return;case"select":jn("invalid",u),N=J=R=null;for(A in m)if(m.hasOwnProperty(A)&&(pe=m[A],pe!=null))switch(A){case"value":R=pe;break;case"defaultValue":J=pe;break;case"multiple":N=pe;default:ir(u,h,A,pe,m,null)}h=R,m=J,u.multiple=!!N,h!=null?Kc(u,!!N,h,!1):m!=null&&Kc(u,!!N,m,!0);return;case"textarea":jn("invalid",u),R=A=N=null;for(J in m)if(m.hasOwnProperty(J)&&(pe=m[J],pe!=null))switch(J){case"value":N=pe;break;case"defaultValue":A=pe;break;case"children":R=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(91));break;default:ir(u,h,J,pe,m,null)}qf(u,N,A,R),Bf(u);return;case"option":for(Pe in m)if(m.hasOwnProperty(Pe)&&(N=m[Pe],N!=null))switch(Pe){case"selected":u.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:ir(u,h,Pe,N,m,null)}return;case"dialog":jn("beforetoggle",u),jn("toggle",u),jn("cancel",u),jn("close",u);break;case"iframe":case"object":jn("load",u);break;case"video":case"audio":for(N=0;N<Th.length;N++)jn(Th[N],u);break;case"image":jn("error",u),jn("load",u);break;case"details":jn("toggle",u);break;case"embed":case"source":case"link":jn("error",u),jn("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xe in m)if(m.hasOwnProperty(Xe)&&(N=m[Xe],N!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:ir(u,h,Xe,N,m,null)}return;default:if(ay(h)){for(ot in m)m.hasOwnProperty(ot)&&(N=m[ot],N!==void 0&&_x(u,h,ot,N,m,void 0));return}}for(pe in m)m.hasOwnProperty(pe)&&(N=m[pe],N!=null&&ir(u,h,pe,N,m,null))}function v_(u,h,m,N){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,R=null,J=null,pe=null,Pe=null,Xe=null,ot=null;for(Ze in m){var ft=m[Ze];if(m.hasOwnProperty(Ze)&&ft!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":Pe=ft;default:N.hasOwnProperty(Ze)||ir(u,h,Ze,null,N,ft)}}for(var tt in N){var Ze=N[tt];if(ft=m[tt],N.hasOwnProperty(tt)&&(Ze!=null||ft!=null))switch(tt){case"type":R=Ze;break;case"name":A=Ze;break;case"checked":Xe=Ze;break;case"defaultChecked":ot=Ze;break;case"value":J=Ze;break;case"defaultValue":pe=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(a(137,h));break;default:Ze!==ft&&ir(u,h,tt,Ze,N,ft)}}zf(u,J,pe,Pe,Xe,ot,R,A);return;case"select":Ze=J=pe=tt=null;for(R in m)if(Pe=m[R],m.hasOwnProperty(R)&&Pe!=null)switch(R){case"value":break;case"multiple":Ze=Pe;default:N.hasOwnProperty(R)||ir(u,h,R,null,N,Pe)}for(A in N)if(R=N[A],Pe=m[A],N.hasOwnProperty(A)&&(R!=null||Pe!=null))switch(A){case"value":tt=R;break;case"defaultValue":pe=R;break;case"multiple":J=R;default:R!==Pe&&ir(u,h,A,R,N,Pe)}h=pe,m=J,N=Ze,tt!=null?Kc(u,!!m,tt,!1):!!N!=!!m&&(h!=null?Kc(u,!!m,h,!0):Kc(u,!!m,m?[]:"",!1));return;case"textarea":Ze=tt=null;for(pe in m)if(A=m[pe],m.hasOwnProperty(pe)&&A!=null&&!N.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:ir(u,h,pe,null,N,A)}for(J in N)if(A=N[J],R=m[J],N.hasOwnProperty(J)&&(A!=null||R!=null))switch(J){case"value":tt=A;break;case"defaultValue":Ze=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:A!==R&&ir(u,h,J,A,N,R)}ty(u,tt,Ze);return;case"option":for(var Ht in m)if(tt=m[Ht],m.hasOwnProperty(Ht)&&tt!=null&&!N.hasOwnProperty(Ht))switch(Ht){case"selected":u.selected=!1;break;default:ir(u,h,Ht,null,N,tt)}for(Pe in N)if(tt=N[Pe],Ze=m[Pe],N.hasOwnProperty(Pe)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Pe){case"selected":u.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:ir(u,h,Pe,tt,N,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in m)tt=m[Vt],m.hasOwnProperty(Vt)&&tt!=null&&!N.hasOwnProperty(Vt)&&ir(u,h,Vt,null,N,tt);for(Xe in N)if(tt=N[Xe],Ze=m[Xe],N.hasOwnProperty(Xe)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(a(137,h));break;default:ir(u,h,Xe,tt,N,Ze)}return;default:if(ay(h)){for(var sr in m)tt=m[sr],m.hasOwnProperty(sr)&&tt!==void 0&&!N.hasOwnProperty(sr)&&_x(u,h,sr,void 0,N,tt);for(ot in N)tt=N[ot],Ze=m[ot],!N.hasOwnProperty(ot)||tt===Ze||tt===void 0&&Ze===void 0||_x(u,h,ot,tt,N,Ze);return}}for(var Ye in m)tt=m[Ye],m.hasOwnProperty(Ye)&&tt!=null&&!N.hasOwnProperty(Ye)&&ir(u,h,Ye,null,N,tt);for(ft in N)tt=N[ft],Ze=m[ft],!N.hasOwnProperty(ft)||tt===Ze||tt==null&&Ze==null||ir(u,h,ft,tt,N,Ze)}var gs=null,Jp=null;function dc(u){return u.nodeType===9?u:u.ownerDocument}function Er(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ir(u,h){if(u===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&h==="foreignObject"?0:u}function Zp(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Cx=null;function b_(){var u=window.event;return u&&u.type==="popstate"?u===Cx?!1:(Cx=u,!0):(Cx=null,!1)}var z1=typeof setTimeout=="function"?setTimeout:void 0,j_=typeof clearTimeout=="function"?clearTimeout:void 0,q1=typeof Promise=="function"?Promise:void 0,w_=typeof queueMicrotask=="function"?queueMicrotask:typeof q1<"u"?function(u){return q1.resolve(null).then(u).catch(U1)}:z1;function U1(u){setTimeout(function(){throw u})}function Qi(u){return u==="head"}function em(u,h){var m=h,N=0,A=0;do{var R=m.nextSibling;if(u.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(0<N&&8>N){m=N;var J=u.ownerDocument;if(m&1&&kh(J.documentElement),m&2&&kh(J.body),m&4)for(m=J.head,kh(m),J=m.firstChild;J;){var pe=J.nextSibling,Pe=J.nodeName;J[Bl]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&J.rel.toLowerCase()==="stylesheet"||m.removeChild(J),J=pe}}if(A===0){u.removeChild(R),Rh(h);return}A--}else m==="$"||m==="$?"||m==="$!"?A++:N=m.charCodeAt(0)-48;else N=0;m=R}while(m);Rh(h)}function Tx(u){var h=u.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Tx(m),Sd(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function V1(u,h,m,N){for(;u.nodeType===1;){var A=m;if(u.nodeName.toLowerCase()!==h.toLowerCase()){if(!N&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(N){if(!u[Bl])switch(h){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(R=u.getAttribute("rel"),R==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(R!==A.rel||u.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||u.getAttribute("title")!==(A.title==null?null:A.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(R=u.getAttribute("src"),(R!==(A.src==null?null:A.src)||u.getAttribute("type")!==(A.type==null?null:A.type)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&R&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(h==="input"&&u.type==="hidden"){var R=A.name==null?null:""+A.name;if(A.type==="hidden"&&u.getAttribute("name")===R)return u}else return u;if(u=ys(u.nextSibling),u===null)break}return null}function tm(u,h,m){if(h==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=ys(u.nextSibling),u===null))return null;return u}function za(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function Du(u,h){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")h();else{var N=function(){h(),m.removeEventListener("DOMContentLoaded",N)};m.addEventListener("DOMContentLoaded",N),u._reactRetry=N}}function ys(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return u}var kx=null;function H1(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return u;h--}else m==="/$"&&h++}u=u.previousSibling}return null}function G1(u,h,m){switch(h=dc(m),u){case"html":if(u=h.documentElement,!u)throw Error(a(452));return u;case"head":if(u=h.head,!u)throw Error(a(453));return u;case"body":if(u=h.body,!u)throw Error(a(454));return u;default:throw Error(a(451))}}function kh(u){for(var h=u.attributes;h.length;)u.removeAttributeNode(h[0]);Sd(u)}var Si=new Map,qs=new Set;function on(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Us=Y.d;Y.d={f:Xi,r:W1,D:N_,C:Y1,L:nm,m:S_,X:C_,S:__,M:T_};function Xi(){var u=Us.f(),h=Up();return u||h}function W1(u){var h=at(u);h!==null&&h.tag===5&&h.type==="form"?Cp(h):Us.r(u)}var Mu=typeof document>"u"?null:document;function Wn(u,h,m){var N=Mu;if(N&&typeof h=="string"&&h){var A=Li(h);A='link[rel="'+u+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),qs.has(A)||(qs.add(A),u={rel:u,crossOrigin:m,href:h},N.querySelector(A)===null&&(h=N.createElement("link"),ra(h,"link",u),It(h),N.head.appendChild(h)))}}function N_(u){Us.D(u),Wn("dns-prefetch",u,null)}function Y1(u,h){Us.C(u,h),Wn("preconnect",u,h)}function nm(u,h,m){Us.L(u,h,m);var N=Mu;if(N&&u&&h){var A='link[rel="preload"][as="'+Li(h)+'"]';h==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+Li(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+Li(m.imageSizes)+'"]')):A+='[href="'+Li(u)+'"]';var R=A;switch(h){case"style":R=Iu(u);break;case"script":R=Ru(u)}Si.has(R)||(u=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:u,as:h},m),Si.set(R,u),N.querySelector(A)!==null||h==="style"&&N.querySelector(Ah(R))||h==="script"&&N.querySelector(Eh(R))||(h=N.createElement("link"),ra(h,"link",u),It(h),N.head.appendChild(h)))}}function S_(u,h){Us.m(u,h);var m=Mu;if(m&&u){var N=h&&typeof h.as=="string"?h.as:"script",A='link[rel="modulepreload"][as="'+Li(N)+'"][href="'+Li(u)+'"]',R=A;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Ru(u)}if(!Si.has(R)&&(u=f({rel:"modulepreload",href:u},h),Si.set(R,u),m.querySelector(A)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Eh(R)))return}N=m.createElement("link"),ra(N,"link",u),It(N),m.head.appendChild(N)}}}function __(u,h,m){Us.S(u,h,m);var N=Mu;if(N&&u){var A=St(N).hoistableStyles,R=Iu(u);h=h||"default";var J=A.get(R);if(!J){var pe={loading:0,preload:null};if(J=N.querySelector(Ah(R)))pe.loading=5;else{u=f({rel:"stylesheet",href:u,"data-precedence":h},m),(m=Si.get(R))&&Ph(u,m);var Pe=J=N.createElement("link");It(Pe),ra(Pe,"link",u),Pe._p=new Promise(function(Xe,ot){Pe.onload=Xe,Pe.onerror=ot}),Pe.addEventListener("load",function(){pe.loading|=1}),Pe.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,rm(J,h,N)}J={type:"stylesheet",instance:J,count:1,state:pe},A.set(R,J)}}}function C_(u,h){Us.X(u,h);var m=Mu;if(m&&u){var N=St(m).hoistableScripts,A=Ru(u),R=N.get(A);R||(R=m.querySelector(Eh(A)),R||(u=f({src:u,async:!0},h),(h=Si.get(A))&&Ax(u,h),R=m.createElement("script"),It(R),ra(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(A,R))}}function T_(u,h){Us.M(u,h);var m=Mu;if(m&&u){var N=St(m).hoistableScripts,A=Ru(u),R=N.get(A);R||(R=m.querySelector(Eh(A)),R||(u=f({src:u,async:!0,type:"module"},h),(h=Si.get(A))&&Ax(u,h),R=m.createElement("script"),It(R),ra(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(A,R))}}function K1(u,h,m,N){var A=(A=Re.current)?on(A):null;if(!A)throw Error(a(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Iu(m.href),m=St(A).hoistableStyles,N=m.get(h),N||(N={type:"style",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Iu(m.href);var R=St(A).hoistableStyles,J=R.get(u);if(J||(A=A.ownerDocument||A,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(u,J),(R=A.querySelector(Ah(u)))&&!R._p&&(J.instance=R,J.state.loading=5),Si.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Si.set(u,m),R||k_(A,u,m,J.state))),h&&N===null)throw Error(a(528,""));return J}if(h&&N!==null)throw Error(a(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Ru(m),m=St(A).hoistableScripts,N=m.get(h),N||(N={type:"script",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,u))}}function Iu(u){return'href="'+Li(u)+'"'}function Ah(u){return'link[rel="stylesheet"]['+u+"]"}function Q1(u){return f({},u,{"data-precedence":u.precedence,precedence:null})}function k_(u,h,m,N){u.querySelector('link[rel="preload"][as="style"]['+h+"]")?N.loading=1:(h=u.createElement("link"),N.preload=h,h.addEventListener("load",function(){return N.loading|=1}),h.addEventListener("error",function(){return N.loading|=2}),ra(h,"link",m),It(h),u.head.appendChild(h))}function Ru(u){return'[src="'+Li(u)+'"]'}function Eh(u){return"script[async]"+u}function X1(u,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var N=u.querySelector('style[data-href~="'+Li(m.href)+'"]');if(N)return h.instance=N,It(N),N;var A=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return N=(u.ownerDocument||u).createElement("style"),It(N),ra(N,"style",A),rm(N,m.precedence,u),h.instance=N;case"stylesheet":A=Iu(m.href);var R=u.querySelector(Ah(A));if(R)return h.state.loading|=4,h.instance=R,It(R),R;N=Q1(m),(A=Si.get(A))&&Ph(N,A),R=(u.ownerDocument||u).createElement("link"),It(R);var J=R;return J._p=new Promise(function(pe,Pe){J.onload=pe,J.onerror=Pe}),ra(R,"link",N),h.state.loading|=4,rm(R,m.precedence,u),h.instance=R;case"script":return R=Ru(m.src),(A=u.querySelector(Eh(R)))?(h.instance=A,It(A),A):(N=m,(A=Si.get(R))&&(N=f({},m),Ax(N,A)),u=u.ownerDocument||u,A=u.createElement("script"),It(A),ra(A,"link",N),u.head.appendChild(A),h.instance=A);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(N=h.instance,h.state.loading|=4,rm(N,m.precedence,u));return h.instance}function rm(u,h,m){for(var N=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=N.length?N[N.length-1]:null,R=A,J=0;J<N.length;J++){var pe=N[J];if(pe.dataset.precedence===h)R=pe;else if(R!==A)break}R?R.parentNode.insertBefore(u,R.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(u,h.firstChild))}function Ph(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.title==null&&(u.title=h.title)}function Ax(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.integrity==null&&(u.integrity=h.integrity)}var Lu=null;function J1(u,h,m){if(Lu===null){var N=new Map,A=Lu=new Map;A.set(m,N)}else A=Lu,N=A.get(m),N||(N=new Map,A.set(m,N));if(N.has(u))return N;for(N.set(u,null),m=m.getElementsByTagName(u),A=0;A<m.length;A++){var R=m[A];if(!(R[Bl]||R[Cn]||u==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var J=R.getAttribute(h)||"";J=u+J;var pe=N.get(J);pe?pe.push(R):N.set(J,[R])}}return N}function Z1(u,h,m){u=u.ownerDocument||u,u.head.insertBefore(m,h==="title"?u.querySelector("head > title"):null)}function A_(u,h,m){if(m===1||h.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return u=h.disabled,typeof h.precedence=="string"&&u==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function aa(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var da=null;function E_(){}function P_(u,h,m){if(da===null)throw Error(a(475));var N=da;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=Iu(m.href),R=u.querySelector(Ah(A));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(N.count++,N=Oh.bind(N),u.then(N,N)),h.state.loading|=4,h.instance=R,It(R);return}R=u.ownerDocument||u,m=Q1(m),(A=Si.get(A))&&Ph(m,A),R=R.createElement("link"),It(R);var J=R;J._p=new Promise(function(pe,Pe){J.onload=pe,J.onerror=Pe}),ra(R,"link",m),h.instance=R}N.stylesheets===null&&(N.stylesheets=new Map),N.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(N.count++,h=Oh.bind(N),u.addEventListener("load",h),u.addEventListener("error",h))}}function O_(){if(da===null)throw Error(a(475));var u=da;return u.stylesheets&&u.count===0&&Ex(u,u.stylesheets),0<u.count?function(h){var m=setTimeout(function(){if(u.stylesheets&&Ex(u,u.stylesheets),u.unsuspend){var N=u.unsuspend;u.unsuspend=null,N()}},6e4);return u.unsuspend=h,function(){u.unsuspend=null,clearTimeout(m)}}:null}function Oh(){if(this.count--,this.count===0){if(this.stylesheets)Ex(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var am=null;function Ex(u,h){u.stylesheets=null,u.unsuspend!==null&&(u.count++,am=new Map,h.forEach(D_,u),am=null,Oh.call(u))}function D_(u,h){if(!(h.state.loading&4)){var m=am.get(u);if(m)var N=m.get(null);else{m=new Map,am.set(u,m);for(var A=u.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<A.length;R++){var J=A[R];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(m.set(J.dataset.precedence,J),N=J)}N&&m.set(null,N)}A=h.instance,J=A.getAttribute("data-precedence"),R=m.get(J)||N,R===N&&m.set(null,A),m.set(J,A),this.count++,N=Oh.bind(this),A.addEventListener("load",N),A.addEventListener("error",N),R?R.parentNode.insertBefore(A,R.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(A,u.firstChild)),h.state.loading|=4}}var Fu={$$typeof:C,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function M_(u,h,m,N,A,R,J,pe){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.hiddenUpdates=vt(null),this.identifierPrefix=N,this.onUncaughtError=A,this.onCaughtError=R,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function ej(u,h,m,N,A,R,J,pe,Pe,Xe,ot,ft){return u=new M_(u,h,m,J,pe,Pe,Xe,ft),h=1,R===!0&&(h|=24),R=Ya(3,null,null,h),u.current=R,R.stateNode=u,h=Sy(),h.refCount++,u.pooledCache=h,h.refCount++,R.memoizedState={element:N,isDehydrated:m,cache:h},Jl(R),u}function tj(u){return u?(u=Hl,u):Hl}function Px(u,h,m,N,A,R){A=tj(A),N.context===null?N.context=A:N.pendingContext=A,N=Zo(h),N.payload={element:m},R=R===void 0?null:R,R!==null&&(N.callback=R),m=co(u,N,h),m!==null&&(Ni(m,u,h),Hd(m,u,h))}function Ox(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<h?m:h}}function Dx(u,h){Ox(u,h),(u=u.alternate)&&Ox(u,h)}function nj(u){if(u.tag===13){var h=Vl(u,67108864);h!==null&&Ni(h,u,67108864),Dx(u,67108864)}}var im=!0;function I_(u,h,m,N){var A=q.T;q.T=null;var R=Y.p;try{Y.p=2,Mx(u,h,m,N)}finally{Y.p=R,q.T=A}}function $u(u,h,m,N){var A=q.T;q.T=null;var R=Y.p;try{Y.p=8,Mx(u,h,m,N)}finally{Y.p=R,q.T=A}}function Mx(u,h,m,N){if(im){var A=Ix(N);if(A===null)jo(u,h,N,sm,m),aj(u,N);else if(L_(A,u,h,m,N))N.stopPropagation();else if(aj(u,N),h&4&&-1<R_.indexOf(u)){for(;A!==null;){var R=at(A);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var J=mt(R.pendingLanes);if(J!==0){var pe=R;for(pe.pendingLanes|=2,pe.entangledLanes|=2;J;){var Pe=1<<31-ge(J);pe.entanglements[1]|=Pe,J&=~Pe}zs(R),(er&6)===0&&(Tu=ee()+500,Sh(0))}}break;case 13:pe=Vl(R,2),pe!==null&&Ni(pe,R,2),Up(),Dx(R,2)}if(R=Ix(N),R===null&&jo(u,h,N,sm,m),R===A)break;A=R}A!==null&&N.stopPropagation()}else jo(u,h,N,null,m)}}function Ix(u){return u=iy(u),Rx(u)}var sm=null;function Rx(u){if(sm=null,u=qo(u),u!==null){var h=s(u);if(h===null)u=null;else{var m=h.tag;if(m===13){if(u=o(h),u!==null)return u;u=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null)}}return sm=u,null}function rj(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case qe:return 2;case Ge:return 8;case Ne:case ne:return 32;case de:return 268435456;default:return 32}default:return 32}}var om=!1,wo=null,ml=null,gl=null,Dh=new Map,Mh=new Map,yl=[],R_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aj(u,h){switch(u){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":Dh.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(h.pointerId)}}function Ih(u,h,m,N,A,R){return u===null||u.nativeEvent!==R?(u={blockedOn:h,domEventName:m,eventSystemFlags:N,nativeEvent:R,targetContainers:[A]},h!==null&&(h=at(h),h!==null&&nj(h)),u):(u.eventSystemFlags|=N,h=u.targetContainers,A!==null&&h.indexOf(A)===-1&&h.push(A),u)}function L_(u,h,m,N,A){switch(h){case"focusin":return wo=Ih(wo,u,h,m,N,A),!0;case"dragenter":return ml=Ih(ml,u,h,m,N,A),!0;case"mouseover":return gl=Ih(gl,u,h,m,N,A),!0;case"pointerover":var R=A.pointerId;return Dh.set(R,Ih(Dh.get(R)||null,u,h,m,N,A)),!0;case"gotpointercapture":return R=A.pointerId,Mh.set(R,Ih(Mh.get(R)||null,u,h,m,N,A)),!0}return!1}function ij(u){var h=qo(u.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=o(m),h!==null){u.blockedOn=h,br(u.priority,function(){if(m.tag===13){var N=ka();N=jt(N);var A=Vl(m,N);A!==null&&Ni(A,m,N),Dx(m,N)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function lm(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var m=Ix(u.nativeEvent);if(m===null){m=u.nativeEvent;var N=new m.constructor(m.type,m);Uf=N,m.target.dispatchEvent(N),Uf=null}else return h=at(m),h!==null&&nj(h),u.blockedOn=m,!1;h.shift()}return!0}function sj(u,h,m){lm(u)&&m.delete(h)}function F_(){om=!1,wo!==null&&lm(wo)&&(wo=null),ml!==null&&lm(ml)&&(ml=null),gl!==null&&lm(gl)&&(gl=null),Dh.forEach(sj),Mh.forEach(sj)}function cm(u,h){u.blockedOn===h&&(u.blockedOn=null,om||(om=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,F_)))}var um=null;function oj(u){um!==u&&(um=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){um===u&&(um=null);for(var h=0;h<u.length;h+=3){var m=u[h],N=u[h+1],A=u[h+2];if(typeof N!="function"){if(Rx(N||m)===null)continue;break}var R=at(m);R!==null&&(u.splice(h,3),h-=3,nh(R,{pending:!0,data:A,method:m.method,action:N},N,A))}}))}function Rh(u){function h(Pe){return cm(Pe,u)}wo!==null&&cm(wo,u),ml!==null&&cm(ml,u),gl!==null&&cm(gl,u),Dh.forEach(h),Mh.forEach(h);for(var m=0;m<yl.length;m++){var N=yl[m];N.blockedOn===u&&(N.blockedOn=null)}for(;0<yl.length&&(m=yl[0],m.blockedOn===null);)ij(m),m.blockedOn===null&&yl.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(N=0;N<m.length;N+=3){var A=m[N],R=m[N+1],J=A[wn]||null;if(typeof R=="function")J||oj(m);else if(J){var pe=null;if(R&&R.hasAttribute("formAction")){if(A=R,J=R[wn]||null)pe=J.formAction;else if(Rx(A)!==null)continue}else pe=J.action;typeof pe=="function"?m[N+1]=pe:(m.splice(N,3),N-=3),oj(m)}}}function Lx(u){this._internalRoot=u}dm.prototype.render=Lx.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(a(409));var m=h.current,N=ka();Px(m,N,u,h,null,null)},dm.prototype.unmount=Lx.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;Px(u.current,2,null,u,null,null),Up(),h[la]=null}};function dm(u){this._internalRoot=u}dm.prototype.unstable_scheduleHydration=function(u){if(u){var h=Xn();u={blockedOn:null,target:u,priority:h};for(var m=0;m<yl.length&&h!==0&&h<yl[m].priority;m++);yl.splice(m,0,u),m===0&&ij(u)}};var lj=e.version;if(lj!=="19.1.0")throw Error(a(527,lj,"19.1.0"));Y.findDOMNode=function(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=c(h),u=u!==null?d(u):null,u=u===null?null:u.stateNode,u};var $_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hm.isDisabled&&hm.supportsFiber)try{W=hm.inject($_),ye=hm}catch{}}return $x.createRoot=function(u,h){if(!i(u))throw Error(a(299));var m=!1,N="",A=Qy,R=Ap,J=W0,pe=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(R=h.onCaughtError),h.onRecoverableError!==void 0&&(J=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(pe=h.unstable_transitionCallbacks)),h=ej(u,1,!1,null,null,m,N,A,R,J,pe,null),u[la]=h.current,Sx(u),new Lx(h)},$x.hydrateRoot=function(u,h,m){if(!i(u))throw Error(a(299));var N=!1,A="",R=Qy,J=Ap,pe=W0,Pe=null,Xe=null;return m!=null&&(m.unstable_strictMode===!0&&(N=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(J=m.onCaughtError),m.onRecoverableError!==void 0&&(pe=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Pe=m.unstable_transitionCallbacks),m.formState!==void 0&&(Xe=m.formState)),h=ej(u,1,!0,h,m??null,N,A,R,J,pe,Pe,Xe),h.context=tj(null),m=h.current,N=ka(),N=jt(N),A=Zo(N),A.callback=null,co(m,A,N),m=N,h.current.lanes=m,ke(h,m),zs(h),u[la]=h.current,Sx(u),new dm(h)},$x.version="19.1.0",$x}var UM;function tW(){if(UM)return G_.exports;UM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),G_.exports=eW(),G_.exports}var nW=tW(),Pg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rW={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Yu,NO,$B,aW=($B=class{constructor(){zt(this,Yu,rW);zt(this,NO,!1)}setTimeoutProvider(t){Et(this,Yu,t)}setTimeout(t,e){return Le(this,Yu).setTimeout(t,e)}clearTimeout(t){Le(this,Yu).clearTimeout(t)}setInterval(t,e){return Le(this,Yu).setInterval(t,e)}clearInterval(t){Le(this,Yu).clearInterval(t)}},Yu=new WeakMap,NO=new WeakMap,$B),Wh=new aW;function iW(t){setTimeout(t,0)}var ff=typeof window>"u"||"Deno"in globalThis;function Ai(){}function sW(t,e){return typeof t=="function"?t(e):t}function HA(t){return typeof t=="number"&&t>=0&&t!==1/0}function XB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function sd(t,e){return typeof t=="function"?t(e):t}function Ws(t,e){return typeof t=="function"?t(e):t}function VM(t,e){const{type:n="all",exact:a,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(a){if(e.queryHash!==_O(o,e.options))return!1}else if(!Cv(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function HM(t,e){const{exact:n,status:a,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(pf(e.options.mutationKey)!==pf(s))return!1}else if(!Cv(e.options.mutationKey,s))return!1}return!(a&&e.state.status!==a||i&&!i(e))}function _O(t,e){return((e==null?void 0:e.queryKeyHashFn)||pf)(t)}function pf(t){return JSON.stringify(t,(e,n)=>GA(n)?Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{}):n)}function Cv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Cv(t[n],e[n])):!1}var oW=Object.prototype.hasOwnProperty;function JB(t,e,n=0){if(t===e)return t;if(n>500)return e;const a=GM(t)&&GM(e);if(!a&&!(GA(t)&&GA(e)))return e;const s=(a?t:Object.keys(t)).length,o=a?e:Object.keys(e),l=o.length,c=a?new Array(l):{};let d=0;for(let f=0;f<l;f++){const p=a?f:o[f],g=t[p],x=e[p];if(g===x){c[p]=g,(a?f<s:oW.call(t,p))&&d++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){c[p]=x;continue}const b=JB(g,x,n+1);c[p]=b,b===g&&d++}return s===l&&d===s?t:c}function sw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function GM(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function GA(t){if(!WM(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!WM(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function WM(t){return Object.prototype.toString.call(t)==="[object Object]"}function lW(t){return new Promise(e=>{Wh.setTimeout(e,t)})}function WA(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?JB(t,e):e}function cW(t,e,n=0){const a=[...t,e];return n&&a.length>n?a.slice(1):a}function uW(t,e,n=0){const a=[e,...t];return n&&a.length>n?a.slice(0,-1):a}var CO=Symbol();function ZB(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===CO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function TO(t,e){return typeof t=="function"?t(...e):!!t}function dW(t,e,n){let a=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),a||(a=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var Zh,Ku,Bm,BB,hW=(BB=class extends Pg{constructor(){super();zt(this,Zh);zt(this,Ku);zt(this,Bm);Et(this,Bm,e=>{if(!ff&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Le(this,Ku)||this.setEventListener(Le(this,Bm))}onUnsubscribe(){var e;this.hasListeners()||((e=Le(this,Ku))==null||e.call(this),Et(this,Ku,void 0))}setEventListener(e){var n;Et(this,Bm,e),(n=Le(this,Ku))==null||n.call(this),Et(this,Ku,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){Le(this,Zh)!==e&&(Et(this,Zh,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Le(this,Zh)=="boolean"?Le(this,Zh):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Zh=new WeakMap,Ku=new WeakMap,Bm=new WeakMap,BB),kO=new hW;function YA(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function a(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{a({status:"fulfilled",value:i}),t(i)},n.reject=i=>{a({status:"rejected",reason:i}),e(i)},n}var fW=iW;function pW(){let t=[],e=0,n=l=>{l()},a=l=>{l()},i=fW;const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{a(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{i=l}}}var ja=pW(),zm,Qu,qm,zB,mW=(zB=class extends Pg{constructor(){super();zt(this,zm,!0);zt(this,Qu);zt(this,qm);Et(this,qm,e=>{if(!ff&&window.addEventListener){const n=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}})}onSubscribe(){Le(this,Qu)||this.setEventListener(Le(this,qm))}onUnsubscribe(){var e;this.hasListeners()||((e=Le(this,Qu))==null||e.call(this),Et(this,Qu,void 0))}setEventListener(e){var n;Et(this,qm,e),(n=Le(this,Qu))==null||n.call(this),Et(this,Qu,e(this.setOnline.bind(this)))}setOnline(e){Le(this,zm)!==e&&(Et(this,zm,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return Le(this,zm)}},zm=new WeakMap,Qu=new WeakMap,qm=new WeakMap,zB),ow=new mW;function gW(t){return Math.min(1e3*2**t,3e4)}function ez(t){return(t??"online")==="online"?ow.isOnline():!0}var KA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function tz(t){let e=!1,n=0,a;const i=YA(),s=()=>i.status!=="pending",o=j=>{var S;if(!s()){const _=new KA(j);g(_),(S=t.onCancel)==null||S.call(t,_)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>kO.isFocused()&&(t.networkMode==="always"||ow.isOnline())&&t.canRun(),f=()=>ez(t.networkMode)&&t.canRun(),p=j=>{s()||(a==null||a(),i.resolve(j))},g=j=>{s()||(a==null||a(),i.reject(j))},x=()=>new Promise(j=>{var S;a=_=>{(s()||d())&&j(_)},(S=t.onPause)==null||S.call(t)}).then(()=>{var j;a=void 0,s()||(j=t.onContinue)==null||j.call(t)}),b=()=>{if(s())return;let j;const S=n===0?t.initialPromise:void 0;try{j=S??t.fn()}catch(_){j=Promise.reject(_)}Promise.resolve(j).then(p).catch(_=>{var O;if(s())return;const T=t.retry??(ff?0:3),C=t.retryDelay??gW,P=typeof C=="function"?C(n,_):C,k=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,_);if(e||!k){g(_);return}n++,(O=t.onFail)==null||O.call(t,n,_),lW(P).then(()=>d()?void 0:x()).then(()=>{e?g(_):b()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?b():x().then(b),i)}}var ef,qB,nz=(qB=class{constructor(){zt(this,ef)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HA(this.gcTime)&&Et(this,ef,Wh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ff?1/0:5*60*1e3))}clearGcTimeout(){Le(this,ef)&&(Wh.clearTimeout(Le(this,ef)),Et(this,ef,void 0))}},ef=new WeakMap,qB),tf,Um,Gs,nf,Aa,vb,rf,Co,pc,UB,yW=(UB=class extends nz{constructor(e){super();zt(this,Co);zt(this,tf);zt(this,Um);zt(this,Gs);zt(this,nf);zt(this,Aa);zt(this,vb);zt(this,rf);Et(this,rf,!1),Et(this,vb,e.defaultOptions),this.setOptions(e.options),this.observers=[],Et(this,nf,e.client),Et(this,Gs,Le(this,nf).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Et(this,tf,KM(this.options)),this.state=e.state??Le(this,tf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Le(this,Aa))==null?void 0:e.promise}setOptions(e){if(this.options={...Le(this,vb),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=KM(this.options);n.data!==void 0&&(this.setState(YM(n.data,n.dataUpdatedAt)),Et(this,tf,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,Gs).remove(this)}setData(e,n){const a=WA(this.state.data,e,this.options);return xn(this,Co,pc).call(this,{data:a,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),a}setState(e,n){xn(this,Co,pc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var a,i;const n=(a=Le(this,Aa))==null?void 0:a.promise;return(i=Le(this,Aa))==null||i.cancel(e),n?n.then(Ai).catch(Ai):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,tf))}isActive(){return this.observers.some(e=>Ws(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===CO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>sd(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!XB(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Le(this,Aa))==null||n.continue()}onOnline(){var n;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Le(this,Aa))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Le(this,Gs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Le(this,Aa)&&(Le(this,rf)?Le(this,Aa).cancel({revert:!0}):Le(this,Aa).cancelRetry()),this.scheduleGc()),Le(this,Gs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xn(this,Co,pc).call(this,{type:"invalidate"})}async fetch(e,n){var c,d,f,p,g,x,b,j,S,_,T,C;if(this.state.fetchStatus!=="idle"&&((c=Le(this,Aa))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Le(this,Aa))return Le(this,Aa).continueRetry(),Le(this,Aa).promise}if(e&&this.setOptions(e),!this.options.queryFn){const P=this.observers.find(k=>k.options.queryFn);P&&this.setOptions(P.options)}const a=new AbortController,i=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(Et(this,rf,!0),a.signal)})},s=()=>{const P=ZB(this.options,n),O=(()=>{const I={client:Le(this,nf),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return Et(this,rf,!1),this.options.persister?this.options.persister(P,O,this):P(O)},l=(()=>{const P={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Le(this,nf),state:this.state,fetchFn:s};return i(P),P})();(d=this.options.behavior)==null||d.onFetch(l,this),Et(this,Um,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&xn(this,Co,pc).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Et(this,Aa,tz({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:P=>{P instanceof KA&&P.revert&&this.setState({...Le(this,Um),fetchStatus:"idle"}),a.abort()},onFail:(P,k)=>{xn(this,Co,pc).call(this,{type:"failed",failureCount:P,error:k})},onPause:()=>{xn(this,Co,pc).call(this,{type:"pause"})},onContinue:()=>{xn(this,Co,pc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const P=await Le(this,Aa).start();if(P===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(P),(x=(g=Le(this,Gs).config).onSuccess)==null||x.call(g,P,this),(j=(b=Le(this,Gs).config).onSettled)==null||j.call(b,P,this.state.error,this),P}catch(P){if(P instanceof KA){if(P.silent)return Le(this,Aa).promise;if(P.revert){if(this.state.data===void 0)throw P;return this.state.data}}throw xn(this,Co,pc).call(this,{type:"error",error:P}),(_=(S=Le(this,Gs).config).onError)==null||_.call(S,P,this),(C=(T=Le(this,Gs).config).onSettled)==null||C.call(T,this.state.data,P,this),P}finally{this.scheduleGc()}}},tf=new WeakMap,Um=new WeakMap,Gs=new WeakMap,nf=new WeakMap,Aa=new WeakMap,vb=new WeakMap,rf=new WeakMap,Co=new WeakSet,pc=function(e){const n=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...rz(a.data,this.options),fetchMeta:e.meta??null};case"success":const i={...a,...YM(e.data,e.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Et(this,Um,e.manual?i:void 0),i;case"error":const s=e.error;return{...a,error:s,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=n(this.state),ja.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),Le(this,Gs).notify({query:this,type:"updated",action:e})})},UB);function rz(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ez(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function YM(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function KM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,a=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zi,$n,bb,Ti,af,Vm,gc,Xu,jb,Hm,Gm,sf,of,Ju,Wm,dr,lv,QA,XA,JA,ZA,eE,tE,nE,az,VB,xW=(VB=class extends Pg{constructor(e,n){super();zt(this,dr);zt(this,Zi);zt(this,$n);zt(this,bb);zt(this,Ti);zt(this,af);zt(this,Vm);zt(this,gc);zt(this,Xu);zt(this,jb);zt(this,Hm);zt(this,Gm);zt(this,sf);zt(this,of);zt(this,Ju);zt(this,Wm,new Set);this.options=n,Et(this,Zi,e),Et(this,Xu,null),Et(this,gc,YA()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Le(this,$n).addObserver(this),QM(Le(this,$n),this.options)?xn(this,dr,lv).call(this):this.updateResult(),xn(this,dr,ZA).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rE(Le(this,$n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rE(Le(this,$n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,xn(this,dr,eE).call(this),xn(this,dr,tE).call(this),Le(this,$n).removeObserver(this)}setOptions(e){const n=this.options,a=Le(this,$n);if(this.options=Le(this,Zi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ws(this.options.enabled,Le(this,$n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");xn(this,dr,nE).call(this),Le(this,$n).setOptions(this.options),n._defaulted&&!sw(this.options,n)&&Le(this,Zi).getQueryCache().notify({type:"observerOptionsUpdated",query:Le(this,$n),observer:this});const i=this.hasListeners();i&&XM(Le(this,$n),a,this.options,n)&&xn(this,dr,lv).call(this),this.updateResult(),i&&(Le(this,$n)!==a||Ws(this.options.enabled,Le(this,$n))!==Ws(n.enabled,Le(this,$n))||sd(this.options.staleTime,Le(this,$n))!==sd(n.staleTime,Le(this,$n)))&&xn(this,dr,QA).call(this);const s=xn(this,dr,XA).call(this);i&&(Le(this,$n)!==a||Ws(this.options.enabled,Le(this,$n))!==Ws(n.enabled,Le(this,$n))||s!==Le(this,Ju))&&xn(this,dr,JA).call(this,s)}getOptimisticResult(e){const n=Le(this,Zi).getQueryCache().build(Le(this,Zi),e),a=this.createResult(n,e);return bW(this,a)&&(Et(this,Ti,a),Et(this,Vm,this.options),Et(this,af,Le(this,$n).state)),a}getCurrentResult(){return Le(this,Ti)}trackResult(e,n){return new Proxy(e,{get:(a,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Le(this,gc).status==="pending"&&Le(this,gc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,i))})}trackProp(e){Le(this,Wm).add(e)}getCurrentQuery(){return Le(this,$n)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Le(this,Zi).defaultQueryOptions(e),a=Le(this,Zi).getQueryCache().build(Le(this,Zi),n);return a.fetch().then(()=>this.createResult(a,n))}fetch(e){return xn(this,dr,lv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Le(this,Ti)))}createResult(e,n){var B;const a=Le(this,$n),i=this.options,s=Le(this,Ti),o=Le(this,af),l=Le(this,Vm),d=e!==a?e.state:Le(this,bb),{state:f}=e;let p={...f},g=!1,x;if(n._optimisticResults){const $=this.hasListeners(),L=!$&&QM(e,n),V=$&&XM(e,a,n,i);(L||V)&&(p={...p,...rz(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:b,errorUpdatedAt:j,status:S}=p;x=p.data;let _=!1;if(n.placeholderData!==void 0&&x===void 0&&S==="pending"){let $;s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?($=s.data,_=!0):$=typeof n.placeholderData=="function"?n.placeholderData((B=Le(this,Gm))==null?void 0:B.state.data,Le(this,Gm)):n.placeholderData,$!==void 0&&(S="success",x=WA(s==null?void 0:s.data,$,n),g=!0)}if(n.select&&x!==void 0&&!_)if(s&&x===(o==null?void 0:o.data)&&n.select===Le(this,jb))x=Le(this,Hm);else try{Et(this,jb,n.select),x=n.select(x),x=WA(s==null?void 0:s.data,x,n),Et(this,Hm,x),Et(this,Xu,null)}catch($){Et(this,Xu,$)}Le(this,Xu)&&(b=Le(this,Xu),x=Le(this,Hm),j=Date.now(),S="error");const T=p.fetchStatus==="fetching",C=S==="pending",P=S==="error",k=C&&T,O=x!==void 0,F={status:S,fetchStatus:p.fetchStatus,isPending:C,isSuccess:S==="success",isError:P,isInitialLoading:k,isLoading:k,data:x,dataUpdatedAt:p.dataUpdatedAt,error:b,errorUpdatedAt:j,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:P&&!O,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:P&&O,isStale:AO(e,n),refetch:this.refetch,promise:Le(this,gc),isEnabled:Ws(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const $=F.data!==void 0,L=F.status==="error"&&!$,V=X=>{L?X.reject(F.error):$&&X.resolve(F.data)},H=()=>{const X=Et(this,gc,F.promise=YA());V(X)},te=Le(this,gc);switch(te.status){case"pending":e.queryHash===a.queryHash&&V(te);break;case"fulfilled":(L||F.data!==te.value)&&H();break;case"rejected":(!L||F.error!==te.reason)&&H();break}}return F}updateResult(){const e=Le(this,Ti),n=this.createResult(Le(this,$n),this.options);if(Et(this,af,Le(this,$n).state),Et(this,Vm,this.options),Le(this,af).data!==void 0&&Et(this,Gm,Le(this,$n)),sw(n,e))return;Et(this,Ti,n);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!Le(this,Wm).size)return!0;const o=new Set(s??Le(this,Wm));return this.options.throwOnError&&o.add("error"),Object.keys(Le(this,Ti)).some(l=>{const c=l;return Le(this,Ti)[c]!==e[c]&&o.has(c)})};xn(this,dr,az).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&xn(this,dr,ZA).call(this)}},Zi=new WeakMap,$n=new WeakMap,bb=new WeakMap,Ti=new WeakMap,af=new WeakMap,Vm=new WeakMap,gc=new WeakMap,Xu=new WeakMap,jb=new WeakMap,Hm=new WeakMap,Gm=new WeakMap,sf=new WeakMap,of=new WeakMap,Ju=new WeakMap,Wm=new WeakMap,dr=new WeakSet,lv=function(e){xn(this,dr,nE).call(this);let n=Le(this,$n).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ai)),n},QA=function(){xn(this,dr,eE).call(this);const e=sd(this.options.staleTime,Le(this,$n));if(ff||Le(this,Ti).isStale||!HA(e))return;const a=XB(Le(this,Ti).dataUpdatedAt,e)+1;Et(this,sf,Wh.setTimeout(()=>{Le(this,Ti).isStale||this.updateResult()},a))},XA=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Le(this,$n)):this.options.refetchInterval)??!1},JA=function(e){xn(this,dr,tE).call(this),Et(this,Ju,e),!(ff||Ws(this.options.enabled,Le(this,$n))===!1||!HA(Le(this,Ju))||Le(this,Ju)===0)&&Et(this,of,Wh.setInterval(()=>{(this.options.refetchIntervalInBackground||kO.isFocused())&&xn(this,dr,lv).call(this)},Le(this,Ju)))},ZA=function(){xn(this,dr,QA).call(this),xn(this,dr,JA).call(this,xn(this,dr,XA).call(this))},eE=function(){Le(this,sf)&&(Wh.clearTimeout(Le(this,sf)),Et(this,sf,void 0))},tE=function(){Le(this,of)&&(Wh.clearInterval(Le(this,of)),Et(this,of,void 0))},nE=function(){const e=Le(this,Zi).getQueryCache().build(Le(this,Zi),this.options);if(e===Le(this,$n))return;const n=Le(this,$n);Et(this,$n,e),Et(this,bb,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},az=function(e){ja.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Le(this,Ti))}),Le(this,Zi).getQueryCache().notify({query:Le(this,$n),type:"observerResultsUpdated"})})},VB);function vW(t,e){return Ws(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function QM(t,e){return vW(t,e)||t.state.data!==void 0&&rE(t,e,e.refetchOnMount)}function rE(t,e,n){if(Ws(e.enabled,t)!==!1&&sd(e.staleTime,t)!=="static"){const a=typeof n=="function"?n(t):n;return a==="always"||a!==!1&&AO(t,e)}return!1}function XM(t,e,n,a){return(t!==e||Ws(a.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&AO(t,n)}function AO(t,e){return Ws(e.enabled,t)!==!1&&t.isStaleByTime(sd(e.staleTime,t))}function bW(t,e){return!sw(t.getCurrentResult(),e)}function JM(t){return{onFetch:(e,n)=>{var f,p,g,x,b;const a=e.options,i=(g=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,s=((x=e.state.data)==null?void 0:x.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let j=!1;const S=C=>{dW(C,()=>e.signal,()=>j=!0)},_=ZB(e.options,e.fetchOptions),T=async(C,P,k)=>{if(j)return Promise.reject();if(P==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:P,direction:k?"backward":"forward",meta:e.options.meta};return S(L),L})(),F=await _(I),{maxPages:B}=e.options,$=k?uW:cW;return{pages:$(C.pages,F,B),pageParams:$(C.pageParams,P,B)}};if(i&&s.length){const C=i==="backward",P=C?jW:ZM,k={pages:s,pageParams:o},O=P(a,k);l=await T(k,O,C)}else{const C=t??s.length;do{const P=c===0?o[0]??a.initialPageParam:ZM(a,l);if(c>0&&P==null)break;l=await T(l,P),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var j,S;return(S=(j=e.options).persister)==null?void 0:S.call(j,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function ZM(t,{pages:e,pageParams:n}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,n[a],n):void 0}function jW(t,{pages:e,pageParams:n}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,n[0],n):void 0}var wb,bl,ki,lf,jl,Vu,HB,wW=(HB=class extends nz{constructor(e){super();zt(this,jl);zt(this,wb);zt(this,bl);zt(this,ki);zt(this,lf);Et(this,wb,e.client),this.mutationId=e.mutationId,Et(this,ki,e.mutationCache),Et(this,bl,[]),this.state=e.state||iz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Le(this,bl).includes(e)||(Le(this,bl).push(e),this.clearGcTimeout(),Le(this,ki).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Et(this,bl,Le(this,bl).filter(n=>n!==e)),this.scheduleGc(),Le(this,ki).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Le(this,bl).length||(this.state.status==="pending"?this.scheduleGc():Le(this,ki).remove(this))}continue(){var e;return((e=Le(this,lf))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,d,f,p,g,x,b,j,S,_,T,C,P,k,O,I,F,B;const n=()=>{xn(this,jl,Vu).call(this,{type:"continue"})},a={client:Le(this,wb),meta:this.options.meta,mutationKey:this.options.mutationKey};Et(this,lf,tz({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:($,L)=>{xn(this,jl,Vu).call(this,{type:"failed",failureCount:$,error:L})},onPause:()=>{xn(this,jl,Vu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,ki).canRun(this)}));const i=this.state.status==="pending",s=!Le(this,lf).canStart();try{if(i)n();else{xn(this,jl,Vu).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(o=Le(this,ki).config).onMutate)==null?void 0:l.call(o,e,this,a));const L=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,a));L!==this.state.context&&xn(this,jl,Vu).call(this,{type:"pending",context:L,variables:e,isPaused:s})}const $=await Le(this,lf).start();return await((p=(f=Le(this,ki).config).onSuccess)==null?void 0:p.call(f,$,e,this.state.context,this,a)),await((x=(g=this.options).onSuccess)==null?void 0:x.call(g,$,e,this.state.context,a)),await((j=(b=Le(this,ki).config).onSettled)==null?void 0:j.call(b,$,null,this.state.variables,this.state.context,this,a)),await((_=(S=this.options).onSettled)==null?void 0:_.call(S,$,null,e,this.state.context,a)),xn(this,jl,Vu).call(this,{type:"success",data:$}),$}catch($){try{await((C=(T=Le(this,ki).config).onError)==null?void 0:C.call(T,$,e,this.state.context,this,a))}catch(L){Promise.reject(L)}try{await((k=(P=this.options).onError)==null?void 0:k.call(P,$,e,this.state.context,a))}catch(L){Promise.reject(L)}try{await((I=(O=Le(this,ki).config).onSettled)==null?void 0:I.call(O,void 0,$,this.state.variables,this.state.context,this,a))}catch(L){Promise.reject(L)}try{await((B=(F=this.options).onSettled)==null?void 0:B.call(F,void 0,$,e,this.state.context,a))}catch(L){Promise.reject(L)}throw xn(this,jl,Vu).call(this,{type:"error",error:$}),$}finally{Le(this,ki).runNext(this)}}},wb=new WeakMap,bl=new WeakMap,ki=new WeakMap,lf=new WeakMap,jl=new WeakSet,Vu=function(e){const n=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ja.batch(()=>{Le(this,bl).forEach(a=>{a.onMutationUpdate(e)}),Le(this,ki).notify({mutation:this,type:"updated",action:e})})},HB);function iz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yc,To,Nb,GB,NW=(GB=class extends Pg{constructor(e={}){super();zt(this,yc);zt(this,To);zt(this,Nb);this.config=e,Et(this,yc,new Set),Et(this,To,new Map),Et(this,Nb,0)}build(e,n,a){const i=new wW({client:e,mutationCache:this,mutationId:++cj(this,Nb)._,options:e.defaultMutationOptions(n),state:a});return this.add(i),i}add(e){Le(this,yc).add(e);const n=uj(e);if(typeof n=="string"){const a=Le(this,To).get(n);a?a.push(e):Le(this,To).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Le(this,yc).delete(e)){const n=uj(e);if(typeof n=="string"){const a=Le(this,To).get(n);if(a)if(a.length>1){const i=a.indexOf(e);i!==-1&&a.splice(i,1)}else a[0]===e&&Le(this,To).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=uj(e);if(typeof n=="string"){const a=Le(this,To).get(n),i=a==null?void 0:a.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var a;const n=uj(e);if(typeof n=="string"){const i=(a=Le(this,To).get(n))==null?void 0:a.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ja.batch(()=>{Le(this,yc).forEach(e=>{this.notify({type:"removed",mutation:e})}),Le(this,yc).clear(),Le(this,To).clear()})}getAll(){return Array.from(Le(this,yc))}find(e){const n={exact:!0,...e};return this.getAll().find(a=>HM(n,a))}findAll(e={}){return this.getAll().filter(n=>HM(e,n))}notify(e){ja.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ja.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ai))))}},yc=new WeakMap,To=new WeakMap,Nb=new WeakMap,GB);function uj(t){var e;return(e=t.options.scope)==null?void 0:e.id}var xc,Zu,es,vc,Ec,Wj,aE,WB,SW=(WB=class extends Pg{constructor(n,a){super();zt(this,Ec);zt(this,xc);zt(this,Zu);zt(this,es);zt(this,vc);Et(this,xc,n),this.setOptions(a),this.bindMethods(),xn(this,Ec,Wj).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const a=this.options;this.options=Le(this,xc).defaultMutationOptions(n),sw(this.options,a)||Le(this,xc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Le(this,es),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&pf(a.mutationKey)!==pf(this.options.mutationKey)?this.reset():((i=Le(this,es))==null?void 0:i.state.status)==="pending"&&Le(this,es).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Le(this,es))==null||n.removeObserver(this)}onMutationUpdate(n){xn(this,Ec,Wj).call(this),xn(this,Ec,aE).call(this,n)}getCurrentResult(){return Le(this,Zu)}reset(){var n;(n=Le(this,es))==null||n.removeObserver(this),Et(this,es,void 0),xn(this,Ec,Wj).call(this),xn(this,Ec,aE).call(this)}mutate(n,a){var i;return Et(this,vc,a),(i=Le(this,es))==null||i.removeObserver(this),Et(this,es,Le(this,xc).getMutationCache().build(Le(this,xc),this.options)),Le(this,es).addObserver(this),Le(this,es).execute(n)}},xc=new WeakMap,Zu=new WeakMap,es=new WeakMap,vc=new WeakMap,Ec=new WeakSet,Wj=function(){var a;const n=((a=Le(this,es))==null?void 0:a.state)??iz();Et(this,Zu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},aE=function(n){ja.batch(()=>{var a,i,s,o,l,c,d,f;if(Le(this,vc)&&this.hasListeners()){const p=Le(this,Zu).variables,g=Le(this,Zu).context,x={client:Le(this,xc),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(i=(a=Le(this,vc)).onSuccess)==null||i.call(a,n.data,p,g,x)}catch(b){Promise.reject(b)}try{(o=(s=Le(this,vc)).onSettled)==null||o.call(s,n.data,null,p,g,x)}catch(b){Promise.reject(b)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=Le(this,vc)).onError)==null||c.call(l,n.error,p,g,x)}catch(b){Promise.reject(b)}try{(f=(d=Le(this,vc)).onSettled)==null||f.call(d,void 0,n.error,p,g,x)}catch(b){Promise.reject(b)}}}this.listeners.forEach(p=>{p(Le(this,Zu))})})},WB),wl,YB,_W=(YB=class extends Pg{constructor(e={}){super();zt(this,wl);this.config=e,Et(this,wl,new Map)}build(e,n,a){const i=n.queryKey,s=n.queryHash??_O(i,n);let o=this.get(s);return o||(o=new yW({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:a,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Le(this,wl).has(e.queryHash)||(Le(this,wl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Le(this,wl).get(e.queryHash);n&&(e.destroy(),n===e&&Le(this,wl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ja.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Le(this,wl).get(e)}getAll(){return[...Le(this,wl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(a=>VM(n,a))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(a=>VM(e,a)):n}notify(e){ja.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ja.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ja.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},wl=new WeakMap,YB),Kr,ed,td,Ym,Km,nd,Qm,Xm,KB,CW=(KB=class{constructor(t={}){zt(this,Kr);zt(this,ed);zt(this,td);zt(this,Ym);zt(this,Km);zt(this,nd);zt(this,Qm);zt(this,Xm);Et(this,Kr,t.queryCache||new _W),Et(this,ed,t.mutationCache||new NW),Et(this,td,t.defaultOptions||{}),Et(this,Ym,new Map),Et(this,Km,new Map),Et(this,nd,0)}mount(){cj(this,nd)._++,Le(this,nd)===1&&(Et(this,Qm,kO.subscribe(async t=>{t&&(await this.resumePausedMutations(),Le(this,Kr).onFocus())})),Et(this,Xm,ow.subscribe(async t=>{t&&(await this.resumePausedMutations(),Le(this,Kr).onOnline())})))}unmount(){var t,e;cj(this,nd)._--,Le(this,nd)===0&&((t=Le(this,Qm))==null||t.call(this),Et(this,Qm,void 0),(e=Le(this,Xm))==null||e.call(this),Et(this,Xm,void 0))}isFetching(t){return Le(this,Kr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Le(this,ed).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Le(this,Kr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Le(this,Kr).build(this,e),a=n.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(sd(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return Le(this,Kr).findAll(t).map(({queryKey:e,state:n})=>{const a=n.data;return[e,a]})}setQueryData(t,e,n){const a=this.defaultQueryOptions({queryKey:t}),i=Le(this,Kr).get(a.queryHash),s=i==null?void 0:i.state.data,o=sW(e,s);if(o!==void 0)return Le(this,Kr).build(this,a).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ja.batch(()=>Le(this,Kr).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Le(this,Kr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Le(this,Kr);ja.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Le(this,Kr);return ja.batch(()=>(n.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},a=ja.batch(()=>Le(this,Kr).findAll(t).map(i=>i.cancel(n)));return Promise.all(a).then(Ai).catch(Ai)}invalidateQueries(t,e={}){return ja.batch(()=>(Le(this,Kr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},a=ja.batch(()=>Le(this,Kr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Ai)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(a).then(Ai)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Le(this,Kr).build(this,e);return n.isStaleByTime(sd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ai).catch(Ai)}fetchInfiniteQuery(t){return t.behavior=JM(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ai).catch(Ai)}ensureInfiniteQueryData(t){return t.behavior=JM(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ow.isOnline()?Le(this,ed).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,Kr)}getMutationCache(){return Le(this,ed)}getDefaultOptions(){return Le(this,td)}setDefaultOptions(t){Et(this,td,t)}setQueryDefaults(t,e){Le(this,Ym).set(pf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Le(this,Ym).values()],n={};return e.forEach(a=>{Cv(t,a.queryKey)&&Object.assign(n,a.defaultOptions)}),n}setMutationDefaults(t,e){Le(this,Km).set(pf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Le(this,Km).values()],n={};return e.forEach(a=>{Cv(t,a.mutationKey)&&Object.assign(n,a.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Le(this,td).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=_O(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===CO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Le(this,td).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Le(this,Kr).clear(),Le(this,ed).clear()}},Kr=new WeakMap,ed=new WeakMap,td=new WeakMap,Ym=new WeakMap,Km=new WeakMap,nd=new WeakMap,Qm=new WeakMap,Xm=new WeakMap,KB),sz=v.createContext(void 0),ss=t=>{const e=v.useContext(sz);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},TW=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(sz.Provider,{value:t,children:e})),oz=v.createContext(!1),kW=()=>v.useContext(oz);oz.Provider;function AW(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var EW=v.createContext(AW()),PW=()=>v.useContext(EW),OW=(t,e,n)=>{const a=n!=null&&n.state.error&&typeof t.throwOnError=="function"?TO(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||a)&&(e.isReset()||(t.retryOnMount=!1))},DW=t=>{v.useEffect(()=>{t.clearReset()},[t])},MW=({result:t,errorResetBoundary:e,throwOnError:n,query:a,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&a&&(i&&t.data===void 0||TO(n,[t.error,a])),IW=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...i)=>n(a(...i)):n(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},RW=(t,e)=>t.isLoading&&t.isFetching&&!e,LW=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,eI=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function FW(t,e,n){var g,x,b,j;const a=kW(),i=PW(),s=ss(),o=s.defaultQueryOptions(t);(x=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",IW(o),OW(o,i,l),DW(i);const c=!s.getQueryCache().get(o.queryHash),[d]=v.useState(()=>new e(s,o)),f=d.getOptimisticResult(o),p=!a&&t.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(S=>{const _=p?d.subscribe(ja.batchCalls(S)):Ai;return d.updateResult(),_},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),v.useEffect(()=>{d.setOptions(o)},[o,d]),LW(o,f))throw eI(o,d,i);if(MW({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((j=(b=s.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||j.call(b,o,f),o.experimental_prefetchInRender&&!ff&&RW(f,a)){const S=c?eI(o,d,i):l==null?void 0:l.promise;S==null||S.catch(Ai).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?f:d.trackResult(f)}function PN(t,e){return FW(t,xW)}function $W(t,e){const n=ss(),[a]=v.useState(()=>new SW(n,t));v.useEffect(()=>{a.setOptions(t)},[a,t]);const i=v.useSyncExternalStore(v.useCallback(o=>a.subscribe(ja.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),s=v.useCallback((o,l)=>{a.mutate(o,l).catch(Ai)},[a]);if(i.error&&TO(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const BW=new CW({defaultOptions:{queries:{staleTime:0,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!1}}}),Ut={clinicSettings:["clinicSettings"],clinicSubscription:["clinicSubscription"],patients:{all:["patients"],list:t=>["patients","list",t],detail:t=>["patients","detail",t],context:t=>["patients","context",t]},queue:{all:["queue"],today:["queue","today"],entry:t=>["queue","entry",t],latest:t=>["queue","patient",t,"latest"]},staff:{all:["staff"],list:["staff","list"],detail:t=>["staff","detail",t]},pharmacyOrders:{all:["pharmacyOrders"],detail:t=>["pharmacyOrders","detail",t],byPatient:t=>["pharmacyOrders","patient",t]},labOrders:{all:["labOrders"],detail:t=>["labOrders","detail",t],byPatient:t=>["labOrders","patient",t]},drugs:{all:["drugs"],list:["drugs","list"],detail:t=>["drugs","detail",t]},labTests:{all:["labTests"],list:["labTests","list"]},patientDebts:{balance:t=>["patientDebts","balance",t]},dental:{records:t=>["dental","records",t]}},zW="modulepreload",qW=function(t){return"/"+t},tI={},ON=function(e,n,a){let i=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(n.map(d=>{if(d=qW(d),d in tI)return;tI[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":zW,f||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((x,b)=>{g.addEventListener("load",x),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},Tm=({message:t="Newtons Ai HMS",fullScreen:e=!1})=>r.jsx("div",{className:`loading-container ${e?"fullscreen":""}`,children:r.jsxs("div",{className:"loading-content",children:[r.jsxs("div",{className:"spinner-ring",children:[r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{})]}),r.jsx("div",{className:"loading-title",children:t}),e&&r.jsx("div",{className:"loading-subtitle",children:"Optimizing your experience..."})]})});function UW(t={}){const{nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i}=t,[s,o]=v.useState(!1),l=v.useRef(a);l.current=a;const c=v.useRef(i);return c.current=i,v.useEffect(()=>{const d=document.createElement("script");return d.src="https://accounts.google.com/gsi/client",n&&(d.src+=`?hl=${n}`),d.async=!0,d.defer=!0,d.nonce=e,d.onload=()=>{var f;o(!0),(f=l.current)===null||f===void 0||f.call(l)},d.onerror=()=>{var f;o(!1),(f=c.current)===null||f===void 0||f.call(c)},document.body.appendChild(d),()=>{document.body.removeChild(d)}},[e]),s}const lz=v.createContext(null);function VW({clientId:t,nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i,children:s}){const o=UW({nonce:e,onScriptLoadSuccess:a,onScriptLoadError:i,locale:n}),l=v.useMemo(()=>({locale:n,clientId:t,scriptLoadedSuccessfully:o}),[t,o]);return Ce.createElement(lz.Provider,{value:l},s)}function HW(){const t=v.useContext(lz);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function GW(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const WW={large:40,medium:32,small:20};function YW({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:a,type:i="standard",theme:s="outline",size:o="large",text:l,shape:c,logo_alignment:d,width:f,click_listener:p,state:g,containerProps:x,...b}){const j=v.useRef(null),{clientId:S,locale:_,scriptLoadedSuccessfully:T}=HW(),C=v.useRef(t);C.current=t;const P=v.useRef(e);P.current=e;const k=v.useRef(a);return k.current=a,v.useEffect(()=>{var O,I,F,B,$,L,V,H,te;if(T)return(F=(I=(O=window==null?void 0:window.google)===null||O===void 0?void 0:O.accounts)===null||I===void 0?void 0:I.id)===null||F===void 0||F.initialize({client_id:S,callback:X=>{var q;if(!(X!=null&&X.credential))return(q=P.current)===null||q===void 0?void 0:q.call(P);const{credential:Y,select_by:se}=X;C.current({credential:Y,clientId:GW(X),select_by:se})},...b}),(L=($=(B=window==null?void 0:window.google)===null||B===void 0?void 0:B.accounts)===null||$===void 0?void 0:$.id)===null||L===void 0||L.renderButton(j.current,{type:i,theme:s,size:o,text:l,shape:c,logo_alignment:d,width:f,locale:_,click_listener:p,state:g}),n&&((te=(H=(V=window==null?void 0:window.google)===null||V===void 0?void 0:V.accounts)===null||H===void 0?void 0:H.id)===null||te===void 0||te.prompt(k.current)),()=>{var X,q,Y;n&&((Y=(q=(X=window==null?void 0:window.google)===null||X===void 0?void 0:X.accounts)===null||q===void 0?void 0:q.id)===null||Y===void 0||Y.cancel())}},[S,T,n,i,s,o,l,c,d,f,_]),Ce.createElement("div",{...x,ref:j,style:{height:WW[o],...x==null?void 0:x.style}})}var Bx={},nI;function KW(){if(nI)return Bx;nI=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.parse=o,Bx.serialize=d;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,x){const b=new s,j=g.length;if(j<2)return b;const S=(x==null?void 0:x.decode)||f;let _=0;do{const T=g.indexOf("=",_);if(T===-1)break;const C=g.indexOf(";",_),P=C===-1?j:C;if(T>P){_=g.lastIndexOf(";",T-1)+1;continue}const k=l(g,_,T),O=c(g,T,k),I=g.slice(k,O);if(b[I]===void 0){let F=l(g,T+1,P),B=c(g,P,F);const $=S(g.slice(F,B));b[I]=$}_=P+1}while(_<j);return b}function l(g,x,b){do{const j=g.charCodeAt(x);if(j!==32&&j!==9)return x}while(++x<b);return b}function c(g,x,b){for(;x>b;){const j=g.charCodeAt(--x);if(j!==32&&j!==9)return x+1}return b}function d(g,x,b){const j=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const S=j(x);if(!e.test(S))throw new TypeError(`argument val is invalid: ${x}`);let _=g+"="+S;if(!b)return _;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);_+="; Max-Age="+b.maxAge}if(b.domain){if(!n.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);_+="; Domain="+b.domain}if(b.path){if(!a.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);_+="; Path="+b.path}if(b.expires){if(!p(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);_+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(_+="; HttpOnly"),b.secure&&(_+="; Secure"),b.partitioned&&(_+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return _}function f(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return Bx}KW();var rI="popstate";function QW(t={}){function e(a,i){let{pathname:s,search:o,hash:l}=a.location;return iE("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){return typeof i=="string"?i:Tv(i)}return JW(e,n,null,t)}function Ur(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XW(){return Math.random().toString(36).substring(2,10)}function aI(t,e){return{usr:t.state,key:t.key,idx:e}}function iE(t,e,n=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Og(e):e,state:n,key:e&&e.key||a||XW()}}function Tv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Og(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function JW(t,e,n,a={}){let{window:i=document.defaultView,v5Compat:s=!1}=a,o=i.history,l="POP",c=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let S=f(),_=S==null?null:S-d;d=S,c&&c({action:l,location:j.location,delta:_})}function g(S,_){l="PUSH";let T=iE(j.location,S,_);d=f()+1;let C=aI(T,d),P=j.createHref(T);try{o.pushState(C,"",P)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(P)}s&&c&&c({action:l,location:j.location,delta:1})}function x(S,_){l="REPLACE";let T=iE(j.location,S,_);d=f();let C=aI(T,d),P=j.createHref(T);o.replaceState(C,"",P),s&&c&&c({action:l,location:j.location,delta:0})}function b(S){return ZW(S)}let j={get action(){return l},get location(){return t(i,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(rI,p),c=S,()=>{i.removeEventListener(rI,p),c=null}},createHref(S){return e(i,S)},createURL:b,encodeLocation(S){let _=b(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:x,go(S){return o.go(S)}};return j}function ZW(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ur(n,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Tv(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function cz(t,e,n="/"){return eY(t,e,n,!1)}function eY(t,e,n,a){let i=typeof e=="string"?Og(e):e,s=Pc(i.pathname||"/",n);if(s==null)return null;let o=uz(t);tY(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=hY(s);l=uY(o[c],d,a)}return l}function uz(t,e=[],n=[],a=""){let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Ur(c.relativePath.startsWith(a),`Absolute route path "${c.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(a.length));let d=Sc([a,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(Ur(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),uz(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:lY(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of dz(s.path))i(s,o,c)}),e}function dz(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(a.length===0)return i?[s,""]:[s];let o=dz(a.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function tY(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cY(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var nY=/^:[\w-]+$/,rY=3,aY=2,iY=1,sY=10,oY=-2,iI=t=>t==="*";function lY(t,e){let n=t.split("/"),a=n.length;return n.some(iI)&&(a+=oY),e&&(a+=aY),n.filter(i=>!iI(i)).reduce((i,s)=>i+(nY.test(s)?rY:s===""?iY:sY),a)}function cY(t,e){return t.length===e.length&&t.slice(0,-1).every((a,i)=>a===e[i])?t[t.length-1]-e[e.length-1]:0}function uY(t,e,n=!1){let{routesMeta:a}=t,i={},s="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=lw({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!p&&d&&n&&!a[a.length-1].route.index&&(p=lw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Sc([s,p.pathname]),pathnameBase:gY(Sc([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Sc([s,p.pathnameBase]))}return o}function lw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=dY(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:a.reduce((d,{paramName:f,isOptional:p},g)=>{if(f==="*"){let b=l[g]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function dY(t,e=!1,n=!0){Zs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function hY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function fY(t,e="/"){let{pathname:n,search:a="",hash:i=""}=typeof t=="string"?Og(t):t;return{pathname:n?n.startsWith("/")?n:pY(n,e):e,search:yY(a),hash:xY(i)}}function pY(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Q_(t,e,n,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mY(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function EO(t){let e=mY(t);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function PO(t,e,n,a=!1){let i;typeof t=="string"?i=Og(t):(i={...t},Ur(!i.pathname||!i.pathname.includes("?"),Q_("?","pathname","search",i)),Ur(!i.pathname||!i.pathname.includes("#"),Q_("#","pathname","hash",i)),Ur(!i.search||!i.search.includes("#"),Q_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!a&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=fY(i,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var Sc=t=>t.join("/").replace(/\/\/+/g,"/"),gY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var hz=["POST","PUT","PATCH","DELETE"];new Set(hz);var bY=["GET",...hz];new Set(bY);var Dg=v.createContext(null);Dg.displayName="DataRouter";var DN=v.createContext(null);DN.displayName="DataRouterState";var fz=v.createContext({isTransitioning:!1});fz.displayName="ViewTransition";var jY=v.createContext(new Map);jY.displayName="Fetchers";var wY=v.createContext(null);wY.displayName="Await";var Fo=v.createContext(null);Fo.displayName="Navigation";var Sb=v.createContext(null);Sb.displayName="Location";var $o=v.createContext({outlet:null,matches:[],isDataRoute:!1});$o.displayName="Route";var OO=v.createContext(null);OO.displayName="RouteError";function NY(t,{relative:e}={}){Ur(Mg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=v.useContext(Fo),{hash:i,pathname:s,search:o}=_b(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Sc([n,s])),a.createHref({pathname:l,search:o,hash:i})}function Mg(){return v.useContext(Sb)!=null}function Lr(){return Ur(Mg(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Sb).location}var pz="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mz(t){v.useContext(Fo).static||v.useLayoutEffect(t)}function Mt(){let{isDataRoute:t}=v.useContext($o);return t?RY():SY()}function SY(){Ur(Mg(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Dg),{basename:e,navigator:n}=v.useContext(Fo),{matches:a}=v.useContext($o),{pathname:i}=Lr(),s=JSON.stringify(EO(a)),o=v.useRef(!1);return mz(()=>{o.current=!0}),v.useCallback((c,d={})=>{if(Zs(o.current,pz),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=PO(c,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Sc([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,i,t])}v.createContext(null);function Ma(){let{matches:t}=v.useContext($o),e=t[t.length-1];return e?e.params:{}}function _b(t,{relative:e}={}){let{matches:n}=v.useContext($o),{pathname:a}=Lr(),i=JSON.stringify(EO(n));return v.useMemo(()=>PO(t,JSON.parse(i),a,e==="path"),[t,i,a,e])}function _Y(t,e){return gz(t,e)}function gz(t,e,n,a){var T;Ur(Mg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=v.useContext(Fo),{matches:o}=v.useContext($o),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";yz(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=Lr(),x;if(e){let C=typeof e=="string"?Og(e):e;Ur(f==="/"||((T=C.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=g;let b=x.pathname||"/",j=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=!s&&n&&n.matches&&n.matches.length>0?n.matches:cz(t,{pathname:j});Zs(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Zs(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=EY(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Sc([f,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Sc([f,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,a);return e&&_?v.createElement(Sb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function CY(){let t=IY(),e=vY(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}var TY=v.createElement(CY,null),kY=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement($o.Provider,{value:this.props.routeContext},v.createElement(OO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AY({routeContext:t,match:e,children:n}){let a=v.useContext(Dg);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement($o.Provider,{value:t},n)}function EY(t,e=[],n=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);Ur(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,d,f)=>{let p,g=!1,x=null,b=null;n&&(p=s&&d.route.id?s[d.route.id]:void 0,x=d.route.errorElement||TY,o&&(l<0&&f===0?(yz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):l===f&&(g=!0,b=d.route.hydrateFallbackElement||null)));let j=e.concat(i.slice(0,f+1)),S=()=>{let _;return p?_=x:g?_=b:d.route.Component?_=v.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=c,v.createElement(AY,{match:d,routeContext:{outlet:c,matches:j,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?v.createElement(kY,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:S(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):S()},null)}function DO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PY(t){let e=v.useContext(Dg);return Ur(e,DO(t)),e}function OY(t){let e=v.useContext(DN);return Ur(e,DO(t)),e}function DY(t){let e=v.useContext($o);return Ur(e,DO(t)),e}function MO(t){let e=DY(t),n=e.matches[e.matches.length-1];return Ur(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function MY(){return MO("useRouteId")}function IY(){var a;let t=v.useContext(OO),e=OY("useRouteError"),n=MO("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[n]}function RY(){let{router:t}=PY("useNavigate"),e=MO("useNavigate"),n=v.useRef(!1);return mz(()=>{n.current=!0}),v.useCallback(async(i,s={})=>{Zs(n.current,pz),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var sI={};function yz(t,e,n){!e&&!sI[t]&&(sI[t]=!0,Zs(!1,n))}v.memo(LY);function LY({routes:t,future:e,state:n}){return gz(t,void 0,n,e)}function nn({to:t,replace:e,state:n,relative:a}){Ur(Mg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=v.useContext(Fo);Zs(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext($o),{pathname:o}=Lr(),l=Mt(),c=PO(t,EO(s),o,a==="path"),d=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:a})},[l,d,a,e,n]),null}function xt(t){Ur(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FY({basename:t="/",children:e=null,location:n,navigationType:a="POP",navigator:i,static:s=!1}){Ur(!Mg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Og(n));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:g="default"}=n,x=v.useMemo(()=>{let b=Pc(c,o);return b==null?null:{location:{pathname:b,search:d,hash:f,state:p,key:g},navigationType:a}},[o,c,d,f,p,g,a]);return Zs(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(Fo.Provider,{value:l},v.createElement(Sb.Provider,{children:e,value:x}))}function Sm({children:t,location:e}){return _Y(sE(t),e)}function sE(t,e=[]){let n=[];return v.Children.forEach(t,(a,i)=>{if(!v.isValidElement(a))return;let s=[...e,i];if(a.type===v.Fragment){n.push.apply(n,sE(a.props.children,s));return}Ur(a.type===xt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ur(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||s.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=sE(a.props.children,s)),n.push(o)}),n}var Yj="get",Kj="application/x-www-form-urlencoded";function MN(t){return t!=null&&typeof t.tagName=="string"}function $Y(t){return MN(t)&&t.tagName.toLowerCase()==="button"}function BY(t){return MN(t)&&t.tagName.toLowerCase()==="form"}function zY(t){return MN(t)&&t.tagName.toLowerCase()==="input"}function qY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function UY(t,e){return t.button===0&&(!e||e==="_self")&&!qY(t)}function oE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let a=t[n];return e.concat(Array.isArray(a)?a.map(i=>[n,i]):[[n,a]])},[]))}function VY(t,e){let n=oE(t);return e&&e.forEach((a,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var dj=null;function HY(){if(dj===null)try{new FormData(document.createElement("form"),0),dj=!1}catch{dj=!0}return dj}var GY=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function X_(t){return t!=null&&!GY.has(t)?(Zs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kj}"`),null):t}function WY(t,e){let n,a,i,s,o;if(BY(t)){let l=t.getAttribute("action");a=l?Pc(l,e):null,n=t.getAttribute("method")||Yj,i=X_(t.getAttribute("enctype"))||Kj,s=new FormData(t)}else if($Y(t)||zY(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(a=c?Pc(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Yj,i=X_(t.getAttribute("formenctype"))||X_(l.getAttribute("enctype"))||Kj,s=new FormData(l,t),!HY()){let{name:d,type:f,value:p}=t;if(f==="image"){let g=d?`${d}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else d&&s.append(d,p)}}else{if(MN(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yj,a=null,i=Kj,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:a,method:n.toLowerCase(),encType:i,formData:s,body:o}}function IO(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function YY(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KY(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function QY(t,e,n){let a=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await YY(s,n);return o.links?o.links():[]}return[]}));return eK(a.flat(1).filter(KY).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function oI(t,e,n,a,i,s){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>{var f;return n[d].pathname!==c.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):s==="data"?e.filter((c,d)=>{var p;let f=a.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function XY(t,e,{includeHydrateFallback:n}={}){return JY(t.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function JY(t){return[...new Set(t)]}function ZY(t){let e={},n=Object.keys(t).sort();for(let a of n)e[a]=t[a];return e}function eK(t,e){let n=new Set;return new Set(e),t.reduce((a,i)=>{let s=JSON.stringify(ZY(i));return n.has(s)||(n.add(s),a.push({key:s,link:i})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tK=new Set([100,101,204,205]);function nK(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Pc(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function xz(){let t=v.useContext(Dg);return IO(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function rK(){let t=v.useContext(DN);return IO(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var RO=v.createContext(void 0);RO.displayName="FrameworkContext";function vz(){let t=v.useContext(RO);return IO(t,"You must render this element inside a <HydratedRouter> element"),t}function aK(t,e){let n=v.useContext(RO),[a,i]=v.useState(!1),[s,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,g=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let j=_=>{_.forEach(T=>{o(T.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[t]),v.useEffect(()=>{if(a){let j=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(j)}}},[a]);let x=()=>{i(!0)},b=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,g,{}]:[s,g,{onFocus:zx(l,x),onBlur:zx(c,b),onMouseEnter:zx(d,x),onMouseLeave:zx(f,b),onTouchStart:zx(p,x)}]:[!1,g,{}]}function zx(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function iK({page:t,...e}){let{router:n}=xz(),a=v.useMemo(()=>cz(n.routes,t,n.basename),[n.routes,t,n.basename]);return a?v.createElement(oK,{page:t,matches:a,...e}):null}function sK(t){let{manifest:e,routeModules:n}=vz(),[a,i]=v.useState([]);return v.useEffect(()=>{let s=!1;return QY(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),a}function oK({page:t,matches:e,...n}){let a=Lr(),{manifest:i,routeModules:s}=vz(),{basename:o}=xz(),{loaderData:l,matches:c}=rK(),d=v.useMemo(()=>oI(t,e,c,i,a,"data"),[t,e,c,i,a]),f=v.useMemo(()=>oI(t,e,c,i,a,"assets"),[t,e,c,i,a]),p=v.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let b=new Set,j=!1;if(e.forEach(_=>{var C;let T=i.routes[_.route.id];!T||!T.hasLoader||(!d.some(P=>P.route.id===_.route.id)&&_.route.id in l&&((C=s[_.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?j=!0:b.add(_.route.id))}),b.size===0)return[];let S=nK(t,o);return j&&b.size>0&&S.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[o,l,a,i,d,e,t,s]),g=v.useMemo(()=>XY(f,i),[f,i]),x=sK(f);return v.createElement(v.Fragment,null,p.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),g.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:j})=>v.createElement("link",{key:b,...j})))}function lK(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bz&&(window.__reactRouterVersion="7.6.0")}catch{}function cK({basename:t,children:e,window:n}){let a=v.useRef();a.current==null&&(a.current=QW({window:n,v5Compat:!0}));let i=a.current,[s,o]=v.useState({action:i.action,location:i.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>i.listen(l),[i,l]),v.createElement(FY,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var jz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nr=v.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:i,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:p,...g},x){let{basename:b}=v.useContext(Fo),j=typeof d=="string"&&jz.test(d),S,_=!1;if(typeof d=="string"&&j&&(S=d,bz))try{let B=new URL(window.location.href),$=d.startsWith("//")?new URL(B.protocol+d):new URL(d),L=Pc($.pathname,b);$.origin===B.origin&&L!=null?d=L+$.search+$.hash:_=!0}catch{Zs(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=NY(d,{relative:i}),[C,P,k]=aK(a,g),O=fK(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:i,viewTransition:p});function I(B){e&&e(B),B.defaultPrevented||O(B)}let F=v.createElement("a",{...g,...k,href:S||T,onClick:_||s?e:I,ref:lK(x,P),target:c,"data-discover":!j&&n==="render"?"true":void 0});return C&&!j?v.createElement(v.Fragment,null,F,v.createElement(iK,{page:T})):F});Nr.displayName="Link";var uK=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:i=!1,style:s,to:o,viewTransition:l,children:c,...d},f){let p=_b(o,{relative:d.relative}),g=Lr(),x=v.useContext(DN),{navigator:b,basename:j}=v.useContext(Fo),S=x!=null&&xK(p)&&l===!0,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,T=g.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&j&&(C=Pc(C,j)||C);const P=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let k=T===_||!i&&T.startsWith(_)&&T.charAt(P)==="/",O=C!=null&&(C===_||!i&&C.startsWith(_)&&C.charAt(_.length)==="/"),I={isActive:k,isPending:O,isTransitioning:S},F=k?e:void 0,B;typeof a=="function"?B=a(I):B=[a,k?"active":null,O?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let $=typeof s=="function"?s(I):s;return v.createElement(Nr,{...d,"aria-current":F,className:B,ref:f,style:$,to:o,viewTransition:l},typeof c=="function"?c(I):c)});uK.displayName="NavLink";var dK=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:i,state:s,method:o=Yj,action:l,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:p,...g},x)=>{let b=gK(),j=yK(l,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&jz.test(l),T=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let P=C.nativeEvent.submitter,k=(P==null?void 0:P.getAttribute("formmethod"))||o;b(P||C.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:s,relative:d,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:j,onSubmit:a?c:T,...g,"data-discover":!_&&t==="render"?"true":void 0})});dK.displayName="Form";function hK(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wz(t){let e=v.useContext(Dg);return Ur(e,hK(t)),e}function fK(t,{target:e,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=Mt(),c=Lr(),d=_b(t,{relative:s});return v.useCallback(f=>{if(UY(f,e)){f.preventDefault();let p=n!==void 0?n:Tv(c)===Tv(d);l(t,{replace:p,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,d,n,a,e,t,i,s,o])}function Nz(t){Zs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(oE(t)),n=v.useRef(!1),a=Lr(),i=v.useMemo(()=>VY(a.search,n.current?null:e.current),[a.search]),s=Mt(),o=v.useCallback((l,c)=>{const d=oE(typeof l=="function"?l(i):l);n.current=!0,s("?"+d,c)},[s,i]);return[i,o]}var pK=0,mK=()=>`__${String(++pK)}__`;function gK(){let{router:t}=wz("useSubmit"),{basename:e}=v.useContext(Fo),n=MY();return v.useCallback(async(a,i={})=>{let{action:s,method:o,encType:l,formData:c,body:d}=WY(a,e);if(i.navigate===!1){let f=i.fetcherKey||mK();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function yK(t,{relative:e}={}){let{basename:n}=v.useContext(Fo),a=v.useContext($o);Ur(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),s={..._b(t||".",{relative:e})},o=Lr();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Sc([n,s.pathname])),Tv(s)}function xK(t,e={}){let n=v.useContext(fz);Ur(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=wz("useViewTransitionState"),i=_b(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Pc(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=Pc(n.nextLocation.pathname,a)||n.nextLocation.pathname;return lw(i.pathname,o)!=null||lw(i.pathname,s)!=null}[...tK];var vK=QB();class bK extends v.Component{constructor(){super(...arguments);yr(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){console.error("Uncaught error:",n,a)}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const Sz=v.createContext(void 0),jK=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState({startDate:null,endDate:null}),[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState(null),p=v.useCallback(()=>n(!0),[]),g=v.useCallback(()=>n(!1),[]),x=v.useCallback(()=>n(P=>!P),[]),b=v.useCallback(P=>{f(()=>P)},[]),j=v.useCallback(P=>{d?d(P):console.warn("Analysis navigator not registered")},[d]),[S,_]=v.useState(null),T=v.useCallback(P=>{_(()=>P)},[]),C=v.useCallback(async()=>S?await S():(console.warn("Analysis refresher not registered"),null),[S]);return r.jsx(Sz.Provider,{value:{isOpen:e,openAssistant:p,closeAssistant:g,toggleAssistant:x,analysisDateRange:a,setAnalysisDateRange:i,analysisData:s,setAnalysisData:o,analysisNavigate:j,registerAnalysisNavigator:b,refreshAnalysis:C,registerAnalysisRefresher:T,pageContext:l,setPageContext:c},children:t})},IN=()=>{const t=v.useContext(Sz);if(t===void 0)throw new Error("useClinicAssistantContext must be used within a ClinicAssistantProvider");return t},_z=v.createContext(void 0),wK=({children:t})=>{const[e,n]=v.useState([]),[a,i]=v.useState(null),[s,o]=v.useState(""),[l,c]=v.useState(0),[d,f]=v.useState([]),p=v.useCallback(j=>{n(S=>[...S,j])},[]),g=v.useCallback((j,S)=>{n(_=>_.map(T=>T.id===j?{...T,...S}:T))},[]),x=v.useCallback(j=>{n(S=>S.filter(_=>_.id!==j))},[]),b=v.useCallback(()=>{n([]),i(null),o(""),c(0),f([])},[]);return r.jsx(_z.Provider,{value:{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f,addPurchaseRow:p,updatePurchaseRow:g,removePurchaseRow:x,resetPurchase:b},children:t})},Cz=()=>{const t=v.useContext(_z);if(!t)throw new Error("usePurchaseContext must be used within a PurchaseProvider");return t},Tz=v.createContext(void 0),NK=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(""),s=v.useCallback(()=>n(!0),[]),o=v.useCallback(()=>n(!1),[]),l=v.useCallback(()=>n(c=>!c),[]);return v.useEffect(()=>{const c=d=>{(d.ctrlKey||d.metaKey)&&d.key==="k"&&(d.preventDefault(),l()),d.key==="Escape"&&e&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,l,o]),r.jsx(Tz.Provider,{value:{isOpen:e,openCommandBar:s,closeCommandBar:o,toggleCommandBar:l,preFilledQuery:a,setPreFilledQuery:i},children:t})},Oc=()=>{const t=v.useContext(Tz);if(t===void 0)throw new Error("useCommandBar must be used within a CommandBarProvider");return t};function Dc(t){return Array.isArray?Array.isArray(t):Ez(t)==="[object Array]"}function SK(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function _K(t){return t==null?"":SK(t)}function _l(t){return typeof t=="string"}function kz(t){return typeof t=="number"}function CK(t){return t===!0||t===!1||TK(t)&&Ez(t)=="[object Boolean]"}function Az(t){return typeof t=="object"}function TK(t){return Az(t)&&t!==null}function Ss(t){return t!=null}function J_(t){return!t.trim().length}function Ez(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const kK="Incorrect 'index' type",AK=t=>`Invalid value for key ${t}`,EK=t=>`Pattern length exceeds max of ${t}.`,PK=t=>`Missing ${t} property in key`,OK=t=>`Property 'weight' in key '${t}' must be a positive integer`,lI=Object.prototype.hasOwnProperty;class DK{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(a=>{let i=Pz(a);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(a=>{a.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Pz(t){let e=null,n=null,a=null,i=1,s=null;if(_l(t)||Dc(t))a=t,e=cI(t),n=lE(t);else{if(!lI.call(t,"name"))throw new Error(PK("name"));const o=t.name;if(a=o,lI.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(OK(o));e=cI(o),n=lE(o),s=t.getFn}return{path:e,id:n,weight:i,src:a,getFn:s}}function cI(t){return Dc(t)?t:t.split(".")}function lE(t){return Dc(t)?t.join("."):t}function MK(t,e){let n=[],a=!1;const i=(s,o,l)=>{if(Ss(s))if(!o[l])n.push(s);else{let c=o[l];const d=s[c];if(!Ss(d))return;if(l===o.length-1&&(_l(d)||kz(d)||CK(d)))n.push(_K(d));else if(Dc(d)){a=!0;for(let f=0,p=d.length;f<p;f+=1)i(d[f],o,l+1)}else o.length&&i(d,o,l+1)}};return i(t,_l(e)?e.split("."):e,0),a?n:n[0]}const IK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},RK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},LK={location:0,threshold:.6,distance:100},FK={useExtendedSearch:!1,getFn:MK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var an={...RK,...IK,...LK,...FK};const $K=/[^ ]+/g;function BK(t=1,e=3){const n=new Map,a=Math.pow(10,e);return{get(i){const s=i.match($K).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),l=parseFloat(Math.round(o*a)/a);return n.set(s,l),l},clear(){n.clear()}}}class LO{constructor({getFn:e=an.getFn,fieldNormWeight:n=an.fieldNormWeight}={}){this.norm=BK(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,a)=>{this._keysMap[n.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,_l(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();_l(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,a=this.size();n<a;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Ss(e)||J_(e))return;let a={v:e,i:n,n:this.norm.get(e)};this.records.push(a)}_addObject(e,n){let a={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(Ss(o)){if(Dc(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:d,value:f}=c.pop();if(Ss(f))if(_l(f)&&!J_(f)){let p={v:f,i:d,n:this.norm.get(f)};l.push(p)}else Dc(f)&&f.forEach((p,g)=>{c.push({nestedArrIndex:g,value:p})})}a.$[s]=l}else if(_l(o)&&!J_(o)){let l={v:o,n:this.norm.get(o)};a.$[s]=l}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function Oz(t,e,{getFn:n=an.getFn,fieldNormWeight:a=an.fieldNormWeight}={}){const i=new LO({getFn:n,fieldNormWeight:a});return i.setKeys(t.map(Pz)),i.setSources(e),i.create(),i}function zK(t,{getFn:e=an.getFn,fieldNormWeight:n=an.fieldNormWeight}={}){const{keys:a,records:i}=t,s=new LO({getFn:e,fieldNormWeight:n});return s.setKeys(a),s.setIndexRecords(i),s}function hj(t,{errors:e=0,currentLocation:n=0,expectedLocation:a=0,distance:i=an.distance,ignoreLocation:s=an.ignoreLocation}={}){const o=e/t.length;if(s)return o;const l=Math.abs(a-n);return i?o+l/i:l?1:o}function qK(t=[],e=an.minMatchCharLength){let n=[],a=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let l=t[s];l&&a===-1?a=s:!l&&a!==-1&&(i=s-1,i-a+1>=e&&n.push([a,i]),a=-1)}return t[s-1]&&s-a>=e&&n.push([a,s-1]),n}const Hh=32;function UK(t,e,n,{location:a=an.location,distance:i=an.distance,threshold:s=an.threshold,findAllMatches:o=an.findAllMatches,minMatchCharLength:l=an.minMatchCharLength,includeMatches:c=an.includeMatches,ignoreLocation:d=an.ignoreLocation}={}){if(e.length>Hh)throw new Error(EK(Hh));const f=e.length,p=t.length,g=Math.max(0,Math.min(a,p));let x=s,b=g;const j=l>1||c,S=j?Array(p):[];let _;for(;(_=t.indexOf(e,b))>-1;){let I=hj(e,{currentLocation:_,expectedLocation:g,distance:i,ignoreLocation:d});if(x=Math.min(I,x),b=_+f,j){let F=0;for(;F<f;)S[_+F]=1,F+=1}}b=-1;let T=[],C=1,P=f+p;const k=1<<f-1;for(let I=0;I<f;I+=1){let F=0,B=P;for(;F<B;)hj(e,{errors:I,currentLocation:g+B,expectedLocation:g,distance:i,ignoreLocation:d})<=x?F=B:P=B,B=Math.floor((P-F)/2+F);P=B;let $=Math.max(1,g-B+1),L=o?p:Math.min(g+B,p)+f,V=Array(L+2);V[L+1]=(1<<I)-1;for(let te=L;te>=$;te-=1){let X=te-1,q=n[t.charAt(X)];if(j&&(S[X]=+!!q),V[te]=(V[te+1]<<1|1)&q,I&&(V[te]|=(T[te+1]|T[te])<<1|1|T[te+1]),V[te]&k&&(C=hj(e,{errors:I,currentLocation:X,expectedLocation:g,distance:i,ignoreLocation:d}),C<=x)){if(x=C,b=X,b<=g)break;$=Math.max(1,2*g-b)}}if(hj(e,{errors:I+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>x)break;T=V}const O={isMatch:b>=0,score:Math.max(.001,C)};if(j){const I=qK(S,l);I.length?c&&(O.indices=I):O.isMatch=!1}return O}function VK(t){let e={};for(let n=0,a=t.length;n<a;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<a-n-1}return e}const cw=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Dz{constructor(e,{location:n=an.location,threshold:a=an.threshold,distance:i=an.distance,includeMatches:s=an.includeMatches,findAllMatches:o=an.findAllMatches,minMatchCharLength:l=an.minMatchCharLength,isCaseSensitive:c=an.isCaseSensitive,ignoreDiacritics:d=an.ignoreDiacritics,ignoreLocation:f=an.ignoreLocation}={}){if(this.options={location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f},e=c?e:e.toLowerCase(),e=d?cw(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(x,b)=>{this.chunks.push({pattern:x,alphabet:VK(x),startIndex:b})},g=this.pattern.length;if(g>Hh){let x=0;const b=g%Hh,j=g-b;for(;x<j;)p(this.pattern.substr(x,Hh),x),x+=Hh;if(b){const S=g-Hh;p(this.pattern.substr(S),S)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=a?cw(e):e,this.pattern===e){let j={isMatch:!0,score:0};return i&&(j.indices=[[0,e.length-1]]),j}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,ignoreLocation:f}=this.options;let p=[],g=0,x=!1;this.chunks.forEach(({pattern:j,alphabet:S,startIndex:_})=>{const{isMatch:T,score:C,indices:P}=UK(e,j,S,{location:s+_,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,includeMatches:i,ignoreLocation:f});T&&(x=!0),g+=C,T&&P&&(p=[...p,...P])});let b={isMatch:x,score:x?g/this.chunks.length:1};return x&&i&&(b.indices=p),b}}class ud{constructor(e){this.pattern=e}static isMultiMatch(e){return uI(e,this.multiRegex)}static isSingleMatch(e){return uI(e,this.singleRegex)}search(){}}function uI(t,e){const n=t.match(e);return n?n[1]:null}class HK extends ud{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class GK extends ud{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const a=e.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class WK extends ud{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class YK extends ud{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class KK extends ud{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class QK extends ud{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Mz extends ud{constructor(e,{location:n=an.location,threshold:a=an.threshold,distance:i=an.distance,includeMatches:s=an.includeMatches,findAllMatches:o=an.findAllMatches,minMatchCharLength:l=an.minMatchCharLength,isCaseSensitive:c=an.isCaseSensitive,ignoreDiacritics:d=an.ignoreDiacritics,ignoreLocation:f=an.ignoreLocation}={}){super(e),this._bitapSearch=new Dz(e,{location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Iz extends ud{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,a;const i=[],s=this.pattern.length;for(;(a=e.indexOf(this.pattern,n))>-1;)n=a+s,i.push([a,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const cE=[HK,Iz,WK,YK,QK,KK,GK,Mz],dI=cE.length,XK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,JK="|";function ZK(t,e={}){return t.split(JK).map(n=>{let a=n.trim().split(XK).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=a.length;s<o;s+=1){const l=a[s];let c=!1,d=-1;for(;!c&&++d<dI;){const f=cE[d];let p=f.isMultiMatch(l);p&&(i.push(new f(p,e)),c=!0)}if(!c)for(d=-1;++d<dI;){const f=cE[d];let p=f.isSingleMatch(l);if(p){i.push(new f(p,e));break}}}return i})}const eQ=new Set([Mz.type,Iz.type]);class tQ{constructor(e,{isCaseSensitive:n=an.isCaseSensitive,ignoreDiacritics:a=an.ignoreDiacritics,includeMatches:i=an.includeMatches,minMatchCharLength:s=an.minMatchCharLength,ignoreLocation:o=an.ignoreLocation,findAllMatches:l=an.findAllMatches,location:c=an.location,threshold:d=an.threshold,distance:f=an.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:d,distance:f},e=n?e:e.toLowerCase(),e=a?cw(e):e,this.pattern=e,this.query=ZK(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:i,ignoreDiacritics:s}=this.options;e=i?e:e.toLowerCase(),e=s?cw(e):e;let o=0,l=[],c=0;for(let d=0,f=n.length;d<f;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,x=p.length;g<x;g+=1){const b=p[g],{isMatch:j,indices:S,score:_}=b.search(e);if(j){if(o+=1,c+=_,a){const T=b.constructor.type;eQ.has(T)?l=[...l,...S]:l.push(S)}}else{c=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:c/o};return a&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const uE=[];function nQ(...t){uE.push(...t)}function dE(t,e){for(let n=0,a=uE.length;n<a;n+=1){let i=uE[n];if(i.condition(t,e))return new i(t,e)}return new Dz(t,e)}const uw={AND:"$and",OR:"$or"},hE={PATH:"$path",PATTERN:"$val"},fE=t=>!!(t[uw.AND]||t[uw.OR]),rQ=t=>!!t[hE.PATH],aQ=t=>!Dc(t)&&Az(t)&&!fE(t),hI=t=>({[uw.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Rz(t,e,{auto:n=!0}={}){const a=i=>{let s=Object.keys(i);const o=rQ(i);if(!o&&s.length>1&&!fE(i))return a(hI(i));if(aQ(i)){const c=o?i[hE.PATH]:s[0],d=o?i[hE.PATTERN]:i[c];if(!_l(d))throw new Error(AK(c));const f={keyId:lE(c),pattern:d};return n&&(f.searcher=dE(d,e)),f}let l={children:[],operator:s[0]};return s.forEach(c=>{const d=i[c];Dc(d)&&d.forEach(f=>{l.children.push(a(f))})}),l};return fE(t)||(t=hI(t)),a(t)}function iQ(t,{ignoreFieldNorm:e=an.ignoreFieldNorm}){t.forEach(n=>{let a=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;a*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:s))}),n.score=a})}function sQ(t,e){const n=t.matches;e.matches=[],Ss(n)&&n.forEach(a=>{if(!Ss(a.indices)||!a.indices.length)return;const{indices:i,value:s}=a;let o={indices:i,value:s};a.key&&(o.key=a.key.src),a.idx>-1&&(o.refIndex=a.idx),e.matches.push(o)})}function oQ(t,e){e.score=t.score}function lQ(t,e,{includeMatches:n=an.includeMatches,includeScore:a=an.includeScore}={}){const i=[];return n&&i.push(sQ),a&&i.push(oQ),t.map(s=>{const{idx:o}=s,l={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(s,l)}),l})}class to{constructor(e,n={},a){this.options={...an,...n},this.options.useExtendedSearch,this._keyStore=new DK(this.options.keys),this.setCollection(e,a)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof LO))throw new Error(kK);this._myIndex=n||Oz(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Ss(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let a=0,i=this._docs.length;a<i;a+=1){const s=this._docs[a];e(s,a)&&(this.removeAt(a),a-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:a,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=_l(e)?_l(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return iQ(c,{ignoreFieldNorm:l}),s&&c.sort(o),kz(n)&&n>-1&&(c=c.slice(0,n)),lQ(c,this._docs,{includeMatches:a,includeScore:i})}_searchStringList(e){const n=dE(e,this.options),{records:a}=this._myIndex,i=[];return a.forEach(({v:s,i:o,n:l})=>{if(!Ss(s))return;const{isMatch:c,score:d,indices:f}=n.searchIn(s);c&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:f}]})}),i}_searchLogical(e){const n=Rz(e,this.options),a=(l,c,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:g});return x&&x.length?[{idx:d,item:c,matches:x}]:[]}const f=[];for(let p=0,g=l.children.length;p<g;p+=1){const x=l.children[p],b=a(x,c,d);if(b.length)f.push(...b);else if(l.operator===uw.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:c})=>{if(Ss(l)){let d=a(n,l,c);d.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),d.forEach(({matches:f})=>{s[c].matches.push(...f)}))}}),o}_searchObjectList(e){const n=dE(e,this.options),{keys:a,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!Ss(o))return;let c=[];a.forEach((d,f)=>{c.push(...this._findMatches({key:d,value:o[f],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:e,value:n,searcher:a}){if(!Ss(n))return[];let i=[];if(Dc(n))n.forEach(({v:s,i:o,n:l})=>{if(!Ss(s))return;const{isMatch:c,score:d,indices:f}=a.searchIn(s);c&&i.push({score:d,key:e,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:d}=a.searchIn(s);l&&i.push({score:c,key:e,value:s,norm:o,indices:d})}return i}}to.version="7.1.0";to.createIndex=Oz;to.parseIndex=zK;to.config=an;to.parseQuery=Rz;nQ(tQ);var Z_,fI;function cQ(){if(fI)return Z_;fI=1;var t="Expected a function",e=NaN,n="[object Symbol]",a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof Qs=="object"&&Qs&&Qs.Object===Object&&Qs,d=typeof self=="object"&&self&&self.Object===Object&&self,f=c||d||Function("return this")(),p=Object.prototype,g=p.toString,x=Math.max,b=Math.min,j=function(){return f.Date.now()};function S(k,O,I){var F,B,$,L,V,H,te=0,X=!1,q=!1,Y=!0;if(typeof k!="function")throw new TypeError(t);O=P(O)||0,_(I)&&(X=!!I.leading,q="maxWait"in I,$=q?x(P(I.maxWait)||0,O):$,Y="trailing"in I?!!I.trailing:Y);function se(Fe){var ve=F,ae=B;return F=B=void 0,te=Fe,L=k.apply(ae,ve),L}function G(Fe){return te=Fe,V=setTimeout(we,O),X?se(Fe):L}function z(Fe){var ve=Fe-H,ae=Fe-te,je=O-ve;return q?b(je,$-ae):je}function ce(Fe){var ve=Fe-H,ae=Fe-te;return H===void 0||ve>=O||ve<0||q&&ae>=$}function we(){var Fe=j();if(ce(Fe))return K(Fe);V=setTimeout(we,z(Fe))}function K(Fe){return V=void 0,Y&&F?se(Fe):(F=B=void 0,L)}function Ie(){V!==void 0&&clearTimeout(V),te=0,F=H=B=V=void 0}function We(){return V===void 0?L:K(j())}function Re(){var Fe=j(),ve=ce(Fe);if(F=arguments,B=this,H=Fe,ve){if(V===void 0)return G(H);if(q)return V=setTimeout(we,O),se(H)}return V===void 0&&(V=setTimeout(we,O)),L}return Re.cancel=Ie,Re.flush=We,Re}function _(k){var O=typeof k;return!!k&&(O=="object"||O=="function")}function T(k){return!!k&&typeof k=="object"}function C(k){return typeof k=="symbol"||T(k)&&g.call(k)==n}function P(k){if(typeof k=="number")return k;if(C(k))return e;if(_(k)){var O=typeof k.valueOf=="function"?k.valueOf():k;k=_(O)?O+"":O}if(typeof k!="string")return k===0?k:+k;k=k.replace(a,"");var I=s.test(k);return I||o.test(k)?l(k.slice(2),I?2:8):i.test(k)?e:+k}return Z_=S,Z_}var uQ=cQ();const zc=Un(uQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),pI=t=>{const e=hQ(t);return e.charAt(0).toUpperCase()+e.slice(1)},Lz=(...t)=>t.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:s,iconNode:o,...l},c)=>v.createElement("svg",{ref:c,...fQ,width:e,height:e,stroke:t,strokeWidth:a?Number(n)*24/Number(e):n,className:Lz("lucide",i),...l},[...o.map(([d,f])=>v.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=(t,e)=>{const n=v.forwardRef(({className:a,...i},s)=>v.createElement(pQ,{ref:s,iconNode:e,className:Lz(`lucide-${dQ(pI(t))}`,`lucide-${t}`,a),...i}));return n.displayName=pI(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],bc=ct("activity",mQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],Fz=ct("align-justify",gQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],mI=ct("arrow-down",yQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rn=ct("arrow-left",xQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],gI=ct("arrow-up",vQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],jQ=ct("beaker",bQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],NQ=ct("bed-double",wQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],_Q=ct("bed",SQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],TQ=ct("bell",CQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],yI=ct("book-open",kQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],kv=ct("bot",AQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],PQ=ct("brain-circuit",EQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],FO=ct("brain",OQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],MQ=ct("briefcase-medical",DQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],RQ=ct("building",IQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],xI=ct("calendar-check-2",LQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],$O=ct("calendar-days",FQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],oa=ct("calendar",$Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],pE=ct("camera",BQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],mE=ct("chart-pie",zQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Po=ct("check",qQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$z=ct("chevron-down",UQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cb=ct("chevron-left",VQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dd=ct("chevron-right",HQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],WQ=ct("chevron-up",GQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xr=ct("circle-alert",YQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ml=ct("circle-check-big",KQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cv=ct("circle-check",QQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fj=ct("circle-help",XQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],vI=ct("circle-minus",JQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Cs=ct("circle-plus",ZQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],tX=ct("circle-user",eX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],dw=ct("clipboard-list",nX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Qj=ct("clipboard",rX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Tb=ct("clock",aX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],sX=ct("command",iX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],bI=ct("copy",oX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],BO=ct("credit-card",lX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],mf=ct("dollar-sign",cX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Bz=ct("download",uX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mm=ct("eye",dX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],fX=ct("file-check",hX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Oa=ct("file-text",pX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],eC=ct("file",mX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],yX=ct("film",gX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],rs=ct("flask-conical",xX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],bX=ct("funnel",vX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],gE=ct("globe",jX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],gf=ct("grid-3x3",wX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Va=ct("hash",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],_X=ct("heart-pulse",SX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],TX=ct("heart",CX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],yE=ct("house",kX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],jI=ct("image",AX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Cl=ct("info",EX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],zz=ct("key",PX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Jm=ct("layout-dashboard",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],qz=ct("layout-grid",DX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],wI=ct("lightbulb",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Uz=ct("link",IX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],kb=ct("list",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Mc=ct("loader-circle",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],$X=ct("loader",FX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zX=ct("lock",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],UX=ct("log-out",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],NI=ct("mail",VX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Vz=ct("map-pin",HX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Hz=ct("maximize-2",GX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],tC=ct("message-circle",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],KX=ct("mic-off",YX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],RN=ct("mic",QX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],JX=ct("minimize-2",XX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],eJ=ct("monitor",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],nJ=ct("music",tJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],SI=ct("package-open",rJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],yf=ct("package",aJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],sJ=ct("palette",iJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],_I=ct("panels-top-left",oJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],zO=ct("paperclip",lJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],uJ=ct("pause",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Xs=ct("pen",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],fJ=ct("pencil",hJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Zm=ct("phone",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],_c=ct("pill",mJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Gz=ct("play",gJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qn=ct("plus",yJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Av=ct("printer",xJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xE=ct("refresh-cw",vJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],CI=ct("rocket",bJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],wJ=ct("rotate-ccw",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Wz=ct("rotate-cw",NJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],as=ct("save",SJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Mn=ct("search",_J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],LN=ct("send",CJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],TI=ct("server-crash",TJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ld=ct("settings",kJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Yz=ct("share-2",AJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],PJ=ct("shield-check",EJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],eg=ct("shield",OJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],vE=ct("shopping-cart",DJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],IJ=ct("smile",MJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],hw=ct("sparkles",RJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Io=ct("split",LJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ii=ct("square-pen",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],BJ=ct("square",$J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],kI=ct("star",zJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],xf=ct("stethoscope",qJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Ab=ct("table",UJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],HJ=ct("tag",VJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],WJ=ct("target",GJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Bn=ct("trash-2",YJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],QJ=ct("trending-up",KJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],JJ=ct("triangle-alert",XJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],qO=ct("truck",ZJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],bE=ct("upload",eZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Kz=ct("user-check",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],FN=ct("user-plus",nZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Kn=ct("user",rZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Oo=ct("users",aZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],sZ=ct("video",iZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],fw=ct("wallet",oZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Lt=ct("x",lZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],AI=ct("zap",cZ);function uZ(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const dZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,fZ={};function EI(t,e){return(fZ.jsx?hZ:dZ).test(t)}const pZ=/[ \t\n\f\r]/g;function mZ(t){return typeof t=="object"?t.type==="text"?PI(t.value):!1:PI(t)}function PI(t){return t.replace(pZ,"")===""}class Eb{constructor(e,n,a){this.normal=n,this.property=e,a&&(this.space=a)}}Eb.prototype.normal={};Eb.prototype.property={};Eb.prototype.space=void 0;function Qz(t,e){const n={},a={};for(const i of t)Object.assign(n,i.property),Object.assign(a,i.normal);return new Eb(n,a,e)}function jE(t){return t.toLowerCase()}class os{constructor(e,n){this.attribute=n,this.property=e}}os.prototype.attribute="";os.prototype.booleanish=!1;os.prototype.boolean=!1;os.prototype.commaOrSpaceSeparated=!1;os.prototype.commaSeparated=!1;os.prototype.defined=!1;os.prototype.mustUseProperty=!1;os.prototype.number=!1;os.prototype.overloadedBoolean=!1;os.prototype.property="";os.prototype.spaceSeparated=!1;os.prototype.space=void 0;let gZ=0;const hn=Pf(),fa=Pf(),Xz=Pf(),wt=Pf(),Pr=Pf(),Im=Pf(),bs=Pf();function Pf(){return 2**++gZ}const wE=Object.freeze(Object.defineProperty({__proto__:null,boolean:hn,booleanish:fa,commaOrSpaceSeparated:bs,commaSeparated:Im,number:wt,overloadedBoolean:Xz,spaceSeparated:Pr},Symbol.toStringTag,{value:"Module"})),nC=Object.keys(wE);class UO extends os{constructor(e,n,a,i){let s=-1;if(super(e,n),OI(this,"space",i),typeof a=="number")for(;++s<nC.length;){const o=nC[s];OI(this,nC[s],(a&wE[o])===wE[o])}}}UO.prototype.defined=!0;function OI(t,e,n){n&&(t[e]=n)}function Ig(t){const e={},n={};for(const[a,i]of Object.entries(t.properties)){const s=new UO(a,t.transform(t.attributes||{},a),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),e[a]=s,n[jE(a)]=a,n[jE(s.attribute)]=a}return new Eb(e,n,t.space)}const Jz=Ig({properties:{ariaActiveDescendant:null,ariaAtomic:fa,ariaAutoComplete:null,ariaBusy:fa,ariaChecked:fa,ariaColCount:wt,ariaColIndex:wt,ariaColSpan:wt,ariaControls:Pr,ariaCurrent:null,ariaDescribedBy:Pr,ariaDetails:null,ariaDisabled:fa,ariaDropEffect:Pr,ariaErrorMessage:null,ariaExpanded:fa,ariaFlowTo:Pr,ariaGrabbed:fa,ariaHasPopup:null,ariaHidden:fa,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Pr,ariaLevel:wt,ariaLive:null,ariaModal:fa,ariaMultiLine:fa,ariaMultiSelectable:fa,ariaOrientation:null,ariaOwns:Pr,ariaPlaceholder:null,ariaPosInSet:wt,ariaPressed:fa,ariaReadOnly:fa,ariaRelevant:null,ariaRequired:fa,ariaRoleDescription:Pr,ariaRowCount:wt,ariaRowIndex:wt,ariaRowSpan:wt,ariaSelected:fa,ariaSetSize:wt,ariaSort:null,ariaValueMax:wt,ariaValueMin:wt,ariaValueNow:wt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Zz(t,e){return e in t?t[e]:e}function eq(t,e){return Zz(t,e.toLowerCase())}const yZ=Ig({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Im,acceptCharset:Pr,accessKey:Pr,action:null,allow:null,allowFullScreen:hn,allowPaymentRequest:hn,allowUserMedia:hn,alt:null,as:null,async:hn,autoCapitalize:null,autoComplete:Pr,autoFocus:hn,autoPlay:hn,blocking:Pr,capture:null,charSet:null,checked:hn,cite:null,className:Pr,cols:wt,colSpan:null,content:null,contentEditable:fa,controls:hn,controlsList:Pr,coords:wt|Im,crossOrigin:null,data:null,dateTime:null,decoding:null,default:hn,defer:hn,dir:null,dirName:null,disabled:hn,download:Xz,draggable:fa,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:hn,formTarget:null,headers:Pr,height:wt,hidden:hn,high:wt,href:null,hrefLang:null,htmlFor:Pr,httpEquiv:Pr,id:null,imageSizes:null,imageSrcSet:null,inert:hn,inputMode:null,integrity:null,is:null,isMap:hn,itemId:null,itemProp:Pr,itemRef:Pr,itemScope:hn,itemType:Pr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:hn,low:wt,manifest:null,max:null,maxLength:wt,media:null,method:null,min:null,minLength:wt,multiple:hn,muted:hn,name:null,nonce:null,noModule:hn,noValidate:hn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:hn,optimum:wt,pattern:null,ping:Pr,placeholder:null,playsInline:hn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:hn,referrerPolicy:null,rel:Pr,required:hn,reversed:hn,rows:wt,rowSpan:wt,sandbox:Pr,scope:null,scoped:hn,seamless:hn,selected:hn,shadowRootClonable:hn,shadowRootDelegatesFocus:hn,shadowRootMode:null,shape:null,size:wt,sizes:null,slot:null,span:wt,spellCheck:fa,src:null,srcDoc:null,srcLang:null,srcSet:null,start:wt,step:null,style:null,tabIndex:wt,target:null,title:null,translate:null,type:null,typeMustMatch:hn,useMap:null,value:fa,width:wt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Pr,axis:null,background:null,bgColor:null,border:wt,borderColor:null,bottomMargin:wt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:hn,declare:hn,event:null,face:null,frame:null,frameBorder:null,hSpace:wt,leftMargin:wt,link:null,longDesc:null,lowSrc:null,marginHeight:wt,marginWidth:wt,noResize:hn,noHref:hn,noShade:hn,noWrap:hn,object:null,profile:null,prompt:null,rev:null,rightMargin:wt,rules:null,scheme:null,scrolling:fa,standby:null,summary:null,text:null,topMargin:wt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:wt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:hn,disableRemotePlayback:hn,prefix:null,property:null,results:wt,security:null,unselectable:null},space:"html",transform:eq}),xZ=Ig({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:bs,accentHeight:wt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:wt,amplitude:wt,arabicForm:null,ascent:wt,attributeName:null,attributeType:null,azimuth:wt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:wt,by:null,calcMode:null,capHeight:wt,className:Pr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:wt,diffuseConstant:wt,direction:null,display:null,dur:null,divisor:wt,dominantBaseline:null,download:hn,dx:null,dy:null,edgeMode:null,editable:null,elevation:wt,enableBackground:null,end:null,event:null,exponent:wt,externalResourcesRequired:null,fill:null,fillOpacity:wt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Im,g2:Im,glyphName:Im,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:wt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:wt,horizOriginX:wt,horizOriginY:wt,id:null,ideographic:wt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:wt,k:wt,k1:wt,k2:wt,k3:wt,k4:wt,kernelMatrix:bs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:wt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:wt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:wt,overlineThickness:wt,paintOrder:null,panose1:null,path:null,pathLength:wt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Pr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:wt,pointsAtY:wt,pointsAtZ:wt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:bs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:bs,rev:bs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:bs,requiredFeatures:bs,requiredFonts:bs,requiredFormats:bs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:wt,specularExponent:wt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:wt,strikethroughThickness:wt,string:null,stroke:null,strokeDashArray:bs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:wt,strokeOpacity:wt,strokeWidth:null,style:null,surfaceScale:wt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:bs,tabIndex:wt,tableValues:null,target:null,targetX:wt,targetY:wt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:bs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:wt,underlineThickness:wt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:wt,values:null,vAlphabetic:wt,vMathematical:wt,vectorEffect:null,vHanging:wt,vIdeographic:wt,version:null,vertAdvY:wt,vertOriginX:wt,vertOriginY:wt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:wt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Zz}),tq=Ig({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),nq=Ig({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:eq}),rq=Ig({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),vZ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},bZ=/[A-Z]/g,DI=/-[a-z]/g,jZ=/^data[-\w.:]+$/i;function wZ(t,e){const n=jE(e);let a=e,i=os;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&jZ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(DI,SZ);a="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!DI.test(s)){let o=s.replace(bZ,NZ);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=UO}return new i(a,e)}function NZ(t){return"-"+t.toLowerCase()}function SZ(t){return t.charAt(1).toUpperCase()}const _Z=Qz([Jz,yZ,tq,nq,rq],"html"),VO=Qz([Jz,xZ,tq,nq,rq],"svg");function CZ(t){return t.join(" ").trim()}var fm={},rC,MI;function TZ(){if(MI)return rC;MI=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,d="/",f="*",p="",g="comment",x="declaration";rC=function(j,S){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];S=S||{};var _=1,T=1;function C(H){var te=H.match(e);te&&(_+=te.length);var X=H.lastIndexOf(c);T=~X?H.length-X:T+H.length}function P(){var H={line:_,column:T};return function(te){return te.position=new k(H),F(),te}}function k(H){this.start=H,this.end={line:_,column:T},this.source=S.source}k.prototype.content=j;function O(H){var te=new Error(S.source+":"+_+":"+T+": "+H);if(te.reason=H,te.filename=S.source,te.line=_,te.column=T,te.source=j,!S.silent)throw te}function I(H){var te=H.exec(j);if(te){var X=te[0];return C(X),j=j.slice(X.length),te}}function F(){I(n)}function B(H){var te;for(H=H||[];te=$();)te!==!1&&H.push(te);return H}function $(){var H=P();if(!(d!=j.charAt(0)||f!=j.charAt(1))){for(var te=2;p!=j.charAt(te)&&(f!=j.charAt(te)||d!=j.charAt(te+1));)++te;if(te+=2,p===j.charAt(te-1))return O("End of comment missing");var X=j.slice(2,te-2);return T+=2,C(X),j=j.slice(te),T+=2,H({type:g,comment:X})}}function L(){var H=P(),te=I(a);if(te){if($(),!I(i))return O("property missing ':'");var X=I(s),q=H({type:x,property:b(te[0].replace(t,p)),value:X?b(X[0].replace(t,p)):p});return I(o),q}}function V(){var H=[];B(H);for(var te;te=L();)te!==!1&&(H.push(te),B(H));return H}return F(),V()};function b(j){return j?j.replace(l,p):p}return rC}var II;function kZ(){if(II)return fm;II=1;var t=fm&&fm.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(fm,"__esModule",{value:!0}),fm.default=n;var e=t(TZ());function n(a,i){var s=null;if(!a||typeof a!="string")return s;var o=(0,e.default)(a),l=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var d=c.property,f=c.value;l?i(d,f,c):f&&(s=s||{},s[d]=f)}}),s}return fm}var qx={},RI;function AZ(){if(RI)return qx;RI=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(d){return!d||n.test(d)||t.test(d)},o=function(d,f){return f.toUpperCase()},l=function(d,f){return"".concat(f,"-")},c=function(d,f){return f===void 0&&(f={}),s(d)?d:(d=d.toLowerCase(),f.reactCompat?d=d.replace(i,l):d=d.replace(a,l),d.replace(e,o))};return qx.camelCase=c,qx}var Ux,LI;function EZ(){if(LI)return Ux;LI=1;var t=Ux&&Ux.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(kZ()),n=AZ();function a(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return a.default=a,Ux=a,Ux}var PZ=EZ();const OZ=Un(PZ),aq=iq("end"),HO=iq("start");function iq(t){return e;function e(n){const a=n&&n.position&&n.position[t]||{};if(typeof a.line=="number"&&a.line>0&&typeof a.column=="number"&&a.column>0)return{line:a.line,column:a.column,offset:typeof a.offset=="number"&&a.offset>-1?a.offset:void 0}}}function DZ(t){const e=HO(t),n=aq(t);if(e&&n)return{start:e,end:n}}function gv(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?FI(t.position):"start"in t||"end"in t?FI(t):"line"in t||"column"in t?NE(t):""}function NE(t){return $I(t&&t.line)+":"+$I(t&&t.column)}function FI(t){return NE(t&&t.start)+"-"+NE(t&&t.end)}function $I(t){return t&&typeof t=="number"?t:1}class hi extends Error{constructor(e,n,a){super(),typeof n=="string"&&(a=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof a=="string"){const c=a.indexOf(":");c===-1?s.ruleId=a:(s.source=a.slice(0,c),s.ruleId=a.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=gv(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}hi.prototype.file="";hi.prototype.name="";hi.prototype.reason="";hi.prototype.message="";hi.prototype.stack="";hi.prototype.column=void 0;hi.prototype.line=void 0;hi.prototype.ancestors=void 0;hi.prototype.cause=void 0;hi.prototype.fatal=void 0;hi.prototype.place=void 0;hi.prototype.ruleId=void 0;hi.prototype.source=void 0;const GO={}.hasOwnProperty,MZ=new Map,IZ=/[A-Z]/g,RZ=new Set(["table","tbody","thead","tfoot","tr"]),LZ=new Set(["td","th"]),sq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function FZ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let a;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");a=GZ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");a=HZ(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:a,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?VO:_Z,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=oq(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function oq(t,e,n){if(e.type==="element")return $Z(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return BZ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return qZ(t,e,n);if(e.type==="mdxjsEsm")return zZ(t,e);if(e.type==="root")return UZ(t,e,n);if(e.type==="text")return VZ(t,e)}function $Z(t,e,n){const a=t.schema;let i=a;e.tagName.toLowerCase()==="svg"&&a.space==="html"&&(i=VO,t.schema=i),t.ancestors.push(e);const s=cq(t,e.tagName,!1),o=WZ(t,e);let l=YO(t,e);return RZ.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!mZ(c):!0})),lq(t,o,s,e),WO(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function BZ(t,e){if(e.data&&e.data.estree&&t.evaluater){const a=e.data.estree.body[0];return a.type,t.evaluater.evaluateExpression(a.expression)}Ev(t,e.position)}function zZ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Ev(t,e.position)}function qZ(t,e,n){const a=t.schema;let i=a;e.name==="svg"&&a.space==="html"&&(i=VO,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:cq(t,e.name,!0),o=YZ(t,e),l=YO(t,e);return lq(t,o,s,e),WO(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function UZ(t,e,n){const a={};return WO(a,YO(t,e)),t.create(e,t.Fragment,a,n)}function VZ(t,e){return e.value}function lq(t,e,n,a){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=a)}function WO(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function HZ(t,e,n){return a;function a(i,s,o,l){const d=Array.isArray(o.children)?n:e;return l?d(s,o,l):d(s,o)}}function GZ(t,e){return n;function n(a,i,s,o){const l=Array.isArray(s.children),c=HO(a);return e(i,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function WZ(t,e){const n={};let a,i;for(i in e.properties)if(i!=="children"&&GO.call(e.properties,i)){const s=KZ(t,i,e.properties[i]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&LZ.has(e.tagName)?a=l:n[o]=l}}if(a){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=a}return n}function YZ(t,e){const n={};for(const a of e.attributes)if(a.type==="mdxJsxExpressionAttribute")if(a.data&&a.data.estree&&t.evaluater){const s=a.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Ev(t,e.position);else{const i=a.name;let s;if(a.value&&typeof a.value=="object")if(a.value.data&&a.value.data.estree&&t.evaluater){const l=a.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Ev(t,e.position);else s=a.value===null?!0:a.value;n[i]=s}return n}function YO(t,e){const n=[];let a=-1;const i=t.passKeys?new Map:MZ;for(;++a<e.children.length;){const s=e.children[a];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const d=i.get(c)||0;o=c+"-"+d,i.set(c,d+1)}}const l=oq(t,s,o);l!==void 0&&n.push(l)}return n}function KZ(t,e,n){const a=wZ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=a.commaSeparated?uZ(n):CZ(n)),a.property==="style"){let i=typeof n=="object"?n:QZ(t,String(n));return t.stylePropertyNameCase==="css"&&(i=XZ(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&a.space?vZ[a.property]||a.property:a.attribute,n]}}function QZ(t,e){try{return OZ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const a=n,i=new hi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=sq+"#cannot-parse-style-attribute",i}}function cq(t,e,n){let a;if(!n)a={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const l=EI(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}a=o}else a=EI(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(a.type==="Literal"){const i=a.value;return GO.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(a);Ev(t)}function Ev(t,e){const n=new hi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=sq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function XZ(t){const e={};let n;for(n in t)GO.call(t,n)&&(e[JZ(n)]=t[n]);return e}function JZ(t){let e=t.replace(IZ,ZZ);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function ZZ(t){return"-"+t.toLowerCase()}const aC={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},eee={};function KO(t,e){const n=eee,a=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return uq(t,a,i)}function uq(t,e,n){if(tee(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return BI(t.children,e,n)}return Array.isArray(t)?BI(t,e,n):""}function BI(t,e,n){const a=[];let i=-1;for(;++i<t.length;)a[i]=uq(t[i],e,n);return a.join("")}function tee(t){return!!(t&&typeof t=="object")}const zI=document.createElement("i");function QO(t){const e="&"+t+";";zI.innerHTML=e;const n=zI.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ts(t,e,n,a){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,a.length<1e4)o=Array.from(a),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<a.length;)o=a.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ys(t,e){return t.length>0?(Ts(t,t.length,0,e),t):e}const qI={}.hasOwnProperty;function dq(t){const e={};let n=-1;for(;++n<t.length;)nee(e,t[n]);return e}function nee(t,e){let n;for(n in e){const i=(qI.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){qI.call(i,o)||(i[o]=[]);const l=s[o];ree(i[o],Array.isArray(l)?l:l?[l]:[])}}}function ree(t,e){let n=-1;const a=[];for(;++n<e.length;)(e[n].add==="after"?t:a).push(e[n]);Ts(t,0,0,a)}function hq(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Do(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Pi=hd(/[A-Za-z]/),ui=hd(/[\dA-Za-z]/),aee=hd(/[#-'*+\--9=?A-Z^-~]/);function pw(t){return t!==null&&(t<32||t===127)}const SE=hd(/\d/),iee=hd(/[\dA-Fa-f]/),see=hd(/[!-/:-@[-`{-~]/);function Wt(t){return t!==null&&t<-2}function _r(t){return t!==null&&(t<0||t===32)}function En(t){return t===-2||t===-1||t===32}const $N=hd(new RegExp("\\p{P}|\\p{S}","u")),vf=hd(/\s/);function hd(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Rg(t){const e=[];let n=-1,a=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&ui(t.charCodeAt(n+1))&&ui(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(a,n),encodeURIComponent(o)),a=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(a)}function zn(t,e,n,a){const i=a?a-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return En(c)?(t.enter(n),l(c)):e(c)}function l(c){return En(c)&&s++<i?(t.consume(c),l):(t.exit(n),e(c))}}const oee={tokenize:lee};function lee(t){const e=t.attempt(this.parser.constructs.contentInitial,a,i);let n;return e;function a(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),zn(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Wt(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const cee={tokenize:uee},UI={tokenize:dee};function uee(t){const e=this,n=[];let a=0,i,s,o;return l;function l(C){if(a<n.length){const P=n[a];return e.containerState=P[1],t.attempt(P[0].continuation,c,d)(C)}return d(C)}function c(C){if(a++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&T();const P=e.events.length;let k=P,O;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){O=e.events[k][1].end;break}_(a);let I=P;for(;I<e.events.length;)e.events[I][1].end={...O},I++;return Ts(e.events,k+1,0,e.events.slice(P)),e.events.length=I,d(C)}return l(C)}function d(C){if(a===n.length){if(!i)return g(C);if(i.currentConstruct&&i.currentConstruct.concrete)return b(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(UI,f,p)(C)}function f(C){return i&&T(),_(a),g(C)}function p(C){return e.parser.lazy[e.now().line]=a!==n.length,o=e.now().offset,b(C)}function g(C){return e.containerState={},t.attempt(UI,x,b)(C)}function x(C){return a++,n.push([e.currentConstruct,e.containerState]),g(C)}function b(C){if(C===null){i&&T(),_(0),t.consume(C);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),j(C)}function j(C){if(C===null){S(t.exit("chunkFlow"),!0),_(0),t.consume(C);return}return Wt(C)?(t.consume(C),S(t.exit("chunkFlow")),a=0,e.interrupt=void 0,l):(t.consume(C),j)}function S(C,P){const k=e.sliceStream(C);if(P&&k.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(k),e.parser.lazy[C.start.line]){let O=i.events.length;for(;O--;)if(i.events[O][1].start.offset<o&&(!i.events[O][1].end||i.events[O][1].end.offset>o))return;const I=e.events.length;let F=I,B,$;for(;F--;)if(e.events[F][0]==="exit"&&e.events[F][1].type==="chunkFlow"){if(B){$=e.events[F][1].end;break}B=!0}for(_(a),O=I;O<e.events.length;)e.events[O][1].end={...$},O++;Ts(e.events,F+1,0,e.events.slice(I)),e.events.length=O}}function _(C){let P=n.length;for(;P-- >C;){const k=n[P];e.containerState=k[1],k[0].exit.call(e,t)}n.length=C}function T(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function dee(t,e,n){return zn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tg(t){if(t===null||_r(t)||vf(t))return 1;if($N(t))return 2}function BN(t,e,n){const a=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!a.includes(s)&&(e=s(e,n),a.push(s))}return e}const _E={name:"attention",resolveAll:hee,tokenize:fee};function hee(t,e){let n=-1,a,i,s,o,l,c,d,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(a=n;a--;)if(t[a][0]==="exit"&&t[a][1].type==="attentionSequence"&&t[a][1]._open&&e.sliceSerialize(t[a][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[a][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[a][1].end.offset-t[a][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[a][1].end.offset-t[a][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[a][1].end},g={...t[n][1].start};VI(p,-c),VI(g,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[a][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},s={type:c>1?"strongText":"emphasisText",start:{...t[a][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[a][1].end={...o.start},t[n][1].start={...l.end},d=[],t[a][1].end.offset-t[a][1].start.offset&&(d=Ys(d,[["enter",t[a][1],e],["exit",t[a][1],e]])),d=Ys(d,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),d=Ys(d,BN(e.parser.constructs.insideSpan.null,t.slice(a+1,n),e)),d=Ys(d,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,d=Ys(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,Ts(t,a-1,n-a+3,d),n=a+d.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function fee(t,e){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,i=tg(a);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const d=t.exit("attentionSequence"),f=tg(c),p=!f||f===2&&i||n.includes(c),g=!i||i===2&&f||n.includes(a);return d._open=!!(s===42?p:p&&(i||!g)),d._close=!!(s===42?g:g&&(f||!p)),e(c)}}function VI(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const pee={name:"autolink",tokenize:mee};function mee(t,e,n){let a=0;return i;function i(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(x){return Pi(x)?(t.consume(x),o):x===64?n(x):d(x)}function o(x){return x===43||x===45||x===46||ui(x)?(a=1,l(x)):d(x)}function l(x){return x===58?(t.consume(x),a=0,c):(x===43||x===45||x===46||ui(x))&&a++<32?(t.consume(x),l):(a=0,d(x))}function c(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||pw(x)?n(x):(t.consume(x),c)}function d(x){return x===64?(t.consume(x),f):aee(x)?(t.consume(x),d):n(x)}function f(x){return ui(x)?p(x):n(x)}function p(x){return x===46?(t.consume(x),a=0,f):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):g(x)}function g(x){if((x===45||ui(x))&&a++<63){const b=x===45?g:p;return t.consume(x),b}return n(x)}}const Pb={partial:!0,tokenize:gee};function gee(t,e,n){return a;function a(s){return En(s)?zn(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Wt(s)?e(s):n(s)}}const fq={continuation:{tokenize:xee},exit:vee,name:"blockQuote",tokenize:yee};function yee(t,e,n){const a=this;return i;function i(o){if(o===62){const l=a.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return En(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function xee(t,e,n){const a=this;return i;function i(o){return En(o)?zn(t,s,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(fq,e,n)(o)}}function vee(t){t.exit("blockQuote")}const pq={name:"characterEscape",tokenize:bee};function bee(t,e,n){return a;function a(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return see(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const mq={name:"characterReference",tokenize:jee};function jee(t,e,n){const a=this;let i=0,s,o;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,o=ui,f(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=iee,f):(t.enter("characterReferenceValue"),s=7,o=SE,f(p))}function f(p){if(p===59&&i){const g=t.exit("characterReferenceValue");return o===ui&&!QO(a.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(p)&&i++<s?(t.consume(p),f):n(p)}}const HI={partial:!0,tokenize:Nee},GI={concrete:!0,name:"codeFenced",tokenize:wee};function wee(t,e,n){const a=this,i={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(O){return d(O)}function d(O){const I=a.events[a.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(O)}function f(O){return O===l?(o++,t.consume(O),f):o<3?n(O):(t.exit("codeFencedFenceSequence"),En(O)?zn(t,p,"whitespace")(O):p(O))}function p(O){return O===null||Wt(O)?(t.exit("codeFencedFence"),a.interrupt?e(O):t.check(HI,j,P)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(O))}function g(O){return O===null||Wt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(O)):En(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),zn(t,x,"whitespace")(O)):O===96&&O===l?n(O):(t.consume(O),g)}function x(O){return O===null||Wt(O)?p(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(O))}function b(O){return O===null||Wt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(O)):O===96&&O===l?n(O):(t.consume(O),b)}function j(O){return t.attempt(i,P,S)(O)}function S(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),_}function _(O){return s>0&&En(O)?zn(t,T,"linePrefix",s+1)(O):T(O)}function T(O){return O===null||Wt(O)?t.check(HI,j,P)(O):(t.enter("codeFlowValue"),C(O))}function C(O){return O===null||Wt(O)?(t.exit("codeFlowValue"),T(O)):(t.consume(O),C)}function P(O){return t.exit("codeFenced"),e(O)}function k(O,I,F){let B=0;return $;function $(X){return O.enter("lineEnding"),O.consume(X),O.exit("lineEnding"),L}function L(X){return O.enter("codeFencedFence"),En(X)?zn(O,V,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):V(X)}function V(X){return X===l?(O.enter("codeFencedFenceSequence"),H(X)):F(X)}function H(X){return X===l?(B++,O.consume(X),H):B>=o?(O.exit("codeFencedFenceSequence"),En(X)?zn(O,te,"whitespace")(X):te(X)):F(X)}function te(X){return X===null||Wt(X)?(O.exit("codeFencedFence"),I(X)):F(X)}}}function Nee(t,e,n){const a=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}const iC={name:"codeIndented",tokenize:_ee},See={partial:!0,tokenize:Cee};function _ee(t,e,n){const a=this;return i;function i(d){return t.enter("codeIndented"),zn(t,s,"linePrefix",5)(d)}function s(d){const f=a.events[a.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):Wt(d)?t.attempt(See,o,c)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||Wt(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),l)}function c(d){return t.exit("codeIndented"),e(d)}}function Cee(t,e,n){const a=this;return i;function i(o){return a.parser.lazy[a.now().line]?n(o):Wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):zn(t,s,"linePrefix",5)(o)}function s(o){const l=a.events[a.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Wt(o)?i(o):n(o)}}const Tee={name:"codeText",previous:Aee,resolve:kee,tokenize:Eee};function kee(t){let e=t.length-4,n=3,a,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(a=n;++a<e;)if(t[a][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(a=n-1,e++;++a<=e;)i===void 0?a!==e&&t[a][1].type!=="lineEnding"&&(i=a):(a===e||t[a][1].type==="lineEnding")&&(t[i][1].type="codeTextData",a!==i+2&&(t[i][1].end=t[a-1][1].end,t.splice(i+2,a-i-2),e-=a-i-2,a=i+2),i=void 0);return t}function Aee(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Eee(t,e,n){let a=0,i,s;return o;function o(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),a++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(s=t.enter("codeTextSequence"),i=0,f(p)):Wt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Wt(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),d)}function f(p){return p===96?(t.consume(p),i++,f):i===a?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(s.type="codeTextData",d(p))}}class Pee{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const a=n??Number.POSITIVE_INFINITY;return a<this.left.length?this.left.slice(e,a):e>this.left.length?this.right.slice(this.right.length-a+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-a+this.left.length).reverse())}splice(e,n,a){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return a&&Vx(this.left,a),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Vx(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Vx(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Vx(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Vx(this.left,n.reverse())}}}function Vx(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function gq(t){const e={};let n=-1,a,i,s,o,l,c,d;const f=new Pee(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(a=f.get(n),n&&a[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=a[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(a[0]==="enter")a[1].contentType&&(Object.assign(e,Oee(f,n)),n=e[n],d=!0);else if(a[1]._container){for(s=n,i=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(a[1].end={...f.get(i)[1].start},l=f.slice(i,n),l.unshift(a),f.splice(i,n-i+1,l))}}return Ts(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!d}function Oee(t,e){const n=t.get(e)[1],a=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=a.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let f,p,g=-1,x=n,b=0,j=0;const S=[j];for(;x;){for(;t.get(++i)[1]!==x;);s.push(i),x._tokenizer||(f=a.sliceStream(x),x.next||f.push(null),p&&o.defineSkip(x.start),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=x,x=x.next}for(x=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(j=g+1,S.push(j),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(o.events=[],x?(x._tokenizer=void 0,x.previous=void 0):S.pop(),g=S.length;g--;){const _=l.slice(S[g],S[g+1]),T=s.pop();c.push([T,T+_.length-1]),t.splice(T,2,_)}for(c.reverse(),g=-1;++g<c.length;)d[b+c[g][0]]=b+c[g][1],b+=c[g][1]-c[g][0]-1;return d}const Dee={resolve:Iee,tokenize:Ree},Mee={partial:!0,tokenize:Lee};function Iee(t){return gq(t),t}function Ree(t,e){let n;return a;function a(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):Wt(l)?t.check(Mee,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Lee(t,e,n){const a=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),zn(t,s,"linePrefix")}function s(o){if(o===null||Wt(o))return n(o);const l=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(a.parser.constructs.flow,n,e)(o)}}function yq(t,e,n,a,i,s,o,l,c){const d=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(_){return _===60?(t.enter(a),t.enter(i),t.enter(s),t.consume(_),t.exit(s),g):_===null||_===32||_===41||pw(_)?n(_):(t.enter(a),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),j(_))}function g(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(a),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),x(_))}function x(_){return _===62?(t.exit("chunkString"),t.exit(l),g(_)):_===null||_===60||Wt(_)?n(_):(t.consume(_),_===92?b:x)}function b(_){return _===60||_===62||_===92?(t.consume(_),x):x(_)}function j(_){return!f&&(_===null||_===41||_r(_))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(a),e(_)):f<d&&_===40?(t.consume(_),f++,j):_===41?(t.consume(_),f--,j):_===null||_===32||_===40||pw(_)?n(_):(t.consume(_),_===92?S:j)}function S(_){return _===40||_===41||_===92?(t.consume(_),j):j(_)}}function xq(t,e,n,a,i,s){const o=this;let l=0,c;return d;function d(x){return t.enter(a),t.enter(i),t.consume(x),t.exit(i),t.enter(s),f}function f(x){return l>999||x===null||x===91||x===93&&!c||x===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(x):x===93?(t.exit(s),t.enter(i),t.consume(x),t.exit(i),t.exit(a),e):Wt(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||x===91||x===93||Wt(x)||l++>999?(t.exit("chunkString"),f(x)):(t.consume(x),c||(c=!En(x)),x===92?g:p)}function g(x){return x===91||x===92||x===93?(t.consume(x),l++,p):p(x)}}function vq(t,e,n,a,i,s){let o;return l;function l(g){return g===34||g===39||g===40?(t.enter(a),t.enter(i),t.consume(g),t.exit(i),o=g===40?41:g,c):n(g)}function c(g){return g===o?(t.enter(i),t.consume(g),t.exit(i),t.exit(a),e):(t.enter(s),d(g))}function d(g){return g===o?(t.exit(s),c(o)):g===null?n(g):Wt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),zn(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===o||g===null||Wt(g)?(t.exit("chunkString"),d(g)):(t.consume(g),g===92?p:f)}function p(g){return g===o||g===92?(t.consume(g),f):f(g)}}function yv(t,e){let n;return a;function a(i){return Wt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,a):En(i)?zn(t,a,n?"linePrefix":"lineSuffix")(i):e(i)}}const Fee={name:"definition",tokenize:Bee},$ee={partial:!0,tokenize:zee};function Bee(t,e,n){const a=this;let i;return s;function s(x){return t.enter("definition"),o(x)}function o(x){return xq.call(a,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return i=Do(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),c):n(x)}function c(x){return _r(x)?yv(t,d)(x):d(x)}function d(x){return yq(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function f(x){return t.attempt($ee,p,p)(x)}function p(x){return En(x)?zn(t,g,"whitespace")(x):g(x)}function g(x){return x===null||Wt(x)?(t.exit("definition"),a.parser.defined.push(i),e(x)):n(x)}}function zee(t,e,n){return a;function a(l){return _r(l)?yv(t,i)(l):n(l)}function i(l){return vq(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return En(l)?zn(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Wt(l)?e(l):n(l)}}const qee={name:"hardBreakEscape",tokenize:Uee};function Uee(t,e,n){return a;function a(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Wt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const Vee={name:"headingAtx",resolve:Hee,tokenize:Gee};function Hee(t,e){let n=t.length-2,a=3,i,s;return t[a][1].type==="whitespace"&&(a+=2),n-2>a&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&t[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(i={type:"atxHeadingText",start:t[a][1].start,end:t[n][1].end},s={type:"chunkText",start:t[a][1].start,end:t[n][1].end,contentType:"text"},Ts(t,a,n-a+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function Gee(t,e,n){let a=0;return i;function i(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&a++<6?(t.consume(f),o):f===null||_r(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||Wt(f)?(t.exit("atxHeading"),e(f)):En(f)?zn(t,l,"whitespace")(f):(t.enter("atxHeadingText"),d(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),l(f))}function d(f){return f===null||f===35||_r(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),d)}}const Wee=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],WI=["pre","script","style","textarea"],Yee={concrete:!0,name:"htmlFlow",resolveTo:Xee,tokenize:Jee},Kee={partial:!0,tokenize:ete},Qee={partial:!0,tokenize:Zee};function Xee(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Jee(t,e,n){const a=this;let i,s,o,l,c;return d;function d(K){return f(K)}function f(K){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(K),p}function p(K){return K===33?(t.consume(K),g):K===47?(t.consume(K),s=!0,j):K===63?(t.consume(K),i=3,a.interrupt?e:z):Pi(K)?(t.consume(K),o=String.fromCharCode(K),S):n(K)}function g(K){return K===45?(t.consume(K),i=2,x):K===91?(t.consume(K),i=5,l=0,b):Pi(K)?(t.consume(K),i=4,a.interrupt?e:z):n(K)}function x(K){return K===45?(t.consume(K),a.interrupt?e:z):n(K)}function b(K){const Ie="CDATA[";return K===Ie.charCodeAt(l++)?(t.consume(K),l===Ie.length?a.interrupt?e:V:b):n(K)}function j(K){return Pi(K)?(t.consume(K),o=String.fromCharCode(K),S):n(K)}function S(K){if(K===null||K===47||K===62||_r(K)){const Ie=K===47,We=o.toLowerCase();return!Ie&&!s&&WI.includes(We)?(i=1,a.interrupt?e(K):V(K)):Wee.includes(o.toLowerCase())?(i=6,Ie?(t.consume(K),_):a.interrupt?e(K):V(K)):(i=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(K):s?T(K):C(K))}return K===45||ui(K)?(t.consume(K),o+=String.fromCharCode(K),S):n(K)}function _(K){return K===62?(t.consume(K),a.interrupt?e:V):n(K)}function T(K){return En(K)?(t.consume(K),T):$(K)}function C(K){return K===47?(t.consume(K),$):K===58||K===95||Pi(K)?(t.consume(K),P):En(K)?(t.consume(K),C):$(K)}function P(K){return K===45||K===46||K===58||K===95||ui(K)?(t.consume(K),P):k(K)}function k(K){return K===61?(t.consume(K),O):En(K)?(t.consume(K),k):C(K)}function O(K){return K===null||K===60||K===61||K===62||K===96?n(K):K===34||K===39?(t.consume(K),c=K,I):En(K)?(t.consume(K),O):F(K)}function I(K){return K===c?(t.consume(K),c=null,B):K===null||Wt(K)?n(K):(t.consume(K),I)}function F(K){return K===null||K===34||K===39||K===47||K===60||K===61||K===62||K===96||_r(K)?k(K):(t.consume(K),F)}function B(K){return K===47||K===62||En(K)?C(K):n(K)}function $(K){return K===62?(t.consume(K),L):n(K)}function L(K){return K===null||Wt(K)?V(K):En(K)?(t.consume(K),L):n(K)}function V(K){return K===45&&i===2?(t.consume(K),q):K===60&&i===1?(t.consume(K),Y):K===62&&i===4?(t.consume(K),ce):K===63&&i===3?(t.consume(K),z):K===93&&i===5?(t.consume(K),G):Wt(K)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Kee,we,H)(K)):K===null||Wt(K)?(t.exit("htmlFlowData"),H(K)):(t.consume(K),V)}function H(K){return t.check(Qee,te,we)(K)}function te(K){return t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),X}function X(K){return K===null||Wt(K)?H(K):(t.enter("htmlFlowData"),V(K))}function q(K){return K===45?(t.consume(K),z):V(K)}function Y(K){return K===47?(t.consume(K),o="",se):V(K)}function se(K){if(K===62){const Ie=o.toLowerCase();return WI.includes(Ie)?(t.consume(K),ce):V(K)}return Pi(K)&&o.length<8?(t.consume(K),o+=String.fromCharCode(K),se):V(K)}function G(K){return K===93?(t.consume(K),z):V(K)}function z(K){return K===62?(t.consume(K),ce):K===45&&i===2?(t.consume(K),z):V(K)}function ce(K){return K===null||Wt(K)?(t.exit("htmlFlowData"),we(K)):(t.consume(K),ce)}function we(K){return t.exit("htmlFlow"),e(K)}}function Zee(t,e,n){const a=this;return i;function i(o){return Wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}function ete(t,e,n){return a;function a(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Pb,e,n)}}const tte={name:"htmlText",tokenize:nte};function nte(t,e,n){const a=this;let i,s,o;return l;function l(z){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(z),c}function c(z){return z===33?(t.consume(z),d):z===47?(t.consume(z),k):z===63?(t.consume(z),C):Pi(z)?(t.consume(z),F):n(z)}function d(z){return z===45?(t.consume(z),f):z===91?(t.consume(z),s=0,b):Pi(z)?(t.consume(z),T):n(z)}function f(z){return z===45?(t.consume(z),x):n(z)}function p(z){return z===null?n(z):z===45?(t.consume(z),g):Wt(z)?(o=p,Y(z)):(t.consume(z),p)}function g(z){return z===45?(t.consume(z),x):p(z)}function x(z){return z===62?q(z):z===45?g(z):p(z)}function b(z){const ce="CDATA[";return z===ce.charCodeAt(s++)?(t.consume(z),s===ce.length?j:b):n(z)}function j(z){return z===null?n(z):z===93?(t.consume(z),S):Wt(z)?(o=j,Y(z)):(t.consume(z),j)}function S(z){return z===93?(t.consume(z),_):j(z)}function _(z){return z===62?q(z):z===93?(t.consume(z),_):j(z)}function T(z){return z===null||z===62?q(z):Wt(z)?(o=T,Y(z)):(t.consume(z),T)}function C(z){return z===null?n(z):z===63?(t.consume(z),P):Wt(z)?(o=C,Y(z)):(t.consume(z),C)}function P(z){return z===62?q(z):C(z)}function k(z){return Pi(z)?(t.consume(z),O):n(z)}function O(z){return z===45||ui(z)?(t.consume(z),O):I(z)}function I(z){return Wt(z)?(o=I,Y(z)):En(z)?(t.consume(z),I):q(z)}function F(z){return z===45||ui(z)?(t.consume(z),F):z===47||z===62||_r(z)?B(z):n(z)}function B(z){return z===47?(t.consume(z),q):z===58||z===95||Pi(z)?(t.consume(z),$):Wt(z)?(o=B,Y(z)):En(z)?(t.consume(z),B):q(z)}function $(z){return z===45||z===46||z===58||z===95||ui(z)?(t.consume(z),$):L(z)}function L(z){return z===61?(t.consume(z),V):Wt(z)?(o=L,Y(z)):En(z)?(t.consume(z),L):B(z)}function V(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(t.consume(z),i=z,H):Wt(z)?(o=V,Y(z)):En(z)?(t.consume(z),V):(t.consume(z),te)}function H(z){return z===i?(t.consume(z),i=void 0,X):z===null?n(z):Wt(z)?(o=H,Y(z)):(t.consume(z),H)}function te(z){return z===null||z===34||z===39||z===60||z===61||z===96?n(z):z===47||z===62||_r(z)?B(z):(t.consume(z),te)}function X(z){return z===47||z===62||_r(z)?B(z):n(z)}function q(z){return z===62?(t.consume(z),t.exit("htmlTextData"),t.exit("htmlText"),e):n(z)}function Y(z){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),se}function se(z){return En(z)?zn(t,G,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):G(z)}function G(z){return t.enter("htmlTextData"),o(z)}}const XO={name:"labelEnd",resolveAll:ste,resolveTo:ote,tokenize:lte},rte={tokenize:cte},ate={tokenize:ute},ite={tokenize:dte};function ste(t){let e=-1;const n=[];for(;++e<t.length;){const a=t[e][1];if(n.push(t[e]),a.type==="labelImage"||a.type==="labelLink"||a.type==="labelEnd"){const i=a.type==="labelImage"?4:2;a.type="data",e+=i}}return t.length!==n.length&&Ts(t,0,t.length,n),t}function ote(t,e){let n=t.length,a=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){a=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+a+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",d,e]],l=Ys(l,t.slice(s+1,s+a+3)),l=Ys(l,[["enter",f,e]]),l=Ys(l,BN(e.parser.constructs.insideSpan.null,t.slice(s+a+4,o-3),e)),l=Ys(l,[["exit",f,e],t[o-2],t[o-1],["exit",d,e]]),l=Ys(l,t.slice(o+1)),l=Ys(l,[["exit",c,e]]),Ts(t,s,t.length,l),t}function lte(t,e,n){const a=this;let i=a.events.length,s,o;for(;i--;)if((a.events[i][1].type==="labelImage"||a.events[i][1].type==="labelLink")&&!a.events[i][1]._balanced){s=a.events[i][1];break}return l;function l(g){return s?s._inactive?p(g):(o=a.parser.defined.includes(Do(a.sliceSerialize({start:s.end,end:a.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),c):n(g)}function c(g){return g===40?t.attempt(rte,f,o?f:p)(g):g===91?t.attempt(ate,f,o?d:p)(g):o?f(g):p(g)}function d(g){return t.attempt(ite,f,p)(g)}function f(g){return e(g)}function p(g){return s._balanced=!0,n(g)}}function cte(t,e,n){return a;function a(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),i}function i(p){return _r(p)?yv(t,s)(p):s(p)}function s(p){return p===41?f(p):yq(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return _r(p)?yv(t,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?vq(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function d(p){return _r(p)?yv(t,f)(p):f(p)}function f(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function ute(t,e,n){const a=this;return i;function i(l){return xq.call(a,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return a.parser.defined.includes(Do(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function dte(t,e,n){return a;function a(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const hte={name:"labelStartImage",resolveAll:XO.resolveAll,tokenize:fte};function fte(t,e,n){const a=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(l):e(l)}}const pte={name:"labelStartLink",resolveAll:XO.resolveAll,tokenize:mte};function mte(t,e,n){const a=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(o):e(o)}}const sC={name:"lineEnding",tokenize:gte};function gte(t,e){return n;function n(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),zn(t,e,"linePrefix")}}const Xj={name:"thematicBreak",tokenize:yte};function yte(t,e,n){let a=0,i;return s;function s(d){return t.enter("thematicBreak"),o(d)}function o(d){return i=d,l(d)}function l(d){return d===i?(t.enter("thematicBreakSequence"),c(d)):a>=3&&(d===null||Wt(d))?(t.exit("thematicBreak"),e(d)):n(d)}function c(d){return d===i?(t.consume(d),a++,c):(t.exit("thematicBreakSequence"),En(d)?zn(t,l,"whitespace")(d):l(d))}}const Ji={continuation:{tokenize:jte},exit:Nte,name:"list",tokenize:bte},xte={partial:!0,tokenize:Ste},vte={partial:!0,tokenize:wte};function bte(t,e,n){const a=this,i=a.events[a.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(x){const b=a.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!a.containerState.marker||x===a.containerState.marker:SE(x)){if(a.containerState.type||(a.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(Xj,n,d)(x):d(x);if(!a.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(x)}return n(x)}function c(x){return SE(x)&&++o<10?(t.consume(x),c):(!a.interrupt||o<2)&&(a.containerState.marker?x===a.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),d(x)):n(x)}function d(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||x,t.check(Pb,a.interrupt?n:f,t.attempt(xte,g,p))}function f(x){return a.containerState.initialBlankLine=!0,s++,g(x)}function p(x){return En(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),g):n(x)}function g(x){return a.containerState.size=s+a.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function jte(t,e,n){const a=this;return a.containerState._closeFlow=void 0,t.check(Pb,i,s);function i(l){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,zn(t,e,"listItemIndent",a.containerState.size+1)(l)}function s(l){return a.containerState.furtherBlankLines||!En(l)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,o(l)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,t.attempt(vte,e,o)(l))}function o(l){return a.containerState._closeFlow=!0,a.interrupt=void 0,zn(t,t.attempt(Ji,e,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function wte(t,e,n){const a=this;return zn(t,i,"listItemIndent",a.containerState.size+1);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===a.containerState.size?e(s):n(s)}}function Nte(t){t.exit(this.containerState.type)}function Ste(t,e,n){const a=this;return zn(t,i,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=a.events[a.events.length-1];return!En(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const YI={name:"setextUnderline",resolveTo:_te,tokenize:Cte};function _te(t,e){let n=t.length,a,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){a=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[a][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[a][1],e]),t[a][1].end={...t[s][1].end}):t[a][1]=o,t.push(["exit",o,e]),t}function Cte(t,e,n){const a=this;let i;return s;function s(d){let f=a.events.length,p;for(;f--;)if(a.events[f][1].type!=="lineEnding"&&a.events[f][1].type!=="linePrefix"&&a.events[f][1].type!=="content"){p=a.events[f][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||p)?(t.enter("setextHeadingLine"),i=d,o(d)):n(d)}function o(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),En(d)?zn(t,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Wt(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const Tte={tokenize:kte};function kte(t){const e=this,n=t.attempt(Pb,a,t.attempt(this.parser.constructs.flowInitial,i,zn(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Dee,i)),"linePrefix")));return n;function a(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Ate={resolveAll:jq()},Ete=bq("string"),Pte=bq("text");function bq(t){return{resolveAll:jq(t==="text"?Ote:void 0),tokenize:e};function e(n){const a=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(f){return d(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return d(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function d(f){if(f===null)return!0;const p=i[f];let g=-1;if(p)for(;++g<p.length;){const x=p[g];if(!x.previous||x.previous.call(a,a.previous))return!0}return!1}}}function jq(t){return e;function e(n,a){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,a):n}}function Ote(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const a=t[n-1][1],i=e.sliceStream(a);let s=i.length,o=-1,l=0,c;for(;s--;){const d=i[s];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const d={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:a.start._bufferIndex+o,_index:a.start._index+s,line:a.end.line,column:a.end.column-l,offset:a.end.offset-l},end:{...a.end}};a.end={...d.start},a.start.offset===a.end.offset?Object.assign(a,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const Dte={42:Ji,43:Ji,45:Ji,48:Ji,49:Ji,50:Ji,51:Ji,52:Ji,53:Ji,54:Ji,55:Ji,56:Ji,57:Ji,62:fq},Mte={91:Fee},Ite={[-2]:iC,[-1]:iC,32:iC},Rte={35:Vee,42:Xj,45:[YI,Xj],60:Yee,61:YI,95:Xj,96:GI,126:GI},Lte={38:mq,92:pq},Fte={[-5]:sC,[-4]:sC,[-3]:sC,33:hte,38:mq,42:_E,60:[pee,tte],91:pte,92:[qee,pq],93:XO,95:_E,96:Tee},$te={null:[_E,Ate]},Bte={null:[42,95]},zte={null:[]},qte=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Bte,contentInitial:Mte,disable:zte,document:Dte,flow:Rte,flowInitial:Ite,insideSpan:$te,string:Lte,text:Fte},Symbol.toStringTag,{value:"Module"}));function Ute(t,e,n){let a={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const c={attempt:I(k),check:I(O),consume:T,enter:C,exit:P,interrupt:I(O,{interrupt:!0})},d={code:null,containerState:{},defineSkip:j,events:[],now:b,parser:t,previous:null,sliceSerialize:g,sliceStream:x,write:p};let f=e.tokenize.call(d,c);return e.resolveAll&&s.push(e),d;function p(L){return o=Ys(o,L),S(),o[o.length-1]!==null?[]:(F(e,0),d.events=BN(s,d.events,d),d.events)}function g(L,V){return Hte(x(L),V)}function x(L){return Vte(o,L)}function b(){const{_bufferIndex:L,_index:V,line:H,column:te,offset:X}=a;return{_bufferIndex:L,_index:V,line:H,column:te,offset:X}}function j(L){i[L.line]=L.column,$()}function S(){let L;for(;a._index<o.length;){const V=o[a._index];if(typeof V=="string")for(L=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===L&&a._bufferIndex<V.length;)_(V.charCodeAt(a._bufferIndex));else _(V)}}function _(L){f=f(L)}function T(L){Wt(L)?(a.line++,a.column=1,a.offset+=L===-3?2:1,$()):L!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===o[a._index].length&&(a._bufferIndex=-1,a._index++)),d.previous=L}function C(L,V){const H=V||{};return H.type=L,H.start=b(),d.events.push(["enter",H,d]),l.push(H),H}function P(L){const V=l.pop();return V.end=b(),d.events.push(["exit",V,d]),V}function k(L,V){F(L,V.from)}function O(L,V){V.restore()}function I(L,V){return H;function H(te,X,q){let Y,se,G,z;return Array.isArray(te)?we(te):"tokenize"in te?we([te]):ce(te);function ce(Re){return Fe;function Fe(ve){const ae=ve!==null&&Re[ve],je=ve!==null&&Re.null,ue=[...Array.isArray(ae)?ae:ae?[ae]:[],...Array.isArray(je)?je:je?[je]:[]];return we(ue)(ve)}}function we(Re){return Y=Re,se=0,Re.length===0?q:K(Re[se])}function K(Re){return Fe;function Fe(ve){return z=B(),G=Re,Re.partial||(d.currentConstruct=Re),Re.name&&d.parser.constructs.disable.null.includes(Re.name)?We():Re.tokenize.call(V?Object.assign(Object.create(d),V):d,c,Ie,We)(ve)}}function Ie(Re){return L(G,z),X}function We(Re){return z.restore(),++se<Y.length?K(Y[se]):q}}}function F(L,V){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&Ts(d.events,V,d.events.length-V,L.resolve(d.events.slice(V),d)),L.resolveTo&&(d.events=L.resolveTo(d.events,d))}function B(){const L=b(),V=d.previous,H=d.currentConstruct,te=d.events.length,X=Array.from(l);return{from:te,restore:q};function q(){a=L,d.previous=V,d.currentConstruct=H,d.events.length=te,l=X,$()}}function $(){a.line in i&&a.column<2&&(a.column=i[a.line],a.offset+=i[a.line]-1)}}function Vte(t,e){const n=e.start._index,a=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(a,s)];else{if(o=t.slice(n,i),a>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(a):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function Hte(t,e){let n=-1;const a=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,a.push(o)}return a.join("")}function Gte(t){const a={constructs:dq([qte,...(t||{}).extensions||[]]),content:i(oee),defined:[],document:i(cee),flow:i(Tte),lazy:{},string:i(Ete),text:i(Pte)};return a;function i(s){return o;function o(l){return Ute(a,s,l)}}}function Wte(t){for(;!gq(t););return t}const KI=/[\0\t\n\r]/g;function Yte(){let t=1,e="",n=!0,a;return i;function i(s,o,l){const c=[];let d,f,p,g,x;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,e="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(KI.lastIndex=p,d=KI.exec(s),g=d&&d.index!==void 0?d.index:s.length,x=s.charCodeAt(g),!d){e=s.slice(p);break}if(x===10&&p===g&&a)c.push(-3),a=void 0;else switch(a&&(c.push(-5),a=void 0),p<g&&(c.push(s.slice(p,g)),t+=g-p),x){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:a=!0,t=1}p=g+1}return l&&(a&&c.push(-5),e&&c.push(e),c.push(null)),c}}const Kte=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Qte(t){return t.replace(Kte,Xte)}function Xte(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return hq(n.slice(s?2:1),s?16:10)}return QO(n)||t}const wq={}.hasOwnProperty;function Jte(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Zte(n)(Wte(Gte(n).document().write(Yte()(t,e,!0))))}function Zte(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(qe),autolinkProtocol:B,autolinkEmail:B,atxHeading:s(ie),blockQuote:s(je),characterEscape:B,characterReference:B,codeFenced:s(ue),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ue,o),codeText:s(me,o),codeTextData:B,data:B,codeFlowValue:B,definition:s(oe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Q),hardBreakEscape:s(xe),hardBreakTrailing:s(xe),htmlFlow:s(ee,o),htmlFlowData:B,htmlText:s(ee,o),htmlTextData:B,image:s(Se),label:o,link:s(qe),listItem:s(Ne),listItemValue:g,listOrdered:s(Ge,p),listUnordered:s(Ge),paragraph:s(ne),reference:K,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ie),strong:s(de),thematicBreak:s(Ee)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:ae,autolinkProtocol:ve,blockQuote:c(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:We,characterReferenceMarkerNumeric:We,characterReferenceValue:Re,characterReference:Fe,codeFenced:c(S),codeFencedFence:j,codeFencedFenceInfo:x,codeFencedFenceMeta:b,codeFlowValue:$,codeIndented:c(_),codeText:c(X),codeTextData:$,data:$,definition:c(),definitionDestinationString:P,definitionLabelString:T,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(V),hardBreakTrailing:c(V),htmlFlow:c(H),htmlFlowData:$,htmlText:c(te),htmlTextData:$,image:c(Y),label:G,labelText:se,lineEnding:L,link:c(q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Ie,resourceDestinationString:z,resourceTitleString:ce,resource:we,setextHeading:c(F),setextHeadingLineSequence:I,setextHeadingText:O,strong:c(),thematicBreak:c()}};Nq(e,(t||{}).mdastExtensions||[]);const n={};return a;function a(W){let ye={type:"root",children:[]};const he={stack:[ye],tokenStack:[],config:e,enter:l,exit:d,buffer:o,resume:f,data:n},ge=[];let _e=-1;for(;++_e<W.length;)if(W[_e][1].type==="listOrdered"||W[_e][1].type==="listUnordered")if(W[_e][0]==="enter")ge.push(_e);else{const ze=ge.pop();_e=i(W,ze,_e)}for(_e=-1;++_e<W.length;){const ze=e[W[_e][0]];wq.call(ze,W[_e][1].type)&&ze[W[_e][1].type].call(Object.assign({sliceSerialize:W[_e][2].sliceSerialize},he),W[_e][1])}if(he.tokenStack.length>0){const ze=he.tokenStack[he.tokenStack.length-1];(ze[1]||QI).call(he,void 0,ze[0])}for(ye.position={start:Bu(W.length>0?W[0][1].start:{line:1,column:1,offset:0}),end:Bu(W.length>0?W[W.length-2][1].end:{line:1,column:1,offset:0})},_e=-1;++_e<e.transforms.length;)ye=e.transforms[_e](ye)||ye;return ye}function i(W,ye,he){let ge=ye-1,_e=-1,ze=!1,Oe,He,nt,mt;for(;++ge<=he;){const De=W[ge];switch(De[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{De[0]==="enter"?_e++:_e--,mt=void 0;break}case"lineEndingBlank":{De[0]==="enter"&&(Oe&&!mt&&!_e&&!nt&&(nt=ge),mt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:mt=void 0}if(!_e&&De[0]==="enter"&&De[1].type==="listItemPrefix"||_e===-1&&De[0]==="exit"&&(De[1].type==="listUnordered"||De[1].type==="listOrdered")){if(Oe){let Je=ge;for(He=void 0;Je--;){const et=W[Je];if(et[1].type==="lineEnding"||et[1].type==="lineEndingBlank"){if(et[0]==="exit")continue;He&&(W[He][1].type="lineEndingBlank",ze=!0),et[1].type="lineEnding",He=Je}else if(!(et[1].type==="linePrefix"||et[1].type==="blockQuotePrefix"||et[1].type==="blockQuotePrefixWhitespace"||et[1].type==="blockQuoteMarker"||et[1].type==="listItemIndent"))break}nt&&(!He||nt<He)&&(Oe._spread=!0),Oe.end=Object.assign({},He?W[He][1].start:De[1].end),W.splice(He||ge,0,["exit",Oe,De[2]]),ge++,he++}if(De[1].type==="listItemPrefix"){const Je={type:"listItem",_spread:!1,start:Object.assign({},De[1].start),end:void 0};Oe=Je,W.splice(ge,0,["enter",Je,De[2]]),ge++,he++,nt=void 0,mt=!0}}}return W[ye][1]._spread=ze,he}function s(W,ye){return he;function he(ge){l.call(this,W(ge),ge),ye&&ye.call(this,ge)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(W,ye,he){this.stack[this.stack.length-1].children.push(W),this.stack.push(W),this.tokenStack.push([ye,he||void 0]),W.position={start:Bu(ye.start),end:void 0}}function c(W){return ye;function ye(he){W&&W.call(this,he),d.call(this,he)}}function d(W,ye){const he=this.stack.pop(),ge=this.tokenStack.pop();if(ge)ge[0].type!==W.type&&(ye?ye.call(this,W,ge[0]):(ge[1]||QI).call(this,W,ge[0]));else throw new Error("Cannot close `"+W.type+"` ("+gv({start:W.start,end:W.end})+"): its not open");he.position.end=Bu(W.end)}function f(){return KO(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(W){if(this.data.expectingFirstListItemValue){const ye=this.stack[this.stack.length-2];ye.start=Number.parseInt(this.sliceSerialize(W),10),this.data.expectingFirstListItemValue=void 0}}function x(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.lang=W}function b(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.meta=W}function j(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.value=W.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.value=W.replace(/(\r?\n|\r)$/g,"")}function T(W){const ye=this.resume(),he=this.stack[this.stack.length-1];he.label=ye,he.identifier=Do(this.sliceSerialize(W)).toLowerCase()}function C(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.title=W}function P(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.url=W}function k(W){const ye=this.stack[this.stack.length-1];if(!ye.depth){const he=this.sliceSerialize(W).length;ye.depth=he}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function I(W){const ye=this.stack[this.stack.length-1];ye.depth=this.sliceSerialize(W).codePointAt(0)===61?1:2}function F(){this.data.setextHeadingSlurpLineEnding=void 0}function B(W){const he=this.stack[this.stack.length-1].children;let ge=he[he.length-1];(!ge||ge.type!=="text")&&(ge=Te(),ge.position={start:Bu(W.start),end:void 0},he.push(ge)),this.stack.push(ge)}function $(W){const ye=this.stack.pop();ye.value+=this.sliceSerialize(W),ye.position.end=Bu(W.end)}function L(W){const ye=this.stack[this.stack.length-1];if(this.data.atHardBreak){const he=ye.children[ye.children.length-1];he.position.end=Bu(W.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ye.type)&&(B.call(this,W),$.call(this,W))}function V(){this.data.atHardBreak=!0}function H(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.value=W}function te(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.value=W}function X(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.value=W}function q(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=ye,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function Y(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=ye,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function se(W){const ye=this.sliceSerialize(W),he=this.stack[this.stack.length-2];he.label=Qte(ye),he.identifier=Do(ye).toLowerCase()}function G(){const W=this.stack[this.stack.length-1],ye=this.resume(),he=this.stack[this.stack.length-1];if(this.data.inReference=!0,he.type==="link"){const ge=W.children;he.children=ge}else he.alt=ye}function z(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.url=W}function ce(){const W=this.resume(),ye=this.stack[this.stack.length-1];ye.title=W}function we(){this.data.inReference=void 0}function K(){this.data.referenceType="collapsed"}function Ie(W){const ye=this.resume(),he=this.stack[this.stack.length-1];he.label=ye,he.identifier=Do(this.sliceSerialize(W)).toLowerCase(),this.data.referenceType="full"}function We(W){this.data.characterReferenceType=W.type}function Re(W){const ye=this.sliceSerialize(W),he=this.data.characterReferenceType;let ge;he?(ge=hq(ye,he==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ge=QO(ye);const _e=this.stack[this.stack.length-1];_e.value+=ge}function Fe(W){const ye=this.stack.pop();ye.position.end=Bu(W.end)}function ve(W){$.call(this,W);const ye=this.stack[this.stack.length-1];ye.url=this.sliceSerialize(W)}function ae(W){$.call(this,W);const ye=this.stack[this.stack.length-1];ye.url="mailto:"+this.sliceSerialize(W)}function je(){return{type:"blockquote",children:[]}}function ue(){return{type:"code",lang:null,meta:null,value:""}}function me(){return{type:"inlineCode",value:""}}function oe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Q(){return{type:"emphasis",children:[]}}function ie(){return{type:"heading",depth:0,children:[]}}function xe(){return{type:"break"}}function ee(){return{type:"html",value:""}}function Se(){return{type:"image",title:null,url:"",alt:null}}function qe(){return{type:"link",title:null,url:"",children:[]}}function Ge(W){return{type:"list",ordered:W.type==="listOrdered",start:null,spread:W._spread,children:[]}}function Ne(W){return{type:"listItem",spread:W._spread,checked:null,children:[]}}function ne(){return{type:"paragraph",children:[]}}function de(){return{type:"strong",children:[]}}function Te(){return{type:"text",value:""}}function Ee(){return{type:"thematicBreak"}}}function Bu(t){return{line:t.line,column:t.column,offset:t.offset}}function Nq(t,e){let n=-1;for(;++n<e.length;){const a=e[n];Array.isArray(a)?Nq(t,a):ene(t,a)}}function ene(t,e){let n;for(n in e)if(wq.call(e,n))switch(n){case"canContainEols":{const a=e[n];a&&t[n].push(...a);break}case"transforms":{const a=e[n];a&&t[n].push(...a);break}case"enter":case"exit":{const a=e[n];a&&Object.assign(t[n],a);break}}}function QI(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+gv({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+gv({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+gv({start:e.start,end:e.end})+") is still open")}function tne(t){const e=this;e.parser=n;function n(a){return Jte(a,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function nne(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function rne(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function ane(t,e){const n=e.value?e.value+`
`:"",a={};e.lang&&(a.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function ine(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function sne(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function one(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",a=String(e.identifier).toUpperCase(),i=Rg(a.toLowerCase()),s=t.footnoteOrder.indexOf(a);let o,l=t.footnoteCounts.get(a);l===void 0?(l=0,t.footnoteOrder.push(a),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(a,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,d),t.applyData(e,d)}function lne(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cne(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Sq(t,e){const n=e.referenceType;let a="]";if(n==="collapsed"?a+="[]":n==="full"&&(a+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+a}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=a:i.push({type:"text",value:a}),i}function une(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return Sq(t,e);const i={src:Rg(a.url||""),alt:e.alt};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function dne(t,e){const n={src:Rg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,a),t.applyData(e,a)}function hne(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,a),t.applyData(e,a)}function fne(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return Sq(t,e);const i={href:Rg(a.url||"")};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function pne(t,e){const n={href:Rg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function mne(t,e,n){const a=t.all(e),i=n?gne(n):_q(e),s={},o=[];if(typeof e.checked=="boolean"){const f=a[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},a.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<a.length;){const f=a[l];(i||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?o.push(...f.children):o.push(f)}const c=a[a.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,d),t.applyData(e,d)}function gne(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let a=-1;for(;!e&&++a<n.length;)e=_q(n[a])}return e}function _q(t){const e=t.spread;return e??t.children.length>1}function yne(t,e){const n={},a=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<a.length;){const o=a[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(a,!0)};return t.patch(e,s),t.applyData(e,s)}function xne(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vne(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function bne(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jne(t,e){const n=t.all(e),a=n.shift(),i=[];if(a){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([a],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=HO(e.children[1]),c=aq(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function wne(t,e,n){const a=n?n.children:void 0,s=(a?a.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let c=-1;const d=[];for(;++c<l;){const p=e.children[c],g={},x=o?o[c]:void 0;x&&(g.align=x);let b={type:"element",tagName:s,properties:g,children:[]};p&&(b.children=t.all(p),t.patch(p,b),b=t.applyData(p,b)),d.push(b)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,f),t.applyData(e,f)}function Nne(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const XI=9,JI=32;function Sne(t){const e=String(t),n=/\r?\n|\r/g;let a=n.exec(e),i=0;const s=[];for(;a;)s.push(ZI(e.slice(i,a.index),i>0,!0),a[0]),i=a.index+a[0].length,a=n.exec(e);return s.push(ZI(e.slice(i),i>0,!1)),s.join("")}function ZI(t,e,n){let a=0,i=t.length;if(e){let s=t.codePointAt(a);for(;s===XI||s===JI;)a++,s=t.codePointAt(a)}if(n){let s=t.codePointAt(i-1);for(;s===XI||s===JI;)i--,s=t.codePointAt(i-1)}return i>a?t.slice(a,i):""}function _ne(t,e){const n={type:"text",value:Sne(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Cne(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Tne={blockquote:nne,break:rne,code:ane,delete:ine,emphasis:sne,footnoteReference:one,heading:lne,html:cne,imageReference:une,image:dne,inlineCode:hne,linkReference:fne,link:pne,listItem:mne,list:yne,paragraph:xne,root:vne,strong:bne,table:jne,tableCell:Nne,tableRow:wne,text:_ne,thematicBreak:Cne,toml:pj,yaml:pj,definition:pj,footnoteDefinition:pj};function pj(){}const Cq=-1,zN=0,xv=1,mw=2,JO=3,ZO=4,eD=5,tD=6,Tq=7,kq=8,eR=typeof self=="object"?self:globalThis,kne=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),a=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case zN:case Cq:return n(o,i);case xv:{const l=n([],i);for(const c of o)l.push(a(c));return l}case mw:{const l=n({},i);for(const[c,d]of o)l[a(c)]=a(d);return l}case JO:return n(new Date(o),i);case ZO:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case eD:{const l=n(new Map,i);for(const[c,d]of o)l.set(a(c),a(d));return l}case tD:{const l=n(new Set,i);for(const c of o)l.add(a(c));return l}case Tq:{const{name:l,message:c}=o;return n(new eR[l](c),i)}case kq:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new eR[s](o),i)};return a},tR=t=>kne(new Map,t)(0),pm="",{toString:Ane}={},{keys:Ene}=Object,Hx=t=>{const e=typeof t;if(e!=="object"||!t)return[zN,e];const n=Ane.call(t).slice(8,-1);switch(n){case"Array":return[xv,pm];case"Object":return[mw,pm];case"Date":return[JO,pm];case"RegExp":return[ZO,pm];case"Map":return[eD,pm];case"Set":return[tD,pm];case"DataView":return[xv,n]}return n.includes("Array")?[xv,n]:n.includes("Error")?[Tq,n]:[mw,n]},mj=([t,e])=>t===zN&&(e==="function"||e==="symbol"),Pne=(t,e,n,a)=>{const i=(o,l)=>{const c=a.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=Hx(o);switch(l){case zN:{let f=o;switch(c){case"bigint":l=kq,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return i([Cq],o)}return i([l,f],o)}case xv:{if(c){let g=o;return c==="DataView"?g=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(g=new Uint8Array(o)),i([c,[...g]],o)}const f=[],p=i([l,f],o);for(const g of o)f.push(s(g));return p}case mw:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],p=i([l,f],o);for(const g of Ene(o))(t||!mj(Hx(o[g])))&&f.push([s(g),s(o[g])]);return p}case JO:return i([l,o.toISOString()],o);case ZO:{const{source:f,flags:p}=o;return i([l,{source:f,flags:p}],o)}case eD:{const f=[],p=i([l,f],o);for(const[g,x]of o)(t||!(mj(Hx(g))||mj(Hx(x))))&&f.push([s(g),s(x)]);return p}case tD:{const f=[],p=i([l,f],o);for(const g of o)(t||!mj(Hx(g)))&&f.push(s(g));return p}}const{message:d}=o;return i([l,{name:c,message:d}],o)};return s},nR=(t,{json:e,lossy:n}={})=>{const a=[];return Pne(!(e||n),!!e,new Map,a)(t),a},gw=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?tR(nR(t,e)):structuredClone(t):(t,e)=>tR(nR(t,e));function One(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Dne(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Mne(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||One,a=t.options.footnoteBackLabel||Dne,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[c]);if(!d)continue;const f=t.all(d),p=String(d.identifier).toUpperCase(),g=Rg(p.toLowerCase());let x=0;const b=[],j=t.footnoteCounts.get(p);for(;j!==void 0&&++x<=j;){b.length>0&&b.push({type:"text",value:" "});let T=typeof n=="string"?n:n(c,x);typeof T=="string"&&(T={type:"text",value:T}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof a=="string"?a:a(c,x),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const S=f[f.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const T=S.children[S.children.length-1];T&&T.type==="text"?T.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...b)}else f.push(...b);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(f,!0)};t.patch(d,_),l.push(_)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...gw(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const qN=function(t){if(t==null)return Fne;if(typeof t=="function")return UN(t);if(typeof t=="object")return Array.isArray(t)?Ine(t):Rne(t);if(typeof t=="string")return Lne(t);throw new Error("Expected function, string, or object as test")};function Ine(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=qN(t[n]);return UN(a);function a(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Rne(t){const e=t;return UN(n);function n(a){const i=a;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Lne(t){return UN(e);function e(n){return n&&n.type===t}}function UN(t){return e;function e(n,a,i){return!!($ne(n)&&t.call(this,n,typeof a=="number"?a:void 0,i||void 0))}}function Fne(){return!0}function $ne(t){return t!==null&&typeof t=="object"&&"type"in t}const Aq=[],Bne=!0,CE=!1,zne="skip";function Eq(t,e,n,a){let i;typeof e=="function"&&typeof n!="function"?(a=n,n=e):i=e;const s=qN(i),o=a?-1:1;l(t,void 0,[])();function l(c,d,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const x=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=Aq,b,j,S;if((!e||s(c,d,f[f.length-1]||void 0))&&(x=qne(n(c,f)),x[0]===CE))return x;if("children"in c&&c.children){const _=c;if(_.children&&x[0]!==zne)for(j=(a?_.children.length:-1)+o,S=f.concat(_);j>-1&&j<_.children.length;){const T=_.children[j];if(b=l(T,j,S)(),b[0]===CE)return b;j=typeof b[1]=="number"?b[1]:j+o}}return x}}}function qne(t){return Array.isArray(t)?t:typeof t=="number"?[Bne,t]:t==null?Aq:[t]}function nD(t,e,n,a){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=a),Eq(t,s,l,i);function l(c,d){const f=d[d.length-1],p=f?f.children.indexOf(c):void 0;return o(c,p,f)}}const TE={}.hasOwnProperty,Une={};function Vne(t,e){const n=e||Une,a=new Map,i=new Map,s=new Map,o={...Tne,...n.handlers},l={all:d,applyData:Gne,definitionById:a,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:Hne,wrap:Yne};return nD(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?a:i,g=String(f.identifier).toUpperCase();p.has(g)||p.set(g,f)}}),l;function c(f,p){const g=f.type,x=l.handlers[g];if(TE.call(l.handlers,g)&&x)return x(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in f){const{children:j,...S}=f,_=gw(S);return _.children=l.all(f),_}return gw(f)}return(l.options.unknownHandler||Wne)(l,f,p)}function d(f){const p=[];if("children"in f){const g=f.children;let x=-1;for(;++x<g.length;){const b=l.one(g[x],f);if(b){if(x&&g[x-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=rR(b.value)),!Array.isArray(b)&&b.type==="element")){const j=b.children[0];j&&j.type==="text"&&(j.value=rR(j.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function Hne(t,e){t.position&&(e.position=DZ(t))}function Gne(t,e){let n=e;if(t&&t.data){const a=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof a=="string")if(n.type==="element")n.tagName=a;else{const o="children"in n?n.children:[n];n={type:"element",tagName:a,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,gw(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Wne(t,e){const n=e.data||{},a="value"in e&&!(TE.call(n,"hProperties")||TE.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function Yne(t,e){const n=[];let a=-1;for(e&&n.push({type:"text",value:`
`});++a<t.length;)a&&n.push({type:"text",value:`
`}),n.push(t[a]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function rR(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function aR(t,e){const n=Vne(t,e),a=n.one(t,void 0),i=Mne(n),s=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Kne(t,e){return t&&"run"in t?async function(n,a){const i=aR(n,{file:a,...e});await t.run(i,a)}:function(n,a){return aR(n,{file:a,...t||e})}}function iR(t){if(t)throw t}var oC,sR;function Qne(){if(sR)return oC;sR=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var f=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!f&&!p)return!1;var g;for(g in d);return typeof g>"u"||t.call(d,g)},o=function(d,f){n&&f.name==="__proto__"?n(d,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):d[f.name]=f.newValue},l=function(d,f){if(f==="__proto__")if(t.call(d,f)){if(a)return a(d,f).value}else return;return d[f]};return oC=function c(){var d,f,p,g,x,b,j=arguments[0],S=1,_=arguments.length,T=!1;for(typeof j=="boolean"&&(T=j,j=arguments[1]||{},S=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});S<_;++S)if(d=arguments[S],d!=null)for(f in d)p=l(j,f),g=l(d,f),j!==g&&(T&&g&&(s(g)||(x=i(g)))?(x?(x=!1,b=p&&i(p)?p:[]):b=p&&s(p)?p:{},o(j,{name:f,newValue:c(T,b,g)})):typeof g<"u"&&o(j,{name:f,newValue:g}));return j},oC}var Xne=Qne();const lC=Un(Xne);function kE(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Jne(){const t=[],e={run:n,use:a};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...d){const f=t[++s];let p=-1;if(c){o(c);return}for(;++p<i.length;)(d[p]===null||d[p]===void 0)&&(d[p]=i[p]);i=d,f?Zne(f,l)(...d):o(null,...d)}}function a(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function Zne(t,e){let n;return a;function a(...o){const l=t.length>o.length;let c;l&&o.push(i);try{c=t.apply(this,o)}catch(d){const f=d;if(l&&n)throw f;return i(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}const vl={basename:ere,dirname:tre,extname:nre,join:rre,sep:"/"};function ere(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ob(t);let n=0,a=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1);return a<0?"":t.slice(n,a)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(a=i):(l=-1,a=o));return n===a?a=o:a<0&&(a=t.length),t.slice(n,a)}function tre(t){if(Ob(t),t.length===0)return".";let e=-1,n=t.length,a;for(;--n;)if(t.codePointAt(n)===47){if(a){e=n;break}}else a||(a=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function nre(t){Ob(t);let e=t.length,n=-1,a=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){a=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===a+1?"":t.slice(i,n)}function rre(...t){let e=-1,n;for(;++e<t.length;)Ob(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":are(n)}function are(t){Ob(t);const e=t.codePointAt(0)===47;let n=ire(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function ire(t,e){let n="",a=0,i=-1,s=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||a!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",a=0):(n=n.slice(0,c),a=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",a=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",a=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),a=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Ob(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const sre={cwd:ore};function ore(){return"/"}function AE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function lre(t){if(typeof t=="string")t=new URL(t);else if(!AE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return cre(t)}function cre(t){if(t.hostname!==""){const a=new TypeError('File URL host must be "localhost" or empty on darwin');throw a.code="ERR_INVALID_FILE_URL_HOST",a}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const a=e.codePointAt(n+2);if(a===70||a===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const cC=["history","path","basename","stem","extname","dirname"];class Pq{constructor(e){let n;e?AE(e)?n={path:e}:typeof e=="string"||ure(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":sre.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let a=-1;for(;++a<cC.length;){const s=cC[a];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)cC.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?vl.basename(this.path):void 0}set basename(e){dC(e,"basename"),uC(e,"basename"),this.path=vl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?vl.dirname(this.path):void 0}set dirname(e){oR(this.basename,"dirname"),this.path=vl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?vl.extname(this.path):void 0}set extname(e){if(uC(e,"extname"),oR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=vl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){AE(e)&&(e=lre(e)),dC(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?vl.basename(this.path,this.extname):void 0}set stem(e){dC(e,"stem"),uC(e,"stem"),this.path=vl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,a){const i=this.message(e,n,a);throw i.fatal=!0,i}info(e,n,a){const i=this.message(e,n,a);return i.fatal=void 0,i}message(e,n,a){const i=new hi(e,n,a);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function uC(t,e){if(t&&t.includes(vl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+vl.sep+"`")}function dC(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function oR(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function ure(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const dre=function(t){const a=this.constructor.prototype,i=a[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,a),s},hre={}.hasOwnProperty;class rD extends dre{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Jne()}copy(){const e=new rD;let n=-1;for(;++n<this.attachers.length;){const a=this.attachers[n];e.use(...a)}return e.data(lC(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(pC("data",this.frozen),this.namespace[e]=n,this):hre.call(this.namespace,e)&&this.namespace[e]||void 0:e?(pC("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...a]=this.attachers[this.freezeIndex];if(a[0]===!1)continue;a[0]===!0&&(a[0]=void 0);const i=n.call(e,...a);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=gj(e),a=this.parser||this.Parser;return hC("parse",a),a(String(n),n)}process(e,n){const a=this;return this.freeze(),hC("process",this.parser||this.Parser),fC("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=gj(e),c=a.parse(l);a.run(c,l,function(f,p,g){if(f||!p||!g)return d(f);const x=p,b=a.stringify(x,g);mre(b)?g.value=b:g.result=b,d(f,g)});function d(f,p){f||!p?o(f):s?s(p):n(void 0,p)}}}processSync(e){let n=!1,a;return this.freeze(),hC("processSync",this.parser||this.Parser),fC("processSync",this.compiler||this.Compiler),this.process(e,i),cR("processSync","process",n),a;function i(s,o){n=!0,iR(s),a=o}}run(e,n,a){lR(e),this.freeze();const i=this.transformers;return!a&&typeof n=="function"&&(a=n,n=void 0),a?s(void 0,a):new Promise(s);function s(o,l){const c=gj(n);i.run(e,c,d);function d(f,p,g){const x=p||e;f?l(f):o?o(x):a(void 0,x,g)}}}runSync(e,n){let a=!1,i;return this.run(e,n,s),cR("runSync","run",a),i;function s(o,l){iR(o),i=l,a=!0}}stringify(e,n){this.freeze();const a=gj(n),i=this.compiler||this.Compiler;return fC("stringify",i),lR(e),i(e,a)}use(e,...n){const a=this.attachers,i=this.namespace;if(pC("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[f,...p]=d;c(f,p)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=lC(!0,i.settings,d.settings))}function l(d){let f=-1;if(d!=null)if(Array.isArray(d))for(;++f<d.length;){const p=d[f];s(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,f){let p=-1,g=-1;for(;++p<a.length;)if(a[p][0]===d){g=p;break}if(g===-1)a.push([d,...f]);else if(f.length>0){let[x,...b]=f;const j=a[g][1];kE(j)&&kE(x)&&(x=lC(!0,j,x)),a[g]=[d,x,...b]}}}}const fre=new rD().freeze();function hC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function fC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function pC(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function lR(t){if(!kE(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function cR(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function gj(t){return pre(t)?t:new Pq(t)}function pre(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function mre(t){return typeof t=="string"||gre(t)}function gre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const yre="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",uR=[],dR={allowDangerousHtml:!0},xre=/^(https?|ircs?|mailto|xmpp)$/i,vre=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function bf(t){const e=bre(t),n=jre(t);return wre(e.runSync(e.parse(n),n),t)}function bre(t){const e=t.rehypePlugins||uR,n=t.remarkPlugins||uR,a=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...dR}:dR;return fre().use(tne).use(n).use(Kne,a).use(e)}function jre(t){const e=t.children||"",n=new Pq;return typeof e=="string"&&(n.value=e),n}function wre(t,e){const n=e.allowedElements,a=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||Nre;for(const f of vre)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+yre+f.id,void 0);return nD(t,d),FZ(t,{Fragment:r.Fragment,components:i,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function d(f,p,g){if(f.type==="raw"&&g&&typeof p=="number")return o?g.children.splice(p,1):g.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let x;for(x in aC)if(Object.hasOwn(aC,x)&&Object.hasOwn(f.properties,x)){const b=f.properties[x],j=aC[x];(j===null||j.includes(f.tagName))&&(f.properties[x]=c(String(b||""),x,f))}}if(f.type==="element"){let x=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!x&&a&&typeof p=="number"&&(x=!a(f,p,g)),x&&g&&typeof p=="number")return l&&f.children?g.children.splice(p,1,...f.children):g.children.splice(p,1),p}}}function Nre(t){const e=t.indexOf(":"),n=t.indexOf("?"),a=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||a!==-1&&e>a||xre.test(t.slice(0,e))?t:""}function hR(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let a=0,i=n.indexOf(e);for(;i!==-1;)a++,i=n.indexOf(e,i+e.length);return a}function Sre(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function _re(t,e,n){const i=qN((n||{}).ignore||[]),s=Cre(e);let o=-1;for(;++o<s.length;)Eq(t,"text",l);function l(d,f){let p=-1,g;for(;++p<f.length;){const x=f[p],b=g?g.children:void 0;if(i(x,b?b.indexOf(x):void 0,g))return;g=x}if(g)return c(d,f)}function c(d,f){const p=f[f.length-1],g=s[o][0],x=s[o][1];let b=0;const S=p.children.indexOf(d);let _=!1,T=[];g.lastIndex=0;let C=g.exec(d.value);for(;C;){const P=C.index,k={index:C.index,input:C.input,stack:[...f,d]};let O=x(...C,k);if(typeof O=="string"&&(O=O.length>0?{type:"text",value:O}:void 0),O===!1?g.lastIndex=P+1:(b!==P&&T.push({type:"text",value:d.value.slice(b,P)}),Array.isArray(O)?T.push(...O):O&&T.push(O),b=P+C[0].length,_=!0),!g.global)break;C=g.exec(d.value)}return _?(b<d.value.length&&T.push({type:"text",value:d.value.slice(b)}),p.children.splice(S,1,...T)):T=[d],S+T.length}}function Cre(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let a=-1;for(;++a<n.length;){const i=n[a];e.push([Tre(i[0]),kre(i[1])])}return e}function Tre(t){return typeof t=="string"?new RegExp(Sre(t),"g"):t}function kre(t){return typeof t=="function"?t:function(){return t}}const mC="phrasing",gC=["autolink","link","image","label"];function Are(){return{transforms:[Rre],enter:{literalAutolink:Pre,literalAutolinkEmail:yC,literalAutolinkHttp:yC,literalAutolinkWww:yC},exit:{literalAutolink:Ire,literalAutolinkEmail:Mre,literalAutolinkHttp:Ore,literalAutolinkWww:Dre}}}function Ere(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:mC,notInConstruct:gC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:mC,notInConstruct:gC},{character:":",before:"[ps]",after:"\\/",inConstruct:mC,notInConstruct:gC}]}}function Pre(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function yC(t){this.config.enter.autolinkProtocol.call(this,t)}function Ore(t){this.config.exit.autolinkProtocol.call(this,t)}function Dre(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Mre(t){this.config.exit.autolinkEmail.call(this,t)}function Ire(t){this.exit(t)}function Rre(t){_re(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Lre],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Fre]],{ignore:["link","linkReference"]})}function Lre(t,e,n,a,i){let s="";if(!Oq(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!$re(n)))return!1;const o=Bre(n+a);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function Fre(t,e,n,a){return!Oq(a,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function $re(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Bre(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],a=n.indexOf(")");const i=hR(t,"(");let s=hR(t,")");for(;a!==-1&&i>s;)t+=n.slice(0,a+1),n=n.slice(a+1),a=n.indexOf(")"),s++;return[t,n]}function Oq(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||vf(n)||$N(n))&&(!e||n!==47)}Dq.peek=Kre;function zre(){this.buffer()}function qre(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Ure(){this.buffer()}function Vre(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Hre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Do(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Gre(t){this.exit(t)}function Wre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Do(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Yre(t){this.exit(t)}function Kre(){return"["}function Dq(t,e,n,a){const i=n.createTracker(a);let s=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=i.move("]"),s}function Qre(){return{enter:{gfmFootnoteCallString:zre,gfmFootnoteCall:qre,gfmFootnoteDefinitionLabelString:Ure,gfmFootnoteDefinition:Vre},exit:{gfmFootnoteCallString:Hre,gfmFootnoteCall:Gre,gfmFootnoteDefinitionLabelString:Wre,gfmFootnoteDefinition:Yre}}}function Xre(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Dq},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(a,i,s,o){const l=s.createTracker(o);let c=l.move("[^");const d=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(a),{before:c,after:"]"})),f(),c+=l.move("]:"),a.children&&a.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(a,l.current()),e?Mq:Jre))),d(),c}}function Jre(t,e,n){return e===0?t:Mq(t,e,n)}function Mq(t,e,n){return(n?"":"    ")+t}const Zre=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Iq.peek=aae;function eae(){return{canContainEols:["delete"],enter:{strikethrough:nae},exit:{strikethrough:rae}}}function tae(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Zre}],handlers:{delete:Iq}}}function nae(t){this.enter({type:"delete",children:[]},t)}function rae(t){this.exit(t)}function Iq(t,e,n,a){const i=n.createTracker(a),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function aae(){return"~"}function iae(t){return t.length}function sae(t,e){const n=e||{},a=(n.align||[]).concat(),i=n.stringLength||iae,s=[],o=[],l=[],c=[];let d=0,f=-1;for(;++f<t.length;){const j=[],S=[];let _=-1;for(t[f].length>d&&(d=t[f].length);++_<t[f].length;){const T=oae(t[f][_]);if(n.alignDelimiters!==!1){const C=i(T);S[_]=C,(c[_]===void 0||C>c[_])&&(c[_]=C)}j.push(T)}o[f]=j,l[f]=S}let p=-1;if(typeof a=="object"&&"length"in a)for(;++p<d;)s[p]=fR(a[p]);else{const j=fR(a);for(;++p<d;)s[p]=j}p=-1;const g=[],x=[];for(;++p<d;){const j=s[p];let S="",_="";j===99?(S=":",_=":"):j===108?S=":":j===114&&(_=":");let T=n.alignDelimiters===!1?1:Math.max(1,c[p]-S.length-_.length);const C=S+"-".repeat(T)+_;n.alignDelimiters!==!1&&(T=S.length+T+_.length,T>c[p]&&(c[p]=T),x[p]=T),g[p]=C}o.splice(1,0,g),l.splice(1,0,x),f=-1;const b=[];for(;++f<o.length;){const j=o[f],S=l[f];p=-1;const _=[];for(;++p<d;){const T=j[p]||"";let C="",P="";if(n.alignDelimiters!==!1){const k=c[p]-(S[p]||0),O=s[p];O===114?C=" ".repeat(k):O===99?k%2?(C=" ".repeat(k/2+.5),P=" ".repeat(k/2-.5)):(C=" ".repeat(k/2),P=C):P=" ".repeat(k)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(C),_.push(T),n.alignDelimiters!==!1&&_.push(P),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&_.push("|")}b.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return b.join(`
`)}function oae(t){return t==null?"":String(t)}function fR(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function lae(t,e,n,a){const i=n.enter("blockquote"),s=n.createTracker(a);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),cae);return i(),o}function cae(t,e,n){return">"+(n?"":" ")+t}function uae(t,e){return pR(t,e.inConstruct,!0)&&!pR(t,e.notInConstruct,!1)}function pR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let a=-1;for(;++a<e.length;)if(t.includes(e[a]))return!0;return!1}function mR(t,e,n,a){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&uae(n.stack,n.unsafe[i]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function dae(t,e){const n=String(t);let a=n.indexOf(e),i=a,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===i?++s>o&&(o=s):s=1,i=a+e.length,a=n.indexOf(e,i);return o}function hae(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function fae(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function pae(t,e,n,a){const i=fae(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(hae(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(s,mae);return p(),g}const l=n.createTracker(a),c=i.repeat(Math.max(dae(s,i)+1,3)),d=n.enter("codeFenced");let f=l.move(c);if(t.lang){const p=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),d(),f}function mae(t,e,n){return(n?"":"    ")+t}function aD(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function gae(t,e,n,a){const i=aD(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(a);let d=c.move("[");return d+=c.move(n.safe(n.associationId(t),{before:d,after:"]",...c.current()})),d+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+i),d+=c.move(n.safe(t.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),o(),d}function yae(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Pv(t){return"&#x"+t.toString(16).toUpperCase()+";"}function yw(t,e,n){const a=tg(t),i=tg(e);return a===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:a===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Rq.peek=xae;function Rq(t,e,n,a){const i=yae(n),s=n.enter("emphasis"),o=n.createTracker(a),l=o.move(i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),f=yw(a.before.charCodeAt(a.before.length-1),d,i);f.inside&&(c=Pv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),g=yw(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Pv(p));const x=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function xae(t,e,n){return n.options.emphasis||"*"}function vae(t,e){let n=!1;return nD(t,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return n=!0,CE}),!!((!t.depth||t.depth<3)&&KO(t)&&(e.options.setext||n))}function bae(t,e,n,a){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(a);if(vae(t,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return p(),f(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(d)&&(d=Pv(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,n.options.closeAtx&&(d+=" "+o),c(),l(),d}Lq.peek=jae;function Lq(t){return t.value||""}function jae(){return"<"}Fq.peek=wae;function Fq(t,e,n,a){const i=aD(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(a);let d=c.move("![");return d+=c.move(n.safe(t.alt,{before:d,after:"]",...c.current()})),d+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+i),d+=c.move(n.safe(t.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),d+=c.move(")"),o(),d}function wae(){return"!"}$q.peek=Nae;function $q(t,e,n,a){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("![");const d=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!d||d!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Nae(){return"!"}Bq.peek=Sae;function Bq(t,e,n){let a=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(a);)i+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(a);){let d=c.index;a.charCodeAt(d)===10&&a.charCodeAt(d-1)===13&&d--,a=a.slice(0,d)+" "+a.slice(c.index+1)}}return i+a+i}function Sae(){return"`"}function zq(t,e){const n=KO(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}qq.peek=_ae;function qq(t,e,n,a){const i=aD(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(a);let l,c;if(zq(t,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(t,{before:p,after:">",...o.current()})),p+=o.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let d=o.move("[");return d+=o.move(n.containerPhrasing(t,{before:d,after:"](",...o.current()})),d+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(n.safe(t.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(c=n.enter("destinationRaw"),d+=o.move(n.safe(t.url,{before:d,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),d+=o.move(" "+i),d+=o.move(n.safe(t.title,{before:d,after:i,...o.current()})),d+=o.move(i),c()),d+=o.move(")"),l(),d}function _ae(t,e,n){return zq(t,n)?"<":"["}Uq.peek=Cae;function Uq(t,e,n,a){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("[");const d=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!d||d!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Cae(){return"["}function iD(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Tae(t){const e=iD(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function kae(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Vq(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Aae(t,e,n,a){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?kae(n):iD(n);const l=t.ordered?o==="."?")":".":Tae(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Vq(n)===o&&f){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const d=n.containerFlow(t,a);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),d}function Eae(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Pae(t,e,n,a){const i=Eae(n);let s=n.bulletCurrent||iD(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(a);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,l.current()),f);return c(),d;function f(p,g,x){return g?(x?"":" ".repeat(o))+p:(x?s:s+" ".repeat(o-s.length))+p}}function Oae(t,e,n,a){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,a);return s(),i(),o}const Dae=qN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Mae(t,e,n,a){return(t.children.some(function(o){return Dae(o)})?n.containerPhrasing:n.containerFlow).call(n,t,a)}function Iae(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Hq.peek=Rae;function Hq(t,e,n,a){const i=Iae(n),s=n.enter("strong"),o=n.createTracker(a),l=o.move(i+i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),f=yw(a.before.charCodeAt(a.before.length-1),d,i);f.inside&&(c=Pv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),g=yw(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Pv(p));const x=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function Rae(t,e,n){return n.options.strong||"*"}function Lae(t,e,n,a){return n.safe(t.value,a)}function Fae(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function $ae(t,e,n){const a=(Vq(n)+(n.options.ruleSpaces?" ":"")).repeat(Fae(n));return n.options.ruleSpaces?a.slice(0,-1):a}const Gq={blockquote:lae,break:mR,code:pae,definition:gae,emphasis:Rq,hardBreak:mR,heading:bae,html:Lq,image:Fq,imageReference:$q,inlineCode:Bq,link:qq,linkReference:Uq,list:Aae,listItem:Pae,paragraph:Oae,root:Mae,strong:Hq,text:Lae,thematicBreak:$ae};function Bae(){return{enter:{table:zae,tableData:gR,tableHeader:gR,tableRow:Uae},exit:{codeText:Vae,table:qae,tableData:xC,tableHeader:xC,tableRow:xC}}}function zae(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function qae(t){this.exit(t),this.data.inTable=void 0}function Uae(t){this.enter({type:"tableRow",children:[]},t)}function xC(t){this.exit(t)}function gR(t){this.enter({type:"tableCell",children:[]},t)}function Vae(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Hae));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Hae(t,e){return e==="|"?e:t}function Gae(t){const e=t||{},n=e.tableCellPadding,a=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:o,tableCell:c,tableRow:l}};function o(x,b,j,S){return d(f(x,j,S),x.align)}function l(x,b,j,S){const _=p(x,j,S),T=d([_]);return T.slice(0,T.indexOf(`
`))}function c(x,b,j,S){const _=j.enter("tableCell"),T=j.enter("phrasing"),C=j.containerPhrasing(x,{...S,before:s,after:s});return T(),_(),C}function d(x,b){return sae(x,{align:b,alignDelimiters:a,padding:n,stringLength:i})}function f(x,b,j){const S=x.children;let _=-1;const T=[],C=b.enter("table");for(;++_<S.length;)T[_]=p(S[_],b,j);return C(),T}function p(x,b,j){const S=x.children;let _=-1;const T=[],C=b.enter("tableRow");for(;++_<S.length;)T[_]=c(S[_],x,b,j);return C(),T}function g(x,b,j){let S=Gq.inlineCode(x,b,j);return j.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function Wae(){return{exit:{taskListCheckValueChecked:yR,taskListCheckValueUnchecked:yR,paragraph:Kae}}}function Yae(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Qae}}}function yR(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Kae(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const a=n.children[0];if(a&&a.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const l=i[s];if(l.type==="paragraph"){o=l;break}}o===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}}this.exit(t)}function Qae(t,e,n,a){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(a);s&&l.move(o);let c=Gq.listItem(t,e,n,{...a,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),c;function d(f){return f+o}}function Xae(){return[Are(),Qre(),eae(),Bae(),Wae()]}function Jae(t){return{extensions:[Ere(),Xre(t),tae(),Gae(t),Yae()]}}const Zae={tokenize:iie,partial:!0},Wq={tokenize:sie,partial:!0},Yq={tokenize:oie,partial:!0},Kq={tokenize:lie,partial:!0},eie={tokenize:cie,partial:!0},Qq={name:"wwwAutolink",tokenize:rie,previous:Jq},Xq={name:"protocolAutolink",tokenize:aie,previous:Zq},qc={name:"emailAutolink",tokenize:nie,previous:eU},Il={};function tie(){return{text:Il}}let Lh=48;for(;Lh<123;)Il[Lh]=qc,Lh++,Lh===58?Lh=65:Lh===91&&(Lh=97);Il[43]=qc;Il[45]=qc;Il[46]=qc;Il[95]=qc;Il[72]=[qc,Xq];Il[104]=[qc,Xq];Il[87]=[qc,Qq];Il[119]=[qc,Qq];function nie(t,e,n){const a=this;let i,s;return o;function o(p){return!EE(p)||!eU.call(a,a.previous)||sD(a.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(p))}function l(p){return EE(p)?(t.consume(p),l):p===64?(t.consume(p),c):n(p)}function c(p){return p===46?t.check(eie,f,d)(p):p===45||p===95||ui(p)?(s=!0,t.consume(p),c):f(p)}function d(p){return t.consume(p),i=!0,c}function f(p){return s&&i&&Pi(a.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function rie(t,e,n){const a=this;return i;function i(o){return o!==87&&o!==119||!Jq.call(a,a.previous)||sD(a.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Zae,t.attempt(Wq,t.attempt(Yq,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function aie(t,e,n){const a=this;let i="",s=!1;return o;function o(p){return(p===72||p===104)&&Zq.call(a,a.previous)&&!sD(a.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),t.consume(p),l):n(p)}function l(p){if(Pi(p)&&i.length<5)return i+=String.fromCodePoint(p),t.consume(p),l;if(p===58){const g=i.toLowerCase();if(g==="http"||g==="https")return t.consume(p),c}return n(p)}function c(p){return p===47?(t.consume(p),s?d:(s=!0,c)):n(p)}function d(p){return p===null||pw(p)||_r(p)||vf(p)||$N(p)?n(p):t.attempt(Wq,t.attempt(Yq,f),n)(p)}function f(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function iie(t,e,n){let a=0;return i;function i(o){return(o===87||o===119)&&a<3?(a++,t.consume(o),i):o===46&&a===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function sie(t,e,n){let a,i,s;return o;function o(d){return d===46||d===95?t.check(Kq,c,l)(d):d===null||_r(d)||vf(d)||d!==45&&$N(d)?c(d):(s=!0,t.consume(d),o)}function l(d){return d===95?a=!0:(i=a,a=void 0),t.consume(d),o}function c(d){return i||a||!s?n(d):e(d)}}function oie(t,e){let n=0,a=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&a<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Kq,e,s)(o):o===null||_r(o)||vf(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&a++,t.consume(o),i}}function lie(t,e,n){return a;function a(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),a):l===38?(t.consume(l),s):l===93?(t.consume(l),i):l===60||l===null||_r(l)||vf(l)?e(l):n(l)}function i(l){return l===null||l===40||l===91||_r(l)||vf(l)?e(l):a(l)}function s(l){return Pi(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),a):Pi(l)?(t.consume(l),o):n(l)}}function cie(t,e,n){return a;function a(s){return t.consume(s),i}function i(s){return ui(s)?n(s):e(s)}}function Jq(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||_r(t)}function Zq(t){return!Pi(t)}function eU(t){return!(t===47||EE(t))}function EE(t){return t===43||t===45||t===46||t===95||ui(t)}function sD(t){let e=t.length,n=!1;for(;e--;){const a=t[e][1];if((a.type==="labelLink"||a.type==="labelImage")&&!a._balanced){n=!0;break}if(a._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const uie={tokenize:xie,partial:!0};function die(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:mie,continuation:{tokenize:gie},exit:yie}},text:{91:{name:"gfmFootnoteCall",tokenize:pie},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:hie,resolveTo:fie}}}}function hie(t,e,n){const a=this;let i=a.events.length;const s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let o;for(;i--;){const c=a.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const d=Do(a.sliceSerialize({start:o.end,end:a.now()}));return d.codePointAt(0)!==94||!s.includes(d.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function fie(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const a={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",a,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",a,e]];return t.splice(n,t.length-n+1,...l),t}function pie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s=0,o;return l;function l(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(s>999||p===93&&!o||p===null||p===91||_r(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return i.includes(Do(a.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return _r(p)||(o=!0),s++,t.consume(p),p===92?f:d}function f(p){return p===91||p===92||p===93?(t.consume(p),s++,d):d(p)}}function mie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(b){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(b){return b===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(b)}function f(b){if(o>999||b===93&&!l||b===null||b===91||_r(b))return n(b);if(b===93){t.exit("chunkString");const j=t.exit("gfmFootnoteDefinitionLabelString");return s=Do(a.sliceSerialize(j)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return _r(b)||(l=!0),o++,t.consume(b),b===92?p:f}function p(b){return b===91||b===92||b===93?(t.consume(b),o++,f):f(b)}function g(b){return b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),i.includes(s)||i.push(s),zn(t,x,"gfmFootnoteDefinitionWhitespace")):n(b)}function x(b){return e(b)}}function gie(t,e,n){return t.check(Pb,e,t.attempt(uie,e,n))}function yie(t){t.exit("gfmFootnoteDefinition")}function xie(t,e,n){const a=this;return zn(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function vie(t){let n=(t||{}).singleTilde;const a={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}};function i(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let d=c;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[c][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[c][1].start)},g=[["enter",f,l],["enter",o[d][1],l],["exit",o[d][1],l],["enter",p,l]],x=l.parser.constructs.insideSpan.null;x&&Ts(g,g.length,0,BN(x,o.slice(d+1,c),l)),Ts(g,g.length,0,[["exit",p,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Ts(o,d-1,c-d+3,g),c=d+g.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const d=this.previous,f=this.events;let p=0;return g;function g(b){return d===126&&f[f.length-1][1].type!=="characterEscape"?c(b):(o.enter("strikethroughSequenceTemporary"),x(b))}function x(b){const j=tg(d);if(b===126)return p>1?c(b):(o.consume(b),p++,x);if(p<2&&!n)return c(b);const S=o.exit("strikethroughSequenceTemporary"),_=tg(b);return S._open=!_||_===2&&!!j,S._close=!j||j===2&&!!_,l(b)}}}class bie{constructor(){this.map=[]}add(e,n,a){jie(this,e,n,a)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const a=[];for(;n>0;)n-=1,a.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];a.push(e.slice()),e.length=0;let i=a.pop();for(;i;){for(const s of i)e.push(s);i=a.pop()}this.map.length=0}}function jie(t,e,n,a){let i=0;if(!(n===0&&a.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...a);return}i+=1}t.map.push([e,n,a])}}function wie(t,e){let n=!1;const a=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&a.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=a.length-1;a[s]=a[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return a}function Nie(){return{flow:{null:{name:"table",tokenize:Sie,resolveAll:_ie}}}}function Sie(t,e,n){const a=this;let i=0,s=0,o;return l;function l($){let L=a.events.length-1;for(;L>-1;){const te=a.events[L][1].type;if(te==="lineEnding"||te==="linePrefix")L--;else break}const V=L>-1?a.events[L][1].type:null,H=V==="tableHead"||V==="tableRow"?O:c;return H===O&&a.parser.lazy[a.now().line]?n($):H($)}function c($){return t.enter("tableHead"),t.enter("tableRow"),d($)}function d($){return $===124||(o=!0,s+=1),f($)}function f($){return $===null?n($):Wt($)?s>1?(s=0,a.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),x):n($):En($)?zn(t,f,"whitespace")($):(s+=1,o&&(o=!1,i+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,f):(t.enter("data"),p($)))}function p($){return $===null||$===124||_r($)?(t.exit("data"),f($)):(t.consume($),$===92?g:p)}function g($){return $===92||$===124?(t.consume($),p):p($)}function x($){return a.interrupt=!1,a.parser.lazy[a.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,En($)?zn(t,b,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):b($))}function b($){return $===45||$===58?S($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),j):k($)}function j($){return En($)?zn(t,S,"whitespace")($):S($)}function S($){return $===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),_):$===45?(s+=1,_($)):$===null||Wt($)?P($):k($)}function _($){return $===45?(t.enter("tableDelimiterFiller"),T($)):k($)}function T($){return $===45?(t.consume($),T):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C($))}function C($){return En($)?zn(t,P,"whitespace")($):P($)}function P($){return $===124?b($):$===null||Wt($)?!o||i!==s?k($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):k($)}function k($){return n($)}function O($){return t.enter("tableRow"),I($)}function I($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),I):$===null||Wt($)?(t.exit("tableRow"),e($)):En($)?zn(t,I,"whitespace")($):(t.enter("data"),F($))}function F($){return $===null||$===124||_r($)?(t.exit("data"),I($)):(t.consume($),$===92?B:F)}function B($){return $===92||$===124?(t.consume($),F):F($)}}function _ie(t,e){let n=-1,a=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,d,f,p;const g=new bie;for(;++n<t.length;){const x=t[n],b=x[1];x[0]==="enter"?b.type==="tableHead"?(l=!1,c!==0&&(xR(g,e,c,d,f),f=void 0,c=0),d={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",d,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(a=!0,p=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",f,e]])),i=b.type==="tableDelimiterRow"?2:f?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(a=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=yj(g,e,s,i,void 0,p),s=[0,0,0,0]),o[2]=n)):b.type==="tableCellDivider"&&(a?a=!1:(s[1]!==0&&(o[0]=o[1],p=yj(g,e,s,i,void 0,p)),s=o,o=[s[1],n,0,0])):b.type==="tableHead"?(l=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],p=yj(g,e,s,i,n,p)):o[1]!==0&&(p=yj(g,e,o,i,n,p)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&xR(g,e,c,d,f),g.consume(e.events),n=-1;++n<e.events.length;){const x=e.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=wie(e.events,n))}return t}function yj(t,e,n,a,i,s){const o=a===1?"tableHeader":a===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},_m(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=_m(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const d=_m(e.events,n[2]),f=_m(e.events,n[3]),p={type:l,start:Object.assign({},d),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",p,e]]),a!==2){const g=e.events[n[2]],x=e.events[n[3]];if(g[1].end=Object.assign({},x[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,j=n[3]-n[2]-1;t.add(b,j,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return i!==void 0&&(s.end=Object.assign({},_m(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function xR(t,e,n,a,i){const s=[],o=_m(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),a.end=Object.assign({},o),s.push(["exit",a,e]),t.add(n+1,0,s)}function _m(t,e){const n=t[e],a=n[0]==="enter"?"start":"end";return n[1][a]}const Cie={name:"tasklistCheck",tokenize:kie};function Tie(){return{text:{91:Cie}}}function kie(t,e,n){const a=this;return i;function i(c){return a.previous!==null||!a._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return _r(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Wt(c)?e(c):En(c)?t.check({tokenize:Aie},e,n)(c):n(c)}}function Aie(t,e,n){return zn(t,a,"whitespace");function a(i){return i===null?n(i):e(i)}}function Eie(t){return dq([tie(),die(),vie(t),Nie(),Tie()])}const Pie={};function jf(t){const e=this,n=t||Pie,a=e.data(),i=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),o=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);i.push(Eie(n)),s.push(Xae()),o.push(Jae(n))}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Oie,Die;function Mie(){return{geminiUrl:Oie,vertexUrl:Die}}function Iie(t,e,n){var a,i,s;if(!(!((a=t.httpOptions)===null||a===void 0)&&a.baseUrl)){const o=Mie();return t.vertexai?(i=o.vertexUrl)!==null&&i!==void 0?i:e:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Db{}function sn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(a,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function D(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];D(f,e.slice(s+1),n[d])}else for(const d of c)D(d,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];D(c[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const a=e[e.length-1],i=t[a];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else t[a]=n}function E(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const a=e[n];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(o=>E(o,e.slice(n+1))):void 0}else return}else t=t[a]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tU(t,e){const n=Vr(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function nU(t,e){return Array.isArray(e)?e.map(n=>xw(t,n)):[xw(t,e)]}function xw(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Rie(t,e){const n=xw(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Lie(t,e){const n=xw(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function vR(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function rU(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>vR(t,n)):[vR(t,e)]}function PE(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function bR(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function jR(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ts(t,e){if(e==null)throw new Error("ContentUnion is required");return PE(e)?e:{role:"user",parts:rU(t,e)}}function aU(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const a=ts(t,n);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(t.isVertexAI()){const n=ts(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ts(t,n)):[ts(t,e)]}function fd(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(bR(e)||jR(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ts(t,e)]}const n=[],a=[],i=PE(e[0]);for(const s of e){const o=PE(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)n.push(s);else{if(bR(s)||jR(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");a.push(s)}}return i||n.push({role:"user",parts:rU(t,a)}),n}function iU(t,e){return e}function sU(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function VN(t,e){return e}function HN(t,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function Fie(t,e,n,a=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===a;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function pd(t,e){if(typeof e!="string")throw new Error("name must be a string");return Fie(t,e,"cachedContents")}function oU(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function md(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function $ie(t){return t!=null&&typeof t=="object"&&"name"in t}function Bie(t){return t!=null&&typeof t=="object"&&"video"in t}function zie(t){return t!=null&&typeof t=="object"&&"uri"in t}function lU(t,e){var n;let a;if($ie(e)&&(a=e.name),!(zie(e)&&(a=e.uri,a===void 0))&&!(Bie(e)&&(a=(n=e.video)===null||n===void 0?void 0:n.uri,a===void 0))){if(typeof e=="string"&&(a=e),a===void 0)throw new Error("Could not extract file name from the provided input.");if(a.startsWith("https://")){const s=a.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${a}`);a=s[0]}else a.startsWith("files/")&&(a=a.split("files/")[1]);return a}}function cU(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function uU(t,e){for(const n of["models","tunedModels","publisherModels"])if(qie(e,n))return e[n];return[]}function qie(t,e){return t!==null&&typeof t=="object"&&e in t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uie(t,e){const n={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=E(e,["data"]);a!=null&&D(n,["data"],a);const i=E(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function Vie(t,e){const n={};if(E(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const i=E(e,["inlineData"]);i!=null&&D(n,["inlineData"],Uie(t,i));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function wR(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Vie(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function Hie(){return{}}function Gie(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function Wie(t,e){const n={},a=E(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],Gie(t,a)),n}function Yie(t,e){const n={};if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");E(e,["googleSearch"])!=null&&D(n,["googleSearch"],Hie());const i=E(e,["googleSearchRetrieval"]);if(i!=null&&D(n,["googleSearchRetrieval"],Wie(t,i)),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(E(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=E(e,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=E(e,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function Kie(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["allowedFunctionNames"]);return i!=null&&D(n,["allowedFunctionNames"],i),n}function Qie(t,e){const n={},a=E(e,["functionCallingConfig"]);if(a!=null&&D(n,["functionCallingConfig"],Kie(t,a)),E(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function Xie(t,e,n){const a={},i=E(e,["ttl"]);n!==void 0&&i!=null&&D(n,["ttl"],i);const s=E(e,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=E(e,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=E(e,["contents"]);if(n!==void 0&&l!=null){let p=fd(t,l);Array.isArray(p)&&(p=p.map(g=>wR(t,g))),D(n,["contents"],p)}const c=E(e,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],wR(t,ts(t,c)));const d=E(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>Yie(t,g))),D(n,["tools"],p)}const f=E(e,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],Qie(t,f)),a}function Jie(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["model"],tU(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],Xie(t,i,n)),n}function Zie(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","name"],pd(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function ese(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","name"],pd(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function tse(t,e,n){const a={},i=E(e,["ttl"]);n!==void 0&&i!=null&&D(n,["ttl"],i);const s=E(e,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),a}function nse(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","name"],pd(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],tse(t,i,n)),n}function rse(t,e,n){const a={},i=E(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=E(e,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),a}function ase(t,e){const n={},a=E(e,["config"]);return a!=null&&D(n,["config"],rse(t,a,n)),n}function ise(t,e){const n={},a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=E(e,["data"]);i!=null&&D(n,["data"],i);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function sse(t,e){const n={},a=E(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],ise(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function NR(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>sse(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function ose(){return{}}function lse(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function cse(t,e){const n={},a=E(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],lse(t,a)),n}function use(){return{}}function dse(t,e){const n={},a=E(e,["apiKeyString"]);return a!=null&&D(n,["apiKeyString"],a),n}function hse(t,e){const n={},a=E(e,["apiKeyConfig"]);a!=null&&D(n,["apiKeyConfig"],dse(t,a));const i=E(e,["authType"]);i!=null&&D(n,["authType"],i);const s=E(e,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=E(e,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=E(e,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=E(e,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function fse(t,e){const n={},a=E(e,["authConfig"]);return a!=null&&D(n,["authConfig"],hse(t,a)),n}function pse(t,e){const n={},a=E(e,["retrieval"]);a!=null&&D(n,["retrieval"],a),E(e,["googleSearch"])!=null&&D(n,["googleSearch"],ose());const s=E(e,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],cse(t,s)),E(e,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],use());const l=E(e,["googleMaps"]);l!=null&&D(n,["googleMaps"],fse(t,l));const c=E(e,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const d=E(e,["functionDeclarations"]);return d!=null&&D(n,["functionDeclarations"],d),n}function mse(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["allowedFunctionNames"]);return i!=null&&D(n,["allowedFunctionNames"],i),n}function gse(t,e){const n={},a=E(e,["latitude"]);a!=null&&D(n,["latitude"],a);const i=E(e,["longitude"]);return i!=null&&D(n,["longitude"],i),n}function yse(t,e){const n={},a=E(e,["latLng"]);return a!=null&&D(n,["latLng"],gse(t,a)),n}function xse(t,e){const n={},a=E(e,["functionCallingConfig"]);a!=null&&D(n,["functionCallingConfig"],mse(t,a));const i=E(e,["retrievalConfig"]);return i!=null&&D(n,["retrievalConfig"],yse(t,i)),n}function vse(t,e,n){const a={},i=E(e,["ttl"]);n!==void 0&&i!=null&&D(n,["ttl"],i);const s=E(e,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=E(e,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=E(e,["contents"]);if(n!==void 0&&l!=null){let p=fd(t,l);Array.isArray(p)&&(p=p.map(g=>NR(t,g))),D(n,["contents"],p)}const c=E(e,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],NR(t,ts(t,c)));const d=E(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>pse(t,g))),D(n,["tools"],p)}const f=E(e,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],xse(t,f)),a}function bse(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["model"],tU(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],vse(t,i,n)),n}function jse(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","name"],pd(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function wse(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","name"],pd(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function Nse(t,e,n){const a={},i=E(e,["ttl"]);n!==void 0&&i!=null&&D(n,["ttl"],i);const s=E(e,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),a}function Sse(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","name"],pd(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],Nse(t,i,n)),n}function _se(t,e,n){const a={},i=E(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=E(e,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),a}function Cse(t,e){const n={},a=E(e,["config"]);return a!=null&&D(n,["config"],_se(t,a,n)),n}function Jj(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=E(e,["model"]);s!=null&&D(n,["model"],s);const o=E(e,["createTime"]);o!=null&&D(n,["createTime"],o);const l=E(e,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=E(e,["expireTime"]);c!=null&&D(n,["expireTime"],c);const d=E(e,["usageMetadata"]);return d!=null&&D(n,["usageMetadata"],d),n}function Tse(){return{}}function kse(t,e){const n={},a=E(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=E(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Jj(t,o))),D(n,["cachedContents"],s)}return n}function Zj(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=E(e,["model"]);s!=null&&D(n,["model"],s);const o=E(e,["createTime"]);o!=null&&D(n,["createTime"],o);const l=E(e,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=E(e,["expireTime"]);c!=null&&D(n,["expireTime"],c);const d=E(e,["usageMetadata"]);return d!=null&&D(n,["usageMetadata"],d),n}function Ase(){return{}}function Ese(t,e){const n={},a=E(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=E(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Zj(t,o))),D(n,["cachedContents"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ng;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ng||(ng={}));class GN{constructor(e,n,a,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,a,i)}init(e,n,a){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};a?typeof a=="object"?o=Object.assign({},a):o=a:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var SR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(SR||(SR={}));var _R;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(_R||(_R={}));var CR;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(CR||(CR={}));var TR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(TR||(TR={}));var kR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(kR||(kR={}));var AR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(AR||(AR={}));var ER;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ER||(ER={}));var rg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"})(rg||(rg={}));var PR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY"})(PR||(PR={}));var OR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(OR||(OR={}));var DR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(DR||(DR={}));var MR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(MR||(MR={}));var IR;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(IR||(IR={}));var cd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(cd||(cd={}));var RR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(RR||(RR={}));var OE;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(OE||(OE={}));var LR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(LR||(LR={}));var FR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(FR||(FR={}));var $R;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})($R||($R={}));var BR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(BR||(BR={}));var zR;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(zR||(zR={}));var qR;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(qR||(qR={}));var UR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(UR||(UR={}));var VR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(VR||(VR={}));var HR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(HR||(HR={}));var GR;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(GR||(GR={}));var WR;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(WR||(WR={}));var YR;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(YR||(YR={}));var KR;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(KR||(KR={}));var QR;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(QR||(QR={}));var XR;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(XR||(XR={}));var JR;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JR||(JR={}));var ZR;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ZR||(ZR={}));var e4;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(e4||(e4={}));class xj{get text(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const g of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,b]of Object.entries(g))x!=="text"&&x!=="thought"&&(b!==null||b!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&f.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,a,i,s,o,l,c,d;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,a,i,s,o,l,c,d;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class t4{}class n4{}class Pse{}class Ose{}class r4{}class a4{}class i4{}class Dse{}class s4{}class o4{}class l4{}class Mse{}class DE{constructor(e){const n={};for(const a of e.headers.entries())n[a[0]]=a[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ise{}class Rse{}class Lse{get text(){var e,n,a;let i="",s=!1;const o=[];for(const l of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,i+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,a;let i="";const s=[];for(const o of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fse extends Db{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new GN(ng.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(n),n)}async create(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=bse(this.apiClient,e);return l=sn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}else{const d=Jie(this.apiClient,e);return l=sn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Jj(this.apiClient,f))}}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=jse(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}else{const d=Zie(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Jj(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=wse(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Ase(),p=new o4;return Object.assign(p,f),p})}else{const d=ese(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Tse(),p=new o4;return Object.assign(p,f),p})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Sse(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}else{const d=nse(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Jj(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Cse(this.apiClient,e);return l=sn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Ese(this.apiClient,f),g=new l4;return Object.assign(g,p),g})}else{const d=ase(this.apiClient,e);return l=sn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=kse(this.apiClient,f),g=new l4;return Object.assign(g,p),g})}}}function c4(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],a=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function li(t){return this instanceof li?(this.v=t,this):new li(t)}function vw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(x){return function(b){return Promise.resolve(b).then(x,p)}}function l(x,b){a[x]&&(i[x]=function(j){return new Promise(function(S,_){s.push([x,j,S,_])>1||c(x,j)})},b&&(i[x]=b(i[x])))}function c(x,b){try{d(a[x](b))}catch(j){g(s[0][3],j)}}function d(x){x.value instanceof li?Promise.resolve(x.value.v).then(f,p):g(s[0][2],x)}function f(x){c("next",x)}function p(x){c("throw",x)}function g(x,b){x(b),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ME(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof c4=="function"?c4(t):t[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(s){n[s]=t[s]&&function(o){return new Promise(function(l,c){o=t[s](o),i(l,c,o.done,o.value)})}}function i(s,o,l,c){Promise.resolve(c).then(function(d){s({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $se(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:dU(n)}function dU(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function Bse(t){if(t.length!==0){if(t[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function zse(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let a=0,i=t[0];for(;a<n;)if(t[a].role==="user")i=t[a],a++;else{const s=[];let o=!0;for(;a<n&&t[a].role==="model";)s.push(t[a]),o&&!dU(t[a])&&(o=!1),a++;o&&(e.push(i),e.push(...s))}return e}class qse{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Use(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class Use{constructor(e,n,a,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=a,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Bse(s)}async sendMessage(e){var n;await this.sendPromise;const a=ts(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o;const c=(o=(s=(await i).candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=c?[c]:[];this.recordHistory(a,d)})(),await this.sendPromise,i}async sendMessageStream(e){var n;await this.sendPromise;const a=ts(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,a)}getHistory(e=!1){return e?zse(this.history):this.history}processStreamResponse(e,n){var a,i;return vw(this,arguments,function*(){var o,l,c,d;const f=[];try{for(var p=!0,g=ME(e),x;x=yield li(g.next()),o=x.done,!o;p=!0){d=x.value,p=!1;const b=d;if($se(b)){const j=(i=(a=b.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content;j!==void 0&&f.push(j)}yield yield li(b)}}catch(b){l={error:b}}finally{try{!p&&!o&&(c=g.return)&&(yield li(c.call(g)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n){let a=[];n.length>0&&n.every(i=>i.role==="model")?a=n:a.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vse(t,e,n){const a={},i=E(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=E(e,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),a}function Hse(t,e){const n={},a=E(e,["config"]);return a!=null&&D(n,["config"],Vse(t,a,n)),n}function Gse(t,e){const n={},a=E(e,["details"]);a!=null&&D(n,["details"],a);const i=E(e,["message"]);i!=null&&D(n,["message"],i);const s=E(e,["code"]);return s!=null&&D(n,["code"],s),n}function Wse(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=E(e,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=E(e,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=E(e,["createTime"]);l!=null&&D(n,["createTime"],l);const c=E(e,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const d=E(e,["updateTime"]);d!=null&&D(n,["updateTime"],d);const f=E(e,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=E(e,["uri"]);p!=null&&D(n,["uri"],p);const g=E(e,["downloadUri"]);g!=null&&D(n,["downloadUri"],g);const x=E(e,["state"]);x!=null&&D(n,["state"],x);const b=E(e,["source"]);b!=null&&D(n,["source"],b);const j=E(e,["videoMetadata"]);j!=null&&D(n,["videoMetadata"],j);const S=E(e,["error"]);return S!=null&&D(n,["error"],Gse(t,S)),n}function Yse(t,e){const n={},a=E(e,["file"]);a!=null&&D(n,["file"],Wse(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function Kse(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","file"],lU(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function Qse(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","file"],lU(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function Xse(t,e){const n={},a=E(e,["details"]);a!=null&&D(n,["details"],a);const i=E(e,["message"]);i!=null&&D(n,["message"],i);const s=E(e,["code"]);return s!=null&&D(n,["code"],s),n}function IE(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=E(e,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=E(e,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=E(e,["createTime"]);l!=null&&D(n,["createTime"],l);const c=E(e,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const d=E(e,["updateTime"]);d!=null&&D(n,["updateTime"],d);const f=E(e,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=E(e,["uri"]);p!=null&&D(n,["uri"],p);const g=E(e,["downloadUri"]);g!=null&&D(n,["downloadUri"],g);const x=E(e,["state"]);x!=null&&D(n,["state"],x);const b=E(e,["source"]);b!=null&&D(n,["source"],b);const j=E(e,["videoMetadata"]);j!=null&&D(n,["videoMetadata"],j);const S=E(e,["error"]);return S!=null&&D(n,["error"],Xse(t,S)),n}function Jse(t,e){const n={},a=E(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=E(e,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>IE(t,o))),D(n,["files"],s)}return n}function Zse(){return{}}function eoe(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class toe extends Db{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new GN(ng.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>IE(this.apiClient,n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Hse(this.apiClient,e);return s=sn("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=Jse(this.apiClient,c),f=new Mse;return Object.assign(f,d),f})}}async createInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Yse(this.apiClient,e);return s=sn("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=Zse(),d=new Ise;return Object.assign(d,c),d})}}async get(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Kse(this.apiClient,e);return s=sn("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>IE(this.apiClient,c))}}async delete(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Qse(this.apiClient,e);return s=sn("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=eoe(),d=new Rse;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function noe(t,e){const n={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=E(e,["data"]);a!=null&&D(n,["data"],a);const i=E(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function roe(t,e){const n={},a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=E(e,["data"]);i!=null&&D(n,["data"],i);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function aoe(t,e){const n={};if(E(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const i=E(e,["inlineData"]);i!=null&&D(n,["inlineData"],noe(t,i));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function ioe(t,e){const n={},a=E(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],roe(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function soe(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>aoe(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function ooe(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>ioe(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function loe(){return{}}function coe(){return{}}function uoe(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function doe(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function hoe(t,e){const n={},a=E(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],uoe(t,a)),n}function foe(t,e){const n={},a=E(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],doe(t,a)),n}function poe(){return{}}function moe(t,e){const n={},a=E(e,["apiKeyString"]);return a!=null&&D(n,["apiKeyString"],a),n}function goe(t,e){const n={},a=E(e,["apiKeyConfig"]);a!=null&&D(n,["apiKeyConfig"],moe(t,a));const i=E(e,["authType"]);i!=null&&D(n,["authType"],i);const s=E(e,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=E(e,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=E(e,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=E(e,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function yoe(t,e){const n={},a=E(e,["authConfig"]);return a!=null&&D(n,["authConfig"],goe(t,a)),n}function xoe(t,e){const n={};if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");E(e,["googleSearch"])!=null&&D(n,["googleSearch"],loe());const i=E(e,["googleSearchRetrieval"]);if(i!=null&&D(n,["googleSearchRetrieval"],hoe(t,i)),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(E(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=E(e,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=E(e,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function voe(t,e){const n={},a=E(e,["retrieval"]);a!=null&&D(n,["retrieval"],a),E(e,["googleSearch"])!=null&&D(n,["googleSearch"],coe());const s=E(e,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],foe(t,s)),E(e,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],poe());const l=E(e,["googleMaps"]);l!=null&&D(n,["googleMaps"],yoe(t,l));const c=E(e,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const d=E(e,["functionDeclarations"]);return d!=null&&D(n,["functionDeclarations"],d),n}function boe(t,e){const n={},a=E(e,["handle"]);if(a!=null&&D(n,["handle"],a),E(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function joe(t,e){const n={},a=E(e,["handle"]);a!=null&&D(n,["handle"],a);const i=E(e,["transparent"]);return i!=null&&D(n,["transparent"],i),n}function u4(){return{}}function d4(){return{}}function woe(t,e){const n={},a=E(e,["disabled"]);a!=null&&D(n,["disabled"],a);const i=E(e,["startOfSpeechSensitivity"]);i!=null&&D(n,["startOfSpeechSensitivity"],i);const s=E(e,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=E(e,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=E(e,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function Noe(t,e){const n={},a=E(e,["disabled"]);a!=null&&D(n,["disabled"],a);const i=E(e,["startOfSpeechSensitivity"]);i!=null&&D(n,["startOfSpeechSensitivity"],i);const s=E(e,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=E(e,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=E(e,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function Soe(t,e){const n={},a=E(e,["automaticActivityDetection"]);a!=null&&D(n,["automaticActivityDetection"],woe(t,a));const i=E(e,["activityHandling"]);i!=null&&D(n,["activityHandling"],i);const s=E(e,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function _oe(t,e){const n={},a=E(e,["automaticActivityDetection"]);a!=null&&D(n,["automaticActivityDetection"],Noe(t,a));const i=E(e,["activityHandling"]);i!=null&&D(n,["activityHandling"],i);const s=E(e,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function Coe(t,e){const n={},a=E(e,["targetTokens"]);return a!=null&&D(n,["targetTokens"],a),n}function Toe(t,e){const n={},a=E(e,["targetTokens"]);return a!=null&&D(n,["targetTokens"],a),n}function koe(t,e){const n={},a=E(e,["triggerTokens"]);a!=null&&D(n,["triggerTokens"],a);const i=E(e,["slidingWindow"]);return i!=null&&D(n,["slidingWindow"],Coe(t,i)),n}function Aoe(t,e){const n={},a=E(e,["triggerTokens"]);a!=null&&D(n,["triggerTokens"],a);const i=E(e,["slidingWindow"]);return i!=null&&D(n,["slidingWindow"],Toe(t,i)),n}function Eoe(t,e,n){const a={},i=E(e,["generationConfig"]);n!==void 0&&i!=null&&D(n,["setup","generationConfig"],i);const s=E(e,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=E(e,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=E(e,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=E(e,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const d=E(e,["maxOutputTokens"]);n!==void 0&&d!=null&&D(n,["setup","generationConfig","maxOutputTokens"],d);const f=E(e,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=E(e,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const g=E(e,["speechConfig"]);n!==void 0&&g!=null&&D(n,["setup","generationConfig","speechConfig"],g);const x=E(e,["systemInstruction"]);n!==void 0&&x!=null&&D(n,["setup","systemInstruction"],soe(t,ts(t,x)));const b=E(e,["tools"]);if(n!==void 0&&b!=null){let P=HN(t,b);Array.isArray(P)&&(P=P.map(k=>xoe(t,VN(t,k)))),D(n,["setup","tools"],P)}const j=E(e,["sessionResumption"]);n!==void 0&&j!=null&&D(n,["setup","sessionResumption"],boe(t,j));const S=E(e,["inputAudioTranscription"]);n!==void 0&&S!=null&&D(n,["setup","inputAudioTranscription"],u4());const _=E(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],u4());const T=E(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],Soe(t,T));const C=E(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],koe(t,C)),a}function Poe(t,e,n){const a={},i=E(e,["generationConfig"]);n!==void 0&&i!=null&&D(n,["setup","generationConfig"],i);const s=E(e,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=E(e,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=E(e,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=E(e,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const d=E(e,["maxOutputTokens"]);n!==void 0&&d!=null&&D(n,["setup","generationConfig","maxOutputTokens"],d);const f=E(e,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=E(e,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const g=E(e,["speechConfig"]);n!==void 0&&g!=null&&D(n,["setup","generationConfig","speechConfig"],g);const x=E(e,["systemInstruction"]);n!==void 0&&x!=null&&D(n,["setup","systemInstruction"],ooe(t,ts(t,x)));const b=E(e,["tools"]);if(n!==void 0&&b!=null){let P=HN(t,b);Array.isArray(P)&&(P=P.map(k=>voe(t,VN(t,k)))),D(n,["setup","tools"],P)}const j=E(e,["sessionResumption"]);n!==void 0&&j!=null&&D(n,["setup","sessionResumption"],joe(t,j));const S=E(e,["inputAudioTranscription"]);n!==void 0&&S!=null&&D(n,["setup","inputAudioTranscription"],d4());const _=E(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],d4());const T=E(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],_oe(t,T));const C=E(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],Aoe(t,C)),a}function Ooe(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["setup","model"],Vr(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],Eoe(t,i,n)),n}function Doe(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["setup","model"],Vr(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],Poe(t,i,n)),n}function Moe(){return{}}function Ioe(){return{}}function Roe(){return{}}function Loe(){return{}}function Foe(t,e){const n={},a=E(e,["media"]);a!=null&&D(n,["mediaChunks"],nU(t,a));const i=E(e,["audio"]);i!=null&&D(n,["audio"],Lie(t,i));const s=E(e,["audioStreamEnd"]);s!=null&&D(n,["audioStreamEnd"],s);const o=E(e,["video"]);o!=null&&D(n,["video"],Rie(t,o));const l=E(e,["text"]);return l!=null&&D(n,["text"],l),E(e,["activityStart"])!=null&&D(n,["activityStart"],Moe()),E(e,["activityEnd"])!=null&&D(n,["activityEnd"],Roe()),n}function $oe(t,e){const n={},a=E(e,["media"]);if(a!=null&&D(n,["mediaChunks"],nU(t,a)),E(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=E(e,["audioStreamEnd"]);if(i!=null&&D(n,["audioStreamEnd"],i),E(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(E(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return E(e,["activityStart"])!=null&&D(n,["activityStart"],Ioe()),E(e,["activityEnd"])!=null&&D(n,["activityEnd"],Loe()),n}function Boe(){return{}}function zoe(){return{}}function qoe(t,e){const n={},a=E(e,["data"]);a!=null&&D(n,["data"],a);const i=E(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function Uoe(t,e){const n={},a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=E(e,["data"]);i!=null&&D(n,["data"],i);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Voe(t,e){const n={},a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const i=E(e,["inlineData"]);i!=null&&D(n,["inlineData"],qoe(t,i));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function Hoe(t,e){const n={},a=E(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],Uoe(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function Goe(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Voe(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function Woe(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Hoe(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function h4(t,e){const n={},a=E(e,["text"]);a!=null&&D(n,["text"],a);const i=E(e,["finished"]);return i!=null&&D(n,["finished"],i),n}function f4(t,e){const n={},a=E(e,["text"]);a!=null&&D(n,["text"],a);const i=E(e,["finished"]);return i!=null&&D(n,["finished"],i),n}function Yoe(t,e){const n={},a=E(e,["modelTurn"]);a!=null&&D(n,["modelTurn"],Goe(t,a));const i=E(e,["turnComplete"]);i!=null&&D(n,["turnComplete"],i);const s=E(e,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=E(e,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=E(e,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=E(e,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],h4(t,c));const d=E(e,["outputTranscription"]);return d!=null&&D(n,["outputTranscription"],h4(t,d)),n}function Koe(t,e){const n={},a=E(e,["modelTurn"]);a!=null&&D(n,["modelTurn"],Woe(t,a));const i=E(e,["turnComplete"]);i!=null&&D(n,["turnComplete"],i);const s=E(e,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=E(e,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=E(e,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=E(e,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],f4(t,c));const d=E(e,["outputTranscription"]);return d!=null&&D(n,["outputTranscription"],f4(t,d)),n}function Qoe(t,e){const n={},a=E(e,["id"]);a!=null&&D(n,["id"],a);const i=E(e,["args"]);i!=null&&D(n,["args"],i);const s=E(e,["name"]);return s!=null&&D(n,["name"],s),n}function Xoe(t,e){const n={},a=E(e,["args"]);a!=null&&D(n,["args"],a);const i=E(e,["name"]);return i!=null&&D(n,["name"],i),n}function Joe(t,e){const n={},a=E(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>Qoe(t,s))),D(n,["functionCalls"],i)}return n}function Zoe(t,e){const n={},a=E(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>Xoe(t,s))),D(n,["functionCalls"],i)}return n}function ele(t,e){const n={},a=E(e,["ids"]);return a!=null&&D(n,["ids"],a),n}function tle(t,e){const n={},a=E(e,["ids"]);return a!=null&&D(n,["ids"],a),n}function vj(t,e){const n={},a=E(e,["modality"]);a!=null&&D(n,["modality"],a);const i=E(e,["tokenCount"]);return i!=null&&D(n,["tokenCount"],i),n}function bj(t,e){const n={},a=E(e,["modality"]);a!=null&&D(n,["modality"],a);const i=E(e,["tokenCount"]);return i!=null&&D(n,["tokenCount"],i),n}function nle(t,e){const n={},a=E(e,["promptTokenCount"]);a!=null&&D(n,["promptTokenCount"],a);const i=E(e,["cachedContentTokenCount"]);i!=null&&D(n,["cachedContentTokenCount"],i);const s=E(e,["responseTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=E(e,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=E(e,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=E(e,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const d=E(e,["promptTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(b=>vj(t,b))),D(n,["promptTokensDetails"],x)}const f=E(e,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(b=>vj(t,b))),D(n,["cacheTokensDetails"],x)}const p=E(e,["responseTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>vj(t,b))),D(n,["responseTokensDetails"],x)}const g=E(e,["toolUsePromptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(b=>vj(t,b))),D(n,["toolUsePromptTokensDetails"],x)}return n}function rle(t,e){const n={},a=E(e,["promptTokenCount"]);a!=null&&D(n,["promptTokenCount"],a);const i=E(e,["cachedContentTokenCount"]);i!=null&&D(n,["cachedContentTokenCount"],i);const s=E(e,["candidatesTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=E(e,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=E(e,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=E(e,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const d=E(e,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(j=>bj(t,j))),D(n,["promptTokensDetails"],b)}const f=E(e,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(j=>bj(t,j))),D(n,["cacheTokensDetails"],b)}const p=E(e,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(j=>bj(t,j))),D(n,["responseTokensDetails"],b)}const g=E(e,["toolUsePromptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(j=>bj(t,j))),D(n,["toolUsePromptTokensDetails"],b)}const x=E(e,["trafficType"]);return x!=null&&D(n,["trafficType"],x),n}function ale(t,e){const n={},a=E(e,["timeLeft"]);return a!=null&&D(n,["timeLeft"],a),n}function ile(t,e){const n={},a=E(e,["timeLeft"]);return a!=null&&D(n,["timeLeft"],a),n}function sle(t,e){const n={},a=E(e,["newHandle"]);a!=null&&D(n,["newHandle"],a);const i=E(e,["resumable"]);i!=null&&D(n,["resumable"],i);const s=E(e,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function ole(t,e){const n={},a=E(e,["newHandle"]);a!=null&&D(n,["newHandle"],a);const i=E(e,["resumable"]);i!=null&&D(n,["resumable"],i);const s=E(e,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function lle(t,e){const n={};E(e,["setupComplete"])!=null&&D(n,["setupComplete"],Boe());const i=E(e,["serverContent"]);i!=null&&D(n,["serverContent"],Yoe(t,i));const s=E(e,["toolCall"]);s!=null&&D(n,["toolCall"],Joe(t,s));const o=E(e,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],ele(t,o));const l=E(e,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],nle(t,l));const c=E(e,["goAway"]);c!=null&&D(n,["goAway"],ale(t,c));const d=E(e,["sessionResumptionUpdate"]);return d!=null&&D(n,["sessionResumptionUpdate"],sle(t,d)),n}function cle(t,e){const n={};E(e,["setupComplete"])!=null&&D(n,["setupComplete"],zoe());const i=E(e,["serverContent"]);i!=null&&D(n,["serverContent"],Koe(t,i));const s=E(e,["toolCall"]);s!=null&&D(n,["toolCall"],Zoe(t,s));const o=E(e,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],tle(t,o));const l=E(e,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],rle(t,l));const c=E(e,["goAway"]);c!=null&&D(n,["goAway"],ile(t,c));const d=E(e,["sessionResumptionUpdate"]);return d!=null&&D(n,["sessionResumptionUpdate"],ole(t,d)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ule(t,e){const n={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=E(e,["data"]);a!=null&&D(n,["data"],a);const i=E(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function dle(t,e){const n={};if(E(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const i=E(e,["inlineData"]);i!=null&&D(n,["inlineData"],ule(t,i));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function WN(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>dle(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function hle(t,e){const n={};if(E(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=E(e,["category"]);a!=null&&D(n,["category"],a);const i=E(e,["threshold"]);return i!=null&&D(n,["threshold"],i),n}function fle(){return{}}function ple(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function mle(t,e){const n={},a=E(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],ple(t,a)),n}function gle(t,e){const n={};if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");E(e,["googleSearch"])!=null&&D(n,["googleSearch"],fle());const i=E(e,["googleSearchRetrieval"]);if(i!=null&&D(n,["googleSearchRetrieval"],mle(t,i)),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(E(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=E(e,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=E(e,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function yle(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["allowedFunctionNames"]);return i!=null&&D(n,["allowedFunctionNames"],i),n}function xle(t,e){const n={},a=E(e,["functionCallingConfig"]);if(a!=null&&D(n,["functionCallingConfig"],yle(t,a)),E(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function vle(t,e){const n={},a=E(e,["voiceName"]);return a!=null&&D(n,["voiceName"],a),n}function ble(t,e){const n={},a=E(e,["prebuiltVoiceConfig"]);return a!=null&&D(n,["prebuiltVoiceConfig"],vle(t,a)),n}function jle(t,e){const n={},a=E(e,["voiceConfig"]);a!=null&&D(n,["voiceConfig"],ble(t,a));const i=E(e,["languageCode"]);return i!=null&&D(n,["languageCode"],i),n}function wle(t,e){const n={},a=E(e,["includeThoughts"]);a!=null&&D(n,["includeThoughts"],a);const i=E(e,["thinkingBudget"]);return i!=null&&D(n,["thinkingBudget"],i),n}function Nle(t,e,n){const a={},i=E(e,["systemInstruction"]);n!==void 0&&i!=null&&D(n,["systemInstruction"],WN(t,ts(t,i)));const s=E(e,["temperature"]);s!=null&&D(a,["temperature"],s);const o=E(e,["topP"]);o!=null&&D(a,["topP"],o);const l=E(e,["topK"]);l!=null&&D(a,["topK"],l);const c=E(e,["candidateCount"]);c!=null&&D(a,["candidateCount"],c);const d=E(e,["maxOutputTokens"]);d!=null&&D(a,["maxOutputTokens"],d);const f=E(e,["stopSequences"]);f!=null&&D(a,["stopSequences"],f);const p=E(e,["responseLogprobs"]);p!=null&&D(a,["responseLogprobs"],p);const g=E(e,["logprobs"]);g!=null&&D(a,["logprobs"],g);const x=E(e,["presencePenalty"]);x!=null&&D(a,["presencePenalty"],x);const b=E(e,["frequencyPenalty"]);b!=null&&D(a,["frequencyPenalty"],b);const j=E(e,["seed"]);j!=null&&D(a,["seed"],j);const S=E(e,["responseMimeType"]);S!=null&&D(a,["responseMimeType"],S);const _=E(e,["responseSchema"]);if(_!=null&&D(a,["responseSchema"],iU(t,_)),E(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(E(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=E(e,["safetySettings"]);if(n!==void 0&&T!=null){let $=T;Array.isArray($)&&($=$.map(L=>hle(t,L))),D(n,["safetySettings"],$)}const C=E(e,["tools"]);if(n!==void 0&&C!=null){let $=HN(t,C);Array.isArray($)&&($=$.map(L=>gle(t,VN(t,L)))),D(n,["tools"],$)}const P=E(e,["toolConfig"]);if(n!==void 0&&P!=null&&D(n,["toolConfig"],xle(t,P)),E(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=E(e,["cachedContent"]);n!==void 0&&k!=null&&D(n,["cachedContent"],pd(t,k));const O=E(e,["responseModalities"]);O!=null&&D(a,["responseModalities"],O);const I=E(e,["mediaResolution"]);I!=null&&D(a,["mediaResolution"],I);const F=E(e,["speechConfig"]);if(F!=null&&D(a,["speechConfig"],jle(t,sU(t,F))),E(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=E(e,["thinkingConfig"]);return B!=null&&D(a,["thinkingConfig"],wle(t,B)),a}function p4(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["contents"]);if(i!=null){let o=fd(t,i);Array.isArray(o)&&(o=o.map(l=>WN(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["generationConfig"],Nle(t,s,n)),n}function Sle(t,e,n){const a={},i=E(e,["taskType"]);n!==void 0&&i!=null&&D(n,["requests[]","taskType"],i);const s=E(e,["title"]);n!==void 0&&s!=null&&D(n,["requests[]","title"],s);const o=E(e,["outputDimensionality"]);if(n!==void 0&&o!=null&&D(n,["requests[]","outputDimensionality"],o),E(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(E(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function _le(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["contents"]);i!=null&&D(n,["requests[]","content"],aU(t,i));const s=E(e,["config"]);s!=null&&D(n,["config"],Sle(t,s,n));const o=E(e,["model"]);return o!==void 0&&D(n,["requests[]","model"],Vr(t,o)),n}function Cle(t,e,n){const a={};if(E(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=E(e,["numberOfImages"]);n!==void 0&&i!=null&&D(n,["parameters","sampleCount"],i);const s=E(e,["aspectRatio"]);n!==void 0&&s!=null&&D(n,["parameters","aspectRatio"],s);const o=E(e,["guidanceScale"]);if(n!==void 0&&o!=null&&D(n,["parameters","guidanceScale"],o),E(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=E(e,["safetyFilterLevel"]);n!==void 0&&l!=null&&D(n,["parameters","safetySetting"],l);const c=E(e,["personGeneration"]);n!==void 0&&c!=null&&D(n,["parameters","personGeneration"],c);const d=E(e,["includeSafetyAttributes"]);n!==void 0&&d!=null&&D(n,["parameters","includeSafetyAttributes"],d);const f=E(e,["includeRaiReason"]);n!==void 0&&f!=null&&D(n,["parameters","includeRaiReason"],f);const p=E(e,["language"]);n!==void 0&&p!=null&&D(n,["parameters","language"],p);const g=E(e,["outputMimeType"]);n!==void 0&&g!=null&&D(n,["parameters","outputOptions","mimeType"],g);const x=E(e,["outputCompressionQuality"]);if(n!==void 0&&x!=null&&D(n,["parameters","outputOptions","compressionQuality"],x),E(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(E(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function Tle(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=E(e,["config"]);return s!=null&&D(n,["config"],Cle(t,s,n)),n}function kle(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","name"],Vr(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function Ale(t,e,n){const a={},i=E(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=E(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=E(e,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=E(e,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],cU(t,l)),a}function Ele(t,e){const n={},a=E(e,["config"]);return a!=null&&D(n,["config"],Ale(t,a,n)),n}function Ple(t,e,n){const a={},i=E(e,["displayName"]);n!==void 0&&i!=null&&D(n,["displayName"],i);const s=E(e,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=E(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),a}function Ole(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","name"],Vr(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],Ple(t,i,n)),n}function Dle(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","name"],Vr(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function Mle(t,e){const n={};if(E(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(E(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(E(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Ile(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["contents"]);if(i!=null){let o=fd(t,i);Array.isArray(o)&&(o=o.map(l=>WN(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["config"],Mle(t,s)),n}function Rle(t,e){const n={};if(E(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=E(e,["imageBytes"]);a!=null&&D(n,["bytesBase64Encoded"],md(t,a));const i=E(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function Lle(t,e,n){const a={},i=E(e,["numberOfVideos"]);if(n!==void 0&&i!=null&&D(n,["parameters","sampleCount"],i),E(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=E(e,["durationSeconds"]);if(n!==void 0&&s!=null&&D(n,["parameters","durationSeconds"],s),E(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=E(e,["aspectRatio"]);if(n!==void 0&&o!=null&&D(n,["parameters","aspectRatio"],o),E(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=E(e,["personGeneration"]);if(n!==void 0&&l!=null&&D(n,["parameters","personGeneration"],l),E(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=E(e,["negativePrompt"]);if(n!==void 0&&c!=null&&D(n,["parameters","negativePrompt"],c),E(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function Fle(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=E(e,["image"]);s!=null&&D(n,["instances[0]","image"],Rle(t,s));const o=E(e,["config"]);return o!=null&&D(n,["config"],Lle(t,o,n)),n}function $le(t,e){const n={},a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=E(e,["data"]);i!=null&&D(n,["data"],i);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Ble(t,e){const n={},a=E(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],$le(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function Lg(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Ble(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function zle(t,e){const n={},a=E(e,["featureSelectionPreference"]);return a!=null&&D(n,["featureSelectionPreference"],a),n}function qle(t,e){const n={},a=E(e,["method"]);a!=null&&D(n,["method"],a);const i=E(e,["category"]);i!=null&&D(n,["category"],i);const s=E(e,["threshold"]);return s!=null&&D(n,["threshold"],s),n}function Ule(){return{}}function Vle(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function Hle(t,e){const n={},a=E(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],Vle(t,a)),n}function Gle(){return{}}function Wle(t,e){const n={},a=E(e,["apiKeyString"]);return a!=null&&D(n,["apiKeyString"],a),n}function Yle(t,e){const n={},a=E(e,["apiKeyConfig"]);a!=null&&D(n,["apiKeyConfig"],Wle(t,a));const i=E(e,["authType"]);i!=null&&D(n,["authType"],i);const s=E(e,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=E(e,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=E(e,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=E(e,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function Kle(t,e){const n={},a=E(e,["authConfig"]);return a!=null&&D(n,["authConfig"],Yle(t,a)),n}function hU(t,e){const n={},a=E(e,["retrieval"]);a!=null&&D(n,["retrieval"],a),E(e,["googleSearch"])!=null&&D(n,["googleSearch"],Ule());const s=E(e,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],Hle(t,s)),E(e,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],Gle());const l=E(e,["googleMaps"]);l!=null&&D(n,["googleMaps"],Kle(t,l));const c=E(e,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const d=E(e,["functionDeclarations"]);return d!=null&&D(n,["functionDeclarations"],d),n}function Qle(t,e){const n={},a=E(e,["mode"]);a!=null&&D(n,["mode"],a);const i=E(e,["allowedFunctionNames"]);return i!=null&&D(n,["allowedFunctionNames"],i),n}function Xle(t,e){const n={},a=E(e,["latitude"]);a!=null&&D(n,["latitude"],a);const i=E(e,["longitude"]);return i!=null&&D(n,["longitude"],i),n}function Jle(t,e){const n={},a=E(e,["latLng"]);return a!=null&&D(n,["latLng"],Xle(t,a)),n}function Zle(t,e){const n={},a=E(e,["functionCallingConfig"]);a!=null&&D(n,["functionCallingConfig"],Qle(t,a));const i=E(e,["retrievalConfig"]);return i!=null&&D(n,["retrievalConfig"],Jle(t,i)),n}function ece(t,e){const n={},a=E(e,["voiceName"]);return a!=null&&D(n,["voiceName"],a),n}function tce(t,e){const n={},a=E(e,["prebuiltVoiceConfig"]);return a!=null&&D(n,["prebuiltVoiceConfig"],ece(t,a)),n}function nce(t,e){const n={},a=E(e,["voiceConfig"]);a!=null&&D(n,["voiceConfig"],tce(t,a));const i=E(e,["languageCode"]);return i!=null&&D(n,["languageCode"],i),n}function rce(t,e){const n={},a=E(e,["includeThoughts"]);a!=null&&D(n,["includeThoughts"],a);const i=E(e,["thinkingBudget"]);return i!=null&&D(n,["thinkingBudget"],i),n}function ace(t,e,n){const a={},i=E(e,["systemInstruction"]);n!==void 0&&i!=null&&D(n,["systemInstruction"],Lg(t,ts(t,i)));const s=E(e,["temperature"]);s!=null&&D(a,["temperature"],s);const o=E(e,["topP"]);o!=null&&D(a,["topP"],o);const l=E(e,["topK"]);l!=null&&D(a,["topK"],l);const c=E(e,["candidateCount"]);c!=null&&D(a,["candidateCount"],c);const d=E(e,["maxOutputTokens"]);d!=null&&D(a,["maxOutputTokens"],d);const f=E(e,["stopSequences"]);f!=null&&D(a,["stopSequences"],f);const p=E(e,["responseLogprobs"]);p!=null&&D(a,["responseLogprobs"],p);const g=E(e,["logprobs"]);g!=null&&D(a,["logprobs"],g);const x=E(e,["presencePenalty"]);x!=null&&D(a,["presencePenalty"],x);const b=E(e,["frequencyPenalty"]);b!=null&&D(a,["frequencyPenalty"],b);const j=E(e,["seed"]);j!=null&&D(a,["seed"],j);const S=E(e,["responseMimeType"]);S!=null&&D(a,["responseMimeType"],S);const _=E(e,["responseSchema"]);_!=null&&D(a,["responseSchema"],iU(t,_));const T=E(e,["routingConfig"]);T!=null&&D(a,["routingConfig"],T);const C=E(e,["modelSelectionConfig"]);C!=null&&D(a,["modelConfig"],zle(t,C));const P=E(e,["safetySettings"]);if(n!==void 0&&P!=null){let te=P;Array.isArray(te)&&(te=te.map(X=>qle(t,X))),D(n,["safetySettings"],te)}const k=E(e,["tools"]);if(n!==void 0&&k!=null){let te=HN(t,k);Array.isArray(te)&&(te=te.map(X=>hU(t,VN(t,X)))),D(n,["tools"],te)}const O=E(e,["toolConfig"]);n!==void 0&&O!=null&&D(n,["toolConfig"],Zle(t,O));const I=E(e,["labels"]);n!==void 0&&I!=null&&D(n,["labels"],I);const F=E(e,["cachedContent"]);n!==void 0&&F!=null&&D(n,["cachedContent"],pd(t,F));const B=E(e,["responseModalities"]);B!=null&&D(a,["responseModalities"],B);const $=E(e,["mediaResolution"]);$!=null&&D(a,["mediaResolution"],$);const L=E(e,["speechConfig"]);L!=null&&D(a,["speechConfig"],nce(t,sU(t,L)));const V=E(e,["audioTimestamp"]);V!=null&&D(a,["audioTimestamp"],V);const H=E(e,["thinkingConfig"]);return H!=null&&D(a,["thinkingConfig"],rce(t,H)),a}function m4(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["contents"]);if(i!=null){let o=fd(t,i);Array.isArray(o)&&(o=o.map(l=>Lg(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["generationConfig"],ace(t,s,n)),n}function ice(t,e,n){const a={},i=E(e,["taskType"]);n!==void 0&&i!=null&&D(n,["instances[]","task_type"],i);const s=E(e,["title"]);n!==void 0&&s!=null&&D(n,["instances[]","title"],s);const o=E(e,["outputDimensionality"]);n!==void 0&&o!=null&&D(n,["parameters","outputDimensionality"],o);const l=E(e,["mimeType"]);n!==void 0&&l!=null&&D(n,["instances[]","mimeType"],l);const c=E(e,["autoTruncate"]);return n!==void 0&&c!=null&&D(n,["parameters","autoTruncate"],c),a}function sce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["contents"]);i!=null&&D(n,["instances[]","content"],aU(t,i));const s=E(e,["config"]);return s!=null&&D(n,["config"],ice(t,s,n)),n}function oce(t,e,n){const a={},i=E(e,["outputGcsUri"]);n!==void 0&&i!=null&&D(n,["parameters","storageUri"],i);const s=E(e,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=E(e,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=E(e,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=E(e,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const d=E(e,["seed"]);n!==void 0&&d!=null&&D(n,["parameters","seed"],d);const f=E(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=E(e,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const g=E(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&D(n,["parameters","includeSafetyAttributes"],g);const x=E(e,["includeRaiReason"]);n!==void 0&&x!=null&&D(n,["parameters","includeRaiReason"],x);const b=E(e,["language"]);n!==void 0&&b!=null&&D(n,["parameters","language"],b);const j=E(e,["outputMimeType"]);n!==void 0&&j!=null&&D(n,["parameters","outputOptions","mimeType"],j);const S=E(e,["outputCompressionQuality"]);n!==void 0&&S!=null&&D(n,["parameters","outputOptions","compressionQuality"],S);const _=E(e,["addWatermark"]);n!==void 0&&_!=null&&D(n,["parameters","addWatermark"],_);const T=E(e,["enhancePrompt"]);return n!==void 0&&T!=null&&D(n,["parameters","enhancePrompt"],T),a}function lce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=E(e,["config"]);return s!=null&&D(n,["config"],oce(t,s,n)),n}function oD(t,e){const n={},a=E(e,["gcsUri"]);a!=null&&D(n,["gcsUri"],a);const i=E(e,["imageBytes"]);i!=null&&D(n,["bytesBase64Encoded"],md(t,i));const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function cce(t,e){const n={},a=E(e,["maskMode"]);a!=null&&D(n,["maskMode"],a);const i=E(e,["segmentationClasses"]);i!=null&&D(n,["maskClasses"],i);const s=E(e,["maskDilation"]);return s!=null&&D(n,["dilation"],s),n}function uce(t,e){const n={},a=E(e,["controlType"]);a!=null&&D(n,["controlType"],a);const i=E(e,["enableControlImageComputation"]);return i!=null&&D(n,["computeControl"],i),n}function dce(t,e){const n={},a=E(e,["styleDescription"]);return a!=null&&D(n,["styleDescription"],a),n}function hce(t,e){const n={},a=E(e,["subjectType"]);a!=null&&D(n,["subjectType"],a);const i=E(e,["subjectDescription"]);return i!=null&&D(n,["subjectDescription"],i),n}function fce(t,e){const n={},a=E(e,["referenceImage"]);a!=null&&D(n,["referenceImage"],oD(t,a));const i=E(e,["referenceId"]);i!=null&&D(n,["referenceId"],i);const s=E(e,["referenceType"]);s!=null&&D(n,["referenceType"],s);const o=E(e,["maskImageConfig"]);o!=null&&D(n,["maskImageConfig"],cce(t,o));const l=E(e,["controlImageConfig"]);l!=null&&D(n,["controlImageConfig"],uce(t,l));const c=E(e,["styleImageConfig"]);c!=null&&D(n,["styleImageConfig"],dce(t,c));const d=E(e,["subjectImageConfig"]);return d!=null&&D(n,["subjectImageConfig"],hce(t,d)),n}function pce(t,e,n){const a={},i=E(e,["outputGcsUri"]);n!==void 0&&i!=null&&D(n,["parameters","storageUri"],i);const s=E(e,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=E(e,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=E(e,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=E(e,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const d=E(e,["seed"]);n!==void 0&&d!=null&&D(n,["parameters","seed"],d);const f=E(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=E(e,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const g=E(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&D(n,["parameters","includeSafetyAttributes"],g);const x=E(e,["includeRaiReason"]);n!==void 0&&x!=null&&D(n,["parameters","includeRaiReason"],x);const b=E(e,["language"]);n!==void 0&&b!=null&&D(n,["parameters","language"],b);const j=E(e,["outputMimeType"]);n!==void 0&&j!=null&&D(n,["parameters","outputOptions","mimeType"],j);const S=E(e,["outputCompressionQuality"]);n!==void 0&&S!=null&&D(n,["parameters","outputOptions","compressionQuality"],S);const _=E(e,["editMode"]);n!==void 0&&_!=null&&D(n,["parameters","editMode"],_);const T=E(e,["baseSteps"]);return n!==void 0&&T!=null&&D(n,["parameters","editConfig","baseSteps"],T),a}function mce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=E(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>fce(t,c))),D(n,["instances[0]","referenceImages"],l)}const o=E(e,["config"]);return o!=null&&D(n,["config"],pce(t,o,n)),n}function gce(t,e,n){const a={},i=E(e,["includeRaiReason"]);n!==void 0&&i!=null&&D(n,["parameters","includeRaiReason"],i);const s=E(e,["outputMimeType"]);n!==void 0&&s!=null&&D(n,["parameters","outputOptions","mimeType"],s);const o=E(e,["outputCompressionQuality"]);n!==void 0&&o!=null&&D(n,["parameters","outputOptions","compressionQuality"],o);const l=E(e,["numberOfImages"]);n!==void 0&&l!=null&&D(n,["parameters","sampleCount"],l);const c=E(e,["mode"]);return n!==void 0&&c!=null&&D(n,["parameters","mode"],c),a}function yce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["image"]);i!=null&&D(n,["instances[0]","image"],oD(t,i));const s=E(e,["upscaleFactor"]);s!=null&&D(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=E(e,["config"]);return o!=null&&D(n,["config"],gce(t,o,n)),n}function xce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","name"],Vr(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function vce(t,e,n){const a={},i=E(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=E(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=E(e,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=E(e,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],cU(t,l)),a}function bce(t,e){const n={},a=E(e,["config"]);return a!=null&&D(n,["config"],vce(t,a,n)),n}function jce(t,e,n){const a={},i=E(e,["displayName"]);n!==void 0&&i!=null&&D(n,["displayName"],i);const s=E(e,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=E(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),a}function wce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],jce(t,i,n)),n}function Nce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","name"],Vr(t,a));const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function Sce(t,e,n){const a={},i=E(e,["systemInstruction"]);n!==void 0&&i!=null&&D(n,["systemInstruction"],Lg(t,ts(t,i)));const s=E(e,["tools"]);if(n!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>hU(t,c))),D(n,["tools"],l)}const o=E(e,["generationConfig"]);return n!==void 0&&o!=null&&D(n,["generationConfig"],o),a}function _ce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["contents"]);if(i!=null){let o=fd(t,i);Array.isArray(o)&&(o=o.map(l=>Lg(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["config"],Sce(t,s,n)),n}function Cce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["contents"]);if(i!=null){let o=fd(t,i);Array.isArray(o)&&(o=o.map(l=>Lg(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["config"],s),n}function Tce(t,e,n){const a={},i=E(e,["numberOfVideos"]);n!==void 0&&i!=null&&D(n,["parameters","sampleCount"],i);const s=E(e,["outputGcsUri"]);n!==void 0&&s!=null&&D(n,["parameters","storageUri"],s);const o=E(e,["fps"]);n!==void 0&&o!=null&&D(n,["parameters","fps"],o);const l=E(e,["durationSeconds"]);n!==void 0&&l!=null&&D(n,["parameters","durationSeconds"],l);const c=E(e,["seed"]);n!==void 0&&c!=null&&D(n,["parameters","seed"],c);const d=E(e,["aspectRatio"]);n!==void 0&&d!=null&&D(n,["parameters","aspectRatio"],d);const f=E(e,["resolution"]);n!==void 0&&f!=null&&D(n,["parameters","resolution"],f);const p=E(e,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const g=E(e,["pubsubTopic"]);n!==void 0&&g!=null&&D(n,["parameters","pubsubTopic"],g);const x=E(e,["negativePrompt"]);n!==void 0&&x!=null&&D(n,["parameters","negativePrompt"],x);const b=E(e,["enhancePrompt"]);return n!==void 0&&b!=null&&D(n,["parameters","enhancePrompt"],b),a}function kce(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["_url","model"],Vr(t,a));const i=E(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=E(e,["image"]);s!=null&&D(n,["instances[0]","image"],oD(t,s));const o=E(e,["config"]);return o!=null&&D(n,["config"],Tce(t,o,n)),n}function Ace(t,e){const n={},a=E(e,["data"]);a!=null&&D(n,["data"],a);const i=E(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function Ece(t,e){const n={},a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const i=E(e,["inlineData"]);i!=null&&D(n,["inlineData"],Ace(t,i));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function Pce(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Ece(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function Oce(t,e){const n={},a=E(e,["citationSources"]);return a!=null&&D(n,["citations"],a),n}function Dce(t,e){const n={},a=E(e,["content"]);a!=null&&D(n,["content"],Pce(t,a));const i=E(e,["citationMetadata"]);i!=null&&D(n,["citationMetadata"],Oce(t,i));const s=E(e,["tokenCount"]);s!=null&&D(n,["tokenCount"],s);const o=E(e,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=E(e,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=E(e,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const d=E(e,["index"]);d!=null&&D(n,["index"],d);const f=E(e,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=E(e,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function g4(t,e){const n={},a=E(e,["candidates"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Dce(t,c))),D(n,["candidates"],l)}const i=E(e,["modelVersion"]);i!=null&&D(n,["modelVersion"],i);const s=E(e,["promptFeedback"]);s!=null&&D(n,["promptFeedback"],s);const o=E(e,["usageMetadata"]);return o!=null&&D(n,["usageMetadata"],o),n}function Mce(t,e){const n={},a=E(e,["values"]);return a!=null&&D(n,["values"],a),n}function Ice(){return{}}function Rce(t,e){const n={},a=E(e,["embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Mce(t,o))),D(n,["embeddings"],s)}return E(e,["metadata"])!=null&&D(n,["metadata"],Ice()),n}function Lce(t,e){const n={},a=E(e,["bytesBase64Encoded"]);a!=null&&D(n,["imageBytes"],md(t,a));const i=E(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function fU(t,e){const n={},a=E(e,["safetyAttributes","categories"]);a!=null&&D(n,["categories"],a);const i=E(e,["safetyAttributes","scores"]);i!=null&&D(n,["scores"],i);const s=E(e,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function Fce(t,e){const n={},a=E(e,["_self"]);a!=null&&D(n,["image"],Lce(t,a));const i=E(e,["raiFilteredReason"]);i!=null&&D(n,["raiFilteredReason"],i);const s=E(e,["_self"]);return s!=null&&D(n,["safetyAttributes"],fU(t,s)),n}function $ce(t,e){const n={},a=E(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Fce(t,o))),D(n,["generatedImages"],s)}const i=E(e,["positivePromptSafetyAttributes"]);return i!=null&&D(n,["positivePromptSafetyAttributes"],fU(t,i)),n}function Bce(t,e){const n={},a=E(e,["baseModel"]);a!=null&&D(n,["baseModel"],a);const i=E(e,["createTime"]);i!=null&&D(n,["createTime"],i);const s=E(e,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function RE(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=E(e,["description"]);s!=null&&D(n,["description"],s);const o=E(e,["version"]);o!=null&&D(n,["version"],o);const l=E(e,["_self"]);l!=null&&D(n,["tunedModelInfo"],Bce(t,l));const c=E(e,["inputTokenLimit"]);c!=null&&D(n,["inputTokenLimit"],c);const d=E(e,["outputTokenLimit"]);d!=null&&D(n,["outputTokenLimit"],d);const f=E(e,["supportedGenerationMethods"]);return f!=null&&D(n,["supportedActions"],f),n}function zce(t,e){const n={},a=E(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=E(e,["_self"]);if(i!=null){let s=uU(t,i);Array.isArray(s)&&(s=s.map(o=>RE(t,o))),D(n,["models"],s)}return n}function qce(){return{}}function Uce(t,e){const n={},a=E(e,["totalTokens"]);a!=null&&D(n,["totalTokens"],a);const i=E(e,["cachedContentTokenCount"]);return i!=null&&D(n,["cachedContentTokenCount"],i),n}function Vce(t,e){const n={},a=E(e,["video","uri"]);a!=null&&D(n,["uri"],a);const i=E(e,["video","encodedVideo"]);i!=null&&D(n,["videoBytes"],md(t,i));const s=E(e,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function Hce(t,e){const n={},a=E(e,["_self"]);return a!=null&&D(n,["video"],Vce(t,a)),n}function Gce(t,e){const n={},a=E(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Hce(t,l))),D(n,["generatedVideos"],o)}const i=E(e,["raiMediaFilteredCount"]);i!=null&&D(n,["raiMediaFilteredCount"],i);const s=E(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function Wce(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);o!=null&&D(n,["error"],o);const l=E(e,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],Gce(t,l)),n}function Yce(t,e){const n={},a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=E(e,["data"]);i!=null&&D(n,["data"],i);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Kce(t,e){const n={},a=E(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],Yce(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function Qce(t,e){const n={},a=E(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Kce(t,o))),D(n,["parts"],s)}const i=E(e,["role"]);return i!=null&&D(n,["role"],i),n}function Xce(t,e){const n={},a=E(e,["citations"]);return a!=null&&D(n,["citations"],a),n}function Jce(t,e){const n={},a=E(e,["content"]);a!=null&&D(n,["content"],Qce(t,a));const i=E(e,["citationMetadata"]);i!=null&&D(n,["citationMetadata"],Xce(t,i));const s=E(e,["finishMessage"]);s!=null&&D(n,["finishMessage"],s);const o=E(e,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=E(e,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=E(e,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const d=E(e,["index"]);d!=null&&D(n,["index"],d);const f=E(e,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=E(e,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function y4(t,e){const n={},a=E(e,["candidates"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>Jce(t,f))),D(n,["candidates"],d)}const i=E(e,["createTime"]);i!=null&&D(n,["createTime"],i);const s=E(e,["responseId"]);s!=null&&D(n,["responseId"],s);const o=E(e,["modelVersion"]);o!=null&&D(n,["modelVersion"],o);const l=E(e,["promptFeedback"]);l!=null&&D(n,["promptFeedback"],l);const c=E(e,["usageMetadata"]);return c!=null&&D(n,["usageMetadata"],c),n}function Zce(t,e){const n={},a=E(e,["truncated"]);a!=null&&D(n,["truncated"],a);const i=E(e,["token_count"]);return i!=null&&D(n,["tokenCount"],i),n}function eue(t,e){const n={},a=E(e,["values"]);a!=null&&D(n,["values"],a);const i=E(e,["statistics"]);return i!=null&&D(n,["statistics"],Zce(t,i)),n}function tue(t,e){const n={},a=E(e,["billableCharacterCount"]);return a!=null&&D(n,["billableCharacterCount"],a),n}function nue(t,e){const n={},a=E(e,["predictions[]","embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>eue(t,o))),D(n,["embeddings"],s)}const i=E(e,["metadata"]);return i!=null&&D(n,["metadata"],tue(t,i)),n}function rue(t,e){const n={},a=E(e,["gcsUri"]);a!=null&&D(n,["gcsUri"],a);const i=E(e,["bytesBase64Encoded"]);i!=null&&D(n,["imageBytes"],md(t,i));const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function pU(t,e){const n={},a=E(e,["safetyAttributes","categories"]);a!=null&&D(n,["categories"],a);const i=E(e,["safetyAttributes","scores"]);i!=null&&D(n,["scores"],i);const s=E(e,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function lD(t,e){const n={},a=E(e,["_self"]);a!=null&&D(n,["image"],rue(t,a));const i=E(e,["raiFilteredReason"]);i!=null&&D(n,["raiFilteredReason"],i);const s=E(e,["_self"]);s!=null&&D(n,["safetyAttributes"],pU(t,s));const o=E(e,["prompt"]);return o!=null&&D(n,["enhancedPrompt"],o),n}function aue(t,e){const n={},a=E(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>lD(t,o))),D(n,["generatedImages"],s)}const i=E(e,["positivePromptSafetyAttributes"]);return i!=null&&D(n,["positivePromptSafetyAttributes"],pU(t,i)),n}function iue(t,e){const n={},a=E(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>lD(t,s))),D(n,["generatedImages"],i)}return n}function sue(t,e){const n={},a=E(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>lD(t,s))),D(n,["generatedImages"],i)}return n}function oue(t,e){const n={},a=E(e,["endpoint"]);a!=null&&D(n,["name"],a);const i=E(e,["deployedModelId"]);return i!=null&&D(n,["deployedModelId"],i),n}function lue(t,e){const n={},a=E(e,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&D(n,["baseModel"],a);const i=E(e,["createTime"]);i!=null&&D(n,["createTime"],i);const s=E(e,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function cue(t,e){const n={},a=E(e,["checkpointId"]);a!=null&&D(n,["checkpointId"],a);const i=E(e,["epoch"]);i!=null&&D(n,["epoch"],i);const s=E(e,["step"]);return s!=null&&D(n,["step"],s),n}function LE(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=E(e,["description"]);s!=null&&D(n,["description"],s);const o=E(e,["versionId"]);o!=null&&D(n,["version"],o);const l=E(e,["deployedModels"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(x=>oue(t,x))),D(n,["endpoints"],g)}const c=E(e,["labels"]);c!=null&&D(n,["labels"],c);const d=E(e,["_self"]);d!=null&&D(n,["tunedModelInfo"],lue(t,d));const f=E(e,["defaultCheckpointId"]);f!=null&&D(n,["defaultCheckpointId"],f);const p=E(e,["checkpoints"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>cue(t,x))),D(n,["checkpoints"],g)}return n}function uue(t,e){const n={},a=E(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=E(e,["_self"]);if(i!=null){let s=uU(t,i);Array.isArray(s)&&(s=s.map(o=>LE(t,o))),D(n,["models"],s)}return n}function due(){return{}}function hue(t,e){const n={},a=E(e,["totalTokens"]);return a!=null&&D(n,["totalTokens"],a),n}function fue(t,e){const n={},a=E(e,["tokensInfo"]);return a!=null&&D(n,["tokensInfo"],a),n}function pue(t,e){const n={},a=E(e,["gcsUri"]);a!=null&&D(n,["uri"],a);const i=E(e,["bytesBase64Encoded"]);i!=null&&D(n,["videoBytes"],md(t,i));const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function mue(t,e){const n={},a=E(e,["_self"]);return a!=null&&D(n,["video"],pue(t,a)),n}function gue(t,e){const n={},a=E(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>mue(t,l))),D(n,["generatedVideos"],o)}const i=E(e,["raiMediaFilteredCount"]);i!=null&&D(n,["raiMediaFilteredCount"],i);const s=E(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function yue(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);o!=null&&D(n,["error"],o);const l=E(e,["response"]);return l!=null&&D(n,["response"],gue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xue="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function vue(t,e,n){const a=new Lse;let i;if(n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),t.isVertexAI()){const s=cle(t,i);Object.assign(a,s)}else{const s=lle(t,i);Object.assign(a,s)}e(a)}class bue{constructor(e,n,a){this.apiClient=e,this.auth=n,this.webSocketFactory=a}async connect(e){var n,a,i,s;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const d=Sue(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{const P=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${P}`}let f=()=>{};const p=new Promise(P=>{f=P}),g=e.callbacks,x=function(){var P;(P=g==null?void 0:g.onopen)===null||P===void 0||P.call(g),f({})},b=this.apiClient,j={onopen:x,onmessage:P=>{vue(b,g.onmessage,P)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(P){},onclose:(a=g==null?void 0:g.onclose)!==null&&a!==void 0?a:function(P){}},S=this.webSocketFactory.create(c,Nue(d),j);S.connect(),await p;let _=Vr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const P=this.apiClient.getProject(),k=this.apiClient.getLocation();_=`projects/${P}/locations/${k}/`+_}let T={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[cd.AUDIO]}:e.config.responseModalities=[cd.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=Doe(this.apiClient,C):T=Ooe(this.apiClient,C),delete T.config,S.send(JSON.stringify(T)),new wue(S,this.apiClient)}}const jue={turnComplete:!0};class wue{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let a=[];try{a=fd(e,n.turns),e.isVertexAI()?a=a.map(i=>Lg(e,i)):a=a.map(i=>WN(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:a,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let a=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?a=n.functionResponses:a=[n.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const s of a){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(xue)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},jue),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:$oe(this.apiClient,e)}:n={realtimeInput:Foe(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Nue(t){const e={};return t.forEach((n,a)=>{e[a]=n}),e}function Sue(t){const e=new Headers;for(const[n,a]of Object.entries(t))e.append(n,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _ue extends Db{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(a=>{var i;let s;const o=[];if(a!=null&&a.generatedImages)for(const c of a.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s}:l={generatedImages:o},l}),this.list=async n=>{var a;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((a=o.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new GN(ng.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const a={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(a.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async n=>{let a={numberOfImages:1,mode:"upscale"};n.config&&(a=Object.assign(Object.assign({},a),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:a};return await this.upscaleImageInternal(i)}}async generateContentInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=m4(this.apiClient,e);return l=sn("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=y4(this.apiClient,f),g=new xj;return Object.assign(g,p),g})}else{const d=p4(this.apiClient,e);return l=sn("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=g4(this.apiClient,f),g=new xj;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=m4(this.apiClient,e);l=sn("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(p){return vw(this,arguments,function*(){var g,x,b,j;try{for(var S=!0,_=ME(p),T;T=yield li(_.next()),g=T.done,!g;S=!0){j=T.value,S=!1;const P=y4(f,yield li(j.json())),k=new xj;Object.assign(k,P),yield yield li(k)}}catch(C){x={error:C}}finally{try{!S&&!g&&(b=_.return)&&(yield li(b.call(_)))}finally{if(x)throw x.error}}})})}else{const d=p4(this.apiClient,e);l=sn("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return vw(this,arguments,function*(){var g,x,b,j;try{for(var S=!0,_=ME(p),T;T=yield li(_.next()),g=T.done,!g;S=!0){j=T.value,S=!1;const P=g4(f,yield li(j.json())),k=new xj;Object.assign(k,P),yield yield li(k)}}catch(C){x={error:C}}finally{try{!S&&!g&&(b=_.return)&&(yield li(b.call(_)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=sce(this.apiClient,e);return l=sn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=nue(this.apiClient,f),g=new t4;return Object.assign(g,p),g})}else{const d=_le(this.apiClient,e);return l=sn("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Rce(this.apiClient,f),g=new t4;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=lce(this.apiClient,e);return l=sn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=aue(this.apiClient,f),g=new n4;return Object.assign(g,p),g})}else{const d=Tle(this.apiClient,e);return l=sn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=$ce(this.apiClient,f),g=new n4;return Object.assign(g,p),g})}}async editImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=mce(this.apiClient,e);return s=sn("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=iue(this.apiClient,c),f=new Pse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=yce(this.apiClient,e);return s=sn("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=sue(this.apiClient,c),f=new Ose;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=xce(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>LE(this.apiClient,f))}else{const d=kle(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>RE(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=bce(this.apiClient,e);return l=sn("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=uue(this.apiClient,f),g=new r4;return Object.assign(g,p),g})}else{const d=Ele(this.apiClient,e);return l=sn("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=zce(this.apiClient,f),g=new r4;return Object.assign(g,p),g})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=wce(this.apiClient,e);return l=sn("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>LE(this.apiClient,f))}else{const d=Ole(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>RE(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Nce(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=due(),p=new a4;return Object.assign(p,f),p})}else{const d=Dle(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=qce(),p=new a4;return Object.assign(p,f),p})}}async countTokens(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=_ce(this.apiClient,e);return l=sn("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=hue(this.apiClient,f),g=new i4;return Object.assign(g,p),g})}else{const d=Ile(this.apiClient,e);return l=sn("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Uce(this.apiClient,f),g=new i4;return Object.assign(g,p),g})}}async computeTokens(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Cce(this.apiClient,e);return s=sn("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=fue(this.apiClient,c),f=new Dse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=kce(this.apiClient,e);return l=sn("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>yue(this.apiClient,f))}else{const d=Fle(this.apiClient,e);return l=sn("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Wce(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cue(t,e){const n={},a=E(e,["operationName"]);a!=null&&D(n,["_url","operationName"],a);const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function Tue(t,e){const n={},a=E(e,["operationName"]);a!=null&&D(n,["_url","operationName"],a);const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function kue(t,e){const n={},a=E(e,["operationName"]);a!=null&&D(n,["operationName"],a);const i=E(e,["resourceName"]);i!=null&&D(n,["_url","resourceName"],i);const s=E(e,["config"]);return s!=null&&D(n,["config"],s),n}function Aue(t,e){const n={},a=E(e,["video","uri"]);a!=null&&D(n,["uri"],a);const i=E(e,["video","encodedVideo"]);i!=null&&D(n,["videoBytes"],md(t,i));const s=E(e,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function Eue(t,e){const n={},a=E(e,["_self"]);return a!=null&&D(n,["video"],Aue(t,a)),n}function Pue(t,e){const n={},a=E(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Eue(t,l))),D(n,["generatedVideos"],o)}const i=E(e,["raiMediaFilteredCount"]);i!=null&&D(n,["raiMediaFilteredCount"],i);const s=E(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function Oue(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);o!=null&&D(n,["error"],o);const l=E(e,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],Pue(t,l)),n}function Due(t,e){const n={},a=E(e,["gcsUri"]);a!=null&&D(n,["uri"],a);const i=E(e,["bytesBase64Encoded"]);i!=null&&D(n,["videoBytes"],md(t,i));const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Mue(t,e){const n={},a=E(e,["_self"]);return a!=null&&D(n,["video"],Due(t,a)),n}function Iue(t,e){const n={},a=E(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Mue(t,l))),D(n,["generatedVideos"],o)}const i=E(e,["raiMediaFilteredCount"]);i!=null&&D(n,["raiMediaFilteredCount"],i);const s=E(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function x4(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);o!=null&&D(n,["error"],o);const l=E(e,["response"]);return l!=null&&D(n,["response"],Iue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rue extends Db{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,a=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;return a&&"httpOptions"in a&&(s=a.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:a})}async getVideosOperationInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Tue(this.apiClient,e);return l=sn("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>x4(this.apiClient,f))}else{const d=Cue(this.apiClient,e);return l=sn("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Oue(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=kue(this.apiClient,e);return s=sn("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>x4(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lue="Content-Type",Fue="X-Server-Timeout",$ue="User-Agent",Bue="x-goog-api-client",zue="0.14.1",que=`google-genai-sdk/${zue}`,Uue="v1beta1",Vue="v1beta",v4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class mU extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class FE extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class Hue{constructor(e){var n,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Uue,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:Vue,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,a){const i=[this.getRequestUrlInternal(n)];return a&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))i.searchParams.append(o,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const a=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?a[i]=Object.assign(Object.assign({},a[i]),s):s!==void 0&&(a[i]=s);return a}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,a){if(n&&n.timeout||a){const i=new AbortController,s=i.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>i.abort(),n.timeout),a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await b4(i),new DE(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await b4(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return vw(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield li(i.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c);try{const p=JSON.parse(d);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),x=g.status,b=g.code,j=`got status: ${x}. ${JSON.stringify(p)}`;if(b>=400&&b<500)throw new mU(j);if(b>=500&&b<600)throw new FE(j)}}catch(p){const g=p;if(g.name==="ClientError"||g.name==="ServerError")throw p}o+=d;let f=o.match(v4);for(;f;){const p=f[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield li(new DE(g)),o=o.slice(f[0].length),f=o.match(v4)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},n=que+" "+this.clientOptions.userAgentExtra;return e[$ue]=n,e[Bue]=n,e[Lue]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))n.append(a,i);e.timeout&&e.timeout>0&&n.append(Fue,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var a;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const l=(a=n==null?void 0:n.mimeType)!==null&&a!==void 0?a:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var a;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:sn("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(a=o==null?void 0:o.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function b4(t){var e;if(t===void 0)throw new FE("response is undefined");if(!t.ok){const n=t.status,a=t.statusText;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=`got status: ${n} ${a}. ${JSON.stringify(i)}`;throw n>=400&&n<500?new mU(s):n>=500&&n<600?new FE(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gue(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","name"],a);const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function Wue(t,e,n){const a={},i=E(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=E(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=E(e,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),a}function Yue(t,e){const n={},a=E(e,["config"]);return a!=null&&D(n,["config"],Wue(t,a,n)),n}function Kue(t,e){const n={},a=E(e,["textInput"]);a!=null&&D(n,["textInput"],a);const i=E(e,["output"]);return i!=null&&D(n,["output"],i),n}function Que(t,e){const n={};if(E(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=E(e,["examples"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>Kue(t,s))),D(n,["examples","examples"],i)}return n}function Xue(t,e,n){const a={};if(E(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=E(e,["tunedModelDisplayName"]);if(n!==void 0&&i!=null&&D(n,["displayName"],i),E(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=E(e,["epochCount"]);n!==void 0&&s!=null&&D(n,["tuningTask","hyperparameters","epochCount"],s);const o=E(e,["learningRateMultiplier"]);if(o!=null&&D(a,["tuningTask","hyperparameters","learningRateMultiplier"],o),E(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(E(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=E(e,["batchSize"]);n!==void 0&&l!=null&&D(n,["tuningTask","hyperparameters","batchSize"],l);const c=E(e,["learningRate"]);return n!==void 0&&c!=null&&D(n,["tuningTask","hyperparameters","learningRate"],c),a}function Jue(t,e){const n={},a=E(e,["baseModel"]);a!=null&&D(n,["baseModel"],a);const i=E(e,["trainingDataset"]);i!=null&&D(n,["tuningTask","trainingData"],Que(t,i));const s=E(e,["config"]);return s!=null&&D(n,["config"],Xue(t,s,n)),n}function Zue(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["_url","name"],a);const i=E(e,["config"]);return i!=null&&D(n,["config"],i),n}function ede(t,e,n){const a={},i=E(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=E(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=E(e,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),a}function tde(t,e){const n={},a=E(e,["config"]);return a!=null&&D(n,["config"],ede(t,a,n)),n}function nde(t,e,n){const a={},i=E(e,["gcsUri"]);if(n!==void 0&&i!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],i),E(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function rde(t,e){const n={},a=E(e,["gcsUri"]);return a!=null&&D(n,["validationDatasetUri"],a),n}function ade(t,e,n){const a={},i=E(e,["validationDataset"]);n!==void 0&&i!=null&&D(n,["supervisedTuningSpec"],rde(t,i));const s=E(e,["tunedModelDisplayName"]);n!==void 0&&s!=null&&D(n,["tunedModelDisplayName"],s);const o=E(e,["description"]);n!==void 0&&o!=null&&D(n,["description"],o);const l=E(e,["epochCount"]);n!==void 0&&l!=null&&D(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=E(e,["learningRateMultiplier"]);n!==void 0&&c!=null&&D(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const d=E(e,["exportLastCheckpointOnly"]);n!==void 0&&d!=null&&D(n,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const f=E(e,["adapterSize"]);if(n!==void 0&&f!=null&&D(n,["supervisedTuningSpec","hyperParameters","adapterSize"],f),E(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(E(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return a}function ide(t,e){const n={},a=E(e,["baseModel"]);a!=null&&D(n,["baseModel"],a);const i=E(e,["trainingDataset"]);i!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],nde(t,i,n));const s=E(e,["config"]);return s!=null&&D(n,["config"],ade(t,s,n)),n}function sde(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["model"],a);const i=E(e,["name"]);return i!=null&&D(n,["endpoint"],i),n}function gU(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["state"]);i!=null&&D(n,["state"],oU(t,i));const s=E(e,["createTime"]);s!=null&&D(n,["createTime"],s);const o=E(e,["tuningTask","startTime"]);o!=null&&D(n,["startTime"],o);const l=E(e,["tuningTask","completeTime"]);l!=null&&D(n,["endTime"],l);const c=E(e,["updateTime"]);c!=null&&D(n,["updateTime"],c);const d=E(e,["description"]);d!=null&&D(n,["description"],d);const f=E(e,["baseModel"]);f!=null&&D(n,["baseModel"],f);const p=E(e,["_self"]);p!=null&&D(n,["tunedModel"],sde(t,p));const g=E(e,["distillationSpec"]);g!=null&&D(n,["distillationSpec"],g);const x=E(e,["experiment"]);x!=null&&D(n,["experiment"],x);const b=E(e,["labels"]);b!=null&&D(n,["labels"],b);const j=E(e,["pipelineJob"]);j!=null&&D(n,["pipelineJob"],j);const S=E(e,["tunedModelDisplayName"]);return S!=null&&D(n,["tunedModelDisplayName"],S),n}function ode(t,e){const n={},a=E(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=E(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>gU(t,o))),D(n,["tuningJobs"],s)}return n}function lde(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);return o!=null&&D(n,["error"],o),n}function cde(t,e){const n={},a=E(e,["checkpointId"]);a!=null&&D(n,["checkpointId"],a);const i=E(e,["epoch"]);i!=null&&D(n,["epoch"],i);const s=E(e,["step"]);s!=null&&D(n,["step"],s);const o=E(e,["endpoint"]);return o!=null&&D(n,["endpoint"],o),n}function ude(t,e){const n={},a=E(e,["model"]);a!=null&&D(n,["model"],a);const i=E(e,["endpoint"]);i!=null&&D(n,["endpoint"],i);const s=E(e,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>cde(t,l))),D(n,["checkpoints"],o)}return n}function $E(t,e){const n={},a=E(e,["name"]);a!=null&&D(n,["name"],a);const i=E(e,["state"]);i!=null&&D(n,["state"],oU(t,i));const s=E(e,["createTime"]);s!=null&&D(n,["createTime"],s);const o=E(e,["startTime"]);o!=null&&D(n,["startTime"],o);const l=E(e,["endTime"]);l!=null&&D(n,["endTime"],l);const c=E(e,["updateTime"]);c!=null&&D(n,["updateTime"],c);const d=E(e,["error"]);d!=null&&D(n,["error"],d);const f=E(e,["description"]);f!=null&&D(n,["description"],f);const p=E(e,["baseModel"]);p!=null&&D(n,["baseModel"],p);const g=E(e,["tunedModel"]);g!=null&&D(n,["tunedModel"],ude(t,g));const x=E(e,["supervisedTuningSpec"]);x!=null&&D(n,["supervisedTuningSpec"],x);const b=E(e,["tuningDataStats"]);b!=null&&D(n,["tuningDataStats"],b);const j=E(e,["encryptionSpec"]);j!=null&&D(n,["encryptionSpec"],j);const S=E(e,["partnerModelTuningSpec"]);S!=null&&D(n,["partnerModelTuningSpec"],S);const _=E(e,["distillationSpec"]);_!=null&&D(n,["distillationSpec"],_);const T=E(e,["experiment"]);T!=null&&D(n,["experiment"],T);const C=E(e,["labels"]);C!=null&&D(n,["labels"],C);const P=E(e,["pipelineJob"]);P!=null&&D(n,["pipelineJob"],P);const k=E(e,["tunedModelDisplayName"]);return k!=null&&D(n,["tunedModelDisplayName"],k),n}function dde(t,e){const n={},a=E(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=E(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>$E(t,o))),D(n,["tuningJobs"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hde extends Db{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new GN(ng.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const a=await this.tuneMldevInternal(n);let i="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?i=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(i=a.name.split("/operations/")[0]),{name:i,state:OE.JOB_STATE_QUEUED}}}}async getInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Zue(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>$E(this.apiClient,f))}else{const d=Gue(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>gU(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=tde(this.apiClient,e);return l=sn("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=dde(this.apiClient,f),g=new s4;return Object.assign(g,p),g})}else{const d=Yue(this.apiClient,e);return l=sn("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=ode(this.apiClient,f),g=new s4;return Object.assign(g,p),g})}}async tuneInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=ide(this.apiClient,e);return s=sn("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>$E(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Jue(this.apiClient,e);return s=sn("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>lde(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fde{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pde=1024*1024*8,mde=3,gde=1e3,yde=2,vC="x-goog-upload-status";async function xde(t,e,n){var a,i,s;let o=0,l=0,c=new DE(new Response),d="upload";for(o=t.size;l<o;){const p=Math.min(pde,o-l),g=t.slice(l,l+p);l+p>=o&&(d+=", finalize");let x=0,b=gde;for(;x<mde&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((a=c==null?void 0:c.headers)===null||a===void 0)&&a[vC]));)x++,await bde(b),b=b*yde;if(l+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[vC])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[vC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function vde(t){return{size:t.size,type:t.type}}function bde(t){return new Promise(e=>setTimeout(e,t))}class jde{async upload(e,n,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xde(e,n,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vde(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wde{create(e,n,a){return new Nde(e,n,a)}}class Nde{constructor(e,n,a){this.url=e,this.headers=n,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j4="x-goog-api-key";class Sde{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(j4)===null&&e.append(j4,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _de="gl-node/";class yU{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const a=Iie(e,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const i=new Sde(this.apiKey);this.apiClient=new Hue({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:_de+"web",uploader:new jde,downloader:new fde}),this.models=new _ue(this.apiClient),this.live=new bue(this.apiClient,i,new wde),this.chats=new qse(this.models,this.apiClient),this.caches=new Fse(this.apiClient),this.files=new toe(this.apiClient),this.operations=new Rue(this.apiClient),this.tunings=new hde(this.apiClient)}}const Cde=()=>{const t=localStorage.getItem("currentClinicId");return t||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},xU=()=>localStorage.getItem("authToken");class Tde{constructor(){yr(this,"listeners",[]);yr(this,"activeRequests",0)}subscribe(e){return this.listeners.push(e),e(this.activeRequests>0),()=>this.unsubscribe(e)}unsubscribe(e){this.listeners=this.listeners.filter(n=>n!==e)}notify(e){e?this.activeRequests++:this.activeRequests=Math.max(0,this.activeRequests-1);const n=this.activeRequests>0;this.listeners.forEach(a=>a(n))}}const BE=new Tde,kde="https://backend.newtons.in",Ade=()=>localStorage.getItem("authToken"),le=async(t,e={})=>{const n=Ade(),a={...e.headers};n&&(a.Authorization=`Bearer ${n}`),!(e.body instanceof FormData)&&!a["Content-Type"]&&(a["Content-Type"]="application/json");const i=a;let s=t.startsWith("/")?t:`/${t}`;s.startsWith("/api/")||(s=`/api${s}`);const o=`${kde}${s}`;BE.notify(!0);try{console.log(`Making API call to: ${o}`);const l=await fetch(o,{...e,headers:i});if(l.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!l.ok){let c=`HTTP error! status: ${l.status}`;try{const d=await l.json();c=(d==null?void 0:d.message)||(d==null?void 0:d.error)||c}catch{}throw console.error(`API Error: ${l.status} ${l.statusText} - ${c}`),new Error(c)}return l}catch(l){throw l instanceof TypeError&&l.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",l):console.error("API Fetch Error:",l),l}finally{BE.notify(!1)}},bC="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Ede="models/gemini-3-flash-preview",Pde=`You are an intelligent Clinic Hub Assistant for a Clinic Management System. Your role is to help the Clinic Administrator or Doctor manage their clinic ecosystem efficiently.

You have access to the current state of the clinic settings and the staff list. You can perform actions to update these settings or manage staff members.

**Capabilities:**
1.  **View Settings & Staff:** User can ask about current charges, clinic details, or staff members. Answer based on the provided context.
2.  **Update Settings:** Change fees, clinic name, address, etc.
3.  **Manage Staff:** Add new staff members or update existing ones.
4.  **Voice AI Settings:** Update the \`voice_ai_language\` for the Live API Assistant. Available codes:
    -   India: \`en-US\` (English), \`hi-IN\` (Hindi), \`te-IN\` (Telugu), \`bn-IN\` (Bengali), \`mr-IN\` (Marathi), \`ta-IN\` (Tamil), \`gu-IN\` (Gujarati), \`kn-IN\` (Kannada), \`ml-IN\` (Malayalam), \`pa-IN\` (Punjabi)
    -   Global: \`es-ES\` (Spanish), \`fr-FR\` (French), \`de-DE\` (German), \`it-IT\` (Italian), \`pt-PT\` (Portuguese), \`ru-RU\` (Russian), \`ja-JP\` (Japanese), \`ko-KR\` (Korean), \`zh-CN\` (Chinese), \`ar-SA\` (Arabic).
5.  **Analyze Financials & Inventory:** Access the Analysis Dashboard to view revenue, expenses, and inventory movement. Set date ranges to filter data.
6.  **Manage Inventory:** Update pharmacy tokens (drugs) and lab tests. You will reference items by their **Serial Number** as provided in the context.
7.  **Purchase Management:** Search for distributors, select one, and build a purchase order by adding items. You can add multiple items at once. Editing items uses Serial Numbers.
8.  **Looping & Reasoning:** You should think step-by-step. If a user request involves multiple steps or if you need to check something after an action, you can continue the loop.
9.  **Follow-up:** If critical information is missing, ask the user.
10.  **Manage Custom Columns:** You can add or remove custom columns/fields for various entities (patients, drugs, lab_tests). Use the \`manage_custom_columns\` action.
11.  **Custom Fields Data:** When searching or updating items (like drugs or patients), pay attention to their \`custom_fields\`. You can update these fields using the \`update_drug\` (or similar) action by passing a \`custom_fields\` object with key-value pairs. Keys must match the \`key\` defined in the Clinic Settings.
12.  **Custom Tables:** You can create entirely new tables to track anything (e.g., "Gym Members", "Diet Plans"). Use \`create_custom_table\`. You can then add rows to these tables using \`add_table_row\` (requires Table ID) and update them with \`update_table_row\`. meaningful descriptions are helpful.
13.  **Dashboards:** You can create persistent custom dashboards using \`create_custom_dashboard\` or show a specialized temporary view using \`render_temporary_dashboard\`.
     - Use \`render_temporary_dashboard\` when the user asks to "show", "view", or "see" data (e.g., "Show me John's meds").
     - Use \`create_custom_dashboard\` when the user explicitly asks to "create a dashboard" or "save a view".
     - **Data Sources:** Use the provided "Dashboard Data Sources" context to know valid keys (e.g., \`api:patients\`, \`table:123\`).
       - **Advanced Features:** You can add **Charts** (bar, line, pie) and **Filters** to widgets.
       - **Filters (SERVER-SIDE):** Use the \`filters\` array in config. Filters are applied on the server for efficiency.
         - **Supported Operators:**
           - \`equals\` or \`eq\`: Exact match
           - \`neq\` or \`not_equals\`: Not equal
           - \`contains\` or \`like\`: Case-insensitive substring match
           - \`starts_with\`: Value starts with
           - \`ends_with\`: Value ends with
           - \`gt\` or \`greater_than\`: Greater than
           - \`gte\`: Greater than or equal
           - \`lt\` or \`less_than\`: Less than
           - \`lte\`: Less than or equal
           - \`in\`: Value in array (value should be array)
           - \`not_in\`: Value not in array
           - \`is_null\`: Field is null
           - \`is_not_null\`: Field is not null
           - \`between\`: Value between two values (value should be [min, max])
         - **Filterable Fields:** The "Dashboard Data Sources" in context includes a \`filterableFields\` list for each source. You **MUST** use these fields.
           - **Mixed Tables:** Sources like \`api:pharmacy-orders\` or \`api:lab-orders\` support filtering by associated **Patient** data using \`patient_name\`, \`patient_phone\`, and \`token\`.
         - **Example 1:** User: "Show pharmacy orders for John" -> Action: \`render_temporary_dashboard\` with widget config: \`filters: [{ field: 'patient_name', operator: 'contains', value: 'John' }]\`
         - **Example 2:** User: "Show orders for Token 123" -> \`filters: [{ field: 'token', operator: 'equals', value: 123 }]\`
         - **Example 3:** \`filters: [{ field: 'expiry_date', operator: 'lt', value: '2024-01-01' }, { field: 'stock', operator: 'gt', value: 0 }]\`
         - Smartly infer dates for "expired" (lt today), "expiring this week" (between today and next week), etc.
       - **Charts:** Set \`type: 'chart'\`. Config requires \`chartType\`, \`xAxisKey\` (category), \`dataKey\` (value).

**Interpretation Rules:**
- **Analysis Dates:** When the user asks for analysis (financial or inventory) for a specific time range (e.g., "last month", "yesterday"), you **MUST** include \`startDate\` and \`endDate\` in the \`navigate_to\` action for \`/dashboard/analysis\`.
- If the user says "add drug", "buy medicine", or "new stock", they **usually mean "Add Item to Purchase Order"** (use \`add_purchase_items\` or navigate to \`/dashboard/purchase\`).
- **Prerequisite:** If you are using ANY purchase tools (\`add_purchase_items\`, \`search_distributor_purchase\`, \`set_distributor_purchase\`, \`edit_purchase_items\`), you **MUST** include a \`navigate_to\` action with \`page: "/dashboard/purchase"\` as the **FIRST** action in your list, unless you are already on that page.
- **ONLY** use \`update_drug\` (create) if the user explicitly says "create new drug definition" or "add to master inventory".
- The correct route for purchasing is \`/dashboard/purchase\`.

- **Drug Name & Brand Handling (CRITICAL):**
  - "Name" refers to the **Composition Name** (or Generic Name).
  - "Brand Name" refers to the **Brand Name**.
  - **Auto-Computation:** If the user provides a *Brand Name* (e.g., "Tab Dolo 650"), you **MUST** automatically:
    1.  Infer the **Composition** (e.g., "Tab Paracetamol 650mg") and use it for the "name" field.
    2.  Use the provided brand for the "brand_name" field (e.g., "Dolo 650").
    3.  Infer the **pack size** if implied (e.g., "1x10") and use it for the "pack" field.
  - If the user provides only a Brand Name and you cannot confidently infer the Composition, you **MUST** use \`ask_followup_question\` to ask the user for the composition.
  - Apply this logic to both \`add_purchase_items\` and \`update_drug\` actions.

- **Inventory Navigation:** If you execute "update_drug" or "search_pharmacy_inventory", you **MUST** include a "navigate_to" action for "/dashboard/inventory". If you searched for or updated a specific term, append it as "?search=Term" (e.g. "/dashboard/inventory?search=Paracetamol").
- **Lab Navigation:** If you execute "update_lab_test", you **MUST** include a "navigate_to" action for "/lab-inventory", unless you are already on that page.

**Action Tools:**
You can perform the following actions. Return a JSON array of actions.

\`\`\`json
[
    {
        "action": "update_clinic_settings",
        "updates": {
            "admissionCharge": "number string",
            "perDayCharge": "number string",
            "otherCharges": "number string",
            "name": "string",
            "address": "string",
            "notes": "string",
            "logoUrl": "string",
            "upi_id": "string",
            "low_stock_threshold": number,
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "gemini_api_key": "string",
            "voice_ai_language": "string (e.g. 'en-US', 'te-IN')"
        }
    },
    {
        "action": "create_staff_member",
        "staff": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null
        }
    },
    {
        "action": "update_staff_member",
        "id": "string | number",
        "updates": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null,
            "active": boolean
        }
    },
    {
        "action": "set_analysis_dates",
        "startDate": "YYYY-MM-DD",
        "endDate": "YYYY-MM-DD"
    },
    {
        "action": "navigate_to",
        "page": "/dashboard/inventory" | "/lab-inventory" | "/dashboard/queue" | "/dashboard/staff" | "/dashboard/purchase" | "/dashboard/analysis" | "/dashboard/clinic-hub" | "/billing" | "/dashboard/patients",
        "section": "financial" | "inventory" | "string (optional)",
        "startDate": "YYYY-MM-DD (optional, for analysis page)",
        "endDate": "YYYY-MM-DD (optional, for analysis page)"
    },
    {
        "action": "highlight_section",
        "elementId": "string"
    },
    {
        "action": "refresh_analysis"
    },
    {
        "action": "ask_followup_question",
        "question": "string"
    },
    {
        "action": "search_pharmacy_inventory",
        "query": "string (name, brand, or composition)"
    },
    {
        "action": "update_drug",
        "id": "number",
        "updates": {
            "name": "string",
            "brand_name": "string",
            "description": "string",
            "mrp": "number (MRP)",
            "stock": "number",
            "pack": "string (e.g. strip, bottle)",
            "supplier": "string",
            "expiry_date": "YYYY-MM-DD",
            "rate": "number",
            "box_number": "string",
            "gst": "number",
            "margin": "number",
            "discount": "number",
            "batch": "string",
            "hsn_code": "string",
            "mfg": "string",
            "mfg": "string",
            "loose": "number",
            "custom_fields": "object { key: value } (Optional: Update custom field values)"
        }
    },
    {
        "action": "update_lab_test",
        "serial_number": 1,
        "updates": {
            "name": "string",
            "price": "number",
            "description": "string",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit }"
        }
    },
    {
        "action": "search_lab_inventory",
        "query": "string (test name or description)"
    },
    {
        "action": "create_lab_test",
        "test": {
            "name": "string",
            "price": "number",
            "description": "string (optional)",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit } (optional)"
        }
    },
    {
        "action": "search_distributor_purchase",
        "query": "string"
    },
    {
        "action": "set_distributor_purchase",
        "distributorId": "string"
    },
    {
        "action": "add_purchase_items",
        "items": [
            {
                "name": "string (Composition Name)",
                "brand_name": "string",
                "stock": "number (quantity)",
                "rate": "number (buying price)",
                "mrp": "number",
                "pack": "string",
                "expiry_date": "YYYY-MM-DD",
                "batch": "string",
                "discount": "number",
                "gst": "number"
            }
        ]
    },
    {
        "action": "edit_purchase_items",
        "updates": [
            {
                "serial_number": "number (The Row # from context)",
                "field": "string (name, stock, rate, etc.)",
                "value": "string | number"
            }
        ]
    },
    {
        "action": "end_task",
        "summary": "string"
    },
    {
        "action": "open_new_case",
        "name": "string (Patient Name)",
        "age": "number (optional)",
        "gender": "M | F | O (optional)",
        "phone": "string (optional)",
        "complaint": "string (The medical complaint/reason)"
    },
    {
        "action": "manage_custom_columns",
        "entity": "patients" | "drugs" | "lab_tests",
        "operation": "add" | "remove",
        "column": {
            "label": "string",
            "type": "text" | "number" | "date" | "boolean",
            "required": boolean
        }
    },
    {
        "action": "create_custom_table",
        "name": "string",
        "description": "string (optional)",
        "columns": [
            {
                "label": "string",
                "type": "text" | "number" | "date" | "boolean",
                "required": boolean
            }
        ]
    },
    {
        "action": "add_table_row",
        "tableId": "string (The ID of the custom table)",
        "data": "object { key: value } (Keys must match column keys derived from labels)"
    },
    {
        "tableId": "string",
        "recordId": "string (The ID of the row/record to update)",
        "data": "object { key: value } (Updates to apply)"
    },
    {
        "action": "create_custom_dashboard",
        "name": "string",
        "description": "string (optional)",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string (one of the keys from Dashboard Data Sources, e.g. api:patients, table:xyz)",
                "config": "object { columns?: string[], label?: string, chartType?: 'bar'|'line'|'pie', xAxisKey?: string, dataKey?: string, filters?: Array<{field, operator, value}> }"
            }
        ]
    },
    {
        "action": "render_temporary_dashboard",
        "title": "string",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string",
                "config": "object { columns?: [], label?, chartType?, xAxisKey?, dataKey?, filters?: [] }"
            }
        ]
    }
]
\`\`\`

**Navigation Reference:**
- **Pharmacy Inventory:** \`/dashboard/inventory\`
- **Lab Inventory:** \`/lab-inventory\`
- **Doctor Queue:** \`/dashboard/queue\`
- **Staff Management:** \`/dashboard/staff\`
- **All Patients:** \`/dashboard/patients\`
- **Billing:** \`/billing\`
- **Purchase Page:** \`/dashboard/purchase\`
- **Analysis:** \`/dashboard/analysis\`
- **Clinic Hub:** \`/dashboard/clinic-hub\`
\`\`\`

**Rules:**
-   **Always** return a JSON array as the last part of your response.
-   If the user's request is satisfied, use the \`end_task\` action with a summary of what was done.
-   If you need more info, use \`ask_followup_question\`.
-   If you perform an action (like updating settings), and there's nothing else to do *immediately* but you want to confirm it's done, you can return the action. The system will execute it and call you back with the result. Then you can \`end_task\`.
-   For \`create_staff_member\`, if password is not provided by user, generate a secure random password and mention it in the summary.
-   Update numeric strings as strings (e.g., "500.00").
-   **CRITICAL DO's and DON'Ts:**
    -   **DO NOT** fill in empty fields (like \`gemini_api_key\`, \`logoUrl\`, \`upi_id\`, etc.) with fake, placeholder, or example data.
    -   **ONLY** update fields that the user *intentionally* asked to change.
    -   **PRESERVE** existing values for any fields not explicitly mentioned in the user's request.
    -   If a field is empty and the user didn't ask to set it, **leave it empty**.
    -   Do not invent values.
`;async function Ode(){var n;if(!xU()&&bC)return bC;let e=null;try{const a=await le("/api/clinics/settings");if(a.ok){const i=await a.json();(n=i.gemini_api_key)!=null&&n.trim()&&(e=i.gemini_api_key.trim())}}catch(a){console.warn("Error fetching updated key",a)}if(e)return e;try{const a=await le("/api/global-settings/app_gemini_api_key");if(a.ok){const s=(await a.json()).value;if(s&&s.trim()!=="")return s.trim()}}catch(a){console.warn("Could not fetch global API key.",a)}return bC}async function Dde(t,e,n=[],a){var f,p,g,x,b,j;let i=(f=e.settings)==null?void 0:f.gemini_api_key;if(!i||!i.trim())try{i=await Ode()}catch(S){console.warn("Using fallback key or failing:",S)}if(!i)throw new Error("No Gemini API Key provided in settings or environment.");const s=new yU({apiKey:i}),o=[];o.push({role:"user",parts:[{text:Pde}]}),o.push({role:"model",parts:[{text:"Understood. I am ready to assist with Clinic Hub management."}]}),n.forEach(S=>{o.push({role:S.role,parts:[{text:S.text}]})});const d=[{text:`
    Context:
    ${`
    --- Current Clinic Context ---
    Settings: ${JSON.stringify(e.settings,null,2)}
    
    Custom Columns Configuration: ${JSON.stringify(e.settings.custom_columns_config||{},null,2)}

    Custom Tables (Available for adding/editing rows): ${JSON.stringify(e.customTables||[],null,2)}
    
    Dashboard Data Sources (Use these keys for widgets): ${JSON.stringify(e.dashboardDataSources||[],null,2)}

    --- DYNAMIC CONTEXT DATA (Configured tables with <200 rows) ---
    ${Object.entries(e.dynamicContextData||{}).map(([S,_])=>{const T=(_.data||[]).slice(0,50).map((C,P)=>({_sn:P+1,...C}));return`${_.label||S} (${_.count||0} records): ${JSON.stringify(T,null,2)}`}).join(`

`)}
    --- END DYNAMIC CONTEXT ---

    Staff List: ${JSON.stringify(e.staffList.map(S=>({id:S.id||S._id,name:S.name,role:S.role,email:S.email,active:S.active,opd_fee:S.opd_fee})),null,2)}
    
    Previous Action Results (if any): ${JSON.stringify(e.actionResults||[],null,2)}

    Analysis Data (if active): ${JSON.stringify(e.analysisData||{},null,2)}

    Pharmacy Inventory: ${e.pharmacyInventory?JSON.stringify(e.pharmacyInventory,null,2):"Not loaded. Use 'search_pharmacy_inventory' to find items."}

    Distributors List: ${JSON.stringify((e.distributors||[]).map(S=>({serial_number:S.serial_number,name:S.name,contact_person:S.contact_person,phone:S.phone,remainingBalance:S.remainingBalance})),null,2)}

    Lab Tests Inventory: ${JSON.stringify((e.labInventory||[]).map(S=>({serial:S.serial_number,name:S.name,price:S.price,description:S.description,default_parameters:S.default_parameters})),null,2)}

    Current Purchase Page Rows: ${JSON.stringify((e.purchaseRows||[]).map((S,_)=>({serial_number:_+1,name:S.name,stock:S.stock,rate:S.rate,mrp:S.mrp,net_value:(S.stock*S.rate).toFixed(2)})),null,2)}

    Current Application Page Context: ${e.pageContext?JSON.stringify(e.pageContext,null,2):"Unknown/General Dashboard"}
    `}

    User Query/Input:
    ${t}
    `}];if(a){const S=a.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");d.push({inlineData:{data:S,mimeType:"image/jpeg"}})}o.push({role:"user",parts:d});try{const S={model:Ede,contents:o,generationConfig:{temperature:.7,maxOutputTokens:2048,responseMimeType:"text/plain"}},_=await s.models.generateContentStream(S);let T="";for await(const C of _){const P=C;P.text&&typeof P.text=="function"?T+=P.text():(j=(b=(x=(g=(p=P.candidates)==null?void 0:p[0])==null?void 0:g.content)==null?void 0:x.parts)==null?void 0:b[0])!=null&&j.text&&(T+=P.candidates[0].content.parts[0].text)}if(!T)throw new Error("Empty response from AI");return T}catch(S){throw console.error("Gemini Interaction Error:",S),new Error("Failed to communicate with AI Assistant.")}}const cD=({settings:t,staffList:e,onSettingsUpdate:n,onStaffUpdate:a,onHighlight:i,enableDynamicContext:s=!1})=>{const o=Mt(),l=ss(),{setAnalysisDateRange:c,analysisData:d,analysisNavigate:f,refreshAnalysis:p,pageContext:g}=IN(),{setDistributors:x,setSelectedDistributor:b,setSearchTerm:j,addPurchaseRow:S,updatePurchaseRow:_,distributors:T,purchaseRows:C}=Cz(),[P,k]=v.useState(""),O=v.useRef(d),I=v.useRef(C);v.useEffect(()=>{O.current=d},[d]),v.useEffect(()=>{I.current=C},[C]);const[F,B]=v.useState([]),[$,L]=v.useState([]),[V,H]=v.useState([]),[te,X]=v.useState(!1),[q,Y]=v.useState(null),se=v.useRef(!1),G=v.useRef(0),z=5,ce=()=>{se.current=!1,X(!1),H(ue=>[...ue,{role:"system",text:" Task stopped by user."}])},we=ue=>{const me=new FileReader;me.onloadend=()=>{Y(me.result)},me.readAsDataURL(ue)},K=()=>{Y(null)},[Ie,We]=v.useState(null),Re=()=>We(null),Fe=async(ue,me)=>{if(!Ie)return;const oe={name:ue,description:me,widgets:Ie.widgets};if(!(await le("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)})).ok)throw new Error("Failed to save dashboard");We(null)},ve=async(ue,me,oe=[],Q)=>{var ie,xe,ee;if(se.current){if(G.current+=1,G.current>z){H(Se=>[...Se,{role:"system",text:" Task limit reached. Stopping automatically."}]),X(!1),se.current=!1;return}try{let Se=t,qe=e,Ge=[],Ne=[],ne=[],de=[],Te=[];try{const[De,Je]=await Promise.all([le("/api/clinics/settings"),le("/staff")]);if(De.ok&&Je.ok){const et=await De.json(),ut=await Je.json(),[_t,vt,ke,lt]=await Promise.all([le("/api/drugs"),le("/api/lab-tests"),le("/api/distributors"),le("/api/custom-tables"),le("/api/dashboards/data-sources")]);if(_t.ok){const Tt=await _t.json();Ge=Tt.drugs||Tt||[]}if(vt.ok){const Ue=(await vt.json()).map((jt,Ct)=>({...jt,serial_number:Ct+1}));Ne=Ue,B(Ue)}if(ke.ok&&(ne=(await ke.json()||[]).map((Ue,jt)=>({...Ue,serial_number:jt+1}))),lt.ok){const Tt=await lt.json();de=Tt,L(Tt)}try{const Tt=await le("/api/dashboards/data-sources");Tt.ok&&(Te=await Tt.json())}catch(Tt){console.warn("Failed to fetch dashboard sources",Tt)}Se={...et,admissionCharge:parseFloat(et.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(et.perDayCharge||0).toFixed(2),otherCharges:parseFloat(et.otherCharges||0).toFixed(2),aiMemory:et.aiMemory||"",clinicWideSystemPrompt:et.clinicWideSystemPrompt||"",gemini_api_key:et.gemini_api_key||"",low_stock_threshold:et.low_stock_threshold!==void 0&&et.low_stock_threshold!==null?String(et.low_stock_threshold):"10",name:et.name||"",logoUrl:et.logoUrl||"",upi_id:et.upi_id||"",address:et.address||"",notes:et.notes||"",clinic_id:et.clinic_id},qe=ut.map(Tt=>({...Tt,id:Tt._id||Tt.id}))}}catch(De){console.warn("Failed to fetch fresh context for AI loop, falling back to props",De)}let Ee={};if(s)try{const De=await le("/api/ai-context/data");De.ok&&(Ee=await De.json())}catch(De){console.warn("Failed to fetch dynamic AI context",De)}const W={settings:Se,staffList:qe,analysisData:O.current,pharmacyInventory:Ge.length>50?void 0:Ge,labInventory:Ne,distributors:ne,purchaseRows:I.current,actionResults:oe,pageContext:g||void 0,customTables:de,dashboardDataSources:Te,dynamicContextData:Ee},ye=me.filter(De=>De.role!=="system"),he=await Dde(ue,W,ye,Q);if(!se.current)return;let ge=[];try{const De=he.match(/\[[\s\S]*\]/);if(De)ge=JSON.parse(De[0]);else{H(Je=>[...Je,{role:"model",text:he}]),X(!1),se.current=!1;return}}catch(De){console.error("Failed to parse AI response",De),H(Je=>[...Je,{role:"model",text:"I'm having trouble processing that. Please try again."}]),X(!1),se.current=!1;return}const _e=[];let ze=[],Oe=[];for(const De of ge){if(!se.current)break;if(De.action==="end_task"){H(Je=>[...Je,{role:"model",text:De.summary}]),X(!1),se.current=!1;return}if(De.action==="ask_followup_question"){H(Je=>[...Je,{role:"model",text:De.question}]),X(!1),se.current=!1;return}try{if(De.action==="update_clinic_settings"){const Je=De.updates;Object.keys(Je).forEach(_t=>ze.push(`setting-${_t}`));const et={...Se,...Je},ut={...et,admissionCharge:parseFloat(et.admissionCharge),perDayCharge:parseFloat(et.perDayCharge),otherCharges:parseFloat(et.otherCharges),low_stock_threshold:parseInt(et.low_stock_threshold)};await le("/api/clinics/settings",{method:"PUT",body:JSON.stringify(ut)}),n&&n(),_e.push({action:"update_clinic_settings",status:"success"}),Oe.push({role:"system",text:" Updated clinic settings"})}if(De.action==="create_staff_member"&&(await le("/api/staff",{method:"POST",body:JSON.stringify({...De.staff,clinic_id:Se.clinic_id})}),a&&a(),_e.push({action:"create_staff_member",status:"success",name:De.staff.name}),Oe.push({role:"system",text:` Created staff member: ${De.staff.name}`})),De.action==="update_staff_member"){const Je=De.id;await le(`/api/staff/${Je}`,{method:"PUT",body:JSON.stringify(De.updates)}),a&&a(),ze.push(`staff-member-${Je}`),_e.push({action:"update_staff_member",status:"success",id:Je}),Oe.push({role:"system",text:" Updated staff member details"})}if(De.action==="set_analysis_dates"){const{startDate:Je,endDate:et}=De;c({startDate:new Date(Je),endDate:new Date(et)}),_e.push({action:"set_analysis_dates",status:"success",startDate:Je,endDate:et}),Oe.push({role:"system",text:` Set analysis dates: ${Je} to ${et}`})}if(De.action==="navigate_to"){let Je=De.page;if(De.page&&De.page.includes("analysis")&&De.startDate&&De.endDate){const et=Je.includes("?")?"&":"?";Je=`${Je}${et}startDate=${De.startDate}&endDate=${De.endDate}`}else De.page&&De.page.includes("analysis")&&((ie=O.current)!=null&&ie.startDate)&&((xe=O.current)!=null&&xe.endDate);o(Je),De.section&&setTimeout(()=>f(De.section),500),_e.push({action:"navigate_to",status:"success",page:Je}),Oe.push({role:"system",text:` Navigated to ${Je}`})}if(De.action==="highlight_section"&&(ze.push(De.elementId),_e.push({action:"highlight_section",status:"success",id:De.elementId})),De.action==="refresh_analysis"){Oe.push({role:"system",text:" Refreshing analysis data..."});const Je=await p();Je?(O.current=Je,_e.push({action:"refresh_analysis",status:"success",summary:"Data refreshed successfully"}),Oe.push({role:"system",text:" Analysis data refreshed"})):(_e.push({action:"refresh_analysis",status:"error",error:"No data returned"}),Oe.push({role:"system",text:" Failed to refresh analysis data"}))}if(De.action==="search_pharmacy_inventory"){const Je=De.query.toLowerCase(),et=Ge.filter(_t=>_t.name&&_t.name.toLowerCase().includes(Je)||_t.brand_name&&_t.brand_name.toLowerCase().includes(Je)||_t.description&&_t.description.toLowerCase().includes(Je)),ut=et.slice(0,10);_e.push({action:"search_pharmacy_inventory",status:"success",count:et.length,results:ut}),et.length>0?Oe.push({role:"system",text:` Found ${et.length} matches for "${De.query}". Showing top ${ut.length}.`}):Oe.push({role:"system",text:` No matches found for "${De.query}"`})}if(De.action==="update_drug"){const Je=De.id;try{const et=Ge.find(vt=>vt.id===Je);if(!et)throw new Error(`Drug with ID ${Je} not found.`);const ut={...De.updates};ut.custom_fields&&(ut.custom_fields={...et.custom_fields||{},...ut.custom_fields});const _t={...et,...ut};await le(`/api/drugs/${Je}`,{method:"PUT",body:JSON.stringify(_t)}),_e.push({action:"update_drug",status:"success",id:Je,updates:De.updates}),Oe.push({role:"system",text:` Updated drug: ${et.name}`}),We({title:`Updated: ${et.name}`,widgets:[{id:"edited-drug",type:"table",title:`Drug Updated: ${et.name}`,dataSource:"api:drugs",config:{filters:[{field:"id",operator:"equals",value:Je}],columns:["name","brand_name","stock","mrp","expiry_date","pack"]},position:{x:0,y:0,w:12,h:4}}]})}catch(et){_e.push({action:"update_drug",status:"error",error:et.message}),Oe.push({role:"system",text:` Failed to update drug: ${et.message}`})}}if(De.action==="update_lab_test"){const Je=Ne.find(et=>et.serial_number===De.serial_number);if(Je){const et={...Je,...De.updates};await le(`/api/lab-tests/${Je.id}`,{method:"PUT",body:JSON.stringify(et)}),_e.push({action:"update_lab_test",status:"success",item:Je.name}),Oe.push({role:"system",text:` Updated lab test: ${Je.name}`}),We({title:`Updated: ${Je.name}`,widgets:[{id:"edited-lab-test",type:"table",title:`Lab Test Updated: ${Je.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Je.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}else _e.push({action:"update_lab_test",status:"error",error:`Test with serial ${De.serial_number} not found`}),Oe.push({role:"system",text:` Lab test with serial ${De.serial_number} not found`})}if(De.action==="search_lab_inventory"){const Je=De.query.toLowerCase(),et=Ne.filter(_t=>_t.name&&_t.name.toLowerCase().includes(Je)||_t.description&&_t.description.toLowerCase().includes(Je)),ut=et.slice(0,10);_e.push({action:"search_lab_inventory",status:"success",count:et.length,results:ut.map(_t=>({serial_number:_t.serial_number,id:_t.id,name:_t.name,price:_t.price,description:_t.description}))}),et.length>0?Oe.push({role:"system",text:` Found ${et.length} lab tests for "${De.query}". Showing top ${ut.length}.`}):Oe.push({role:"system",text:` No lab tests found for "${De.query}"`})}if(De.action==="create_lab_test")try{const Je=De.test,et={name:Je.name,price:parseFloat(Je.price)||0,description:Je.description||"",default_parameters:Je.default_parameters||[]},ut=await le("/api/lab-tests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(et)});if(!ut.ok){const vt=await ut.json();throw new Error(vt.message||"Failed to create lab test")}const _t=await ut.json();_e.push({action:"create_lab_test",status:"success",id:_t.id,name:Je.name}),Oe.push({role:"system",text:` Created lab test: ${Je.name}`}),We({title:`Created: ${Je.name}`,widgets:[{id:"created-lab-test",type:"table",title:`New Lab Test: ${Je.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:_t.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Je){_e.push({action:"create_lab_test",status:"error",error:Je.message}),Oe.push({role:"system",text:` Failed to create lab test: ${Je.message}`})}if(De.action==="search_distributor_purchase"){const Je=De.query,et=await le(`/api/distributors?search=${encodeURIComponent(Je)}`);if(et.ok){const ut=await et.json();x(ut),j(Je),_e.push({action:"search_distributor_purchase",status:"success",count:ut.length,results:ut}),Oe.push({role:"system",text:` Found ${ut.length} distributors for "${Je}"`})}else _e.push({action:"search_distributor_purchase",status:"error",error:et.statusText}),Oe.push({role:"system",text:" Failed to search distributors"})}if(De.action==="set_distributor_purchase"){const Je=De.distributorId;let et=T.find(ut=>ut.id===Je);et?(b(et),j(et.name),_e.push({action:"set_distributor_purchase",status:"success",distributor:et.name}),Oe.push({role:"system",text:` Selected distributor: ${et.name}`})):(_e.push({action:"set_distributor_purchase",status:"error",error:"Distributor not found in current search results. Please search first."}),Oe.push({role:"system",text:" Distributor not found. Please search first."}))}if(De.action==="add_purchase_items"){const Je=De.items;let et=0;Je.forEach(ut=>{const vt={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:ut.name||"",composition:ut.composition||"",description:ut.description||"",mrp:ut.mrp||0,stock:ut.stock||0,pack:ut.pack||"",supplier:"",expiry_date:ut.expiry_date||"",rate:ut.rate||0,box_number:ut.box_number||"",gst:ut.gst||0,margin:ut.margin||0,discount:ut.discount||0,brand_name:ut.brand_name||"",batch:ut.batch||"",hsn_code:ut.hsn_code||"",mfg:ut.mfg||"",loose:ut.loose||0,last_updated:"",created_at:""};S(vt),et++}),_e.push({action:"add_purchase_items",status:"success",count:et}),Oe.push({role:"system",text:` Added ${et} items to purchase list`})}if(De.action==="edit_purchase_items"){const Je=De.updates;let et=0;const ut=I.current||[];Je.forEach(_t=>{if(_t.serial_number){const vt=_t.serial_number-1,ke=ut[vt];ke&&ke.id?(_(ke.id,{[_t.field]:_t.value}),et++):(console.warn(`Row with serial number ${_t.serial_number} not found.`),Oe.push({role:"system",text:` Row #${_t.serial_number} not found.`}))}}),_e.push({action:"edit_purchase_items",status:"success",count:et}),Oe.push({role:"system",text:` Updated ${et} items`})}if(De.action==="open_new_case"){const{name:Je,age:et,gender:ut,complaint:_t,phone:vt}=De;try{const ke=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Je||"New Patient",age:et||null,gender:ut||null,phone:vt||null,address:null})});if(!ke.ok){const Ct=await ke.json().catch(()=>({}));throw ke.status===403&&((ee=Ct.message)!=null&&ee.includes("Patient limit"))?new Error(`Patient limit reached: ${Ct.message}`):new Error(Ct.message||"Failed to create patient")}const lt=await ke.json();if(!lt||!lt.id)throw new Error("Created patient has no ID");const Tt=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:lt.id,complaint:_t||"New Case"})});if(!Tt.ok)throw new Error("Failed to create queue entry");const Ue=await Tt.json(),jt=lt.id;jt&&(l.prefetchQuery({queryKey:Ut.patients.context(jt),queryFn:()=>le(`/api/patients/${jt}/context`).then(Ct=>Ct.json()),staleTime:1e3*60*5}),l.prefetchQuery({queryKey:Ut.patientDebts.balance(jt),queryFn:()=>le(`/api/patient-debts/${jt}/balance`).then(Ct=>Ct.json()),staleTime:1e3*60}),l.prefetchQuery({queryKey:Ut.queue.latest(jt),queryFn:()=>le(`/api/queue/patient/${jt}/latest`).then(Ct=>Ct.json()),staleTime:1e3*5})),o(`/dashboard/edit-complaint/${Ue.id}`,{state:{initialComplaint:_t}}),_e.push({action:"open_new_case",status:"success",patientId:lt.id,queueId:Ue.id}),Oe.push({role:"system",text:` Opened new case for ${Je}`}),X(!1),se.current=!1;return}catch(ke){ke.message.includes("Patient limit")&&(o("/start-clinic-subscription"),Oe.push({role:"system",text:" Patient limit reached. Redirecting to subscription."})),_e.push({action:"open_new_case",status:"error",error:ke.message}),Oe.push({role:"system",text:` Failed to open new case: ${ke.message}`})}}if(De.action==="manage_custom_columns"){const{entity:Je,operation:et,column:ut}=De,_t=Se.custom_columns_config||{drugs:[],patients:[],lab_tests:[]};let ke=[..._t[Je]||[]];if(et==="add"){const Tt=ut.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke.some(Ue=>Ue.key===Tt)||ke.push({...ut,key:Tt})}else if(et==="remove"){const Tt=ut.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke=ke.filter(Ue=>Ue.key!==Tt&&Ue.label!==ut.label)}const lt={..._t,[Je]:ke};await le("/api/clinics/settings",{method:"PUT",body:JSON.stringify({...Se,custom_columns_config:lt})}),n&&n(),_e.push({action:"manage_custom_columns",status:"success",entity:Je,operation:et,column:ut.label}),Oe.push({role:"system",text:` ${et==="add"?"Added":"Removed"} custom column '${ut.label}' for ${Je}`})}if(De.action==="create_custom_table"){const{name:Je,description:et,columns:ut}=De,_t=ut.map(lt=>({...lt,key:lt.label.toLowerCase().replace(/[^a-z0-9]/g,"_")})),vt=await le("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Je,description:et,columns:_t})});if(!vt.ok)throw new Error("Failed to create table");const ke=await vt.json();L(lt=>[...lt,ke]),_e.push({action:"create_custom_table",status:"success",tableId:ke.id}),Oe.push({role:"system",text:` Created custom table: ${Je}`})}if(De.action==="add_table_row"){const{tableId:Je,data:et}=De;if(!(await le(`/api/custom-tables/${Je}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:et})})).ok)throw new Error("Failed to add row");_e.push({action:"add_table_row",status:"success"}),Oe.push({role:"system",text:" Added row to table"})}if(De.action==="update_table_row"){const{recordId:Je,data:et}=De;if(!(await le(`/api/custom-tables/records/${Je}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:et})})).ok)throw new Error("Failed to update row");_e.push({action:"update_table_row",status:"success"}),Oe.push({role:"system",text:" Updated row"})}if(De.action==="create_custom_dashboard"){const{name:Je,description:et,widgets:ut}=De,_t=await le("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Je,description:et,widgets:ut})});if(!_t.ok)throw new Error("Failed to create dashboard");const vt=await _t.json();_e.push({action:"create_custom_dashboard",status:"success",id:vt.id}),Oe.push({role:"system",text:` Created dashboard: ${Je}`})}De.action==="render_temporary_dashboard"&&(We({title:De.title,widgets:De.widgets}),_e.push({action:"render_temporary_dashboard",status:"success"}),Oe.push({role:"system",text:` Showing temporary dashboard: ${De.title}`}))}catch(Je){console.error("Action execution failed",De,Je),_e.push({action:De.action,status:"error",error:Je.message}),Oe.push({role:"system",text:` Failed to execute action: ${De.action}`})}}ze.length>0&&i&&setTimeout(()=>i(ze),500),Oe.length>0&&H(De=>[...De,...Oe]);const He=[...oe,..._e],nt=`Reflecting on previous actions: ${JSON.stringify(_e)}. What is the next step? If done, call end_task.`,mt=[...me,...Oe,{role:"model",text:he},{role:"user",text:nt}];await ve(nt,mt,He,void 0)}catch(Se){console.error(Se),H(qe=>[...qe,{role:"model",text:"Something went wrong."}]),X(!1),se.current=!1}}},ae=v.useCallback(()=>{H([]),k(""),X(!1),se.current=!1,G.current=0,Y(null)},[]);return{chatQuery:P,setChatQuery:k,chatHistory:V,isProcessing:te,handleSendMessage:ue=>{const me=ue!==void 0?ue:P;if(!me.trim()&&!q)return;se.current=!0,X(!0),G.current=0;const oe={role:"user",text:me};q&&(oe.text+=" [Image Attached]"),H(ie=>[...ie,oe]);const Q=q||void 0;k(""),Y(null),ve(me,V,[],Q)},refreshChat:ae,stopGeneration:ce,selectedImage:q,handleImageSelect:we,clearImage:K,temporaryDashboard:Ie,closeTemporaryDashboard:Re,saveTemporaryDashboard:Fe}},Z=({className:t="",width:e,height:n,variant:a="rectangular",animate:i=!0,style:s={}})=>{const o={width:e,height:n,...s};return r.jsx("div",{className:`skeleton skeleton-${a} ${i?"skeleton-animate":""} ${t}`,style:o})};var jC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var w4;function Mde(){return w4||(w4=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=i(s,a(l)))}return s}function a(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)e.call(s,l)&&s[l]&&(o=i(o,l));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(jC)),jC.exports}var Ide=Mde();const rd=Un(Ide);function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function Rde(t,e){if(wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(wf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vU(t){var e=Rde(t,"string");return wf(e)=="symbol"?e:e+""}function uv(t,e,n){return(e=vU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N4(Object(n),!0).forEach(function(a){uv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Lde(t){if(Array.isArray(t))return t}function Fde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function zE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function bU(t,e){if(t){if(typeof t=="string")return zE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zE(t,e):void 0}}function $de(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cc(t,e){return Lde(t)||Fde(t,e)||bU(t,e)||$de()}function Bde(t,e){if(t==null)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;n[a]=t[a]}return n}function Uc(t,e){if(t==null)return{};var n,a,i=Bde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var zde=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function qde(t){var e=t.defaultInputValue,n=e===void 0?"":e,a=t.defaultMenuIsOpen,i=a===void 0?!1:a,s=t.defaultValue,o=s===void 0?null:s,l=t.inputValue,c=t.menuIsOpen,d=t.onChange,f=t.onInputChange,p=t.onMenuClose,g=t.onMenuOpen,x=t.value,b=Uc(t,zde),j=v.useState(l!==void 0?l:n),S=Cc(j,2),_=S[0],T=S[1],C=v.useState(c!==void 0?c:i),P=Cc(C,2),k=P[0],O=P[1],I=v.useState(x!==void 0?x:o),F=Cc(I,2),B=F[0],$=F[1],L=v.useCallback(function(se,G){typeof d=="function"&&d(se,G),$(se)},[d]),V=v.useCallback(function(se,G){var z;typeof f=="function"&&(z=f(se,G)),T(z!==void 0?z:se)},[f]),H=v.useCallback(function(){typeof g=="function"&&g(),O(!0)},[g]),te=v.useCallback(function(){typeof p=="function"&&p(),O(!1)},[p]),X=l!==void 0?l:_,q=c!==void 0?c:k,Y=x!==void 0?x:B;return Yt(Yt({},b),{},{inputValue:X,menuIsOpen:q,onChange:L,onInputChange:V,onMenuClose:te,onMenuOpen:H,value:Y})}function Zt(){return Zt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Zt.apply(null,arguments)}function Ude(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S4(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,vU(a.key),a)}}function Vde(t,e,n){return e&&S4(t.prototype,e),n&&S4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qE(t,e){return qE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qE(t,e)}function Hde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qE(t,e)}function bw(t){return bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bw(t)}function jU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jU=function(){return!!t})()}function Gde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wde(t,e){if(e&&(wf(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gde(t)}function Yde(t){var e=jU();return function(){var n,a=bw(t);if(e){var i=bw(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Wde(this,n)}}function Kde(t){if(Array.isArray(t))return zE(t)}function Qde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uD(t){return Kde(t)||Qde(t)||bU(t)||Xde()}function Jde(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Zde(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var ehe=function(){function t(n){var a=this;this._insertTag=function(i){var s;a.tags.length===0?a.insertionPoint?s=a.insertionPoint.nextSibling:a.prepend?s=a.container.firstChild:s=a.before:s=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(i,s),a.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(a){a.forEach(this._insertTag)},e.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Zde(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Jde(i);try{s.insertRule(a,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(a));this.ctr++},e.flush=function(){this.tags.forEach(function(a){var i;return(i=a.parentNode)==null?void 0:i.removeChild(a)}),this.tags=[],this.ctr=0},t}(),si="-ms-",jw="-moz-",nr="-webkit-",wU="comm",dD="rule",hD="decl",the="@import",NU="@keyframes",nhe="@layer",rhe=Math.abs,YN=String.fromCharCode,ahe=Object.assign;function ihe(t,e){return Ua(t,0)^45?(((e<<2^Ua(t,0))<<2^Ua(t,1))<<2^Ua(t,2))<<2^Ua(t,3):0}function SU(t){return t.trim()}function she(t,e){return(t=e.exec(t))?t[0]:t}function rr(t,e,n){return t.replace(e,n)}function UE(t,e){return t.indexOf(e)}function Ua(t,e){return t.charCodeAt(e)|0}function Ov(t,e,n){return t.slice(e,n)}function Nl(t){return t.length}function fD(t){return t.length}function jj(t,e){return e.push(t),t}function ohe(t,e){return t.map(e).join("")}var KN=1,ag=1,_U=0,is=0,ma=0,Fg="";function QN(t,e,n,a,i,s,o){return{value:t,root:e,parent:n,type:a,props:i,children:s,line:KN,column:ag,length:o,return:""}}function Gx(t,e){return ahe(QN("",null,null,"",null,null,0),t,{length:-t.length},e)}function lhe(){return ma}function che(){return ma=is>0?Ua(Fg,--is):0,ag--,ma===10&&(ag=1,KN--),ma}function ks(){return ma=is<_U?Ua(Fg,is++):0,ag++,ma===10&&(ag=1,KN++),ma}function Al(){return Ua(Fg,is)}function ew(){return is}function Mb(t,e){return Ov(Fg,t,e)}function Dv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function CU(t){return KN=ag=1,_U=Nl(Fg=t),is=0,[]}function TU(t){return Fg="",t}function tw(t){return SU(Mb(is-1,VE(t===91?t+2:t===40?t+1:t)))}function uhe(t){for(;(ma=Al())&&ma<33;)ks();return Dv(t)>2||Dv(ma)>3?"":" "}function dhe(t,e){for(;--e&&ks()&&!(ma<48||ma>102||ma>57&&ma<65||ma>70&&ma<97););return Mb(t,ew()+(e<6&&Al()==32&&ks()==32))}function VE(t){for(;ks();)switch(ma){case t:return is;case 34:case 39:t!==34&&t!==39&&VE(ma);break;case 40:t===41&&VE(t);break;case 92:ks();break}return is}function hhe(t,e){for(;ks()&&t+ma!==57;)if(t+ma===84&&Al()===47)break;return"/*"+Mb(e,is-1)+"*"+YN(t===47?t:ks())}function fhe(t){for(;!Dv(Al());)ks();return Mb(t,is)}function phe(t){return TU(nw("",null,null,null,[""],t=CU(t),0,[0],t))}function nw(t,e,n,a,i,s,o,l,c){for(var d=0,f=0,p=o,g=0,x=0,b=0,j=1,S=1,_=1,T=0,C="",P=i,k=s,O=a,I=C;S;)switch(b=T,T=ks()){case 40:if(b!=108&&Ua(I,p-1)==58){UE(I+=rr(tw(T),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=tw(T);break;case 9:case 10:case 13:case 32:I+=uhe(b);break;case 92:I+=dhe(ew()-1,7);continue;case 47:switch(Al()){case 42:case 47:jj(mhe(hhe(ks(),ew()),e,n),c);break;default:I+="/"}break;case 123*j:l[d++]=Nl(I)*_;case 125*j:case 59:case 0:switch(T){case 0:case 125:S=0;case 59+f:_==-1&&(I=rr(I,/\f/g,"")),x>0&&Nl(I)-p&&jj(x>32?C4(I+";",a,n,p-1):C4(rr(I," ","")+";",a,n,p-2),c);break;case 59:I+=";";default:if(jj(O=_4(I,e,n,d,f,i,l,C,P=[],k=[],p),s),T===123)if(f===0)nw(I,e,O,O,P,s,p,l,k);else switch(g===99&&Ua(I,3)===110?100:g){case 100:case 108:case 109:case 115:nw(t,O,O,a&&jj(_4(t,O,O,0,0,i,l,C,i,P=[],p),k),i,k,p,l,a?P:k);break;default:nw(I,O,O,O,[""],k,0,l,k)}}d=f=x=0,j=_=1,C=I="",p=o;break;case 58:p=1+Nl(I),x=b;default:if(j<1){if(T==123)--j;else if(T==125&&j++==0&&che()==125)continue}switch(I+=YN(T),T*j){case 38:_=f>0?1:(I+="\f",-1);break;case 44:l[d++]=(Nl(I)-1)*_,_=1;break;case 64:Al()===45&&(I+=tw(ks())),g=Al(),f=p=Nl(C=I+=fhe(ew())),T++;break;case 45:b===45&&Nl(I)==2&&(j=0)}}return s}function _4(t,e,n,a,i,s,o,l,c,d,f){for(var p=i-1,g=i===0?s:[""],x=fD(g),b=0,j=0,S=0;b<a;++b)for(var _=0,T=Ov(t,p+1,p=rhe(j=o[b])),C=t;_<x;++_)(C=SU(j>0?g[_]+" "+T:rr(T,/&\f/g,g[_])))&&(c[S++]=C);return QN(t,e,n,i===0?dD:l,c,d,f)}function mhe(t,e,n){return QN(t,e,n,wU,YN(lhe()),Ov(t,2,-2),0)}function C4(t,e,n,a){return QN(t,e,n,hD,Ov(t,0,a),Ov(t,a+1,-1),a)}function Rm(t,e){for(var n="",a=fD(t),i=0;i<a;i++)n+=e(t[i],i,t,e)||"";return n}function ghe(t,e,n,a){switch(t.type){case nhe:if(t.children.length)break;case the:case hD:return t.return=t.return||t.value;case wU:return"";case NU:return t.return=t.value+"{"+Rm(t.children,a)+"}";case dD:t.value=t.props.join(",")}return Nl(n=Rm(t.children,a))?t.return=t.value+"{"+n+"}":""}function yhe(t){var e=fD(t);return function(n,a,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,a,i,s)||"";return o}}function xhe(t){return function(e){e.root||(e=e.return)&&t(e)}}function vhe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var bhe=function(e,n,a){for(var i=0,s=0;i=s,s=Al(),i===38&&s===12&&(n[a]=1),!Dv(s);)ks();return Mb(e,is)},jhe=function(e,n){var a=-1,i=44;do switch(Dv(i)){case 0:i===38&&Al()===12&&(n[a]=1),e[a]+=bhe(is-1,n,a);break;case 2:e[a]+=tw(i);break;case 4:if(i===44){e[++a]=Al()===58?"&\f":"",n[a]=e[a].length;break}default:e[a]+=YN(i)}while(i=ks());return e},whe=function(e,n){return TU(jhe(CU(e),n))},T4=new WeakMap,Nhe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,a=e.parent,i=e.column===a.column&&e.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!T4.get(a))&&!i){T4.set(e,!0);for(var s=[],o=whe(n,s),l=a.props,c=0,d=0;c<o.length;c++)for(var f=0;f<l.length;f++,d++)e.props[d]=s[c]?o[c].replace(/&\f/g,l[f]):l[f]+" "+o[c]}}},She=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function kU(t,e){switch(ihe(t,e)){case 5103:return nr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return nr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return nr+t+jw+t+si+t+t;case 6828:case 4268:return nr+t+si+t+t;case 6165:return nr+t+si+"flex-"+t+t;case 5187:return nr+t+rr(t,/(\w+).+(:[^]+)/,nr+"box-$1$2"+si+"flex-$1$2")+t;case 5443:return nr+t+si+"flex-item-"+rr(t,/flex-|-self/,"")+t;case 4675:return nr+t+si+"flex-line-pack"+rr(t,/align-content|flex-|-self/,"")+t;case 5548:return nr+t+si+rr(t,"shrink","negative")+t;case 5292:return nr+t+si+rr(t,"basis","preferred-size")+t;case 6060:return nr+"box-"+rr(t,"-grow","")+nr+t+si+rr(t,"grow","positive")+t;case 4554:return nr+rr(t,/([^-])(transform)/g,"$1"+nr+"$2")+t;case 6187:return rr(rr(rr(t,/(zoom-|grab)/,nr+"$1"),/(image-set)/,nr+"$1"),t,"")+t;case 5495:case 3959:return rr(t,/(image-set\([^]*)/,nr+"$1$`$1");case 4968:return rr(rr(t,/(.+:)(flex-)?(.*)/,nr+"box-pack:$3"+si+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+nr+t+t;case 4095:case 3583:case 4068:case 2532:return rr(t,/(.+)-inline(.+)/,nr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Nl(t)-1-e>6)switch(Ua(t,e+1)){case 109:if(Ua(t,e+4)!==45)break;case 102:return rr(t,/(.+:)(.+)-([^]+)/,"$1"+nr+"$2-$3$1"+jw+(Ua(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~UE(t,"stretch")?kU(rr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ua(t,e+1)!==115)break;case 6444:switch(Ua(t,Nl(t)-3-(~UE(t,"!important")&&10))){case 107:return rr(t,":",":"+nr)+t;case 101:return rr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+nr+(Ua(t,14)===45?"inline-":"")+"box$3$1"+nr+"$2$3$1"+si+"$2box$3")+t}break;case 5936:switch(Ua(t,e+11)){case 114:return nr+t+si+rr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return nr+t+si+rr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return nr+t+si+rr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return nr+t+si+t+t}return t}var _he=function(e,n,a,i){if(e.length>-1&&!e.return)switch(e.type){case hD:e.return=kU(e.value,e.length);break;case NU:return Rm([Gx(e,{value:rr(e.value,"@","@"+nr)})],i);case dD:if(e.length)return ohe(e.props,function(s){switch(she(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Rm([Gx(e,{props:[rr(s,/:(read-\w+)/,":"+jw+"$1")]})],i);case"::placeholder":return Rm([Gx(e,{props:[rr(s,/:(plac\w+)/,":"+nr+"input-$1")]}),Gx(e,{props:[rr(s,/:(plac\w+)/,":"+jw+"$1")]}),Gx(e,{props:[rr(s,/:(plac\w+)/,si+"input-$1")]})],i)}return""})}},Che=[_he],The=function(e){var n=e.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(j){var S=j.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var i=e.stylisPlugins||Che,s={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(j){for(var S=j.getAttribute("data-emotion").split(" "),_=1;_<S.length;_++)s[S[_]]=!0;l.push(j)});var c,d=[Nhe,She];{var f,p=[ghe,xhe(function(j){f.insert(j)})],g=yhe(d.concat(i,p)),x=function(S){return Rm(phe(S),g)};c=function(S,_,T,C){f=T,x(S?S+"{"+_.styles+"}":_.styles),C&&(b.inserted[_.name]=!0)}}var b={key:n,sheet:new ehe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return b.sheet.hydrate(l),b},wC={exports:{}},or={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k4;function khe(){if(k4)return or;k4=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,a=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,j=t?Symbol.for("react.block"):60121,S=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,T=t?Symbol.for("react.scope"):60119;function C(k){if(typeof k=="object"&&k!==null){var O=k.$$typeof;switch(O){case e:switch(k=k.type,k){case c:case d:case a:case s:case i:case p:return k;default:switch(k=k&&k.$$typeof,k){case l:case f:case b:case x:case o:return k;default:return O}}case n:return O}}}function P(k){return C(k)===d}return or.AsyncMode=c,or.ConcurrentMode=d,or.ContextConsumer=l,or.ContextProvider=o,or.Element=e,or.ForwardRef=f,or.Fragment=a,or.Lazy=b,or.Memo=x,or.Portal=n,or.Profiler=s,or.StrictMode=i,or.Suspense=p,or.isAsyncMode=function(k){return P(k)||C(k)===c},or.isConcurrentMode=P,or.isContextConsumer=function(k){return C(k)===l},or.isContextProvider=function(k){return C(k)===o},or.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},or.isForwardRef=function(k){return C(k)===f},or.isFragment=function(k){return C(k)===a},or.isLazy=function(k){return C(k)===b},or.isMemo=function(k){return C(k)===x},or.isPortal=function(k){return C(k)===n},or.isProfiler=function(k){return C(k)===s},or.isStrictMode=function(k){return C(k)===i},or.isSuspense=function(k){return C(k)===p},or.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===a||k===d||k===s||k===i||k===p||k===g||typeof k=="object"&&k!==null&&(k.$$typeof===b||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===f||k.$$typeof===S||k.$$typeof===_||k.$$typeof===T||k.$$typeof===j)},or.typeOf=C,or}var A4;function Ahe(){return A4||(A4=1,wC.exports=khe()),wC.exports}var NC,E4;function Ehe(){if(E4)return NC;E4=1;var t=Ahe(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=a,s[t.Memo]=i;function o(b){return t.isMemo(b)?i:s[b.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function x(b,j,S){if(typeof j!="string"){if(g){var _=p(j);_&&_!==g&&x(b,_,S)}var T=c(j);d&&(T=T.concat(d(j)));for(var C=o(b),P=o(j),k=0;k<T.length;++k){var O=T[k];if(!n[O]&&!(S&&S[O])&&!(P&&P[O])&&!(C&&C[O])){var I=f(j,O);try{l(b,O,I)}catch{}}}}return b}return NC=x,NC}Ehe();var Phe=!0;function Ohe(t,e,n){var a="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(a+=i+" ")}),a}var AU=function(e,n,a){var i=e.key+"-"+n.name;(a===!1||Phe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Dhe=function(e,n,a){AU(e,n,a);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Mhe(t){for(var e=0,n,a=0,i=t.length;i>=4;++a,i-=4)n=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(a+2)&255)<<16;case 2:e^=(t.charCodeAt(a+1)&255)<<8;case 1:e^=t.charCodeAt(a)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Ihe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Rhe=/[A-Z]|^ms/g,Lhe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,EU=function(e){return e.charCodeAt(1)===45},P4=function(e){return e!=null&&typeof e!="boolean"},SC=vhe(function(t){return EU(t)?t:t.replace(Rhe,"-$&").toLowerCase()}),O4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Lhe,function(a,i,s){return Sl={name:i,styles:s,next:Sl},i})}return Ihe[e]!==1&&!EU(e)&&typeof n=="number"&&n!==0?n+"px":n};function Mv(t,e,n){if(n==null)return"";var a=n;if(a.__emotion_styles!==void 0)return a;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Sl={name:i.name,styles:i.styles,next:Sl},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Sl={name:o.name,styles:o.styles,next:Sl},o=o.next;var l=s.styles+";";return l}return Fhe(t,e,n)}case"function":{if(t!==void 0){var c=Sl,d=n(t);return Sl=c,Mv(t,e,d)}break}}var f=n;return f}function Fhe(t,e,n){var a="";if(Array.isArray(n))for(var i=0;i<n.length;i++)a+=Mv(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var l=o;P4(l)&&(a+=SC(s)+":"+O4(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var c=0;c<o.length;c++)P4(o[c])&&(a+=SC(s)+":"+O4(s,o[c])+";");else{var d=Mv(t,e,o);switch(s){case"animation":case"animationName":{a+=SC(s)+":"+d+";";break}default:a+=s+"{"+d+"}"}}}return a}var D4=/label:\s*([^\s;{]+)\s*(;|$)/g,Sl;function PU(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,i="";Sl=void 0;var s=t[0];if(s==null||s.raw===void 0)a=!1,i+=Mv(n,e,s);else{var o=s;i+=o[0]}for(var l=1;l<t.length;l++)if(i+=Mv(n,e,t[l]),a){var c=s;i+=c[l]}D4.lastIndex=0;for(var d="",f;(f=D4.exec(i))!==null;)d+="-"+f[1];var p=Mhe(i)+d;return{name:p,styles:i,next:Sl}}var $he=function(e){return e()},Bhe=LM.useInsertionEffect?LM.useInsertionEffect:!1,zhe=Bhe||$he,OU=v.createContext(typeof HTMLElement<"u"?The({key:"css"}):null);OU.Provider;var qhe=function(e){return v.forwardRef(function(n,a){var i=v.useContext(OU);return e(n,i,a)})},Uhe=v.createContext({}),pD={}.hasOwnProperty,HE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Vhe=function(e,n){var a={};for(var i in n)pD.call(n,i)&&(a[i]=n[i]);return a[HE]=e,a},Hhe=function(e){var n=e.cache,a=e.serialized,i=e.isStringTag;return AU(n,a,i),zhe(function(){return Dhe(n,a,i)}),null},Ghe=qhe(function(t,e,n){var a=t.css;typeof a=="string"&&e.registered[a]!==void 0&&(a=e.registered[a]);var i=t[HE],s=[a],o="";typeof t.className=="string"?o=Ohe(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var l=PU(s,void 0,v.useContext(Uhe));o+=e.key+"-"+l.name;var c={};for(var d in t)pD.call(t,d)&&d!=="css"&&d!==HE&&(c[d]=t[d]);return c.className=o,n&&(c.ref=n),v.createElement(v.Fragment,null,v.createElement(Hhe,{cache:e,serialized:l,isStringTag:typeof i=="string"}),v.createElement(i,c))}),Whe=Ghe,qt=function(e,n){var a=arguments;if(n==null||!pD.call(n,"css"))return v.createElement.apply(void 0,a);var i=a.length,s=new Array(i);s[0]=Whe,s[1]=Vhe(e,n);for(var o=2;o<i;o++)s[o]=a[o];return v.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(qt||(qt={}));function mD(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return PU(e)}function Yhe(){var t=mD.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function Khe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const Qhe=Math.min,Xhe=Math.max,ww=Math.round,wj=Math.floor,Nw=t=>({x:t,y:t});function Jhe(t){const{x:e,y:n,width:a,height:i}=t;return{width:a,height:i,top:n,left:e,right:e+a,bottom:n+i,x:e,y:n}}function XN(){return typeof window<"u"}function DU(t){return IU(t)?(t.nodeName||"").toLowerCase():"#document"}function Ic(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function MU(t){var e;return(e=(IU(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function IU(t){return XN()?t instanceof Node||t instanceof Ic(t).Node:!1}function Zhe(t){return XN()?t instanceof Element||t instanceof Ic(t).Element:!1}function gD(t){return XN()?t instanceof HTMLElement||t instanceof Ic(t).HTMLElement:!1}function M4(t){return!XN()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ic(t).ShadowRoot}const efe=new Set(["inline","contents"]);function RU(t){const{overflow:e,overflowX:n,overflowY:a,display:i}=yD(t);return/auto|scroll|overlay|hidden|clip/.test(e+a+n)&&!efe.has(i)}function tfe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const nfe=new Set(["html","body","#document"]);function rfe(t){return nfe.has(DU(t))}function yD(t){return Ic(t).getComputedStyle(t)}function afe(t){if(DU(t)==="html")return t;const e=t.assignedSlot||t.parentNode||M4(t)&&t.host||MU(t);return M4(e)?e.host:e}function LU(t){const e=afe(t);return rfe(e)?t.ownerDocument?t.ownerDocument.body:t.body:gD(e)&&RU(e)?e:LU(e)}function Sw(t,e,n){var a;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=LU(t),s=i===((a=t.ownerDocument)==null?void 0:a.body),o=Ic(i);if(s){const l=GE(o);return e.concat(o,o.visualViewport||[],RU(i)?i:[],l&&n?Sw(l):[])}return e.concat(i,Sw(i,[],n))}function GE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ife(t){const e=yD(t);let n=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const i=gD(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:a,l=ww(n)!==s||ww(a)!==o;return l&&(n=s,a=o),{width:n,height:a,$:l}}function xD(t){return Zhe(t)?t:t.contextElement}function I4(t){const e=xD(t);if(!gD(e))return Nw(1);const n=e.getBoundingClientRect(),{width:a,height:i,$:s}=ife(e);let o=(s?ww(n.width):n.width)/a,l=(s?ww(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const sfe=Nw(0);function ofe(t){const e=Ic(t);return!tfe()||!e.visualViewport?sfe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function lfe(t,e,n){return!1}function R4(t,e,n,a){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),s=xD(t);let o=Nw(1);e&&(o=I4(t));const l=lfe()?ofe(s):Nw(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(s){const g=Ic(s),x=a;let b=g,j=GE(b);for(;j&&a&&x!==b;){const S=I4(j),_=j.getBoundingClientRect(),T=yD(j),C=_.left+(j.clientLeft+parseFloat(T.paddingLeft))*S.x,P=_.top+(j.clientTop+parseFloat(T.paddingTop))*S.y;c*=S.x,d*=S.y,f*=S.x,p*=S.y,c+=C,d+=P,b=Ic(j),j=GE(b)}}return Jhe({width:f,height:p,x:c,y:d})}function FU(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function cfe(t,e){let n=null,a;const i=MU(t);function s(){var l;clearTimeout(a),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const d=t.getBoundingClientRect(),{left:f,top:p,width:g,height:x}=d;if(l||e(),!g||!x)return;const b=wj(p),j=wj(i.clientWidth-(f+g)),S=wj(i.clientHeight-(p+x)),_=wj(f),C={rootMargin:-b+"px "+-j+"px "+-S+"px "+-_+"px",threshold:Xhe(0,Qhe(1,c))||1};let P=!0;function k(O){const I=O[0].intersectionRatio;if(I!==c){if(!P)return o();I?o(!1,I):a=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!FU(d,t.getBoundingClientRect())&&o(),P=!1}try{n=new IntersectionObserver(k,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,C)}n.observe(t)}return o(!0),s}function ufe(t,e,n,a){a===void 0&&(a={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,d=xD(t),f=i||s?[...d?Sw(d):[],...Sw(e)]:[];f.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=d&&l?cfe(d,n):null;let g=-1,x=null;o&&(x=new ResizeObserver(_=>{let[T]=_;T&&T.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let b,j=c?R4(t):null;c&&S();function S(){const _=R4(t);j&&!FU(j,_)&&n(),j=_,b=requestAnimationFrame(S)}return n(),()=>{var _;f.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p==null||p(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(b)}}var WE=v.useLayoutEffect,dfe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],_w=function(){};function hfe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function ffe(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var s=[].concat(a);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(hfe(t,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var L4=function(e){return wfe(e)?e.filter(Boolean):wf(e)==="object"&&e!==null?[e]:[]},$U=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Uc(e,dfe);return Yt({},n)},Jr=function(e,n,a){var i=e.cx,s=e.getStyles,o=e.getClassNames,l=e.className;return{css:s(n,e),className:i(a??{},o(n,e),l)}};function JN(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function pfe(t){return JN(t)?window.innerHeight:t.clientHeight}function BU(t){return JN(t)?window.pageYOffset:t.scrollTop}function Cw(t,e){if(JN(t)){window.scrollTo(0,e);return}t.scrollTop=e}function mfe(t){var e=getComputedStyle(t),n=e.position==="absolute",a=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&a.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function gfe(t,e,n,a){return n*((t=t/a-1)*t*t+1)+e}function Nj(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_w,i=BU(t),s=e-i,o=10,l=0;function c(){l+=o;var d=gfe(l,i,s,n);Cw(t,d),l<n?window.requestAnimationFrame(c):a(t)}c()}function F4(t,e){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=e.offsetHeight/3;a.bottom+i>n.bottom?Cw(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):a.top-i<n.top&&Cw(t,Math.max(e.offsetTop-i,0))}function yfe(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function $4(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function xfe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var zU=!1,vfe={get passive(){return zU=!0}},Sj=typeof window<"u"?window:{};Sj.addEventListener&&Sj.removeEventListener&&(Sj.addEventListener("p",_w,vfe),Sj.removeEventListener("p",_w,!1));var bfe=zU;function jfe(t){return t!=null}function wfe(t){return Array.isArray(t)}function _j(t,e,n){return t?e:n}var Nfe=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var l=Cc(o,1),c=l[0];return!a.includes(c)});return s.reduce(function(o,l){var c=Cc(l,2),d=c[0],f=c[1];return o[d]=f,o},{})},Sfe=["children","innerProps"],_fe=["children","innerProps"];function Cfe(t){var e=t.maxHeight,n=t.menuEl,a=t.minHeight,i=t.placement,s=t.shouldScroll,o=t.isFixedPosition,l=t.controlHeight,c=mfe(n),d={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return d;var f=c.getBoundingClientRect(),p=f.height,g=n.getBoundingClientRect(),x=g.bottom,b=g.height,j=g.top,S=n.offsetParent.getBoundingClientRect(),_=S.top,T=o?window.innerHeight:pfe(c),C=BU(c),P=parseInt(getComputedStyle(n).marginBottom,10),k=parseInt(getComputedStyle(n).marginTop,10),O=_-k,I=T-j,F=O+C,B=p-C-j,$=x-T+C+P,L=C+j-k,V=160;switch(i){case"auto":case"bottom":if(I>=b)return{placement:"bottom",maxHeight:e};if(B>=b&&!o)return s&&Nj(c,$,V),{placement:"bottom",maxHeight:e};if(!o&&B>=a||o&&I>=a){s&&Nj(c,$,V);var H=o?I-P:B-P;return{placement:"bottom",maxHeight:H}}if(i==="auto"||o){var te=e,X=o?O:F;return X>=a&&(te=Math.min(X-P-l,e)),{placement:"top",maxHeight:te}}if(i==="bottom")return s&&Cw(c,$),{placement:"bottom",maxHeight:e};break;case"top":if(O>=b)return{placement:"top",maxHeight:e};if(F>=b&&!o)return s&&Nj(c,L,V),{placement:"top",maxHeight:e};if(!o&&F>=a||o&&O>=a){var q=e;return(!o&&F>=a||o&&O>=a)&&(q=o?O-k:F-k),s&&Nj(c,L,V),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return d}function Tfe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var qU=function(e){return e==="auto"?"bottom":e},kfe=function(e,n){var a,i=e.placement,s=e.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return Yt((a={label:"menu"},uv(a,Tfe(i),"100%"),uv(a,"position","absolute"),uv(a,"width","100%"),uv(a,"zIndex",1),a),n?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},UU=v.createContext(null),Afe=function(e){var n=e.children,a=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,l=e.menuShouldScrollIntoView,c=e.theme,d=v.useContext(UU)||{},f=d.setPortalPlacement,p=v.useRef(null),g=v.useState(i),x=Cc(g,2),b=x[0],j=x[1],S=v.useState(null),_=Cc(S,2),T=_[0],C=_[1],P=c.spacing.controlHeight;return WE(function(){var k=p.current;if(k){var O=o==="fixed",I=l&&!O,F=Cfe({maxHeight:i,menuEl:k,minHeight:a,placement:s,shouldScroll:I,isFixedPosition:O,controlHeight:P});j(F.maxHeight),C(F.placement),f==null||f(F.placement)}},[i,s,o,l,a,f,P]),n({ref:p,placerProps:Yt(Yt({},e),{},{placement:T||qU(s),maxHeight:b})})},Efe=function(e){var n=e.children,a=e.innerRef,i=e.innerProps;return qt("div",Zt({},Jr(e,"menu",{menu:!0}),{ref:a},i),n)},Pfe=Efe,Ofe=function(e,n){var a=e.maxHeight,i=e.theme.spacing.baseUnit;return Yt({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},Dfe=function(e){var n=e.children,a=e.innerProps,i=e.innerRef,s=e.isMulti;return qt("div",Zt({},Jr(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},a),n)},VU=function(e,n){var a=e.theme,i=a.spacing.baseUnit,s=a.colors;return Yt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Mfe=VU,Ife=VU,Rfe=function(e){var n=e.children,a=n===void 0?"No options":n,i=e.innerProps,s=Uc(e,Sfe);return qt("div",Zt({},Jr(Yt(Yt({},s),{},{children:a,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),a)},Lfe=function(e){var n=e.children,a=n===void 0?"Loading...":n,i=e.innerProps,s=Uc(e,_fe);return qt("div",Zt({},Jr(Yt(Yt({},s),{},{children:a,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),a)},Ffe=function(e){var n=e.rect,a=e.offset,i=e.position;return{left:n.left,position:i,top:a,width:n.width,zIndex:1}},$fe=function(e){var n=e.appendTo,a=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,l=e.menuPosition,c=v.useRef(null),d=v.useRef(null),f=v.useState(qU(o)),p=Cc(f,2),g=p[0],x=p[1],b=v.useMemo(function(){return{setPortalPlacement:x}},[]),j=v.useState(null),S=Cc(j,2),_=S[0],T=S[1],C=v.useCallback(function(){if(i){var I=yfe(i),F=l==="fixed"?0:window.pageYOffset,B=I[g]+F;(B!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&T({offset:B,rect:I})}},[i,l,g,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);WE(function(){C()},[C]);var P=v.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),i&&c.current&&(d.current=ufe(i,c.current,C,{elementResize:"ResizeObserver"in window}))},[i,C]);WE(function(){P()},[P]);var k=v.useCallback(function(I){c.current=I,P()},[P]);if(!n&&l!=="fixed"||!_)return null;var O=qt("div",Zt({ref:k},Jr(Yt(Yt({},e),{},{offset:_.offset,position:l,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),a);return qt(UU.Provider,{value:b},n?vK.createPortal(O,n):O)},Bfe=function(e){var n=e.isDisabled,a=e.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},zfe=function(e){var n=e.children,a=e.innerProps,i=e.isDisabled,s=e.isRtl;return qt("div",Zt({},Jr(e,"container",{"--is-disabled":i,"--is-rtl":s}),a),n)},qfe=function(e,n){var a=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Yt({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},Ufe=function(e){var n=e.children,a=e.innerProps,i=e.isMulti,s=e.hasValue;return qt("div",Zt({},Jr(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),a),n)},Vfe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Hfe=function(e){var n=e.children,a=e.innerProps;return qt("div",Zt({},Jr(e,"indicatorsContainer",{indicators:!0}),a),n)},B4,Gfe=["size"],Wfe=["innerProps","isRtl","size"],Yfe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},HU=function(e){var n=e.size,a=Uc(e,Gfe);return qt("svg",Zt({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Yfe},a))},vD=function(e){return qt(HU,Zt({size:20},e),qt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},GU=function(e){return qt(HU,Zt({size:20},e),qt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},WU=function(e,n){var a=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Yt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:a?o.neutral60:o.neutral20,padding:s*2,":hover":{color:a?o.neutral80:o.neutral40}})},Kfe=WU,Qfe=function(e){var n=e.children,a=e.innerProps;return qt("div",Zt({},Jr(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),n||qt(GU,null))},Xfe=WU,Jfe=function(e){var n=e.children,a=e.innerProps;return qt("div",Zt({},Jr(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),n||qt(vD,null))},Zfe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Yt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:a?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},epe=function(e){var n=e.innerProps;return qt("span",Zt({},n,Jr(e,"indicatorSeparator",{"indicator-separator":!0})))},tpe=Yhe(B4||(B4=Khe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),npe=function(e,n){var a=e.isFocused,i=e.size,s=e.theme,o=s.colors,l=s.spacing.baseUnit;return Yt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:a?o.neutral60:o.neutral20,padding:l*2})},_C=function(e){var n=e.delay,a=e.offset;return qt("span",{css:mD({animation:"".concat(tpe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},rpe=function(e){var n=e.innerProps,a=e.isRtl,i=e.size,s=i===void 0?4:i,o=Uc(e,Wfe);return qt("div",Zt({},Jr(Yt(Yt({},o),{},{innerProps:n,isRtl:a,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),qt(_C,{delay:0,offset:a}),qt(_C,{delay:160,offset:!0}),qt(_C,{delay:320,offset:!a}))},ape=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return Yt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:a?o.neutral5:o.neutral0,borderColor:a?o.neutral10:i?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},ipe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,l=e.menuIsOpen;return qt("div",Zt({ref:s},Jr(e,"control",{control:!0,"control--is-disabled":a,"control--is-focused":i,"control--menu-is-open":l}),o,{"aria-disabled":a||void 0}),n)},spe=ipe,ope=["data"],lpe=function(e,n){var a=e.theme.spacing;return n?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},cpe=function(e){var n=e.children,a=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,l=e.headingProps,c=e.innerProps,d=e.label,f=e.theme,p=e.selectProps;return qt("div",Zt({},Jr(e,"group",{group:!0}),c),qt(o,Zt({},l,{selectProps:p,theme:f,getStyles:i,getClassNames:s,cx:a}),d),qt("div",null,n))},upe=function(e,n){var a=e.theme,i=a.colors,s=a.spacing;return Yt({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},dpe=function(e){var n=$U(e);n.data;var a=Uc(n,ope);return qt("div",Zt({},Jr(e,"groupHeading",{"group-heading":!0}),a))},hpe=cpe,fpe=["innerRef","isDisabled","isHidden","inputClassName"],ppe=function(e,n){var a=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,l=s.colors;return Yt(Yt({visibility:a?"hidden":"visible",transform:i?"translateZ(0)":""},mpe),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},YU={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},mpe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Yt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},YU)},gpe=function(e){return Yt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},YU)},ype=function(e){var n=e.cx,a=e.value,i=$U(e),s=i.innerRef,o=i.isDisabled,l=i.isHidden,c=i.inputClassName,d=Uc(i,fpe);return qt("div",Zt({},Jr(e,"input",{"input-container":!0}),{"data-value":a||""}),qt("input",Zt({className:n({input:!0},c),ref:s,style:gpe(l),disabled:o},d)))},xpe=ype,vpe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors;return Yt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},bpe=function(e,n){var a=e.theme,i=a.borderRadius,s=a.colors,o=e.cropWithEllipsis;return Yt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},jpe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors,l=e.isFocused;return Yt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},KU=function(e){var n=e.children,a=e.innerProps;return qt("div",a,n)},wpe=KU,Npe=KU;function Spe(t){var e=t.children,n=t.innerProps;return qt("div",Zt({role:"button"},n),e||qt(vD,{size:14}))}var _pe=function(e){var n=e.children,a=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,l=e.removeProps,c=e.selectProps,d=a.Container,f=a.Label,p=a.Remove;return qt(d,{data:i,innerProps:Yt(Yt({},Jr(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},qt(f,{data:i,innerProps:Yt({},Jr(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),qt(p,{data:i,innerProps:Yt(Yt({},Jr(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},Cpe=_pe,Tpe=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,l=o.spacing,c=o.colors;return Yt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?c.primary:i?c.primary25:"transparent",color:a?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:s?c.primary:c.primary50}})},kpe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,l=e.innerProps;return qt("div",Zt({},Jr(e,"option",{option:!0,"option--is-disabled":a,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":a},l),n)},Ape=kpe,Epe=function(e,n){var a=e.theme,i=a.spacing,s=a.colors;return Yt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Ppe=function(e){var n=e.children,a=e.innerProps;return qt("div",Zt({},Jr(e,"placeholder",{placeholder:!0}),a),n)},Ope=Ppe,Dpe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return Yt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:a?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Mpe=function(e){var n=e.children,a=e.isDisabled,i=e.innerProps;return qt("div",Zt({},Jr(e,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),i),n)},Ipe=Mpe,Rpe={ClearIndicator:Jfe,Control:spe,DropdownIndicator:Qfe,DownChevron:GU,CrossIcon:vD,Group:hpe,GroupHeading:dpe,IndicatorsContainer:Hfe,IndicatorSeparator:epe,Input:xpe,LoadingIndicator:rpe,Menu:Pfe,MenuList:Dfe,MenuPortal:$fe,LoadingMessage:Lfe,NoOptionsMessage:Rfe,MultiValue:Cpe,MultiValueContainer:wpe,MultiValueLabel:Npe,MultiValueRemove:Spe,Option:Ape,Placeholder:Ope,SelectContainer:zfe,SingleValue:Ipe,ValueContainer:Ufe},Lpe=function(e){return Yt(Yt({},Rpe),e.components)},z4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Fpe(t,e){return!!(t===e||z4(t)&&z4(e))}function $pe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Fpe(t[n],e[n]))return!1;return!0}function Bpe(t,e){e===void 0&&(e=$pe);var n=null;function a(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return a.clear=function(){n=null},a}var zpe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},qpe=function(e){return qt("span",Zt({css:zpe},e))},q4=qpe,Upe={guidance:function(e){var n=e.isSearchable,a=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,a=e.label,i=a===void 0?"":a,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,a=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,l=e.selectValue,c=e.isDisabled,d=e.isSelected,f=e.isAppleDevice,p=function(j,S){return j&&j.length?"".concat(j.indexOf(S)+1," of ").concat(j.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(p(l,a),".");if(n==="menu"&&f){var g=c?" disabled":"",x="".concat(d?" selected":"").concat(g);return"".concat(o).concat(x,", ").concat(p(i,a),".")}return""},onFilter:function(e){var n=e.inputValue,a=e.resultsMessage;return"".concat(a).concat(n?" for search term "+n:"",".")}},Vpe=function(e){var n=e.ariaSelection,a=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,l=e.selectValue,c=e.selectProps,d=e.id,f=e.isAppleDevice,p=c.ariaLiveMessages,g=c.getOptionLabel,x=c.inputValue,b=c.isMulti,j=c.isOptionDisabled,S=c.isSearchable,_=c.menuIsOpen,T=c.options,C=c.screenReaderStatus,P=c.tabSelectsValue,k=c.isLoading,O=c["aria-label"],I=c["aria-live"],F=v.useMemo(function(){return Yt(Yt({},Upe),p||{})},[p]),B=v.useMemo(function(){var X="";if(n&&F.onChange){var q=n.option,Y=n.options,se=n.removedValue,G=n.removedValues,z=n.value,ce=function(ve){return Array.isArray(ve)?null:ve},we=se||q||ce(z),K=we?g(we):"",Ie=Y||G||void 0,We=Ie?Ie.map(g):[],Re=Yt({isDisabled:we&&j(we,l),label:K,labels:We},n);X=F.onChange(Re)}return X},[n,F,j,l,g]),$=v.useMemo(function(){var X="",q=a||i,Y=!!(a&&l&&l.includes(a));if(q&&F.onFocus){var se={focused:q,label:g(q),isDisabled:j(q,l),isSelected:Y,options:s,context:q===a?"menu":"value",selectValue:l,isAppleDevice:f};X=F.onFocus(se)}return X},[a,i,g,j,F,s,l,f]),L=v.useMemo(function(){var X="";if(_&&T.length&&!k&&F.onFilter){var q=C({count:s.length});X=F.onFilter({inputValue:x,resultsMessage:q})}return X},[s,x,_,F,T,C,k]),V=(n==null?void 0:n.action)==="initial-input-focus",H=v.useMemo(function(){var X="";if(F.guidance){var q=i?"value":_?"menu":"input";X=F.guidance({"aria-label":O,context:q,isDisabled:a&&j(a,l),isMulti:b,isSearchable:S,tabSelectsValue:P,isInitialFocus:V})}return X},[O,a,i,b,j,S,_,F,l,P,V]),te=qt(v.Fragment,null,qt("span",{id:"aria-selection"},B),qt("span",{id:"aria-focused"},$),qt("span",{id:"aria-results"},L),qt("span",{id:"aria-guidance"},H));return qt(v.Fragment,null,qt(q4,{id:d},V&&te),qt(q4,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!V&&te))},Hpe=Vpe,YE=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Gpe=new RegExp("["+YE.map(function(t){return t.letters}).join("")+"]","g"),QU={};for(var CC=0;CC<YE.length;CC++)for(var TC=YE[CC],kC=0;kC<TC.letters.length;kC++)QU[TC.letters[kC]]=TC.base;var XU=function(e){return e.replace(Gpe,function(n){return QU[n]})},Wpe=Bpe(XU),U4=function(e){return e.replace(/^\s+|\s+$/g,"")},Ype=function(e){return"".concat(e.label," ").concat(e.value)},Kpe=function(e){return function(n,a){if(n.data.__isNew__)return!0;var i=Yt({ignoreCase:!0,ignoreAccents:!0,stringify:Ype,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,l=i.stringify,c=i.trim,d=i.matchFrom,f=c?U4(a):a,p=c?U4(l(n)):l(n);return s&&(f=f.toLowerCase(),p=p.toLowerCase()),o&&(f=Wpe(f),p=XU(p)),d==="start"?p.substr(0,f.length)===f:p.indexOf(f)>-1}},Qpe=["innerRef"];function Xpe(t){var e=t.innerRef,n=Uc(t,Qpe),a=Nfe(n,"onExited","in","enter","exit","appear");return qt("input",Zt({ref:e},a,{css:mD({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Jpe=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function Zpe(t){var e=t.isEnabled,n=t.onBottomArrive,a=t.onBottomLeave,i=t.onTopArrive,s=t.onTopLeave,o=v.useRef(!1),l=v.useRef(!1),c=v.useRef(0),d=v.useRef(null),f=v.useCallback(function(S,_){if(d.current!==null){var T=d.current,C=T.scrollTop,P=T.scrollHeight,k=T.clientHeight,O=d.current,I=_>0,F=P-k-C,B=!1;F>_&&o.current&&(a&&a(S),o.current=!1),I&&l.current&&(s&&s(S),l.current=!1),I&&_>F?(n&&!o.current&&n(S),O.scrollTop=P,B=!0,o.current=!0):!I&&-_>C&&(i&&!l.current&&i(S),O.scrollTop=0,B=!0,l.current=!0),B&&Jpe(S)}},[n,a,i,s]),p=v.useCallback(function(S){f(S,S.deltaY)},[f]),g=v.useCallback(function(S){c.current=S.changedTouches[0].clientY},[]),x=v.useCallback(function(S){var _=c.current-S.changedTouches[0].clientY;f(S,_)},[f]),b=v.useCallback(function(S){if(S){var _=bfe?{passive:!1}:!1;S.addEventListener("wheel",p,_),S.addEventListener("touchstart",g,_),S.addEventListener("touchmove",x,_)}},[x,g,p]),j=v.useCallback(function(S){S&&(S.removeEventListener("wheel",p,!1),S.removeEventListener("touchstart",g,!1),S.removeEventListener("touchmove",x,!1))},[x,g,p]);return v.useEffect(function(){if(e){var S=d.current;return b(S),function(){j(S)}}},[e,b,j]),function(S){d.current=S}}var V4=["boxSizing","height","overflow","paddingRight","position"],H4={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function G4(t){t.cancelable&&t.preventDefault()}function W4(t){t.stopPropagation()}function Y4(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function K4(){return"ontouchstart"in window||navigator.maxTouchPoints}var Q4=!!(typeof window<"u"&&window.document&&window.document.createElement),Wx=0,mm={capture:!1,passive:!1};function eme(t){var e=t.isEnabled,n=t.accountForScrollbars,a=n===void 0?!0:n,i=v.useRef({}),s=v.useRef(null),o=v.useCallback(function(c){if(Q4){var d=document.body,f=d&&d.style;if(a&&V4.forEach(function(b){var j=f&&f[b];i.current[b]=j}),a&&Wx<1){var p=parseInt(i.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,x=window.innerWidth-g+p||0;Object.keys(H4).forEach(function(b){var j=H4[b];f&&(f[b]=j)}),f&&(f.paddingRight="".concat(x,"px"))}d&&K4()&&(d.addEventListener("touchmove",G4,mm),c&&(c.addEventListener("touchstart",Y4,mm),c.addEventListener("touchmove",W4,mm))),Wx+=1}},[a]),l=v.useCallback(function(c){if(Q4){var d=document.body,f=d&&d.style;Wx=Math.max(Wx-1,0),a&&Wx<1&&V4.forEach(function(p){var g=i.current[p];f&&(f[p]=g)}),d&&K4()&&(d.removeEventListener("touchmove",G4,mm),c&&(c.removeEventListener("touchstart",Y4,mm),c.removeEventListener("touchmove",W4,mm)))}},[a]);return v.useEffect(function(){if(e){var c=s.current;return o(c),function(){l(c)}}},[e,o,l]),function(c){s.current=c}}var tme=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},nme={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function rme(t){var e=t.children,n=t.lockEnabled,a=t.captureEnabled,i=a===void 0?!0:a,s=t.onBottomArrive,o=t.onBottomLeave,l=t.onTopArrive,c=t.onTopLeave,d=Zpe({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),f=eme({isEnabled:n}),p=function(x){d(x),f(x)};return qt(v.Fragment,null,n&&qt("div",{onClick:tme,css:nme}),e(p))}var ame={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},ime=function(e){var n=e.name,a=e.onFocus;return qt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:ame,value:"",onChange:function(){}})},sme=ime;function bD(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function ome(){return bD(/^iPhone/i)}function JU(){return bD(/^Mac/i)}function lme(){return bD(/^iPad/i)||JU()&&navigator.maxTouchPoints>1}function cme(){return ome()||lme()}function ume(){return JU()||cme()}var dme=function(e){return e.label},hme=function(e){return e.label},fme=function(e){return e.value},pme=function(e){return!!e.isDisabled},mme={clearIndicator:Xfe,container:Bfe,control:ape,dropdownIndicator:Kfe,group:lpe,groupHeading:upe,indicatorsContainer:Vfe,indicatorSeparator:Zfe,input:ppe,loadingIndicator:npe,loadingMessage:Ife,menu:kfe,menuList:Ofe,menuPortal:Ffe,multiValue:vpe,multiValueLabel:bpe,multiValueRemove:jpe,noOptionsMessage:Mfe,option:Tpe,placeholder:Epe,singleValue:Dpe,valueContainer:qfe},gme={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},yme=4,ZU=4,xme=38,vme=ZU*2,bme={baseUnit:ZU,controlHeight:xme,menuGutter:vme},AC={borderRadius:yme,colors:gme,spacing:bme},jme={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:$4(),captureMenuScroll:!$4(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Kpe(),formatGroupLabel:dme,getOptionLabel:hme,getOptionValue:fme,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:pme,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!xfe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function X4(t,e,n,a){var i=n9(t,e,n),s=r9(t,e,n),o=t9(t,e),l=Tw(t,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:l,index:a}}function rw(t,e){return t.options.map(function(n,a){if("options"in n){var i=n.options.map(function(o,l){return X4(t,o,e,l)}).filter(function(o){return Z4(t,o)});return i.length>0?{type:"group",data:n,options:i,index:a}:void 0}var s=X4(t,n,e,a);return Z4(t,s)?s:void 0}).filter(jfe)}function e9(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,uD(n.options.map(function(a){return a.data}))):e.push(n.data),e},[])}function J4(t,e){return t.reduce(function(n,a){return a.type==="group"?n.push.apply(n,uD(a.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(a.index,"-").concat(i.index)}}))):n.push({data:a.data,id:"".concat(e,"-").concat(a.index)}),n},[])}function wme(t,e){return e9(rw(t,e))}function Z4(t,e){var n=t.inputValue,a=n===void 0?"":n,i=e.data,s=e.isSelected,o=e.label,l=e.value;return(!i9(t)||!s)&&a9(t,{label:o,value:l,data:i},a)}function Nme(t,e){var n=t.focusedValue,a=t.selectValue,i=a.indexOf(n);if(i>-1){var s=e.indexOf(n);if(s>-1)return n;if(i<e.length)return e[i]}return null}function Sme(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var EC=function(e,n){var a,i=(a=e.find(function(s){return s.data===n}))===null||a===void 0?void 0:a.id;return i||null},t9=function(e,n){return e.getOptionLabel(n)},Tw=function(e,n){return e.getOptionValue(n)};function n9(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function r9(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var a=Tw(t,e);return n.some(function(i){return Tw(t,i)===a})}function a9(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var i9=function(e){var n=e.hideSelectedOptions,a=e.isMulti;return n===void 0?a:n},_me=1,s9=function(t){Hde(n,t);var e=Yde(n);function n(a){var i;if(Ude(this,n),i=e.call(this,a),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(c){i.controlRef=c},i.focusedOptionRef=null,i.getFocusedOptionRef=function(c){i.focusedOptionRef=c},i.menuListRef=null,i.getMenuListRef=function(c){i.menuListRef=c},i.inputRef=null,i.getInputRef=function(c){i.inputRef=c},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(c,d){var f=i.props,p=f.onChange,g=f.name;d.name=g,i.ariaOnChange(c,d),p(c,d)},i.setValue=function(c,d,f){var p=i.props,g=p.closeMenuOnSelect,x=p.isMulti,b=p.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:b}),g&&(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(c,{action:d,option:f})},i.selectOption=function(c){var d=i.props,f=d.blurInputOnSelect,p=d.isMulti,g=d.name,x=i.state.selectValue,b=p&&i.isOptionSelected(c,x),j=i.isOptionDisabled(c,x);if(b){var S=i.getOptionValue(c);i.setValue(x.filter(function(_){return i.getOptionValue(_)!==S}),"deselect-option",c)}else if(!j)p?i.setValue([].concat(uD(x),[c]),"select-option",c):i.setValue(c,"select-option");else{i.ariaOnChange(c,{action:"select-option",option:c,name:g});return}f&&i.blurInput()},i.removeValue=function(c){var d=i.props.isMulti,f=i.state.selectValue,p=i.getOptionValue(c),g=f.filter(function(b){return i.getOptionValue(b)!==p}),x=_j(d,g,g[0]||null);i.onChange(x,{action:"remove-value",removedValue:c}),i.focusInput()},i.clearValue=function(){var c=i.state.selectValue;i.onChange(_j(i.props.isMulti,[],null),{action:"clear",removedValues:c})},i.popValue=function(){var c=i.props.isMulti,d=i.state.selectValue,f=d[d.length-1],p=d.slice(0,d.length-1),g=_j(c,p,p[0]||null);f&&i.onChange(g,{action:"pop-value",removedValue:f})},i.getFocusedOptionId=function(c){return EC(i.state.focusableOptionsWithIds,c)},i.getFocusableOptionsWithIds=function(){return J4(rw(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return ffe.apply(void 0,[i.props.classNamePrefix].concat(d))},i.getOptionLabel=function(c){return t9(i.props,c)},i.getOptionValue=function(c){return Tw(i.props,c)},i.getStyles=function(c,d){var f=i.props.unstyled,p=mme[c](d,f);p.boxSizing="border-box";var g=i.props.styles[c];return g?g(p,d):p},i.getClassNames=function(c,d){var f,p;return(f=(p=i.props.classNames)[c])===null||f===void 0?void 0:f.call(p,d)},i.getElementId=function(c){return"".concat(i.state.instancePrefix,"-").concat(c)},i.getComponents=function(){return Lpe(i.props)},i.buildCategorizedOptions=function(){return rw(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return e9(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(c,d){i.setState({ariaSelection:Yt({value:c},d)})},i.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(c){i.blockOptionHover=!1},i.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&i.onMenuClose():d&&i.openMenu("first"):(d&&(i.openAfterFocus=!0),i.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},i.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!i.props.isDisabled){var d=i.props,f=d.isMulti,p=d.menuIsOpen;i.focusInput(),p?(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()):i.openMenu("first"),c.preventDefault()}},i.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(i.clearValue(),c.preventDefault(),i.openAfterFocus=!1,c.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(c){typeof i.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&JN(c.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(c)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(c){var d=c.touches,f=d&&d.item(0);f&&(i.initialTouchX=f.clientX,i.initialTouchY=f.clientY,i.userIsDragging=!1)},i.onTouchMove=function(c){var d=c.touches,f=d&&d.item(0);if(f){var p=Math.abs(f.clientX-i.initialTouchX),g=Math.abs(f.clientY-i.initialTouchY),x=5;i.userIsDragging=p>x||g>x}},i.onTouchEnd=function(c){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(c.target)&&i.menuListRef&&!i.menuListRef.contains(c.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(c){i.userIsDragging||i.onControlMouseDown(c)},i.onClearIndicatorTouchEnd=function(c){i.userIsDragging||i.onClearIndicatorMouseDown(c)},i.onDropdownIndicatorTouchEnd=function(c){i.userIsDragging||i.onDropdownIndicatorMouseDown(c)},i.handleInputChange=function(c){var d=i.props.inputValue,f=c.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(f,{action:"input-change",prevInputValue:d}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(c){i.props.onFocus&&i.props.onFocus(c),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(c){var d=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(c),i.onInputChange("",{action:"input-blur",prevInputValue:d}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(c){if(!(i.blockOptionHover||i.state.focusedOption===c)){var d=i.getFocusableOptions(),f=d.indexOf(c);i.setState({focusedOption:c,focusedOptionId:f>-1?i.getFocusedOptionId(c):null})}},i.shouldHideSelectedOptions=function(){return i9(i.props)},i.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),i.focus()},i.onKeyDown=function(c){var d=i.props,f=d.isMulti,p=d.backspaceRemovesValue,g=d.escapeClearsValue,x=d.inputValue,b=d.isClearable,j=d.isDisabled,S=d.menuIsOpen,_=d.onKeyDown,T=d.tabSelectsValue,C=d.openMenuOnFocus,P=i.state,k=P.focusedOption,O=P.focusedValue,I=P.selectValue;if(!j&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(i.blockOptionHover=!0,c.key){case"ArrowLeft":if(!f||x)return;i.focusValue("previous");break;case"ArrowRight":if(!f||x)return;i.focusValue("next");break;case"Delete":case"Backspace":if(x)return;if(O)i.removeValue(O);else{if(!p)return;f?i.popValue():b&&i.clearValue()}break;case"Tab":if(i.isComposing||c.shiftKey||!S||!T||!k||C&&i.isOptionSelected(k,I))return;i.selectOption(k);break;case"Enter":if(c.keyCode===229)break;if(S){if(!k||i.isComposing)return;i.selectOption(k);break}return;case"Escape":S?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:x}),i.onMenuClose()):b&&g&&i.clearValue();break;case" ":if(x)return;if(!S){i.openMenu("first");break}if(!k)return;i.selectOption(k);break;case"ArrowUp":S?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":S?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!S)return;i.focusOption("pageup");break;case"PageDown":if(!S)return;i.focusOption("pagedown");break;case"Home":if(!S)return;i.focusOption("first");break;case"End":if(!S)return;i.focusOption("last");break;default:return}c.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++_me),i.state.selectValue=L4(a.value),a.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),l=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[l],i.state.focusedOptionId=EC(s,o[l])}return i}return Vde(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&F4(this.menuListRef,this.focusedOptionRef),ume()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&i.isDisabled||c&&l&&!i.menuIsOpen)&&this.focusInput(),c&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(F4(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),f=i==="first"?0:d.length-1;if(!this.props.isMulti){var p=d.indexOf(l[0]);p>-1&&(f=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[f],focusedOptionId:this.getFocusedOptionId(d[f])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,f=-1;if(o.length){switch(i){case"previous":c===0?f=0:c===-1?f=d:f=c-1;break;case"next":c>-1&&c<d&&(f=c+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),i==="up"?c=d>0?d-1:l.length-1:i==="down"?c=(d+1)%l.length:i==="pageup"?(c=d-s,c<0&&(c=0)):i==="pagedown"?(c=d+s,c>l.length-1&&(c=l.length-1)):i==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(AC):Yt(Yt({},AC),this.props.theme):AC}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,f=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,b=p.options,j=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:j,isMulti:g,isRtl:x,options:b,selectOption:d,selectProps:p,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return n9(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return r9(this.props,i,s)}},{key:"filterOption",value:function(i,s){return a9(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,l=i.inputId,c=i.inputValue,d=i.tabIndex,f=i.form,p=i.menuIsOpen,g=i.required,x=this.getComponents(),b=x.Input,j=this.state,S=j.inputIsHidden,_=j.ariaSelection,T=this.commonProps,C=l||this.getElementId("input"),P=Yt(Yt(Yt({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?v.createElement(b,Zt({},T,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:s,isHidden:S,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:f,type:"text",value:c},P)):v.createElement(Xpe,Zt({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:_w,onFocus:this.onInputFocus,disabled:s,tabIndex:d,inputMode:"none",form:f,value:""},P))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,d=s.MultiValueRemove,f=s.SingleValue,p=s.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,j=x.isDisabled,S=x.isMulti,_=x.inputValue,T=x.placeholder,C=this.state,P=C.selectValue,k=C.focusedValue,O=C.isFocused;if(!this.hasValue()||!b)return _?null:v.createElement(p,Zt({},g,{key:"placeholder",isDisabled:j,isFocused:O,innerProps:{id:this.getElementId("placeholder")}}),T);if(S)return P.map(function(F,B){var $=F===k,L="".concat(i.getOptionLabel(F),"-").concat(i.getOptionValue(F));return v.createElement(o,Zt({},g,{components:{Container:l,Label:c,Remove:d},isFocused:$,isDisabled:j,key:L,index:B,removeProps:{onClick:function(){return i.removeValue(F)},onTouchEnd:function(){return i.removeValue(F)},onMouseDown:function(H){H.preventDefault()}},data:F}),i.formatOptionLabel(F,"value"))});if(_)return null;var I=P[0];return v.createElement(f,Zt({},g,{data:I,isDisabled:j}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||d)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,Zt({},o,{innerProps:p,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!s||!d)return null;var p={"aria-hidden":"true"};return v.createElement(s,Zt({},o,{innerProps:p,isDisabled:c,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return v.createElement(o,Zt({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,Zt({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,d=s.MenuList,f=s.MenuPortal,p=s.LoadingMessage,g=s.NoOptionsMessage,x=s.Option,b=this.commonProps,j=this.state.focusedOption,S=this.props,_=S.captureMenuScroll,T=S.inputValue,C=S.isLoading,P=S.loadingMessage,k=S.minMenuHeight,O=S.maxMenuHeight,I=S.menuIsOpen,F=S.menuPlacement,B=S.menuPosition,$=S.menuPortalTarget,L=S.menuShouldBlockScroll,V=S.menuShouldScrollIntoView,H=S.noOptionsMessage,te=S.onMenuScrollToTop,X=S.onMenuScrollToBottom;if(!I)return null;var q=function(K,Ie){var We=K.type,Re=K.data,Fe=K.isDisabled,ve=K.isSelected,ae=K.label,je=K.value,ue=j===Re,me=Fe?void 0:function(){return i.onOptionHover(Re)},oe=Fe?void 0:function(){return i.selectOption(Re)},Q="".concat(i.getElementId("option"),"-").concat(Ie),ie={id:Q,onClick:oe,onMouseMove:me,onMouseOver:me,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:ve};return v.createElement(x,Zt({},b,{innerProps:ie,data:Re,isDisabled:Fe,isSelected:ve,key:Q,label:ae,type:We,value:je,isFocused:ue,innerRef:ue?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(K.data,"menu"))},Y;if(this.hasOptions())Y=this.getCategorizedOptions().map(function(we){if(we.type==="group"){var K=we.data,Ie=we.options,We=we.index,Re="".concat(i.getElementId("group"),"-").concat(We),Fe="".concat(Re,"-heading");return v.createElement(o,Zt({},b,{key:Re,data:K,options:Ie,Heading:l,headingProps:{id:Fe,data:we.data},label:i.formatGroupLabel(we.data)}),we.options.map(function(ve){return q(ve,"".concat(We,"-").concat(ve.index))}))}else if(we.type==="option")return q(we,"".concat(we.index))});else if(C){var se=P({inputValue:T});if(se===null)return null;Y=v.createElement(p,b,se)}else{var G=H({inputValue:T});if(G===null)return null;Y=v.createElement(g,b,G)}var z={minMenuHeight:k,maxMenuHeight:O,menuPlacement:F,menuPosition:B,menuShouldScrollIntoView:V},ce=v.createElement(Afe,Zt({},b,z),function(we){var K=we.ref,Ie=we.placerProps,We=Ie.placement,Re=Ie.maxHeight;return v.createElement(c,Zt({},b,z,{innerRef:K,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:C,placement:We}),v.createElement(rme,{captureEnabled:_,onTopArrive:te,onBottomArrive:X,lockEnabled:L},function(Fe){return v.createElement(d,Zt({},b,{innerRef:function(ae){i.getMenuListRef(ae),Fe(ae)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:C,maxHeight:Re,focusedOption:j}),Y)}))});return $||B==="fixed"?v.createElement(f,Zt({},b,{appendTo:$,controlElement:this.controlRef,menuPlacement:F,menuPosition:B}),ce):ce}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,d=s.name,f=s.required,p=this.state.selectValue;if(f&&!this.hasValue()&&!l)return v.createElement(sme,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var g=p.map(function(j){return i.getOptionValue(j)}).join(o);return v.createElement("input",{name:d,type:"hidden",value:g})}else{var x=p.length>0?p.map(function(j,S){return v.createElement("input",{key:"i-".concat(S),name:d,type:"hidden",value:i.getOptionValue(j)})}):v.createElement("input",{name:d,type:"hidden",value:""});return v.createElement("div",null,x)}else{var b=p[0]?this.getOptionValue(p[0]):"";return v.createElement("input",{name:d,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,d=s.isFocused,f=s.selectValue,p=this.getFocusableOptions();return v.createElement(Hpe,Zt({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:f,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,l=i.SelectContainer,c=i.ValueContainer,d=this.props,f=d.className,p=d.id,g=d.isDisabled,x=d.menuIsOpen,b=this.state.isFocused,j=this.commonProps=this.getCommonProps();return v.createElement(l,Zt({},j,{className:f,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),v.createElement(s,Zt({},j,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),v.createElement(c,Zt({},j,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),v.createElement(o,Zt({},j,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,d=s.ariaSelection,f=s.isFocused,p=s.prevWasFocused,g=s.instancePrefix,x=i.options,b=i.value,j=i.menuIsOpen,S=i.inputValue,_=i.isMulti,T=L4(b),C={};if(o&&(b!==o.value||x!==o.options||j!==o.menuIsOpen||S!==o.inputValue)){var P=j?wme(i,T):[],k=j?J4(rw(i,T),"".concat(g,"-option")):[],O=l?Nme(s,T):null,I=Sme(s,P),F=EC(k,I);C={selectValue:T,focusedOption:I,focusedOptionId:F,focusableOptionsWithIds:k,focusedValue:O,clearFocusValueOnUpdate:!1}}var B=c!=null&&i!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},$=d,L=f&&p;return f&&!L&&($={value:_j(_,T,T[0]||null),options:T,action:"initial-input-focus"},L=!p),(d==null?void 0:d.action)==="initial-input-focus"&&($=null),Yt(Yt(Yt({},C),B),{},{prevProps:i,ariaSelection:$,prevWasFocused:L})}}]),n}(v.Component);s9.defaultProps=jme;var Cme=v.forwardRef(function(t,e){var n=qde(t);return v.createElement(s9,Zt({ref:e},n))}),o9=Cme;const gm=new Map,l9=(()=>{const t=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async e=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),e!=null&&e.id&&gm.has(e.id)){const i=gm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&gm.set(e.id,a),a}catch{if(await t,e!=null&&e.id&&gm.has(e.id)){const i=gm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&gm.set(e.id,a),a}}})();function Tme(t){var e=atob(t),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n.buffer}const kme=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,c9=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,Cj=new Map,KE=(t,e)=>{const n=new Blob([`registerProcessor("${t}", ${e})`],{type:"application/javascript"});return URL.createObjectURL(n)};var PC={exports:{}},e3;function Ame(){return e3||(e3=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,x,b){var j=n?n+d:d;if(!this._events[j])return!1;var S=this._events[j],_=arguments.length,T,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,g),!0;case 5:return S.fn.call(S.context,f,p,g,x),!0;case 6:return S.fn.call(S.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];S.fn.apply(S.context,T)}else{var P=S.length,k;for(C=0;C<P;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];S[C].fn.apply(S[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,S=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(PC)),PC.exports}var Eme=Ame();const u9=Un(Eme);function Pme(t){for(var e="",n=new Uint8Array(t),a=n.byteLength,i=0;i<a;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}class d9 extends u9{constructor(n=16e3){super();yr(this,"stream");yr(this,"audioContext");yr(this,"source");yr(this,"recording",!1);yr(this,"recordingWorklet");yr(this,"vuWorklet");yr(this,"starting",null);this.sampleRate=n}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async n=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await l9({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const a="audio-recorder-worklet",i=KE(a,kme);await this.audioContext.audioWorklet.addModule(i),this.recordingWorklet=new AudioWorkletNode(this.audioContext,a),this.recordingWorklet.port.onmessage=async o=>{const l=o.data.data.int16arrayBuffer;if(l){const c=Pme(l);this.emit("data",c)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(KE(s,c9)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=o=>{this.emit("volume",o.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,n(),this.starting=null})}stop(){const n=()=>{var a,i;(a=this.source)==null||a.disconnect(),(i=this.stream)==null||i.getTracks().forEach(s=>s.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(n);return}n()}}const Ome=3,Dme=({active:t,volume:e,hover:n})=>{const a=v.useRef([]);return v.useEffect(()=>{let i=null;const s=()=>{a.current.forEach((o,l)=>{o&&(o.style.height=`${Math.min(24,4+e*(l===1?400:60))}px`)}),i=window.setTimeout(s,100)};return s(),()=>clearTimeout(i)},[e]),r.jsx("div",{className:rd("audioPulse",{active:t,hover:n}),children:Array(Ome).fill(null).map((i,s)=>r.jsx("div",{ref:o=>{a.current[s]=o},style:{animationDelay:`${s*133}ms`}},s))})};var dv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Mme=dv.exports,t3;function Ime(){return t3||(t3=1,function(t,e){(function(){var n,a="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",p=1,g=2,x=4,b=1,j=2,S=1,_=2,T=4,C=8,P=16,k=32,O=64,I=128,F=256,B=512,$=30,L="...",V=800,H=16,te=1,X=2,q=3,Y=1/0,se=9007199254740991,G=17976931348623157e292,z=NaN,ce=4294967295,we=ce-1,K=ce>>>1,Ie=[["ary",I],["bind",S],["bindKey",_],["curry",C],["curryRight",P],["flip",B],["partial",k],["partialRight",O],["rearg",F]],We="[object Arguments]",Re="[object Array]",Fe="[object AsyncFunction]",ve="[object Boolean]",ae="[object Date]",je="[object DOMException]",ue="[object Error]",me="[object Function]",oe="[object GeneratorFunction]",Q="[object Map]",ie="[object Number]",xe="[object Null]",ee="[object Object]",Se="[object Promise]",qe="[object Proxy]",Ge="[object RegExp]",Ne="[object Set]",ne="[object String]",de="[object Symbol]",Te="[object Undefined]",Ee="[object WeakMap]",W="[object WeakSet]",ye="[object ArrayBuffer]",he="[object DataView]",ge="[object Float32Array]",_e="[object Float64Array]",ze="[object Int8Array]",Oe="[object Int16Array]",He="[object Int32Array]",nt="[object Uint8Array]",mt="[object Uint8ClampedArray]",De="[object Uint16Array]",Je="[object Uint32Array]",et=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vt=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,lt=RegExp(vt.source),Tt=RegExp(ke.source),Ue=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,Ct=/<%=([\s\S]+?)%>/g,Xn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,br=/^\w*$/,Vn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cn=/[\\^$.*+?()[\]{}|]/g,wn=RegExp(Cn.source),la=/^\s+/,Hn=/\s/,Ha=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$l=/\{\n\/\* \[wrapped with (.+)\] \*/,zo=/,? & /,Bl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Sd=/[()=,{}\[\]\/\s]/,qo=/\\(\\)?/g,at=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nt=/\w*$/,St=/^[-+]0x[0-9a-f]+$/i,It=/^0b[01]+$/i,vn=/^\[object .+?Constructor\]$/,On=/^0o[0-7]+$/i,ya=/^(?:0|[1-9]\d*)$/,fi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ro=/($^)/,_d=/['\n\r\u2028\u2029\\]/g,Cd="\\ud800-\\udfff",FS="\\u0300-\\u036f",Lf="\\ufe20-\\ufe2f",Ff="\\u20d0-\\u20ff",Ps=FS+Lf+Ff,$f="\\u2700-\\u27bf",Wg="a-z\\xdf-\\xf6\\xf8-\\xff",Yc="\\xac\\xb1\\xd7\\xf7",Yg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Kg="\\u2000-\\u206f",$S=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qg="A-Z\\xc0-\\xd6\\xd8-\\xde",pi="\\ufe0e\\ufe0f",Xg=Yc+Yg+Kg+$S,Jg="[']",Bf="["+Cd+"]",Zg="["+Xg+"]",zl="["+Ps+"]",Gb="\\d+",Li="["+$f+"]",zf="["+Wg+"]",ey="[^"+Cd+Xg+Gb+$f+Wg+Qg+"]",Td="\\ud83c[\\udffb-\\udfff]",Kc="(?:"+zl+"|"+Td+")",ty="[^"+Cd+"]",qf="(?:\\ud83c[\\udde6-\\uddff]){2}",Uo="[\\ud800-\\udbff][\\udc00-\\udfff]",Qc="["+Qg+"]",ny="\\u200d",ry="(?:"+zf+"|"+ey+")",ay="(?:"+Qc+"|"+ey+")",Wb="(?:"+Jg+"(?:d|ll|m|re|s|t|ve))?",Yb="(?:"+Jg+"(?:D|LL|M|RE|S|T|VE))?",kd=Kc+"?",Uf="["+pi+"]?",iy="(?:"+ny+"(?:"+[ty,qf,Uo].join("|")+")"+Uf+kd+")*",Xc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sy=Uf+kd+iy,oy="(?:"+[Li,qf,Uo].join("|")+")"+sy,Kb="(?:"+[ty+zl+"?",zl,qf,Uo,Bf].join("|")+")",Ad=RegExp(Jg,"g"),ao=RegExp(zl,"g"),Ed=RegExp(Td+"(?="+Td+")|"+Kb+sy,"g"),Pd=RegExp([Qc+"?"+zf+"+"+Wb+"(?="+[Zg,Qc,"$"].join("|")+")",ay+"+"+Yb+"(?="+[Zg,Qc+ry,"$"].join("|")+")",Qc+"?"+ry+"+"+Wb,Qc+"+"+Yb,Jc,Xc,Gb,oy].join("|"),"g"),Vo=RegExp("["+ny+Cd+Ps+pi+"]"),ly=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qb=-1,ar={};ar[ge]=ar[_e]=ar[ze]=ar[Oe]=ar[He]=ar[nt]=ar[mt]=ar[De]=ar[Je]=!0,ar[We]=ar[Re]=ar[ye]=ar[ve]=ar[he]=ar[ae]=ar[ue]=ar[me]=ar[Q]=ar[ie]=ar[ee]=ar[Ge]=ar[Ne]=ar[ne]=ar[Ee]=!1;var Jn={};Jn[We]=Jn[Re]=Jn[ye]=Jn[he]=Jn[ve]=Jn[ae]=Jn[ge]=Jn[_e]=Jn[ze]=Jn[Oe]=Jn[He]=Jn[Q]=Jn[ie]=Jn[ee]=Jn[Ge]=Jn[Ne]=Jn[ne]=Jn[de]=Jn[nt]=Jn[mt]=Jn[De]=Jn[Je]=!0,Jn[ue]=Jn[me]=Jn[Ee]=!1;var Xb={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ga={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ql={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Hf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Od=parseFloat,BS=parseInt,Gf=typeof Qs=="object"&&Qs&&Qs.Object===Object&&Qs,cy=typeof self=="object"&&self&&self.Object===Object&&self,Hr=Gf||cy||Function("return this")(),Zc=e&&!e.nodeType&&e,Ho=Zc&&!0&&t&&!t.nodeType&&t,Jb=Ho&&Ho.exports===Zc,uy=Jb&&Gf.process,Fi=function(){try{var Ve=Ho&&Ho.require&&Ho.require("util").types;return Ve||uy&&uy.binding&&uy.binding("util")}catch{}}(),Wf=Fi&&Fi.isArrayBuffer,Zb=Fi&&Fi.isDate,e0=Fi&&Fi.isMap,t0=Fi&&Fi.isRegExp,n0=Fi&&Fi.isSet,r0=Fi&&Fi.isTypedArray;function Wa(Ve,it,rt){switch(rt.length){case 0:return Ve.call(it);case 1:return Ve.call(it,rt[0]);case 2:return Ve.call(it,rt[0],rt[1]);case 3:return Ve.call(it,rt[0],rt[1],rt[2])}return Ve.apply(it,rt)}function zS(Ve,it,rt,kt){for(var Kt=-1,In=Ve==null?0:Ve.length;++Kt<In;){var Gr=Ve[Kt];it(kt,Gr,rt(Gr),Ve)}return kt}function $i(Ve,it){for(var rt=-1,kt=Ve==null?0:Ve.length;++rt<kt&&it(Ve[rt],rt,Ve)!==!1;);return Ve}function qS(Ve,it){for(var rt=Ve==null?0:Ve.length;rt--&&it(Ve[rt],rt,Ve)!==!1;);return Ve}function a0(Ve,it){for(var rt=-1,kt=Ve==null?0:Ve.length;++rt<kt;)if(!it(Ve[rt],rt,Ve))return!1;return!0}function Os(Ve,it){for(var rt=-1,kt=Ve==null?0:Ve.length,Kt=0,In=[];++rt<kt;){var Gr=Ve[rt];it(Gr,rt,Ve)&&(In[Kt++]=Gr)}return In}function Yf(Ve,it){var rt=Ve==null?0:Ve.length;return!!rt&&eu(Ve,it,0)>-1}function dy(Ve,it,rt){for(var kt=-1,Kt=Ve==null?0:Ve.length;++kt<Kt;)if(rt(it,Ve[kt]))return!0;return!1}function Cr(Ve,it){for(var rt=-1,kt=Ve==null?0:Ve.length,Kt=Array(kt);++rt<kt;)Kt[rt]=it(Ve[rt],rt,Ve);return Kt}function io(Ve,it){for(var rt=-1,kt=it.length,Kt=Ve.length;++rt<kt;)Ve[Kt+rt]=it[rt];return Ve}function hy(Ve,it,rt,kt){var Kt=-1,In=Ve==null?0:Ve.length;for(kt&&In&&(rt=Ve[++Kt]);++Kt<In;)rt=it(rt,Ve[Kt],Kt,Ve);return rt}function US(Ve,it,rt,kt){var Kt=Ve==null?0:Ve.length;for(kt&&Kt&&(rt=Ve[--Kt]);Kt--;)rt=it(rt,Ve[Kt],Kt,Ve);return rt}function fy(Ve,it){for(var rt=-1,kt=Ve==null?0:Ve.length;++rt<kt;)if(it(Ve[rt],rt,Ve))return!0;return!1}var VS=Qf("length");function HS(Ve){return Ve.split("")}function GS(Ve){return Ve.match(Bl)||[]}function i0(Ve,it,rt){var kt;return rt(Ve,function(Kt,In,Gr){if(it(Kt,In,Gr))return kt=In,!1}),kt}function Kf(Ve,it,rt,kt){for(var Kt=Ve.length,In=rt+(kt?1:-1);kt?In--:++In<Kt;)if(it(Ve[In],In,Ve))return In;return-1}function eu(Ve,it,rt){return it===it?QS(Ve,it,rt):Kf(Ve,tu,rt)}function py(Ve,it,rt,kt){for(var Kt=rt-1,In=Ve.length;++Kt<In;)if(kt(Ve[Kt],it))return Kt;return-1}function tu(Ve){return Ve!==Ve}function s0(Ve,it){var rt=Ve==null?0:Ve.length;return rt?Jf(Ve,it)/rt:z}function Qf(Ve){return function(it){return it==null?n:it[Ve]}}function Xf(Ve){return function(it){return Ve==null?n:Ve[it]}}function my(Ve,it,rt,kt,Kt){return Kt(Ve,function(In,Gr,Rn){rt=kt?(kt=!1,In):it(rt,In,Gr,Rn)}),rt}function o0(Ve,it){var rt=Ve.length;for(Ve.sort(it);rt--;)Ve[rt]=Ve[rt].value;return Ve}function Jf(Ve,it){for(var rt,kt=-1,Kt=Ve.length;++kt<Kt;){var In=it(Ve[kt]);In!==n&&(rt=rt===n?In:rt+In)}return rt}function Go(Ve,it){for(var rt=-1,kt=Array(Ve);++rt<Ve;)kt[rt]=it(rt);return kt}function WS(Ve,it){return Cr(it,function(rt){return[rt,Ve[rt]]})}function l0(Ve){return Ve&&Ve.slice(0,yy(Ve)+1).replace(la,"")}function mi(Ve){return function(it){return Ve(it)}}function Zf(Ve,it){return Cr(it,function(rt){return Ve[rt]})}function nu(Ve,it){return Ve.has(it)}function ru(Ve,it){for(var rt=-1,kt=Ve.length;++rt<kt&&eu(it,Ve[rt],0)>-1;);return rt}function au(Ve,it){for(var rt=Ve.length;rt--&&eu(it,Ve[rt],0)>-1;);return rt}function YS(Ve,it){for(var rt=Ve.length,kt=0;rt--;)Ve[rt]===it&&++kt;return kt}var ep=Xf(Xb),c0=Xf(Ga);function u0(Ve){return"\\"+Hf[Ve]}function gy(Ve,it){return Ve==null?n:Ve[it]}function Wo(Ve){return Vo.test(Ve)}function d0(Ve){return ly.test(Ve)}function h0(Ve){for(var it,rt=[];!(it=Ve.next()).done;)rt.push(it.value);return rt}function tp(Ve){var it=-1,rt=Array(Ve.size);return Ve.forEach(function(kt,Kt){rt[++it]=[Kt,kt]}),rt}function f0(Ve,it){return function(rt){return Ve(it(rt))}}function Yo(Ve,it){for(var rt=-1,kt=Ve.length,Kt=0,In=[];++rt<kt;){var Gr=Ve[rt];(Gr===it||Gr===f)&&(Ve[rt]=f,In[Kt++]=rt)}return In}function np(Ve){var it=-1,rt=Array(Ve.size);return Ve.forEach(function(kt){rt[++it]=kt}),rt}function KS(Ve){var it=-1,rt=Array(Ve.size);return Ve.forEach(function(kt){rt[++it]=[kt,kt]}),rt}function QS(Ve,it,rt){for(var kt=rt-1,Kt=Ve.length;++kt<Kt;)if(Ve[kt]===it)return kt;return-1}function gi(Ve,it,rt){for(var kt=rt+1;kt--;)if(Ve[kt]===it)return kt;return kt}function Ds(Ve){return Wo(Ve)?m0(Ve):VS(Ve)}function Bi(Ve){return Wo(Ve)?xy(Ve):HS(Ve)}function yy(Ve){for(var it=Ve.length;it--&&Hn.test(Ve.charAt(it)););return it}var p0=Xf(ql);function m0(Ve){for(var it=Ed.lastIndex=0;Ed.test(Ve);)++it;return it}function xy(Ve){return Ve.match(Ed)||[]}function XS(Ve){return Ve.match(Pd)||[]}var iu=function Ve(it){it=it==null?Hr:Ko.defaults(Hr.Object(),it,Ko.pick(Hr,Vf));var rt=it.Array,kt=it.Date,Kt=it.Error,In=it.Function,Gr=it.Math,Rn=it.Object,rp=it.RegExp,g0=it.String,yi=it.TypeError,ap=rt.prototype,JS=In.prototype,su=Rn.prototype,Dd=it["__core-js_shared__"],Md=JS.toString,Gn=su.hasOwnProperty,cs=0,vy=function(){var y=/[^.]+$/.exec(Dd&&Dd.keys&&Dd.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Ra=su.toString,zi=Md.call(Rn),ou=Hr._,by=rp("^"+Md.call(Gn).replace(Cn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ul=Jb?it.Buffer:n,us=it.Symbol,lu=it.Uint8Array,Vl=Ul?Ul.allocUnsafe:n,Id=f0(Rn.getPrototypeOf,Rn),Rd=Rn.create,Hl=su.propertyIsEnumerable,ip=ap.splice,Ya=us?us.isConcatSpreadable:n,Gl=us?us.iterator:n,La=us?us.toStringTag:n,Ld=function(){try{var y=al(Rn,"defineProperty");return y({},"",{}),y}catch{}}(),sp=it.clearTimeout!==Hr.clearTimeout&&it.clearTimeout,Wl=kt&&kt.now!==Hr.Date.now&&kt.now,jy=it.setTimeout!==Hr.setTimeout&&it.setTimeout,cu=Gr.ceil,so=Gr.floor,Qo=Rn.getOwnPropertySymbols,op=Ul?Ul.isBuffer:n,Fd=it.isFinite,qi=ap.join,Ui=f0(Rn.keys,Rn),jr=Gr.max,Tr=Gr.min,oo=kt.now,Yl=it.parseInt,wy=Gr.random,Ny=ap.reverse,$d=al(it,"DataView"),Zr=al(it,"Map"),kr=al(it,"Promise"),Nn=al(it,"Set"),ds=al(it,"WeakMap"),Ka=al(Rn,"create"),uu=ds&&new ds,Vi={},y0=yo($d),x0=yo(Zr),Bd=yo(kr),zd=yo(Nn),v0=yo(ds),Xo=us?us.prototype:n,Kl=Xo?Xo.valueOf:n,Jo=Xo?Xo.toString:n;function fe(y){if(Ir(y)&&!tn(y)&&!(y instanceof mn)){if(y instanceof Qa)return y;if(Gn.call(y,"__wrapped__"))return ta(y)}return new Qa(y)}var xi=function(){function y(){}return function(w){if(!Er(w))return{};if(Rd)return Rd(w);y.prototype=w;var M=new y;return y.prototype=n,M}}();function Hi(){}function Qa(y,w){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!w,this.__index__=0,this.__values__=n}fe.templateSettings={escape:Ue,evaluate:jt,interpolate:Ct,variable:"",imports:{_:fe}},fe.prototype=Hi.prototype,fe.prototype.constructor=fe,Qa.prototype=xi(Hi.prototype),Qa.prototype.constructor=Qa;function mn(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function qd(){var y=new mn(this.__wrapped__);return y.__actions__=ea(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=ea(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=ea(this.__views__),y}function lp(){if(this.__filtered__){var y=new mn(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function Ql(){var y=this.__wrapped__.value(),w=this.__dir__,M=tn(y),U=w<0,re=M?y.length:0,be=J0(0,re,this.__views__),Ae=be.start,$e=be.end,Ke=$e-Ae,ht=U?$e:Ae-1,pt=this.__iteratees__,gt=pt.length,At=0,Rt=Tr(Ke,this.__takeCount__);if(!M||!U&&re==Ke&&Rt==Ke)return F0(y,this.__actions__);var Qt=[];e:for(;Ke--&&At<Rt;){ht+=w;for(var yn=-1,Xt=y[ht];++yn<gt;){var kn=pt[yn],Fn=kn.iteratee,xs=kn.type,_i=Fn(Xt);if(xs==X)Xt=_i;else if(!_i){if(xs==te)continue e;break e}}Qt[At++]=Xt}return Qt}mn.prototype=xi(Hi.prototype),mn.prototype.constructor=mn;function Fr(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function cp(){this.__data__=Ka?Ka(null):{},this.size=0}function b0(y){var w=this.has(y)&&delete this.__data__[y];return this.size-=w?1:0,w}function ZS(y){var w=this.__data__;if(Ka){var M=w[y];return M===c?n:M}return Gn.call(w,y)?w[y]:n}function e_(y){var w=this.__data__;return Ka?w[y]!==n:Gn.call(w,y)}function t_(y,w){var M=this.__data__;return this.size+=this.has(y)?0:1,M[y]=Ka&&w===n?c:w,this}Fr.prototype.clear=cp,Fr.prototype.delete=b0,Fr.prototype.get=ZS,Fr.prototype.has=e_,Fr.prototype.set=t_;function hr(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function Sy(){this.__data__=[],this.size=0}function Ud(y){var w=this.__data__,M=fu(w,y);if(M<0)return!1;var U=w.length-1;return M==U?w.pop():ip.call(w,M,1),--this.size,!0}function Vd(y){var w=this.__data__,M=fu(w,y);return M<0?n:w[M][1]}function _y(y){return fu(this.__data__,y)>-1}function du(y,w){var M=this.__data__,U=fu(M,y);return U<0?(++this.size,M.push([y,w])):M[U][1]=w,this}hr.prototype.clear=Sy,hr.prototype.delete=Ud,hr.prototype.get=Vd,hr.prototype.has=_y,hr.prototype.set=du;function Xa(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function n_(){this.size=0,this.__data__={hash:new Fr,map:new(Zr||hr),string:new Fr}}function j0(y){var w=vu(this,y).delete(y);return this.size-=w?1:0,w}function r_(y){return vu(this,y).get(y)}function w0(y){return vu(this,y).has(y)}function Xl(y,w){var M=vu(this,y),U=M.size;return M.set(y,w),this.size+=M.size==U?0:1,this}Xa.prototype.clear=n_,Xa.prototype.delete=j0,Xa.prototype.get=r_,Xa.prototype.has=w0,Xa.prototype.set=Xl;function lo(y){var w=-1,M=y==null?0:y.length;for(this.__data__=new Xa;++w<M;)this.add(y[w])}function up(y){return this.__data__.set(y,c),this}function N0(y){return this.__data__.has(y)}lo.prototype.add=lo.prototype.push=up,lo.prototype.has=N0;function Fa(y){var w=this.__data__=new hr(y);this.size=w.size}function S0(){this.__data__=new hr,this.size=0}function dp(y){var w=this.__data__,M=w.delete(y);return this.size=w.size,M}function Cy(y){return this.__data__.get(y)}function _0(y){return this.__data__.has(y)}function hp(y,w){var M=this.__data__;if(M instanceof hr){var U=M.__data__;if(!Zr||U.length<i-1)return U.push([y,w]),this.size=++M.size,this;M=this.__data__=new Xa(U)}return M.set(y,w),this.size=M.size,this}Fa.prototype.clear=S0,Fa.prototype.delete=dp,Fa.prototype.get=Cy,Fa.prototype.has=_0,Fa.prototype.set=hp;function Ty(y,w){var M=tn(y),U=!M&&jo(y),re=!M&&!U&&pl(y),be=!M&&!U&&!re&&Du(y),Ae=M||U||re||be,$e=Ae?Go(y.length,g0):[],Ke=$e.length;for(var ht in y)(w||Gn.call(y,ht))&&!(Ae&&(ht=="length"||re&&(ht=="offset"||ht=="parent")||be&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||ms(ht,Ke)))&&$e.push(ht);return $e}function hu(y){var w=y.length;return w?y[wp(0,w-1)]:n}function C0(y,w){return yh(ea(y),fs(w,0,y.length))}function T0(y){return yh(ea(y))}function Ms(y,w,M){(M!==n&&!ai(y[w],M)||M===n&&!(w in y))&&hs(y,w,M)}function Jl(y,w,M){var U=y[w];(!(Gn.call(y,w)&&ai(U,M))||M===n&&!(w in y))&&hs(y,w,M)}function fu(y,w){for(var M=y.length;M--;)if(ai(y[M][0],w))return M;return-1}function Zo(y,w,M,U){return uo(y,function(re,be,Ae){w(U,re,M(re),Ae)}),U}function co(y,w){return y&&ei(w,aa(w),y)}function Hd(y,w){return y&&ei(w,da(w),y)}function hs(y,w,M){w=="__proto__"&&Ld?Ld(y,w,{configurable:!0,enumerable:!0,value:M,writable:!0}):y[w]=M}function Gd(y,w){for(var M=-1,U=w.length,re=rt(U),be=y==null;++M<U;)re[M]=be?n:Ph(y,w[M]);return re}function fs(y,w,M){return y===y&&(M!==n&&(y=y<=M?y:M),w!==n&&(y=y>=w?y:w)),y}function _a(y,w,M,U,re,be){var Ae,$e=w&p,Ke=w&g,ht=w&x;if(M&&(Ae=re?M(y,U,re,be):M(y)),Ae!==n)return Ae;if(!Er(y))return y;var pt=tn(y);if(pt){if(Ae=Zy(y),!$e)return ea(y,Ae)}else{var gt=ua(y),At=gt==me||gt==oe;if(pl(y))return Hy(y,$e);if(gt==ee||gt==We||At&&!re){if(Ae=Ke||At?{}:ex(y),!$e)return Ke?ih(y,Hd(Ae,y)):kp(y,co(Ae,y))}else{if(!Jn[gt])return re?y:{};Ae=tx(y,gt,$e)}}be||(be=new Fa);var Rt=be.get(y);if(Rt)return Rt;be.set(y,Ae),V1(y)?y.forEach(function(Xt){Ae.add(_a(Xt,w,M,Xt,y,be))}):Zp(y)&&y.forEach(function(Xt,kn){Ae.set(kn,_a(Xt,w,M,kn,y,be))});var Qt=ht?Ke?Op:Pp:Ke?da:aa,yn=pt?n:Qt(y);return $i(yn||y,function(Xt,kn){yn&&(kn=Xt,Xt=y[kn]),Jl(Ae,kn,_a(Xt,w,M,kn,y,be))}),Ae}function k0(y){var w=aa(y);return function(M){return ky(M,y,w)}}function ky(y,w,M){var U=M.length;if(y==null)return!U;for(y=Rn(y);U--;){var re=M[U],be=w[re],Ae=y[re];if(Ae===n&&!(re in y)||!be(Ae))return!1}return!0}function Zl(y,w,M){if(typeof y!="function")throw new yi(o);return ju(function(){y.apply(n,M)},w)}function el(y,w,M,U){var re=-1,be=Yf,Ae=!0,$e=y.length,Ke=[],ht=w.length;if(!$e)return Ke;M&&(w=Cr(w,mi(M))),U?(be=dy,Ae=!1):w.length>=i&&(be=nu,Ae=!1,w=new lo(w));e:for(;++re<$e;){var pt=y[re],gt=M==null?pt:M(pt);if(pt=U||pt!==0?pt:0,Ae&&gt===gt){for(var At=ht;At--;)if(w[At]===gt)continue e;Ke.push(pt)}else be(w,gt,U)||Ke.push(pt)}return Ke}var uo=Ky(Ca),fp=Ky(mu,!0);function Ay(y,w){var M=!0;return uo(y,function(U,re,be){return M=!!w(U,re,be),M}),M}function ps(y,w,M){for(var U=-1,re=y.length;++U<re;){var be=y[U],Ae=w(be);if(Ae!=null&&($e===n?Ae===Ae&&!za(Ae):M(Ae,$e)))var $e=Ae,Ke=be}return Ke}function fn(y,w,M,U){var re=y.length;for(M=on(M),M<0&&(M=-M>re?0:re+M),U=U===n||U>re?re:on(U),U<0&&(U+=re),U=M>U?0:Us(U);M<U;)y[M++]=w;return y}function Zn(y,w){var M=[];return uo(y,function(U,re,be){w(U,re,be)&&M.push(U)}),M}function Sn(y,w,M,U,re){var be=-1,Ae=y.length;for(M||(M=mo),re||(re=[]);++be<Ae;){var $e=y[be];w>0&&M($e)?w>1?Sn($e,w-1,M,U,re):io(re,$e):U||(re[re.length]=$e)}return re}var pu=sc(),ec=sc(!0);function Ca(y,w){return y&&pu(y,w,aa)}function mu(y,w){return y&&ec(y,w,aa)}function tl(y,w){return Os(w,function(M){return gs(y[M])})}function Gi(y,w){w=fo(w,y);for(var M=0,U=w.length;y!=null&&M<U;)y=y[Yn(w[M++])];return M&&M==U?y:n}function A0(y,w,M){var U=w(y);return tn(y)?U:io(U,M(y))}function Tn(y){return y==null?y===n?Te:xe:La&&La in Rn(y)?X0(y):r1(y)}function Wd(y,w){return y>w}function Ey(y,w){return y!=null&&Gn.call(y,w)}function E0(y,w){return y!=null&&w in Rn(y)}function P0(y,w,M){return y>=Tr(w,M)&&y<jr(w,M)}function Py(y,w,M){for(var U=M?dy:Yf,re=y[0].length,be=y.length,Ae=be,$e=rt(be),Ke=1/0,ht=[];Ae--;){var pt=y[Ae];Ae&&w&&(pt=Cr(pt,mi(w))),Ke=Tr(pt.length,Ke),$e[Ae]=!M&&(w||re>=120&&pt.length>=120)?new lo(Ae&&pt):n}pt=y[0];var gt=-1,At=$e[0];e:for(;++gt<re&&ht.length<Ke;){var Rt=pt[gt],Qt=w?w(Rt):Rt;if(Rt=M||Rt!==0?Rt:0,!(At?nu(At,Qt):U(ht,Qt,M))){for(Ae=be;--Ae;){var yn=$e[Ae];if(!(yn?nu(yn,Qt):U(y[Ae],Qt,M)))continue e}At&&At.push(Qt),ht.push(Rt)}}return ht}function Oy(y,w,M,U){return Ca(y,function(re,be,Ae){w(U,M(re),be,Ae)}),U}function tc(y,w,M){w=fo(w,y),y=bu(y,w);var U=y==null?y:y[Yn(Ta(w))];return U==null?n:Wa(U,y,M)}function pp(y){return Ir(y)&&Tn(y)==We}function Ja(y){return Ir(y)&&Tn(y)==ye}function Wr(y){return Ir(y)&&Tn(y)==ae}function nc(y,w,M,U,re){return y===w?!0:y==null||w==null||!Ir(y)&&!Ir(w)?y!==y&&w!==w:Yd(y,w,M,U,nc,re)}function Yd(y,w,M,U,re,be){var Ae=tn(y),$e=tn(w),Ke=Ae?Re:ua(y),ht=$e?Re:ua(w);Ke=Ke==We?ee:Ke,ht=ht==We?ee:ht;var pt=Ke==ee,gt=ht==ee,At=Ke==ht;if(At&&pl(y)){if(!pl(w))return!1;Ae=!0,pt=!1}if(At&&!pt)return be||(be=new Fa),Ae||Du(y)?K0(y,w,M,U,re,be):Q0(y,w,Ke,M,U,re,be);if(!(M&b)){var Rt=pt&&Gn.call(y,"__wrapped__"),Qt=gt&&Gn.call(w,"__wrapped__");if(Rt||Qt){var yn=Rt?y.value():y,Xt=Qt?w.value():w;return be||(be=new Fa),re(yn,Xt,M,U,be)}}return At?(be||(be=new Fa),ca(y,w,M,U,re,be)):!1}function mp(y){return Ir(y)&&ua(y)==Q}function Kd(y,w,M,U){var re=M.length,be=re,Ae=!U;if(y==null)return!be;for(y=Rn(y);re--;){var $e=M[re];if(Ae&&$e[2]?$e[1]!==y[$e[0]]:!($e[0]in y))return!1}for(;++re<be;){$e=M[re];var Ke=$e[0],ht=y[Ke],pt=$e[1];if(Ae&&$e[2]){if(ht===n&&!(Ke in y))return!1}else{var gt=new Fa;if(U)var At=U(ht,pt,Ke,y,w,gt);if(!(At===n?nc(pt,ht,b|j,U,gt):At))return!1}}return!0}function Is(y){if(!Er(y)||Fp(y))return!1;var w=gs(y)?by:vn;return w.test(yo(y))}function gp(y){return Ir(y)&&Tn(y)==Ge}function Dy(y){return Ir(y)&&ua(y)==Ne}function My(y){return Ir(y)&&dc(y.length)&&!!ar[Tn(y)]}function Iy(y){return typeof y=="function"?y:y==null?Ze:typeof y=="object"?tn(y)?vp(y[0],y[1]):Ly(y):Ln(y)}function yp(y){if(!fr(y))return Ui(y);var w=[];for(var M in Rn(y))Gn.call(y,M)&&M!="constructor"&&w.push(M);return w}function O0(y){if(!Er(y))return il(y);var w=fr(y),M=[];for(var U in y)U=="constructor"&&(w||!Gn.call(y,U))||M.push(U);return M}function xp(y,w){return y<w}function Ry(y,w){var M=-1,U=na(y)?rt(y.length):[];return uo(y,function(re,be,Ae){U[++M]=w(re,be,Ae)}),U}function Ly(y){var w=Mp(y);return w.length==1&&w[0][2]?t1(w[0][0],w[0][1]):function(M){return M===y||Kd(M,y,w)}}function vp(y,w){return Rp(y)&&e1(w)?t1(Yn(y),w):function(M){var U=Ph(M,y);return U===n&&U===w?Lu(M,y):nc(w,U,b|j)}}function Qd(y,w,M,U,re){y!==w&&pu(w,function(be,Ae){if(re||(re=new Fa),Er(be))a_(y,w,Ae,M,Qd,U,re);else{var $e=U?U($p(y,Ae),be,Ae+"",y,w,re):n;$e===n&&($e=be),Ms(y,Ae,$e)}},da)}function a_(y,w,M,U,re,be,Ae){var $e=$p(y,M),Ke=$p(w,M),ht=Ae.get(Ke);if(ht){Ms(y,M,ht);return}var pt=be?be($e,Ke,M+"",y,w,Ae):n,gt=pt===n;if(gt){var At=tn(Ke),Rt=!At&&pl(Ke),Qt=!At&&!Rt&&Du(Ke);pt=Ke,At||Rt||Qt?tn($e)?pt=$e:zr($e)?pt=ea($e):Rt?(gt=!1,pt=Hy(Ke,!0)):Qt?(gt=!1,pt=Wy(Ke,!0)):pt=[]:Qi(Ke)||jo(Ke)?(pt=$e,jo($e)?pt=W1($e):(!Er($e)||gs($e))&&(pt=ex(Ke))):gt=!1}gt&&(Ae.set(Ke,pt),re(pt,Ke,U,be,Ae),Ae.delete(Ke)),Ms(y,M,pt)}function Fy(y,w){var M=y.length;if(M)return w+=w<0?M:0,ms(w,M)?y[w]:n}function $y(y,w,M){w.length?w=Cr(w,function(be){return tn(be)?function(Ae){return Gi(Ae,be.length===1?be[0]:be)}:be}):w=[Ze];var U=-1;w=Cr(w,mi(Bt()));var re=Ry(y,function(be,Ae,$e){var Ke=Cr(w,function(ht){return ht(be)});return{criteria:Ke,index:++U,value:be}});return o0(re,function(be,Ae){return q0(be,Ae,M)})}function D0(y,w){return bp(y,w,function(M,U){return Lu(y,U)})}function bp(y,w,M){for(var U=-1,re=w.length,be={};++U<re;){var Ae=w[U],$e=Gi(y,Ae);M($e,Ae)&&yu(be,fo(Ae,y),$e)}return be}function M0(y){return function(w){return Gi(w,y)}}function jp(y,w,M,U){var re=U?py:eu,be=-1,Ae=w.length,$e=y;for(y===w&&(w=ea(w)),M&&($e=Cr(y,mi(M)));++be<Ae;)for(var Ke=0,ht=w[be],pt=M?M(ht):ht;(Ke=re($e,pt,Ke,U))>-1;)$e!==y&&ip.call($e,Ke,1),ip.call(y,Ke,1);return y}function By(y,w){for(var M=y?w.length:0,U=M-1;M--;){var re=w[M];if(M==U||re!==be){var be=re;ms(re)?ip.call(y,re,1):eh(y,re)}}return y}function wp(y,w){return y+so(wy()*(w-y+1))}function I0(y,w,M,U){for(var re=-1,be=jr(cu((w-y)/(M||1)),0),Ae=rt(be);be--;)Ae[U?be:++re]=y,y+=M;return Ae}function zy(y,w){var M="";if(!y||w<1||w>se)return M;do w%2&&(M+=y),w=so(w/2),w&&(y+=y);while(w);return M}function dn(y,w){return mh(nx(y,w,Ze),y+"")}function gu(y){return hu($u(y))}function Np(y,w){var M=$u(y);return yh(M,fs(w,0,M.length))}function yu(y,w,M,U){if(!Er(y))return y;w=fo(w,y);for(var re=-1,be=w.length,Ae=be-1,$e=y;$e!=null&&++re<be;){var Ke=Yn(w[re]),ht=M;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return y;if(re!=Ae){var pt=$e[Ke];ht=U?U(pt,Ke,$e):n,ht===n&&(ht=Er(pt)?pt:ms(w[re+1])?[]:{})}Jl($e,Ke,ht),$e=$e[Ke]}return y}var Xd=uu?function(y,w){return uu.set(y,w),y}:Ze,Jd=Ld?function(y,w){return Ld(y,"toString",{configurable:!0,enumerable:!1,value:Xe(w),writable:!0})}:Ze;function R0(y){return yh($u(y))}function vi(y,w,M){var U=-1,re=y.length;w<0&&(w=-w>re?0:re+w),M=M>re?re:M,M<0&&(M+=re),re=w>M?0:M-w>>>0,w>>>=0;for(var be=rt(re);++U<re;)be[U]=y[U+w];return be}function L0(y,w){var M;return uo(y,function(U,re,be){return M=w(U,re,be),!M}),!!M}function Zd(y,w,M){var U=0,re=y==null?U:y.length;if(typeof w=="number"&&w===w&&re<=K){for(;U<re;){var be=U+re>>>1,Ae=y[be];Ae!==null&&!za(Ae)&&(M?Ae<=w:Ae<w)?U=be+1:re=be}return re}return Sp(y,w,Ze,M)}function Sp(y,w,M,U){var re=0,be=y==null?0:y.length;if(be===0)return 0;w=M(w);for(var Ae=w!==w,$e=w===null,Ke=za(w),ht=w===n;re<be;){var pt=so((re+be)/2),gt=M(y[pt]),At=gt!==n,Rt=gt===null,Qt=gt===gt,yn=za(gt);if(Ae)var Xt=U||Qt;else ht?Xt=Qt&&(U||At):$e?Xt=Qt&&At&&(U||!Rt):Ke?Xt=Qt&&At&&!Rt&&(U||!yn):Rt||yn?Xt=!1:Xt=U?gt<=w:gt<w;Xt?re=pt+1:be=pt}return Tr(be,we)}function qy(y,w){for(var M=-1,U=y.length,re=0,be=[];++M<U;){var Ae=y[M],$e=w?w(Ae):Ae;if(!M||!ai($e,Ke)){var Ke=$e;be[re++]=Ae===0?0:Ae}}return be}function _p(y){return typeof y=="number"?y:za(y)?z:+y}function Za(y){if(typeof y=="string")return y;if(tn(y))return Cr(y,Za)+"";if(za(y))return Jo?Jo.call(y):"";var w=y+"";return w=="0"&&1/y==-1/0?"-0":w}function ho(y,w,M){var U=-1,re=Yf,be=y.length,Ae=!0,$e=[],Ke=$e;if(M)Ae=!1,re=dy;else if(be>=i){var ht=w?null:W0(y);if(ht)return np(ht);Ae=!1,re=nu,Ke=new lo}else Ke=w?[]:$e;e:for(;++U<be;){var pt=y[U],gt=w?w(pt):pt;if(pt=M||pt!==0?pt:0,Ae&&gt===gt){for(var At=Ke.length;At--;)if(Ke[At]===gt)continue e;w&&Ke.push(gt),$e.push(pt)}else re(Ke,gt,M)||(Ke!==$e&&Ke.push(gt),$e.push(pt))}return $e}function eh(y,w){return w=fo(w,y),y=bu(y,w),y==null||delete y[Yn(Ta(w))]}function Uy(y,w,M,U){return yu(y,w,M(Gi(y,w)),U)}function th(y,w,M,U){for(var re=y.length,be=U?re:-1;(U?be--:++be<re)&&w(y[be],be,y););return M?vi(y,U?0:be,U?be+1:re):vi(y,U?be+1:0,U?re:be)}function F0(y,w){var M=y;return M instanceof mn&&(M=M.value()),hy(w,function(U,re){return re.func.apply(re.thisArg,io([U],re.args))},M)}function nh(y,w,M){var U=y.length;if(U<2)return U?ho(y[0]):[];for(var re=-1,be=rt(U);++re<U;)for(var Ae=y[re],$e=-1;++$e<U;)$e!=re&&(be[re]=el(be[re]||Ae,y[$e],w,M));return ho(Sn(be,1),w,M)}function Vy(y,w,M){for(var U=-1,re=y.length,be=w.length,Ae={};++U<re;){var $e=U<be?w[U]:n;M(Ae,y[U],$e)}return Ae}function Cp(y){return zr(y)?y:[]}function rh(y){return typeof y=="function"?y:Ze}function fo(y,w){return tn(y)?y:Rp(y,w)?[y]:$s(Wn(y))}var $0=dn;function nl(y,w,M){var U=y.length;return M=M===n?U:M,!w&&M>=U?y:vi(y,w,M)}var B0=sp||function(y){return Hr.clearTimeout(y)};function Hy(y,w){if(w)return y.slice();var M=y.length,U=Vl?Vl(M):new y.constructor(M);return y.copy(U),U}function rc(y){var w=new y.constructor(y.byteLength);return new lu(w).set(new lu(y)),w}function Gy(y,w){var M=w?rc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.byteLength)}function Tp(y){var w=new y.constructor(y.source,Nt.exec(y));return w.lastIndex=y.lastIndex,w}function z0(y){return Kl?Rn(Kl.call(y)):{}}function Wy(y,w){var M=w?rc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.length)}function ah(y,w){if(y!==w){var M=y!==n,U=y===null,re=y===y,be=za(y),Ae=w!==n,$e=w===null,Ke=w===w,ht=za(w);if(!$e&&!ht&&!be&&y>w||be&&Ae&&Ke&&!$e&&!ht||U&&Ae&&Ke||!M&&Ke||!re)return 1;if(!U&&!be&&!ht&&y<w||ht&&M&&re&&!U&&!be||$e&&M&&re||!Ae&&re||!Ke)return-1}return 0}function q0(y,w,M){for(var U=-1,re=y.criteria,be=w.criteria,Ae=re.length,$e=M.length;++U<Ae;){var Ke=ah(re[U],be[U]);if(Ke){if(U>=$e)return Ke;var ht=M[U];return Ke*(ht=="desc"?-1:1)}}return y.index-w.index}function Yy(y,w,M,U){for(var re=-1,be=y.length,Ae=M.length,$e=-1,Ke=w.length,ht=jr(be-Ae,0),pt=rt(Ke+ht),gt=!U;++$e<Ke;)pt[$e]=w[$e];for(;++re<Ae;)(gt||re<be)&&(pt[M[re]]=y[re]);for(;ht--;)pt[$e++]=y[re++];return pt}function U0(y,w,M,U){for(var re=-1,be=y.length,Ae=-1,$e=M.length,Ke=-1,ht=w.length,pt=jr(be-$e,0),gt=rt(pt+ht),At=!U;++re<pt;)gt[re]=y[re];for(var Rt=re;++Ke<ht;)gt[Rt+Ke]=w[Ke];for(;++Ae<$e;)(At||re<be)&&(gt[Rt+M[Ae]]=y[re++]);return gt}function ea(y,w){var M=-1,U=y.length;for(w||(w=rt(U));++M<U;)w[M]=y[M];return w}function ei(y,w,M,U){var re=!M;M||(M={});for(var be=-1,Ae=w.length;++be<Ae;){var $e=w[be],Ke=U?U(M[$e],y[$e],$e,M,y):n;Ke===n&&(Ke=y[$e]),re?hs(M,$e,Ke):Jl(M,$e,Ke)}return M}function kp(y,w){return ei(y,dh(y),w)}function ih(y,w){return ei(y,Ip(y),w)}function ac(y,w){return function(M,U){var re=tn(M)?zS:Zo,be=w?w():{};return re(M,y,Bt(U,2),be)}}function ic(y){return dn(function(w,M){var U=-1,re=M.length,be=re>1?M[re-1]:n,Ae=re>2?M[2]:n;for(be=y.length>3&&typeof be=="function"?(re--,be):n,Ae&&Ba(M[0],M[1],Ae)&&(be=re<3?n:be,re=1),w=Rn(w);++U<re;){var $e=M[U];$e&&y(w,$e,U,be)}return w})}function Ky(y,w){return function(M,U){if(M==null)return M;if(!na(M))return y(M,U);for(var re=M.length,be=w?re:-1,Ae=Rn(M);(w?be--:++be<re)&&U(Ae[be],be,Ae)!==!1;);return M}}function sc(y){return function(w,M,U){for(var re=-1,be=Rn(w),Ae=U(w),$e=Ae.length;$e--;){var Ke=Ae[y?$e:++re];if(M(be[Ke],Ke,be)===!1)break}return w}}function V0(y,w,M){var U=w&S,re=Wi(y);function be(){var Ae=this&&this!==Hr&&this instanceof be?re:y;return Ae.apply(U?M:this,arguments)}return be}function bi(y){return function(w){w=Wn(w);var M=Wo(w)?Bi(w):n,U=M?M[0]:w.charAt(0),re=M?nl(M,1).join(""):w.slice(1);return U[y]()+re}}function $a(y){return function(w){return hy(A(wo(w).replace(Ad,"")),y,"")}}function Wi(y){return function(){var w=arguments;switch(w.length){case 0:return new y;case 1:return new y(w[0]);case 2:return new y(w[0],w[1]);case 3:return new y(w[0],w[1],w[2]);case 4:return new y(w[0],w[1],w[2],w[3]);case 5:return new y(w[0],w[1],w[2],w[3],w[4]);case 6:return new y(w[0],w[1],w[2],w[3],w[4],w[5]);case 7:return new y(w[0],w[1],w[2],w[3],w[4],w[5],w[6])}var M=xi(y.prototype),U=y.apply(M,w);return Er(U)?U:M}}function H0(y,w,M){var U=Wi(y);function re(){for(var be=arguments.length,Ae=rt(be),$e=be,Ke=lc(re);$e--;)Ae[$e]=arguments[$e];var ht=be<3&&Ae[0]!==Ke&&Ae[be-1]!==Ke?[]:Yo(Ae,Ke);if(be-=ht.length,be<M)return Qy(y,w,$r,re.placeholder,n,Ae,ht,n,n,M-be);var pt=this&&this!==Hr&&this instanceof re?U:y;return Wa(pt,this,Ae)}return re}function po(y){return function(w,M,U){var re=Rn(w);if(!na(w)){var be=Bt(M,3);w=aa(w),M=function($e){return be(re[$e],$e,re)}}var Ae=y(w,M,U);return Ae>-1?re[be?w[Ae]:Ae]:n}}function Rs(y){return wr(function(w){var M=w.length,U=M,re=Qa.prototype.thru;for(y&&w.reverse();U--;){var be=w[U];if(typeof be!="function")throw new yi(o);if(re&&!Ae&&uh(be)=="wrapper")var Ae=new Qa([],!0)}for(U=Ae?U:M;++U<M;){be=w[U];var $e=uh(be),Ke=$e=="wrapper"?Dp(be):n;Ke&&Lp(Ke[0])&&Ke[1]==(I|C|k|F)&&!Ke[4].length&&Ke[9]==1?Ae=Ae[uh(Ke[0])].apply(Ae,Ke[3]):Ae=be.length==1&&Lp(be)?Ae[$e]():Ae.thru(be)}return function(){var ht=arguments,pt=ht[0];if(Ae&&ht.length==1&&tn(pt))return Ae.plant(pt).value();for(var gt=0,At=M?w[gt].apply(this,ht):pt;++gt<M;)At=w[gt].call(this,At);return At}})}function $r(y,w,M,U,re,be,Ae,$e,Ke,ht){var pt=w&I,gt=w&S,At=w&_,Rt=w&(C|P),Qt=w&B,yn=At?n:Wi(y);function Xt(){for(var kn=arguments.length,Fn=rt(kn),xs=kn;xs--;)Fn[xs]=arguments[xs];if(Rt)var _i=lc(Xt),vs=YS(Fn,_i);if(U&&(Fn=Yy(Fn,U,re,Rt)),be&&(Fn=U0(Fn,be,Ae,Rt)),kn-=vs,Rt&&kn<ht){var ia=Yo(Fn,_i);return Qy(y,w,$r,Xt.placeholder,M,Fn,ia,$e,Ke,ht-kn)}var No=gt?M:this,hc=At?No[y]:y;return kn=Fn.length,$e?Fn=Fs(Fn,$e):Qt&&kn>1&&Fn.reverse(),pt&&Ke<kn&&(Fn.length=Ke),this&&this!==Hr&&this instanceof Xt&&(hc=yn||Wi(hc)),hc.apply(No,Fn)}return Xt}function sh(y,w){return function(M,U){return Oy(M,y,w(U),{})}}function xu(y,w){return function(M,U){var re;if(M===n&&U===n)return w;if(M!==n&&(re=M),U!==n){if(re===n)return U;typeof M=="string"||typeof U=="string"?(M=Za(M),U=Za(U)):(M=_p(M),U=_p(U)),re=y(M,U)}return re}}function oh(y){return wr(function(w){return w=Cr(w,mi(Bt())),dn(function(M){var U=this;return y(w,function(re){return Wa(re,U,M)})})})}function lh(y,w){w=w===n?" ":Za(w);var M=w.length;if(M<2)return M?zy(w,y):w;var U=zy(w,cu(y/Ds(w)));return Wo(w)?nl(Bi(U),0,y).join(""):U.slice(0,y)}function G0(y,w,M,U){var re=w&S,be=Wi(y);function Ae(){for(var $e=-1,Ke=arguments.length,ht=-1,pt=U.length,gt=rt(pt+Ke),At=this&&this!==Hr&&this instanceof Ae?be:y;++ht<pt;)gt[ht]=U[ht];for(;Ke--;)gt[ht++]=arguments[++$e];return Wa(At,re?M:this,gt)}return Ae}function rl(y){return function(w,M,U){return U&&typeof U!="number"&&Ba(w,M,U)&&(M=U=n),w=qs(w),M===n?(M=w,w=0):M=qs(M),U=U===n?w<M?1:-1:qs(U),I0(w,M,U,y)}}function oc(y){return function(w,M){return typeof w=="string"&&typeof M=="string"||(w=Xi(w),M=Xi(M)),y(w,M)}}function Qy(y,w,M,U,re,be,Ae,$e,Ke,ht){var pt=w&C,gt=pt?Ae:n,At=pt?n:Ae,Rt=pt?be:n,Qt=pt?n:be;w|=pt?k:O,w&=~(pt?O:k),w&T||(w&=-4);var yn=[y,w,re,Rt,gt,Qt,At,$e,Ke,ht],Xt=M.apply(n,yn);return Lp(y)&&Bp(Xt,yn),Xt.placeholder=U,zp(Xt,y,w)}function Ap(y){var w=Gr[y];return function(M,U){if(M=Xi(M),U=U==null?0:Tr(on(U),292),U&&Fd(M)){var re=(Wn(M)+"e").split("e"),be=w(re[0]+"e"+(+re[1]+U));return re=(Wn(be)+"e").split("e"),+(re[0]+"e"+(+re[1]-U))}return w(M)}}var W0=Nn&&1/np(new Nn([,-0]))[1]==Y?function(y){return new Nn(y)}:Pt;function ch(y){return function(w){var M=ua(w);return M==Q?tp(w):M==Ne?KS(w):WS(w,y(w))}}function Ls(y,w,M,U,re,be,Ae,$e){var Ke=w&_;if(!Ke&&typeof y!="function")throw new yi(o);var ht=U?U.length:0;if(ht||(w&=-97,U=re=n),Ae=Ae===n?Ae:jr(on(Ae),0),$e=$e===n?$e:on($e),ht-=re?re.length:0,w&O){var pt=U,gt=re;U=re=n}var At=Ke?n:Dp(y),Rt=[y,w,M,U,re,pt,gt,be,Ae,$e];if(At&&ph(Rt,At),y=Rt[0],w=Rt[1],M=Rt[2],U=Rt[3],re=Rt[4],$e=Rt[9]=Rt[9]===n?Ke?0:y.length:jr(Rt[9]-ht,0),!$e&&w&(C|P)&&(w&=-25),!w||w==S)var Qt=V0(y,w,M);else w==C||w==P?Qt=H0(y,w,$e):(w==k||w==(S|k))&&!re.length?Qt=G0(y,w,M,U):Qt=$r.apply(n,Rt);var yn=At?Xd:Bp;return zp(yn(Qt,Rt),y,w)}function Ep(y,w,M,U){return y===n||ai(y,su[M])&&!Gn.call(U,M)?w:y}function Xy(y,w,M,U,re,be){return Er(y)&&Er(w)&&(be.set(w,y),Qd(y,w,n,Xy,be),be.delete(w)),y}function Y0(y){return Qi(y)?n:y}function K0(y,w,M,U,re,be){var Ae=M&b,$e=y.length,Ke=w.length;if($e!=Ke&&!(Ae&&Ke>$e))return!1;var ht=be.get(y),pt=be.get(w);if(ht&&pt)return ht==w&&pt==y;var gt=-1,At=!0,Rt=M&j?new lo:n;for(be.set(y,w),be.set(w,y);++gt<$e;){var Qt=y[gt],yn=w[gt];if(U)var Xt=Ae?U(yn,Qt,gt,w,y,be):U(Qt,yn,gt,y,w,be);if(Xt!==n){if(Xt)continue;At=!1;break}if(Rt){if(!fy(w,function(kn,Fn){if(!nu(Rt,Fn)&&(Qt===kn||re(Qt,kn,M,U,be)))return Rt.push(Fn)})){At=!1;break}}else if(!(Qt===yn||re(Qt,yn,M,U,be))){At=!1;break}}return be.delete(y),be.delete(w),At}function Q0(y,w,M,U,re,be,Ae){switch(M){case he:if(y.byteLength!=w.byteLength||y.byteOffset!=w.byteOffset)return!1;y=y.buffer,w=w.buffer;case ye:return!(y.byteLength!=w.byteLength||!be(new lu(y),new lu(w)));case ve:case ae:case ie:return ai(+y,+w);case ue:return y.name==w.name&&y.message==w.message;case Ge:case ne:return y==w+"";case Q:var $e=tp;case Ne:var Ke=U&b;if($e||($e=np),y.size!=w.size&&!Ke)return!1;var ht=Ae.get(y);if(ht)return ht==w;U|=j,Ae.set(y,w);var pt=K0($e(y),$e(w),U,re,be,Ae);return Ae.delete(y),pt;case de:if(Kl)return Kl.call(y)==Kl.call(w)}return!1}function ca(y,w,M,U,re,be){var Ae=M&b,$e=Pp(y),Ke=$e.length,ht=Pp(w),pt=ht.length;if(Ke!=pt&&!Ae)return!1;for(var gt=Ke;gt--;){var At=$e[gt];if(!(Ae?At in w:Gn.call(w,At)))return!1}var Rt=be.get(y),Qt=be.get(w);if(Rt&&Qt)return Rt==w&&Qt==y;var yn=!0;be.set(y,w),be.set(w,y);for(var Xt=Ae;++gt<Ke;){At=$e[gt];var kn=y[At],Fn=w[At];if(U)var xs=Ae?U(Fn,kn,At,w,y,be):U(kn,Fn,At,y,w,be);if(!(xs===n?kn===Fn||re(kn,Fn,M,U,be):xs)){yn=!1;break}Xt||(Xt=At=="constructor")}if(yn&&!Xt){var _i=y.constructor,vs=w.constructor;_i!=vs&&"constructor"in y&&"constructor"in w&&!(typeof _i=="function"&&_i instanceof _i&&typeof vs=="function"&&vs instanceof vs)&&(yn=!1)}return be.delete(y),be.delete(w),yn}function wr(y){return mh(nx(y,n,ni),y+"")}function Pp(y){return A0(y,aa,dh)}function Op(y){return A0(y,da,Ip)}var Dp=uu?function(y){return uu.get(y)}:Pt;function uh(y){for(var w=y.name+"",M=Vi[w],U=Gn.call(Vi,w)?M.length:0;U--;){var re=M[U],be=re.func;if(be==null||be==y)return re.name}return w}function lc(y){var w=Gn.call(fe,"placeholder")?fe:y;return w.placeholder}function Bt(){var y=fe.iteratee||Ht;return y=y===Ht?Iy:y,arguments.length?y(arguments[0],arguments[1]):y}function vu(y,w){var M=y.__data__;return go(w)?M[typeof w=="string"?"string":"hash"]:M.map}function Mp(y){for(var w=aa(y),M=w.length;M--;){var U=w[M],re=y[U];w[M]=[U,re,e1(re)]}return w}function al(y,w){var M=gy(y,w);return Is(M)?M:n}function X0(y){var w=Gn.call(y,La),M=y[La];try{y[La]=n;var U=!0}catch{}var re=Ra.call(y);return U&&(w?y[La]=M:delete y[La]),re}var dh=Qo?function(y){return y==null?[]:(y=Rn(y),Os(Qo(y),function(w){return Hl.call(y,w)}))}:z_,Ip=Qo?function(y){for(var w=[];y;)io(w,dh(y)),y=Id(y);return w}:z_,ua=Tn;($d&&ua(new $d(new ArrayBuffer(1)))!=he||Zr&&ua(new Zr)!=Q||kr&&ua(kr.resolve())!=Se||Nn&&ua(new Nn)!=Ne||ds&&ua(new ds)!=Ee)&&(ua=function(y){var w=Tn(y),M=w==ee?y.constructor:n,U=M?yo(M):"";if(U)switch(U){case y0:return he;case x0:return Q;case Bd:return Se;case zd:return Ne;case v0:return Ee}return w});function J0(y,w,M){for(var U=-1,re=M.length;++U<re;){var be=M[U],Ae=be.size;switch(be.type){case"drop":y+=Ae;break;case"dropRight":w-=Ae;break;case"take":w=Tr(w,y+Ae);break;case"takeRight":y=jr(y,w-Ae);break}}return{start:y,end:w}}function Jy(y){var w=y.match($l);return w?w[1].split(zo):[]}function hh(y,w,M){w=fo(w,y);for(var U=-1,re=w.length,be=!1;++U<re;){var Ae=Yn(w[U]);if(!(be=y!=null&&M(y,Ae)))break;y=y[Ae]}return be||++U!=re?be:(re=y==null?0:y.length,!!re&&dc(re)&&ms(Ae,re)&&(tn(y)||jo(y)))}function Zy(y){var w=y.length,M=new y.constructor(w);return w&&typeof y[0]=="string"&&Gn.call(y,"index")&&(M.index=y.index,M.input=y.input),M}function ex(y){return typeof y.constructor=="function"&&!fr(y)?xi(Id(y)):{}}function tx(y,w,M){var U=y.constructor;switch(w){case ye:return rc(y);case ve:case ae:return new U(+y);case he:return Gy(y,M);case ge:case _e:case ze:case Oe:case He:case nt:case mt:case De:case Je:return Wy(y,M);case Q:return new U;case ie:case ne:return new U(y);case Ge:return Tp(y);case Ne:return new U;case de:return z0(y)}}function Z0(y,w){var M=w.length;if(!M)return y;var U=M-1;return w[U]=(M>1?"& ":"")+w[U],w=w.join(M>2?", ":" "),y.replace(Ha,`{
/* [wrapped with `+w+`] */
`)}function mo(y){return tn(y)||jo(y)||!!(Ya&&y&&y[Ya])}function ms(y,w){var M=typeof y;return w=w??se,!!w&&(M=="number"||M!="symbol"&&ya.test(y))&&y>-1&&y%1==0&&y<w}function Ba(y,w,M){if(!Er(M))return!1;var U=typeof w;return(U=="number"?na(M)&&ms(w,M.length):U=="string"&&w in M)?ai(M[w],y):!1}function Rp(y,w){if(tn(y))return!1;var M=typeof y;return M=="number"||M=="symbol"||M=="boolean"||y==null||za(y)?!0:br.test(y)||!Xn.test(y)||w!=null&&y in Rn(w)}function go(y){var w=typeof y;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?y!=="__proto__":y===null}function Lp(y){var w=uh(y),M=fe[w];if(typeof M!="function"||!(w in mn.prototype))return!1;if(y===M)return!0;var U=Dp(M);return!!U&&y===U[0]}function Fp(y){return!!vy&&vy in y}var fh=Dd?gs:q_;function fr(y){var w=y&&y.constructor,M=typeof w=="function"&&w.prototype||su;return y===M}function e1(y){return y===y&&!Er(y)}function t1(y,w){return function(M){return M==null?!1:M[y]===w&&(w!==n||y in Rn(M))}}function n1(y){var w=_h(y,function(U){return M.size===d&&M.clear(),U}),M=w.cache;return w}function ph(y,w){var M=y[1],U=w[1],re=M|U,be=re<(S|_|I),Ae=U==I&&M==C||U==I&&M==F&&y[7].length<=w[8]||U==(I|F)&&w[7].length<=w[8]&&M==C;if(!(be||Ae))return y;U&S&&(y[2]=w[2],re|=M&S?0:T);var $e=w[3];if($e){var Ke=y[3];y[3]=Ke?Yy(Ke,$e,w[4]):$e,y[4]=Ke?Yo(y[3],f):w[4]}return $e=w[5],$e&&(Ke=y[5],y[5]=Ke?U0(Ke,$e,w[6]):$e,y[6]=Ke?Yo(y[5],f):w[6]),$e=w[7],$e&&(y[7]=$e),U&I&&(y[8]=y[8]==null?w[8]:Tr(y[8],w[8])),y[9]==null&&(y[9]=w[9]),y[0]=w[0],y[1]=re,y}function il(y){var w=[];if(y!=null)for(var M in Rn(y))w.push(M);return w}function r1(y){return Ra.call(y)}function nx(y,w,M){return w=jr(w===n?y.length-1:w,0),function(){for(var U=arguments,re=-1,be=jr(U.length-w,0),Ae=rt(be);++re<be;)Ae[re]=U[w+re];re=-1;for(var $e=rt(w+1);++re<w;)$e[re]=U[re];return $e[w]=M(Ae),Wa(y,this,$e)}}function bu(y,w){return w.length<2?y:Gi(y,vi(w,0,-1))}function Fs(y,w){for(var M=y.length,U=Tr(w.length,M),re=ea(y);U--;){var be=w[U];y[U]=ms(be,M)?re[be]:n}return y}function $p(y,w){if(!(w==="constructor"&&typeof y[w]=="function")&&w!="__proto__")return y[w]}var Bp=gh(Xd),ju=jy||function(y,w){return Hr.setTimeout(y,w)},mh=gh(Jd);function zp(y,w,M){var U=w+"";return mh(y,Z0(U,a1(Jy(U),M)))}function gh(y){var w=0,M=0;return function(){var U=oo(),re=H-(U-M);if(M=U,re>0){if(++w>=V)return arguments[0]}else w=0;return y.apply(n,arguments)}}function yh(y,w){var M=-1,U=y.length,re=U-1;for(w=w===n?U:w;++M<w;){var be=wp(M,re),Ae=y[be];y[be]=y[M],y[M]=Ae}return y.length=w,y}var $s=n1(function(y){var w=[];return y.charCodeAt(0)===46&&w.push(""),y.replace(Vn,function(M,U,re,be){w.push(re?be.replace(qo,"$1"):U||M)}),w});function Yn(y){if(typeof y=="string"||za(y))return y;var w=y+"";return w=="0"&&1/y==-1/0?"-0":w}function yo(y){if(y!=null){try{return Md.call(y)}catch{}try{return y+""}catch{}}return""}function a1(y,w){return $i(Ie,function(M){var U="_."+M[0];w&M[1]&&!Yf(y,U)&&y.push(U)}),y.sort()}function ta(y){if(y instanceof mn)return y.clone();var w=new Qa(y.__wrapped__,y.__chain__);return w.__actions__=ea(y.__actions__),w.__index__=y.__index__,w.__values__=y.__values__,w}function i_(y,w,M){(M?Ba(y,w,M):w===n)?w=1:w=jr(on(w),0);var U=y==null?0:y.length;if(!U||w<1)return[];for(var re=0,be=0,Ae=rt(cu(U/w));re<U;)Ae[be++]=vi(y,re,re+=w);return Ae}function i1(y){for(var w=-1,M=y==null?0:y.length,U=0,re=[];++w<M;){var be=y[w];be&&(re[U++]=be)}return re}function s1(){var y=arguments.length;if(!y)return[];for(var w=rt(y-1),M=arguments[0],U=y;U--;)w[U-1]=arguments[U];return io(tn(M)?ea(M):[M],Sn(w,1))}var Ar=dn(function(y,w){return zr(y)?el(y,Sn(w,1,zr,!0)):[]}),ti=dn(function(y,w){var M=Ta(w);return zr(M)&&(M=n),zr(y)?el(y,Sn(w,1,zr,!0),Bt(M,2)):[]}),xo=dn(function(y,w){var M=Ta(w);return zr(M)&&(M=n),zr(y)?el(y,Sn(w,1,zr,!0),n,M):[]});function o1(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:on(w),vi(y,w<0?0:w,U)):[]}function l1(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:on(w),w=U-w,vi(y,0,w<0?0:w)):[]}function s_(y,w){return y&&y.length?th(y,Bt(w,3),!0,!0):[]}function rx(y,w){return y&&y.length?th(y,Bt(w,3),!0):[]}function ji(y,w,M,U){var re=y==null?0:y.length;return re?(M&&typeof M!="number"&&Ba(y,w,M)&&(M=0,U=re),fn(y,w,M,U)):[]}function Yi(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=M==null?0:on(M);return re<0&&(re=jr(U+re,0)),Kf(y,Bt(w,3),re)}function ax(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=U-1;return M!==n&&(re=on(M),re=M<0?jr(U+re,0):Tr(re,U-1)),Kf(y,Bt(w,3),re,!0)}function ni(y){var w=y==null?0:y.length;return w?Sn(y,1):[]}function c1(y){var w=y==null?0:y.length;return w?Sn(y,Y):[]}function sl(y,w){var M=y==null?0:y.length;return M?(w=w===n?1:on(w),Sn(y,w)):[]}function cc(y){for(var w=-1,M=y==null?0:y.length,U={};++w<M;){var re=y[w];U[re[0]]=re[1]}return U}function vo(y){return y&&y.length?y[0]:n}function ix(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=M==null?0:on(M);return re<0&&(re=jr(U+re,0)),eu(y,w,re)}function sx(y){var w=y==null?0:y.length;return w?vi(y,0,-1):[]}var Bs=dn(function(y){var w=Cr(y,Cp);return w.length&&w[0]===y[0]?Py(w):[]}),u1=dn(function(y){var w=Ta(y),M=Cr(y,Cp);return w===Ta(M)?w=n:M.pop(),M.length&&M[0]===y[0]?Py(M,Bt(w,2)):[]}),wu=dn(function(y){var w=Ta(y),M=Cr(y,Cp);return w=typeof w=="function"?w:n,w&&M.pop(),M.length&&M[0]===y[0]?Py(M,n,w):[]});function xh(y,w){return y==null?"":qi.call(y,w)}function Ta(y){var w=y==null?0:y.length;return w?y[w-1]:n}function Nu(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=U;return M!==n&&(re=on(M),re=re<0?jr(U+re,0):Tr(re,U-1)),w===w?gi(y,w,re):Kf(y,tu,re,!0)}function d1(y,w){return y&&y.length?Fy(y,on(w)):n}var h1=dn(Su);function Su(y,w){return y&&y.length&&w&&w.length?jp(y,w):y}function f1(y,w,M){return y&&y.length&&w&&w.length?jp(y,w,Bt(M,2)):y}function qp(y,w,M){return y&&y.length&&w&&w.length?jp(y,w,n,M):y}var p1=wr(function(y,w){var M=y==null?0:y.length,U=Gd(y,w);return By(y,Cr(w,function(re){return ms(re,M)?+re:re}).sort(ah)),U});function o_(y,w){var M=[];if(!(y&&y.length))return M;var U=-1,re=[],be=y.length;for(w=Bt(w,3);++U<be;){var Ae=y[U];w(Ae,U,y)&&(M.push(Ae),re.push(U))}return By(y,re),M}function ox(y){return y==null?y:Ny.call(y)}function er(y,w,M){var U=y==null?0:y.length;return U?(M&&typeof M!="number"&&Ba(y,w,M)?(w=0,M=U):(w=w==null?0:on(w),M=M===n?U:on(M)),vi(y,w,M)):[]}function gr(y,w){return Zd(y,w)}function bn(y,w,M){return Sp(y,w,Bt(M,2))}function Dn(y,w){var M=y==null?0:y.length;if(M){var U=Zd(y,w);if(U<M&&ai(y[U],w))return U}return-1}function tr(y,w){return Zd(y,w,!0)}function wi(y,w,M){return Sp(y,w,Bt(M,2),!0)}function ol(y,w){var M=y==null?0:y.length;if(M){var U=Zd(y,w,!0)-1;if(ai(y[U],w))return U}return-1}function _u(y){return y&&y.length?qy(y):[]}function lx(y,w){return y&&y.length?qy(y,Bt(w,2)):[]}function bo(y){var w=y==null?0:y.length;return w?vi(y,1,w):[]}function Br(y,w,M){return y&&y.length?(w=M||w===n?1:on(w),vi(y,0,w<0?0:w)):[]}function ll(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:on(w),w=U-w,vi(y,w<0?0:w,U)):[]}function uc(y,w){return y&&y.length?th(y,Bt(w,3),!1,!0):[]}function cx(y,w){return y&&y.length?th(y,Bt(w,3)):[]}var Ki=dn(function(y){return ho(Sn(y,1,zr,!0))}),Cu=dn(function(y){var w=Ta(y);return zr(w)&&(w=n),ho(Sn(y,1,zr,!0),Bt(w,2))}),vh=dn(function(y){var w=Ta(y);return w=typeof w=="function"?w:n,ho(Sn(y,1,zr,!0),n,w)});function ri(y){return y&&y.length?ho(y):[]}function ux(y,w){return y&&y.length?ho(y,Bt(w,2)):[]}function dx(y,w){return w=typeof w=="function"?w:n,y&&y.length?ho(y,n,w):[]}function Tu(y){if(!(y&&y.length))return[];var w=0;return y=Os(y,function(M){if(zr(M))return w=jr(M.length,w),!0}),Go(w,function(M){return Cr(y,Qf(M))})}function bh(y,w){if(!(y&&y.length))return[];var M=Tu(y);return w==null?M:Cr(M,function(U){return Wa(w,n,U)})}var cl=dn(function(y,w){return zr(y)?el(y,w):[]}),xa=dn(function(y){return nh(Os(y,zr))}),ul=dn(function(y){var w=Ta(y);return zr(w)&&(w=n),nh(Os(y,zr),Bt(w,2))}),ku=dn(function(y){var w=Ta(y);return w=typeof w=="function"?w:n,nh(Os(y,zr),n,w)}),Au=dn(Tu);function hx(y,w){return Vy(y||[],w||[],Jl)}function fx(y,w){return Vy(y||[],w||[],yu)}var m1=dn(function(y){var w=y.length,M=w>1?y[w-1]:n;return M=typeof M=="function"?(y.pop(),M):n,bh(y,M)});function Eu(y){var w=fe(y);return w.__chain__=!0,w}function px(y,w){return w(y),y}function ka(y,w){return w(y)}var g1=wr(function(y){var w=y.length,M=w?y[0]:0,U=this.__wrapped__,re=function(be){return Gd(be,y)};return w>1||this.__actions__.length||!(U instanceof mn)||!ms(M)?this.thru(re):(U=U.slice(M,+M+(w?1:0)),U.__actions__.push({func:ka,args:[re],thisArg:n}),new Qa(U,this.__chain__).thru(function(be){return w&&!be.length&&be.push(n),be}))});function Ni(){return Eu(this)}function y1(){return new Qa(this.value(),this.__chain__)}function x1(){this.__values__===n&&(this.__values__=Si(this.value()));var y=this.__index__>=this.__values__.length,w=y?n:this.__values__[this.__index__++];return{done:y,value:w}}function l_(){return this}function dl(y){for(var w,M=this;M instanceof Hi;){var U=ta(M);U.__index__=0,U.__values__=n,w?re.__wrapped__=U:w=U;var re=U;M=M.__wrapped__}return re.__wrapped__=y,w}function Up(){var y=this.__wrapped__;if(y instanceof mn){var w=y;return this.__actions__.length&&(w=new mn(this)),w=w.reverse(),w.__actions__.push({func:ka,args:[ox],thisArg:n}),new Qa(w,this.__chain__)}return this.thru(ox)}function mx(){return F0(this.__wrapped__,this.__actions__)}var Pu=ac(function(y,w,M){Gn.call(y,M)?++y[M]:hs(y,M,1)});function v1(y,w,M){var U=tn(y)?a0:Ay;return M&&Ba(y,w,M)&&(w=n),U(y,Bt(w,3))}function b1(y,w){var M=tn(y)?Os:Zn;return M(y,Bt(w,3))}var j1=po(Yi),gx=po(ax);function yx(y,w){return Sn(jh(y,w),1)}function c_(y,w){return Sn(jh(y,w),Y)}function u_(y,w,M){return M=M===n?1:on(M),Sn(jh(y,w),M)}function w1(y,w){var M=tn(y)?$i:uo;return M(y,Bt(w,3))}function xx(y,w){var M=tn(y)?qS:fp;return M(y,Bt(w,3))}var N1=ac(function(y,w,M){Gn.call(y,M)?y[M].push(w):hs(y,M,[w])});function Ou(y,w,M,U){y=na(y)?y:$u(y),M=M&&!U?on(M):0;var re=y.length;return M<0&&(M=jr(re+M,0)),tm(y)?M<=re&&y.indexOf(w,M)>-1:!!re&&eu(y,w,M)>-1}var Vp=dn(function(y,w,M){var U=-1,re=typeof w=="function",be=na(y)?rt(y.length):[];return uo(y,function(Ae){be[++U]=re?Wa(w,Ae,M):tc(Ae,w,M)}),be}),S1=ac(function(y,w,M){hs(y,M,w)});function jh(y,w){var M=tn(y)?Cr:Ry;return M(y,Bt(w,3))}function _1(y,w,M,U){return y==null?[]:(tn(w)||(w=w==null?[]:[w]),M=U?n:M,tn(M)||(M=M==null?[]:[M]),$y(y,w,M))}var C1=ac(function(y,w,M){y[M?0:1].push(w)},function(){return[[],[]]});function T1(y,w,M){var U=tn(y)?hy:my,re=arguments.length<3;return U(y,Bt(w,4),M,re,uo)}function k1(y,w,M){var U=tn(y)?US:my,re=arguments.length<3;return U(y,Bt(w,4),M,re,fp)}function Hp(y,w){var M=tn(y)?Os:Zn;return M(y,Ch(Bt(w,3)))}function A1(y){var w=tn(y)?hu:gu;return w(y)}function E1(y,w,M){(M?Ba(y,w,M):w===n)?w=1:w=on(w);var U=tn(y)?C0:Np;return U(y,w)}function pr(y){var w=tn(y)?T0:R0;return w(y)}function vx(y){if(y==null)return 0;if(na(y))return tm(y)?Ds(y):y.length;var w=ua(y);return w==Q||w==Ne?y.size:yp(y).length}function d_(y,w,M){var U=tn(y)?fy:L0;return M&&Ba(y,w,M)&&(w=n),U(y,Bt(w,3))}var P1=dn(function(y,w){if(y==null)return[];var M=w.length;return M>1&&Ba(y,w[0],w[1])?w=[]:M>2&&Ba(w[0],w[1],w[2])&&(w=[w[0]]),$y(y,Sn(w,1),[])}),Gp=Wl||function(){return Hr.Date.now()};function h_(y,w){if(typeof w!="function")throw new yi(o);return y=on(y),function(){if(--y<1)return w.apply(this,arguments)}}function O1(y,w,M){return w=M?n:w,w=y&&w==null?y.length:w,Ls(y,I,n,n,n,n,w)}function wh(y,w){var M;if(typeof w!="function")throw new yi(o);return y=on(y),function(){return--y>0&&(M=w.apply(this,arguments)),y<=1&&(w=n),M}}var hl=dn(function(y,w,M){var U=S;if(M.length){var re=Yo(M,lc(hl));U|=k}return Ls(y,U,w,M,re)}),Wp=dn(function(y,w,M){var U=S|_;if(M.length){var re=Yo(M,lc(Wp));U|=k}return Ls(w,U,y,M,re)});function Nh(y,w,M){w=M?n:w;var U=Ls(y,C,n,n,n,n,n,w);return U.placeholder=Nh.placeholder,U}function Yp(y,w,M){w=M?n:w;var U=Ls(y,P,n,n,n,n,n,w);return U.placeholder=Yp.placeholder,U}function fl(y,w,M){var U,re,be,Ae,$e,Ke,ht=0,pt=!1,gt=!1,At=!0;if(typeof y!="function")throw new yi(o);w=Xi(w)||0,Er(M)&&(pt=!!M.leading,gt="maxWait"in M,be=gt?jr(Xi(M.maxWait)||0,w):be,At="trailing"in M?!!M.trailing:At);function Rt(ia){var No=U,hc=re;return U=re=n,ht=ia,Ae=y.apply(hc,No),Ae}function Qt(ia){return ht=ia,$e=ju(kn,w),pt?Rt(ia):Ae}function yn(ia){var No=ia-Ke,hc=ia-ht,PM=w-No;return gt?Tr(PM,be-hc):PM}function Xt(ia){var No=ia-Ke,hc=ia-ht;return Ke===n||No>=w||No<0||gt&&hc>=be}function kn(){var ia=Gp();if(Xt(ia))return Fn(ia);$e=ju(kn,yn(ia))}function Fn(ia){return $e=n,At&&U?Rt(ia):(U=re=n,Ae)}function xs(){$e!==n&&B0($e),ht=0,U=Ke=re=$e=n}function _i(){return $e===n?Ae:Fn(Gp())}function vs(){var ia=Gp(),No=Xt(ia);if(U=arguments,re=this,Ke=ia,No){if($e===n)return Qt(Ke);if(gt)return B0($e),$e=ju(kn,w),Rt(Ke)}return $e===n&&($e=ju(kn,w)),Ae}return vs.cancel=xs,vs.flush=_i,vs}var zs=dn(function(y,w){return Zl(y,1,w)}),Sh=dn(function(y,w,M){return Zl(y,Xi(w)||0,M)});function f_(y){return Ls(y,B)}function _h(y,w){if(typeof y!="function"||w!=null&&typeof w!="function")throw new yi(o);var M=function(){var U=arguments,re=w?w.apply(this,U):U[0],be=M.cache;if(be.has(re))return be.get(re);var Ae=y.apply(this,U);return M.cache=be.set(re,Ae)||be,Ae};return M.cache=new(_h.Cache||Xa),M}_h.Cache=Xa;function Ch(y){if(typeof y!="function")throw new yi(o);return function(){var w=arguments;switch(w.length){case 0:return!y.call(this);case 1:return!y.call(this,w[0]);case 2:return!y.call(this,w[0],w[1]);case 3:return!y.call(this,w[0],w[1],w[2])}return!y.apply(this,w)}}function D1(y){return wh(2,y)}var M1=$0(function(y,w){w=w.length==1&&tn(w[0])?Cr(w[0],mi(Bt())):Cr(Sn(w,1),mi(Bt()));var M=w.length;return dn(function(U){for(var re=-1,be=Tr(U.length,M);++re<be;)U[re]=w[re].call(this,U[re]);return Wa(y,this,U)})}),bx=dn(function(y,w){var M=Yo(w,lc(bx));return Ls(y,k,n,w,M)}),Kp=dn(function(y,w){var M=Yo(w,lc(Kp));return Ls(y,O,n,w,M)}),I1=wr(function(y,w){return Ls(y,F,n,n,n,w)});function R1(y,w){if(typeof y!="function")throw new yi(o);return w=w===n?w:on(w),dn(y,w)}function p_(y,w){if(typeof y!="function")throw new yi(o);return w=w==null?0:jr(on(w),0),dn(function(M){var U=M[w],re=nl(M,0,w);return U&&io(re,U),Wa(y,this,re)})}function jx(y,w,M){var U=!0,re=!0;if(typeof y!="function")throw new yi(o);return Er(M)&&(U="leading"in M?!!M.leading:U,re="trailing"in M?!!M.trailing:re),fl(y,w,{leading:U,maxWait:w,trailing:re})}function wx(y){return O1(y,1)}function m_(y,w){return bx(rh(w),y)}function g_(){if(!arguments.length)return[];var y=arguments[0];return tn(y)?y:[y]}function Th(y){return _a(y,x)}function y_(y,w){return w=typeof w=="function"?w:n,_a(y,x,w)}function L1(y){return _a(y,p|x)}function jn(y,w){return w=typeof w=="function"?w:n,_a(y,p|x,w)}function Nx(y,w){return w==null||ky(y,w,aa(w))}function ai(y,w){return y===w||y!==y&&w!==w}var Sx=oc(Wd),F1=oc(function(y,w){return y>=w}),jo=pp(function(){return arguments}())?pp:function(y){return Ir(y)&&Gn.call(y,"callee")&&!Hl.call(y,"callee")},tn=rt.isArray,Qp=Wf?mi(Wf):Ja;function na(y){return y!=null&&dc(y.length)&&!gs(y)}function zr(y){return Ir(y)&&na(y)}function x_(y){return y===!0||y===!1||Ir(y)&&Tn(y)==ve}var pl=op||q_,$1=Zb?mi(Zb):Wr;function B1(y){return Ir(y)&&y.nodeType===1&&!Qi(y)}function Xp(y){if(y==null)return!0;if(na(y)&&(tn(y)||typeof y=="string"||typeof y.splice=="function"||pl(y)||Du(y)||jo(y)))return!y.length;var w=ua(y);if(w==Q||w==Ne)return!y.size;if(fr(y))return!yp(y).length;for(var M in y)if(Gn.call(y,M))return!1;return!0}function ir(y,w){return nc(y,w)}function _x(y,w,M){M=typeof M=="function"?M:n;var U=M?M(y,w):n;return U===n?nc(y,w,n,M):!!U}function ra(y){if(!Ir(y))return!1;var w=Tn(y);return w==ue||w==je||typeof y.message=="string"&&typeof y.name=="string"&&!Qi(y)}function v_(y){return typeof y=="number"&&Fd(y)}function gs(y){if(!Er(y))return!1;var w=Tn(y);return w==me||w==oe||w==Fe||w==qe}function Jp(y){return typeof y=="number"&&y==on(y)}function dc(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=se}function Er(y){var w=typeof y;return y!=null&&(w=="object"||w=="function")}function Ir(y){return y!=null&&typeof y=="object"}var Zp=e0?mi(e0):mp;function Cx(y,w){return y===w||Kd(y,w,Mp(w))}function b_(y,w,M){return M=typeof M=="function"?M:n,Kd(y,w,Mp(w),M)}function z1(y){return U1(y)&&y!=+y}function j_(y){if(fh(y))throw new Kt(s);return Is(y)}function q1(y){return y===null}function w_(y){return y==null}function U1(y){return typeof y=="number"||Ir(y)&&Tn(y)==ie}function Qi(y){if(!Ir(y)||Tn(y)!=ee)return!1;var w=Id(y);if(w===null)return!0;var M=Gn.call(w,"constructor")&&w.constructor;return typeof M=="function"&&M instanceof M&&Md.call(M)==zi}var em=t0?mi(t0):gp;function Tx(y){return Jp(y)&&y>=-9007199254740991&&y<=se}var V1=n0?mi(n0):Dy;function tm(y){return typeof y=="string"||!tn(y)&&Ir(y)&&Tn(y)==ne}function za(y){return typeof y=="symbol"||Ir(y)&&Tn(y)==de}var Du=r0?mi(r0):My;function ys(y){return y===n}function kx(y){return Ir(y)&&ua(y)==Ee}function H1(y){return Ir(y)&&Tn(y)==W}var G1=oc(xp),kh=oc(function(y,w){return y<=w});function Si(y){if(!y)return[];if(na(y))return tm(y)?Bi(y):ea(y);if(Gl&&y[Gl])return h0(y[Gl]());var w=ua(y),M=w==Q?tp:w==Ne?np:$u;return M(y)}function qs(y){if(!y)return y===0?y:0;if(y=Xi(y),y===Y||y===-1/0){var w=y<0?-1:1;return w*G}return y===y?y:0}function on(y){var w=qs(y),M=w%1;return w===w?M?w-M:w:0}function Us(y){return y?fs(on(y),0,ce):0}function Xi(y){if(typeof y=="number")return y;if(za(y))return z;if(Er(y)){var w=typeof y.valueOf=="function"?y.valueOf():y;y=Er(w)?w+"":w}if(typeof y!="string")return y===0?y:+y;y=l0(y);var M=It.test(y);return M||On.test(y)?BS(y.slice(2),M?2:8):St.test(y)?z:+y}function W1(y){return ei(y,da(y))}function Mu(y){return y?fs(on(y),-9007199254740991,se):y===0?y:0}function Wn(y){return y==null?"":Za(y)}var N_=ic(function(y,w){if(fr(w)||na(w)){ei(w,aa(w),y);return}for(var M in w)Gn.call(w,M)&&Jl(y,M,w[M])}),Y1=ic(function(y,w){ei(w,da(w),y)}),nm=ic(function(y,w,M,U){ei(w,da(w),y,U)}),S_=ic(function(y,w,M,U){ei(w,aa(w),y,U)}),__=wr(Gd);function C_(y,w){var M=xi(y);return w==null?M:co(M,w)}var T_=dn(function(y,w){y=Rn(y);var M=-1,U=w.length,re=U>2?w[2]:n;for(re&&Ba(w[0],w[1],re)&&(U=1);++M<U;)for(var be=w[M],Ae=da(be),$e=-1,Ke=Ae.length;++$e<Ke;){var ht=Ae[$e],pt=y[ht];(pt===n||ai(pt,su[ht])&&!Gn.call(y,ht))&&(y[ht]=be[ht])}return y}),K1=dn(function(y){return y.push(n,Xy),Wa(Oh,n,y)});function Iu(y,w){return i0(y,Bt(w,3),Ca)}function Ah(y,w){return i0(y,Bt(w,3),mu)}function Q1(y,w){return y==null?y:pu(y,Bt(w,3),da)}function k_(y,w){return y==null?y:ec(y,Bt(w,3),da)}function Ru(y,w){return y&&Ca(y,Bt(w,3))}function Eh(y,w){return y&&mu(y,Bt(w,3))}function X1(y){return y==null?[]:tl(y,aa(y))}function rm(y){return y==null?[]:tl(y,da(y))}function Ph(y,w,M){var U=y==null?n:Gi(y,w);return U===n?M:U}function Ax(y,w){return y!=null&&hh(y,w,Ey)}function Lu(y,w){return y!=null&&hh(y,w,E0)}var J1=sh(function(y,w,M){w!=null&&typeof w.toString!="function"&&(w=Ra.call(w)),y[w]=M},Xe(Ze)),Z1=sh(function(y,w,M){w!=null&&typeof w.toString!="function"&&(w=Ra.call(w)),Gn.call(y,w)?y[w].push(M):y[w]=[M]},Bt),A_=dn(tc);function aa(y){return na(y)?Ty(y):yp(y)}function da(y){return na(y)?Ty(y,!0):O0(y)}function E_(y,w){var M={};return w=Bt(w,3),Ca(y,function(U,re,be){hs(M,w(U,re,be),U)}),M}function P_(y,w){var M={};return w=Bt(w,3),Ca(y,function(U,re,be){hs(M,re,w(U,re,be))}),M}var O_=ic(function(y,w,M){Qd(y,w,M)}),Oh=ic(function(y,w,M,U){Qd(y,w,M,U)}),am=wr(function(y,w){var M={};if(y==null)return M;var U=!1;w=Cr(w,function(be){return be=fo(be,y),U||(U=be.length>1),be}),ei(y,Op(y),M),U&&(M=_a(M,p|g|x,Y0));for(var re=w.length;re--;)eh(M,w[re]);return M});function Ex(y,w){return Fu(y,Ch(Bt(w)))}var D_=wr(function(y,w){return y==null?{}:D0(y,w)});function Fu(y,w){if(y==null)return{};var M=Cr(Op(y),function(U){return[U]});return w=Bt(w),bp(y,M,function(U,re){return w(U,re[0])})}function M_(y,w,M){w=fo(w,y);var U=-1,re=w.length;for(re||(re=1,y=n);++U<re;){var be=y==null?n:y[Yn(w[U])];be===n&&(U=re,be=M),y=gs(be)?be.call(y):be}return y}function ej(y,w,M){return y==null?y:yu(y,w,M)}function tj(y,w,M,U){return U=typeof U=="function"?U:n,y==null?y:yu(y,w,M,U)}var Px=ch(aa),Ox=ch(da);function Dx(y,w,M){var U=tn(y),re=U||pl(y)||Du(y);if(w=Bt(w,4),M==null){var be=y&&y.constructor;re?M=U?new be:[]:Er(y)?M=gs(be)?xi(Id(y)):{}:M={}}return(re?$i:Ca)(y,function(Ae,$e,Ke){return w(M,Ae,$e,Ke)}),M}function nj(y,w){return y==null?!0:eh(y,w)}function im(y,w,M){return y==null?y:Uy(y,w,rh(M))}function I_(y,w,M,U){return U=typeof U=="function"?U:n,y==null?y:Uy(y,w,rh(M),U)}function $u(y){return y==null?[]:Zf(y,aa(y))}function Mx(y){return y==null?[]:Zf(y,da(y))}function Ix(y,w,M){return M===n&&(M=w,w=n),M!==n&&(M=Xi(M),M=M===M?M:0),w!==n&&(w=Xi(w),w=w===w?w:0),fs(Xi(y),w,M)}function sm(y,w,M){return w=qs(w),M===n?(M=w,w=0):M=qs(M),y=Xi(y),P0(y,w,M)}function Rx(y,w,M){if(M&&typeof M!="boolean"&&Ba(y,w,M)&&(w=M=n),M===n&&(typeof w=="boolean"?(M=w,w=n):typeof y=="boolean"&&(M=y,y=n)),y===n&&w===n?(y=0,w=1):(y=qs(y),w===n?(w=y,y=0):w=qs(w)),y>w){var U=y;y=w,w=U}if(M||y%1||w%1){var re=wy();return Tr(y+re*(w-y+Od("1e-"+((re+"").length-1))),w)}return wp(y,w)}var rj=$a(function(y,w,M){return w=w.toLowerCase(),y+(M?om(w):w)});function om(y){return N(Wn(y).toLowerCase())}function wo(y){return y=Wn(y),y&&y.replace(fi,ep).replace(ao,"")}function ml(y,w,M){y=Wn(y),w=Za(w);var U=y.length;M=M===n?U:fs(on(M),0,U);var re=M;return M-=w.length,M>=0&&y.slice(M,re)==w}function gl(y){return y=Wn(y),y&&Tt.test(y)?y.replace(ke,c0):y}function Dh(y){return y=Wn(y),y&&wn.test(y)?y.replace(Cn,"\\$&"):y}var Mh=$a(function(y,w,M){return y+(M?"-":"")+w.toLowerCase()}),yl=$a(function(y,w,M){return y+(M?" ":"")+w.toLowerCase()}),R_=bi("toLowerCase");function aj(y,w,M){y=Wn(y),w=on(w);var U=w?Ds(y):0;if(!w||U>=w)return y;var re=(w-U)/2;return lh(so(re),M)+y+lh(cu(re),M)}function Ih(y,w,M){y=Wn(y),w=on(w);var U=w?Ds(y):0;return w&&U<w?y+lh(w-U,M):y}function L_(y,w,M){y=Wn(y),w=on(w);var U=w?Ds(y):0;return w&&U<w?lh(w-U,M)+y:y}function ij(y,w,M){return M||w==null?w=0:w&&(w=+w),Yl(Wn(y).replace(la,""),w||0)}function lm(y,w,M){return(M?Ba(y,w,M):w===n)?w=1:w=on(w),zy(Wn(y),w)}function sj(){var y=arguments,w=Wn(y[0]);return y.length<3?w:w.replace(y[1],y[2])}var F_=$a(function(y,w,M){return y+(M?"_":"")+w.toLowerCase()});function cm(y,w,M){return M&&typeof M!="number"&&Ba(y,w,M)&&(w=M=n),M=M===n?ce:M>>>0,M?(y=Wn(y),y&&(typeof w=="string"||w!=null&&!em(w))&&(w=Za(w),!w&&Wo(y))?nl(Bi(y),0,M):y.split(w,M)):[]}var um=$a(function(y,w,M){return y+(M?" ":"")+N(w)});function oj(y,w,M){return y=Wn(y),M=M==null?0:fs(on(M),0,y.length),w=Za(w),y.slice(M,M+w.length)==w}function Rh(y,w,M){var U=fe.templateSettings;M&&Ba(y,w,M)&&(w=n),y=Wn(y),w=nm({},w,U,Ep);var re=nm({},w.imports,U.imports,Ep),be=aa(re),Ae=Zf(re,be),$e,Ke,ht=0,pt=w.interpolate||ro,gt="__p += '",At=rp((w.escape||ro).source+"|"+pt.source+"|"+(pt===Ct?at:ro).source+"|"+(w.evaluate||ro).source+"|$","g"),Rt="//# sourceURL="+(Gn.call(w,"sourceURL")?(w.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qb+"]")+`
`;y.replace(At,function(Xt,kn,Fn,xs,_i,vs){return Fn||(Fn=xs),gt+=y.slice(ht,vs).replace(_d,u0),kn&&($e=!0,gt+=`' +
__e(`+kn+`) +
'`),_i&&(Ke=!0,gt+=`';
`+_i+`;
__p += '`),Fn&&(gt+=`' +
((__t = (`+Fn+`)) == null ? '' : __t) +
'`),ht=vs+Xt.length,Xt}),gt+=`';
`;var Qt=Gn.call(w,"variable")&&w.variable;if(!Qt)gt=`with (obj) {
`+gt+`
}
`;else if(Sd.test(Qt))throw new Kt(l);gt=(Ke?gt.replace(et,""):gt).replace(ut,"$1").replace(_t,"$1;"),gt="function("+(Qt||"obj")+`) {
`+(Qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($e?", __e = _.escape":"")+(Ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+gt+`return __p
}`;var yn=R(function(){return In(be,Rt+"return "+gt).apply(n,Ae)});if(yn.source=gt,ra(yn))throw yn;return yn}function Lx(y){return Wn(y).toLowerCase()}function dm(y){return Wn(y).toUpperCase()}function lj(y,w,M){if(y=Wn(y),y&&(M||w===n))return l0(y);if(!y||!(w=Za(w)))return y;var U=Bi(y),re=Bi(w),be=ru(U,re),Ae=au(U,re)+1;return nl(U,be,Ae).join("")}function $_(y,w,M){if(y=Wn(y),y&&(M||w===n))return y.slice(0,yy(y)+1);if(!y||!(w=Za(w)))return y;var U=Bi(y),re=au(U,Bi(w))+1;return nl(U,0,re).join("")}function hm(y,w,M){if(y=Wn(y),y&&(M||w===n))return y.replace(la,"");if(!y||!(w=Za(w)))return y;var U=Bi(y),re=ru(U,Bi(w));return nl(U,re).join("")}function u(y,w){var M=$,U=L;if(Er(w)){var re="separator"in w?w.separator:re;M="length"in w?on(w.length):M,U="omission"in w?Za(w.omission):U}y=Wn(y);var be=y.length;if(Wo(y)){var Ae=Bi(y);be=Ae.length}if(M>=be)return y;var $e=M-Ds(U);if($e<1)return U;var Ke=Ae?nl(Ae,0,$e).join(""):y.slice(0,$e);if(re===n)return Ke+U;if(Ae&&($e+=Ke.length-$e),em(re)){if(y.slice($e).search(re)){var ht,pt=Ke;for(re.global||(re=rp(re.source,Wn(Nt.exec(re))+"g")),re.lastIndex=0;ht=re.exec(pt);)var gt=ht.index;Ke=Ke.slice(0,gt===n?$e:gt)}}else if(y.indexOf(Za(re),$e)!=$e){var At=Ke.lastIndexOf(re);At>-1&&(Ke=Ke.slice(0,At))}return Ke+U}function h(y){return y=Wn(y),y&&lt.test(y)?y.replace(vt,p0):y}var m=$a(function(y,w,M){return y+(M?" ":"")+w.toUpperCase()}),N=bi("toUpperCase");function A(y,w,M){return y=Wn(y),w=M?n:w,w===n?d0(y)?XS(y):GS(y):y.match(w)||[]}var R=dn(function(y,w){try{return Wa(y,n,w)}catch(M){return ra(M)?M:new Kt(M)}}),J=wr(function(y,w){return $i(w,function(M){M=Yn(M),hs(y,M,hl(y[M],y))}),y});function pe(y){var w=y==null?0:y.length,M=Bt();return y=w?Cr(y,function(U){if(typeof U[1]!="function")throw new yi(o);return[M(U[0]),U[1]]}):[],dn(function(U){for(var re=-1;++re<w;){var be=y[re];if(Wa(be[0],this,U))return Wa(be[1],this,U)}})}function Pe(y){return k0(_a(y,p))}function Xe(y){return function(){return y}}function ot(y,w){return y==null||y!==y?w:y}var ft=Rs(),tt=Rs(!0);function Ze(y){return y}function Ht(y){return Iy(typeof y=="function"?y:_a(y,p))}function Vt(y){return Ly(_a(y,p))}function sr(y,w){return vp(y,_a(w,p))}var Ye=dn(function(y,w){return function(M){return tc(M,y,w)}}),Be=dn(function(y,w){return function(M){return tc(y,M,w)}});function Qe(y,w,M){var U=aa(w),re=tl(w,U);M==null&&!(Er(w)&&(re.length||!U.length))&&(M=w,w=y,y=this,re=tl(w,aa(w)));var be=!(Er(M)&&"chain"in M)||!!M.chain,Ae=gs(y);return $i(re,function($e){var Ke=w[$e];y[$e]=Ke,Ae&&(y.prototype[$e]=function(){var ht=this.__chain__;if(be||ht){var pt=y(this.__wrapped__),gt=pt.__actions__=ea(this.__actions__);return gt.push({func:Ke,args:arguments,thisArg:y}),pt.__chain__=ht,pt}return Ke.apply(y,io([this.value()],arguments))})}),y}function dt(){return Hr._===this&&(Hr._=ou),this}function Pt(){}function gn(y){return y=on(y),dn(function(w){return Fy(w,y)})}var Ft=oh(Cr),Gt=oh(a0),ha=oh(fy);function Ln(y){return Rp(y)?Qf(Yn(y)):M0(y)}function xl(y){return function(w){return y==null?n:Gi(y,w)}}var B_=rl(),NG=rl(!0);function z_(){return[]}function q_(){return!1}function SG(){return{}}function _G(){return""}function CG(){return!0}function TG(y,w){if(y=on(y),y<1||y>se)return[];var M=ce,U=Tr(y,ce);w=Bt(w),y-=ce;for(var re=Go(U,w);++M<y;)w(M);return re}function kG(y){return tn(y)?Cr(y,Yn):za(y)?[y]:ea($s(Wn(y)))}function AG(y){var w=++cs;return Wn(y)+w}var EG=xu(function(y,w){return y+w},0),PG=Ap("ceil"),OG=xu(function(y,w){return y/w},1),DG=Ap("floor");function MG(y){return y&&y.length?ps(y,Ze,Wd):n}function IG(y,w){return y&&y.length?ps(y,Bt(w,2),Wd):n}function RG(y){return s0(y,Ze)}function LG(y,w){return s0(y,Bt(w,2))}function FG(y){return y&&y.length?ps(y,Ze,xp):n}function $G(y,w){return y&&y.length?ps(y,Bt(w,2),xp):n}var BG=xu(function(y,w){return y*w},1),zG=Ap("round"),qG=xu(function(y,w){return y-w},0);function UG(y){return y&&y.length?Jf(y,Ze):0}function VG(y,w){return y&&y.length?Jf(y,Bt(w,2)):0}return fe.after=h_,fe.ary=O1,fe.assign=N_,fe.assignIn=Y1,fe.assignInWith=nm,fe.assignWith=S_,fe.at=__,fe.before=wh,fe.bind=hl,fe.bindAll=J,fe.bindKey=Wp,fe.castArray=g_,fe.chain=Eu,fe.chunk=i_,fe.compact=i1,fe.concat=s1,fe.cond=pe,fe.conforms=Pe,fe.constant=Xe,fe.countBy=Pu,fe.create=C_,fe.curry=Nh,fe.curryRight=Yp,fe.debounce=fl,fe.defaults=T_,fe.defaultsDeep=K1,fe.defer=zs,fe.delay=Sh,fe.difference=Ar,fe.differenceBy=ti,fe.differenceWith=xo,fe.drop=o1,fe.dropRight=l1,fe.dropRightWhile=s_,fe.dropWhile=rx,fe.fill=ji,fe.filter=b1,fe.flatMap=yx,fe.flatMapDeep=c_,fe.flatMapDepth=u_,fe.flatten=ni,fe.flattenDeep=c1,fe.flattenDepth=sl,fe.flip=f_,fe.flow=ft,fe.flowRight=tt,fe.fromPairs=cc,fe.functions=X1,fe.functionsIn=rm,fe.groupBy=N1,fe.initial=sx,fe.intersection=Bs,fe.intersectionBy=u1,fe.intersectionWith=wu,fe.invert=J1,fe.invertBy=Z1,fe.invokeMap=Vp,fe.iteratee=Ht,fe.keyBy=S1,fe.keys=aa,fe.keysIn=da,fe.map=jh,fe.mapKeys=E_,fe.mapValues=P_,fe.matches=Vt,fe.matchesProperty=sr,fe.memoize=_h,fe.merge=O_,fe.mergeWith=Oh,fe.method=Ye,fe.methodOf=Be,fe.mixin=Qe,fe.negate=Ch,fe.nthArg=gn,fe.omit=am,fe.omitBy=Ex,fe.once=D1,fe.orderBy=_1,fe.over=Ft,fe.overArgs=M1,fe.overEvery=Gt,fe.overSome=ha,fe.partial=bx,fe.partialRight=Kp,fe.partition=C1,fe.pick=D_,fe.pickBy=Fu,fe.property=Ln,fe.propertyOf=xl,fe.pull=h1,fe.pullAll=Su,fe.pullAllBy=f1,fe.pullAllWith=qp,fe.pullAt=p1,fe.range=B_,fe.rangeRight=NG,fe.rearg=I1,fe.reject=Hp,fe.remove=o_,fe.rest=R1,fe.reverse=ox,fe.sampleSize=E1,fe.set=ej,fe.setWith=tj,fe.shuffle=pr,fe.slice=er,fe.sortBy=P1,fe.sortedUniq=_u,fe.sortedUniqBy=lx,fe.split=cm,fe.spread=p_,fe.tail=bo,fe.take=Br,fe.takeRight=ll,fe.takeRightWhile=uc,fe.takeWhile=cx,fe.tap=px,fe.throttle=jx,fe.thru=ka,fe.toArray=Si,fe.toPairs=Px,fe.toPairsIn=Ox,fe.toPath=kG,fe.toPlainObject=W1,fe.transform=Dx,fe.unary=wx,fe.union=Ki,fe.unionBy=Cu,fe.unionWith=vh,fe.uniq=ri,fe.uniqBy=ux,fe.uniqWith=dx,fe.unset=nj,fe.unzip=Tu,fe.unzipWith=bh,fe.update=im,fe.updateWith=I_,fe.values=$u,fe.valuesIn=Mx,fe.without=cl,fe.words=A,fe.wrap=m_,fe.xor=xa,fe.xorBy=ul,fe.xorWith=ku,fe.zip=Au,fe.zipObject=hx,fe.zipObjectDeep=fx,fe.zipWith=m1,fe.entries=Px,fe.entriesIn=Ox,fe.extend=Y1,fe.extendWith=nm,Qe(fe,fe),fe.add=EG,fe.attempt=R,fe.camelCase=rj,fe.capitalize=om,fe.ceil=PG,fe.clamp=Ix,fe.clone=Th,fe.cloneDeep=L1,fe.cloneDeepWith=jn,fe.cloneWith=y_,fe.conformsTo=Nx,fe.deburr=wo,fe.defaultTo=ot,fe.divide=OG,fe.endsWith=ml,fe.eq=ai,fe.escape=gl,fe.escapeRegExp=Dh,fe.every=v1,fe.find=j1,fe.findIndex=Yi,fe.findKey=Iu,fe.findLast=gx,fe.findLastIndex=ax,fe.findLastKey=Ah,fe.floor=DG,fe.forEach=w1,fe.forEachRight=xx,fe.forIn=Q1,fe.forInRight=k_,fe.forOwn=Ru,fe.forOwnRight=Eh,fe.get=Ph,fe.gt=Sx,fe.gte=F1,fe.has=Ax,fe.hasIn=Lu,fe.head=vo,fe.identity=Ze,fe.includes=Ou,fe.indexOf=ix,fe.inRange=sm,fe.invoke=A_,fe.isArguments=jo,fe.isArray=tn,fe.isArrayBuffer=Qp,fe.isArrayLike=na,fe.isArrayLikeObject=zr,fe.isBoolean=x_,fe.isBuffer=pl,fe.isDate=$1,fe.isElement=B1,fe.isEmpty=Xp,fe.isEqual=ir,fe.isEqualWith=_x,fe.isError=ra,fe.isFinite=v_,fe.isFunction=gs,fe.isInteger=Jp,fe.isLength=dc,fe.isMap=Zp,fe.isMatch=Cx,fe.isMatchWith=b_,fe.isNaN=z1,fe.isNative=j_,fe.isNil=w_,fe.isNull=q1,fe.isNumber=U1,fe.isObject=Er,fe.isObjectLike=Ir,fe.isPlainObject=Qi,fe.isRegExp=em,fe.isSafeInteger=Tx,fe.isSet=V1,fe.isString=tm,fe.isSymbol=za,fe.isTypedArray=Du,fe.isUndefined=ys,fe.isWeakMap=kx,fe.isWeakSet=H1,fe.join=xh,fe.kebabCase=Mh,fe.last=Ta,fe.lastIndexOf=Nu,fe.lowerCase=yl,fe.lowerFirst=R_,fe.lt=G1,fe.lte=kh,fe.max=MG,fe.maxBy=IG,fe.mean=RG,fe.meanBy=LG,fe.min=FG,fe.minBy=$G,fe.stubArray=z_,fe.stubFalse=q_,fe.stubObject=SG,fe.stubString=_G,fe.stubTrue=CG,fe.multiply=BG,fe.nth=d1,fe.noConflict=dt,fe.noop=Pt,fe.now=Gp,fe.pad=aj,fe.padEnd=Ih,fe.padStart=L_,fe.parseInt=ij,fe.random=Rx,fe.reduce=T1,fe.reduceRight=k1,fe.repeat=lm,fe.replace=sj,fe.result=M_,fe.round=zG,fe.runInContext=Ve,fe.sample=A1,fe.size=vx,fe.snakeCase=F_,fe.some=d_,fe.sortedIndex=gr,fe.sortedIndexBy=bn,fe.sortedIndexOf=Dn,fe.sortedLastIndex=tr,fe.sortedLastIndexBy=wi,fe.sortedLastIndexOf=ol,fe.startCase=um,fe.startsWith=oj,fe.subtract=qG,fe.sum=UG,fe.sumBy=VG,fe.template=Rh,fe.times=TG,fe.toFinite=qs,fe.toInteger=on,fe.toLength=Us,fe.toLower=Lx,fe.toNumber=Xi,fe.toSafeInteger=Mu,fe.toString=Wn,fe.toUpper=dm,fe.trim=lj,fe.trimEnd=$_,fe.trimStart=hm,fe.truncate=u,fe.unescape=h,fe.uniqueId=AG,fe.upperCase=m,fe.upperFirst=N,fe.each=w1,fe.eachRight=xx,fe.first=vo,Qe(fe,function(){var y={};return Ca(fe,function(w,M){Gn.call(fe.prototype,M)||(y[M]=w)}),y}(),{chain:!1}),fe.VERSION=a,$i(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){fe[y].placeholder=fe}),$i(["drop","take"],function(y,w){mn.prototype[y]=function(M){M=M===n?1:jr(on(M),0);var U=this.__filtered__&&!w?new mn(this):this.clone();return U.__filtered__?U.__takeCount__=Tr(M,U.__takeCount__):U.__views__.push({size:Tr(M,ce),type:y+(U.__dir__<0?"Right":"")}),U},mn.prototype[y+"Right"]=function(M){return this.reverse()[y](M).reverse()}}),$i(["filter","map","takeWhile"],function(y,w){var M=w+1,U=M==te||M==q;mn.prototype[y]=function(re){var be=this.clone();return be.__iteratees__.push({iteratee:Bt(re,3),type:M}),be.__filtered__=be.__filtered__||U,be}}),$i(["head","last"],function(y,w){var M="take"+(w?"Right":"");mn.prototype[y]=function(){return this[M](1).value()[0]}}),$i(["initial","tail"],function(y,w){var M="drop"+(w?"":"Right");mn.prototype[y]=function(){return this.__filtered__?new mn(this):this[M](1)}}),mn.prototype.compact=function(){return this.filter(Ze)},mn.prototype.find=function(y){return this.filter(y).head()},mn.prototype.findLast=function(y){return this.reverse().find(y)},mn.prototype.invokeMap=dn(function(y,w){return typeof y=="function"?new mn(this):this.map(function(M){return tc(M,y,w)})}),mn.prototype.reject=function(y){return this.filter(Ch(Bt(y)))},mn.prototype.slice=function(y,w){y=on(y);var M=this;return M.__filtered__&&(y>0||w<0)?new mn(M):(y<0?M=M.takeRight(-y):y&&(M=M.drop(y)),w!==n&&(w=on(w),M=w<0?M.dropRight(-w):M.take(w-y)),M)},mn.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},mn.prototype.toArray=function(){return this.take(ce)},Ca(mn.prototype,function(y,w){var M=/^(?:filter|find|map|reject)|While$/.test(w),U=/^(?:head|last)$/.test(w),re=fe[U?"take"+(w=="last"?"Right":""):w],be=U||/^find/.test(w);re&&(fe.prototype[w]=function(){var Ae=this.__wrapped__,$e=U?[1]:arguments,Ke=Ae instanceof mn,ht=$e[0],pt=Ke||tn(Ae),gt=function(kn){var Fn=re.apply(fe,io([kn],$e));return U&&At?Fn[0]:Fn};pt&&M&&typeof ht=="function"&&ht.length!=1&&(Ke=pt=!1);var At=this.__chain__,Rt=!!this.__actions__.length,Qt=be&&!At,yn=Ke&&!Rt;if(!be&&pt){Ae=yn?Ae:new mn(this);var Xt=y.apply(Ae,$e);return Xt.__actions__.push({func:ka,args:[gt],thisArg:n}),new Qa(Xt,At)}return Qt&&yn?y.apply(this,$e):(Xt=this.thru(gt),Qt?U?Xt.value()[0]:Xt.value():Xt)})}),$i(["pop","push","shift","sort","splice","unshift"],function(y){var w=ap[y],M=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",U=/^(?:pop|shift)$/.test(y);fe.prototype[y]=function(){var re=arguments;if(U&&!this.__chain__){var be=this.value();return w.apply(tn(be)?be:[],re)}return this[M](function(Ae){return w.apply(tn(Ae)?Ae:[],re)})}}),Ca(mn.prototype,function(y,w){var M=fe[w];if(M){var U=M.name+"";Gn.call(Vi,U)||(Vi[U]=[]),Vi[U].push({name:w,func:M})}}),Vi[$r(n,_).name]=[{name:"wrapper",func:n}],mn.prototype.clone=qd,mn.prototype.reverse=lp,mn.prototype.value=Ql,fe.prototype.at=g1,fe.prototype.chain=Ni,fe.prototype.commit=y1,fe.prototype.next=x1,fe.prototype.plant=dl,fe.prototype.reverse=Up,fe.prototype.toJSON=fe.prototype.valueOf=fe.prototype.value=mx,fe.prototype.first=fe.prototype.head,Gl&&(fe.prototype[Gl]=l_),fe},Ko=iu();Ho?((Ho.exports=Ko)._=Ko,Zc._=Ko):Hr._=Ko}).call(Mme)}(dv,dv.exports)),dv.exports}var h9=Ime();class Rme{constructor(e){yr(this,"sampleRate",24e3);yr(this,"bufferSize",7680);yr(this,"audioQueue",[]);yr(this,"isPlaying",!1);yr(this,"isStreamComplete",!1);yr(this,"checkInterval",null);yr(this,"scheduledTime",0);yr(this,"initialBufferTime",.1);yr(this,"gainNode");yr(this,"source");yr(this,"endOfQueueAudioSource",null);yr(this,"onComplete",()=>{});this.context=e,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(e,n,a){let i=Cj.get(this.context);if(i&&i[e])return i[e].handlers.push(a),Promise.resolve(this);i||(Cj.set(this.context,{}),i=Cj.get(this.context)),i[e]={handlers:[a]};const s=KE(e,n);await this.context.audioWorklet.addModule(s);const o=new AudioWorkletNode(this.context,e);return i[e].node=o,this}_processPCM16Chunk(e){const n=new Float32Array(e.length/2),a=new DataView(e.buffer);for(let i=0;i<e.length/2;i++)try{const s=a.getInt16(i*2,!0);n[i]=s/32768}catch(s){console.error(s)}return n}addPCM16(e){this.isStreamComplete=!1;let n=this._processPCM16Chunk(e);for(;n.length>=this.bufferSize;){const a=n.slice(0,this.bufferSize);this.audioQueue.push(a),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const n=this.context.createBuffer(1,e.length,this.sampleRate);return n.getChannelData(0).set(e),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),a=this.createAudioBuffer(n),i=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=i,i.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===i&&(this.endOfQueueAudioSource=null,this.onComplete())}),i.buffer=a,i.connect(this.gainNode);const s=Cj.get(this.context);s&&Object.entries(s).forEach(([,l])=>{const{node:c,handlers:d}=l;c&&(i.connect(c),c.port.onmessage=function(f){d.forEach(p=>{p.call(c.port,f)})},c.connect(this.context.destination))});const o=Math.max(this.scheduledTime,this.context.currentTime);i.start(o),this.scheduledTime=o+a.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function Lme(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"screen",start:async()=>{const l=await navigator.mediaDevices.getDisplayMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}function Fme(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"webcam",start:async()=>{const l=await navigator.mediaDevices.getUserMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}class $me extends u9{constructor(n){super();yr(this,"client");yr(this,"_status","disconnected");yr(this,"_session",null);yr(this,"_model",null);yr(this,"config",null);this.client=new yU(n),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(n,a){const i={date:new Date,type:n,message:a};this.emit("log",i)}async connect(n,a){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=a,this._model=n;const i={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:n,config:a,callbacks:i})}catch(s){return console.error("Error connecting to GenAI Live:",s),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var n;return this.session?((n=this.session)==null||n.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(n){this.log("server.error",n.message),this.emit("error",n)}onclose(n){this.log("server.close",`disconnected ${n.reason?`with reason: ${n.reason}`:""}`),this.emit("close",n)}async onmessage(n){var a;if(n.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(n.toolCall){this.log("server.toolCall",n),this.emit("toolcall",n.toolCall);return}if(n.toolCallCancellation){this.log("server.toolCallCancellation",n),this.emit("toolcallcancellation",n.toolCallCancellation);return}if(n.serverContent){const{serverContent:i}=n;if("interrupted"in i){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in i&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in i){let s=((a=i.modelTurn)==null?void 0:a.parts)||[];const o=s.filter(f=>{var p;return f.inlineData&&((p=f.inlineData.mimeType)==null?void 0:p.startsWith("audio/pcm"))}),l=o.map(f=>{var p;return(p=f.inlineData)==null?void 0:p.data}),c=h9.difference(s,o);if(l.forEach(f=>{if(f){const p=Tme(f);this.emit("audio",p),this.log("server.audio",`buffer (${p.byteLength})`)}}),!c.length)return;s=c;const d={modelTurn:{parts:s}};this.emit("content",d),this.log("server.content",n)}}else console.log("received unmatched message",n)}sendRealtimeInput(n){var o;let a=!1,i=!1;for(const l of n)if((o=this.session)==null||o.sendRealtimeInput({media:l}),l.mimeType.includes("audio")&&(a=!0),l.mimeType.includes("image")&&(i=!0),a&&i)break;const s=a&&i?"audio + video":a?"audio":i?"video":"unknown";this.log("client.realtimeInput",s)}sendToolResponse(n){var a;n.functionResponses&&n.functionResponses.length&&((a=this.session)==null||a.sendToolResponse({functionResponses:n.functionResponses}),this.log("client.toolResponse",n))}send(n,a=!0){var i;(i=this.session)==null||i.sendClientContent({turns:n,turnComplete:a}),this.log("client.send",{turns:Array.isArray(n)?n:[n],turnComplete:a})}}function Bme(t){const e=v.useMemo(()=>new $me(t),[t]),n=v.useRef(null),[a,i]=v.useState("models/gemini-2.5-flash-live-preview"),[s,o]=v.useState({}),[l,c]=v.useState(!1),[d,f]=v.useState(0),[p,g]=v.useState(null);v.useEffect(()=>{n.current||l9({id:"audio-out"}).then(j=>{n.current=new Rme(j),n.current.addWorklet("vumeter-out",c9,S=>{f(S.data.volume)}).then(()=>{})})},[n]),v.useEffect(()=>{const j=()=>{c(!0)},S=()=>{c(!1)},_=k=>{console.error("error",k)},T=()=>{var k;return(k=n.current)==null?void 0:k.stop()},C=k=>{var O;return(O=n.current)==null?void 0:O.addPCM16(new Uint8Array(k))},P=k=>{if(console.log("Received content event:",k),k.modelTurn&&k.modelTurn.parts){const O=k.modelTurn.parts.filter(I=>"text"in I&&I.text);if(O.length>0){const I=O.map(F=>F.text).join(" ");g(I),console.log("AI Summary received:",I)}}};return e.on("error",_).on("open",j).on("close",S).on("interrupted",T).on("audio",C).on("content",P),()=>{e.off("error",_).off("open",j).off("close",S).off("interrupted",T).off("audio",C).off("content",P).disconnect()}},[e]);const x=v.useCallback(async()=>{if(!s)throw new Error("config has not been set");e.disconnect(),await e.connect(a,s)},[e,s,a]),b=v.useCallback(async()=>{e.disconnect(),c(!1)},[c,e]);return{client:e,config:s,setConfig:o,model:a,setModel:i,connected:l,connect:x,disconnect:b,volume:d,aiSummary:p}}const f9=v.createContext(void 0),ZN=({options:t,children:e})=>{const n=Bme(t);return r.jsx(f9.Provider,{value:n,children:e})},gd=()=>{const t=v.useContext(f9);if(!t)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return t};function zme(){const{config:t,setConfig:e}=gd(),[n,a]=v.useState({value:"audio",label:"audio"}),i=v.useCallback(s=>{e({...t,responseModalities:[s==="audio"?cd.AUDIO:cd.TEXT]})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(o9,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:n,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:s=>{a(s),s&&(s.value==="audio"||s.value==="text")&&i(s.value)}})]})}const n3=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function qme(){const{config:t,setConfig:e}=gd();v.useEffect(()=>{var l,c,d;const s=((d=(c=(l=t.speechConfig)==null?void 0:l.voiceConfig)==null?void 0:c.prebuiltVoiceConfig)==null?void 0:d.voiceName)||"Atari02";a({value:s,label:s})},[t]);const[n,a]=v.useState(n3[5]),i=v.useCallback(s=>{e({...t,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(o9,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:n,defaultValue:n,options:n3,onChange:s=>{a(s),s&&i(s.value)}})]})}function Ume(){const[t,e]=v.useState(!1),{config:n,setConfig:a,connected:i}=gd(),s=v.useMemo(()=>Array.isArray(n.tools)?n.tools.filter(d=>Array.isArray(d.functionDeclarations)).map(d=>d.functionDeclarations).filter(d=>!!d).flat():[],[n]),o=v.useMemo(()=>{var d;return n.systemInstruction?typeof n.systemInstruction=="string"?n.systemInstruction:Array.isArray(n.systemInstruction)?n.systemInstruction.map(f=>typeof f=="string"?f:f.text).join(`
`):typeof n.systemInstruction=="object"&&"parts"in n.systemInstruction&&((d=n.systemInstruction.parts)==null?void 0:d.map(f=>f.text).join(`
`))||"":""},[n]),l=v.useCallback(d=>{const f={...n,systemInstruction:d.target.value};a(f)},[n,a]),c=v.useCallback((d,f)=>{var g;const p={...n,tools:((g=n.tools)==null?void 0:g.map(x=>{const b=x;return Array.isArray(b.functionDeclarations)?{...x,functionDeclarations:b.functionDeclarations.map(j=>j.name===d?{...j,description:f}:j)}:x}))||[]};a(p)},[n,a]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>e(!t),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:t?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${i?"disabled":""}`,children:[i&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(zme,{}),r.jsx(qme,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:l,value:o}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:s.map((d,f)=>{var p;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:d.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((p=d.parameters)==null?void 0:p.properties)||{}).map((g,x)=>r.jsx("span",{children:g},x))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:d.description,onBlur:g=>c(d.name,g.target.value)},`fd-${d.description}`)]},`function-${f}`)})})})]})})]})}const r3=v.memo(({isStreaming:t,onIcon:e,offIcon:n,start:a,stop:i})=>t?r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:e})}):r.jsx("button",{className:"action-button",onClick:a,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}));function Vme({videoRef:t,children:e,onVideoStreamChange:n=()=>{},supportsVideo:a,enableEditingSettings:i}){const s=[Fme(),Lme()],[o,l]=v.useState(null),[c,d]=s,[f,p]=v.useState(0),[g]=v.useState(()=>new d9),[x,b]=v.useState(!1),j=v.useRef(null),S=v.useRef(null),{client:_,connected:T,connect:C,disconnect:P,volume:k}=gd();v.useEffect(()=>{!T&&S.current&&S.current.focus()},[T]),v.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(f*200,8))}px`)},[f]),v.useEffect(()=>{const I=F=>{_.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return T&&!x&&g?g.on("data",I).on("volume",p).start():g.stop(),()=>{g.off("data",I).off("volume",p)}},[T,_,x,g]),v.useEffect(()=>{t.current&&(t.current.srcObject=o);let I=-1;function F(){const B=t.current,$=j.current;if(!B||!$)return;const L=$.getContext("2d");if($.width=B.videoWidth*.25,$.height=B.videoHeight*.25,$.width+$.height>0){L.drawImage(B,0,0,$.width,$.height);const V=$.toDataURL("image/jpeg",1),H=V.slice(V.indexOf(",")+1,1/0);_.sendRealtimeInput([{mimeType:"image/jpeg",data:H}])}T&&(I=window.setTimeout(F,1e3/.5))}return T&&o!==null&&requestAnimationFrame(F),()=>{clearTimeout(I)}},[T,o,_,t]);const O=I=>async()=>{if(I){const F=await I.start();l(F),n(F)}else l(null),n(null);s.filter(F=>F!==I).forEach(F=>F.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:j}),r.jsxs("nav",{className:rd("actions-nav",{disabled:!T}),children:[r.jsx("button",{className:rd("action-button mic-button",{recording:!x&&T}),onClick:()=>b(!x),children:x?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx(Dme,{volume:k,active:T,hover:!1})}),a&&r.jsxs(r.Fragment,{children:[r.jsx(r3,{isStreaming:d.isStreaming,start:O(d),stop:O(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(r3,{isStreaming:c.isStreaming,start:O(c),stop:O(),onIcon:"videocam_off",offIcon:"videocam"})]}),e]}),r.jsxs("div",{className:rd("connection-container",{connected:T}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:S,className:rd("action-button connect-toggle",{connected:T}),onClick:T?P:C,children:r.jsx("span",{className:"material-symbols-outlined filled",children:T?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),i?r.jsx(Ume,{}):""]})}const a3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:rg.OBJECT,properties:{summary:{type:rg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},Hme=({patientData:t,tokenNumber:e})=>{const[n,a]=v.useState(""),{client:i,setConfig:s,setModel:o}=gd();return v.useEffect(()=>{o("models/gemini-2.5-flash-live-preview"),s({responseModalities:[cd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[a3]}]})},[s,o]),v.useEffect(()=>{const l=c=>{if(!c.functionCalls)return;const d=c.functionCalls.find(f=>f.name===a3.name);if(d){const f=d.args.summary;a(f)}c.functionCalls.length&&setTimeout(()=>{var f;return i.sendToolResponse({functionResponses:(f=c.functionCalls)==null?void 0:f.map(p=>({response:{output:{success:!0}},id:p.id,name:p.name}))})},200)};return i.on("toolcall",l),()=>{i.off("toolcall",l)}},[i]),v.useEffect(()=>{if(n){const l=encodeURIComponent(n);e?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${e}&caseDetails=${l}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${l}`}},[n,e]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),e&&r.jsxs("h2",{children:["Token Number: ",e]}),t&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(t,null,2)})]}),n&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:n})]})]})},i3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function Gme(){if(!xU())return console.warn("No auth token found, using default Live API key."),i3;try{const e=await le("/api/clinics/gemini-api-key");if(e.ok){const a=(await e.json()).geminiApiKey;if(a)return a}}catch(e){console.error("Failed to fetch clinic-specific Live API key:",e)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),i3}function Wme(){const t=v.useRef(null),[e,n]=v.useState(null),[a,i]=v.useState(null);return v.useEffect(()=>{(async()=>{try{const o=await Gme();i({apiKey:o})}catch(o){console.error("Error setting Live API options:",o)}})()},[]),a?r.jsx("div",{className:"App",children:r.jsx(ZN,{options:a,children:r.jsx(Yme,{videoRef:t,setVideoStream:n,videoStream:e})})}):r.jsx("div",{children:"Loading Live API settings..."})}const Yme=({videoRef:t,setVideoStream:e,videoStream:n})=>{const[a,i]=v.useState(null),[s,o]=v.useState(null),{connected:l,client:c,connect:d,config:f,model:p}=gd(),[g,x]=v.useState(""),b=v.useRef(null),[j,S]=v.useState(!1);v.useEffect(()=>{const T=window.matchMedia("(prefers-color-scheme: dark)"),C=P=>{document.documentElement.setAttribute("data-theme",P.matches?"dark":"light")};return C(T),T.addEventListener("change",C),()=>T.removeEventListener("change",C)},[]),v.useEffect(()=>{const T=new URLSearchParams(window.location.search),C={};for(const[P,k]of T.entries())P==="token_number"?o(k):C[P]=k;i(C)},[]),v.useEffect(()=>{Object.keys(f).length>0&&p&&d()},[d,f,p]),v.useEffect(()=>{if(l&&a&&!j){const T=JSON.stringify(a,null,2);c.send([{text:T}]),x(""),S(!0)}},[l,a,c,j]),v.useEffect(()=>{a&&x(JSON.stringify(a,null,2))},[a]);const _=()=>{c.send([{text:g}]),x(""),b.current&&(b.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx(Hme,{patientData:a,tokenNumber:s}),r.jsx("video",{className:rd("stream",{hidden:!t.current||!n}),ref:t,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:rd("input-container",{disabled:!l}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:b,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),T.stopPropagation(),_())},onChange:T=>x(T.target.value),value:g}),r.jsx("span",{className:rd("input-content-placeholder",{hidden:g.length}),children:"Typesomething..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:_,children:"send"})]})}),r.jsx(Vme,{videoRef:t,supportsVideo:!0,onVideoStreamChange:e,enableEditingSettings:!0})]})})},s3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Kme=({volume:t,active:e})=>{const n=Array.from({length:5},(a,i)=>r.jsx("div",{className:`audio-bar ${e?"active":""}`,style:{height:e?`${Math.min(24,20+t*40*(1+Math.sin(i)*.3))}px`:"8px",animationDelay:`${i*.1}s`}},i));return r.jsx("div",{className:"audio-pulse",children:n})},Qme=v.forwardRef(({videoRef:t,supportsVideo:e,onVideoStreamChange:n,textInput:a,onSubmitTextInput:i},s)=>{var O;const{connected:o,connect:l,disconnect:c,client:d,volume:f}=gd(),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_]=v.useState(()=>new d9),T=async()=>{o?await c():(await l(),a.trim()&&i())};v.useEffect(()=>{const I=F=>{d.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return o&&!p?_.on("data",I).start():_.stop(),()=>{_.off("data",I),_.stop()}},[o,d,p,_]);const C=v.useCallback(async()=>{if(x)k==null||k.getTracks().forEach(I=>I.stop()),n(null),b(!1);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),b(!0)}catch(I){console.error("Error accessing webcam:",I),b(!1)}},[x,n,t]),P=v.useCallback(async()=>{if(j)k==null||k.getTracks().forEach(I=>I.stop()),n(null),S(!1);else try{const I=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),S(!0)}catch(I){console.error("Error accessing screen share:",I),S(!1)}},[j,n,t]),k=(O=t.current)==null?void 0:O.srcObject;return v.useEffect(()=>()=>{k&&k.getTracks().forEach(I=>I.stop())},[k]),v.useImperativeHandle(s,()=>({handleConnect:T})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>g(!p),disabled:!o,className:`live-api-control-button ${o&&!p?"mic-active":"mic-inactive"}`,"aria-label":p?"Unmute microphone":"Mute microphone",children:p?r.jsx(KX,{className:"w-5 h-5"}):r.jsx(RN,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-audio-pulse-container",children:r.jsx(Kme,{volume:f,active:o})}),e&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:P,disabled:!o,className:`live-api-control-button ${j?"video-active":"video-inactive"}`,"aria-label":j?"Stop screen share":"Start screen share",children:r.jsx(eJ,{className:"w-5 h-5"})}),r.jsx("button",{onClick:C,disabled:!o,className:`live-api-control-button ${x?"video-active":"video-inactive"}`,"aria-label":x?"Turn off webcam":"Turn on webcam",children:r.jsx(sZ,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${o?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:o?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:T,className:`live-api-connect-button ${o?"connected":"disconnected"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(uJ,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Gz,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),Xme=({tokenNumber:t,aiSummary:e,clinicName:n})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:n.charAt(0)})}),r.jsxs("h1",{className:"hospital-reception-title",children:[n," AI"]}),r.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",n," Reception Assistant"]})]}),t&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:t})]}),e&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:e})]})]}),o3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:rg.OBJECT,properties:{summary:{type:rg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},Jme=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:i,voiceAiLanguage:s,lastMotionTimestamp:o,backgroundMode:l})=>{const c=v.useRef(null),d=v.useRef(null),[f,p]=v.useState(null),[g,x]=v.useState("hi"),{client:b,connected:j,setConfig:S,setModel:_,disconnect:T,connect:C}=gd(),P=v.useRef(!1),k=v.useRef(Date.now()),O=v.useRef(!1);v.useEffect(()=>{P.current=j,j&&(k.current=Date.now(),O.current=!1)},[j]),v.useEffect(()=>{if(o){if(k.current=Date.now(),P.current)return;j||C()}},[o,C,j]),v.useEffect(()=>{if(!o||!j)return;const H=setInterval(()=>{const X=Date.now()-k.current;X>25e3&&X<3e4&&!O.current&&(O.current=!0,b.send([{text:"I'll be here if you need more help!"}])),X>3e4&&(console.log("No motion for 30s. Disconnecting session."),T(),t())},1e3);return()=>clearInterval(H)},[o,j,b,T,t]);const I=v.useMemo(()=>{let H=`Your job is to:

If patient details like name, age, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (Name, Age) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's Name and Age only. Do not ask for their phone number.

    You should guess the patient's sex based on their voice or appearance.

For every visit, collect the patient's history by asking questions.

CRITICAL WORKFLOW - DO NOT USE THE 'case_summary' TOOL YET.

Phase 1: History Collection (MANDATORY LOOP)
Once you have the basics, you MUST ask the patient about their complaints.
- Ask clarifying questions to understand the onset, duration, severity, and associated symptoms.
- DO NOT just accept a one-line complaint.
- Loop your questions until you are confident you have a complete medical history.

Phase 2: Billing Check Protocol
ONLY after you are confident you have the complete history, proceed to the Billing Check Protocol immediately:
1. Ask: 'Would you like to get the tests done?'
   - IF PATIENT SAYS YES: STOP questioning. Do NOT mention medications (they will get them after reports).
     Result -> Lab: Yes, Pharmacy: No.
   - IF PATIENT SAYS NO: Ask: 'Would you like to get the medications?'
     - IF YES: Result -> Lab: No, Pharmacy: Yes.
     - IF NO: Result -> Lab: No, Pharmacy: No.

Phase 3: Final Summary
Only AFTER establishing the billing preferences as per the logic above, you should use the 'case_summary' tool EXACTLY ONCE at the end.

The 'case_summary' MUST be comprehensive and include:
- Patient Name, Age, Sex
- Medical History & Complaints
- Billing Preferences (e.g., 'Billing Preference: Lab - Yes, Pharmacy - No')

Do not call the tool multiple times. Wait until you have ALL the info, then generate the single final summary and ask them to wait in reception.`;e&&(H+=`

Patient Data: ${JSON.stringify(e,null,2)}`);const X={"en-US":"English","hi-IN":"Hindi","te-IN":"Telugu","bn-IN":"Bengali","mr-IN":"Marathi","ta-IN":"Tamil","gu-IN":"Gujarati","kn-IN":"Kannada","ml-IN":"Malayalam","pa-IN":"Punjabi","es-ES":"Spanish","fr-FR":"French","de-DE":"German","it-IT":"Italian","pt-PT":"Portuguese","ru-RU":"Russian","ja-JP":"Japanese","ko-KR":"Korean","zh-CN":"Chinese","ar-SA":"Arabic"}[s]||"English";return H+=` You should always speak in ${X}.`,s==="te-IN"&&(H+=" Dont write the telugu words in english."),{responseModalities:[cd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:H}]},tools:[{functionDeclarations:[o3]}]}},[e,s]);v.useEffect(()=>{if(_("models/gemini-2.5-flash-native-audio-preview-12-2025"),S(I),!o){const H=setTimeout(()=>{d.current&&!j&&d.current.handleConnect()},2e3);return()=>clearTimeout(H)}},[S,_,I,j,o]),v.useEffect(()=>()=>{j&&T()},[j,T]);const[F,B]=v.useState(null);v.useEffect(()=>{const H=te=>{if(!te.functionCalls)return;const X=te.functionCalls.find(q=>q.name===o3.name);if(X){const q=X.args.summary;B(q),a(q)}te.functionCalls.length&&setTimeout(()=>{var q;return b.sendToolResponse({functionResponses:(q=te.functionCalls)==null?void 0:q.map(Y=>({response:{output:{success:!0}},id:Y.id,name:Y.name}))})},200)};return b.on("toolcall",H),()=>{b.off("toolcall",H)}},[b,a]);const $=()=>{g.trim()&&(b.send([{text:g}]),x(""))},L=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),$())},V=async()=>{B(null),a(null),x("hi"),j?(T(),setTimeout(()=>{C()},500)):C()};return r.jsx("div",{className:"live-api-modal-overlay",style:l?{opacity:0,pointerEvents:"none",position:"absolute",zIndex:-1}:{},children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:i.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:i}),r.jsxs("p",{className:"live-api-modal-subtitle",children:[i," Hospital Assistant"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:V,className:"live-api-modal-close-button",title:"Refresh Session","aria-label":"Refresh session",children:r.jsx(Wz,{className:"w-6 h-6"})}),r.jsx("button",{onClick:t,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx(Lt,{className:"w-6 h-6"})})]})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(Xme,{patientData:e,tokenNumber:n,aiSummary:F,clinicName:i}),f&&r.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:g,onChange:H=>x(H.target.value),onKeyDown:L,placeholder:"Type your message here...",disabled:!j,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:$,disabled:!j||!g.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx(LN,{className:"w-5 h-5"})})]})}),r.jsx(Qme,{ref:d,videoRef:c,supportsVideo:!0,onVideoStreamChange:p,textInput:g,onSubmitTextInput:$})]})})]})})},eS=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,lastMotionTimestamp:i,backgroundMode:s})=>{const[o,l]=v.useState(null),[c,d]=v.useState("Newtons Ai"),[f,p]=v.useState("en-US"),[g,x]=v.useState(!0);if(v.useEffect(()=>{(async()=>{try{let S=null,_="Newtons Ai",T="en-US";try{const C=await le("/api/clinics/settings");if(C.ok){const P=await C.json();P.name&&P.name!==""&&(_=P.name),P.gemini_api_key&&P.gemini_api_key.trim()!==""&&(S=P.gemini_api_key.trim()),P.voice_ai_language&&(T=P.voice_ai_language)}}catch(C){console.warn("Failed to fetch clinic settings",C)}if(d(_),p(T),S)l(S);else{try{const C=await le("/api/global-settings/app_gemini_api_key");if(C.ok){const P=await C.json();if(P.value&&P.value.trim()!==""){l(P.value.trim());return}}}catch(C){console.warn("Failed to fetch global key fallback",C)}l(s3)}}catch(S){console.error("Unexpected error in getSettings:",S),l(s3)}finally{x(!1)}})()},[]),g)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsx("div",{className:"live-api-modal-header",style:{borderBottom:"none"},children:r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsxs("div",{style:{marginLeft:"12px"},children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:180,height:14,style:{marginTop:"4px"}})]})]})}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx(Z,{variant:"circular",width:64,height:64,style:{margin:"0 auto"}}),r.jsx(Z,{width:200,height:32,style:{margin:"16px auto 8px"}}),r.jsx(Z,{width:250,height:16,style:{margin:"0 auto"}})]}),r.jsxs("div",{className:"hospital-reception-token-card",style:{background:"transparent",boxShadow:"none"},children:[r.jsx(Z,{width:140,height:20,style:{margin:"0 auto 8px"}}),r.jsx(Z,{width:100,height:48,style:{margin:"0 auto"}})]})]})}),r.jsx("div",{className:"live-api-control-tray",style:{position:"relative"},children:r.jsx("div",{className:"live-api-control-tray-inner",style:{justifyContent:"center"},children:r.jsx("div",{className:"live-api-loading-text",children:"Initializing AI Assistant..."})})})]})});if(!o)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Error: API Key not available."})})});const b={apiKey:o};return r.jsx(ZN,{options:b,children:r.jsx(Jme,{onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:c,voiceAiLanguage:f,lastMotionTimestamp:i,backgroundMode:s})})},tS=()=>{const[t,e]=v.useState(null),[n,a]=v.useState(!0),[i,s]=v.useState(null),o=v.useCallback(async()=>{a(!0),s(null);try{const c=await le("/api/clinics/settings");if(!c.ok)throw new Error("Failed to fetch clinic settings");const d=await c.json();e(d)}catch(c){s(c instanceof Error?c.message:"An error occurred")}finally{a(!1)}},[]);v.useEffect(()=>{o()},[o]);const l=(t==null?void 0:t.custom_columns_config)||{};return{settings:t,customColumnsConfig:l,loading:n,error:i,refetch:o}},Zme="_overlay_79cew_5",ege="_overlayMinimized_79cew_55",tge="_modal_79cew_65",nge="_minimized_79cew_97",rge="_contentWrapper_79cew_113",age="_exiting_79cew_161",ige="_header_79cew_183",sge="_inputWrapper_79cew_197",oge="_inputContainer_79cew_215",lge="_minimizedSearchIcon_79cew_273",cge="_input_79cew_197",uge="_controlsGroup_79cew_347",dge="_iconButton_79cew_373",hge="_sendButton_79cew_413",fge="_dragBar_79cew_459",pge="_dragBarTitle_79cew_489",mge="_dragBarControls_79cew_519",gge="_dragBarControlsRight_79cew_537",yge="_newChatBtn_79cew_553",xge="_windowControlBtn_79cew_589",vge="_content_79cew_113",bge="_overlayContent_79cew_687",jge="_section_79cew_711",wge="_sectionTitle_79cew_723",Nge="_recentList_79cew_743",Sge="_recentPill_79cew_767",_ge="_recentName_79cew_807",Cge="_recentToken_79cew_819",Tge="_recentInfo_79cew_837",kge="_examplesGrid_79cew_849",Age="_exampleCard_79cew_861",Ege="_exampleIcon_79cew_897",Pge="_exampleText_79cew_905",Oge="_chatSectionFill_79cew_919",Dge="_chatMessagesFill_79cew_935",Mge="_chatBubble_79cew_955",Ige="_chatBubbleUser_79cew_975",Rge="_chatBubbleModel_79cew_991",Lge="_chatBubbleSystem_79cew_1009",Fge="_processing_79cew_1025",$ge="_spinner_79cew_1043",Bge="_resultItem_79cew_1065",zge="_resultName_79cew_1093",qge="_resultToken_79cew_1103",Uge="_resultDetails_79cew_1115",Vge="_noResults_79cew_1125",Ot={overlay:Zme,overlayMinimized:ege,modal:tge,minimized:nge,contentWrapper:rge,exiting:age,header:ige,inputWrapper:sge,inputContainer:oge,minimizedSearchIcon:lge,input:cge,controlsGroup:uge,iconButton:dge,sendButton:hge,dragBar:fge,dragBarTitle:pge,dragBarControls:mge,dragBarControlsRight:gge,newChatBtn:yge,windowControlBtn:xge,content:vge,overlayContent:bge,section:jge,sectionTitle:wge,recentList:Nge,recentPill:Sge,recentName:_ge,recentToken:Cge,recentInfo:Tge,examplesGrid:kge,exampleCard:Age,exampleIcon:Ege,exampleText:Pge,chatSectionFill:Oge,chatMessagesFill:Dge,chatBubble:Mge,chatBubbleUser:Ige,chatBubbleModel:Rge,chatBubbleSystem:Lge,processing:Fge,spinner:$ge,resultItem:Bge,resultName:zge,resultToken:qge,resultDetails:Uge,noResults:Vge},Ib=({columns:t,data:e,onSave:n,onRowAdd:a,onRowDelete:i,onRowClick:s,onRowHover:o,editable:l=!0,showRowNumbers:c=!0,title:d})=>{const[f,p]=v.useState(e),[g,x]=v.useState(null),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(null),[P,k]=v.useState(!1),[O,I]=v.useState(new Set);Ce.useEffect(()=>{p(e),k(!1)},[e]);const F=v.useMemo(()=>{let q=[...f];if(S.trim()){const Y=S.toLowerCase();q=q.filter(se=>Object.values(se).some(G=>G!=null&&String(G).toLowerCase().includes(Y)))}return T&&q.sort((Y,se)=>{const G=Y[T.key],z=se[T.key];return G==null?1:z==null?-1:G<z?T.direction==="asc"?-1:1:G>z?T.direction==="asc"?1:-1:0}),q},[f,S,T]),B=(q,Y)=>{var G;if(!l)return;const se=t.find(z=>z.key===Y);(se==null?void 0:se.editable)!==!1&&(x({row:q,col:Y}),j(String(((G=f[q])==null?void 0:G[Y])??"")))},$=()=>{var q;if(g){const Y=[...f],se=t.find(z=>z.key===g.col);let G=b;(se==null?void 0:se.type)==="number"&&(G=parseFloat(G)||0),(se==null?void 0:se.type)==="boolean"&&(G=G.toLowerCase()==="true"||G==="1"),((q=Y[g.row])==null?void 0:q[g.col])!==G&&(Y[g.row]={...Y[g.row],[g.col]:G},p(Y),k(!0))}x(null)},L=q=>{if(q.key==="Enter")$();else if(q.key==="Escape")x(null);else if(q.key==="Tab"&&(q.preventDefault(),$(),g)){const Y=t.findIndex(G=>G.key===g.col),se=t[Y+1];se?setTimeout(()=>B(g.row,se.key),0):g.row<f.length-1&&setTimeout(()=>B(g.row+1,t[0].key),0)}},V=q=>{C(Y=>(Y==null?void 0:Y.key)===q?Y.direction==="asc"?{key:q,direction:"desc"}:null:{key:q,direction:"asc"})},H=()=>{n&&(n(f),k(!1))},te=()=>{const q=t.map(we=>we.label).join(","),Y=f.map(we=>t.map(K=>{const Ie=we[K.key];return typeof Ie=="string"&&Ie.includes(",")?`"${Ie}"`:Ie}).join(",")),se=[q,...Y].join(`
`),G=new Blob([se],{type:"text/csv"}),z=URL.createObjectURL(G),ce=document.createElement("a");ce.href=z,ce.download=`${d||"data"}.csv`,ce.click()},X=q=>{const Y=new Set(O);Y.has(q)?Y.delete(q):Y.add(q),I(Y)};return r.jsxs("div",{className:"excel-grid",children:[r.jsxs("div",{className:"excel-toolbar",children:[r.jsxs("div",{className:"excel-search",children:[r.jsx("input",{type:"text",placeholder:" Search...",value:S,onChange:q=>_(q.target.value)}),S&&r.jsx("button",{className:"clear-search",onClick:()=>_(""),children:r.jsx(Lt,{size:14})})]}),r.jsxs("div",{className:"excel-actions",children:[a&&r.jsxs("button",{onClick:a,className:"excel-btn",title:"Add Row",children:[r.jsx(qn,{size:16})," Add"]}),r.jsxs("button",{onClick:te,className:"excel-btn",title:"Export CSV",children:[r.jsx(Bz,{size:16})," Export"]}),l&&n&&r.jsxs("button",{onClick:H,className:`excel-btn save-btn ${P?"has-changes":""}`,disabled:!P,title:"Save Changes",children:[r.jsx(as,{size:16})," Save"]})]})]}),r.jsxs("div",{className:"excel-status",children:[S&&r.jsxs("span",{children:["Showing ",F.length," of ",f.length]}),P&&r.jsx("span",{className:"unsaved-indicator",children:" Unsaved changes"})]}),r.jsx("div",{className:"excel-table-wrapper",children:r.jsxs("table",{className:"excel-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[c&&r.jsx("th",{className:"row-num-header",children:"#"}),t.map(q=>r.jsx("th",{onClick:()=>V(q.key),style:{width:q.width,cursor:"pointer"},children:r.jsxs("div",{className:"th-content",children:[q.label,(T==null?void 0:T.key)===q.key&&(T.direction==="asc"?r.jsx(WQ,{size:14}):r.jsx($z,{size:14}))]})},q.key)),i&&r.jsx("th",{className:"action-col",children:""})]})}),r.jsx("tbody",{children:F.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:t.length+(c?1:0)+(i?1:0),className:"no-data",children:"No data found"})}):F.map((q,Y)=>r.jsxs("tr",{className:`${O.has(Y)?"selected":""} ${s?"clickable-row":""}`,onClick:()=>s&&s(q,Y),onMouseEnter:()=>o&&o(q,Y),style:s?{cursor:"pointer"}:void 0,children:[c&&r.jsx("td",{className:"row-num",onClick:()=>X(Y),children:Y+1}),t.map(se=>r.jsx("td",{onClick:()=>B(Y,se.key),className:`
                                                ${(g==null?void 0:g.row)===Y&&(g==null?void 0:g.col)===se.key?"editing":""}
                                                ${se.editable===!1?"read-only":""}
                                            `,children:(g==null?void 0:g.row)===Y&&(g==null?void 0:g.col)===se.key?r.jsx("input",{type:se.type==="number"?"number":"text",value:b,onChange:G=>j(G.target.value),onBlur:$,onKeyDown:L,autoFocus:!0}):r.jsx("span",{children:q[se.key]??""})},se.key)),i&&r.jsx("td",{className:"action-col",children:r.jsx("button",{className:"delete-row",onClick:()=>i(Y),children:r.jsx(Lt,{size:14})})})]},q.id||Y))})]})}),r.jsxs("div",{className:"excel-footer",children:[r.jsxs("span",{children:[f.length," rows"]}),O.size>0&&r.jsxs("span",{children:[O.size," selected"]})]})]})};function p9(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=p9(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function un(){for(var t,e,n=0,a="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=p9(t))&&(a&&(a+=" "),a+=e);return a}var OC,l3;function ls(){if(l3)return OC;l3=1;var t=Array.isArray;return OC=t,OC}var DC,c3;function m9(){if(c3)return DC;c3=1;var t=typeof Qs=="object"&&Qs&&Qs.Object===Object&&Qs;return DC=t,DC}var MC,u3;function Rl(){if(u3)return MC;u3=1;var t=m9(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return MC=n,MC}var IC,d3;function Rb(){if(d3)return IC;d3=1;var t=Rl(),e=t.Symbol;return IC=e,IC}var RC,h3;function Hge(){if(h3)return RC;h3=1;var t=Rb(),e=Object.prototype,n=e.hasOwnProperty,a=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),c=o[i];try{o[i]=void 0;var d=!0}catch{}var f=a.call(o);return d&&(l?o[i]=c:delete o[i]),f}return RC=s,RC}var LC,f3;function Gge(){if(f3)return LC;f3=1;var t=Object.prototype,e=t.toString;function n(a){return e.call(a)}return LC=n,LC}var FC,p3;function Vc(){if(p3)return FC;p3=1;var t=Rb(),e=Hge(),n=Gge(),a="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:a:s&&s in Object(l)?e(l):n(l)}return FC=o,FC}var $C,m3;function Hc(){if(m3)return $C;m3=1;function t(e){return e!=null&&typeof e=="object"}return $C=t,$C}var BC,g3;function $g(){if(g3)return BC;g3=1;var t=Vc(),e=Hc(),n="[object Symbol]";function a(i){return typeof i=="symbol"||e(i)&&t(i)==n}return BC=a,BC}var zC,y3;function jD(){if(y3)return zC;y3=1;var t=ls(),e=$g(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:a.test(s)||!n.test(s)||o!=null&&s in Object(o)}return zC=i,zC}var qC,x3;function yd(){if(x3)return qC;x3=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return qC=t,qC}var UC,v3;function wD(){if(v3)return UC;v3=1;var t=Vc(),e=yd(),n="[object AsyncFunction]",a="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==a||c==i||c==n||c==s}return UC=o,UC}var VC,b3;function Wge(){if(b3)return VC;b3=1;var t=Rl(),e=t["__core-js_shared__"];return VC=e,VC}var HC,j3;function Yge(){if(j3)return HC;j3=1;var t=Wge(),e=function(){var a=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function n(a){return!!e&&e in a}return HC=n,HC}var GC,w3;function g9(){if(w3)return GC;w3=1;var t=Function.prototype,e=t.toString;function n(a){if(a!=null){try{return e.call(a)}catch{}try{return a+""}catch{}}return""}return GC=n,GC}var WC,N3;function Kge(){if(N3)return WC;N3=1;var t=wD(),e=Yge(),n=yd(),a=g9(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,f=RegExp("^"+c.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||e(g))return!1;var x=t(g)?f:s;return x.test(a(g))}return WC=p,WC}var YC,S3;function Qge(){if(S3)return YC;S3=1;function t(e,n){return e==null?void 0:e[n]}return YC=t,YC}var KC,_3;function Of(){if(_3)return KC;_3=1;var t=Kge(),e=Qge();function n(a,i){var s=e(a,i);return t(s)?s:void 0}return KC=n,KC}var QC,C3;function nS(){if(C3)return QC;C3=1;var t=Of(),e=t(Object,"create");return QC=e,QC}var XC,T3;function Xge(){if(T3)return XC;T3=1;var t=nS();function e(){this.__data__=t?t(null):{},this.size=0}return XC=e,XC}var JC,k3;function Jge(){if(k3)return JC;k3=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return JC=t,JC}var ZC,A3;function Zge(){if(A3)return ZC;A3=1;var t=nS(),e="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return a.call(o,s)?o[s]:void 0}return ZC=i,ZC}var e2,E3;function eye(){if(E3)return e2;E3=1;var t=nS(),e=Object.prototype,n=e.hasOwnProperty;function a(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return e2=a,e2}var t2,P3;function tye(){if(P3)return t2;P3=1;var t=nS(),e="__lodash_hash_undefined__";function n(a,i){var s=this.__data__;return this.size+=this.has(a)?0:1,s[a]=t&&i===void 0?e:i,this}return t2=n,t2}var n2,O3;function nye(){if(O3)return n2;O3=1;var t=Xge(),e=Jge(),n=Zge(),a=eye(),i=tye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,n2=s,n2}var r2,D3;function rye(){if(D3)return r2;D3=1;function t(){this.__data__=[],this.size=0}return r2=t,r2}var a2,M3;function ND(){if(M3)return a2;M3=1;function t(e,n){return e===n||e!==e&&n!==n}return a2=t,a2}var i2,I3;function rS(){if(I3)return i2;I3=1;var t=ND();function e(n,a){for(var i=n.length;i--;)if(t(n[i][0],a))return i;return-1}return i2=e,i2}var s2,R3;function aye(){if(R3)return s2;R3=1;var t=rS(),e=Array.prototype,n=e.splice;function a(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return s2=a,s2}var o2,L3;function iye(){if(L3)return o2;L3=1;var t=rS();function e(n){var a=this.__data__,i=t(a,n);return i<0?void 0:a[i][1]}return o2=e,o2}var l2,F3;function sye(){if(F3)return l2;F3=1;var t=rS();function e(n){return t(this.__data__,n)>-1}return l2=e,l2}var c2,$3;function oye(){if($3)return c2;$3=1;var t=rS();function e(n,a){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,a])):i[s][1]=a,this}return c2=e,c2}var u2,B3;function aS(){if(B3)return u2;B3=1;var t=rye(),e=aye(),n=iye(),a=sye(),i=oye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,u2=s,u2}var d2,z3;function SD(){if(z3)return d2;z3=1;var t=Of(),e=Rl(),n=t(e,"Map");return d2=n,d2}var h2,q3;function lye(){if(q3)return h2;q3=1;var t=nye(),e=aS(),n=SD();function a(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return h2=a,h2}var f2,U3;function cye(){if(U3)return f2;U3=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return f2=t,f2}var p2,V3;function iS(){if(V3)return p2;V3=1;var t=cye();function e(n,a){var i=n.__data__;return t(a)?i[typeof a=="string"?"string":"hash"]:i.map}return p2=e,p2}var m2,H3;function uye(){if(H3)return m2;H3=1;var t=iS();function e(n){var a=t(this,n).delete(n);return this.size-=a?1:0,a}return m2=e,m2}var g2,G3;function dye(){if(G3)return g2;G3=1;var t=iS();function e(n){return t(this,n).get(n)}return g2=e,g2}var y2,W3;function hye(){if(W3)return y2;W3=1;var t=iS();function e(n){return t(this,n).has(n)}return y2=e,y2}var x2,Y3;function fye(){if(Y3)return x2;Y3=1;var t=iS();function e(n,a){var i=t(this,n),s=i.size;return i.set(n,a),this.size+=i.size==s?0:1,this}return x2=e,x2}var v2,K3;function _D(){if(K3)return v2;K3=1;var t=lye(),e=uye(),n=dye(),a=hye(),i=fye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,v2=s,v2}var b2,Q3;function y9(){if(Q3)return b2;Q3=1;var t=_D(),e="Expected a function";function n(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var d=a.apply(this,o);return s.cache=c.set(l,d)||c,d};return s.cache=new(n.Cache||t),s}return n.Cache=t,b2=n,b2}var j2,X3;function pye(){if(X3)return j2;X3=1;var t=y9(),e=500;function n(a){var i=t(a,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return j2=n,j2}var w2,J3;function mye(){if(J3)return w2;J3=1;var t=pye(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,d){s.push(c?d.replace(n,"$1"):l||o)}),s});return w2=a,w2}var N2,Z3;function CD(){if(Z3)return N2;Z3=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=Array(i);++a<i;)s[a]=n(e[a],a,e);return s}return N2=t,N2}var S2,e6;function gye(){if(e6)return S2;e6=1;var t=Rb(),e=CD(),n=ls(),a=$g(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(a(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return S2=o,S2}var _2,t6;function x9(){if(t6)return _2;t6=1;var t=gye();function e(n){return n==null?"":t(n)}return _2=e,_2}var C2,n6;function v9(){if(n6)return C2;n6=1;var t=ls(),e=jD(),n=mye(),a=x9();function i(s,o){return t(s)?s:e(s,o)?[s]:n(a(s))}return C2=i,C2}var T2,r6;function sS(){if(r6)return T2;r6=1;var t=$g();function e(n){if(typeof n=="string"||t(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return T2=e,T2}var k2,a6;function TD(){if(a6)return k2;a6=1;var t=v9(),e=sS();function n(a,i){i=t(i,a);for(var s=0,o=i.length;a!=null&&s<o;)a=a[e(i[s++])];return s&&s==o?a:void 0}return k2=n,k2}var A2,i6;function b9(){if(i6)return A2;i6=1;var t=TD();function e(n,a,i){var s=n==null?void 0:t(n,a);return s===void 0?i:s}return A2=e,A2}var yye=b9();const As=Un(yye);var E2,s6;function xye(){if(s6)return E2;s6=1;function t(e){return e==null}return E2=t,E2}var vye=xye();const ln=Un(vye);var P2,o6;function bye(){if(o6)return P2;o6=1;var t=Vc(),e=ls(),n=Hc(),a="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==a}return P2=i,P2}var jye=bye();const Nf=Un(jye);var wye=wD();const en=Un(wye);var Nye=yd();const Bg=Un(Nye);var O2={exports:{}},lr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l6;function Sye(){if(l6)return lr;l6=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function j(S){if(typeof S=="object"&&S!==null){var _=S.$$typeof;switch(_){case t:switch(S=S.type,S){case n:case i:case a:case d:case f:return S;default:switch(S=S&&S.$$typeof,S){case l:case o:case c:case g:case p:case s:return S;default:return _}}case e:return _}}}return lr.ContextConsumer=o,lr.ContextProvider=s,lr.Element=t,lr.ForwardRef=c,lr.Fragment=n,lr.Lazy=g,lr.Memo=p,lr.Portal=e,lr.Profiler=i,lr.StrictMode=a,lr.Suspense=d,lr.SuspenseList=f,lr.isAsyncMode=function(){return!1},lr.isConcurrentMode=function(){return!1},lr.isContextConsumer=function(S){return j(S)===o},lr.isContextProvider=function(S){return j(S)===s},lr.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},lr.isForwardRef=function(S){return j(S)===c},lr.isFragment=function(S){return j(S)===n},lr.isLazy=function(S){return j(S)===g},lr.isMemo=function(S){return j(S)===p},lr.isPortal=function(S){return j(S)===e},lr.isProfiler=function(S){return j(S)===i},lr.isStrictMode=function(S){return j(S)===a},lr.isSuspense=function(S){return j(S)===d},lr.isSuspenseList=function(S){return j(S)===f},lr.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===i||S===a||S===d||S===f||S===x||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===p||S.$$typeof===s||S.$$typeof===o||S.$$typeof===c||S.$$typeof===b||S.getModuleId!==void 0)},lr.typeOf=j,lr}var c6;function _ye(){return c6||(c6=1,O2.exports=Sye()),O2.exports}var Cye=_ye(),D2,u6;function j9(){if(u6)return D2;u6=1;var t=Vc(),e=Hc(),n="[object Number]";function a(i){return typeof i=="number"||e(i)&&t(i)==n}return D2=a,D2}var M2,d6;function Tye(){if(d6)return M2;d6=1;var t=j9();function e(n){return t(n)&&n!=+n}return M2=e,M2}var kye=Tye();const zg=Un(kye);var Aye=j9();const Eye=Un(Aye);var Oi=function(e){return e===0?0:e>0?1:-1},Yh=function(e){return Nf(e)&&e.indexOf("%")===e.length-1},bt=function(e){return Eye(e)&&!zg(e)},Pye=function(e){return ln(e)},Na=function(e){return bt(e)||Nf(e)},Oye=0,Df=function(e){var n=++Oye;return"".concat(e||"").concat(n)},Di=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bt(e)&&!Nf(e))return a;var s;if(Yh(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return zg(s)&&(s=a),i&&s>n&&(s=n),s},Wu=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Dye=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,a={},i=0;i<n;i++)if(!a[e[i]])a[e[i]]=!0;else return!0;return!1},wa=function(e,n){return bt(e)&&bt(n)?function(a){return e+a*(n-e)}:function(){return n}};function kw(t,e,n){return!t||!t.length?null:t.find(function(a){return a&&(typeof e=="function"?e(a):As(a,e))===n})}var Mye=function(e,n){return bt(e)&&bt(n)?e-n:Nf(e)&&Nf(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Lm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var a in e)if({}.hasOwnProperty.call(e,a)&&!{}.hasOwnProperty.call(t,a))return!1;return!0}function QE(t){"@babel/helpers - typeof";return QE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QE(t)}var Iye=["viewBox","children"],Rye=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],h6=["points","pathLength"],I2={svg:Iye,polygon:h6,polyline:h6},kD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Aw=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(v.isValidElement(e)&&(a=e.props),!Bg(a))return null;var i={};return Object.keys(a).forEach(function(s){kD.includes(s)&&(i[s]=n||function(o){return a[s](a,o)})}),i},Lye=function(e,n,a){return function(i){return e(n,a,i),null}},Sf=function(e,n,a){if(!Bg(e)||QE(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];kD.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=Lye(o,n,a))}),i},Fye=["children"],$ye=["children"];function f6(t,e){if(t==null)return{};var n=Bye(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Bye(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function XE(t){"@babel/helpers - typeof";return XE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XE(t)}var p6={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Tc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},m6=null,R2=null,AD=function t(e){if(e===m6&&Array.isArray(R2))return R2;var n=[];return v.Children.forEach(e,function(a){ln(a)||(Cye.isFragment(a)?n=n.concat(t(a.props.children)):n.push(a))}),R2=n,m6=e,n};function Es(t,e){var n=[],a=[];return Array.isArray(e)?a=e.map(function(i){return Tc(i)}):a=[Tc(e)],AD(t).forEach(function(i){var s=As(i,"type.displayName")||As(i,"type.name");a.indexOf(s)!==-1&&n.push(i)}),n}function Ns(t,e){var n=Es(t,e);return n&&n[0]}var g6=function(e){if(!e||!e.props)return!1;var n=e.props,a=n.width,i=n.height;return!(!bt(a)||a<=0||!bt(i)||i<=0)},zye=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],qye=function(e){return e&&e.type&&Nf(e.type)&&zye.indexOf(e.type)>=0},w9=function(e){return e&&XE(e)==="object"&&"clipDot"in e},Uye=function(e,n,a,i){var s,o=(s=I2==null?void 0:I2[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!en(e)&&(i&&o.includes(n)||Rye.includes(n))||a&&kD.includes(n)},$t=function(e,n,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(v.isValidElement(e)&&(i=e.props),!Bg(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;Uye((l=i)===null||l===void 0?void 0:l[o],o,n,a)&&(s[o]=i[o])}),s},JE=function t(e,n){if(e===n)return!0;var a=v.Children.count(e);if(a!==v.Children.count(n))return!1;if(a===0)return!0;if(a===1)return y6(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<a;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!y6(s,o))return!1}return!0},y6=function(e,n){if(ln(e)&&ln(n))return!0;if(!ln(e)&&!ln(n)){var a=e.props||{},i=a.children,s=f6(a,Fye),o=n.props||{},l=o.children,c=f6(o,$ye);return i&&l?Lm(s,c)&&JE(i,l):!i&&!l?Lm(s,c):!1}return!1},x6=function(e,n){var a=[],i={};return AD(e).forEach(function(s,o){if(qye(s))a.push(s);else if(s){var l=Tc(s.type),c=n[l]||{},d=c.handler,f=c.once;if(d&&(!f||!i[l])){var p=d(s,l,o);a.push(p),i[l]=!0}}}),a},Vye=function(e){var n=e&&e.type;return n&&p6[n]?p6[n]:null},Hye=function(e,n){return AD(n).indexOf(e)},Gye=["children","width","height","viewBox","className","style","title","desc"];function ZE(){return ZE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ZE.apply(this,arguments)}function Wye(t,e){if(t==null)return{};var n=Yye(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Yye(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function eP(t){var e=t.children,n=t.width,a=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,d=Wye(t,Gye),f=i||{width:n,height:a,x:0,y:0},p=un("recharts-surface",s);return Ce.createElement("svg",ZE({},$t(d,!0,"svg"),{className:p,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Ce.createElement("title",null,l),Ce.createElement("desc",null,c),e)}var Kye=["children","className"];function tP(){return tP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},tP.apply(this,arguments)}function Qye(t,e){if(t==null)return{};var n=Xye(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Xye(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var Pn=Ce.forwardRef(function(t,e){var n=t.children,a=t.className,i=Qye(t,Kye),s=un("recharts-layer",a);return Ce.createElement("g",tP({className:s},$t(i,!0),{ref:e}),n)}),Mo=function(e,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s]},L2,v6;function Jye(){if(v6)return L2;v6=1;function t(e,n,a){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),a=a>s?s:a,a<0&&(a+=s),s=n>a?0:a-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}return L2=t,L2}var F2,b6;function Zye(){if(b6)return F2;b6=1;var t=Jye();function e(n,a,i){var s=n.length;return i=i===void 0?s:i,!a&&i>=s?n:t(n,a,i)}return F2=e,F2}var $2,j6;function N9(){if(j6)return $2;j6=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(d){return l.test(d)}return $2=c,$2}var B2,w6;function exe(){if(w6)return B2;w6=1;function t(e){return e.split("")}return B2=t,B2}var z2,N6;function txe(){if(N6)return z2;N6=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=d+"?",j="["+s+"]?",S="(?:"+x+"(?:"+[f,p,g].join("|")+")"+j+b+")*",_=j+b+S,T="(?:"+[f+l+"?",l,p,g,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+T+_,"g");function P(k){return k.match(C)||[]}return z2=P,z2}var q2,S6;function nxe(){if(S6)return q2;S6=1;var t=exe(),e=N9(),n=txe();function a(i){return e(i)?n(i):t(i)}return q2=a,q2}var U2,_6;function rxe(){if(_6)return U2;_6=1;var t=Zye(),e=N9(),n=nxe(),a=x9();function i(s){return function(o){o=a(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),d=l?t(l,1).join(""):o.slice(1);return c[s]()+d}}return U2=i,U2}var V2,C6;function axe(){if(C6)return V2;C6=1;var t=rxe(),e=t("toUpperCase");return V2=e,V2}var ixe=axe();const oS=Un(ixe);function Dr(t){return function(){return t}}const S9=Math.cos,Ew=Math.sin,Bo=Math.sqrt,Pw=Math.PI,lS=2*Pw,nP=Math.PI,rP=2*nP,zh=1e-6,sxe=rP-zh;function _9(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function oxe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return _9;const n=10**e;return function(a){this._+=a[0];for(let i=1,s=a.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}class lxe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?_9:oxe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,a,i){this._append`Q${+e},${+n},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(e,n,a,i,s,o){this._append`C${+e},${+n},${+a},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,a,i,s){if(e=+e,n=+n,a=+a,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=a-e,d=i-n,f=o-e,p=l-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>zh)if(!(Math.abs(p*c-d*f)>zh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let x=a-o,b=i-l,j=c*c+d*d,S=x*x+b*b,_=Math.sqrt(j),T=Math.sqrt(g),C=s*Math.tan((nP-Math.acos((j+g-S)/(2*_*T)))/2),P=C/T,k=C/_;Math.abs(P-1)>zh&&this._append`L${e+P*f},${n+P*p}`,this._append`A${s},${s},0,0,${+(p*x>f*b)},${this._x1=e+k*c},${this._y1=n+k*d}`}}arc(e,n,a,i,s,o){if(e=+e,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(i),c=a*Math.sin(i),d=e+l,f=n+c,p=1^o,g=o?i-s:s-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>zh||Math.abs(this._y1-f)>zh)&&this._append`L${d},${f}`,a&&(g<0&&(g=g%rP+rP),g>sxe?this._append`A${a},${a},0,1,${p},${e-l},${n-c}A${a},${a},0,1,${p},${this._x1=d},${this._y1=f}`:g>zh&&this._append`A${a},${a},0,${+(g>=nP)},${p},${this._x1=e+a*Math.cos(s)},${this._y1=n+a*Math.sin(s)}`)}rect(e,n,a,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function ED(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);e=a}return t},()=>new lxe(e)}function PD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function C9(t){this._context=t}C9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function cS(t){return new C9(t)}function T9(t){return t[0]}function k9(t){return t[1]}function A9(t,e){var n=Dr(!0),a=null,i=cS,s=null,o=ED(l);t=typeof t=="function"?t:t===void 0?T9:Dr(t),e=typeof e=="function"?e:e===void 0?k9:Dr(e);function l(c){var d,f=(c=PD(c)).length,p,g=!1,x;for(a==null&&(s=i(x=o())),d=0;d<=f;++d)!(d<f&&n(p=c[d],d,c))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,d,c),+e(p,d,c));if(x)return s=null,x+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Dr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Dr(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Dr(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,a!=null&&(s=i(a)),l):i},l.context=function(c){return arguments.length?(c==null?a=s=null:s=i(a=c),l):a},l}function Tj(t,e,n){var a=null,i=Dr(!0),s=null,o=cS,l=null,c=ED(d);t=typeof t=="function"?t:t===void 0?T9:Dr(+t),e=typeof e=="function"?e:Dr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?k9:Dr(+n);function d(p){var g,x,b,j=(p=PD(p)).length,S,_=!1,T,C=new Array(j),P=new Array(j);for(s==null&&(l=o(T=c())),g=0;g<=j;++g){if(!(g<j&&i(S=p[g],g,p))===_)if(_=!_)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=g-1;b>=x;--b)l.point(C[b],P[b]);l.lineEnd(),l.areaEnd()}_&&(C[g]=+t(S,g,p),P[g]=+e(S,g,p),l.point(a?+a(S,g,p):C[g],n?+n(S,g,p):P[g]))}if(T)return l=null,T+""||null}function f(){return A9().defined(i).curve(o).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:Dr(+p),a=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Dr(+p),d):t},d.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:Dr(+p),d):a},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:Dr(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Dr(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Dr(+p),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(a).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Dr(!!p),d):i},d.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),d):o},d.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),d):s},d}class E9{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function cxe(t){return new E9(t,!0)}function uxe(t){return new E9(t,!1)}const OD={draw(t,e){const n=Bo(e/Pw);t.moveTo(n,0),t.arc(0,0,n,0,lS)}},dxe={draw(t,e){const n=Bo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},P9=Bo(1/3),hxe=P9*2,fxe={draw(t,e){const n=Bo(e/hxe),a=n*P9;t.moveTo(0,-n),t.lineTo(a,0),t.lineTo(0,n),t.lineTo(-a,0),t.closePath()}},pxe={draw(t,e){const n=Bo(e),a=-n/2;t.rect(a,a,n,n)}},mxe=.8908130915292852,O9=Ew(Pw/10)/Ew(7*Pw/10),gxe=Ew(lS/10)*O9,yxe=-S9(lS/10)*O9,xxe={draw(t,e){const n=Bo(e*mxe),a=gxe*n,i=yxe*n;t.moveTo(0,-n),t.lineTo(a,i);for(let s=1;s<5;++s){const o=lS*s/5,l=S9(o),c=Ew(o);t.lineTo(c*n,-l*n),t.lineTo(l*a-c*i,c*a+l*i)}t.closePath()}},H2=Bo(3),vxe={draw(t,e){const n=-Bo(e/(H2*3));t.moveTo(0,n*2),t.lineTo(-H2*n,-n),t.lineTo(H2*n,-n),t.closePath()}},Vs=-.5,Hs=Bo(3)/2,aP=1/Bo(12),bxe=(aP/2+1)*3,jxe={draw(t,e){const n=Bo(e/bxe),a=n/2,i=n*aP,s=a,o=n*aP+n,l=-s,c=o;t.moveTo(a,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Vs*a-Hs*i,Hs*a+Vs*i),t.lineTo(Vs*s-Hs*o,Hs*s+Vs*o),t.lineTo(Vs*l-Hs*c,Hs*l+Vs*c),t.lineTo(Vs*a+Hs*i,Vs*i-Hs*a),t.lineTo(Vs*s+Hs*o,Vs*o-Hs*s),t.lineTo(Vs*l+Hs*c,Vs*c-Hs*l),t.closePath()}};function wxe(t,e){let n=null,a=ED(i);t=typeof t=="function"?t:Dr(t||OD),e=typeof e=="function"?e:Dr(e===void 0?64:+e);function i(){let s;if(n||(n=s=a()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Dr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Dr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Ow(){}function Dw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function D9(t){this._context=t}D9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Nxe(t){return new D9(t)}function M9(t){this._context=t}M9.prototype={areaStart:Ow,areaEnd:Ow,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Sxe(t){return new M9(t)}function I9(t){this._context=t}I9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _xe(t){return new I9(t)}function R9(t){this._context=t}R9.prototype={areaStart:Ow,areaEnd:Ow,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Cxe(t){return new R9(t)}function T6(t){return t<0?-1:1}function k6(t,e,n){var a=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(a||i<0&&-0),o=(n-t._y1)/(i||a<0&&-0),l=(s*i+o*a)/(a+i);return(T6(s)+T6(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function A6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function G2(t,e,n){var a=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-a)/3;t._context.bezierCurveTo(a+l,i+l*e,s-l,o-l*n,s,o)}function Mw(t){this._context=t}Mw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:G2(this,this._t0,A6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,G2(this,A6(this,n=k6(this,t,e)),n);break;default:G2(this,this._t0,n=k6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function L9(t){this._context=new F9(t)}(L9.prototype=Object.create(Mw.prototype)).point=function(t,e){Mw.prototype.point.call(this,e,t)};function F9(t){this._context=t}F9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,a,i,s){this._context.bezierCurveTo(e,t,a,n,s,i)}};function Txe(t){return new Mw(t)}function kxe(t){return new L9(t)}function $9(t){this._context=t}$9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var a=E6(t),i=E6(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(a[0][s],i[0][s],a[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function E6(t){var e,n=t.length-1,a,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)a=i[e]/s[e-1],s[e]-=a,o[e]-=a*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Axe(t){return new $9(t)}function uS(t,e){this._context=t,this._t=e}uS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Exe(t){return new uS(t,.5)}function Pxe(t){return new uS(t,0)}function Oxe(t){return new uS(t,1)}function ig(t,e){if((o=t.length)>1)for(var n=1,a,i,s=t[e[0]],o,l=s.length;n<o;++n)for(i=s,s=t[e[n]],a=0;a<l;++a)s[a][1]+=s[a][0]=isNaN(i[a][1])?i[a][0]:i[a][1]}function iP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Dxe(t,e){return t[e]}function Mxe(t){const e=[];return e.key=t,e}function Ixe(){var t=Dr([]),e=iP,n=ig,a=Dxe;function i(s){var o=Array.from(t.apply(this,arguments),Mxe),l,c=o.length,d=-1,f;for(const p of s)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(p,o[l].key,d,s)]).data=p;for(l=0,f=PD(e(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Dr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(a=typeof s=="function"?s:Dr(+s),i):a},i.order=function(s){return arguments.length?(e=s==null?iP:typeof s=="function"?s:Dr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??ig,i):n},i}function Rxe(t,e){if((a=t.length)>0){for(var n,a,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<a;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<a;++n)t[n][i][1]/=o}ig(t,e)}}function Lxe(t,e){if((i=t.length)>0){for(var n=0,a=t[e[0]],i,s=a.length;n<s;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}ig(t,e)}}function Fxe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,a=1,i,s,o;a<s;++a){for(var l=0,c=0,d=0;l<o;++l){for(var f=t[e[l]],p=f[a][1]||0,g=f[a-1][1]||0,x=(p-g)/2,b=0;b<l;++b){var j=t[e[b]],S=j[a][1]||0,_=j[a-1][1]||0;x+=S-_}c+=p,d+=x*p}i[a-1][1]+=i[a-1][0]=n,c&&(n-=d/c)}i[a-1][1]+=i[a-1][0]=n,ig(t,e)}}function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}var $xe=["type","size","sizeType"];function sP(){return sP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},sP.apply(this,arguments)}function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function O6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(a){Bxe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Bxe(t,e,n){return e=zxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zxe(t){var e=qxe(t,"string");return Iv(e)=="symbol"?e:e+""}function qxe(t,e){if(Iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Iv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uxe(t,e){if(t==null)return{};var n=Vxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Vxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var B9={symbolCircle:OD,symbolCross:dxe,symbolDiamond:fxe,symbolSquare:pxe,symbolStar:xxe,symbolTriangle:vxe,symbolWye:jxe},Hxe=Math.PI/180,Gxe=function(e){var n="symbol".concat(oS(e));return B9[n]||OD},Wxe=function(e,n,a){if(n==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Hxe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Yxe=function(e,n){B9["symbol".concat(oS(e))]=n},DD=function(e){var n=e.type,a=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=Uxe(e,$xe),d=O6(O6({},c),{},{type:a,size:s,sizeType:l}),f=function(){var S=Gxe(a),_=wxe().type(S).size(Wxe(s,l,a));return _()},p=d.className,g=d.cx,x=d.cy,b=$t(d,!0);return g===+g&&x===+x&&s===+s?Ce.createElement("path",sP({},b,{className:un("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(x,")"),d:f()})):null};DD.registerSymbol=Yxe;function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function oP(){return oP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oP.apply(this,arguments)}function D6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Kxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D6(Object(n),!0).forEach(function(a){Rv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Qxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xxe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,q9(a.key),a)}}function Jxe(t,e,n){return e&&Xxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zxe(t,e,n){return e=Iw(e),eve(t,z9()?Reflect.construct(e,n||[],Iw(t).constructor):e.apply(t,n))}function eve(t,e){if(e&&(sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tve(t)}function tve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z9=function(){return!!t})()}function Iw(t){return Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iw(t)}function nve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lP(t,e)}function lP(t,e){return lP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},lP(t,e)}function Rv(t,e,n){return e=q9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q9(t){var e=rve(t,"string");return sg(e)=="symbol"?e:e+""}function rve(t,e){if(sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var So=32,MD=function(t){function e(){return Qxe(this,e),Zxe(this,e,arguments)}return nve(e,t),Jxe(e,[{key:"renderIcon",value:function(a){var i=this.props.inactiveColor,s=So/2,o=So/6,l=So/3,c=a.inactive?i:a.color;if(a.type==="plainline")return Ce.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:s,x2:So,y2:s,className:"recharts-legend-icon"});if(a.type==="line")return Ce.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(So,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(a.type==="rect")return Ce.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(So/8,"h").concat(So,"v").concat(So*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Ce.isValidElement(a.legendIcon)){var d=Kxe({},a);return delete d.legendIcon,Ce.cloneElement(a.legendIcon,d)}return Ce.createElement(DD,{fill:c,cx:s,cy:s,size:So,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,f={x:0,y:0,width:So,height:So},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(x,b){var j=x.formatter||c,S=un(Rv(Rv({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var _=en(x.value)?null:x.value;Mo(!en(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=x.inactive?d:x.color;return Ce.createElement("li",oP({className:S,style:p,key:"legend-item-".concat(b)},Sf(a.props,x,b)),Ce.createElement(eP,{width:o,height:o,viewBox:f,style:g},a.renderIcon(x)),Ce.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},j?j(_,x,b):_))})}},{key:"render",value:function(){var a=this.props,i=a.payload,s=a.layout,o=a.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Ce.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(v.PureComponent);Rv(MD,"displayName","Legend");Rv(MD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var W2,M6;function ave(){if(M6)return W2;M6=1;var t=aS();function e(){this.__data__=new t,this.size=0}return W2=e,W2}var Y2,I6;function ive(){if(I6)return Y2;I6=1;function t(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}return Y2=t,Y2}var K2,R6;function sve(){if(R6)return K2;R6=1;function t(e){return this.__data__.get(e)}return K2=t,K2}var Q2,L6;function ove(){if(L6)return Q2;L6=1;function t(e){return this.__data__.has(e)}return Q2=t,Q2}var X2,F6;function lve(){if(F6)return X2;F6=1;var t=aS(),e=SD(),n=_D(),a=200;function i(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<a-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return X2=i,X2}var J2,$6;function U9(){if($6)return J2;$6=1;var t=aS(),e=ave(),n=ive(),a=sve(),i=ove(),s=lve();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=a,o.prototype.has=i,o.prototype.set=s,J2=o,J2}var Z2,B6;function cve(){if(B6)return Z2;B6=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Z2=e,Z2}var eT,z6;function uve(){if(z6)return eT;z6=1;function t(e){return this.__data__.has(e)}return eT=t,eT}var tT,q6;function V9(){if(q6)return tT;q6=1;var t=_D(),e=cve(),n=uve();function a(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return a.prototype.add=a.prototype.push=e,a.prototype.has=n,tT=a,tT}var nT,U6;function H9(){if(U6)return nT;U6=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(e[a],a,e))return!0;return!1}return nT=t,nT}var rT,V6;function G9(){if(V6)return rT;V6=1;function t(e,n){return e.has(n)}return rT=t,rT}var aT,H6;function W9(){if(H6)return aT;H6=1;var t=V9(),e=H9(),n=G9(),a=1,i=2;function s(o,l,c,d,f,p){var g=c&a,x=o.length,b=l.length;if(x!=b&&!(g&&b>x))return!1;var j=p.get(o),S=p.get(l);if(j&&S)return j==l&&S==o;var _=-1,T=!0,C=c&i?new t:void 0;for(p.set(o,l),p.set(l,o);++_<x;){var P=o[_],k=l[_];if(d)var O=g?d(k,P,_,l,o,p):d(P,k,_,o,l,p);if(O!==void 0){if(O)continue;T=!1;break}if(C){if(!e(l,function(I,F){if(!n(C,F)&&(P===I||f(P,I,c,d,p)))return C.push(F)})){T=!1;break}}else if(!(P===k||f(P,k,c,d,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return aT=s,aT}var iT,G6;function dve(){if(G6)return iT;G6=1;var t=Rl(),e=t.Uint8Array;return iT=e,iT}var sT,W6;function hve(){if(W6)return sT;W6=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i,s){a[++n]=[s,i]}),a}return sT=t,sT}var oT,Y6;function ID(){if(Y6)return oT;Y6=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i){a[++n]=i}),a}return oT=t,oT}var lT,K6;function fve(){if(K6)return lT;K6=1;var t=Rb(),e=dve(),n=ND(),a=W9(),i=hve(),s=ID(),o=1,l=2,c="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",b="[object Set]",j="[object String]",S="[object Symbol]",_="[object ArrayBuffer]",T="[object DataView]",C=t?t.prototype:void 0,P=C?C.valueOf:void 0;function k(O,I,F,B,$,L,V){switch(F){case T:if(O.byteLength!=I.byteLength||O.byteOffset!=I.byteOffset)return!1;O=O.buffer,I=I.buffer;case _:return!(O.byteLength!=I.byteLength||!L(new e(O),new e(I)));case c:case d:case g:return n(+O,+I);case f:return O.name==I.name&&O.message==I.message;case x:case j:return O==I+"";case p:var H=i;case b:var te=B&o;if(H||(H=s),O.size!=I.size&&!te)return!1;var X=V.get(O);if(X)return X==I;B|=l,V.set(O,I);var q=a(H(O),H(I),B,$,L,V);return V.delete(O),q;case S:if(P)return P.call(O)==P.call(I)}return!1}return lT=k,lT}var cT,Q6;function Y9(){if(Q6)return cT;Q6=1;function t(e,n){for(var a=-1,i=n.length,s=e.length;++a<i;)e[s+a]=n[a];return e}return cT=t,cT}var uT,X6;function pve(){if(X6)return uT;X6=1;var t=Y9(),e=ls();function n(a,i,s){var o=i(a);return e(a)?o:t(o,s(a))}return uT=n,uT}var dT,J6;function mve(){if(J6)return dT;J6=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=0,o=[];++a<i;){var l=e[a];n(l,a,e)&&(o[s++]=l)}return o}return dT=t,dT}var hT,Z6;function gve(){if(Z6)return hT;Z6=1;function t(){return[]}return hT=t,hT}var fT,eL;function yve(){if(eL)return fT;eL=1;var t=mve(),e=gve(),n=Object.prototype,a=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return a.call(o,l)}))}:e;return fT=s,fT}var pT,tL;function xve(){if(tL)return pT;tL=1;function t(e,n){for(var a=-1,i=Array(e);++a<e;)i[a]=n(a);return i}return pT=t,pT}var mT,nL;function vve(){if(nL)return mT;nL=1;var t=Vc(),e=Hc(),n="[object Arguments]";function a(i){return e(i)&&t(i)==n}return mT=a,mT}var gT,rL;function RD(){if(rL)return gT;rL=1;var t=vve(),e=Hc(),n=Object.prototype,a=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&a.call(o,"callee")&&!i.call(o,"callee")};return gT=s,gT}var hv={exports:{}},yT,aL;function bve(){if(aL)return yT;aL=1;function t(){return!1}return yT=t,yT}hv.exports;var iL;function K9(){return iL||(iL=1,function(t,e){var n=Rl(),a=bve(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;t.exports=d}(hv,hv.exports)),hv.exports}var xT,sL;function LD(){if(sL)return xT;sL=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(a,i){var s=typeof a;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(a))&&a>-1&&a%1==0&&a<i}return xT=n,xT}var vT,oL;function FD(){if(oL)return vT;oL=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return vT=e,vT}var bT,lL;function jve(){if(lL)return bT;lL=1;var t=Vc(),e=FD(),n=Hc(),a="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",b="[object String]",j="[object WeakMap]",S="[object ArrayBuffer]",_="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",P="[object Int8Array]",k="[object Int16Array]",O="[object Int32Array]",I="[object Uint8Array]",F="[object Uint8ClampedArray]",B="[object Uint16Array]",$="[object Uint32Array]",L={};L[T]=L[C]=L[P]=L[k]=L[O]=L[I]=L[F]=L[B]=L[$]=!0,L[a]=L[i]=L[S]=L[s]=L[_]=L[o]=L[l]=L[c]=L[d]=L[f]=L[p]=L[g]=L[x]=L[b]=L[j]=!1;function V(H){return n(H)&&e(H.length)&&!!L[t(H)]}return bT=V,bT}var jT,cL;function Q9(){if(cL)return jT;cL=1;function t(e){return function(n){return e(n)}}return jT=t,jT}var fv={exports:{}};fv.exports;var uL;function wve(){return uL||(uL=1,function(t,e){var n=m9(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,o=s&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(fv,fv.exports)),fv.exports}var wT,dL;function X9(){if(dL)return wT;dL=1;var t=jve(),e=Q9(),n=wve(),a=n&&n.isTypedArray,i=a?e(a):t;return wT=i,wT}var NT,hL;function Nve(){if(hL)return NT;hL=1;var t=xve(),e=RD(),n=ls(),a=K9(),i=LD(),s=X9(),o=Object.prototype,l=o.hasOwnProperty;function c(d,f){var p=n(d),g=!p&&e(d),x=!p&&!g&&a(d),b=!p&&!g&&!x&&s(d),j=p||g||x||b,S=j?t(d.length,String):[],_=S.length;for(var T in d)(f||l.call(d,T))&&!(j&&(T=="length"||x&&(T=="offset"||T=="parent")||b&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,_)))&&S.push(T);return S}return NT=c,NT}var ST,fL;function Sve(){if(fL)return ST;fL=1;var t=Object.prototype;function e(n){var a=n&&n.constructor,i=typeof a=="function"&&a.prototype||t;return n===i}return ST=e,ST}var _T,pL;function J9(){if(pL)return _T;pL=1;function t(e,n){return function(a){return e(n(a))}}return _T=t,_T}var CT,mL;function _ve(){if(mL)return CT;mL=1;var t=J9(),e=t(Object.keys,Object);return CT=e,CT}var TT,gL;function Cve(){if(gL)return TT;gL=1;var t=Sve(),e=_ve(),n=Object.prototype,a=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))a.call(s,l)&&l!="constructor"&&o.push(l);return o}return TT=i,TT}var kT,yL;function Lb(){if(yL)return kT;yL=1;var t=wD(),e=FD();function n(a){return a!=null&&e(a.length)&&!t(a)}return kT=n,kT}var AT,xL;function dS(){if(xL)return AT;xL=1;var t=Nve(),e=Cve(),n=Lb();function a(i){return n(i)?t(i):e(i)}return AT=a,AT}var ET,vL;function Tve(){if(vL)return ET;vL=1;var t=pve(),e=yve(),n=dS();function a(i){return t(i,n,e)}return ET=a,ET}var PT,bL;function kve(){if(bL)return PT;bL=1;var t=Tve(),e=1,n=Object.prototype,a=n.hasOwnProperty;function i(s,o,l,c,d,f){var p=l&e,g=t(s),x=g.length,b=t(o),j=b.length;if(x!=j&&!p)return!1;for(var S=x;S--;){var _=g[S];if(!(p?_ in o:a.call(o,_)))return!1}var T=f.get(s),C=f.get(o);if(T&&C)return T==o&&C==s;var P=!0;f.set(s,o),f.set(o,s);for(var k=p;++S<x;){_=g[S];var O=s[_],I=o[_];if(c)var F=p?c(I,O,_,o,s,f):c(O,I,_,s,o,f);if(!(F===void 0?O===I||d(O,I,l,c,f):F)){P=!1;break}k||(k=_=="constructor")}if(P&&!k){var B=s.constructor,$=o.constructor;B!=$&&"constructor"in s&&"constructor"in o&&!(typeof B=="function"&&B instanceof B&&typeof $=="function"&&$ instanceof $)&&(P=!1)}return f.delete(s),f.delete(o),P}return PT=i,PT}var OT,jL;function Ave(){if(jL)return OT;jL=1;var t=Of(),e=Rl(),n=t(e,"DataView");return OT=n,OT}var DT,wL;function Eve(){if(wL)return DT;wL=1;var t=Of(),e=Rl(),n=t(e,"Promise");return DT=n,DT}var MT,NL;function Z9(){if(NL)return MT;NL=1;var t=Of(),e=Rl(),n=t(e,"Set");return MT=n,MT}var IT,SL;function Pve(){if(SL)return IT;SL=1;var t=Of(),e=Rl(),n=t(e,"WeakMap");return IT=n,IT}var RT,_L;function Ove(){if(_L)return RT;_L=1;var t=Ave(),e=SD(),n=Eve(),a=Z9(),i=Pve(),s=Vc(),o=g9(),l="[object Map]",c="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",x=o(t),b=o(e),j=o(n),S=o(a),_=o(i),T=s;return(t&&T(new t(new ArrayBuffer(1)))!=g||e&&T(new e)!=l||n&&T(n.resolve())!=d||a&&T(new a)!=f||i&&T(new i)!=p)&&(T=function(C){var P=s(C),k=P==c?C.constructor:void 0,O=k?o(k):"";if(O)switch(O){case x:return g;case b:return l;case j:return d;case S:return f;case _:return p}return P}),RT=T,RT}var LT,CL;function Dve(){if(CL)return LT;CL=1;var t=U9(),e=W9(),n=fve(),a=kve(),i=Ove(),s=ls(),o=K9(),l=X9(),c=1,d="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function b(j,S,_,T,C,P){var k=s(j),O=s(S),I=k?f:i(j),F=O?f:i(S);I=I==d?p:I,F=F==d?p:F;var B=I==p,$=F==p,L=I==F;if(L&&o(j)){if(!o(S))return!1;k=!0,B=!1}if(L&&!B)return P||(P=new t),k||l(j)?e(j,S,_,T,C,P):n(j,S,I,_,T,C,P);if(!(_&c)){var V=B&&x.call(j,"__wrapped__"),H=$&&x.call(S,"__wrapped__");if(V||H){var te=V?j.value():j,X=H?S.value():S;return P||(P=new t),C(te,X,_,T,P)}}return L?(P||(P=new t),a(j,S,_,T,C,P)):!1}return LT=b,LT}var FT,TL;function $D(){if(TL)return FT;TL=1;var t=Dve(),e=Hc();function n(a,i,s,o,l){return a===i?!0:a==null||i==null||!e(a)&&!e(i)?a!==a&&i!==i:t(a,i,s,o,n,l)}return FT=n,FT}var $T,kL;function Mve(){if(kL)return $T;kL=1;var t=U9(),e=$D(),n=1,a=2;function i(s,o,l,c){var d=l.length,f=d,p=!c;if(s==null)return!f;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<f;){g=l[d];var x=g[0],b=s[x],j=g[1];if(p&&g[2]){if(b===void 0&&!(x in s))return!1}else{var S=new t;if(c)var _=c(b,j,x,s,o,S);if(!(_===void 0?e(j,b,n|a,c,S):_))return!1}}return!0}return $T=i,$T}var BT,AL;function e7(){if(AL)return BT;AL=1;var t=yd();function e(n){return n===n&&!t(n)}return BT=e,BT}var zT,EL;function Ive(){if(EL)return zT;EL=1;var t=e7(),e=dS();function n(a){for(var i=e(a),s=i.length;s--;){var o=i[s],l=a[o];i[s]=[o,l,t(l)]}return i}return zT=n,zT}var qT,PL;function t7(){if(PL)return qT;PL=1;function t(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==void 0||e in Object(a))}}return qT=t,qT}var UT,OL;function Rve(){if(OL)return UT;OL=1;var t=Mve(),e=Ive(),n=t7();function a(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return UT=a,UT}var VT,DL;function Lve(){if(DL)return VT;DL=1;function t(e,n){return e!=null&&n in Object(e)}return VT=t,VT}var HT,ML;function Fve(){if(ML)return HT;ML=1;var t=v9(),e=RD(),n=ls(),a=LD(),i=FD(),s=sS();function o(l,c,d){c=t(c,l);for(var f=-1,p=c.length,g=!1;++f<p;){var x=s(c[f]);if(!(g=l!=null&&d(l,x)))break;l=l[x]}return g||++f!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&a(x,p)&&(n(l)||e(l)))}return HT=o,HT}var GT,IL;function $ve(){if(IL)return GT;IL=1;var t=Lve(),e=Fve();function n(a,i){return a!=null&&e(a,i,t)}return GT=n,GT}var WT,RL;function Bve(){if(RL)return WT;RL=1;var t=$D(),e=b9(),n=$ve(),a=jD(),i=e7(),s=t7(),o=sS(),l=1,c=2;function d(f,p){return a(f)&&i(p)?s(o(f),p):function(g){var x=e(g,f);return x===void 0&&x===p?n(g,f):t(p,x,l|c)}}return WT=d,WT}var YT,LL;function qg(){if(LL)return YT;LL=1;function t(e){return e}return YT=t,YT}var KT,FL;function zve(){if(FL)return KT;FL=1;function t(e){return function(n){return n==null?void 0:n[e]}}return KT=t,KT}var QT,$L;function qve(){if($L)return QT;$L=1;var t=TD();function e(n){return function(a){return t(a,n)}}return QT=e,QT}var XT,BL;function Uve(){if(BL)return XT;BL=1;var t=zve(),e=qve(),n=jD(),a=sS();function i(s){return n(s)?t(a(s)):e(s)}return XT=i,XT}var JT,zL;function Ll(){if(zL)return JT;zL=1;var t=Rve(),e=Bve(),n=qg(),a=ls(),i=Uve();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?a(o)?e(o[0],o[1]):t(o):i(o)}return JT=s,JT}var ZT,qL;function n7(){if(qL)return ZT;qL=1;function t(e,n,a,i){for(var s=e.length,o=a+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return ZT=t,ZT}var ek,UL;function Vve(){if(UL)return ek;UL=1;function t(e){return e!==e}return ek=t,ek}var tk,VL;function Hve(){if(VL)return tk;VL=1;function t(e,n,a){for(var i=a-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return tk=t,tk}var nk,HL;function Gve(){if(HL)return nk;HL=1;var t=n7(),e=Vve(),n=Hve();function a(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return nk=a,nk}var rk,GL;function Wve(){if(GL)return rk;GL=1;var t=Gve();function e(n,a){var i=n==null?0:n.length;return!!i&&t(n,a,0)>-1}return rk=e,rk}var ak,WL;function Yve(){if(WL)return ak;WL=1;function t(e,n,a){for(var i=-1,s=e==null?0:e.length;++i<s;)if(a(n,e[i]))return!0;return!1}return ak=t,ak}var ik,YL;function Kve(){if(YL)return ik;YL=1;function t(){}return ik=t,ik}var sk,KL;function Qve(){if(KL)return sk;KL=1;var t=Z9(),e=Kve(),n=ID(),a=1/0,i=t&&1/n(new t([,-0]))[1]==a?function(s){return new t(s)}:e;return sk=i,sk}var ok,QL;function Xve(){if(QL)return ok;QL=1;var t=V9(),e=Wve(),n=Yve(),a=G9(),i=Qve(),s=ID(),o=200;function l(c,d,f){var p=-1,g=e,x=c.length,b=!0,j=[],S=j;if(f)b=!1,g=n;else if(x>=o){var _=d?null:i(c);if(_)return s(_);b=!1,g=a,S=new t}else S=d?[]:j;e:for(;++p<x;){var T=c[p],C=d?d(T):T;if(T=f||T!==0?T:0,b&&C===C){for(var P=S.length;P--;)if(S[P]===C)continue e;d&&S.push(C),j.push(T)}else g(S,C,f)||(S!==j&&S.push(C),j.push(T))}return j}return ok=l,ok}var lk,XL;function Jve(){if(XL)return lk;XL=1;var t=Ll(),e=Xve();function n(a,i){return a&&a.length?e(a,t(i,2)):[]}return lk=n,lk}var Zve=Jve();const JL=Un(Zve);function r7(t,e,n){return e===!0?JL(t,n):en(e)?JL(t,e):t}function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}var ebe=["ref"];function ZL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function fc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(n),!0).forEach(function(a){hS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function tbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e5(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,i7(a.key),a)}}function nbe(t,e,n){return e&&e5(t.prototype,e),n&&e5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rbe(t,e,n){return e=Rw(e),abe(t,a7()?Reflect.construct(e,n||[],Rw(t).constructor):e.apply(t,n))}function abe(t,e){if(e&&(og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ibe(t)}function ibe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a7=function(){return!!t})()}function Rw(t){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rw(t)}function sbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cP(t,e)}function cP(t,e){return cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},cP(t,e)}function hS(t,e,n){return e=i7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i7(t){var e=obe(t,"string");return og(e)=="symbol"?e:e+""}function obe(t,e){if(og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(og(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lbe(t,e){if(t==null)return{};var n=cbe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function cbe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function ube(t){return t.value}function dbe(t,e){if(Ce.isValidElement(t))return Ce.cloneElement(t,e);if(typeof t=="function")return Ce.createElement(t,e);e.ref;var n=lbe(e,ebe);return Ce.createElement(MD,n)}var t5=1,kc=function(t){function e(){var n;tbe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=rbe(this,e,[].concat(i)),hS(n,"lastBoundingBox",{width:-1,height:-1}),n}return sbe(e,t),nbe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>t5||Math.abs(i.height-this.lastBoundingBox.height)>t5)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,a&&a(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?fc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,f=i.chartHeight,p,g;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&s==="vertical"){var x=this.getBBoxSnapshot();p={left:((d||0)-x.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();g={top:((f||0)-b.height)/2}}else g=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return fc(fc({},p),g)}},{key:"render",value:function(){var a=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,f=i.payload,p=fc(fc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Ce.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){a.wrapperNode=x}},dbe(s,fc(fc({},this.props),{},{payload:r7(f,d,ube)})))}}],[{key:"getWithHeight",value:function(a,i){var s=fc(fc({},this.defaultProps),a.props),o=s.layout;return o==="vertical"&&bt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||i}:null}}])}(v.PureComponent);hS(kc,"displayName","Legend");hS(kc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var ck,n5;function hbe(){if(n5)return ck;n5=1;var t=Rb(),e=RD(),n=ls(),a=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(a&&s&&s[a])}return ck=i,ck}var uk,r5;function s7(){if(r5)return uk;r5=1;var t=Y9(),e=hbe();function n(a,i,s,o,l){var c=-1,d=a.length;for(s||(s=e),l||(l=[]);++c<d;){var f=a[c];i>0&&s(f)?i>1?n(f,i-1,s,o,l):t(l,f):o||(l[l.length]=f)}return l}return uk=n,uk}var dk,a5;function fbe(){if(a5)return dk;a5=1;function t(e){return function(n,a,i){for(var s=-1,o=Object(n),l=i(n),c=l.length;c--;){var d=l[e?c:++s];if(a(o[d],d,o)===!1)break}return n}}return dk=t,dk}var hk,i5;function pbe(){if(i5)return hk;i5=1;var t=fbe(),e=t();return hk=e,hk}var fk,s5;function o7(){if(s5)return fk;s5=1;var t=pbe(),e=dS();function n(a,i){return a&&t(a,i,e)}return fk=n,fk}var pk,o5;function mbe(){if(o5)return pk;o5=1;var t=Lb();function e(n,a){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=a?o:-1,c=Object(i);(a?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return pk=e,pk}var mk,l5;function BD(){if(l5)return mk;l5=1;var t=o7(),e=mbe(),n=e(t);return mk=n,mk}var gk,c5;function l7(){if(c5)return gk;c5=1;var t=BD(),e=Lb();function n(a,i){var s=-1,o=e(a)?Array(a.length):[];return t(a,function(l,c,d){o[++s]=i(l,c,d)}),o}return gk=n,gk}var yk,u5;function gbe(){if(u5)return yk;u5=1;function t(e,n){var a=e.length;for(e.sort(n);a--;)e[a]=e[a].value;return e}return yk=t,yk}var xk,d5;function ybe(){if(d5)return xk;d5=1;var t=$g();function e(n,a){if(n!==a){var i=n!==void 0,s=n===null,o=n===n,l=t(n),c=a!==void 0,d=a===null,f=a===a,p=t(a);if(!d&&!p&&!l&&n>a||l&&c&&f&&!d&&!p||s&&c&&f||!i&&f||!o)return 1;if(!s&&!l&&!p&&n<a||p&&i&&o&&!s&&!l||d&&i&&o||!c&&o||!f)return-1}return 0}return xk=e,xk}var vk,h5;function xbe(){if(h5)return vk;h5=1;var t=ybe();function e(n,a,i){for(var s=-1,o=n.criteria,l=a.criteria,c=o.length,d=i.length;++s<c;){var f=t(o[s],l[s]);if(f){if(s>=d)return f;var p=i[s];return f*(p=="desc"?-1:1)}}return n.index-a.index}return vk=e,vk}var bk,f5;function vbe(){if(f5)return bk;f5=1;var t=CD(),e=TD(),n=Ll(),a=l7(),i=gbe(),s=Q9(),o=xbe(),l=qg(),c=ls();function d(f,p,g){p.length?p=t(p,function(j){return c(j)?function(S){return e(S,j.length===1?j[0]:j)}:j}):p=[l];var x=-1;p=t(p,s(n));var b=a(f,function(j,S,_){var T=t(p,function(C){return C(j)});return{criteria:T,index:++x,value:j}});return i(b,function(j,S){return o(j,S,g)})}return bk=d,bk}var jk,p5;function bbe(){if(p5)return jk;p5=1;function t(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}return jk=t,jk}var wk,m5;function jbe(){if(m5)return wk;m5=1;var t=bbe(),e=Math.max;function n(a,i,s){return i=e(i===void 0?a.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),d=Array(c);++l<c;)d[l]=o[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=o[l];return f[i]=s(d),t(a,this,f)}}return wk=n,wk}var Nk,g5;function wbe(){if(g5)return Nk;g5=1;function t(e){return function(){return e}}return Nk=t,Nk}var Sk,y5;function c7(){if(y5)return Sk;y5=1;var t=Of(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Sk=e,Sk}var _k,x5;function Nbe(){if(x5)return _k;x5=1;var t=wbe(),e=c7(),n=qg(),a=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return _k=a,_k}var Ck,v5;function Sbe(){if(v5)return Ck;v5=1;var t=800,e=16,n=Date.now;function a(i){var s=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Ck=a,Ck}var Tk,b5;function _be(){if(b5)return Tk;b5=1;var t=Nbe(),e=Sbe(),n=e(t);return Tk=n,Tk}var kk,j5;function Cbe(){if(j5)return kk;j5=1;var t=qg(),e=jbe(),n=_be();function a(i,s){return n(e(i,s,t),i+"")}return kk=a,kk}var Ak,w5;function fS(){if(w5)return Ak;w5=1;var t=ND(),e=Lb(),n=LD(),a=yd();function i(s,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return Ak=i,Ak}var Ek,N5;function Tbe(){if(N5)return Ek;N5=1;var t=s7(),e=vbe(),n=Cbe(),a=fS(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&a(s,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return Ek=i,Ek}var kbe=Tbe();const zD=Un(kbe);function Lv(t){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(t)}function uP(){return uP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},uP.apply(this,arguments)}function Abe(t,e){return Dbe(t)||Obe(t,e)||Pbe(t,e)||Ebe()}function Ebe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pbe(t,e){if(t){if(typeof t=="string")return S5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S5(t,e)}}function S5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Obe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Dbe(t){if(Array.isArray(t))return t}function _5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Pk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(n),!0).forEach(function(a){Mbe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Mbe(t,e,n){return e=Ibe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ibe(t){var e=Rbe(t,"string");return Lv(e)=="symbol"?e:e+""}function Rbe(t,e){if(Lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Lv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lbe(t){return Array.isArray(t)&&Na(t[0])&&Na(t[1])?t.join(" ~ "):t}var Fbe=function(e){var n=e.separator,a=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,f=e.payload,p=e.formatter,g=e.itemSorter,x=e.wrapperClassName,b=e.labelClassName,j=e.label,S=e.labelFormatter,_=e.accessibilityLayer,T=_===void 0?!1:_,C=function(){if(f&&f.length){var V={padding:0,margin:0},H=(g?zD(f,g):f).map(function(te,X){if(te.type==="none")return null;var q=Pk({display:"block",paddingTop:4,paddingBottom:4,color:te.color||"#000"},l),Y=te.formatter||p||Lbe,se=te.value,G=te.name,z=se,ce=G;if(Y&&z!=null&&ce!=null){var we=Y(se,G,te,X,f);if(Array.isArray(we)){var K=Abe(we,2);z=K[0],ce=K[1]}else z=we}return Ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:q},Na(ce)?Ce.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Na(ce)?Ce.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Ce.createElement("span",{className:"recharts-tooltip-item-value"},z),Ce.createElement("span",{className:"recharts-tooltip-item-unit"},te.unit||""))});return Ce.createElement("ul",{className:"recharts-tooltip-item-list",style:V},H)}return null},P=Pk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Pk({margin:0},d),O=!ln(j),I=O?j:"",F=un("recharts-default-tooltip",x),B=un("recharts-tooltip-label",b);O&&S&&f!==void 0&&f!==null&&(I=S(j,f));var $=T?{role:"status","aria-live":"assertive"}:{};return Ce.createElement("div",uP({className:F,style:P},$),Ce.createElement("p",{className:B,style:k},Ce.isValidElement(I)?I:"".concat(I)),C())};function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function kj(t,e,n){return e=$be(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $be(t){var e=Bbe(t,"string");return Fv(e)=="symbol"?e:e+""}function Bbe(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Fv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yx="recharts-tooltip-wrapper",zbe={visibility:"hidden"};function qbe(t){var e=t.coordinate,n=t.translateX,a=t.translateY;return un(Yx,kj(kj(kj(kj({},"".concat(Yx,"-right"),bt(n)&&e&&bt(e.x)&&n>=e.x),"".concat(Yx,"-left"),bt(n)&&e&&bt(e.x)&&n<e.x),"".concat(Yx,"-bottom"),bt(a)&&e&&bt(e.y)&&a>=e.y),"".concat(Yx,"-top"),bt(a)&&e&&bt(e.y)&&a<e.y))}function C5(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(s&&bt(s[a]))return s[a];var f=n[a]-l-i,p=n[a]+i;if(e[a])return o[a]?f:p;if(o[a]){var g=f,x=c[a];return g<x?Math.max(p,c[a]):Math.max(f,c[a])}var b=p+l,j=c[a]+d;return b>j?Math.max(f,c[a]):Math.max(p,c[a])}function Ube(t){var e=t.translateX,n=t.translateY,a=t.useTranslate3d;return{transform:a?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Vbe(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,f,p;return o.height>0&&o.width>0&&n?(f=C5({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=C5({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Ube({translateX:f,translateY:p,useTranslate3d:l})):d=zbe,{cssProperties:d,cssClasses:qbe({translateX:f,translateY:p,coordinate:n})}}function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function T5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function k5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T5(Object(n),!0).forEach(function(a){hP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Hbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gbe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,d7(a.key),a)}}function Wbe(t,e,n){return e&&Gbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ybe(t,e,n){return e=Lw(e),Kbe(t,u7()?Reflect.construct(e,n||[],Lw(t).constructor):e.apply(t,n))}function Kbe(t,e){if(e&&(lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qbe(t)}function Qbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u7=function(){return!!t})()}function Lw(t){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lw(t)}function Xbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dP(t,e)}function dP(t,e){return dP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},dP(t,e)}function hP(t,e,n){return e=d7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d7(t){var e=Jbe(t,"string");return lg(e)=="symbol"?e:e+""}function Jbe(t,e){if(lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(lg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var A5=1,Zbe=function(t){function e(){var n;Hbe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=Ybe(this,e,[].concat(i)),hP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),hP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),n}return Xbe(e,t),Wbe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>A5||Math.abs(a.height-this.state.lastBoundingBox.height)>A5)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,f=i.coordinate,p=i.hasPayload,g=i.isAnimationActive,x=i.offset,b=i.position,j=i.reverseDirection,S=i.useTranslate3d,_=i.viewBox,T=i.wrapperStyle,C=Vbe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:b,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:S,viewBox:_}),P=C.cssClasses,k=C.cssProperties,O=k5(k5({transition:g&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},T);return Ce.createElement("div",{tabIndex:-1,className:P,style:O,ref:function(F){a.wrapperNode=F}},d)}}])}(v.PureComponent),e0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},xd={isSsr:e0e()};function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function E5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function P5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E5(Object(n),!0).forEach(function(a){qD(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function t0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n0e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,f7(a.key),a)}}function r0e(t,e,n){return e&&n0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function a0e(t,e,n){return e=Fw(e),i0e(t,h7()?Reflect.construct(e,n||[],Fw(t).constructor):e.apply(t,n))}function i0e(t,e){if(e&&(cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s0e(t)}function s0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h7=function(){return!!t})()}function Fw(t){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fw(t)}function o0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fP(t,e)}function fP(t,e){return fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},fP(t,e)}function qD(t,e,n){return e=f7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f7(t){var e=l0e(t,"string");return cg(e)=="symbol"?e:e+""}function l0e(t,e){if(cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function c0e(t){return t.dataKey}function u0e(t,e){return Ce.isValidElement(t)?Ce.cloneElement(t,e):typeof t=="function"?Ce.createElement(t,e):Ce.createElement(Fbe,e)}var Ei=function(t){function e(){return t0e(this,e),a0e(this,e,arguments)}return o0e(e,t),r0e(e,[{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,f=i.coordinate,p=i.filterNull,g=i.isAnimationActive,x=i.offset,b=i.payload,j=i.payloadUniqBy,S=i.position,_=i.reverseDirection,T=i.useTranslate3d,C=i.viewBox,P=i.wrapperStyle,k=b??[];p&&k.length&&(k=r7(b.filter(function(I){return I.value!=null&&(I.hide!==!0||a.props.includeHidden)}),j,c0e));var O=k.length>0;return Ce.createElement(Zbe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:g,active:s,coordinate:f,hasPayload:O,offset:x,position:S,reverseDirection:_,useTranslate3d:T,viewBox:C,wrapperStyle:P},u0e(d,P5(P5({},this.props),{},{payload:k})))}}])}(v.PureComponent);qD(Ei,"displayName","Tooltip");qD(Ei,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!xd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Ok,O5;function d0e(){if(O5)return Ok;O5=1;var t=Rl(),e=function(){return t.Date.now()};return Ok=e,Ok}var Dk,D5;function h0e(){if(D5)return Dk;D5=1;var t=/\s/;function e(n){for(var a=n.length;a--&&t.test(n.charAt(a)););return a}return Dk=e,Dk}var Mk,M5;function f0e(){if(M5)return Mk;M5=1;var t=h0e(),e=/^\s+/;function n(a){return a&&a.slice(0,t(a)+1).replace(e,"")}return Mk=n,Mk}var Ik,I5;function p7(){if(I5)return Ik;I5=1;var t=f0e(),e=yd(),n=$g(),a=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return a;if(e(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=e(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=t(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?a:+d}return Ik=c,Ik}var Rk,R5;function p0e(){if(R5)return Rk;R5=1;var t=yd(),e=d0e(),n=p7(),a="Expected a function",i=Math.max,s=Math.min;function o(l,c,d){var f,p,g,x,b,j,S=0,_=!1,T=!1,C=!0;if(typeof l!="function")throw new TypeError(a);c=n(c)||0,t(d)&&(_=!!d.leading,T="maxWait"in d,g=T?i(n(d.maxWait)||0,c):g,C="trailing"in d?!!d.trailing:C);function P(H){var te=f,X=p;return f=p=void 0,S=H,x=l.apply(X,te),x}function k(H){return S=H,b=setTimeout(F,c),_?P(H):x}function O(H){var te=H-j,X=H-S,q=c-te;return T?s(q,g-X):q}function I(H){var te=H-j,X=H-S;return j===void 0||te>=c||te<0||T&&X>=g}function F(){var H=e();if(I(H))return B(H);b=setTimeout(F,O(H))}function B(H){return b=void 0,C&&f?P(H):(f=p=void 0,x)}function $(){b!==void 0&&clearTimeout(b),S=0,f=j=p=b=void 0}function L(){return b===void 0?x:B(e())}function V(){var H=e(),te=I(H);if(f=arguments,p=this,j=H,te){if(b===void 0)return k(j);if(T)return clearTimeout(b),b=setTimeout(F,c),P(j)}return b===void 0&&(b=setTimeout(F,c)),x}return V.cancel=$,V.flush=L,V}return Rk=o,Rk}var Lk,L5;function m0e(){if(L5)return Lk;L5=1;var t=p0e(),e=yd(),n="Expected a function";function a(i,s,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,s,{leading:l,maxWait:s,trailing:c})}return Lk=a,Lk}var g0e=m0e();const m7=Un(g0e);function $v(t){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(t)}function F5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Aj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F5(Object(n),!0).forEach(function(a){y0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function y0e(t,e,n){return e=x0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x0e(t){var e=v0e(t,"string");return $v(e)=="symbol"?e:e+""}function v0e(t,e){if($v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if($v(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b0e(t,e){return S0e(t)||N0e(t,e)||w0e(t,e)||j0e()}function j0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w0e(t,e){if(t){if(typeof t=="string")return $5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $5(t,e)}}function $5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function N0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function S0e(t){if(Array.isArray(t))return t}var aw=v.forwardRef(function(t,e){var n=t.aspect,a=t.initialDimension,i=a===void 0?{width:-1,height:-1}:a,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,f=d===void 0?0:d,p=t.minHeight,g=t.maxHeight,x=t.children,b=t.debounce,j=b===void 0?0:b,S=t.id,_=t.className,T=t.onResize,C=t.style,P=C===void 0?{}:C,k=v.useRef(null),O=v.useRef();O.current=T,v.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var I=v.useState({containerWidth:i.width,containerHeight:i.height}),F=b0e(I,2),B=F[0],$=F[1],L=v.useCallback(function(H,te){$(function(X){var q=Math.round(H),Y=Math.round(te);return X.containerWidth===q&&X.containerHeight===Y?X:{containerWidth:q,containerHeight:Y}})},[]);v.useEffect(function(){var H=function(G){var z,ce=G[0].contentRect,we=ce.width,K=ce.height;L(we,K),(z=O.current)===null||z===void 0||z.call(O,we,K)};j>0&&(H=m7(H,j,{trailing:!0,leading:!1}));var te=new ResizeObserver(H),X=k.current.getBoundingClientRect(),q=X.width,Y=X.height;return L(q,Y),te.observe(k.current),function(){te.disconnect()}},[L,j]);var V=v.useMemo(function(){var H=B.containerWidth,te=B.containerHeight;if(H<0||te<0)return null;Mo(Yh(o)||Yh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Mo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var X=Yh(o)?H:o,q=Yh(c)?te:c;n&&n>0&&(X?q=X/n:q&&(X=q*n),g&&q>g&&(q=g)),Mo(X>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,X,q,o,c,f,p,n);var Y=!Array.isArray(x)&&Tc(x.type).endsWith("Chart");return Ce.Children.map(x,function(se){return Ce.isValidElement(se)?v.cloneElement(se,Aj({width:X,height:q},Y?{style:Aj({height:"100%",width:"100%",maxHeight:q,maxWidth:X},se.props.style)}:{})):se})},[n,x,c,g,p,f,B,o]);return Ce.createElement("div",{id:S?"".concat(S):void 0,className:un("recharts-responsive-container",_),style:Aj(Aj({},P),{},{width:o,height:c,minWidth:f,minHeight:p,maxHeight:g}),ref:k},V)}),Fb=function(e){return null};Fb.displayName="Cell";function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function B5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function pP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B5(Object(n),!0).forEach(function(a){_0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function _0e(t,e,n){return e=C0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C0e(t){var e=T0e(t,"string");return Bv(e)=="symbol"?e:e+""}function T0e(t,e){if(Bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Bv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ym={widthCache:{},cacheCount:0},k0e=2e3,A0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},z5="recharts_measurement_span";function E0e(t){var e=pP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var vv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||xd.isSsr)return{width:0,height:0};var a=E0e(n),i=JSON.stringify({text:e,copyStyle:a});if(ym.widthCache[i])return ym.widthCache[i];try{var s=document.getElementById(z5);s||(s=document.createElement("span"),s.setAttribute("id",z5),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=pP(pP({},A0e),a);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return ym.widthCache[i]=c,++ym.cacheCount>k0e&&(ym.cacheCount=0,ym.widthCache={}),c}catch{return{width:0,height:0}}},P0e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function $w(t,e){return I0e(t)||M0e(t,e)||D0e(t,e)||O0e()}function O0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D0e(t,e){if(t){if(typeof t=="string")return q5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q5(t,e)}}function q5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function M0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function I0e(t){if(Array.isArray(t))return t}function R0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U5(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,F0e(a.key),a)}}function L0e(t,e,n){return e&&U5(t.prototype,e),n&&U5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F0e(t){var e=$0e(t,"string");return zv(e)=="symbol"?e:e+""}function $0e(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(zv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var V5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,H5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,B0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,z0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,g7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},q0e=Object.keys(g7),km="NaN";function U0e(t,e){return t*g7[e]}var Ej=function(){function t(e,n){R0e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!B0e.test(n)&&(this.num=NaN,this.unit=""),q0e.includes(n)&&(this.num=U0e(e,n),this.unit="px")}return L0e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,i=(a=z0e.exec(n))!==null&&a!==void 0?a:[],s=$w(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function y7(t){if(t.includes(km))return km;for(var e=t;e.includes("*")||e.includes("/");){var n,a=(n=V5.exec(e))!==null&&n!==void 0?n:[],i=$w(a,4),s=i[1],o=i[2],l=i[3],c=Ej.parse(s??""),d=Ej.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return km;e=e.replace(V5,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,g=(p=H5.exec(e))!==null&&p!==void 0?p:[],x=$w(g,4),b=x[1],j=x[2],S=x[3],_=Ej.parse(b??""),T=Ej.parse(S??""),C=j==="+"?_.add(T):_.subtract(T);if(C.isNaN())return km;e=e.replace(H5,C.toString())}return e}var G5=/\(([^()]*)\)/;function V0e(t){for(var e=t;e.includes("(");){var n=G5.exec(e),a=$w(n,2),i=a[1];e=e.replace(G5,y7(i))}return e}function H0e(t){var e=t.replace(/\s+/g,"");return e=V0e(e),e=y7(e),e}function G0e(t){try{return H0e(t)}catch{return km}}function Fk(t){var e=G0e(t.slice(5,-1));return e===km?"":e}var W0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Y0e=["dx","dy","angle","className","breakAll"];function mP(){return mP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},mP.apply(this,arguments)}function W5(t,e){if(t==null)return{};var n=K0e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function K0e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Y5(t,e){return Z0e(t)||J0e(t,e)||X0e(t,e)||Q0e()}function Q0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X0e(t,e){if(t){if(typeof t=="string")return K5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K5(t,e)}}function K5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function J0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Z0e(t){if(Array.isArray(t))return t}var x7=/[ \f\n\r\t\v\u2028\u2029]+/,v7=function(e){var n=e.children,a=e.breakAll,i=e.style;try{var s=[];ln(n)||(a?s=n.toString().split(""):s=n.toString().split(x7));var o=s.map(function(c){return{word:c,width:vv(c,i).width}}),l=a?0:vv("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},e1e=function(e,n,a,i,s){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,f=bt(o),p=l,g=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return X.reduce(function(q,Y){var se=Y.word,G=Y.width,z=q[q.length-1];if(z&&(i==null||s||z.width+G+a<Number(i)))z.words.push(se),z.width+=G+a;else{var ce={words:[se],width:G};q.push(ce)}return q},[])},x=g(n),b=function(X){return X.reduce(function(q,Y){return q.width>Y.width?q:Y})};if(!f)return x;for(var j="",S=function(X){var q=p.slice(0,X),Y=v7({breakAll:d,style:c,children:q+j}).wordsWithComputedWidth,se=g(Y),G=se.length>o||b(se).width>Number(i);return[G,se]},_=0,T=p.length-1,C=0,P;_<=T&&C<=p.length-1;){var k=Math.floor((_+T)/2),O=k-1,I=S(O),F=Y5(I,2),B=F[0],$=F[1],L=S(k),V=Y5(L,1),H=V[0];if(!B&&!H&&(_=k+1),B&&H&&(T=k-1),!B&&H){P=$;break}C++}return P||x},Q5=function(e){var n=ln(e)?[]:e.toString().split(x7);return[{words:n}]},t1e=function(e){var n=e.width,a=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((n||a)&&!xd.isSsr){var c,d,f=v7({breakAll:o,children:i,style:s});if(f){var p=f.wordsWithComputedWidth,g=f.spaceWidth;c=p,d=g}else return Q5(i);return e1e({breakAll:o,children:i,maxLines:l,style:s},c,d,n,a)}return Q5(i)},X5="#808080",_f=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,f=e.scaleToFit,p=f===void 0?!1:f,g=e.textAnchor,x=g===void 0?"start":g,b=e.verticalAnchor,j=b===void 0?"end":b,S=e.fill,_=S===void 0?X5:S,T=W5(e,W0e),C=v.useMemo(function(){return t1e({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),P=T.dx,k=T.dy,O=T.angle,I=T.className,F=T.breakAll,B=W5(T,Y0e);if(!Na(a)||!Na(s))return null;var $=a+(bt(P)?P:0),L=s+(bt(k)?k:0),V;switch(j){case"start":V=Fk("calc(".concat(d,")"));break;case"middle":V=Fk("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:V=Fk("calc(".concat(C.length-1," * -").concat(l,")"));break}var H=[];if(p){var te=C[0].width,X=T.width;H.push("scale(".concat((bt(X)?X/te:1)/te,")"))}return O&&H.push("rotate(".concat(O,", ").concat($,", ").concat(L,")")),H.length&&(B.transform=H.join(" ")),Ce.createElement("text",mP({},$t(B,!0),{x:$,y:L,className:un("recharts-text",I),textAnchor:x,fill:_.includes("url")?X5:_}),C.map(function(q,Y){var se=q.words.join(F?"":" ");return Ce.createElement("tspan",{x:$,dy:Y===0?V:l,key:"".concat(se,"-").concat(Y)},se)}))};function od(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function n1e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function UD(t){let e,n,a;t.length!==2?(e=od,n=(l,c)=>od(t(l),c),a=(l,c)=>t(l)-c):(e=t===od||t===n1e?t:r1e,n=t,a=t);function i(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<0?d=p+1:f=p}while(d<f)}return d}function s(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function o(l,c,d=0,f=l.length){const p=i(l,c,d,f-1);return p>d&&a(l[p-1],c)>-a(l[p],c)?p-1:p}return{left:i,center:o,right:s}}function r1e(){return 0}function b7(t){return t===null?NaN:+t}function*a1e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const i1e=UD(od),$b=i1e.right;UD(b7).center;class J5 extends Map{constructor(e,n=l1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[a,i]of e)this.set(a,i)}get(e){return super.get(Z5(this,e))}has(e){return super.has(Z5(this,e))}set(e,n){return super.set(s1e(this,e),n)}delete(e){return super.delete(o1e(this,e))}}function Z5({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):n}function s1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):(t.set(a,n),n)}function o1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)&&(n=t.get(a),t.delete(a)),n}function l1e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function c1e(t=od){if(t===od)return j7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const a=t(e,n);return a||a===0?a:(t(n,n)===0)-(t(e,e)===0)}}function j7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const u1e=Math.sqrt(50),d1e=Math.sqrt(10),h1e=Math.sqrt(2);function Bw(t,e,n){const a=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(a)),s=a/Math.pow(10,i),o=s>=u1e?10:s>=d1e?5:s>=h1e?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=n&&n<2?Bw(t,e,n*2):[l,c,d]}function gP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const a=e<t,[i,s,o]=a?Bw(e,t,n):Bw(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(s-d)/-o;else for(let d=0;d<l;++d)c[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function yP(t,e,n){return e=+e,t=+t,n=+n,Bw(t,e,n)[2]}function xP(t,e,n){e=+e,t=+t,n=+n;const a=e<t,i=a?yP(e,t,n):yP(t,e,n);return(a?-1:1)*(i<0?1/-i:i)}function eF(t,e){let n;for(const a of t)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function tF(t,e){let n;for(const a of t)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function w7(t,e,n=0,a=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(t.length-1,a)),!(n<=e&&e<=a))return t;for(i=i===void 0?j7:c1e(i);a>n;){if(a-n>600){const c=a-n+1,d=e-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),x=Math.max(n,Math.floor(e-d*p/c+g)),b=Math.min(a,Math.floor(e+(c-d)*p/c+g));w7(t,e,x,b,i)}const s=t[e];let o=n,l=a;for(Kx(t,n,e),i(t[a],s)>0&&Kx(t,n,a);o<l;){for(Kx(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Kx(t,n,l):(++l,Kx(t,l,a)),l<=e&&(n=l+1),e<=l&&(a=l-1)}return t}function Kx(t,e,n){const a=t[e];t[e]=t[n],t[n]=a}function f1e(t,e,n){if(t=Float64Array.from(a1e(t)),!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return tF(t);if(e>=1)return eF(t);var a,i=(a-1)*e,s=Math.floor(i),o=eF(w7(t,s).subarray(0,s+1)),l=tF(t.subarray(s+1));return o+(l-o)*(i-s)}}function p1e(t,e,n=b7){if(!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return+n(t[0],0,t);if(e>=1)return+n(t[a-1],a-1,t);var a,i=(a-1)*e,s=Math.floor(i),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function m1e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var a=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++a<i;)s[a]=t+a*n;return s}function no(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Gc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const vP=Symbol("implicit");function VD(){var t=new J5,e=[],n=[],a=vP;function i(s){let o=t.get(s);if(o===void 0){if(a!==vP)return a;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new J5;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return VD(e,n).unknown(a)},no.apply(i,arguments),i}function qv(){var t=VD().unknown(void 0),e=t.domain,n=t.range,a=0,i=1,s,o,l=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var g=e().length,x=i<a,b=x?i:a,j=x?a:i;s=(j-b)/Math.max(1,g-c+d*2),l&&(s=Math.floor(s)),b+=(j-b-s*(g-c))*f,o=s*(1-c),l&&(b=Math.round(b),o=Math.round(o));var S=m1e(g).map(function(_){return b+s*_});return n(x?S.reverse():S)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([a,i]=g,a=+a,i=+i,p()):[a,i]},t.rangeRound=function(g){return[a,i]=g,a=+a,i=+i,l=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(g){return arguments.length?(l=!!g,p()):l},t.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return qv(e(),[a,i]).round(l).paddingInner(c).paddingOuter(d).align(f)},no.apply(p(),arguments)}function N7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return N7(e())},t}function bv(){return N7(qv.apply(null,arguments).paddingInner(1))}function HD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function S7(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function Bb(){}var Uv=.7,zw=1/Uv,Fm="\\s*([+-]?\\d+)\\s*",Vv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",El="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g1e=/^#([0-9a-f]{3,8})$/,y1e=new RegExp(`^rgb\\(${Fm},${Fm},${Fm}\\)$`),x1e=new RegExp(`^rgb\\(${El},${El},${El}\\)$`),v1e=new RegExp(`^rgba\\(${Fm},${Fm},${Fm},${Vv}\\)$`),b1e=new RegExp(`^rgba\\(${El},${El},${El},${Vv}\\)$`),j1e=new RegExp(`^hsl\\(${Vv},${El},${El}\\)$`),w1e=new RegExp(`^hsla\\(${Vv},${El},${El},${Vv}\\)$`),nF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HD(Bb,Hv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rF,formatHex:rF,formatHex8:N1e,formatHsl:S1e,formatRgb:aF,toString:aF});function rF(){return this.rgb().formatHex()}function N1e(){return this.rgb().formatHex8()}function S1e(){return _7(this).formatHsl()}function aF(){return this.rgb().formatRgb()}function Hv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=g1e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?iF(e):n===3?new ns(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Pj(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Pj(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=y1e.exec(t))?new ns(e[1],e[2],e[3],1):(e=x1e.exec(t))?new ns(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=v1e.exec(t))?Pj(e[1],e[2],e[3],e[4]):(e=b1e.exec(t))?Pj(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=j1e.exec(t))?lF(e[1],e[2]/100,e[3]/100,1):(e=w1e.exec(t))?lF(e[1],e[2]/100,e[3]/100,e[4]):nF.hasOwnProperty(t)?iF(nF[t]):t==="transparent"?new ns(NaN,NaN,NaN,0):null}function iF(t){return new ns(t>>16&255,t>>8&255,t&255,1)}function Pj(t,e,n,a){return a<=0&&(t=e=n=NaN),new ns(t,e,n,a)}function _1e(t){return t instanceof Bb||(t=Hv(t)),t?(t=t.rgb(),new ns(t.r,t.g,t.b,t.opacity)):new ns}function bP(t,e,n,a){return arguments.length===1?_1e(t):new ns(t,e,n,a??1)}function ns(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}HD(ns,bP,S7(Bb,{brighter(t){return t=t==null?zw:Math.pow(zw,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Uv:Math.pow(Uv,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ns(cf(this.r),cf(this.g),cf(this.b),qw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sF,formatHex:sF,formatHex8:C1e,formatRgb:oF,toString:oF}));function sF(){return`#${Kh(this.r)}${Kh(this.g)}${Kh(this.b)}`}function C1e(){return`#${Kh(this.r)}${Kh(this.g)}${Kh(this.b)}${Kh((isNaN(this.opacity)?1:this.opacity)*255)}`}function oF(){const t=qw(this.opacity);return`${t===1?"rgb(":"rgba("}${cf(this.r)}, ${cf(this.g)}, ${cf(this.b)}${t===1?")":`, ${t})`}`}function qw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Kh(t){return t=cf(t),(t<16?"0":"")+t.toString(16)}function lF(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Eo(t,e,n,a)}function _7(t){if(t instanceof Eo)return new Eo(t.h,t.s,t.l,t.opacity);if(t instanceof Bb||(t=Hv(t)),!t)return new Eo;if(t instanceof Eo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,i=Math.min(e,n,a),s=Math.max(e,n,a),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-a)/l+(n<a)*6:n===s?o=(a-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Eo(o,l,c,t.opacity)}function T1e(t,e,n,a){return arguments.length===1?_7(t):new Eo(t,e,n,a??1)}function Eo(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}HD(Eo,T1e,S7(Bb,{brighter(t){return t=t==null?zw:Math.pow(zw,t),new Eo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Uv:Math.pow(Uv,t),new Eo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,i=2*n-a;return new ns($k(t>=240?t-240:t+120,i,a),$k(t,i,a),$k(t<120?t+240:t-120,i,a),this.opacity)},clamp(){return new Eo(cF(this.h),Oj(this.s),Oj(this.l),qw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qw(this.opacity);return`${t===1?"hsl(":"hsla("}${cF(this.h)}, ${Oj(this.s)*100}%, ${Oj(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cF(t){return t=(t||0)%360,t<0?t+360:t}function Oj(t){return Math.max(0,Math.min(1,t||0))}function $k(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const GD=t=>()=>t;function k1e(t,e){return function(n){return t+n*e}}function A1e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}function E1e(t){return(t=+t)==1?C7:function(e,n){return n-e?A1e(e,n,t):GD(isNaN(e)?n:e)}}function C7(t,e){var n=e-t;return n?k1e(t,n):GD(isNaN(t)?e:t)}const uF=function t(e){var n=E1e(e);function a(i,s){var o=n((i=bP(i)).r,(s=bP(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),d=C7(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=c(f),i.opacity=d(f),i+""}}return a.gamma=t,a}(1);function P1e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,a=e.slice(),i;return function(s){for(i=0;i<n;++i)a[i]=t[i]*(1-s)+e[i]*s;return a}}function O1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function D1e(t,e){var n=e?e.length:0,a=t?Math.min(n,t.length):0,i=new Array(a),s=new Array(n),o;for(o=0;o<a;++o)i[o]=Ug(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<a;++o)s[o]=i[o](l);return s}}function M1e(t,e){var n=new Date;return t=+t,e=+e,function(a){return n.setTime(t*(1-a)+e*a),n}}function Uw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function I1e(t,e){var n={},a={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ug(t[i],e[i]):a[i]=e[i];return function(s){for(i in n)a[i]=n[i](s);return a}}var jP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bk=new RegExp(jP.source,"g");function R1e(t){return function(){return t}}function L1e(t){return function(e){return t(e)+""}}function F1e(t,e){var n=jP.lastIndex=Bk.lastIndex=0,a,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(a=jP.exec(t))&&(i=Bk.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(a=a[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Uw(a,i)})),n=Bk.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?L1e(c[0].x):R1e(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)l[(p=c[f]).i]=p.x(d);return l.join("")})}function Ug(t,e){var n=typeof e,a;return e==null||n==="boolean"?GD(e):(n==="number"?Uw:n==="string"?(a=Hv(e))?(e=a,uF):F1e:e instanceof Hv?uF:e instanceof Date?M1e:O1e(e)?P1e:Array.isArray(e)?D1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?I1e:Uw)(t,e)}function WD(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function $1e(t,e){e===void 0&&(e=t,t=Ug);for(var n=0,a=e.length-1,i=e[0],s=new Array(a<0?0:a);n<a;)s[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return s[l](o-l)}}function B1e(t){return function(){return t}}function Vw(t){return+t}var dF=[0,1];function Mi(t){return t}function wP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:B1e(isNaN(e)?NaN:.5)}function z1e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(a){return Math.max(t,Math.min(e,a))}}function q1e(t,e,n){var a=t[0],i=t[1],s=e[0],o=e[1];return i<a?(a=wP(i,a),s=n(o,s)):(a=wP(a,i),s=n(s,o)),function(l){return s(a(l))}}function U1e(t,e,n){var a=Math.min(t.length,e.length)-1,i=new Array(a),s=new Array(a),o=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<a;)i[o]=wP(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=$b(t,l,1,a)-1;return s[c](i[c](l))}}function zb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function pS(){var t=dF,e=dF,n=Ug,a,i,s,o=Mi,l,c,d;function f(){var g=Math.min(t.length,e.length);return o!==Mi&&(o=z1e(t[0],t[g-1])),l=g>2?U1e:q1e,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?s:(c||(c=l(t.map(a),e,n)))(a(o(g)))}return p.invert=function(g){return o(i((d||(d=l(e,t.map(a),Uw)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Vw),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=WD,f()},p.clamp=function(g){return arguments.length?(o=g?!0:Mi,f()):o!==Mi},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,x){return a=g,i=x,f()}}function YD(){return pS()(Mi,Mi)}function V1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Hw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,a=t.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+t.slice(n+1)]}function ug(t){return t=Hw(Math.abs(t)),t?t[1]:NaN}function H1e(t,e){return function(n,a){for(var i=n.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>a));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function G1e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var W1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gv(t){if(!(e=W1e.exec(t)))throw new Error("invalid format: "+t);var e;return new KD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Gv.prototype=KD.prototype;function KD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}KD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Y1e(t){e:for(var e=t.length,n=1,a=-1,i;n<e;++n)switch(t[n]){case".":a=i=n;break;case"0":a===0&&(a=n),i=n;break;default:if(!+t[n])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(i+1):t}var T7;function K1e(t,e){var n=Hw(t,e);if(!n)return t+"";var a=n[0],i=n[1],s=i-(T7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=a.length;return s===o?a:s>o?a+new Array(s-o+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+Hw(t,Math.max(0,e+s-1))[0]}function hF(t,e){var n=Hw(t,e);if(!n)return t+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const fF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:V1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>hF(t*100,e),r:hF,s:K1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pF(t){return t}var mF=Array.prototype.map,gF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Q1e(t){var e=t.grouping===void 0||t.thousands===void 0?pF:H1e(mF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?pF:G1e(mF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=Gv(p);var g=p.fill,x=p.align,b=p.sign,j=p.symbol,S=p.zero,_=p.width,T=p.comma,C=p.precision,P=p.trim,k=p.type;k==="n"?(T=!0,k="g"):fF[k]||(C===void 0&&(C=12),P=!0,k="g"),(S||g==="0"&&x==="=")&&(S=!0,g="0",x="=");var O=j==="$"?n:j==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",I=j==="$"?a:/[%p]/.test(k)?o:"",F=fF[k],B=/[defgprs%]/.test(k);C=C===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function $(L){var V=O,H=I,te,X,q;if(k==="c")H=F(L)+H,L="";else{L=+L;var Y=L<0||1/L<0;if(L=isNaN(L)?c:F(Math.abs(L),C),P&&(L=Y1e(L)),Y&&+L==0&&b!=="+"&&(Y=!1),V=(Y?b==="("?b:l:b==="-"||b==="("?"":b)+V,H=(k==="s"?gF[8+T7/3]:"")+H+(Y&&b==="("?")":""),B){for(te=-1,X=L.length;++te<X;)if(q=L.charCodeAt(te),48>q||q>57){H=(q===46?i+L.slice(te+1):L.slice(te))+H,L=L.slice(0,te);break}}}T&&!S&&(L=e(L,1/0));var se=V.length+L.length+H.length,G=se<_?new Array(_-se+1).join(g):"";switch(T&&S&&(L=e(G+L,G.length?_-H.length:1/0),G=""),x){case"<":L=V+L+H+G;break;case"=":L=V+G+L+H;break;case"^":L=G.slice(0,se=G.length>>1)+V+L+H+G.slice(se);break;default:L=G+V+L+H;break}return s(L)}return $.toString=function(){return p+""},$}function f(p,g){var x=d((p=Gv(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(ug(g)/3)))*3,j=Math.pow(10,-b),S=gF[8+b/3];return function(_){return x(j*_)+S}}return{format:d,formatPrefix:f}}var Dj,QD,k7;X1e({thousands:",",grouping:[3],currency:["$",""]});function X1e(t){return Dj=Q1e(t),QD=Dj.format,k7=Dj.formatPrefix,Dj}function J1e(t){return Math.max(0,-ug(Math.abs(t)))}function Z1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ug(e)/3)))*3-ug(Math.abs(t)))}function eje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ug(e)-ug(t))+1}function A7(t,e,n,a){var i=xP(t,e,n),s;switch(a=Gv(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return a.precision==null&&!isNaN(s=Z1e(i,o))&&(a.precision=s),k7(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(s=eje(i,Math.max(Math.abs(t),Math.abs(e))))&&(a.precision=s-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(s=J1e(i))&&(a.precision=s-(a.type==="%")*2);break}}return QD(a)}function vd(t){var e=t.domain;return t.ticks=function(n){var a=e();return gP(a[0],a[a.length-1],n??10)},t.tickFormat=function(n,a){var i=e();return A7(i[0],i[i.length-1],n??10,a)},t.nice=function(n){n==null&&(n=10);var a=e(),i=0,s=a.length-1,o=a[i],l=a[s],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=i,i=s,s=d);f-- >0;){if(d=yP(o,l,n),d===c)return a[i]=o,a[s]=l,e(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Gw(){var t=YD();return t.copy=function(){return zb(t,Gw())},no.apply(t,arguments),vd(t)}function E7(t){var e;function n(a){return a==null||isNaN(a=+a)?e:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(t=Array.from(a,Vw),n):t.slice()},n.unknown=function(a){return arguments.length?(e=a,n):e},n.copy=function(){return E7(t).unknown(e)},t=arguments.length?Array.from(t,Vw):[0,1],vd(n)}function P7(t,e){t=t.slice();var n=0,a=t.length-1,i=t[n],s=t[a],o;return s<i&&(o=n,n=a,a=o,o=i,i=s,s=o),t[n]=e.floor(i),t[a]=e.ceil(s),t}function yF(t){return Math.log(t)}function xF(t){return Math.exp(t)}function tje(t){return-Math.log(-t)}function nje(t){return-Math.exp(-t)}function rje(t){return isFinite(t)?+("1e"+t):t<0?0:t}function aje(t){return t===10?rje:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ije(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function vF(t){return(e,n)=>-t(-e,n)}function XD(t){const e=t(yF,xF),n=e.domain;let a=10,i,s;function o(){return i=ije(a),s=aje(a),n()[0]<0?(i=vF(i),s=vF(s),t(tje,nje)):t(yF,xF),e}return e.base=function(l){return arguments.length?(a=+l,o()):a},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),x=i(f),b,j;const S=l==null?10:+l;let _=[];if(!(a%1)&&x-g<S){if(g=Math.floor(g),x=Math.ceil(x),d>0){for(;g<=x;++g)for(b=1;b<a;++b)if(j=g<0?b/s(-g):b*s(g),!(j<d)){if(j>f)break;_.push(j)}}else for(;g<=x;++g)for(b=a-1;b>=1;--b)if(j=g>0?b/s(-g):b*s(g),!(j<d)){if(j>f)break;_.push(j)}_.length*2<S&&(_=gP(d,f,S))}else _=gP(g,x,Math.min(x-g,S)).map(s);return p?_.reverse():_},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Gv(c)).precision==null&&(c.trim=!0),c=QD(c)),l===1/0)return c;const d=Math.max(1,a*l/e.ticks().length);return f=>{let p=f/s(Math.round(i(f)));return p*a<a-.5&&(p*=a),p<=d?c(f):""}},e.nice=()=>n(P7(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function O7(){const t=XD(pS()).domain([1,10]);return t.copy=()=>zb(t,O7()).base(t.base()),no.apply(t,arguments),t}function bF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function jF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function JD(t){var e=1,n=t(bF(e),jF(e));return n.constant=function(a){return arguments.length?t(bF(e=+a),jF(e)):e},vd(n)}function D7(){var t=JD(pS());return t.copy=function(){return zb(t,D7()).constant(t.constant())},no.apply(t,arguments)}function wF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function sje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function oje(t){return t<0?-t*t:t*t}function ZD(t){var e=t(Mi,Mi),n=1;function a(){return n===1?t(Mi,Mi):n===.5?t(sje,oje):t(wF(n),wF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,a()):n},vd(e)}function eM(){var t=ZD(pS());return t.copy=function(){return zb(t,eM()).exponent(t.exponent())},no.apply(t,arguments),t}function lje(){return eM.apply(null,arguments).exponent(.5)}function NF(t){return Math.sign(t)*t*t}function cje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function M7(){var t=YD(),e=[0,1],n=!1,a;function i(s){var o=cje(t(s));return isNaN(o)?a:n?Math.round(o):o}return i.invert=function(s){return t.invert(NF(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Vw)).map(NF)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return M7(t.domain(),e).round(n).clamp(t.clamp()).unknown(a)},no.apply(i,arguments),vd(i)}function I7(){var t=[],e=[],n=[],a;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=p1e(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?a:e[$b(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(od),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.quantiles=function(){return n.slice()},s.copy=function(){return I7().domain(t).range(e).unknown(a)},no.apply(s,arguments)}function R7(){var t=0,e=1,n=1,a=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[$b(a,c,0,n)]:s}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,a[0]]:d>=n?[a[n-1],e]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return R7().domain([t,e]).range(i).unknown(s)},no.apply(vd(o),arguments)}function L7(){var t=[.5],e=[0,1],n,a=1;function i(s){return s!=null&&s<=s?e[$b(t,s,0,a)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),a=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),a=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return L7().domain(t).range(e).unknown(n)},no.apply(i,arguments)}const zk=new Date,qk=new Date;function Sa(t,e,n,a){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let d;do c.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<o);return c},i.filter=s=>Sa(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(zk.setTime(+s),qk.setTime(+o),t(zk),t(qk),Math.floor(n(zk,qk))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(a?o=>a(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Ww=Sa(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ww.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Sa(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ww);Ww.range;const jc=1e3,Js=jc*60,wc=Js*60,Rc=wc*24,tM=Rc*7,SF=Rc*30,Uk=Rc*365,Qh=Sa(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*jc)},(t,e)=>(e-t)/jc,t=>t.getUTCSeconds());Qh.range;const nM=Sa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*jc)},(t,e)=>{t.setTime(+t+e*Js)},(t,e)=>(e-t)/Js,t=>t.getMinutes());nM.range;const rM=Sa(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Js)},(t,e)=>(e-t)/Js,t=>t.getUTCMinutes());rM.range;const aM=Sa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*jc-t.getMinutes()*Js)},(t,e)=>{t.setTime(+t+e*wc)},(t,e)=>(e-t)/wc,t=>t.getHours());aM.range;const iM=Sa(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*wc)},(t,e)=>(e-t)/wc,t=>t.getUTCHours());iM.range;const qb=Sa(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Js)/Rc,t=>t.getDate()-1);qb.range;const mS=Sa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rc,t=>t.getUTCDate()-1);mS.range;const F7=Sa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rc,t=>Math.floor(t/Rc));F7.range;function Mf(t){return Sa(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Js)/tM)}const gS=Mf(0),Yw=Mf(1),uje=Mf(2),dje=Mf(3),dg=Mf(4),hje=Mf(5),fje=Mf(6);gS.range;Yw.range;uje.range;dje.range;dg.range;hje.range;fje.range;function If(t){return Sa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/tM)}const yS=If(0),Kw=If(1),pje=If(2),mje=If(3),hg=If(4),gje=If(5),yje=If(6);yS.range;Kw.range;pje.range;mje.range;hg.range;gje.range;yje.range;const sM=Sa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sM.range;const oM=Sa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());oM.range;const Lc=Sa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Lc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Sa(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Lc.range;const Fc=Sa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Fc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Sa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Fc.range;function $7(t,e,n,a,i,s){const o=[[Qh,1,jc],[Qh,5,5*jc],[Qh,15,15*jc],[Qh,30,30*jc],[s,1,Js],[s,5,5*Js],[s,15,15*Js],[s,30,30*Js],[i,1,wc],[i,3,3*wc],[i,6,6*wc],[i,12,12*wc],[a,1,Rc],[a,2,2*Rc],[n,1,tM],[e,1,SF],[e,3,3*SF],[t,1,Uk]];function l(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const x=p&&typeof p.range=="function"?p:c(d,f,p),b=x?x.range(d,+f+1):[];return g?b.reverse():b}function c(d,f,p){const g=Math.abs(f-d)/p,x=UD(([,,S])=>S).right(o,g);if(x===o.length)return t.every(xP(d/Uk,f/Uk,p));if(x===0)return Ww.every(Math.max(xP(d,f,p),1));const[b,j]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return b.every(j)}return[l,c]}const[xje,vje]=$7(Fc,oM,yS,F7,iM,rM),[bje,jje]=$7(Lc,sM,gS,qb,aM,nM);function Vk(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Hk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function wje(t){var e=t.dateTime,n=t.date,a=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=Xx(i),f=Jx(i),p=Xx(s),g=Jx(s),x=Xx(o),b=Jx(o),j=Xx(l),S=Jx(l),_=Xx(c),T=Jx(c),C={a:Y,A:se,b:G,B:z,c:null,d:EF,e:EF,f:Hje,g:twe,G:rwe,H:qje,I:Uje,j:Vje,L:B7,m:Gje,M:Wje,p:ce,q:we,Q:DF,s:MF,S:Yje,u:Kje,U:Qje,V:Xje,w:Jje,W:Zje,x:null,X:null,y:ewe,Y:nwe,Z:awe,"%":OF},P={a:K,A:Ie,b:We,B:Re,c:null,d:PF,e:PF,f:lwe,g:xwe,G:bwe,H:iwe,I:swe,j:owe,L:q7,m:cwe,M:uwe,p:Fe,q:ve,Q:DF,s:MF,S:dwe,u:hwe,U:fwe,V:pwe,w:mwe,W:gwe,x:null,X:null,y:ywe,Y:vwe,Z:jwe,"%":OF},k={a:$,A:L,b:V,B:H,c:te,d:kF,e:kF,f:Fje,g:TF,G:CF,H:AF,I:AF,j:Mje,L:Lje,m:Dje,M:Ije,p:B,q:Oje,Q:Bje,s:zje,S:Rje,u:Tje,U:kje,V:Aje,w:Cje,W:Eje,x:X,X:q,y:TF,Y:CF,Z:Pje,"%":$je};C.x=O(n,C),C.X=O(a,C),C.c=O(e,C),P.x=O(n,P),P.X=O(a,P),P.c=O(e,P);function O(ae,je){return function(ue){var me=[],oe=-1,Q=0,ie=ae.length,xe,ee,Se;for(ue instanceof Date||(ue=new Date(+ue));++oe<ie;)ae.charCodeAt(oe)===37&&(me.push(ae.slice(Q,oe)),(ee=_F[xe=ae.charAt(++oe)])!=null?xe=ae.charAt(++oe):ee=xe==="e"?" ":"0",(Se=je[xe])&&(xe=Se(ue,ee)),me.push(xe),Q=oe+1);return me.push(ae.slice(Q,oe)),me.join("")}}function I(ae,je){return function(ue){var me=Qx(1900,void 0,1),oe=F(me,ae,ue+="",0),Q,ie;if(oe!=ue.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(je&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Q=Hk(Qx(me.y,0,1)),ie=Q.getUTCDay(),Q=ie>4||ie===0?Kw.ceil(Q):Kw(Q),Q=mS.offset(Q,(me.V-1)*7),me.y=Q.getUTCFullYear(),me.m=Q.getUTCMonth(),me.d=Q.getUTCDate()+(me.w+6)%7):(Q=Vk(Qx(me.y,0,1)),ie=Q.getDay(),Q=ie>4||ie===0?Yw.ceil(Q):Yw(Q),Q=qb.offset(Q,(me.V-1)*7),me.y=Q.getFullYear(),me.m=Q.getMonth(),me.d=Q.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),ie="Z"in me?Hk(Qx(me.y,0,1)).getUTCDay():Vk(Qx(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(ie+5)%7:me.w+me.U*7-(ie+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,Hk(me)):Vk(me)}}function F(ae,je,ue,me){for(var oe=0,Q=je.length,ie=ue.length,xe,ee;oe<Q;){if(me>=ie)return-1;if(xe=je.charCodeAt(oe++),xe===37){if(xe=je.charAt(oe++),ee=k[xe in _F?je.charAt(oe++):xe],!ee||(me=ee(ae,ue,me))<0)return-1}else if(xe!=ue.charCodeAt(me++))return-1}return me}function B(ae,je,ue){var me=d.exec(je.slice(ue));return me?(ae.p=f.get(me[0].toLowerCase()),ue+me[0].length):-1}function $(ae,je,ue){var me=x.exec(je.slice(ue));return me?(ae.w=b.get(me[0].toLowerCase()),ue+me[0].length):-1}function L(ae,je,ue){var me=p.exec(je.slice(ue));return me?(ae.w=g.get(me[0].toLowerCase()),ue+me[0].length):-1}function V(ae,je,ue){var me=_.exec(je.slice(ue));return me?(ae.m=T.get(me[0].toLowerCase()),ue+me[0].length):-1}function H(ae,je,ue){var me=j.exec(je.slice(ue));return me?(ae.m=S.get(me[0].toLowerCase()),ue+me[0].length):-1}function te(ae,je,ue){return F(ae,e,je,ue)}function X(ae,je,ue){return F(ae,n,je,ue)}function q(ae,je,ue){return F(ae,a,je,ue)}function Y(ae){return o[ae.getDay()]}function se(ae){return s[ae.getDay()]}function G(ae){return c[ae.getMonth()]}function z(ae){return l[ae.getMonth()]}function ce(ae){return i[+(ae.getHours()>=12)]}function we(ae){return 1+~~(ae.getMonth()/3)}function K(ae){return o[ae.getUTCDay()]}function Ie(ae){return s[ae.getUTCDay()]}function We(ae){return c[ae.getUTCMonth()]}function Re(ae){return l[ae.getUTCMonth()]}function Fe(ae){return i[+(ae.getUTCHours()>=12)]}function ve(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var je=O(ae+="",C);return je.toString=function(){return ae},je},parse:function(ae){var je=I(ae+="",!1);return je.toString=function(){return ae},je},utcFormat:function(ae){var je=O(ae+="",P);return je.toString=function(){return ae},je},utcParse:function(ae){var je=I(ae+="",!0);return je.toString=function(){return ae},je}}}var _F={"-":"",_:" ",0:"0"},Ia=/^\s*\d+/,Nje=/^%/,Sje=/[\\^$*+?|[\]().{}]/g;function Qn(t,e,n){var a=t<0?"-":"",i=(a?-t:t)+"",s=i.length;return a+(s<n?new Array(n-s+1).join(e)+i:i)}function _je(t){return t.replace(Sje,"\\$&")}function Xx(t){return new RegExp("^(?:"+t.map(_je).join("|")+")","i")}function Jx(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Cje(t,e,n){var a=Ia.exec(e.slice(n,n+1));return a?(t.w=+a[0],n+a[0].length):-1}function Tje(t,e,n){var a=Ia.exec(e.slice(n,n+1));return a?(t.u=+a[0],n+a[0].length):-1}function kje(t,e,n){var a=Ia.exec(e.slice(n,n+2));return a?(t.U=+a[0],n+a[0].length):-1}function Aje(t,e,n){var a=Ia.exec(e.slice(n,n+2));return a?(t.V=+a[0],n+a[0].length):-1}function Eje(t,e,n){var a=Ia.exec(e.slice(n,n+2));return a?(t.W=+a[0],n+a[0].length):-1}function CF(t,e,n){var a=Ia.exec(e.slice(n,n+4));return a?(t.y=+a[0],n+a[0].length):-1}function TF(t,e,n){var a=Ia.exec(e.slice(n,n+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function Pje(t,e,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function Oje(t,e,n){var a=Ia.exec(e.slice(n,n+1));return a?(t.q=a[0]*3-3,n+a[0].length):-1}function Dje(t,e,n){var a=Ia.exec(e.slice(n,n+2));return a?(t.m=a[0]-1,n+a[0].length):-1}function kF(t,e,n){var a=Ia.exec(e.slice(n,n+2));return a?(t.d=+a[0],n+a[0].length):-1}function Mje(t,e,n){var a=Ia.exec(e.slice(n,n+3));return a?(t.m=0,t.d=+a[0],n+a[0].length):-1}function AF(t,e,n){var a=Ia.exec(e.slice(n,n+2));return a?(t.H=+a[0],n+a[0].length):-1}function Ije(t,e,n){var a=Ia.exec(e.slice(n,n+2));return a?(t.M=+a[0],n+a[0].length):-1}function Rje(t,e,n){var a=Ia.exec(e.slice(n,n+2));return a?(t.S=+a[0],n+a[0].length):-1}function Lje(t,e,n){var a=Ia.exec(e.slice(n,n+3));return a?(t.L=+a[0],n+a[0].length):-1}function Fje(t,e,n){var a=Ia.exec(e.slice(n,n+6));return a?(t.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function $je(t,e,n){var a=Nje.exec(e.slice(n,n+1));return a?n+a[0].length:-1}function Bje(t,e,n){var a=Ia.exec(e.slice(n));return a?(t.Q=+a[0],n+a[0].length):-1}function zje(t,e,n){var a=Ia.exec(e.slice(n));return a?(t.s=+a[0],n+a[0].length):-1}function EF(t,e){return Qn(t.getDate(),e,2)}function qje(t,e){return Qn(t.getHours(),e,2)}function Uje(t,e){return Qn(t.getHours()%12||12,e,2)}function Vje(t,e){return Qn(1+qb.count(Lc(t),t),e,3)}function B7(t,e){return Qn(t.getMilliseconds(),e,3)}function Hje(t,e){return B7(t,e)+"000"}function Gje(t,e){return Qn(t.getMonth()+1,e,2)}function Wje(t,e){return Qn(t.getMinutes(),e,2)}function Yje(t,e){return Qn(t.getSeconds(),e,2)}function Kje(t){var e=t.getDay();return e===0?7:e}function Qje(t,e){return Qn(gS.count(Lc(t)-1,t),e,2)}function z7(t){var e=t.getDay();return e>=4||e===0?dg(t):dg.ceil(t)}function Xje(t,e){return t=z7(t),Qn(dg.count(Lc(t),t)+(Lc(t).getDay()===4),e,2)}function Jje(t){return t.getDay()}function Zje(t,e){return Qn(Yw.count(Lc(t)-1,t),e,2)}function ewe(t,e){return Qn(t.getFullYear()%100,e,2)}function twe(t,e){return t=z7(t),Qn(t.getFullYear()%100,e,2)}function nwe(t,e){return Qn(t.getFullYear()%1e4,e,4)}function rwe(t,e){var n=t.getDay();return t=n>=4||n===0?dg(t):dg.ceil(t),Qn(t.getFullYear()%1e4,e,4)}function awe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qn(e/60|0,"0",2)+Qn(e%60,"0",2)}function PF(t,e){return Qn(t.getUTCDate(),e,2)}function iwe(t,e){return Qn(t.getUTCHours(),e,2)}function swe(t,e){return Qn(t.getUTCHours()%12||12,e,2)}function owe(t,e){return Qn(1+mS.count(Fc(t),t),e,3)}function q7(t,e){return Qn(t.getUTCMilliseconds(),e,3)}function lwe(t,e){return q7(t,e)+"000"}function cwe(t,e){return Qn(t.getUTCMonth()+1,e,2)}function uwe(t,e){return Qn(t.getUTCMinutes(),e,2)}function dwe(t,e){return Qn(t.getUTCSeconds(),e,2)}function hwe(t){var e=t.getUTCDay();return e===0?7:e}function fwe(t,e){return Qn(yS.count(Fc(t)-1,t),e,2)}function U7(t){var e=t.getUTCDay();return e>=4||e===0?hg(t):hg.ceil(t)}function pwe(t,e){return t=U7(t),Qn(hg.count(Fc(t),t)+(Fc(t).getUTCDay()===4),e,2)}function mwe(t){return t.getUTCDay()}function gwe(t,e){return Qn(Kw.count(Fc(t)-1,t),e,2)}function ywe(t,e){return Qn(t.getUTCFullYear()%100,e,2)}function xwe(t,e){return t=U7(t),Qn(t.getUTCFullYear()%100,e,2)}function vwe(t,e){return Qn(t.getUTCFullYear()%1e4,e,4)}function bwe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?hg(t):hg.ceil(t),Qn(t.getUTCFullYear()%1e4,e,4)}function jwe(){return"+0000"}function OF(){return"%"}function DF(t){return+t}function MF(t){return Math.floor(+t/1e3)}var xm,V7,H7;wwe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wwe(t){return xm=wje(t),V7=xm.format,xm.parse,H7=xm.utcFormat,xm.utcParse,xm}function Nwe(t){return new Date(t)}function Swe(t){return t instanceof Date?+t:+new Date(+t)}function lM(t,e,n,a,i,s,o,l,c,d){var f=YD(),p=f.invert,g=f.domain,x=d(".%L"),b=d(":%S"),j=d("%I:%M"),S=d("%I %p"),_=d("%a %d"),T=d("%b %d"),C=d("%B"),P=d("%Y");function k(O){return(c(O)<O?x:l(O)<O?b:o(O)<O?j:s(O)<O?S:a(O)<O?i(O)<O?_:T:n(O)<O?C:P)(O)}return f.invert=function(O){return new Date(p(O))},f.domain=function(O){return arguments.length?g(Array.from(O,Swe)):g().map(Nwe)},f.ticks=function(O){var I=g();return t(I[0],I[I.length-1],O??10)},f.tickFormat=function(O,I){return I==null?k:d(I)},f.nice=function(O){var I=g();return(!O||typeof O.range!="function")&&(O=e(I[0],I[I.length-1],O??10)),O?g(P7(I,O)):f},f.copy=function(){return zb(f,lM(t,e,n,a,i,s,o,l,c,d))},f}function _we(){return no.apply(lM(bje,jje,Lc,sM,gS,qb,aM,nM,Qh,V7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Cwe(){return no.apply(lM(xje,vje,Fc,oM,yS,mS,iM,rM,Qh,H7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xS(){var t=0,e=1,n,a,i,s,o=Mi,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(s(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),a=s(e=+e),i=n===a?0:1/(a-n),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function f(p){return function(g){var x,b;return arguments.length?([x,b]=g,o=p(x,b),d):[o(0),o(1)]}}return d.range=f(Ug),d.rangeRound=f(WD),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return s=p,n=p(t),a=p(e),i=n===a?0:1/(a-n),d}}function bd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function G7(){var t=vd(xS()(Mi));return t.copy=function(){return bd(t,G7())},Gc.apply(t,arguments)}function W7(){var t=XD(xS()).domain([1,10]);return t.copy=function(){return bd(t,W7()).base(t.base())},Gc.apply(t,arguments)}function Y7(){var t=JD(xS());return t.copy=function(){return bd(t,Y7()).constant(t.constant())},Gc.apply(t,arguments)}function cM(){var t=ZD(xS());return t.copy=function(){return bd(t,cM()).exponent(t.exponent())},Gc.apply(t,arguments)}function Twe(){return cM.apply(null,arguments).exponent(.5)}function K7(){var t=[],e=Mi;function n(a){if(a!=null&&!isNaN(a=+a))return e(($b(t,a,1)-1)/(t.length-1))}return n.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let i of a)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(od),n},n.interpolator=function(a){return arguments.length?(e=a,n):e},n.range=function(){return t.map((a,i)=>e(i/(t.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(i,s)=>f1e(t,s/a))},n.copy=function(){return K7(e).domain(t)},Gc.apply(n,arguments)}function vS(){var t=0,e=.5,n=1,a=1,i,s,o,l,c,d=Mi,f,p=!1,g;function x(j){return isNaN(j=+j)?g:(j=.5+((j=+f(j))-s)*(a*j<a*s?l:c),d(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([t,e,n]=j,i=f(t=+t),s=f(e=+e),o=f(n=+n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x):[t,e,n]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(d=j,x):d};function b(j){return function(S){var _,T,C;return arguments.length?([_,T,C]=S,d=$1e(j,[_,T,C]),x):[d(0),d(.5),d(1)]}}return x.range=b(Ug),x.rangeRound=b(WD),x.unknown=function(j){return arguments.length?(g=j,x):g},function(j){return f=j,i=j(t),s=j(e),o=j(n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x}}function Q7(){var t=vd(vS()(Mi));return t.copy=function(){return bd(t,Q7())},Gc.apply(t,arguments)}function X7(){var t=XD(vS()).domain([.1,1,10]);return t.copy=function(){return bd(t,X7()).base(t.base())},Gc.apply(t,arguments)}function J7(){var t=JD(vS());return t.copy=function(){return bd(t,J7()).constant(t.constant())},Gc.apply(t,arguments)}function uM(){var t=ZD(vS());return t.copy=function(){return bd(t,uM()).exponent(t.exponent())},Gc.apply(t,arguments)}function kwe(){return uM.apply(null,arguments).exponent(.5)}const IF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:qv,scaleDiverging:Q7,scaleDivergingLog:X7,scaleDivergingPow:uM,scaleDivergingSqrt:kwe,scaleDivergingSymlog:J7,scaleIdentity:E7,scaleImplicit:vP,scaleLinear:Gw,scaleLog:O7,scaleOrdinal:VD,scalePoint:bv,scalePow:eM,scaleQuantile:I7,scaleQuantize:R7,scaleRadial:M7,scaleSequential:G7,scaleSequentialLog:W7,scaleSequentialPow:cM,scaleSequentialQuantile:K7,scaleSequentialSqrt:Twe,scaleSequentialSymlog:Y7,scaleSqrt:lje,scaleSymlog:D7,scaleThreshold:L7,scaleTime:_we,scaleUtc:Cwe,tickFormat:A7},Symbol.toStringTag,{value:"Module"}));var Gk,RF;function bS(){if(RF)return Gk;RF=1;var t=$g();function e(n,a,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=a(l);if(c!=null&&(d===void 0?c===c&&!t(c):i(c,d)))var d=c,f=l}return f}return Gk=e,Gk}var Wk,LF;function Z7(){if(LF)return Wk;LF=1;function t(e,n){return e>n}return Wk=t,Wk}var Yk,FF;function Awe(){if(FF)return Yk;FF=1;var t=bS(),e=Z7(),n=qg();function a(i){return i&&i.length?t(i,n,e):void 0}return Yk=a,Yk}var Ewe=Awe();const ad=Un(Ewe);var Kk,$F;function eV(){if($F)return Kk;$F=1;function t(e,n){return e<n}return Kk=t,Kk}var Qk,BF;function Pwe(){if(BF)return Qk;BF=1;var t=bS(),e=eV(),n=qg();function a(i){return i&&i.length?t(i,n,e):void 0}return Qk=a,Qk}var Owe=Pwe();const jS=Un(Owe);var Xk,zF;function Dwe(){if(zF)return Xk;zF=1;var t=CD(),e=Ll(),n=l7(),a=ls();function i(s,o){var l=a(s)?t:n;return l(s,e(o,3))}return Xk=i,Xk}var Jk,qF;function Mwe(){if(qF)return Jk;qF=1;var t=s7(),e=Dwe();function n(a,i){return t(e(a,i),1)}return Jk=n,Jk}var Iwe=Mwe();const Rwe=Un(Iwe);var Zk,UF;function Lwe(){if(UF)return Zk;UF=1;var t=$D();function e(n,a){return t(n,a)}return Zk=e,Zk}var Fwe=Lwe();const Cf=Un(Fwe);var Vg=1e9,$we={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hM,qr=!0,eo="[DecimalError] ",uf=eo+"Invalid argument: ",dM=eo+"Exponent out of range: ",Hg=Math.floor,qh=Math.pow,Bwe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_s,Ea=1e7,Rr=7,tV=9007199254740991,Qw=Hg(tV/Rr),Dt={};Dt.absoluteValue=Dt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Dt.comparedTo=Dt.cmp=function(t){var e,n,a,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(a=s.d.length,i=t.d.length,e=0,n=a<i?a:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return a===i?0:a>i^s.s<0?1:-1};Dt.decimalPlaces=Dt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Rr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Dt.dividedBy=Dt.div=function(t){return Ac(this,new this.constructor(t))};Dt.dividedToIntegerBy=Dt.idiv=function(t){var e=this,n=e.constructor;return Sr(Ac(e,new n(t),0,1),n.precision)};Dt.equals=Dt.eq=function(t){return!this.cmp(t)};Dt.exponent=function(){return ga(this)};Dt.greaterThan=Dt.gt=function(t){return this.cmp(t)>0};Dt.greaterThanOrEqualTo=Dt.gte=function(t){return this.cmp(t)>=0};Dt.isInteger=Dt.isint=function(){return this.e>this.d.length-2};Dt.isNegative=Dt.isneg=function(){return this.s<0};Dt.isPositive=Dt.ispos=function(){return this.s>0};Dt.isZero=function(){return this.s===0};Dt.lessThan=Dt.lt=function(t){return this.cmp(t)<0};Dt.lessThanOrEqualTo=Dt.lte=function(t){return this.cmp(t)<1};Dt.logarithm=Dt.log=function(t){var e,n=this,a=n.constructor,i=a.precision,s=i+5;if(t===void 0)t=new a(10);else if(t=new a(t),t.s<1||t.eq(_s))throw Error(eo+"NaN");if(n.s<1)throw Error(eo+(n.s?"NaN":"-Infinity"));return n.eq(_s)?new a(0):(qr=!1,e=Ac(Wv(n,s),Wv(t,s),s),qr=!0,Sr(e,i))};Dt.minus=Dt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?aV(e,t):nV(e,(t.s=-t.s,t))};Dt.modulo=Dt.mod=function(t){var e,n=this,a=n.constructor,i=a.precision;if(t=new a(t),!t.s)throw Error(eo+"NaN");return n.s?(qr=!1,e=Ac(n,t,0,1).times(t),qr=!0,n.minus(e)):Sr(new a(n),i)};Dt.naturalExponential=Dt.exp=function(){return rV(this)};Dt.naturalLogarithm=Dt.ln=function(){return Wv(this)};Dt.negated=Dt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Dt.plus=Dt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?nV(e,t):aV(e,(t.s=-t.s,t))};Dt.precision=Dt.sd=function(t){var e,n,a,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(uf+t);if(e=ga(i)+1,a=i.d.length-1,n=a*Rr+1,a=i.d[a],a){for(;a%10==0;a/=10)n--;for(a=i.d[0];a>=10;a/=10)n++}return t&&e>n?e:n};Dt.squareRoot=Dt.sqrt=function(){var t,e,n,a,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(eo+"NaN")}for(t=ga(l),qr=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Tl(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Hg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),a=new c(e)):a=new c(i.toString()),n=c.precision,i=o=n+3;;)if(s=a,a=s.plus(Ac(l,s,o+2)).times(.5),Tl(s.d).slice(0,o)===(e=Tl(a.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Sr(s,n+1,0),s.times(s).eq(l)){a=s;break}}else if(e!="9999")break;o+=4}return qr=!0,Sr(a,n)};Dt.times=Dt.mul=function(t){var e,n,a,i,s,o,l,c,d,f=this,p=f.constructor,g=f.d,x=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,d=x.length,c<d&&(s=g,g=x,x=s,o=c,c=d,d=o),s=[],o=c+d,a=o;a--;)s.push(0);for(a=d;--a>=0;){for(e=0,i=c+a;i>a;)l=s[i]+x[a]*g[i-a-1]+e,s[i--]=l%Ea|0,e=l/Ea|0;s[i]=(s[i]+e)%Ea|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,qr?Sr(t,p.precision):t};Dt.toDecimalPlaces=Dt.todp=function(t,e){var n=this,a=n.constructor;return n=new a(n),t===void 0?n:(Dl(t,0,Vg),e===void 0?e=a.rounding:Dl(e,0,8),Sr(n,t+ga(n)+1,e))};Dt.toExponential=function(t,e){var n,a=this,i=a.constructor;return t===void 0?n=Tf(a,!0):(Dl(t,0,Vg),e===void 0?e=i.rounding:Dl(e,0,8),a=Sr(new i(a),t+1,e),n=Tf(a,!0,t+1)),n};Dt.toFixed=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?Tf(i):(Dl(t,0,Vg),e===void 0?e=s.rounding:Dl(e,0,8),a=Sr(new s(i),t+ga(i)+1,e),n=Tf(a.abs(),!1,t+ga(a)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Dt.toInteger=Dt.toint=function(){var t=this,e=t.constructor;return Sr(new e(t),ga(t)+1,e.rounding)};Dt.toNumber=function(){return+this};Dt.toPower=Dt.pow=function(t){var e,n,a,i,s,o,l=this,c=l.constructor,d=12,f=+(t=new c(t));if(!t.s)return new c(_s);if(l=new c(l),!l.s){if(t.s<1)throw Error(eo+"Infinity");return l}if(l.eq(_s))return l;if(a=c.precision,t.eq(_s))return Sr(l,a);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=f<0?-f:f)<=tV){for(i=new c(_s),e=Math.ceil(a/Rr+4),qr=!1;n%2&&(i=i.times(l),HF(i.d,e)),n=Hg(n/2),n!==0;)l=l.times(l),HF(l.d,e);return qr=!0,t.s<0?new c(_s).div(i):Sr(i,a)}}else if(s<0)throw Error(eo+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,qr=!1,i=t.times(Wv(l,a+d)),qr=!0,i=rV(i),i.s=s,i};Dt.toPrecision=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?(n=ga(i),a=Tf(i,n<=s.toExpNeg||n>=s.toExpPos)):(Dl(t,1,Vg),e===void 0?e=s.rounding:Dl(e,0,8),i=Sr(new s(i),t,e),n=ga(i),a=Tf(i,t<=n||n<=s.toExpNeg,t)),a};Dt.toSignificantDigits=Dt.tosd=function(t,e){var n=this,a=n.constructor;return t===void 0?(t=a.precision,e=a.rounding):(Dl(t,1,Vg),e===void 0?e=a.rounding:Dl(e,0,8)),Sr(new a(n),t,e)};Dt.toString=Dt.valueOf=Dt.val=Dt.toJSON=Dt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ga(t),n=t.constructor;return Tf(t,e<=n.toExpNeg||e>=n.toExpPos)};function nV(t,e){var n,a,i,s,o,l,c,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),qr?Sr(e,p):e;if(c=t.d,d=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(a=c,s=-s,l=d.length):(a=d,i=o,l=c.length),o=Math.ceil(p/Rr),l=o>l?o+1:l+1,s>l&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,a=d,d=c,c=a),n=0;s;)n=(c[--s]=c[s]+d[s]+n)/Ea|0,c[s]%=Ea;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,qr?Sr(e,p):e}function Dl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(uf+t)}function Tl(t){var e,n,a,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)a=t[e]+"",n=Rr-a.length,n&&(s+=Gu(n)),s+=a;o=t[e],a=o+"",n=Rr-a.length,n&&(s+=Gu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Ac=function(){function t(a,i){var s,o=0,l=a.length;for(a=a.slice();l--;)s=a[l]*i+o,a[l]=s%Ea|0,o=s/Ea|0;return o&&a.unshift(o),a}function e(a,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(a[l]!=i[l]){c=a[l]>i[l]?1:-1;break}return c}function n(a,i,s){for(var o=0;s--;)a[s]-=o,o=a[s]<i[s]?1:0,a[s]=o*Ea+a[s]-i[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,i,s,o){var l,c,d,f,p,g,x,b,j,S,_,T,C,P,k,O,I,F,B=a.constructor,$=a.s==i.s?1:-1,L=a.d,V=i.d;if(!a.s)return new B(a);if(!i.s)throw Error(eo+"Division by zero");for(c=a.e-i.e,I=V.length,k=L.length,x=new B($),b=x.d=[],d=0;V[d]==(L[d]||0);)++d;if(V[d]>(L[d]||0)&&--c,s==null?T=s=B.precision:o?T=s+(ga(a)-ga(i))+1:T=s,T<0)return new B(0);if(T=T/Rr+2|0,d=0,I==1)for(f=0,V=V[0],T++;(d<k||f)&&T--;d++)C=f*Ea+(L[d]||0),b[d]=C/V|0,f=C%V|0;else{for(f=Ea/(V[0]+1)|0,f>1&&(V=t(V,f),L=t(L,f),I=V.length,k=L.length),P=I,j=L.slice(0,I),S=j.length;S<I;)j[S++]=0;F=V.slice(),F.unshift(0),O=V[0],V[1]>=Ea/2&&++O;do f=0,l=e(V,j,I,S),l<0?(_=j[0],I!=S&&(_=_*Ea+(j[1]||0)),f=_/O|0,f>1?(f>=Ea&&(f=Ea-1),p=t(V,f),g=p.length,S=j.length,l=e(p,j,g,S),l==1&&(f--,n(p,I<g?F:V,g))):(f==0&&(l=f=1),p=V.slice()),g=p.length,g<S&&p.unshift(0),n(j,p,S),l==-1&&(S=j.length,l=e(V,j,I,S),l<1&&(f++,n(j,I<S?F:V,S))),S=j.length):l===0&&(f++,j=[0]),b[d++]=f,l&&j[0]?j[S++]=L[P]||0:(j=[L[P]],S=1);while((P++<k||j[0]!==void 0)&&T--)}return b[0]||b.shift(),x.e=c,Sr(x,o?s+ga(x)+1:s)}}();function rV(t,e){var n,a,i,s,o,l,c=0,d=0,f=t.constructor,p=f.precision;if(ga(t)>16)throw Error(dM+ga(t));if(!t.s)return new f(_s);for(qr=!1,l=p,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(a=Math.log(qh(2,d))/Math.LN10*2+5|0,l+=a,n=i=s=new f(_s),f.precision=l;;){if(i=Sr(i.times(t),l),n=n.times(++c),o=s.plus(Ac(i,n,l)),Tl(o.d).slice(0,l)===Tl(s.d).slice(0,l)){for(;d--;)s=Sr(s.times(s),l);return f.precision=p,e==null?(qr=!0,Sr(s,p)):s}s=o}}function ga(t){for(var e=t.e*Rr,n=t.d[0];n>=10;n/=10)e++;return e}function eA(t,e,n){if(e>t.LN10.sd())throw qr=!0,n&&(t.precision=n),Error(eo+"LN10 precision limit exceeded");return Sr(new t(t.LN10),e)}function Gu(t){for(var e="";t--;)e+="0";return e}function Wv(t,e){var n,a,i,s,o,l,c,d,f,p=1,g=10,x=t,b=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(eo+(x.s?"NaN":"-Infinity"));if(x.eq(_s))return new j(0);if(e==null?(qr=!1,d=S):d=e,x.eq(10))return e==null&&(qr=!0),eA(j,d);if(d+=g,j.precision=d,n=Tl(b),a=n.charAt(0),s=ga(x),Math.abs(s)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)x=x.times(t),n=Tl(x.d),a=n.charAt(0),p++;s=ga(x),a>1?(x=new j("0."+n),s++):x=new j(a+"."+n.slice(1))}else return c=eA(j,d+2,S).times(s+""),x=Wv(new j(a+"."+n.slice(1)),d-g).plus(c),j.precision=S,e==null?(qr=!0,Sr(x,S)):x;for(l=o=x=Ac(x.minus(_s),x.plus(_s),d),f=Sr(x.times(x),d),i=3;;){if(o=Sr(o.times(f),d),c=l.plus(Ac(o,new j(i),d)),Tl(c.d).slice(0,d)===Tl(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(eA(j,d+2,S).times(s+""))),l=Ac(l,new j(p),d),j.precision=S,e==null?(qr=!0,Sr(l,S)):l;l=c,i+=2}}function VF(t,e){var n,a,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(n<0&&(n=a),n+=+e.slice(a+1),e=e.substring(0,a)):n<0&&(n=e.length),a=0;e.charCodeAt(a)===48;)++a;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(a,i),e){if(i-=a,n=n-a-1,t.e=Hg(n/Rr),t.d=[],a=(n+1)%Rr,n<0&&(a+=Rr),a<i){for(a&&t.d.push(+e.slice(0,a)),i-=Rr;a<i;)t.d.push(+e.slice(a,a+=Rr));e=e.slice(a),a=Rr-e.length}else a-=i;for(;a--;)e+="0";if(t.d.push(+e),qr&&(t.e>Qw||t.e<-Qw))throw Error(dM+n)}else t.s=0,t.e=0,t.d=[0];return t}function Sr(t,e,n){var a,i,s,o,l,c,d,f,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(a=e-o,a<0)a+=Rr,i=e,d=p[f=0];else{if(f=Math.ceil((a+1)/Rr),s=p.length,f>=s)return t;for(d=s=p[f],o=1;s>=10;s/=10)o++;a%=Rr,i=a-Rr+o}if(n!==void 0&&(s=qh(10,o-i-1),l=d/s%10|0,c=e<0||p[f+1]!==void 0||d%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?i>0?d/qh(10,o-i):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(s=ga(t),p.length=1,e=e-s-1,p[0]=qh(10,(Rr-e%Rr)%Rr),t.e=Hg(-e/Rr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(a==0?(p.length=f,s=1,f--):(p.length=f+1,s=qh(10,Rr-a),p[f]=i>0?(d/qh(10,o-i)%qh(10,i)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==Ea&&(p[0]=1,++t.e);break}else{if(p[f]+=s,p[f]!=Ea)break;p[f--]=0,s=1}for(a=p.length;p[--a]===0;)p.pop();if(qr&&(t.e>Qw||t.e<-Qw))throw Error(dM+ga(t));return t}function aV(t,e){var n,a,i,s,o,l,c,d,f,p,g=t.constructor,x=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),qr?Sr(e,x):e;if(c=t.d,p=e.d,a=e.e,d=t.e,c=c.slice(),o=d-a,o){for(f=o<0,f?(n=c,o=-o,l=p.length):(n=p,a=d,l=c.length),i=Math.max(Math.ceil(x/Rr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=p.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){f=c[i]<p[i];break}o=0}for(f&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(s=i;s&&c[--s]===0;)c[s]=Ea-1;--c[s],c[i]+=Ea}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(e.d=c,e.e=a,qr?Sr(e,x):e):new g(0)}function Tf(t,e,n){var a,i=ga(t),s=Tl(t.d),o=s.length;return e?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Gu(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Gu(-i-1)+s,n&&(a=n-o)>0&&(s+=Gu(a))):i>=o?(s+=Gu(i+1-o),n&&(a=n-i-1)>0&&(s=s+"."+Gu(a))):((a=i+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(i+1===o&&(s+="."),s+=Gu(a))),t.s<0?"-"+s:s}function HF(t,e){if(t.length>e)return t.length=e,!0}function iV(t){var e,n,a;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(uf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return VF(o,s.toString())}else if(typeof s!="string")throw Error(uf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Bwe.test(s))VF(o,s);else throw Error(uf+s)}if(i.prototype=Dt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=iV,i.config=i.set=zwe,t===void 0&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<a.length;)t.hasOwnProperty(n=a[e++])||(t[n]=this[n]);return i.config(t),i}function zwe(t){if(!t||typeof t!="object")throw Error(eo+"Object expected");var e,n,a,i=["precision",1,Vg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((a=t[n=i[e]])!==void 0)if(Hg(a)===a&&a>=i[e+1]&&a<=i[e+2])this[n]=a;else throw Error(uf+n+": "+a);if((a=t[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(uf+n+": "+a);return this}var hM=iV($we);_s=new hM(1);const vr=hM;function qwe(t){return Gwe(t)||Hwe(t)||Vwe(t)||Uwe()}function Uwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vwe(t,e){if(t){if(typeof t=="string")return NP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NP(t,e)}}function Hwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Gwe(t){if(Array.isArray(t))return NP(t)}function NP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Wwe=function(e){return e},sV={},oV=function(e){return e===sV},GF=function(e){return function n(){return arguments.length===0||arguments.length===1&&oV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Ywe=function t(e,n){return e===1?n:GF(function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==sV}).length;return o>=e?n.apply(void 0,i):t(e-o,GF(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=i.map(function(p){return oV(p)?c.shift():p});return n.apply(void 0,qwe(f).concat(c))}))})},wS=function(e){return Ywe(e.length,e)},SP=function(e,n){for(var a=[],i=e;i<n;++i)a[i-e]=i;return a},Kwe=wS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Qwe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(!n.length)return Wwe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},_P=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},lV=function(e){var n=null,a=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,a=e.apply(void 0,s)),a}};function Xwe(t){var e;return t===0?e=1:e=Math.floor(new vr(t).abs().log(10).toNumber())+1,e}function Jwe(t,e,n){for(var a=new vr(t),i=0,s=[];a.lt(e)&&i<1e5;)s.push(a.toNumber()),a=a.add(n),i++;return s}var Zwe=wS(function(t,e,n){var a=+t,i=+e;return a+n*(i-a)}),eNe=wS(function(t,e,n){var a=e-+t;return a=a||1/0,(n-t)/a}),tNe=wS(function(t,e,n){var a=e-+t;return a=a||1/0,Math.max(0,Math.min(1,(n-t)/a))});const NS={rangeStep:Jwe,getDigitCount:Xwe,interpolateNumber:Zwe,uninterpolateNumber:eNe,uninterpolateTruncation:tNe};function CP(t){return aNe(t)||rNe(t)||cV(t)||nNe()}function nNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function aNe(t){if(Array.isArray(t))return TP(t)}function Yv(t,e){return oNe(t)||sNe(t,e)||cV(t,e)||iNe()}function iNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cV(t,e){if(t){if(typeof t=="string")return TP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TP(t,e)}}function TP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function sNe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],a=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));a=!0);}catch(c){i=!0,s=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function oNe(t){if(Array.isArray(t))return t}function uV(t){var e=Yv(t,2),n=e[0],a=e[1],i=n,s=a;return n>a&&(i=a,s=n),[i,s]}function dV(t,e,n){if(t.lte(0))return new vr(0);var a=NS.getDigitCount(t.toNumber()),i=new vr(10).pow(a),s=t.div(i),o=a!==1?.05:.1,l=new vr(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new vr(Math.ceil(c))}function lNe(t,e,n){var a=1,i=new vr(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(a=new vr(10).pow(NS.getDigitCount(t)-1),i=new vr(Math.floor(i.div(a).toNumber())).mul(a)):s>1&&(i=new vr(Math.floor(t)))}else t===0?i=new vr(Math.floor((e-1)/2)):n||(i=new vr(Math.floor(t)));var o=Math.floor((e-1)/2),l=Qwe(Kwe(function(c){return i.add(new vr(c-o).mul(a)).toNumber()}),SP);return l(0,e)}function hV(t,e,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new vr(0),tickMin:new vr(0),tickMax:new vr(0)};var s=dV(new vr(e).sub(t).div(n-1),a,i),o;t<=0&&e>=0?o=new vr(0):(o=new vr(t).add(e).div(2),o=o.sub(new vr(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new vr(e).sub(o).div(s).toNumber()),d=l+c+1;return d>n?hV(t,e,n,a,i+1):(d<n&&(c=e>0?c+(n-d):c,l=e>0?l:l+(n-d)),{step:s,tickMin:o.sub(new vr(l).mul(s)),tickMax:o.add(new vr(c).mul(s))})}function cNe(t){var e=Yv(t,2),n=e[0],a=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=uV([n,a]),c=Yv(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat(CP(SP(0,i-1).map(function(){return 1/0}))):[].concat(CP(SP(0,i-1).map(function(){return-1/0})),[f]);return n>a?_P(p):p}if(d===f)return lNe(d,i,s);var g=hV(d,f,o,s),x=g.step,b=g.tickMin,j=g.tickMax,S=NS.rangeStep(b,j.add(new vr(.1).mul(x)),x);return n>a?_P(S):S}function uNe(t,e){var n=Yv(t,2),a=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=uV([a,i]),l=Yv(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,i];if(c===d)return[c];var f=Math.max(e,2),p=dV(new vr(d).sub(c).div(f-1),s,0),g=[].concat(CP(NS.rangeStep(new vr(c),new vr(d).sub(new vr(.99).mul(p)),p)),[d]);return a>i?_P(g):g}var dNe=lV(cNe),hNe=lV(uNe),fNe="Invariant failed";function kf(t,e){throw new Error(fNe)}var pNe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fg(t){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Xw.apply(this,arguments)}function mNe(t,e){return vNe(t)||xNe(t,e)||yNe(t,e)||gNe()}function gNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yNe(t,e){if(t){if(typeof t=="string")return WF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WF(t,e)}}function WF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function xNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function vNe(t){if(Array.isArray(t))return t}function bNe(t,e){if(t==null)return{};var n=jNe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function jNe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function wNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NNe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,mV(a.key),a)}}function SNe(t,e,n){return e&&NNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Ne(t,e,n){return e=Jw(e),CNe(t,fV()?Reflect.construct(e,n||[],Jw(t).constructor):e.apply(t,n))}function CNe(t,e){if(e&&(fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TNe(t)}function TNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fV=function(){return!!t})()}function Jw(t){return Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jw(t)}function kNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kP(t,e)}function kP(t,e){return kP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},kP(t,e)}function pV(t,e,n){return e=mV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mV(t){var e=ANe(t,"string");return fg(e)=="symbol"?e:e+""}function ANe(t,e){if(fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(fg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ub=function(t){function e(){return wNe(this,e),_Ne(this,e,arguments)}return kNe(e,t),SNe(e,[{key:"render",value:function(){var a=this.props,i=a.offset,s=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,f=a.xAxis,p=a.yAxis,g=bNe(a,pNe),x=$t(g,!1);this.props.direction==="x"&&f.type!=="number"&&kf();var b=c.map(function(j){var S=d(j,l),_=S.x,T=S.y,C=S.value,P=S.errorVal;if(!P)return null;var k=[],O,I;if(Array.isArray(P)){var F=mNe(P,2);O=F[0],I=F[1]}else O=I=P;if(s==="vertical"){var B=f.scale,$=T+i,L=$+o,V=$-o,H=B(C-O),te=B(C+I);k.push({x1:te,y1:L,x2:te,y2:V}),k.push({x1:H,y1:$,x2:te,y2:$}),k.push({x1:H,y1:L,x2:H,y2:V})}else if(s==="horizontal"){var X=p.scale,q=_+i,Y=q-o,se=q+o,G=X(C-O),z=X(C+I);k.push({x1:Y,y1:z,x2:se,y2:z}),k.push({x1:q,y1:G,x2:q,y2:z}),k.push({x1:Y,y1:G,x2:se,y2:G})}return Ce.createElement(Pn,Xw({className:"recharts-errorBar",key:"bar-".concat(k.map(function(ce){return"".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))},x),k.map(function(ce){return Ce.createElement("line",Xw({},ce,{key:"line-".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))}))});return Ce.createElement(Pn,{className:"recharts-errorBars"},b)}}])}(Ce.Component);pV(Ub,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});pV(Ub,"displayName","ErrorBar");function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}function YF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Fh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(n),!0).forEach(function(a){ENe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YF(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ENe(t,e,n){return e=PNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PNe(t){var e=ONe(t,"string");return Kv(e)=="symbol"?e:e+""}function ONe(t,e){if(Kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Kv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gV=function(e){var n=e.children,a=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=Ns(n,kc);if(!o)return null;var l=kc.defaultProps,c=l!==void 0?Fh(Fh({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:s==="children"?d=(a||[]).reduce(function(f,p){var g=p.item,x=p.props,b=x.sectors||x.data||[];return f.concat(b.map(function(j){return{type:o.props.iconType||g.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):d=(a||[]).map(function(f){var p=f.item,g=p.type.defaultProps,x=g!==void 0?Fh(Fh({},g),p.props):{},b=x.dataKey,j=x.name,S=x.legendType,_=x.hide;return{inactive:_,dataKey:b,type:c.iconType||S||"square",color:fM(p),value:j||b,payload:x}}),Fh(Fh(Fh({},c),kc.getWithHeight(o,i)),{},{payload:d,item:o})};function Qv(t){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qv(t)}function KF(t){return RNe(t)||INe(t)||MNe(t)||DNe()}function DNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MNe(t,e){if(t){if(typeof t=="string")return AP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AP(t,e)}}function INe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RNe(t){if(Array.isArray(t))return AP(t)}function AP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function QF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QF(Object(n),!0).forEach(function(a){$m(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QF(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function $m(t,e,n){return e=LNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LNe(t){var e=FNe(t,"string");return Qv(e)=="symbol"?e:e+""}function FNe(t,e){if(Qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sa(t,e,n){return ln(t)||ln(e)?n:Na(e)?As(t,e,n):en(e)?e(t):n}function jv(t,e,n,a){var i=Rwe(t,function(l){return sa(l,e)});if(n==="number"){var s=i.filter(function(l){return bt(l)||parseFloat(l)});return s.length?[jS(s),ad(s)]:[1/0,-1/0]}var o=a?i.filter(function(l){return!ln(l)}):i;return o.map(function(l){return Na(l)||l instanceof Date?l:""})}var $Ne=function(e){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,d=0;d<l;d++){var f=d>0?i[d-1].coordinate:i[l-1].coordinate,p=i[d].coordinate,g=d>=l-1?i[0].coordinate:i[d+1].coordinate,x=void 0;if(Oi(p-f)!==Oi(g-p)){var b=[];if(Oi(g-p)===Oi(c[1]-c[0])){x=g;var j=p+c[1]-c[0];b[0]=Math.min(j,(j+f)/2),b[1]=Math.max(j,(j+f)/2)}else{x=f;var S=g+c[1]-c[0];b[0]=Math.min(p,(S+p)/2),b[1]=Math.max(p,(S+p)/2)}var _=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>_[0]&&e<=_[1]||e>=b[0]&&e<=b[1]){o=i[d].index;break}}else{var T=Math.min(f,g),C=Math.max(f,g);if(e>(T+p)/2&&e<=(C+p)/2){o=i[d].index;break}}}else for(var P=0;P<l;P++)if(P===0&&e<=(a[P].coordinate+a[P+1].coordinate)/2||P>0&&P<l-1&&e>(a[P].coordinate+a[P-1].coordinate)/2&&e<=(a[P].coordinate+a[P+1].coordinate)/2||P===l-1&&e>(a[P].coordinate+a[P-1].coordinate)/2){o=a[P].index;break}return o},fM=function(e){var n,a=e,i=a.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Qr(Qr({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},BNe=function(e){var n=e.barSize,a=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,d=l.length;c<d;c++)for(var f=s[l[c]].stackGroups,p=Object.keys(f),g=0,x=p.length;g<x;g++){var b=f[p[g]],j=b.items,S=b.cateAxisId,_=j.filter(function(I){return Tc(I.type).indexOf("Bar")>=0});if(_&&_.length){var T=_[0].type.defaultProps,C=T!==void 0?Qr(Qr({},T),_[0].props):_[0].props,P=C.barSize,k=C[S];o[k]||(o[k]=[]);var O=ln(P)?n:P;o[k].push({item:_[0],stackList:_.slice(1),barSize:ln(O)?void 0:Di(O,a,0)})}}return o},zNe=function(e){var n=e.barGap,a=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=Di(n,i,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var g=!1,x=i/c,b=o.reduce(function(P,k){return P+k.barSize||0},0);b+=(c-1)*d,b>=i&&(b-=(c-1)*d,d=0),b>=i&&x>0&&(g=!0,x*=.9,b=c*x);var j=(i-b)/2>>0,S={offset:j-d,size:0};f=o.reduce(function(P,k){var O={item:k.item,position:{offset:S.offset+S.size+d,size:g?x:k.barSize}},I=[].concat(KF(P),[O]);return S=I[I.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(F){I.push({item:F,position:S})}),I},p)}else{var _=Di(a,i,0,!0);i-2*_-(c-1)*d<=0&&(d=0);var T=(i-2*_-(c-1)*d)/c;T>1&&(T>>=0);var C=l===+l?Math.min(T,l):T;f=o.reduce(function(P,k,O){var I=[].concat(KF(P),[{item:k.item,position:{offset:_+(T+d)*O+(T-C)/2,size:C}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(F){I.push({item:F,position:I[I.length-1].position})}),I},p)}return f},qNe=function(e,n,a,i){var s=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=gV({children:s,legendWidth:c});if(d){var f=i||{},p=f.width,g=f.height,x=d.align,b=d.verticalAlign,j=d.layout;if((j==="vertical"||j==="horizontal"&&b==="middle")&&x!=="center"&&bt(e[x]))return Qr(Qr({},e),{},$m({},x,e[x]+(p||0)));if((j==="horizontal"||j==="vertical"&&x==="center")&&b!=="middle"&&bt(e[b]))return Qr(Qr({},e),{},$m({},b,e[b]+(g||0)))}return e},UNe=function(e,n,a){return ln(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},yV=function(e,n,a,i,s){var o=n.props.children,l=Es(o,Ub).filter(function(d){return UNe(i,s,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,f){var p=sa(f,a);if(ln(p))return d;var g=Array.isArray(p)?[jS(p),ad(p)]:[p,p],x=c.reduce(function(b,j){var S=sa(f,j,0),_=g[0]-Math.abs(Array.isArray(S)?S[0]:S),T=g[1]+Math.abs(Array.isArray(S)?S[1]:S);return[Math.min(_,b[0]),Math.max(T,b[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},VNe=function(e,n,a,i,s){var o=n.map(function(l){return yV(e,l,a,s,i)}).filter(function(l){return!ln(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},xV=function(e,n,a,i,s){var o=n.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&yV(e,c,d,i)||jv(e,d,a,s)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,p=d.length;f<p;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},vV=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},bV=function(e,n,a,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===a&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(a),l},Nc=function(e,n,a){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||a)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Oi(l[0]-l[1])*2*d:d,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(p){var g=s?s.indexOf(p):p;return{coordinate:i(g)+d,value:p,offset:d}});return f.filter(function(p){return!zg(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,g){return{coordinate:i(p)+d,value:p,index:g,offset:d}}):i.ticks&&!a?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+d,value:p,offset:d}}):i.domain().map(function(p,g){return{coordinate:i(p)+d,value:s?s[p]:p,index:g,offset:d}})},tA=new WeakMap,Mj=function(e,n){if(typeof n!="function")return e;tA.has(e)||tA.set(e,new WeakMap);var a=tA.get(e);if(a.has(n))return a.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,i),i},jV=function(e,n,a){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:qv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Gw(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:bv(),realScaleType:"point"}:s==="category"?{scale:qv(),realScaleType:"band"}:{scale:Gw(),realScaleType:"linear"};if(Nf(i)){var c="scale".concat(oS(i));return{scale:(IF[c]||bv)(),realScaleType:IF[c]?c:"point"}}return en(i)?{scale:i}:{scale:bv(),realScaleType:"point"}},XF=1e-4,wV=function(e){var n=e.domain();if(!(!n||n.length<=2)){var a=n.length,i=e.range(),s=Math.min(i[0],i[1])-XF,o=Math.max(i[0],i[1])+XF,l=e(n[0]),c=e(n[a-1]);(l<s||l>o||c<s||c>o)&&e.domain([n[0],n[a-1]])}},HNe=function(e,n){if(!e)return null;for(var a=0,i=e.length;a<i;a++)if(e[a].item===n)return e[a].position;return null},GNe=function(e,n){if(!n||n.length!==2||!bt(n[0])||!bt(n[1]))return e;var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!bt(e[0])||e[0]<a)&&(s[0]=a),(!bt(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<a&&(s[1]=a),s},WNe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0,l=0;l<n;++l){var c=zg(e[l][a][1])?e[l][a][0]:e[l][a][1];c>=0?(e[l][a][0]=s,e[l][a][1]=s+c,s=e[l][a][1]):(e[l][a][0]=o,e[l][a][1]=o+c,o=e[l][a][1])}},YNe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0;o<n;++o){var l=zg(e[o][a][1])?e[o][a][0]:e[o][a][1];l>=0?(e[o][a][0]=s,e[o][a][1]=s+l,s=e[o][a][1]):(e[o][a][0]=0,e[o][a][1]=0)}},KNe={sign:WNe,expand:Rxe,none:ig,silhouette:Lxe,wiggle:Fxe,positive:YNe},QNe=function(e,n,a){var i=n.map(function(l){return l.props.dataKey}),s=KNe[a],o=Ixe().keys(i).value(function(l,c){return+sa(l,c,0)}).order(iP).offset(s);return o(e)},XNe=function(e,n,a,i,s,o){if(!e)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(p,g){var x,b=(x=g.type)!==null&&x!==void 0&&x.defaultProps?Qr(Qr({},g.type.defaultProps),g.props):g.props,j=b.stackId,S=b.hide;if(S)return p;var _=b[a],T=p[_]||{hasStack:!1,stackGroups:{}};if(Na(j)){var C=T.stackGroups[j]||{numericAxisId:a,cateAxisId:i,items:[]};C.items.push(g),T.hasStack=!0,T.stackGroups[j]=C}else T.stackGroups[Df("_stackId_")]={numericAxisId:a,cateAxisId:i,items:[g]};return Qr(Qr({},p),{},$m({},_,T))},c),f={};return Object.keys(d).reduce(function(p,g){var x=d[g];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(j,S){var _=x.stackGroups[S];return Qr(Qr({},j),{},$m({},S,{numericAxisId:a,cateAxisId:i,items:_.items,stackedData:QNe(e,_.items,s)}))},b)}return Qr(Qr({},p),{},$m({},g,x))},f)},NV=function(e,n){var a=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=a||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var f=dNe(d,s,l);return e.domain([jS(f),ad(f)]),{niceTicks:f}}if(s&&i==="number"){var p=e.domain(),g=hNe(p,s,l);return{niceTicks:g}}return null};function Zw(t){var e=t.axis,n=t.ticks,a=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ln(i[e.dataKey])){var l=kw(n,"value",i[e.dataKey]);if(l)return l.coordinate+a/2}return n[s]?n[s].coordinate+a/2:null}var c=sa(i,ln(o)?e.dataKey:o);return ln(c)?null:e.scale(c)}var JF=function(e){var n=e.axis,a=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return a[l]?a[l].coordinate+i:null;var c=sa(o,n.dataKey,n.domain[l]);return ln(c)?null:n.scale(c)-s/2+i},JNe=function(e){var n=e.numericAxis,a=n.scale.domain();if(n.type==="number"){var i=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);return i<=0&&s>=0?0:s<0?s:i}return a[0]},ZNe=function(e,n){var a,i=(a=e.type)!==null&&a!==void 0&&a.defaultProps?Qr(Qr({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Na(s)){var o=n[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},eSe=function(e){return e.reduce(function(n,a){return[jS(a.concat([n[0]]).filter(bt)),ad(a.concat([n[1]]).filter(bt))]},[1/0,-1/0])},SV=function(e,n,a){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(d,f){var p=eSe(f.slice(n,a+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},ZF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,e$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,EP=function(e,n,a){if(en(e))return e(n,a);if(!Array.isArray(e))return n;var i=[];if(bt(e[0]))i[0]=a?e[0]:Math.min(e[0],n[0]);else if(ZF.test(e[0])){var s=+ZF.exec(e[0])[1];i[0]=n[0]-s}else en(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(bt(e[1]))i[1]=a?e[1]:Math.max(e[1],n[1]);else if(e$.test(e[1])){var o=+e$.exec(e[1])[1];i[1]=n[1]+o}else en(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},eN=function(e,n,a){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!a||i>0)return i}if(e&&n&&n.length>=2){for(var s=zD(n,function(p){return p.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var d=s[l],f=s[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},t$=function(e,n,a){return!e||!e.length||Cf(e,As(a,"type.defaultProps.domain"))?n:e},_V=function(e,n){var a=e.type.defaultProps?Qr(Qr({},e.type.defaultProps),e.props):e.props,i=a.dataKey,s=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,f=a.hide;return Qr(Qr({},$t(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:fM(e),value:sa(n,i),type:c,payload:n,chartType:d,hide:f})};function Xv(t){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(t)}function n$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function mc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n$(Object(n),!0).forEach(function(a){CV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function CV(t,e,n){return e=tSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tSe(t){var e=nSe(t,"string");return Xv(e)=="symbol"?e:e+""}function nSe(t,e){if(Xv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Xv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rSe(t,e){return oSe(t)||sSe(t,e)||iSe(t,e)||aSe()}function aSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iSe(t,e){if(t){if(typeof t=="string")return r$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r$(t,e)}}function r$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function sSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function oSe(t){if(Array.isArray(t))return t}var tN=Math.PI/180,lSe=function(e){return e*180/Math.PI},Mr=function(e,n,a,i){return{x:e+Math.cos(-tN*i)*a,y:n+Math.sin(-tN*i)*a}},TV=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},cSe=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,f=Di(e.cx,o,o/2),p=Di(e.cy,l,l/2),g=TV(o,l,a),x=Di(e.innerRadius,g,0),b=Di(e.outerRadius,g,g*.8),j=Object.keys(n);return j.reduce(function(S,_){var T=n[_],C=T.domain,P=T.reversed,k;if(ln(T.range))i==="angleAxis"?k=[c,d]:i==="radiusAxis"&&(k=[x,b]),P&&(k=[k[1],k[0]]);else{k=T.range;var O=k,I=rSe(O,2);c=I[0],d=I[1]}var F=jV(T,s),B=F.realScaleType,$=F.scale;$.domain(C).range(k),wV($);var L=NV($,mc(mc({},T),{},{realScaleType:B})),V=mc(mc(mc({},T),L),{},{range:k,radius:b,realScaleType:B,scale:$,cx:f,cy:p,innerRadius:x,outerRadius:b,startAngle:c,endAngle:d});return mc(mc({},S),{},CV({},_,V))},{})},uSe=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(a-s,2)+Math.pow(i-o,2))},dSe=function(e,n){var a=e.x,i=e.y,s=n.cx,o=n.cy,l=uSe({x:a,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(a-s)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:lSe(d),angleInRadian:d}},hSe=function(e){var n=e.startAngle,a=e.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:a-o*360}},fSe=function(e,n){var a=n.startAngle,i=n.endAngle,s=Math.floor(a/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},a$=function(e,n){var a=e.x,i=e.y,s=dSe({x:a,y:i},n),o=s.radius,l=s.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=hSe(n),p=f.startAngle,g=f.endAngle,x=l,b;if(p<=g){for(;x>g;)x-=360;for(;x<p;)x+=360;b=x>=p&&x<=g}else{for(;x>p;)x-=360;for(;x<g;)x+=360;b=x>=g&&x<=p}return b?mc(mc({},n),{},{radius:o,angle:fSe(x,n)}):null},kV=function(e){return!v.isValidElement(e)&&!en(e)&&typeof e!="boolean"?e.className:""};function Jv(t){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(t)}var pSe=["offset"];function mSe(t){return vSe(t)||xSe(t)||ySe(t)||gSe()}function gSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ySe(t,e){if(t){if(typeof t=="string")return PP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PP(t,e)}}function xSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vSe(t){if(Array.isArray(t))return PP(t)}function PP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function bSe(t,e){if(t==null)return{};var n=jSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function jSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function i$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i$(Object(n),!0).forEach(function(a){wSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function wSe(t,e,n){return e=NSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NSe(t){var e=SSe(t,"string");return Jv(e)=="symbol"?e:e+""}function SSe(t,e){if(Jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Jv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Zv.apply(this,arguments)}var _Se=function(e){var n=e.value,a=e.formatter,i=ln(e.children)?n:e.children;return en(a)?a(i):i},CSe=function(e,n){var a=Oi(n-e),i=Math.min(Math.abs(n-e),360);return a*i},TSe=function(e,n,a){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,d=c.cx,f=c.cy,p=c.innerRadius,g=c.outerRadius,x=c.startAngle,b=c.endAngle,j=c.clockWise,S=(p+g)/2,_=CSe(x,b),T=_>=0?1:-1,C,P;i==="insideStart"?(C=x+T*o,P=j):i==="insideEnd"?(C=b-T*o,P=!j):i==="end"&&(C=b+T*o,P=j),P=_<=0?P:!P;var k=Mr(d,f,S,C),O=Mr(d,f,S,C+(P?1:-1)*359),I="M".concat(k.x,",").concat(k.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(P?0:1,`,
    `).concat(O.x,",").concat(O.y),F=ln(e.id)?Df("recharts-radial-line-"):e.id;return Ce.createElement("text",Zv({},a,{dominantBaseline:"central",className:un("recharts-radial-bar-label",l)}),Ce.createElement("defs",null,Ce.createElement("path",{id:F,d:I})),Ce.createElement("textPath",{xlinkHref:"#".concat(F)},n))},kSe=function(e){var n=e.viewBox,a=e.offset,i=e.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,d=s.outerRadius,f=s.startAngle,p=s.endAngle,g=(f+p)/2;if(i==="outside"){var x=Mr(o,l,d+a,g),b=x.x,j=x.y;return{x:b,y:j,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var S=(c+d)/2,_=Mr(o,l,S,g),T=_.x,C=_.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},ASe=function(e){var n=e.viewBox,a=e.parentViewBox,i=e.offset,s=e.position,o=n,l=o.x,c=o.y,d=o.width,f=o.height,p=f>=0?1:-1,g=p*i,x=p>0?"end":"start",b=p>0?"start":"end",j=d>=0?1:-1,S=j*i,_=j>0?"end":"start",T=j>0?"start":"end";if(s==="top"){var C={x:l+d/2,y:c-p*i,textAnchor:"middle",verticalAnchor:x};return ba(ba({},C),a?{height:Math.max(c-a.y,0),width:d}:{})}if(s==="bottom"){var P={x:l+d/2,y:c+f+g,textAnchor:"middle",verticalAnchor:b};return ba(ba({},P),a?{height:Math.max(a.y+a.height-(c+f),0),width:d}:{})}if(s==="left"){var k={x:l-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return ba(ba({},k),a?{width:Math.max(k.x-a.x,0),height:f}:{})}if(s==="right"){var O={x:l+d+S,y:c+f/2,textAnchor:T,verticalAnchor:"middle"};return ba(ba({},O),a?{width:Math.max(a.x+a.width-O.x,0),height:f}:{})}var I=a?{width:d,height:f}:{};return s==="insideLeft"?ba({x:l+S,y:c+f/2,textAnchor:T,verticalAnchor:"middle"},I):s==="insideRight"?ba({x:l+d-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},I):s==="insideTop"?ba({x:l+d/2,y:c+g,textAnchor:"middle",verticalAnchor:b},I):s==="insideBottom"?ba({x:l+d/2,y:c+f-g,textAnchor:"middle",verticalAnchor:x},I):s==="insideTopLeft"?ba({x:l+S,y:c+g,textAnchor:T,verticalAnchor:b},I):s==="insideTopRight"?ba({x:l+d-S,y:c+g,textAnchor:_,verticalAnchor:b},I):s==="insideBottomLeft"?ba({x:l+S,y:c+f-g,textAnchor:T,verticalAnchor:x},I):s==="insideBottomRight"?ba({x:l+d-S,y:c+f-g,textAnchor:_,verticalAnchor:x},I):Bg(s)&&(bt(s.x)||Yh(s.x))&&(bt(s.y)||Yh(s.y))?ba({x:l+Di(s.x,d),y:c+Di(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):ba({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},ESe=function(e){return"cx"in e&&bt(e.cx)};function Pa(t){var e=t.offset,n=e===void 0?5:e,a=bSe(t,pSe),i=ba({offset:n},a),s=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,f=i.className,p=f===void 0?"":f,g=i.textBreakAll;if(!s||ln(l)&&ln(c)&&!v.isValidElement(d)&&!en(d))return null;if(v.isValidElement(d))return v.cloneElement(d,i);var x;if(en(d)){if(x=v.createElement(d,i),v.isValidElement(x))return x}else x=_Se(i);var b=ESe(s),j=$t(i,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return TSe(i,x,j);var S=b?kSe(i):ASe(i);return Ce.createElement(_f,Zv({className:un("recharts-label",p)},j,S,{breakAll:g}),x)}Pa.displayName="Label";var AV=function(e){var n=e.cx,a=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,f=e.outerRadius,p=e.x,g=e.y,x=e.top,b=e.left,j=e.width,S=e.height,_=e.clockWise,T=e.labelViewBox;if(T)return T;if(bt(j)&&bt(S)){if(bt(p)&&bt(g))return{x:p,y:g,width:j,height:S};if(bt(x)&&bt(b))return{x,y:b,width:j,height:S}}return bt(p)&&bt(g)?{x:p,y:g,width:0,height:0}:bt(n)&&bt(a)?{cx:n,cy:a,startAngle:s||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:_}:e.viewBox?e.viewBox:{}},PSe=function(e,n){return e?e===!0?Ce.createElement(Pa,{key:"label-implicit",viewBox:n}):Na(e)?Ce.createElement(Pa,{key:"label-implicit",viewBox:n,value:e}):v.isValidElement(e)?e.type===Pa?v.cloneElement(e,{key:"label-implicit",viewBox:n}):Ce.createElement(Pa,{key:"label-implicit",content:e,viewBox:n}):en(e)?Ce.createElement(Pa,{key:"label-implicit",content:e,viewBox:n}):Bg(e)?Ce.createElement(Pa,Zv({viewBox:n},e,{key:"label-implicit"})):null:null},OSe=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var i=e.children,s=AV(e),o=Es(i,Pa).map(function(c,d){return v.cloneElement(c,{viewBox:n||s,key:"label-".concat(d)})});if(!a)return o;var l=PSe(e.label,n||s);return[l].concat(mSe(o))};Pa.parseViewBox=AV;Pa.renderCallByParent=OSe;var nA,s$;function DSe(){if(s$)return nA;s$=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return nA=t,nA}var MSe=DSe();const ISe=Un(MSe);function eb(t){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eb(t)}var RSe=["valueAccessor"],LSe=["data","dataKey","clockWise","id","textBreakAll"];function FSe(t){return qSe(t)||zSe(t)||BSe(t)||$Se()}function $Se(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BSe(t,e){if(t){if(typeof t=="string")return OP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OP(t,e)}}function zSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qSe(t){if(Array.isArray(t))return OP(t)}function OP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function nN(){return nN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},nN.apply(this,arguments)}function o$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function l$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(n),!0).forEach(function(a){USe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function USe(t,e,n){return e=VSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VSe(t){var e=HSe(t,"string");return eb(e)=="symbol"?e:e+""}function HSe(t,e){if(eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(eb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c$(t,e){if(t==null)return{};var n=GSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function GSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var WSe=function(e){return Array.isArray(e.value)?ISe(e.value):e.value};function Pl(t){var e=t.valueAccessor,n=e===void 0?WSe:e,a=c$(t,RSe),i=a.data,s=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=c$(a,LSe);return!i||!i.length?null:Ce.createElement(Pn,{className:"recharts-label-list"},i.map(function(f,p){var g=ln(s)?n(f,p):sa(f&&f.payload,s),x=ln(l)?{}:{id:"".concat(l,"-").concat(p)};return Ce.createElement(Pa,nN({},$t(f,!0),d,x,{parentViewBox:f.parentViewBox,value:g,textBreakAll:c,viewBox:Pa.parseViewBox(ln(o)?f:l$(l$({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Pl.displayName="LabelList";function YSe(t,e){return t?t===!0?Ce.createElement(Pl,{key:"labelList-implicit",data:e}):Ce.isValidElement(t)||en(t)?Ce.createElement(Pl,{key:"labelList-implicit",data:e,content:t}):Bg(t)?Ce.createElement(Pl,nN({data:e},t,{key:"labelList-implicit"})):null:null}function KSe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=Es(a,Pl).map(function(o,l){return v.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=YSe(t.label,e);return[s].concat(FSe(i))}Pl.renderCallByParent=KSe;function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}function DP(){return DP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},DP.apply(this,arguments)}function u$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function d$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(n),!0).forEach(function(a){QSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function QSe(t,e,n){return e=XSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XSe(t){var e=JSe(t,"string");return tb(e)=="symbol"?e:e+""}function JSe(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(tb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZSe=function(e,n){var a=Oi(n-e),i=Math.min(Math.abs(n-e),359.999);return a*i},Ij=function(e){var n=e.cx,a=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,f=c*(l?1:-1)+i,p=Math.asin(c/f)/tN,g=d?s:s+o*p,x=Mr(n,a,f,g),b=Mr(n,a,i,g),j=d?s-o*p:s,S=Mr(n,a,f*Math.cos(p*tN),j);return{center:x,circleTangency:b,lineTangency:S,theta:p}},EV=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=ZSe(o,l),d=o+c,f=Mr(n,a,s,o),p=Mr(n,a,s,d),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var x=Mr(n,a,i,o),b=Mr(n,a,i,d);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(n,",").concat(a," Z");return g},e_e=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,f=e.endAngle,p=Oi(f-d),g=Ij({cx:n,cy:a,radius:s,angle:d,sign:p,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,b=g.lineTangency,j=g.theta,S=Ij({cx:n,cy:a,radius:s,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:c}),_=S.circleTangency,T=S.lineTangency,C=S.theta,P=c?Math.abs(d-f):Math.abs(d-f)-j-C;if(P<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):EV({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f});var k="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(p<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var O=Ij({cx:n,cy:a,radius:i,angle:d,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=O.circleTangency,F=O.lineTangency,B=O.theta,$=Ij({cx:n,cy:a,radius:i,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),L=$.circleTangency,V=$.lineTangency,H=$.theta,te=c?Math.abs(d-f):Math.abs(d-f)-B-H;if(te<0&&o===0)return"".concat(k,"L").concat(n,",").concat(a,"Z");k+="L".concat(V.x,",").concat(V.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(te>180),",").concat(+(p>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,"Z")}else k+="L".concat(n,",").concat(a,"Z");return k},t_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},PV=function(e){var n=d$(d$({},t_e),e),a=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,g=n.className;if(o<s||f===p)return null;var x=un("recharts-sector",g),b=o-s,j=Di(l,b,0,!0),S;return j>0&&Math.abs(f-p)<360?S=e_e({cx:a,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:p}):S=EV({cx:a,cy:i,innerRadius:s,outerRadius:o,startAngle:f,endAngle:p}),Ce.createElement("path",DP({},$t(n,!0),{className:x,d:S,role:"img"}))};function nb(t){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(t)}function MP(){return MP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},MP.apply(this,arguments)}function h$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function f$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(n),!0).forEach(function(a){n_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function n_e(t,e,n){return e=r_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r_e(t){var e=a_e(t,"string");return nb(e)=="symbol"?e:e+""}function a_e(t,e){if(nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(nb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p$={curveBasisClosed:Sxe,curveBasisOpen:_xe,curveBasis:Nxe,curveBumpX:cxe,curveBumpY:uxe,curveLinearClosed:Cxe,curveLinear:cS,curveMonotoneX:Txe,curveMonotoneY:kxe,curveNatural:Axe,curveStep:Exe,curveStepAfter:Oxe,curveStepBefore:Pxe},Rj=function(e){return e.x===+e.x&&e.y===+e.y},Zx=function(e){return e.x},ev=function(e){return e.y},i_e=function(e,n){if(en(e))return e;var a="curve".concat(oS(e));return(a==="curveMonotone"||a==="curveBump")&&n?p$["".concat(a).concat(n==="vertical"?"Y":"X")]:p$[a]||cS},s_e=function(e){var n=e.type,a=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,f=i_e(a,l),p=d?s.filter(function(j){return Rj(j)}):s,g;if(Array.isArray(o)){var x=d?o.filter(function(j){return Rj(j)}):o,b=p.map(function(j,S){return f$(f$({},j),{},{base:x[S]})});return l==="vertical"?g=Tj().y(ev).x1(Zx).x0(function(j){return j.base.x}):g=Tj().x(Zx).y1(ev).y0(function(j){return j.base.y}),g.defined(Rj).curve(f),g(b)}return l==="vertical"&&bt(o)?g=Tj().y(ev).x1(Zx).x0(o):bt(o)?g=Tj().x(Zx).y1(ev).y0(o):g=A9().x(Zx).y(ev),g.defined(Rj).curve(f),g(p)},df=function(e){var n=e.className,a=e.points,i=e.path,s=e.pathRef;if((!a||!a.length)&&!i)return null;var o=a&&a.length?s_e(e):i;return v.createElement("path",MP({},$t(e,!1),Aw(e),{className:un("recharts-curve",n),d:o,ref:s}))},rA={exports:{}},aA,m$;function o_e(){if(m$)return aA;m$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return aA=t,aA}var iA,g$;function l_e(){if(g$)return iA;g$=1;var t=o_e();function e(){}function n(){}return n.resetWarningCache=e,iA=function(){function a(o,l,c,d,f,p){if(p!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}a.isRequired=a;function i(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},iA}var y$;function c_e(){return y$||(y$=1,rA.exports=l_e()()),rA.exports}var u_e=c_e();const cr=Un(u_e);var d_e=Object.getOwnPropertyNames,h_e=Object.getOwnPropertySymbols,f_e=Object.prototype.hasOwnProperty;function x$(t,e){return function(a,i,s){return t(a,i,s)&&e(a,i,s)}}function Lj(t){return function(n,a,i){if(!n||!a||typeof n!="object"||typeof a!="object")return t(n,a,i);var s=i.cache,o=s.get(n),l=s.get(a);if(o&&l)return o===a&&l===n;s.set(n,a),s.set(a,n);var c=t(n,a,i);return s.delete(n),s.delete(a),c}}function v$(t){return d_e(t).concat(h_e(t))}var p_e=Object.hasOwn||function(t,e){return f_e.call(t,e)};function Rf(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var m_e="__v",g_e="__o",y_e="_owner",b$=Object.getOwnPropertyDescriptor,j$=Object.keys;function x_e(t,e,n){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!n.equals(t[a],e[a],a,a,t,e,n))return!1;return!0}function v_e(t,e){return Rf(t.getTime(),e.getTime())}function b_e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function j_e(t,e){return t===e}function w$(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var d=e.entries(),f=!1,p=0;(l=d.next())&&!l.done;){if(i[p]){p++;continue}var g=o.value,x=l.value;if(n.equals(g[0],x[0],c,p,t,e,n)&&n.equals(g[1],x[1],g[0],x[0],t,e,n)){f=i[p]=!0;break}p++}if(!f)return!1;c++}return!0}var w_e=Rf;function N_e(t,e,n){var a=j$(t),i=a.length;if(j$(e).length!==i)return!1;for(;i-- >0;)if(!OV(t,e,n,a[i]))return!1;return!0}function tv(t,e,n){var a=v$(t),i=a.length;if(v$(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=a[i],!OV(t,e,n,s)||(o=b$(t,s),l=b$(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function S_e(t,e){return Rf(t.valueOf(),e.valueOf())}function __e(t,e){return t.source===e.source&&t.flags===e.flags}function N$(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!i[f]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1}return!0}function C_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function T_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function OV(t,e,n,a){return(a===y_e||a===g_e||a===m_e)&&(t.$$typeof||e.$$typeof)?!0:p_e(e,a)&&n.equals(t[a],e[a],a,a,t,e,n)}var k_e="[object Arguments]",A_e="[object Boolean]",E_e="[object Date]",P_e="[object Error]",O_e="[object Map]",D_e="[object Number]",M_e="[object Object]",I_e="[object RegExp]",R_e="[object Set]",L_e="[object String]",F_e="[object URL]",$_e=Array.isArray,S$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,_$=Object.assign,B_e=Object.prototype.toString.call.bind(Object.prototype.toString);function z_e(t){var e=t.areArraysEqual,n=t.areDatesEqual,a=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,f=t.areSetsEqual,p=t.areTypedArraysEqual,g=t.areUrlsEqual;return function(b,j,S){if(b===j)return!0;if(b==null||j==null)return!1;var _=typeof b;if(_!==typeof j)return!1;if(_!=="object")return _==="number"?o(b,j,S):_==="function"?i(b,j,S):!1;var T=b.constructor;if(T!==j.constructor)return!1;if(T===Object)return l(b,j,S);if($_e(b))return e(b,j,S);if(S$!=null&&S$(b))return p(b,j,S);if(T===Date)return n(b,j,S);if(T===RegExp)return d(b,j,S);if(T===Map)return s(b,j,S);if(T===Set)return f(b,j,S);var C=B_e(b);return C===E_e?n(b,j,S):C===I_e?d(b,j,S):C===O_e?s(b,j,S):C===R_e?f(b,j,S):C===M_e?typeof b.then!="function"&&typeof j.then!="function"&&l(b,j,S):C===F_e?g(b,j,S):C===P_e?a(b,j,S):C===k_e?l(b,j,S):C===A_e||C===D_e||C===L_e?c(b,j,S):!1}}function q_e(t){var e=t.circular,n=t.createCustomConfig,a=t.strict,i={areArraysEqual:a?tv:x_e,areDatesEqual:v_e,areErrorsEqual:b_e,areFunctionsEqual:j_e,areMapsEqual:a?x$(w$,tv):w$,areNumbersEqual:w_e,areObjectsEqual:a?tv:N_e,arePrimitiveWrappersEqual:S_e,areRegExpsEqual:__e,areSetsEqual:a?x$(N$,tv):N$,areTypedArraysEqual:a?tv:C_e,areUrlsEqual:T_e};if(n&&(i=_$({},i,n(i))),e){var s=Lj(i.areArraysEqual),o=Lj(i.areMapsEqual),l=Lj(i.areObjectsEqual),c=Lj(i.areSetsEqual);i=_$({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function U_e(t){return function(e,n,a,i,s,o,l){return t(e,n,l)}}function V_e(t){var e=t.circular,n=t.comparator,a=t.createState,i=t.equals,s=t.strict;if(a)return function(c,d){var f=a(),p=f.cache,g=p===void 0?e?new WeakMap:void 0:p,x=f.meta;return n(c,d,{cache:g,equals:i,meta:x,strict:s})};if(e)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,d){return n(c,d,o)}}var H_e=jd();jd({strict:!0});jd({circular:!0});jd({circular:!0,strict:!0});jd({createInternalComparator:function(){return Rf}});jd({strict:!0,createInternalComparator:function(){return Rf}});jd({circular:!0,createInternalComparator:function(){return Rf}});jd({circular:!0,createInternalComparator:function(){return Rf},strict:!0});function jd(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,a=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=q_e(t),c=z_e(l),d=a?a(c):U_e(c);return V_e({circular:n,comparator:c,createState:i,equals:d,strict:o})}function G_e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function C$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):G_e(i)};requestAnimationFrame(a)}function IP(t){"@babel/helpers - typeof";return IP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IP(t)}function W_e(t){return X_e(t)||Q_e(t)||K_e(t)||Y_e()}function Y_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K_e(t,e){if(t){if(typeof t=="string")return T$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T$(t,e)}}function T$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Q_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function X_e(t){if(Array.isArray(t))return t}function J_e(){var t={},e=function(){return null},n=!1,a=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=W_e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){C$(i.bind(null,d),c);return}i(c),C$(i.bind(null,d));return}IP(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,a(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function rb(t){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rb(t)}function k$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function A$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(n),!0).forEach(function(a){DV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function DV(t,e,n){return e=Z_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z_e(t){var e=eCe(t,"string");return rb(e)==="symbol"?e:String(e)}function eCe(t,e){if(rb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(rb(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tCe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(a,i){return a.filter(function(s){return i.includes(s)})})},nCe=function(e){return e},rCe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},wv=function(e,n){return Object.keys(n).reduce(function(a,i){return A$(A$({},a),{},DV({},i,e(i,n[i])))},{})},E$=function(e,n,a){return e.map(function(i){return"".concat(rCe(i)," ").concat(n,"ms ").concat(a)}).join(",")};function aCe(t,e){return oCe(t)||sCe(t,e)||MV(t,e)||iCe()}function iCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function oCe(t){if(Array.isArray(t))return t}function lCe(t){return dCe(t)||uCe(t)||MV(t)||cCe()}function cCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MV(t,e){if(t){if(typeof t=="string")return RP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RP(t,e)}}function uCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dCe(t){if(Array.isArray(t))return RP(t)}function RP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var rN=1e-4,IV=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},RV=function(e,n){return e.map(function(a,i){return a*Math.pow(n,i)}).reduce(function(a,i){return a+i})},P$=function(e,n){return function(a){var i=IV(e,n);return RV(i,a)}},hCe=function(e,n){return function(a){var i=IV(e,n),s=[].concat(lCe(i.map(function(o,l){return o*l}).slice(1)),[0]);return RV(s,a)}},O$=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(S){return parseFloat(S)}),f=aCe(d,4);i=f[0],s=f[1],o=f[2],l=f[3]}}}var p=P$(i,o),g=P$(s,l),x=hCe(i,o),b=function(_){return _>1?1:_<0?0:_},j=function(_){for(var T=_>1?1:_,C=T,P=0;P<8;++P){var k=p(C)-T,O=x(C);if(Math.abs(k-T)<rN||O<rN)return g(C);C=b(C-k/O)}return g(C)};return j.isStepper=!1,j},fCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,a=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(f,p,g){var x=-(f-p)*a,b=g*s,j=g+(x-b)*l/1e3,S=g*l/1e3+f;return Math.abs(S-p)<rN&&Math.abs(j)<rN?[p,0]:[S,j]};return c.isStepper=!0,c.dt=l,c},pCe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return O$(i);case"spring":return fCe();default:if(i.split("(")[0]==="cubic-bezier")return O$(i)}return typeof i=="function"?i:null};function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function D$(t){return yCe(t)||gCe(t)||LV(t)||mCe()}function mCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yCe(t){if(Array.isArray(t))return FP(t)}function M$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function qa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(n),!0).forEach(function(a){LP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function LP(t,e,n){return e=xCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xCe(t){var e=vCe(t,"string");return ab(e)==="symbol"?e:String(e)}function vCe(t,e){if(ab(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ab(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bCe(t,e){return NCe(t)||wCe(t,e)||LV(t,e)||jCe()}function jCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LV(t,e){if(t){if(typeof t=="string")return FP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FP(t,e)}}function FP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function wCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function NCe(t){if(Array.isArray(t))return t}var aN=function(e,n,a){return e+(n-e)*a},$P=function(e){var n=e.from,a=e.to;return n!==a},SCe=function t(e,n,a){var i=wv(function(s,o){if($P(o)){var l=e(o.from,o.to,o.velocity),c=bCe(l,2),d=c[0],f=c[1];return qa(qa({},o),{},{from:d,velocity:f})}return o},n);return a<1?wv(function(s,o){return $P(o)?qa(qa({},o),{},{velocity:aN(o.velocity,i[s].velocity,a),from:aN(o.from,i[s].from,a)}):o},n):t(e,i,a-1)};const _Ce=function(t,e,n,a,i){var s=tCe(t,e),o=s.reduce(function(S,_){return qa(qa({},S),{},LP({},_,[t[_],e[_]]))},{}),l=s.reduce(function(S,_){return qa(qa({},S),{},LP({},_,{from:t[_],velocity:0,to:e[_]}))},{}),c=-1,d,f,p=function(){return null},g=function(){return wv(function(_,T){return T.from},l)},x=function(){return!Object.values(l).filter($P).length},b=function(_){d||(d=_);var T=_-d,C=T/n.dt;l=SCe(n,l,C),i(qa(qa(qa({},t),e),g())),d=_,x()||(c=requestAnimationFrame(p))},j=function(_){f||(f=_);var T=(_-f)/a,C=wv(function(k,O){return aN.apply(void 0,D$(O).concat([n(T)]))},o);if(i(qa(qa(qa({},t),e),C)),T<1)c=requestAnimationFrame(p);else{var P=wv(function(k,O){return aN.apply(void 0,D$(O).concat([n(1)]))},o);i(qa(qa(qa({},t),e),P))}};return p=n.isStepper?b:j,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}var CCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function TCe(t,e){if(t==null)return{};var n=kCe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function kCe(t,e){if(t==null)return{};var n={},a=Object.keys(t),i,s;for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function sA(t){return OCe(t)||PCe(t)||ECe(t)||ACe()}function ACe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ECe(t,e){if(t){if(typeof t=="string")return BP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BP(t,e)}}function PCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OCe(t){if(Array.isArray(t))return BP(t)}function BP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function I$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function _o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(n),!0).forEach(function(a){pv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function pv(t,e,n){return e=FV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MCe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,FV(a.key),a)}}function ICe(t,e,n){return e&&MCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FV(t){var e=RCe(t,"string");return pg(e)==="symbol"?e:String(e)}function RCe(t,e){if(pg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(pg(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zP(t,e)}function zP(t,e){return zP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},zP(t,e)}function FCe(t){var e=$Ce();return function(){var a=iN(t),i;if(e){var s=iN(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return qP(this,i)}}function qP(t,e){if(e&&(pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UP(t)}function UP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $Ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iN(t){return iN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iN(t)}var Ro=function(t){LCe(n,t);var e=FCe(n);function n(a,i){var s;DCe(this,n),s=e.call(this,a,i);var o=s.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,p=o.steps,g=o.children,x=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(UP(s)),s.changeStyle=s.changeStyle.bind(UP(s)),!l||x<=0)return s.state={style:{}},typeof g=="function"&&(s.state={style:f}),qP(s);if(p&&p.length)s.state={style:p[0].style};else if(d){if(typeof g=="function")return s.state={style:d},qP(s);s.state={style:c?pv({},c,d):d}}else s.state={style:{}};return s}return ICe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,d=s.shouldReAnimate,f=s.to,p=s.from,g=this.state.style;if(l){if(!o){var x={style:c?pv({},c,f):f};this.state&&g&&(c&&g[c]!==f||!c&&g!==f)&&this.setState(x);return}if(!(H_e(i.to,f)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=b||d?p:i.to;if(this.state&&g){var S={style:c?pv({},c,j):j};(c&&g[c]!==j||!c&&g!==j)&&this.setState(S)}this.runAnimation(_o(_o({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,d=i.easing,f=i.begin,p=i.onAnimationEnd,g=i.onAnimationStart,x=_Ce(o,l,pCe(d),c,this.changeStyle),b=function(){s.stopJSAnimation=x()};this.manager.start([g,f,b,c,p])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],f=d.style,p=d.duration,g=p===void 0?0:p,x=function(j,S,_){if(_===0)return j;var T=S.duration,C=S.easing,P=C===void 0?"ease":C,k=S.style,O=S.properties,I=S.onAnimationEnd,F=_>0?o[_-1]:S,B=O||Object.keys(k);if(typeof P=="function"||P==="spring")return[].concat(sA(j),[s.runJSAnimation.bind(s,{from:F.style,to:k,duration:T,easing:P}),T]);var $=E$(B,T,P),L=_o(_o(_o({},F.style),k),{},{transition:$});return[].concat(sA(j),[L,T,I]).filter(nCe)};return this.manager.start([c].concat(sA(o.reduce(x,[f,Math.max(g,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=J_e());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,f=i.onAnimationStart,p=i.onAnimationEnd,g=i.steps,x=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var j=l?pv({},l,c):c,S=E$(Object.keys(j),o,d);b.start([f,s,_o(_o({},j),{},{transition:S}),o,p])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=TCe(i,CCe),d=v.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||d===0||o<=0)return s;var p=function(x){var b=x.props,j=b.style,S=j===void 0?{}:j,_=b.className,T=v.cloneElement(x,_o(_o({},c),{},{style:_o(_o({},S),f),className:_}));return T};return d===1?p(v.Children.only(s)):Ce.createElement("div",null,v.Children.map(s,function(g){return p(g)}))}}]),n}(v.PureComponent);Ro.displayName="Animate";Ro.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ro.propTypes={from:cr.oneOfType([cr.object,cr.string]),to:cr.oneOfType([cr.object,cr.string]),attributeName:cr.string,duration:cr.number,begin:cr.number,easing:cr.oneOfType([cr.string,cr.func]),steps:cr.arrayOf(cr.shape({duration:cr.number.isRequired,style:cr.object.isRequired,easing:cr.oneOfType([cr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),cr.func]),properties:cr.arrayOf("string"),onAnimationEnd:cr.func})),children:cr.oneOfType([cr.node,cr.func]),isActive:cr.bool,canBegin:cr.bool,onAnimationEnd:cr.func,shouldReAnimate:cr.bool,onAnimationStart:cr.func,onAnimationReStart:cr.func};function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function sN(){return sN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},sN.apply(this,arguments)}function BCe(t,e){return VCe(t)||UCe(t,e)||qCe(t,e)||zCe()}function zCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qCe(t,e){if(t){if(typeof t=="string")return R$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R$(t,e)}}function R$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function UCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function VCe(t){if(Array.isArray(t))return t}function L$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function F$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L$(Object(n),!0).forEach(function(a){HCe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function HCe(t,e,n){return e=GCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GCe(t){var e=WCe(t,"string");return ib(e)=="symbol"?e:e+""}function WCe(t,e){if(ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ib(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $$=function(e,n,a,i,s){var o=Math.min(Math.abs(a)/2,Math.abs(i)/2),l=i>=0?1:-1,c=a>=0?1:-1,d=i>=0&&a>=0||i<0&&a<0?1:0,f;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=s[g]>o?o:s[g];f="M".concat(e,",").concat(n+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+c*p[0],",").concat(n)),f+="L ".concat(e+a-c*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+a,",").concat(n+l*p[1])),f+="L ".concat(e+a,",").concat(n+i-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+a-c*p[2],",").concat(n+i)),f+="L ".concat(e+c*p[3],",").concat(n+i),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(n+i-l*p[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var b=Math.min(o,s);f="M ".concat(e,",").concat(n+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+c*b,",").concat(n,`
            L `).concat(e+a-c*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+a,",").concat(n+l*b,`
            L `).concat(e+a,",").concat(n+i-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+a-c*b,",").concat(n+i,`
            L `).concat(e+c*b,",").concat(n+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e,",").concat(n+i-l*b," Z")}else f="M ".concat(e,",").concat(n," h ").concat(a," v ").concat(i," h ").concat(-a," Z");return f},YCe=function(e,n){if(!e||!n)return!1;var a=e.x,i=e.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(s,s+l),f=Math.max(s,s+l),p=Math.min(o,o+c),g=Math.max(o,o+c);return a>=d&&a<=f&&i>=p&&i<=g}return!1},KCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pM=function(e){var n=F$(F$({},KCe),e),a=v.useRef(),i=v.useState(-1),s=BCe(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var P=a.current.getTotalLength();P&&l(P)}catch{}},[]);var c=n.x,d=n.y,f=n.width,p=n.height,g=n.radius,x=n.className,b=n.animationEasing,j=n.animationDuration,S=n.animationBegin,_=n.isAnimationActive,T=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var C=un("recharts-rectangle",x);return T?Ce.createElement(Ro,{canBegin:o>0,from:{width:f,height:p,x:c,y:d},to:{width:f,height:p,x:c,y:d},duration:j,animationEasing:b,isActive:T},function(P){var k=P.width,O=P.height,I=P.x,F=P.y;return Ce.createElement(Ro,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:j,isActive:_,easing:b},Ce.createElement("path",sN({},$t(n,!0),{className:C,d:$$(I,F,k,O,g),ref:a})))}):Ce.createElement("path",sN({},$t(n,!0),{className:C,d:$$(c,d,f,p,g)}))},QCe=["points","className","baseLinePoints","connectNulls"];function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Am.apply(this,arguments)}function XCe(t,e){if(t==null)return{};var n=JCe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function JCe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function B$(t){return n2e(t)||t2e(t)||e2e(t)||ZCe()}function ZCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e2e(t,e){if(t){if(typeof t=="string")return VP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VP(t,e)}}function t2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function n2e(t){if(Array.isArray(t))return VP(t)}function VP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var z$=function(e){return e&&e.x===+e.x&&e.y===+e.y},r2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(a){z$(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),z$(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Nv=function(e,n){var a=r2e(e);n&&(a=[a.reduce(function(s,o){return[].concat(B$(s),B$(o))},[])]);var i=a.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(i,"Z"):i},a2e=function(e,n,a){var i=Nv(e,a);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Nv(n.reverse(),a).slice(1))},i2e=function(e){var n=e.points,a=e.className,i=e.baseLinePoints,s=e.connectNulls,o=XCe(e,QCe);if(!n||!n.length)return null;var l=un("recharts-polygon",a);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",d=a2e(n,i,s);return Ce.createElement("g",{className:l},Ce.createElement("path",Am({},$t(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?Ce.createElement("path",Am({},$t(o,!0),{fill:"none",d:Nv(n,s)})):null,c?Ce.createElement("path",Am({},$t(o,!0),{fill:"none",d:Nv(i,s)})):null)}var f=Nv(n,s);return Ce.createElement("path",Am({},$t(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function HP(){return HP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},HP.apply(this,arguments)}var Vb=function(e){var n=e.cx,a=e.cy,i=e.r,s=e.className,o=un("recharts-dot",s);return n===+n&&a===+a&&i===+i?v.createElement("circle",HP({},$t(e,!1),Aw(e),{className:o,cx:n,cy:a,r:i})):null};function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}var s2e=["x","y","top","left","width","height","className"];function GP(){return GP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},GP.apply(this,arguments)}function q$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function o2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q$(Object(n),!0).forEach(function(a){l2e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function l2e(t,e,n){return e=c2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c2e(t){var e=u2e(t,"string");return sb(e)=="symbol"?e:e+""}function u2e(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(sb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d2e(t,e){if(t==null)return{};var n=h2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function h2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var f2e=function(e,n,a,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(a)},p2e=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,f=e.width,p=f===void 0?0:f,g=e.height,x=g===void 0?0:g,b=e.className,j=d2e(e,s2e),S=o2e({x:a,y:s,top:l,left:d,width:p,height:x},j);return!bt(a)||!bt(s)||!bt(p)||!bt(x)||!bt(l)||!bt(d)?null:Ce.createElement("path",GP({},$t(S,!0),{className:un("recharts-cross",b),d:f2e(a,s,p,x,l,d)}))},oA,U$;function m2e(){if(U$)return oA;U$=1;var t=bS(),e=Z7(),n=Ll();function a(i,s){return i&&i.length?t(i,n(s,2),e):void 0}return oA=a,oA}var g2e=m2e();const y2e=Un(g2e);var lA,V$;function x2e(){if(V$)return lA;V$=1;var t=bS(),e=Ll(),n=eV();function a(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return lA=a,lA}var v2e=x2e();const b2e=Un(v2e);var j2e=["cx","cy","angle","ticks","axisLine"],w2e=["ticks","tick","angle","tickFormatter","stroke"];function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function Sv(){return Sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Sv.apply(this,arguments)}function H$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function $h(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H$(Object(n),!0).forEach(function(a){SS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function G$(t,e){if(t==null)return{};var n=N2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function N2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function S2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,BV(a.key),a)}}function _2e(t,e,n){return e&&W$(t.prototype,e),n&&W$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C2e(t,e,n){return e=oN(e),T2e(t,$V()?Reflect.construct(e,n||[],oN(t).constructor):e.apply(t,n))}function T2e(t,e){if(e&&(mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k2e(t)}function k2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $V(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($V=function(){return!!t})()}function oN(t){return oN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oN(t)}function A2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WP(t,e)}function WP(t,e){return WP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},WP(t,e)}function SS(t,e,n){return e=BV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BV(t){var e=E2e(t,"string");return mg(e)=="symbol"?e:e+""}function E2e(t,e){if(mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(mg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _S=function(t){function e(){return S2e(this,e),C2e(this,e,arguments)}return A2e(e,t),_2e(e,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Mr(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=y2e(l,function(f){return f.coordinate||0}),d=b2e(l,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=a.axisLine,d=G$(a,j2e),f=l.reduce(function(b,j){return[Math.min(b[0],j.coordinate),Math.max(b[1],j.coordinate)]},[1/0,-1/0]),p=Mr(i,s,f[0],o),g=Mr(i,s,f[1],o),x=$h($h($h({},$t(d,!1)),{},{fill:"none"},$t(c,!1)),{},{x1:p.x,y1:p.y,x2:g.x,y2:g.y});return Ce.createElement("line",Sv({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,d=i.stroke,f=G$(i,w2e),p=this.getTickTextAnchor(),g=$t(f,!1),x=$t(o,!1),b=s.map(function(j,S){var _=a.getTickValueCoord(j),T=$h($h($h($h({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},g),{},{stroke:"none",fill:d},x),{},{index:S},_),{},{payload:j});return Ce.createElement(Pn,Sv({className:un("recharts-polar-radius-axis-tick",kV(o)),key:"tick-".concat(j.coordinate)},Sf(a.props,j,S)),e.renderTickItem(o,T,c?c(j.value,S):j.value))});return Ce.createElement(Pn,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:Ce.createElement(Pn,{className:un("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Pa.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Ce.isValidElement(a)?o=Ce.cloneElement(a,i):en(a)?o=a(i):o=Ce.createElement(_f,Sv({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(v.PureComponent);SS(_S,"displayName","PolarRadiusAxis");SS(_S,"axisType","radiusAxis");SS(_S,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Gh.apply(this,arguments)}function Y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y$(Object(n),!0).forEach(function(a){CS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function P2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,qV(a.key),a)}}function O2e(t,e,n){return e&&K$(t.prototype,e),n&&K$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D2e(t,e,n){return e=lN(e),M2e(t,zV()?Reflect.construct(e,n||[],lN(t).constructor):e.apply(t,n))}function M2e(t,e){if(e&&(gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I2e(t)}function I2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zV=function(){return!!t})()}function lN(t){return lN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lN(t)}function R2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YP(t,e)}function YP(t,e){return YP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},YP(t,e)}function CS(t,e,n){return e=qV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qV(t){var e=L2e(t,"string");return gg(e)=="symbol"?e:e+""}function L2e(t,e){if(gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var F2e=Math.PI/180,$2e=1e-5,TS=function(t){function e(){return P2e(this,e),D2e(this,e,arguments)}return R2e(e,t),O2e(e,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,d=i.tickSize,f=d||8,p=Mr(s,o,l,a.coordinate),g=Mr(s,o,l+(c==="inner"?-1:1)*f,a.coordinate);return{x1:p.x,y1:p.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*F2e),o;return s>$2e?o=i==="outer"?"start":"end":s<-1e-5?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,l=a.axisLine,c=a.axisLineType,d=Bh(Bh({},$t(this.props,!1)),{},{fill:"none"},$t(l,!1));if(c==="circle")return Ce.createElement(Vb,Gh({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:s,r:o}));var f=this.props.ticks,p=f.map(function(g){return Mr(i,s,o,g.coordinate)});return Ce.createElement(i2e,Gh({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,d=i.stroke,f=$t(this.props,!1),p=$t(o,!1),g=Bh(Bh({},f),{},{fill:"none"},$t(l,!1)),x=s.map(function(b,j){var S=a.getTickLineCoord(b),_=a.getTickTextAnchor(b),T=Bh(Bh(Bh({textAnchor:_},f),{},{stroke:"none",fill:d},p),{},{index:j,payload:b,x:S.x2,y:S.y2});return Ce.createElement(Pn,Gh({className:un("recharts-polar-angle-axis-tick",kV(o)),key:"tick-".concat(b.coordinate)},Sf(a.props,b,j)),l&&Ce.createElement("line",Gh({className:"recharts-polar-angle-axis-tick-line"},g,S)),o&&e.renderTickItem(o,T,c?c(b.value,j):b.value))});return Ce.createElement(Pn,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:Ce.createElement(Pn,{className:un("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Ce.isValidElement(a)?o=Ce.cloneElement(a,i):en(a)?o=a(i):o=Ce.createElement(_f,Gh({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(v.PureComponent);CS(TS,"displayName","PolarAngleAxis");CS(TS,"axisType","angleAxis");CS(TS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var cA,Q$;function B2e(){if(Q$)return cA;Q$=1;var t=J9(),e=t(Object.getPrototypeOf,Object);return cA=e,cA}var uA,X$;function z2e(){if(X$)return uA;X$=1;var t=Vc(),e=B2e(),n=Hc(),a="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function d(f){if(!n(f)||t(f)!=a)return!1;var p=e(f);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==c}return uA=d,uA}var q2e=z2e();const U2e=Un(q2e);var dA,J$;function V2e(){if(J$)return dA;J$=1;var t=Vc(),e=Hc(),n="[object Boolean]";function a(i){return i===!0||i===!1||e(i)&&t(i)==n}return dA=a,dA}var H2e=V2e();const G2e=Un(H2e);function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function cN(){return cN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cN.apply(this,arguments)}function W2e(t,e){return X2e(t)||Q2e(t,e)||K2e(t,e)||Y2e()}function Y2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K2e(t,e){if(t){if(typeof t=="string")return Z$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z$(t,e)}}function Z$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Q2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function X2e(t){if(Array.isArray(t))return t}function e8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function t8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e8(Object(n),!0).forEach(function(a){J2e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function J2e(t,e,n){return e=Z2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z2e(t){var e=eTe(t,"string");return ob(e)=="symbol"?e:e+""}function eTe(t,e){if(ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ob(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n8=function(e,n,a,i,s){var o=a-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+a,",").concat(n),l+="L ".concat(e+a-o/2,",").concat(n+s),l+="L ".concat(e+a-o/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},tTe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nTe=function(e){var n=t8(t8({},tTe),e),a=v.useRef(),i=v.useState(-1),s=W2e(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var C=a.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,d=n.y,f=n.upperWidth,p=n.lowerWidth,g=n.height,x=n.className,b=n.animationEasing,j=n.animationDuration,S=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||g!==+g||f===0&&p===0||g===0)return null;var T=un("recharts-trapezoid",x);return _?Ce.createElement(Ro,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:g,x:c,y:d},to:{upperWidth:f,lowerWidth:p,height:g,x:c,y:d},duration:j,animationEasing:b,isActive:_},function(C){var P=C.upperWidth,k=C.lowerWidth,O=C.height,I=C.x,F=C.y;return Ce.createElement(Ro,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:j,easing:b},Ce.createElement("path",cN({},$t(n,!0),{className:T,d:n8(I,F,P,k,O),ref:a})))}):Ce.createElement("g",null,Ce.createElement("path",cN({},$t(n,!0),{className:T,d:n8(c,d,f,p,g)})))},rTe=["option","shapeType","propTransformer","activeClassName","isActive"];function lb(t){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(t)}function aTe(t,e){if(t==null)return{};var n=iTe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function iTe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function r8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function uN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r8(Object(n),!0).forEach(function(a){sTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function sTe(t,e,n){return e=oTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oTe(t){var e=lTe(t,"string");return lb(e)=="symbol"?e:e+""}function lTe(t,e){if(lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(lb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cTe(t,e){return uN(uN({},e),t)}function uTe(t,e){return t==="symbols"}function a8(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Ce.createElement(pM,n);case"trapezoid":return Ce.createElement(nTe,n);case"sector":return Ce.createElement(PV,n);case"symbols":if(uTe(e))return Ce.createElement(DD,n);break;default:return null}}function dTe(t){return v.isValidElement(t)?t.props:t}function UV(t){var e=t.option,n=t.shapeType,a=t.propTransformer,i=a===void 0?cTe:a,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=aTe(t,rTe),d;if(v.isValidElement(e))d=v.cloneElement(e,uN(uN({},c),dTe(e)));else if(en(e))d=e(c);else if(U2e(e)&&!G2e(e)){var f=i(e,c);d=Ce.createElement(a8,{shapeType:n,elementProps:f})}else{var p=c;d=Ce.createElement(a8,{shapeType:n,elementProps:p})}return l?Ce.createElement(Pn,{className:o},d):d}function kS(t,e){return e!=null&&"trapezoids"in t.props}function AS(t,e){return e!=null&&"sectors"in t.props}function cb(t,e){return e!=null&&"points"in t.props}function hTe(t,e){var n,a,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.y)||t.y===e.y;return i&&s}function fTe(t,e){var n=t.endAngle===e.endAngle,a=t.startAngle===e.startAngle;return n&&a}function pTe(t,e){var n=t.x===e.x,a=t.y===e.y,i=t.z===e.z;return n&&a&&i}function mTe(t,e){var n;return kS(t,e)?n=hTe:AS(t,e)?n=fTe:cb(t,e)&&(n=pTe),n}function gTe(t,e){var n;return kS(t,e)?n="trapezoids":AS(t,e)?n="sectors":cb(t,e)&&(n="points"),n}function yTe(t,e){if(kS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(AS(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return cb(t,e)?e.payload:{}}function xTe(t){var e=t.activeTooltipItem,n=t.graphicalItem,a=t.itemData,i=gTe(n,e),s=yTe(n,e),o=a.filter(function(c,d){var f=Cf(s,c),p=n.props[i].filter(function(b){var j=mTe(n,e);return j(b,e)}),g=n.props[i].indexOf(p[p.length-1]),x=d===g;return f&&x}),l=a.indexOf(o[o.length-1]);return l}var iw;function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Em.apply(this,arguments)}function i8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i8(Object(n),!0).forEach(function(a){Ks(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function vTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,HV(a.key),a)}}function bTe(t,e,n){return e&&s8(t.prototype,e),n&&s8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jTe(t,e,n){return e=dN(e),wTe(t,VV()?Reflect.construct(e,n||[],dN(t).constructor):e.apply(t,n))}function wTe(t,e){if(e&&(yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NTe(t)}function NTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VV=function(){return!!t})()}function dN(t){return dN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dN(t)}function STe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KP(t,e)}function KP(t,e){return KP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},KP(t,e)}function Ks(t,e,n){return e=HV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HV(t){var e=_Te(t,"string");return yg(e)=="symbol"?e:e+""}function _Te(t,e){if(yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(yg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fl=function(t){function e(n){var a;return vTe(this,e),a=jTe(this,e,[n]),Ks(a,"pieRef",null),Ks(a,"sectorRefs",[]),Ks(a,"id",Df("recharts-pie-")),Ks(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),en(i)&&i()}),Ks(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),en(i)&&i()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return STe(e,t),bTe(e,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,d=s.valueKey,f=$t(this.props,!1),p=$t(o,!1),g=$t(l,!1),x=o&&o.offsetRadius||20,b=a.map(function(j,S){var _=(j.startAngle+j.endAngle)/2,T=Mr(j.cx,j.cy,j.outerRadius+x,_),C=Or(Or(Or(Or({},f),j),{},{stroke:"none"},p),{},{index:S,textAnchor:e.getTextAnchor(T.x,j.cx)},T),P=Or(Or(Or(Or({},f),j),{},{fill:"none",stroke:j.fill},g),{},{index:S,points:[Mr(j.cx,j.cy,j.outerRadius,_),T]}),k=c;return ln(c)&&ln(d)?k="value":ln(c)&&(k=d),Ce.createElement(Pn,{key:"label-".concat(j.startAngle,"-").concat(j.endAngle,"-").concat(j.midAngle,"-").concat(S)},l&&e.renderLabelLineItem(l,P,"line"),e.renderLabelItem(o,C,sa(j,k)))});return Ce.createElement(Pn,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return a.map(function(d,f){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&a.length!==1)return null;var p=i.isActiveIndex(f),g=c&&i.hasActiveIndex()?c:null,x=p?o:g,b=Or(Or({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return Ce.createElement(Pn,Em({ref:function(S){S&&!i.sectorRefs.includes(S)&&i.sectorRefs.push(S)},tabIndex:-1,className:"recharts-pie-sector"},Sf(i.props,d,f),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(f)}),Ce.createElement(UV,Em({option:x,isActive:p,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state,g=p.prevSectors,x=p.prevIsAnimationActive;return Ce.createElement(Ro,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var j=b.t,S=[],_=s&&s[0],T=_.startAngle;return s.forEach(function(C,P){var k=g&&g[P],O=P>0?As(C,"paddingAngle",0):0;if(k){var I=wa(k.endAngle-k.startAngle,C.endAngle-C.startAngle),F=Or(Or({},C),{},{startAngle:T+O,endAngle:T+I(j)+O});S.push(F),T=F.endAngle}else{var B=C.endAngle,$=C.startAngle,L=wa(0,B-$),V=L(j),H=Or(Or({},C),{},{startAngle:T+O,endAngle:T+V+O});S.push(H),T=H.endAngle}}),Ce.createElement(Pn,null,a.renderSectorsStatically(S))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!Cf(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,d=i.cx,f=i.cy,p=i.innerRadius,g=i.outerRadius,x=i.isAnimationActive,b=this.state.isAnimationFinished;if(s||!o||!o.length||!bt(d)||!bt(f)||!bt(p)||!bt(g))return null;var j=un("recharts-pie",l);return Ce.createElement(Pn,{tabIndex:this.props.rootTabIndex,className:j,ref:function(_){a.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),Pa.renderCallByParent(this.props,null,!1),(!x||b)&&Pl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i,s){if(Ce.isValidElement(a))return Ce.cloneElement(a,i);if(en(a))return a(i);var o=un("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Ce.createElement(df,Em({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,i,s){if(Ce.isValidElement(a))return Ce.cloneElement(a,i);var o=s;if(en(a)&&(o=a(i),Ce.isValidElement(o)))return o;var l=un("recharts-pie-label-text",typeof a!="boolean"&&!en(a)?a.className:"");return Ce.createElement(_f,Em({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(v.PureComponent);iw=Fl;Ks(Fl,"displayName","Pie");Ks(Fl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!xd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ks(Fl,"parseDeltaAngle",function(t,e){var n=Oi(e-t),a=Math.min(Math.abs(e-t),360);return n*a});Ks(Fl,"getRealPieData",function(t){var e=t.data,n=t.children,a=$t(t,!1),i=Es(n,Fb);return e&&e.length?e.map(function(s,o){return Or(Or(Or({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return Or(Or({},a),s.props)}):[]});Ks(Fl,"parseCoordinateOfPie",function(t,e){var n=e.top,a=e.left,i=e.width,s=e.height,o=TV(i,s),l=a+Di(t.cx,i,i/2),c=n+Di(t.cy,s,s/2),d=Di(t.innerRadius,o,0),f=Di(t.outerRadius,o,o*.8),p=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:f,maxRadius:p}});Ks(Fl,"getComposedData",function(t){var e=t.item,n=t.offset,a=e.type.defaultProps!==void 0?Or(Or({},e.type.defaultProps),e.props):e.props,i=iw.getRealPieData(a);if(!i||!i.length)return null;var s=a.cornerRadius,o=a.startAngle,l=a.endAngle,c=a.paddingAngle,d=a.dataKey,f=a.nameKey,p=a.valueKey,g=a.tooltipType,x=Math.abs(a.minAngle),b=iw.parseCoordinateOfPie(a,n),j=iw.parseDeltaAngle(o,l),S=Math.abs(j),_=d;ln(d)&&ln(p)?(Mo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):ln(d)&&(Mo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=p);var T=i.filter(function(F){return sa(F,_,0)!==0}).length,C=(S>=360?T:T-1)*c,P=S-T*x-C,k=i.reduce(function(F,B){var $=sa(B,_,0);return F+(bt($)?$:0)},0),O;if(k>0){var I;O=i.map(function(F,B){var $=sa(F,_,0),L=sa(F,f,B),V=(bt($)?$:0)/k,H;B?H=I.endAngle+Oi(j)*c*($!==0?1:0):H=o;var te=H+Oi(j)*(($!==0?x:0)+V*P),X=(H+te)/2,q=(b.innerRadius+b.outerRadius)/2,Y=[{name:L,value:$,payload:F,dataKey:_,type:g}],se=Mr(b.cx,b.cy,q,X);return I=Or(Or(Or({percent:V,cornerRadius:s,name:L,tooltipPayload:Y,midAngle:X,middleRadius:q,tooltipPosition:se},F),b),{},{value:sa(F,_),startAngle:H,endAngle:te,payload:F,paddingAngle:Oi(j)*c}),I})}return Or(Or({},b),{},{sectors:O,data:i})});var hA,o8;function CTe(){if(o8)return hA;o8=1;var t=Math.ceil,e=Math.max;function n(a,i,s,o){for(var l=-1,c=e(t((i-a)/(s||1)),0),d=Array(c);c--;)d[o?c:++l]=a,a+=s;return d}return hA=n,hA}var fA,l8;function GV(){if(l8)return fA;l8=1;var t=p7(),e=1/0,n=17976931348623157e292;function a(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*n}return i===i?i:0}return fA=a,fA}var pA,c8;function TTe(){if(c8)return pA;c8=1;var t=CTe(),e=fS(),n=GV();function a(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return pA=a,pA}var mA,u8;function kTe(){if(u8)return mA;u8=1;var t=TTe(),e=t();return mA=e,mA}var ATe=kTe();const hN=Un(ATe);function ub(t){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(t)}function d8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function h8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d8(Object(n),!0).forEach(function(a){WV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function WV(t,e,n){return e=ETe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ETe(t){var e=PTe(t,"string");return ub(e)=="symbol"?e:e+""}function PTe(t,e){if(ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ub(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OTe=["Webkit","Moz","O","ms"],DTe=function(e,n){var a=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=OTe.reduce(function(s,o){return h8(h8({},s),{},WV({},o+a,n))},{});return i[e]=n,i};function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function fN(){return fN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},fN.apply(this,arguments)}function f8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function gA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f8(Object(n),!0).forEach(function(a){ws(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function MTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,KV(a.key),a)}}function ITe(t,e,n){return e&&p8(t.prototype,e),n&&p8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RTe(t,e,n){return e=pN(e),LTe(t,YV()?Reflect.construct(e,n||[],pN(t).constructor):e.apply(t,n))}function LTe(t,e){if(e&&(xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FTe(t)}function FTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YV=function(){return!!t})()}function pN(t){return pN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pN(t)}function $Te(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QP(t,e)}function QP(t,e){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},QP(t,e)}function ws(t,e,n){return e=KV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KV(t){var e=BTe(t,"string");return xg(e)=="symbol"?e:e+""}function BTe(t,e){if(xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(xg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zTe=function(e){var n=e.data,a=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=bv().domain(hN(0,c)).range([s,s+o-l]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(i),scale:d,scaleValues:f}},m8=function(e){return e.changedTouches&&!!e.changedTouches.length},vg=function(t){function e(n){var a;return MTe(this,e),a=RTe(this,e,[n]),ws(a,"handleDrag",function(i){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(i):a.state.isSlideMoving&&a.handleSlideDrag(i)}),ws(a,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&a.handleDrag(i.changedTouches[0])}),ws(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=a.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),a.detachDragEndListener()}),ws(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),ws(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),ws(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),ws(a,"handleSlideDragStart",function(i){var s=m8(i)?i.changedTouches[0]:i;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return $Te(e,t),ITe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var i=a.startX,s=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,p=Math.min(i,s),g=Math.max(i,s),x=e.getIndexInRange(o,p),b=e.getIndexInRange(o,g);return{startIndex:x-x%c,endIndex:b===f?f:b-b%c}}},{key:"getTextOfTick",value:function(a){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=sa(s[a],l,a);return en(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,f=c.width,p=c.travellerWidth,g=c.startIndex,x=c.endIndex,b=c.onChange,j=a.pageX-s;j>0?j=Math.min(j,d+f-p-l,d+f-p-o):j<0&&(j=Math.max(j,d-o,d-l));var S=this.getIndex({startX:o+j,endX:l+j});(S.startIndex!==g||S.endIndex!==x)&&b&&b(S),this.setState({startX:o+j,endX:l+j,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,i){var s=m8(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],f=this.props,p=f.x,g=f.width,x=f.travellerWidth,b=f.onChange,j=f.gap,S=f.data,_={startX:this.state.startX,endX:this.state.endX},T=a.pageX-s;T>0?T=Math.min(T,p+g-x-d):T<0&&(T=Math.max(T,p-d)),_[o]=d+T;var C=this.getIndex(_),P=C.startIndex,k=C.endIndex,O=function(){var F=S.length-1;return o==="startX"&&(l>c?P%j===0:k%j===0)||l<c&&k===F||o==="endX"&&(l>c?k%j===0:P%j===0)||l>c&&k===F};this.setState(ws(ws({},o,d+T),"brushMoveStartX",a.pageX),function(){b&&O()&&b(C)})}},{key:"handleTravellerMoveKeyboard",value:function(a,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[i],p=l.indexOf(f);if(p!==-1){var g=p+a;if(!(g===-1||g>=l.length)){var x=l[g];i==="startX"&&x>=d||i==="endX"&&x<=c||this.setState(ws({},i,x),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return Ce.createElement("rect",{stroke:d,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.data,d=a.children,f=a.padding,p=v.Children.only(d);return p?Ce.cloneElement(p,{x:i,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,i){var s,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,p=c.height,g=c.traveller,x=c.ariaLabel,b=c.data,j=c.startIndex,S=c.endIndex,_=Math.max(a,this.props.x),T=gA(gA({},$t(this.props,!1)),{},{x:_,y:d,width:f,height:p}),C=x||"Min value: ".concat((s=b[j])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=b[S])===null||o===void 0?void 0:o.name);return Ce.createElement(Pn,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(g,T))}},{key:"renderSlide",value:function(a,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,d=s.travellerWidth,f=Math.min(a,i)+d,p=Math.max(Math.abs(i-a)-d,0);return Ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var a=this.props,i=a.startIndex,s=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,f=this.state,p=f.startX,g=f.endX,x=5,b={pointerEvents:"none",fill:d};return Ce.createElement(Pn,{className:"recharts-brush-texts"},Ce.createElement(_f,fN({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-x,y:o+l/2},b),this.getTextOfTick(i)),Ce.createElement(_f,fN({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+c+x,y:o+l/2},b),this.getTextOfTick(s)))}},{key:"render",value:function(){var a=this.props,i=a.data,s=a.className,o=a.children,l=a.x,c=a.y,d=a.width,f=a.height,p=a.alwaysShowText,g=this.state,x=g.startX,b=g.endX,j=g.isTextActive,S=g.isSlideMoving,_=g.isTravellerMoving,T=g.isTravellerFocused;if(!i||!i.length||!bt(l)||!bt(c)||!bt(d)||!bt(f)||d<=0||f<=0)return null;var C=un("recharts-brush",s),P=Ce.Children.count(o)===1,k=DTe("userSelect","none");return Ce.createElement(Pn,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(j||S||_||T||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var i=a.x,s=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(s+l/2)-1;return Ce.createElement(Ce.Fragment,null,Ce.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),Ce.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),Ce.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,i){var s;return Ce.isValidElement(a)?s=Ce.cloneElement(a,i):en(a)?s=a(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(a,i){var s=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,f=a.startIndex,p=a.endIndex;if(s!==i.prevData||d!==i.prevUpdateId)return gA({prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},s&&s.length?zTe({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var g=i.scale.domain().map(function(x){return i.scale(x)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(a.startIndex),endX:i.scale(a.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(a,i){for(var s=a.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>i?l=c:o=c}return i>=a[l]?l:o}}])}(v.PureComponent);ws(vg,"displayName","Brush");ws(vg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var yA,g8;function qTe(){if(g8)return yA;g8=1;var t=BD();function e(n,a){var i;return t(n,function(s,o,l){return i=a(s,o,l),!i}),!!i}return yA=e,yA}var xA,y8;function UTe(){if(y8)return xA;y8=1;var t=H9(),e=Ll(),n=qTe(),a=ls(),i=fS();function s(o,l,c){var d=a(o)?t:n;return c&&i(o,l,c)&&(l=void 0),d(o,e(l,3))}return xA=s,xA}var VTe=UTe();const HTe=Un(VTe);var Ol=function(e,n){var a=e.alwaysShow,i=e.ifOverflow;return a&&(i="extendDomain"),i===n},vA,x8;function GTe(){if(x8)return vA;x8=1;var t=c7();function e(n,a,i){a=="__proto__"&&t?t(n,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[a]=i}return vA=e,vA}var bA,v8;function WTe(){if(v8)return bA;v8=1;var t=GTe(),e=o7(),n=Ll();function a(i,s){var o={};return s=n(s,3),e(i,function(l,c,d){t(o,c,s(l,c,d))}),o}return bA=a,bA}var YTe=WTe();const KTe=Un(YTe);var jA,b8;function QTe(){if(b8)return jA;b8=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(!n(e[a],a,e))return!1;return!0}return jA=t,jA}var wA,j8;function XTe(){if(j8)return wA;j8=1;var t=BD();function e(n,a){var i=!0;return t(n,function(s,o,l){return i=!!a(s,o,l),i}),i}return wA=e,wA}var NA,w8;function JTe(){if(w8)return NA;w8=1;var t=QTe(),e=XTe(),n=Ll(),a=ls(),i=fS();function s(o,l,c){var d=a(o)?t:e;return c&&i(o,l,c)&&(l=void 0),d(o,n(l,3))}return NA=s,NA}var ZTe=JTe();const QV=Un(ZTe);var eke=["x","y"];function db(t){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(t)}function XP(){return XP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},XP.apply(this,arguments)}function N8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function nv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N8(Object(n),!0).forEach(function(a){tke(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function tke(t,e,n){return e=nke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nke(t){var e=rke(t,"string");return db(e)=="symbol"?e:e+""}function rke(t,e){if(db(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(db(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ake(t,e){if(t==null)return{};var n=ike(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function ike(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function ske(t,e){var n=t.x,a=t.y,i=ake(t,eke),s="".concat(n),o=parseInt(s,10),l="".concat(a),c=parseInt(l,10),d="".concat(e.height||i.height),f=parseInt(d,10),p="".concat(e.width||i.width),g=parseInt(p,10);return nv(nv(nv(nv(nv({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function S8(t){return Ce.createElement(UV,XP({shapeType:"rectangle",propTransformer:ske,activeClassName:"recharts-active-bar"},t))}var oke=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,i){if(typeof e=="number")return e;var s=bt(a)||Pye(a);return s?e(a,i):(s||kf(),n)}},lke=["value","background"],XV;function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function cke(t,e){if(t==null)return{};var n=uke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function uke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function mN(){return mN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},mN.apply(this,arguments)}function _8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function pa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_8(Object(n),!0).forEach(function(a){id(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function dke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,ZV(a.key),a)}}function hke(t,e,n){return e&&C8(t.prototype,e),n&&C8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fke(t,e,n){return e=gN(e),pke(t,JV()?Reflect.construct(e,n||[],gN(t).constructor):e.apply(t,n))}function pke(t,e){if(e&&(bg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mke(t)}function mke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JV=function(){return!!t})()}function gN(t){return gN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gN(t)}function gke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JP(t,e)}function JP(t,e){return JP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},JP(t,e)}function id(t,e,n){return e=ZV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZV(t){var e=yke(t,"string");return bg(e)=="symbol"?e:e+""}function yke(t,e){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(bg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wd=function(t){function e(){var n;dke(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=fke(this,e,[].concat(i)),id(n,"state",{isAnimationFinished:!1}),id(n,"id",Df("recharts-bar-")),id(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),id(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return gke(e,t),hke(e,[{key:"renderRectanglesStatically",value:function(a){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,d=s.activeBar,f=$t(this.props,!1);return a&&a.map(function(p,g){var x=g===c,b=x?d:o,j=pa(pa(pa({},f),p),{},{isActive:x,option:b,index:g,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ce.createElement(Pn,mN({className:"recharts-bar-rectangle"},Sf(i.props,p,g),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(g)}),Ce.createElement(S8,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,p=i.animationId,g=this.state.prevData;return Ce.createElement(Ro,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,j=s.map(function(S,_){var T=g&&g[_];if(T){var C=wa(T.x,S.x),P=wa(T.y,S.y),k=wa(T.width,S.width),O=wa(T.height,S.height);return pa(pa({},S),{},{x:C(b),y:P(b),width:k(b),height:O(b)})}if(o==="horizontal"){var I=wa(0,S.height),F=I(b);return pa(pa({},S),{},{y:S.y+S.height-F,height:F})}var B=wa(0,S.width),$=B(b);return pa(pa({},S),{},{width:$})});return Ce.createElement(Pn,null,a.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var a=this.props,i=a.data,s=a.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!Cf(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var a=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=$t(this.props.background,!1);return s.map(function(d,f){d.value;var p=d.background,g=cke(d,lke);if(!p)return null;var x=pa(pa(pa(pa(pa({},g),{},{fill:"#eee"},p),c),Sf(a.props,d,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Ce.createElement(S8,mN({key:"background-bar-".concat(f),option:a.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=Es(f,Ub);if(!p)return null;var g=d==="vertical"?o[0].height/2:o[0].width/2,x=function(S,_){var T=Array.isArray(S.value)?S.value[1]:S.value;return{x:S.x,y:S.y,value:T,errorVal:sa(S,_)}},b={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Ce.createElement(Pn,b,p.map(function(j){return Ce.cloneElement(j,{key:"error-bar-".concat(i,"-").concat(j.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var a=this.props,i=a.hide,s=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,f=a.top,p=a.width,g=a.height,x=a.isAnimationActive,b=a.background,j=a.id;if(i||!s||!s.length)return null;var S=this.state.isAnimationFinished,_=un("recharts-bar",o),T=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,P=T||C,k=ln(j)?this.id:j;return Ce.createElement(Pn,{className:_},T||C?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(k)},Ce.createElement("rect",{x:T?d:d-p/2,y:C?f:f-g/2,width:T?p:p*2,height:C?g:g*2}))):null,Ce.createElement(Pn,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(k,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,k),(!x||S)&&Pl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:i.curData}:a.data!==i.curData?{curData:a.data}:null}}])}(v.PureComponent);XV=wd;id(wd,"displayName","Bar");id(wd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!xd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});id(wd,"getComposedData",function(t){var e=t.props,n=t.item,a=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=HNe(a,n);if(!x)return null;var b=e.layout,j=n.type.defaultProps,S=j!==void 0?pa(pa({},j),n.props):n.props,_=S.dataKey,T=S.children,C=S.minPointSize,P=b==="horizontal"?o:s,k=d?P.scale.domain():null,O=JNe({numericAxis:P}),I=Es(T,Fb),F=p.map(function(B,$){var L,V,H,te,X,q;d?L=GNe(d[f+$],k):(L=sa(B,_),Array.isArray(L)||(L=[O,L]));var Y=oke(C,XV.defaultProps.minPointSize)(L[1],$);if(b==="horizontal"){var se,G=[o.scale(L[0]),o.scale(L[1])],z=G[0],ce=G[1];V=JF({axis:s,ticks:l,bandSize:i,offset:x.offset,entry:B,index:$}),H=(se=ce??z)!==null&&se!==void 0?se:void 0,te=x.size;var we=z-ce;if(X=Number.isNaN(we)?0:we,q={x:V,y:o.y,width:te,height:o.height},Math.abs(Y)>0&&Math.abs(X)<Math.abs(Y)){var K=Oi(X||Y)*(Math.abs(Y)-Math.abs(X));H-=K,X+=K}}else{var Ie=[s.scale(L[0]),s.scale(L[1])],We=Ie[0],Re=Ie[1];if(V=We,H=JF({axis:o,ticks:c,bandSize:i,offset:x.offset,entry:B,index:$}),te=Re-We,X=x.size,q={x:s.x,y:H,width:s.width,height:X},Math.abs(Y)>0&&Math.abs(te)<Math.abs(Y)){var Fe=Oi(te||Y)*(Math.abs(Y)-Math.abs(te));te+=Fe}}return pa(pa(pa({},B),{},{x:V,y:H,width:te,height:X,value:d?L:L[1],payload:B,background:q},I&&I[$]&&I[$].props),{},{tooltipPayload:[_V(n,B)],tooltipPosition:{x:V+te/2,y:H+X/2}})});return pa({data:F,layout:b},g)});function hb(t){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hb(t)}function xke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,eH(a.key),a)}}function vke(t,e,n){return e&&T8(t.prototype,e),n&&T8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function k8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ko(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(n),!0).forEach(function(a){ES(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ES(t,e,n){return e=eH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eH(t){var e=bke(t,"string");return hb(e)=="symbol"?e:e+""}function bke(t,e){if(hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(hb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mM=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.layout,d=e.children,f=Object.keys(n),p={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},g=!!Ns(d,wd);return f.reduce(function(x,b){var j=n[b],S=j.orientation,_=j.domain,T=j.padding,C=T===void 0?{}:T,P=j.mirror,k=j.reversed,O="".concat(S).concat(P?"Mirror":""),I,F,B,$,L;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var V=_[1]-_[0],H=1/0,te=j.categoricalDomain.sort(Mye);if(te.forEach(function(Ie,We){We>0&&(H=Math.min((Ie||0)-(te[We-1]||0),H))}),Number.isFinite(H)){var X=H/V,q=j.layout==="vertical"?a.height:a.width;if(j.padding==="gap"&&(I=X*q/2),j.padding==="no-gap"){var Y=Di(e.barCategoryGap,X*q),se=X*q/2;I=se-Y-(se-Y)/q*Y}}}i==="xAxis"?F=[a.left+(C.left||0)+(I||0),a.left+a.width-(C.right||0)-(I||0)]:i==="yAxis"?F=c==="horizontal"?[a.top+a.height-(C.bottom||0),a.top+(C.top||0)]:[a.top+(C.top||0)+(I||0),a.top+a.height-(C.bottom||0)-(I||0)]:F=j.range,k&&(F=[F[1],F[0]]);var G=jV(j,s,g),z=G.scale,ce=G.realScaleType;z.domain(_).range(F),wV(z);var we=NV(z,ko(ko({},j),{},{realScaleType:ce}));i==="xAxis"?(L=S==="top"&&!P||S==="bottom"&&P,B=a.left,$=p[O]-L*j.height):i==="yAxis"&&(L=S==="left"&&!P||S==="right"&&P,B=p[O]-L*j.width,$=a.top);var K=ko(ko(ko({},j),we),{},{realScaleType:ce,x:B,y:$,scale:z,width:i==="xAxis"?a.width:j.width,height:i==="yAxis"?a.height:j.height});return K.bandSize=eN(K,we),!j.hide&&i==="xAxis"?p[O]+=(L?-1:1)*K.height:j.hide||(p[O]+=(L?-1:1)*K.width),ko(ko({},x),{},ES({},b,K))},{})},tH=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(a,s),y:Math.min(i,o),width:Math.abs(s-a),height:Math.abs(o-i)}},jke=function(e){var n=e.x1,a=e.y1,i=e.x2,s=e.y2;return tH({x:n,y:a},{x:i,y:s})},nH=function(){function t(e){xke(this,t),this.scale=e}return vke(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.bandAware,s=a.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),i=a[0],s=a[a.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();ES(nH,"EPS",1e-4);var gM=function(e){var n=Object.keys(e).reduce(function(a,i){return ko(ko({},a),{},ES({},i,nH.create(e[i])))},{});return ko(ko({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return KTe(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return QV(i,function(s,o){return n[o].isInRange(s)})}})};function wke(t){return(t%180+180)%180}var Nke=function(e){var n=e.width,a=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=wke(i),o=s*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},SA,A8;function Ske(){if(A8)return SA;A8=1;var t=Ll(),e=Lb(),n=dS();function a(i){return function(s,o,l){var c=Object(s);if(!e(s)){var d=t(o,3);s=n(s),o=function(p){return d(c[p],p,c)}}var f=i(s,o,l);return f>-1?c[d?s[f]:f]:void 0}}return SA=a,SA}var _A,E8;function _ke(){if(E8)return _A;E8=1;var t=GV();function e(n){var a=t(n),i=a%1;return a===a?i?a-i:a:0}return _A=e,_A}var CA,P8;function Cke(){if(P8)return CA;P8=1;var t=n7(),e=Ll(),n=_ke(),a=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var d=l==null?0:n(l);return d<0&&(d=a(c+d,0)),t(s,e(o,3),d)}return CA=i,CA}var TA,O8;function Tke(){if(O8)return TA;O8=1;var t=Ske(),e=Cke(),n=t(e);return TA=n,TA}var kke=Tke();const Ake=Un(kke);var Eke=y9();const Pke=Un(Eke);var Oke=Pke(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),yM=v.createContext(void 0),xM=v.createContext(void 0),rH=v.createContext(void 0),aH=v.createContext({}),iH=v.createContext(void 0),sH=v.createContext(0),oH=v.createContext(0),D8=function(e){var n=e.state,a=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,f=Oke(s);return Ce.createElement(yM.Provider,{value:a},Ce.createElement(xM.Provider,{value:i},Ce.createElement(aH.Provider,{value:s},Ce.createElement(rH.Provider,{value:f},Ce.createElement(iH.Provider,{value:o},Ce.createElement(sH.Provider,{value:d},Ce.createElement(oH.Provider,{value:c},l)))))))},Dke=function(){return v.useContext(iH)},lH=function(e){var n=v.useContext(yM);n==null&&kf();var a=n[e];return a==null&&kf(),a},Mke=function(){var e=v.useContext(yM);return Wu(e)},Ike=function(){var e=v.useContext(xM),n=Ake(e,function(a){return QV(a.domain,Number.isFinite)});return n||Wu(e)},cH=function(e){var n=v.useContext(xM);n==null&&kf();var a=n[e];return a==null&&kf(),a},Rke=function(){var e=v.useContext(rH);return e},Lke=function(){return v.useContext(aH)},vM=function(){return v.useContext(oH)},bM=function(){return v.useContext(sH)};function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function Fke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $ke(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,dH(a.key),a)}}function Bke(t,e,n){return e&&$ke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zke(t,e,n){return e=yN(e),qke(t,uH()?Reflect.construct(e,n||[],yN(t).constructor):e.apply(t,n))}function qke(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uke(t)}function Uke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uH=function(){return!!t})()}function yN(t){return yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yN(t)}function Vke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZP(t,e)}function ZP(t,e){return ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},ZP(t,e)}function M8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function I8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M8(Object(n),!0).forEach(function(a){jM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function jM(t,e,n){return e=dH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dH(t){var e=Hke(t,"string");return jg(e)=="symbol"?e:e+""}function Hke(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(jg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Gke(t,e){return Qke(t)||Kke(t,e)||Yke(t,e)||Wke()}function Wke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yke(t,e){if(t){if(typeof t=="string")return R8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R8(t,e)}}function R8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Kke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Qke(t){if(Array.isArray(t))return t}function eO(){return eO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},eO.apply(this,arguments)}var Xke=function(e,n){var a;return Ce.isValidElement(e)?a=Ce.cloneElement(e,n):en(e)?a=e(n):a=Ce.createElement("line",eO({},n,{className:"recharts-reference-line-line"})),a},Jke=function(e,n,a,i,s,o,l,c,d){var f=s.x,p=s.y,g=s.width,x=s.height;if(a){var b=d.y,j=e.y.apply(b,{position:o});if(Ol(d,"discard")&&!e.y.isInRange(j))return null;var S=[{x:f+g,y:j},{x:f,y:j}];return c==="left"?S.reverse():S}if(n){var _=d.x,T=e.x.apply(_,{position:o});if(Ol(d,"discard")&&!e.x.isInRange(T))return null;var C=[{x:T,y:p+x},{x:T,y:p}];return l==="top"?C.reverse():C}if(i){var P=d.segment,k=P.map(function(O){return e.apply(O,{position:o})});return Ol(d,"discard")&&HTe(k,function(O){return!e.isInRange(O)})?null:k}return null};function Zke(t){var e=t.x,n=t.y,a=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=Dke(),f=lH(i),p=cH(s),g=Rke();if(!d||!g)return null;Mo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=gM({x:f.scale,y:p.scale}),b=Na(e),j=Na(n),S=a&&a.length===2,_=Jke(x,b,j,S,g,t.position,f.orientation,p.orientation,t);if(!_)return null;var T=Gke(_,2),C=T[0],P=C.x,k=C.y,O=T[1],I=O.x,F=O.y,B=Ol(t,"hidden")?"url(#".concat(d,")"):void 0,$=I8(I8({clipPath:B},$t(t,!0)),{},{x1:P,y1:k,x2:I,y2:F});return Ce.createElement(Pn,{className:un("recharts-reference-line",l)},Xke(o,$),Pa.renderCallByParent(t,jke({x1:P,y1:k,x2:I,y2:F})))}var wM=function(t){function e(){return Fke(this,e),zke(this,e,arguments)}return Vke(e,t),Bke(e,[{key:"render",value:function(){return Ce.createElement(Zke,this.props)}}])}(Ce.Component);jM(wM,"displayName","ReferenceLine");jM(wM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function tO(){return tO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},tO.apply(this,arguments)}function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function L8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function F8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L8(Object(n),!0).forEach(function(a){PS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function eAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,fH(a.key),a)}}function nAe(t,e,n){return e&&tAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rAe(t,e,n){return e=xN(e),aAe(t,hH()?Reflect.construct(e,n||[],xN(t).constructor):e.apply(t,n))}function aAe(t,e){if(e&&(wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iAe(t)}function iAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hH=function(){return!!t})()}function xN(t){return xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xN(t)}function sAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nO(t,e)}function nO(t,e){return nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},nO(t,e)}function PS(t,e,n){return e=fH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fH(t){var e=oAe(t,"string");return wg(e)=="symbol"?e:e+""}function oAe(t,e){if(wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(wg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lAe=function(e){var n=e.x,a=e.y,i=e.xAxis,s=e.yAxis,o=gM({x:i.scale,y:s.scale}),l=o.apply({x:n,y:a},{bandAware:!0});return Ol(e,"discard")&&!o.isInRange(l)?null:l},OS=function(t){function e(){return eAe(this,e),rAe(this,e,arguments)}return sAe(e,t),nAe(e,[{key:"render",value:function(){var a=this.props,i=a.x,s=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=Na(i),f=Na(s);if(Mo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var p=lAe(this.props);if(!p)return null;var g=p.x,x=p.y,b=this.props,j=b.shape,S=b.className,_=Ol(this.props,"hidden")?"url(#".concat(c,")"):void 0,T=F8(F8({clipPath:_},$t(this.props,!0)),{},{cx:g,cy:x});return Ce.createElement(Pn,{className:un("recharts-reference-dot",S)},e.renderDot(j,T),Pa.renderCallByParent(this.props,{x:g-o,y:x-o,width:2*o,height:2*o}))}}])}(Ce.Component);PS(OS,"displayName","ReferenceDot");PS(OS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});PS(OS,"renderDot",function(t,e){var n;return Ce.isValidElement(t)?n=Ce.cloneElement(t,e):en(t)?n=t(e):n=Ce.createElement(Vb,tO({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function rO(){return rO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rO.apply(this,arguments)}function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function $8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function B8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$8(Object(n),!0).forEach(function(a){DS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function cAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,mH(a.key),a)}}function dAe(t,e,n){return e&&uAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hAe(t,e,n){return e=vN(e),fAe(t,pH()?Reflect.construct(e,n||[],vN(t).constructor):e.apply(t,n))}function fAe(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pAe(t)}function pAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pH=function(){return!!t})()}function vN(t){return vN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vN(t)}function mAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aO(t,e)}function aO(t,e){return aO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},aO(t,e)}function DS(t,e,n){return e=mH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mH(t){var e=gAe(t,"string");return Ng(e)=="symbol"?e:e+""}function gAe(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ng(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yAe=function(e,n,a,i,s){var o=s.x1,l=s.x2,c=s.y1,d=s.y2,f=s.xAxis,p=s.yAxis;if(!f||!p)return null;var g=gM({x:f.scale,y:p.scale}),x={x:e?g.x.apply(o,{position:"start"}):g.x.rangeMin,y:a?g.y.apply(c,{position:"start"}):g.y.rangeMin},b={x:n?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(d,{position:"end"}):g.y.rangeMax};return Ol(s,"discard")&&(!g.isInRange(x)||!g.isInRange(b))?null:tH(x,b)},MS=function(t){function e(){return cAe(this,e),hAe(this,e,arguments)}return mAe(e,t),dAe(e,[{key:"render",value:function(){var a=this.props,i=a.x1,s=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,f=a.clipPathId;Mo(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Na(i),g=Na(s),x=Na(o),b=Na(l),j=this.props.shape;if(!p&&!g&&!x&&!b&&!j)return null;var S=yAe(p,g,x,b,this.props);if(!S&&!j)return null;var _=Ol(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Ce.createElement(Pn,{className:un("recharts-reference-area",c)},e.renderRect(j,B8(B8({clipPath:_},$t(this.props,!0)),S)),Pa.renderCallByParent(this.props,S))}}])}(Ce.Component);DS(MS,"displayName","ReferenceArea");DS(MS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});DS(MS,"renderRect",function(t,e){var n;return Ce.isValidElement(t)?n=Ce.cloneElement(t,e):en(t)?n=t(e):n=Ce.createElement(pM,rO({},e,{className:"recharts-reference-area-rect"})),n});function gH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var a=[],i=0;i<t.length;i+=e)a.push(t[i]);return a}function xAe(t,e,n){var a={width:t.width+e.width,height:t.height+e.height};return Nke(a,n)}function vAe(t,e,n){var a=n==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:a?i:s,end:a?i+o:s+l}:{start:a?i+o:s+l,end:a?i:s}}function bN(t,e,n,a,i){if(t*e<t*a||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-a)>=0&&t*(e+t*s/2-i)<=0}function bAe(t,e){return gH(t,e+1)}function jAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=e.start,l=e.end,c=0,d=1,f=o,p=function(){var b=a==null?void 0:a[c];if(b===void 0)return{v:gH(a,d)};var j=c,S,_=function(){return S===void 0&&(S=n(b,j)),S},T=b.coordinate,C=c===0||bN(t,T,_,f,l);C||(c=0,f=o,d+=1),C&&(f=T+t*(_()/2+i),c+=d)},g;d<=s.length;)if(g=p(),g)return g.v;return[]}function fb(t){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fb(t)}function z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z8(Object(n),!0).forEach(function(a){wAe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function wAe(t,e,n){return e=NAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NAe(t){var e=SAe(t,"string");return fb(e)=="symbol"?e:e+""}function SAe(t,e){if(fb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(fb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Ae(t,e,n,a,i){for(var s=(a||[]).slice(),o=s.length,l=e.start,c=e.end,d=function(g){var x=s[g],b,j=function(){return b===void 0&&(b=n(x,g)),b};if(g===o-1){var S=t*(x.coordinate+t*j()/2-c);s[g]=x=oi(oi({},x),{},{tickCoord:S>0?x.coordinate-S*t:x.coordinate})}else s[g]=x=oi(oi({},x),{},{tickCoord:x.coordinate});var _=bN(t,x.tickCoord,j,l,c);_&&(c=x.tickCoord-t*(j()/2+i),s[g]=oi(oi({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return s}function CAe(t,e,n,a,i,s){var o=(a||[]).slice(),l=o.length,c=e.start,d=e.end;if(s){var f=a[l-1],p=n(f,l-1),g=t*(f.coordinate+t*p/2-d);o[l-1]=f=oi(oi({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate});var x=bN(t,f.tickCoord,function(){return p},c,d);x&&(d=f.tickCoord-t*(p/2+i),o[l-1]=oi(oi({},f),{},{isShow:!0}))}for(var b=s?l-1:l,j=function(T){var C=o[T],P,k=function(){return P===void 0&&(P=n(C,T)),P};if(T===0){var O=t*(C.coordinate-t*k()/2-c);o[T]=C=oi(oi({},C),{},{tickCoord:O<0?C.coordinate-O*t:C.coordinate})}else o[T]=C=oi(oi({},C),{},{tickCoord:C.coordinate});var I=bN(t,C.tickCoord,k,c,d);I&&(c=C.tickCoord+t*(k()/2+i),o[T]=oi(oi({},C),{},{isShow:!0}))},S=0;S<b;S++)j(S);return o}function NM(t,e,n){var a=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,f=t.unit,p=t.angle;if(!i||!i.length||!a)return[];if(bt(c)||xd.isSsr)return bAe(i,typeof c=="number"&&bt(c)?c:0);var g=[],x=l==="top"||l==="bottom"?"width":"height",b=f&&x==="width"?vv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},j=function(C,P){var k=en(d)?d(C.value,P):C.value;return x==="width"?xAe(vv(k,{fontSize:e,letterSpacing:n}),b,p):vv(k,{fontSize:e,letterSpacing:n})[x]},S=i.length>=2?Oi(i[1].coordinate-i[0].coordinate):1,_=vAe(s,S,x);return c==="equidistantPreserveStart"?jAe(S,_,j,i,o):(c==="preserveStart"||c==="preserveStartEnd"?g=CAe(S,_,j,i,o,c==="preserveStartEnd"):g=_Ae(S,_,j,i,o),g.filter(function(T){return T.isShow}))}var TAe=["viewBox"],kAe=["viewBox"],AAe=["ticks"];function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function Pm(){return Pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Pm.apply(this,arguments)}function q8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function va(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q8(Object(n),!0).forEach(function(a){SM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function kA(t,e){if(t==null)return{};var n=EAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function EAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function PAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,xH(a.key),a)}}function OAe(t,e,n){return e&&U8(t.prototype,e),n&&U8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function DAe(t,e,n){return e=jN(e),MAe(t,yH()?Reflect.construct(e,n||[],jN(t).constructor):e.apply(t,n))}function MAe(t,e){if(e&&(Sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IAe(t)}function IAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yH=function(){return!!t})()}function jN(t){return jN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jN(t)}function RAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iO(t,e)}function iO(t,e){return iO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},iO(t,e)}function SM(t,e,n){return e=xH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xH(t){var e=LAe(t,"string");return Sg(e)=="symbol"?e:e+""}function LAe(t,e){if(Sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gg=function(t){function e(n){var a;return PAe(this,e),a=DAe(this,e,[n]),a.state={fontSize:"",letterSpacing:""},a}return RAe(e,t),OAe(e,[{key:"shouldComponentUpdate",value:function(a,i){var s=a.viewBox,o=kA(a,TAe),l=this.props,c=l.viewBox,d=kA(l,kAe);return!Lm(s,c)||!Lm(o,d)||!Lm(i,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var i=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,f=i.tickSize,p=i.mirror,g=i.tickMargin,x,b,j,S,_,T,C=p?-1:1,P=a.tickSize||f,k=bt(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":x=b=a.coordinate,S=o+ +!p*c,j=S-C*P,T=j-C*g,_=k;break;case"left":j=S=a.coordinate,b=s+ +!p*l,x=b-C*P,_=x-C*g,T=k;break;case"right":j=S=a.coordinate,b=s+ +p*l,x=b+C*P,_=x+C*g,T=k;break;default:x=b=a.coordinate,S=o+ +p*c,j=S+C*P,T=j+C*g,_=k;break}return{line:{x1:x,y1:j,x2:b,y2:S},tick:{x:_,y:T}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,f=a.axisLine,p=va(va(va({},$t(this.props,!1)),$t(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var g=+(c==="top"&&!d||c==="bottom"&&d);p=va(va({},p),{},{x1:i,y1:s+g*l,x2:i+o,y2:s+g*l})}else{var x=+(c==="left"&&!d||c==="right"&&d);p=va(va({},p),{},{x1:i+x*o,y1:s,x2:i+x*o,y2:s+l})}return Ce.createElement("line",Pm({},p,{className:un("recharts-cartesian-axis-line",As(f,"className"))}))}},{key:"renderTicks",value:function(a,i,s){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,p=l.tickFormatter,g=l.unit,x=NM(va(va({},this.props),{},{ticks:a}),i,s),b=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),S=$t(this.props,!1),_=$t(f,!1),T=va(va({},S),{},{fill:"none"},$t(c,!1)),C=x.map(function(P,k){var O=o.getTickLineCoord(P),I=O.line,F=O.tick,B=va(va(va(va({textAnchor:b,verticalAnchor:j},S),{},{stroke:"none",fill:d},_),F),{},{index:k,payload:P,visibleTicksCount:x.length,tickFormatter:p});return Ce.createElement(Pn,Pm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},Sf(o.props,P,k)),c&&Ce.createElement("line",Pm({},T,I,{className:un("recharts-cartesian-axis-tick-line",As(c,"className"))})),f&&e.renderTickItem(f,B,"".concat(en(p)?p(P.value,k):P.value).concat(g||"")))});return Ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var a=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,f=i.hide;if(f)return null;var p=this.props,g=p.ticks,x=kA(p,AAe),b=g;return en(c)&&(b=g&&g.length>0?c(this.props):c(x)),o<=0||l<=0||!b||!b.length?null:Ce.createElement(Pn,{className:un("recharts-cartesian-axis",d),ref:function(S){a.layerReference=S}},s&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Pa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,i,s){var o,l=un(i.className,"recharts-cartesian-axis-tick-value");return Ce.isValidElement(a)?o=Ce.cloneElement(a,va(va({},i),{},{className:l})):en(a)?o=a(va(va({},i),{},{className:l})):o=Ce.createElement(_f,Pm({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(v.Component);SM(Gg,"displayName","CartesianAxis");SM(Gg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var FAe=["x1","y1","x2","y2","key"],$Ae=["offset"];function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function V8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(n),!0).forEach(function(a){BAe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function BAe(t,e,n){return e=zAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zAe(t){var e=qAe(t,"string");return Af(e)=="symbol"?e:e+""}function qAe(t,e){if(Af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Af(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Xh.apply(this,arguments)}function H8(t,e){if(t==null)return{};var n=UAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function UAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var VAe=function(e){var n=e.fill;if(!n||n==="none")return null;var a=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return Ce.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function vH(t,e){var n;if(Ce.isValidElement(t))n=Ce.cloneElement(t,e);else if(en(t))n=t(e);else{var a=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=H8(e,FAe),d=$t(c,!1);d.offset;var f=H8(d,$Ae);n=Ce.createElement("line",Xh({},f,{x1:a,y1:i,x2:s,y2:o,fill:"none",key:l}))}return n}function HAe(t){var e=t.x,n=t.width,a=t.horizontal,i=a===void 0?!0:a,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var d=ci(ci({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return vH(i,d)});return Ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function GAe(t){var e=t.y,n=t.height,a=t.vertical,i=a===void 0?!0:a,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var d=ci(ci({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return vH(i,d)});return Ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function WAe(t){var e=t.horizontalFill,n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var f=l.map(function(g){return Math.round(g+i-i)}).sort(function(g,x){return g-x});i!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?i+o-g:f[x+1]-g;if(j<=0)return null;var S=x%e.length;return Ce.createElement("rect",{key:"react-".concat(x),y:g,x:a,height:j,width:s,stroke:"none",fill:e[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function YAe(t){var e=t.vertical,n=e===void 0?!0:e,a=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!n||!a||!a.length)return null;var f=d.map(function(g){return Math.round(g+s-s)}).sort(function(g,x){return g-x});s!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?s+l-g:f[x+1]-g;if(j<=0)return null;var S=x%a.length;return Ce.createElement("rect",{key:"react-".concat(x),x:g,y:o,width:j,height:c,stroke:"none",fill:a[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var KAe=function(e,n){var a=e.xAxis,i=e.width,s=e.height,o=e.offset;return bV(NM(ci(ci(ci({},Gg.defaultProps),a),{},{ticks:Nc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},QAe=function(e,n){var a=e.yAxis,i=e.width,s=e.height,o=e.offset;return bV(NM(ci(ci(ci({},Gg.defaultProps),a),{},{ticks:Nc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},vm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pb(t){var e,n,a,i,s,o,l=vM(),c=bM(),d=Lke(),f=ci(ci({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:vm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:vm.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:vm.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:vm.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:vm.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:vm.verticalFill,x:bt(t.x)?t.x:d.left,y:bt(t.y)?t.y:d.top,width:bt(t.width)?t.width:d.width,height:bt(t.height)?t.height:d.height}),p=f.x,g=f.y,x=f.width,b=f.height,j=f.syncWithTicks,S=f.horizontalValues,_=f.verticalValues,T=Mke(),C=Ike();if(!bt(x)||x<=0||!bt(b)||b<=0||!bt(p)||p!==+p||!bt(g)||g!==+g)return null;var P=f.verticalCoordinatesGenerator||KAe,k=f.horizontalCoordinatesGenerator||QAe,O=f.horizontalPoints,I=f.verticalPoints;if((!O||!O.length)&&en(k)){var F=S&&S.length,B=k({yAxis:C?ci(ci({},C),{},{ticks:F?S:C.ticks}):void 0,width:l,height:c,offset:d},F?!0:j);Mo(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Af(B),"]")),Array.isArray(B)&&(O=B)}if((!I||!I.length)&&en(P)){var $=_&&_.length,L=P({xAxis:T?ci(ci({},T),{},{ticks:$?_:T.ticks}):void 0,width:l,height:c,offset:d},$?!0:j);Mo(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Af(L),"]")),Array.isArray(L)&&(I=L)}return Ce.createElement("g",{className:"recharts-cartesian-grid"},Ce.createElement(VAe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Ce.createElement(HAe,Xh({},f,{offset:d,horizontalPoints:O,xAxis:T,yAxis:C})),Ce.createElement(GAe,Xh({},f,{offset:d,verticalPoints:I,xAxis:T,yAxis:C})),Ce.createElement(WAe,Xh({},f,{horizontalPoints:O})),Ce.createElement(YAe,Xh({},f,{verticalPoints:I})))}pb.displayName="CartesianGrid";var XAe=["type","layout","connectNulls","ref"],JAe=["key"];function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function G8(t,e){if(t==null)return{};var n=ZAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function ZAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function _v(){return _v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_v.apply(this,arguments)}function W8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W8(Object(n),!0).forEach(function(a){Ao(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function bm(t){return rEe(t)||nEe(t)||tEe(t)||eEe()}function eEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tEe(t,e){if(t){if(typeof t=="string")return sO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sO(t,e)}}function nEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rEe(t){if(Array.isArray(t))return sO(t)}function sO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function aEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,jH(a.key),a)}}function iEe(t,e,n){return e&&Y8(t.prototype,e),n&&Y8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sEe(t,e,n){return e=wN(e),oEe(t,bH()?Reflect.construct(e,n||[],wN(t).constructor):e.apply(t,n))}function oEe(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lEe(t)}function lEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bH=function(){return!!t})()}function wN(t){return wN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wN(t)}function cEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oO(t,e)}function oO(t,e){return oO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},oO(t,e)}function Ao(t,e,n){return e=jH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jH(t){var e=uEe(t,"string");return _g(e)=="symbol"?e:e+""}function uEe(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(_g(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hb=function(t){function e(){var n;aEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=sEe(this,e,[].concat(i)),Ao(n,"state",{isAnimationFinished:!0,totalLength:0}),Ao(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Ao(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(_,T){return _+T});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),p=o%d,g=l-o,x=[],b=0,j=0;b<c.length;j+=c[b],++b)if(j+c[b]>p){x=[].concat(bm(c.slice(0,b)),[p-j]);break}var S=x.length%2===0?[0,g]:[g];return[].concat(bm(e.repeat(c,f)),bm(x),S).map(function(_){return"".concat(_,"px")}).join(", ")}),Ao(n,"id",Df("recharts-line-")),Ao(n,"pathRef",function(o){n.mainCurve=o}),Ao(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ao(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return cEe(e,t),iEe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=Es(f,Ub);if(!p)return null;var g=function(j,S){return{x:j.x,y:j.y,value:j.value,errorVal:sa(j.payload,S)}},x={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Ce.createElement(Pn,x,p.map(function(b){return Ce.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:g})}))}},{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,f=l.dataKey,p=$t(this.props,!1),g=$t(c,!0),x=d.map(function(j,S){var _=js(js(js({key:"dot-".concat(S),r:3},p),g),{},{index:S,cx:j.x,cy:j.y,value:j.value,dataKey:f,payload:j.payload,points:d});return e.renderDotItem(c,_)}),b={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Ce.createElement(Pn,_v({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(a,i,s,o){var l=this.props,c=l.type,d=l.layout,f=l.connectNulls;l.ref;var p=G8(l,XAe),g=js(js(js({},$t(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:a},o),{},{type:c,layout:d,connectNulls:f});return Ce.createElement(df,_v({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=o.animateNewValues,j=o.width,S=o.height,_=this.state,T=_.prevPoints,C=_.totalLength;return Ce.createElement(Ro,{begin:f,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(P){var k=P.t;if(T){var O=T.length/l.length,I=l.map(function(V,H){var te=Math.floor(H*O);if(T[te]){var X=T[te],q=wa(X.x,V.x),Y=wa(X.y,V.y);return js(js({},V),{},{x:q(k),y:Y(k)})}if(b){var se=wa(j*2,V.x),G=wa(S/2,V.y);return js(js({},V),{},{x:se(k),y:G(k)})}return js(js({},V),{},{x:V.x,y:V.y})});return s.renderCurveStatically(I,a,i)}var F=wa(0,C),B=F(k),$;if(c){var L="".concat(c).split(/[,\s]+/gim).map(function(V){return parseFloat(V)});$=s.getStrokeDasharray(B,C,L)}else $=s.generateSimpleStrokeDasharray(C,B);return s.renderCurveStatically(l,a,i,{strokeDasharray:$})})}},{key:"renderCurve",value:function(a,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,d=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!d&&f>0||!Cf(d,o))?this.renderCurveWithAnimation(a,i):this.renderCurveStatically(o,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,f=i.yAxis,p=i.top,g=i.left,x=i.width,b=i.height,j=i.isAnimationActive,S=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=un("recharts-line",c),P=d&&d.allowDataOverflow,k=f&&f.allowDataOverflow,O=P||k,I=ln(S)?this.id:S,F=(a=$t(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},B=F.r,$=B===void 0?3:B,L=F.strokeWidth,V=L===void 0?2:L,H=w9(o)?o:{},te=H.clipDot,X=te===void 0?!0:te,q=$*2+V;return Ce.createElement(Pn,{className:C},P||k?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(I)},Ce.createElement("rect",{x:P?g:g-x/2,y:k?p:p-b/2,width:P?x:x*2,height:k?b:b*2})),!X&&Ce.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Ce.createElement("rect",{x:g-q/2,y:p-q/2,width:x+q,height:b+q}))):null,!T&&this.renderCurve(O,I),this.renderErrorBar(O,I),(T||o)&&this.renderDots(O,X,I),(!j||_)&&Pl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,i){for(var s=a.length%2!==0?[].concat(bm(a),[0]):a,o=[],l=0;l<i;++l)o=[].concat(bm(o),bm(s));return o}},{key:"renderDotItem",value:function(a,i){var s;if(Ce.isValidElement(a))s=Ce.cloneElement(a,i);else if(en(a))s=a(i);else{var o=i.key,l=G8(i,JAe),c=un("recharts-line-dot",typeof a!="boolean"?a.className:"");s=Ce.createElement(Vb,_v({key:o},l,{className:c}))}return s}}])}(v.PureComponent);Ao(Hb,"displayName","Line");Ao(Hb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!xd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ao(Hb,"getComposedData",function(t){var e=t.props,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,f=e.layout,p=c.map(function(g,x){var b=sa(g,o);return f==="horizontal"?{x:Zw({axis:n,ticks:i,bandSize:l,entry:g,index:x}),y:ln(b)?null:a.scale(b),value:b,payload:g}:{x:ln(b)?null:n.scale(b),y:Zw({axis:a,ticks:s,bandSize:l,entry:g,index:x}),value:b,payload:g}});return js({points:p,layout:f},d)});var dEe=["layout","type","stroke","connectNulls","isRange","ref"],hEe=["key"],wH;function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function NH(t,e){if(t==null)return{};var n=fEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function fEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Jh(){return Jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Jh.apply(this,arguments)}function K8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Hu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K8(Object(n),!0).forEach(function(a){kl(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function pEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_H(a.key),a)}}function mEe(t,e,n){return e&&Q8(t.prototype,e),n&&Q8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gEe(t,e,n){return e=NN(e),yEe(t,SH()?Reflect.construct(e,n||[],NN(t).constructor):e.apply(t,n))}function yEe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xEe(t)}function xEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SH=function(){return!!t})()}function NN(t){return NN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NN(t)}function vEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lO(t,e)}function lO(t,e){return lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},lO(t,e)}function kl(t,e,n){return e=_H(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _H(t){var e=bEe(t,"string");return Cg(e)=="symbol"?e:e+""}function bEe(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Nd=function(t){function e(){var n;pEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=gEe(this,e,[].concat(i)),kl(n,"state",{isAnimationFinished:!0}),kl(n,"id",Df("recharts-area-")),kl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),en(o)&&o()}),kl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),en(o)&&o()}),n}return vEe(e,t),mEe(e,[{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,f=c.points,p=c.dataKey,g=$t(this.props,!1),x=$t(d,!0),b=f.map(function(S,_){var T=Hu(Hu(Hu({key:"dot-".concat(_),r:3},g),x),{},{index:_,cx:S.x,cy:S.y,dataKey:p,value:S.value,payload:S.payload,points:f});return e.renderDotItem(d,T)}),j={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Ce.createElement(Pn,Jh({className:"recharts-area-dots"},j),b)}},{key:"renderHorizontalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,d=o[o.length-1].x,f=a*Math.abs(c-d),p=ad(o.map(function(g){return g.y||0}));return bt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(ad(s.map(function(g){return g.y||0})),p)),bt(p)?Ce.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,d=o[o.length-1].y,f=a*Math.abs(c-d),p=ad(o.map(function(g){return g.x||0}));return bt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(ad(s.map(function(g){return g.x||0})),p)),bt(p)?Ce.createElement("rect",{x:0,y:c<d?c:c-f,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(a){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,i,s,o){var l=this.props,c=l.layout,d=l.type,f=l.stroke,p=l.connectNulls,g=l.isRange;l.ref;var x=NH(l,dEe);return Ce.createElement(Pn,{clipPath:s?"url(#clipPath-".concat(o,")"):null},Ce.createElement(df,Jh({},$t(x,!0),{points:a,connectNulls:p,type:d,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Ce.createElement(df,Jh({},$t(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:a})),f!=="none"&&g&&Ce.createElement(df,Jh({},$t(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=this.state,j=b.prevPoints,S=b.prevBaseLine;return Ce.createElement(Ro,{begin:f,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var T=_.t;if(j){var C=j.length/l.length,P=l.map(function(F,B){var $=Math.floor(B*C);if(j[$]){var L=j[$],V=wa(L.x,F.x),H=wa(L.y,F.y);return Hu(Hu({},F),{},{x:V(T),y:H(T)})}return F}),k;if(bt(c)&&typeof c=="number"){var O=wa(S,c);k=O(T)}else if(ln(c)||zg(c)){var I=wa(S,0);k=I(T)}else k=c.map(function(F,B){var $=Math.floor(B*C);if(S[$]){var L=S[$],V=wa(L.x,F.x),H=wa(L.y,F.y);return Hu(Hu({},F),{},{x:V(T),y:H(T)})}return F});return s.renderAreaStatically(P,k,a,i)}return Ce.createElement(Pn,null,Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(T))),Ce.createElement(Pn,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,a,i)))})}},{key:"renderArea",value:function(a,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,d=this.state,f=d.prevPoints,p=d.prevBaseLine,g=d.totalLength;return c&&o&&o.length&&(!f&&g>0||!Cf(f,o)||!Cf(p,l))?this.renderAreaWithAnimation(a,i):this.renderAreaStatically(o,l,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,d=i.top,f=i.left,p=i.xAxis,g=i.yAxis,x=i.width,b=i.height,j=i.isAnimationActive,S=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=un("recharts-area",c),P=p&&p.allowDataOverflow,k=g&&g.allowDataOverflow,O=P||k,I=ln(S)?this.id:S,F=(a=$t(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},B=F.r,$=B===void 0?3:B,L=F.strokeWidth,V=L===void 0?2:L,H=w9(o)?o:{},te=H.clipDot,X=te===void 0?!0:te,q=$*2+V;return Ce.createElement(Pn,{className:C},P||k?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(I)},Ce.createElement("rect",{x:P?f:f-x/2,y:k?d:d-b/2,width:P?x:x*2,height:k?b:b*2})),!X&&Ce.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Ce.createElement("rect",{x:f-q/2,y:d-q/2,width:x+q,height:b+q}))):null,T?null:this.renderArea(O,I),(o||T)&&this.renderDots(O,X,I),(!j||_)&&Pl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:a.points!==i.curPoints||a.baseLine!==i.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(v.PureComponent);wH=Nd;kl(Nd,"displayName","Area");kl(Nd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!xd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});kl(Nd,"getBaseValue",function(t,e,n,a){var i=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(bt(l)&&typeof l=="number")return l;var c=i==="horizontal"?a:n,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),p=Math.min(d[0],d[1]);return l==="dataMin"?p:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});kl(Nd,"getComposedData",function(t){var e=t.props,n=t.item,a=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=e.layout,b=d&&d.length,j=wH.getBaseValue(e,n,a,i),S=x==="horizontal",_=!1,T=p.map(function(P,k){var O;b?O=d[f+k]:(O=sa(P,c),Array.isArray(O)?_=!0:O=[j,O]);var I=O[1]==null||b&&sa(P,c)==null;return S?{x:Zw({axis:a,ticks:s,bandSize:l,entry:P,index:k}),y:I?null:i.scale(O[1]),value:O,payload:P}:{x:I?null:a.scale(O[1]),y:Zw({axis:i,ticks:o,bandSize:l,entry:P,index:k}),value:O,payload:P}}),C;return b||_?C=T.map(function(P){var k=Array.isArray(P.value)?P.value[0]:null;return S?{x:P.x,y:k!=null&&P.y!=null?i.scale(k):null}:{x:k!=null?a.scale(k):null,y:P.y}}):C=S?i.scale(j):a.scale(j),Hu({points:T,baseLine:C,layout:x,isRange:_},g)});kl(Nd,"renderDotItem",function(t,e){var n;if(Ce.isValidElement(t))n=Ce.cloneElement(t,e);else if(en(t))n=t(e);else{var a=un("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=NH(e,hEe);n=Ce.createElement(Vb,Jh({},s,{key:i,className:a}))}return n});function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function jEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,kH(a.key),a)}}function NEe(t,e,n){return e&&wEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function SEe(t,e,n){return e=SN(e),_Ee(t,CH()?Reflect.construct(e,n||[],SN(t).constructor):e.apply(t,n))}function _Ee(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CEe(t)}function CEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CH=function(){return!!t})()}function SN(t){return SN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SN(t)}function TEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cO(t,e)}function cO(t,e){return cO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},cO(t,e)}function TH(t,e,n){return e=kH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kH(t){var e=kEe(t,"string");return Tg(e)=="symbol"?e:e+""}function kEe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Tg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function uO(){return uO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},uO.apply(this,arguments)}function AEe(t){var e=t.xAxisId,n=vM(),a=bM(),i=lH(e);return i==null?null:v.createElement(Gg,uO({},i,{className:un("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return Nc(o,!0)}}))}var $c=function(t){function e(){return jEe(this,e),SEe(this,e,arguments)}return TEe(e,t),NEe(e,[{key:"render",value:function(){return v.createElement(AEe,this.props)}}])}(v.Component);TH($c,"displayName","XAxis");TH($c,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function EEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,PH(a.key),a)}}function OEe(t,e,n){return e&&PEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function DEe(t,e,n){return e=_N(e),MEe(t,AH()?Reflect.construct(e,n||[],_N(t).constructor):e.apply(t,n))}function MEe(t,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IEe(t)}function IEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AH=function(){return!!t})()}function _N(t){return _N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_N(t)}function REe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dO(t,e)}function dO(t,e){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},dO(t,e)}function EH(t,e,n){return e=PH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PH(t){var e=LEe(t,"string");return kg(e)=="symbol"?e:e+""}function LEe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(kg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function hO(){return hO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},hO.apply(this,arguments)}var FEe=function(e){var n=e.yAxisId,a=vM(),i=bM(),s=cH(n);return s==null?null:v.createElement(Gg,hO({},s,{className:un("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:i},ticksGenerator:function(l){return Nc(l,!0)}}))},Bc=function(t){function e(){return EEe(this,e),DEe(this,e,arguments)}return REe(e,t),OEe(e,[{key:"render",value:function(){return v.createElement(FEe,this.props)}}])}(v.Component);EH(Bc,"displayName","YAxis");EH(Bc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function X8(t){return qEe(t)||zEe(t)||BEe(t)||$Ee()}function $Ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BEe(t,e){if(t){if(typeof t=="string")return fO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fO(t,e)}}function zEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qEe(t){if(Array.isArray(t))return fO(t)}function fO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var pO=function(e,n,a,i,s){var o=Es(e,wM),l=Es(e,OS),c=[].concat(X8(o),X8(l)),d=Es(e,MS),f="".concat(i,"Id"),p=i[0],g=n;if(c.length&&(g=c.reduce(function(j,S){if(S.props[f]===a&&Ol(S.props,"extendDomain")&&bt(S.props[p])){var _=S.props[p];return[Math.min(j[0],_),Math.max(j[1],_)]}return j},g)),d.length){var x="".concat(p,"1"),b="".concat(p,"2");g=d.reduce(function(j,S){if(S.props[f]===a&&Ol(S.props,"extendDomain")&&bt(S.props[x])&&bt(S.props[b])){var _=S.props[x],T=S.props[b];return[Math.min(j[0],_,T),Math.max(j[1],_,T)]}return j},g)}return s&&s.length&&(g=s.reduce(function(j,S){return bt(S)?[Math.min(j[0],S),Math.max(j[1],S)]:j},g)),g},AA={exports:{}},J8;function UEe(){return J8||(J8=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,x,b){var j=n?n+d:d;if(!this._events[j])return!1;var S=this._events[j],_=arguments.length,T,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,g),!0;case 5:return S.fn.call(S.context,f,p,g,x),!0;case 6:return S.fn.call(S.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];S.fn.apply(S.context,T)}else{var P=S.length,k;for(C=0;C<P;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];S[C].fn.apply(S[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,S=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(AA)),AA.exports}var VEe=UEe();const HEe=Un(VEe);var EA=new HEe,PA="recharts.syncMouseEvents";function mb(t){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(t)}function GEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,OH(a.key),a)}}function YEe(t,e,n){return e&&WEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OA(t,e,n){return e=OH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OH(t){var e=KEe(t,"string");return mb(e)=="symbol"?e:e+""}function KEe(t,e){if(mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(mb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var QEe=function(){function t(){GEe(this,t),OA(this,"activeIndex",0),OA(this,"coordinateList",[]),OA(this,"layout","horizontal")}return YEe(t,[{key:"setDetails",value:function(n){var a,i=n.coordinateList,s=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,f=n.offset,p=f===void 0?null:f,g=n.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(a=s??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,p=s+c+d,g=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:g})}}}])}();function XEe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var a=t==null?void 0:t[0],i=t==null?void 0:t[1];if(a&&i&&bt(a)&&bt(i))return!0}return!1}function JEe(t,e,n,a){var i=a/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?a:n.width-1,height:t==="horizontal"?n.height-1:a}}function DH(t){var e=t.cx,n=t.cy,a=t.radius,i=t.startAngle,s=t.endAngle,o=Mr(e,n,a,i),l=Mr(e,n,a,s);return{points:[o,l],cx:e,cy:n,radius:a,startAngle:i,endAngle:s}}function ZEe(t,e,n){var a,i,s,o;if(t==="horizontal")a=e.x,s=a,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,a=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,f=e.outerRadius,p=e.angle,g=Mr(l,c,d,p),x=Mr(l,c,f,p);a=g.x,i=g.y,s=x.x,o=x.y}else return DH(e);return[{x:a,y:i},{x:s,y:o}]}function gb(t){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}function Z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Fj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z8(Object(n),!0).forEach(function(a){ePe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ePe(t,e,n){return e=tPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tPe(t){var e=nPe(t,"string");return gb(e)=="symbol"?e:e+""}function nPe(t,e){if(gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rPe(t){var e,n,a=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,f=t.tooltipAxisBandSize,p=t.layout,g=t.chartName,x=(e=a.props.cursor)!==null&&e!==void 0?e:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!x||!s||!o||g!=="ScatterChart"&&i!=="axis")return null;var b,j=df;if(g==="ScatterChart")b=o,j=p2e;else if(g==="BarChart")b=JEe(p,o,c,f),j=pM;else if(p==="radial"){var S=DH(o),_=S.cx,T=S.cy,C=S.radius,P=S.startAngle,k=S.endAngle;b={cx:_,cy:T,startAngle:P,endAngle:k,innerRadius:C,outerRadius:C},j=PV}else b={points:ZEe(p,o,c)},j=df;var O=Fj(Fj(Fj(Fj({stroke:"#ccc",pointerEvents:"none"},c),b),$t(x,!1)),{},{payload:l,payloadIndex:d,className:un("recharts-tooltip-cursor",x.className)});return v.isValidElement(x)?v.cloneElement(x,O):v.createElement(j,O)}var aPe=["item"],iPe=["children","className","width","height","style","compact","title","desc"];function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Om.apply(this,arguments)}function eB(t,e){return lPe(t)||oPe(t,e)||IH(t,e)||sPe()}function sPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function lPe(t){if(Array.isArray(t))return t}function tB(t,e){if(t==null)return{};var n=cPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function cPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function uPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dPe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,RH(a.key),a)}}function hPe(t,e,n){return e&&dPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fPe(t,e,n){return e=CN(e),pPe(t,MH()?Reflect.construct(e,n||[],CN(t).constructor):e.apply(t,n))}function pPe(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mPe(t)}function mPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MH=function(){return!!t})()}function CN(t){return CN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CN(t)}function gPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mO(t,e)}function mO(t,e){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},mO(t,e)}function Eg(t){return vPe(t)||xPe(t)||IH(t)||yPe()}function yPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IH(t,e){if(t){if(typeof t=="string")return gO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gO(t,e)}}function xPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vPe(t){if(Array.isArray(t))return gO(t)}function gO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function nB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(n),!0).forEach(function(a){Jt(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Jt(t,e,n){return e=RH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RH(t){var e=bPe(t,"string");return Ag(e)=="symbol"?e:e+""}function bPe(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ag(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jPe={xAxis:["bottom","top"],yAxis:["left","right"]},wPe={width:"100%",height:"100%"},LH={x:0,y:0};function $j(t){return t}var NPe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},SPe=function(e,n,a,i){var s=n.find(function(f){return f&&f.index===a});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return st(st(st({},i),Mr(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,d=i.angle;return st(st(st({},i),Mr(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return LH},IS=function(e,n){var a=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Eg(l),Eg(d)):l},[]);return o.length>0?o:e&&e.length&&bt(i)&&bt(s)?e.slice(i,s+1):[]};function FH(t){return t==="number"?[0,"auto"]:void 0}var yO=function(e,n,a,i){var s=e.graphicalItems,o=e.tooltipAxis,l=IS(n,e);return a<0||!s||!s.length||a>=l.length?null:s.reduce(function(c,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=a&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var g;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;g=kw(x,o.dataKey,i)}else g=p&&p[a]||l[a];return g?[].concat(Eg(c),[_V(d,g)]):c},[])},rB=function(e,n,a,i){var s=i||{x:e.chartX,y:e.chartY},o=NPe(s,a),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,f=$Ne(o,l,d,c);if(f>=0&&d){var p=d[f]&&d[f].value,g=yO(e,n,f,p),x=SPe(a,l,f,s);return{activeTooltipIndex:f,activeLabel:p,activePayload:g,activeCoordinate:x}}return null},_Pe=function(e,n){var a=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=e.stackOffset,x=vV(f,s);return a.reduce(function(b,j){var S,_=j.type.defaultProps!==void 0?st(st({},j.type.defaultProps),j.props):j.props,T=_.type,C=_.dataKey,P=_.allowDataOverflow,k=_.allowDuplicatedCategory,O=_.scale,I=_.ticks,F=_.includeHidden,B=_[o];if(b[B])return b;var $=IS(e.data,{graphicalItems:i.filter(function(we){var K,Ie=o in we.props?we.props[o]:(K=we.type.defaultProps)===null||K===void 0?void 0:K[o];return Ie===B}),dataStartIndex:c,dataEndIndex:d}),L=$.length,V,H,te;XEe(_.domain,P,T)&&(V=EP(_.domain,null,P),x&&(T==="number"||O!=="auto")&&(te=jv($,C,"category")));var X=FH(T);if(!V||V.length===0){var q,Y=(q=_.domain)!==null&&q!==void 0?q:X;if(C){if(V=jv($,C,T),T==="category"&&x){var se=Dye(V);k&&se?(H=V,V=hN(0,L)):k||(V=t$(Y,V,j).reduce(function(we,K){return we.indexOf(K)>=0?we:[].concat(Eg(we),[K])},[]))}else if(T==="category")k?V=V.filter(function(we){return we!==""&&!ln(we)}):V=t$(Y,V,j).reduce(function(we,K){return we.indexOf(K)>=0||K===""||ln(K)?we:[].concat(Eg(we),[K])},[]);else if(T==="number"){var G=VNe($,i.filter(function(we){var K,Ie,We=o in we.props?we.props[o]:(K=we.type.defaultProps)===null||K===void 0?void 0:K[o],Re="hide"in we.props?we.props.hide:(Ie=we.type.defaultProps)===null||Ie===void 0?void 0:Ie.hide;return We===B&&(F||!Re)}),C,s,f);G&&(V=G)}x&&(T==="number"||O!=="auto")&&(te=jv($,C,"category"))}else x?V=hN(0,L):l&&l[B]&&l[B].hasStack&&T==="number"?V=g==="expand"?[0,1]:SV(l[B].stackGroups,c,d):V=xV($,i.filter(function(we){var K=o in we.props?we.props[o]:we.type.defaultProps[o],Ie="hide"in we.props?we.props.hide:we.type.defaultProps.hide;return K===B&&(F||!Ie)}),T,f,!0);if(T==="number")V=pO(p,V,B,s,I),Y&&(V=EP(Y,V,P));else if(T==="category"&&Y){var z=Y,ce=V.every(function(we){return z.indexOf(we)>=0});ce&&(V=z)}}return st(st({},b),{},Jt({},B,st(st({},_),{},{axisType:s,domain:V,categoricalDomain:te,duplicateDomain:H,originalDomain:(S=_.domain)!==null&&S!==void 0?S:X,isCategorical:x,layout:f})))},{})},CPe=function(e,n){var a=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=IS(e.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),x=g.length,b=vV(f,s),j=-1;return a.reduce(function(S,_){var T=_.type.defaultProps!==void 0?st(st({},_.type.defaultProps),_.props):_.props,C=T[o],P=FH("number");if(!S[C]){j++;var k;return b?k=hN(0,x):l&&l[C]&&l[C].hasStack?(k=SV(l[C].stackGroups,c,d),k=pO(p,k,C,s)):(k=EP(P,xV(g,a.filter(function(O){var I,F,B=o in O.props?O.props[o]:(I=O.type.defaultProps)===null||I===void 0?void 0:I[o],$="hide"in O.props?O.props.hide:(F=O.type.defaultProps)===null||F===void 0?void 0:F.hide;return B===C&&!$}),"number",f),i.defaultProps.allowDataOverflow),k=pO(p,k,C,s)),st(st({},S),{},Jt({},C,st(st({axisType:s},i.defaultProps),{},{hide:!0,orientation:As(jPe,"".concat(s,".").concat(j%2),null),domain:k,originalDomain:P,isCategorical:b,layout:f})))}return S},{})},TPe=function(e,n){var a=n.axisType,i=a===void 0?"xAxis":a,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.children,p="".concat(i,"Id"),g=Es(f,s),x={};return g&&g.length?x=_Pe(e,{axes:g,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(x=CPe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),x},kPe=function(e){var n=Wu(e),a=Nc(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:zD(a,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:eN(n,a)}},aB=function(e){var n=e.children,a=e.defaultShowTooltip,i=Ns(n,vg),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},APe=function(e){return!e||!e.length?!1:e.some(function(n){var a=Tc(n&&n.type);return a&&a.indexOf("Bar")>=0})},iB=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},EPe=function(e,n){var a=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,d=a.width,f=a.height,p=a.children,g=a.margin||{},x=Ns(p,vg),b=Ns(p,kc),j=Object.keys(c).reduce(function(k,O){var I=c[O],F=I.orientation;return!I.mirror&&!I.hide?st(st({},k),{},Jt({},F,k[F]+I.width)):k},{left:g.left||0,right:g.right||0}),S=Object.keys(o).reduce(function(k,O){var I=o[O],F=I.orientation;return!I.mirror&&!I.hide?st(st({},k),{},Jt({},F,As(k,"".concat(F))+I.height)):k},{top:g.top||0,bottom:g.bottom||0}),_=st(st({},S),j),T=_.bottom;x&&(_.bottom+=x.props.height||vg.defaultProps.height),b&&n&&(_=qNe(_,i,a,n));var C=d-_.left-_.right,P=f-_.top-_.bottom;return st(st({brushBottom:T},_),{},{width:Math.max(C,0),height:Math.max(P,0)})},PPe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},RS=function(e){var n=e.chartName,a=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,f=e.formatAxisMap,p=e.defaultProps,g=function(_,T){var C=T.graphicalItems,P=T.stackGroups,k=T.offset,O=T.updateId,I=T.dataStartIndex,F=T.dataEndIndex,B=_.barSize,$=_.layout,L=_.barGap,V=_.barCategoryGap,H=_.maxBarSize,te=iB($),X=te.numericAxisName,q=te.cateAxisName,Y=APe(C),se=[];return C.forEach(function(G,z){var ce=IS(_.data,{graphicalItems:[G],dataStartIndex:I,dataEndIndex:F}),we=G.type.defaultProps!==void 0?st(st({},G.type.defaultProps),G.props):G.props,K=we.dataKey,Ie=we.maxBarSize,We=we["".concat(X,"Id")],Re=we["".concat(q,"Id")],Fe={},ve=c.reduce(function(Ne,ne){var de=T["".concat(ne.axisType,"Map")],Te=we["".concat(ne.axisType,"Id")];de&&de[Te]||ne.axisType==="zAxis"||kf();var Ee=de[Te];return st(st({},Ne),{},Jt(Jt({},ne.axisType,Ee),"".concat(ne.axisType,"Ticks"),Nc(Ee)))},Fe),ae=ve[q],je=ve["".concat(q,"Ticks")],ue=P&&P[We]&&P[We].hasStack&&ZNe(G,P[We].stackGroups),me=Tc(G.type).indexOf("Bar")>=0,oe=eN(ae,je),Q=[],ie=Y&&BNe({barSize:B,stackGroups:P,totalSize:PPe(ve,q)});if(me){var xe,ee,Se=ln(Ie)?H:Ie,qe=(xe=(ee=eN(ae,je,!0))!==null&&ee!==void 0?ee:Se)!==null&&xe!==void 0?xe:0;Q=zNe({barGap:L,barCategoryGap:V,bandSize:qe!==oe?qe:oe,sizeList:ie[Re],maxBarSize:Se}),qe!==oe&&(Q=Q.map(function(Ne){return st(st({},Ne),{},{position:st(st({},Ne.position),{},{offset:Ne.position.offset-qe/2})})}))}var Ge=G&&G.type&&G.type.getComposedData;Ge&&se.push({props:st(st({},Ge(st(st({},ve),{},{displayedData:ce,props:_,dataKey:K,item:G,bandSize:oe,barPosition:Q,offset:k,stackedData:ue,layout:$,dataStartIndex:I,dataEndIndex:F}))),{},Jt(Jt(Jt({key:G.key||"item-".concat(z)},X,ve[X]),q,ve[q]),"animationId",O)),childIndex:Hye(G,_.children),item:G})}),se},x=function(_,T){var C=_.props,P=_.dataStartIndex,k=_.dataEndIndex,O=_.updateId;if(!g6({props:C}))return null;var I=C.children,F=C.layout,B=C.stackOffset,$=C.data,L=C.reverseStackOrder,V=iB(F),H=V.numericAxisName,te=V.cateAxisName,X=Es(I,a),q=XNe($,X,"".concat(H,"Id"),"".concat(te,"Id"),B,L),Y=c.reduce(function(we,K){var Ie="".concat(K.axisType,"Map");return st(st({},we),{},Jt({},Ie,TPe(C,st(st({},K),{},{graphicalItems:X,stackGroups:K.axisType===H&&q,dataStartIndex:P,dataEndIndex:k}))))},{}),se=EPe(st(st({},Y),{},{props:C,graphicalItems:X}),T==null?void 0:T.legendBBox);Object.keys(Y).forEach(function(we){Y[we]=f(C,Y[we],se,we.replace("Map",""),n)});var G=Y["".concat(te,"Map")],z=kPe(G),ce=g(C,st(st({},Y),{},{dataStartIndex:P,dataEndIndex:k,updateId:O,graphicalItems:X,stackGroups:q,offset:se}));return st(st({formattedGraphicalItems:ce,graphicalItems:X,offset:se,stackGroups:q},z),Y)},b=function(S){function _(T){var C,P,k;return uPe(this,_),k=fPe(this,_,[T]),Jt(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Jt(k,"accessibilityManager",new QEe),Jt(k,"handleLegendBBoxUpdate",function(O){if(O){var I=k.state,F=I.dataStartIndex,B=I.dataEndIndex,$=I.updateId;k.setState(st({legendBBox:O},x({props:k.props,dataStartIndex:F,dataEndIndex:B,updateId:$},st(st({},k.state),{},{legendBBox:O}))))}}),Jt(k,"handleReceiveSyncEvent",function(O,I,F){if(k.props.syncId===O){if(F===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(I)}}),Jt(k,"handleBrushChange",function(O){var I=O.startIndex,F=O.endIndex;if(I!==k.state.dataStartIndex||F!==k.state.dataEndIndex){var B=k.state.updateId;k.setState(function(){return st({dataStartIndex:I,dataEndIndex:F},x({props:k.props,dataStartIndex:I,dataEndIndex:F,updateId:B},k.state))}),k.triggerSyncEvent({dataStartIndex:I,dataEndIndex:F})}}),Jt(k,"handleMouseEnter",function(O){var I=k.getMouseInfo(O);if(I){var F=st(st({},I),{},{isTooltipActive:!0});k.setState(F),k.triggerSyncEvent(F);var B=k.props.onMouseEnter;en(B)&&B(F,O)}}),Jt(k,"triggeredAfterMouseMove",function(O){var I=k.getMouseInfo(O),F=I?st(st({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(F),k.triggerSyncEvent(F);var B=k.props.onMouseMove;en(B)&&B(F,O)}),Jt(k,"handleItemMouseEnter",function(O){k.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),Jt(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Jt(k,"handleMouseMove",function(O){O.persist(),k.throttleTriggeredAfterMouseMove(O)}),Jt(k,"handleMouseLeave",function(O){k.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};k.setState(I),k.triggerSyncEvent(I);var F=k.props.onMouseLeave;en(F)&&F(I,O)}),Jt(k,"handleOuterEvent",function(O){var I=Vye(O),F=As(k.props,"".concat(I));if(I&&en(F)){var B,$;/.*touch.*/i.test(I)?$=k.getMouseInfo(O.changedTouches[0]):$=k.getMouseInfo(O),F((B=$)!==null&&B!==void 0?B:{},O)}}),Jt(k,"handleClick",function(O){var I=k.getMouseInfo(O);if(I){var F=st(st({},I),{},{isTooltipActive:!0});k.setState(F),k.triggerSyncEvent(F);var B=k.props.onClick;en(B)&&B(F,O)}}),Jt(k,"handleMouseDown",function(O){var I=k.props.onMouseDown;if(en(I)){var F=k.getMouseInfo(O);I(F,O)}}),Jt(k,"handleMouseUp",function(O){var I=k.props.onMouseUp;if(en(I)){var F=k.getMouseInfo(O);I(F,O)}}),Jt(k,"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),Jt(k,"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&k.handleMouseDown(O.changedTouches[0])}),Jt(k,"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&k.handleMouseUp(O.changedTouches[0])}),Jt(k,"handleDoubleClick",function(O){var I=k.props.onDoubleClick;if(en(I)){var F=k.getMouseInfo(O);I(F,O)}}),Jt(k,"handleContextMenu",function(O){var I=k.props.onContextMenu;if(en(I)){var F=k.getMouseInfo(O);I(F,O)}}),Jt(k,"triggerSyncEvent",function(O){k.props.syncId!==void 0&&EA.emit(PA,k.props.syncId,O,k.eventEmitterSymbol)}),Jt(k,"applySyncEvent",function(O){var I=k.props,F=I.layout,B=I.syncMethod,$=k.state.updateId,L=O.dataStartIndex,V=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)k.setState(st({dataStartIndex:L,dataEndIndex:V},x({props:k.props,dataStartIndex:L,dataEndIndex:V,updateId:$},k.state)));else if(O.activeTooltipIndex!==void 0){var H=O.chartX,te=O.chartY,X=O.activeTooltipIndex,q=k.state,Y=q.offset,se=q.tooltipTicks;if(!Y)return;if(typeof B=="function")X=B(se,O);else if(B==="value"){X=-1;for(var G=0;G<se.length;G++)if(se[G].value===O.activeLabel){X=G;break}}var z=st(st({},Y),{},{x:Y.left,y:Y.top}),ce=Math.min(H,z.x+z.width),we=Math.min(te,z.y+z.height),K=se[X]&&se[X].value,Ie=yO(k.state,k.props.data,X),We=se[X]?{x:F==="horizontal"?se[X].coordinate:ce,y:F==="horizontal"?we:se[X].coordinate}:LH;k.setState(st(st({},O),{},{activeLabel:K,activeCoordinate:We,activePayload:Ie,activeTooltipIndex:X}))}else k.setState(O)}),Jt(k,"renderCursor",function(O){var I,F=k.state,B=F.isTooltipActive,$=F.activeCoordinate,L=F.activePayload,V=F.offset,H=F.activeTooltipIndex,te=F.tooltipAxisBandSize,X=k.getTooltipEventType(),q=(I=O.props.active)!==null&&I!==void 0?I:B,Y=k.props.layout,se=O.key||"_recharts-cursor";return Ce.createElement(rPe,{key:se,activeCoordinate:$,activePayload:L,activeTooltipIndex:H,chartName:n,element:O,isActive:q,layout:Y,offset:V,tooltipAxisBandSize:te,tooltipEventType:X})}),Jt(k,"renderPolarAxis",function(O,I,F){var B=As(O,"type.axisType"),$=As(k.state,"".concat(B,"Map")),L=O.type.defaultProps,V=L!==void 0?st(st({},L),O.props):O.props,H=$&&$[V["".concat(B,"Id")]];return v.cloneElement(O,st(st({},H),{},{className:un(B,H.className),key:O.key||"".concat(I,"-").concat(F),ticks:Nc(H,!0)}))}),Jt(k,"renderPolarGrid",function(O){var I=O.props,F=I.radialLines,B=I.polarAngles,$=I.polarRadius,L=k.state,V=L.radiusAxisMap,H=L.angleAxisMap,te=Wu(V),X=Wu(H),q=X.cx,Y=X.cy,se=X.innerRadius,G=X.outerRadius;return v.cloneElement(O,{polarAngles:Array.isArray(B)?B:Nc(X,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray($)?$:Nc(te,!0).map(function(z){return z.coordinate}),cx:q,cy:Y,innerRadius:se,outerRadius:G,key:O.key||"polar-grid",radialLines:F})}),Jt(k,"renderLegend",function(){var O=k.state.formattedGraphicalItems,I=k.props,F=I.children,B=I.width,$=I.height,L=k.props.margin||{},V=B-(L.left||0)-(L.right||0),H=gV({children:F,formattedGraphicalItems:O,legendWidth:V,legendContent:d});if(!H)return null;var te=H.item,X=tB(H,aPe);return v.cloneElement(te,st(st({},X),{},{chartWidth:B,chartHeight:$,margin:L,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Jt(k,"renderTooltip",function(){var O,I=k.props,F=I.children,B=I.accessibilityLayer,$=Ns(F,Ei);if(!$)return null;var L=k.state,V=L.isTooltipActive,H=L.activeCoordinate,te=L.activePayload,X=L.activeLabel,q=L.offset,Y=(O=$.props.active)!==null&&O!==void 0?O:V;return v.cloneElement($,{viewBox:st(st({},q),{},{x:q.left,y:q.top}),active:Y,label:X,payload:Y?te:[],coordinate:H,accessibilityLayer:B})}),Jt(k,"renderBrush",function(O){var I=k.props,F=I.margin,B=I.data,$=k.state,L=$.offset,V=$.dataStartIndex,H=$.dataEndIndex,te=$.updateId;return v.cloneElement(O,{key:O.key||"_recharts-brush",onChange:Mj(k.handleBrushChange,O.props.onChange),data:B,x:bt(O.props.x)?O.props.x:L.left,y:bt(O.props.y)?O.props.y:L.top+L.height+L.brushBottom-(F.bottom||0),width:bt(O.props.width)?O.props.width:L.width,startIndex:V,endIndex:H,updateId:"brush-".concat(te)})}),Jt(k,"renderReferenceElement",function(O,I,F){if(!O)return null;var B=k,$=B.clipPathId,L=k.state,V=L.xAxisMap,H=L.yAxisMap,te=L.offset,X=O.type.defaultProps||{},q=O.props,Y=q.xAxisId,se=Y===void 0?X.xAxisId:Y,G=q.yAxisId,z=G===void 0?X.yAxisId:G;return v.cloneElement(O,{key:O.key||"".concat(I,"-").concat(F),xAxis:V[se],yAxis:H[z],viewBox:{x:te.left,y:te.top,width:te.width,height:te.height},clipPathId:$})}),Jt(k,"renderActivePoints",function(O){var I=O.item,F=O.activePoint,B=O.basePoint,$=O.childIndex,L=O.isRange,V=[],H=I.props.key,te=I.item.type.defaultProps!==void 0?st(st({},I.item.type.defaultProps),I.item.props):I.item.props,X=te.activeDot,q=te.dataKey,Y=st(st({index:$,dataKey:q,cx:F.x,cy:F.y,r:4,fill:fM(I.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},$t(X,!1)),Aw(X));return V.push(_.renderActiveDot(X,Y,"".concat(H,"-activePoint-").concat($))),B?V.push(_.renderActiveDot(X,st(st({},Y),{},{cx:B.x,cy:B.y}),"".concat(H,"-basePoint-").concat($))):L&&V.push(null),V}),Jt(k,"renderGraphicChild",function(O,I,F){var B=k.filterFormatItem(O,I,F);if(!B)return null;var $=k.getTooltipEventType(),L=k.state,V=L.isTooltipActive,H=L.tooltipAxis,te=L.activeTooltipIndex,X=L.activeLabel,q=k.props.children,Y=Ns(q,Ei),se=B.props,G=se.points,z=se.isRange,ce=se.baseLine,we=B.item.type.defaultProps!==void 0?st(st({},B.item.type.defaultProps),B.item.props):B.item.props,K=we.activeDot,Ie=we.hide,We=we.activeBar,Re=we.activeShape,Fe=!!(!Ie&&V&&Y&&(K||We||Re)),ve={};$!=="axis"&&Y&&Y.props.trigger==="click"?ve={onClick:Mj(k.handleItemMouseEnter,O.props.onClick)}:$!=="axis"&&(ve={onMouseLeave:Mj(k.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:Mj(k.handleItemMouseEnter,O.props.onMouseEnter)});var ae=v.cloneElement(O,st(st({},B.props),ve));function je(ne){return typeof H.dataKey=="function"?H.dataKey(ne.payload):null}if(Fe)if(te>=0){var ue,me;if(H.dataKey&&!H.allowDuplicatedCategory){var oe=typeof H.dataKey=="function"?je:"payload.".concat(H.dataKey.toString());ue=kw(G,oe,X),me=z&&ce&&kw(ce,oe,X)}else ue=G==null?void 0:G[te],me=z&&ce&&ce[te];if(Re||We){var Q=O.props.activeIndex!==void 0?O.props.activeIndex:te;return[v.cloneElement(O,st(st(st({},B.props),ve),{},{activeIndex:Q})),null,null]}if(!ln(ue))return[ae].concat(Eg(k.renderActivePoints({item:B,activePoint:ue,basePoint:me,childIndex:te,isRange:z})))}else{var ie,xe=(ie=k.getItemByXY(k.state.activeCoordinate))!==null&&ie!==void 0?ie:{graphicalItem:ae},ee=xe.graphicalItem,Se=ee.item,qe=Se===void 0?O:Se,Ge=ee.childIndex,Ne=st(st(st({},B.props),ve),{},{activeIndex:Ge});return[v.cloneElement(qe,Ne),null,null]}return z?[ae,null,null]:[ae,null]}),Jt(k,"renderCustomized",function(O,I,F){return v.cloneElement(O,st(st({key:"recharts-customized-".concat(F)},k.props),k.state))}),Jt(k,"renderMap",{CartesianGrid:{handler:$j,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:$j},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:$j},YAxis:{handler:$j},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((C=T.id)!==null&&C!==void 0?C:Df("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=m7(k.triggeredAfterMouseMove,(P=T.throttleDelay)!==null&&P!==void 0?P:1e3/60),k.state={},k}return gPe(_,S),hPe(_,[{key:"componentDidMount",value:function(){var C,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,P=C.children,k=C.data,O=C.height,I=C.layout,F=Ns(P,Ei);if(F){var B=F.props.defaultIndex;if(!(typeof B!="number"||B<0||B>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[B]&&this.state.tooltipTicks[B].value,L=yO(this.state,k,B,$),V=this.state.tooltipTicks[B].coordinate,H=(this.state.offset.top+O)/2,te=I==="horizontal",X=te?{x:V,y:H}:{y:V,x:H},q=this.state.formattedGraphicalItems.find(function(se){var G=se.item;return G.type.name==="Scatter"});q&&(X=st(st({},X),q.props.points[B].tooltipPosition),L=q.props.points[B].tooltipPayload);var Y={activeTooltipIndex:B,isTooltipActive:!0,activeLabel:$,activePayload:L,activeCoordinate:X};this.setState(Y),this.renderCursor(F),this.accessibilityManager.setIndex(B)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var k,O;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(C){JE([Ns(C.children,Ei)],[Ns(this.props.children,Ei)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Ns(this.props.children,Ei);if(C&&typeof C.props.shared=="boolean"){var P=C.props.shared?"axis":"item";return l.indexOf(P)>=0?P:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var P=this.container,k=P.getBoundingClientRect(),O=P0e(k),I={chartX:Math.round(C.pageX-O.left),chartY:Math.round(C.pageY-O.top)},F=k.width/P.offsetWidth||1,B=this.inRange(I.chartX,I.chartY,F);if(!B)return null;var $=this.state,L=$.xAxisMap,V=$.yAxisMap,H=this.getTooltipEventType(),te=rB(this.state,this.props.data,this.props.layout,B);if(H!=="axis"&&L&&V){var X=Wu(L).scale,q=Wu(V).scale,Y=X&&X.invert?X.invert(I.chartX):null,se=q&&q.invert?q.invert(I.chartY):null;return st(st({},I),{},{xValue:Y,yValue:se},te)}return te?st(st({},I),te):null}},{key:"inRange",value:function(C,P){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,I=C/k,F=P/k;if(O==="horizontal"||O==="vertical"){var B=this.state.offset,$=I>=B.left&&I<=B.left+B.width&&F>=B.top&&F<=B.top+B.height;return $?{x:I,y:F}:null}var L=this.state,V=L.angleAxisMap,H=L.radiusAxisMap;if(V&&H){var te=Wu(V);return a$({x:I,y:F},te)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,P=this.getTooltipEventType(),k=Ns(C,Ei),O={};k&&P==="axis"&&(k.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Aw(this.props,this.handleOuterEvent);return st(st({},I),O)}},{key:"addListener",value:function(){EA.on(PA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){EA.removeListener(PA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,P,k){for(var O=this.state.formattedGraphicalItems,I=0,F=O.length;I<F;I++){var B=O[I];if(B.item===C||B.props.key===C.key||P===Tc(B.item.type)&&k===B.childIndex)return B}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,P=this.state.offset,k=P.left,O=P.top,I=P.height,F=P.width;return Ce.createElement("defs",null,Ce.createElement("clipPath",{id:C},Ce.createElement("rect",{x:k,y:O,height:I,width:F})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(P,k){var O=eB(k,2),I=O[0],F=O[1];return st(st({},P),{},Jt({},I,F.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(P,k){var O=eB(k,2),I=O[0],F=O[1];return st(st({},P),{},Jt({},I,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[C])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(C){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[C])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(C){var P=this.state,k=P.formattedGraphicalItems,O=P.activeItem;if(k&&k.length)for(var I=0,F=k.length;I<F;I++){var B=k[I],$=B.props,L=B.item,V=L.type.defaultProps!==void 0?st(st({},L.type.defaultProps),L.props):L.props,H=Tc(L.type);if(H==="Bar"){var te=($.data||[]).find(function(se){return YCe(C,se)});if(te)return{graphicalItem:B,payload:te}}else if(H==="RadialBar"){var X=($.data||[]).find(function(se){return a$(C,se)});if(X)return{graphicalItem:B,payload:X}}else if(kS(B,O)||AS(B,O)||cb(B,O)){var q=xTe({graphicalItem:B,activeTooltipItem:O,itemData:V.data}),Y=V.activeIndex===void 0?q:V.activeIndex;return{graphicalItem:st(st({},B),{},{childIndex:Y}),payload:cb(B,O)?V.data[q]:B.props.data[q]}}}return null}},{key:"render",value:function(){var C=this;if(!g6(this))return null;var P=this.props,k=P.children,O=P.className,I=P.width,F=P.height,B=P.style,$=P.compact,L=P.title,V=P.desc,H=tB(P,iPe),te=$t(H,!1);if($)return Ce.createElement(D8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement(eP,Om({},te,{width:I,height:F,title:L,desc:V}),this.renderClipPath(),x6(k,this.renderMap)));if(this.props.accessibilityLayer){var X,q;te.tabIndex=(X=this.props.tabIndex)!==null&&X!==void 0?X:0,te.role=(q=this.props.role)!==null&&q!==void 0?q:"application",te.onKeyDown=function(se){C.accessibilityManager.keyboardEvent(se)},te.onFocus=function(){C.accessibilityManager.focus()}}var Y=this.parseEventsOfWrapper();return Ce.createElement(D8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement("div",Om({className:un("recharts-wrapper",O),style:st({position:"relative",cursor:"default",width:I,height:F},B)},Y,{ref:function(G){C.container=G}}),Ce.createElement(eP,Om({},te,{width:I,height:F,title:L,desc:V,style:wPe}),this.renderClipPath(),x6(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);Jt(b,"displayName",n),Jt(b,"defaultProps",st({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Jt(b,"getDerivedStateFromProps",function(S,_){var T=S.dataKey,C=S.data,P=S.children,k=S.width,O=S.height,I=S.layout,F=S.stackOffset,B=S.margin,$=_.dataStartIndex,L=_.dataEndIndex;if(_.updateId===void 0){var V=aB(S);return st(st(st({},V),{},{updateId:0},x(st(st({props:S},V),{},{updateId:0}),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:O,prevLayout:I,prevStackOffset:F,prevMargin:B,prevChildren:P})}if(T!==_.prevDataKey||C!==_.prevData||k!==_.prevWidth||O!==_.prevHeight||I!==_.prevLayout||F!==_.prevStackOffset||!Lm(B,_.prevMargin)){var H=aB(S),te={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},X=st(st({},rB(_,C,I)),{},{updateId:_.updateId+1}),q=st(st(st({},H),te),X);return st(st(st({},q),x(st({props:S},q),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:O,prevLayout:I,prevStackOffset:F,prevMargin:B,prevChildren:P})}if(!JE(P,_.prevChildren)){var Y,se,G,z,ce=Ns(P,vg),we=ce&&(Y=(se=ce.props)===null||se===void 0?void 0:se.startIndex)!==null&&Y!==void 0?Y:$,K=ce&&(G=(z=ce.props)===null||z===void 0?void 0:z.endIndex)!==null&&G!==void 0?G:L,Ie=we!==$||K!==L,We=!ln(C),Re=We&&!Ie?_.updateId:_.updateId+1;return st(st({updateId:Re},x(st(st({props:S},_),{},{updateId:Re,dataStartIndex:we,dataEndIndex:K}),_)),{},{prevChildren:P,dataStartIndex:we,dataEndIndex:K})}return null}),Jt(b,"renderActiveDot",function(S,_,T){var C;return v.isValidElement(S)?C=v.cloneElement(S,_):en(S)?C=S(_):C=Ce.createElement(Vb,_),Ce.createElement(Pn,{className:"recharts-active-dot",key:T},C)});var j=v.forwardRef(function(_,T){return Ce.createElement(b,Om({},_,{ref:T}))});return j.displayName=b.displayName,j},OPe=RS({chartName:"LineChart",GraphicalChild:Hb,axisComponents:[{axisType:"xAxis",AxisComp:$c},{axisType:"yAxis",AxisComp:Bc}],formatAxisMap:mM}),$H=RS({chartName:"BarChart",GraphicalChild:wd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:$c},{axisType:"yAxis",AxisComp:Bc}],formatAxisMap:mM}),BH=RS({chartName:"PieChart",GraphicalChild:Fl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:TS},{axisType:"radiusAxis",AxisComp:_S}],formatAxisMap:cSe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),DPe=RS({chartName:"AreaChart",GraphicalChild:Nd,axisComponents:[{axisType:"xAxis",AxisComp:$c},{axisType:"yAxis",AxisComp:Bc}],formatAxisMap:mM});const _M=({widget:t,className:e="",autoHideEmptyColumns:n=!1})=>{const a=Mt(),i=ss(),[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState([]),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,S]=v.useState(""),[_,T]=v.useState(!1);v.useEffect(()=>{const O=async()=>{var I,F,B,$,L,V;g(!0),b(null);try{const H=t.dataSource,te=((I=t.config)==null?void 0:I.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0;let X=[];if(te&&(H.startsWith("api:")||H.startsWith("table:"))){const q=await le("/api/dashboards/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:H,filters:t.config.filters})});if(q.ok){const Y=await q.json();X=Array.isArray(Y)?Y:Y.data||[],o(X)}else throw new Error("Failed to fetch filtered data")}else{let q="";const Y={"api:patients":{url:"/api/patients?limit=50",dataKey:"patients"},"api:drugs":{url:"/api/drugs?limit=50",dataKey:"drugs"},"api:recurring-medications":{url:"/api/recurring-medications?limit=50"},"api:pharmacy-orders":{url:"/api/pharmacy/orders?limit=50",dataKey:"orders"},"api:lab-orders":{url:"/api/lab/orders?limit=50",dataKey:"orders"},"api:lab-tests":{url:"/api/lab/tests?limit=50",dataKey:"tests"},"api:queue":{url:"/api/queue?limit=50",dataKey:"queue"},"api:bills":{url:"/api/bills?limit=100",dataKey:"bills"}};if(Y[H])q=Y[H].url;else if(H.startsWith("join:"))q=`/api/dashboards/joined-data?join=${H.split(":")[1]}&limit=50`;else if(H.startsWith("dynamic:")){const G=H.split(":"),z=G[1],ce=G[2],we=((B=(F=t.config)==null?void 0:F.primaryColumns)==null?void 0:B.join(","))||"",K=((L=($=t.config)==null?void 0:$.relatedColumns)==null?void 0:L.join(","))||"";q=`/api/dashboards/dynamic-join?primary=${z}&related=${ce}&primaryCols=${we}&relatedCols=${K}&limit=50`}else H.startsWith("table:")?q=`/api/custom-tables/${H.split(":")[1]}/records?limit=50`:q=`/api/${H.replace("api:","")}?limit=50`;const se=await le(q);if(se.ok){const G=await se.json();Array.isArray(G)?X=G:(V=Y[H])!=null&&V.dataKey&&G[Y[H].dataKey]?X=G[Y[H].dataKey]:G.data?X=G.data:X=Object.values(G).find(ce=>Array.isArray(ce))||[],o(X)}else throw new Error(`Failed to fetch data from ${H}`)}if(t.type==="table"&&n&&X.length>0){const Y=(t.config.columns||[...new Set(X.flatMap(se=>Object.keys(se)))]).filter(se=>X.some(G=>{const z=G[se];return z!=null&&z!==""&&(Array.isArray(z)?z.length>0:!0)}));f(Y)}else f(t.config.columns||[])}catch(H){b(H.message)}finally{g(!1)}};t.dataSource&&O()},[t.dataSource,t.config]),v.useEffect(()=>{var I;if(!s||!Array.isArray(s)){c(s);return}let O=[...s];if((I=t.config)!=null&&I.filters&&Array.isArray(t.config.filters)&&(O=O.filter(F=>t.config.filters.every(B=>{const $=F[B.field],L=B.value;switch(B.operator){case"equals":return $==L;case"neq":return $!=L;case"contains":return String($).toLowerCase().includes(String(L).toLowerCase());case"gt":return $>L;case"lt":return $<L;case"gte":return $>=L;case"lte":return $<=L;default:return!0}}))),j){const F=j.toLowerCase();O=O.filter(B=>Object.values(B).some($=>String($).toLowerCase().includes(F)))}c(O)},[s,t.config,j]);const C=O=>{O&&(i.prefetchQuery({queryKey:Ut.patients.context(O),queryFn:async()=>{const I=await le(`/api/patients/${O}/context`);if(!I.ok)throw new Error("Failed to fetch patient context");return I.json()},staleTime:1e3*60*5}),i.prefetchQuery({queryKey:Ut.patientDebts.balance(O),queryFn:async()=>{const I=await le(`/api/patient-debts/${O}/balance`);if(!I.ok)throw new Error("Failed to fetch patient debt");return I.json()},staleTime:1e3*60}),i.prefetchQuery({queryKey:Ut.queue.latest(O),queryFn:async()=>{const I=await le(`/api/queue/patient/${O}/latest`);if(!I.ok){if(I.status===404)return null;throw new Error("Failed to fetch queue status")}return I.json()},staleTime:1e3*5}))},P=()=>{var I,F,B;if(p)return r.jsxs("div",{className:"widget-loading",children:[r.jsx($X,{className:"spin"})," Loading..."]});if(x)return r.jsxs("div",{className:"widget-error",children:["Error: ",x]});const O=l||[];if(t.type==="stat"){const $=Array.isArray(O)?O.length:0;return r.jsxs("div",{className:"widget-stat",children:[r.jsx("div",{className:"stat-value",children:$}),r.jsx("div",{className:"stat-label",children:((I=t.config)==null?void 0:I.label)||"Total Records"})]})}if(t.type==="chart"){if(!Array.isArray(O)||O.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const{chartType:$="bar",xAxisKey:L="name",dataKey:V="value"}=t.config,H=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return r.jsx("div",{style:{width:"100%",height:350,minHeight:200},children:r.jsx(aw,{width:"100%",height:"100%",children:$==="line"?r.jsxs(OPe,{data:O,children:[r.jsx(pb,{strokeDasharray:"3 3"}),r.jsx($c,{dataKey:L}),r.jsx(Bc,{}),r.jsx(Ei,{}),r.jsx(kc,{}),r.jsx(Hb,{type:"monotone",dataKey:V,stroke:"#8884d8",activeDot:{r:8}})]}):$==="pie"?r.jsxs(BH,{children:[r.jsx(Fl,{data:O,cx:"50%",cy:"50%",labelLine:!1,label:({name:te,percent:X})=>`${te} ${(X*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:V,nameKey:L,children:O.map((te,X)=>r.jsx(Fb,{fill:H[X%H.length]},`cell-${X}`))}),r.jsx(Ei,{})]}):r.jsxs($H,{data:O,children:[r.jsx(pb,{strokeDasharray:"3 3"}),r.jsx($c,{dataKey:L}),r.jsx(Bc,{}),r.jsx(Ei,{}),r.jsx(kc,{}),r.jsx(wd,{dataKey:V,fill:"#82ca9d"})]})})})}if(t.type==="table"){if(!Array.isArray(O)||O.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const L=(d.length>0?d:((F=t.config)==null?void 0:F.columns)||(O[0]?Object.keys(O[0]).slice(0,5):[])).map(X=>({key:X,label:X.replace(/_/g," ").replace(/\b\w/g,q=>q.toUpperCase()),editable:!1})),V=async X=>{try{const q=t.dataSource;if(q.startsWith("table:")){const Y=q.split(":")[1];for(const se of X)se.id&&await le(`/api/custom-tables/${Y}/records/${se.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:se})})}else alert("Changes saved locally. Built-in table edits require specific API integration.")}catch(q){console.error("Error saving data:",q),alert("Failed to save changes")}};if(O.length<=10){const X=((B=t.config)==null?void 0:B.columns)||Object.keys(O[0]).filter(Y=>!Y.startsWith("_")&&Y!=="id"),q=Y=>{const se=Y.patient_id||Y.patientId;se&&a(`/dashboard/edit-complaint/patient/${se}`)};return r.jsx("div",{className:"widget-detail-cards",children:O.map((Y,se)=>{const G=Y.patient_id||Y.patientId,z=!!G;return r.jsxs("div",{className:`detail-card ${z?"clickable":""}`,onClick:z?()=>q(Y):void 0,onMouseEnter:()=>z&&C(G),style:z?{cursor:"pointer"}:void 0,children:[r.jsxs("div",{className:"detail-card-header",children:[r.jsx("span",{className:"detail-card-title",children:Y.name||Y.patient_name||Y.title||Y.brand_name||`Record ${se+1}`}),Y.token&&r.jsxs("span",{className:"detail-card-badge",children:["Token #",Y.token]}),Y.status&&r.jsx("span",{className:`detail-card-status status-${Y.status.toLowerCase()}`,children:Y.status})]}),r.jsx("div",{className:"detail-card-fields",children:X.map(ce=>{const we=Y[ce];if(we==null||we===""||ce==="name"||ce==="title")return null;const K=ce.replace(/_/g," ").replace(/\b\w/g,We=>We.toUpperCase()),Ie=typeof we=="object"?JSON.stringify(we):String(we);return r.jsxs("div",{className:"detail-field",children:[r.jsx("span",{className:"detail-field-label",children:K}),r.jsx("span",{className:"detail-field-value",children:Ie})]},ce)})})]},Y.id||se)})})}const H=X=>{const q=X.patient_id||X.patientId;q&&a(`/dashboard/edit-complaint/patient/${q}`)},te=X=>{const q=X.patient_id||X.patientId;q&&C(q)};return r.jsxs("div",{className:"widget-table-container",children:[r.jsxs("div",{className:"widget-table-search",children:[r.jsx(Mn,{size:14}),r.jsx("input",{type:"text",placeholder:"Search...",value:j,onChange:X=>S(X.target.value)})]}),r.jsx(Ib,{columns:L,data:O,editable:!0,showRowNumbers:!0,title:"",onSave:V,onRowClick:H,onRowHover:te})]})}return r.jsx("div",{children:"Unsupported widget type"})},k=r.jsxs("div",{className:`dashboard-widget ${e}`,children:[r.jsxs("div",{className:"widget-header",children:[r.jsx("h3",{children:t.title}),r.jsx("button",{className:"widget-expand-btn",onClick:()=>T(!0),title:"Expand",children:r.jsx(Hz,{size:14})})]}),r.jsx("div",{className:"widget-content",children:P()})]});return r.jsxs(r.Fragment,{children:[k,_&&r.jsx("div",{className:"widget-modal-overlay",onClick:()=>T(!1),children:r.jsxs("div",{className:"widget-modal-content",onClick:O=>O.stopPropagation(),children:[r.jsxs("div",{className:"widget-modal-header",children:[r.jsx("h2",{children:t.title}),r.jsx("button",{onClick:()=>T(!1),className:"widget-modal-close",children:r.jsx(Lt,{size:20})})]}),r.jsx("div",{className:"widget-modal-body",children:P()})]})})]})},MPe=({isOpen:t,onClose:e,title:n,widgets:a,onSave:i})=>{const[s,o]=v.useState(!1),[l,c]=v.useState(n),[d,f]=v.useState(""),[p,g]=v.useState(!1);if(!t)return null;const x=async()=>{if(!(!i||!l.trim())){g(!0);try{await i(l,d),o(!1),e()}catch(b){console.error("Failed to save dashboard:",b),alert("Failed to save dashboard")}finally{g(!1)}}};return r.jsx("div",{className:"temp-dash-overlay",onClick:e,children:r.jsxs("div",{className:"temp-dash-modal",onClick:b=>b.stopPropagation(),children:[r.jsxs("div",{className:"temp-dash-header",children:[r.jsxs("div",{className:"temp-dash-title-group",children:[r.jsx("div",{className:"temp-dash-icon",children:r.jsx(Jm,{size:16})}),r.jsxs("div",{className:"temp-dash-title-text",children:[r.jsx("h2",{children:n}),r.jsxs("span",{className:"temp-dash-ai-badge",children:[r.jsx(hw,{size:8})," AI Generated"]})]})]}),r.jsxs("div",{className:"temp-dash-actions",children:[i&&!s&&r.jsxs("button",{onClick:()=>o(!0),className:"temp-dash-save-btn",children:[r.jsx(as,{size:12})," Save"]}),r.jsx("button",{onClick:e,className:"temp-dash-close-btn",children:r.jsx(Lt,{size:16})})]})]}),s&&r.jsxs("div",{className:"temp-dash-save-form",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:l,onChange:b=>c(b.target.value),autoFocus:!0}),r.jsx("input",{type:"text",placeholder:"Description (optional)",value:d,onChange:b=>f(b.target.value)}),r.jsxs("div",{className:"temp-dash-save-actions",children:[r.jsx("button",{onClick:()=>o(!1),className:"temp-dash-cancel-btn",children:"Cancel"}),r.jsx("button",{onClick:x,className:"temp-dash-confirm-btn",disabled:p||!l.trim(),children:p?"Saving...":"Confirm"})]})]}),r.jsx("div",{className:"temp-dash-body",children:a.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets to display."}):r.jsx("div",{className:"temp-dash-grid",children:a.map((b,j)=>r.jsx(_M,{widget:b,isEditing:!1,autoHideEmptyColumns:!0},b.id||`widget-${j}`))})})]})})},sB=()=>ON(()=>import("./EditComplaintPage-Bw9Fp656.js"),__vite__mapDeps([0,1])),IPe=()=>ON(()=>import("./AddPatientPage-JtwODJpc.js"),__vite__mapDeps([2,3])),Bj=[{name:"Dashboard",path:"/dashboard",icon:r.jsx(Jm,{size:16}),keywords:["home","main","analytics","stats"],roles:["all"]},{name:"Clinic Hub",path:"/dashboard/clinic-hub",icon:r.jsx(bc,{size:16}),keywords:["central","hub","overview"],roles:["admin","superadmin"]},{name:"Analysis Dashboard",path:"/dashboard/analysis",icon:r.jsx(bc,{size:16}),keywords:["reports","stats","finance","money"],roles:["admin","superadmin"]},{name:"Live AI Assistant",path:"/live-api",icon:r.jsx(kv,{size:16}),keywords:["ai","chat","voice","assistant"],roles:["all"]},{name:"Clinic Subscriptions",path:"/dashboard/clinic-subscriptions",icon:r.jsx(bc,{size:16}),keywords:["plans","billing","tenants"],roles:["superadmin"]},{name:"User Management",path:"/dashboard/users",icon:r.jsx(Oo,{size:16}),keywords:["admins","clinics","accounts"],roles:["superadmin"]},{name:"Patient Search",path:"/dashboard/search-patient",icon:r.jsx(Mn,{size:16}),keywords:["find","lookup","patient"],roles:["all"]},{name:"All Patients",path:"/dashboard/all-patients",icon:r.jsx(Oo,{size:16}),keywords:["list","records","database"],roles:["admin","receptionist","doctor"]},{name:"Add New Patient",path:"/dashboard/add-patient",icon:r.jsx(FN,{size:16}),keywords:["register","new","create","onboard"],roles:["admin","receptionist","doctor"]},{name:"Admissions",path:"/manage-admission",icon:r.jsx(MQ,{size:16}),keywords:["ipd","admit","discharge","rooms"],roles:["admin","doctor","receptionist"]},{name:"Appointment Queue",path:"/dashboard/reception",icon:r.jsx(Oo,{size:16}),keywords:["queue","reception","waiting","appointments"],roles:["admin","receptionist","superadmin"]},{name:"Doctor Queue",path:"/dashboard/queue",icon:r.jsx(bc,{size:16}),keywords:["waiting","patients","consultation"],roles:["admin","doctor","superadmin"]},{name:"Pharmacy Inventory",path:"/dashboard/inventory",icon:r.jsx(_c,{size:16}),keywords:["drugs","medicine","stock","pharmacy"],roles:["admin","pharmacy"]},{name:"Pharmacy Queue",path:"/dashboard/pharmacy-queue",icon:r.jsx(_c,{size:16}),keywords:["orders","billing","dispense"],roles:["admin","pharmacy","superadmin"]},{name:"Add New Drug",path:"/dashboard/inventory/add",icon:r.jsx(_c,{size:16}),keywords:["create","medicine","stock"],roles:["admin","pharmacy"]},{name:"Add Pharmacy Order",path:"/dashboard/add-order",icon:r.jsx(vE,{size:16}),keywords:["sell","bill","dispense"],roles:["admin","pharmacy"]},{name:"Refill Reminders",path:"/refill-reminders",icon:r.jsx(oa,{size:16}),keywords:["recurring","sms","alert"],roles:["admin","pharmacy"]},{name:"Distributors",path:"/dashboard/distributors",icon:r.jsx(qO,{size:16}),keywords:["suppliers","vendors","stock"],roles:["admin","pharmacy"]},{name:"Purchase",path:"/dashboard/purchase",icon:r.jsx(vE,{size:16}),keywords:["buy","procurement","stock"],roles:["admin","pharmacy"]},{name:"Lab Panel",path:"/dashboard/lab",icon:r.jsx(rs,{size:16}),keywords:["billing","orders","queue"],roles:["admin","lab","superadmin"]},{name:"Create Lab Order",path:"/create-lab-order",icon:r.jsx(rs,{size:16}),keywords:["test","pathology","diagnostics"],roles:["admin","doctor","lab"]},{name:"Search Lab Reports",path:"/lab/search-report",icon:r.jsx(Mn,{size:16}),keywords:["results","history","find"],roles:["admin","doctor","lab"]},{name:"Lab Inventory",path:"/lab-inventory",icon:r.jsx(rs,{size:16}),keywords:["reagents","tests","stock"],roles:["admin","lab"]},{name:"Dental",path:"/dashboard/dental",icon:r.jsx(bc,{size:16}),keywords:["teeth","dentist","chart","odontogram"],roles:["admin","doctor","superadmin"]},{name:"Create Custom Bill",path:"/create-custom-bill",icon:r.jsx(Oa,{size:16}),keywords:["invoice","custom","charge"],roles:["admin","receptionist"]},{name:"Billing History",path:"/billing",icon:r.jsx(BO,{size:16}),keywords:["transactions","payments","history"],roles:["admin"]},{name:"Custom Tables",path:"/custom-tables",icon:r.jsx(Oa,{size:16}),keywords:["database","sheets","custom data"],roles:["admin","superadmin"]},{name:"Custom Dashboards",path:"/dashboards",icon:r.jsx(Jm,{size:16}),keywords:["charts","reports","analytics"],roles:["admin","doctor","superadmin"]},{name:"Staff Management",path:"/dashboard/staff",icon:r.jsx(eg,{size:16}),keywords:["users","employees","roles","admin"],roles:["admin","superadmin"]},{name:"Role Management",path:"/dashboard/roles",icon:r.jsx(eg,{size:16}),keywords:["roles","permissions","access","custom roles"],roles:["admin","superadmin"]}],oB=[{icon:"",text:"Update Paracetamol stock to 100",roles:["admin","pharmacy"]},{icon:"",text:"Change CBC Test price to 350",roles:["admin","lab","superadmin"]},{icon:"",text:"Set Voice AI language to Hindi",roles:["all"]},{icon:"",text:"Show revenue for last month",roles:["admin","superadmin"]},{icon:"",text:"Purchase 50 strips of Aspirin",roles:["admin","pharmacy"]},{icon:"",text:"Update consultation fee to 500",roles:["admin","superadmin"]},{icon:"",text:"Add new staff member",roles:["admin","superadmin"]},{icon:"",text:"Register: John Doe, 25M, Fever",roles:["all"]},{icon:"",text:"Check Metformin availability",roles:["admin","pharmacy","doctor"]}],RPe=({user:t})=>{const{isOpen:e,closeCommandBar:n}=Oc(),a=Mt(),i=Lr(),s=v.useRef(null),[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[S,_]=v.useState(!0),[T,C]=v.useState(!0),{customColumnsConfig:P}=tS(),k=(P==null?void 0:P.patients)||[],[O,I]=v.useState(null),[F,B]=v.useState(!1),$=ss(),{chatHistory:L,isProcessing:V,handleSendMessage:H,setChatQuery:te,refreshChat:X,selectedImage:q,handleImageSelect:Y,clearImage:se,temporaryDashboard:G,closeTemporaryDashboard:z,saveTemporaryDashboard:ce}=cD({settings:{},staffList:[],enableDynamicContext:!1}),we=Ue=>{Ue&&($.prefetchQuery({queryKey:Ut.patients.context(Ue),queryFn:async()=>{const jt=await le(`/api/patients/${Ue}/context`);if(!jt.ok)throw new Error("Failed to fetch patient context");return jt.json()},staleTime:5*60*1e3}),$.prefetchQuery({queryKey:Ut.patientDebts.balance(Ue),queryFn:async()=>{const jt=await le(`/api/patient-debts/${Ue}/balance`);return jt.ok?jt.json():{netDebt:0}},staleTime:1*60*1e3}),$.prefetchQuery({queryKey:Ut.queue.latest(Ue),queryFn:async()=>{const jt=await le(`/api/queue/patient/${Ue}/latest`);if(!jt.ok)throw new Error("Failed to fetch latest queue status");const Ct=await jt.json();return Ct!=null&&Ct._id&&$.prefetchQuery({queryKey:Ut.queue.entry(Ct._id),queryFn:async()=>{const Xn=await le(`/api/queue/doctor/complaint/${Ct._id}`);if(!Xn.ok)throw new Error("Failed to fetch complaint record");return Xn.json()},staleTime:1*60*1e3}),Ct},staleTime:5e3}),$.prefetchQuery({queryKey:Ut.dental.records(Ue),queryFn:async()=>{const jt=await le(`/api/dental/patient/${Ue}`);if(!jt.ok)throw new Error("Failed to fetch dental records");return jt.json()},staleTime:5*60*1e3}))},K=v.useMemo(()=>t?Bj.filter(Ue=>Ue.roles.includes("all")||t.role&&Ue.roles.includes(t.role)):Bj,[t]),Ie=v.useMemo(()=>t?oB.filter(Ue=>Ue.roles.includes("all")||t.role&&Ue.roles.includes(t.role)):oB,[t]),We=v.useMemo(()=>new to(K,{keys:["name","keywords"],threshold:.3}),[K]),[Re,Fe]=v.useState(!1),[ve,ae]=v.useState(!1),[je,ue]=v.useState(!1);v.useEffect(()=>{if(e)Fe(!0),ue(!1);else{ue(!0);const Ue=setTimeout(()=>{Fe(!1),ue(!1),X()},200);return()=>clearTimeout(Ue)}},[e,X]);const{setPageContext:me}=IN();v.useEffect(()=>{if(e){const Ue=i.pathname,jt=Bj.find(Ct=>Ct.path===Ue)||Bj.find(Ct=>Ue.startsWith(Ct.path)&&Ct.path!=="/dashboard");me(jt?{name:jt.name,path:Ue,data:{role:jt.roles}}:{name:"Current Page",path:Ue})}},[e,i.pathname,me]);const oe=v.useRef(null),Q=Ue=>{var Ct;const jt=(Ct=Ue.target.files)==null?void 0:Ct[0];jt&&Y(jt)},[ie,xe]=v.useState({x:0,y:0}),[ee,Se]=v.useState(!1),qe=v.useRef({x:0,y:0}),Ge=v.useRef({x:0,y:0}),Ne=v.useRef(!1),ne=v.useRef(null);v.useEffect(()=>{const Ue=Ct=>{if(!ee)return;Ne.current=!0;const Xn=Ct.clientX-qe.current.x,br=Ct.clientY-qe.current.y;let Vn=Ge.current.x+Xn,Cn=Ge.current.y+br;if(ne.current){const wn=ne.current.offsetWidth,la=ne.current.offsetHeight,Hn=(window.innerWidth-wn)/2,Ha=(window.innerHeight-la)/2,$l=Math.max(0,Hn),zo=Math.max(0,Ha);Vn=Math.max(-$l,Math.min($l,Vn)),Cn=Math.max(-zo,Math.min(zo,Cn))}xe({x:Vn,y:Cn})},jt=()=>{Se(!1)};return ee&&(window.addEventListener("mousemove",Ue),window.addEventListener("mouseup",jt)),()=>{window.removeEventListener("mousemove",Ue),window.removeEventListener("mouseup",jt)}},[ee]),v.useEffect(()=>{i.pathname==="/dashboard"&&(l(""),p([]),x([])),e&&(i.pathname==="/dashboard"?B(!1):B(!0))},[i.pathname]),v.useEffect(()=>{(f.length>0||g.length>0)&&F&&B(!1)},[f,g]),v.useEffect(()=>{if(e&&window.innerWidth<=768){window.history.pushState({commandBarOpen:!0},"");const Ue=jt=>{jt.preventDefault(),B(!0)};return window.addEventListener("popstate",Ue),()=>{window.removeEventListener("popstate",Ue)}}},[e]),v.useEffect(()=>{F||xe({x:0,y:0})},[F]),v.useEffect(()=>{te(o)},[o]),v.useEffect(()=>{e&&!F&&s.current&&setTimeout(()=>{if(s.current){s.current.focus();const Ue=s.current.value.length;Ue>0&&s.current.setSelectionRange(Ue,Ue)}},50)},[e,F]),v.useEffect(()=>{if(!e||F||!(window.innerWidth<=768))return;const jt=window.scrollY,Ct=document.body.style.overflow,Xn=document.documentElement.style.overflow,br=document.body.style.position,Vn=document.body.style.top,Cn=document.body.style.width;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${jt}px`,document.body.style.width="100%",()=>{document.documentElement.style.overflow=Xn,document.body.style.overflow=Ct,document.body.style.position=br,document.body.style.top=Vn,document.body.style.width=Cn,window.scrollTo(0,jt)}},[e,F]);const de=Ue=>{!Ue.trim()&&!q||(B(!1),H(Ue),l(""),p([]),x([]))},{preFilledQuery:Te,setPreFilledQuery:Ee}=Oc();v.useEffect(()=>{e&&Te&&(l(Te),setTimeout(()=>{de(Te),Ee("")},300))},[e,Te,Ee]),v.useEffect(()=>{O&&(l(O),ae(!1),setTimeout(()=>de(O),50),I(null))},[O]);const W=()=>{ae(!0)},ye=()=>{l(""),p([]),x([]),X(),s.current&&s.current.focus()};v.useEffect(()=>{e&&(async()=>{_(!0);try{const jt=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),Ct=await le(`/api/patients?${jt.toString()}`);if(Ct.ok){const Xn=await Ct.json();d(Xn.patients||[])}}catch(jt){console.error("Error fetching recent patients:",jt)}finally{_(!1)}})()},[e]);const he=v.useMemo(()=>zc(async Ue=>{const jt=Ue.trim(),Ct=/^\d+$/.test(jt),Xn=jt.split(/\s+/).length;if(jt.length>1){const br=We.search(jt);x(br.map(Vn=>Vn.item))}else x([]);if(jt.length<2||Ct&&jt.length>10||!Ct&&Xn>3){p([]),j(!1);return}j(!0);try{const br=new URLSearchParams({search:encodeURIComponent(Ue),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Vn=await le(`/api/patients?${br.toString()}`);if(Vn.ok){const Cn=await Vn.json();p(Cn.patients||[])}}catch(br){console.error("Search error:",br)}finally{j(!1),sB()}},300),[t]),ge=Ue=>{const jt=Ue.target.value;l(jt),he(jt)},_e=Ue=>{Ue.id&&a(`/dashboard/edit-complaint/patient/${Ue.id}`)},ze=Ue=>{a(Ue.path)},Oe=Ue=>{Ue.path==="/dashboard/add-patient"&&IPe()},He=Ue=>{l(Ue),setTimeout(()=>de(Ue),50)},nt=async()=>{if(o.trim()){j(!0);try{const Ue=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),age:null,gender:null,phone:null})});if(!Ue.ok){const br=await Ue.json();throw new Error(br.message||"Failed to create patient")}const jt=await Ue.json();let Ct=null;const Xn=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:jt.id,complaint:"Walk-in (Quick Create)"})});if(Xn.ok&&(Ct=(await Xn.json()).id),Ct)a(`/dashboard/edit-complaint/${Ct}`);else{const br=await le(`/api/queue/patient/${jt.id}/latest`);if(br.ok){const Vn=await br.json();Vn&&Vn._id&&a(`/dashboard/edit-complaint/${Vn._id}`)}}n()}catch(Ue){console.error("Failed to create patient:",Ue),alert("Failed to create patient. Please try again.")}finally{j(!1)}}},mt=Ue=>{o.trim()&&de(o)},De=Ue=>{Ue.key==="Enter"&&!Ue.shiftKey&&(Ue.preventDefault(),mt())},Je=Ue=>{Ue.target===Ue.currentTarget&&n()};if(!e&&!Re)return null;const et=o.trim().length>0||(f.length>0||g.length>0)&&!b,ut=o.length===0&&f.length===0&&g.length===0,_t=o.length>=3&&f.length===0&&g.length===0&&!b,vt=L.length>0||V,ke=!vt||et,lt=vt&&et,Tt=vt&&!T&&!F&&!et;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${Ot.overlay} ${F?Ot.overlayMinimized:""} ${je?Ot.exiting:""}`,onClick:Je,children:r.jsxs("div",{ref:ne,className:`${Ot.modal} ${F?Ot.minimized:""} ${Tt?Ot.collapsed:""} ${je?Ot.exiting:""}`,style:{transform:`translate(${ie.x}px, ${ie.y}px)`,height:Tt?"auto":void 0},onClick:()=>{Ne.current||(F?B(!1):Tt&&C(!0))},children:[r.jsxs("div",{className:Ot.dragBar,onMouseDown:Ue=>{Ue.target.closest("button")||(Se(!0),Ne.current=!1,qe.current={x:Ue.clientX,y:Ue.clientY},Ge.current={x:ie.x,y:ie.y})},children:[r.jsxs("div",{className:Ot.dragBarControls,children:[r.jsx("button",{className:Ot.windowControlBtn,onClick:n,title:"Close",children:r.jsx(Lt,{size:24,color:"#64748b"})}),r.jsx("button",{className:Ot.windowControlBtn,onClick:()=>B(!F),title:F?"Maximize":"Minimize",children:F?r.jsx(Hz,{size:24,color:"#64748b"}):r.jsx(JX,{size:24,color:"#64748b"})})]}),r.jsx("div",{className:Ot.dragBarTitle,children:vt?r.jsxs(r.Fragment,{children:[r.jsx(kv,{size:14,className:"text-violet-600"}),r.jsx("span",{children:"AI Assistant"})]}):et?r.jsxs(r.Fragment,{children:[r.jsx(Mn,{size:14,className:"text-blue-500"}),r.jsx("span",{children:"Search Results"})]}):r.jsx("span",{style:{opacity:.5,fontWeight:500},children:"Clinic Manager AI"})}),r.jsx("div",{className:Ot.dragBarControlsRight,children:r.jsx("button",{className:Ot.newChatBtn,onClick:ye,title:"New Chat",children:r.jsx(Ii,{size:20})})})]}),r.jsxs("div",{className:Ot.contentWrapper,children:[vt&&r.jsx("div",{className:Ot.chatSectionFill,children:r.jsxs("div",{className:Ot.chatMessagesFill,children:[L.map((Ue,jt)=>r.jsx("div",{className:`${Ot.chatBubble} ${Ue.role==="user"?Ot.chatBubbleUser:Ue.role==="model"?Ot.chatBubbleModel:Ot.chatBubbleSystem}`,children:Ue.role==="model"?r.jsx(bf,{remarkPlugins:[jf],children:Ue.text}):Ue.text},jt)),V&&r.jsxs("div",{className:Ot.processing,children:[r.jsx(Mc,{size:14,className:Ot.spinner}),"Thinking..."]})]})}),ke&&r.jsxs("div",{className:lt?Ot.overlayContent:Ot.content,children:[ut&&!vt&&r.jsxs("div",{className:Ot.section,children:[r.jsx("div",{className:Ot.sectionTitle,children:"Newly Registered"}),r.jsx("div",{className:Ot.recentList,children:S?[1,2,3,4,5].map(Ue=>r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}},Ue)):c.length>0?c.map(Ue=>r.jsxs("div",{className:Ot.recentPill,onClick:()=>_e(Ue),onMouseEnter:()=>we(Ue.id),children:[r.jsx("span",{className:Ot.recentName,children:Ue.name||"Patient"}),r.jsxs("span",{className:Ot.recentToken,children:["#",Ue.token]}),r.jsxs("span",{className:Ot.recentInfo,children:[Ue.age?`${Ue.age}y`:""," ",Ue.gender||""]})]},Ue.id)):r.jsx("div",{className:Ot.recentInfo,style:{opacity:.5},children:"No recent patients found."})})]}),ut&&!vt&&r.jsxs("div",{className:Ot.section,children:[r.jsx("div",{className:Ot.sectionTitle,children:"Try Asking AI..."}),r.jsx("div",{className:Ot.examplesGrid,children:Ie.map((Ue,jt)=>r.jsxs("div",{className:Ot.exampleCard,onClick:()=>He(Ue.text),children:[r.jsx("span",{className:Ot.exampleIcon,children:Ue.icon}),r.jsx("span",{className:Ot.exampleText,children:Ue.text})]},jt))})]}),b&&r.jsx("div",{className:Ot.section,children:r.jsxs("div",{className:Ot.processing,children:[r.jsx(Mc,{size:16,className:Ot.spinner}),"Searching..."]})}),g.length>0&&!b&&r.jsxs("div",{className:Ot.section,children:[r.jsx("div",{className:Ot.sectionTitle,children:"Pages Found"}),r.jsx("div",{className:Ot.resultsList,children:g.map((Ue,jt)=>r.jsxs("div",{className:Ot.resultItem,onClick:()=>ze(Ue),onMouseEnter:()=>Oe(Ue),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{color:"#7c3aed"},children:Ue.icon}),r.jsx("span",{className:Ot.resultName,children:Ue.name})]}),r.jsx("span",{className:Ot.resultDetails,style:{fontSize:"0.7rem"},children:"Jump to page"})]},jt))})]}),et&&r.jsxs("div",{className:Ot.section,children:[r.jsx("div",{className:Ot.sectionTitle,children:"Patients Found"}),r.jsxs("div",{className:Ot.resultsList,children:[o.trim().length>0&&r.jsx("div",{className:Ot.resultItem,onClick:nt,style:{border:"1px dashed #6366f1",backgroundColor:"#f5f3ff"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#8b5cf6",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(FN,{size:16})}),r.jsxs("div",{children:[r.jsxs("span",{className:Ot.resultName,style:{color:"#7c3aed"},children:['Create "',o,'"']}),r.jsx("div",{className:"text-xs text-violet-600 mt-0.5",children:"Add new patient"})]})]})}),f.map(Ue=>r.jsxs("div",{className:Ot.resultItem,onClick:()=>_e(Ue),onMouseEnter:()=>{sB(),we(Ue.id)},children:[r.jsxs("div",{children:[r.jsxs("span",{className:Ot.resultToken,children:["[#",Ue.token,"]"]}),r.jsx("span",{className:Ot.resultName,children:Ue.name})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[Ue.age&&r.jsxs("span",{children:[Ue.age," Yrs"]}),Ue.gender&&r.jsx("span",{children:Ue.gender}),r.jsxs("span",{children:["ID: ",Ue.id.slice(-6).toUpperCase()]}),k.map(jt=>{var Xn;const Ct=(Xn=Ue.custom_fields)==null?void 0:Xn[jt.key];return Ct?r.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 border border-slate-200",children:[jt.label,": ",String(Ct)]},jt.key):null})]})]},Ue.id))]})]}),_t&&!vt&&r.jsx("div",{className:Ot.section,children:r.jsxs("div",{className:Ot.noResults,children:["Press ",r.jsx("strong",{children:"Enter"}),' to send "',o,'" to AI Assistant']})})]})]}),r.jsxs("div",{className:Ot.header,children:[r.jsx("div",{className:Ot.inputWrapper,children:r.jsxs("div",{className:Ot.inputContainer,children:[r.jsx("div",{className:Ot.minimizedSearchIcon,children:r.jsx(Mn,{size:24})}),r.jsx("textarea",{ref:Ue=>{s.current=Ue,Ue&&(Ue.style.height="auto",Ue.style.height=Math.min(Ue.scrollHeight,150)+"px")},className:Ot.input,placeholder:F?"Type here...":"Search (Name/Token/Phone), Ask AI, or Enter New Case (Name Age Sex Complaint)...",value:o,onChange:Ue=>{ge(Ue),Ue.target.style.height="auto",Ue.target.style.height=Math.min(Ue.target.scrollHeight,150)+"px"},onKeyDown:De,onFocus:Ue=>{Ue.target.scrollIntoView=()=>{},setTimeout(()=>{ne.current&&(ne.current.scrollTop=ne.current.scrollHeight)},100)},rows:1,disabled:V}),q&&r.jsxs("div",{style:{position:"relative",marginRight:"0.5rem"},children:[r.jsx("img",{src:q,alt:"Selected",style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #e2e8f0"}}),r.jsx("button",{onClick:se,style:{position:"absolute",top:-4,right:-4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",padding:"1px",cursor:"pointer",display:"flex"},children:r.jsx(Lt,{size:8})})]}),r.jsxs("div",{className:Ot.controlsGroup,children:[r.jsx("button",{className:Ot.iconButton,onClick:()=>{var Ue;return(Ue=oe.current)==null?void 0:Ue.click()},title:"Attach Image",children:r.jsx(zO,{size:16})}),(o.trim().length>0||q)&&r.jsx("button",{className:`${Ot.iconButton} ${Ot.sendButton}`,onClick:()=>de(o),title:"Send to AI",children:r.jsx(LN,{size:16})}),r.jsx("button",{className:Ot.iconButton,onClick:W,title:"Voice Input",children:r.jsx(RN,{size:16})})]})]})}),r.jsx("input",{type:"file",ref:oe,onChange:Q,accept:"image/*",style:{display:"none"}})]})]})}),ve&&r.jsx(eS,{onClose:()=>ae(!1),patientData:null,tokenNumber:null,onAiSummaryChange:Ue=>{console.log("AI Summary:",Ue),I(Ue)}}),G&&r.jsx(MPe,{isOpen:!!G,onClose:z,title:G.title,widgets:G.widgets,onSave:ce})]})};var zH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lB=Ce.createContext&&Ce.createContext(zH),LPe=["attr","size","title"];function FPe(t,e){if(t==null)return{};var n=$Pe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function $Pe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function TN(){return TN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},TN.apply(this,arguments)}function cB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function kN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(n),!0).forEach(function(a){BPe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function BPe(t,e,n){return e=zPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zPe(t){var e=qPe(t,"string");return typeof e=="symbol"?e:e+""}function qPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qH(t){return t&&t.map((e,n)=>Ce.createElement(e.tag,kN({key:n},e.attr),qH(e.child)))}function Ri(t){return e=>Ce.createElement(UPe,TN({attr:kN({},t.attr)},e),qH(t.child))}function UPe(t){var e=n=>{var{attr:a,size:i,title:s}=t,o=FPe(t,LPe),l=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Ce.createElement("svg",TN({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,o,{className:c,style:kN(kN({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ce.createElement("title",null,s),t.children)};return lB!==void 0?Ce.createElement(lB.Consumer,null,n=>e(n)):e(zH)}function VPe(t){return Ri({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function uB(t){return Ri({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function rv(t){return Ri({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function dB(t){return Ri({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function DA(t){return Ri({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function Uh(t){return Ri({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function zj(t){return Ri({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(t)}function jm(t){return Ri({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(t)}function av(t){return Ri({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(t)}function Cm(t){return Ri({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function UH(t){return Ri({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function hB(t){return Ri({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function HPe(t){return Ri({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function qj(t){return Ri({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function wm(t){return Ri({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const VH={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Uh},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:zj},{path:"/dashboard/users",name:"User Management",icon:wm}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Uh}]},{title:"Clinic Management",links:[{path:"/dashboard/clinic-hub",name:"Clinic Hub",icon:dB},{path:"/dashboard/staff",name:"Staff Management",icon:wm},{path:"/dashboard/roles",name:"Role Management",icon:qj},{path:"/custom-tables",name:"Custom Tables",icon:rv},{path:"/dashboards",name:"Custom Dashboards",icon:uB}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:zj},{path:"/dashboard/patients",name:"All Patients",icon:wm},{path:"/dashboard/patients/search",name:"Search Patient",icon:Cm},{path:"/dashboard/files",name:"Patient Files",icon:rv}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:rv},{path:"/dashboard/inventory",name:"Inventory Management",icon:av},{path:"/dashboard/inventory/add",name:"Add Drug",icon:av},{path:"/dashboard/distributors",name:"Distributor Management",icon:wm}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:hB},{path:"/dashboard/reception",name:"Appointment Queue",icon:Uh},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:jm},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:jm}]},{title:"Role Operations",links:[{path:"/manage-admission",name:"Admission Desk",icon:qj},{path:"/dashboard/pharmacy-queue",name:"Pharmacy Queue",icon:av},{path:"/dashboard/lab",name:"Lab Panel",icon:DA},{path:"/billing",name:"Billing",icon:jm},{path:"/create-custom-bill",name:"Custom Bill",icon:jm}]},{title:"Help & Support",links:[{path:"/dashboard/guide",name:"User Guide",icon:VPe}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search-patient",name:"Patient Search",icon:Cm},{path:"/dashboard/add-patient",name:"Add Patient",icon:zj},{path:"/manage-admission",name:"Manage Admission",icon:qj}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:DA},{path:"/billing",name:"Billing",icon:jm}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:hB}]},{title:"Analytics",links:[{path:"/dashboards",name:"Custom Dashboards",icon:uB}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Appointment Queue",icon:Uh}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:wm},{path:"/dashboard/add-patient",name:"Add Patient",icon:zj},{path:"/dashboard/search-patient",name:"Search Patient",icon:Cm}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:jm},{path:"/manage-admission",name:"Manage Admission",icon:qj}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Uh},{path:"/lab-inventory",name:"Lab Test Inventory",icon:DA},{path:"/lab/search-report",name:"Search Lab Report",icon:Cm}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Uh},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:av},{path:"/dashboard/inventory/add",name:"Add Drug",icon:av},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:rv},{path:"/dashboard/distributors",name:"Distributor Management",icon:wm}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:rv},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:dB},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:Cm}]}]},CM=async()=>{const t=await le("/api/clinic-subscriptions/plans",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription plans")}return t.json()},GPe=async t=>{const e=await le(`/api/clinic-subscriptions/cancel/${t}`,{method:"PUT"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to cancel clinic subscription")}return e.json()},WPe=async t=>{const e=await le(`/api/clinics/${t}/subscription-status`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||`Failed to fetch subscription status for clinic ${t}`)}return e.json()},YPe=async t=>{const e=await le(`/api/clinic-subscriptions/plans/${t}`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to fetch clinic subscription plan")}return e.json()},KPe=async t=>{const e=await le("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to create clinic subscription plan")}return e.json()},QPe=async(t,e)=>{const n=await le(`/api/clinic-subscriptions/plans/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to update clinic subscription plan")}return n.json()},XPe=async t=>{const e=await le(`/api/clinic-subscriptions/plans/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to deactivate clinic subscription plan")}return e.json()},JPe=async t=>{const e=await le("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to initiate clinic subscription")}return e.json()},ZPe=async()=>{try{const t=await le("/api/clinic-subscriptions/pending",{method:"GET"});return t.ok?t.json():null}catch(t){return console.error("Error checking for pending subscription:",t),null}},eOe=async()=>{const t=await le("/api/clinics/subscription-status",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription status")}return t.json()};function tOe(t=!0){return PN({queryKey:Ut.clinicSubscription,queryFn:eOe,enabled:t,staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!0})}const nOe="_container_c9bhr_3",rOe="_header_c9bhr_21",aOe="_titleGroup_c9bhr_41",iOe="_title_c9bhr_41",sOe="_closeButton_c9bhr_59",oOe="_messageList_c9bhr_79",lOe="_emptyState_c9bhr_108",cOe="_emptyStateIcon_c9bhr_119",uOe="_exampleContainer_c9bhr_145",dOe="_exampleChip_c9bhr_153",hOe="_messageRow_c9bhr_176",fOe="_messageRowUser_c9bhr_194",pOe="_messageRowModel_c9bhr_198",mOe="_messageRowSystem_c9bhr_202",gOe="_bubble_c9bhr_208",yOe="_bubbleUser_c9bhr_224",xOe="_bubbleModel_c9bhr_234",vOe="_bubbleSystem_c9bhr_247",bOe="_processingIndicator_c9bhr_330",jOe="_spin_c9bhr_343",wOe="_inputArea_c9bhr_358",NOe="_imagePreviewContainer_c9bhr_365",SOe="_inputContainer_c9bhr_376",_Oe="_inputField_c9bhr_393",COe="_sendButton_c9bhr_407",ur={container:nOe,header:rOe,titleGroup:aOe,title:iOe,closeButton:sOe,messageList:oOe,emptyState:lOe,emptyStateIcon:cOe,exampleContainer:uOe,exampleChip:dOe,messageRow:hOe,messageRowUser:fOe,messageRowModel:pOe,messageRowSystem:mOe,bubble:gOe,bubbleUser:yOe,bubbleModel:xOe,bubbleSystem:vOe,processingIndicator:bOe,spin:jOe,inputArea:wOe,imagePreviewContainer:NOe,inputContainer:SOe,inputField:_Oe,sendButton:COe},HH=({onClose:t,settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s})=>{const{chatQuery:o,setChatQuery:l,chatHistory:c,isProcessing:d,handleSendMessage:f,refreshChat:p,stopGeneration:g,selectedImage:x,handleImageSelect:b,clearImage:j}=cD({settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s}),S=v.useRef(null),_=v.useRef(null),T=()=>{var O;(O=S.current)==null||O.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{T()},[c,d]);const C=O=>{var F;const I=(F=O.target.files)==null?void 0:F[0];I&&b(I)},P=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],k=O=>{l(O)};return r.jsxs("div",{className:ur.container,children:[r.jsxs("header",{className:ur.header,children:[r.jsxs("div",{className:ur.titleGroup,children:[r.jsx(kv,{size:20,className:"text-violet-600"}),r.jsx("h3",{className:ur.title,children:"Clinic Assistant"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:p,className:ur.closeButton,title:"Refresh Chat",children:r.jsx(Wz,{size:18})}),r.jsx("button",{onClick:t,className:ur.closeButton,title:"Close",children:r.jsx(Lt,{size:20})})]})]}),r.jsxs("div",{className:ur.messageList,children:[c.length===0&&r.jsxs("div",{className:ur.emptyState,children:[r.jsx(kv,{size:48,className:ur.emptyStateIcon}),r.jsx("p",{children:"How can I help you manage the clinic today?"}),r.jsx("div",{className:ur.exampleContainer,children:P.map((O,I)=>r.jsx("button",{className:ur.exampleChip,onClick:()=>k(O),children:O},I))})]}),c.map((O,I)=>r.jsx("div",{className:`${ur.messageRow} ${O.role==="user"?ur.messageRowUser:O.role==="model"?ur.messageRowModel:ur.messageRowSystem}`,children:r.jsx("div",{className:`${ur.bubble} ${O.role==="user"?ur.bubbleUser:O.role==="model"?ur.bubbleModel:ur.bubbleSystem}`,children:O.role==="user"||O.role==="system"?O.text:r.jsx(bf,{remarkPlugins:[jf],children:O.text})})},I)),d&&r.jsx("div",{className:`${ur.messageRow} ${ur.messageRowModel}`,children:r.jsxs("div",{className:ur.processingIndicator,children:[r.jsx(Mc,{size:14,className:ur.spin}),"Thinking..."]})}),r.jsx("div",{ref:S})]}),r.jsxs("div",{className:ur.inputArea,children:[x&&r.jsxs("div",{className:ur.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[r.jsx("img",{src:x,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),r.jsx("button",{onClick:j,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:r.jsx(Lt,{size:12})})]}),r.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),r.jsxs("div",{className:ur.inputContainer,children:[r.jsx("input",{type:"file",ref:_,onChange:C,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:ur.sendButton,onClick:()=>{var O;return(O=_.current)==null?void 0:O.click()},disabled:d,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:r.jsx(zO,{size:18})}),r.jsx("input",{type:"text",className:ur.inputField,placeholder:"Type your request...",value:o,onChange:O=>l(O.target.value),onKeyDown:O=>O.key==="Enter"&&!d&&f(),disabled:d,autoFocus:!0}),d?r.jsx("button",{className:ur.sendButton,onClick:g,title:"Stop Generating",style:{color:"#ef4444"},children:r.jsx(BJ,{size:18,fill:"currentColor"})}):r.jsx("button",{className:ur.sendButton,onClick:()=>f(),disabled:!o.trim()&&!x,children:r.jsx(LN,{size:18})})]})]})]})};function Wc(t,e=100){const n=v.useRef(!1);v.useEffect(()=>{if(n.current)return;const a=setTimeout(()=>{const i=document,s=['input[type="text"]:not([disabled]):not([readonly])','input[type="search"]:not([disabled]):not([readonly])','input[type="email"]:not([disabled]):not([readonly])','input[type="tel"]:not([disabled]):not([readonly])','input[type="url"]:not([disabled]):not([readonly])',"input:not([type]):not([disabled]):not([readonly])"].join(", "),o=i.querySelectorAll(s),l=Array.from(o).filter(c=>{const d=window.getComputedStyle(c),f=c.getBoundingClientRect();return d.display!=="none"&&d.visibility!=="hidden"&&d.opacity!=="0"&&f.width>0&&f.height>0});if(l.length>0){const c=l[0];c.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{c.focus()},50),n.current=!0}},e);return()=>clearTimeout(a)},[t,e])}const TOe=({onLoginSuccess:t})=>{const[e,n]=v.useState(""),[a,i]=v.useState(""),[s,o]=v.useState(null),[l,c]=v.useState(!1),d=Mt();Wc();const f=async x=>{x.preventDefault(),c(!0),o(null);try{const b=await le("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!b.ok){let S=`Login failed with status: ${b.status}`;try{S=(await b.json()).message||S}catch{try{const T=await b.text();T&&(S=`${S} - ${T}`)}catch{}}throw new Error(S)}const j=await b.json();console.log("Login successful:",j),localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(b){console.error("Login failed:",b),o(b.message||"Login failed. Please check your credentials.")}finally{c(!1)}},p=async x=>{c(!0),o(null);try{const b=await le("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x.credential})});if(!b.ok)throw new Error("Google Sign-In failed");const j=await b.json();localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(b){console.error("Google Login Error:",b),o("Google Sign-In failed. Please try again.")}finally{c(!1)}},g=()=>{console.error("Google Login Failed"),o("Google Sign-In was unsuccessful. Please try again.")};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Newtons AI HMS"}),r.jsx("p",{className:"auth-subtitle",children:"Sign in to continue"}),r.jsxs("form",{onSubmit:f,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>n(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"email",children:"Email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:x=>i(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"password",children:"Password"})]}),s&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:s})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:l,className:"auth-submit-button",children:l?"Signing in...":"Sign In"})})]}),r.jsx("div",{className:"google-login-container",children:r.jsx(YW,{onSuccess:p,onError:g,useOneTap:!0})}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(Nr,{to:"/register",className:"auth-navigation-link",children:"Create account"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},kOe=()=>{const[t,e]=v.useState(""),[n,a]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState(null),[f,p]=v.useState(!1),g=Mt(),x=async b=>{b.preventDefault(),p(!0),d(null);try{const j=await le("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:t,userName:n,userEmail:i,userPassword:o})}),S=await j.json();if(!j.ok)throw new Error(S.message||`HTTP error! status: ${j.status}`);console.log("Registration successful:",S),g("/login")}catch(j){console.error("Registration failed:",j),d(j.message||"Registration failed. Please try again.")}finally{p(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"}),r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:t,onChange:b=>e(b.target.value),className:"auth-text-input",placeholder:"Your Clinic's Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"}),r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:n,onChange:b=>a(b.target.value),className:"auth-text-input",placeholder:"Your Full Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userEmail",children:"Your Email (Admin Login)"}),r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:i,onChange:b=>s(b.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userPassword",children:"Password"}),r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:o,onChange:b=>l(b.target.value),className:"auth-text-input",placeholder:"Min. 6 characters"})]}),c&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:c})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:f,className:"auth-submit-button",children:f?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(Nr,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},AOe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i})=>{const s=Lr(),[o,l]=v.useState(""),c=VH[n]||[],[d,f]=v.useState(500),p=v.useRef(!1),g=v.useCallback(S=>{p.current=!0,S.preventDefault()},[]),x=v.useCallback(()=>{p.current=!1},[]),b=v.useCallback(S=>{if(p.current){const _=window.innerWidth-S.clientX;_>250&&_<window.innerWidth*.8&&f(_)}},[]);v.useEffect(()=>(window.addEventListener("mousemove",b),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",x)}),[b,x]);const j=c.map(S=>({...S,links:S.links.filter(_=>_.name.toLowerCase().includes(o.toLowerCase()))})).filter(S=>S.links.length>0);return r.jsxs("div",{className:`side-panel ${a?"open":""}`,style:{width:`${d}px`,right:a?"0":`-${d}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:g}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(Nr,{to:"/dashboard",className:"home-button",onClick:i,children:r.jsx(Uh,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Cm,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:o,onChange:S=>l(S.target.value)})]}),r.jsx("button",{className:"close-button",onClick:i,children:""})]}),r.jsx("nav",{children:j.map((S,_)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:S.title}),r.jsx("ul",{className:"sub-page-list",children:S.links.map(T=>{const C=T.icon;return r.jsx("li",{children:r.jsxs(Nr,{to:T.path,className:s.pathname===T.path?"active":"",onClick:i,children:[C&&r.jsx(C,{})," ",T.name]})},T.path)})})]},_))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(UH,{})," Logout"]})]})]})},EOe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i,roleNavigation:s})=>{const o=Lr(),l=s[n]||[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mobile-side-panel-overlay ${a?"open":""}`,onClick:i}),r.jsxs("div",{className:`mobile-side-panel ${a?"open":""}`,children:[r.jsxs("div",{className:"mobile-side-panel-header",children:[r.jsx("h3",{children:"Menu"}),r.jsx("button",{className:"close-button",onClick:i,children:r.jsx(HPe,{})})]}),r.jsx("nav",{children:l.map((c,d)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:c.title}),r.jsx("ul",{className:"sub-page-list",children:c.links.map(f=>{const p=f.icon;return r.jsx("li",{children:r.jsxs(Nr,{to:f.path,className:o.pathname===f.path?"active":"",onClick:i,children:[p&&r.jsx(p,{})," ",f.name]})},f.path)})})]},d))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(UH,{})," Logout"]})]})]})]})},zu={"/dashboard":{label:"Dashboard"},"/dashboard/staff":{label:"Staff Management",parent:"/dashboard"},"/dashboard/staff/add":{label:"Add Staff",parent:"/dashboard/staff"},"/dashboard/staff/edit":{label:"Edit Staff",parent:"/dashboard/staff"},"/dashboard/roles":{label:"Role Management",parent:"/dashboard"},"/dashboard/patients":{label:"All Patients",parent:"/dashboard"},"/dashboard/patients/add":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search-patient":{label:"Search Patient",parent:"/dashboard"},"/dashboard/clinic-hub":{label:"Clinic Hub",parent:"/dashboard"},"/dashboard/reception":{label:"Appointment Queue",parent:"/dashboard"},"/dashboard/pharmacy-queue":{label:"Pharmacy Queue",parent:"/dashboard"},"/dashboard/lab":{label:"Lab Panel",parent:"/dashboard"},"/dashboard/inventory":{label:"Inventory",parent:"/dashboard"},"/dashboard/inventory/add":{label:"Add Drug",parent:"/dashboard/inventory"},"/dashboard/inventory/edit":{label:"Edit Drug",parent:"/dashboard/inventory"},"/dashboard/purchase":{label:"Purchase",parent:"/dashboard"},"/dashboard/distributors":{label:"Distributors",parent:"/dashboard"},"/dashboard/patient-debts":{label:"Patient Debts",parent:"/dashboard"},"/dashboard/add-order":{label:"Add Pharmacy Order",parent:"/dashboard"},"/dashboard/edit-pharmacy-order":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/pharmacy-billing":{label:"Pharmacy Billing",parent:"/dashboard"},"/dashboard/analysis":{label:"Analysis",parent:"/dashboard"},"/dashboard/settings":{label:"Settings",parent:"/dashboard"},"/dashboard/search-patient-records":{label:"Search Records",parent:"/dashboard"},"/dashboard/queue":{label:"Queue",parent:"/dashboard"},"/dashboard/add-patient":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search":{label:"Patient Search",parent:"/dashboard"},"/dashboard/patients/search":{label:"Search Patient",parent:"/dashboard"},"/dashboard/subscriptions":{label:"Subscriptions",parent:"/dashboard"},"/dashboard/subscriptions/add":{label:"Add Plan",parent:"/dashboard/subscriptions"},"/dashboard/subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/subscriptions"},"/dashboard/clinic-subscriptions":{label:"Clinic Subscriptions",parent:"/dashboard"},"/dashboard/clinic-subscriptions/add":{label:"Add Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/clinic-subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/users":{label:"User Management",parent:"/dashboard"},"/dashboard/lab-billing":{label:"Lab Billing",parent:"/dashboard"},"/lab-inventory":{label:"Lab Inventory",parent:"/dashboard"},"/lab/search-report":{label:"Search Lab Report",parent:"/dashboard"},"/create-lab-order":{label:"Create Lab Order",parent:"/dashboard"},"/enter-lab-report":{label:"Enter Lab Report",parent:"/dashboard"},"/view-lab-report":{label:"View Lab Report",parent:"/dashboard"},"/lab/report/:id":{label:"Lab Report",parent:"/lab/search-report"},"/lab/enter-report/:id":{label:"Enter Report",parent:"/lab/search-report"},"/lab/view-report/:id":{label:"View Report",parent:"/lab/search-report"},"/billing":{label:"Billing",parent:"/dashboard"},"/dashboard/doctor-billing":{label:"Doctor Billing",parent:"/dashboard"},"/dashboard/doctor-billing/:id":{label:"Doctor Bill",parent:"/dashboard/doctor-billing"},"/create-custom-bill":{label:"Create Custom Bill",parent:"/dashboard"},"/patient":{label:"Patient",parent:"/dashboard"},"/patient/:id/admission-billing":{label:"Admission Billing",parent:"/manage-admission"},"/patient/:id/admission-bill":{label:"Admission Bill",parent:"/patient/:id/admission-billing"},"/patient/:id/lab-reports":{label:"Lab Reports",parent:"/patient"},"/patient/:id/pharmacy-orders":{label:"Pharmacy Orders",parent:"/patient"},"/patient/:id/complaints":{label:"Past Complaints",parent:"/patient"},"/edit-complaint":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/:id":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/patient/:id":{label:"New Complaint",parent:"/dashboard"},"/start-subscription":{label:"Start Subscription",parent:"/dashboard"},"/start-subscription/:id":{label:"Start Subscription",parent:"/dashboard"},"/manage-admission":{label:"Manage Admission",parent:"/dashboard"},"/dashboard/guide":{label:"User Guide",parent:"/dashboard"},"/custom-tables":{label:"Custom Tables",parent:"/dashboard"},"/custom-tables/:id":{label:"Table Records",parent:"/custom-tables"},"/dashboards":{label:"Dashboards",parent:"/dashboard"},"/dashboards/new":{label:"New Dashboard",parent:"/dashboards"},"/dashboards/:id":{label:"Dashboard View",parent:"/dashboards"},"/dashboards/:id/edit":{label:"Edit Dashboard",parent:"/dashboards"},"/dashboard/pharmacy-billing/:id":{label:"Pharmacy Bill",parent:"/dashboard/pharmacy-billing"},"/dashboard/lab-billing/:id":{label:"Lab Bill",parent:"/dashboard/lab-billing"},"/dashboard/edit-pharmacy-order/:id":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/orders/:id":{label:"Order Details",parent:"/dashboard/add-order"},"/refill-reminders":{label:"Refill Reminders",parent:"/dashboard"},"/start-clinic-subscription":{label:"Start Clinic Subscription",parent:"/dashboard"},"/dashboard/all-patients":{label:"All Patients",parent:"/dashboard"}},fB=t=>t.split("/").map(e=>{const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),a=/^\d+$/.test(e);return n||a?":id":e}).join("/"),POe=t=>{if(zu[t])return zu[t].label;const e=fB(t);if(zu[e])return zu[e].label;const n=t.split("/"),a=n[n.length-1],i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a),s=/^\d+$/.test(a);if(i||s){const o=n.slice(0,-1).join("/"),l=fB(o);if(zu[l])return zu[l].label;if(zu[o])return zu[o].label}return a.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},OOe=()=>{const t=Lr(),e=v.useMemo(()=>{const n=t.pathname.split("/").filter(s=>s!=="");if(n.length===0||n[0]==="login"||n[0]==="registration")return[];const a=[];let i="";return n.forEach((s,o)=>{if(i+=`/${s}`,o===0&&s==="dashboard")a.push({label:"Home",path:"/dashboard",isLast:o===n.length-1});else if(s!=="dashboard"){const l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s),c=/^\d+$/.test(s);let d=POe(i);(l||c)&&d.replace(/\s/g,"").toLowerCase()===s.replace(/[-_]/g,"").toLowerCase()&&(l?d=`#${s.substring(0,8)}`:c&&(d=`#${s}`)),a.push({label:d,path:i,isLast:o===n.length-1})}}),n[0]!=="dashboard"&&a.length>0&&a.unshift({label:"Home",path:"/dashboard",isLast:!1}),a},[t.pathname]);return e.length===0?null:r.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:r.jsx("ol",{className:"breadcrumb-list",children:e.map((n,a)=>r.jsxs("li",{className:"breadcrumb-item",children:[a>0&&r.jsx(dd,{className:"breadcrumb-separator",size:14}),n.isLast?r.jsxs("span",{className:"breadcrumb-current","aria-current":"page",children:[a===0&&r.jsx(yE,{size:14,className:"breadcrumb-home-icon"}),n.label]}):r.jsxs(Nr,{to:n.path,className:"breadcrumb-link",children:[a===0&&r.jsx(yE,{size:14,className:"breadcrumb-home-icon"}),n.label]})]},n.path))})})},DOe="_container_1ivr9_5",MOe="_visualContainer_1ivr9_33",IOe="_mobileDashboardGrid_1ivr9_49",ROe="_mobileDashboardItem_1ivr9_87",LOe="_mobileDashboardIcon_1ivr9_195",FOe="_mobileDashboardLabel_1ivr9_233",$Oe="_brandTitle_1ivr9_331",BOe="_searchBar_1ivr9_387",zOe="_searchIconWrapper_1ivr9_435",qOe="_searchIcon_1ivr9_435",UOe="_placeholderText_1ivr9_459",VOe="_shortcutHint_1ivr9_479",HOe="_key_1ivr9_495",GOe="_plus_1ivr9_519",WOe="_micButtonWrapper_1ivr9_529",YOe="_micIcon_1ivr9_577",KOe="_newlyRegisteredSection_1ivr9_901",QOe="_recentList_1ivr9_917",XOe="_recentPatientPill_1ivr9_931",JOe="_recentNameContainer_1ivr9_957",ZOe="_recentInfo_1ivr9_969",eDe="_newlyRegisteredLabel_1ivr9_1007",tDe="_recentName_1ivr9_957",nDe="_recentToken_1ivr9_1171",xr={container:DOe,visualContainer:MOe,mobileDashboardGrid:IOe,mobileDashboardItem:ROe,mobileDashboardIcon:LOe,mobileDashboardLabel:FOe,brandTitle:$Oe,searchBar:BOe,searchIconWrapper:zOe,searchIcon:qOe,placeholderText:UOe,shortcutHint:VOe,key:HOe,plus:GOe,micButtonWrapper:WOe,micIcon:YOe,newlyRegisteredSection:KOe,recentList:QOe,recentPatientPill:XOe,recentNameContainer:JOe,recentInfo:ZOe,newlyRegisteredLabel:eDe,recentName:tDe,recentToken:nDe},rDe=[{label:"Doctor",icon:r.jsx(xf,{size:24}),path:"/dashboard/doctor"},{label:"Labs",icon:r.jsx(Qj,{size:24}),path:"/create-lab-order"},{label:"Clinic",icon:r.jsx(qz,{size:24}),path:"/dashboard/clinic-hub"},{label:"Inventory",icon:r.jsx(_c,{size:24}),path:"/dashboard/inventory"},{label:"Analysis",icon:r.jsx(Qj,{size:24}),path:"/dashboard/analysis"},{label:"Dental",icon:r.jsx(IJ,{size:24}),path:"/dashboard/dental"},{label:"Files",icon:r.jsx(Qj,{size:24}),path:"/dashboard/files"},{label:"Distributors",icon:r.jsx(qO,{size:24}),path:"/dashboard/distributors"},{label:"Custom Bill",icon:r.jsx(Oa,{size:24}),path:"/create-custom-bill"},{label:"Patients",icon:r.jsx(Oo,{size:24}),path:"/dashboard/patients"},{label:"Debts",icon:r.jsx(BO,{size:24}),path:"/dashboard/patient-debts"}],GH="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",aDe={apiKey:GH},iDe=()=>{const{openCommandBar:t,isOpen:e,setPreFilledQuery:n}=Oc(),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=Mt(),c=b=>{b.stopPropagation(),i(!0)};v.useEffect(()=>{s&&(i(!1),n&&n(s),t(),o(null))},[s,t,n]);const d=ss(),{data:f,isLoading:p}=PN({queryKey:["recentPatients"],queryFn:async()=>{const b=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),j=await le(`/api/patients?${b.toString()}`);if(!j.ok)throw new Error("Failed to fetch recent patients");return j.json()},staleTime:60*1e3});v.useEffect(()=>{d.prefetchQuery({queryKey:Ut.clinicSettings,queryFn:async()=>{const b=await le("/api/clinics/settings");if(!b.ok)throw new Error("Failed to fetch clinic settings");return b.json()},staleTime:30*60*1e3}),d.prefetchQuery({queryKey:Ut.drugs.all,queryFn:async()=>{const b=await le("/api/drugs");if(!b.ok)throw new Error("Failed to fetch drugs");const j=await b.json();return j.drugs||j},staleTime:10*60*1e3}),d.prefetchQuery({queryKey:Ut.labTests.all,queryFn:async()=>{const b=await le("/api/lab-tests");if(!b.ok)throw new Error("Failed to fetch lab tests");return b.json()},staleTime:10*60*1e3})},[d]);const g=(f==null?void 0:f.patients)||[],x=b=>{b&&(d.prefetchQuery({queryKey:Ut.patients.context(b),queryFn:async()=>{const j=await le(`/api/patients/${b}/context`);if(!j.ok)throw new Error("Failed to fetch patient context");return j.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Ut.dental.records(b),queryFn:async()=>{const j=await le(`/api/dental/patient/${b}`);if(!j.ok)throw new Error("Failed to fetch dental records");return j.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Ut.patientDebts.balance(b),queryFn:async()=>{const j=await le(`/api/patient-debts/${b}/balance`);return j.ok?j.json():{netDebt:0}},staleTime:1*60*1e3}),d.prefetchQuery({queryKey:Ut.queue.latest(b),queryFn:async()=>{const j=await le(`/api/queue/patient/${b}/latest`);if(!j.ok)throw new Error("Failed to fetch latest queue status");const S=await j.json();return S!=null&&S._id&&d.prefetchQuery({queryKey:Ut.queue.entry(S._id),queryFn:async()=>{const _=await le(`/api/queue/doctor/complaint/${S._id}`);if(!_.ok)throw new Error("Failed to fetch complaint record");return _.json()},staleTime:1*60*1e3}),S},staleTime:5e3}))};return r.jsxs("div",{className:xr.container,children:[!e&&r.jsx("div",{className:xr.mobileDashboardGrid,children:rDe.map((b,j)=>r.jsxs("div",{className:xr.mobileDashboardItem,onClick:()=>l(b.path),children:[r.jsx("div",{className:xr.mobileDashboardIcon,children:b.icon}),r.jsx("span",{className:xr.mobileDashboardLabel,children:b.label})]},j))}),r.jsxs("div",{className:xr.visualContainer,children:[r.jsx("h1",{className:xr.brandTitle,children:"Newtons Ai"}),!e&&r.jsxs("div",{className:xr.searchBar,onClick:()=>t(),children:[r.jsx("div",{className:xr.searchIconWrapper,children:r.jsx(Mn,{className:xr.searchIcon})}),r.jsx("span",{className:xr.placeholderText,children:"Search or Ask AI..."}),r.jsx("div",{className:xr.micButtonWrapper,onClick:c,children:r.jsx(RN,{className:xr.micIcon})}),r.jsxs("div",{className:xr.shortcutHint,children:[r.jsx("span",{className:xr.key,children:"Ctrl"}),r.jsx("span",{className:xr.plus,children:"+"}),r.jsx("span",{className:xr.key,children:"K"})]})]})]}),!e&&(p||g.length>0)&&r.jsxs("div",{className:xr.newlyRegisteredSection,children:[r.jsx("div",{className:xr.newlyRegisteredLabel,children:"Newly Registered"}),r.jsx("div",{className:xr.recentList,children:p?[1,2,3,4,5].map(b=>r.jsxs("div",{className:xr.recentPatientPill,style:{cursor:"default"},children:[r.jsxs("div",{className:xr.recentNameContainer,children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:20})]}),r.jsx("div",{className:xr.recentInfo,children:r.jsx(Z,{width:80,height:14})})]},b)):g.map(b=>r.jsxs("div",{className:xr.recentPatientPill,onClick:()=>l(`/dashboard/edit-complaint/patient/${b.id}`),onMouseEnter:()=>b.id&&x(b.id),children:[r.jsxs("div",{className:xr.recentNameContainer,children:[r.jsx("span",{className:xr.recentName,children:b.name||"New Patient"}),r.jsxs("span",{className:xr.recentToken,children:["#",b.token]})]}),r.jsxs("div",{className:xr.recentInfo,children:[b.age?`${b.age} yrs`:"",b.age&&b.gender?" / ":"",b.gender||""]})]},b.id))})]}),a&&GH&&r.jsx(ZN,{options:aDe,children:r.jsx(eS,{onClose:()=>i(!1),patientData:null,tokenNumber:null,onAiSummaryChange:o})})]})},WH=({queueList:t,onPatientClick:e})=>{const i=Array.from({length:13},(o,l)=>8+l),s={};return i.forEach(o=>s[o]=[]),t.forEach(o=>{const c=new Date(o.createdAt).getHours();c>=8&&c<=20&&s[c].push(o)}),r.jsx("div",{className:"appointment-timeline-container",children:i.map(o=>r.jsxs("div",{className:"timeline-hour-row",children:[r.jsx("div",{className:"timeline-time-label",children:r.jsxs("span",{className:"time-text",children:[o>12?o-12:o," ",o>=12?"PM":"AM"]})}),r.jsxs("div",{className:"timeline-track",children:[s[o].length===0?r.jsx("div",{className:"timeline-empty-slot"}):r.jsx("div",{className:"timeline-appointments-group",children:s[o].map(l=>{var c,d;return r.jsxs("div",{className:`timeline-card status-${l.status}`,onClick:()=>e(l),children:[r.jsxs("div",{className:"timeline-card-header",children:[r.jsx("span",{className:"patient-name-card",children:(c=l.Patient)==null?void 0:c.name}),r.jsxs("span",{className:"token-badge",children:["#",l.token_no]})]}),r.jsxs("div",{className:"timeline-card-details",children:[((d=l.Patient)==null?void 0:d.phone)&&r.jsxs("div",{className:"detail-row",children:[r.jsx(Zm,{size:12}),r.jsx("span",{children:l.Patient.phone})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx(Tb,{size:12}),r.jsx("span",{children:new Date(l.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),r.jsx("div",{className:`status-line-indicator status-color-${l.status}`})]},l.id)})}),r.jsx("div",{className:"timeline-grid-line"})]})]},o))})},YH=({isOpen:t,onClose:e,onAppointmentBooked:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(""),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(null);v.useEffect(()=>{t&&(i(""),o([]),c(null),f(""),S(null))},[t]);const _=Ce.useMemo(()=>zc(async O=>{if(O.length<2){o([]),b(!1);return}b(!0);try{const I=new URLSearchParams({search:encodeURIComponent(O),page:"1",limit:"10"}),F=await le(`/api/patients?${I.toString()}`);if(F.ok){const B=await F.json();o(B.patients||[])}}catch(I){console.error("Error searching patients:",I)}finally{b(!1)}},300),[]),T=O=>{const I=O.target.value;i(I),l&&c(null),I.length>=2?(b(!0),_(I)):o([])},C=O=>{c(O),i(O.name),o([])},P=async()=>{if(a.trim()){g(!0);try{const O=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.trim(),age:null,gender:null,phone:null})});if(!O.ok){const B=await O.json();throw new Error(B.message||"Failed to create patient")}const I=await O.json(),F={id:I.id,name:I.name,phone:I.phone,age:I.age,gender:I.gender,token:I.token};C(F)}catch(O){console.error("Failed to create patient:",O),S(O.message||"Failed to create patient")}finally{g(!1)}}},k=async()=>{if(!l){S("Please select a patient.");return}if(!d){S("Please select a date and time.");return}g(!0),S(null);try{if(!(await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id,date:new Date(d).toISOString(),description:"Appointment"})})).ok)throw new Error("Failed to book appointment");n(),e()}catch(O){console.error("Error booking appointment:",O),S(O.message||"Failed to book appointment.")}finally{g(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content appointment-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Book Appointment"}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx(Lt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[j&&r.jsx("div",{className:"error-message",children:j}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Search Patient"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Mn,{className:"search-icon-input",size:18}),r.jsx("input",{type:"text",placeholder:"Search by name, phone, or ID...",value:a,onChange:T,className:"modal-input"}),x&&r.jsx("div",{className:"spinner-sm"})]}),(s.length>0||a.length>0&&!x)&&!l&&r.jsxs("div",{className:"search-results-dropdown",children:[a.trim().length>0&&!x&&r.jsx("div",{className:"search-result-item create-patient-item",onClick:P,children:r.jsxs("div",{className:"patient-info",style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx("div",{className:"create-icon-wrapper",children:r.jsx(FN,{size:16,color:"white"})}),r.jsxs("div",{children:[r.jsxs("span",{className:"name",style:{color:"#7c3aed"},children:['Create "',a,'"']}),r.jsx("span",{className:"details",style:{color:"#7c3aed"},children:"Add new patient"})]})]})}),s.map(O=>r.jsxs("div",{className:"search-result-item",onClick:()=>C(O),children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:O.name}),r.jsxs("span",{className:"details",children:[O.age?`${O.age} yrs`:""," ",O.gender?`/ ${O.gender}`:""]})]}),O.phone&&r.jsx("span",{className:"phone",children:O.phone})]},O.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Appointment Date & Time"}),r.jsx("div",{className:"date-input-wrapper",children:r.jsx("input",{type:"datetime-local",className:"modal-input",value:d,onChange:O=>f(O.target.value)})})]}),l&&r.jsxs("div",{className:"selected-patient-preview",children:[r.jsx("div",{className:"preview-label",children:"Selected Patient:"}),r.jsxs("div",{className:"preview-card",children:[r.jsx(Kn,{size:20}),r.jsxs("div",{children:[r.jsx("strong",{children:l.name}),r.jsxs("div",{children:[l.age?`${l.age} yrs`:"-"," / ",l.gender||"-"]})]})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:k,className:"submit-button",disabled:p||!l||!d,children:p?"Booking...":"Book Appointment"})]})]})}):null},sDe=async t=>{const e=t?`/api/queue?date=${t}`:"/api/queue",n=await le(e);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()};function KH(t){return PN({queryKey:["queue",t||"today"],queryFn:()=>sDe(t),staleTime:5e3,refetchInterval:7e3,placeholderData:e=>e,refetchOnMount:"always",refetchOnWindowFocus:!0})}function oDe(){const t=ss();return $W({mutationFn:async({queueId:e,status:n,doctorId:a})=>{const i=await le(`/api/queue/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,doctorId:a})});if(!i.ok)throw new Error("Failed to update queue status");return i.json()},onSuccess:(e,{queueId:n})=>{t.invalidateQueries({queryKey:Ut.queue.today}),t.invalidateQueries({queryKey:Ut.queue.entry(n)})}})}const Uj=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},lDe=t=>{if(!t)return"Unknown Date";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},MA=({title:t,icon:e,items:n,renderItemContent:a,isLoading:i,noDataText:s})=>{const o=v.useMemo(()=>{const l={};n.forEach(d=>{if(isNaN(d.date.getTime())){l["Unknown Date"]||(l["Unknown Date"]=[]),l["Unknown Date"].push(d);return}const f=lDe(d.originalDateString);l[f]||(l[f]=[]),l[f].push(d)});const c=Object.keys(l);return c.sort((d,f)=>{if(d==="Unknown Date")return 1;if(f==="Unknown Date")return-1;try{const p=b=>{const j=b.split(" ");if(j.length===3){const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(j[1]);if(_!==-1)return new Date(parseInt(j[2]),_,parseInt(j[0]))}return new Date(b)},g=p(d),x=p(f);if(!isNaN(g.getTime())&&!isNaN(x.getTime()))return x.getTime()-g.getTime()}catch(p){console.error("Error parsing date for sorting:",p)}return f.localeCompare(d)}),c.map(d=>({date:d,items:l[d]}))},[n]);return r.jsxs("div",{className:"dcp-group-card",children:[r.jsxs("h4",{className:"dcp-group-header",children:[e&&r.jsx(e,{size:14,className:"dcp-group-icon"}),t]}),r.jsxs("div",{className:"dcp-group-content",children:[i&&r.jsx("div",{className:"dcp-history-items",children:[1,2].map(l=>r.jsxs("div",{className:"dcp-history-item",style:{border:"none"},children:[r.jsx(Z,{width:"60%",height:16,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"30%",height:12})]},l))}),!i&&n.length===0&&r.jsx("p",{className:"dcp-history-empty",children:s}),!i&&n.length>0&&r.jsx("div",{children:o.map(({date:l,items:c})=>r.jsxs("div",{className:"dcp-date-group",children:[r.jsx("h5",{className:"dcp-date-label",children:l}),r.jsx("div",{className:"dcp-date-items",children:c.map((d,f)=>r.jsx("div",{className:"dcp-history-item",children:a(d)},`${d.type}-${d.originalDateString}-${f}`))})]},l))})]})]})},Vj=()=>{var je,ue;const{openCommandBar:t}=Oc(),[e,n]=v.useState(new Date),[a,i]=v.useState("list"),[s,o]=v.useState(!1),l=e.toISOString().split("T")[0],{data:c,isLoading:d,refetch:f,isError:p}=KH(l),g=(c==null?void 0:c.list)||[],x=(c==null?void 0:c.summary)||{currentPatient:null,nextPatient:null,waitingCount:0},b=d,[j,S]=v.useState(!1),[_,T]=v.useState(null),C=()=>{f()},[P,k]=v.useState(null),[O,I]=v.useState(null),[F,B]=v.useState(null),[$,L]=v.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[V,H]=v.useState(!1),[te,X]=v.useState(null),{patientId:q}=Ma(),Y=Mt(),se=ss(),G=me=>{me&&(se.prefetchQuery({queryKey:Ut.patients.context(me),queryFn:async()=>{const oe=await le(`/api/patients/${me}/context`);if(!oe.ok)throw new Error("Failed to fetch patient context");return oe.json()},staleTime:5*60*1e3}),se.prefetchQuery({queryKey:Ut.patientDebts.balance(me),queryFn:async()=>{const oe=await le(`/api/patient-debts/${me}/balance`);return oe.ok?oe.json():{netDebt:0}},staleTime:1*60*1e3}),se.prefetchQuery({queryKey:Ut.queue.latest(me),queryFn:async()=>{const oe=await le(`/api/queue/patient/${me}/latest`);if(!oe.ok)throw new Error("Failed to fetch latest queue status");const Q=await oe.json();return Q!=null&&Q._id&&se.prefetchQuery({queryKey:Ut.queue.entry(Q._id),queryFn:async()=>{const ie=await le(`/api/queue/doctor/complaint/${Q._id}`);if(!ie.ok)throw new Error("Failed to fetch complaint record");return ie.json()},staleTime:1*60*1e3}),Q},staleTime:5e3}),se.prefetchQuery({queryKey:Ut.dental.records(me),queryFn:async()=>{const oe=await le(`/api/dental/patient/${me}`);if(!oe.ok)throw new Error("Failed to fetch dental records");return oe.json()},staleTime:5*60*1e3}))},z=v.useCallback(async me=>{B(null),k(null),I(null),H(!0),X(null),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const oe=await le(`/api/patients/${me}`);if(!oe.ok)throw new Error(`Patient details fetch failed (${oe.status})`);const Q=await oe.json();k(Q);const ie=await le(`/api/queue/patient/${me}/latest`);if(!ie.ok&&ie.status!==404)throw new Error(`Queue entry fetch failed (${ie.status})`);if(ie.ok){const xe=await ie.json();I(xe)}await ce(me)}catch(oe){console.error("Error fetching specific patient data:",oe),B(oe.message||"Failed to load patient data."),X(oe.message||"Failed to load patient history.")}finally{H(!1)}},[]),ce=v.useCallback(async me=>{H(!0),X(null);try{const[oe,Q,ie,xe]=await Promise.all([le(`/api/queue/patient/${me}/complaints`),le(`/api/lab/patient/${me}`),le(`/api/lab/orders/patient/${me}?status=pending`),le(`/api/pharmacy-orders/patient/${me}`)]),ee=oe.ok?await oe.json():[],Se=Q.ok?await Q.json():[],qe=ie.ok?await ie.json():[],Ge=xe.ok?await xe.json():[];L({pastComplaints:ee||[],labReports:Se||[],pendingLabOrders:qe||[],pharmacyOrders:Ge||[]})}catch(oe){console.error("Error fetching patient history:",oe),X(oe.message||"Failed to load patient history."),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{H(!1)}},[]);v.useEffect(()=>{q?z(q):(k(null),I(null),f())},[q,z,f]),v.useEffect(()=>{var me;if(!q&&((me=x.currentPatient)==null?void 0:me.status)==="consulting"){const oe=x.currentPatient._id;oe&&Y(`/dashboard/edit-complaint/${oe}`)}},[q,x.currentPatient,Y]),v.useEffect(()=>{var me;!q&&((me=x.currentPatient)!=null&&me.patientId)?ce(x.currentPatient.patientId):!q&&!x.currentPatient&&(L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),H(!1),X(null))},[q,(je=x.currentPatient)==null?void 0:je.patientId,ce]);const we=((ue=x.currentPatient)==null?void 0:ue.patientId)||(q?parseInt(q,10):null),K=v.useMemo(()=>{if(!we||!$.pastComplaints)return[];const me=$.pastComplaints.map(oe=>({date:new Date(oe.createdAt),type:"Complaint",data:oe,originalDateString:oe.createdAt})).filter(oe=>!isNaN(oe.date.getTime()));return me.sort((oe,Q)=>Q.date.getTime()-oe.date.getTime()),me},[we,$.pastComplaints]),Ie=v.useMemo(()=>{if(!we)return[];const me=[];return($.pendingLabOrders??[]).forEach(oe=>{const Q=new Date(oe.createdAt);isNaN(Q.getTime())||me.push({date:Q,type:"Lab Order (Pending)",data:oe,originalDateString:oe.createdAt})}),($.labReports??[]).forEach(oe=>{const Q=oe.reportCreatedAt?new Date(oe.reportCreatedAt):null;Q&&!isNaN(Q.getTime())&&me.push({date:Q,type:"Lab Report",data:oe,originalDateString:oe.reportCreatedAt})}),me.sort((oe,Q)=>Q.date.getTime()-oe.date.getTime()),me},[we,$.pendingLabOrders,$.labReports]),We=v.useMemo(()=>{if(!we||!$.pharmacyOrders)return[];const me=$.pharmacyOrders.map(oe=>({date:new Date(oe.date),type:"Pharmacy Order",data:oe,originalDateString:oe.date})).filter(oe=>!isNaN(oe.date.getTime()));return me.sort((oe,Q)=>Q.date.getTime()-oe.date.getTime()),me},[we,$.pharmacyOrders]),Re=async()=>{S(!0),T(null);try{await le("/api/queue/doctor/next",{method:"POST"}),await f()}catch(me){console.error("Error calling next patient:",me),T(me.message||"Failed to call next patient.")}finally{S(!1)}},Fe=me=>{switch(me){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return me}},[ve,ae]=v.useState("info");return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dcp-container",children:[r.jsxs("div",{className:"dcp-header-row",children:[r.jsx("button",{onClick:()=>Y(-1),className:"dcp-back-btn",children:r.jsx(rn,{size:20})}),r.jsx("h1",{className:"dcp-title",children:"Doctor Consultation Panel"})]}),q?r.jsxs(r.Fragment,{children:[F&&r.jsx("div",{className:"dcp-error",children:F}),P&&r.jsx("div",{className:"dcp-card dcp-card-violet",children:r.jsxs("div",{className:"dcp-card-content",children:[r.jsxs("div",{className:"dcp-mobile-tabs",children:[r.jsx("button",{className:`dcp-mobile-tab ${ve==="info"?"active":""}`,onClick:()=>ae("info"),children:"Patient Record"}),r.jsx("button",{className:`dcp-mobile-tab ${ve==="history"?"active":""}`,onClick:()=>ae("history"),children:"History"})]}),r.jsxs("div",{className:"dcp-flex-split",children:[r.jsxs("div",{className:`dcp-flex-half dcp-tab-info ${ve==="info"?"":"hidden"}`,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("div",{className:"dcp-section-header dcp-section-header-violet",children:"Patient Record"}),r.jsxs("button",{onClick:()=>Y("/dashboard/doctor"),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem"},children:[r.jsx(rn,{size:12})," Back to Queue"]})]}),r.jsx("div",{className:"dcp-patient-name dcp-patient-name-gradient",children:P.name}),r.jsxs("div",{className:"dcp-patient-meta",style:{marginBottom:"12px"},children:[r.jsxs("span",{className:"dcp-patient-badge",children:[P.age||"N/A"," Yrs"]}),r.jsx("span",{className:"dcp-patient-badge",children:P.gender||"N/A"})]}),r.jsxs("div",{className:"dcp-activity-box",children:[r.jsx("div",{className:"dcp-activity-label",children:"Latest Activity"}),O?r.jsxs("div",{children:[r.jsxs("div",{className:"dcp-activity-content",children:[r.jsx("strong",{children:"Complaint:"})," ",O.complaint||r.jsx("span",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"None"})]}),r.jsxs("div",{style:{marginTop:"8px"},children:[r.jsx("span",{className:`dcp-status ${O.status==="consulting"?"dcp-status-consulting":O.status==="seen"?"dcp-status-seen":O.status==="waiting"?"dcp-status-waiting":""}`,children:Fe(O.status)}),O.status==="consulting"&&O._id&&r.jsx("button",{onClick:()=>Y(`/dashboard/edit-complaint/${O._id}`),onMouseEnter:()=>G(String(P.id)),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px",padding:"4px 12px"},children:"Resume"})]}),_&&r.jsx("div",{className:"dcp-error-card",style:{marginBottom:"16px"},children:_}),O.case_summary&&r.jsxs("div",{className:"dcp-ai-summary",style:{marginTop:"10px"},children:[r.jsx("div",{className:"dcp-ai-label",children:" AI Summary"}),r.jsx("p",{className:"dcp-ai-text",children:O.case_summary})]})]}):r.jsx("p",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"No queue entry found for this patient today."})]})]}),r.jsxs("div",{className:`dcp-flex-half dcp-history-section dcp-tab-history ${ve==="history"?"":"hidden"} dcp-desktop-only`,children:[r.jsxs("div",{className:"dcp-history-header",children:[r.jsx("span",{className:"dcp-history-title",children:"Patient History"}),V&&r.jsx(Z,{width:60,height:14})]}),te&&r.jsx("div",{className:"dcp-error",children:te}),r.jsxs("div",{className:"dcp-history-scroll dcp-scrollbar",children:[r.jsx(MA,{title:"Past Complaints",icon:Oa,items:K,isLoading:V,noDataText:"No past complaints.",renderItemContent:me=>r.jsxs("div",{children:[me.data.complaint,r.jsx("div",{className:"dcp-history-timestamp",children:Uj(me.originalDateString)})]})}),r.jsx(MA,{title:"Lab Reports",icon:rs,items:Ie,isLoading:V,noDataText:"No lab history.",renderItemContent:me=>me.type==="Lab Order (Pending)"?r.jsxs("div",{children:[r.jsx("span",{className:"dcp-type-pending",children:"Pending Order"}),r.jsx("div",{children:me.data.tests.map(oe=>oe.name).join(", ")}),r.jsx("div",{className:"dcp-history-timestamp",children:Uj(me.originalDateString)})]}):r.jsxs("div",{children:[r.jsxs("span",{className:"dcp-type-report",children:["Report: ",me.data.testName]}),r.jsxs("div",{style:{fontStyle:"italic"},children:['"',me.data.reportFindings.substring(0,50),me.data.reportFindings.length>50?"...":"",'"']}),r.jsx("div",{className:"dcp-history-timestamp",children:Uj(me.originalDateString)})]})}),r.jsx(MA,{title:"Medications",icon:yf,items:We,isLoading:V,noDataText:"No pharmacy history.",renderItemContent:me=>r.jsxs("div",{children:[me.data.medications.map(oe=>`${oe.name} (${oe.pack_quantity||0}p ${oe.loose_quantity||0}l)`).join(", "),r.jsxs("div",{className:"dcp-history-timestamp",children:[Uj(me.originalDateString),"  ",r.jsx("span",{style:{textTransform:"capitalize"},children:me.data.status})]})]})}),K.length===0&&Ie.length===0&&We.length===0&&!V&&r.jsx("div",{className:"dcp-empty-state",children:"No history records found."})]})]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[p&&r.jsx("div",{className:"dcp-error",children:"Failed to fetch queue data."}),b&&!x.currentPatient?r.jsxs("div",{className:"dcp-card",style:{padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx(Z,{width:"40%",height:32}),r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx(Z,{width:"60%",height:24}),r.jsx(Z,{width:"40%",height:16,style:{marginTop:"8px"}})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsx(Z,{width:"100%",height:80,style:{borderRadius:"12px"}})}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[r.jsx(Z,{width:180,height:40}),r.jsx(Z,{width:120,height:40})]})]}):r.jsx("div",{className:"dcp-empty-state",children:x.currentPatient?"Redirecting to consultation...":"No patient currently being seen. Use 'Call Next' or search for a patient record."})]}),r.jsxs("div",{className:"dcp-scheduler-section",children:[r.jsx("div",{className:"queue-header",children:r.jsx("div",{className:"queue-actions",children:r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${a==="list"?"active":""}`,onClick:()=>i("list"),title:"List View",children:r.jsx(Fz,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${a==="timeline"?"active":""}`,onClick:()=>i("timeline"),title:"Timeline View",children:r.jsx($O,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(oa,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:e.toISOString().split("T")[0],onChange:me=>n(new Date(me.target.value))})]}),r.jsxs("button",{onClick:()=>o(!0),className:"appointment-button",children:[r.jsx(Tb,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]}),r.jsx("button",{onClick:()=>t(),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px"},children:"Search Patient"})]})})}),r.jsx(YH,{isOpen:s,onClose:()=>{o(!1),f()},onAppointmentBooked:C}),d&&g.length===0?r.jsx("div",{style:{padding:"20px"},children:r.jsx(Z,{width:"100%",height:200})}):a==="timeline"?r.jsx(WH,{queueList:g,onPatientClick:me=>Y(`/dashboard/edit-complaint/${me.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Details"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:g.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"20px"},children:"No appointments for this date."})}):g.map(me=>{var oe,Q,ie;return r.jsxs("tr",{onClick:()=>Y(`/dashboard/edit-complaint/${me.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:["#",me.token_no]}),r.jsx("td",{children:r.jsx("div",{className:"patient-info",children:r.jsx("span",{className:"name",children:(oe=me.Patient)==null?void 0:oe.name})})}),r.jsxs("td",{className:"hidden-mobile",children:[(Q=me.Patient)==null?void 0:Q.age,"y, ",(ie=me.Patient)==null?void 0:ie.gender,"  ",me.complaint||"-"]}),r.jsx("td",{children:r.jsx("span",{className:`dcp-status ${me.status==="waiting"?"dcp-status-waiting":me.status==="consulting"?"dcp-status-consulting":me.status==="seen"?"dcp-status-seen":""}`,children:Fe(me.status)})}),r.jsx("td",{children:r.jsx("button",{className:"dcp-btn dcp-btn-outline",style:{padding:"4px 8px",fontSize:"0.75rem"},children:"View"})})]},me.id)})})]})})]}),r.jsxs("div",{className:"dcp-bottom-bar",children:[r.jsx("button",{onClick:Re,disabled:j||b||!x.nextPatient||!!x.currentPatient,className:"dcp-btn dcp-btn-teal",children:"Call Next Patient"}),r.jsxs("div",{className:"dcp-waiting-count",children:[x.waitingCount," patients waiting"]})]})]})]})})},cDe="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",uDe={apiKey:cDe},mv=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(null),g=v.useRef(null),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_,T]=v.useState(null),[C,P]=v.useState(null),[k,O]=v.useState([]),[I,F]=v.useState(!0),[B,$]=v.useState(!1);Wc();const L=Mt(),V=Lr(),H=cD({settings:{},staffList:[]}),te=ss(),X=ue=>{ue&&(te.prefetchQuery({queryKey:Ut.patients.context(ue),queryFn:async()=>{const me=await le(`/api/patients/${ue}/context`);if(!me.ok)throw new Error("Failed to fetch patient context");return me.json()},staleTime:5*60*1e3}),te.prefetchQuery({queryKey:Ut.patientDebts.balance(ue),queryFn:async()=>{const me=await le(`/api/patient-debts/${ue}/balance`);return me.ok?me.json():{netDebt:0}},staleTime:1*60*1e3}),te.prefetchQuery({queryKey:Ut.queue.latest(ue),queryFn:async()=>{const me=await le(`/api/queue/patient/${ue}/latest`);if(!me.ok)throw new Error("Failed to fetch latest queue status");const oe=await me.json();return oe!=null&&oe._id&&te.prefetchQuery({queryKey:Ut.queue.entry(oe._id),queryFn:async()=>{const Q=await le(`/api/queue/doctor/complaint/${oe._id}`);if(!Q.ok)throw new Error("Failed to fetch complaint record");return Q.json()},staleTime:1*60*1e3}),oe},staleTime:5e3}),te.prefetchQuery({queryKey:Ut.dental.records(ue),queryFn:async()=>{const me=await le(`/api/dental/patient/${ue}`);if(!me.ok)throw new Error("Failed to fetch dental records");return me.json()},staleTime:5*60*1e3}))},{selectedImage:q,handleImageSelect:Y,clearImage:se}=H,G=v.useRef(null),z=ue=>{var oe;const me=(oe=ue.target.files)==null?void 0:oe[0];me&&Y(me)};v.useEffect(()=>{H.chatHistory.length>0&&B&&H.isProcessing},[H.chatHistory.length]),v.useEffect(()=>{(async()=>{F(!0);try{const me=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),oe=await le(`/api/patients?${me.toString()}`);if(oe.ok){const Q=await oe.json();O(Q.patients||[])}}catch(me){console.error("Error fetching recent patients:",me)}finally{F(!1)}})()},[]),v.useEffect(()=>{H.setChatQuery(t)},[t]);const ce=v.useCallback(async ue=>{if(!(ue||t).trim()){p("Please enter complaint details.");return}d(!0),p(null),ue&&ue!==H.chatQuery&&H.setChatQuery(ue);try{H.handleSendMessage(),e("")}catch(oe){console.error("AI Error:",oe),p("AI failed to process. Try again."),d(!1)}},[t,H]);v.useEffect(()=>{!H.isProcessing&&c&&d(!1)},[H.isProcessing,c]),v.useEffect(()=>{const ue=g.current;ue&&(ue.style.height="auto",ue.style.height=`${ue.scrollHeight}px`);const oe=new URLSearchParams(V.search).get("caseDetails");if(oe){const Q=decodeURIComponent(oe);Q!==t&&(e(Q),b(!0))}},[V.search,t]),v.useEffect(()=>{x&&t.trim()&&(L(V.pathname,{replace:!0}),ce(t),b(!1))},[x,t,ce,L,V.pathname]),v.useEffect(()=>{const ue=g.current;ue&&(ue.style.height="auto",ue.style.height=`${ue.scrollHeight}px`)},[t]),v.useEffect(()=>{_&&(e(_),S(!1),H.setChatQuery(_),setTimeout(()=>H.handleSendMessage(),0),T(null))},[_,H]);const we=()=>{P({id:null,token:null,name:"New Case",age:null,gender:null}),S(!0)},K=v.useMemo(()=>zc(async ue=>{const me=ue.trim(),oe=/^\d+$/.test(me),Q=me.split(/\s+/).length;if(me.length<2||oe&&me.length>10||!oe&&Q>2){a([]),s(!1),l(null);return}s(!0),l(null);try{const ie=new URLSearchParams({search:encodeURIComponent(ue),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),xe=await le(`/api/patients?${ie.toString()}`);if(!xe.ok){const Se=await xe.text();throw new Error(`API Error (${xe.status}): ${Se||xe.statusText}`)}const ee=await xe.json();a(ee.patients)}catch(ie){console.error("Error searching patients:",ie),l(ie.message||"Failed to search patients."),a([])}finally{s(!1)}},300),[]),Ie=ue=>{const me=ue.target.value;e(me);const oe=me.trim(),Q=/^\d+$/.test(oe),ie=oe.split(/\s+/).length;oe.length>=2&&!(Q&&oe.length>10||!Q&&ie>2)?s(!0):(s(!1),a([])),K(me)},We=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),t.trim()&&!i&&je())},Re=async ue=>{ue&&ue.id&&L(`/dashboard/edit-complaint/patient/${ue.id}`)},Fe=[{icon:"",title:"Example: Fever & Cold",description:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough",text:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough"},{icon:"",title:"Example: Stomach Ache",description:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days",text:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days"}],ve=ue=>{e(ue),setTimeout(()=>{H.handleSendMessage(ue),e(""),a([])},50)},ae=()=>{e(""),a([]),H.refreshChat()},je=()=>{!t.trim()&&!q||(K.cancel(),H.handleSendMessage(t),e(""),a([]))};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsx("button",{onClick:()=>L("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"}),r.jsx("button",{onClick:()=>L(-1),className:"patient-search-button patient-search-button-back",children:r.jsx(rn,{size:16})})]}),r.jsxs("div",{className:"patient-search-content-box",children:[o&&r.jsx("p",{className:"patient-search-error",children:o}),f&&r.jsx("p",{className:"patient-search-error",children:f}),I?r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:[1,2,3,4,5].map(ue=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:14})]}),r.jsx("div",{className:"recent-info",children:r.jsx(Z,{width:60,height:12})})]},ue))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}):k.length>0&&r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:k.map(ue=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>Re(ue),onMouseEnter:()=>ue.id&&X(ue.id),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:ue.name||"New Patient"}),r.jsxs("span",{className:"recent-token",children:["#",ue.token]})]}),r.jsxs("div",{className:"recent-info",children:[ue.age," yrs / ",ue.gender]})]},ue.id))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}),H.chatHistory.length===0&&n.length===0&&r.jsxs("div",{className:"example-cases-section",children:[r.jsxs("div",{className:"example-cases-header",children:[r.jsx("span",{className:"sparkles-icon",children:""}),r.jsx("h3",{children:"Try AI with Example Cases"})]}),r.jsx("div",{className:"example-cards-container",children:Fe.map((ue,me)=>r.jsxs("div",{className:"example-case-card",onClick:()=>ve(ue.text),children:[r.jsx("div",{className:"example-icon",children:ue.icon}),r.jsxs("div",{className:"example-content",children:[r.jsx("div",{className:"example-title",children:ue.title}),r.jsx("div",{className:"example-description",children:ue.description})]})]},me))})]})]}),H.chatHistory.length>0&&!c&&r.jsxs("div",{className:`ai-chat-overlay ${B?"minimized":""}`,children:[r.jsxs("div",{className:"ai-chat-header",children:[r.jsx("span",{children:"AI Assistant"}),r.jsx("div",{className:"ai-chat-controls",children:r.jsx("button",{className:"icon-btn",onClick:()=>ae(),title:"Clear Chat",children:r.jsx(Lt,{size:16})})})]}),r.jsxs("div",{className:"ai-chat-messages",children:[H.chatHistory.map((ue,me)=>r.jsx("div",{className:`chat-bubble ${ue.role==="model"?"model":"user"}`,children:ue.role==="system"?r.jsx("i",{children:ue.text}):ue.text},me)),H.isProcessing&&r.jsx("div",{className:"chat-bubble model",children:"Typing..."})]})]}),n.length>0&&!c&&r.jsxs("div",{className:"patient-search-results-overlay",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"#64748b"},children:"Found Patients"}),r.jsx("button",{onClick:()=>a([]),style:{border:"none",background:"transparent",color:"#94a3b8",cursor:"pointer"},children:r.jsx(Lt,{size:14})})]}),n.map(ue=>r.jsxs("div",{onClick:()=>Re(ue),onMouseEnter:()=>ue.id&&X(ue.id),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",ue.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:ue.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[ue.age?`${ue.age} yrs`:"",ue.age&&ue.gender?" / ":"",ue.gender||"N/A"]})]},ue.id))]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[r.jsxs("div",{className:"cmd-input-container",children:[q&&r.jsxs("div",{className:"cmd-image-preview",children:[r.jsx("img",{src:q,alt:"Selected"}),r.jsx("button",{className:"cmd-image-delete",onClick:se,children:r.jsx(Lt,{size:12})})]}),r.jsx("textarea",{ref:g,placeholder:"Search (Name/Token/Phone), Ask AI, or Enter New Case...",value:t,onChange:Ie,onKeyDown:We,className:"cmd-input",disabled:c||H.isProcessing,rows:1}),r.jsxs("div",{className:"cmd-controls-group",children:[r.jsx("input",{type:"file",ref:G,onChange:z,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:"cmd-icon-btn",onClick:()=>{var ue;return(ue=G.current)==null?void 0:ue.click()},title:"Attach Image",children:r.jsx(zO,{})}),r.jsx("button",{className:"cmd-icon-btn",onClick:we,title:"Voice Input",children:r.jsx(RN,{})}),(t.length>0||q)&&r.jsx("button",{className:"cmd-icon-btn send-btn",onClick:je,title:"Send",children:r.jsx(LN,{})})]})]}),j&&r.jsx(ZN,{options:uDe,children:r.jsx(eS,{onClose:()=>S(!1),patientData:C,tokenNumber:null,onAiSummaryChange:T})})]})]})},TM=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(!1),c=Mt(),d=v.useRef(null);v.useEffect(()=>{const C=P=>{d.current&&!d.current.contains(P.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const f=v.useCallback(h9.debounce(async C=>{if(C.trim().length<2){a([]),s(!1);return}s(!0);try{const P=new URLSearchParams({search:encodeURIComponent(C),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),k=await le(`/api/patients?${P.toString()}`);if(!k.ok)throw new Error("Failed to fetch patients");const O=await k.json();a(O.patients)}catch{a([])}finally{s(!1)}},400),[]);v.useEffect(()=>(t?(s(!0),f(t)):(a([]),f.cancel(),s(!1)),()=>f.cancel()),[t,f]);const p=C=>{c(`/patient/${encodeURIComponent(C.id)}/admission-billing`)},g=()=>{e(""),a([]),l(!1)},x=C=>C.slice(0,1).toUpperCase(),[b,j]=v.useState(!1),[S,_]=v.useState(!1),T=async()=>{_(!0);try{const C=await le("/api/patients/discharge-all",{method:"POST"}),P=await C.json();C.ok?(alert(P.message),a([]),e("")):alert(P.message||"Failed to discharge patients")}catch(C){console.error("Bulk discharge error:",C),alert("An error occurred while processing bulk discharge.")}finally{_(!1),j(!1)}};return r.jsxs("div",{className:"ma-container",children:[r.jsxs("div",{className:"ma-header-section",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ma-title",children:"Manage Admission"}),r.jsx("p",{className:"ma-subtitle",children:"Search for a patient to admit, discharge, or view billing details"})]}),r.jsx("button",{className:"ma-discharge-all-btn",onClick:()=>j(!0),children:"Discharge Everyone"})]}),b&&r.jsx("div",{className:"ma-modal-overlay",children:r.jsxs("div",{className:"ma-modal-content",children:[r.jsx("h3",{children:"Confirm Bulk Discharge"}),r.jsxs("p",{children:["Are you sure you want to discharge ",r.jsx("strong",{children:"ALL"})," currently admitted patients?"]}),r.jsx("div",{className:"ma-modal-warning",children:r.jsx("p",{children:" This will finalize bills for all admitted patients."})}),r.jsxs("div",{className:"ma-modal-actions",children:[r.jsx("button",{className:"ma-modal-cancel",onClick:()=>j(!1),disabled:S,children:"Cancel"}),r.jsx("button",{className:"ma-modal-confirm",onClick:T,disabled:S,children:S?"Processing...":"Yes, Discharge All"})]})]})}),r.jsxs("div",{className:"ma-search-wrapper",ref:d,children:[i?r.jsxs("div",{className:"ma-loading-spinner",children:[r.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]}):r.jsx(Mn,{className:"ma-search-icon",size:20}),r.jsx("input",{type:"text",value:t,onChange:C=>{e(C.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search by Name, Phone, or Token...",className:"ma-search-input",autoFocus:!0}),t&&r.jsx("div",{className:"ma-clear-icon",onClick:g,children:r.jsx(Lt,{size:18})}),r.jsxs("div",{className:`ma-results-dropdown ${o&&(n.length>0||i)?"open":""}`,children:[n.map(C=>{const P=C.admission_date&&!C.discharge_date;return r.jsxs("div",{onClick:()=>p(C),className:"ma-result-item",children:[r.jsxs("div",{className:"ma-patient-info",children:[r.jsx("div",{className:"ma-avatar",children:x(C.name)}),r.jsxs("div",{className:"ma-patient-text",children:[r.jsxs("h4",{children:[C.name,r.jsxs("span",{className:"ma-patient-token",children:["#",C.token]})]}),r.jsxs("p",{className:"ma-patient-subtext",children:[C.phone||"No phone","  ",C.age?`${C.age} Y`:"","  ",C.gender||""]})]})]}),r.jsx("div",{className:`ma-badge ${P?"ma-badge-admitted":"ma-badge-discharged"}`,children:P?"ADMITTED":"NOT ADMITTED"})]},C.id)}),t.length>2&&!i&&n.length===0&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:['No patients found matching "',t,'"']})]})]})]})},pB=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Yes/No"},{value:"computed",label:"Computed (Formula)"}],kM=({isOpen:t,onClose:e,entityType:n,entityLabel:a,currentConfig:i,onConfigUpdated:s})=>{const[o,l]=v.useState([]),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState({key:"",label:"",type:"text",required:!1,formula:""});v.useEffect(()=>{t&&(l(i[n]||[]),p(null),x({key:"",label:"",type:"text",required:!1,formula:""}))},[t,i,n]);const b=T=>T.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),j=()=>{var C;if(!g.label.trim()){p("Column label is required");return}if(g.type==="computed"&&!((C=g.formula)!=null&&C.trim())){p("Formula is required for computed columns");return}const T=b(g.label);if(o.some(P=>P.key===T)){p("A column with this name already exists");return}l([...o,{...g,key:T}]),x({key:"",label:"",type:"text",required:!1,formula:""}),p(null)},S=T=>{l(o.filter(C=>C.key!==T))},_=async()=>{d(!0),p(null);try{const T={...i,[n]:o};if(!(await le("/api/clinics/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_columns_config:T})})).ok)throw new Error("Failed to save custom columns");s(T),e()}catch(T){p(T.message||"Failed to save")}finally{d(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content manage-columns-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:["Manage Custom Columns - ",a]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Lt,{size:24})})]}),f&&r.jsx("div",{className:"error-message",children:f}),r.jsxs("div",{className:"columns-list",children:[r.jsx("h4",{children:"Current Custom Columns"}),o.length===0?r.jsx("p",{className:"no-columns",children:"No custom columns defined yet."}):r.jsxs("table",{className:"columns-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Label"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:o.map(T=>{var C;return r.jsxs("tr",{children:[r.jsx("td",{children:T.label}),r.jsx("td",{children:((C=pB.find(P=>P.value===T.type))==null?void 0:C.label)||T.type}),r.jsx("td",{children:T.type==="computed"?r.jsx("code",{className:"computed-formula",children:T.formula}):T.required?"Required":"Optional"}),r.jsx("td",{children:r.jsx("button",{onClick:()=>S(T.key),className:"remove-column-btn",title:"Remove Column",children:r.jsx(Bn,{size:16})})})]},T.key)})})]})]}),r.jsxs("div",{className:"add-column-section",children:[r.jsx("h4",{children:"Add New Column"}),r.jsxs("div",{className:"add-column-form",children:[r.jsx("input",{type:"text",placeholder:"Column Label (e.g., BMI)",value:g.label,onChange:T=>x({...g,label:T.target.value}),className:"column-input"}),r.jsx("select",{value:g.type,onChange:T=>x({...g,type:T.target.value}),className:"column-select",children:pB.map(T=>r.jsx("option",{value:T.value,children:T.label},T.value))}),g.type==="computed"?r.jsx("input",{type:"text",placeholder:"Formula (e.g. weight / (height * height))",value:g.formula||"",onChange:T=>x({...g,formula:T.target.value}),className:"column-input",style:{flex:2}}):r.jsxs("label",{className:"required-checkbox",children:[r.jsx("input",{type:"checkbox",checked:g.required,onChange:T=>x({...g,required:T.target.checked})}),"Required"]}),r.jsxs("button",{onClick:j,className:"add-column-btn",children:[r.jsx(qn,{size:16})," Add"]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:e,className:"cancel-btn",disabled:c,children:"Cancel"}),r.jsxs("button",{onClick:_,className:"save-btn",disabled:c,children:[r.jsx(as,{size:16})," ",c?"Saving...":"Save Changes"]})]})]})}):null},IA=15,xO=()=>{const t=Mt(),{customColumnsConfig:e,refetch:n}=tS(),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(!0),[d,f]=v.useState(null),[p,g]=v.useState(""),[x,b]=v.useState(1),[j,S]=v.useState(1),[_,T]=v.useState(0),[C,P]=v.useState("created_at"),k=ss(),O=ee=>{ee&&(k.prefetchQuery({queryKey:Ut.patients.context(ee),queryFn:async()=>{const Se=await le(`/api/patients/${ee}/context`);if(!Se.ok)throw new Error("Failed to fetch patient context");return Se.json()},staleTime:5*60*1e3}),k.prefetchQuery({queryKey:Ut.patientDebts.balance(ee),queryFn:async()=>{const Se=await le(`/api/patient-debts/${ee}/balance`);return Se.ok?Se.json():{netDebt:0}},staleTime:1*60*1e3}),k.prefetchQuery({queryKey:Ut.queue.latest(ee),queryFn:async()=>{const Se=await le(`/api/queue/patient/${ee}/latest`);if(!Se.ok)throw new Error("Failed to fetch latest queue status");const qe=await Se.json();return qe!=null&&qe._id&&k.prefetchQuery({queryKey:Ut.queue.entry(qe._id),queryFn:async()=>{const Ge=await le(`/api/queue/doctor/complaint/${qe._id}`);if(!Ge.ok)throw new Error("Failed to fetch complaint record");return Ge.json()},staleTime:1*60*1e3}),qe},staleTime:5e3}),k.prefetchQuery({queryKey:Ut.dental.records(ee),queryFn:async()=>{const Se=await le(`/api/dental/patient/${ee}`);if(!Se.ok)throw new Error("Failed to fetch dental records");return Se.json()},staleTime:5*60*1e3}))},[I,F]=v.useState("desc"),[B,$]=v.useState(""),[L,V]=v.useState(!1),[H,te]=v.useState(null),[X,q]=v.useState([]),[Y,se]=v.useState(""),[G,z]=v.useState(!1),[ce,we]=v.useState(null),[K,Ie]=v.useState(!0),[We,Re]=v.useState(null),[Fe,ve]=v.useState(p);Wc(),v.useEffect(()=>{const ee=setTimeout(()=>{ve(p),b(1)},500);return()=>{clearTimeout(ee)}},[p]);const ae=v.useCallback(async()=>{Ie(!0),Re(null);try{const ee=await le("/api/subscriptions");if(!ee.ok){let qe=`Failed to fetch subscription plans (${ee.status})`;try{qe=(await ee.json()).message||qe}catch{}throw new Error(qe)}const Se=await ee.json();q(Se)}catch(ee){console.error("Error fetching subscription plans:",ee),Re(ee.message||"An unknown error occurred while fetching plans."),q([])}finally{Ie(!1)}},[]),je=v.useCallback(async(ee,Se,qe,Ge,Ne)=>{c(!0),f(null);try{const ne=new URLSearchParams({page:ee.toString(),limit:IA.toString(),sortBy:qe,sortOrder:Ge});Se&&ne.append("search",Se),Ne&&ne.append("gender",Ne);const de=await le(`/api/patients?${ne.toString()}`);if(!de.ok){const Ee=await de.json();throw new Error(Ee.message||"Failed to fetch patients")}const Te=await de.json();o(Te.patients),T(Te.totalCount),b(Te.currentPage),S(Te.totalPages)}catch(ne){console.error("Error fetching patients:",ne),f(`Failed to load patients: ${ne.message}`),o([]),T(0),b(1),S(1)}finally{c(!1)}},[]);v.useEffect(()=>{je(x,Fe,C,I,B),ae()},[x,Fe,C,I,B,je,ae]);const ue=ee=>{const Se=C===ee&&I==="asc"?"desc":"asc";P(ee),F(Se),b(1)},me=ee=>{try{return new Date(ee).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},oe=()=>{V(!1),te(null),se(""),we(null),z(!1)},Q=async(ee,Se)=>{o(qe=>qe.map(Ge=>Ge.id===ee?{...Ge,insurance_type:Se}:Ge));try{const qe=await le(`/api/patients/${ee}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:Se})});if(!qe.ok){const Ge=await qe.json();throw new Error(Ge.message||"Failed to update insurance type")}}catch(qe){console.error("Error updating insurance type:",qe),je(x,Fe,C,I,B)}},ie=(ee,Se)=>{const qe=new Date(ee),Ge=Se.interval||1;switch(Se.period){case"daily":qe.setDate(ee.getDate()+Ge);break;case"weekly":qe.setDate(ee.getDate()+Ge*7);break;case"monthly":qe.setMonth(ee.getMonth()+Ge);break;case"yearly":qe.setFullYear(ee.getFullYear()+Ge);break;default:console.warn(`Unknown subscription period: ${Se.period}. Defaulting to 1 month.`),qe.setMonth(ee.getMonth()+1)}return qe},xe=async()=>{if(!H||!Y){we("Please select a subscription plan.");return}const ee=X.find(Se=>Se.id===Y);if(!ee){we("Selected plan details not found.");return}z(!0),we(null);try{const Se=new Date,qe=ie(Se,ee),Ge={subscription_plan_id:Y,subscription_status:"active",subscription_start_date:Se.toISOString(),subscription_end_date:qe.toISOString(),subscription_payment_method:"manual"},Ne=await le(`/api/patients/${H.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ge)});if(!Ne.ok){const ne=await Ne.json();throw new Error(ne.message||"Failed to update patient subscription")}oe(),je(x,Fe,C,I,B)}catch(Se){console.error("Error starting subscription:",Se),we(`Failed to start subscription: ${Se.message}`)}finally{z(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("div",{className:"all-patients-header-section",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:16})}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(Kn,{size:28}),"All Patients"]})]}),r.jsxs("div",{className:"controls-container",children:[!K&&!We&&X.length>0&&r.jsx("div",{className:"compact-subscriptions",children:X.map(ee=>r.jsxs("span",{className:"plan-chip",title:`${ee.name}: ${ee.price} / ${ee.interval} ${ee.period}${ee.description?" - "+ee.description:""}`,children:[ee.name,": ",ee.price]},ee.id))}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:ee=>g(ee.target.value)}),r.jsx(Mn,{className:"search-input-icon",size:16})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("div",{className:"filter-select-container",children:[r.jsx(bX,{size:14,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:B,onChange:ee=>$(ee.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Gender"}),r.jsx("option",{value:"M",children:"M"}),r.jsx("option",{value:"F",children:"F"}),r.jsx("option",{value:"O",children:"O"})]})]})}),r.jsxs("button",{onClick:()=>i(!0),className:"action-button",title:"Manage Custom Columns",children:[r.jsx(ld,{size:14})," Columns"]})]})]}),d&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:d})]}),l?r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:50,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{className:"patient-name",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:120,height:20})]})}),r.jsx("td",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:32})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:32,style:{borderRadius:"4px"}})})]},ee))})]})}):s.length===0?r.jsx("div",{className:"empty-state",children:Fe?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ue("name"),children:["Name",C==="name"&&(I==="asc"?r.jsx(gI,{size:14,className:"sort-icon"}):r.jsx(mI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ue("created_at"),children:["Registered On",C==="created_at"&&(I==="asc"?r.jsx(gI,{size:14,className:"sort-icon"}):r.jsx(mI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:s.map(ee=>r.jsxs(Ce.Fragment,{children:[r.jsxs("tr",{className:"patient-row clickable-row",onClick:()=>t(`/dashboard/edit-complaint/patient/${ee.id}`),onMouseEnter:()=>O(ee.id),children:[r.jsx("td",{children:ee.token??"-"}),r.jsx("td",{className:"patient-name",children:ee.name}),r.jsx("td",{children:ee.age??"-"}),r.jsx("td",{children:ee.gender??"-"}),r.jsx("td",{children:ee.phone??"-"}),r.jsx("td",{children:ee.address??"-"}),r.jsx("td",{children:me(ee.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${ee.subscription_status==="active"?"active":ee.subscription_status==="cancelled"||ee.subscription_status==="expired"?"inactive":"none"}`,children:ee.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:ee.insurance_type,onClick:Se=>Se.stopPropagation(),onChange:Se=>Q(ee.id,Se.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:Se=>{Se.stopPropagation(),t(`/start-subscription/${ee.id}`)},className:"action-button",children:"Start Sub"})})]}),e.patients&&e.patients.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:10,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:e.patients.map(Se=>{var qe;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[Se.label,":"]})," ",(qe=ee.custom_fields)!=null&&qe[Se.key]?String(ee.custom_fields[Se.key]):"-"]},Se.key)})})})})]},ee.id))})]})}),j>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(x-1)*IA+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(x*IA,_)})," ","of"," ",r.jsx("span",{className:"font-medium",children:_})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>b(ee=>Math.max(ee-1,1)),disabled:x===1||l,className:"pagination-button",children:[r.jsx(Cb,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:x})," of ",r.jsx("span",{className:"font-medium",children:j})]}),r.jsxs("button",{onClick:()=>b(ee=>Math.min(ee+1,j)),disabled:x===j||l,className:"pagination-button",children:["Next",r.jsx(dd,{size:16,className:"next-icon"})]})]})]})]}),L&&H&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",H.name]}),r.jsx("button",{onClick:oe,className:"subscription-modal-close-button",children:r.jsx(Lt,{size:24})})]}),ce&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:ce})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:Y,onChange:ee=>se(ee.target.value),className:"form-select",disabled:G||K||We!==null||X.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),K?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):We?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):X.length>0?X.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.name," - ",ee.price," (",ee.interval," ",ee.period,ee.interval>1?"s":"",")"]},ee.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),We&&r.jsx("p",{className:"error-message",children:We}),X.length===0&&!K&&!We&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:oe,disabled:G,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:xe,disabled:!Y||G,className:"subscription-modal-button submit",children:G?"Starting...":"Start Subscription"})]})]})}),r.jsx(kM,{isOpen:a,onClose:()=>i(!1),entityType:"patients",entityLabel:"Patients",currentConfig:e,onConfigUpdated:()=>{n()}})]})},QH=()=>{const t=Mt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(!1),[d,f]=v.useState(!1),p=/^\+?[0-9\s\-().]{7,20}$/,g=v.useMemo(()=>zc(async _=>{if(_.trim().length<2){i([]),o(!1);return}o(!0);try{const T=new URLSearchParams({search:encodeURIComponent(_),page:"1",limit:"8",sortBy:"name",sortOrder:"asc"}),C=await le(`/api/patients?${T.toString()}`);if(!C.ok)throw new Error("Failed to search");const P=await C.json();i(P.patients)}catch{i([])}finally{o(!1)}},300),[]),x=_=>{const T=_.target.value;n(T),c(p.test(T)),o(!0),f(!0),g(T)},b=v.useCallback(_=>{t("/billing",{state:{patientId:_.id,patientName:_.name}})},[t]),j=v.useCallback(async()=>{if(!(!e||!l)){o(!0);try{const T=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Direct Patient",phone:e,age:null,gender:null,token:null})});if(!T.ok)throw new Error("Failed to create patient");const C=await T.json();b(C)}catch(_){alert(`Error: ${_.message}`)}finally{o(!1)}}},[e,l,b]),S=_=>_.slice(0,1).toUpperCase();return r.jsxs("div",{className:"ccb-container",children:[r.jsxs("div",{className:"ccb-header-section",children:[r.jsx("button",{onClick:()=>t(-1),className:"ccb-back-button",title:"Go Back",children:r.jsx(rn,{size:24})}),r.jsx("h1",{className:"ccb-title",children:"Create Custom Bill"}),r.jsx("p",{className:"ccb-subtitle",children:"Search for a patient to bill manually, or create a new one instantly."})]}),r.jsxs("div",{className:"ccb-search-wrapper",children:[r.jsx(Mn,{className:"ccb-search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by Name, Phone, or Token...",value:e,onChange:x,onFocus:()=>f(!0),className:"ccb-search-input",autoFocus:!0}),e&&r.jsx("div",{className:"ccb-clear-icon",onClick:()=>{n(""),i([]),f(!1)},children:r.jsx(Lt,{size:18})}),r.jsxs("div",{className:`ccb-results-dropdown ${d&&(a.length>0||s||e.length>2&&a.length===0)?"open":""}`,children:[s&&r.jsx("div",{className:"p-4 flex justify-center items-center",children:r.jsx("div",{className:"ccb-spinner"})}),!s&&a.map(_=>r.jsxs("div",{onClick:()=>b(_),className:"ccb-result-item",children:[r.jsxs("div",{className:"ccb-patient-info",children:[r.jsx("div",{className:"ccb-avatar",children:S(_.name)}),r.jsxs("div",{className:"ccb-patient-details",children:[r.jsx("h4",{children:_.name}),r.jsxs("p",{className:"ccb-patient-meta",children:[_.phone||"No phone","  ",_.gender||"-","  ",_.age?`${_.age}y`:"-"]})]})]}),r.jsxs("span",{className:"ccb-token-badge",children:["#",_.token]})]},_.id)),!s&&a.length===0&&e.length>2&&r.jsxs("div",{className:"ccb-create-action",children:[r.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No patients found."}),l&&r.jsxs("button",{onClick:j,className:"ccb-create-btn w-full",children:["Create Patient with Phone ",e]})]})]})]})]})},XH=({currentUser:t})=>{const e=Mt(),n=ss(),[a,i]=v.useState("select_patient"),[s,o]=v.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=v.useState(null),[d,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(""),[j,S]=v.useState([]),[_,T]=v.useState(""),[C,P]=v.useState([]),[k,O]=v.useState(!1),[I,F]=v.useState(null),[B,$]=v.useState(null),[L,V]=v.useState(null),[H,te]=v.useState(!1),[X,q]=v.useState(!1),[Y,se]=v.useState(!1),G=/^\+?[0-9\s\-().]{7,20}$/,z=/^[a-zA-Z\s'-]{2,}$/,ce=v.useCallback(async()=>{if(!(d.length>0)){te(!0),V(null);try{const Q=await le("/api/lab-tests");if(!Q.ok)throw new Error("Failed to fetch lab tests");const ie=await Q.json();f(ie)}catch(Q){console.error("Failed to fetch available lab tests:",Q),V("Could not load lab test list: "+Q.message),f([])}finally{te(!1)}}},[d.length]),we=Q=>{Q&&(n.prefetchQuery({queryKey:Ut.patients.context(Q),queryFn:async()=>{const ie=await le(`/api/patients/${Q}/context`);if(!ie.ok)throw new Error("Failed to fetch patient context");return ie.json()},staleTime:1e3*60*5}),n.prefetchQuery({queryKey:Ut.patientDebts.balance(Q),queryFn:async()=>{const ie=await le(`/api/patient-debts/${Q}/balance`);if(!ie.ok)throw new Error("Failed to fetch patient debt");return ie.json()},staleTime:1e3*60}),n.prefetchQuery({queryKey:Ut.queue.latest(Q),queryFn:async()=>{const ie=await le(`/api/queue/patient/${Q}/latest`);if(!ie.ok){if(ie.status===404)return null;throw new Error("Failed to fetch queue status")}return ie.json()},staleTime:1e3*5}))},K=v.useMemo(()=>new to(d,{keys:["name","description"],threshold:.3,ignoreLocation:!0}),[d]);v.useEffect(()=>{if(!x){S([]);return}const Q=K.search(x).map(ie=>ie.item);S(Q.slice(0,10))},[x,K]);const Ie=v.useCallback(Q=>{const ie={id:Q.id,name:Q.name,token:Q.token,age:Q.age,gender:Q.gender,phone:Q.phone};c(ie),i("create_order"),g([]),b(""),S([]),V(null),ce()},[ce]),We=v.useMemo(()=>zc(async Q=>{if(Q.trim().length<2){P([]),O(!1),F(null);return}O(!0),F(null);try{const ie=new URLSearchParams({search:encodeURIComponent(Q),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),xe=await le(`/api/patients?${ie.toString()}`);if(!xe.ok){const Se=await xe.text();throw new Error(`API Error (${xe.status}): ${Se||xe.statusText}`)}const ee=await xe.json();P(ee.patients)}catch(ie){console.error("Error searching lab patients:",ie),F(ie.message||"Failed to search lab patients."),P([])}finally{O(!1)}},300),[G,z]),Re=Q=>{const ie=Q.target.value;T(ie),q(G.test(ie)),se(z.test(ie)&&!G.test(ie)),O(!0),We(ie)},Fe=v.useCallback(async Q=>{if(!_||Q==="phone"&&!X||Q==="name"&&!Y){F(`Invalid ${Q} to create a new patient.`);return}O(!0),F(null);try{const xe=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Q==="name"?_:"direct lab",phone:Q==="phone"?_:null,age:null,gender:null,token:null})});if(!xe.ok){const Se=await xe.json();throw new Error(Se.message||`Failed to create patient: ${xe.statusText}`)}const ee=await xe.json();alert(`New patient "${ee.name}" created with ${Q==="phone"?`phone ${ee.phone}`:`name ${ee.name}`}.`),Ie({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(ie){console.error("Error creating new patient:",ie),F(ie.message||"Failed to create new patient.")}finally{O(!1)}},[_,X,Y,Ie]),ve=()=>{i("select_patient"),c(null),T(""),P([]),F(null)},ae=Q=>{const{name:ie,value:xe}=Q.target;o(ee=>({...ee,[ie]:ie==="age"?xe?parseInt(xe,10):void 0:xe}))},je=async Q=>{if(Q.preventDefault(),$(null),!s.name){$("Patient Name is required.");return}const ie={name:s.name,age:s.age,gender:s.gender,phone:s.phone,address:s.address};try{const xe=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!xe.ok){const Se=await xe.json();throw new Error(Se.message||`Failed to create patient: ${xe.statusText}`)}const ee=await xe.json();Ie({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(xe){console.error("Failed to create patient:",xe),$(xe.message||"Failed to create patient. Please try again.")}},ue=Q=>{if(p.some(ie=>ie.id===Q.id)){V(`${Q.name} is already in the order.`),setTimeout(()=>V(null),3e3),b(""),S([]);return}g(ie=>[...ie,{...Q}]),b(""),S([])},me=Q=>{g(ie=>ie.filter(xe=>xe.id!==Q))},oe=async Q=>{if(Q.preventDefault(),V(null),!l){V("No patient selected.");return}if(p.length===0){V("No lab tests selected.");return}const ie={patient_id:l.id,tests:p.map(xe=>({id:xe.id,name:xe.name,price:xe.price}))};console.log("Submitting Lab Order:",ie);try{const xe=await le("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!xe.ok){const qe=await xe.json();throw console.error("API Error Data:",qe),new Error(qe.message||`Failed to create lab order: ${xe.statusText}`)}const ee=await xe.json();console.log("Lab Order Creation Result:",ee);let Se=l.queueId;if(!Se){const qe=await le(`/api/queue/patient/${l.id}/latest`);if(qe.ok){const Ge=await qe.json();Ge!=null&&Ge._id&&(Se=Ge._id)}}if(!Se){const qe=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!qe.ok){const Ne=await qe.text();throw new Error(`Failed to create queue entry for redirection: ${Ne||qe.statusText}`)}const Ge=await qe.json();if(Ge!=null&&Ge.id)Se=Ge.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}(t==null?void 0:t.role)==="lab"?e("/dashboard"):e(`/dashboard/edit-complaint/${Se}`)}catch(xe){console.error("Failed to create lab order:",xe),V(xe.message||"Failed to create lab order.")}};return v.useEffect(()=>{ce()},[ce]),r.jsxs("div",{className:"create-lab-order-container",children:[r.jsxs("div",{className:"create-lab-order-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button","aria-label":"Go back",children:r.jsx(rn,{size:20})}),r.jsx("h1",{className:"create-lab-order-title",children:"Create New Lab Order"}),r.jsx("div",{style:{width:"64px"}})," "]}),(a==="select_patient"||a==="create_patient")&&r.jsxs("div",{className:"glass-card",children:[a==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"header-with-action",children:r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Select Patient"})}),r.jsxs("div",{className:"search-container",children:[r.jsx(Mn,{className:"search-icon",size:20}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No...",value:_,onChange:Re,className:"modern-input",autoFocus:!0,autoComplete:"off"}),k&&r.jsx("div",{style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(Z,{width:80,height:14})})]}),k&&r.jsx("ul",{className:"patient-list",children:[1,2,3].map(Q=>r.jsxs("li",{className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx(Z,{width:120,height:20}),r.jsx(Z,{width:50,height:24,style:{borderRadius:"12px"}})]}),r.jsx("div",{className:"patient-details",children:r.jsx(Z,{width:200,height:16})})]},Q))}),I&&r.jsxs("div",{className:"error-message",children:[r.jsx(Xr,{size:18}),I]}),C.length>0&&r.jsx("ul",{className:"patient-list",children:C.map(Q=>r.jsxs("li",{onClick:()=>Ie(Q),onMouseEnter:()=>we(Q.id),className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("strong",{children:Q.name}),r.jsxs("span",{className:"token-badge",children:["#",Q.token||"N/A"]})]}),r.jsxs("div",{className:"patient-details",children:[Q.age?`${Q.age} yrs`:"",Q.gender?` / ${Q.gender}`:"",Q.phone?`  ${Q.phone}`:""]})]},Q.id))}),_.length>=2&&!k&&C.length===0&&!I&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{className:"no-data-message",style:{background:"none",border:"none",padding:0},children:['No patients found matching "',_,'".']}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},children:[X&&r.jsxs("button",{type:"button",onClick:()=>Fe("phone"),className:"secondary-button",children:['Create "Direct Lab" Patient (Phone: ',_,")"]}),Y&&r.jsxs("button",{type:"button",onClick:()=>Fe("name"),className:"secondary-button",children:["Create Patient (Name: ",_,")"]})]})]}),_.length<2&&!k&&r.jsx("div",{className:"info-message",children:"Start typing to search for a patient..."})]}),a==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"New Patient Registration"}),r.jsx("button",{onClick:ve,className:"text-button",children:" Back to Search "})]}),B&&r.jsxs("div",{className:"error-message",children:[r.jsx(Xr,{size:18}),B]}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-name",className:"form-label",children:"Patient Name *"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Kn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:s.name,onChange:ae,className:"modern-input",placeholder:"Enter full name"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:s.age??"",onChange:ae,className:"modern-input",style:{paddingLeft:"16px"},placeholder:"e.g. 30"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:s.gender??"",onChange:ae,className:"modern-input",style:{paddingLeft:"16px"},children:[r.jsx("option",{value:"",children:"Select Gender..."}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-phone",className:"form-label",children:"Phone Number"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Zm,{className:"search-icon",size:18}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:s.phone||"",onChange:ae,className:"modern-input",placeholder:"e.g. 9876543210"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-address",className:"form-label",children:"Address"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Vz,{className:"search-icon",size:18,style:{top:"20px"}}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:s.address||"",onChange:ae,className:"modern-input",style:{resize:"none"},placeholder:"Enter address (optional)"})]})]})]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:ve,className:"secondary-button",children:" Cancel "}),r.jsxs("button",{type:"submit",className:"primary-button",children:[r.jsx(qn,{size:18}),"Create & Proceed"]})]})]})]})]}),a==="create_order"&&l&&r.jsxs("div",{className:"glass-card",children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Create Lab Order"}),r.jsx("button",{onClick:ve,className:"text-button",children:" Change Patient "})]}),r.jsxs("div",{className:"patient-summary",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Kn,{size:20,className:"highlight-primary"}),r.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:l.name})]}),r.jsxs("div",{className:"patient-details",style:{marginLeft:"30px",marginTop:"4px"},children:[l.age?`${l.age} yrs`:"Age N/A",l.gender&&`  ${l.gender}`,l.phone&&`  ${l.phone}`]})]}),L&&r.jsxs("div",{className:"error-message",children:[r.jsx(Xr,{size:18}),L]}),r.jsxs("form",{onSubmit:oe,children:[r.jsxs("div",{className:"form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",className:"form-label",children:"Add Lab Test"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[H?r.jsx("div",{style:{position:"absolute",right:"45px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(Z,{width:24,height:24,variant:"circular"})}):r.jsx(Mn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search tests (e.g. CBC, Lipid Profile)...",value:x,onChange:Q=>b(Q.target.value),className:"modern-input",disabled:H,autoComplete:"off"})]}),H&&x&&r.jsx("div",{className:"search-results-dropdown",children:[1,2,3].map(Q=>r.jsxs("div",{className:"search-result-item",children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"20%",height:20})]},Q))}),x&&j.length>0&&r.jsx("div",{className:"search-results-dropdown",children:j.map(Q=>r.jsxs("div",{onClick:()=>ue(Q),className:"search-result-item",children:[r.jsx("span",{style:{fontWeight:500},children:Q.name}),r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(Q.price).toFixed(2)]})]},Q.id))}),x&&j.length===0&&!H&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px",padding:"10px",fontSize:"0.9rem"},children:['No tests found matching "',x,'".']})]}),r.jsxs("div",{style:{marginTop:"30px"},children:[r.jsxs("h4",{className:"card-title",style:{fontSize:"1.1rem"},children:["Selected Tests (",p.length,")"]}),p.length===0?r.jsx("div",{className:"info-message",children:"No tests added yet. Search above to add tests."}):r.jsx("div",{className:"selected-tests-list",children:p.map(Q=>r.jsxs("div",{className:"selected-test-item",children:[r.jsx("div",{style:{flex:1},children:r.jsx("div",{style:{fontWeight:500},children:Q.name})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(Q.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>me(Q.id),className:"remove-button",title:"Remove Test",children:r.jsx(Bn,{size:18})})]})]},Q.id))})]}),p.length>0&&r.jsxs("div",{className:"total-price",children:["Total: ",p.reduce((Q,ie)=>Q+parseFloat(ie.price),0).toFixed(2)]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:ve,className:"secondary-button",children:" Cancel Order "}),r.jsxs("button",{type:"submit",disabled:p.length===0,className:"primary-button",children:[r.jsx(vE,{size:18}),"Create Lab Order"]})]})]})]})]})},JH=({patient:t,onClose:e,onSave:n})=>{const[a,i]=v.useState({name:t.name,age:t.age,gender:t.gender,phone:t.phone||""}),[s,o]=v.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{await n({...a,phone:a.phone||void 0}),e()}catch(d){console.error(d),alert("Failed to update patient")}finally{o(!1)}};return r.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",width:"400px",maxWidth:"90%",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[r.jsx("h3",{style:{margin:0,fontSize:"1.2rem",color:"#333"},children:"Edit Patient Details"}),r.jsx("button",{onClick:e,style:{border:"none",background:"none",cursor:"pointer",color:"#666"},children:r.jsx(Lt,{size:20})})]}),r.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Name"}),r.jsx("input",{type:"text",value:a.name,onChange:c=>i({...a,name:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},required:!0})]}),r.jsxs("div",{style:{display:"flex",gap:"16px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Age"}),r.jsx("input",{type:"number",value:a.age||"",onChange:c=>i({...a,age:parseInt(c.target.value)||0}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Gender"}),r.jsxs("select",{value:a.gender||"",onChange:c=>i({...a,gender:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem",width:"100%"},children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Phone"}),r.jsx("input",{type:"tel",value:a.phone,onChange:c=>i({...a,phone:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},placeholder:"Optional"})]}),r.jsx("button",{type:"submit",className:"save-btn",style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:s,children:s?"Saving...":r.jsxs(r.Fragment,{children:[r.jsx(as,{size:18})," Save Changes"]})})]})]})})},mB=[{value:"general",label:"General"},{value:"diagnostic",label:"Diagnostic"},{value:"treatment",label:"Treatment"},{value:"minor_surgery",label:"Minor Surgery"}],dDe=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,category:"general"});v.useEffect(()=>{b()},[]);const b=async()=>{s(!0);try{const C=await le("/api/medical/procedures");if(C.ok){const P=await C.json();a(P)}}catch(C){console.error(C)}finally{s(!1)}},j=async()=>{if(!(!g.name||!g.cost))try{(await le("/api/medical/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,category:"general"}),b(),e())}catch(C){console.error(C)}},S=async C=>{try{(await le(`/api/medical/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),d({}),b(),e())}catch(P){console.error(P)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await le(`/api/medical/procedures/${C}`,{method:"DELETE"})).ok&&(b(),e())}catch(P){console.error(P)}},T=C=>{l(C.id),d({name:C.name,cost:C.cost,category:C.category})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Medical Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await le("/api/medical/procedures/import-defaults",{method:"POST"}),b(),e()}catch(C){console.error(C)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Lt,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Category"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:P=>d({...c,name:P.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsx("select",{className:"edit-select",value:c.category||"general",onChange:P=>d({...c,category:P.target.value}),children:mB.map(P=>r.jsx("option",{value:P.value,children:P.label},P.value))})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:P=>d({...c,cost:parseFloat(P.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>S(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(as,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Lt,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.category}`,children:C.category.replace("_"," ")})}),r.jsxs("td",{style:{fontWeight:500},children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(Xs,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Bn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:C=>x({...g,name:C.target.value})}),r.jsx("select",{className:"form-select",value:g.category||"general",onChange:C=>x({...g,category:C.target.value}),children:mB.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:C=>x({...g,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:j,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(qn,{size:18})," Add New Procedure"]})})]})})};var hDe=Object.defineProperty,AN=Object.getOwnPropertySymbols,ZH=Object.prototype.hasOwnProperty,eG=Object.prototype.propertyIsEnumerable,gB=(t,e,n)=>e in t?hDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vO=(t,e)=>{for(var n in e||(e={}))ZH.call(e,n)&&gB(t,n,e[n]);if(AN)for(var n of AN(e))eG.call(e,n)&&gB(t,n,e[n]);return t},bO=(t,e)=>{var n={};for(var a in t)ZH.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&AN)for(var a of AN(t))e.indexOf(a)<0&&eG.call(t,a)&&(n[a]=t[a]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ef;(t=>{const e=class An{constructor(c,d,f,p){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<An.MIN_VERSION||c>An.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let g=[];for(let b=0;b<this.size;b++)g.push(!1);for(let b=0;b<this.size;b++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(f);if(this.drawCodewords(x),p==-1){let b=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const S=this.getPenaltyScore();S<b&&(p=j,b=S),this.applyMask(j)}}i(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,d){const f=t.QrSegment.makeSegments(c);return An.encodeSegments(f,d)}static encodeBinary(c,d){const f=t.QrSegment.makeBytes(c);return An.encodeSegments([f],d)}static encodeSegments(c,d,f=1,p=40,g=-1,x=!0){if(!(An.MIN_VERSION<=f&&f<=p&&p<=An.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let b,j;for(b=f;;b++){const C=An.getNumDataCodewords(b,d)*8,P=o.getTotalBits(c,b);if(P<=C){j=P;break}if(b>=p)throw new RangeError("Data too long")}for(const C of[An.Ecc.MEDIUM,An.Ecc.QUARTILE,An.Ecc.HIGH])x&&j<=An.getNumDataCodewords(b,C)*8&&(d=C);let S=[];for(const C of c){n(C.mode.modeBits,4,S),n(C.numChars,C.mode.numCharCountBits(b),S);for(const P of C.getData())S.push(P)}i(S.length==j);const _=An.getNumDataCodewords(b,d)*8;i(S.length<=_),n(0,Math.min(4,_-S.length),S),n(0,(8-S.length%8)%8,S),i(S.length%8==0);for(let C=236;S.length<_;C^=253)n(C,8,S);let T=[];for(;T.length*8<S.length;)T.push(0);return S.forEach((C,P)=>T[P>>>3]|=C<<7-(P&7)),new An(b,d,T,g)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let f=0;f<d;f++)for(let p=0;p<d;p++)f==0&&p==0||f==0&&p==d-1||f==d-1&&p==0||this.drawAlignmentPattern(c[f],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let f=d;for(let g=0;g<10;g++)f=f<<1^(f>>>9)*1335;const p=(d<<10|f)^21522;i(p>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,a(p,g));this.setFunctionModule(8,7,a(p,6)),this.setFunctionModule(8,8,a(p,7)),this.setFunctionModule(7,8,a(p,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,a(p,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,a(p,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,a(p,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let f=0;f<12;f++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;i(d>>>18==0);for(let f=0;f<18;f++){const p=a(d,f),g=this.size-11+f%3,x=Math.floor(f/3);this.setFunctionModule(g,x,p),this.setFunctionModule(x,g,p)}}drawFinderPattern(c,d){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const g=Math.max(Math.abs(p),Math.abs(f)),x=c+p,b=d+f;0<=x&&x<this.size&&0<=b&&b<this.size&&this.setFunctionModule(x,b,g!=2&&g!=4)}}drawAlignmentPattern(c,d){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,d+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(c,d,f){this.modules[d][c]=f,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,f=this.errorCorrectionLevel;if(c.length!=An.getNumDataCodewords(d,f))throw new RangeError("Invalid argument");const p=An.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][d],g=An.ECC_CODEWORDS_PER_BLOCK[f.ordinal][d],x=Math.floor(An.getNumRawDataModules(d)/8),b=p-x%p,j=Math.floor(x/p);let S=[];const _=An.reedSolomonComputeDivisor(g);for(let C=0,P=0;C<p;C++){let k=c.slice(P,P+j-g+(C<b?0:1));P+=k.length;const O=An.reedSolomonComputeRemainder(k,_);C<b&&k.push(0),S.push(k.concat(O))}let T=[];for(let C=0;C<S[0].length;C++)S.forEach((P,k)=>{(C!=j-g||k>=b)&&T.push(P[C])});return i(T.length==x),T}drawCodewords(c){if(c.length!=Math.floor(An.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let g=0;g<2;g++){const x=f-g,j=(f+1&2)==0?this.size-1-p:p;!this.isFunction[j][x]&&d<c.length*8&&(this.modules[j][x]=a(c[d>>>3],7-(d&7)),d++)}}i(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let f=0;f<this.size;f++){let p;switch(c){case 0:p=(f+d)%2==0;break;case 1:p=d%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+d)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(d/2))%2==0;break;case 5:p=f*d%2+f*d%3==0;break;case 6:p=(f*d%2+f*d%3)%2==0;break;case 7:p=((f+d)%2+f*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][f]&&p&&(this.modules[d][f]=!this.modules[d][f])}}getPenaltyScore(){let c=0;for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[g][S]==x?(b++,b==5?c+=An.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*An.PENALTY_N3),x=this.modules[g][S],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*An.PENALTY_N3}for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][g]==x?(b++,b==5?c+=An.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*An.PENALTY_N3),x=this.modules[S][g],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*An.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let x=0;x<this.size-1;x++){const b=this.modules[g][x];b==this.modules[g][x+1]&&b==this.modules[g+1][x]&&b==this.modules[g+1][x+1]&&(c+=An.PENALTY_N2)}let d=0;for(const g of this.modules)d=g.reduce((x,b)=>x+(b?1:0),d);const f=this.size*this.size,p=Math.ceil(Math.abs(d*20-f*10)/f)-1;return i(0<=p&&p<=9),c+=p*An.PENALTY_N4,i(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let f=[6];for(let p=this.size-7;f.length<c;p-=d)f.splice(1,0,p);return f}}static getNumRawDataModules(c){if(c<An.MIN_VERSION||c>An.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const f=Math.floor(c/7)+2;d-=(25*f-10)*f-55,c>=7&&(d-=36)}return i(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(An.getNumRawDataModules(c)/8)-An.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*An.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let p=0;p<c-1;p++)d.push(0);d.push(1);let f=1;for(let p=0;p<c;p++){for(let g=0;g<d.length;g++)d[g]=An.reedSolomonMultiply(d[g],f),g+1<d.length&&(d[g]^=d[g+1]);f=An.reedSolomonMultiply(f,2)}return d}static reedSolomonComputeRemainder(c,d){let f=d.map(p=>0);for(const p of c){const g=p^f.shift();f.push(0),d.forEach((x,b)=>f[b]^=An.reedSolomonMultiply(x,g))}return f}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(d>>>p&1)*c;return i(f>>>8==0),f}finderPenaltyCountPatterns(c){const d=c[1];i(d<=this.size*3);const f=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(f&&c[0]>=d*4&&c[6]>=d?1:0)+(f&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,f){return c&&(this.finderPenaltyAddHistory(d,f),d=0),d+=this.size,this.finderPenaltyAddHistory(d,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let f=c-1;f>=0;f--)d.push(l>>>f&1)}function a(l,c){return(l>>>c&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const s=class Yr{constructor(c,d,f){if(this.mode=c,this.numChars=d,this.bitData=f,d<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(c){let d=[];for(const f of c)n(f,8,d);return new Yr(Yr.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!Yr.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let f=0;f<c.length;){const p=Math.min(c.length-f,3);n(parseInt(c.substring(f,f+p),10),p*3+1,d),f+=p}return new Yr(Yr.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!Yr.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],f;for(f=0;f+2<=c.length;f+=2){let p=Yr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f))*45;p+=Yr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f+1)),n(p,11,d)}return f<c.length&&n(Yr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f)),6,d),new Yr(Yr.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:Yr.isNumeric(c)?[Yr.makeNumeric(c)]:Yr.isAlphanumeric(c)?[Yr.makeAlphanumeric(c)]:[Yr.makeBytes(Yr.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new Yr(Yr.Mode.ECI,0,d)}static isNumeric(c){return Yr.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Yr.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let f=0;for(const p of c){const g=p.mode.numCharCountBits(d);if(p.numChars>=1<<g)return 1/0;f+=4+g+p.bitData.length}return f}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let f=0;f<c.length;f++)c.charAt(f)!="%"?d.push(c.charCodeAt(f)):(d.push(parseInt(c.substring(f+1,f+3),16)),f+=2);return d}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})(Ef||(Ef={}));(t=>{(e=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Ef||(Ef={}));(t=>{(e=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Ef||(Ef={}));var Dm=Ef;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var fDe={L:Dm.QrCode.Ecc.LOW,M:Dm.QrCode.Ecc.MEDIUM,Q:Dm.QrCode.Ecc.QUARTILE,H:Dm.QrCode.Ecc.HIGH},tG=128,nG="L",rG="#FFFFFF",aG="#000000",iG=!1,sG=1,pDe=4,mDe=0,gDe=.1;function oG(t,e=0){const n=[];return t.forEach(function(a,i){let s=null;a.forEach(function(o,l){if(!o&&s!==null){n.push(`M${s+e} ${i+e}h${l-s}v1H${s+e}z`),s=null;return}if(l===a.length-1){if(!o)return;s===null?n.push(`M${l+e},${i+e} h1v1H${l+e}z`):n.push(`M${s+e},${i+e} h${l+1-s}v1H${s+e}z`);return}o&&s===null&&(s=l)})}),n.join("")}function lG(t,e){return t.slice().map((n,a)=>a<e.y||a>=e.y+e.h?n:n.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function yDe(t,e,n,a){if(a==null)return null;const i=t.length+n*2,s=Math.floor(e*gDe),o=i/e,l=(a.width||s)*o,c=(a.height||s)*o,d=a.x==null?t.length/2-l/2:a.x*o,f=a.y==null?t.length/2-c/2:a.y*o,p=a.opacity==null?1:a.opacity;let g=null;if(a.excavate){let b=Math.floor(d),j=Math.floor(f),S=Math.ceil(l+d-b),_=Math.ceil(c+f-j);g={x:b,y:j,w:S,h:_}}const x=a.crossOrigin;return{x:d,y:f,h:c,w:l,excavation:g,opacity:p,crossOrigin:x}}function xDe(t,e){return e!=null?Math.max(Math.floor(e),0):t?pDe:mDe}function cG({value:t,level:e,minVersion:n,includeMargin:a,marginSize:i,imageSettings:s,size:o,boostLevel:l}){let c=Ce.useMemo(()=>{const b=(Array.isArray(t)?t:[t]).reduce((j,S)=>(j.push(...Dm.QrSegment.makeSegments(S)),j),[]);return Dm.QrCode.encodeSegments(b,fDe[e],n,void 0,void 0,l)},[t,e,n,l]);const{cells:d,margin:f,numCells:p,calculatedImageSettings:g}=Ce.useMemo(()=>{let x=c.getModules();const b=xDe(a,i),j=x.length+b*2,S=yDe(x,o,b,s);return{cells:x,margin:b,numCells:j,calculatedImageSettings:S}},[c,o,s,a,i]);return{qrcode:c,margin:f,cells:d,numCells:p,calculatedImageSettings:g}}var vDe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Da=Ce.forwardRef(function(e,n){const a=e,{value:i,size:s=tG,level:o=nG,bgColor:l=rG,fgColor:c=aG,includeMargin:d=iG,minVersion:f=sG,boostLevel:p,marginSize:g,imageSettings:x}=a,j=bO(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=j,_=bO(j,["style"]),T=x==null?void 0:x.src,C=Ce.useRef(null),P=Ce.useRef(null),k=Ce.useCallback(te=>{C.current=te,typeof n=="function"?n(te):n&&(n.current=te)},[n]),[O,I]=Ce.useState(!1),{margin:F,cells:B,numCells:$,calculatedImageSettings:L}=cG({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:g,imageSettings:x,size:s});Ce.useEffect(()=>{if(C.current!=null){const te=C.current,X=te.getContext("2d");if(!X)return;let q=B;const Y=P.current,se=L!=null&&Y!==null&&Y.complete&&Y.naturalHeight!==0&&Y.naturalWidth!==0;se&&L.excavation!=null&&(q=lG(B,L.excavation));const G=window.devicePixelRatio||1;te.height=te.width=s*G;const z=s/$*G;X.scale(z,z),X.fillStyle=l,X.fillRect(0,0,$,$),X.fillStyle=c,vDe?X.fill(new Path2D(oG(q,F))):B.forEach(function(ce,we){ce.forEach(function(K,Ie){K&&X.fillRect(Ie+F,we+F,1,1)})}),L&&(X.globalAlpha=L.opacity),se&&X.drawImage(Y,L.x+F,L.y+F,L.w,L.h)}}),Ce.useEffect(()=>{I(!1)},[T]);const V=vO({height:s,width:s},S);let H=null;return T!=null&&(H=Ce.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{I(!0)},ref:P,crossOrigin:L==null?void 0:L.crossOrigin})),Ce.createElement(Ce.Fragment,null,Ce.createElement("canvas",vO({style:V,height:s,width:s,ref:k,role:"img"},_)),H)});Da.displayName="QRCodeCanvas";var bDe=Ce.forwardRef(function(e,n){const a=e,{value:i,size:s=tG,level:o=nG,bgColor:l=rG,fgColor:c=aG,includeMargin:d=iG,minVersion:f=sG,boostLevel:p,title:g,marginSize:x,imageSettings:b}=a,j=bO(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:_,numCells:T,calculatedImageSettings:C}=cG({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:x,imageSettings:b,size:s});let P=_,k=null;b!=null&&C!=null&&(C.excavation!=null&&(P=lG(_,C.excavation)),k=Ce.createElement("image",{href:b.src,height:C.h,width:C.w,x:C.x+S,y:C.y+S,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const O=oG(P,S);return Ce.createElement("svg",vO({height:s,width:s,viewBox:`0 0 ${T} ${T}`,ref:n,role:"img"},j),!!g&&Ce.createElement("title",null,g),Ce.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),Ce.createElement("path",{fill:c,d:O,shapeRendering:"crispEdges"}),k)});bDe.displayName="QRCodeSVG";const jDe=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var xe,ee,Se,qe,Ge,Ne,ne;const[i,s]=v.useState(null),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState([]),[b,j]=v.useState("cash"),[S,_]=v.useState(!1),[T,C]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[P,k]=v.useState(0),[O,I]=v.useState(""),[F,B]=v.useState(""),[$,L]=v.useState(""),[V,H]=v.useState(null),[te,X]=v.useState(null),[q,Y]=v.useState(!1),se=()=>{T.length>=5||C(de=>[...de,{id:crypto.randomUUID(),method:"cash",amount:0}])},G=de=>{T.length<=2||C(Te=>Te.filter(Ee=>Ee.id!==de))},z=(de,Te,Ee)=>{C(W=>W.map(ye=>ye.id===de?{...ye,[Te]:Ee}:ye))},ce=de=>{const Te=T.filter(W=>W.id!==de).reduce((W,ye)=>W+ye.amount,0),Ee=Math.max(0,Re-Te);z(de,"amount",Ee)},we=de=>{const Te=Math.min(100,Math.max(0,de||0));k(Te),x(Ee=>Ee.map(W=>({...W,discount_percentage:Te})))},K=(de,Te)=>{const Ee=Math.min(100,Math.max(0,Te||0));x(W=>W.map((ye,he)=>he===de?{...ye,discount_percentage:Ee}:ye))},Ie=v.useMemo(()=>g.reduce((de,Te)=>de+(Te.price??Te.cost??0),0),[g]),We=v.useMemo(()=>g.reduce((de,Te)=>{const W=(Te.price??Te.cost??0)*(Te.discount_percentage??0)/100;return de+W},0),[g]),Re=Ie-We,Fe=v.useMemo(()=>T.reduce((de,Te)=>de+Te.amount,0),[T]),ve=Re-Fe,ae=Math.abs(ve)<.01,je=v.useMemo(()=>S?T.some(de=>de.method==="credit"):b==="credit",[S,T,b]),ue=async()=>{var de,Te;if(!i)return d("No record data available to bill."),null;if(g.length===0)return d("Cannot bill an empty procedure list."),null;p(!0),d(null);try{const Ee=g.map(He=>{const nt=He.price??He.cost??0,mt=nt*((He.discount_percentage??0)/100),De=nt-mt;return{name:He.name,price:nt,quantity:1,total:De,item_id:He.id||`proc_${Date.now()}`,type:"service",discount_percentage:He.discount_percentage??0}}),W=S?((de=T[0])==null?void 0:de.method)||"cash":b,ye=S?T.map(He=>({method:He.method,amount:He.amount})):void 0,he={patientId:i.patientId.id,items:Ee,amount:Re,paymentMode:W,splitPayments:ye,type:"consultation",related_id:i.id,status:"paid",discountPercentage:P},ge=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)}),_e=await ge.json();if(!ge.ok||!_e.id)throw new Error(_e.message||"Failed to create bill.");(await le(`/api/medical/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:_e.id})})).ok||console.error("Failed to update medical record status"),s(He=>He?{...He,status:"billed",billId:_e.id}:null);const Oe=S?((Te=T.find(He=>He.method==="credit"))==null?void 0:Te.amount)||0:b==="credit"?Re:0;if(Oe>0)try{await le(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Oe,related_bill_id:_e.id,notes:`Medical Bill #${_e.id}${S?" (Split Payment - Credit portion)":""}`})})}catch(He){console.error("Failed to create debt entry:",He)}return a&&a(),_e.id}catch(Ee){return console.error("Billing process failed:",Ee),d(Ee.message||"Failed to create bill."),null}finally{p(!1)}},me=()=>{window.print()},oe=async()=>{await ue()&&setTimeout(()=>window.print(),300)},Q=async()=>{if(n){l(!0),d(null);try{const de=await le(`/api/medical/${n}`);if(!de.ok)throw new Error("Failed to fetch medical record");const Te=await de.json(),Ee=Te.Patient||{},W={id:Te.id,patientId:{id:Ee.id||Te.patient_id,name:Ee.name||"Unknown",patient_token_number:Ee.patient_token_number,age:Ee.age,gender:Ee.gender},clinicId:Te.clinic_id,selectedProcedures:Te.selected_procedures||[],status:Te.status,billId:Te.bill_id,createdAt:Te.createdAt||Te.date,date:Te.date,notes:Te.notes};s(W);const ye=(Te.selected_procedures||[]).map(he=>({...he,price:he.cost,discount_percentage:0}));x(ye);try{const he=await le("/api/clinics/settings");if(he.ok){const ge=await he.json();I(ge.name||""),B(ge.address||""),L(ge.notes||""),ge.upi_id&&H(`upi://pay?pa=${ge.upi_id}&pn=${encodeURIComponent(ge.name||"Clinic")}&cu=INR`)}}catch(he){console.error("Failed to fetch clinic settings",he)}}catch(de){d(de.message||"Failed to load record")}finally{l(!1)}}},ie=async()=>{var de;if((de=i==null?void 0:i.patientId)!=null&&de.id){Y(!0);try{const Te=await le(`/api/patient-debts/patient/${i.patientId.id}/balance`);if(Te.ok){const Ee=await Te.json();X(Ee.balance||0)}}catch(Te){console.error("Failed to fetch patient debt",Te)}finally{Y(!1)}}};return v.useEffect(()=>{t&&n&&Q()},[t,n]),v.useEffect(()=>{var de;(de=i==null?void 0:i.patientId)!=null&&de.id&&ie()},[(xe=i==null?void 0:i.patientId)==null?void 0:xe.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Medical Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Lt,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsx("div",{className:"space-y-4 p-5",children:r.jsx(Z,{width:100,height:20})})]})})]})})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"MEDICAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:O||"Clinic Name"}),(F||$)&&r.jsxs("div",{className:"clinic-details-print",children:[F&&r.jsx("span",{className:"small-text clinic-address",children:F}),$&&r.jsx("span",{className:"small-text clinic-notes",children:$})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",((ee=i.patientId)==null?void 0:ee.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",((Se=i.patientId)==null?void 0:Se.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",((qe=i.patientId)==null?void 0:qe.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",((Ge=i.patientId)==null?void 0:Ge.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Oa,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((de,Te)=>{const Ee=de.price??de.cost??0,W=Ee*(de.discount_percentage??0)/100,ye=Ee-W;return r.jsxs("tr",{children:[r.jsx("td",{children:Te+1}),r.jsx("td",{children:de.name}),r.jsx("td",{children:Ee.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:de.discount_percentage===0?"":de.discount_percentage,onChange:he=>K(Te,parseFloat(he.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:ye.toFixed(2)})]},Te)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",P.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",We.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Re.toFixed(2)]})})]}),V&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(S&&T.some(de=>de.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(Da,{value:V,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",We.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:P===0?"":P,onChange:de=>we(parseFloat(de.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Re.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:V?r.jsxs(r.Fragment,{children:[r.jsx(Da,{value:V,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${S?"active":""}`,onClick:()=>_(!S),disabled:f||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:S?"2px solid #4facfe":"1px solid #ddd",background:S?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:S?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:S?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(Io,{size:14}),"Split Pay"]})]}),S?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(Io,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",Re.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:T.map((de,Te)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Te+1}),r.jsxs("select",{value:de.method,onChange:Ee=>z(de.id,"method",Ee.target.value),className:`split-payment-select ${de.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:de.amount===0?"":de.amount,onChange:Ee=>z(de.id,"amount",parseFloat(Ee.target.value)||0),placeholder:"0",className:`split-payment-input ${de.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed"})]}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>ce(de.id),className:"split-payment-btn split-payment-btn-fill",disabled:f||i.status==="billed",children:"Fill"}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>G(de.id),className:"split-payment-btn split-payment-btn-remove",disabled:f||i.status==="billed",children:r.jsx(Bn,{size:12})})]},de.id))}),T.length<5&&r.jsxs("button",{type:"button",onClick:se,className:"split-payment-add-btn",disabled:f||i.status==="billed",children:[r.jsx(qn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Fe.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(ve)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(ve)<.01?"":ve>0?"":"",Math.abs(ve)<.01?"Balanced":ve>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ve).toFixed(2)]})]}),!ae&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",Re.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:de=>j(de.target.value),className:"payment-mode-select",disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),je&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),q?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:te&&te>0?"#dc3545":"#28a745"},children:["",(te||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:S?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(S?((Ne=T.find(de=>de.method==="credit"))==null?void 0:Ne.amount)||0:Re).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((te||0)+(S?((ne=T.find(de=>de.method==="credit"))==null?void 0:ne.amount)||0:Re)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:me,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:oe,className:"primary-button",disabled:f||S&&!ae,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Po,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:me,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},yB=/^\+?[0-9\s\-().]{7,20}$/,wDe=/^[a-zA-Z\s'-]{2,}$/,uG=()=>{const t=Mt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState([]),[_,T]=v.useState(!0),C=Lr();v.useEffect(()=>{C.state&&C.state.patient&&ue(C.state.patient)},[C.state]);const[P,k]=v.useState([]),[O,I]=v.useState(""),[F,B]=v.useState(!1),[$,L]=v.useState("plan"),[V,H]=v.useState([]),[te,X]=v.useState([]),[q,Y]=v.useState(!1),[se,G]=v.useState(""),[z,ce]=v.useState(!1),[we,K]=v.useState(null),[Ie,We]=v.useState(null);v.useEffect(()=>{Fe(),Re()},[]);const Re=async()=>{try{const Ne=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),ne=await le(`/api/patients?${Ne.toString()}`);if(ne.ok){const de=await ne.json();S(de.patients||[])}}catch(Ne){console.error("Error fetching recent patients",Ne)}finally{T(!1)}},Fe=async()=>{try{const Ne=await le("/api/medical/procedures");if(Ne.ok){const ne=await Ne.json();X(ne)}}catch(Ne){console.error("Error fetching procedures",Ne)}};v.useEffect(()=>{(async()=>{if(!l){H([]),We(null),I(""),k([]);return}try{const ne=await le(`/api/medical/patient/${l.id}`);if(ne.ok){const de=await ne.json();H(de);const Te=new Date().toDateString(),Ee=de.find(W=>W.status==="draft"&&new Date(W.date||W.createdAt||Date.now()).toDateString()===Te);Ee?(We(Ee.id),I(Ee.notes||""),k(Ee.selected_procedures.map(W=>({instanceId:crypto.randomUUID(),procedureId:W.id,name:W.name,price:W.cost,category:W.category})))):(We(null),I(""),k([]))}}catch(ne){console.error("Error fetching history",ne)}})()},[l]);const ve=v.useMemo(()=>zc(async Ne=>{if(!Ne.trim()||Ne.length<2){i([]),o(!1);return}o(!0);try{const ne=await le(`/api/patients?search=${encodeURIComponent(Ne)}&limit=10`);if(ne.ok){const de=await ne.json();i(de.patients||[])}}catch(ne){console.error("Search error:",ne)}finally{o(!1)}},300),[]);v.useEffect(()=>{ve(e)},[e,ve]);const ae=Ne=>{const ne=Ne.target.value;n(ne),g(yB.test(ne)),b(wDe.test(ne)&&!yB.test(ne))},je=async Ne=>{if(!(!e||Ne==="phone"&&!p||Ne==="name"&&!x)){o(!0);try{const de=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Ne==="name"?e:"direct medical",phone:Ne==="phone"?e:null,age:null,gender:null,token:null})});if(de.ok){const Te=await de.json();ue({id:Te.id,name:Te.name,token:Te.token??null,age:Te.age??null,gender:Te.gender??null,phone:Te.phone})}else alert("Failed to create patient")}catch(ne){console.error("Error creating patient:",ne),alert("Error creating patient")}finally{o(!1)}}},ue=Ne=>{c(Ne),n(""),i([])},me=()=>{c(null),k([]),I("")},oe=async Ne=>{if(!l)return;const ne=await le(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)});if(ne.ok)await ne.json(),c(de=>de?{...de,...Ne}:null);else throw new Error("Failed to update")},Q=Ne=>{const ne={instanceId:crypto.randomUUID(),procedureId:Ne.id,name:Ne.name,price:Ne.cost,category:Ne.category};k(de=>[...de,ne])},ie=Ne=>{k(ne=>ne.filter(de=>de.instanceId!==Ne))},xe=(Ne,ne)=>{k(de=>de.map(Te=>Te.instanceId===Ne?{...Te,price:ne}:Te))},ee=Ne=>{const ne=V.find(de=>de.id===Ne);ne&&(We(ne.id),I(ne.notes||""),k(ne.selected_procedures.map(de=>({instanceId:crypto.randomUUID(),procedureId:de.id,name:de.name,price:de.cost,category:de.category}))),L("plan"))},Se=async(Ne=!0)=>{var ne;if(l){B(!0);try{const de=P.map(W=>({id:W.procedureId,name:W.name,cost:W.price,category:W.category})),Te={patientId:l.id,selectedProcedures:de,notes:O};let Ee;if(Ie?((ne=V.find(ye=>ye.id===Ie))==null?void 0:ne.status)==="draft"?Ee=await le(`/api/medical/${Ie}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)}):Ee=await le("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)}):Ee=await le("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)}),Ee.ok){const W=await Ee.json();We(W.id);const ye=await le(`/api/medical/patient/${l.id}`);if(ye.ok){const he=await ye.json();H(he)}Ne?(K(W.id),ce(!0)):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save medical record.")}catch(de){console.error(de),alert("Error saving record.")}finally{B(!1)}}},qe=v.useMemo(()=>P.reduce((Ne,ne)=>Ne+ne.price,0),[P]),Ge=v.useMemo(()=>{const Ne={};return te.filter(de=>de.name.toLowerCase().includes(se.toLowerCase())||de.category.toLowerCase().includes(se.toLowerCase())).forEach(de=>{const Te=de.category||"general";Ne[Te]||(Ne[Te]=[]),Ne[Te].push(de)}),Ne},[te,se]);return r.jsxs("div",{className:"medical-page-container printable-section",children:[r.jsxs("header",{className:"medical-header no-print",children:[r.jsxs("div",{className:"medical-title-group",children:[r.jsx(xf,{className:"medical-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"medical-title",children:"Medical Procedures"}),r.jsx("p",{className:"medical-subtitle",children:"Create medical procedure records and bills"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(Xs,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:me,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Lt,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(Mn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"medical-search-input header-input",value:e,onChange:ae}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(Ne=>r.jsxs("div",{onClick:()=>ue(Ne),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:Ne.name}),r.jsxs("div",{className:"patient-meta",children:[Ne.age," yrs / ",Ne.gender,"  ",Ne.phone]})]}),r.jsx(Kn,{size:16,color:"var(--mp-text-sec)"})]},Ne.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--mp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>je(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"medical-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container no-print",children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--mp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Mn,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"medical-search-input",value:e,onChange:ae}),s&&r.jsx("div",{className:"search-spinner"})]}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(Ne=>r.jsxs("div",{onClick:()=>ue(Ne),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:Ne.name}),r.jsxs("div",{className:"patient-meta",children:[Ne.age," yrs / ",Ne.gender,"  ",Ne.phone]})]}),r.jsx(Kn,{size:16,color:"var(--mp-text-sec)"})]},Ne.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown",style:{padding:"16px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--mp-text-sec)",marginBottom:"12px"},children:['No patients found for "',e,'"']}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[p&&r.jsxs("button",{type:"button",onClick:()=>je("phone"),className:"create-patient-btn",children:[r.jsx(qn,{size:16})," Create patient with phone: ",e]}),x&&r.jsxs("button",{type:"button",onClick:()=>je("name"),className:"create-patient-btn",children:[r.jsx(qn,{size:16})," Create patient: ",e]})]})]}),e.length<2&&r.jsxs("div",{className:"recent-patients-section",children:[r.jsx("h3",{children:"Recent Patients"}),_?r.jsx("div",{className:"recent-patients-list",children:[1,2,3].map(Ne=>r.jsx("div",{className:"recent-patient-chip skeleton",children:r.jsx(Z,{width:100,height:20})},Ne))}):r.jsx("div",{className:"recent-patients-list",children:j.map(Ne=>r.jsxs("button",{onClick:()=>ue(Ne),className:"recent-patient-chip",children:[r.jsx("span",{className:"chip-avatar",children:Ne.name.charAt(0)}),r.jsx("span",{children:Ne.name})]},Ne.id))})]})]}),l&&r.jsx("div",{className:"medical-workspace no-print",children:r.jsxs("div",{className:"medical-grid",children:[r.jsxs("section",{className:"procedures-section no-print",children:[r.jsxs("div",{className:"medical-card procedures-container",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:"Available Procedures"}),r.jsx("button",{className:"manage-procedures-btn",onClick:()=>Y(!0),children:"Manage"})]}),r.jsx("div",{className:"procedure-search-bar",style:{padding:"0 16px 12px 16px"},children:r.jsxs("div",{className:"search-input-wrapper header-variant",style:{background:"var(--mp-bg-sec)"},children:[r.jsx(Mn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search procedures...",className:"medical-search-input header-input",value:se,onChange:Ne=>G(Ne.target.value),style:{background:"transparent"}}),se&&r.jsx("button",{onClick:()=>G(""),className:"clear-search-btn",style:{border:"none",background:"transparent",cursor:"pointer",color:"#666"},children:r.jsx(Lt,{size:14})})]})}),r.jsx("div",{className:"procedures-list",children:Object.entries(Ge).map(([Ne,ne])=>r.jsxs("div",{className:"procedure-category-group",children:[r.jsx("h4",{className:"category-label",children:Ne.replace("_"," ")}),ne.map(de=>r.jsxs("div",{onClick:()=>Q(de),className:"procedure-item",children:[r.jsx("span",{className:"proc-name",children:de.name}),r.jsxs("span",{className:"proc-cost",children:["",de.cost]})]},de.id))]},Ne))})]}),r.jsxs("div",{className:"medical-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("span",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>Se(!1),disabled:F,children:[r.jsx(as,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:O,onChange:Ne=>I(Ne.target.value)})]})]}),r.jsx("section",{className:"plan-section no-print",children:r.jsxs("div",{className:"medical-card full-height",children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{className:$==="plan"?"active":"",onClick:()=>L("plan"),children:"Treatment Plan"}),r.jsx("button",{className:$==="history"?"active":"",onClick:()=>L("history"),children:"History"})]}),$==="plan"&&r.jsxs("div",{className:"treatment-plan-container",children:[r.jsx("div",{className:"treatment-plan-list",children:P.length===0?r.jsx("p",{className:"empty-plan-message no-print",children:"Click on procedures to add them to the treatment plan."}):P.map(Ne=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",children:Ne.name}),r.jsxs("div",{className:"plan-item-controls",children:[r.jsx("input",{type:"number",className:"cost-input",value:Ne.price,onChange:ne=>xe(Ne.instanceId,parseFloat(ne.target.value)||0)}),r.jsx("button",{className:"remove-proc-btn",onClick:()=>ie(Ne.instanceId),children:r.jsx(Bn,{size:14})})]})]},Ne.instanceId))}),P.length>0&&r.jsxs("div",{className:"plan-total",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{className:"total-amount",children:["",qe.toFixed(2)]})]})]}),$==="history"&&r.jsx("div",{className:"history-list",children:V.length===0?r.jsx("p",{className:"empty-plan-message",children:"No previous records found."}):V.map(Ne=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(Ne.date||Ne.createdAt||Date.now()).toLocaleDateString()}),r.jsx("span",{className:`record-status status-${Ne.status}`,children:Ne.status})]}),r.jsx("div",{className:"history-procedures",children:Ne.selected_procedures.map((ne,de)=>r.jsx("span",{className:"history-proc-tag",children:ne.name},de))}),Ne.notes&&r.jsxs("div",{className:"history-notes",children:[r.jsx("strong",{children:"Notes:"})," ",Ne.notes.substring(0,100),"..."]}),r.jsxs("div",{className:"history-record-actions",children:[Ne.status==="draft"&&r.jsxs("button",{className:"edit-record-btn",onClick:()=>ee(Ne.id),children:[r.jsx(Xs,{size:14})," Edit"]}),Ne.bill_id&&r.jsxs("button",{className:"view-bill-btn",onClick:()=>{K(Ne.id),ce(!0)},children:[r.jsx(Oa,{size:14})," View Bill"]})]})]},Ne.id))}),r.jsx("div",{className:"action-footer no-print",children:r.jsx("button",{className:"save-btn",onClick:()=>Se(!0),disabled:F||P.length===0,children:F?"Saving...":"Save & Bill"})})]})})]})}),d&&l&&r.jsx(JH,{patient:l,onClose:()=>f(!1),onSave:oe}),q&&r.jsx(dDe,{onClose:()=>Y(!1),onUpdate:Fe}),z&&we&&r.jsx(jDe,{isOpen:z,onClose:()=>ce(!1),recordId:we,onBillingComplete:()=>{ce(!1),l&&le(`/api/medical/patient/${l.id}`).then(Ne=>Ne.json()).then(Ne=>H(Ne)).catch(console.error)}})]})},NDe=()=>{const t=v.useRef(null),e=v.useRef(null),[n,a]=v.useState(!1),[i,s]=v.useState(0),[o,l]=v.useState(!1),[c,d]=v.useState(!1),[f,p]=v.useState(null),g=30,x=100,b=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:!0});t.current&&(t.current.srcObject=_,d(!0),p(null))}catch(_){console.error("Error accessing camera:",_),p("Camera access denied. Please allow camera permissions to use motion detection."),d(!1)}},j=()=>{var T;const _=(T=t.current)==null?void 0:T.srcObject;_&&_.getTracks().forEach(C=>C.stop()),d(!1)};v.useEffect(()=>(b(),()=>j()),[]),v.useEffect(()=>{if(!c)return;let _;const T=e.current,C=t.current;if(!T||!C)return;const P=T.getContext("2d",{willReadFrequently:!0});if(!P)return;const k=320,O=240;T.width=k,T.height=O;let I=null;const F=()=>{if(C.readyState===C.HAVE_ENOUGH_DATA){P.drawImage(C,0,0,k,O);const $=P.getImageData(0,0,k,O).data;if(I){let L=0;for(let V=0;V<$.length;V+=4*4){const H=Math.abs($[V]-I[V]),te=Math.abs($[V+1]-I[V+1]),X=Math.abs($[V+2]-I[V+2]);H+te+X>g&&L++}if(L>x){const V=Date.now();s(V),a(!0),o||l(!0)}else a(!1)}I=$}_=requestAnimationFrame(F)};return F(),()=>{cancelAnimationFrame(_)}},[c,o]);const S=()=>{l(!1)};return r.jsxs("div",{className:"motion-detect-container",style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{className:"status-header bg-white p-4 rounded-lg shadow-sm flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${c?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.jsx(pE,{size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Motion Detection Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:c?"Camera Active - Monitoring":"Camera Inactive"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${n?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(bc,{size:16}),r.jsx("span",{className:"font-medium",children:n?"Motion Detected!":"No Motion"})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${o?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(gE,{size:16}),r.jsx("span",{className:"font-medium",children:o?"AI Assistant Active":"AI Assistant Idle"})]})]})]}),f&&r.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:f}),r.jsxs("div",{className:"video-feed-container bg-black rounded-lg overflow-hidden relative shadow-lg",style:{maxWidth:"640px",margin:"0 auto"},children:[r.jsx("video",{ref:t,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",display:c?"block":"none"}}),r.jsx("canvas",{ref:e,style:{display:"none"}}),!c&&!f&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:r.jsxs("div",{className:"text-center",children:[r.jsx(pE,{size:48,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Connecting to camera..."})]})})]}),o&&r.jsx(eS,{onClose:S,patientData:null,tokenNumber:null,onAiSummaryChange:()=>{},lastMotionTimestamp:i,backgroundMode:!0})]})},SDe=async()=>{const t=await le("/api/staff");if(!t.ok)throw new Error("Failed to fetch staff");const e=await t.json();return e.staff||e||[]};function _De(){return PN({queryKey:[...Ut.staff.list,"doctors"],queryFn:SDe,staleTime:5*60*1e3,select:t=>t.filter(e=>e.role==="doctor"||e.role==="admin")})}const xB=({currentUser:t})=>{const[e,n]=v.useState("queue"),[a,i]=v.useState(""),[s,o]=v.useState(new Date),l=s.toISOString().split("T")[0],[c,d]=v.useState(!1),[f,p]=v.useState("list"),{data:g,isLoading:x,refetch:b}=KH(l),j=(g==null?void 0:g.list)||[],{data:S=[],isLoading:_}=_De(),T=oDe(),C=ss(),[P,k]=v.useState(null),[O,I]=v.useState(null),F=Mt(),B=Lr(),$=()=>{b()};v.useEffect(()=>{const z=new URLSearchParams(B.search).get("tab");z&&X.find(we=>we.id===z)&&n(z)},[B.search]),v.useEffect(()=>{e==="queue"&&b()},[e,b]);const L=v.useCallback(async(G,z)=>{if(console.log(`Attempting to assign doctor ${z} to queue ${G}`),I(null),k(null),!z){console.log("No doctor ID provided, skipping assignment.");return}const ce=j.find(Ie=>Ie.id===G);if(!ce){console.error(`Queue entry ${G} not found in local state.`),I("Queue entry not found.");return}if(ce.doctor_id===z){console.log(`Queue ${G} already assigned to doctor ${z}. Skipping.`);return}const we=async Ie=>{if(!Ie||!Ie.id||!Ie.name){I("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",Ie);return}const We=async()=>{try{await T.mutateAsync({queueId:G,status:"waiting",doctorId:z});const Re=S.find(Fe=>Fe.id===z);return console.log(`Successfully assigned doctor ${Re==null?void 0:Re.name} to queue ${G}.`),!0}catch(Re){return console.error(`Error assigning doctor for queue ${G}:`,Re),I(`Failed to assign doctor: ${Re.message}`),!1}};Ie.subscription_status==="active"?(console.log(`Patient ${Ie.name} (ID: ${Ie.id}) has active subscription. Assigning doctor directly.`),await We()):(console.log(`Patient ${Ie.name} (ID: ${Ie.id}) does not have active subscription. Navigating to billing WITHOUT assigning doctor yet.`),F(`/dashboard/doctor-billing/${G}?doctorId=${z}`))},K=ce.Patient;if(K&&K.id&&K.name)console.log("Patient details found in state. Proceeding with assignment."),await we(K);else{console.warn(`Patient details missing for queue entry ${G}. Fetching patient ${ce.patient_id}...`);try{const Ie=await le(`/api/patients/${ce.patient_id}`);if(!Ie.ok){const Re=await Ie.json().catch(()=>({}));throw new Error(Re.message||`Failed to fetch patient details (status ${Ie.status})`)}const We=await Ie.json();console.log("Successfully fetched patient details:",We),await we(We)}catch(Ie){console.error(`Failed to fetch patient details for patient ID ${ce.patient_id}:`,Ie),I(`Failed to fetch required patient details: ${Ie.message}`)}}},[S,j,F,T]),V=G=>{G&&(C.prefetchQuery({queryKey:Ut.patients.context(G),queryFn:async()=>{const z=await le(`/api/patients/${G}/context`);if(!z.ok)throw new Error("Failed to fetch patient context");return z.json()},staleTime:5*60*1e3}),C.prefetchQuery({queryKey:Ut.patientDebts.balance(G),queryFn:async()=>{const z=await le(`/api/patient-debts/${G}/balance`);return z.ok?z.json():{netDebt:0}},staleTime:1*60*1e3}),C.prefetchQuery({queryKey:Ut.queue.latest(G),queryFn:async()=>{const z=await le(`/api/queue/patient/${G}/latest`);if(!z.ok)throw new Error("Failed to fetch latest queue status");const ce=await z.json();return ce!=null&&ce._id&&C.prefetchQuery({queryKey:Ut.queue.entry(ce._id),queryFn:async()=>{const we=await le(`/api/queue/doctor/complaint/${ce._id}`);if(!we.ok)throw new Error("Failed to fetch complaint record");return we.json()},staleTime:1*60*1e3}),ce},staleTime:5e3}),C.prefetchQuery({queryKey:Ut.dental.records(G),queryFn:async()=>{const z=await le(`/api/dental/patient/${G}`);if(!z.ok)throw new Error("Failed to fetch dental records");return z.json()},staleTime:5*60*1e3}))},H=async(G,z)=>{var we;I(null);const ce=z==="consulting"?"start consultation":"complete visit";try{await T.mutateAsync({queueId:G,status:z,doctorId:z==="consulting"&&((we=j.find(K=>K.id===G))==null?void 0:we.doctor_id)||void 0})}catch(K){console.error(`Error trying to ${ce}:`,K),I(`Failed to ${ce}: ${K.message}`)}},te=async(G,z)=>{let ce="red";z==="red"?ce="green":z==="green"?ce="blue":z==="blue"?ce=null:ce="red";try{if(!(await le(`/api/patients/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_code:ce})})).ok)throw new Error("Failed to update patient color");b()}catch(we){console.error("Error updating patient color:",we)}},X=[{id:"queue",label:"Appointment Queue",icon:r.jsx(Oo,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(Mn,{size:20})},{id:"manage-admission",label:"Manage Admission",icon:r.jsx(NQ,{size:20})},{id:"all-patients",label:"All Patients",icon:r.jsx(kb,{size:20})},{id:"lab",label:"Lab Tests",icon:r.jsx(Qj,{size:20})},{id:"custom-bill",label:"Custom Bill",icon:r.jsx(Cs,{size:20})},{id:"medical",label:"Medical",icon:r.jsx(_X,{size:20})},{id:"motion-detect",label:"Motion Detect",icon:r.jsx(pE,{size:20})}],q=G=>{try{return new Date(G).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},Y=j.filter(G=>{var z,ce;return(ce=(z=G.Patient)==null?void 0:z.name)==null?void 0:ce.toLowerCase().includes(a.toLowerCase())}),{openCommandBar:se}=Oc();return r.jsxs("div",{className:"reception-app",children:[O&&r.jsxs("div",{className:"reception-error",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:O})]}),r.jsx("div",{className:"reception-nav",children:X.map(G=>r.jsxs("button",{className:`reception-nav-item ${e===G.id?"active":""}`,onClick:()=>{G.id==="newtons-ai"?se():n(G.id)},children:[r.jsx("span",{children:G.icon}),G.label]},G.id))}),r.jsxs("div",{className:"reception-main",children:[e==="queue"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"reception-header",children:[r.jsxs("div",{className:"reception-actions",children:[r.jsxs("div",{className:"reception-search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patients...",className:"reception-search-input",value:a,onChange:G=>i(G.target.value)}),r.jsx(Mn,{className:"reception-search-icon",size:18})]}),r.jsxs("div",{className:"reception-controls",children:[r.jsxs("div",{className:"reception-view-toggle",children:[r.jsxs("button",{className:`reception-toggle-option ${f==="list"?"active":""}`,onClick:()=>p("list"),title:"List View",children:[r.jsx(Fz,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"List"})]}),r.jsxs("button",{className:`reception-toggle-option ${f==="timeline"?"active":""}`,onClick:()=>p("timeline"),title:"Timeline View",children:[r.jsx($O,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"Timeline"})]})]}),r.jsx("div",{className:"reception-btn-icon",style:{width:"auto",padding:"0 10px",gap:"8px"},children:r.jsx("input",{type:"date",className:"bg-transparent border-none outline-none text-sm dark:text-white",value:s.toISOString().split("T")[0],onChange:G=>o(new Date(G.target.value))})}),r.jsxs("button",{onClick:()=>d(!0),className:"reception-btn-primary",children:[r.jsx(Tb,{size:16}),r.jsx("span",{children:"Book Appointment"})]})]})]}),r.jsxs("div",{className:"reception-stats",children:[r.jsxs("div",{className:"reception-stat-card stat-waiting",children:[r.jsx("div",{className:"reception-stat-label",children:"Waiting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(G=>G.status==="waiting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-consulting",children:[r.jsx("div",{className:"reception-stat-label",children:"Consulting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(G=>G.status==="consulting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-completed",children:[r.jsx("div",{className:"reception-stat-label",children:"Completed"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(G=>G.status==="seen").length})]})]})]}),r.jsx(YH,{isOpen:c,onClose:()=>{d(!1),b()},onAppointmentBooked:$}),x&&j.length===0?r.jsx("div",{className:"reception-card",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:50,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{className:"hidden md:table-cell",children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:120,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(G=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:32})})]},G))})]})}):Y.length===0?r.jsx("div",{className:"empty-queue-message",children:a?"No patients found matching your search.":"Queue is empty."}):f==="timeline"?r.jsx(WH,{queueList:Y,onPatientClick:G=>F(`/dashboard/edit-complaint/${G.id}`)}):r.jsx("div",{className:"reception-card reception-table-wrapper",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"hidden-mobile",children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Phone"}),r.jsx("th",{className:"hidden-mobile",children:"Complaint"}),r.jsx("th",{className:"hidden-mobile",children:"Subscription"}),r.jsx("th",{className:"hidden-mobile",children:"Time"}),r.jsx("th",{className:"text-center",children:"Action"})]})}),r.jsx("tbody",{children:Y.map(G=>{var z,ce,we,K,Ie,We,Re,Fe,ve,ae,je,ue;return r.jsxs("tr",{onClick:()=>F(`/dashboard/edit-complaint/${G.id}`),onMouseEnter:()=>G.patient_id&&V(G.patient_id),className:"reception-row",children:[r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsxs("span",{className:"queue-token",children:["#",G.token_no]})," "]}),r.jsx("td",{children:r.jsxs("div",{className:"patient-cell-content",children:[r.jsx("span",{className:"reception-color-dot",style:{backgroundColor:((z=G.Patient)==null?void 0:z.color_code)||"#cbd5e1"},onClick:me=>{var oe;me.stopPropagation(),(oe=G.Patient)!=null&&oe.id&&te(G.Patient.id,G.Patient.color_code)},title:"Click to change color"}),r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:((ce=G.Patient)==null?void 0:ce.name)||"N/A"}),r.jsxs("span",{className:"details",children:[(we=G.Patient)!=null&&we.age?`${G.Patient.age}y`:"",(K=G.Patient)!=null&&K.gender?`, ${G.Patient.gender}`:""]})]})]})}),r.jsxs("td",{className:"desktop-only",children:[" ",r.jsx("div",{className:"text-sm text-gray-500",children:((Ie=G.Patient)==null?void 0:Ie.phone)||"-"})," "]}),r.jsx("td",{className:"desktop-only",children:r.jsx("span",{className:"reception-badge badge-neutral",children:G.complaint||"-"})}),r.jsxs("td",{className:"desktop-only",children:[r.jsx("span",{className:`reception-badge ${((We=G.Patient)==null?void 0:We.subscription_status)==="active"?"badge-active":((Re=G.Patient)==null?void 0:Re.subscription_status)==="cancelled"||((Fe=G.Patient)==null?void 0:Fe.subscription_status)==="expired"?"badge-inactive":"badge-neutral"}`,children:((ve=G.Patient)==null?void 0:ve.subscription_status)??"None"}),G.Patient&&G.Patient.id&&G.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:me=>{me.stopPropagation(),G.Patient&&F(`/start-subscription/${G.Patient.id}`)},className:"btn-start-sub ml-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden-mobile text-sm text-gray-500",children:q(G.createdAt)}),r.jsx("td",{className:"action-doctor-cell",children:P===G.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:me=>me.stopPropagation(),children:r.jsxs("select",{value:"",onChange:me=>L(G.id,me.target.value),onBlur:()=>k(null),className:"doctor-select",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),_?r.jsx("option",{disabled:!0,children:"Loading..."}):S.length>0?S.map(me=>r.jsx("option",{value:me.id,children:me.name},me.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:me=>me.stopPropagation(),children:[G.status==="waiting"&&r.jsx(r.Fragment,{children:(ae=G.User)!=null&&ae.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:G.User.name}),r.jsx("button",{onClick:()=>H(G.id,"consulting"),className:"btn-action btn-start",children:"Start"})]}):_?r.jsx(Z,{width:80,height:20}):S.length===0?r.jsx("span",{className:"text-red-500 text-xs",children:"No docs"}):S.length===1?r.jsxs("button",{onClick:()=>L(G.id,S[0].id),className:"btn-action btn-assign",children:["Assign ",S[0].name.split(" ")[0]]}):r.jsx("button",{onClick:()=>k(G.id),className:"btn-action btn-assign",children:"Assign"})}),G.status==="consulting"&&r.jsxs(r.Fragment,{children:[((je=G.User)==null?void 0:je.name)&&r.jsx("span",{className:"doctor-name-display",children:G.User.name}),r.jsx("button",{onClick:()=>H(G.id,"seen"),className:"btn-action btn-complete",children:"Complete"})]}),G.status==="seen"&&r.jsxs(r.Fragment,{children:[((ue=G.User)==null?void 0:ue.name)&&r.jsx("span",{className:"doctor-name-display",children:G.User.name}),r.jsx("span",{className:"text-gray-400 italic text-xs",children:"Done"})]}),G.status==="cancelled"&&r.jsx("span",{className:"text-red-500 italic text-xs",children:"Cancelled"})]})})]},G.id)})})]})})]}),e==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx(XH,{currentUser:t}),r.jsxs("button",{onClick:()=>F("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(Mn,{size:16}),"Search Lab Reports"]})]}),e==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx(mv,{})}),e==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx(TM,{})}),e==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(xO,{})}),e==="custom-bill"&&r.jsx("div",{className:"custom-bill-tab-content",children:r.jsx(QH,{})}),e==="medical"&&r.jsx("div",{className:"medical-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(uG,{})}),e==="motion-detect"&&r.jsx("div",{className:"motion-detect-tab-content",style:{height:"100%"},children:r.jsx(NDe,{})})]})]})},dG=6048e5,CDe=864e5,hG=6e4,fG=36e5,vB=Symbol.for("constructDateFrom");function Lo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&vB in t?t[vB](e):t instanceof Date?new t.constructor(e):new Date(e)}function di(t,e){return Lo(e||t,t)}function TDe(t,e,n){const a=di(t,n==null?void 0:n.in);if(isNaN(e))return Lo(t,NaN);const i=a.getDate(),s=Lo(t,a.getTime());s.setMonth(a.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(a.setFullYear(s.getFullYear(),s.getMonth(),i),a)}let kDe={};function LS(){return kDe}function yb(t,e){var l,c,d,f;const n=LS(),a=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=di(t,e==null?void 0:e.in),s=i.getDay(),o=(s<a?7:0)+s-a;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function EN(t,e){return yb(t,{...e,weekStartsOn:1})}function pG(t,e){const n=di(t,e==null?void 0:e.in),a=n.getFullYear(),i=Lo(n,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const s=EN(i),o=Lo(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=EN(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=l.getTime()?a:a-1}function bB(t){const e=di(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ADe(t,...e){const n=Lo.bind(null,e.find(a=>typeof a=="object"));return e.map(n)}function jB(t,e){const n=di(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function EDe(t,e,n){const[a,i]=ADe(n==null?void 0:n.in,t,e),s=jB(a),o=jB(i),l=+s-bB(s),c=+o-bB(o);return Math.round((l-c)/CDe)}function PDe(t,e){const n=pG(t,e),a=Lo(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),EN(a)}function ODe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function jO(t){return!(!ODe(t)&&typeof t!="number"||isNaN(+di(t)))}function DDe(t,e){const n=di(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const MDe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IDe=(t,e,n)=>{let a;const i=MDe[t];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function RA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const RDe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LDe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},FDe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$De={date:RA({formats:RDe,defaultWidth:"full"}),time:RA({formats:LDe,defaultWidth:"full"}),dateTime:RA({formats:FDe,defaultWidth:"full"})},BDe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zDe=(t,e,n,a)=>BDe[t];function iv(t){return(e,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let i;if(a==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const qDe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},UDe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},VDe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},HDe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},GDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},WDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},YDe=(t,e)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},KDe={ordinalNumber:YDe,era:iv({values:qDe,defaultWidth:"wide"}),quarter:iv({values:UDe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:iv({values:VDe,defaultWidth:"wide"}),day:iv({values:HDe,defaultWidth:"wide"}),dayPeriod:iv({values:GDe,defaultWidth:"wide",formattingValues:WDe,defaultFormattingWidth:"wide"})};function sv(t){return(e,n={})=>{const a=n.width,i=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?XDe(l,p=>p.test(o)):QDe(l,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function QDe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function XDe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function JDe(t){return(e,n={})=>{const a=e.match(t.matchPattern);if(!a)return null;const i=a[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const ZDe=/^(\d+)(th|st|nd|rd)?/i,eMe=/\d+/i,tMe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nMe={any:[/^b/i,/^(a|c)/i]},rMe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aMe={any:[/1/i,/2/i,/3/i,/4/i]},iMe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sMe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oMe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lMe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cMe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uMe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},dMe={ordinalNumber:JDe({matchPattern:ZDe,parsePattern:eMe,valueCallback:t=>parseInt(t,10)}),era:sv({matchPatterns:tMe,defaultMatchWidth:"wide",parsePatterns:nMe,defaultParseWidth:"any"}),quarter:sv({matchPatterns:rMe,defaultMatchWidth:"wide",parsePatterns:aMe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:sv({matchPatterns:iMe,defaultMatchWidth:"wide",parsePatterns:sMe,defaultParseWidth:"any"}),day:sv({matchPatterns:oMe,defaultMatchWidth:"wide",parsePatterns:lMe,defaultParseWidth:"any"}),dayPeriod:sv({matchPatterns:cMe,defaultMatchWidth:"any",parsePatterns:uMe,defaultParseWidth:"any"})},hMe={code:"en-US",formatDistance:IDe,formatLong:$De,formatRelative:zDe,localize:KDe,match:dMe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fMe(t,e){const n=di(t,e==null?void 0:e.in);return EDe(n,DDe(n))+1}function pMe(t,e){const n=di(t,e==null?void 0:e.in),a=+EN(n)-+PDe(n);return Math.round(a/dG)+1}function mG(t,e){var f,p,g,x;const n=di(t,e==null?void 0:e.in),a=n.getFullYear(),i=LS(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(g=i.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,o=Lo((e==null?void 0:e.in)||t,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const l=yb(o,e),c=Lo((e==null?void 0:e.in)||t,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const d=yb(c,e);return+n>=+l?a+1:+n>=+d?a:a-1}function mMe(t,e){var l,c,d,f;const n=LS(),a=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=mG(t,e),s=Lo((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,a),s.setHours(0,0,0,0),yb(s,e)}function gMe(t,e){const n=di(t,e==null?void 0:e.in),a=+yb(n,e)-+mMe(n,e);return Math.round(a/dG)+1}function mr(t,e){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return n+a}const qu={y(t,e){const n=t.getFullYear(),a=n>0?n:1-n;return mr(e==="yy"?a%100:a,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):mr(n+1,2)},d(t,e){return mr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return mr(t.getHours()%12||12,e.length)},H(t,e){return mr(t.getHours(),e.length)},m(t,e){return mr(t.getMinutes(),e.length)},s(t,e){return mr(t.getSeconds(),e.length)},S(t,e){const n=e.length,a=t.getMilliseconds(),i=Math.trunc(a*Math.pow(10,n-3));return mr(i,e.length)}},Nm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wB={G:function(t,e,n){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const a=t.getFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return qu.y(t,e)},Y:function(t,e,n,a){const i=mG(t,a),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return mr(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):mr(s,e.length)},R:function(t,e){const n=pG(t);return mr(n,e.length)},u:function(t,e){const n=t.getFullYear();return mr(n,e.length)},Q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return mr(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return mr(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,n){const a=t.getMonth();switch(e){case"M":case"MM":return qu.M(t,e);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,n){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return mr(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,n,a){const i=gMe(t,a);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):mr(i,e.length)},I:function(t,e,n){const a=pMe(t);return e==="Io"?n.ordinalNumber(a,{unit:"week"}):mr(a,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):qu.d(t,e)},D:function(t,e,n){const a=fMe(t);return e==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):mr(a,e.length)},E:function(t,e,n){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return mr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return mr(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const a=t.getDay(),i=a===0?7:a;switch(e){case"i":return String(i);case"ii":return mr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const a=t.getHours();let i;switch(a===12?i=Nm.noon:a===0?i=Nm.midnight:i=a/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const a=t.getHours();let i;switch(a>=17?i=Nm.evening:a>=12?i=Nm.afternoon:a>=4?i=Nm.morning:i=Nm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return qu.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):qu.H(t,e)},K:function(t,e,n){const a=t.getHours()%12;return e==="Ko"?n.ordinalNumber(a,{unit:"hour"}):mr(a,e.length)},k:function(t,e,n){let a=t.getHours();return a===0&&(a=24),e==="ko"?n.ordinalNumber(a,{unit:"hour"}):mr(a,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):qu.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):qu.s(t,e)},S:function(t,e){return qu.S(t,e)},X:function(t,e,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return SB(a);case"XXXX":case"XX":return Vh(a);case"XXXXX":case"XXX":default:return Vh(a,":")}},x:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"x":return SB(a);case"xxxx":case"xx":return Vh(a);case"xxxxx":case"xxx":default:return Vh(a,":")}},O:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+NB(a,":");case"OOOO":default:return"GMT"+Vh(a,":")}},z:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+NB(a,":");case"zzzz":default:return"GMT"+Vh(a,":")}},t:function(t,e,n){const a=Math.trunc(+t/1e3);return mr(a,e.length)},T:function(t,e,n){return mr(+t,e.length)}};function NB(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=Math.trunc(a/60),s=a%60;return s===0?n+String(i):n+String(i)+e+mr(s,2)}function SB(t,e){return t%60===0?(t>0?"-":"+")+mr(Math.abs(t)/60,2):Vh(t,e)}function Vh(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=mr(Math.trunc(a/60),2),s=mr(a%60,2);return n+i+e+s}const _B=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},gG=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},yMe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return _B(t,e);let s;switch(a){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",_B(a,e)).replace("{{time}}",gG(i,e))},xMe={p:gG,P:yMe},vMe=/^D+$/,bMe=/^Y+$/,jMe=["D","DD","YY","YYYY"];function wMe(t){return vMe.test(t)}function NMe(t){return bMe.test(t)}function SMe(t,e,n){const a=_Me(t,e,n);if(console.warn(a),jMe.includes(t))throw new RangeError(a)}function _Me(t,e,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const CMe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TMe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kMe=/^'([^]*?)'?$/,AMe=/''/g,EMe=/[a-zA-Z]/;function hf(t,e,n){var f,p,g,x;const a=LS(),i=a.locale??hMe,s=a.firstWeekContainsDate??((p=(f=a.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=a.weekStartsOn??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=di(t,n==null?void 0:n.in);if(!jO(l))throw new RangeError("Invalid time value");let c=e.match(TMe).map(b=>{const j=b[0];if(j==="p"||j==="P"){const S=xMe[j];return S(b,i.formatLong)}return b}).join("").match(CMe).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const j=b[0];if(j==="'")return{isToken:!1,value:PMe(b)};if(wB[j])return{isToken:!0,value:b};if(j.match(EMe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(b=>{if(!b.isToken)return b.value;const j=b.value;(NMe(j)||wMe(j))&&SMe(j,e,String(t));const S=wB[j[0]];return S(l,j,i.localize,d)}).join("")}function PMe(t){const e=t.match(kMe);return e?e[1].replace(AMe,"'"):t}function LA(t,e){return+di(t)<+di(e)}function CB(t,e){const n=()=>Lo(e==null?void 0:e.in,NaN),i=IMe(t);let s;if(i.date){const d=RMe(i.date,2);s=LMe(d.restDateString,d.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(i.time&&(l=FMe(i.time),isNaN(l)))return n();if(i.timezone){if(c=$Me(i.timezone),isNaN(c))return n()}else{const d=new Date(o+l),f=di(0,e==null?void 0:e.in);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return di(o+l+c,e==null?void 0:e.in)}const Hj={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},OMe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,DMe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,MMe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function IMe(t){const e={},n=t.split(Hj.dateTimeDelimiter);let a;if(n.length>2)return e;if(/:/.test(n[0])?a=n[0]:(e.date=n[0],a=n[1],Hj.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Hj.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){const i=Hj.timezone.exec(a);i?(e.time=a.replace(i[1],""),e.timezone=i[1]):e.time=a}return e}function RMe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(n);if(!a)return{year:NaN,restDateString:""};const i=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((a[1]||a[2]).length)}}function LMe(t,e){if(e===null)return new Date(NaN);const n=t.match(OMe);if(!n)return new Date(NaN);const a=!!n[4],i=ov(n[1]),s=ov(n[2])-1,o=ov(n[3]),l=ov(n[4]),c=ov(n[5])-1;if(a)return VMe(e,l,c)?BMe(e,l,c):new Date(NaN);{const d=new Date(0);return!qMe(e,s,o)||!UMe(e,i)?new Date(NaN):(d.setUTCFullYear(e,s,Math.max(i,o)),d)}}function ov(t){return t?parseInt(t):1}function FMe(t){const e=t.match(DMe);if(!e)return NaN;const n=FA(e[1]),a=FA(e[2]),i=FA(e[3]);return HMe(n,a,i)?n*fG+a*hG+i*1e3:NaN}function FA(t){return t&&parseFloat(t.replace(",","."))||0}function $Me(t){if(t==="Z")return 0;const e=t.match(MMe);if(!e)return 0;const n=e[1]==="+"?-1:1,a=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return GMe(a,i)?n*(a*fG+i*hG):NaN}function BMe(t,e,n){const a=new Date(0);a.setUTCFullYear(t,0,4);const i=a.getUTCDay()||7,s=(e-1)*7+n+1-i;return a.setUTCDate(a.getUTCDate()+s),a}const zMe=[31,null,31,30,31,30,31,31,30,31,30,31];function yG(t){return t%400===0||t%4===0&&t%100!==0}function qMe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(zMe[e]||(yG(t)?29:28))}function UMe(t,e){return e>=1&&e<=(yG(t)?366:365)}function VMe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function HMe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function GMe(t,e){return e>=0&&e<=59}const AM=({isEmbedded:t=!1})=>{const{customColumnsConfig:e,refetch:n}=tS(),a=e.lab_tests||[],[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState(!1),[b,j]=v.useState(null),[S,_]=v.useState(!1),[T,C]=v.useState(null),P=v.useRef(null),[k,O]=v.useState(!1),[I,F]=v.useState(null),[B,$]=v.useState(!1),[L,V]=v.useState(!1),[H,te]=v.useState(null),[X,q]=v.useState({name:"",description:"",price:"",default_parameters:[]}),Y=v.useCallback(async()=>{x(!0),j(null),C(null),F(null);try{const Q=await le("/api/lab-tests");if(!Q.ok)throw new Error(`HTTP error! status: ${Q.status}`);const ie=await Q.json();d(ie)}catch(Q){console.error("Error fetching lab tests:",Q),j(Q.message||"Failed to fetch lab tests.")}finally{x(!1)}},[]);v.useEffect(()=>{Y()},[Y]);const se=Q=>{const{name:ie,value:xe}=Q.target;q(ee=>({...ee,[ie]:xe}))},G=(Q,ie,xe)=>{const ee=[...X.default_parameters],Se=ee[Q];if(ie==="type")switch(Se.type=xe,xe){case"number":Se.defaultValue=0,Se.lower_limit=null,Se.upper_limit=null,Se.unit="";break;case"boolean":Se.defaultValue=!1,Se.lower_limit=void 0,Se.upper_limit=void 0,Se.unit=void 0;break;case"string":default:Se.defaultValue="",Se.lower_limit=void 0,Se.upper_limit=void 0,Se.unit=void 0;break}else ie==="defaultValue"?Se.type==="number"?Se.defaultValue=parseFloat(xe)||0:(Se.type,Se.defaultValue=xe):ie==="lower_limit"||ie==="upper_limit"?Se[ie]=xe===""?null:parseFloat(xe):Se[ie]=xe;q(qe=>({...qe,default_parameters:ee}))},z=()=>{q(Q=>({...Q,default_parameters:[...Q.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},ce=Q=>{q(ie=>({...ie,default_parameters:ie.default_parameters.filter((xe,ee)=>ee!==Q)}))},we=async Q=>{Q.preventDefault(),x(!0),j(null);const ie=H!==null,xe=ie?`/api/lab-tests/${H}`:"/api/lab-tests",ee=ie?"PUT":"POST";try{const Se=await le(xe,{method:ee,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:X.name,description:X.description,price:parseFloat(X.price),default_parameters:X.default_parameters})});if(!Se.ok){const qe=await Se.json();throw new Error(qe.message||`HTTP error! status: ${Se.status}`)}V(!1),te(null),q({name:"",description:"",price:"",default_parameters:[]}),Y()}catch(Se){console.error(`Error ${ie?"updating":"adding"} lab test:`,Se),j(Se.message||`Failed to ${ie?"update":"add"} lab test.`)}finally{x(!1)}},K=()=>{te(null),q({name:"",description:"",price:"",default_parameters:[]}),V(!0)},Ie=Q=>{if(H===Q.id)te(null);else{te(Q.id);const ie=(Q.default_parameters||[]).map(xe=>({...xe,unit:xe.unit||"",lower_limit:xe.lower_limit===void 0?null:xe.lower_limit,upper_limit:xe.upper_limit===void 0?null:xe.upper_limit}));q({name:Q.name,description:Q.description||"",price:Q.price,default_parameters:ie}),V(!1)}},We=async Q=>{if(window.confirm("Are you sure you want to delete this lab test?")){x(!0),j(null);try{const ie=await le(`/api/lab-tests/${Q}`,{method:"DELETE"});if(!ie.ok){const xe=await ie.json();throw new Error(xe.message||`HTTP error! status: ${ie.status}`)}Y()}catch(ie){console.error("Error deleting lab test:",ie),j(ie.message||"Failed to delete lab test.")}finally{x(!1)}}},Re=()=>{V(!1),te(null),j(null),q({name:"",description:"",price:"",default_parameters:[]})},Fe=async Q=>{if(!Q){C("No file selected.");return}_(!0),C(null),j(null);const ie=new FormData;ie.append("file",Q);try{const xe=await le("/api/lab-tests/import",{method:"POST",body:ie});if(!xe.ok){const ee=await xe.json();throw new Error(ee.message||`Import failed: ${xe.statusText}`)}Y()}catch(xe){console.error("Error importing lab tests from Excel:",xe),C(xe.message||"Failed to import lab tests from Excel.")}finally{_(!1)}},ve=async Q=>{if(Q.target.files&&Q.target.files[0]){const ie=Q.target.files[0];await Fe(ie),Q.target&&(Q.target.value="")}},ae=async()=>{if(window.confirm("Are you sure you want to import default biochemistry and pathology tests? This will add new tests and may duplicate existing ones if names match.")){O(!0),F(null),j(null);try{const Q=await le("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"}});if(!Q.ok){const ie=await Q.json();throw new Error(ie.message||`Default import failed: ${Q.statusText}`)}Y()}catch(Q){console.error("Error importing default lab tests:",Q),F(Q.message||"Failed to import default lab tests.")}finally{O(!1)}}},je=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){$(!0),j(null),C(null),F(null);try{const Q=await le("/api/lab-tests/all",{method:"DELETE"});if(!Q.ok){const ie=await Q.json();throw new Error(ie.message||`Delete all failed: ${Q.statusText}`)}Y()}catch(Q){console.error("Error deleting all lab tests:",Q),j(Q.message||"Failed to delete all lab tests.")}finally{$(!1)}}},ue=g||S||k||B,me=v.useMemo(()=>new to(c,{keys:["name","description","default_parameters.name"],threshold:.3,ignoreLocation:!0}),[c]),oe=v.useMemo(()=>f?me.search(f).map(Q=>Q.item):c,[c,f,me]);return r.jsxs("div",{className:`lab-inventory-card ${t?"embedded":""}`,style:t?{border:"none",boxShadow:"none",padding:0}:{},children:[!t&&r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsx("div",{className:"mb-4",style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:r.jsx("input",{type:"text",placeholder:"Search by test name...",value:f,onChange:Q=>p(Q.target.value),className:"lab-inventory-input",style:{maxWidth:"300px",marginRight:"10px"}})}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:K,className:"lab-inventory-button",disabled:ue,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var Q;return(Q=P.current)==null?void 0:Q.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:ue,children:S?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:P,onChange:ve,accept:".xlsx, .xls",style:{display:"none"},disabled:S}),r.jsx("button",{onClick:ae,className:"lab-inventory-button lab-inventory-button-secondary",disabled:ue,children:k?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:je,className:"lab-inventory-button lab-inventory-button-danger",disabled:ue,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:B?"Deleting All...":"Delete All Tests"}),r.jsxs("button",{onClick:()=>s(!0),className:"lab-inventory-button lab-inventory-button-secondary",disabled:ue,title:"Manage Custom Columns",children:[r.jsx(ld,{size:16,style:{marginRight:"4px"}})," Columns"]}),r.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"auto"},children:[r.jsxs("button",{onClick:()=>l(!1),className:`view-mode-btn ${o?"":"active"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>l(!0),className:`view-mode-btn ${o?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(gf,{size:18})," Excel"]})]})]}),b&&r.jsx("div",{className:"error-text mb-4",children:b}),T&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",T]}),I&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",I]}),L&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:we,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:X.name,onChange:se,className:"lab-inventory-input",required:!0,disabled:ue})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:X.description,onChange:se,rows:3,className:"lab-inventory-input",disabled:ue})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:X.price,onChange:se,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:ue})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),X.default_parameters.map((Q,ie)=>{var xe,ee;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:Q.name,onChange:Se=>G(ie,"name",Se.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:Q.type,onChange:Se=>G(ie,"type",Se.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),Q.type==="boolean"?r.jsxs("select",{value:Q.defaultValue.toString(),onChange:Se=>G(ie,"defaultValue",Se.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:Q.type==="number"?"number":"text",placeholder:"Default Value",value:Q.defaultValue.toString(),onChange:Se=>G(ie,"defaultValue",Se.target.value),className:"lab-inventory-input"}),Q.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:Q.lower_limit===null?"":((xe=Q.lower_limit)==null?void 0:xe.toString())??"",onChange:Se=>G(ie,"lower_limit",Se.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:Q.upper_limit===null?"":((ee=Q.upper_limit)==null?void 0:ee.toString())??"",onChange:Se=>G(ie,"upper_limit",Se.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:Q.unit||"",onChange:Se=>G(ie,"unit",Se.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ce(ie),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},ie)}),r.jsx("button",{type:"button",onClick:z,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Re,className:"lab-inventory-button lab-inventory-button-secondary",disabled:ue,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:ue,children:g?"Saving...":"Add Test"})]})]})]}),ue&&!L?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"mb-4 flex gap-2",children:[1,2,3,4,5].map(Q=>r.jsx(Z,{width:100,height:36},Q))}),r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"}),r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(Q=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:"60%",height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:"90%",height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:50,height:20})]})})]},Q))})]}),r.jsx("p",{className:"loading-text mt-2 text-sm italic text-gray-500",children:S?"Importing Excel data...":k?"Importing default data...":"Loading tests..."})]}):null,!ue&&oe.length===0&&!b&&!T&&!I&&r.jsx("p",{className:"no-data-message",children:f?`No lab tests found matching "${f}".`:"No lab tests found. Add one or import from Excel to get started."}),o&&oe.length>0?r.jsx(Ib,{columns:[{key:"name",label:"Test Name",editable:!0,type:"text"},{key:"description",label:"Description",editable:!0,type:"text"},{key:"price",label:"Price",editable:!0,type:"number"}],data:oe,editable:!0,showRowNumbers:!0,title:"Lab Test Inventory",onSave:async Q=>{const ie=Q.map(async xe=>{const ee=c.find(Se=>Se.id===xe.id);if(ee&&(ee.name!==xe.name||ee.price!==xe.price||ee.description!==xe.description))return le(`/api/lab-tests/${xe.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)})});try{await Promise.all(ie),Y()}catch(xe){alert("Error saving changes"),console.error(xe)}}}):!ue&&oe.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:oe.map(Q=>{const ie=H===Q.id,xe=Q.price&&typeof Q.price=="string"?parseFloat(Q.price):NaN,ee=isNaN(xe)?"0.00":xe.toFixed(2);return r.jsxs(Ce.Fragment,{children:[r.jsxs("tr",{onClick:()=>Ie(Q),style:{cursor:"pointer"},children:[r.jsx("td",{children:Q.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:Q.description||"-"}),r.jsxs("td",{children:["",ee]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:Se=>{Se.stopPropagation(),Ie(Q)},className:"lab-inventory-link",disabled:ue,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:Se=>{Se.stopPropagation(),We(Q.id)},className:"lab-inventory-link",disabled:ue,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),a.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:a.map(Se=>{var qe;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[Se.label,":"]})," ",(qe=Q.custom_fields)!=null&&qe[Se.key]?String(Q.custom_fields[Se.key]):"-"]},Se.key)})})})}),ie&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:we,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:X.name,onChange:se,className:"lab-inventory-input",required:!0,disabled:ue})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:X.description,onChange:se,rows:3,className:"lab-inventory-input",disabled:ue})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:X.price,onChange:se,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:ue})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),X.default_parameters.map((Se,qe)=>{var Ge,Ne;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:Se.name,onChange:ne=>G(qe,"name",ne.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:Se.type,onChange:ne=>G(qe,"type",ne.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),Se.type==="boolean"?r.jsxs("select",{value:Se.defaultValue.toString(),onChange:ne=>G(qe,"defaultValue",ne.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:Se.type==="number"?"number":"text",placeholder:"Default Value",value:Se.defaultValue.toString(),onChange:ne=>G(qe,"defaultValue",ne.target.value),className:"lab-inventory-input"}),Se.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:Se.lower_limit===null?"":((Ge=Se.lower_limit)==null?void 0:Ge.toString())??"",onChange:ne=>G(qe,"lower_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:Se.upper_limit===null?"":((Ne=Se.upper_limit)==null?void 0:Ne.toString())??"",onChange:ne=>G(qe,"upper_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:Se.unit||"",onChange:ne=>G(qe,"unit",ne.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ce(qe),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},qe)}),r.jsx("button",{type:"button",onClick:z,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Re,className:"lab-inventory-button lab-inventory-button-secondary",disabled:ue,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:ue,children:g?"Saving...":"Update Test"})]})]})]})})})]},Q.id)})})]})]}),r.jsx(kM,{isOpen:i,onClose:()=>s(!1),entityType:"lab_tests",entityLabel:"Lab Tests",currentConfig:e,onConfigUpdated:()=>{n()}})]})},WMe=t=>{let e="";if(!t.report_content)return"No report content available.";e+=`*Report Date:* ${t.report_date?new Date(t.report_date).toLocaleDateString():"N/A"}

`;try{const n=JSON.parse(t.report_content);typeof n=="object"&&n!==null&&t.tests?t.tests.forEach((a,i)=>{e+=`*Test: ${a.name}*
`,n[a.id]?Object.entries(n[a.id]).forEach(([s,o])=>{var f;const l=(f=a.default_parameters)==null?void 0:f.find(p=>p.name===s);let c=String(o),d="";if(l){const p=l.unit?` _${l.unit}_`:"";if(l.type==="boolean"){const g=o===!0||o==="true";c=g?"*Reactive*":"Non-Reactive",g||(d="`Normal: Non-Reactive`")}else if(l.type==="number"){const g=typeof o=="string"?parseFloat(o):typeof o=="number"?o:NaN;if(l.lower_limit!=null||l.upper_limit!=null){let x=[];l.lower_limit!=null&&x.push(`${l.lower_limit}`),l.upper_limit!=null&&x.push(`${l.upper_limit}`),d=`\`Normal: ${x.join(" - ")}\`${p}`,!isNaN(g)&&(l.lower_limit!=null&&g<l.lower_limit||l.upper_limit!=null&&g>l.upper_limit)&&(c=`*${c}*`)}}l.unit&&(c+=p)}e+=`${s}: ${c}
`,d&&((l==null?void 0:l.type)==="boolean"&&(o===!0||o==="true")||(e+=`${d}
`))}):e+=`_No parameters reported for this test._
`,i<t.tests.length-1&&(e+=`
`)}):e+=t.report_content}catch{e+=t.report_content}return e},EM=t=>{var o;if(!((o=t==null?void 0:t.Patient)!=null&&o.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(t!=null&&t.report_content)){alert("Cannot share report: No report content is available to share.");return}const e=t.Patient.name||"Patient",n=WMe(t),a=`Hello ${e},

Your lab report is ready.

${n}`,s=`https://wa.me/${YMe(t.Patient.phone)}?text=${encodeURIComponent(a)}`;window.open(s,"_blank")},YMe=t=>{let e=t.replace(/\D/g,"");const n=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,a=e.match(n);return a?e="91"+a[1]:e.startsWith("91")||(e="91"+e),e},TB=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState("orders"),[g,x]=v.useState(1),[b]=v.useState(20),[j,S]=v.useState(0),_=v.useMemo(()=>Math.ceil(j/b),[j,b]),T=v.useCallback(async(L=1,V="")=>{s(!0),d(null);try{const H=new URLSearchParams({page:String(L),limit:String(b)});V&&H.append("search",V);const te=await le(`/api/lab?${H.toString()}`);if(!te.ok)throw new Error(`HTTP error! status: ${te.status}`);const X=await te.json(),q=X.orders.map(Y=>{var se,G;return{id:Y.id,labTokenNumber:String(Y.lab_token_number??"N/A"),patientName:((se=Y.Patient)==null?void 0:se.name)||"N/A",patientId:Y.patient_id,patientTokenNumber:String(((G=Y.Patient)==null?void 0:G.patient_token_number)??"N/A"),tests:(Y.tests||[]).map(z=>z.name||"Unknown Test"),date:hf(new Date(Y.createdAt),"yyyy-MM-dd"),status:Y.status,reportId:Y.reportId,billId:Y.billId}});e(q),S(X.totalCount),x(L)}catch(H){console.error("Failed to fetch lab orders:",H),d(H instanceof Error?H.message:"An unknown error occurred"),e([]),S(0)}finally{s(!1),l(!1)}},[b]);v.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${g}, Search term: "${n}"`),n.length===0||n.length>=2?(console.log(`Condition met (length ${n.length}). Fetching orders...`),T(g,n)):console.log(`Condition not met (length ${n.length}). Not fetching.`)},[T,g,n]),v.useEffect(()=>{const L=setTimeout(()=>{n.length>=2?g!==1&&x(1):n.length<2&&g!==1&&x(1)},1e3);return()=>{clearTimeout(L)}},[n]);const C=async(L,V)=>{console.log(`Updating order ${L} to status ${V}`);try{const H=await le(`/api/lab/${L}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:V})});if(!H.ok){const te=await H.json();throw new Error(te.message||`Failed to update status: ${H.status}`)}if(V==="completed"){const te=await le(`/api/lab/orders/${L}/report`);if(te.ok){const X=await te.json();EM(X)}}await T(g,n),console.log(`Order ${L} status updated to ${V}, refetching page ${g}`)}catch(H){console.error("Error updating status:",H),alert(`Failed to update status: ${H instanceof Error?H.message:"Unknown error"}`)}},{openCommandBar:P}=Oc(),k=Mt(),O=L=>{if(!L){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}L.billId?(console.log(`Navigating to existing bill for Bill ID: ${L.billId}, Patient: ${L.patientName}`),k("/billing",{state:{billId:L.billId,patientId:L.patientId,patientName:L.patientName,billType:"lab"}})):(console.log(`Navigating to LabBillingPage for Order ID: ${L.id}`),k(`/dashboard/lab-billing/${L.id}`))},I=L=>{L&&L.id?k(`/lab/report/${L.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},F=L=>{switch(L){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:L,className:"status-badge"}}};if(i&&o)return r.jsxs("div",{className:"admin-panel-container",children:[r.jsx("div",{className:"admin-nav-bar",children:[1,2,3,4].map(L=>r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px",margin:"0 8px"}},L))}),r.jsxs("div",{className:"admin-content-section",style:{padding:"20px"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx(Z,{width:200,height:32}),r.jsx(Z,{width:300,height:40})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},L))})]})})]})]});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(Xr,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:c}),r.jsx("button",{onClick:()=>T(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const B=()=>{g>1&&x(L=>L-1)},$=()=>{g<_&&x(L=>L+1)};return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("div",{className:"admin-nav-bar",children:[r.jsxs("button",{onClick:()=>k(-1),className:"admin-nav-button",title:"Back",children:[r.jsx(rn,{})," Back"]}),r.jsxs("button",{onClick:()=>p("orders"),className:`admin-nav-button ${f==="orders"?"active":""}`,children:[r.jsx(yE,{})," Orders"]}),r.jsx("button",{onClick:()=>k("/create-lab-order"),className:"admin-nav-button",children:"Create New Lab Order"}),r.jsxs("button",{onClick:()=>p("inventory"),className:`admin-nav-button ${f==="inventory"?"active":""}`,children:[r.jsx(jQ,{})," Inventory"]}),r.jsxs("button",{onClick:()=>P(),className:"admin-nav-button",children:[r.jsx(FO,{})," Newton's AI"]})]}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[f==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:n,onChange:L=>a(L.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(Mn,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[i&&!c&&t.length===0&&[1,2,3,4,5].map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},L)),!i&&!c&&t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."})}),!i&&!c&&t.map(L=>{const V=F(L.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:L.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",L.patientTokenNumber]})]}),r.jsx("td",{children:L.tests.map((H,te)=>r.jsx("div",{children:H},te))}),r.jsx("td",{className:"hidden md:table-cell",children:L.date}),r.jsx("td",{children:r.jsx("span",{className:V.className,children:V.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>O(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?k(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},L.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[i&&!c&&t.length===0&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(L=>r.jsx("div",{className:"lab-order-card",children:r.jsx(Z,{width:"100%",height:150})},L))}),!i&&!c&&t.length===0&&r.jsx("div",{className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."}),!i&&!c&&t.map(L=>{const V=F(L.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:L.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",L.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:L.date})]}),r.jsx("span",{className:`${V.className} lab-card-status-pill`,children:V.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),L.tests.map((H,te)=>r.jsx("div",{className:"lab-card-test-item",children:H},te)),L.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>O(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?k(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},L.id)})]}),!i&&j>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(g-1)*b+1})," ","to"," ",r.jsx("strong",{children:Math.min(g*b,j)})," ","of"," ",r.jsx("strong",{children:j})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:B,disabled:g===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(Cb,{size:18})}),r.jsxs("span",{children:["Page ",g," of ",_]}),r.jsx("button",{onClick:$,disabled:g===_,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(dd,{size:18})})]})]})]}),f==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(AM,{})]})]})})," "]})},kB=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(null),c=Mt(),d=v.useRef(null),{openCommandBar:f}=Oc(),p=ss(),g=F=>{F&&(p.prefetchQuery({queryKey:Ut.patients.context(F),queryFn:async()=>{const B=await le(`/api/patients/${F}/context`);if(!B.ok)throw new Error("Failed to fetch patient context");return B.json()},staleTime:5*60*1e3}),p.prefetchQuery({queryKey:Ut.patientDebts.balance(F),queryFn:async()=>{const B=await le(`/api/patient-debts/${F}/balance`);return B.ok?B.json():{netDebt:0}},staleTime:1*60*1e3}),p.prefetchQuery({queryKey:Ut.queue.latest(F),queryFn:async()=>{const B=await le(`/api/queue/patient/${F}/latest`);if(!B.ok)throw new Error("Failed to fetch latest queue status");const $=await B.json();return $!=null&&$._id&&p.prefetchQuery({queryKey:Ut.queue.entry($._id),queryFn:async()=>{const L=await le(`/api/queue/doctor/complaint/${$._id}`);if(!L.ok)throw new Error("Failed to fetch complaint record");return L.json()},staleTime:1*60*1e3}),$},staleTime:5e3}),p.prefetchQuery({queryKey:Ut.dental.records(F),queryFn:async()=>{const B=await le(`/api/dental/patient/${F}`);if(!B.ok)throw new Error("Failed to fetch dental records");return B.json()},staleTime:5*60*1e3}))},[x,b]=v.useState(1),[j,S]=v.useState(1),_=10,T=v.useCallback(async(F,B,$)=>{s(!0),l(null);try{let L=`/api/pharmacy-orders?page=${F}&limit=${B}`;$&&$.trim()!==""&&(L+=`&search=${encodeURIComponent($.trim())}`);const V=await le(L);if(!V.ok)throw new Error(`Failed to fetch orders: ${V.statusText} (${V.status})`);const H=await V.json();H&&Array.isArray(H.orders)?(e(H.orders),S(H.totalPages||1),b(H.currentPage||F)):e([])}catch(L){console.error("Failed to fetch pharmacy orders:",L),l(L.message||"Failed to fetch orders."),e([])}finally{s(!1)}},[]);v.useEffect(()=>(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{T(n?1:x,_,n)},500),()=>{d.current&&clearTimeout(d.current)}),[n,x,T]);const C=F=>c(`/dashboard/edit-pharmacy-order/${F}`),P=F=>c(`/dashboard/edit-complaint/patient/${F.patientId}`),k=F=>{const B=t.find($=>$.id===F);if(B){const $=B.medications.map(L=>({name:L.name,pack_quantity:L.pack_quantity,loose_quantity:L.loose_quantity,price:L.price??0,pack_price:L.pack_price,loose_price:L.loose_price,total_price:L.total_price,isLoose:L.isLoose,unit:L.unit,drug_id:L.drug_id?String(L.drug_id):null,tabletsPerDay:L.tabletsPerDay,numberOfDays:L.numberOfDays,directions_to_use:L.directions_to_use,discount_percentage:0,batch:L.batch,expiry_date:L.expiry_date}));c(`/dashboard/pharmacy-billing/${F}`,{state:{initialItems:$}})}},O=async(F,B)=>{const $=t.find(L=>L.id===F);if($)try{const L=await le(`/api/pharmacy-orders/${F}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:B,medications:$.medications})});if(L.ok){const V=await L.json();e(H=>H.map(te=>te.id===V.id?{...te,status:V.status}:te))}}catch(L){console.error("Status update failed",L),alert("Failed to update status")}},I=F=>`pq-pill ${F}`;return r.jsxs("div",{className:"pq-container",children:[r.jsxs("div",{className:"pq-header",children:[r.jsxs("div",{className:"pq-nav-actions",children:[r.jsxs("button",{onClick:()=>c("/dashboard/add-order"),className:"pq-btn",children:[r.jsx(Cs,{})," Add Order"]}),r.jsxs("button",{onClick:()=>c("/dashboard/inventory"),className:"pq-btn",children:[r.jsx(yf,{})," Inventory"]}),r.jsxs("button",{onClick:()=>f(),className:"pq-btn",children:[r.jsx(FO,{})," Newton's AI"]}),r.jsxs("button",{onClick:()=>c("/dashboard/distributors"),className:"pq-btn",children:[r.jsx(yf,{})," Distributors"]})]}),r.jsxs("div",{className:"pq-search-wrap",children:[r.jsx(Mn,{className:"pq-search-icon"}),r.jsx("input",{className:"pq-search-input",placeholder:"Search orders...",value:n,onChange:F=>a(F.target.value)})]})]}),r.jsxs("div",{className:"pq-card",children:[r.jsxs("div",{className:"pq-card-content",children:[i&&t.length===0&&r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3].map(F=>r.jsx(Z,{height:40,className:"mb-2"},F))}),o&&r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]}),!i&&!o&&t.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."}),!i&&t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pq-table-wrapper",children:r.jsxs("table",{className:"pq-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map(F=>r.jsxs("tr",{className:"pq-row",onClick:()=>P(F),onMouseEnter:()=>g(F.patientId),children:[r.jsxs("td",{children:[r.jsx("div",{className:"pq-text-bold",children:F.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),r.jsx("td",{children:r.jsxs("div",{className:"pq-nested-table-wrap",children:[r.jsx("table",{className:"pq-nested-table",children:r.jsx("tbody",{children:F.medications.map((B,$)=>r.jsxs("tr",{children:[r.jsx("td",{className:"pq-text-bold",children:B.name}),r.jsxs("td",{children:[B.pack_quantity>0&&`Pack: ${B.pack_quantity} `,B.loose_quantity>0&&`Loose: ${B.loose_quantity}`]}),r.jsx("td",{className:"pq-text-sm",children:B.directions_to_use})]},$))})}),F.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"mt-1 text-xs opacity-75 pq-markdown",children:[r.jsx("strong",{children:"Note:"})," ",r.jsx(bf,{remarkPlugins:[jf],children:F.prescriptionForUnavailableDrugs})]})]})}),r.jsx("td",{className:"pq-text-sm",children:new Date(F.date).toLocaleDateString()}),r.jsxs("td",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),r.jsx("td",{children:r.jsx("span",{className:I(F.status),children:F.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pq-actions",children:[F.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:B=>{B.stopPropagation(),C(F.id)},className:"pq-action-btn pq-btn-edit",children:[r.jsx(Ii,{size:12})," Edit"]}),r.jsxs("button",{onClick:B=>{B.stopPropagation(),k(F.id)},className:"pq-action-btn pq-btn-bill",children:[r.jsx(mf,{size:12})," Bill"]})]}),F.status==="billed"&&r.jsxs("button",{onClick:B=>{B.stopPropagation(),O(F.id,"dispensed")},className:"pq-action-btn pq-btn-dispense",children:[r.jsx(Ml,{size:12})," Dispense"]}),(F.status==="pending"||F.status==="billed")&&r.jsx("button",{onClick:B=>{B.stopPropagation(),O(F.id,"cancelled")},className:"pq-action-btn pq-btn-cancel",children:"Cancel"}),r.jsx("button",{onClick:B=>{B.stopPropagation(),P(F)},onMouseEnter:()=>g(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})]})})]},F.id))})]})}),r.jsx("div",{className:"pq-card-list",children:t.map(F=>r.jsxs("div",{className:"pq-mobile-card",onClick:()=>P(F),onMouseEnter:()=>g(F.patientId),children:[r.jsxs("div",{className:"pq-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pq-text-bold",children:F.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),r.jsx("span",{className:I(F.status),children:F.status})]}),r.jsx("div",{className:"mb-2",children:F.medications.slice(0,3).map((B,$)=>r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[B.name," (",B.pack_quantity>0?`${B.pack_quantity}p`:""," ",B.loose_quantity>0?`${B.loose_quantity}l`:"",")"]},$))}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("div",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),r.jsx("div",{className:"pq-actions",children:r.jsx("button",{onClick:B=>{B.stopPropagation(),P(F)},onMouseEnter:()=>g(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})})]})]},F.id))})]})]}),!i&&j>1&&r.jsxs("div",{className:"pq-footer px-4 pb-4",children:[r.jsxs("div",{className:"pq-page-info",children:["Page ",x," of ",j]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"pq-pagination-btn",disabled:x===1,onClick:()=>b(F=>Math.max(1,F-1)),children:r.jsx(Cb,{size:16})}),r.jsx("button",{className:"pq-pagination-btn",disabled:x===j,onClick:()=>b(F=>Math.min(j,F+1)),children:r.jsx(dd,{size:16})})]})]})]})]})},$A=10,KMe=3,xG=({isEmbedded:t=!1,initialSearch:e=""})=>{const n=Mt(),{customColumnsConfig:a,refetch:i}=tS(),s=a.drugs||[],[o,l]=v.useState(!1),[c,d]=v.useState(!1),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(e),[S,_]=v.useState(!0),[T,C]=v.useState(null),[P,k]=v.useState(new Set),[O,I]=v.useState("all"),F=async()=>{try{const ke=await le("/api/inventory/download-csv");if(!ke.ok)throw new Error(`Failed to download CSV: ${ke.statusText}`);const lt=await ke.blob(),Tt=window.URL.createObjectURL(lt),Ue=document.createElement("a");Ue.href=Tt,Ue.download="pharmacy_inventory.csv",document.body.appendChild(Ue),Ue.click(),Ue.remove(),window.URL.revokeObjectURL(Tt)}catch(ke){console.error("Failed to download CSV:",ke),C(ke.message||"Failed to download inventory CSV. Please try again.")}},[B,$]=v.useState(!1),[L,V]=v.useState(!1),[H,te]=v.useState(null),[X,q]=v.useState(!1),[Y,se]=v.useState(new Set),[G,z]=v.useState(1),ce=8,[we,K]=v.useState(null),[Ie,We]=v.useState(0),[Re,Fe]=v.useState(!1),[ve,ae]=v.useState(null),[je,ue]=v.useState(1),[me,oe]=v.useState(!1),Q=G*ce,ie=Q-ce,xe=g.slice(ie,Q),ee=Math.ceil(g.length/ce);v.useEffect(()=>{z(1)},[b,O]);const Se=v.useCallback(async()=>{_(!0),C(null);try{const ke=await le("/api/drugs");if(!ke.ok)throw new Error(`Failed to fetch drugs: ${ke.statusText} (${ke.status})`);const lt=await ke.json();let Tt=Array.isArray(lt)?lt:lt.drugs||[];Tt=Tt.map(Ue=>({...Ue,mrp:parseFloat(String(Ue.mrp))||0,rate:Ue.rate!==null&&Ue.rate!==void 0?parseFloat(String(Ue.rate)):null,stock:parseInt(String(Ue.stock),10)||0,gst:Ue.gst!==null&&Ue.gst!==void 0?parseFloat(String(Ue.gst)):null,margin:Ue.margin!==null&&Ue.margin!==void 0?parseFloat(String(Ue.margin)):null,discount:Ue.discount!==null&&Ue.discount!==void 0?parseFloat(String(Ue.discount)):null})),p(Tt),x(Tt)}catch(ke){console.error("Failed to fetch drugs:",ke),C(ke.message||"Failed to load inventory. Please try again.")}finally{_(!1)}},[]);v.useEffect(()=>{Se()},[Se]),v.useEffect(()=>{e&&j(e)},[e]);const qe=v.useMemo(()=>new to(f,{keys:["name","brand_name","description","supplier","box_number"],threshold:.3,ignoreLocation:!0}),[f]);v.useEffect(()=>{let ke=f;b&&(ke=qe.search(b).map(Ue=>Ue.item));const lt=new Date,Tt=TDe(lt,KMe);O==="low-stock"?ke=ke.filter(Ue=>Ue.stock<=$A):O==="near-expiry"?ke=ke.filter(Ue=>{if(!Ue.expiry_date)return!1;const jt=CB(Ue.expiry_date);return jO(jt)&&LA(jt,Tt)&&!LA(jt,lt)}):O==="expired"&&(ke=ke.filter(Ue=>{if(!Ue.expiry_date)return!1;const jt=CB(Ue.expiry_date);return jO(jt)&&LA(jt,lt)})),x(ke)},[b,f,O,qe]);const Ge=()=>{$(!1),K(null)},Ne=ke=>{We(parseInt(ke.target.value,10)||0)},ne=async ke=>{if(ke.preventDefault(),C(null),!we||!we.id||Ie===0){C("No drug selected or adjustment amount is zero.");return}try{const lt=await le(`/api/drugs/${we.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:Ie})});if(!lt.ok){const Ue=await lt.json();throw new Error(Ue.message||`Failed to adjust stock: ${lt.statusText}`)}const Tt=await lt.json();p(Ue=>Ue.map(jt=>jt.id===Tt.id?Tt:jt)),Ge()}catch(lt){console.error("Failed to adjust stock:",lt),C(lt.message||"Failed to adjust stock. Please try again.")}},de=ke=>{te(ke),V(!0)},Te=()=>{V(!1),te(null)},Ee=async()=>{if(!H||!H.id){C("No drug selected for deletion.");return}_(!0),C(null);try{const ke=await le(`/api/drugs/${H.id}`,{method:"DELETE"});if(!ke.ok){const lt=await ke.json();throw new Error(lt.message||`Failed to delete drug: ${ke.statusText}`)}Se(),Te()}catch(ke){console.error("Failed to delete drug:",ke),C(ke.message||"Failed to delete drug. Please try again.")}finally{_(!1)}},W=()=>{q(!0)},ye=()=>{q(!1)},[he,ge]=v.useState(!1),_e=()=>{Y.size>0&&ge(!0)},ze=()=>{ge(!1)},Oe=async()=>{if(Y.size===0){C("No drugs selected for deletion.");return}_(!0),C(null);try{const ke=await le("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(Y)})});if(!ke.ok){const lt=await ke.json();throw new Error(lt.message||`Failed to delete selected drugs: ${ke.statusText}`)}Se(),se(new Set),ze()}catch(ke){console.error("Failed to delete selected drugs:",ke),C(ke.message||"Failed to delete selected drugs. Please try again.")}finally{_(!1)}},He=async()=>{_(!0),C(null);try{const ke=await le("/api/drugs/all",{method:"DELETE"});if(!ke.ok){const lt=await ke.json();throw new Error(lt.message||`Failed to delete all drugs: ${ke.statusText}`)}Se(),ye()}catch(ke){console.error("Failed to delete all drugs:",ke),C(ke.message||"Failed to delete all drugs. Please try again.")}finally{_(!1)}},nt=ke=>{if(!ke)return null;const lt=ke.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return lt?parseInt(lt[1],10):null},mt=ke=>{ae(ke),ue(1),Fe(!0)},De=()=>{Fe(!1),ae(null),ue(1)},Je=ke=>{ue(parseInt(ke.target.value,10)||0)},et=async ke=>{if(ke.preventDefault(),C(null),!ve||!ve.id||je<=0){C("No drug selected or invalid number of packs to convert.");return}const lt=nt(ve.pack);if(!lt||lt<=0){C(`Cannot convert "${ve.name}" to loose. Invalid pack unit: ${ve.pack||"N/A"}.`);return}if(je>(ve.stock??0)){C(`Cannot convert ${je} packs. Only ${ve.stock??0} packs are in stock.`);return}try{const Tt=await le(`/api/drugs/${ve.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:je,packSize:lt})});if(!Tt.ok){const jt=await Tt.json();throw new Error(jt.message||`Failed to convert to loose: ${Tt.statusText}`)}const Ue=await Tt.json();p(jt=>jt.map(Ct=>Ct.id===Ue.id?Ue:Ct)),De()}catch(Tt){console.error("Failed to convert to loose:",Tt),C(Tt.message||"Failed to convert to loose. Please try again.")}finally{_(!1)}},ut=()=>{oe(!0)},_t=()=>{oe(!1)},vt=async()=>{_(!0),C(null);try{const ke=await le("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!ke.ok){const lt=await ke.json();throw new Error(lt.message||`Failed to add default medications: ${ke.statusText}`)}Se(),_t()}catch(ke){console.error("Failed to add default medications:",ke),C(ke.message||"Failed to add default medications. Please try again.")}finally{_(!1)}};return S?r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsx("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[1,2,3,4].map(ke=>r.jsx(Z,{width:120,height:36},ke))}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsx(Z,{width:100,height:36}),[1,2,3,4].map(ke=>r.jsx(Z,{width:120,height:36},ke))]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsx(Z,{width:"100%",height:40,style:{maxWidth:"600px"}}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx(Z,{width:20,height:20})}),r.jsx("th",{children:"DRUG DETAILS"}),r.jsx("th",{children:"PACK"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{className:"qty-header",children:"STOCK"}),r.jsx("th",{className:"mrp-header",children:"MRP"}),r.jsx("th",{className:"rate-header",children:"RATE"}),r.jsx("th",{children:"BOX"}),r.jsx("th",{children:"DISC %"}),r.jsx("th",{children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ke=>r.jsxs("tr",{children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx(Z,{width:20,height:20})}),r.jsxs("td",{children:[r.jsx(Z,{width:"80%",height:20}),r.jsx(Z,{width:"40%",height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsxs("td",{children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:60,height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{width:20,height:20}),r.jsx(Z,{width:20,height:20}),r.jsx(Z,{width:20,height:20})]})})]},ke))})]})})]}):T?r.jsxs("div",{className:"error-indicator",children:["Error: ",T]}):r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline add-drug-button",children:[r.jsx(Cs,{size:18}),"Add New Drug"]}),r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline",children:[r.jsx(Cs,{size:18}),"Purchase Page"]}),r.jsxs("button",{onClick:()=>n("/dashboard/distributors"),className:"action-button-outline",children:[r.jsx(Cs,{size:18}),"Distributors"]}),r.jsxs("button",{onClick:()=>l(!0),className:"action-button-outline",title:"Manage Custom Columns",children:[r.jsx(ld,{size:18}),"Columns"]})]}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>d(!1),className:`view-mode-btn ${c?"":"active"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>d(!0),className:`view-mode-btn ${c?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(gf,{size:18})," Excel"]})]}),r.jsx("button",{onClick:F,className:"action-button-outline",children:"Download CSV"}),r.jsxs("button",{onClick:ut,className:"action-button-outline",children:[r.jsx(Cs,{size:18}),"Import Defaults"]}),r.jsxs("button",{onClick:_e,className:"action-button-outline delete-button-outline",disabled:Y.size===0,children:[r.jsx(Bn,{size:18}),"Delete (",Y.size,")"]}),r.jsxs("button",{onClick:W,className:"action-button-outline delete-all-button-outline",children:[r.jsx(Bn,{size:18}),"Delete All"]})]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsxs("div",{className:"search-input-wrapper",style:{maxWidth:"600px"},children:[r.jsx(Mn,{size:20,className:"search-input-icon"}),r.jsx("input",{type:"text",placeholder:"Search drugs...",value:b,onChange:ke=>j(ke.target.value),className:"inventory-search-input"})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("select",{value:O,onChange:ke=>I(ke.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})})]}),c?r.jsx("div",{className:"inventory-table-container",style:{padding:"1rem"},children:r.jsx(Ib,{title:"Pharmacy Inventory",columns:[{key:"name",label:"Drug Name",type:"text",editable:!0},{key:"brand_name",label:"Brand Name",type:"text",editable:!0},{key:"pack",label:"Pack",type:"text",editable:!0},{key:"expiry_date",label:"Expiry",type:"date",editable:!0},{key:"stock",label:"Stock",type:"number",editable:!0},{key:"mrp",label:"MRP",type:"number",editable:!0},{key:"rate",label:"Rate",type:"number",editable:!0},{key:"box_number",label:"Box",type:"text",editable:!0},{key:"discount",label:"Discount %",type:"number",editable:!0},{key:"gst",label:"GST %",type:"number",editable:!0},{key:"supplier",label:"Supplier",type:"text",editable:!0}],data:g,onSave:async ke=>{try{for(const lt of ke)lt.id&&await le(`/api/drugs/${lt.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(lt)});Se()}catch(lt){console.error("Failed to save:",lt),C(lt.message||"Failed to save changes")}},editable:!0,showRowNumbers:!0})}):r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx("input",{type:"checkbox",onChange:ke=>{if(ke.target.checked){const lt=new Set(g.map(Tt=>Tt.id));se(lt)}else se(new Set)},checked:Y.size===g.length&&g.length>0,disabled:g.length===0})}),r.jsx("th",{className:"drug-name-header",children:"DRUG DETAILS"}),r.jsx("th",{className:"pack-header",children:"PACK"}),r.jsx("th",{className:"expiry-header",children:"EXPIRY"}),r.jsx("th",{className:"text-stock qty-header",children:"STOCK"}),r.jsx("th",{className:"text-price mrp-header",children:"MRP"}),r.jsx("th",{className:"text-cost rate-header",children:"RATE"}),r.jsx("th",{className:"box-number-header",children:"BOX"}),r.jsx("th",{className:"discount-header",children:"DISC %"}),r.jsx("th",{className:"margin-header",children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsxs("tbody",{children:[g.length===0&&r.jsx("tr",{className:"no-results-message",children:r.jsx("td",{colSpan:11,children:"No drugs found matching your search."})}),xe.map(ke=>r.jsxs(Ce.Fragment,{children:[r.jsxs("tr",{className:"drug-row",onClick:()=>{const lt=new Set(P);lt.has(ke.id)&&ke.id!==void 0?lt.delete(ke.id):ke.id!==void 0&&lt.add(ke.id),k(lt)},children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx("input",{type:"checkbox",onClick:lt=>lt.stopPropagation(),checked:Y.has(ke.id),onChange:()=>{const lt=new Set(Y);lt.has(ke.id)?lt.delete(ke.id):lt.add(ke.id),se(lt)}})}),r.jsx("td",{className:"drug-name-cell",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("span",{className:"text-xs text-muted-foreground",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:ke.name})]})}),r.jsx("td",{className:"text-muted pack-cell",children:ke.pack||"-"}),r.jsx("td",{className:"text-muted",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"}),r.jsxs("td",{className:`text-stock ${ke.stock<=$A?"low-stock":""}`,children:[r.jsx("div",{style:{fontWeight:"bold"},children:ke.stock}),r.jsx("div",{className:"loose-quantity",children:ke.loose!==null&&ke.loose!==void 0?`${ke.loose} loose`:"0 loose"})]}),r.jsxs("td",{className:"text-muted text-price",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]}),r.jsx("td",{className:"text-muted text-cost",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"}),r.jsx("td",{className:"text-muted",children:ke.box_number||"-"}),r.jsx("td",{className:"text-muted",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"}),r.jsx("td",{className:"text-muted",children:(()=>{const lt=ke.mrp||0,Tt=ke.rate||0,Ue=ke.discount||0,jt=ke.gst||0,Xn=Tt*(1-Ue/100)*(1+jt/100),br=lt-Xn;return`${(lt>0?br/lt*100:0).toFixed(2)}%`})()}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:lt=>{lt.stopPropagation(),n(`/dashboard/inventory/edit/${ke.id}`)},className:"action-icon-button",title:"Edit Drug",children:r.jsx(Ii,{size:16})}),r.jsx("button",{onClick:lt=>{lt.stopPropagation(),de(ke)},className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(Bn,{size:16})}),r.jsx("button",{onClick:lt=>{lt.stopPropagation(),K(ke),$(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:r.jsx(vI,{size:16})}),r.jsx("button",{onClick:lt=>{lt.stopPropagation(),mt(ke)},className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!ke.pack||nt(ke.pack)===null,children:r.jsx(SI,{size:16})})]})})]}),P.has(ke.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:11,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",ke.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",ke.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Batch:"})," ",ke.batch||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"HSN Code:"})," ",ke.hsn_code||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"MFG:"})," ",ke.mfg||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose Price:"}),(()=>{const lt=nt(ke.pack);return lt&&lt>0&&typeof ke.mrp=="number"?`${(ke.mrp/lt).toFixed(2)}`:"N/A"})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"GST:"})," ",ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(ke.last_updated).toLocaleString()]}),s.length>0&&r.jsx("div",{className:"custom-fields-display",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px dashed var(--border-color)"},children:s.map(lt=>{var Tt;return r.jsxs("p",{children:[r.jsxs("strong",{children:[lt.label,":"]})," ",(Tt=ke.custom_fields)!=null&&Tt[lt.key]?String(ke.custom_fields[lt.key]):"-"]},lt.key)})})]})})})]},ke.id))]})]})}),r.jsx("div",{className:`inventory-grid-mobile ${t?"embedded":""}`,style:{display:c?"none":void 0},children:g.length===0?r.jsx("div",{className:"inventory-card-empty",children:"No drugs found matching your search."}):xe.map(ke=>r.jsxs("div",{className:"inventory-card",onClick:()=>{const lt=new Set(P);lt.has(ke.id)&&ke.id!==void 0?lt.delete(ke.id):ke.id!==void 0&&lt.add(ke.id),k(lt)},children:[r.jsxs("div",{className:"inventory-card-header",children:[r.jsxs("div",{className:"inventory-card-drug-info",children:[r.jsx("h4",{className:"inventory-card-drug-name",children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("div",{className:"inventory-card-brand-name",children:ke.name})]}),r.jsx("div",{className:"inventory-card-checkbox",onClick:lt=>lt.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:Y.has(ke.id),onChange:()=>{const lt=new Set(Y);lt.has(ke.id)?lt.delete(ke.id):lt.add(ke.id),se(lt)}})})]}),r.jsxs("div",{className:"inventory-card-body",children:[r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Stock"}),r.jsxs("span",{className:`inventory-card-field-value stock-value ${ke.stock<=$A?"stock-low":""}`,children:[ke.stock,r.jsxs("span",{className:"inventory-card-loose",children:[" (",ke.loose??0," loose)"]})]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"MRP"}),r.jsxs("span",{className:"inventory-card-field-value price-value",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Pack"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.pack||"-"})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Expiry"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"})]})]}),P.has(ke.id)&&r.jsxs("div",{className:"inventory-card-expanded",children:[r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Rate"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Box"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.box_number||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Supplier"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.supplier||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Batch"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.batch||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"HSN Code"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.hsn_code||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Discount"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"GST"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"})]}),s.length>0&&s.map(lt=>{var Tt;return r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:lt.label}),r.jsx("span",{className:"inventory-card-expanded-value",children:(Tt=ke.custom_fields)!=null&&Tt[lt.key]?String(ke.custom_fields[lt.key]):"-"})]},lt.key)})]}),r.jsxs("div",{className:"inventory-card-actions",onClick:lt=>lt.stopPropagation(),children:[r.jsxs("button",{className:"inventory-card-action-btn btn-edit",onClick:()=>n(`/dashboard/inventory/edit/${ke.id}`),title:"Edit Drug",children:[r.jsx(Ii,{size:14}),"Edit"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-delete",onClick:()=>de(ke),title:"Delete Drug",children:[r.jsx(Bn,{size:14}),"Delete"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-adjust",onClick:()=>{K(ke),$(!0)},title:"Adjust Stock",children:[r.jsx(vI,{size:14}),"Adjust"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-convert",onClick:()=>mt(ke),title:"Convert to Loose",disabled:!ke.pack||nt(ke.pack)===null,children:[r.jsx(SI,{size:14}),"Loose"]})]})]},ke.id))}),ee>1&&r.jsxs("div",{className:"pagination-controls",style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",backgroundColor:"var(--card-bg, #fff)",borderTop:"1px solid var(--border-color)"},children:[r.jsx("button",{onClick:()=>z(ke=>Math.max(ke-1,1)),disabled:G===1,className:"pagination-button",children:"Previous"}),r.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Page ",G," of ",ee]}),r.jsx("button",{onClick:()=>z(ke=>Math.min(ke+1,ee)),disabled:G===ee,className:"pagination-button",children:"Next"})]}),L&&H&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Te,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:H.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Te,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ee,className:"button-delete",children:"Delete"})]})]})}),B&&we&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ge,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:we.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Stock: ",we.stock]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:ne,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:Ie===0?"":Ie,onChange:Ne,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ge,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),X&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ye,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ye,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:He,className:"button-delete",children:"Delete All"})]})]})}),he&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ze,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:Y.size})," selected drug(s)? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ze,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Oe,className:"button-delete",children:"Delete Selected"})]})]})}),Re&&ve&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:De,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Convert to Loose"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:ve.name||"Unnamed Drug"}),r.jsx("br",{}),"Pack Size: ",ve.pack,r.jsx("br",{}),"Current Stock: ",ve.stock," packs, ",ve.loose??0," loose units."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:et,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"packsToConvert",className:"form-label",children:"Packs to Convert"}),r.jsx("input",{type:"number",name:"packsToConvert",id:"packsToConvert",required:!0,step:"1",min:"1",max:ve.stock,value:je===0?"":je,onChange:Je,className:"form-input"}),r.jsxs("p",{className:"form-help-text",children:["Converting ",je," pack(s) will add ",je*(nt(ve.pack)||0)," loose units."]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:De,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Convert"})]})]})]})}),me&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:_t,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),r.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:_t,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:vt,className:"button-submit",children:"Add Defaults"})]})]})}),r.jsx(kM,{isOpen:o,onClose:()=>l(!1),entityType:"drugs",entityLabel:"Pharmacy Drugs",currentConfig:a,onConfigUpdated:()=>{i()}})]})},QMe=()=>{const t=Mt();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},vG=()=>{const{id:t}=Ma(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null),j=v.useCallback(async()=>{if(!t){l("Drug ID is missing."),s(!1);return}s(!0),l(null);try{const C=await le(`/api/drugs/${t}`);if(!C.ok){const k=await C.json();throw new Error(k.message||`Failed to fetch drug: ${C.statusText}`)}let P=await C.json();P={...P,name:P.name||"",brand_name:P.brand_name||"",mrp:parseFloat(String(P.mrp))||0,rate:P.rate!==null&&P.rate!==void 0?parseFloat(String(P.rate)):null,stock:parseInt(String(P.stock),10)||0,gst:P.gst!==null&&P.gst!==void 0?parseFloat(String(P.gst)):null,margin:P.margin!==null&&P.margin!==void 0?parseFloat(String(P.margin)):null,discount:P.discount!==null&&P.discount!==void 0?parseFloat(String(P.discount)):null,batch:P.batch||"",hsn_code:P.hsn_code||"",mfg:P.mfg||"",loose:P.loose!==null&&P.loose!==void 0?parseInt(String(P.loose),10):null},a(P)}catch(C){console.error("Failed to fetch drug:",C),l(C.message||"Failed to load drug data. Please try again.")}finally{s(!1)}},[t]);v.useEffect(()=>{j()},[j]),v.useEffect(()=>{const C=k=>{k.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var O;(O=b.current)==null||O.focus()},0),k.preventDefault()))},P=k=>{g.current&&!g.current.contains(k.target)&&p(!1)};return document.addEventListener("keydown",C),document.addEventListener("mousedown",P),()=>{document.removeEventListener("keydown",C),document.removeEventListener("mousedown",P)}},[f]);const S=C=>{const{name:P,value:k,type:O}=C.target;a(I=>I?{...I,[P]:O==="number"?parseFloat(k)||null:k}:null)},_=()=>{e(-1)},T=async C=>{if(C.preventDefault(),l(null),d(!0),!n||!n.id){l("Cannot edit drug: No drug data available."),d(!1);return}if(n.mrp===void 0||n.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const P={...n,name:n.name===""?null:n.name,brand_name:n.brand_name===""?null:n.brand_name,rate:n.rate===0?null:n.rate,expiry_date:n.expiry_date===""?null:n.expiry_date,gst:n.gst===0?null:n.gst,margin:n.margin===0?null:n.margin,discount:n.discount===0?null:n.discount,batch:n.batch===""?null:n.batch,hsn_code:n.hsn_code===""?null:n.hsn_code,mfg:n.mfg===""?null:n.mfg,loose:n.loose===0?null:n.loose};try{const k=await le(`/api/drugs/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!k.ok){const O=await k.json();throw new Error(O.message||`Failed to update drug: ${k.statusText}`)}await k.json(),e(-1)}catch(k){console.error("Failed to update drug:",k),l(k.message||"Failed to update drug. Please try again.")}finally{d(!1)}};return i?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):o&&!n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",o]})}):n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",n.name]}),r.jsx("button",{onClick:_,className:"cancel-button",title:"Go Back",children:r.jsx(Lt,{size:24})})]}),o&&r.jsx("div",{className:"error-message-submit",children:o}),r.jsxs("form",{onSubmit:T,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Cl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",value:n.name||"",onChange:S,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Cl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:n.brand_name||"",onChange:S,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Cl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"edit-mrp",required:!0,step:"0.01",min:"0",value:n.mrp||"",onChange:S,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Cl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"edit-stock",required:!0,step:"1",min:"0",value:n.stock||"",onChange:S,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"edit-pack",value:n.pack||"",onChange:S,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:n.expiry_date||"",onChange:S,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:n.box_number||"",onChange:S,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:n.description||"",onChange:S,className:"custom-text-input",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:n.supplier||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"edit-rate",step:"0.01",min:"0",value:n.rate??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:b})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:n.gst??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:n.margin??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:n.discount??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:n.batch||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:n.hsn_code||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:n.mfg||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),r.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:n.loose??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:_,disabled:c,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:20,children:c?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},XMe=({clinicId:t})=>{const e=Mt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState([]),[f,p]=v.useState(!0),g=async()=>{try{const S=await le("/api/clinic-roles");if(S.ok){const _=await S.json();d(_)}}catch(S){console.error("Failed to fetch roles:",S)}finally{p(!1)}};v.useEffect(()=>{s(t?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly."),g()},[t]);const x=S=>{const{name:_,value:T}=S.target;a(C=>{const P={...C,[_]:T};return _==="role"&&T!=="doctor"&&(P.opd_fee=""),P})},b=async S=>{if(S.preventDefault(),s(null),!n.name||!n.email||!n.role||!n.password){s("Name, Email, Role, and Password are required.");return}if(!t){s("Clinic information is missing. Cannot add staff.");return}const _={...n,clinic_id:t,opd_fee:n.role==="doctor"&&n.opd_fee?parseFloat(String(n.opd_fee)):null};if(_.role==="doctor"&&n.opd_fee&&isNaN(_.opd_fee)){s("Invalid OPD Fee format. Please enter a number.");return}l(!0);try{const T=await le("/api/staff",{method:"POST",body:JSON.stringify(_)});if(!T.ok){const C=await T.json();throw new Error(C.message||"Server responded with an error")}e(-1)}catch(T){s(`Failed to add staff: ${T.message}`)}finally{l(!1)}},j=()=>{e(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:j,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(rn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),i]}),r.jsxs("form",{onSubmit:b,className:`staff-form ${t?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:n.name||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:n.email||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:x,required:!0,disabled:o||!t||f,children:f?r.jsx("option",{value:"",children:"Loading roles..."}):c.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):c.map(S=>r.jsx("option",{value:S.key,children:S.name},S.key))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:n.password||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Create a password"})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:n.opd_fee||"",onChange:x,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:o||!t}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:o||!t,children:[o?r.jsx(Mc,{size:18,className:"animate-spin mr-2"}):r.jsx(qn,{size:18,className:"mr-2"}),o?"Adding...":"Add Staff Member"]})]})]})},JMe=()=>{const{id:t}=Ma(),e=Mt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState([]),[S,_]=v.useState(!0),T=async()=>{try{const I=await le("/api/clinic-roles");if(I.ok){const F=await I.json();j(F)}}catch(I){console.error("Failed to fetch roles:",I)}finally{_(!1)}},C=v.useCallback(async()=>{if(!t){p("Staff ID is missing."),l(!1);return}l(!0),p(null),x(null);try{const I=await le(`/staff/${t}`);if(!I.ok){const B=await I.json();throw new Error(B.message||`HTTP error! status: ${I.status}`)}const F=await I.json();a({name:F.name,email:F.email,role:F.role,opd_fee:F.opd_fee??"",active:F.active})}catch(I){p(`Failed to load staff details: ${I.message}`)}finally{l(!1)}},[t]);v.useEffect(()=>{C(),T()},[C]);const P=I=>{const{name:F,value:B,type:$}=I.target;if($==="checkbox"){const{checked:L}=I.target;a(V=>({...V,[F]:L}))}else a(L=>({...L,[F]:B}))},k=I=>{s(I.target.value)},O=async I=>{if(I.preventDefault(),!t){p("Staff ID is missing.");return}d(!0),p(null),x(null);const F={name:n.name,email:n.email,role:n.role,active:n.active};if(n.role==="doctor"){const B=n.opd_fee?parseFloat(String(n.opd_fee)):null;if(B!==null&&isNaN(B)){p("OPD Fee must be a valid number."),d(!1);return}F.opd_fee=B}else F.opd_fee=null;i.trim()!==""&&(F.password=i.trim());try{const B=await le(`/staff/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!B.ok){const $=await B.json();throw new Error($.message||`HTTP error! status: ${B.status}`)}x("Staff details updated successfully!"),s(""),setTimeout(()=>e(-1),1500)}catch(B){p(`Failed to update staff: ${B.message}`)}finally{d(!1)}};return o?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(Mc,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(rn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),f&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),f,r.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),g&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(Ml,{size:18,className:"mr-2 text-green-500"}),g,r.jsx("button",{onClick:()=>x(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),r.jsxs("form",{onSubmit:O,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:P,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email||"",onChange:P,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:P,required:!0,disabled:S,children:S?r.jsx("option",{value:"",children:"Loading roles..."}):b.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]}):b.map(I=>r.jsx("option",{value:I.key,children:I.name},I.key))})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:n.opd_fee||"",onChange:P,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:n.active??!0,onChange:P}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:i,onChange:k,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(Mc,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(as,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},ZMe=()=>{const{patientId:t}=Ma(),e=Mt(),[n,a]=v.useState([]),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){d("Patient ID not provided.");return}l(!0),d(null);try{const g=await le(`/api/patients/${t}`);if(!g.ok)throw new Error(`Failed to fetch patient details: ${g.status}`);const x=await g.json();s({name:x.name,age:x.age,gender:x.gender});const b=await le(`/api/patients/${t}/complaints`);if(b.ok){const S=(await b.json()).sort((_,T)=>new Date(T.createdAt).getTime()-new Date(_.createdAt).getTime());a(S)}else if(b.status===404)a([]);else throw new Error(`Failed to fetch complaints: ${b.status}`)}catch(g){console.error("Error fetching past complaints or patient info:",g),d(`Failed to load data. ${g.message}`),a([]),s(null)}finally{l(!1)}})()},[t]);const f=p=>{navigator.clipboard.writeText(p).then(()=>console.log("Complaint copied to clipboard")).catch(g=>console.error("Failed to copy complaint: ",g))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:i.name})," (",i.age??"N/A"," / ",i.gender??"N/A",")"]}),c&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",c]}),o&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!o&&n.length===0&&!c&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!o&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(p.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.complaint}),r.jsx("button",{onClick:()=>f(p.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},p.id))})]})},eIe=t=>{if(t===0)return"Zero";const e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],a=l=>l===0?"":l<20?e[l]:l<100?n[Math.floor(l/10)]+(l%10?" "+e[l%10]:""):e[Math.floor(l/100)]+" Hundred"+(l%100?" and "+a(l%100):""),i=Math.floor(t),s=Math.round((t-i)*100);let o="";return i>=1e7&&(o+=a(Math.floor(i/1e7))+" Crore "),i>=1e5&&(o+=a(Math.floor(i%1e7/1e5))+" Lakh "),i>=1e3&&(o+=a(Math.floor(i%1e5/1e3))+" Thousand "),i>=100&&(o+=a(Math.floor(i%1e3/100))+" Hundred "),i%100&&(o+=(o?"and ":"")+a(i%100)),o=o.trim()+" Rupees",s>0&&(o+=" and "+a(s)+" Paise"),o+" Only"},tIe=t=>{const e=typeof t=="string"?parseInt(t,10):t;return`INV-${String(e).padStart(6,"0")}`},BA=500,AB="defaultConsultationFee",nIe=({patientId:t,billId:e,queueId:n,onBillCreated:a,onBillUpdated:i,initialItems:s=[],billType:o="other",relatedId:l,initialStatus:c="pending",initialDiscountPercentage:d=0,readOnlyMode:f=!1,doctorId:p,labOrderId:g,patientInsuranceType:x})=>{const[b,j]=v.useState(null),[S,_]=v.useState([]),T=v.useRef([]),[C,P]=v.useState(""),[k,O]=v.useState(""),[I,F]=v.useState(1),[B,$]=v.useState(d),[L,V]=v.useState("cash"),[H,te]=v.useState(!1),[X,q]=v.useState(null),[Y,se]=v.useState(!1),[G,z]=v.useState(!1),[ce,we]=v.useState(!1),[K,Ie]=v.useState(null),[We,Re]=v.useState([]),[Fe,ve]=v.useState(null),[ae,je]=v.useState(""),[ue,me]=v.useState("cash"),[oe,Q]=v.useState(!1),[ie,xe]=v.useState(!1),[ee,Se]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),qe=()=>{ee.length<5&&Se(at=>[...at,{id:Date.now().toString(),method:"cash",amount:0}])},Ge=at=>{ee.length>2&&Se(Nt=>Nt.filter(St=>St.id!==at))},Ne=(at,Nt,St)=>{Se(It=>It.map(On=>On.id===at?Nt==="method"?{...On,method:St}:{...On,amount:Math.max(0,St)}:On))},ne=(at,Nt)=>{const St=ee.filter(vn=>vn.id!==at).reduce((vn,On)=>vn+On.amount,0),It=Math.max(0,Nt-St);Se(vn=>vn.map(On=>On.id===at?{...On,amount:It}:On))},[de,Te]=v.useState(null),[Ee,W]=v.useState(!1),[ye,he]=v.useState(BA),[ge,_e]=v.useState(BA.toString()),[ze,Oe]=v.useState(""),[He,nt]=v.useState(""),[mt,De]=v.useState(""),[Je,et]=v.useState(""),[ut,_t]=v.useState(""),vt=e?"view_pay":"create";v.useEffect(()=>{const at=localStorage.getItem(AB),Nt=at?parseFloat(at):BA;isNaN(Nt)||(he(Nt),_e(Nt.toString()))},[]);const ke=s.length===0;v.useEffect(()=>{t?(async()=>{te(!0),q(null);try{const Nt=await le(`/api/patients/${t}`);if(!Nt.ok){const It=await Nt.json().catch(()=>({}));throw new Error(It.message||"Failed to fetch patient details")}const St=await Nt.json();j(St)}catch(Nt){q(`Failed to load patient details: ${Nt.message}`),j(null)}finally{te(!1)}})():j(null)},[t]),v.useEffect(()=>{e?(async()=>{we(!0),q(null),Ie(null),Re([]),ve(null);try{const Nt=await le(`/api/bills/${e}`);if(!Nt.ok){const It=await Nt.json().catch(()=>({}));throw new Error(It.message||"Failed to fetch bill details")}const St=await Nt.json();if(!St.bill||!St.payments||!St.calculated)throw new Error("Invalid bill details structure.");Ie(St.bill),Re(St.payments),ve(St.calculated),$(St.bill.discount_percentage!==void 0&&St.bill.discount_percentage!==null?parseFloat(St.bill.discount_percentage.toString()):0),St.bill.payment_mode&&V(St.bill.payment_mode),!b&&St.bill.patient_id&&lt(St.bill.patient_id.toString())}catch(Nt){q(`Failed to load bill details: ${Nt.message}`),Ie(null),Re([]),ve(null)}finally{we(!1)}})():(Ie(null),Re([]),ve(null))},[e]),v.useEffect(()=>{(async()=>{try{const Nt=await le("/api/clinics/settings");if(!Nt.ok)throw new Error("Failed to fetch clinic settings");const St=await Nt.json();Oe(St.upi_id||""),nt(St.name||""),De(St.address||""),et(St.notes||"")}catch(Nt){console.error("Error fetching clinic settings:",Nt)}})()},[]);const lt=async at=>{te(!0);try{const Nt=await le(`/api/patients/${at}`);if(!Nt.ok)throw new Error("Failed to fetch patient");const St=await Nt.json();j(St)}catch(Nt){console.error("Error fetching patient details:",Nt),j(null)}finally{te(!1)}},Tt=v.useCallback(async at=>{z(!0),q(null);const Nt=at.filter(St=>St.drug_id!=null).map(async St=>{try{const It=await le(`/api/drugs/${St.drug_id}`);if(!It.ok)throw new Error(`Drug ${St.drug_id} not found.`);const vn=await It.json();return{...St,price:vn.price,total:vn.price*St.quantity}}catch{return q(vn=>`${vn?vn+"; ":""}Failed to fetch price for ${St.name}`),St}});try{const St=await Promise.all(Nt);_(It=>{const vn=new Map(St.map(On=>[On.id,On]));return It.map(On=>vn.get(On.id)||On)})}catch{}finally{z(!1)}},[le]);v.useEffect(()=>{if(e){_([]),T.current=[];return}JSON.stringify(s)===JSON.stringify(T.current)||(async()=>{let St=[];if(s&&s.length>0)St=s.map((It,vn)=>({...It,id:`initial-${vn}-${Date.now()}`})),V(c==="paid"?"cash":x==="no_cash_insurance"?"no_cash_insurance":"cash"),$(d),o==="pharmacy"&&!f&&await Tt(St);else if(t&&ke&&o==="consultation"){let It=ye;if(p)try{const vn=await le(`/api/staff/${p}`);if(!vn.ok){const ya=await vn.json().catch(()=>({}));throw new Error(ya.message||"Doctor not found or error fetching fee")}const On=await vn.json();On.opd_fee!=null&&!isNaN(parseFloat(String(On.opd_fee)))&&parseFloat(String(On.opd_fee))>=0&&(It=parseFloat(String(On.opd_fee)))}catch(vn){q(On=>`${On?On+"; ":""}Could not fetch doctor's fee, using default. (${vn.message})`)}St=[{id:Date.now(),name:"Consultation Fee",price:It,quantity:1,total:It*1,drug_id:null}],V(x==="no_cash_insurance"?"no_cash_insurance":"cash")}else St=[],V(x==="no_cash_insurance"?"no_cash_insurance":"cash");_(St),T.current=s})()},[e,t,p,s,o,ye,ke,c,f,Tt,d,x]);const Ue=()=>{const at=parseFloat(k);if(!f)if(C&&!isNaN(at)&&at>=0&&I>0){if(C.trim().toLowerCase()==="consultation fee"&&S.some(St=>St.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const Nt={id:Date.now(),name:C.trim(),price:at,quantity:I,total:at*I,drug_id:null};_([...S,Nt]),P(""),O(""),F(1)}else alert("Invalid item details.")},jt=at=>{f||_(S.filter(Nt=>Nt.id!==at))},Ct=v.useMemo(()=>{let at=S.reduce((Nt,St)=>Nt+St.total,0);return vt==="create"&&B>0&&(at=at*(1-B/100)),(Fe==null?void 0:Fe.totalDue)!==void 0&&(Fe==null?void 0:Fe.totalDue)!==null?Fe.totalDue:at},[S,Fe,B,vt]),Xn=v.useMemo(()=>S.reduce((at,Nt)=>at+Nt.total,0),[S]),br=v.useMemo(()=>Xn*(B/100),[Xn,B]),Vn=v.useMemo(()=>(Fe==null?void 0:Fe.totalPaid)??0,[Fe]),Cn=v.useMemo(()=>(Fe==null?void 0:Fe.balance)!==void 0&&(Fe==null?void 0:Fe.balance)!==null?Fe.balance:Ct-Vn,[Fe,Ct,Vn]);v.useEffect(()=>{if(Ct>0&&ze){const at=`upi://pay?pa=${ze}&pn=${encodeURIComponent(He)}&am=${Ct.toFixed(2)}&cu=INR`;_t(at)}else _t("")},[Ct,ze,He]),v.useEffect(()=>{(async()=>{if(L==="credit"&&t){W(!0);try{const Nt=await le(`/api/patient-debts/${t}/balance`);if(Nt.ok){const St=await Nt.json();Te(St.netDebt||0)}else Te(0)}catch(Nt){console.error("Error fetching patient debt:",Nt),Te(0)}finally{W(!1)}}})()},[L,t]);const wn=()=>{const at=parseFloat(ge);!isNaN(at)&&at>=0?(he(at),localStorage.setItem(AB,at.toString())):alert("Invalid fee amount.")},la=async(at,Nt)=>{se(!0),q(null);try{const St=await le("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Nt,billId:at})}),It=await St.json();if(!St.ok||!It.order)throw new Error(It.message||"Failed to create Razorpay order.");const{key_id:vn,order:On}=It,ya={key:vn,amount:On.amount,currency:On.currency,name:"Newtons Ai HMS Clinic",description:`Bill Payment for Patient ID: ${t}`,order_id:On.id,handler:async function(fi){try{const ro=await le("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:fi.razorpay_payment_id,razorpay_order_id:fi.razorpay_order_id,razorpay_signature:fi.razorpay_signature,billId:at})}),_d=await ro.json();if(ro.ok&&_d.success)a&&a(at),i&&i(),setTimeout(()=>window.print(),200);else throw new Error(_d.message||"Payment verification failed.")}catch(ro){q(`Payment verification failed: ${ro.message}. Contact support.`)}finally{se(!1)}},prefill:{name:(b==null?void 0:b.name)||""},notes:{bill_id:at,patient_id:t},theme:{color:"#3399cc"},modal:{ondismiss:function(){q("Payment cancelled."),se(!1)}}};if(window.Razorpay)new window.Razorpay(ya).open();else throw new Error("Razorpay SDK not loaded.")}catch(St){q(`Failed to initiate online payment: ${St.message}`),se(!1)}},Hn=async()=>{if(!e){q("Bill ID is missing.");return}const at=ie?Ha:parseFloat(ae);if(isNaN(at)||at<=0){q("Please enter a valid positive payment amount.");return}Q(!0),q(null);try{if(ie){for(const Nt of ee)if(Nt.amount>0){const St=await le(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:Nt.amount,payment_mode:Nt.method})});if(!St.ok){const It=await St.json();throw new Error(It.message||`Failed to record ${Nt.method} payment`)}}}else{const Nt={amount_paid:at,payment_mode:ue},St=await le(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nt)}),It=await St.json();if(!St.ok)throw new Error(It.message||`Failed to record payment (Status: ${St.status})`)}je(""),ie&&(Se([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),xe(!1)),i?i():console.log("Payment recorded.")}catch(Nt){q(`Failed to record payment: ${Nt.message}`)}finally{Q(!1)}},Ha=ee.reduce((at,Nt)=>at+Nt.amount,0),$l=Math.abs(Ha-(vt==="create"?Ct:Ha))<.01,zo=ie?ee.some(at=>at.method==="credit"):vt==="create"?L==="credit":ue==="credit",Bl=async()=>{if(vt==="view_pay")return;if(!t){q("Patient ID is missing for creating a bill.");return}if(S.length===0){q("Cannot finalize an empty bill.");return}if(ie&&Math.abs(Ha-Ct)>.01){q(`Split payment total (${Ha.toFixed(2)}) must match the bill total (${Ct.toFixed(2)}).`);return}se(!0),q(null);const at=Ct,Nt=S.map(({id:It,...vn})=>vn),St={patientId:t,queueId:n||null,items:Nt,amount:at,paymentMode:ie?"split":L==="online"?"online":L,type:o,related_id:l||g||null,status:L==="online"?"pending":ie||L?"paid":"pending",discountPercentage:B,labOrderId:g||null};if(ie&&(St.splitPayments=ee.map(It=>({method:It.method,amount:It.amount}))),L==="online"&&!ie)try{const It=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),vn=await It.json();if(!It.ok)throw new Error(vn.message||"Failed to create pending bill.");la(vn.id,Math.round(at*100))}catch(It){q(`Failed to create pending bill: ${It.message}`),se(!1)}else{if(!L&&!ie){q("Payment mode required."),se(!1);return}setTimeout(()=>window.print(),200);try{const It=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),vn=await It.json();if(!It.ok)throw new Error(vn.message||"Failed to create bill.");if(zo&&t){const On=ie?ee.filter(ya=>ya.method==="credit").reduce((ya,fi)=>ya+fi.amount,0):L==="credit"?at:0;if(On>0)try{await le(`/api/patient-debts/${t}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:On,related_bill_id:vn.id,notes:`Bill #${vn.id} (Credit Part)`})})}catch(ya){console.error("Failed to create debt entry:",ya)}}a&&a(vn.id),se(!1)}catch(It){q(`Failed to process bill: ${It.message}`),se(!1)}}},Sd=(K==null?void 0:K.status)??c,qo=vt==="view_pay"&&K&&Sd==="pending";return!t&&!e?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):H||vt==="view_pay"&&ce?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):vt==="view_pay"&&!K&&!ce&&X?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",X]}):vt==="create"&&!b&&!H&&X?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",X]}):r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:He?`${He}`:"Bill"}),(mt||Je)&&r.jsxs("div",{className:"clinic-details-print",children:[mt&&r.jsx("span",{className:"small-text clinic-address",children:mt}),Je&&r.jsx("span",{className:"small-text clinic-notes",children:Je})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient"]})," ",(b==null?void 0:b.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]}),K&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"# Invoice"})," ",tIe(K.id)]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",b==null?void 0:b.name]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," ID"]})," ",b==null?void 0:b.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Age/Gender"]})," ",(b==null?void 0:b.age)??"N/A"," / ",(b==null?void 0:b.gender)??"N/A"]}),vt==="view_pay"&&K&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(_c,{size:16})," Bill ID"]})," ",K.id]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Bill Items"}),vt==="create"&&o==="pharmacy"&&!f&&S.some(at=>at.drug_id!=null)&&r.jsxs("button",{onClick:()=>Tt(S),disabled:G,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(xE,{size:14,className:`lucide ${G?"animate-spin":""}`}),G?"Refreshing...":"Refresh"]})]}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"}),vt==="create"&&!f&&r.jsx("th",{className:"no-print",children:"Action"})]})}),r.jsxs("tbody",{children:[vt==="create"&&S.map((at,Nt)=>r.jsxs("tr",{children:[r.jsx("td",{children:Nt+1}),r.jsx("td",{children:at.name}),r.jsx("td",{children:at.quantity}),r.jsxs("td",{children:["",at.price.toFixed(2)]}),r.jsxs("td",{children:["",at.total.toFixed(2)]}),!f&&r.jsx("td",{className:"no-print",children:typeof at.id=="number"&&at.name!=="Consultation Fee"?r.jsxs("button",{onClick:()=>jt(at.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx(Lt,{size:16})," "]}):r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(zX,{size:14})," "]})})]},at.id)),vt==="view_pay"&&K&&K.items.map((at,Nt)=>r.jsxs("tr",{children:[r.jsx("td",{children:Nt+1}),r.jsx("td",{children:at.name}),r.jsx("td",{children:at.quantity}),r.jsxs("td",{children:["",at.price.toFixed(2)]}),r.jsxs("td",{children:["",(at.total??at.price*at.quantity).toFixed(2)]})]},Nt)),(vt==="create"&&S.length===0||vt==="view_pay"&&(K==null?void 0:K.items.length)===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"20px"},children:"No items added."})})]})]}),vt==="create"&&!f&&r.jsxs("div",{className:"add-item-form no-print",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item Description"}),r.jsx("input",{type:"text",value:C,onChange:at=>P(at.target.value),placeholder:"Service Name",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:I,onChange:at=>F(parseInt(at.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"100px"},children:[r.jsx("label",{children:"Price ()"}),r.jsx("input",{type:"number",value:k,onChange:at=>O(at.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:Ue,className:"add-item-button",children:"Add Item"}),o==="consultation"&&r.jsxs("div",{className:"default-fee-section",style:{marginLeft:"auto",display:"flex",alignItems:"flex-end",gap:"5px"},children:[r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{children:"Default Fee"}),r.jsx("input",{type:"number",value:ge,onChange:at=>_e(at.target.value),style:{width:"80px",padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}})]}),r.jsx("button",{onClick:wn,className:"secondary-button",style:{padding:"10px"},children:r.jsx(as,{size:16})})]})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Xn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",B,"%)"]}),r.jsxs("span",{children:["- ",br.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ct.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px dashed #ddd"},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9em",marginBottom:"5px"},children:"Payment Mode:"}),ie?ee.map((at,Nt)=>at.amount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:at.method.toUpperCase()}),r.jsxs("span",{children:["",at.amount.toFixed(2)]})]},Nt)):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:L?L.toUpperCase():"CASH"}),r.jsxs("span",{children:["",Ct.toFixed(2)]})]}),vt==="view_pay"&&We&&We.length>0&&r.jsxs("div",{style:{marginTop:"5px"},children:[r.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:"Payment History:"}),We.map(at=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8em"},children:[r.jsxs("span",{children:[at.payment_mode," (",new Date(at.payment_date).toLocaleDateString(),")"]}),r.jsxs("span",{children:["",at.amount_paid]})]},at.id))]})]}),zo&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",fontSize:"0.85em",fontWeight:500},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Prev. Debt:"}),r.jsxs("span",{children:["",(de||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Net Payable:"}),r.jsxs("span",{children:["",((de||0)+(ie?ee.filter(at=>at.method==="credit").reduce((at,Nt)=>at+Nt.amount,0):L==="credit"?Ct:0)).toFixed(2)]})]})]})]}),ut&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(Da,{value:ut,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Xn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),vt==="create"&&!f?r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:B,onChange:at=>$(parseFloat(at.target.value)||0),min:"0",max:"100",className:"discount-input-total"}),"%"]}):r.jsxs("span",{children:[B,"%"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Amount"}),r.jsxs("span",{children:["- ",br.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ct.toFixed(2)]})]}),vt==="view_pay"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"summary-row",style:{color:"green"},children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Vn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",style:{color:"red",fontWeight:"bold"},children:[r.jsx("span",{children:"Balance Due"}),r.jsxs("span",{children:["",Cn.toFixed(2)]})]})]}),r.jsx("div",{className:"qr-code-container",children:ut?r.jsxs(r.Fragment,{children:[r.jsx(Da,{value:ut,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available."})}),vt==="create"&&r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>xe(!ie),disabled:f||Y,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ie?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ie?"rgba(79, 172, 254, 0.1)":"transparent",color:ie?"#4facfe":"#666",cursor:f||Y?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Io,{size:14})," Split"]})]}),ie?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Ha.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:ee.map((at,Nt)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Nt+1}),r.jsxs("select",{value:at.method,onChange:St=>Ne(at.id,"method",St.target.value),className:"split-payment-select",disabled:Y,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:at.amount||"",onChange:St=>Ne(at.id,"amount",parseFloat(St.target.value)||0),className:"split-payment-input",disabled:Y})]}),ee.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ne(at.id,Ct),className:"split-payment-btn split-payment-btn-fill",title:"Fill",children:"Buy"}),r.jsx("button",{type:"button",onClick:()=>Ge(at.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Bn,{size:12})})]})]},at.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:qe,className:"split-payment-add-btn",disabled:Y,children:[r.jsx(qn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Required:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ct.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${$l?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:$l?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",Ha.toFixed(2)]})]})]})]}):r.jsxs("select",{id:"paymentMode",value:L,onChange:at=>V(at.target.value),className:"payment-mode-select",disabled:f||Y,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"}),r.jsx("option",{value:"online",children:"Online (Razorpay)"})]})]}),vt==="create"&&L==="credit"&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Ee?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:de&&de>0?"#dc3545":"#28a745"},children:["",(de||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"This Bill:"}),r.jsxs("strong",{children:["+ ",Ct.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((de||0)+Ct).toFixed(2)]})]})]})]}),vt==="create"&&!f&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Bl,className:"primary-button",disabled:Y||S.length===0,children:Y?"Processing...":"Finalise and Bill"})}),vt==="view_pay"&&r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:()=>window.print(),className:"secondary-button",children:"Print Bill"}),qo&&Cn>0&&r.jsxs("div",{className:"payment-recording-section",style:{marginTop:"20px",borderTop:"1px dashed #ccc",paddingTop:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("h3",{style:{fontSize:"1em",marginBottom:"0"},children:"Record Payment"}),r.jsxs("button",{type:"button",onClick:()=>xe(!ie),disabled:oe,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",fontSize:"0.75rem",border:ie?"1px solid #4facfe":"1px solid #ccc",borderRadius:"4px",backgroundColor:ie?"rgba(79, 172, 254, 0.1)":"transparent",color:ie?"#4facfe":"#666",cursor:oe?"not-allowed":"pointer"},children:[r.jsx(Io,{size:12})," Split"]})]}),ie?r.jsxs("div",{className:"split-payment-wrapper",style:{marginBottom:"10px",fontSize:"0.9em"},children:[r.jsx("div",{className:"split-payment-list",children:ee.map(at=>r.jsxs("div",{className:"split-payment-row",children:[r.jsxs("select",{value:at.method,onChange:Nt=>Ne(at.id,"method",Nt.target.value),className:"split-payment-select",disabled:oe,style:{padding:"4px"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Ins."}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",style:{left:"5px",fontSize:"0.8em"},children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:at.amount||"",onChange:Nt=>Ne(at.id,"amount",parseFloat(Nt.target.value)||0),className:"split-payment-input",style:{paddingLeft:"15px"},disabled:oe})]}),ee.length>2&&r.jsx("button",{type:"button",onClick:()=>Ge(at.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Bn,{size:12})})]},at.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:qe,className:"split-payment-add-btn",disabled:oe,style:{fontSize:"0.8em",padding:"4px"},children:[r.jsx(qn,{size:12})," Add"]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em",marginTop:"5px",color:"#666"},children:[r.jsxs("span",{children:["Paying: ",r.jsxs("strong",{children:["",Ha.toFixed(2)]})]}),r.jsxs("span",{style:{color:Ha>Cn?"red":"inherit"},children:["Max: ",Cn.toFixed(2)]})]})]}):r.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:ae,onChange:at=>je(at.target.value),placeholder:`Max ${Cn.toFixed(2)}`,className:"custom-text-input",style:{flex:1}}),r.jsxs("select",{value:ue,onChange:at=>me(at.target.value),className:"custom-select-input",style:{width:"auto"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("button",{onClick:Hn,disabled:oe||ie&&Ha<=0||!ie&&(!ae||parseFloat(ae)<=0),className:"primary-button",style:{width:"100%",fontSize:"0.9em"},children:oe?"Recording...":"Record Payment"})]})]})]})})]}),r.jsxs("div",{className:"amount-in-words-print print-only",children:[r.jsx("strong",{children:"Amount in Words:"})," ",eIe(vt==="view_pay"&&K?K.amount:Ct)]}),r.jsxs("div",{className:"terms-conditions-print print-only",children:[r.jsx("h4",{children:"Terms & Conditions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Goods once sold will not be taken back or exchanged."}),r.jsx("li",{children:"All disputes are subject to local jurisdiction."}),r.jsx("li",{children:"Please retain this bill for future reference."})]})]}),r.jsxs("div",{className:"signature-section-print print-only",children:[r.jsx("div",{className:"receiver-sign",children:r.jsx("div",{className:"sign-line",children:"Receiver's Signature"})}),r.jsxs("div",{className:"authorized-sign",children:[r.jsxs("div",{className:"for-clinic",children:["For ",He||"Clinic"]}),r.jsx("div",{className:"sign-line",children:"Authorised Signatory"})]})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{className:"thank-you",children:"Thank you for your visit!"}),r.jsx("p",{className:"computer-generated",children:"This is a computer generated invoice and does not require a physical signature."})]})]})]})},rIe=()=>{const t=Mt(),e=Lr(),{patientId:n,queueId:a,patientName:i,initialItems:s,billType:o,relatedId:l,initialStatus:c,initialDiscountPercentage:d,doctorId:f,billId:p,labOrderId:g}=e.state||{},[x,b]=v.useState(null),[j,S]=v.useState(null),[_,T]=v.useState(null),[C,P]=v.useState(null),[k,O]=v.useState(null),[I,F]=v.useState(null),[B,$]=v.useState(null),[L,V]=v.useState(null),[H,te]=v.useState(!0),[X,q]=v.useState(null),[Y,se]=v.useState(i||"");v.useEffect(()=>{if(!n){console.error("BillingPage loaded without required patientId in location state."),t("/");return}(async()=>{te(!0),q(null);try{let Ie=n,We=s||null,Re=c||null,Fe=o||null,ve=l||null,ae=d!==void 0?parseFloat(d):null,je=i||null,ue=null;if(p){console.log(`Fetching details for Bill ID: ${p}`);const me=await le(`/api/bills/${p}`);if(!me.ok){const Q=await me.json().catch(()=>({message:`Failed to fetch bill details for ID ${p}`}));throw new Error(Q.message||`Failed to fetch bill details (Status: ${me.status})`)}const oe=await me.json();if(console.log("Fetched Bill Data:",oe),We=oe.bill.items||[],Re=oe.bill.status||"pending",Fe=oe.bill.type||null,ve=oe.bill.related_id||null,ae=oe.bill.discount_percentage!==void 0&&oe.bill.discount_percentage!==null?parseFloat(oe.bill.discount_percentage):0,Ie=oe.bill.patient_id,P(We),O(Re),F(Fe),$(ve),V(ae),Ie){const Q=await le(`/api/patients/${Ie}`);if(Q.ok){const ie=await Q.json();je=ie.name,ue=ie.phone??null,T(ie.insurance_type??null),se(je),S(ue)}else console.warn(`Could not fetch patient details for ID ${Ie} from bill.`),se("Patient (Not Found)")}else console.warn(`Bill ${p} does not have an associated patient_id.`),se("Patient (Unknown)")}else if(g){console.log(`Fetching details for Lab Order ID: ${g}`);const me=await le(`/api/lab/${g}`);if(!me.ok){let Q=`Failed to fetch lab order details (Status: ${me.status} ${me.statusText})`;try{Q=(await me.json()).message||Q}catch{console.error("Response was not valid JSON:",await me.text())}throw new Error(Q)}const oe=await me.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(oe,null,2)),We=(oe.tests||[]).filter(Q=>Q&&typeof Q.name=="string"&&Q.price!==void 0&&Q.id!==void 0).map(Q=>{const ie=parseFloat(Q.price||"0"),xe=!isNaN(ie)&&isFinite(ie)?ie:0;return{item_id:Q.id,name:Q.name,price:xe,quantity:1,total:xe*1,type:"lab_test"}}),We&&We.length===0&&(oe.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",oe.tests),q(Q=>`${Q?Q+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),Re="pending",Fe="lab",ve=g,Ie=oe.patient_id,P(We),O(Re),F(Fe),$(ve),Ie){const Q=await le(`/api/patients/${Ie}`);if(Q.ok){const ie=await Q.json();je=ie.name,ue=ie.phone??null,T(ie.insurance_type??null),se(je),S(ue)}else console.warn(`Could not fetch patient details for ID ${Ie} from lab order.`),se("Patient (Not Found)")}else console.warn(`Lab Order ${g} does not have an associated patient_id.`),se("Patient (Unknown)")}else if(P(s||null),O(c||null),F(o||null),$(l||null),V(d!==void 0?parseFloat(d):null),se(i||`ID ${n}`),Ie){const me=await le(`/api/patients/${Ie}`);if(me.ok){const oe=await me.json();S(oe.phone??null),T(oe.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${Ie}.`)}if(a){const me=await le(`/api/queue/${a}`);if(me.ok){const oe=await me.json();b(oe.token_number)}else console.warn(`Could not fetch queue details for ID ${a}.`)}}catch(Ie){console.error("Error fetching billing page details:",Ie),q(`Failed to load details: ${Ie.message}`),P(null),O(null),F(null),$(null),se(i||""),S(null),b(null)}finally{te(!1)}})()},[n,p,g,a,t]);const G=K=>{console.log(`Billing process completed for patient ID ${n}. New Bill ID: ${K}`),t(-1)},z=()=>{console.log(`Bill updated for patient ID ${n}.`),t(-1)};if(!n)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(TI,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(H)return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx(Z,{width:80,height:32})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx(Z,{width:300,height:32})}),r.jsxs("div",{className:"patient-info-bar mb-6",style:{display:"flex",gap:"1rem",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:120,height:20}),r.jsx(Z,{width:140,height:20})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 space-y-4",children:[r.jsx(Z,{width:"100%",height:200,className:"rounded-lg"}),r.jsx(Z,{width:"100%",height:150,className:"rounded-lg"})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(Z,{width:"100%",height:300,className:"rounded-lg"})})]})]})]});if(X)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(TI,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:X}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>t(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const we=(k??c)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(rn,{size:20,className:"lucide"})})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[p?"Bill Details":g?"Create Lab Bill":"Create Bill"," for Patient: ",Y||`ID ${n}`]}),r.jsxs("div",{className:"patient-info-bar",children:[x!==null&&r.jsxs("span",{children:[r.jsx(Va,{size:14,className:"lucide"})," Token: ",x]}),j&&r.jsxs("span",{children:[r.jsx(Zm,{size:14,className:"lucide"})," Phone: ",j]}),g&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(rs,{size:14,className:"lucide"})," Lab Order: ",g.substring(0,8),"..."]}),!j&&x===null&&!g&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),_&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(PJ,{size:14,className:"lucide"})," Insurance: ",_.replace(/_/g," ").replace(/\b\w/g,K=>K.toUpperCase())]}),!j&&x===null&&!g&&!_&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(nIe,{patientId:n,labOrderId:g,queueId:a,onBillCreated:G,onBillUpdated:z,initialItems:C??s,billType:I??o,relatedId:B??l,initialStatus:k??c,initialDiscountPercentage:L??d,readOnlyMode:we,doctorId:f,patientInsuranceType:_??void 0})]})]})},aIe=()=>{const{patientId:t}=Ma(),e=Mt(),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState("");return v.useEffect(()=>{(async()=>{if(!t){l("Patient ID not provided in URL.");return}s(!0),l(null),a([]);try{try{const x=await le(`/api/patients/${t}`);if(x.ok){const b=await x.json();d(b.name)}}catch(x){console.warn("Could not fetch patient name:",x)}console.log(`Fetching pharmacy orders for patient ID: ${t}`);const p=await le(`/api/pharmacy-orders/patient/${t}`);if(!p.ok){const x=await p.json().catch(()=>({}));throw new Error(x.message||`HTTP error! status: ${p.status}`)}const g=await p.json();console.log("Fetched Pharmacy Orders:",g),a(g||[])}catch(p){console.error("Error fetching pharmacy orders:",p),l(`Failed to load pharmacy orders: ${p.message}`)}finally{s(!1)}})()},[t]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(rn,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(yf,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",c&&`for ${c}`]}),r.jsx("div",{})," "]}),i&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:100,height:20})]}),r.jsx(Z,{width:200,height:20,className:"mb-2"}),r.jsx(Z,{width:180,height:20,className:"mb-3"}),r.jsx(Z,{width:120,height:24,className:"mb-2"}),r.jsxs("div",{className:"space-y-1 ml-4",children:[r.jsx(Z,{width:"80%",height:16}),r.jsx(Z,{width:"70%",height:16}),r.jsx(Z,{width:"60%",height:16})]})]},f))}),o&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:o}),!i&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!i&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(f.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",f.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",f.prescribedBy||"N/A"]}),f.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",f.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:f.medications.map((p,g)=>r.jsxs("li",{children:[p.name," - Qty: ",p.quantity,p.tabletsPerDay&&` (${p.tabletsPerDay} per day`,p.numberOfDays&&` for ${p.numberOfDays} days)`,!p.tabletsPerDay&&p.numberOfDays&&` (for ${p.numberOfDays} days)`,p.tabletsPerDay&&!p.numberOfDays&&")"]},g))})]},f.id))})]})},iIe=()=>{const t=Mt(),e=Lr(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState([]),[c,d]=v.useState(""),[f,p]=v.useState([]),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState(null),[T,C]=v.useState(!0),[P,k]=v.useState(""),[O,I]=v.useState([]),[F,B]=v.useState(!1),[$,L]=v.useState(null),[V,H]=v.useState(!1),[te,X]=v.useState(!1),[q,Y]=v.useState([]),[se,G]=v.useState(!1),[z,ce]=v.useState(null),we=/^\+?[0-9\s\-().]{7,20}$/,K=/^[a-zA-Z\s'-]{2,}$/,Ie=v.useCallback(async()=>{try{const ne=await le("/api/drugs");if(!ne.ok)throw new Error("Failed to fetch drugs");const de=await ne.json(),Te=de.drugs||de||[];s(Te)}catch(ne){console.error("Failed to fetch available drugs:",ne),x("Could not load drug list. "+ne.message)}},[]),We=v.useCallback(async ne=>{G(!0),ce(null);try{const de=await le(`/api/pharmacy-orders/patient/${ne}`);if(!de.ok){const Ee=await de.json().catch(()=>({}));throw new Error(Ee.message||`HTTP error! status: ${de.status}`)}const Te=await de.json();Y(Te||[])}catch(de){console.error("Failed to fetch previous pharmacy orders:",de),ce(`Could not load previous orders: ${de.message}`)}finally{G(!1)}},[]);v.useEffect(()=>{var ne;Ie(),(ne=e.state)!=null&&ne.patient?ae(e.state.patient):C(!0)},[Ie,e.state]),v.useEffect(()=>{n!=null&&n.id?We(n.id):Y([])},[n,We]);const Re=v.useMemo(()=>new to(i,{keys:["name","brand_name"],threshold:.3}),[i]);v.useEffect(()=>{if(!c){p([]);return}const ne=Re.search(c).map(de=>de.item);p(ne.slice(0,10))},[c,Re]);const Fe=v.useMemo(()=>zc(async ne=>{if(ne.trim().length<2){I([]),B(!1),L(null);return}B(!0),L(null);try{const de=new URLSearchParams({search:encodeURIComponent(ne),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Te=await le(`/api/patients?${de.toString()}`);if(!Te.ok){const W=await Te.text();throw new Error(`API Error (${Te.status}): ${W||Te.statusText}`)}const Ee=await Te.json();I(Ee.patients)}catch(de){console.error("Error searching patients:",de),L(de.message||"Failed to search patients."),I([])}finally{B(!1)}},300),[we]),ve=ne=>{const de=ne.target.value;k(de),H(we.test(de)),X(K.test(de)&&!we.test(de)),B(!0),Fe(de)},ae=v.useCallback(ne=>{a(ne),C(!1),k(""),I([]),L(null)},[]),je=v.useCallback(async ne=>{if(!P||ne==="phone"&&!V||ne==="name"&&!te){L(`Invalid ${ne} to create a new patient.`);return}B(!0),L(null);try{const Te=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ne==="name"?P:"direct pharmacy",phone:ne==="phone"?P:null,age:null,gender:null,token:null})});if(!Te.ok){const W=await Te.json();throw new Error(W.message||`Failed to create patient: ${Te.statusText}`)}const Ee=await Te.json();alert(`New patient "${Ee.name}" created with ${ne==="phone"?`phone ${Ee.phone}`:`name ${Ee.name}`}.`),ae(Ee)}catch(de){console.error("Error creating new patient:",de),L(de.message||"Failed to create new patient.")}finally{B(!1)}},[P,V,te,ae]),ue=()=>{a(null),C(!0),l([]),x(null),Y([])},me=ne=>{if(o.some(de=>de.drug_id===ne.id)){const de=ne.name||ne.brand_name||"This drug";x(`${de} is already in the order.`),setTimeout(()=>x(null),3e3),d(""),p([]);return}l(de=>[...de,{drug_id:ne.id,name:ne.name||ne.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,mrp:Number(ne.mrp)||0,originalMrp:Number(ne.mrp)||0,stock:ne.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(ne.mrp)||0)/(Q(ne.pack)||1),pack:ne.pack}]),d(""),p([])},oe=()=>{const ne=c.trim();if(!ne){x("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>x(null),3e3);return}t("/dashboard/inventory/add",{state:{initialDrugName:ne}}),d(""),p([])},Q=ne=>{if(!ne)return null;const de=ne.match(/(?:\d+x)?(\d+)/);return de?parseInt(de[1],10):null},ie=ne=>{l(de=>de.filter(Te=>(Te.drug_id??Te.name)!==ne))},xe=(ne,de)=>{l(Te=>Te.map(Ee=>{if((Ee.drug_id??Ee.name)===ne&&Ee.isLoose){const ye=Q(Ee.pack),he=Math.max(0,de),ge=he*(ye??1)+(Ee.looseUnits??0);return{...Ee,loosePacks:he,looseQuantity:ge,pack_quantity:he}}return Ee}))},ee=(ne,de)=>{l(Te=>Te.map(Ee=>{if((Ee.drug_id??Ee.name)===ne&&Ee.isLoose){const ye=Q(Ee.pack),he=Math.max(0,de),ge=(Ee.loosePacks??0)*(ye??1)+he;return{...Ee,looseUnits:he,looseQuantity:ge}}return Ee}))},Se=ne=>{const de=[];ne.medications.forEach(Te=>{if(o.find(W=>W.drug_id&&Te.drug_id&&W.drug_id===Te.drug_id||W.name.toLowerCase()===Te.name.toLowerCase()))l(W=>W.map(ye=>{if(ye.drug_id&&Te.drug_id&&ye.drug_id===Te.drug_id||ye.name.toLowerCase()===Te.name.toLowerCase()){const he=(ye.pack_quantity??0)+(Te.pack_quantity??0),ge=(ye.loose_quantity??0)+(Te.loose_quantity??0),_e=Te.tabletsPerDay??ye.tabletsPerDay,ze=Te.numberOfDays??ye.numberOfDays,Oe=Q(ye.pack),He=he*(Oe??1)+ge;return{...ye,pack_quantity:he,loose_quantity:ge,directions_to_use:Te.directions_to_use??ye.directions_to_use,tabletsPerDay:_e,numberOfDays:ze,looseQuantity:He,loosePacks:Math.floor(He/(Oe??1)),looseUnits:He%(Oe??1)}}return ye}));else{let W=Te.drug_id,ye=Te.drug_id?i.find(he=>he.id===Te.drug_id):void 0;if(!W&&Te.name){const he=i.find(ge=>ge.name&&ge.name.toLowerCase()===Te.name.toLowerCase());he&&(W=he.id,ye=he)}de.push({drug_id:W,name:Te.name,pack_quantity:Te.pack_quantity??0,loose_quantity:Te.loose_quantity??0,directions_to_use:Te.directions_to_use,tabletsPerDay:Te.tabletsPerDay??1,numberOfDays:Te.numberOfDays??1,mrp:ye?ye.mrp:Te.pack_price,originalMrp:ye?ye.mrp:Te.pack_price,stock:ye?ye.stock:Te.stock,isLoose:!0,loosePacks:0,looseUnits:(Te.pack_quantity??0)*(Q((ye==null?void 0:ye.pack)||Te.pack)??1)+(Te.loose_quantity??0),looseQuantity:(Te.pack_quantity??0)*(Q((ye==null?void 0:ye.pack)||Te.pack)??1)+(Te.loose_quantity??0),pricePerLooseUnit:(ye?Number(ye.mrp):Number(Te.pack_price)||0)/(Q((ye==null?void 0:ye.pack)||Te.pack)||1),pack:(ye==null?void 0:ye.pack)||Te.pack})}}),l(Te=>[...Te,...de]),ne.prescriptionForUnavailableDrugs&&(!S||!S.includes(ne.prescriptionForUnavailableDrugs))&&_(Te=>Te?`${Te}

-- From Order ${ne.id.substring(0,8)} --
${ne.prescriptionForUnavailableDrugs}`:ne.prescriptionForUnavailableDrugs),x("Medications from previous order added to current order."),setTimeout(()=>x(null),3e3)},qe=async ne=>{if(ne.preventDefault(),x(null),j(!0),!n){x("No patient selected for the order."),j(!1);return}if(o.length===0&&!(S!=null&&S.trim())){x("Please add at least one medication or provide a prescription for unavailable drugs."),j(!1);return}const de=o.filter(Ee=>{const W=Ee.looseQuantity??0;return W<=0||Ee.stock!==void 0&&W>Ee.stock});if(de.length>0){x(`Invalid quantity or insufficient stock for: ${de.map(Ee=>Ee.name).join(", ")}`),j(!1);return}const Te={patient_id:n.id,items:o.map(Ee=>{const W=Ee.mrp??0,ye=Ee.pricePerLooseUnit??0,he=ye*(Ee.looseQuantity??0);return{drug_id:Ee.drug_id===void 0?null:Ee.drug_id,name:Ee.name,pack_quantity:Ee.loosePacks??0,loose_quantity:Ee.looseUnits??0,pack_price:W,loose_price:ye,total_price:he,price:Ee.originalMrp??0,directions_to_use:Ee.directions_to_use===void 0?null:Ee.directions_to_use,tabletsPerDay:Ee.tabletsPerDay??1,numberOfDays:Ee.numberOfDays??1}}),order_total:Ge,prescription_for_unavailable_drugs:S};try{const Ee=await le("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)});if(!Ee.ok){const W=await Ee.json();throw new Error(W.message||`Failed to create order: ${Ee.statusText}`)}t(-1)}catch(Ee){console.error("Failed to create pharmacy order:",Ee),x(Ee.message||"Failed to create order. Please try again.")}finally{j(!1)}},Ge=v.useMemo(()=>o.reduce((ne,de)=>{const Te=de.isLoose?de.pricePerLooseUnit??0:de.mrp??0,Ee=de.isLoose?de.looseQuantity??0:de.quantity??0;return ne+Te*Ee},0),[o]),Ne=(Number(Ge)||0).toFixed(2);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(rn,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),T&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:P,onChange:ve,className:"custom-text-input mt-1",autoFocus:!0})]}),$&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:$})," ",F?r.jsx("div",{className:"patient-search-results items-loading mt-1",children:[1,2,3].map(ne=>r.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:120,height:20})]}),r.jsx("div",{className:"mt-1 sm:mt-0",children:r.jsx(Z,{width:150,height:16})})]})},ne))}):O.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",O.map(ne=>r.jsxs("li",{onClick:()=>ae({id:ne.id,name:ne.name,token:ne.token,age:ne.age,gender:ne.gender,phone:ne.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",ne.token]}),ne.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[ne.age?`${ne.age} yrs`:"Age N/A",ne.gender?` / ${ne.gender}`:" / Gender N/A",ne.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",ne.phone]})]})]}),ne.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",ne.phone]})]},ne.id))]})]}),P.length>=2&&!F&&O.length===0&&!$&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',P,'".']}),V&&r.jsx("button",{type:"button",onClick:()=>je("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:F,children:'Create "direct pharmacy" Patient with this Phone'}),te&&r.jsx("button",{type:"button",onClick:()=>je("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:F,children:"Create Patient with this Name"})]}),P.length<2&&!F&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),n&&!T&&r.jsxs("form",{onSubmit:qe,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:n.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:n.token??"N/A"}),n.age&&`    Age: ${n.age}`,n.gender&&`    Gender: ${n.gender}`,n.phone&&`    Phone: ${n.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${n.id}`,children:["ID: ",n.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:ue,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),g&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:g})," ",se?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:[1,2].map(ne=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx(Z,{width:"90%",height:16}),r.jsx(Z,{width:"70%",height:16})]}),r.jsx(Z,{width:"100%",height:36,style:{borderRadius:"6px"}})]},ne))})]}):z?r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:z}):q.length>0?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:q.map(ne=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(ne.date).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ne.status==="dispensed"?"bg-green-100 text-green-800":ne.status==="pending"?"bg-yellow-100 text-yellow-800":ne.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:ne.status.charAt(0).toUpperCase()+ne.status.slice(1)})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:ne.medications.map((de,Te)=>r.jsxs("li",{children:[r.jsx("strong",{children:de.name}),": ",de.quantity," Qty",de.directions_to_use&&` - Directions: ${de.directions_to_use}`]},Te))}),ne.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),r.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",r.jsx(bf,{remarkPlugins:[jf],children:ne.prescriptionForUnavailableDrugs})]})]}),r.jsxs("button",{type:"button",onClick:()=>Se(ne),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[r.jsx(qn,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},ne.id))})]}):n&&r.jsx("div",{className:"content-section text-center py-4 mt-4",children:r.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:S??"",onChange:ne=>_(ne.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:c,onChange:ne=>d(ne.target.value),className:"custom-text-input mt-1"}),c&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",f.length>0&&r.jsxs("ul",{children:[" ",f.map(ne=>r.jsxs("li",{onClick:()=>me(ne),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:ne.name||ne.brand_name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",ne.stock??"N/A",", MRP: ",Number(ne.mrp||0).toFixed(2),")"]})]},ne.id))]}),c.trim()&&!i.some(ne=>ne.name&&ne.name.toLowerCase()===c.trim().toLowerCase()||ne.brand_name&&ne.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsxs("div",{onClick:oe,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',c.trim(),'" as new item']}),c.trim()&&f.length===0&&i.some(ne=>ne.name&&ne.name.toLowerCase()===c.trim().toLowerCase()||ne.brand_name&&ne.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",o.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),o.length>0&&r.jsx("ul",{className:"space-y-4",children:o.map(ne=>{const de=ne.drug_id??ne.name,Te=!ne.drug_id;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${Te?"custom":""}`,children:[" ",ne.name,Te?" (custom)":""]}),!Te&&ne.pricePerLooseUnit!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(ne.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),ne.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${ne.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",ne.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-packs-${de}`,className:"dosage-label",children:"Packs:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>xe(de,(ne.loosePacks??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-packs-${de}`,min:"0",value:ne.loosePacks||"",onChange:Ee=>{const W=parseInt(Ee.target.value,10);xe(de,isNaN(W)?0:W)},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>xe(de,(ne.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-units-${de}`,className:"dosage-label",children:"Loose:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>ee(de,(ne.looseUnits??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-units-${de}`,min:"0",value:ne.looseUnits||"",onChange:Ee=>{const W=parseInt(Ee.target.value,10);ee(de,isNaN(W)?0:W)},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>ee(de,(ne.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),ne.pack&&r.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",ne.pack.split("x")[1]||ne.pack," per pack)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((ne.pricePerLooseUnit??0)*(ne.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ie(de),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(Bn,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-per-day-${de}`,className:"dosage-label",children:"Per Day:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(W=>W.drug_id===de?{...W,tabletsPerDay:Math.max(1,(W.tabletsPerDay??1)-1)}:W)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`tablets-per-day-${de}`,min:"1",value:ne.tabletsPerDay??1,onChange:Ee=>{const W=parseInt(Ee.target.value,10);l(ye=>ye.map(he=>he.drug_id===de?{...he,tabletsPerDay:isNaN(W)?1:Math.max(1,W)}:he))},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(W=>W.drug_id===de?{...W,tabletsPerDay:(W.tabletsPerDay??1)+1}:W)),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`number-of-days-${de}`,className:"dosage-label",children:"No. Days:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(W=>W.drug_id===de?{...W,numberOfDays:Math.max(1,(W.numberOfDays??1)-1)}:W)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`number-of-days-${de}`,min:"1",value:ne.numberOfDays??1,onChange:Ee=>{const W=parseInt(Ee.target.value,10);l(ye=>ye.map(he=>he.drug_id===de?{...he,numberOfDays:isNaN(W)?1:Math.max(1,W)}:he))},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(W=>W.drug_id===de?{...W,numberOfDays:(W.numberOfDays??1)+1}:W)),className:"quantity-btn",children:"+"})]})]})]}),r.jsx("div",{className:"flex items-center mt-2",children:ne.pack&&Q(ne.pack)&&r.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const Ee=Q(ne.pack),W=ne.looseQuantity??0;if(Ee&&Ee>0){const ye=Math.floor(W/Ee),he=W%Ee;return`(Subtract: ${ye} packs, ${he} loose)`}return""})()})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${de}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${de}`,placeholder:"e.g., 'After food', 'Twice a day'",value:ne.directions_to_use??"",onChange:Ee=>{const W=Ee.target.value;l(ye=>ye.map(he=>(he.drug_id??he.name)===de?{...he,directions_to_use:W}:he))},className:"dosage-input text-sm w-full mt-1"})]})]},de)})})]}),o.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",Ne]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:b||o.length===0&&!(S!=null&&S.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${b||o.length===0&&!(S!=null&&S.trim())?"":"hover:opacity-90"}`,children:b?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},bG=()=>{const{orderId:t}=Ma(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState(null),[o,l]=v.useState([]),[c,d]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState([]),[b,j]=v.useState(null),[S,_]=v.useState(!1),[T,C]=v.useState(null),[P,k]=v.useState(!0);Wc();const O=v.useCallback(async()=>{k(!0);try{const q=await le(`/api/pharmacy-orders/${t}`);if(!q.ok)throw new Error("Failed to fetch order details");const Y=await q.json();a(Y),s({id:Y.patientId,name:Y.patientName||"N/A",token:Y.patientTokenNumber}),C(Y.prescriptionForUnavailableDrugs);const se=Y.medications.map(G=>{const z=B(G.pack),ce=G.pack_quantity*(z??1)+G.loose_quantity;return{...G,isLoose:!0,loosePacks:G.pack_quantity,looseUnits:G.loose_quantity,looseQuantity:ce,pack_price:G.pack_price,loose_price:G.loose_price,total_price:G.total_price,pricePerLooseUnit:G.loose_price,originalPrice:G.pack_price,box_number:G.box_number,pack:G.pack,batch:G.batch,expiry_date:G.expiry_date,discount_percentage:G.discount_percentage}});d(se)}catch(q){j("Could not load order details. "+q.message)}finally{k(!1)}},[t]),I=v.useCallback(async()=>{try{const q=await le("/api/drugs");if(!q.ok)throw new Error("Failed to fetch drugs");const Y=await q.json(),se=Y.drugs||Y||[];l(se)}catch(q){j("Could not load drug list. "+q.message)}},[]);v.useEffect(()=>{O(),I()},[O,I]);const F=v.useMemo(()=>new to(o,{keys:["name","brand_name"],threshold:.3}),[o]);v.useEffect(()=>{if(!f){x([]);return}const q=F.search(f).map(Y=>Y.item);x(q.slice(0,10))},[f,F]);const B=q=>{if(!q)return null;const Y=q.match(/(?:\d+x)?(\d+)/);return Y?parseInt(Y[1],10):null},$=q=>{if(c.some(Y=>Y.drug_id===q.id)){j(`${q.name||q.brand_name} is already in the order.`),setTimeout(()=>j(null),3e3),p(""),x([]);return}d(Y=>[...Y,{drug_id:q.id,name:q.name||q.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(q.mrp)||0,loose_price:(Number(q.mrp)||0)/(B(q.pack)||1),total_price:(Number(q.mrp)||0)/(B(q.pack)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:q.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(q.mrp)||0)/(B(q.pack)||1),originalPrice:Number(q.mrp)||0,pack:q.pack}]),p(""),x([])},L=q=>{d(Y=>Y.filter(se=>(se.drug_id??se.name)!==q))},V=(q,Y)=>{d(se=>se.map(G=>{if((G.drug_id??G.name)===q&&G.isLoose){const z=B(G.pack),ce=Math.max(0,Y),we=ce*(z??1)+(G.looseUnits??0);return{...G,loosePacks:ce,looseQuantity:we,pack_quantity:ce}}return G}))},H=(q,Y)=>{d(se=>se.map(G=>{if((G.drug_id??G.name)===q&&G.isLoose){const z=B(G.pack),ce=Math.max(0,Y),we=(G.loosePacks??0)*(z??1)+ce;return{...G,looseUnits:ce,looseQuantity:we,loose_quantity:ce}}return G}))},te=async q=>{if(q.preventDefault(),j(null),_(!0),c.length===0&&!(T!=null&&T.trim())){j("Please add at least one medication or provide a prescription."),_(!1);return}const Y=c.filter(G=>{const z=G.looseQuantity??0;return z<=0||G.stock!==void 0&&z>G.stock});if(Y.length>0){j(`Invalid quantity or insufficient stock for: ${Y.map(G=>G.name).join(", ")}`),_(!1);return}const se={items:c.map(G=>({drug_id:G.drug_id??null,name:G.name,pack_quantity:G.loosePacks??0,loose_quantity:G.looseUnits??0,pack_price:G.pack_price??0,loose_price:G.loose_price??0,total_price:(G.loose_price??0)*(G.looseQuantity??0),discount_percentage:G.discount_percentage??0,directions_to_use:G.directions_to_use??null,tabletsPerDay:G.tabletsPerDay??1,numberOfDays:G.numberOfDays??1})),prescription_for_unavailable_drugs:T,order_total:X};try{const G=await le(`/api/pharmacy-orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!G.ok){const z=await G.json();throw new Error(z.message||"Failed to update order")}e(-1)}catch(G){j(G.message||"Failed to update order. Please try again.")}finally{_(!1)}},X=v.useMemo(()=>c.reduce((q,Y)=>{const se=Y.loose_price??0,G=Y.looseQuantity??0;return q+se*G},0),[c]);return P?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsx(Z,{width:300,height:32})]}),r.jsx("div",{className:"header-right",children:r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}})})]}),r.jsx("div",{className:"order-meta",style:{display:"flex",gap:"1rem",margin:"1rem 0"},children:r.jsx(Z,{width:200,height:24})}),r.jsxs("div",{className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(Z,{width:200,height:24})}),r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(Z,{height:42})})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(Z,{width:250,height:24})}),r.jsxs("div",{className:"table-container",style:{padding:"0 1rem 1rem"},children:[r.jsxs("div",{className:"table-header-row",style:{display:"flex",gap:"1rem",padding:"1rem"},children:[r.jsx(Z,{width:"30%",height:20}),r.jsx(Z,{width:"20%",height:20}),r.jsx(Z,{width:"20%",height:20}),r.jsx(Z,{width:"15%",height:20}),r.jsx(Z,{width:"5%",height:20})]}),r.jsx("div",{className:"table-body",children:[1,2,3].map(q=>r.jsxs("div",{className:"table-row",style:{display:"flex",gap:"1rem",padding:"1rem",borderBottom:"1px solid #eee"},children:[r.jsxs("div",{style:{width:"30%"},children:[r.jsx(Z,{width:"80%",height:20,className:"mb-2"}),r.jsx(Z,{width:"40%",height:14})]}),r.jsx(Z,{width:"20%",height:36}),r.jsx(Z,{width:"20%",height:36}),r.jsx(Z,{width:"15%",height:20,style:{alignSelf:"center"}}),r.jsx(Z,{width:"5%",height:24,style:{alignSelf:"center"}})]},q))})]})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx(Z,{width:180,height:24})}),r.jsx("div",{style:{padding:"1rem"},children:r.jsx(Z,{height:80})})]}),r.jsx("div",{style:{marginTop:"20px"},children:r.jsx(Z,{height:48,width:"100%"})})]})]})]}):n?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:r.jsx(rn,{size:20})}),r.jsxs("h2",{className:"page-title",children:["EDIT ORDER ",r.jsxs("span",{className:"text-gray-500 text-lg font-normal ml-2",children:[i==null?void 0:i.name," #",n.id.substring(0,4)]})]})]}),r.jsx("div",{className:"header-right",children:r.jsx("span",{className:"status-badge",children:n.status.toUpperCase()})})]}),r.jsx("div",{className:"order-meta",children:r.jsxs("span",{className:"order-date",children:[" Order Date: ",new Date(n.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})}),r.jsxs("form",{onSubmit:te,className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{children:" Find & Add Medication"})}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or brand...",value:f,onChange:q=>p(q.target.value),className:"search-input"}),f&&r.jsx("div",{className:"dropdown-results",children:g.length>0?r.jsx("ul",{children:g.map(q=>r.jsxs("li",{onClick:()=>$(q),className:"dropdown-item",children:[r.jsx("span",{className:"drug-name",children:q.name||q.brand_name}),r.jsxs("span",{className:"drug-meta",children:["(Stock: ",q.stock??"N/A",", MRP: ",Number(q.mrp||0).toFixed(2),")"]})]},q.id))}):r.jsxs("div",{className:"p-3 text-gray-500 text-sm",children:['No drugs found matching "',f,'"']})})]})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{children:[" Medications in Order ",r.jsxs("span",{className:"item-count",children:[c.length," items"]})]})}),c.length>0?r.jsxs("div",{className:"table-container",children:[r.jsxs("div",{className:"table-header-row",children:[r.jsx("div",{className:"col-medication",children:"MEDICATION"}),r.jsx("div",{className:"col-directions",children:"DIRECTIONS"}),r.jsx("div",{className:"col-quantity",children:"QUANTITY"}),r.jsx("div",{className:"col-subtotal",children:"SUBTOTAL"}),r.jsx("div",{className:"col-action"})]}),r.jsx("div",{className:"table-body",children:c.map(q=>{const Y=q.drug_id??q.name;return r.jsxs("div",{className:"table-row",children:[r.jsxs("div",{className:"col-medication",children:[r.jsx("span",{className:"med-name",children:q.name}),q.pack&&r.jsx("span",{className:"med-unit text-xs text-gray-500 block",children:q.pack}),r.jsxs("div",{className:"stock-info",children:[" Stock: ",r.jsxs("span",{className:"stock-value",children:[" ",q.stock!==void 0?q.pack?`BOX OF ${B(q.pack)}`:q.stock:"N/A"]})]})]}),r.jsx("div",{className:"col-directions",children:r.jsx("input",{type:"text",placeholder:"1 tablet twice daily...",value:q.directions_to_use??"",onChange:se=>{const G=se.target.value;d(z=>z.map(ce=>(ce.drug_id??ce.name)===Y?{...ce,directions_to_use:G}:ce))},className:"directions-input"})}),r.jsx("div",{className:"col-quantity",children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"PACKS"}),r.jsx("input",{type:"number",min:"0",value:q.loosePacks||"",onChange:se=>V(Y,se.target.value===""?0:parseInt(se.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"LOOSE"}),r.jsx("input",{type:"number",min:"0",value:q.looseUnits||"",onChange:se=>H(Y,se.target.value===""?0:parseInt(se.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]})]})}),r.jsxs("div",{className:"col-subtotal",children:["",(Number((q.pricePerLooseUnit??0)*(q.looseQuantity??0))||0).toFixed(2)]}),r.jsx("div",{className:"col-action",children:r.jsx("button",{type:"button",onClick:()=>L(Y),className:"delete-btn",title:"Remove Item",children:r.jsx(Bn,{size:18,strokeWidth:2.5})})})]},Y)})})]}):r.jsx("div",{className:"empty-state",children:"No medications added. Search above to add."})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx("h3",{children:" Prescription Notes"})}),r.jsx("textarea",{rows:3,value:T??"",onChange:q=>C(q.target.value||null),placeholder:"Add notes about unavailable drugs...",className:"notes-input"})]}),r.jsxs("button",{type:"submit",disabled:S,className:"confirm-btn",style:{width:"100%",margin:"20px 0 0 0"},children:[r.jsx("span",{className:"check-icon",children:""})," ",S?"Updating...":"Confirm Changes"]}),b&&r.jsx("div",{className:"error-alert mt-4",children:b})]})]})]}):r.jsx("div",{className:"p-6 text-red-500 flex justify-center items-center h-screen",children:"Order not found or failed to load."})},sIe=(t,e,n,a="non-black")=>{if(isNaN(t)||isNaN(e)||t<=0||e<=0)return null;let i;return n==="female"?t<=.7?i=141*Math.pow(t/.7,-.329)*Math.pow(.993,e):i=141*Math.pow(t/.7,-1.209)*Math.pow(.993,e):t<=.9?i=141*Math.pow(t/.9,-.411)*Math.pow(.993,e):i=141*Math.pow(t/.9,-1.209)*Math.pow(.993,e),a==="black"&&(i*=1.018),parseFloat(i.toFixed(2))},oIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0||n>=400)return null;const a=t-e-n/5;return parseFloat(a.toFixed(2))},lIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},cIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},uIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=t-(e+n);return parseFloat(a.toFixed(2))},dIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=2*t+e/18+n/2.8;return parseFloat(a.toFixed(2))},hIe=t=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(t),EB=()=>{var ue,me;const{orderId:t}=Ma(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState(null),[S,_]=v.useState({}),[T,C]=v.useState(null),[P,k]=v.useState(!1),[O,I]=v.useState(""),[F,B]=v.useState(!1),[$,L]=v.useState(""),[V,H]=v.useState(""),[te,X]=v.useState(!1),[q,Y]=v.useState(""),se=v.useCallback(async oe=>{var Q;try{const ie=await le(`/api/patients/${oe}`);if(!ie.ok)throw new Error(`Failed to fetch patient details: ${ie.status}`);const xe=await ie.json();x(xe.age),j(((Q=xe.sex)==null?void 0:Q.toLowerCase())==="female"?"female":"male"),xe.phone&&a(ee=>ee?{...ee,Patient:{...ee.Patient,phone:xe.phone}}:null)}catch(ie){console.error("Error fetching patient details:",ie),x(null),j(null)}},[]),G=v.useCallback(async()=>{if(t){l(!0),p(null);try{const oe=await le(`/api/lab/${t}`);if(!oe.ok){const xe=await oe.json().catch(()=>({message:`HTTP error! status: ${oe.status}`}));throw new Error(xe.message||`HTTP error! status: ${oe.status}`)}const Q=await oe.json();if(a(Q),Q.createdAt)try{const xe=new Date(Q.createdAt),ee=new Date(xe.getTime()-xe.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(ee)}catch(xe){console.error("Error formatting date for edit:",xe)}if(Q.report_date)try{const xe=new Date(Q.report_date),ee=new Date(xe.getTime()-xe.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(ee)}catch(xe){console.error("Error formatting report date for edit:",xe)}else{const xe=new Date,ee=new Date(xe.getTime()-xe.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(ee)}Q.referral_doctor&&Y(Q.referral_doctor),Q.patient_id&&se(Q.patient_id);const ie={};if(Q.tests&&Q.tests.forEach(xe=>{ie[xe.id]={},xe.default_parameters&&xe.default_parameters.length>0?xe.default_parameters.forEach(ee=>{ie[xe.id][ee.name]=ee.defaultValue}):ie[xe.id].report_content=""}),Q.report_content)try{const xe=JSON.parse(Q.report_content);typeof xe=="object"&&xe!==null&&!Array.isArray(xe)?s(xe):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),s(ie))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),s(ie)}else s({})}catch(oe){console.error("Failed to fetch lab order details:",oe),p(oe instanceof Error?oe.message:"An unknown error occurred while fetching order details.")}finally{l(!1)}}},[t,se]);v.useEffect(()=>{t?G():(p("No Order ID provided in the URL."),l(!1))},[t,G]),v.useEffect(()=>{(async()=>{try{const Q=await le("/api/clinics/settings");if(Q.ok){const ie=await Q.json();H(ie.labLetterheadUrl||"")}}catch(Q){console.error("Error fetching clinic settings:",Q)}})()},[]);const z=(oe,Q,ie)=>{s(xe=>{var He,nt,mt,De,Je,et,ut,_t,vt,ke,lt,Tt,Ue,jt,Ct,Xn,br,Vn,Cn;const ee={...xe,[oe]:{...xe[oe],[Q]:ie}},Se=parseFloat((He=ee[oe])==null?void 0:He.Creatinine),qe=g,Ge=b;if(Q==="Creatinine"&&!isNaN(Se)&&qe!==null&&Ge!==null){const wn=sIe(Se,qe,Ge);wn!==null&&((nt=n==null?void 0:n.tests.find(Hn=>Hn.id===oe))!=null&&nt.default_parameters.find(Hn=>Hn.name==="eGFR"))&&(ee[oe].eGFR=wn)}const Ne=parseFloat((mt=ee[oe])==null?void 0:mt["Total Cholesterol"]),ne=parseFloat((De=ee[oe])==null?void 0:De["HDL Cholesterol"]),de=parseFloat((Je=ee[oe])==null?void 0:Je.Triglycerides);if((Q==="Total Cholesterol"||Q==="HDL Cholesterol"||Q==="Triglycerides")&&!isNaN(Ne)&&!isNaN(ne)&&!isNaN(de)){const wn=oIe(Ne,ne,de);wn!==null&&((et=n==null?void 0:n.tests.find(Hn=>Hn.id===oe))!=null&&et.default_parameters.find(Hn=>Hn.name==="LDL Cholesterol"))&&(ee[oe]["LDL Cholesterol"]=wn)}const Te=parseFloat((ut=ee[oe])==null?void 0:ut["Total Bilirubin"]),Ee=parseFloat((_t=ee[oe])==null?void 0:_t["Direct Bilirubin"]);if((Q==="Total Bilirubin"||Q==="Direct Bilirubin")&&!isNaN(Te)&&!isNaN(Ee)){const wn=lIe(Te,Ee);wn!==null&&((vt=n==null?void 0:n.tests.find(Hn=>Hn.id===oe))!=null&&vt.default_parameters.find(Hn=>Hn.name==="Indirect Bilirubin"))&&(ee[oe]["Indirect Bilirubin"]=wn)}const W=parseFloat((ke=ee[oe])==null?void 0:ke["Total Protein"]),ye=parseFloat((lt=ee[oe])==null?void 0:lt.Albumin);if((Q==="Total Protein"||Q==="Albumin")&&!isNaN(W)&&!isNaN(ye)){const wn=cIe(W,ye);wn!==null&&((Tt=n==null?void 0:n.tests.find(Hn=>Hn.id===oe))!=null&&Tt.default_parameters.find(Hn=>Hn.name==="Globulin"))&&(ee[oe].Globulin=wn)}const he=parseFloat((Ue=ee[oe])==null?void 0:Ue.Sodium),ge=parseFloat((jt=ee[oe])==null?void 0:jt.Chloride),_e=parseFloat((Ct=ee[oe])==null?void 0:Ct.Bicarbonate);if((Q==="Sodium"||Q==="Chloride"||Q==="Bicarbonate")&&!isNaN(he)&&!isNaN(ge)&&!isNaN(_e)){const wn=uIe(he,ge,_e);wn!==null&&((Xn=n==null?void 0:n.tests.find(Hn=>Hn.id===oe))!=null&&Xn.default_parameters.find(Hn=>Hn.name==="Anion Gap"))&&(ee[oe]["Anion Gap"]=wn)}const ze=parseFloat((br=ee[oe])==null?void 0:br.Glucose),Oe=parseFloat((Vn=ee[oe])==null?void 0:Vn.BUN);if((Q==="Sodium"||Q==="Glucose"||Q==="BUN")&&!isNaN(he)&&!isNaN(ze)&&!isNaN(Oe)){const wn=dIe(he,ze,Oe);wn!==null&&((Cn=n==null?void 0:n.tests.find(Hn=>Hn.id===oe))!=null&&Cn.default_parameters.find(Hn=>Hn.name==="Osmolality"))&&(ee[oe].Osmolality=wn)}return ee})},ce=async oe=>{const Q=i[oe]||{},ie=n==null?void 0:n.tests.find(qe=>qe.id===oe);if(!ie)return;const xe={};ie.default_parameters&&ie.default_parameters.forEach(qe=>{xe[qe.name]=qe.defaultValue});const ee={...xe,...Q},Se={...i,[oe]:ee};s(Se),d(!0),p(null);try{const qe=await le(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(Se),isPartial:!0})});if(!qe.ok)throw new Error(`Save failed: ${qe.status}`)}catch(qe){console.error("Error saving test report:",qe),alert("Failed to save test report.")}finally{d(!1)}},we=async(oe=null)=>{if(!n||!n.tests||!t){alert("Order details not loaded.");return}d(!0),p(null);try{let Q;if(oe===null){const xe={};n.tests.forEach(ee=>{const Se=i[ee.id]||{},qe={};ee.default_parameters&&ee.default_parameters.forEach(Ge=>{Ge.defaultValue!==void 0&&Ge.defaultValue!==null&&(qe[Ge.name]=Ge.defaultValue)}),xe[ee.id]={...qe,...Se},(!ee.default_parameters||ee.default_parameters.length===0)&&!xe[ee.id].report_content&&(xe[ee.id].report_content="")}),Q=xe,s(xe)}else{const xe=i[oe]||{},ee=n.tests.find(Ge=>Ge.id===oe);if(!ee){d(!1);return}const Se={};ee.default_parameters&&ee.default_parameters.forEach(Ge=>{Se[Ge.name]=Ge.defaultValue});const qe={...Se,...xe};Q={...i,[oe]:qe},s(Q)}const ie=await le(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(Q),isPartial:oe!==null})});if(!ie.ok)throw new Error(`Save failed: ${ie.status}`);C(oe),setTimeout(()=>{window.print()},100)}catch(Q){console.error("Error saving before print:",Q),alert("Failed to save report before printing.")}finally{d(!1)}},K=()=>{n&&EM(n)},Ie=async()=>{if(!n||!n.tests){alert("Order details not loaded.");return}if(!t){alert("Cannot submit report without an Order ID.");return}const oe={};if(n.tests.forEach(Q=>{const ie=i[Q.id]||{},xe={};Q.default_parameters&&Q.default_parameters.forEach(ee=>{ee.defaultValue!==void 0&&ee.defaultValue!==null&&(xe[ee.name]=ee.defaultValue)}),oe[Q.id]={...xe,...ie},(!Q.default_parameters||Q.default_parameters.length===0)&&!oe[Q.id].report_content&&(oe[Q.id].report_content="")}),Object.keys(oe).length===0){alert("Report content cannot be empty.");return}s(oe),d(!0),p(null);try{const Q=await le(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(oe)})});if(!Q.ok){const ie=await Q.json().catch(()=>({message:`Submission failed: ${Q.status}`}));throw new Error(ie.message||`Submission failed: ${Q.status}`)}e(-1)}catch(Q){console.error("Error submitting report:",Q),p(Q instanceof Error?Q.message:"An unknown error occurred during submission.")}finally{d(!1)}},We=async()=>{if(!(!t||!O))try{const oe=await le(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(O).toISOString()})});if(!oe.ok)throw new Error("Failed to update date");const Q=await oe.json();Q.order&&a(ie=>ie?{...ie,createdAt:Q.order.createdAt}:null),k(!1)}catch(oe){console.error("Failed to update date:",oe),alert("Failed to update date")}},Re=async()=>{if(!(!t||!$))try{const oe=await le(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportDate:new Date($).toISOString()})});if(!oe.ok)throw new Error("Failed to update report date");const Q=await oe.json();Q.order&&a(ie=>ie?{...ie,report_date:Q.order.report_date}:null),B(!1)}catch(oe){console.error("Failed to update report date:",oe),alert("Failed to update report date")}},Fe=async()=>{if(t)try{const oe=await le(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralDoctor:q})});if(!oe.ok)throw new Error("Failed to update referral doctor");const Q=await oe.json();Q.order&&(Y(Q.order.referral_doctor||""),a(ie=>ie?{...ie,referral_doctor:Q.order.referral_doctor}:null)),X(!1)}catch(oe){console.error("Failed to update referral doctor:",oe),alert("Failed to update referral doctor")}};if(o)return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[r.jsx(Z,{width:200,height:28}),r.jsxs("div",{className:"header-actions",style:{display:"flex",gap:"8px"},children:[r.jsx(Z,{width:80,height:32}),r.jsx(Z,{width:80,height:32}),r.jsx(Z,{width:80,height:32})]})]}),r.jsxs("div",{className:"lab-inventory-card no-print summary-card",style:{margin:"1rem",padding:"0"},children:[r.jsx("div",{className:"lab-inventory-header summary-header",style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:r.jsx(Z,{width:120,height:20})}),r.jsxs("div",{className:"summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem"},children:[r.jsx(Z,{height:24}),r.jsx(Z,{height:24}),r.jsx(Z,{height:24}),r.jsx(Z,{height:24})]})]}),r.jsx("div",{className:"lab-tests-container no-print",style:{padding:"1rem"},children:[1,2].map(oe=>r.jsxs("div",{className:"test-card",style:{marginBottom:"1.5rem",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"white"},children:[r.jsxs("div",{className:"test-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsx(Z,{width:250,height:24}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsx(Z,{width:70,height:30}),r.jsx(Z,{width:36,height:30})]})]}),r.jsx("div",{className:"parameter-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(Q=>r.jsxs("div",{className:"parameter-item",children:[r.jsx(Z,{width:"30%",height:16,style:{marginBottom:"0.5rem"}}),r.jsx(Z,{height:40})]},Q))})]},oe))})]})});if(f&&!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Xr,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:f}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:r.jsx(rn,{size:16})})]})});if(!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Cl,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${t}.`}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:r.jsx(rn,{size:16})})]})});const ve=(ue=n==null?void 0:n.Patient)==null?void 0:ue.name,ae=(me=n==null?void 0:n.Patient)==null?void 0:me.patient_token_number;return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",children:[r.jsx("h2",{children:"Enter Lab Report"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:r.jsx(rn,{size:16})}),r.jsxs("button",{onClick:()=>we(null),className:"lab-inventory-button compact-btn",title:"Print Full Report",children:[r.jsx(Av,{size:16}),r.jsx("span",{className:"btn-text",children:"Print"})]}),r.jsxs("button",{onClick:K,className:"lab-inventory-button whatsapp-btn compact-btn",title:"Share via WhatsApp",children:[r.jsx(Yz,{size:16}),r.jsx("span",{className:"btn-text",children:"Share"})]})]})]}),n&&r.jsxs("div",{className:"lab-inventory-card no-print summary-card",children:[r.jsxs("h3",{className:"lab-inventory-header summary-header",children:[r.jsx(Cl,{size:14})," Summary"]}),r.jsxs("div",{className:"summary-grid",children:[r.jsxs("div",{className:"summary-item",children:[r.jsx(Kn,{size:13,className:"icon"}),r.jsx("strong",{children:"Patient:"})," ",ve??"N/A"," (",ae??"N/A",")"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(xI,{size:13,className:"icon"}),r.jsx("strong",{children:"Ordered:"})," ",P?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:O,onChange:oe=>I(oe.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:We,className:"icon-btn save",children:r.jsx(Po,{size:12})}),r.jsx("button",{onClick:()=>k(!1),className:"icon-btn cancel",children:r.jsx(Lt,{size:12})})]}):r.jsxs(r.Fragment,{children:[hf(new Date(n.createdAt),"dd MMM, HH:mm"),r.jsx("button",{onClick:()=>k(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Xs,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(xI,{size:13,className:"icon"}),r.jsx("strong",{children:"Reported:"})," ",F?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:$,onChange:oe=>L(oe.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Re,className:"icon-btn save",children:r.jsx(Po,{size:12})}),r.jsx("button",{onClick:()=>B(!1),className:"icon-btn cancel",children:r.jsx(Lt,{size:12})})]}):r.jsxs(r.Fragment,{children:[n.report_date?hf(new Date(n.report_date),"dd MMM, HH:mm"):"Not Set",r.jsx("button",{onClick:()=>B(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Xs,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(Kn,{size:13,className:"icon"}),r.jsx("strong",{children:"Ref. Doctor:"})," ",te?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"text",value:q,onChange:oe=>Y(oe.target.value),className:"lab-inventory-input date-input",placeholder:"Enter referral doctor name"}),r.jsx("button",{onClick:Fe,className:"icon-btn save",children:r.jsx(Po,{size:12})}),r.jsx("button",{onClick:()=>X(!1),className:"icon-btn cancel",children:r.jsx(Lt,{size:12})})]}):r.jsxs(r.Fragment,{children:[q||"Not Set",r.jsx("button",{onClick:()=>X(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Xs,{size:11})})]})]})]})]}),r.jsxs("div",{className:"lab-tests-container no-print",children:[n==null?void 0:n.tests.map(oe=>{var Q;return r.jsxs("div",{className:"test-card",children:[r.jsxs("div",{className:"test-header",children:[r.jsx("h4",{children:oe.name}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsxs("button",{type:"button",onClick:ie=>{ie.stopPropagation(),ce(oe.id)},className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:[r.jsx(as,{size:14}),r.jsx("span",{className:"btn-text",children:"Save"})]}),r.jsx("button",{type:"button",onClick:ie=>{ie.stopPropagation(),we(oe.id)},className:"lab-inventory-button compact-btn",title:"Print",children:r.jsx(Av,{size:14})})]})]}),r.jsx("div",{className:"test-parameters-body",children:oe.default_parameters&&oe.default_parameters.length>0?r.jsx("div",{className:"parameter-grid",children:oe.default_parameters.map(ie=>{var Ne,ne;const xe=(Ne=i[oe.id])==null?void 0:Ne[ie.name],ee=xe!==void 0?xe:ie.defaultValue??"",Se=ie.type==="number"&&ee!==""&&(ie.lower_limit!=null&&parseFloat(String(ee))<ie.lower_limit||ie.upper_limit!=null&&parseFloat(String(ee))>ie.upper_limit),qe=hIe(ie.name),Ge=(ne=S[oe.id])==null?void 0:ne[ie.name];return r.jsxs("div",{className:"parameter-item",children:[r.jsxs("label",{className:"parameter-label",htmlFor:`${oe.id}-${ie.name}`,children:[ie.name," ",ie.unit&&r.jsxs("span",{className:"parameter-unit",children:["(",ie.unit,")"]})]}),r.jsxs("div",{className:"input-wrapper",children:[ie.type==="boolean"?r.jsxs("select",{id:`${oe.id}-${ie.name}`,value:(ee==null?void 0:ee.toString())??"false",onChange:de=>z(oe.id,ie.name,de.target.value==="true"),className:"lab-inventory-input parameter-input",disabled:c,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${oe.id}-${ie.name}`,type:ie.type==="number"?"number":"text",value:ee,onChange:de=>z(oe.id,ie.name,de.target.value),className:`lab-inventory-input parameter-input ${Se?"abnormal-result":""} ${qe?"calculated-input":""}`,disabled:c||qe&&!Ge,placeholder:ie.lower_limit!=null&&ie.upper_limit!=null?`${ie.lower_limit}-${ie.upper_limit}`:""}),qe&&r.jsx("button",{type:"button",onClick:()=>_(de=>({...de,[oe.id]:{...de[oe.id]||{},[ie.name]:!Ge}})),className:"edit-calculated-btn",title:Ge?"Lock":"Edit",children:r.jsx(Xs,{size:11})})]})]},ie.name)})}):r.jsxs("div",{className:"parameter-item",style:{width:"100%"},children:[r.jsx("label",{className:"parameter-label",htmlFor:`${oe.id}-report_content`,children:"Results / Observations"}),r.jsx("textarea",{id:`${oe.id}-report_content`,value:((Q=i[oe.id])==null?void 0:Q.report_content)??"",onChange:ie=>z(oe.id,"report_content",ie.target.value),className:"lab-inventory-input parameter-textarea",rows:3,placeholder:`Enter results for ${oe.name}...`,disabled:c})]})})]},oe.id)}),f&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(Xr,{size:15,className:"inline mr-1"}),f]})]}),r.jsx("div",{className:"form-actions-footer no-print",children:r.jsx("button",{type:"button",onClick:Ie,disabled:c,className:"lab-inventory-button lab-inventory-button-primary submit-btn",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Mc,{className:"animate-spin",size:16})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(as,{size:16})," Save All"]})})}),r.jsxs("div",{className:"printable-only",children:[V&&r.jsx("div",{className:"print-letterhead-container",children:r.jsx("img",{src:V,alt:"Lab Letterhead",className:"print-letterhead-image"})}),n&&n.Patient&&r.jsxs("div",{style:{marginBottom:"20px",borderBottom:"1px solid #ccc",paddingBottom:"10px"},children:[r.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Lab Report"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"12px"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Patient Name:"})," ",n.Patient.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age/Sex:"})," ",g??"N/A"," / ",b??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. Doctor:"})," ",q||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",hf(new Date(n.createdAt),"PPpp")]})]})]}),n==null?void 0:n.tests.filter(oe=>T===null||oe.id===T).map(oe=>{var Q;return r.jsxs("div",{style:{marginBottom:"20px",pageBreakInside:"avoid"},children:[r.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"5px"},children:oe.name}),oe.default_parameters&&oe.default_parameters.length>0?r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f9f9f9"},children:[r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Parameter"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Result"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Units"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Normal Range"})]})}),r.jsx("tbody",{children:oe.default_parameters.map(ie=>{var Ne;const xe=(Ne=i[oe.id])==null?void 0:Ne[ie.name],ee=typeof xe=="string"?parseFloat(xe):typeof xe=="number"?xe:NaN,Se=ie.type==="number"&&!isNaN(ee)&&xe!==""&&(ie.lower_limit!=null&&ee<ie.lower_limit||ie.upper_limit!=null&&ee>ie.upper_limit),qe=ie.type==="boolean"&&(xe===!0||xe==="true"),Ge=ie.type==="boolean"?xe===!0||xe==="true"?"Reactive":"Non-Reactive":xe??"";return r.jsxs("tr",{children:[r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ie.name}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee",fontWeight:Se||qe?"bold":"normal",color:Se?"red":qe?"green":"inherit"},children:Ge}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ie.unit??""}),r.jsxs("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:[ie.lower_limit!==null&&ie.lower_limit!==void 0&&`> ${ie.lower_limit}`,ie.lower_limit!==null&&ie.lower_limit!==void 0&&ie.upper_limit!==null&&ie.upper_limit!==void 0&&" - ",ie.upper_limit!==null&&ie.upper_limit!==void 0&&`< ${ie.upper_limit}`]})]},ie.name)})})]}):r.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"12px",padding:"10px"},children:((Q=i[oe.id])==null?void 0:Q.report_content)||"No report content entered."})]},oe.id)})]})]})})},fIe=()=>{const{orderId:t}=Ma(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(""),f=v.useCallback(async g=>{if(!g){l("No Order ID specified in the URL."),s(!1),a(null);return}s(!0),l(null),a(null);try{console.log(`Fetching order details for ID: ${g}`);const x=await le(`/api/lab/orders/${g}/report`);if(!x.ok){let j;try{j=await x.json()}catch{j={message:`Server returned status ${x.status}`}}throw console.error("Fetch order details error response:",j),new Error(j.message||`Failed to fetch order details: ${x.status}`)}const b=await x.json();if(console.log("Received order data:",b),!b)throw console.error("Invalid order data structure:",b),new Error("Invalid order data received from server.");a(b)}catch(x){console.error("Error fetching order details:",x),l(x instanceof Error?x.message:"An unknown error occurred while fetching the order details")}finally{s(!1)}},[le]);v.useEffect(()=>{f(t)},[t,f]),v.useEffect(()=>{(async()=>{try{const x=await le("/api/clinics/settings");if(x.ok){const b=await x.json();d(b.labLetterheadUrl||"")}}catch(x){console.error("Error fetching clinic settings:",x)}})()},[]);const p=()=>{n&&EM(n)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(Nr,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(Mn,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:r.jsx(rn,{size:16})}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(Av,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(Yz,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",t||"None Specified",")"]}),i&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),o&&!i&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(Xr,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:o}),t&&r.jsx("button",{onClick:()=>f(t),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[c&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:c,alt:"Lab Letterhead",className:"print-letterhead-image"})}),!i&&!o&&(n==null?void 0:n.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Kn,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",n.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",n.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",n.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",n.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",n.Patient.id]}),n.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",n.Patient.phone]})]})]}),!i&&!o&&(n==null?void 0:n.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Oa,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const g=JSON.parse(n.report_content||"{}");return typeof g=="object"&&g!==null&&n.tests?n.tests.map(x=>r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:x.name}),g[x.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(g[x.id]).map(([b,j])=>{var k;const S=(k=x.default_parameters)==null?void 0:k.find(O=>O.name===b),_=typeof j=="string"?parseFloat(j):typeof j=="number"?j:NaN,T=(S==null?void 0:S.type)==="number"&&!isNaN(_)&&(S.lower_limit!=null&&_<S.lower_limit||S.upper_limit!=null&&_>S.upper_limit),C=(S==null?void 0:S.type)==="boolean"?j===!0||j==="true"?"Reactive":"Non-Reactive":String(j),P=(S==null?void 0:S.type)==="boolean"&&(j===!0||j==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:b}),r.jsxs("td",{className:`${T?"abnormal-result":""} ${P?"reactive-result":""}`,children:[C," ",S==null?void 0:S.unit]}),r.jsx("td",{children:S&&S.type==="number"&&(S.lower_limit!==null||S.upper_limit!==null)?r.jsxs(r.Fragment,{children:[S.lower_limit!=null&&` > ${S.lower_limit}`,S.lower_limit!=null&&S.upper_limit!=null&&" - ",S.upper_limit!=null&&` < ${S.upper_limit}`,S.unit&&` ${S.unit}`]}):((S==null?void 0:S.type)==="boolean","N/A")})]},b)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},x.id)):r.jsx(bf,{remarkPlugins:[jf],children:n.report_content})}catch{return r.jsx(bf,{remarkPlugins:[jf],children:n.report_content||"*No findings recorded.*"})}})()})]})]}),!i&&!o&&!(n!=null&&n.report_content)&&!(n!=null&&n.Patient)&&t&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",t,". The order might be processing, does not exist, or the ID is incorrect."]}),!t&&!i&&!o&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(Nr,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},pIe=()=>{const t=Mt(),[e,n]=v.useState(""),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(e);Wc(),v.useEffect(()=>{const j=setTimeout(()=>{f(e)},500);return()=>{clearTimeout(j)}},[e]),v.useEffect(()=>{p()},[d]);const p=async()=>{const j=e.trim();if(!j){o([]),c(null);return}i(!0),c(null),o([]),console.log(`Searching for: ${j}`);try{const S=await le("/api/lab");if(!S.ok){let O;try{O=await S.json()}catch{O={message:`Server returned status ${S.status}`}}throw console.error("Search fetch error response:",O),new Error(O.message||`HTTP error! status: ${S.status}`)}const{orders:_}=await S.json();console.log("Received lab orders for search:",_);const C=_.filter(O=>!!O.report_content).map(O=>{var I,F;return{id:O.id,labTokenNumber:String(O.lab_token_number??"N/A"),patientName:((I=O.Patient)==null?void 0:I.name)||"N/A",patientId:O.patient_id,patientTokenNumber:String(((F=O.Patient)==null?void 0:F.patient_token_number)??"N/A"),tests:(O.tests||[]).map(B=>B.name||"Unknown Test"),date:hf(new Date(O.createdAt),"yyyy-MM-dd"),status:O.status}}),P=new to(C,{keys:["patientName","labTokenNumber","patientTokenNumber","tests","id","patientId"],threshold:.3,ignoreLocation:!0}),k=e.trim()?P.search(e).map(O=>O.item):C;console.log("Filtered search results:",k),o(k),k.length===0&&j?c(`No matching reports found for "${j}".`):c(null)}catch(S){console.error("Failed to search lab reports:",S),c(S instanceof Error?S.message:"An unknown error occurred during search")}finally{i(!1)}},g=j=>{console.log(`Result clicked, navigating to view report for order ID: ${j}`),t(`/lab/view-report/${j}`)},x=j=>{switch(j){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:j,color:"text-gray-600 bg-gray-100"}}},b=j=>{switch(j){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(rn,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(Mn,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:e,onChange:j=>n(j.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[a&&r.jsx("div",{className:"loading-text",children:"Searching..."}),l&&!a&&r.jsxs("div",{className:"error-text",children:[r.jsx(Xr,{size:20,className:"inline mr-2"})," ",l]}),s.length>0&&!a&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:s.map(j=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(j.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(tX,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),j.patientName," (Token: ",j.patientTokenNumber,")"]}),r.jsx("span",{className:b(j.status),children:x(j.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(Oa,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",j.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(HJ,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",j.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx($O,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",j.date]})]})]},j.id))}),!a&&s.length===0&&!l&&e.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',e,'".']}),!a&&s.length===0&&!l&&!e.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},mIe=()=>{const{patientId:t}=Ma(),e=Mt(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(null),[f,p]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){l("Patient ID is missing from the URL."),s(!1);return}s(!0),l(null),a([]),p(null);try{const b=await le(`/api/patients/${t}`);if(b.ok){const _=await b.json();p(_.name||`Patient ID: ${t}`)}else console.warn(`Failed to fetch patient name for ID ${t}`),p(`Patient ID: ${t}`);const j=await le(`/api/lab/patient/${t}`);if(!j.ok){const _=await j.json().catch(()=>({}));throw new Error(_.message||`HTTP error! status: ${j.status}`)}const S=await j.json();a(S||[])}catch(b){console.error("Error fetching data:",b),l(`Failed to load data: ${b.message}`)}finally{s(!1)}})()},[t]);const g=x=>{x.report_content?e(`/lab/view-report/${x.id}`):e(`/lab/enter-report/${x.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",f?`for ${f}`:`for Patient ID: ${t}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!t){alert("Patient ID is missing. Cannot create a new report.");return}try{const x=await le("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:t})});if(!x.ok){const j=await x.json().catch(()=>({message:`Failed to create new lab order: ${x.status}`}));throw new Error(j.message||`Failed to create new lab order: ${x.status}`)}const b=await x.json();e(`/lab/enter-report/${b.newOrderId}`)}catch(x){console.error("Error creating new lab order:",x),alert(`Error creating new lab order: ${x.message}`)}},className:"lab-inventory-button",disabled:!t,title:t?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(Cs,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(rn,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:i?r.jsx("div",{className:"skeleton-reports-list",children:[1,2,3].map(x=>r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsx(Z,{variant:"circular",width:24,height:24,style:{marginRight:"15px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx(Z,{width:"40%",height:20,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"60%",height:16})]})]}),r.jsx("div",{style:{marginLeft:"10px"},children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})})]},x))}):o?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(JJ,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:o})]}):n.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Oa,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(Nr,{to:`/lab/create-order/${t}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):c?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",c.report_date?hf(new Date(c.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>d(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(rn,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(c.tests||[]).map(x=>x.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(bf,{remarkPlugins:[jf],children:c.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:n.map(x=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(x),tabIndex:0,onKeyPress:b=>b.key==="Enter"&&g(x),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Oa,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",hf(new Date(x.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",x.tests&&x.tests.length>0?x.tests.map(b=>b.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.status&&r.jsx("span",{className:yIe(x.status),children:gIe(x.status)}),r.jsx(dd,{size:20,style:{color:"#6c757d"}})]})]},x.id))})})]})})},gIe=t=>{if(!t)return"Unknown";switch(t.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t.charAt(0).toUpperCase()+t.slice(1)}},yIe=t=>{if(!t)return"status-badge";switch(t.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},jG=()=>{const t=Mt(),[e]=Nz(),n=e.get("search")||"",[a,i]=v.useState("pharmacy");return Wc(void 0,300),r.jsxs("div",{className:"inventory-management-container",style:{padding:"10px 15px",backgroundColor:"var(--background-color)",minHeight:"100vh"},children:[r.jsxs("div",{className:"inventory-header",style:{marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"action-icon-button",title:"Go Back",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-primary)"},children:r.jsx(rn,{size:20})}),r.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700",color:"var(--text-primary)"},children:"Inventory Management"})]}),r.jsxs("div",{className:"inventory-tabs",style:{display:"flex",gap:"4px",backgroundColor:"var(--card-bg, #f3f4f6)",padding:"3px",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("button",{onClick:()=>i("pharmacy"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="pharmacy"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="pharmacy"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="pharmacy"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="pharmacy"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="pharmacy"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(_c,{size:16}),"Pharmacy Stock"]}),r.jsxs("button",{onClick:()=>i("lab"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="lab"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="lab"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="lab"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="lab"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="lab"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(rs,{size:16}),"Lab Stock"]})]})]}),r.jsx("div",{className:"inventory-content",style:{backgroundColor:"var(--card-bg, #fff)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:a==="pharmacy"?r.jsx(xG,{isEmbedded:!0,initialSearch:n}):r.jsx(AM,{isEmbedded:!0})})]})},xIe=({fetchWithAuth:t})=>{const e=Mt(),[n,a]=v.useState(!0),[i,s]=v.useState([]),[o,l]=v.useState(null),[c,d]=v.useState(null),f=v.useCallback(async()=>{a(!0),l(null);try{const b=await(await t("/staff")).json();s(b.map(j=>({...j,id:j._id||j.id})))}catch(x){l(`Failed to load staff data: ${x.message}`),s([])}finally{a(!1)}},[t]);v.useEffect(()=>{f()},[f]),v.useEffect(()=>{if(c){const x=setTimeout(()=>d(null),5e3);return()=>clearTimeout(x)}},[c]);const p=x=>{switch(x){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},g=x=>{switch(x){case"doctor":return r.jsx(xf,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(Kz,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx(_c,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(rs,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(ld,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(Oo,{size:16,className:"mr-2 text-gray-500"})}};return n?r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Z,{width:40,height:40,variant:"circular"}),r.jsx(Z,{width:200,height:32})]}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:32})})]},x))})]})})]}):r.jsxs("div",{className:"staff-page-container",children:[c&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[c.type==="success"?r.jsx(Ml,{size:18,className:"mr-2"}):r.jsx(Xr,{size:18,className:"mr-2"}),r.jsx("span",{children:c.message}),r.jsx("button",{onClick:()=>d(null),className:"ml-auto text-xl font-bold",children:""})]}),o&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),o,r.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(rn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>e("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(qn,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0&&!n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):i.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsx("td",{className:"hidden md:table-cell",children:x.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(x.role)}`,children:[g(x.role),x.role.charAt(0).toUpperCase()+x.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:x.role==="doctor"?x.opd_fee?parseFloat(String(x.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>e(`/dashboard/staff/edit/${x.id}`),className:"edit-link",disabled:x.role==="admin",title:"Edit Staff",children:[r.jsx(Ii,{size:16})," Edit"]})})]},x.id))})]})})]})},PB=()=>{var oe,Q,ie,xe,ee,Se,qe,Ge,Ne,ne,de,Te,Ee,W,ye,he,ge,_e,ze;const{patientId:t,billId:e}=Ma(),n=Mt(),[a,i]=v.useState(null),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(""),[p,g]=v.useState("cash"),[x,b]=v.useState(!1),[j,S]=v.useState(""),[_,T]=v.useState(""),[C,P]=v.useState(""),[k,O]=v.useState(""),[I,F]=v.useState([]),[B,$]=v.useState(""),[L,V]=v.useState(!1),[H,te]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),X=()=>{H.length<5&&te(Oe=>[...Oe,{id:Date.now().toString(),method:"cash",amount:0}])},q=Oe=>{H.length>2&&te(He=>He.filter(nt=>nt.id!==Oe))},Y=(Oe,He,nt)=>{te(mt=>mt.map(De=>De.id===Oe?He==="method"?{...De,method:nt}:{...De,amount:Math.max(0,nt)}:De))},se=(Oe,He)=>{const nt=H.filter(De=>De.id!==Oe).reduce((De,Je)=>De+Je.amount,0),mt=Math.max(0,He-nt);te(De=>De.map(Je=>Je.id===Oe?{...Je,amount:mt}:Je))},[G,z]=v.useState([]),[ce,we]=v.useState(0),K=((oe=a==null?void 0:a.patient)==null?void 0:oe.insurance_type)==="no_cash_insurance";v.useEffect(()=>{g(K?"no_cash_insurance":"cash")},[K]),v.useEffect(()=>{e&&(async()=>{o(!0),c(null);try{const[He,nt,mt]=await Promise.all([le(`/api/bills/${e}`),le("/api/clinics/settings").catch(()=>null),le(`/api/bills?patientId=${t}`).catch(()=>null)]);if(!He.ok)throw new Error(`HTTP error! status: ${He.status}`);const De=await He.json();if(!De||!De.bill||!De.calculated)throw new Error("Incomplete data structure received from backend.");if(De.bill.type!=="admission")throw new Error(`Unexpected bill type: ${De.bill.type}. Expected 'admission'.`);const Je=Array.isArray(De.admissionPayments)?De.admissionPayments:[];if(i({...De.bill,amount:De.bill.amount,created_at:De.bill.createdAt||De.bill.created_at,items:(De.bill.items||[]).map(et=>({...et,price:parseFloat(et.price)||0,quantity:parseInt(et.quantity)||1})),AdmissionPayments:Je,calculated:De.calculated,admissionRecord:De.admissionRecord,patient:De.bill.Patient?{id:De.bill.Patient.id,name:De.bill.Patient.name,admission_date:De.bill.Patient.admission_date,discharge_date:De.bill.Patient.discharge_date,token:De.bill.Patient.patient_token_number||De.bill.Patient.token,insurance_type:De.bill.Patient.insurance_type}:void 0}),nt&&nt.ok){const et=await nt.json();S(et.name||""),T(et.address||""),P(et.notes||""),O(et.upi_id||"")}try{const et=await le(`/api/patients/${t}/admission-payments`);if(et.ok){const ut=await et.json();F(ut)}}catch(et){console.error("Failed to fetch payment history:",et)}if(mt&&mt.ok){const ut=((await mt.json()).bills||[]).filter(vt=>vt.type==="admission"&&vt.id!==e).map(vt=>{var lt,Tt;const ke=vt.AdmissionRecord;return{id:vt.id,amount:ke?parseFloat(ke.total_amount):parseFloat(vt.amount)||0,status:ke?ke.balance<=0||ke.status==="discharged"&&ke.balance<=0?"paid":"pending":vt.status,created_at:vt.createdAt||vt.created_at,admission_date:ke?ke.admission_date:((lt=vt.Patient)==null?void 0:lt.admission_date)||vt.admission_date,discharge_date:ke?ke.discharge_date:((Tt=vt.Patient)==null?void 0:Tt.discharge_date)||vt.discharge_date,admissionRecord:ke}});z(ut);const _t=ut.filter(vt=>vt.admissionRecord?vt.admissionRecord.balance>0:vt.status!=="paid").reduce((vt,ke)=>ke.admissionRecord?vt+(typeof ke.admissionRecord.balance=="string"?parseFloat(ke.admissionRecord.balance):ke.admissionRecord.balance):vt+ke.amount,0);we(_t)}}catch(He){console.error("Failed to fetch admission bill details:",He),c(He instanceof Error?He.message:"An unknown error occurred")}finally{o(!1)}})()},[e,t]),v.useEffect(()=>{(async()=>{if(!e){if(!t){c("Patient ID is missing."),o(!1);return}try{o(!0);const He=await le(`/api/patients/${t}`);if(He.ok){const nt=await He.json();if(nt){if(nt.admission_date&&!nt.discharge_date){const De=await le(`/api/patients/${t}/active-bill?type=admission`);if(De.ok){const Je=await De.json();if(Je&&Je.id){n(`/patient/${t}/admission-bill/${Je.id}`,{replace:!0});return}}}i({id:0,patient_id:nt.id,type:"admission",amount:"0",status:"pending",created_at:new Date().toISOString(),AdmissionPayments:[],calculated:{totalPaid:0,totalDue:0,balance:0,daysStayed:0,perDayCharge:0},patient:{id:nt.id,name:nt.name,admission_date:nt.admission_date,discharge_date:nt.discharge_date,token:nt.token,insurance_type:nt.insurance_type}});const mt=await le(`/api/bills?patientId=${t}`);if(mt.ok){const Je=((await mt.json()).bills||[]).filter(et=>et.type==="admission").map(et=>{var _t,vt;const ut=et.AdmissionRecord;return{id:et.id,amount:ut?parseFloat(ut.total_amount):parseFloat(et.amount)||0,status:ut?ut.balance<=0||ut.status==="discharged"&&ut.balance<=0?"paid":"pending":et.status,created_at:et.createdAt||et.created_at,admission_date:ut?ut.admission_date:((_t=et.Patient)==null?void 0:_t.admission_date)||et.admission_date,discharge_date:ut?ut.discharge_date:((vt=et.Patient)==null?void 0:vt.discharge_date)||et.discharge_date,admissionRecord:ut}});z(Je)}}else c("Patient not found")}}catch(He){console.error("Error fetching patient status:",He),c("Failed to load patient details")}finally{o(!1)}}})()},[t,e,n]);const Ie=async()=>{if(t){b(!0);try{const Oe=await le(`/api/patients/${t}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Oe.ok){const nt=await Oe.json();throw new Error(nt.message||"Failed to admit patient")}const He=await Oe.json();He.bill&&He.bill.id?n(`/patient/${t}/admission-bill/${He.bill.id}`):window.location.reload()}catch(Oe){c(Oe instanceof Error?Oe.message:"Failed to admit patient"),b(!1)}}},We=async()=>{if(t&&window.confirm("Are you sure you want to discharge this patient? This will finalize the bill.")){b(!0);try{const Oe=await le(`/api/patients/${t}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Oe.ok){const He=await Oe.json();throw new Error(He.message||"Failed to discharge patient")}window.location.reload()}catch(Oe){c(Oe instanceof Error?Oe.message:"Failed to discharge patient"),b(!1)}}},Re=((Q=a==null?void 0:a.patient)==null?void 0:Q.admission_date)&&!((ie=a==null?void 0:a.patient)!=null&&ie.discharge_date),Fe=!!((xe=a==null?void 0:a.patient)!=null&&xe.discharge_date);v.useEffect(()=>{var nt,mt;const He=Number(((nt=a==null?void 0:a.calculated)==null?void 0:nt.balance)??((mt=a==null?void 0:a.admissionRecord)==null?void 0:mt.balance)??0)+ce;if(He>0&&k){const De=`upi://pay?pa=${k}&pn=${encodeURIComponent(j||"Clinic")}&am=${He.toFixed(2)}&cu=INR`;$(De)}else $("")},[a,ce,k,j]);const ve=H.reduce((Oe,He)=>Oe+He.amount,0),ae=async Oe=>{var De,Je;Oe.preventDefault();const nt=Number(((De=a==null?void 0:a.calculated)==null?void 0:De.balance)??((Je=a==null?void 0:a.admissionRecord)==null?void 0:Je.balance)??0)+ce,mt=L?ve:parseFloat(d);if(!t||mt<=0||mt>nt+.1){c(`Please enter a valid amount. Max payable: ${nt.toFixed(2)}`);return}c(null),b(!0);try{if(L){for(const _t of H)if(_t.amount>0){const vt=await le(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:_t.amount,payment_mode:_t.method})});if(!vt.ok){const ke=await vt.json();throw new Error(ke.message||`Failed to record ${_t.method} payment`)}}}else{const _t=await le(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(d),payment_mode:p})});if(!_t.ok){const vt=await _t.json();throw new Error(vt.message||`HTTP error! status: ${_t.status}`)}}const ut=await(await le(`/api/bills/${e}`)).json();if(ut&&ut.bill&&ut.calculated&&ut.admissionPayments)i({...ut.bill,amount:parseFloat(ut.bill.amount),AdmissionPayments:ut.admissionPayments,calculated:ut.calculated,patient:ut.bill.Patient?{id:ut.bill.Patient.id,name:ut.bill.Patient.name,admission_date:ut.bill.Patient.admission_date,discharge_date:ut.bill.Patient.discharge_date,token:ut.bill.Patient.token,insurance_type:ut.bill.Patient.insurance_type}:void 0});else throw new Error("Invalid data structure received after payment submission.");f(""),g("cash"),L&&(te([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V(!1)),setTimeout(()=>{window.print()},100)}catch(et){console.error("Failed to submit payment:",et),c(et instanceof Error?et.message:"Failed to record payment")}finally{b(!1)}},je=()=>{window.print()};if(s)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]})]})]})})]})]})});if(l)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>n(-1),className:"back-button",children:r.jsx(rn,{size:20})}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"error-message-box",children:["Error: ",l]})]})});if(!a||!a.calculated)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"error-message-box",children:"No bill details found or data is incomplete."})});const ue=Number(a.calculated&&a.calculated.balance!==void 0?a.calculated.balance:a.admissionRecord?a.admissionRecord.balance:0),me=a.status==="paid"||ue<=0;return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"ADMISSION BILL"}),r.jsx("h2",{className:"clinic-name-print",children:j||"Hospital"}),(_||C)&&r.jsxs("div",{className:"clinic-details-print",children:[_&&r.jsx("span",{className:"small-text clinic-address",children:_}),C&&r.jsx("span",{className:"small-text clinic-notes",children:C})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient"]})," ",((ee=a.patient)==null?void 0:ee.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",((Se=a.patient)==null?void 0:Se.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(rn,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{children:"Patient Information"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[!Re&&!Fe&&r.jsxs("button",{onClick:Ie,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(FN,{size:16})," Admit Patient"]}),Re&&r.jsxs("button",{onClick:We,disabled:x,className:"secondary-button",style:{fontSize:"0.85em",padding:"6px 12px",background:"#dc3545",color:"white"},children:[r.jsx(UX,{size:16})," Discharge"]}),Fe&&r.jsxs("button",{onClick:Ie,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(wJ,{size:16})," Re-Admit"]})]})]}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",((qe=a.patient)==null?void 0:qe.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",((Ge=a.patient)==null?void 0:Ge.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(_Q,{size:16})," Bill ID"]})," ",a.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Created"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Admission Charges Breakdown"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsxs("tbody",{children:[a.admissionRecord?r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]})]}),a.admissionRecord.days_stayed?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString(),a.admissionRecord.discharge_date?` - ${new Date(a.admissionRecord.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.admissionRecord.days_stayed," days"]}),r.jsxs("td",{children:["",Number(a.admissionRecord.per_day_charge).toFixed(2)]}),r.jsxs("td",{children:["",(Number(a.admissionRecord.days_stayed)*Number(a.admissionRecord.per_day_charge)).toFixed(2)]})]}):a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges (Ongoing)",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString()," - Today)"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]}):null]}):r.jsxs(r.Fragment,{children:[a.items&&a.items.length>0?a.items.map((Oe,He)=>r.jsxs("tr",{children:[r.jsx("td",{children:He+1}),r.jsx("td",{children:Oe.name}),r.jsx("td",{children:Oe.quantity}),r.jsxs("td",{children:["",Oe.price.toFixed(2)]}),r.jsxs("td",{children:["",(Oe.price*Oe.quantity).toFixed(2)]})]},`item-${He}`)):r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Initial Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]})]}),a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:(((Ne=a.items)==null?void 0:Ne.length)||1)+1}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",(ne=a.patient)!=null&&ne.admission_date?new Date(a.patient.admission_date).toLocaleDateString():"",(de=a.patient)!=null&&de.discharge_date?` - ${new Date(a.patient.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]})]}),r.jsxs("tr",{className:"subtotal-row current-admission-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Current Admission Total"}),r.jsxs("td",{children:["",Number(((Te=a.calculated)==null?void 0:Te.totalDue)??((Ee=a.admissionRecord)==null?void 0:Ee.total_amount)??0).toFixed(2)]})]}),G.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("tr",{className:"section-header-row previous-admissions-header",children:r.jsx("td",{colSpan:5,style:{fontWeight:600,textAlign:"center"},children:"Previous Admissions"})}),G.map((Oe,He)=>r.jsxs("tr",{className:Oe.status!=="paid"?"bill-row-unpaid":"bill-row-paid",children:[r.jsx("td",{children:He+1}),r.jsxs("td",{children:["Admission - ",Oe.admission_date?new Date(Oe.admission_date).toLocaleDateString():"N/A",Oe.discharge_date&&r.jsxs("small",{style:{display:"block",color:"inherit",opacity:.8,fontSize:"0.75em"},children:["Discharged: ",new Date(Oe.discharge_date).toLocaleDateString()]})]}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Oe.amount.toFixed(2)]}),r.jsxs("td",{className:Oe.status!=="paid"?"text-danger":"text-success",children:["",Oe.amount.toFixed(2),Oe.status==="paid"&&r.jsx("small",{style:{marginLeft:"4px"},children:"(Paid)"})]})]},Oe.id)),ce>0&&r.jsxs("tr",{className:"subtotal-row unpaid-balance-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Previous Unpaid Balance"}),r.jsxs("td",{children:["",ce.toFixed(2)]})]})]}),r.jsxs("tr",{className:`grand-total-row-dynamic ${ce>0?"grand-total-unpaid":"grand-total-paid"}`,children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"GRAND TOTAL"}),r.jsxs("td",{style:{fontSize:"1.1em"},children:["",(Number(((W=a.calculated)==null?void 0:W.totalDue)??((ye=a.admissionRecord)==null?void 0:ye.total_amount)??0)+ce).toFixed(2)]})]})]})]})]}),I.length>0&&r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Payment History"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DATE"}),r.jsx("th",{children:"MODE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsx("tbody",{children:I.map((Oe,He)=>{var nt;return r.jsxs("tr",{children:[r.jsx("td",{children:He+1}),r.jsx("td",{children:Oe.payment_date?new Date(Oe.payment_date).toLocaleDateString():"N/A"}),r.jsx("td",{style:{textTransform:"capitalize"},children:((nt=Oe.payment_mode)==null?void 0:nt.replace(/_/g," "))||"N/A"}),r.jsxs("td",{children:["",(Number(Oe.amount_paid)||0).toFixed(2)]})]},Oe.id)})})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",Number(((he=a.calculated)==null?void 0:he.totalDue)??((ge=a.admissionRecord)==null?void 0:ge.total_amount)??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Number(((_e=a.calculated)==null?void 0:_e.totalPaid)??((ze=a.admissionRecord)==null?void 0:ze.total_paid)??0).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Balance Due: ",ue.toFixed(2)]})})]}),B&&ue>0&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(Da,{value:B,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",(a.calculated.totalDue||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Days Stayed"}),r.jsx("span",{children:a.calculated.daysStayed??0})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{style:{color:"#28a745"},children:["",(a.calculated.totalPaid||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Balance Due"}),r.jsxs("strong",{style:{color:ue>0?"#dc3545":"#28a745"},children:["",ue.toFixed(2)]})]}),G.length>0&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #dee2e6"},children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",color:"#495057"},children:"Previous Admissions"}),G.map(Oe=>r.jsxs("div",{className:"summary-row",style:{fontSize:"0.8rem"},children:[r.jsxs("span",{style:{color:"#6c757d"},children:[Oe.admission_date?new Date(Oe.admission_date).toLocaleDateString():"N/A",Oe.status!=="paid"&&r.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"(Unpaid)"})]}),r.jsxs("span",{style:{color:Oe.status!=="paid"?"#dc3545":"#28a745"},children:["",Oe.amount.toFixed(2)]})]},Oe.id)),ce>0&&r.jsxs("div",{className:"summary-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e9ecef"},children:[r.jsx("strong",{style:{color:"#dc3545",fontSize:"0.875rem"},children:"Previous Balance"}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",ce.toFixed(2)]})]})]}),ce>0&&r.jsxs("div",{className:"summary-row grand-total-row",style:{marginTop:"0.75rem",background:"#fff3cd"},children:[r.jsx("strong",{style:{color:"#856404"},children:"Total Outstanding"}),r.jsxs("strong",{style:{color:"#856404"},children:["",(ue+ce).toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:B&&ue>0?r.jsxs(r.Fragment,{children:[r.jsx(Da,{value:B,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):ue<=0?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#28a745"},children:[r.jsx(cv,{size:48}),r.jsx("p",{style:{marginTop:"10px",fontWeight:600},children:"Fully Paid"})]}):r.jsx("p",{children:"UPI QR code not available."})}),!me&&r.jsxs("form",{onSubmit:ae,children:[r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>V(!L),disabled:x,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:L?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:L?"rgba(79, 172, 254, 0.1)":"transparent",color:L?"#4facfe":"#666",cursor:x?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Io,{size:14}),"Split"]})]}),L?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ve.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:H.map((Oe,He)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:He+1}),r.jsxs("select",{value:Oe.method,onChange:nt=>Y(Oe.id,"method",nt.target.value),className:"split-payment-select",disabled:x,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Oe.amount||"",onChange:nt=>Y(Oe.id,"amount",parseFloat(nt.target.value)||0),className:"split-payment-input",disabled:x})]}),H.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>se(Oe.id,ue+ce),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining balance",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>q(Oe.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Bn,{size:12})})]})]},Oe.id))}),H.length<5&&r.jsxs("button",{type:"button",onClick:X,className:"split-payment-add-btn",disabled:x,children:[r.jsx(qn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Max Payable:"}),r.jsxs("span",{style:{fontWeight:600},children:["",(ue+ce).toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${ve<=ue+ce+.1?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:ve<=ue+ce+.1?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",ve.toFixed(2)]})]}),ve>ue+ce+.1&&r.jsx("div",{className:"split-payment-warning",children:" Amount exceeds balance!"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"payment-input-group",style:{marginBottom:"15px"},children:[r.jsx("label",{htmlFor:"paymentAmount",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Amount ()"}),r.jsx("input",{type:"number",id:"paymentAmount",value:d,onChange:Oe=>f(Oe.target.value),placeholder:`Max ${(ue+ce).toFixed(2)}`,min:"0.01",step:"0.01",max:ue+ce,className:"payment-mode-select",required:!0})]}),r.jsxs("div",{className:"payment-input-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:p,onChange:Oe=>g(Oe.target.value),className:"payment-mode-select",disabled:K,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),K&&r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"})]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{type:"button",onClick:je,className:"secondary-button print-preview-button",children:"Print Preview"}),r.jsx("button",{type:"submit",className:"primary-button",disabled:x||!L&&(!d||parseFloat(d)<=0||parseFloat(d)>ue+ce)||L&&(ve<=0||ve>ue+ce+.1),children:x?"Processing...":"Record Payment & Print"})]})]}),me&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:je,className:"secondary-button",children:"Print Bill"})})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for choosing our hospital!"}),r.jsx("p",{children:"This is a computer-generated bill and does not require a signature."})]})]})})},vIe=t=>{switch(t){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},bIe=()=>{const{orderId:t}=Ma(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState({}),[g,x]=v.useState(""),[b,j]=v.useState(""),[S,_]=v.useState("cash"),T=v.useMemo(()=>(n==null?void 0:n.medications.reduce((L,V)=>{const H=V.total_price??0,te=H*(V.discount_percentage??0)/100;return L+H-te},0))??0,[n==null?void 0:n.medications]),C=5,P=v.useMemo(()=>!n||!n.medications?0:n.medications.reduce((L,V,H)=>{var G,z;const te=V.drug_id??`index-${H}`,X=((G=f[te])==null?void 0:G.pack)||0,q=((z=f[te])==null?void 0:z.loose)||0,Y=V.pack_price??0,se=V.loose_price??0;return L+X*Y+q*se},0),[n,f]),k=v.useCallback(async()=>{if(!t){l("Order ID is missing."),s(!1);return}s(!0),l(null);try{const L=await le(`/api/pharmacy-orders/${t}`);if(!L.ok)throw L.status===404?new Error(`Order with ID ${t} not found.`):new Error(`Failed to fetch order details: ${L.statusText} (${L.status})`);const V=await L.json();console.log("Fetched order data after return:",V);const te=V.medications.map(q=>q.pack_price&&q.loose_price&&q.loose_price>0?{...q,unitsPerPack:Math.round(q.pack_price/q.loose_price)}:{...q,unitsPerPack:0}).map(q=>({...q,discount_percentage:q.discount_percentage??0}));a({...V,medications:te});const X={};te.forEach((q,Y)=>{const se=q.drug_id??`index-${Y}`;X[se]={pack:0,loose:0}}),p(X)}catch(L){console.error("Failed to fetch order details:",L),l(L.message||"Failed to load order details.")}finally{s(!1)}},[t]);v.useEffect(()=>{k()},[k]),v.useEffect(()=>{(async()=>{try{const V=await le("/api/clinics/settings");if(!V.ok)throw new Error("Failed to fetch clinic settings");const H=await V.json();console.log("Fetched clinic settings:",H),x(H.upi_id||"")}catch(V){console.error("Error fetching clinic settings:",V)}})()},[]),v.useEffect(()=>{if((n==null?void 0:n.order_total)!==void 0&&n.order_total>0&&g){const L=`upi://pay?pa=${g}&pn=ClinicName&am=${n.order_total.toFixed(2)}&cu=INR`;j(L)}else j("")},[n==null?void 0:n.order_total,g]);const O=(L,V)=>{a(H=>{if(!H)return null;const te=H.medications.map((q,Y)=>(q.drug_id??`index-${Y}`)===L?{...q,discount_percentage:isNaN(V)?0:V}:q),X=te.reduce((q,Y)=>{const se=Y.total_price??0,G=se*(Y.discount_percentage??0)/100;return q+se-G},0);return{...H,medications:te,order_total:X}})},I=(L,V,H)=>{p(te=>{const X=H.unitsPerPack||0,Y=H.pack_quantity*X+H.loose_quantity,se=Math.max(0,Math.min(V,Y));let G=0,z=se;return X>0&&(G=Math.floor(se/X),z=se%X),{...te,[L]:{pack:G,loose:z}}})},F=async()=>{const L=n==null?void 0:n.medications.map((V,H)=>{var Y,se;const te=V.drug_id??`index-${H}`,X=((Y=f[te])==null?void 0:Y.pack)||0,q=((se=f[te])==null?void 0:se.loose)||0;return X>0||q>0?{drug_id:V.drug_id,name:V.name,pack_quantity:V.pack_quantity,loose_quantity:V.loose_quantity,returnPackQuantity:X,returnLooseQuantity:q}:null}).filter(V=>V!==null);if(!L||L.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!t){alert("Order ID is missing. Cannot process return.");return}if(!L){alert("Could not prepare items for return.");return}d(!0),l(null);try{const V=await le(`/api/pharmacy-orders/${t}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:L})}),H=await V.json();if(!V.ok)throw new Error(H.message||`Failed to process return: ${V.statusText}`);const te={};n==null||n.medications.forEach((X,q)=>{const Y=X.drug_id??`index-${q}`;te[Y]={pack:0,loose:0}}),p(te),k()}catch(V){console.error("Failed to process return:",V),l(V.message||"An error occurred while processing the return."),alert(`Error processing return: ${V.message||"Unknown error"}`)}finally{d(!1)}};if(i)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(o)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(rn,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",o]})]});if(!n)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(rn,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const B=()=>{window.print()},$=vIe(n.status);return r.jsx("div",{className:"pharmacy-order-details-page",children:r.jsxs("div",{className:"order-details-container printable-section",children:[r.jsxs("div",{className:"order-details-header no-print",children:[r.jsx("h1",{children:"Pharmacy Order Details"}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:20})}),r.jsxs("button",{onClick:B,className:"print-button",children:[r.jsx(Av,{size:18})," Print Bill"]})]})]}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{children:"Mahajan Pharmacy"}),r.jsxs("div",{className:"clinic-details-print",children:[r.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),r.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),r.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Token:"})," 12"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),r.jsxs("div",{className:"order-info-section no-print",children:[r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Order ID:"})," ",n.id]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Patient:"})," ",n.patientName||"N/A"," (",n.patientTokenNumber||"N/A",")"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Prescribed By:"})," ",n.prescribedBy||"N/A"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`status-pill ${$.text} ${$.bg}`,children:n.status})]})]}),r.jsxs("div",{className:"medications-section",children:[r.jsx("h2",{children:"Medications Ordered"}),n.medications.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PACK QTY"}),r.jsx("th",{children:"PACK PRICE"}),r.jsx("th",{children:"LOOSE QTY"}),r.jsx("th",{children:"LOOSE PRICE"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),r.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),r.jsx("tbody",{children:n.medications.map((L,V)=>{var G,z;const H=L.drug_id??`index-${V}`,te=L.total_price??0,X=te*(L.discount_percentage??0)/100,q=te-X,Y=((G=f[H])==null?void 0:G.pack)||0,se=((z=f[H])==null?void 0:z.loose)||0;return r.jsxs("tr",{children:[r.jsx("td",{children:L.name}),r.jsx("td",{children:L.pack_quantity??0}),r.jsx("td",{children:L.pack_price!=null?Number(L.pack_price).toFixed(2):"N/A"}),r.jsx("td",{children:L.loose_quantity??0}),r.jsx("td",{children:L.loose_price!=null?Number(L.loose_price).toFixed(2):"N/A"}),r.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",r.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",r.jsxs("td",{children:[r.jsx("input",{type:"number",value:L.discount_percentage??0,onChange:ce=>O(H,parseFloat(ce.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),r.jsxs("span",{className:"print-only",children:[L.discount_percentage??0,"%"]})]}),r.jsxs("td",{children:[C.toFixed(1),"%"]}),r.jsx("td",{children:q.toFixed(2)}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.pack_quantity,value:Y,onChange:ce=>{const K=(parseInt(ce.target.value,10)||0)*(L.unitsPerPack||0)+se;I(H,K,L)},className:"return-quantity-input"})}),r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.loose_quantity+L.pack_quantity*(L.unitsPerPack||0)-Y*(L.unitsPerPack||0),value:se,onChange:ce=>{const we=parseInt(ce.target.value,10)||0,K=Y*(L.unitsPerPack||0)+we;I(H,K,L)},className:"return-quantity-input"})})]})]},H)})})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",T.toFixed(2)]})}),r.jsxs("div",{className:"order-total-section no-print",children:[r.jsx("span",{className:"total-label",children:"Order Total:"}),r.jsxs("span",{className:"total-amount",children:["",T.toFixed(2)]})]}),r.jsxs("div",{className:"payment-section no-print",children:[r.jsxs("div",{className:"payment-mode-group",children:[r.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),r.jsxs("select",{id:"paymentMode",value:S,onChange:L=>_(L.target.value),className:"payment-mode-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),b&&r.jsxs("div",{className:"qr-code-container",children:[r.jsx(Da,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]})]}),(n.status==="dispensed"||n.status==="billed")&&n.medications.length>0&&r.jsxs("div",{className:"return-action-section no-print",children:[P>0&&r.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",P.toFixed(2)]}),r.jsx("button",{onClick:F,disabled:Object.values(f).every(L=>L.pack===0&&L.loose===0)||c,className:"process-return-button",children:c?r.jsxs(r.Fragment,{children:[r.jsx(xE,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(xE,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},jIe=async()=>{const t=await le("/subscriptions");if(!t.ok)throw new Error("Failed to fetch subscription plans");return await t.json()},wIe=async t=>{const e=await le(`/subscriptions/${t}`);if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(n.message||"Failed to fetch subscription plan details")}return await e.json()},NIe=async t=>{const e=await le("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(n.message||"Failed to create subscription plan")}return await e.json()},SIe=async(t,e)=>{const n=await le(`/subscriptions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(a.message||"Failed to update subscription plan")}return await n.json()},_Ie=async t=>{const e=await le(`/subscriptions/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(n.message||"Failed to deactivate subscription plan")}return await e.json()},CIe=async(t,e)=>{const n=await le("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:t,planId:e})});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(a.message||"Failed to initiate Razorpay subscription")}return await n.json()},TIe=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),d=v.useCallback(async()=>{i(!0),o(null);try{const p=await jIe();n(p)}catch(p){o(p.message||"Failed to fetch subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await _Ie(p),c({type:"success",message:"Plan deactivated successfully!"}),d()}catch(g){o(g.message||"Failed to deactivate plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ml,{size:18,className:"mr-2 text-green-500"}):r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:16})}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>t("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(qn,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(Z,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(Ii,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Bn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},kIe=()=>{const t=Mt(),[e,n]=v.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const d=g=>{const{name:x,value:b}=g.target;n(j=>({...j,[x]:b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await NIe(e),c({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ml,{size:18,className:"mr-2 text-green-500"}):r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:r.jsx(rn,{size:16})}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},AIe=()=>{const{id:t}=Ma(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await wIe(t);a(T),s({name:T.name,description:T.description||"",price:T.price,period:T.period,interval:T.interval,razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:P}=T.target;s(k=>({...k,[C]:P}))},S=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await SIe(t,i),x({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const P=C.message||"Failed to update plan.";p(P),x({type:"error",message:P})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Ml,{size:18,className:"mr-2"}):r.jsx(Xr,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:S,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval||1,onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:r.jsx(rn,{size:16})}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},EIe=()=>{const{patientId:t}=Ma(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(""),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState("manual"),[b,j]=v.useState(!1),[S,_]=v.useState(null),T=v.useCallback(async()=>{d(!0),p(null);try{const k=await le(`/api/patients/${t}`);if(!k.ok){const B=await k.json();throw new Error(B.message||"Failed to fetch patient details")}const O=await k.json();a(O);const I=await le("/api/subscriptions");if(!I.ok){const B=await I.json();throw new Error(B.message||"Failed to fetch subscription plans")}const F=await I.json();s(F.filter(B=>B.status==="active"))}catch(k){console.error("Error fetching data:",k),p(`Failed to load data: ${k.message}`)}finally{d(!1)}},[t]);v.useEffect(()=>{t?T():(p("Patient ID is missing."),d(!1))},[t,T]);const C=(k,O)=>{const I=new Date(k),F=O.interval||1;switch(O.period){case"daily":I.setDate(k.getDate()+F);break;case"weekly":I.setDate(k.getDate()+F*7);break;case"monthly":I.setMonth(k.getMonth()+F);break;case"yearly":I.setFullYear(k.getFullYear()+F);break;default:console.warn(`Unknown subscription period: ${O.period}. Defaulting to 1 month.`),I.setMonth(k.getMonth()+1)}return I},P=async()=>{if(!t||!o){_("Please select a subscription plan.");return}const k=i.find(O=>O.id===o);if(!k){_("Selected plan details not found.");return}j(!0),_(null);try{const O=new Date,I=C(O,k);if(g==="manual"){const F={subscription_plan_id:o,subscription_status:"active",subscription_start_date:O.toISOString(),subscription_end_date:I.toISOString(),subscription_payment_method:"manual"},B=await le(`/api/patients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!B.ok){const $=await B.json();throw new Error($.message||"Failed to start subscription manually")}e("/all-patients")}else if(g==="razorpay"){console.log("Initiating Razorpay subscription for plan:",k);const F=await CIe(t,o);if(F&&F.short_url)window.location.href=F.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(O){console.error("Error starting subscription:",O),_(`Failed to start subscription: ${O.message}`),j(!1)}};return c?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):f?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:f})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:16})})]}):n?r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:16})}),r.jsxs("h1",{children:[r.jsx(Kn,{size:28})," ","Start Subscription for ",n.name]}),S&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:S})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),i.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:i.map(k=>r.jsxs("div",{className:`subscription-plan-card ${o===k.id?"selected-plan":""}`,onClick:()=>l(k.id),children:[r.jsx("h3",{children:k.name}),r.jsxs("p",{className:"price",children:["",k.price]}),r.jsxs("p",{className:"duration",children:["Every ",k.interval," ",k.period,k.interval>1?"s":""]}),k.description&&r.jsx("p",{children:k.description})]},k.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:g==="manual",onChange:()=>x("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:g==="razorpay",onChange:()=>x("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:P,disabled:!o||b||i.length===0,className:"subscription-btn",children:[b&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),b?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:16})})]})},PIe=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),d=v.useCallback(async()=>{i(!0),o(null);try{const p=await CM();n(p)}catch(p){o(p.message||"Failed to fetch clinic subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await XPe(p),c({type:"success",message:"Clinic plan deactivated successfully!"}),d()}catch(g){o(g.message||"Failed to deactivate clinic plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ml,{size:18,className:"mr-2 text-green-500"}):r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(rn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>t("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(qn,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(Z,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/clinic-subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(Ii,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Bn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},OIe=()=>{const t=Mt(),[e,n]=v.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const d=g=>{const{name:x,value:b,type:j}=g.target;n(S=>({...S,[x]:j==="number"?parseFloat(b):b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await KPe(e),c({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/clinic-subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create clinic plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ml,{size:18,className:"mr-2 text-green-500"}):r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},DIe=()=>{const{id:t}=Ma(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await YPe(t);a(T),s({name:T.name,description:T.description||"",price:Number(T.price),period:T.period,interval:Number(T.interval),razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch clinic plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:P,type:k}=T.target;s(O=>({...O,[C]:k==="number"?parseFloat(P):P}))},S=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await QPe(t,i),x({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const P=C.message||"Failed to update clinic plan.";p(P),x({type:"error",message:P})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Ml,{size:18,className:"mr-2"}):r.jsx(Xr,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:S,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval!==void 0?i.interval:"",onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},MIe=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(""),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(null),x=v.useCallback(async()=>{c(null);try{const S=(await CM()).filter(_=>_.status==="active");n(S),S.length>0&&!a&&i(S[0].id)}catch(j){console.error("Error fetching plans:",j),c(`Failed to load subscription plans: ${j.message}`)}},[]);v.useEffect(()=>{(async()=>{o(!0);try{const S=await ZPe();if(S&&S.short_url){window.location.href=S.short_url,c("You have a pending subscription. Redirecting to payment...");return}await x()}catch(S){console.error("Error during initial page load:",S),c(`An unexpected error occurred: ${S.message}`)}finally{o(!1)}})()},[x]);const b=async()=>{if(!a){g("Please select a clinic subscription plan.");return}const j=e.find(S=>S.id===a);if(!j){g("Selected plan details not found.");return}f(!0),g(null);try{console.log("Initiating Razorpay clinic subscription for plan:",j);const S=await JPe(a);if(S&&S.short_url)window.location.href=S.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(S){console.error("Error starting clinic subscription:",S),g(`Failed to start clinic subscription: ${S.message}`),f(!1)}};return s?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):l?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:16})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:16})}),r.jsxs("h1",{children:[r.jsx(RQ,{size:28}),"Buy Pro Plan for Clinic"]}),p&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:p})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),e.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:e.map(j=>r.jsxs("div",{className:`subscription-plan-card ${a===j.id?"selected-plan":""}`,onClick:()=>i(j.id),children:[r.jsx("h3",{children:j.name}),r.jsxs("p",{className:"price",children:["",Number(j.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",j.interval," ",j.period,j.interval>1?"s":""]}),j.description&&r.jsx("p",{children:j.description})]},j.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:b,disabled:!a||d||e.length===0,className:"subscription-btn",children:[d&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),d?"Initiating Payment...":"Buy Pro Plan"]})})]})},IIe=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,S]=v.useState({name:"",email:"",password:"",role:"user"}),[_,T]=v.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[C,P]=v.useState(""),[k,O]=v.useState(""),[I,F]=v.useState({}),[B,$]=v.useState(!1),[L,V]=v.useState(null),[H,te]=v.useState([]),[X,q]=v.useState(""),[Y,se]=v.useState(!1),[G,z]=v.useState(null);v.useEffect(()=>{const je=setTimeout(()=>{O(C)},500);return()=>{clearTimeout(je)}},[C]),v.useEffect(()=>{ce(k)},[k]);const ce=async(je="")=>{i(!0);try{const ue=je?`/api/users?search=${encodeURIComponent(je)}`:"/api/users",oe=await(await le(ue)).json();if(n(oe),oe.length>0){const Q=[...new Set(oe.map(xe=>xe.clinic_id).filter(xe=>!!xe))],ie={};await Promise.all(Q.map(async xe=>{try{const ee=await WPe(xe);ie[xe]=ee}catch(ee){console.error(`Failed to fetch subscription status for clinic ${xe}`,ee),ie[xe]={hasProPlan:!1}}})),F(ie)}c(null)}catch(ue){c("Failed to fetch users."),console.error(ue)}finally{i(!1),o(!1)}},we=async je=>{je.preventDefault();try{await le("/users",{method:"POST",body:JSON.stringify(j)}),f(!1),S({name:"",email:"",password:"",role:"user"}),ce()}catch(ue){c("Failed to add user."),console.error(ue)}},K=async je=>{if(je.preventDefault(),!x)return;const{password:ue,confirmPassword:me,...oe}=_,Q={...oe};if(ue){if(ue.length<6){c("Password must be at least 6 characters long.");return}if(ue!==me){c("Passwords do not match.");return}Q.password=ue}try{await le(`/users/${x.id}`,{method:"PUT",body:JSON.stringify(Q)}),g(!1),b(null),T({..._,password:"",confirmPassword:""}),ce()}catch(ie){c("Failed to update user."),console.error(ie)}},Ie=async je=>{if(window.confirm("Are you sure you want to delete this user?"))try{await le(`/users/${je}`,{method:"DELETE"}),ce()}catch(ue){c("Failed to delete user."),console.error(ue)}},We=je=>{b(je),T({name:je.name,email:je.email,role:je.role,password:"",confirmPassword:""}),g(!0)},Re=async()=>{se(!0);try{const je=await CM();te(je),je.length>0&&q(je[0].id),z(null)}catch(je){z("Failed to fetch subscription plans."),console.error(je)}finally{se(!1)}},Fe=je=>{V(je),$(!0),Re()},ve=async je=>{if(je.preventDefault(),!L||!X){c("Please select a clinic and a plan.");return}try{await le("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:L,planId:X})}),$(!1),V(null),q(""),ce(),c(null)}catch(ue){c("Failed to manually activate clinic subscription."),console.error(ue)}},ae=async je=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await GPe(je),ce(),c(null)}catch(ue){c("Failed to cancel subscription."),console.error(ue)}};return a&&s?r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("div",{className:"back-button",style:{width:80,height:32},children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx(Z,{width:"100%",height:40,style:{maxWidth:"300px"}}),r.jsx(Z,{width:150,height:40})]}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(je=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},je))})]})]}):l&&s?r.jsx("div",{className:"error-message",children:l}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:C,onChange:je=>P(je.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>f(!0),className:"add-user-button",children:"Add New User"})]}),d&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>f(!1),children:""}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:we,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:j.name,onChange:je=>S({...j,name:je.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:j.email,onChange:je=>S({...j,email:je.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:j.password,onChange:je=>S({...j,password:je.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:j.role,onChange:je=>S({...j,role:je.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),p&&x&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>g(!1),children:""}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:K,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:_.name,onChange:je=>T({..._,name:je.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:_.email,onChange:je=>T({..._,email:je.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:_.role,onChange:je=>T({..._,role:je.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"New Password (optional):"}),r.jsx("input",{type:"password",value:_.password,onChange:je=>T({..._,password:je.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm New Password:"}),r.jsx("input",{type:"password",value:_.confirmPassword,onChange:je=>T({..._,confirmPassword:je.target.value})})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),B&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>$(!1),children:""}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),Y&&r.jsx("div",{children:"Loading plans..."}),G&&r.jsx("div",{className:"error-message",children:G}),!Y&&!G&&H.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!Y&&!G&&H.length>0&&r.jsxs("form",{onSubmit:ve,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:X,onChange:je=>q(je.target.value),required:!0,children:H.map(je=>r.jsxs("option",{value:je.id,children:[je.name," - $",je.price,"/",je.interval," ",je.period]},je.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(je=>{const ue=je.clinic_id||"N/A",me=ue!=="N/A"?I[ue]:null,oe=(me==null?void 0:me.hasProPlan)??!1,Q=oe?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:je.name}),r.jsx("td",{children:je.email}),r.jsx("td",{children:je.role}),r.jsx("td",{children:ue}),r.jsx("td",{children:ue!=="N/A"?r.jsx("span",{className:oe?"pro-badge":"standard-badge",children:Q}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>We(je),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>Ie(je.id),className:"delete-button",children:"Delete"}),je.clinic_id&&!oe&&r.jsx("button",{onClick:()=>Fe(je.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),je.clinic_id&&oe&&r.jsx("button",{onClick:()=>ae(je.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},je.id)})})]})]})},RIe="_modalOverlay_1spz3_3",LIe="_modalContent_1spz3_29",FIe="_modalHeader_1spz3_53",$Ie="_modalTitle_1spz3_71",BIe="_modalCloseButton_1spz3_83",zIe="_modalBody_1spz3_111",qIe="_formGroup_1spz3_119",UIe="_inputField_1spz3_141",VIe="_errorText_1spz3_175",HIe="_successText_1spz3_193",GIe="_modalFooter_1spz3_211",WIe="_button_1spz3_227",YIe="_buttonPrimary_1spz3_247",KIe="_buttonSecondary_1spz3_265",Ci={modalOverlay:RIe,modalContent:LIe,modalHeader:FIe,modalTitle:$Ie,modalCloseButton:BIe,modalBody:zIe,formGroup:qIe,inputField:UIe,errorText:VIe,successText:HIe,modalFooter:GIe,button:WIe,buttonPrimary:YIe,buttonSecondary:KIe},QIe=({isOpen:t,onClose:e})=>{const[n,a]=v.useState(""),[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState(null);Wc(void 0,t?200:99999),v.useEffect(()=>{t&&g()},[t]);const g=async()=>{s(!0),d(null);try{const b=await le("/api/global-settings/app_gemini_api_key");if(b.ok){const j=await b.json();a(j.value||"")}else b.status}catch(b){console.warn("Could not fetch existing key:",b)}finally{s(!1)}},x=async()=>{l(!0),d(null),p(null);try{if(!(await le("/api/global-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"app_gemini_api_key",value:n})})).ok)throw new Error("Failed to save API Key");p("API Key updated successfully!"),setTimeout(()=>{e(),p(null)},1500)}catch(b){d(b.message||"Error saving key")}finally{l(!1)}};return t?r.jsx("div",{className:Ci.modalOverlay,children:r.jsxs("div",{className:Ci.modalContent,children:[r.jsxs("div",{className:Ci.modalHeader,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(zz,{size:24}),r.jsx("h3",{className:Ci.modalTitle,children:"App Gemini API Key"})]}),r.jsx("button",{onClick:e,className:Ci.modalCloseButton,children:r.jsx(Lt,{size:20})})]}),r.jsxs("div",{className:Ci.modalBody,children:[c&&r.jsx("div",{className:Ci.errorText,children:c}),f&&r.jsx("div",{className:Ci.successText,children:f}),r.jsxs("div",{className:Ci.formGroup,children:[r.jsx("label",{htmlFor:"gemini-key",children:"Gemini API Key"}),i?r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}}):r.jsx("input",{type:"text",id:"gemini-key",value:n,onChange:b=>a(b.target.value),className:Ci.inputField,placeholder:"Enter Gemini API Key (AIza...)",disabled:o})]}),r.jsx("p",{style:{fontSize:"0.9em",color:"var(--secondary-text-color, #666)"},children:"This key will be used as a fallback for all clinics if their specific Gemini API key is not configured."})]}),r.jsxs("div",{className:Ci.modalFooter,children:[r.jsx("button",{onClick:e,className:`${Ci.button} ${Ci.buttonSecondary}`,disabled:o,children:"Cancel"}),r.jsx("button",{onClick:x,className:`${Ci.button} ${Ci.buttonPrimary}`,disabled:o,children:o?"Saving...":"Save Key"})]})]})}):null},XIe=()=>{const[t,e]=v.useState(!1);return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(ld,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(Nr,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(mf,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(Nr,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(Oo,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]}),r.jsxs("div",{className:"admin-panel-card",onClick:()=>e(!0),style:{cursor:"pointer"},children:[r.jsx(zz,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage App Gemini API Key"}),r.jsx("p",{children:"Update the fallback Gemini API key used by the application."})]})]}),r.jsx(QIe,{isOpen:t,onClose:()=>e(!1)})]})},zA="tutorialCurrentStep",JIe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,d;n(!0);try{const f=await le("/api/drugs/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default medications imported successfully!","pharmacyImport")}else t(!1,"Failed to import medications.")}catch{t(!1,"Error importing medications.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Po,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(Mc,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(dw,{size:18})," Import Drugs"]})})]})},ZIe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,d;n(!0);try{const f=await le("/api/lab-tests/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default lab tests imported successfully!","labImport")}else t(!1,"Failed to import lab tests.")}catch{t(!1,"Error importing lab tests.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Po,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(Mc,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(rs,{size:18})," Import Tests"]})})]})},eRe=({onOpenCommandBar:t})=>r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),r.jsx("button",{onClick:t,className:"tutorial-button primary large-button",children:r.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",r.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),qA=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:r.jsx(hw,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:r.jsx(dw,{size:48,className:"step-icon pharmacy"}),component:JIe,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:r.jsx(rs,{size:48,className:"step-icon lab"}),component:ZIe,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:r.jsx(PQ,{size:48,className:"step-icon ai"}),component:eRe,actionText:null,isLast:!0}],tRe=({onClose:t,onMarkAsSeen:e})=>{const{openCommandBar:n}=Oc(),[a,i]=v.useState(()=>{const S=localStorage.getItem(zA);return S?parseInt(S,10):0}),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(null);v.useEffect(()=>{localStorage.setItem(zA,a.toString()),c(null)},[a]);const p=()=>{o(!0),setTimeout(()=>{i(S=>Math.min(S+1,qA.length-1)),o(!1)},300)},g=(S,_,T)=>{f(S),c(_),S&&(T==="pharmacyImport"||T==="labImport")&&setTimeout(p,1e3)},x=()=>{e(),t(),localStorage.removeItem(zA)},b=()=>{x(),setTimeout(()=>{n()},100)},j=qA[a];return r.jsx("div",{className:"tutorial-overlay",children:r.jsxs("div",{className:`tutorial-card ${s?"fade-out":"fade-in"}`,children:[r.jsxs("div",{className:"tutorial-visual",children:[r.jsx("div",{className:"icon-circle",children:j.icon}),r.jsx("div",{className:"step-indicators",children:qA.map((S,_)=>r.jsx("div",{className:`step-dot ${_===a?"active":""} ${_<a?"completed":""}`},_))})]}),r.jsxs("div",{className:"tutorial-content",children:[r.jsx("button",{className:"close-button",onClick:x,title:"Close Tutorial",children:r.jsx(Lt,{size:20})}),r.jsxs("div",{className:"text-content",children:[r.jsx("h2",{children:j.title}),r.jsx("p",{className:"description",children:j.description})]}),r.jsxs("div",{className:"interactive-area",children:[j.component?r.jsx(j.component,{onActionComplete:g,onOpenCommandBar:b}):null,l&&r.jsx("div",{className:`status-message ${d?"success":"error"}`,children:l})]}),r.jsxs("div",{className:"action-footer",children:[j.showSkip&&r.jsx("button",{onClick:p,className:"tutorial-button text-only",children:"Skip for now"}),j.actionText&&r.jsxs("button",{onClick:p,className:"tutorial-button primary",children:[j.actionText," ",r.jsx(dd,{size:16})]})]})]})]})})},nRe=({isOpen:t,onClose:e,onSuccess:n,medication:a,initialPatient:i,initialItems:s})=>{const[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState(null),[g,x]=v.useState(!1);Wc(void 0,t?200:99999),v.useEffect(()=>{if(t&&a){j([{id:Date.now(),medication_name:a.medicationName,drug_id:null,quantity:a.quantity,tablets_per_day:a.tabletsPerDay||1,number_of_days:a.numberOfDays||30,directions:a.directions||"",notes:a.notes||""}]),_(a.frequencyDays);try{const Fe=new Date(a.nextDeliveryDate);isNaN(Fe.getTime())||C(Fe.toISOString().split("T")[0])}catch(Fe){console.error("Error parsing date",Fe)}p({id:a.patientId,name:a.patientName,phone:a.patientPhone,patient_token_number:a.patientToken})}else t&&(i||s)?(s&&s.length>0&&j(s),i&&p(i)):t&&!a&&!s&&(j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30),C(""),p(null),l(""))},[t,a,i,s]);const[b,j]=v.useState([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),[S,_]=v.useState(30),[T,C]=v.useState(""),[P,k]=v.useState(null),[O,I]=v.useState(""),[F,B]=v.useState([]),[$,L]=v.useState(!1),[V,H]=v.useState(!1),[te,X]=v.useState(null),q=v.useRef(null),Y=v.useRef(null);v.useEffect(()=>{if(t){const Fe=new Date;Fe.setDate(Fe.getDate()+30),C(Fe.toISOString().split("T")[0])}},[t]);const se=v.useCallback(async Fe=>{if(!Fe.trim()){d([]);return}x(!0);try{const ve=await le(`/api/patients?search=${encodeURIComponent(Fe)}&limit=10`);if(ve.ok){const ae=await ve.json();d(ae.patients||[])}}catch(ve){console.error("Error searching patients:",ve)}finally{x(!1)}},[]);v.useEffect(()=>{q.current&&clearTimeout(q.current),o&&!f?q.current=setTimeout(()=>se(o),300):d([])},[o,f,se]);const G=v.useCallback(async Fe=>{if(!Fe.trim()){B([]);return}L(!0);try{const ve=await le(`/api/drugs?search=${encodeURIComponent(Fe)}&limit=10`);if(ve.ok){const ae=await ve.json();B(ae.drugs||[])}}catch(ve){console.error("Error searching drugs:",ve)}finally{L(!1)}},[]);v.useEffect(()=>{Y.current&&clearTimeout(Y.current),O&&P!==null?Y.current=setTimeout(()=>G(O),300):B([])},[O,P,G]);const z=Fe=>{if(!Fe)return 1;const ve=Fe.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return ve?parseInt(ve[1],10):1},ce=Fe=>{p(Fe),l(`${Fe.name} (${Fe.patient_token_number})`),d([])},we=(Fe,ve)=>{const ae=[...b];ae[ve]={...ae[ve],medication_name:Fe.name,drug_id:Fe.id,pack_size:z(Fe.pack),packs:0,loose:0,quantity:0},j(ae),k(null),I(""),B([])},K=(Fe,ve,ae)=>{const je=[...b],ue={...je[Fe]},me=ue.pack_size||1;if(ve==="packs"||ve==="loose"){const oe=parseInt(ae)||0;ve==="packs"&&(ue.packs=oe),ve==="loose"&&(ue.loose=oe);const Q=ue.packs||0,ie=ue.loose||0;ue.quantity=Q*me+ie}else if(ve==="tablets_per_day"||ve==="number_of_days"){ve==="tablets_per_day"&&(ue.tablets_per_day=ae),ve==="number_of_days"&&(ue.number_of_days=ae);const oe=parseFloat(ue.tablets_per_day.toString())||0,Q=parseInt(ue.number_of_days.toString())||0,ie=Math.ceil(oe*Q);ue.quantity=ie,ue.packs=Math.floor(ie/me),ue.loose=ie%me}else ue[ve]=ae;je[Fe]=ue,j(je)},Ie=()=>{j([...b,{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:S,directions:"",notes:"",packs:0,loose:0,pack_size:1}])},We=Fe=>{b.length>1&&j(b.filter((ve,ae)=>ae!==Fe))},Re=async Fe=>{if(Fe.preventDefault(),X(null),!f){X("Please select a patient.");return}if(b.some(ae=>!ae.medication_name||ae.quantity<=0)){X("Please ensure all items have a medication name and valid quantity.");return}H(!0);try{const ae={patient_id:f.id,items:b.map(ue=>({medication_name:ue.medication_name,drug_id:ue.drug_id,quantity:ue.quantity,tablets_per_day:ue.tablets_per_day,number_of_days:ue.number_of_days,directions:ue.directions,notes:ue.notes,frequency_days:S,next_delivery_date:T}))},je=await le("/api/recurring-medications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!je.ok){const ue=await je.json();throw new Error(ue.message+(ue.error?": "+ue.error:"")||"Failed to create recurring medication.")}n(),e(),p(null),l(""),j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30)}catch(ae){X(ae.message)}finally{H(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"add-recurring-modal",style:{maxWidth:"800px",width:"95%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Add Recurring Medication Order"}),r.jsx("button",{className:"close-btn",onClick:e,children:r.jsx(Lt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[te&&r.jsx("div",{className:"error-message",children:te}),r.jsxs("form",{onSubmit:Re,className:"recurring-form",children:[r.jsxs("div",{className:"order-settings-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsxs("label",{children:[r.jsx(Kn,{size:16})," Patient"]}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patient...",value:o,onChange:Fe=>{l(Fe.target.value),p(null)},className:f?"selected":"unselected"}),g&&r.jsx("span",{className:"spinner",children:"..."}),o&&!f&&c.length>0&&r.jsx("ul",{className:"suggestions-list",children:c.map(Fe=>r.jsxs("li",{onClick:()=>ce(Fe),children:[r.jsx("div",{className:"suggestion-name",children:Fe.name}),r.jsxs("div",{className:"suggestion-details",children:[Fe.phone,"  ",Fe.patient_token_number]})]},Fe.id))})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(Tb,{size:16})," Frequency"]}),r.jsxs("select",{value:S,onChange:Fe=>{const ve=parseInt(Fe.target.value);_(ve);const ae=new Date;ae.setDate(ae.getDate()+ve),C(ae.toISOString().split("T")[0]);const je=b.map(ue=>({...ue,number_of_days:ve}));j(je)},children:[r.jsx("option",{value:15,children:"Every 15 Days"}),r.jsx("option",{value:30,children:"Every 30 Days"}),r.jsx("option",{value:60,children:"Every 60 Days"}),r.jsx("option",{value:90,children:"Every 90 Days"})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(oa,{size:16})," Next Delivery"]}),r.jsx("input",{type:"date",value:T,onChange:Fe=>C(Fe.target.value)})]})]}),r.jsx("hr",{className:"divider"}),r.jsxs("div",{className:"items-header",children:[r.jsx("h4",{children:"Medications"}),r.jsxs("button",{type:"button",className:"add-item-btn",onClick:Ie,children:[r.jsx(qn,{size:14})," Add Drug"]})]}),r.jsx("div",{className:"items-list",children:b.map((Fe,ve)=>r.jsxs("div",{className:"medication-item-row",children:[r.jsxs("div",{className:"row-top",children:[r.jsxs("div",{className:"form-group med-search-group",children:[r.jsx("label",{children:"Drug Name"}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drug...",value:P===ve?O:Fe.medication_name,onFocus:()=>{k(ve),I(Fe.medication_name)},onChange:ae=>{I(ae.target.value),K(ve,"medication_name",ae.target.value)}}),P===ve&&$&&r.jsx("span",{className:"spinner",children:"..."}),P===ve&&O&&F.length>0&&r.jsx("ul",{className:"suggestions-list",children:F.map(ae=>r.jsxs("li",{onClick:()=>we(ae,ve),children:[r.jsx("div",{className:"suggestion-name",children:ae.name}),r.jsxs("div",{className:"suggestion-details",children:["Stock: ",ae.stock]})]},ae.id))})]})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Tabs/Day"}),r.jsx("input",{type:"number",min:"0.5",step:"0.5",value:Fe.tablets_per_day,onChange:ae=>K(ve,"tablets_per_day",ae.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Days"}),r.jsx("input",{type:"number",min:"1",value:Fe.number_of_days,onChange:ae=>K(ve,"number_of_days",ae.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Packs"}),r.jsx("input",{type:"number",min:"0",value:Fe.packs||"",onChange:ae=>K(ve,"packs",ae.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Loose"}),r.jsx("input",{type:"number",min:"0",value:Fe.loose||"",onChange:ae=>K(ve,"loose",ae.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Total"}),r.jsx("input",{type:"number",value:Fe.quantity,disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]}),r.jsx("button",{type:"button",className:"remove-btn",onClick:()=>We(ve),disabled:b.length===1,children:r.jsx(Bn,{size:16})})]}),r.jsxs("div",{className:"row-bottom",children:[r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Directions (e.g. 1-0-1 after food)",value:Fe.directions,onChange:ae=>K(ve,"directions",ae.target.value)})}),r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Notes",value:Fe.notes,onChange:ae=>K(ve,"notes",ae.target.value)})})]})]},Fe.id))}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-submit",disabled:V,children:V?"Creating...":"Create Recurring Order"})]})]})]})]})}):null},rRe=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(""),[c,d]=v.useState(1),[f,p]=v.useState(1),[g,x]=v.useState(0),[b,j]=v.useState(!1),[S,_]=v.useState(void 0),T=10,C=v.useRef(null);Wc();const P=v.useCallback(async(L,V)=>{a(!0),s(null);try{let H=`/api/recurring-medications?page=${L}&limit=${T}`;V&&(H+=`&search=${encodeURIComponent(V)}`);const te=await le(H);if(!te.ok)throw new Error("Failed to fetch recurring medications.");const X=await te.json();e(X.medications),p(X.totalPages),x(X.total),d(X.page)}catch(H){console.error(H),s(H.message||"An error occurred while fetching data.")}finally{a(!1)}},[]);v.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{P(c,o)},500),()=>{C.current&&clearTimeout(C.current)}),[o,c,P]);const k=L=>{l(L.target.value),d(1)},O=L=>{L>=1&&L<=f&&d(L)},I=L=>{_(L),j(!0)},F=()=>{P(c,o),j(!1),_(void 0)},B=L=>L===30?"Every 30 Days (Monthly)":L===15?"Every 15 Days":`Every ${L} Days`,$=L=>{switch(L){case"active":return"status-pill status-pill-active";case"paused":return"status-pill status-pill-paused";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill"}};return r.jsxs("div",{className:"refill-reminders-container",children:[r.jsxs("div",{className:"refill-header",children:[r.jsx("h3",{className:"refill-title",children:"Recurring Medications"}),r.jsxs("div",{className:"refill-actions",children:[r.jsxs("button",{className:"refill-action-button btn-add",onClick:()=>{_(void 0),j(!0)},children:[r.jsx(Cs,{size:16})," Add New"]}),r.jsxs("div",{className:"search-box",children:[r.jsx("input",{type:"text",placeholder:"Search patient, phone, medication...",value:o,onChange:k}),r.jsx(Mn,{size:18,className:"search-icon"})]})]})]}),i&&r.jsx("div",{className:"error-message-box",children:i}),r.jsx("div",{className:"refill-table-container",children:n?r.jsx("div",{className:"loading-pulse",children:"Loading..."}):t.length===0?r.jsx("div",{className:"empty-state",children:"No recurring medications found."}):r.jsx("div",{className:"refill-grouped-list",children:Object.values(t.reduce((L,V)=>{const H=V.patientId;return L[H]||(L[H]={patientId:V.patientId,patientName:V.patientName,patientPhone:V.patientPhone,patientToken:V.patientToken,medications:[]}),L[H].medications.push(V),L},{})).map(L=>r.jsxs("div",{className:"patient-medication-group-card",children:[r.jsxs("div",{className:"group-header",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("h4",{className:"patient-name",children:L.patientName}),r.jsxs("span",{className:"patient-meta",children:["Token: ",L.patientToken,"  Phone: ",L.patientPhone]})]}),r.jsx("div",{className:"group-actions"})]}),r.jsxs("table",{className:"refill-table group-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Medication"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Frequency"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:L.medications.map(V=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"med-name",children:V.medicationName}),(V.tabletsPerDay||V.numberOfDays||V.directions)&&r.jsxs("div",{className:"med-usage-details",style:{fontSize:"0.8em",color:"#666"},children:[V.tabletsPerDay&&r.jsxs("span",{children:[V.tabletsPerDay," tabs/day  "]}),V.numberOfDays&&r.jsxs("span",{children:[V.numberOfDays," days "]})]}),V.notes&&r.jsxs("div",{className:"med-notes",children:["Note: ",V.notes]})]}),r.jsx("td",{children:V.quantity}),r.jsx("td",{children:r.jsx("span",{className:"frequency-badge",children:B(V.frequencyDays)})}),r.jsx("td",{children:r.jsx("div",{className:"date-display",children:new Date(V.nextDeliveryDate).toLocaleDateString()})}),r.jsx("td",{children:r.jsx("span",{className:$(V.status),children:V.status})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",title:"Edit",onClick:()=>I(V),children:r.jsx(Ii,{size:16})}),r.jsx("button",{className:"action-btn delete",title:"Delete/Cancel",children:r.jsx(Bn,{size:16})})]})})]},V.id))})]})]},L.patientId))})}),!n&&f>1&&r.jsxs("div",{className:"pagination-container",children:[r.jsxs("span",{className:"pagination-info",children:["Page ",c," of ",f," (Total ",g,")"]}),r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("button",{onClick:()=>O(c-1),disabled:c===1,className:"page-btn",children:[r.jsx(Cb,{size:16})," Prev"]}),r.jsxs("button",{onClick:()=>O(c+1),disabled:c===f,className:"page-btn",children:["Next ",r.jsx(dd,{size:16})]})]})]}),r.jsx(nRe,{isOpen:b,onClose:()=>{j(!1),_(void 0)},onSuccess:F,medication:S})]})},aRe=()=>{const t=Mt(),e=Lr();return v.useEffect(()=>{const n=new URLSearchParams(e.search),a=n.get("token"),i=n.get("caseDetails");a?(async()=>{try{const o=await le(`/api/patients?search=${a}&limit=1`);if(!o.ok)throw new Error("Failed to fetch patient by token");const c=(await o.json()).patients[0];if(!c)throw new Error("Patient with the given token not found");const d=await le(`/api/queue/patient/${c.id}/latest`);if(d.ok){const g=await d.json();if(g!=null&&g._id){t(`/dashboard/edit-complaint/${g._id}`,{state:{initialComplaint:i}});return}}const f=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,complaint:i})});if(!f.ok)throw new Error("Failed to create queue entry");const p=await f.json();if(p!=null&&p.id)t(`/dashboard/edit-complaint/${p.id}`,{state:{initialComplaint:i}});else throw new Error("Failed to get ID from new queue entry.")}catch(o){console.error("Error handling complaint URL:",o),t("/dashboard/search-patient")}})():t("/dashboard/search-patient")},[e,t]),r.jsx("div",{children:"Loading..."})},OB=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(null),[l,c]=v.useState(!1),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_,T]=v.useState(!1),[C,P]=v.useState(null),[k,O]=v.useState([]),[I,F]=v.useState(null),[B,$]=v.useState(""),[L,V]=v.useState(""),[H,te]=v.useState(""),[X,q]=v.useState(""),[Y,se]=v.useState(""),[G,z]=v.useState(""),[ce,we]=v.useState(""),[K,Ie]=v.useState(""),[We,Re]=v.useState(""),[Fe,ve]=v.useState(""),[ae,je]=v.useState(""),[ue,me]=v.useState("cash"),oe=v.useCallback(async()=>{i(!0),o(null);try{const ge=await le("/api/distributors");if(!ge.ok)throw new Error(`Failed to fetch distributors: ${ge.statusText}`);const _e=await ge.json();n(_e)}catch(ge){console.error("Failed to fetch distributors:",ge),o(ge.message||"Failed to load distributors.")}finally{i(!1)}},[]);v.useEffect(()=>{oe()},[oe]);const Q=async ge=>{ge.preventDefault(),o(null);try{const _e=await le("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:L,phone:H,email:X,address:Y,gst_number:G,drug_license_number:ce})});if(!_e.ok){const ze=await _e.json();throw new Error(ze.message||"Failed to add distributor.")}Ge(),oe()}catch(_e){console.error("Error adding distributor:",_e),o(_e.message||"Failed to add distributor.")}},ie=async ge=>{if(ge.preventDefault(),o(null),!!C)try{const _e=await le(`/api/distributors/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:L,phone:H,email:X,address:Y,gst_number:G,drug_license_number:ce})});if(!_e.ok){const ze=await _e.json();throw new Error(ze.message||"Failed to update distributor.")}ne(),oe()}catch(_e){console.error("Error updating distributor:",_e),o(_e.message||"Failed to update distributor.")}},xe=async()=>{if(o(null),!!C)try{const ge=await le(`/api/distributors/${C.id}`,{method:"DELETE"});if(!ge.ok){const _e=await ge.json();throw new Error(_e.message||"Failed to delete distributor.")}Te(),oe()}catch(ge){console.error("Error deleting distributor:",ge),o(ge.message||"Failed to delete distributor.")}},ee=v.useCallback(async ge=>{o(null);try{const _e=await le(`/api/distributors/${ge}/payments`);if(!_e.ok)throw new Error(`Failed to fetch payments: ${_e.statusText}`);const Oe=(await _e.json()).map(mt=>({...mt,order_value:parseFloat(mt.order_value),amount_paid:parseFloat(mt.amount_paid),balance_remaining:parseFloat(mt.balance_remaining)}));O(Oe);const He=await le(`/api/distributors/${ge}/balance`);if(!He.ok)throw new Error(`Failed to fetch balance: ${He.statusText}`);const nt=await He.json();F({totalOrderValue:parseFloat(nt.totalOrderValue),totalAmountPaid:parseFloat(nt.totalAmountPaid),remainingBalance:parseFloat(nt.remainingBalance)})}catch(_e){console.error("Error fetching payments/balance:",_e),o(_e.message||"Failed to load payments or balance.")}},[]),Se=async ge=>{if(ge.preventDefault(),o(null),!!C)try{const _e=await le(`/api/distributors/${C.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:K,order_value:parseFloat(We||"0"),amount_paid:parseFloat(Fe||"0"),notes:ae,payment_mode:ue})});if(!_e.ok){const ze=await _e.json();throw new Error(ze.message||"Failed to add payment.")}he(),ee(C.id)}catch(_e){console.error("Error adding payment:",_e),o(_e.message||"Failed to add payment.")}},qe=()=>{$(""),V(""),te(""),q(""),se(""),z(""),we(""),o(null),f(!0)},Ge=()=>{f(!1)},Ne=ge=>{P(ge),$(ge.name),V(ge.contact_person||""),te(ge.phone||""),q(ge.email||""),se(ge.address||""),z(ge.gst_number||""),we(ge.drug_license_number||""),o(null),g(!0)},ne=()=>{g(!1),P(null)},de=ge=>{P(ge),o(null),b(!0)},Te=()=>{b(!1),P(null)},Ee=ge=>{P(ge),ee(ge.id),o(null),S(!0)},W=()=>{S(!1),P(null),O([]),F(null)},ye=ge=>{P(ge),Ie(new Date().toISOString().split("T")[0]),Re("0"),ve("0"),je(""),me("cash"),o(null),T(!0)},he=()=>{T(!1),P(null)};return a?r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",style:{marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{width:80,height:36}),r.jsx(Z,{width:200,height:32})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx(Z,{width:150,height:36}),r.jsx(Z,{width:150,height:36}),r.jsx(Z,{width:180,height:36})]})]}),r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact Person"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(ge=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:30})})]},ge))})]})})]}):s?r.jsxs("div",{className:"error-indicator",children:["Error: ",s]}):r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>t(-1),className:"dmp-button dmp-button-secondary",title:"Go Back",children:[r.jsx(rn,{size:20})," Back"]}),r.jsx("h2",{children:"Distributor Management"})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("div",{className:"view-mode-toggle",style:{display:"flex",gap:"8px"},children:[r.jsxs("button",{onClick:()=>c(!1),className:`dmp-button ${l?"dmp-button-secondary":"dmp-button-primary"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>c(!0),className:`dmp-button ${l?"dmp-button-primary":"dmp-button-secondary"}`,title:"Excel Mode (Edit)",children:[r.jsx(gf,{size:18})," Excel"]})]}),r.jsxs("button",{onClick:qe,className:"dmp-button dmp-button-primary",children:[r.jsx(Cs,{size:18}),"Add Distributor"]})]})]}),(()=>{const ge=e.reduce((ze,Oe)=>ze+parseFloat(Oe.remainingBalance||"0"),0),_e=ge>=0;return r.jsxs("div",{className:"stats-container",children:[r.jsxs("div",{className:`stat-card ${_e?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Total Balance"}),r.jsxs("span",{className:"value",children:["",ge.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Distributors"}),r.jsx("span",{className:"value",children:e.length})]})]})})(),r.jsx("div",{className:"table-wrapper",children:l?r.jsx(Ib,{columns:[{key:"name",label:"Name",editable:!0,type:"text"},{key:"contact_person",label:"Contact Person",editable:!0,type:"text"},{key:"phone",label:"Phone",editable:!0,type:"text"},{key:"email",label:"Email",editable:!0,type:"text"},{key:"address",label:"Address",editable:!0,type:"text"},{key:"gst_number",label:"GST Number",editable:!0,type:"text"},{key:"drug_license_number",label:"Drug License",editable:!0,type:"text"}],data:e,editable:!0,showRowNumbers:!0,title:"Distributors",onSave:async ge=>{const _e=ge.map(async ze=>{const Oe=e.find(He=>He.id===ze.id);if(Oe&&JSON.stringify(Oe)!==JSON.stringify(ze))return le(`/api/distributors/${ze.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ze)})});try{await Promise.all(_e),oe()}catch(ze){alert("Error saving changes"),console.error(ze)}}}):r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name / Contact"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Tax / License"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"2rem",color:"var(--dmp-text-secondary)"},children:"No distributors found."})}):e.map(ge=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"primary-text",children:ge.name}),r.jsx("div",{className:"secondary-text",children:ge.contact_person})]}),r.jsxs("td",{children:[r.jsx("div",{className:"secondary-text",children:ge.phone||"-"}),r.jsx("div",{className:"secondary-text",children:ge.email||"-"}),r.jsx("div",{className:"secondary-text",children:ge.address||"-"})]}),r.jsxs("td",{children:[r.jsxs("div",{className:"secondary-text",children:["GST: ",ge.gst_number||"-"]}),r.jsxs("div",{className:"secondary-text",children:["DL: ",ge.drug_license_number||"-"]})]}),r.jsx("td",{children:r.jsxs("span",{className:`status-badge ${parseFloat(ge.remainingBalance||"0")>0?"balance-ok":"balance-owed"}`,children:["",ge.remainingBalance||"0.00"]})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>Ee(ge),className:"dmp-button-icon",title:"View Payments & Balance",children:r.jsx(Mm,{size:18})}),r.jsx("button",{onClick:()=>ye(ge),className:"dmp-button-icon",title:"Add Payment",children:r.jsx(fw,{size:18})}),r.jsx("button",{onClick:()=>Ne(ge),className:"dmp-button-icon edit",title:"Edit Distributor",children:r.jsx(Ii,{size:18})}),r.jsx("button",{onClick:()=>de(ge),className:"dmp-button-icon delete",title:"Delete Distributor",children:r.jsx(Bn,{size:18})})]})})]},ge.id))})]})}),d&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:Ge,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Add New Distributor"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:Q,children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"name",children:"Name:"}),r.jsx("input",{type:"text",id:"name",className:"dmp-input",value:B,onChange:ge=>$(ge.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"contact_person",className:"dmp-input",value:L,onChange:ge=>V(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"phone",className:"dmp-input",value:H,onChange:ge=>te(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"email",children:"Email:"}),r.jsx("input",{type:"email",id:"email",className:"dmp-input",value:X,onChange:ge=>q(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"address",children:"Address:"}),r.jsx("textarea",{id:"address",className:"dmp-textarea",value:Y,onChange:ge=>se(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"gst_number",className:"dmp-input",value:G,onChange:ge=>z(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"drug_license_number",className:"dmp-input",value:ce,onChange:ge=>we(ge.target.value)})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:Ge,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Distributor"})]})]})]})}),p&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:ne,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Edit Distributor"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:ie,children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-name",children:"Name:"}),r.jsx("input",{type:"text",id:"edit-name",className:"dmp-input",value:B,onChange:ge=>$(ge.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"edit-contact_person",className:"dmp-input",value:L,onChange:ge=>V(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"edit-phone",className:"dmp-input",value:H,onChange:ge=>te(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-email",children:"Email:"}),r.jsx("input",{type:"email",id:"edit-email",className:"dmp-input",value:X,onChange:ge=>q(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-address",children:"Address:"}),r.jsx("textarea",{id:"edit-address",className:"dmp-textarea",value:Y,onChange:ge=>se(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"edit-gst_number",className:"dmp-input",value:G,onChange:ge=>z(ge.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"edit-drug_license_number",className:"dmp-input",value:ce,onChange:ge=>we(ge.target.value)})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:ne,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Save Changes"})]})]})]})}),x&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:Te,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Confirm Delete"}),r.jsxs("p",{children:['Are you sure you want to delete distributor "',C.name,'"?']}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:Te,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:xe,className:"dmp-button dmp-button-primary",style:{backgroundColor:"var(--dmp-danger-color)"},children:"Delete"})]})]})}),j&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"900px"},children:[r.jsx("button",{onClick:W,className:"dmp-modal-close",children:""}),r.jsxs("h3",{className:"dmp-modal-title",children:["Payments & Balance for ",C.name]}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),I&&r.jsxs("div",{className:"stats-container",style:{marginBottom:"2rem"},children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Order Value"}),r.jsxs("span",{className:"value",children:["",I.totalOrderValue.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Amount Paid"}),r.jsxs("span",{className:"value",children:["",I.totalAmountPaid.toFixed(2)]})]}),r.jsxs("div",{className:`stat-card ${I.remainingBalance>0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Remaining Balance"}),r.jsxs("span",{className:"value",children:["",I.remainingBalance.toFixed(2)]})]})]}),r.jsx("h4",{children:"Payment History"}),k.length===0?r.jsx("p",{children:"No payments recorded for this distributor."}):r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Order Value"}),r.jsx("th",{children:"Amount Paid"}),r.jsx("th",{children:"Balance Remaining"}),r.jsx("th",{children:"Payment Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:k.map(ge=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(ge.payment_date).toLocaleDateString()}),r.jsxs("td",{"data-label":"Order Value",children:["",ge.order_value.toFixed(2)]}),r.jsxs("td",{"data-label":"Amount Paid",children:["",ge.amount_paid.toFixed(2)]}),r.jsxs("td",{"data-label":"Balance Remaining",children:["",ge.balance_remaining.toFixed(2)]}),r.jsx("td",{"data-label":"Payment Mode",children:ge.payment_mode?ge.payment_mode.charAt(0).toUpperCase()+ge.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",children:ge.notes||"-"})]},ge.id))})]})}),r.jsx("div",{className:"dmp-modal-actions",children:r.jsx("button",{type:"button",onClick:W,className:"dmp-button dmp-button-secondary",children:"Close"})})]})}),_&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"420px"},children:[r.jsx("button",{onClick:he,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Add Payment"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:Se,children:[r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_date",children:"Date:"}),r.jsx("input",{type:"date",id:"payment_date",className:"dmp-input",value:K,onChange:ge=>Ie(ge.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_mode",children:"Mode:"}),r.jsxs("select",{id:"payment_mode",className:"dmp-select",value:ue,onChange:ge=>me(ge.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"order_value",children:"Order Value:"}),r.jsx("input",{type:"number",id:"order_value",className:"dmp-input",value:We,onChange:ge=>Re(ge.target.value),step:"0.01"})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"amount_paid",children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount_paid",className:"dmp-input",value:Fe,onChange:ge=>ve(ge.target.value),step:"0.01"})]})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",className:"dmp-textarea",value:ae,onChange:ge=>je(ge.target.value),rows:2,style:{resize:"none"}})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:he,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Payment"})]})]})]})})]})},Gj=t=>{if(!t)return"";let e=t.toLowerCase();return e=e.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),e=e.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),e=e.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),e},iRe=(t,e)=>{if(!t||!e||e.length===0)return;const n=Gj(t);let a=e.find(o=>Gj(o.name)===n);if(a)return a;let i=e.find(o=>Gj(o.name).includes(n));if(i)return i;let s=e.find(o=>n.includes(Gj(o.name)));if(s)return s},sRe=({isOpen:t,onClose:e,excelHeaders:n,onConfirm:a,availableFields:i})=>{const[s,o]=v.useState({});if(v.useEffect(()=>{t&&c()},[t,n,i]),!t)return null;const l=(f,p)=>{o(g=>({...g,[f]:p}))},c=()=>{const f={};n.forEach(p=>{const g=i.map(b=>({name:b})),x=iRe(p,g);x&&(f[p]=x.name)}),o(f)},d=()=>{const f={};for(const p in s)s[p]&&s[p]!=="none"&&(f[p]=s[p]);a(f),e()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Match File Columns"}),r.jsx("p",{className:"modal-description",children:'Please match the columns from your uploaded file to the corresponding fields in the drug inventory. You can use the "Auto Match" button for suggestions.'}),r.jsx("div",{className:"modal-actions-top",children:r.jsx("button",{type:"button",onClick:c,className:"button-auto-match",children:"Auto Match"})}),r.jsxs("div",{className:"column-mapping-grid",children:[r.jsx("div",{className:"grid-header",children:"Excel Column"}),r.jsx("div",{className:"grid-header",children:"App Field"}),n.map((f,p)=>r.jsxs(Ce.Fragment,{children:[r.jsx("div",{className:"excel-header-cell",children:f}),r.jsx("div",{className:"app-field-cell",children:r.jsxs("select",{value:s[f]||"",onChange:g=>l(f,g.target.value),className:"app-field-select",children:[r.jsx("option",{value:"",children:"-- Select Field --"}),r.jsx("option",{value:"none",children:"None (Ignore Column)"}),i.map((g,x)=>r.jsxs("option",{value:g,children:[g==="name"?"Composition Name":g==="brand_name"?"Brand Name":g==="price"?"MRP":g==="buying_price"?"Rate":g==="unit"?"Pack":g==="batch"?"Batch":g==="hsn_code"?"HSN Code":g==="mfg"?"MFG":g==="loose_quantity"?"Loose":g.replace(/_/g," ").replace(/\b\w/g,b=>b.toUpperCase())," "]},x))]})})]},p))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:d,className:"button-submit",children:"Confirm Mapping"})]})]})})},oRe=({entityType:t,config:e,values:n,onChange:a,className:i=""})=>{const o=(e[t]||[]).filter(c=>c.type!=="computed");if(o.length===0)return null;const l=c=>{const d=n[c.key]??"";switch(c.type){case"number":return r.jsx("input",{type:"number",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value===""?null:parseFloat(f.target.value)),className:"custom-text-input mt-1",placeholder:c.label,required:c.required});case"date":return r.jsx("input",{type:"date",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",required:c.required});case"boolean":return r.jsx("input",{type:"checkbox",id:`custom_${c.key}`,name:`custom_${c.key}`,checked:!!d,onChange:f=>a(c.key,f.target.checked),className:"custom-checkbox mt-1"});case"text":default:return r.jsx("input",{type:"text",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",placeholder:c.label,required:c.required})}};return r.jsxs("div",{className:`custom-fields-section ${i}`,children:[r.jsx("h4",{className:"custom-fields-title",children:"Custom Fields"}),r.jsx("div",{className:"custom-fields-grid",children:o.map(c=>r.jsxs("div",{className:"custom-field-item",children:[r.jsxs("label",{htmlFor:`custom_${c.key}`,className:"form-label",children:[c.label,c.required&&r.jsx("span",{className:"required-star",children:"*"})]}),l(c)]},c.key))})]})},lRe=({isOpen:t,onClose:e,onDrugAddedToPurchase:n,customColumnsConfig:a={}})=>{const[i,s]=v.useState({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null);v.useEffect(()=>{t&&(s({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),l(null),d(!1),p(!1))},[t]),v.useEffect(()=>{const T=P=>{P.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var k;(k=b.current)==null||k.focus()},0),P.preventDefault()))},C=P=>{g.current&&!g.current.contains(P.target)&&p(!1)};return document.addEventListener("keydown",T),document.addEventListener("mousedown",C),()=>{document.removeEventListener("keydown",T),document.removeEventListener("mousedown",C)}},[f]);const j=T=>{const{name:C,value:P,type:k}=T.target;s(O=>({...O,[C]:k==="number"?parseFloat(P)||null:P}))},S=(T,C)=>{s(P=>({...P,custom_fields:{...P.custom_fields,[T]:C}}))},_=T=>{if(T.preventDefault(),l(null),d(!0),i.mrp===void 0||i.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const C={...i,name:i.name===""?null:i.name,composition:i.composition===""?null:i.composition,rate:i.rate===0?null:i.rate,expiry_date:i.expiry_date===""?null:i.expiry_date,gst:i.gst===0?null:i.gst,margin:i.margin===0?null:i.margin,discount:i.discount===0?null:i.discount,brand_name:i.brand_name===""?null:i.brand_name,batch:i.batch===""?null:i.batch,hsn_code:i.hsn_code===""?null:i.hsn_code,mfg:i.mfg===""?null:i.mfg,loose:i.loose===0?null:i.loose,custom_fields:i.custom_fields||{}};n(C),d(!1),e()};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content add-drug-form-container max-w-2xl mx-auto",children:[r.jsxs("div",{className:"add-drug-form-header",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:e,className:"cancel-button",title:"Close",children:r.jsx(Lt,{size:24})})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("form",{onSubmit:_,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"name",className:"form-label",children:"Composition Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Cl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",value:i.name||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., Paracetamol",tabIndex:1})]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"brand_name",className:"form-label",children:"Brand Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Cl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:i.brand_name||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Cl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"mrp",required:!0,step:"0.01",min:"0",value:i.mrp||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Cl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,step:"1",min:"0",value:i.stock||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"pack",value:i.pack||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:i.expiry_date||"",onChange:j,className:"custom-text-input mt-1",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:i.box_number||"",onChange:j,className:"custom-text-input mt-1",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:3,value:i.description||"",onChange:j,className:"custom-text-input mt-1",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"rate",step:"0.01",min:"0",value:i.rate??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:10,ref:b})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:i.gst??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:11})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:i.margin??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:i.discount??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"batch",value:i.batch||"",onChange:j,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:i.hsn_code||"",onChange:j,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"mfg",value:i.mfg||"",onChange:j,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Quantity"}),r.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:i.loose??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:17})]})]})]})]}),r.jsx(oRe,{entityType:"drugs",config:a,values:i.custom_fields||{},onChange:S}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:e,disabled:c,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button inline-flex justify-center",tabIndex:19,children:c?"Adding...":"Add Drug"})]})]})]})}):null},cRe=({purchaseRows:t,onCellChange:e,onRemoveDrug:n,onAddEmptyRow:a})=>{const i=v.useRef(new Map),s=["name","mrp","stock","pack","expiry_date","rate","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],o=(l,c,d)=>{if(l.key==="Tab"){l.preventDefault();const f=s.indexOf(d);if(f!==-1){const p=(f+1)%s.length,g=s[p],x=i.current.get(`${c}-${g}`);x==null||x.focus()}}};return t.length===0?r.jsxs("div",{className:"no-drugs-message",children:[r.jsx("p",{children:"No drugs added to the purchase list yet."}),r.jsxs("button",{onClick:a,className:"action-button add-drug-to-table-button",children:[r.jsx(Cs,{size:18,className:"button-icon"}),"Add the first drug"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"purchase-drugs-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Composition Name"}),r.jsx("th",{children:"MRP ()"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Pack"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Rate ()"}),r.jsx("th",{children:"Brand Name"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{children:"GST (%)"}),r.jsx("th",{children:"Discount (%)"}),r.jsx("th",{children:"Margin (%)"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"HSN Code"}),r.jsx("th",{children:"MFG"}),r.jsx("th",{children:"Loose"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map((l,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("input",{type:"text",value:l.name||"",onChange:d=>e(d,l.id,"name"),onKeyDown:d=>o(d,l.id,"name"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.mrp||"",onChange:d=>e(d,l.id,"mrp"),onKeyDown:d=>o(d,l.id,"mrp"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-mrp`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.stock||"",onChange:d=>e(d,l.id,"stock"),onKeyDown:d=>o(d,l.id,"stock"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-stock`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.pack||"",onChange:d=>e(d,l.id,"pack"),onKeyDown:d=>o(d,l.id,"pack"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-pack`,d)}})}),r.jsx("td",{children:l.supplier||"N/A"}),r.jsx("td",{children:r.jsx("input",{type:"date",value:l.expiry_date||"",onChange:d=>e(d,l.id,"expiry_date"),onKeyDown:d=>o(d,l.id,"expiry_date"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-expiry_date`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.rate||"",onChange:d=>e(d,l.id,"rate"),onKeyDown:d=>o(d,l.id,"rate"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-rate`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.brand_name||"",onChange:d=>e(d,l.id,"brand_name"),onKeyDown:d=>o(d,l.id,"brand_name"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-brand_name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.box_number||"",onChange:d=>e(d,l.id,"box_number"),onKeyDown:d=>o(d,l.id,"box_number"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-box_number`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.gst||"",onChange:d=>e(d,l.id,"gst"),onKeyDown:d=>o(d,l.id,"gst"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-gst`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.discount||"",onChange:d=>e(d,l.id,"discount"),onKeyDown:d=>o(d,l.id,"discount"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-discount`,d)}})}),r.jsx("td",{children:(()=>{const d=l.mrp||0,f=l.rate||0,p=l.gst!==null&&l.gst!==void 0?l.gst/100*f:0,g=l.discount!==null&&l.discount!==void 0?l.discount/100*d:0,x=d-(f+p)-g;return`${(d>0?x/d*100:0).toFixed(2)}%`})()}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.batch||"",onChange:d=>e(d,l.id,"batch"),onKeyDown:d=>o(d,l.id,"batch"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-batch`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.hsn_code||"",onChange:d=>e(d,l.id,"hsn_code"),onKeyDown:d=>o(d,l.id,"hsn_code"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-hsn_code`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.mfg||"",onChange:d=>e(d,l.id,"mfg"),onKeyDown:d=>o(d,l.id,"mfg"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-mfg`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.loose||"",onChange:d=>e(d,l.id,"loose"),onKeyDown:d=>o(d,l.id,"loose"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-loose`,d)}})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>n(l.id),className:"delete-button",title:"Remove Item",children:r.jsx(Bn,{size:16})})})]},l.id||c))})]})})},uRe="_container_7ak2k_7",dRe="_header_7ak2k_207",hRe="_backButton_7ak2k_221",fRe="_title_7ak2k_265",pRe="_stickyActionBar_7ak2k_287",mRe="_actionRow_7ak2k_317",gRe="_inputWrapper_7ak2k_335",yRe="_inputIcon_7ak2k_345",xRe="_input_7ak2k_335",vRe="_quickDistributors_7ak2k_401",bRe="_distributorChip_7ak2k_417",jRe="_distributorChipIcon_7ak2k_463",wRe="_selectedInfo_7ak2k_473",NRe="_resultsDropdown_7ak2k_503",SRe="_resultItem_7ak2k_537",_Re="_buttonGroup_7ak2k_565",CRe="_button_7ak2k_565",TRe="_buttonPrimary_7ak2k_609",kRe="_buttonSecondary_7ak2k_631",ARe="_buttonAccent_7ak2k_653",ERe="_buttonDisabled_7ak2k_675",PRe="_tableSection_7ak2k_691",ORe="_cardTitle_7ak2k_707",DRe="_cardIcon_7ak2k_727",MRe="_footer_7ak2k_947",IRe="_totalValue_7ak2k_981",RRe="_footerControls_7ak2k_1005",LRe="_paidInputGroup_7ak2k_1017",FRe="_paidLabel_7ak2k_1029",$Re="_paidInput_7ak2k_1017",BRe="_errorMsg_7ak2k_1075",cn={container:uRe,header:dRe,backButton:hRe,title:fRe,stickyActionBar:pRe,actionRow:mRe,inputWrapper:gRe,inputIcon:yRe,input:xRe,quickDistributors:vRe,distributorChip:bRe,distributorChipIcon:jRe,selectedInfo:wRe,resultsDropdown:NRe,resultItem:SRe,buttonGroup:_Re,button:CRe,buttonPrimary:TRe,buttonSecondary:kRe,buttonAccent:ARe,buttonDisabled:ERe,tableSection:PRe,cardTitle:ORe,cardIcon:DRe,footer:MRe,totalValue:IRe,footerControls:RRe,paidInputGroup:LRe,paidLabel:FRe,paidInput:$Re,errorMsg:BRe},DB=()=>{const t=Mt(),{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f}=Cz(),[p,g]=v.useState(!1),[x,b]=v.useState(!0),j=v.useRef(null),S=v.useRef(null),[_,T]=v.useState(!1),C=v.useRef(null),[P,k]=v.useState(!1),[O,I]=v.useState([]),[F,B]=v.useState(null),[$,L]=v.useState(null),[V,H]=v.useState(!1),[te,X]=v.useState([]),q=["name","description","mrp","stock","pack","supplier","expiry_date","rate","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"];v.useEffect(()=>{(async()=>{b(!0);try{const xe=await le("/api/distributors?limit=4");if(xe.ok){const ee=await xe.json();X(Array.isArray(ee)?ee.slice(0,4):[])}}catch(xe){console.error("Failed to fetch initial distributors",xe)}finally{b(!1)}})()},[]);const Y=()=>{const xe={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",mrp:0,stock:0,pack:"",supplier:a?a.name:"",expiry_date:"",rate:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};n(ee=>[...ee,xe])},se=async(ie,xe)=>{if(!ie){L("No file provided for import.");return}if(!a){L("Please select a distributor before importing.");return}g(!0),L(null);const ee=new FormData;ee.append("inventoryFile",ie),ee.append("columnMapping",JSON.stringify(xe));try{const Se=await le("/api/drugs/parse-excel",{method:"POST",body:ee});if(!Se.ok){const Ge=await Se.json();throw new Error(Ge.message||`Failed to parse Excel file: ${Se.statusText}`)}const qe=await Se.json();n(Ge=>[...Ge,...qe.map(Ne=>({...Ne,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:a?a.name:Ne.supplier}))])}catch(Se){console.error("Failed to parse Excel file:",Se),L(Se.message||"Failed to parse Excel file. Please check the file format and try again.")}finally{j.current&&(j.current.value=""),g(!1),B(null)}},G=async ie=>{if(ie.target.files&&ie.target.files[0]){const xe=ie.target.files[0];B(xe),L(null),g(!0);const ee=new FormData;ee.append("inventoryFile",xe);try{const Se=await le("/api/drugs/get-file-headers",{method:"POST",body:ee});if(!Se.ok){const Ge=await Se.json();throw new Error(Ge.message||`Failed to get file headers: ${Se.statusText}`)}const{headers:qe}=await Se.json();I(qe),k(!0)}catch(Se){console.error("Failed to get file headers:",Se),L(Se.message||"Failed to read file headers. Please check the file format and try again."),B(null)}finally{g(!1)}}else B(null)},z=ie=>{F?se(F,ie):L("No file selected for import after mapping."),k(!1)},ce=()=>{k(!1),I([]),B(null),j.current&&(j.current.value="")},we=()=>{var ie;(ie=j.current)==null||ie.click()},K=async ie=>{if(ie.target.files&&ie.target.files[0]){const xe=ie.target.files[0];L(null),g(!0);const ee=new FormData;ee.append("file",xe),ee.append("output_type","csv");const qe={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const Ge=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:qe,body:ee});if(!Ge.ok){const he=await Ge.json();throw new Error(he.message||`Failed to extract data from image/PDF: ${Ge.statusText}`)}const Ne=await Ge.json();if(!Ne.success||!Ne.content)throw new Error(Ne.detail||"Nanonets API did not return expected content.");let ne=Ne.content;ne=ne.split(`
`).filter(he=>!he.startsWith("#")&&he.trim()!=="").join(`
`);const Te=new File([ne],"extracted_data.csv",{type:"text/csv"}),Ee=new FormData;Ee.append("inventoryFile",Te);const W=await le("/api/drugs/get-file-headers",{method:"POST",body:Ee});if(!W.ok){const he=await W.json();throw new Error(he.message||`Failed to get headers from extracted CSV: ${W.statusText}`)}const{headers:ye}=await W.json();I(ye),B(Te),k(!0)}catch(Ge){console.error("Failed to extract data from image/PDF:",Ge),L(Ge.message||"Failed to extract data from image/PDF. Please check the file and try again.")}finally{S.current&&(S.current.value=""),g(!1)}}},Ie=()=>{var ie;(ie=S.current)==null||ie.click()},We=()=>{if(!a){L("Please select a distributor before adding a drug manually.");return}H(!0)},Re=()=>{H(!1),L(null)},Fe=ie=>{n(xe=>[...xe,{...ie,id:Date.now().toString(),supplier:a?a.name:ie.supplier}]),Re()},ve=ie=>{n(xe=>xe.filter(ee=>ee.id!==ie))},ae=(ie,xe,ee)=>{const{value:Se}=ie.target;n(qe=>qe.map(Ge=>{if(Ge.id===xe){let Ne=Se;ee==="expiry_date"?Ne=Se.trim()===""?null:Se:["mrp","stock","rate","gst","margin","discount","loose"].includes(ee)&&(Ne=parseFloat(Se),isNaN(Ne)&&(Ne=null));const ne={...Ge,[ee]:Ne};return ee==="name"&&a&&!ne.supplier&&(ne.supplier=a.name),ne}return Ge}))},je=v.useCallback(()=>e.reduce((ie,xe)=>{const ee=xe.stock||0,Se=xe.rate||0,qe=xe.gst||0,Ge=xe.discount||0;let Ne=Se*(1-Ge/100),ne=ee*Ne;return ne+=ne*(qe/100),ie+ne},0),[e]),ue=async()=>{if(!a){L("Please select a distributor before submitting the purchase.");return}const ie=e.filter(xe=>Object.values(xe).some(ee=>typeof ee=="string"&&ee.trim()!==""||typeof ee=="number"&&ee!==0||ee!=null&&typeof ee!="string"&&typeof ee!="number"));if(ie.length===0){L("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),g(!1);return}g(!0),L(null);try{for(const qe of ie){const Ge={...qe,expiry_date:qe.expiry_date===""?null:qe.expiry_date,distributorId:a.id},Ne=await le("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ge)});if(!Ne.ok){const ne=await Ne.json();throw new Error(ne.message||`Failed to add drug ${qe.name}: ${Ne.statusText}`)}}const xe=je(),ee=new Date().toISOString().split("T")[0],Se=await le(`/api/distributors/${a.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:ee,order_value:xe,amount_paid:l,notes:"Payment from purchase page."})});if(!Se.ok){const qe=await Se.json();throw new Error(qe.message||`Failed to record distributor payment: ${Se.statusText}`)}n([]),i(null),o(""),c(0),t("/dashboard/inventory")}catch(xe){console.error("Failed to submit purchase:",xe),L(xe.message||"Failed to submit purchase. Please try again.")}finally{g(!1)}},me=v.useCallback(async ie=>{if(ie.trim()===""){f([]);return}try{const xe=await le(`/api/distributors?search=${encodeURIComponent(ie)}`);if(!xe.ok)throw new Error(`Failed to fetch distributors: ${xe.statusText}`);const ee=await xe.json();f(ee)}catch(xe){console.error("Failed to fetch distributors:",xe),L(xe.message||"Failed to load distributors.")}},[]),oe=ie=>{const xe=ie.target.value;o(xe),i(null),C.current&&clearTimeout(C.current),xe.trim()!==""?C.current=setTimeout(()=>{me(xe),T(!0)},300):(f([]),T(!1))},Q=ie=>{i(ie),o(ie.name),T(!1),f([])};return v.useEffect(()=>{const ie=xe=>{xe.target instanceof HTMLElement&&!xe.target.closest(`.${cn.inputWrapper}`)&&T(!1)};return document.addEventListener("mousedown",ie),()=>{document.removeEventListener("mousedown",ie),C.current&&clearTimeout(C.current)}},[]),r.jsxs("div",{className:cn.container,children:[r.jsxs("div",{className:cn.header,children:[r.jsx("button",{onClick:()=>t(-1),className:cn.backButton,title:"Go Back",children:r.jsx(rn,{size:24})}),r.jsx("h2",{className:cn.title,children:"Purchase Inventory"})]}),$&&r.jsxs("div",{className:cn.errorMsg,children:[r.jsx(Xr,{size:20}),$]}),r.jsx("div",{className:cn.stickyActionBar,children:r.jsxs("div",{className:cn.actionRow,children:[r.jsxs("div",{style:{flex:1,minWidth:"300px",position:"relative"},children:[r.jsxs("div",{className:cn.inputWrapper,children:[r.jsx(Mn,{className:cn.inputIcon,size:20}),r.jsx("input",{type:"text",placeholder:"Search distributor...",value:s,onChange:oe,onFocus:()=>s.trim()!==""&&T(!0),className:cn.input}),_&&d.length>0&&r.jsx("ul",{className:cn.resultsDropdown,children:d.map(ie=>r.jsx("li",{onClick:()=>Q(ie),className:cn.resultItem,children:ie.name},ie.id))})]}),x?r.jsx("div",{className:cn.quickDistributors,children:[1,2,3,4].map(ie=>r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}},ie))}):te.length>0&&!a&&r.jsx("div",{className:cn.quickDistributors,children:te.map(ie=>r.jsxs("button",{className:cn.distributorChip,onClick:()=>Q(ie),children:[r.jsx(Kn,{className:cn.distributorChipIcon}),ie.name]},ie.id))}),a&&r.jsxs("div",{className:cn.selectedInfo,style:{marginTop:"0.5rem",marginBottom:0},children:[r.jsx(Ml,{size:18}),r.jsxs("span",{children:["Selected: ",r.jsx("strong",{children:a.name})]})]})]}),r.jsxs("div",{className:cn.buttonGroup,children:[r.jsx("input",{ref:j,type:"file",className:"sr-only",style:{display:"none"},accept:".xlsx, .xls, .csv",onChange:G}),r.jsx("input",{ref:S,type:"file",className:"sr-only",style:{display:"none"},accept:".pdf, .png, .jpg, .jpeg",onChange:K}),r.jsxs("button",{onClick:we,disabled:p||!a,className:`${cn.button} ${cn.buttonPrimary} ${p||!a?cn.buttonDisabled:""}`,title:a?"":"Select a distributor to import",children:[r.jsx(bE,{size:18}),p?"Processing...":"Import Excel/CSV"]}),r.jsxs("button",{onClick:Ie,disabled:p||!a,className:`${cn.button} ${cn.buttonSecondary} ${p||!a?cn.buttonDisabled:""}`,title:a?"":"Select a distributor",children:[r.jsx(Oa,{size:18}),"Scan Image/PDF"]}),r.jsxs("button",{onClick:We,disabled:!a,className:`${cn.button} ${cn.buttonAccent} ${a?"":cn.buttonDisabled}`,title:a?"":"Select a distributor",children:[r.jsx(Cs,{size:18}),"Add Manually"]})]})]})}),r.jsx(sRe,{isOpen:P,onClose:ce,excelHeaders:O,onConfirm:z,availableFields:q}),V&&r.jsx(lRe,{isOpen:V,onClose:Re,onDrugAddedToPurchase:Fe}),r.jsxs("div",{className:cn.tableSection,children:[r.jsxs("div",{className:cn.cardTitle,children:[r.jsx(Ab,{className:cn.cardIcon,size:24}),"Purchase Items (",e.length,")"]}),r.jsx(cRe,{purchaseRows:e,onCellChange:ae,onRemoveDrug:ve,onAddEmptyRow:Y})]}),r.jsxs("div",{className:cn.footer,children:[r.jsxs("button",{onClick:Y,className:`${cn.button} ${cn.buttonSecondary}`,children:[r.jsx(Cs,{size:18}),"Add New Row"]}),r.jsxs("div",{className:cn.footerControls,children:[r.jsxs("div",{className:cn.paidInputGroup,children:[r.jsx("label",{htmlFor:"amount-paid",className:cn.paidLabel,children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount-paid",value:l,onChange:ie=>c(parseFloat(ie.target.value)||0),placeholder:"0.00",className:cn.paidInput,step:"0.01",disabled:!a})]}),r.jsxs("div",{className:cn.totalValue,children:["Total: ",r.jsxs("span",{children:["",je().toFixed(2)]})]}),r.jsx("button",{onClick:ue,disabled:p||e.length===0||!a,className:`${cn.button} ${cn.buttonPrimary} ${cn.submitButton} ${p||!a||e.length===0?cn.buttonDisabled:""}`,style:{padding:"0.8rem 1.5rem",fontSize:"1rem"},children:p?"Submitting...":"Complete Purchase"})]})]})]})},zRe=t=>{if(!t)return 1;const e=t.match(/(?:\d+x)?(\d+)/);return e&&e[1]?parseInt(e[1],10):1},qRe=()=>{const t=Mt(),e=Lr(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(""),[P,k]=v.useState(""),[O,I]=v.useState(""),[F,B]=v.useState(0),$=v.useRef(!1),[L,V]=v.useState(null),[H,te]=v.useState(!1),[X,q]=v.useState(!1),[Y,se]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),G=()=>{Y.length<5&&se(ee=>[...ee,{id:Date.now().toString(),method:"cash",amount:0}])},z=ee=>{Y.length>2&&se(Se=>Se.filter(qe=>qe.id!==ee))},ce=(ee,Se,qe)=>{se(Ge=>{const Ne=Ge.map(ne=>ne.id===ee?Se==="method"?{...ne,method:qe}:{...ne,amount:Math.max(0,qe)}:ne);if(Se==="amount"&&Ne.length===2){const de=Ne.findIndex(W=>W.id===ee)===0?1:0,Te=Math.max(0,qe),Ee=ue-Te;Ne[de]={...Ne[de],amount:Math.max(0,Ee)}}return Ne})},we=(ee,Se)=>{const qe=Y.filter(Ne=>Ne.id!==ee).reduce((Ne,ne)=>Ne+ne.amount,0),Ge=Math.max(0,Se-qe);se(Ne=>Ne.map(ne=>ne.id===ee?{...ne,amount:Ge}:ne))},K=ee=>{const Se=Math.max(0,Math.min(100,isNaN(ee)?0:ee));$.current=!0,B(Se);const qe=i.map(Ge=>({...Ge,discount_percentage:Se}));s(qe)},Ie=(ee,Se)=>{const qe=[...i];qe[ee].discount_percentage=isNaN(Se)?0:Se,s(qe)};v.useEffect(()=>{if($.current){$.current=!1;return}const ee=i.reduce((Ge,Ne)=>Ge+(Ne.total_price??0),0);if(ee===0){B(0);return}const qe=i.reduce((Ge,Ne)=>{const de=(Ne.total_price??0)*((Ne.discount_percentage??0)/100);return Ge+de},0)/ee*100;B(Ge=>Math.abs(Ge-qe)>.01?qe:Ge)},[i]);const We=async()=>{if(!n)return d("No order data available to bill."),null;if(i.length===0)return d("Cannot bill an empty order."),null;p(!0),d(null);try{const ee=i.map(de=>{const Te=(de.pricePerLooseUnit??0)*(de.looseQuantity??0),Ee=Te*((de.discount_percentage??0)/100),W=Te-Ee;return{name:de.name,pack_quantity:de.loosePacks??0,loose_quantity:de.looseUnits??0,price:de.originalPrice??0,pack_price:de.originalPrice??0,loose_price:de.pricePerLooseUnit??0,total:W,drug_id:de.drug_id,discount_percentage:de.discount_percentage??0,batch:de.batch,expiry_date:de.expiry_date}}),Se={patientId:n.patientId,queueId:n.id,items:ee,amount:ue,paymentMode:X?"split":g,type:"pharmacy",related_id:n.id,status:"paid",discountPercentage:F};X&&(Se.splitPayments=Y.map(de=>({method:de.method,amount:de.amount})));const qe=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)}),Ge=await qe.json();if(!qe.ok||!Ge.id)throw new Error(Ge.message||"Failed to create bill.");const Ne=await le(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:Ge.id,medications:i})});if(!Ne.ok){const de=await Ne.text();throw new Error(`Failed to update pharmacy order status: ${Ne.statusText} - ${de}`)}a(de=>de?{...de,status:"billed",bill_id:Ge.id}:null);const ne=X?Y.filter(de=>de.method==="credit").reduce((de,Te)=>de+Te.amount,0):g==="credit"?ue:0;if(ne>0)try{await le(`/api/patient-debts/${n.patientId}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:ne,related_bill_id:Ge.id,notes:`Pharmacy Bill #${Ge.id}`})})}catch(de){console.error("Failed to create debt entry:",de)}return t(`/dashboard/pharmacy-billing/${n.id}`,{replace:!0,state:{order:{...n,status:"billed",bill_id:Ge.id},initialItems:i}}),Ge.id}catch(ee){return console.error("Billing process failed:",ee),d(ee.message||"Failed to mark order as billed. Please try again."),null}finally{p(!1)}},Re=async()=>{if(n)try{const ee=await le(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed",medications:i})});if(!ee.ok){const Se=await ee.text();console.error("Failed to dispense order:",Se)}}catch(ee){console.error("Error dispensing order:",ee)}},Fe=()=>{window.print()},ve=async()=>{await We()&&(window.print(),await Re(),t(-1))};v.useEffect(()=>{const ee=e.pathname.split("/"),Se=ee[ee.length-1];Se?(async()=>{try{l(!0);const[Ge,Ne,ne]=await Promise.all([le(`/api/pharmacy-orders/${Se}`),le("/api/drugs").then(W=>W.ok?W.json():null).catch(()=>null),le("/api/clinics/settings").then(W=>W.ok?W.json():null).catch(()=>null)]);if(!Ge.ok)throw new Error("Failed to fetch pharmacy order details");const de=await Ge.json();a(de);let Te=[];Ne&&(Te=Ne.drugs||Ne||[]),ne&&(_(ne.upi_id||""),C(ne.name||""),k(ne.address||""),I(ne.notes||""));const Ee=de.medications.map(W=>{const ye=zRe(W.unit),he=(W.pack_quantity??0)*ye+(W.loose_quantity??0),ge=Te.find(mt=>W.drug_id&&String(mt.id)===String(W.drug_id)||mt.name.toLowerCase()===W.name.toLowerCase()),_e=W.batch||(ge==null?void 0:ge.batch)||(ge==null?void 0:ge.batch_number),ze=W.expiry_date||(ge==null?void 0:ge.expiry_date),Oe=Number(W.pack_price)||Number(ge==null?void 0:ge.mrp)||0,He=Number(ge==null?void 0:ge.rate)||0;let nt=Number(W.loose_price)||0;return nt===0&&(Oe>0&&ye>0?nt=Oe/ye:He>0&&(nt=He)),{...W,isLoose:!0,loosePacks:W.pack_quantity??0,looseUnits:W.loose_quantity??0,looseQuantity:he,pack_price:Oe,loose_price:nt,total_price:Number(W.total_price)||nt*he,pricePerLooseUnit:nt,originalPrice:Oe,discount_percentage:Number(W.discount_percentage)??0,directions_to_use:W.directions_to_use,tabletsPerDay:W.tabletsPerDay,numberOfDays:W.numberOfDays,batch:_e,expiry_date:ze}});s(Ee)}catch(Ge){console.error("Failed to fetch data:",Ge),d(Ge.message||"Failed to load order details.")}finally{l(!1)}})():(d("No pharmacy order ID provided."),l(!1))},[e.pathname]);const ae=v.useMemo(()=>i.reduce((ee,Se)=>ee+(Se.total_price??0),0),[i]),je=v.useMemo(()=>i.reduce((ee,Se)=>{const Ge=(Se.total_price??0)*(Se.discount_percentage??0)/100;return ee+Ge},0),[i]),ue=v.useMemo(()=>ae-je,[ae,je]),me=v.useMemo(()=>Y.reduce((ee,Se)=>ee+Se.amount,0),[Y]),oe=v.useMemo(()=>ue-me,[ue,me]),Q=v.useMemo(()=>Math.abs(oe)<.01,[oe]),ie=v.useMemo(()=>X?Y.some(ee=>ee.method==="credit"&&ee.amount>0):g==="credit",[X,Y,g]),xe=v.useMemo(()=>X?Y.filter(ee=>ee.method==="credit").reduce((ee,Se)=>ee+Se.amount,0):g==="credit"?ue:0,[X,Y,g,ue]);return v.useEffect(()=>{if(ue>0&&S){const ee=`upi://pay?pa=${S}&pn=ClinicName&am=${ue.toFixed(2)}&cu=INR`;j(ee)}else j("")},[ue,S]),v.useEffect(()=>{(async()=>{if(g==="credit"&&(n!=null&&n.patientId)){te(!0);try{const Se=await le(`/api/patient-debts/${n.patientId}/balance`);if(Se.ok){const qe=await Se.json();V(qe.netDebt||0)}else V(0)}catch(Se){console.error("Error fetching patient debt:",Se),V(0)}finally{te(!1)}}})()},[g,n==null?void 0:n.patientId]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:60,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})})]},ee))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(Z,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T?`${T} Pharmacy`:"Pharmacy Bill"}),(P||O)&&r.jsxs("div",{className:"clinic-details-print",children:[P&&r.jsx("span",{className:"small-text clinic-address",children:P}),O&&r.jsx("span",{className:"small-text clinic-notes",children:O})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Pharmacy Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(_c,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Medications"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"BATCH"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{children:"QUANTITY"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((ee,Se)=>{var de;const qe=ee.total_price??0,Ge=qe*(ee.discount_percentage??0)/100,Ne=qe-Ge;return r.jsxs("tr",{children:[r.jsx("td",{children:Se+1}),r.jsx("td",{children:ee.name}),r.jsx("td",{children:ee.batch||"N/A"}),r.jsx("td",{children:ee.expiry_date?new Date(ee.expiry_date).toLocaleDateString():"N/A"}),r.jsxs("td",{children:[r.jsxs("div",{children:["Packs: ",ee.loosePacks??0]}),r.jsxs("div",{children:["Loose: ",ee.looseUnits??0]})]}),r.jsx("td",{children:((de=ee.originalPrice)==null?void 0:de.toFixed(2))??"N/A"}),r.jsx("td",{children:((ee.pricePerLooseUnit??0)*(1-(ee.discount_percentage??0)/100)).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ee.discount_percentage===0?"":ee.discount_percentage,onChange:Te=>Ie(Se,parseFloat(Te.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsxs("td",{children:[5 .toFixed(1),"%"]}),r.jsx("td",{children:Ne.toFixed(2)})]},Se)})})]}):r.jsx("p",{children:"No medications in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",F.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",je.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"GST (Included)"}),r.jsxs("span",{children:["",(ue*.05).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ue.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:X?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),X&&Y.map((ee,Se)=>ee.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:ee.method==="cash"?"Cash":ee.method==="upi"?"UPI":ee.method==="card"?"Card":ee.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",ee.amount.toFixed(2)]})]},Se))]}),L!==null&&(L>0||ie)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(L??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(L??0).toFixed(2)]})]}),ie&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",xe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((L??0)+(ie?xe:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Da,{value:b,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",je.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:F===0?"":F,onChange:ee=>K(parseFloat(ee.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ue.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(Da,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>q(!X),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:X?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:X?"rgba(79, 172, 254, 0.1)":"transparent",color:X?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Io,{size:14}),"Split"]})]}),X?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ue.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:Y.map((ee,Se)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Se+1}),r.jsxs("select",{value:ee.method,onChange:qe=>ce(ee.id,"method",qe.target.value),className:`split-payment-select ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ee.amount||"",onChange:qe=>ce(ee.id,"amount",parseFloat(qe.target.value)||0),className:`split-payment-input ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),Y.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>we(ee.id,ue),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>z(ee.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Bn,{size:12})})]})]},ee.id))}),Y.length<5&&r.jsxs("button",{type:"button",onClick:G,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(qn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",me.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Q?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Q?"":oe>0?"":"",Q?"Balanced":oe>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(oe).toFixed(2)]})]}),!Q&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ue.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:g,onChange:ee=>x(ee.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),ie&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),H?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:L&&L>0?"#dc3545":"#28a745"},children:["",(L||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",xe.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((L||0)+xe).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[n.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Fe,className:"secondary-button print-preview-button no-print",disabled:f||i.length===0,children:"Print Preview"}),r.jsx("button",{onClick:ve,className:"primary-button",disabled:f||i.length===0,children:f?"Processing...":"Finalise and Bill"})]}),n.status==="billed"&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${n.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},URe=()=>{const t=Mt(),e=Lr(),[n,a]=v.useState(null),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState(!0),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState("cash"),[T,C]=v.useState(""),[P,k]=v.useState(""),[O,I]=v.useState(""),[F,B]=v.useState(""),[$,L]=v.useState(""),[V,H]=v.useState(""),[te,X]=v.useState(0),q=v.useRef(!1),[Y,se]=v.useState(null),[G,z]=v.useState(!1),[ce,we]=v.useState(!1),[K,Ie]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),We=()=>{K.length<5&&Ie(ne=>[...ne,{id:Date.now().toString(),method:"cash",amount:0}])},Re=ne=>{K.length>2&&Ie(de=>de.filter(Te=>Te.id!==ne))},Fe=(ne,de,Te)=>{Ie(Ee=>{const W=Ee.map(ye=>ye.id===ne?de==="method"?{...ye,method:Te}:{...ye,amount:Math.max(0,Te)}:ye);if(de==="amount"&&W.length===2){const he=W.findIndex(ze=>ze.id===ne)===0?1:0,ge=Math.max(0,Te),_e=xe-ge;W[he]={...W[he],amount:Math.max(0,_e)}}return W})},ve=(ne,de)=>{const Te=K.filter(W=>W.id!==ne).reduce((W,ye)=>W+ye.amount,0),Ee=Math.max(0,de-Te);Ie(W=>W.map(ye=>ye.id===ne?{...ye,amount:Ee}:ye))},ae=ne=>{const de=Math.max(0,Math.min(100,isNaN(ne)?0:ne));q.current=!0,X(de);const Te=c.map(Ee=>({...Ee,discount_percentage:de}));d(Te)},je=(ne,de)=>{const Te=[...c];Te[ne].discount_percentage=isNaN(de)?0:de,d(Te)};v.useEffect(()=>{if(q.current){q.current=!1;return}const ne=c.reduce((Ee,W)=>Ee+(W.price??0),0);if(ne===0){X(0);return}const Te=c.reduce((Ee,W)=>{const he=(W.price??0)*((W.discount_percentage??0)/100);return Ee+he},0)/ne*100;X(Ee=>Math.abs(Ee-Te)>.01?Te:Ee)},[c]);const ue=async()=>{if(!n)return x("No order data available to bill."),null;if(c.length===0)return x("Cannot bill an empty order."),null;j(!0),x(null);try{const ne=c.map(he=>{const ge=he.price,_e=ge*((he.discount_percentage??0)/100),ze=ge-_e;return{name:he.name,price:he.price,quantity:1,total:ze,item_id:he.id,type:"lab_test",discount_percentage:he.discount_percentage??0}}),de={patientId:n.patient_id,items:ne,amount:xe,paymentMode:ce?"split":S,type:"lab",related_id:n.id,status:"paid",discountPercentage:te};ce&&(de.splitPayments=K.map(he=>({method:he.method,amount:he.amount})));const Te=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)}),Ee=await Te.json();if(!Te.ok||!Ee.id)throw new Error(Ee.message||"Failed to create bill.");const W=await le(`/api/lab/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:Ee.id})});if(!W.ok){const he=await W.text();throw new Error(`Failed to update lab order status: ${W.statusText} - ${he}`)}a(he=>he?{...he,status:"billed",bill_id:Ee.id}:null);const ye=ce?K.filter(he=>he.method==="credit").reduce((he,ge)=>he+ge.amount,0):S==="credit"?xe:0;if(ye>0)try{await le(`/api/patient-debts/${n.patient_id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:ye,related_bill_id:Ee.id,notes:`Lab Bill #${Ee.id}`})})}catch(he){console.error("Failed to create debt entry:",he)}return t(`/dashboard/lab-billing/${n.id}`,{replace:!0,state:{...e.state,order:{...n,status:"billed",bill_id:Ee.id}}}),Ee.id}catch(ne){return console.error("Billing process failed:",ne),x(ne.message||"Failed to mark order as billed. Please try again."),null}finally{j(!1)}},me=()=>{window.print()},oe=async()=>{await ue()&&(window.print(),t(-1))};v.useEffect(()=>{const ne=e.pathname.split("/"),de=ne[ne.length-1];de?(async()=>{try{const[Ee,W]=await Promise.all([le(`/api/lab/${de}`),le("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!Ee.ok)throw new Error("Failed to fetch lab order details");const ye=await Ee.json();a(ye);const he=ye.patient_id?le(`/api/patients/${ye.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1});if(W.ok&&"json"in W){const ze=await W.json();k(ze.upi_id||""),I(ze.name||""),B(ze.address||""),L(ze.notes||""),H(ze.labLetterheadUrl||"")}const ge=await he;if(ge.ok&&"json"in ge){const ze=await ge.json();s(ze.name),l(ze.patient_token_number)}const _e=ye.tests.map(ze=>({...ze,price:typeof ze.price=="string"?parseFloat(ze.price):Number(ze.price)||0,discount_percentage:0,total_price:typeof ze.price=="string"?parseFloat(ze.price):Number(ze.price)||0}));d(_e)}catch(Ee){console.error("Failed to fetch data:",Ee),x(Ee.message||"Failed to load order details.")}finally{p(!1)}})():(x("No lab order ID provided."),p(!1))},[e.pathname]);const Q=v.useMemo(()=>c.reduce((ne,de)=>ne+(de.price??0),0),[c]),ie=v.useMemo(()=>c.reduce((ne,de)=>{const Ee=(de.price??0)*(de.discount_percentage??0)/100;return ne+Ee},0),[c]),xe=v.useMemo(()=>Q-ie,[Q,ie]),ee=v.useMemo(()=>K.reduce((ne,de)=>ne+de.amount,0),[K]),Se=v.useMemo(()=>xe-ee,[xe,ee]),qe=v.useMemo(()=>Math.abs(Se)<.01,[Se]),Ge=v.useMemo(()=>ce?K.some(ne=>ne.method==="credit"&&ne.amount>0):S==="credit",[ce,K,S]),Ne=v.useMemo(()=>ce?K.filter(ne=>ne.method==="credit").reduce((ne,de)=>ne+de.amount,0):S==="credit"?xe:0,[ce,K,S,xe]);return v.useEffect(()=>{if(xe>0&&P){const ne=`upi://pay?pa=${P}&pn=ClinicName&am=${xe.toFixed(2)}&cu=INR`;C(ne)}else C("")},[xe,P]),v.useEffect(()=>{(async()=>{if(Ge&&(n!=null&&n.patient_id)){z(!0);try{const de=await le(`/api/patient-debts/${n.patient_id}/balance`);if(de.ok){const Te=await de.json();se(Te.netDebt||0)}else se(0)}catch(de){console.error("Error fetching patient debt:",de),se(0)}finally{z(!1)}}})()},[Ge,n==null?void 0:n.patient_id]),f?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(Z,{width:200,height:20}),r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:100,height:24})]}),r.jsx(Z,{width:"100%",height:150})," ",r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})})]})]})}):g?r.jsxs("div",{className:"error-message-box",children:["Error: ",g]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[V&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:V,alt:"Lab Letterhead",className:"print-letterhead-image"})}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:O?`${O} Lab`:"Lab Bill"}),(F||$)&&r.jsxs("div",{className:"clinic-details-print",children:[F&&r.jsx("span",{className:"small-text clinic-address",children:F}),$&&r.jsx("span",{className:"small-text clinic-notes",children:$})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:20})}),r.jsx("h1",{children:"Lab Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(rs,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Lab Tests"})}),c.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"TEST DESCRIPTION"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:c.map((ne,de)=>{const Te=ne.price??0,Ee=Te*(ne.discount_percentage??0)/100,W=Te-Ee;return r.jsxs("tr",{children:[r.jsx("td",{children:de+1}),r.jsx("td",{children:ne.name}),r.jsx("td",{children:typeof ne.price=="number"?ne.price.toFixed(2):Number(ne.price||0).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ne.discount_percentage||"",onChange:ye=>je(de,parseFloat(ye.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:W.toFixed(2)})]},de)})})]}):r.jsx("p",{children:"No tests in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",te.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",xe.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:ce?"Split Payment":S==="cash"?"Cash":S==="upi"?"UPI":S==="card"?"Card":S==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),ce&&K.map((ne,de)=>ne.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:ne.method==="cash"?"Cash":ne.method==="upi"?"UPI":ne.method==="card"?"Card":ne.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",ne.amount.toFixed(2)]})]},de))]}),Y!==null&&(Y>0||Ge)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(Y??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(Y??0).toFixed(2)]})]}),Ge&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",Ne.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((Y??0)+(Ge?Ne:0)).toFixed(2)]})]})]})]}),T&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${S!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Da,{value:T,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:te===0?"":te,onChange:ne=>ae(parseFloat(ne.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:b||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",xe.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:T?r.jsxs(r.Fragment,{children:[r.jsx(Da,{value:T,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>we(!ce),disabled:b||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ce?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ce?"rgba(79, 172, 254, 0.1)":"transparent",color:ce?"#4facfe":"#666",cursor:b||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Io,{size:14}),"Split"]})]}),ce?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",xe.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:K.map((ne,de)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:de+1}),r.jsxs("select",{value:ne.method,onChange:Te=>Fe(ne.id,"method",Te.target.value),className:`split-payment-select ${ne.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ne.amount||"",onChange:Te=>Fe(ne.id,"amount",parseFloat(Te.target.value)||0),className:`split-payment-input ${ne.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed"})]}),K.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ve(ne.id,xe),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>Re(ne.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Bn,{size:12})})]})]},ne.id))}),K.length<5&&r.jsxs("button",{type:"button",onClick:We,className:"split-payment-add-btn",disabled:b||n.status==="billed",children:[r.jsx(qn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${qe?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[qe?"":Se>0?"":"",qe?"Balanced":Se>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Se).toFixed(2)]})]}),!qe&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",xe.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:S,onChange:ne=>_(ne.target.value),className:"payment-mode-select",disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Ge&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),G?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:Y&&Y>0?"#dc3545":"#28a745"},children:["",(Y||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",Ne.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((Y||0)+Ne).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:me,className:"secondary-button print-preview-button no-print",disabled:b||c.length===0,children:"Print Preview"}),n.status!=="billed"&&r.jsx("button",{onClick:oe,className:"primary-button",disabled:b||c.length===0,children:b?"Processing...":"Finalise and Bill"}),n.status==="billed"&&n.bill_id&&r.jsx("button",{onClick:()=>t("/billing",{state:{billId:n.bill_id}}),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})]}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},VRe=500,HRe=()=>{const t=Mt(),{queueId:e}=Ma(),[n]=Nz(),a=n.get("doctorId"),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,d]=v.useState(null),[f,p]=v.useState(null),[g,x]=v.useState([]),[b,j]=v.useState(!0),[S,_]=v.useState(null),[T,C]=v.useState(!1),[P,k]=v.useState(!1),[O,I]=v.useState(null),[F,B]=v.useState("cash"),[$,L]=v.useState(""),[V,H]=v.useState(""),[te,X]=v.useState(""),[q,Y]=v.useState(""),[se,G]=v.useState(""),[z,ce]=v.useState(0),[we,K]=v.useState(null),[Ie,We]=v.useState(!1),[Re,Fe]=v.useState(!1),[ve,ae]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),je=()=>{ve.length<5&&ae(W=>[...W,{id:Date.now().toString(),method:"cash",amount:0}])},ue=W=>{ve.length>2&&ae(ye=>ye.filter(he=>he.id!==W))},me=(W,ye,he)=>{ae(ge=>{const _e=ge.map(ze=>ze.id===W?ye==="method"?{...ze,method:he}:{...ze,amount:Math.max(0,he)}:ze);if(ye==="amount"&&_e.length===2){const Oe=_e.findIndex(mt=>mt.id===W)===0?1:0,He=Math.max(0,he),nt=xe-He;_e[Oe]={..._e[Oe],amount:Math.max(0,nt)}}return _e})},oe=(W,ye)=>{const he=ve.filter(_e=>_e.id!==W).reduce((_e,ze)=>_e+ze.amount,0),ge=Math.max(0,ye-he);ae(_e=>_e.map(ze=>ze.id===W?{...ze,amount:ge}:ze))};v.useEffect(()=>{(async()=>{if(!e){_("No queue ID provided."),j(!1);return}try{j(!0),_(null);const[ye,he]=await Promise.all([le(`/api/queue/${e}`),le("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ye.ok)throw new Error("Failed to fetch queue entry");const ge=await ye.json();if(s(ge),he.ok&&"json"in he){const nt=await he.json();H(nt.upi_id||""),X(nt.name||""),Y(nt.address||""),G(nt.notes||"")}const _e=a||ge.doctor_id,[ze,Oe]=await Promise.all([ge.patient_id?le(`/api/patients/${ge.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1}),_e?le(`/api/staff/${_e}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1})]);if(ze.ok&&"json"in ze){const nt=await ze.json();l(nt)}let He=VRe;if(_e&&(p(_e),Oe.ok&&"json"in Oe)){const nt=await Oe.json();d(nt),nt.opd_fee!=null&&!isNaN(parseFloat(String(nt.opd_fee)))&&(He=parseFloat(String(nt.opd_fee)))}x([{name:"Consultation Fee",quantity:1,price:He,total:He,discount_percentage:0}])}catch(ye){console.error("Failed to fetch data:",ye),_(ye.message||"Failed to load billing details.")}finally{j(!1)}})()},[e,a]);const Q=v.useMemo(()=>g.reduce((W,ye)=>W+ye.total,0),[g]),ie=v.useMemo(()=>Q*(z/100),[Q,z]),xe=v.useMemo(()=>Q-ie,[Q,ie]),ee=v.useMemo(()=>ve.reduce((W,ye)=>W+ye.amount,0),[ve]),Se=v.useMemo(()=>xe-ee,[xe,ee]),qe=v.useMemo(()=>Math.abs(Se)<.01,[Se]),Ge=v.useMemo(()=>Re?ve.some(W=>W.method==="credit"&&W.amount>0):F==="credit",[Re,ve,F]),Ne=v.useMemo(()=>Re?ve.filter(W=>W.method==="credit").reduce((W,ye)=>W+ye.amount,0):F==="credit"?xe:0,[Re,ve,F,xe]);v.useEffect(()=>{if(xe>0&&V){const W=`upi://pay?pa=${V}&pn=${encodeURIComponent(te)}&am=${xe.toFixed(2)}&cu=INR`;L(W)}else L("")},[xe,V,te]),v.useEffect(()=>{(async()=>{if(Ge&&(o!=null&&o.id)){We(!0);try{const ye=await le(`/api/patient-debts/${o.id}/balance`);if(ye.ok){const he=await ye.json();K(he.netDebt||0)}else K(0)}catch(ye){console.error("Error fetching patient debt:",ye),K(0)}finally{We(!1)}}})()},[Ge,o==null?void 0:o.id]);const ne=W=>{const ye=Math.max(0,Math.min(100,isNaN(W)?0:W));ce(ye)},de=async()=>{if(!i||!o)return _("Missing queue or patient data."),null;if(g.length===0)return _("Cannot create an empty bill."),null;C(!0),_(null);try{const W=g.map(ze=>({name:ze.name,quantity:ze.quantity,price:ze.price,total:ze.total*(1-z/100)})),ye={patientId:o.id,queueId:i.id,items:W,amount:xe,paymentMode:Re?"split":F,type:"consultation",related_id:i.id,status:"paid",discountPercentage:z};Re&&(ye.splitPayments=ve.map(ze=>({method:ze.method,amount:ze.amount})));const he=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ye)}),ge=await he.json();if(!he.ok||!ge.id)throw new Error(ge.message||"Failed to create bill.");const _e=Re?ve.filter(ze=>ze.method==="credit").reduce((ze,Oe)=>ze+Oe.amount,0):F==="credit"?xe:0;if(_e>0)try{await le(`/api/patient-debts/${o.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:_e,related_bill_id:ge.id,notes:`Consultation Bill #${ge.id}`})})}catch(ze){console.error("Failed to create debt entry:",ze)}if(f&&i.id)try{const ze={status:"waiting",doctorId:f},Oe=await le(`/api/queue/${i.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(ze)});if(Oe.ok)console.log(`Doctor ${f} assigned to queue ${i.id} after billing.`);else{const He=await Oe.json();console.error("Failed to assign doctor to queue:",He.message)}}catch(ze){console.error("Error assigning doctor to queue:",ze)}return k(!0),I(ge.id),ge.id}catch(W){return console.error("Billing process failed:",W),_(W.message||"Failed to create bill. Please try again."),null}finally{C(!1)}},Te=()=>{window.print()},Ee=async()=>{await de()&&(window.print(),t(-1))};return b?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(Z,{width:200,height:20}),r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:100,height:24})]}),r.jsx(Z,{width:"100%",height:150})," ",r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})})]})]})}):S?r.jsxs("div",{className:"error-message-box",children:["Error: ",S]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:te||"Clinic Bill"}),(q||se)&&r.jsxs("div",{className:"clinic-details-print",children:[q&&r.jsx("span",{className:"small-text clinic-address",children:q}),se&&r.jsx("span",{className:"small-text clinic-notes",children:se})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date().toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:20})}),r.jsx("h1",{children:"Consultation Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Patient ID"]})," ",(o==null?void 0:o.id)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date().toLocaleDateString()]}),c&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(xf,{size:16})," Doctor"]})," ",c.name]}),i.complaint&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Complaint"})," ",i.complaint]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Bill Items"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((W,ye)=>{const he=W.total*(z/100),ge=W.total-he;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:W.name}),r.jsx("td",{children:W.quantity}),r.jsxs("td",{children:["",W.price.toFixed(2)]}),r.jsxs("td",{children:["",ge.toFixed(2)]})]},ye)})})]}):r.jsx("p",{children:"No items in this bill."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),z>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",z.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",xe.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:Re?"Split Payment":F==="cash"?"Cash":F==="upi"?"UPI":F==="card"?"Card":F==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),Re&&ve.map((W,ye)=>W.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:W.method==="cash"?"Cash":W.method==="upi"?"UPI":W.method==="card"?"Card":W.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",W.amount.toFixed(2)]})]},ye))]}),we!==null&&(we>0||Ge)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(we??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(we??0).toFixed(2)]})]}),Ge&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",Ne.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((we??0)+(Ge?Ne:0)).toFixed(2)]})]})]})]}),$&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${F!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Da,{value:$,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:z===0?"":z,onChange:W=>ne(parseFloat(W.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:T||P}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",xe.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:$?r.jsxs(r.Fragment,{children:[r.jsx(Da,{value:$,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>Fe(!Re),disabled:T||P,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:Re?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:Re?"rgba(79, 172, 254, 0.1)":"transparent",color:Re?"#4facfe":"#666",cursor:T||P?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Io,{size:14}),"Split"]})]}),Re?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",xe.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:ve.map((W,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:W.method,onChange:he=>me(W.id,"method",he.target.value),className:`split-payment-select ${W.method==="credit"?"is-credit":""}`,disabled:T||P,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:W.amount||"",onChange:he=>me(W.id,"amount",parseFloat(he.target.value)||0),className:`split-payment-input ${W.method==="credit"?"is-credit":""}`,disabled:T||P})]}),ve.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>oe(W.id,xe),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>ue(W.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Bn,{size:12})})]})]},W.id))}),ve.length<5&&r.jsxs("button",{type:"button",onClick:je,className:"split-payment-add-btn",disabled:T||P,children:[r.jsx(qn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${qe?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[qe?"":Se>0?"":"",qe?"Balanced":Se>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Se).toFixed(2)]})]}),!qe&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",xe.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:F,onChange:W=>B(W.target.value),className:"payment-mode-select",disabled:T||P,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Ge&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Ie?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:we&&we>0?"#dc3545":"#28a745"},children:["",(we||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",Ne.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((we||0)+Ne).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[!P&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Te,className:"secondary-button print-preview-button no-print",disabled:T||g.length===0,children:"Print Preview"}),r.jsx("button",{onClick:Ee,className:"primary-button",disabled:T||g.length===0,children:T?"Processing...":"Finalise and Bill"})]}),P&&O&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${O}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your visit!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No queue data available."})},GRe=()=>{const t=Mt(),[e,n]=v.useState(!0),[a,i]=v.useState([]),[s,o]=v.useState(""),[l,c]=v.useState(!0),[d,f]=v.useState(!1),[p,g]=v.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[x,b]=v.useState(null),[j,S]=v.useState(!1),_=($,L)=>{b({type:$,message:L}),setTimeout(()=>b(null),3e3)},T=$=>{switch($){case"doctor":return r.jsx(xf,{size:14,className:"text-blue-600"});case"receptionist":return r.jsx(Kz,{size:14,className:"text-green-600"});case"pharmacy":return r.jsx(_c,{size:14,className:"text-purple-600"});case"lab":return r.jsx(rs,{size:14,className:"text-yellow-600"});default:return r.jsx(ld,{size:14,className:"text-gray-500"})}},C=$=>{switch($){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},P=v.useCallback(async()=>{n(!0);try{const $=await le("/staff");if($.ok){const L=await $.json();i(L.map(V=>({...V,id:V._id||V.id})))}}catch($){console.error("Error fetching staff:",$),_("error","Failed to load staff list")}finally{n(!1)}},[]),k=v.useCallback(async()=>{c(!0);try{const $=await le("/api/clinics/settings");if($.ok){const L=await $.json();g({admissionCharge:parseFloat(L.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(L.perDayCharge||0).toFixed(2),otherCharges:parseFloat(L.otherCharges||0).toFixed(2),aiMemory:L.aiMemory||"",clinicWideSystemPrompt:L.clinicWideSystemPrompt||"",gemini_api_key:L.gemini_api_key||"",low_stock_threshold:L.low_stock_threshold!==void 0&&L.low_stock_threshold!==null?String(L.low_stock_threshold):"10",name:L.name||"",logoUrl:L.logoUrl||"",labLetterheadUrl:L.labLetterheadUrl||"",upi_id:L.upi_id||"",address:L.address||"",notes:L.notes||"",clinic_id:L.clinic_id,voice_ai_language:L.voice_ai_language||"en-US"})}}catch($){console.error("Error fetching settings:",$),_("error","Failed to load settings")}finally{c(!1)}},[]);v.useEffect(()=>{P(),k()},[P,k]);const O=$=>{const{name:L,value:V}=$.target;g(H=>({...H,[L]:V}))},I=async()=>{f(!0);try{const $=parseFloat(p.admissionCharge),L=parseFloat(p.perDayCharge),V=parseFloat(p.otherCharges),H=parseInt(p.low_stock_threshold);if((await le("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:p.name,admissionCharge:$,perDayCharge:L,otherCharges:V,aiMemory:p.aiMemory,clinicWideSystemPrompt:p.clinicWideSystemPrompt,gemini_api_key:p.gemini_api_key,low_stock_threshold:H,logoUrl:p.logoUrl,labLetterheadUrl:p.labLetterheadUrl,upi_id:p.upi_id,address:p.address,notes:p.notes,voice_ai_language:p.voice_ai_language})})).ok)_("success","Changes saved successfully");else throw new Error("Failed to save")}catch($){console.error("Error saving settings:",$),_("error","Failed to save settings")}finally{f(!1)}},F=a.filter($=>$.name.toLowerCase().includes(s.toLowerCase())||$.role.toLowerCase().includes(s.toLowerCase())),B=async $=>{for(const L of $){const V=document.getElementById(L);V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),V.classList.add("ai-feedback-glow"),await new Promise(H=>setTimeout(H,1500)),V.classList.remove("ai-feedback-glow"))}};return r.jsxs("div",{className:"clinic-hub-container",children:[r.jsxs("header",{className:"clinic-hub-header",children:[r.jsxs("div",{className:"clinic-hub-title",children:[r.jsx("h1",{children:"Clinic Hub"}),r.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),r.jsxs("div",{className:"clinic-hub-actions",children:[x&&r.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.message}),r.jsxs("button",{className:"btn-add-staff",onClick:()=>t("/dashboard/staff/add"),children:[r.jsx(qn,{size:16})," Add Staff"]}),r.jsxs("button",{className:"btn-save-changes",onClick:I,disabled:d,children:[r.jsx(as,{size:16})," ",d?"Saving...":"Save Changes"]})]})]}),r.jsxs("main",{className:"clinic-hub-content",children:[r.jsxs("div",{className:"team-directory-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Oo,{size:18,className:"text-gray-500"}),r.jsxs("span",{className:"panel-title",children:["Team Directory (",a.length,")"]})]}),r.jsx("div",{className:"search-container",children:r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Mn,{size:16,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:s,onChange:$=>o($.target.value)})]})}),r.jsx("div",{className:"team-list",children:e?r.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map($=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsxs("div",{className:"flex-1",children:[r.jsx(Z,{width:120,height:16,className:"mb-1"}),r.jsx(Z,{width:80,height:12})]})]},$))}):F.length===0?r.jsx("div",{className:"empty-state",children:"No staff found."}):F.map($=>r.jsxs("div",{id:`staff-member-${$.id}`,className:"team-member-item",children:[r.jsx("div",{className:`member-avatar ${C($.role)}`,children:$.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"member-info",children:[r.jsx("div",{className:"member-name",children:$.name}),r.jsxs("div",{className:"member-role",children:[T($.role),$.role]})]}),r.jsx("span",{className:`member-status ${$.active?"status-active":"status-inactive"}`,children:$.active?"Active":"Inactive"}),r.jsx("button",{className:"btn-edit-member",onClick:()=>t(`/dashboard/staff/edit/${$.id}`),children:r.jsx(Ii,{size:16})})]},$.id))})]}),r.jsxs("div",{className:"config-console-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(qz,{size:18,className:"text-gray-500"}),r.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),l?r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):r.jsxs("div",{className:"config-content",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Vz,{size:16})," CLINIC IDENTITY & LOCATION"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Clinic Name"}),r.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:p.name,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Logo URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:p.logoUrl,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:p.labLetterheadUrl,onChange:O})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Address"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:p.address,onChange:O})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(mf,{size:16})," FINANCIAL OPERATIONS"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Admission Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:p.admissionCharge,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Per Day Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:p.perDayCharge,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Other Charges ()"}),r.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:p.otherCharges,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"UPI ID"}),r.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:p.upi_id,onChange:O})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(FO,{size:16})," INVENTORY & AI"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:p.low_stock_threshold,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Voice AI Language"}),r.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:p.voice_ai_language,onChange:$=>g(L=>({...L,voice_ai_language:$.target.value})),children:[r.jsx("option",{value:"en-US",children:"English"}),r.jsx("option",{value:"hi-IN",children:"Hindi"}),r.jsx("option",{value:"te-IN",children:"Telugu"}),r.jsx("option",{value:"bn-IN",children:"Bengali"}),r.jsx("option",{value:"mr-IN",children:"Marathi"}),r.jsx("option",{value:"ta-IN",children:"Tamil"}),r.jsx("option",{value:"gu-IN",children:"Gujarati"}),r.jsx("option",{value:"kn-IN",children:"Kannada"}),r.jsx("option",{value:"ml-IN",children:"Malayalam"}),r.jsx("option",{value:"pa-IN",children:"Punjabi"}),r.jsx("option",{value:"es-ES",children:"Spanish"}),r.jsx("option",{value:"fr-FR",children:"French"}),r.jsx("option",{value:"de-DE",children:"German"}),r.jsx("option",{value:"it-IT",children:"Italian"}),r.jsx("option",{value:"pt-PT",children:"Portuguese"}),r.jsx("option",{value:"ru-RU",children:"Russian"}),r.jsx("option",{value:"ja-JP",children:"Japanese"}),r.jsx("option",{value:"ko-KR",children:"Korean"}),r.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),r.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Gemini API Key"}),r.jsx("input",{type:"password",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:p.gemini_api_key,onChange:O,placeholder:"******************"})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),r.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:p.clinicWideSystemPrompt,onChange:O,placeholder:"Instructions for the AI..."})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),r.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:p.aiMemory,onChange:O,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),j&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:r.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:r.jsx(HH,{onClose:()=>S(!1),settings:p,staffList:a,onSettingsUpdate:k,onStaffUpdate:P,onHighlight:B})})})]})},WRe="_container_13uqm_121",YRe="_header_13uqm_141",KRe="_title_13uqm_187",QRe="_controls_13uqm_203",XRe="_dateInputGroup_13uqm_231",JRe="_dateInputLabel_13uqm_255",ZRe="_dateInput_13uqm_231",e4e="_section_13uqm_297",t4e="_sectionTitle_13uqm_325",n4e="_statsGrid_13uqm_351",r4e="_statCard_13uqm_365",a4e="_statTitle_13uqm_397",i4e="_statValue_13uqm_415",s4e="_statSubtitle_13uqm_431",o4e="_revenueGrid_13uqm_443",l4e="_revenueCard_13uqm_469",c4e="_revenueCardTitle_13uqm_485",u4e="_revenueCardList_13uqm_505",d4e="_revenueCardListItem_13uqm_517",h4e="_tableContainer_13uqm_557",f4e="_table_13uqm_557",p4e="_textRight_13uqm_639",m4e="_textGreen_13uqm_647",g4e="_textRed_13uqm_655",y4e="_loadingContainer_13uqm_673",x4e="_errorAlert_13uqm_693",v4e="_backButton_13uqm_759",b4e="_chartsGrid_13uqm_797",j4e="_chartCard_13uqm_823",w4e="_chartWrapper_13uqm_873",yt={container:WRe,header:YRe,title:KRe,controls:QRe,dateInputGroup:XRe,dateInputLabel:JRe,dateInput:ZRe,section:e4e,sectionTitle:t4e,statsGrid:n4e,statCard:r4e,statTitle:a4e,statValue:i4e,statSubtitle:s4e,revenueGrid:o4e,revenueCard:l4e,revenueCardTitle:c4e,revenueCardList:u4e,revenueCardListItem:d4e,tableContainer:h4e,table:f4e,textRight:p4e,textGreen:m4e,textRed:g4e,loadingContainer:y4e,errorAlert:x4e,backButton:v4e,chartsGrid:b4e,chartCard:j4e,chartWrapper:w4e},MB=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],UA=({active:t,payload:e,label:n})=>t&&e&&e.length?r.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-800",children:n}),e.map((a,i)=>r.jsxs("p",{style:{color:a.color},className:"text-sm",children:[a.name,": ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a.value)]},i))]}):null,N4e=()=>{const t=Mt(),e=Lr(),n=new URLSearchParams(e.search),a=n.get("startDate"),i=n.get("endDate"),s=new Date().toISOString().split("T")[0],[o,l]=v.useState(a||s),[c,d]=v.useState(i||s),[f,p]=v.useState(!1),[g,x]=v.useState(null),{setAnalysisDateRange:b,analysisDateRange:j,setAnalysisData:S,registerAnalysisNavigator:_,registerAnalysisRefresher:T}=IN(),[C,P]=v.useState(0),[k,O]=v.useState(0),[I,F]=v.useState(0),[B,$]=v.useState(null),[L,V]=v.useState(null),[H,te]=v.useState(null),[X,q]=v.useState({reception:{},pharmacy:{},lab:{},dental:{}}),[Y,se]=v.useState(0),[G,z]=v.useState(null),[ce,we]=v.useState([]),[K,Ie]=v.useState(null),We=v.useCallback(async(ae,je)=>{p(!0),x(null);const ue=ae||o,me=je||c;if(P(0),O(0),F(0),$(null),V(null),te(null),q({reception:{},pharmacy:{},lab:{},dental:{}}),Ie(null),Ie(null),se(0),z(null),we([]),!ue||!me){x("Please select both start and end dates."),p(!1);return}try{const oe=Cde(),[Q,ie,xe,ee,Se,qe]=await Promise.all([le(`/api/bills?startDate=${o}&endDate=${c}&limit=10000`),le(`/api/payment/admission?startDate=${o}&endDate=${c}`),le(`/api/subscriptions/transactions/manual?startDate=${o}&endDate=${c}`),le(`/api/patient-debts/collections/analysis?startDate=${o}&endDate=${c}`),oe?le(`/api/inventory/comprehensive-analysis?startDate=${o}&endDate=${c}&clinicId=${oe}`):Promise.resolve(null),le(`/api/distributors/payments/analysis?startDate=${o}&endDate=${c}`)]);if(Q.ok&&ie.ok&&xe.ok){const Ge=await Q.json(),Ne=await ie.json(),ne=await xe.json(),de=Ge.bills||[],Te=Ne.admissionPayments||[],Ee=ne||[];let W={totalRevenue:0,totalCashCollected:0,revenueByType:{consultation:0,pharmacy:0,lab:0,dental:0,other:0},cashByMode:{},revenueByMode:{},detailedRevenue:{reception:{},pharmacy:{},lab:{},dental:{}},dailyRevenue:new Map,pharmacyReturns:0};const ye=(_e,ze)=>{const Oe=_e.split("T")[0];W.dailyRevenue.set(Oe,(W.dailyRevenue.get(Oe)||0)+ze)},he=(_e,ze,Oe,He,nt=!0)=>{const mt=ze.toLowerCase()==="credit";nt&&(W.totalRevenue+=_e,W.revenueByType.hasOwnProperty(Oe)?W.revenueByType[Oe]+=_e:W.revenueByType.other=(W.revenueByType.other||0)+_e,ye(He,_e),W.revenueByMode[ze]=(W.revenueByMode[ze]||0)+_e),mt||(W.totalCashCollected+=_e,W.cashByMode[ze]=(W.cashByMode[ze]||0)+_e),nt&&(Oe==="pharmacy"?W.detailedRevenue.pharmacy[ze]=(W.detailedRevenue.pharmacy[ze]||0)+_e:Oe==="lab"?W.detailedRevenue.lab[ze]=(W.detailedRevenue.lab[ze]||0)+_e:Oe==="dental"?W.detailedRevenue.dental[ze]=(W.detailedRevenue.dental[ze]||0)+_e:Oe!=="debt"&&(W.detailedRevenue.reception[ze]=(W.detailedRevenue.reception[ze]||0)+_e)),Oe==="debt"&&(W.detailedRevenue.debt=W.detailedRevenue.debt||{},W.detailedRevenue.debt[ze]=(W.detailedRevenue.debt[ze]||0)+_e)};if(de.forEach(_e=>{if(_e.status==="paid"||_e.type==="pharmacy_return"){let ze=parseFloat(_e.amount.toString()),Oe=_e.type||"other";if(Oe==="pharmacy_return"&&(W.pharmacyReturns+=ze,Oe="pharmacy"),_e.split_payments&&Array.isArray(_e.split_payments)&&_e.split_payments.length>0)_e.split_payments.forEach(He=>{const nt=parseFloat(He.amount.toString()),mt=He.method||"Unknown",De=mt.toLowerCase()==="credit";W.totalRevenue+=nt,W.revenueByType.hasOwnProperty(Oe)?W.revenueByType[Oe]+=nt:W.revenueByType.other=(W.revenueByType.other||0)+nt,ye(_e.createdAt,nt),W.revenueByMode[mt]=(W.revenueByMode[mt]||0)+nt,De||(W.totalCashCollected+=nt,W.cashByMode[mt]=(W.cashByMode[mt]||0)+nt),Oe==="pharmacy"?W.detailedRevenue.pharmacy[mt]=(W.detailedRevenue.pharmacy[mt]||0)+nt:Oe==="lab"?W.detailedRevenue.lab[mt]=(W.detailedRevenue.lab[mt]||0)+nt:Oe==="dental"?W.detailedRevenue.dental[mt]=(W.detailedRevenue.dental[mt]||0)+nt:W.detailedRevenue.reception[mt]=(W.detailedRevenue.reception[mt]||0)+nt});else{const He=_e.payment_mode||"Unknown";he(ze,He,Oe,_e.createdAt,!0)}}}),Te.forEach(_e=>{he(parseFloat(_e.amount_paid.toString()),_e.payment_mode||"Unknown","consultation",_e.payment_date,!0)}),Ee.forEach(_e=>{var He,nt;const ze=parseFloat(((nt=(He=_e.subscriptionPlan)==null?void 0:He.price)==null?void 0:nt.toString())??"0"),Oe=_e.subscription_payment_method||"manual";he(ze,Oe,"consultation",_e.subscription_start_date,!0)}),ee.ok){const ze=(await ee.json()).paymentModeBreakdown||{};Object.entries(ze).forEach(([Oe,He])=>{const nt=Number(He);he(nt,Oe,"debt","",!1)})}if(O(W.totalCashCollected),P(W.totalRevenue),F(W.pharmacyReturns),$(W.cashByMode),V(W.revenueByMode),te(W.revenueByType),q(W.detailedRevenue),qe&&qe.ok){const _e=await qe.json();se(_e.totalPaid||0),z(_e.paymentModeBreakdown||{})}const ge=Array.from(W.dailyRevenue.entries()).sort((_e,ze)=>new Date(_e[0]).getTime()-new Date(ze[0]).getTime()).map(([_e,ze])=>({date:_e,amount:ze}));we(ge)}if(Se&&Se.ok){const Ge=await Se.json();Ie(Ge)}}catch(oe){console.error("Analysis Fetch Error:",oe),x("Failed to fetch analysis data. Please try again.")}finally{p(!1)}},[o,c]);v.useEffect(()=>{_(ae=>{const je=`analysis-${ae}`,ue=document.getElementById(je);ue&&(ue.scrollIntoView({behavior:"smooth",block:"center"}),ue.classList.add("ai-highlight-glow"),setTimeout(()=>ue.classList.remove("ai-highlight-glow"),2e3))})},[_]),v.useEffect(()=>{T(async()=>(await We(),null))},[T,We]),v.useEffect(()=>{if(j.startDate&&j.endDate){const ae=j.startDate.toISOString().split("T")[0],je=j.endDate.toISOString().split("T")[0];(ae!==o||je!==c)&&(l(ae),d(je))}},[j]),v.useEffect(()=>{const ae=new URLSearchParams(e.search),je=ae.get("section"),ue=ae.get("startDate"),me=ae.get("endDate");if(ue&&me){l(ue),d(me);const oe=j.startDate?j.startDate.toISOString().split("T")[0]:null,Q=j.endDate?j.endDate.toISOString().split("T")[0]:null;(oe!==ue||Q!==me)&&b({startDate:new Date(ue),endDate:new Date(me)})}if(je){const oe=`analysis-${je}`;setTimeout(()=>{const Q=document.getElementById(oe);Q&&(Q.scrollIntoView({behavior:"smooth",block:"center"}),Q.classList.add("ai-highlight-glow"),setTimeout(()=>Q.classList.remove("ai-highlight-glow"),2e3))},500)}},[e.search]),v.useEffect(()=>{We()},[o,c,We]),v.useEffect(()=>{!f&&(k>0||K)&&S({totalRevenue:C,totalCashFlow:k,totalExpenses:Y,netCashFlow:k-Y,collectionsBreakdown:B,revenueBreakdown:L,inventoryValue:0,pharmacyRevenue:(H==null?void 0:H.pharmacy)||0,labRevenue:(H==null?void 0:H.lab)||0,dentalRevenue:(H==null?void 0:H.dental)||0,receptionRevenue:((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0),inventorySummary:K?{totalItemsAnalyzed:K.pharmacyAnalysis.length,netPositiveItems:K.pharmacyAnalysis.filter(ae=>ae.net_change>0).length}:null})},[C,k,Y,B,L,K,H,f,S]);const Re=ae=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(ae),Fe=v.useMemo(()=>L?Object.entries(L).map(([ae,je])=>({name:ae,value:je})):[],[L]),ve=v.useMemo(()=>H?[{name:"Consultation",value:H.consultation},{name:"Pharmacy",value:H.pharmacy},{name:"Lab",value:H.lab},{name:"Dental",value:H.dental},{name:"Debt Collections",value:H.debt||0},{name:"Other",value:H.other||0}].filter(ae=>ae.value>0):[],[H]);return r.jsxs("div",{className:yt.container,children:[r.jsxs("div",{className:yt.header,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:yt.backButton,title:"Go Back",children:[r.jsx(rn,{size:20})," Back"]}),r.jsx("h1",{className:yt.title,children:"Analysis Dashboard"})]}),r.jsxs("div",{className:yt.controls,children:[r.jsxs("div",{className:yt.dateInputGroup,children:[r.jsx("label",{className:yt.dateInputLabel,children:"From:"}),r.jsx("input",{type:"date",className:yt.dateInput,value:o,onChange:ae=>{l(ae.target.value),c&&b({startDate:new Date(ae.target.value),endDate:new Date(c)})}})]}),r.jsxs("div",{className:yt.dateInputGroup,children:[r.jsx("label",{className:yt.dateInputLabel,children:"To:"}),r.jsx("input",{type:"date",className:yt.dateInput,value:c,onChange:ae=>{d(ae.target.value),o&&b({startDate:new Date(o),endDate:new Date(ae.target.value)})}})]})]})]}),g&&r.jsxs("div",{className:yt.errorAlert,children:[r.jsx(Xr,{size:20}),r.jsx("span",{children:g})]}),!f&&r.jsxs("div",{children:[r.jsxs("section",{className:yt.section,id:"analysis-expenses",children:[r.jsxs("div",{className:yt.sectionTitle,children:[r.jsx(fw,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Cash Flow Analysis"})]}),r.jsxs("div",{className:yt.statsGrid,children:[r.jsxs("div",{className:yt.statCard,children:[r.jsx("div",{className:yt.statTitle,children:"Total Cash Inflow"}),r.jsx("div",{className:yt.statValue,style:{color:"var(--accent-success)"},children:Re(k)}),r.jsx("div",{className:yt.statSubtitle,children:"Collections (Cash, UPI, etc.)"})]}),r.jsxs("div",{className:yt.statCard,children:[r.jsx("div",{className:yt.statTitle,children:"Total Expenses"}),r.jsx("div",{className:yt.statValue,style:{color:"var(--accent-danger)"},children:Re(Y)}),r.jsx("div",{className:yt.statSubtitle,children:"Distributor Payments"})]}),r.jsxs("div",{className:yt.statCard,children:[r.jsx("div",{className:yt.statTitle,children:"Net Cash Flow"}),r.jsx("div",{className:yt.statValue,style:{color:k-Y>=0?"var(--accent-success)":"var(--accent-danger)"},children:Re(k-Y)}),r.jsx("div",{className:yt.statSubtitle,children:"Inflow - Outflow"})]})]}),r.jsxs("div",{className:yt.revenueGrid,style:{marginTop:"1rem"},children:[B&&Object.keys(B).length>0&&r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Collections Breakdown"}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(B).map(([ae,je])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:ae}),r.jsx("span",{children:Re(je)})]},ae))})]}),G&&Object.keys(G).length>0&&r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Expense Breakdown"}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(G).map(([ae,je])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:ae}),r.jsx("span",{children:Re(je)})]},ae))})]})]})]}),r.jsxs("section",{className:yt.section,id:"analysis-financial",children:[r.jsxs("div",{className:yt.sectionTitle,children:[r.jsx(mf,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Financial Performance"})]}),r.jsx("div",{className:yt.statsGrid,children:r.jsxs("div",{className:yt.statCard,children:[r.jsx("div",{className:yt.statTitle,children:"Total Revenue Generated"}),r.jsx("div",{className:yt.statValue,style:{color:"var(--accent-primary)"},children:Re(C)}),r.jsx("div",{className:yt.statSubtitle,children:"Billings & Services (Accrual)"})]})}),r.jsxs("div",{className:yt.chartsGrid,children:[r.jsxs("div",{className:yt.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{children:"Revenue Trend (Daily)"}),r.jsx("div",{className:yt.chartWrapper,children:r.jsx(aw,{width:"100%",height:300,children:r.jsxs(DPe,{data:ce,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"var(--accent-primary)",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"var(--accent-primary)",stopOpacity:.05})]})}),r.jsx(pb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx($c,{dataKey:"date",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Bc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:ae=>`${ae/1e3}k`}),r.jsx(Ei,{content:r.jsx(UA,{})}),r.jsx(Nd,{type:"monotone",dataKey:"amount",stroke:"var(--accent-primary)",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),r.jsxs("div",{className:yt.chartCard,children:[r.jsx("h3",{children:"Payment Method Distribution"}),r.jsx("div",{className:yt.chartWrapper,children:r.jsx(aw,{width:"100%",height:300,children:r.jsxs(BH,{children:[r.jsx(Fl,{data:Fe,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:Fe.map((ae,je)=>r.jsx(Fb,{fill:MB[je%MB.length]},`cell-${je}`))}),r.jsx(Ei,{content:r.jsx(UA,{})}),r.jsx(kc,{verticalAlign:"bottom",height:36,formatter:ae=>r.jsx("span",{style:{color:"var(--text-primary)"},children:ae})})]})})})]}),r.jsxs("div",{className:yt.chartCard,children:[r.jsx("h3",{children:"Revenue by Source"}),r.jsx("div",{className:yt.chartWrapper,children:r.jsx(aw,{width:"100%",height:300,children:r.jsxs($H,{data:ve,children:[r.jsx(pb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx($c,{dataKey:"name",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Bc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:ae=>`${ae/1e3}k`}),r.jsx(Ei,{content:r.jsx(UA,{}),cursor:{fill:"var(--bg-primary)"}}),r.jsx(wd,{dataKey:"value",fill:"var(--accent-success)",radius:[4,4,0,0]})]})})})]})]}),X&&r.jsxs("div",{className:yt.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(mE,{style:{color:"var(--text-secondary)"},size:20}),r.jsx("h3",{children:"Detailed Breakdown"})]}),X&&r.jsxs("div",{className:yt.revenueGrid,children:[r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:yt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Re(((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0))}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(X.reception).map(([ae,je])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:ae}),r.jsx("span",{children:Re(je)})]},ae))})]}),r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:yt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Re((H==null?void 0:H.pharmacy)||0)}),I<0&&r.jsxs("div",{className:`${yt.textRed} text-sm mb-2`,children:["Returns: ",Re(I)]}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(X.pharmacy).map(([ae,je])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:ae}),r.jsx("span",{children:Re(je)})]},ae))})]}),r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:yt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Re((H==null?void 0:H.lab)||0)}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(X.lab).map(([ae,je])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:ae}),r.jsx("span",{children:Re(je)})]},ae))})]}),r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:yt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Re((H==null?void 0:H.dental)||0)}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(X.dental).map(([ae,je])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:ae}),r.jsx("span",{children:Re(je)})]},ae))})]})]})]}),r.jsxs("section",{className:yt.section,id:"analysis-inventory",children:[r.jsxs("div",{className:yt.sectionTitle,children:[r.jsx(yf,{style:{color:"var(--accent-success)"},size:24}),r.jsx("h2",{children:"Inventory Movement"})]}),K&&K.pharmacyAnalysis.length>0?r.jsx("div",{className:yt.tableContainer,children:r.jsxs("table",{className:yt.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Stock In"}),r.jsx("th",{children:"Stock Out"}),r.jsx("th",{children:"Net Change"}),r.jsx("th",{className:yt.textRight,children:"Est. Revenue"}),r.jsx("th",{className:yt.textRight,children:"Est. Profit"})]})}),r.jsx("tbody",{children:K.pharmacyAnalysis.map(ae=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600},children:ae.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:ae.supplier})]}),r.jsxs("td",{className:yt.textGreen,children:["+",ae.quantity_in,Object.entries(ae.quantity_in_by_reason).map(([je,ue])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[je,": ",ue]},je))]}),r.jsxs("td",{className:yt.textRed,children:["-",ae.quantity_out,Object.entries(ae.quantity_out_by_reason).map(([je,ue])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[je,": ",ue]},je))]}),r.jsx("td",{children:r.jsxs("span",{style:{fontWeight:600},className:ae.net_change>=0?yt.textGreen:yt.textRed,children:[ae.net_change>0?"+":"",ae.net_change]})}),r.jsx("td",{className:yt.textRight,children:Re(ae.revenue)}),r.jsx("td",{className:`${yt.textRight} ${ae.profit>=0?yt.textGreen:yt.textRed}`,children:Re(ae.profit)})]},ae.drug_id))})]})}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No inventory movement recorded for this period."})]})]}),f&&r.jsxs("div",{className:yt.loadingContainer,style:{display:"block"},children:[r.jsxs("div",{className:yt.sectionTitle,children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:24})]}),r.jsxs("div",{className:yt.statsGrid,children:[r.jsxs("div",{className:yt.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]}),r.jsxs("div",{className:yt.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]}),r.jsxs("div",{className:yt.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsxs("div",{className:yt.chartsGrid,children:[r.jsxs("div",{className:yt.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:250})]}),r.jsxs("div",{className:yt.chartCard,children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:200,variant:"circular",style:{margin:"0 auto"}})]}),r.jsxs("div",{className:yt.chartCard,children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:250})]})]})})]})]})},IB=()=>{const t=Mt(),e=ss(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(""),[f,p]=v.useState("debtHighToLow"),[g,x]=v.useState(!0),[b,j]=v.useState(""),[S,_]=v.useState(!1),[T,C]=v.useState(!1),[P,k]=v.useState(null),[O,I]=v.useState([]),[F,B]=v.useState(null),[$,L]=v.useState(""),[V,H]=v.useState(""),[te,X]=v.useState(""),[q,Y]=v.useState("cash"),[se,G]=v.useState(0),z=v.useMemo(()=>{let ae=[...n];g&&(ae=ae.filter(ue=>parseFloat(ue.netDebt)>0));const je=parseFloat(b);switch(!isNaN(je)&&je>0&&(ae=ae.filter(ue=>parseFloat(ue.netDebt)>=je)),f){case"name":ae.sort((ue,me)=>ue.name.localeCompare(me.name));break;case"debtHighToLow":ae.sort((ue,me)=>parseFloat(me.netDebt)-parseFloat(ue.netDebt));break;case"debtLowToHigh":ae.sort((ue,me)=>parseFloat(ue.netDebt)-parseFloat(me.netDebt));break}return ae},[n,g,b,f]),ce=v.useCallback(async()=>{s(!0),l(null);try{const ae=c?`/api/patient-debts?search=${encodeURIComponent(c)}`:"/api/patient-debts",je=await le(ae);if(!je.ok)throw new Error(`Failed to fetch patients with debt: ${je.statusText}`);const ue=await je.json();a(ue);const me=ue.reduce((oe,Q)=>oe+parseFloat(Q.netDebt||"0"),0);G(me)}catch(ae){console.error("Failed to fetch patients with debt:",ae),l(ae.message||"Failed to load patients with debt.")}finally{s(!1)}},[c]);v.useEffect(()=>{ce()},[ce]);const we=v.useCallback(async ae=>{l(null);try{const je=await le(`/api/patient-debts/${ae}/transactions`);if(!je.ok)throw new Error(`Failed to fetch transactions: ${je.statusText}`);const me=(await je.json()).map(ie=>({...ie,debt_value:parseFloat(ie.debt_value),amount_paid:parseFloat(ie.amount_paid),balance_remaining:parseFloat(ie.balance_remaining)}));I(me);const oe=await le(`/api/patient-debts/${ae}/balance`);if(!oe.ok)throw new Error(`Failed to fetch balance: ${oe.statusText}`);const Q=await oe.json();B({patientId:Q.patientId,patientName:Q.patientName,totalDebtValue:parseFloat(Q.totalDebtValue),totalAmountPaid:parseFloat(Q.totalAmountPaid),netDebt:parseFloat(Q.netDebt)})}catch(je){console.error("Error fetching transactions/balance:",je),l(je.message||"Failed to load transactions or balance.")}},[]),K=ae=>{ae&&(e.prefetchQuery({queryKey:Ut.patients.context(ae),queryFn:async()=>{const je=await le(`/api/patients/${ae}/context`);if(!je.ok)throw new Error("Failed to fetch patient context");return je.json()},staleTime:1e3*60*5}),e.prefetchQuery({queryKey:Ut.patientDebts.balance(ae),queryFn:async()=>{const je=await le(`/api/patient-debts/${ae}/balance`);if(!je.ok)throw new Error("Failed to fetch patient debt");return je.json()},staleTime:1e3*60}),e.prefetchQuery({queryKey:Ut.queue.latest(ae),queryFn:async()=>{const je=await le(`/api/queue/patient/${ae}/latest`);if(!je.ok){if(je.status===404)return null;throw new Error("Failed to fetch queue status")}return je.json()},staleTime:1e3*5}))},Ie=async ae=>{if(ae.preventDefault(),l(null),!P)return;const je=parseFloat(V||"0");if(je<=0){l("Payment amount must be greater than 0");return}try{const ue=await le(`/api/patient-debts/${P.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:$,amount_paid:je,notes:te,payment_mode:q})});if(!ue.ok){const me=await ue.json();throw new Error(me.message||"Failed to add payment.")}ve(),we(P.id),ce()}catch(ue){console.error("Error adding payment:",ue),l(ue.message||"Failed to add payment.")}},We=ae=>{k(ae),we(ae.id),l(null),_(!0)},Re=()=>{_(!1),k(null),I([]),B(null)},Fe=ae=>{k(ae),L(new Date().toISOString().split("T")[0]),H(""),X(""),Y("cash"),l(null),C(!0)},ve=()=>{C(!1),k(null)};return i?r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{width:80,height:36}),r.jsx(Z,{width:200,height:32})]}),r.jsx(Z,{width:250,height:36})]}),r.jsxs("div",{className:"filter-container",children:[r.jsx(Z,{width:200,height:40}),r.jsx(Z,{width:120,height:40}),r.jsx(Z,{width:100,height:40}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Total Debt Value"}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6].map(ae=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:32})})]},ae))})]})})]}):r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(rn,{size:20})}),r.jsx("h2",{children:"Patient Debt Management"})]}),r.jsxs("div",{className:`total-debt-display ${se>0?"debt-positive":"debt-zero"}`,children:[r.jsx(mf,{size:20}),r.jsx("strong",{children:"Total Outstanding Debt:"})," ",se.toFixed(2)]})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("div",{className:"filter-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:c,onChange:ae=>d(ae.target.value),className:"filter-search-input"}),r.jsxs("select",{id:"sortBy",value:f,onChange:ae=>p(ae.target.value),className:"filter-select",title:"Sort by",children:[r.jsx("option",{value:"debtHighToLow",children:"Debt "}),r.jsx("option",{value:"debtLowToHigh",children:"Debt "}),r.jsx("option",{value:"name",children:"Name A-Z"})]}),r.jsx("input",{type:"number",id:"minDebt",value:b,onChange:ae=>j(ae.target.value),placeholder:"Min ",min:"0",className:"filter-number-input",title:"Minimum debt amount"}),r.jsxs("label",{className:"filter-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:ae=>x(ae.target.checked)}),"Outstanding only"]}),r.jsxs("span",{className:"filter-count",children:[z.length,"/",n.length]})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsxs("th",{children:[r.jsx(Kn,{size:14})," Patient Name"]}),r.jsxs("th",{children:[r.jsx(Zm,{size:14})," Phone"]}),r.jsxs("th",{children:[r.jsx(BO,{size:14})," Total Debt Value"]}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{className:"actions-cell",children:"Actions"})]})}),r.jsx("tbody",{children:z.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"no-results-message",children:c?"No patients found matching your search.":"No patients with outstanding debt."})}):z.map(ae=>r.jsxs("tr",{onClick:()=>t(`/dashboard/edit-complaint/patient/${ae.id}`),onMouseEnter:()=>K(ae.id),style:{cursor:"pointer"},title:"Click to view patient details",children:[r.jsx("td",{"data-label":"Patient Name",children:r.jsxs("div",{className:"patient-name-cell",children:[r.jsx("strong",{children:ae.name}),ae.age&&ae.gender&&r.jsxs("span",{className:"patient-meta",children:[ae.age,"y / ",ae.gender]})]})}),r.jsx("td",{"data-label":"Phone",children:ae.phone||"-"}),r.jsxs("td",{"data-label":"Total Debt Value",children:["",ae.totalDebtValue]}),r.jsxs("td",{"data-label":"Total Paid",className:"amount-paid",children:["",ae.totalAmountPaid]}),r.jsxs("td",{"data-label":"Net Debt",className:parseFloat(ae.netDebt)>0?"debt-outstanding":"debt-clear",children:["",ae.netDebt]}),r.jsx("td",{className:"actions-cell",onClick:je=>je.stopPropagation(),children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsxs("button",{onClick:()=>We(ae),className:"action-text-button view-button",title:"View Transactions",children:[r.jsx(Mm,{size:16})," View History"]}),r.jsxs("button",{onClick:()=>Fe(ae),className:"action-text-button add-payment-button",title:"Record Payment",children:[r.jsx(Cs,{size:16})," Record Payment"]})]})})]},ae.id))})]})}),S&&P&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsx("button",{onClick:Re,className:"modal-close-button",children:""}),r.jsxs("h3",{className:"modal-title",children:["Debt History for ",P.name]}),o&&r.jsx("div",{className:"modal-error-message",children:o}),F&&r.jsxs("div",{className:"balance-summary",children:[r.jsxs("div",{className:"balance-row",children:[r.jsx("span",{children:"Total Debt Value:"}),r.jsxs("strong",{children:["",F.totalDebtValue.toFixed(2)]})]}),r.jsxs("div",{className:"balance-row",children:[r.jsx("span",{children:"Total Amount Paid:"}),r.jsxs("strong",{className:"amount-paid",children:["",F.totalAmountPaid.toFixed(2)]})]}),r.jsxs("div",{className:"balance-row net-debt-row",children:[r.jsx("span",{children:r.jsx("strong",{children:"Net Outstanding Debt:"})}),r.jsxs("strong",{className:F.netDebt>0?"debt-outstanding":"debt-clear",children:["",F.netDebt.toFixed(2)]})]})]}),r.jsx("h4",{children:"Transaction History"}),O.length===0?r.jsx("p",{children:"No transactions recorded for this patient."}):r.jsx("div",{className:"table-responsive",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Debt Added"}),r.jsx("th",{children:"Payment Received"}),r.jsx("th",{children:"Balance After"}),r.jsx("th",{children:"Due Date"}),r.jsx("th",{children:"Payment Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:O.map(ae=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(ae.transaction_date).toLocaleDateString()}),r.jsx("td",{"data-label":"Debt Added",className:ae.debt_value>0?"debt-added":"",children:ae.debt_value>0?`+ ${ae.debt_value.toFixed(2)}`:"-"}),r.jsx("td",{"data-label":"Payment Received",className:ae.amount_paid>0?"payment-received":"",children:ae.amount_paid>0?`- ${ae.amount_paid.toFixed(2)}`:"-"}),r.jsxs("td",{"data-label":"Balance After",children:["",ae.balance_remaining.toFixed(2)]}),r.jsx("td",{"data-label":"Due Date",children:ae.due_date?new Date(ae.due_date).toLocaleDateString():"-"}),r.jsx("td",{"data-label":"Payment Mode",children:ae.payment_mode?ae.payment_mode.charAt(0).toUpperCase()+ae.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",children:ae.notes||"-"})]},ae.id))})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>{Re(),Fe(P)},className:"button-submit",children:"Record Payment"}),r.jsx("button",{type:"button",onClick:Re,className:"button-cancel",children:"Close"})]})]})}),T&&P&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ve,className:"modal-close-button",children:""}),r.jsxs("h3",{className:"modal-title",children:["Record Payment for ",P.name]}),r.jsxs("div",{className:"current-debt-info",children:[r.jsx("span",{children:"Current Outstanding Debt:"}),r.jsxs("strong",{className:"debt-outstanding",children:["",P.netDebt]})]}),o&&r.jsx("div",{className:"modal-error-message",children:o}),r.jsxs("form",{onSubmit:Ie,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_date",children:"Payment Date:"}),r.jsx("input",{type:"date",id:"payment_date",value:$,onChange:ae=>L(ae.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid ():"}),r.jsx("input",{type:"number",id:"amount_paid",value:V,onChange:ae=>H(ae.target.value),step:"0.01",min:"0.01",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_mode",children:"Payment Mode:"}),r.jsxs("select",{id:"payment_mode",value:q,onChange:ae=>Y(ae.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",value:te,onChange:ae=>X(ae.target.value),placeholder:"e.g., Partial payment via cash"})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ve,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Record Payment"})]})]})]})})]})},S4e=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState({name:"",description:"",columns:[]}),g=async()=>{i(!0);try{const C=await le("/api/custom-tables");if(!C.ok)throw new Error("Failed to fetch tables");const P=await C.json();n(P)}catch(C){s(C.message)}finally{i(!1)}};v.useEffect(()=>{g()},[]);const x=C=>{C?(d(C),p({name:C.name,description:C.description,columns:[...C.columns]})):(d(null),p({name:"",description:"",columns:[]})),l(!0)},b=async()=>{try{const C=c?`/api/custom-tables/${c.id}`:"/api/custom-tables";if(!(await le(C,{method:c?"PUT":"POST",body:JSON.stringify(f)})).ok)throw new Error("Failed to save table");l(!1),g()}catch(C){alert(C.message)}},j=async C=>{if(confirm("Are you sure? This will delete all data in this table!"))try{await le(`/api/custom-tables/${C}`,{method:"DELETE"}),g()}catch(P){alert(P.message)}},S=()=>{p(C=>({...C,columns:[...C.columns,{key:`col_${Date.now()}`,label:"New Column",type:"text"}]}))},_=(C,P,k)=>{const O=[...f.columns];O[C]={...O[C],[P]:k},P==="label"&&(O[C].key=k.toLowerCase().replace(/[^a-z0-9]/g,"_")),p(I=>({...I,columns:O}))},T=C=>{p(P=>({...P,columns:P.columns.filter((k,O)=>O!==C)}))};return r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("h1",{children:[r.jsx(Ab,{size:24})," Custom Tables Manager"]}),r.jsxs("button",{className:"primary-button",onClick:()=>x(),children:[r.jsx(qn,{size:16})," Create New Table"]})]}),a?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"tables-grid",children:e.map(C=>r.jsxs("div",{className:"table-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:C.name}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>x(C),children:r.jsx(Ii,{size:16})}),r.jsx("button",{onClick:()=>j(C.id),className:"danger",children:r.jsx(Bn,{size:16})})]})]}),r.jsx("p",{className:"description",children:C.description||"No description"}),r.jsxs("div",{className:"column-preview",children:[C.columns.length," columns defined"]}),r.jsx("button",{className:"secondary-button",onClick:()=>t(`/custom-tables/${C.id}`),children:"View Data & Records"})]},C.id))}),o&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:c?"Edit Table":"Create New Table"}),r.jsx("button",{onClick:()=>l(!1),children:r.jsx(Lt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Table Name"}),r.jsx("input",{value:f.name,onChange:C=>p({...f,name:C.target.value}),placeholder:"e.g., Equipment Log"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value})})]}),r.jsxs("div",{className:"columns-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h3",{children:"Columns"}),r.jsx("button",{onClick:S,className:"icon-button",children:r.jsx(qn,{size:16})})]}),f.columns.map((C,P)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{value:C.label,onChange:k=>_(P,"label",k.target.value),placeholder:"Column Name"}),r.jsxs("select",{value:C.type,onChange:k=>_(P,"type",k.target.value),children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>T(P),className:"danger",children:r.jsx(Bn,{size:14})})]},P))]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:b,className:"primary-button",children:"Save Table"})})]})})]})},_4e=()=>{const{id:t}=Ma(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState(!1),[b,j]=v.useState(null),[S,_]=v.useState({});v.useEffect(()=>{t&&T()},[t]);const T=async()=>{l(!0);try{const I=await le(`/api/custom-tables/${t}`);if(!I.ok)throw new Error("Failed to fetch table definition");const F=await I.json();a(F);const B=await le(`/api/custom-tables/${t}/records`);if(!B.ok)throw new Error("Failed to fetch records");const $=await B.json();s($)}catch(I){d(I.message)}finally{l(!1)}},C=I=>{I?(j(I),_({...I.data})):(j(null),_({})),x(!0)},P=async()=>{try{const I=b?`/api/custom-tables/records/${b.id}`:`/api/custom-tables/${t}/records`;if(!(await le(I,{method:b?"PUT":"POST",body:JSON.stringify({data:S})})).ok)throw new Error("Failed to save record");x(!1),T()}catch(I){alert(I.message)}},k=async I=>{if(confirm("Delete this record?"))try{await le(`/api/custom-tables/records/${I}`,{method:"DELETE"}),T()}catch(F){alert(F.message)}},O=I=>{const F=S[I.key]||"";switch(I.type){case"boolean":return r.jsxs("select",{value:F,onChange:B=>_({...S,[I.key]:B.target.value}),children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"true",children:"Yes"}),r.jsx("option",{value:"false",children:"No"})]});case"number":return r.jsx("input",{type:"number",value:F,onChange:B=>_({...S,[I.key]:B.target.value})});case"date":return r.jsx("input",{type:"date",value:F,onChange:B=>_({...S,[I.key]:B.target.value})});default:return r.jsx("input",{type:"text",value:F,onChange:B=>_({...S,[I.key]:B.target.value})})}};return o?r.jsx("div",{className:"p-4",children:"Loading..."}):c||!n?r.jsxs("div",{className:"p-4 error",children:["Error: ",c||"Table not found"]}):r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[r.jsx("button",{onClick:()=>e("/custom-tables"),className:"icon-button",children:r.jsx(rn,{size:20})}),r.jsx("h1",{children:n.name})]}),r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>p(!1),className:`view-mode-btn ${f?"":"active"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>p(!0),className:`view-mode-btn ${f?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(gf,{size:18})," Excel"]})]}),r.jsxs("button",{className:"primary-button",onClick:()=>C(),children:[r.jsx(qn,{size:16})," Add Record"]})]}),r.jsx("div",{className:"table-wrapper",style:{background:"var(--bg-card)",borderRadius:"12px",padding:"20px",overflowX:"auto"},children:f?r.jsx(Ib,{columns:n.columns.map(I=>({key:I.key,label:I.label,editable:!0,type:I.type})),data:i.map(I=>({...I.data,id:I.id})),editable:!0,showRowNumbers:!0,title:n.name,onSave:async I=>{const F=I.map(async B=>{const $=i.find(L=>L.id===B.id);if($&&JSON.stringify($.data)!==JSON.stringify(B)){const{id:L,...V}=B;if(JSON.stringify($.data)!==JSON.stringify(V))return le(`/api/custom-tables/records/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:V})})}});try{await Promise.all(F),T()}catch(B){alert("Error saving changes"),console.error(B)}}}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[n.columns.map(I=>r.jsx("th",{style:{textAlign:"left",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:I.label},I.key)),r.jsx("th",{style:{width:"100px",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:n.columns.length+1,style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"No records yet"})}):i.map(I=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.columns.map(F=>r.jsx("td",{style:{padding:"12px"},children:F.type==="boolean"?I.data[F.key]==="true"?"Yes":"No":String(I.data[F.key]||"-")},F.key)),r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>C(I),className:"icon-button",children:r.jsx(Ii,{size:16})}),r.jsx("button",{onClick:()=>k(I.id),className:"icon-button",style:{color:"#dc3545"},children:r.jsx(Bn,{size:16})})]})})]},I.id))})]})}),g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:b?"Edit Record":"Add New Record"}),r.jsx("button",{onClick:()=>x(!1),children:r.jsx(Lt,{size:20})})]}),r.jsx("div",{className:"modal-body",children:n.columns.map(I=>r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:I.label}),O(I)]},I.key))}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:P,className:"primary-button",children:"Save Record"})})]})})]})},C4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(""),o=Mt();v.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await le("/api/dashboards");if(p.ok){const g=await p.json();e(g)}}catch(p){console.error("Error fetching dashboards:",p)}finally{a(!1)}},c=async(p,g)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await le(`/api/dashboards/${g}`,{method:"DELETE"}),e(t.filter(x=>x.id!==g))}catch(x){console.error("Error deleting dashboard:",x)}},d=p=>{try{const g=new Date(p);return g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:g.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},f=t.filter(p=>p.name.toLowerCase().includes(i.toLowerCase())||p.description&&p.description.toLowerCase().includes(i.toLowerCase()));return r.jsxs("div",{className:"custom-dashboards-container",children:[r.jsxs("div",{className:"cdp-header",children:[r.jsxs("div",{className:"cdp-title-row",children:[r.jsxs("div",{className:"cdp-title",children:[r.jsx("div",{className:"cdp-icon",children:r.jsx(gf,{size:20})}),r.jsxs("div",{children:[r.jsx("h1",{children:"Custom Dashboards"}),r.jsxs("span",{className:"cdp-subtitle",children:[t.length," dashboard",t.length!==1?"s":""]})]})]}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(qn,{size:16}),r.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),t.length>0&&r.jsxs("div",{className:"cdp-search",children:[r.jsx(Mn,{size:16}),r.jsx("input",{type:"text",placeholder:"Search dashboards...",value:i,onChange:p=>s(p.target.value)})]})]}),r.jsx("div",{className:"cdp-content",children:n?r.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(p=>r.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx(Z,{width:18,height:18,variant:"circular"}),r.jsx(Z,{width:80,height:12})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx(Z,{width:"70%",height:24,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"90%",height:16})]}),r.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[r.jsx(Z,{width:60,height:32}),r.jsx(Z,{width:60,height:32}),r.jsx(Z,{width:32,height:32})]})]},p))}):f.length===0?r.jsxs("div",{className:"cdp-empty",children:[r.jsx("div",{className:"cdp-empty-icon",children:r.jsx(Jm,{size:48})}),i?r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No results found"}),r.jsx("p",{children:"Try a different search term"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No dashboards yet"}),r.jsx("p",{children:"Create your first custom dashboard to get started"}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(qn,{size:16})," Create Dashboard"]})]})]}):r.jsx("div",{className:"cdp-grid",children:f.map(p=>r.jsxs("div",{className:"cdp-card",onClick:()=>o(`/dashboards/${p.id}`),children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx("div",{className:"cdp-card-icon",children:r.jsx(Jm,{size:18})}),r.jsx("div",{className:"cdp-card-meta",children:p.created_at&&r.jsxs("span",{className:"cdp-card-date",children:[r.jsx(oa,{size:12}),d(p.created_at)]})})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx("h3",{children:p.name}),r.jsx("p",{children:p.description||"No description"})]}),r.jsxs("div",{className:"cdp-card-footer",children:[r.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}`)},children:[r.jsx(Mm,{size:14}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}/edit`)},children:[r.jsx(Ii,{size:14}),r.jsx("span",{children:"Edit"})]}),r.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:g=>c(g,p.id),children:r.jsx(Bn,{size:14})})]})]},p.id))})})]})},T4e=({isOpen:t,onClose:e,onConfirm:n})=>{const[a,i]=v.useState({}),[s,o]=v.useState(""),[l,c]=v.useState(""),[d,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(!1);v.useEffect(()=>{t&&j()},[t]);const j=async()=>{b(!0);try{const I=await le("/api/dashboards/table-relations");if(I.ok){const F=await I.json();i(F);const B=Object.keys(F);B.length>0&&o(B[0])}}catch(I){console.error("Error fetching table relations:",I)}finally{b(!1)}},S=I=>{o(I),c(""),f([]),g([])},_=I=>{c(I),g([])},T=(I,F,B)=>{I.includes(B)?F(I.filter($=>$!==B)):F([...I,B])},C=()=>{var I,F;if(!s||!l){alert("Please select both primary and related tables");return}if(d.length===0&&p.length===0){alert("Please select at least one column");return}n({primary:s,related:l,primaryColumns:d,relatedColumns:p,primaryLabel:((I=a[s])==null?void 0:I.label)||s,relatedLabel:((F=a[l])==null?void 0:F.label)||l}),e()};if(!t)return null;const P=a[s],k=(P==null?void 0:P.relations)||{},O=a[l];return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{children:[r.jsx(Uz,{size:18})," Join Tables Builder"]}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx(Lt,{size:20})})]}),x?r.jsx("div",{children:"Loading tables..."}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",padding:"20px"},children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 1:"})," Select Primary Table"]}),r.jsx("select",{value:s,onChange:I=>S(I.target.value),style:{width:"100%",padding:"8px"},children:Object.entries(a).filter(([I,F])=>Object.keys(F.relations).length>0).map(([I,F])=>r.jsx("option",{value:I,children:F.label},I))})]}),s&&Object.keys(k).length>0&&r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 2:"})," Select Related Table"]}),r.jsxs("select",{value:l,onChange:I=>_(I.target.value),style:{width:"100%",padding:"8px"},children:[r.jsx("option",{value:"",children:"-- Select --"}),Object.entries(k).map(([I,F])=>r.jsxs("option",{value:I,children:[F.label," (via ",F.foreignKey,")"]},I))]})]}),s&&P&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",P.label,":"]})}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:P.columns.map(I=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:d.includes(I)?"#e0f0ff":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[r.jsx("input",{type:"checkbox",checked:d.includes(I),onChange:()=>T(d,f,I)}),I]},I))})]}),l&&O&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",O.label,":"]})}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:O.columns.map(I=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:p.includes(I)?"#e0ffe0":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[r.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>T(p,g,I)}),I]},I))})]}),d.length>0||p.length>0?r.jsxs("div",{style:{background:"#f8f9fa",padding:"10px",borderRadius:"4px"},children:[r.jsx("strong",{children:"Preview Columns:"}),r.jsxs("div",{style:{marginTop:"5px",fontSize:"0.9em"},children:[d.map(I=>r.jsxs("span",{style:{marginRight:"8px",color:"#0066cc"},children:[P==null?void 0:P.label,".",I]},I)),p.map(I=>r.jsxs("span",{style:{marginRight:"8px",color:"#009900"},children:[O==null?void 0:O.label,".",I]},I))]})]}):null]}),r.jsxs("div",{className:"modal-actions",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsx("button",{onClick:e,children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:C,disabled:!l,children:"Create Joined Widget"})]})]})})},k4e=({isOpen:t,onClose:e,onCreated:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([{key:"name",label:"Name",type:"text"}]),[d,f]=v.useState(!1),p=()=>{c([...l,{key:"",label:"",type:"text"}])},g=j=>{c(l.filter((S,_)=>_!==j))},x=(j,S,_)=>{const T=[...l];T[j]={...T[j],[S]:_},S==="label"&&!T[j].key&&(T[j].key=_.toLowerCase().replace(/\s+/g,"_")),c(T)},b=async()=>{if(!a.trim()){alert("Table name is required");return}if(l.length===0||l.some(j=>!j.key||!j.label)){alert("All columns must have a key and label");return}f(!0);try{(await le("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,description:s,columns:l})})).ok?(n(),e(),i(""),o(""),c([{key:"name",label:"Name",type:"text"}])):alert("Failed to create table")}catch(j){console.error("Error creating table:",j),alert("Error creating table")}finally{f(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content create-table-modal-content",children:[r.jsxs("div",{className:"create-table-header",children:[r.jsxs("h3",{children:[r.jsx(Ab,{size:20})," Create Custom Table"]}),r.jsx("button",{onClick:e,className:"close-btn",children:r.jsx(Lt,{size:20})})]}),r.jsxs("div",{className:"form-content",children:[r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Table Name *"}),r.jsx("input",{type:"text",value:a,onChange:j=>i(j.target.value),placeholder:"e.g., Patient Notes, Appointments",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),placeholder:"Optional description",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Columns"}),r.jsx("div",{className:"columns-container",children:l.map((j,S)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{type:"text",value:j.label,onChange:_=>x(S,"label",_.target.value),placeholder:"Column label",className:"modal-input column-label-input"}),r.jsx("input",{type:"text",value:j.key,onChange:_=>x(S,"key",_.target.value),placeholder:"key",className:"modal-input column-key-input"}),r.jsxs("select",{value:j.type,onChange:_=>x(S,"type",_.target.value),className:"column-type-select",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>g(S),className:"remove-col-btn",disabled:l.length<=1,children:r.jsx(Bn,{size:16})})]},S))}),r.jsxs("button",{onClick:p,className:"add-col-btn",children:[r.jsx(qn,{size:14})," Add Column"]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:b,disabled:d,className:"create-button",children:d?"Creating...":"Create Table"})]})]})}):null},RB=()=>{const{id:t}=Ma(),e=Mt(),n=!!t,[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([]),[d,f]=v.useState(!1),[p,g]=v.useState([]),[x,b]=v.useState(!1),[j,S]=v.useState("stat"),[_,T]=v.useState(""),[C,P]=v.useState("api:patients"),[k,O]=v.useState([]),[I,F]=v.useState(!1),[B,$]=v.useState(!1);v.useEffect(()=>{L(),n&&V()},[t]);const L=async()=>{try{const G=await le("/api/dashboards/data-sources");if(G.ok){const z=await G.json();g(z),z.length>0&&P(z[0].key)}}catch(G){console.error("Error fetching data sources:",G)}},V=async()=>{try{const G=await le(`/api/dashboards/${t}`);if(G.ok){const z=await G.json();i(z.name),o(z.description),c(z.widgets||[])}}catch(G){console.error("Error fetching dashboard:",G)}},H=async()=>{if(!a.trim())return alert("Name is required");f(!0);try{const G={name:a,description:s,widgets:l},z=n?`/api/dashboards/${t}`:"/api/dashboards";(await le(z,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})).ok?e("/dashboards"):alert("Failed to save dashboard")}catch(G){console.error("Error saving dashboard:",G)}finally{f(!1)}},te=()=>{var ce;const G=p.find(we=>we.key===C),z={id:Date.now().toString(),type:j,title:_||(G==null?void 0:G.label)||"New Widget",dataSource:C,config:{columns:k.length>0?k:((ce=G==null?void 0:G.columns)==null?void 0:ce.slice(0,3))||[]}};c([...l,z]),b(!1),T(""),O([])},X=G=>{c(l.filter(z=>z.id!==G))},q=G=>{P(G),O([])},Y=p.find(G=>G.key===C),se=G=>{const z={id:Date.now().toString(),type:"table",title:`${G.primaryLabel} + ${G.relatedLabel}`,dataSource:`dynamic:${G.primary}:${G.related}`,config:{primaryColumns:G.primaryColumns,relatedColumns:G.relatedColumns}};c([...l,z])};return r.jsxs("div",{className:"dashboard-builder-container",children:[r.jsxs("div",{className:"builder-header",children:[r.jsxs("button",{className:"back-btn",onClick:()=>e("/dashboards"),children:[r.jsx(rn,{size:16})," Back"]}),r.jsxs("div",{className:"title-inputs",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:a,onChange:G=>i(G.target.value),className:"dashboard-name-input"}),r.jsx("input",{type:"text",placeholder:"Description (Optional)",value:s,onChange:G=>o(G.target.value),className:"dashboard-desc-input"})]}),r.jsxs("button",{className:"primary-button",onClick:H,disabled:d,children:[r.jsx(as,{size:16})," ",d?"Saving...":"Save Dashboard"]})]}),r.jsx("div",{className:"widgets-area",children:l.length===0?r.jsxs("div",{className:"empty-canvas",children:[r.jsx("p",{children:"Canvas is empty. Add a widget to start."}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"},children:[r.jsxs("button",{onClick:()=>b(!0),className:"add-widget-btn",children:[r.jsx(qn,{size:16})," Add Widget"]}),r.jsxs("button",{onClick:()=>F(!0),className:"add-widget-btn",style:{background:"#2196F3"},children:[r.jsx(Uz,{size:16})," Create Joined Widget"]}),r.jsxs("button",{onClick:()=>$(!0),className:"add-widget-btn",style:{background:"#4CAF50"},children:[r.jsx(Ab,{size:16})," Create Custom Table"]})]})]}):r.jsxs("div",{className:"widgets-grid",children:[l.map(G=>r.jsxs("div",{className:"widget-wrapper",children:[r.jsx("div",{className:"widget-actions-overlay",children:r.jsx("button",{onClick:()=>X(G.id),className:"remove-widget-btn",children:r.jsx(Bn,{size:14})})}),r.jsx(_M,{widget:G})]},G.id)),r.jsxs("div",{className:"add-more-card",onClick:()=>b(!0),children:[r.jsx(qn,{size:24}),r.jsx("span",{children:"Add Widget"})]})]})}),x&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h3",{children:"Add Widget"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title (Optional)"}),r.jsx("input",{type:"text",placeholder:"Leave blank for auto-title",value:_,onChange:G=>T(G.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type"}),r.jsxs("select",{value:j,onChange:G=>S(G.target.value),children:[r.jsx("option",{value:"stat",children:"Statistic (Count)"}),r.jsx("option",{value:"table",children:"Table (List)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Data Source"}),r.jsxs("select",{value:C,onChange:G=>q(G.target.value),children:[r.jsx("optgroup",{label:"Single Tables",children:p.filter(G=>!G.isCustom&&!G.isJoin).map(G=>r.jsx("option",{value:G.key,children:G.label},G.key))}),p.some(G=>G.isJoin)&&r.jsx("optgroup",{label:"Joined Tables (Multi-Table)",children:p.filter(G=>G.isJoin).map(G=>r.jsx("option",{value:G.key,children:G.label},G.key))}),p.some(G=>G.isCustom)&&r.jsx("optgroup",{label:"Custom Tables",children:p.filter(G=>G.isCustom).map(G=>r.jsx("option",{value:G.key,children:G.label},G.key))})]}),Y&&r.jsx("small",{style:{color:"#666"},children:Y.description})]}),j==="table"&&(Y==null?void 0:Y.columns)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Columns to Display (select multiple)"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Y.columns.map(G=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:k.includes(G),onChange:z=>{z.target.checked?O([...k,G]):O(k.filter(ce=>ce!==G))}}),G]},G))})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>b(!1),children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:te,children:"Add"})]})]})}),r.jsx(T4e,{isOpen:I,onClose:()=>F(!1),onConfirm:se}),r.jsx(k4e,{isOpen:B,onClose:()=>$(!1),onCreated:()=>L()})]})},A4e=()=>{const{id:t}=Ma(),e=Mt(),[n,a]=v.useState(null);if(v.useEffect(()=>{(async()=>{try{const o=await le(`/api/dashboards/${t}`);if(o.ok){const l=await o.json();a(l)}}catch(o){console.error("Error fetching dashboard:",o)}})()},[t]),!n)return r.jsx("div",{className:"temp-dash-empty",children:"Loading..."});const i=n.widgets||[];return r.jsxs("div",{className:"saved-dash-container",children:[r.jsxs("div",{className:"saved-dash-header",children:[r.jsxs("div",{className:"saved-dash-title-group",children:[r.jsx("button",{className:"saved-dash-back-btn",onClick:()=>e("/dashboards"),children:r.jsx(rn,{size:16})}),r.jsx("div",{className:"saved-dash-icon",children:r.jsx(Jm,{size:16})}),r.jsxs("div",{className:"saved-dash-title-text",children:[r.jsx("h2",{children:n.name}),n.description&&r.jsx("span",{className:"saved-dash-description",children:n.description})]})]}),r.jsx("div",{className:"saved-dash-actions",children:r.jsxs("button",{className:"saved-dash-edit-btn",onClick:()=>e(`/dashboards/${t}/edit`),children:[r.jsx(Ii,{size:12})," Edit"]})})]}),r.jsx("div",{className:"saved-dash-body",children:i.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets in this dashboard. Click Edit to add some!"}):r.jsx("div",{className:"temp-dash-grid",children:i.map((s,o)=>r.jsx(_M,{widget:s,autoHideEmptyColumns:!0},s.id||`view-widget-${o}`))})})]})},VA=["#8b5cf6","#3b82f6","#06b6d4","#10b981","#22c55e","#f59e0b","#f97316","#ef4444","#ec4899","#a855f7"],E4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState({name:"",key:"",color:"#6b7280",description:""}),[g,x]=v.useState(!1),b=async()=>{a(!0),s(null);try{const B=await le("/api/clinic-roles");if(B.ok){const $=await B.json();e($)}else s("Failed to load roles")}catch{s("Failed to connect to server")}finally{a(!1)}};v.useEffect(()=>{b()},[]);const j=B=>B.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),S=B=>{p($=>({...$,name:B,key:o?$.key:j(B)}))},_=async()=>{if(f.name.trim()){x(!0);try{const B=await le("/api/clinic-roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),key:f.key||j(f.name),color:f.color,description:f.description.trim()||null})});if(B.ok)await b(),d(!1),p({name:"",key:"",color:"#6b7280",description:""});else{const $=await B.json();s($.message||"Failed to create role")}}catch{s("Failed to create role")}finally{x(!1)}}},T=async()=>{if(!(!o||!f.name.trim())){x(!0);try{const B=await le(`/api/clinic-roles/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),color:f.color,description:f.description.trim()||null})});if(B.ok)await b(),l(null),p({name:"",key:"",color:"#6b7280",description:""});else{const $=await B.json();s($.message||"Failed to update role")}}catch{s("Failed to update role")}finally{x(!1)}}},C=async B=>{if(!B.isSystem&&window.confirm(`Delete role "${B.name}"? This cannot be undone.`))try{const $=await le(`/api/clinic-roles/${B.id}`,{method:"DELETE"});if($.ok)await b();else{const L=await $.json();s(L.message||"Failed to delete role")}}catch{s("Failed to delete role")}},P=B=>{l(B),p({name:B.name,key:B.key,color:B.color,description:B.description||""}),d(!1)},k=()=>{d(!0),l(null),p({name:"",key:"",color:VA[Math.floor(Math.random()*VA.length)],description:""})},O=()=>{d(!1),l(null),p({name:"",key:"",color:"#6b7280",description:""})},I=t.filter(B=>B.isSystem),F=t.filter(B=>!B.isSystem);return r.jsxs("div",{className:"role-management-page",children:[r.jsxs("div",{className:"role-management-header",children:[r.jsxs("div",{className:"header-title",children:[r.jsx(eg,{size:28}),r.jsxs("div",{children:[r.jsx("h1",{children:"Role Management"}),r.jsx("p",{children:"Manage custom roles for your clinic staff"})]})]}),r.jsxs("button",{className:"create-role-btn",onClick:k,disabled:c,children:[r.jsx(qn,{size:18}),"Create Custom Role"]})]}),i&&r.jsxs("div",{className:"role-error-banner",children:[r.jsx(Xr,{size:18}),i,r.jsx("button",{onClick:()=>s(null),children:r.jsx(Lt,{size:16})})]}),(c||o)&&r.jsxs("div",{className:"role-form-card",children:[r.jsx("h3",{children:o?"Edit Role":"Create New Role"}),r.jsxs("div",{className:"role-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Name *"}),r.jsx("input",{type:"text",value:f.name,onChange:B=>S(B.target.value),placeholder:"e.g., Senior Doctor, Ward Nurse"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Key"}),r.jsx("input",{type:"text",value:f.key,onChange:B=>p($=>({...$,key:B.target.value})),placeholder:"auto-generated",disabled:!!o})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:B=>p($=>({...$,description:B.target.value})),placeholder:"Brief description of role responsibilities"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx(sJ,{size:14}),"Color"]}),r.jsxs("div",{className:"color-picker",children:[VA.map(B=>r.jsx("button",{className:`color-option ${f.color===B?"selected":""}`,style:{background:B},onClick:()=>p($=>({...$,color:B}))},B)),r.jsx("input",{type:"color",value:f.color,onChange:B=>p($=>({...$,color:B.target.value})),className:"custom-color-input"})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"cancel-btn",onClick:O,children:"Cancel"}),r.jsxs("button",{className:"save-btn",onClick:o?T:_,disabled:g||!f.name.trim(),children:[r.jsx(Po,{size:16}),g?"Saving...":o?"Update Role":"Create Role"]})]})]})]}),r.jsxs("div",{className:"roles-container",children:[r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"System Roles"}),r.jsx("p",{className:"section-desc",children:"Default roles - can be customized but not deleted"}),n?r.jsx("div",{className:"roles-grid",children:[1,2,3].map(B=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",style:{marginBottom:"10px"},children:[r.jsx(Z,{variant:"circular",width:12,height:12,style:{marginRight:"8px"}}),r.jsx(Z,{width:100,height:20})]}),r.jsx(Z,{width:80,height:16,style:{marginBottom:"10px"}}),r.jsx(Z,{width:"100%",height:20}),r.jsx("div",{className:"role-actions",style:{marginTop:"15px"},children:r.jsx(Z,{width:60,height:24})})]},B))}):r.jsx("div",{className:"roles-grid",children:I.map(B=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:B.color}}),r.jsx("span",{className:"role-name",children:B.name}),r.jsx("span",{className:"system-badge",children:"System"})]}),r.jsx("div",{className:"role-key",children:B.key}),B.description&&r.jsx("div",{className:"role-description",children:B.description}),r.jsx("div",{className:"role-actions",children:r.jsxs("button",{className:"edit-role-btn",onClick:()=>P(B),children:[r.jsx(Xs,{size:14}),"Edit"]})})]},B.id))})]}),r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"Custom Roles"}),r.jsx("p",{className:"section-desc",children:"Roles created for your clinic"}),F.length===0?r.jsxs("div",{className:"no-roles",children:[r.jsx(eg,{size:32}),r.jsx("p",{children:"No custom roles created yet"}),r.jsxs("button",{onClick:k,children:[r.jsx(qn,{size:16}),"Create your first custom role"]})]}):r.jsx("div",{className:"roles-grid",children:F.map(B=>r.jsxs("div",{className:"role-card custom",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:B.color}}),r.jsx("span",{className:"role-name",children:B.name})]}),r.jsx("div",{className:"role-key",children:B.key}),B.description&&r.jsx("div",{className:"role-description",children:B.description}),r.jsxs("div",{className:"role-actions",children:[r.jsxs("button",{className:"edit-role-btn",onClick:()=>P(B),children:[r.jsx(Xs,{size:14}),"Edit"]}),r.jsxs("button",{className:"delete-role-btn",onClick:()=>C(B),children:[r.jsx(Bn,{size:14}),"Delete"]})]})]},B.id))})]})]})]})},P4e="_container_16815_47",O4e="_progressBar_16815_67",D4e="_sidebar_16815_97",M4e="_sidebarTitle_16815_161",I4e="_searchBox_16815_193",R4e="_searchInput_16815_203",L4e="_searchIcon_16815_237",F4e="_navSection_16815_255",$4e="_navSectionTitle_16815_263",B4e="_navLink_16815_287",z4e="_activeNavLink_16815_367",q4e="_navLinkIcon_16815_387",U4e="_content_16815_409",V4e="_header_16815_425",H4e="_headerContent_16815_493",G4e="_title_16815_503",W4e="_subtitle_16815_563",Y4e="_headerBadges_16815_575",K4e="_headerBadge_16815_575",Q4e="_section_16815_625",X4e="_sectionTitle_16815_665",J4e="_sectionTitleIcon_16815_689",Z4e="_sectionContent_16815_713",e3e="_featureList_16815_751",t3e="_featureItem_16815_767",n3e="_featureIcon_16815_799",r3e="_featureText_16815_813",a3e="_infoBox_16815_839",i3e="_infoBoxTitle_16815_881",s3e="_infoBoxContent_16815_903",o3e="_workflowList_16815_917",l3e="_kbd_16815_959",c3e="_moduleLinkBtn_16815_1179",u3e="_uiGrid_16815_1231",d3e="_uiCard_16815_1245",h3e="_uiLabel_16815_1277",f3e="_demoBtn_16815_1301",p3e="_demoBtnPrimary_16815_1323",m3e="_demoBtnSecondary_16815_1335",g3e="_demoBtnDanger_16815_1347",y3e="_demoBadge_16815_1361",x3e="_demoBadgeSuccess_16815_1385",v3e="_demoBadgeWarning_16815_1397",b3e="_demoBadgeError_16815_1409",j3e="_iconRow_16815_1421",w3e="_faqList_16815_1455",N3e="_faqItem_16815_1469",S3e="_faqQuestion_16815_1493",_3e="_faqIcon_16815_1523",C3e="_faqIconOpen_16815_1533",T3e="_faqAnswer_16815_1541",k3e="_footer_16815_1587",A3e="_footerText_16815_1605",E3e="_footerBrand_16815_1617",P3e="_floatingParticles_16815_1641",O3e="_particle_16815_1663",D3e="_headerLabel_16815_1817",M3e="_waveEmoji_16815_1845",I3e="_headerActions_16815_1857",R3e="_headerBtn_16815_1871",L3e="_headerBtnSecondary_16815_1913",F3e="_statsSection_16815_1963",$3e="_statCard_16815_1977",B3e="_statIcon_16815_2009",z3e="_statValue_16815_2039",q3e="_statLabel_16815_2053",U3e="_quickTipsSection_16815_2073",V3e="_quickTipsHeader_16815_2089",H3e="_tipNav_16815_2123",G3e="_tipCard_16815_2185",W3e="_tipIcon_16815_2231",Y3e="_tipContent_16815_2251",K3e="_tipIndicators_16815_2279",Q3e="_tipIndicator_16815_2279",X3e="_tipIndicatorActive_16815_2323",J3e="_shortcutsGrid_16815_2343",Z3e="_shortcutCard_16815_2357",e6e="_shortcutCardActive_16815_2383",t6e="_shortcutKeys_16815_2397",n6e="_kbdPlus_16815_2411",r6e="_kbdActive_16815_2423",a6e="_shortcutInfo_16815_2437",i6e="_shortcutAction_16815_2445",s6e="_shortcutDesc_16815_2459",o6e="_fabContainer_16815_3077",l6e="_fabButton_16815_3099",c6e="_fabContent_16815_3141",u6e="_contactRow_16815_3195",d6e="_contactIcon_16815_3213",h6e="_copyBtn_16815_3223",Me={container:P4e,progressBar:O4e,sidebar:D4e,sidebarTitle:M4e,searchBox:I4e,searchInput:R4e,searchIcon:L4e,navSection:F4e,navSectionTitle:$4e,navLink:B4e,activeNavLink:z4e,navLinkIcon:q4e,content:U4e,header:V4e,headerContent:H4e,title:G4e,subtitle:W4e,headerBadges:Y4e,headerBadge:K4e,section:Q4e,sectionTitle:X4e,sectionTitleIcon:J4e,sectionContent:Z4e,featureList:e3e,featureItem:t3e,featureIcon:n3e,featureText:r3e,infoBox:a3e,infoBoxTitle:i3e,infoBoxContent:s3e,workflowList:o3e,kbd:l3e,moduleLinkBtn:c3e,uiGrid:u3e,uiCard:d3e,uiLabel:h3e,demoBtn:f3e,demoBtnPrimary:p3e,demoBtnSecondary:m3e,demoBtnDanger:g3e,demoBadge:y3e,demoBadgeSuccess:x3e,demoBadgeWarning:v3e,demoBadgeError:b3e,iconRow:j3e,faqList:w3e,faqItem:N3e,faqQuestion:S3e,faqIcon:_3e,faqIconOpen:C3e,faqAnswer:T3e,footer:k3e,footerText:A3e,footerBrand:E3e,floatingParticles:P3e,particle:O3e,headerLabel:D3e,waveEmoji:M3e,headerActions:I3e,headerBtn:R3e,headerBtnSecondary:L3e,statsSection:F3e,statCard:$3e,statIcon:B3e,statValue:z3e,statLabel:q3e,quickTipsSection:U3e,quickTipsHeader:V3e,tipNav:H3e,tipCard:G3e,tipIcon:W3e,tipContent:Y3e,tipIndicators:K3e,tipIndicator:Q3e,tipIndicatorActive:X3e,shortcutsGrid:J3e,shortcutCard:Z3e,shortcutCardActive:e6e,shortcutKeys:t6e,kbdPlus:n6e,kbdActive:r6e,shortcutInfo:a6e,shortcutAction:i6e,shortcutDesc:s6e,fabContainer:o6e,fabButton:l6e,fabContent:c6e,contactRow:u6e,contactIcon:d6e,copyBtn:h6e},f6e=(t,e=2e3)=>{const[n,a]=v.useState(0),[i,s]=v.useState(!1),o=v.useRef(null);return v.useEffect(()=>{const l=new IntersectionObserver(([c])=>{c.isIntersecting&&s(!0)},{threshold:.3});return o.current&&l.observe(o.current),()=>l.disconnect()},[]),v.useEffect(()=>{if(!i)return;let l=null;const c=d=>{l||(l=d);const f=Math.min((d-l)/e,1);a(Math.floor(f*t)),f<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[i,t,e]),{count:n,ref:o}},p6e=()=>{const[t,e]=v.useState("getting-started"),[n,a]=v.useState(""),[i,s]=v.useState(0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(0),[g,x]=v.useState(null),b=v.useRef(null),j=v.useCallback(()=>{const F=document.documentElement.scrollHeight-window.innerHeight,B=window.scrollY/F*100;s(Math.min(B,100))},[]);v.useEffect(()=>{const F=()=>{const B=document.querySelectorAll("section[id]");let $="";B.forEach(L=>{const V=L.offsetTop;window.scrollY>=V-120&&($=L.getAttribute("id")||"")}),$&&e($),j()};return window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F)},[j]);const S=F=>{const B=document.getElementById(F);B&&window.scrollTo({top:B.offsetTop-80,behavior:"smooth"})},_={navigation:[{id:"getting-started",label:"Getting Started",icon:CI},{id:"clinical-workflow",label:"Doctor Workflow",icon:dw},{id:"financial-mgmt",label:"Financial Control",icon:mf},{id:"analytics",label:"Analytics & Insights",icon:mE},{id:"pharmacy-inventory",label:"Pharmacy & Stock",icon:yf},{id:"advanced-lab",label:"Advanced Lab Mgmt",icon:rs},{id:"ipd-admission",label:"IPD & Admission",icon:xf},{id:"custom-data",label:"System Customization",icon:gf},{id:"admin",label:"Administration",icon:ld}],reference:[{id:"ui-reference",label:"Interface & UI",icon:Mm},{id:"troubleshooting",label:"Troubleshooting",icon:fj}]},T=F=>n?F.filter(B=>B.label.toLowerCase().includes(n.toLowerCase())):F,C=({id:F,label:B,Icon:$})=>r.jsxs("a",{className:`${Me.navLink} ${t===F?Me.activeNavLink:""}`,onClick:()=>S(F),children:[r.jsx($,{className:Me.navLinkIcon,size:18}),B]}),P=[{question:"Bill not printing correctly?",answer:"Ensure pop-ups are not blocked in your browser. Also, check if your printer is properly configured in system settings. For thermal printers, verify the paper size matches the bill format."},{question:"Sync issues with data?",answer:"Make sure your internet connection is stable. The system auto-syncs when online. You can also manually trigger sync from the settings menu. If issues persist, try clearing browser cache."},{question:"How to reset my password?",answer:"Contact your clinic administrator who can reset your password from the Staff Management section. For security reasons, passwords cannot be self-reset without admin approval."},{question:"AI suggestions not appearing?",answer:'AI features require an active internet connection. Also ensure AI features are enabled in Clinic Settings under the "AI & Automation" tab.'},{question:"How do I record a partial payment for patient debt?",answer:"Navigate to Financial Control -> Patient Debts. Click on a patient's name to view their full transaction history. Use the payment recording form at the bottom to enter the amount paid and save."},{question:"How can I set up normal ranges for Lab tests?",answer:"Go to Advanced Lab Management -> Test Master. Click 'Edit' on a test, then go to the 'Parameters' tab. Here you can define min/max values, units, and default results."}],k=[{icon:wI,title:"Pro Tip: Voice Commands",description:'Use the AI Command Bar to speak naturally. Say "Create prescription for John" to get started instantly!',color:"#f59e0b"},{icon:AI,title:"Speed Boost",description:"Double-click any patient name in the queue to instantly open their full history.",color:"#8b5cf6"},{icon:WJ,title:"Smart Billing",description:"The system auto-suggests medicine quantities based on prescription duration!",color:"#10b981"},{icon:kI,title:"Favorites",description:"Star frequently prescribed medicines to access them from your quick-add panel.",color:"#ef4444"}];v.useEffect(()=>{const F=setInterval(()=>{p(B=>(B+1)%k.length)},5e3);return()=>clearInterval(F)},[k.length]);const O=[{icon:Oo,value:1e4,suffix:"+",label:"Patients Managed",color:"#6366f1"},{icon:Tb,value:75,suffix:"%",label:"Time Saved",color:"#10b981"},{icon:QJ,value:99,suffix:".9%",label:"Uptime",color:"#f59e0b"},{icon:TX,value:50,suffix:"+",label:"Happy Clinics",color:"#ef4444"}],I=[{keys:["Ctrl","K"],action:"Open Command Bar",description:"Quick access to AI assistant and navigation"},{keys:["Ctrl","P"],action:"Quick Print",description:"Print current document or bill"},{keys:["Ctrl","S"],action:"Save Record",description:"Save current form or entry"},{keys:["Esc"],action:"Close Modal",description:"Close any open dialog or panel"}];return r.jsxs("div",{className:Me.container,children:[r.jsx("div",{className:Me.progressBar,style:{width:`${i}%`}}),r.jsxs("aside",{className:Me.sidebar,children:[r.jsxs("h2",{className:Me.sidebarTitle,children:[r.jsx(yI,{size:22}),"User Guide"]}),r.jsxs("div",{className:Me.searchBox,children:[r.jsx(Mn,{className:Me.searchIcon,size:16}),r.jsx("input",{type:"text",className:Me.searchInput,placeholder:"Search topics...",value:n,onChange:F=>a(F.target.value)})]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(Oa,{size:12}),"Navigation"]}),T(_.navigation).map(F=>r.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(kI,{size:12}),"Reference"]}),T(_.reference).map(F=>r.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]})]}),r.jsxs("main",{className:Me.content,ref:b,children:[r.jsxs("header",{className:Me.header,children:[r.jsxs("div",{className:Me.floatingParticles,children:[r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle})]}),r.jsxs("div",{className:Me.headerContent,children:[r.jsxs("div",{className:Me.headerLabel,children:[r.jsx(yI,{size:16}),"Complete Documentation"]}),r.jsxs("h1",{className:Me.title,children:["Master Newtons Ai HMS ",r.jsx("span",{className:Me.waveEmoji,children:""})]}),r.jsx("p",{className:Me.subtitle,children:"Your comprehensive guide to maximizing efficiency with the AI-Powered Health Management System. Master every feature and transform your clinical workflow."}),r.jsxs("div",{className:Me.headerBadges,children:[r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(eg,{size:14}),"HIPAA Compliant"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(hw,{size:14}),"AI Powered"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(gE,{size:14}),"Multi-Language"]})]}),r.jsxs("div",{className:Me.headerActions,children:[r.jsxs("button",{className:Me.headerBtn,onClick:()=>S("getting-started"),children:[r.jsx(Gz,{size:16}),"Get Started"]}),r.jsxs("button",{className:Me.headerBtnSecondary,onClick:()=>S("troubleshooting"),children:[r.jsx(fj,{size:16}),"Need Help?"]})]})]})]}),r.jsx("section",{className:Me.statsSection,children:O.map((F,B)=>{const{count:$,ref:L}=f6e(F.value);return r.jsxs("div",{className:Me.statCard,ref:L,children:[r.jsx("div",{className:Me.statIcon,style:{backgroundColor:`${F.color}15`,color:F.color},children:r.jsx(F.icon,{size:24})}),r.jsxs("div",{className:Me.statValue,style:{color:F.color},children:[$,F.suffix]}),r.jsx("div",{className:Me.statLabel,children:F.label})]},B)})}),r.jsxs("section",{className:Me.quickTipsSection,children:[r.jsxs("div",{className:Me.quickTipsHeader,children:[r.jsxs("h3",{children:[r.jsx(wI,{size:20})," Quick Tips"]}),r.jsxs("div",{className:Me.tipNav,children:[r.jsx("button",{onClick:()=>p(F=>(F-1+k.length)%k.length),children:r.jsx(Cb,{size:18})}),r.jsxs("span",{children:[f+1," / ",k.length]}),r.jsx("button",{onClick:()=>p(F=>(F+1)%k.length),children:r.jsx(dd,{size:18})})]})]}),r.jsxs("div",{className:Me.tipCard,children:[r.jsx("div",{className:Me.tipIcon,style:{backgroundColor:`${k[f].color}15`,color:k[f].color},children:Ce.createElement(k[f].icon,{size:28})}),r.jsxs("div",{className:Me.tipContent,children:[r.jsx("h4",{children:k[f].title}),r.jsx("p",{children:k[f].description})]})]},f),r.jsx("div",{className:Me.tipIndicators,children:k.map((F,B)=>r.jsx("button",{className:`${Me.tipIndicator} ${f===B?Me.tipIndicatorActive:""}`,onClick:()=>p(B)},B))})]}),r.jsxs("section",{id:"getting-started",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(CI,{size:18})}),"Getting Started"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Welcome to the Newtons Ai HMS. This guide will help you navigate and master the system's features, from clinical workflows to advanced financial analytics."}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(hw,{size:18}),"Multi-Platform Accessibility"]}),r.jsx("div",{className:Me.infoBoxContent,children:"Newtons Ai is a PWA (Progressive Web App). You can install it on your Desktop, Android, or iOS device for a native-like experience with faster performance and offline support."})]}),r.jsx("div",{className:Me.shortcutsGrid,children:I.map((F,B)=>r.jsxs("div",{className:`${Me.shortcutCard} ${g===F.action?Me.shortcutCardActive:""}`,onMouseEnter:()=>x(F.action),onMouseLeave:()=>x(null),children:[r.jsx("div",{className:Me.shortcutKeys,children:F.keys.map(($,L)=>r.jsxs(Ce.Fragment,{children:[r.jsx("kbd",{className:`${Me.kbd} ${g===F.action?Me.kbdActive:""}`,children:$}),L<F.keys.length-1&&r.jsx("span",{className:Me.kbdPlus,children:"+"})]},L))}),r.jsxs("div",{className:Me.shortcutInfo,children:[r.jsx("div",{className:Me.shortcutAction,children:F.action}),r.jsx("div",{className:Me.shortcutDesc,children:F.description})]})]},B))}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(sX,{size:14})," Smart Navigation"]}),r.jsxs("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:["Press ",r.jsx("kbd",{className:Me.kbd,children:"Ctrl"})," + ",r.jsx("kbd",{className:Me.kbd,children:"K"})," anywhere to open the Command Bar. Instantly jump to patients, bills, or settings."]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Oo,{size:14})," Multi-Role Access"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"The system adapts to your role: Doctor, Receptionist, Pharmacist, or Lab Technician."})]})]})]})]}),r.jsxs("section",{id:"clinical-workflow",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(dw,{size:18})}),"Doctor Workflow & Live Queue"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"The Doctor Consultation Panel is optimized for speed and clarity, providing all necessary patient context at a single glance."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(bc,{size:14})," Live Queue Control"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Use the "Call Next" buttons to manage the patient flow. The system automatically marks seen patients and updates the waiting list.'}),r.jsx(Nr,{to:"/dashboard/doctor",className:Me.moduleLinkBtn,children:"Consultation Panel"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(kv,{size:14})," AI Patient Briefs"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:`" AI Brief" provides a summarized snapshot of the patient's current complaint and relevant history saving valuable consultation time.`})]})]}),r.jsx("h3",{children:"Comprehensive History"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(cv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Unified Timeline:"})," View past complaints, lab reports, and medications in a single, chronologically grouped view."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(fX,{size:16,className:Me.featureIcon,style:{color:"var(--guide-primary)"}}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"One-Click Action:"})," From the history view, copy past medications to new prescriptions or quickly re-order tests."]})]})]})]})]}),r.jsxs("section",{id:"financial-mgmt",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(mf,{size:18})}),"Financial Control & Debt Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Keep your clinic's finances healthy with precise billing and proactive debt management."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(fw,{size:14})," Debt Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Monitor all outstanding balances in the Patent Debt module. View individual transaction histories and record settlements."}),r.jsx(Nr,{to:"/dashboard/admin/patient-debts",className:Me.moduleLinkBtn,children:"Manage Debt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Oa,{size:14})," Custom Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Need to bill for something non-standard? Use the Custom Bill tool to create items on-the-fly."}),r.jsx(Nr,{to:"/create-custom-bill",className:Me.moduleLinkBtn,children:"Custom Bill"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(eg,{size:18}),"Payment Verification"]}),r.jsx("div",{className:Me.infoBoxContent,children:'The system tracks payment modes (Cash, UPI, Card, Credit). "Credit" sales are automatically added to the Patient Debt list for later follow-up.'})]})]})]}),r.jsxs("section",{id:"analytics",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(mE,{size:18})}),"Analytics & Insights"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Transition from simply managing data to understanding it. The Analysis Dashboard provides deep insights into your operations."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(bc,{size:14})," Revenue vs Cash Flow"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Compare Sales (Accrual) against actual Cash Collected (Cash Basis) to understand your true liquidity."}),r.jsx(Nr,{to:"/dashboard/analysis",className:Me.moduleLinkBtn,children:"Open Analysis"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(_I,{size:14})," Dept. Analysis"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"See exactly which departments (Pharmacy, Lab, OPD) are driving your clinic's growth."})]})]}),r.jsx("h3",{children:"Advanced Metrics"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(cv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Inventory Movement:"})," Analyze stock inflow vs outflow to predict future procurement needs."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(cv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Profit Estimation:"})," View estimated profits based on cost of goods sold (COGS) vs revenue generated."]})]})]})]})]}),r.jsxs("section",{id:"pharmacy-inventory",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(yf,{size:18})}),"Pharmacy & Inventory Tracking"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Maintain optimal stock levels and manage supplier relationships effortlessly."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(qO,{size:14})," Distributor Mgmt"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep a directory of suppliers, track payments made to them, and manage purchase entries."}),r.jsx(Nr,{to:"/dashboard/distributors",className:Me.moduleLinkBtn,children:"Distributors"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(TQ,{size:14})," Refill Reminders"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automatically notify patients when their chronic medication stock is about to run out."}),r.jsx(Nr,{to:"/refill-reminders",className:Me.moduleLinkBtn,children:"Refill Alerts"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(bc,{size:18}),"Stock-Out Alerts"]}),r.jsx("div",{className:Me.infoBoxContent,children:"High-demand items are highlighted when stock falls below your defined threshold, ensuring you never run out of critical medicines."})]})]})]}),r.jsxs("section",{id:"advanced-lab",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(rs,{size:18})}),"Advanced Lab Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Go beyond simple test lists. Configure complex diagnostic parameters with automated clinical validation."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Mn,{size:14})," Multi-Parameter Search"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Find reports by Patient Name, ID, Token, or even specific Test Name. The intelligent search uses fuzzy matching."}),r.jsx(Nr,{to:"/lab/search-report",className:Me.moduleLinkBtn,children:"Find Reports"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(rs,{size:14})," Test Master"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define parametric data, normal ranges, and automated formatting for your reports."}),r.jsx(Nr,{to:"/lab-inventory",className:Me.moduleLinkBtn,children:"Configure Tests"})]})]})]})]}),r.jsxs("section",{id:"ipd-admission",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(xf,{size:18})}),"IPD & Admission Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Manage the full lifecycle of in-patient care, from the moment of admission to final discharge and billing."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Kn,{size:14})," In-Patient Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep track of all currently admitted patients, their ward assignments, and duration of stay."}),r.jsx(Nr,{to:"/manage-admission",className:Me.moduleLinkBtn,children:"Admission Mgmt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(fw,{size:14})," Cumulative Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automated daily room charges combined with services and medications consumed during the stay."})]})]}),r.jsx("h3",{children:"Workflow Steps"}),r.jsxs("ol",{className:Me.workflowList,children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Admit:"})," Register the patient and set the admission date and bed details."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Manage:"})," Record observations and clinical notes throughout the stay."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Discharge:"})," Finalize all pending charges and generate the discharge summary."]})]})]})]}),r.jsxs("section",{id:"custom-data",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(gf,{size:18})}),"System Customization"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Newtons Ai HMS is designed to be extensible. Create your own data structures and visualization tools."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Ab,{size:14})," Custom Tables"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define new data types (e.g., Equipment Logs, Consent Forms). Support for text, number, date, and boolean."}),r.jsx(Nr,{to:"/custom-tables",className:Me.moduleLinkBtn,children:"Data Tables"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(_I,{size:14})," Custom Dashboards"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Build your own reporting views. Drag and drop widgets to visualize your performance."}),r.jsx(Nr,{to:"/dashboards",className:Me.moduleLinkBtn,children:"Manage Dashboards"})]})]})]})]}),r.jsxs("section",{id:"admin",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(ld,{size:18})}),"Administration"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Central command for clinic owners. Access critical functions and manage staff permissions."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Oo,{size:14})," Staff & Permissions"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Add/edit staff and define exactly what each role can see and do in the system."}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[r.jsx(Nr,{to:"/dashboard/staff",className:Me.moduleLinkBtn,children:"Staff"}),r.jsx(Nr,{to:"/dashboard/roles",className:Me.moduleLinkBtn,children:"Roles"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(oa,{size:14})," Subscription Plans"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Manage your patients' subscription plans, billing cycles, and membership statuses."}),r.jsx(Nr,{to:"/dashboard/subscriptions",className:Me.moduleLinkBtn,children:"Subscriptions"})]})]})]})]}),r.jsxs("section",{id:"ui-reference",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(Mm,{size:18})}),"Interface & UI Reference"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Familiarize yourself with the common UI elements used throughout the application."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Action Buttons"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnPrimary}`,children:"Primary / Save"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnSecondary}`,children:"Secondary"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnDanger}`,children:"Danger / Delete"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Status Indicators"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeSuccess}`,children:[r.jsx(cv,{size:12}),"Paid / Completed"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeWarning}`,children:[r.jsx(AI,{size:12}),"Pending / Due"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeError}`,children:[r.jsx(fj,{size:12}),"Overdue / Failed"]})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Common Icons"}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Ii,{size:16})," ",r.jsx("span",{children:"Edit Record"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Bn,{size:16})," ",r.jsx("span",{children:"Delete Item"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Mm,{size:16})," ",r.jsx("span",{children:"View Details"})]})]})]})]})]}),r.jsxs("section",{id:"troubleshooting",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(fj,{size:18})}),"Troubleshooting & Support"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(gE,{size:18}),"Offline Support (PWA)"]}),r.jsxs("div",{className:Me.infoBoxContent,children:["Newtons Ai HMS is a ",r.jsx("strong",{children:"Progressive Web App (PWA)"}),'. Install it on your desktop or mobile home screen using the "Install" button in the header for faster loading and offline syncing of critical data.']})]}),r.jsxs("div",{className:Me.infoBox,style:{borderLeftColor:"var(--guide-accent)"},children:[r.jsxs("span",{className:Me.infoBoxTitle,style:{color:"var(--guide-accent)"},children:[r.jsx(tC,{size:18}),"Need Direct Support?"]}),r.jsx("div",{className:Me.infoBoxContent,children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Zm,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"+91 63631 11328"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(NI,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"shiva@newtons.in"})]})]})})]}),r.jsx("h3",{children:"Frequently Asked Questions"}),r.jsx("div",{className:Me.faqList,children:P.map((F,B)=>r.jsxs("div",{className:Me.faqItem,children:[r.jsxs("div",{className:Me.faqQuestion,onClick:()=>l(o===B?null:B),children:[r.jsx("span",{children:F.question}),r.jsx($z,{size:18,className:`${Me.faqIcon} ${o===B?Me.faqIconOpen:""}`})]}),o===B&&r.jsx("div",{className:Me.faqAnswer,children:F.answer})]},B))})]})]}),r.jsx("footer",{className:Me.footer,children:r.jsxs("p",{className:Me.footerText,children:[" ",new Date().getFullYear()," ",r.jsx("span",{className:Me.footerBrand,children:"Newtons Ai"}),". Empowering Healthcare through Intelligence."]})})]}),r.jsxs("div",{className:Me.fabContainer,children:[c&&r.jsxs("div",{className:Me.fabContent,children:[r.jsxs("h4",{children:[r.jsx(tC,{size:18}),"Customer Care"]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(Zm,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"+91 63631 11328"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("+916363111328"),title:"Copy Phone",children:r.jsx(bI,{size:14})})]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(NI,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"shiva@newtons.in"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("shiva@newtons.in"),title:"Copy Email",children:r.jsx(bI,{size:14})})]})]}),r.jsx("button",{className:Me.fabButton,onClick:()=>d(!c),title:"Customer Support",children:c?r.jsx(Lt,{size:24}):r.jsx(tC,{size:24})})]})]})},m6e=t=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(t)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(t)?{type:"premolar",roots:1}:[6,11,22,27].includes(t)?{type:"canine",roots:1}:t>=1&&t<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(t)?{type:"molar",roots:2}:[43,48,53,58].includes(t)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(t)?{type:"incisor",roots:1}:{type:"incisor",roots:1},Uu=({toothNumber:t,conditions:e=[],className:n,style:a,isSelected:i,bridgeConnectPrevious:s})=>{const{type:o}=m6e(t),l=t<=16||t>=41&&t<=50,c="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",d="M7,25 Q5,40 10,44 Q14,40 14,26",f="M29,25 Q31,40 26,44 Q22,40 22,26",p="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",g="M10,24 Q16,44 18,45 Q20,44 26,24",x="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",b="M10,25 Q18,48 26,25",j="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",S="M12,25 Q18,46 24,25";let _=c,T=[d,f];o==="incisor"?(_=j,T=[S]):o==="canine"?(_=x,T=[b]):o==="premolar"&&(_=p,T=[g]);const C=e.includes("condition-rct"),P=e.includes("condition-filling"),k=e.includes("condition-crown"),O=e.includes("condition-bridge"),I=e.includes("condition-extraction"),F=e.includes("condition-implant"),B=C?"#e9d5ff":"#f3f4f6",$=I?"#fee2e2":"#ffffff",L=I?"#ef4444":O?"#0891b2":F?"#475569":k?"#b45309":i?"#3b82f6":"#6b7280",V=i||O||k||F?2:1.5,H=l?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return r.jsxs("svg",{viewBox:"0 0 36 50",className:n,style:{width:"100%",height:"100%",overflow:"visible",...a},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),r.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),r.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),r.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),r.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[r.jsx("stop",{offset:"0%",stopColor:"#475569"}),r.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),r.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),s&&r.jsx("path",{d:H,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),F?r.jsxs("g",{children:[r.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:L,strokeWidth:"1"}),r.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[r.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),r.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),r.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),r.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:L,strokeWidth:"1",rx:"1"})]}):r.jsx("g",{fill:B,stroke:L,strokeWidth:V,strokeLinejoin:"round",children:T.map((te,X)=>r.jsx("path",{d:te},X))}),C&&!F&&r.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:o==="molar"?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M12,28 L11,42"}),r.jsx("path",{d:"M24,28 L25,42"})]}):r.jsx("path",{d:"M18,25 L18,44"})}),r.jsx("path",{d:_,fill:O?"url(#bridgeGradient)":k?"url(#goldGradient)":$,stroke:L,strokeWidth:V,strokeLinejoin:"round"}),P&&!k&&!O&&!F&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),I&&r.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[r.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),r.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},xb=(t,e="universal")=>e==="universal"?t<=32?t.toString():t>=41&&t<=50?String.fromCharCode(65+(t-41)):t>=51&&t<=60?String.fromCharCode(75+(t-51)):t.toString():e==="fdi"?t>=1&&t<=8?(18-(t-1)).toString():t>=9&&t<=16?(21+(t-9)).toString():t>=17&&t<=24?(38-(t-17)).toString():t>=25&&t<=32?(41+(t-25)).toString():t>=41&&t<=45?(55-(t-41)).toString():t>=46&&t<=50?(61+(t-46)).toString():t>=51&&t<=55?(75-(t-51)).toString():t>=56&&t<=60?(81+(t-56)).toString():t.toString():t.toString(),wG=({selectedTeeth:t,toothConditions:e={},toothDetails:n={},onToothClick:a,onEditPastRecord:i,onPrint:s,numberingSystem:o="universal"})=>{const[l,c]=Ce.useState("permanent"),d=Array.from({length:16},(_,T)=>T+1),f=Array.from({length:16},(_,T)=>32-T),p=Array.from({length:10},(_,T)=>41+T),g=Array.from({length:10},(_,T)=>60-T),[x,b]=Ce.useState(null),j=_=>{const T=e[_]||[],C=t.includes(_);let P=[],k="#9ca3af",O;const I=T.includes("condition-extraction");return C&&(k="#3b82f6"),T.includes("condition-filling")&&P.push("#60a5fa"),T.includes("condition-rct")&&P.push("#c084fc"),T.includes("condition-crown")&&(P.push("#fcd34d"),k="#d97706"),T.includes("condition-bridge")&&(P.push("#22d3ee"),k="#0891b2"),T.includes("condition-implant")&&(P.push("#94a3b8"),k="#475569"),T.includes("condition-extraction")&&(P.push("#fee2e2"),k="#ef4444"),P.length===0&&C&&P.push("#eff6ff"),P.length===0&&P.push("#ffffff"),{fillColors:P,borderColor:k,overlayColor:O,isSelected:C,hasExtraction:I}},S=_=>{const{isSelected:T}=j(_),C=e[_]||[],P=n[_],k=_<=16||_>=41&&_<=50,O=C.includes("condition-bridge");let I=!1;if(O){let B=null;k?(_>1&&_<=16&&(B=_-1),_>41&&_<=50&&(B=_-1)):(_<32&&_>=17&&(B=_+1),_<60&&_>=51&&(B=_+1)),B!==null&&(e[B]||[]).includes("condition-bridge")&&(I=!0)}const F=xb(_,o);return r.jsxs("div",{onClick:()=>a(_),onMouseEnter:()=>b(_),onMouseLeave:()=>b(null),className:`tooth-item-container ${T?"selected":""}`,title:"",children:[r.jsx("div",{className:"tooth-number-label",children:F}),r.jsx("div",{className:"tooth-svg-wrapper",style:{transform:k?"rotate(180deg)":"none"},children:r.jsx(Uu,{toothNumber:_,conditions:C,isSelected:T,bridgeConnectPrevious:I})}),x===_&&P&&P.length>0&&r.jsxs("div",{className:"tooth-tooltip-window",children:[r.jsxs("div",{className:"tooltip-header",children:["Tooth ",F]}),r.jsx("ul",{className:"tooltip-list",children:P.map((B,$)=>r.jsxs("li",{className:"tooltip-detail-item",children:[r.jsxs("span",{className:"detail-text",children:[B.name," ",r.jsxs("small",{children:["(",B.date,")"]})]}),B.isPast&&i&&r.jsx("button",{className:"tooltip-edit-btn",onClick:L=>{L.stopPropagation(),i(B.recordId)},title:"Edit this record",children:r.jsx(Xs,{size:12})})]},$))})]})]},_)};return r.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[r.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[r.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[r.jsx("button",{className:`view-toggle-btn ${l==="permanent"?"active":""}`,onClick:()=>c("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="permanent"?"#fff":"transparent",boxShadow:l==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),r.jsx("button",{className:`view-toggle-btn ${l==="primary"?"active":""}`,onClick:()=>c("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="primary"?"#fff":"transparent",boxShadow:l==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),s&&r.jsxs("button",{onClick:_=>{_.stopPropagation(),s()},className:"chart-print-btn no-print",title:"Print Report",children:[r.jsx(Av,{size:16}),r.jsx("span",{children:"Print Report"})]})]}),r.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(0,8).map(_=>S(_)):p.slice(0,5).map(_=>S(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(8).map(_=>S(_)):p.slice(5).map(_=>S(_))})]}),r.jsxs("div",{className:"midline-divider",children:[r.jsx("div",{className:"divider-line"}),r.jsx("span",{className:"chart-label",children:"Midline"}),r.jsx("div",{className:"divider-line"})]}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(0,8).map(_=>S(_)):g.slice(0,5).map(_=>S(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(8).map(_=>S(_)):g.slice(5).map(_=>S(_))})]}),r.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Uu,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),r.jsx("span",{children:"Healthy"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Uu,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),r.jsx("span",{children:"Filling (Dot)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Uu,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),r.jsx("span",{children:"RCT (Root Lines)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Uu,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),r.jsx("span",{children:"Crown"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Uu,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),r.jsx("span",{children:"Bridge"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Uu,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),r.jsx("span",{children:"Implant"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Uu,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),r.jsx("span",{children:"Extraction (X)"})]})]}),r.jsxs("div",{className:"print-only-details-summary print-only",children:[r.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(n).length===0?r.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):r.jsxs("table",{className:"print-details-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Tooth"}),r.jsx("th",{children:"Procedure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:Object.entries(n).sort(([_],[T])=>parseInt(_)-parseInt(T)).map(([_,T])=>r.jsx(Ce.Fragment,{children:T.map((C,P)=>r.jsxs("tr",{children:[P===0?r.jsxs("td",{rowSpan:T.length,className:"tooth-cell",children:["Tooth ",xb(parseInt(_),o)]}):null,r.jsx("td",{children:C.name}),r.jsx("td",{children:C.date})]},`${_}-${P}`))},_))})]})]})]})},g6e=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,type:"general"});v.useEffect(()=>{b()},[]);const b=async()=>{s(!0);try{const C=await le("/api/dental/procedures");if(C.ok){const P=await C.json();a(P)}}catch(C){console.error(C)}finally{s(!1)}},j=async()=>{if(!(!g.name||!g.cost))try{(await le("/api/dental/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,type:"general"}),b(),e())}catch(C){console.error(C)}},S=async C=>{try{(await le(`/api/dental/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),d({}),b(),e())}catch(P){console.error(P)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await le(`/api/dental/procedures/${C}`,{method:"DELETE"})).ok&&(b(),e())}catch(P){console.error(P)}},T=C=>{l(C.id),d({name:C.name,cost:C.cost,type:C.type})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await le("/api/dental/procedures/import-defaults",{method:"POST"}),b(),e()}catch(C){console.error(C)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Lt,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Type"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:P=>d({...c,name:P.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsxs("select",{className:"edit-select",value:c.type||"general",onChange:P=>d({...c,type:P.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"})]})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:P=>d({...c,cost:parseFloat(P.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>S(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(as,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Lt,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.type}`,children:C.type})}),r.jsxs("td",{style:{fontWeight:500},children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(Xs,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Bn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:C=>x({...g,name:C.target.value})}),r.jsxs("select",{className:"form-select",value:g.type||"general",onChange:C=>x({...g,type:C.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"})]}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:C=>x({...g,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:j,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(qn,{size:18})," Add New Procedure"]})})]})})},y6e=({toothNumber:t,procedures:e,history:n=[],onSelect:a,onClose:i,numberingSystem:s="universal"})=>{const[o,l]=v.useState(""),[c,d]=v.useState(n.length>0?"history":"add"),f=xb(t,s),p=v.useMemo(()=>e.filter(g=>g.name.toLowerCase().includes(o.toLowerCase())),[e,o]);return r.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:[r.jsxs("div",{className:"modal-content",style:{backgroundColor:"var(--dp-card-bg)",borderRadius:"12px",width:"100%",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",overflow:"hidden",animation:"scaleUp 0.2s ease-out"},children:[r.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--dp-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--dp-bg)"},children:[r.jsxs("h3",{style:{margin:0,color:"var(--dp-text)",fontSize:"1.1rem"},children:["Tooth ",f]}),r.jsx("button",{onClick:i,style:{background:"none",border:"none",color:"var(--dp-text-sec)",cursor:"pointer",padding:"4px"},children:r.jsx(Lt,{size:20})})]}),n.length>0&&r.jsxs("div",{className:"sidebar-tabs",style:{padding:"0 16px",paddingTop:"8px",background:"var(--dp-bg)"},children:[r.jsx("button",{className:c==="add"?"active":"",onClick:()=>d("add"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:"Add Procedure"}),r.jsxs("button",{className:c==="history"?"active":"",onClick:()=>d("history"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:["History (",n.length,")"]})]}),c==="add"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:r.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[r.jsx(Mn,{size:16,style:{position:"absolute",left:"12px",color:"var(--dp-text-sec)"}}),r.jsx("input",{type:"text",placeholder:"Search procedures...",value:o,onChange:g=>l(g.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",borderRadius:"8px",border:"1px solid var(--dp-border)",backgroundColor:"var(--dp-bg)",color:"var(--dp-text)",fontSize:"0.9rem",outline:"none"},autoFocus:!0})]})}),r.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:p.length===0?r.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.9rem"},children:"No procedures found."}):r.jsx("div",{style:{display:"flex",flexDirection:"column"},children:p.map(g=>r.jsxs("button",{onClick:()=>a(g),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",border:"none",background:"transparent",borderBottom:"1px solid var(--dp-border)",cursor:"pointer",textAlign:"left",transition:"background-color 0.1s"},className:"procedure-modal-item",onMouseOver:x=>x.currentTarget.style.backgroundColor="var(--dp-bg)",onMouseOut:x=>x.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("div",{children:[r.jsx("div",{style:{color:"var(--dp-text)",fontWeight:500,fontSize:"0.95rem"},children:g.name}),r.jsx("div",{style:{color:"var(--dp-text-sec)",fontSize:"0.8rem",textTransform:"capitalize"},children:g.type})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--dp-primary)",fontWeight:600,fontSize:"0.9rem"},children:[r.jsxs("span",{children:["",g.cost]}),r.jsx(qn,{size:16})]})]},g.id))})})]}),c==="history"&&r.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"0"},children:n.map((g,x)=>r.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:[r.jsx("div",{style:{fontWeight:500,fontSize:"0.9rem"},children:g.name}),r.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)"},children:[g.date," ",g.isPast?"(Past)":"(Current)"]})]},x))})]}),r.jsx("style",{children:`
                @keyframes scaleUp {
                    from { transform: scale(0.95); opacity: 0; }
                    to { transform: scale(1); opacity: 1; }
                }
            `})]})},x6e=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var ee,Se,qe,Ge,Ne,ne,de,Te,Ee;const[i,s]=v.useState(null),[o,l]=v.useState([]),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(!1),[b,j]=v.useState("cash"),[S,_]=v.useState(""),[T,C]=v.useState(""),[P,k]=v.useState(""),[O,I]=v.useState(""),[F,B]=v.useState(""),[$,L]=v.useState(!1),[V,H]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[te,X]=v.useState(0),q=v.useRef(!1),[Y,se]=v.useState(null),[G,z]=v.useState(!1),ce=()=>{const W=V.map(he=>he.method),ye=["cash","upi","card","no_cash_insurance","credit"].filter(he=>!W.includes(he));ye.length>0&&H([...V,{id:crypto.randomUUID(),method:ye[0],amount:0}])},we=W=>{V.length>2&&H(V.filter(ye=>ye.id!==W))},K=(W,ye,he)=>{H(ge=>{const _e=ge.map(ze=>ze.id===W?ye==="method"?{...ze,method:he}:{...ze,amount:Math.max(0,he)}:ze);if(ye==="amount"&&_e.length===2){const Oe=_e.findIndex(mt=>mt.id===W)===0?1:0,He=Math.max(0,he),nt=oe-He;_e[Oe]={..._e[Oe],amount:Math.max(0,nt)}}return _e})},Ie=W=>{const ye=V.filter(ge=>ge.id!==W).reduce((ge,_e)=>ge+_e.amount,0),he=Math.max(0,oe-ye);K(W,"amount",he)},We=v.useMemo(()=>V.reduce((W,ye)=>W+ye.amount,0),[V]),Re=W=>{const ye=Math.max(0,Math.min(100,isNaN(W)?0:W));q.current=!0,X(ye);const he=o.map(ge=>({...ge,discount_percentage:ye}));l(he)},Fe=(W,ye)=>{const he=[...o];he[W].discount_percentage=isNaN(ye)?0:ye,l(he)};v.useEffect(()=>{if(q.current){q.current=!1;return}const W=o.reduce((ge,_e)=>ge+(_e.price??0),0);if(W===0){X(0);return}const he=o.reduce((ge,_e)=>{const Oe=(_e.price??0)*((_e.discount_percentage??0)/100);return ge+Oe},0)/W*100;X(ge=>Math.abs(ge-he)>.01?he:ge)},[o]);const ve=async()=>{var W,ye;if(!i)return p("No record data available to bill."),null;if(o.length===0)return p("Cannot bill an empty procedure list."),null;x(!0),p(null);try{const he=o.map(De=>{const Je=De.price,et=Je*((De.discount_percentage??0)/100),ut=Je-et;return{name:De.name,price:De.price,quantity:1,total:ut,item_id:De.id||`proc_${Date.now()}`,type:"service",discount_percentage:De.discount_percentage??0}}),ge=$?((W=V[0])==null?void 0:W.method)||"cash":b,_e=$?V.map(De=>({method:De.method,amount:De.amount})):void 0,ze={patientId:i.patientId.id,items:he,amount:oe,paymentMode:ge,splitPayments:_e,type:"dental",related_id:i.id,status:"paid",discountPercentage:te},Oe=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ze)}),He=await Oe.json();if(!Oe.ok||!He.id)throw new Error(He.message||"Failed to create bill.");(await le(`/api/dental/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:He.id})})).ok||console.error("Failed to update dental record status"),s(De=>De?{...De,status:"billed",billId:He.id}:null);const mt=$?((ye=V.find(De=>De.method==="credit"))==null?void 0:ye.amount)||0:b==="credit"?oe:0;if(mt>0)try{await le(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:mt,related_bill_id:He.id,notes:`Dental Bill #${He.id}${$?" (Split Payment - Credit portion)":""}`})})}catch(De){console.error("Failed to create debt entry:",De)}return a&&a(),He.id}catch(he){return console.error("Billing process failed:",he),p(he.message||"Failed to create bill."),null}finally{x(!1)}},ae=()=>{window.print()},je=async()=>{await ve()&&setTimeout(()=>window.print(),800)};v.useEffect(()=>{t&&n&&(async()=>{d(!0);try{const[ye,he]=await Promise.all([le(`/api/dental/${n}`),le("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!ye.ok)throw new Error("Failed to fetch dental record");const ge=await ye.json(),_e={...ge,patientId:ge.Patient||ge.patientId};if(s(_e),he.ok){const He=await he.json();C(He.upi_id||""),k(He.name||""),I(He.address||""),B(He.notes||"")}const Oe=(_e.selected_procedures||_e.selectedProcedures||[]).map(He=>({...He,price:He.cost,discount_percentage:0}));l(Oe)}catch(ye){console.error("Failed to fetch data:",ye),p(ye.message)}finally{d(!1)}})()},[t,n]);const ue=v.useMemo(()=>o.reduce((W,ye)=>W+(ye.price??0),0),[o]),me=v.useMemo(()=>o.reduce((W,ye)=>{const ge=(ye.price??0)*(ye.discount_percentage??0)/100;return W+ge},0),[o]),oe=v.useMemo(()=>ue-me,[ue,me]),Q=v.useMemo(()=>oe-We,[oe,We]),ie=v.useMemo(()=>Math.abs(Q)<.01,[Q]);v.useEffect(()=>{if($&&V.length>=1&&We===0){const W=[...V];W[0].amount=oe,H(W)}},[$,oe]),v.useEffect(()=>{if(oe>0&&T){const W=`upi://pay?pa=${T}&pn=${encodeURIComponent(P)}&am=${oe.toFixed(2)}&cu=INR`;_(W)}else _("")},[oe,T,P]);const xe=v.useMemo(()=>$?V.some(W=>W.method==="credit"):b==="credit",[$,V,b]);return v.useEffect(()=>{(async()=>{var ye;if(xe&&((ye=i==null?void 0:i.patientId)!=null&&ye.id)){z(!0);try{const he=await le(`/api/patient-debts/${i.patientId.id}/balance`);if(he.ok){const ge=await he.json();se(ge.netDebt||0)}else se(0)}catch{se(0)}finally{z(!1)}}})()},[xe,(ee=i==null?void 0:i.patientId)==null?void 0:ee.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Dental Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Lt,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:c?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3].map(W=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})})]},W))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]})]})]})})]})})}):f?r.jsxs("div",{className:"error-message-box",children:["Error: ",f]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:P||"Clinic Name"}),(O||F)&&r.jsxs("div",{className:"clinic-details-print",children:[O&&r.jsx("span",{className:"small-text clinic-address",children:O}),F&&r.jsx("span",{className:"small-text clinic-notes",children:F})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",((Se=i.patientId)==null?void 0:Se.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",((qe=i.patientId)==null?void 0:qe.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",((Ge=i.patientId)==null?void 0:Ge.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",((Ne=i.patientId)==null?void 0:Ne.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Oa,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"dental-chart-section-modal",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Dental Chart"})}),r.jsx("div",{className:"chart-wrapper-modal",children:r.jsx(wG,{selectedTeeth:[],onToothClick:()=>{},toothConditions:(()=>{const W={};return i.teeth&&i.teeth.forEach(ye=>{ye.procedures.forEach(he=>{var _e,ze;const ge=((_e=i.selected_procedures)==null?void 0:_e.find(Oe=>Oe.id===he))||((ze=i.selectedProcedures)==null?void 0:ze.find(Oe=>Oe.id===he));if(ge&&ge.type&&ge.type!=="general"){W[ye.toothNumber]||(W[ye.toothNumber]=[]);const Oe=`condition-${ge.type}`;W[ye.toothNumber].includes(Oe)||W[ye.toothNumber].push(Oe)}})}),W})(),toothDetails:(()=>{const W={};return i.teeth&&i.teeth.forEach(ye=>{W[ye.toothNumber]||(W[ye.toothNumber]=[]),ye.procedures.forEach(he=>{var _e,ze;const ge=((_e=i.selected_procedures)==null?void 0:_e.find(Oe=>Oe.id===he))||((ze=i.selectedProcedures)==null?void 0:ze.find(Oe=>Oe.id===he));ge&&W[ye.toothNumber].push({name:ge.name,date:new Date(i.date||i.createdAt).toLocaleDateString()})})}),W})()})})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),o.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:o.map((W,ye)=>{const he=W.price??0,ge=he*(W.discount_percentage??0)/100,_e=he-ge;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:W.name}),r.jsx("td",{children:W.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:W.discount_percentage===0?"":W.discount_percentage,onChange:ze=>Fe(ye,parseFloat(ze.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:_e.toFixed(2)})]},ye)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",te.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",me.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",oe.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"12px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px"},children:"Payment Details:"}),$?r.jsx("div",{className:"split-payment-details-print",children:V.map(W=>r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:W.method.toUpperCase()}),r.jsxs("span",{children:["",W.amount.toFixed(2)]})]},W.id))}):r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Mode"}),r.jsx("span",{children:b.toUpperCase()})]})]}),(b==="credit"||$&&V.some(W=>W.method==="credit"))&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px",color:"#e53e3e"},children:"Credit/Debt Information:"}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Credit Amount"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",$?(((ne=V.find(W=>W.method==="credit"))==null?void 0:ne.amount)||0).toFixed(2):oe.toFixed(2)]})]}),(Y??0)>0&&r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(Y??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px",fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((Y??0)+($?((de=V.find(W=>W.method==="credit"))==null?void 0:de.amount)||0:oe)).toFixed(2)]})]})]})]}),S&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!($&&V.some(W=>W.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(Da,{value:S,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",me.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:te===0?"":te,onChange:W=>Re(parseFloat(W.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:g||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",oe.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:S?r.jsxs(r.Fragment,{children:[r.jsx(Da,{value:S,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${$?"active":""}`,onClick:()=>L(!$),disabled:g||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:$?"2px solid #4facfe":"1px solid #ddd",background:$?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:$?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:$?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(Io,{size:14}),"Split Pay"]})]}),$?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(Io,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",oe.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:V.map((W,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:W.method,onChange:he=>K(W.id,"method",he.target.value),className:`split-payment-select ${W.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:W.amount===0?"":W.amount,onChange:he=>K(W.id,"amount",parseFloat(he.target.value)||0),placeholder:"0",className:`split-payment-input ${W.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed"})]}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>Ie(W.id),className:"split-payment-btn split-payment-btn-fill",disabled:g||i.status==="billed",children:"Fill"}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>we(W.id),className:"split-payment-btn split-payment-btn-remove",disabled:g||i.status==="billed",children:r.jsx(Bn,{size:12})})]},W.id))}),V.length<5&&r.jsxs("button",{type:"button",onClick:ce,className:"split-payment-add-btn",disabled:g||i.status==="billed",children:[r.jsx(qn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",We.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(Q)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(Q)<.01?"":Q>0?"":"",Math.abs(Q)<.01?"Balanced":Q>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Q).toFixed(2)]})]}),!ie&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",oe.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:W=>j(W.target.value),className:"payment-mode-select",disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),xe&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),G?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:Y&&Y>0?"#dc3545":"#28a745"},children:["",(Y||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:$?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",($?((Te=V.find(W=>W.method==="credit"))==null?void 0:Te.amount)||0:oe).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((Y||0)+($?((Ee=V.find(W=>W.method==="credit"))==null?void 0:Ee.amount)||0:oe)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ae,className:"secondary-button print-preview-button no-print",disabled:g,children:"Print Preview"}),r.jsx("button",{onClick:je,className:"primary-button",disabled:g||$&&!ie,children:g?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Po,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:ae,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},LB=/^\+?[0-9\s\-().]{7,20}$/,v6e=/^[a-zA-Z\s'-]{2,}$/,b6e=()=>{const t=Mt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState([]),[_,T]=v.useState(!0),[C,P]=v.useState(()=>{const he=localStorage.getItem("dentalNumberingSystem");return he==="fdi"||he==="universal"?he:"universal"});v.useEffect(()=>{localStorage.setItem("dentalNumberingSystem",C)},[C]);const k=Lr();v.useEffect(()=>{k.state&&k.state.patient&&oe(k.state.patient)},[k.state]);const[O,I]=v.useState([]),[F,B]=v.useState([]),[$,L]=v.useState({}),[V,H]=v.useState(""),[te,X]=v.useState(!1),[q,Y]=v.useState("plan"),[se,G]=v.useState([]),[z,ce]=v.useState([]),[we,K]=v.useState(!1),[Ie,We]=v.useState(!1),[Re,Fe]=v.useState(null);v.useEffect(()=>{ae(),ve()},[]);const ve=async()=>{try{const he=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),ge=await le(`/api/patients?${he.toString()}`);if(ge.ok){const _e=await ge.json();S(_e.patients||[])}}catch(he){console.error("Error fetching recent patients",he)}finally{T(!1)}},ae=async()=>{try{const he=await le("/api/dental/procedures");if(he.ok){const ge=await he.json();ce(ge)}}catch(he){console.error("Error fetching procedures",he)}};v.useEffect(()=>{(async()=>{if(!l){G([]),Fe(null),H(""),B([]),L({}),I([]);return}try{const ge=await le(`/api/dental/patient/${l.id}`);if(ge.ok){const _e=await ge.json();G(_e);const ze=new Date().toDateString(),Oe=_e.find(He=>He.status==="draft"&&new Date(He.date||He.createdAt||Date.now()).toDateString()===ze);if(Oe){Fe(Oe.id),H(Oe.notes||"");const He=Oe.selected_procedures.filter(De=>!Oe.teeth.some(Je=>Je.procedures.includes(De.id)));B(He.map(De=>({instanceId:crypto.randomUUID(),procedureId:De.id,name:De.name,price:De.cost,type:De.type})));const nt={},mt=[];Oe.teeth.forEach(De=>{const Je=De.procedures.map(et=>{const ut=Oe.selected_procedures.find(_t=>_t.id===et)||z.find(_t=>_t.id===et);return{instanceId:crypto.randomUUID(),procedureId:et,name:ut?ut.name:et,price:ut?ut.cost:0,type:ut?ut.type:"general"}});Je.length>0&&(nt[De.toothNumber]=Je,mt.push(De.toothNumber))}),L(nt),I(mt)}else Fe(null),H(""),B([]),L({}),I([])}}catch(ge){console.error("Error fetching history",ge)}})()},[l,z]);const je=v.useMemo(()=>zc(async he=>{if(!he.trim()||he.length<2){i([]),o(!1);return}o(!0);try{const ge=await le(`/api/patients?search=${encodeURIComponent(he)}&limit=10`);if(ge.ok){const _e=await ge.json();i(_e.patients||[])}}catch(ge){console.error("Search error:",ge)}finally{o(!1)}},300),[]);v.useEffect(()=>{je(e)},[e,je]);const ue=he=>{const ge=he.target.value;n(ge),g(LB.test(ge)),b(v6e.test(ge)&&!LB.test(ge))},me=async he=>{if(!(!e||he==="phone"&&!p||he==="name"&&!x)){o(!0);try{const _e=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:he==="name"?e:"direct dental",phone:he==="phone"?e:null,age:null,gender:null,token:null})});if(_e.ok){const ze=await _e.json();oe({id:ze.id,name:ze.name,token:ze.token??null,age:ze.age??null,gender:ze.gender??null,phone:ze.phone})}else alert("Failed to create patient")}catch(ge){console.error("Error creating patient:",ge),alert("Error creating patient")}finally{o(!1)}}},oe=he=>{c(he),n(""),i([])},Q=()=>{c(null),I([]),B([]),L({}),H("")},ie=async he=>{if(!l)return;const ge=await le(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)});if(ge.ok)await ge.json(),c(_e=>_e?{..._e,...he}:null);else throw new Error("Failed to update")},[xe,ee]=v.useState(null),Se=he=>{ee(he)},qe=he=>{if(!xe)return;const ge={instanceId:crypto.randomUUID(),procedureId:he.id,name:he.name,price:he.cost,type:he.type};L(_e=>{const ze=_e[xe]||[];return{..._e,[xe]:[...ze,ge]}}),I(_e=>_e.includes(xe)?_e:[..._e,xe]),ee(null)},Ge=()=>{const he={},ge={},_e=(He,nt)=>{he[He]||(he[He]=[]);const mt=`condition-${nt}`;he[He].includes(mt)||he[He].push(mt)},ze=(He,nt)=>{ge[He]||(ge[He]=[]),ge[He].push(nt)};return[...se].sort((He,nt)=>new Date(He.date).getTime()-new Date(nt.date).getTime()).forEach(He=>{He.teeth&&Array.isArray(He.teeth)&&He.teeth.forEach(nt=>{nt.procedures.forEach(mt=>{var Je;let De=(Je=He.selected_procedures)==null?void 0:Je.find(et=>et.id===mt);De||(De=z.find(et=>et.id===mt)),De&&De.type!=="general"?(_e(nt.toothNumber,De.type),ze(nt.toothNumber,{name:De.name,date:new Date(He.date||He.createdAt||0).toLocaleDateString(),recordId:He.id,isPast:!0})):mt&&ze(nt.toothNumber,{name:`Procedure: ${mt}`,date:new Date(He.date||He.createdAt||0).toLocaleDateString(),recordId:He.id,isPast:!0})})})}),Object.keys($).forEach(He=>{const nt=parseInt(He),mt=$[nt];mt&&mt.length>0&&mt.forEach(De=>{De.type!=="general"&&(_e(nt,De.type),ze(nt,{name:De.name,date:"Current",isPast:!1}))})}),{conditions:he,details:ge}},{conditions:Ne,details:ne}=v.useMemo(()=>Ge(),[se,$,z]),de=he=>{const ge=se.find(He=>He.id===he);if(!ge)return;H(ge.notes||"");const _e=ge.selected_procedures.filter(He=>!ge.teeth.some(nt=>nt.procedures.includes(He.id)));B(_e.map(He=>({instanceId:crypto.randomUUID(),procedureId:He.id,name:He.name,price:He.cost,type:He.type})));const ze={},Oe=[];ge.teeth.forEach(He=>{const nt=He.procedures.map(mt=>{const De=ge.selected_procedures.find(Je=>Je.id===mt)||z.find(Je=>Je.id===mt);return{instanceId:crypto.randomUUID(),procedureId:mt,name:De?De.name:mt,price:De?De.cost:0,type:De?De.type:"general"}});nt.length>0&&(ze[He.toothNumber]=nt,Oe.push(He.toothNumber))}),L(ze),I(Oe),Y("plan")},Te=(he,ge)=>{ge?(L(_e=>{const ze={..._e};return ze[ge]=(_e[ge]||[]).filter(Oe=>Oe.instanceId!==he),ze[ge].length===0&&delete ze[ge],ze}),I(_e=>_e)):B(_e=>_e.filter(ze=>ze.instanceId!==he))},Ee=(he,ge,_e)=>{_e?L(ze=>({...ze,[_e]:(ze[_e]||[]).map(Oe=>Oe.instanceId===he?{...Oe,price:ge}:Oe)})):B(ze=>ze.map(Oe=>Oe.instanceId===he?{...Oe,price:ge}:Oe))},W=()=>{window.print()},ye=async(he=!0)=>{var ge;if(l){X(!0);try{const ze=[...F,...Object.values($).flat()].map(De=>({id:De.procedureId,name:De.name,cost:De.price,type:De.type})),He=Object.keys($).map(Number).map(De=>({toothNumber:De,procedures:($[De]||[]).map(Je=>Je.procedureId),notes:V})),nt={patientId:l.id,teeth:He,selectedProcedures:ze,notes:V};let mt;if(Re?((ge=se.find(Je=>Je.id===Re))==null?void 0:ge.status)==="draft"?mt=await le(`/api/dental/${Re}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)}):mt=await le("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)}):mt=await le("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)}),mt.ok){const De=await mt.json();Fe(De.id);const Je=await le(`/api/dental/patient/${l.id}`);if(Je.ok){const et=await Je.json();G(et)}he?We(!0):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save dental record.")}catch(_e){console.error(_e),alert("Error saving record.")}finally{X(!1)}}};return r.jsxs("div",{className:"dental-page-container printable-section",children:[r.jsxs("header",{className:"dental-header",children:[r.jsxs("div",{className:"dental-title-group",children:[r.jsx(Oa,{className:"dental-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"dental-title",children:"Dental Report"}),r.jsx("p",{className:"dental-subtitle",children:"Create new dental records and bills"})]}),r.jsxs("div",{className:"numbering-toggle",style:{marginLeft:"auto",marginRight:"16px",display:"flex",gap:"4px",background:"var(--dp-bg-sec)",padding:"4px",borderRadius:"8px"},children:[r.jsx("button",{onClick:()=>P("universal"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="universal"?"var(--dp-card-bg)":"transparent",boxShadow:C==="universal"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="universal"?"var(--dp-text)":"var(--dp-text-sec)"},children:"Universal"}),r.jsx("button",{onClick:()=>P("fdi"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="fdi"?"var(--dp-card-bg)":"transparent",boxShadow:C==="fdi"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="fdi"?"var(--dp-text)":"var(--dp-text-sec)"},children:"FDI"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(Xs,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:Q,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Lt,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(Mn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"dental-search-input header-input",value:e,onChange:ue}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(he=>r.jsxs("div",{onClick:()=>oe(he),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:he.name}),r.jsxs("div",{className:"patient-meta",children:[he.age," yrs / ",he.gender,"  ",he.phone]})]}),r.jsx(Kn,{size:16,color:"var(--dp-text-sec)"})]},he.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>me(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"dental-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container",children:[!l&&r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--dp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Mn,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"dental-search-input",value:e,onChange:ue,autoFocus:!0}),s&&r.jsx("div",{className:"search-spinner"})]}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(he=>r.jsxs("div",{onClick:()=>oe(he),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:he.name}),r.jsxs("div",{className:"patient-meta",children:[he.age," yrs / ",he.gender,"  ",he.phone]})]}),r.jsx(Kn,{size:18,color:"var(--dp-text-sec)"})]},he.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{style:{color:"var(--dp-text-sec)",marginBottom:"15px"},children:['No patients found matching "',e,'".']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:(p||x)&&r.jsxs("button",{type:"button",onClick:()=>me(p?"phone":"name"),className:"register-new-btn",style:{backgroundColor:"var(--dp-card-bg)",border:"1px solid var(--dp-primary)",padding:"8px 16px",borderRadius:"8px"},children:['Create "',e,'"']})})]}),!l&&r.jsx("div",{style:{marginTop:"32px"},children:r.jsx("button",{onClick:()=>K(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage Procedures"})}),!l&&(_||j.length>0)&&r.jsxs("div",{className:"recent-registered-section",children:[r.jsx("div",{className:"recent-registered-label",children:"Recent Patients"}),r.jsx("div",{className:"recent-list",children:_?[1,2,3].map(he=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:20})]}),r.jsx("div",{className:"recent-info",children:r.jsx(Z,{width:80,height:14})})]},he)):j.map(he=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>oe(he),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:he.name||"New Patient"}),he.token&&r.jsxs("span",{className:"recent-token",children:["#",he.token]})]}),r.jsxs("div",{className:"recent-info",children:[he.age?`${he.age} yrs`:"",he.age&&he.gender?" / ":"",he.gender||""]})]},he.id))})]})]}),l&&r.jsx("div",{className:"dental-workspace",children:r.jsxs("div",{className:"dental-grid",children:[r.jsxs("div",{className:"chart-section",children:[r.jsx("div",{className:"dental-card chart-card-scroll",children:r.jsx(wG,{selectedTeeth:O,toothConditions:Ne,toothDetails:ne,onToothClick:Se,onEditPastRecord:de,onPrint:W,numberingSystem:C})}),r.jsxs("div",{className:"dental-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("h4",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>ye(!1),disabled:te,title:"Save notes and procedures without billing",children:[r.jsx(as,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:V,onChange:he=>H(he.target.value)})]})]}),r.jsx("div",{className:"dental-card procedures-section",children:r.jsxs("div",{className:"treatment-plan-container",style:{borderTop:"none"},children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{onClick:()=>Y("plan"),className:q==="plan"?"active":"",children:"Treatment Plan"}),r.jsx("button",{onClick:()=>Y("history"),className:q==="history"?"active":"",children:"Visit History"})]}),r.jsx("div",{className:"treatment-plan-list custom-scrollbar",children:q==="plan"?r.jsx(r.Fragment,{children:F.length===0&&Object.keys($).length===0?r.jsx("div",{className:"no-print",style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"Select a tooth to add procedures."}):r.jsxs(r.Fragment,{children:[F.length>0&&r.jsxs("div",{className:"plan-group",children:[r.jsx("h4",{children:"General"}),F.map(he=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:he.name,children:he.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:he.price,onChange:ge=>Ee(he.instanceId,parseFloat(ge.target.value)||0),className:"cost-input"}),r.jsx("button",{onClick:()=>Te(he.instanceId),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Lt,{size:14})})]})]},he.instanceId))]}),Object.entries($).map(([he,ge])=>ge.length===0?null:r.jsxs("div",{className:"plan-group",children:[r.jsxs("h4",{children:["Tooth ",xb(parseInt(he),C)]}),ge.map(_e=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:_e.name,children:_e.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:_e.price,onChange:ze=>Ee(_e.instanceId,parseFloat(ze.target.value)||0,parseInt(he)),className:"cost-input"}),r.jsx("button",{onClick:()=>Te(_e.instanceId,parseInt(he)),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Lt,{size:14})})]})]},_e.instanceId))]},he))]})}):r.jsx("div",{className:"history-list",children:se.length===0?r.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"No past visits found."}):se.map(he=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(he.date).toLocaleDateString()}),r.jsx("span",{className:"record-status",children:he.status})]}),r.jsxs("div",{className:"history-record-body",children:[he.teeth.map(ge=>r.jsxs("div",{className:"history-tooth-group",children:[r.jsxs("strong",{children:["Tooth ",xb(ge.toothNumber,C),":"]})," ",ge.procedures.map(_e=>{const ze=he.selected_procedures.find(Oe=>Oe.id===_e)||z.find(Oe=>Oe.id===_e);return ze?ze.name:_e}).join(", ")]},ge.toothNumber)),he.notes&&r.jsx("p",{className:"history-notes",children:r.jsxs("em",{children:["Notes: ",he.notes]})}),he.status==="billed"&&r.jsx("div",{className:"history-record-actions mt-3",children:r.jsxs("button",{onClick:()=>{Fe(he.id),We(!0)},className:"view-bill-btn",children:[r.jsx(Oa,{size:14})," View Bill"]})})]})]},he.id))})}),r.jsx("div",{className:"action-footer",children:r.jsx("button",{onClick:()=>ye(!0),className:"save-btn",disabled:te||F.length===0&&Object.keys($).length===0,children:te?"Saving...":"Save & Bill"})})]})})]})}),d&&l&&r.jsx(JH,{patient:l,onClose:()=>f(!1),onSave:ie}),we&&r.jsx(g6e,{onClose:()=>K(!1),onUpdate:ae}),xe!==null&&r.jsx(y6e,{toothNumber:xe,procedures:z.map(he=>({id:he.id,name:he.name,cost:he.cost,type:he.type})),history:ne[xe]||[],onSelect:qe,onClose:()=>ee(null),numberingSystem:C}),r.jsx(x6e,{isOpen:Ie,recordId:Re,onClose:()=>{We(!1),Q()},onBillingComplete:()=>{}})]})},j6e=()=>{var xe,ee,Se,qe,Ge;const t=Mt(),e=Lr(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(""),[P,k]=v.useState(""),[O,I]=v.useState(""),[F,B]=v.useState(!1),[$,L]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V=()=>{$.length<5&&L(Ne=>[...Ne,{id:Date.now().toString(),method:"cash",amount:0}])},H=Ne=>{$.length>2&&L(ne=>ne.filter(de=>de.id!==Ne))},te=(Ne,ne,de)=>{L(Te=>{const Ee=Te.map(W=>W.id===Ne?ne==="method"?{...W,method:de}:{...W,amount:Math.max(0,de)}:W);if(ne==="amount"&&Ee.length===2){const ye=Ee.findIndex(_e=>_e.id===Ne)===0?1:0,he=Math.max(0,de),ge=je-he;Ee[ye]={...Ee[ye],amount:Math.max(0,ge)}}return Ee})},X=(Ne,ne)=>{const de=$.filter(Ee=>Ee.id!==Ne).reduce((Ee,W)=>Ee+W.amount,0),Te=Math.max(0,ne-de);L(Ee=>Ee.map(W=>W.id===Ne?{...W,amount:Te}:W))},[q,Y]=v.useState(0),se=v.useRef(!1),[G,z]=v.useState(null),[ce,we]=v.useState(!1),K=Ne=>{const ne=Math.max(0,Math.min(100,isNaN(Ne)?0:Ne));se.current=!0,Y(ne);const de=i.map(Te=>({...Te,discount_percentage:ne}));s(de)},Ie=(Ne,ne)=>{const de=[...i];de[Ne].discount_percentage=isNaN(ne)?0:ne,s(de)};v.useEffect(()=>{if(se.current){se.current=!1;return}const Ne=i.reduce((Te,Ee)=>Te+(Ee.price??0),0);if(Ne===0){Y(0);return}const de=i.reduce((Te,Ee)=>{const ye=(Ee.price??0)*((Ee.discount_percentage??0)/100);return Te+ye},0)/Ne*100;Y(Te=>Math.abs(Te-de)>.01?de:Te)},[i]);const We=async()=>{if(!n)return d("No record data available to bill."),null;if(i.length===0)return d("Cannot bill an empty procedure list."),null;p(!0),d(null);try{const Ne=i.map(ye=>{const he=ye.price,ge=he*((ye.discount_percentage??0)/100),_e=he-ge;return{name:ye.name,price:ye.price,quantity:1,total:_e,item_id:ye.id||`proc_${Date.now()}`,type:"service",discount_percentage:ye.discount_percentage??0}}),ne={patientId:n.patientId.id,items:Ne,amount:je,paymentMode:F?"split":g,type:"dental",related_id:n.id,status:"paid",discountPercentage:q};F&&(ne.splitPayments=$.map(ye=>({method:ye.method,amount:ye.amount})));const de=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)}),Te=await de.json();if(!de.ok||!Te.id)throw new Error(Te.message||"Failed to create bill.");(await le(`/api/dental/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:Te.id})})).ok||console.error("Failed to update dental record status"),a(ye=>ye?{...ye,status:"billed",billId:Te.id}:null);const W=F?$.filter(ye=>ye.method==="credit").reduce((ye,he)=>ye+he.amount,0):g==="credit"?je:0;if(W>0)try{await le(`/api/patient-debts/${n.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:W,related_bill_id:Te.id,notes:`Dental Bill #${Te.id}`})})}catch(ye){console.error("Failed to create debt entry:",ye)}return Te.id}catch(Ne){return console.error("Billing process failed:",Ne),d(Ne.message||"Failed to create bill."),null}finally{p(!1)}},Re=()=>{window.print()},Fe=async()=>{await We()&&setTimeout(()=>window.print(),500)};v.useEffect(()=>{const Ne=e.pathname.split("/"),ne=Ne[Ne.length-1];ne?(async()=>{l(!0);try{const[Te,Ee]=await Promise.all([le(`/api/dental/${ne}`),le("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!Te.ok)throw new Error("Failed to fetch dental record");const W=await Te.json(),ye={...W,patientId:W.Patient||W.patientId};if(a(ye),Ee.ok){const _e=await Ee.json();_(_e.upi_id||""),C(_e.name||""),k(_e.address||""),I(_e.notes||"")}const ge=(ye.selected_procedures||ye.selectedProcedures||[]).map(_e=>({..._e,price:_e.cost,discount_percentage:0}));s(ge)}catch(Te){console.error("Failed to fetch data:",Te),d(Te.message)}finally{l(!1)}})():(d("No record ID provided."),l(!1))},[e.pathname]);const ve=v.useMemo(()=>i.reduce((Ne,ne)=>Ne+(ne.price??0),0),[i]),ae=v.useMemo(()=>i.reduce((Ne,ne)=>{const Te=(ne.price??0)*(ne.discount_percentage??0)/100;return Ne+Te},0),[i]),je=v.useMemo(()=>ve-ae,[ve,ae]),ue=v.useMemo(()=>$.reduce((Ne,ne)=>Ne+ne.amount,0),[$]),me=v.useMemo(()=>je-ue,[je,ue]),oe=v.useMemo(()=>Math.abs(me)<.01,[me]),Q=v.useMemo(()=>F?$.some(Ne=>Ne.method==="credit"&&Ne.amount>0):g==="credit",[F,$,g]),ie=v.useMemo(()=>F?$.filter(Ne=>Ne.method==="credit").reduce((Ne,ne)=>Ne+ne.amount,0):g==="credit"?je:0,[F,$,g,je]);return v.useEffect(()=>{if(je>0&&S){const Ne=`upi://pay?pa=${S}&pn=${encodeURIComponent(T)}&am=${je.toFixed(2)}&cu=INR`;j(Ne)}else j("")},[je,S,T]),v.useEffect(()=>{(async()=>{var ne;if(Q&&((ne=n==null?void 0:n.patientId)!=null&&ne.id)){we(!0);try{const de=await le(`/api/patient-debts/${n.patientId.id}/balance`);if(de.ok){const Te=await de.json();z(Te.netDebt||0)}else z(0)}catch{z(0)}finally{we(!1)}}})()},[Q,(xe=n==null?void 0:n.patientId)==null?void 0:xe.id]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(Ne=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})})]},Ne))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(Z,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T||"Clinic Name"}),(P||O)&&r.jsxs("div",{className:"clinic-details-print",children:[P&&r.jsx("span",{className:"small-text clinic-address",children:P}),O&&r.jsx("span",{className:"small-text clinic-notes",children:O})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",((ee=n.patientId)==null?void 0:ee.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",((Se=n.patientId)==null?void 0:Se.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date(n.date||n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Dental Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Kn,{size:16})," Patient Name"]})," ",((qe=n.patientId)==null?void 0:qe.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Va,{size:16})," Token"]})," ",((Ge=n.patientId)==null?void 0:Ge.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Oa,{size:16})," Record ID"]})," ",n.id.substring(n.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oa,{size:16})," Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((Ne,ne)=>{const de=Ne.price??0,Te=de*(Ne.discount_percentage??0)/100,Ee=de-Te;return r.jsxs("tr",{children:[r.jsx("td",{children:ne+1}),r.jsx("td",{children:Ne.name}),r.jsx("td",{children:Ne.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:Ne.discount_percentage===0?"":Ne.discount_percentage,onChange:W=>Ie(ne,parseFloat(W.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Ee.toFixed(2)})]},ne)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",q.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",je.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:F?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),F&&$.map((Ne,ne)=>Ne.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:Ne.method==="cash"?"Cash":Ne.method==="upi"?"UPI":Ne.method==="card"?"Card":Ne.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",Ne.amount.toFixed(2)]})]},ne))]}),G!==null&&(G>0||Q)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(G??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(G??0).toFixed(2)]})]}),Q&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((G??0)+(Q?ie:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Da,{value:b,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:q===0?"":q,onChange:Ne=>K(parseFloat(Ne.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",je.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(Da,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>B(!F),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:F?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:F?"rgba(79, 172, 254, 0.1)":"transparent",color:F?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Io,{size:14}),"Split"]})]}),F?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",je.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:$.map((Ne,ne)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ne+1}),r.jsxs("select",{value:Ne.method,onChange:de=>te(Ne.id,"method",de.target.value),className:`split-payment-select ${Ne.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Ne.amount||"",onChange:de=>te(Ne.id,"amount",parseFloat(de.target.value)||0),className:`split-payment-input ${Ne.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),$.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>X(Ne.id,je),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>H(Ne.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Bn,{size:12})})]})]},Ne.id))}),$.length<5&&r.jsxs("button",{type:"button",onClick:V,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(qn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${oe?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[oe?"":me>0?"":"",oe?"Balanced":me>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(me).toFixed(2)]})]}),!oe&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",je.toFixed(2)]})]})]}):r.jsxs("select",{value:g,onChange:Ne=>x(Ne.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Q&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),ce?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:G&&G>0?"#dc3545":"#28a745"},children:["",(G||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ie.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((G||0)+ie).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:n.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Re,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:Fe,className:"primary-button",disabled:f,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Po,{size:20})," Bill Generated"]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})]}):r.jsx("div",{className:"error-message-box",children:"No record found."})},w6e=()=>{const t=Mt(),e=Lr(),[n,a]=v.useState(""),[i,s]=v.useState([]),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[S,_]=v.useState(!1),[T,C]=v.useState("idle"),[P,k]=v.useState(null),[O,I]=v.useState(""),F=v.useMemo(()=>zc(async ve=>{if(ve.trim().length<2){s([]),l(!1);return}l(!0);try{const ae=new URLSearchParams({search:encodeURIComponent(ve),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),je=await le(`/api/patients?${ae.toString()}`);if(je.ok){const ue=await je.json();s(ue.patients||[])}}catch(ae){console.error("Search failed",ae)}finally{l(!1)}},300),[]),B=ve=>{const ae=ve.target.value;a(ae),ae.length>=2?(l(!0),F(ae)):(s([]),l(!1))},$=v.useCallback(async ve=>{_(!0);try{const ae=await le(`/api/patient-files/${ve}`);if(ae.ok){const je=await ae.json();x(je)}}catch(ae){console.error("Failed to fetch files",ae)}finally{_(!1)}},[]),L=ve=>{d({id:ve.id,name:ve.name,age:ve.age,gender:ve.gender,phone:ve.phone,token:ve.token}),a(""),I(""),s([]),k(null),C("idle"),p([]),$(ve.id)},V=()=>{d(null),p([]),x([]),C("idle")};Ce.useEffect(()=>{if(e.state&&e.state.patient){const ve=e.state.patient;L(ve)}},[e.state]);const H=ve=>{if(ve.target.files){const ae=Array.from(ve.target.files);p(je=>[...je,...ae]),C("idle")}},te=ve=>{p(ae=>ae.filter((je,ue)=>ue!==ve))},X=async ve=>{if(confirm("Are you sure you want to delete this file?"))try{(await le(`/api/patient-files/${ve}`,{method:"DELETE"})).ok?x(je=>je.filter(ue=>ue.id!==ve)):alert("Failed to delete file.")}catch(ae){console.error("Delete error",ae),alert("Error deleting file.")}},q=ve=>ve.startsWith("image/")?r.jsx(jI,{size:20}):ve==="application/pdf"?r.jsx(Oa,{size:20}):ve.startsWith("video/")?r.jsx(yX,{size:20}):ve.startsWith("audio/")?r.jsx(nJ,{size:20}):r.jsx(eC,{size:20}),Y=ve=>{if(ve===0)return"0 Bytes";const ae=1024,je=["Bytes","KB","MB","GB"],ue=Math.floor(Math.log(ve)/Math.log(ae));return parseFloat((ve/Math.pow(ae,ue)).toFixed(2))+" "+je[ue]},se=async()=>{if(!(!c||f.length===0)){j(!0),k(null),C("idle");try{const ve=new FormData;f.forEach(je=>{ve.append("files",je)});const ae=await le(`/api/patient-files/${c.id}`,{method:"POST",body:ve});if(ae.ok){C("success");const je=await ae.json();je.files&&x(ue=>[...je.files,...ue]),setTimeout(()=>{p([]),C("idle")},1500)}else throw new Error("Upload failed")}catch(ve){console.error("Upload error",ve),k("Failed to upload files. Please try again."),C("error")}finally{j(!1)}}},[G,z]=v.useState(null),[ce,we]=v.useState(""),K=v.useRef(null),Ie=()=>{K.current&&(K.current.value="",K.current.click())},We=ve=>{z(ve.id),we(ve.original_name)},Re=()=>{z(null),we("")},Fe=async ve=>{if(ce.trim())try{(await le(`/api/patient-files/${ve}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:ce})})).ok?(x(je=>je.map(ue=>ue.id===ve?{...ue,original_name:ce}:ue)),z(null)):alert("Failed to rename file.")}catch(ae){console.error("Rename error",ae),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(rn,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Patient Files"})]})}),c?r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"selected-patient-header",children:[r.jsx("div",{className:"patient-avatar",children:c.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"selected-patient-info",children:[r.jsx("h2",{className:"selected-patient-name",children:c.name}),r.jsxs("div",{className:"selected-patient-details",children:[r.jsxs("span",{children:["Token: #",c.token||"NA"]}),c.gender&&r.jsxs("span",{children:[" ",c.gender]}),c.age&&r.jsxs("span",{children:[" ",c.age," yrs"]}),c.phone&&r.jsxs("span",{children:[" ",c.phone]})]}),r.jsx("input",{ref:K,type:"file",multiple:!0,onChange:H,style:{display:"none"}})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Ie,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx(bE,{size:18}),r.jsx("span",{children:"Upload"})]}),r.jsx("button",{onClick:V,className:"secondary-btn change-patient-btn",children:"Change Patient"})]})]}),(g.length>0||S)&&r.jsxs("div",{className:"existing-files-section mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(eC,{className:"text-indigo-500",size:20}),"Uploaded Files (",g.length,")"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(Mn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search in Drive...",value:O,onChange:ve=>I(ve.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),S?r.jsx("div",{className:"flex justify-center p-8",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(Z,{width:300,height:20}),r.jsx(Z,{width:300,height:20}),r.jsx(Z,{width:300,height:20})]})}):r.jsxs("div",{className:"file-grid",children:[g.filter(ve=>ve.original_name.toLowerCase().includes(O.toLowerCase())).map(ve=>{const ae=ve.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[ae?r.jsx("img",{src:ve.url,alt:ve.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:q(ve.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:ve.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-icon-btn download",title:"Download",children:r.jsx(Bz,{size:18})}),r.jsx("button",{onClick:()=>We(ve),className:"action-icon-btn rename",title:"Rename",children:r.jsx(fJ,{size:18})}),r.jsx("button",{onClick:()=>X(ve.id),className:"action-icon-btn delete",title:"Delete",children:r.jsx(Bn,{size:18})})]})]}),r.jsx("div",{className:"file-card-meta",children:G===ve.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:ce,onChange:je=>we(je.target.value),className:"rename-input",autoFocus:!0,onKeyDown:je=>{je.key==="Enter"&&Fe(ve.id),je.key==="Escape"&&Re()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>Fe(ve.id),className:"icon-btn text-green-600",children:r.jsx(Po,{size:14})}),r.jsx("button",{onClick:Re,className:"icon-btn text-red-500",children:r.jsx(Lt,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:ae?r.jsx(jI,{size:16,className:"text-purple-500"}):q(ve.mime_type)}),r.jsx("a",{href:ve.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:ve.original_name,children:ve.original_name})]})})]},ve.id)}),g.filter(ve=>ve.original_name.toLowerCase().includes(O.toLowerCase())).length===0&&O&&r.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(Mn,{size:48,className:"text-slate-200"}),r.jsxs("p",{children:['No files found matching "',O,'"']})]})})]})]}),(f.length>0||T==="success"||P)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:f.length>0?"Pending Uploads":"Upload Status"}),P&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(Xr,{size:20}),P]}),T==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Po,{size:20}),"Files uploaded successfully!"]}),f.length>0&&r.jsx("div",{className:"file-list",children:f.map((ve,ae)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(eC,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:ve.name,children:ve.name}),r.jsx("div",{className:"file-size",children:Y(ve.size)})]}),r.jsx("button",{onClick:()=>te(ae),className:"remove-file-btn",title:"Remove file",children:r.jsx(Lt,{size:16})})]},ae))}),f.length>0&&r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{onClick:()=>p([]),className:"secondary-btn",disabled:b,children:"Clear"}),r.jsx("button",{onClick:se,className:"primary-btn",disabled:b,children:b?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx(bE,{size:18}),"Upload ",f.length," File",f.length!==1?"s":""]})})]})]})]}):r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-slate-700",children:[r.jsx(Mn,{className:"text-indigo-500"}),"Search Patient"]}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Mn,{className:"search-icon-files",size:20}),r.jsx("input",{type:"text",placeholder:"Enter patient name, phone, or token...",value:n,onChange:B,className:"search-input",autoFocus:!0})]}),o?r.jsx("div",{className:"patient-results-list",children:[1,2,3].map(ve=>r.jsxs("div",{className:"patient-result-item",style:{cursor:"default"},children:[r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:100,height:16})]},ve))}):i.length>0&&r.jsx("ul",{className:"patient-results-list",children:i.map(ve=>r.jsxs("li",{className:"patient-result-item",onClick:()=>L(ve),children:[r.jsxs("div",{children:[r.jsx("div",{className:"patient-name-text",children:ve.name}),r.jsxs("div",{className:"patient-meta",children:[r.jsxs("span",{children:["#",ve.token||"N/A"]}),ve.gender&&r.jsx("span",{children:ve.gender}),ve.age&&r.jsxs("span",{children:[ve.age," yrs"]})]})]}),r.jsx("div",{className:"patient-phone",children:ve.phone})]},ve.id))}),n.length>=2&&!o&&i.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"30px",color:"#94a3b8"},children:['No patients found matching "',n,'"']})]})]})},wO=v.lazy(()=>ON(()=>import("./AddPatientPage-JtwODJpc.js"),__vite__mapDeps([2,3]))),FB=v.lazy(()=>ON(()=>import("./EditComplaintPage-Bw9Fp656.js"),__vite__mapDeps([0,1])));function N6e(){const[t,e]=v.useState(!1),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),f=P=>{a(P),e(!0),P.role==="admin"&&!P.has_seen_tutorial&&d(!0)},p=()=>{e(!1),a(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};v.useEffect(()=>{const P=localStorage.getItem("authToken"),k=localStorage.getItem("currentUser");if(P&&k)try{const O=JSON.parse(k);a(O),e(!0),O.role==="admin"&&!O.has_seen_tutorial&&d(!0)}catch(O){console.error("Error parsing stored user data:",O),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}s(!1)},[]);const{data:g}=tOe(t&&!!n);v.useEffect(()=>{g?l(g):t||l(null)},[g,t]);const[x,b]=v.useState(null),[j,S]=v.useState(!1);v.useEffect(()=>{const P=k=>{k.preventDefault(),b(k),S(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",P),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),S(!1)),()=>{window.removeEventListener("beforeinstallprompt",P)}},[]),v.useEffect(()=>{const P=window.matchMedia("(prefers-color-scheme: dark)"),k=()=>{P.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return k(),P.addEventListener("change",k),()=>{P.removeEventListener("change",k),document.body.classList.remove("dark-mode")}},[]);const _=v.useCallback(async()=>{if(!x){console.log("Install prompt event not available.");return}const P=x;P.prompt();const{outcome:k}=await P.userChoice;console.log(`User response to the install prompt: ${k}`),b(null),S(!1)},[x]),T=async()=>{if(n)try{(await le(`/api/users/${n.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(a(k=>k?{...k,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...n,has_seen_tutorial:!0})),d(!1)):console.error("Failed to update tutorial status on backend.")}catch(P){console.error("Error marking tutorial as seen:",P)}};return i?r.jsx(Tm,{}):r.jsx(VW,{clientId:"277898779560-33obduhn8r758rini4qagetdrupvisri.apps.googleusercontent.com",children:r.jsx(NK,{children:r.jsx(jK,{children:r.jsx(wK,{children:r.jsxs(cK,{children:[r.jsx(bK,{children:r.jsxs(Sm,{children:[r.jsx(xt,{path:"/login",element:t?r.jsx(nn,{to:"/dashboard"}):r.jsx(TOe,{onLoginSuccess:f})}),r.jsx(xt,{path:"/register",element:t?r.jsx(nn,{to:"/dashboard"}):r.jsx(kOe,{})}),r.jsx(xt,{path:"/handle-complaint-url",element:t?r.jsx(aRe,{}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/live-api",element:t?r.jsx(Wme,{}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/create-lab-order",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(XH,{currentUser:n})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/manage-admission",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(TM,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/lab/report/:orderId",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(EB,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/lab/enter-report/:orderId",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(EB,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/add-patient",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(v.Suspense,{fallback:r.jsx(Tm,{}),children:r.jsx(wO,{})})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/billing",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(rIe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-complaint/:recordId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(Tm,{}),children:r.jsx(FB,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-complaint/patient/:patientId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(Tm,{}),children:r.jsx(FB,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-pharmacy-order/:orderId",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(bG,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/guide",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(p6e,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/*",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:S6e(n.role,n,le)}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/lab/view-report/:orderId",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(fIe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/lab/search-report",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(pIe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/lab-reports",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(mIe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/pharmacy-orders",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(aIe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(jG,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory/add",element:t&&n?r.jsx(nn,{to:"/dashboard/purchase",replace:!0}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/dental",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(b6e,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/medical",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(uG,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/dental-billing/:id",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(j6e,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory/edit/:id",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(vG,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/lab-inventory",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(AM,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/complaints",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ZMe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/admission-bill/:billId",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(PB,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/admission-billing",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(PB,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/start-subscription/:patientId",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(EIe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/start-clinic-subscription",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(MIe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/refill-reminders",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(rRe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/create-custom-bill",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(QH,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/pharmacy-billing/:orderId",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(qRe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/lab-billing/:orderId",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(URe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/doctor-billing/:queueId",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(HRe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/custom-tables",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(S4e,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/custom-tables/:id",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(_4e,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(C4e,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/new",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RB,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/:id",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(A4e,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/:id/edit",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RB,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/analysis",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(N4e,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/clinic-hub",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(GRe,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/files",element:t&&n?r.jsx(_n,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(w6e,{})}):r.jsx(nn,{to:"/login"})}),r.jsx(xt,{path:"*",element:r.jsx(nn,{to:t?"/dashboard":"/login"})})]})}),c&&(n==null?void 0:n.role)==="admin"&&r.jsx(tRe,{onClose:()=>d(!1),onMarkAsSeen:T}),t&&n&&r.jsx(_6e,{user:n}),t&&n&&r.jsx(RPe,{user:n})]})})})})})}const S6e=(t,e,n)=>{switch(t){case"superadmin":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(XIe,{})}),r.jsx(xt,{path:"clinic-subscriptions",element:r.jsx(PIe,{})}),r.jsx(xt,{path:"clinic-subscriptions/add",element:r.jsx(OIe,{})}),r.jsx(xt,{path:"clinic-subscriptions/edit/:id",element:r.jsx(DIe,{})}),r.jsx(xt,{path:"users",element:r.jsx(IIe,{})})," ",r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(iDe,{})}),r.jsx(xt,{path:"search-patient",element:r.jsx(mv,{})}),r.jsx(xt,{path:"patients",element:r.jsx(xO,{})}),r.jsx(xt,{path:"doctor",element:r.jsx(Vj,{})}),r.jsx(xt,{path:"staff",element:r.jsx(xIe,{fetchWithAuth:n})}),r.jsx(xt,{path:"staff/add",element:r.jsx(XMe,{clinicId:e==null?void 0:e.clinic_id})}),r.jsx(xt,{path:"staff/edit/:id",element:r.jsx(JMe,{})}),r.jsx(xt,{path:"roles",element:r.jsx(E4e,{})}),r.jsx(xt,{path:"patients/add",element:r.jsx(v.Suspense,{fallback:r.jsx(Tm,{}),children:r.jsx(wO,{})})}),r.jsx(xt,{path:"inventory",element:r.jsx(xG,{})}),r.jsx(xt,{path:"inventory/edit/:id",element:r.jsx(vG,{})}),r.jsx(xt,{path:"distributors",element:r.jsx(OB,{})}),r.jsx(xt,{path:"patient-debts",element:r.jsx(IB,{})})," ",r.jsx(xt,{path:"purchase",element:r.jsx(DB,{})})," ",r.jsx(xt,{path:"queue",element:r.jsx(Vj,{})}),r.jsx(xt,{path:"subscriptions",element:r.jsx(TIe,{})}),r.jsx(xt,{path:"subscriptions/add",element:r.jsx(kIe,{})}),r.jsx(xt,{path:"subscriptions/edit/:id",element:r.jsx(AIe,{})}),r.jsx(xt,{path:"manage-admission",element:r.jsx(TM,{})}),r.jsx(xt,{path:"reception",element:r.jsx(xB,{currentUser:e})}),r.jsx(xt,{path:"lab",element:r.jsx(TB,{})}),r.jsx(xt,{path:"pharmacy-queue",element:r.jsx(kB,{})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(nn,{to:"search-patient",replace:!0})}),r.jsx(xt,{path:"search-patient",element:r.jsx(mv,{})}),r.jsx(xt,{path:"queue",element:r.jsx(Vj,{})}),r.jsx(xt,{path:":patientId",element:r.jsx(Vj,{})}),r.jsx(xt,{path:"add-patient",element:r.jsx(v.Suspense,{fallback:r.jsx(Tm,{}),children:r.jsx(wO,{})})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(xB,{currentUser:e})}),r.jsx(xt,{path:"all-patients",element:r.jsx(xO,{})}),r.jsx(xt,{path:"search-patient",element:r.jsx(mv,{})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(TB,{});case"pharmacy":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(kB,{})}),r.jsx(xt,{path:"inventory",element:r.jsx(jG,{})}),r.jsx(xt,{path:"settings",element:r.jsx(QMe,{})}),r.jsx(xt,{path:"add-order",element:r.jsx(iIe,{})}),r.jsx(xt,{path:"edit-pharmacy-order/:orderId",element:r.jsx(bG,{})}),r.jsx(xt,{path:"orders/:orderId",element:r.jsx(bIe,{})}),r.jsx(xt,{path:"search-patient-records",element:r.jsx(mv,{})}),r.jsx(xt,{path:"distributors",element:r.jsx(OB,{})}),r.jsx(xt,{path:"patient-debts",element:r.jsx(IB,{})})," ",r.jsx(xt,{path:"purchase",element:r.jsx(DB,{})})," ",r.jsx(xt,{path:"*",element:r.jsx(nn,{to:"/dashboard",replace:!0})})]});default:return r.jsxs("div",{children:["Unknown role (",t,") or dashboard not implemented."]},t)}},_n=({user:t,onLogout:e,children:n,showInstallPrompt:a,onInstallClick:i,clinicProPlanStatus:s})=>{const o=Mt(),[l,c]=v.useState(!1),[d,f]=v.useState(window.innerWidth<=768),[p,g]=v.useState(null),[x,b]=v.useState(!1);v.useEffect(()=>BE.subscribe(T=>{b(T)}),[]),v.useEffect(()=>{const T=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const C=await le("/api/clinics/settings");if(C.ok){const P=await C.json();g(P.logoUrl)}else console.error("Failed to fetch clinic details for display:",C.statusText),g(null)}catch(C){console.error("Error fetching clinic details for display:",C),g(null)}else g(null)})()},[t==null?void 0:t.clinic_id]);const j=()=>{c(!l)},{toggleCommandBar:S,isOpen:_}=Oc();return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),o("/dashboard")},className:"logo-container",children:r.jsx("img",{src:p||"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("span",{className:"app-title-link",children:"Newtons Ai"}),r.jsxs("span",{className:"user-role-panel",children:["(",t.role.charAt(0).toUpperCase()+t.role.slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[a&&r.jsxs("button",{onClick:i,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),r.jsxs("a",{href:"https://store.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"shop-button",title:"Visit Store",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),r.jsx("span",{children:"Shop"})]}),!d&&r.jsxs("button",{onClick:()=>o("/dashboard/guide"),className:"guide-button",title:"User Guide",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),r.jsx("span",{children:"Guide"})]}),s&&(s.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>o("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),!_&&r.jsx("button",{onClick:S,className:"command-bar-button",title:"Search & Commands (Ctrl+K)",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"m21 21-4.3-4.3"})]})}),r.jsx("button",{className:"hamburger-icon",onClick:j,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),x&&r.jsx("div",{className:"global-loading-bar"})]}),r.jsxs("main",{className:"main-content",children:[r.jsx(OOe,{}),n]}),d?r.jsx(EOe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j,roleNavigation:VH}):r.jsx(AOe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j})]})},_6e=({user:t})=>{const{isOpen:e,closeAssistant:n}=IN(),a=Mt(),[i,s]=v.useState(null),[o,l]=v.useState([]);return v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const[d,f]=await Promise.all([le("/api/clinics/settings"),le("/api/staff")]);d.ok&&s(await d.json()),f.ok&&l(await f.json())}catch(d){console.error("Failed to fetch initial AI context",d)}})()},[t.clinic_id]),e?r.jsx("div",{className:"ai-assistant-wrapper",children:r.jsx(HH,{onClose:n,settings:i,staffList:o,onSettingsUpdate:()=>{},onStaffUpdate:()=>{},onHighlight:c=>{c.forEach(d=>{if(d.startsWith("navigate_")){const f=d.replace("navigate_","");a(`/dashboard/analysis?section=${f}`)}else{const f=document.getElementById(d);f&&(f.scrollIntoView({behavior:"smooth",block:"center"}),f.classList.add("ai-highlight-glow"),setTimeout(()=>f.classList.remove("ai-highlight-glow"),2e3))}})}})}):null};nW.createRoot(document.getElementById("root")).render(r.jsx(v.StrictMode,{children:r.jsx(TW,{client:BW,children:r.jsx(N6e,{})})}));export{rn as A,$z as B,Tb as C,mf as D,Mm as E,to as F,yU as G,Va as H,Uu as I,xf as J,Mn as K,eS as L,bf as M,bI as N,wG as O,fJ as P,Da as Q,Ce as R,Z as S,Bn as T,FN as U,ld as V,zO as W,Lt as X,RN as Y,gI as Z,nRe as _,Wc as a,Kz as b,ct as c,Av as d,as as e,le as f,Un as g,xU as h,iRe as i,r as j,oa as k,qn as l,Kn as m,vK as n,jf as o,PN as p,Ut as q,v as r,Oc as s,Ma as t,Mt as u,ss as v,Lr as w,Oa as x,Ml as y,WQ as z};

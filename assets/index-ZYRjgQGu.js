const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditComplaintPage-VtvaX7c7.js","assets/EditComplaintPage-B-q2gbHC.css","assets/AddPatientPage-D5OlJ-1m.js","assets/AddPatientPage-CvaX_3Vg.css"])))=>i.map(i=>d[i]);
var ZG=Object.defineProperty;var BM=t=>{throw TypeError(t)};var eW=(t,e,n)=>e in t?ZG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var jr=(t,e,n)=>eW(t,typeof e!="symbol"?e+"":e,n),Y_=(t,e,n)=>e.has(t)||BM("Cannot "+n);var Ie=(t,e,n)=>(Y_(t,e,"read from private field"),n?n.call(t):e.get(t)),Ut=(t,e,n)=>e.has(t)?BM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Pt=(t,e,n,a)=>(Y_(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n),wn=(t,e,n)=>(Y_(t,e,"access private method"),n);var hj=(t,e,n,a)=>({set _(i){Pt(t,e,i,n)},get _(){return Ie(t,e,a)}});function tW(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(a,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q_={exports:{}},qx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zM;function nW(){if(zM)return qx;zM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:a,key:o,ref:i!==void 0?i:null,props:s}}return qx.Fragment=e,qx.jsx=n,qx.jsxs=n,qx}var qM;function rW(){return qM||(qM=1,Q_.exports=nW()),Q_.exports}var r=rW(),X_={exports:{}},xn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UM;function aW(){if(UM)return xn;UM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g($){return $===null||typeof $!="object"?null:($=p&&$[p]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function S($,ce,xe){this.props=$,this.context=ce,this.refs=j,this.updater=xe||x}S.prototype.isReactComponent={},S.prototype.setState=function($,ce){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ce,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function _(){}_.prototype=S.prototype;function T($,ce,xe){this.props=$,this.context=ce,this.refs=j,this.updater=xe||x}var C=T.prototype=new _;C.constructor=T,b(C,S.prototype),C.isPureReactComponent=!0;var E=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function I($,ce,xe,Y,Re,$e){return xe=$e.ref,{$$typeof:t,type:$,key:ce,ref:xe!==void 0?xe:null,props:$e}}function R($,ce){return I($.type,ce,void 0,void 0,void 0,$.props)}function z($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function q($){var ce={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(xe){return ce[xe]})}var F=/\/+/g;function V($,ce){return typeof $=="object"&&$!==null&&$.key!=null?q(""+$.key):ce.toString(36)}function H(){}function K($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(H,H):($.status="pending",$.then(function(ce){$.status==="pending"&&($.status="fulfilled",$.value=ce)},function(ce){$.status==="pending"&&($.status="rejected",$.reason=ce)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function W($,ce,xe,Y,Re){var $e=typeof $;($e==="undefined"||$e==="boolean")&&($=null);var ze=!1;if($===null)ze=!0;else switch($e){case"bigint":case"string":case"number":ze=!0;break;case"object":switch($.$$typeof){case t:case e:ze=!0;break;case f:return ze=$._init,W(ze($._payload),ce,xe,Y,Re)}}if(ze)return Re=Re($),ze=Y===""?"."+V($,0):Y,E(Re)?(xe="",ze!=null&&(xe=ze.replace(F,"$&/")+"/"),W(Re,ce,xe,"",function(Se){return Se})):Re!=null&&(z(Re)&&(Re=R(Re,xe+(Re.key==null||$&&$.key===Re.key?"":(""+Re.key).replace(F,"$&/")+"/")+ze)),ce.push(Re)),1;ze=0;var Le=Y===""?".":Y+":";if(E($))for(var oe=0;oe<$.length;oe++)Y=$[oe],$e=Le+V(Y,oe),ze+=W(Y,ce,xe,$e,Re);else if(oe=g($),typeof oe=="function")for($=oe.call($),oe=0;!(Y=$.next()).done;)Y=Y.value,$e=Le+V(Y,oe++),ze+=W(Y,ce,xe,$e,Re);else if($e==="object"){if(typeof $.then=="function")return W(K($),ce,xe,Y,Re);throw ce=String($),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return ze}function B($,ce,xe){if($==null)return $;var Y=[],Re=0;return W($,Y,"","",function($e){return ce.call(xe,$e,Re++)}),Y}function G($){if($._status===-1){var ce=$._result;ce=ce(),ce.then(function(xe){($._status===0||$._status===-1)&&($._status=1,$._result=xe)},function(xe){($._status===0||$._status===-1)&&($._status=2,$._result=xe)}),$._status===-1&&($._status=0,$._result=ce)}if($._status===1)return $._result.default;throw $._result}var ee=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function X(){}return xn.Children={map:B,forEach:function($,ce,xe){B($,function(){ce.apply(this,arguments)},xe)},count:function($){var ce=0;return B($,function(){ce++}),ce},toArray:function($){return B($,function(ce){return ce})||[]},only:function($){if(!z($))throw Error("React.Children.only expected to receive a single React element child.");return $}},xn.Component=S,xn.Fragment=n,xn.Profiler=i,xn.PureComponent=T,xn.StrictMode=a,xn.Suspense=c,xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,xn.__COMPILER_RUNTIME={__proto__:null,c:function($){return k.H.useMemoCache($)}},xn.cache=function($){return function(){return $.apply(null,arguments)}},xn.cloneElement=function($,ce,xe){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var Y=b({},$.props),Re=$.key,$e=void 0;if(ce!=null)for(ze in ce.ref!==void 0&&($e=void 0),ce.key!==void 0&&(Re=""+ce.key),ce)!P.call(ce,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&ce.ref===void 0||(Y[ze]=ce[ze]);var ze=arguments.length-2;if(ze===1)Y.children=xe;else if(1<ze){for(var Le=Array(ze),oe=0;oe<ze;oe++)Le[oe]=arguments[oe+2];Y.children=Le}return I($.type,Re,void 0,void 0,$e,Y)},xn.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},xn.createElement=function($,ce,xe){var Y,Re={},$e=null;if(ce!=null)for(Y in ce.key!==void 0&&($e=""+ce.key),ce)P.call(ce,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(Re[Y]=ce[Y]);var ze=arguments.length-2;if(ze===1)Re.children=xe;else if(1<ze){for(var Le=Array(ze),oe=0;oe<ze;oe++)Le[oe]=arguments[oe+2];Re.children=Le}if($&&$.defaultProps)for(Y in ze=$.defaultProps,ze)Re[Y]===void 0&&(Re[Y]=ze[Y]);return I($,$e,void 0,void 0,null,Re)},xn.createRef=function(){return{current:null}},xn.forwardRef=function($){return{$$typeof:l,render:$}},xn.isValidElement=z,xn.lazy=function($){return{$$typeof:f,_payload:{_status:-1,_result:$},_init:G}},xn.memo=function($,ce){return{$$typeof:d,type:$,compare:ce===void 0?null:ce}},xn.startTransition=function($){var ce=k.T,xe={};k.T=xe;try{var Y=$(),Re=k.S;Re!==null&&Re(xe,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(X,ee)}catch($e){ee($e)}finally{k.T=ce}},xn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},xn.use=function($){return k.H.use($)},xn.useActionState=function($,ce,xe){return k.H.useActionState($,ce,xe)},xn.useCallback=function($,ce){return k.H.useCallback($,ce)},xn.useContext=function($){return k.H.useContext($)},xn.useDebugValue=function(){},xn.useDeferredValue=function($,ce){return k.H.useDeferredValue($,ce)},xn.useEffect=function($,ce,xe){var Y=k.H;if(typeof xe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect($,ce)},xn.useId=function(){return k.H.useId()},xn.useImperativeHandle=function($,ce,xe){return k.H.useImperativeHandle($,ce,xe)},xn.useInsertionEffect=function($,ce){return k.H.useInsertionEffect($,ce)},xn.useLayoutEffect=function($,ce){return k.H.useLayoutEffect($,ce)},xn.useMemo=function($,ce){return k.H.useMemo($,ce)},xn.useOptimistic=function($,ce){return k.H.useOptimistic($,ce)},xn.useReducer=function($,ce,xe){return k.H.useReducer($,ce,xe)},xn.useRef=function($){return k.H.useRef($)},xn.useState=function($){return k.H.useState($)},xn.useSyncExternalStore=function($,ce,xe){return k.H.useSyncExternalStore($,ce,xe)},xn.useTransition=function(){return k.H.useTransition()},xn.version="19.1.0",xn}var VM;function ED(){return VM||(VM=1,X_.exports=aW()),X_.exports}var v=ED();const Ce=Hn(v),HM=tW({__proto__:null,default:Ce},[v]);var J_={exports:{}},Ux={},Z_={exports:{}},eC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function iW(){return GM||(GM=1,function(t){function e(B,G){var ee=B.length;B.push(G);e:for(;0<ee;){var X=ee-1>>>1,$=B[X];if(0<i($,G))B[X]=G,B[ee]=$,ee=X;else break e}}function n(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var G=B[0],ee=B.pop();if(ee!==G){B[0]=ee;e:for(var X=0,$=B.length,ce=$>>>1;X<ce;){var xe=2*(X+1)-1,Y=B[xe],Re=xe+1,$e=B[Re];if(0>i(Y,ee))Re<$&&0>i($e,Y)?(B[X]=$e,B[Re]=ee,X=Re):(B[X]=Y,B[xe]=ee,X=xe);else if(Re<$&&0>i($e,ee))B[X]=$e,B[Re]=ee,X=Re;else break e}}return G}function i(B,G){var ee=B.sortIndex-G.sortIndex;return ee!==0?ee:B.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,p=null,g=3,x=!1,b=!1,j=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function E(B){for(var G=n(d);G!==null;){if(G.callback===null)a(d);else if(G.startTime<=B)a(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function k(B){if(j=!1,E(B),!b)if(n(c)!==null)b=!0,P||(P=!0,V());else{var G=n(d);G!==null&&W(k,G.startTime-B)}}var P=!1,I=-1,R=5,z=-1;function q(){return S?!0:!(t.unstable_now()-z<R)}function F(){if(S=!1,P){var B=t.unstable_now();z=B;var G=!0;try{e:{b=!1,j&&(j=!1,T(I),I=-1),x=!0;var ee=g;try{t:{for(E(B),p=n(c);p!==null&&!(p.expirationTime>B&&q());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var $=X(p.expirationTime<=B);if(B=t.unstable_now(),typeof $=="function"){p.callback=$,E(B),G=!0;break t}p===n(c)&&a(c),E(B)}else a(c);p=n(c)}if(p!==null)G=!0;else{var ce=n(d);ce!==null&&W(k,ce.startTime-B),G=!1}}break e}finally{p=null,g=ee,x=!1}G=void 0}}finally{G?V():P=!1}}}var V;if(typeof C=="function")V=function(){C(F)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,K=H.port2;H.port1.onmessage=F,V=function(){K.postMessage(null)}}else V=function(){_(F,0)};function W(B,G){I=_(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var ee=g;g=G;try{return B()}finally{g=ee}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=g;g=B;try{return G()}finally{g=ee}},t.unstable_scheduleCallback=function(B,G,ee){var X=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?X+ee:X):ee=X,B){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ee+$,B={id:f++,callback:G,priorityLevel:B,startTime:ee,expirationTime:$,sortIndex:-1},ee>X?(B.sortIndex=ee,e(d,B),n(c)===null&&B===n(d)&&(j?(T(I),I=-1):j=!0,W(k,ee-X))):(B.sortIndex=$,e(c,B),b||x||(b=!0,P||(P=!0,V()))),B},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(B){var G=g;return function(){var ee=g;g=G;try{return B.apply(this,arguments)}finally{g=ee}}}}(eC)),eC}var WM;function sW(){return WM||(WM=1,Z_.exports=iW()),Z_.exports}var tC={exports:{}},ui={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM;function oW(){if(KM)return ui;KM=1;var t=ED();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ui.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,ui.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(c,d,null,f)},ui.flushSync=function(c){var d=o.T,f=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=d,a.p=f,a.d.f()}},ui.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,a.d.C(c,d))},ui.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},ui.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?a.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:x}):f==="script"&&a.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ui.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);a.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&a.d.M(c)},ui.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);a.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ui.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=l(d.as,d.crossOrigin);a.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else a.d.m(c)},ui.requestFormReset=function(c){a.d.r(c)},ui.unstable_batchedUpdates=function(c,d){return c(d)},ui.useFormState=function(c,d,f){return o.H.useFormState(c,d,f)},ui.useFormStatus=function(){return o.H.useHostTransitionStatus()},ui.version="19.1.0",ui}var YM;function ez(){if(YM)return tC.exports;YM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tC.exports=oW(),tC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QM;function lW(){if(QM)return Ux;QM=1;var t=sW(),e=ED(),n=ez();function a(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var h=u,m=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(m=h.return),u=h.return;while(u)}return h.tag===3?m:null}function o(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function l(u){if(s(u)!==u)throw Error(a(188))}function c(u){var h=u.alternate;if(!h){if(h=s(u),h===null)throw Error(a(188));return h!==u?null:u}for(var m=u,N=h;;){var A=m.return;if(A===null)break;var L=A.alternate;if(L===null){if(N=A.return,N!==null){m=N;continue}break}if(A.child===L.child){for(L=A.child;L;){if(L===m)return l(A),u;if(L===N)return l(A),h;L=L.sibling}throw Error(a(188))}if(m.return!==N.return)m=A,N=L;else{for(var J=!1,pe=A.child;pe;){if(pe===m){J=!0,m=A,N=L;break}if(pe===N){J=!0,N=A,m=L;break}pe=pe.sibling}if(!J){for(pe=L.child;pe;){if(pe===m){J=!0,m=L,N=A;break}if(pe===N){J=!0,N=L,m=A;break}pe=pe.sibling}if(!J)throw Error(a(189))}}if(m.alternate!==N)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?u:h}function d(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=d(u),h!==null)return h;u=u.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function V(u){return u===null||typeof u!="object"?null:(u=F&&u[F]||u["@@iterator"],typeof u=="function"?u:null)}var H=Symbol.for("react.client.reference");function K(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===H?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case S:return"Profiler";case j:return"StrictMode";case k:return"Suspense";case P:return"SuspenseList";case z:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case x:return"Portal";case C:return(u.displayName||"Context")+".Provider";case T:return(u._context.displayName||"Context")+".Consumer";case E:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case I:return h=u.displayName||null,h!==null?h:K(u.type)||"Memo";case R:h=u._payload,u=u._init;try{return K(u(h))}catch{}}return null}var W=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},X=[],$=-1;function ce(u){return{current:u}}function xe(u){0>$||(u.current=X[$],X[$]=null,$--)}function Y(u,h){$++,X[$]=u.current,u.current=h}var Re=ce(null),$e=ce(null),ze=ce(null),Le=ce(null);function oe(u,h){switch(Y(ze,h),Y($e,u),Y(Re,null),h.nodeType){case 9:case 11:u=(u=h.documentElement)&&(u=u.namespaceURI)?Or(u):0;break;default:if(u=h.tagName,h=h.namespaceURI)h=Or(h),u=Fr(h,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}xe(Re),Y(Re,u)}function Se(){xe(Re),xe($e),xe(ze)}function Ve(u){u.memoizedState!==null&&Y(Le,u);var h=Re.current,m=Fr(h,u.type);h!==m&&(Y($e,u),Y(Re,m))}function Ae(u){$e.current===u&&(xe(Re),xe($e)),Le.current===u&&(xe(Le),Bu._currentValue=ee)}var ue=Object.prototype.hasOwnProperty,Te=t.unstable_scheduleCallback,se=t.unstable_cancelCallback,be=t.unstable_shouldYield,_e=t.unstable_requestPaint,Ne=t.unstable_now,Z=t.unstable_getCurrentPriorityLevel,ge=t.unstable_ImmediatePriority,de=t.unstable_UserBlockingPriority,ae=t.unstable_NormalPriority,ne=t.unstable_LowPriority,ie=t.unstable_IdlePriority,je=t.log,Ee=t.unstable_setDisableYieldValue,Q=null,ye=null;function me(u){if(typeof je=="function"&&Ee(u),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(Q,u)}catch{}}var he=Math.clz32?Math.clz32:Fe,De=Math.log,nt=Math.LN2;function Fe(u){return u>>>=0,u===0?32:31-(De(u)/nt|0)|0}var Ge=256,it=4194304;function wt(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function we(u,h,m){var N=u.pendingLanes;if(N===0)return 0;var A=0,L=u.suspendedLanes,J=u.pingedLanes;u=u.warmLanes;var pe=N&134217727;return pe!==0?(N=pe&~L,N!==0?A=wt(N):(J&=pe,J!==0?A=wt(J):m||(m=pe&~u,m!==0&&(A=wt(m))))):(pe=N&~L,pe!==0?A=wt(pe):J!==0?A=wt(J):m||(m=N&~u,m!==0&&(A=wt(m)))),A===0?0:h!==0&&h!==A&&(h&L)===0&&(L=A&-A,m=h&-h,L>=m||L===32&&(m&4194048)!==0)?h:A}function Qe(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function Xe(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(){var u=Ge;return Ge<<=1,(Ge&4194048)===0&&(Ge=256),u}function Ct(){var u=it;return it<<=1,(it&62914560)===0&&(it=4194304),u}function bt(u){for(var h=[],m=0;31>m;m++)h.push(u);return h}function ke(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ot(u,h,m,N,A,L){var J=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var pe=u.entanglements,Oe=u.expirationTimes,Je=u.hiddenUpdates;for(m=J&~m;0<m;){var ut=31-he(m),pt=1<<ut;pe[ut]=0,Oe[ut]=-1;var tt=Je[ut];if(tt!==null)for(Je[ut]=null,ut=0;ut<tt.length;ut++){var Ze=tt[ut];Ze!==null&&(Ze.lane&=-536870913)}m&=~pt}N!==0&&Tt(u,N,0),L!==0&&A===0&&u.tag!==0&&(u.suspendedLanes|=L&~(J&~h))}function Tt(u,h,m){u.pendingLanes|=h,u.suspendedLanes&=~h;var N=31-he(h);u.entangledLanes|=h,u.entanglements[N]=u.entanglements[N]|1073741824|m&4194090}function Ue(u,h){var m=u.entangledLanes|=h;for(u=u.entanglements;m;){var N=31-he(m),A=1<<N;A&h|u[N]&h&&(u[N]|=h),m&=~A}}function jt(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function kt(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Kn(){var u=G.p;return u!==0?u:(u=window.event,u===void 0?32:sj(u.type))}function vt(u,h){var m=G.p;try{return G.p=u,h()}finally{G.p=m}}var Dt=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Dt,Yn="__reactProps$"+Dt,vr="__reactContainer$"+Dt,za="__reactEvents$"+Dt,Xr="__reactListeners$"+Dt,wa="__reactHandles$"+Dt,pn="__reactResources$"+Dt,qr="__reactMarker$"+Dt;function Tn(u){delete u[Vt],delete u[Yn],delete u[za],delete u[Xr],delete u[wa]}function Rn(u){var h=u[Vt];if(h)return h;for(var m=u.parentNode;m;){if(h=m[vr]||m[Vt]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(u=K1(u);u!==null;){if(m=u[Vt])return m;u=K1(u)}return h}u=m,m=u.parentNode}return null}function et(u){if(u=u[Vt]||u[vr]){var h=u.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return u}return null}function gt(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u.stateNode;throw Error(a(33))}function St(u){var h=u[pn];return h||(h=u[pn]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Ot(u){u[qr]=!0}var Sn=new Set,Ln={};function Na(u,h){xi(u,h),xi(u+"Capture",h)}function xi(u,h){for(Ln[u]=h,u=0;u<h.length;u++)Sn.add(h[u])}var ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Td={},kd={};function VS(u){return ue.call(kd,u)?!0:ue.call(Td,u)?!1:ho.test(u)?kd[u]=!0:(Td[u]=!0,!1)}function Bf(u,h,m){if(VS(h))if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(h);return;case"boolean":var N=h.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){u.removeAttribute(h);return}}u.setAttribute(h,""+m)}}function zf(u,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttribute(h,""+m)}}function Fs(u,h,m,N){if(N===null)u.removeAttribute(m);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(h,m,""+N)}}var qf,Xg;function Qc(u){if(qf===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);qf=h&&h[1]||"",Xg=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qf+u+Xg}var Jg=!1;function Zg(u,h){if(!u||Jg)return"";Jg=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(h){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(Ze){var tt=Ze}Reflect.construct(u,[],pt)}else{try{pt.call()}catch(Ze){tt=Ze}u.call(pt.prototype)}}else{try{throw Error()}catch(Ze){tt=Ze}(pt=u())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(Ze){if(Ze&&tt&&typeof Ze.stack=="string")return[Ze.stack,tt.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=N.DetermineComponentFrameRoot(),J=L[0],pe=L[1];if(J&&pe){var Oe=J.split(`
`),Je=pe.split(`
`);for(A=N=0;N<Oe.length&&!Oe[N].includes("DetermineComponentFrameRoot");)N++;for(;A<Je.length&&!Je[A].includes("DetermineComponentFrameRoot");)A++;if(N===Oe.length||A===Je.length)for(N=Oe.length-1,A=Je.length-1;1<=N&&0<=A&&Oe[N]!==Je[A];)A--;for(;1<=N&&0<=A;N--,A--)if(Oe[N]!==Je[A]){if(N!==1||A!==1)do if(N--,A--,0>A||Oe[N]!==Je[A]){var ut=`
`+Oe[N].replace(" at new "," at ");return u.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",u.displayName)),ut}while(1<=N&&0<=A);break}}}finally{Jg=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Qc(m):""}function HS(u){switch(u.tag){case 26:case 27:case 5:return Qc(u.type);case 16:return Qc("Lazy");case 13:return Qc("Suspense");case 19:return Qc("SuspenseList");case 0:case 15:return Zg(u.type,!1);case 11:return Zg(u.type.render,!1);case 1:return Zg(u.type,!0);case 31:return Qc("Activity");default:return""}}function ey(u){try{var h="";do h+=HS(u),u=u.return;while(u);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function vi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function ty(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ny(u){var h=ty(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),N=""+u[h];if(!u.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,L=m.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return A.call(this)},set:function(J){N=""+J,L.call(this,J)}}),Object.defineProperty(u,h,{enumerable:m.enumerable}),{getValue:function(){return N},setValue:function(J){N=""+J},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function Uf(u){u._valueTracker||(u._valueTracker=ny(u))}function ry(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var m=h.getValue(),N="";return u&&(N=ty(u)?u.checked?"true":"false":u.value),u=N,u!==m?(h.setValue(u),!0):!1}function Hl(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Yb=/[\n"\\]/g;function qi(u){return u.replace(Yb,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Vf(u,h,m,N,A,L,J,pe){u.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?u.type=J:u.removeAttribute("type"),h!=null?J==="number"?(h===0&&u.value===""||u.value!=h)&&(u.value=""+vi(h)):u.value!==""+vi(h)&&(u.value=""+vi(h)):J!=="submit"&&J!=="reset"||u.removeAttribute("value"),h!=null?Ad(u,J,vi(h)):m!=null?Ad(u,J,vi(m)):N!=null&&u.removeAttribute("value"),A==null&&L!=null&&(u.defaultChecked=!!L),A!=null&&(u.checked=A&&typeof A!="function"&&typeof A!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?u.name=""+vi(pe):u.removeAttribute("name")}function ay(u,h,m,N,A,L,J,pe){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(u.type=L),h!=null||m!=null){if(!(L!=="submit"&&L!=="reset"||h!=null))return;m=m!=null?""+vi(m):"",h=h!=null?""+vi(h):m,pe||h===u.value||(u.value=h),u.defaultValue=h}N=N??A,N=typeof N!="function"&&typeof N!="symbol"&&!!N,u.checked=pe?u.checked:!!N,u.defaultChecked=!!N,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(u.name=J)}function Ad(u,h,m){h==="number"&&Hl(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function Xc(u,h,m,N){if(u=u.options,h){h={};for(var A=0;A<m.length;A++)h["$"+m[A]]=!0;for(m=0;m<u.length;m++)A=h.hasOwnProperty("$"+u[m].value),u[m].selected!==A&&(u[m].selected=A),A&&N&&(u[m].defaultSelected=!0)}else{for(m=""+vi(m),h=null,A=0;A<u.length;A++){if(u[A].value===m){u[A].selected=!0,N&&(u[A].defaultSelected=!0);return}h!==null||u[A].disabled||(h=u[A])}h!==null&&(h.selected=!0)}}function iy(u,h,m){if(h!=null&&(h=""+vi(h),h!==u.value&&(u.value=h),m==null)){u.defaultValue!==h&&(u.defaultValue=h);return}u.defaultValue=m!=null?""+vi(m):""}function Hf(u,h,m,N){if(h==null){if(N!=null){if(m!=null)throw Error(a(92));if(W(N)){if(1<N.length)throw Error(a(93));N=N[0]}m=N}m==null&&(m=""),h=m}m=vi(h),u.defaultValue=m,N=u.textContent,N===m&&N!==""&&N!==null&&(u.value=N)}function Yo(u,h){if(h){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=h;return}}u.textContent=h}var Jc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sy(u,h,m){var N=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?N?u.setProperty(h,""):h==="float"?u.cssFloat="":u[h]="":N?u.setProperty(h,m):typeof m!="number"||m===0||Jc.has(h)?h==="float"?u.cssFloat=m:u[h]=(""+m).trim():u[h]=m+"px"}function oy(u,h,m){if(h!=null&&typeof h!="object")throw Error(a(62));if(u=u.style,m!=null){for(var N in m)!m.hasOwnProperty(N)||h!=null&&h.hasOwnProperty(N)||(N.indexOf("--")===0?u.setProperty(N,""):N==="float"?u.cssFloat="":u[N]="");for(var A in h)N=h[A],h.hasOwnProperty(A)&&m[A]!==N&&sy(u,A,N)}else for(var L in h)h.hasOwnProperty(L)&&sy(u,L,h[L])}function ly(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ed(u){return Xb.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Gf=null;function cy(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Zc=null,eu=null;function uy(u){var h=et(u);if(h&&(u=h.stateNode)){var m=u[Yn]||null;e:switch(u=h.stateNode,h.type){case"input":if(Vf(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+qi(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var N=m[h];if(N!==u&&N.form===u.form){var A=N[Yn]||null;if(!A)throw Error(a(90));Vf(N,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(h=0;h<m.length;h++)N=m[h],N.form===u.form&&ry(N)}break e;case"textarea":iy(u,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Xc(u,!!m.multiple,h,!1)}}}var dy=!1;function Jb(u,h,m){if(dy)return u(h,m);dy=!0;try{var N=u(h);return N}finally{if(dy=!1,(Zc!==null||eu!==null)&&(Gp(),Zc&&(h=Zc,u=eu,eu=Zc=null,uy(h),u)))for(h=0;h<u.length;h++)uy(u[h])}}function Pd(u,h){var m=u.stateNode;if(m===null)return null;var N=m[Yn]||null;if(N===null)return null;m=N[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(u=u.type,N=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!N;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(a(231,h,typeof m));return m}var fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dd=!1;if(fo)try{var Od={};Object.defineProperty(Od,"passive",{get:function(){Dd=!0}}),window.addEventListener("test",Od,Od),window.removeEventListener("test",Od,Od)}catch{Dd=!1}var Qo=null,hy=null,Wf=null;function Zb(){if(Wf)return Wf;var u,h=hy,m=h.length,N,A="value"in Qo?Qo.value:Qo.textContent,L=A.length;for(u=0;u<m&&h[u]===A[u];u++);var J=m-u;for(N=1;N<=J&&h[m-N]===A[L-N];N++);return Wf=A.slice(u,1<N?1-N:void 0)}function or(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function tr(){return!0}function e0(){return!1}function Xa(u){function h(m,N,A,L,J){this._reactName=m,this._targetInst=A,this.type=N,this.nativeEvent=L,this.target=J,this.currentTarget=null;for(var pe in u)u.hasOwnProperty(pe)&&(m=u[pe],this[pe]=m?m(L):L[pe]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?tr:e0,this.isPropagationStopped=e0,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),h}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kf=Xa(Gl),Md=f({},Gl,{view:0,detail:0}),GS=Xa(Md),Yf,fy,Qr,tu=f({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Qr&&(Qr&&u.type==="mousemove"?(Yf=u.screenX-Qr.screenX,fy=u.screenY-Qr.screenY):fy=Yf=0,Qr=u),Yf)},movementY:function(u){return"movementY"in u?u.movementY:fy}}),Xo=Xa(tu),t0=f({},tu,{dataTransfer:0}),py=Xa(t0),Ui=f({},Md,{relatedTarget:0}),Qf=Xa(Ui),n0=f({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),r0=Xa(n0),a0=f({},Gl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),i0=Xa(a0),s0=f({},Gl,{data:0}),Ja=Xa(s0),WS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o0(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=KS[u])?!!h[u]:!1}function $s(){return o0}var Xf=f({},Md,{key:function(u){if(u.key){var h=WS[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=or(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Vi[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(u){return u.type==="keypress"?or(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?or(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),my=Xa(Xf),Ar=f({},tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),po=Xa(Ar),gy=f({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),YS=Xa(gy),yy=f({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),QS=Xa(yy),XS=f({},tu,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),JS=Xa(XS),l0=f({},Gl,{newState:0,oldState:0}),Jf=Xa(l0),nu=[9,13,27,32],xy=fo&&"CompositionEvent"in window,ru=null;fo&&"documentMode"in document&&(ru=document.documentMode);var c0=fo&&"TextEvent"in window&&!ru,Zf=fo&&(!xy||ru&&8<ru&&11>=ru),ep=" ",vy=!1;function u0(u,h){switch(u){case"keyup":return nu.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tp(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Jo=!1;function ZS(u,h){switch(u){case"compositionend":return tp(h);case"keypress":return h.which!==32?null:(vy=!0,ep);case"textInput":return u=h.data,u===ep&&vy?null:u;default:return null}}function d0(u,h){if(Jo)return u==="compositionend"||!xy&&u0(u,h)?(u=Zb(),Wf=hy=Qo=null,Jo=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Zf&&h.locale!=="ko"?null:h.data;default:return null}}var bi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function np(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!bi[u.type]:h==="textarea"}function au(u,h,m,N){Zc?eu?eu.push(N):eu=[N]:Zc=N,h=Zp(h,"onChange"),0<h.length&&(m=new Kf("onChange","change",null,m,N),u.push({event:m,listeners:h}))}var iu=null,su=null;function e_(u){B1(u,0)}function rp(u){var h=gt(u);if(ry(h))return u}function h0(u,h){if(u==="change")return h}var f0=!1;if(fo){var by;if(fo){var Zo="oninput"in document;if(!Zo){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),Zo=typeof p0.oninput=="function"}by=Zo}else by=!1;f0=by&&(!document.documentMode||9<document.documentMode)}function m0(){iu&&(iu.detachEvent("onpropertychange",ap),su=iu=null)}function ap(u){if(u.propertyName==="value"&&rp(su)){var h=[];au(h,su,u,cy(u)),Jb(e_,h)}}function g0(u,h,m){u==="focusin"?(m0(),iu=h,su=m,iu.attachEvent("onpropertychange",ap)):u==="focusout"&&m0()}function el(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return rp(su)}function ip(u,h){if(u==="click")return rp(h)}function t_(u,h){if(u==="input"||u==="change")return rp(h)}function n_(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var ji=typeof Object.is=="function"?Object.is:n_;function Bs(u,h){if(ji(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var m=Object.keys(u),N=Object.keys(h);if(m.length!==N.length)return!1;for(N=0;N<m.length;N++){var A=m[N];if(!ue.call(h,A)||!ji(u[A],h[A]))return!1}return!0}function Hi(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function jy(u,h){var m=Hi(u);u=0;for(var N;m;){if(m.nodeType===3){if(N=u+m.textContent.length,u<=h&&N>=h)return{node:m,offset:h-u};u=N}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Hi(m)}}function y0(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?y0(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function x0(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var h=Hl(u.document);h instanceof u.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)u=h.contentWindow;else break;h=Hl(u.document)}return h}function wy(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}var r_=fo&&"documentMode"in document&&11>=document.documentMode,ou=null,tl=null,He=null,st=!1;function rt(u,h,m){var N=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;st||ou==null||ou!==Hl(N)||(N=ou,"selectionStart"in N&&wy(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),He&&Bs(He,N)||(He=N,N=Zp(tl,"onSelect"),0<N.length&&(h=new Kf("onSelect","select",null,h,m),u.push({event:h,listeners:N}),h.target=ou)))}function At(u,h){var m={};return m[u.toLowerCase()]=h.toLowerCase(),m["Webkit"+u]="webkit"+h,m["Moz"+u]="moz"+h,m}var Jt={animationend:At("Animation","AnimationEnd"),animationiteration:At("Animation","AnimationIteration"),animationstart:At("Animation","AnimationStart"),transitionrun:At("Transition","TransitionRun"),transitionstart:At("Transition","TransitionStart"),transitioncancel:At("Transition","TransitionCancel"),transitionend:At("Transition","TransitionEnd")},$n={},Jr={};fo&&(Jr=document.createElement("div").style,"AnimationEvent"in window||(delete Jt.animationend.animation,delete Jt.animationiteration.animation,delete Jt.animationstart.animation),"TransitionEvent"in window||delete Jt.transitionend.transition);function Bn(u){if($n[u])return $n[u];if(!Jt[u])return u;var h=Jt[u],m;for(m in h)if(h.hasOwnProperty(m)&&m in Jr)return $n[u]=h[m];return u}var sp=Bn("animationend"),v0=Bn("animationiteration"),wi=Bn("animationstart"),op=Bn("transitionrun"),a_=Bn("transitionstart"),lu=Bn("transitioncancel"),Id=Bn("transitionend"),Rd=new Map,Qn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qn.push("scrollEnd");function ps(u,h){Rd.set(u,h),Na(h,[u])}var Ny=new WeakMap;function qa(u,h){if(typeof u=="object"&&u!==null){var m=Ny.get(u);return m!==void 0?m:(h={value:u,source:h,stack:ey(h)},Ny.set(u,h),h)}return{value:u,source:h,stack:ey(h)}}var Gi=[],cu=0,Sy=0;function Wl(){for(var u=cu,h=Sy=cu=0;h<u;){var m=Gi[h];Gi[h++]=null;var N=Gi[h];Gi[h++]=null;var A=Gi[h];Gi[h++]=null;var L=Gi[h];if(Gi[h++]=null,N!==null&&A!==null){var J=N.pending;J===null?A.next=A:(A.next=J.next,J.next=A),N.pending=A}L!==0&&Ld(m,A,L)}}function ms(u,h,m,N){Gi[cu++]=u,Gi[cu++]=h,Gi[cu++]=m,Gi[cu++]=N,Sy|=N,u.lanes|=N,u=u.alternate,u!==null&&(u.lanes|=N)}function uu(u,h,m,N){return ms(u,h,m,N),Fd(u)}function Kl(u,h){return ms(u,null,null,h),Fd(u)}function Ld(u,h,m){u.lanes|=m;var N=u.alternate;N!==null&&(N.lanes|=m);for(var A=!1,L=u.return;L!==null;)L.childLanes|=m,N=L.alternate,N!==null&&(N.childLanes|=m),L.tag===22&&(u=L.stateNode,u===null||u._visibility&1||(A=!0)),u=L,L=L.return;return u.tag===3?(L=u.stateNode,A&&h!==null&&(A=31-he(m),u=L.hiddenUpdates,N=u[A],N===null?u[A]=[h]:N.push(h),h.lane=m|536870912),L):null}function Fd(u){if(50<Du)throw Du=0,xx=null,Error(a(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}var Yl={};function lp(u,h,m,N){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Za(u,h,m,N){return new lp(u,h,m,N)}function Ql(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ua(u,h){var m=u.alternate;return m===null?(m=Za(u.tag,h,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=h,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,h=u.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function $d(u,h){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,h=m.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function cp(u,h,m,N,A,L){var J=0;if(N=u,typeof u=="function")Ql(u)&&(J=1);else if(typeof u=="string")J=I_(u,m,Re.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case z:return u=Za(31,m,h,A),u.elementType=z,u.lanes=L,u;case b:return Xl(m.children,A,L,h);case j:J=8,A|=24;break;case S:return u=Za(12,m,h,A|2),u.elementType=S,u.lanes=L,u;case k:return u=Za(13,m,h,A),u.elementType=k,u.lanes=L,u;case P:return u=Za(19,m,h,A),u.elementType=P,u.lanes=L,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _:case C:J=10;break e;case T:J=9;break e;case E:J=11;break e;case I:J=14;break e;case R:J=16,N=null;break e}J=29,m=Error(a(130,u===null?"null":typeof u,"")),N=null}return h=Za(J,m,h,A),h.elementType=u,h.type=N,h.lanes=L,h}function Xl(u,h,m,N){return u=Za(7,u,N,h),u.lanes=m,u}function _y(u,h,m){return u=Za(6,u,null,h),u.lanes=m,u}function du(u,h,m){return h=Za(4,u.children!==null?u.children:[],u.key,h),h.lanes=m,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}var mo=[],nl=0,up=null,Bd=0,Wi=[],Ki=0,Sr=null,Er=1,go="";function Jl(u,h){mo[nl++]=Bd,mo[nl++]=up,up=u,Bd=h}function Cy(u,h,m){Wi[Ki++]=Er,Wi[Ki++]=go,Wi[Ki++]=Sr,Sr=u;var N=Er;u=go;var A=32-he(N)-1;N&=~(1<<A),m+=1;var L=32-he(h)+A;if(30<L){var J=A-A%5;L=(N&(1<<J)-1).toString(32),N>>=J,A-=J,Er=1<<32-he(h)+A|m<<A|N,go=L+u}else Er=1<<L|m<<A|N,go=u}function Ty(u){u.return!==null&&(Jl(u,1),Cy(u,1,0))}function zd(u){for(;u===up;)up=mo[--nl],mo[nl]=null,Bd=mo[--nl],mo[nl]=null;for(;u===Sr;)Sr=Wi[--Ki],Wi[Ki]=null,go=Wi[--Ki],Wi[Ki]=null,Er=Wi[--Ki],Wi[Ki]=null}var ia=null,Pr=null,kn=!1,gs=null,ei=!1,hu=Error(a(519));function Yi(u){var h=Error(a(418,""));throw rl(qa(h,u)),hu}function b0(u){var h=u.stateNode,m=u.type,N=u.memoizedProps;switch(h[Vt]=u,h[Yn]=N,m){case"dialog":Cn("cancel",h),Cn("close",h);break;case"iframe":case"object":case"embed":Cn("load",h);break;case"video":case"audio":for(m=0;m<Ah.length;m++)Cn(Ah[m],h);break;case"source":Cn("error",h);break;case"img":case"image":case"link":Cn("error",h),Cn("load",h);break;case"details":Cn("toggle",h);break;case"input":Cn("invalid",h),ay(h,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0),Uf(h);break;case"select":Cn("invalid",h);break;case"textarea":Cn("invalid",h),Hf(h,N.value,N.defaultValue,N.children),Uf(h)}m=N.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||N.suppressHydrationWarning===!0||U1(h.textContent,m)?(N.popover!=null&&(Cn("beforetoggle",h),Cn("toggle",h)),N.onScroll!=null&&Cn("scroll",h),N.onScrollEnd!=null&&Cn("scrollend",h),N.onClick!=null&&(h.onclick=em),h=!0):h=!1,h||Yi(u)}function j0(u){for(ia=u.return;ia;)switch(ia.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:ia=ia.return}}function qd(u){if(u!==ia)return!1;if(!kn)return j0(u),kn=!0,!1;var h=u.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||nm(u.type,u.memoizedProps)),m=!m),m&&Pr&&Yi(u),j0(u),h===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(h===0){Pr=ws(u.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;u=u.nextSibling}Pr=null}}else h===27?(h=Pr,ts(u.type)?(u=Dx,Dx=null,Pr=u):Pr=h):Pr=ia?ws(u.stateNode.nextSibling):null;return!0}function Ud(){Pr=ia=null,kn=!1}function w0(){var u=gs;return u!==null&&(li===null?li=u:li.push.apply(li,u),gs=null),u}function rl(u){gs===null?gs=[u]:gs.push(u)}var Zl=ce(null),al=null,fe=null;function Ni(u,h,m){Y(Zl,h._currentValue),h._currentValue=m}function Qi(u){u._currentValue=Zl.current,xe(Zl)}function ti(u,h,m){for(;u!==null;){var N=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,N!==null&&(N.childLanes|=h)):N!==null&&(N.childLanes&h)!==h&&(N.childLanes|=h),u===m)break;u=u.return}}function vn(u,h,m,N){var A=u.child;for(A!==null&&(A.return=u);A!==null;){var L=A.dependencies;if(L!==null){var J=A.child;L=L.firstContext;e:for(;L!==null;){var pe=L;L=A;for(var Oe=0;Oe<h.length;Oe++)if(pe.context===h[Oe]){L.lanes|=m,pe=L.alternate,pe!==null&&(pe.lanes|=m),ti(L.return,m,u),N||(J=null);break e}L=pe.next}}else if(A.tag===18){if(J=A.return,J===null)throw Error(a(341));J.lanes|=m,L=J.alternate,L!==null&&(L.lanes|=m),ti(J,m,u),J=null}else J=A.child;if(J!==null)J.return=A;else for(J=A;J!==null;){if(J===u){J=null;break}if(A=J.sibling,A!==null){A.return=J.return,J=A;break}J=J.return}A=J}}function Vd(u,h,m,N){u=null;for(var A=h,L=!1;A!==null;){if(!L){if((A.flags&524288)!==0)L=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var J=A.alternate;if(J===null)throw Error(a(387));if(J=J.memoizedProps,J!==null){var pe=A.type;ji(A.pendingProps.value,J.value)||(u!==null?u.push(pe):u=[pe])}}else if(A===Le.current){if(J=A.alternate,J===null)throw Error(a(387));J.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(u!==null?u.push(Bu):u=[Bu])}A=A.return}u!==null&&vn(h,u,m,N),h.flags|=262144}function dp(u){for(u=u.firstContext;u!==null;){if(!ji(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function ec(u){al=u,fe=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Ur(u){return N0(al,u)}function hp(u,h){return al===null&&ec(u),N0(u,h)}function N0(u,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},fe===null){if(u===null)throw Error(a(308));fe=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else fe=fe.next=h;return m}var i_=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(m,N){u.push(N)}};this.abort=function(){h.aborted=!0,u.forEach(function(m){return m()})}},s_=t.unstable_scheduleCallback,o_=t.unstable_NormalPriority,mr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ky(){return{controller:new i_,data:new Map,refCount:0}}function Hd(u){u.refCount--,u.refCount===0&&s_(o_,function(){u.controller.abort()})}var Gd=null,Ay=0,fu=0,ni=null;function l_(u,h){if(Gd===null){var m=Gd=[];Ay=0,fu=Jp(),ni={status:"pending",value:void 0,then:function(N){m.push(N)}}}return Ay++,h.then(S0,S0),h}function S0(){if(--Ay===0&&Gd!==null){ni!==null&&(ni.status="fulfilled");var u=Gd;Gd=null,fu=0,ni=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function c_(u,h){var m=[],N={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return u.then(function(){N.status="fulfilled",N.value=h;for(var A=0;A<m.length;A++)(0,m[A])(h)},function(A){for(N.status="rejected",N.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),N}var _0=B.S;B.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&l_(u,h),_0!==null&&_0(u,h)};var tc=ce(null);function yo(){var u=tc.current;return u!==null?u:br.pooledCache}function fp(u,h){h===null?Y(tc,tc.current):Y(tc,h.pool)}function C0(){var u=yo();return u===null?null:{parent:mr._currentValue,pool:u}}var Va=Error(a(460)),T0=Error(a(474)),pp=Error(a(542)),Ey={then:function(){}};function k0(u){return u=u.status,u==="fulfilled"||u==="rejected"}function mp(){}function Py(u,h,m){switch(m=u[m],m===void 0?u.push(h):m!==h&&(h.then(mp,mp),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,E0(u),u;default:if(typeof h.status=="string")h.then(mp,mp);else{if(u=br,u!==null&&100<u.shellSuspendCounter)throw Error(a(482));u=h,u.status="pending",u.then(function(N){if(h.status==="pending"){var A=h;A.status="fulfilled",A.value=N}},function(N){if(h.status==="pending"){var A=h;A.status="rejected",A.reason=N}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,E0(u),u}throw pu=h,Va}}var pu=null;function A0(){if(pu===null)throw Error(a(459));var u=pu;return pu=null,u}function E0(u){if(u===Va||u===pp)throw Error(a(483))}var zs=!1;function nc(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mu(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function il(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function xo(u,h,m){var N=u.updateQueue;if(N===null)return null;if(N=N.shared,(rr&2)!==0){var A=N.pending;return A===null?h.next=h:(h.next=A.next,A.next=h),N.pending=h,h=Fd(u),Ld(u,null,m),h}return ms(u,N,h,m),Fd(u)}function Wd(u,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var N=h.lanes;N&=u.pendingLanes,m|=N,h.lanes=m,Ue(u,m)}}function ys(u,h){var m=u.updateQueue,N=u.alternate;if(N!==null&&(N=N.updateQueue,m===N)){var A=null,L=null;if(m=m.firstBaseUpdate,m!==null){do{var J={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};L===null?A=L=J:L=L.next=J,m=m.next}while(m!==null);L===null?A=L=h:L=L.next=h}else A=L=h;m={baseState:N.baseState,firstBaseUpdate:A,lastBaseUpdate:L,shared:N.shared,callbacks:N.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=h}var Kd=!1;function xs(){if(Kd){var u=ni;if(u!==null)throw u}}function Pa(u,h,m,N){Kd=!1;var A=u.updateQueue;zs=!1;var L=A.firstBaseUpdate,J=A.lastBaseUpdate,pe=A.shared.pending;if(pe!==null){A.shared.pending=null;var Oe=pe,Je=Oe.next;Oe.next=null,J===null?L=Je:J.next=Je,J=Oe;var ut=u.alternate;ut!==null&&(ut=ut.updateQueue,pe=ut.lastBaseUpdate,pe!==J&&(pe===null?ut.firstBaseUpdate=Je:pe.next=Je,ut.lastBaseUpdate=Oe))}if(L!==null){var pt=A.baseState;J=0,ut=Je=Oe=null,pe=L;do{var tt=pe.lane&-536870913,Ze=tt!==pe.lane;if(Ze?(Fn&tt)===tt:(N&tt)===tt){tt!==0&&tt===fu&&(Kd=!0),ut!==null&&(ut=ut.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Kt=u,Wt=pe;tt=h;var cr=m;switch(Wt.tag){case 1:if(Kt=Wt.payload,typeof Kt=="function"){pt=Kt.call(cr,pt,tt);break e}pt=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=Wt.payload,tt=typeof Kt=="function"?Kt.call(cr,pt,tt):Kt,tt==null)break e;pt=f({},pt,tt);break e;case 2:zs=!0}}tt=pe.callback,tt!==null&&(u.flags|=64,Ze&&(u.flags|=8192),Ze=A.callbacks,Ze===null?A.callbacks=[tt]:Ze.push(tt))}else Ze={lane:tt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},ut===null?(Je=ut=Ze,Oe=pt):ut=ut.next=Ze,J|=tt;if(pe=pe.next,pe===null){if(pe=A.shared.pending,pe===null)break;Ze=pe,pe=Ze.next,Ze.next=null,A.lastBaseUpdate=Ze,A.shared.pending=null}}while(!0);ut===null&&(Oe=pt),A.baseState=Oe,A.firstBaseUpdate=Je,A.lastBaseUpdate=ut,L===null&&(A.shared.lanes=0),pl|=J,u.lanes=J,u.memoizedState=pt}}function P0(u,h){if(typeof u!="function")throw Error(a(191,u));u.call(h)}function Dy(u,h){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)P0(m[u],h)}var rc=ce(null),sl=ce(0);function vo(u,h){u=ko,Y(sl,u),Y(rc,h),ko=u|h.baseLanes}function gp(){Y(sl,ko),Y(rc,rc.current)}function Oy(){ko=sl.current,xe(rc),xe(sl)}var vs=0,yn=null,nr=null,An=null,gu=!1,ac=!1,Da=!1,yu=0,ol=0,Xi=null,D0=0;function Pn(){throw Error(a(321))}function Yd(u,h){if(h===null)return!1;for(var m=0;m<h.length&&m<u.length;m++)if(!ji(u[m],h[m]))return!1;return!0}function My(u,h,m,N,A,L){return vs=L,yn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,B.H=u===null||u.memoizedState===null?H0:Jy,Da=!1,L=m(N,A),Da=!1,ac&&(L=M0(h,m,N,A)),O0(u),L}function O0(u){B.H=sh;var h=nr!==null&&nr.next!==null;if(vs=0,An=nr=yn=null,gu=!1,ol=0,Xi=null,h)throw Error(a(300));u===null||pa||(u=u.dependencies,u!==null&&dp(u)&&(pa=!0))}function M0(u,h,m,N){yn=u;var A=0;do{if(ac&&(Xi=null),ol=0,ac=!1,25<=A)throw Error(a(301));if(A+=1,An=nr=null,u.updateQueue!=null){var L=u.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}B.H=G0,L=h(m,N)}while(ac);return L}function Iy(){var u=B.H,h=u.useState()[0];return h=typeof h.then=="function"?Qd(h):h,u=u.useState()[0],(nr!==null?nr.memoizedState:null)!==u&&(yn.flags|=1024),h}function Ry(){var u=yu!==0;return yu=0,u}function ic(u,h,m){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~m}function yp(u){if(gu){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}gu=!1}vs=0,An=nr=yn=null,ac=!1,ol=yu=0,Xi=null}function ri(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?yn.memoizedState=An=u:An=An.next=u,An}function Zr(){if(nr===null){var u=yn.alternate;u=u!==null?u.memoizedState:null}else u=nr.next;var h=An===null?yn.memoizedState:An.next;if(h!==null)An=h,nr=u;else{if(u===null)throw yn.alternate===null?Error(a(467)):Error(a(310));nr=u,u={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},An===null?yn.memoizedState=An=u:An=An.next=u}return An}function sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qd(u){var h=ol;return ol+=1,Xi===null&&(Xi=[]),u=Py(Xi,u,h),h=yn,(An===null?h.memoizedState:An.next)===null&&(h=h.alternate,B.H=h===null||h.memoizedState===null?H0:Jy),u}function xp(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Qd(u);if(u.$$typeof===C)return Ur(u)}throw Error(a(438,String(u)))}function Xd(u){var h=null,m=yn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var N=yn.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(h={data:N.data.map(function(A){return A.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=sc(),yn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(u),N=0;N<u;N++)m[N]=q;return h.index++,m}function qs(u,h){return typeof h=="function"?h(u):h}function vp(u){var h=Zr();return Ly(h,nr,u)}function Ly(u,h,m){var N=u.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=m;var A=u.baseQueue,L=N.pending;if(L!==null){if(A!==null){var J=A.next;A.next=L.next,L.next=J}h.baseQueue=A=L,N.pending=null}if(L=u.baseState,A===null)u.memoizedState=L;else{h=A.next;var pe=J=null,Oe=null,Je=h,ut=!1;do{var pt=Je.lane&-536870913;if(pt!==Je.lane?(Fn&pt)===pt:(vs&pt)===pt){var tt=Je.revertLane;if(tt===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),pt===fu&&(ut=!0);else if((vs&tt)===tt){Je=Je.next,tt===fu&&(ut=!0);continue}else pt={lane:0,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Oe===null?(pe=Oe=pt,J=L):Oe=Oe.next=pt,yn.lanes|=tt,pl|=tt;pt=Je.action,Da&&m(L,pt),L=Je.hasEagerState?Je.eagerState:m(L,pt)}else tt={lane:pt,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Oe===null?(pe=Oe=tt,J=L):Oe=Oe.next=tt,yn.lanes|=pt,pl|=pt;Je=Je.next}while(Je!==null&&Je!==h);if(Oe===null?J=L:Oe.next=pe,!ji(L,u.memoizedState)&&(pa=!0,ut&&(m=ni,m!==null)))throw m;u.memoizedState=L,u.baseState=J,u.baseQueue=Oe,N.lastRenderedState=L}return A===null&&(N.lanes=0),[u.memoizedState,N.dispatch]}function Fy(u){var h=Zr(),m=h.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=u;var N=m.dispatch,A=m.pending,L=h.memoizedState;if(A!==null){m.pending=null;var J=A=A.next;do L=u(L,J.action),J=J.next;while(J!==A);ji(L,h.memoizedState)||(pa=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),m.lastRenderedState=L}return[L,N]}function $y(u,h,m){var N=yn,A=Zr(),L=kn;if(L){if(m===void 0)throw Error(a(407));m=m()}else m=h();var J=!ji((nr||A).memoizedState,m);J&&(A.memoizedState=m,pa=!0),A=A.queue;var pe=jp.bind(null,N,A,u);if(eh(2048,8,pe,[u]),A.getSnapshot!==h||J||An!==null&&An.memoizedState.tag&1){if(N.flags|=2048,xu(9,Cp(),I0.bind(null,N,A,m,h),null),br===null)throw Error(a(349));L||(vs&124)!==0||bp(N,h,m)}return m}function bp(u,h,m){u.flags|=16384,u={getSnapshot:h,value:m},h=yn.updateQueue,h===null?(h=sc(),yn.updateQueue=h,h.stores=[u]):(m=h.stores,m===null?h.stores=[u]:m.push(u))}function I0(u,h,m,N){h.value=m,h.getSnapshot=N,By(h)&&zy(u)}function jp(u,h,m){return m(function(){By(h)&&zy(u)})}function By(u){var h=u.getSnapshot;u=u.value;try{var m=h();return!ji(u,m)}catch{return!0}}function zy(u){var h=Kl(u,2);h!==null&&ki(h,u,2)}function wp(u){var h=ri();if(typeof u=="function"){var m=u;if(u=m(),Da){me(!0);try{m()}finally{me(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:u},h}function Jd(u,h,m,N){return u.baseState=m,Ly(u,nr,typeof N=="function"?N:qs)}function u_(u,h,m,N,A){if(Ep(u))throw Error(a(485));if(u=h.action,u!==null){var L={payload:A,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){L.listeners.push(J)}};B.T!==null?m(!0):L.isTransition=!1,N(L),m=h.pending,m===null?(L.next=h.pending=L,qy(h,L)):(L.next=m.next,h.pending=m.next=L)}}function qy(u,h){var m=h.action,N=h.payload,A=u.state;if(h.isTransition){var L=B.T,J={};B.T=J;try{var pe=m(A,N),Oe=B.S;Oe!==null&&Oe(J,pe),Uy(u,h,pe)}catch(Je){Np(u,h,Je)}finally{B.T=L}}else try{L=m(A,N),Uy(u,h,L)}catch(Je){Np(u,h,Je)}}function Uy(u,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(N){R0(u,h,N)},function(N){return Np(u,h,N)}):R0(u,h,m)}function R0(u,h,m){h.status="fulfilled",h.value=m,L0(h),u.state=m,h=u.pending,h!==null&&(m=h.next,m===h?u.pending=null:(m=m.next,h.next=m,qy(u,m)))}function Np(u,h,m){var N=u.pending;if(u.pending=null,N!==null){N=N.next;do h.status="rejected",h.reason=m,L0(h),h=h.next;while(h!==N)}u.action=null}function L0(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function Sp(u,h){return h}function Vy(u,h){if(kn){var m=br.formState;if(m!==null){e:{var N=yn;if(kn){if(Pr){t:{for(var A=Pr,L=ei;A.nodeType!==8;){if(!L){A=null;break t}if(A=ws(A.nextSibling),A===null){A=null;break t}}L=A.data,A=L==="F!"||L==="F"?A:null}if(A){Pr=ws(A.nextSibling),N=A.data==="F!";break e}}Yi(N)}N=!1}N&&(h=m[0])}}return m=ri(),m.memoizedState=m.baseState=h,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sp,lastRenderedState:h},m.queue=N,m=Yy.bind(null,yn,N),N.dispatch=m,N=wp(!1),L=Qy.bind(null,yn,!1,N.queue),N=ri(),A={state:h,dispatch:null,action:u,pending:null},N.queue=A,m=u_.bind(null,yn,A,L,m),A.dispatch=m,N.memoizedState=u,[h,m,!1]}function _p(u){var h=Zr();return F0(h,nr,u)}function F0(u,h,m){if(h=Ly(u,h,Sp)[0],u=vp(qs)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var N=Qd(h)}catch(J){throw J===Va?pp:J}else N=h;h=Zr();var A=h.queue,L=A.dispatch;return m!==h.memoizedState&&(yn.flags|=2048,xu(9,Cp(),Hy.bind(null,A,m),null)),[N,L,u]}function Hy(u,h){u.action=h}function mn(u){var h=Zr(),m=nr;if(m!==null)return F0(h,m,u);Zr(),h=h.memoizedState,m=Zr();var N=m.queue.dispatch;return m.memoizedState=u,[h,N,!1]}function xu(u,h,m,N){return u={tag:u,create:m,deps:N,inst:h,next:null},h=yn.updateQueue,h===null&&(h=sc(),yn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=u.next=u:(N=m.next,m.next=u,u.next=N,h.lastEffect=u),u}function Cp(){return{destroy:void 0,resource:void 0}}function vu(){return Zr().memoizedState}function Zd(u,h,m,N){var A=ri();N=N===void 0?null:N,yn.flags|=u,A.memoizedState=xu(1|h,Cp(),m,N)}function eh(u,h,m,N){var A=Zr();N=N===void 0?null:N;var L=A.memoizedState.inst;nr!==null&&N!==null&&Yd(N,nr.memoizedState.deps)?A.memoizedState=xu(h,L,m,N):(yn.flags|=u,A.memoizedState=xu(1|h,L,m,N))}function $0(u,h){Zd(8390656,8,u,h)}function Si(u,h){eh(2048,8,u,h)}function B0(u,h){return eh(4,2,u,h)}function th(u,h){return eh(4,4,u,h)}function Tp(u,h){if(typeof h=="function"){u=u();var m=h(u);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function Gy(u,h,m){m=m!=null?m.concat([u]):null,eh(4,4,Tp.bind(null,h,u),m)}function kp(){}function ai(u,h){var m=Zr();h=h===void 0?null:h;var N=m.memoizedState;return h!==null&&Yd(h,N[1])?N[0]:(m.memoizedState=[u,h],u)}function bo(u,h){var m=Zr();h=h===void 0?null:h;var N=m.memoizedState;if(h!==null&&Yd(h,N[1]))return N[0];if(N=u(),Da){me(!0);try{u()}finally{me(!1)}}return m.memoizedState=[N,h],N}function nh(u,h,m){return m===void 0||(vs&1073741824)!==0?u.memoizedState=h:(u.memoizedState=m,u=v1(),yn.lanes|=u,pl|=u,m)}function Wy(u,h,m,N){return ji(m,h)?m:rc.current!==null?(u=nh(u,m,N),ji(u,h)||(pa=!0),u):(vs&42)===0?(pa=!0,u.memoizedState=m):(u=v1(),yn.lanes|=u,pl|=u,h)}function rh(u,h,m,N,A){var L=G.p;G.p=L!==0&&8>L?L:8;var J=B.T,pe={};B.T=pe,Qy(u,!1,h,m);try{var Oe=A(),Je=B.S;if(Je!==null&&Je(pe,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var ut=c_(Oe,N);oc(u,h,ut,Ma(u))}else oc(u,h,N,Ma(u))}catch(pt){oc(u,h,{then:function(){},status:"rejected",reason:pt},Ma())}finally{G.p=L,B.T=J}}function z0(){}function ah(u,h,m,N){if(u.tag!==5)throw Error(a(476));var A=Ky(u).queue;rh(u,A,h,ee,m===null?z0:function(){return Ap(u),m(N)})}function Ky(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:ee},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:m},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function Ap(u){var h=Ky(u).next.queue;oc(u,h,{},Ma())}function ih(){return Ur(Bu)}function jo(){return Zr().memoizedState}function q0(){return Zr().memoizedState}function ll(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var m=Ma();u=il(m);var N=xo(h,u,m);N!==null&&(ki(N,h,m),Wd(N,h,m)),h={cache:ky()},u.payload=h;return}h=h.return}}function U0(u,h,m){var N=Ma();m={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Ep(u)?V0(h,m):(m=uu(u,h,m,N),m!==null&&(ki(m,u,N),Xy(m,h,N)))}function Yy(u,h,m){var N=Ma();oc(u,h,m,N)}function oc(u,h,m,N){var A={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Ep(u))V0(h,A);else{var L=u.alternate;if(u.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var J=h.lastRenderedState,pe=L(J,m);if(A.hasEagerState=!0,A.eagerState=pe,ji(pe,J))return ms(u,h,A,0),br===null&&Wl(),!1}catch{}finally{}if(m=uu(u,h,A,N),m!==null)return ki(m,u,N),Xy(m,h,N),!0}return!1}function Qy(u,h,m,N){if(N={lane:2,revertLane:Jp(),action:N,hasEagerState:!1,eagerState:null,next:null},Ep(u)){if(h)throw Error(a(479))}else h=uu(u,m,N,2),h!==null&&ki(h,u,2)}function Ep(u){var h=u.alternate;return u===yn||h!==null&&h===yn}function V0(u,h){ac=gu=!0;var m=u.pending;m===null?h.next=h:(h.next=m.next,m.next=h),u.pending=h}function Xy(u,h,m){if((m&4194048)!==0){var N=h.lanes;N&=u.pendingLanes,m|=N,h.lanes=m,Ue(u,m)}}var sh={readContext:Ur,use:xp,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn},H0={readContext:Ur,use:xp,useCallback:function(u,h){return ri().memoizedState=[u,h===void 0?null:h],u},useContext:Ur,useEffect:$0,useImperativeHandle:function(u,h,m){m=m!=null?m.concat([u]):null,Zd(4194308,4,Tp.bind(null,h,u),m)},useLayoutEffect:function(u,h){return Zd(4194308,4,u,h)},useInsertionEffect:function(u,h){Zd(4,2,u,h)},useMemo:function(u,h){var m=ri();h=h===void 0?null:h;var N=u();if(Da){me(!0);try{u()}finally{me(!1)}}return m.memoizedState=[N,h],N},useReducer:function(u,h,m){var N=ri();if(m!==void 0){var A=m(h);if(Da){me(!0);try{m(h)}finally{me(!1)}}}else A=h;return N.memoizedState=N.baseState=A,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:A},N.queue=u,u=u.dispatch=U0.bind(null,yn,u),[N.memoizedState,u]},useRef:function(u){var h=ri();return u={current:u},h.memoizedState=u},useState:function(u){u=wp(u);var h=u.queue,m=Yy.bind(null,yn,h);return h.dispatch=m,[u.memoizedState,m]},useDebugValue:kp,useDeferredValue:function(u,h){var m=ri();return nh(m,u,h)},useTransition:function(){var u=wp(!1);return u=rh.bind(null,yn,u.queue,!0,!1),ri().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,m){var N=yn,A=ri();if(kn){if(m===void 0)throw Error(a(407));m=m()}else{if(m=h(),br===null)throw Error(a(349));(Fn&124)!==0||bp(N,h,m)}A.memoizedState=m;var L={value:m,getSnapshot:h};return A.queue=L,$0(jp.bind(null,N,L,u),[u]),N.flags|=2048,xu(9,Cp(),I0.bind(null,N,L,m,h),null),m},useId:function(){var u=ri(),h=br.identifierPrefix;if(kn){var m=go,N=Er;m=(N&~(1<<32-he(N)-1)).toString(32)+m,h=""+h+"R"+m,m=yu++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=D0++,h=""+h+"r"+m.toString(32)+"";return u.memoizedState=h},useHostTransitionStatus:ih,useFormState:Vy,useActionState:Vy,useOptimistic:function(u){var h=ri();h.memoizedState=h.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=Qy.bind(null,yn,!0,m),m.dispatch=h,[u,h]},useMemoCache:Xd,useCacheRefresh:function(){return ri().memoizedState=ll.bind(null,yn)}},Jy={readContext:Ur,use:xp,useCallback:ai,useContext:Ur,useEffect:Si,useImperativeHandle:Gy,useInsertionEffect:B0,useLayoutEffect:th,useMemo:bo,useReducer:vp,useRef:vu,useState:function(){return vp(qs)},useDebugValue:kp,useDeferredValue:function(u,h){var m=Zr();return Wy(m,nr.memoizedState,u,h)},useTransition:function(){var u=vp(qs)[0],h=Zr().memoizedState;return[typeof u=="boolean"?u:Qd(u),h]},useSyncExternalStore:$y,useId:jo,useHostTransitionStatus:ih,useFormState:_p,useActionState:_p,useOptimistic:function(u,h){var m=Zr();return Jd(m,nr,u,h)},useMemoCache:Xd,useCacheRefresh:q0},G0={readContext:Ur,use:xp,useCallback:ai,useContext:Ur,useEffect:Si,useImperativeHandle:Gy,useInsertionEffect:B0,useLayoutEffect:th,useMemo:bo,useReducer:Fy,useRef:vu,useState:function(){return Fy(qs)},useDebugValue:kp,useDeferredValue:function(u,h){var m=Zr();return nr===null?nh(m,u,h):Wy(m,nr.memoizedState,u,h)},useTransition:function(){var u=Fy(qs)[0],h=Zr().memoizedState;return[typeof u=="boolean"?u:Qd(u),h]},useSyncExternalStore:$y,useId:jo,useHostTransitionStatus:ih,useFormState:mn,useActionState:mn,useOptimistic:function(u,h){var m=Zr();return nr!==null?Jd(m,nr,u,h):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:q0},sa=null,ii=0;function Pp(u){var h=ii;return ii+=1,sa===null&&(sa=[]),Py(sa,u,h)}function oh(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function lc(u,h){throw h.$$typeof===p?Error(a(525)):(u=Object.prototype.toString.call(h),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function cc(u){var h=u._init;return h(u._payload)}function Zy(u){function h(We,qe){if(u){var Ye=We.deletions;Ye===null?(We.deletions=[qe],We.flags|=16):Ye.push(qe)}}function m(We,qe){if(!u)return null;for(;qe!==null;)h(We,qe),qe=qe.sibling;return null}function N(We){for(var qe=new Map;We!==null;)We.key!==null?qe.set(We.key,We):qe.set(We.index,We),We=We.sibling;return qe}function A(We,qe){return We=Ua(We,qe),We.index=0,We.sibling=null,We}function L(We,qe,Ye){return We.index=Ye,u?(Ye=We.alternate,Ye!==null?(Ye=Ye.index,Ye<qe?(We.flags|=67108866,qe):Ye):(We.flags|=67108866,qe)):(We.flags|=1048576,qe)}function J(We){return u&&We.alternate===null&&(We.flags|=67108866),We}function pe(We,qe,Ye,ht){return qe===null||qe.tag!==6?(qe=_y(Ye,We.mode,ht),qe.return=We,qe):(qe=A(qe,Ye),qe.return=We,qe)}function Oe(We,qe,Ye,ht){var Mt=Ye.type;return Mt===b?ut(We,qe,Ye.props.children,ht,Ye.key):qe!==null&&(qe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===R&&cc(Mt)===qe.type)?(qe=A(qe,Ye.props),oh(qe,Ye),qe.return=We,qe):(qe=cp(Ye.type,Ye.key,Ye.props,null,We.mode,ht),oh(qe,Ye),qe.return=We,qe)}function Je(We,qe,Ye,ht){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==Ye.containerInfo||qe.stateNode.implementation!==Ye.implementation?(qe=du(Ye,We.mode,ht),qe.return=We,qe):(qe=A(qe,Ye.children||[]),qe.return=We,qe)}function ut(We,qe,Ye,ht,Mt){return qe===null||qe.tag!==7?(qe=Xl(Ye,We.mode,ht,Mt),qe.return=We,qe):(qe=A(qe,Ye),qe.return=We,qe)}function pt(We,qe,Ye){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=_y(""+qe,We.mode,Ye),qe.return=We,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case g:return Ye=cp(qe.type,qe.key,qe.props,null,We.mode,Ye),oh(Ye,qe),Ye.return=We,Ye;case x:return qe=du(qe,We.mode,Ye),qe.return=We,qe;case R:var ht=qe._init;return qe=ht(qe._payload),pt(We,qe,Ye)}if(W(qe)||V(qe))return qe=Xl(qe,We.mode,Ye,null),qe.return=We,qe;if(typeof qe.then=="function")return pt(We,Pp(qe),Ye);if(qe.$$typeof===C)return pt(We,hp(We,qe),Ye);lc(We,qe)}return null}function tt(We,qe,Ye,ht){var Mt=qe!==null?qe.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Mt!==null?null:pe(We,qe,""+Ye,ht);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case g:return Ye.key===Mt?Oe(We,qe,Ye,ht):null;case x:return Ye.key===Mt?Je(We,qe,Ye,ht):null;case R:return Mt=Ye._init,Ye=Mt(Ye._payload),tt(We,qe,Ye,ht)}if(W(Ye)||V(Ye))return Mt!==null?null:ut(We,qe,Ye,ht,null);if(typeof Ye.then=="function")return tt(We,qe,Pp(Ye),ht);if(Ye.$$typeof===C)return tt(We,qe,hp(We,Ye),ht);lc(We,Ye)}return null}function Ze(We,qe,Ye,ht,Mt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return We=We.get(Ye)||null,pe(qe,We,""+ht,Mt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case g:return We=We.get(ht.key===null?Ye:ht.key)||null,Oe(qe,We,ht,Mt);case x:return We=We.get(ht.key===null?Ye:ht.key)||null,Je(qe,We,ht,Mt);case R:var bn=ht._init;return ht=bn(ht._payload),Ze(We,qe,Ye,ht,Mt)}if(W(ht)||V(ht))return We=We.get(Ye)||null,ut(qe,We,ht,Mt,null);if(typeof ht.then=="function")return Ze(We,qe,Ye,Pp(ht),Mt);if(ht.$$typeof===C)return Ze(We,qe,Ye,hp(qe,ht),Mt);lc(qe,ht)}return null}function Kt(We,qe,Ye,ht){for(var Mt=null,bn=null,Bt=qe,Yt=qe=0,ya=null;Bt!==null&&Yt<Ye.length;Yt++){Bt.index>Yt?(ya=Bt,Bt=null):ya=Bt.sibling;var zn=tt(We,Bt,Ye[Yt],ht);if(zn===null){Bt===null&&(Bt=ya);break}u&&Bt&&zn.alternate===null&&h(We,Bt),qe=L(zn,qe,Yt),bn===null?Mt=zn:bn.sibling=zn,bn=zn,Bt=ya}if(Yt===Ye.length)return m(We,Bt),kn&&Jl(We,Yt),Mt;if(Bt===null){for(;Yt<Ye.length;Yt++)Bt=pt(We,Ye[Yt],ht),Bt!==null&&(qe=L(Bt,qe,Yt),bn===null?Mt=Bt:bn.sibling=Bt,bn=Bt);return kn&&Jl(We,Yt),Mt}for(Bt=N(Bt);Yt<Ye.length;Yt++)ya=Ze(Bt,We,Yt,Ye[Yt],ht),ya!==null&&(u&&ya.alternate!==null&&Bt.delete(ya.key===null?Yt:ya.key),qe=L(ya,qe,Yt),bn===null?Mt=ya:bn.sibling=ya,bn=ya);return u&&Bt.forEach(function(Sl){return h(We,Sl)}),kn&&Jl(We,Yt),Mt}function Wt(We,qe,Ye,ht){if(Ye==null)throw Error(a(151));for(var Mt=null,bn=null,Bt=qe,Yt=qe=0,ya=null,zn=Ye.next();Bt!==null&&!zn.done;Yt++,zn=Ye.next()){Bt.index>Yt?(ya=Bt,Bt=null):ya=Bt.sibling;var Sl=tt(We,Bt,zn.value,ht);if(Sl===null){Bt===null&&(Bt=ya);break}u&&Bt&&Sl.alternate===null&&h(We,Bt),qe=L(Sl,qe,Yt),bn===null?Mt=Sl:bn.sibling=Sl,bn=Sl,Bt=ya}if(zn.done)return m(We,Bt),kn&&Jl(We,Yt),Mt;if(Bt===null){for(;!zn.done;Yt++,zn=Ye.next())zn=pt(We,zn.value,ht),zn!==null&&(qe=L(zn,qe,Yt),bn===null?Mt=zn:bn.sibling=zn,bn=zn);return kn&&Jl(We,Yt),Mt}for(Bt=N(Bt);!zn.done;Yt++,zn=Ye.next())zn=Ze(Bt,We,Yt,zn.value,ht),zn!==null&&(u&&zn.alternate!==null&&Bt.delete(zn.key===null?Yt:zn.key),qe=L(zn,qe,Yt),bn===null?Mt=zn:bn.sibling=zn,bn=zn);return u&&Bt.forEach(function(G_){return h(We,G_)}),kn&&Jl(We,Yt),Mt}function cr(We,qe,Ye,ht){if(typeof Ye=="object"&&Ye!==null&&Ye.type===b&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case g:e:{for(var Mt=Ye.key;qe!==null;){if(qe.key===Mt){if(Mt=Ye.type,Mt===b){if(qe.tag===7){m(We,qe.sibling),ht=A(qe,Ye.props.children),ht.return=We,We=ht;break e}}else if(qe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===R&&cc(Mt)===qe.type){m(We,qe.sibling),ht=A(qe,Ye.props),oh(ht,Ye),ht.return=We,We=ht;break e}m(We,qe);break}else h(We,qe);qe=qe.sibling}Ye.type===b?(ht=Xl(Ye.props.children,We.mode,ht,Ye.key),ht.return=We,We=ht):(ht=cp(Ye.type,Ye.key,Ye.props,null,We.mode,ht),oh(ht,Ye),ht.return=We,We=ht)}return J(We);case x:e:{for(Mt=Ye.key;qe!==null;){if(qe.key===Mt)if(qe.tag===4&&qe.stateNode.containerInfo===Ye.containerInfo&&qe.stateNode.implementation===Ye.implementation){m(We,qe.sibling),ht=A(qe,Ye.children||[]),ht.return=We,We=ht;break e}else{m(We,qe);break}else h(We,qe);qe=qe.sibling}ht=du(Ye,We.mode,ht),ht.return=We,We=ht}return J(We);case R:return Mt=Ye._init,Ye=Mt(Ye._payload),cr(We,qe,Ye,ht)}if(W(Ye))return Kt(We,qe,Ye,ht);if(V(Ye)){if(Mt=V(Ye),typeof Mt!="function")throw Error(a(150));return Ye=Mt.call(Ye),Wt(We,qe,Ye,ht)}if(typeof Ye.then=="function")return cr(We,qe,Pp(Ye),ht);if(Ye.$$typeof===C)return cr(We,qe,hp(We,Ye),ht);lc(We,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint"?(Ye=""+Ye,qe!==null&&qe.tag===6?(m(We,qe.sibling),ht=A(qe,Ye),ht.return=We,We=ht):(m(We,qe),ht=_y(Ye,We.mode,ht),ht.return=We,We=ht),J(We)):m(We,qe)}return function(We,qe,Ye,ht){try{ii=0;var Mt=cr(We,qe,Ye,ht);return sa=null,Mt}catch(Bt){if(Bt===Va||Bt===pp)throw Bt;var bn=Za(29,Bt,null,We.mode);return bn.lanes=ht,bn.return=We,bn}finally{}}}var uc=Zy(!0),W0=Zy(!1),_i=ce(null),Ha=null;function Ji(u){var h=u.alternate;Y(Vr,Vr.current&1),Y(_i,u),Ha===null&&(h===null||rc.current!==null||h.memoizedState!==null)&&(Ha=u)}function K0(u){if(u.tag===22){if(Y(Vr,Vr.current),Y(_i,u),Ha===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(Ha=u)}}else wo()}function wo(){Y(Vr,Vr.current),Y(_i,_i.current)}function Us(u){xe(_i),Ha===u&&(Ha=null),xe(Vr)}var Vr=ce(0);function lh(u){for(var h=u;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Wa(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function bu(u,h,m,N){h=u.memoizedState,m=m(N,h),m=m==null?h:f({},h,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var ch={enqueueSetState:function(u,h,m){u=u._reactInternals;var N=Ma(),A=il(N);A.payload=h,m!=null&&(A.callback=m),h=xo(u,A,N),h!==null&&(ki(h,u,N),Wd(h,u,N))},enqueueReplaceState:function(u,h,m){u=u._reactInternals;var N=Ma(),A=il(N);A.tag=1,A.payload=h,m!=null&&(A.callback=m),h=xo(u,A,N),h!==null&&(ki(h,u,N),Wd(h,u,N))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var m=Ma(),N=il(m);N.tag=2,h!=null&&(N.callback=h),h=xo(u,N,m),h!==null&&(ki(h,u,m),Wd(h,u,m))}};function uh(u,h,m,N,A,L,J){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(N,L,J):h.prototype&&h.prototype.isPureReactComponent?!Bs(m,N)||!Bs(A,L):!0}function Y0(u,h,m,N){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,N),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,N),h.state!==u&&ch.enqueueReplaceState(h,h.state,null)}function cl(u,h){var m=h;if("ref"in h){m={};for(var N in h)N!=="ref"&&(m[N]=h[N])}if(u=u.defaultProps){m===h&&(m=f({},m));for(var A in u)m[A]===void 0&&(m[A]=u[A])}return m}var dc=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function ex(u){dc(u)}function Dp(u){console.error(u)}function Q0(u){dc(u)}function dh(u,h){try{var m=u.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(N){setTimeout(function(){throw N})}}function Vs(u,h,m){try{var N=u.onCaughtError;N(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Op(u,h,m){return m=il(m),m.tag=3,m.payload={element:null},m.callback=function(){dh(u,h)},m}function tx(u){return u=il(u),u.tag=3,u}function X0(u,h,m,N){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var L=N.value;u.payload=function(){return A(L)},u.callback=function(){Vs(h,m,N)}}var J=m.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(u.callback=function(){Vs(h,m,N),typeof A!="function"&&(ml===null?ml=new Set([this]):ml.add(this));var pe=N.stack;this.componentDidCatch(N.value,{componentStack:pe!==null?pe:""})})}function J0(u,h,m,N,A){if(m.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(h=m.alternate,h!==null&&Vd(h,m,A,!0),m=_i.current,m!==null){switch(m.tag){case 13:return Ha===null?bx():m.alternate===null&&Hr===0&&(Hr=3),m.flags&=-257,m.flags|=65536,m.lanes=A,N===Ey?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([N]):h.add(N),Nx(u,N,A)),!1;case 22:return m.flags|=65536,N===Ey?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([N])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([N]):m.add(N)),Nx(u,N,A)),!1}throw Error(a(435,m.tag))}return Nx(u,N,A),bx(),!1}if(kn)return h=_i.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=A,N!==hu&&(u=Error(a(422),{cause:N}),rl(qa(u,m)))):(N!==hu&&(h=Error(a(423),{cause:N}),rl(qa(h,m))),u=u.current.alternate,u.flags|=65536,A&=-A,u.lanes|=A,N=qa(N,m),A=Op(u.stateNode,N,A),ys(u,A),Hr!==4&&(Hr=2)),!1;var L=Error(a(520),{cause:N});if(L=qa(L,m),jh===null?jh=[L]:jh.push(L),Hr!==4&&(Hr=2),h===null)return!0;N=qa(N,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,u=A&-A,m.lanes|=u,u=Op(m.stateNode,N,u),ys(m,u),!1;case 1:if(h=m.type,L=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(ml===null||!ml.has(L))))return m.flags|=65536,A&=-A,m.lanes|=A,A=tx(A),X0(A,u,m,N),ys(m,A),!1}m=m.return}while(m!==null);return!1}var Z0=Error(a(461)),pa=!1;function _r(u,h,m,N){h.child=u===null?W0(h,null,m,N):uc(h,u.child,m,N)}function Mp(u,h,m,N,A){m=m.render;var L=h.ref;if("ref"in N){var J={};for(var pe in N)pe!=="ref"&&(J[pe]=N[pe])}else J=N;return ec(h),N=My(u,h,m,J,L,A),pe=Ry(),u!==null&&!pa?(ic(u,h,A),No(u,h,A)):(kn&&pe&&Ty(h),h.flags|=1,_r(u,h,N,A),h.child)}function Ip(u,h,m,N,A){if(u===null){var L=m.type;return typeof L=="function"&&!Ql(L)&&L.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=L,Rp(u,h,L,N,A)):(u=cp(m.type,null,N,h,h.mode,A),u.ref=h.ref,u.return=h,h.child=u)}if(L=u.child,!bs(u,A)){var J=L.memoizedProps;if(m=m.compare,m=m!==null?m:Bs,m(J,N)&&u.ref===h.ref)return No(u,h,A)}return h.flags|=1,u=Ua(L,N),u.ref=h.ref,u.return=h,h.child=u}function Rp(u,h,m,N,A){if(u!==null){var L=u.memoizedProps;if(Bs(L,N)&&u.ref===h.ref)if(pa=!1,h.pendingProps=N=L,bs(u,A))(u.flags&131072)!==0&&(pa=!0);else return h.lanes=u.lanes,No(u,h,A)}return ju(u,h,m,N,A)}function hh(u,h,m){var N=h.pendingProps,A=N.children,L=u!==null?u.memoizedState:null;if(N.mode==="hidden"){if((h.flags&128)!==0){if(N=L!==null?L.baseLanes|m:m,u!==null){for(A=h.child=u.child,L=0;A!==null;)L=L|A.lanes|A.childLanes,A=A.sibling;h.childLanes=L&~N}else h.childLanes=0,h.child=null;return hc(u,h,N,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&fp(h,L!==null?L.cachePool:null),L!==null?vo(h,L):gp(),K0(h);else return h.lanes=h.childLanes=536870912,hc(u,h,L!==null?L.baseLanes|m:m,m)}else L!==null?(fp(h,L.cachePool),vo(h,L),wo(),h.memoizedState=null):(u!==null&&fp(h,null),gp(),wo());return _r(u,h,A,m),h.child}function hc(u,h,m,N){var A=yo();return A=A===null?null:{parent:mr._currentValue,pool:A},h.memoizedState={baseLanes:m,cachePool:A},u!==null&&fp(h,null),gp(),K0(h),u!==null&&Vd(u,h,N,!0),null}function qt(u,h){var m=h.ref;if(m===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(a(284));(u===null||u.ref!==m)&&(h.flags|=4194816)}}function ju(u,h,m,N,A){return ec(h),m=My(u,h,m,N,void 0,A),N=Ry(),u!==null&&!pa?(ic(u,h,A),No(u,h,A)):(kn&&N&&Ty(h),h.flags|=1,_r(u,h,m,A),h.child)}function Lp(u,h,m,N,A,L){return ec(h),h.updateQueue=null,m=M0(h,N,m,A),O0(u),N=Ry(),u!==null&&!pa?(ic(u,h,L),No(u,h,L)):(kn&&N&&Ty(h),h.flags|=1,_r(u,h,m,L),h.child)}function ul(u,h,m,N,A){if(ec(h),h.stateNode===null){var L=Yl,J=m.contextType;typeof J=="object"&&J!==null&&(L=Ur(J)),L=new m(N,L),h.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=ch,h.stateNode=L,L._reactInternals=h,L=h.stateNode,L.props=N,L.state=h.memoizedState,L.refs={},nc(h),J=m.contextType,L.context=typeof J=="object"&&J!==null?Ur(J):Yl,L.state=h.memoizedState,J=m.getDerivedStateFromProps,typeof J=="function"&&(bu(h,m,J,N),L.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(J=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),J!==L.state&&ch.enqueueReplaceState(L,L.state,null),Pa(h,N,L,A),xs(),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308),N=!0}else if(u===null){L=h.stateNode;var pe=h.memoizedProps,Oe=cl(m,pe);L.props=Oe;var Je=L.context,ut=m.contextType;J=Yl,typeof ut=="object"&&ut!==null&&(J=Ur(ut));var pt=m.getDerivedStateFromProps;ut=typeof pt=="function"||typeof L.getSnapshotBeforeUpdate=="function",pe=h.pendingProps!==pe,ut||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(pe||Je!==J)&&Y0(h,L,N,J),zs=!1;var tt=h.memoizedState;L.state=tt,Pa(h,N,L,A),xs(),Je=h.memoizedState,pe||tt!==Je||zs?(typeof pt=="function"&&(bu(h,m,pt,N),Je=h.memoizedState),(Oe=zs||uh(h,m,Oe,N,tt,Je,J))?(ut||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(h.flags|=4194308)):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=N,h.memoizedState=Je),L.props=N,L.state=Je,L.context=J,N=Oe):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),N=!1)}else{L=h.stateNode,mu(u,h),J=h.memoizedProps,ut=cl(m,J),L.props=ut,pt=h.pendingProps,tt=L.context,Je=m.contextType,Oe=Yl,typeof Je=="object"&&Je!==null&&(Oe=Ur(Je)),pe=m.getDerivedStateFromProps,(Je=typeof pe=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(J!==pt||tt!==Oe)&&Y0(h,L,N,Oe),zs=!1,tt=h.memoizedState,L.state=tt,Pa(h,N,L,A),xs();var Ze=h.memoizedState;J!==pt||tt!==Ze||zs||u!==null&&u.dependencies!==null&&dp(u.dependencies)?(typeof pe=="function"&&(bu(h,m,pe,N),Ze=h.memoizedState),(ut=zs||uh(h,m,ut,N,tt,Ze,Oe)||u!==null&&u.dependencies!==null&&dp(u.dependencies))?(Je||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(N,Ze,Oe),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(N,Ze,Oe)),typeof L.componentDidUpdate=="function"&&(h.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof L.componentDidUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=1024),h.memoizedProps=N,h.memoizedState=Ze),L.props=N,L.state=Ze,L.context=Oe,N=ut):(typeof L.componentDidUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=1024),N=!1)}return L=N,qt(u,h),N=(h.flags&128)!==0,L||N?(L=h.stateNode,m=N&&typeof m.getDerivedStateFromError!="function"?null:L.render(),h.flags|=1,u!==null&&N?(h.child=uc(h,u.child,null,A),h.child=uc(h,null,m,A)):_r(u,h,m,A),h.memoizedState=L.state,u=h.child):u=No(u,h,A),u}function e1(u,h,m,N){return Ud(),h.flags|=256,_r(u,h,m,N),h.child}var fh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fp(u){return{baseLanes:u,cachePool:C0()}}function ma(u,h,m){return u=u!==null?u.childLanes&~m:0,h&&(u|=es),u}function t1(u,h,m){var N=h.pendingProps,A=!1,L=(h.flags&128)!==0,J;if((J=L)||(J=u!==null&&u.memoizedState===null?!1:(Vr.current&2)!==0),J&&(A=!0,h.flags&=-129),J=(h.flags&32)!==0,h.flags&=-33,u===null){if(kn){if(A?Ji(h):wo(),kn){var pe=Pr,Oe;if(Oe=pe){e:{for(Oe=pe,pe=ei;Oe.nodeType!==8;){if(!pe){pe=null;break e}if(Oe=ws(Oe.nextSibling),Oe===null){pe=null;break e}}pe=Oe}pe!==null?(h.memoizedState={dehydrated:pe,treeContext:Sr!==null?{id:Er,overflow:go}:null,retryLane:536870912,hydrationErrors:null},Oe=Za(18,null,null,0),Oe.stateNode=pe,Oe.return=h,h.child=Oe,ia=h,Pr=null,Oe=!0):Oe=!1}Oe||Yi(h)}if(pe=h.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))return Wa(pe)?h.lanes=32:h.lanes=536870912,null;Us(h)}return pe=N.children,N=N.fallback,A?(wo(),A=h.mode,pe=ph({mode:"hidden",children:pe},A),N=Xl(N,A,m,null),pe.return=h,N.return=h,pe.sibling=N,h.child=pe,A=h.child,A.memoizedState=Fp(m),A.childLanes=ma(u,J,m),h.memoizedState=fh,N):(Ji(h),nx(h,pe))}if(Oe=u.memoizedState,Oe!==null&&(pe=Oe.dehydrated,pe!==null)){if(L)h.flags&256?(Ji(h),h.flags&=-257,h=rx(u,h,m)):h.memoizedState!==null?(wo(),h.child=u.child,h.flags|=128,h=null):(wo(),A=N.fallback,pe=h.mode,N=ph({mode:"visible",children:N.children},pe),A=Xl(A,pe,m,null),A.flags|=2,N.return=h,A.return=h,N.sibling=A,h.child=N,uc(h,u.child,null,m),N=h.child,N.memoizedState=Fp(m),N.childLanes=ma(u,J,m),h.memoizedState=fh,h=A);else if(Ji(h),Wa(pe)){if(J=pe.nextSibling&&pe.nextSibling.dataset,J)var Je=J.dgst;J=Je,N=Error(a(419)),N.stack="",N.digest=J,rl({value:N,source:null,stack:null}),h=rx(u,h,m)}else if(pa||Vd(u,h,m,!1),J=(m&u.childLanes)!==0,pa||J){if(J=br,J!==null&&(N=m&-m,N=(N&42)!==0?1:jt(N),N=(N&(J.suspendedLanes|m))!==0?0:N,N!==0&&N!==Oe.retryLane))throw Oe.retryLane=N,Kl(u,N),ki(J,u,N),Z0;pe.data==="$?"||bx(),h=rx(u,h,m)}else pe.data==="$?"?(h.flags|=192,h.child=u.child,h=null):(u=Oe.treeContext,Pr=ws(pe.nextSibling),ia=h,kn=!0,gs=null,ei=!1,u!==null&&(Wi[Ki++]=Er,Wi[Ki++]=go,Wi[Ki++]=Sr,Er=u.id,go=u.overflow,Sr=h),h=nx(h,N.children),h.flags|=4096);return h}return A?(wo(),A=N.fallback,pe=h.mode,Oe=u.child,Je=Oe.sibling,N=Ua(Oe,{mode:"hidden",children:N.children}),N.subtreeFlags=Oe.subtreeFlags&65011712,Je!==null?A=Ua(Je,A):(A=Xl(A,pe,m,null),A.flags|=2),A.return=h,N.return=h,N.sibling=A,h.child=N,N=A,A=h.child,pe=u.child.memoizedState,pe===null?pe=Fp(m):(Oe=pe.cachePool,Oe!==null?(Je=mr._currentValue,Oe=Oe.parent!==Je?{parent:Je,pool:Je}:Oe):Oe=C0(),pe={baseLanes:pe.baseLanes|m,cachePool:Oe}),A.memoizedState=pe,A.childLanes=ma(u,J,m),h.memoizedState=fh,N):(Ji(h),m=u.child,u=m.sibling,m=Ua(m,{mode:"visible",children:N.children}),m.return=h,m.sibling=null,u!==null&&(J=h.deletions,J===null?(h.deletions=[u],h.flags|=16):J.push(u)),h.child=m,h.memoizedState=null,m)}function nx(u,h){return h=ph({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function ph(u,h){return u=Za(22,u,null,h),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function rx(u,h,m){return uc(h,u.child,null,m),u=nx(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function ax(u,h,m){u.lanes|=h;var N=u.alternate;N!==null&&(N.lanes|=h),ti(u.return,h,m)}function ix(u,h,m,N,A){var L=u.memoizedState;L===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:N,tail:m,tailMode:A}:(L.isBackwards=h,L.rendering=null,L.renderingStartTime=0,L.last=N,L.tail=m,L.tailMode=A)}function n1(u,h,m){var N=h.pendingProps,A=N.revealOrder,L=N.tail;if(_r(u,h,N.children,m),N=Vr.current,(N&2)!==0)N=N&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&ax(u,m,h);else if(u.tag===19)ax(u,m,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}N&=1}switch(Y(Vr,N),A){case"forwards":for(m=h.child,A=null;m!==null;)u=m.alternate,u!==null&&lh(u)===null&&(A=m),m=m.sibling;m=A,m===null?(A=h.child,h.child=null):(A=m.sibling,m.sibling=null),ix(h,!1,A,m,L);break;case"backwards":for(m=null,A=h.child,h.child=null;A!==null;){if(u=A.alternate,u!==null&&lh(u)===null){h.child=A;break}u=A.sibling,A.sibling=m,m=A,A=u}ix(h,!0,m,null,L);break;case"together":ix(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function No(u,h,m){if(u!==null&&(h.dependencies=u.dependencies),pl|=h.lanes,(m&h.childLanes)===0)if(u!==null){if(Vd(u,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(a(153));if(h.child!==null){for(u=h.child,m=Ua(u,u.pendingProps),h.child=m,m.return=h;u.sibling!==null;)u=u.sibling,m=m.sibling=Ua(u,u.pendingProps),m.return=h;m.sibling=null}return h.child}function bs(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&dp(u)))}function Ga(u,h,m){switch(h.tag){case 3:oe(h,h.stateNode.containerInfo),Ni(h,mr,u.memoizedState.cache),Ud();break;case 27:case 5:Ve(h);break;case 4:oe(h,h.stateNode.containerInfo);break;case 10:Ni(h,h.type,h.memoizedProps.value);break;case 13:var N=h.memoizedState;if(N!==null)return N.dehydrated!==null?(Ji(h),h.flags|=128,null):(m&h.child.childLanes)!==0?t1(u,h,m):(Ji(h),u=No(u,h,m),u!==null?u.sibling:null);Ji(h);break;case 19:var A=(u.flags&128)!==0;if(N=(m&h.childLanes)!==0,N||(Vd(u,h,m,!1),N=(m&h.childLanes)!==0),A){if(N)return n1(u,h,m);h.flags|=128}if(A=h.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Y(Vr,Vr.current),N)break;return null;case 22:case 23:return h.lanes=0,hh(u,h,m);case 24:Ni(h,mr,u.memoizedState.cache)}return No(u,h,m)}function $p(u,h,m){if(u!==null)if(u.memoizedProps!==h.pendingProps)pa=!0;else{if(!bs(u,m)&&(h.flags&128)===0)return pa=!1,Ga(u,h,m);pa=(u.flags&131072)!==0}else pa=!1,kn&&(h.flags&1048576)!==0&&Cy(h,Bd,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var N=h.elementType,A=N._init;if(N=A(N._payload),h.type=N,typeof N=="function")Ql(N)?(u=cl(N,u),h.tag=1,h=ul(null,h,N,u,m)):(h.tag=0,h=ju(null,h,N,u,m));else{if(N!=null){if(A=N.$$typeof,A===E){h.tag=11,h=Mp(null,h,N,u,m);break e}else if(A===I){h.tag=14,h=Ip(null,h,N,u,m);break e}}throw h=K(N)||N,Error(a(306,h,""))}}return h;case 0:return ju(u,h,h.type,h.pendingProps,m);case 1:return N=h.type,A=cl(N,h.pendingProps),ul(u,h,N,A,m);case 3:e:{if(oe(h,h.stateNode.containerInfo),u===null)throw Error(a(387));N=h.pendingProps;var L=h.memoizedState;A=L.element,mu(u,h),Pa(h,N,null,m);var J=h.memoizedState;if(N=J.cache,Ni(h,mr,N),N!==L.cache&&vn(h,[mr],m,!0),xs(),N=J.element,L.isDehydrated)if(L={element:N,isDehydrated:!1,cache:J.cache},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){h=e1(u,h,N,m);break e}else if(N!==A){A=qa(Error(a(424)),h),rl(A),h=e1(u,h,N,m);break e}else{switch(u=h.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Pr=ws(u.firstChild),ia=h,kn=!0,gs=null,ei=!0,m=W0(h,null,N,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Ud(),N===A){h=No(u,h,m);break e}_r(u,h,N,m)}h=h.child}return h;case 26:return qt(u,h),u===null?(m=J1(h.type,null,h.pendingProps,null))?h.memoizedState=m:kn||(m=h.type,u=h.pendingProps,N=mc(ze.current).createElement(m),N[Vt]=h,N[Yn]=u,ca(N,m,u),Ot(N),h.stateNode=N):h.memoizedState=J1(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:return Ve(h),u===null&&kn&&(N=h.stateNode=Y1(h.type,h.pendingProps,ze.current),ia=h,ei=!0,A=Pr,ts(h.type)?(Dx=A,Pr=ws(N.firstChild)):Pr=A),_r(u,h,h.pendingProps.children,m),qt(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&kn&&((A=N=Pr)&&(N=W1(N,h.type,h.pendingProps,ei),N!==null?(h.stateNode=N,ia=h,Pr=ws(N.firstChild),ei=!1,A=!0):A=!1),A||Yi(h)),Ve(h),A=h.type,L=h.pendingProps,J=u!==null?u.memoizedProps:null,N=L.children,nm(A,L)?N=null:J!==null&&nm(A,J)&&(h.flags|=32),h.memoizedState!==null&&(A=My(u,h,Iy,null,null,m),Bu._currentValue=A),qt(u,h),_r(u,h,N,m),h.child;case 6:return u===null&&kn&&((u=m=Pr)&&(m=am(m,h.pendingProps,ei),m!==null?(h.stateNode=m,ia=h,Pr=null,u=!0):u=!1),u||Yi(h)),null;case 13:return t1(u,h,m);case 4:return oe(h,h.stateNode.containerInfo),N=h.pendingProps,u===null?h.child=uc(h,null,N,m):_r(u,h,N,m),h.child;case 11:return Mp(u,h,h.type,h.pendingProps,m);case 7:return _r(u,h,h.pendingProps,m),h.child;case 8:return _r(u,h,h.pendingProps.children,m),h.child;case 12:return _r(u,h,h.pendingProps.children,m),h.child;case 10:return N=h.pendingProps,Ni(h,h.type,N.value),_r(u,h,N.children,m),h.child;case 9:return A=h.type._context,N=h.pendingProps.children,ec(h),A=Ur(A),N=N(A),h.flags|=1,_r(u,h,N,m),h.child;case 14:return Ip(u,h,h.type,h.pendingProps,m);case 15:return Rp(u,h,h.type,h.pendingProps,m);case 19:return n1(u,h,m);case 31:return N=h.pendingProps,m=h.mode,N={mode:N.mode,children:N.children},u===null?(m=ph(N,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Ua(u.child,N),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return hh(u,h,m);case 24:return ec(h),N=Ur(mr),u===null?(A=yo(),A===null&&(A=br,L=ky(),A.pooledCache=L,L.refCount++,L!==null&&(A.pooledCacheLanes|=m),A=L),h.memoizedState={parent:N,cache:A},nc(h),Ni(h,mr,A)):((u.lanes&m)!==0&&(mu(u,h),Pa(h,null,null,m),xs()),A=u.memoizedState,L=h.memoizedState,A.parent!==N?(A={parent:N,cache:N},h.memoizedState=A,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=A),Ni(h,mr,N)):(N=L.cache,Ni(h,mr,N),N!==A.cache&&vn(h,[mr],m,!0))),_r(u,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function So(u){u.flags|=4}function Bp(u,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!ua(h)){if(h=_i.current,h!==null&&((Fn&4194048)===Fn?Ha!==null:(Fn&62914560)!==Fn&&(Fn&536870912)===0||h!==Ha))throw pu=Ey,T0;u.flags|=8192}}function zp(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?Ct():536870912,u.lanes|=h,ku|=h)}function mh(u,h){if(!kn)switch(u.tailMode){case"hidden":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var N=null;m!==null;)m.alternate!==null&&(N=m),m=m.sibling;N===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:N.sibling=null}}function gr(u){var h=u.alternate!==null&&u.alternate.child===u.child,m=0,N=0;if(h)for(var A=u.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags&65011712,N|=A.flags&65011712,A.return=u,A=A.sibling;else for(A=u.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags,N|=A.flags,A.return=u,A=A.sibling;return u.subtreeFlags|=N,u.childLanes=m,h}function r1(u,h,m){var N=h.pendingProps;switch(zd(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(h),null;case 1:return gr(h),null;case 3:return m=h.stateNode,N=null,u!==null&&(N=u.memoizedState.cache),h.memoizedState.cache!==N&&(h.flags|=2048),Qi(mr),Se(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(qd(h)?So(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,w0())),gr(h),null;case 26:return m=h.memoizedState,u===null?(So(h),m!==null?(gr(h),Bp(h,m)):(gr(h),h.flags&=-16777217)):m?m!==u.memoizedState?(So(h),gr(h),Bp(h,m)):(gr(h),h.flags&=-16777217):(u.memoizedProps!==N&&So(h),gr(h),h.flags&=-16777217),null;case 27:Ae(h),m=ze.current;var A=h.type;if(u!==null&&h.stateNode!=null)u.memoizedProps!==N&&So(h);else{if(!N){if(h.stateNode===null)throw Error(a(166));return gr(h),null}u=Re.current,qd(h)?b0(h):(u=Y1(A,N,m),h.stateNode=u,So(h))}return gr(h),null;case 5:if(Ae(h),m=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==N&&So(h);else{if(!N){if(h.stateNode===null)throw Error(a(166));return gr(h),null}if(u=Re.current,qd(h))b0(h);else{switch(A=mc(ze.current),u){case 1:u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=A.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof N.is=="string"?A.createElement("select",{is:N.is}):A.createElement("select"),N.multiple?u.multiple=!0:N.size&&(u.size=N.size);break;default:u=typeof N.is=="string"?A.createElement(m,{is:N.is}):A.createElement(m)}}u[Vt]=h,u[Yn]=N;e:for(A=h.child;A!==null;){if(A.tag===5||A.tag===6)u.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}h.stateNode=u;e:switch(ca(u,m,N),m){case"button":case"input":case"select":case"textarea":u=!!N.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&So(h)}}return gr(h),h.flags&=-16777217,null;case 6:if(u&&h.stateNode!=null)u.memoizedProps!==N&&So(h);else{if(typeof N!="string"&&h.stateNode===null)throw Error(a(166));if(u=ze.current,qd(h)){if(u=h.stateNode,m=h.memoizedProps,N=null,A=ia,A!==null)switch(A.tag){case 27:case 5:N=A.memoizedProps}u[Vt]=h,u=!!(u.nodeValue===m||N!==null&&N.suppressHydrationWarning===!0||U1(u.nodeValue,m)),u||Yi(h)}else u=mc(u).createTextNode(N),u[Vt]=h,h.stateNode=u}return gr(h),null;case 13:if(N=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(A=qd(h),N!==null&&N.dehydrated!==null){if(u===null){if(!A)throw Error(a(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));A[Vt]=h}else Ud(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;gr(h),A=!1}else A=w0(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=A),A=!0;if(!A)return h.flags&256?(Us(h),h):(Us(h),null)}if(Us(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=N!==null,u=u!==null&&u.memoizedState!==null,m){N=h.child,A=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(A=N.alternate.memoizedState.cachePool.pool);var L=null;N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(L=N.memoizedState.cachePool.pool),L!==A&&(N.flags|=2048)}return m!==u&&m&&(h.child.flags|=8192),zp(h,h.updateQueue),gr(h),null;case 4:return Se(),u===null&&kx(h.stateNode.containerInfo),gr(h),null;case 10:return Qi(h.type),gr(h),null;case 19:if(xe(Vr),A=h.memoizedState,A===null)return gr(h),null;if(N=(h.flags&128)!==0,L=A.rendering,L===null)if(N)mh(A,!1);else{if(Hr!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(L=lh(u),L!==null){for(h.flags|=128,mh(A,!1),u=L.updateQueue,h.updateQueue=u,zp(h,u),h.subtreeFlags=0,u=m,m=h.child;m!==null;)$d(m,u),m=m.sibling;return Y(Vr,Vr.current&1|2),h.child}u=u.sibling}A.tail!==null&&Ne()>Au&&(h.flags|=128,N=!0,mh(A,!1),h.lanes=4194304)}else{if(!N)if(u=lh(L),u!==null){if(h.flags|=128,N=!0,u=u.updateQueue,h.updateQueue=u,zp(h,u),mh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!L.alternate&&!kn)return gr(h),null}else 2*Ne()-A.renderingStartTime>Au&&m!==536870912&&(h.flags|=128,N=!0,mh(A,!1),h.lanes=4194304);A.isBackwards?(L.sibling=h.child,h.child=L):(u=A.last,u!==null?u.sibling=L:h.child=L,A.last=L)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=Ne(),h.sibling=null,u=Vr.current,Y(Vr,N?u&1|2:u&1),h):(gr(h),null);case 22:case 23:return Us(h),Oy(),N=h.memoizedState!==null,u!==null?u.memoizedState!==null!==N&&(h.flags|=8192):N&&(h.flags|=8192),N?(m&536870912)!==0&&(h.flags&128)===0&&(gr(h),h.subtreeFlags&6&&(h.flags|=8192)):gr(h),m=h.updateQueue,m!==null&&zp(h,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),N=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(N=h.memoizedState.cachePool.pool),N!==m&&(h.flags|=2048),u!==null&&xe(tc),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Qi(mr),gr(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function a1(u,h){switch(zd(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Qi(mr),Se(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return Ae(h),null;case 13:if(Us(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Ud()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return xe(Vr),null;case 4:return Se(),null;case 10:return Qi(h.type),null;case 22:case 23:return Us(h),Oy(),u!==null&&xe(tc),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return Qi(mr),null;case 25:return null;default:return null}}function i1(u,h){switch(zd(h),h.tag){case 3:Qi(mr),Se();break;case 26:case 27:case 5:Ae(h);break;case 4:Se();break;case 13:Us(h);break;case 19:xe(Vr);break;case 10:Qi(h.type);break;case 22:case 23:Us(h),Oy(),u!==null&&xe(tc);break;case 24:Qi(mr)}}function gh(u,h){try{var m=h.updateQueue,N=m!==null?m.lastEffect:null;if(N!==null){var A=N.next;m=A;do{if((m.tag&u)===u){N=void 0;var L=m.create,J=m.inst;N=L(),J.destroy=N}m=m.next}while(m!==A)}}catch(pe){yr(h,h.return,pe)}}function dl(u,h,m){try{var N=h.updateQueue,A=N!==null?N.lastEffect:null;if(A!==null){var L=A.next;N=L;do{if((N.tag&u)===u){var J=N.inst,pe=J.destroy;if(pe!==void 0){J.destroy=void 0,A=h;var Oe=m,Je=pe;try{Je()}catch(ut){yr(A,Oe,ut)}}}N=N.next}while(N!==L)}}catch(ut){yr(h,h.return,ut)}}function s1(u){var h=u.updateQueue;if(h!==null){var m=u.stateNode;try{Dy(h,m)}catch(N){yr(u,u.return,N)}}}function sx(u,h,m){m.props=cl(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(N){yr(u,h,N)}}function wu(u,h){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var N=u.stateNode;break;case 30:N=u.stateNode;break;default:N=u.stateNode}typeof m=="function"?u.refCleanup=m(N):m.current=N}}catch(A){yr(u,h,A)}}function Hs(u,h){var m=u.ref,N=u.refCleanup;if(m!==null)if(typeof N=="function")try{N()}catch(A){yr(u,h,A)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){yr(u,h,A)}else m.current=null}function qp(u){var h=u.type,m=u.memoizedProps,N=u.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&N.focus();break e;case"img":m.src?N.src=m.src:m.srcSet&&(N.srcset=m.srcSet)}}catch(A){yr(u,u.return,A)}}function Up(u,h,m){try{var N=u.stateNode;__(N,u.type,m,h),N[Yn]=h}catch(A){yr(u,u.return,A)}}function Nu(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&ts(u.type)||u.tag===4}function yh(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Nu(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&ts(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Vp(u,h,m){var N=u.tag;if(N===5||N===6)u=u.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(u),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=em));else if(N!==4&&(N===27&&ts(u.type)&&(m=u.stateNode,h=null),u=u.child,u!==null))for(Vp(u,h,m),u=u.sibling;u!==null;)Vp(u,h,m),u=u.sibling}function xh(u,h,m){var N=u.tag;if(N===5||N===6)u=u.stateNode,h?m.insertBefore(u,h):m.appendChild(u);else if(N!==4&&(N===27&&ts(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(xh(u,h,m),u=u.sibling;u!==null;)xh(u,h,m),u=u.sibling}function vh(u){var h=u.stateNode,m=u.memoizedProps;try{for(var N=u.type,A=h.attributes;A.length;)h.removeAttributeNode(A[0]);ca(h,N,m),h[Vt]=u,h[Yn]=m}catch(L){yr(u,u.return,L)}}var Gs=!1,Zn=!1,_o=!1,o1=typeof WeakSet=="function"?WeakSet:Set,oa=null;function d_(u,h){if(u=u.containerInfo,js=lm,u=x0(u),wy(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var N=m.getSelection&&m.getSelection();if(N&&N.rangeCount!==0){m=N.anchorNode;var A=N.anchorOffset,L=N.focusNode;N=N.focusOffset;try{m.nodeType,L.nodeType}catch{m=null;break e}var J=0,pe=-1,Oe=-1,Je=0,ut=0,pt=u,tt=null;t:for(;;){for(var Ze;pt!==m||A!==0&&pt.nodeType!==3||(pe=J+A),pt!==L||N!==0&&pt.nodeType!==3||(Oe=J+N),pt.nodeType===3&&(J+=pt.nodeValue.length),(Ze=pt.firstChild)!==null;)tt=pt,pt=Ze;for(;;){if(pt===u)break t;if(tt===m&&++Je===A&&(pe=J),tt===L&&++ut===N&&(Oe=J),(Ze=pt.nextSibling)!==null)break;pt=tt,tt=pt.parentNode}pt=Ze}m=pe===-1||Oe===-1?null:{start:pe,end:Oe}}else m=null}m=m||{start:0,end:0}}else m=null;for(tm={focusedElem:u,selectionRange:m},lm=!1,oa=h;oa!==null;)if(h=oa,u=h.child,(h.subtreeFlags&1024)!==0&&u!==null)u.return=h,oa=u;else for(;oa!==null;){switch(h=oa,L=h.alternate,u=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&L!==null){u=void 0,m=h,A=L.memoizedProps,L=L.memoizedState,N=m.stateNode;try{var Kt=cl(m.type,A,m.elementType===m.type);u=N.getSnapshotBeforeUpdate(Kt,L),N.__reactInternalSnapshotBeforeUpdate=u}catch(Wt){yr(m,m.return,Wt)}}break;case 3:if((u&1024)!==0){if(u=h.stateNode.containerInfo,m=u.nodeType,m===9)Px(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Px(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(a(163))}if(u=h.sibling,u!==null){u.return=h.return,oa=u;break}oa=h.return}}function l1(u,h,m){var N=m.flags;switch(m.tag){case 0:case 11:case 15:hl(u,m),N&4&&gh(5,m);break;case 1:if(hl(u,m),N&4)if(u=m.stateNode,h===null)try{u.componentDidMount()}catch(J){yr(m,m.return,J)}else{var A=cl(m.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(A,h,u.__reactInternalSnapshotBeforeUpdate)}catch(J){yr(m,m.return,J)}}N&64&&s1(m),N&512&&wu(m,m.return);break;case 3:if(hl(u,m),N&64&&(u=m.updateQueue,u!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{Dy(u,h)}catch(J){yr(m,m.return,J)}}break;case 27:h===null&&N&4&&vh(m);case 26:case 5:hl(u,m),h===null&&N&4&&qp(m),N&512&&wu(m,m.return);break;case 12:hl(u,m);break;case 13:hl(u,m),N&4&&d1(u,m),N&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=Yp.bind(null,m),Iu(u,m))));break;case 22:if(N=m.memoizedState!==null||Gs,!N){h=h!==null&&h.memoizedState!==null||Zn,A=Gs;var L=Zn;Gs=N,(Zn=h)&&!L?To(u,m,(m.subtreeFlags&8772)!==0):hl(u,m),Gs=A,Zn=L}break;case 30:break;default:hl(u,m)}}function c1(u){var h=u.alternate;h!==null&&(u.alternate=null,c1(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Tn(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Dr=null,si=!1;function Co(u,h,m){for(m=m.child;m!==null;)u1(u,h,m),m=m.sibling}function u1(u,h,m){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(Q,m)}catch{}switch(m.tag){case 26:Zn||Hs(m,h),Co(u,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Zn||Hs(m,h);var N=Dr,A=si;ts(m.type)&&(Dr=m.stateNode,si=!1),Co(u,h,m),Eh(m.stateNode),Dr=N,si=A;break;case 5:Zn||Hs(m,h);case 6:if(N=Dr,A=si,Dr=null,Co(u,h,m),Dr=N,si=A,Dr!==null)if(si)try{(Dr.nodeType===9?Dr.body:Dr.nodeName==="HTML"?Dr.ownerDocument.body:Dr).removeChild(m.stateNode)}catch(L){yr(m,h,L)}else try{Dr.removeChild(m.stateNode)}catch(L){yr(m,h,L)}break;case 18:Dr!==null&&(si?(u=Dr,rm(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Fh(u)):rm(Dr,m.stateNode));break;case 4:N=Dr,A=si,Dr=m.stateNode.containerInfo,si=!0,Co(u,h,m),Dr=N,si=A;break;case 0:case 11:case 14:case 15:Zn||dl(2,m,h),Zn||dl(4,m,h),Co(u,h,m);break;case 1:Zn||(Hs(m,h),N=m.stateNode,typeof N.componentWillUnmount=="function"&&sx(m,h,N)),Co(u,h,m);break;case 21:Co(u,h,m);break;case 22:Zn=(N=Zn)||m.memoizedState!==null,Co(u,h,m),Zn=N;break;default:Co(u,h,m)}}function d1(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Fh(u)}catch(m){yr(h,h.return,m)}}function h_(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new o1),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new o1),h;default:throw Error(a(435,u.tag))}}function ox(u,h){var m=h_(u);h.forEach(function(N){var A=x_.bind(null,u,N);m.has(N)||(m.add(N),N.then(A,A))})}function Ci(u,h){var m=h.deletions;if(m!==null)for(var N=0;N<m.length;N++){var A=m[N],L=u,J=h,pe=J;e:for(;pe!==null;){switch(pe.tag){case 27:if(ts(pe.type)){Dr=pe.stateNode,si=!1;break e}break;case 5:Dr=pe.stateNode,si=!1;break e;case 3:case 4:Dr=pe.stateNode.containerInfo,si=!0;break e}pe=pe.return}if(Dr===null)throw Error(a(160));u1(L,J,A),Dr=null,si=!1,L=A.alternate,L!==null&&(L.return=null),A.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)lx(h,u),h=h.sibling}var Zi=null;function lx(u,h){var m=u.alternate,N=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Ci(h,u),oi(u),N&4&&(dl(3,u,u.return),gh(3,u),dl(5,u,u.return));break;case 1:Ci(h,u),oi(u),N&512&&(Zn||m===null||Hs(m,m.return)),N&64&&Gs&&(u=u.updateQueue,u!==null&&(N=u.callbacks,N!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?N:m.concat(N))));break;case 26:var A=Zi;if(Ci(h,u),oi(u),N&512&&(Zn||m===null||Hs(m,m.return)),N&4){var L=m!==null?m.memoizedState:null;if(N=u.memoizedState,m===null)if(N===null)if(u.stateNode===null){e:{N=u.type,m=u.memoizedProps,A=A.ownerDocument||A;t:switch(N){case"title":L=A.getElementsByTagName("title")[0],(!L||L[qr]||L[Vt]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=A.createElement(N),A.head.insertBefore(L,A.querySelector("head > title"))),ca(L,N,m),L[Vt]=u,Ot(L),N=L;break e;case"link":var J=tj("link","href",A).get(N+(m.href||""));if(J){for(var pe=0;pe<J.length;pe++)if(L=J[pe],L.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&L.getAttribute("rel")===(m.rel==null?null:m.rel)&&L.getAttribute("title")===(m.title==null?null:m.title)&&L.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){J.splice(pe,1);break t}}L=A.createElement(N),ca(L,N,m),A.head.appendChild(L);break;case"meta":if(J=tj("meta","content",A).get(N+(m.content||""))){for(pe=0;pe<J.length;pe++)if(L=J[pe],L.getAttribute("content")===(m.content==null?null:""+m.content)&&L.getAttribute("name")===(m.name==null?null:m.name)&&L.getAttribute("property")===(m.property==null?null:m.property)&&L.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&L.getAttribute("charset")===(m.charSet==null?null:m.charSet)){J.splice(pe,1);break t}}L=A.createElement(N),ca(L,N,m),A.head.appendChild(L);break;default:throw Error(a(468,N))}L[Vt]=u,Ot(L),N=L}u.stateNode=N}else nj(A,u.type,u.stateNode);else u.stateNode=ej(A,N,u.memoizedProps);else L!==N?(L===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):L.count--,N===null?nj(A,u.type,u.stateNode):ej(A,N,u.memoizedProps)):N===null&&u.stateNode!==null&&Up(u,u.memoizedProps,m.memoizedProps)}break;case 27:Ci(h,u),oi(u),N&512&&(Zn||m===null||Hs(m,m.return)),m!==null&&N&4&&Up(u,u.memoizedProps,m.memoizedProps);break;case 5:if(Ci(h,u),oi(u),N&512&&(Zn||m===null||Hs(m,m.return)),u.flags&32){A=u.stateNode;try{Yo(A,"")}catch(Ze){yr(u,u.return,Ze)}}N&4&&u.stateNode!=null&&(A=u.memoizedProps,Up(u,A,m!==null?m.memoizedProps:A)),N&1024&&(_o=!0);break;case 6:if(Ci(h,u),oi(u),N&4){if(u.stateNode===null)throw Error(a(162));N=u.memoizedProps,m=u.stateNode;try{m.nodeValue=N}catch(Ze){yr(u,u.return,Ze)}}break;case 3:if($u=null,A=Zi,Zi=un(h.containerInfo),Ci(h,u),Zi=A,oi(u),N&4&&m!==null&&m.memoizedState.isDehydrated)try{Fh(h.containerInfo)}catch(Ze){yr(u,u.return,Ze)}_o&&(_o=!1,h1(u));break;case 4:N=Zi,Zi=un(u.stateNode.containerInfo),Ci(h,u),oi(u),Zi=N;break;case 12:Ci(h,u),oi(u);break;case 13:Ci(h,u),oi(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(mx=Ne()),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,ox(u,N)));break;case 22:A=u.memoizedState!==null;var Oe=m!==null&&m.memoizedState!==null,Je=Gs,ut=Zn;if(Gs=Je||A,Zn=ut||Oe,Ci(h,u),Zn=ut,Gs=Je,oi(u),N&8192)e:for(h=u.stateNode,h._visibility=A?h._visibility&-2:h._visibility|1,A&&(m===null||Oe||Gs||Zn||fc(u)),m=null,h=u;;){if(h.tag===5||h.tag===26){if(m===null){Oe=m=h;try{if(L=Oe.stateNode,A)J=L.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{pe=Oe.stateNode;var pt=Oe.memoizedProps.style,tt=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;pe.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Ze){yr(Oe,Oe.return,Ze)}}}else if(h.tag===6){if(m===null){Oe=h;try{Oe.stateNode.nodeValue=A?"":Oe.memoizedProps}catch(Ze){yr(Oe,Oe.return,Ze)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}N&4&&(N=u.updateQueue,N!==null&&(m=N.retryQueue,m!==null&&(N.retryQueue=null,ox(u,m))));break;case 19:Ci(h,u),oi(u),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,ox(u,N)));break;case 30:break;case 21:break;default:Ci(h,u),oi(u)}}function oi(u){var h=u.flags;if(h&2){try{for(var m,N=u.return;N!==null;){if(Nu(N)){m=N;break}N=N.return}if(m==null)throw Error(a(160));switch(m.tag){case 27:var A=m.stateNode,L=yh(u);xh(u,L,A);break;case 5:var J=m.stateNode;m.flags&32&&(Yo(J,""),m.flags&=-33);var pe=yh(u);xh(u,pe,J);break;case 3:case 4:var Oe=m.stateNode.containerInfo,Je=yh(u);Vp(u,Je,Oe);break;default:throw Error(a(161))}}catch(ut){yr(u,u.return,ut)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function h1(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;h1(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),u=u.sibling}}function hl(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)l1(u,h.alternate,h),h=h.sibling}function fc(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:dl(4,h,h.return),fc(h);break;case 1:Hs(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&sx(h,h.return,m),fc(h);break;case 27:Eh(h.stateNode);case 26:case 5:Hs(h,h.return),fc(h);break;case 22:h.memoizedState===null&&fc(h);break;case 30:fc(h);break;default:fc(h)}u=u.sibling}}function To(u,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var N=h.alternate,A=u,L=h,J=L.flags;switch(L.tag){case 0:case 11:case 15:To(A,L,m),gh(4,L);break;case 1:if(To(A,L,m),N=L,A=N.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Je){yr(N,N.return,Je)}if(N=L,A=N.updateQueue,A!==null){var pe=N.stateNode;try{var Oe=A.shared.hiddenCallbacks;if(Oe!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Oe.length;A++)P0(Oe[A],pe)}catch(Je){yr(N,N.return,Je)}}m&&J&64&&s1(L),wu(L,L.return);break;case 27:vh(L);case 26:case 5:To(A,L,m),m&&N===null&&J&4&&qp(L),wu(L,L.return);break;case 12:To(A,L,m);break;case 13:To(A,L,m),m&&J&4&&d1(A,L);break;case 22:L.memoizedState===null&&To(A,L,m),wu(L,L.return);break;case 30:break;default:To(A,L,m)}h=h.sibling}}function cx(u,h){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Hd(m))}function ux(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Hd(u))}function Ws(u,h,m,N){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)f1(u,h,m,N),h=h.sibling}function f1(u,h,m,N){var A=h.flags;switch(h.tag){case 0:case 11:case 15:Ws(u,h,m,N),A&2048&&gh(9,h);break;case 1:Ws(u,h,m,N);break;case 3:Ws(u,h,m,N),A&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Hd(u)));break;case 12:if(A&2048){Ws(u,h,m,N),u=h.stateNode;try{var L=h.memoizedProps,J=L.id,pe=L.onPostCommit;typeof pe=="function"&&pe(J,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Oe){yr(h,h.return,Oe)}}else Ws(u,h,m,N);break;case 13:Ws(u,h,m,N);break;case 23:break;case 22:L=h.stateNode,J=h.alternate,h.memoizedState!==null?L._visibility&2?Ws(u,h,m,N):bh(u,h):L._visibility&2?Ws(u,h,m,N):(L._visibility|=2,Su(u,h,m,N,(h.subtreeFlags&10256)!==0)),A&2048&&cx(J,h);break;case 24:Ws(u,h,m,N),A&2048&&ux(h.alternate,h);break;default:Ws(u,h,m,N)}}function Su(u,h,m,N,A){for(A=A&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var L=u,J=h,pe=m,Oe=N,Je=J.flags;switch(J.tag){case 0:case 11:case 15:Su(L,J,pe,Oe,A),gh(8,J);break;case 23:break;case 22:var ut=J.stateNode;J.memoizedState!==null?ut._visibility&2?Su(L,J,pe,Oe,A):bh(L,J):(ut._visibility|=2,Su(L,J,pe,Oe,A)),A&&Je&2048&&cx(J.alternate,J);break;case 24:Su(L,J,pe,Oe,A),A&&Je&2048&&ux(J.alternate,J);break;default:Su(L,J,pe,Oe,A)}h=h.sibling}}function bh(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=u,N=h,A=N.flags;switch(N.tag){case 22:bh(m,N),A&2048&&cx(N.alternate,N);break;case 24:bh(m,N),A&2048&&ux(N.alternate,N);break;default:bh(m,N)}h=h.sibling}}var Oa=8192;function _u(u){if(u.subtreeFlags&Oa)for(u=u.child;u!==null;)p1(u),u=u.sibling}function p1(u){switch(u.tag){case 26:_u(u),u.flags&Oa&&u.memoizedState!==null&&L_(Zi,u.memoizedState,u.memoizedProps);break;case 5:_u(u);break;case 3:case 4:var h=Zi;Zi=un(u.stateNode.containerInfo),_u(u),Zi=h;break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=Oa,Oa=16777216,_u(u),Oa=h):_u(u));break;default:_u(u)}}function m1(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Cu(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];oa=N,y1(N,u)}m1(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)g1(u),u=u.sibling}function g1(u){switch(u.tag){case 0:case 11:case 15:Cu(u),u.flags&2048&&dl(9,u,u.return);break;case 3:Cu(u);break;case 12:Cu(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,Hp(u)):Cu(u);break;default:Cu(u)}}function Hp(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];oa=N,y1(N,u)}m1(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:dl(8,h,h.return),Hp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,Hp(h));break;default:Hp(h)}u=u.sibling}}function y1(u,h){for(;oa!==null;){var m=oa;switch(m.tag){case 0:case 11:case 15:dl(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var N=m.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:Hd(m.memoizedState.cache)}if(N=m.child,N!==null)N.return=m,oa=N;else e:for(m=u;oa!==null;){N=oa;var A=N.sibling,L=N.return;if(c1(N),N===m){oa=null;break e}if(A!==null){A.return=L,oa=A;break e}oa=L}}}var f_={getCacheForType:function(u){var h=Ur(mr),m=h.data.get(u);return m===void 0&&(m=u(),h.data.set(u,m)),m}},dx=typeof WeakMap=="function"?WeakMap:Map,rr=0,br=null,_n=null,Fn=0,ar=0,Ti=null,fl=!1,Tu=!1,hx=!1,ko=0,Hr=0,pl=0,pc=0,fx=0,es=0,ku=0,jh=null,li=null,px=!1,mx=0,Au=1/0,wh=null,ml=null,Sa=0,gl=null,Eu=null,Pu=0,gx=0,yx=null,x1=null,Du=0,xx=null;function Ma(){if((rr&2)!==0&&Fn!==0)return Fn&-Fn;if(B.T!==null){var u=fu;return u!==0?u:Jp()}return Kn()}function v1(){es===0&&(es=(Fn&536870912)===0||kn?ct():536870912);var u=_i.current;return u!==null&&(u.flags|=32),es}function ki(u,h,m){(u===br&&(ar===2||ar===9)||u.cancelPendingCommit!==null)&&(Ou(u,0),yl(u,Fn,es,!1)),ke(u,m),((rr&2)===0||u!==br)&&(u===br&&((rr&2)===0&&(pc|=m),Hr===4&&yl(u,Fn,es,!1)),Ks(u))}function b1(u,h,m){if((rr&6)!==0)throw Error(a(327));var N=!m&&(h&124)===0&&(h&u.expiredLanes)===0||Qe(u,h),A=N?g_(u,h):jx(u,h,!0),L=N;do{if(A===0){Tu&&!N&&yl(u,h,0,!1);break}else{if(m=u.current.alternate,L&&!p_(m)){A=jx(u,h,!1),L=!1;continue}if(A===2){if(L=h,u.errorRecoveryDisabledLanes&L)var J=0;else J=u.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){h=J;e:{var pe=u;A=jh;var Oe=pe.current.memoizedState.isDehydrated;if(Oe&&(Ou(pe,J).flags|=256),J=jx(pe,J,!1),J!==2){if(hx&&!Oe){pe.errorRecoveryDisabledLanes|=L,pc|=L,A=4;break e}L=li,li=A,L!==null&&(li===null?li=L:li.push.apply(li,L))}A=J}if(L=!1,A!==2)continue}}if(A===1){Ou(u,0),yl(u,h,0,!0);break}e:{switch(N=u,L=A,L){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:yl(N,h,es,!fl);break e;case 2:li=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(A=mx+300-Ne(),10<A)){if(yl(N,h,es,!fl),we(N,0,!0)!==0)break e;N.timeoutHandle=V1(j1.bind(null,N,m,li,wh,px,h,es,pc,ku,fl,L,2,-0,0),A);break e}j1(N,m,li,wh,px,h,es,pc,ku,fl,L,0,-0,0)}}break}while(!0);Ks(u)}function j1(u,h,m,N,A,L,J,pe,Oe,Je,ut,pt,tt,Ze){if(u.timeoutHandle=-1,pt=h.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(ga={stylesheets:null,count:0,unsuspend:R_},p1(h),pt=F_(),pt!==null)){u.cancelPendingCommit=pt(Nh.bind(null,u,h,L,m,N,A,J,pe,Oe,ut,1,tt,Ze)),yl(u,L,J,!Je);return}Nh(u,h,L,m,N,A,J,pe,Oe)}function p_(u){for(var h=u;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var N=0;N<m.length;N++){var A=m[N],L=A.getSnapshot;A=A.value;try{if(!ji(L(),A))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function yl(u,h,m,N){h&=~fx,h&=~pc,u.suspendedLanes|=h,u.pingedLanes&=~h,N&&(u.warmLanes|=h),N=u.expirationTimes;for(var A=h;0<A;){var L=31-he(A),J=1<<L;N[L]=-1,A&=~J}m!==0&&Tt(u,m,h)}function Gp(){return(rr&6)===0?(Ch(0),!1):!0}function vx(){if(_n!==null){if(ar===0)var u=_n.return;else u=_n,fe=al=null,yp(u),sa=null,ii=0,u=_n;for(;u!==null;)i1(u.alternate,u),u=u.return;_n=null}}function Ou(u,h){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,T_(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),vx(),br=u,_n=m=Ua(u.current,null),Fn=h,ar=0,Ti=null,fl=!1,Tu=Qe(u,h),hx=!1,ku=es=fx=pc=pl=Hr=0,li=jh=null,px=!1,(h&8)!==0&&(h|=h&32);var N=u.entangledLanes;if(N!==0)for(u=u.entanglements,N&=h;0<N;){var A=31-he(N),L=1<<A;h|=u[A],N&=~L}return ko=h,Wl(),m}function w1(u,h){yn=null,B.H=sh,h===Va||h===pp?(h=A0(),ar=3):h===T0?(h=A0(),ar=4):ar=h===Z0?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Ti=h,_n===null&&(Hr=1,dh(u,qa(h,u.current)))}function N1(){var u=B.H;return B.H=sh,u===null?sh:u}function S1(){var u=B.A;return B.A=f_,u}function bx(){Hr=4,fl||(Fn&4194048)!==Fn&&_i.current!==null||(Tu=!0),(pl&134217727)===0&&(pc&134217727)===0||br===null||yl(br,Fn,es,!1)}function jx(u,h,m){var N=rr;rr|=2;var A=N1(),L=S1();(br!==u||Fn!==h)&&(wh=null,Ou(u,h)),h=!1;var J=Hr;e:do try{if(ar!==0&&_n!==null){var pe=_n,Oe=Ti;switch(ar){case 8:vx(),J=6;break e;case 3:case 2:case 9:case 6:_i.current===null&&(h=!0);var Je=ar;if(ar=0,Ti=null,Mu(u,pe,Oe,Je),m&&Tu){J=0;break e}break;default:Je=ar,ar=0,Ti=null,Mu(u,pe,Oe,Je)}}m_(),J=Hr;break}catch(ut){w1(u,ut)}while(!0);return h&&u.shellSuspendCounter++,fe=al=null,rr=N,B.H=A,B.A=L,_n===null&&(br=null,Fn=0,Wl()),J}function m_(){for(;_n!==null;)wx(_n)}function g_(u,h){var m=rr;rr|=2;var N=N1(),A=S1();br!==u||Fn!==h?(wh=null,Au=Ne()+500,Ou(u,h)):Tu=Qe(u,h);e:do try{if(ar!==0&&_n!==null){h=_n;var L=Ti;t:switch(ar){case 1:ar=0,Ti=null,Mu(u,h,L,1);break;case 2:case 9:if(k0(L)){ar=0,Ti=null,C1(h);break}h=function(){ar!==2&&ar!==9||br!==u||(ar=7),Ks(u)},L.then(h,h);break e;case 3:ar=7;break e;case 4:ar=5;break e;case 7:k0(L)?(ar=0,Ti=null,C1(h)):(ar=0,Ti=null,Mu(u,h,L,7));break;case 5:var J=null;switch(_n.tag){case 26:J=_n.memoizedState;case 5:case 27:var pe=_n;if(!J||ua(J)){ar=0,Ti=null;var Oe=pe.sibling;if(Oe!==null)_n=Oe;else{var Je=pe.return;Je!==null?(_n=Je,Wp(Je)):_n=null}break t}}ar=0,Ti=null,Mu(u,h,L,5);break;case 6:ar=0,Ti=null,Mu(u,h,L,6);break;case 8:vx(),Hr=6;break e;default:throw Error(a(462))}}_1();break}catch(ut){w1(u,ut)}while(!0);return fe=al=null,B.H=N,B.A=A,rr=m,_n!==null?0:(br=null,Fn=0,Wl(),Hr)}function _1(){for(;_n!==null&&!be();)wx(_n)}function wx(u){var h=$p(u.alternate,u,ko);u.memoizedProps=u.pendingProps,h===null?Wp(u):_n=h}function C1(u){var h=u,m=h.alternate;switch(h.tag){case 15:case 0:h=Lp(m,h,h.pendingProps,h.type,void 0,Fn);break;case 11:h=Lp(m,h,h.pendingProps,h.type.render,h.ref,Fn);break;case 5:yp(h);default:i1(m,h),h=_n=$d(h,ko),h=$p(m,h,ko)}u.memoizedProps=u.pendingProps,h===null?Wp(u):_n=h}function Mu(u,h,m,N){fe=al=null,yp(h),sa=null,ii=0;var A=h.return;try{if(J0(u,A,h,m,Fn)){Hr=1,dh(u,qa(m,u.current)),_n=null;return}}catch(L){if(A!==null)throw _n=A,L;Hr=1,dh(u,qa(m,u.current)),_n=null;return}h.flags&32768?(kn||N===1?u=!0:Tu||(Fn&536870912)!==0?u=!1:(fl=u=!0,(N===2||N===9||N===3||N===6)&&(N=_i.current,N!==null&&N.tag===13&&(N.flags|=16384))),T1(h,u)):Wp(h)}function Wp(u){var h=u;do{if((h.flags&32768)!==0){T1(h,fl);return}u=h.return;var m=r1(h.alternate,h,ko);if(m!==null){_n=m;return}if(h=h.sibling,h!==null){_n=h;return}_n=h=u}while(h!==null);Hr===0&&(Hr=5)}function T1(u,h){do{var m=a1(u.alternate,u);if(m!==null){m.flags&=32767,_n=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(u=u.sibling,u!==null)){_n=u;return}_n=u=m}while(u!==null);Hr=6,_n=null}function Nh(u,h,m,N,A,L,J,pe,Oe){u.cancelPendingCommit=null;do Kp();while(Sa!==0);if((rr&6)!==0)throw Error(a(327));if(h!==null){if(h===u.current)throw Error(a(177));if(L=h.lanes|h.childLanes,L|=Sy,ot(u,m,L,J,pe,Oe),u===br&&(_n=br=null,Fn=0),Eu=h,gl=u,Pu=m,gx=L,yx=A,x1=N,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,I1(ae,function(){return D1(),null})):(u.callbackNode=null,u.callbackPriority=0),N=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||N){N=B.T,B.T=null,A=G.p,G.p=2,J=rr,rr|=4;try{d_(u,h,m)}finally{rr=J,G.p=A,B.T=N}}Sa=1,k1(),A1(),E1()}}function k1(){if(Sa===1){Sa=0;var u=gl,h=Eu,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=B.T,B.T=null;var N=G.p;G.p=2;var A=rr;rr|=4;try{lx(h,u);var L=tm,J=x0(u.containerInfo),pe=L.focusedElem,Oe=L.selectionRange;if(J!==pe&&pe&&pe.ownerDocument&&y0(pe.ownerDocument.documentElement,pe)){if(Oe!==null&&wy(pe)){var Je=Oe.start,ut=Oe.end;if(ut===void 0&&(ut=Je),"selectionStart"in pe)pe.selectionStart=Je,pe.selectionEnd=Math.min(ut,pe.value.length);else{var pt=pe.ownerDocument||document,tt=pt&&pt.defaultView||window;if(tt.getSelection){var Ze=tt.getSelection(),Kt=pe.textContent.length,Wt=Math.min(Oe.start,Kt),cr=Oe.end===void 0?Wt:Math.min(Oe.end,Kt);!Ze.extend&&Wt>cr&&(J=cr,cr=Wt,Wt=J);var We=jy(pe,Wt),qe=jy(pe,cr);if(We&&qe&&(Ze.rangeCount!==1||Ze.anchorNode!==We.node||Ze.anchorOffset!==We.offset||Ze.focusNode!==qe.node||Ze.focusOffset!==qe.offset)){var Ye=pt.createRange();Ye.setStart(We.node,We.offset),Ze.removeAllRanges(),Wt>cr?(Ze.addRange(Ye),Ze.extend(qe.node,qe.offset)):(Ye.setEnd(qe.node,qe.offset),Ze.addRange(Ye))}}}}for(pt=[],Ze=pe;Ze=Ze.parentNode;)Ze.nodeType===1&&pt.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<pt.length;pe++){var ht=pt[pe];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}lm=!!js,tm=js=null}finally{rr=A,G.p=N,B.T=m}}u.current=h,Sa=2}}function A1(){if(Sa===2){Sa=0;var u=gl,h=Eu,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=B.T,B.T=null;var N=G.p;G.p=2;var A=rr;rr|=4;try{l1(u,h.alternate,h)}finally{rr=A,G.p=N,B.T=m}}Sa=3}}function E1(){if(Sa===4||Sa===3){Sa=0,_e();var u=gl,h=Eu,m=Pu,N=x1;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Sa=5:(Sa=0,Eu=gl=null,P1(u,u.pendingLanes));var A=u.pendingLanes;if(A===0&&(ml=null),kt(m),h=h.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(Q,h,void 0,(h.current.flags&128)===128)}catch{}if(N!==null){h=B.T,A=G.p,G.p=2,B.T=null;try{for(var L=u.onRecoverableError,J=0;J<N.length;J++){var pe=N[J];L(pe.value,{componentStack:pe.stack})}}finally{B.T=h,G.p=A}}(Pu&3)!==0&&Kp(),Ks(u),A=u.pendingLanes,(m&4194090)!==0&&(A&42)!==0?u===xx?Du++:(Du=0,xx=u):Du=0,Ch(0)}}function P1(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,Hd(h)))}function Kp(u){return k1(),A1(),E1(),D1()}function D1(){if(Sa!==5)return!1;var u=gl,h=gx;gx=0;var m=kt(Pu),N=B.T,A=G.p;try{G.p=32>m?32:m,B.T=null,m=yx,yx=null;var L=gl,J=Pu;if(Sa=0,Eu=gl=null,Pu=0,(rr&6)!==0)throw Error(a(331));var pe=rr;if(rr|=4,g1(L.current),f1(L,L.current,J,m),rr=pe,Ch(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(Q,L)}catch{}return!0}finally{G.p=A,B.T=N,P1(u,h)}}function O1(u,h,m){h=qa(m,h),h=Op(u.stateNode,h,2),u=xo(u,h,2),u!==null&&(ke(u,2),Ks(u))}function yr(u,h,m){if(u.tag===3)O1(u,u,m);else for(;h!==null;){if(h.tag===3){O1(h,u,m);break}else if(h.tag===1){var N=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(ml===null||!ml.has(N))){u=qa(m,u),m=tx(2),N=xo(h,m,2),N!==null&&(X0(m,N,h,u),ke(N,2),Ks(N));break}}h=h.return}}function Nx(u,h,m){var N=u.pingCache;if(N===null){N=u.pingCache=new dx;var A=new Set;N.set(h,A)}else A=N.get(h),A===void 0&&(A=new Set,N.set(h,A));A.has(m)||(hx=!0,A.add(m),u=y_.bind(null,u,h,m),h.then(u,u))}function y_(u,h,m){var N=u.pingCache;N!==null&&N.delete(h),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,br===u&&(Fn&m)===m&&(Hr===4||Hr===3&&(Fn&62914560)===Fn&&300>Ne()-mx?(rr&2)===0&&Ou(u,0):fx|=m,ku===Fn&&(ku=0)),Ks(u)}function M1(u,h){h===0&&(h=Ct()),u=Kl(u,h),u!==null&&(ke(u,h),Ks(u))}function Yp(u){var h=u.memoizedState,m=0;h!==null&&(m=h.retryLane),M1(u,m)}function x_(u,h){var m=0;switch(u.tag){case 13:var N=u.stateNode,A=u.memoizedState;A!==null&&(m=A.retryLane);break;case 19:N=u.stateNode;break;case 22:N=u.stateNode._retryCache;break;default:throw Error(a(314))}N!==null&&N.delete(h),M1(u,m)}function I1(u,h){return Te(u,h)}var Sh=null,xl=null,Qp=!1,_h=!1,Xp=!1,vl=0;function Ks(u){u!==xl&&u.next===null&&(xl===null?Sh=xl=u:xl=xl.next=u),_h=!0,Qp||(Qp=!0,Sx())}function Ch(u,h){if(!Xp&&_h){Xp=!0;do for(var m=!1,N=Sh;N!==null;){if(u!==0){var A=N.pendingLanes;if(A===0)var L=0;else{var J=N.suspendedLanes,pe=N.pingedLanes;L=(1<<31-he(42|u)+1)-1,L&=A&~(J&~pe),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(m=!0,L1(N,L))}else L=Fn,L=we(N,N===br?L:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(L&3)===0||Qe(N,L)||(m=!0,L1(N,L));N=N.next}while(m);Xp=!1}}function v_(){Th()}function Th(){_h=Qp=!1;var u=0;vl!==0&&(C_()&&(u=vl),vl=0);for(var h=Ne(),m=null,N=Sh;N!==null;){var A=N.next,L=kh(N,h);L===0?(N.next=null,m===null?Sh=A:m.next=A,A===null&&(xl=m)):(m=N,(u!==0||(L&3)!==0)&&(_h=!0)),N=A}Ch(u)}function kh(u,h){for(var m=u.suspendedLanes,N=u.pingedLanes,A=u.expirationTimes,L=u.pendingLanes&-62914561;0<L;){var J=31-he(L),pe=1<<J,Oe=A[J];Oe===-1?((pe&m)===0||(pe&N)!==0)&&(A[J]=Xe(pe,h)):Oe<=h&&(u.expiredLanes|=pe),L&=~pe}if(h=br,m=Fn,m=we(u,u===h?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N=u.callbackNode,m===0||u===h&&(ar===2||ar===9)||u.cancelPendingCommit!==null)return N!==null&&N!==null&&se(N),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||Qe(u,m)){if(h=m&-m,h===u.callbackPriority)return h;switch(N!==null&&se(N),kt(m)){case 2:case 8:m=de;break;case 32:m=ae;break;case 268435456:m=ie;break;default:m=ae}return N=R1.bind(null,u),m=Te(m,N),u.callbackPriority=h,u.callbackNode=m,h}return N!==null&&N!==null&&se(N),u.callbackPriority=2,u.callbackNode=null,2}function R1(u,h){if(Sa!==0&&Sa!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(Kp()&&u.callbackNode!==m)return null;var N=Fn;return N=we(u,u===br?N:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N===0?null:(b1(u,N,h),kh(u,Ne()),u.callbackNode!=null&&u.callbackNode===m?R1.bind(null,u):null)}function L1(u,h){if(Kp())return null;b1(u,h,!0)}function Sx(){k_(function(){(rr&6)!==0?Te(ge,v_):Th()})}function Jp(){return vl===0&&(vl=ct()),vl}function F1(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Ed(""+u)}function $1(u,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,u.id&&m.setAttribute("form",u.id),h.parentNode.insertBefore(m,h),u=new FormData(u),m.parentNode.removeChild(m),u}function b_(u,h,m,N,A){if(h==="submit"&&m&&m.stateNode===A){var L=F1((A[Yn]||null).action),J=N.submitter;J&&(h=(h=J[Yn]||null)?F1(h.formAction):J.getAttribute("formAction"),h!==null&&(L=h,J=null));var pe=new Kf("action","action",null,N,A);u.push({event:pe,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(vl!==0){var Oe=J?$1(A,J):new FormData(A);ah(m,{pending:!0,data:Oe,method:A.method,action:L},null,Oe)}}else typeof L=="function"&&(pe.preventDefault(),Oe=J?$1(A,J):new FormData(A),ah(m,{pending:!0,data:Oe,method:A.method,action:L},L,Oe))},currentTarget:A}]})}}for(var _x=0;_x<Qn.length;_x++){var Cx=Qn[_x],j_=Cx.toLowerCase(),w_=Cx[0].toUpperCase()+Cx.slice(1);ps(j_,"on"+w_)}ps(sp,"onAnimationEnd"),ps(v0,"onAnimationIteration"),ps(wi,"onAnimationStart"),ps("dblclick","onDoubleClick"),ps("focusin","onFocus"),ps("focusout","onBlur"),ps(op,"onTransitionRun"),ps(a_,"onTransitionStart"),ps(lu,"onTransitionCancel"),ps(Id,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Na("onBeforeInput",["compositionend","keypress","textInput","paste"]),Na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ah));function B1(u,h){h=(h&4)!==0;for(var m=0;m<u.length;m++){var N=u[m],A=N.event;N=N.listeners;e:{var L=void 0;if(h)for(var J=N.length-1;0<=J;J--){var pe=N[J],Oe=pe.instance,Je=pe.currentTarget;if(pe=pe.listener,Oe!==L&&A.isPropagationStopped())break e;L=pe,A.currentTarget=Je;try{L(A)}catch(ut){dc(ut)}A.currentTarget=null,L=Oe}else for(J=0;J<N.length;J++){if(pe=N[J],Oe=pe.instance,Je=pe.currentTarget,pe=pe.listener,Oe!==L&&A.isPropagationStopped())break e;L=pe,A.currentTarget=Je;try{L(A)}catch(ut){dc(ut)}A.currentTarget=null,L=Oe}}}}function Cn(u,h){var m=h[za];m===void 0&&(m=h[za]=new Set);var N=u+"__bubble";m.has(N)||(z1(h,u,2,!1),m.add(N))}function Tx(u,h,m){var N=0;h&&(N|=4),z1(m,u,N,h)}var ci="_reactListening"+Math.random().toString(36).slice(2);function kx(u){if(!u[ci]){u[ci]=!0,Sn.forEach(function(m){m!=="selectionchange"&&(N_.has(m)||Tx(m,!1,u),Tx(m,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[ci]||(h[ci]=!0,Tx("selectionchange",!1,h))}}function z1(u,h,m,N){switch(sj(h)){case 2:var A=z_;break;case 8:A=zu;break;default:A=Fx}m=A.bind(null,h,m,u),A=void 0,!Dd||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(A=!0),N?A!==void 0?u.addEventListener(h,m,{capture:!0,passive:A}):u.addEventListener(h,m,!0):A!==void 0?u.addEventListener(h,m,{passive:A}):u.addEventListener(h,m,!1)}function Ao(u,h,m,N,A){var L=N;if((h&1)===0&&(h&2)===0&&N!==null)e:for(;;){if(N===null)return;var J=N.tag;if(J===3||J===4){var pe=N.stateNode.containerInfo;if(pe===A)break;if(J===4)for(J=N.return;J!==null;){var Oe=J.tag;if((Oe===3||Oe===4)&&J.stateNode.containerInfo===A)return;J=J.return}for(;pe!==null;){if(J=Rn(pe),J===null)return;if(Oe=J.tag,Oe===5||Oe===6||Oe===26||Oe===27){N=L=J;continue e}pe=pe.parentNode}}N=N.return}Jb(function(){var Je=L,ut=cy(m),pt=[];e:{var tt=Rd.get(u);if(tt!==void 0){var Ze=Kf,Kt=u;switch(u){case"keypress":if(or(m)===0)break e;case"keydown":case"keyup":Ze=my;break;case"focusin":Kt="focus",Ze=Qf;break;case"focusout":Kt="blur",Ze=Qf;break;case"beforeblur":case"afterblur":Ze=Qf;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=Xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=py;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=YS;break;case sp:case v0:case wi:Ze=r0;break;case Id:Ze=QS;break;case"scroll":case"scrollend":Ze=GS;break;case"wheel":Ze=JS;break;case"copy":case"cut":case"paste":Ze=i0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=po;break;case"toggle":case"beforetoggle":Ze=Jf}var Wt=(h&4)!==0,cr=!Wt&&(u==="scroll"||u==="scrollend"),We=Wt?tt!==null?tt+"Capture":null:tt;Wt=[];for(var qe=Je,Ye;qe!==null;){var ht=qe;if(Ye=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Ye===null||We===null||(ht=Pd(qe,We),ht!=null&&Wt.push(on(qe,ht,Ye))),cr)break;qe=qe.return}0<Wt.length&&(tt=new Ze(tt,Kt,null,m,ut),pt.push({event:tt,listeners:Wt}))}}if((h&7)===0){e:{if(tt=u==="mouseover"||u==="pointerover",Ze=u==="mouseout"||u==="pointerout",tt&&m!==Gf&&(Kt=m.relatedTarget||m.fromElement)&&(Rn(Kt)||Kt[vr]))break e;if((Ze||tt)&&(tt=ut.window===ut?ut:(tt=ut.ownerDocument)?tt.defaultView||tt.parentWindow:window,Ze?(Kt=m.relatedTarget||m.toElement,Ze=Je,Kt=Kt?Rn(Kt):null,Kt!==null&&(cr=s(Kt),Wt=Kt.tag,Kt!==cr||Wt!==5&&Wt!==27&&Wt!==6)&&(Kt=null)):(Ze=null,Kt=Je),Ze!==Kt)){if(Wt=Xo,ht="onMouseLeave",We="onMouseEnter",qe="mouse",(u==="pointerout"||u==="pointerover")&&(Wt=po,ht="onPointerLeave",We="onPointerEnter",qe="pointer"),cr=Ze==null?tt:gt(Ze),Ye=Kt==null?tt:gt(Kt),tt=new Wt(ht,qe+"leave",Ze,m,ut),tt.target=cr,tt.relatedTarget=Ye,ht=null,Rn(ut)===Je&&(Wt=new Wt(We,qe+"enter",Kt,m,ut),Wt.target=Ye,Wt.relatedTarget=cr,ht=Wt),cr=ht,Ze&&Kt)t:{for(Wt=Ze,We=Kt,qe=0,Ye=Wt;Ye;Ye=la(Ye))qe++;for(Ye=0,ht=We;ht;ht=la(ht))Ye++;for(;0<qe-Ye;)Wt=la(Wt),qe--;for(;0<Ye-qe;)We=la(We),Ye--;for(;qe--;){if(Wt===We||We!==null&&Wt===We.alternate)break t;Wt=la(Wt),We=la(We)}Wt=null}else Wt=null;Ze!==null&&Gr(pt,tt,Ze,Wt,!1),Kt!==null&&cr!==null&&Gr(pt,cr,Kt,Wt,!0)}}e:{if(tt=Je?gt(Je):window,Ze=tt.nodeName&&tt.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&tt.type==="file")var Mt=h0;else if(np(tt))if(f0)Mt=t_;else{Mt=el;var bn=g0}else Ze=tt.nodeName,!Ze||Ze.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Je&&ly(Je.elementType)&&(Mt=h0):Mt=ip;if(Mt&&(Mt=Mt(u,Je))){au(pt,Mt,m,ut);break e}bn&&bn(u,tt,Je),u==="focusout"&&Je&&tt.type==="number"&&Je.memoizedProps.value!=null&&Ad(tt,"number",tt.value)}switch(bn=Je?gt(Je):window,u){case"focusin":(np(bn)||bn.contentEditable==="true")&&(ou=bn,tl=Je,He=null);break;case"focusout":He=tl=ou=null;break;case"mousedown":st=!0;break;case"contextmenu":case"mouseup":case"dragend":st=!1,rt(pt,m,ut);break;case"selectionchange":if(r_)break;case"keydown":case"keyup":rt(pt,m,ut)}var Bt;if(xy)e:{switch(u){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Jo?u0(u,m)&&(Yt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Yt="onCompositionStart");Yt&&(Zf&&m.locale!=="ko"&&(Jo||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Jo&&(Bt=Zb()):(Qo=ut,hy="value"in Qo?Qo.value:Qo.textContent,Jo=!0)),bn=Zp(Je,Yt),0<bn.length&&(Yt=new Ja(Yt,u,null,m,ut),pt.push({event:Yt,listeners:bn}),Bt?Yt.data=Bt:(Bt=tp(m),Bt!==null&&(Yt.data=Bt)))),(Bt=c0?ZS(u,m):d0(u,m))&&(Yt=Zp(Je,"onBeforeInput"),0<Yt.length&&(bn=new Ja("onBeforeInput","beforeinput",null,m,ut),pt.push({event:bn,listeners:Yt}),bn.data=Bt)),b_(pt,u,Je,m,ut)}B1(pt,h)})}function on(u,h,m){return{instance:u,listener:h,currentTarget:m}}function Zp(u,h){for(var m=h+"Capture",N=[];u!==null;){var A=u,L=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||L===null||(A=Pd(u,m),A!=null&&N.unshift(on(u,A,L)),A=Pd(u,h),A!=null&&N.push(on(u,A,L))),u.tag===3)return N;u=u.return}return[]}function la(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function Gr(u,h,m,N,A){for(var L=h._reactName,J=[];m!==null&&m!==N;){var pe=m,Oe=pe.alternate,Je=pe.stateNode;if(pe=pe.tag,Oe!==null&&Oe===N)break;pe!==5&&pe!==26&&pe!==27||Je===null||(Oe=Je,A?(Je=Pd(m,L),Je!=null&&J.unshift(on(m,Je,Oe))):A||(Je=Pd(m,L),Je!=null&&J.push(on(m,Je,Oe)))),m=m.return}J.length!==0&&u.push({event:h,listeners:J})}var S_=/\r\n?/g,bl=/\u0000|\uFFFD/g;function q1(u){return(typeof u=="string"?u:""+u).replace(S_,`
`).replace(bl,"")}function U1(u,h){return h=q1(h),q1(u)===h}function em(){}function lr(u,h,m,N,A,L){switch(m){case"children":typeof N=="string"?h==="body"||h==="textarea"&&N===""||Yo(u,N):(typeof N=="number"||typeof N=="bigint")&&h!=="body"&&Yo(u,""+N);break;case"className":zf(u,"class",N);break;case"tabIndex":zf(u,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":zf(u,m,N);break;case"style":oy(u,N,L);break;case"data":if(h!=="object"){zf(u,"data",N);break}case"src":case"href":if(N===""&&(h!=="a"||m!=="href")){u.removeAttribute(m);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(m);break}N=Ed(""+N),u.setAttribute(m,N);break;case"action":case"formAction":if(typeof N=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(m==="formAction"?(h!=="input"&&lr(u,h,"name",A.name,A,null),lr(u,h,"formEncType",A.formEncType,A,null),lr(u,h,"formMethod",A.formMethod,A,null),lr(u,h,"formTarget",A.formTarget,A,null)):(lr(u,h,"encType",A.encType,A,null),lr(u,h,"method",A.method,A,null),lr(u,h,"target",A.target,A,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(m);break}N=Ed(""+N),u.setAttribute(m,N);break;case"onClick":N!=null&&(u.onclick=em);break;case"onScroll":N!=null&&Cn("scroll",u);break;case"onScrollEnd":N!=null&&Cn("scrollend",u);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(a(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(a(60));u.innerHTML=m}}break;case"multiple":u.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":u.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){u.removeAttribute("xlink:href");break}m=Ed(""+N),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,""+N):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":N===!0?u.setAttribute(m,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,N):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?u.setAttribute(m,N):u.removeAttribute(m);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?u.removeAttribute(m):u.setAttribute(m,N);break;case"popover":Cn("beforetoggle",u),Cn("toggle",u),Bf(u,"popover",N);break;case"xlinkActuate":Fs(u,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":Fs(u,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":Fs(u,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":Fs(u,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":Fs(u,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":Fs(u,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":Fs(u,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":Fs(u,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":Fs(u,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":Bf(u,"is",N);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Qb.get(m)||m,Bf(u,m,N))}}function Ax(u,h,m,N,A,L){switch(m){case"style":oy(u,N,L);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(a(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(a(60));u.innerHTML=m}}break;case"children":typeof N=="string"?Yo(u,N):(typeof N=="number"||typeof N=="bigint")&&Yo(u,""+N);break;case"onScroll":N!=null&&Cn("scroll",u);break;case"onScrollEnd":N!=null&&Cn("scrollend",u);break;case"onClick":N!=null&&(u.onclick=em);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ln.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),h=m.slice(2,A?m.length-7:void 0),L=u[Yn]||null,L=L!=null?L[m]:null,typeof L=="function"&&u.removeEventListener(h,L,A),typeof N=="function")){typeof L!="function"&&L!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(h,N,A);break e}m in u?u[m]=N:N===!0?u.setAttribute(m,""):Bf(u,m,N)}}}function ca(u,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cn("error",u),Cn("load",u);var N=!1,A=!1,L;for(L in m)if(m.hasOwnProperty(L)){var J=m[L];if(J!=null)switch(L){case"src":N=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:lr(u,h,L,J,m,null)}}A&&lr(u,h,"srcSet",m.srcSet,m,null),N&&lr(u,h,"src",m.src,m,null);return;case"input":Cn("invalid",u);var pe=L=J=A=null,Oe=null,Je=null;for(N in m)if(m.hasOwnProperty(N)){var ut=m[N];if(ut!=null)switch(N){case"name":A=ut;break;case"type":J=ut;break;case"checked":Oe=ut;break;case"defaultChecked":Je=ut;break;case"value":L=ut;break;case"defaultValue":pe=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(a(137,h));break;default:lr(u,h,N,ut,m,null)}}ay(u,L,pe,Oe,Je,J,A,!1),Uf(u);return;case"select":Cn("invalid",u),N=J=L=null;for(A in m)if(m.hasOwnProperty(A)&&(pe=m[A],pe!=null))switch(A){case"value":L=pe;break;case"defaultValue":J=pe;break;case"multiple":N=pe;default:lr(u,h,A,pe,m,null)}h=L,m=J,u.multiple=!!N,h!=null?Xc(u,!!N,h,!1):m!=null&&Xc(u,!!N,m,!0);return;case"textarea":Cn("invalid",u),L=A=N=null;for(J in m)if(m.hasOwnProperty(J)&&(pe=m[J],pe!=null))switch(J){case"value":N=pe;break;case"defaultValue":A=pe;break;case"children":L=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(91));break;default:lr(u,h,J,pe,m,null)}Hf(u,N,A,L),Uf(u);return;case"option":for(Oe in m)if(m.hasOwnProperty(Oe)&&(N=m[Oe],N!=null))switch(Oe){case"selected":u.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:lr(u,h,Oe,N,m,null)}return;case"dialog":Cn("beforetoggle",u),Cn("toggle",u),Cn("cancel",u),Cn("close",u);break;case"iframe":case"object":Cn("load",u);break;case"video":case"audio":for(N=0;N<Ah.length;N++)Cn(Ah[N],u);break;case"image":Cn("error",u),Cn("load",u);break;case"details":Cn("toggle",u);break;case"embed":case"source":case"link":Cn("error",u),Cn("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in m)if(m.hasOwnProperty(Je)&&(N=m[Je],N!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:lr(u,h,Je,N,m,null)}return;default:if(ly(h)){for(ut in m)m.hasOwnProperty(ut)&&(N=m[ut],N!==void 0&&Ax(u,h,ut,N,m,void 0));return}}for(pe in m)m.hasOwnProperty(pe)&&(N=m[pe],N!=null&&lr(u,h,pe,N,m,null))}function __(u,h,m,N){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,L=null,J=null,pe=null,Oe=null,Je=null,ut=null;for(Ze in m){var pt=m[Ze];if(m.hasOwnProperty(Ze)&&pt!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":Oe=pt;default:N.hasOwnProperty(Ze)||lr(u,h,Ze,null,N,pt)}}for(var tt in N){var Ze=N[tt];if(pt=m[tt],N.hasOwnProperty(tt)&&(Ze!=null||pt!=null))switch(tt){case"type":L=Ze;break;case"name":A=Ze;break;case"checked":Je=Ze;break;case"defaultChecked":ut=Ze;break;case"value":J=Ze;break;case"defaultValue":pe=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(a(137,h));break;default:Ze!==pt&&lr(u,h,tt,Ze,N,pt)}}Vf(u,J,pe,Oe,Je,ut,L,A);return;case"select":Ze=J=pe=tt=null;for(L in m)if(Oe=m[L],m.hasOwnProperty(L)&&Oe!=null)switch(L){case"value":break;case"multiple":Ze=Oe;default:N.hasOwnProperty(L)||lr(u,h,L,null,N,Oe)}for(A in N)if(L=N[A],Oe=m[A],N.hasOwnProperty(A)&&(L!=null||Oe!=null))switch(A){case"value":tt=L;break;case"defaultValue":pe=L;break;case"multiple":J=L;default:L!==Oe&&lr(u,h,A,L,N,Oe)}h=pe,m=J,N=Ze,tt!=null?Xc(u,!!m,tt,!1):!!N!=!!m&&(h!=null?Xc(u,!!m,h,!0):Xc(u,!!m,m?[]:"",!1));return;case"textarea":Ze=tt=null;for(pe in m)if(A=m[pe],m.hasOwnProperty(pe)&&A!=null&&!N.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:lr(u,h,pe,null,N,A)}for(J in N)if(A=N[J],L=m[J],N.hasOwnProperty(J)&&(A!=null||L!=null))switch(J){case"value":tt=A;break;case"defaultValue":Ze=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:A!==L&&lr(u,h,J,A,N,L)}iy(u,tt,Ze);return;case"option":for(var Kt in m)if(tt=m[Kt],m.hasOwnProperty(Kt)&&tt!=null&&!N.hasOwnProperty(Kt))switch(Kt){case"selected":u.selected=!1;break;default:lr(u,h,Kt,null,N,tt)}for(Oe in N)if(tt=N[Oe],Ze=m[Oe],N.hasOwnProperty(Oe)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Oe){case"selected":u.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:lr(u,h,Oe,tt,N,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in m)tt=m[Wt],m.hasOwnProperty(Wt)&&tt!=null&&!N.hasOwnProperty(Wt)&&lr(u,h,Wt,null,N,tt);for(Je in N)if(tt=N[Je],Ze=m[Je],N.hasOwnProperty(Je)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(a(137,h));break;default:lr(u,h,Je,tt,N,Ze)}return;default:if(ly(h)){for(var cr in m)tt=m[cr],m.hasOwnProperty(cr)&&tt!==void 0&&!N.hasOwnProperty(cr)&&Ax(u,h,cr,void 0,N,tt);for(ut in N)tt=N[ut],Ze=m[ut],!N.hasOwnProperty(ut)||tt===Ze||tt===void 0&&Ze===void 0||Ax(u,h,ut,tt,N,Ze);return}}for(var We in m)tt=m[We],m.hasOwnProperty(We)&&tt!=null&&!N.hasOwnProperty(We)&&lr(u,h,We,null,N,tt);for(pt in N)tt=N[pt],Ze=m[pt],!N.hasOwnProperty(pt)||tt===Ze||tt==null&&Ze==null||lr(u,h,pt,tt,N,Ze)}var js=null,tm=null;function mc(u){return u.nodeType===9?u:u.ownerDocument}function Or(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fr(u,h){if(u===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&h==="foreignObject"?0:u}function nm(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Ex=null;function C_(){var u=window.event;return u&&u.type==="popstate"?u===Ex?!1:(Ex=u,!0):(Ex=null,!1)}var V1=typeof setTimeout=="function"?setTimeout:void 0,T_=typeof clearTimeout=="function"?clearTimeout:void 0,H1=typeof Promise=="function"?Promise:void 0,k_=typeof queueMicrotask=="function"?queueMicrotask:typeof H1<"u"?function(u){return H1.resolve(null).then(u).catch(G1)}:V1;function G1(u){setTimeout(function(){throw u})}function ts(u){return u==="head"}function rm(u,h){var m=h,N=0,A=0;do{var L=m.nextSibling;if(u.removeChild(m),L&&L.nodeType===8)if(m=L.data,m==="/$"){if(0<N&&8>N){m=N;var J=u.ownerDocument;if(m&1&&Eh(J.documentElement),m&2&&Eh(J.body),m&4)for(m=J.head,Eh(m),J=m.firstChild;J;){var pe=J.nextSibling,Oe=J.nodeName;J[qr]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&J.rel.toLowerCase()==="stylesheet"||m.removeChild(J),J=pe}}if(A===0){u.removeChild(L),Fh(h);return}A--}else m==="$"||m==="$?"||m==="$!"?A++:N=m.charCodeAt(0)-48;else N=0;m=L}while(m);Fh(h)}function Px(u){var h=u.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Px(m),Tn(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function W1(u,h,m,N){for(;u.nodeType===1;){var A=m;if(u.nodeName.toLowerCase()!==h.toLowerCase()){if(!N&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(N){if(!u[qr])switch(h){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(L=u.getAttribute("rel"),L==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(L!==A.rel||u.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||u.getAttribute("title")!==(A.title==null?null:A.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(L=u.getAttribute("src"),(L!==(A.src==null?null:A.src)||u.getAttribute("type")!==(A.type==null?null:A.type)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&L&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(h==="input"&&u.type==="hidden"){var L=A.name==null?null:""+A.name;if(A.type==="hidden"&&u.getAttribute("name")===L)return u}else return u;if(u=ws(u.nextSibling),u===null)break}return null}function am(u,h,m){if(h==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=ws(u.nextSibling),u===null))return null;return u}function Wa(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function Iu(u,h){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")h();else{var N=function(){h(),m.removeEventListener("DOMContentLoaded",N)};m.addEventListener("DOMContentLoaded",N),u._reactRetry=N}}function ws(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return u}var Dx=null;function K1(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return u;h--}else m==="/$"&&h++}u=u.previousSibling}return null}function Y1(u,h,m){switch(h=mc(m),u){case"html":if(u=h.documentElement,!u)throw Error(a(452));return u;case"head":if(u=h.head,!u)throw Error(a(453));return u;case"body":if(u=h.body,!u)throw Error(a(454));return u;default:throw Error(a(451))}}function Eh(u){for(var h=u.attributes;h.length;)u.removeAttributeNode(h[0]);Tn(u)}var Ai=new Map,Ys=new Set;function un(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Qs=G.d;G.d={f:ns,r:Q1,D:A_,C:X1,L:im,m:E_,X:D_,S:P_,M:O_};function ns(){var u=Qs.f(),h=Gp();return u||h}function Q1(u){var h=et(u);h!==null&&h.tag===5&&h.type==="form"?Ap(h):Qs.r(u)}var Ru=typeof document>"u"?null:document;function Xn(u,h,m){var N=Ru;if(N&&typeof h=="string"&&h){var A=qi(h);A='link[rel="'+u+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),Ys.has(A)||(Ys.add(A),u={rel:u,crossOrigin:m,href:h},N.querySelector(A)===null&&(h=N.createElement("link"),ca(h,"link",u),Ot(h),N.head.appendChild(h)))}}function A_(u){Qs.D(u),Xn("dns-prefetch",u,null)}function X1(u,h){Qs.C(u,h),Xn("preconnect",u,h)}function im(u,h,m){Qs.L(u,h,m);var N=Ru;if(N&&u&&h){var A='link[rel="preload"][as="'+qi(h)+'"]';h==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+qi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+qi(m.imageSizes)+'"]')):A+='[href="'+qi(u)+'"]';var L=A;switch(h){case"style":L=Lu(u);break;case"script":L=Fu(u)}Ai.has(L)||(u=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:u,as:h},m),Ai.set(L,u),N.querySelector(A)!==null||h==="style"&&N.querySelector(Ph(L))||h==="script"&&N.querySelector(Dh(L))||(h=N.createElement("link"),ca(h,"link",u),Ot(h),N.head.appendChild(h)))}}function E_(u,h){Qs.m(u,h);var m=Ru;if(m&&u){var N=h&&typeof h.as=="string"?h.as:"script",A='link[rel="modulepreload"][as="'+qi(N)+'"][href="'+qi(u)+'"]',L=A;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=Fu(u)}if(!Ai.has(L)&&(u=f({rel:"modulepreload",href:u},h),Ai.set(L,u),m.querySelector(A)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Dh(L)))return}N=m.createElement("link"),ca(N,"link",u),Ot(N),m.head.appendChild(N)}}}function P_(u,h,m){Qs.S(u,h,m);var N=Ru;if(N&&u){var A=St(N).hoistableStyles,L=Lu(u);h=h||"default";var J=A.get(L);if(!J){var pe={loading:0,preload:null};if(J=N.querySelector(Ph(L)))pe.loading=5;else{u=f({rel:"stylesheet",href:u,"data-precedence":h},m),(m=Ai.get(L))&&Oh(u,m);var Oe=J=N.createElement("link");Ot(Oe),ca(Oe,"link",u),Oe._p=new Promise(function(Je,ut){Oe.onload=Je,Oe.onerror=ut}),Oe.addEventListener("load",function(){pe.loading|=1}),Oe.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,sm(J,h,N)}J={type:"stylesheet",instance:J,count:1,state:pe},A.set(L,J)}}}function D_(u,h){Qs.X(u,h);var m=Ru;if(m&&u){var N=St(m).hoistableScripts,A=Fu(u),L=N.get(A);L||(L=m.querySelector(Dh(A)),L||(u=f({src:u,async:!0},h),(h=Ai.get(A))&&Ox(u,h),L=m.createElement("script"),Ot(L),ca(L,"link",u),m.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},N.set(A,L))}}function O_(u,h){Qs.M(u,h);var m=Ru;if(m&&u){var N=St(m).hoistableScripts,A=Fu(u),L=N.get(A);L||(L=m.querySelector(Dh(A)),L||(u=f({src:u,async:!0,type:"module"},h),(h=Ai.get(A))&&Ox(u,h),L=m.createElement("script"),Ot(L),ca(L,"link",u),m.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},N.set(A,L))}}function J1(u,h,m,N){var A=(A=ze.current)?un(A):null;if(!A)throw Error(a(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Lu(m.href),m=St(A).hoistableStyles,N=m.get(h),N||(N={type:"style",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Lu(m.href);var L=St(A).hoistableStyles,J=L.get(u);if(J||(A=A.ownerDocument||A,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(u,J),(L=A.querySelector(Ph(u)))&&!L._p&&(J.instance=L,J.state.loading=5),Ai.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ai.set(u,m),L||M_(A,u,m,J.state))),h&&N===null)throw Error(a(528,""));return J}if(h&&N!==null)throw Error(a(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Fu(m),m=St(A).hoistableScripts,N=m.get(h),N||(N={type:"script",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,u))}}function Lu(u){return'href="'+qi(u)+'"'}function Ph(u){return'link[rel="stylesheet"]['+u+"]"}function Z1(u){return f({},u,{"data-precedence":u.precedence,precedence:null})}function M_(u,h,m,N){u.querySelector('link[rel="preload"][as="style"]['+h+"]")?N.loading=1:(h=u.createElement("link"),N.preload=h,h.addEventListener("load",function(){return N.loading|=1}),h.addEventListener("error",function(){return N.loading|=2}),ca(h,"link",m),Ot(h),u.head.appendChild(h))}function Fu(u){return'[src="'+qi(u)+'"]'}function Dh(u){return"script[async]"+u}function ej(u,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var N=u.querySelector('style[data-href~="'+qi(m.href)+'"]');if(N)return h.instance=N,Ot(N),N;var A=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return N=(u.ownerDocument||u).createElement("style"),Ot(N),ca(N,"style",A),sm(N,m.precedence,u),h.instance=N;case"stylesheet":A=Lu(m.href);var L=u.querySelector(Ph(A));if(L)return h.state.loading|=4,h.instance=L,Ot(L),L;N=Z1(m),(A=Ai.get(A))&&Oh(N,A),L=(u.ownerDocument||u).createElement("link"),Ot(L);var J=L;return J._p=new Promise(function(pe,Oe){J.onload=pe,J.onerror=Oe}),ca(L,"link",N),h.state.loading|=4,sm(L,m.precedence,u),h.instance=L;case"script":return L=Fu(m.src),(A=u.querySelector(Dh(L)))?(h.instance=A,Ot(A),A):(N=m,(A=Ai.get(L))&&(N=f({},m),Ox(N,A)),u=u.ownerDocument||u,A=u.createElement("script"),Ot(A),ca(A,"link",N),u.head.appendChild(A),h.instance=A);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(N=h.instance,h.state.loading|=4,sm(N,m.precedence,u));return h.instance}function sm(u,h,m){for(var N=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=N.length?N[N.length-1]:null,L=A,J=0;J<N.length;J++){var pe=N[J];if(pe.dataset.precedence===h)L=pe;else if(L!==A)break}L?L.parentNode.insertBefore(u,L.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(u,h.firstChild))}function Oh(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.title==null&&(u.title=h.title)}function Ox(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.integrity==null&&(u.integrity=h.integrity)}var $u=null;function tj(u,h,m){if($u===null){var N=new Map,A=$u=new Map;A.set(m,N)}else A=$u,N=A.get(m),N||(N=new Map,A.set(m,N));if(N.has(u))return N;for(N.set(u,null),m=m.getElementsByTagName(u),A=0;A<m.length;A++){var L=m[A];if(!(L[qr]||L[Vt]||u==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var J=L.getAttribute(h)||"";J=u+J;var pe=N.get(J);pe?pe.push(L):N.set(J,[L])}}return N}function nj(u,h,m){u=u.ownerDocument||u,u.head.insertBefore(m,h==="title"?u.querySelector("head > title"):null)}function I_(u,h,m){if(m===1||h.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return u=h.disabled,typeof h.precedence=="string"&&u==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function ua(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var ga=null;function R_(){}function L_(u,h,m){if(ga===null)throw Error(a(475));var N=ga;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=Lu(m.href),L=u.querySelector(Ph(A));if(L){u=L._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(N.count++,N=Mh.bind(N),u.then(N,N)),h.state.loading|=4,h.instance=L,Ot(L);return}L=u.ownerDocument||u,m=Z1(m),(A=Ai.get(A))&&Oh(m,A),L=L.createElement("link"),Ot(L);var J=L;J._p=new Promise(function(pe,Oe){J.onload=pe,J.onerror=Oe}),ca(L,"link",m),h.instance=L}N.stylesheets===null&&(N.stylesheets=new Map),N.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(N.count++,h=Mh.bind(N),u.addEventListener("load",h),u.addEventListener("error",h))}}function F_(){if(ga===null)throw Error(a(475));var u=ga;return u.stylesheets&&u.count===0&&Mx(u,u.stylesheets),0<u.count?function(h){var m=setTimeout(function(){if(u.stylesheets&&Mx(u,u.stylesheets),u.unsuspend){var N=u.unsuspend;u.unsuspend=null,N()}},6e4);return u.unsuspend=h,function(){u.unsuspend=null,clearTimeout(m)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)Mx(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var om=null;function Mx(u,h){u.stylesheets=null,u.unsuspend!==null&&(u.count++,om=new Map,h.forEach($_,u),om=null,Mh.call(u))}function $_(u,h){if(!(h.state.loading&4)){var m=om.get(u);if(m)var N=m.get(null);else{m=new Map,om.set(u,m);for(var A=u.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<A.length;L++){var J=A[L];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(m.set(J.dataset.precedence,J),N=J)}N&&m.set(null,N)}A=h.instance,J=A.getAttribute("data-precedence"),L=m.get(J)||N,L===N&&m.set(null,A),m.set(J,A),this.count++,N=Mh.bind(this),A.addEventListener("load",N),A.addEventListener("error",N),L?L.parentNode.insertBefore(A,L.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(A,u.firstChild)),h.state.loading|=4}}var Bu={$$typeof:C,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function B_(u,h,m,N,A,L,J,pe){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=N,this.onUncaughtError=A,this.onCaughtError=L,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function rj(u,h,m,N,A,L,J,pe,Oe,Je,ut,pt){return u=new B_(u,h,m,J,pe,Oe,Je,pt),h=1,L===!0&&(h|=24),L=Za(3,null,null,h),u.current=L,L.stateNode=u,h=ky(),h.refCount++,u.pooledCache=h,h.refCount++,L.memoizedState={element:N,isDehydrated:m,cache:h},nc(L),u}function aj(u){return u?(u=Yl,u):Yl}function Ix(u,h,m,N,A,L){A=aj(A),N.context===null?N.context=A:N.pendingContext=A,N=il(h),N.payload={element:m},L=L===void 0?null:L,L!==null&&(N.callback=L),m=xo(u,N,h),m!==null&&(ki(m,u,h),Wd(m,u,h))}function Rx(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<h?m:h}}function Lx(u,h){Rx(u,h),(u=u.alternate)&&Rx(u,h)}function ij(u){if(u.tag===13){var h=Kl(u,67108864);h!==null&&ki(h,u,67108864),Lx(u,67108864)}}var lm=!0;function z_(u,h,m,N){var A=B.T;B.T=null;var L=G.p;try{G.p=2,Fx(u,h,m,N)}finally{G.p=L,B.T=A}}function zu(u,h,m,N){var A=B.T;B.T=null;var L=G.p;try{G.p=8,Fx(u,h,m,N)}finally{G.p=L,B.T=A}}function Fx(u,h,m,N){if(lm){var A=$x(N);if(A===null)Ao(u,h,N,cm,m),oj(u,N);else if(U_(A,u,h,m,N))N.stopPropagation();else if(oj(u,N),h&4&&-1<q_.indexOf(u)){for(;A!==null;){var L=et(A);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var J=wt(L.pendingLanes);if(J!==0){var pe=L;for(pe.pendingLanes|=2,pe.entangledLanes|=2;J;){var Oe=1<<31-he(J);pe.entanglements[1]|=Oe,J&=~Oe}Ks(L),(rr&6)===0&&(Au=Ne()+500,Ch(0))}}break;case 13:pe=Kl(L,2),pe!==null&&ki(pe,L,2),Gp(),Lx(L,2)}if(L=$x(N),L===null&&Ao(u,h,N,cm,m),L===A)break;A=L}A!==null&&N.stopPropagation()}else Ao(u,h,N,null,m)}}function $x(u){return u=cy(u),Bx(u)}var cm=null;function Bx(u){if(cm=null,u=Rn(u),u!==null){var h=s(u);if(h===null)u=null;else{var m=h.tag;if(m===13){if(u=o(h),u!==null)return u;u=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null)}}return cm=u,null}function sj(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Z()){case ge:return 2;case de:return 8;case ae:case ne:return 32;case ie:return 268435456;default:return 32}default:return 32}}var um=!1,Eo=null,jl=null,wl=null,Ih=new Map,Rh=new Map,Nl=[],q_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oj(u,h){switch(u){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":jl=null;break;case"mouseover":case"mouseout":wl=null;break;case"pointerover":case"pointerout":Ih.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(h.pointerId)}}function Lh(u,h,m,N,A,L){return u===null||u.nativeEvent!==L?(u={blockedOn:h,domEventName:m,eventSystemFlags:N,nativeEvent:L,targetContainers:[A]},h!==null&&(h=et(h),h!==null&&ij(h)),u):(u.eventSystemFlags|=N,h=u.targetContainers,A!==null&&h.indexOf(A)===-1&&h.push(A),u)}function U_(u,h,m,N,A){switch(h){case"focusin":return Eo=Lh(Eo,u,h,m,N,A),!0;case"dragenter":return jl=Lh(jl,u,h,m,N,A),!0;case"mouseover":return wl=Lh(wl,u,h,m,N,A),!0;case"pointerover":var L=A.pointerId;return Ih.set(L,Lh(Ih.get(L)||null,u,h,m,N,A)),!0;case"gotpointercapture":return L=A.pointerId,Rh.set(L,Lh(Rh.get(L)||null,u,h,m,N,A)),!0}return!1}function lj(u){var h=Rn(u.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=o(m),h!==null){u.blockedOn=h,vt(u.priority,function(){if(m.tag===13){var N=Ma();N=jt(N);var A=Kl(m,N);A!==null&&ki(A,m,N),Lx(m,N)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function dm(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var m=$x(u.nativeEvent);if(m===null){m=u.nativeEvent;var N=new m.constructor(m.type,m);Gf=N,m.target.dispatchEvent(N),Gf=null}else return h=et(m),h!==null&&ij(h),u.blockedOn=m,!1;h.shift()}return!0}function cj(u,h,m){dm(u)&&m.delete(h)}function V_(){um=!1,Eo!==null&&dm(Eo)&&(Eo=null),jl!==null&&dm(jl)&&(jl=null),wl!==null&&dm(wl)&&(wl=null),Ih.forEach(cj),Rh.forEach(cj)}function hm(u,h){u.blockedOn===h&&(u.blockedOn=null,um||(um=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,V_)))}var fm=null;function uj(u){fm!==u&&(fm=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){fm===u&&(fm=null);for(var h=0;h<u.length;h+=3){var m=u[h],N=u[h+1],A=u[h+2];if(typeof N!="function"){if(Bx(N||m)===null)continue;break}var L=et(m);L!==null&&(u.splice(h,3),h-=3,ah(L,{pending:!0,data:A,method:m.method,action:N},N,A))}}))}function Fh(u){function h(Oe){return hm(Oe,u)}Eo!==null&&hm(Eo,u),jl!==null&&hm(jl,u),wl!==null&&hm(wl,u),Ih.forEach(h),Rh.forEach(h);for(var m=0;m<Nl.length;m++){var N=Nl[m];N.blockedOn===u&&(N.blockedOn=null)}for(;0<Nl.length&&(m=Nl[0],m.blockedOn===null);)lj(m),m.blockedOn===null&&Nl.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(N=0;N<m.length;N+=3){var A=m[N],L=m[N+1],J=A[Yn]||null;if(typeof L=="function")J||uj(m);else if(J){var pe=null;if(L&&L.hasAttribute("formAction")){if(A=L,J=L[Yn]||null)pe=J.formAction;else if(Bx(A)!==null)continue}else pe=J.action;typeof pe=="function"?m[N+1]=pe:(m.splice(N,3),N-=3),uj(m)}}}function zx(u){this._internalRoot=u}pm.prototype.render=zx.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(a(409));var m=h.current,N=Ma();Ix(m,N,u,h,null,null)},pm.prototype.unmount=zx.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;Ix(u.current,2,null,u,null,null),Gp(),h[vr]=null}};function pm(u){this._internalRoot=u}pm.prototype.unstable_scheduleHydration=function(u){if(u){var h=Kn();u={blockedOn:null,target:u,priority:h};for(var m=0;m<Nl.length&&h!==0&&h<Nl[m].priority;m++);Nl.splice(m,0,u),m===0&&lj(u)}};var dj=e.version;if(dj!=="19.1.0")throw Error(a(527,dj,"19.1.0"));G.findDOMNode=function(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=c(h),u=u!==null?d(u):null,u=u===null?null:u.stateNode,u};var H_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mm.isDisabled&&mm.supportsFiber)try{Q=mm.inject(H_),ye=mm}catch{}}return Ux.createRoot=function(u,h){if(!i(u))throw Error(a(299));var m=!1,N="",A=ex,L=Dp,J=Q0,pe=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(J=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(pe=h.unstable_transitionCallbacks)),h=rj(u,1,!1,null,null,m,N,A,L,J,pe,null),u[vr]=h.current,kx(u),new zx(h)},Ux.hydrateRoot=function(u,h,m){if(!i(u))throw Error(a(299));var N=!1,A="",L=ex,J=Dp,pe=Q0,Oe=null,Je=null;return m!=null&&(m.unstable_strictMode===!0&&(N=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(L=m.onUncaughtError),m.onCaughtError!==void 0&&(J=m.onCaughtError),m.onRecoverableError!==void 0&&(pe=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Oe=m.unstable_transitionCallbacks),m.formState!==void 0&&(Je=m.formState)),h=rj(u,1,!0,h,m??null,N,A,L,J,pe,Oe,Je),h.context=aj(null),m=h.current,N=Ma(),N=jt(N),A=il(N),A.callback=null,xo(m,A,N),m=N,h.current.lanes=m,ke(h,m),Ks(h),u[vr]=h.current,kx(u),new pm(h)},Ux.version="19.1.0",Ux}var XM;function cW(){if(XM)return J_.exports;XM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),J_.exports=lW(),J_.exports}var uW=cW(),Ig=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dW={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Yu,AD,UB,hW=(UB=class{constructor(){Ut(this,Yu,dW);Ut(this,AD,!1)}setTimeoutProvider(t){Pt(this,Yu,t)}setTimeout(t,e){return Ie(this,Yu).setTimeout(t,e)}clearTimeout(t){Ie(this,Yu).clearTimeout(t)}setInterval(t,e){return Ie(this,Yu).setInterval(t,e)}clearInterval(t){Ie(this,Yu).clearInterval(t)}},Yu=new WeakMap,AD=new WeakMap,UB),Qh=new hW;function fW(t){setTimeout(t,0)}var yf=typeof window>"u"||"Deno"in globalThis;function Mi(){}function pW(t,e){return typeof t=="function"?t(e):t}function JA(t){return typeof t=="number"&&t>=0&&t!==1/0}function tz(t,e){return Math.max(t+(e||0)-Date.now(),0)}function od(t,e){return typeof t=="function"?t(e):t}function eo(t,e){return typeof t=="function"?t(e):t}function JM(t,e){const{type:n="all",exact:a,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(a){if(e.queryHash!==PD(o,e.options))return!1}else if(!Av(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function ZM(t,e){const{exact:n,status:a,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(xf(e.options.mutationKey)!==xf(s))return!1}else if(!Av(e.options.mutationKey,s))return!1}return!(a&&e.state.status!==a||i&&!i(e))}function PD(t,e){return((e==null?void 0:e.queryKeyHashFn)||xf)(t)}function xf(t){return JSON.stringify(t,(e,n)=>ZA(n)?Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{}):n)}function Av(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Av(t[n],e[n])):!1}var mW=Object.prototype.hasOwnProperty;function nz(t,e,n=0){if(t===e)return t;if(n>500)return e;const a=eI(t)&&eI(e);if(!a&&!(ZA(t)&&ZA(e)))return e;const s=(a?t:Object.keys(t)).length,o=a?e:Object.keys(e),l=o.length,c=a?new Array(l):{};let d=0;for(let f=0;f<l;f++){const p=a?f:o[f],g=t[p],x=e[p];if(g===x){c[p]=g,(a?f<s:mW.call(t,p))&&d++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){c[p]=x;continue}const b=nz(g,x,n+1);c[p]=b,b===g&&d++}return s===l&&d===s?t:c}function uw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function eI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ZA(t){if(!tI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!tI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function tI(t){return Object.prototype.toString.call(t)==="[object Object]"}function gW(t){return new Promise(e=>{Qh.setTimeout(e,t)})}function eE(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?nz(t,e):e}function yW(t,e,n=0){const a=[...t,e];return n&&a.length>n?a.slice(1):a}function xW(t,e,n=0){const a=[e,...t];return n&&a.length>n?a.slice(0,-1):a}var DD=Symbol();function rz(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===DD?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function OD(t,e){return typeof t=="function"?t(...e):!!t}function vW(t,e,n){let a=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),a||(a=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var rf,Qu,Um,VB,bW=(VB=class extends Ig{constructor(){super();Ut(this,rf);Ut(this,Qu);Ut(this,Um);Pt(this,Um,e=>{if(!yf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Ie(this,Qu)||this.setEventListener(Ie(this,Um))}onUnsubscribe(){var e;this.hasListeners()||((e=Ie(this,Qu))==null||e.call(this),Pt(this,Qu,void 0))}setEventListener(e){var n;Pt(this,Um,e),(n=Ie(this,Qu))==null||n.call(this),Pt(this,Qu,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){Ie(this,rf)!==e&&(Pt(this,rf,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Ie(this,rf)=="boolean"?Ie(this,rf):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},rf=new WeakMap,Qu=new WeakMap,Um=new WeakMap,VB),MD=new bW;function tE(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function a(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{a({status:"fulfilled",value:i}),t(i)},n.reject=i=>{a({status:"rejected",reason:i}),e(i)},n}var jW=fW;function wW(){let t=[],e=0,n=l=>{l()},a=l=>{l()},i=jW;const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{a(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{i=l}}}var Ta=wW(),Vm,Xu,Hm,HB,NW=(HB=class extends Ig{constructor(){super();Ut(this,Vm,!0);Ut(this,Xu);Ut(this,Hm);Pt(this,Hm,e=>{if(!yf&&window.addEventListener){const n=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}})}onSubscribe(){Ie(this,Xu)||this.setEventListener(Ie(this,Hm))}onUnsubscribe(){var e;this.hasListeners()||((e=Ie(this,Xu))==null||e.call(this),Pt(this,Xu,void 0))}setEventListener(e){var n;Pt(this,Hm,e),(n=Ie(this,Xu))==null||n.call(this),Pt(this,Xu,e(this.setOnline.bind(this)))}setOnline(e){Ie(this,Vm)!==e&&(Pt(this,Vm,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return Ie(this,Vm)}},Vm=new WeakMap,Xu=new WeakMap,Hm=new WeakMap,HB),dw=new NW;function SW(t){return Math.min(1e3*2**t,3e4)}function az(t){return(t??"online")==="online"?dw.isOnline():!0}var nE=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function iz(t){let e=!1,n=0,a;const i=tE(),s=()=>i.status!=="pending",o=j=>{var S;if(!s()){const _=new nE(j);g(_),(S=t.onCancel)==null||S.call(t,_)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>MD.isFocused()&&(t.networkMode==="always"||dw.isOnline())&&t.canRun(),f=()=>az(t.networkMode)&&t.canRun(),p=j=>{s()||(a==null||a(),i.resolve(j))},g=j=>{s()||(a==null||a(),i.reject(j))},x=()=>new Promise(j=>{var S;a=_=>{(s()||d())&&j(_)},(S=t.onPause)==null||S.call(t)}).then(()=>{var j;a=void 0,s()||(j=t.onContinue)==null||j.call(t)}),b=()=>{if(s())return;let j;const S=n===0?t.initialPromise:void 0;try{j=S??t.fn()}catch(_){j=Promise.reject(_)}Promise.resolve(j).then(p).catch(_=>{var P;if(s())return;const T=t.retry??(yf?0:3),C=t.retryDelay??SW,E=typeof C=="function"?C(n,_):C,k=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,_);if(e||!k){g(_);return}n++,(P=t.onFail)==null||P.call(t,n,_),gW(E).then(()=>d()?void 0:x()).then(()=>{e?g(_):b()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?b():x().then(b),i)}}var af,GB,sz=(GB=class{constructor(){Ut(this,af)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),JA(this.gcTime)&&Pt(this,af,Qh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(yf?1/0:5*60*1e3))}clearGcTimeout(){Ie(this,af)&&(Qh.clearTimeout(Ie(this,af)),Pt(this,af,void 0))}},af=new WeakMap,GB),sf,Gm,Zs,of,Ia,wb,lf,Mo,vc,WB,_W=(WB=class extends sz{constructor(e){super();Ut(this,Mo);Ut(this,sf);Ut(this,Gm);Ut(this,Zs);Ut(this,of);Ut(this,Ia);Ut(this,wb);Ut(this,lf);Pt(this,lf,!1),Pt(this,wb,e.defaultOptions),this.setOptions(e.options),this.observers=[],Pt(this,of,e.client),Pt(this,Zs,Ie(this,of).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Pt(this,sf,rI(this.options)),this.state=e.state??Ie(this,sf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Ie(this,Ia))==null?void 0:e.promise}setOptions(e){if(this.options={...Ie(this,wb),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=rI(this.options);n.data!==void 0&&(this.setState(nI(n.data,n.dataUpdatedAt)),Pt(this,sf,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ie(this,Zs).remove(this)}setData(e,n){const a=eE(this.state.data,e,this.options);return wn(this,Mo,vc).call(this,{data:a,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),a}setState(e,n){wn(this,Mo,vc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var a,i;const n=(a=Ie(this,Ia))==null?void 0:a.promise;return(i=Ie(this,Ia))==null||i.cancel(e),n?n.then(Mi).catch(Mi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ie(this,sf))}isActive(){return this.observers.some(e=>eo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===DD||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>od(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!tz(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Ie(this,Ia))==null||n.continue()}onOnline(){var n;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Ie(this,Ia))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Ie(this,Zs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Ie(this,Ia)&&(Ie(this,lf)?Ie(this,Ia).cancel({revert:!0}):Ie(this,Ia).cancelRetry()),this.scheduleGc()),Ie(this,Zs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wn(this,Mo,vc).call(this,{type:"invalidate"})}async fetch(e,n){var c,d,f,p,g,x,b,j,S,_,T,C;if(this.state.fetchStatus!=="idle"&&((c=Ie(this,Ia))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Ie(this,Ia))return Ie(this,Ia).continueRetry(),Ie(this,Ia).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(k=>k.options.queryFn);E&&this.setOptions(E.options)}const a=new AbortController,i=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(Pt(this,lf,!0),a.signal)})},s=()=>{const E=rz(this.options,n),P=(()=>{const I={client:Ie(this,of),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return Pt(this,lf,!1),this.options.persister?this.options.persister(E,P,this):E(P)},l=(()=>{const E={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Ie(this,of),state:this.state,fetchFn:s};return i(E),E})();(d=this.options.behavior)==null||d.onFetch(l,this),Pt(this,Gm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&wn(this,Mo,vc).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Pt(this,Ia,iz({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:E=>{E instanceof nE&&E.revert&&this.setState({...Ie(this,Gm),fetchStatus:"idle"}),a.abort()},onFail:(E,k)=>{wn(this,Mo,vc).call(this,{type:"failed",failureCount:E,error:k})},onPause:()=>{wn(this,Mo,vc).call(this,{type:"pause"})},onContinue:()=>{wn(this,Mo,vc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const E=await Ie(this,Ia).start();if(E===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(E),(x=(g=Ie(this,Zs).config).onSuccess)==null||x.call(g,E,this),(j=(b=Ie(this,Zs).config).onSettled)==null||j.call(b,E,this.state.error,this),E}catch(E){if(E instanceof nE){if(E.silent)return Ie(this,Ia).promise;if(E.revert){if(this.state.data===void 0)throw E;return this.state.data}}throw wn(this,Mo,vc).call(this,{type:"error",error:E}),(_=(S=Ie(this,Zs).config).onError)==null||_.call(S,E,this),(C=(T=Ie(this,Zs).config).onSettled)==null||C.call(T,this.state.data,E,this),E}finally{this.scheduleGc()}}},sf=new WeakMap,Gm=new WeakMap,Zs=new WeakMap,of=new WeakMap,Ia=new WeakMap,wb=new WeakMap,lf=new WeakMap,Mo=new WeakSet,vc=function(e){const n=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...oz(a.data,this.options),fetchMeta:e.meta??null};case"success":const i={...a,...nI(e.data,e.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Pt(this,Gm,e.manual?i:void 0),i;case"error":const s=e.error;return{...a,error:s,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=n(this.state),Ta.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),Ie(this,Zs).notify({query:this,type:"updated",action:e})})},WB);function oz(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:az(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function nI(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function rI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,a=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var as,Un,Nb,Di,cf,Wm,jc,Ju,Sb,Km,Ym,uf,df,Zu,Qm,pr,dv,rE,aE,iE,sE,oE,lE,cE,lz,KB,CW=(KB=class extends Ig{constructor(e,n){super();Ut(this,pr);Ut(this,as);Ut(this,Un);Ut(this,Nb);Ut(this,Di);Ut(this,cf);Ut(this,Wm);Ut(this,jc);Ut(this,Ju);Ut(this,Sb);Ut(this,Km);Ut(this,Ym);Ut(this,uf);Ut(this,df);Ut(this,Zu);Ut(this,Qm,new Set);this.options=n,Pt(this,as,e),Pt(this,Ju,null),Pt(this,jc,tE()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ie(this,Un).addObserver(this),aI(Ie(this,Un),this.options)?wn(this,pr,dv).call(this):this.updateResult(),wn(this,pr,sE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return uE(Ie(this,Un),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return uE(Ie(this,Un),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,wn(this,pr,oE).call(this),wn(this,pr,lE).call(this),Ie(this,Un).removeObserver(this)}setOptions(e){const n=this.options,a=Ie(this,Un);if(this.options=Ie(this,as).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof eo(this.options.enabled,Ie(this,Un))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");wn(this,pr,cE).call(this),Ie(this,Un).setOptions(this.options),n._defaulted&&!uw(this.options,n)&&Ie(this,as).getQueryCache().notify({type:"observerOptionsUpdated",query:Ie(this,Un),observer:this});const i=this.hasListeners();i&&iI(Ie(this,Un),a,this.options,n)&&wn(this,pr,dv).call(this),this.updateResult(),i&&(Ie(this,Un)!==a||eo(this.options.enabled,Ie(this,Un))!==eo(n.enabled,Ie(this,Un))||od(this.options.staleTime,Ie(this,Un))!==od(n.staleTime,Ie(this,Un)))&&wn(this,pr,rE).call(this);const s=wn(this,pr,aE).call(this);i&&(Ie(this,Un)!==a||eo(this.options.enabled,Ie(this,Un))!==eo(n.enabled,Ie(this,Un))||s!==Ie(this,Zu))&&wn(this,pr,iE).call(this,s)}getOptimisticResult(e){const n=Ie(this,as).getQueryCache().build(Ie(this,as),e),a=this.createResult(n,e);return kW(this,a)&&(Pt(this,Di,a),Pt(this,Wm,this.options),Pt(this,cf,Ie(this,Un).state)),a}getCurrentResult(){return Ie(this,Di)}trackResult(e,n){return new Proxy(e,{get:(a,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Ie(this,jc).status==="pending"&&Ie(this,jc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,i))})}trackProp(e){Ie(this,Qm).add(e)}getCurrentQuery(){return Ie(this,Un)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Ie(this,as).defaultQueryOptions(e),a=Ie(this,as).getQueryCache().build(Ie(this,as),n);return a.fetch().then(()=>this.createResult(a,n))}fetch(e){return wn(this,pr,dv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Ie(this,Di)))}createResult(e,n){var z;const a=Ie(this,Un),i=this.options,s=Ie(this,Di),o=Ie(this,cf),l=Ie(this,Wm),d=e!==a?e.state:Ie(this,Nb),{state:f}=e;let p={...f},g=!1,x;if(n._optimisticResults){const q=this.hasListeners(),F=!q&&aI(e,n),V=q&&iI(e,a,n,i);(F||V)&&(p={...p,...oz(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:b,errorUpdatedAt:j,status:S}=p;x=p.data;let _=!1;if(n.placeholderData!==void 0&&x===void 0&&S==="pending"){let q;s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(q=s.data,_=!0):q=typeof n.placeholderData=="function"?n.placeholderData((z=Ie(this,Ym))==null?void 0:z.state.data,Ie(this,Ym)):n.placeholderData,q!==void 0&&(S="success",x=eE(s==null?void 0:s.data,q,n),g=!0)}if(n.select&&x!==void 0&&!_)if(s&&x===(o==null?void 0:o.data)&&n.select===Ie(this,Sb))x=Ie(this,Km);else try{Pt(this,Sb,n.select),x=n.select(x),x=eE(s==null?void 0:s.data,x,n),Pt(this,Km,x),Pt(this,Ju,null)}catch(q){Pt(this,Ju,q)}Ie(this,Ju)&&(b=Ie(this,Ju),x=Ie(this,Km),j=Date.now(),S="error");const T=p.fetchStatus==="fetching",C=S==="pending",E=S==="error",k=C&&T,P=x!==void 0,R={status:S,fetchStatus:p.fetchStatus,isPending:C,isSuccess:S==="success",isError:E,isInitialLoading:k,isLoading:k,data:x,dataUpdatedAt:p.dataUpdatedAt,error:b,errorUpdatedAt:j,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:E&&!P,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:E&&P,isStale:ID(e,n),refetch:this.refetch,promise:Ie(this,jc),isEnabled:eo(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const q=R.data!==void 0,F=R.status==="error"&&!q,V=W=>{F?W.reject(R.error):q&&W.resolve(R.data)},H=()=>{const W=Pt(this,jc,R.promise=tE());V(W)},K=Ie(this,jc);switch(K.status){case"pending":e.queryHash===a.queryHash&&V(K);break;case"fulfilled":(F||R.data!==K.value)&&H();break;case"rejected":(!F||R.error!==K.reason)&&H();break}}return R}updateResult(){const e=Ie(this,Di),n=this.createResult(Ie(this,Un),this.options);if(Pt(this,cf,Ie(this,Un).state),Pt(this,Wm,this.options),Ie(this,cf).data!==void 0&&Pt(this,Ym,Ie(this,Un)),uw(n,e))return;Pt(this,Di,n);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!Ie(this,Qm).size)return!0;const o=new Set(s??Ie(this,Qm));return this.options.throwOnError&&o.add("error"),Object.keys(Ie(this,Di)).some(l=>{const c=l;return Ie(this,Di)[c]!==e[c]&&o.has(c)})};wn(this,pr,lz).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&wn(this,pr,sE).call(this)}},as=new WeakMap,Un=new WeakMap,Nb=new WeakMap,Di=new WeakMap,cf=new WeakMap,Wm=new WeakMap,jc=new WeakMap,Ju=new WeakMap,Sb=new WeakMap,Km=new WeakMap,Ym=new WeakMap,uf=new WeakMap,df=new WeakMap,Zu=new WeakMap,Qm=new WeakMap,pr=new WeakSet,dv=function(e){wn(this,pr,cE).call(this);let n=Ie(this,Un).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Mi)),n},rE=function(){wn(this,pr,oE).call(this);const e=od(this.options.staleTime,Ie(this,Un));if(yf||Ie(this,Di).isStale||!JA(e))return;const a=tz(Ie(this,Di).dataUpdatedAt,e)+1;Pt(this,uf,Qh.setTimeout(()=>{Ie(this,Di).isStale||this.updateResult()},a))},aE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ie(this,Un)):this.options.refetchInterval)??!1},iE=function(e){wn(this,pr,lE).call(this),Pt(this,Zu,e),!(yf||eo(this.options.enabled,Ie(this,Un))===!1||!JA(Ie(this,Zu))||Ie(this,Zu)===0)&&Pt(this,df,Qh.setInterval(()=>{(this.options.refetchIntervalInBackground||MD.isFocused())&&wn(this,pr,dv).call(this)},Ie(this,Zu)))},sE=function(){wn(this,pr,rE).call(this),wn(this,pr,iE).call(this,wn(this,pr,aE).call(this))},oE=function(){Ie(this,uf)&&(Qh.clearTimeout(Ie(this,uf)),Pt(this,uf,void 0))},lE=function(){Ie(this,df)&&(Qh.clearInterval(Ie(this,df)),Pt(this,df,void 0))},cE=function(){const e=Ie(this,as).getQueryCache().build(Ie(this,as),this.options);if(e===Ie(this,Un))return;const n=Ie(this,Un);Pt(this,Un,e),Pt(this,Nb,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},lz=function(e){Ta.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Ie(this,Di))}),Ie(this,as).getQueryCache().notify({query:Ie(this,Un),type:"observerResultsUpdated"})})},KB);function TW(t,e){return eo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function aI(t,e){return TW(t,e)||t.state.data!==void 0&&uE(t,e,e.refetchOnMount)}function uE(t,e,n){if(eo(e.enabled,t)!==!1&&od(e.staleTime,t)!=="static"){const a=typeof n=="function"?n(t):n;return a==="always"||a!==!1&&ID(t,e)}return!1}function iI(t,e,n,a){return(t!==e||eo(a.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&ID(t,n)}function ID(t,e){return eo(e.enabled,t)!==!1&&t.isStaleByTime(od(e.staleTime,t))}function kW(t,e){return!uw(t.getCurrentResult(),e)}function sI(t){return{onFetch:(e,n)=>{var f,p,g,x,b;const a=e.options,i=(g=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,s=((x=e.state.data)==null?void 0:x.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let j=!1;const S=C=>{vW(C,()=>e.signal,()=>j=!0)},_=rz(e.options,e.fetchOptions),T=async(C,E,k)=>{if(j)return Promise.reject();if(E==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:E,direction:k?"backward":"forward",meta:e.options.meta};return S(F),F})(),R=await _(I),{maxPages:z}=e.options,q=k?xW:yW;return{pages:q(C.pages,R,z),pageParams:q(C.pageParams,E,z)}};if(i&&s.length){const C=i==="backward",E=C?AW:oI,k={pages:s,pageParams:o},P=E(a,k);l=await T(k,P,C)}else{const C=t??s.length;do{const E=c===0?o[0]??a.initialPageParam:oI(a,l);if(c>0&&E==null)break;l=await T(l,E),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var j,S;return(S=(j=e.options).persister)==null?void 0:S.call(j,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function oI(t,{pages:e,pageParams:n}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,n[a],n):void 0}function AW(t,{pages:e,pageParams:n}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,n[0],n):void 0}var _b,Cl,Oi,hf,Tl,Hu,YB,EW=(YB=class extends sz{constructor(e){super();Ut(this,Tl);Ut(this,_b);Ut(this,Cl);Ut(this,Oi);Ut(this,hf);Pt(this,_b,e.client),this.mutationId=e.mutationId,Pt(this,Oi,e.mutationCache),Pt(this,Cl,[]),this.state=e.state||cz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Ie(this,Cl).includes(e)||(Ie(this,Cl).push(e),this.clearGcTimeout(),Ie(this,Oi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Pt(this,Cl,Ie(this,Cl).filter(n=>n!==e)),this.scheduleGc(),Ie(this,Oi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Ie(this,Cl).length||(this.state.status==="pending"?this.scheduleGc():Ie(this,Oi).remove(this))}continue(){var e;return((e=Ie(this,hf))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,d,f,p,g,x,b,j,S,_,T,C,E,k,P,I,R,z;const n=()=>{wn(this,Tl,Hu).call(this,{type:"continue"})},a={client:Ie(this,_b),meta:this.options.meta,mutationKey:this.options.mutationKey};Pt(this,hf,iz({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:(q,F)=>{wn(this,Tl,Hu).call(this,{type:"failed",failureCount:q,error:F})},onPause:()=>{wn(this,Tl,Hu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ie(this,Oi).canRun(this)}));const i=this.state.status==="pending",s=!Ie(this,hf).canStart();try{if(i)n();else{wn(this,Tl,Hu).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(o=Ie(this,Oi).config).onMutate)==null?void 0:l.call(o,e,this,a));const F=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,a));F!==this.state.context&&wn(this,Tl,Hu).call(this,{type:"pending",context:F,variables:e,isPaused:s})}const q=await Ie(this,hf).start();return await((p=(f=Ie(this,Oi).config).onSuccess)==null?void 0:p.call(f,q,e,this.state.context,this,a)),await((x=(g=this.options).onSuccess)==null?void 0:x.call(g,q,e,this.state.context,a)),await((j=(b=Ie(this,Oi).config).onSettled)==null?void 0:j.call(b,q,null,this.state.variables,this.state.context,this,a)),await((_=(S=this.options).onSettled)==null?void 0:_.call(S,q,null,e,this.state.context,a)),wn(this,Tl,Hu).call(this,{type:"success",data:q}),q}catch(q){try{await((C=(T=Ie(this,Oi).config).onError)==null?void 0:C.call(T,q,e,this.state.context,this,a))}catch(F){Promise.reject(F)}try{await((k=(E=this.options).onError)==null?void 0:k.call(E,q,e,this.state.context,a))}catch(F){Promise.reject(F)}try{await((I=(P=Ie(this,Oi).config).onSettled)==null?void 0:I.call(P,void 0,q,this.state.variables,this.state.context,this,a))}catch(F){Promise.reject(F)}try{await((z=(R=this.options).onSettled)==null?void 0:z.call(R,void 0,q,e,this.state.context,a))}catch(F){Promise.reject(F)}throw wn(this,Tl,Hu).call(this,{type:"error",error:q}),q}finally{Ie(this,Oi).runNext(this)}}},_b=new WeakMap,Cl=new WeakMap,Oi=new WeakMap,hf=new WeakMap,Tl=new WeakSet,Hu=function(e){const n=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ta.batch(()=>{Ie(this,Cl).forEach(a=>{a.onMutationUpdate(e)}),Ie(this,Oi).notify({mutation:this,type:"updated",action:e})})},YB);function cz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wc,Io,Cb,QB,PW=(QB=class extends Ig{constructor(e={}){super();Ut(this,wc);Ut(this,Io);Ut(this,Cb);this.config=e,Pt(this,wc,new Set),Pt(this,Io,new Map),Pt(this,Cb,0)}build(e,n,a){const i=new EW({client:e,mutationCache:this,mutationId:++hj(this,Cb)._,options:e.defaultMutationOptions(n),state:a});return this.add(i),i}add(e){Ie(this,wc).add(e);const n=fj(e);if(typeof n=="string"){const a=Ie(this,Io).get(n);a?a.push(e):Ie(this,Io).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Ie(this,wc).delete(e)){const n=fj(e);if(typeof n=="string"){const a=Ie(this,Io).get(n);if(a)if(a.length>1){const i=a.indexOf(e);i!==-1&&a.splice(i,1)}else a[0]===e&&Ie(this,Io).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=fj(e);if(typeof n=="string"){const a=Ie(this,Io).get(n),i=a==null?void 0:a.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var a;const n=fj(e);if(typeof n=="string"){const i=(a=Ie(this,Io).get(n))==null?void 0:a.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ta.batch(()=>{Ie(this,wc).forEach(e=>{this.notify({type:"removed",mutation:e})}),Ie(this,wc).clear(),Ie(this,Io).clear()})}getAll(){return Array.from(Ie(this,wc))}find(e){const n={exact:!0,...e};return this.getAll().find(a=>ZM(n,a))}findAll(e={}){return this.getAll().filter(n=>ZM(e,n))}notify(e){Ta.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ta.batch(()=>Promise.all(e.map(n=>n.continue().catch(Mi))))}},wc=new WeakMap,Io=new WeakMap,Cb=new WeakMap,QB);function fj(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Nc,ed,is,Sc,Mc,Qj,dE,XB,DW=(XB=class extends Ig{constructor(n,a){super();Ut(this,Mc);Ut(this,Nc);Ut(this,ed);Ut(this,is);Ut(this,Sc);Pt(this,Nc,n),this.setOptions(a),this.bindMethods(),wn(this,Mc,Qj).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const a=this.options;this.options=Ie(this,Nc).defaultMutationOptions(n),uw(this.options,a)||Ie(this,Nc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ie(this,is),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&xf(a.mutationKey)!==xf(this.options.mutationKey)?this.reset():((i=Ie(this,is))==null?void 0:i.state.status)==="pending"&&Ie(this,is).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Ie(this,is))==null||n.removeObserver(this)}onMutationUpdate(n){wn(this,Mc,Qj).call(this),wn(this,Mc,dE).call(this,n)}getCurrentResult(){return Ie(this,ed)}reset(){var n;(n=Ie(this,is))==null||n.removeObserver(this),Pt(this,is,void 0),wn(this,Mc,Qj).call(this),wn(this,Mc,dE).call(this)}mutate(n,a){var i;return Pt(this,Sc,a),(i=Ie(this,is))==null||i.removeObserver(this),Pt(this,is,Ie(this,Nc).getMutationCache().build(Ie(this,Nc),this.options)),Ie(this,is).addObserver(this),Ie(this,is).execute(n)}},Nc=new WeakMap,ed=new WeakMap,is=new WeakMap,Sc=new WeakMap,Mc=new WeakSet,Qj=function(){var a;const n=((a=Ie(this,is))==null?void 0:a.state)??cz();Pt(this,ed,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},dE=function(n){Ta.batch(()=>{var a,i,s,o,l,c,d,f;if(Ie(this,Sc)&&this.hasListeners()){const p=Ie(this,ed).variables,g=Ie(this,ed).context,x={client:Ie(this,Nc),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(i=(a=Ie(this,Sc)).onSuccess)==null||i.call(a,n.data,p,g,x)}catch(b){Promise.reject(b)}try{(o=(s=Ie(this,Sc)).onSettled)==null||o.call(s,n.data,null,p,g,x)}catch(b){Promise.reject(b)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=Ie(this,Sc)).onError)==null||c.call(l,n.error,p,g,x)}catch(b){Promise.reject(b)}try{(f=(d=Ie(this,Sc)).onSettled)==null||f.call(d,void 0,n.error,p,g,x)}catch(b){Promise.reject(b)}}}this.listeners.forEach(p=>{p(Ie(this,ed))})})},XB),kl,JB,OW=(JB=class extends Ig{constructor(e={}){super();Ut(this,kl);this.config=e,Pt(this,kl,new Map)}build(e,n,a){const i=n.queryKey,s=n.queryHash??PD(i,n);let o=this.get(s);return o||(o=new _W({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:a,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Ie(this,kl).has(e.queryHash)||(Ie(this,kl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Ie(this,kl).get(e.queryHash);n&&(e.destroy(),n===e&&Ie(this,kl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ta.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Ie(this,kl).get(e)}getAll(){return[...Ie(this,kl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(a=>JM(n,a))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(a=>JM(e,a)):n}notify(e){Ta.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ta.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ta.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},kl=new WeakMap,JB),ta,td,nd,Xm,Jm,rd,Zm,eg,ZB,MW=(ZB=class{constructor(t={}){Ut(this,ta);Ut(this,td);Ut(this,nd);Ut(this,Xm);Ut(this,Jm);Ut(this,rd);Ut(this,Zm);Ut(this,eg);Pt(this,ta,t.queryCache||new OW),Pt(this,td,t.mutationCache||new PW),Pt(this,nd,t.defaultOptions||{}),Pt(this,Xm,new Map),Pt(this,Jm,new Map),Pt(this,rd,0)}mount(){hj(this,rd)._++,Ie(this,rd)===1&&(Pt(this,Zm,MD.subscribe(async t=>{t&&(await this.resumePausedMutations(),Ie(this,ta).onFocus())})),Pt(this,eg,dw.subscribe(async t=>{t&&(await this.resumePausedMutations(),Ie(this,ta).onOnline())})))}unmount(){var t,e;hj(this,rd)._--,Ie(this,rd)===0&&((t=Ie(this,Zm))==null||t.call(this),Pt(this,Zm,void 0),(e=Ie(this,eg))==null||e.call(this),Pt(this,eg,void 0))}isFetching(t){return Ie(this,ta).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Ie(this,td).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Ie(this,ta).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Ie(this,ta).build(this,e),a=n.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(od(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return Ie(this,ta).findAll(t).map(({queryKey:e,state:n})=>{const a=n.data;return[e,a]})}setQueryData(t,e,n){const a=this.defaultQueryOptions({queryKey:t}),i=Ie(this,ta).get(a.queryHash),s=i==null?void 0:i.state.data,o=pW(e,s);if(o!==void 0)return Ie(this,ta).build(this,a).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Ta.batch(()=>Ie(this,ta).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Ie(this,ta).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Ie(this,ta);Ta.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Ie(this,ta);return Ta.batch(()=>(n.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},a=Ta.batch(()=>Ie(this,ta).findAll(t).map(i=>i.cancel(n)));return Promise.all(a).then(Mi).catch(Mi)}invalidateQueries(t,e={}){return Ta.batch(()=>(Ie(this,ta).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},a=Ta.batch(()=>Ie(this,ta).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Mi)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(a).then(Mi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Ie(this,ta).build(this,e);return n.isStaleByTime(od(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Mi).catch(Mi)}fetchInfiniteQuery(t){return t.behavior=sI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Mi).catch(Mi)}ensureInfiniteQueryData(t){return t.behavior=sI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return dw.isOnline()?Ie(this,td).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ie(this,ta)}getMutationCache(){return Ie(this,td)}getDefaultOptions(){return Ie(this,nd)}setDefaultOptions(t){Pt(this,nd,t)}setQueryDefaults(t,e){Ie(this,Xm).set(xf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Ie(this,Xm).values()],n={};return e.forEach(a=>{Av(t,a.queryKey)&&Object.assign(n,a.defaultOptions)}),n}setMutationDefaults(t,e){Ie(this,Jm).set(xf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Ie(this,Jm).values()],n={};return e.forEach(a=>{Av(t,a.mutationKey)&&Object.assign(n,a.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Ie(this,nd).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=PD(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===DD&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Ie(this,nd).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Ie(this,ta).clear(),Ie(this,td).clear()}},ta=new WeakMap,td=new WeakMap,nd=new WeakMap,Xm=new WeakMap,Jm=new WeakMap,rd=new WeakMap,Zm=new WeakMap,eg=new WeakMap,ZB),uz=v.createContext(void 0),ds=t=>{const e=v.useContext(uz);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},IW=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(uz.Provider,{value:t,children:e})),dz=v.createContext(!1),RW=()=>v.useContext(dz);dz.Provider;function LW(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var FW=v.createContext(LW()),$W=()=>v.useContext(FW),BW=(t,e,n)=>{const a=n!=null&&n.state.error&&typeof t.throwOnError=="function"?OD(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||a)&&(e.isReset()||(t.retryOnMount=!1))},zW=t=>{v.useEffect(()=>{t.clearReset()},[t])},qW=({result:t,errorResetBoundary:e,throwOnError:n,query:a,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&a&&(i&&t.data===void 0||OD(n,[t.error,a])),UW=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...i)=>n(a(...i)):n(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},VW=(t,e)=>t.isLoading&&t.isFetching&&!e,HW=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,lI=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function GW(t,e,n){var g,x,b,j;const a=RW(),i=$W(),s=ds(),o=s.defaultQueryOptions(t);(x=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",UW(o),BW(o,i,l),zW(i);const c=!s.getQueryCache().get(o.queryHash),[d]=v.useState(()=>new e(s,o)),f=d.getOptimisticResult(o),p=!a&&t.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(S=>{const _=p?d.subscribe(Ta.batchCalls(S)):Mi;return d.updateResult(),_},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),v.useEffect(()=>{d.setOptions(o)},[o,d]),HW(o,f))throw lI(o,d,i);if(qW({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((j=(b=s.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||j.call(b,o,f),o.experimental_prefetchInRender&&!yf&&VW(f,a)){const S=c?lI(o,d,i):l==null?void 0:l.promise;S==null||S.catch(Mi).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?f:d.trackResult(f)}function LN(t,e){return GW(t,CW)}function WW(t,e){const n=ds(),[a]=v.useState(()=>new DW(n,t));v.useEffect(()=>{a.setOptions(t)},[a,t]);const i=v.useSyncExternalStore(v.useCallback(o=>a.subscribe(Ta.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),s=v.useCallback((o,l)=>{a.mutate(o,l).catch(Mi)},[a]);if(i.error&&OD(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const KW=new MW({defaultOptions:{queries:{staleTime:0,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!1}}}),Gt={clinicSettings:["clinicSettings"],clinicSubscription:["clinicSubscription"],patients:{all:["patients"],list:t=>["patients","list",t],detail:t=>["patients","detail",t],context:t=>["patients","context",t]},queue:{all:["queue"],today:["queue","today"],entry:t=>["queue","entry",t],latest:t=>["queue","patient",t,"latest"]},staff:{all:["staff"],list:["staff","list"],detail:t=>["staff","detail",t]},pharmacyOrders:{all:["pharmacyOrders"],detail:t=>["pharmacyOrders","detail",t],byPatient:t=>["pharmacyOrders","patient",t]},labOrders:{all:["labOrders"],detail:t=>["labOrders","detail",t],byPatient:t=>["labOrders","patient",t]},drugs:{all:["drugs"],list:["drugs","list"],detail:t=>["drugs","detail",t]},labTests:{all:["labTests"],list:["labTests","list"]},patientDebts:{balance:t=>["patientDebts","balance",t]},dental:{records:t=>["dental","records",t]}},YW="modulepreload",QW=function(t){return"/"+t},cI={},FN=function(e,n,a){let i=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(n.map(d=>{if(d=QW(d),d in cI)return;cI[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":YW,f||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((x,b)=>{g.addEventListener("load",x),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},Em=({message:t="Newtons Ai HMS",fullScreen:e=!1})=>r.jsx("div",{className:`loading-container ${e?"fullscreen":""}`,children:r.jsxs("div",{className:"loading-content",children:[r.jsxs("div",{className:"spinner-ring",children:[r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{})]}),r.jsx("div",{className:"loading-title",children:t}),e&&r.jsx("div",{className:"loading-subtitle",children:"Optimizing your experience..."})]})});function XW(t={}){const{nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i}=t,[s,o]=v.useState(!1),l=v.useRef(a);l.current=a;const c=v.useRef(i);return c.current=i,v.useEffect(()=>{const d=document.createElement("script");return d.src="https://accounts.google.com/gsi/client",n&&(d.src+=`?hl=${n}`),d.async=!0,d.defer=!0,d.nonce=e,d.onload=()=>{var f;o(!0),(f=l.current)===null||f===void 0||f.call(l)},d.onerror=()=>{var f;o(!1),(f=c.current)===null||f===void 0||f.call(c)},document.body.appendChild(d),()=>{document.body.removeChild(d)}},[e]),s}const hz=v.createContext(null);function JW({clientId:t,nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i,children:s}){const o=XW({nonce:e,onScriptLoadSuccess:a,onScriptLoadError:i,locale:n}),l=v.useMemo(()=>({locale:n,clientId:t,scriptLoadedSuccessfully:o}),[t,o]);return Ce.createElement(hz.Provider,{value:l},s)}function ZW(){const t=v.useContext(hz);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function eK(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const tK={large:40,medium:32,small:20};function nK({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:a,type:i="standard",theme:s="outline",size:o="large",text:l,shape:c,logo_alignment:d,width:f,click_listener:p,state:g,containerProps:x,...b}){const j=v.useRef(null),{clientId:S,locale:_,scriptLoadedSuccessfully:T}=ZW(),C=v.useRef(t);C.current=t;const E=v.useRef(e);E.current=e;const k=v.useRef(a);return k.current=a,v.useEffect(()=>{var P,I,R,z,q,F,V,H,K;if(T)return(R=(I=(P=window==null?void 0:window.google)===null||P===void 0?void 0:P.accounts)===null||I===void 0?void 0:I.id)===null||R===void 0||R.initialize({client_id:S,callback:W=>{var B;if(!(W!=null&&W.credential))return(B=E.current)===null||B===void 0?void 0:B.call(E);const{credential:G,select_by:ee}=W;C.current({credential:G,clientId:eK(W),select_by:ee})},...b}),(F=(q=(z=window==null?void 0:window.google)===null||z===void 0?void 0:z.accounts)===null||q===void 0?void 0:q.id)===null||F===void 0||F.renderButton(j.current,{type:i,theme:s,size:o,text:l,shape:c,logo_alignment:d,width:f,locale:_,click_listener:p,state:g}),n&&((K=(H=(V=window==null?void 0:window.google)===null||V===void 0?void 0:V.accounts)===null||H===void 0?void 0:H.id)===null||K===void 0||K.prompt(k.current)),()=>{var W,B,G;n&&((G=(B=(W=window==null?void 0:window.google)===null||W===void 0?void 0:W.accounts)===null||B===void 0?void 0:B.id)===null||G===void 0||G.cancel())}},[S,T,n,i,s,o,l,c,d,f,_]),Ce.createElement("div",{...x,ref:j,style:{height:tK[o],...x==null?void 0:x.style}})}var Vx={},uI;function rK(){if(uI)return Vx;uI=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.parse=o,Vx.serialize=d;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,x){const b=new s,j=g.length;if(j<2)return b;const S=(x==null?void 0:x.decode)||f;let _=0;do{const T=g.indexOf("=",_);if(T===-1)break;const C=g.indexOf(";",_),E=C===-1?j:C;if(T>E){_=g.lastIndexOf(";",T-1)+1;continue}const k=l(g,_,T),P=c(g,T,k),I=g.slice(k,P);if(b[I]===void 0){let R=l(g,T+1,E),z=c(g,E,R);const q=S(g.slice(R,z));b[I]=q}_=E+1}while(_<j);return b}function l(g,x,b){do{const j=g.charCodeAt(x);if(j!==32&&j!==9)return x}while(++x<b);return b}function c(g,x,b){for(;x>b;){const j=g.charCodeAt(--x);if(j!==32&&j!==9)return x+1}return b}function d(g,x,b){const j=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const S=j(x);if(!e.test(S))throw new TypeError(`argument val is invalid: ${x}`);let _=g+"="+S;if(!b)return _;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);_+="; Max-Age="+b.maxAge}if(b.domain){if(!n.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);_+="; Domain="+b.domain}if(b.path){if(!a.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);_+="; Path="+b.path}if(b.expires){if(!p(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);_+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(_+="; HttpOnly"),b.secure&&(_+="; Secure"),b.partitioned&&(_+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return _}function f(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return Vx}rK();var dI="popstate";function aK(t={}){function e(a,i){let{pathname:s,search:o,hash:l}=a.location;return hE("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){return typeof i=="string"?i:Ev(i)}return sK(e,n,null,t)}function Kr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function so(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iK(){return Math.random().toString(36).substring(2,10)}function hI(t,e){return{usr:t.state,key:t.key,idx:e}}function hE(t,e,n=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Rg(e):e,state:n,key:e&&e.key||a||iK()}}function Ev({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Rg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function sK(t,e,n,a={}){let{window:i=document.defaultView,v5Compat:s=!1}=a,o=i.history,l="POP",c=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let S=f(),_=S==null?null:S-d;d=S,c&&c({action:l,location:j.location,delta:_})}function g(S,_){l="PUSH";let T=hE(j.location,S,_);d=f()+1;let C=hI(T,d),E=j.createHref(T);try{o.pushState(C,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(E)}s&&c&&c({action:l,location:j.location,delta:1})}function x(S,_){l="REPLACE";let T=hE(j.location,S,_);d=f();let C=hI(T,d),E=j.createHref(T);o.replaceState(C,"",E),s&&c&&c({action:l,location:j.location,delta:0})}function b(S){return oK(S)}let j={get action(){return l},get location(){return t(i,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(dI,p),c=S,()=>{i.removeEventListener(dI,p),c=null}},createHref(S){return e(i,S)},createURL:b,encodeLocation(S){let _=b(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:x,go(S){return o.go(S)}};return j}function oK(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Kr(n,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Ev(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function fz(t,e,n="/"){return lK(t,e,n,!1)}function lK(t,e,n,a){let i=typeof e=="string"?Rg(e):e,s=Ic(i.pathname||"/",n);if(s==null)return null;let o=pz(t);cK(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=bK(s);l=xK(o[c],d,a)}return l}function pz(t,e=[],n=[],a=""){let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Kr(c.relativePath.startsWith(a),`Absolute route path "${c.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(a.length));let d=Ac([a,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(Kr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),pz(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:gK(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of mz(s.path))i(s,o,c)}),e}function mz(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(a.length===0)return i?[s,""]:[s];let o=mz(a.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function cK(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yK(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var uK=/^:[\w-]+$/,dK=3,hK=2,fK=1,pK=10,mK=-2,fI=t=>t==="*";function gK(t,e){let n=t.split("/"),a=n.length;return n.some(fI)&&(a+=mK),e&&(a+=hK),n.filter(i=>!fI(i)).reduce((i,s)=>i+(uK.test(s)?dK:s===""?fK:pK),a)}function yK(t,e){return t.length===e.length&&t.slice(0,-1).every((a,i)=>a===e[i])?t[t.length-1]-e[e.length-1]:0}function xK(t,e,n=!1){let{routesMeta:a}=t,i={},s="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=hw({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!p&&d&&n&&!a[a.length-1].route.index&&(p=hw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Ac([s,p.pathname]),pathnameBase:SK(Ac([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Ac([s,p.pathnameBase]))}return o}function hw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=vK(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:a.reduce((d,{paramName:f,isOptional:p},g)=>{if(f==="*"){let b=l[g]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function vK(t,e=!1,n=!0){so(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function bK(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return so(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ic(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function jK(t,e="/"){let{pathname:n,search:a="",hash:i=""}=typeof t=="string"?Rg(t):t;return{pathname:n?n.startsWith("/")?n:wK(n,e):e,search:_K(a),hash:CK(i)}}function wK(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function nC(t,e,n,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NK(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function RD(t){let e=NK(t);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function LD(t,e,n,a=!1){let i;typeof t=="string"?i=Rg(t):(i={...t},Kr(!i.pathname||!i.pathname.includes("?"),nC("?","pathname","search",i)),Kr(!i.pathname||!i.pathname.includes("#"),nC("#","pathname","hash",i)),Kr(!i.search||!i.search.includes("#"),nC("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!a&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=jK(i,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var Ac=t=>t.join("/").replace(/\/\/+/g,"/"),SK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_K=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function TK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var gz=["POST","PUT","PATCH","DELETE"];new Set(gz);var kK=["GET",...gz];new Set(kK);var Lg=v.createContext(null);Lg.displayName="DataRouter";var $N=v.createContext(null);$N.displayName="DataRouterState";var yz=v.createContext({isTransitioning:!1});yz.displayName="ViewTransition";var AK=v.createContext(new Map);AK.displayName="Fetchers";var EK=v.createContext(null);EK.displayName="Await";var Ho=v.createContext(null);Ho.displayName="Navigation";var Tb=v.createContext(null);Tb.displayName="Location";var Go=v.createContext({outlet:null,matches:[],isDataRoute:!1});Go.displayName="Route";var FD=v.createContext(null);FD.displayName="RouteError";function PK(t,{relative:e}={}){Kr(Fg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=v.useContext(Ho),{hash:i,pathname:s,search:o}=kb(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Ac([n,s])),a.createHref({pathname:l,search:o,hash:i})}function Fg(){return v.useContext(Tb)!=null}function zr(){return Kr(Fg(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Tb).location}var xz="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vz(t){v.useContext(Ho).static||v.useLayoutEffect(t)}function Ft(){let{isDataRoute:t}=v.useContext(Go);return t?VK():DK()}function DK(){Kr(Fg(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Lg),{basename:e,navigator:n}=v.useContext(Ho),{matches:a}=v.useContext(Go),{pathname:i}=zr(),s=JSON.stringify(RD(a)),o=v.useRef(!1);return vz(()=>{o.current=!0}),v.useCallback((c,d={})=>{if(so(o.current,xz),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=LD(c,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ac([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,i,t])}v.createContext(null);function $a(){let{matches:t}=v.useContext(Go),e=t[t.length-1];return e?e.params:{}}function kb(t,{relative:e}={}){let{matches:n}=v.useContext(Go),{pathname:a}=zr(),i=JSON.stringify(RD(n));return v.useMemo(()=>LD(t,JSON.parse(i),a,e==="path"),[t,i,a,e])}function OK(t,e){return bz(t,e)}function bz(t,e,n,a){var T;Kr(Fg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=v.useContext(Ho),{matches:o}=v.useContext(Go),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";jz(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=zr(),x;if(e){let C=typeof e=="string"?Rg(e):e;Kr(f==="/"||((T=C.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=g;let b=x.pathname||"/",j=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=!s&&n&&n.matches&&n.matches.length>0?n.matches:fz(t,{pathname:j});so(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),so(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=FK(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Ac([f,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ac([f,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,a);return e&&_?v.createElement(Tb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function MK(){let t=UK(),e=TK(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}var IK=v.createElement(MK,null),RK=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Go.Provider,{value:this.props.routeContext},v.createElement(FD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LK({routeContext:t,match:e,children:n}){let a=v.useContext(Lg);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Go.Provider,{value:t},n)}function FK(t,e=[],n=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);Kr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,d,f)=>{let p,g=!1,x=null,b=null;n&&(p=s&&d.route.id?s[d.route.id]:void 0,x=d.route.errorElement||IK,o&&(l<0&&f===0?(jz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):l===f&&(g=!0,b=d.route.hydrateFallbackElement||null)));let j=e.concat(i.slice(0,f+1)),S=()=>{let _;return p?_=x:g?_=b:d.route.Component?_=v.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=c,v.createElement(LK,{match:d,routeContext:{outlet:c,matches:j,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?v.createElement(RK,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:S(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):S()},null)}function $D(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $K(t){let e=v.useContext(Lg);return Kr(e,$D(t)),e}function BK(t){let e=v.useContext($N);return Kr(e,$D(t)),e}function zK(t){let e=v.useContext(Go);return Kr(e,$D(t)),e}function BD(t){let e=zK(t),n=e.matches[e.matches.length-1];return Kr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function qK(){return BD("useRouteId")}function UK(){var a;let t=v.useContext(FD),e=BK("useRouteError"),n=BD("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[n]}function VK(){let{router:t}=$K("useNavigate"),e=BD("useNavigate"),n=v.useRef(!1);return vz(()=>{n.current=!0}),v.useCallback(async(i,s={})=>{so(n.current,xz),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var pI={};function jz(t,e,n){!e&&!pI[t]&&(pI[t]=!0,so(!1,n))}v.memo(HK);function HK({routes:t,future:e,state:n}){return bz(t,void 0,n,e)}function Zt({to:t,replace:e,state:n,relative:a}){Kr(Fg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=v.useContext(Ho);so(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(Go),{pathname:o}=zr(),l=Ft(),c=LD(t,RD(s),o,a==="path"),d=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:a})},[l,d,a,e,n]),null}function yt(t){Kr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GK({basename:t="/",children:e=null,location:n,navigationType:a="POP",navigator:i,static:s=!1}){Kr(!Fg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Rg(n));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:g="default"}=n,x=v.useMemo(()=>{let b=Ic(c,o);return b==null?null:{location:{pathname:b,search:d,hash:f,state:p,key:g},navigationType:a}},[o,c,d,f,p,g,a]);return so(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(Ho.Provider,{value:l},v.createElement(Tb.Provider,{children:e,value:x}))}function Tm({children:t,location:e}){return OK(fE(t),e)}function fE(t,e=[]){let n=[];return v.Children.forEach(t,(a,i)=>{if(!v.isValidElement(a))return;let s=[...e,i];if(a.type===v.Fragment){n.push.apply(n,fE(a.props.children,s));return}Kr(a.type===yt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kr(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||s.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=fE(a.props.children,s)),n.push(o)}),n}var Xj="get",Jj="application/x-www-form-urlencoded";function BN(t){return t!=null&&typeof t.tagName=="string"}function WK(t){return BN(t)&&t.tagName.toLowerCase()==="button"}function KK(t){return BN(t)&&t.tagName.toLowerCase()==="form"}function YK(t){return BN(t)&&t.tagName.toLowerCase()==="input"}function QK(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XK(t,e){return t.button===0&&(!e||e==="_self")&&!QK(t)}function pE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let a=t[n];return e.concat(Array.isArray(a)?a.map(i=>[n,i]):[[n,a]])},[]))}function JK(t,e){let n=pE(t);return e&&e.forEach((a,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var pj=null;function ZK(){if(pj===null)try{new FormData(document.createElement("form"),0),pj=!1}catch{pj=!0}return pj}var eY=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rC(t){return t!=null&&!eY.has(t)?(so(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jj}"`),null):t}function tY(t,e){let n,a,i,s,o;if(KK(t)){let l=t.getAttribute("action");a=l?Ic(l,e):null,n=t.getAttribute("method")||Xj,i=rC(t.getAttribute("enctype"))||Jj,s=new FormData(t)}else if(WK(t)||YK(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(a=c?Ic(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Xj,i=rC(t.getAttribute("formenctype"))||rC(l.getAttribute("enctype"))||Jj,s=new FormData(l,t),!ZK()){let{name:d,type:f,value:p}=t;if(f==="image"){let g=d?`${d}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else d&&s.append(d,p)}}else{if(BN(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Xj,a=null,i=Jj,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:a,method:n.toLowerCase(),encType:i,formData:s,body:o}}function zD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function nY(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rY(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function aY(t,e,n){let a=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await nY(s,n);return o.links?o.links():[]}return[]}));return lY(a.flat(1).filter(rY).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function mI(t,e,n,a,i,s){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>{var f;return n[d].pathname!==c.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):s==="data"?e.filter((c,d)=>{var p;let f=a.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function iY(t,e,{includeHydrateFallback:n}={}){return sY(t.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function sY(t){return[...new Set(t)]}function oY(t){let e={},n=Object.keys(t).sort();for(let a of n)e[a]=t[a];return e}function lY(t,e){let n=new Set;return new Set(e),t.reduce((a,i)=>{let s=JSON.stringify(oY(i));return n.has(s)||(n.add(s),a.push({key:s,link:i})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cY=new Set([100,101,204,205]);function uY(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ic(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function wz(){let t=v.useContext(Lg);return zD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dY(){let t=v.useContext($N);return zD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var qD=v.createContext(void 0);qD.displayName="FrameworkContext";function Nz(){let t=v.useContext(qD);return zD(t,"You must render this element inside a <HydratedRouter> element"),t}function hY(t,e){let n=v.useContext(qD),[a,i]=v.useState(!1),[s,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,g=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let j=_=>{_.forEach(T=>{o(T.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[t]),v.useEffect(()=>{if(a){let j=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(j)}}},[a]);let x=()=>{i(!0)},b=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,g,{}]:[s,g,{onFocus:Hx(l,x),onBlur:Hx(c,b),onMouseEnter:Hx(d,x),onMouseLeave:Hx(f,b),onTouchStart:Hx(p,x)}]:[!1,g,{}]}function Hx(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function fY({page:t,...e}){let{router:n}=wz(),a=v.useMemo(()=>fz(n.routes,t,n.basename),[n.routes,t,n.basename]);return a?v.createElement(mY,{page:t,matches:a,...e}):null}function pY(t){let{manifest:e,routeModules:n}=Nz(),[a,i]=v.useState([]);return v.useEffect(()=>{let s=!1;return aY(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),a}function mY({page:t,matches:e,...n}){let a=zr(),{manifest:i,routeModules:s}=Nz(),{basename:o}=wz(),{loaderData:l,matches:c}=dY(),d=v.useMemo(()=>mI(t,e,c,i,a,"data"),[t,e,c,i,a]),f=v.useMemo(()=>mI(t,e,c,i,a,"assets"),[t,e,c,i,a]),p=v.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let b=new Set,j=!1;if(e.forEach(_=>{var C;let T=i.routes[_.route.id];!T||!T.hasLoader||(!d.some(E=>E.route.id===_.route.id)&&_.route.id in l&&((C=s[_.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?j=!0:b.add(_.route.id))}),b.size===0)return[];let S=uY(t,o);return j&&b.size>0&&S.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[o,l,a,i,d,e,t,s]),g=v.useMemo(()=>iY(f,i),[f,i]),x=pY(f);return v.createElement(v.Fragment,null,p.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),g.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:j})=>v.createElement("link",{key:b,...j})))}function gY(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Sz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sz&&(window.__reactRouterVersion="7.6.0")}catch{}function yY({basename:t,children:e,window:n}){let a=v.useRef();a.current==null&&(a.current=aK({window:n,v5Compat:!0}));let i=a.current,[s,o]=v.useState({action:i.action,location:i.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>i.listen(l),[i,l]),v.createElement(GK,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var _z=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cr=v.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:i,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:p,...g},x){let{basename:b}=v.useContext(Ho),j=typeof d=="string"&&_z.test(d),S,_=!1;if(typeof d=="string"&&j&&(S=d,Sz))try{let z=new URL(window.location.href),q=d.startsWith("//")?new URL(z.protocol+d):new URL(d),F=Ic(q.pathname,b);q.origin===z.origin&&F!=null?d=F+q.search+q.hash:_=!0}catch{so(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=PK(d,{relative:i}),[C,E,k]=hY(a,g),P=jY(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:i,viewTransition:p});function I(z){e&&e(z),z.defaultPrevented||P(z)}let R=v.createElement("a",{...g,...k,href:S||T,onClick:_||s?e:I,ref:gY(x,E),target:c,"data-discover":!j&&n==="render"?"true":void 0});return C&&!j?v.createElement(v.Fragment,null,R,v.createElement(fY,{page:T})):R});Cr.displayName="Link";var xY=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:i=!1,style:s,to:o,viewTransition:l,children:c,...d},f){let p=kb(o,{relative:d.relative}),g=zr(),x=v.useContext($N),{navigator:b,basename:j}=v.useContext(Ho),S=x!=null&&CY(p)&&l===!0,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,T=g.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&j&&(C=Ic(C,j)||C);const E=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let k=T===_||!i&&T.startsWith(_)&&T.charAt(E)==="/",P=C!=null&&(C===_||!i&&C.startsWith(_)&&C.charAt(_.length)==="/"),I={isActive:k,isPending:P,isTransitioning:S},R=k?e:void 0,z;typeof a=="function"?z=a(I):z=[a,k?"active":null,P?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let q=typeof s=="function"?s(I):s;return v.createElement(Cr,{...d,"aria-current":R,className:z,ref:f,style:q,to:o,viewTransition:l},typeof c=="function"?c(I):c)});xY.displayName="NavLink";var vY=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:i,state:s,method:o=Xj,action:l,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:p,...g},x)=>{let b=SY(),j=_Y(l,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&_z.test(l),T=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let E=C.nativeEvent.submitter,k=(E==null?void 0:E.getAttribute("formmethod"))||o;b(E||C.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:s,relative:d,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:j,onSubmit:a?c:T,...g,"data-discover":!_&&t==="render"?"true":void 0})});vY.displayName="Form";function bY(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cz(t){let e=v.useContext(Lg);return Kr(e,bY(t)),e}function jY(t,{target:e,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=Ft(),c=zr(),d=kb(t,{relative:s});return v.useCallback(f=>{if(XK(f,e)){f.preventDefault();let p=n!==void 0?n:Ev(c)===Ev(d);l(t,{replace:p,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,d,n,a,e,t,i,s,o])}function Tz(t){so(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(pE(t)),n=v.useRef(!1),a=zr(),i=v.useMemo(()=>JK(a.search,n.current?null:e.current),[a.search]),s=Ft(),o=v.useCallback((l,c)=>{const d=pE(typeof l=="function"?l(i):l);n.current=!0,s("?"+d,c)},[s,i]);return[i,o]}var wY=0,NY=()=>`__${String(++wY)}__`;function SY(){let{router:t}=Cz("useSubmit"),{basename:e}=v.useContext(Ho),n=qK();return v.useCallback(async(a,i={})=>{let{action:s,method:o,encType:l,formData:c,body:d}=tY(a,e);if(i.navigate===!1){let f=i.fetcherKey||NY();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function _Y(t,{relative:e}={}){let{basename:n}=v.useContext(Ho),a=v.useContext(Go);Kr(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),s={...kb(t||".",{relative:e})},o=zr();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ac([n,s.pathname])),Ev(s)}function CY(t,e={}){let n=v.useContext(yz);Kr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Cz("useViewTransitionState"),i=kb(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ic(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=Ic(n.nextLocation.pathname,a)||n.nextLocation.pathname;return hw(i.pathname,o)!=null||hw(i.pathname,s)!=null}[...cY];var UD=ez();class TY extends v.Component{constructor(){super(...arguments);jr(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){console.error("Uncaught error:",n,a)}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const kz=v.createContext(void 0),kY=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState({startDate:null,endDate:null}),[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState(null),p=v.useCallback(()=>n(!0),[]),g=v.useCallback(()=>n(!1),[]),x=v.useCallback(()=>n(E=>!E),[]),b=v.useCallback(E=>{f(()=>E)},[]),j=v.useCallback(E=>{d?d(E):console.warn("Analysis navigator not registered")},[d]),[S,_]=v.useState(null),T=v.useCallback(E=>{_(()=>E)},[]),C=v.useCallback(async()=>S?await S():(console.warn("Analysis refresher not registered"),null),[S]);return r.jsx(kz.Provider,{value:{isOpen:e,openAssistant:p,closeAssistant:g,toggleAssistant:x,analysisDateRange:a,setAnalysisDateRange:i,analysisData:s,setAnalysisData:o,analysisNavigate:j,registerAnalysisNavigator:b,refreshAnalysis:C,registerAnalysisRefresher:T,pageContext:l,setPageContext:c},children:t})},zN=()=>{const t=v.useContext(kz);if(t===void 0)throw new Error("useClinicAssistantContext must be used within a ClinicAssistantProvider");return t},Az=v.createContext(void 0),AY=({children:t})=>{const[e,n]=v.useState([]),[a,i]=v.useState(null),[s,o]=v.useState(""),[l,c]=v.useState(0),[d,f]=v.useState([]),p=v.useCallback(j=>{n(S=>[...S,j])},[]),g=v.useCallback((j,S)=>{n(_=>_.map(T=>T.id===j?{...T,...S}:T))},[]),x=v.useCallback(j=>{n(S=>S.filter(_=>_.id!==j))},[]),b=v.useCallback(()=>{n([]),i(null),o(""),c(0),f([])},[]);return r.jsx(Az.Provider,{value:{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f,addPurchaseRow:p,updatePurchaseRow:g,removePurchaseRow:x,resetPurchase:b},children:t})},Ez=()=>{const t=v.useContext(Az);if(!t)throw new Error("usePurchaseContext must be used within a PurchaseProvider");return t},Pz=v.createContext(void 0),EY=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(""),s=v.useCallback(()=>n(!0),[]),o=v.useCallback(()=>n(!1),[]),l=v.useCallback(()=>n(c=>!c),[]);return v.useEffect(()=>{const c=d=>{(d.ctrlKey||d.metaKey)&&d.key==="k"&&(d.preventDefault(),l()),d.key==="Escape"&&e&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,l,o]),r.jsx(Pz.Provider,{value:{isOpen:e,openCommandBar:s,closeCommandBar:o,toggleCommandBar:l,preFilledQuery:a,setPreFilledQuery:i},children:t})},Rc=()=>{const t=v.useContext(Pz);if(t===void 0)throw new Error("useCommandBar must be used within a CommandBarProvider");return t};function Lc(t){return Array.isArray?Array.isArray(t):Mz(t)==="[object Array]"}function PY(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function DY(t){return t==null?"":PY(t)}function Pl(t){return typeof t=="string"}function Dz(t){return typeof t=="number"}function OY(t){return t===!0||t===!1||MY(t)&&Mz(t)=="[object Boolean]"}function Oz(t){return typeof t=="object"}function MY(t){return Oz(t)&&t!==null}function As(t){return t!=null}function aC(t){return!t.trim().length}function Mz(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const IY="Incorrect 'index' type",RY=t=>`Invalid value for key ${t}`,LY=t=>`Pattern length exceeds max of ${t}.`,FY=t=>`Missing ${t} property in key`,$Y=t=>`Property 'weight' in key '${t}' must be a positive integer`,gI=Object.prototype.hasOwnProperty;class BY{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(a=>{let i=Iz(a);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(a=>{a.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Iz(t){let e=null,n=null,a=null,i=1,s=null;if(Pl(t)||Lc(t))a=t,e=yI(t),n=mE(t);else{if(!gI.call(t,"name"))throw new Error(FY("name"));const o=t.name;if(a=o,gI.call(t,"weight")&&(i=t.weight,i<=0))throw new Error($Y(o));e=yI(o),n=mE(o),s=t.getFn}return{path:e,id:n,weight:i,src:a,getFn:s}}function yI(t){return Lc(t)?t:t.split(".")}function mE(t){return Lc(t)?t.join("."):t}function zY(t,e){let n=[],a=!1;const i=(s,o,l)=>{if(As(s))if(!o[l])n.push(s);else{let c=o[l];const d=s[c];if(!As(d))return;if(l===o.length-1&&(Pl(d)||Dz(d)||OY(d)))n.push(DY(d));else if(Lc(d)){a=!0;for(let f=0,p=d.length;f<p;f+=1)i(d[f],o,l+1)}else o.length&&i(d,o,l+1)}};return i(t,Pl(e)?e.split("."):e,0),a?n:n[0]}const qY={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},UY={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},VY={location:0,threshold:.6,distance:100},HY={useExtendedSearch:!1,getFn:zY,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ln={...UY,...qY,...VY,...HY};const GY=/[^ ]+/g;function WY(t=1,e=3){const n=new Map,a=Math.pow(10,e);return{get(i){const s=i.match(GY).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),l=parseFloat(Math.round(o*a)/a);return n.set(s,l),l},clear(){n.clear()}}}class VD{constructor({getFn:e=ln.getFn,fieldNormWeight:n=ln.fieldNormWeight}={}){this.norm=WY(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,a)=>{this._keysMap[n.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Pl(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Pl(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,a=this.size();n<a;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!As(e)||aC(e))return;let a={v:e,i:n,n:this.norm.get(e)};this.records.push(a)}_addObject(e,n){let a={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(As(o)){if(Lc(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:d,value:f}=c.pop();if(As(f))if(Pl(f)&&!aC(f)){let p={v:f,i:d,n:this.norm.get(f)};l.push(p)}else Lc(f)&&f.forEach((p,g)=>{c.push({nestedArrIndex:g,value:p})})}a.$[s]=l}else if(Pl(o)&&!aC(o)){let l={v:o,n:this.norm.get(o)};a.$[s]=l}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function Rz(t,e,{getFn:n=ln.getFn,fieldNormWeight:a=ln.fieldNormWeight}={}){const i=new VD({getFn:n,fieldNormWeight:a});return i.setKeys(t.map(Iz)),i.setSources(e),i.create(),i}function KY(t,{getFn:e=ln.getFn,fieldNormWeight:n=ln.fieldNormWeight}={}){const{keys:a,records:i}=t,s=new VD({getFn:e,fieldNormWeight:n});return s.setKeys(a),s.setIndexRecords(i),s}function mj(t,{errors:e=0,currentLocation:n=0,expectedLocation:a=0,distance:i=ln.distance,ignoreLocation:s=ln.ignoreLocation}={}){const o=e/t.length;if(s)return o;const l=Math.abs(a-n);return i?o+l/i:l?1:o}function YY(t=[],e=ln.minMatchCharLength){let n=[],a=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let l=t[s];l&&a===-1?a=s:!l&&a!==-1&&(i=s-1,i-a+1>=e&&n.push([a,i]),a=-1)}return t[s-1]&&s-a>=e&&n.push([a,s-1]),n}const Kh=32;function QY(t,e,n,{location:a=ln.location,distance:i=ln.distance,threshold:s=ln.threshold,findAllMatches:o=ln.findAllMatches,minMatchCharLength:l=ln.minMatchCharLength,includeMatches:c=ln.includeMatches,ignoreLocation:d=ln.ignoreLocation}={}){if(e.length>Kh)throw new Error(LY(Kh));const f=e.length,p=t.length,g=Math.max(0,Math.min(a,p));let x=s,b=g;const j=l>1||c,S=j?Array(p):[];let _;for(;(_=t.indexOf(e,b))>-1;){let I=mj(e,{currentLocation:_,expectedLocation:g,distance:i,ignoreLocation:d});if(x=Math.min(I,x),b=_+f,j){let R=0;for(;R<f;)S[_+R]=1,R+=1}}b=-1;let T=[],C=1,E=f+p;const k=1<<f-1;for(let I=0;I<f;I+=1){let R=0,z=E;for(;R<z;)mj(e,{errors:I,currentLocation:g+z,expectedLocation:g,distance:i,ignoreLocation:d})<=x?R=z:E=z,z=Math.floor((E-R)/2+R);E=z;let q=Math.max(1,g-z+1),F=o?p:Math.min(g+z,p)+f,V=Array(F+2);V[F+1]=(1<<I)-1;for(let K=F;K>=q;K-=1){let W=K-1,B=n[t.charAt(W)];if(j&&(S[W]=+!!B),V[K]=(V[K+1]<<1|1)&B,I&&(V[K]|=(T[K+1]|T[K])<<1|1|T[K+1]),V[K]&k&&(C=mj(e,{errors:I,currentLocation:W,expectedLocation:g,distance:i,ignoreLocation:d}),C<=x)){if(x=C,b=W,b<=g)break;q=Math.max(1,2*g-b)}}if(mj(e,{errors:I+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>x)break;T=V}const P={isMatch:b>=0,score:Math.max(.001,C)};if(j){const I=YY(S,l);I.length?c&&(P.indices=I):P.isMatch=!1}return P}function XY(t){let e={};for(let n=0,a=t.length;n<a;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<a-n-1}return e}const fw=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Lz{constructor(e,{location:n=ln.location,threshold:a=ln.threshold,distance:i=ln.distance,includeMatches:s=ln.includeMatches,findAllMatches:o=ln.findAllMatches,minMatchCharLength:l=ln.minMatchCharLength,isCaseSensitive:c=ln.isCaseSensitive,ignoreDiacritics:d=ln.ignoreDiacritics,ignoreLocation:f=ln.ignoreLocation}={}){if(this.options={location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f},e=c?e:e.toLowerCase(),e=d?fw(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(x,b)=>{this.chunks.push({pattern:x,alphabet:XY(x),startIndex:b})},g=this.pattern.length;if(g>Kh){let x=0;const b=g%Kh,j=g-b;for(;x<j;)p(this.pattern.substr(x,Kh),x),x+=Kh;if(b){const S=g-Kh;p(this.pattern.substr(S),S)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=a?fw(e):e,this.pattern===e){let j={isMatch:!0,score:0};return i&&(j.indices=[[0,e.length-1]]),j}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,ignoreLocation:f}=this.options;let p=[],g=0,x=!1;this.chunks.forEach(({pattern:j,alphabet:S,startIndex:_})=>{const{isMatch:T,score:C,indices:E}=QY(e,j,S,{location:s+_,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,includeMatches:i,ignoreLocation:f});T&&(x=!0),g+=C,T&&E&&(p=[...p,...E])});let b={isMatch:x,score:x?g/this.chunks.length:1};return x&&i&&(b.indices=p),b}}class fd{constructor(e){this.pattern=e}static isMultiMatch(e){return xI(e,this.multiRegex)}static isSingleMatch(e){return xI(e,this.singleRegex)}search(){}}function xI(t,e){const n=t.match(e);return n?n[1]:null}class JY extends fd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ZY extends fd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const a=e.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class eQ extends fd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class tQ extends fd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class nQ extends fd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class rQ extends fd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Fz extends fd{constructor(e,{location:n=ln.location,threshold:a=ln.threshold,distance:i=ln.distance,includeMatches:s=ln.includeMatches,findAllMatches:o=ln.findAllMatches,minMatchCharLength:l=ln.minMatchCharLength,isCaseSensitive:c=ln.isCaseSensitive,ignoreDiacritics:d=ln.ignoreDiacritics,ignoreLocation:f=ln.ignoreLocation}={}){super(e),this._bitapSearch=new Lz(e,{location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class $z extends fd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,a;const i=[],s=this.pattern.length;for(;(a=e.indexOf(this.pattern,n))>-1;)n=a+s,i.push([a,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const gE=[JY,$z,eQ,tQ,rQ,nQ,ZY,Fz],vI=gE.length,aQ=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,iQ="|";function sQ(t,e={}){return t.split(iQ).map(n=>{let a=n.trim().split(aQ).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=a.length;s<o;s+=1){const l=a[s];let c=!1,d=-1;for(;!c&&++d<vI;){const f=gE[d];let p=f.isMultiMatch(l);p&&(i.push(new f(p,e)),c=!0)}if(!c)for(d=-1;++d<vI;){const f=gE[d];let p=f.isSingleMatch(l);if(p){i.push(new f(p,e));break}}}return i})}const oQ=new Set([Fz.type,$z.type]);class lQ{constructor(e,{isCaseSensitive:n=ln.isCaseSensitive,ignoreDiacritics:a=ln.ignoreDiacritics,includeMatches:i=ln.includeMatches,minMatchCharLength:s=ln.minMatchCharLength,ignoreLocation:o=ln.ignoreLocation,findAllMatches:l=ln.findAllMatches,location:c=ln.location,threshold:d=ln.threshold,distance:f=ln.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:d,distance:f},e=n?e:e.toLowerCase(),e=a?fw(e):e,this.pattern=e,this.query=sQ(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:i,ignoreDiacritics:s}=this.options;e=i?e:e.toLowerCase(),e=s?fw(e):e;let o=0,l=[],c=0;for(let d=0,f=n.length;d<f;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,x=p.length;g<x;g+=1){const b=p[g],{isMatch:j,indices:S,score:_}=b.search(e);if(j){if(o+=1,c+=_,a){const T=b.constructor.type;oQ.has(T)?l=[...l,...S]:l.push(S)}}else{c=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:c/o};return a&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const yE=[];function cQ(...t){yE.push(...t)}function xE(t,e){for(let n=0,a=yE.length;n<a;n+=1){let i=yE[n];if(i.condition(t,e))return new i(t,e)}return new Lz(t,e)}const pw={AND:"$and",OR:"$or"},vE={PATH:"$path",PATTERN:"$val"},bE=t=>!!(t[pw.AND]||t[pw.OR]),uQ=t=>!!t[vE.PATH],dQ=t=>!Lc(t)&&Oz(t)&&!bE(t),bI=t=>({[pw.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Bz(t,e,{auto:n=!0}={}){const a=i=>{let s=Object.keys(i);const o=uQ(i);if(!o&&s.length>1&&!bE(i))return a(bI(i));if(dQ(i)){const c=o?i[vE.PATH]:s[0],d=o?i[vE.PATTERN]:i[c];if(!Pl(d))throw new Error(RY(c));const f={keyId:mE(c),pattern:d};return n&&(f.searcher=xE(d,e)),f}let l={children:[],operator:s[0]};return s.forEach(c=>{const d=i[c];Lc(d)&&d.forEach(f=>{l.children.push(a(f))})}),l};return bE(t)||(t=bI(t)),a(t)}function hQ(t,{ignoreFieldNorm:e=ln.ignoreFieldNorm}){t.forEach(n=>{let a=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;a*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:s))}),n.score=a})}function fQ(t,e){const n=t.matches;e.matches=[],As(n)&&n.forEach(a=>{if(!As(a.indices)||!a.indices.length)return;const{indices:i,value:s}=a;let o={indices:i,value:s};a.key&&(o.key=a.key.src),a.idx>-1&&(o.refIndex=a.idx),e.matches.push(o)})}function pQ(t,e){e.score=t.score}function mQ(t,e,{includeMatches:n=ln.includeMatches,includeScore:a=ln.includeScore}={}){const i=[];return n&&i.push(fQ),a&&i.push(pQ),t.map(s=>{const{idx:o}=s,l={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(s,l)}),l})}class co{constructor(e,n={},a){this.options={...ln,...n},this.options.useExtendedSearch,this._keyStore=new BY(this.options.keys),this.setCollection(e,a)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof VD))throw new Error(IY);this._myIndex=n||Rz(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){As(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let a=0,i=this._docs.length;a<i;a+=1){const s=this._docs[a];e(s,a)&&(this.removeAt(a),a-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:a,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=Pl(e)?Pl(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return hQ(c,{ignoreFieldNorm:l}),s&&c.sort(o),Dz(n)&&n>-1&&(c=c.slice(0,n)),mQ(c,this._docs,{includeMatches:a,includeScore:i})}_searchStringList(e){const n=xE(e,this.options),{records:a}=this._myIndex,i=[];return a.forEach(({v:s,i:o,n:l})=>{if(!As(s))return;const{isMatch:c,score:d,indices:f}=n.searchIn(s);c&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:f}]})}),i}_searchLogical(e){const n=Bz(e,this.options),a=(l,c,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:g});return x&&x.length?[{idx:d,item:c,matches:x}]:[]}const f=[];for(let p=0,g=l.children.length;p<g;p+=1){const x=l.children[p],b=a(x,c,d);if(b.length)f.push(...b);else if(l.operator===pw.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:c})=>{if(As(l)){let d=a(n,l,c);d.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),d.forEach(({matches:f})=>{s[c].matches.push(...f)}))}}),o}_searchObjectList(e){const n=xE(e,this.options),{keys:a,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!As(o))return;let c=[];a.forEach((d,f)=>{c.push(...this._findMatches({key:d,value:o[f],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:e,value:n,searcher:a}){if(!As(n))return[];let i=[];if(Lc(n))n.forEach(({v:s,i:o,n:l})=>{if(!As(s))return;const{isMatch:c,score:d,indices:f}=a.searchIn(s);c&&i.push({score:d,key:e,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:d}=a.searchIn(s);l&&i.push({score:c,key:e,value:s,norm:o,indices:d})}return i}}co.version="7.1.0";co.createIndex=Rz;co.parseIndex=KY;co.config=ln;co.parseQuery=Bz;cQ(lQ);var iC,jI;function gQ(){if(jI)return iC;jI=1;var t="Expected a function",e=NaN,n="[object Symbol]",a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof ro=="object"&&ro&&ro.Object===Object&&ro,d=typeof self=="object"&&self&&self.Object===Object&&self,f=c||d||Function("return this")(),p=Object.prototype,g=p.toString,x=Math.max,b=Math.min,j=function(){return f.Date.now()};function S(k,P,I){var R,z,q,F,V,H,K=0,W=!1,B=!1,G=!0;if(typeof k!="function")throw new TypeError(t);P=E(P)||0,_(I)&&(W=!!I.leading,B="maxWait"in I,q=B?x(E(I.maxWait)||0,P):q,G="trailing"in I?!!I.trailing:G);function ee(Le){var oe=R,Se=z;return R=z=void 0,K=Le,F=k.apply(Se,oe),F}function X(Le){return K=Le,V=setTimeout(xe,P),W?ee(Le):F}function $(Le){var oe=Le-H,Se=Le-K,Ve=P-oe;return B?b(Ve,q-Se):Ve}function ce(Le){var oe=Le-H,Se=Le-K;return H===void 0||oe>=P||oe<0||B&&Se>=q}function xe(){var Le=j();if(ce(Le))return Y(Le);V=setTimeout(xe,$(Le))}function Y(Le){return V=void 0,G&&R?ee(Le):(R=z=void 0,F)}function Re(){V!==void 0&&clearTimeout(V),K=0,R=H=z=V=void 0}function $e(){return V===void 0?F:Y(j())}function ze(){var Le=j(),oe=ce(Le);if(R=arguments,z=this,H=Le,oe){if(V===void 0)return X(H);if(B)return V=setTimeout(xe,P),ee(H)}return V===void 0&&(V=setTimeout(xe,P)),F}return ze.cancel=Re,ze.flush=$e,ze}function _(k){var P=typeof k;return!!k&&(P=="object"||P=="function")}function T(k){return!!k&&typeof k=="object"}function C(k){return typeof k=="symbol"||T(k)&&g.call(k)==n}function E(k){if(typeof k=="number")return k;if(C(k))return e;if(_(k)){var P=typeof k.valueOf=="function"?k.valueOf():k;k=_(P)?P+"":P}if(typeof k!="string")return k===0?k:+k;k=k.replace(a,"");var I=s.test(k);return I||o.test(k)?l(k.slice(2),I?2:8):i.test(k)?e:+k}return iC=S,iC}var yQ=gQ();const $l=Hn(yQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),wI=t=>{const e=vQ(t);return e.charAt(0).toUpperCase()+e.slice(1)},zz=(...t)=>t.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:s,iconNode:o,...l},c)=>v.createElement("svg",{ref:c,...bQ,width:e,height:e,stroke:t,strokeWidth:a?Number(n)*24/Number(e):n,className:zz("lucide",i),...l},[...o.map(([d,f])=>v.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(t,e)=>{const n=v.forwardRef(({className:a,...i},s)=>v.createElement(jQ,{ref:s,iconNode:e,className:zz(`lucide-${xQ(wI(t))}`,`lucide-${t}`,a),...i}));return n.displayName=wI(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],_c=dt("activity",wQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],qz=dt("align-justify",NQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],NI=dt("arrow-down",SQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],sn=dt("arrow-left",_Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],SI=dt("arrow-up",CQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],kQ=dt("beaker",TQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],EQ=dt("bed-double",AQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],DQ=dt("bed",PQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],MQ=dt("bell",OQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],_I=dt("book-open",IQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Pv=dt("bot",RQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],FQ=dt("brain-circuit",LQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],HD=dt("brain",$Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],zQ=dt("briefcase-medical",BQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],UQ=dt("building",qQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],CI=dt("calendar-check-2",VQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],GD=dt("calendar-days",HQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fa=dt("calendar",GQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],jE=dt("camera",WQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],wE=dt("chart-pie",KQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ds=dt("check",YQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Uz=dt("chevron-down",QQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ab=dt("chevron-left",XQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pd=dt("chevron-right",JQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],eX=dt("chevron-up",ZQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Br=dt("circle-alert",tX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Wo=dt("circle-check-big",nX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],hv=dt("circle-check",rX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gj=dt("circle-help",aX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],TI=dt("circle-minus",iX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ps=dt("circle-plus",sX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],lX=dt("circle-user",oX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],tg=dt("clipboard-list",cX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Zj=dt("clipboard",uX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Eb=dt("clock",dX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],fX=dt("command",hX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],kI=dt("copy",pX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],mw=dt("credit-card",mX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],cd=dt("dollar-sign",gX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],xX=dt("download",yX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lm=dt("eye",vX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],jX=dt("file-check",bX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],aa=dt("file-text",wX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Xh=dt("file",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Vz=dt("film",SX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],ls=dt("flask-conical",_X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],TX=dt("funnel",CX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],NE=dt("globe",kX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],vf=dt("grid-3x3",AX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Qa=dt("hash",EX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],DX=dt("heart-pulse",PX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],MX=dt("heart",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],SE=dt("house",IX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],gw=dt("image",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Dl=dt("info",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Hz=dt("key",FX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ng=dt("layout-dashboard",$X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Gz=dt("layout-grid",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],AI=dt("lightbulb",zX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Wz=dt("link",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Pb=dt("list",UX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],oo=dt("loader-circle",VX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],GX=dt("loader",HX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],KX=dt("lock",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],QX=dt("log-out",YX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],EI=dt("mail",XX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Kz=dt("map-pin",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Yz=dt("maximize-2",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],sC=dt("message-circle",eJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],nJ=dt("mic-off",tJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],qN=dt("mic",rJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],iJ=dt("minimize-2",aJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sJ=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],oJ=dt("monitor",sJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Qz=dt("music",lJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],PI=dt("package-open",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uJ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ud=dt("package",uJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],hJ=dt("palette",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],DI=dt("panels-top-left",fJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],WD=dt("paperclip",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],gJ=dt("pause",mJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ao=dt("pen",yJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],vJ=dt("percent",xJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],rg=dt("phone",bJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],$o=dt("pill",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Xz=dt("play",wJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vn=dt("plus",NJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],bf=dt("printer",SJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_E=dt("refresh-cw",_J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],OI=dt("rocket",CJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],kJ=dt("rotate-ccw",TJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Jz=dt("rotate-cw",AJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cs=dt("save",EJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],En=dt("search",PJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],UN=dt("send",DJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],MI=dt("server-crash",OJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dd=dt("settings",MJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Zz=dt("share-2",IJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],LJ=dt("shield-check",RJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ag=dt("shield",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],CE=dt("shopping-cart",$J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],zJ=dt("smile",BJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],yw=dt("sparkles",qJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],qo=dt("split",UJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Bi=dt("square-pen",VJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],GJ=dt("square",HJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],II=dt("star",WJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],jf=dt("stethoscope",KJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Db=dt("table",YJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],XJ=dt("tag",QJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ZJ=dt("target",JJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Wn=dt("trash-2",eZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],nZ=dt("trending-up",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],aZ=dt("triangle-alert",rZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],KD=dt("truck",iZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Dv=dt("upload",sZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],eq=dt("user-check",oZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],VN=dt("user-plus",lZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jn=dt("user",cZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Os=dt("users",uZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],hZ=dt("video",dZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],xw=dt("wallet",fZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Lt=dt("x",pZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],RI=dt("zap",mZ);function gZ(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const yZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,vZ={};function LI(t,e){return(vZ.jsx?xZ:yZ).test(t)}const bZ=/[ \t\n\f\r]/g;function jZ(t){return typeof t=="object"?t.type==="text"?FI(t.value):!1:FI(t)}function FI(t){return t.replace(bZ,"")===""}class Ob{constructor(e,n,a){this.normal=n,this.property=e,a&&(this.space=a)}}Ob.prototype.normal={};Ob.prototype.property={};Ob.prototype.space=void 0;function tq(t,e){const n={},a={};for(const i of t)Object.assign(n,i.property),Object.assign(a,i.normal);return new Ob(n,a,e)}function TE(t){return t.toLowerCase()}class hs{constructor(e,n){this.attribute=n,this.property=e}}hs.prototype.attribute="";hs.prototype.booleanish=!1;hs.prototype.boolean=!1;hs.prototype.commaOrSpaceSeparated=!1;hs.prototype.commaSeparated=!1;hs.prototype.defined=!1;hs.prototype.mustUseProperty=!1;hs.prototype.number=!1;hs.prototype.overloadedBoolean=!1;hs.prototype.property="";hs.prototype.spaceSeparated=!1;hs.prototype.space=void 0;let wZ=0;const gn=Mf(),xa=Mf(),nq=Mf(),_t=Mf(),Mr=Mf(),Fm=Mf(),_s=Mf();function Mf(){return 2**++wZ}const kE=Object.freeze(Object.defineProperty({__proto__:null,boolean:gn,booleanish:xa,commaOrSpaceSeparated:_s,commaSeparated:Fm,number:_t,overloadedBoolean:nq,spaceSeparated:Mr},Symbol.toStringTag,{value:"Module"})),oC=Object.keys(kE);class YD extends hs{constructor(e,n,a,i){let s=-1;if(super(e,n),$I(this,"space",i),typeof a=="number")for(;++s<oC.length;){const o=oC[s];$I(this,oC[s],(a&kE[o])===kE[o])}}}YD.prototype.defined=!0;function $I(t,e,n){n&&(t[e]=n)}function $g(t){const e={},n={};for(const[a,i]of Object.entries(t.properties)){const s=new YD(a,t.transform(t.attributes||{},a),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),e[a]=s,n[TE(a)]=a,n[TE(s.attribute)]=a}return new Ob(e,n,t.space)}const rq=$g({properties:{ariaActiveDescendant:null,ariaAtomic:xa,ariaAutoComplete:null,ariaBusy:xa,ariaChecked:xa,ariaColCount:_t,ariaColIndex:_t,ariaColSpan:_t,ariaControls:Mr,ariaCurrent:null,ariaDescribedBy:Mr,ariaDetails:null,ariaDisabled:xa,ariaDropEffect:Mr,ariaErrorMessage:null,ariaExpanded:xa,ariaFlowTo:Mr,ariaGrabbed:xa,ariaHasPopup:null,ariaHidden:xa,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Mr,ariaLevel:_t,ariaLive:null,ariaModal:xa,ariaMultiLine:xa,ariaMultiSelectable:xa,ariaOrientation:null,ariaOwns:Mr,ariaPlaceholder:null,ariaPosInSet:_t,ariaPressed:xa,ariaReadOnly:xa,ariaRelevant:null,ariaRequired:xa,ariaRoleDescription:Mr,ariaRowCount:_t,ariaRowIndex:_t,ariaRowSpan:_t,ariaSelected:xa,ariaSetSize:_t,ariaSort:null,ariaValueMax:_t,ariaValueMin:_t,ariaValueNow:_t,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function aq(t,e){return e in t?t[e]:e}function iq(t,e){return aq(t,e.toLowerCase())}const NZ=$g({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Fm,acceptCharset:Mr,accessKey:Mr,action:null,allow:null,allowFullScreen:gn,allowPaymentRequest:gn,allowUserMedia:gn,alt:null,as:null,async:gn,autoCapitalize:null,autoComplete:Mr,autoFocus:gn,autoPlay:gn,blocking:Mr,capture:null,charSet:null,checked:gn,cite:null,className:Mr,cols:_t,colSpan:null,content:null,contentEditable:xa,controls:gn,controlsList:Mr,coords:_t|Fm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gn,defer:gn,dir:null,dirName:null,disabled:gn,download:nq,draggable:xa,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gn,formTarget:null,headers:Mr,height:_t,hidden:gn,high:_t,href:null,hrefLang:null,htmlFor:Mr,httpEquiv:Mr,id:null,imageSizes:null,imageSrcSet:null,inert:gn,inputMode:null,integrity:null,is:null,isMap:gn,itemId:null,itemProp:Mr,itemRef:Mr,itemScope:gn,itemType:Mr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gn,low:_t,manifest:null,max:null,maxLength:_t,media:null,method:null,min:null,minLength:_t,multiple:gn,muted:gn,name:null,nonce:null,noModule:gn,noValidate:gn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gn,optimum:_t,pattern:null,ping:Mr,placeholder:null,playsInline:gn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gn,referrerPolicy:null,rel:Mr,required:gn,reversed:gn,rows:_t,rowSpan:_t,sandbox:Mr,scope:null,scoped:gn,seamless:gn,selected:gn,shadowRootClonable:gn,shadowRootDelegatesFocus:gn,shadowRootMode:null,shape:null,size:_t,sizes:null,slot:null,span:_t,spellCheck:xa,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_t,step:null,style:null,tabIndex:_t,target:null,title:null,translate:null,type:null,typeMustMatch:gn,useMap:null,value:xa,width:_t,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Mr,axis:null,background:null,bgColor:null,border:_t,borderColor:null,bottomMargin:_t,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gn,declare:gn,event:null,face:null,frame:null,frameBorder:null,hSpace:_t,leftMargin:_t,link:null,longDesc:null,lowSrc:null,marginHeight:_t,marginWidth:_t,noResize:gn,noHref:gn,noShade:gn,noWrap:gn,object:null,profile:null,prompt:null,rev:null,rightMargin:_t,rules:null,scheme:null,scrolling:xa,standby:null,summary:null,text:null,topMargin:_t,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_t,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gn,disableRemotePlayback:gn,prefix:null,property:null,results:_t,security:null,unselectable:null},space:"html",transform:iq}),SZ=$g({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:_s,accentHeight:_t,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_t,amplitude:_t,arabicForm:null,ascent:_t,attributeName:null,attributeType:null,azimuth:_t,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_t,by:null,calcMode:null,capHeight:_t,className:Mr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_t,diffuseConstant:_t,direction:null,display:null,dur:null,divisor:_t,dominantBaseline:null,download:gn,dx:null,dy:null,edgeMode:null,editable:null,elevation:_t,enableBackground:null,end:null,event:null,exponent:_t,externalResourcesRequired:null,fill:null,fillOpacity:_t,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Fm,g2:Fm,glyphName:Fm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_t,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_t,horizOriginX:_t,horizOriginY:_t,id:null,ideographic:_t,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_t,k:_t,k1:_t,k2:_t,k3:_t,k4:_t,kernelMatrix:_s,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_t,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_t,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_t,overlineThickness:_t,paintOrder:null,panose1:null,path:null,pathLength:_t,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Mr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_t,pointsAtY:_t,pointsAtZ:_t,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:_s,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:_s,rev:_s,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:_s,requiredFeatures:_s,requiredFonts:_s,requiredFormats:_s,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_t,specularExponent:_t,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_t,strikethroughThickness:_t,string:null,stroke:null,strokeDashArray:_s,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_t,strokeOpacity:_t,strokeWidth:null,style:null,surfaceScale:_t,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:_s,tabIndex:_t,tableValues:null,target:null,targetX:_t,targetY:_t,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:_s,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_t,underlineThickness:_t,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_t,values:null,vAlphabetic:_t,vMathematical:_t,vectorEffect:null,vHanging:_t,vIdeographic:_t,version:null,vertAdvY:_t,vertOriginX:_t,vertOriginY:_t,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_t,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:aq}),sq=$g({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),oq=$g({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:iq}),lq=$g({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),_Z={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},CZ=/[A-Z]/g,BI=/-[a-z]/g,TZ=/^data[-\w.:]+$/i;function kZ(t,e){const n=TE(e);let a=e,i=hs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&TZ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(BI,EZ);a="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!BI.test(s)){let o=s.replace(CZ,AZ);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=YD}return new i(a,e)}function AZ(t){return"-"+t.toLowerCase()}function EZ(t){return t.charAt(1).toUpperCase()}const PZ=tq([rq,NZ,sq,oq,lq],"html"),QD=tq([rq,SZ,sq,oq,lq],"svg");function DZ(t){return t.join(" ").trim()}var gm={},lC,zI;function OZ(){if(zI)return lC;zI=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,d="/",f="*",p="",g="comment",x="declaration";lC=function(j,S){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];S=S||{};var _=1,T=1;function C(H){var K=H.match(e);K&&(_+=K.length);var W=H.lastIndexOf(c);T=~W?H.length-W:T+H.length}function E(){var H={line:_,column:T};return function(K){return K.position=new k(H),R(),K}}function k(H){this.start=H,this.end={line:_,column:T},this.source=S.source}k.prototype.content=j;function P(H){var K=new Error(S.source+":"+_+":"+T+": "+H);if(K.reason=H,K.filename=S.source,K.line=_,K.column=T,K.source=j,!S.silent)throw K}function I(H){var K=H.exec(j);if(K){var W=K[0];return C(W),j=j.slice(W.length),K}}function R(){I(n)}function z(H){var K;for(H=H||[];K=q();)K!==!1&&H.push(K);return H}function q(){var H=E();if(!(d!=j.charAt(0)||f!=j.charAt(1))){for(var K=2;p!=j.charAt(K)&&(f!=j.charAt(K)||d!=j.charAt(K+1));)++K;if(K+=2,p===j.charAt(K-1))return P("End of comment missing");var W=j.slice(2,K-2);return T+=2,C(W),j=j.slice(K),T+=2,H({type:g,comment:W})}}function F(){var H=E(),K=I(a);if(K){if(q(),!I(i))return P("property missing ':'");var W=I(s),B=H({type:x,property:b(K[0].replace(t,p)),value:W?b(W[0].replace(t,p)):p});return I(o),B}}function V(){var H=[];z(H);for(var K;K=F();)K!==!1&&(H.push(K),z(H));return H}return R(),V()};function b(j){return j?j.replace(l,p):p}return lC}var qI;function MZ(){if(qI)return gm;qI=1;var t=gm&&gm.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(gm,"__esModule",{value:!0}),gm.default=n;var e=t(OZ());function n(a,i){var s=null;if(!a||typeof a!="string")return s;var o=(0,e.default)(a),l=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var d=c.property,f=c.value;l?i(d,f,c):f&&(s=s||{},s[d]=f)}}),s}return gm}var Gx={},UI;function IZ(){if(UI)return Gx;UI=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(d){return!d||n.test(d)||t.test(d)},o=function(d,f){return f.toUpperCase()},l=function(d,f){return"".concat(f,"-")},c=function(d,f){return f===void 0&&(f={}),s(d)?d:(d=d.toLowerCase(),f.reactCompat?d=d.replace(i,l):d=d.replace(a,l),d.replace(e,o))};return Gx.camelCase=c,Gx}var Wx,VI;function RZ(){if(VI)return Wx;VI=1;var t=Wx&&Wx.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(MZ()),n=IZ();function a(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return a.default=a,Wx=a,Wx}var LZ=RZ();const FZ=Hn(LZ),cq=uq("end"),XD=uq("start");function uq(t){return e;function e(n){const a=n&&n.position&&n.position[t]||{};if(typeof a.line=="number"&&a.line>0&&typeof a.column=="number"&&a.column>0)return{line:a.line,column:a.column,offset:typeof a.offset=="number"&&a.offset>-1?a.offset:void 0}}}function $Z(t){const e=XD(t),n=cq(t);if(e&&n)return{start:e,end:n}}function vv(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?HI(t.position):"start"in t||"end"in t?HI(t):"line"in t||"column"in t?AE(t):""}function AE(t){return GI(t&&t.line)+":"+GI(t&&t.column)}function HI(t){return AE(t&&t.start)+"-"+AE(t&&t.end)}function GI(t){return t&&typeof t=="number"?t:1}class yi extends Error{constructor(e,n,a){super(),typeof n=="string"&&(a=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof a=="string"){const c=a.indexOf(":");c===-1?s.ruleId=a:(s.source=a.slice(0,c),s.ruleId=a.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=vv(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}yi.prototype.file="";yi.prototype.name="";yi.prototype.reason="";yi.prototype.message="";yi.prototype.stack="";yi.prototype.column=void 0;yi.prototype.line=void 0;yi.prototype.ancestors=void 0;yi.prototype.cause=void 0;yi.prototype.fatal=void 0;yi.prototype.place=void 0;yi.prototype.ruleId=void 0;yi.prototype.source=void 0;const JD={}.hasOwnProperty,BZ=new Map,zZ=/[A-Z]/g,qZ=new Set(["table","tbody","thead","tfoot","tr"]),UZ=new Set(["td","th"]),dq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function VZ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let a;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");a=JZ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");a=XZ(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:a,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?QD:PZ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=hq(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function hq(t,e,n){if(e.type==="element")return HZ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return GZ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return KZ(t,e,n);if(e.type==="mdxjsEsm")return WZ(t,e);if(e.type==="root")return YZ(t,e,n);if(e.type==="text")return QZ(t,e)}function HZ(t,e,n){const a=t.schema;let i=a;e.tagName.toLowerCase()==="svg"&&a.space==="html"&&(i=QD,t.schema=i),t.ancestors.push(e);const s=pq(t,e.tagName,!1),o=ZZ(t,e);let l=eO(t,e);return qZ.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!jZ(c):!0})),fq(t,o,s,e),ZD(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function GZ(t,e){if(e.data&&e.data.estree&&t.evaluater){const a=e.data.estree.body[0];return a.type,t.evaluater.evaluateExpression(a.expression)}Ov(t,e.position)}function WZ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Ov(t,e.position)}function KZ(t,e,n){const a=t.schema;let i=a;e.name==="svg"&&a.space==="html"&&(i=QD,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:pq(t,e.name,!0),o=eee(t,e),l=eO(t,e);return fq(t,o,s,e),ZD(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function YZ(t,e,n){const a={};return ZD(a,eO(t,e)),t.create(e,t.Fragment,a,n)}function QZ(t,e){return e.value}function fq(t,e,n,a){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=a)}function ZD(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function XZ(t,e,n){return a;function a(i,s,o,l){const d=Array.isArray(o.children)?n:e;return l?d(s,o,l):d(s,o)}}function JZ(t,e){return n;function n(a,i,s,o){const l=Array.isArray(s.children),c=XD(a);return e(i,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function ZZ(t,e){const n={};let a,i;for(i in e.properties)if(i!=="children"&&JD.call(e.properties,i)){const s=tee(t,i,e.properties[i]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&UZ.has(e.tagName)?a=l:n[o]=l}}if(a){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=a}return n}function eee(t,e){const n={};for(const a of e.attributes)if(a.type==="mdxJsxExpressionAttribute")if(a.data&&a.data.estree&&t.evaluater){const s=a.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Ov(t,e.position);else{const i=a.name;let s;if(a.value&&typeof a.value=="object")if(a.value.data&&a.value.data.estree&&t.evaluater){const l=a.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Ov(t,e.position);else s=a.value===null?!0:a.value;n[i]=s}return n}function eO(t,e){const n=[];let a=-1;const i=t.passKeys?new Map:BZ;for(;++a<e.children.length;){const s=e.children[a];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const d=i.get(c)||0;o=c+"-"+d,i.set(c,d+1)}}const l=hq(t,s,o);l!==void 0&&n.push(l)}return n}function tee(t,e,n){const a=kZ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=a.commaSeparated?gZ(n):DZ(n)),a.property==="style"){let i=typeof n=="object"?n:nee(t,String(n));return t.stylePropertyNameCase==="css"&&(i=ree(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&a.space?_Z[a.property]||a.property:a.attribute,n]}}function nee(t,e){try{return FZ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const a=n,i=new yi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=dq+"#cannot-parse-style-attribute",i}}function pq(t,e,n){let a;if(!n)a={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const l=LI(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}a=o}else a=LI(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(a.type==="Literal"){const i=a.value;return JD.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(a);Ov(t)}function Ov(t,e){const n=new yi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=dq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ree(t){const e={};let n;for(n in t)JD.call(t,n)&&(e[aee(n)]=t[n]);return e}function aee(t){let e=t.replace(zZ,iee);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function iee(t){return"-"+t.toLowerCase()}const cC={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},see={};function tO(t,e){const n=see,a=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return mq(t,a,i)}function mq(t,e,n){if(oee(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return WI(t.children,e,n)}return Array.isArray(t)?WI(t,e,n):""}function WI(t,e,n){const a=[];let i=-1;for(;++i<t.length;)a[i]=mq(t[i],e,n);return a.join("")}function oee(t){return!!(t&&typeof t=="object")}const KI=document.createElement("i");function nO(t){const e="&"+t+";";KI.innerHTML=e;const n=KI.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ms(t,e,n,a){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,a.length<1e4)o=Array.from(a),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<a.length;)o=a.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function to(t,e){return t.length>0?(Ms(t,t.length,0,e),t):e}const YI={}.hasOwnProperty;function gq(t){const e={};let n=-1;for(;++n<t.length;)lee(e,t[n]);return e}function lee(t,e){let n;for(n in e){const i=(YI.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){YI.call(i,o)||(i[o]=[]);const l=s[o];cee(i[o],Array.isArray(l)?l:l?[l]:[])}}}function cee(t,e){let n=-1;const a=[];for(;++n<e.length;)(e[n].add==="after"?t:a).push(e[n]);Ms(t,0,0,a)}function yq(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Bo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ri=md(/[A-Za-z]/),mi=md(/[\dA-Za-z]/),uee=md(/[#-'*+\--9=?A-Z^-~]/);function vw(t){return t!==null&&(t<32||t===127)}const EE=md(/\d/),dee=md(/[\dA-Fa-f]/),hee=md(/[!-/:-@[-`{-~]/);function Qt(t){return t!==null&&t<-2}function kr(t){return t!==null&&(t<0||t===32)}function Mn(t){return t===-2||t===-1||t===32}const HN=md(new RegExp("\\p{P}|\\p{S}","u")),wf=md(/\s/);function md(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Bg(t){const e=[];let n=-1,a=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&mi(t.charCodeAt(n+1))&&mi(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(a,n),encodeURIComponent(o)),a=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(a)}function Gn(t,e,n,a){const i=a?a-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Mn(c)?(t.enter(n),l(c)):e(c)}function l(c){return Mn(c)&&s++<i?(t.consume(c),l):(t.exit(n),e(c))}}const fee={tokenize:pee};function pee(t){const e=t.attempt(this.parser.constructs.contentInitial,a,i);let n;return e;function a(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Gn(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Qt(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const mee={tokenize:gee},QI={tokenize:yee};function gee(t){const e=this,n=[];let a=0,i,s,o;return l;function l(C){if(a<n.length){const E=n[a];return e.containerState=E[1],t.attempt(E[0].continuation,c,d)(C)}return d(C)}function c(C){if(a++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&T();const E=e.events.length;let k=E,P;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){P=e.events[k][1].end;break}_(a);let I=E;for(;I<e.events.length;)e.events[I][1].end={...P},I++;return Ms(e.events,k+1,0,e.events.slice(E)),e.events.length=I,d(C)}return l(C)}function d(C){if(a===n.length){if(!i)return g(C);if(i.currentConstruct&&i.currentConstruct.concrete)return b(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(QI,f,p)(C)}function f(C){return i&&T(),_(a),g(C)}function p(C){return e.parser.lazy[e.now().line]=a!==n.length,o=e.now().offset,b(C)}function g(C){return e.containerState={},t.attempt(QI,x,b)(C)}function x(C){return a++,n.push([e.currentConstruct,e.containerState]),g(C)}function b(C){if(C===null){i&&T(),_(0),t.consume(C);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),j(C)}function j(C){if(C===null){S(t.exit("chunkFlow"),!0),_(0),t.consume(C);return}return Qt(C)?(t.consume(C),S(t.exit("chunkFlow")),a=0,e.interrupt=void 0,l):(t.consume(C),j)}function S(C,E){const k=e.sliceStream(C);if(E&&k.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(k),e.parser.lazy[C.start.line]){let P=i.events.length;for(;P--;)if(i.events[P][1].start.offset<o&&(!i.events[P][1].end||i.events[P][1].end.offset>o))return;const I=e.events.length;let R=I,z,q;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(z){q=e.events[R][1].end;break}z=!0}for(_(a),P=I;P<e.events.length;)e.events[P][1].end={...q},P++;Ms(e.events,R+1,0,e.events.slice(I)),e.events.length=P}}function _(C){let E=n.length;for(;E-- >C;){const k=n[E];e.containerState=k[1],k[0].exit.call(e,t)}n.length=C}function T(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function yee(t,e,n){return Gn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ig(t){if(t===null||kr(t)||wf(t))return 1;if(HN(t))return 2}function GN(t,e,n){const a=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!a.includes(s)&&(e=s(e,n),a.push(s))}return e}const PE={name:"attention",resolveAll:xee,tokenize:vee};function xee(t,e){let n=-1,a,i,s,o,l,c,d,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(a=n;a--;)if(t[a][0]==="exit"&&t[a][1].type==="attentionSequence"&&t[a][1]._open&&e.sliceSerialize(t[a][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[a][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[a][1].end.offset-t[a][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[a][1].end.offset-t[a][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[a][1].end},g={...t[n][1].start};XI(p,-c),XI(g,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[a][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},s={type:c>1?"strongText":"emphasisText",start:{...t[a][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[a][1].end={...o.start},t[n][1].start={...l.end},d=[],t[a][1].end.offset-t[a][1].start.offset&&(d=to(d,[["enter",t[a][1],e],["exit",t[a][1],e]])),d=to(d,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),d=to(d,GN(e.parser.constructs.insideSpan.null,t.slice(a+1,n),e)),d=to(d,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,d=to(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,Ms(t,a-1,n-a+3,d),n=a+d.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function vee(t,e){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,i=ig(a);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const d=t.exit("attentionSequence"),f=ig(c),p=!f||f===2&&i||n.includes(c),g=!i||i===2&&f||n.includes(a);return d._open=!!(s===42?p:p&&(i||!g)),d._close=!!(s===42?g:g&&(f||!p)),e(c)}}function XI(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const bee={name:"autolink",tokenize:jee};function jee(t,e,n){let a=0;return i;function i(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(x){return Ri(x)?(t.consume(x),o):x===64?n(x):d(x)}function o(x){return x===43||x===45||x===46||mi(x)?(a=1,l(x)):d(x)}function l(x){return x===58?(t.consume(x),a=0,c):(x===43||x===45||x===46||mi(x))&&a++<32?(t.consume(x),l):(a=0,d(x))}function c(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||vw(x)?n(x):(t.consume(x),c)}function d(x){return x===64?(t.consume(x),f):uee(x)?(t.consume(x),d):n(x)}function f(x){return mi(x)?p(x):n(x)}function p(x){return x===46?(t.consume(x),a=0,f):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):g(x)}function g(x){if((x===45||mi(x))&&a++<63){const b=x===45?g:p;return t.consume(x),b}return n(x)}}const Mb={partial:!0,tokenize:wee};function wee(t,e,n){return a;function a(s){return Mn(s)?Gn(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Qt(s)?e(s):n(s)}}const xq={continuation:{tokenize:See},exit:_ee,name:"blockQuote",tokenize:Nee};function Nee(t,e,n){const a=this;return i;function i(o){if(o===62){const l=a.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Mn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function See(t,e,n){const a=this;return i;function i(o){return Mn(o)?Gn(t,s,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(xq,e,n)(o)}}function _ee(t){t.exit("blockQuote")}const vq={name:"characterEscape",tokenize:Cee};function Cee(t,e,n){return a;function a(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return hee(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const bq={name:"characterReference",tokenize:Tee};function Tee(t,e,n){const a=this;let i=0,s,o;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,o=mi,f(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=dee,f):(t.enter("characterReferenceValue"),s=7,o=EE,f(p))}function f(p){if(p===59&&i){const g=t.exit("characterReferenceValue");return o===mi&&!nO(a.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(p)&&i++<s?(t.consume(p),f):n(p)}}const JI={partial:!0,tokenize:Aee},ZI={concrete:!0,name:"codeFenced",tokenize:kee};function kee(t,e,n){const a=this,i={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(P){return d(P)}function d(P){const I=a.events[a.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=P,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(P)}function f(P){return P===l?(o++,t.consume(P),f):o<3?n(P):(t.exit("codeFencedFenceSequence"),Mn(P)?Gn(t,p,"whitespace")(P):p(P))}function p(P){return P===null||Qt(P)?(t.exit("codeFencedFence"),a.interrupt?e(P):t.check(JI,j,E)(P)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(P))}function g(P){return P===null||Qt(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(P)):Mn(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Gn(t,x,"whitespace")(P)):P===96&&P===l?n(P):(t.consume(P),g)}function x(P){return P===null||Qt(P)?p(P):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(P))}function b(P){return P===null||Qt(P)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(P)):P===96&&P===l?n(P):(t.consume(P),b)}function j(P){return t.attempt(i,E,S)(P)}function S(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),_}function _(P){return s>0&&Mn(P)?Gn(t,T,"linePrefix",s+1)(P):T(P)}function T(P){return P===null||Qt(P)?t.check(JI,j,E)(P):(t.enter("codeFlowValue"),C(P))}function C(P){return P===null||Qt(P)?(t.exit("codeFlowValue"),T(P)):(t.consume(P),C)}function E(P){return t.exit("codeFenced"),e(P)}function k(P,I,R){let z=0;return q;function q(W){return P.enter("lineEnding"),P.consume(W),P.exit("lineEnding"),F}function F(W){return P.enter("codeFencedFence"),Mn(W)?Gn(P,V,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):V(W)}function V(W){return W===l?(P.enter("codeFencedFenceSequence"),H(W)):R(W)}function H(W){return W===l?(z++,P.consume(W),H):z>=o?(P.exit("codeFencedFenceSequence"),Mn(W)?Gn(P,K,"whitespace")(W):K(W)):R(W)}function K(W){return W===null||Qt(W)?(P.exit("codeFencedFence"),I(W)):R(W)}}}function Aee(t,e,n){const a=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}const uC={name:"codeIndented",tokenize:Pee},Eee={partial:!0,tokenize:Dee};function Pee(t,e,n){const a=this;return i;function i(d){return t.enter("codeIndented"),Gn(t,s,"linePrefix",5)(d)}function s(d){const f=a.events[a.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):Qt(d)?t.attempt(Eee,o,c)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||Qt(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),l)}function c(d){return t.exit("codeIndented"),e(d)}}function Dee(t,e,n){const a=this;return i;function i(o){return a.parser.lazy[a.now().line]?n(o):Qt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Gn(t,s,"linePrefix",5)(o)}function s(o){const l=a.events[a.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Qt(o)?i(o):n(o)}}const Oee={name:"codeText",previous:Iee,resolve:Mee,tokenize:Ree};function Mee(t){let e=t.length-4,n=3,a,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(a=n;++a<e;)if(t[a][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(a=n-1,e++;++a<=e;)i===void 0?a!==e&&t[a][1].type!=="lineEnding"&&(i=a):(a===e||t[a][1].type==="lineEnding")&&(t[i][1].type="codeTextData",a!==i+2&&(t[i][1].end=t[a-1][1].end,t.splice(i+2,a-i-2),e-=a-i-2,a=i+2),i=void 0);return t}function Iee(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Ree(t,e,n){let a=0,i,s;return o;function o(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),a++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(s=t.enter("codeTextSequence"),i=0,f(p)):Qt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Qt(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),d)}function f(p){return p===96?(t.consume(p),i++,f):i===a?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(s.type="codeTextData",d(p))}}class Lee{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const a=n??Number.POSITIVE_INFINITY;return a<this.left.length?this.left.slice(e,a):e>this.left.length?this.right.slice(this.right.length-a+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-a+this.left.length).reverse())}splice(e,n,a){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return a&&Kx(this.left,a),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Kx(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Kx(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Kx(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Kx(this.left,n.reverse())}}}function Kx(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function jq(t){const e={};let n=-1,a,i,s,o,l,c,d;const f=new Lee(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(a=f.get(n),n&&a[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=a[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(a[0]==="enter")a[1].contentType&&(Object.assign(e,Fee(f,n)),n=e[n],d=!0);else if(a[1]._container){for(s=n,i=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(a[1].end={...f.get(i)[1].start},l=f.slice(i,n),l.unshift(a),f.splice(i,n-i+1,l))}}return Ms(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!d}function Fee(t,e){const n=t.get(e)[1],a=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=a.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let f,p,g=-1,x=n,b=0,j=0;const S=[j];for(;x;){for(;t.get(++i)[1]!==x;);s.push(i),x._tokenizer||(f=a.sliceStream(x),x.next||f.push(null),p&&o.defineSkip(x.start),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=x,x=x.next}for(x=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(j=g+1,S.push(j),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(o.events=[],x?(x._tokenizer=void 0,x.previous=void 0):S.pop(),g=S.length;g--;){const _=l.slice(S[g],S[g+1]),T=s.pop();c.push([T,T+_.length-1]),t.splice(T,2,_)}for(c.reverse(),g=-1;++g<c.length;)d[b+c[g][0]]=b+c[g][1],b+=c[g][1]-c[g][0]-1;return d}const $ee={resolve:zee,tokenize:qee},Bee={partial:!0,tokenize:Uee};function zee(t){return jq(t),t}function qee(t,e){let n;return a;function a(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):Qt(l)?t.check(Bee,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Uee(t,e,n){const a=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Gn(t,s,"linePrefix")}function s(o){if(o===null||Qt(o))return n(o);const l=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(a.parser.constructs.flow,n,e)(o)}}function wq(t,e,n,a,i,s,o,l,c){const d=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(_){return _===60?(t.enter(a),t.enter(i),t.enter(s),t.consume(_),t.exit(s),g):_===null||_===32||_===41||vw(_)?n(_):(t.enter(a),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),j(_))}function g(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(a),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),x(_))}function x(_){return _===62?(t.exit("chunkString"),t.exit(l),g(_)):_===null||_===60||Qt(_)?n(_):(t.consume(_),_===92?b:x)}function b(_){return _===60||_===62||_===92?(t.consume(_),x):x(_)}function j(_){return!f&&(_===null||_===41||kr(_))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(a),e(_)):f<d&&_===40?(t.consume(_),f++,j):_===41?(t.consume(_),f--,j):_===null||_===32||_===40||vw(_)?n(_):(t.consume(_),_===92?S:j)}function S(_){return _===40||_===41||_===92?(t.consume(_),j):j(_)}}function Nq(t,e,n,a,i,s){const o=this;let l=0,c;return d;function d(x){return t.enter(a),t.enter(i),t.consume(x),t.exit(i),t.enter(s),f}function f(x){return l>999||x===null||x===91||x===93&&!c||x===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(x):x===93?(t.exit(s),t.enter(i),t.consume(x),t.exit(i),t.exit(a),e):Qt(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||x===91||x===93||Qt(x)||l++>999?(t.exit("chunkString"),f(x)):(t.consume(x),c||(c=!Mn(x)),x===92?g:p)}function g(x){return x===91||x===92||x===93?(t.consume(x),l++,p):p(x)}}function Sq(t,e,n,a,i,s){let o;return l;function l(g){return g===34||g===39||g===40?(t.enter(a),t.enter(i),t.consume(g),t.exit(i),o=g===40?41:g,c):n(g)}function c(g){return g===o?(t.enter(i),t.consume(g),t.exit(i),t.exit(a),e):(t.enter(s),d(g))}function d(g){return g===o?(t.exit(s),c(o)):g===null?n(g):Qt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),Gn(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===o||g===null||Qt(g)?(t.exit("chunkString"),d(g)):(t.consume(g),g===92?p:f)}function p(g){return g===o||g===92?(t.consume(g),f):f(g)}}function bv(t,e){let n;return a;function a(i){return Qt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,a):Mn(i)?Gn(t,a,n?"linePrefix":"lineSuffix")(i):e(i)}}const Vee={name:"definition",tokenize:Gee},Hee={partial:!0,tokenize:Wee};function Gee(t,e,n){const a=this;let i;return s;function s(x){return t.enter("definition"),o(x)}function o(x){return Nq.call(a,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return i=Bo(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),c):n(x)}function c(x){return kr(x)?bv(t,d)(x):d(x)}function d(x){return wq(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function f(x){return t.attempt(Hee,p,p)(x)}function p(x){return Mn(x)?Gn(t,g,"whitespace")(x):g(x)}function g(x){return x===null||Qt(x)?(t.exit("definition"),a.parser.defined.push(i),e(x)):n(x)}}function Wee(t,e,n){return a;function a(l){return kr(l)?bv(t,i)(l):n(l)}function i(l){return Sq(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Mn(l)?Gn(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Qt(l)?e(l):n(l)}}const Kee={name:"hardBreakEscape",tokenize:Yee};function Yee(t,e,n){return a;function a(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Qt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const Qee={name:"headingAtx",resolve:Xee,tokenize:Jee};function Xee(t,e){let n=t.length-2,a=3,i,s;return t[a][1].type==="whitespace"&&(a+=2),n-2>a&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&t[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(i={type:"atxHeadingText",start:t[a][1].start,end:t[n][1].end},s={type:"chunkText",start:t[a][1].start,end:t[n][1].end,contentType:"text"},Ms(t,a,n-a+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function Jee(t,e,n){let a=0;return i;function i(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&a++<6?(t.consume(f),o):f===null||kr(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||Qt(f)?(t.exit("atxHeading"),e(f)):Mn(f)?Gn(t,l,"whitespace")(f):(t.enter("atxHeadingText"),d(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),l(f))}function d(f){return f===null||f===35||kr(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),d)}}const Zee=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],eR=["pre","script","style","textarea"],ete={concrete:!0,name:"htmlFlow",resolveTo:rte,tokenize:ate},tte={partial:!0,tokenize:ste},nte={partial:!0,tokenize:ite};function rte(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function ate(t,e,n){const a=this;let i,s,o,l,c;return d;function d(Y){return f(Y)}function f(Y){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(Y),p}function p(Y){return Y===33?(t.consume(Y),g):Y===47?(t.consume(Y),s=!0,j):Y===63?(t.consume(Y),i=3,a.interrupt?e:$):Ri(Y)?(t.consume(Y),o=String.fromCharCode(Y),S):n(Y)}function g(Y){return Y===45?(t.consume(Y),i=2,x):Y===91?(t.consume(Y),i=5,l=0,b):Ri(Y)?(t.consume(Y),i=4,a.interrupt?e:$):n(Y)}function x(Y){return Y===45?(t.consume(Y),a.interrupt?e:$):n(Y)}function b(Y){const Re="CDATA[";return Y===Re.charCodeAt(l++)?(t.consume(Y),l===Re.length?a.interrupt?e:V:b):n(Y)}function j(Y){return Ri(Y)?(t.consume(Y),o=String.fromCharCode(Y),S):n(Y)}function S(Y){if(Y===null||Y===47||Y===62||kr(Y)){const Re=Y===47,$e=o.toLowerCase();return!Re&&!s&&eR.includes($e)?(i=1,a.interrupt?e(Y):V(Y)):Zee.includes(o.toLowerCase())?(i=6,Re?(t.consume(Y),_):a.interrupt?e(Y):V(Y)):(i=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(Y):s?T(Y):C(Y))}return Y===45||mi(Y)?(t.consume(Y),o+=String.fromCharCode(Y),S):n(Y)}function _(Y){return Y===62?(t.consume(Y),a.interrupt?e:V):n(Y)}function T(Y){return Mn(Y)?(t.consume(Y),T):q(Y)}function C(Y){return Y===47?(t.consume(Y),q):Y===58||Y===95||Ri(Y)?(t.consume(Y),E):Mn(Y)?(t.consume(Y),C):q(Y)}function E(Y){return Y===45||Y===46||Y===58||Y===95||mi(Y)?(t.consume(Y),E):k(Y)}function k(Y){return Y===61?(t.consume(Y),P):Mn(Y)?(t.consume(Y),k):C(Y)}function P(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?n(Y):Y===34||Y===39?(t.consume(Y),c=Y,I):Mn(Y)?(t.consume(Y),P):R(Y)}function I(Y){return Y===c?(t.consume(Y),c=null,z):Y===null||Qt(Y)?n(Y):(t.consume(Y),I)}function R(Y){return Y===null||Y===34||Y===39||Y===47||Y===60||Y===61||Y===62||Y===96||kr(Y)?k(Y):(t.consume(Y),R)}function z(Y){return Y===47||Y===62||Mn(Y)?C(Y):n(Y)}function q(Y){return Y===62?(t.consume(Y),F):n(Y)}function F(Y){return Y===null||Qt(Y)?V(Y):Mn(Y)?(t.consume(Y),F):n(Y)}function V(Y){return Y===45&&i===2?(t.consume(Y),B):Y===60&&i===1?(t.consume(Y),G):Y===62&&i===4?(t.consume(Y),ce):Y===63&&i===3?(t.consume(Y),$):Y===93&&i===5?(t.consume(Y),X):Qt(Y)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(tte,xe,H)(Y)):Y===null||Qt(Y)?(t.exit("htmlFlowData"),H(Y)):(t.consume(Y),V)}function H(Y){return t.check(nte,K,xe)(Y)}function K(Y){return t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),W}function W(Y){return Y===null||Qt(Y)?H(Y):(t.enter("htmlFlowData"),V(Y))}function B(Y){return Y===45?(t.consume(Y),$):V(Y)}function G(Y){return Y===47?(t.consume(Y),o="",ee):V(Y)}function ee(Y){if(Y===62){const Re=o.toLowerCase();return eR.includes(Re)?(t.consume(Y),ce):V(Y)}return Ri(Y)&&o.length<8?(t.consume(Y),o+=String.fromCharCode(Y),ee):V(Y)}function X(Y){return Y===93?(t.consume(Y),$):V(Y)}function $(Y){return Y===62?(t.consume(Y),ce):Y===45&&i===2?(t.consume(Y),$):V(Y)}function ce(Y){return Y===null||Qt(Y)?(t.exit("htmlFlowData"),xe(Y)):(t.consume(Y),ce)}function xe(Y){return t.exit("htmlFlow"),e(Y)}}function ite(t,e,n){const a=this;return i;function i(o){return Qt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}function ste(t,e,n){return a;function a(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Mb,e,n)}}const ote={name:"htmlText",tokenize:lte};function lte(t,e,n){const a=this;let i,s,o;return l;function l($){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume($),c}function c($){return $===33?(t.consume($),d):$===47?(t.consume($),k):$===63?(t.consume($),C):Ri($)?(t.consume($),R):n($)}function d($){return $===45?(t.consume($),f):$===91?(t.consume($),s=0,b):Ri($)?(t.consume($),T):n($)}function f($){return $===45?(t.consume($),x):n($)}function p($){return $===null?n($):$===45?(t.consume($),g):Qt($)?(o=p,G($)):(t.consume($),p)}function g($){return $===45?(t.consume($),x):p($)}function x($){return $===62?B($):$===45?g($):p($)}function b($){const ce="CDATA[";return $===ce.charCodeAt(s++)?(t.consume($),s===ce.length?j:b):n($)}function j($){return $===null?n($):$===93?(t.consume($),S):Qt($)?(o=j,G($)):(t.consume($),j)}function S($){return $===93?(t.consume($),_):j($)}function _($){return $===62?B($):$===93?(t.consume($),_):j($)}function T($){return $===null||$===62?B($):Qt($)?(o=T,G($)):(t.consume($),T)}function C($){return $===null?n($):$===63?(t.consume($),E):Qt($)?(o=C,G($)):(t.consume($),C)}function E($){return $===62?B($):C($)}function k($){return Ri($)?(t.consume($),P):n($)}function P($){return $===45||mi($)?(t.consume($),P):I($)}function I($){return Qt($)?(o=I,G($)):Mn($)?(t.consume($),I):B($)}function R($){return $===45||mi($)?(t.consume($),R):$===47||$===62||kr($)?z($):n($)}function z($){return $===47?(t.consume($),B):$===58||$===95||Ri($)?(t.consume($),q):Qt($)?(o=z,G($)):Mn($)?(t.consume($),z):B($)}function q($){return $===45||$===46||$===58||$===95||mi($)?(t.consume($),q):F($)}function F($){return $===61?(t.consume($),V):Qt($)?(o=F,G($)):Mn($)?(t.consume($),F):z($)}function V($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(t.consume($),i=$,H):Qt($)?(o=V,G($)):Mn($)?(t.consume($),V):(t.consume($),K)}function H($){return $===i?(t.consume($),i=void 0,W):$===null?n($):Qt($)?(o=H,G($)):(t.consume($),H)}function K($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||kr($)?z($):(t.consume($),K)}function W($){return $===47||$===62||kr($)?z($):n($)}function B($){return $===62?(t.consume($),t.exit("htmlTextData"),t.exit("htmlText"),e):n($)}function G($){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),ee}function ee($){return Mn($)?Gn(t,X,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):X($)}function X($){return t.enter("htmlTextData"),o($)}}const rO={name:"labelEnd",resolveAll:hte,resolveTo:fte,tokenize:pte},cte={tokenize:mte},ute={tokenize:gte},dte={tokenize:yte};function hte(t){let e=-1;const n=[];for(;++e<t.length;){const a=t[e][1];if(n.push(t[e]),a.type==="labelImage"||a.type==="labelLink"||a.type==="labelEnd"){const i=a.type==="labelImage"?4:2;a.type="data",e+=i}}return t.length!==n.length&&Ms(t,0,t.length,n),t}function fte(t,e){let n=t.length,a=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){a=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+a+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",d,e]],l=to(l,t.slice(s+1,s+a+3)),l=to(l,[["enter",f,e]]),l=to(l,GN(e.parser.constructs.insideSpan.null,t.slice(s+a+4,o-3),e)),l=to(l,[["exit",f,e],t[o-2],t[o-1],["exit",d,e]]),l=to(l,t.slice(o+1)),l=to(l,[["exit",c,e]]),Ms(t,s,t.length,l),t}function pte(t,e,n){const a=this;let i=a.events.length,s,o;for(;i--;)if((a.events[i][1].type==="labelImage"||a.events[i][1].type==="labelLink")&&!a.events[i][1]._balanced){s=a.events[i][1];break}return l;function l(g){return s?s._inactive?p(g):(o=a.parser.defined.includes(Bo(a.sliceSerialize({start:s.end,end:a.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),c):n(g)}function c(g){return g===40?t.attempt(cte,f,o?f:p)(g):g===91?t.attempt(ute,f,o?d:p)(g):o?f(g):p(g)}function d(g){return t.attempt(dte,f,p)(g)}function f(g){return e(g)}function p(g){return s._balanced=!0,n(g)}}function mte(t,e,n){return a;function a(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),i}function i(p){return kr(p)?bv(t,s)(p):s(p)}function s(p){return p===41?f(p):wq(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return kr(p)?bv(t,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?Sq(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function d(p){return kr(p)?bv(t,f)(p):f(p)}function f(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function gte(t,e,n){const a=this;return i;function i(l){return Nq.call(a,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return a.parser.defined.includes(Bo(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function yte(t,e,n){return a;function a(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const xte={name:"labelStartImage",resolveAll:rO.resolveAll,tokenize:vte};function vte(t,e,n){const a=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(l):e(l)}}const bte={name:"labelStartLink",resolveAll:rO.resolveAll,tokenize:jte};function jte(t,e,n){const a=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(o):e(o)}}const dC={name:"lineEnding",tokenize:wte};function wte(t,e){return n;function n(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Gn(t,e,"linePrefix")}}const ew={name:"thematicBreak",tokenize:Nte};function Nte(t,e,n){let a=0,i;return s;function s(d){return t.enter("thematicBreak"),o(d)}function o(d){return i=d,l(d)}function l(d){return d===i?(t.enter("thematicBreakSequence"),c(d)):a>=3&&(d===null||Qt(d))?(t.exit("thematicBreak"),e(d)):n(d)}function c(d){return d===i?(t.consume(d),a++,c):(t.exit("thematicBreakSequence"),Mn(d)?Gn(t,l,"whitespace")(d):l(d))}}const rs={continuation:{tokenize:Tte},exit:Ate,name:"list",tokenize:Cte},Ste={partial:!0,tokenize:Ete},_te={partial:!0,tokenize:kte};function Cte(t,e,n){const a=this,i=a.events[a.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(x){const b=a.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!a.containerState.marker||x===a.containerState.marker:EE(x)){if(a.containerState.type||(a.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(ew,n,d)(x):d(x);if(!a.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(x)}return n(x)}function c(x){return EE(x)&&++o<10?(t.consume(x),c):(!a.interrupt||o<2)&&(a.containerState.marker?x===a.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),d(x)):n(x)}function d(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||x,t.check(Mb,a.interrupt?n:f,t.attempt(Ste,g,p))}function f(x){return a.containerState.initialBlankLine=!0,s++,g(x)}function p(x){return Mn(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),g):n(x)}function g(x){return a.containerState.size=s+a.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function Tte(t,e,n){const a=this;return a.containerState._closeFlow=void 0,t.check(Mb,i,s);function i(l){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,Gn(t,e,"listItemIndent",a.containerState.size+1)(l)}function s(l){return a.containerState.furtherBlankLines||!Mn(l)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,o(l)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,t.attempt(_te,e,o)(l))}function o(l){return a.containerState._closeFlow=!0,a.interrupt=void 0,Gn(t,t.attempt(rs,e,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function kte(t,e,n){const a=this;return Gn(t,i,"listItemIndent",a.containerState.size+1);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===a.containerState.size?e(s):n(s)}}function Ate(t){t.exit(this.containerState.type)}function Ete(t,e,n){const a=this;return Gn(t,i,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=a.events[a.events.length-1];return!Mn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const tR={name:"setextUnderline",resolveTo:Pte,tokenize:Dte};function Pte(t,e){let n=t.length,a,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){a=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[a][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[a][1],e]),t[a][1].end={...t[s][1].end}):t[a][1]=o,t.push(["exit",o,e]),t}function Dte(t,e,n){const a=this;let i;return s;function s(d){let f=a.events.length,p;for(;f--;)if(a.events[f][1].type!=="lineEnding"&&a.events[f][1].type!=="linePrefix"&&a.events[f][1].type!=="content"){p=a.events[f][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||p)?(t.enter("setextHeadingLine"),i=d,o(d)):n(d)}function o(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),Mn(d)?Gn(t,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Qt(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const Ote={tokenize:Mte};function Mte(t){const e=this,n=t.attempt(Mb,a,t.attempt(this.parser.constructs.flowInitial,i,Gn(t,t.attempt(this.parser.constructs.flow,i,t.attempt($ee,i)),"linePrefix")));return n;function a(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Ite={resolveAll:Cq()},Rte=_q("string"),Lte=_q("text");function _q(t){return{resolveAll:Cq(t==="text"?Fte:void 0),tokenize:e};function e(n){const a=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(f){return d(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return d(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function d(f){if(f===null)return!0;const p=i[f];let g=-1;if(p)for(;++g<p.length;){const x=p[g];if(!x.previous||x.previous.call(a,a.previous))return!0}return!1}}}function Cq(t){return e;function e(n,a){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,a):n}}function Fte(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const a=t[n-1][1],i=e.sliceStream(a);let s=i.length,o=-1,l=0,c;for(;s--;){const d=i[s];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const d={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:a.start._bufferIndex+o,_index:a.start._index+s,line:a.end.line,column:a.end.column-l,offset:a.end.offset-l},end:{...a.end}};a.end={...d.start},a.start.offset===a.end.offset?Object.assign(a,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const $te={42:rs,43:rs,45:rs,48:rs,49:rs,50:rs,51:rs,52:rs,53:rs,54:rs,55:rs,56:rs,57:rs,62:xq},Bte={91:Vee},zte={[-2]:uC,[-1]:uC,32:uC},qte={35:Qee,42:ew,45:[tR,ew],60:ete,61:tR,95:ew,96:ZI,126:ZI},Ute={38:bq,92:vq},Vte={[-5]:dC,[-4]:dC,[-3]:dC,33:xte,38:bq,42:PE,60:[bee,ote],91:bte,92:[Kee,vq],93:rO,95:PE,96:Oee},Hte={null:[PE,Ite]},Gte={null:[42,95]},Wte={null:[]},Kte=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Gte,contentInitial:Bte,disable:Wte,document:$te,flow:qte,flowInitial:zte,insideSpan:Hte,string:Ute,text:Vte},Symbol.toStringTag,{value:"Module"}));function Yte(t,e,n){let a={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const c={attempt:I(k),check:I(P),consume:T,enter:C,exit:E,interrupt:I(P,{interrupt:!0})},d={code:null,containerState:{},defineSkip:j,events:[],now:b,parser:t,previous:null,sliceSerialize:g,sliceStream:x,write:p};let f=e.tokenize.call(d,c);return e.resolveAll&&s.push(e),d;function p(F){return o=to(o,F),S(),o[o.length-1]!==null?[]:(R(e,0),d.events=GN(s,d.events,d),d.events)}function g(F,V){return Xte(x(F),V)}function x(F){return Qte(o,F)}function b(){const{_bufferIndex:F,_index:V,line:H,column:K,offset:W}=a;return{_bufferIndex:F,_index:V,line:H,column:K,offset:W}}function j(F){i[F.line]=F.column,q()}function S(){let F;for(;a._index<o.length;){const V=o[a._index];if(typeof V=="string")for(F=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===F&&a._bufferIndex<V.length;)_(V.charCodeAt(a._bufferIndex));else _(V)}}function _(F){f=f(F)}function T(F){Qt(F)?(a.line++,a.column=1,a.offset+=F===-3?2:1,q()):F!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===o[a._index].length&&(a._bufferIndex=-1,a._index++)),d.previous=F}function C(F,V){const H=V||{};return H.type=F,H.start=b(),d.events.push(["enter",H,d]),l.push(H),H}function E(F){const V=l.pop();return V.end=b(),d.events.push(["exit",V,d]),V}function k(F,V){R(F,V.from)}function P(F,V){V.restore()}function I(F,V){return H;function H(K,W,B){let G,ee,X,$;return Array.isArray(K)?xe(K):"tokenize"in K?xe([K]):ce(K);function ce(ze){return Le;function Le(oe){const Se=oe!==null&&ze[oe],Ve=oe!==null&&ze.null,Ae=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Ve)?Ve:Ve?[Ve]:[]];return xe(Ae)(oe)}}function xe(ze){return G=ze,ee=0,ze.length===0?B:Y(ze[ee])}function Y(ze){return Le;function Le(oe){return $=z(),X=ze,ze.partial||(d.currentConstruct=ze),ze.name&&d.parser.constructs.disable.null.includes(ze.name)?$e():ze.tokenize.call(V?Object.assign(Object.create(d),V):d,c,Re,$e)(oe)}}function Re(ze){return F(X,$),W}function $e(ze){return $.restore(),++ee<G.length?Y(G[ee]):B}}}function R(F,V){F.resolveAll&&!s.includes(F)&&s.push(F),F.resolve&&Ms(d.events,V,d.events.length-V,F.resolve(d.events.slice(V),d)),F.resolveTo&&(d.events=F.resolveTo(d.events,d))}function z(){const F=b(),V=d.previous,H=d.currentConstruct,K=d.events.length,W=Array.from(l);return{from:K,restore:B};function B(){a=F,d.previous=V,d.currentConstruct=H,d.events.length=K,l=W,q()}}function q(){a.line in i&&a.column<2&&(a.column=i[a.line],a.offset+=i[a.line]-1)}}function Qte(t,e){const n=e.start._index,a=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(a,s)];else{if(o=t.slice(n,i),a>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(a):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function Xte(t,e){let n=-1;const a=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,a.push(o)}return a.join("")}function Jte(t){const a={constructs:gq([Kte,...(t||{}).extensions||[]]),content:i(fee),defined:[],document:i(mee),flow:i(Ote),lazy:{},string:i(Rte),text:i(Lte)};return a;function i(s){return o;function o(l){return Yte(a,s,l)}}}function Zte(t){for(;!jq(t););return t}const nR=/[\0\t\n\r]/g;function ene(){let t=1,e="",n=!0,a;return i;function i(s,o,l){const c=[];let d,f,p,g,x;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,e="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(nR.lastIndex=p,d=nR.exec(s),g=d&&d.index!==void 0?d.index:s.length,x=s.charCodeAt(g),!d){e=s.slice(p);break}if(x===10&&p===g&&a)c.push(-3),a=void 0;else switch(a&&(c.push(-5),a=void 0),p<g&&(c.push(s.slice(p,g)),t+=g-p),x){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:a=!0,t=1}p=g+1}return l&&(a&&c.push(-5),e&&c.push(e),c.push(null)),c}}const tne=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function nne(t){return t.replace(tne,rne)}function rne(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return yq(n.slice(s?2:1),s?16:10)}return nO(n)||t}const Tq={}.hasOwnProperty;function ane(t,e,n){return typeof e!="string"&&(n=e,e=void 0),ine(n)(Zte(Jte(n).document().write(ene()(t,e,!0))))}function ine(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ge),autolinkProtocol:z,autolinkEmail:z,atxHeading:s(be),blockQuote:s(Ve),characterEscape:z,characterReference:z,codeFenced:s(Ae),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ae,o),codeText:s(ue,o),codeTextData:z,data:z,codeFlowValue:z,definition:s(Te),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(se),hardBreakEscape:s(_e),hardBreakTrailing:s(_e),htmlFlow:s(Ne,o),htmlFlowData:z,htmlText:s(Ne,o),htmlTextData:z,image:s(Z),label:o,link:s(ge),listItem:s(ae),listItemValue:g,listOrdered:s(de,p),listUnordered:s(de),paragraph:s(ne),reference:Y,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(be),strong:s(ie),thematicBreak:s(Ee)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:Se,autolinkProtocol:oe,blockQuote:c(),characterEscapeValue:q,characterReferenceMarkerHexadecimal:$e,characterReferenceMarkerNumeric:$e,characterReferenceValue:ze,characterReference:Le,codeFenced:c(S),codeFencedFence:j,codeFencedFenceInfo:x,codeFencedFenceMeta:b,codeFlowValue:q,codeIndented:c(_),codeText:c(W),codeTextData:q,data:q,definition:c(),definitionDestinationString:E,definitionLabelString:T,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(V),hardBreakTrailing:c(V),htmlFlow:c(H),htmlFlowData:q,htmlText:c(K),htmlTextData:q,image:c(G),label:X,labelText:ee,lineEnding:F,link:c(B),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Re,resourceDestinationString:$,resourceTitleString:ce,resource:xe,setextHeading:c(R),setextHeadingLineSequence:I,setextHeadingText:P,strong:c(),thematicBreak:c()}};kq(e,(t||{}).mdastExtensions||[]);const n={};return a;function a(Q){let ye={type:"root",children:[]};const me={stack:[ye],tokenStack:[],config:e,enter:l,exit:d,buffer:o,resume:f,data:n},he=[];let De=-1;for(;++De<Q.length;)if(Q[De][1].type==="listOrdered"||Q[De][1].type==="listUnordered")if(Q[De][0]==="enter")he.push(De);else{const nt=he.pop();De=i(Q,nt,De)}for(De=-1;++De<Q.length;){const nt=e[Q[De][0]];Tq.call(nt,Q[De][1].type)&&nt[Q[De][1].type].call(Object.assign({sliceSerialize:Q[De][2].sliceSerialize},me),Q[De][1])}if(me.tokenStack.length>0){const nt=me.tokenStack[me.tokenStack.length-1];(nt[1]||rR).call(me,void 0,nt[0])}for(ye.position={start:qu(Q.length>0?Q[0][1].start:{line:1,column:1,offset:0}),end:qu(Q.length>0?Q[Q.length-2][1].end:{line:1,column:1,offset:0})},De=-1;++De<e.transforms.length;)ye=e.transforms[De](ye)||ye;return ye}function i(Q,ye,me){let he=ye-1,De=-1,nt=!1,Fe,Ge,it,wt;for(;++he<=me;){const we=Q[he];switch(we[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{we[0]==="enter"?De++:De--,wt=void 0;break}case"lineEndingBlank":{we[0]==="enter"&&(Fe&&!wt&&!De&&!it&&(it=he),wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wt=void 0}if(!De&&we[0]==="enter"&&we[1].type==="listItemPrefix"||De===-1&&we[0]==="exit"&&(we[1].type==="listUnordered"||we[1].type==="listOrdered")){if(Fe){let Qe=he;for(Ge=void 0;Qe--;){const Xe=Q[Qe];if(Xe[1].type==="lineEnding"||Xe[1].type==="lineEndingBlank"){if(Xe[0]==="exit")continue;Ge&&(Q[Ge][1].type="lineEndingBlank",nt=!0),Xe[1].type="lineEnding",Ge=Qe}else if(!(Xe[1].type==="linePrefix"||Xe[1].type==="blockQuotePrefix"||Xe[1].type==="blockQuotePrefixWhitespace"||Xe[1].type==="blockQuoteMarker"||Xe[1].type==="listItemIndent"))break}it&&(!Ge||it<Ge)&&(Fe._spread=!0),Fe.end=Object.assign({},Ge?Q[Ge][1].start:we[1].end),Q.splice(Ge||he,0,["exit",Fe,we[2]]),he++,me++}if(we[1].type==="listItemPrefix"){const Qe={type:"listItem",_spread:!1,start:Object.assign({},we[1].start),end:void 0};Fe=Qe,Q.splice(he,0,["enter",Qe,we[2]]),he++,me++,it=void 0,wt=!0}}}return Q[ye][1]._spread=nt,me}function s(Q,ye){return me;function me(he){l.call(this,Q(he),he),ye&&ye.call(this,he)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(Q,ye,me){this.stack[this.stack.length-1].children.push(Q),this.stack.push(Q),this.tokenStack.push([ye,me||void 0]),Q.position={start:qu(ye.start),end:void 0}}function c(Q){return ye;function ye(me){Q&&Q.call(this,me),d.call(this,me)}}function d(Q,ye){const me=this.stack.pop(),he=this.tokenStack.pop();if(he)he[0].type!==Q.type&&(ye?ye.call(this,Q,he[0]):(he[1]||rR).call(this,Q,he[0]));else throw new Error("Cannot close `"+Q.type+"` ("+vv({start:Q.start,end:Q.end})+"): its not open");me.position.end=qu(Q.end)}function f(){return tO(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(Q){if(this.data.expectingFirstListItemValue){const ye=this.stack[this.stack.length-2];ye.start=Number.parseInt(this.sliceSerialize(Q),10),this.data.expectingFirstListItemValue=void 0}}function x(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.lang=Q}function b(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.meta=Q}function j(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Q.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Q.replace(/(\r?\n|\r)$/g,"")}function T(Q){const ye=this.resume(),me=this.stack[this.stack.length-1];me.label=ye,me.identifier=Bo(this.sliceSerialize(Q)).toLowerCase()}function C(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.title=Q}function E(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.url=Q}function k(Q){const ye=this.stack[this.stack.length-1];if(!ye.depth){const me=this.sliceSerialize(Q).length;ye.depth=me}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function I(Q){const ye=this.stack[this.stack.length-1];ye.depth=this.sliceSerialize(Q).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function z(Q){const me=this.stack[this.stack.length-1].children;let he=me[me.length-1];(!he||he.type!=="text")&&(he=je(),he.position={start:qu(Q.start),end:void 0},me.push(he)),this.stack.push(he)}function q(Q){const ye=this.stack.pop();ye.value+=this.sliceSerialize(Q),ye.position.end=qu(Q.end)}function F(Q){const ye=this.stack[this.stack.length-1];if(this.data.atHardBreak){const me=ye.children[ye.children.length-1];me.position.end=qu(Q.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ye.type)&&(z.call(this,Q),q.call(this,Q))}function V(){this.data.atHardBreak=!0}function H(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Q}function K(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Q}function W(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Q}function B(){const Q=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";Q.type+="Reference",Q.referenceType=ye,delete Q.url,delete Q.title}else delete Q.identifier,delete Q.label;this.data.referenceType=void 0}function G(){const Q=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";Q.type+="Reference",Q.referenceType=ye,delete Q.url,delete Q.title}else delete Q.identifier,delete Q.label;this.data.referenceType=void 0}function ee(Q){const ye=this.sliceSerialize(Q),me=this.stack[this.stack.length-2];me.label=nne(ye),me.identifier=Bo(ye).toLowerCase()}function X(){const Q=this.stack[this.stack.length-1],ye=this.resume(),me=this.stack[this.stack.length-1];if(this.data.inReference=!0,me.type==="link"){const he=Q.children;me.children=he}else me.alt=ye}function $(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.url=Q}function ce(){const Q=this.resume(),ye=this.stack[this.stack.length-1];ye.title=Q}function xe(){this.data.inReference=void 0}function Y(){this.data.referenceType="collapsed"}function Re(Q){const ye=this.resume(),me=this.stack[this.stack.length-1];me.label=ye,me.identifier=Bo(this.sliceSerialize(Q)).toLowerCase(),this.data.referenceType="full"}function $e(Q){this.data.characterReferenceType=Q.type}function ze(Q){const ye=this.sliceSerialize(Q),me=this.data.characterReferenceType;let he;me?(he=yq(ye,me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):he=nO(ye);const De=this.stack[this.stack.length-1];De.value+=he}function Le(Q){const ye=this.stack.pop();ye.position.end=qu(Q.end)}function oe(Q){q.call(this,Q);const ye=this.stack[this.stack.length-1];ye.url=this.sliceSerialize(Q)}function Se(Q){q.call(this,Q);const ye=this.stack[this.stack.length-1];ye.url="mailto:"+this.sliceSerialize(Q)}function Ve(){return{type:"blockquote",children:[]}}function Ae(){return{type:"code",lang:null,meta:null,value:""}}function ue(){return{type:"inlineCode",value:""}}function Te(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function se(){return{type:"emphasis",children:[]}}function be(){return{type:"heading",depth:0,children:[]}}function _e(){return{type:"break"}}function Ne(){return{type:"html",value:""}}function Z(){return{type:"image",title:null,url:"",alt:null}}function ge(){return{type:"link",title:null,url:"",children:[]}}function de(Q){return{type:"list",ordered:Q.type==="listOrdered",start:null,spread:Q._spread,children:[]}}function ae(Q){return{type:"listItem",spread:Q._spread,checked:null,children:[]}}function ne(){return{type:"paragraph",children:[]}}function ie(){return{type:"strong",children:[]}}function je(){return{type:"text",value:""}}function Ee(){return{type:"thematicBreak"}}}function qu(t){return{line:t.line,column:t.column,offset:t.offset}}function kq(t,e){let n=-1;for(;++n<e.length;){const a=e[n];Array.isArray(a)?kq(t,a):sne(t,a)}}function sne(t,e){let n;for(n in e)if(Tq.call(e,n))switch(n){case"canContainEols":{const a=e[n];a&&t[n].push(...a);break}case"transforms":{const a=e[n];a&&t[n].push(...a);break}case"enter":case"exit":{const a=e[n];a&&Object.assign(t[n],a);break}}}function rR(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+vv({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+vv({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+vv({start:e.start,end:e.end})+") is still open")}function one(t){const e=this;e.parser=n;function n(a){return ane(a,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function lne(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function cne(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function une(t,e){const n=e.value?e.value+`
`:"",a={};e.lang&&(a.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function dne(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hne(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function fne(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",a=String(e.identifier).toUpperCase(),i=Bg(a.toLowerCase()),s=t.footnoteOrder.indexOf(a);let o,l=t.footnoteCounts.get(a);l===void 0?(l=0,t.footnoteOrder.push(a),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(a,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,d),t.applyData(e,d)}function pne(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mne(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Aq(t,e){const n=e.referenceType;let a="]";if(n==="collapsed"?a+="[]":n==="full"&&(a+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+a}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=a:i.push({type:"text",value:a}),i}function gne(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return Aq(t,e);const i={src:Bg(a.url||""),alt:e.alt};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function yne(t,e){const n={src:Bg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,a),t.applyData(e,a)}function xne(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,a),t.applyData(e,a)}function vne(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return Aq(t,e);const i={href:Bg(a.url||"")};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function bne(t,e){const n={href:Bg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function jne(t,e,n){const a=t.all(e),i=n?wne(n):Eq(e),s={},o=[];if(typeof e.checked=="boolean"){const f=a[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},a.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<a.length;){const f=a[l];(i||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?o.push(...f.children):o.push(f)}const c=a[a.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,d),t.applyData(e,d)}function wne(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let a=-1;for(;!e&&++a<n.length;)e=Eq(n[a])}return e}function Eq(t){const e=t.spread;return e??t.children.length>1}function Nne(t,e){const n={},a=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<a.length;){const o=a[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(a,!0)};return t.patch(e,s),t.applyData(e,s)}function Sne(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function _ne(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Cne(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Tne(t,e){const n=t.all(e),a=n.shift(),i=[];if(a){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([a],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=XD(e.children[1]),c=cq(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function kne(t,e,n){const a=n?n.children:void 0,s=(a?a.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let c=-1;const d=[];for(;++c<l;){const p=e.children[c],g={},x=o?o[c]:void 0;x&&(g.align=x);let b={type:"element",tagName:s,properties:g,children:[]};p&&(b.children=t.all(p),t.patch(p,b),b=t.applyData(p,b)),d.push(b)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,f),t.applyData(e,f)}function Ane(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const aR=9,iR=32;function Ene(t){const e=String(t),n=/\r?\n|\r/g;let a=n.exec(e),i=0;const s=[];for(;a;)s.push(sR(e.slice(i,a.index),i>0,!0),a[0]),i=a.index+a[0].length,a=n.exec(e);return s.push(sR(e.slice(i),i>0,!1)),s.join("")}function sR(t,e,n){let a=0,i=t.length;if(e){let s=t.codePointAt(a);for(;s===aR||s===iR;)a++,s=t.codePointAt(a)}if(n){let s=t.codePointAt(i-1);for(;s===aR||s===iR;)i--,s=t.codePointAt(i-1)}return i>a?t.slice(a,i):""}function Pne(t,e){const n={type:"text",value:Ene(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Dne(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const One={blockquote:lne,break:cne,code:une,delete:dne,emphasis:hne,footnoteReference:fne,heading:pne,html:mne,imageReference:gne,image:yne,inlineCode:xne,linkReference:vne,link:bne,listItem:jne,list:Nne,paragraph:Sne,root:_ne,strong:Cne,table:Tne,tableCell:Ane,tableRow:kne,text:Pne,thematicBreak:Dne,toml:yj,yaml:yj,definition:yj,footnoteDefinition:yj};function yj(){}const Pq=-1,WN=0,jv=1,bw=2,aO=3,iO=4,sO=5,oO=6,Dq=7,Oq=8,oR=typeof self=="object"?self:globalThis,Mne=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),a=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case WN:case Pq:return n(o,i);case jv:{const l=n([],i);for(const c of o)l.push(a(c));return l}case bw:{const l=n({},i);for(const[c,d]of o)l[a(c)]=a(d);return l}case aO:return n(new Date(o),i);case iO:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case sO:{const l=n(new Map,i);for(const[c,d]of o)l.set(a(c),a(d));return l}case oO:{const l=n(new Set,i);for(const c of o)l.add(a(c));return l}case Dq:{const{name:l,message:c}=o;return n(new oR[l](c),i)}case Oq:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new oR[s](o),i)};return a},lR=t=>Mne(new Map,t)(0),ym="",{toString:Ine}={},{keys:Rne}=Object,Yx=t=>{const e=typeof t;if(e!=="object"||!t)return[WN,e];const n=Ine.call(t).slice(8,-1);switch(n){case"Array":return[jv,ym];case"Object":return[bw,ym];case"Date":return[aO,ym];case"RegExp":return[iO,ym];case"Map":return[sO,ym];case"Set":return[oO,ym];case"DataView":return[jv,n]}return n.includes("Array")?[jv,n]:n.includes("Error")?[Dq,n]:[bw,n]},xj=([t,e])=>t===WN&&(e==="function"||e==="symbol"),Lne=(t,e,n,a)=>{const i=(o,l)=>{const c=a.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=Yx(o);switch(l){case WN:{let f=o;switch(c){case"bigint":l=Oq,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return i([Pq],o)}return i([l,f],o)}case jv:{if(c){let g=o;return c==="DataView"?g=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(g=new Uint8Array(o)),i([c,[...g]],o)}const f=[],p=i([l,f],o);for(const g of o)f.push(s(g));return p}case bw:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],p=i([l,f],o);for(const g of Rne(o))(t||!xj(Yx(o[g])))&&f.push([s(g),s(o[g])]);return p}case aO:return i([l,o.toISOString()],o);case iO:{const{source:f,flags:p}=o;return i([l,{source:f,flags:p}],o)}case sO:{const f=[],p=i([l,f],o);for(const[g,x]of o)(t||!(xj(Yx(g))||xj(Yx(x))))&&f.push([s(g),s(x)]);return p}case oO:{const f=[],p=i([l,f],o);for(const g of o)(t||!xj(Yx(g)))&&f.push(s(g));return p}}const{message:d}=o;return i([l,{name:c,message:d}],o)};return s},cR=(t,{json:e,lossy:n}={})=>{const a=[];return Lne(!(e||n),!!e,new Map,a)(t),a},jw=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?lR(cR(t,e)):structuredClone(t):(t,e)=>lR(cR(t,e));function Fne(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function $ne(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Bne(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Fne,a=t.options.footnoteBackLabel||$ne,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[c]);if(!d)continue;const f=t.all(d),p=String(d.identifier).toUpperCase(),g=Bg(p.toLowerCase());let x=0;const b=[],j=t.footnoteCounts.get(p);for(;j!==void 0&&++x<=j;){b.length>0&&b.push({type:"text",value:" "});let T=typeof n=="string"?n:n(c,x);typeof T=="string"&&(T={type:"text",value:T}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof a=="string"?a:a(c,x),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const S=f[f.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const T=S.children[S.children.length-1];T&&T.type==="text"?T.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...b)}else f.push(...b);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(f,!0)};t.patch(d,_),l.push(_)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...jw(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const KN=function(t){if(t==null)return Vne;if(typeof t=="function")return YN(t);if(typeof t=="object")return Array.isArray(t)?zne(t):qne(t);if(typeof t=="string")return Une(t);throw new Error("Expected function, string, or object as test")};function zne(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=KN(t[n]);return YN(a);function a(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function qne(t){const e=t;return YN(n);function n(a){const i=a;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Une(t){return YN(e);function e(n){return n&&n.type===t}}function YN(t){return e;function e(n,a,i){return!!(Hne(n)&&t.call(this,n,typeof a=="number"?a:void 0,i||void 0))}}function Vne(){return!0}function Hne(t){return t!==null&&typeof t=="object"&&"type"in t}const Mq=[],Gne=!0,DE=!1,Wne="skip";function Iq(t,e,n,a){let i;typeof e=="function"&&typeof n!="function"?(a=n,n=e):i=e;const s=KN(i),o=a?-1:1;l(t,void 0,[])();function l(c,d,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const x=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=Mq,b,j,S;if((!e||s(c,d,f[f.length-1]||void 0))&&(x=Kne(n(c,f)),x[0]===DE))return x;if("children"in c&&c.children){const _=c;if(_.children&&x[0]!==Wne)for(j=(a?_.children.length:-1)+o,S=f.concat(_);j>-1&&j<_.children.length;){const T=_.children[j];if(b=l(T,j,S)(),b[0]===DE)return b;j=typeof b[1]=="number"?b[1]:j+o}}return x}}}function Kne(t){return Array.isArray(t)?t:typeof t=="number"?[Gne,t]:t==null?Mq:[t]}function lO(t,e,n,a){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=a),Iq(t,s,l,i);function l(c,d){const f=d[d.length-1],p=f?f.children.indexOf(c):void 0;return o(c,p,f)}}const OE={}.hasOwnProperty,Yne={};function Qne(t,e){const n=e||Yne,a=new Map,i=new Map,s=new Map,o={...One,...n.handlers},l={all:d,applyData:Jne,definitionById:a,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:Xne,wrap:ere};return lO(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?a:i,g=String(f.identifier).toUpperCase();p.has(g)||p.set(g,f)}}),l;function c(f,p){const g=f.type,x=l.handlers[g];if(OE.call(l.handlers,g)&&x)return x(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in f){const{children:j,...S}=f,_=jw(S);return _.children=l.all(f),_}return jw(f)}return(l.options.unknownHandler||Zne)(l,f,p)}function d(f){const p=[];if("children"in f){const g=f.children;let x=-1;for(;++x<g.length;){const b=l.one(g[x],f);if(b){if(x&&g[x-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=uR(b.value)),!Array.isArray(b)&&b.type==="element")){const j=b.children[0];j&&j.type==="text"&&(j.value=uR(j.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function Xne(t,e){t.position&&(e.position=$Z(t))}function Jne(t,e){let n=e;if(t&&t.data){const a=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof a=="string")if(n.type==="element")n.tagName=a;else{const o="children"in n?n.children:[n];n={type:"element",tagName:a,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,jw(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Zne(t,e){const n=e.data||{},a="value"in e&&!(OE.call(n,"hProperties")||OE.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function ere(t,e){const n=[];let a=-1;for(e&&n.push({type:"text",value:`
`});++a<t.length;)a&&n.push({type:"text",value:`
`}),n.push(t[a]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function uR(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function dR(t,e){const n=Qne(t,e),a=n.one(t,void 0),i=Bne(n),s=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function tre(t,e){return t&&"run"in t?async function(n,a){const i=dR(n,{file:a,...e});await t.run(i,a)}:function(n,a){return dR(n,{file:a,...t||e})}}function hR(t){if(t)throw t}var hC,fR;function nre(){if(fR)return hC;fR=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var f=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!f&&!p)return!1;var g;for(g in d);return typeof g>"u"||t.call(d,g)},o=function(d,f){n&&f.name==="__proto__"?n(d,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):d[f.name]=f.newValue},l=function(d,f){if(f==="__proto__")if(t.call(d,f)){if(a)return a(d,f).value}else return;return d[f]};return hC=function c(){var d,f,p,g,x,b,j=arguments[0],S=1,_=arguments.length,T=!1;for(typeof j=="boolean"&&(T=j,j=arguments[1]||{},S=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});S<_;++S)if(d=arguments[S],d!=null)for(f in d)p=l(j,f),g=l(d,f),j!==g&&(T&&g&&(s(g)||(x=i(g)))?(x?(x=!1,b=p&&i(p)?p:[]):b=p&&s(p)?p:{},o(j,{name:f,newValue:c(T,b,g)})):typeof g<"u"&&o(j,{name:f,newValue:g}));return j},hC}var rre=nre();const fC=Hn(rre);function ME(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function are(){const t=[],e={run:n,use:a};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...d){const f=t[++s];let p=-1;if(c){o(c);return}for(;++p<i.length;)(d[p]===null||d[p]===void 0)&&(d[p]=i[p]);i=d,f?ire(f,l)(...d):o(null,...d)}}function a(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function ire(t,e){let n;return a;function a(...o){const l=t.length>o.length;let c;l&&o.push(i);try{c=t.apply(this,o)}catch(d){const f=d;if(l&&n)throw f;return i(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}const _l={basename:sre,dirname:ore,extname:lre,join:cre,sep:"/"};function sre(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ib(t);let n=0,a=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1);return a<0?"":t.slice(n,a)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(a=i):(l=-1,a=o));return n===a?a=o:a<0&&(a=t.length),t.slice(n,a)}function ore(t){if(Ib(t),t.length===0)return".";let e=-1,n=t.length,a;for(;--n;)if(t.codePointAt(n)===47){if(a){e=n;break}}else a||(a=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function lre(t){Ib(t);let e=t.length,n=-1,a=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){a=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===a+1?"":t.slice(i,n)}function cre(...t){let e=-1,n;for(;++e<t.length;)Ib(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":ure(n)}function ure(t){Ib(t);const e=t.codePointAt(0)===47;let n=dre(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function dre(t,e){let n="",a=0,i=-1,s=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||a!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",a=0):(n=n.slice(0,c),a=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",a=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",a=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),a=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Ib(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const hre={cwd:fre};function fre(){return"/"}function IE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function pre(t){if(typeof t=="string")t=new URL(t);else if(!IE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return mre(t)}function mre(t){if(t.hostname!==""){const a=new TypeError('File URL host must be "localhost" or empty on darwin');throw a.code="ERR_INVALID_FILE_URL_HOST",a}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const a=e.codePointAt(n+2);if(a===70||a===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const pC=["history","path","basename","stem","extname","dirname"];class Rq{constructor(e){let n;e?IE(e)?n={path:e}:typeof e=="string"||gre(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":hre.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let a=-1;for(;++a<pC.length;){const s=pC[a];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)pC.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?_l.basename(this.path):void 0}set basename(e){gC(e,"basename"),mC(e,"basename"),this.path=_l.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?_l.dirname(this.path):void 0}set dirname(e){pR(this.basename,"dirname"),this.path=_l.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?_l.extname(this.path):void 0}set extname(e){if(mC(e,"extname"),pR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_l.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){IE(e)&&(e=pre(e)),gC(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?_l.basename(this.path,this.extname):void 0}set stem(e){gC(e,"stem"),mC(e,"stem"),this.path=_l.join(this.dirname||"",e+(this.extname||""))}fail(e,n,a){const i=this.message(e,n,a);throw i.fatal=!0,i}info(e,n,a){const i=this.message(e,n,a);return i.fatal=void 0,i}message(e,n,a){const i=new yi(e,n,a);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function mC(t,e){if(t&&t.includes(_l.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+_l.sep+"`")}function gC(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function pR(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function gre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const yre=function(t){const a=this.constructor.prototype,i=a[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,a),s},xre={}.hasOwnProperty;class cO extends yre{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=are()}copy(){const e=new cO;let n=-1;for(;++n<this.attachers.length;){const a=this.attachers[n];e.use(...a)}return e.data(fC(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(vC("data",this.frozen),this.namespace[e]=n,this):xre.call(this.namespace,e)&&this.namespace[e]||void 0:e?(vC("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...a]=this.attachers[this.freezeIndex];if(a[0]===!1)continue;a[0]===!0&&(a[0]=void 0);const i=n.call(e,...a);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=vj(e),a=this.parser||this.Parser;return yC("parse",a),a(String(n),n)}process(e,n){const a=this;return this.freeze(),yC("process",this.parser||this.Parser),xC("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=vj(e),c=a.parse(l);a.run(c,l,function(f,p,g){if(f||!p||!g)return d(f);const x=p,b=a.stringify(x,g);jre(b)?g.value=b:g.result=b,d(f,g)});function d(f,p){f||!p?o(f):s?s(p):n(void 0,p)}}}processSync(e){let n=!1,a;return this.freeze(),yC("processSync",this.parser||this.Parser),xC("processSync",this.compiler||this.Compiler),this.process(e,i),gR("processSync","process",n),a;function i(s,o){n=!0,hR(s),a=o}}run(e,n,a){mR(e),this.freeze();const i=this.transformers;return!a&&typeof n=="function"&&(a=n,n=void 0),a?s(void 0,a):new Promise(s);function s(o,l){const c=vj(n);i.run(e,c,d);function d(f,p,g){const x=p||e;f?l(f):o?o(x):a(void 0,x,g)}}}runSync(e,n){let a=!1,i;return this.run(e,n,s),gR("runSync","run",a),i;function s(o,l){hR(o),i=l,a=!0}}stringify(e,n){this.freeze();const a=vj(n),i=this.compiler||this.Compiler;return xC("stringify",i),mR(e),i(e,a)}use(e,...n){const a=this.attachers,i=this.namespace;if(vC("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[f,...p]=d;c(f,p)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=fC(!0,i.settings,d.settings))}function l(d){let f=-1;if(d!=null)if(Array.isArray(d))for(;++f<d.length;){const p=d[f];s(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,f){let p=-1,g=-1;for(;++p<a.length;)if(a[p][0]===d){g=p;break}if(g===-1)a.push([d,...f]);else if(f.length>0){let[x,...b]=f;const j=a[g][1];ME(j)&&ME(x)&&(x=fC(!0,j,x)),a[g]=[d,x,...b]}}}}const vre=new cO().freeze();function yC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function xC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function vC(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function mR(t){if(!ME(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function gR(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function vj(t){return bre(t)?t:new Rq(t)}function bre(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function jre(t){return typeof t=="string"||wre(t)}function wre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Nre="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",yR=[],xR={allowDangerousHtml:!0},Sre=/^(https?|ircs?|mailto|xmpp)$/i,_re=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Nf(t){const e=Cre(t),n=Tre(t);return kre(e.runSync(e.parse(n),n),t)}function Cre(t){const e=t.rehypePlugins||yR,n=t.remarkPlugins||yR,a=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...xR}:xR;return vre().use(one).use(n).use(tre,a).use(e)}function Tre(t){const e=t.children||"",n=new Rq;return typeof e=="string"&&(n.value=e),n}function kre(t,e){const n=e.allowedElements,a=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||Are;for(const f of _re)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+Nre+f.id,void 0);return lO(t,d),VZ(t,{Fragment:r.Fragment,components:i,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function d(f,p,g){if(f.type==="raw"&&g&&typeof p=="number")return o?g.children.splice(p,1):g.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let x;for(x in cC)if(Object.hasOwn(cC,x)&&Object.hasOwn(f.properties,x)){const b=f.properties[x],j=cC[x];(j===null||j.includes(f.tagName))&&(f.properties[x]=c(String(b||""),x,f))}}if(f.type==="element"){let x=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!x&&a&&typeof p=="number"&&(x=!a(f,p,g)),x&&g&&typeof p=="number")return l&&f.children?g.children.splice(p,1,...f.children):g.children.splice(p,1),p}}}function Are(t){const e=t.indexOf(":"),n=t.indexOf("?"),a=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||a!==-1&&e>a||Sre.test(t.slice(0,e))?t:""}function vR(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let a=0,i=n.indexOf(e);for(;i!==-1;)a++,i=n.indexOf(e,i+e.length);return a}function Ere(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Pre(t,e,n){const i=KN((n||{}).ignore||[]),s=Dre(e);let o=-1;for(;++o<s.length;)Iq(t,"text",l);function l(d,f){let p=-1,g;for(;++p<f.length;){const x=f[p],b=g?g.children:void 0;if(i(x,b?b.indexOf(x):void 0,g))return;g=x}if(g)return c(d,f)}function c(d,f){const p=f[f.length-1],g=s[o][0],x=s[o][1];let b=0;const S=p.children.indexOf(d);let _=!1,T=[];g.lastIndex=0;let C=g.exec(d.value);for(;C;){const E=C.index,k={index:C.index,input:C.input,stack:[...f,d]};let P=x(...C,k);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?g.lastIndex=E+1:(b!==E&&T.push({type:"text",value:d.value.slice(b,E)}),Array.isArray(P)?T.push(...P):P&&T.push(P),b=E+C[0].length,_=!0),!g.global)break;C=g.exec(d.value)}return _?(b<d.value.length&&T.push({type:"text",value:d.value.slice(b)}),p.children.splice(S,1,...T)):T=[d],S+T.length}}function Dre(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let a=-1;for(;++a<n.length;){const i=n[a];e.push([Ore(i[0]),Mre(i[1])])}return e}function Ore(t){return typeof t=="string"?new RegExp(Ere(t),"g"):t}function Mre(t){return typeof t=="function"?t:function(){return t}}const bC="phrasing",jC=["autolink","link","image","label"];function Ire(){return{transforms:[qre],enter:{literalAutolink:Lre,literalAutolinkEmail:wC,literalAutolinkHttp:wC,literalAutolinkWww:wC},exit:{literalAutolink:zre,literalAutolinkEmail:Bre,literalAutolinkHttp:Fre,literalAutolinkWww:$re}}}function Rre(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:bC,notInConstruct:jC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:bC,notInConstruct:jC},{character:":",before:"[ps]",after:"\\/",inConstruct:bC,notInConstruct:jC}]}}function Lre(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function wC(t){this.config.enter.autolinkProtocol.call(this,t)}function Fre(t){this.config.exit.autolinkProtocol.call(this,t)}function $re(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Bre(t){this.config.exit.autolinkEmail.call(this,t)}function zre(t){this.exit(t)}function qre(t){Pre(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Ure],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Vre]],{ignore:["link","linkReference"]})}function Ure(t,e,n,a,i){let s="";if(!Lq(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Hre(n)))return!1;const o=Gre(n+a);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function Vre(t,e,n,a){return!Lq(a,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Hre(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Gre(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],a=n.indexOf(")");const i=vR(t,"(");let s=vR(t,")");for(;a!==-1&&i>s;)t+=n.slice(0,a+1),n=n.slice(a+1),a=n.indexOf(")"),s++;return[t,n]}function Lq(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||wf(n)||HN(n))&&(!e||n!==47)}Fq.peek=tae;function Wre(){this.buffer()}function Kre(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Yre(){this.buffer()}function Qre(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Xre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Bo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Jre(t){this.exit(t)}function Zre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Bo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function eae(t){this.exit(t)}function tae(){return"["}function Fq(t,e,n,a){const i=n.createTracker(a);let s=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=i.move("]"),s}function nae(){return{enter:{gfmFootnoteCallString:Wre,gfmFootnoteCall:Kre,gfmFootnoteDefinitionLabelString:Yre,gfmFootnoteDefinition:Qre},exit:{gfmFootnoteCallString:Xre,gfmFootnoteCall:Jre,gfmFootnoteDefinitionLabelString:Zre,gfmFootnoteDefinition:eae}}}function rae(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Fq},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(a,i,s,o){const l=s.createTracker(o);let c=l.move("[^");const d=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(a),{before:c,after:"]"})),f(),c+=l.move("]:"),a.children&&a.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(a,l.current()),e?$q:aae))),d(),c}}function aae(t,e,n){return e===0?t:$q(t,e,n)}function $q(t,e,n){return(n?"":"    ")+t}const iae=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Bq.peek=uae;function sae(){return{canContainEols:["delete"],enter:{strikethrough:lae},exit:{strikethrough:cae}}}function oae(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:iae}],handlers:{delete:Bq}}}function lae(t){this.enter({type:"delete",children:[]},t)}function cae(t){this.exit(t)}function Bq(t,e,n,a){const i=n.createTracker(a),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function uae(){return"~"}function dae(t){return t.length}function hae(t,e){const n=e||{},a=(n.align||[]).concat(),i=n.stringLength||dae,s=[],o=[],l=[],c=[];let d=0,f=-1;for(;++f<t.length;){const j=[],S=[];let _=-1;for(t[f].length>d&&(d=t[f].length);++_<t[f].length;){const T=fae(t[f][_]);if(n.alignDelimiters!==!1){const C=i(T);S[_]=C,(c[_]===void 0||C>c[_])&&(c[_]=C)}j.push(T)}o[f]=j,l[f]=S}let p=-1;if(typeof a=="object"&&"length"in a)for(;++p<d;)s[p]=bR(a[p]);else{const j=bR(a);for(;++p<d;)s[p]=j}p=-1;const g=[],x=[];for(;++p<d;){const j=s[p];let S="",_="";j===99?(S=":",_=":"):j===108?S=":":j===114&&(_=":");let T=n.alignDelimiters===!1?1:Math.max(1,c[p]-S.length-_.length);const C=S+"-".repeat(T)+_;n.alignDelimiters!==!1&&(T=S.length+T+_.length,T>c[p]&&(c[p]=T),x[p]=T),g[p]=C}o.splice(1,0,g),l.splice(1,0,x),f=-1;const b=[];for(;++f<o.length;){const j=o[f],S=l[f];p=-1;const _=[];for(;++p<d;){const T=j[p]||"";let C="",E="";if(n.alignDelimiters!==!1){const k=c[p]-(S[p]||0),P=s[p];P===114?C=" ".repeat(k):P===99?k%2?(C=" ".repeat(k/2+.5),E=" ".repeat(k/2-.5)):(C=" ".repeat(k/2),E=C):E=" ".repeat(k)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(C),_.push(T),n.alignDelimiters!==!1&&_.push(E),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&_.push("|")}b.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return b.join(`
`)}function fae(t){return t==null?"":String(t)}function bR(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function pae(t,e,n,a){const i=n.enter("blockquote"),s=n.createTracker(a);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),mae);return i(),o}function mae(t,e,n){return">"+(n?"":" ")+t}function gae(t,e){return jR(t,e.inConstruct,!0)&&!jR(t,e.notInConstruct,!1)}function jR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let a=-1;for(;++a<e.length;)if(t.includes(e[a]))return!0;return!1}function wR(t,e,n,a){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&gae(n.stack,n.unsafe[i]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function yae(t,e){const n=String(t);let a=n.indexOf(e),i=a,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===i?++s>o&&(o=s):s=1,i=a+e.length,a=n.indexOf(e,i);return o}function xae(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function vae(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function bae(t,e,n,a){const i=vae(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(xae(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(s,jae);return p(),g}const l=n.createTracker(a),c=i.repeat(Math.max(yae(s,i)+1,3)),d=n.enter("codeFenced");let f=l.move(c);if(t.lang){const p=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),d(),f}function jae(t,e,n){return(n?"":"    ")+t}function uO(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function wae(t,e,n,a){const i=uO(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(a);let d=c.move("[");return d+=c.move(n.safe(n.associationId(t),{before:d,after:"]",...c.current()})),d+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+i),d+=c.move(n.safe(t.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),o(),d}function Nae(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Mv(t){return"&#x"+t.toString(16).toUpperCase()+";"}function ww(t,e,n){const a=ig(t),i=ig(e);return a===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:a===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}zq.peek=Sae;function zq(t,e,n,a){const i=Nae(n),s=n.enter("emphasis"),o=n.createTracker(a),l=o.move(i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),f=ww(a.before.charCodeAt(a.before.length-1),d,i);f.inside&&(c=Mv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),g=ww(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Mv(p));const x=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function Sae(t,e,n){return n.options.emphasis||"*"}function _ae(t,e){let n=!1;return lO(t,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return n=!0,DE}),!!((!t.depth||t.depth<3)&&tO(t)&&(e.options.setext||n))}function Cae(t,e,n,a){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(a);if(_ae(t,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return p(),f(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(d)&&(d=Mv(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,n.options.closeAtx&&(d+=" "+o),c(),l(),d}qq.peek=Tae;function qq(t){return t.value||""}function Tae(){return"<"}Uq.peek=kae;function Uq(t,e,n,a){const i=uO(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(a);let d=c.move("![");return d+=c.move(n.safe(t.alt,{before:d,after:"]",...c.current()})),d+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+i),d+=c.move(n.safe(t.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),d+=c.move(")"),o(),d}function kae(){return"!"}Vq.peek=Aae;function Vq(t,e,n,a){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("![");const d=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!d||d!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Aae(){return"!"}Hq.peek=Eae;function Hq(t,e,n){let a=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(a);)i+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(a);){let d=c.index;a.charCodeAt(d)===10&&a.charCodeAt(d-1)===13&&d--,a=a.slice(0,d)+" "+a.slice(c.index+1)}}return i+a+i}function Eae(){return"`"}function Gq(t,e){const n=tO(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Wq.peek=Pae;function Wq(t,e,n,a){const i=uO(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(a);let l,c;if(Gq(t,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(t,{before:p,after:">",...o.current()})),p+=o.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let d=o.move("[");return d+=o.move(n.containerPhrasing(t,{before:d,after:"](",...o.current()})),d+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(n.safe(t.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(c=n.enter("destinationRaw"),d+=o.move(n.safe(t.url,{before:d,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),d+=o.move(" "+i),d+=o.move(n.safe(t.title,{before:d,after:i,...o.current()})),d+=o.move(i),c()),d+=o.move(")"),l(),d}function Pae(t,e,n){return Gq(t,n)?"<":"["}Kq.peek=Dae;function Kq(t,e,n,a){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("[");const d=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!d||d!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Dae(){return"["}function dO(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Oae(t){const e=dO(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Mae(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Yq(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Iae(t,e,n,a){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?Mae(n):dO(n);const l=t.ordered?o==="."?")":".":Oae(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Yq(n)===o&&f){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const d=n.containerFlow(t,a);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),d}function Rae(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Lae(t,e,n,a){const i=Rae(n);let s=n.bulletCurrent||dO(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(a);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,l.current()),f);return c(),d;function f(p,g,x){return g?(x?"":" ".repeat(o))+p:(x?s:s+" ".repeat(o-s.length))+p}}function Fae(t,e,n,a){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,a);return s(),i(),o}const $ae=KN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Bae(t,e,n,a){return(t.children.some(function(o){return $ae(o)})?n.containerPhrasing:n.containerFlow).call(n,t,a)}function zae(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Qq.peek=qae;function Qq(t,e,n,a){const i=zae(n),s=n.enter("strong"),o=n.createTracker(a),l=o.move(i+i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),f=ww(a.before.charCodeAt(a.before.length-1),d,i);f.inside&&(c=Mv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),g=ww(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Mv(p));const x=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function qae(t,e,n){return n.options.strong||"*"}function Uae(t,e,n,a){return n.safe(t.value,a)}function Vae(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Hae(t,e,n){const a=(Yq(n)+(n.options.ruleSpaces?" ":"")).repeat(Vae(n));return n.options.ruleSpaces?a.slice(0,-1):a}const Xq={blockquote:pae,break:wR,code:bae,definition:wae,emphasis:zq,hardBreak:wR,heading:Cae,html:qq,image:Uq,imageReference:Vq,inlineCode:Hq,link:Wq,linkReference:Kq,list:Iae,listItem:Lae,paragraph:Fae,root:Bae,strong:Qq,text:Uae,thematicBreak:Hae};function Gae(){return{enter:{table:Wae,tableData:NR,tableHeader:NR,tableRow:Yae},exit:{codeText:Qae,table:Kae,tableData:NC,tableHeader:NC,tableRow:NC}}}function Wae(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Kae(t){this.exit(t),this.data.inTable=void 0}function Yae(t){this.enter({type:"tableRow",children:[]},t)}function NC(t){this.exit(t)}function NR(t){this.enter({type:"tableCell",children:[]},t)}function Qae(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Xae));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Xae(t,e){return e==="|"?e:t}function Jae(t){const e=t||{},n=e.tableCellPadding,a=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:o,tableCell:c,tableRow:l}};function o(x,b,j,S){return d(f(x,j,S),x.align)}function l(x,b,j,S){const _=p(x,j,S),T=d([_]);return T.slice(0,T.indexOf(`
`))}function c(x,b,j,S){const _=j.enter("tableCell"),T=j.enter("phrasing"),C=j.containerPhrasing(x,{...S,before:s,after:s});return T(),_(),C}function d(x,b){return hae(x,{align:b,alignDelimiters:a,padding:n,stringLength:i})}function f(x,b,j){const S=x.children;let _=-1;const T=[],C=b.enter("table");for(;++_<S.length;)T[_]=p(S[_],b,j);return C(),T}function p(x,b,j){const S=x.children;let _=-1;const T=[],C=b.enter("tableRow");for(;++_<S.length;)T[_]=c(S[_],x,b,j);return C(),T}function g(x,b,j){let S=Xq.inlineCode(x,b,j);return j.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function Zae(){return{exit:{taskListCheckValueChecked:SR,taskListCheckValueUnchecked:SR,paragraph:tie}}}function eie(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:nie}}}function SR(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function tie(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const a=n.children[0];if(a&&a.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const l=i[s];if(l.type==="paragraph"){o=l;break}}o===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}}this.exit(t)}function nie(t,e,n,a){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(a);s&&l.move(o);let c=Xq.listItem(t,e,n,{...a,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),c;function d(f){return f+o}}function rie(){return[Ire(),nae(),sae(),Gae(),Zae()]}function aie(t){return{extensions:[Rre(),rae(t),oae(),Jae(t),eie()]}}const iie={tokenize:die,partial:!0},Jq={tokenize:hie,partial:!0},Zq={tokenize:fie,partial:!0},eU={tokenize:pie,partial:!0},sie={tokenize:mie,partial:!0},tU={name:"wwwAutolink",tokenize:cie,previous:rU},nU={name:"protocolAutolink",tokenize:uie,previous:aU},Vc={name:"emailAutolink",tokenize:lie,previous:iU},zl={};function oie(){return{text:zl}}let $h=48;for(;$h<123;)zl[$h]=Vc,$h++,$h===58?$h=65:$h===91&&($h=97);zl[43]=Vc;zl[45]=Vc;zl[46]=Vc;zl[95]=Vc;zl[72]=[Vc,nU];zl[104]=[Vc,nU];zl[87]=[Vc,tU];zl[119]=[Vc,tU];function lie(t,e,n){const a=this;let i,s;return o;function o(p){return!RE(p)||!iU.call(a,a.previous)||hO(a.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(p))}function l(p){return RE(p)?(t.consume(p),l):p===64?(t.consume(p),c):n(p)}function c(p){return p===46?t.check(sie,f,d)(p):p===45||p===95||mi(p)?(s=!0,t.consume(p),c):f(p)}function d(p){return t.consume(p),i=!0,c}function f(p){return s&&i&&Ri(a.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function cie(t,e,n){const a=this;return i;function i(o){return o!==87&&o!==119||!rU.call(a,a.previous)||hO(a.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(iie,t.attempt(Jq,t.attempt(Zq,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function uie(t,e,n){const a=this;let i="",s=!1;return o;function o(p){return(p===72||p===104)&&aU.call(a,a.previous)&&!hO(a.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),t.consume(p),l):n(p)}function l(p){if(Ri(p)&&i.length<5)return i+=String.fromCodePoint(p),t.consume(p),l;if(p===58){const g=i.toLowerCase();if(g==="http"||g==="https")return t.consume(p),c}return n(p)}function c(p){return p===47?(t.consume(p),s?d:(s=!0,c)):n(p)}function d(p){return p===null||vw(p)||kr(p)||wf(p)||HN(p)?n(p):t.attempt(Jq,t.attempt(Zq,f),n)(p)}function f(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function die(t,e,n){let a=0;return i;function i(o){return(o===87||o===119)&&a<3?(a++,t.consume(o),i):o===46&&a===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function hie(t,e,n){let a,i,s;return o;function o(d){return d===46||d===95?t.check(eU,c,l)(d):d===null||kr(d)||wf(d)||d!==45&&HN(d)?c(d):(s=!0,t.consume(d),o)}function l(d){return d===95?a=!0:(i=a,a=void 0),t.consume(d),o}function c(d){return i||a||!s?n(d):e(d)}}function fie(t,e){let n=0,a=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&a<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(eU,e,s)(o):o===null||kr(o)||wf(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&a++,t.consume(o),i}}function pie(t,e,n){return a;function a(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),a):l===38?(t.consume(l),s):l===93?(t.consume(l),i):l===60||l===null||kr(l)||wf(l)?e(l):n(l)}function i(l){return l===null||l===40||l===91||kr(l)||wf(l)?e(l):a(l)}function s(l){return Ri(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),a):Ri(l)?(t.consume(l),o):n(l)}}function mie(t,e,n){return a;function a(s){return t.consume(s),i}function i(s){return mi(s)?n(s):e(s)}}function rU(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||kr(t)}function aU(t){return!Ri(t)}function iU(t){return!(t===47||RE(t))}function RE(t){return t===43||t===45||t===46||t===95||mi(t)}function hO(t){let e=t.length,n=!1;for(;e--;){const a=t[e][1];if((a.type==="labelLink"||a.type==="labelImage")&&!a._balanced){n=!0;break}if(a._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const gie={tokenize:Sie,partial:!0};function yie(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:jie,continuation:{tokenize:wie},exit:Nie}},text:{91:{name:"gfmFootnoteCall",tokenize:bie},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:xie,resolveTo:vie}}}}function xie(t,e,n){const a=this;let i=a.events.length;const s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let o;for(;i--;){const c=a.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const d=Bo(a.sliceSerialize({start:o.end,end:a.now()}));return d.codePointAt(0)!==94||!s.includes(d.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function vie(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const a={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",a,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",a,e]];return t.splice(n,t.length-n+1,...l),t}function bie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s=0,o;return l;function l(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(s>999||p===93&&!o||p===null||p===91||kr(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return i.includes(Bo(a.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return kr(p)||(o=!0),s++,t.consume(p),p===92?f:d}function f(p){return p===91||p===92||p===93?(t.consume(p),s++,d):d(p)}}function jie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(b){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(b){return b===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(b)}function f(b){if(o>999||b===93&&!l||b===null||b===91||kr(b))return n(b);if(b===93){t.exit("chunkString");const j=t.exit("gfmFootnoteDefinitionLabelString");return s=Bo(a.sliceSerialize(j)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return kr(b)||(l=!0),o++,t.consume(b),b===92?p:f}function p(b){return b===91||b===92||b===93?(t.consume(b),o++,f):f(b)}function g(b){return b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),i.includes(s)||i.push(s),Gn(t,x,"gfmFootnoteDefinitionWhitespace")):n(b)}function x(b){return e(b)}}function wie(t,e,n){return t.check(Mb,e,t.attempt(gie,e,n))}function Nie(t){t.exit("gfmFootnoteDefinition")}function Sie(t,e,n){const a=this;return Gn(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function _ie(t){let n=(t||{}).singleTilde;const a={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}};function i(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let d=c;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[c][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[c][1].start)},g=[["enter",f,l],["enter",o[d][1],l],["exit",o[d][1],l],["enter",p,l]],x=l.parser.constructs.insideSpan.null;x&&Ms(g,g.length,0,GN(x,o.slice(d+1,c),l)),Ms(g,g.length,0,[["exit",p,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Ms(o,d-1,c-d+3,g),c=d+g.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const d=this.previous,f=this.events;let p=0;return g;function g(b){return d===126&&f[f.length-1][1].type!=="characterEscape"?c(b):(o.enter("strikethroughSequenceTemporary"),x(b))}function x(b){const j=ig(d);if(b===126)return p>1?c(b):(o.consume(b),p++,x);if(p<2&&!n)return c(b);const S=o.exit("strikethroughSequenceTemporary"),_=ig(b);return S._open=!_||_===2&&!!j,S._close=!j||j===2&&!!_,l(b)}}}class Cie{constructor(){this.map=[]}add(e,n,a){Tie(this,e,n,a)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const a=[];for(;n>0;)n-=1,a.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];a.push(e.slice()),e.length=0;let i=a.pop();for(;i;){for(const s of i)e.push(s);i=a.pop()}this.map.length=0}}function Tie(t,e,n,a){let i=0;if(!(n===0&&a.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...a);return}i+=1}t.map.push([e,n,a])}}function kie(t,e){let n=!1;const a=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&a.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=a.length-1;a[s]=a[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return a}function Aie(){return{flow:{null:{name:"table",tokenize:Eie,resolveAll:Pie}}}}function Eie(t,e,n){const a=this;let i=0,s=0,o;return l;function l(q){let F=a.events.length-1;for(;F>-1;){const K=a.events[F][1].type;if(K==="lineEnding"||K==="linePrefix")F--;else break}const V=F>-1?a.events[F][1].type:null,H=V==="tableHead"||V==="tableRow"?P:c;return H===P&&a.parser.lazy[a.now().line]?n(q):H(q)}function c(q){return t.enter("tableHead"),t.enter("tableRow"),d(q)}function d(q){return q===124||(o=!0,s+=1),f(q)}function f(q){return q===null?n(q):Qt(q)?s>1?(s=0,a.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(q),t.exit("lineEnding"),x):n(q):Mn(q)?Gn(t,f,"whitespace")(q):(s+=1,o&&(o=!1,i+=1),q===124?(t.enter("tableCellDivider"),t.consume(q),t.exit("tableCellDivider"),o=!0,f):(t.enter("data"),p(q)))}function p(q){return q===null||q===124||kr(q)?(t.exit("data"),f(q)):(t.consume(q),q===92?g:p)}function g(q){return q===92||q===124?(t.consume(q),p):p(q)}function x(q){return a.interrupt=!1,a.parser.lazy[a.now().line]?n(q):(t.enter("tableDelimiterRow"),o=!1,Mn(q)?Gn(t,b,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):b(q))}function b(q){return q===45||q===58?S(q):q===124?(o=!0,t.enter("tableCellDivider"),t.consume(q),t.exit("tableCellDivider"),j):k(q)}function j(q){return Mn(q)?Gn(t,S,"whitespace")(q):S(q)}function S(q){return q===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(q),t.exit("tableDelimiterMarker"),_):q===45?(s+=1,_(q)):q===null||Qt(q)?E(q):k(q)}function _(q){return q===45?(t.enter("tableDelimiterFiller"),T(q)):k(q)}function T(q){return q===45?(t.consume(q),T):q===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(q),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C(q))}function C(q){return Mn(q)?Gn(t,E,"whitespace")(q):E(q)}function E(q){return q===124?b(q):q===null||Qt(q)?!o||i!==s?k(q):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(q)):k(q)}function k(q){return n(q)}function P(q){return t.enter("tableRow"),I(q)}function I(q){return q===124?(t.enter("tableCellDivider"),t.consume(q),t.exit("tableCellDivider"),I):q===null||Qt(q)?(t.exit("tableRow"),e(q)):Mn(q)?Gn(t,I,"whitespace")(q):(t.enter("data"),R(q))}function R(q){return q===null||q===124||kr(q)?(t.exit("data"),I(q)):(t.consume(q),q===92?z:R)}function z(q){return q===92||q===124?(t.consume(q),R):R(q)}}function Pie(t,e){let n=-1,a=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,d,f,p;const g=new Cie;for(;++n<t.length;){const x=t[n],b=x[1];x[0]==="enter"?b.type==="tableHead"?(l=!1,c!==0&&(_R(g,e,c,d,f),f=void 0,c=0),d={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",d,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(a=!0,p=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",f,e]])),i=b.type==="tableDelimiterRow"?2:f?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(a=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=bj(g,e,s,i,void 0,p),s=[0,0,0,0]),o[2]=n)):b.type==="tableCellDivider"&&(a?a=!1:(s[1]!==0&&(o[0]=o[1],p=bj(g,e,s,i,void 0,p)),s=o,o=[s[1],n,0,0])):b.type==="tableHead"?(l=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],p=bj(g,e,s,i,n,p)):o[1]!==0&&(p=bj(g,e,o,i,n,p)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&_R(g,e,c,d,f),g.consume(e.events),n=-1;++n<e.events.length;){const x=e.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=kie(e.events,n))}return t}function bj(t,e,n,a,i,s){const o=a===1?"tableHeader":a===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},km(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=km(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const d=km(e.events,n[2]),f=km(e.events,n[3]),p={type:l,start:Object.assign({},d),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",p,e]]),a!==2){const g=e.events[n[2]],x=e.events[n[3]];if(g[1].end=Object.assign({},x[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,j=n[3]-n[2]-1;t.add(b,j,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return i!==void 0&&(s.end=Object.assign({},km(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function _R(t,e,n,a,i){const s=[],o=km(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),a.end=Object.assign({},o),s.push(["exit",a,e]),t.add(n+1,0,s)}function km(t,e){const n=t[e],a=n[0]==="enter"?"start":"end";return n[1][a]}const Die={name:"tasklistCheck",tokenize:Mie};function Oie(){return{text:{91:Die}}}function Mie(t,e,n){const a=this;return i;function i(c){return a.previous!==null||!a._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return kr(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Qt(c)?e(c):Mn(c)?t.check({tokenize:Iie},e,n)(c):n(c)}}function Iie(t,e,n){return Gn(t,a,"whitespace");function a(i){return i===null?n(i):e(i)}}function Rie(t){return gq([oie(),yie(),_ie(t),Aie(),Oie()])}const Lie={};function Sf(t){const e=this,n=t||Lie,a=e.data(),i=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),o=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);i.push(Rie(n)),s.push(rie()),o.push(aie(n))}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Fie,$ie;function Bie(){return{geminiUrl:Fie,vertexUrl:$ie}}function zie(t,e,n){var a,i,s;if(!(!((a=t.httpOptions)===null||a===void 0)&&a.baseUrl)){const o=Bie();return t.vertexai?(i=o.vertexUrl)!==null&&i!==void 0?i:e:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rb{}function cn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(a,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function O(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];O(f,e.slice(s+1),n[d])}else for(const d of c)O(d,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];O(c[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const a=e[e.length-1],i=t[a];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else t[a]=n}function D(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const a=e[n];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(o=>D(o,e.slice(n+1))):void 0}else return}else t=t[a]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function sU(t,e){const n=Yr(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function oU(t,e){return Array.isArray(e)?e.map(n=>Nw(t,n)):[Nw(t,e)]}function Nw(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function qie(t,e){const n=Nw(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Uie(t,e){const n=Nw(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function CR(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function lU(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>CR(t,n)):[CR(t,e)]}function LE(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function TR(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function kR(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ss(t,e){if(e==null)throw new Error("ContentUnion is required");return LE(e)?e:{role:"user",parts:lU(t,e)}}function cU(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const a=ss(t,n);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(t.isVertexAI()){const n=ss(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ss(t,n)):[ss(t,e)]}function gd(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(TR(e)||kR(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ss(t,e)]}const n=[],a=[],i=LE(e[0]);for(const s of e){const o=LE(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)n.push(s);else{if(TR(s)||kR(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");a.push(s)}}return i||n.push({role:"user",parts:lU(t,a)}),n}function uU(t,e){return e}function dU(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function QN(t,e){return e}function XN(t,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function Vie(t,e,n,a=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===a;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function yd(t,e){if(typeof e!="string")throw new Error("name must be a string");return Vie(t,e,"cachedContents")}function hU(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function xd(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Hie(t){return t!=null&&typeof t=="object"&&"name"in t}function Gie(t){return t!=null&&typeof t=="object"&&"video"in t}function Wie(t){return t!=null&&typeof t=="object"&&"uri"in t}function fU(t,e){var n;let a;if(Hie(e)&&(a=e.name),!(Wie(e)&&(a=e.uri,a===void 0))&&!(Gie(e)&&(a=(n=e.video)===null||n===void 0?void 0:n.uri,a===void 0))){if(typeof e=="string"&&(a=e),a===void 0)throw new Error("Could not extract file name from the provided input.");if(a.startsWith("https://")){const s=a.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${a}`);a=s[0]}else a.startsWith("files/")&&(a=a.split("files/")[1]);return a}}function pU(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function mU(t,e){for(const n of["models","tunedModels","publisherModels"])if(Kie(e,n))return e[n];return[]}function Kie(t,e){return t!==null&&typeof t=="object"&&e in t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yie(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Qie(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Yie(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function AR(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Qie(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Xie(){return{}}function Jie(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Zie(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Jie(t,a)),n}function ese(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Xie());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],Zie(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function tse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function nse(t,e){const n={},a=D(e,["functionCallingConfig"]);if(a!=null&&O(n,["functionCallingConfig"],tse(t,a)),D(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function rse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);n!==void 0&&s!=null&&O(n,["expireTime"],s);const o=D(e,["displayName"]);n!==void 0&&o!=null&&O(n,["displayName"],o);const l=D(e,["contents"]);if(n!==void 0&&l!=null){let p=gd(t,l);Array.isArray(p)&&(p=p.map(g=>AR(t,g))),O(n,["contents"],p)}const c=D(e,["systemInstruction"]);n!==void 0&&c!=null&&O(n,["systemInstruction"],AR(t,ss(t,c)));const d=D(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>ese(t,g))),O(n,["tools"],p)}const f=D(e,["toolConfig"]);return n!==void 0&&f!=null&&O(n,["toolConfig"],nse(t,f)),a}function ase(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],sU(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],rse(t,i,n)),n}function ise(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function sse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function ose(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);return n!==void 0&&s!=null&&O(n,["expireTime"],s),a}function lse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],ose(t,i,n)),n}function cse(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function use(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],cse(t,a,n)),n}function dse(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function hse(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],dse(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function ER(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>hse(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function fse(){return{}}function pse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function mse(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],pse(t,a)),n}function gse(){return{}}function yse(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function xse(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],yse(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function vse(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],xse(t,a)),n}function bse(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],fse());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],mse(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],gse());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],vse(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const d=D(e,["functionDeclarations"]);return d!=null&&O(n,["functionDeclarations"],d),n}function jse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function wse(t,e){const n={},a=D(e,["latitude"]);a!=null&&O(n,["latitude"],a);const i=D(e,["longitude"]);return i!=null&&O(n,["longitude"],i),n}function Nse(t,e){const n={},a=D(e,["latLng"]);return a!=null&&O(n,["latLng"],wse(t,a)),n}function Sse(t,e){const n={},a=D(e,["functionCallingConfig"]);a!=null&&O(n,["functionCallingConfig"],jse(t,a));const i=D(e,["retrievalConfig"]);return i!=null&&O(n,["retrievalConfig"],Nse(t,i)),n}function _se(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);n!==void 0&&s!=null&&O(n,["expireTime"],s);const o=D(e,["displayName"]);n!==void 0&&o!=null&&O(n,["displayName"],o);const l=D(e,["contents"]);if(n!==void 0&&l!=null){let p=gd(t,l);Array.isArray(p)&&(p=p.map(g=>ER(t,g))),O(n,["contents"],p)}const c=D(e,["systemInstruction"]);n!==void 0&&c!=null&&O(n,["systemInstruction"],ER(t,ss(t,c)));const d=D(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>bse(t,g))),O(n,["tools"],p)}const f=D(e,["toolConfig"]);return n!==void 0&&f!=null&&O(n,["toolConfig"],Sse(t,f)),a}function Cse(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],sU(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],_se(t,i,n)),n}function Tse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function kse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Ase(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);return n!==void 0&&s!=null&&O(n,["expireTime"],s),a}function Ese(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Ase(t,i,n)),n}function Pse(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function Dse(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Pse(t,a,n)),n}function tw(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["model"]);s!=null&&O(n,["model"],s);const o=D(e,["createTime"]);o!=null&&O(n,["createTime"],o);const l=D(e,["updateTime"]);l!=null&&O(n,["updateTime"],l);const c=D(e,["expireTime"]);c!=null&&O(n,["expireTime"],c);const d=D(e,["usageMetadata"]);return d!=null&&O(n,["usageMetadata"],d),n}function Ose(){return{}}function Mse(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>tw(t,o))),O(n,["cachedContents"],s)}return n}function nw(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["model"]);s!=null&&O(n,["model"],s);const o=D(e,["createTime"]);o!=null&&O(n,["createTime"],o);const l=D(e,["updateTime"]);l!=null&&O(n,["updateTime"],l);const c=D(e,["expireTime"]);c!=null&&O(n,["expireTime"],c);const d=D(e,["usageMetadata"]);return d!=null&&O(n,["usageMetadata"],d),n}function Ise(){return{}}function Rse(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>nw(t,o))),O(n,["cachedContents"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sg;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(sg||(sg={}));class JN{constructor(e,n,a,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,a,i)}init(e,n,a){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};a?typeof a=="object"?o=Object.assign({},a):o=a:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(PR||(PR={}));var DR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(DR||(DR={}));var OR;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(OR||(OR={}));var MR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(MR||(MR={}));var IR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(IR||(IR={}));var RR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(RR||(RR={}));var LR;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(LR||(LR={}));var og;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"})(og||(og={}));var FR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY"})(FR||(FR={}));var $R;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})($R||($R={}));var BR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(BR||(BR={}));var zR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(zR||(zR={}));var qR;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(qR||(qR={}));var hd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(hd||(hd={}));var UR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(UR||(UR={}));var FE;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(FE||(FE={}));var VR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(VR||(VR={}));var HR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(HR||(HR={}));var GR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(GR||(GR={}));var WR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(WR||(WR={}));var KR;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(KR||(KR={}));var YR;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(YR||(YR={}));var QR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(QR||(QR={}));var XR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(XR||(XR={}));var JR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(JR||(JR={}));var ZR;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ZR||(ZR={}));var e4;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(e4||(e4={}));var t4;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(t4||(t4={}));var n4;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(n4||(n4={}));var r4;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(r4||(r4={}));var a4;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(a4||(a4={}));var i4;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(i4||(i4={}));var s4;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(s4||(s4={}));var o4;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(o4||(o4={}));class jj{get text(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const g of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,b]of Object.entries(g))x!=="text"&&x!=="thought"&&(b!==null||b!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&f.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,a,i,s,o,l,c,d;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,a,i,s,o,l,c,d;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class l4{}class c4{}class Lse{}class Fse{}class u4{}class d4{}class h4{}class $se{}class f4{}class p4{}class m4{}class Bse{}class $E{constructor(e){const n={};for(const a of e.headers.entries())n[a[0]]=a[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class zse{}class qse{}class Use{get text(){var e,n,a;let i="",s=!1;const o=[];for(const l of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,i+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,a;let i="";const s=[];for(const o of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vse extends Rb{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new JN(sg.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(n),n)}async create(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Cse(this.apiClient,e);return l=cn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>nw(this.apiClient,f))}else{const d=ase(this.apiClient,e);return l=cn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>tw(this.apiClient,f))}}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Tse(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>nw(this.apiClient,f))}else{const d=ise(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>tw(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=kse(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Ise(),p=new p4;return Object.assign(p,f),p})}else{const d=sse(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Ose(),p=new p4;return Object.assign(p,f),p})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Ese(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>nw(this.apiClient,f))}else{const d=lse(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>tw(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Dse(this.apiClient,e);return l=cn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Rse(this.apiClient,f),g=new m4;return Object.assign(g,p),g})}else{const d=use(this.apiClient,e);return l=cn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Mse(this.apiClient,f),g=new m4;return Object.assign(g,p),g})}}}function g4(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],a=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fi(t){return this instanceof fi?(this.v=t,this):new fi(t)}function Sw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(x){return function(b){return Promise.resolve(b).then(x,p)}}function l(x,b){a[x]&&(i[x]=function(j){return new Promise(function(S,_){s.push([x,j,S,_])>1||c(x,j)})},b&&(i[x]=b(i[x])))}function c(x,b){try{d(a[x](b))}catch(j){g(s[0][3],j)}}function d(x){x.value instanceof fi?Promise.resolve(x.value.v).then(f,p):g(s[0][2],x)}function f(x){c("next",x)}function p(x){c("throw",x)}function g(x,b){x(b),s.shift(),s.length&&c(s[0][0],s[0][1])}}function BE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof g4=="function"?g4(t):t[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(s){n[s]=t[s]&&function(o){return new Promise(function(l,c){o=t[s](o),i(l,c,o.done,o.value)})}}function i(s,o,l,c){Promise.resolve(c).then(function(d){s({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hse(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:gU(n)}function gU(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function Gse(t){if(t.length!==0){if(t[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Wse(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let a=0,i=t[0];for(;a<n;)if(t[a].role==="user")i=t[a],a++;else{const s=[];let o=!0;for(;a<n&&t[a].role==="model";)s.push(t[a]),o&&!gU(t[a])&&(o=!1),a++;o&&(e.push(i),e.push(...s))}return e}class Kse{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Yse(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class Yse{constructor(e,n,a,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=a,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Gse(s)}async sendMessage(e){var n;await this.sendPromise;const a=ss(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o;const c=(o=(s=(await i).candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=c?[c]:[];this.recordHistory(a,d)})(),await this.sendPromise,i}async sendMessageStream(e){var n;await this.sendPromise;const a=ss(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,a)}getHistory(e=!1){return e?Wse(this.history):this.history}processStreamResponse(e,n){var a,i;return Sw(this,arguments,function*(){var o,l,c,d;const f=[];try{for(var p=!0,g=BE(e),x;x=yield fi(g.next()),o=x.done,!o;p=!0){d=x.value,p=!1;const b=d;if(Hse(b)){const j=(i=(a=b.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content;j!==void 0&&f.push(j)}yield yield fi(b)}}catch(b){l={error:b}}finally{try{!p&&!o&&(c=g.return)&&(yield fi(c.call(g)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n){let a=[];n.length>0&&n.every(i=>i.role==="model")?a=n:a.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qse(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function Xse(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Qse(t,a,n)),n}function Jse(t,e){const n={},a=D(e,["details"]);a!=null&&O(n,["details"],a);const i=D(e,["message"]);i!=null&&O(n,["message"],i);const s=D(e,["code"]);return s!=null&&O(n,["code"],s),n}function Zse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["mimeType"]);s!=null&&O(n,["mimeType"],s);const o=D(e,["sizeBytes"]);o!=null&&O(n,["sizeBytes"],o);const l=D(e,["createTime"]);l!=null&&O(n,["createTime"],l);const c=D(e,["expirationTime"]);c!=null&&O(n,["expirationTime"],c);const d=D(e,["updateTime"]);d!=null&&O(n,["updateTime"],d);const f=D(e,["sha256Hash"]);f!=null&&O(n,["sha256Hash"],f);const p=D(e,["uri"]);p!=null&&O(n,["uri"],p);const g=D(e,["downloadUri"]);g!=null&&O(n,["downloadUri"],g);const x=D(e,["state"]);x!=null&&O(n,["state"],x);const b=D(e,["source"]);b!=null&&O(n,["source"],b);const j=D(e,["videoMetadata"]);j!=null&&O(n,["videoMetadata"],j);const S=D(e,["error"]);return S!=null&&O(n,["error"],Jse(t,S)),n}function eoe(t,e){const n={},a=D(e,["file"]);a!=null&&O(n,["file"],Zse(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function toe(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","file"],fU(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function noe(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","file"],fU(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function roe(t,e){const n={},a=D(e,["details"]);a!=null&&O(n,["details"],a);const i=D(e,["message"]);i!=null&&O(n,["message"],i);const s=D(e,["code"]);return s!=null&&O(n,["code"],s),n}function zE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["mimeType"]);s!=null&&O(n,["mimeType"],s);const o=D(e,["sizeBytes"]);o!=null&&O(n,["sizeBytes"],o);const l=D(e,["createTime"]);l!=null&&O(n,["createTime"],l);const c=D(e,["expirationTime"]);c!=null&&O(n,["expirationTime"],c);const d=D(e,["updateTime"]);d!=null&&O(n,["updateTime"],d);const f=D(e,["sha256Hash"]);f!=null&&O(n,["sha256Hash"],f);const p=D(e,["uri"]);p!=null&&O(n,["uri"],p);const g=D(e,["downloadUri"]);g!=null&&O(n,["downloadUri"],g);const x=D(e,["state"]);x!=null&&O(n,["state"],x);const b=D(e,["source"]);b!=null&&O(n,["source"],b);const j=D(e,["videoMetadata"]);j!=null&&O(n,["videoMetadata"],j);const S=D(e,["error"]);return S!=null&&O(n,["error"],roe(t,S)),n}function aoe(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>zE(t,o))),O(n,["files"],s)}return n}function ioe(){return{}}function soe(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ooe extends Rb{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new JN(sg.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>zE(this.apiClient,n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Xse(this.apiClient,e);return s=cn("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=aoe(this.apiClient,c),f=new Bse;return Object.assign(f,d),f})}}async createInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=eoe(this.apiClient,e);return s=cn("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=ioe(),d=new zse;return Object.assign(d,c),d})}}async get(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=toe(this.apiClient,e);return s=cn("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>zE(this.apiClient,c))}}async delete(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=noe(this.apiClient,e);return s=cn("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=soe(),d=new qse;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function loe(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function coe(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function uoe(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],loe(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function doe(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],coe(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function hoe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>uoe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function foe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>doe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function poe(){return{}}function moe(){return{}}function goe(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function yoe(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function xoe(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],goe(t,a)),n}function voe(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],yoe(t,a)),n}function boe(){return{}}function joe(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function woe(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],joe(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function Noe(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],woe(t,a)),n}function Soe(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],poe());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],xoe(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function _oe(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],moe());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],voe(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],boe());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],Noe(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const d=D(e,["functionDeclarations"]);return d!=null&&O(n,["functionDeclarations"],d),n}function Coe(t,e){const n={},a=D(e,["handle"]);if(a!=null&&O(n,["handle"],a),D(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function Toe(t,e){const n={},a=D(e,["handle"]);a!=null&&O(n,["handle"],a);const i=D(e,["transparent"]);return i!=null&&O(n,["transparent"],i),n}function y4(){return{}}function x4(){return{}}function koe(t,e){const n={},a=D(e,["disabled"]);a!=null&&O(n,["disabled"],a);const i=D(e,["startOfSpeechSensitivity"]);i!=null&&O(n,["startOfSpeechSensitivity"],i);const s=D(e,["endOfSpeechSensitivity"]);s!=null&&O(n,["endOfSpeechSensitivity"],s);const o=D(e,["prefixPaddingMs"]);o!=null&&O(n,["prefixPaddingMs"],o);const l=D(e,["silenceDurationMs"]);return l!=null&&O(n,["silenceDurationMs"],l),n}function Aoe(t,e){const n={},a=D(e,["disabled"]);a!=null&&O(n,["disabled"],a);const i=D(e,["startOfSpeechSensitivity"]);i!=null&&O(n,["startOfSpeechSensitivity"],i);const s=D(e,["endOfSpeechSensitivity"]);s!=null&&O(n,["endOfSpeechSensitivity"],s);const o=D(e,["prefixPaddingMs"]);o!=null&&O(n,["prefixPaddingMs"],o);const l=D(e,["silenceDurationMs"]);return l!=null&&O(n,["silenceDurationMs"],l),n}function Eoe(t,e){const n={},a=D(e,["automaticActivityDetection"]);a!=null&&O(n,["automaticActivityDetection"],koe(t,a));const i=D(e,["activityHandling"]);i!=null&&O(n,["activityHandling"],i);const s=D(e,["turnCoverage"]);return s!=null&&O(n,["turnCoverage"],s),n}function Poe(t,e){const n={},a=D(e,["automaticActivityDetection"]);a!=null&&O(n,["automaticActivityDetection"],Aoe(t,a));const i=D(e,["activityHandling"]);i!=null&&O(n,["activityHandling"],i);const s=D(e,["turnCoverage"]);return s!=null&&O(n,["turnCoverage"],s),n}function Doe(t,e){const n={},a=D(e,["targetTokens"]);return a!=null&&O(n,["targetTokens"],a),n}function Ooe(t,e){const n={},a=D(e,["targetTokens"]);return a!=null&&O(n,["targetTokens"],a),n}function Moe(t,e){const n={},a=D(e,["triggerTokens"]);a!=null&&O(n,["triggerTokens"],a);const i=D(e,["slidingWindow"]);return i!=null&&O(n,["slidingWindow"],Doe(t,i)),n}function Ioe(t,e){const n={},a=D(e,["triggerTokens"]);a!=null&&O(n,["triggerTokens"],a);const i=D(e,["slidingWindow"]);return i!=null&&O(n,["slidingWindow"],Ooe(t,i)),n}function Roe(t,e,n){const a={},i=D(e,["generationConfig"]);n!==void 0&&i!=null&&O(n,["setup","generationConfig"],i);const s=D(e,["responseModalities"]);n!==void 0&&s!=null&&O(n,["setup","generationConfig","responseModalities"],s);const o=D(e,["temperature"]);n!==void 0&&o!=null&&O(n,["setup","generationConfig","temperature"],o);const l=D(e,["topP"]);n!==void 0&&l!=null&&O(n,["setup","generationConfig","topP"],l);const c=D(e,["topK"]);n!==void 0&&c!=null&&O(n,["setup","generationConfig","topK"],c);const d=D(e,["maxOutputTokens"]);n!==void 0&&d!=null&&O(n,["setup","generationConfig","maxOutputTokens"],d);const f=D(e,["mediaResolution"]);n!==void 0&&f!=null&&O(n,["setup","generationConfig","mediaResolution"],f);const p=D(e,["seed"]);n!==void 0&&p!=null&&O(n,["setup","generationConfig","seed"],p);const g=D(e,["speechConfig"]);n!==void 0&&g!=null&&O(n,["setup","generationConfig","speechConfig"],g);const x=D(e,["systemInstruction"]);n!==void 0&&x!=null&&O(n,["setup","systemInstruction"],hoe(t,ss(t,x)));const b=D(e,["tools"]);if(n!==void 0&&b!=null){let E=XN(t,b);Array.isArray(E)&&(E=E.map(k=>Soe(t,QN(t,k)))),O(n,["setup","tools"],E)}const j=D(e,["sessionResumption"]);n!==void 0&&j!=null&&O(n,["setup","sessionResumption"],Coe(t,j));const S=D(e,["inputAudioTranscription"]);n!==void 0&&S!=null&&O(n,["setup","inputAudioTranscription"],y4());const _=D(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&O(n,["setup","outputAudioTranscription"],y4());const T=D(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&O(n,["setup","realtimeInputConfig"],Eoe(t,T));const C=D(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&O(n,["setup","contextWindowCompression"],Moe(t,C)),a}function Loe(t,e,n){const a={},i=D(e,["generationConfig"]);n!==void 0&&i!=null&&O(n,["setup","generationConfig"],i);const s=D(e,["responseModalities"]);n!==void 0&&s!=null&&O(n,["setup","generationConfig","responseModalities"],s);const o=D(e,["temperature"]);n!==void 0&&o!=null&&O(n,["setup","generationConfig","temperature"],o);const l=D(e,["topP"]);n!==void 0&&l!=null&&O(n,["setup","generationConfig","topP"],l);const c=D(e,["topK"]);n!==void 0&&c!=null&&O(n,["setup","generationConfig","topK"],c);const d=D(e,["maxOutputTokens"]);n!==void 0&&d!=null&&O(n,["setup","generationConfig","maxOutputTokens"],d);const f=D(e,["mediaResolution"]);n!==void 0&&f!=null&&O(n,["setup","generationConfig","mediaResolution"],f);const p=D(e,["seed"]);n!==void 0&&p!=null&&O(n,["setup","generationConfig","seed"],p);const g=D(e,["speechConfig"]);n!==void 0&&g!=null&&O(n,["setup","generationConfig","speechConfig"],g);const x=D(e,["systemInstruction"]);n!==void 0&&x!=null&&O(n,["setup","systemInstruction"],foe(t,ss(t,x)));const b=D(e,["tools"]);if(n!==void 0&&b!=null){let E=XN(t,b);Array.isArray(E)&&(E=E.map(k=>_oe(t,QN(t,k)))),O(n,["setup","tools"],E)}const j=D(e,["sessionResumption"]);n!==void 0&&j!=null&&O(n,["setup","sessionResumption"],Toe(t,j));const S=D(e,["inputAudioTranscription"]);n!==void 0&&S!=null&&O(n,["setup","inputAudioTranscription"],x4());const _=D(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&O(n,["setup","outputAudioTranscription"],x4());const T=D(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&O(n,["setup","realtimeInputConfig"],Poe(t,T));const C=D(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&O(n,["setup","contextWindowCompression"],Ioe(t,C)),a}function Foe(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["setup","model"],Yr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Roe(t,i,n)),n}function $oe(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["setup","model"],Yr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Loe(t,i,n)),n}function Boe(){return{}}function zoe(){return{}}function qoe(){return{}}function Uoe(){return{}}function Voe(t,e){const n={},a=D(e,["media"]);a!=null&&O(n,["mediaChunks"],oU(t,a));const i=D(e,["audio"]);i!=null&&O(n,["audio"],Uie(t,i));const s=D(e,["audioStreamEnd"]);s!=null&&O(n,["audioStreamEnd"],s);const o=D(e,["video"]);o!=null&&O(n,["video"],qie(t,o));const l=D(e,["text"]);return l!=null&&O(n,["text"],l),D(e,["activityStart"])!=null&&O(n,["activityStart"],Boe()),D(e,["activityEnd"])!=null&&O(n,["activityEnd"],qoe()),n}function Hoe(t,e){const n={},a=D(e,["media"]);if(a!=null&&O(n,["mediaChunks"],oU(t,a)),D(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=D(e,["audioStreamEnd"]);if(i!=null&&O(n,["audioStreamEnd"],i),D(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(D(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return D(e,["activityStart"])!=null&&O(n,["activityStart"],zoe()),D(e,["activityEnd"])!=null&&O(n,["activityEnd"],Uoe()),n}function Goe(){return{}}function Woe(){return{}}function Koe(t,e){const n={},a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Yoe(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Qoe(t,e){const n={},a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Koe(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function Xoe(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],Yoe(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function Joe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Qoe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Zoe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Xoe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function v4(t,e){const n={},a=D(e,["text"]);a!=null&&O(n,["text"],a);const i=D(e,["finished"]);return i!=null&&O(n,["finished"],i),n}function b4(t,e){const n={},a=D(e,["text"]);a!=null&&O(n,["text"],a);const i=D(e,["finished"]);return i!=null&&O(n,["finished"],i),n}function ele(t,e){const n={},a=D(e,["modelTurn"]);a!=null&&O(n,["modelTurn"],Joe(t,a));const i=D(e,["turnComplete"]);i!=null&&O(n,["turnComplete"],i);const s=D(e,["interrupted"]);s!=null&&O(n,["interrupted"],s);const o=D(e,["groundingMetadata"]);o!=null&&O(n,["groundingMetadata"],o);const l=D(e,["generationComplete"]);l!=null&&O(n,["generationComplete"],l);const c=D(e,["inputTranscription"]);c!=null&&O(n,["inputTranscription"],v4(t,c));const d=D(e,["outputTranscription"]);return d!=null&&O(n,["outputTranscription"],v4(t,d)),n}function tle(t,e){const n={},a=D(e,["modelTurn"]);a!=null&&O(n,["modelTurn"],Zoe(t,a));const i=D(e,["turnComplete"]);i!=null&&O(n,["turnComplete"],i);const s=D(e,["interrupted"]);s!=null&&O(n,["interrupted"],s);const o=D(e,["groundingMetadata"]);o!=null&&O(n,["groundingMetadata"],o);const l=D(e,["generationComplete"]);l!=null&&O(n,["generationComplete"],l);const c=D(e,["inputTranscription"]);c!=null&&O(n,["inputTranscription"],b4(t,c));const d=D(e,["outputTranscription"]);return d!=null&&O(n,["outputTranscription"],b4(t,d)),n}function nle(t,e){const n={},a=D(e,["id"]);a!=null&&O(n,["id"],a);const i=D(e,["args"]);i!=null&&O(n,["args"],i);const s=D(e,["name"]);return s!=null&&O(n,["name"],s),n}function rle(t,e){const n={},a=D(e,["args"]);a!=null&&O(n,["args"],a);const i=D(e,["name"]);return i!=null&&O(n,["name"],i),n}function ale(t,e){const n={},a=D(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>nle(t,s))),O(n,["functionCalls"],i)}return n}function ile(t,e){const n={},a=D(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>rle(t,s))),O(n,["functionCalls"],i)}return n}function sle(t,e){const n={},a=D(e,["ids"]);return a!=null&&O(n,["ids"],a),n}function ole(t,e){const n={},a=D(e,["ids"]);return a!=null&&O(n,["ids"],a),n}function wj(t,e){const n={},a=D(e,["modality"]);a!=null&&O(n,["modality"],a);const i=D(e,["tokenCount"]);return i!=null&&O(n,["tokenCount"],i),n}function Nj(t,e){const n={},a=D(e,["modality"]);a!=null&&O(n,["modality"],a);const i=D(e,["tokenCount"]);return i!=null&&O(n,["tokenCount"],i),n}function lle(t,e){const n={},a=D(e,["promptTokenCount"]);a!=null&&O(n,["promptTokenCount"],a);const i=D(e,["cachedContentTokenCount"]);i!=null&&O(n,["cachedContentTokenCount"],i);const s=D(e,["responseTokenCount"]);s!=null&&O(n,["responseTokenCount"],s);const o=D(e,["toolUsePromptTokenCount"]);o!=null&&O(n,["toolUsePromptTokenCount"],o);const l=D(e,["thoughtsTokenCount"]);l!=null&&O(n,["thoughtsTokenCount"],l);const c=D(e,["totalTokenCount"]);c!=null&&O(n,["totalTokenCount"],c);const d=D(e,["promptTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(b=>wj(t,b))),O(n,["promptTokensDetails"],x)}const f=D(e,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(b=>wj(t,b))),O(n,["cacheTokensDetails"],x)}const p=D(e,["responseTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>wj(t,b))),O(n,["responseTokensDetails"],x)}const g=D(e,["toolUsePromptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(b=>wj(t,b))),O(n,["toolUsePromptTokensDetails"],x)}return n}function cle(t,e){const n={},a=D(e,["promptTokenCount"]);a!=null&&O(n,["promptTokenCount"],a);const i=D(e,["cachedContentTokenCount"]);i!=null&&O(n,["cachedContentTokenCount"],i);const s=D(e,["candidatesTokenCount"]);s!=null&&O(n,["responseTokenCount"],s);const o=D(e,["toolUsePromptTokenCount"]);o!=null&&O(n,["toolUsePromptTokenCount"],o);const l=D(e,["thoughtsTokenCount"]);l!=null&&O(n,["thoughtsTokenCount"],l);const c=D(e,["totalTokenCount"]);c!=null&&O(n,["totalTokenCount"],c);const d=D(e,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(j=>Nj(t,j))),O(n,["promptTokensDetails"],b)}const f=D(e,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(j=>Nj(t,j))),O(n,["cacheTokensDetails"],b)}const p=D(e,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(j=>Nj(t,j))),O(n,["responseTokensDetails"],b)}const g=D(e,["toolUsePromptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(j=>Nj(t,j))),O(n,["toolUsePromptTokensDetails"],b)}const x=D(e,["trafficType"]);return x!=null&&O(n,["trafficType"],x),n}function ule(t,e){const n={},a=D(e,["timeLeft"]);return a!=null&&O(n,["timeLeft"],a),n}function dle(t,e){const n={},a=D(e,["timeLeft"]);return a!=null&&O(n,["timeLeft"],a),n}function hle(t,e){const n={},a=D(e,["newHandle"]);a!=null&&O(n,["newHandle"],a);const i=D(e,["resumable"]);i!=null&&O(n,["resumable"],i);const s=D(e,["lastConsumedClientMessageIndex"]);return s!=null&&O(n,["lastConsumedClientMessageIndex"],s),n}function fle(t,e){const n={},a=D(e,["newHandle"]);a!=null&&O(n,["newHandle"],a);const i=D(e,["resumable"]);i!=null&&O(n,["resumable"],i);const s=D(e,["lastConsumedClientMessageIndex"]);return s!=null&&O(n,["lastConsumedClientMessageIndex"],s),n}function ple(t,e){const n={};D(e,["setupComplete"])!=null&&O(n,["setupComplete"],Goe());const i=D(e,["serverContent"]);i!=null&&O(n,["serverContent"],ele(t,i));const s=D(e,["toolCall"]);s!=null&&O(n,["toolCall"],ale(t,s));const o=D(e,["toolCallCancellation"]);o!=null&&O(n,["toolCallCancellation"],sle(t,o));const l=D(e,["usageMetadata"]);l!=null&&O(n,["usageMetadata"],lle(t,l));const c=D(e,["goAway"]);c!=null&&O(n,["goAway"],ule(t,c));const d=D(e,["sessionResumptionUpdate"]);return d!=null&&O(n,["sessionResumptionUpdate"],hle(t,d)),n}function mle(t,e){const n={};D(e,["setupComplete"])!=null&&O(n,["setupComplete"],Woe());const i=D(e,["serverContent"]);i!=null&&O(n,["serverContent"],tle(t,i));const s=D(e,["toolCall"]);s!=null&&O(n,["toolCall"],ile(t,s));const o=D(e,["toolCallCancellation"]);o!=null&&O(n,["toolCallCancellation"],ole(t,o));const l=D(e,["usageMetadata"]);l!=null&&O(n,["usageMetadata"],cle(t,l));const c=D(e,["goAway"]);c!=null&&O(n,["goAway"],dle(t,c));const d=D(e,["sessionResumptionUpdate"]);return d!=null&&O(n,["sessionResumptionUpdate"],fle(t,d)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gle(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function yle(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],gle(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function ZN(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>yle(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function xle(t,e){const n={};if(D(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=D(e,["category"]);a!=null&&O(n,["category"],a);const i=D(e,["threshold"]);return i!=null&&O(n,["threshold"],i),n}function vle(){return{}}function ble(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function jle(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],ble(t,a)),n}function wle(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],vle());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],jle(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function Nle(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function Sle(t,e){const n={},a=D(e,["functionCallingConfig"]);if(a!=null&&O(n,["functionCallingConfig"],Nle(t,a)),D(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function _le(t,e){const n={},a=D(e,["voiceName"]);return a!=null&&O(n,["voiceName"],a),n}function Cle(t,e){const n={},a=D(e,["prebuiltVoiceConfig"]);return a!=null&&O(n,["prebuiltVoiceConfig"],_le(t,a)),n}function Tle(t,e){const n={},a=D(e,["voiceConfig"]);a!=null&&O(n,["voiceConfig"],Cle(t,a));const i=D(e,["languageCode"]);return i!=null&&O(n,["languageCode"],i),n}function kle(t,e){const n={},a=D(e,["includeThoughts"]);a!=null&&O(n,["includeThoughts"],a);const i=D(e,["thinkingBudget"]);return i!=null&&O(n,["thinkingBudget"],i),n}function Ale(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],ZN(t,ss(t,i)));const s=D(e,["temperature"]);s!=null&&O(a,["temperature"],s);const o=D(e,["topP"]);o!=null&&O(a,["topP"],o);const l=D(e,["topK"]);l!=null&&O(a,["topK"],l);const c=D(e,["candidateCount"]);c!=null&&O(a,["candidateCount"],c);const d=D(e,["maxOutputTokens"]);d!=null&&O(a,["maxOutputTokens"],d);const f=D(e,["stopSequences"]);f!=null&&O(a,["stopSequences"],f);const p=D(e,["responseLogprobs"]);p!=null&&O(a,["responseLogprobs"],p);const g=D(e,["logprobs"]);g!=null&&O(a,["logprobs"],g);const x=D(e,["presencePenalty"]);x!=null&&O(a,["presencePenalty"],x);const b=D(e,["frequencyPenalty"]);b!=null&&O(a,["frequencyPenalty"],b);const j=D(e,["seed"]);j!=null&&O(a,["seed"],j);const S=D(e,["responseMimeType"]);S!=null&&O(a,["responseMimeType"],S);const _=D(e,["responseSchema"]);if(_!=null&&O(a,["responseSchema"],uU(t,_)),D(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(D(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=D(e,["safetySettings"]);if(n!==void 0&&T!=null){let q=T;Array.isArray(q)&&(q=q.map(F=>xle(t,F))),O(n,["safetySettings"],q)}const C=D(e,["tools"]);if(n!==void 0&&C!=null){let q=XN(t,C);Array.isArray(q)&&(q=q.map(F=>wle(t,QN(t,F)))),O(n,["tools"],q)}const E=D(e,["toolConfig"]);if(n!==void 0&&E!=null&&O(n,["toolConfig"],Sle(t,E)),D(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=D(e,["cachedContent"]);n!==void 0&&k!=null&&O(n,["cachedContent"],yd(t,k));const P=D(e,["responseModalities"]);P!=null&&O(a,["responseModalities"],P);const I=D(e,["mediaResolution"]);I!=null&&O(a,["mediaResolution"],I);const R=D(e,["speechConfig"]);if(R!=null&&O(a,["speechConfig"],Tle(t,dU(t,R))),D(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=D(e,["thinkingConfig"]);return z!=null&&O(a,["thinkingConfig"],kle(t,z)),a}function j4(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>ZN(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["generationConfig"],Ale(t,s,n)),n}function Ele(t,e,n){const a={},i=D(e,["taskType"]);n!==void 0&&i!=null&&O(n,["requests[]","taskType"],i);const s=D(e,["title"]);n!==void 0&&s!=null&&O(n,["requests[]","title"],s);const o=D(e,["outputDimensionality"]);if(n!==void 0&&o!=null&&O(n,["requests[]","outputDimensionality"],o),D(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(D(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function Ple(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["contents"]);i!=null&&O(n,["requests[]","content"],cU(t,i));const s=D(e,["config"]);s!=null&&O(n,["config"],Ele(t,s,n));const o=D(e,["model"]);return o!==void 0&&O(n,["requests[]","model"],Yr(t,o)),n}function Dle(t,e,n){const a={};if(D(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(D(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=D(e,["numberOfImages"]);n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i);const s=D(e,["aspectRatio"]);n!==void 0&&s!=null&&O(n,["parameters","aspectRatio"],s);const o=D(e,["guidanceScale"]);if(n!==void 0&&o!=null&&O(n,["parameters","guidanceScale"],o),D(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=D(e,["safetyFilterLevel"]);n!==void 0&&l!=null&&O(n,["parameters","safetySetting"],l);const c=D(e,["personGeneration"]);n!==void 0&&c!=null&&O(n,["parameters","personGeneration"],c);const d=D(e,["includeSafetyAttributes"]);n!==void 0&&d!=null&&O(n,["parameters","includeSafetyAttributes"],d);const f=D(e,["includeRaiReason"]);n!==void 0&&f!=null&&O(n,["parameters","includeRaiReason"],f);const p=D(e,["language"]);n!==void 0&&p!=null&&O(n,["parameters","language"],p);const g=D(e,["outputMimeType"]);n!==void 0&&g!=null&&O(n,["parameters","outputOptions","mimeType"],g);const x=D(e,["outputCompressionQuality"]);if(n!==void 0&&x!=null&&O(n,["parameters","outputOptions","compressionQuality"],x),D(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(D(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function Ole(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],Dle(t,s,n)),n}function Mle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Yr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Ile(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);n!==void 0&&o!=null&&O(n,["_query","filter"],o);const l=D(e,["queryBase"]);return n!==void 0&&l!=null&&O(n,["_url","models_url"],pU(t,l)),a}function Rle(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Ile(t,a,n)),n}function Lle(t,e,n){const a={},i=D(e,["displayName"]);n!==void 0&&i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);n!==void 0&&s!=null&&O(n,["description"],s);const o=D(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&O(n,["defaultCheckpointId"],o),a}function Fle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Yr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Lle(t,i,n)),n}function $le(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Yr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Ble(t,e){const n={};if(D(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(D(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(D(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function zle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>ZN(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],Ble(t,s)),n}function qle(t,e){const n={};if(D(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=D(e,["imageBytes"]);a!=null&&O(n,["bytesBase64Encoded"],xd(t,a));const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Ule(t,e,n){const a={},i=D(e,["numberOfVideos"]);if(n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i),D(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(D(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=D(e,["durationSeconds"]);if(n!==void 0&&s!=null&&O(n,["parameters","durationSeconds"],s),D(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=D(e,["aspectRatio"]);if(n!==void 0&&o!=null&&O(n,["parameters","aspectRatio"],o),D(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=D(e,["personGeneration"]);if(n!==void 0&&l!=null&&O(n,["parameters","personGeneration"],l),D(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=D(e,["negativePrompt"]);if(n!==void 0&&c!=null&&O(n,["parameters","negativePrompt"],c),D(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function Vle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["image"]);s!=null&&O(n,["instances[0]","image"],qle(t,s));const o=D(e,["config"]);return o!=null&&O(n,["config"],Ule(t,o,n)),n}function Hle(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Gle(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],Hle(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function zg(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Gle(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Wle(t,e){const n={},a=D(e,["featureSelectionPreference"]);return a!=null&&O(n,["featureSelectionPreference"],a),n}function Kle(t,e){const n={},a=D(e,["method"]);a!=null&&O(n,["method"],a);const i=D(e,["category"]);i!=null&&O(n,["category"],i);const s=D(e,["threshold"]);return s!=null&&O(n,["threshold"],s),n}function Yle(){return{}}function Qle(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Xle(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Qle(t,a)),n}function Jle(){return{}}function Zle(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function ece(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],Zle(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function tce(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],ece(t,a)),n}function yU(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Yle());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],Xle(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],Jle());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],tce(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const d=D(e,["functionDeclarations"]);return d!=null&&O(n,["functionDeclarations"],d),n}function nce(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function rce(t,e){const n={},a=D(e,["latitude"]);a!=null&&O(n,["latitude"],a);const i=D(e,["longitude"]);return i!=null&&O(n,["longitude"],i),n}function ace(t,e){const n={},a=D(e,["latLng"]);return a!=null&&O(n,["latLng"],rce(t,a)),n}function ice(t,e){const n={},a=D(e,["functionCallingConfig"]);a!=null&&O(n,["functionCallingConfig"],nce(t,a));const i=D(e,["retrievalConfig"]);return i!=null&&O(n,["retrievalConfig"],ace(t,i)),n}function sce(t,e){const n={},a=D(e,["voiceName"]);return a!=null&&O(n,["voiceName"],a),n}function oce(t,e){const n={},a=D(e,["prebuiltVoiceConfig"]);return a!=null&&O(n,["prebuiltVoiceConfig"],sce(t,a)),n}function lce(t,e){const n={},a=D(e,["voiceConfig"]);a!=null&&O(n,["voiceConfig"],oce(t,a));const i=D(e,["languageCode"]);return i!=null&&O(n,["languageCode"],i),n}function cce(t,e){const n={},a=D(e,["includeThoughts"]);a!=null&&O(n,["includeThoughts"],a);const i=D(e,["thinkingBudget"]);return i!=null&&O(n,["thinkingBudget"],i),n}function uce(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],zg(t,ss(t,i)));const s=D(e,["temperature"]);s!=null&&O(a,["temperature"],s);const o=D(e,["topP"]);o!=null&&O(a,["topP"],o);const l=D(e,["topK"]);l!=null&&O(a,["topK"],l);const c=D(e,["candidateCount"]);c!=null&&O(a,["candidateCount"],c);const d=D(e,["maxOutputTokens"]);d!=null&&O(a,["maxOutputTokens"],d);const f=D(e,["stopSequences"]);f!=null&&O(a,["stopSequences"],f);const p=D(e,["responseLogprobs"]);p!=null&&O(a,["responseLogprobs"],p);const g=D(e,["logprobs"]);g!=null&&O(a,["logprobs"],g);const x=D(e,["presencePenalty"]);x!=null&&O(a,["presencePenalty"],x);const b=D(e,["frequencyPenalty"]);b!=null&&O(a,["frequencyPenalty"],b);const j=D(e,["seed"]);j!=null&&O(a,["seed"],j);const S=D(e,["responseMimeType"]);S!=null&&O(a,["responseMimeType"],S);const _=D(e,["responseSchema"]);_!=null&&O(a,["responseSchema"],uU(t,_));const T=D(e,["routingConfig"]);T!=null&&O(a,["routingConfig"],T);const C=D(e,["modelSelectionConfig"]);C!=null&&O(a,["modelConfig"],Wle(t,C));const E=D(e,["safetySettings"]);if(n!==void 0&&E!=null){let K=E;Array.isArray(K)&&(K=K.map(W=>Kle(t,W))),O(n,["safetySettings"],K)}const k=D(e,["tools"]);if(n!==void 0&&k!=null){let K=XN(t,k);Array.isArray(K)&&(K=K.map(W=>yU(t,QN(t,W)))),O(n,["tools"],K)}const P=D(e,["toolConfig"]);n!==void 0&&P!=null&&O(n,["toolConfig"],ice(t,P));const I=D(e,["labels"]);n!==void 0&&I!=null&&O(n,["labels"],I);const R=D(e,["cachedContent"]);n!==void 0&&R!=null&&O(n,["cachedContent"],yd(t,R));const z=D(e,["responseModalities"]);z!=null&&O(a,["responseModalities"],z);const q=D(e,["mediaResolution"]);q!=null&&O(a,["mediaResolution"],q);const F=D(e,["speechConfig"]);F!=null&&O(a,["speechConfig"],lce(t,dU(t,F)));const V=D(e,["audioTimestamp"]);V!=null&&O(a,["audioTimestamp"],V);const H=D(e,["thinkingConfig"]);return H!=null&&O(a,["thinkingConfig"],cce(t,H)),a}function w4(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>zg(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["generationConfig"],uce(t,s,n)),n}function dce(t,e,n){const a={},i=D(e,["taskType"]);n!==void 0&&i!=null&&O(n,["instances[]","task_type"],i);const s=D(e,["title"]);n!==void 0&&s!=null&&O(n,["instances[]","title"],s);const o=D(e,["outputDimensionality"]);n!==void 0&&o!=null&&O(n,["parameters","outputDimensionality"],o);const l=D(e,["mimeType"]);n!==void 0&&l!=null&&O(n,["instances[]","mimeType"],l);const c=D(e,["autoTruncate"]);return n!==void 0&&c!=null&&O(n,["parameters","autoTruncate"],c),a}function hce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["contents"]);i!=null&&O(n,["instances[]","content"],cU(t,i));const s=D(e,["config"]);return s!=null&&O(n,["config"],dce(t,s,n)),n}function fce(t,e,n){const a={},i=D(e,["outputGcsUri"]);n!==void 0&&i!=null&&O(n,["parameters","storageUri"],i);const s=D(e,["negativePrompt"]);n!==void 0&&s!=null&&O(n,["parameters","negativePrompt"],s);const o=D(e,["numberOfImages"]);n!==void 0&&o!=null&&O(n,["parameters","sampleCount"],o);const l=D(e,["aspectRatio"]);n!==void 0&&l!=null&&O(n,["parameters","aspectRatio"],l);const c=D(e,["guidanceScale"]);n!==void 0&&c!=null&&O(n,["parameters","guidanceScale"],c);const d=D(e,["seed"]);n!==void 0&&d!=null&&O(n,["parameters","seed"],d);const f=D(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&O(n,["parameters","safetySetting"],f);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const g=D(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&O(n,["parameters","includeSafetyAttributes"],g);const x=D(e,["includeRaiReason"]);n!==void 0&&x!=null&&O(n,["parameters","includeRaiReason"],x);const b=D(e,["language"]);n!==void 0&&b!=null&&O(n,["parameters","language"],b);const j=D(e,["outputMimeType"]);n!==void 0&&j!=null&&O(n,["parameters","outputOptions","mimeType"],j);const S=D(e,["outputCompressionQuality"]);n!==void 0&&S!=null&&O(n,["parameters","outputOptions","compressionQuality"],S);const _=D(e,["addWatermark"]);n!==void 0&&_!=null&&O(n,["parameters","addWatermark"],_);const T=D(e,["enhancePrompt"]);return n!==void 0&&T!=null&&O(n,["parameters","enhancePrompt"],T),a}function pce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],fce(t,s,n)),n}function fO(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["gcsUri"],a);const i=D(e,["imageBytes"]);i!=null&&O(n,["bytesBase64Encoded"],xd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function mce(t,e){const n={},a=D(e,["maskMode"]);a!=null&&O(n,["maskMode"],a);const i=D(e,["segmentationClasses"]);i!=null&&O(n,["maskClasses"],i);const s=D(e,["maskDilation"]);return s!=null&&O(n,["dilation"],s),n}function gce(t,e){const n={},a=D(e,["controlType"]);a!=null&&O(n,["controlType"],a);const i=D(e,["enableControlImageComputation"]);return i!=null&&O(n,["computeControl"],i),n}function yce(t,e){const n={},a=D(e,["styleDescription"]);return a!=null&&O(n,["styleDescription"],a),n}function xce(t,e){const n={},a=D(e,["subjectType"]);a!=null&&O(n,["subjectType"],a);const i=D(e,["subjectDescription"]);return i!=null&&O(n,["subjectDescription"],i),n}function vce(t,e){const n={},a=D(e,["referenceImage"]);a!=null&&O(n,["referenceImage"],fO(t,a));const i=D(e,["referenceId"]);i!=null&&O(n,["referenceId"],i);const s=D(e,["referenceType"]);s!=null&&O(n,["referenceType"],s);const o=D(e,["maskImageConfig"]);o!=null&&O(n,["maskImageConfig"],mce(t,o));const l=D(e,["controlImageConfig"]);l!=null&&O(n,["controlImageConfig"],gce(t,l));const c=D(e,["styleImageConfig"]);c!=null&&O(n,["styleImageConfig"],yce(t,c));const d=D(e,["subjectImageConfig"]);return d!=null&&O(n,["subjectImageConfig"],xce(t,d)),n}function bce(t,e,n){const a={},i=D(e,["outputGcsUri"]);n!==void 0&&i!=null&&O(n,["parameters","storageUri"],i);const s=D(e,["negativePrompt"]);n!==void 0&&s!=null&&O(n,["parameters","negativePrompt"],s);const o=D(e,["numberOfImages"]);n!==void 0&&o!=null&&O(n,["parameters","sampleCount"],o);const l=D(e,["aspectRatio"]);n!==void 0&&l!=null&&O(n,["parameters","aspectRatio"],l);const c=D(e,["guidanceScale"]);n!==void 0&&c!=null&&O(n,["parameters","guidanceScale"],c);const d=D(e,["seed"]);n!==void 0&&d!=null&&O(n,["parameters","seed"],d);const f=D(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&O(n,["parameters","safetySetting"],f);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const g=D(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&O(n,["parameters","includeSafetyAttributes"],g);const x=D(e,["includeRaiReason"]);n!==void 0&&x!=null&&O(n,["parameters","includeRaiReason"],x);const b=D(e,["language"]);n!==void 0&&b!=null&&O(n,["parameters","language"],b);const j=D(e,["outputMimeType"]);n!==void 0&&j!=null&&O(n,["parameters","outputOptions","mimeType"],j);const S=D(e,["outputCompressionQuality"]);n!==void 0&&S!=null&&O(n,["parameters","outputOptions","compressionQuality"],S);const _=D(e,["editMode"]);n!==void 0&&_!=null&&O(n,["parameters","editMode"],_);const T=D(e,["baseSteps"]);return n!==void 0&&T!=null&&O(n,["parameters","editConfig","baseSteps"],T),a}function jce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>vce(t,c))),O(n,["instances[0]","referenceImages"],l)}const o=D(e,["config"]);return o!=null&&O(n,["config"],bce(t,o,n)),n}function wce(t,e,n){const a={},i=D(e,["includeRaiReason"]);n!==void 0&&i!=null&&O(n,["parameters","includeRaiReason"],i);const s=D(e,["outputMimeType"]);n!==void 0&&s!=null&&O(n,["parameters","outputOptions","mimeType"],s);const o=D(e,["outputCompressionQuality"]);n!==void 0&&o!=null&&O(n,["parameters","outputOptions","compressionQuality"],o);const l=D(e,["numberOfImages"]);n!==void 0&&l!=null&&O(n,["parameters","sampleCount"],l);const c=D(e,["mode"]);return n!==void 0&&c!=null&&O(n,["parameters","mode"],c),a}function Nce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["image"]);i!=null&&O(n,["instances[0]","image"],fO(t,i));const s=D(e,["upscaleFactor"]);s!=null&&O(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=D(e,["config"]);return o!=null&&O(n,["config"],wce(t,o,n)),n}function Sce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Yr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function _ce(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);n!==void 0&&o!=null&&O(n,["_query","filter"],o);const l=D(e,["queryBase"]);return n!==void 0&&l!=null&&O(n,["_url","models_url"],pU(t,l)),a}function Cce(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],_ce(t,a,n)),n}function Tce(t,e,n){const a={},i=D(e,["displayName"]);n!==void 0&&i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);n!==void 0&&s!=null&&O(n,["description"],s);const o=D(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&O(n,["defaultCheckpointId"],o),a}function kce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Tce(t,i,n)),n}function Ace(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Yr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Ece(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],zg(t,ss(t,i)));const s=D(e,["tools"]);if(n!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>yU(t,c))),O(n,["tools"],l)}const o=D(e,["generationConfig"]);return n!==void 0&&o!=null&&O(n,["generationConfig"],o),a}function Pce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>zg(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],Ece(t,s,n)),n}function Dce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>zg(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],s),n}function Oce(t,e,n){const a={},i=D(e,["numberOfVideos"]);n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i);const s=D(e,["outputGcsUri"]);n!==void 0&&s!=null&&O(n,["parameters","storageUri"],s);const o=D(e,["fps"]);n!==void 0&&o!=null&&O(n,["parameters","fps"],o);const l=D(e,["durationSeconds"]);n!==void 0&&l!=null&&O(n,["parameters","durationSeconds"],l);const c=D(e,["seed"]);n!==void 0&&c!=null&&O(n,["parameters","seed"],c);const d=D(e,["aspectRatio"]);n!==void 0&&d!=null&&O(n,["parameters","aspectRatio"],d);const f=D(e,["resolution"]);n!==void 0&&f!=null&&O(n,["parameters","resolution"],f);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const g=D(e,["pubsubTopic"]);n!==void 0&&g!=null&&O(n,["parameters","pubsubTopic"],g);const x=D(e,["negativePrompt"]);n!==void 0&&x!=null&&O(n,["parameters","negativePrompt"],x);const b=D(e,["enhancePrompt"]);return n!==void 0&&b!=null&&O(n,["parameters","enhancePrompt"],b),a}function Mce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Yr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["image"]);s!=null&&O(n,["instances[0]","image"],fO(t,s));const o=D(e,["config"]);return o!=null&&O(n,["config"],Oce(t,o,n)),n}function Ice(t,e){const n={},a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Rce(t,e){const n={},a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Ice(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function Lce(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Rce(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Fce(t,e){const n={},a=D(e,["citationSources"]);return a!=null&&O(n,["citations"],a),n}function $ce(t,e){const n={},a=D(e,["content"]);a!=null&&O(n,["content"],Lce(t,a));const i=D(e,["citationMetadata"]);i!=null&&O(n,["citationMetadata"],Fce(t,i));const s=D(e,["tokenCount"]);s!=null&&O(n,["tokenCount"],s);const o=D(e,["finishReason"]);o!=null&&O(n,["finishReason"],o);const l=D(e,["avgLogprobs"]);l!=null&&O(n,["avgLogprobs"],l);const c=D(e,["groundingMetadata"]);c!=null&&O(n,["groundingMetadata"],c);const d=D(e,["index"]);d!=null&&O(n,["index"],d);const f=D(e,["logprobsResult"]);f!=null&&O(n,["logprobsResult"],f);const p=D(e,["safetyRatings"]);return p!=null&&O(n,["safetyRatings"],p),n}function N4(t,e){const n={},a=D(e,["candidates"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>$ce(t,c))),O(n,["candidates"],l)}const i=D(e,["modelVersion"]);i!=null&&O(n,["modelVersion"],i);const s=D(e,["promptFeedback"]);s!=null&&O(n,["promptFeedback"],s);const o=D(e,["usageMetadata"]);return o!=null&&O(n,["usageMetadata"],o),n}function Bce(t,e){const n={},a=D(e,["values"]);return a!=null&&O(n,["values"],a),n}function zce(){return{}}function qce(t,e){const n={},a=D(e,["embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Bce(t,o))),O(n,["embeddings"],s)}return D(e,["metadata"])!=null&&O(n,["metadata"],zce()),n}function Uce(t,e){const n={},a=D(e,["bytesBase64Encoded"]);a!=null&&O(n,["imageBytes"],xd(t,a));const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function xU(t,e){const n={},a=D(e,["safetyAttributes","categories"]);a!=null&&O(n,["categories"],a);const i=D(e,["safetyAttributes","scores"]);i!=null&&O(n,["scores"],i);const s=D(e,["contentType"]);return s!=null&&O(n,["contentType"],s),n}function Vce(t,e){const n={},a=D(e,["_self"]);a!=null&&O(n,["image"],Uce(t,a));const i=D(e,["raiFilteredReason"]);i!=null&&O(n,["raiFilteredReason"],i);const s=D(e,["_self"]);return s!=null&&O(n,["safetyAttributes"],xU(t,s)),n}function Hce(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Vce(t,o))),O(n,["generatedImages"],s)}const i=D(e,["positivePromptSafetyAttributes"]);return i!=null&&O(n,["positivePromptSafetyAttributes"],xU(t,i)),n}function Gce(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["updateTime"]);return s!=null&&O(n,["updateTime"],s),n}function qE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);s!=null&&O(n,["description"],s);const o=D(e,["version"]);o!=null&&O(n,["version"],o);const l=D(e,["_self"]);l!=null&&O(n,["tunedModelInfo"],Gce(t,l));const c=D(e,["inputTokenLimit"]);c!=null&&O(n,["inputTokenLimit"],c);const d=D(e,["outputTokenLimit"]);d!=null&&O(n,["outputTokenLimit"],d);const f=D(e,["supportedGenerationMethods"]);return f!=null&&O(n,["supportedActions"],f),n}function Wce(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["_self"]);if(i!=null){let s=mU(t,i);Array.isArray(s)&&(s=s.map(o=>qE(t,o))),O(n,["models"],s)}return n}function Kce(){return{}}function Yce(t,e){const n={},a=D(e,["totalTokens"]);a!=null&&O(n,["totalTokens"],a);const i=D(e,["cachedContentTokenCount"]);return i!=null&&O(n,["cachedContentTokenCount"],i),n}function Qce(t,e){const n={},a=D(e,["video","uri"]);a!=null&&O(n,["uri"],a);const i=D(e,["video","encodedVideo"]);i!=null&&O(n,["videoBytes"],xd(t,i));const s=D(e,["encoding"]);return s!=null&&O(n,["mimeType"],s),n}function Xce(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Qce(t,a)),n}function Jce(t,e){const n={},a=D(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Xce(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function Zce(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response","generateVideoResponse"]);return l!=null&&O(n,["response"],Jce(t,l)),n}function eue(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function tue(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],eue(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function nue(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>tue(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function rue(t,e){const n={},a=D(e,["citations"]);return a!=null&&O(n,["citations"],a),n}function aue(t,e){const n={},a=D(e,["content"]);a!=null&&O(n,["content"],nue(t,a));const i=D(e,["citationMetadata"]);i!=null&&O(n,["citationMetadata"],rue(t,i));const s=D(e,["finishMessage"]);s!=null&&O(n,["finishMessage"],s);const o=D(e,["finishReason"]);o!=null&&O(n,["finishReason"],o);const l=D(e,["avgLogprobs"]);l!=null&&O(n,["avgLogprobs"],l);const c=D(e,["groundingMetadata"]);c!=null&&O(n,["groundingMetadata"],c);const d=D(e,["index"]);d!=null&&O(n,["index"],d);const f=D(e,["logprobsResult"]);f!=null&&O(n,["logprobsResult"],f);const p=D(e,["safetyRatings"]);return p!=null&&O(n,["safetyRatings"],p),n}function S4(t,e){const n={},a=D(e,["candidates"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>aue(t,f))),O(n,["candidates"],d)}const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["responseId"]);s!=null&&O(n,["responseId"],s);const o=D(e,["modelVersion"]);o!=null&&O(n,["modelVersion"],o);const l=D(e,["promptFeedback"]);l!=null&&O(n,["promptFeedback"],l);const c=D(e,["usageMetadata"]);return c!=null&&O(n,["usageMetadata"],c),n}function iue(t,e){const n={},a=D(e,["truncated"]);a!=null&&O(n,["truncated"],a);const i=D(e,["token_count"]);return i!=null&&O(n,["tokenCount"],i),n}function sue(t,e){const n={},a=D(e,["values"]);a!=null&&O(n,["values"],a);const i=D(e,["statistics"]);return i!=null&&O(n,["statistics"],iue(t,i)),n}function oue(t,e){const n={},a=D(e,["billableCharacterCount"]);return a!=null&&O(n,["billableCharacterCount"],a),n}function lue(t,e){const n={},a=D(e,["predictions[]","embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>sue(t,o))),O(n,["embeddings"],s)}const i=D(e,["metadata"]);return i!=null&&O(n,["metadata"],oue(t,i)),n}function cue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["gcsUri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["imageBytes"],xd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function vU(t,e){const n={},a=D(e,["safetyAttributes","categories"]);a!=null&&O(n,["categories"],a);const i=D(e,["safetyAttributes","scores"]);i!=null&&O(n,["scores"],i);const s=D(e,["contentType"]);return s!=null&&O(n,["contentType"],s),n}function pO(t,e){const n={},a=D(e,["_self"]);a!=null&&O(n,["image"],cue(t,a));const i=D(e,["raiFilteredReason"]);i!=null&&O(n,["raiFilteredReason"],i);const s=D(e,["_self"]);s!=null&&O(n,["safetyAttributes"],vU(t,s));const o=D(e,["prompt"]);return o!=null&&O(n,["enhancedPrompt"],o),n}function uue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>pO(t,o))),O(n,["generatedImages"],s)}const i=D(e,["positivePromptSafetyAttributes"]);return i!=null&&O(n,["positivePromptSafetyAttributes"],vU(t,i)),n}function due(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>pO(t,s))),O(n,["generatedImages"],i)}return n}function hue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>pO(t,s))),O(n,["generatedImages"],i)}return n}function fue(t,e){const n={},a=D(e,["endpoint"]);a!=null&&O(n,["name"],a);const i=D(e,["deployedModelId"]);return i!=null&&O(n,["deployedModelId"],i),n}function pue(t,e){const n={},a=D(e,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["updateTime"]);return s!=null&&O(n,["updateTime"],s),n}function mue(t,e){const n={},a=D(e,["checkpointId"]);a!=null&&O(n,["checkpointId"],a);const i=D(e,["epoch"]);i!=null&&O(n,["epoch"],i);const s=D(e,["step"]);return s!=null&&O(n,["step"],s),n}function UE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);s!=null&&O(n,["description"],s);const o=D(e,["versionId"]);o!=null&&O(n,["version"],o);const l=D(e,["deployedModels"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(x=>fue(t,x))),O(n,["endpoints"],g)}const c=D(e,["labels"]);c!=null&&O(n,["labels"],c);const d=D(e,["_self"]);d!=null&&O(n,["tunedModelInfo"],pue(t,d));const f=D(e,["defaultCheckpointId"]);f!=null&&O(n,["defaultCheckpointId"],f);const p=D(e,["checkpoints"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>mue(t,x))),O(n,["checkpoints"],g)}return n}function gue(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["_self"]);if(i!=null){let s=mU(t,i);Array.isArray(s)&&(s=s.map(o=>UE(t,o))),O(n,["models"],s)}return n}function yue(){return{}}function xue(t,e){const n={},a=D(e,["totalTokens"]);return a!=null&&O(n,["totalTokens"],a),n}function vue(t,e){const n={},a=D(e,["tokensInfo"]);return a!=null&&O(n,["tokensInfo"],a),n}function bue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["uri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["videoBytes"],xd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function jue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],bue(t,a)),n}function wue(t,e){const n={},a=D(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>jue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function Nue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response"]);return l!=null&&O(n,["response"],wue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sue="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function _ue(t,e,n){const a=new Use;let i;if(n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),t.isVertexAI()){const s=mle(t,i);Object.assign(a,s)}else{const s=ple(t,i);Object.assign(a,s)}e(a)}class Cue{constructor(e,n,a){this.apiClient=e,this.auth=n,this.webSocketFactory=a}async connect(e){var n,a,i,s;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const d=Eue(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{const E=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${E}`}let f=()=>{};const p=new Promise(E=>{f=E}),g=e.callbacks,x=function(){var E;(E=g==null?void 0:g.onopen)===null||E===void 0||E.call(g),f({})},b=this.apiClient,j={onopen:x,onmessage:E=>{_ue(b,g.onmessage,E)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(E){},onclose:(a=g==null?void 0:g.onclose)!==null&&a!==void 0?a:function(E){}},S=this.webSocketFactory.create(c,Aue(d),j);S.connect(),await p;let _=Yr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const E=this.apiClient.getProject(),k=this.apiClient.getLocation();_=`projects/${E}/locations/${k}/`+_}let T={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[hd.AUDIO]}:e.config.responseModalities=[hd.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=$oe(this.apiClient,C):T=Foe(this.apiClient,C),delete T.config,S.send(JSON.stringify(T)),new kue(S,this.apiClient)}}const Tue={turnComplete:!0};class kue{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let a=[];try{a=gd(e,n.turns),e.isVertexAI()?a=a.map(i=>zg(e,i)):a=a.map(i=>ZN(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:a,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let a=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?a=n.functionResponses:a=[n.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const s of a){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Sue)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},Tue),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Hoe(this.apiClient,e)}:n={realtimeInput:Voe(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Aue(t){const e={};return t.forEach((n,a)=>{e[a]=n}),e}function Eue(t){const e=new Headers;for(const[n,a]of Object.entries(t))e.append(n,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pue extends Rb{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(a=>{var i;let s;const o=[];if(a!=null&&a.generatedImages)for(const c of a.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s}:l={generatedImages:o},l}),this.list=async n=>{var a;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((a=o.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new JN(sg.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const a={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(a.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async n=>{let a={numberOfImages:1,mode:"upscale"};n.config&&(a=Object.assign(Object.assign({},a),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:a};return await this.upscaleImageInternal(i)}}async generateContentInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=w4(this.apiClient,e);return l=cn("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=S4(this.apiClient,f),g=new jj;return Object.assign(g,p),g})}else{const d=j4(this.apiClient,e);return l=cn("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=N4(this.apiClient,f),g=new jj;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=w4(this.apiClient,e);l=cn("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(p){return Sw(this,arguments,function*(){var g,x,b,j;try{for(var S=!0,_=BE(p),T;T=yield fi(_.next()),g=T.done,!g;S=!0){j=T.value,S=!1;const E=S4(f,yield fi(j.json())),k=new jj;Object.assign(k,E),yield yield fi(k)}}catch(C){x={error:C}}finally{try{!S&&!g&&(b=_.return)&&(yield fi(b.call(_)))}finally{if(x)throw x.error}}})})}else{const d=j4(this.apiClient,e);l=cn("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return Sw(this,arguments,function*(){var g,x,b,j;try{for(var S=!0,_=BE(p),T;T=yield fi(_.next()),g=T.done,!g;S=!0){j=T.value,S=!1;const E=N4(f,yield fi(j.json())),k=new jj;Object.assign(k,E),yield yield fi(k)}}catch(C){x={error:C}}finally{try{!S&&!g&&(b=_.return)&&(yield fi(b.call(_)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=hce(this.apiClient,e);return l=cn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=lue(this.apiClient,f),g=new l4;return Object.assign(g,p),g})}else{const d=Ple(this.apiClient,e);return l=cn("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=qce(this.apiClient,f),g=new l4;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=pce(this.apiClient,e);return l=cn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=uue(this.apiClient,f),g=new c4;return Object.assign(g,p),g})}else{const d=Ole(this.apiClient,e);return l=cn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Hce(this.apiClient,f),g=new c4;return Object.assign(g,p),g})}}async editImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=jce(this.apiClient,e);return s=cn("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=due(this.apiClient,c),f=new Lse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Nce(this.apiClient,e);return s=cn("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=hue(this.apiClient,c),f=new Fse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Sce(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>UE(this.apiClient,f))}else{const d=Mle(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>qE(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Cce(this.apiClient,e);return l=cn("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=gue(this.apiClient,f),g=new u4;return Object.assign(g,p),g})}else{const d=Rle(this.apiClient,e);return l=cn("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Wce(this.apiClient,f),g=new u4;return Object.assign(g,p),g})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=kce(this.apiClient,e);return l=cn("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>UE(this.apiClient,f))}else{const d=Fle(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>qE(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Ace(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=yue(),p=new d4;return Object.assign(p,f),p})}else{const d=$le(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Kce(),p=new d4;return Object.assign(p,f),p})}}async countTokens(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Pce(this.apiClient,e);return l=cn("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=xue(this.apiClient,f),g=new h4;return Object.assign(g,p),g})}else{const d=zle(this.apiClient,e);return l=cn("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Yce(this.apiClient,f),g=new h4;return Object.assign(g,p),g})}}async computeTokens(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Dce(this.apiClient,e);return s=cn("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=vue(this.apiClient,c),f=new $se;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Mce(this.apiClient,e);return l=cn("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>Nue(this.apiClient,f))}else{const d=Vle(this.apiClient,e);return l=cn("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Zce(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Due(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["_url","operationName"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Oue(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["_url","operationName"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Mue(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["operationName"],a);const i=D(e,["resourceName"]);i!=null&&O(n,["_url","resourceName"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],s),n}function Iue(t,e){const n={},a=D(e,["video","uri"]);a!=null&&O(n,["uri"],a);const i=D(e,["video","encodedVideo"]);i!=null&&O(n,["videoBytes"],xd(t,i));const s=D(e,["encoding"]);return s!=null&&O(n,["mimeType"],s),n}function Rue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Iue(t,a)),n}function Lue(t,e){const n={},a=D(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Rue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function Fue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response","generateVideoResponse"]);return l!=null&&O(n,["response"],Lue(t,l)),n}function $ue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["uri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["videoBytes"],xd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Bue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],$ue(t,a)),n}function zue(t,e){const n={},a=D(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Bue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function _4(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response"]);return l!=null&&O(n,["response"],zue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class que extends Rb{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,a=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;return a&&"httpOptions"in a&&(s=a.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:a})}async getVideosOperationInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Oue(this.apiClient,e);return l=cn("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>_4(this.apiClient,f))}else{const d=Due(this.apiClient,e);return l=cn("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Fue(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Mue(this.apiClient,e);return s=cn("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>_4(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uue="Content-Type",Vue="X-Server-Timeout",Hue="User-Agent",Gue="x-goog-api-client",Wue="0.14.1",Kue=`google-genai-sdk/${Wue}`,Yue="v1beta1",Que="v1beta",C4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class bU extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class VE extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class Xue{constructor(e){var n,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Yue,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:Que,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,a){const i=[this.getRequestUrlInternal(n)];return a&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))i.searchParams.append(o,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const a=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?a[i]=Object.assign(Object.assign({},a[i]),s):s!==void 0&&(a[i]=s);return a}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,a){if(n&&n.timeout||a){const i=new AbortController,s=i.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>i.abort(),n.timeout),a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await T4(i),new $E(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await T4(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Sw(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield fi(i.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c);try{const p=JSON.parse(d);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),x=g.status,b=g.code,j=`got status: ${x}. ${JSON.stringify(p)}`;if(b>=400&&b<500)throw new bU(j);if(b>=500&&b<600)throw new VE(j)}}catch(p){const g=p;if(g.name==="ClientError"||g.name==="ServerError")throw p}o+=d;let f=o.match(C4);for(;f;){const p=f[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield fi(new $E(g)),o=o.slice(f[0].length),f=o.match(C4)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},n=Kue+" "+this.clientOptions.userAgentExtra;return e[Hue]=n,e[Gue]=n,e[Uue]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))n.append(a,i);e.timeout&&e.timeout>0&&n.append(Vue,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var a;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const l=(a=n==null?void 0:n.mimeType)!==null&&a!==void 0?a:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var a;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:cn("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(a=o==null?void 0:o.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function T4(t){var e;if(t===void 0)throw new VE("response is undefined");if(!t.ok){const n=t.status,a=t.statusText;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=`got status: ${n} ${a}. ${JSON.stringify(i)}`;throw n>=400&&n<500?new bU(s):n>=500&&n<600?new VE(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Zue(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);return n!==void 0&&o!=null&&O(n,["_query","filter"],o),a}function ede(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Zue(t,a,n)),n}function tde(t,e){const n={},a=D(e,["textInput"]);a!=null&&O(n,["textInput"],a);const i=D(e,["output"]);return i!=null&&O(n,["output"],i),n}function nde(t,e){const n={};if(D(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=D(e,["examples"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>tde(t,s))),O(n,["examples","examples"],i)}return n}function rde(t,e,n){const a={};if(D(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=D(e,["tunedModelDisplayName"]);if(n!==void 0&&i!=null&&O(n,["displayName"],i),D(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=D(e,["epochCount"]);n!==void 0&&s!=null&&O(n,["tuningTask","hyperparameters","epochCount"],s);const o=D(e,["learningRateMultiplier"]);if(o!=null&&O(a,["tuningTask","hyperparameters","learningRateMultiplier"],o),D(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(D(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=D(e,["batchSize"]);n!==void 0&&l!=null&&O(n,["tuningTask","hyperparameters","batchSize"],l);const c=D(e,["learningRate"]);return n!==void 0&&c!=null&&O(n,["tuningTask","hyperparameters","learningRate"],c),a}function ade(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["trainingDataset"]);i!=null&&O(n,["tuningTask","trainingData"],nde(t,i));const s=D(e,["config"]);return s!=null&&O(n,["config"],rde(t,s,n)),n}function ide(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function sde(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);return n!==void 0&&o!=null&&O(n,["_query","filter"],o),a}function ode(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],sde(t,a,n)),n}function lde(t,e,n){const a={},i=D(e,["gcsUri"]);if(n!==void 0&&i!=null&&O(n,["supervisedTuningSpec","trainingDatasetUri"],i),D(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function cde(t,e){const n={},a=D(e,["gcsUri"]);return a!=null&&O(n,["validationDatasetUri"],a),n}function ude(t,e,n){const a={},i=D(e,["validationDataset"]);n!==void 0&&i!=null&&O(n,["supervisedTuningSpec"],cde(t,i));const s=D(e,["tunedModelDisplayName"]);n!==void 0&&s!=null&&O(n,["tunedModelDisplayName"],s);const o=D(e,["description"]);n!==void 0&&o!=null&&O(n,["description"],o);const l=D(e,["epochCount"]);n!==void 0&&l!=null&&O(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=D(e,["learningRateMultiplier"]);n!==void 0&&c!=null&&O(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const d=D(e,["exportLastCheckpointOnly"]);n!==void 0&&d!=null&&O(n,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const f=D(e,["adapterSize"]);if(n!==void 0&&f!=null&&O(n,["supervisedTuningSpec","hyperParameters","adapterSize"],f),D(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(D(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return a}function dde(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["trainingDataset"]);i!=null&&O(n,["supervisedTuningSpec","trainingDatasetUri"],lde(t,i,n));const s=D(e,["config"]);return s!=null&&O(n,["config"],ude(t,s,n)),n}function hde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["model"],a);const i=D(e,["name"]);return i!=null&&O(n,["endpoint"],i),n}function jU(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["state"]);i!=null&&O(n,["state"],hU(t,i));const s=D(e,["createTime"]);s!=null&&O(n,["createTime"],s);const o=D(e,["tuningTask","startTime"]);o!=null&&O(n,["startTime"],o);const l=D(e,["tuningTask","completeTime"]);l!=null&&O(n,["endTime"],l);const c=D(e,["updateTime"]);c!=null&&O(n,["updateTime"],c);const d=D(e,["description"]);d!=null&&O(n,["description"],d);const f=D(e,["baseModel"]);f!=null&&O(n,["baseModel"],f);const p=D(e,["_self"]);p!=null&&O(n,["tunedModel"],hde(t,p));const g=D(e,["distillationSpec"]);g!=null&&O(n,["distillationSpec"],g);const x=D(e,["experiment"]);x!=null&&O(n,["experiment"],x);const b=D(e,["labels"]);b!=null&&O(n,["labels"],b);const j=D(e,["pipelineJob"]);j!=null&&O(n,["pipelineJob"],j);const S=D(e,["tunedModelDisplayName"]);return S!=null&&O(n,["tunedModelDisplayName"],S),n}function fde(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>jU(t,o))),O(n,["tuningJobs"],s)}return n}function pde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);return o!=null&&O(n,["error"],o),n}function mde(t,e){const n={},a=D(e,["checkpointId"]);a!=null&&O(n,["checkpointId"],a);const i=D(e,["epoch"]);i!=null&&O(n,["epoch"],i);const s=D(e,["step"]);s!=null&&O(n,["step"],s);const o=D(e,["endpoint"]);return o!=null&&O(n,["endpoint"],o),n}function gde(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],a);const i=D(e,["endpoint"]);i!=null&&O(n,["endpoint"],i);const s=D(e,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>mde(t,l))),O(n,["checkpoints"],o)}return n}function HE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["state"]);i!=null&&O(n,["state"],hU(t,i));const s=D(e,["createTime"]);s!=null&&O(n,["createTime"],s);const o=D(e,["startTime"]);o!=null&&O(n,["startTime"],o);const l=D(e,["endTime"]);l!=null&&O(n,["endTime"],l);const c=D(e,["updateTime"]);c!=null&&O(n,["updateTime"],c);const d=D(e,["error"]);d!=null&&O(n,["error"],d);const f=D(e,["description"]);f!=null&&O(n,["description"],f);const p=D(e,["baseModel"]);p!=null&&O(n,["baseModel"],p);const g=D(e,["tunedModel"]);g!=null&&O(n,["tunedModel"],gde(t,g));const x=D(e,["supervisedTuningSpec"]);x!=null&&O(n,["supervisedTuningSpec"],x);const b=D(e,["tuningDataStats"]);b!=null&&O(n,["tuningDataStats"],b);const j=D(e,["encryptionSpec"]);j!=null&&O(n,["encryptionSpec"],j);const S=D(e,["partnerModelTuningSpec"]);S!=null&&O(n,["partnerModelTuningSpec"],S);const _=D(e,["distillationSpec"]);_!=null&&O(n,["distillationSpec"],_);const T=D(e,["experiment"]);T!=null&&O(n,["experiment"],T);const C=D(e,["labels"]);C!=null&&O(n,["labels"],C);const E=D(e,["pipelineJob"]);E!=null&&O(n,["pipelineJob"],E);const k=D(e,["tunedModelDisplayName"]);return k!=null&&O(n,["tunedModelDisplayName"],k),n}function yde(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>HE(t,o))),O(n,["tuningJobs"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xde extends Rb{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new JN(sg.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const a=await this.tuneMldevInternal(n);let i="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?i=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(i=a.name.split("/operations/")[0]),{name:i,state:FE.JOB_STATE_QUEUED}}}}async getInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=ide(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>HE(this.apiClient,f))}else{const d=Jue(this.apiClient,e);return l=cn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>jU(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=ode(this.apiClient,e);return l=cn("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=yde(this.apiClient,f),g=new f4;return Object.assign(g,p),g})}else{const d=ede(this.apiClient,e);return l=cn("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=fde(this.apiClient,f),g=new f4;return Object.assign(g,p),g})}}async tuneInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=dde(this.apiClient,e);return s=cn("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>HE(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ade(this.apiClient,e);return s=cn("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>pde(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vde{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const bde=1024*1024*8,jde=3,wde=1e3,Nde=2,SC="x-goog-upload-status";async function Sde(t,e,n){var a,i,s;let o=0,l=0,c=new $E(new Response),d="upload";for(o=t.size;l<o;){const p=Math.min(bde,o-l),g=t.slice(l,l+p);l+p>=o&&(d+=", finalize");let x=0,b=wde;for(;x<jde&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((a=c==null?void 0:c.headers)===null||a===void 0)&&a[SC]));)x++,await Cde(b),b=b*Nde;if(l+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[SC])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[SC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function _de(t){return{size:t.size,type:t.type}}function Cde(t){return new Promise(e=>setTimeout(e,t))}class Tde{async upload(e,n,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Sde(e,n,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _de(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kde{create(e,n,a){return new Ade(e,n,a)}}class Ade{constructor(e,n,a){this.url=e,this.headers=n,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k4="x-goog-api-key";class Ede{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(k4)===null&&e.append(k4,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pde="gl-node/";class wU{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const a=zie(e,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const i=new Ede(this.apiKey);this.apiClient=new Xue({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Pde+"web",uploader:new Tde,downloader:new vde}),this.models=new Pue(this.apiClient),this.live=new Cue(this.apiClient,i,new kde),this.chats=new Kse(this.models,this.apiClient),this.caches=new Vse(this.apiClient),this.files=new ooe(this.apiClient),this.operations=new que(this.apiClient),this.tunings=new xde(this.apiClient)}}const Dde=()=>{const t=localStorage.getItem("currentClinicId");return t||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},NU=()=>localStorage.getItem("authToken");class Ode{constructor(){jr(this,"listeners",[]);jr(this,"activeRequests",0)}subscribe(e){return this.listeners.push(e),e(this.activeRequests>0),()=>this.unsubscribe(e)}unsubscribe(e){this.listeners=this.listeners.filter(n=>n!==e)}notify(e){e?this.activeRequests++:this.activeRequests=Math.max(0,this.activeRequests-1);const n=this.activeRequests>0;this.listeners.forEach(a=>a(n))}}const GE=new Ode,Mde="https://backend.newtons.in",Ide=()=>localStorage.getItem("authToken"),le=async(t,e={})=>{const n=Ide(),a={...e.headers};n&&(a.Authorization=`Bearer ${n}`),!(e.body instanceof FormData)&&!a["Content-Type"]&&(a["Content-Type"]="application/json");const i=a;let s=t.startsWith("/")?t:`/${t}`;s.startsWith("/api/")||(s=`/api${s}`);const o=`${Mde}${s}`;GE.notify(!0);try{console.log(`Making API call to: ${o}`);const l=await fetch(o,{...e,headers:i});if(l.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!l.ok){let c=`HTTP error! status: ${l.status}`;try{const d=await l.json();c=(d==null?void 0:d.message)||(d==null?void 0:d.error)||c}catch{}throw console.error(`API Error: ${l.status} ${l.statusText} - ${c}`),new Error(c)}return l}catch(l){throw l instanceof TypeError&&l.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",l):console.error("API Fetch Error:",l),l}finally{GE.notify(!1)}},_C="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Rde="models/gemini-3-flash-preview",Lde=`You are an intelligent Clinic Hub Assistant for a Clinic Management System. Your role is to help the Clinic Administrator or Doctor manage their clinic ecosystem efficiently.

You have access to the current state of the clinic settings and the staff list. You can perform actions to update these settings or manage staff members.

**Capabilities:**
1.  **View Settings & Staff:** User can ask about current charges, clinic details, or staff members. Answer based on the provided context.
2.  **Update Settings:** Change fees, clinic name, address, etc.
3.  **Manage Staff:** Add new staff members or update existing ones.
4.  **Voice AI Settings:** Update the \`voice_ai_language\` for the Live API Assistant. Available codes:
    -   India: \`en-US\` (English), \`hi-IN\` (Hindi), \`te-IN\` (Telugu), \`bn-IN\` (Bengali), \`mr-IN\` (Marathi), \`ta-IN\` (Tamil), \`gu-IN\` (Gujarati), \`kn-IN\` (Kannada), \`ml-IN\` (Malayalam), \`pa-IN\` (Punjabi)
    -   Global: \`es-ES\` (Spanish), \`fr-FR\` (French), \`de-DE\` (German), \`it-IT\` (Italian), \`pt-PT\` (Portuguese), \`ru-RU\` (Russian), \`ja-JP\` (Japanese), \`ko-KR\` (Korean), \`zh-CN\` (Chinese), \`ar-SA\` (Arabic).
5.  **Analyze Financials & Inventory:** Access the Analysis Dashboard to view revenue, expenses, and inventory movement. Set date ranges to filter data.
6.  **Manage Inventory:** Update pharmacy tokens (drugs) and lab tests. You will reference items by their **Serial Number** as provided in the context.
7.  **Purchase Management:** Search for distributors, select one, and build a purchase order by adding items. You can add multiple items at once. Editing items uses Serial Numbers.
8.  **Looping & Reasoning:** You should think step-by-step. If a user request involves multiple steps or if you need to check something after an action, you can continue the loop.
9.  **Follow-up:** If critical information is missing, ask the user.
10.  **Manage Custom Columns:** You can add or remove custom columns/fields for various entities (patients, drugs, lab_tests). Use the \`manage_custom_columns\` action.
11.  **Custom Fields Data:** When searching or updating items (like drugs or patients), pay attention to their \`custom_fields\`. You can update these fields using the \`update_drug\` (or similar) action by passing a \`custom_fields\` object with key-value pairs. Keys must match the \`key\` defined in the Clinic Settings.
12.  **Custom Tables:** You can create entirely new tables to track anything (e.g., "Gym Members", "Diet Plans"). Use \`create_custom_table\`. You can then add rows to these tables using \`add_table_row\` (requires Table ID) and update them with \`update_table_row\`. meaningful descriptions are helpful.
13.  **Dashboards:** You can create persistent custom dashboards using \`create_custom_dashboard\` or show a specialized temporary view using \`render_temporary_dashboard\`.
     - Use \`render_temporary_dashboard\` when the user asks to "show", "view", or "see" data (e.g., "Show me John's meds").
     - Use \`create_custom_dashboard\` when the user explicitly asks to "create a dashboard" or "save a view".
     - **Data Sources:** Use the provided "Dashboard Data Sources" context to know valid keys (e.g., \`api:patients\`, \`table:123\`).
       - **Advanced Features:** You can add **Charts** (bar, line, pie) and **Filters** to widgets.
       - **Filters (SERVER-SIDE):** Use the \`filters\` array in config. Filters are applied on the server for efficiency.
         - **Supported Operators:**
           - \`equals\` or \`eq\`: Exact match
           - \`neq\` or \`not_equals\`: Not equal
           - \`contains\` or \`like\`: Case-insensitive substring match
           - \`starts_with\`: Value starts with
           - \`ends_with\`: Value ends with
           - \`gt\` or \`greater_than\`: Greater than
           - \`gte\`: Greater than or equal
           - \`lt\` or \`less_than\`: Less than
           - \`lte\`: Less than or equal
           - \`in\`: Value in array (value should be array)
           - \`not_in\`: Value not in array
           - \`is_null\`: Field is null
           - \`is_not_null\`: Field is not null
           - \`between\`: Value between two values (value should be [min, max])
         - **Filterable Fields:** The "Dashboard Data Sources" in context includes a \`filterableFields\` list for each source. You **MUST** use these fields.
           - **Mixed Tables:** Sources like \`api:pharmacy-orders\` or \`api:lab-orders\` support filtering by associated **Patient** data using \`patient_name\`, \`patient_phone\`, and \`token\`.
         - **Example 1:** User: "Show pharmacy orders for John" -> Action: \`render_temporary_dashboard\` with widget config: \`filters: [{ field: 'patient_name', operator: 'contains', value: 'John' }]\`
         - **Example 2:** User: "Show orders for Token 123" -> \`filters: [{ field: 'token', operator: 'equals', value: 123 }]\`
         - **Example 3:** \`filters: [{ field: 'expiry_date', operator: 'lt', value: '2024-01-01' }, { field: 'stock', operator: 'gt', value: 0 }]\`
         - Smartly infer dates for "expired" (lt today), "expiring this week" (between today and next week), etc.
       - **Charts:** Set \`type: 'chart'\`. Config requires \`chartType\`, \`xAxisKey\` (category), \`dataKey\` (value).

**Interpretation Rules:**
- **Analysis Dates:** When the user asks for analysis (financial or inventory) for a specific time range (e.g., "last month", "yesterday"), you **MUST** include \`startDate\` and \`endDate\` in the \`navigate_to\` action for \`/dashboard/analysis\`.
- If the user says "add drug", "buy medicine", or "new stock", they **usually mean "Add Item to Purchase Order"** (use \`add_purchase_items\` or navigate to \`/dashboard/purchase\`).
- **Prerequisite:** If you are using ANY purchase tools (\`add_purchase_items\`, \`search_distributor_purchase\`, \`set_distributor_purchase\`, \`edit_purchase_items\`), you **MUST** include a \`navigate_to\` action with \`page: "/dashboard/purchase"\` as the **FIRST** action in your list, unless you are already on that page.
- **ONLY** use \`update_drug\` (create) if the user explicitly says "create new drug definition" or "add to master inventory".
- The correct route for purchasing is \`/dashboard/purchase\`.

- **Drug Name & Brand Handling (CRITICAL):**
  - "Name" refers to the **Composition Name** (or Generic Name).
  - "Brand Name" refers to the **Brand Name**.
  - **Auto-Computation:** If the user provides a *Brand Name* (e.g., "Tab Dolo 650"), you **MUST** automatically:
    1.  Infer the **Composition** (e.g., "Tab Paracetamol 650mg") and use it for the "name" field.
    2.  Use the provided brand for the "brand_name" field (e.g., "Dolo 650").
    3.  Infer the **pack size** if implied (e.g., "1x10") and use it for the "pack" field.
  - If the user provides only a Brand Name and you cannot confidently infer the Composition, you **MUST** use \`ask_followup_question\` to ask the user for the composition.
  - Apply this logic to both \`add_purchase_items\` and \`update_drug\` actions.

- **Inventory Navigation:** If you execute "update_drug" or "search_pharmacy_inventory", you **MUST** include a "navigate_to" action for "/dashboard/inventory". If you searched for or updated a specific term, append it as "?search=Term" (e.g. "/dashboard/inventory?search=Paracetamol").
- **Lab Navigation:** If you execute "update_lab_test", you **MUST** include a "navigate_to" action for "/lab-inventory", unless you are already on that page.

**Action Tools:**
You can perform the following actions. Return a JSON array of actions.

\`\`\`json
[
    {
        "action": "update_clinic_settings",
        "updates": {
            "admissionCharge": "number string",
            "perDayCharge": "number string",
            "otherCharges": "number string",
            "name": "string",
            "address": "string",
            "notes": "string",
            "logoUrl": "string",
            "upi_id": "string",
            "low_stock_threshold": number,
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "gemini_api_key": "string",
            "voice_ai_language": "string (e.g. 'en-US', 'te-IN')"
        }
    },
    {
        "action": "create_staff_member",
        "staff": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null
        }
    },
    {
        "action": "update_staff_member",
        "id": "string | number",
        "updates": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null,
            "active": boolean
        }
    },
    {
        "action": "set_analysis_dates",
        "startDate": "YYYY-MM-DD",
        "endDate": "YYYY-MM-DD"
    },
    {
        "action": "navigate_to",
        "page": "/dashboard/inventory" | "/lab-inventory" | "/dashboard/queue" | "/dashboard/staff" | "/dashboard/purchase" | "/dashboard/analysis" | "/dashboard/clinic-hub" | "/billing" | "/dashboard/patients",
        "section": "financial" | "inventory" | "string (optional)",
        "startDate": "YYYY-MM-DD (optional, for analysis page)",
        "endDate": "YYYY-MM-DD (optional, for analysis page)"
    },
    {
        "action": "highlight_section",
        "elementId": "string"
    },
    {
        "action": "refresh_analysis"
    },
    {
        "action": "ask_followup_question",
        "question": "string"
    },
    {
        "action": "search_pharmacy_inventory",
        "query": "string (name, brand, or composition)"
    },
    {
        "action": "update_drug",
        "id": "number",
        "updates": {
            "name": "string",
            "brand_name": "string",
            "description": "string",
            "mrp": "number (MRP)",
            "stock": "number",
            "pack": "string (e.g. strip, bottle)",
            "supplier": "string",
            "expiry_date": "YYYY-MM-DD",
            "rate": "number",
            "box_number": "string",
            "gst": "number",
            "margin": "number",
            "discount": "number",
            "batch": "string",
            "hsn_code": "string",
            "mfg": "string",
            "mfg": "string",
            "loose": "number",
            "custom_fields": "object { key: value } (Optional: Update custom field values)"
        }
    },
    {
        "action": "update_lab_test",
        "serial_number": 1,
        "updates": {
            "name": "string",
            "price": "number",
            "description": "string",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit }"
        }
    },
    {
        "action": "search_lab_inventory",
        "query": "string (test name or description)"
    },
    {
        "action": "create_lab_test",
        "test": {
            "name": "string",
            "price": "number",
            "description": "string (optional)",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit } (optional)"
        }
    },
    {
        "action": "search_distributor_purchase",
        "query": "string"
    },
    {
        "action": "set_distributor_purchase",
        "distributorId": "string"
    },
    {
        "action": "add_purchase_items",
        "items": [
            {
                "name": "string (Composition Name)",
                "brand_name": "string",
                "stock": "number (quantity)",
                "rate": "number (buying price)",
                "mrp": "number",
                "pack": "string",
                "expiry_date": "YYYY-MM-DD",
                "batch": "string",
                "discount": "number",
                "gst": "number"
            }
        ]
    },
    {
        "action": "edit_purchase_items",
        "updates": [
            {
                "serial_number": "number (The Row # from context)",
                "field": "string (name, stock, rate, etc.)",
                "value": "string | number"
            }
        ]
    },
    {
        "action": "end_task",
        "summary": "string"
    },
    {
        "action": "open_new_case",
        "name": "string (Patient Name)",
        "age": "number (optional)",
        "gender": "M | F | O (optional)",
        "phone": "string (optional)",
        "complaint": "string (The medical complaint/reason)"
    },
    {
        "action": "manage_custom_columns",
        "entity": "patients" | "drugs" | "lab_tests",
        "operation": "add" | "remove",
        "column": {
            "label": "string",
            "type": "text" | "number" | "date" | "boolean",
            "required": boolean
        }
    },
    {
        "action": "create_custom_table",
        "name": "string",
        "description": "string (optional)",
        "columns": [
            {
                "label": "string",
                "type": "text" | "number" | "date" | "boolean",
                "required": boolean
            }
        ]
    },
    {
        "action": "add_table_row",
        "tableId": "string (The ID of the custom table)",
        "data": "object { key: value } (Keys must match column keys derived from labels)"
    },
    {
        "tableId": "string",
        "recordId": "string (The ID of the row/record to update)",
        "data": "object { key: value } (Updates to apply)"
    },
    {
        "action": "create_custom_dashboard",
        "name": "string",
        "description": "string (optional)",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string (one of the keys from Dashboard Data Sources, e.g. api:patients, table:xyz)",
                "config": "object { columns?: string[], label?: string, chartType?: 'bar'|'line'|'pie', xAxisKey?: string, dataKey?: string, filters?: Array<{field, operator, value}> }"
            }
        ]
    },
    {
        "action": "render_temporary_dashboard",
        "title": "string",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string",
                "config": "object { columns?: [], label?, chartType?, xAxisKey?, dataKey?, filters?: [] }"
            }
        ]
    }
]
\`\`\`

**Navigation Reference:**
- **Pharmacy Inventory:** \`/dashboard/inventory\`
- **Lab Inventory:** \`/lab-inventory\`
- **Doctor Queue:** \`/dashboard/queue\`
- **Staff Management:** \`/dashboard/staff\`
- **All Patients:** \`/dashboard/patients\`
- **Billing:** \`/billing\`
- **Purchase Page:** \`/dashboard/purchase\`
- **Analysis:** \`/dashboard/analysis\`
- **Clinic Hub:** \`/dashboard/clinic-hub\`
\`\`\`

**Rules:**
-   **Always** return a JSON array as the last part of your response.
-   If the user's request is satisfied, use the \`end_task\` action with a summary of what was done.
-   If you need more info, use \`ask_followup_question\`.
-   If you perform an action (like updating settings), and there's nothing else to do *immediately* but you want to confirm it's done, you can return the action. The system will execute it and call you back with the result. Then you can \`end_task\`.
-   For \`create_staff_member\`, if password is not provided by user, generate a secure random password and mention it in the summary.
-   Update numeric strings as strings (e.g., "500.00").
-   **CRITICAL DO's and DON'Ts:**
    -   **DO NOT** fill in empty fields (like \`gemini_api_key\`, \`logoUrl\`, \`upi_id\`, etc.) with fake, placeholder, or example data.
    -   **ONLY** update fields that the user *intentionally* asked to change.
    -   **PRESERVE** existing values for any fields not explicitly mentioned in the user's request.
    -   If a field is empty and the user didn't ask to set it, **leave it empty**.
    -   Do not invent values.
`;async function Fde(){var n;if(!NU()&&_C)return _C;let e=null;try{const a=await le("/api/clinics/settings");if(a.ok){const i=await a.json();(n=i.gemini_api_key)!=null&&n.trim()&&(e=i.gemini_api_key.trim())}}catch(a){console.warn("Error fetching updated key",a)}if(e)return e;try{const a=await le("/api/global-settings/app_gemini_api_key");if(a.ok){const s=(await a.json()).value;if(s&&s.trim()!=="")return s.trim()}}catch(a){console.warn("Could not fetch global API key.",a)}return _C}async function $de(t,e,n=[],a){var f,p,g,x,b,j;let i=(f=e.settings)==null?void 0:f.gemini_api_key;if(!i||!i.trim())try{i=await Fde()}catch(S){console.warn("Using fallback key or failing:",S)}if(!i)throw new Error("No Gemini API Key provided in settings or environment.");const s=new wU({apiKey:i}),o=[];o.push({role:"user",parts:[{text:Lde}]}),o.push({role:"model",parts:[{text:"Understood. I am ready to assist with Clinic Hub management."}]}),n.forEach(S=>{o.push({role:S.role,parts:[{text:S.text}]})});const d=[{text:`
    Context:
    ${`
    --- Current Clinic Context ---
    Settings: ${JSON.stringify(e.settings,null,2)}
    
    Custom Columns Configuration: ${JSON.stringify(e.settings.custom_columns_config||{},null,2)}

    Custom Tables (Available for adding/editing rows): ${JSON.stringify(e.customTables||[],null,2)}
    
    Dashboard Data Sources (Use these keys for widgets): ${JSON.stringify(e.dashboardDataSources||[],null,2)}

    --- DYNAMIC CONTEXT DATA (Configured tables with <200 rows) ---
    ${Object.entries(e.dynamicContextData||{}).map(([S,_])=>{const T=(_.data||[]).slice(0,50).map((C,E)=>({_sn:E+1,...C}));return`${_.label||S} (${_.count||0} records): ${JSON.stringify(T,null,2)}`}).join(`

`)}
    --- END DYNAMIC CONTEXT ---

    Staff List: ${JSON.stringify(e.staffList.map(S=>({id:S.id||S._id,name:S.name,role:S.role,email:S.email,active:S.active,opd_fee:S.opd_fee})),null,2)}
    
    Previous Action Results (if any): ${JSON.stringify(e.actionResults||[],null,2)}

    Analysis Data (if active): ${JSON.stringify(e.analysisData||{},null,2)}

    Pharmacy Inventory: ${e.pharmacyInventory?JSON.stringify(e.pharmacyInventory,null,2):"Not loaded. Use 'search_pharmacy_inventory' to find items."}

    Distributors List: ${JSON.stringify((e.distributors||[]).map(S=>({serial_number:S.serial_number,name:S.name,contact_person:S.contact_person,phone:S.phone,remainingBalance:S.remainingBalance})),null,2)}

    Lab Tests Inventory: ${JSON.stringify((e.labInventory||[]).map(S=>({serial:S.serial_number,name:S.name,price:S.price,description:S.description,default_parameters:S.default_parameters})),null,2)}

    Current Purchase Page Rows: ${JSON.stringify((e.purchaseRows||[]).map((S,_)=>({serial_number:_+1,name:S.name,stock:S.stock,rate:S.rate,mrp:S.mrp,net_value:(S.stock*S.rate).toFixed(2)})),null,2)}

    Current Application Page Context: ${e.pageContext?JSON.stringify(e.pageContext,null,2):"Unknown/General Dashboard"}
    `}

    User Query/Input:
    ${t}
    `}];if(a){const S=a.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");d.push({inlineData:{data:S,mimeType:"image/jpeg"}})}o.push({role:"user",parts:d});try{const S={model:Rde,contents:o,generationConfig:{temperature:.7,maxOutputTokens:2048,responseMimeType:"text/plain"}},_=await s.models.generateContentStream(S);let T="";for await(const C of _){const E=C;E.text&&typeof E.text=="function"?T+=E.text():(j=(b=(x=(g=(p=E.candidates)==null?void 0:p[0])==null?void 0:g.content)==null?void 0:x.parts)==null?void 0:b[0])!=null&&j.text&&(T+=E.candidates[0].content.parts[0].text)}if(!T)throw new Error("Empty response from AI");return T}catch(S){throw console.error("Gemini Interaction Error:",S),new Error("Failed to communicate with AI Assistant.")}}const mO=({settings:t,staffList:e,onSettingsUpdate:n,onStaffUpdate:a,onHighlight:i,enableDynamicContext:s=!1})=>{const o=Ft(),l=ds(),{setAnalysisDateRange:c,analysisData:d,analysisNavigate:f,refreshAnalysis:p,pageContext:g}=zN(),{setDistributors:x,setSelectedDistributor:b,setSearchTerm:j,addPurchaseRow:S,updatePurchaseRow:_,distributors:T,purchaseRows:C}=Ez(),[E,k]=v.useState(""),P=v.useRef(d),I=v.useRef(C);v.useEffect(()=>{P.current=d},[d]),v.useEffect(()=>{I.current=C},[C]);const[R,z]=v.useState([]),[q,F]=v.useState([]),[V,H]=v.useState([]),[K,W]=v.useState(!1),[B,G]=v.useState(null),ee=v.useRef(!1),X=v.useRef(0),$=5,ce=()=>{ee.current=!1,W(!1),H(Ae=>[...Ae,{role:"system",text:" Task stopped by user."}])},xe=Ae=>{const ue=new FileReader;ue.onloadend=()=>{G(ue.result)},ue.readAsDataURL(Ae)},Y=()=>{G(null)},[Re,$e]=v.useState(null),ze=()=>$e(null),Le=async(Ae,ue)=>{if(!Re)return;const Te={name:Ae,description:ue,widgets:Re.widgets};if(!(await le("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)})).ok)throw new Error("Failed to save dashboard");$e(null)},oe=async(Ae,ue,Te=[],se)=>{var be,_e,Ne;if(ee.current){if(X.current+=1,X.current>$){H(Z=>[...Z,{role:"system",text:" Task limit reached. Stopping automatically."}]),W(!1),ee.current=!1;return}try{let Z=t,ge=e,de=[],ae=[],ne=[],ie=[],je=[];try{const[we,Qe]=await Promise.all([le("/api/clinics/settings"),le("/staff")]);if(we.ok&&Qe.ok){const Xe=await we.json(),ct=await Qe.json(),[Ct,bt,ke,ot]=await Promise.all([le("/api/drugs"),le("/api/lab-tests"),le("/api/distributors"),le("/api/custom-tables"),le("/api/dashboards/data-sources")]);if(Ct.ok){const Tt=await Ct.json();de=Tt.drugs||Tt||[]}if(bt.ok){const Ue=(await bt.json()).map((jt,kt)=>({...jt,serial_number:kt+1}));ae=Ue,z(Ue)}if(ke.ok&&(ne=(await ke.json()||[]).map((Ue,jt)=>({...Ue,serial_number:jt+1}))),ot.ok){const Tt=await ot.json();ie=Tt,F(Tt)}try{const Tt=await le("/api/dashboards/data-sources");Tt.ok&&(je=await Tt.json())}catch(Tt){console.warn("Failed to fetch dashboard sources",Tt)}Z={...Xe,admissionCharge:parseFloat(Xe.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(Xe.perDayCharge||0).toFixed(2),otherCharges:parseFloat(Xe.otherCharges||0).toFixed(2),aiMemory:Xe.aiMemory||"",clinicWideSystemPrompt:Xe.clinicWideSystemPrompt||"",gemini_api_key:Xe.gemini_api_key||"",low_stock_threshold:Xe.low_stock_threshold!==void 0&&Xe.low_stock_threshold!==null?String(Xe.low_stock_threshold):"10",name:Xe.name||"",logoUrl:Xe.logoUrl||"",upi_id:Xe.upi_id||"",address:Xe.address||"",notes:Xe.notes||"",clinic_id:Xe.clinic_id},ge=ct.map(Tt=>({...Tt,id:Tt._id||Tt.id}))}}catch(we){console.warn("Failed to fetch fresh context for AI loop, falling back to props",we)}let Ee={};if(s)try{const we=await le("/api/ai-context/data");we.ok&&(Ee=await we.json())}catch(we){console.warn("Failed to fetch dynamic AI context",we)}const Q={settings:Z,staffList:ge,analysisData:P.current,pharmacyInventory:de.length>50?void 0:de,labInventory:ae,distributors:ne,purchaseRows:I.current,actionResults:Te,pageContext:g||void 0,customTables:ie,dashboardDataSources:je,dynamicContextData:Ee},ye=ue.filter(we=>we.role!=="system"),me=await $de(Ae,Q,ye,se);if(!ee.current)return;let he=[];try{const we=me.match(/\[[\s\S]*\]/);if(we)he=JSON.parse(we[0]);else{H(Qe=>[...Qe,{role:"model",text:me}]),W(!1),ee.current=!1;return}}catch(we){console.error("Failed to parse AI response",we),H(Qe=>[...Qe,{role:"model",text:"I'm having trouble processing that. Please try again."}]),W(!1),ee.current=!1;return}const De=[];let nt=[],Fe=[];for(const we of he){if(!ee.current)break;if(we.action==="end_task"){H(Qe=>[...Qe,{role:"model",text:we.summary}]),W(!1),ee.current=!1;return}if(we.action==="ask_followup_question"){H(Qe=>[...Qe,{role:"model",text:we.question}]),W(!1),ee.current=!1;return}try{if(we.action==="update_clinic_settings"){const Qe=we.updates;Object.keys(Qe).forEach(Ct=>nt.push(`setting-${Ct}`));const Xe={...Z,...Qe},ct={...Xe,admissionCharge:parseFloat(Xe.admissionCharge),perDayCharge:parseFloat(Xe.perDayCharge),otherCharges:parseFloat(Xe.otherCharges),low_stock_threshold:parseInt(Xe.low_stock_threshold)};await le("/api/clinics/settings",{method:"PUT",body:JSON.stringify(ct)}),n&&n(),De.push({action:"update_clinic_settings",status:"success"}),Fe.push({role:"system",text:" Updated clinic settings"})}if(we.action==="create_staff_member"&&(await le("/api/staff",{method:"POST",body:JSON.stringify({...we.staff,clinic_id:Z.clinic_id})}),a&&a(),De.push({action:"create_staff_member",status:"success",name:we.staff.name}),Fe.push({role:"system",text:` Created staff member: ${we.staff.name}`})),we.action==="update_staff_member"){const Qe=we.id;await le(`/api/staff/${Qe}`,{method:"PUT",body:JSON.stringify(we.updates)}),a&&a(),nt.push(`staff-member-${Qe}`),De.push({action:"update_staff_member",status:"success",id:Qe}),Fe.push({role:"system",text:" Updated staff member details"})}if(we.action==="set_analysis_dates"){const{startDate:Qe,endDate:Xe}=we;c({startDate:new Date(Qe),endDate:new Date(Xe)}),De.push({action:"set_analysis_dates",status:"success",startDate:Qe,endDate:Xe}),Fe.push({role:"system",text:` Set analysis dates: ${Qe} to ${Xe}`})}if(we.action==="navigate_to"){let Qe=we.page;if(we.page&&we.page.includes("analysis")&&we.startDate&&we.endDate){const Xe=Qe.includes("?")?"&":"?";Qe=`${Qe}${Xe}startDate=${we.startDate}&endDate=${we.endDate}`}else we.page&&we.page.includes("analysis")&&((be=P.current)!=null&&be.startDate)&&((_e=P.current)!=null&&_e.endDate);o(Qe),we.section&&setTimeout(()=>f(we.section),500),De.push({action:"navigate_to",status:"success",page:Qe}),Fe.push({role:"system",text:` Navigated to ${Qe}`})}if(we.action==="highlight_section"&&(nt.push(we.elementId),De.push({action:"highlight_section",status:"success",id:we.elementId})),we.action==="refresh_analysis"){Fe.push({role:"system",text:" Refreshing analysis data..."});const Qe=await p();Qe?(P.current=Qe,De.push({action:"refresh_analysis",status:"success",summary:"Data refreshed successfully"}),Fe.push({role:"system",text:" Analysis data refreshed"})):(De.push({action:"refresh_analysis",status:"error",error:"No data returned"}),Fe.push({role:"system",text:" Failed to refresh analysis data"}))}if(we.action==="search_pharmacy_inventory"){const Qe=we.query.toLowerCase(),Xe=de.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Qe)||Ct.brand_name&&Ct.brand_name.toLowerCase().includes(Qe)||Ct.description&&Ct.description.toLowerCase().includes(Qe)),ct=Xe.slice(0,10);De.push({action:"search_pharmacy_inventory",status:"success",count:Xe.length,results:ct}),Xe.length>0?Fe.push({role:"system",text:` Found ${Xe.length} matches for "${we.query}". Showing top ${ct.length}.`}):Fe.push({role:"system",text:` No matches found for "${we.query}"`})}if(we.action==="update_drug"){const Qe=we.id;try{const Xe=de.find(bt=>bt.id===Qe);if(!Xe)throw new Error(`Drug with ID ${Qe} not found.`);const ct={...we.updates};ct.custom_fields&&(ct.custom_fields={...Xe.custom_fields||{},...ct.custom_fields});const Ct={...Xe,...ct};await le(`/api/drugs/${Qe}`,{method:"PUT",body:JSON.stringify(Ct)}),De.push({action:"update_drug",status:"success",id:Qe,updates:we.updates}),Fe.push({role:"system",text:` Updated drug: ${Xe.name}`}),$e({title:`Updated: ${Xe.name}`,widgets:[{id:"edited-drug",type:"table",title:`Drug Updated: ${Xe.name}`,dataSource:"api:drugs",config:{filters:[{field:"id",operator:"equals",value:Qe}],columns:["name","brand_name","stock","mrp","expiry_date","pack"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Xe){De.push({action:"update_drug",status:"error",error:Xe.message}),Fe.push({role:"system",text:` Failed to update drug: ${Xe.message}`})}}if(we.action==="update_lab_test"){const Qe=ae.find(Xe=>Xe.serial_number===we.serial_number);if(Qe){const Xe={...Qe,...we.updates};await le(`/api/lab-tests/${Qe.id}`,{method:"PUT",body:JSON.stringify(Xe)}),De.push({action:"update_lab_test",status:"success",item:Qe.name}),Fe.push({role:"system",text:` Updated lab test: ${Qe.name}`}),$e({title:`Updated: ${Qe.name}`,widgets:[{id:"edited-lab-test",type:"table",title:`Lab Test Updated: ${Qe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Qe.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}else De.push({action:"update_lab_test",status:"error",error:`Test with serial ${we.serial_number} not found`}),Fe.push({role:"system",text:` Lab test with serial ${we.serial_number} not found`})}if(we.action==="search_lab_inventory"){const Qe=we.query.toLowerCase(),Xe=ae.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Qe)||Ct.description&&Ct.description.toLowerCase().includes(Qe)),ct=Xe.slice(0,10);De.push({action:"search_lab_inventory",status:"success",count:Xe.length,results:ct.map(Ct=>({serial_number:Ct.serial_number,id:Ct.id,name:Ct.name,price:Ct.price,description:Ct.description}))}),Xe.length>0?Fe.push({role:"system",text:` Found ${Xe.length} lab tests for "${we.query}". Showing top ${ct.length}.`}):Fe.push({role:"system",text:` No lab tests found for "${we.query}"`})}if(we.action==="create_lab_test")try{const Qe=we.test,Xe={name:Qe.name,price:parseFloat(Qe.price)||0,description:Qe.description||"",default_parameters:Qe.default_parameters||[]},ct=await le("/api/lab-tests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)});if(!ct.ok){const bt=await ct.json();throw new Error(bt.message||"Failed to create lab test")}const Ct=await ct.json();De.push({action:"create_lab_test",status:"success",id:Ct.id,name:Qe.name}),Fe.push({role:"system",text:` Created lab test: ${Qe.name}`}),$e({title:`Created: ${Qe.name}`,widgets:[{id:"created-lab-test",type:"table",title:`New Lab Test: ${Qe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Ct.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Qe){De.push({action:"create_lab_test",status:"error",error:Qe.message}),Fe.push({role:"system",text:` Failed to create lab test: ${Qe.message}`})}if(we.action==="search_distributor_purchase"){const Qe=we.query,Xe=await le(`/api/distributors?search=${encodeURIComponent(Qe)}`);if(Xe.ok){const ct=await Xe.json();x(ct),j(Qe),De.push({action:"search_distributor_purchase",status:"success",count:ct.length,results:ct}),Fe.push({role:"system",text:` Found ${ct.length} distributors for "${Qe}"`})}else De.push({action:"search_distributor_purchase",status:"error",error:Xe.statusText}),Fe.push({role:"system",text:" Failed to search distributors"})}if(we.action==="set_distributor_purchase"){const Qe=we.distributorId;let Xe=T.find(ct=>ct.id===Qe);Xe?(b(Xe),j(Xe.name),De.push({action:"set_distributor_purchase",status:"success",distributor:Xe.name}),Fe.push({role:"system",text:` Selected distributor: ${Xe.name}`})):(De.push({action:"set_distributor_purchase",status:"error",error:"Distributor not found in current search results. Please search first."}),Fe.push({role:"system",text:" Distributor not found. Please search first."}))}if(we.action==="add_purchase_items"){const Qe=we.items;let Xe=0;Qe.forEach(ct=>{const bt={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:ct.name||"",composition:ct.composition||"",description:ct.description||"",mrp:ct.mrp||0,stock:ct.stock||0,pack:ct.pack||"",supplier:"",expiry_date:ct.expiry_date||"",rate:ct.rate||0,box_number:ct.box_number||"",gst:ct.gst||0,margin:ct.margin||0,discount:ct.discount||0,brand_name:ct.brand_name||"",batch:ct.batch||"",hsn_code:ct.hsn_code||"",mfg:ct.mfg||"",loose:ct.loose||0,last_updated:"",created_at:""};S(bt),Xe++}),De.push({action:"add_purchase_items",status:"success",count:Xe}),Fe.push({role:"system",text:` Added ${Xe} items to purchase list`})}if(we.action==="edit_purchase_items"){const Qe=we.updates;let Xe=0;const ct=I.current||[];Qe.forEach(Ct=>{if(Ct.serial_number){const bt=Ct.serial_number-1,ke=ct[bt];ke&&ke.id?(_(ke.id,{[Ct.field]:Ct.value}),Xe++):(console.warn(`Row with serial number ${Ct.serial_number} not found.`),Fe.push({role:"system",text:` Row #${Ct.serial_number} not found.`}))}}),De.push({action:"edit_purchase_items",status:"success",count:Xe}),Fe.push({role:"system",text:` Updated ${Xe} items`})}if(we.action==="open_new_case"){const{name:Qe,age:Xe,gender:ct,complaint:Ct,phone:bt}=we;try{const ke=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Qe||"New Patient",age:Xe||null,gender:ct||null,phone:bt||null,address:null})});if(!ke.ok){const kt=await ke.json().catch(()=>({}));throw ke.status===403&&((Ne=kt.message)!=null&&Ne.includes("Patient limit"))?new Error(`Patient limit reached: ${kt.message}`):new Error(kt.message||"Failed to create patient")}const ot=await ke.json();if(!ot||!ot.id)throw new Error("Created patient has no ID");const Tt=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:ot.id,complaint:Ct||"New Case"})});if(!Tt.ok)throw new Error("Failed to create queue entry");const Ue=await Tt.json(),jt=ot.id;jt&&(l.prefetchQuery({queryKey:Gt.patients.context(jt),queryFn:()=>le(`/api/patients/${jt}/context`).then(kt=>kt.json()),staleTime:1e3*60*5}),l.prefetchQuery({queryKey:Gt.patientDebts.balance(jt),queryFn:()=>le(`/api/patient-debts/${jt}/balance`).then(kt=>kt.json()),staleTime:1e3*60}),l.prefetchQuery({queryKey:Gt.queue.latest(jt),queryFn:()=>le(`/api/queue/patient/${jt}/latest`).then(kt=>kt.json()),staleTime:1e3*5})),o(`/dashboard/edit-complaint/${Ue.id}`,{state:{initialComplaint:Ct}}),De.push({action:"open_new_case",status:"success",patientId:ot.id,queueId:Ue.id}),Fe.push({role:"system",text:` Opened new case for ${Qe}`}),W(!1),ee.current=!1;return}catch(ke){ke.message.includes("Patient limit")&&(o("/start-clinic-subscription"),Fe.push({role:"system",text:" Patient limit reached. Redirecting to subscription."})),De.push({action:"open_new_case",status:"error",error:ke.message}),Fe.push({role:"system",text:` Failed to open new case: ${ke.message}`})}}if(we.action==="manage_custom_columns"){const{entity:Qe,operation:Xe,column:ct}=we,Ct=Z.custom_columns_config||{drugs:[],patients:[],lab_tests:[]};let ke=[...Ct[Qe]||[]];if(Xe==="add"){const Tt=ct.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke.some(Ue=>Ue.key===Tt)||ke.push({...ct,key:Tt})}else if(Xe==="remove"){const Tt=ct.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke=ke.filter(Ue=>Ue.key!==Tt&&Ue.label!==ct.label)}const ot={...Ct,[Qe]:ke};await le("/api/clinics/settings",{method:"PUT",body:JSON.stringify({...Z,custom_columns_config:ot})}),n&&n(),De.push({action:"manage_custom_columns",status:"success",entity:Qe,operation:Xe,column:ct.label}),Fe.push({role:"system",text:` ${Xe==="add"?"Added":"Removed"} custom column '${ct.label}' for ${Qe}`})}if(we.action==="create_custom_table"){const{name:Qe,description:Xe,columns:ct}=we,Ct=ct.map(ot=>({...ot,key:ot.label.toLowerCase().replace(/[^a-z0-9]/g,"_")})),bt=await le("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Qe,description:Xe,columns:Ct})});if(!bt.ok)throw new Error("Failed to create table");const ke=await bt.json();F(ot=>[...ot,ke]),De.push({action:"create_custom_table",status:"success",tableId:ke.id}),Fe.push({role:"system",text:` Created custom table: ${Qe}`})}if(we.action==="add_table_row"){const{tableId:Qe,data:Xe}=we;if(!(await le(`/api/custom-tables/${Qe}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Xe})})).ok)throw new Error("Failed to add row");De.push({action:"add_table_row",status:"success"}),Fe.push({role:"system",text:" Added row to table"})}if(we.action==="update_table_row"){const{recordId:Qe,data:Xe}=we;if(!(await le(`/api/custom-tables/records/${Qe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Xe})})).ok)throw new Error("Failed to update row");De.push({action:"update_table_row",status:"success"}),Fe.push({role:"system",text:" Updated row"})}if(we.action==="create_custom_dashboard"){const{name:Qe,description:Xe,widgets:ct}=we,Ct=await le("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Qe,description:Xe,widgets:ct})});if(!Ct.ok)throw new Error("Failed to create dashboard");const bt=await Ct.json();De.push({action:"create_custom_dashboard",status:"success",id:bt.id}),Fe.push({role:"system",text:` Created dashboard: ${Qe}`})}we.action==="render_temporary_dashboard"&&($e({title:we.title,widgets:we.widgets}),De.push({action:"render_temporary_dashboard",status:"success"}),Fe.push({role:"system",text:` Showing temporary dashboard: ${we.title}`}))}catch(Qe){console.error("Action execution failed",we,Qe),De.push({action:we.action,status:"error",error:Qe.message}),Fe.push({role:"system",text:` Failed to execute action: ${we.action}`})}}nt.length>0&&i&&setTimeout(()=>i(nt),500),Fe.length>0&&H(we=>[...we,...Fe]);const Ge=[...Te,...De],it=`Reflecting on previous actions: ${JSON.stringify(De)}. What is the next step? If done, call end_task.`,wt=[...ue,...Fe,{role:"model",text:me},{role:"user",text:it}];await oe(it,wt,Ge,void 0)}catch(Z){console.error(Z),H(ge=>[...ge,{role:"model",text:"Something went wrong."}]),W(!1),ee.current=!1}}},Se=v.useCallback(()=>{H([]),k(""),W(!1),ee.current=!1,X.current=0,G(null)},[]);return{chatQuery:E,setChatQuery:k,chatHistory:V,isProcessing:K,handleSendMessage:Ae=>{const ue=Ae!==void 0?Ae:E;if(!ue.trim()&&!B)return;ee.current=!0,W(!0),X.current=0;const Te={role:"user",text:ue};B&&(Te.text+=" [Image Attached]"),H(be=>[...be,Te]);const se=B||void 0;k(""),G(null),oe(ue,V,[],se)},refreshChat:Se,stopGeneration:ce,selectedImage:B,handleImageSelect:xe,clearImage:Y,temporaryDashboard:Re,closeTemporaryDashboard:ze,saveTemporaryDashboard:Le}},te=({className:t="",width:e,height:n,variant:a="rectangular",animate:i=!0,style:s={}})=>{const o={width:e,height:n,...s};return r.jsx("div",{className:`skeleton skeleton-${a} ${i?"skeleton-animate":""} ${t}`,style:o})};var CC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var A4;function Bde(){return A4||(A4=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=i(s,a(l)))}return s}function a(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)e.call(s,l)&&s[l]&&(o=i(o,l));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(CC)),CC.exports}var zde=Bde();const ad=Hn(zde);function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function qde(t,e){if(_f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(_f(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SU(t){var e=qde(t,"string");return _f(e)=="symbol"?e:e+""}function fv(t,e,n){return(e=SU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E4(Object(n),!0).forEach(function(a){fv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Ude(t){if(Array.isArray(t))return t}function Vde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function WE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function _U(t,e){if(t){if(typeof t=="string")return WE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WE(t,e):void 0}}function Hde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ec(t,e){return Ude(t)||Vde(t,e)||_U(t,e)||Hde()}function Gde(t,e){if(t==null)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;n[a]=t[a]}return n}function Hc(t,e){if(t==null)return{};var n,a,i=Gde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Wde=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Kde(t){var e=t.defaultInputValue,n=e===void 0?"":e,a=t.defaultMenuIsOpen,i=a===void 0?!1:a,s=t.defaultValue,o=s===void 0?null:s,l=t.inputValue,c=t.menuIsOpen,d=t.onChange,f=t.onInputChange,p=t.onMenuClose,g=t.onMenuOpen,x=t.value,b=Hc(t,Wde),j=v.useState(l!==void 0?l:n),S=Ec(j,2),_=S[0],T=S[1],C=v.useState(c!==void 0?c:i),E=Ec(C,2),k=E[0],P=E[1],I=v.useState(x!==void 0?x:o),R=Ec(I,2),z=R[0],q=R[1],F=v.useCallback(function(ee,X){typeof d=="function"&&d(ee,X),q(ee)},[d]),V=v.useCallback(function(ee,X){var $;typeof f=="function"&&($=f(ee,X)),T($!==void 0?$:ee)},[f]),H=v.useCallback(function(){typeof g=="function"&&g(),P(!0)},[g]),K=v.useCallback(function(){typeof p=="function"&&p(),P(!1)},[p]),W=l!==void 0?l:_,B=c!==void 0?c:k,G=x!==void 0?x:z;return Xt(Xt({},b),{},{inputValue:W,menuIsOpen:B,onChange:F,onInputChange:V,onMenuClose:K,onMenuOpen:H,value:G})}function rn(){return rn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rn.apply(null,arguments)}function Yde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P4(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,SU(a.key),a)}}function Qde(t,e,n){return e&&P4(t.prototype,e),n&&P4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KE(t,e){return KE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},KE(t,e)}function Xde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KE(t,e)}function _w(t){return _w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_w(t)}function CU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CU=function(){return!!t})()}function Jde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zde(t,e){if(e&&(_f(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jde(t)}function ehe(t){var e=CU();return function(){var n,a=_w(t);if(e){var i=_w(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Zde(this,n)}}function the(t){if(Array.isArray(t))return WE(t)}function nhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gO(t){return the(t)||nhe(t)||_U(t)||rhe()}function ahe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function ihe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var she=function(){function t(n){var a=this;this._insertTag=function(i){var s;a.tags.length===0?a.insertionPoint?s=a.insertionPoint.nextSibling:a.prepend?s=a.container.firstChild:s=a.before:s=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(i,s),a.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(a){a.forEach(this._insertTag)},e.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ihe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=ahe(i);try{s.insertRule(a,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(a));this.ctr++},e.flush=function(){this.tags.forEach(function(a){var i;return(i=a.parentNode)==null?void 0:i.removeChild(a)}),this.tags=[],this.ctr=0},t}(),di="-ms-",Cw="-moz-",ir="-webkit-",TU="comm",yO="rule",xO="decl",ohe="@import",kU="@keyframes",lhe="@layer",che=Math.abs,eS=String.fromCharCode,uhe=Object.assign;function dhe(t,e){return Ya(t,0)^45?(((e<<2^Ya(t,0))<<2^Ya(t,1))<<2^Ya(t,2))<<2^Ya(t,3):0}function AU(t){return t.trim()}function hhe(t,e){return(t=e.exec(t))?t[0]:t}function sr(t,e,n){return t.replace(e,n)}function YE(t,e){return t.indexOf(e)}function Ya(t,e){return t.charCodeAt(e)|0}function Iv(t,e,n){return t.slice(e,n)}function Al(t){return t.length}function vO(t){return t.length}function Sj(t,e){return e.push(t),t}function fhe(t,e){return t.map(e).join("")}var tS=1,lg=1,EU=0,us=0,ba=0,qg="";function nS(t,e,n,a,i,s,o){return{value:t,root:e,parent:n,type:a,props:i,children:s,line:tS,column:lg,length:o,return:""}}function Qx(t,e){return uhe(nS("",null,null,"",null,null,0),t,{length:-t.length},e)}function phe(){return ba}function mhe(){return ba=us>0?Ya(qg,--us):0,lg--,ba===10&&(lg=1,tS--),ba}function Is(){return ba=us<EU?Ya(qg,us++):0,lg++,ba===10&&(lg=1,tS++),ba}function Il(){return Ya(qg,us)}function rw(){return us}function Lb(t,e){return Iv(qg,t,e)}function Rv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function PU(t){return tS=lg=1,EU=Al(qg=t),us=0,[]}function DU(t){return qg="",t}function aw(t){return AU(Lb(us-1,QE(t===91?t+2:t===40?t+1:t)))}function ghe(t){for(;(ba=Il())&&ba<33;)Is();return Rv(t)>2||Rv(ba)>3?"":" "}function yhe(t,e){for(;--e&&Is()&&!(ba<48||ba>102||ba>57&&ba<65||ba>70&&ba<97););return Lb(t,rw()+(e<6&&Il()==32&&Is()==32))}function QE(t){for(;Is();)switch(ba){case t:return us;case 34:case 39:t!==34&&t!==39&&QE(ba);break;case 40:t===41&&QE(t);break;case 92:Is();break}return us}function xhe(t,e){for(;Is()&&t+ba!==57;)if(t+ba===84&&Il()===47)break;return"/*"+Lb(e,us-1)+"*"+eS(t===47?t:Is())}function vhe(t){for(;!Rv(Il());)Is();return Lb(t,us)}function bhe(t){return DU(iw("",null,null,null,[""],t=PU(t),0,[0],t))}function iw(t,e,n,a,i,s,o,l,c){for(var d=0,f=0,p=o,g=0,x=0,b=0,j=1,S=1,_=1,T=0,C="",E=i,k=s,P=a,I=C;S;)switch(b=T,T=Is()){case 40:if(b!=108&&Ya(I,p-1)==58){YE(I+=sr(aw(T),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=aw(T);break;case 9:case 10:case 13:case 32:I+=ghe(b);break;case 92:I+=yhe(rw()-1,7);continue;case 47:switch(Il()){case 42:case 47:Sj(jhe(xhe(Is(),rw()),e,n),c);break;default:I+="/"}break;case 123*j:l[d++]=Al(I)*_;case 125*j:case 59:case 0:switch(T){case 0:case 125:S=0;case 59+f:_==-1&&(I=sr(I,/\f/g,"")),x>0&&Al(I)-p&&Sj(x>32?O4(I+";",a,n,p-1):O4(sr(I," ","")+";",a,n,p-2),c);break;case 59:I+=";";default:if(Sj(P=D4(I,e,n,d,f,i,l,C,E=[],k=[],p),s),T===123)if(f===0)iw(I,e,P,P,E,s,p,l,k);else switch(g===99&&Ya(I,3)===110?100:g){case 100:case 108:case 109:case 115:iw(t,P,P,a&&Sj(D4(t,P,P,0,0,i,l,C,i,E=[],p),k),i,k,p,l,a?E:k);break;default:iw(I,P,P,P,[""],k,0,l,k)}}d=f=x=0,j=_=1,C=I="",p=o;break;case 58:p=1+Al(I),x=b;default:if(j<1){if(T==123)--j;else if(T==125&&j++==0&&mhe()==125)continue}switch(I+=eS(T),T*j){case 38:_=f>0?1:(I+="\f",-1);break;case 44:l[d++]=(Al(I)-1)*_,_=1;break;case 64:Il()===45&&(I+=aw(Is())),g=Il(),f=p=Al(C=I+=vhe(rw())),T++;break;case 45:b===45&&Al(I)==2&&(j=0)}}return s}function D4(t,e,n,a,i,s,o,l,c,d,f){for(var p=i-1,g=i===0?s:[""],x=vO(g),b=0,j=0,S=0;b<a;++b)for(var _=0,T=Iv(t,p+1,p=che(j=o[b])),C=t;_<x;++_)(C=AU(j>0?g[_]+" "+T:sr(T,/&\f/g,g[_])))&&(c[S++]=C);return nS(t,e,n,i===0?yO:l,c,d,f)}function jhe(t,e,n){return nS(t,e,n,TU,eS(phe()),Iv(t,2,-2),0)}function O4(t,e,n,a){return nS(t,e,n,xO,Iv(t,0,a),Iv(t,a+1,-1),a)}function $m(t,e){for(var n="",a=vO(t),i=0;i<a;i++)n+=e(t[i],i,t,e)||"";return n}function whe(t,e,n,a){switch(t.type){case lhe:if(t.children.length)break;case ohe:case xO:return t.return=t.return||t.value;case TU:return"";case kU:return t.return=t.value+"{"+$m(t.children,a)+"}";case yO:t.value=t.props.join(",")}return Al(n=$m(t.children,a))?t.return=t.value+"{"+n+"}":""}function Nhe(t){var e=vO(t);return function(n,a,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,a,i,s)||"";return o}}function She(t){return function(e){e.root||(e=e.return)&&t(e)}}function _he(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Che=function(e,n,a){for(var i=0,s=0;i=s,s=Il(),i===38&&s===12&&(n[a]=1),!Rv(s);)Is();return Lb(e,us)},The=function(e,n){var a=-1,i=44;do switch(Rv(i)){case 0:i===38&&Il()===12&&(n[a]=1),e[a]+=Che(us-1,n,a);break;case 2:e[a]+=aw(i);break;case 4:if(i===44){e[++a]=Il()===58?"&\f":"",n[a]=e[a].length;break}default:e[a]+=eS(i)}while(i=Is());return e},khe=function(e,n){return DU(The(PU(e),n))},M4=new WeakMap,Ahe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,a=e.parent,i=e.column===a.column&&e.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!M4.get(a))&&!i){M4.set(e,!0);for(var s=[],o=khe(n,s),l=a.props,c=0,d=0;c<o.length;c++)for(var f=0;f<l.length;f++,d++)e.props[d]=s[c]?o[c].replace(/&\f/g,l[f]):l[f]+" "+o[c]}}},Ehe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function OU(t,e){switch(dhe(t,e)){case 5103:return ir+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ir+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ir+t+Cw+t+di+t+t;case 6828:case 4268:return ir+t+di+t+t;case 6165:return ir+t+di+"flex-"+t+t;case 5187:return ir+t+sr(t,/(\w+).+(:[^]+)/,ir+"box-$1$2"+di+"flex-$1$2")+t;case 5443:return ir+t+di+"flex-item-"+sr(t,/flex-|-self/,"")+t;case 4675:return ir+t+di+"flex-line-pack"+sr(t,/align-content|flex-|-self/,"")+t;case 5548:return ir+t+di+sr(t,"shrink","negative")+t;case 5292:return ir+t+di+sr(t,"basis","preferred-size")+t;case 6060:return ir+"box-"+sr(t,"-grow","")+ir+t+di+sr(t,"grow","positive")+t;case 4554:return ir+sr(t,/([^-])(transform)/g,"$1"+ir+"$2")+t;case 6187:return sr(sr(sr(t,/(zoom-|grab)/,ir+"$1"),/(image-set)/,ir+"$1"),t,"")+t;case 5495:case 3959:return sr(t,/(image-set\([^]*)/,ir+"$1$`$1");case 4968:return sr(sr(t,/(.+:)(flex-)?(.*)/,ir+"box-pack:$3"+di+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ir+t+t;case 4095:case 3583:case 4068:case 2532:return sr(t,/(.+)-inline(.+)/,ir+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Al(t)-1-e>6)switch(Ya(t,e+1)){case 109:if(Ya(t,e+4)!==45)break;case 102:return sr(t,/(.+:)(.+)-([^]+)/,"$1"+ir+"$2-$3$1"+Cw+(Ya(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~YE(t,"stretch")?OU(sr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ya(t,e+1)!==115)break;case 6444:switch(Ya(t,Al(t)-3-(~YE(t,"!important")&&10))){case 107:return sr(t,":",":"+ir)+t;case 101:return sr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ir+(Ya(t,14)===45?"inline-":"")+"box$3$1"+ir+"$2$3$1"+di+"$2box$3")+t}break;case 5936:switch(Ya(t,e+11)){case 114:return ir+t+di+sr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ir+t+di+sr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ir+t+di+sr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ir+t+di+t+t}return t}var Phe=function(e,n,a,i){if(e.length>-1&&!e.return)switch(e.type){case xO:e.return=OU(e.value,e.length);break;case kU:return $m([Qx(e,{value:sr(e.value,"@","@"+ir)})],i);case yO:if(e.length)return fhe(e.props,function(s){switch(hhe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $m([Qx(e,{props:[sr(s,/:(read-\w+)/,":"+Cw+"$1")]})],i);case"::placeholder":return $m([Qx(e,{props:[sr(s,/:(plac\w+)/,":"+ir+"input-$1")]}),Qx(e,{props:[sr(s,/:(plac\w+)/,":"+Cw+"$1")]}),Qx(e,{props:[sr(s,/:(plac\w+)/,di+"input-$1")]})],i)}return""})}},Dhe=[Phe],Ohe=function(e){var n=e.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(j){var S=j.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var i=e.stylisPlugins||Dhe,s={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(j){for(var S=j.getAttribute("data-emotion").split(" "),_=1;_<S.length;_++)s[S[_]]=!0;l.push(j)});var c,d=[Ahe,Ehe];{var f,p=[whe,She(function(j){f.insert(j)})],g=Nhe(d.concat(i,p)),x=function(S){return $m(bhe(S),g)};c=function(S,_,T,C){f=T,x(S?S+"{"+_.styles+"}":_.styles),C&&(b.inserted[_.name]=!0)}}var b={key:n,sheet:new she({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return b.sheet.hydrate(l),b},TC={exports:{}},ur={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I4;function Mhe(){if(I4)return ur;I4=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,a=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,j=t?Symbol.for("react.block"):60121,S=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,T=t?Symbol.for("react.scope"):60119;function C(k){if(typeof k=="object"&&k!==null){var P=k.$$typeof;switch(P){case e:switch(k=k.type,k){case c:case d:case a:case s:case i:case p:return k;default:switch(k=k&&k.$$typeof,k){case l:case f:case b:case x:case o:return k;default:return P}}case n:return P}}}function E(k){return C(k)===d}return ur.AsyncMode=c,ur.ConcurrentMode=d,ur.ContextConsumer=l,ur.ContextProvider=o,ur.Element=e,ur.ForwardRef=f,ur.Fragment=a,ur.Lazy=b,ur.Memo=x,ur.Portal=n,ur.Profiler=s,ur.StrictMode=i,ur.Suspense=p,ur.isAsyncMode=function(k){return E(k)||C(k)===c},ur.isConcurrentMode=E,ur.isContextConsumer=function(k){return C(k)===l},ur.isContextProvider=function(k){return C(k)===o},ur.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},ur.isForwardRef=function(k){return C(k)===f},ur.isFragment=function(k){return C(k)===a},ur.isLazy=function(k){return C(k)===b},ur.isMemo=function(k){return C(k)===x},ur.isPortal=function(k){return C(k)===n},ur.isProfiler=function(k){return C(k)===s},ur.isStrictMode=function(k){return C(k)===i},ur.isSuspense=function(k){return C(k)===p},ur.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===a||k===d||k===s||k===i||k===p||k===g||typeof k=="object"&&k!==null&&(k.$$typeof===b||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===f||k.$$typeof===S||k.$$typeof===_||k.$$typeof===T||k.$$typeof===j)},ur.typeOf=C,ur}var R4;function Ihe(){return R4||(R4=1,TC.exports=Mhe()),TC.exports}var kC,L4;function Rhe(){if(L4)return kC;L4=1;var t=Ihe(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=a,s[t.Memo]=i;function o(b){return t.isMemo(b)?i:s[b.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function x(b,j,S){if(typeof j!="string"){if(g){var _=p(j);_&&_!==g&&x(b,_,S)}var T=c(j);d&&(T=T.concat(d(j)));for(var C=o(b),E=o(j),k=0;k<T.length;++k){var P=T[k];if(!n[P]&&!(S&&S[P])&&!(E&&E[P])&&!(C&&C[P])){var I=f(j,P);try{l(b,P,I)}catch{}}}}return b}return kC=x,kC}Rhe();var Lhe=!0;function Fhe(t,e,n){var a="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(a+=i+" ")}),a}var MU=function(e,n,a){var i=e.key+"-"+n.name;(a===!1||Lhe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},$he=function(e,n,a){MU(e,n,a);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Bhe(t){for(var e=0,n,a=0,i=t.length;i>=4;++a,i-=4)n=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(a+2)&255)<<16;case 2:e^=(t.charCodeAt(a+1)&255)<<8;case 1:e^=t.charCodeAt(a)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var zhe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qhe=/[A-Z]|^ms/g,Uhe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,IU=function(e){return e.charCodeAt(1)===45},F4=function(e){return e!=null&&typeof e!="boolean"},AC=_he(function(t){return IU(t)?t:t.replace(qhe,"-$&").toLowerCase()}),$4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Uhe,function(a,i,s){return El={name:i,styles:s,next:El},i})}return zhe[e]!==1&&!IU(e)&&typeof n=="number"&&n!==0?n+"px":n};function Lv(t,e,n){if(n==null)return"";var a=n;if(a.__emotion_styles!==void 0)return a;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return El={name:i.name,styles:i.styles,next:El},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)El={name:o.name,styles:o.styles,next:El},o=o.next;var l=s.styles+";";return l}return Vhe(t,e,n)}case"function":{if(t!==void 0){var c=El,d=n(t);return El=c,Lv(t,e,d)}break}}var f=n;return f}function Vhe(t,e,n){var a="";if(Array.isArray(n))for(var i=0;i<n.length;i++)a+=Lv(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var l=o;F4(l)&&(a+=AC(s)+":"+$4(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var c=0;c<o.length;c++)F4(o[c])&&(a+=AC(s)+":"+$4(s,o[c])+";");else{var d=Lv(t,e,o);switch(s){case"animation":case"animationName":{a+=AC(s)+":"+d+";";break}default:a+=s+"{"+d+"}"}}}return a}var B4=/label:\s*([^\s;{]+)\s*(;|$)/g,El;function RU(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,i="";El=void 0;var s=t[0];if(s==null||s.raw===void 0)a=!1,i+=Lv(n,e,s);else{var o=s;i+=o[0]}for(var l=1;l<t.length;l++)if(i+=Lv(n,e,t[l]),a){var c=s;i+=c[l]}B4.lastIndex=0;for(var d="",f;(f=B4.exec(i))!==null;)d+="-"+f[1];var p=Bhe(i)+d;return{name:p,styles:i,next:El}}var Hhe=function(e){return e()},Ghe=HM.useInsertionEffect?HM.useInsertionEffect:!1,Whe=Ghe||Hhe,LU=v.createContext(typeof HTMLElement<"u"?Ohe({key:"css"}):null);LU.Provider;var Khe=function(e){return v.forwardRef(function(n,a){var i=v.useContext(LU);return e(n,i,a)})},Yhe=v.createContext({}),bO={}.hasOwnProperty,XE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Qhe=function(e,n){var a={};for(var i in n)bO.call(n,i)&&(a[i]=n[i]);return a[XE]=e,a},Xhe=function(e){var n=e.cache,a=e.serialized,i=e.isStringTag;return MU(n,a,i),Whe(function(){return $he(n,a,i)}),null},Jhe=Khe(function(t,e,n){var a=t.css;typeof a=="string"&&e.registered[a]!==void 0&&(a=e.registered[a]);var i=t[XE],s=[a],o="";typeof t.className=="string"?o=Fhe(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var l=RU(s,void 0,v.useContext(Yhe));o+=e.key+"-"+l.name;var c={};for(var d in t)bO.call(t,d)&&d!=="css"&&d!==XE&&(c[d]=t[d]);return c.className=o,n&&(c.ref=n),v.createElement(v.Fragment,null,v.createElement(Xhe,{cache:e,serialized:l,isStringTag:typeof i=="string"}),v.createElement(i,c))}),Zhe=Jhe,Ht=function(e,n){var a=arguments;if(n==null||!bO.call(n,"css"))return v.createElement.apply(void 0,a);var i=a.length,s=new Array(i);s[0]=Zhe,s[1]=Qhe(e,n);for(var o=2;o<i;o++)s[o]=a[o];return v.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(Ht||(Ht={}));function jO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return RU(e)}function efe(){var t=jO.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function tfe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const nfe=Math.min,rfe=Math.max,Tw=Math.round,_j=Math.floor,kw=t=>({x:t,y:t});function afe(t){const{x:e,y:n,width:a,height:i}=t;return{width:a,height:i,top:n,left:e,right:e+a,bottom:n+i,x:e,y:n}}function rS(){return typeof window<"u"}function FU(t){return BU(t)?(t.nodeName||"").toLowerCase():"#document"}function Fc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function $U(t){var e;return(e=(BU(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BU(t){return rS()?t instanceof Node||t instanceof Fc(t).Node:!1}function ife(t){return rS()?t instanceof Element||t instanceof Fc(t).Element:!1}function wO(t){return rS()?t instanceof HTMLElement||t instanceof Fc(t).HTMLElement:!1}function z4(t){return!rS()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fc(t).ShadowRoot}const sfe=new Set(["inline","contents"]);function zU(t){const{overflow:e,overflowX:n,overflowY:a,display:i}=NO(t);return/auto|scroll|overlay|hidden|clip/.test(e+a+n)&&!sfe.has(i)}function ofe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lfe=new Set(["html","body","#document"]);function cfe(t){return lfe.has(FU(t))}function NO(t){return Fc(t).getComputedStyle(t)}function ufe(t){if(FU(t)==="html")return t;const e=t.assignedSlot||t.parentNode||z4(t)&&t.host||$U(t);return z4(e)?e.host:e}function qU(t){const e=ufe(t);return cfe(e)?t.ownerDocument?t.ownerDocument.body:t.body:wO(e)&&zU(e)?e:qU(e)}function Aw(t,e,n){var a;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=qU(t),s=i===((a=t.ownerDocument)==null?void 0:a.body),o=Fc(i);if(s){const l=JE(o);return e.concat(o,o.visualViewport||[],zU(i)?i:[],l&&n?Aw(l):[])}return e.concat(i,Aw(i,[],n))}function JE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function dfe(t){const e=NO(t);let n=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const i=wO(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:a,l=Tw(n)!==s||Tw(a)!==o;return l&&(n=s,a=o),{width:n,height:a,$:l}}function SO(t){return ife(t)?t:t.contextElement}function q4(t){const e=SO(t);if(!wO(e))return kw(1);const n=e.getBoundingClientRect(),{width:a,height:i,$:s}=dfe(e);let o=(s?Tw(n.width):n.width)/a,l=(s?Tw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const hfe=kw(0);function ffe(t){const e=Fc(t);return!ofe()||!e.visualViewport?hfe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function pfe(t,e,n){return!1}function U4(t,e,n,a){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),s=SO(t);let o=kw(1);e&&(o=q4(t));const l=pfe()?ffe(s):kw(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(s){const g=Fc(s),x=a;let b=g,j=JE(b);for(;j&&a&&x!==b;){const S=q4(j),_=j.getBoundingClientRect(),T=NO(j),C=_.left+(j.clientLeft+parseFloat(T.paddingLeft))*S.x,E=_.top+(j.clientTop+parseFloat(T.paddingTop))*S.y;c*=S.x,d*=S.y,f*=S.x,p*=S.y,c+=C,d+=E,b=Fc(j),j=JE(b)}}return afe({width:f,height:p,x:c,y:d})}function UU(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function mfe(t,e){let n=null,a;const i=$U(t);function s(){var l;clearTimeout(a),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const d=t.getBoundingClientRect(),{left:f,top:p,width:g,height:x}=d;if(l||e(),!g||!x)return;const b=_j(p),j=_j(i.clientWidth-(f+g)),S=_j(i.clientHeight-(p+x)),_=_j(f),C={rootMargin:-b+"px "+-j+"px "+-S+"px "+-_+"px",threshold:rfe(0,nfe(1,c))||1};let E=!0;function k(P){const I=P[0].intersectionRatio;if(I!==c){if(!E)return o();I?o(!1,I):a=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!UU(d,t.getBoundingClientRect())&&o(),E=!1}try{n=new IntersectionObserver(k,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,C)}n.observe(t)}return o(!0),s}function gfe(t,e,n,a){a===void 0&&(a={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,d=SO(t),f=i||s?[...d?Aw(d):[],...Aw(e)]:[];f.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=d&&l?mfe(d,n):null;let g=-1,x=null;o&&(x=new ResizeObserver(_=>{let[T]=_;T&&T.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let b,j=c?U4(t):null;c&&S();function S(){const _=U4(t);j&&!UU(j,_)&&n(),j=_,b=requestAnimationFrame(S)}return n(),()=>{var _;f.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p==null||p(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(b)}}var ZE=v.useLayoutEffect,yfe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Ew=function(){};function xfe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function vfe(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var s=[].concat(a);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(xfe(t,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var V4=function(e){return kfe(e)?e.filter(Boolean):_f(e)==="object"&&e!==null?[e]:[]},VU=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Hc(e,yfe);return Xt({},n)},ra=function(e,n,a){var i=e.cx,s=e.getStyles,o=e.getClassNames,l=e.className;return{css:s(n,e),className:i(a??{},o(n,e),l)}};function aS(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function bfe(t){return aS(t)?window.innerHeight:t.clientHeight}function HU(t){return aS(t)?window.pageYOffset:t.scrollTop}function Pw(t,e){if(aS(t)){window.scrollTo(0,e);return}t.scrollTop=e}function jfe(t){var e=getComputedStyle(t),n=e.position==="absolute",a=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&a.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function wfe(t,e,n,a){return n*((t=t/a-1)*t*t+1)+e}function Cj(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ew,i=HU(t),s=e-i,o=10,l=0;function c(){l+=o;var d=wfe(l,i,s,n);Pw(t,d),l<n?window.requestAnimationFrame(c):a(t)}c()}function H4(t,e){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=e.offsetHeight/3;a.bottom+i>n.bottom?Pw(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):a.top-i<n.top&&Pw(t,Math.max(e.offsetTop-i,0))}function Nfe(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function G4(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Sfe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var GU=!1,_fe={get passive(){return GU=!0}},Tj=typeof window<"u"?window:{};Tj.addEventListener&&Tj.removeEventListener&&(Tj.addEventListener("p",Ew,_fe),Tj.removeEventListener("p",Ew,!1));var Cfe=GU;function Tfe(t){return t!=null}function kfe(t){return Array.isArray(t)}function kj(t,e,n){return t?e:n}var Afe=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var l=Ec(o,1),c=l[0];return!a.includes(c)});return s.reduce(function(o,l){var c=Ec(l,2),d=c[0],f=c[1];return o[d]=f,o},{})},Efe=["children","innerProps"],Pfe=["children","innerProps"];function Dfe(t){var e=t.maxHeight,n=t.menuEl,a=t.minHeight,i=t.placement,s=t.shouldScroll,o=t.isFixedPosition,l=t.controlHeight,c=jfe(n),d={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return d;var f=c.getBoundingClientRect(),p=f.height,g=n.getBoundingClientRect(),x=g.bottom,b=g.height,j=g.top,S=n.offsetParent.getBoundingClientRect(),_=S.top,T=o?window.innerHeight:bfe(c),C=HU(c),E=parseInt(getComputedStyle(n).marginBottom,10),k=parseInt(getComputedStyle(n).marginTop,10),P=_-k,I=T-j,R=P+C,z=p-C-j,q=x-T+C+E,F=C+j-k,V=160;switch(i){case"auto":case"bottom":if(I>=b)return{placement:"bottom",maxHeight:e};if(z>=b&&!o)return s&&Cj(c,q,V),{placement:"bottom",maxHeight:e};if(!o&&z>=a||o&&I>=a){s&&Cj(c,q,V);var H=o?I-E:z-E;return{placement:"bottom",maxHeight:H}}if(i==="auto"||o){var K=e,W=o?P:R;return W>=a&&(K=Math.min(W-E-l,e)),{placement:"top",maxHeight:K}}if(i==="bottom")return s&&Pw(c,q),{placement:"bottom",maxHeight:e};break;case"top":if(P>=b)return{placement:"top",maxHeight:e};if(R>=b&&!o)return s&&Cj(c,F,V),{placement:"top",maxHeight:e};if(!o&&R>=a||o&&P>=a){var B=e;return(!o&&R>=a||o&&P>=a)&&(B=o?P-k:R-k),s&&Cj(c,F,V),{placement:"top",maxHeight:B}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return d}function Ofe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var WU=function(e){return e==="auto"?"bottom":e},Mfe=function(e,n){var a,i=e.placement,s=e.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return Xt((a={label:"menu"},fv(a,Ofe(i),"100%"),fv(a,"position","absolute"),fv(a,"width","100%"),fv(a,"zIndex",1),a),n?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},KU=v.createContext(null),Ife=function(e){var n=e.children,a=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,l=e.menuShouldScrollIntoView,c=e.theme,d=v.useContext(KU)||{},f=d.setPortalPlacement,p=v.useRef(null),g=v.useState(i),x=Ec(g,2),b=x[0],j=x[1],S=v.useState(null),_=Ec(S,2),T=_[0],C=_[1],E=c.spacing.controlHeight;return ZE(function(){var k=p.current;if(k){var P=o==="fixed",I=l&&!P,R=Dfe({maxHeight:i,menuEl:k,minHeight:a,placement:s,shouldScroll:I,isFixedPosition:P,controlHeight:E});j(R.maxHeight),C(R.placement),f==null||f(R.placement)}},[i,s,o,l,a,f,E]),n({ref:p,placerProps:Xt(Xt({},e),{},{placement:T||WU(s),maxHeight:b})})},Rfe=function(e){var n=e.children,a=e.innerRef,i=e.innerProps;return Ht("div",rn({},ra(e,"menu",{menu:!0}),{ref:a},i),n)},Lfe=Rfe,Ffe=function(e,n){var a=e.maxHeight,i=e.theme.spacing.baseUnit;return Xt({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},$fe=function(e){var n=e.children,a=e.innerProps,i=e.innerRef,s=e.isMulti;return Ht("div",rn({},ra(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},a),n)},YU=function(e,n){var a=e.theme,i=a.spacing.baseUnit,s=a.colors;return Xt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Bfe=YU,zfe=YU,qfe=function(e){var n=e.children,a=n===void 0?"No options":n,i=e.innerProps,s=Hc(e,Efe);return Ht("div",rn({},ra(Xt(Xt({},s),{},{children:a,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),a)},Ufe=function(e){var n=e.children,a=n===void 0?"Loading...":n,i=e.innerProps,s=Hc(e,Pfe);return Ht("div",rn({},ra(Xt(Xt({},s),{},{children:a,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),a)},Vfe=function(e){var n=e.rect,a=e.offset,i=e.position;return{left:n.left,position:i,top:a,width:n.width,zIndex:1}},Hfe=function(e){var n=e.appendTo,a=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,l=e.menuPosition,c=v.useRef(null),d=v.useRef(null),f=v.useState(WU(o)),p=Ec(f,2),g=p[0],x=p[1],b=v.useMemo(function(){return{setPortalPlacement:x}},[]),j=v.useState(null),S=Ec(j,2),_=S[0],T=S[1],C=v.useCallback(function(){if(i){var I=Nfe(i),R=l==="fixed"?0:window.pageYOffset,z=I[g]+R;(z!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&T({offset:z,rect:I})}},[i,l,g,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);ZE(function(){C()},[C]);var E=v.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),i&&c.current&&(d.current=gfe(i,c.current,C,{elementResize:"ResizeObserver"in window}))},[i,C]);ZE(function(){E()},[E]);var k=v.useCallback(function(I){c.current=I,E()},[E]);if(!n&&l!=="fixed"||!_)return null;var P=Ht("div",rn({ref:k},ra(Xt(Xt({},e),{},{offset:_.offset,position:l,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),a);return Ht(KU.Provider,{value:b},n?UD.createPortal(P,n):P)},Gfe=function(e){var n=e.isDisabled,a=e.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},Wfe=function(e){var n=e.children,a=e.innerProps,i=e.isDisabled,s=e.isRtl;return Ht("div",rn({},ra(e,"container",{"--is-disabled":i,"--is-rtl":s}),a),n)},Kfe=function(e,n){var a=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Xt({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},Yfe=function(e){var n=e.children,a=e.innerProps,i=e.isMulti,s=e.hasValue;return Ht("div",rn({},ra(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),a),n)},Qfe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Xfe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ra(e,"indicatorsContainer",{indicators:!0}),a),n)},W4,Jfe=["size"],Zfe=["innerProps","isRtl","size"],epe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},QU=function(e){var n=e.size,a=Hc(e,Jfe);return Ht("svg",rn({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:epe},a))},_O=function(e){return Ht(QU,rn({size:20},e),Ht("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},XU=function(e){return Ht(QU,rn({size:20},e),Ht("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},JU=function(e,n){var a=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Xt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:a?o.neutral60:o.neutral20,padding:s*2,":hover":{color:a?o.neutral80:o.neutral40}})},tpe=JU,npe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ra(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),n||Ht(XU,null))},rpe=JU,ape=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ra(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),n||Ht(_O,null))},ipe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Xt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:a?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},spe=function(e){var n=e.innerProps;return Ht("span",rn({},n,ra(e,"indicatorSeparator",{"indicator-separator":!0})))},ope=efe(W4||(W4=tfe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),lpe=function(e,n){var a=e.isFocused,i=e.size,s=e.theme,o=s.colors,l=s.spacing.baseUnit;return Xt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:a?o.neutral60:o.neutral20,padding:l*2})},EC=function(e){var n=e.delay,a=e.offset;return Ht("span",{css:jO({animation:"".concat(ope," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},cpe=function(e){var n=e.innerProps,a=e.isRtl,i=e.size,s=i===void 0?4:i,o=Hc(e,Zfe);return Ht("div",rn({},ra(Xt(Xt({},o),{},{innerProps:n,isRtl:a,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Ht(EC,{delay:0,offset:a}),Ht(EC,{delay:160,offset:!0}),Ht(EC,{delay:320,offset:!a}))},upe=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return Xt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:a?o.neutral5:o.neutral0,borderColor:a?o.neutral10:i?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},dpe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,l=e.menuIsOpen;return Ht("div",rn({ref:s},ra(e,"control",{control:!0,"control--is-disabled":a,"control--is-focused":i,"control--menu-is-open":l}),o,{"aria-disabled":a||void 0}),n)},hpe=dpe,fpe=["data"],ppe=function(e,n){var a=e.theme.spacing;return n?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},mpe=function(e){var n=e.children,a=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,l=e.headingProps,c=e.innerProps,d=e.label,f=e.theme,p=e.selectProps;return Ht("div",rn({},ra(e,"group",{group:!0}),c),Ht(o,rn({},l,{selectProps:p,theme:f,getStyles:i,getClassNames:s,cx:a}),d),Ht("div",null,n))},gpe=function(e,n){var a=e.theme,i=a.colors,s=a.spacing;return Xt({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},ype=function(e){var n=VU(e);n.data;var a=Hc(n,fpe);return Ht("div",rn({},ra(e,"groupHeading",{"group-heading":!0}),a))},xpe=mpe,vpe=["innerRef","isDisabled","isHidden","inputClassName"],bpe=function(e,n){var a=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,l=s.colors;return Xt(Xt({visibility:a?"hidden":"visible",transform:i?"translateZ(0)":""},jpe),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},ZU={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},jpe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Xt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},ZU)},wpe=function(e){return Xt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},ZU)},Npe=function(e){var n=e.cx,a=e.value,i=VU(e),s=i.innerRef,o=i.isDisabled,l=i.isHidden,c=i.inputClassName,d=Hc(i,vpe);return Ht("div",rn({},ra(e,"input",{"input-container":!0}),{"data-value":a||""}),Ht("input",rn({className:n({input:!0},c),ref:s,style:wpe(l),disabled:o},d)))},Spe=Npe,_pe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors;return Xt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},Cpe=function(e,n){var a=e.theme,i=a.borderRadius,s=a.colors,o=e.cropWithEllipsis;return Xt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Tpe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors,l=e.isFocused;return Xt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},e9=function(e){var n=e.children,a=e.innerProps;return Ht("div",a,n)},kpe=e9,Ape=e9;function Epe(t){var e=t.children,n=t.innerProps;return Ht("div",rn({role:"button"},n),e||Ht(_O,{size:14}))}var Ppe=function(e){var n=e.children,a=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,l=e.removeProps,c=e.selectProps,d=a.Container,f=a.Label,p=a.Remove;return Ht(d,{data:i,innerProps:Xt(Xt({},ra(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},Ht(f,{data:i,innerProps:Xt({},ra(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),Ht(p,{data:i,innerProps:Xt(Xt({},ra(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},Dpe=Ppe,Ope=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,l=o.spacing,c=o.colors;return Xt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?c.primary:i?c.primary25:"transparent",color:a?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:s?c.primary:c.primary50}})},Mpe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,l=e.innerProps;return Ht("div",rn({},ra(e,"option",{option:!0,"option--is-disabled":a,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":a},l),n)},Ipe=Mpe,Rpe=function(e,n){var a=e.theme,i=a.spacing,s=a.colors;return Xt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Lpe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ra(e,"placeholder",{placeholder:!0}),a),n)},Fpe=Lpe,$pe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return Xt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:a?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Bpe=function(e){var n=e.children,a=e.isDisabled,i=e.innerProps;return Ht("div",rn({},ra(e,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),i),n)},zpe=Bpe,qpe={ClearIndicator:ape,Control:hpe,DropdownIndicator:npe,DownChevron:XU,CrossIcon:_O,Group:xpe,GroupHeading:ype,IndicatorsContainer:Xfe,IndicatorSeparator:spe,Input:Spe,LoadingIndicator:cpe,Menu:Lfe,MenuList:$fe,MenuPortal:Hfe,LoadingMessage:Ufe,NoOptionsMessage:qfe,MultiValue:Dpe,MultiValueContainer:kpe,MultiValueLabel:Ape,MultiValueRemove:Epe,Option:Ipe,Placeholder:Fpe,SelectContainer:Wfe,SingleValue:zpe,ValueContainer:Yfe},Upe=function(e){return Xt(Xt({},qpe),e.components)},K4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Vpe(t,e){return!!(t===e||K4(t)&&K4(e))}function Hpe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Vpe(t[n],e[n]))return!1;return!0}function Gpe(t,e){e===void 0&&(e=Hpe);var n=null;function a(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return a.clear=function(){n=null},a}var Wpe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Kpe=function(e){return Ht("span",rn({css:Wpe},e))},Y4=Kpe,Ype={guidance:function(e){var n=e.isSearchable,a=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,a=e.label,i=a===void 0?"":a,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,a=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,l=e.selectValue,c=e.isDisabled,d=e.isSelected,f=e.isAppleDevice,p=function(j,S){return j&&j.length?"".concat(j.indexOf(S)+1," of ").concat(j.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(p(l,a),".");if(n==="menu"&&f){var g=c?" disabled":"",x="".concat(d?" selected":"").concat(g);return"".concat(o).concat(x,", ").concat(p(i,a),".")}return""},onFilter:function(e){var n=e.inputValue,a=e.resultsMessage;return"".concat(a).concat(n?" for search term "+n:"",".")}},Qpe=function(e){var n=e.ariaSelection,a=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,l=e.selectValue,c=e.selectProps,d=e.id,f=e.isAppleDevice,p=c.ariaLiveMessages,g=c.getOptionLabel,x=c.inputValue,b=c.isMulti,j=c.isOptionDisabled,S=c.isSearchable,_=c.menuIsOpen,T=c.options,C=c.screenReaderStatus,E=c.tabSelectsValue,k=c.isLoading,P=c["aria-label"],I=c["aria-live"],R=v.useMemo(function(){return Xt(Xt({},Ype),p||{})},[p]),z=v.useMemo(function(){var W="";if(n&&R.onChange){var B=n.option,G=n.options,ee=n.removedValue,X=n.removedValues,$=n.value,ce=function(oe){return Array.isArray(oe)?null:oe},xe=ee||B||ce($),Y=xe?g(xe):"",Re=G||X||void 0,$e=Re?Re.map(g):[],ze=Xt({isDisabled:xe&&j(xe,l),label:Y,labels:$e},n);W=R.onChange(ze)}return W},[n,R,j,l,g]),q=v.useMemo(function(){var W="",B=a||i,G=!!(a&&l&&l.includes(a));if(B&&R.onFocus){var ee={focused:B,label:g(B),isDisabled:j(B,l),isSelected:G,options:s,context:B===a?"menu":"value",selectValue:l,isAppleDevice:f};W=R.onFocus(ee)}return W},[a,i,g,j,R,s,l,f]),F=v.useMemo(function(){var W="";if(_&&T.length&&!k&&R.onFilter){var B=C({count:s.length});W=R.onFilter({inputValue:x,resultsMessage:B})}return W},[s,x,_,R,T,C,k]),V=(n==null?void 0:n.action)==="initial-input-focus",H=v.useMemo(function(){var W="";if(R.guidance){var B=i?"value":_?"menu":"input";W=R.guidance({"aria-label":P,context:B,isDisabled:a&&j(a,l),isMulti:b,isSearchable:S,tabSelectsValue:E,isInitialFocus:V})}return W},[P,a,i,b,j,S,_,R,l,E,V]),K=Ht(v.Fragment,null,Ht("span",{id:"aria-selection"},z),Ht("span",{id:"aria-focused"},q),Ht("span",{id:"aria-results"},F),Ht("span",{id:"aria-guidance"},H));return Ht(v.Fragment,null,Ht(Y4,{id:d},V&&K),Ht(Y4,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!V&&K))},Xpe=Qpe,eP=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Jpe=new RegExp("["+eP.map(function(t){return t.letters}).join("")+"]","g"),t9={};for(var PC=0;PC<eP.length;PC++)for(var DC=eP[PC],OC=0;OC<DC.letters.length;OC++)t9[DC.letters[OC]]=DC.base;var n9=function(e){return e.replace(Jpe,function(n){return t9[n]})},Zpe=Gpe(n9),Q4=function(e){return e.replace(/^\s+|\s+$/g,"")},eme=function(e){return"".concat(e.label," ").concat(e.value)},tme=function(e){return function(n,a){if(n.data.__isNew__)return!0;var i=Xt({ignoreCase:!0,ignoreAccents:!0,stringify:eme,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,l=i.stringify,c=i.trim,d=i.matchFrom,f=c?Q4(a):a,p=c?Q4(l(n)):l(n);return s&&(f=f.toLowerCase(),p=p.toLowerCase()),o&&(f=Zpe(f),p=n9(p)),d==="start"?p.substr(0,f.length)===f:p.indexOf(f)>-1}},nme=["innerRef"];function rme(t){var e=t.innerRef,n=Hc(t,nme),a=Afe(n,"onExited","in","enter","exit","appear");return Ht("input",rn({ref:e},a,{css:jO({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var ame=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function ime(t){var e=t.isEnabled,n=t.onBottomArrive,a=t.onBottomLeave,i=t.onTopArrive,s=t.onTopLeave,o=v.useRef(!1),l=v.useRef(!1),c=v.useRef(0),d=v.useRef(null),f=v.useCallback(function(S,_){if(d.current!==null){var T=d.current,C=T.scrollTop,E=T.scrollHeight,k=T.clientHeight,P=d.current,I=_>0,R=E-k-C,z=!1;R>_&&o.current&&(a&&a(S),o.current=!1),I&&l.current&&(s&&s(S),l.current=!1),I&&_>R?(n&&!o.current&&n(S),P.scrollTop=E,z=!0,o.current=!0):!I&&-_>C&&(i&&!l.current&&i(S),P.scrollTop=0,z=!0,l.current=!0),z&&ame(S)}},[n,a,i,s]),p=v.useCallback(function(S){f(S,S.deltaY)},[f]),g=v.useCallback(function(S){c.current=S.changedTouches[0].clientY},[]),x=v.useCallback(function(S){var _=c.current-S.changedTouches[0].clientY;f(S,_)},[f]),b=v.useCallback(function(S){if(S){var _=Cfe?{passive:!1}:!1;S.addEventListener("wheel",p,_),S.addEventListener("touchstart",g,_),S.addEventListener("touchmove",x,_)}},[x,g,p]),j=v.useCallback(function(S){S&&(S.removeEventListener("wheel",p,!1),S.removeEventListener("touchstart",g,!1),S.removeEventListener("touchmove",x,!1))},[x,g,p]);return v.useEffect(function(){if(e){var S=d.current;return b(S),function(){j(S)}}},[e,b,j]),function(S){d.current=S}}var X4=["boxSizing","height","overflow","paddingRight","position"],J4={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Z4(t){t.cancelable&&t.preventDefault()}function e3(t){t.stopPropagation()}function t3(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function n3(){return"ontouchstart"in window||navigator.maxTouchPoints}var r3=!!(typeof window<"u"&&window.document&&window.document.createElement),Xx=0,xm={capture:!1,passive:!1};function sme(t){var e=t.isEnabled,n=t.accountForScrollbars,a=n===void 0?!0:n,i=v.useRef({}),s=v.useRef(null),o=v.useCallback(function(c){if(r3){var d=document.body,f=d&&d.style;if(a&&X4.forEach(function(b){var j=f&&f[b];i.current[b]=j}),a&&Xx<1){var p=parseInt(i.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,x=window.innerWidth-g+p||0;Object.keys(J4).forEach(function(b){var j=J4[b];f&&(f[b]=j)}),f&&(f.paddingRight="".concat(x,"px"))}d&&n3()&&(d.addEventListener("touchmove",Z4,xm),c&&(c.addEventListener("touchstart",t3,xm),c.addEventListener("touchmove",e3,xm))),Xx+=1}},[a]),l=v.useCallback(function(c){if(r3){var d=document.body,f=d&&d.style;Xx=Math.max(Xx-1,0),a&&Xx<1&&X4.forEach(function(p){var g=i.current[p];f&&(f[p]=g)}),d&&n3()&&(d.removeEventListener("touchmove",Z4,xm),c&&(c.removeEventListener("touchstart",t3,xm),c.removeEventListener("touchmove",e3,xm)))}},[a]);return v.useEffect(function(){if(e){var c=s.current;return o(c),function(){l(c)}}},[e,o,l]),function(c){s.current=c}}var ome=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},lme={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function cme(t){var e=t.children,n=t.lockEnabled,a=t.captureEnabled,i=a===void 0?!0:a,s=t.onBottomArrive,o=t.onBottomLeave,l=t.onTopArrive,c=t.onTopLeave,d=ime({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),f=sme({isEnabled:n}),p=function(x){d(x),f(x)};return Ht(v.Fragment,null,n&&Ht("div",{onClick:ome,css:lme}),e(p))}var ume={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},dme=function(e){var n=e.name,a=e.onFocus;return Ht("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:ume,value:"",onChange:function(){}})},hme=dme;function CO(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function fme(){return CO(/^iPhone/i)}function r9(){return CO(/^Mac/i)}function pme(){return CO(/^iPad/i)||r9()&&navigator.maxTouchPoints>1}function mme(){return fme()||pme()}function gme(){return r9()||mme()}var yme=function(e){return e.label},xme=function(e){return e.label},vme=function(e){return e.value},bme=function(e){return!!e.isDisabled},jme={clearIndicator:rpe,container:Gfe,control:upe,dropdownIndicator:tpe,group:ppe,groupHeading:gpe,indicatorsContainer:Qfe,indicatorSeparator:ipe,input:bpe,loadingIndicator:lpe,loadingMessage:zfe,menu:Mfe,menuList:Ffe,menuPortal:Vfe,multiValue:_pe,multiValueLabel:Cpe,multiValueRemove:Tpe,noOptionsMessage:Bfe,option:Ope,placeholder:Rpe,singleValue:$pe,valueContainer:Kfe},wme={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Nme=4,a9=4,Sme=38,_me=a9*2,Cme={baseUnit:a9,controlHeight:Sme,menuGutter:_me},MC={borderRadius:Nme,colors:wme,spacing:Cme},Tme={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:G4(),captureMenuScroll:!G4(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:tme(),formatGroupLabel:yme,getOptionLabel:xme,getOptionValue:vme,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:bme,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Sfe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function a3(t,e,n,a){var i=o9(t,e,n),s=l9(t,e,n),o=s9(t,e),l=Dw(t,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:l,index:a}}function sw(t,e){return t.options.map(function(n,a){if("options"in n){var i=n.options.map(function(o,l){return a3(t,o,e,l)}).filter(function(o){return s3(t,o)});return i.length>0?{type:"group",data:n,options:i,index:a}:void 0}var s=a3(t,n,e,a);return s3(t,s)?s:void 0}).filter(Tfe)}function i9(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,gO(n.options.map(function(a){return a.data}))):e.push(n.data),e},[])}function i3(t,e){return t.reduce(function(n,a){return a.type==="group"?n.push.apply(n,gO(a.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(a.index,"-").concat(i.index)}}))):n.push({data:a.data,id:"".concat(e,"-").concat(a.index)}),n},[])}function kme(t,e){return i9(sw(t,e))}function s3(t,e){var n=t.inputValue,a=n===void 0?"":n,i=e.data,s=e.isSelected,o=e.label,l=e.value;return(!u9(t)||!s)&&c9(t,{label:o,value:l,data:i},a)}function Ame(t,e){var n=t.focusedValue,a=t.selectValue,i=a.indexOf(n);if(i>-1){var s=e.indexOf(n);if(s>-1)return n;if(i<e.length)return e[i]}return null}function Eme(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var IC=function(e,n){var a,i=(a=e.find(function(s){return s.data===n}))===null||a===void 0?void 0:a.id;return i||null},s9=function(e,n){return e.getOptionLabel(n)},Dw=function(e,n){return e.getOptionValue(n)};function o9(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function l9(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var a=Dw(t,e);return n.some(function(i){return Dw(t,i)===a})}function c9(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var u9=function(e){var n=e.hideSelectedOptions,a=e.isMulti;return n===void 0?a:n},Pme=1,d9=function(t){Xde(n,t);var e=ehe(n);function n(a){var i;if(Yde(this,n),i=e.call(this,a),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(c){i.controlRef=c},i.focusedOptionRef=null,i.getFocusedOptionRef=function(c){i.focusedOptionRef=c},i.menuListRef=null,i.getMenuListRef=function(c){i.menuListRef=c},i.inputRef=null,i.getInputRef=function(c){i.inputRef=c},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(c,d){var f=i.props,p=f.onChange,g=f.name;d.name=g,i.ariaOnChange(c,d),p(c,d)},i.setValue=function(c,d,f){var p=i.props,g=p.closeMenuOnSelect,x=p.isMulti,b=p.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:b}),g&&(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(c,{action:d,option:f})},i.selectOption=function(c){var d=i.props,f=d.blurInputOnSelect,p=d.isMulti,g=d.name,x=i.state.selectValue,b=p&&i.isOptionSelected(c,x),j=i.isOptionDisabled(c,x);if(b){var S=i.getOptionValue(c);i.setValue(x.filter(function(_){return i.getOptionValue(_)!==S}),"deselect-option",c)}else if(!j)p?i.setValue([].concat(gO(x),[c]),"select-option",c):i.setValue(c,"select-option");else{i.ariaOnChange(c,{action:"select-option",option:c,name:g});return}f&&i.blurInput()},i.removeValue=function(c){var d=i.props.isMulti,f=i.state.selectValue,p=i.getOptionValue(c),g=f.filter(function(b){return i.getOptionValue(b)!==p}),x=kj(d,g,g[0]||null);i.onChange(x,{action:"remove-value",removedValue:c}),i.focusInput()},i.clearValue=function(){var c=i.state.selectValue;i.onChange(kj(i.props.isMulti,[],null),{action:"clear",removedValues:c})},i.popValue=function(){var c=i.props.isMulti,d=i.state.selectValue,f=d[d.length-1],p=d.slice(0,d.length-1),g=kj(c,p,p[0]||null);f&&i.onChange(g,{action:"pop-value",removedValue:f})},i.getFocusedOptionId=function(c){return IC(i.state.focusableOptionsWithIds,c)},i.getFocusableOptionsWithIds=function(){return i3(sw(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return vfe.apply(void 0,[i.props.classNamePrefix].concat(d))},i.getOptionLabel=function(c){return s9(i.props,c)},i.getOptionValue=function(c){return Dw(i.props,c)},i.getStyles=function(c,d){var f=i.props.unstyled,p=jme[c](d,f);p.boxSizing="border-box";var g=i.props.styles[c];return g?g(p,d):p},i.getClassNames=function(c,d){var f,p;return(f=(p=i.props.classNames)[c])===null||f===void 0?void 0:f.call(p,d)},i.getElementId=function(c){return"".concat(i.state.instancePrefix,"-").concat(c)},i.getComponents=function(){return Upe(i.props)},i.buildCategorizedOptions=function(){return sw(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return i9(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(c,d){i.setState({ariaSelection:Xt({value:c},d)})},i.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(c){i.blockOptionHover=!1},i.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&i.onMenuClose():d&&i.openMenu("first"):(d&&(i.openAfterFocus=!0),i.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},i.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!i.props.isDisabled){var d=i.props,f=d.isMulti,p=d.menuIsOpen;i.focusInput(),p?(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()):i.openMenu("first"),c.preventDefault()}},i.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(i.clearValue(),c.preventDefault(),i.openAfterFocus=!1,c.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(c){typeof i.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&aS(c.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(c)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(c){var d=c.touches,f=d&&d.item(0);f&&(i.initialTouchX=f.clientX,i.initialTouchY=f.clientY,i.userIsDragging=!1)},i.onTouchMove=function(c){var d=c.touches,f=d&&d.item(0);if(f){var p=Math.abs(f.clientX-i.initialTouchX),g=Math.abs(f.clientY-i.initialTouchY),x=5;i.userIsDragging=p>x||g>x}},i.onTouchEnd=function(c){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(c.target)&&i.menuListRef&&!i.menuListRef.contains(c.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(c){i.userIsDragging||i.onControlMouseDown(c)},i.onClearIndicatorTouchEnd=function(c){i.userIsDragging||i.onClearIndicatorMouseDown(c)},i.onDropdownIndicatorTouchEnd=function(c){i.userIsDragging||i.onDropdownIndicatorMouseDown(c)},i.handleInputChange=function(c){var d=i.props.inputValue,f=c.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(f,{action:"input-change",prevInputValue:d}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(c){i.props.onFocus&&i.props.onFocus(c),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(c){var d=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(c),i.onInputChange("",{action:"input-blur",prevInputValue:d}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(c){if(!(i.blockOptionHover||i.state.focusedOption===c)){var d=i.getFocusableOptions(),f=d.indexOf(c);i.setState({focusedOption:c,focusedOptionId:f>-1?i.getFocusedOptionId(c):null})}},i.shouldHideSelectedOptions=function(){return u9(i.props)},i.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),i.focus()},i.onKeyDown=function(c){var d=i.props,f=d.isMulti,p=d.backspaceRemovesValue,g=d.escapeClearsValue,x=d.inputValue,b=d.isClearable,j=d.isDisabled,S=d.menuIsOpen,_=d.onKeyDown,T=d.tabSelectsValue,C=d.openMenuOnFocus,E=i.state,k=E.focusedOption,P=E.focusedValue,I=E.selectValue;if(!j&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(i.blockOptionHover=!0,c.key){case"ArrowLeft":if(!f||x)return;i.focusValue("previous");break;case"ArrowRight":if(!f||x)return;i.focusValue("next");break;case"Delete":case"Backspace":if(x)return;if(P)i.removeValue(P);else{if(!p)return;f?i.popValue():b&&i.clearValue()}break;case"Tab":if(i.isComposing||c.shiftKey||!S||!T||!k||C&&i.isOptionSelected(k,I))return;i.selectOption(k);break;case"Enter":if(c.keyCode===229)break;if(S){if(!k||i.isComposing)return;i.selectOption(k);break}return;case"Escape":S?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:x}),i.onMenuClose()):b&&g&&i.clearValue();break;case" ":if(x)return;if(!S){i.openMenu("first");break}if(!k)return;i.selectOption(k);break;case"ArrowUp":S?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":S?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!S)return;i.focusOption("pageup");break;case"PageDown":if(!S)return;i.focusOption("pagedown");break;case"Home":if(!S)return;i.focusOption("first");break;case"End":if(!S)return;i.focusOption("last");break;default:return}c.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Pme),i.state.selectValue=V4(a.value),a.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),l=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[l],i.state.focusedOptionId=IC(s,o[l])}return i}return Qde(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&H4(this.menuListRef,this.focusedOptionRef),gme()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&i.isDisabled||c&&l&&!i.menuIsOpen)&&this.focusInput(),c&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(H4(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),f=i==="first"?0:d.length-1;if(!this.props.isMulti){var p=d.indexOf(l[0]);p>-1&&(f=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[f],focusedOptionId:this.getFocusedOptionId(d[f])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,f=-1;if(o.length){switch(i){case"previous":c===0?f=0:c===-1?f=d:f=c-1;break;case"next":c>-1&&c<d&&(f=c+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),i==="up"?c=d>0?d-1:l.length-1:i==="down"?c=(d+1)%l.length:i==="pageup"?(c=d-s,c<0&&(c=0)):i==="pagedown"?(c=d+s,c>l.length-1&&(c=l.length-1)):i==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(MC):Xt(Xt({},MC),this.props.theme):MC}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,f=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,b=p.options,j=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:j,isMulti:g,isRtl:x,options:b,selectOption:d,selectProps:p,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return o9(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return l9(this.props,i,s)}},{key:"filterOption",value:function(i,s){return c9(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,l=i.inputId,c=i.inputValue,d=i.tabIndex,f=i.form,p=i.menuIsOpen,g=i.required,x=this.getComponents(),b=x.Input,j=this.state,S=j.inputIsHidden,_=j.ariaSelection,T=this.commonProps,C=l||this.getElementId("input"),E=Xt(Xt(Xt({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?v.createElement(b,rn({},T,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:s,isHidden:S,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:f,type:"text",value:c},E)):v.createElement(rme,rn({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Ew,onFocus:this.onInputFocus,disabled:s,tabIndex:d,inputMode:"none",form:f,value:""},E))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,d=s.MultiValueRemove,f=s.SingleValue,p=s.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,j=x.isDisabled,S=x.isMulti,_=x.inputValue,T=x.placeholder,C=this.state,E=C.selectValue,k=C.focusedValue,P=C.isFocused;if(!this.hasValue()||!b)return _?null:v.createElement(p,rn({},g,{key:"placeholder",isDisabled:j,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),T);if(S)return E.map(function(R,z){var q=R===k,F="".concat(i.getOptionLabel(R),"-").concat(i.getOptionValue(R));return v.createElement(o,rn({},g,{components:{Container:l,Label:c,Remove:d},isFocused:q,isDisabled:j,key:F,index:z,removeProps:{onClick:function(){return i.removeValue(R)},onTouchEnd:function(){return i.removeValue(R)},onMouseDown:function(H){H.preventDefault()}},data:R}),i.formatOptionLabel(R,"value"))});if(_)return null;var I=E[0];return v.createElement(f,rn({},g,{data:I,isDisabled:j}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||d)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:p,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!s||!d)return null;var p={"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:p,isDisabled:c,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return v.createElement(o,rn({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,d=s.MenuList,f=s.MenuPortal,p=s.LoadingMessage,g=s.NoOptionsMessage,x=s.Option,b=this.commonProps,j=this.state.focusedOption,S=this.props,_=S.captureMenuScroll,T=S.inputValue,C=S.isLoading,E=S.loadingMessage,k=S.minMenuHeight,P=S.maxMenuHeight,I=S.menuIsOpen,R=S.menuPlacement,z=S.menuPosition,q=S.menuPortalTarget,F=S.menuShouldBlockScroll,V=S.menuShouldScrollIntoView,H=S.noOptionsMessage,K=S.onMenuScrollToTop,W=S.onMenuScrollToBottom;if(!I)return null;var B=function(Y,Re){var $e=Y.type,ze=Y.data,Le=Y.isDisabled,oe=Y.isSelected,Se=Y.label,Ve=Y.value,Ae=j===ze,ue=Le?void 0:function(){return i.onOptionHover(ze)},Te=Le?void 0:function(){return i.selectOption(ze)},se="".concat(i.getElementId("option"),"-").concat(Re),be={id:se,onClick:Te,onMouseMove:ue,onMouseOver:ue,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:oe};return v.createElement(x,rn({},b,{innerProps:be,data:ze,isDisabled:Le,isSelected:oe,key:se,label:Se,type:$e,value:Ve,isFocused:Ae,innerRef:Ae?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Y.data,"menu"))},G;if(this.hasOptions())G=this.getCategorizedOptions().map(function(xe){if(xe.type==="group"){var Y=xe.data,Re=xe.options,$e=xe.index,ze="".concat(i.getElementId("group"),"-").concat($e),Le="".concat(ze,"-heading");return v.createElement(o,rn({},b,{key:ze,data:Y,options:Re,Heading:l,headingProps:{id:Le,data:xe.data},label:i.formatGroupLabel(xe.data)}),xe.options.map(function(oe){return B(oe,"".concat($e,"-").concat(oe.index))}))}else if(xe.type==="option")return B(xe,"".concat(xe.index))});else if(C){var ee=E({inputValue:T});if(ee===null)return null;G=v.createElement(p,b,ee)}else{var X=H({inputValue:T});if(X===null)return null;G=v.createElement(g,b,X)}var $={minMenuHeight:k,maxMenuHeight:P,menuPlacement:R,menuPosition:z,menuShouldScrollIntoView:V},ce=v.createElement(Ife,rn({},b,$),function(xe){var Y=xe.ref,Re=xe.placerProps,$e=Re.placement,ze=Re.maxHeight;return v.createElement(c,rn({},b,$,{innerRef:Y,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:C,placement:$e}),v.createElement(cme,{captureEnabled:_,onTopArrive:K,onBottomArrive:W,lockEnabled:F},function(Le){return v.createElement(d,rn({},b,{innerRef:function(Se){i.getMenuListRef(Se),Le(Se)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:C,maxHeight:ze,focusedOption:j}),G)}))});return q||z==="fixed"?v.createElement(f,rn({},b,{appendTo:q,controlElement:this.controlRef,menuPlacement:R,menuPosition:z}),ce):ce}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,d=s.name,f=s.required,p=this.state.selectValue;if(f&&!this.hasValue()&&!l)return v.createElement(hme,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var g=p.map(function(j){return i.getOptionValue(j)}).join(o);return v.createElement("input",{name:d,type:"hidden",value:g})}else{var x=p.length>0?p.map(function(j,S){return v.createElement("input",{key:"i-".concat(S),name:d,type:"hidden",value:i.getOptionValue(j)})}):v.createElement("input",{name:d,type:"hidden",value:""});return v.createElement("div",null,x)}else{var b=p[0]?this.getOptionValue(p[0]):"";return v.createElement("input",{name:d,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,d=s.isFocused,f=s.selectValue,p=this.getFocusableOptions();return v.createElement(Xpe,rn({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:f,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,l=i.SelectContainer,c=i.ValueContainer,d=this.props,f=d.className,p=d.id,g=d.isDisabled,x=d.menuIsOpen,b=this.state.isFocused,j=this.commonProps=this.getCommonProps();return v.createElement(l,rn({},j,{className:f,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),v.createElement(s,rn({},j,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),v.createElement(c,rn({},j,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),v.createElement(o,rn({},j,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,d=s.ariaSelection,f=s.isFocused,p=s.prevWasFocused,g=s.instancePrefix,x=i.options,b=i.value,j=i.menuIsOpen,S=i.inputValue,_=i.isMulti,T=V4(b),C={};if(o&&(b!==o.value||x!==o.options||j!==o.menuIsOpen||S!==o.inputValue)){var E=j?kme(i,T):[],k=j?i3(sw(i,T),"".concat(g,"-option")):[],P=l?Ame(s,T):null,I=Eme(s,E),R=IC(k,I);C={selectValue:T,focusedOption:I,focusedOptionId:R,focusableOptionsWithIds:k,focusedValue:P,clearFocusValueOnUpdate:!1}}var z=c!=null&&i!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},q=d,F=f&&p;return f&&!F&&(q={value:kj(_,T,T[0]||null),options:T,action:"initial-input-focus"},F=!p),(d==null?void 0:d.action)==="initial-input-focus"&&(q=null),Xt(Xt(Xt({},C),z),{},{prevProps:i,ariaSelection:q,prevWasFocused:F})}}]),n}(v.Component);d9.defaultProps=Tme;var Dme=v.forwardRef(function(t,e){var n=Kde(t);return v.createElement(d9,rn({ref:e},n))}),h9=Dme;const vm=new Map,f9=(()=>{const t=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async e=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),e!=null&&e.id&&vm.has(e.id)){const i=vm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&vm.set(e.id,a),a}catch{if(await t,e!=null&&e.id&&vm.has(e.id)){const i=vm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&vm.set(e.id,a),a}}})();function Ome(t){var e=atob(t),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n.buffer}const Mme=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,p9=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,Aj=new Map,tP=(t,e)=>{const n=new Blob([`registerProcessor("${t}", ${e})`],{type:"application/javascript"});return URL.createObjectURL(n)};var RC={exports:{}},o3;function Ime(){return o3||(o3=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,x,b){var j=n?n+d:d;if(!this._events[j])return!1;var S=this._events[j],_=arguments.length,T,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,g),!0;case 5:return S.fn.call(S.context,f,p,g,x),!0;case 6:return S.fn.call(S.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];S.fn.apply(S.context,T)}else{var E=S.length,k;for(C=0;C<E;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];S[C].fn.apply(S[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,S=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(RC)),RC.exports}var Rme=Ime();const m9=Hn(Rme);function Lme(t){for(var e="",n=new Uint8Array(t),a=n.byteLength,i=0;i<a;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}class g9 extends m9{constructor(n=16e3){super();jr(this,"stream");jr(this,"audioContext");jr(this,"source");jr(this,"recording",!1);jr(this,"recordingWorklet");jr(this,"vuWorklet");jr(this,"starting",null);this.sampleRate=n}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async n=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await f9({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const a="audio-recorder-worklet",i=tP(a,Mme);await this.audioContext.audioWorklet.addModule(i),this.recordingWorklet=new AudioWorkletNode(this.audioContext,a),this.recordingWorklet.port.onmessage=async o=>{const l=o.data.data.int16arrayBuffer;if(l){const c=Lme(l);this.emit("data",c)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(tP(s,p9)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=o=>{this.emit("volume",o.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,n(),this.starting=null})}stop(){const n=()=>{var a,i;(a=this.source)==null||a.disconnect(),(i=this.stream)==null||i.getTracks().forEach(s=>s.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(n);return}n()}}const Fme=3,$me=({active:t,volume:e,hover:n})=>{const a=v.useRef([]);return v.useEffect(()=>{let i=null;const s=()=>{a.current.forEach((o,l)=>{o&&(o.style.height=`${Math.min(24,4+e*(l===1?400:60))}px`)}),i=window.setTimeout(s,100)};return s(),()=>clearTimeout(i)},[e]),r.jsx("div",{className:ad("audioPulse",{active:t,hover:n}),children:Array(Fme).fill(null).map((i,s)=>r.jsx("div",{ref:o=>{a.current[s]=o},style:{animationDelay:`${s*133}ms`}},s))})};var pv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Bme=pv.exports,l3;function zme(){return l3||(l3=1,function(t,e){(function(){var n,a="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",p=1,g=2,x=4,b=1,j=2,S=1,_=2,T=4,C=8,E=16,k=32,P=64,I=128,R=256,z=512,q=30,F="...",V=800,H=16,K=1,W=2,B=3,G=1/0,ee=9007199254740991,X=17976931348623157e292,$=NaN,ce=4294967295,xe=ce-1,Y=ce>>>1,Re=[["ary",I],["bind",S],["bindKey",_],["curry",C],["curryRight",E],["flip",z],["partial",k],["partialRight",P],["rearg",R]],$e="[object Arguments]",ze="[object Array]",Le="[object AsyncFunction]",oe="[object Boolean]",Se="[object Date]",Ve="[object DOMException]",Ae="[object Error]",ue="[object Function]",Te="[object GeneratorFunction]",se="[object Map]",be="[object Number]",_e="[object Null]",Ne="[object Object]",Z="[object Promise]",ge="[object Proxy]",de="[object RegExp]",ae="[object Set]",ne="[object String]",ie="[object Symbol]",je="[object Undefined]",Ee="[object WeakMap]",Q="[object WeakSet]",ye="[object ArrayBuffer]",me="[object DataView]",he="[object Float32Array]",De="[object Float64Array]",nt="[object Int8Array]",Fe="[object Int16Array]",Ge="[object Int32Array]",it="[object Uint8Array]",wt="[object Uint8ClampedArray]",we="[object Uint16Array]",Qe="[object Uint32Array]",Xe=/\b__p \+= '';/g,ct=/\b(__p \+=) '' \+/g,Ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,ot=RegExp(bt.source),Tt=RegExp(ke.source),Ue=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vt=/[\\^$.*+?()[\]{}|]/g,Yn=RegExp(Vt.source),vr=/^\s+/,za=/\s/,Xr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wa=/\{\n\/\* \[wrapped with (.+)\] \*/,pn=/,? & /,qr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tn=/[()=,{}\[\]\/\s]/,Rn=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,St=/^[-+]0x[0-9a-f]+$/i,Ot=/^0b[01]+$/i,Sn=/^\[object .+?Constructor\]$/,Ln=/^0o[0-7]+$/i,Na=/^(?:0|[1-9]\d*)$/,xi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ho=/($^)/,Td=/['\n\r\u2028\u2029\\]/g,kd="\\ud800-\\udfff",VS="\\u0300-\\u036f",Bf="\\ufe20-\\ufe2f",zf="\\u20d0-\\u20ff",Fs=VS+Bf+zf,qf="\\u2700-\\u27bf",Xg="a-z\\xdf-\\xf6\\xf8-\\xff",Qc="\\xac\\xb1\\xd7\\xf7",Jg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zg="\\u2000-\\u206f",HS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ey="A-Z\\xc0-\\xd6\\xd8-\\xde",vi="\\ufe0e\\ufe0f",ty=Qc+Jg+Zg+HS,ny="[']",Uf="["+kd+"]",ry="["+ty+"]",Hl="["+Fs+"]",Yb="\\d+",qi="["+qf+"]",Vf="["+Xg+"]",ay="[^"+kd+ty+Yb+qf+Xg+ey+"]",Ad="\\ud83c[\\udffb-\\udfff]",Xc="(?:"+Hl+"|"+Ad+")",iy="[^"+kd+"]",Hf="(?:\\ud83c[\\udde6-\\uddff]){2}",Yo="[\\ud800-\\udbff][\\udc00-\\udfff]",Jc="["+ey+"]",sy="\\u200d",oy="(?:"+Vf+"|"+ay+")",ly="(?:"+Jc+"|"+ay+")",Qb="(?:"+ny+"(?:d|ll|m|re|s|t|ve))?",Xb="(?:"+ny+"(?:D|LL|M|RE|S|T|VE))?",Ed=Xc+"?",Gf="["+vi+"]?",cy="(?:"+sy+"(?:"+[iy,Hf,Yo].join("|")+")"+Gf+Ed+")*",Zc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",uy=Gf+Ed+cy,dy="(?:"+[qi,Hf,Yo].join("|")+")"+uy,Jb="(?:"+[iy+Hl+"?",Hl,Hf,Yo,Uf].join("|")+")",Pd=RegExp(ny,"g"),fo=RegExp(Hl,"g"),Dd=RegExp(Ad+"(?="+Ad+")|"+Jb+uy,"g"),Od=RegExp([Jc+"?"+Vf+"+"+Qb+"(?="+[ry,Jc,"$"].join("|")+")",ly+"+"+Xb+"(?="+[ry,Jc+oy,"$"].join("|")+")",Jc+"?"+oy+"+"+Qb,Jc+"+"+Xb,eu,Zc,Yb,dy].join("|"),"g"),Qo=RegExp("["+sy+kd+Fs+vi+"]"),hy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zb=-1,or={};or[he]=or[De]=or[nt]=or[Fe]=or[Ge]=or[it]=or[wt]=or[we]=or[Qe]=!0,or[$e]=or[ze]=or[ye]=or[oe]=or[me]=or[Se]=or[Ae]=or[ue]=or[se]=or[be]=or[Ne]=or[de]=or[ae]=or[ne]=or[Ee]=!1;var tr={};tr[$e]=tr[ze]=tr[ye]=tr[me]=tr[oe]=tr[Se]=tr[he]=tr[De]=tr[nt]=tr[Fe]=tr[Ge]=tr[se]=tr[be]=tr[Ne]=tr[de]=tr[ae]=tr[ne]=tr[ie]=tr[it]=tr[wt]=tr[we]=tr[Qe]=!0,tr[Ae]=tr[ue]=tr[Ee]=!1;var e0={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Md=parseFloat,GS=parseInt,Yf=typeof ro=="object"&&ro&&ro.Object===Object&&ro,fy=typeof self=="object"&&self&&self.Object===Object&&self,Qr=Yf||fy||Function("return this")(),tu=e&&!e.nodeType&&e,Xo=tu&&!0&&t&&!t.nodeType&&t,t0=Xo&&Xo.exports===tu,py=t0&&Yf.process,Ui=function(){try{var He=Xo&&Xo.require&&Xo.require("util").types;return He||py&&py.binding&&py.binding("util")}catch{}}(),Qf=Ui&&Ui.isArrayBuffer,n0=Ui&&Ui.isDate,r0=Ui&&Ui.isMap,a0=Ui&&Ui.isRegExp,i0=Ui&&Ui.isSet,s0=Ui&&Ui.isTypedArray;function Ja(He,st,rt){switch(rt.length){case 0:return He.call(st);case 1:return He.call(st,rt[0]);case 2:return He.call(st,rt[0],rt[1]);case 3:return He.call(st,rt[0],rt[1],rt[2])}return He.apply(st,rt)}function WS(He,st,rt,At){for(var Jt=-1,$n=He==null?0:He.length;++Jt<$n;){var Jr=He[Jt];st(At,Jr,rt(Jr),He)}return At}function Vi(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At&&st(He[rt],rt,He)!==!1;);return He}function KS(He,st){for(var rt=He==null?0:He.length;rt--&&st(He[rt],rt,He)!==!1;);return He}function o0(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(!st(He[rt],rt,He))return!1;return!0}function $s(He,st){for(var rt=-1,At=He==null?0:He.length,Jt=0,$n=[];++rt<At;){var Jr=He[rt];st(Jr,rt,He)&&($n[Jt++]=Jr)}return $n}function Xf(He,st){var rt=He==null?0:He.length;return!!rt&&nu(He,st,0)>-1}function my(He,st,rt){for(var At=-1,Jt=He==null?0:He.length;++At<Jt;)if(rt(st,He[At]))return!0;return!1}function Ar(He,st){for(var rt=-1,At=He==null?0:He.length,Jt=Array(At);++rt<At;)Jt[rt]=st(He[rt],rt,He);return Jt}function po(He,st){for(var rt=-1,At=st.length,Jt=He.length;++rt<At;)He[Jt+rt]=st[rt];return He}function gy(He,st,rt,At){var Jt=-1,$n=He==null?0:He.length;for(At&&$n&&(rt=He[++Jt]);++Jt<$n;)rt=st(rt,He[Jt],Jt,He);return rt}function YS(He,st,rt,At){var Jt=He==null?0:He.length;for(At&&Jt&&(rt=He[--Jt]);Jt--;)rt=st(rt,He[Jt],Jt,He);return rt}function yy(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(st(He[rt],rt,He))return!0;return!1}var QS=Zf("length");function XS(He){return He.split("")}function JS(He){return He.match(qr)||[]}function l0(He,st,rt){var At;return rt(He,function(Jt,$n,Jr){if(st(Jt,$n,Jr))return At=$n,!1}),At}function Jf(He,st,rt,At){for(var Jt=He.length,$n=rt+(At?1:-1);At?$n--:++$n<Jt;)if(st(He[$n],$n,He))return $n;return-1}function nu(He,st,rt){return st===st?n_(He,st,rt):Jf(He,ru,rt)}function xy(He,st,rt,At){for(var Jt=rt-1,$n=He.length;++Jt<$n;)if(At(He[Jt],st))return Jt;return-1}function ru(He){return He!==He}function c0(He,st){var rt=He==null?0:He.length;return rt?tp(He,st)/rt:$}function Zf(He){return function(st){return st==null?n:st[He]}}function ep(He){return function(st){return He==null?n:He[st]}}function vy(He,st,rt,At,Jt){return Jt(He,function($n,Jr,Bn){rt=At?(At=!1,$n):st(rt,$n,Jr,Bn)}),rt}function u0(He,st){var rt=He.length;for(He.sort(st);rt--;)He[rt]=He[rt].value;return He}function tp(He,st){for(var rt,At=-1,Jt=He.length;++At<Jt;){var $n=st(He[At]);$n!==n&&(rt=rt===n?$n:rt+$n)}return rt}function Jo(He,st){for(var rt=-1,At=Array(He);++rt<He;)At[rt]=st(rt);return At}function ZS(He,st){return Ar(st,function(rt){return[rt,He[rt]]})}function d0(He){return He&&He.slice(0,jy(He)+1).replace(vr,"")}function bi(He){return function(st){return He(st)}}function np(He,st){return Ar(st,function(rt){return He[rt]})}function au(He,st){return He.has(st)}function iu(He,st){for(var rt=-1,At=He.length;++rt<At&&nu(st,He[rt],0)>-1;);return rt}function su(He,st){for(var rt=He.length;rt--&&nu(st,He[rt],0)>-1;);return rt}function e_(He,st){for(var rt=He.length,At=0;rt--;)He[rt]===st&&++At;return At}var rp=ep(e0),h0=ep(Xa);function f0(He){return"\\"+Kf[He]}function by(He,st){return He==null?n:He[st]}function Zo(He){return Qo.test(He)}function p0(He){return hy.test(He)}function m0(He){for(var st,rt=[];!(st=He.next()).done;)rt.push(st.value);return rt}function ap(He){var st=-1,rt=Array(He.size);return He.forEach(function(At,Jt){rt[++st]=[Jt,At]}),rt}function g0(He,st){return function(rt){return He(st(rt))}}function el(He,st){for(var rt=-1,At=He.length,Jt=0,$n=[];++rt<At;){var Jr=He[rt];(Jr===st||Jr===f)&&(He[rt]=f,$n[Jt++]=rt)}return $n}function ip(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=At}),rt}function t_(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=[At,At]}),rt}function n_(He,st,rt){for(var At=rt-1,Jt=He.length;++At<Jt;)if(He[At]===st)return At;return-1}function ji(He,st,rt){for(var At=rt+1;At--;)if(He[At]===st)return At;return At}function Bs(He){return Zo(He)?x0(He):QS(He)}function Hi(He){return Zo(He)?wy(He):XS(He)}function jy(He){for(var st=He.length;st--&&za.test(He.charAt(st)););return st}var y0=ep(Gl);function x0(He){for(var st=Dd.lastIndex=0;Dd.test(He);)++st;return st}function wy(He){return He.match(Dd)||[]}function r_(He){return He.match(Od)||[]}var ou=function He(st){st=st==null?Qr:tl.defaults(Qr.Object(),st,tl.pick(Qr,Wf));var rt=st.Array,At=st.Date,Jt=st.Error,$n=st.Function,Jr=st.Math,Bn=st.Object,sp=st.RegExp,v0=st.String,wi=st.TypeError,op=rt.prototype,a_=$n.prototype,lu=Bn.prototype,Id=st["__core-js_shared__"],Rd=a_.toString,Qn=lu.hasOwnProperty,ps=0,Ny=function(){var y=/[^.]+$/.exec(Id&&Id.keys&&Id.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),qa=lu.toString,Gi=Rd.call(Bn),cu=Qr._,Sy=sp("^"+Rd.call(Qn).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wl=t0?st.Buffer:n,ms=st.Symbol,uu=st.Uint8Array,Kl=Wl?Wl.allocUnsafe:n,Ld=g0(Bn.getPrototypeOf,Bn),Fd=Bn.create,Yl=lu.propertyIsEnumerable,lp=op.splice,Za=ms?ms.isConcatSpreadable:n,Ql=ms?ms.iterator:n,Ua=ms?ms.toStringTag:n,$d=function(){try{var y=ul(Bn,"defineProperty");return y({},"",{}),y}catch{}}(),cp=st.clearTimeout!==Qr.clearTimeout&&st.clearTimeout,Xl=At&&At.now!==Qr.Date.now&&At.now,_y=st.setTimeout!==Qr.setTimeout&&st.setTimeout,du=Jr.ceil,mo=Jr.floor,nl=Bn.getOwnPropertySymbols,up=Wl?Wl.isBuffer:n,Bd=st.isFinite,Wi=op.join,Ki=g0(Bn.keys,Bn),Sr=Jr.max,Er=Jr.min,go=At.now,Jl=st.parseInt,Cy=Jr.random,Ty=op.reverse,zd=ul(st,"DataView"),ia=ul(st,"Map"),Pr=ul(st,"Promise"),kn=ul(st,"Set"),gs=ul(st,"WeakMap"),ei=ul(Bn,"create"),hu=gs&&new gs,Yi={},b0=_o(zd),j0=_o(ia),qd=_o(Pr),Ud=_o(kn),w0=_o(gs),rl=ms?ms.prototype:n,Zl=rl?rl.valueOf:n,al=rl?rl.toString:n;function fe(y){if(Fr(y)&&!on(y)&&!(y instanceof vn)){if(y instanceof ti)return y;if(Qn.call(y,"__wrapped__"))return oa(y)}return new ti(y)}var Ni=function(){function y(){}return function(w){if(!Or(w))return{};if(Fd)return Fd(w);y.prototype=w;var M=new y;return y.prototype=n,M}}();function Qi(){}function ti(y,w){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!w,this.__index__=0,this.__values__=n}fe.templateSettings={escape:Ue,evaluate:jt,interpolate:kt,variable:"",imports:{_:fe}},fe.prototype=Qi.prototype,fe.prototype.constructor=fe,ti.prototype=Ni(Qi.prototype),ti.prototype.constructor=ti;function vn(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function Vd(){var y=new vn(this.__wrapped__);return y.__actions__=sa(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=sa(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=sa(this.__views__),y}function dp(){if(this.__filtered__){var y=new vn(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function ec(){var y=this.__wrapped__.value(),w=this.__dir__,M=on(y),U=w<0,re=M?y.length:0,ve=t1(0,re,this.__views__),Pe=ve.start,Be=ve.end,Ke=Be-Pe,ft=U?Be:Pe-1,mt=this.__iteratees__,xt=mt.length,Et=0,$t=Er(Ke,this.__takeCount__);if(!M||!U&&re==Ke&&$t==Ke)return z0(y,this.__actions__);var en=[];e:for(;Ke--&&Et<$t;){ft+=w;for(var jn=-1,tn=y[ft];++jn<xt;){var Dn=mt[jn],qn=Dn.iteratee,Ns=Dn.type,Ei=qn(tn);if(Ns==W)tn=Ei;else if(!Ei){if(Ns==K)continue e;break e}}en[Et++]=tn}return en}vn.prototype=Ni(Qi.prototype),vn.prototype.constructor=vn;function Ur(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function hp(){this.__data__=ei?ei(null):{},this.size=0}function N0(y){var w=this.has(y)&&delete this.__data__[y];return this.size-=w?1:0,w}function i_(y){var w=this.__data__;if(ei){var M=w[y];return M===c?n:M}return Qn.call(w,y)?w[y]:n}function s_(y){var w=this.__data__;return ei?w[y]!==n:Qn.call(w,y)}function o_(y,w){var M=this.__data__;return this.size+=this.has(y)?0:1,M[y]=ei&&w===n?c:w,this}Ur.prototype.clear=hp,Ur.prototype.delete=N0,Ur.prototype.get=i_,Ur.prototype.has=s_,Ur.prototype.set=o_;function mr(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function ky(){this.__data__=[],this.size=0}function Hd(y){var w=this.__data__,M=mu(w,y);if(M<0)return!1;var U=w.length-1;return M==U?w.pop():lp.call(w,M,1),--this.size,!0}function Gd(y){var w=this.__data__,M=mu(w,y);return M<0?n:w[M][1]}function Ay(y){return mu(this.__data__,y)>-1}function fu(y,w){var M=this.__data__,U=mu(M,y);return U<0?(++this.size,M.push([y,w])):M[U][1]=w,this}mr.prototype.clear=ky,mr.prototype.delete=Hd,mr.prototype.get=Gd,mr.prototype.has=Ay,mr.prototype.set=fu;function ni(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function l_(){this.size=0,this.__data__={hash:new Ur,map:new(ia||mr),string:new Ur}}function S0(y){var w=ju(this,y).delete(y);return this.size-=w?1:0,w}function c_(y){return ju(this,y).get(y)}function _0(y){return ju(this,y).has(y)}function tc(y,w){var M=ju(this,y),U=M.size;return M.set(y,w),this.size+=M.size==U?0:1,this}ni.prototype.clear=l_,ni.prototype.delete=S0,ni.prototype.get=c_,ni.prototype.has=_0,ni.prototype.set=tc;function yo(y){var w=-1,M=y==null?0:y.length;for(this.__data__=new ni;++w<M;)this.add(y[w])}function fp(y){return this.__data__.set(y,c),this}function C0(y){return this.__data__.has(y)}yo.prototype.add=yo.prototype.push=fp,yo.prototype.has=C0;function Va(y){var w=this.__data__=new mr(y);this.size=w.size}function T0(){this.__data__=new mr,this.size=0}function pp(y){var w=this.__data__,M=w.delete(y);return this.size=w.size,M}function Ey(y){return this.__data__.get(y)}function k0(y){return this.__data__.has(y)}function mp(y,w){var M=this.__data__;if(M instanceof mr){var U=M.__data__;if(!ia||U.length<i-1)return U.push([y,w]),this.size=++M.size,this;M=this.__data__=new ni(U)}return M.set(y,w),this.size=M.size,this}Va.prototype.clear=T0,Va.prototype.delete=pp,Va.prototype.get=Ey,Va.prototype.has=k0,Va.prototype.set=mp;function Py(y,w){var M=on(y),U=!M&&Ao(y),re=!M&&!U&&bl(y),ve=!M&&!U&&!re&&Iu(y),Pe=M||U||re||ve,Be=Pe?Jo(y.length,v0):[],Ke=Be.length;for(var ft in y)(w||Qn.call(y,ft))&&!(Pe&&(ft=="length"||re&&(ft=="offset"||ft=="parent")||ve&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||bs(ft,Ke)))&&Be.push(ft);return Be}function pu(y){var w=y.length;return w?y[_p(0,w-1)]:n}function A0(y,w){return vh(sa(y),xs(w,0,y.length))}function E0(y){return vh(sa(y))}function zs(y,w,M){(M!==n&&!ci(y[w],M)||M===n&&!(w in y))&&ys(y,w,M)}function nc(y,w,M){var U=y[w];(!(Qn.call(y,w)&&ci(U,M))||M===n&&!(w in y))&&ys(y,w,M)}function mu(y,w){for(var M=y.length;M--;)if(ci(y[M][0],w))return M;return-1}function il(y,w,M,U){return vo(y,function(re,ve,Pe){w(U,re,M(re),Pe)}),U}function xo(y,w){return y&&ii(w,ua(w),y)}function Wd(y,w){return y&&ii(w,ga(w),y)}function ys(y,w,M){w=="__proto__"&&$d?$d(y,w,{configurable:!0,enumerable:!0,value:M,writable:!0}):y[w]=M}function Kd(y,w){for(var M=-1,U=w.length,re=rt(U),ve=y==null;++M<U;)re[M]=ve?n:Oh(y,w[M]);return re}function xs(y,w,M){return y===y&&(M!==n&&(y=y<=M?y:M),w!==n&&(y=y>=w?y:w)),y}function Pa(y,w,M,U,re,ve){var Pe,Be=w&p,Ke=w&g,ft=w&x;if(M&&(Pe=re?M(y,U,re,ve):M(y)),Pe!==n)return Pe;if(!Or(y))return y;var mt=on(y);if(mt){if(Pe=rx(y),!Be)return sa(y,Pe)}else{var xt=ma(y),Et=xt==ue||xt==Te;if(bl(y))return Yy(y,Be);if(xt==Ne||xt==$e||Et&&!re){if(Pe=Ke||Et?{}:ax(y),!Be)return Ke?oh(y,Wd(Pe,y)):Pp(y,xo(Pe,y))}else{if(!tr[xt])return re?y:{};Pe=ix(y,xt,Be)}}ve||(ve=new Va);var $t=ve.get(y);if($t)return $t;ve.set(y,Pe),W1(y)?y.forEach(function(tn){Pe.add(Pa(tn,w,M,tn,y,ve))}):nm(y)&&y.forEach(function(tn,Dn){Pe.set(Dn,Pa(tn,w,M,Dn,y,ve))});var en=ft?Ke?Ip:Mp:Ke?ga:ua,jn=mt?n:en(y);return Vi(jn||y,function(tn,Dn){jn&&(Dn=tn,tn=y[Dn]),nc(Pe,Dn,Pa(tn,w,M,Dn,y,ve))}),Pe}function P0(y){var w=ua(y);return function(M){return Dy(M,y,w)}}function Dy(y,w,M){var U=M.length;if(y==null)return!U;for(y=Bn(y);U--;){var re=M[U],ve=w[re],Pe=y[re];if(Pe===n&&!(re in y)||!ve(Pe))return!1}return!0}function rc(y,w,M){if(typeof y!="function")throw new wi(o);return Nu(function(){y.apply(n,M)},w)}function sl(y,w,M,U){var re=-1,ve=Xf,Pe=!0,Be=y.length,Ke=[],ft=w.length;if(!Be)return Ke;M&&(w=Ar(w,bi(M))),U?(ve=my,Pe=!1):w.length>=i&&(ve=au,Pe=!1,w=new yo(w));e:for(;++re<Be;){var mt=y[re],xt=M==null?mt:M(mt);if(mt=U||mt!==0?mt:0,Pe&&xt===xt){for(var Et=ft;Et--;)if(w[Et]===xt)continue e;Ke.push(mt)}else ve(w,xt,U)||Ke.push(mt)}return Ke}var vo=Zy(Da),gp=Zy(yu,!0);function Oy(y,w){var M=!0;return vo(y,function(U,re,ve){return M=!!w(U,re,ve),M}),M}function vs(y,w,M){for(var U=-1,re=y.length;++U<re;){var ve=y[U],Pe=w(ve);if(Pe!=null&&(Be===n?Pe===Pe&&!Wa(Pe):M(Pe,Be)))var Be=Pe,Ke=ve}return Ke}function yn(y,w,M,U){var re=y.length;for(M=un(M),M<0&&(M=-M>re?0:re+M),U=U===n||U>re?re:un(U),U<0&&(U+=re),U=M>U?0:Qs(U);M<U;)y[M++]=w;return y}function nr(y,w){var M=[];return vo(y,function(U,re,ve){w(U,re,ve)&&M.push(U)}),M}function An(y,w,M,U,re){var ve=-1,Pe=y.length;for(M||(M=No),re||(re=[]);++ve<Pe;){var Be=y[ve];w>0&&M(Be)?w>1?An(Be,w-1,M,U,re):po(re,Be):U||(re[re.length]=Be)}return re}var gu=uc(),ac=uc(!0);function Da(y,w){return y&&gu(y,w,ua)}function yu(y,w){return y&&ac(y,w,ua)}function ol(y,w){return $s(w,function(M){return js(y[M])})}function Xi(y,w){w=jo(w,y);for(var M=0,U=w.length;y!=null&&M<U;)y=y[Zn(w[M++])];return M&&M==U?y:n}function D0(y,w,M){var U=w(y);return on(y)?U:po(U,M(y))}function Pn(y){return y==null?y===n?je:_e:Ua&&Ua in Bn(y)?e1(y):s1(y)}function Yd(y,w){return y>w}function My(y,w){return y!=null&&Qn.call(y,w)}function O0(y,w){return y!=null&&w in Bn(y)}function M0(y,w,M){return y>=Er(w,M)&&y<Sr(w,M)}function Iy(y,w,M){for(var U=M?my:Xf,re=y[0].length,ve=y.length,Pe=ve,Be=rt(ve),Ke=1/0,ft=[];Pe--;){var mt=y[Pe];Pe&&w&&(mt=Ar(mt,bi(w))),Ke=Er(mt.length,Ke),Be[Pe]=!M&&(w||re>=120&&mt.length>=120)?new yo(Pe&&mt):n}mt=y[0];var xt=-1,Et=Be[0];e:for(;++xt<re&&ft.length<Ke;){var $t=mt[xt],en=w?w($t):$t;if($t=M||$t!==0?$t:0,!(Et?au(Et,en):U(ft,en,M))){for(Pe=ve;--Pe;){var jn=Be[Pe];if(!(jn?au(jn,en):U(y[Pe],en,M)))continue e}Et&&Et.push(en),ft.push($t)}}return ft}function Ry(y,w,M,U){return Da(y,function(re,ve,Pe){w(U,M(re),ve,Pe)}),U}function ic(y,w,M){w=jo(w,y),y=wu(y,w);var U=y==null?y:y[Zn(Oa(w))];return U==null?n:Ja(U,y,M)}function yp(y){return Fr(y)&&Pn(y)==$e}function ri(y){return Fr(y)&&Pn(y)==ye}function Zr(y){return Fr(y)&&Pn(y)==Se}function sc(y,w,M,U,re){return y===w?!0:y==null||w==null||!Fr(y)&&!Fr(w)?y!==y&&w!==w:Qd(y,w,M,U,sc,re)}function Qd(y,w,M,U,re,ve){var Pe=on(y),Be=on(w),Ke=Pe?ze:ma(y),ft=Be?ze:ma(w);Ke=Ke==$e?Ne:Ke,ft=ft==$e?Ne:ft;var mt=Ke==Ne,xt=ft==Ne,Et=Ke==ft;if(Et&&bl(y)){if(!bl(w))return!1;Pe=!0,mt=!1}if(Et&&!mt)return ve||(ve=new Va),Pe||Iu(y)?J0(y,w,M,U,re,ve):Z0(y,w,Ke,M,U,re,ve);if(!(M&b)){var $t=mt&&Qn.call(y,"__wrapped__"),en=xt&&Qn.call(w,"__wrapped__");if($t||en){var jn=$t?y.value():y,tn=en?w.value():w;return ve||(ve=new Va),re(jn,tn,M,U,ve)}}return Et?(ve||(ve=new Va),pa(y,w,M,U,re,ve)):!1}function xp(y){return Fr(y)&&ma(y)==se}function Xd(y,w,M,U){var re=M.length,ve=re,Pe=!U;if(y==null)return!ve;for(y=Bn(y);re--;){var Be=M[re];if(Pe&&Be[2]?Be[1]!==y[Be[0]]:!(Be[0]in y))return!1}for(;++re<ve;){Be=M[re];var Ke=Be[0],ft=y[Ke],mt=Be[1];if(Pe&&Be[2]){if(ft===n&&!(Ke in y))return!1}else{var xt=new Va;if(U)var Et=U(ft,mt,Ke,y,w,xt);if(!(Et===n?sc(mt,ft,b|j,U,xt):Et))return!1}}return!0}function qs(y){if(!Or(y)||zp(y))return!1;var w=js(y)?Sy:Sn;return w.test(_o(y))}function vp(y){return Fr(y)&&Pn(y)==de}function Ly(y){return Fr(y)&&ma(y)==ae}function Fy(y){return Fr(y)&&mc(y.length)&&!!or[Pn(y)]}function $y(y){return typeof y=="function"?y:y==null?Ze:typeof y=="object"?on(y)?wp(y[0],y[1]):zy(y):zn(y)}function bp(y){if(!gr(y))return Ki(y);var w=[];for(var M in Bn(y))Qn.call(y,M)&&M!="constructor"&&w.push(M);return w}function I0(y){if(!Or(y))return dl(y);var w=gr(y),M=[];for(var U in y)U=="constructor"&&(w||!Qn.call(y,U))||M.push(U);return M}function jp(y,w){return y<w}function By(y,w){var M=-1,U=la(y)?rt(y.length):[];return vo(y,function(re,ve,Pe){U[++M]=w(re,ve,Pe)}),U}function zy(y){var w=Lp(y);return w.length==1&&w[0][2]?a1(w[0][0],w[0][1]):function(M){return M===y||Xd(M,y,w)}}function wp(y,w){return $p(y)&&r1(w)?a1(Zn(y),w):function(M){var U=Oh(M,y);return U===n&&U===w?$u(M,y):sc(w,U,b|j)}}function Jd(y,w,M,U,re){y!==w&&gu(w,function(ve,Pe){if(re||(re=new Va),Or(ve))u_(y,w,Pe,M,Jd,U,re);else{var Be=U?U(qp(y,Pe),ve,Pe+"",y,w,re):n;Be===n&&(Be=ve),zs(y,Pe,Be)}},ga)}function u_(y,w,M,U,re,ve,Pe){var Be=qp(y,M),Ke=qp(w,M),ft=Pe.get(Ke);if(ft){zs(y,M,ft);return}var mt=ve?ve(Be,Ke,M+"",y,w,Pe):n,xt=mt===n;if(xt){var Et=on(Ke),$t=!Et&&bl(Ke),en=!Et&&!$t&&Iu(Ke);mt=Ke,Et||$t||en?on(Be)?mt=Be:Gr(Be)?mt=sa(Be):$t?(xt=!1,mt=Yy(Ke,!0)):en?(xt=!1,mt=Xy(Ke,!0)):mt=[]:ts(Ke)||Ao(Ke)?(mt=Be,Ao(Be)?mt=Q1(Be):(!Or(Be)||js(Be))&&(mt=ax(Ke))):xt=!1}xt&&(Pe.set(Ke,mt),re(mt,Ke,U,ve,Pe),Pe.delete(Ke)),zs(y,M,mt)}function qy(y,w){var M=y.length;if(M)return w+=w<0?M:0,bs(w,M)?y[w]:n}function Uy(y,w,M){w.length?w=Ar(w,function(ve){return on(ve)?function(Pe){return Xi(Pe,ve.length===1?ve[0]:ve)}:ve}):w=[Ze];var U=-1;w=Ar(w,bi(qt()));var re=By(y,function(ve,Pe,Be){var Ke=Ar(w,function(ft){return ft(ve)});return{criteria:Ke,index:++U,value:ve}});return u0(re,function(ve,Pe){return H0(ve,Pe,M)})}function R0(y,w){return Np(y,w,function(M,U){return $u(y,U)})}function Np(y,w,M){for(var U=-1,re=w.length,ve={};++U<re;){var Pe=w[U],Be=Xi(y,Pe);M(Be,Pe)&&vu(ve,jo(Pe,y),Be)}return ve}function L0(y){return function(w){return Xi(w,y)}}function Sp(y,w,M,U){var re=U?xy:nu,ve=-1,Pe=w.length,Be=y;for(y===w&&(w=sa(w)),M&&(Be=Ar(y,bi(M)));++ve<Pe;)for(var Ke=0,ft=w[ve],mt=M?M(ft):ft;(Ke=re(Be,mt,Ke,U))>-1;)Be!==y&&lp.call(Be,Ke,1),lp.call(y,Ke,1);return y}function Vy(y,w){for(var M=y?w.length:0,U=M-1;M--;){var re=w[M];if(M==U||re!==ve){var ve=re;bs(re)?lp.call(y,re,1):nh(y,re)}}return y}function _p(y,w){return y+mo(Cy()*(w-y+1))}function F0(y,w,M,U){for(var re=-1,ve=Sr(du((w-y)/(M||1)),0),Pe=rt(ve);ve--;)Pe[U?ve:++re]=y,y+=M;return Pe}function Hy(y,w){var M="";if(!y||w<1||w>ee)return M;do w%2&&(M+=y),w=mo(w/2),w&&(y+=y);while(w);return M}function mn(y,w){return yh(sx(y,w,Ze),y+"")}function xu(y){return pu(zu(y))}function Cp(y,w){var M=zu(y);return vh(M,xs(w,0,M.length))}function vu(y,w,M,U){if(!Or(y))return y;w=jo(w,y);for(var re=-1,ve=w.length,Pe=ve-1,Be=y;Be!=null&&++re<ve;){var Ke=Zn(w[re]),ft=M;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return y;if(re!=Pe){var mt=Be[Ke];ft=U?U(mt,Ke,Be):n,ft===n&&(ft=Or(mt)?mt:bs(w[re+1])?[]:{})}nc(Be,Ke,ft),Be=Be[Ke]}return y}var Zd=hu?function(y,w){return hu.set(y,w),y}:Ze,eh=$d?function(y,w){return $d(y,"toString",{configurable:!0,enumerable:!1,value:Je(w),writable:!0})}:Ze;function $0(y){return vh(zu(y))}function Si(y,w,M){var U=-1,re=y.length;w<0&&(w=-w>re?0:re+w),M=M>re?re:M,M<0&&(M+=re),re=w>M?0:M-w>>>0,w>>>=0;for(var ve=rt(re);++U<re;)ve[U]=y[U+w];return ve}function B0(y,w){var M;return vo(y,function(U,re,ve){return M=w(U,re,ve),!M}),!!M}function th(y,w,M){var U=0,re=y==null?U:y.length;if(typeof w=="number"&&w===w&&re<=Y){for(;U<re;){var ve=U+re>>>1,Pe=y[ve];Pe!==null&&!Wa(Pe)&&(M?Pe<=w:Pe<w)?U=ve+1:re=ve}return re}return Tp(y,w,Ze,M)}function Tp(y,w,M,U){var re=0,ve=y==null?0:y.length;if(ve===0)return 0;w=M(w);for(var Pe=w!==w,Be=w===null,Ke=Wa(w),ft=w===n;re<ve;){var mt=mo((re+ve)/2),xt=M(y[mt]),Et=xt!==n,$t=xt===null,en=xt===xt,jn=Wa(xt);if(Pe)var tn=U||en;else ft?tn=en&&(U||Et):Be?tn=en&&Et&&(U||!$t):Ke?tn=en&&Et&&!$t&&(U||!jn):$t||jn?tn=!1:tn=U?xt<=w:xt<w;tn?re=mt+1:ve=mt}return Er(ve,xe)}function Gy(y,w){for(var M=-1,U=y.length,re=0,ve=[];++M<U;){var Pe=y[M],Be=w?w(Pe):Pe;if(!M||!ci(Be,Ke)){var Ke=Be;ve[re++]=Pe===0?0:Pe}}return ve}function kp(y){return typeof y=="number"?y:Wa(y)?$:+y}function ai(y){if(typeof y=="string")return y;if(on(y))return Ar(y,ai)+"";if(Wa(y))return al?al.call(y):"";var w=y+"";return w=="0"&&1/y==-1/0?"-0":w}function bo(y,w,M){var U=-1,re=Xf,ve=y.length,Pe=!0,Be=[],Ke=Be;if(M)Pe=!1,re=my;else if(ve>=i){var ft=w?null:Q0(y);if(ft)return ip(ft);Pe=!1,re=au,Ke=new yo}else Ke=w?[]:Be;e:for(;++U<ve;){var mt=y[U],xt=w?w(mt):mt;if(mt=M||mt!==0?mt:0,Pe&&xt===xt){for(var Et=Ke.length;Et--;)if(Ke[Et]===xt)continue e;w&&Ke.push(xt),Be.push(mt)}else re(Ke,xt,M)||(Ke!==Be&&Ke.push(xt),Be.push(mt))}return Be}function nh(y,w){return w=jo(w,y),y=wu(y,w),y==null||delete y[Zn(Oa(w))]}function Wy(y,w,M,U){return vu(y,w,M(Xi(y,w)),U)}function rh(y,w,M,U){for(var re=y.length,ve=U?re:-1;(U?ve--:++ve<re)&&w(y[ve],ve,y););return M?Si(y,U?0:ve,U?ve+1:re):Si(y,U?ve+1:0,U?re:ve)}function z0(y,w){var M=y;return M instanceof vn&&(M=M.value()),gy(w,function(U,re){return re.func.apply(re.thisArg,po([U],re.args))},M)}function ah(y,w,M){var U=y.length;if(U<2)return U?bo(y[0]):[];for(var re=-1,ve=rt(U);++re<U;)for(var Pe=y[re],Be=-1;++Be<U;)Be!=re&&(ve[re]=sl(ve[re]||Pe,y[Be],w,M));return bo(An(ve,1),w,M)}function Ky(y,w,M){for(var U=-1,re=y.length,ve=w.length,Pe={};++U<re;){var Be=U<ve?w[U]:n;M(Pe,y[U],Be)}return Pe}function Ap(y){return Gr(y)?y:[]}function ih(y){return typeof y=="function"?y:Ze}function jo(y,w){return on(y)?y:$p(y,w)?[y]:Gs(Xn(y))}var q0=mn;function ll(y,w,M){var U=y.length;return M=M===n?U:M,!w&&M>=U?y:Si(y,w,M)}var U0=cp||function(y){return Qr.clearTimeout(y)};function Yy(y,w){if(w)return y.slice();var M=y.length,U=Kl?Kl(M):new y.constructor(M);return y.copy(U),U}function oc(y){var w=new y.constructor(y.byteLength);return new uu(w).set(new uu(y)),w}function Qy(y,w){var M=w?oc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.byteLength)}function Ep(y){var w=new y.constructor(y.source,gt.exec(y));return w.lastIndex=y.lastIndex,w}function V0(y){return Zl?Bn(Zl.call(y)):{}}function Xy(y,w){var M=w?oc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.length)}function sh(y,w){if(y!==w){var M=y!==n,U=y===null,re=y===y,ve=Wa(y),Pe=w!==n,Be=w===null,Ke=w===w,ft=Wa(w);if(!Be&&!ft&&!ve&&y>w||ve&&Pe&&Ke&&!Be&&!ft||U&&Pe&&Ke||!M&&Ke||!re)return 1;if(!U&&!ve&&!ft&&y<w||ft&&M&&re&&!U&&!ve||Be&&M&&re||!Pe&&re||!Ke)return-1}return 0}function H0(y,w,M){for(var U=-1,re=y.criteria,ve=w.criteria,Pe=re.length,Be=M.length;++U<Pe;){var Ke=sh(re[U],ve[U]);if(Ke){if(U>=Be)return Ke;var ft=M[U];return Ke*(ft=="desc"?-1:1)}}return y.index-w.index}function Jy(y,w,M,U){for(var re=-1,ve=y.length,Pe=M.length,Be=-1,Ke=w.length,ft=Sr(ve-Pe,0),mt=rt(Ke+ft),xt=!U;++Be<Ke;)mt[Be]=w[Be];for(;++re<Pe;)(xt||re<ve)&&(mt[M[re]]=y[re]);for(;ft--;)mt[Be++]=y[re++];return mt}function G0(y,w,M,U){for(var re=-1,ve=y.length,Pe=-1,Be=M.length,Ke=-1,ft=w.length,mt=Sr(ve-Be,0),xt=rt(mt+ft),Et=!U;++re<mt;)xt[re]=y[re];for(var $t=re;++Ke<ft;)xt[$t+Ke]=w[Ke];for(;++Pe<Be;)(Et||re<ve)&&(xt[$t+M[Pe]]=y[re++]);return xt}function sa(y,w){var M=-1,U=y.length;for(w||(w=rt(U));++M<U;)w[M]=y[M];return w}function ii(y,w,M,U){var re=!M;M||(M={});for(var ve=-1,Pe=w.length;++ve<Pe;){var Be=w[ve],Ke=U?U(M[Be],y[Be],Be,M,y):n;Ke===n&&(Ke=y[Be]),re?ys(M,Be,Ke):nc(M,Be,Ke)}return M}function Pp(y,w){return ii(y,fh(y),w)}function oh(y,w){return ii(y,Fp(y),w)}function lc(y,w){return function(M,U){var re=on(M)?WS:il,ve=w?w():{};return re(M,y,qt(U,2),ve)}}function cc(y){return mn(function(w,M){var U=-1,re=M.length,ve=re>1?M[re-1]:n,Pe=re>2?M[2]:n;for(ve=y.length>3&&typeof ve=="function"?(re--,ve):n,Pe&&Ga(M[0],M[1],Pe)&&(ve=re<3?n:ve,re=1),w=Bn(w);++U<re;){var Be=M[U];Be&&y(w,Be,U,ve)}return w})}function Zy(y,w){return function(M,U){if(M==null)return M;if(!la(M))return y(M,U);for(var re=M.length,ve=w?re:-1,Pe=Bn(M);(w?ve--:++ve<re)&&U(Pe[ve],ve,Pe)!==!1;);return M}}function uc(y){return function(w,M,U){for(var re=-1,ve=Bn(w),Pe=U(w),Be=Pe.length;Be--;){var Ke=Pe[y?Be:++re];if(M(ve[Ke],Ke,ve)===!1)break}return w}}function W0(y,w,M){var U=w&S,re=Ji(y);function ve(){var Pe=this&&this!==Qr&&this instanceof ve?re:y;return Pe.apply(U?M:this,arguments)}return ve}function _i(y){return function(w){w=Xn(w);var M=Zo(w)?Hi(w):n,U=M?M[0]:w.charAt(0),re=M?ll(M,1).join(""):w.slice(1);return U[y]()+re}}function Ha(y){return function(w){return gy(A(Eo(w).replace(Pd,"")),y,"")}}function Ji(y){return function(){var w=arguments;switch(w.length){case 0:return new y;case 1:return new y(w[0]);case 2:return new y(w[0],w[1]);case 3:return new y(w[0],w[1],w[2]);case 4:return new y(w[0],w[1],w[2],w[3]);case 5:return new y(w[0],w[1],w[2],w[3],w[4]);case 6:return new y(w[0],w[1],w[2],w[3],w[4],w[5]);case 7:return new y(w[0],w[1],w[2],w[3],w[4],w[5],w[6])}var M=Ni(y.prototype),U=y.apply(M,w);return Or(U)?U:M}}function K0(y,w,M){var U=Ji(y);function re(){for(var ve=arguments.length,Pe=rt(ve),Be=ve,Ke=hc(re);Be--;)Pe[Be]=arguments[Be];var ft=ve<3&&Pe[0]!==Ke&&Pe[ve-1]!==Ke?[]:el(Pe,Ke);if(ve-=ft.length,ve<M)return ex(y,w,Vr,re.placeholder,n,Pe,ft,n,n,M-ve);var mt=this&&this!==Qr&&this instanceof re?U:y;return Ja(mt,this,Pe)}return re}function wo(y){return function(w,M,U){var re=Bn(w);if(!la(w)){var ve=qt(M,3);w=ua(w),M=function(Be){return ve(re[Be],Be,re)}}var Pe=y(w,M,U);return Pe>-1?re[ve?w[Pe]:Pe]:n}}function Us(y){return _r(function(w){var M=w.length,U=M,re=ti.prototype.thru;for(y&&w.reverse();U--;){var ve=w[U];if(typeof ve!="function")throw new wi(o);if(re&&!Pe&&hh(ve)=="wrapper")var Pe=new ti([],!0)}for(U=Pe?U:M;++U<M;){ve=w[U];var Be=hh(ve),Ke=Be=="wrapper"?Rp(ve):n;Ke&&Bp(Ke[0])&&Ke[1]==(I|C|k|R)&&!Ke[4].length&&Ke[9]==1?Pe=Pe[hh(Ke[0])].apply(Pe,Ke[3]):Pe=ve.length==1&&Bp(ve)?Pe[Be]():Pe.thru(ve)}return function(){var ft=arguments,mt=ft[0];if(Pe&&ft.length==1&&on(mt))return Pe.plant(mt).value();for(var xt=0,Et=M?w[xt].apply(this,ft):mt;++xt<M;)Et=w[xt].call(this,Et);return Et}})}function Vr(y,w,M,U,re,ve,Pe,Be,Ke,ft){var mt=w&I,xt=w&S,Et=w&_,$t=w&(C|E),en=w&z,jn=Et?n:Ji(y);function tn(){for(var Dn=arguments.length,qn=rt(Dn),Ns=Dn;Ns--;)qn[Ns]=arguments[Ns];if($t)var Ei=hc(tn),Ss=e_(qn,Ei);if(U&&(qn=Jy(qn,U,re,$t)),ve&&(qn=G0(qn,ve,Pe,$t)),Dn-=Ss,$t&&Dn<ft){var da=el(qn,Ei);return ex(y,w,Vr,tn.placeholder,M,qn,da,Be,Ke,ft-Dn)}var Po=xt?M:this,gc=Et?Po[y]:y;return Dn=qn.length,Be?qn=Hs(qn,Be):en&&Dn>1&&qn.reverse(),mt&&Ke<Dn&&(qn.length=Ke),this&&this!==Qr&&this instanceof tn&&(gc=jn||Ji(gc)),gc.apply(Po,qn)}return tn}function lh(y,w){return function(M,U){return Ry(M,y,w(U),{})}}function bu(y,w){return function(M,U){var re;if(M===n&&U===n)return w;if(M!==n&&(re=M),U!==n){if(re===n)return U;typeof M=="string"||typeof U=="string"?(M=ai(M),U=ai(U)):(M=kp(M),U=kp(U)),re=y(M,U)}return re}}function ch(y){return _r(function(w){return w=Ar(w,bi(qt())),mn(function(M){var U=this;return y(w,function(re){return Ja(re,U,M)})})})}function uh(y,w){w=w===n?" ":ai(w);var M=w.length;if(M<2)return M?Hy(w,y):w;var U=Hy(w,du(y/Bs(w)));return Zo(w)?ll(Hi(U),0,y).join(""):U.slice(0,y)}function Y0(y,w,M,U){var re=w&S,ve=Ji(y);function Pe(){for(var Be=-1,Ke=arguments.length,ft=-1,mt=U.length,xt=rt(mt+Ke),Et=this&&this!==Qr&&this instanceof Pe?ve:y;++ft<mt;)xt[ft]=U[ft];for(;Ke--;)xt[ft++]=arguments[++Be];return Ja(Et,re?M:this,xt)}return Pe}function cl(y){return function(w,M,U){return U&&typeof U!="number"&&Ga(w,M,U)&&(M=U=n),w=Ys(w),M===n?(M=w,w=0):M=Ys(M),U=U===n?w<M?1:-1:Ys(U),F0(w,M,U,y)}}function dc(y){return function(w,M){return typeof w=="string"&&typeof M=="string"||(w=ns(w),M=ns(M)),y(w,M)}}function ex(y,w,M,U,re,ve,Pe,Be,Ke,ft){var mt=w&C,xt=mt?Pe:n,Et=mt?n:Pe,$t=mt?ve:n,en=mt?n:ve;w|=mt?k:P,w&=~(mt?P:k),w&T||(w&=-4);var jn=[y,w,re,$t,xt,en,Et,Be,Ke,ft],tn=M.apply(n,jn);return Bp(y)&&Up(tn,jn),tn.placeholder=U,Vp(tn,y,w)}function Dp(y){var w=Jr[y];return function(M,U){if(M=ns(M),U=U==null?0:Er(un(U),292),U&&Bd(M)){var re=(Xn(M)+"e").split("e"),ve=w(re[0]+"e"+(+re[1]+U));return re=(Xn(ve)+"e").split("e"),+(re[0]+"e"+(+re[1]-U))}return w(M)}}var Q0=kn&&1/ip(new kn([,-0]))[1]==G?function(y){return new kn(y)}:Mt;function dh(y){return function(w){var M=ma(w);return M==se?ap(w):M==ae?t_(w):ZS(w,y(w))}}function Vs(y,w,M,U,re,ve,Pe,Be){var Ke=w&_;if(!Ke&&typeof y!="function")throw new wi(o);var ft=U?U.length:0;if(ft||(w&=-97,U=re=n),Pe=Pe===n?Pe:Sr(un(Pe),0),Be=Be===n?Be:un(Be),ft-=re?re.length:0,w&P){var mt=U,xt=re;U=re=n}var Et=Ke?n:Rp(y),$t=[y,w,M,U,re,mt,xt,ve,Pe,Be];if(Et&&gh($t,Et),y=$t[0],w=$t[1],M=$t[2],U=$t[3],re=$t[4],Be=$t[9]=$t[9]===n?Ke?0:y.length:Sr($t[9]-ft,0),!Be&&w&(C|E)&&(w&=-25),!w||w==S)var en=W0(y,w,M);else w==C||w==E?en=K0(y,w,Be):(w==k||w==(S|k))&&!re.length?en=Y0(y,w,M,U):en=Vr.apply(n,$t);var jn=Et?Zd:Up;return Vp(jn(en,$t),y,w)}function Op(y,w,M,U){return y===n||ci(y,lu[M])&&!Qn.call(U,M)?w:y}function tx(y,w,M,U,re,ve){return Or(y)&&Or(w)&&(ve.set(w,y),Jd(y,w,n,tx,ve),ve.delete(w)),y}function X0(y){return ts(y)?n:y}function J0(y,w,M,U,re,ve){var Pe=M&b,Be=y.length,Ke=w.length;if(Be!=Ke&&!(Pe&&Ke>Be))return!1;var ft=ve.get(y),mt=ve.get(w);if(ft&&mt)return ft==w&&mt==y;var xt=-1,Et=!0,$t=M&j?new yo:n;for(ve.set(y,w),ve.set(w,y);++xt<Be;){var en=y[xt],jn=w[xt];if(U)var tn=Pe?U(jn,en,xt,w,y,ve):U(en,jn,xt,y,w,ve);if(tn!==n){if(tn)continue;Et=!1;break}if($t){if(!yy(w,function(Dn,qn){if(!au($t,qn)&&(en===Dn||re(en,Dn,M,U,ve)))return $t.push(qn)})){Et=!1;break}}else if(!(en===jn||re(en,jn,M,U,ve))){Et=!1;break}}return ve.delete(y),ve.delete(w),Et}function Z0(y,w,M,U,re,ve,Pe){switch(M){case me:if(y.byteLength!=w.byteLength||y.byteOffset!=w.byteOffset)return!1;y=y.buffer,w=w.buffer;case ye:return!(y.byteLength!=w.byteLength||!ve(new uu(y),new uu(w)));case oe:case Se:case be:return ci(+y,+w);case Ae:return y.name==w.name&&y.message==w.message;case de:case ne:return y==w+"";case se:var Be=ap;case ae:var Ke=U&b;if(Be||(Be=ip),y.size!=w.size&&!Ke)return!1;var ft=Pe.get(y);if(ft)return ft==w;U|=j,Pe.set(y,w);var mt=J0(Be(y),Be(w),U,re,ve,Pe);return Pe.delete(y),mt;case ie:if(Zl)return Zl.call(y)==Zl.call(w)}return!1}function pa(y,w,M,U,re,ve){var Pe=M&b,Be=Mp(y),Ke=Be.length,ft=Mp(w),mt=ft.length;if(Ke!=mt&&!Pe)return!1;for(var xt=Ke;xt--;){var Et=Be[xt];if(!(Pe?Et in w:Qn.call(w,Et)))return!1}var $t=ve.get(y),en=ve.get(w);if($t&&en)return $t==w&&en==y;var jn=!0;ve.set(y,w),ve.set(w,y);for(var tn=Pe;++xt<Ke;){Et=Be[xt];var Dn=y[Et],qn=w[Et];if(U)var Ns=Pe?U(qn,Dn,Et,w,y,ve):U(Dn,qn,Et,y,w,ve);if(!(Ns===n?Dn===qn||re(Dn,qn,M,U,ve):Ns)){jn=!1;break}tn||(tn=Et=="constructor")}if(jn&&!tn){var Ei=y.constructor,Ss=w.constructor;Ei!=Ss&&"constructor"in y&&"constructor"in w&&!(typeof Ei=="function"&&Ei instanceof Ei&&typeof Ss=="function"&&Ss instanceof Ss)&&(jn=!1)}return ve.delete(y),ve.delete(w),jn}function _r(y){return yh(sx(y,n,oi),y+"")}function Mp(y){return D0(y,ua,fh)}function Ip(y){return D0(y,ga,Fp)}var Rp=hu?function(y){return hu.get(y)}:Mt;function hh(y){for(var w=y.name+"",M=Yi[w],U=Qn.call(Yi,w)?M.length:0;U--;){var re=M[U],ve=re.func;if(ve==null||ve==y)return re.name}return w}function hc(y){var w=Qn.call(fe,"placeholder")?fe:y;return w.placeholder}function qt(){var y=fe.iteratee||Kt;return y=y===Kt?$y:y,arguments.length?y(arguments[0],arguments[1]):y}function ju(y,w){var M=y.__data__;return So(w)?M[typeof w=="string"?"string":"hash"]:M.map}function Lp(y){for(var w=ua(y),M=w.length;M--;){var U=w[M],re=y[U];w[M]=[U,re,r1(re)]}return w}function ul(y,w){var M=by(y,w);return qs(M)?M:n}function e1(y){var w=Qn.call(y,Ua),M=y[Ua];try{y[Ua]=n;var U=!0}catch{}var re=qa.call(y);return U&&(w?y[Ua]=M:delete y[Ua]),re}var fh=nl?function(y){return y==null?[]:(y=Bn(y),$s(nl(y),function(w){return Yl.call(y,w)}))}:W_,Fp=nl?function(y){for(var w=[];y;)po(w,fh(y)),y=Ld(y);return w}:W_,ma=Pn;(zd&&ma(new zd(new ArrayBuffer(1)))!=me||ia&&ma(new ia)!=se||Pr&&ma(Pr.resolve())!=Z||kn&&ma(new kn)!=ae||gs&&ma(new gs)!=Ee)&&(ma=function(y){var w=Pn(y),M=w==Ne?y.constructor:n,U=M?_o(M):"";if(U)switch(U){case b0:return me;case j0:return se;case qd:return Z;case Ud:return ae;case w0:return Ee}return w});function t1(y,w,M){for(var U=-1,re=M.length;++U<re;){var ve=M[U],Pe=ve.size;switch(ve.type){case"drop":y+=Pe;break;case"dropRight":w-=Pe;break;case"take":w=Er(w,y+Pe);break;case"takeRight":y=Sr(y,w-Pe);break}}return{start:y,end:w}}function nx(y){var w=y.match(wa);return w?w[1].split(pn):[]}function ph(y,w,M){w=jo(w,y);for(var U=-1,re=w.length,ve=!1;++U<re;){var Pe=Zn(w[U]);if(!(ve=y!=null&&M(y,Pe)))break;y=y[Pe]}return ve||++U!=re?ve:(re=y==null?0:y.length,!!re&&mc(re)&&bs(Pe,re)&&(on(y)||Ao(y)))}function rx(y){var w=y.length,M=new y.constructor(w);return w&&typeof y[0]=="string"&&Qn.call(y,"index")&&(M.index=y.index,M.input=y.input),M}function ax(y){return typeof y.constructor=="function"&&!gr(y)?Ni(Ld(y)):{}}function ix(y,w,M){var U=y.constructor;switch(w){case ye:return oc(y);case oe:case Se:return new U(+y);case me:return Qy(y,M);case he:case De:case nt:case Fe:case Ge:case it:case wt:case we:case Qe:return Xy(y,M);case se:return new U;case be:case ne:return new U(y);case de:return Ep(y);case ae:return new U;case ie:return V0(y)}}function n1(y,w){var M=w.length;if(!M)return y;var U=M-1;return w[U]=(M>1?"& ":"")+w[U],w=w.join(M>2?", ":" "),y.replace(Xr,`{
/* [wrapped with `+w+`] */
`)}function No(y){return on(y)||Ao(y)||!!(Za&&y&&y[Za])}function bs(y,w){var M=typeof y;return w=w??ee,!!w&&(M=="number"||M!="symbol"&&Na.test(y))&&y>-1&&y%1==0&&y<w}function Ga(y,w,M){if(!Or(M))return!1;var U=typeof w;return(U=="number"?la(M)&&bs(w,M.length):U=="string"&&w in M)?ci(M[w],y):!1}function $p(y,w){if(on(y))return!1;var M=typeof y;return M=="number"||M=="symbol"||M=="boolean"||y==null||Wa(y)?!0:vt.test(y)||!Kn.test(y)||w!=null&&y in Bn(w)}function So(y){var w=typeof y;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?y!=="__proto__":y===null}function Bp(y){var w=hh(y),M=fe[w];if(typeof M!="function"||!(w in vn.prototype))return!1;if(y===M)return!0;var U=Rp(M);return!!U&&y===U[0]}function zp(y){return!!Ny&&Ny in y}var mh=Id?js:K_;function gr(y){var w=y&&y.constructor,M=typeof w=="function"&&w.prototype||lu;return y===M}function r1(y){return y===y&&!Or(y)}function a1(y,w){return function(M){return M==null?!1:M[y]===w&&(w!==n||y in Bn(M))}}function i1(y){var w=Th(y,function(U){return M.size===d&&M.clear(),U}),M=w.cache;return w}function gh(y,w){var M=y[1],U=w[1],re=M|U,ve=re<(S|_|I),Pe=U==I&&M==C||U==I&&M==R&&y[7].length<=w[8]||U==(I|R)&&w[7].length<=w[8]&&M==C;if(!(ve||Pe))return y;U&S&&(y[2]=w[2],re|=M&S?0:T);var Be=w[3];if(Be){var Ke=y[3];y[3]=Ke?Jy(Ke,Be,w[4]):Be,y[4]=Ke?el(y[3],f):w[4]}return Be=w[5],Be&&(Ke=y[5],y[5]=Ke?G0(Ke,Be,w[6]):Be,y[6]=Ke?el(y[5],f):w[6]),Be=w[7],Be&&(y[7]=Be),U&I&&(y[8]=y[8]==null?w[8]:Er(y[8],w[8])),y[9]==null&&(y[9]=w[9]),y[0]=w[0],y[1]=re,y}function dl(y){var w=[];if(y!=null)for(var M in Bn(y))w.push(M);return w}function s1(y){return qa.call(y)}function sx(y,w,M){return w=Sr(w===n?y.length-1:w,0),function(){for(var U=arguments,re=-1,ve=Sr(U.length-w,0),Pe=rt(ve);++re<ve;)Pe[re]=U[w+re];re=-1;for(var Be=rt(w+1);++re<w;)Be[re]=U[re];return Be[w]=M(Pe),Ja(y,this,Be)}}function wu(y,w){return w.length<2?y:Xi(y,Si(w,0,-1))}function Hs(y,w){for(var M=y.length,U=Er(w.length,M),re=sa(y);U--;){var ve=w[U];y[U]=bs(ve,M)?re[ve]:n}return y}function qp(y,w){if(!(w==="constructor"&&typeof y[w]=="function")&&w!="__proto__")return y[w]}var Up=xh(Zd),Nu=_y||function(y,w){return Qr.setTimeout(y,w)},yh=xh(eh);function Vp(y,w,M){var U=w+"";return yh(y,n1(U,o1(nx(U),M)))}function xh(y){var w=0,M=0;return function(){var U=go(),re=H-(U-M);if(M=U,re>0){if(++w>=V)return arguments[0]}else w=0;return y.apply(n,arguments)}}function vh(y,w){var M=-1,U=y.length,re=U-1;for(w=w===n?U:w;++M<w;){var ve=_p(M,re),Pe=y[ve];y[ve]=y[M],y[M]=Pe}return y.length=w,y}var Gs=i1(function(y){var w=[];return y.charCodeAt(0)===46&&w.push(""),y.replace(Dt,function(M,U,re,ve){w.push(re?ve.replace(Rn,"$1"):U||M)}),w});function Zn(y){if(typeof y=="string"||Wa(y))return y;var w=y+"";return w=="0"&&1/y==-1/0?"-0":w}function _o(y){if(y!=null){try{return Rd.call(y)}catch{}try{return y+""}catch{}}return""}function o1(y,w){return Vi(Re,function(M){var U="_."+M[0];w&M[1]&&!Xf(y,U)&&y.push(U)}),y.sort()}function oa(y){if(y instanceof vn)return y.clone();var w=new ti(y.__wrapped__,y.__chain__);return w.__actions__=sa(y.__actions__),w.__index__=y.__index__,w.__values__=y.__values__,w}function d_(y,w,M){(M?Ga(y,w,M):w===n)?w=1:w=Sr(un(w),0);var U=y==null?0:y.length;if(!U||w<1)return[];for(var re=0,ve=0,Pe=rt(du(U/w));re<U;)Pe[ve++]=Si(y,re,re+=w);return Pe}function l1(y){for(var w=-1,M=y==null?0:y.length,U=0,re=[];++w<M;){var ve=y[w];ve&&(re[U++]=ve)}return re}function c1(){var y=arguments.length;if(!y)return[];for(var w=rt(y-1),M=arguments[0],U=y;U--;)w[U-1]=arguments[U];return po(on(M)?sa(M):[M],An(w,1))}var Dr=mn(function(y,w){return Gr(y)?sl(y,An(w,1,Gr,!0)):[]}),si=mn(function(y,w){var M=Oa(w);return Gr(M)&&(M=n),Gr(y)?sl(y,An(w,1,Gr,!0),qt(M,2)):[]}),Co=mn(function(y,w){var M=Oa(w);return Gr(M)&&(M=n),Gr(y)?sl(y,An(w,1,Gr,!0),n,M):[]});function u1(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:un(w),Si(y,w<0?0:w,U)):[]}function d1(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:un(w),w=U-w,Si(y,0,w<0?0:w)):[]}function h_(y,w){return y&&y.length?rh(y,qt(w,3),!0,!0):[]}function ox(y,w){return y&&y.length?rh(y,qt(w,3),!0):[]}function Ci(y,w,M,U){var re=y==null?0:y.length;return re?(M&&typeof M!="number"&&Ga(y,w,M)&&(M=0,U=re),yn(y,w,M,U)):[]}function Zi(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=M==null?0:un(M);return re<0&&(re=Sr(U+re,0)),Jf(y,qt(w,3),re)}function lx(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=U-1;return M!==n&&(re=un(M),re=M<0?Sr(U+re,0):Er(re,U-1)),Jf(y,qt(w,3),re,!0)}function oi(y){var w=y==null?0:y.length;return w?An(y,1):[]}function h1(y){var w=y==null?0:y.length;return w?An(y,G):[]}function hl(y,w){var M=y==null?0:y.length;return M?(w=w===n?1:un(w),An(y,w)):[]}function fc(y){for(var w=-1,M=y==null?0:y.length,U={};++w<M;){var re=y[w];U[re[0]]=re[1]}return U}function To(y){return y&&y.length?y[0]:n}function cx(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=M==null?0:un(M);return re<0&&(re=Sr(U+re,0)),nu(y,w,re)}function ux(y){var w=y==null?0:y.length;return w?Si(y,0,-1):[]}var Ws=mn(function(y){var w=Ar(y,Ap);return w.length&&w[0]===y[0]?Iy(w):[]}),f1=mn(function(y){var w=Oa(y),M=Ar(y,Ap);return w===Oa(M)?w=n:M.pop(),M.length&&M[0]===y[0]?Iy(M,qt(w,2)):[]}),Su=mn(function(y){var w=Oa(y),M=Ar(y,Ap);return w=typeof w=="function"?w:n,w&&M.pop(),M.length&&M[0]===y[0]?Iy(M,n,w):[]});function bh(y,w){return y==null?"":Wi.call(y,w)}function Oa(y){var w=y==null?0:y.length;return w?y[w-1]:n}function _u(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=U;return M!==n&&(re=un(M),re=re<0?Sr(U+re,0):Er(re,U-1)),w===w?ji(y,w,re):Jf(y,ru,re,!0)}function p1(y,w){return y&&y.length?qy(y,un(w)):n}var m1=mn(Cu);function Cu(y,w){return y&&y.length&&w&&w.length?Sp(y,w):y}function g1(y,w,M){return y&&y.length&&w&&w.length?Sp(y,w,qt(M,2)):y}function Hp(y,w,M){return y&&y.length&&w&&w.length?Sp(y,w,n,M):y}var y1=_r(function(y,w){var M=y==null?0:y.length,U=Kd(y,w);return Vy(y,Ar(w,function(re){return bs(re,M)?+re:re}).sort(sh)),U});function f_(y,w){var M=[];if(!(y&&y.length))return M;var U=-1,re=[],ve=y.length;for(w=qt(w,3);++U<ve;){var Pe=y[U];w(Pe,U,y)&&(M.push(Pe),re.push(U))}return Vy(y,re),M}function dx(y){return y==null?y:Ty.call(y)}function rr(y,w,M){var U=y==null?0:y.length;return U?(M&&typeof M!="number"&&Ga(y,w,M)?(w=0,M=U):(w=w==null?0:un(w),M=M===n?U:un(M)),Si(y,w,M)):[]}function br(y,w){return th(y,w)}function _n(y,w,M){return Tp(y,w,qt(M,2))}function Fn(y,w){var M=y==null?0:y.length;if(M){var U=th(y,w);if(U<M&&ci(y[U],w))return U}return-1}function ar(y,w){return th(y,w,!0)}function Ti(y,w,M){return Tp(y,w,qt(M,2),!0)}function fl(y,w){var M=y==null?0:y.length;if(M){var U=th(y,w,!0)-1;if(ci(y[U],w))return U}return-1}function Tu(y){return y&&y.length?Gy(y):[]}function hx(y,w){return y&&y.length?Gy(y,qt(w,2)):[]}function ko(y){var w=y==null?0:y.length;return w?Si(y,1,w):[]}function Hr(y,w,M){return y&&y.length?(w=M||w===n?1:un(w),Si(y,0,w<0?0:w)):[]}function pl(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:un(w),w=U-w,Si(y,w<0?0:w,U)):[]}function pc(y,w){return y&&y.length?rh(y,qt(w,3),!1,!0):[]}function fx(y,w){return y&&y.length?rh(y,qt(w,3)):[]}var es=mn(function(y){return bo(An(y,1,Gr,!0))}),ku=mn(function(y){var w=Oa(y);return Gr(w)&&(w=n),bo(An(y,1,Gr,!0),qt(w,2))}),jh=mn(function(y){var w=Oa(y);return w=typeof w=="function"?w:n,bo(An(y,1,Gr,!0),n,w)});function li(y){return y&&y.length?bo(y):[]}function px(y,w){return y&&y.length?bo(y,qt(w,2)):[]}function mx(y,w){return w=typeof w=="function"?w:n,y&&y.length?bo(y,n,w):[]}function Au(y){if(!(y&&y.length))return[];var w=0;return y=$s(y,function(M){if(Gr(M))return w=Sr(M.length,w),!0}),Jo(w,function(M){return Ar(y,Zf(M))})}function wh(y,w){if(!(y&&y.length))return[];var M=Au(y);return w==null?M:Ar(M,function(U){return Ja(w,n,U)})}var ml=mn(function(y,w){return Gr(y)?sl(y,w):[]}),Sa=mn(function(y){return ah($s(y,Gr))}),gl=mn(function(y){var w=Oa(y);return Gr(w)&&(w=n),ah($s(y,Gr),qt(w,2))}),Eu=mn(function(y){var w=Oa(y);return w=typeof w=="function"?w:n,ah($s(y,Gr),n,w)}),Pu=mn(Au);function gx(y,w){return Ky(y||[],w||[],nc)}function yx(y,w){return Ky(y||[],w||[],vu)}var x1=mn(function(y){var w=y.length,M=w>1?y[w-1]:n;return M=typeof M=="function"?(y.pop(),M):n,wh(y,M)});function Du(y){var w=fe(y);return w.__chain__=!0,w}function xx(y,w){return w(y),y}function Ma(y,w){return w(y)}var v1=_r(function(y){var w=y.length,M=w?y[0]:0,U=this.__wrapped__,re=function(ve){return Kd(ve,y)};return w>1||this.__actions__.length||!(U instanceof vn)||!bs(M)?this.thru(re):(U=U.slice(M,+M+(w?1:0)),U.__actions__.push({func:Ma,args:[re],thisArg:n}),new ti(U,this.__chain__).thru(function(ve){return w&&!ve.length&&ve.push(n),ve}))});function ki(){return Du(this)}function b1(){return new ti(this.value(),this.__chain__)}function j1(){this.__values__===n&&(this.__values__=Ai(this.value()));var y=this.__index__>=this.__values__.length,w=y?n:this.__values__[this.__index__++];return{done:y,value:w}}function p_(){return this}function yl(y){for(var w,M=this;M instanceof Qi;){var U=oa(M);U.__index__=0,U.__values__=n,w?re.__wrapped__=U:w=U;var re=U;M=M.__wrapped__}return re.__wrapped__=y,w}function Gp(){var y=this.__wrapped__;if(y instanceof vn){var w=y;return this.__actions__.length&&(w=new vn(this)),w=w.reverse(),w.__actions__.push({func:Ma,args:[dx],thisArg:n}),new ti(w,this.__chain__)}return this.thru(dx)}function vx(){return z0(this.__wrapped__,this.__actions__)}var Ou=lc(function(y,w,M){Qn.call(y,M)?++y[M]:ys(y,M,1)});function w1(y,w,M){var U=on(y)?o0:Oy;return M&&Ga(y,w,M)&&(w=n),U(y,qt(w,3))}function N1(y,w){var M=on(y)?$s:nr;return M(y,qt(w,3))}var S1=wo(Zi),bx=wo(lx);function jx(y,w){return An(Nh(y,w),1)}function m_(y,w){return An(Nh(y,w),G)}function g_(y,w,M){return M=M===n?1:un(M),An(Nh(y,w),M)}function _1(y,w){var M=on(y)?Vi:vo;return M(y,qt(w,3))}function wx(y,w){var M=on(y)?KS:gp;return M(y,qt(w,3))}var C1=lc(function(y,w,M){Qn.call(y,M)?y[M].push(w):ys(y,M,[w])});function Mu(y,w,M,U){y=la(y)?y:zu(y),M=M&&!U?un(M):0;var re=y.length;return M<0&&(M=Sr(re+M,0)),am(y)?M<=re&&y.indexOf(w,M)>-1:!!re&&nu(y,w,M)>-1}var Wp=mn(function(y,w,M){var U=-1,re=typeof w=="function",ve=la(y)?rt(y.length):[];return vo(y,function(Pe){ve[++U]=re?Ja(w,Pe,M):ic(Pe,w,M)}),ve}),T1=lc(function(y,w,M){ys(y,M,w)});function Nh(y,w){var M=on(y)?Ar:By;return M(y,qt(w,3))}function k1(y,w,M,U){return y==null?[]:(on(w)||(w=w==null?[]:[w]),M=U?n:M,on(M)||(M=M==null?[]:[M]),Uy(y,w,M))}var A1=lc(function(y,w,M){y[M?0:1].push(w)},function(){return[[],[]]});function E1(y,w,M){var U=on(y)?gy:vy,re=arguments.length<3;return U(y,qt(w,4),M,re,vo)}function P1(y,w,M){var U=on(y)?YS:vy,re=arguments.length<3;return U(y,qt(w,4),M,re,gp)}function Kp(y,w){var M=on(y)?$s:nr;return M(y,kh(qt(w,3)))}function D1(y){var w=on(y)?pu:xu;return w(y)}function O1(y,w,M){(M?Ga(y,w,M):w===n)?w=1:w=un(w);var U=on(y)?A0:Cp;return U(y,w)}function yr(y){var w=on(y)?E0:$0;return w(y)}function Nx(y){if(y==null)return 0;if(la(y))return am(y)?Bs(y):y.length;var w=ma(y);return w==se||w==ae?y.size:bp(y).length}function y_(y,w,M){var U=on(y)?yy:B0;return M&&Ga(y,w,M)&&(w=n),U(y,qt(w,3))}var M1=mn(function(y,w){if(y==null)return[];var M=w.length;return M>1&&Ga(y,w[0],w[1])?w=[]:M>2&&Ga(w[0],w[1],w[2])&&(w=[w[0]]),Uy(y,An(w,1),[])}),Yp=Xl||function(){return Qr.Date.now()};function x_(y,w){if(typeof w!="function")throw new wi(o);return y=un(y),function(){if(--y<1)return w.apply(this,arguments)}}function I1(y,w,M){return w=M?n:w,w=y&&w==null?y.length:w,Vs(y,I,n,n,n,n,w)}function Sh(y,w){var M;if(typeof w!="function")throw new wi(o);return y=un(y),function(){return--y>0&&(M=w.apply(this,arguments)),y<=1&&(w=n),M}}var xl=mn(function(y,w,M){var U=S;if(M.length){var re=el(M,hc(xl));U|=k}return Vs(y,U,w,M,re)}),Qp=mn(function(y,w,M){var U=S|_;if(M.length){var re=el(M,hc(Qp));U|=k}return Vs(w,U,y,M,re)});function _h(y,w,M){w=M?n:w;var U=Vs(y,C,n,n,n,n,n,w);return U.placeholder=_h.placeholder,U}function Xp(y,w,M){w=M?n:w;var U=Vs(y,E,n,n,n,n,n,w);return U.placeholder=Xp.placeholder,U}function vl(y,w,M){var U,re,ve,Pe,Be,Ke,ft=0,mt=!1,xt=!1,Et=!0;if(typeof y!="function")throw new wi(o);w=ns(w)||0,Or(M)&&(mt=!!M.leading,xt="maxWait"in M,ve=xt?Sr(ns(M.maxWait)||0,w):ve,Et="trailing"in M?!!M.trailing:Et);function $t(da){var Po=U,gc=re;return U=re=n,ft=da,Pe=y.apply(gc,Po),Pe}function en(da){return ft=da,Be=Nu(Dn,w),mt?$t(da):Pe}function jn(da){var Po=da-Ke,gc=da-ft,$M=w-Po;return xt?Er($M,ve-gc):$M}function tn(da){var Po=da-Ke,gc=da-ft;return Ke===n||Po>=w||Po<0||xt&&gc>=ve}function Dn(){var da=Yp();if(tn(da))return qn(da);Be=Nu(Dn,jn(da))}function qn(da){return Be=n,Et&&U?$t(da):(U=re=n,Pe)}function Ns(){Be!==n&&U0(Be),ft=0,U=Ke=re=Be=n}function Ei(){return Be===n?Pe:qn(Yp())}function Ss(){var da=Yp(),Po=tn(da);if(U=arguments,re=this,Ke=da,Po){if(Be===n)return en(Ke);if(xt)return U0(Be),Be=Nu(Dn,w),$t(Ke)}return Be===n&&(Be=Nu(Dn,w)),Pe}return Ss.cancel=Ns,Ss.flush=Ei,Ss}var Ks=mn(function(y,w){return rc(y,1,w)}),Ch=mn(function(y,w,M){return rc(y,ns(w)||0,M)});function v_(y){return Vs(y,z)}function Th(y,w){if(typeof y!="function"||w!=null&&typeof w!="function")throw new wi(o);var M=function(){var U=arguments,re=w?w.apply(this,U):U[0],ve=M.cache;if(ve.has(re))return ve.get(re);var Pe=y.apply(this,U);return M.cache=ve.set(re,Pe)||ve,Pe};return M.cache=new(Th.Cache||ni),M}Th.Cache=ni;function kh(y){if(typeof y!="function")throw new wi(o);return function(){var w=arguments;switch(w.length){case 0:return!y.call(this);case 1:return!y.call(this,w[0]);case 2:return!y.call(this,w[0],w[1]);case 3:return!y.call(this,w[0],w[1],w[2])}return!y.apply(this,w)}}function R1(y){return Sh(2,y)}var L1=q0(function(y,w){w=w.length==1&&on(w[0])?Ar(w[0],bi(qt())):Ar(An(w,1),bi(qt()));var M=w.length;return mn(function(U){for(var re=-1,ve=Er(U.length,M);++re<ve;)U[re]=w[re].call(this,U[re]);return Ja(y,this,U)})}),Sx=mn(function(y,w){var M=el(w,hc(Sx));return Vs(y,k,n,w,M)}),Jp=mn(function(y,w){var M=el(w,hc(Jp));return Vs(y,P,n,w,M)}),F1=_r(function(y,w){return Vs(y,R,n,n,n,w)});function $1(y,w){if(typeof y!="function")throw new wi(o);return w=w===n?w:un(w),mn(y,w)}function b_(y,w){if(typeof y!="function")throw new wi(o);return w=w==null?0:Sr(un(w),0),mn(function(M){var U=M[w],re=ll(M,0,w);return U&&po(re,U),Ja(y,this,re)})}function _x(y,w,M){var U=!0,re=!0;if(typeof y!="function")throw new wi(o);return Or(M)&&(U="leading"in M?!!M.leading:U,re="trailing"in M?!!M.trailing:re),vl(y,w,{leading:U,maxWait:w,trailing:re})}function Cx(y){return I1(y,1)}function j_(y,w){return Sx(ih(w),y)}function w_(){if(!arguments.length)return[];var y=arguments[0];return on(y)?y:[y]}function Ah(y){return Pa(y,x)}function N_(y,w){return w=typeof w=="function"?w:n,Pa(y,x,w)}function B1(y){return Pa(y,p|x)}function Cn(y,w){return w=typeof w=="function"?w:n,Pa(y,p|x,w)}function Tx(y,w){return w==null||Dy(y,w,ua(w))}function ci(y,w){return y===w||y!==y&&w!==w}var kx=dc(Yd),z1=dc(function(y,w){return y>=w}),Ao=yp(function(){return arguments}())?yp:function(y){return Fr(y)&&Qn.call(y,"callee")&&!Yl.call(y,"callee")},on=rt.isArray,Zp=Qf?bi(Qf):ri;function la(y){return y!=null&&mc(y.length)&&!js(y)}function Gr(y){return Fr(y)&&la(y)}function S_(y){return y===!0||y===!1||Fr(y)&&Pn(y)==oe}var bl=up||K_,q1=n0?bi(n0):Zr;function U1(y){return Fr(y)&&y.nodeType===1&&!ts(y)}function em(y){if(y==null)return!0;if(la(y)&&(on(y)||typeof y=="string"||typeof y.splice=="function"||bl(y)||Iu(y)||Ao(y)))return!y.length;var w=ma(y);if(w==se||w==ae)return!y.size;if(gr(y))return!bp(y).length;for(var M in y)if(Qn.call(y,M))return!1;return!0}function lr(y,w){return sc(y,w)}function Ax(y,w,M){M=typeof M=="function"?M:n;var U=M?M(y,w):n;return U===n?sc(y,w,n,M):!!U}function ca(y){if(!Fr(y))return!1;var w=Pn(y);return w==Ae||w==Ve||typeof y.message=="string"&&typeof y.name=="string"&&!ts(y)}function __(y){return typeof y=="number"&&Bd(y)}function js(y){if(!Or(y))return!1;var w=Pn(y);return w==ue||w==Te||w==Le||w==ge}function tm(y){return typeof y=="number"&&y==un(y)}function mc(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=ee}function Or(y){var w=typeof y;return y!=null&&(w=="object"||w=="function")}function Fr(y){return y!=null&&typeof y=="object"}var nm=r0?bi(r0):xp;function Ex(y,w){return y===w||Xd(y,w,Lp(w))}function C_(y,w,M){return M=typeof M=="function"?M:n,Xd(y,w,Lp(w),M)}function V1(y){return G1(y)&&y!=+y}function T_(y){if(mh(y))throw new Jt(s);return qs(y)}function H1(y){return y===null}function k_(y){return y==null}function G1(y){return typeof y=="number"||Fr(y)&&Pn(y)==be}function ts(y){if(!Fr(y)||Pn(y)!=Ne)return!1;var w=Ld(y);if(w===null)return!0;var M=Qn.call(w,"constructor")&&w.constructor;return typeof M=="function"&&M instanceof M&&Rd.call(M)==Gi}var rm=a0?bi(a0):vp;function Px(y){return tm(y)&&y>=-9007199254740991&&y<=ee}var W1=i0?bi(i0):Ly;function am(y){return typeof y=="string"||!on(y)&&Fr(y)&&Pn(y)==ne}function Wa(y){return typeof y=="symbol"||Fr(y)&&Pn(y)==ie}var Iu=s0?bi(s0):Fy;function ws(y){return y===n}function Dx(y){return Fr(y)&&ma(y)==Ee}function K1(y){return Fr(y)&&Pn(y)==Q}var Y1=dc(jp),Eh=dc(function(y,w){return y<=w});function Ai(y){if(!y)return[];if(la(y))return am(y)?Hi(y):sa(y);if(Ql&&y[Ql])return m0(y[Ql]());var w=ma(y),M=w==se?ap:w==ae?ip:zu;return M(y)}function Ys(y){if(!y)return y===0?y:0;if(y=ns(y),y===G||y===-1/0){var w=y<0?-1:1;return w*X}return y===y?y:0}function un(y){var w=Ys(y),M=w%1;return w===w?M?w-M:w:0}function Qs(y){return y?xs(un(y),0,ce):0}function ns(y){if(typeof y=="number")return y;if(Wa(y))return $;if(Or(y)){var w=typeof y.valueOf=="function"?y.valueOf():y;y=Or(w)?w+"":w}if(typeof y!="string")return y===0?y:+y;y=d0(y);var M=Ot.test(y);return M||Ln.test(y)?GS(y.slice(2),M?2:8):St.test(y)?$:+y}function Q1(y){return ii(y,ga(y))}function Ru(y){return y?xs(un(y),-9007199254740991,ee):y===0?y:0}function Xn(y){return y==null?"":ai(y)}var A_=cc(function(y,w){if(gr(w)||la(w)){ii(w,ua(w),y);return}for(var M in w)Qn.call(w,M)&&nc(y,M,w[M])}),X1=cc(function(y,w){ii(w,ga(w),y)}),im=cc(function(y,w,M,U){ii(w,ga(w),y,U)}),E_=cc(function(y,w,M,U){ii(w,ua(w),y,U)}),P_=_r(Kd);function D_(y,w){var M=Ni(y);return w==null?M:xo(M,w)}var O_=mn(function(y,w){y=Bn(y);var M=-1,U=w.length,re=U>2?w[2]:n;for(re&&Ga(w[0],w[1],re)&&(U=1);++M<U;)for(var ve=w[M],Pe=ga(ve),Be=-1,Ke=Pe.length;++Be<Ke;){var ft=Pe[Be],mt=y[ft];(mt===n||ci(mt,lu[ft])&&!Qn.call(y,ft))&&(y[ft]=ve[ft])}return y}),J1=mn(function(y){return y.push(n,tx),Ja(Mh,n,y)});function Lu(y,w){return l0(y,qt(w,3),Da)}function Ph(y,w){return l0(y,qt(w,3),yu)}function Z1(y,w){return y==null?y:gu(y,qt(w,3),ga)}function M_(y,w){return y==null?y:ac(y,qt(w,3),ga)}function Fu(y,w){return y&&Da(y,qt(w,3))}function Dh(y,w){return y&&yu(y,qt(w,3))}function ej(y){return y==null?[]:ol(y,ua(y))}function sm(y){return y==null?[]:ol(y,ga(y))}function Oh(y,w,M){var U=y==null?n:Xi(y,w);return U===n?M:U}function Ox(y,w){return y!=null&&ph(y,w,My)}function $u(y,w){return y!=null&&ph(y,w,O0)}var tj=lh(function(y,w,M){w!=null&&typeof w.toString!="function"&&(w=qa.call(w)),y[w]=M},Je(Ze)),nj=lh(function(y,w,M){w!=null&&typeof w.toString!="function"&&(w=qa.call(w)),Qn.call(y,w)?y[w].push(M):y[w]=[M]},qt),I_=mn(ic);function ua(y){return la(y)?Py(y):bp(y)}function ga(y){return la(y)?Py(y,!0):I0(y)}function R_(y,w){var M={};return w=qt(w,3),Da(y,function(U,re,ve){ys(M,w(U,re,ve),U)}),M}function L_(y,w){var M={};return w=qt(w,3),Da(y,function(U,re,ve){ys(M,re,w(U,re,ve))}),M}var F_=cc(function(y,w,M){Jd(y,w,M)}),Mh=cc(function(y,w,M,U){Jd(y,w,M,U)}),om=_r(function(y,w){var M={};if(y==null)return M;var U=!1;w=Ar(w,function(ve){return ve=jo(ve,y),U||(U=ve.length>1),ve}),ii(y,Ip(y),M),U&&(M=Pa(M,p|g|x,X0));for(var re=w.length;re--;)nh(M,w[re]);return M});function Mx(y,w){return Bu(y,kh(qt(w)))}var $_=_r(function(y,w){return y==null?{}:R0(y,w)});function Bu(y,w){if(y==null)return{};var M=Ar(Ip(y),function(U){return[U]});return w=qt(w),Np(y,M,function(U,re){return w(U,re[0])})}function B_(y,w,M){w=jo(w,y);var U=-1,re=w.length;for(re||(re=1,y=n);++U<re;){var ve=y==null?n:y[Zn(w[U])];ve===n&&(U=re,ve=M),y=js(ve)?ve.call(y):ve}return y}function rj(y,w,M){return y==null?y:vu(y,w,M)}function aj(y,w,M,U){return U=typeof U=="function"?U:n,y==null?y:vu(y,w,M,U)}var Ix=dh(ua),Rx=dh(ga);function Lx(y,w,M){var U=on(y),re=U||bl(y)||Iu(y);if(w=qt(w,4),M==null){var ve=y&&y.constructor;re?M=U?new ve:[]:Or(y)?M=js(ve)?Ni(Ld(y)):{}:M={}}return(re?Vi:Da)(y,function(Pe,Be,Ke){return w(M,Pe,Be,Ke)}),M}function ij(y,w){return y==null?!0:nh(y,w)}function lm(y,w,M){return y==null?y:Wy(y,w,ih(M))}function z_(y,w,M,U){return U=typeof U=="function"?U:n,y==null?y:Wy(y,w,ih(M),U)}function zu(y){return y==null?[]:np(y,ua(y))}function Fx(y){return y==null?[]:np(y,ga(y))}function $x(y,w,M){return M===n&&(M=w,w=n),M!==n&&(M=ns(M),M=M===M?M:0),w!==n&&(w=ns(w),w=w===w?w:0),xs(ns(y),w,M)}function cm(y,w,M){return w=Ys(w),M===n?(M=w,w=0):M=Ys(M),y=ns(y),M0(y,w,M)}function Bx(y,w,M){if(M&&typeof M!="boolean"&&Ga(y,w,M)&&(w=M=n),M===n&&(typeof w=="boolean"?(M=w,w=n):typeof y=="boolean"&&(M=y,y=n)),y===n&&w===n?(y=0,w=1):(y=Ys(y),w===n?(w=y,y=0):w=Ys(w)),y>w){var U=y;y=w,w=U}if(M||y%1||w%1){var re=Cy();return Er(y+re*(w-y+Md("1e-"+((re+"").length-1))),w)}return _p(y,w)}var sj=Ha(function(y,w,M){return w=w.toLowerCase(),y+(M?um(w):w)});function um(y){return N(Xn(y).toLowerCase())}function Eo(y){return y=Xn(y),y&&y.replace(xi,rp).replace(fo,"")}function jl(y,w,M){y=Xn(y),w=ai(w);var U=y.length;M=M===n?U:xs(un(M),0,U);var re=M;return M-=w.length,M>=0&&y.slice(M,re)==w}function wl(y){return y=Xn(y),y&&Tt.test(y)?y.replace(ke,h0):y}function Ih(y){return y=Xn(y),y&&Yn.test(y)?y.replace(Vt,"\\$&"):y}var Rh=Ha(function(y,w,M){return y+(M?"-":"")+w.toLowerCase()}),Nl=Ha(function(y,w,M){return y+(M?" ":"")+w.toLowerCase()}),q_=_i("toLowerCase");function oj(y,w,M){y=Xn(y),w=un(w);var U=w?Bs(y):0;if(!w||U>=w)return y;var re=(w-U)/2;return uh(mo(re),M)+y+uh(du(re),M)}function Lh(y,w,M){y=Xn(y),w=un(w);var U=w?Bs(y):0;return w&&U<w?y+uh(w-U,M):y}function U_(y,w,M){y=Xn(y),w=un(w);var U=w?Bs(y):0;return w&&U<w?uh(w-U,M)+y:y}function lj(y,w,M){return M||w==null?w=0:w&&(w=+w),Jl(Xn(y).replace(vr,""),w||0)}function dm(y,w,M){return(M?Ga(y,w,M):w===n)?w=1:w=un(w),Hy(Xn(y),w)}function cj(){var y=arguments,w=Xn(y[0]);return y.length<3?w:w.replace(y[1],y[2])}var V_=Ha(function(y,w,M){return y+(M?"_":"")+w.toLowerCase()});function hm(y,w,M){return M&&typeof M!="number"&&Ga(y,w,M)&&(w=M=n),M=M===n?ce:M>>>0,M?(y=Xn(y),y&&(typeof w=="string"||w!=null&&!rm(w))&&(w=ai(w),!w&&Zo(y))?ll(Hi(y),0,M):y.split(w,M)):[]}var fm=Ha(function(y,w,M){return y+(M?" ":"")+N(w)});function uj(y,w,M){return y=Xn(y),M=M==null?0:xs(un(M),0,y.length),w=ai(w),y.slice(M,M+w.length)==w}function Fh(y,w,M){var U=fe.templateSettings;M&&Ga(y,w,M)&&(w=n),y=Xn(y),w=im({},w,U,Op);var re=im({},w.imports,U.imports,Op),ve=ua(re),Pe=np(re,ve),Be,Ke,ft=0,mt=w.interpolate||ho,xt="__p += '",Et=sp((w.escape||ho).source+"|"+mt.source+"|"+(mt===kt?et:ho).source+"|"+(w.evaluate||ho).source+"|$","g"),$t="//# sourceURL="+(Qn.call(w,"sourceURL")?(w.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zb+"]")+`
`;y.replace(Et,function(tn,Dn,qn,Ns,Ei,Ss){return qn||(qn=Ns),xt+=y.slice(ft,Ss).replace(Td,f0),Dn&&(Be=!0,xt+=`' +
__e(`+Dn+`) +
'`),Ei&&(Ke=!0,xt+=`';
`+Ei+`;
__p += '`),qn&&(xt+=`' +
((__t = (`+qn+`)) == null ? '' : __t) +
'`),ft=Ss+tn.length,tn}),xt+=`';
`;var en=Qn.call(w,"variable")&&w.variable;if(!en)xt=`with (obj) {
`+xt+`
}
`;else if(Tn.test(en))throw new Jt(l);xt=(Ke?xt.replace(Xe,""):xt).replace(ct,"$1").replace(Ct,"$1;"),xt="function("+(en||"obj")+`) {
`+(en?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Be?", __e = _.escape":"")+(Ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xt+`return __p
}`;var jn=L(function(){return $n(ve,$t+"return "+xt).apply(n,Pe)});if(jn.source=xt,ca(jn))throw jn;return jn}function zx(y){return Xn(y).toLowerCase()}function pm(y){return Xn(y).toUpperCase()}function dj(y,w,M){if(y=Xn(y),y&&(M||w===n))return d0(y);if(!y||!(w=ai(w)))return y;var U=Hi(y),re=Hi(w),ve=iu(U,re),Pe=su(U,re)+1;return ll(U,ve,Pe).join("")}function H_(y,w,M){if(y=Xn(y),y&&(M||w===n))return y.slice(0,jy(y)+1);if(!y||!(w=ai(w)))return y;var U=Hi(y),re=su(U,Hi(w))+1;return ll(U,0,re).join("")}function mm(y,w,M){if(y=Xn(y),y&&(M||w===n))return y.replace(vr,"");if(!y||!(w=ai(w)))return y;var U=Hi(y),re=iu(U,Hi(w));return ll(U,re).join("")}function u(y,w){var M=q,U=F;if(Or(w)){var re="separator"in w?w.separator:re;M="length"in w?un(w.length):M,U="omission"in w?ai(w.omission):U}y=Xn(y);var ve=y.length;if(Zo(y)){var Pe=Hi(y);ve=Pe.length}if(M>=ve)return y;var Be=M-Bs(U);if(Be<1)return U;var Ke=Pe?ll(Pe,0,Be).join(""):y.slice(0,Be);if(re===n)return Ke+U;if(Pe&&(Be+=Ke.length-Be),rm(re)){if(y.slice(Be).search(re)){var ft,mt=Ke;for(re.global||(re=sp(re.source,Xn(gt.exec(re))+"g")),re.lastIndex=0;ft=re.exec(mt);)var xt=ft.index;Ke=Ke.slice(0,xt===n?Be:xt)}}else if(y.indexOf(ai(re),Be)!=Be){var Et=Ke.lastIndexOf(re);Et>-1&&(Ke=Ke.slice(0,Et))}return Ke+U}function h(y){return y=Xn(y),y&&ot.test(y)?y.replace(bt,y0):y}var m=Ha(function(y,w,M){return y+(M?" ":"")+w.toUpperCase()}),N=_i("toUpperCase");function A(y,w,M){return y=Xn(y),w=M?n:w,w===n?p0(y)?r_(y):JS(y):y.match(w)||[]}var L=mn(function(y,w){try{return Ja(y,n,w)}catch(M){return ca(M)?M:new Jt(M)}}),J=_r(function(y,w){return Vi(w,function(M){M=Zn(M),ys(y,M,xl(y[M],y))}),y});function pe(y){var w=y==null?0:y.length,M=qt();return y=w?Ar(y,function(U){if(typeof U[1]!="function")throw new wi(o);return[M(U[0]),U[1]]}):[],mn(function(U){for(var re=-1;++re<w;){var ve=y[re];if(Ja(ve[0],this,U))return Ja(ve[1],this,U)}})}function Oe(y){return P0(Pa(y,p))}function Je(y){return function(){return y}}function ut(y,w){return y==null||y!==y?w:y}var pt=Us(),tt=Us(!0);function Ze(y){return y}function Kt(y){return $y(typeof y=="function"?y:Pa(y,p))}function Wt(y){return zy(Pa(y,p))}function cr(y,w){return wp(y,Pa(w,p))}var We=mn(function(y,w){return function(M){return ic(M,y,w)}}),qe=mn(function(y,w){return function(M){return ic(y,M,w)}});function Ye(y,w,M){var U=ua(w),re=ol(w,U);M==null&&!(Or(w)&&(re.length||!U.length))&&(M=w,w=y,y=this,re=ol(w,ua(w)));var ve=!(Or(M)&&"chain"in M)||!!M.chain,Pe=js(y);return Vi(re,function(Be){var Ke=w[Be];y[Be]=Ke,Pe&&(y.prototype[Be]=function(){var ft=this.__chain__;if(ve||ft){var mt=y(this.__wrapped__),xt=mt.__actions__=sa(this.__actions__);return xt.push({func:Ke,args:arguments,thisArg:y}),mt.__chain__=ft,mt}return Ke.apply(y,po([this.value()],arguments))})}),y}function ht(){return Qr._===this&&(Qr._=cu),this}function Mt(){}function bn(y){return y=un(y),mn(function(w){return qy(w,y)})}var Bt=ch(Ar),Yt=ch(o0),ya=ch(yy);function zn(y){return $p(y)?Zf(Zn(y)):L0(y)}function Sl(y){return function(w){return y==null?n:Xi(y,w)}}var G_=cl(),PG=cl(!0);function W_(){return[]}function K_(){return!1}function DG(){return{}}function OG(){return""}function MG(){return!0}function IG(y,w){if(y=un(y),y<1||y>ee)return[];var M=ce,U=Er(y,ce);w=qt(w),y-=ce;for(var re=Jo(U,w);++M<y;)w(M);return re}function RG(y){return on(y)?Ar(y,Zn):Wa(y)?[y]:sa(Gs(Xn(y)))}function LG(y){var w=++ps;return Xn(y)+w}var FG=bu(function(y,w){return y+w},0),$G=Dp("ceil"),BG=bu(function(y,w){return y/w},1),zG=Dp("floor");function qG(y){return y&&y.length?vs(y,Ze,Yd):n}function UG(y,w){return y&&y.length?vs(y,qt(w,2),Yd):n}function VG(y){return c0(y,Ze)}function HG(y,w){return c0(y,qt(w,2))}function GG(y){return y&&y.length?vs(y,Ze,jp):n}function WG(y,w){return y&&y.length?vs(y,qt(w,2),jp):n}var KG=bu(function(y,w){return y*w},1),YG=Dp("round"),QG=bu(function(y,w){return y-w},0);function XG(y){return y&&y.length?tp(y,Ze):0}function JG(y,w){return y&&y.length?tp(y,qt(w,2)):0}return fe.after=x_,fe.ary=I1,fe.assign=A_,fe.assignIn=X1,fe.assignInWith=im,fe.assignWith=E_,fe.at=P_,fe.before=Sh,fe.bind=xl,fe.bindAll=J,fe.bindKey=Qp,fe.castArray=w_,fe.chain=Du,fe.chunk=d_,fe.compact=l1,fe.concat=c1,fe.cond=pe,fe.conforms=Oe,fe.constant=Je,fe.countBy=Ou,fe.create=D_,fe.curry=_h,fe.curryRight=Xp,fe.debounce=vl,fe.defaults=O_,fe.defaultsDeep=J1,fe.defer=Ks,fe.delay=Ch,fe.difference=Dr,fe.differenceBy=si,fe.differenceWith=Co,fe.drop=u1,fe.dropRight=d1,fe.dropRightWhile=h_,fe.dropWhile=ox,fe.fill=Ci,fe.filter=N1,fe.flatMap=jx,fe.flatMapDeep=m_,fe.flatMapDepth=g_,fe.flatten=oi,fe.flattenDeep=h1,fe.flattenDepth=hl,fe.flip=v_,fe.flow=pt,fe.flowRight=tt,fe.fromPairs=fc,fe.functions=ej,fe.functionsIn=sm,fe.groupBy=C1,fe.initial=ux,fe.intersection=Ws,fe.intersectionBy=f1,fe.intersectionWith=Su,fe.invert=tj,fe.invertBy=nj,fe.invokeMap=Wp,fe.iteratee=Kt,fe.keyBy=T1,fe.keys=ua,fe.keysIn=ga,fe.map=Nh,fe.mapKeys=R_,fe.mapValues=L_,fe.matches=Wt,fe.matchesProperty=cr,fe.memoize=Th,fe.merge=F_,fe.mergeWith=Mh,fe.method=We,fe.methodOf=qe,fe.mixin=Ye,fe.negate=kh,fe.nthArg=bn,fe.omit=om,fe.omitBy=Mx,fe.once=R1,fe.orderBy=k1,fe.over=Bt,fe.overArgs=L1,fe.overEvery=Yt,fe.overSome=ya,fe.partial=Sx,fe.partialRight=Jp,fe.partition=A1,fe.pick=$_,fe.pickBy=Bu,fe.property=zn,fe.propertyOf=Sl,fe.pull=m1,fe.pullAll=Cu,fe.pullAllBy=g1,fe.pullAllWith=Hp,fe.pullAt=y1,fe.range=G_,fe.rangeRight=PG,fe.rearg=F1,fe.reject=Kp,fe.remove=f_,fe.rest=$1,fe.reverse=dx,fe.sampleSize=O1,fe.set=rj,fe.setWith=aj,fe.shuffle=yr,fe.slice=rr,fe.sortBy=M1,fe.sortedUniq=Tu,fe.sortedUniqBy=hx,fe.split=hm,fe.spread=b_,fe.tail=ko,fe.take=Hr,fe.takeRight=pl,fe.takeRightWhile=pc,fe.takeWhile=fx,fe.tap=xx,fe.throttle=_x,fe.thru=Ma,fe.toArray=Ai,fe.toPairs=Ix,fe.toPairsIn=Rx,fe.toPath=RG,fe.toPlainObject=Q1,fe.transform=Lx,fe.unary=Cx,fe.union=es,fe.unionBy=ku,fe.unionWith=jh,fe.uniq=li,fe.uniqBy=px,fe.uniqWith=mx,fe.unset=ij,fe.unzip=Au,fe.unzipWith=wh,fe.update=lm,fe.updateWith=z_,fe.values=zu,fe.valuesIn=Fx,fe.without=ml,fe.words=A,fe.wrap=j_,fe.xor=Sa,fe.xorBy=gl,fe.xorWith=Eu,fe.zip=Pu,fe.zipObject=gx,fe.zipObjectDeep=yx,fe.zipWith=x1,fe.entries=Ix,fe.entriesIn=Rx,fe.extend=X1,fe.extendWith=im,Ye(fe,fe),fe.add=FG,fe.attempt=L,fe.camelCase=sj,fe.capitalize=um,fe.ceil=$G,fe.clamp=$x,fe.clone=Ah,fe.cloneDeep=B1,fe.cloneDeepWith=Cn,fe.cloneWith=N_,fe.conformsTo=Tx,fe.deburr=Eo,fe.defaultTo=ut,fe.divide=BG,fe.endsWith=jl,fe.eq=ci,fe.escape=wl,fe.escapeRegExp=Ih,fe.every=w1,fe.find=S1,fe.findIndex=Zi,fe.findKey=Lu,fe.findLast=bx,fe.findLastIndex=lx,fe.findLastKey=Ph,fe.floor=zG,fe.forEach=_1,fe.forEachRight=wx,fe.forIn=Z1,fe.forInRight=M_,fe.forOwn=Fu,fe.forOwnRight=Dh,fe.get=Oh,fe.gt=kx,fe.gte=z1,fe.has=Ox,fe.hasIn=$u,fe.head=To,fe.identity=Ze,fe.includes=Mu,fe.indexOf=cx,fe.inRange=cm,fe.invoke=I_,fe.isArguments=Ao,fe.isArray=on,fe.isArrayBuffer=Zp,fe.isArrayLike=la,fe.isArrayLikeObject=Gr,fe.isBoolean=S_,fe.isBuffer=bl,fe.isDate=q1,fe.isElement=U1,fe.isEmpty=em,fe.isEqual=lr,fe.isEqualWith=Ax,fe.isError=ca,fe.isFinite=__,fe.isFunction=js,fe.isInteger=tm,fe.isLength=mc,fe.isMap=nm,fe.isMatch=Ex,fe.isMatchWith=C_,fe.isNaN=V1,fe.isNative=T_,fe.isNil=k_,fe.isNull=H1,fe.isNumber=G1,fe.isObject=Or,fe.isObjectLike=Fr,fe.isPlainObject=ts,fe.isRegExp=rm,fe.isSafeInteger=Px,fe.isSet=W1,fe.isString=am,fe.isSymbol=Wa,fe.isTypedArray=Iu,fe.isUndefined=ws,fe.isWeakMap=Dx,fe.isWeakSet=K1,fe.join=bh,fe.kebabCase=Rh,fe.last=Oa,fe.lastIndexOf=_u,fe.lowerCase=Nl,fe.lowerFirst=q_,fe.lt=Y1,fe.lte=Eh,fe.max=qG,fe.maxBy=UG,fe.mean=VG,fe.meanBy=HG,fe.min=GG,fe.minBy=WG,fe.stubArray=W_,fe.stubFalse=K_,fe.stubObject=DG,fe.stubString=OG,fe.stubTrue=MG,fe.multiply=KG,fe.nth=p1,fe.noConflict=ht,fe.noop=Mt,fe.now=Yp,fe.pad=oj,fe.padEnd=Lh,fe.padStart=U_,fe.parseInt=lj,fe.random=Bx,fe.reduce=E1,fe.reduceRight=P1,fe.repeat=dm,fe.replace=cj,fe.result=B_,fe.round=YG,fe.runInContext=He,fe.sample=D1,fe.size=Nx,fe.snakeCase=V_,fe.some=y_,fe.sortedIndex=br,fe.sortedIndexBy=_n,fe.sortedIndexOf=Fn,fe.sortedLastIndex=ar,fe.sortedLastIndexBy=Ti,fe.sortedLastIndexOf=fl,fe.startCase=fm,fe.startsWith=uj,fe.subtract=QG,fe.sum=XG,fe.sumBy=JG,fe.template=Fh,fe.times=IG,fe.toFinite=Ys,fe.toInteger=un,fe.toLength=Qs,fe.toLower=zx,fe.toNumber=ns,fe.toSafeInteger=Ru,fe.toString=Xn,fe.toUpper=pm,fe.trim=dj,fe.trimEnd=H_,fe.trimStart=mm,fe.truncate=u,fe.unescape=h,fe.uniqueId=LG,fe.upperCase=m,fe.upperFirst=N,fe.each=_1,fe.eachRight=wx,fe.first=To,Ye(fe,function(){var y={};return Da(fe,function(w,M){Qn.call(fe.prototype,M)||(y[M]=w)}),y}(),{chain:!1}),fe.VERSION=a,Vi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){fe[y].placeholder=fe}),Vi(["drop","take"],function(y,w){vn.prototype[y]=function(M){M=M===n?1:Sr(un(M),0);var U=this.__filtered__&&!w?new vn(this):this.clone();return U.__filtered__?U.__takeCount__=Er(M,U.__takeCount__):U.__views__.push({size:Er(M,ce),type:y+(U.__dir__<0?"Right":"")}),U},vn.prototype[y+"Right"]=function(M){return this.reverse()[y](M).reverse()}}),Vi(["filter","map","takeWhile"],function(y,w){var M=w+1,U=M==K||M==B;vn.prototype[y]=function(re){var ve=this.clone();return ve.__iteratees__.push({iteratee:qt(re,3),type:M}),ve.__filtered__=ve.__filtered__||U,ve}}),Vi(["head","last"],function(y,w){var M="take"+(w?"Right":"");vn.prototype[y]=function(){return this[M](1).value()[0]}}),Vi(["initial","tail"],function(y,w){var M="drop"+(w?"":"Right");vn.prototype[y]=function(){return this.__filtered__?new vn(this):this[M](1)}}),vn.prototype.compact=function(){return this.filter(Ze)},vn.prototype.find=function(y){return this.filter(y).head()},vn.prototype.findLast=function(y){return this.reverse().find(y)},vn.prototype.invokeMap=mn(function(y,w){return typeof y=="function"?new vn(this):this.map(function(M){return ic(M,y,w)})}),vn.prototype.reject=function(y){return this.filter(kh(qt(y)))},vn.prototype.slice=function(y,w){y=un(y);var M=this;return M.__filtered__&&(y>0||w<0)?new vn(M):(y<0?M=M.takeRight(-y):y&&(M=M.drop(y)),w!==n&&(w=un(w),M=w<0?M.dropRight(-w):M.take(w-y)),M)},vn.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},vn.prototype.toArray=function(){return this.take(ce)},Da(vn.prototype,function(y,w){var M=/^(?:filter|find|map|reject)|While$/.test(w),U=/^(?:head|last)$/.test(w),re=fe[U?"take"+(w=="last"?"Right":""):w],ve=U||/^find/.test(w);re&&(fe.prototype[w]=function(){var Pe=this.__wrapped__,Be=U?[1]:arguments,Ke=Pe instanceof vn,ft=Be[0],mt=Ke||on(Pe),xt=function(Dn){var qn=re.apply(fe,po([Dn],Be));return U&&Et?qn[0]:qn};mt&&M&&typeof ft=="function"&&ft.length!=1&&(Ke=mt=!1);var Et=this.__chain__,$t=!!this.__actions__.length,en=ve&&!Et,jn=Ke&&!$t;if(!ve&&mt){Pe=jn?Pe:new vn(this);var tn=y.apply(Pe,Be);return tn.__actions__.push({func:Ma,args:[xt],thisArg:n}),new ti(tn,Et)}return en&&jn?y.apply(this,Be):(tn=this.thru(xt),en?U?tn.value()[0]:tn.value():tn)})}),Vi(["pop","push","shift","sort","splice","unshift"],function(y){var w=op[y],M=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",U=/^(?:pop|shift)$/.test(y);fe.prototype[y]=function(){var re=arguments;if(U&&!this.__chain__){var ve=this.value();return w.apply(on(ve)?ve:[],re)}return this[M](function(Pe){return w.apply(on(Pe)?Pe:[],re)})}}),Da(vn.prototype,function(y,w){var M=fe[w];if(M){var U=M.name+"";Qn.call(Yi,U)||(Yi[U]=[]),Yi[U].push({name:w,func:M})}}),Yi[Vr(n,_).name]=[{name:"wrapper",func:n}],vn.prototype.clone=Vd,vn.prototype.reverse=dp,vn.prototype.value=ec,fe.prototype.at=v1,fe.prototype.chain=ki,fe.prototype.commit=b1,fe.prototype.next=j1,fe.prototype.plant=yl,fe.prototype.reverse=Gp,fe.prototype.toJSON=fe.prototype.valueOf=fe.prototype.value=vx,fe.prototype.first=fe.prototype.head,Ql&&(fe.prototype[Ql]=p_),fe},tl=ou();Xo?((Xo.exports=tl)._=tl,tu._=tl):Qr._=tl}).call(Bme)}(pv,pv.exports)),pv.exports}var y9=zme();class qme{constructor(e){jr(this,"sampleRate",24e3);jr(this,"bufferSize",7680);jr(this,"audioQueue",[]);jr(this,"isPlaying",!1);jr(this,"isStreamComplete",!1);jr(this,"checkInterval",null);jr(this,"scheduledTime",0);jr(this,"initialBufferTime",.1);jr(this,"gainNode");jr(this,"source");jr(this,"endOfQueueAudioSource",null);jr(this,"onComplete",()=>{});this.context=e,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(e,n,a){let i=Aj.get(this.context);if(i&&i[e])return i[e].handlers.push(a),Promise.resolve(this);i||(Aj.set(this.context,{}),i=Aj.get(this.context)),i[e]={handlers:[a]};const s=tP(e,n);await this.context.audioWorklet.addModule(s);const o=new AudioWorkletNode(this.context,e);return i[e].node=o,this}_processPCM16Chunk(e){const n=new Float32Array(e.length/2),a=new DataView(e.buffer);for(let i=0;i<e.length/2;i++)try{const s=a.getInt16(i*2,!0);n[i]=s/32768}catch(s){console.error(s)}return n}addPCM16(e){this.isStreamComplete=!1;let n=this._processPCM16Chunk(e);for(;n.length>=this.bufferSize;){const a=n.slice(0,this.bufferSize);this.audioQueue.push(a),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const n=this.context.createBuffer(1,e.length,this.sampleRate);return n.getChannelData(0).set(e),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),a=this.createAudioBuffer(n),i=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=i,i.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===i&&(this.endOfQueueAudioSource=null,this.onComplete())}),i.buffer=a,i.connect(this.gainNode);const s=Aj.get(this.context);s&&Object.entries(s).forEach(([,l])=>{const{node:c,handlers:d}=l;c&&(i.connect(c),c.port.onmessage=function(f){d.forEach(p=>{p.call(c.port,f)})},c.connect(this.context.destination))});const o=Math.max(this.scheduledTime,this.context.currentTime);i.start(o),this.scheduledTime=o+a.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function Ume(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"screen",start:async()=>{const l=await navigator.mediaDevices.getDisplayMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}function Vme(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"webcam",start:async()=>{const l=await navigator.mediaDevices.getUserMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}class Hme extends m9{constructor(n){super();jr(this,"client");jr(this,"_status","disconnected");jr(this,"_session",null);jr(this,"_model",null);jr(this,"config",null);this.client=new wU(n),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(n,a){const i={date:new Date,type:n,message:a};this.emit("log",i)}async connect(n,a){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=a,this._model=n;const i={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:n,config:a,callbacks:i})}catch(s){return console.error("Error connecting to GenAI Live:",s),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var n;return this.session?((n=this.session)==null||n.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(n){this.log("server.error",n.message),this.emit("error",n)}onclose(n){this.log("server.close",`disconnected ${n.reason?`with reason: ${n.reason}`:""}`),this.emit("close",n)}async onmessage(n){var a;if(n.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(n.toolCall){this.log("server.toolCall",n),this.emit("toolcall",n.toolCall);return}if(n.toolCallCancellation){this.log("server.toolCallCancellation",n),this.emit("toolcallcancellation",n.toolCallCancellation);return}if(n.serverContent){const{serverContent:i}=n;if("interrupted"in i){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in i&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in i){let s=((a=i.modelTurn)==null?void 0:a.parts)||[];const o=s.filter(f=>{var p;return f.inlineData&&((p=f.inlineData.mimeType)==null?void 0:p.startsWith("audio/pcm"))}),l=o.map(f=>{var p;return(p=f.inlineData)==null?void 0:p.data}),c=y9.difference(s,o);if(l.forEach(f=>{if(f){const p=Ome(f);this.emit("audio",p),this.log("server.audio",`buffer (${p.byteLength})`)}}),!c.length)return;s=c;const d={modelTurn:{parts:s}};this.emit("content",d),this.log("server.content",n)}}else console.log("received unmatched message",n)}sendRealtimeInput(n){var o;let a=!1,i=!1;for(const l of n)if((o=this.session)==null||o.sendRealtimeInput({media:l}),l.mimeType.includes("audio")&&(a=!0),l.mimeType.includes("image")&&(i=!0),a&&i)break;const s=a&&i?"audio + video":a?"audio":i?"video":"unknown";this.log("client.realtimeInput",s)}sendToolResponse(n){var a;n.functionResponses&&n.functionResponses.length&&((a=this.session)==null||a.sendToolResponse({functionResponses:n.functionResponses}),this.log("client.toolResponse",n))}send(n,a=!0){var i;(i=this.session)==null||i.sendClientContent({turns:n,turnComplete:a}),this.log("client.send",{turns:Array.isArray(n)?n:[n],turnComplete:a})}}function Gme(t){const e=v.useMemo(()=>new Hme(t),[t]),n=v.useRef(null),[a,i]=v.useState("models/gemini-2.5-flash-live-preview"),[s,o]=v.useState({}),[l,c]=v.useState(!1),[d,f]=v.useState(0),p=null;v.useEffect(()=>{n.current||f9({id:"audio-out"}).then(b=>{n.current=new qme(b),n.current.addWorklet("vumeter-out",p9,j=>{f(j.data.volume)}).then(()=>{})})},[n]),v.useEffect(()=>{const b=()=>{c(!0)},j=()=>{c(!1)},S=E=>{console.error("error",E)},_=()=>{var E;return(E=n.current)==null?void 0:E.stop()},T=E=>{var k;return(k=n.current)==null?void 0:k.addPCM16(new Uint8Array(E))},C=()=>{};return e.on("error",S).on("open",b).on("close",j).on("interrupted",_).on("audio",T).on("content",C),()=>{e.off("error",S).off("open",b).off("close",j).off("interrupted",_).off("audio",T).off("content",C).disconnect()}},[e]);const g=v.useCallback(async()=>{if(!s)throw new Error("config has not been set");e.disconnect(),await e.connect(a,s)},[e,s,a]),x=v.useCallback(async()=>{e.disconnect(),c(!1)},[c,e]);return{client:e,config:s,setConfig:o,model:a,setModel:i,connected:l,connect:g,disconnect:x,volume:d,aiSummary:p}}const x9=v.createContext(void 0),iS=({options:t,children:e})=>{const n=Gme(t);return r.jsx(x9.Provider,{value:n,children:e})},vd=()=>{const t=v.useContext(x9);if(!t)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return t};function Wme(){const{config:t,setConfig:e}=vd(),[n,a]=v.useState({value:"audio",label:"audio"}),i=v.useCallback(s=>{e({...t,responseModalities:[s==="audio"?hd.AUDIO:hd.TEXT]})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(h9,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:n,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:s=>{a(s),s&&(s.value==="audio"||s.value==="text")&&i(s.value)}})]})}const c3=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function Kme(){const{config:t,setConfig:e}=vd();v.useEffect(()=>{var l,c,d;const s=((d=(c=(l=t.speechConfig)==null?void 0:l.voiceConfig)==null?void 0:c.prebuiltVoiceConfig)==null?void 0:d.voiceName)||"Atari02";a({value:s,label:s})},[t]);const[n,a]=v.useState(c3[5]),i=v.useCallback(s=>{e({...t,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(h9,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:n,defaultValue:n,options:c3,onChange:s=>{a(s),s&&i(s.value)}})]})}function Yme(){const[t,e]=v.useState(!1),{config:n,setConfig:a,connected:i}=vd(),s=v.useMemo(()=>Array.isArray(n.tools)?n.tools.filter(d=>Array.isArray(d.functionDeclarations)).map(d=>d.functionDeclarations).filter(d=>!!d).flat():[],[n]),o=v.useMemo(()=>{var d;return n.systemInstruction?typeof n.systemInstruction=="string"?n.systemInstruction:Array.isArray(n.systemInstruction)?n.systemInstruction.map(f=>typeof f=="string"?f:f.text).join(`
`):typeof n.systemInstruction=="object"&&"parts"in n.systemInstruction&&((d=n.systemInstruction.parts)==null?void 0:d.map(f=>f.text).join(`
`))||"":""},[n]),l=v.useCallback(d=>{const f={...n,systemInstruction:d.target.value};a(f)},[n,a]),c=v.useCallback((d,f)=>{var g;const p={...n,tools:((g=n.tools)==null?void 0:g.map(x=>{const b=x;return Array.isArray(b.functionDeclarations)?{...x,functionDeclarations:b.functionDeclarations.map(j=>j.name===d?{...j,description:f}:j)}:x}))||[]};a(p)},[n,a]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>e(!t),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:t?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${i?"disabled":""}`,children:[i&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(Wme,{}),r.jsx(Kme,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:l,value:o}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:s.map((d,f)=>{var p;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:d.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((p=d.parameters)==null?void 0:p.properties)||{}).map((g,x)=>r.jsx("span",{children:g},x))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:d.description,onBlur:g=>c(d.name,g.target.value)},`fd-${d.description}`)]},`function-${f}`)})})})]})})]})}const u3=v.memo(({isStreaming:t,onIcon:e,offIcon:n,start:a,stop:i})=>t?r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:e})}):r.jsx("button",{className:"action-button",onClick:a,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}));function Qme({videoRef:t,children:e,onVideoStreamChange:n=()=>{},supportsVideo:a,enableEditingSettings:i}){const s=[Vme(),Ume()],[o,l]=v.useState(null),[c,d]=s,[f,p]=v.useState(0),[g]=v.useState(()=>new g9),[x,b]=v.useState(!1),j=v.useRef(null),S=v.useRef(null),{client:_,connected:T,connect:C,disconnect:E,volume:k}=vd();v.useEffect(()=>{!T&&S.current&&S.current.focus()},[T]),v.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(f*200,8))}px`)},[f]),v.useEffect(()=>{const I=R=>{_.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:R}])};return T&&!x&&g?g.on("data",I).on("volume",p).start():g.stop(),()=>{g.off("data",I).off("volume",p)}},[T,_,x,g]),v.useEffect(()=>{t.current&&(t.current.srcObject=o);let I=-1;function R(){const z=t.current,q=j.current;if(!z||!q)return;const F=q.getContext("2d");if(q.width=z.videoWidth*.25,q.height=z.videoHeight*.25,q.width+q.height>0){F.drawImage(z,0,0,q.width,q.height);const V=q.toDataURL("image/jpeg",1),H=V.slice(V.indexOf(",")+1,1/0);_.sendRealtimeInput([{mimeType:"image/jpeg",data:H}])}T&&(I=window.setTimeout(R,1e3/.5))}return T&&o!==null&&requestAnimationFrame(R),()=>{clearTimeout(I)}},[T,o,_,t]);const P=I=>async()=>{if(I){const R=await I.start();l(R),n(R)}else l(null),n(null);s.filter(R=>R!==I).forEach(R=>R.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:j}),r.jsxs("nav",{className:ad("actions-nav",{disabled:!T}),children:[r.jsx("button",{className:ad("action-button mic-button",{recording:!x&&T}),onClick:()=>b(!x),children:x?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx($me,{volume:k,active:T,hover:!1})}),a&&r.jsxs(r.Fragment,{children:[r.jsx(u3,{isStreaming:d.isStreaming,start:P(d),stop:P(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(u3,{isStreaming:c.isStreaming,start:P(c),stop:P(),onIcon:"videocam_off",offIcon:"videocam"})]}),e]}),r.jsxs("div",{className:ad("connection-container",{connected:T}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:S,className:ad("action-button connect-toggle",{connected:T}),onClick:T?E:C,children:r.jsx("span",{className:"material-symbols-outlined filled",children:T?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),i?r.jsx(Yme,{}):""]})}const d3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:og.OBJECT,properties:{summary:{type:og.STRING,description:"The summary of the patient's case."}},required:["summary"]}},Xme=({patientData:t,tokenNumber:e})=>{const[n,a]=v.useState(""),{client:i,setConfig:s,setModel:o}=vd();return v.useEffect(()=>{o("models/gemini-2.5-flash-live-preview"),s({responseModalities:[hd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[d3]}]})},[s,o]),v.useEffect(()=>{const l=c=>{if(!c.functionCalls)return;const d=c.functionCalls.find(f=>f.name===d3.name);if(d){const f=d.args.summary;a(f)}c.functionCalls.length&&setTimeout(()=>{var f;return i.sendToolResponse({functionResponses:(f=c.functionCalls)==null?void 0:f.map(p=>({response:{output:{success:!0}},id:p.id,name:p.name}))})},200)};return i.on("toolcall",l),()=>{i.off("toolcall",l)}},[i]),v.useEffect(()=>{if(n){const l=encodeURIComponent(n);e?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${e}&caseDetails=${l}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${l}`}},[n,e]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),e&&r.jsxs("h2",{children:["Token Number: ",e]}),t&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(t,null,2)})]}),n&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:n})]})]})},h3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function Jme(){if(!NU())return console.warn("No auth token found, using default Live API key."),h3;try{const e=await le("/api/clinics/gemini-api-key");if(e.ok){const a=(await e.json()).geminiApiKey;if(a)return a}}catch(e){console.error("Failed to fetch clinic-specific Live API key:",e)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),h3}function Zme(){const t=v.useRef(null),[e,n]=v.useState(null),[a,i]=v.useState(null);return v.useEffect(()=>{(async()=>{try{const o=await Jme();i({apiKey:o})}catch(o){console.error("Error setting Live API options:",o)}})()},[]),a?r.jsx("div",{className:"App",children:r.jsx(iS,{options:a,children:r.jsx(ege,{videoRef:t,setVideoStream:n,videoStream:e})})}):r.jsx("div",{children:"Loading Live API settings..."})}const ege=({videoRef:t,setVideoStream:e,videoStream:n})=>{const[a,i]=v.useState(null),[s,o]=v.useState(null),{connected:l,client:c,connect:d,config:f,model:p}=vd(),[g,x]=v.useState(""),b=v.useRef(null),[j,S]=v.useState(!1);v.useEffect(()=>{const T=window.matchMedia("(prefers-color-scheme: dark)"),C=E=>{document.documentElement.setAttribute("data-theme",E.matches?"dark":"light")};return C(T),T.addEventListener("change",C),()=>T.removeEventListener("change",C)},[]),v.useEffect(()=>{const T=new URLSearchParams(window.location.search),C={};for(const[E,k]of T.entries())E==="token_number"?o(k):C[E]=k;i(C)},[]),v.useEffect(()=>{Object.keys(f).length>0&&p&&d()},[d,f,p]),v.useEffect(()=>{if(l&&a&&!j){const T=JSON.stringify(a,null,2);c.send([{text:T}]),x(""),S(!0)}},[l,a,c,j]),v.useEffect(()=>{a&&x(JSON.stringify(a,null,2))},[a]);const _=()=>{c.send([{text:g}]),x(""),b.current&&(b.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx(Xme,{patientData:a,tokenNumber:s}),r.jsx("video",{className:ad("stream",{hidden:!t.current||!n}),ref:t,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:ad("input-container",{disabled:!l}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:b,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),T.stopPropagation(),_())},onChange:T=>x(T.target.value),value:g}),r.jsx("span",{className:ad("input-content-placeholder",{hidden:g.length}),children:"Typesomething..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:_,children:"send"})]})}),r.jsx(Qme,{videoRef:t,supportsVideo:!0,onVideoStreamChange:e,enableEditingSettings:!0})]})})},f3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",v9=({isActive:t,volume:e,size:n="normal"})=>{const a=t&&e>.01,i=a?Math.max(3,Math.min(12,3+e*30)):3,s=n==="mini";return r.jsx("div",{className:`ai-avatar-container ${t?"active":""} ${s?"mini":""}`,children:r.jsxs("svg",{viewBox:"0 0 200 200",className:"ai-avatar-svg",children:[r.jsxs("defs",{children:[r.jsxs("radialGradient",{id:`avatarGlow${s?"Mini":""}`,cx:"50%",cy:"50%",r:"50%",children:[r.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:a?.5:t?.3:.1}),r.jsx("stop",{offset:"100%",stopColor:"#059669",stopOpacity:"0"})]}),r.jsxs("linearGradient",{id:`hairGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#1e1b4b"}),r.jsx("stop",{offset:"100%",stopColor:"#312e81"})]}),r.jsxs("linearGradient",{id:`skinGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd5ce"}),r.jsx("stop",{offset:"100%",stopColor:"#f9bbb2"})]}),r.jsxs("linearGradient",{id:`coatGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),r.jsx("stop",{offset:"100%",stopColor:"#f1f5f9"})]}),r.jsxs("linearGradient",{id:`scrubsGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#0ea5e9"}),r.jsx("stop",{offset:"100%",stopColor:"#0284c7"})]})]}),r.jsx("circle",{cx:"100",cy:"100",r:"95",fill:`url(#avatarGlow${s?"Mini":""})`,className:"avatar-glow"}),r.jsx("circle",{cx:"100",cy:"100",r:"85",fill:"#ecfdf5",stroke:"#a7f3d0",strokeWidth:"2"}),r.jsx("ellipse",{cx:"100",cy:"185",rx:"55",ry:"35",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#e2e8f0",strokeWidth:"1"}),r.jsx("path",{d:"M75 155 L85 175 L90 155",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#cbd5e1",strokeWidth:"1"}),r.jsx("path",{d:"M125 155 L115 175 L110 155",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#cbd5e1",strokeWidth:"1"}),r.jsx("path",{d:"M90 155 L100 165 L110 155 L110 175 L90 175 Z",fill:`url(#scrubsGradient${s?"Mini":""})`}),r.jsx("path",{d:"M70 165 Q65 155 75 145",stroke:"#374151",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M130 165 Q135 155 125 145",stroke:"#374151",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),r.jsx("circle",{cx:"70",cy:"168",r:"5",fill:"#374151"}),r.jsx("circle",{cx:"70",cy:"168",r:"3",fill:"#6b7280"}),r.jsx("circle",{cx:"130",cy:"168",r:"5",fill:"#374151"}),r.jsx("circle",{cx:"130",cy:"168",r:"3",fill:"#6b7280"}),r.jsx("path",{d:"M77 145 Q85 140 90 145",stroke:"#374151",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M123 145 Q115 140 110 145",stroke:"#374151",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"100",cy:"70",rx:"42",ry:"35",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("rect",{x:"90",y:"130",width:"20",height:"25",fill:`url(#skinGradient${s?"Mini":""})`,rx:"5"}),r.jsx("ellipse",{cx:"100",cy:"92",rx:"35",ry:"38",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("path",{d:"M58 75 Q60 90 65 95 L68 85 Q65 75 58 75",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M142 75 Q140 90 135 95 L132 85 Q135 75 142 75",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M60 70 Q80 50 115 55 Q135 60 140 70 Q120 45 80 45 Q60 55 60 70",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M78 80 Q84 78 90 80",stroke:"#3d3d5c",strokeWidth:"1.2",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M110 80 Q116 78 122 80",stroke:"#3d3d5c",strokeWidth:"1.2",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"84",cy:"90",rx:"9",ry:"10",fill:"white"}),r.jsx("ellipse",{cx:"116",cy:"90",rx:"9",ry:"10",fill:"white"}),r.jsx("circle",{cx:"84",cy:"91",r:"6",fill:"#2d4a3e",children:r.jsx("animate",{attributeName:"cy",values:"91;90;91",dur:"4s",repeatCount:"indefinite"})}),r.jsx("circle",{cx:"116",cy:"91",r:"6",fill:"#2d4a3e",children:r.jsx("animate",{attributeName:"cy",values:"91;90;91",dur:"4s",repeatCount:"indefinite"})}),r.jsx("circle",{cx:"84",cy:"91",r:"3",fill:"#1a1a2e"}),r.jsx("circle",{cx:"116",cy:"91",r:"3",fill:"#1a1a2e"}),r.jsx("ellipse",{cx:"86",cy:"88",rx:"2.5",ry:"3",fill:"white"}),r.jsx("ellipse",{cx:"118",cy:"88",rx:"2.5",ry:"3",fill:"white"}),r.jsx("circle",{cx:"82",cy:"93",r:"1",fill:"white",opacity:"0.7"}),r.jsx("circle",{cx:"114",cy:"93",r:"1",fill:"white",opacity:"0.7"}),r.jsx("ellipse",{cx:"70",cy:"102",rx:"7",ry:"4",fill:"#ffb5b5",opacity:"0.5"}),r.jsx("ellipse",{cx:"130",cy:"102",rx:"7",ry:"4",fill:"#ffb5b5",opacity:"0.5"}),r.jsx("path",{d:"M100 97 L99 102",stroke:"#daa89b",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"100",cy:"112",rx:a?5:6,ry:i,fill:"#d4726a"}),!a&&r.jsx("path",{d:"M94 110 Q100 116 106 110",stroke:"#d4726a",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"63",cy:"90",rx:"4",ry:"6",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("ellipse",{cx:"137",cy:"90",rx:"4",ry:"6",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("circle",{cx:"135",cy:"165",r:"8",fill:"#ef4444"}),r.jsx("rect",{x:"133",y:"160",width:"4",height:"10",fill:"white",rx:"1"}),r.jsx("rect",{x:"130",y:"163",width:"10",height:"4",fill:"white",rx:"1"}),a&&r.jsxs(r.Fragment,{children:[r.jsxs("circle",{cx:"100",cy:"100",r:"90",stroke:"#10b981",strokeWidth:"2",fill:"none",opacity:"0.6",children:[r.jsx("animate",{attributeName:"r",values:"90;95;90",dur:"1.5s",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"opacity",values:"0.6;0.2;0.6",dur:"1.5s",repeatCount:"indefinite"})]}),r.jsxs("circle",{cx:"100",cy:"100",r:"95",stroke:"#34d399",strokeWidth:"1.5",fill:"none",opacity:"0.4",children:[r.jsx("animate",{attributeName:"r",values:"95;100;95",dur:"1.5s",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"opacity",values:"0.4;0.1;0.4",dur:"1.5s",repeatCount:"indefinite"})]})]})]})})},tge=v.forwardRef(({videoRef:t,supportsVideo:e,onVideoStreamChange:n,textInput:a,onSubmitTextInput:i},s)=>{var P;const{connected:o,connect:l,disconnect:c,client:d,volume:f}=vd(),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_]=v.useState(()=>new g9),T=async()=>{o?await c():(await l(),a.trim()&&i())};v.useEffect(()=>{const I=R=>{d.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:R}])};return o&&!p?_.on("data",I).start():_.stop(),()=>{_.off("data",I),_.stop()}},[o,d,p,_]);const C=v.useCallback(async()=>{if(x)k==null||k.getTracks().forEach(I=>I.stop()),n(null),b(!1);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),b(!0)}catch(I){console.error("Error accessing webcam:",I),b(!1)}},[x,n,t]),E=v.useCallback(async()=>{if(j)k==null||k.getTracks().forEach(I=>I.stop()),n(null),S(!1);else try{const I=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),S(!0)}catch(I){console.error("Error accessing screen share:",I),S(!1)}},[j,n,t]),k=(P=t.current)==null?void 0:P.srcObject;return v.useEffect(()=>()=>{k&&k.getTracks().forEach(I=>I.stop())},[k]),v.useImperativeHandle(s,()=>({handleConnect:T})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>g(!p),disabled:!o,className:`live-api-control-button ${o&&!p?"mic-active":"mic-inactive"}`,"aria-label":p?"Unmute microphone":"Mute microphone",children:p?r.jsx(nJ,{className:"w-5 h-5"}):r.jsx(qN,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-mini-avatar-container",children:r.jsx(v9,{isActive:o,volume:f,size:"mini"})}),e&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:E,disabled:!o,className:`live-api-control-button ${j?"video-active":"video-inactive"}`,"aria-label":j?"Stop screen share":"Start screen share",children:r.jsx(oJ,{className:"w-5 h-5"})}),r.jsx("button",{onClick:C,disabled:!o,className:`live-api-control-button ${x?"video-active":"video-inactive"}`,"aria-label":x?"Turn off webcam":"Turn on webcam",children:r.jsx(hZ,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${o?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:o?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:T,className:`live-api-connect-button ${o?"connected":"disconnected"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(gJ,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Xz,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),nge=({tokenNumber:t,aiSummary:e,clinicName:n,isActive:a,volume:i})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-avatar-section",children:[r.jsx(v9,{isActive:a,volume:i}),r.jsx("div",{className:"avatar-status-text",children:a?"Listening...":"Ready to assist"})]}),r.jsxs("div",{className:"hospital-reception-info-section",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:n.charAt(0)})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"hospital-reception-title",children:[n," AI"]}),r.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",n," Reception Assistant"]})]})]}),t&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:t})]}),e&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:e})]})]})]}),p3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:og.OBJECT,properties:{summary:{type:og.STRING,description:"The summary of the patient's case."}},required:["summary"]}},rge=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:i,voiceAiLanguage:s,lastMotionTimestamp:o,backgroundMode:l})=>{const c=v.useRef(null),d=v.useRef(null),[f,p]=v.useState(null),[g,x]=v.useState("hi"),{client:b,connected:j,setConfig:S,setModel:_,disconnect:T,connect:C,volume:E}=vd(),k=v.useRef(!1),P=v.useRef(Date.now()),I=v.useRef(!1);v.useEffect(()=>{k.current=j,j&&(P.current=Date.now(),I.current=!1)},[j]),v.useEffect(()=>{if(o){if(P.current=Date.now(),k.current)return;j||C()}},[o,C,j]),v.useEffect(()=>{if(!o||!j)return;const K=setInterval(()=>{const B=Date.now()-P.current;B>25e3&&B<3e4&&!I.current&&(I.current=!0,b.send([{text:"I'll be here if you need more help!"}])),B>3e4&&(console.log("No motion for 30s. Disconnecting session."),T(),t())},1e3);return()=>clearInterval(K)},[o,j,b,T,t]);const R=v.useMemo(()=>{let K=`Your job is to:

If patient details like name, age, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (Name, Age) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's Name and Age only. Do not ask for their phone number.

    You should guess the patient's sex based on their voice or appearance.

For every visit, collect the patient's history by asking questions.

CRITICAL WORKFLOW - DO NOT USE THE 'case_summary' TOOL YET.

Phase 1: History Collection (MANDATORY LOOP)
Once you have the basics, you MUST ask the patient about their complaints.
- Ask clarifying questions to understand the onset, duration, severity, and associated symptoms.
- DO NOT just accept a one-line complaint.
- Loop your questions until you are confident you have a complete medical history.

Phase 2: Billing Check Protocol
ONLY after you are confident you have the complete history, proceed to the Billing Check Protocol immediately:
1. Ask: 'Would you like to get the tests done?'
   - IF PATIENT SAYS YES: STOP questioning. Do NOT mention medications (they will get them after reports).
     Result -> Lab: Yes, Pharmacy: No.
   - IF PATIENT SAYS NO: Ask: 'Would you like to get the medications?'
     - IF YES: Result -> Lab: No, Pharmacy: Yes.
     - IF NO: Result -> Lab: No, Pharmacy: No.

Phase 3: Final Summary
Only AFTER establishing the billing preferences as per the logic above, you MUST call the 'case_summary' tool IMMEDIATELY.

CRITICAL INSTRUCTION: DO NOT output the summary as spoken text or thoughts. You MUST using the function call \`case_summary\`.

The 'case_summary' MUST be comprehensive and include:
- Patient Name, Age, Sex
- Medical History & Complaints
- Billing Preferences (e.g., 'Billing Preference: Lab - Yes, Pharmacy - No')

Do not call the tool multiple times. Wait until you have ALL the info, then generate the single final summary tool call. Do not say goodbye before calling the tool.`;e&&(K+=`

Patient Data: ${JSON.stringify(e,null,2)}`);const B={"en-US":"English","hi-IN":"Hindi","te-IN":"Telugu","bn-IN":"Bengali","mr-IN":"Marathi","ta-IN":"Tamil","gu-IN":"Gujarati","kn-IN":"Kannada","ml-IN":"Malayalam","pa-IN":"Punjabi","es-ES":"Spanish","fr-FR":"French","de-DE":"German","it-IT":"Italian","pt-PT":"Portuguese","ru-RU":"Russian","ja-JP":"Japanese","ko-KR":"Korean","zh-CN":"Chinese","ar-SA":"Arabic"}[s]||"English";return K+=` You should always speak in ${B}.`,s==="te-IN"&&(K+=" Dont write the telugu words in english."),{responseModalities:[hd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:K}]},tools:[{functionDeclarations:[p3]}]}},[e,s]);v.useEffect(()=>{if(_("models/gemini-2.5-flash-native-audio-preview-12-2025"),S(R),!o){const K=setTimeout(()=>{d.current&&!j&&d.current.handleConnect()},2e3);return()=>clearTimeout(K)}},[S,_,R,j,o]),v.useEffect(()=>()=>{j&&T()},[j,T]);const[z,q]=v.useState(null);v.useEffect(()=>{const K=W=>{if(!W.functionCalls)return;const B=W.functionCalls.find(G=>G.name===p3.name);if(B){const G=B.args.summary;q(G),a(G),setTimeout(()=>{T(),t()},1e3)}W.functionCalls.length&&setTimeout(()=>{var G;return b.sendToolResponse({functionResponses:(G=W.functionCalls)==null?void 0:G.map(ee=>({response:{output:{success:!0}},id:ee.id,name:ee.name}))})},200)};return b.on("toolcall",K),()=>{b.off("toolcall",K)}},[b,a]);const F=()=>{g.trim()&&(b.send([{text:g}]),x(""))},V=K=>{K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),F())},H=async()=>{q(null),a(null),x("hi"),j?(T(),setTimeout(()=>{C()},500)):C()};return r.jsx("div",{className:"live-api-modal-overlay",style:l?{opacity:0,pointerEvents:"none",position:"absolute",zIndex:-1}:{},children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:i.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:i}),r.jsxs("p",{className:"live-api-modal-subtitle",children:[i," Hospital Assistant"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:H,className:"live-api-modal-close-button",title:"Refresh Session","aria-label":"Refresh session",children:r.jsx(Jz,{className:"w-5 h-5"})}),r.jsx("button",{onClick:t,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx(Lt,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(nge,{patientData:e,tokenNumber:n,aiSummary:z,clinicName:i,isActive:j,volume:E}),f&&r.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:g,onChange:K=>x(K.target.value),onKeyDown:V,placeholder:"Type your message here...",disabled:!j,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:F,disabled:!j||!g.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx(UN,{className:"w-5 h-5"})})]})}),r.jsx(tge,{ref:d,videoRef:c,supportsVideo:!0,onVideoStreamChange:p,textInput:g,onSubmitTextInput:F})]})})]})})},sS=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,lastMotionTimestamp:i,backgroundMode:s})=>{const[o,l]=v.useState(null),[c,d]=v.useState("Newtons Ai"),[f,p]=v.useState("en-US"),[g,x]=v.useState(!0);if(v.useEffect(()=>{(async()=>{try{let S=null,_="Newtons Ai",T="en-US";try{const C=await le("/api/clinics/settings");if(C.ok){const E=await C.json();E.name&&E.name!==""&&(_=E.name),E.gemini_api_key&&E.gemini_api_key.trim()!==""&&(S=E.gemini_api_key.trim()),E.voice_ai_language&&(T=E.voice_ai_language)}}catch(C){console.warn("Failed to fetch clinic settings",C)}if(d(_),p(T),S)l(S);else{try{const C=await le("/api/global-settings/app_gemini_api_key");if(C.ok){const E=await C.json();if(E.value&&E.value.trim()!==""){l(E.value.trim());return}}}catch(C){console.warn("Failed to fetch global key fallback",C)}l(f3)}}catch(S){console.error("Unexpected error in getSettings:",S),l(f3)}finally{x(!1)}})()},[]),g)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsx("div",{className:"live-api-modal-header",style:{borderBottom:"none"},children:r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx(te,{variant:"circular",width:40,height:40}),r.jsxs("div",{style:{marginLeft:"12px"},children:[r.jsx(te,{width:120,height:24}),r.jsx(te,{width:180,height:14,style:{marginTop:"4px"}})]})]})}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx(te,{variant:"circular",width:64,height:64,style:{margin:"0 auto"}}),r.jsx(te,{width:200,height:32,style:{margin:"16px auto 8px"}}),r.jsx(te,{width:250,height:16,style:{margin:"0 auto"}})]}),r.jsxs("div",{className:"hospital-reception-token-card",style:{background:"transparent",boxShadow:"none"},children:[r.jsx(te,{width:140,height:20,style:{margin:"0 auto 8px"}}),r.jsx(te,{width:100,height:48,style:{margin:"0 auto"}})]})]})}),r.jsx("div",{className:"live-api-control-tray",style:{position:"relative"},children:r.jsx("div",{className:"live-api-control-tray-inner",style:{justifyContent:"center"},children:r.jsx("div",{className:"live-api-loading-text",children:"Initializing AI Assistant..."})})})]})});if(!o)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Error: API Key not available."})})});const b={apiKey:o};return r.jsx(iS,{options:b,children:r.jsx(rge,{onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:c,voiceAiLanguage:f,lastMotionTimestamp:i,backgroundMode:s})})},oS=()=>{const[t,e]=v.useState(null),[n,a]=v.useState(!0),[i,s]=v.useState(null),o=v.useCallback(async()=>{a(!0),s(null);try{const c=await le("/api/clinics/settings");if(!c.ok)throw new Error("Failed to fetch clinic settings");const d=await c.json();e(d)}catch(c){s(c instanceof Error?c.message:"An error occurred")}finally{a(!1)}},[]);v.useEffect(()=>{o()},[o]);const l=(t==null?void 0:t.custom_columns_config)||{};return{settings:t,customColumnsConfig:l,loading:n,error:i,refetch:o}},age="_overlay_79cew_5",ige="_overlayMinimized_79cew_55",sge="_modal_79cew_65",oge="_minimized_79cew_97",lge="_contentWrapper_79cew_113",cge="_exiting_79cew_161",uge="_header_79cew_183",dge="_inputWrapper_79cew_197",hge="_inputContainer_79cew_215",fge="_minimizedSearchIcon_79cew_273",pge="_input_79cew_197",mge="_controlsGroup_79cew_347",gge="_iconButton_79cew_373",yge="_sendButton_79cew_413",xge="_dragBar_79cew_459",vge="_dragBarTitle_79cew_489",bge="_dragBarControls_79cew_519",jge="_dragBarControlsRight_79cew_537",wge="_newChatBtn_79cew_553",Nge="_windowControlBtn_79cew_589",Sge="_content_79cew_113",_ge="_overlayContent_79cew_687",Cge="_section_79cew_711",Tge="_sectionTitle_79cew_723",kge="_recentList_79cew_743",Age="_recentPill_79cew_767",Ege="_recentName_79cew_807",Pge="_recentToken_79cew_819",Dge="_recentInfo_79cew_837",Oge="_examplesGrid_79cew_849",Mge="_exampleCard_79cew_861",Ige="_exampleIcon_79cew_897",Rge="_exampleText_79cew_905",Lge="_chatSectionFill_79cew_919",Fge="_chatMessagesFill_79cew_935",$ge="_chatBubble_79cew_955",Bge="_chatBubbleUser_79cew_975",zge="_chatBubbleModel_79cew_991",qge="_chatBubbleSystem_79cew_1009",Uge="_processing_79cew_1025",Vge="_spinner_79cew_1043",Hge="_resultItem_79cew_1065",Gge="_resultName_79cew_1093",Wge="_resultToken_79cew_1103",Kge="_resultDetails_79cew_1115",Yge="_noResults_79cew_1125",It={overlay:age,overlayMinimized:ige,modal:sge,minimized:oge,contentWrapper:lge,exiting:cge,header:uge,inputWrapper:dge,inputContainer:hge,minimizedSearchIcon:fge,input:pge,controlsGroup:mge,iconButton:gge,sendButton:yge,dragBar:xge,dragBarTitle:vge,dragBarControls:bge,dragBarControlsRight:jge,newChatBtn:wge,windowControlBtn:Nge,content:Sge,overlayContent:_ge,section:Cge,sectionTitle:Tge,recentList:kge,recentPill:Age,recentName:Ege,recentToken:Pge,recentInfo:Dge,examplesGrid:Oge,exampleCard:Mge,exampleIcon:Ige,exampleText:Rge,chatSectionFill:Lge,chatMessagesFill:Fge,chatBubble:$ge,chatBubbleUser:Bge,chatBubbleModel:zge,chatBubbleSystem:qge,processing:Uge,spinner:Vge,resultItem:Hge,resultName:Gge,resultToken:Wge,resultDetails:Kge,noResults:Yge};var LC,m3;function bd(){if(m3)return LC;m3=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return LC=t,LC}var FC,g3;function b9(){if(g3)return FC;g3=1;var t=typeof ro=="object"&&ro&&ro.Object===Object&&ro;return FC=t,FC}var $C,y3;function ql(){if(y3)return $C;y3=1;var t=b9(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return $C=n,$C}var BC,x3;function Qge(){if(x3)return BC;x3=1;var t=ql(),e=function(){return t.Date.now()};return BC=e,BC}var zC,v3;function Xge(){if(v3)return zC;v3=1;var t=/\s/;function e(n){for(var a=n.length;a--&&t.test(n.charAt(a)););return a}return zC=e,zC}var qC,b3;function Jge(){if(b3)return qC;b3=1;var t=Xge(),e=/^\s+/;function n(a){return a&&a.slice(0,t(a)+1).replace(e,"")}return qC=n,qC}var UC,j3;function Fb(){if(j3)return UC;j3=1;var t=ql(),e=t.Symbol;return UC=e,UC}var VC,w3;function Zge(){if(w3)return VC;w3=1;var t=Fb(),e=Object.prototype,n=e.hasOwnProperty,a=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),c=o[i];try{o[i]=void 0;var d=!0}catch{}var f=a.call(o);return d&&(l?o[i]=c:delete o[i]),f}return VC=s,VC}var HC,N3;function eye(){if(N3)return HC;N3=1;var t=Object.prototype,e=t.toString;function n(a){return e.call(a)}return HC=n,HC}var GC,S3;function Gc(){if(S3)return GC;S3=1;var t=Fb(),e=Zge(),n=eye(),a="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:a:s&&s in Object(l)?e(l):n(l)}return GC=o,GC}var WC,_3;function Wc(){if(_3)return WC;_3=1;function t(e){return e!=null&&typeof e=="object"}return WC=t,WC}var KC,C3;function Ug(){if(C3)return KC;C3=1;var t=Gc(),e=Wc(),n="[object Symbol]";function a(i){return typeof i=="symbol"||e(i)&&t(i)==n}return KC=a,KC}var YC,T3;function j9(){if(T3)return YC;T3=1;var t=Jge(),e=bd(),n=Ug(),a=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return a;if(e(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=e(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=t(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?a:+d}return YC=c,YC}var QC,k3;function w9(){if(k3)return QC;k3=1;var t=bd(),e=Qge(),n=j9(),a="Expected a function",i=Math.max,s=Math.min;function o(l,c,d){var f,p,g,x,b,j,S=0,_=!1,T=!1,C=!0;if(typeof l!="function")throw new TypeError(a);c=n(c)||0,t(d)&&(_=!!d.leading,T="maxWait"in d,g=T?i(n(d.maxWait)||0,c):g,C="trailing"in d?!!d.trailing:C);function E(H){var K=f,W=p;return f=p=void 0,S=H,x=l.apply(W,K),x}function k(H){return S=H,b=setTimeout(R,c),_?E(H):x}function P(H){var K=H-j,W=H-S,B=c-K;return T?s(B,g-W):B}function I(H){var K=H-j,W=H-S;return j===void 0||K>=c||K<0||T&&W>=g}function R(){var H=e();if(I(H))return z(H);b=setTimeout(R,P(H))}function z(H){return b=void 0,C&&f?E(H):(f=p=void 0,x)}function q(){b!==void 0&&clearTimeout(b),S=0,f=j=p=b=void 0}function F(){return b===void 0?x:z(e())}function V(){var H=e(),K=I(H);if(f=arguments,p=this,j=H,K){if(b===void 0)return k(j);if(T)return clearTimeout(b),b=setTimeout(R,c),E(j)}return b===void 0&&(b=setTimeout(R,c)),x}return V.cancel=q,V.flush=F,V}return QC=o,QC}var tye=w9();const TO=Hn(tye),$b=({columns:t,data:e,onSave:n,onRowAdd:a,onRowDelete:i,onRowClick:s,onRowHover:o,editable:l=!0,showRowNumbers:c=!0,title:d})=>{const[f,p]=v.useState(e),[g,x]=v.useState(null),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(null),[E,k]=v.useState(!1),[P,I]=v.useState(new Set);Ce.useEffect(()=>{p(e),k(!1)},[e]);const R=v.useMemo(()=>{let B=[...f];if(S.trim()){const G=S.toLowerCase();B=B.filter(ee=>Object.values(ee).some(X=>X!=null&&String(X).toLowerCase().includes(G)))}return T&&B.sort((G,ee)=>{const X=G[T.key],$=ee[T.key];return X==null?1:$==null?-1:X<$?T.direction==="asc"?-1:1:X>$?T.direction==="asc"?1:-1:0}),B},[f,S,T]),z=(B,G)=>{var X;if(!l)return;const ee=t.find($=>$.key===G);(ee==null?void 0:ee.editable)!==!1&&(x({row:B,col:G}),j(String(((X=f[B])==null?void 0:X[G])??"")))},q=()=>{var B;if(g){const G=[...f],ee=t.find($=>$.key===g.col);let X=b;(ee==null?void 0:ee.type)==="number"&&(X=parseFloat(X)||0),(ee==null?void 0:ee.type)==="boolean"&&(X=X.toLowerCase()==="true"||X==="1"),((B=G[g.row])==null?void 0:B[g.col])!==X&&(G[g.row]={...G[g.row],[g.col]:X},p(G),k(!0))}x(null)},F=B=>{if(B.key==="Enter")q();else if(B.key==="Escape")x(null);else if(B.key==="Tab"&&(B.preventDefault(),q(),g)){const G=t.findIndex(X=>X.key===g.col),ee=t[G+1];ee?setTimeout(()=>z(g.row,ee.key),0):g.row<f.length-1&&setTimeout(()=>z(g.row+1,t[0].key),0)}},V=B=>{C(G=>(G==null?void 0:G.key)===B?G.direction==="asc"?{key:B,direction:"desc"}:null:{key:B,direction:"asc"})},H=()=>{n&&(n(f),k(!1))},K=()=>{const B=t.map(xe=>xe.label).join(","),G=f.map(xe=>t.map(Y=>{const Re=xe[Y.key];return typeof Re=="string"&&Re.includes(",")?`"${Re}"`:Re}).join(",")),ee=[B,...G].join(`
`),X=new Blob([ee],{type:"text/csv"}),$=URL.createObjectURL(X),ce=document.createElement("a");ce.href=$,ce.download=`${d||"data"}.csv`,ce.click()},W=B=>{const G=new Set(P);G.has(B)?G.delete(B):G.add(B),I(G)};return r.jsxs("div",{className:"excel-grid",children:[r.jsxs("div",{className:"excel-toolbar",children:[r.jsxs("div",{className:"excel-search",children:[r.jsx("input",{type:"text",placeholder:" Search...",value:S,onChange:B=>_(B.target.value)}),S&&r.jsx("button",{className:"clear-search",onClick:()=>_(""),children:r.jsx(Lt,{size:14})})]}),r.jsxs("div",{className:"excel-actions",children:[a&&r.jsxs("button",{onClick:a,className:"excel-btn",title:"Add Row",children:[r.jsx(Vn,{size:16})," Add"]}),r.jsxs("button",{onClick:K,className:"excel-btn",title:"Export CSV",children:[r.jsx(xX,{size:16})," Export"]}),l&&n&&r.jsxs("button",{onClick:H,className:`excel-btn save-btn ${E?"has-changes":""}`,disabled:!E,title:"Save Changes",children:[r.jsx(cs,{size:16})," Save"]})]})]}),r.jsxs("div",{className:"excel-status",children:[S&&r.jsxs("span",{children:["Showing ",R.length," of ",f.length]}),E&&r.jsx("span",{className:"unsaved-indicator",children:" Unsaved changes"})]}),r.jsx("div",{className:"excel-table-wrapper",children:r.jsxs("table",{className:"excel-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[c&&r.jsx("th",{className:"row-num-header",children:"#"}),t.map(B=>r.jsx("th",{onClick:()=>V(B.key),style:{width:B.width,cursor:"pointer"},children:r.jsxs("div",{className:"th-content",children:[B.label,(T==null?void 0:T.key)===B.key&&(T.direction==="asc"?r.jsx(eX,{size:14}):r.jsx(Uz,{size:14}))]})},B.key)),i&&r.jsx("th",{className:"action-col",children:""})]})}),r.jsx("tbody",{children:R.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:t.length+(c?1:0)+(i?1:0),className:"no-data",children:"No data found"})}):R.map((B,G)=>r.jsxs("tr",{className:`${P.has(G)?"selected":""} ${s?"clickable-row":""}`,onClick:()=>s&&s(B,G),onMouseEnter:()=>o&&o(B,G),style:s?{cursor:"pointer"}:void 0,children:[c&&r.jsx("td",{className:"row-num",onClick:()=>W(G),children:G+1}),t.map(ee=>r.jsx("td",{onClick:()=>z(G,ee.key),className:`
                                                ${(g==null?void 0:g.row)===G&&(g==null?void 0:g.col)===ee.key?"editing":""}
                                                ${ee.editable===!1?"read-only":""}
                                            `,children:(g==null?void 0:g.row)===G&&(g==null?void 0:g.col)===ee.key?r.jsx("input",{type:ee.type==="number"?"number":"text",value:b,onChange:X=>j(X.target.value),onBlur:q,onKeyDown:F,autoFocus:!0}):r.jsx("span",{children:B[ee.key]??""})},ee.key)),i&&r.jsx("td",{className:"action-col",children:r.jsx("button",{className:"delete-row",onClick:()=>i(G),children:r.jsx(Lt,{size:14})})})]},B.id||G))})]})}),r.jsxs("div",{className:"excel-footer",children:[r.jsxs("span",{children:[f.length," rows"]}),P.size>0&&r.jsxs("span",{children:[P.size," selected"]})]})]})};function N9(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=N9(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function fn(){for(var t,e,n=0,a="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=N9(t))&&(a&&(a+=" "),a+=e);return a}var XC,A3;function fs(){if(A3)return XC;A3=1;var t=Array.isArray;return XC=t,XC}var JC,E3;function kO(){if(E3)return JC;E3=1;var t=fs(),e=Ug(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:a.test(s)||!n.test(s)||o!=null&&s in Object(o)}return JC=i,JC}var ZC,P3;function AO(){if(P3)return ZC;P3=1;var t=Gc(),e=bd(),n="[object AsyncFunction]",a="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==a||c==i||c==n||c==s}return ZC=o,ZC}var e2,D3;function nye(){if(D3)return e2;D3=1;var t=ql(),e=t["__core-js_shared__"];return e2=e,e2}var t2,O3;function rye(){if(O3)return t2;O3=1;var t=nye(),e=function(){var a=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function n(a){return!!e&&e in a}return t2=n,t2}var n2,M3;function S9(){if(M3)return n2;M3=1;var t=Function.prototype,e=t.toString;function n(a){if(a!=null){try{return e.call(a)}catch{}try{return a+""}catch{}}return""}return n2=n,n2}var r2,I3;function aye(){if(I3)return r2;I3=1;var t=AO(),e=rye(),n=bd(),a=S9(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,f=RegExp("^"+c.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||e(g))return!1;var x=t(g)?f:s;return x.test(a(g))}return r2=p,r2}var a2,R3;function iye(){if(R3)return a2;R3=1;function t(e,n){return e==null?void 0:e[n]}return a2=t,a2}var i2,L3;function If(){if(L3)return i2;L3=1;var t=aye(),e=iye();function n(a,i){var s=e(a,i);return t(s)?s:void 0}return i2=n,i2}var s2,F3;function lS(){if(F3)return s2;F3=1;var t=If(),e=t(Object,"create");return s2=e,s2}var o2,$3;function sye(){if($3)return o2;$3=1;var t=lS();function e(){this.__data__=t?t(null):{},this.size=0}return o2=e,o2}var l2,B3;function oye(){if(B3)return l2;B3=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return l2=t,l2}var c2,z3;function lye(){if(z3)return c2;z3=1;var t=lS(),e="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return a.call(o,s)?o[s]:void 0}return c2=i,c2}var u2,q3;function cye(){if(q3)return u2;q3=1;var t=lS(),e=Object.prototype,n=e.hasOwnProperty;function a(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return u2=a,u2}var d2,U3;function uye(){if(U3)return d2;U3=1;var t=lS(),e="__lodash_hash_undefined__";function n(a,i){var s=this.__data__;return this.size+=this.has(a)?0:1,s[a]=t&&i===void 0?e:i,this}return d2=n,d2}var h2,V3;function dye(){if(V3)return h2;V3=1;var t=sye(),e=oye(),n=lye(),a=cye(),i=uye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,h2=s,h2}var f2,H3;function hye(){if(H3)return f2;H3=1;function t(){this.__data__=[],this.size=0}return f2=t,f2}var p2,G3;function EO(){if(G3)return p2;G3=1;function t(e,n){return e===n||e!==e&&n!==n}return p2=t,p2}var m2,W3;function cS(){if(W3)return m2;W3=1;var t=EO();function e(n,a){for(var i=n.length;i--;)if(t(n[i][0],a))return i;return-1}return m2=e,m2}var g2,K3;function fye(){if(K3)return g2;K3=1;var t=cS(),e=Array.prototype,n=e.splice;function a(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return g2=a,g2}var y2,Y3;function pye(){if(Y3)return y2;Y3=1;var t=cS();function e(n){var a=this.__data__,i=t(a,n);return i<0?void 0:a[i][1]}return y2=e,y2}var x2,Q3;function mye(){if(Q3)return x2;Q3=1;var t=cS();function e(n){return t(this.__data__,n)>-1}return x2=e,x2}var v2,X3;function gye(){if(X3)return v2;X3=1;var t=cS();function e(n,a){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,a])):i[s][1]=a,this}return v2=e,v2}var b2,J3;function uS(){if(J3)return b2;J3=1;var t=hye(),e=fye(),n=pye(),a=mye(),i=gye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,b2=s,b2}var j2,Z3;function PO(){if(Z3)return j2;Z3=1;var t=If(),e=ql(),n=t(e,"Map");return j2=n,j2}var w2,e5;function yye(){if(e5)return w2;e5=1;var t=dye(),e=uS(),n=PO();function a(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return w2=a,w2}var N2,t5;function xye(){if(t5)return N2;t5=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return N2=t,N2}var S2,n5;function dS(){if(n5)return S2;n5=1;var t=xye();function e(n,a){var i=n.__data__;return t(a)?i[typeof a=="string"?"string":"hash"]:i.map}return S2=e,S2}var _2,r5;function vye(){if(r5)return _2;r5=1;var t=dS();function e(n){var a=t(this,n).delete(n);return this.size-=a?1:0,a}return _2=e,_2}var C2,a5;function bye(){if(a5)return C2;a5=1;var t=dS();function e(n){return t(this,n).get(n)}return C2=e,C2}var T2,i5;function jye(){if(i5)return T2;i5=1;var t=dS();function e(n){return t(this,n).has(n)}return T2=e,T2}var k2,s5;function wye(){if(s5)return k2;s5=1;var t=dS();function e(n,a){var i=t(this,n),s=i.size;return i.set(n,a),this.size+=i.size==s?0:1,this}return k2=e,k2}var A2,o5;function DO(){if(o5)return A2;o5=1;var t=yye(),e=vye(),n=bye(),a=jye(),i=wye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,A2=s,A2}var E2,l5;function _9(){if(l5)return E2;l5=1;var t=DO(),e="Expected a function";function n(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var d=a.apply(this,o);return s.cache=c.set(l,d)||c,d};return s.cache=new(n.Cache||t),s}return n.Cache=t,E2=n,E2}var P2,c5;function Nye(){if(c5)return P2;c5=1;var t=_9(),e=500;function n(a){var i=t(a,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return P2=n,P2}var D2,u5;function Sye(){if(u5)return D2;u5=1;var t=Nye(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,d){s.push(c?d.replace(n,"$1"):l||o)}),s});return D2=a,D2}var O2,d5;function OO(){if(d5)return O2;d5=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=Array(i);++a<i;)s[a]=n(e[a],a,e);return s}return O2=t,O2}var M2,h5;function _ye(){if(h5)return M2;h5=1;var t=Fb(),e=OO(),n=fs(),a=Ug(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(a(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return M2=o,M2}var I2,f5;function C9(){if(f5)return I2;f5=1;var t=_ye();function e(n){return n==null?"":t(n)}return I2=e,I2}var R2,p5;function T9(){if(p5)return R2;p5=1;var t=fs(),e=kO(),n=Sye(),a=C9();function i(s,o){return t(s)?s:e(s,o)?[s]:n(a(s))}return R2=i,R2}var L2,m5;function hS(){if(m5)return L2;m5=1;var t=Ug();function e(n){if(typeof n=="string"||t(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return L2=e,L2}var F2,g5;function MO(){if(g5)return F2;g5=1;var t=T9(),e=hS();function n(a,i){i=t(i,a);for(var s=0,o=i.length;a!=null&&s<o;)a=a[e(i[s++])];return s&&s==o?a:void 0}return F2=n,F2}var $2,y5;function k9(){if(y5)return $2;y5=1;var t=MO();function e(n,a,i){var s=n==null?void 0:t(n,a);return s===void 0?i:s}return $2=e,$2}var Cye=k9();const Rs=Hn(Cye);var B2,x5;function Tye(){if(x5)return B2;x5=1;function t(e){return e==null}return B2=t,B2}var kye=Tye();const dn=Hn(kye);var z2,v5;function Aye(){if(v5)return z2;v5=1;var t=Gc(),e=fs(),n=Wc(),a="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==a}return z2=i,z2}var Eye=Aye();const Cf=Hn(Eye);var Pye=AO();const an=Hn(Pye);var Dye=bd();const Vg=Hn(Dye);var q2={exports:{}},dr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b5;function Oye(){if(b5)return dr;b5=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function j(S){if(typeof S=="object"&&S!==null){var _=S.$$typeof;switch(_){case t:switch(S=S.type,S){case n:case i:case a:case d:case f:return S;default:switch(S=S&&S.$$typeof,S){case l:case o:case c:case g:case p:case s:return S;default:return _}}case e:return _}}}return dr.ContextConsumer=o,dr.ContextProvider=s,dr.Element=t,dr.ForwardRef=c,dr.Fragment=n,dr.Lazy=g,dr.Memo=p,dr.Portal=e,dr.Profiler=i,dr.StrictMode=a,dr.Suspense=d,dr.SuspenseList=f,dr.isAsyncMode=function(){return!1},dr.isConcurrentMode=function(){return!1},dr.isContextConsumer=function(S){return j(S)===o},dr.isContextProvider=function(S){return j(S)===s},dr.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},dr.isForwardRef=function(S){return j(S)===c},dr.isFragment=function(S){return j(S)===n},dr.isLazy=function(S){return j(S)===g},dr.isMemo=function(S){return j(S)===p},dr.isPortal=function(S){return j(S)===e},dr.isProfiler=function(S){return j(S)===i},dr.isStrictMode=function(S){return j(S)===a},dr.isSuspense=function(S){return j(S)===d},dr.isSuspenseList=function(S){return j(S)===f},dr.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===i||S===a||S===d||S===f||S===x||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===p||S.$$typeof===s||S.$$typeof===o||S.$$typeof===c||S.$$typeof===b||S.getModuleId!==void 0)},dr.typeOf=j,dr}var j5;function Mye(){return j5||(j5=1,q2.exports=Oye()),q2.exports}var Iye=Mye(),U2,w5;function A9(){if(w5)return U2;w5=1;var t=Gc(),e=Wc(),n="[object Number]";function a(i){return typeof i=="number"||e(i)&&t(i)==n}return U2=a,U2}var V2,N5;function Rye(){if(N5)return V2;N5=1;var t=A9();function e(n){return t(n)&&n!=+n}return V2=e,V2}var Lye=Rye();const Hg=Hn(Lye);var Fye=A9();const $ye=Hn(Fye);var Li=function(e){return e===0?0:e>0?1:-1},Jh=function(e){return Cf(e)&&e.indexOf("%")===e.length-1},Nt=function(e){return $ye(e)&&!Hg(e)},Bye=function(e){return dn(e)},Aa=function(e){return Nt(e)||Cf(e)},zye=0,Rf=function(e){var n=++zye;return"".concat(e||"").concat(n)},Fi=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Nt(e)&&!Cf(e))return a;var s;if(Jh(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Hg(s)&&(s=a),i&&s>n&&(s=n),s},Ku=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},qye=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,a={},i=0;i<n;i++)if(!a[e[i]])a[e[i]]=!0;else return!0;return!1},ka=function(e,n){return Nt(e)&&Nt(n)?function(a){return e+a*(n-e)}:function(){return n}};function Ow(t,e,n){return!t||!t.length?null:t.find(function(a){return a&&(typeof e=="function"?e(a):Rs(a,e))===n})}var Uye=function(e,n){return Nt(e)&&Nt(n)?e-n:Cf(e)&&Cf(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Bm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var a in e)if({}.hasOwnProperty.call(e,a)&&!{}.hasOwnProperty.call(t,a))return!1;return!0}function nP(t){"@babel/helpers - typeof";return nP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nP(t)}var Vye=["viewBox","children"],Hye=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],S5=["points","pathLength"],H2={svg:Vye,polygon:S5,polyline:S5},IO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Mw=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(v.isValidElement(e)&&(a=e.props),!Vg(a))return null;var i={};return Object.keys(a).forEach(function(s){IO.includes(s)&&(i[s]=n||function(o){return a[s](a,o)})}),i},Gye=function(e,n,a){return function(i){return e(n,a,i),null}},Tf=function(e,n,a){if(!Vg(e)||nP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];IO.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=Gye(o,n,a))}),i},Wye=["children"],Kye=["children"];function _5(t,e){if(t==null)return{};var n=Yye(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Yye(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function rP(t){"@babel/helpers - typeof";return rP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rP(t)}var C5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Pc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},T5=null,G2=null,RO=function t(e){if(e===T5&&Array.isArray(G2))return G2;var n=[];return v.Children.forEach(e,function(a){dn(a)||(Iye.isFragment(a)?n=n.concat(t(a.props.children)):n.push(a))}),G2=n,T5=e,n};function Ls(t,e){var n=[],a=[];return Array.isArray(e)?a=e.map(function(i){return Pc(i)}):a=[Pc(e)],RO(t).forEach(function(i){var s=Rs(i,"type.displayName")||Rs(i,"type.name");a.indexOf(s)!==-1&&n.push(i)}),n}function ks(t,e){var n=Ls(t,e);return n&&n[0]}var k5=function(e){if(!e||!e.props)return!1;var n=e.props,a=n.width,i=n.height;return!(!Nt(a)||a<=0||!Nt(i)||i<=0)},Qye=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Xye=function(e){return e&&e.type&&Cf(e.type)&&Qye.indexOf(e.type)>=0},E9=function(e){return e&&rP(e)==="object"&&"clipDot"in e},Jye=function(e,n,a,i){var s,o=(s=H2==null?void 0:H2[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!an(e)&&(i&&o.includes(n)||Hye.includes(n))||a&&IO.includes(n)},zt=function(e,n,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(v.isValidElement(e)&&(i=e.props),!Vg(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;Jye((l=i)===null||l===void 0?void 0:l[o],o,n,a)&&(s[o]=i[o])}),s},aP=function t(e,n){if(e===n)return!0;var a=v.Children.count(e);if(a!==v.Children.count(n))return!1;if(a===0)return!0;if(a===1)return A5(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<a;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!A5(s,o))return!1}return!0},A5=function(e,n){if(dn(e)&&dn(n))return!0;if(!dn(e)&&!dn(n)){var a=e.props||{},i=a.children,s=_5(a,Wye),o=n.props||{},l=o.children,c=_5(o,Kye);return i&&l?Bm(s,c)&&aP(i,l):!i&&!l?Bm(s,c):!1}return!1},E5=function(e,n){var a=[],i={};return RO(e).forEach(function(s,o){if(Xye(s))a.push(s);else if(s){var l=Pc(s.type),c=n[l]||{},d=c.handler,f=c.once;if(d&&(!f||!i[l])){var p=d(s,l,o);a.push(p),i[l]=!0}}}),a},Zye=function(e){var n=e&&e.type;return n&&C5[n]?C5[n]:null},exe=function(e,n){return RO(n).indexOf(e)},txe=["children","width","height","viewBox","className","style","title","desc"];function iP(){return iP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},iP.apply(this,arguments)}function nxe(t,e){if(t==null)return{};var n=rxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function rxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function sP(t){var e=t.children,n=t.width,a=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,d=nxe(t,txe),f=i||{width:n,height:a,x:0,y:0},p=fn("recharts-surface",s);return Ce.createElement("svg",iP({},zt(d,!0,"svg"),{className:p,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Ce.createElement("title",null,l),Ce.createElement("desc",null,c),e)}var axe=["children","className"];function oP(){return oP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oP.apply(this,arguments)}function ixe(t,e){if(t==null)return{};var n=sxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function sxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var In=Ce.forwardRef(function(t,e){var n=t.children,a=t.className,i=ixe(t,axe),s=fn("recharts-layer",a);return Ce.createElement("g",oP({className:s},zt(i,!0),{ref:e}),n)}),zo=function(e,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s]},W2,P5;function oxe(){if(P5)return W2;P5=1;function t(e,n,a){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),a=a>s?s:a,a<0&&(a+=s),s=n>a?0:a-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}return W2=t,W2}var K2,D5;function lxe(){if(D5)return K2;D5=1;var t=oxe();function e(n,a,i){var s=n.length;return i=i===void 0?s:i,!a&&i>=s?n:t(n,a,i)}return K2=e,K2}var Y2,O5;function P9(){if(O5)return Y2;O5=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(d){return l.test(d)}return Y2=c,Y2}var Q2,M5;function cxe(){if(M5)return Q2;M5=1;function t(e){return e.split("")}return Q2=t,Q2}var X2,I5;function uxe(){if(I5)return X2;I5=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=d+"?",j="["+s+"]?",S="(?:"+x+"(?:"+[f,p,g].join("|")+")"+j+b+")*",_=j+b+S,T="(?:"+[f+l+"?",l,p,g,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+T+_,"g");function E(k){return k.match(C)||[]}return X2=E,X2}var J2,R5;function dxe(){if(R5)return J2;R5=1;var t=cxe(),e=P9(),n=uxe();function a(i){return e(i)?n(i):t(i)}return J2=a,J2}var Z2,L5;function hxe(){if(L5)return Z2;L5=1;var t=lxe(),e=P9(),n=dxe(),a=C9();function i(s){return function(o){o=a(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),d=l?t(l,1).join(""):o.slice(1);return c[s]()+d}}return Z2=i,Z2}var eT,F5;function fxe(){if(F5)return eT;F5=1;var t=hxe(),e=t("toUpperCase");return eT=e,eT}var pxe=fxe();const fS=Hn(pxe);function Rr(t){return function(){return t}}const D9=Math.cos,Iw=Math.sin,Ko=Math.sqrt,Rw=Math.PI,pS=2*Rw,lP=Math.PI,cP=2*lP,Vh=1e-6,mxe=cP-Vh;function O9(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function gxe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return O9;const n=10**e;return function(a){this._+=a[0];for(let i=1,s=a.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}class yxe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?O9:gxe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,a,i){this._append`Q${+e},${+n},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(e,n,a,i,s,o){this._append`C${+e},${+n},${+a},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,a,i,s){if(e=+e,n=+n,a=+a,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=a-e,d=i-n,f=o-e,p=l-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Vh)if(!(Math.abs(p*c-d*f)>Vh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let x=a-o,b=i-l,j=c*c+d*d,S=x*x+b*b,_=Math.sqrt(j),T=Math.sqrt(g),C=s*Math.tan((lP-Math.acos((j+g-S)/(2*_*T)))/2),E=C/T,k=C/_;Math.abs(E-1)>Vh&&this._append`L${e+E*f},${n+E*p}`,this._append`A${s},${s},0,0,${+(p*x>f*b)},${this._x1=e+k*c},${this._y1=n+k*d}`}}arc(e,n,a,i,s,o){if(e=+e,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(i),c=a*Math.sin(i),d=e+l,f=n+c,p=1^o,g=o?i-s:s-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Vh||Math.abs(this._y1-f)>Vh)&&this._append`L${d},${f}`,a&&(g<0&&(g=g%cP+cP),g>mxe?this._append`A${a},${a},0,1,${p},${e-l},${n-c}A${a},${a},0,1,${p},${this._x1=d},${this._y1=f}`:g>Vh&&this._append`A${a},${a},0,${+(g>=lP)},${p},${this._x1=e+a*Math.cos(s)},${this._y1=n+a*Math.sin(s)}`)}rect(e,n,a,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function LO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);e=a}return t},()=>new yxe(e)}function FO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function M9(t){this._context=t}M9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function mS(t){return new M9(t)}function I9(t){return t[0]}function R9(t){return t[1]}function L9(t,e){var n=Rr(!0),a=null,i=mS,s=null,o=LO(l);t=typeof t=="function"?t:t===void 0?I9:Rr(t),e=typeof e=="function"?e:e===void 0?R9:Rr(e);function l(c){var d,f=(c=FO(c)).length,p,g=!1,x;for(a==null&&(s=i(x=o())),d=0;d<=f;++d)!(d<f&&n(p=c[d],d,c))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,d,c),+e(p,d,c));if(x)return s=null,x+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Rr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Rr(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Rr(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,a!=null&&(s=i(a)),l):i},l.context=function(c){return arguments.length?(c==null?a=s=null:s=i(a=c),l):a},l}function Ej(t,e,n){var a=null,i=Rr(!0),s=null,o=mS,l=null,c=LO(d);t=typeof t=="function"?t:t===void 0?I9:Rr(+t),e=typeof e=="function"?e:Rr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?R9:Rr(+n);function d(p){var g,x,b,j=(p=FO(p)).length,S,_=!1,T,C=new Array(j),E=new Array(j);for(s==null&&(l=o(T=c())),g=0;g<=j;++g){if(!(g<j&&i(S=p[g],g,p))===_)if(_=!_)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=g-1;b>=x;--b)l.point(C[b],E[b]);l.lineEnd(),l.areaEnd()}_&&(C[g]=+t(S,g,p),E[g]=+e(S,g,p),l.point(a?+a(S,g,p):C[g],n?+n(S,g,p):E[g]))}if(T)return l=null,T+""||null}function f(){return L9().defined(i).curve(o).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:Rr(+p),a=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Rr(+p),d):t},d.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:Rr(+p),d):a},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:Rr(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Rr(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Rr(+p),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(a).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Rr(!!p),d):i},d.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),d):o},d.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),d):s},d}class F9{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function xxe(t){return new F9(t,!0)}function vxe(t){return new F9(t,!1)}const $O={draw(t,e){const n=Ko(e/Rw);t.moveTo(n,0),t.arc(0,0,n,0,pS)}},bxe={draw(t,e){const n=Ko(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},$9=Ko(1/3),jxe=$9*2,wxe={draw(t,e){const n=Ko(e/jxe),a=n*$9;t.moveTo(0,-n),t.lineTo(a,0),t.lineTo(0,n),t.lineTo(-a,0),t.closePath()}},Nxe={draw(t,e){const n=Ko(e),a=-n/2;t.rect(a,a,n,n)}},Sxe=.8908130915292852,B9=Iw(Rw/10)/Iw(7*Rw/10),_xe=Iw(pS/10)*B9,Cxe=-D9(pS/10)*B9,Txe={draw(t,e){const n=Ko(e*Sxe),a=_xe*n,i=Cxe*n;t.moveTo(0,-n),t.lineTo(a,i);for(let s=1;s<5;++s){const o=pS*s/5,l=D9(o),c=Iw(o);t.lineTo(c*n,-l*n),t.lineTo(l*a-c*i,c*a+l*i)}t.closePath()}},tT=Ko(3),kxe={draw(t,e){const n=-Ko(e/(tT*3));t.moveTo(0,n*2),t.lineTo(-tT*n,-n),t.lineTo(tT*n,-n),t.closePath()}},Xs=-.5,Js=Ko(3)/2,uP=1/Ko(12),Axe=(uP/2+1)*3,Exe={draw(t,e){const n=Ko(e/Axe),a=n/2,i=n*uP,s=a,o=n*uP+n,l=-s,c=o;t.moveTo(a,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Xs*a-Js*i,Js*a+Xs*i),t.lineTo(Xs*s-Js*o,Js*s+Xs*o),t.lineTo(Xs*l-Js*c,Js*l+Xs*c),t.lineTo(Xs*a+Js*i,Xs*i-Js*a),t.lineTo(Xs*s+Js*o,Xs*o-Js*s),t.lineTo(Xs*l+Js*c,Xs*c-Js*l),t.closePath()}};function Pxe(t,e){let n=null,a=LO(i);t=typeof t=="function"?t:Rr(t||$O),e=typeof e=="function"?e:Rr(e===void 0?64:+e);function i(){let s;if(n||(n=s=a()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Rr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Rr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Lw(){}function Fw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function z9(t){this._context=t}z9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Dxe(t){return new z9(t)}function q9(t){this._context=t}q9.prototype={areaStart:Lw,areaEnd:Lw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Fw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Oxe(t){return new q9(t)}function U9(t){this._context=t}U9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Fw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Mxe(t){return new U9(t)}function V9(t){this._context=t}V9.prototype={areaStart:Lw,areaEnd:Lw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Ixe(t){return new V9(t)}function $5(t){return t<0?-1:1}function B5(t,e,n){var a=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(a||i<0&&-0),o=(n-t._y1)/(i||a<0&&-0),l=(s*i+o*a)/(a+i);return($5(s)+$5(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function z5(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function nT(t,e,n){var a=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-a)/3;t._context.bezierCurveTo(a+l,i+l*e,s-l,o-l*n,s,o)}function $w(t){this._context=t}$w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:nT(this,this._t0,z5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,nT(this,z5(this,n=B5(this,t,e)),n);break;default:nT(this,this._t0,n=B5(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function H9(t){this._context=new G9(t)}(H9.prototype=Object.create($w.prototype)).point=function(t,e){$w.prototype.point.call(this,e,t)};function G9(t){this._context=t}G9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,a,i,s){this._context.bezierCurveTo(e,t,a,n,s,i)}};function Rxe(t){return new $w(t)}function Lxe(t){return new H9(t)}function W9(t){this._context=t}W9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var a=q5(t),i=q5(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(a[0][s],i[0][s],a[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function q5(t){var e,n=t.length-1,a,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)a=i[e]/s[e-1],s[e]-=a,o[e]-=a*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Fxe(t){return new W9(t)}function gS(t,e){this._context=t,this._t=e}gS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function $xe(t){return new gS(t,.5)}function Bxe(t){return new gS(t,0)}function zxe(t){return new gS(t,1)}function cg(t,e){if((o=t.length)>1)for(var n=1,a,i,s=t[e[0]],o,l=s.length;n<o;++n)for(i=s,s=t[e[n]],a=0;a<l;++a)s[a][1]+=s[a][0]=isNaN(i[a][1])?i[a][0]:i[a][1]}function dP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function qxe(t,e){return t[e]}function Uxe(t){const e=[];return e.key=t,e}function Vxe(){var t=Rr([]),e=dP,n=cg,a=qxe;function i(s){var o=Array.from(t.apply(this,arguments),Uxe),l,c=o.length,d=-1,f;for(const p of s)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(p,o[l].key,d,s)]).data=p;for(l=0,f=FO(e(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Rr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(a=typeof s=="function"?s:Rr(+s),i):a},i.order=function(s){return arguments.length?(e=s==null?dP:typeof s=="function"?s:Rr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??cg,i):n},i}function Hxe(t,e){if((a=t.length)>0){for(var n,a,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<a;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<a;++n)t[n][i][1]/=o}cg(t,e)}}function Gxe(t,e){if((i=t.length)>0){for(var n=0,a=t[e[0]],i,s=a.length;n<s;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}cg(t,e)}}function Wxe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,a=1,i,s,o;a<s;++a){for(var l=0,c=0,d=0;l<o;++l){for(var f=t[e[l]],p=f[a][1]||0,g=f[a-1][1]||0,x=(p-g)/2,b=0;b<l;++b){var j=t[e[b]],S=j[a][1]||0,_=j[a-1][1]||0;x+=S-_}c+=p,d+=x*p}i[a-1][1]+=i[a-1][0]=n,c&&(n-=d/c)}i[a-1][1]+=i[a-1][0]=n,cg(t,e)}}function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}var Kxe=["type","size","sizeType"];function hP(){return hP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},hP.apply(this,arguments)}function U5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function V5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U5(Object(n),!0).forEach(function(a){Yxe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Yxe(t,e,n){return e=Qxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qxe(t){var e=Xxe(t,"string");return Fv(e)=="symbol"?e:e+""}function Xxe(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Fv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jxe(t,e){if(t==null)return{};var n=Zxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Zxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var K9={symbolCircle:$O,symbolCross:bxe,symbolDiamond:wxe,symbolSquare:Nxe,symbolStar:Txe,symbolTriangle:kxe,symbolWye:Exe},eve=Math.PI/180,tve=function(e){var n="symbol".concat(fS(e));return K9[n]||$O},nve=function(e,n,a){if(n==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*eve;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},rve=function(e,n){K9["symbol".concat(fS(e))]=n},BO=function(e){var n=e.type,a=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=Jxe(e,Kxe),d=V5(V5({},c),{},{type:a,size:s,sizeType:l}),f=function(){var S=tve(a),_=Pxe().type(S).size(nve(s,l,a));return _()},p=d.className,g=d.cx,x=d.cy,b=zt(d,!0);return g===+g&&x===+x&&s===+s?Ce.createElement("path",hP({},b,{className:fn("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(x,")"),d:f()})):null};BO.registerSymbol=rve;function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function fP(){return fP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},fP.apply(this,arguments)}function H5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ave(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(n),!0).forEach(function(a){$v(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ive(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sve(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Q9(a.key),a)}}function ove(t,e,n){return e&&sve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lve(t,e,n){return e=Bw(e),cve(t,Y9()?Reflect.construct(e,n||[],Bw(t).constructor):e.apply(t,n))}function cve(t,e){if(e&&(ug(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uve(t)}function uve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y9=function(){return!!t})()}function Bw(t){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bw(t)}function dve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pP(t,e)}function pP(t,e){return pP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},pP(t,e)}function $v(t,e,n){return e=Q9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q9(t){var e=hve(t,"string");return ug(e)=="symbol"?e:e+""}function hve(t,e){if(ug(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ug(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Do=32,zO=function(t){function e(){return ive(this,e),lve(this,e,arguments)}return dve(e,t),ove(e,[{key:"renderIcon",value:function(a){var i=this.props.inactiveColor,s=Do/2,o=Do/6,l=Do/3,c=a.inactive?i:a.color;if(a.type==="plainline")return Ce.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:s,x2:Do,y2:s,className:"recharts-legend-icon"});if(a.type==="line")return Ce.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Do,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(a.type==="rect")return Ce.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Do/8,"h").concat(Do,"v").concat(Do*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Ce.isValidElement(a.legendIcon)){var d=ave({},a);return delete d.legendIcon,Ce.cloneElement(a.legendIcon,d)}return Ce.createElement(BO,{fill:c,cx:s,cy:s,size:Do,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,f={x:0,y:0,width:Do,height:Do},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(x,b){var j=x.formatter||c,S=fn($v($v({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var _=an(x.value)?null:x.value;zo(!an(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=x.inactive?d:x.color;return Ce.createElement("li",fP({className:S,style:p,key:"legend-item-".concat(b)},Tf(a.props,x,b)),Ce.createElement(sP,{width:o,height:o,viewBox:f,style:g},a.renderIcon(x)),Ce.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},j?j(_,x,b):_))})}},{key:"render",value:function(){var a=this.props,i=a.payload,s=a.layout,o=a.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Ce.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(v.PureComponent);$v(zO,"displayName","Legend");$v(zO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var rT,G5;function fve(){if(G5)return rT;G5=1;var t=uS();function e(){this.__data__=new t,this.size=0}return rT=e,rT}var aT,W5;function pve(){if(W5)return aT;W5=1;function t(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}return aT=t,aT}var iT,K5;function mve(){if(K5)return iT;K5=1;function t(e){return this.__data__.get(e)}return iT=t,iT}var sT,Y5;function gve(){if(Y5)return sT;Y5=1;function t(e){return this.__data__.has(e)}return sT=t,sT}var oT,Q5;function yve(){if(Q5)return oT;Q5=1;var t=uS(),e=PO(),n=DO(),a=200;function i(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<a-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return oT=i,oT}var lT,X5;function X9(){if(X5)return lT;X5=1;var t=uS(),e=fve(),n=pve(),a=mve(),i=gve(),s=yve();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=a,o.prototype.has=i,o.prototype.set=s,lT=o,lT}var cT,J5;function xve(){if(J5)return cT;J5=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return cT=e,cT}var uT,Z5;function vve(){if(Z5)return uT;Z5=1;function t(e){return this.__data__.has(e)}return uT=t,uT}var dT,e6;function J9(){if(e6)return dT;e6=1;var t=DO(),e=xve(),n=vve();function a(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return a.prototype.add=a.prototype.push=e,a.prototype.has=n,dT=a,dT}var hT,t6;function Z9(){if(t6)return hT;t6=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(e[a],a,e))return!0;return!1}return hT=t,hT}var fT,n6;function e7(){if(n6)return fT;n6=1;function t(e,n){return e.has(n)}return fT=t,fT}var pT,r6;function t7(){if(r6)return pT;r6=1;var t=J9(),e=Z9(),n=e7(),a=1,i=2;function s(o,l,c,d,f,p){var g=c&a,x=o.length,b=l.length;if(x!=b&&!(g&&b>x))return!1;var j=p.get(o),S=p.get(l);if(j&&S)return j==l&&S==o;var _=-1,T=!0,C=c&i?new t:void 0;for(p.set(o,l),p.set(l,o);++_<x;){var E=o[_],k=l[_];if(d)var P=g?d(k,E,_,l,o,p):d(E,k,_,o,l,p);if(P!==void 0){if(P)continue;T=!1;break}if(C){if(!e(l,function(I,R){if(!n(C,R)&&(E===I||f(E,I,c,d,p)))return C.push(R)})){T=!1;break}}else if(!(E===k||f(E,k,c,d,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return pT=s,pT}var mT,a6;function bve(){if(a6)return mT;a6=1;var t=ql(),e=t.Uint8Array;return mT=e,mT}var gT,i6;function jve(){if(i6)return gT;i6=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i,s){a[++n]=[s,i]}),a}return gT=t,gT}var yT,s6;function qO(){if(s6)return yT;s6=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i){a[++n]=i}),a}return yT=t,yT}var xT,o6;function wve(){if(o6)return xT;o6=1;var t=Fb(),e=bve(),n=EO(),a=t7(),i=jve(),s=qO(),o=1,l=2,c="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",b="[object Set]",j="[object String]",S="[object Symbol]",_="[object ArrayBuffer]",T="[object DataView]",C=t?t.prototype:void 0,E=C?C.valueOf:void 0;function k(P,I,R,z,q,F,V){switch(R){case T:if(P.byteLength!=I.byteLength||P.byteOffset!=I.byteOffset)return!1;P=P.buffer,I=I.buffer;case _:return!(P.byteLength!=I.byteLength||!F(new e(P),new e(I)));case c:case d:case g:return n(+P,+I);case f:return P.name==I.name&&P.message==I.message;case x:case j:return P==I+"";case p:var H=i;case b:var K=z&o;if(H||(H=s),P.size!=I.size&&!K)return!1;var W=V.get(P);if(W)return W==I;z|=l,V.set(P,I);var B=a(H(P),H(I),z,q,F,V);return V.delete(P),B;case S:if(E)return E.call(P)==E.call(I)}return!1}return xT=k,xT}var vT,l6;function n7(){if(l6)return vT;l6=1;function t(e,n){for(var a=-1,i=n.length,s=e.length;++a<i;)e[s+a]=n[a];return e}return vT=t,vT}var bT,c6;function Nve(){if(c6)return bT;c6=1;var t=n7(),e=fs();function n(a,i,s){var o=i(a);return e(a)?o:t(o,s(a))}return bT=n,bT}var jT,u6;function Sve(){if(u6)return jT;u6=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=0,o=[];++a<i;){var l=e[a];n(l,a,e)&&(o[s++]=l)}return o}return jT=t,jT}var wT,d6;function _ve(){if(d6)return wT;d6=1;function t(){return[]}return wT=t,wT}var NT,h6;function Cve(){if(h6)return NT;h6=1;var t=Sve(),e=_ve(),n=Object.prototype,a=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return a.call(o,l)}))}:e;return NT=s,NT}var ST,f6;function Tve(){if(f6)return ST;f6=1;function t(e,n){for(var a=-1,i=Array(e);++a<e;)i[a]=n(a);return i}return ST=t,ST}var _T,p6;function kve(){if(p6)return _T;p6=1;var t=Gc(),e=Wc(),n="[object Arguments]";function a(i){return e(i)&&t(i)==n}return _T=a,_T}var CT,m6;function UO(){if(m6)return CT;m6=1;var t=kve(),e=Wc(),n=Object.prototype,a=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&a.call(o,"callee")&&!i.call(o,"callee")};return CT=s,CT}var mv={exports:{}},TT,g6;function Ave(){if(g6)return TT;g6=1;function t(){return!1}return TT=t,TT}mv.exports;var y6;function r7(){return y6||(y6=1,function(t,e){var n=ql(),a=Ave(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;t.exports=d}(mv,mv.exports)),mv.exports}var kT,x6;function VO(){if(x6)return kT;x6=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(a,i){var s=typeof a;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(a))&&a>-1&&a%1==0&&a<i}return kT=n,kT}var AT,v6;function HO(){if(v6)return AT;v6=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return AT=e,AT}var ET,b6;function Eve(){if(b6)return ET;b6=1;var t=Gc(),e=HO(),n=Wc(),a="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",b="[object String]",j="[object WeakMap]",S="[object ArrayBuffer]",_="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",E="[object Int8Array]",k="[object Int16Array]",P="[object Int32Array]",I="[object Uint8Array]",R="[object Uint8ClampedArray]",z="[object Uint16Array]",q="[object Uint32Array]",F={};F[T]=F[C]=F[E]=F[k]=F[P]=F[I]=F[R]=F[z]=F[q]=!0,F[a]=F[i]=F[S]=F[s]=F[_]=F[o]=F[l]=F[c]=F[d]=F[f]=F[p]=F[g]=F[x]=F[b]=F[j]=!1;function V(H){return n(H)&&e(H.length)&&!!F[t(H)]}return ET=V,ET}var PT,j6;function a7(){if(j6)return PT;j6=1;function t(e){return function(n){return e(n)}}return PT=t,PT}var gv={exports:{}};gv.exports;var w6;function Pve(){return w6||(w6=1,function(t,e){var n=b9(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,o=s&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(gv,gv.exports)),gv.exports}var DT,N6;function i7(){if(N6)return DT;N6=1;var t=Eve(),e=a7(),n=Pve(),a=n&&n.isTypedArray,i=a?e(a):t;return DT=i,DT}var OT,S6;function Dve(){if(S6)return OT;S6=1;var t=Tve(),e=UO(),n=fs(),a=r7(),i=VO(),s=i7(),o=Object.prototype,l=o.hasOwnProperty;function c(d,f){var p=n(d),g=!p&&e(d),x=!p&&!g&&a(d),b=!p&&!g&&!x&&s(d),j=p||g||x||b,S=j?t(d.length,String):[],_=S.length;for(var T in d)(f||l.call(d,T))&&!(j&&(T=="length"||x&&(T=="offset"||T=="parent")||b&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,_)))&&S.push(T);return S}return OT=c,OT}var MT,_6;function Ove(){if(_6)return MT;_6=1;var t=Object.prototype;function e(n){var a=n&&n.constructor,i=typeof a=="function"&&a.prototype||t;return n===i}return MT=e,MT}var IT,C6;function s7(){if(C6)return IT;C6=1;function t(e,n){return function(a){return e(n(a))}}return IT=t,IT}var RT,T6;function Mve(){if(T6)return RT;T6=1;var t=s7(),e=t(Object.keys,Object);return RT=e,RT}var LT,k6;function Ive(){if(k6)return LT;k6=1;var t=Ove(),e=Mve(),n=Object.prototype,a=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))a.call(s,l)&&l!="constructor"&&o.push(l);return o}return LT=i,LT}var FT,A6;function Bb(){if(A6)return FT;A6=1;var t=AO(),e=HO();function n(a){return a!=null&&e(a.length)&&!t(a)}return FT=n,FT}var $T,E6;function yS(){if(E6)return $T;E6=1;var t=Dve(),e=Ive(),n=Bb();function a(i){return n(i)?t(i):e(i)}return $T=a,$T}var BT,P6;function Rve(){if(P6)return BT;P6=1;var t=Nve(),e=Cve(),n=yS();function a(i){return t(i,n,e)}return BT=a,BT}var zT,D6;function Lve(){if(D6)return zT;D6=1;var t=Rve(),e=1,n=Object.prototype,a=n.hasOwnProperty;function i(s,o,l,c,d,f){var p=l&e,g=t(s),x=g.length,b=t(o),j=b.length;if(x!=j&&!p)return!1;for(var S=x;S--;){var _=g[S];if(!(p?_ in o:a.call(o,_)))return!1}var T=f.get(s),C=f.get(o);if(T&&C)return T==o&&C==s;var E=!0;f.set(s,o),f.set(o,s);for(var k=p;++S<x;){_=g[S];var P=s[_],I=o[_];if(c)var R=p?c(I,P,_,o,s,f):c(P,I,_,s,o,f);if(!(R===void 0?P===I||d(P,I,l,c,f):R)){E=!1;break}k||(k=_=="constructor")}if(E&&!k){var z=s.constructor,q=o.constructor;z!=q&&"constructor"in s&&"constructor"in o&&!(typeof z=="function"&&z instanceof z&&typeof q=="function"&&q instanceof q)&&(E=!1)}return f.delete(s),f.delete(o),E}return zT=i,zT}var qT,O6;function Fve(){if(O6)return qT;O6=1;var t=If(),e=ql(),n=t(e,"DataView");return qT=n,qT}var UT,M6;function $ve(){if(M6)return UT;M6=1;var t=If(),e=ql(),n=t(e,"Promise");return UT=n,UT}var VT,I6;function o7(){if(I6)return VT;I6=1;var t=If(),e=ql(),n=t(e,"Set");return VT=n,VT}var HT,R6;function Bve(){if(R6)return HT;R6=1;var t=If(),e=ql(),n=t(e,"WeakMap");return HT=n,HT}var GT,L6;function zve(){if(L6)return GT;L6=1;var t=Fve(),e=PO(),n=$ve(),a=o7(),i=Bve(),s=Gc(),o=S9(),l="[object Map]",c="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",x=o(t),b=o(e),j=o(n),S=o(a),_=o(i),T=s;return(t&&T(new t(new ArrayBuffer(1)))!=g||e&&T(new e)!=l||n&&T(n.resolve())!=d||a&&T(new a)!=f||i&&T(new i)!=p)&&(T=function(C){var E=s(C),k=E==c?C.constructor:void 0,P=k?o(k):"";if(P)switch(P){case x:return g;case b:return l;case j:return d;case S:return f;case _:return p}return E}),GT=T,GT}var WT,F6;function qve(){if(F6)return WT;F6=1;var t=X9(),e=t7(),n=wve(),a=Lve(),i=zve(),s=fs(),o=r7(),l=i7(),c=1,d="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function b(j,S,_,T,C,E){var k=s(j),P=s(S),I=k?f:i(j),R=P?f:i(S);I=I==d?p:I,R=R==d?p:R;var z=I==p,q=R==p,F=I==R;if(F&&o(j)){if(!o(S))return!1;k=!0,z=!1}if(F&&!z)return E||(E=new t),k||l(j)?e(j,S,_,T,C,E):n(j,S,I,_,T,C,E);if(!(_&c)){var V=z&&x.call(j,"__wrapped__"),H=q&&x.call(S,"__wrapped__");if(V||H){var K=V?j.value():j,W=H?S.value():S;return E||(E=new t),C(K,W,_,T,E)}}return F?(E||(E=new t),a(j,S,_,T,C,E)):!1}return WT=b,WT}var KT,$6;function GO(){if($6)return KT;$6=1;var t=qve(),e=Wc();function n(a,i,s,o,l){return a===i?!0:a==null||i==null||!e(a)&&!e(i)?a!==a&&i!==i:t(a,i,s,o,n,l)}return KT=n,KT}var YT,B6;function Uve(){if(B6)return YT;B6=1;var t=X9(),e=GO(),n=1,a=2;function i(s,o,l,c){var d=l.length,f=d,p=!c;if(s==null)return!f;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<f;){g=l[d];var x=g[0],b=s[x],j=g[1];if(p&&g[2]){if(b===void 0&&!(x in s))return!1}else{var S=new t;if(c)var _=c(b,j,x,s,o,S);if(!(_===void 0?e(j,b,n|a,c,S):_))return!1}}return!0}return YT=i,YT}var QT,z6;function l7(){if(z6)return QT;z6=1;var t=bd();function e(n){return n===n&&!t(n)}return QT=e,QT}var XT,q6;function Vve(){if(q6)return XT;q6=1;var t=l7(),e=yS();function n(a){for(var i=e(a),s=i.length;s--;){var o=i[s],l=a[o];i[s]=[o,l,t(l)]}return i}return XT=n,XT}var JT,U6;function c7(){if(U6)return JT;U6=1;function t(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==void 0||e in Object(a))}}return JT=t,JT}var ZT,V6;function Hve(){if(V6)return ZT;V6=1;var t=Uve(),e=Vve(),n=c7();function a(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return ZT=a,ZT}var ek,H6;function Gve(){if(H6)return ek;H6=1;function t(e,n){return e!=null&&n in Object(e)}return ek=t,ek}var tk,G6;function Wve(){if(G6)return tk;G6=1;var t=T9(),e=UO(),n=fs(),a=VO(),i=HO(),s=hS();function o(l,c,d){c=t(c,l);for(var f=-1,p=c.length,g=!1;++f<p;){var x=s(c[f]);if(!(g=l!=null&&d(l,x)))break;l=l[x]}return g||++f!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&a(x,p)&&(n(l)||e(l)))}return tk=o,tk}var nk,W6;function Kve(){if(W6)return nk;W6=1;var t=Gve(),e=Wve();function n(a,i){return a!=null&&e(a,i,t)}return nk=n,nk}var rk,K6;function Yve(){if(K6)return rk;K6=1;var t=GO(),e=k9(),n=Kve(),a=kO(),i=l7(),s=c7(),o=hS(),l=1,c=2;function d(f,p){return a(f)&&i(p)?s(o(f),p):function(g){var x=e(g,f);return x===void 0&&x===p?n(g,f):t(p,x,l|c)}}return rk=d,rk}var ak,Y6;function Gg(){if(Y6)return ak;Y6=1;function t(e){return e}return ak=t,ak}var ik,Q6;function Qve(){if(Q6)return ik;Q6=1;function t(e){return function(n){return n==null?void 0:n[e]}}return ik=t,ik}var sk,X6;function Xve(){if(X6)return sk;X6=1;var t=MO();function e(n){return function(a){return t(a,n)}}return sk=e,sk}var ok,J6;function Jve(){if(J6)return ok;J6=1;var t=Qve(),e=Xve(),n=kO(),a=hS();function i(s){return n(s)?t(a(s)):e(s)}return ok=i,ok}var lk,Z6;function Ul(){if(Z6)return lk;Z6=1;var t=Hve(),e=Yve(),n=Gg(),a=fs(),i=Jve();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?a(o)?e(o[0],o[1]):t(o):i(o)}return lk=s,lk}var ck,eL;function u7(){if(eL)return ck;eL=1;function t(e,n,a,i){for(var s=e.length,o=a+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return ck=t,ck}var uk,tL;function Zve(){if(tL)return uk;tL=1;function t(e){return e!==e}return uk=t,uk}var dk,nL;function ebe(){if(nL)return dk;nL=1;function t(e,n,a){for(var i=a-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return dk=t,dk}var hk,rL;function tbe(){if(rL)return hk;rL=1;var t=u7(),e=Zve(),n=ebe();function a(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return hk=a,hk}var fk,aL;function nbe(){if(aL)return fk;aL=1;var t=tbe();function e(n,a){var i=n==null?0:n.length;return!!i&&t(n,a,0)>-1}return fk=e,fk}var pk,iL;function rbe(){if(iL)return pk;iL=1;function t(e,n,a){for(var i=-1,s=e==null?0:e.length;++i<s;)if(a(n,e[i]))return!0;return!1}return pk=t,pk}var mk,sL;function abe(){if(sL)return mk;sL=1;function t(){}return mk=t,mk}var gk,oL;function ibe(){if(oL)return gk;oL=1;var t=o7(),e=abe(),n=qO(),a=1/0,i=t&&1/n(new t([,-0]))[1]==a?function(s){return new t(s)}:e;return gk=i,gk}var yk,lL;function sbe(){if(lL)return yk;lL=1;var t=J9(),e=nbe(),n=rbe(),a=e7(),i=ibe(),s=qO(),o=200;function l(c,d,f){var p=-1,g=e,x=c.length,b=!0,j=[],S=j;if(f)b=!1,g=n;else if(x>=o){var _=d?null:i(c);if(_)return s(_);b=!1,g=a,S=new t}else S=d?[]:j;e:for(;++p<x;){var T=c[p],C=d?d(T):T;if(T=f||T!==0?T:0,b&&C===C){for(var E=S.length;E--;)if(S[E]===C)continue e;d&&S.push(C),j.push(T)}else g(S,C,f)||(S!==j&&S.push(C),j.push(T))}return j}return yk=l,yk}var xk,cL;function obe(){if(cL)return xk;cL=1;var t=Ul(),e=sbe();function n(a,i){return a&&a.length?e(a,t(i,2)):[]}return xk=n,xk}var lbe=obe();const uL=Hn(lbe);function d7(t,e,n){return e===!0?uL(t,n):an(e)?uL(t,e):t}function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}var cbe=["ref"];function dL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function yc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dL(Object(n),!0).forEach(function(a){xS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ube(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hL(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,f7(a.key),a)}}function dbe(t,e,n){return e&&hL(t.prototype,e),n&&hL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hbe(t,e,n){return e=zw(e),fbe(t,h7()?Reflect.construct(e,n||[],zw(t).constructor):e.apply(t,n))}function fbe(t,e){if(e&&(dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pbe(t)}function pbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h7=function(){return!!t})()}function zw(t){return zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zw(t)}function mbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mP(t,e)}function mP(t,e){return mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},mP(t,e)}function xS(t,e,n){return e=f7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f7(t){var e=gbe(t,"string");return dg(e)=="symbol"?e:e+""}function gbe(t,e){if(dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ybe(t,e){if(t==null)return{};var n=xbe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function xbe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function vbe(t){return t.value}function bbe(t,e){if(Ce.isValidElement(t))return Ce.cloneElement(t,e);if(typeof t=="function")return Ce.createElement(t,e);e.ref;var n=ybe(e,cbe);return Ce.createElement(zO,n)}var fL=1,Dc=function(t){function e(){var n;ube(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=hbe(this,e,[].concat(i)),xS(n,"lastBoundingBox",{width:-1,height:-1}),n}return mbe(e,t),dbe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>fL||Math.abs(i.height-this.lastBoundingBox.height)>fL)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,a&&a(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,f=i.chartHeight,p,g;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&s==="vertical"){var x=this.getBBoxSnapshot();p={left:((d||0)-x.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();g={top:((f||0)-b.height)/2}}else g=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return yc(yc({},p),g)}},{key:"render",value:function(){var a=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,f=i.payload,p=yc(yc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Ce.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){a.wrapperNode=x}},bbe(s,yc(yc({},this.props),{},{payload:d7(f,d,vbe)})))}}],[{key:"getWithHeight",value:function(a,i){var s=yc(yc({},this.defaultProps),a.props),o=s.layout;return o==="vertical"&&Nt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||i}:null}}])}(v.PureComponent);xS(Dc,"displayName","Legend");xS(Dc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var vk,pL;function jbe(){if(pL)return vk;pL=1;var t=Fb(),e=UO(),n=fs(),a=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(a&&s&&s[a])}return vk=i,vk}var bk,mL;function p7(){if(mL)return bk;mL=1;var t=n7(),e=jbe();function n(a,i,s,o,l){var c=-1,d=a.length;for(s||(s=e),l||(l=[]);++c<d;){var f=a[c];i>0&&s(f)?i>1?n(f,i-1,s,o,l):t(l,f):o||(l[l.length]=f)}return l}return bk=n,bk}var jk,gL;function wbe(){if(gL)return jk;gL=1;function t(e){return function(n,a,i){for(var s=-1,o=Object(n),l=i(n),c=l.length;c--;){var d=l[e?c:++s];if(a(o[d],d,o)===!1)break}return n}}return jk=t,jk}var wk,yL;function Nbe(){if(yL)return wk;yL=1;var t=wbe(),e=t();return wk=e,wk}var Nk,xL;function m7(){if(xL)return Nk;xL=1;var t=Nbe(),e=yS();function n(a,i){return a&&t(a,i,e)}return Nk=n,Nk}var Sk,vL;function Sbe(){if(vL)return Sk;vL=1;var t=Bb();function e(n,a){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=a?o:-1,c=Object(i);(a?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return Sk=e,Sk}var _k,bL;function WO(){if(bL)return _k;bL=1;var t=m7(),e=Sbe(),n=e(t);return _k=n,_k}var Ck,jL;function g7(){if(jL)return Ck;jL=1;var t=WO(),e=Bb();function n(a,i){var s=-1,o=e(a)?Array(a.length):[];return t(a,function(l,c,d){o[++s]=i(l,c,d)}),o}return Ck=n,Ck}var Tk,wL;function _be(){if(wL)return Tk;wL=1;function t(e,n){var a=e.length;for(e.sort(n);a--;)e[a]=e[a].value;return e}return Tk=t,Tk}var kk,NL;function Cbe(){if(NL)return kk;NL=1;var t=Ug();function e(n,a){if(n!==a){var i=n!==void 0,s=n===null,o=n===n,l=t(n),c=a!==void 0,d=a===null,f=a===a,p=t(a);if(!d&&!p&&!l&&n>a||l&&c&&f&&!d&&!p||s&&c&&f||!i&&f||!o)return 1;if(!s&&!l&&!p&&n<a||p&&i&&o&&!s&&!l||d&&i&&o||!c&&o||!f)return-1}return 0}return kk=e,kk}var Ak,SL;function Tbe(){if(SL)return Ak;SL=1;var t=Cbe();function e(n,a,i){for(var s=-1,o=n.criteria,l=a.criteria,c=o.length,d=i.length;++s<c;){var f=t(o[s],l[s]);if(f){if(s>=d)return f;var p=i[s];return f*(p=="desc"?-1:1)}}return n.index-a.index}return Ak=e,Ak}var Ek,_L;function kbe(){if(_L)return Ek;_L=1;var t=OO(),e=MO(),n=Ul(),a=g7(),i=_be(),s=a7(),o=Tbe(),l=Gg(),c=fs();function d(f,p,g){p.length?p=t(p,function(j){return c(j)?function(S){return e(S,j.length===1?j[0]:j)}:j}):p=[l];var x=-1;p=t(p,s(n));var b=a(f,function(j,S,_){var T=t(p,function(C){return C(j)});return{criteria:T,index:++x,value:j}});return i(b,function(j,S){return o(j,S,g)})}return Ek=d,Ek}var Pk,CL;function Abe(){if(CL)return Pk;CL=1;function t(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}return Pk=t,Pk}var Dk,TL;function Ebe(){if(TL)return Dk;TL=1;var t=Abe(),e=Math.max;function n(a,i,s){return i=e(i===void 0?a.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),d=Array(c);++l<c;)d[l]=o[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=o[l];return f[i]=s(d),t(a,this,f)}}return Dk=n,Dk}var Ok,kL;function Pbe(){if(kL)return Ok;kL=1;function t(e){return function(){return e}}return Ok=t,Ok}var Mk,AL;function y7(){if(AL)return Mk;AL=1;var t=If(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Mk=e,Mk}var Ik,EL;function Dbe(){if(EL)return Ik;EL=1;var t=Pbe(),e=y7(),n=Gg(),a=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return Ik=a,Ik}var Rk,PL;function Obe(){if(PL)return Rk;PL=1;var t=800,e=16,n=Date.now;function a(i){var s=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Rk=a,Rk}var Lk,DL;function Mbe(){if(DL)return Lk;DL=1;var t=Dbe(),e=Obe(),n=e(t);return Lk=n,Lk}var Fk,OL;function Ibe(){if(OL)return Fk;OL=1;var t=Gg(),e=Ebe(),n=Mbe();function a(i,s){return n(e(i,s,t),i+"")}return Fk=a,Fk}var $k,ML;function vS(){if(ML)return $k;ML=1;var t=EO(),e=Bb(),n=VO(),a=bd();function i(s,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return $k=i,$k}var Bk,IL;function Rbe(){if(IL)return Bk;IL=1;var t=p7(),e=kbe(),n=Ibe(),a=vS(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&a(s,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return Bk=i,Bk}var Lbe=Rbe();const KO=Hn(Lbe);function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function gP(){return gP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},gP.apply(this,arguments)}function Fbe(t,e){return qbe(t)||zbe(t,e)||Bbe(t,e)||$be()}function $be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bbe(t,e){if(t){if(typeof t=="string")return RL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RL(t,e)}}function RL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function zbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function qbe(t){if(Array.isArray(t))return t}function LL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function zk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LL(Object(n),!0).forEach(function(a){Ube(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Ube(t,e,n){return e=Vbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vbe(t){var e=Hbe(t,"string");return Bv(e)=="symbol"?e:e+""}function Hbe(t,e){if(Bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Bv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gbe(t){return Array.isArray(t)&&Aa(t[0])&&Aa(t[1])?t.join(" ~ "):t}var Wbe=function(e){var n=e.separator,a=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,f=e.payload,p=e.formatter,g=e.itemSorter,x=e.wrapperClassName,b=e.labelClassName,j=e.label,S=e.labelFormatter,_=e.accessibilityLayer,T=_===void 0?!1:_,C=function(){if(f&&f.length){var V={padding:0,margin:0},H=(g?KO(f,g):f).map(function(K,W){if(K.type==="none")return null;var B=zk({display:"block",paddingTop:4,paddingBottom:4,color:K.color||"#000"},l),G=K.formatter||p||Gbe,ee=K.value,X=K.name,$=ee,ce=X;if(G&&$!=null&&ce!=null){var xe=G(ee,X,K,W,f);if(Array.isArray(xe)){var Y=Fbe(xe,2);$=Y[0],ce=Y[1]}else $=xe}return Ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:B},Aa(ce)?Ce.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Aa(ce)?Ce.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Ce.createElement("span",{className:"recharts-tooltip-item-value"},$),Ce.createElement("span",{className:"recharts-tooltip-item-unit"},K.unit||""))});return Ce.createElement("ul",{className:"recharts-tooltip-item-list",style:V},H)}return null},E=zk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=zk({margin:0},d),P=!dn(j),I=P?j:"",R=fn("recharts-default-tooltip",x),z=fn("recharts-tooltip-label",b);P&&S&&f!==void 0&&f!==null&&(I=S(j,f));var q=T?{role:"status","aria-live":"assertive"}:{};return Ce.createElement("div",gP({className:R,style:E},q),Ce.createElement("p",{className:z,style:k},Ce.isValidElement(I)?I:"".concat(I)),C())};function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function Pj(t,e,n){return e=Kbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kbe(t){var e=Ybe(t,"string");return zv(e)=="symbol"?e:e+""}function Ybe(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(zv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jx="recharts-tooltip-wrapper",Qbe={visibility:"hidden"};function Xbe(t){var e=t.coordinate,n=t.translateX,a=t.translateY;return fn(Jx,Pj(Pj(Pj(Pj({},"".concat(Jx,"-right"),Nt(n)&&e&&Nt(e.x)&&n>=e.x),"".concat(Jx,"-left"),Nt(n)&&e&&Nt(e.x)&&n<e.x),"".concat(Jx,"-bottom"),Nt(a)&&e&&Nt(e.y)&&a>=e.y),"".concat(Jx,"-top"),Nt(a)&&e&&Nt(e.y)&&a<e.y))}function FL(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(s&&Nt(s[a]))return s[a];var f=n[a]-l-i,p=n[a]+i;if(e[a])return o[a]?f:p;if(o[a]){var g=f,x=c[a];return g<x?Math.max(p,c[a]):Math.max(f,c[a])}var b=p+l,j=c[a]+d;return b>j?Math.max(f,c[a]):Math.max(p,c[a])}function Jbe(t){var e=t.translateX,n=t.translateY,a=t.useTranslate3d;return{transform:a?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Zbe(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,f,p;return o.height>0&&o.width>0&&n?(f=FL({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=FL({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Jbe({translateX:f,translateY:p,useTranslate3d:l})):d=Qbe,{cssProperties:d,cssClasses:Xbe({translateX:f,translateY:p,coordinate:n})}}function hg(t){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(t)}function $L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function BL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$L(Object(n),!0).forEach(function(a){xP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$L(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function e0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t0e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,v7(a.key),a)}}function n0e(t,e,n){return e&&t0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function r0e(t,e,n){return e=qw(e),a0e(t,x7()?Reflect.construct(e,n||[],qw(t).constructor):e.apply(t,n))}function a0e(t,e){if(e&&(hg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i0e(t)}function i0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x7=function(){return!!t})()}function qw(t){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qw(t)}function s0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yP(t,e)}function yP(t,e){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},yP(t,e)}function xP(t,e,n){return e=v7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v7(t){var e=o0e(t,"string");return hg(e)=="symbol"?e:e+""}function o0e(t,e){if(hg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(hg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zL=1,l0e=function(t){function e(){var n;e0e(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r0e(this,e,[].concat(i)),xP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),xP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),n}return s0e(e,t),n0e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>zL||Math.abs(a.height-this.state.lastBoundingBox.height)>zL)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,f=i.coordinate,p=i.hasPayload,g=i.isAnimationActive,x=i.offset,b=i.position,j=i.reverseDirection,S=i.useTranslate3d,_=i.viewBox,T=i.wrapperStyle,C=Zbe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:b,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:S,viewBox:_}),E=C.cssClasses,k=C.cssProperties,P=BL(BL({transition:g&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},T);return Ce.createElement("div",{tabIndex:-1,className:E,style:P,ref:function(R){a.wrapperNode=R}},d)}}])}(v.PureComponent),c0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jd={isSsr:c0e()};function fg(t){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}function qL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function UL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qL(Object(n),!0).forEach(function(a){YO(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function u0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d0e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,j7(a.key),a)}}function h0e(t,e,n){return e&&d0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function f0e(t,e,n){return e=Uw(e),p0e(t,b7()?Reflect.construct(e,n||[],Uw(t).constructor):e.apply(t,n))}function p0e(t,e){if(e&&(fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m0e(t)}function m0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b7=function(){return!!t})()}function Uw(t){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uw(t)}function g0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vP(t,e)}function vP(t,e){return vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},vP(t,e)}function YO(t,e,n){return e=j7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j7(t){var e=y0e(t,"string");return fg(e)=="symbol"?e:e+""}function y0e(t,e){if(fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(fg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function x0e(t){return t.dataKey}function v0e(t,e){return Ce.isValidElement(t)?Ce.cloneElement(t,e):typeof t=="function"?Ce.createElement(t,e):Ce.createElement(Wbe,e)}var Ii=function(t){function e(){return u0e(this,e),f0e(this,e,arguments)}return g0e(e,t),h0e(e,[{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,f=i.coordinate,p=i.filterNull,g=i.isAnimationActive,x=i.offset,b=i.payload,j=i.payloadUniqBy,S=i.position,_=i.reverseDirection,T=i.useTranslate3d,C=i.viewBox,E=i.wrapperStyle,k=b??[];p&&k.length&&(k=d7(b.filter(function(I){return I.value!=null&&(I.hide!==!0||a.props.includeHidden)}),j,x0e));var P=k.length>0;return Ce.createElement(l0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:g,active:s,coordinate:f,hasPayload:P,offset:x,position:S,reverseDirection:_,useTranslate3d:T,viewBox:C,wrapperStyle:E},v0e(d,UL(UL({},this.props),{},{payload:k})))}}])}(v.PureComponent);YO(Ii,"displayName","Tooltip");YO(Ii,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var qk,VL;function b0e(){if(VL)return qk;VL=1;var t=w9(),e=bd(),n="Expected a function";function a(i,s,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,s,{leading:l,maxWait:s,trailing:c})}return qk=a,qk}var j0e=b0e();const w7=Hn(j0e);function qv(t){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(t)}function HL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Dj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HL(Object(n),!0).forEach(function(a){w0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function w0e(t,e,n){return e=N0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N0e(t){var e=S0e(t,"string");return qv(e)=="symbol"?e:e+""}function S0e(t,e){if(qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _0e(t,e){return A0e(t)||k0e(t,e)||T0e(t,e)||C0e()}function C0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T0e(t,e){if(t){if(typeof t=="string")return GL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GL(t,e)}}function GL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function k0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function A0e(t){if(Array.isArray(t))return t}var ow=v.forwardRef(function(t,e){var n=t.aspect,a=t.initialDimension,i=a===void 0?{width:-1,height:-1}:a,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,f=d===void 0?0:d,p=t.minHeight,g=t.maxHeight,x=t.children,b=t.debounce,j=b===void 0?0:b,S=t.id,_=t.className,T=t.onResize,C=t.style,E=C===void 0?{}:C,k=v.useRef(null),P=v.useRef();P.current=T,v.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var I=v.useState({containerWidth:i.width,containerHeight:i.height}),R=_0e(I,2),z=R[0],q=R[1],F=v.useCallback(function(H,K){q(function(W){var B=Math.round(H),G=Math.round(K);return W.containerWidth===B&&W.containerHeight===G?W:{containerWidth:B,containerHeight:G}})},[]);v.useEffect(function(){var H=function(X){var $,ce=X[0].contentRect,xe=ce.width,Y=ce.height;F(xe,Y),($=P.current)===null||$===void 0||$.call(P,xe,Y)};j>0&&(H=w7(H,j,{trailing:!0,leading:!1}));var K=new ResizeObserver(H),W=k.current.getBoundingClientRect(),B=W.width,G=W.height;return F(B,G),K.observe(k.current),function(){K.disconnect()}},[F,j]);var V=v.useMemo(function(){var H=z.containerWidth,K=z.containerHeight;if(H<0||K<0)return null;zo(Jh(o)||Jh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),zo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=Jh(o)?H:o,B=Jh(c)?K:c;n&&n>0&&(W?B=W/n:B&&(W=B*n),g&&B>g&&(B=g)),zo(W>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,B,o,c,f,p,n);var G=!Array.isArray(x)&&Pc(x.type).endsWith("Chart");return Ce.Children.map(x,function(ee){return Ce.isValidElement(ee)?v.cloneElement(ee,Dj({width:W,height:B},G?{style:Dj({height:"100%",width:"100%",maxHeight:B,maxWidth:W},ee.props.style)}:{})):ee})},[n,x,c,g,p,f,z,o]);return Ce.createElement("div",{id:S?"".concat(S):void 0,className:fn("recharts-responsive-container",_),style:Dj(Dj({},E),{},{width:o,height:c,minWidth:f,minHeight:p,maxHeight:g}),ref:k},V)}),zb=function(e){return null};zb.displayName="Cell";function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}function WL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function bP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WL(Object(n),!0).forEach(function(a){E0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function E0e(t,e,n){return e=P0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P0e(t){var e=D0e(t,"string");return Uv(e)=="symbol"?e:e+""}function D0e(t,e){if(Uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Uv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bm={widthCache:{},cacheCount:0},O0e=2e3,M0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},KL="recharts_measurement_span";function I0e(t){var e=bP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var wv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||jd.isSsr)return{width:0,height:0};var a=I0e(n),i=JSON.stringify({text:e,copyStyle:a});if(bm.widthCache[i])return bm.widthCache[i];try{var s=document.getElementById(KL);s||(s=document.createElement("span"),s.setAttribute("id",KL),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=bP(bP({},M0e),a);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return bm.widthCache[i]=c,++bm.cacheCount>O0e&&(bm.cacheCount=0,bm.widthCache={}),c}catch{return{width:0,height:0}}},R0e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Vv(t){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(t)}function Vw(t,e){return B0e(t)||$0e(t,e)||F0e(t,e)||L0e()}function L0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F0e(t,e){if(t){if(typeof t=="string")return YL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YL(t,e)}}function YL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function $0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function B0e(t){if(Array.isArray(t))return t}function z0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QL(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,U0e(a.key),a)}}function q0e(t,e,n){return e&&QL(t.prototype,e),n&&QL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function U0e(t){var e=V0e(t,"string");return Vv(e)=="symbol"?e:e+""}function V0e(t,e){if(Vv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Vv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var XL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,H0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,G0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,N7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},W0e=Object.keys(N7),Pm="NaN";function K0e(t,e){return t*N7[e]}var Oj=function(){function t(e,n){z0e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!H0e.test(n)&&(this.num=NaN,this.unit=""),W0e.includes(n)&&(this.num=K0e(e,n),this.unit="px")}return q0e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,i=(a=G0e.exec(n))!==null&&a!==void 0?a:[],s=Vw(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function S7(t){if(t.includes(Pm))return Pm;for(var e=t;e.includes("*")||e.includes("/");){var n,a=(n=XL.exec(e))!==null&&n!==void 0?n:[],i=Vw(a,4),s=i[1],o=i[2],l=i[3],c=Oj.parse(s??""),d=Oj.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Pm;e=e.replace(XL,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,g=(p=JL.exec(e))!==null&&p!==void 0?p:[],x=Vw(g,4),b=x[1],j=x[2],S=x[3],_=Oj.parse(b??""),T=Oj.parse(S??""),C=j==="+"?_.add(T):_.subtract(T);if(C.isNaN())return Pm;e=e.replace(JL,C.toString())}return e}var ZL=/\(([^()]*)\)/;function Y0e(t){for(var e=t;e.includes("(");){var n=ZL.exec(e),a=Vw(n,2),i=a[1];e=e.replace(ZL,S7(i))}return e}function Q0e(t){var e=t.replace(/\s+/g,"");return e=Y0e(e),e=S7(e),e}function X0e(t){try{return Q0e(t)}catch{return Pm}}function Uk(t){var e=X0e(t.slice(5,-1));return e===Pm?"":e}var J0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Z0e=["dx","dy","angle","className","breakAll"];function jP(){return jP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},jP.apply(this,arguments)}function eF(t,e){if(t==null)return{};var n=e1e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function e1e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function tF(t,e){return a1e(t)||r1e(t,e)||n1e(t,e)||t1e()}function t1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n1e(t,e){if(t){if(typeof t=="string")return nF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nF(t,e)}}function nF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function a1e(t){if(Array.isArray(t))return t}var _7=/[ \f\n\r\t\v\u2028\u2029]+/,C7=function(e){var n=e.children,a=e.breakAll,i=e.style;try{var s=[];dn(n)||(a?s=n.toString().split(""):s=n.toString().split(_7));var o=s.map(function(c){return{word:c,width:wv(c,i).width}}),l=a?0:wv("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},i1e=function(e,n,a,i,s){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,f=Nt(o),p=l,g=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(B,G){var ee=G.word,X=G.width,$=B[B.length-1];if($&&(i==null||s||$.width+X+a<Number(i)))$.words.push(ee),$.width+=X+a;else{var ce={words:[ee],width:X};B.push(ce)}return B},[])},x=g(n),b=function(W){return W.reduce(function(B,G){return B.width>G.width?B:G})};if(!f)return x;for(var j="",S=function(W){var B=p.slice(0,W),G=C7({breakAll:d,style:c,children:B+j}).wordsWithComputedWidth,ee=g(G),X=ee.length>o||b(ee).width>Number(i);return[X,ee]},_=0,T=p.length-1,C=0,E;_<=T&&C<=p.length-1;){var k=Math.floor((_+T)/2),P=k-1,I=S(P),R=tF(I,2),z=R[0],q=R[1],F=S(k),V=tF(F,1),H=V[0];if(!z&&!H&&(_=k+1),z&&H&&(T=k-1),!z&&H){E=q;break}C++}return E||x},rF=function(e){var n=dn(e)?[]:e.toString().split(_7);return[{words:n}]},s1e=function(e){var n=e.width,a=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((n||a)&&!jd.isSsr){var c,d,f=C7({breakAll:o,children:i,style:s});if(f){var p=f.wordsWithComputedWidth,g=f.spaceWidth;c=p,d=g}else return rF(i);return i1e({breakAll:o,children:i,maxLines:l,style:s},c,d,n,a)}return rF(i)},aF="#808080",kf=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,f=e.scaleToFit,p=f===void 0?!1:f,g=e.textAnchor,x=g===void 0?"start":g,b=e.verticalAnchor,j=b===void 0?"end":b,S=e.fill,_=S===void 0?aF:S,T=eF(e,J0e),C=v.useMemo(function(){return s1e({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),E=T.dx,k=T.dy,P=T.angle,I=T.className,R=T.breakAll,z=eF(T,Z0e);if(!Aa(a)||!Aa(s))return null;var q=a+(Nt(E)?E:0),F=s+(Nt(k)?k:0),V;switch(j){case"start":V=Uk("calc(".concat(d,")"));break;case"middle":V=Uk("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:V=Uk("calc(".concat(C.length-1," * -").concat(l,")"));break}var H=[];if(p){var K=C[0].width,W=T.width;H.push("scale(".concat((Nt(W)?W/K:1)/K,")"))}return P&&H.push("rotate(".concat(P,", ").concat(q,", ").concat(F,")")),H.length&&(z.transform=H.join(" ")),Ce.createElement("text",jP({},zt(z,!0),{x:q,y:F,className:fn("recharts-text",I),textAnchor:x,fill:_.includes("url")?aF:_}),C.map(function(B,G){var ee=B.words.join(R?"":" ");return Ce.createElement("tspan",{x:q,dy:G===0?V:l,key:"".concat(ee,"-").concat(G)},ee)}))};function ld(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function o1e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function QO(t){let e,n,a;t.length!==2?(e=ld,n=(l,c)=>ld(t(l),c),a=(l,c)=>t(l)-c):(e=t===ld||t===o1e?t:l1e,n=t,a=t);function i(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<0?d=p+1:f=p}while(d<f)}return d}function s(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function o(l,c,d=0,f=l.length){const p=i(l,c,d,f-1);return p>d&&a(l[p-1],c)>-a(l[p],c)?p-1:p}return{left:i,center:o,right:s}}function l1e(){return 0}function T7(t){return t===null?NaN:+t}function*c1e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const u1e=QO(ld),qb=u1e.right;QO(T7).center;class iF extends Map{constructor(e,n=f1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[a,i]of e)this.set(a,i)}get(e){return super.get(sF(this,e))}has(e){return super.has(sF(this,e))}set(e,n){return super.set(d1e(this,e),n)}delete(e){return super.delete(h1e(this,e))}}function sF({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):n}function d1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):(t.set(a,n),n)}function h1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)&&(n=t.get(a),t.delete(a)),n}function f1e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function p1e(t=ld){if(t===ld)return k7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const a=t(e,n);return a||a===0?a:(t(n,n)===0)-(t(e,e)===0)}}function k7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const m1e=Math.sqrt(50),g1e=Math.sqrt(10),y1e=Math.sqrt(2);function Hw(t,e,n){const a=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(a)),s=a/Math.pow(10,i),o=s>=m1e?10:s>=g1e?5:s>=y1e?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=n&&n<2?Hw(t,e,n*2):[l,c,d]}function wP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const a=e<t,[i,s,o]=a?Hw(e,t,n):Hw(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(s-d)/-o;else for(let d=0;d<l;++d)c[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function NP(t,e,n){return e=+e,t=+t,n=+n,Hw(t,e,n)[2]}function SP(t,e,n){e=+e,t=+t,n=+n;const a=e<t,i=a?NP(e,t,n):NP(t,e,n);return(a?-1:1)*(i<0?1/-i:i)}function oF(t,e){let n;for(const a of t)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function lF(t,e){let n;for(const a of t)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function A7(t,e,n=0,a=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(t.length-1,a)),!(n<=e&&e<=a))return t;for(i=i===void 0?k7:p1e(i);a>n;){if(a-n>600){const c=a-n+1,d=e-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),x=Math.max(n,Math.floor(e-d*p/c+g)),b=Math.min(a,Math.floor(e+(c-d)*p/c+g));A7(t,e,x,b,i)}const s=t[e];let o=n,l=a;for(Zx(t,n,e),i(t[a],s)>0&&Zx(t,n,a);o<l;){for(Zx(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Zx(t,n,l):(++l,Zx(t,l,a)),l<=e&&(n=l+1),e<=l&&(a=l-1)}return t}function Zx(t,e,n){const a=t[e];t[e]=t[n],t[n]=a}function x1e(t,e,n){if(t=Float64Array.from(c1e(t)),!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return lF(t);if(e>=1)return oF(t);var a,i=(a-1)*e,s=Math.floor(i),o=oF(A7(t,s).subarray(0,s+1)),l=lF(t.subarray(s+1));return o+(l-o)*(i-s)}}function v1e(t,e,n=T7){if(!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return+n(t[0],0,t);if(e>=1)return+n(t[a-1],a-1,t);var a,i=(a-1)*e,s=Math.floor(i),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function b1e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var a=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++a<i;)s[a]=t+a*n;return s}function uo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Kc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const _P=Symbol("implicit");function XO(){var t=new iF,e=[],n=[],a=_P;function i(s){let o=t.get(s);if(o===void 0){if(a!==_P)return a;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new iF;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return XO(e,n).unknown(a)},uo.apply(i,arguments),i}function Hv(){var t=XO().unknown(void 0),e=t.domain,n=t.range,a=0,i=1,s,o,l=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var g=e().length,x=i<a,b=x?i:a,j=x?a:i;s=(j-b)/Math.max(1,g-c+d*2),l&&(s=Math.floor(s)),b+=(j-b-s*(g-c))*f,o=s*(1-c),l&&(b=Math.round(b),o=Math.round(o));var S=b1e(g).map(function(_){return b+s*_});return n(x?S.reverse():S)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([a,i]=g,a=+a,i=+i,p()):[a,i]},t.rangeRound=function(g){return[a,i]=g,a=+a,i=+i,l=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(g){return arguments.length?(l=!!g,p()):l},t.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return Hv(e(),[a,i]).round(l).paddingInner(c).paddingOuter(d).align(f)},uo.apply(p(),arguments)}function E7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return E7(e())},t}function Nv(){return E7(Hv.apply(null,arguments).paddingInner(1))}function JO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function P7(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function Ub(){}var Gv=.7,Gw=1/Gv,zm="\\s*([+-]?\\d+)\\s*",Wv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j1e=/^#([0-9a-f]{3,8})$/,w1e=new RegExp(`^rgb\\(${zm},${zm},${zm}\\)$`),N1e=new RegExp(`^rgb\\(${Rl},${Rl},${Rl}\\)$`),S1e=new RegExp(`^rgba\\(${zm},${zm},${zm},${Wv}\\)$`),_1e=new RegExp(`^rgba\\(${Rl},${Rl},${Rl},${Wv}\\)$`),C1e=new RegExp(`^hsl\\(${Wv},${Rl},${Rl}\\)$`),T1e=new RegExp(`^hsla\\(${Wv},${Rl},${Rl},${Wv}\\)$`),cF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JO(Ub,Kv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:uF,formatHex:uF,formatHex8:k1e,formatHsl:A1e,formatRgb:dF,toString:dF});function uF(){return this.rgb().formatHex()}function k1e(){return this.rgb().formatHex8()}function A1e(){return D7(this).formatHsl()}function dF(){return this.rgb().formatRgb()}function Kv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=j1e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?hF(e):n===3?new os(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Mj(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Mj(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=w1e.exec(t))?new os(e[1],e[2],e[3],1):(e=N1e.exec(t))?new os(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=S1e.exec(t))?Mj(e[1],e[2],e[3],e[4]):(e=_1e.exec(t))?Mj(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=C1e.exec(t))?mF(e[1],e[2]/100,e[3]/100,1):(e=T1e.exec(t))?mF(e[1],e[2]/100,e[3]/100,e[4]):cF.hasOwnProperty(t)?hF(cF[t]):t==="transparent"?new os(NaN,NaN,NaN,0):null}function hF(t){return new os(t>>16&255,t>>8&255,t&255,1)}function Mj(t,e,n,a){return a<=0&&(t=e=n=NaN),new os(t,e,n,a)}function E1e(t){return t instanceof Ub||(t=Kv(t)),t?(t=t.rgb(),new os(t.r,t.g,t.b,t.opacity)):new os}function CP(t,e,n,a){return arguments.length===1?E1e(t):new os(t,e,n,a??1)}function os(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}JO(os,CP,P7(Ub,{brighter(t){return t=t==null?Gw:Math.pow(Gw,t),new os(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gv:Math.pow(Gv,t),new os(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new os(ff(this.r),ff(this.g),ff(this.b),Ww(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fF,formatHex:fF,formatHex8:P1e,formatRgb:pF,toString:pF}));function fF(){return`#${Zh(this.r)}${Zh(this.g)}${Zh(this.b)}`}function P1e(){return`#${Zh(this.r)}${Zh(this.g)}${Zh(this.b)}${Zh((isNaN(this.opacity)?1:this.opacity)*255)}`}function pF(){const t=Ww(this.opacity);return`${t===1?"rgb(":"rgba("}${ff(this.r)}, ${ff(this.g)}, ${ff(this.b)}${t===1?")":`, ${t})`}`}function Ww(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ff(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Zh(t){return t=ff(t),(t<16?"0":"")+t.toString(16)}function mF(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Fo(t,e,n,a)}function D7(t){if(t instanceof Fo)return new Fo(t.h,t.s,t.l,t.opacity);if(t instanceof Ub||(t=Kv(t)),!t)return new Fo;if(t instanceof Fo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,i=Math.min(e,n,a),s=Math.max(e,n,a),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-a)/l+(n<a)*6:n===s?o=(a-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Fo(o,l,c,t.opacity)}function D1e(t,e,n,a){return arguments.length===1?D7(t):new Fo(t,e,n,a??1)}function Fo(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}JO(Fo,D1e,P7(Ub,{brighter(t){return t=t==null?Gw:Math.pow(Gw,t),new Fo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gv:Math.pow(Gv,t),new Fo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,i=2*n-a;return new os(Vk(t>=240?t-240:t+120,i,a),Vk(t,i,a),Vk(t<120?t+240:t-120,i,a),this.opacity)},clamp(){return new Fo(gF(this.h),Ij(this.s),Ij(this.l),Ww(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ww(this.opacity);return`${t===1?"hsl(":"hsla("}${gF(this.h)}, ${Ij(this.s)*100}%, ${Ij(this.l)*100}%${t===1?")":`, ${t})`}`}}));function gF(t){return t=(t||0)%360,t<0?t+360:t}function Ij(t){return Math.max(0,Math.min(1,t||0))}function Vk(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ZO=t=>()=>t;function O1e(t,e){return function(n){return t+n*e}}function M1e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}function I1e(t){return(t=+t)==1?O7:function(e,n){return n-e?M1e(e,n,t):ZO(isNaN(e)?n:e)}}function O7(t,e){var n=e-t;return n?O1e(t,n):ZO(isNaN(t)?e:t)}const yF=function t(e){var n=I1e(e);function a(i,s){var o=n((i=CP(i)).r,(s=CP(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),d=O7(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=c(f),i.opacity=d(f),i+""}}return a.gamma=t,a}(1);function R1e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,a=e.slice(),i;return function(s){for(i=0;i<n;++i)a[i]=t[i]*(1-s)+e[i]*s;return a}}function L1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function F1e(t,e){var n=e?e.length:0,a=t?Math.min(n,t.length):0,i=new Array(a),s=new Array(n),o;for(o=0;o<a;++o)i[o]=Wg(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<a;++o)s[o]=i[o](l);return s}}function $1e(t,e){var n=new Date;return t=+t,e=+e,function(a){return n.setTime(t*(1-a)+e*a),n}}function Kw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function B1e(t,e){var n={},a={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Wg(t[i],e[i]):a[i]=e[i];return function(s){for(i in n)a[i]=n[i](s);return a}}var TP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hk=new RegExp(TP.source,"g");function z1e(t){return function(){return t}}function q1e(t){return function(e){return t(e)+""}}function U1e(t,e){var n=TP.lastIndex=Hk.lastIndex=0,a,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(a=TP.exec(t))&&(i=Hk.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(a=a[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Kw(a,i)})),n=Hk.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?q1e(c[0].x):z1e(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)l[(p=c[f]).i]=p.x(d);return l.join("")})}function Wg(t,e){var n=typeof e,a;return e==null||n==="boolean"?ZO(e):(n==="number"?Kw:n==="string"?(a=Kv(e))?(e=a,yF):U1e:e instanceof Kv?yF:e instanceof Date?$1e:L1e(e)?R1e:Array.isArray(e)?F1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?B1e:Kw)(t,e)}function eM(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function V1e(t,e){e===void 0&&(e=t,t=Wg);for(var n=0,a=e.length-1,i=e[0],s=new Array(a<0?0:a);n<a;)s[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return s[l](o-l)}}function H1e(t){return function(){return t}}function Yw(t){return+t}var xF=[0,1];function $i(t){return t}function kP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:H1e(isNaN(e)?NaN:.5)}function G1e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(a){return Math.max(t,Math.min(e,a))}}function W1e(t,e,n){var a=t[0],i=t[1],s=e[0],o=e[1];return i<a?(a=kP(i,a),s=n(o,s)):(a=kP(a,i),s=n(s,o)),function(l){return s(a(l))}}function K1e(t,e,n){var a=Math.min(t.length,e.length)-1,i=new Array(a),s=new Array(a),o=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<a;)i[o]=kP(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=qb(t,l,1,a)-1;return s[c](i[c](l))}}function Vb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bS(){var t=xF,e=xF,n=Wg,a,i,s,o=$i,l,c,d;function f(){var g=Math.min(t.length,e.length);return o!==$i&&(o=G1e(t[0],t[g-1])),l=g>2?K1e:W1e,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?s:(c||(c=l(t.map(a),e,n)))(a(o(g)))}return p.invert=function(g){return o(i((d||(d=l(e,t.map(a),Kw)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Yw),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=eM,f()},p.clamp=function(g){return arguments.length?(o=g?!0:$i,f()):o!==$i},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,x){return a=g,i=x,f()}}function tM(){return bS()($i,$i)}function Y1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Qw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,a=t.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+t.slice(n+1)]}function pg(t){return t=Qw(Math.abs(t)),t?t[1]:NaN}function Q1e(t,e){return function(n,a){for(var i=n.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>a));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function X1e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var J1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yv(t){if(!(e=J1e.exec(t)))throw new Error("invalid format: "+t);var e;return new nM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yv.prototype=nM.prototype;function nM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}nM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Z1e(t){e:for(var e=t.length,n=1,a=-1,i;n<e;++n)switch(t[n]){case".":a=i=n;break;case"0":a===0&&(a=n),i=n;break;default:if(!+t[n])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(i+1):t}var M7;function eje(t,e){var n=Qw(t,e);if(!n)return t+"";var a=n[0],i=n[1],s=i-(M7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=a.length;return s===o?a:s>o?a+new Array(s-o+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+Qw(t,Math.max(0,e+s-1))[0]}function vF(t,e){var n=Qw(t,e);if(!n)return t+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const bF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Y1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>vF(t*100,e),r:vF,s:eje,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function jF(t){return t}var wF=Array.prototype.map,NF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function tje(t){var e=t.grouping===void 0||t.thousands===void 0?jF:Q1e(wF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?jF:X1e(wF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=Yv(p);var g=p.fill,x=p.align,b=p.sign,j=p.symbol,S=p.zero,_=p.width,T=p.comma,C=p.precision,E=p.trim,k=p.type;k==="n"?(T=!0,k="g"):bF[k]||(C===void 0&&(C=12),E=!0,k="g"),(S||g==="0"&&x==="=")&&(S=!0,g="0",x="=");var P=j==="$"?n:j==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",I=j==="$"?a:/[%p]/.test(k)?o:"",R=bF[k],z=/[defgprs%]/.test(k);C=C===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function q(F){var V=P,H=I,K,W,B;if(k==="c")H=R(F)+H,F="";else{F=+F;var G=F<0||1/F<0;if(F=isNaN(F)?c:R(Math.abs(F),C),E&&(F=Z1e(F)),G&&+F==0&&b!=="+"&&(G=!1),V=(G?b==="("?b:l:b==="-"||b==="("?"":b)+V,H=(k==="s"?NF[8+M7/3]:"")+H+(G&&b==="("?")":""),z){for(K=-1,W=F.length;++K<W;)if(B=F.charCodeAt(K),48>B||B>57){H=(B===46?i+F.slice(K+1):F.slice(K))+H,F=F.slice(0,K);break}}}T&&!S&&(F=e(F,1/0));var ee=V.length+F.length+H.length,X=ee<_?new Array(_-ee+1).join(g):"";switch(T&&S&&(F=e(X+F,X.length?_-H.length:1/0),X=""),x){case"<":F=V+F+H+X;break;case"=":F=V+X+F+H;break;case"^":F=X.slice(0,ee=X.length>>1)+V+F+H+X.slice(ee);break;default:F=X+V+F+H;break}return s(F)}return q.toString=function(){return p+""},q}function f(p,g){var x=d((p=Yv(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(pg(g)/3)))*3,j=Math.pow(10,-b),S=NF[8+b/3];return function(_){return x(j*_)+S}}return{format:d,formatPrefix:f}}var Rj,rM,I7;nje({thousands:",",grouping:[3],currency:["$",""]});function nje(t){return Rj=tje(t),rM=Rj.format,I7=Rj.formatPrefix,Rj}function rje(t){return Math.max(0,-pg(Math.abs(t)))}function aje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pg(e)/3)))*3-pg(Math.abs(t)))}function ije(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pg(e)-pg(t))+1}function R7(t,e,n,a){var i=SP(t,e,n),s;switch(a=Yv(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return a.precision==null&&!isNaN(s=aje(i,o))&&(a.precision=s),I7(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(s=ije(i,Math.max(Math.abs(t),Math.abs(e))))&&(a.precision=s-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(s=rje(i))&&(a.precision=s-(a.type==="%")*2);break}}return rM(a)}function wd(t){var e=t.domain;return t.ticks=function(n){var a=e();return wP(a[0],a[a.length-1],n??10)},t.tickFormat=function(n,a){var i=e();return R7(i[0],i[i.length-1],n??10,a)},t.nice=function(n){n==null&&(n=10);var a=e(),i=0,s=a.length-1,o=a[i],l=a[s],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=i,i=s,s=d);f-- >0;){if(d=NP(o,l,n),d===c)return a[i]=o,a[s]=l,e(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Xw(){var t=tM();return t.copy=function(){return Vb(t,Xw())},uo.apply(t,arguments),wd(t)}function L7(t){var e;function n(a){return a==null||isNaN(a=+a)?e:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(t=Array.from(a,Yw),n):t.slice()},n.unknown=function(a){return arguments.length?(e=a,n):e},n.copy=function(){return L7(t).unknown(e)},t=arguments.length?Array.from(t,Yw):[0,1],wd(n)}function F7(t,e){t=t.slice();var n=0,a=t.length-1,i=t[n],s=t[a],o;return s<i&&(o=n,n=a,a=o,o=i,i=s,s=o),t[n]=e.floor(i),t[a]=e.ceil(s),t}function SF(t){return Math.log(t)}function _F(t){return Math.exp(t)}function sje(t){return-Math.log(-t)}function oje(t){return-Math.exp(-t)}function lje(t){return isFinite(t)?+("1e"+t):t<0?0:t}function cje(t){return t===10?lje:t===Math.E?Math.exp:e=>Math.pow(t,e)}function uje(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function CF(t){return(e,n)=>-t(-e,n)}function aM(t){const e=t(SF,_F),n=e.domain;let a=10,i,s;function o(){return i=uje(a),s=cje(a),n()[0]<0?(i=CF(i),s=CF(s),t(sje,oje)):t(SF,_F),e}return e.base=function(l){return arguments.length?(a=+l,o()):a},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),x=i(f),b,j;const S=l==null?10:+l;let _=[];if(!(a%1)&&x-g<S){if(g=Math.floor(g),x=Math.ceil(x),d>0){for(;g<=x;++g)for(b=1;b<a;++b)if(j=g<0?b/s(-g):b*s(g),!(j<d)){if(j>f)break;_.push(j)}}else for(;g<=x;++g)for(b=a-1;b>=1;--b)if(j=g>0?b/s(-g):b*s(g),!(j<d)){if(j>f)break;_.push(j)}_.length*2<S&&(_=wP(d,f,S))}else _=wP(g,x,Math.min(x-g,S)).map(s);return p?_.reverse():_},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Yv(c)).precision==null&&(c.trim=!0),c=rM(c)),l===1/0)return c;const d=Math.max(1,a*l/e.ticks().length);return f=>{let p=f/s(Math.round(i(f)));return p*a<a-.5&&(p*=a),p<=d?c(f):""}},e.nice=()=>n(F7(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function $7(){const t=aM(bS()).domain([1,10]);return t.copy=()=>Vb(t,$7()).base(t.base()),uo.apply(t,arguments),t}function TF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function kF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function iM(t){var e=1,n=t(TF(e),kF(e));return n.constant=function(a){return arguments.length?t(TF(e=+a),kF(e)):e},wd(n)}function B7(){var t=iM(bS());return t.copy=function(){return Vb(t,B7()).constant(t.constant())},uo.apply(t,arguments)}function AF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function dje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function hje(t){return t<0?-t*t:t*t}function sM(t){var e=t($i,$i),n=1;function a(){return n===1?t($i,$i):n===.5?t(dje,hje):t(AF(n),AF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,a()):n},wd(e)}function oM(){var t=sM(bS());return t.copy=function(){return Vb(t,oM()).exponent(t.exponent())},uo.apply(t,arguments),t}function fje(){return oM.apply(null,arguments).exponent(.5)}function EF(t){return Math.sign(t)*t*t}function pje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function z7(){var t=tM(),e=[0,1],n=!1,a;function i(s){var o=pje(t(s));return isNaN(o)?a:n?Math.round(o):o}return i.invert=function(s){return t.invert(EF(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Yw)).map(EF)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return z7(t.domain(),e).round(n).clamp(t.clamp()).unknown(a)},uo.apply(i,arguments),wd(i)}function q7(){var t=[],e=[],n=[],a;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=v1e(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?a:e[qb(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ld),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.quantiles=function(){return n.slice()},s.copy=function(){return q7().domain(t).range(e).unknown(a)},uo.apply(s,arguments)}function U7(){var t=0,e=1,n=1,a=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[qb(a,c,0,n)]:s}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,a[0]]:d>=n?[a[n-1],e]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return U7().domain([t,e]).range(i).unknown(s)},uo.apply(wd(o),arguments)}function V7(){var t=[.5],e=[0,1],n,a=1;function i(s){return s!=null&&s<=s?e[qb(t,s,0,a)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),a=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),a=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return V7().domain(t).range(e).unknown(n)},uo.apply(i,arguments)}const Gk=new Date,Wk=new Date;function Ea(t,e,n,a){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let d;do c.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<o);return c},i.filter=s=>Ea(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(Gk.setTime(+s),Wk.setTime(+o),t(Gk),t(Wk),Math.floor(n(Gk,Wk))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(a?o=>a(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Jw=Ea(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Jw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ea(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Jw);Jw.range;const Cc=1e3,io=Cc*60,Tc=io*60,$c=Tc*24,lM=$c*7,PF=$c*30,Kk=$c*365,ef=Ea(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Cc)},(t,e)=>(e-t)/Cc,t=>t.getUTCSeconds());ef.range;const cM=Ea(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cc)},(t,e)=>{t.setTime(+t+e*io)},(t,e)=>(e-t)/io,t=>t.getMinutes());cM.range;const uM=Ea(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*io)},(t,e)=>(e-t)/io,t=>t.getUTCMinutes());uM.range;const dM=Ea(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cc-t.getMinutes()*io)},(t,e)=>{t.setTime(+t+e*Tc)},(t,e)=>(e-t)/Tc,t=>t.getHours());dM.range;const hM=Ea(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Tc)},(t,e)=>(e-t)/Tc,t=>t.getUTCHours());hM.range;const Hb=Ea(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*io)/$c,t=>t.getDate()-1);Hb.range;const jS=Ea(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$c,t=>t.getUTCDate()-1);jS.range;const H7=Ea(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$c,t=>Math.floor(t/$c));H7.range;function Lf(t){return Ea(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*io)/lM)}const wS=Lf(0),Zw=Lf(1),mje=Lf(2),gje=Lf(3),mg=Lf(4),yje=Lf(5),xje=Lf(6);wS.range;Zw.range;mje.range;gje.range;mg.range;yje.range;xje.range;function Ff(t){return Ea(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/lM)}const NS=Ff(0),eN=Ff(1),vje=Ff(2),bje=Ff(3),gg=Ff(4),jje=Ff(5),wje=Ff(6);NS.range;eN.range;vje.range;bje.range;gg.range;jje.range;wje.range;const fM=Ea(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());fM.range;const pM=Ea(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());pM.range;const Bc=Ea(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Bc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ea(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Bc.range;const zc=Ea(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());zc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ea(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});zc.range;function G7(t,e,n,a,i,s){const o=[[ef,1,Cc],[ef,5,5*Cc],[ef,15,15*Cc],[ef,30,30*Cc],[s,1,io],[s,5,5*io],[s,15,15*io],[s,30,30*io],[i,1,Tc],[i,3,3*Tc],[i,6,6*Tc],[i,12,12*Tc],[a,1,$c],[a,2,2*$c],[n,1,lM],[e,1,PF],[e,3,3*PF],[t,1,Kk]];function l(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const x=p&&typeof p.range=="function"?p:c(d,f,p),b=x?x.range(d,+f+1):[];return g?b.reverse():b}function c(d,f,p){const g=Math.abs(f-d)/p,x=QO(([,,S])=>S).right(o,g);if(x===o.length)return t.every(SP(d/Kk,f/Kk,p));if(x===0)return Jw.every(Math.max(SP(d,f,p),1));const[b,j]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return b.every(j)}return[l,c]}const[Nje,Sje]=G7(zc,pM,NS,H7,hM,uM),[_je,Cje]=G7(Bc,fM,wS,Hb,dM,cM);function Yk(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ev(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Tje(t){var e=t.dateTime,n=t.date,a=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=tv(i),f=nv(i),p=tv(s),g=nv(s),x=tv(o),b=nv(o),j=tv(l),S=nv(l),_=tv(c),T=nv(c),C={a:G,A:ee,b:X,B:$,c:null,d:LF,e:LF,f:Qje,g:swe,G:lwe,H:Wje,I:Kje,j:Yje,L:W7,m:Xje,M:Jje,p:ce,q:xe,Q:BF,s:zF,S:Zje,u:ewe,U:twe,V:nwe,w:rwe,W:awe,x:null,X:null,y:iwe,Y:owe,Z:cwe,"%":$F},E={a:Y,A:Re,b:$e,B:ze,c:null,d:FF,e:FF,f:fwe,g:Nwe,G:_we,H:uwe,I:dwe,j:hwe,L:Y7,m:pwe,M:mwe,p:Le,q:oe,Q:BF,s:zF,S:gwe,u:ywe,U:xwe,V:vwe,w:bwe,W:jwe,x:null,X:null,y:wwe,Y:Swe,Z:Cwe,"%":$F},k={a:q,A:F,b:V,B:H,c:K,d:IF,e:IF,f:Uje,g:MF,G:OF,H:RF,I:RF,j:$je,L:qje,m:Fje,M:Bje,p:z,q:Lje,Q:Hje,s:Gje,S:zje,u:Dje,U:Oje,V:Mje,w:Pje,W:Ije,x:W,X:B,y:MF,Y:OF,Z:Rje,"%":Vje};C.x=P(n,C),C.X=P(a,C),C.c=P(e,C),E.x=P(n,E),E.X=P(a,E),E.c=P(e,E);function P(Se,Ve){return function(Ae){var ue=[],Te=-1,se=0,be=Se.length,_e,Ne,Z;for(Ae instanceof Date||(Ae=new Date(+Ae));++Te<be;)Se.charCodeAt(Te)===37&&(ue.push(Se.slice(se,Te)),(Ne=DF[_e=Se.charAt(++Te)])!=null?_e=Se.charAt(++Te):Ne=_e==="e"?" ":"0",(Z=Ve[_e])&&(_e=Z(Ae,Ne)),ue.push(_e),se=Te+1);return ue.push(Se.slice(se,Te)),ue.join("")}}function I(Se,Ve){return function(Ae){var ue=ev(1900,void 0,1),Te=R(ue,Se,Ae+="",0),se,be;if(Te!=Ae.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Ve&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(se=Qk(ev(ue.y,0,1)),be=se.getUTCDay(),se=be>4||be===0?eN.ceil(se):eN(se),se=jS.offset(se,(ue.V-1)*7),ue.y=se.getUTCFullYear(),ue.m=se.getUTCMonth(),ue.d=se.getUTCDate()+(ue.w+6)%7):(se=Yk(ev(ue.y,0,1)),be=se.getDay(),se=be>4||be===0?Zw.ceil(se):Zw(se),se=Hb.offset(se,(ue.V-1)*7),ue.y=se.getFullYear(),ue.m=se.getMonth(),ue.d=se.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),be="Z"in ue?Qk(ev(ue.y,0,1)).getUTCDay():Yk(ev(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(be+5)%7:ue.w+ue.U*7-(be+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,Qk(ue)):Yk(ue)}}function R(Se,Ve,Ae,ue){for(var Te=0,se=Ve.length,be=Ae.length,_e,Ne;Te<se;){if(ue>=be)return-1;if(_e=Ve.charCodeAt(Te++),_e===37){if(_e=Ve.charAt(Te++),Ne=k[_e in DF?Ve.charAt(Te++):_e],!Ne||(ue=Ne(Se,Ae,ue))<0)return-1}else if(_e!=Ae.charCodeAt(ue++))return-1}return ue}function z(Se,Ve,Ae){var ue=d.exec(Ve.slice(Ae));return ue?(Se.p=f.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function q(Se,Ve,Ae){var ue=x.exec(Ve.slice(Ae));return ue?(Se.w=b.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function F(Se,Ve,Ae){var ue=p.exec(Ve.slice(Ae));return ue?(Se.w=g.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function V(Se,Ve,Ae){var ue=_.exec(Ve.slice(Ae));return ue?(Se.m=T.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function H(Se,Ve,Ae){var ue=j.exec(Ve.slice(Ae));return ue?(Se.m=S.get(ue[0].toLowerCase()),Ae+ue[0].length):-1}function K(Se,Ve,Ae){return R(Se,e,Ve,Ae)}function W(Se,Ve,Ae){return R(Se,n,Ve,Ae)}function B(Se,Ve,Ae){return R(Se,a,Ve,Ae)}function G(Se){return o[Se.getDay()]}function ee(Se){return s[Se.getDay()]}function X(Se){return c[Se.getMonth()]}function $(Se){return l[Se.getMonth()]}function ce(Se){return i[+(Se.getHours()>=12)]}function xe(Se){return 1+~~(Se.getMonth()/3)}function Y(Se){return o[Se.getUTCDay()]}function Re(Se){return s[Se.getUTCDay()]}function $e(Se){return c[Se.getUTCMonth()]}function ze(Se){return l[Se.getUTCMonth()]}function Le(Se){return i[+(Se.getUTCHours()>=12)]}function oe(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var Ve=P(Se+="",C);return Ve.toString=function(){return Se},Ve},parse:function(Se){var Ve=I(Se+="",!1);return Ve.toString=function(){return Se},Ve},utcFormat:function(Se){var Ve=P(Se+="",E);return Ve.toString=function(){return Se},Ve},utcParse:function(Se){var Ve=I(Se+="",!0);return Ve.toString=function(){return Se},Ve}}}var DF={"-":"",_:" ",0:"0"},Ba=/^\s*\d+/,kje=/^%/,Aje=/[\\^$*+?|[\]().{}]/g;function er(t,e,n){var a=t<0?"-":"",i=(a?-t:t)+"",s=i.length;return a+(s<n?new Array(n-s+1).join(e)+i:i)}function Eje(t){return t.replace(Aje,"\\$&")}function tv(t){return new RegExp("^(?:"+t.map(Eje).join("|")+")","i")}function nv(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Pje(t,e,n){var a=Ba.exec(e.slice(n,n+1));return a?(t.w=+a[0],n+a[0].length):-1}function Dje(t,e,n){var a=Ba.exec(e.slice(n,n+1));return a?(t.u=+a[0],n+a[0].length):-1}function Oje(t,e,n){var a=Ba.exec(e.slice(n,n+2));return a?(t.U=+a[0],n+a[0].length):-1}function Mje(t,e,n){var a=Ba.exec(e.slice(n,n+2));return a?(t.V=+a[0],n+a[0].length):-1}function Ije(t,e,n){var a=Ba.exec(e.slice(n,n+2));return a?(t.W=+a[0],n+a[0].length):-1}function OF(t,e,n){var a=Ba.exec(e.slice(n,n+4));return a?(t.y=+a[0],n+a[0].length):-1}function MF(t,e,n){var a=Ba.exec(e.slice(n,n+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function Rje(t,e,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function Lje(t,e,n){var a=Ba.exec(e.slice(n,n+1));return a?(t.q=a[0]*3-3,n+a[0].length):-1}function Fje(t,e,n){var a=Ba.exec(e.slice(n,n+2));return a?(t.m=a[0]-1,n+a[0].length):-1}function IF(t,e,n){var a=Ba.exec(e.slice(n,n+2));return a?(t.d=+a[0],n+a[0].length):-1}function $je(t,e,n){var a=Ba.exec(e.slice(n,n+3));return a?(t.m=0,t.d=+a[0],n+a[0].length):-1}function RF(t,e,n){var a=Ba.exec(e.slice(n,n+2));return a?(t.H=+a[0],n+a[0].length):-1}function Bje(t,e,n){var a=Ba.exec(e.slice(n,n+2));return a?(t.M=+a[0],n+a[0].length):-1}function zje(t,e,n){var a=Ba.exec(e.slice(n,n+2));return a?(t.S=+a[0],n+a[0].length):-1}function qje(t,e,n){var a=Ba.exec(e.slice(n,n+3));return a?(t.L=+a[0],n+a[0].length):-1}function Uje(t,e,n){var a=Ba.exec(e.slice(n,n+6));return a?(t.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function Vje(t,e,n){var a=kje.exec(e.slice(n,n+1));return a?n+a[0].length:-1}function Hje(t,e,n){var a=Ba.exec(e.slice(n));return a?(t.Q=+a[0],n+a[0].length):-1}function Gje(t,e,n){var a=Ba.exec(e.slice(n));return a?(t.s=+a[0],n+a[0].length):-1}function LF(t,e){return er(t.getDate(),e,2)}function Wje(t,e){return er(t.getHours(),e,2)}function Kje(t,e){return er(t.getHours()%12||12,e,2)}function Yje(t,e){return er(1+Hb.count(Bc(t),t),e,3)}function W7(t,e){return er(t.getMilliseconds(),e,3)}function Qje(t,e){return W7(t,e)+"000"}function Xje(t,e){return er(t.getMonth()+1,e,2)}function Jje(t,e){return er(t.getMinutes(),e,2)}function Zje(t,e){return er(t.getSeconds(),e,2)}function ewe(t){var e=t.getDay();return e===0?7:e}function twe(t,e){return er(wS.count(Bc(t)-1,t),e,2)}function K7(t){var e=t.getDay();return e>=4||e===0?mg(t):mg.ceil(t)}function nwe(t,e){return t=K7(t),er(mg.count(Bc(t),t)+(Bc(t).getDay()===4),e,2)}function rwe(t){return t.getDay()}function awe(t,e){return er(Zw.count(Bc(t)-1,t),e,2)}function iwe(t,e){return er(t.getFullYear()%100,e,2)}function swe(t,e){return t=K7(t),er(t.getFullYear()%100,e,2)}function owe(t,e){return er(t.getFullYear()%1e4,e,4)}function lwe(t,e){var n=t.getDay();return t=n>=4||n===0?mg(t):mg.ceil(t),er(t.getFullYear()%1e4,e,4)}function cwe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+er(e/60|0,"0",2)+er(e%60,"0",2)}function FF(t,e){return er(t.getUTCDate(),e,2)}function uwe(t,e){return er(t.getUTCHours(),e,2)}function dwe(t,e){return er(t.getUTCHours()%12||12,e,2)}function hwe(t,e){return er(1+jS.count(zc(t),t),e,3)}function Y7(t,e){return er(t.getUTCMilliseconds(),e,3)}function fwe(t,e){return Y7(t,e)+"000"}function pwe(t,e){return er(t.getUTCMonth()+1,e,2)}function mwe(t,e){return er(t.getUTCMinutes(),e,2)}function gwe(t,e){return er(t.getUTCSeconds(),e,2)}function ywe(t){var e=t.getUTCDay();return e===0?7:e}function xwe(t,e){return er(NS.count(zc(t)-1,t),e,2)}function Q7(t){var e=t.getUTCDay();return e>=4||e===0?gg(t):gg.ceil(t)}function vwe(t,e){return t=Q7(t),er(gg.count(zc(t),t)+(zc(t).getUTCDay()===4),e,2)}function bwe(t){return t.getUTCDay()}function jwe(t,e){return er(eN.count(zc(t)-1,t),e,2)}function wwe(t,e){return er(t.getUTCFullYear()%100,e,2)}function Nwe(t,e){return t=Q7(t),er(t.getUTCFullYear()%100,e,2)}function Swe(t,e){return er(t.getUTCFullYear()%1e4,e,4)}function _we(t,e){var n=t.getUTCDay();return t=n>=4||n===0?gg(t):gg.ceil(t),er(t.getUTCFullYear()%1e4,e,4)}function Cwe(){return"+0000"}function $F(){return"%"}function BF(t){return+t}function zF(t){return Math.floor(+t/1e3)}var jm,X7,J7;Twe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Twe(t){return jm=Tje(t),X7=jm.format,jm.parse,J7=jm.utcFormat,jm.utcParse,jm}function kwe(t){return new Date(t)}function Awe(t){return t instanceof Date?+t:+new Date(+t)}function mM(t,e,n,a,i,s,o,l,c,d){var f=tM(),p=f.invert,g=f.domain,x=d(".%L"),b=d(":%S"),j=d("%I:%M"),S=d("%I %p"),_=d("%a %d"),T=d("%b %d"),C=d("%B"),E=d("%Y");function k(P){return(c(P)<P?x:l(P)<P?b:o(P)<P?j:s(P)<P?S:a(P)<P?i(P)<P?_:T:n(P)<P?C:E)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?g(Array.from(P,Awe)):g().map(kwe)},f.ticks=function(P){var I=g();return t(I[0],I[I.length-1],P??10)},f.tickFormat=function(P,I){return I==null?k:d(I)},f.nice=function(P){var I=g();return(!P||typeof P.range!="function")&&(P=e(I[0],I[I.length-1],P??10)),P?g(F7(I,P)):f},f.copy=function(){return Vb(f,mM(t,e,n,a,i,s,o,l,c,d))},f}function Ewe(){return uo.apply(mM(_je,Cje,Bc,fM,wS,Hb,dM,cM,ef,X7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Pwe(){return uo.apply(mM(Nje,Sje,zc,pM,NS,jS,hM,uM,ef,J7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function SS(){var t=0,e=1,n,a,i,s,o=$i,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(s(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),a=s(e=+e),i=n===a?0:1/(a-n),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function f(p){return function(g){var x,b;return arguments.length?([x,b]=g,o=p(x,b),d):[o(0),o(1)]}}return d.range=f(Wg),d.rangeRound=f(eM),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return s=p,n=p(t),a=p(e),i=n===a?0:1/(a-n),d}}function Nd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Z7(){var t=wd(SS()($i));return t.copy=function(){return Nd(t,Z7())},Kc.apply(t,arguments)}function eV(){var t=aM(SS()).domain([1,10]);return t.copy=function(){return Nd(t,eV()).base(t.base())},Kc.apply(t,arguments)}function tV(){var t=iM(SS());return t.copy=function(){return Nd(t,tV()).constant(t.constant())},Kc.apply(t,arguments)}function gM(){var t=sM(SS());return t.copy=function(){return Nd(t,gM()).exponent(t.exponent())},Kc.apply(t,arguments)}function Dwe(){return gM.apply(null,arguments).exponent(.5)}function nV(){var t=[],e=$i;function n(a){if(a!=null&&!isNaN(a=+a))return e((qb(t,a,1)-1)/(t.length-1))}return n.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let i of a)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ld),n},n.interpolator=function(a){return arguments.length?(e=a,n):e},n.range=function(){return t.map((a,i)=>e(i/(t.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(i,s)=>x1e(t,s/a))},n.copy=function(){return nV(e).domain(t)},Kc.apply(n,arguments)}function _S(){var t=0,e=.5,n=1,a=1,i,s,o,l,c,d=$i,f,p=!1,g;function x(j){return isNaN(j=+j)?g:(j=.5+((j=+f(j))-s)*(a*j<a*s?l:c),d(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([t,e,n]=j,i=f(t=+t),s=f(e=+e),o=f(n=+n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x):[t,e,n]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(d=j,x):d};function b(j){return function(S){var _,T,C;return arguments.length?([_,T,C]=S,d=V1e(j,[_,T,C]),x):[d(0),d(.5),d(1)]}}return x.range=b(Wg),x.rangeRound=b(eM),x.unknown=function(j){return arguments.length?(g=j,x):g},function(j){return f=j,i=j(t),s=j(e),o=j(n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x}}function rV(){var t=wd(_S()($i));return t.copy=function(){return Nd(t,rV())},Kc.apply(t,arguments)}function aV(){var t=aM(_S()).domain([.1,1,10]);return t.copy=function(){return Nd(t,aV()).base(t.base())},Kc.apply(t,arguments)}function iV(){var t=iM(_S());return t.copy=function(){return Nd(t,iV()).constant(t.constant())},Kc.apply(t,arguments)}function yM(){var t=sM(_S());return t.copy=function(){return Nd(t,yM()).exponent(t.exponent())},Kc.apply(t,arguments)}function Owe(){return yM.apply(null,arguments).exponent(.5)}const qF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Hv,scaleDiverging:rV,scaleDivergingLog:aV,scaleDivergingPow:yM,scaleDivergingSqrt:Owe,scaleDivergingSymlog:iV,scaleIdentity:L7,scaleImplicit:_P,scaleLinear:Xw,scaleLog:$7,scaleOrdinal:XO,scalePoint:Nv,scalePow:oM,scaleQuantile:q7,scaleQuantize:U7,scaleRadial:z7,scaleSequential:Z7,scaleSequentialLog:eV,scaleSequentialPow:gM,scaleSequentialQuantile:nV,scaleSequentialSqrt:Dwe,scaleSequentialSymlog:tV,scaleSqrt:fje,scaleSymlog:B7,scaleThreshold:V7,scaleTime:Ewe,scaleUtc:Pwe,tickFormat:R7},Symbol.toStringTag,{value:"Module"}));var Xk,UF;function CS(){if(UF)return Xk;UF=1;var t=Ug();function e(n,a,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=a(l);if(c!=null&&(d===void 0?c===c&&!t(c):i(c,d)))var d=c,f=l}return f}return Xk=e,Xk}var Jk,VF;function sV(){if(VF)return Jk;VF=1;function t(e,n){return e>n}return Jk=t,Jk}var Zk,HF;function Mwe(){if(HF)return Zk;HF=1;var t=CS(),e=sV(),n=Gg();function a(i){return i&&i.length?t(i,n,e):void 0}return Zk=a,Zk}var Iwe=Mwe();const id=Hn(Iwe);var eA,GF;function oV(){if(GF)return eA;GF=1;function t(e,n){return e<n}return eA=t,eA}var tA,WF;function Rwe(){if(WF)return tA;WF=1;var t=CS(),e=oV(),n=Gg();function a(i){return i&&i.length?t(i,n,e):void 0}return tA=a,tA}var Lwe=Rwe();const TS=Hn(Lwe);var nA,KF;function Fwe(){if(KF)return nA;KF=1;var t=OO(),e=Ul(),n=g7(),a=fs();function i(s,o){var l=a(s)?t:n;return l(s,e(o,3))}return nA=i,nA}var rA,YF;function $we(){if(YF)return rA;YF=1;var t=p7(),e=Fwe();function n(a,i){return t(e(a,i),1)}return rA=n,rA}var Bwe=$we();const zwe=Hn(Bwe);var aA,QF;function qwe(){if(QF)return aA;QF=1;var t=GO();function e(n,a){return t(n,a)}return aA=e,aA}var Uwe=qwe();const Af=Hn(Uwe);var Kg=1e9,Vwe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vM,Wr=!0,lo="[DecimalError] ",pf=lo+"Invalid argument: ",xM=lo+"Exponent out of range: ",Yg=Math.floor,Hh=Math.pow,Hwe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es,Ra=1e7,$r=7,lV=9007199254740991,tN=Yg(lV/$r),Rt={};Rt.absoluteValue=Rt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Rt.comparedTo=Rt.cmp=function(t){var e,n,a,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(a=s.d.length,i=t.d.length,e=0,n=a<i?a:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return a===i?0:a>i^s.s<0?1:-1};Rt.decimalPlaces=Rt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*$r;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Rt.dividedBy=Rt.div=function(t){return Oc(this,new this.constructor(t))};Rt.dividedToIntegerBy=Rt.idiv=function(t){var e=this,n=e.constructor;return Tr(Oc(e,new n(t),0,1),n.precision)};Rt.equals=Rt.eq=function(t){return!this.cmp(t)};Rt.exponent=function(){return ja(this)};Rt.greaterThan=Rt.gt=function(t){return this.cmp(t)>0};Rt.greaterThanOrEqualTo=Rt.gte=function(t){return this.cmp(t)>=0};Rt.isInteger=Rt.isint=function(){return this.e>this.d.length-2};Rt.isNegative=Rt.isneg=function(){return this.s<0};Rt.isPositive=Rt.ispos=function(){return this.s>0};Rt.isZero=function(){return this.s===0};Rt.lessThan=Rt.lt=function(t){return this.cmp(t)<0};Rt.lessThanOrEqualTo=Rt.lte=function(t){return this.cmp(t)<1};Rt.logarithm=Rt.log=function(t){var e,n=this,a=n.constructor,i=a.precision,s=i+5;if(t===void 0)t=new a(10);else if(t=new a(t),t.s<1||t.eq(Es))throw Error(lo+"NaN");if(n.s<1)throw Error(lo+(n.s?"NaN":"-Infinity"));return n.eq(Es)?new a(0):(Wr=!1,e=Oc(Qv(n,s),Qv(t,s),s),Wr=!0,Tr(e,i))};Rt.minus=Rt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?dV(e,t):cV(e,(t.s=-t.s,t))};Rt.modulo=Rt.mod=function(t){var e,n=this,a=n.constructor,i=a.precision;if(t=new a(t),!t.s)throw Error(lo+"NaN");return n.s?(Wr=!1,e=Oc(n,t,0,1).times(t),Wr=!0,n.minus(e)):Tr(new a(n),i)};Rt.naturalExponential=Rt.exp=function(){return uV(this)};Rt.naturalLogarithm=Rt.ln=function(){return Qv(this)};Rt.negated=Rt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Rt.plus=Rt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cV(e,t):dV(e,(t.s=-t.s,t))};Rt.precision=Rt.sd=function(t){var e,n,a,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(pf+t);if(e=ja(i)+1,a=i.d.length-1,n=a*$r+1,a=i.d[a],a){for(;a%10==0;a/=10)n--;for(a=i.d[0];a>=10;a/=10)n++}return t&&e>n?e:n};Rt.squareRoot=Rt.sqrt=function(){var t,e,n,a,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(lo+"NaN")}for(t=ja(l),Wr=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Ol(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Yg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),a=new c(e)):a=new c(i.toString()),n=c.precision,i=o=n+3;;)if(s=a,a=s.plus(Oc(l,s,o+2)).times(.5),Ol(s.d).slice(0,o)===(e=Ol(a.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Tr(s,n+1,0),s.times(s).eq(l)){a=s;break}}else if(e!="9999")break;o+=4}return Wr=!0,Tr(a,n)};Rt.times=Rt.mul=function(t){var e,n,a,i,s,o,l,c,d,f=this,p=f.constructor,g=f.d,x=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,d=x.length,c<d&&(s=g,g=x,x=s,o=c,c=d,d=o),s=[],o=c+d,a=o;a--;)s.push(0);for(a=d;--a>=0;){for(e=0,i=c+a;i>a;)l=s[i]+x[a]*g[i-a-1]+e,s[i--]=l%Ra|0,e=l/Ra|0;s[i]=(s[i]+e)%Ra|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Wr?Tr(t,p.precision):t};Rt.toDecimalPlaces=Rt.todp=function(t,e){var n=this,a=n.constructor;return n=new a(n),t===void 0?n:(Bl(t,0,Kg),e===void 0?e=a.rounding:Bl(e,0,8),Tr(n,t+ja(n)+1,e))};Rt.toExponential=function(t,e){var n,a=this,i=a.constructor;return t===void 0?n=Ef(a,!0):(Bl(t,0,Kg),e===void 0?e=i.rounding:Bl(e,0,8),a=Tr(new i(a),t+1,e),n=Ef(a,!0,t+1)),n};Rt.toFixed=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?Ef(i):(Bl(t,0,Kg),e===void 0?e=s.rounding:Bl(e,0,8),a=Tr(new s(i),t+ja(i)+1,e),n=Ef(a.abs(),!1,t+ja(a)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Rt.toInteger=Rt.toint=function(){var t=this,e=t.constructor;return Tr(new e(t),ja(t)+1,e.rounding)};Rt.toNumber=function(){return+this};Rt.toPower=Rt.pow=function(t){var e,n,a,i,s,o,l=this,c=l.constructor,d=12,f=+(t=new c(t));if(!t.s)return new c(Es);if(l=new c(l),!l.s){if(t.s<1)throw Error(lo+"Infinity");return l}if(l.eq(Es))return l;if(a=c.precision,t.eq(Es))return Tr(l,a);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=f<0?-f:f)<=lV){for(i=new c(Es),e=Math.ceil(a/$r+4),Wr=!1;n%2&&(i=i.times(l),JF(i.d,e)),n=Yg(n/2),n!==0;)l=l.times(l),JF(l.d,e);return Wr=!0,t.s<0?new c(Es).div(i):Tr(i,a)}}else if(s<0)throw Error(lo+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Wr=!1,i=t.times(Qv(l,a+d)),Wr=!0,i=uV(i),i.s=s,i};Rt.toPrecision=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?(n=ja(i),a=Ef(i,n<=s.toExpNeg||n>=s.toExpPos)):(Bl(t,1,Kg),e===void 0?e=s.rounding:Bl(e,0,8),i=Tr(new s(i),t,e),n=ja(i),a=Ef(i,t<=n||n<=s.toExpNeg,t)),a};Rt.toSignificantDigits=Rt.tosd=function(t,e){var n=this,a=n.constructor;return t===void 0?(t=a.precision,e=a.rounding):(Bl(t,1,Kg),e===void 0?e=a.rounding:Bl(e,0,8)),Tr(new a(n),t,e)};Rt.toString=Rt.valueOf=Rt.val=Rt.toJSON=Rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ja(t),n=t.constructor;return Ef(t,e<=n.toExpNeg||e>=n.toExpPos)};function cV(t,e){var n,a,i,s,o,l,c,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Wr?Tr(e,p):e;if(c=t.d,d=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(a=c,s=-s,l=d.length):(a=d,i=o,l=c.length),o=Math.ceil(p/$r),l=o>l?o+1:l+1,s>l&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,a=d,d=c,c=a),n=0;s;)n=(c[--s]=c[s]+d[s]+n)/Ra|0,c[s]%=Ra;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Wr?Tr(e,p):e}function Bl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(pf+t)}function Ol(t){var e,n,a,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)a=t[e]+"",n=$r-a.length,n&&(s+=Wu(n)),s+=a;o=t[e],a=o+"",n=$r-a.length,n&&(s+=Wu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Oc=function(){function t(a,i){var s,o=0,l=a.length;for(a=a.slice();l--;)s=a[l]*i+o,a[l]=s%Ra|0,o=s/Ra|0;return o&&a.unshift(o),a}function e(a,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(a[l]!=i[l]){c=a[l]>i[l]?1:-1;break}return c}function n(a,i,s){for(var o=0;s--;)a[s]-=o,o=a[s]<i[s]?1:0,a[s]=o*Ra+a[s]-i[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,i,s,o){var l,c,d,f,p,g,x,b,j,S,_,T,C,E,k,P,I,R,z=a.constructor,q=a.s==i.s?1:-1,F=a.d,V=i.d;if(!a.s)return new z(a);if(!i.s)throw Error(lo+"Division by zero");for(c=a.e-i.e,I=V.length,k=F.length,x=new z(q),b=x.d=[],d=0;V[d]==(F[d]||0);)++d;if(V[d]>(F[d]||0)&&--c,s==null?T=s=z.precision:o?T=s+(ja(a)-ja(i))+1:T=s,T<0)return new z(0);if(T=T/$r+2|0,d=0,I==1)for(f=0,V=V[0],T++;(d<k||f)&&T--;d++)C=f*Ra+(F[d]||0),b[d]=C/V|0,f=C%V|0;else{for(f=Ra/(V[0]+1)|0,f>1&&(V=t(V,f),F=t(F,f),I=V.length,k=F.length),E=I,j=F.slice(0,I),S=j.length;S<I;)j[S++]=0;R=V.slice(),R.unshift(0),P=V[0],V[1]>=Ra/2&&++P;do f=0,l=e(V,j,I,S),l<0?(_=j[0],I!=S&&(_=_*Ra+(j[1]||0)),f=_/P|0,f>1?(f>=Ra&&(f=Ra-1),p=t(V,f),g=p.length,S=j.length,l=e(p,j,g,S),l==1&&(f--,n(p,I<g?R:V,g))):(f==0&&(l=f=1),p=V.slice()),g=p.length,g<S&&p.unshift(0),n(j,p,S),l==-1&&(S=j.length,l=e(V,j,I,S),l<1&&(f++,n(j,I<S?R:V,S))),S=j.length):l===0&&(f++,j=[0]),b[d++]=f,l&&j[0]?j[S++]=F[E]||0:(j=[F[E]],S=1);while((E++<k||j[0]!==void 0)&&T--)}return b[0]||b.shift(),x.e=c,Tr(x,o?s+ja(x)+1:s)}}();function uV(t,e){var n,a,i,s,o,l,c=0,d=0,f=t.constructor,p=f.precision;if(ja(t)>16)throw Error(xM+ja(t));if(!t.s)return new f(Es);for(Wr=!1,l=p,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(a=Math.log(Hh(2,d))/Math.LN10*2+5|0,l+=a,n=i=s=new f(Es),f.precision=l;;){if(i=Tr(i.times(t),l),n=n.times(++c),o=s.plus(Oc(i,n,l)),Ol(o.d).slice(0,l)===Ol(s.d).slice(0,l)){for(;d--;)s=Tr(s.times(s),l);return f.precision=p,e==null?(Wr=!0,Tr(s,p)):s}s=o}}function ja(t){for(var e=t.e*$r,n=t.d[0];n>=10;n/=10)e++;return e}function iA(t,e,n){if(e>t.LN10.sd())throw Wr=!0,n&&(t.precision=n),Error(lo+"LN10 precision limit exceeded");return Tr(new t(t.LN10),e)}function Wu(t){for(var e="";t--;)e+="0";return e}function Qv(t,e){var n,a,i,s,o,l,c,d,f,p=1,g=10,x=t,b=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(lo+(x.s?"NaN":"-Infinity"));if(x.eq(Es))return new j(0);if(e==null?(Wr=!1,d=S):d=e,x.eq(10))return e==null&&(Wr=!0),iA(j,d);if(d+=g,j.precision=d,n=Ol(b),a=n.charAt(0),s=ja(x),Math.abs(s)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)x=x.times(t),n=Ol(x.d),a=n.charAt(0),p++;s=ja(x),a>1?(x=new j("0."+n),s++):x=new j(a+"."+n.slice(1))}else return c=iA(j,d+2,S).times(s+""),x=Qv(new j(a+"."+n.slice(1)),d-g).plus(c),j.precision=S,e==null?(Wr=!0,Tr(x,S)):x;for(l=o=x=Oc(x.minus(Es),x.plus(Es),d),f=Tr(x.times(x),d),i=3;;){if(o=Tr(o.times(f),d),c=l.plus(Oc(o,new j(i),d)),Ol(c.d).slice(0,d)===Ol(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(iA(j,d+2,S).times(s+""))),l=Oc(l,new j(p),d),j.precision=S,e==null?(Wr=!0,Tr(l,S)):l;l=c,i+=2}}function XF(t,e){var n,a,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(n<0&&(n=a),n+=+e.slice(a+1),e=e.substring(0,a)):n<0&&(n=e.length),a=0;e.charCodeAt(a)===48;)++a;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(a,i),e){if(i-=a,n=n-a-1,t.e=Yg(n/$r),t.d=[],a=(n+1)%$r,n<0&&(a+=$r),a<i){for(a&&t.d.push(+e.slice(0,a)),i-=$r;a<i;)t.d.push(+e.slice(a,a+=$r));e=e.slice(a),a=$r-e.length}else a-=i;for(;a--;)e+="0";if(t.d.push(+e),Wr&&(t.e>tN||t.e<-tN))throw Error(xM+n)}else t.s=0,t.e=0,t.d=[0];return t}function Tr(t,e,n){var a,i,s,o,l,c,d,f,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(a=e-o,a<0)a+=$r,i=e,d=p[f=0];else{if(f=Math.ceil((a+1)/$r),s=p.length,f>=s)return t;for(d=s=p[f],o=1;s>=10;s/=10)o++;a%=$r,i=a-$r+o}if(n!==void 0&&(s=Hh(10,o-i-1),l=d/s%10|0,c=e<0||p[f+1]!==void 0||d%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?i>0?d/Hh(10,o-i):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(s=ja(t),p.length=1,e=e-s-1,p[0]=Hh(10,($r-e%$r)%$r),t.e=Yg(-e/$r)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(a==0?(p.length=f,s=1,f--):(p.length=f+1,s=Hh(10,$r-a),p[f]=i>0?(d/Hh(10,o-i)%Hh(10,i)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==Ra&&(p[0]=1,++t.e);break}else{if(p[f]+=s,p[f]!=Ra)break;p[f--]=0,s=1}for(a=p.length;p[--a]===0;)p.pop();if(Wr&&(t.e>tN||t.e<-tN))throw Error(xM+ja(t));return t}function dV(t,e){var n,a,i,s,o,l,c,d,f,p,g=t.constructor,x=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Wr?Tr(e,x):e;if(c=t.d,p=e.d,a=e.e,d=t.e,c=c.slice(),o=d-a,o){for(f=o<0,f?(n=c,o=-o,l=p.length):(n=p,a=d,l=c.length),i=Math.max(Math.ceil(x/$r),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=p.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){f=c[i]<p[i];break}o=0}for(f&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(s=i;s&&c[--s]===0;)c[s]=Ra-1;--c[s],c[i]+=Ra}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(e.d=c,e.e=a,Wr?Tr(e,x):e):new g(0)}function Ef(t,e,n){var a,i=ja(t),s=Ol(t.d),o=s.length;return e?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Wu(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Wu(-i-1)+s,n&&(a=n-o)>0&&(s+=Wu(a))):i>=o?(s+=Wu(i+1-o),n&&(a=n-i-1)>0&&(s=s+"."+Wu(a))):((a=i+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(i+1===o&&(s+="."),s+=Wu(a))),t.s<0?"-"+s:s}function JF(t,e){if(t.length>e)return t.length=e,!0}function hV(t){var e,n,a;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(pf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return XF(o,s.toString())}else if(typeof s!="string")throw Error(pf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Hwe.test(s))XF(o,s);else throw Error(pf+s)}if(i.prototype=Rt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=hV,i.config=i.set=Gwe,t===void 0&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<a.length;)t.hasOwnProperty(n=a[e++])||(t[n]=this[n]);return i.config(t),i}function Gwe(t){if(!t||typeof t!="object")throw Error(lo+"Object expected");var e,n,a,i=["precision",1,Kg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((a=t[n=i[e]])!==void 0)if(Yg(a)===a&&a>=i[e+1]&&a<=i[e+2])this[n]=a;else throw Error(pf+n+": "+a);if((a=t[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(pf+n+": "+a);return this}var vM=hV(Vwe);Es=new vM(1);const Nr=vM;function Wwe(t){return Xwe(t)||Qwe(t)||Ywe(t)||Kwe()}function Kwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ywe(t,e){if(t){if(typeof t=="string")return AP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AP(t,e)}}function Qwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Xwe(t){if(Array.isArray(t))return AP(t)}function AP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Jwe=function(e){return e},fV={},pV=function(e){return e===fV},ZF=function(e){return function n(){return arguments.length===0||arguments.length===1&&pV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Zwe=function t(e,n){return e===1?n:ZF(function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==fV}).length;return o>=e?n.apply(void 0,i):t(e-o,ZF(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=i.map(function(p){return pV(p)?c.shift():p});return n.apply(void 0,Wwe(f).concat(c))}))})},kS=function(e){return Zwe(e.length,e)},EP=function(e,n){for(var a=[],i=e;i<n;++i)a[i-e]=i;return a},eNe=kS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),tNe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(!n.length)return Jwe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},PP=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},mV=function(e){var n=null,a=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,a=e.apply(void 0,s)),a}};function nNe(t){var e;return t===0?e=1:e=Math.floor(new Nr(t).abs().log(10).toNumber())+1,e}function rNe(t,e,n){for(var a=new Nr(t),i=0,s=[];a.lt(e)&&i<1e5;)s.push(a.toNumber()),a=a.add(n),i++;return s}var aNe=kS(function(t,e,n){var a=+t,i=+e;return a+n*(i-a)}),iNe=kS(function(t,e,n){var a=e-+t;return a=a||1/0,(n-t)/a}),sNe=kS(function(t,e,n){var a=e-+t;return a=a||1/0,Math.max(0,Math.min(1,(n-t)/a))});const AS={rangeStep:rNe,getDigitCount:nNe,interpolateNumber:aNe,uninterpolateNumber:iNe,uninterpolateTruncation:sNe};function DP(t){return cNe(t)||lNe(t)||gV(t)||oNe()}function oNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function cNe(t){if(Array.isArray(t))return OP(t)}function Xv(t,e){return hNe(t)||dNe(t,e)||gV(t,e)||uNe()}function uNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gV(t,e){if(t){if(typeof t=="string")return OP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OP(t,e)}}function OP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function dNe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],a=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));a=!0);}catch(c){i=!0,s=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function hNe(t){if(Array.isArray(t))return t}function yV(t){var e=Xv(t,2),n=e[0],a=e[1],i=n,s=a;return n>a&&(i=a,s=n),[i,s]}function xV(t,e,n){if(t.lte(0))return new Nr(0);var a=AS.getDigitCount(t.toNumber()),i=new Nr(10).pow(a),s=t.div(i),o=a!==1?.05:.1,l=new Nr(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new Nr(Math.ceil(c))}function fNe(t,e,n){var a=1,i=new Nr(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(a=new Nr(10).pow(AS.getDigitCount(t)-1),i=new Nr(Math.floor(i.div(a).toNumber())).mul(a)):s>1&&(i=new Nr(Math.floor(t)))}else t===0?i=new Nr(Math.floor((e-1)/2)):n||(i=new Nr(Math.floor(t)));var o=Math.floor((e-1)/2),l=tNe(eNe(function(c){return i.add(new Nr(c-o).mul(a)).toNumber()}),EP);return l(0,e)}function vV(t,e,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Nr(0),tickMin:new Nr(0),tickMax:new Nr(0)};var s=xV(new Nr(e).sub(t).div(n-1),a,i),o;t<=0&&e>=0?o=new Nr(0):(o=new Nr(t).add(e).div(2),o=o.sub(new Nr(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new Nr(e).sub(o).div(s).toNumber()),d=l+c+1;return d>n?vV(t,e,n,a,i+1):(d<n&&(c=e>0?c+(n-d):c,l=e>0?l:l+(n-d)),{step:s,tickMin:o.sub(new Nr(l).mul(s)),tickMax:o.add(new Nr(c).mul(s))})}function pNe(t){var e=Xv(t,2),n=e[0],a=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=yV([n,a]),c=Xv(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat(DP(EP(0,i-1).map(function(){return 1/0}))):[].concat(DP(EP(0,i-1).map(function(){return-1/0})),[f]);return n>a?PP(p):p}if(d===f)return fNe(d,i,s);var g=vV(d,f,o,s),x=g.step,b=g.tickMin,j=g.tickMax,S=AS.rangeStep(b,j.add(new Nr(.1).mul(x)),x);return n>a?PP(S):S}function mNe(t,e){var n=Xv(t,2),a=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=yV([a,i]),l=Xv(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,i];if(c===d)return[c];var f=Math.max(e,2),p=xV(new Nr(d).sub(c).div(f-1),s,0),g=[].concat(DP(AS.rangeStep(new Nr(c),new Nr(d).sub(new Nr(.99).mul(p)),p)),[d]);return a>i?PP(g):g}var gNe=mV(pNe),yNe=mV(mNe),xNe="Invariant failed";function Pf(t,e){throw new Error(xNe)}var vNe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function nN(){return nN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},nN.apply(this,arguments)}function bNe(t,e){return SNe(t)||NNe(t,e)||wNe(t,e)||jNe()}function jNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wNe(t,e){if(t){if(typeof t=="string")return e8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e8(t,e)}}function e8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function NNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function SNe(t){if(Array.isArray(t))return t}function _Ne(t,e){if(t==null)return{};var n=CNe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function CNe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function TNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kNe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,wV(a.key),a)}}function ANe(t,e,n){return e&&kNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ENe(t,e,n){return e=rN(e),PNe(t,bV()?Reflect.construct(e,n||[],rN(t).constructor):e.apply(t,n))}function PNe(t,e){if(e&&(yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DNe(t)}function DNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bV=function(){return!!t})()}function rN(t){return rN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rN(t)}function ONe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MP(t,e)}function MP(t,e){return MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},MP(t,e)}function jV(t,e,n){return e=wV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wV(t){var e=MNe(t,"string");return yg(e)=="symbol"?e:e+""}function MNe(t,e){if(yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(yg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gb=function(t){function e(){return TNe(this,e),ENe(this,e,arguments)}return ONe(e,t),ANe(e,[{key:"render",value:function(){var a=this.props,i=a.offset,s=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,f=a.xAxis,p=a.yAxis,g=_Ne(a,vNe),x=zt(g,!1);this.props.direction==="x"&&f.type!=="number"&&Pf();var b=c.map(function(j){var S=d(j,l),_=S.x,T=S.y,C=S.value,E=S.errorVal;if(!E)return null;var k=[],P,I;if(Array.isArray(E)){var R=bNe(E,2);P=R[0],I=R[1]}else P=I=E;if(s==="vertical"){var z=f.scale,q=T+i,F=q+o,V=q-o,H=z(C-P),K=z(C+I);k.push({x1:K,y1:F,x2:K,y2:V}),k.push({x1:H,y1:q,x2:K,y2:q}),k.push({x1:H,y1:F,x2:H,y2:V})}else if(s==="horizontal"){var W=p.scale,B=_+i,G=B-o,ee=B+o,X=W(C-P),$=W(C+I);k.push({x1:G,y1:$,x2:ee,y2:$}),k.push({x1:B,y1:X,x2:B,y2:$}),k.push({x1:G,y1:X,x2:ee,y2:X})}return Ce.createElement(In,nN({className:"recharts-errorBar",key:"bar-".concat(k.map(function(ce){return"".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))},x),k.map(function(ce){return Ce.createElement("line",nN({},ce,{key:"line-".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))}))});return Ce.createElement(In,{className:"recharts-errorBars"},b)}}])}(Ce.Component);jV(Gb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});jV(Gb,"displayName","ErrorBar");function Jv(t){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(t)}function t8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t8(Object(n),!0).forEach(function(a){INe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function INe(t,e,n){return e=RNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RNe(t){var e=LNe(t,"string");return Jv(e)=="symbol"?e:e+""}function LNe(t,e){if(Jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Jv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NV=function(e){var n=e.children,a=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=ks(n,Dc);if(!o)return null;var l=Dc.defaultProps,c=l!==void 0?Bh(Bh({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:s==="children"?d=(a||[]).reduce(function(f,p){var g=p.item,x=p.props,b=x.sectors||x.data||[];return f.concat(b.map(function(j){return{type:o.props.iconType||g.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):d=(a||[]).map(function(f){var p=f.item,g=p.type.defaultProps,x=g!==void 0?Bh(Bh({},g),p.props):{},b=x.dataKey,j=x.name,S=x.legendType,_=x.hide;return{inactive:_,dataKey:b,type:c.iconType||S||"square",color:bM(p),value:j||b,payload:x}}),Bh(Bh(Bh({},c),Dc.getWithHeight(o,i)),{},{payload:d,item:o})};function Zv(t){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zv(t)}function n8(t){return zNe(t)||BNe(t)||$Ne(t)||FNe()}function FNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ne(t,e){if(t){if(typeof t=="string")return IP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IP(t,e)}}function BNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zNe(t){if(Array.isArray(t))return IP(t)}function IP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r8(Object(n),!0).forEach(function(a){qm(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function qm(t,e,n){return e=qNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qNe(t){var e=UNe(t,"string");return Zv(e)=="symbol"?e:e+""}function UNe(t,e){if(Zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Zv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ha(t,e,n){return dn(t)||dn(e)?n:Aa(e)?Rs(t,e,n):an(e)?e(t):n}function Sv(t,e,n,a){var i=zwe(t,function(l){return ha(l,e)});if(n==="number"){var s=i.filter(function(l){return Nt(l)||parseFloat(l)});return s.length?[TS(s),id(s)]:[1/0,-1/0]}var o=a?i.filter(function(l){return!dn(l)}):i;return o.map(function(l){return Aa(l)||l instanceof Date?l:""})}var VNe=function(e){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,d=0;d<l;d++){var f=d>0?i[d-1].coordinate:i[l-1].coordinate,p=i[d].coordinate,g=d>=l-1?i[0].coordinate:i[d+1].coordinate,x=void 0;if(Li(p-f)!==Li(g-p)){var b=[];if(Li(g-p)===Li(c[1]-c[0])){x=g;var j=p+c[1]-c[0];b[0]=Math.min(j,(j+f)/2),b[1]=Math.max(j,(j+f)/2)}else{x=f;var S=g+c[1]-c[0];b[0]=Math.min(p,(S+p)/2),b[1]=Math.max(p,(S+p)/2)}var _=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>_[0]&&e<=_[1]||e>=b[0]&&e<=b[1]){o=i[d].index;break}}else{var T=Math.min(f,g),C=Math.max(f,g);if(e>(T+p)/2&&e<=(C+p)/2){o=i[d].index;break}}}else for(var E=0;E<l;E++)if(E===0&&e<=(a[E].coordinate+a[E+1].coordinate)/2||E>0&&E<l-1&&e>(a[E].coordinate+a[E-1].coordinate)/2&&e<=(a[E].coordinate+a[E+1].coordinate)/2||E===l-1&&e>(a[E].coordinate+a[E-1].coordinate)/2){o=a[E].index;break}return o},bM=function(e){var n,a=e,i=a.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},HNe=function(e){var n=e.barSize,a=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,d=l.length;c<d;c++)for(var f=s[l[c]].stackGroups,p=Object.keys(f),g=0,x=p.length;g<x;g++){var b=f[p[g]],j=b.items,S=b.cateAxisId,_=j.filter(function(I){return Pc(I.type).indexOf("Bar")>=0});if(_&&_.length){var T=_[0].type.defaultProps,C=T!==void 0?na(na({},T),_[0].props):_[0].props,E=C.barSize,k=C[S];o[k]||(o[k]=[]);var P=dn(E)?n:E;o[k].push({item:_[0],stackList:_.slice(1),barSize:dn(P)?void 0:Fi(P,a,0)})}}return o},GNe=function(e){var n=e.barGap,a=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=Fi(n,i,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var g=!1,x=i/c,b=o.reduce(function(E,k){return E+k.barSize||0},0);b+=(c-1)*d,b>=i&&(b-=(c-1)*d,d=0),b>=i&&x>0&&(g=!0,x*=.9,b=c*x);var j=(i-b)/2>>0,S={offset:j-d,size:0};f=o.reduce(function(E,k){var P={item:k.item,position:{offset:S.offset+S.size+d,size:g?x:k.barSize}},I=[].concat(n8(E),[P]);return S=I[I.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(R){I.push({item:R,position:S})}),I},p)}else{var _=Fi(a,i,0,!0);i-2*_-(c-1)*d<=0&&(d=0);var T=(i-2*_-(c-1)*d)/c;T>1&&(T>>=0);var C=l===+l?Math.min(T,l):T;f=o.reduce(function(E,k,P){var I=[].concat(n8(E),[{item:k.item,position:{offset:_+(T+d)*P+(T-C)/2,size:C}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(R){I.push({item:R,position:I[I.length-1].position})}),I},p)}return f},WNe=function(e,n,a,i){var s=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=NV({children:s,legendWidth:c});if(d){var f=i||{},p=f.width,g=f.height,x=d.align,b=d.verticalAlign,j=d.layout;if((j==="vertical"||j==="horizontal"&&b==="middle")&&x!=="center"&&Nt(e[x]))return na(na({},e),{},qm({},x,e[x]+(p||0)));if((j==="horizontal"||j==="vertical"&&x==="center")&&b!=="middle"&&Nt(e[b]))return na(na({},e),{},qm({},b,e[b]+(g||0)))}return e},KNe=function(e,n,a){return dn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},SV=function(e,n,a,i,s){var o=n.props.children,l=Ls(o,Gb).filter(function(d){return KNe(i,s,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,f){var p=ha(f,a);if(dn(p))return d;var g=Array.isArray(p)?[TS(p),id(p)]:[p,p],x=c.reduce(function(b,j){var S=ha(f,j,0),_=g[0]-Math.abs(Array.isArray(S)?S[0]:S),T=g[1]+Math.abs(Array.isArray(S)?S[1]:S);return[Math.min(_,b[0]),Math.max(T,b[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},YNe=function(e,n,a,i,s){var o=n.map(function(l){return SV(e,l,a,s,i)}).filter(function(l){return!dn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},_V=function(e,n,a,i,s){var o=n.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&SV(e,c,d,i)||Sv(e,d,a,s)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,p=d.length;f<p;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},CV=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},TV=function(e,n,a,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===a&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(a),l},kc=function(e,n,a){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||a)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Li(l[0]-l[1])*2*d:d,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(p){var g=s?s.indexOf(p):p;return{coordinate:i(g)+d,value:p,offset:d}});return f.filter(function(p){return!Hg(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,g){return{coordinate:i(p)+d,value:p,index:g,offset:d}}):i.ticks&&!a?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+d,value:p,offset:d}}):i.domain().map(function(p,g){return{coordinate:i(p)+d,value:s?s[p]:p,index:g,offset:d}})},sA=new WeakMap,Lj=function(e,n){if(typeof n!="function")return e;sA.has(e)||sA.set(e,new WeakMap);var a=sA.get(e);if(a.has(n))return a.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,i),i},kV=function(e,n,a){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Hv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Xw(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:Nv(),realScaleType:"point"}:s==="category"?{scale:Hv(),realScaleType:"band"}:{scale:Xw(),realScaleType:"linear"};if(Cf(i)){var c="scale".concat(fS(i));return{scale:(qF[c]||Nv)(),realScaleType:qF[c]?c:"point"}}return an(i)?{scale:i}:{scale:Nv(),realScaleType:"point"}},a8=1e-4,AV=function(e){var n=e.domain();if(!(!n||n.length<=2)){var a=n.length,i=e.range(),s=Math.min(i[0],i[1])-a8,o=Math.max(i[0],i[1])+a8,l=e(n[0]),c=e(n[a-1]);(l<s||l>o||c<s||c>o)&&e.domain([n[0],n[a-1]])}},QNe=function(e,n){if(!e)return null;for(var a=0,i=e.length;a<i;a++)if(e[a].item===n)return e[a].position;return null},XNe=function(e,n){if(!n||n.length!==2||!Nt(n[0])||!Nt(n[1]))return e;var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Nt(e[0])||e[0]<a)&&(s[0]=a),(!Nt(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<a&&(s[1]=a),s},JNe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0,l=0;l<n;++l){var c=Hg(e[l][a][1])?e[l][a][0]:e[l][a][1];c>=0?(e[l][a][0]=s,e[l][a][1]=s+c,s=e[l][a][1]):(e[l][a][0]=o,e[l][a][1]=o+c,o=e[l][a][1])}},ZNe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0;o<n;++o){var l=Hg(e[o][a][1])?e[o][a][0]:e[o][a][1];l>=0?(e[o][a][0]=s,e[o][a][1]=s+l,s=e[o][a][1]):(e[o][a][0]=0,e[o][a][1]=0)}},eSe={sign:JNe,expand:Hxe,none:cg,silhouette:Gxe,wiggle:Wxe,positive:ZNe},tSe=function(e,n,a){var i=n.map(function(l){return l.props.dataKey}),s=eSe[a],o=Vxe().keys(i).value(function(l,c){return+ha(l,c,0)}).order(dP).offset(s);return o(e)},nSe=function(e,n,a,i,s,o){if(!e)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(p,g){var x,b=(x=g.type)!==null&&x!==void 0&&x.defaultProps?na(na({},g.type.defaultProps),g.props):g.props,j=b.stackId,S=b.hide;if(S)return p;var _=b[a],T=p[_]||{hasStack:!1,stackGroups:{}};if(Aa(j)){var C=T.stackGroups[j]||{numericAxisId:a,cateAxisId:i,items:[]};C.items.push(g),T.hasStack=!0,T.stackGroups[j]=C}else T.stackGroups[Rf("_stackId_")]={numericAxisId:a,cateAxisId:i,items:[g]};return na(na({},p),{},qm({},_,T))},c),f={};return Object.keys(d).reduce(function(p,g){var x=d[g];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(j,S){var _=x.stackGroups[S];return na(na({},j),{},qm({},S,{numericAxisId:a,cateAxisId:i,items:_.items,stackedData:tSe(e,_.items,s)}))},b)}return na(na({},p),{},qm({},g,x))},f)},EV=function(e,n){var a=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=a||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var f=gNe(d,s,l);return e.domain([TS(f),id(f)]),{niceTicks:f}}if(s&&i==="number"){var p=e.domain(),g=yNe(p,s,l);return{niceTicks:g}}return null};function aN(t){var e=t.axis,n=t.ticks,a=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!dn(i[e.dataKey])){var l=Ow(n,"value",i[e.dataKey]);if(l)return l.coordinate+a/2}return n[s]?n[s].coordinate+a/2:null}var c=ha(i,dn(o)?e.dataKey:o);return dn(c)?null:e.scale(c)}var i8=function(e){var n=e.axis,a=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return a[l]?a[l].coordinate+i:null;var c=ha(o,n.dataKey,n.domain[l]);return dn(c)?null:n.scale(c)-s/2+i},rSe=function(e){var n=e.numericAxis,a=n.scale.domain();if(n.type==="number"){var i=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);return i<=0&&s>=0?0:s<0?s:i}return a[0]},aSe=function(e,n){var a,i=(a=e.type)!==null&&a!==void 0&&a.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Aa(s)){var o=n[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},iSe=function(e){return e.reduce(function(n,a){return[TS(a.concat([n[0]]).filter(Nt)),id(a.concat([n[1]]).filter(Nt))]},[1/0,-1/0])},PV=function(e,n,a){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(d,f){var p=iSe(f.slice(n,a+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},s8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,o8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RP=function(e,n,a){if(an(e))return e(n,a);if(!Array.isArray(e))return n;var i=[];if(Nt(e[0]))i[0]=a?e[0]:Math.min(e[0],n[0]);else if(s8.test(e[0])){var s=+s8.exec(e[0])[1];i[0]=n[0]-s}else an(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Nt(e[1]))i[1]=a?e[1]:Math.max(e[1],n[1]);else if(o8.test(e[1])){var o=+o8.exec(e[1])[1];i[1]=n[1]+o}else an(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},iN=function(e,n,a){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!a||i>0)return i}if(e&&n&&n.length>=2){for(var s=KO(n,function(p){return p.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var d=s[l],f=s[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},l8=function(e,n,a){return!e||!e.length||Af(e,Rs(a,"type.defaultProps.domain"))?n:e},DV=function(e,n){var a=e.type.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,i=a.dataKey,s=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,f=a.hide;return na(na({},zt(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:bM(e),value:ha(n,i),type:c,payload:n,chartType:d,hide:f})};function eb(t){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eb(t)}function c8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function bc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c8(Object(n),!0).forEach(function(a){OV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function OV(t,e,n){return e=sSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sSe(t){var e=oSe(t,"string");return eb(e)=="symbol"?e:e+""}function oSe(t,e){if(eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(eb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lSe(t,e){return hSe(t)||dSe(t,e)||uSe(t,e)||cSe()}function cSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uSe(t,e){if(t){if(typeof t=="string")return u8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u8(t,e)}}function u8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function dSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function hSe(t){if(Array.isArray(t))return t}var sN=Math.PI/180,fSe=function(e){return e*180/Math.PI},Lr=function(e,n,a,i){return{x:e+Math.cos(-sN*i)*a,y:n+Math.sin(-sN*i)*a}},MV=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},pSe=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,f=Fi(e.cx,o,o/2),p=Fi(e.cy,l,l/2),g=MV(o,l,a),x=Fi(e.innerRadius,g,0),b=Fi(e.outerRadius,g,g*.8),j=Object.keys(n);return j.reduce(function(S,_){var T=n[_],C=T.domain,E=T.reversed,k;if(dn(T.range))i==="angleAxis"?k=[c,d]:i==="radiusAxis"&&(k=[x,b]),E&&(k=[k[1],k[0]]);else{k=T.range;var P=k,I=lSe(P,2);c=I[0],d=I[1]}var R=kV(T,s),z=R.realScaleType,q=R.scale;q.domain(C).range(k),AV(q);var F=EV(q,bc(bc({},T),{},{realScaleType:z})),V=bc(bc(bc({},T),F),{},{range:k,radius:b,realScaleType:z,scale:q,cx:f,cy:p,innerRadius:x,outerRadius:b,startAngle:c,endAngle:d});return bc(bc({},S),{},OV({},_,V))},{})},mSe=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(a-s,2)+Math.pow(i-o,2))},gSe=function(e,n){var a=e.x,i=e.y,s=n.cx,o=n.cy,l=mSe({x:a,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(a-s)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:fSe(d),angleInRadian:d}},ySe=function(e){var n=e.startAngle,a=e.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:a-o*360}},xSe=function(e,n){var a=n.startAngle,i=n.endAngle,s=Math.floor(a/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},d8=function(e,n){var a=e.x,i=e.y,s=gSe({x:a,y:i},n),o=s.radius,l=s.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=ySe(n),p=f.startAngle,g=f.endAngle,x=l,b;if(p<=g){for(;x>g;)x-=360;for(;x<p;)x+=360;b=x>=p&&x<=g}else{for(;x>p;)x-=360;for(;x<g;)x+=360;b=x>=g&&x<=p}return b?bc(bc({},n),{},{radius:o,angle:xSe(x,n)}):null},IV=function(e){return!v.isValidElement(e)&&!an(e)&&typeof e!="boolean"?e.className:""};function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}var vSe=["offset"];function bSe(t){return SSe(t)||NSe(t)||wSe(t)||jSe()}function jSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wSe(t,e){if(t){if(typeof t=="string")return LP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LP(t,e)}}function NSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SSe(t){if(Array.isArray(t))return LP(t)}function LP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _Se(t,e){if(t==null)return{};var n=CSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function CSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function h8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ca(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h8(Object(n),!0).forEach(function(a){TSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function TSe(t,e,n){return e=kSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kSe(t){var e=ASe(t,"string");return tb(e)=="symbol"?e:e+""}function ASe(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(tb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nb(){return nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},nb.apply(this,arguments)}var ESe=function(e){var n=e.value,a=e.formatter,i=dn(e.children)?n:e.children;return an(a)?a(i):i},PSe=function(e,n){var a=Li(n-e),i=Math.min(Math.abs(n-e),360);return a*i},DSe=function(e,n,a){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,d=c.cx,f=c.cy,p=c.innerRadius,g=c.outerRadius,x=c.startAngle,b=c.endAngle,j=c.clockWise,S=(p+g)/2,_=PSe(x,b),T=_>=0?1:-1,C,E;i==="insideStart"?(C=x+T*o,E=j):i==="insideEnd"?(C=b-T*o,E=!j):i==="end"&&(C=b+T*o,E=j),E=_<=0?E:!E;var k=Lr(d,f,S,C),P=Lr(d,f,S,C+(E?1:-1)*359),I="M".concat(k.x,",").concat(k.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(E?0:1,`,
    `).concat(P.x,",").concat(P.y),R=dn(e.id)?Rf("recharts-radial-line-"):e.id;return Ce.createElement("text",nb({},a,{dominantBaseline:"central",className:fn("recharts-radial-bar-label",l)}),Ce.createElement("defs",null,Ce.createElement("path",{id:R,d:I})),Ce.createElement("textPath",{xlinkHref:"#".concat(R)},n))},OSe=function(e){var n=e.viewBox,a=e.offset,i=e.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,d=s.outerRadius,f=s.startAngle,p=s.endAngle,g=(f+p)/2;if(i==="outside"){var x=Lr(o,l,d+a,g),b=x.x,j=x.y;return{x:b,y:j,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var S=(c+d)/2,_=Lr(o,l,S,g),T=_.x,C=_.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},MSe=function(e){var n=e.viewBox,a=e.parentViewBox,i=e.offset,s=e.position,o=n,l=o.x,c=o.y,d=o.width,f=o.height,p=f>=0?1:-1,g=p*i,x=p>0?"end":"start",b=p>0?"start":"end",j=d>=0?1:-1,S=j*i,_=j>0?"end":"start",T=j>0?"start":"end";if(s==="top"){var C={x:l+d/2,y:c-p*i,textAnchor:"middle",verticalAnchor:x};return Ca(Ca({},C),a?{height:Math.max(c-a.y,0),width:d}:{})}if(s==="bottom"){var E={x:l+d/2,y:c+f+g,textAnchor:"middle",verticalAnchor:b};return Ca(Ca({},E),a?{height:Math.max(a.y+a.height-(c+f),0),width:d}:{})}if(s==="left"){var k={x:l-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return Ca(Ca({},k),a?{width:Math.max(k.x-a.x,0),height:f}:{})}if(s==="right"){var P={x:l+d+S,y:c+f/2,textAnchor:T,verticalAnchor:"middle"};return Ca(Ca({},P),a?{width:Math.max(a.x+a.width-P.x,0),height:f}:{})}var I=a?{width:d,height:f}:{};return s==="insideLeft"?Ca({x:l+S,y:c+f/2,textAnchor:T,verticalAnchor:"middle"},I):s==="insideRight"?Ca({x:l+d-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},I):s==="insideTop"?Ca({x:l+d/2,y:c+g,textAnchor:"middle",verticalAnchor:b},I):s==="insideBottom"?Ca({x:l+d/2,y:c+f-g,textAnchor:"middle",verticalAnchor:x},I):s==="insideTopLeft"?Ca({x:l+S,y:c+g,textAnchor:T,verticalAnchor:b},I):s==="insideTopRight"?Ca({x:l+d-S,y:c+g,textAnchor:_,verticalAnchor:b},I):s==="insideBottomLeft"?Ca({x:l+S,y:c+f-g,textAnchor:T,verticalAnchor:x},I):s==="insideBottomRight"?Ca({x:l+d-S,y:c+f-g,textAnchor:_,verticalAnchor:x},I):Vg(s)&&(Nt(s.x)||Jh(s.x))&&(Nt(s.y)||Jh(s.y))?Ca({x:l+Fi(s.x,d),y:c+Fi(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):Ca({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},ISe=function(e){return"cx"in e&&Nt(e.cx)};function La(t){var e=t.offset,n=e===void 0?5:e,a=_Se(t,vSe),i=Ca({offset:n},a),s=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,f=i.className,p=f===void 0?"":f,g=i.textBreakAll;if(!s||dn(l)&&dn(c)&&!v.isValidElement(d)&&!an(d))return null;if(v.isValidElement(d))return v.cloneElement(d,i);var x;if(an(d)){if(x=v.createElement(d,i),v.isValidElement(x))return x}else x=ESe(i);var b=ISe(s),j=zt(i,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return DSe(i,x,j);var S=b?OSe(i):MSe(i);return Ce.createElement(kf,nb({className:fn("recharts-label",p)},j,S,{breakAll:g}),x)}La.displayName="Label";var RV=function(e){var n=e.cx,a=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,f=e.outerRadius,p=e.x,g=e.y,x=e.top,b=e.left,j=e.width,S=e.height,_=e.clockWise,T=e.labelViewBox;if(T)return T;if(Nt(j)&&Nt(S)){if(Nt(p)&&Nt(g))return{x:p,y:g,width:j,height:S};if(Nt(x)&&Nt(b))return{x,y:b,width:j,height:S}}return Nt(p)&&Nt(g)?{x:p,y:g,width:0,height:0}:Nt(n)&&Nt(a)?{cx:n,cy:a,startAngle:s||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:_}:e.viewBox?e.viewBox:{}},RSe=function(e,n){return e?e===!0?Ce.createElement(La,{key:"label-implicit",viewBox:n}):Aa(e)?Ce.createElement(La,{key:"label-implicit",viewBox:n,value:e}):v.isValidElement(e)?e.type===La?v.cloneElement(e,{key:"label-implicit",viewBox:n}):Ce.createElement(La,{key:"label-implicit",content:e,viewBox:n}):an(e)?Ce.createElement(La,{key:"label-implicit",content:e,viewBox:n}):Vg(e)?Ce.createElement(La,nb({viewBox:n},e,{key:"label-implicit"})):null:null},LSe=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var i=e.children,s=RV(e),o=Ls(i,La).map(function(c,d){return v.cloneElement(c,{viewBox:n||s,key:"label-".concat(d)})});if(!a)return o;var l=RSe(e.label,n||s);return[l].concat(bSe(o))};La.parseViewBox=RV;La.renderCallByParent=LSe;var oA,f8;function FSe(){if(f8)return oA;f8=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return oA=t,oA}var $Se=FSe();const BSe=Hn($Se);function rb(t){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rb(t)}var zSe=["valueAccessor"],qSe=["data","dataKey","clockWise","id","textBreakAll"];function USe(t){return WSe(t)||GSe(t)||HSe(t)||VSe()}function VSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HSe(t,e){if(t){if(typeof t=="string")return FP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FP(t,e)}}function GSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WSe(t){if(Array.isArray(t))return FP(t)}function FP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oN.apply(this,arguments)}function p8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function m8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p8(Object(n),!0).forEach(function(a){KSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function KSe(t,e,n){return e=YSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YSe(t){var e=QSe(t,"string");return rb(e)=="symbol"?e:e+""}function QSe(t,e){if(rb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(rb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function g8(t,e){if(t==null)return{};var n=XSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function XSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var JSe=function(e){return Array.isArray(e.value)?BSe(e.value):e.value};function Ll(t){var e=t.valueAccessor,n=e===void 0?JSe:e,a=g8(t,zSe),i=a.data,s=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=g8(a,qSe);return!i||!i.length?null:Ce.createElement(In,{className:"recharts-label-list"},i.map(function(f,p){var g=dn(s)?n(f,p):ha(f&&f.payload,s),x=dn(l)?{}:{id:"".concat(l,"-").concat(p)};return Ce.createElement(La,oN({},zt(f,!0),d,x,{parentViewBox:f.parentViewBox,value:g,textBreakAll:c,viewBox:La.parseViewBox(dn(o)?f:m8(m8({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Ll.displayName="LabelList";function ZSe(t,e){return t?t===!0?Ce.createElement(Ll,{key:"labelList-implicit",data:e}):Ce.isValidElement(t)||an(t)?Ce.createElement(Ll,{key:"labelList-implicit",data:e,content:t}):Vg(t)?Ce.createElement(Ll,oN({data:e},t,{key:"labelList-implicit"})):null:null}function e_e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=Ls(a,Ll).map(function(o,l){return v.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=ZSe(t.label,e);return[s].concat(USe(i))}Ll.renderCallByParent=e_e;function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function $P(){return $P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},$P.apply(this,arguments)}function y8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function x8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y8(Object(n),!0).forEach(function(a){t_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function t_e(t,e,n){return e=n_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n_e(t){var e=r_e(t,"string");return ab(e)=="symbol"?e:e+""}function r_e(t,e){if(ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ab(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a_e=function(e,n){var a=Li(n-e),i=Math.min(Math.abs(n-e),359.999);return a*i},Fj=function(e){var n=e.cx,a=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,f=c*(l?1:-1)+i,p=Math.asin(c/f)/sN,g=d?s:s+o*p,x=Lr(n,a,f,g),b=Lr(n,a,i,g),j=d?s-o*p:s,S=Lr(n,a,f*Math.cos(p*sN),j);return{center:x,circleTangency:b,lineTangency:S,theta:p}},LV=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=a_e(o,l),d=o+c,f=Lr(n,a,s,o),p=Lr(n,a,s,d),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var x=Lr(n,a,i,o),b=Lr(n,a,i,d);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(n,",").concat(a," Z");return g},i_e=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,f=e.endAngle,p=Li(f-d),g=Fj({cx:n,cy:a,radius:s,angle:d,sign:p,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,b=g.lineTangency,j=g.theta,S=Fj({cx:n,cy:a,radius:s,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:c}),_=S.circleTangency,T=S.lineTangency,C=S.theta,E=c?Math.abs(d-f):Math.abs(d-f)-j-C;if(E<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):LV({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f});var k="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(E>180),",").concat(+(p<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var P=Fj({cx:n,cy:a,radius:i,angle:d,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=P.circleTangency,R=P.lineTangency,z=P.theta,q=Fj({cx:n,cy:a,radius:i,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),F=q.circleTangency,V=q.lineTangency,H=q.theta,K=c?Math.abs(d-f):Math.abs(d-f)-z-H;if(K<0&&o===0)return"".concat(k,"L").concat(n,",").concat(a,"Z");k+="L".concat(V.x,",").concat(V.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(K>180),",").concat(+(p>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(R.x,",").concat(R.y,"Z")}else k+="L".concat(n,",").concat(a,"Z");return k},s_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},FV=function(e){var n=x8(x8({},s_e),e),a=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,g=n.className;if(o<s||f===p)return null;var x=fn("recharts-sector",g),b=o-s,j=Fi(l,b,0,!0),S;return j>0&&Math.abs(f-p)<360?S=i_e({cx:a,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:p}):S=LV({cx:a,cy:i,innerRadius:s,outerRadius:o,startAngle:f,endAngle:p}),Ce.createElement("path",$P({},zt(n,!0),{className:x,d:S,role:"img"}))};function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},BP.apply(this,arguments)}function v8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function b8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v8(Object(n),!0).forEach(function(a){o_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function o_e(t,e,n){return e=l_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l_e(t){var e=c_e(t,"string");return ib(e)=="symbol"?e:e+""}function c_e(t,e){if(ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ib(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j8={curveBasisClosed:Oxe,curveBasisOpen:Mxe,curveBasis:Dxe,curveBumpX:xxe,curveBumpY:vxe,curveLinearClosed:Ixe,curveLinear:mS,curveMonotoneX:Rxe,curveMonotoneY:Lxe,curveNatural:Fxe,curveStep:$xe,curveStepAfter:zxe,curveStepBefore:Bxe},$j=function(e){return e.x===+e.x&&e.y===+e.y},rv=function(e){return e.x},av=function(e){return e.y},u_e=function(e,n){if(an(e))return e;var a="curve".concat(fS(e));return(a==="curveMonotone"||a==="curveBump")&&n?j8["".concat(a).concat(n==="vertical"?"Y":"X")]:j8[a]||mS},d_e=function(e){var n=e.type,a=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,f=u_e(a,l),p=d?s.filter(function(j){return $j(j)}):s,g;if(Array.isArray(o)){var x=d?o.filter(function(j){return $j(j)}):o,b=p.map(function(j,S){return b8(b8({},j),{},{base:x[S]})});return l==="vertical"?g=Ej().y(av).x1(rv).x0(function(j){return j.base.x}):g=Ej().x(rv).y1(av).y0(function(j){return j.base.y}),g.defined($j).curve(f),g(b)}return l==="vertical"&&Nt(o)?g=Ej().y(av).x1(rv).x0(o):Nt(o)?g=Ej().x(rv).y1(av).y0(o):g=L9().x(rv).y(av),g.defined($j).curve(f),g(p)},mf=function(e){var n=e.className,a=e.points,i=e.path,s=e.pathRef;if((!a||!a.length)&&!i)return null;var o=a&&a.length?d_e(e):i;return v.createElement("path",BP({},zt(e,!1),Mw(e),{className:fn("recharts-curve",n),d:o,ref:s}))},lA={exports:{}},cA,w8;function h_e(){if(w8)return cA;w8=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return cA=t,cA}var uA,N8;function f_e(){if(N8)return uA;N8=1;var t=h_e();function e(){}function n(){}return n.resetWarningCache=e,uA=function(){function a(o,l,c,d,f,p){if(p!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}a.isRequired=a;function i(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},uA}var S8;function p_e(){return S8||(S8=1,lA.exports=f_e()()),lA.exports}var m_e=p_e();const hr=Hn(m_e);var g_e=Object.getOwnPropertyNames,y_e=Object.getOwnPropertySymbols,x_e=Object.prototype.hasOwnProperty;function _8(t,e){return function(a,i,s){return t(a,i,s)&&e(a,i,s)}}function Bj(t){return function(n,a,i){if(!n||!a||typeof n!="object"||typeof a!="object")return t(n,a,i);var s=i.cache,o=s.get(n),l=s.get(a);if(o&&l)return o===a&&l===n;s.set(n,a),s.set(a,n);var c=t(n,a,i);return s.delete(n),s.delete(a),c}}function C8(t){return g_e(t).concat(y_e(t))}var v_e=Object.hasOwn||function(t,e){return x_e.call(t,e)};function $f(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var b_e="__v",j_e="__o",w_e="_owner",T8=Object.getOwnPropertyDescriptor,k8=Object.keys;function N_e(t,e,n){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!n.equals(t[a],e[a],a,a,t,e,n))return!1;return!0}function S_e(t,e){return $f(t.getTime(),e.getTime())}function __e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function C_e(t,e){return t===e}function A8(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var d=e.entries(),f=!1,p=0;(l=d.next())&&!l.done;){if(i[p]){p++;continue}var g=o.value,x=l.value;if(n.equals(g[0],x[0],c,p,t,e,n)&&n.equals(g[1],x[1],g[0],x[0],t,e,n)){f=i[p]=!0;break}p++}if(!f)return!1;c++}return!0}var T_e=$f;function k_e(t,e,n){var a=k8(t),i=a.length;if(k8(e).length!==i)return!1;for(;i-- >0;)if(!$V(t,e,n,a[i]))return!1;return!0}function iv(t,e,n){var a=C8(t),i=a.length;if(C8(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=a[i],!$V(t,e,n,s)||(o=T8(t,s),l=T8(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function A_e(t,e){return $f(t.valueOf(),e.valueOf())}function E_e(t,e){return t.source===e.source&&t.flags===e.flags}function E8(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!i[f]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1}return!0}function P_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function D_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function $V(t,e,n,a){return(a===w_e||a===j_e||a===b_e)&&(t.$$typeof||e.$$typeof)?!0:v_e(e,a)&&n.equals(t[a],e[a],a,a,t,e,n)}var O_e="[object Arguments]",M_e="[object Boolean]",I_e="[object Date]",R_e="[object Error]",L_e="[object Map]",F_e="[object Number]",$_e="[object Object]",B_e="[object RegExp]",z_e="[object Set]",q_e="[object String]",U_e="[object URL]",V_e=Array.isArray,P8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,D8=Object.assign,H_e=Object.prototype.toString.call.bind(Object.prototype.toString);function G_e(t){var e=t.areArraysEqual,n=t.areDatesEqual,a=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,f=t.areSetsEqual,p=t.areTypedArraysEqual,g=t.areUrlsEqual;return function(b,j,S){if(b===j)return!0;if(b==null||j==null)return!1;var _=typeof b;if(_!==typeof j)return!1;if(_!=="object")return _==="number"?o(b,j,S):_==="function"?i(b,j,S):!1;var T=b.constructor;if(T!==j.constructor)return!1;if(T===Object)return l(b,j,S);if(V_e(b))return e(b,j,S);if(P8!=null&&P8(b))return p(b,j,S);if(T===Date)return n(b,j,S);if(T===RegExp)return d(b,j,S);if(T===Map)return s(b,j,S);if(T===Set)return f(b,j,S);var C=H_e(b);return C===I_e?n(b,j,S):C===B_e?d(b,j,S):C===L_e?s(b,j,S):C===z_e?f(b,j,S):C===$_e?typeof b.then!="function"&&typeof j.then!="function"&&l(b,j,S):C===U_e?g(b,j,S):C===R_e?a(b,j,S):C===O_e?l(b,j,S):C===M_e||C===F_e||C===q_e?c(b,j,S):!1}}function W_e(t){var e=t.circular,n=t.createCustomConfig,a=t.strict,i={areArraysEqual:a?iv:N_e,areDatesEqual:S_e,areErrorsEqual:__e,areFunctionsEqual:C_e,areMapsEqual:a?_8(A8,iv):A8,areNumbersEqual:T_e,areObjectsEqual:a?iv:k_e,arePrimitiveWrappersEqual:A_e,areRegExpsEqual:E_e,areSetsEqual:a?_8(E8,iv):E8,areTypedArraysEqual:a?iv:P_e,areUrlsEqual:D_e};if(n&&(i=D8({},i,n(i))),e){var s=Bj(i.areArraysEqual),o=Bj(i.areMapsEqual),l=Bj(i.areObjectsEqual),c=Bj(i.areSetsEqual);i=D8({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function K_e(t){return function(e,n,a,i,s,o,l){return t(e,n,l)}}function Y_e(t){var e=t.circular,n=t.comparator,a=t.createState,i=t.equals,s=t.strict;if(a)return function(c,d){var f=a(),p=f.cache,g=p===void 0?e?new WeakMap:void 0:p,x=f.meta;return n(c,d,{cache:g,equals:i,meta:x,strict:s})};if(e)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,d){return n(c,d,o)}}var Q_e=Sd();Sd({strict:!0});Sd({circular:!0});Sd({circular:!0,strict:!0});Sd({createInternalComparator:function(){return $f}});Sd({strict:!0,createInternalComparator:function(){return $f}});Sd({circular:!0,createInternalComparator:function(){return $f}});Sd({circular:!0,createInternalComparator:function(){return $f},strict:!0});function Sd(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,a=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=W_e(t),c=G_e(l),d=a?a(c):K_e(c);return Y_e({circular:n,comparator:c,createState:i,equals:d,strict:o})}function X_e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function O8(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):X_e(i)};requestAnimationFrame(a)}function zP(t){"@babel/helpers - typeof";return zP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zP(t)}function J_e(t){return nCe(t)||tCe(t)||eCe(t)||Z_e()}function Z_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eCe(t,e){if(t){if(typeof t=="string")return M8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M8(t,e)}}function M8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function tCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nCe(t){if(Array.isArray(t))return t}function rCe(){var t={},e=function(){return null},n=!1,a=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=J_e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){O8(i.bind(null,d),c);return}i(c),O8(i.bind(null,d));return}zP(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,a(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}function I8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function R8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I8(Object(n),!0).forEach(function(a){BV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function BV(t,e,n){return e=aCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aCe(t){var e=iCe(t,"string");return sb(e)==="symbol"?e:String(e)}function iCe(t,e){if(sb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(sb(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sCe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(a,i){return a.filter(function(s){return i.includes(s)})})},oCe=function(e){return e},lCe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},_v=function(e,n){return Object.keys(n).reduce(function(a,i){return R8(R8({},a),{},BV({},i,e(i,n[i])))},{})},L8=function(e,n,a){return e.map(function(i){return"".concat(lCe(i)," ").concat(n,"ms ").concat(a)}).join(",")};function cCe(t,e){return hCe(t)||dCe(t,e)||zV(t,e)||uCe()}function uCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function hCe(t){if(Array.isArray(t))return t}function fCe(t){return gCe(t)||mCe(t)||zV(t)||pCe()}function pCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zV(t,e){if(t){if(typeof t=="string")return qP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qP(t,e)}}function mCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gCe(t){if(Array.isArray(t))return qP(t)}function qP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var lN=1e-4,qV=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},UV=function(e,n){return e.map(function(a,i){return a*Math.pow(n,i)}).reduce(function(a,i){return a+i})},F8=function(e,n){return function(a){var i=qV(e,n);return UV(i,a)}},yCe=function(e,n){return function(a){var i=qV(e,n),s=[].concat(fCe(i.map(function(o,l){return o*l}).slice(1)),[0]);return UV(s,a)}},$8=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(S){return parseFloat(S)}),f=cCe(d,4);i=f[0],s=f[1],o=f[2],l=f[3]}}}var p=F8(i,o),g=F8(s,l),x=yCe(i,o),b=function(_){return _>1?1:_<0?0:_},j=function(_){for(var T=_>1?1:_,C=T,E=0;E<8;++E){var k=p(C)-T,P=x(C);if(Math.abs(k-T)<lN||P<lN)return g(C);C=b(C-k/P)}return g(C)};return j.isStepper=!1,j},xCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,a=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(f,p,g){var x=-(f-p)*a,b=g*s,j=g+(x-b)*l/1e3,S=g*l/1e3+f;return Math.abs(S-p)<lN&&Math.abs(j)<lN?[p,0]:[S,j]};return c.isStepper=!0,c.dt=l,c},vCe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $8(i);case"spring":return xCe();default:if(i.split("(")[0]==="cubic-bezier")return $8(i)}return typeof i=="function"?i:null};function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function B8(t){return wCe(t)||jCe(t)||VV(t)||bCe()}function bCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wCe(t){if(Array.isArray(t))return VP(t)}function z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ka(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z8(Object(n),!0).forEach(function(a){UP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function UP(t,e,n){return e=NCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NCe(t){var e=SCe(t,"string");return ob(e)==="symbol"?e:String(e)}function SCe(t,e){if(ob(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ob(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Ce(t,e){return kCe(t)||TCe(t,e)||VV(t,e)||CCe()}function CCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VV(t,e){if(t){if(typeof t=="string")return VP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VP(t,e)}}function VP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function TCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function kCe(t){if(Array.isArray(t))return t}var cN=function(e,n,a){return e+(n-e)*a},HP=function(e){var n=e.from,a=e.to;return n!==a},ACe=function t(e,n,a){var i=_v(function(s,o){if(HP(o)){var l=e(o.from,o.to,o.velocity),c=_Ce(l,2),d=c[0],f=c[1];return Ka(Ka({},o),{},{from:d,velocity:f})}return o},n);return a<1?_v(function(s,o){return HP(o)?Ka(Ka({},o),{},{velocity:cN(o.velocity,i[s].velocity,a),from:cN(o.from,i[s].from,a)}):o},n):t(e,i,a-1)};const ECe=function(t,e,n,a,i){var s=sCe(t,e),o=s.reduce(function(S,_){return Ka(Ka({},S),{},UP({},_,[t[_],e[_]]))},{}),l=s.reduce(function(S,_){return Ka(Ka({},S),{},UP({},_,{from:t[_],velocity:0,to:e[_]}))},{}),c=-1,d,f,p=function(){return null},g=function(){return _v(function(_,T){return T.from},l)},x=function(){return!Object.values(l).filter(HP).length},b=function(_){d||(d=_);var T=_-d,C=T/n.dt;l=ACe(n,l,C),i(Ka(Ka(Ka({},t),e),g())),d=_,x()||(c=requestAnimationFrame(p))},j=function(_){f||(f=_);var T=(_-f)/a,C=_v(function(k,P){return cN.apply(void 0,B8(P).concat([n(T)]))},o);if(i(Ka(Ka(Ka({},t),e),C)),T<1)c=requestAnimationFrame(p);else{var E=_v(function(k,P){return cN.apply(void 0,B8(P).concat([n(1)]))},o);i(Ka(Ka(Ka({},t),e),E))}};return p=n.isStepper?b:j,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}var PCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function DCe(t,e){if(t==null)return{};var n=OCe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function OCe(t,e){if(t==null)return{};var n={},a=Object.keys(t),i,s;for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function dA(t){return LCe(t)||RCe(t)||ICe(t)||MCe()}function MCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ICe(t,e){if(t){if(typeof t=="string")return GP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GP(t,e)}}function RCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LCe(t){if(Array.isArray(t))return GP(t)}function GP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function q8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Oo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q8(Object(n),!0).forEach(function(a){yv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function yv(t,e,n){return e=HV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ce(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,HV(a.key),a)}}function BCe(t,e,n){return e&&$Ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function HV(t){var e=zCe(t,"string");return xg(e)==="symbol"?e:String(e)}function zCe(t,e){if(xg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(xg(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WP(t,e)}function WP(t,e){return WP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},WP(t,e)}function UCe(t){var e=VCe();return function(){var a=uN(t),i;if(e){var s=uN(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return KP(this,i)}}function KP(t,e){if(e&&(xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YP(t)}function YP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uN(t){return uN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uN(t)}var Uo=function(t){qCe(n,t);var e=UCe(n);function n(a,i){var s;FCe(this,n),s=e.call(this,a,i);var o=s.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,p=o.steps,g=o.children,x=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(YP(s)),s.changeStyle=s.changeStyle.bind(YP(s)),!l||x<=0)return s.state={style:{}},typeof g=="function"&&(s.state={style:f}),KP(s);if(p&&p.length)s.state={style:p[0].style};else if(d){if(typeof g=="function")return s.state={style:d},KP(s);s.state={style:c?yv({},c,d):d}}else s.state={style:{}};return s}return BCe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,d=s.shouldReAnimate,f=s.to,p=s.from,g=this.state.style;if(l){if(!o){var x={style:c?yv({},c,f):f};this.state&&g&&(c&&g[c]!==f||!c&&g!==f)&&this.setState(x);return}if(!(Q_e(i.to,f)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=b||d?p:i.to;if(this.state&&g){var S={style:c?yv({},c,j):j};(c&&g[c]!==j||!c&&g!==j)&&this.setState(S)}this.runAnimation(Oo(Oo({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,d=i.easing,f=i.begin,p=i.onAnimationEnd,g=i.onAnimationStart,x=ECe(o,l,vCe(d),c,this.changeStyle),b=function(){s.stopJSAnimation=x()};this.manager.start([g,f,b,c,p])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],f=d.style,p=d.duration,g=p===void 0?0:p,x=function(j,S,_){if(_===0)return j;var T=S.duration,C=S.easing,E=C===void 0?"ease":C,k=S.style,P=S.properties,I=S.onAnimationEnd,R=_>0?o[_-1]:S,z=P||Object.keys(k);if(typeof E=="function"||E==="spring")return[].concat(dA(j),[s.runJSAnimation.bind(s,{from:R.style,to:k,duration:T,easing:E}),T]);var q=L8(z,T,E),F=Oo(Oo(Oo({},R.style),k),{},{transition:q});return[].concat(dA(j),[F,T,I]).filter(oCe)};return this.manager.start([c].concat(dA(o.reduce(x,[f,Math.max(g,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=rCe());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,f=i.onAnimationStart,p=i.onAnimationEnd,g=i.steps,x=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var j=l?yv({},l,c):c,S=L8(Object.keys(j),o,d);b.start([f,s,Oo(Oo({},j),{},{transition:S}),o,p])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=DCe(i,PCe),d=v.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||d===0||o<=0)return s;var p=function(x){var b=x.props,j=b.style,S=j===void 0?{}:j,_=b.className,T=v.cloneElement(x,Oo(Oo({},c),{},{style:Oo(Oo({},S),f),className:_}));return T};return d===1?p(v.Children.only(s)):Ce.createElement("div",null,v.Children.map(s,function(g){return p(g)}))}}]),n}(v.PureComponent);Uo.displayName="Animate";Uo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Uo.propTypes={from:hr.oneOfType([hr.object,hr.string]),to:hr.oneOfType([hr.object,hr.string]),attributeName:hr.string,duration:hr.number,begin:hr.number,easing:hr.oneOfType([hr.string,hr.func]),steps:hr.arrayOf(hr.shape({duration:hr.number.isRequired,style:hr.object.isRequired,easing:hr.oneOfType([hr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),hr.func]),properties:hr.arrayOf("string"),onAnimationEnd:hr.func})),children:hr.oneOfType([hr.node,hr.func]),isActive:hr.bool,canBegin:hr.bool,onAnimationEnd:hr.func,shouldReAnimate:hr.bool,onAnimationStart:hr.func,onAnimationReStart:hr.func};function lb(t){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(t)}function dN(){return dN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},dN.apply(this,arguments)}function HCe(t,e){return YCe(t)||KCe(t,e)||WCe(t,e)||GCe()}function GCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WCe(t,e){if(t){if(typeof t=="string")return U8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U8(t,e)}}function U8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function KCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function YCe(t){if(Array.isArray(t))return t}function V8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function H8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(n),!0).forEach(function(a){QCe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function QCe(t,e,n){return e=XCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XCe(t){var e=JCe(t,"string");return lb(e)=="symbol"?e:e+""}function JCe(t,e){if(lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(lb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G8=function(e,n,a,i,s){var o=Math.min(Math.abs(a)/2,Math.abs(i)/2),l=i>=0?1:-1,c=a>=0?1:-1,d=i>=0&&a>=0||i<0&&a<0?1:0,f;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=s[g]>o?o:s[g];f="M".concat(e,",").concat(n+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+c*p[0],",").concat(n)),f+="L ".concat(e+a-c*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+a,",").concat(n+l*p[1])),f+="L ".concat(e+a,",").concat(n+i-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+a-c*p[2],",").concat(n+i)),f+="L ".concat(e+c*p[3],",").concat(n+i),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(n+i-l*p[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var b=Math.min(o,s);f="M ".concat(e,",").concat(n+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+c*b,",").concat(n,`
            L `).concat(e+a-c*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+a,",").concat(n+l*b,`
            L `).concat(e+a,",").concat(n+i-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+a-c*b,",").concat(n+i,`
            L `).concat(e+c*b,",").concat(n+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e,",").concat(n+i-l*b," Z")}else f="M ".concat(e,",").concat(n," h ").concat(a," v ").concat(i," h ").concat(-a," Z");return f},ZCe=function(e,n){if(!e||!n)return!1;var a=e.x,i=e.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(s,s+l),f=Math.max(s,s+l),p=Math.min(o,o+c),g=Math.max(o,o+c);return a>=d&&a<=f&&i>=p&&i<=g}return!1},e2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jM=function(e){var n=H8(H8({},e2e),e),a=v.useRef(),i=v.useState(-1),s=HCe(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var E=a.current.getTotalLength();E&&l(E)}catch{}},[]);var c=n.x,d=n.y,f=n.width,p=n.height,g=n.radius,x=n.className,b=n.animationEasing,j=n.animationDuration,S=n.animationBegin,_=n.isAnimationActive,T=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var C=fn("recharts-rectangle",x);return T?Ce.createElement(Uo,{canBegin:o>0,from:{width:f,height:p,x:c,y:d},to:{width:f,height:p,x:c,y:d},duration:j,animationEasing:b,isActive:T},function(E){var k=E.width,P=E.height,I=E.x,R=E.y;return Ce.createElement(Uo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:j,isActive:_,easing:b},Ce.createElement("path",dN({},zt(n,!0),{className:C,d:G8(I,R,k,P,g),ref:a})))}):Ce.createElement("path",dN({},zt(n,!0),{className:C,d:G8(c,d,f,p,g)}))},t2e=["points","className","baseLinePoints","connectNulls"];function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Dm.apply(this,arguments)}function n2e(t,e){if(t==null)return{};var n=r2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function r2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function W8(t){return o2e(t)||s2e(t)||i2e(t)||a2e()}function a2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i2e(t,e){if(t){if(typeof t=="string")return QP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QP(t,e)}}function s2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function o2e(t){if(Array.isArray(t))return QP(t)}function QP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var K8=function(e){return e&&e.x===+e.x&&e.y===+e.y},l2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(a){K8(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),K8(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Cv=function(e,n){var a=l2e(e);n&&(a=[a.reduce(function(s,o){return[].concat(W8(s),W8(o))},[])]);var i=a.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(i,"Z"):i},c2e=function(e,n,a){var i=Cv(e,a);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Cv(n.reverse(),a).slice(1))},u2e=function(e){var n=e.points,a=e.className,i=e.baseLinePoints,s=e.connectNulls,o=n2e(e,t2e);if(!n||!n.length)return null;var l=fn("recharts-polygon",a);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",d=c2e(n,i,s);return Ce.createElement("g",{className:l},Ce.createElement("path",Dm({},zt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?Ce.createElement("path",Dm({},zt(o,!0),{fill:"none",d:Cv(n,s)})):null,c?Ce.createElement("path",Dm({},zt(o,!0),{fill:"none",d:Cv(i,s)})):null)}var f=Cv(n,s);return Ce.createElement("path",Dm({},zt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function XP(){return XP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},XP.apply(this,arguments)}var Wb=function(e){var n=e.cx,a=e.cy,i=e.r,s=e.className,o=fn("recharts-dot",s);return n===+n&&a===+a&&i===+i?v.createElement("circle",XP({},zt(e,!1),Mw(e),{className:o,cx:n,cy:a,r:i})):null};function cb(t){"@babel/helpers - typeof";return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cb(t)}var d2e=["x","y","top","left","width","height","className"];function JP(){return JP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},JP.apply(this,arguments)}function Y8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function h2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y8(Object(n),!0).forEach(function(a){f2e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function f2e(t,e,n){return e=p2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p2e(t){var e=m2e(t,"string");return cb(e)=="symbol"?e:e+""}function m2e(t,e){if(cb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(cb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function g2e(t,e){if(t==null)return{};var n=y2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function y2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var x2e=function(e,n,a,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(a)},v2e=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,f=e.width,p=f===void 0?0:f,g=e.height,x=g===void 0?0:g,b=e.className,j=g2e(e,d2e),S=h2e({x:a,y:s,top:l,left:d,width:p,height:x},j);return!Nt(a)||!Nt(s)||!Nt(p)||!Nt(x)||!Nt(l)||!Nt(d)?null:Ce.createElement("path",JP({},zt(S,!0),{className:fn("recharts-cross",b),d:x2e(a,s,p,x,l,d)}))},hA,Q8;function b2e(){if(Q8)return hA;Q8=1;var t=CS(),e=sV(),n=Ul();function a(i,s){return i&&i.length?t(i,n(s,2),e):void 0}return hA=a,hA}var j2e=b2e();const w2e=Hn(j2e);var fA,X8;function N2e(){if(X8)return fA;X8=1;var t=CS(),e=Ul(),n=oV();function a(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return fA=a,fA}var S2e=N2e();const _2e=Hn(S2e);var C2e=["cx","cy","angle","ticks","axisLine"],T2e=["ticks","tick","angle","tickFormatter","stroke"];function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function Tv(){return Tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Tv.apply(this,arguments)}function J8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function zh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J8(Object(n),!0).forEach(function(a){ES(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Z8(t,e){if(t==null)return{};var n=k2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function k2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function A2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,WV(a.key),a)}}function E2e(t,e,n){return e&&e$(t.prototype,e),n&&e$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function P2e(t,e,n){return e=hN(e),D2e(t,GV()?Reflect.construct(e,n||[],hN(t).constructor):e.apply(t,n))}function D2e(t,e){if(e&&(vg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O2e(t)}function O2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GV=function(){return!!t})()}function hN(t){return hN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hN(t)}function M2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZP(t,e)}function ZP(t,e){return ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},ZP(t,e)}function ES(t,e,n){return e=WV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WV(t){var e=I2e(t,"string");return vg(e)=="symbol"?e:e+""}function I2e(t,e){if(vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(vg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var PS=function(t){function e(){return A2e(this,e),P2e(this,e,arguments)}return M2e(e,t),E2e(e,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Lr(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=w2e(l,function(f){return f.coordinate||0}),d=_2e(l,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=a.axisLine,d=Z8(a,C2e),f=l.reduce(function(b,j){return[Math.min(b[0],j.coordinate),Math.max(b[1],j.coordinate)]},[1/0,-1/0]),p=Lr(i,s,f[0],o),g=Lr(i,s,f[1],o),x=zh(zh(zh({},zt(d,!1)),{},{fill:"none"},zt(c,!1)),{},{x1:p.x,y1:p.y,x2:g.x,y2:g.y});return Ce.createElement("line",Tv({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,d=i.stroke,f=Z8(i,T2e),p=this.getTickTextAnchor(),g=zt(f,!1),x=zt(o,!1),b=s.map(function(j,S){var _=a.getTickValueCoord(j),T=zh(zh(zh(zh({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},g),{},{stroke:"none",fill:d},x),{},{index:S},_),{},{payload:j});return Ce.createElement(In,Tv({className:fn("recharts-polar-radius-axis-tick",IV(o)),key:"tick-".concat(j.coordinate)},Tf(a.props,j,S)),e.renderTickItem(o,T,c?c(j.value,S):j.value))});return Ce.createElement(In,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:Ce.createElement(In,{className:fn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),La.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Ce.isValidElement(a)?o=Ce.cloneElement(a,i):an(a)?o=a(i):o=Ce.createElement(kf,Tv({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(v.PureComponent);ES(PS,"displayName","PolarRadiusAxis");ES(PS,"axisType","radiusAxis");ES(PS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Yh.apply(this,arguments)}function t$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function qh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t$(Object(n),!0).forEach(function(a){DS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function R2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,YV(a.key),a)}}function L2e(t,e,n){return e&&n$(t.prototype,e),n&&n$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F2e(t,e,n){return e=fN(e),$2e(t,KV()?Reflect.construct(e,n||[],fN(t).constructor):e.apply(t,n))}function $2e(t,e){if(e&&(bg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B2e(t)}function B2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KV=function(){return!!t})()}function fN(t){return fN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fN(t)}function z2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eD(t,e)}function eD(t,e){return eD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},eD(t,e)}function DS(t,e,n){return e=YV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YV(t){var e=q2e(t,"string");return bg(e)=="symbol"?e:e+""}function q2e(t,e){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(bg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var U2e=Math.PI/180,V2e=1e-5,OS=function(t){function e(){return R2e(this,e),F2e(this,e,arguments)}return z2e(e,t),L2e(e,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,d=i.tickSize,f=d||8,p=Lr(s,o,l,a.coordinate),g=Lr(s,o,l+(c==="inner"?-1:1)*f,a.coordinate);return{x1:p.x,y1:p.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*U2e),o;return s>V2e?o=i==="outer"?"start":"end":s<-1e-5?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,l=a.axisLine,c=a.axisLineType,d=qh(qh({},zt(this.props,!1)),{},{fill:"none"},zt(l,!1));if(c==="circle")return Ce.createElement(Wb,Yh({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:s,r:o}));var f=this.props.ticks,p=f.map(function(g){return Lr(i,s,o,g.coordinate)});return Ce.createElement(u2e,Yh({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,d=i.stroke,f=zt(this.props,!1),p=zt(o,!1),g=qh(qh({},f),{},{fill:"none"},zt(l,!1)),x=s.map(function(b,j){var S=a.getTickLineCoord(b),_=a.getTickTextAnchor(b),T=qh(qh(qh({textAnchor:_},f),{},{stroke:"none",fill:d},p),{},{index:j,payload:b,x:S.x2,y:S.y2});return Ce.createElement(In,Yh({className:fn("recharts-polar-angle-axis-tick",IV(o)),key:"tick-".concat(b.coordinate)},Tf(a.props,b,j)),l&&Ce.createElement("line",Yh({className:"recharts-polar-angle-axis-tick-line"},g,S)),o&&e.renderTickItem(o,T,c?c(b.value,j):b.value))});return Ce.createElement(In,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:Ce.createElement(In,{className:fn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Ce.isValidElement(a)?o=Ce.cloneElement(a,i):an(a)?o=a(i):o=Ce.createElement(kf,Yh({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(v.PureComponent);DS(OS,"displayName","PolarAngleAxis");DS(OS,"axisType","angleAxis");DS(OS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var pA,r$;function H2e(){if(r$)return pA;r$=1;var t=s7(),e=t(Object.getPrototypeOf,Object);return pA=e,pA}var mA,a$;function G2e(){if(a$)return mA;a$=1;var t=Gc(),e=H2e(),n=Wc(),a="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function d(f){if(!n(f)||t(f)!=a)return!1;var p=e(f);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==c}return mA=d,mA}var W2e=G2e();const K2e=Hn(W2e);var gA,i$;function Y2e(){if(i$)return gA;i$=1;var t=Gc(),e=Wc(),n="[object Boolean]";function a(i){return i===!0||i===!1||e(i)&&t(i)==n}return gA=a,gA}var Q2e=Y2e();const X2e=Hn(Q2e);function ub(t){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(t)}function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pN.apply(this,arguments)}function J2e(t,e){return nTe(t)||tTe(t,e)||eTe(t,e)||Z2e()}function Z2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eTe(t,e){if(t){if(typeof t=="string")return s$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s$(t,e)}}function s$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function tTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function nTe(t){if(Array.isArray(t))return t}function o$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function l$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(n),!0).forEach(function(a){rTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function rTe(t,e,n){return e=aTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aTe(t){var e=iTe(t,"string");return ub(e)=="symbol"?e:e+""}function iTe(t,e){if(ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ub(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c$=function(e,n,a,i,s){var o=a-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+a,",").concat(n),l+="L ".concat(e+a-o/2,",").concat(n+s),l+="L ".concat(e+a-o/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},sTe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oTe=function(e){var n=l$(l$({},sTe),e),a=v.useRef(),i=v.useState(-1),s=J2e(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var C=a.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,d=n.y,f=n.upperWidth,p=n.lowerWidth,g=n.height,x=n.className,b=n.animationEasing,j=n.animationDuration,S=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||g!==+g||f===0&&p===0||g===0)return null;var T=fn("recharts-trapezoid",x);return _?Ce.createElement(Uo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:g,x:c,y:d},to:{upperWidth:f,lowerWidth:p,height:g,x:c,y:d},duration:j,animationEasing:b,isActive:_},function(C){var E=C.upperWidth,k=C.lowerWidth,P=C.height,I=C.x,R=C.y;return Ce.createElement(Uo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:j,easing:b},Ce.createElement("path",pN({},zt(n,!0),{className:T,d:c$(I,R,E,k,P),ref:a})))}):Ce.createElement("g",null,Ce.createElement("path",pN({},zt(n,!0),{className:T,d:c$(c,d,f,p,g)})))},lTe=["option","shapeType","propTransformer","activeClassName","isActive"];function db(t){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(t)}function cTe(t,e){if(t==null)return{};var n=uTe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function uTe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function u$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function mN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(n),!0).forEach(function(a){dTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function dTe(t,e,n){return e=hTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hTe(t){var e=fTe(t,"string");return db(e)=="symbol"?e:e+""}function fTe(t,e){if(db(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(db(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pTe(t,e){return mN(mN({},e),t)}function mTe(t,e){return t==="symbols"}function d$(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Ce.createElement(jM,n);case"trapezoid":return Ce.createElement(oTe,n);case"sector":return Ce.createElement(FV,n);case"symbols":if(mTe(e))return Ce.createElement(BO,n);break;default:return null}}function gTe(t){return v.isValidElement(t)?t.props:t}function QV(t){var e=t.option,n=t.shapeType,a=t.propTransformer,i=a===void 0?pTe:a,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=cTe(t,lTe),d;if(v.isValidElement(e))d=v.cloneElement(e,mN(mN({},c),gTe(e)));else if(an(e))d=e(c);else if(K2e(e)&&!X2e(e)){var f=i(e,c);d=Ce.createElement(d$,{shapeType:n,elementProps:f})}else{var p=c;d=Ce.createElement(d$,{shapeType:n,elementProps:p})}return l?Ce.createElement(In,{className:o},d):d}function MS(t,e){return e!=null&&"trapezoids"in t.props}function IS(t,e){return e!=null&&"sectors"in t.props}function hb(t,e){return e!=null&&"points"in t.props}function yTe(t,e){var n,a,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.y)||t.y===e.y;return i&&s}function xTe(t,e){var n=t.endAngle===e.endAngle,a=t.startAngle===e.startAngle;return n&&a}function vTe(t,e){var n=t.x===e.x,a=t.y===e.y,i=t.z===e.z;return n&&a&&i}function bTe(t,e){var n;return MS(t,e)?n=yTe:IS(t,e)?n=xTe:hb(t,e)&&(n=vTe),n}function jTe(t,e){var n;return MS(t,e)?n="trapezoids":IS(t,e)?n="sectors":hb(t,e)&&(n="points"),n}function wTe(t,e){if(MS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(IS(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return hb(t,e)?e.payload:{}}function NTe(t){var e=t.activeTooltipItem,n=t.graphicalItem,a=t.itemData,i=jTe(n,e),s=wTe(n,e),o=a.filter(function(c,d){var f=Af(s,c),p=n.props[i].filter(function(b){var j=bTe(n,e);return j(b,e)}),g=n.props[i].indexOf(p[p.length-1]),x=d===g;return f&&x}),l=a.indexOf(o[o.length-1]);return l}var lw;function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Om.apply(this,arguments)}function h$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(n),!0).forEach(function(a){no(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function STe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,JV(a.key),a)}}function _Te(t,e,n){return e&&f$(t.prototype,e),n&&f$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function CTe(t,e,n){return e=gN(e),TTe(t,XV()?Reflect.construct(e,n||[],gN(t).constructor):e.apply(t,n))}function TTe(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kTe(t)}function kTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XV=function(){return!!t})()}function gN(t){return gN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gN(t)}function ATe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tD(t,e)}function tD(t,e){return tD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},tD(t,e)}function no(t,e,n){return e=JV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JV(t){var e=ETe(t,"string");return jg(e)=="symbol"?e:e+""}function ETe(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(jg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vl=function(t){function e(n){var a;return STe(this,e),a=CTe(this,e,[n]),no(a,"pieRef",null),no(a,"sectorRefs",[]),no(a,"id",Rf("recharts-pie-")),no(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),an(i)&&i()}),no(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),an(i)&&i()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return ATe(e,t),_Te(e,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,d=s.valueKey,f=zt(this.props,!1),p=zt(o,!1),g=zt(l,!1),x=o&&o.offsetRadius||20,b=a.map(function(j,S){var _=(j.startAngle+j.endAngle)/2,T=Lr(j.cx,j.cy,j.outerRadius+x,_),C=Ir(Ir(Ir(Ir({},f),j),{},{stroke:"none"},p),{},{index:S,textAnchor:e.getTextAnchor(T.x,j.cx)},T),E=Ir(Ir(Ir(Ir({},f),j),{},{fill:"none",stroke:j.fill},g),{},{index:S,points:[Lr(j.cx,j.cy,j.outerRadius,_),T]}),k=c;return dn(c)&&dn(d)?k="value":dn(c)&&(k=d),Ce.createElement(In,{key:"label-".concat(j.startAngle,"-").concat(j.endAngle,"-").concat(j.midAngle,"-").concat(S)},l&&e.renderLabelLineItem(l,E,"line"),e.renderLabelItem(o,C,ha(j,k)))});return Ce.createElement(In,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return a.map(function(d,f){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&a.length!==1)return null;var p=i.isActiveIndex(f),g=c&&i.hasActiveIndex()?c:null,x=p?o:g,b=Ir(Ir({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return Ce.createElement(In,Om({ref:function(S){S&&!i.sectorRefs.includes(S)&&i.sectorRefs.push(S)},tabIndex:-1,className:"recharts-pie-sector"},Tf(i.props,d,f),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(f)}),Ce.createElement(QV,Om({option:x,isActive:p,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state,g=p.prevSectors,x=p.prevIsAnimationActive;return Ce.createElement(Uo,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var j=b.t,S=[],_=s&&s[0],T=_.startAngle;return s.forEach(function(C,E){var k=g&&g[E],P=E>0?Rs(C,"paddingAngle",0):0;if(k){var I=ka(k.endAngle-k.startAngle,C.endAngle-C.startAngle),R=Ir(Ir({},C),{},{startAngle:T+P,endAngle:T+I(j)+P});S.push(R),T=R.endAngle}else{var z=C.endAngle,q=C.startAngle,F=ka(0,z-q),V=F(j),H=Ir(Ir({},C),{},{startAngle:T+P,endAngle:T+V+P});S.push(H),T=H.endAngle}}),Ce.createElement(In,null,a.renderSectorsStatically(S))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!Af(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,d=i.cx,f=i.cy,p=i.innerRadius,g=i.outerRadius,x=i.isAnimationActive,b=this.state.isAnimationFinished;if(s||!o||!o.length||!Nt(d)||!Nt(f)||!Nt(p)||!Nt(g))return null;var j=fn("recharts-pie",l);return Ce.createElement(In,{tabIndex:this.props.rootTabIndex,className:j,ref:function(_){a.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),La.renderCallByParent(this.props,null,!1),(!x||b)&&Ll.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i,s){if(Ce.isValidElement(a))return Ce.cloneElement(a,i);if(an(a))return a(i);var o=fn("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Ce.createElement(mf,Om({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,i,s){if(Ce.isValidElement(a))return Ce.cloneElement(a,i);var o=s;if(an(a)&&(o=a(i),Ce.isValidElement(o)))return o;var l=fn("recharts-pie-label-text",typeof a!="boolean"&&!an(a)?a.className:"");return Ce.createElement(kf,Om({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(v.PureComponent);lw=Vl;no(Vl,"displayName","Pie");no(Vl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!jd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});no(Vl,"parseDeltaAngle",function(t,e){var n=Li(e-t),a=Math.min(Math.abs(e-t),360);return n*a});no(Vl,"getRealPieData",function(t){var e=t.data,n=t.children,a=zt(t,!1),i=Ls(n,zb);return e&&e.length?e.map(function(s,o){return Ir(Ir(Ir({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return Ir(Ir({},a),s.props)}):[]});no(Vl,"parseCoordinateOfPie",function(t,e){var n=e.top,a=e.left,i=e.width,s=e.height,o=MV(i,s),l=a+Fi(t.cx,i,i/2),c=n+Fi(t.cy,s,s/2),d=Fi(t.innerRadius,o,0),f=Fi(t.outerRadius,o,o*.8),p=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:f,maxRadius:p}});no(Vl,"getComposedData",function(t){var e=t.item,n=t.offset,a=e.type.defaultProps!==void 0?Ir(Ir({},e.type.defaultProps),e.props):e.props,i=lw.getRealPieData(a);if(!i||!i.length)return null;var s=a.cornerRadius,o=a.startAngle,l=a.endAngle,c=a.paddingAngle,d=a.dataKey,f=a.nameKey,p=a.valueKey,g=a.tooltipType,x=Math.abs(a.minAngle),b=lw.parseCoordinateOfPie(a,n),j=lw.parseDeltaAngle(o,l),S=Math.abs(j),_=d;dn(d)&&dn(p)?(zo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):dn(d)&&(zo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=p);var T=i.filter(function(R){return ha(R,_,0)!==0}).length,C=(S>=360?T:T-1)*c,E=S-T*x-C,k=i.reduce(function(R,z){var q=ha(z,_,0);return R+(Nt(q)?q:0)},0),P;if(k>0){var I;P=i.map(function(R,z){var q=ha(R,_,0),F=ha(R,f,z),V=(Nt(q)?q:0)/k,H;z?H=I.endAngle+Li(j)*c*(q!==0?1:0):H=o;var K=H+Li(j)*((q!==0?x:0)+V*E),W=(H+K)/2,B=(b.innerRadius+b.outerRadius)/2,G=[{name:F,value:q,payload:R,dataKey:_,type:g}],ee=Lr(b.cx,b.cy,B,W);return I=Ir(Ir(Ir({percent:V,cornerRadius:s,name:F,tooltipPayload:G,midAngle:W,middleRadius:B,tooltipPosition:ee},R),b),{},{value:ha(R,_),startAngle:H,endAngle:K,payload:R,paddingAngle:Li(j)*c}),I})}return Ir(Ir({},b),{},{sectors:P,data:i})});var yA,p$;function PTe(){if(p$)return yA;p$=1;var t=Math.ceil,e=Math.max;function n(a,i,s,o){for(var l=-1,c=e(t((i-a)/(s||1)),0),d=Array(c);c--;)d[o?c:++l]=a,a+=s;return d}return yA=n,yA}var xA,m$;function ZV(){if(m$)return xA;m$=1;var t=j9(),e=1/0,n=17976931348623157e292;function a(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*n}return i===i?i:0}return xA=a,xA}var vA,g$;function DTe(){if(g$)return vA;g$=1;var t=PTe(),e=vS(),n=ZV();function a(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return vA=a,vA}var bA,y$;function OTe(){if(y$)return bA;y$=1;var t=DTe(),e=t();return bA=e,bA}var MTe=OTe();const yN=Hn(MTe);function fb(t){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fb(t)}function x$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function v$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(n),!0).forEach(function(a){eH(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function eH(t,e,n){return e=ITe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ITe(t){var e=RTe(t,"string");return fb(e)=="symbol"?e:e+""}function RTe(t,e){if(fb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(fb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LTe=["Webkit","Moz","O","ms"],FTe=function(e,n){var a=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=LTe.reduce(function(s,o){return v$(v$({},s),{},eH({},o+a,n))},{});return i[e]=n,i};function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function xN(){return xN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},xN.apply(this,arguments)}function b$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function jA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b$(Object(n),!0).forEach(function(a){Ts(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function $Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,nH(a.key),a)}}function BTe(t,e,n){return e&&j$(t.prototype,e),n&&j$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zTe(t,e,n){return e=vN(e),qTe(t,tH()?Reflect.construct(e,n||[],vN(t).constructor):e.apply(t,n))}function qTe(t,e){if(e&&(wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UTe(t)}function UTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tH=function(){return!!t})()}function vN(t){return vN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vN(t)}function VTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nD(t,e)}function nD(t,e){return nD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},nD(t,e)}function Ts(t,e,n){return e=nH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nH(t){var e=HTe(t,"string");return wg(e)=="symbol"?e:e+""}function HTe(t,e){if(wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(wg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var GTe=function(e){var n=e.data,a=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=Nv().domain(yN(0,c)).range([s,s+o-l]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(i),scale:d,scaleValues:f}},w$=function(e){return e.changedTouches&&!!e.changedTouches.length},Ng=function(t){function e(n){var a;return $Te(this,e),a=zTe(this,e,[n]),Ts(a,"handleDrag",function(i){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(i):a.state.isSlideMoving&&a.handleSlideDrag(i)}),Ts(a,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&a.handleDrag(i.changedTouches[0])}),Ts(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=a.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),a.detachDragEndListener()}),Ts(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Ts(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Ts(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Ts(a,"handleSlideDragStart",function(i){var s=w$(i)?i.changedTouches[0]:i;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return VTe(e,t),BTe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var i=a.startX,s=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,p=Math.min(i,s),g=Math.max(i,s),x=e.getIndexInRange(o,p),b=e.getIndexInRange(o,g);return{startIndex:x-x%c,endIndex:b===f?f:b-b%c}}},{key:"getTextOfTick",value:function(a){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=ha(s[a],l,a);return an(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,f=c.width,p=c.travellerWidth,g=c.startIndex,x=c.endIndex,b=c.onChange,j=a.pageX-s;j>0?j=Math.min(j,d+f-p-l,d+f-p-o):j<0&&(j=Math.max(j,d-o,d-l));var S=this.getIndex({startX:o+j,endX:l+j});(S.startIndex!==g||S.endIndex!==x)&&b&&b(S),this.setState({startX:o+j,endX:l+j,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,i){var s=w$(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],f=this.props,p=f.x,g=f.width,x=f.travellerWidth,b=f.onChange,j=f.gap,S=f.data,_={startX:this.state.startX,endX:this.state.endX},T=a.pageX-s;T>0?T=Math.min(T,p+g-x-d):T<0&&(T=Math.max(T,p-d)),_[o]=d+T;var C=this.getIndex(_),E=C.startIndex,k=C.endIndex,P=function(){var R=S.length-1;return o==="startX"&&(l>c?E%j===0:k%j===0)||l<c&&k===R||o==="endX"&&(l>c?k%j===0:E%j===0)||l>c&&k===R};this.setState(Ts(Ts({},o,d+T),"brushMoveStartX",a.pageX),function(){b&&P()&&b(C)})}},{key:"handleTravellerMoveKeyboard",value:function(a,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[i],p=l.indexOf(f);if(p!==-1){var g=p+a;if(!(g===-1||g>=l.length)){var x=l[g];i==="startX"&&x>=d||i==="endX"&&x<=c||this.setState(Ts({},i,x),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return Ce.createElement("rect",{stroke:d,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.data,d=a.children,f=a.padding,p=v.Children.only(d);return p?Ce.cloneElement(p,{x:i,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,i){var s,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,p=c.height,g=c.traveller,x=c.ariaLabel,b=c.data,j=c.startIndex,S=c.endIndex,_=Math.max(a,this.props.x),T=jA(jA({},zt(this.props,!1)),{},{x:_,y:d,width:f,height:p}),C=x||"Min value: ".concat((s=b[j])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=b[S])===null||o===void 0?void 0:o.name);return Ce.createElement(In,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(g,T))}},{key:"renderSlide",value:function(a,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,d=s.travellerWidth,f=Math.min(a,i)+d,p=Math.max(Math.abs(i-a)-d,0);return Ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var a=this.props,i=a.startIndex,s=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,f=this.state,p=f.startX,g=f.endX,x=5,b={pointerEvents:"none",fill:d};return Ce.createElement(In,{className:"recharts-brush-texts"},Ce.createElement(kf,xN({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-x,y:o+l/2},b),this.getTextOfTick(i)),Ce.createElement(kf,xN({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+c+x,y:o+l/2},b),this.getTextOfTick(s)))}},{key:"render",value:function(){var a=this.props,i=a.data,s=a.className,o=a.children,l=a.x,c=a.y,d=a.width,f=a.height,p=a.alwaysShowText,g=this.state,x=g.startX,b=g.endX,j=g.isTextActive,S=g.isSlideMoving,_=g.isTravellerMoving,T=g.isTravellerFocused;if(!i||!i.length||!Nt(l)||!Nt(c)||!Nt(d)||!Nt(f)||d<=0||f<=0)return null;var C=fn("recharts-brush",s),E=Ce.Children.count(o)===1,k=FTe("userSelect","none");return Ce.createElement(In,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(j||S||_||T||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var i=a.x,s=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(s+l/2)-1;return Ce.createElement(Ce.Fragment,null,Ce.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),Ce.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),Ce.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,i){var s;return Ce.isValidElement(a)?s=Ce.cloneElement(a,i):an(a)?s=a(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(a,i){var s=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,f=a.startIndex,p=a.endIndex;if(s!==i.prevData||d!==i.prevUpdateId)return jA({prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},s&&s.length?GTe({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var g=i.scale.domain().map(function(x){return i.scale(x)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(a.startIndex),endX:i.scale(a.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(a,i){for(var s=a.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>i?l=c:o=c}return i>=a[l]?l:o}}])}(v.PureComponent);Ts(Ng,"displayName","Brush");Ts(Ng,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var wA,N$;function WTe(){if(N$)return wA;N$=1;var t=WO();function e(n,a){var i;return t(n,function(s,o,l){return i=a(s,o,l),!i}),!!i}return wA=e,wA}var NA,S$;function KTe(){if(S$)return NA;S$=1;var t=Z9(),e=Ul(),n=WTe(),a=fs(),i=vS();function s(o,l,c){var d=a(o)?t:n;return c&&i(o,l,c)&&(l=void 0),d(o,e(l,3))}return NA=s,NA}var YTe=KTe();const QTe=Hn(YTe);var Fl=function(e,n){var a=e.alwaysShow,i=e.ifOverflow;return a&&(i="extendDomain"),i===n},SA,_$;function XTe(){if(_$)return SA;_$=1;var t=y7();function e(n,a,i){a=="__proto__"&&t?t(n,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[a]=i}return SA=e,SA}var _A,C$;function JTe(){if(C$)return _A;C$=1;var t=XTe(),e=m7(),n=Ul();function a(i,s){var o={};return s=n(s,3),e(i,function(l,c,d){t(o,c,s(l,c,d))}),o}return _A=a,_A}var ZTe=JTe();const eke=Hn(ZTe);var CA,T$;function tke(){if(T$)return CA;T$=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(!n(e[a],a,e))return!1;return!0}return CA=t,CA}var TA,k$;function nke(){if(k$)return TA;k$=1;var t=WO();function e(n,a){var i=!0;return t(n,function(s,o,l){return i=!!a(s,o,l),i}),i}return TA=e,TA}var kA,A$;function rke(){if(A$)return kA;A$=1;var t=tke(),e=nke(),n=Ul(),a=fs(),i=vS();function s(o,l,c){var d=a(o)?t:e;return c&&i(o,l,c)&&(l=void 0),d(o,n(l,3))}return kA=s,kA}var ake=rke();const rH=Hn(ake);var ike=["x","y"];function pb(t){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(t)}function rD(){return rD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rD.apply(this,arguments)}function E$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function sv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E$(Object(n),!0).forEach(function(a){ske(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ske(t,e,n){return e=oke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oke(t){var e=lke(t,"string");return pb(e)=="symbol"?e:e+""}function lke(t,e){if(pb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(pb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cke(t,e){if(t==null)return{};var n=uke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function uke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function dke(t,e){var n=t.x,a=t.y,i=cke(t,ike),s="".concat(n),o=parseInt(s,10),l="".concat(a),c=parseInt(l,10),d="".concat(e.height||i.height),f=parseInt(d,10),p="".concat(e.width||i.width),g=parseInt(p,10);return sv(sv(sv(sv(sv({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function P$(t){return Ce.createElement(QV,rD({shapeType:"rectangle",propTransformer:dke,activeClassName:"recharts-active-bar"},t))}var hke=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,i){if(typeof e=="number")return e;var s=Nt(a)||Bye(a);return s?e(a,i):(s||Pf(),n)}},fke=["value","background"],aH;function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function pke(t,e){if(t==null)return{};var n=mke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function mke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function bN(){return bN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},bN.apply(this,arguments)}function D$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function va(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(n),!0).forEach(function(a){sd(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function gke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,sH(a.key),a)}}function yke(t,e,n){return e&&O$(t.prototype,e),n&&O$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xke(t,e,n){return e=jN(e),vke(t,iH()?Reflect.construct(e,n||[],jN(t).constructor):e.apply(t,n))}function vke(t,e){if(e&&(Sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bke(t)}function bke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iH=function(){return!!t})()}function jN(t){return jN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jN(t)}function jke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aD(t,e)}function aD(t,e){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},aD(t,e)}function sd(t,e,n){return e=sH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sH(t){var e=wke(t,"string");return Sg(e)=="symbol"?e:e+""}function wke(t,e){if(Sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _d=function(t){function e(){var n;gke(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=xke(this,e,[].concat(i)),sd(n,"state",{isAnimationFinished:!1}),sd(n,"id",Rf("recharts-bar-")),sd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),sd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return jke(e,t),yke(e,[{key:"renderRectanglesStatically",value:function(a){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,d=s.activeBar,f=zt(this.props,!1);return a&&a.map(function(p,g){var x=g===c,b=x?d:o,j=va(va(va({},f),p),{},{isActive:x,option:b,index:g,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ce.createElement(In,bN({className:"recharts-bar-rectangle"},Tf(i.props,p,g),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(g)}),Ce.createElement(P$,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,p=i.animationId,g=this.state.prevData;return Ce.createElement(Uo,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,j=s.map(function(S,_){var T=g&&g[_];if(T){var C=ka(T.x,S.x),E=ka(T.y,S.y),k=ka(T.width,S.width),P=ka(T.height,S.height);return va(va({},S),{},{x:C(b),y:E(b),width:k(b),height:P(b)})}if(o==="horizontal"){var I=ka(0,S.height),R=I(b);return va(va({},S),{},{y:S.y+S.height-R,height:R})}var z=ka(0,S.width),q=z(b);return va(va({},S),{},{width:q})});return Ce.createElement(In,null,a.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var a=this.props,i=a.data,s=a.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!Af(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var a=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=zt(this.props.background,!1);return s.map(function(d,f){d.value;var p=d.background,g=pke(d,fke);if(!p)return null;var x=va(va(va(va(va({},g),{},{fill:"#eee"},p),c),Tf(a.props,d,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Ce.createElement(P$,bN({key:"background-bar-".concat(f),option:a.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=Ls(f,Gb);if(!p)return null;var g=d==="vertical"?o[0].height/2:o[0].width/2,x=function(S,_){var T=Array.isArray(S.value)?S.value[1]:S.value;return{x:S.x,y:S.y,value:T,errorVal:ha(S,_)}},b={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Ce.createElement(In,b,p.map(function(j){return Ce.cloneElement(j,{key:"error-bar-".concat(i,"-").concat(j.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var a=this.props,i=a.hide,s=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,f=a.top,p=a.width,g=a.height,x=a.isAnimationActive,b=a.background,j=a.id;if(i||!s||!s.length)return null;var S=this.state.isAnimationFinished,_=fn("recharts-bar",o),T=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,E=T||C,k=dn(j)?this.id:j;return Ce.createElement(In,{className:_},T||C?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(k)},Ce.createElement("rect",{x:T?d:d-p/2,y:C?f:f-g/2,width:T?p:p*2,height:C?g:g*2}))):null,Ce.createElement(In,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(k,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,k),(!x||S)&&Ll.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:i.curData}:a.data!==i.curData?{curData:a.data}:null}}])}(v.PureComponent);aH=_d;sd(_d,"displayName","Bar");sd(_d,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});sd(_d,"getComposedData",function(t){var e=t.props,n=t.item,a=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=QNe(a,n);if(!x)return null;var b=e.layout,j=n.type.defaultProps,S=j!==void 0?va(va({},j),n.props):n.props,_=S.dataKey,T=S.children,C=S.minPointSize,E=b==="horizontal"?o:s,k=d?E.scale.domain():null,P=rSe({numericAxis:E}),I=Ls(T,zb),R=p.map(function(z,q){var F,V,H,K,W,B;d?F=XNe(d[f+q],k):(F=ha(z,_),Array.isArray(F)||(F=[P,F]));var G=hke(C,aH.defaultProps.minPointSize)(F[1],q);if(b==="horizontal"){var ee,X=[o.scale(F[0]),o.scale(F[1])],$=X[0],ce=X[1];V=i8({axis:s,ticks:l,bandSize:i,offset:x.offset,entry:z,index:q}),H=(ee=ce??$)!==null&&ee!==void 0?ee:void 0,K=x.size;var xe=$-ce;if(W=Number.isNaN(xe)?0:xe,B={x:V,y:o.y,width:K,height:o.height},Math.abs(G)>0&&Math.abs(W)<Math.abs(G)){var Y=Li(W||G)*(Math.abs(G)-Math.abs(W));H-=Y,W+=Y}}else{var Re=[s.scale(F[0]),s.scale(F[1])],$e=Re[0],ze=Re[1];if(V=$e,H=i8({axis:o,ticks:c,bandSize:i,offset:x.offset,entry:z,index:q}),K=ze-$e,W=x.size,B={x:s.x,y:H,width:s.width,height:W},Math.abs(G)>0&&Math.abs(K)<Math.abs(G)){var Le=Li(K||G)*(Math.abs(G)-Math.abs(K));K+=Le}}return va(va(va({},z),{},{x:V,y:H,width:K,height:W,value:d?F:F[1],payload:z,background:B},I&&I[q]&&I[q].props),{},{tooltipPayload:[DV(n,z)],tooltipPosition:{x:V+K/2,y:H+W/2}})});return va({data:R,layout:b},g)});function mb(t){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(t)}function Nke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,oH(a.key),a)}}function Ske(t,e,n){return e&&M$(t.prototype,e),n&&M$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function I$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ro(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(n),!0).forEach(function(a){RS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function RS(t,e,n){return e=oH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oH(t){var e=_ke(t,"string");return mb(e)=="symbol"?e:e+""}function _ke(t,e){if(mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(mb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wM=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.layout,d=e.children,f=Object.keys(n),p={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},g=!!ks(d,_d);return f.reduce(function(x,b){var j=n[b],S=j.orientation,_=j.domain,T=j.padding,C=T===void 0?{}:T,E=j.mirror,k=j.reversed,P="".concat(S).concat(E?"Mirror":""),I,R,z,q,F;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var V=_[1]-_[0],H=1/0,K=j.categoricalDomain.sort(Uye);if(K.forEach(function(Re,$e){$e>0&&(H=Math.min((Re||0)-(K[$e-1]||0),H))}),Number.isFinite(H)){var W=H/V,B=j.layout==="vertical"?a.height:a.width;if(j.padding==="gap"&&(I=W*B/2),j.padding==="no-gap"){var G=Fi(e.barCategoryGap,W*B),ee=W*B/2;I=ee-G-(ee-G)/B*G}}}i==="xAxis"?R=[a.left+(C.left||0)+(I||0),a.left+a.width-(C.right||0)-(I||0)]:i==="yAxis"?R=c==="horizontal"?[a.top+a.height-(C.bottom||0),a.top+(C.top||0)]:[a.top+(C.top||0)+(I||0),a.top+a.height-(C.bottom||0)-(I||0)]:R=j.range,k&&(R=[R[1],R[0]]);var X=kV(j,s,g),$=X.scale,ce=X.realScaleType;$.domain(_).range(R),AV($);var xe=EV($,Ro(Ro({},j),{},{realScaleType:ce}));i==="xAxis"?(F=S==="top"&&!E||S==="bottom"&&E,z=a.left,q=p[P]-F*j.height):i==="yAxis"&&(F=S==="left"&&!E||S==="right"&&E,z=p[P]-F*j.width,q=a.top);var Y=Ro(Ro(Ro({},j),xe),{},{realScaleType:ce,x:z,y:q,scale:$,width:i==="xAxis"?a.width:j.width,height:i==="yAxis"?a.height:j.height});return Y.bandSize=iN(Y,xe),!j.hide&&i==="xAxis"?p[P]+=(F?-1:1)*Y.height:j.hide||(p[P]+=(F?-1:1)*Y.width),Ro(Ro({},x),{},RS({},b,Y))},{})},lH=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(a,s),y:Math.min(i,o),width:Math.abs(s-a),height:Math.abs(o-i)}},Cke=function(e){var n=e.x1,a=e.y1,i=e.x2,s=e.y2;return lH({x:n,y:a},{x:i,y:s})},cH=function(){function t(e){Nke(this,t),this.scale=e}return Ske(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.bandAware,s=a.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),i=a[0],s=a[a.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();RS(cH,"EPS",1e-4);var NM=function(e){var n=Object.keys(e).reduce(function(a,i){return Ro(Ro({},a),{},RS({},i,cH.create(e[i])))},{});return Ro(Ro({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return eke(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return rH(i,function(s,o){return n[o].isInRange(s)})}})};function Tke(t){return(t%180+180)%180}var kke=function(e){var n=e.width,a=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Tke(i),o=s*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},AA,R$;function Ake(){if(R$)return AA;R$=1;var t=Ul(),e=Bb(),n=yS();function a(i){return function(s,o,l){var c=Object(s);if(!e(s)){var d=t(o,3);s=n(s),o=function(p){return d(c[p],p,c)}}var f=i(s,o,l);return f>-1?c[d?s[f]:f]:void 0}}return AA=a,AA}var EA,L$;function Eke(){if(L$)return EA;L$=1;var t=ZV();function e(n){var a=t(n),i=a%1;return a===a?i?a-i:a:0}return EA=e,EA}var PA,F$;function Pke(){if(F$)return PA;F$=1;var t=u7(),e=Ul(),n=Eke(),a=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var d=l==null?0:n(l);return d<0&&(d=a(c+d,0)),t(s,e(o,3),d)}return PA=i,PA}var DA,$$;function Dke(){if($$)return DA;$$=1;var t=Ake(),e=Pke(),n=t(e);return DA=n,DA}var Oke=Dke();const Mke=Hn(Oke);var Ike=_9();const Rke=Hn(Ike);var Lke=Rke(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),SM=v.createContext(void 0),_M=v.createContext(void 0),uH=v.createContext(void 0),dH=v.createContext({}),hH=v.createContext(void 0),fH=v.createContext(0),pH=v.createContext(0),B$=function(e){var n=e.state,a=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,f=Lke(s);return Ce.createElement(SM.Provider,{value:a},Ce.createElement(_M.Provider,{value:i},Ce.createElement(dH.Provider,{value:s},Ce.createElement(uH.Provider,{value:f},Ce.createElement(hH.Provider,{value:o},Ce.createElement(fH.Provider,{value:d},Ce.createElement(pH.Provider,{value:c},l)))))))},Fke=function(){return v.useContext(hH)},mH=function(e){var n=v.useContext(SM);n==null&&Pf();var a=n[e];return a==null&&Pf(),a},$ke=function(){var e=v.useContext(SM);return Ku(e)},Bke=function(){var e=v.useContext(_M),n=Mke(e,function(a){return rH(a.domain,Number.isFinite)});return n||Ku(e)},gH=function(e){var n=v.useContext(_M);n==null&&Pf();var a=n[e];return a==null&&Pf(),a},zke=function(){var e=v.useContext(uH);return e},qke=function(){return v.useContext(dH)},CM=function(){return v.useContext(pH)},TM=function(){return v.useContext(fH)};function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function Uke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vke(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,xH(a.key),a)}}function Hke(t,e,n){return e&&Vke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gke(t,e,n){return e=wN(e),Wke(t,yH()?Reflect.construct(e,n||[],wN(t).constructor):e.apply(t,n))}function Wke(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kke(t)}function Kke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yH=function(){return!!t})()}function wN(t){return wN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wN(t)}function Yke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iD(t,e)}function iD(t,e){return iD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},iD(t,e)}function z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function q$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z$(Object(n),!0).forEach(function(a){kM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function kM(t,e,n){return e=xH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xH(t){var e=Qke(t,"string");return _g(e)=="symbol"?e:e+""}function Qke(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(_g(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Xke(t,e){return tAe(t)||eAe(t,e)||Zke(t,e)||Jke()}function Jke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zke(t,e){if(t){if(typeof t=="string")return U$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U$(t,e)}}function U$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function eAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function tAe(t){if(Array.isArray(t))return t}function sD(){return sD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},sD.apply(this,arguments)}var nAe=function(e,n){var a;return Ce.isValidElement(e)?a=Ce.cloneElement(e,n):an(e)?a=e(n):a=Ce.createElement("line",sD({},n,{className:"recharts-reference-line-line"})),a},rAe=function(e,n,a,i,s,o,l,c,d){var f=s.x,p=s.y,g=s.width,x=s.height;if(a){var b=d.y,j=e.y.apply(b,{position:o});if(Fl(d,"discard")&&!e.y.isInRange(j))return null;var S=[{x:f+g,y:j},{x:f,y:j}];return c==="left"?S.reverse():S}if(n){var _=d.x,T=e.x.apply(_,{position:o});if(Fl(d,"discard")&&!e.x.isInRange(T))return null;var C=[{x:T,y:p+x},{x:T,y:p}];return l==="top"?C.reverse():C}if(i){var E=d.segment,k=E.map(function(P){return e.apply(P,{position:o})});return Fl(d,"discard")&&QTe(k,function(P){return!e.isInRange(P)})?null:k}return null};function aAe(t){var e=t.x,n=t.y,a=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=Fke(),f=mH(i),p=gH(s),g=zke();if(!d||!g)return null;zo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=NM({x:f.scale,y:p.scale}),b=Aa(e),j=Aa(n),S=a&&a.length===2,_=rAe(x,b,j,S,g,t.position,f.orientation,p.orientation,t);if(!_)return null;var T=Xke(_,2),C=T[0],E=C.x,k=C.y,P=T[1],I=P.x,R=P.y,z=Fl(t,"hidden")?"url(#".concat(d,")"):void 0,q=q$(q$({clipPath:z},zt(t,!0)),{},{x1:E,y1:k,x2:I,y2:R});return Ce.createElement(In,{className:fn("recharts-reference-line",l)},nAe(o,q),La.renderCallByParent(t,Cke({x1:E,y1:k,x2:I,y2:R})))}var AM=function(t){function e(){return Uke(this,e),Gke(this,e,arguments)}return Yke(e,t),Hke(e,[{key:"render",value:function(){return Ce.createElement(aAe,this.props)}}])}(Ce.Component);kM(AM,"displayName","ReferenceLine");kM(AM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function oD(){return oD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oD.apply(this,arguments)}function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function V$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function H$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V$(Object(n),!0).forEach(function(a){LS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function iAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,bH(a.key),a)}}function oAe(t,e,n){return e&&sAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lAe(t,e,n){return e=NN(e),cAe(t,vH()?Reflect.construct(e,n||[],NN(t).constructor):e.apply(t,n))}function cAe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uAe(t)}function uAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vH=function(){return!!t})()}function NN(t){return NN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NN(t)}function dAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lD(t,e)}function lD(t,e){return lD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},lD(t,e)}function LS(t,e,n){return e=bH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bH(t){var e=hAe(t,"string");return Cg(e)=="symbol"?e:e+""}function hAe(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fAe=function(e){var n=e.x,a=e.y,i=e.xAxis,s=e.yAxis,o=NM({x:i.scale,y:s.scale}),l=o.apply({x:n,y:a},{bandAware:!0});return Fl(e,"discard")&&!o.isInRange(l)?null:l},FS=function(t){function e(){return iAe(this,e),lAe(this,e,arguments)}return dAe(e,t),oAe(e,[{key:"render",value:function(){var a=this.props,i=a.x,s=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=Aa(i),f=Aa(s);if(zo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var p=fAe(this.props);if(!p)return null;var g=p.x,x=p.y,b=this.props,j=b.shape,S=b.className,_=Fl(this.props,"hidden")?"url(#".concat(c,")"):void 0,T=H$(H$({clipPath:_},zt(this.props,!0)),{},{cx:g,cy:x});return Ce.createElement(In,{className:fn("recharts-reference-dot",S)},e.renderDot(j,T),La.renderCallByParent(this.props,{x:g-o,y:x-o,width:2*o,height:2*o}))}}])}(Ce.Component);LS(FS,"displayName","ReferenceDot");LS(FS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});LS(FS,"renderDot",function(t,e){var n;return Ce.isValidElement(t)?n=Ce.cloneElement(t,e):an(t)?n=t(e):n=Ce.createElement(Wb,oD({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function cD(){return cD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cD.apply(this,arguments)}function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function G$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function W$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(n),!0).forEach(function(a){$S(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function pAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,wH(a.key),a)}}function gAe(t,e,n){return e&&mAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yAe(t,e,n){return e=SN(e),xAe(t,jH()?Reflect.construct(e,n||[],SN(t).constructor):e.apply(t,n))}function xAe(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vAe(t)}function vAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jH=function(){return!!t})()}function SN(t){return SN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SN(t)}function bAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uD(t,e)}function uD(t,e){return uD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},uD(t,e)}function $S(t,e,n){return e=wH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wH(t){var e=jAe(t,"string");return Tg(e)=="symbol"?e:e+""}function jAe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Tg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wAe=function(e,n,a,i,s){var o=s.x1,l=s.x2,c=s.y1,d=s.y2,f=s.xAxis,p=s.yAxis;if(!f||!p)return null;var g=NM({x:f.scale,y:p.scale}),x={x:e?g.x.apply(o,{position:"start"}):g.x.rangeMin,y:a?g.y.apply(c,{position:"start"}):g.y.rangeMin},b={x:n?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(d,{position:"end"}):g.y.rangeMax};return Fl(s,"discard")&&(!g.isInRange(x)||!g.isInRange(b))?null:lH(x,b)},BS=function(t){function e(){return pAe(this,e),yAe(this,e,arguments)}return bAe(e,t),gAe(e,[{key:"render",value:function(){var a=this.props,i=a.x1,s=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,f=a.clipPathId;zo(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Aa(i),g=Aa(s),x=Aa(o),b=Aa(l),j=this.props.shape;if(!p&&!g&&!x&&!b&&!j)return null;var S=wAe(p,g,x,b,this.props);if(!S&&!j)return null;var _=Fl(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Ce.createElement(In,{className:fn("recharts-reference-area",c)},e.renderRect(j,W$(W$({clipPath:_},zt(this.props,!0)),S)),La.renderCallByParent(this.props,S))}}])}(Ce.Component);$S(BS,"displayName","ReferenceArea");$S(BS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});$S(BS,"renderRect",function(t,e){var n;return Ce.isValidElement(t)?n=Ce.cloneElement(t,e):an(t)?n=t(e):n=Ce.createElement(jM,cD({},e,{className:"recharts-reference-area-rect"})),n});function NH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var a=[],i=0;i<t.length;i+=e)a.push(t[i]);return a}function NAe(t,e,n){var a={width:t.width+e.width,height:t.height+e.height};return kke(a,n)}function SAe(t,e,n){var a=n==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:a?i:s,end:a?i+o:s+l}:{start:a?i+o:s+l,end:a?i:s}}function _N(t,e,n,a,i){if(t*e<t*a||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-a)>=0&&t*(e+t*s/2-i)<=0}function _Ae(t,e){return NH(t,e+1)}function CAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=e.start,l=e.end,c=0,d=1,f=o,p=function(){var b=a==null?void 0:a[c];if(b===void 0)return{v:NH(a,d)};var j=c,S,_=function(){return S===void 0&&(S=n(b,j)),S},T=b.coordinate,C=c===0||_N(t,T,_,f,l);C||(c=0,f=o,d+=1),C&&(f=T+t*(_()/2+i),c+=d)},g;d<=s.length;)if(g=p(),g)return g.v;return[]}function gb(t){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}function K$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(n),!0).forEach(function(a){TAe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function TAe(t,e,n){return e=kAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kAe(t){var e=AAe(t,"string");return gb(e)=="symbol"?e:e+""}function AAe(t,e){if(gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=s.length,l=e.start,c=e.end,d=function(g){var x=s[g],b,j=function(){return b===void 0&&(b=n(x,g)),b};if(g===o-1){var S=t*(x.coordinate+t*j()/2-c);s[g]=x=hi(hi({},x),{},{tickCoord:S>0?x.coordinate-S*t:x.coordinate})}else s[g]=x=hi(hi({},x),{},{tickCoord:x.coordinate});var _=_N(t,x.tickCoord,j,l,c);_&&(c=x.tickCoord-t*(j()/2+i),s[g]=hi(hi({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return s}function PAe(t,e,n,a,i,s){var o=(a||[]).slice(),l=o.length,c=e.start,d=e.end;if(s){var f=a[l-1],p=n(f,l-1),g=t*(f.coordinate+t*p/2-d);o[l-1]=f=hi(hi({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate});var x=_N(t,f.tickCoord,function(){return p},c,d);x&&(d=f.tickCoord-t*(p/2+i),o[l-1]=hi(hi({},f),{},{isShow:!0}))}for(var b=s?l-1:l,j=function(T){var C=o[T],E,k=function(){return E===void 0&&(E=n(C,T)),E};if(T===0){var P=t*(C.coordinate-t*k()/2-c);o[T]=C=hi(hi({},C),{},{tickCoord:P<0?C.coordinate-P*t:C.coordinate})}else o[T]=C=hi(hi({},C),{},{tickCoord:C.coordinate});var I=_N(t,C.tickCoord,k,c,d);I&&(c=C.tickCoord+t*(k()/2+i),o[T]=hi(hi({},C),{},{isShow:!0}))},S=0;S<b;S++)j(S);return o}function EM(t,e,n){var a=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,f=t.unit,p=t.angle;if(!i||!i.length||!a)return[];if(Nt(c)||jd.isSsr)return _Ae(i,typeof c=="number"&&Nt(c)?c:0);var g=[],x=l==="top"||l==="bottom"?"width":"height",b=f&&x==="width"?wv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},j=function(C,E){var k=an(d)?d(C.value,E):C.value;return x==="width"?NAe(wv(k,{fontSize:e,letterSpacing:n}),b,p):wv(k,{fontSize:e,letterSpacing:n})[x]},S=i.length>=2?Li(i[1].coordinate-i[0].coordinate):1,_=SAe(s,S,x);return c==="equidistantPreserveStart"?CAe(S,_,j,i,o):(c==="preserveStart"||c==="preserveStartEnd"?g=PAe(S,_,j,i,o,c==="preserveStartEnd"):g=EAe(S,_,j,i,o),g.filter(function(T){return T.isShow}))}var DAe=["viewBox"],OAe=["viewBox"],MAe=["ticks"];function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function Mm(){return Mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Mm.apply(this,arguments)}function Y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function _a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y$(Object(n),!0).forEach(function(a){PM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function OA(t,e){if(t==null)return{};var n=IAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function IAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function RAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_H(a.key),a)}}function LAe(t,e,n){return e&&Q$(t.prototype,e),n&&Q$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function FAe(t,e,n){return e=CN(e),$Ae(t,SH()?Reflect.construct(e,n||[],CN(t).constructor):e.apply(t,n))}function $Ae(t,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BAe(t)}function BAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SH=function(){return!!t})()}function CN(t){return CN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CN(t)}function zAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dD(t,e)}function dD(t,e){return dD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},dD(t,e)}function PM(t,e,n){return e=_H(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _H(t){var e=qAe(t,"string");return kg(e)=="symbol"?e:e+""}function qAe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(kg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qg=function(t){function e(n){var a;return RAe(this,e),a=FAe(this,e,[n]),a.state={fontSize:"",letterSpacing:""},a}return zAe(e,t),LAe(e,[{key:"shouldComponentUpdate",value:function(a,i){var s=a.viewBox,o=OA(a,DAe),l=this.props,c=l.viewBox,d=OA(l,OAe);return!Bm(s,c)||!Bm(o,d)||!Bm(i,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var i=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,f=i.tickSize,p=i.mirror,g=i.tickMargin,x,b,j,S,_,T,C=p?-1:1,E=a.tickSize||f,k=Nt(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":x=b=a.coordinate,S=o+ +!p*c,j=S-C*E,T=j-C*g,_=k;break;case"left":j=S=a.coordinate,b=s+ +!p*l,x=b-C*E,_=x-C*g,T=k;break;case"right":j=S=a.coordinate,b=s+ +p*l,x=b+C*E,_=x+C*g,T=k;break;default:x=b=a.coordinate,S=o+ +p*c,j=S+C*E,T=j+C*g,_=k;break}return{line:{x1:x,y1:j,x2:b,y2:S},tick:{x:_,y:T}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,f=a.axisLine,p=_a(_a(_a({},zt(this.props,!1)),zt(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var g=+(c==="top"&&!d||c==="bottom"&&d);p=_a(_a({},p),{},{x1:i,y1:s+g*l,x2:i+o,y2:s+g*l})}else{var x=+(c==="left"&&!d||c==="right"&&d);p=_a(_a({},p),{},{x1:i+x*o,y1:s,x2:i+x*o,y2:s+l})}return Ce.createElement("line",Mm({},p,{className:fn("recharts-cartesian-axis-line",Rs(f,"className"))}))}},{key:"renderTicks",value:function(a,i,s){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,p=l.tickFormatter,g=l.unit,x=EM(_a(_a({},this.props),{},{ticks:a}),i,s),b=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),S=zt(this.props,!1),_=zt(f,!1),T=_a(_a({},S),{},{fill:"none"},zt(c,!1)),C=x.map(function(E,k){var P=o.getTickLineCoord(E),I=P.line,R=P.tick,z=_a(_a(_a(_a({textAnchor:b,verticalAnchor:j},S),{},{stroke:"none",fill:d},_),R),{},{index:k,payload:E,visibleTicksCount:x.length,tickFormatter:p});return Ce.createElement(In,Mm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},Tf(o.props,E,k)),c&&Ce.createElement("line",Mm({},T,I,{className:fn("recharts-cartesian-axis-tick-line",Rs(c,"className"))})),f&&e.renderTickItem(f,z,"".concat(an(p)?p(E.value,k):E.value).concat(g||"")))});return Ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var a=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,f=i.hide;if(f)return null;var p=this.props,g=p.ticks,x=OA(p,MAe),b=g;return an(c)&&(b=g&&g.length>0?c(this.props):c(x)),o<=0||l<=0||!b||!b.length?null:Ce.createElement(In,{className:fn("recharts-cartesian-axis",d),ref:function(S){a.layerReference=S}},s&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),La.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,i,s){var o,l=fn(i.className,"recharts-cartesian-axis-tick-value");return Ce.isValidElement(a)?o=Ce.cloneElement(a,_a(_a({},i),{},{className:l})):an(a)?o=a(_a(_a({},i),{},{className:l})):o=Ce.createElement(kf,Mm({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(v.Component);PM(Qg,"displayName","CartesianAxis");PM(Qg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var UAe=["x1","y1","x2","y2","key"],VAe=["offset"];function Df(t){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Df(t)}function X$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X$(Object(n),!0).forEach(function(a){HAe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function HAe(t,e,n){return e=GAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GAe(t){var e=WAe(t,"string");return Df(e)=="symbol"?e:e+""}function WAe(t,e){if(Df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Df(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tf(){return tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},tf.apply(this,arguments)}function J$(t,e){if(t==null)return{};var n=KAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function KAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var YAe=function(e){var n=e.fill;if(!n||n==="none")return null;var a=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return Ce.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function CH(t,e){var n;if(Ce.isValidElement(t))n=Ce.cloneElement(t,e);else if(an(t))n=t(e);else{var a=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=J$(e,UAe),d=zt(c,!1);d.offset;var f=J$(d,VAe);n=Ce.createElement("line",tf({},f,{x1:a,y1:i,x2:s,y2:o,fill:"none",key:l}))}return n}function QAe(t){var e=t.x,n=t.width,a=t.horizontal,i=a===void 0?!0:a,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var d=pi(pi({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return CH(i,d)});return Ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function XAe(t){var e=t.y,n=t.height,a=t.vertical,i=a===void 0?!0:a,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var d=pi(pi({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return CH(i,d)});return Ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function JAe(t){var e=t.horizontalFill,n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var f=l.map(function(g){return Math.round(g+i-i)}).sort(function(g,x){return g-x});i!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?i+o-g:f[x+1]-g;if(j<=0)return null;var S=x%e.length;return Ce.createElement("rect",{key:"react-".concat(x),y:g,x:a,height:j,width:s,stroke:"none",fill:e[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function ZAe(t){var e=t.vertical,n=e===void 0?!0:e,a=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!n||!a||!a.length)return null;var f=d.map(function(g){return Math.round(g+s-s)}).sort(function(g,x){return g-x});s!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?s+l-g:f[x+1]-g;if(j<=0)return null;var S=x%a.length;return Ce.createElement("rect",{key:"react-".concat(x),x:g,y:o,width:j,height:c,stroke:"none",fill:a[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var eEe=function(e,n){var a=e.xAxis,i=e.width,s=e.height,o=e.offset;return TV(EM(pi(pi(pi({},Qg.defaultProps),a),{},{ticks:kc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},tEe=function(e,n){var a=e.yAxis,i=e.width,s=e.height,o=e.offset;return TV(EM(pi(pi(pi({},Qg.defaultProps),a),{},{ticks:kc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},wm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function yb(t){var e,n,a,i,s,o,l=CM(),c=TM(),d=qke(),f=pi(pi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:wm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:wm.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:wm.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:wm.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:wm.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:wm.verticalFill,x:Nt(t.x)?t.x:d.left,y:Nt(t.y)?t.y:d.top,width:Nt(t.width)?t.width:d.width,height:Nt(t.height)?t.height:d.height}),p=f.x,g=f.y,x=f.width,b=f.height,j=f.syncWithTicks,S=f.horizontalValues,_=f.verticalValues,T=$ke(),C=Bke();if(!Nt(x)||x<=0||!Nt(b)||b<=0||!Nt(p)||p!==+p||!Nt(g)||g!==+g)return null;var E=f.verticalCoordinatesGenerator||eEe,k=f.horizontalCoordinatesGenerator||tEe,P=f.horizontalPoints,I=f.verticalPoints;if((!P||!P.length)&&an(k)){var R=S&&S.length,z=k({yAxis:C?pi(pi({},C),{},{ticks:R?S:C.ticks}):void 0,width:l,height:c,offset:d},R?!0:j);zo(Array.isArray(z),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Df(z),"]")),Array.isArray(z)&&(P=z)}if((!I||!I.length)&&an(E)){var q=_&&_.length,F=E({xAxis:T?pi(pi({},T),{},{ticks:q?_:T.ticks}):void 0,width:l,height:c,offset:d},q?!0:j);zo(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Df(F),"]")),Array.isArray(F)&&(I=F)}return Ce.createElement("g",{className:"recharts-cartesian-grid"},Ce.createElement(YAe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Ce.createElement(QAe,tf({},f,{offset:d,horizontalPoints:P,xAxis:T,yAxis:C})),Ce.createElement(XAe,tf({},f,{offset:d,verticalPoints:I,xAxis:T,yAxis:C})),Ce.createElement(JAe,tf({},f,{horizontalPoints:P})),Ce.createElement(ZAe,tf({},f,{verticalPoints:I})))}yb.displayName="CartesianGrid";var nEe=["type","layout","connectNulls","ref"],rEe=["key"];function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function Z$(t,e){if(t==null)return{};var n=aEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function aEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function kv(){return kv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},kv.apply(this,arguments)}function eB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eB(Object(n),!0).forEach(function(a){Lo(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Nm(t){return lEe(t)||oEe(t)||sEe(t)||iEe()}function iEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sEe(t,e){if(t){if(typeof t=="string")return hD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hD(t,e)}}function oEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lEe(t){if(Array.isArray(t))return hD(t)}function hD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function cEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tB(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,kH(a.key),a)}}function uEe(t,e,n){return e&&tB(t.prototype,e),n&&tB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dEe(t,e,n){return e=TN(e),hEe(t,TH()?Reflect.construct(e,n||[],TN(t).constructor):e.apply(t,n))}function hEe(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fEe(t)}function fEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TH=function(){return!!t})()}function TN(t){return TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TN(t)}function pEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fD(t,e)}function fD(t,e){return fD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},fD(t,e)}function Lo(t,e,n){return e=kH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kH(t){var e=mEe(t,"string");return Ag(e)=="symbol"?e:e+""}function mEe(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ag(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kb=function(t){function e(){var n;cEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=dEe(this,e,[].concat(i)),Lo(n,"state",{isAnimationFinished:!0,totalLength:0}),Lo(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Lo(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(_,T){return _+T});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),p=o%d,g=l-o,x=[],b=0,j=0;b<c.length;j+=c[b],++b)if(j+c[b]>p){x=[].concat(Nm(c.slice(0,b)),[p-j]);break}var S=x.length%2===0?[0,g]:[g];return[].concat(Nm(e.repeat(c,f)),Nm(x),S).map(function(_){return"".concat(_,"px")}).join(", ")}),Lo(n,"id",Rf("recharts-line-")),Lo(n,"pathRef",function(o){n.mainCurve=o}),Lo(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Lo(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return pEe(e,t),uEe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=Ls(f,Gb);if(!p)return null;var g=function(j,S){return{x:j.x,y:j.y,value:j.value,errorVal:ha(j.payload,S)}},x={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Ce.createElement(In,x,p.map(function(b){return Ce.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:g})}))}},{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,f=l.dataKey,p=zt(this.props,!1),g=zt(c,!0),x=d.map(function(j,S){var _=Cs(Cs(Cs({key:"dot-".concat(S),r:3},p),g),{},{index:S,cx:j.x,cy:j.y,value:j.value,dataKey:f,payload:j.payload,points:d});return e.renderDotItem(c,_)}),b={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Ce.createElement(In,kv({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(a,i,s,o){var l=this.props,c=l.type,d=l.layout,f=l.connectNulls;l.ref;var p=Z$(l,nEe),g=Cs(Cs(Cs({},zt(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:a},o),{},{type:c,layout:d,connectNulls:f});return Ce.createElement(mf,kv({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=o.animateNewValues,j=o.width,S=o.height,_=this.state,T=_.prevPoints,C=_.totalLength;return Ce.createElement(Uo,{begin:f,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var k=E.t;if(T){var P=T.length/l.length,I=l.map(function(V,H){var K=Math.floor(H*P);if(T[K]){var W=T[K],B=ka(W.x,V.x),G=ka(W.y,V.y);return Cs(Cs({},V),{},{x:B(k),y:G(k)})}if(b){var ee=ka(j*2,V.x),X=ka(S/2,V.y);return Cs(Cs({},V),{},{x:ee(k),y:X(k)})}return Cs(Cs({},V),{},{x:V.x,y:V.y})});return s.renderCurveStatically(I,a,i)}var R=ka(0,C),z=R(k),q;if(c){var F="".concat(c).split(/[,\s]+/gim).map(function(V){return parseFloat(V)});q=s.getStrokeDasharray(z,C,F)}else q=s.generateSimpleStrokeDasharray(C,z);return s.renderCurveStatically(l,a,i,{strokeDasharray:q})})}},{key:"renderCurve",value:function(a,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,d=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!d&&f>0||!Af(d,o))?this.renderCurveWithAnimation(a,i):this.renderCurveStatically(o,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,f=i.yAxis,p=i.top,g=i.left,x=i.width,b=i.height,j=i.isAnimationActive,S=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=fn("recharts-line",c),E=d&&d.allowDataOverflow,k=f&&f.allowDataOverflow,P=E||k,I=dn(S)?this.id:S,R=(a=zt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},z=R.r,q=z===void 0?3:z,F=R.strokeWidth,V=F===void 0?2:F,H=E9(o)?o:{},K=H.clipDot,W=K===void 0?!0:K,B=q*2+V;return Ce.createElement(In,{className:C},E||k?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(I)},Ce.createElement("rect",{x:E?g:g-x/2,y:k?p:p-b/2,width:E?x:x*2,height:k?b:b*2})),!W&&Ce.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Ce.createElement("rect",{x:g-B/2,y:p-B/2,width:x+B,height:b+B}))):null,!T&&this.renderCurve(P,I),this.renderErrorBar(P,I),(T||o)&&this.renderDots(P,W,I),(!j||_)&&Ll.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,i){for(var s=a.length%2!==0?[].concat(Nm(a),[0]):a,o=[],l=0;l<i;++l)o=[].concat(Nm(o),Nm(s));return o}},{key:"renderDotItem",value:function(a,i){var s;if(Ce.isValidElement(a))s=Ce.cloneElement(a,i);else if(an(a))s=a(i);else{var o=i.key,l=Z$(i,rEe),c=fn("recharts-line-dot",typeof a!="boolean"?a.className:"");s=Ce.createElement(Wb,kv({key:o},l,{className:c}))}return s}}])}(v.PureComponent);Lo(Kb,"displayName","Line");Lo(Kb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Lo(Kb,"getComposedData",function(t){var e=t.props,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,f=e.layout,p=c.map(function(g,x){var b=ha(g,o);return f==="horizontal"?{x:aN({axis:n,ticks:i,bandSize:l,entry:g,index:x}),y:dn(b)?null:a.scale(b),value:b,payload:g}:{x:dn(b)?null:n.scale(b),y:aN({axis:a,ticks:s,bandSize:l,entry:g,index:x}),value:b,payload:g}});return Cs({points:p,layout:f},d)});var gEe=["layout","type","stroke","connectNulls","isRange","ref"],yEe=["key"],AH;function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function EH(t,e){if(t==null)return{};var n=xEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function xEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function nf(){return nf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},nf.apply(this,arguments)}function nB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Gu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(n),!0).forEach(function(a){Ml(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function vEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rB(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,DH(a.key),a)}}function bEe(t,e,n){return e&&rB(t.prototype,e),n&&rB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jEe(t,e,n){return e=kN(e),wEe(t,PH()?Reflect.construct(e,n||[],kN(t).constructor):e.apply(t,n))}function wEe(t,e){if(e&&(Eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NEe(t)}function NEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PH=function(){return!!t})()}function kN(t){return kN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kN(t)}function SEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pD(t,e)}function pD(t,e){return pD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},pD(t,e)}function Ml(t,e,n){return e=DH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DH(t){var e=_Ee(t,"string");return Eg(e)=="symbol"?e:e+""}function _Ee(t,e){if(Eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Cd=function(t){function e(){var n;vEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=jEe(this,e,[].concat(i)),Ml(n,"state",{isAnimationFinished:!0}),Ml(n,"id",Rf("recharts-area-")),Ml(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),an(o)&&o()}),Ml(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),an(o)&&o()}),n}return SEe(e,t),bEe(e,[{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,f=c.points,p=c.dataKey,g=zt(this.props,!1),x=zt(d,!0),b=f.map(function(S,_){var T=Gu(Gu(Gu({key:"dot-".concat(_),r:3},g),x),{},{index:_,cx:S.x,cy:S.y,dataKey:p,value:S.value,payload:S.payload,points:f});return e.renderDotItem(d,T)}),j={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Ce.createElement(In,nf({className:"recharts-area-dots"},j),b)}},{key:"renderHorizontalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,d=o[o.length-1].x,f=a*Math.abs(c-d),p=id(o.map(function(g){return g.y||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(id(s.map(function(g){return g.y||0})),p)),Nt(p)?Ce.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,d=o[o.length-1].y,f=a*Math.abs(c-d),p=id(o.map(function(g){return g.x||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(id(s.map(function(g){return g.x||0})),p)),Nt(p)?Ce.createElement("rect",{x:0,y:c<d?c:c-f,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(a){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,i,s,o){var l=this.props,c=l.layout,d=l.type,f=l.stroke,p=l.connectNulls,g=l.isRange;l.ref;var x=EH(l,gEe);return Ce.createElement(In,{clipPath:s?"url(#clipPath-".concat(o,")"):null},Ce.createElement(mf,nf({},zt(x,!0),{points:a,connectNulls:p,type:d,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Ce.createElement(mf,nf({},zt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:a})),f!=="none"&&g&&Ce.createElement(mf,nf({},zt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=this.state,j=b.prevPoints,S=b.prevBaseLine;return Ce.createElement(Uo,{begin:f,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var T=_.t;if(j){var C=j.length/l.length,E=l.map(function(R,z){var q=Math.floor(z*C);if(j[q]){var F=j[q],V=ka(F.x,R.x),H=ka(F.y,R.y);return Gu(Gu({},R),{},{x:V(T),y:H(T)})}return R}),k;if(Nt(c)&&typeof c=="number"){var P=ka(S,c);k=P(T)}else if(dn(c)||Hg(c)){var I=ka(S,0);k=I(T)}else k=c.map(function(R,z){var q=Math.floor(z*C);if(S[q]){var F=S[q],V=ka(F.x,R.x),H=ka(F.y,R.y);return Gu(Gu({},R),{},{x:V(T),y:H(T)})}return R});return s.renderAreaStatically(E,k,a,i)}return Ce.createElement(In,null,Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(T))),Ce.createElement(In,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,a,i)))})}},{key:"renderArea",value:function(a,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,d=this.state,f=d.prevPoints,p=d.prevBaseLine,g=d.totalLength;return c&&o&&o.length&&(!f&&g>0||!Af(f,o)||!Af(p,l))?this.renderAreaWithAnimation(a,i):this.renderAreaStatically(o,l,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,d=i.top,f=i.left,p=i.xAxis,g=i.yAxis,x=i.width,b=i.height,j=i.isAnimationActive,S=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=fn("recharts-area",c),E=p&&p.allowDataOverflow,k=g&&g.allowDataOverflow,P=E||k,I=dn(S)?this.id:S,R=(a=zt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},z=R.r,q=z===void 0?3:z,F=R.strokeWidth,V=F===void 0?2:F,H=E9(o)?o:{},K=H.clipDot,W=K===void 0?!0:K,B=q*2+V;return Ce.createElement(In,{className:C},E||k?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(I)},Ce.createElement("rect",{x:E?f:f-x/2,y:k?d:d-b/2,width:E?x:x*2,height:k?b:b*2})),!W&&Ce.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Ce.createElement("rect",{x:f-B/2,y:d-B/2,width:x+B,height:b+B}))):null,T?null:this.renderArea(P,I),(o||T)&&this.renderDots(P,W,I),(!j||_)&&Ll.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:a.points!==i.curPoints||a.baseLine!==i.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(v.PureComponent);AH=Cd;Ml(Cd,"displayName","Area");Ml(Cd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!jd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ml(Cd,"getBaseValue",function(t,e,n,a){var i=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(Nt(l)&&typeof l=="number")return l;var c=i==="horizontal"?a:n,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),p=Math.min(d[0],d[1]);return l==="dataMin"?p:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Ml(Cd,"getComposedData",function(t){var e=t.props,n=t.item,a=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=e.layout,b=d&&d.length,j=AH.getBaseValue(e,n,a,i),S=x==="horizontal",_=!1,T=p.map(function(E,k){var P;b?P=d[f+k]:(P=ha(E,c),Array.isArray(P)?_=!0:P=[j,P]);var I=P[1]==null||b&&ha(E,c)==null;return S?{x:aN({axis:a,ticks:s,bandSize:l,entry:E,index:k}),y:I?null:i.scale(P[1]),value:P,payload:E}:{x:I?null:a.scale(P[1]),y:aN({axis:i,ticks:o,bandSize:l,entry:E,index:k}),value:P,payload:E}}),C;return b||_?C=T.map(function(E){var k=Array.isArray(E.value)?E.value[0]:null;return S?{x:E.x,y:k!=null&&E.y!=null?i.scale(k):null}:{x:k!=null?a.scale(k):null,y:E.y}}):C=S?i.scale(j):a.scale(j),Gu({points:T,baseLine:C,layout:x,isRange:_},g)});Ml(Cd,"renderDotItem",function(t,e){var n;if(Ce.isValidElement(t))n=Ce.cloneElement(t,e);else if(an(t))n=t(e);else{var a=fn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=EH(e,yEe);n=Ce.createElement(Wb,nf({},s,{key:i,className:a}))}return n});function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function CEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,IH(a.key),a)}}function kEe(t,e,n){return e&&TEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function AEe(t,e,n){return e=AN(e),EEe(t,OH()?Reflect.construct(e,n||[],AN(t).constructor):e.apply(t,n))}function EEe(t,e){if(e&&(Pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PEe(t)}function PEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OH=function(){return!!t})()}function AN(t){return AN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AN(t)}function DEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mD(t,e)}function mD(t,e){return mD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},mD(t,e)}function MH(t,e,n){return e=IH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IH(t){var e=OEe(t,"string");return Pg(e)=="symbol"?e:e+""}function OEe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function gD(){return gD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},gD.apply(this,arguments)}function MEe(t){var e=t.xAxisId,n=CM(),a=TM(),i=mH(e);return i==null?null:v.createElement(Qg,gD({},i,{className:fn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return kc(o,!0)}}))}var qc=function(t){function e(){return CEe(this,e),AEe(this,e,arguments)}return DEe(e,t),kEe(e,[{key:"render",value:function(){return v.createElement(MEe,this.props)}}])}(v.Component);MH(qc,"displayName","XAxis");MH(qc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function IEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function REe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,FH(a.key),a)}}function LEe(t,e,n){return e&&REe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FEe(t,e,n){return e=EN(e),$Ee(t,RH()?Reflect.construct(e,n||[],EN(t).constructor):e.apply(t,n))}function $Ee(t,e){if(e&&(Dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BEe(t)}function BEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RH=function(){return!!t})()}function EN(t){return EN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},EN(t)}function zEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yD(t,e)}function yD(t,e){return yD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},yD(t,e)}function LH(t,e,n){return e=FH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FH(t){var e=qEe(t,"string");return Dg(e)=="symbol"?e:e+""}function qEe(t,e){if(Dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xD(){return xD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},xD.apply(this,arguments)}var UEe=function(e){var n=e.yAxisId,a=CM(),i=TM(),s=gH(n);return s==null?null:v.createElement(Qg,xD({},s,{className:fn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:i},ticksGenerator:function(l){return kc(l,!0)}}))},Uc=function(t){function e(){return IEe(this,e),FEe(this,e,arguments)}return zEe(e,t),LEe(e,[{key:"render",value:function(){return v.createElement(UEe,this.props)}}])}(v.Component);LH(Uc,"displayName","YAxis");LH(Uc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function aB(t){return WEe(t)||GEe(t)||HEe(t)||VEe()}function VEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HEe(t,e){if(t){if(typeof t=="string")return vD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vD(t,e)}}function GEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WEe(t){if(Array.isArray(t))return vD(t)}function vD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var bD=function(e,n,a,i,s){var o=Ls(e,AM),l=Ls(e,FS),c=[].concat(aB(o),aB(l)),d=Ls(e,BS),f="".concat(i,"Id"),p=i[0],g=n;if(c.length&&(g=c.reduce(function(j,S){if(S.props[f]===a&&Fl(S.props,"extendDomain")&&Nt(S.props[p])){var _=S.props[p];return[Math.min(j[0],_),Math.max(j[1],_)]}return j},g)),d.length){var x="".concat(p,"1"),b="".concat(p,"2");g=d.reduce(function(j,S){if(S.props[f]===a&&Fl(S.props,"extendDomain")&&Nt(S.props[x])&&Nt(S.props[b])){var _=S.props[x],T=S.props[b];return[Math.min(j[0],_,T),Math.max(j[1],_,T)]}return j},g)}return s&&s.length&&(g=s.reduce(function(j,S){return Nt(S)?[Math.min(j[0],S),Math.max(j[1],S)]:j},g)),g},MA={exports:{}},iB;function KEe(){return iB||(iB=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,x,b){var j=n?n+d:d;if(!this._events[j])return!1;var S=this._events[j],_=arguments.length,T,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,g),!0;case 5:return S.fn.call(S.context,f,p,g,x),!0;case 6:return S.fn.call(S.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];S.fn.apply(S.context,T)}else{var E=S.length,k;for(C=0;C<E;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];S[C].fn.apply(S[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,S=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(MA)),MA.exports}var YEe=KEe();const QEe=Hn(YEe);var IA=new QEe,RA="recharts.syncMouseEvents";function xb(t){"@babel/helpers - typeof";return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xb(t)}function XEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,$H(a.key),a)}}function ZEe(t,e,n){return e&&JEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LA(t,e,n){return e=$H(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $H(t){var e=ePe(t,"string");return xb(e)=="symbol"?e:e+""}function ePe(t,e){if(xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(xb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var tPe=function(){function t(){XEe(this,t),LA(this,"activeIndex",0),LA(this,"coordinateList",[]),LA(this,"layout","horizontal")}return ZEe(t,[{key:"setDetails",value:function(n){var a,i=n.coordinateList,s=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,f=n.offset,p=f===void 0?null:f,g=n.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(a=s??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,p=s+c+d,g=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:g})}}}])}();function nPe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var a=t==null?void 0:t[0],i=t==null?void 0:t[1];if(a&&i&&Nt(a)&&Nt(i))return!0}return!1}function rPe(t,e,n,a){var i=a/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?a:n.width-1,height:t==="horizontal"?n.height-1:a}}function BH(t){var e=t.cx,n=t.cy,a=t.radius,i=t.startAngle,s=t.endAngle,o=Lr(e,n,a,i),l=Lr(e,n,a,s);return{points:[o,l],cx:e,cy:n,radius:a,startAngle:i,endAngle:s}}function aPe(t,e,n){var a,i,s,o;if(t==="horizontal")a=e.x,s=a,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,a=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,f=e.outerRadius,p=e.angle,g=Lr(l,c,d,p),x=Lr(l,c,f,p);a=g.x,i=g.y,s=x.x,o=x.y}else return BH(e);return[{x:a,y:i},{x:s,y:o}]}function vb(t){"@babel/helpers - typeof";return vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vb(t)}function sB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function zj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sB(Object(n),!0).forEach(function(a){iPe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function iPe(t,e,n){return e=sPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sPe(t){var e=oPe(t,"string");return vb(e)=="symbol"?e:e+""}function oPe(t,e){if(vb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(vb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lPe(t){var e,n,a=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,f=t.tooltipAxisBandSize,p=t.layout,g=t.chartName,x=(e=a.props.cursor)!==null&&e!==void 0?e:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!x||!s||!o||g!=="ScatterChart"&&i!=="axis")return null;var b,j=mf;if(g==="ScatterChart")b=o,j=v2e;else if(g==="BarChart")b=rPe(p,o,c,f),j=jM;else if(p==="radial"){var S=BH(o),_=S.cx,T=S.cy,C=S.radius,E=S.startAngle,k=S.endAngle;b={cx:_,cy:T,startAngle:E,endAngle:k,innerRadius:C,outerRadius:C},j=FV}else b={points:aPe(p,o,c)},j=mf;var P=zj(zj(zj(zj({stroke:"#ccc",pointerEvents:"none"},c),b),zt(x,!1)),{},{payload:l,payloadIndex:d,className:fn("recharts-tooltip-cursor",x.className)});return v.isValidElement(x)?v.cloneElement(x,P):v.createElement(j,P)}var cPe=["item"],uPe=["children","className","width","height","style","compact","title","desc"];function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Im.apply(this,arguments)}function oB(t,e){return fPe(t)||hPe(t,e)||qH(t,e)||dPe()}function dPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function fPe(t){if(Array.isArray(t))return t}function lB(t,e){if(t==null)return{};var n=pPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function pPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function mPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gPe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,UH(a.key),a)}}function yPe(t,e,n){return e&&gPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xPe(t,e,n){return e=PN(e),vPe(t,zH()?Reflect.construct(e,n||[],PN(t).constructor):e.apply(t,n))}function vPe(t,e){if(e&&(Og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bPe(t)}function bPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zH=function(){return!!t})()}function PN(t){return PN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},PN(t)}function jPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jD(t,e)}function jD(t,e){return jD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},jD(t,e)}function Mg(t){return SPe(t)||NPe(t)||qH(t)||wPe()}function wPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qH(t,e){if(t){if(typeof t=="string")return wD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wD(t,e)}}function NPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SPe(t){if(Array.isArray(t))return wD(t)}function wD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function cB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(n),!0).forEach(function(a){nn(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nn(t,e,n){return e=UH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UH(t){var e=_Pe(t,"string");return Og(e)=="symbol"?e:e+""}function _Pe(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Og(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CPe={xAxis:["bottom","top"],yAxis:["left","right"]},TPe={width:"100%",height:"100%"},VH={x:0,y:0};function qj(t){return t}var kPe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},APe=function(e,n,a,i){var s=n.find(function(f){return f&&f.index===a});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return lt(lt(lt({},i),Lr(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,d=i.angle;return lt(lt(lt({},i),Lr(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return VH},zS=function(e,n){var a=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Mg(l),Mg(d)):l},[]);return o.length>0?o:e&&e.length&&Nt(i)&&Nt(s)?e.slice(i,s+1):[]};function HH(t){return t==="number"?[0,"auto"]:void 0}var ND=function(e,n,a,i){var s=e.graphicalItems,o=e.tooltipAxis,l=zS(n,e);return a<0||!s||!s.length||a>=l.length?null:s.reduce(function(c,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=a&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var g;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;g=Ow(x,o.dataKey,i)}else g=p&&p[a]||l[a];return g?[].concat(Mg(c),[DV(d,g)]):c},[])},uB=function(e,n,a,i){var s=i||{x:e.chartX,y:e.chartY},o=kPe(s,a),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,f=VNe(o,l,d,c);if(f>=0&&d){var p=d[f]&&d[f].value,g=ND(e,n,f,p),x=APe(a,l,f,s);return{activeTooltipIndex:f,activeLabel:p,activePayload:g,activeCoordinate:x}}return null},EPe=function(e,n){var a=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=e.stackOffset,x=CV(f,s);return a.reduce(function(b,j){var S,_=j.type.defaultProps!==void 0?lt(lt({},j.type.defaultProps),j.props):j.props,T=_.type,C=_.dataKey,E=_.allowDataOverflow,k=_.allowDuplicatedCategory,P=_.scale,I=_.ticks,R=_.includeHidden,z=_[o];if(b[z])return b;var q=zS(e.data,{graphicalItems:i.filter(function(xe){var Y,Re=o in xe.props?xe.props[o]:(Y=xe.type.defaultProps)===null||Y===void 0?void 0:Y[o];return Re===z}),dataStartIndex:c,dataEndIndex:d}),F=q.length,V,H,K;nPe(_.domain,E,T)&&(V=RP(_.domain,null,E),x&&(T==="number"||P!=="auto")&&(K=Sv(q,C,"category")));var W=HH(T);if(!V||V.length===0){var B,G=(B=_.domain)!==null&&B!==void 0?B:W;if(C){if(V=Sv(q,C,T),T==="category"&&x){var ee=qye(V);k&&ee?(H=V,V=yN(0,F)):k||(V=l8(G,V,j).reduce(function(xe,Y){return xe.indexOf(Y)>=0?xe:[].concat(Mg(xe),[Y])},[]))}else if(T==="category")k?V=V.filter(function(xe){return xe!==""&&!dn(xe)}):V=l8(G,V,j).reduce(function(xe,Y){return xe.indexOf(Y)>=0||Y===""||dn(Y)?xe:[].concat(Mg(xe),[Y])},[]);else if(T==="number"){var X=YNe(q,i.filter(function(xe){var Y,Re,$e=o in xe.props?xe.props[o]:(Y=xe.type.defaultProps)===null||Y===void 0?void 0:Y[o],ze="hide"in xe.props?xe.props.hide:(Re=xe.type.defaultProps)===null||Re===void 0?void 0:Re.hide;return $e===z&&(R||!ze)}),C,s,f);X&&(V=X)}x&&(T==="number"||P!=="auto")&&(K=Sv(q,C,"category"))}else x?V=yN(0,F):l&&l[z]&&l[z].hasStack&&T==="number"?V=g==="expand"?[0,1]:PV(l[z].stackGroups,c,d):V=_V(q,i.filter(function(xe){var Y=o in xe.props?xe.props[o]:xe.type.defaultProps[o],Re="hide"in xe.props?xe.props.hide:xe.type.defaultProps.hide;return Y===z&&(R||!Re)}),T,f,!0);if(T==="number")V=bD(p,V,z,s,I),G&&(V=RP(G,V,E));else if(T==="category"&&G){var $=G,ce=V.every(function(xe){return $.indexOf(xe)>=0});ce&&(V=$)}}return lt(lt({},b),{},nn({},z,lt(lt({},_),{},{axisType:s,domain:V,categoricalDomain:K,duplicateDomain:H,originalDomain:(S=_.domain)!==null&&S!==void 0?S:W,isCategorical:x,layout:f})))},{})},PPe=function(e,n){var a=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=zS(e.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),x=g.length,b=CV(f,s),j=-1;return a.reduce(function(S,_){var T=_.type.defaultProps!==void 0?lt(lt({},_.type.defaultProps),_.props):_.props,C=T[o],E=HH("number");if(!S[C]){j++;var k;return b?k=yN(0,x):l&&l[C]&&l[C].hasStack?(k=PV(l[C].stackGroups,c,d),k=bD(p,k,C,s)):(k=RP(E,_V(g,a.filter(function(P){var I,R,z=o in P.props?P.props[o]:(I=P.type.defaultProps)===null||I===void 0?void 0:I[o],q="hide"in P.props?P.props.hide:(R=P.type.defaultProps)===null||R===void 0?void 0:R.hide;return z===C&&!q}),"number",f),i.defaultProps.allowDataOverflow),k=bD(p,k,C,s)),lt(lt({},S),{},nn({},C,lt(lt({axisType:s},i.defaultProps),{},{hide:!0,orientation:Rs(CPe,"".concat(s,".").concat(j%2),null),domain:k,originalDomain:E,isCategorical:b,layout:f})))}return S},{})},DPe=function(e,n){var a=n.axisType,i=a===void 0?"xAxis":a,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.children,p="".concat(i,"Id"),g=Ls(f,s),x={};return g&&g.length?x=EPe(e,{axes:g,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(x=PPe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),x},OPe=function(e){var n=Ku(e),a=kc(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:KO(a,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:iN(n,a)}},dB=function(e){var n=e.children,a=e.defaultShowTooltip,i=ks(n,Ng),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},MPe=function(e){return!e||!e.length?!1:e.some(function(n){var a=Pc(n&&n.type);return a&&a.indexOf("Bar")>=0})},hB=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},IPe=function(e,n){var a=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,d=a.width,f=a.height,p=a.children,g=a.margin||{},x=ks(p,Ng),b=ks(p,Dc),j=Object.keys(c).reduce(function(k,P){var I=c[P],R=I.orientation;return!I.mirror&&!I.hide?lt(lt({},k),{},nn({},R,k[R]+I.width)):k},{left:g.left||0,right:g.right||0}),S=Object.keys(o).reduce(function(k,P){var I=o[P],R=I.orientation;return!I.mirror&&!I.hide?lt(lt({},k),{},nn({},R,Rs(k,"".concat(R))+I.height)):k},{top:g.top||0,bottom:g.bottom||0}),_=lt(lt({},S),j),T=_.bottom;x&&(_.bottom+=x.props.height||Ng.defaultProps.height),b&&n&&(_=WNe(_,i,a,n));var C=d-_.left-_.right,E=f-_.top-_.bottom;return lt(lt({brushBottom:T},_),{},{width:Math.max(C,0),height:Math.max(E,0)})},RPe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},qS=function(e){var n=e.chartName,a=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,f=e.formatAxisMap,p=e.defaultProps,g=function(_,T){var C=T.graphicalItems,E=T.stackGroups,k=T.offset,P=T.updateId,I=T.dataStartIndex,R=T.dataEndIndex,z=_.barSize,q=_.layout,F=_.barGap,V=_.barCategoryGap,H=_.maxBarSize,K=hB(q),W=K.numericAxisName,B=K.cateAxisName,G=MPe(C),ee=[];return C.forEach(function(X,$){var ce=zS(_.data,{graphicalItems:[X],dataStartIndex:I,dataEndIndex:R}),xe=X.type.defaultProps!==void 0?lt(lt({},X.type.defaultProps),X.props):X.props,Y=xe.dataKey,Re=xe.maxBarSize,$e=xe["".concat(W,"Id")],ze=xe["".concat(B,"Id")],Le={},oe=c.reduce(function(ae,ne){var ie=T["".concat(ne.axisType,"Map")],je=xe["".concat(ne.axisType,"Id")];ie&&ie[je]||ne.axisType==="zAxis"||Pf();var Ee=ie[je];return lt(lt({},ae),{},nn(nn({},ne.axisType,Ee),"".concat(ne.axisType,"Ticks"),kc(Ee)))},Le),Se=oe[B],Ve=oe["".concat(B,"Ticks")],Ae=E&&E[$e]&&E[$e].hasStack&&aSe(X,E[$e].stackGroups),ue=Pc(X.type).indexOf("Bar")>=0,Te=iN(Se,Ve),se=[],be=G&&HNe({barSize:z,stackGroups:E,totalSize:RPe(oe,B)});if(ue){var _e,Ne,Z=dn(Re)?H:Re,ge=(_e=(Ne=iN(Se,Ve,!0))!==null&&Ne!==void 0?Ne:Z)!==null&&_e!==void 0?_e:0;se=GNe({barGap:F,barCategoryGap:V,bandSize:ge!==Te?ge:Te,sizeList:be[ze],maxBarSize:Z}),ge!==Te&&(se=se.map(function(ae){return lt(lt({},ae),{},{position:lt(lt({},ae.position),{},{offset:ae.position.offset-ge/2})})}))}var de=X&&X.type&&X.type.getComposedData;de&&ee.push({props:lt(lt({},de(lt(lt({},oe),{},{displayedData:ce,props:_,dataKey:Y,item:X,bandSize:Te,barPosition:se,offset:k,stackedData:Ae,layout:q,dataStartIndex:I,dataEndIndex:R}))),{},nn(nn(nn({key:X.key||"item-".concat($)},W,oe[W]),B,oe[B]),"animationId",P)),childIndex:exe(X,_.children),item:X})}),ee},x=function(_,T){var C=_.props,E=_.dataStartIndex,k=_.dataEndIndex,P=_.updateId;if(!k5({props:C}))return null;var I=C.children,R=C.layout,z=C.stackOffset,q=C.data,F=C.reverseStackOrder,V=hB(R),H=V.numericAxisName,K=V.cateAxisName,W=Ls(I,a),B=nSe(q,W,"".concat(H,"Id"),"".concat(K,"Id"),z,F),G=c.reduce(function(xe,Y){var Re="".concat(Y.axisType,"Map");return lt(lt({},xe),{},nn({},Re,DPe(C,lt(lt({},Y),{},{graphicalItems:W,stackGroups:Y.axisType===H&&B,dataStartIndex:E,dataEndIndex:k}))))},{}),ee=IPe(lt(lt({},G),{},{props:C,graphicalItems:W}),T==null?void 0:T.legendBBox);Object.keys(G).forEach(function(xe){G[xe]=f(C,G[xe],ee,xe.replace("Map",""),n)});var X=G["".concat(K,"Map")],$=OPe(X),ce=g(C,lt(lt({},G),{},{dataStartIndex:E,dataEndIndex:k,updateId:P,graphicalItems:W,stackGroups:B,offset:ee}));return lt(lt({formattedGraphicalItems:ce,graphicalItems:W,offset:ee,stackGroups:B},$),G)},b=function(S){function _(T){var C,E,k;return mPe(this,_),k=xPe(this,_,[T]),nn(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),nn(k,"accessibilityManager",new tPe),nn(k,"handleLegendBBoxUpdate",function(P){if(P){var I=k.state,R=I.dataStartIndex,z=I.dataEndIndex,q=I.updateId;k.setState(lt({legendBBox:P},x({props:k.props,dataStartIndex:R,dataEndIndex:z,updateId:q},lt(lt({},k.state),{},{legendBBox:P}))))}}),nn(k,"handleReceiveSyncEvent",function(P,I,R){if(k.props.syncId===P){if(R===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(I)}}),nn(k,"handleBrushChange",function(P){var I=P.startIndex,R=P.endIndex;if(I!==k.state.dataStartIndex||R!==k.state.dataEndIndex){var z=k.state.updateId;k.setState(function(){return lt({dataStartIndex:I,dataEndIndex:R},x({props:k.props,dataStartIndex:I,dataEndIndex:R,updateId:z},k.state))}),k.triggerSyncEvent({dataStartIndex:I,dataEndIndex:R})}}),nn(k,"handleMouseEnter",function(P){var I=k.getMouseInfo(P);if(I){var R=lt(lt({},I),{},{isTooltipActive:!0});k.setState(R),k.triggerSyncEvent(R);var z=k.props.onMouseEnter;an(z)&&z(R,P)}}),nn(k,"triggeredAfterMouseMove",function(P){var I=k.getMouseInfo(P),R=I?lt(lt({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(R),k.triggerSyncEvent(R);var z=k.props.onMouseMove;an(z)&&z(R,P)}),nn(k,"handleItemMouseEnter",function(P){k.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),nn(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),nn(k,"handleMouseMove",function(P){P.persist(),k.throttleTriggeredAfterMouseMove(P)}),nn(k,"handleMouseLeave",function(P){k.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};k.setState(I),k.triggerSyncEvent(I);var R=k.props.onMouseLeave;an(R)&&R(I,P)}),nn(k,"handleOuterEvent",function(P){var I=Zye(P),R=Rs(k.props,"".concat(I));if(I&&an(R)){var z,q;/.*touch.*/i.test(I)?q=k.getMouseInfo(P.changedTouches[0]):q=k.getMouseInfo(P),R((z=q)!==null&&z!==void 0?z:{},P)}}),nn(k,"handleClick",function(P){var I=k.getMouseInfo(P);if(I){var R=lt(lt({},I),{},{isTooltipActive:!0});k.setState(R),k.triggerSyncEvent(R);var z=k.props.onClick;an(z)&&z(R,P)}}),nn(k,"handleMouseDown",function(P){var I=k.props.onMouseDown;if(an(I)){var R=k.getMouseInfo(P);I(R,P)}}),nn(k,"handleMouseUp",function(P){var I=k.props.onMouseUp;if(an(I)){var R=k.getMouseInfo(P);I(R,P)}}),nn(k,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),nn(k,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&k.handleMouseDown(P.changedTouches[0])}),nn(k,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&k.handleMouseUp(P.changedTouches[0])}),nn(k,"handleDoubleClick",function(P){var I=k.props.onDoubleClick;if(an(I)){var R=k.getMouseInfo(P);I(R,P)}}),nn(k,"handleContextMenu",function(P){var I=k.props.onContextMenu;if(an(I)){var R=k.getMouseInfo(P);I(R,P)}}),nn(k,"triggerSyncEvent",function(P){k.props.syncId!==void 0&&IA.emit(RA,k.props.syncId,P,k.eventEmitterSymbol)}),nn(k,"applySyncEvent",function(P){var I=k.props,R=I.layout,z=I.syncMethod,q=k.state.updateId,F=P.dataStartIndex,V=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)k.setState(lt({dataStartIndex:F,dataEndIndex:V},x({props:k.props,dataStartIndex:F,dataEndIndex:V,updateId:q},k.state)));else if(P.activeTooltipIndex!==void 0){var H=P.chartX,K=P.chartY,W=P.activeTooltipIndex,B=k.state,G=B.offset,ee=B.tooltipTicks;if(!G)return;if(typeof z=="function")W=z(ee,P);else if(z==="value"){W=-1;for(var X=0;X<ee.length;X++)if(ee[X].value===P.activeLabel){W=X;break}}var $=lt(lt({},G),{},{x:G.left,y:G.top}),ce=Math.min(H,$.x+$.width),xe=Math.min(K,$.y+$.height),Y=ee[W]&&ee[W].value,Re=ND(k.state,k.props.data,W),$e=ee[W]?{x:R==="horizontal"?ee[W].coordinate:ce,y:R==="horizontal"?xe:ee[W].coordinate}:VH;k.setState(lt(lt({},P),{},{activeLabel:Y,activeCoordinate:$e,activePayload:Re,activeTooltipIndex:W}))}else k.setState(P)}),nn(k,"renderCursor",function(P){var I,R=k.state,z=R.isTooltipActive,q=R.activeCoordinate,F=R.activePayload,V=R.offset,H=R.activeTooltipIndex,K=R.tooltipAxisBandSize,W=k.getTooltipEventType(),B=(I=P.props.active)!==null&&I!==void 0?I:z,G=k.props.layout,ee=P.key||"_recharts-cursor";return Ce.createElement(lPe,{key:ee,activeCoordinate:q,activePayload:F,activeTooltipIndex:H,chartName:n,element:P,isActive:B,layout:G,offset:V,tooltipAxisBandSize:K,tooltipEventType:W})}),nn(k,"renderPolarAxis",function(P,I,R){var z=Rs(P,"type.axisType"),q=Rs(k.state,"".concat(z,"Map")),F=P.type.defaultProps,V=F!==void 0?lt(lt({},F),P.props):P.props,H=q&&q[V["".concat(z,"Id")]];return v.cloneElement(P,lt(lt({},H),{},{className:fn(z,H.className),key:P.key||"".concat(I,"-").concat(R),ticks:kc(H,!0)}))}),nn(k,"renderPolarGrid",function(P){var I=P.props,R=I.radialLines,z=I.polarAngles,q=I.polarRadius,F=k.state,V=F.radiusAxisMap,H=F.angleAxisMap,K=Ku(V),W=Ku(H),B=W.cx,G=W.cy,ee=W.innerRadius,X=W.outerRadius;return v.cloneElement(P,{polarAngles:Array.isArray(z)?z:kc(W,!0).map(function($){return $.coordinate}),polarRadius:Array.isArray(q)?q:kc(K,!0).map(function($){return $.coordinate}),cx:B,cy:G,innerRadius:ee,outerRadius:X,key:P.key||"polar-grid",radialLines:R})}),nn(k,"renderLegend",function(){var P=k.state.formattedGraphicalItems,I=k.props,R=I.children,z=I.width,q=I.height,F=k.props.margin||{},V=z-(F.left||0)-(F.right||0),H=NV({children:R,formattedGraphicalItems:P,legendWidth:V,legendContent:d});if(!H)return null;var K=H.item,W=lB(H,cPe);return v.cloneElement(K,lt(lt({},W),{},{chartWidth:z,chartHeight:q,margin:F,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),nn(k,"renderTooltip",function(){var P,I=k.props,R=I.children,z=I.accessibilityLayer,q=ks(R,Ii);if(!q)return null;var F=k.state,V=F.isTooltipActive,H=F.activeCoordinate,K=F.activePayload,W=F.activeLabel,B=F.offset,G=(P=q.props.active)!==null&&P!==void 0?P:V;return v.cloneElement(q,{viewBox:lt(lt({},B),{},{x:B.left,y:B.top}),active:G,label:W,payload:G?K:[],coordinate:H,accessibilityLayer:z})}),nn(k,"renderBrush",function(P){var I=k.props,R=I.margin,z=I.data,q=k.state,F=q.offset,V=q.dataStartIndex,H=q.dataEndIndex,K=q.updateId;return v.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Lj(k.handleBrushChange,P.props.onChange),data:z,x:Nt(P.props.x)?P.props.x:F.left,y:Nt(P.props.y)?P.props.y:F.top+F.height+F.brushBottom-(R.bottom||0),width:Nt(P.props.width)?P.props.width:F.width,startIndex:V,endIndex:H,updateId:"brush-".concat(K)})}),nn(k,"renderReferenceElement",function(P,I,R){if(!P)return null;var z=k,q=z.clipPathId,F=k.state,V=F.xAxisMap,H=F.yAxisMap,K=F.offset,W=P.type.defaultProps||{},B=P.props,G=B.xAxisId,ee=G===void 0?W.xAxisId:G,X=B.yAxisId,$=X===void 0?W.yAxisId:X;return v.cloneElement(P,{key:P.key||"".concat(I,"-").concat(R),xAxis:V[ee],yAxis:H[$],viewBox:{x:K.left,y:K.top,width:K.width,height:K.height},clipPathId:q})}),nn(k,"renderActivePoints",function(P){var I=P.item,R=P.activePoint,z=P.basePoint,q=P.childIndex,F=P.isRange,V=[],H=I.props.key,K=I.item.type.defaultProps!==void 0?lt(lt({},I.item.type.defaultProps),I.item.props):I.item.props,W=K.activeDot,B=K.dataKey,G=lt(lt({index:q,dataKey:B,cx:R.x,cy:R.y,r:4,fill:bM(I.item),strokeWidth:2,stroke:"#fff",payload:R.payload,value:R.value},zt(W,!1)),Mw(W));return V.push(_.renderActiveDot(W,G,"".concat(H,"-activePoint-").concat(q))),z?V.push(_.renderActiveDot(W,lt(lt({},G),{},{cx:z.x,cy:z.y}),"".concat(H,"-basePoint-").concat(q))):F&&V.push(null),V}),nn(k,"renderGraphicChild",function(P,I,R){var z=k.filterFormatItem(P,I,R);if(!z)return null;var q=k.getTooltipEventType(),F=k.state,V=F.isTooltipActive,H=F.tooltipAxis,K=F.activeTooltipIndex,W=F.activeLabel,B=k.props.children,G=ks(B,Ii),ee=z.props,X=ee.points,$=ee.isRange,ce=ee.baseLine,xe=z.item.type.defaultProps!==void 0?lt(lt({},z.item.type.defaultProps),z.item.props):z.item.props,Y=xe.activeDot,Re=xe.hide,$e=xe.activeBar,ze=xe.activeShape,Le=!!(!Re&&V&&G&&(Y||$e||ze)),oe={};q!=="axis"&&G&&G.props.trigger==="click"?oe={onClick:Lj(k.handleItemMouseEnter,P.props.onClick)}:q!=="axis"&&(oe={onMouseLeave:Lj(k.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Lj(k.handleItemMouseEnter,P.props.onMouseEnter)});var Se=v.cloneElement(P,lt(lt({},z.props),oe));function Ve(ne){return typeof H.dataKey=="function"?H.dataKey(ne.payload):null}if(Le)if(K>=0){var Ae,ue;if(H.dataKey&&!H.allowDuplicatedCategory){var Te=typeof H.dataKey=="function"?Ve:"payload.".concat(H.dataKey.toString());Ae=Ow(X,Te,W),ue=$&&ce&&Ow(ce,Te,W)}else Ae=X==null?void 0:X[K],ue=$&&ce&&ce[K];if(ze||$e){var se=P.props.activeIndex!==void 0?P.props.activeIndex:K;return[v.cloneElement(P,lt(lt(lt({},z.props),oe),{},{activeIndex:se})),null,null]}if(!dn(Ae))return[Se].concat(Mg(k.renderActivePoints({item:z,activePoint:Ae,basePoint:ue,childIndex:K,isRange:$})))}else{var be,_e=(be=k.getItemByXY(k.state.activeCoordinate))!==null&&be!==void 0?be:{graphicalItem:Se},Ne=_e.graphicalItem,Z=Ne.item,ge=Z===void 0?P:Z,de=Ne.childIndex,ae=lt(lt(lt({},z.props),oe),{},{activeIndex:de});return[v.cloneElement(ge,ae),null,null]}return $?[Se,null,null]:[Se,null]}),nn(k,"renderCustomized",function(P,I,R){return v.cloneElement(P,lt(lt({key:"recharts-customized-".concat(R)},k.props),k.state))}),nn(k,"renderMap",{CartesianGrid:{handler:qj,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:qj},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:qj},YAxis:{handler:qj},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((C=T.id)!==null&&C!==void 0?C:Rf("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=w7(k.triggeredAfterMouseMove,(E=T.throttleDelay)!==null&&E!==void 0?E:1e3/60),k.state={},k}return jPe(_,S),yPe(_,[{key:"componentDidMount",value:function(){var C,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,E=C.children,k=C.data,P=C.height,I=C.layout,R=ks(E,Ii);if(R){var z=R.props.defaultIndex;if(!(typeof z!="number"||z<0||z>this.state.tooltipTicks.length-1)){var q=this.state.tooltipTicks[z]&&this.state.tooltipTicks[z].value,F=ND(this.state,k,z,q),V=this.state.tooltipTicks[z].coordinate,H=(this.state.offset.top+P)/2,K=I==="horizontal",W=K?{x:V,y:H}:{y:V,x:H},B=this.state.formattedGraphicalItems.find(function(ee){var X=ee.item;return X.type.name==="Scatter"});B&&(W=lt(lt({},W),B.props.points[z].tooltipPosition),F=B.props.points[z].tooltipPayload);var G={activeTooltipIndex:z,isTooltipActive:!0,activeLabel:q,activePayload:F,activeCoordinate:W};this.setState(G),this.renderCursor(R),this.accessibilityManager.setIndex(z)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var k,P;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(C){aP([ks(C.children,Ii)],[ks(this.props.children,Ii)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=ks(this.props.children,Ii);if(C&&typeof C.props.shared=="boolean"){var E=C.props.shared?"axis":"item";return l.indexOf(E)>=0?E:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var E=this.container,k=E.getBoundingClientRect(),P=R0e(k),I={chartX:Math.round(C.pageX-P.left),chartY:Math.round(C.pageY-P.top)},R=k.width/E.offsetWidth||1,z=this.inRange(I.chartX,I.chartY,R);if(!z)return null;var q=this.state,F=q.xAxisMap,V=q.yAxisMap,H=this.getTooltipEventType(),K=uB(this.state,this.props.data,this.props.layout,z);if(H!=="axis"&&F&&V){var W=Ku(F).scale,B=Ku(V).scale,G=W&&W.invert?W.invert(I.chartX):null,ee=B&&B.invert?B.invert(I.chartY):null;return lt(lt({},I),{},{xValue:G,yValue:ee},K)}return K?lt(lt({},I),K):null}},{key:"inRange",value:function(C,E){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,I=C/k,R=E/k;if(P==="horizontal"||P==="vertical"){var z=this.state.offset,q=I>=z.left&&I<=z.left+z.width&&R>=z.top&&R<=z.top+z.height;return q?{x:I,y:R}:null}var F=this.state,V=F.angleAxisMap,H=F.radiusAxisMap;if(V&&H){var K=Ku(V);return d8({x:I,y:R},K)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,E=this.getTooltipEventType(),k=ks(C,Ii),P={};k&&E==="axis"&&(k.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Mw(this.props,this.handleOuterEvent);return lt(lt({},I),P)}},{key:"addListener",value:function(){IA.on(RA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){IA.removeListener(RA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,E,k){for(var P=this.state.formattedGraphicalItems,I=0,R=P.length;I<R;I++){var z=P[I];if(z.item===C||z.props.key===C.key||E===Pc(z.item.type)&&k===z.childIndex)return z}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,E=this.state.offset,k=E.left,P=E.top,I=E.height,R=E.width;return Ce.createElement("defs",null,Ce.createElement("clipPath",{id:C},Ce.createElement("rect",{x:k,y:P,height:I,width:R})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(E,k){var P=oB(k,2),I=P[0],R=P[1];return lt(lt({},E),{},nn({},I,R.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(E,k){var P=oB(k,2),I=P[0],R=P[1];return lt(lt({},E),{},nn({},I,R.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[C])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(C){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[C])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(C){var E=this.state,k=E.formattedGraphicalItems,P=E.activeItem;if(k&&k.length)for(var I=0,R=k.length;I<R;I++){var z=k[I],q=z.props,F=z.item,V=F.type.defaultProps!==void 0?lt(lt({},F.type.defaultProps),F.props):F.props,H=Pc(F.type);if(H==="Bar"){var K=(q.data||[]).find(function(ee){return ZCe(C,ee)});if(K)return{graphicalItem:z,payload:K}}else if(H==="RadialBar"){var W=(q.data||[]).find(function(ee){return d8(C,ee)});if(W)return{graphicalItem:z,payload:W}}else if(MS(z,P)||IS(z,P)||hb(z,P)){var B=NTe({graphicalItem:z,activeTooltipItem:P,itemData:V.data}),G=V.activeIndex===void 0?B:V.activeIndex;return{graphicalItem:lt(lt({},z),{},{childIndex:G}),payload:hb(z,P)?V.data[B]:z.props.data[B]}}}return null}},{key:"render",value:function(){var C=this;if(!k5(this))return null;var E=this.props,k=E.children,P=E.className,I=E.width,R=E.height,z=E.style,q=E.compact,F=E.title,V=E.desc,H=lB(E,uPe),K=zt(H,!1);if(q)return Ce.createElement(B$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement(sP,Im({},K,{width:I,height:R,title:F,desc:V}),this.renderClipPath(),E5(k,this.renderMap)));if(this.props.accessibilityLayer){var W,B;K.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,K.role=(B=this.props.role)!==null&&B!==void 0?B:"application",K.onKeyDown=function(ee){C.accessibilityManager.keyboardEvent(ee)},K.onFocus=function(){C.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return Ce.createElement(B$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement("div",Im({className:fn("recharts-wrapper",P),style:lt({position:"relative",cursor:"default",width:I,height:R},z)},G,{ref:function(X){C.container=X}}),Ce.createElement(sP,Im({},K,{width:I,height:R,title:F,desc:V,style:TPe}),this.renderClipPath(),E5(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);nn(b,"displayName",n),nn(b,"defaultProps",lt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),nn(b,"getDerivedStateFromProps",function(S,_){var T=S.dataKey,C=S.data,E=S.children,k=S.width,P=S.height,I=S.layout,R=S.stackOffset,z=S.margin,q=_.dataStartIndex,F=_.dataEndIndex;if(_.updateId===void 0){var V=dB(S);return lt(lt(lt({},V),{},{updateId:0},x(lt(lt({props:S},V),{},{updateId:0}),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:P,prevLayout:I,prevStackOffset:R,prevMargin:z,prevChildren:E})}if(T!==_.prevDataKey||C!==_.prevData||k!==_.prevWidth||P!==_.prevHeight||I!==_.prevLayout||R!==_.prevStackOffset||!Bm(z,_.prevMargin)){var H=dB(S),K={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},W=lt(lt({},uB(_,C,I)),{},{updateId:_.updateId+1}),B=lt(lt(lt({},H),K),W);return lt(lt(lt({},B),x(lt({props:S},B),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:P,prevLayout:I,prevStackOffset:R,prevMargin:z,prevChildren:E})}if(!aP(E,_.prevChildren)){var G,ee,X,$,ce=ks(E,Ng),xe=ce&&(G=(ee=ce.props)===null||ee===void 0?void 0:ee.startIndex)!==null&&G!==void 0?G:q,Y=ce&&(X=($=ce.props)===null||$===void 0?void 0:$.endIndex)!==null&&X!==void 0?X:F,Re=xe!==q||Y!==F,$e=!dn(C),ze=$e&&!Re?_.updateId:_.updateId+1;return lt(lt({updateId:ze},x(lt(lt({props:S},_),{},{updateId:ze,dataStartIndex:xe,dataEndIndex:Y}),_)),{},{prevChildren:E,dataStartIndex:xe,dataEndIndex:Y})}return null}),nn(b,"renderActiveDot",function(S,_,T){var C;return v.isValidElement(S)?C=v.cloneElement(S,_):an(S)?C=S(_):C=Ce.createElement(Wb,_),Ce.createElement(In,{className:"recharts-active-dot",key:T},C)});var j=v.forwardRef(function(_,T){return Ce.createElement(b,Im({},_,{ref:T}))});return j.displayName=b.displayName,j},LPe=qS({chartName:"LineChart",GraphicalChild:Kb,axisComponents:[{axisType:"xAxis",AxisComp:qc},{axisType:"yAxis",AxisComp:Uc}],formatAxisMap:wM}),GH=qS({chartName:"BarChart",GraphicalChild:_d,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:qc},{axisType:"yAxis",AxisComp:Uc}],formatAxisMap:wM}),WH=qS({chartName:"PieChart",GraphicalChild:Vl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:OS},{axisType:"radiusAxis",AxisComp:PS}],formatAxisMap:pSe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),FPe=qS({chartName:"AreaChart",GraphicalChild:Cd,axisComponents:[{axisType:"xAxis",AxisComp:qc},{axisType:"yAxis",AxisComp:Uc}],formatAxisMap:wM});const DM=({widget:t,className:e="",autoHideEmptyColumns:n=!1})=>{const a=Ft(),i=ds(),[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState([]),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,S]=v.useState(""),[_,T]=v.useState(!1);v.useEffect(()=>{const I=async()=>{var R,z,q,F,V,H;g(!0),b(null);try{const K=t.dataSource,W=((R=t.config)==null?void 0:R.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0;let B=[];if(W&&(K.startsWith("api:")||K.startsWith("table:"))){const G=await le("/api/dashboards/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:K,filters:t.config.filters})});if(G.ok){const ee=await G.json();B=Array.isArray(ee)?ee:ee.data||[],o(B)}else throw new Error("Failed to fetch filtered data")}else{let G="";const ee={"api:patients":{url:"/api/patients?limit=50",dataKey:"patients"},"api:drugs":{url:"/api/drugs?limit=50",dataKey:"drugs"},"api:recurring-medications":{url:"/api/recurring-medications?limit=50"},"api:pharmacy-orders":{url:"/api/pharmacy/orders?limit=50",dataKey:"orders"},"api:lab-orders":{url:"/api/lab/orders?limit=50",dataKey:"orders"},"api:lab-tests":{url:"/api/lab/tests?limit=50",dataKey:"tests"},"api:queue":{url:"/api/queue?limit=50",dataKey:"queue"},"api:bills":{url:"/api/bills?limit=100",dataKey:"bills"}};if(ee[K])G=ee[K].url;else if(K.startsWith("join:"))G=`/api/dashboards/joined-data?join=${K.split(":")[1]}&limit=50`;else if(K.startsWith("dynamic:")){const $=K.split(":"),ce=$[1],xe=$[2],Y=((q=(z=t.config)==null?void 0:z.primaryColumns)==null?void 0:q.join(","))||"",Re=((V=(F=t.config)==null?void 0:F.relatedColumns)==null?void 0:V.join(","))||"";G=`/api/dashboards/dynamic-join?primary=${ce}&related=${xe}&primaryCols=${Y}&relatedCols=${Re}&limit=50`}else K.startsWith("table:")?G=`/api/custom-tables/${K.split(":")[1]}/records?limit=50`:G=`/api/${K.replace("api:","")}?limit=50`;const X=await le(G);if(X.ok){const $=await X.json();Array.isArray($)?B=$:(H=ee[K])!=null&&H.dataKey&&$[ee[K].dataKey]?B=$[ee[K].dataKey]:$.data?B=$.data:B=Object.values($).find(xe=>Array.isArray(xe))||[],o(B)}else throw new Error(`Failed to fetch data from ${K}`)}if(t.type==="table"&&n&&B.length>0){const ee=(t.config.columns||[...new Set(B.flatMap(X=>Object.keys(X)))]).filter(X=>B.some($=>{const ce=$[X];return ce!=null&&ce!==""&&(Array.isArray(ce)?ce.length>0:!0)}));f(ee)}else f(t.config.columns||[])}catch(K){b(K.message)}finally{g(!1)}};t.dataSource&&I()},[t.dataSource,t.config]),v.useEffect(()=>{var F,V;if(!s||!Array.isArray(s)){c(s);return}let I=[...s];const R=t.dataSource,q=((F=t.config)==null?void 0:F.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0&&(R.startsWith("api:")||R.startsWith("table:"));if((V=t.config)!=null&&V.filters&&Array.isArray(t.config.filters)&&!q&&(I=I.filter(H=>t.config.filters.every(K=>{const W=H[K.field],B=K.value;switch(K.operator){case"equals":return W==B;case"neq":return W!=B;case"contains":return String(W).toLowerCase().includes(String(B).toLowerCase());case"gt":return W>B;case"lt":return W<B;case"gte":return W>=B;case"lte":return W<=B;default:return!0}}))),j){const H=j.toLowerCase();I=I.filter(K=>Object.values(K).some(W=>String(W).toLowerCase().includes(H)))}c(I)},[s,t.config,j]);const C=I=>{I&&(i.prefetchQuery({queryKey:Gt.patients.context(I),queryFn:async()=>{const R=await le(`/api/patients/${I}/context`);if(!R.ok)throw new Error("Failed to fetch patient context");return R.json()},staleTime:1e3*60*5}),i.prefetchQuery({queryKey:Gt.patientDebts.balance(I),queryFn:async()=>{const R=await le(`/api/patient-debts/${I}/balance`);if(!R.ok)throw new Error("Failed to fetch patient debt");return R.json()},staleTime:1e3*60}),i.prefetchQuery({queryKey:Gt.queue.latest(I),queryFn:async()=>{const R=await le(`/api/queue/patient/${I}/latest`);if(!R.ok){if(R.status===404)return null;throw new Error("Failed to fetch queue status")}return R.json()},staleTime:1e3*5}))},E=v.useMemo(()=>TO(I=>C(I),500),[]);v.useEffect(()=>()=>{E.cancel()},[E]);const k=()=>{var R,z,q;if(p)return r.jsxs("div",{className:"widget-loading",children:[r.jsx(GX,{className:"spin"})," Loading..."]});if(x)return r.jsxs("div",{className:"widget-error",children:["Error: ",x]});const I=l||[];if(t.type==="stat"){const F=Array.isArray(I)?I.length:0;return r.jsxs("div",{className:"widget-stat",children:[r.jsx("div",{className:"stat-value",children:F}),r.jsx("div",{className:"stat-label",children:((R=t.config)==null?void 0:R.label)||"Total Records"})]})}if(t.type==="chart"){if(!Array.isArray(I)||I.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const{chartType:F="bar",xAxisKey:V="name",dataKey:H="value"}=t.config,K=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return r.jsx("div",{style:{width:"100%",height:350,minHeight:200},children:r.jsx(ow,{width:"100%",height:"100%",children:F==="line"?r.jsxs(LPe,{data:I,children:[r.jsx(yb,{strokeDasharray:"3 3"}),r.jsx(qc,{dataKey:V}),r.jsx(Uc,{}),r.jsx(Ii,{}),r.jsx(Dc,{}),r.jsx(Kb,{type:"monotone",dataKey:H,stroke:"#8884d8",activeDot:{r:8}})]}):F==="pie"?r.jsxs(WH,{children:[r.jsx(Vl,{data:I,cx:"50%",cy:"50%",labelLine:!1,label:({name:W,percent:B})=>`${W} ${(B*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:H,nameKey:V,children:I.map((W,B)=>r.jsx(zb,{fill:K[B%K.length]},`cell-${B}`))}),r.jsx(Ii,{})]}):r.jsxs(GH,{data:I,children:[r.jsx(yb,{strokeDasharray:"3 3"}),r.jsx(qc,{dataKey:V}),r.jsx(Uc,{}),r.jsx(Ii,{}),r.jsx(Dc,{}),r.jsx(_d,{dataKey:H,fill:"#82ca9d"})]})})})}if(t.type==="table"){if(!Array.isArray(I)||I.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const V=(d.length>0?d:((z=t.config)==null?void 0:z.columns)||(I[0]?Object.keys(I[0]).slice(0,5):[])).map(B=>({key:B,label:B.replace(/_/g," ").replace(/\b\w/g,G=>G.toUpperCase()),editable:!1})),H=async B=>{try{const G=t.dataSource;if(G.startsWith("table:")){const ee=G.split(":")[1];for(const X of B)X.id&&await le(`/api/custom-tables/${ee}/records/${X.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:X})})}else alert("Changes saved locally. Built-in table edits require specific API integration.")}catch(G){console.error("Error saving data:",G),alert("Failed to save changes")}};if(I.length<=10){const B=((q=t.config)==null?void 0:q.columns)||Object.keys(I[0]).filter(ee=>!ee.startsWith("_")&&ee!=="id"),G=ee=>{const X=ee.patient_id||ee.patientId;X&&a(`/dashboard/edit-complaint/patient/${X}`)};return r.jsx("div",{className:"widget-detail-cards",children:I.map((ee,X)=>{const $=ee.patient_id||ee.patientId,ce=!!$;return r.jsxs("div",{className:`detail-card ${ce?"clickable":""}`,onClick:ce?()=>G(ee):void 0,onMouseEnter:()=>ce&&E($),style:ce?{cursor:"pointer"}:void 0,children:[r.jsxs("div",{className:"detail-card-header",children:[r.jsx("span",{className:"detail-card-title",children:ee.name||ee.patient_name||ee.title||ee.brand_name||`Record ${X+1}`}),ee.token&&r.jsxs("span",{className:"detail-card-badge",children:["Token #",ee.token]}),ee.status&&r.jsx("span",{className:`detail-card-status status-${ee.status.toLowerCase()}`,children:ee.status})]}),r.jsx("div",{className:"detail-card-fields",children:B.map(xe=>{const Y=ee[xe];if(Y==null||Y===""||xe==="name"||xe==="title")return null;const Re=xe.replace(/_/g," ").replace(/\b\w/g,ze=>ze.toUpperCase()),$e=typeof Y=="object"?JSON.stringify(Y):String(Y);return r.jsxs("div",{className:"detail-field",children:[r.jsx("span",{className:"detail-field-label",children:Re}),r.jsx("span",{className:"detail-field-value",children:$e})]},xe)})})]},ee.id||X)})})}const K=B=>{const G=B.patient_id||B.patientId;G&&a(`/dashboard/edit-complaint/patient/${G}`)},W=B=>{const G=B.patient_id||B.patientId;G&&E(G)};return r.jsxs("div",{className:"widget-table-container",children:[r.jsxs("div",{className:"widget-table-search",children:[r.jsx(En,{size:14}),r.jsx("input",{type:"text",placeholder:"Search...",value:j,onChange:B=>S(B.target.value)})]}),r.jsx($b,{columns:V,data:I,editable:!0,showRowNumbers:!0,title:"",onSave:H,onRowClick:K,onRowHover:W})]})}return r.jsx("div",{children:"Unsupported widget type"})},P=r.jsxs("div",{className:`dashboard-widget ${e}`,children:[r.jsxs("div",{className:"widget-header",children:[r.jsx("h3",{children:t.title}),r.jsx("button",{className:"widget-expand-btn",onClick:()=>T(!0),title:"Expand",children:r.jsx(Yz,{size:14})})]}),r.jsx("div",{className:"widget-content",children:k()})]});return r.jsxs(r.Fragment,{children:[P,_&&r.jsx("div",{className:"widget-modal-overlay",onClick:()=>T(!1),children:r.jsxs("div",{className:"widget-modal-content",onClick:I=>I.stopPropagation(),children:[r.jsxs("div",{className:"widget-modal-header",children:[r.jsx("h2",{children:t.title}),r.jsx("button",{onClick:()=>T(!1),className:"widget-modal-close",children:r.jsx(Lt,{size:20})})]}),r.jsx("div",{className:"widget-modal-body",children:k()})]})})]})},$Pe=({isOpen:t,onClose:e,title:n,widgets:a,onSave:i})=>{const[s,o]=v.useState(!1),[l,c]=v.useState(n),[d,f]=v.useState(""),[p,g]=v.useState(!1);if(!t)return null;const x=async()=>{if(!(!i||!l.trim())){g(!0);try{await i(l,d),o(!1),e()}catch(b){console.error("Failed to save dashboard:",b),alert("Failed to save dashboard")}finally{g(!1)}}};return r.jsx("div",{className:"temp-dash-overlay",onClick:e,children:r.jsxs("div",{className:"temp-dash-modal",onClick:b=>b.stopPropagation(),children:[r.jsxs("div",{className:"temp-dash-header",children:[r.jsxs("div",{className:"temp-dash-title-group",children:[r.jsx("div",{className:"temp-dash-icon",children:r.jsx(ng,{size:16})}),r.jsxs("div",{className:"temp-dash-title-text",children:[r.jsx("h2",{children:n}),r.jsxs("span",{className:"temp-dash-ai-badge",children:[r.jsx(yw,{size:8})," AI Generated"]})]})]}),r.jsxs("div",{className:"temp-dash-actions",children:[i&&!s&&r.jsxs("button",{onClick:()=>o(!0),className:"temp-dash-save-btn",children:[r.jsx(cs,{size:12})," Save"]}),r.jsx("button",{onClick:e,className:"temp-dash-close-btn",children:r.jsx(Lt,{size:16})})]})]}),s&&r.jsxs("div",{className:"temp-dash-save-form",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:l,onChange:b=>c(b.target.value),autoFocus:!0}),r.jsx("input",{type:"text",placeholder:"Description (optional)",value:d,onChange:b=>f(b.target.value)}),r.jsxs("div",{className:"temp-dash-save-actions",children:[r.jsx("button",{onClick:()=>o(!1),className:"temp-dash-cancel-btn",children:"Cancel"}),r.jsx("button",{onClick:x,className:"temp-dash-confirm-btn",disabled:p||!l.trim(),children:p?"Saving...":"Confirm"})]})]}),r.jsx("div",{className:"temp-dash-body",children:a.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets to display."}):r.jsx("div",{className:"temp-dash-grid",children:a.map((b,j)=>r.jsx(DM,{widget:b,isEditing:!1,autoHideEmptyColumns:!0},b.id||`widget-${j}`))})})]})})},fB=()=>FN(()=>import("./EditComplaintPage-VtvaX7c7.js"),__vite__mapDeps([0,1])),BPe=()=>FN(()=>import("./AddPatientPage-D5OlJ-1m.js"),__vite__mapDeps([2,3])),Uj=[{name:"Dashboard",path:"/dashboard",icon:r.jsx(ng,{size:16}),keywords:["home","main","analytics","stats"],roles:["all"]},{name:"Clinic Hub",path:"/dashboard/clinic-hub",icon:r.jsx(_c,{size:16}),keywords:["central","hub","overview"],roles:["admin","superadmin"]},{name:"Analysis Dashboard",path:"/dashboard/analysis",icon:r.jsx(_c,{size:16}),keywords:["reports","stats","finance","money"],roles:["admin","superadmin"]},{name:"Live AI Assistant",path:"/live-api",icon:r.jsx(Pv,{size:16}),keywords:["ai","chat","voice","assistant"],roles:["all"]},{name:"Clinic Subscriptions",path:"/dashboard/clinic-subscriptions",icon:r.jsx(_c,{size:16}),keywords:["plans","billing","tenants"],roles:["superadmin"]},{name:"User Management",path:"/dashboard/users",icon:r.jsx(Os,{size:16}),keywords:["admins","clinics","accounts"],roles:["superadmin"]},{name:"Patient Search",path:"/dashboard/search-patient",icon:r.jsx(En,{size:16}),keywords:["find","lookup","patient"],roles:["all"]},{name:"All Patients",path:"/dashboard/all-patients",icon:r.jsx(Os,{size:16}),keywords:["list","records","database"],roles:["admin","receptionist","doctor"]},{name:"Add New Patient",path:"/dashboard/add-patient",icon:r.jsx(VN,{size:16}),keywords:["register","new","create","onboard"],roles:["admin","receptionist","doctor"]},{name:"Admissions",path:"/manage-admission",icon:r.jsx(zQ,{size:16}),keywords:["ipd","admit","discharge","rooms"],roles:["admin","doctor","receptionist"]},{name:"Appointment Queue",path:"/dashboard/reception",icon:r.jsx(Os,{size:16}),keywords:["queue","reception","waiting","appointments"],roles:["admin","receptionist","superadmin"]},{name:"Doctor Queue",path:"/dashboard/queue",icon:r.jsx(_c,{size:16}),keywords:["waiting","patients","consultation"],roles:["admin","doctor","superadmin"]},{name:"Pharmacy Inventory",path:"/dashboard/inventory",icon:r.jsx($o,{size:16}),keywords:["drugs","medicine","stock","pharmacy"],roles:["admin","pharmacy"]},{name:"Pharmacy Queue",path:"/dashboard/pharmacy-queue",icon:r.jsx($o,{size:16}),keywords:["orders","billing","dispense"],roles:["admin","pharmacy","superadmin"]},{name:"Add New Drug",path:"/dashboard/inventory/add",icon:r.jsx($o,{size:16}),keywords:["create","medicine","stock"],roles:["admin","pharmacy"]},{name:"Add Pharmacy Order",path:"/dashboard/add-order",icon:r.jsx(CE,{size:16}),keywords:["sell","bill","dispense"],roles:["admin","pharmacy"]},{name:"Refill Reminders",path:"/refill-reminders",icon:r.jsx(fa,{size:16}),keywords:["recurring","sms","alert"],roles:["admin","pharmacy"]},{name:"Distributors",path:"/dashboard/distributors",icon:r.jsx(KD,{size:16}),keywords:["suppliers","vendors","stock"],roles:["admin","pharmacy"]},{name:"Purchase",path:"/dashboard/purchase",icon:r.jsx(CE,{size:16}),keywords:["buy","procurement","stock"],roles:["admin","pharmacy"]},{name:"Lab Panel",path:"/dashboard/lab",icon:r.jsx(ls,{size:16}),keywords:["billing","orders","queue"],roles:["admin","lab","superadmin"]},{name:"Create Lab Order",path:"/create-lab-order",icon:r.jsx(ls,{size:16}),keywords:["test","pathology","diagnostics"],roles:["admin","doctor","lab"]},{name:"Search Lab Reports",path:"/lab/search-report",icon:r.jsx(En,{size:16}),keywords:["results","history","find"],roles:["admin","doctor","lab"]},{name:"Lab Inventory",path:"/lab-inventory",icon:r.jsx(ls,{size:16}),keywords:["reagents","tests","stock"],roles:["admin","lab"]},{name:"Dental",path:"/dashboard/dental",icon:r.jsx(_c,{size:16}),keywords:["teeth","dentist","chart","odontogram"],roles:["admin","doctor","superadmin"]},{name:"Create Custom Bill",path:"/create-custom-bill",icon:r.jsx(aa,{size:16}),keywords:["invoice","custom","charge"],roles:["admin","receptionist"]},{name:"Billing History",path:"/billing",icon:r.jsx(mw,{size:16}),keywords:["transactions","payments","history"],roles:["admin","receptionist"]},{name:"Patient Debt Management",path:"/dashboard/patient-debt",icon:r.jsx(mw,{size:16}),keywords:["debt","due","outstanding","balance"],roles:["admin","pharmacy","receptionist"]},{name:"Custom Tables",path:"/custom-tables",icon:r.jsx(aa,{size:16}),keywords:["database","sheets","custom data"],roles:["admin","superadmin"]},{name:"Custom Dashboards",path:"/dashboards",icon:r.jsx(ng,{size:16}),keywords:["charts","reports","analytics"],roles:["admin","doctor","superadmin"]},{name:"Staff Management",path:"/dashboard/staff",icon:r.jsx(ag,{size:16}),keywords:["users","employees","roles","admin"],roles:["admin","superadmin"]},{name:"Role Management",path:"/dashboard/roles",icon:r.jsx(ag,{size:16}),keywords:["roles","permissions","access","custom roles"],roles:["admin","superadmin"]}],pB=[{icon:"",text:"Update Paracetamol stock to 100",roles:["admin","pharmacy"]},{icon:"",text:"Change CBC Test price to 350",roles:["admin","lab","superadmin"]},{icon:"",text:"Set Voice AI language to Hindi",roles:["all"]},{icon:"",text:"Show revenue for last month",roles:["admin","superadmin"]},{icon:"",text:"Purchase 50 strips of Aspirin",roles:["admin","pharmacy"]},{icon:"",text:"Update consultation fee to 500",roles:["admin","superadmin"]},{icon:"",text:"Add new staff member",roles:["admin","superadmin"]},{icon:"",text:"Register: John Doe, 25M, Fever",roles:["all"]},{icon:"",text:"Check Metformin availability",roles:["admin","pharmacy","doctor"]}],zPe=({user:t})=>{const{isOpen:e,closeCommandBar:n}=Rc(),a=Ft(),i=zr(),s=v.useRef(null),[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[S,_]=v.useState(!0),[T,C]=v.useState(!0),{customColumnsConfig:E}=oS(),k=(E==null?void 0:E.patients)||[],[P,I]=v.useState(null),[R,z]=v.useState(!1),q=ds(),{chatHistory:F,isProcessing:V,handleSendMessage:H,setChatQuery:K,refreshChat:W,selectedImage:B,handleImageSelect:G,clearImage:ee,temporaryDashboard:X,closeTemporaryDashboard:$,saveTemporaryDashboard:ce}=mO({settings:{},staffList:[],enableDynamicContext:!1}),xe=Ue=>{Ue&&(q.prefetchQuery({queryKey:Gt.patients.context(Ue),queryFn:async()=>{const jt=await le(`/api/patients/${Ue}/context`);if(!jt.ok)throw new Error("Failed to fetch patient context");return jt.json()},staleTime:5*60*1e3}),q.prefetchQuery({queryKey:Gt.patientDebts.balance(Ue),queryFn:async()=>{const jt=await le(`/api/patient-debts/${Ue}/balance`);return jt.ok?jt.json():{netDebt:0}},staleTime:1*60*1e3}),q.prefetchQuery({queryKey:Gt.queue.latest(Ue),queryFn:async()=>{const jt=await le(`/api/queue/patient/${Ue}/latest`);if(!jt.ok)throw new Error("Failed to fetch latest queue status");const kt=await jt.json();return kt!=null&&kt._id&&q.prefetchQuery({queryKey:Gt.queue.entry(kt._id),queryFn:async()=>{const Kn=await le(`/api/queue/doctor/complaint/${kt._id}`);if(!Kn.ok)throw new Error("Failed to fetch complaint record");return Kn.json()},staleTime:1*60*1e3}),kt},staleTime:5e3}),q.prefetchQuery({queryKey:Gt.dental.records(Ue),queryFn:async()=>{const jt=await le(`/api/dental/patient/${Ue}`);if(!jt.ok)throw new Error("Failed to fetch dental records");return jt.json()},staleTime:5*60*1e3}))},Y=v.useMemo(()=>t?Uj.filter(Ue=>Ue.roles.includes("all")||t.role&&Ue.roles.includes(t.role)):Uj,[t]),Re=v.useMemo(()=>t?pB.filter(Ue=>Ue.roles.includes("all")||t.role&&Ue.roles.includes(t.role)):pB,[t]),$e=v.useMemo(()=>new co(Y,{keys:["name","keywords"],threshold:.3}),[Y]),[ze,Le]=v.useState(!1),[oe,Se]=v.useState(!1),[Ve,Ae]=v.useState(!1);v.useEffect(()=>{if(e)Le(!0),Ae(!1);else{Ae(!0);const Ue=setTimeout(()=>{Le(!1),Ae(!1),W()},200);return()=>clearTimeout(Ue)}},[e,W]);const{setPageContext:ue}=zN();v.useEffect(()=>{if(e){const Ue=i.pathname,jt=Uj.find(kt=>kt.path===Ue)||Uj.find(kt=>Ue.startsWith(kt.path)&&kt.path!=="/dashboard");ue(jt?{name:jt.name,path:Ue,data:{role:jt.roles}}:{name:"Current Page",path:Ue})}},[e,i.pathname,ue]);const Te=v.useRef(null),se=Ue=>{var kt;const jt=(kt=Ue.target.files)==null?void 0:kt[0];jt&&G(jt)},[be,_e]=v.useState({x:0,y:0}),[Ne,Z]=v.useState(!1),ge=v.useRef({x:0,y:0}),de=v.useRef({x:0,y:0}),ae=v.useRef(!1),ne=v.useRef(null);v.useEffect(()=>{const Ue=kt=>{if(!Ne)return;ae.current=!0;const Kn=kt.clientX-ge.current.x,vt=kt.clientY-ge.current.y;let Dt=de.current.x+Kn,Vt=de.current.y+vt;if(ne.current){const Yn=ne.current.offsetWidth,vr=ne.current.offsetHeight,za=(window.innerWidth-Yn)/2,Xr=(window.innerHeight-vr)/2,wa=Math.max(0,za),pn=Math.max(0,Xr);Dt=Math.max(-wa,Math.min(wa,Dt)),Vt=Math.max(-pn,Math.min(pn,Vt))}_e({x:Dt,y:Vt})},jt=()=>{Z(!1)};return Ne&&(window.addEventListener("mousemove",Ue),window.addEventListener("mouseup",jt)),()=>{window.removeEventListener("mousemove",Ue),window.removeEventListener("mouseup",jt)}},[Ne]),v.useEffect(()=>{i.pathname==="/dashboard"&&(l(""),p([]),x([])),e&&(i.pathname==="/dashboard"?z(!1):z(!0))},[i.pathname]),v.useEffect(()=>{(f.length>0||g.length>0)&&R&&z(!1)},[f,g]),v.useEffect(()=>{if(e&&window.innerWidth<=768){window.history.pushState({commandBarOpen:!0},"");const Ue=jt=>{jt.preventDefault(),z(!0)};return window.addEventListener("popstate",Ue),()=>{window.removeEventListener("popstate",Ue)}}},[e]),v.useEffect(()=>{R||_e({x:0,y:0})},[R]),v.useEffect(()=>{K(o)},[o]),v.useEffect(()=>{e&&!R&&s.current&&setTimeout(()=>{if(s.current){s.current.focus();const Ue=s.current.value.length;Ue>0&&s.current.setSelectionRange(Ue,Ue)}},50)},[e,R]),v.useEffect(()=>{if(!e||R||!(window.innerWidth<=768))return;const jt=window.scrollY,kt=document.body.style.overflow,Kn=document.documentElement.style.overflow,vt=document.body.style.position,Dt=document.body.style.top,Vt=document.body.style.width;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${jt}px`,document.body.style.width="100%",()=>{document.documentElement.style.overflow=Kn,document.body.style.overflow=kt,document.body.style.position=vt,document.body.style.top=Dt,document.body.style.width=Vt,window.scrollTo(0,jt)}},[e,R]);const ie=Ue=>{!Ue.trim()&&!B||(z(!1),H(Ue),l(""),p([]),x([]))},{preFilledQuery:je,setPreFilledQuery:Ee}=Rc();v.useEffect(()=>{e&&je&&(l(je),setTimeout(()=>{ie(je),Ee("")},300))},[e,je,Ee]),v.useEffect(()=>{P&&(l(P),Se(!1),setTimeout(()=>ie(P),50),I(null))},[P]);const Q=()=>{Se(!0)},ye=()=>{l(""),p([]),x([]),W(),s.current&&s.current.focus()};v.useEffect(()=>{e&&(async()=>{_(!0);try{const jt=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),kt=await le(`/api/patients?${jt.toString()}`);if(kt.ok){const Kn=await kt.json();d(Kn.patients||[])}}catch(jt){console.error("Error fetching recent patients:",jt)}finally{_(!1)}})()},[e]);const me=v.useMemo(()=>$l(async Ue=>{const jt=Ue.trim(),kt=/^\d+$/.test(jt),Kn=jt.split(/\s+/).length;if(jt.length>1){const vt=$e.search(jt);x(vt.map(Dt=>Dt.item))}else x([]);if(jt.length<2||kt&&jt.length>10||!kt&&Kn>3){p([]),j(!1);return}j(!0);try{const vt=new URLSearchParams({search:encodeURIComponent(Ue),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Dt=await le(`/api/patients?${vt.toString()}`);if(Dt.ok){const Vt=await Dt.json();p(Vt.patients||[])}}catch(vt){console.error("Search error:",vt)}finally{j(!1),fB()}},300),[t]),he=Ue=>{const jt=Ue.target.value;l(jt),me(jt)},De=Ue=>{Ue.id&&a(`/dashboard/edit-complaint/patient/${Ue.id}`)},nt=Ue=>{a(Ue.path)},Fe=Ue=>{Ue.path==="/dashboard/add-patient"&&BPe()},Ge=Ue=>{l(Ue),setTimeout(()=>ie(Ue),50)},it=async()=>{if(o.trim()){j(!0);try{const Ue=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),age:null,gender:null,phone:null})});if(!Ue.ok){const vt=await Ue.json();throw new Error(vt.message||"Failed to create patient")}const jt=await Ue.json();let kt=null;const Kn=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:jt.id,complaint:"Walk-in (Quick Create)"})});if(Kn.ok&&(kt=(await Kn.json()).id),kt)a(`/dashboard/edit-complaint/${kt}`);else{const vt=await le(`/api/queue/patient/${jt.id}/latest`);if(vt.ok){const Dt=await vt.json();Dt&&Dt._id&&a(`/dashboard/edit-complaint/${Dt._id}`)}}n()}catch(Ue){console.error("Failed to create patient:",Ue),alert("Failed to create patient. Please try again.")}finally{j(!1)}}},wt=Ue=>{o.trim()&&ie(o)},we=Ue=>{Ue.key==="Enter"&&!Ue.shiftKey&&(Ue.preventDefault(),wt())},Qe=Ue=>{Ue.target===Ue.currentTarget&&n()};if(!e&&!ze)return null;const Xe=o.trim().length>0||(f.length>0||g.length>0)&&!b,ct=o.length===0&&f.length===0&&g.length===0,Ct=o.length>=3&&f.length===0&&g.length===0&&!b,bt=F.length>0||V,ke=!bt||Xe,ot=bt&&Xe,Tt=bt&&!T&&!R&&!Xe;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${It.overlay} ${R?It.overlayMinimized:""} ${Ve?It.exiting:""}`,onClick:Qe,children:r.jsxs("div",{ref:ne,className:`${It.modal} ${R?It.minimized:""} ${Tt?It.collapsed:""} ${Ve?It.exiting:""}`,style:{transform:`translate(${be.x}px, ${be.y}px)`,height:Tt?"auto":void 0},onClick:()=>{ae.current||(R?z(!1):Tt&&C(!0))},children:[r.jsxs("div",{className:It.dragBar,onMouseDown:Ue=>{Ue.target.closest("button")||(Z(!0),ae.current=!1,ge.current={x:Ue.clientX,y:Ue.clientY},de.current={x:be.x,y:be.y})},children:[r.jsxs("div",{className:It.dragBarControls,children:[r.jsx("button",{className:It.windowControlBtn,onClick:n,title:"Close",children:r.jsx(Lt,{size:24,color:"#64748b"})}),r.jsx("button",{className:It.windowControlBtn,onClick:()=>z(!R),title:R?"Maximize":"Minimize",children:R?r.jsx(Yz,{size:24,color:"#64748b"}):r.jsx(iJ,{size:24,color:"#64748b"})})]}),r.jsx("div",{className:It.dragBarTitle,children:bt?r.jsxs(r.Fragment,{children:[r.jsx(Pv,{size:14,className:"text-violet-600"}),r.jsx("span",{children:"AI Assistant"})]}):Xe?r.jsxs(r.Fragment,{children:[r.jsx(En,{size:14,className:"text-blue-500"}),r.jsx("span",{children:"Search Results"})]}):r.jsx("span",{style:{opacity:.5,fontWeight:500},children:"Clinic Manager AI"})}),r.jsx("div",{className:It.dragBarControlsRight,children:r.jsx("button",{className:It.newChatBtn,onClick:ye,title:"New Chat",children:r.jsx(Bi,{size:20})})})]}),r.jsxs("div",{className:It.contentWrapper,children:[bt&&r.jsx("div",{className:It.chatSectionFill,children:r.jsxs("div",{className:It.chatMessagesFill,children:[F.map((Ue,jt)=>r.jsx("div",{className:`${It.chatBubble} ${Ue.role==="user"?It.chatBubbleUser:Ue.role==="model"?It.chatBubbleModel:It.chatBubbleSystem}`,children:Ue.role==="model"?r.jsx(Nf,{remarkPlugins:[Sf],children:Ue.text}):Ue.text},jt)),V&&r.jsxs("div",{className:It.processing,children:[r.jsx(oo,{size:14,className:It.spinner}),"Thinking..."]})]})}),ke&&r.jsxs("div",{className:ot?It.overlayContent:It.content,children:[ct&&!bt&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Newly Registered"}),r.jsx("div",{className:It.recentList,children:S?[1,2,3,4,5].map(Ue=>r.jsx(te,{width:100,height:32,style:{borderRadius:"16px"}},Ue)):c.length>0?c.map(Ue=>r.jsxs("div",{className:It.recentPill,onClick:()=>De(Ue),onMouseEnter:()=>xe(Ue.id),children:[r.jsx("span",{className:It.recentName,children:Ue.name||"Patient"}),r.jsxs("span",{className:It.recentToken,children:["#",Ue.token]}),r.jsxs("span",{className:It.recentInfo,children:[Ue.age?`${Ue.age}y`:""," ",Ue.gender||""]})]},Ue.id)):r.jsx("div",{className:It.recentInfo,style:{opacity:.5},children:"No recent patients found."})})]}),ct&&!bt&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Try Asking AI..."}),r.jsx("div",{className:It.examplesGrid,children:Re.map((Ue,jt)=>r.jsxs("div",{className:It.exampleCard,onClick:()=>Ge(Ue.text),children:[r.jsx("span",{className:It.exampleIcon,children:Ue.icon}),r.jsx("span",{className:It.exampleText,children:Ue.text})]},jt))})]}),b&&r.jsx("div",{className:It.section,children:r.jsxs("div",{className:It.processing,children:[r.jsx(oo,{size:16,className:It.spinner}),"Searching..."]})}),g.length>0&&!b&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Pages Found"}),r.jsx("div",{className:It.resultsList,children:g.map((Ue,jt)=>r.jsxs("div",{className:It.resultItem,onClick:()=>nt(Ue),onMouseEnter:()=>Fe(Ue),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{color:"#7c3aed"},children:Ue.icon}),r.jsx("span",{className:It.resultName,children:Ue.name})]}),r.jsx("span",{className:It.resultDetails,style:{fontSize:"0.7rem"},children:"Jump to page"})]},jt))})]}),Xe&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Patients Found"}),r.jsxs("div",{className:It.resultsList,children:[o.trim().length>0&&r.jsx("div",{className:It.resultItem,onClick:it,style:{border:"1px dashed #6366f1",backgroundColor:"#f5f3ff"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#8b5cf6",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(VN,{size:16})}),r.jsxs("div",{children:[r.jsxs("span",{className:It.resultName,style:{color:"#7c3aed"},children:['Create "',o,'"']}),r.jsx("div",{className:"text-xs text-violet-600 mt-0.5",children:"Add new patient"})]})]})}),f.map(Ue=>r.jsxs("div",{className:It.resultItem,onClick:()=>De(Ue),onMouseEnter:()=>{fB(),xe(Ue.id)},children:[r.jsxs("div",{children:[r.jsxs("span",{className:It.resultToken,children:["[#",Ue.token,"]"]}),r.jsx("span",{className:It.resultName,children:Ue.name})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[Ue.age&&r.jsxs("span",{children:[Ue.age," Yrs"]}),Ue.gender&&r.jsx("span",{children:Ue.gender}),r.jsxs("span",{children:["ID: ",Ue.id.slice(-6).toUpperCase()]}),k.map(jt=>{var Kn;const kt=(Kn=Ue.custom_fields)==null?void 0:Kn[jt.key];return kt?r.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 border border-slate-200",children:[jt.label,": ",String(kt)]},jt.key):null})]})]},Ue.id))]})]}),Ct&&!bt&&r.jsx("div",{className:It.section,children:r.jsxs("div",{className:It.noResults,children:["Press ",r.jsx("strong",{children:"Enter"}),' to send "',o,'" to AI Assistant']})})]})]}),r.jsxs("div",{className:It.header,children:[r.jsx("div",{className:It.inputWrapper,children:r.jsxs("div",{className:It.inputContainer,children:[r.jsx("div",{className:It.minimizedSearchIcon,children:r.jsx(En,{size:24})}),r.jsx("textarea",{ref:Ue=>{s.current=Ue,Ue&&(Ue.style.height="auto",Ue.style.height=Math.min(Ue.scrollHeight,150)+"px")},className:It.input,placeholder:R?"Type here...":"Search (Name/Token/Phone), Ask AI, or Enter New Case (Name Age Sex Complaint)...",value:o,onChange:Ue=>{he(Ue),Ue.target.style.height="auto",Ue.target.style.height=Math.min(Ue.target.scrollHeight,150)+"px"},onKeyDown:we,onFocus:Ue=>{Ue.target.scrollIntoView=()=>{},setTimeout(()=>{ne.current&&(ne.current.scrollTop=ne.current.scrollHeight)},100)},rows:1,disabled:V}),B&&r.jsxs("div",{style:{position:"relative",marginRight:"0.5rem"},children:[r.jsx("img",{src:B,alt:"Selected",style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #e2e8f0"}}),r.jsx("button",{onClick:ee,style:{position:"absolute",top:-4,right:-4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",padding:"1px",cursor:"pointer",display:"flex"},children:r.jsx(Lt,{size:8})})]}),r.jsxs("div",{className:It.controlsGroup,children:[r.jsx("button",{className:It.iconButton,onClick:()=>{var Ue;return(Ue=Te.current)==null?void 0:Ue.click()},title:"Attach Image",children:r.jsx(WD,{size:16})}),(o.trim().length>0||B)&&r.jsx("button",{className:`${It.iconButton} ${It.sendButton}`,onClick:()=>ie(o),title:"Send to AI",children:r.jsx(UN,{size:16})}),r.jsx("button",{className:It.iconButton,onClick:Q,title:"Voice Input",children:r.jsx(qN,{size:16})})]})]})}),r.jsx("input",{type:"file",ref:Te,onChange:se,accept:"image/*",style:{display:"none"}})]})]})}),oe&&r.jsx(sS,{onClose:()=>Se(!1),patientData:null,tokenNumber:null,onAiSummaryChange:Ue=>{console.log("AI Summary:",Ue),I(Ue)}}),X&&r.jsx($Pe,{isOpen:!!X,onClose:$,title:X.title,widgets:X.widgets,onSave:ce})]})};var KH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mB=Ce.createContext&&Ce.createContext(KH),qPe=["attr","size","title"];function UPe(t,e){if(t==null)return{};var n=VPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function VPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function DN(){return DN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},DN.apply(this,arguments)}function gB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ON(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gB(Object(n),!0).forEach(function(a){HPe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function HPe(t,e,n){return e=GPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GPe(t){var e=WPe(t,"string");return typeof e=="symbol"?e:e+""}function WPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YH(t){return t&&t.map((e,n)=>Ce.createElement(e.tag,ON({key:n},e.attr),YH(e.child)))}function zi(t){return e=>Ce.createElement(KPe,DN({attr:ON({},t.attr)},e),YH(t.child))}function KPe(t){var e=n=>{var{attr:a,size:i,title:s}=t,o=UPe(t,qPe),l=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Ce.createElement("svg",DN({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,o,{className:c,style:ON(ON({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ce.createElement("title",null,s),t.children)};return mB!==void 0?Ce.createElement(mB.Consumer,null,n=>e(n)):e(KH)}function YPe(t){return zi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function yB(t){return zi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function Sm(t){return zi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function xB(t){return zi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function FA(t){return zi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function Gh(t){return zi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Vj(t){return zi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(t)}function Uh(t){return zi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(t)}function ov(t){return zi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(t)}function Am(t){return zi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function QH(t){return zi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function vB(t){return zi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function QPe(t){return zi({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function Hj(t){return zi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function _m(t){return zi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const XH={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Gh},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:Vj},{path:"/dashboard/users",name:"User Management",icon:_m}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Gh}]},{title:"Clinic Management",links:[{path:"/dashboard/clinic-hub",name:"Clinic Hub",icon:xB},{path:"/dashboard/staff",name:"Staff Management",icon:_m},{path:"/dashboard/roles",name:"Role Management",icon:Hj},{path:"/dashboard/clinic-files",name:"Clinic Files",icon:Sm},{path:"/custom-tables",name:"Custom Tables",icon:Sm},{path:"/dashboards",name:"Custom Dashboards",icon:yB}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:Vj},{path:"/dashboard/patients",name:"All Patients",icon:_m},{path:"/dashboard/patients/search",name:"Search Patient",icon:Am},{path:"/dashboard/files",name:"Patient Files",icon:Sm}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:Sm},{path:"/dashboard/inventory",name:"Inventory Management",icon:ov},{path:"/dashboard/inventory/add",name:"Add Drug",icon:ov},{path:"/dashboard/distributors",name:"Distributor Management",icon:_m}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:vB},{path:"/dashboard/reception",name:"Appointment Queue",icon:Gh},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:Uh},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:Uh}]},{title:"Role Operations",links:[{path:"/manage-admission",name:"Admission Desk",icon:Hj},{path:"/dashboard/pharmacy-queue",name:"Pharmacy Queue",icon:ov},{path:"/dashboard/lab",name:"Lab Panel",icon:FA},{path:"/billing",name:"Billing",icon:Uh},{path:"/create-custom-bill",name:"Custom Bill",icon:Uh}]},{title:"Help & Support",links:[{path:"/dashboard/guide",name:"User Guide",icon:YPe}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search-patient",name:"Patient Search",icon:Am},{path:"/dashboard/add-patient",name:"Add Patient",icon:Vj},{path:"/manage-admission",name:"Manage Admission",icon:Hj}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:FA},{path:"/billing",name:"Billing",icon:Uh}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:vB}]},{title:"Analytics",links:[{path:"/dashboards",name:"Custom Dashboards",icon:yB}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Appointment Queue",icon:Gh}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:_m},{path:"/dashboard/add-patient",name:"Add Patient",icon:Vj},{path:"/dashboard/search-patient",name:"Search Patient",icon:Am}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:Uh},{path:"/manage-admission",name:"Manage Admission",icon:Hj},{path:"/dashboard/patient-debt",name:"Patient Debt Management",icon:Uh}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Gh},{path:"/lab-inventory",name:"Lab Test Inventory",icon:FA},{path:"/lab/search-report",name:"Search Lab Report",icon:Am}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Gh},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:ov},{path:"/dashboard/inventory/add",name:"Add Drug",icon:ov},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:Sm},{path:"/dashboard/distributors",name:"Distributor Management",icon:_m}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:Sm},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:xB},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:Am}]}]},OM=async()=>{const t=await le("/api/clinic-subscriptions/plans",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription plans")}return t.json()},XPe=async t=>{const e=await le(`/api/clinic-subscriptions/cancel/${t}`,{method:"PUT"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to cancel clinic subscription")}return e.json()},JPe=async t=>{const e=await le(`/api/clinic-subscriptions/plans/${t}`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to fetch clinic subscription plan")}return e.json()},ZPe=async t=>{const e=await le("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to create clinic subscription plan")}return e.json()},eDe=async(t,e)=>{const n=await le(`/api/clinic-subscriptions/plans/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to update clinic subscription plan")}return n.json()},tDe=async t=>{const e=await le(`/api/clinic-subscriptions/plans/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to deactivate clinic subscription plan")}return e.json()},nDe=async t=>{const e=await le("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to initiate clinic subscription")}return e.json()},rDe=async()=>{try{const t=await le("/api/clinic-subscriptions/pending",{method:"GET"});return t.ok?t.json():null}catch(t){return console.error("Error checking for pending subscription:",t),null}},aDe=async()=>{const t=await le("/api/clinics/subscription-status",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription status")}return t.json()};function iDe(t=!0){return LN({queryKey:Gt.clinicSubscription,queryFn:aDe,enabled:t,staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!0})}const sDe="_container_c9bhr_3",oDe="_header_c9bhr_21",lDe="_titleGroup_c9bhr_41",cDe="_title_c9bhr_41",uDe="_closeButton_c9bhr_59",dDe="_messageList_c9bhr_79",hDe="_emptyState_c9bhr_108",fDe="_emptyStateIcon_c9bhr_119",pDe="_exampleContainer_c9bhr_145",mDe="_exampleChip_c9bhr_153",gDe="_messageRow_c9bhr_176",yDe="_messageRowUser_c9bhr_194",xDe="_messageRowModel_c9bhr_198",vDe="_messageRowSystem_c9bhr_202",bDe="_bubble_c9bhr_208",jDe="_bubbleUser_c9bhr_224",wDe="_bubbleModel_c9bhr_234",NDe="_bubbleSystem_c9bhr_247",SDe="_processingIndicator_c9bhr_330",_De="_spin_c9bhr_343",CDe="_inputArea_c9bhr_358",TDe="_imagePreviewContainer_c9bhr_365",kDe="_inputContainer_c9bhr_376",ADe="_inputField_c9bhr_393",EDe="_sendButton_c9bhr_407",fr={container:sDe,header:oDe,titleGroup:lDe,title:cDe,closeButton:uDe,messageList:dDe,emptyState:hDe,emptyStateIcon:fDe,exampleContainer:pDe,exampleChip:mDe,messageRow:gDe,messageRowUser:yDe,messageRowModel:xDe,messageRowSystem:vDe,bubble:bDe,bubbleUser:jDe,bubbleModel:wDe,bubbleSystem:NDe,processingIndicator:SDe,spin:_De,inputArea:CDe,imagePreviewContainer:TDe,inputContainer:kDe,inputField:ADe,sendButton:EDe},JH=({onClose:t,settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s})=>{const{chatQuery:o,setChatQuery:l,chatHistory:c,isProcessing:d,handleSendMessage:f,refreshChat:p,stopGeneration:g,selectedImage:x,handleImageSelect:b,clearImage:j}=mO({settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s}),S=v.useRef(null),_=v.useRef(null),T=()=>{var P;(P=S.current)==null||P.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{T()},[c,d]);const C=P=>{var R;const I=(R=P.target.files)==null?void 0:R[0];I&&b(I)},E=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],k=P=>{l(P)};return r.jsxs("div",{className:fr.container,children:[r.jsxs("header",{className:fr.header,children:[r.jsxs("div",{className:fr.titleGroup,children:[r.jsx(Pv,{size:20,className:"text-violet-600"}),r.jsx("h3",{className:fr.title,children:"Clinic Assistant"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:p,className:fr.closeButton,title:"Refresh Chat",children:r.jsx(Jz,{size:18})}),r.jsx("button",{onClick:t,className:fr.closeButton,title:"Close",children:r.jsx(Lt,{size:20})})]})]}),r.jsxs("div",{className:fr.messageList,children:[c.length===0&&r.jsxs("div",{className:fr.emptyState,children:[r.jsx(Pv,{size:48,className:fr.emptyStateIcon}),r.jsx("p",{children:"How can I help you manage the clinic today?"}),r.jsx("div",{className:fr.exampleContainer,children:E.map((P,I)=>r.jsx("button",{className:fr.exampleChip,onClick:()=>k(P),children:P},I))})]}),c.map((P,I)=>r.jsx("div",{className:`${fr.messageRow} ${P.role==="user"?fr.messageRowUser:P.role==="model"?fr.messageRowModel:fr.messageRowSystem}`,children:r.jsx("div",{className:`${fr.bubble} ${P.role==="user"?fr.bubbleUser:P.role==="model"?fr.bubbleModel:fr.bubbleSystem}`,children:P.role==="user"||P.role==="system"?P.text:r.jsx(Nf,{remarkPlugins:[Sf],children:P.text})})},I)),d&&r.jsx("div",{className:`${fr.messageRow} ${fr.messageRowModel}`,children:r.jsxs("div",{className:fr.processingIndicator,children:[r.jsx(oo,{size:14,className:fr.spin}),"Thinking..."]})}),r.jsx("div",{ref:S})]}),r.jsxs("div",{className:fr.inputArea,children:[x&&r.jsxs("div",{className:fr.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[r.jsx("img",{src:x,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),r.jsx("button",{onClick:j,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:r.jsx(Lt,{size:12})})]}),r.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),r.jsxs("div",{className:fr.inputContainer,children:[r.jsx("input",{type:"file",ref:_,onChange:C,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:fr.sendButton,onClick:()=>{var P;return(P=_.current)==null?void 0:P.click()},disabled:d,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:r.jsx(WD,{size:18})}),r.jsx("input",{type:"text",className:fr.inputField,placeholder:"Type your request...",value:o,onChange:P=>l(P.target.value),onKeyDown:P=>P.key==="Enter"&&!d&&f(),disabled:d,autoFocus:!0}),d?r.jsx("button",{className:fr.sendButton,onClick:g,title:"Stop Generating",style:{color:"#ef4444"},children:r.jsx(GJ,{size:18,fill:"currentColor"})}):r.jsx("button",{className:fr.sendButton,onClick:()=>f(),disabled:!o.trim()&&!x,children:r.jsx(UN,{size:18})})]})]})]})};function Yc(t,e=100){const n=v.useRef(!1);v.useEffect(()=>{if(n.current)return;const a=setTimeout(()=>{const i=document,s=['input[type="text"]:not([disabled]):not([readonly])','input[type="search"]:not([disabled]):not([readonly])','input[type="email"]:not([disabled]):not([readonly])','input[type="tel"]:not([disabled]):not([readonly])','input[type="url"]:not([disabled]):not([readonly])',"input:not([type]):not([disabled]):not([readonly])"].join(", "),o=i.querySelectorAll(s),l=Array.from(o).filter(c=>{const d=window.getComputedStyle(c),f=c.getBoundingClientRect();return d.display!=="none"&&d.visibility!=="hidden"&&d.opacity!=="0"&&f.width>0&&f.height>0});if(l.length>0){const c=l[0];c.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{c.focus()},50),n.current=!0}},e);return()=>clearTimeout(a)},[t,e])}const PDe=({onLoginSuccess:t})=>{const[e,n]=v.useState(""),[a,i]=v.useState(""),[s,o]=v.useState(null),[l,c]=v.useState(!1),d=Ft();Yc();const f=async x=>{x.preventDefault(),c(!0),o(null);try{const b=await le("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!b.ok){let S=`Login failed with status: ${b.status}`;try{S=(await b.json()).message||S}catch{try{const T=await b.text();T&&(S=`${S} - ${T}`)}catch{}}throw new Error(S)}const j=await b.json();console.log("Login successful:",j),localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(b){console.error("Login failed:",b),o(b.message||"Login failed. Please check your credentials.")}finally{c(!1)}},p=async x=>{c(!0),o(null);try{const b=await le("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x.credential})});if(!b.ok)throw new Error("Google Sign-In failed");const j=await b.json();localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(b){console.error("Google Login Error:",b),o("Google Sign-In failed. Please try again.")}finally{c(!1)}},g=()=>{console.error("Google Login Failed"),o("Google Sign-In was unsuccessful. Please try again.")};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Newtons AI HMS"}),r.jsx("p",{className:"auth-subtitle",children:"Sign in to continue"}),r.jsxs("form",{onSubmit:f,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>n(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"email",children:"Email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:x=>i(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"password",children:"Password"})]}),s&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:s})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:l,className:"auth-submit-button",children:l?"Signing in...":"Sign In"})})]}),r.jsx("div",{className:"google-login-container",children:r.jsx(nK,{onSuccess:p,onError:g,useOneTap:!0})}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(Cr,{to:"/register",className:"auth-navigation-link",children:"Create account"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},DDe=()=>{const[t,e]=v.useState(""),[n,a]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState(null),[f,p]=v.useState(!1),g=Ft(),x=async b=>{b.preventDefault(),p(!0),d(null);try{const j=await le("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:t,userName:n,userEmail:i,userPassword:o})}),S=await j.json();if(!j.ok)throw new Error(S.message||`HTTP error! status: ${j.status}`);console.log("Registration successful:",S),g("/login")}catch(j){console.error("Registration failed:",j),d(j.message||"Registration failed. Please try again.")}finally{p(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"}),r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:t,onChange:b=>e(b.target.value),className:"auth-text-input",placeholder:"Your Clinic's Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"}),r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:n,onChange:b=>a(b.target.value),className:"auth-text-input",placeholder:"Your Full Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userEmail",children:"Your Email (Admin Login)"}),r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:i,onChange:b=>s(b.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userPassword",children:"Password"}),r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:o,onChange:b=>l(b.target.value),className:"auth-text-input",placeholder:"Min. 6 characters"})]}),c&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:c})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:f,className:"auth-submit-button",children:f?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(Cr,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},ODe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i})=>{const s=zr(),[o,l]=v.useState(""),c=XH[n]||[],[d,f]=v.useState(500),p=v.useRef(!1),g=v.useCallback(S=>{p.current=!0,S.preventDefault()},[]),x=v.useCallback(()=>{p.current=!1},[]),b=v.useCallback(S=>{if(p.current){const _=window.innerWidth-S.clientX;_>250&&_<window.innerWidth*.8&&f(_)}},[]);v.useEffect(()=>(window.addEventListener("mousemove",b),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",x)}),[b,x]);const j=c.map(S=>({...S,links:S.links.filter(_=>_.name.toLowerCase().includes(o.toLowerCase()))})).filter(S=>S.links.length>0);return r.jsxs("div",{className:`side-panel ${a?"open":""}`,style:{width:`${d}px`,right:a?"0":`-${d}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:g}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(Cr,{to:"/dashboard",className:"home-button",onClick:i,children:r.jsx(Gh,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Am,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:o,onChange:S=>l(S.target.value)})]}),r.jsx("button",{className:"close-button",onClick:i,children:""})]}),r.jsx("nav",{children:j.map((S,_)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:S.title}),r.jsx("ul",{className:"sub-page-list",children:S.links.map(T=>{const C=T.icon;return r.jsx("li",{children:r.jsxs(Cr,{to:T.path,className:s.pathname===T.path?"active":"",onClick:i,children:[C&&r.jsx(C,{})," ",T.name]})},T.path)})})]},_))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(QH,{})," Logout"]})]})]})},MDe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i,roleNavigation:s})=>{const o=zr(),l=s[n]||[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mobile-side-panel-overlay ${a?"open":""}`,onClick:i}),r.jsxs("div",{className:`mobile-side-panel ${a?"open":""}`,children:[r.jsxs("div",{className:"mobile-side-panel-header",children:[r.jsx("h3",{children:"Menu"}),r.jsx("button",{className:"close-button",onClick:i,children:r.jsx(QPe,{})})]}),r.jsx("nav",{children:l.map((c,d)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:c.title}),r.jsx("ul",{className:"sub-page-list",children:c.links.map(f=>{const p=f.icon;return r.jsx("li",{children:r.jsxs(Cr,{to:f.path,className:o.pathname===f.path?"active":"",onClick:i,children:[p&&r.jsx(p,{})," ",f.name]})},f.path)})})]},d))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(QH,{})," Logout"]})]})]})]})},Uu={"/dashboard":{label:"Dashboard"},"/dashboard/staff":{label:"Staff Management",parent:"/dashboard"},"/dashboard/staff/add":{label:"Add Staff",parent:"/dashboard/staff"},"/dashboard/staff/edit":{label:"Edit Staff",parent:"/dashboard/staff"},"/dashboard/roles":{label:"Role Management",parent:"/dashboard"},"/dashboard/patients":{label:"All Patients",parent:"/dashboard"},"/dashboard/patients/add":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search-patient":{label:"Search Patient",parent:"/dashboard"},"/dashboard/clinic-hub":{label:"Clinic Hub",parent:"/dashboard"},"/dashboard/reception":{label:"Appointment Queue",parent:"/dashboard"},"/dashboard/pharmacy-queue":{label:"Pharmacy Queue",parent:"/dashboard"},"/dashboard/lab":{label:"Lab Panel",parent:"/dashboard"},"/dashboard/inventory":{label:"Inventory",parent:"/dashboard"},"/dashboard/inventory/add":{label:"Add Drug",parent:"/dashboard/inventory"},"/dashboard/inventory/edit":{label:"Edit Drug",parent:"/dashboard/inventory"},"/dashboard/purchase":{label:"Purchase",parent:"/dashboard"},"/dashboard/distributors":{label:"Distributors",parent:"/dashboard"},"/dashboard/patient-debts":{label:"Patient Debts",parent:"/dashboard"},"/dashboard/add-order":{label:"Add Pharmacy Order",parent:"/dashboard"},"/dashboard/edit-pharmacy-order":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/pharmacy-billing":{label:"Pharmacy Billing",parent:"/dashboard"},"/dashboard/analysis":{label:"Analysis",parent:"/dashboard"},"/dashboard/settings":{label:"Settings",parent:"/dashboard"},"/dashboard/search-patient-records":{label:"Search Records",parent:"/dashboard"},"/dashboard/queue":{label:"Queue",parent:"/dashboard"},"/dashboard/add-patient":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search":{label:"Patient Search",parent:"/dashboard"},"/dashboard/patients/search":{label:"Search Patient",parent:"/dashboard"},"/dashboard/subscriptions":{label:"Subscriptions",parent:"/dashboard"},"/dashboard/subscriptions/add":{label:"Add Plan",parent:"/dashboard/subscriptions"},"/dashboard/subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/subscriptions"},"/dashboard/clinic-subscriptions":{label:"Clinic Subscriptions",parent:"/dashboard"},"/dashboard/clinic-subscriptions/add":{label:"Add Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/clinic-subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/users":{label:"User Management",parent:"/dashboard"},"/dashboard/lab-billing":{label:"Lab Billing",parent:"/dashboard"},"/lab-inventory":{label:"Lab Inventory",parent:"/dashboard"},"/lab/search-report":{label:"Search Lab Report",parent:"/dashboard"},"/create-lab-order":{label:"Create Lab Order",parent:"/dashboard"},"/enter-lab-report":{label:"Enter Lab Report",parent:"/dashboard"},"/view-lab-report":{label:"View Lab Report",parent:"/dashboard"},"/lab/report/:id":{label:"Lab Report",parent:"/lab/search-report"},"/lab/enter-report/:id":{label:"Enter Report",parent:"/lab/search-report"},"/lab/view-report/:id":{label:"View Report",parent:"/lab/search-report"},"/billing":{label:"Billing",parent:"/dashboard"},"/dashboard/doctor-billing":{label:"Doctor Billing",parent:"/dashboard"},"/dashboard/doctor-billing/:id":{label:"Doctor Bill",parent:"/dashboard/doctor-billing"},"/create-custom-bill":{label:"Create Custom Bill",parent:"/dashboard"},"/patient":{label:"Patient",parent:"/dashboard"},"/patient/:id/admission-billing":{label:"Admission Billing",parent:"/manage-admission"},"/patient/:id/admission-bill":{label:"Admission Bill",parent:"/patient/:id/admission-billing"},"/patient/:id/lab-reports":{label:"Lab Reports",parent:"/patient"},"/patient/:id/pharmacy-orders":{label:"Pharmacy Orders",parent:"/patient"},"/patient/:id/complaints":{label:"Past Complaints",parent:"/patient"},"/edit-complaint":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/:id":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/patient/:id":{label:"New Complaint",parent:"/dashboard"},"/start-subscription":{label:"Start Subscription",parent:"/dashboard"},"/start-subscription/:id":{label:"Start Subscription",parent:"/dashboard"},"/manage-admission":{label:"Manage Admission",parent:"/dashboard"},"/dashboard/guide":{label:"User Guide",parent:"/dashboard"},"/custom-tables":{label:"Custom Tables",parent:"/dashboard"},"/custom-tables/:id":{label:"Table Records",parent:"/custom-tables"},"/dashboards":{label:"Dashboards",parent:"/dashboard"},"/dashboards/new":{label:"New Dashboard",parent:"/dashboards"},"/dashboards/:id":{label:"Dashboard View",parent:"/dashboards"},"/dashboards/:id/edit":{label:"Edit Dashboard",parent:"/dashboards"},"/dashboard/pharmacy-billing/:id":{label:"Pharmacy Bill",parent:"/dashboard/pharmacy-billing"},"/dashboard/lab-billing/:id":{label:"Lab Bill",parent:"/dashboard/lab-billing"},"/dashboard/edit-pharmacy-order/:id":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/orders/:id":{label:"Order Details",parent:"/dashboard/add-order"},"/refill-reminders":{label:"Refill Reminders",parent:"/dashboard"},"/start-clinic-subscription":{label:"Start Clinic Subscription",parent:"/dashboard"},"/dashboard/all-patients":{label:"All Patients",parent:"/dashboard"}},bB=t=>t.split("/").map(e=>{const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),a=/^\d+$/.test(e);return n||a?":id":e}).join("/"),IDe=t=>{if(Uu[t])return Uu[t].label;const e=bB(t);if(Uu[e])return Uu[e].label;const n=t.split("/"),a=n[n.length-1],i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a),s=/^\d+$/.test(a);if(i||s){const o=n.slice(0,-1).join("/"),l=bB(o);if(Uu[l])return Uu[l].label;if(Uu[o])return Uu[o].label}return a.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},RDe=()=>{const t=zr(),e=v.useMemo(()=>{const n=t.pathname.split("/").filter(s=>s!=="");if(n.length===0||n[0]==="login"||n[0]==="registration")return[];const a=[];let i="";return n.forEach((s,o)=>{if(i+=`/${s}`,o===0&&s==="dashboard")a.push({label:"Home",path:"/dashboard",isLast:o===n.length-1});else if(s!=="dashboard"){const l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s),c=/^\d+$/.test(s);let d=IDe(i);(l||c)&&d.replace(/\s/g,"").toLowerCase()===s.replace(/[-_]/g,"").toLowerCase()&&(l?d=`#${s.substring(0,8)}`:c&&(d=`#${s}`)),a.push({label:d,path:i,isLast:o===n.length-1})}}),n[0]!=="dashboard"&&a.length>0&&a.unshift({label:"Home",path:"/dashboard",isLast:!1}),a},[t.pathname]);return e.length===0?null:r.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:r.jsx("ol",{className:"breadcrumb-list",children:e.map((n,a)=>r.jsxs("li",{className:"breadcrumb-item",children:[a>0&&r.jsx(pd,{className:"breadcrumb-separator",size:14}),n.isLast?r.jsxs("span",{className:"breadcrumb-current","aria-current":"page",children:[a===0&&r.jsx(SE,{size:14,className:"breadcrumb-home-icon"}),n.label]}):r.jsxs(Cr,{to:n.path,className:"breadcrumb-link",children:[a===0&&r.jsx(SE,{size:14,className:"breadcrumb-home-icon"}),n.label]})]},n.path))})})},LDe="_container_1bwyv_5",FDe="_visualContainer_1bwyv_33",$De="_mobileDashboardGrid_1bwyv_49",BDe="_mobileDashboardItem_1bwyv_87",zDe="_mobileDashboardIcon_1bwyv_195",qDe="_mobileDashboardLabel_1bwyv_233",UDe="_brandTitle_1bwyv_331",VDe="_searchBar_1bwyv_387",HDe="_searchIconWrapper_1bwyv_435",GDe="_searchIcon_1bwyv_435",WDe="_placeholderText_1bwyv_459",KDe="_shortcutHint_1bwyv_479",YDe="_key_1bwyv_495",QDe="_plus_1bwyv_519",XDe="_micButtonWrapper_1bwyv_529",JDe="_micIcon_1bwyv_577",ZDe="_newlyRegisteredSection_1bwyv_901",eOe="_recentList_1bwyv_917",tOe="_recentPatientPill_1bwyv_931",nOe="_recentNameContainer_1bwyv_957",rOe="_recentInfo_1bwyv_969",aOe="_newlyRegisteredLabel_1bwyv_1007",iOe="_recentName_1bwyv_957",sOe="_recentToken_1bwyv_1171",wr={container:LDe,visualContainer:FDe,mobileDashboardGrid:$De,mobileDashboardItem:BDe,mobileDashboardIcon:zDe,mobileDashboardLabel:qDe,brandTitle:UDe,searchBar:VDe,searchIconWrapper:HDe,searchIcon:GDe,placeholderText:WDe,shortcutHint:KDe,key:YDe,plus:QDe,micButtonWrapper:XDe,micIcon:JDe,newlyRegisteredSection:ZDe,recentList:eOe,recentPatientPill:tOe,recentNameContainer:nOe,recentInfo:rOe,newlyRegisteredLabel:aOe,recentName:iOe,recentToken:sOe},oOe=[{label:"Doctor",icon:r.jsx(jf,{size:24}),path:"/dashboard/doctor"},{label:"Labs",icon:r.jsx(Zj,{size:24}),path:"/create-lab-order"},{label:"Clinic",icon:r.jsx(Gz,{size:24}),path:"/dashboard/clinic-hub"},{label:"Inventory",icon:r.jsx($o,{size:24}),path:"/dashboard/inventory"},{label:"Analysis",icon:r.jsx(Zj,{size:24}),path:"/dashboard/analysis"},{label:"Dental",icon:r.jsx(zJ,{size:24}),path:"/dashboard/dental"},{label:"New Order",icon:r.jsx($o,{size:24}),path:"/dashboard/add-order"},{label:"Files",icon:r.jsx(Zj,{size:24}),path:"/dashboard/files"},{label:"Clinic Files",icon:r.jsx(aa,{size:24}),path:"/dashboard/clinic-files"},{label:"Distributors",icon:r.jsx(KD,{size:24}),path:"/dashboard/distributors"},{label:"Custom Bill",icon:r.jsx(aa,{size:24}),path:"/create-custom-bill"},{label:"Patients",icon:r.jsx(Os,{size:24}),path:"/dashboard/patients"},{label:"Debts",icon:r.jsx(mw,{size:24}),path:"/dashboard/patient-debts"}],ZH="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",lOe={apiKey:ZH},cOe=()=>{const{openCommandBar:t,isOpen:e,setPreFilledQuery:n}=Rc(),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=Ft(),c=b=>{b.stopPropagation(),i(!0)};v.useEffect(()=>{s&&(i(!1),n&&n(s),t(),o(null))},[s,t,n]);const d=ds(),{data:f,isLoading:p}=LN({queryKey:["recentPatients"],queryFn:async()=>{const b=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),j=await le(`/api/patients?${b.toString()}`);if(!j.ok)throw new Error("Failed to fetch recent patients");return j.json()},staleTime:60*1e3});v.useEffect(()=>{d.prefetchQuery({queryKey:Gt.clinicSettings,queryFn:async()=>{const b=await le("/api/clinics/settings");if(!b.ok)throw new Error("Failed to fetch clinic settings");return b.json()},staleTime:30*60*1e3}),d.prefetchQuery({queryKey:Gt.drugs.all,queryFn:async()=>{const b=await le("/api/drugs");if(!b.ok)throw new Error("Failed to fetch drugs");const j=await b.json();return j.drugs||j},staleTime:10*60*1e3}),d.prefetchQuery({queryKey:Gt.labTests.all,queryFn:async()=>{const b=await le("/api/lab-tests");if(!b.ok)throw new Error("Failed to fetch lab tests");return b.json()},staleTime:10*60*1e3})},[d]);const g=(f==null?void 0:f.patients)||[],x=b=>{b&&(d.prefetchQuery({queryKey:Gt.patients.context(b),queryFn:async()=>{const j=await le(`/api/patients/${b}/context`);if(!j.ok)throw new Error("Failed to fetch patient context");return j.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Gt.dental.records(b),queryFn:async()=>{const j=await le(`/api/dental/patient/${b}`);if(!j.ok)throw new Error("Failed to fetch dental records");return j.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Gt.patientDebts.balance(b),queryFn:async()=>{const j=await le(`/api/patient-debts/${b}/balance`);return j.ok?j.json():{netDebt:0}},staleTime:1*60*1e3}),d.prefetchQuery({queryKey:Gt.queue.latest(b),queryFn:async()=>{const j=await le(`/api/queue/patient/${b}/latest`);if(!j.ok)throw new Error("Failed to fetch latest queue status");const S=await j.json();return S!=null&&S._id&&d.prefetchQuery({queryKey:Gt.queue.entry(S._id),queryFn:async()=>{const _=await le(`/api/queue/doctor/complaint/${S._id}`);if(!_.ok)throw new Error("Failed to fetch complaint record");return _.json()},staleTime:1*60*1e3}),S},staleTime:5e3}))};return r.jsxs("div",{className:wr.container,children:[r.jsx("div",{className:wr.mobileDashboardGrid,children:oOe.map((b,j)=>r.jsxs("div",{className:wr.mobileDashboardItem,onClick:()=>l(b.path),children:[r.jsx("div",{className:wr.mobileDashboardIcon,children:b.icon}),r.jsx("span",{className:wr.mobileDashboardLabel,children:b.label})]},j))}),r.jsxs("div",{className:wr.visualContainer,children:[r.jsx("h1",{className:wr.brandTitle,children:"Newtons Ai"}),!e&&r.jsxs("div",{className:wr.searchBar,onClick:()=>t(),children:[r.jsx("div",{className:wr.searchIconWrapper,children:r.jsx(En,{className:wr.searchIcon})}),r.jsx("span",{className:wr.placeholderText,children:"Search or Ask AI..."}),r.jsx("div",{className:wr.micButtonWrapper,onClick:c,children:r.jsx(qN,{className:wr.micIcon})}),r.jsxs("div",{className:wr.shortcutHint,children:[r.jsx("span",{className:wr.key,children:"Ctrl"}),r.jsx("span",{className:wr.plus,children:"+"}),r.jsx("span",{className:wr.key,children:"K"})]})]})]}),!e&&(p||g.length>0)&&r.jsxs("div",{className:wr.newlyRegisteredSection,children:[r.jsx("div",{className:wr.newlyRegisteredLabel,children:"Newly Registered"}),r.jsx("div",{className:wr.recentList,children:p?[1,2,3,4,5].map(b=>r.jsxs("div",{className:wr.recentPatientPill,style:{cursor:"default"},children:[r.jsxs("div",{className:wr.recentNameContainer,children:[r.jsx(te,{width:100,height:18}),r.jsx(te,{width:30,height:20})]}),r.jsx("div",{className:wr.recentInfo,children:r.jsx(te,{width:80,height:14})})]},b)):g.map(b=>r.jsxs("div",{className:wr.recentPatientPill,onClick:()=>l(`/dashboard/edit-complaint/patient/${b.id}`),onMouseEnter:()=>b.id&&x(b.id),children:[r.jsxs("div",{className:wr.recentNameContainer,children:[r.jsx("span",{className:wr.recentName,children:b.name||"New Patient"}),r.jsxs("span",{className:wr.recentToken,children:["#",b.token]})]}),r.jsxs("div",{className:wr.recentInfo,children:[b.age?`${b.age} yrs`:"",b.age&&b.gender?" / ":"",b.gender||""]})]},b.id))})]}),a&&ZH&&r.jsx(iS,{options:lOe,children:r.jsx(sS,{onClose:()=>i(!1),patientData:null,tokenNumber:null,onAiSummaryChange:o})})]})},eG=({queueList:t,onPatientClick:e})=>{const i=Array.from({length:13},(o,l)=>8+l),s={};return i.forEach(o=>s[o]=[]),t.forEach(o=>{const c=new Date(o.createdAt).getHours();c>=8&&c<=20&&s[c].push(o)}),r.jsx("div",{className:"appointment-timeline-container",children:i.map(o=>r.jsxs("div",{className:"timeline-hour-row",children:[r.jsx("div",{className:"timeline-time-label",children:r.jsxs("span",{className:"time-text",children:[o>12?o-12:o," ",o>=12?"PM":"AM"]})}),r.jsxs("div",{className:"timeline-track",children:[s[o].length===0?r.jsx("div",{className:"timeline-empty-slot"}):r.jsx("div",{className:"timeline-appointments-group",children:s[o].map(l=>{var c,d;return r.jsxs("div",{className:`timeline-card status-${l.status}`,onClick:()=>e(l),children:[r.jsxs("div",{className:"timeline-card-header",children:[r.jsx("span",{className:"patient-name-card",children:(c=l.Patient)==null?void 0:c.name}),r.jsxs("span",{className:"token-badge",children:["#",l.token_no]})]}),r.jsxs("div",{className:"timeline-card-details",children:[((d=l.Patient)==null?void 0:d.phone)&&r.jsxs("div",{className:"detail-row",children:[r.jsx(rg,{size:12}),r.jsx("span",{children:l.Patient.phone})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx(Eb,{size:12}),r.jsx("span",{children:new Date(l.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),r.jsx("div",{className:`status-line-indicator status-color-${l.status}`})]},l.id)})}),r.jsx("div",{className:"timeline-grid-line"})]})]},o))})},tG=({isOpen:t,onClose:e,onAppointmentBooked:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(""),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(null);v.useEffect(()=>{t&&(i(""),o([]),c(null),f(""),S(null))},[t]);const _=Ce.useMemo(()=>$l(async P=>{if(P.length<2){o([]),b(!1);return}b(!0);try{const I=new URLSearchParams({search:encodeURIComponent(P),page:"1",limit:"10"}),R=await le(`/api/patients?${I.toString()}`);if(R.ok){const z=await R.json();o(z.patients||[])}}catch(I){console.error("Error searching patients:",I)}finally{b(!1)}},300),[]),T=P=>{const I=P.target.value;i(I),l&&c(null),I.length>=2?(b(!0),_(I)):o([])},C=P=>{c(P),i(P.name),o([])},E=async()=>{if(a.trim()){g(!0);try{const P=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.trim(),age:null,gender:null,phone:null})});if(!P.ok){const z=await P.json();throw new Error(z.message||"Failed to create patient")}const I=await P.json(),R={id:I.id,name:I.name,phone:I.phone,age:I.age,gender:I.gender,token:I.token};C(R)}catch(P){console.error("Failed to create patient:",P),S(P.message||"Failed to create patient")}finally{g(!1)}}},k=async()=>{if(!l){S("Please select a patient.");return}if(!d){S("Please select a date and time.");return}g(!0),S(null);try{if(!(await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id,date:new Date(d).toISOString(),description:"Appointment"})})).ok)throw new Error("Failed to book appointment");n(),e()}catch(P){console.error("Error booking appointment:",P),S(P.message||"Failed to book appointment.")}finally{g(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content appointment-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{style:{fontSize:"1.15rem"},children:"Book Appointment"}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx(Lt,{size:18})})]}),r.jsxs("div",{className:"modal-body",children:[j&&r.jsx("div",{className:"error-message",style:{padding:"6px 10px",fontSize:"0.85rem"},children:j}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{style:{fontSize:"0.8rem",marginBottom:"4px"},children:"Search Patient"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{className:"search-icon-input",size:16}),r.jsx("input",{type:"text",placeholder:"Name, phone, or ID...",value:a,onChange:T,className:"modal-input",style:{padding:"8px 10px 8px 34px",fontSize:"0.9rem"}}),x&&r.jsx("div",{className:"spinner-sm"}),(s.length>0||a.length>0&&!x)&&!l&&r.jsxs("div",{className:"search-results-dropdown",style:{maxHeight:"180px"},children:[a.trim().length>0&&!x&&r.jsx("div",{className:"search-result-item create-patient-item",onClick:E,style:{padding:"8px 12px"},children:r.jsxs("div",{className:"patient-info",style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("div",{className:"create-icon-wrapper",style:{width:"28px",height:"28px"},children:r.jsx(VN,{size:14,color:"white"})}),r.jsxs("div",{children:[r.jsxs("span",{className:"name",style:{color:"#7c3aed",fontSize:"0.9rem"},children:['Create "',a,'"']}),r.jsx("span",{className:"details",style:{color:"#7c3aed",fontSize:"0.75rem"},children:"Add new patient"})]})]})}),s.map(P=>r.jsxs("div",{className:"search-result-item",onClick:()=>C(P),style:{padding:"8px 12px"},children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",style:{fontSize:"0.9rem"},children:P.name}),r.jsxs("span",{className:"details",style:{fontSize:"0.75rem"},children:[P.age?`${P.age} yrs`:""," ",P.gender?`/ ${P.gender}`:""]})]}),P.phone&&r.jsx("span",{className:"phone",style:{fontSize:"0.75rem"},children:P.phone})]},P.id))]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{style:{fontSize:"0.8rem",marginBottom:"4px"},children:"Appointment Date & Time"}),r.jsx("div",{className:"date-input-wrapper",children:r.jsx("input",{type:"datetime-local",className:"modal-input",value:d,onChange:P=>f(P.target.value),style:{padding:"8px 10px",fontSize:"0.9rem"}})})]}),l&&r.jsxs("div",{className:"selected-patient-preview",style:{marginTop:"4px"},children:[r.jsx("div",{className:"preview-label",style:{fontSize:"0.75rem"},children:"Selected Patient:"}),r.jsxs("div",{className:"preview-card",style:{padding:"8px",gap:"10px"},children:[r.jsx(Jn,{size:18,style:{color:"var(--primary-color)"}}),r.jsxs("div",{children:[r.jsx("strong",{style:{fontSize:"0.9rem"},children:l.name}),r.jsxs("div",{style:{fontSize:"0.75rem"},children:[l.age?`${l.age} yrs`:"-"," / ",l.gender||"-"]})]})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:k,className:"submit-button",disabled:p||!l||!d,children:p?"Booking...":"Book Appointment"})]})]})}):null},uOe=async t=>{const e=t?`/api/queue?date=${t}`:"/api/queue",n=await le(e);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()};function nG(t){return LN({queryKey:["queue",t||"today"],queryFn:()=>uOe(t),staleTime:5e3,refetchInterval:7e3,placeholderData:e=>e,refetchOnMount:"always",refetchOnWindowFocus:!0})}function dOe(){const t=ds();return WW({mutationFn:async({queueId:e,status:n,doctorId:a})=>{const i=await le(`/api/queue/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,doctorId:a})});if(!i.ok)throw new Error("Failed to update queue status");return i.json()},onSuccess:(e,{queueId:n})=>{t.invalidateQueries({queryKey:Gt.queue.today}),t.invalidateQueries({queryKey:Gt.queue.entry(n)})}})}const Gj=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},hOe=t=>{if(!t)return"Unknown Date";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},$A=({title:t,icon:e,items:n,renderItemContent:a,isLoading:i,noDataText:s})=>{const o=v.useMemo(()=>{const l={};n.forEach(d=>{if(isNaN(d.date.getTime())){l["Unknown Date"]||(l["Unknown Date"]=[]),l["Unknown Date"].push(d);return}const f=hOe(d.originalDateString);l[f]||(l[f]=[]),l[f].push(d)});const c=Object.keys(l);return c.sort((d,f)=>{if(d==="Unknown Date")return 1;if(f==="Unknown Date")return-1;try{const p=b=>{const j=b.split(" ");if(j.length===3){const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(j[1]);if(_!==-1)return new Date(parseInt(j[2]),_,parseInt(j[0]))}return new Date(b)},g=p(d),x=p(f);if(!isNaN(g.getTime())&&!isNaN(x.getTime()))return x.getTime()-g.getTime()}catch(p){console.error("Error parsing date for sorting:",p)}return f.localeCompare(d)}),c.map(d=>({date:d,items:l[d]}))},[n]);return r.jsxs("div",{className:"dcp-group-card",children:[r.jsxs("h4",{className:"dcp-group-header",children:[e&&r.jsx(e,{size:14,className:"dcp-group-icon"}),t]}),r.jsxs("div",{className:"dcp-group-content",children:[i&&r.jsx("div",{className:"dcp-history-items",children:[1,2].map(l=>r.jsxs("div",{className:"dcp-history-item",style:{border:"none"},children:[r.jsx(te,{width:"60%",height:16,style:{marginBottom:"8px"}}),r.jsx(te,{width:"30%",height:12})]},l))}),!i&&n.length===0&&r.jsx("p",{className:"dcp-history-empty",children:s}),!i&&n.length>0&&r.jsx("div",{children:o.map(({date:l,items:c})=>r.jsxs("div",{className:"dcp-date-group",children:[r.jsx("h5",{className:"dcp-date-label",children:l}),r.jsx("div",{className:"dcp-date-items",children:c.map((d,f)=>r.jsx("div",{className:"dcp-history-item",children:a(d)},`${d.type}-${d.originalDateString}-${f}`))})]},l))})]})]})},Wj=()=>{var Ve,Ae;const{openCommandBar:t}=Rc(),[e,n]=v.useState(new Date),[a,i]=v.useState("list"),[s,o]=v.useState(!1),l=e.toISOString().split("T")[0],{data:c,isLoading:d,refetch:f,isError:p}=nG(l),g=(c==null?void 0:c.list)||[],x=(c==null?void 0:c.summary)||{currentPatient:null,nextPatient:null,waitingCount:0},b=d,[j,S]=v.useState(!1),[_,T]=v.useState(null),C=()=>{f()},[E,k]=v.useState(null),[P,I]=v.useState(null),[R,z]=v.useState(null),[q,F]=v.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[V,H]=v.useState(!1),[K,W]=v.useState(null),{patientId:B}=$a(),G=Ft(),ee=ds(),X=ue=>{ue&&(ee.prefetchQuery({queryKey:Gt.patients.context(ue),queryFn:async()=>{const Te=await le(`/api/patients/${ue}/context`);if(!Te.ok)throw new Error("Failed to fetch patient context");return Te.json()},staleTime:5*60*1e3}),ee.prefetchQuery({queryKey:Gt.patientDebts.balance(ue),queryFn:async()=>{const Te=await le(`/api/patient-debts/${ue}/balance`);return Te.ok?Te.json():{netDebt:0}},staleTime:1*60*1e3}),ee.prefetchQuery({queryKey:Gt.queue.latest(ue),queryFn:async()=>{const Te=await le(`/api/queue/patient/${ue}/latest`);if(!Te.ok)throw new Error("Failed to fetch latest queue status");const se=await Te.json();return se!=null&&se._id&&ee.prefetchQuery({queryKey:Gt.queue.entry(se._id),queryFn:async()=>{const be=await le(`/api/queue/doctor/complaint/${se._id}`);if(!be.ok)throw new Error("Failed to fetch complaint record");return be.json()},staleTime:1*60*1e3}),se},staleTime:5e3}),ee.prefetchQuery({queryKey:Gt.dental.records(ue),queryFn:async()=>{const Te=await le(`/api/dental/patient/${ue}`);if(!Te.ok)throw new Error("Failed to fetch dental records");return Te.json()},staleTime:5*60*1e3}))},$=v.useCallback(async ue=>{z(null),k(null),I(null),H(!0),W(null),F({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const Te=await le(`/api/patients/${ue}`);if(!Te.ok)throw new Error(`Patient details fetch failed (${Te.status})`);const se=await Te.json();k(se);const be=await le(`/api/queue/patient/${ue}/latest`);if(!be.ok&&be.status!==404)throw new Error(`Queue entry fetch failed (${be.status})`);if(be.ok){const _e=await be.json();I(_e)}await ce(ue)}catch(Te){console.error("Error fetching specific patient data:",Te),z(Te.message||"Failed to load patient data."),W(Te.message||"Failed to load patient history.")}finally{H(!1)}},[]),ce=v.useCallback(async ue=>{H(!0),W(null);try{const[Te,se,be,_e]=await Promise.all([le(`/api/queue/patient/${ue}/complaints`),le(`/api/lab/patient/${ue}`),le(`/api/lab/orders/patient/${ue}?status=pending`),le(`/api/pharmacy-orders/patient/${ue}`)]),Ne=Te.ok?await Te.json():[],Z=se.ok?await se.json():[],ge=be.ok?await be.json():[],de=_e.ok?await _e.json():[];F({pastComplaints:Ne||[],labReports:Z||[],pendingLabOrders:ge||[],pharmacyOrders:de||[]})}catch(Te){console.error("Error fetching patient history:",Te),W(Te.message||"Failed to load patient history."),F({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{H(!1)}},[]);v.useEffect(()=>{B?$(B):(k(null),I(null),f())},[B,$,f]),v.useEffect(()=>{var ue;if(!B&&((ue=x.currentPatient)==null?void 0:ue.status)==="consulting"){const Te=x.currentPatient._id;Te&&G(`/dashboard/edit-complaint/${Te}`)}},[B,x.currentPatient,G]),v.useEffect(()=>{var ue;!B&&((ue=x.currentPatient)!=null&&ue.patientId)?ce(x.currentPatient.patientId):!B&&!x.currentPatient&&(F({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),H(!1),W(null))},[B,(Ve=x.currentPatient)==null?void 0:Ve.patientId,ce]);const xe=((Ae=x.currentPatient)==null?void 0:Ae.patientId)||(B?parseInt(B,10):null),Y=v.useMemo(()=>{if(!xe||!q.pastComplaints)return[];const ue=q.pastComplaints.map(Te=>({date:new Date(Te.createdAt),type:"Complaint",data:Te,originalDateString:Te.createdAt})).filter(Te=>!isNaN(Te.date.getTime()));return ue.sort((Te,se)=>se.date.getTime()-Te.date.getTime()),ue},[xe,q.pastComplaints]),Re=v.useMemo(()=>{if(!xe)return[];const ue=[];return(q.pendingLabOrders??[]).forEach(Te=>{const se=new Date(Te.createdAt);isNaN(se.getTime())||ue.push({date:se,type:"Lab Order (Pending)",data:Te,originalDateString:Te.createdAt})}),(q.labReports??[]).forEach(Te=>{const se=Te.reportCreatedAt?new Date(Te.reportCreatedAt):null;se&&!isNaN(se.getTime())&&ue.push({date:se,type:"Lab Report",data:Te,originalDateString:Te.reportCreatedAt})}),ue.sort((Te,se)=>se.date.getTime()-Te.date.getTime()),ue},[xe,q.pendingLabOrders,q.labReports]),$e=v.useMemo(()=>{if(!xe||!q.pharmacyOrders)return[];const ue=q.pharmacyOrders.map(Te=>({date:new Date(Te.date),type:"Pharmacy Order",data:Te,originalDateString:Te.date})).filter(Te=>!isNaN(Te.date.getTime()));return ue.sort((Te,se)=>se.date.getTime()-Te.date.getTime()),ue},[xe,q.pharmacyOrders]),ze=async()=>{S(!0),T(null);try{await le("/api/queue/doctor/next",{method:"POST"}),await f()}catch(ue){console.error("Error calling next patient:",ue),T(ue.message||"Failed to call next patient.")}finally{S(!1)}},Le=ue=>{switch(ue){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return ue}},[oe,Se]=v.useState("info");return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dcp-container",children:[r.jsxs("div",{className:"dcp-header-row",children:[r.jsx("button",{onClick:()=>G(-1),className:"dcp-back-btn",children:r.jsx(sn,{size:20})}),r.jsx("h1",{className:"dcp-title",children:"Doctor Consultation Panel"})]}),B?r.jsxs(r.Fragment,{children:[R&&r.jsx("div",{className:"dcp-error",children:R}),E&&r.jsx("div",{className:"dcp-card dcp-card-violet",children:r.jsxs("div",{className:"dcp-card-content",children:[r.jsxs("div",{className:"dcp-mobile-tabs",children:[r.jsx("button",{className:`dcp-mobile-tab ${oe==="info"?"active":""}`,onClick:()=>Se("info"),children:"Patient Record"}),r.jsx("button",{className:`dcp-mobile-tab ${oe==="history"?"active":""}`,onClick:()=>Se("history"),children:"History"})]}),r.jsxs("div",{className:"dcp-flex-split",children:[r.jsxs("div",{className:`dcp-flex-half dcp-tab-info ${oe==="info"?"":"hidden"}`,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("div",{className:"dcp-section-header dcp-section-header-violet",children:"Patient Record"}),r.jsxs("button",{onClick:()=>G("/dashboard/doctor"),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem"},children:[r.jsx(sn,{size:12})," Back to Queue"]})]}),r.jsx("div",{className:"dcp-patient-name dcp-patient-name-gradient",children:E.name}),r.jsxs("div",{className:"dcp-patient-meta",style:{marginBottom:"12px"},children:[r.jsxs("span",{className:"dcp-patient-badge",children:[E.age||"N/A"," Yrs"]}),r.jsx("span",{className:"dcp-patient-badge",children:E.gender||"N/A"})]}),r.jsxs("div",{className:"dcp-activity-box",children:[r.jsx("div",{className:"dcp-activity-label",children:"Latest Activity"}),P?r.jsxs("div",{children:[r.jsxs("div",{className:"dcp-activity-content",children:[r.jsx("strong",{children:"Complaint:"})," ",P.complaint||r.jsx("span",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"None"})]}),r.jsxs("div",{style:{marginTop:"8px"},children:[r.jsx("span",{className:`dcp-status ${P.status==="consulting"?"dcp-status-consulting":P.status==="seen"?"dcp-status-seen":P.status==="waiting"?"dcp-status-waiting":""}`,children:Le(P.status)}),P.status==="consulting"&&P._id&&r.jsx("button",{onClick:()=>G(`/dashboard/edit-complaint/${P._id}`),onMouseEnter:()=>X(String(E.id)),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px",padding:"4px 12px"},children:"Resume"})]}),_&&r.jsx("div",{className:"dcp-error-card",style:{marginBottom:"16px"},children:_}),P.case_summary&&r.jsxs("div",{className:"dcp-ai-summary",style:{marginTop:"10px"},children:[r.jsx("div",{className:"dcp-ai-label",children:" AI Summary"}),r.jsx("p",{className:"dcp-ai-text",children:P.case_summary})]})]}):r.jsx("p",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"No queue entry found for this patient today."})]})]}),r.jsxs("div",{className:`dcp-flex-half dcp-history-section dcp-tab-history ${oe==="history"?"":"hidden"} dcp-desktop-only`,children:[r.jsxs("div",{className:"dcp-history-header",children:[r.jsx("span",{className:"dcp-history-title",children:"Patient History"}),V&&r.jsx(te,{width:60,height:14})]}),K&&r.jsx("div",{className:"dcp-error",children:K}),r.jsxs("div",{className:"dcp-history-scroll dcp-scrollbar",children:[r.jsx($A,{title:"Past Complaints",icon:aa,items:Y,isLoading:V,noDataText:"No past complaints.",renderItemContent:ue=>r.jsxs("div",{children:[ue.data.complaint,r.jsx("div",{className:"dcp-history-timestamp",children:Gj(ue.originalDateString)})]})}),r.jsx($A,{title:"Lab Reports",icon:ls,items:Re,isLoading:V,noDataText:"No lab history.",renderItemContent:ue=>ue.type==="Lab Order (Pending)"?r.jsxs("div",{children:[r.jsx("span",{className:"dcp-type-pending",children:"Pending Order"}),r.jsx("div",{children:ue.data.tests.map(Te=>Te.name).join(", ")}),r.jsx("div",{className:"dcp-history-timestamp",children:Gj(ue.originalDateString)})]}):r.jsxs("div",{children:[r.jsxs("span",{className:"dcp-type-report",children:["Report: ",ue.data.testName]}),r.jsxs("div",{style:{fontStyle:"italic"},children:['"',ue.data.reportFindings.substring(0,50),ue.data.reportFindings.length>50?"...":"",'"']}),r.jsx("div",{className:"dcp-history-timestamp",children:Gj(ue.originalDateString)})]})}),r.jsx($A,{title:"Medications",icon:ud,items:$e,isLoading:V,noDataText:"No pharmacy history.",renderItemContent:ue=>r.jsxs("div",{children:[ue.data.medications.map(Te=>`${Te.name} (${Te.pack_quantity||0}p ${Te.loose_quantity||0}l)`).join(", "),r.jsxs("div",{className:"dcp-history-timestamp",children:[Gj(ue.originalDateString),"  ",r.jsx("span",{style:{textTransform:"capitalize"},children:ue.data.status})]})]})}),Y.length===0&&Re.length===0&&$e.length===0&&!V&&r.jsx("div",{className:"dcp-empty-state",children:"No history records found."})]})]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[p&&r.jsx("div",{className:"dcp-error",children:"Failed to fetch queue data."}),b&&!x.currentPatient?r.jsxs("div",{className:"dcp-card",style:{padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx(te,{width:"40%",height:32}),r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx(te,{width:"60%",height:24}),r.jsx(te,{width:"40%",height:16,style:{marginTop:"8px"}})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsx(te,{width:"100%",height:80,style:{borderRadius:"12px"}})}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[r.jsx(te,{width:180,height:40}),r.jsx(te,{width:120,height:40})]})]}):r.jsx("div",{className:"dcp-empty-state",children:x.currentPatient?"Redirecting to consultation...":"No patient currently being seen. Use 'Call Next' or search for a patient record."})]}),r.jsxs("div",{className:"dcp-scheduler-section",children:[r.jsx("div",{className:"queue-header",children:r.jsx("div",{className:"queue-actions",children:r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${a==="list"?"active":""}`,onClick:()=>i("list"),title:"List View",children:r.jsx(qz,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${a==="timeline"?"active":""}`,onClick:()=>i("timeline"),title:"Timeline View",children:r.jsx(GD,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(fa,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:e.toISOString().split("T")[0],onChange:ue=>n(new Date(ue.target.value))})]}),r.jsxs("button",{onClick:()=>o(!0),className:"appointment-button",children:[r.jsx(Eb,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]}),r.jsx("button",{onClick:()=>t(),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px"},children:"Search Patient"})]})})}),r.jsx(tG,{isOpen:s,onClose:()=>{o(!1),f()},onAppointmentBooked:C}),d&&g.length===0?r.jsx("div",{style:{padding:"20px"},children:r.jsx(te,{width:"100%",height:200})}):a==="timeline"?r.jsx(eG,{queueList:g,onPatientClick:ue=>G(`/dashboard/edit-complaint/${ue.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Details"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:g.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"20px"},children:"No appointments for this date."})}):g.map(ue=>{var Te,se,be;return r.jsxs("tr",{onClick:()=>G(`/dashboard/edit-complaint/${ue.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:["#",ue.token_no]}),r.jsx("td",{children:r.jsx("div",{className:"patient-info",children:r.jsx("span",{className:"name",children:(Te=ue.Patient)==null?void 0:Te.name})})}),r.jsxs("td",{className:"hidden-mobile",children:[(se=ue.Patient)==null?void 0:se.age,"y, ",(be=ue.Patient)==null?void 0:be.gender,"  ",ue.complaint||"-"]}),r.jsx("td",{children:r.jsx("span",{className:`dcp-status ${ue.status==="waiting"?"dcp-status-waiting":ue.status==="consulting"?"dcp-status-consulting":ue.status==="seen"?"dcp-status-seen":""}`,children:Le(ue.status)})}),r.jsx("td",{children:r.jsx("button",{className:"dcp-btn dcp-btn-outline",style:{padding:"4px 8px",fontSize:"0.75rem"},children:"View"})})]},ue.id)})})]})})]}),r.jsxs("div",{className:"dcp-bottom-bar",children:[r.jsx("button",{onClick:ze,disabled:j||b||!x.nextPatient||!!x.currentPatient,className:"dcp-btn dcp-btn-teal",children:"Call Next Patient"}),r.jsxs("div",{className:"dcp-waiting-count",children:[x.waitingCount," patients waiting"]})]})]})]})})},fOe="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",pOe={apiKey:fOe},xv=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(null),g=v.useRef(null),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_,T]=v.useState(null),[C,E]=v.useState(null),[k,P]=v.useState([]),[I,R]=v.useState(!0),[z,q]=v.useState(!1);Yc();const F=Ft(),V=zr(),H=mO({settings:{},staffList:[]}),K=ds(),W=ue=>{ue&&(K.prefetchQuery({queryKey:Gt.patients.context(ue),queryFn:async()=>{const Te=await le(`/api/patients/${ue}/context`);if(!Te.ok)throw new Error("Failed to fetch patient context");return Te.json()},staleTime:5*60*1e3}),K.prefetchQuery({queryKey:Gt.patientDebts.balance(ue),queryFn:async()=>{const Te=await le(`/api/patient-debts/${ue}/balance`);return Te.ok?Te.json():{netDebt:0}},staleTime:1*60*1e3}),K.prefetchQuery({queryKey:Gt.queue.latest(ue),queryFn:async()=>{const Te=await le(`/api/queue/patient/${ue}/latest`);if(!Te.ok)throw new Error("Failed to fetch latest queue status");const se=await Te.json();return se!=null&&se._id&&K.prefetchQuery({queryKey:Gt.queue.entry(se._id),queryFn:async()=>{const be=await le(`/api/queue/doctor/complaint/${se._id}`);if(!be.ok)throw new Error("Failed to fetch complaint record");return be.json()},staleTime:1*60*1e3}),se},staleTime:5e3}),K.prefetchQuery({queryKey:Gt.dental.records(ue),queryFn:async()=>{const Te=await le(`/api/dental/patient/${ue}`);if(!Te.ok)throw new Error("Failed to fetch dental records");return Te.json()},staleTime:5*60*1e3}))},B=v.useMemo(()=>$l(ue=>W(ue),500),[]);v.useEffect(()=>()=>{B.cancel()},[B]);const{selectedImage:G,handleImageSelect:ee,clearImage:X}=H,$=v.useRef(null),ce=ue=>{var se;const Te=(se=ue.target.files)==null?void 0:se[0];Te&&ee(Te)};v.useEffect(()=>{H.chatHistory.length>0&&z&&H.isProcessing},[H.chatHistory.length]),v.useEffect(()=>{(async()=>{R(!0);try{const Te=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),se=await le(`/api/patients?${Te.toString()}`);if(se.ok){const be=await se.json();P(be.patients||[])}}catch(Te){console.error("Error fetching recent patients:",Te)}finally{R(!1)}})()},[]),v.useEffect(()=>{H.setChatQuery(t)},[t]);const xe=v.useCallback(async ue=>{if(!(ue||t).trim()){p("Please enter complaint details.");return}d(!0),p(null),ue&&ue!==H.chatQuery&&H.setChatQuery(ue);try{H.handleSendMessage(),e("")}catch(se){console.error("AI Error:",se),p("AI failed to process. Try again."),d(!1)}},[t,H]);v.useEffect(()=>{!H.isProcessing&&c&&d(!1)},[H.isProcessing,c]),v.useEffect(()=>{const ue=g.current;ue&&(ue.style.height="auto",ue.style.height=`${ue.scrollHeight}px`);const se=new URLSearchParams(V.search).get("caseDetails");if(se){const be=decodeURIComponent(se);be!==t&&(e(be),b(!0))}},[V.search,t]),v.useEffect(()=>{x&&t.trim()&&(F(V.pathname,{replace:!0}),xe(t),b(!1))},[x,t,xe,F,V.pathname]),v.useEffect(()=>{const ue=g.current;ue&&(ue.style.height="auto",ue.style.height=`${ue.scrollHeight}px`)},[t]),v.useEffect(()=>{_&&(e(_),S(!1),H.setChatQuery(_),setTimeout(()=>H.handleSendMessage(),0),T(null))},[_,H]);const Y=()=>{E({id:null,token:null,name:"New Case",age:null,gender:null}),S(!0)},Re=v.useMemo(()=>$l(async ue=>{const Te=ue.trim(),se=/^\d+$/.test(Te),be=Te.split(/\s+/).length;if(Te.length<2||se&&Te.length>10||!se&&be>2){a([]),s(!1),l(null);return}s(!0),l(null);try{const _e=new URLSearchParams({search:encodeURIComponent(ue),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),Ne=await le(`/api/patients?${_e.toString()}`);if(!Ne.ok){const ge=await Ne.text();throw new Error(`API Error (${Ne.status}): ${ge||Ne.statusText}`)}const Z=await Ne.json();a(Z.patients)}catch(_e){console.error("Error searching patients:",_e),l(_e.message||"Failed to search patients."),a([])}finally{s(!1)}},300),[]),$e=ue=>{const Te=ue.target.value;e(Te);const se=Te.trim(),be=/^\d+$/.test(se),_e=se.split(/\s+/).length;se.length>=2&&!(be&&se.length>10||!be&&_e>2)?s(!0):(s(!1),a([])),Re(Te)},ze=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),t.trim()&&!i&&Ae())},Le=async ue=>{ue&&ue.id&&F(`/dashboard/edit-complaint/patient/${ue.id}`)},oe=[{icon:"",title:"Example: Fever & Cold",description:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough",text:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough"},{icon:"",title:"Example: Stomach Ache",description:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days",text:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days"}],Se=ue=>{e(ue),setTimeout(()=>{H.handleSendMessage(ue),e(""),a([])},50)},Ve=()=>{e(""),a([]),H.refreshChat()},Ae=()=>{!t.trim()&&!G||(Re.cancel(),H.handleSendMessage(t),e(""),a([]))};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsx("button",{onClick:()=>F("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"}),r.jsx("button",{onClick:()=>F(-1),className:"patient-search-button patient-search-button-back",children:r.jsx(sn,{size:16})})]}),r.jsxs("div",{className:"patient-search-content-box",children:[o&&r.jsx("p",{className:"patient-search-error",children:o}),f&&r.jsx("p",{className:"patient-search-error",children:f}),I?r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:[1,2,3,4,5].map(ue=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(te,{width:100,height:18}),r.jsx(te,{width:30,height:14})]}),r.jsx("div",{className:"recent-info",children:r.jsx(te,{width:60,height:12})})]},ue))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}):k.length>0&&r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:k.map(ue=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>Le(ue),onMouseEnter:()=>ue.id&&B(ue.id),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:ue.name||"New Patient"}),r.jsxs("span",{className:"recent-token",children:["#",ue.token]})]}),r.jsxs("div",{className:"recent-info",children:[ue.age," yrs / ",ue.gender]})]},ue.id))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}),H.chatHistory.length===0&&n.length===0&&r.jsxs("div",{className:"example-cases-section",children:[r.jsxs("div",{className:"example-cases-header",children:[r.jsx("span",{className:"sparkles-icon",children:""}),r.jsx("h3",{children:"Try AI with Example Cases"})]}),r.jsx("div",{className:"example-cards-container",children:oe.map((ue,Te)=>r.jsxs("div",{className:"example-case-card",onClick:()=>Se(ue.text),children:[r.jsx("div",{className:"example-icon",children:ue.icon}),r.jsxs("div",{className:"example-content",children:[r.jsx("div",{className:"example-title",children:ue.title}),r.jsx("div",{className:"example-description",children:ue.description})]})]},Te))})]})]}),H.chatHistory.length>0&&!c&&r.jsxs("div",{className:`ai-chat-overlay ${z?"minimized":""}`,children:[r.jsxs("div",{className:"ai-chat-header",children:[r.jsx("span",{children:"AI Assistant"}),r.jsx("div",{className:"ai-chat-controls",children:r.jsx("button",{className:"icon-btn",onClick:()=>Ve(),title:"Clear Chat",children:r.jsx(Lt,{size:16})})})]}),r.jsxs("div",{className:"ai-chat-messages",children:[H.chatHistory.map((ue,Te)=>r.jsx("div",{className:`chat-bubble ${ue.role==="model"?"model":"user"}`,children:ue.role==="system"?r.jsx("i",{children:ue.text}):ue.text},Te)),H.isProcessing&&r.jsx("div",{className:"chat-bubble model",children:"Typing..."})]})]}),n.length>0&&!c&&r.jsxs("div",{className:"patient-search-results-overlay",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"#64748b"},children:"Found Patients"}),r.jsx("button",{onClick:()=>a([]),style:{border:"none",background:"transparent",color:"#94a3b8",cursor:"pointer"},children:r.jsx(Lt,{size:14})})]}),n.map(ue=>r.jsxs("div",{onClick:()=>Le(ue),onMouseEnter:()=>ue.id&&B(ue.id),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",ue.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:ue.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[ue.age?`${ue.age} yrs`:"",ue.age&&ue.gender?" / ":"",ue.gender||"N/A"]})]},ue.id))]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[r.jsxs("div",{className:"cmd-input-container",children:[G&&r.jsxs("div",{className:"cmd-image-preview",children:[r.jsx("img",{src:G,alt:"Selected"}),r.jsx("button",{className:"cmd-image-delete",onClick:X,children:r.jsx(Lt,{size:12})})]}),r.jsx("textarea",{ref:g,placeholder:"Search (Name/Token/Phone), Ask AI, or Enter New Case...",value:t,onChange:$e,onKeyDown:ze,className:"cmd-input",disabled:c||H.isProcessing,rows:1}),r.jsxs("div",{className:"cmd-controls-group",children:[r.jsx("input",{type:"file",ref:$,onChange:ce,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:"cmd-icon-btn",onClick:()=>{var ue;return(ue=$.current)==null?void 0:ue.click()},title:"Attach Image",children:r.jsx(WD,{})}),r.jsx("button",{className:"cmd-icon-btn",onClick:Y,title:"Voice Input",children:r.jsx(qN,{})}),(t.length>0||G)&&r.jsx("button",{className:"cmd-icon-btn send-btn",onClick:Ae,title:"Send",children:r.jsx(UN,{})})]})]}),j&&r.jsx(iS,{options:pOe,children:r.jsx(sS,{onClose:()=>S(!1),patientData:C,tokenNumber:null,onAiSummaryChange:T})})]})]})},MM=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(!1),c=Ft(),d=v.useRef(null);v.useEffect(()=>{const C=E=>{d.current&&!d.current.contains(E.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const f=v.useCallback(y9.debounce(async C=>{if(C.trim().length<2){a([]),s(!1);return}s(!0);try{const E=new URLSearchParams({search:encodeURIComponent(C),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),k=await le(`/api/patients?${E.toString()}`);if(!k.ok)throw new Error("Failed to fetch patients");const P=await k.json();a(P.patients)}catch{a([])}finally{s(!1)}},400),[]);v.useEffect(()=>(t?(s(!0),f(t)):(a([]),f.cancel(),s(!1)),()=>f.cancel()),[t,f]);const p=C=>{c(`/patient/${encodeURIComponent(C.id)}/admission-billing`)},g=()=>{e(""),a([]),l(!1)},x=C=>C.slice(0,1).toUpperCase(),[b,j]=v.useState(!1),[S,_]=v.useState(!1),T=async()=>{_(!0);try{const C=await le("/api/patients/discharge-all",{method:"POST"}),E=await C.json();C.ok?(alert(E.message),a([]),e("")):alert(E.message||"Failed to discharge patients")}catch(C){console.error("Bulk discharge error:",C),alert("An error occurred while processing bulk discharge.")}finally{_(!1),j(!1)}};return r.jsxs("div",{className:"ma-container",children:[r.jsxs("div",{className:"ma-header-section",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ma-title",children:"Manage Admission"}),r.jsx("p",{className:"ma-subtitle",children:"Search for a patient to admit, discharge, or view billing details"})]}),r.jsx("button",{className:"ma-discharge-all-btn",onClick:()=>j(!0),children:"Discharge Everyone"})]}),b&&r.jsx("div",{className:"ma-modal-overlay",children:r.jsxs("div",{className:"ma-modal-content",children:[r.jsx("h3",{children:"Confirm Bulk Discharge"}),r.jsxs("p",{children:["Are you sure you want to discharge ",r.jsx("strong",{children:"ALL"})," currently admitted patients?"]}),r.jsx("div",{className:"ma-modal-warning",children:r.jsx("p",{children:" This will finalize bills for all admitted patients."})}),r.jsxs("div",{className:"ma-modal-actions",children:[r.jsx("button",{className:"ma-modal-cancel",onClick:()=>j(!1),disabled:S,children:"Cancel"}),r.jsx("button",{className:"ma-modal-confirm",onClick:T,disabled:S,children:S?"Processing...":"Yes, Discharge All"})]})]})}),r.jsxs("div",{className:"ma-search-wrapper",ref:d,children:[i?r.jsxs("div",{className:"ma-loading-spinner",children:[r.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]}):r.jsx(En,{className:"ma-search-icon",size:20}),r.jsx("input",{type:"text",value:t,onChange:C=>{e(C.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search by Name, Phone, or Token...",className:"ma-search-input",autoFocus:!0}),t&&r.jsx("div",{className:"ma-clear-icon",onClick:g,children:r.jsx(Lt,{size:18})}),r.jsxs("div",{className:`ma-results-dropdown ${o&&(n.length>0||i)?"open":""}`,children:[n.map(C=>{const E=C.admission_date&&!C.discharge_date;return r.jsxs("div",{onClick:()=>p(C),className:"ma-result-item",children:[r.jsxs("div",{className:"ma-patient-info",children:[r.jsx("div",{className:"ma-avatar",children:x(C.name)}),r.jsxs("div",{className:"ma-patient-text",children:[r.jsxs("h4",{children:[C.name,r.jsxs("span",{className:"ma-patient-token",children:["#",C.token]})]}),r.jsxs("p",{className:"ma-patient-subtext",children:[C.phone||"No phone","  ",C.age?`${C.age} Y`:"","  ",C.gender||""]})]})]}),r.jsx("div",{className:`ma-badge ${E?"ma-badge-admitted":"ma-badge-discharged"}`,children:E?"ADMITTED":"NOT ADMITTED"})]},C.id)}),t.length>2&&!i&&n.length===0&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:['No patients found matching "',t,'"']})]})]})]})},jB=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Yes/No"},{value:"computed",label:"Computed (Formula)"}],IM=({isOpen:t,onClose:e,entityType:n,entityLabel:a,currentConfig:i,onConfigUpdated:s})=>{const[o,l]=v.useState([]),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState({key:"",label:"",type:"text",required:!1,formula:""});v.useEffect(()=>{t&&(l(i[n]||[]),p(null),x({key:"",label:"",type:"text",required:!1,formula:""}))},[t,i,n]);const b=T=>T.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),j=()=>{var C;if(!g.label.trim()){p("Column label is required");return}if(g.type==="computed"&&!((C=g.formula)!=null&&C.trim())){p("Formula is required for computed columns");return}const T=b(g.label);if(o.some(E=>E.key===T)){p("A column with this name already exists");return}l([...o,{...g,key:T}]),x({key:"",label:"",type:"text",required:!1,formula:""}),p(null)},S=T=>{l(o.filter(C=>C.key!==T))},_=async()=>{d(!0),p(null);try{const T={...i,[n]:o};if(!(await le("/api/clinics/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_columns_config:T})})).ok)throw new Error("Failed to save custom columns");s(T),e()}catch(T){p(T.message||"Failed to save")}finally{d(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content manage-columns-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsxs("h2",{children:["Manage Custom Columns - ",a]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Lt,{size:18})})]}),f&&r.jsx("div",{className:"error-message",children:f}),r.jsxs("div",{className:"columns-list",children:[r.jsx("h4",{children:"Current Custom Columns"}),o.length===0?r.jsx("p",{className:"no-columns",children:"No custom columns defined yet."}):r.jsx("div",{style:{overflowX:"auto",borderRadius:"6px",border:"1px solid var(--border-color, #e5e7eb)"},children:r.jsxs("table",{className:"columns-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Label"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Details"}),r.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),r.jsx("tbody",{children:o.map(T=>{var C;return r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:500},children:T.label}),r.jsx("td",{children:((C=jB.find(E=>E.value===T.type))==null?void 0:C.label)||T.type}),r.jsx("td",{children:T.type==="computed"?r.jsx("code",{className:"computed-formula",children:T.formula}):r.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:T.required?"Required":"Optional"})}),r.jsx("td",{style:{textAlign:"center"},children:r.jsx("button",{onClick:()=>S(T.key),className:"remove-column-btn",title:"Remove Column",style:{padding:"0.2rem"},children:r.jsx(Wn,{size:14})})})]},T.key)})})]})})]}),r.jsxs("div",{className:"add-column-section",children:[r.jsx("h4",{children:"Add New Column"}),r.jsxs("div",{className:"add-column-form",children:[r.jsx("input",{type:"text",placeholder:"Label (e.g., BMI)",value:g.label,onChange:T=>x({...g,label:T.target.value}),className:"column-input",style:{flex:1.5}}),r.jsx("select",{value:g.type,onChange:T=>x({...g,type:T.target.value}),className:"column-select",children:jB.map(T=>r.jsx("option",{value:T.value,children:T.label},T.value))}),g.type==="computed"?r.jsx("input",{type:"text",placeholder:"Formula (e.g. weight / (height * height))",value:g.formula||"",onChange:T=>x({...g,formula:T.target.value}),className:"column-input",style:{flex:2}}):r.jsxs("label",{className:"required-checkbox",children:[r.jsx("input",{type:"checkbox",checked:g.required,onChange:T=>x({...g,required:T.target.checked})}),r.jsx("span",{style:{fontSize:"0.8rem"},children:"Required"})]}),r.jsxs("button",{onClick:j,className:"add-column-btn",children:[r.jsx(Vn,{size:14})," Add"]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:e,className:"cancel-btn",disabled:c,children:"Cancel"}),r.jsxs("button",{onClick:_,className:"save-btn",disabled:c,children:[r.jsx(cs,{size:16})," ",c?"Saving...":"Save Changes"]})]})]})}):null},BA=15,SD=()=>{const t=Ft(),{customColumnsConfig:e,refetch:n}=oS(),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(!0),[d,f]=v.useState(null),[p,g]=v.useState(""),[x,b]=v.useState(1),[j,S]=v.useState(1),[_,T]=v.useState(0),[C,E]=v.useState("created_at"),k=ds(),P=Z=>{Z&&(k.prefetchQuery({queryKey:Gt.patients.context(Z),queryFn:async()=>{const ge=await le(`/api/patients/${Z}/context`);if(!ge.ok)throw new Error("Failed to fetch patient context");return ge.json()},staleTime:5*60*1e3}),k.prefetchQuery({queryKey:Gt.patientDebts.balance(Z),queryFn:async()=>{const ge=await le(`/api/patient-debts/${Z}/balance`);return ge.ok?ge.json():{netDebt:0}},staleTime:1*60*1e3}),k.prefetchQuery({queryKey:Gt.queue.latest(Z),queryFn:async()=>{const ge=await le(`/api/queue/patient/${Z}/latest`);if(!ge.ok)throw new Error("Failed to fetch latest queue status");const de=await ge.json();return de!=null&&de._id&&k.prefetchQuery({queryKey:Gt.queue.entry(de._id),queryFn:async()=>{const ae=await le(`/api/queue/doctor/complaint/${de._id}`);if(!ae.ok)throw new Error("Failed to fetch complaint record");return ae.json()},staleTime:1*60*1e3}),de},staleTime:5e3}),k.prefetchQuery({queryKey:Gt.dental.records(Z),queryFn:async()=>{const ge=await le(`/api/dental/patient/${Z}`);if(!ge.ok)throw new Error("Failed to fetch dental records");return ge.json()},staleTime:5*60*1e3}))},I=v.useMemo(()=>TO(Z=>P(Z),500),[]);v.useEffect(()=>()=>{I.cancel()},[I]);const[R,z]=v.useState("desc"),[q,F]=v.useState(""),[V,H]=v.useState(!1),[K,W]=v.useState(null),[B,G]=v.useState([]),[ee,X]=v.useState(""),[$,ce]=v.useState(!1),[xe,Y]=v.useState(null),[Re,$e]=v.useState(!0),[ze,Le]=v.useState(null),[oe,Se]=v.useState(p);Yc(),v.useEffect(()=>{const Z=setTimeout(()=>{Se(p),b(1)},500);return()=>{clearTimeout(Z)}},[p]);const Ve=v.useCallback(async()=>{$e(!0),Le(null);try{const Z=await le("/api/subscriptions");if(!Z.ok){let de=`Failed to fetch subscription plans (${Z.status})`;try{de=(await Z.json()).message||de}catch{}throw new Error(de)}const ge=await Z.json();G(ge)}catch(Z){console.error("Error fetching subscription plans:",Z),Le(Z.message||"An unknown error occurred while fetching plans."),G([])}finally{$e(!1)}},[]),Ae=v.useCallback(async(Z,ge,de,ae,ne)=>{c(!0),f(null);try{const ie=new URLSearchParams({page:Z.toString(),limit:BA.toString(),sortBy:de,sortOrder:ae});ge&&ie.append("search",ge),ne&&ie.append("gender",ne);const je=await le(`/api/patients?${ie.toString()}`);if(!je.ok){const Q=await je.json();throw new Error(Q.message||"Failed to fetch patients")}const Ee=await je.json();o(Ee.patients),T(Ee.totalCount),b(Ee.currentPage),S(Ee.totalPages)}catch(ie){console.error("Error fetching patients:",ie),f(`Failed to load patients: ${ie.message}`),o([]),T(0),b(1),S(1)}finally{c(!1)}},[]);v.useEffect(()=>{Ae(x,oe,C,R,q),Ve()},[x,oe,C,R,q,Ae,Ve]);const ue=Z=>{const ge=C===Z&&R==="asc"?"desc":"asc";E(Z),z(ge),b(1)},Te=Z=>{try{return new Date(Z).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},se=()=>{H(!1),W(null),X(""),Y(null),ce(!1)},be=async(Z,ge)=>{o(de=>de.map(ae=>ae.id===Z?{...ae,insurance_type:ge}:ae));try{const de=await le(`/api/patients/${Z}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:ge})});if(!de.ok){const ae=await de.json();throw new Error(ae.message||"Failed to update insurance type")}}catch(de){console.error("Error updating insurance type:",de),Ae(x,oe,C,R,q)}},_e=(Z,ge)=>{const de=new Date(Z),ae=ge.interval||1;switch(ge.period){case"daily":de.setDate(Z.getDate()+ae);break;case"weekly":de.setDate(Z.getDate()+ae*7);break;case"monthly":de.setMonth(Z.getMonth()+ae);break;case"yearly":de.setFullYear(Z.getFullYear()+ae);break;default:console.warn(`Unknown subscription period: ${ge.period}. Defaulting to 1 month.`),de.setMonth(Z.getMonth()+1)}return de},Ne=async()=>{if(!K||!ee){Y("Please select a subscription plan.");return}const Z=B.find(ge=>ge.id===ee);if(!Z){Y("Selected plan details not found.");return}ce(!0),Y(null);try{const ge=new Date,de=_e(ge,Z),ae={subscription_plan_id:ee,subscription_status:"active",subscription_start_date:ge.toISOString(),subscription_end_date:de.toISOString(),subscription_payment_method:"manual"},ne=await le(`/api/patients/${K.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!ne.ok){const ie=await ne.json();throw new Error(ie.message||"Failed to update patient subscription")}se(),Ae(x,oe,C,R,q)}catch(ge){console.error("Error starting subscription:",ge),Y(`Failed to start subscription: ${ge.message}`)}finally{ce(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("div",{className:"all-patients-header-section",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:16})}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(Jn,{size:28}),"All Patients"]})]}),r.jsxs("div",{className:"controls-container",children:[!Re&&!ze&&B.length>0&&r.jsx("div",{className:"compact-subscriptions",children:B.map(Z=>r.jsxs("span",{className:"plan-chip",title:`${Z.name}: ${Z.price} / ${Z.interval} ${Z.period}${Z.description?" - "+Z.description:""}`,children:[Z.name,": ",Z.price]},Z.id))}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:Z=>g(Z.target.value)}),r.jsx(En,{className:"search-input-icon",size:16})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("div",{className:"filter-select-container",children:[r.jsx(TX,{size:14,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:q,onChange:Z=>F(Z.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Gender"}),r.jsx("option",{value:"M",children:"M"}),r.jsx("option",{value:"F",children:"F"}),r.jsx("option",{value:"O",children:"O"})]})]})}),r.jsxs("button",{onClick:()=>i(!0),className:"action-button",title:"Manage Custom Columns",children:[r.jsx(dd,{size:14})," Columns"]})]})]}),d&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:d})]}),l?r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:50,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:40,height:20})}),r.jsx("th",{children:r.jsx(te,{width:60,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:120,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(Z=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:40,height:20})}),r.jsx("td",{className:"patient-name",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:120,height:20})]})}),r.jsx("td",{children:r.jsx(te,{width:30,height:20})}),r.jsx("td",{children:r.jsx(te,{width:30,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(te,{width:100,height:32})}),r.jsx("td",{children:r.jsx(te,{width:80,height:32,style:{borderRadius:"4px"}})})]},Z))})]})}):s.length===0?r.jsx("div",{className:"empty-state",children:oe?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ue("name"),children:["Name",C==="name"&&(R==="asc"?r.jsx(SI,{size:14,className:"sort-icon"}):r.jsx(NI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ue("created_at"),children:["Registered On",C==="created_at"&&(R==="asc"?r.jsx(SI,{size:14,className:"sort-icon"}):r.jsx(NI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:s.map(Z=>r.jsxs(Ce.Fragment,{children:[r.jsxs("tr",{className:"patient-row clickable-row",onClick:()=>t(`/dashboard/edit-complaint/patient/${Z.id}`),onMouseEnter:()=>I(Z.id),children:[r.jsx("td",{children:Z.token??"-"}),r.jsx("td",{className:"patient-name",children:Z.name}),r.jsx("td",{children:Z.age??"-"}),r.jsx("td",{children:Z.gender??"-"}),r.jsx("td",{children:Z.phone??"-"}),r.jsx("td",{children:Z.address??"-"}),r.jsx("td",{children:Te(Z.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${Z.subscription_status==="active"?"active":Z.subscription_status==="cancelled"||Z.subscription_status==="expired"?"inactive":"none"}`,children:Z.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:Z.insurance_type,onClick:ge=>ge.stopPropagation(),onChange:ge=>be(Z.id,ge.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:ge=>{ge.stopPropagation(),t(`/start-subscription/${Z.id}`)},className:"action-button",children:"Start Sub"})})]}),e.patients&&e.patients.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:10,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:e.patients.map(ge=>{var de;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[ge.label,":"]})," ",(de=Z.custom_fields)!=null&&de[ge.key]?String(Z.custom_fields[ge.key]):"-"]},ge.key)})})})})]},Z.id))})]})}),j>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(x-1)*BA+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(x*BA,_)})," ","of"," ",r.jsx("span",{className:"font-medium",children:_})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>b(Z=>Math.max(Z-1,1)),disabled:x===1||l,className:"pagination-button",children:[r.jsx(Ab,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:x})," of ",r.jsx("span",{className:"font-medium",children:j})]}),r.jsxs("button",{onClick:()=>b(Z=>Math.min(Z+1,j)),disabled:x===j||l,className:"pagination-button",children:["Next",r.jsx(pd,{size:16,className:"next-icon"})]})]})]})]}),V&&K&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",K.name]}),r.jsx("button",{onClick:se,className:"subscription-modal-close-button",children:r.jsx(Lt,{size:24})})]}),xe&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:xe})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:ee,onChange:Z=>X(Z.target.value),className:"form-select",disabled:$||Re||ze!==null||B.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),Re?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):ze?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):B.length>0?B.map(Z=>r.jsxs("option",{value:Z.id,children:[Z.name," - ",Z.price," (",Z.interval," ",Z.period,Z.interval>1?"s":"",")"]},Z.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),ze&&r.jsx("p",{className:"error-message",children:ze}),B.length===0&&!Re&&!ze&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:se,disabled:$,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:Ne,disabled:!ee||$,className:"subscription-modal-button submit",children:$?"Starting...":"Start Subscription"})]})]})}),r.jsx(IM,{isOpen:a,onClose:()=>i(!1),entityType:"patients",entityLabel:"Patients",currentConfig:e,onConfigUpdated:()=>{n()}})]})},rG=()=>{const t=Ft(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(!1),[d,f]=v.useState(!1),p=/^\+?[0-9\s\-().]{7,20}$/,g=v.useMemo(()=>$l(async _=>{if(_.trim().length<2){i([]),o(!1);return}o(!0);try{const T=new URLSearchParams({search:encodeURIComponent(_),page:"1",limit:"8",sortBy:"name",sortOrder:"asc"}),C=await le(`/api/patients?${T.toString()}`);if(!C.ok)throw new Error("Failed to search");const E=await C.json();i(E.patients)}catch{i([])}finally{o(!1)}},300),[]),x=_=>{const T=_.target.value;n(T),c(p.test(T)),o(!0),f(!0),g(T)},b=v.useCallback(_=>{t("/billing",{state:{patientId:_.id,patientName:_.name}})},[t]),j=v.useCallback(async()=>{if(!(!e||!l)){o(!0);try{const T=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Direct Patient",phone:e,age:null,gender:null,token:null})});if(!T.ok)throw new Error("Failed to create patient");const C=await T.json();b(C)}catch(_){alert(`Error: ${_.message}`)}finally{o(!1)}}},[e,l,b]),S=_=>_.slice(0,1).toUpperCase();return r.jsxs("div",{className:"ccb-container",children:[r.jsxs("div",{className:"ccb-header-section",children:[r.jsx("button",{onClick:()=>t(-1),className:"ccb-back-button",title:"Go Back",children:r.jsx(sn,{size:24})}),r.jsx("h1",{className:"ccb-title",children:"Create Custom Bill"}),r.jsx("p",{className:"ccb-subtitle",children:"Search for a patient to bill manually, or create a new one instantly."})]}),r.jsxs("div",{className:"ccb-search-wrapper",children:[r.jsx(En,{className:"ccb-search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by Name, Phone, or Token...",value:e,onChange:x,onFocus:()=>f(!0),className:"ccb-search-input",autoFocus:!0}),e&&r.jsx("div",{className:"ccb-clear-icon",onClick:()=>{n(""),i([]),f(!1)},children:r.jsx(Lt,{size:18})}),r.jsxs("div",{className:`ccb-results-dropdown ${d&&(a.length>0||s||e.length>2&&a.length===0)?"open":""}`,children:[s&&r.jsx("div",{className:"p-4 flex justify-center items-center",children:r.jsx("div",{className:"ccb-spinner"})}),!s&&a.map(_=>r.jsxs("div",{onClick:()=>b(_),className:"ccb-result-item",children:[r.jsxs("div",{className:"ccb-patient-info",children:[r.jsx("div",{className:"ccb-avatar",children:S(_.name)}),r.jsxs("div",{className:"ccb-patient-details",children:[r.jsx("h4",{children:_.name}),r.jsxs("p",{className:"ccb-patient-meta",children:[_.phone||"No phone","  ",_.gender||"-","  ",_.age?`${_.age}y`:"-"]})]})]}),r.jsxs("span",{className:"ccb-token-badge",children:["#",_.token]})]},_.id)),!s&&a.length===0&&e.length>2&&r.jsxs("div",{className:"ccb-create-action",children:[r.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No patients found."}),l&&r.jsxs("button",{onClick:j,className:"ccb-create-btn w-full",children:["Create Patient with Phone ",e]})]})]})]})]})},aG=({currentUser:t})=>{const e=Ft(),n=ds(),[a,i]=v.useState("select_patient"),[s,o]=v.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=v.useState(null),[d,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(""),[j,S]=v.useState([]),[_,T]=v.useState(""),[C,E]=v.useState([]),[k,P]=v.useState(!1),[I,R]=v.useState(null),[z,q]=v.useState(null),[F,V]=v.useState(null),[H,K]=v.useState(!1),[W,B]=v.useState(!1),[G,ee]=v.useState(!1),X=/^\+?[0-9\s\-().]{7,20}$/,$=/^[a-zA-Z\s'-]{2,}$/,ce=v.useCallback(async()=>{if(!(d.length>0)){K(!0),V(null);try{const se=await le("/api/lab-tests");if(!se.ok)throw new Error("Failed to fetch lab tests");const be=await se.json();f(be)}catch(se){console.error("Failed to fetch available lab tests:",se),V("Could not load lab test list: "+se.message),f([])}finally{K(!1)}}},[d.length]),xe=se=>{se&&(n.prefetchQuery({queryKey:Gt.patients.context(se),queryFn:async()=>{const be=await le(`/api/patients/${se}/context`);if(!be.ok)throw new Error("Failed to fetch patient context");return be.json()},staleTime:1e3*60*5}),n.prefetchQuery({queryKey:Gt.patientDebts.balance(se),queryFn:async()=>{const be=await le(`/api/patient-debts/${se}/balance`);if(!be.ok)throw new Error("Failed to fetch patient debt");return be.json()},staleTime:1e3*60}),n.prefetchQuery({queryKey:Gt.queue.latest(se),queryFn:async()=>{const be=await le(`/api/queue/patient/${se}/latest`);if(!be.ok){if(be.status===404)return null;throw new Error("Failed to fetch queue status")}return be.json()},staleTime:1e3*5}))},Y=v.useMemo(()=>new co(d,{keys:["name","description"],threshold:.3,ignoreLocation:!0}),[d]);v.useEffect(()=>{if(!x){S([]);return}const se=Y.search(x).map(be=>be.item);S(se.slice(0,10))},[x,Y]);const Re=v.useCallback(se=>{const be={id:se.id,name:se.name,token:se.token,age:se.age,gender:se.gender,phone:se.phone};c(be),i("create_order"),g([]),b(""),S([]),V(null),ce()},[ce]),$e=v.useMemo(()=>$l(async se=>{if(se.trim().length<2){E([]),P(!1),R(null);return}P(!0),R(null);try{const be=new URLSearchParams({search:encodeURIComponent(se),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),_e=await le(`/api/patients?${be.toString()}`);if(!_e.ok){const Z=await _e.text();throw new Error(`API Error (${_e.status}): ${Z||_e.statusText}`)}const Ne=await _e.json();E(Ne.patients)}catch(be){console.error("Error searching lab patients:",be),R(be.message||"Failed to search lab patients."),E([])}finally{P(!1)}},300),[X,$]),ze=se=>{const be=se.target.value;T(be),B(X.test(be)),ee($.test(be)&&!X.test(be)),P(!0),$e(be)},Le=v.useCallback(async se=>{if(!_||se==="phone"&&!W||se==="name"&&!G){R(`Invalid ${se} to create a new patient.`);return}P(!0),R(null);try{const _e=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:se==="name"?_:"direct lab",phone:se==="phone"?_:null,age:null,gender:null,token:null})});if(!_e.ok){const Z=await _e.json();throw new Error(Z.message||`Failed to create patient: ${_e.statusText}`)}const Ne=await _e.json();alert(`New patient "${Ne.name}" created with ${se==="phone"?`phone ${Ne.phone}`:`name ${Ne.name}`}.`),Re({id:Ne.id,name:Ne.name,token:Ne.token??null,age:Ne.age??null,gender:Ne.gender??null,phone:Ne.phone})}catch(be){console.error("Error creating new patient:",be),R(be.message||"Failed to create new patient.")}finally{P(!1)}},[_,W,G,Re]),oe=()=>{i("select_patient"),c(null),T(""),E([]),R(null)},Se=se=>{const{name:be,value:_e}=se.target;o(Ne=>({...Ne,[be]:be==="age"?_e?parseInt(_e,10):void 0:_e}))},Ve=async se=>{if(se.preventDefault(),q(null),!s.name){q("Patient Name is required.");return}const be={name:s.name,age:s.age,gender:s.gender,phone:s.phone,address:s.address};try{const _e=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});if(!_e.ok){const Z=await _e.json();throw new Error(Z.message||`Failed to create patient: ${_e.statusText}`)}const Ne=await _e.json();Re({id:Ne.id,name:Ne.name,token:Ne.token??null,age:Ne.age??null,gender:Ne.gender??null,phone:Ne.phone})}catch(_e){console.error("Failed to create patient:",_e),q(_e.message||"Failed to create patient. Please try again.")}},Ae=se=>{if(p.some(be=>be.id===se.id)){V(`${se.name} is already in the order.`),setTimeout(()=>V(null),3e3),b(""),S([]);return}g(be=>[...be,{...se}]),b(""),S([])},ue=se=>{g(be=>be.filter(_e=>_e.id!==se))},Te=async se=>{if(se.preventDefault(),V(null),!l){V("No patient selected.");return}if(p.length===0){V("No lab tests selected.");return}const be={patient_id:l.id,tests:p.map(_e=>({id:_e.id,name:_e.name,price:_e.price}))};console.log("Submitting Lab Order:",be);try{const _e=await le("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});if(!_e.ok){const ge=await _e.json();throw console.error("API Error Data:",ge),new Error(ge.message||`Failed to create lab order: ${_e.statusText}`)}const Ne=await _e.json();console.log("Lab Order Creation Result:",Ne);let Z=l.queueId;if(!Z){const ge=await le(`/api/queue/patient/${l.id}/latest`);if(ge.ok){const de=await ge.json();de!=null&&de._id&&(Z=de._id)}}if(!Z){const ge=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!ge.ok){const ae=await ge.text();throw new Error(`Failed to create queue entry for redirection: ${ae||ge.statusText}`)}const de=await ge.json();if(de!=null&&de.id)Z=de.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}(t==null?void 0:t.role)==="lab"?e("/dashboard"):e(`/dashboard/edit-complaint/${Z}`)}catch(_e){console.error("Failed to create lab order:",_e),V(_e.message||"Failed to create lab order.")}};return v.useEffect(()=>{ce()},[ce]),r.jsxs("div",{className:"create-lab-order-container",children:[r.jsxs("div",{className:"create-lab-order-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button","aria-label":"Go back",children:r.jsx(sn,{size:20})}),r.jsx("h1",{className:"create-lab-order-title",children:"Create New Lab Order"}),r.jsx("div",{style:{width:"64px"}})," "]}),(a==="select_patient"||a==="create_patient")&&r.jsxs("div",{className:"glass-card",children:[a==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"header-with-action",children:r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Select Patient"})}),r.jsxs("div",{className:"search-container",children:[r.jsx(En,{className:"search-icon",size:20}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No...",value:_,onChange:ze,className:"modern-input",autoFocus:!0,autoComplete:"off"}),k&&r.jsx("div",{style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(te,{width:80,height:14})})]}),k&&r.jsx("ul",{className:"patient-list",children:[1,2,3].map(se=>r.jsxs("li",{className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx(te,{width:120,height:20}),r.jsx(te,{width:50,height:24,style:{borderRadius:"12px"}})]}),r.jsx("div",{className:"patient-details",children:r.jsx(te,{width:200,height:16})})]},se))}),I&&r.jsxs("div",{className:"error-message",children:[r.jsx(Br,{size:18}),I]}),C.length>0&&r.jsx("ul",{className:"patient-list",children:C.map(se=>r.jsxs("li",{onClick:()=>Re(se),onMouseEnter:()=>xe(se.id),className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("strong",{children:se.name}),r.jsxs("span",{className:"token-badge",children:["#",se.token||"N/A"]})]}),r.jsxs("div",{className:"patient-details",children:[se.age?`${se.age} yrs`:"",se.gender?` / ${se.gender}`:"",se.phone?`  ${se.phone}`:""]})]},se.id))}),_.length>=2&&!k&&C.length===0&&!I&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{className:"no-data-message",style:{background:"none",border:"none",padding:0},children:['No patients found matching "',_,'".']}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},children:[W&&r.jsxs("button",{type:"button",onClick:()=>Le("phone"),className:"secondary-button",children:['Create "Direct Lab" Patient (Phone: ',_,")"]}),G&&r.jsxs("button",{type:"button",onClick:()=>Le("name"),className:"secondary-button",children:["Create Patient (Name: ",_,")"]})]})]}),_.length<2&&!k&&r.jsx("div",{className:"info-message",children:"Start typing to search for a patient..."})]}),a==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"New Patient Registration"}),r.jsx("button",{onClick:oe,className:"text-button",children:" Back to Search "})]}),z&&r.jsxs("div",{className:"error-message",children:[r.jsx(Br,{size:18}),z]}),r.jsxs("form",{onSubmit:Ve,children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-name",className:"form-label",children:"Patient Name *"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Jn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:s.name,onChange:Se,className:"modern-input",placeholder:"Enter full name"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:s.age??"",onChange:Se,className:"modern-input",style:{paddingLeft:"16px"},placeholder:"e.g. 30"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:s.gender??"",onChange:Se,className:"modern-input",style:{paddingLeft:"16px"},children:[r.jsx("option",{value:"",children:"Select Gender..."}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-phone",className:"form-label",children:"Phone Number"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(rg,{className:"search-icon",size:18}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:s.phone||"",onChange:Se,className:"modern-input",placeholder:"e.g. 9876543210"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-address",className:"form-label",children:"Address"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Kz,{className:"search-icon",size:18,style:{top:"20px"}}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:s.address||"",onChange:Se,className:"modern-input",style:{resize:"none"},placeholder:"Enter address (optional)"})]})]})]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:oe,className:"secondary-button",children:" Cancel "}),r.jsxs("button",{type:"submit",className:"primary-button",children:[r.jsx(Vn,{size:18}),"Create & Proceed"]})]})]})]})]}),a==="create_order"&&l&&r.jsxs("div",{className:"glass-card",children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Create Lab Order"}),r.jsx("button",{onClick:oe,className:"text-button",children:" Change Patient "})]}),r.jsxs("div",{className:"patient-summary",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Jn,{size:20,className:"highlight-primary"}),r.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:l.name})]}),r.jsxs("div",{className:"patient-details",style:{marginLeft:"30px",marginTop:"4px"},children:[l.age?`${l.age} yrs`:"Age N/A",l.gender&&`  ${l.gender}`,l.phone&&`  ${l.phone}`]})]}),F&&r.jsxs("div",{className:"error-message",children:[r.jsx(Br,{size:18}),F]}),r.jsxs("form",{onSubmit:Te,children:[r.jsxs("div",{className:"form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",className:"form-label",children:"Add Lab Test"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[H?r.jsx("div",{style:{position:"absolute",right:"45px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(te,{width:24,height:24,variant:"circular"})}):r.jsx(En,{className:"search-icon",size:18}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search tests (e.g. CBC, Lipid Profile)...",value:x,onChange:se=>b(se.target.value),className:"modern-input",disabled:H,autoComplete:"off"}),H&&x&&r.jsx("div",{className:"search-results-dropdown",children:[1,2,3].map(se=>r.jsxs("div",{className:"search-result-item",children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"20%",height:20})]},se))}),x&&j.length>0&&r.jsx("div",{className:"search-results-dropdown",children:j.map(se=>r.jsxs("div",{onClick:()=>Ae(se),className:"search-result-item",children:[r.jsx("span",{style:{fontWeight:500},children:se.name}),r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(se.price).toFixed(2)]})]},se.id))}),x&&j.length===0&&!H&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px",padding:"10px",fontSize:"0.9rem"},children:['No tests found matching "',x,'".']})]})]}),r.jsxs("div",{style:{marginTop:"30px"},children:[r.jsxs("h4",{className:"card-title",style:{fontSize:"1.1rem"},children:["Selected Tests (",p.length,")"]}),p.length===0?r.jsx("div",{className:"info-message",children:"No tests added yet. Search above to add tests."}):r.jsx("div",{className:"selected-tests-list",children:p.map(se=>r.jsxs("div",{className:"selected-test-item",children:[r.jsx("div",{style:{flex:1},children:r.jsx("div",{style:{fontWeight:500},children:se.name})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(se.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ue(se.id),className:"remove-button",title:"Remove Test",children:r.jsx(Wn,{size:18})})]})]},se.id))})]}),p.length>0&&r.jsxs("div",{className:"total-price",children:["Total: ",p.reduce((se,be)=>se+parseFloat(be.price),0).toFixed(2)]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:oe,className:"secondary-button",children:" Cancel Order "}),r.jsxs("button",{type:"submit",disabled:p.length===0,className:"primary-button",children:[r.jsx(CE,{size:18}),"Create Lab Order"]})]})]})]})]})},iG=({patient:t,onClose:e,onSave:n})=>{const[a,i]=v.useState({name:t.name,age:t.age,gender:t.gender,phone:t.phone||""}),[s,o]=v.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{await n({...a,phone:a.phone||void 0}),e()}catch(d){console.error(d),alert("Failed to update patient")}finally{o(!1)}};return r.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:r.jsxs("div",{className:"modal-content",style:{backgroundColor:"var(--surface-color, white)",padding:"1.25rem",borderRadius:"var(--radius-lg, 12px)",width:"380px",maxWidth:"90%",boxShadow:"var(--shadow-lg, 0 10px 25px rgba(0,0,0,0.15))",border:"1px solid var(--border-color, #e2e8f0)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border-color, #e2e8f0)",marginBottom:"1rem"},children:[r.jsx("h3",{style:{margin:0,fontSize:"1.15rem",fontWeight:700,color:"var(--text-color, #333)"},children:"Edit Patient"}),r.jsx("button",{onClick:e,style:{border:"none",background:"none",cursor:"pointer",color:"var(--text-secondary, #666)",padding:"4px"},children:r.jsx(Lt,{size:18})})]}),r.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Full Name"}),r.jsx("input",{type:"text",value:a.name,onChange:c=>i({...a,name:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"},required:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Age"}),r.jsx("input",{type:"number",value:a.age||"",onChange:c=>i({...a,age:parseInt(c.target.value)||0}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Gender"}),r.jsxs("select",{value:a.gender||"",onChange:c=>i({...a,gender:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)",background:"white"},children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Phone Number"}),r.jsx("input",{type:"tel",value:a.phone,onChange:c=>i({...a,phone:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"},placeholder:"Optional"})]}),r.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--border-color, #e2e8f0)",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:e,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)",background:"none",fontSize:"0.9rem",cursor:"pointer"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"save-btn",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:"var(--primary-color, #3b82f6)",color:"white",fontSize:"0.9rem",fontWeight:500,display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},disabled:s,children:s?"Saving...":r.jsxs(r.Fragment,{children:[r.jsx(cs,{size:16})," Save Details"]})})]})]})]})})},wB=[{value:"general",label:"General"},{value:"diagnostic",label:"Diagnostic"},{value:"treatment",label:"Treatment"},{value:"minor_surgery",label:"Minor Surgery"}],mOe=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,category:"general"});v.useEffect(()=>{b()},[]);const b=async()=>{s(!0);try{const C=await le("/api/medical/procedures");if(C.ok){const E=await C.json();a(E)}}catch(C){console.error(C)}finally{s(!1)}},j=async()=>{if(!(!g.name||!g.cost))try{(await le("/api/medical/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,category:"general"}),b(),e())}catch(C){console.error(C)}},S=async C=>{try{(await le(`/api/medical/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),d({}),b(),e())}catch(E){console.error(E)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await le(`/api/medical/procedures/${C}`,{method:"DELETE"})).ok&&(b(),e())}catch(E){console.error(E)}},T=C=>{l(C.id),d({name:C.name,cost:C.cost,category:C.category})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Medical Procedures"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await le("/api/medical/procedures/import-defaults",{method:"POST"}),b(),e()}catch(C){console.error(C)}},className:"btn-secondary btn-compact",children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Lt,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{className:"p-20 text-center",children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"w-40",children:"Name"}),r.jsx("th",{className:"w-20",children:"Category"}),r.jsx("th",{className:"w-20",children:"Cost ()"}),r.jsx("th",{className:"w-20",children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"text-center p-20 text-muted",children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:E=>d({...c,name:E.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsx("select",{className:"edit-select",value:c.category||"general",onChange:E=>d({...c,category:E.target.value}),children:wB.map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:E=>d({...c,cost:parseFloat(E.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>S(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(cs,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Lt,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.category}`,children:C.category.replace("_"," ")})}),r.jsxs("td",{className:"fw-500",children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(ao,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Wn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:C=>x({...g,name:C.target.value})}),r.jsx("select",{className:"form-select",value:g.category||"general",onChange:C=>x({...g,category:C.target.value}),children:wB.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:C=>x({...g,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:j,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Vn,{size:18})," Add New Procedure"]})})]})})};var gOe=Object.defineProperty,MN=Object.getOwnPropertySymbols,sG=Object.prototype.hasOwnProperty,oG=Object.prototype.propertyIsEnumerable,NB=(t,e,n)=>e in t?gOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_D=(t,e)=>{for(var n in e||(e={}))sG.call(e,n)&&NB(t,n,e[n]);if(MN)for(var n of MN(e))oG.call(e,n)&&NB(t,n,e[n]);return t},CD=(t,e)=>{var n={};for(var a in t)sG.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&MN)for(var a of MN(t))e.indexOf(a)<0&&oG.call(t,a)&&(n[a]=t[a]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Of;(t=>{const e=class On{constructor(c,d,f,p){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<On.MIN_VERSION||c>On.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let g=[];for(let b=0;b<this.size;b++)g.push(!1);for(let b=0;b<this.size;b++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(f);if(this.drawCodewords(x),p==-1){let b=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const S=this.getPenaltyScore();S<b&&(p=j,b=S),this.applyMask(j)}}i(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,d){const f=t.QrSegment.makeSegments(c);return On.encodeSegments(f,d)}static encodeBinary(c,d){const f=t.QrSegment.makeBytes(c);return On.encodeSegments([f],d)}static encodeSegments(c,d,f=1,p=40,g=-1,x=!0){if(!(On.MIN_VERSION<=f&&f<=p&&p<=On.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let b,j;for(b=f;;b++){const C=On.getNumDataCodewords(b,d)*8,E=o.getTotalBits(c,b);if(E<=C){j=E;break}if(b>=p)throw new RangeError("Data too long")}for(const C of[On.Ecc.MEDIUM,On.Ecc.QUARTILE,On.Ecc.HIGH])x&&j<=On.getNumDataCodewords(b,C)*8&&(d=C);let S=[];for(const C of c){n(C.mode.modeBits,4,S),n(C.numChars,C.mode.numCharCountBits(b),S);for(const E of C.getData())S.push(E)}i(S.length==j);const _=On.getNumDataCodewords(b,d)*8;i(S.length<=_),n(0,Math.min(4,_-S.length),S),n(0,(8-S.length%8)%8,S),i(S.length%8==0);for(let C=236;S.length<_;C^=253)n(C,8,S);let T=[];for(;T.length*8<S.length;)T.push(0);return S.forEach((C,E)=>T[E>>>3]|=C<<7-(E&7)),new On(b,d,T,g)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let f=0;f<d;f++)for(let p=0;p<d;p++)f==0&&p==0||f==0&&p==d-1||f==d-1&&p==0||this.drawAlignmentPattern(c[f],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let f=d;for(let g=0;g<10;g++)f=f<<1^(f>>>9)*1335;const p=(d<<10|f)^21522;i(p>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,a(p,g));this.setFunctionModule(8,7,a(p,6)),this.setFunctionModule(8,8,a(p,7)),this.setFunctionModule(7,8,a(p,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,a(p,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,a(p,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,a(p,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let f=0;f<12;f++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;i(d>>>18==0);for(let f=0;f<18;f++){const p=a(d,f),g=this.size-11+f%3,x=Math.floor(f/3);this.setFunctionModule(g,x,p),this.setFunctionModule(x,g,p)}}drawFinderPattern(c,d){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const g=Math.max(Math.abs(p),Math.abs(f)),x=c+p,b=d+f;0<=x&&x<this.size&&0<=b&&b<this.size&&this.setFunctionModule(x,b,g!=2&&g!=4)}}drawAlignmentPattern(c,d){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,d+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(c,d,f){this.modules[d][c]=f,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,f=this.errorCorrectionLevel;if(c.length!=On.getNumDataCodewords(d,f))throw new RangeError("Invalid argument");const p=On.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][d],g=On.ECC_CODEWORDS_PER_BLOCK[f.ordinal][d],x=Math.floor(On.getNumRawDataModules(d)/8),b=p-x%p,j=Math.floor(x/p);let S=[];const _=On.reedSolomonComputeDivisor(g);for(let C=0,E=0;C<p;C++){let k=c.slice(E,E+j-g+(C<b?0:1));E+=k.length;const P=On.reedSolomonComputeRemainder(k,_);C<b&&k.push(0),S.push(k.concat(P))}let T=[];for(let C=0;C<S[0].length;C++)S.forEach((E,k)=>{(C!=j-g||k>=b)&&T.push(E[C])});return i(T.length==x),T}drawCodewords(c){if(c.length!=Math.floor(On.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let g=0;g<2;g++){const x=f-g,j=(f+1&2)==0?this.size-1-p:p;!this.isFunction[j][x]&&d<c.length*8&&(this.modules[j][x]=a(c[d>>>3],7-(d&7)),d++)}}i(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let f=0;f<this.size;f++){let p;switch(c){case 0:p=(f+d)%2==0;break;case 1:p=d%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+d)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(d/2))%2==0;break;case 5:p=f*d%2+f*d%3==0;break;case 6:p=(f*d%2+f*d%3)%2==0;break;case 7:p=((f+d)%2+f*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][f]&&p&&(this.modules[d][f]=!this.modules[d][f])}}getPenaltyScore(){let c=0;for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[g][S]==x?(b++,b==5?c+=On.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*On.PENALTY_N3),x=this.modules[g][S],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*On.PENALTY_N3}for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][g]==x?(b++,b==5?c+=On.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*On.PENALTY_N3),x=this.modules[S][g],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*On.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let x=0;x<this.size-1;x++){const b=this.modules[g][x];b==this.modules[g][x+1]&&b==this.modules[g+1][x]&&b==this.modules[g+1][x+1]&&(c+=On.PENALTY_N2)}let d=0;for(const g of this.modules)d=g.reduce((x,b)=>x+(b?1:0),d);const f=this.size*this.size,p=Math.ceil(Math.abs(d*20-f*10)/f)-1;return i(0<=p&&p<=9),c+=p*On.PENALTY_N4,i(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let f=[6];for(let p=this.size-7;f.length<c;p-=d)f.splice(1,0,p);return f}}static getNumRawDataModules(c){if(c<On.MIN_VERSION||c>On.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const f=Math.floor(c/7)+2;d-=(25*f-10)*f-55,c>=7&&(d-=36)}return i(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(On.getNumRawDataModules(c)/8)-On.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*On.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let p=0;p<c-1;p++)d.push(0);d.push(1);let f=1;for(let p=0;p<c;p++){for(let g=0;g<d.length;g++)d[g]=On.reedSolomonMultiply(d[g],f),g+1<d.length&&(d[g]^=d[g+1]);f=On.reedSolomonMultiply(f,2)}return d}static reedSolomonComputeRemainder(c,d){let f=d.map(p=>0);for(const p of c){const g=p^f.shift();f.push(0),d.forEach((x,b)=>f[b]^=On.reedSolomonMultiply(x,g))}return f}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(d>>>p&1)*c;return i(f>>>8==0),f}finderPenaltyCountPatterns(c){const d=c[1];i(d<=this.size*3);const f=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(f&&c[0]>=d*4&&c[6]>=d?1:0)+(f&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,f){return c&&(this.finderPenaltyAddHistory(d,f),d=0),d+=this.size,this.finderPenaltyAddHistory(d,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let f=c-1;f>=0;f--)d.push(l>>>f&1)}function a(l,c){return(l>>>c&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const s=class ea{constructor(c,d,f){if(this.mode=c,this.numChars=d,this.bitData=f,d<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(c){let d=[];for(const f of c)n(f,8,d);return new ea(ea.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!ea.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let f=0;f<c.length;){const p=Math.min(c.length-f,3);n(parseInt(c.substring(f,f+p),10),p*3+1,d),f+=p}return new ea(ea.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!ea.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],f;for(f=0;f+2<=c.length;f+=2){let p=ea.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f))*45;p+=ea.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f+1)),n(p,11,d)}return f<c.length&&n(ea.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f)),6,d),new ea(ea.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:ea.isNumeric(c)?[ea.makeNumeric(c)]:ea.isAlphanumeric(c)?[ea.makeAlphanumeric(c)]:[ea.makeBytes(ea.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new ea(ea.Mode.ECI,0,d)}static isNumeric(c){return ea.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return ea.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let f=0;for(const p of c){const g=p.mode.numCharCountBits(d);if(p.numChars>=1<<g)return 1/0;f+=4+g+p.bitData.length}return f}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let f=0;f<c.length;f++)c.charAt(f)!="%"?d.push(c.charCodeAt(f)):(d.push(parseInt(c.substring(f+1,f+3),16)),f+=2);return d}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})(Of||(Of={}));(t=>{(e=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Of||(Of={}));(t=>{(e=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Of||(Of={}));var Rm=Of;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var yOe={L:Rm.QrCode.Ecc.LOW,M:Rm.QrCode.Ecc.MEDIUM,Q:Rm.QrCode.Ecc.QUARTILE,H:Rm.QrCode.Ecc.HIGH},lG=128,cG="L",uG="#FFFFFF",dG="#000000",hG=!1,fG=1,xOe=4,vOe=0,bOe=.1;function pG(t,e=0){const n=[];return t.forEach(function(a,i){let s=null;a.forEach(function(o,l){if(!o&&s!==null){n.push(`M${s+e} ${i+e}h${l-s}v1H${s+e}z`),s=null;return}if(l===a.length-1){if(!o)return;s===null?n.push(`M${l+e},${i+e} h1v1H${l+e}z`):n.push(`M${s+e},${i+e} h${l+1-s}v1H${s+e}z`);return}o&&s===null&&(s=l)})}),n.join("")}function mG(t,e){return t.slice().map((n,a)=>a<e.y||a>=e.y+e.h?n:n.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function jOe(t,e,n,a){if(a==null)return null;const i=t.length+n*2,s=Math.floor(e*bOe),o=i/e,l=(a.width||s)*o,c=(a.height||s)*o,d=a.x==null?t.length/2-l/2:a.x*o,f=a.y==null?t.length/2-c/2:a.y*o,p=a.opacity==null?1:a.opacity;let g=null;if(a.excavate){let b=Math.floor(d),j=Math.floor(f),S=Math.ceil(l+d-b),_=Math.ceil(c+f-j);g={x:b,y:j,w:S,h:_}}const x=a.crossOrigin;return{x:d,y:f,h:c,w:l,excavation:g,opacity:p,crossOrigin:x}}function wOe(t,e){return e!=null?Math.max(Math.floor(e),0):t?xOe:vOe}function gG({value:t,level:e,minVersion:n,includeMargin:a,marginSize:i,imageSettings:s,size:o,boostLevel:l}){let c=Ce.useMemo(()=>{const b=(Array.isArray(t)?t:[t]).reduce((j,S)=>(j.push(...Rm.QrSegment.makeSegments(S)),j),[]);return Rm.QrCode.encodeSegments(b,yOe[e],n,void 0,void 0,l)},[t,e,n,l]);const{cells:d,margin:f,numCells:p,calculatedImageSettings:g}=Ce.useMemo(()=>{let x=c.getModules();const b=wOe(a,i),j=x.length+b*2,S=jOe(x,o,b,s);return{cells:x,margin:b,numCells:j,calculatedImageSettings:S}},[c,o,s,a,i]);return{qrcode:c,margin:f,cells:d,numCells:p,calculatedImageSettings:g}}var NOe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Fa=Ce.forwardRef(function(e,n){const a=e,{value:i,size:s=lG,level:o=cG,bgColor:l=uG,fgColor:c=dG,includeMargin:d=hG,minVersion:f=fG,boostLevel:p,marginSize:g,imageSettings:x}=a,j=CD(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=j,_=CD(j,["style"]),T=x==null?void 0:x.src,C=Ce.useRef(null),E=Ce.useRef(null),k=Ce.useCallback(K=>{C.current=K,typeof n=="function"?n(K):n&&(n.current=K)},[n]),[P,I]=Ce.useState(!1),{margin:R,cells:z,numCells:q,calculatedImageSettings:F}=gG({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:g,imageSettings:x,size:s});Ce.useEffect(()=>{if(C.current!=null){const K=C.current,W=K.getContext("2d");if(!W)return;let B=z;const G=E.current,ee=F!=null&&G!==null&&G.complete&&G.naturalHeight!==0&&G.naturalWidth!==0;ee&&F.excavation!=null&&(B=mG(z,F.excavation));const X=window.devicePixelRatio||1;K.height=K.width=s*X;const $=s/q*X;W.scale($,$),W.fillStyle=l,W.fillRect(0,0,q,q),W.fillStyle=c,NOe?W.fill(new Path2D(pG(B,R))):z.forEach(function(ce,xe){ce.forEach(function(Y,Re){Y&&W.fillRect(Re+R,xe+R,1,1)})}),F&&(W.globalAlpha=F.opacity),ee&&W.drawImage(G,F.x+R,F.y+R,F.w,F.h)}}),Ce.useEffect(()=>{I(!1)},[T]);const V=_D({height:s,width:s},S);let H=null;return T!=null&&(H=Ce.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{I(!0)},ref:E,crossOrigin:F==null?void 0:F.crossOrigin})),Ce.createElement(Ce.Fragment,null,Ce.createElement("canvas",_D({style:V,height:s,width:s,ref:k,role:"img"},_)),H)});Fa.displayName="QRCodeCanvas";var SOe=Ce.forwardRef(function(e,n){const a=e,{value:i,size:s=lG,level:o=cG,bgColor:l=uG,fgColor:c=dG,includeMargin:d=hG,minVersion:f=fG,boostLevel:p,title:g,marginSize:x,imageSettings:b}=a,j=CD(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:_,numCells:T,calculatedImageSettings:C}=gG({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:x,imageSettings:b,size:s});let E=_,k=null;b!=null&&C!=null&&(C.excavation!=null&&(E=mG(_,C.excavation)),k=Ce.createElement("image",{href:b.src,height:C.h,width:C.w,x:C.x+S,y:C.y+S,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const P=pG(E,S);return Ce.createElement("svg",_D({height:s,width:s,viewBox:`0 0 ${T} ${T}`,ref:n,role:"img"},j),!!g&&Ce.createElement("title",null,g),Ce.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),Ce.createElement("path",{fill:c,d:P,shapeRendering:"crispEdges"}),k)});SOe.displayName="QRCodeSVG";const _Oe=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var _e,Ne,Z,ge,de,ae,ne;const[i,s]=v.useState(null),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState([]),[b,j]=v.useState("cash"),[S,_]=v.useState(!1),[T,C]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[E,k]=v.useState(0),[P,I]=v.useState(""),[R,z]=v.useState(""),[q,F]=v.useState(""),[V,H]=v.useState(null),[K,W]=v.useState(null),[B,G]=v.useState(!1),ee=()=>{T.length>=5||C(ie=>[...ie,{id:crypto.randomUUID(),method:"cash",amount:0}])},X=ie=>{T.length<=2||C(je=>je.filter(Ee=>Ee.id!==ie))},$=(ie,je,Ee)=>{C(Q=>Q.map(ye=>ye.id===ie?{...ye,[je]:Ee}:ye))},ce=ie=>{const je=T.filter(Q=>Q.id!==ie).reduce((Q,ye)=>Q+ye.amount,0),Ee=Math.max(0,ze-je);$(ie,"amount",Ee)},xe=ie=>{const je=Math.min(100,Math.max(0,ie||0));k(je),x(Ee=>Ee.map(Q=>({...Q,discount_percentage:je})))},Y=(ie,je)=>{const Ee=Math.min(100,Math.max(0,je||0));x(Q=>Q.map((ye,me)=>me===ie?{...ye,discount_percentage:Ee}:ye))},Re=v.useMemo(()=>g.reduce((ie,je)=>ie+(je.price??je.cost??0),0),[g]),$e=v.useMemo(()=>g.reduce((ie,je)=>{const Q=(je.price??je.cost??0)*(je.discount_percentage??0)/100;return ie+Q},0),[g]),ze=Re-$e,Le=v.useMemo(()=>T.reduce((ie,je)=>ie+je.amount,0),[T]),oe=ze-Le,Se=Math.abs(oe)<.01,Ve=v.useMemo(()=>S?T.some(ie=>ie.method==="credit"):b==="credit",[S,T,b]),Ae=async()=>{var ie,je;if(!i)return d("No record data available to bill."),null;if(g.length===0)return d("Cannot bill an empty procedure list."),null;p(!0),d(null);try{const Ee=g.map(Ge=>{const it=Ge.price??Ge.cost??0,wt=it*((Ge.discount_percentage??0)/100),we=it-wt;return{name:Ge.name,price:it,quantity:1,total:we,item_id:Ge.id||`proc_${Date.now()}`,type:"service",discount_percentage:Ge.discount_percentage??0}}),Q=S?((ie=T[0])==null?void 0:ie.method)||"cash":b,ye=S?T.map(Ge=>({method:Ge.method,amount:Ge.amount})):void 0,me={patientId:i.patientId.id,items:Ee,amount:ze,paymentMode:Q,splitPayments:ye,type:"consultation",related_id:i.id,status:"paid",discountPercentage:E},he=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)}),De=await he.json();if(!he.ok||!De.id)throw new Error(De.message||"Failed to create bill.");(await le(`/api/medical/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:De.id})})).ok||console.error("Failed to update medical record status"),s(Ge=>Ge?{...Ge,status:"billed",billId:De.id}:null);const Fe=S?((je=T.find(Ge=>Ge.method==="credit"))==null?void 0:je.amount)||0:b==="credit"?ze:0;if(Fe>0)try{await le(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Fe,related_bill_id:De.id,notes:`Medical Bill #${De.id}${S?" (Split Payment - Credit portion)":""}`})})}catch(Ge){console.error("Failed to create debt entry:",Ge)}return a&&a(),De.id}catch(Ee){return console.error("Billing process failed:",Ee),d(Ee.message||"Failed to create bill."),null}finally{p(!1)}},ue=()=>{window.print()},Te=async()=>{await Ae()&&setTimeout(()=>window.print(),300)},se=async()=>{if(n){l(!0),d(null);try{const ie=await le(`/api/medical/${n}`);if(!ie.ok)throw new Error("Failed to fetch medical record");const je=await ie.json(),Ee=je.Patient||{},Q={id:je.id,patientId:{id:Ee.id||je.patient_id,name:Ee.name||"Unknown",patient_token_number:Ee.patient_token_number,age:Ee.age,gender:Ee.gender},clinicId:je.clinic_id,selectedProcedures:je.selected_procedures||[],status:je.status,billId:je.bill_id,createdAt:je.createdAt||je.date,date:je.date,notes:je.notes};s(Q);const ye=(je.selected_procedures||[]).map(me=>({...me,price:me.cost,discount_percentage:0}));x(ye);try{const me=await le("/api/clinics/settings");if(me.ok){const he=await me.json();I(he.name||""),z(he.address||""),F(he.notes||""),he.upi_id&&H(`upi://pay?pa=${he.upi_id}&pn=${encodeURIComponent(he.name||"Clinic")}&cu=INR`)}}catch(me){console.error("Failed to fetch clinic settings",me)}}catch(ie){d(ie.message||"Failed to load record")}finally{l(!1)}}},be=async()=>{var ie;if((ie=i==null?void 0:i.patientId)!=null&&ie.id){G(!0);try{const je=await le(`/api/patient-debts/patient/${i.patientId.id}/balance`);if(je.ok){const Ee=await je.json();W(Ee.balance||0)}}catch(je){console.error("Failed to fetch patient debt",je)}finally{G(!1)}}};return v.useEffect(()=>{t&&n&&se()},[t,n]),v.useEffect(()=>{var ie;(ie=i==null?void 0:i.patientId)!=null&&ie.id&&be()},[(_e=i==null?void 0:i.patientId)==null?void 0:_e.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Medical Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Lt,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsx("div",{className:"space-y-4 p-5",children:r.jsx(te,{width:100,height:20})})]})})]})})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"MEDICAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:P||"Clinic Name"}),(R||q)&&r.jsxs("div",{className:"clinic-details-print",children:[R&&r.jsx("span",{className:"small-text clinic-address",children:R}),q&&r.jsx("span",{className:"small-text clinic-notes",children:q})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Ne=i.patientId)==null?void 0:Ne.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((Z=i.patientId)==null?void 0:Z.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((ge=i.patientId)==null?void 0:ge.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((de=i.patientId)==null?void 0:de.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(aa,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((ie,je)=>{const Ee=ie.price??ie.cost??0,Q=Ee*(ie.discount_percentage??0)/100,ye=Ee-Q;return r.jsxs("tr",{children:[r.jsx("td",{children:je+1}),r.jsx("td",{children:ie.name}),r.jsx("td",{children:Ee.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ie.discount_percentage===0?"":ie.discount_percentage,onChange:me=>Y(je,parseFloat(me.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:ye.toFixed(2)})]},je)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",E.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",$e.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ze.toFixed(2)]})})]}),V&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(S&&T.some(ie=>ie.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:V,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",$e.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:E===0?"":E,onChange:ie=>xe(parseFloat(ie.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ze.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:V?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:V,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${S?"active":""}`,onClick:()=>_(!S),disabled:f||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:S?"2px solid #4facfe":"1px solid #ddd",background:S?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:S?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:S?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(qo,{size:14}),"Split Pay"]})]}),S?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(qo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",ze.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:T.map((ie,je)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:je+1}),r.jsxs("select",{value:ie.method,onChange:Ee=>$(ie.id,"method",Ee.target.value),className:`split-payment-select ${ie.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:ie.amount===0?"":ie.amount,onChange:Ee=>$(ie.id,"amount",parseFloat(Ee.target.value)||0),placeholder:"0",className:`split-payment-input ${ie.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed"})]}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>ce(ie.id),className:"split-payment-btn split-payment-btn-fill",disabled:f||i.status==="billed",children:"Fill"}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>X(ie.id),className:"split-payment-btn split-payment-btn-remove",disabled:f||i.status==="billed",children:r.jsx(Wn,{size:12})})]},ie.id))}),T.length<5&&r.jsxs("button",{type:"button",onClick:ee,className:"split-payment-add-btn",disabled:f||i.status==="billed",children:[r.jsx(Vn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Le.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(oe)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(oe)<.01?"":oe>0?"":"",Math.abs(oe)<.01?"Balanced":oe>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(oe).toFixed(2)]})]}),!Se&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",ze.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:ie=>j(ie.target.value),className:"payment-mode-select",disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),Ve&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),B?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:K&&K>0?"#dc3545":"#28a745"},children:["",(K||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:S?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(S?((ae=T.find(ie=>ie.method==="credit"))==null?void 0:ae.amount)||0:ze).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((K||0)+(S?((ne=T.find(ie=>ie.method==="credit"))==null?void 0:ne.amount)||0:ze)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ue,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:Te,className:"primary-button",disabled:f||S&&!Se,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Ds,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:ue,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},SB=/^\+?[0-9\s\-().]{7,20}$/,COe=/^[a-zA-Z\s'-]{2,}$/,yG=()=>{const t=Ft(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState([]),[_,T]=v.useState(!0),C=zr();v.useEffect(()=>{C.state&&C.state.patient&&Ae(C.state.patient)},[C.state]);const[E,k]=v.useState([]),[P,I]=v.useState(""),[R,z]=v.useState(!1),[q,F]=v.useState("plan"),[V,H]=v.useState([]),[K,W]=v.useState([]),[B,G]=v.useState(!1),[ee,X]=v.useState(""),[$,ce]=v.useState(!1),[xe,Y]=v.useState(null),[Re,$e]=v.useState(null);v.useEffect(()=>{Le(),ze()},[]);const ze=async()=>{try{const ae=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),ne=await le(`/api/patients?${ae.toString()}`);if(ne.ok){const ie=await ne.json();S(ie.patients||[])}}catch(ae){console.error("Error fetching recent patients",ae)}finally{T(!1)}},Le=async()=>{try{const ae=await le("/api/medical/procedures");if(ae.ok){const ne=await ae.json();W(ne)}}catch(ae){console.error("Error fetching procedures",ae)}};v.useEffect(()=>{(async()=>{if(!l){H([]),$e(null),I(""),k([]);return}try{const ne=await le(`/api/medical/patient/${l.id}`);if(ne.ok){const ie=await ne.json();H(ie);const je=new Date().toDateString(),Ee=ie.find(Q=>Q.status==="draft"&&new Date(Q.date||Q.createdAt||Date.now()).toDateString()===je);Ee?($e(Ee.id),I(Ee.notes||""),k(Ee.selected_procedures.map(Q=>({instanceId:crypto.randomUUID(),procedureId:Q.id,name:Q.name,price:Q.cost,category:Q.category})))):($e(null),I(""),k([]))}}catch(ne){console.error("Error fetching history",ne)}})()},[l]);const oe=v.useMemo(()=>$l(async ae=>{if(!ae.trim()||ae.length<2){i([]),o(!1);return}o(!0);try{const ne=await le(`/api/patients?search=${encodeURIComponent(ae)}&limit=10`);if(ne.ok){const ie=await ne.json();i(ie.patients||[])}}catch(ne){console.error("Search error:",ne)}finally{o(!1)}},300),[]);v.useEffect(()=>{oe(e)},[e,oe]);const Se=ae=>{const ne=ae.target.value;n(ne),g(SB.test(ne)),b(COe.test(ne)&&!SB.test(ne))},Ve=async ae=>{if(!(!e||ae==="phone"&&!p||ae==="name"&&!x)){o(!0);try{const ie=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ae==="name"?e:"direct medical",phone:ae==="phone"?e:null,age:null,gender:null,token:null})});if(ie.ok){const je=await ie.json();Ae({id:je.id,name:je.name,token:je.token??null,age:je.age??null,gender:je.gender??null,phone:je.phone})}else alert("Failed to create patient")}catch(ne){console.error("Error creating patient:",ne),alert("Error creating patient")}finally{o(!1)}}},Ae=ae=>{c(ae),n(""),i([])},ue=()=>{c(null),k([]),I("")},Te=async ae=>{if(!l)return;const ne=await le(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(ne.ok)await ne.json(),c(ie=>ie?{...ie,...ae}:null);else throw new Error("Failed to update")},se=ae=>{const ne={instanceId:crypto.randomUUID(),procedureId:ae.id,name:ae.name,price:ae.cost,category:ae.category};k(ie=>[...ie,ne])},be=ae=>{k(ne=>ne.filter(ie=>ie.instanceId!==ae))},_e=(ae,ne)=>{k(ie=>ie.map(je=>je.instanceId===ae?{...je,price:ne}:je))},Ne=ae=>{const ne=V.find(ie=>ie.id===ae);ne&&($e(ne.id),I(ne.notes||""),k(ne.selected_procedures.map(ie=>({instanceId:crypto.randomUUID(),procedureId:ie.id,name:ie.name,price:ie.cost,category:ie.category}))),F("plan"))},Z=async(ae=!0)=>{var ne;if(l){z(!0);try{const ie=E.map(Q=>({id:Q.procedureId,name:Q.name,cost:Q.price,category:Q.category})),je={patientId:l.id,selectedProcedures:ie,notes:P};let Ee;if(Re?((ne=V.find(ye=>ye.id===Re))==null?void 0:ne.status)==="draft"?Ee=await le(`/api/medical/${Re}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}):Ee=await le("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}):Ee=await le("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}),Ee.ok){const Q=await Ee.json();$e(Q.id);const ye=await le(`/api/medical/patient/${l.id}`);if(ye.ok){const me=await ye.json();H(me)}ae?(Y(Q.id),ce(!0)):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save medical record.")}catch(ie){console.error(ie),alert("Error saving record.")}finally{z(!1)}}},ge=v.useMemo(()=>E.reduce((ae,ne)=>ae+ne.price,0),[E]),de=v.useMemo(()=>{const ae={};return K.filter(ie=>ie.name.toLowerCase().includes(ee.toLowerCase())||ie.category.toLowerCase().includes(ee.toLowerCase())).forEach(ie=>{const je=ie.category||"general";ae[je]||(ae[je]=[]),ae[je].push(ie)}),ae},[K,ee]);return r.jsxs("div",{className:"medical-page-container printable-section",children:[r.jsxs("header",{className:"medical-header no-print",children:[r.jsxs("div",{className:"medical-title-group",children:[r.jsx(jf,{className:"medical-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"medical-title",children:"Medical Procedures"}),r.jsx("p",{className:"medical-subtitle",children:"Create medical procedure records and bills"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(ao,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:ue,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Lt,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(En,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"medical-search-input header-input",value:e,onChange:Se}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(ae=>r.jsxs("div",{onClick:()=>Ae(ae),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:ae.name}),r.jsxs("div",{className:"patient-meta",children:[ae.age," yrs / ",ae.gender,"  ",ae.phone]})]}),r.jsx(Jn,{size:16,color:"var(--mp-text-sec)"})]},ae.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--mp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>Ve(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"medical-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container no-print",children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--mp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"medical-search-input",value:e,onChange:Se}),s&&r.jsx("div",{className:"search-spinner"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(ae=>r.jsxs("div",{onClick:()=>Ae(ae),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:ae.name}),r.jsxs("div",{className:"patient-meta",children:[ae.age," yrs / ",ae.gender,"  ",ae.phone]})]}),r.jsx(Jn,{size:16,color:"var(--mp-text-sec)"})]},ae.id))})]}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown",style:{padding:"16px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--mp-text-sec)",marginBottom:"12px"},children:['No patients found for "',e,'"']}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[p&&r.jsxs("button",{type:"button",onClick:()=>Ve("phone"),className:"create-patient-btn",children:[r.jsx(Vn,{size:16})," Create patient with phone: ",e]}),x&&r.jsxs("button",{type:"button",onClick:()=>Ve("name"),className:"create-patient-btn",children:[r.jsx(Vn,{size:16})," Create patient: ",e]})]})]}),e.length<2&&r.jsxs("div",{className:"recent-patients-section",children:[r.jsx("h3",{children:"Recent Patients"}),_?r.jsx("div",{className:"recent-patients-list",children:[1,2,3].map(ae=>r.jsx("div",{className:"recent-patient-chip skeleton",children:r.jsx(te,{width:100,height:20})},ae))}):r.jsx("div",{className:"recent-patients-list",children:j.map(ae=>r.jsxs("button",{onClick:()=>Ae(ae),className:"recent-patient-chip",children:[r.jsx("span",{className:"chip-avatar",children:ae.name.charAt(0)}),r.jsx("span",{children:ae.name})]},ae.id))})]})]}),l&&r.jsx("div",{className:"medical-workspace no-print",children:r.jsxs("div",{className:"medical-grid",children:[r.jsxs("section",{className:"procedures-section no-print",children:[r.jsxs("div",{className:"medical-card procedures-container",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:"Available Procedures"}),r.jsx("button",{className:"manage-procedures-btn",onClick:()=>G(!0),children:"Manage"})]}),r.jsx("div",{className:"procedure-search-bar",style:{padding:"0 16px 12px 16px"},children:r.jsxs("div",{className:"search-input-wrapper header-variant",style:{background:"var(--mp-bg-sec)"},children:[r.jsx(En,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search procedures...",className:"medical-search-input header-input",value:ee,onChange:ae=>X(ae.target.value),style:{background:"transparent"}}),ee&&r.jsx("button",{onClick:()=>X(""),className:"clear-search-btn",style:{border:"none",background:"transparent",cursor:"pointer",color:"var(--mp-text-sec)"},children:r.jsx(Lt,{size:14})})]})}),r.jsx("div",{className:"procedures-list",children:Object.entries(de).map(([ae,ne])=>r.jsxs("div",{className:"procedure-category-group",children:[r.jsx("h4",{className:"category-label",children:ae.replace("_"," ")}),ne.map(ie=>r.jsxs("div",{onClick:()=>se(ie),className:"procedure-item",children:[r.jsx("span",{className:"proc-name",children:ie.name}),r.jsxs("span",{className:"proc-cost",children:["",ie.cost]})]},ie.id))]},ae))})]}),r.jsxs("div",{className:"medical-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("span",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>Z(!1),disabled:R,children:[r.jsx(cs,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:P,onChange:ae=>I(ae.target.value)})]})]}),r.jsx("section",{className:"plan-section no-print",children:r.jsxs("div",{className:"medical-card full-height",children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{className:q==="plan"?"active":"",onClick:()=>F("plan"),children:"Treatment Plan"}),r.jsx("button",{className:q==="history"?"active":"",onClick:()=>F("history"),children:"History"})]}),q==="plan"&&r.jsxs("div",{className:"treatment-plan-container",children:[r.jsx("div",{className:"treatment-plan-list",children:E.length===0?r.jsx("p",{className:"empty-plan-message no-print",children:"Click on procedures to add them to the treatment plan."}):E.map(ae=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",children:ae.name}),r.jsxs("div",{className:"plan-item-controls",children:[r.jsx("input",{type:"number",className:"cost-input",value:ae.price,onChange:ne=>_e(ae.instanceId,parseFloat(ne.target.value)||0)}),r.jsx("button",{className:"remove-proc-btn",onClick:()=>be(ae.instanceId),children:r.jsx(Wn,{size:14})})]})]},ae.instanceId))}),E.length>0&&r.jsxs("div",{className:"plan-total",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{className:"total-amount",children:["",ge.toFixed(2)]})]})]}),q==="history"&&r.jsx("div",{className:"history-list",children:V.length===0?r.jsx("p",{className:"empty-plan-message",children:"No previous records found."}):V.map(ae=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(ae.date||ae.createdAt||Date.now()).toLocaleDateString()}),r.jsx("span",{className:`record-status status-${ae.status}`,children:ae.status})]}),r.jsx("div",{className:"history-procedures",children:ae.selected_procedures.map((ne,ie)=>r.jsx("span",{className:"history-proc-tag",children:ne.name},ie))}),ae.notes&&r.jsxs("div",{className:"history-notes",children:[r.jsx("strong",{children:"Notes:"})," ",ae.notes.substring(0,100),"..."]}),r.jsxs("div",{className:"history-record-actions",children:[ae.status==="draft"&&r.jsxs("button",{className:"edit-record-btn",onClick:()=>Ne(ae.id),children:[r.jsx(ao,{size:14})," Edit"]}),ae.bill_id&&r.jsxs("button",{className:"view-bill-btn",onClick:()=>{Y(ae.id),ce(!0)},children:[r.jsx(aa,{size:14})," View Bill"]})]})]},ae.id))}),r.jsx("div",{className:"action-footer no-print",children:r.jsx("button",{className:"save-btn",onClick:()=>Z(!0),disabled:R||E.length===0,children:R?"Saving...":"Save & Bill"})})]})})]})}),d&&l&&r.jsx(iG,{patient:l,onClose:()=>f(!1),onSave:Te}),B&&r.jsx(mOe,{onClose:()=>G(!1),onUpdate:Le}),$&&xe&&r.jsx(_Oe,{isOpen:$,onClose:()=>ce(!1),recordId:xe,onBillingComplete:()=>{l&&le(`/api/medical/patient/${l.id}`).then(ae=>ae.json()).then(ae=>H(ae)).catch(console.error)}})]})},TOe=({isOpen:t,onClose:e,patientId:n,patientName:a,onRecordPayment:i})=>{const[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(null),[p,g]=v.useState(!1),x=v.useCallback(async()=>{if(!(!t||!n)){g(!0),f(null);try{const j=await le(`/api/patient-debts/${n}/transactions`);if(!j.ok)throw new Error(`Failed to fetch transactions: ${j.statusText}`);const _=(await j.json()).map(E=>({...E,debt_value:parseFloat(E.debt_value),amount_paid:parseFloat(E.amount_paid),balance_remaining:parseFloat(E.balance_remaining)}));o(_);const T=await le(`/api/patient-debts/${n}/balance`);if(!T.ok)throw new Error(`Failed to fetch balance: ${T.statusText}`);const C=await T.json();c({patientId:C.patientId,patientName:C.patientName,totalDebtValue:parseFloat(C.totalDebtValue),totalAmountPaid:parseFloat(C.totalAmountPaid),netDebt:parseFloat(C.netDebt)})}catch(j){console.error("Error fetching transactions/balance:",j),f(j.message||"Failed to load transactions or balance.")}finally{g(!1)}}},[t,n]);if(v.useEffect(()=>{t&&x()},[t,x]),!t)return null;const b=r.jsxs("div",{id:"debt-history-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #debt-history-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: flex-start !important; /* Start from top for long lists */
                        overflow-y: auto !important;
                    }
                    #debt-history-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                        margin: 0 !important;
                        padding: 20px !important;
                    }
                    /* Ensure visibility of children */
                    #debt-history-modal-root * { visibility: visible !important; }
                    
                    /* Hide non-print elements */
                    .modal-close-button,
                    .view-button,
                    .modal-actions {
                        display: none !important;
                    }
                    
                    .balance-summary {
                         page-break-inside: avoid;
                    }
                    
                    .debt-table {
                        width: 100% !important;
                    }
                    
                    /* Reset table colors for print */
                    .debt-table th {
                        background-color: #f3f4f6 !important;
                        color: black !important;
                        -webkit-print-color-adjust: exact;
                    }
                }
            `}),r.jsxs("div",{className:"modal-content large-modal printable-section",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border-color)",paddingBottom:"0.75rem",marginBottom:"1rem"},children:[r.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:700,color:"var(--text-color)"},children:["Debt History: ",a]}),r.jsxs("button",{onClick:()=>window.print(),className:"action-text-button view-button",style:{padding:"0.4rem 0.8rem"},title:"Print Ledger",children:[r.jsx(bf,{size:14})," ",r.jsx("span",{style:{fontSize:"0.85rem"},children:"Print Ledger"})]})]}),d&&r.jsx("div",{className:"modal-error-message",children:d}),p&&r.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}),!p&&l&&r.jsxs("div",{className:"balance-summary",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem"},children:[r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",backgroundColor:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Debt"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["",l.totalDebtValue.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",backgroundColor:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Paid"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--success-color)"},children:["",l.totalAmountPaid.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--success-color)",backgroundColor:l.netDebt>0?"rgba(239, 68, 68, 0.05)":"rgba(16, 185, 129, 0.05)",borderColor:l.netDebt>0?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Net Outstanding"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:800,color:l.netDebt>0?"var(--danger-color)":"var(--success-color)"},children:["",l.netDebt.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsx("h4",{style:{fontSize:"1rem",marginTop:"1.25rem",marginBottom:"0.75rem"},children:"Transaction History"}),!p&&s.length===0?r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"No transactions recorded for this patient."}):r.jsx("div",{className:"table-responsive",style:{marginTop:"0"},children:r.jsxs("table",{className:"debt-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Debt Added"}),r.jsx("th",{children:"Payment"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:s.map(j=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",style:{whiteSpace:"nowrap"},children:new Date(j.transaction_date).toLocaleDateString()}),r.jsx("td",{"data-label":"Debt Added",className:j.debt_value>0?"debt-added":"",style:{fontWeight:500},children:j.debt_value>0?`+ ${j.debt_value.toLocaleString("en-IN",{minimumFractionDigits:2})}`:"-"}),r.jsx("td",{"data-label":"Payment",className:j.amount_paid>0?"payment-received":"",style:{fontWeight:500},children:j.amount_paid>0?`- ${j.amount_paid.toLocaleString("en-IN",{minimumFractionDigits:2})}`:"-"}),r.jsxs("td",{"data-label":"Balance",style:{fontWeight:600},children:["",j.balance_remaining.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsx("td",{"data-label":"Mode",children:j.payment_mode?j.payment_mode.charAt(0).toUpperCase()+j.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:j.notes||"",children:j.notes||"-"})]},j.id))})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>{i()},className:"button-submit",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Record Payment"}),r.jsx("button",{type:"button",onClick:e,className:"button-cancel",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Close"})]})]})]});return UD.createPortal(b,document.body)},kOe=({isOpen:t,onClose:e,patientId:n,patientName:a,currentDebt:i,onPaymentSuccess:s})=>{const[o,l]=v.useState(""),[c,d]=v.useState(""),[f,p]=v.useState(""),[g,x]=v.useState("cash"),[b,j]=v.useState(null),[S,_]=v.useState(!1);v.useEffect(()=>{t&&(l(new Date().toISOString().split("T")[0]),d(""),p(""),x("cash"),j(null),_(!1))},[t]);const T=async E=>{if(E.preventDefault(),j(null),!n)return;const k=parseFloat(c||"0");if(k<=0){j("Payment amount must be greater than 0");return}_(!0);try{const P=await le(`/api/patient-debts/${n}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:o,amount_paid:k,notes:f,payment_mode:g})});if(!P.ok){const I=await P.json();throw new Error(I.message||"Failed to add payment.")}s(),e(),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(P){console.error("Error adding payment:",P),j(P.message||"Failed to add payment.")}finally{_(!1)}};if(!t||!t)return null;const C=r.jsxs("div",{id:"add-payment-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                 /* Print styles for Add Payment Modal (if ever needed to print the form itself) */
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #add-payment-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: center !important;
                        justify-content: center !important;
                    }
                    #add-payment-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                    }
                    #add-payment-modal-root * { visibility: visible !important; }
                    .button-cancel, .button-submit, .modal-close-button { display: none !important; }
                }
            `}),r.jsxs("div",{className:"modal-content small-modal",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h3",{children:"Record Payment"}),r.jsxs("div",{className:"modal-header-subtitle",children:["Patient: ",a]})]}),r.jsxs("div",{className:"current-debt-info highlight-debt",children:[r.jsx("span",{children:"Outstanding Debt"}),r.jsxs("strong",{children:["",parseFloat(i).toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),b&&r.jsx("div",{className:"modal-error-message",children:b}),r.jsxs("form",{onSubmit:T,children:[r.jsxs("div",{className:"form-grid-2",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_date",children:"Date"}),r.jsx("input",{type:"date",id:"payment_date",value:o,onChange:E=>l(E.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_mode",children:"Mode"}),r.jsxs("select",{id:"payment_mode",value:g,onChange:E=>x(E.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid ()"}),r.jsx("input",{type:"number",id:"amount_paid",value:c,onChange:E=>d(E.target.value),step:"0.01",min:"0.01",className:"amount-input",placeholder:"0.00",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_notes",children:"Notes"}),r.jsx("textarea",{id:"payment_notes",value:f,onChange:E=>p(E.target.value),placeholder:"e.g., Partial payment via cash",className:"h-60"})]}),r.jsxs("div",{className:"modal-actions mt-0 pt-16",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",disabled:S,children:S?"Recording...":"Record Payment"})]})]})]})]});return UD.createPortal(C,document.body)},IN=()=>{const t=Ft(),e=ds(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(""),[f,p]=v.useState("debtHighToLow"),[g,x]=v.useState(!0),[b,j]=v.useState(""),[S,_]=v.useState(!1),[T,C]=v.useState(!1),[E,k]=v.useState(null),[P,I]=v.useState(0),R=v.useMemo(()=>{let B=[...n];g&&(B=B.filter(ee=>parseFloat(ee.netDebt)>0));const G=parseFloat(b);switch(!isNaN(G)&&G>0&&(B=B.filter(ee=>parseFloat(ee.netDebt)>=G)),f){case"name":B.sort((ee,X)=>ee.name.localeCompare(X.name));break;case"debtHighToLow":B.sort((ee,X)=>parseFloat(X.netDebt)-parseFloat(ee.netDebt));break;case"debtLowToHigh":B.sort((ee,X)=>parseFloat(ee.netDebt)-parseFloat(X.netDebt));break}return B},[n,g,b,f]),z=v.useCallback(async()=>{s(!0),l(null);try{const B=c?`/api/patient-debts?search=${encodeURIComponent(c)}`:"/api/patient-debts",G=await le(B);if(!G.ok)throw new Error(`Failed to fetch patients with debt: ${G.statusText}`);const ee=await G.json();a(ee);const X=ee.reduce(($,ce)=>$+parseFloat(ce.netDebt||"0"),0);I(X)}catch(B){console.error("Failed to fetch patients with debt:",B),l(B.message||"Failed to load patients with debt.")}finally{s(!1)}},[c]);v.useEffect(()=>{z()},[z]);const q=B=>{B&&(e.prefetchQuery({queryKey:Gt.patients.context(B),queryFn:async()=>{const G=await le(`/api/patients/${B}/context`);if(!G.ok)throw new Error("Failed to fetch patient context");return G.json()},staleTime:1e3*60*5}),e.prefetchQuery({queryKey:Gt.patientDebts.balance(B),queryFn:async()=>{const G=await le(`/api/patient-debts/${B}/balance`);if(!G.ok)throw new Error("Failed to fetch patient debt");return G.json()},staleTime:1e3*60}),e.prefetchQuery({queryKey:Gt.queue.latest(B),queryFn:async()=>{const G=await le(`/api/queue/patient/${B}/latest`);if(!G.ok){if(G.status===404)return null;throw new Error("Failed to fetch queue status")}return G.json()},staleTime:1e3*5}))},F=v.useCallback(()=>{z()},[z]),V=B=>{k(B),_(!0)},H=()=>{_(!1),k(null)},K=B=>{k(B),C(!0)},W=()=>{C(!1),k(null)};return i?r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(te,{width:80,height:36}),r.jsx(te,{width:200,height:32})]}),r.jsx(te,{width:250,height:36})]}),r.jsxs("div",{className:"filter-container",children:[r.jsx(te,{width:200,height:40}),r.jsx(te,{width:120,height:40}),r.jsx(te,{width:100,height:40}),r.jsx(te,{width:150,height:40})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Total Debt Value"}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6].map(B=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:32})})]},B))})]})})]}):r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(sn,{size:20})}),r.jsx("h2",{children:"Patient Debt Management"})]}),r.jsxs("div",{className:`total-debt-display ${P>0?"debt-positive":"debt-zero"}`,children:[r.jsx(cd,{size:20}),r.jsx("strong",{children:"Total Outstanding Debt:"})," ",P.toFixed(2)]})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("div",{className:"filter-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:c,onChange:B=>d(B.target.value),className:"filter-search-input"}),r.jsxs("select",{id:"sortBy",value:f,onChange:B=>p(B.target.value),className:"filter-select",title:"Sort by",children:[r.jsx("option",{value:"debtHighToLow",children:"Debt "}),r.jsx("option",{value:"debtLowToHigh",children:"Debt "}),r.jsx("option",{value:"name",children:"Name A-Z"})]}),r.jsx("input",{type:"number",id:"minDebt",value:b,onChange:B=>j(B.target.value),placeholder:"Min ",min:"0",className:"filter-number-input",title:"Minimum debt amount"}),r.jsxs("label",{className:"filter-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:B=>x(B.target.checked)}),"Outstanding only"]}),r.jsxs("span",{className:"filter-count",children:[R.length,"/",n.length]})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsxs("th",{children:[r.jsx(Jn,{size:14})," Patient Name"]}),r.jsxs("th",{children:[r.jsx(rg,{size:14})," Phone"]}),r.jsxs("th",{children:[r.jsx(mw,{size:14})," Total Debt Value"]}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{className:"actions-cell",children:"Actions"})]})}),r.jsx("tbody",{children:R.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"no-results-message",children:c?"No patients found matching your search.":"No patients with outstanding debt."})}):R.map(B=>r.jsxs("tr",{onClick:()=>t(`/dashboard/edit-complaint/patient/${B.id}`),onMouseEnter:()=>q(B.id),style:{cursor:"pointer"},title:"Click to view patient details",children:[r.jsx("td",{"data-label":"Patient Name",children:r.jsxs("div",{className:"patient-name-cell",children:[r.jsx("strong",{children:B.name}),B.age&&B.gender&&r.jsxs("span",{className:"patient-meta",children:[B.age,"y / ",B.gender]})]})}),r.jsx("td",{"data-label":"Phone",children:B.phone||"-"}),r.jsxs("td",{"data-label":"Total Debt Value",children:["",B.totalDebtValue]}),r.jsxs("td",{"data-label":"Total Paid",className:"amount-paid",children:["",B.totalAmountPaid]}),r.jsxs("td",{"data-label":"Net Debt",className:parseFloat(B.netDebt)>0?"debt-outstanding":"debt-clear",children:["",B.netDebt]}),r.jsx("td",{className:"actions-cell",onClick:G=>G.stopPropagation(),children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsxs("button",{onClick:()=>V(B),className:"action-text-button view-button",title:"View Transactions",children:[r.jsx(Lm,{size:16})," View History"]}),r.jsxs("button",{onClick:()=>K(B),className:"action-text-button add-payment-button",title:"Record Payment",children:[r.jsx(Ps,{size:16})," Record Payment"]})]})})]},B.id))})]})}),S&&E&&r.jsx(TOe,{isOpen:S,onClose:H,patientId:E.id,patientName:E.name,onRecordPayment:()=>{H(),C(!0)}}),T&&E&&r.jsx(kOe,{isOpen:T,onClose:W,patientId:E.id,patientName:E.name,currentDebt:E.netDebt,onPaymentSuccess:()=>{F(),_(!0)}})]})},xG=()=>{const t=Ft(),e=zr(),[n,a]=v.useState(""),[i,s]=v.useState([]),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[S,_]=v.useState(!1),[T,C]=v.useState("idle"),[E,k]=v.useState(null),[P,I]=v.useState(""),R=v.useMemo(()=>$l(async oe=>{if(oe.trim().length<2){s([]),l(!1);return}l(!0);try{const Se=new URLSearchParams({search:encodeURIComponent(oe),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Ve=await le(`/api/patients?${Se.toString()}`);if(Ve.ok){const Ae=await Ve.json();s(Ae.patients||[])}}catch(Se){console.error("Search failed",Se)}finally{l(!1)}},300),[]),z=oe=>{const Se=oe.target.value;a(Se),Se.length>=2?(l(!0),R(Se)):(s([]),l(!1))},q=v.useCallback(async oe=>{_(!0);try{const Se=await le(`/api/patient-files/${oe}`);if(Se.ok){const Ve=await Se.json();x(Ve)}}catch(Se){console.error("Failed to fetch files",Se)}finally{_(!1)}},[]),F=oe=>{d({id:oe.id,name:oe.name,age:oe.age,gender:oe.gender,phone:oe.phone,token:oe.token}),a(""),I(""),s([]),k(null),C("idle"),p([]),q(oe.id)},V=()=>{d(null),p([]),x([]),C("idle")};Ce.useEffect(()=>{if(e.state&&e.state.patient){const oe=e.state.patient;F(oe)}},[e.state]);const H=oe=>{if(oe.target.files){const Se=Array.from(oe.target.files);p(Ve=>[...Ve,...Se]),C("idle")}},K=oe=>{p(Se=>Se.filter((Ve,Ae)=>Ae!==oe))},W=async oe=>{if(confirm("Are you sure you want to delete this file?"))try{(await le(`/api/patient-files/${oe}`,{method:"DELETE"})).ok?x(Ve=>Ve.filter(Ae=>Ae.id!==oe)):alert("Failed to delete file.")}catch(Se){console.error("Delete error",Se),alert("Error deleting file.")}},B=oe=>oe.startsWith("image/")?r.jsx(gw,{size:20}):oe==="application/pdf"?r.jsx(aa,{size:20}):oe.startsWith("video/")?r.jsx(Vz,{size:20}):oe.startsWith("audio/")?r.jsx(Qz,{size:20}):r.jsx(Xh,{size:20}),G=oe=>{if(oe===0)return"0 Bytes";const Se=1024,Ve=["Bytes","KB","MB","GB"],Ae=Math.floor(Math.log(oe)/Math.log(Se));return parseFloat((oe/Math.pow(Se,Ae)).toFixed(2))+" "+Ve[Ae]},ee=async()=>{if(!(!c||f.length===0)){j(!0),k(null),C("idle");try{const oe=new FormData;f.forEach(Ve=>{oe.append("files",Ve)});const Se=await le(`/api/patient-files/${c.id}`,{method:"POST",body:oe});if(Se.ok){C("success");const Ve=await Se.json();Ve.files&&x(Ae=>[...Ve.files,...Ae]),setTimeout(()=>{p([]),C("idle")},1500)}else throw new Error("Upload failed")}catch(oe){console.error("Upload error",oe),k("Failed to upload files. Please try again."),C("error")}finally{j(!1)}}},[X,$]=v.useState(null),[ce,xe]=v.useState(""),Y=v.useRef(null),Re=()=>{Y.current&&(Y.current.value="",Y.current.click())},$e=oe=>{$(oe.id),xe(oe.original_name)},ze=()=>{$(null),xe("")},Le=async oe=>{if(ce.trim())try{(await le(`/api/patient-files/${oe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:ce})})).ok?(x(Ve=>Ve.map(Ae=>Ae.id===oe?{...Ae,original_name:ce}:Ae)),$(null)):alert("Failed to rename file.")}catch(Se){console.error("Rename error",Se),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(sn,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Patient Files"})]})}),c?r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"selected-patient-header",children:[r.jsx("div",{className:"patient-avatar",children:c.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"selected-patient-info",children:[r.jsx("h2",{className:"selected-patient-name",children:c.name}),r.jsxs("div",{className:"selected-patient-details",children:[r.jsxs("span",{children:["Token: #",c.token||"NA"]}),c.gender&&r.jsxs("span",{children:[" ",c.gender]}),c.age&&r.jsxs("span",{children:[" ",c.age," yrs"]}),c.phone&&r.jsxs("span",{children:[" ",c.phone]})]}),r.jsx("input",{ref:Y,type:"file",multiple:!0,onChange:H,style:{display:"none"}})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Re,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx(Dv,{size:18}),r.jsx("span",{children:"Upload"})]}),r.jsx("button",{onClick:V,className:"secondary-btn change-patient-btn",children:"Change Patient"})]})]}),(g.length>0||S)&&r.jsxs("div",{className:"existing-files-section mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(Xh,{className:"text-indigo-500",size:20}),"Uploaded Files (",g.length,")"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(En,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search in Drive...",value:P,onChange:oe=>I(oe.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),S?r.jsx("div",{className:"flex justify-center p-8",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(te,{width:300,height:20}),r.jsx(te,{width:300,height:20}),r.jsx(te,{width:300,height:20})]})}):r.jsxs("div",{className:"file-grid",children:[g.filter(oe=>oe.original_name.toLowerCase().includes(P.toLowerCase())).map(oe=>{const Se=oe.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[Se?r.jsx("img",{src:oe.url,alt:oe.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:B(oe.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:oe.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-text-btn download",title:"Download",children:"Download"}),r.jsx("button",{onClick:()=>$e(oe),className:"action-text-btn rename",title:"Rename",children:"Rename"}),r.jsx("button",{onClick:()=>W(oe.id),className:"action-text-btn delete",title:"Delete",children:"Delete"})]})]}),r.jsx("div",{className:"file-card-meta",children:X===oe.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:ce,onChange:Ve=>xe(Ve.target.value),className:"rename-input",autoFocus:!0,onKeyDown:Ve=>{Ve.key==="Enter"&&Le(oe.id),Ve.key==="Escape"&&ze()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>Le(oe.id),className:"icon-btn text-green-600",children:r.jsx(Ds,{size:14})}),r.jsx("button",{onClick:ze,className:"icon-btn text-red-500",children:r.jsx(Lt,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:Se?r.jsx(gw,{size:16,className:"text-purple-500"}):B(oe.mime_type)}),r.jsx("a",{href:oe.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:oe.original_name,children:oe.original_name})]})})]},oe.id)}),g.filter(oe=>oe.original_name.toLowerCase().includes(P.toLowerCase())).length===0&&P&&r.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(En,{size:48,className:"text-slate-200"}),r.jsxs("p",{children:['No files found matching "',P,'"']})]})})]})]}),(f.length>0||T==="success"||E)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:f.length>0?"Pending Uploads":"Upload Status"}),E&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(Br,{size:20}),E]}),T==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Ds,{size:20}),"Files uploaded successfully!"]}),f.length>0&&r.jsx("div",{className:"file-list",children:f.map((oe,Se)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(Xh,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:oe.name,children:oe.name}),r.jsx("div",{className:"file-size",children:G(oe.size)})]}),r.jsx("button",{onClick:()=>K(Se),className:"remove-file-btn",title:"Remove file",children:r.jsx(Lt,{size:16})})]},Se))}),f.length>0&&r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{onClick:()=>p([]),className:"secondary-btn",disabled:b,children:"Clear"}),r.jsx("button",{onClick:ee,className:"primary-btn",disabled:b,children:b?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx(Dv,{size:18}),"Upload ",f.length," File",f.length!==1?"s":""]})})]})]})]}):r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-slate-700",children:[r.jsx(En,{className:"text-indigo-500"}),"Search Patient"]}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{className:"search-icon-files",size:20}),r.jsx("input",{type:"text",placeholder:"Enter patient name, phone, or token...",value:n,onChange:z,className:"search-input",autoFocus:!0})]}),o?r.jsx("div",{className:"patient-results-list",children:[1,2,3].map(oe=>r.jsxs("div",{className:"patient-result-item",style:{cursor:"default"},children:[r.jsx(te,{width:150,height:20}),r.jsx(te,{width:100,height:16})]},oe))}):i.length>0&&r.jsx("ul",{className:"patient-results-list",children:i.map(oe=>r.jsxs("li",{className:"patient-result-item",onClick:()=>F(oe),children:[r.jsxs("div",{children:[r.jsx("div",{className:"patient-name-text",children:oe.name}),r.jsxs("div",{className:"patient-meta",children:[r.jsxs("span",{children:["#",oe.token||"N/A"]}),oe.gender&&r.jsx("span",{children:oe.gender}),oe.age&&r.jsxs("span",{children:[oe.age," yrs"]})]})]}),r.jsx("div",{className:"patient-phone",children:oe.phone})]},oe.id))}),n.length>=2&&!o&&i.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"30px",color:"#94a3b8"},children:['No patients found matching "',n,'"']})]})]})},RM=()=>{const t=Ft(),[e,n]=v.useState([]),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(!0),[d,f]=v.useState("idle"),[p,g]=v.useState(null),[x,b]=v.useState(""),j=v.useCallback(async()=>{c(!0);try{const W=await le("/api/clinic-files");if(W.ok){const B=await W.json();n(B)}}catch(W){console.error("Failed to fetch clinic files",W)}finally{c(!1)}},[]);v.useEffect(()=>{j()},[j]);const S=W=>{if(W.target.files){const B=Array.from(W.target.files);i(G=>[...G,...B]),f("idle")}},_=W=>{i(B=>B.filter((G,ee)=>ee!==W))},T=async W=>{if(confirm("Are you sure you want to delete this file?"))try{(await le(`/api/clinic-files/${W}`,{method:"DELETE"})).ok?n(G=>G.filter(ee=>ee.id!==W)):alert("Failed to delete file.")}catch(B){console.error("Delete error",B),alert("Error deleting file.")}},C=W=>W.startsWith("image/")?r.jsx(gw,{size:20}):W==="application/pdf"?r.jsx(aa,{size:20}):W.startsWith("video/")?r.jsx(Vz,{size:20}):W.startsWith("audio/")?r.jsx(Qz,{size:20}):r.jsx(Xh,{size:20}),E=W=>{if(W===0)return"0 Bytes";const B=1024,G=["Bytes","KB","MB","GB"],ee=Math.floor(Math.log(W)/Math.log(B));return parseFloat((W/Math.pow(B,ee)).toFixed(2))+" "+G[ee]},k=async()=>{if(a.length!==0){o(!0),g(null),f("idle");try{const W=new FormData;a.forEach(G=>{W.append("files",G)});const B=await le("/api/clinic-files",{method:"POST",body:W});if(B.ok){f("success");const G=await B.json();G.files&&n(ee=>[...G.files,...ee]),setTimeout(()=>{i([]),f("idle")},1500)}else throw new Error("Upload failed")}catch(W){console.error("Upload error",W),g("Failed to upload files. Please try again."),f("error")}finally{o(!1)}}},[P,I]=v.useState(null),[R,z]=v.useState(""),q=v.useRef(null),F=()=>{q.current&&(q.current.value="",q.current.click())},V=W=>{I(W.id),z(W.original_name)},H=()=>{I(null),z("")},K=async W=>{if(R.trim())try{(await le(`/api/clinic-files/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:R})})).ok?(n(G=>G.map(ee=>ee.id===W?{...ee,original_name:R}:ee)),I(null)):alert("Failed to rename file.")}catch(B){console.error("Rename error",B),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(sn,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Clinic Files"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:q,type:"file",multiple:!0,onChange:S,style:{display:"none"}}),r.jsxs("button",{onClick:F,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx(Dv,{size:18}),r.jsx("span",{children:"Upload Files"})]})]})]})}),r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(Xh,{className:"text-indigo-500",size:20}),"Clinic Drive (",e.length," files)"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(En,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search files...",value:x,onChange:W=>b(W.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),l?r.jsx("div",{className:"file-grid",children:[1,2,3,4].map(W=>r.jsxs("div",{className:"file-card-item",children:[r.jsx(te,{height:150}),r.jsx("div",{className:"p-3",children:r.jsx(te,{height:20,width:"80%"})})]},W))}):r.jsxs("div",{className:"file-grid",children:[e.filter(W=>W.original_name.toLowerCase().includes(x.toLowerCase())).map(W=>{const B=W.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[B?r.jsx("img",{src:W.url,alt:W.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:C(W.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:W.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-text-btn download",title:"Download",children:"Download"}),r.jsx("button",{onClick:()=>V(W),className:"action-text-btn rename",title:"Rename",children:"Rename"}),r.jsx("button",{onClick:()=>T(W.id),className:"action-text-btn delete",title:"Delete",children:"Delete"})]})]}),r.jsx("div",{className:"file-card-meta",children:P===W.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:R,onChange:G=>z(G.target.value),className:"rename-input",autoFocus:!0,onKeyDown:G=>{G.key==="Enter"&&K(W.id),G.key==="Escape"&&H()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>K(W.id),className:"icon-btn text-green-600",children:r.jsx(Ds,{size:14})}),r.jsx("button",{onClick:H,className:"icon-btn text-red-500",children:r.jsx(Lt,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:B?r.jsx(gw,{size:16,className:"text-purple-500"}):C(W.mime_type)}),r.jsx("a",{href:W.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:W.original_name,children:W.original_name})]})})]},W.id)}),e.filter(W=>W.original_name.toLowerCase().includes(x.toLowerCase())).length===0&&!l&&r.jsx("div",{className:"col-span-full text-center py-20 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(Xh,{size:48,className:"text-slate-200"}),r.jsx("p",{children:x?`No files found matching "${x}"`:"This clinic's drive is empty. Upload some files!"})]})})]}),(a.length>0||d==="success"||p)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:a.length>0?"Pending Uploads":"Upload Status"}),p&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(Br,{size:20}),p]}),d==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Ds,{size:20}),"Files uploaded successfully!"]}),a.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"file-list max-h-60 overflow-y-auto mb-6",children:a.map((W,B)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(Xh,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:W.name,children:W.name}),r.jsx("div",{className:"file-size",children:E(W.size)})]}),r.jsx("button",{onClick:()=>_(B),className:"remove-file-btn",title:"Remove file",children:r.jsx(Lt,{size:16})})]},B))}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>i([]),className:"secondary-btn",disabled:s,children:"Clear All"}),r.jsx("button",{onClick:k,className:"primary-btn",disabled:s,children:s?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx(Dv,{size:18}),"Upload ",a.length," File",a.length!==1?"s":""]})})]})]})]})]})]})},cw=()=>{const t=Ft(),e=zr(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState([]),[c,d]=v.useState(""),[f,p]=v.useState([]),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState(null),[T,C]=v.useState(!0),[E,k]=v.useState(""),[P,I]=v.useState([]),[R,z]=v.useState(!1),[q,F]=v.useState(null),[V,H]=v.useState(!1),[K,W]=v.useState(!1),[B,G]=v.useState([]),[ee,X]=v.useState(!1),[$,ce]=v.useState(null),xe=/^\+?[0-9\s\-().]{7,20}$/,Y=/^[a-zA-Z\s'-]{2,}$/,Re=v.useCallback(async()=>{try{const ne=await le("/api/drugs");if(!ne.ok)throw new Error("Failed to fetch drugs");const ie=await ne.json(),je=ie.drugs||ie||[];s(je)}catch(ne){console.error("Failed to fetch available drugs:",ne),x("Could not load drug list. "+ne.message)}},[]),$e=v.useCallback(async ne=>{X(!0),ce(null);try{const ie=await le(`/api/pharmacy-orders/patient/${ne}`);if(!ie.ok){const Ee=await ie.json().catch(()=>({}));throw new Error(Ee.message||`HTTP error! status: ${ie.status}`)}const je=await ie.json();G(je||[])}catch(ie){console.error("Failed to fetch previous pharmacy orders:",ie),ce(`Could not load previous orders: ${ie.message}`)}finally{X(!1)}},[]);v.useEffect(()=>{var ne;Re(),(ne=e.state)!=null&&ne.patient?Se(e.state.patient):C(!0)},[Re,e.state]),v.useEffect(()=>{n!=null&&n.id?$e(n.id):G([])},[n,$e]);const ze=v.useMemo(()=>new co(i,{keys:["name","brand_name"],threshold:.3}),[i]);v.useEffect(()=>{if(!c){p([]);return}const ne=ze.search(c).map(ie=>ie.item);p(ne.slice(0,10))},[c,ze]);const Le=v.useMemo(()=>$l(async ne=>{if(ne.trim().length<2){I([]),z(!1),F(null);return}z(!0),F(null);try{const ie=new URLSearchParams({search:encodeURIComponent(ne),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),je=await le(`/api/patients?${ie.toString()}`);if(!je.ok){const Q=await je.text();throw new Error(`API Error (${je.status}): ${Q||je.statusText}`)}const Ee=await je.json();I(Ee.patients)}catch(ie){console.error("Error searching patients:",ie),F(ie.message||"Failed to search patients."),I([])}finally{z(!1)}},300),[xe]),oe=ne=>{const ie=ne.target.value;k(ie),H(xe.test(ie)),W(Y.test(ie)&&!xe.test(ie)),z(!0),Le(ie)},Se=v.useCallback(ne=>{a(ne),C(!1),k(""),I([]),F(null)},[]),Ve=v.useCallback(async ne=>{if(!E||ne==="phone"&&!V||ne==="name"&&!K){F(`Invalid ${ne} to create a new patient.`);return}z(!0),F(null);try{const je=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ne==="name"?E:"direct pharmacy",phone:ne==="phone"?E:null,age:null,gender:null,token:null})});if(!je.ok){const Q=await je.json();throw new Error(Q.message||`Failed to create patient: ${je.statusText}`)}const Ee=await je.json();alert(`New patient "${Ee.name}" created with ${ne==="phone"?`phone ${Ee.phone}`:`name ${Ee.name}`}.`),Se(Ee)}catch(ie){console.error("Error creating new patient:",ie),F(ie.message||"Failed to create new patient.")}finally{z(!1)}},[E,V,K,Se]),Ae=()=>{a(null),C(!0),l([]),x(null),G([])},ue=ne=>{if(o.some(ie=>ie.drug_id===ne.id)){const ie=ne.name||ne.brand_name||"This drug";x(`${ie} is already in the order.`),setTimeout(()=>x(null),3e3),d(""),p([]);return}l(ie=>[...ie,{drug_id:ne.id,name:ne.name||ne.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,mrp:Number(ne.mrp)||0,originalMrp:Number(ne.mrp)||0,stock:ne.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(ne.mrp)||0)/(se(ne.pack)||1),pack:ne.pack}]),d(""),p([])},Te=()=>{const ne=c.trim();if(!ne){x("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>x(null),3e3);return}t("/dashboard/inventory/add",{state:{initialDrugName:ne}}),d(""),p([])},se=ne=>{if(!ne)return null;const ie=ne.match(/(?:\d+x)?(\d+)/);return ie?parseInt(ie[1],10):null},be=ne=>{l(ie=>ie.filter(je=>(je.drug_id??je.name)!==ne))},_e=(ne,ie)=>{l(je=>je.map(Ee=>{if((Ee.drug_id??Ee.name)===ne&&Ee.isLoose){const ye=se(Ee.pack),me=Math.max(0,ie),he=me*(ye??1)+(Ee.looseUnits??0);return{...Ee,loosePacks:me,looseQuantity:he,pack_quantity:me}}return Ee}))},Ne=(ne,ie)=>{l(je=>je.map(Ee=>{if((Ee.drug_id??Ee.name)===ne&&Ee.isLoose){const ye=se(Ee.pack),me=Math.max(0,ie),he=(Ee.loosePacks??0)*(ye??1)+me;return{...Ee,looseUnits:me,looseQuantity:he}}return Ee}))},Z=ne=>{const ie=[];ne.medications.forEach(je=>{if(o.find(Q=>Q.drug_id&&je.drug_id&&Q.drug_id===je.drug_id||Q.name.toLowerCase()===je.name.toLowerCase()))l(Q=>Q.map(ye=>{if(ye.drug_id&&je.drug_id&&ye.drug_id===je.drug_id||ye.name.toLowerCase()===je.name.toLowerCase()){const me=(ye.pack_quantity??0)+(je.pack_quantity??0),he=(ye.loose_quantity??0)+(je.loose_quantity??0),De=je.tabletsPerDay??ye.tabletsPerDay,nt=je.numberOfDays??ye.numberOfDays,Fe=se(ye.pack),Ge=me*(Fe??1)+he;return{...ye,pack_quantity:me,loose_quantity:he,directions_to_use:je.directions_to_use??ye.directions_to_use,tabletsPerDay:De,numberOfDays:nt,looseQuantity:Ge,loosePacks:Math.floor(Ge/(Fe??1)),looseUnits:Ge%(Fe??1)}}return ye}));else{let Q=je.drug_id,ye=je.drug_id?i.find(me=>me.id===je.drug_id):void 0;if(!Q&&je.name){const me=i.find(he=>he.name&&he.name.toLowerCase()===je.name.toLowerCase());me&&(Q=me.id,ye=me)}ie.push({drug_id:Q,name:je.name,pack_quantity:je.pack_quantity??0,loose_quantity:je.loose_quantity??0,directions_to_use:je.directions_to_use,tabletsPerDay:je.tabletsPerDay??1,numberOfDays:je.numberOfDays??1,mrp:ye?ye.mrp:je.pack_price,originalMrp:ye?ye.mrp:je.pack_price,stock:ye?ye.stock:je.stock,isLoose:!0,loosePacks:0,looseUnits:(je.pack_quantity??0)*(se((ye==null?void 0:ye.pack)||je.pack)??1)+(je.loose_quantity??0),looseQuantity:(je.pack_quantity??0)*(se((ye==null?void 0:ye.pack)||je.pack)??1)+(je.loose_quantity??0),pricePerLooseUnit:(ye?Number(ye.mrp):Number(je.pack_price)||0)/(se((ye==null?void 0:ye.pack)||je.pack)||1),pack:(ye==null?void 0:ye.pack)||je.pack})}}),l(je=>[...je,...ie]),ne.prescriptionForUnavailableDrugs&&(!S||!S.includes(ne.prescriptionForUnavailableDrugs))&&_(je=>je?`${je}

-- From Order ${ne.id.substring(0,8)} --
${ne.prescriptionForUnavailableDrugs}`:ne.prescriptionForUnavailableDrugs),x("Medications from previous order added to current order."),setTimeout(()=>x(null),3e3)},ge=async ne=>{if(ne.preventDefault(),x(null),j(!0),!n){x("No patient selected for the order."),j(!1);return}if(o.length===0&&!(S!=null&&S.trim())){x("Please add at least one medication or provide a prescription for unavailable drugs."),j(!1);return}const ie=o.filter(Ee=>{const Q=Ee.looseQuantity??0;return Q<=0||Ee.stock!==void 0&&Q>Ee.stock});if(ie.length>0){x(`Invalid quantity or insufficient stock for: ${ie.map(Ee=>Ee.name).join(", ")}`),j(!1);return}const je={patient_id:n.id,items:o.map(Ee=>{const Q=Ee.mrp??0,ye=Ee.pricePerLooseUnit??0,me=ye*(Ee.looseQuantity??0);return{drug_id:Ee.drug_id===void 0?null:Ee.drug_id,name:Ee.name,pack_quantity:Ee.loosePacks??0,loose_quantity:Ee.looseUnits??0,pack_price:Q,loose_price:ye,total_price:me,price:Ee.originalMrp??0,directions_to_use:Ee.directions_to_use===void 0?null:Ee.directions_to_use,tabletsPerDay:Ee.tabletsPerDay??1,numberOfDays:Ee.numberOfDays??1}}),order_total:de,prescription_for_unavailable_drugs:S};try{const Ee=await le("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!Ee.ok){const Q=await Ee.json();throw new Error(Q.message||`Failed to create order: ${Ee.statusText}`)}t(-1)}catch(Ee){console.error("Failed to create pharmacy order:",Ee),x(Ee.message||"Failed to create order. Please try again.")}finally{j(!1)}},de=v.useMemo(()=>o.reduce((ne,ie)=>{const je=ie.isLoose?ie.pricePerLooseUnit??0:ie.mrp??0,Ee=ie.isLoose?ie.looseQuantity??0:ie.quantity??0;return ne+je*Ee},0),[o]),ae=(Number(de)||0).toFixed(2);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(sn,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),T&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:E,onChange:oe,className:"custom-text-input mt-1",autoFocus:!0})]}),q&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:q})," ",R?r.jsx("div",{className:"patient-search-results items-loading mt-1",children:[1,2,3].map(ne=>r.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(te,{width:40,height:20}),r.jsx(te,{width:120,height:20})]}),r.jsx("div",{className:"mt-1 sm:mt-0",children:r.jsx(te,{width:150,height:16})})]})},ne))}):P.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",P.map(ne=>r.jsxs("li",{onClick:()=>Se({id:ne.id,name:ne.name,token:ne.token,age:ne.age,gender:ne.gender,phone:ne.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",ne.token]}),ne.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[ne.age?`${ne.age} yrs`:"Age N/A",ne.gender?` / ${ne.gender}`:" / Gender N/A",ne.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",ne.phone]})]})]}),ne.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",ne.phone]})]},ne.id))]})]}),E.length>=2&&!R&&P.length===0&&!q&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',E,'".']}),V&&r.jsx("button",{type:"button",onClick:()=>Ve("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:R,children:'Create "direct pharmacy" Patient with this Phone'}),K&&r.jsx("button",{type:"button",onClick:()=>Ve("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:R,children:"Create Patient with this Name"})]}),E.length<2&&!R&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),n&&!T&&r.jsxs("form",{onSubmit:ge,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:n.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:n.token??"N/A"}),n.age&&`    Age: ${n.age}`,n.gender&&`    Gender: ${n.gender}`,n.phone&&`    Phone: ${n.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${n.id}`,children:["ID: ",n.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:Ae,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),g&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:g})," ",ee?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:[1,2].map(ne=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx(te,{width:180,height:20}),r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx(te,{width:"90%",height:16}),r.jsx(te,{width:"70%",height:16})]}),r.jsx(te,{width:"100%",height:36,style:{borderRadius:"6px"}})]},ne))})]}):$?r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:$}):B.length>0?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:B.map(ne=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(ne.date).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ne.status==="dispensed"?"bg-green-100 text-green-800":ne.status==="pending"?"bg-yellow-100 text-yellow-800":ne.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:ne.status.charAt(0).toUpperCase()+ne.status.slice(1)})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:ne.medications.map((ie,je)=>r.jsxs("li",{children:[r.jsx("strong",{children:ie.name}),": ",ie.quantity," Qty",ie.directions_to_use&&` - Directions: ${ie.directions_to_use}`]},je))}),ne.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),r.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",r.jsx(Nf,{remarkPlugins:[Sf],children:ne.prescriptionForUnavailableDrugs})]})]}),r.jsxs("button",{type:"button",onClick:()=>Z(ne),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[r.jsx(Vn,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},ne.id))})]}):n&&r.jsx("div",{className:"content-section text-center py-4 mt-4",children:r.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:S??"",onChange:ne=>_(ne.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:c,onChange:ne=>d(ne.target.value),className:"custom-text-input mt-1"}),c&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",f.length>0&&r.jsxs("ul",{children:[" ",f.map(ne=>r.jsxs("li",{onClick:()=>ue(ne),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:ne.name||ne.brand_name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",ne.stock??"N/A",", MRP: ",Number(ne.mrp||0).toFixed(2),")"]})]},ne.id))]}),c.trim()&&!i.some(ne=>ne.name&&ne.name.toLowerCase()===c.trim().toLowerCase()||ne.brand_name&&ne.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsxs("div",{onClick:Te,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',c.trim(),'" as new item']}),c.trim()&&f.length===0&&i.some(ne=>ne.name&&ne.name.toLowerCase()===c.trim().toLowerCase()||ne.brand_name&&ne.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",o.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),o.length>0&&r.jsx("ul",{className:"space-y-4",children:o.map(ne=>{const ie=ne.drug_id??ne.name,je=!ne.drug_id;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${je?"custom":""}`,children:[" ",ne.name,je?" (custom)":""]}),!je&&ne.pricePerLooseUnit!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(ne.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),ne.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${ne.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",ne.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-packs-${ie}`,className:"dosage-label",children:"Packs:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>_e(ie,(ne.loosePacks??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-packs-${ie}`,min:"0",value:ne.loosePacks||"",onChange:Ee=>{const Q=parseInt(Ee.target.value,10);_e(ie,isNaN(Q)?0:Q)},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>_e(ie,(ne.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-units-${ie}`,className:"dosage-label",children:"Loose:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>Ne(ie,(ne.looseUnits??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-units-${ie}`,min:"0",value:ne.looseUnits||"",onChange:Ee=>{const Q=parseInt(Ee.target.value,10);Ne(ie,isNaN(Q)?0:Q)},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>Ne(ie,(ne.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),ne.pack&&r.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",ne.pack.split("x")[1]||ne.pack," per pack)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((ne.pricePerLooseUnit??0)*(ne.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>be(ie),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(Wn,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-per-day-${ie}`,className:"dosage-label",children:"Per Day:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(Q=>Q.drug_id===ie?{...Q,tabletsPerDay:Math.max(1,(Q.tabletsPerDay??1)-1)}:Q)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`tablets-per-day-${ie}`,min:"1",value:ne.tabletsPerDay??1,onChange:Ee=>{const Q=parseInt(Ee.target.value,10);l(ye=>ye.map(me=>me.drug_id===ie?{...me,tabletsPerDay:isNaN(Q)?1:Math.max(1,Q)}:me))},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(Q=>Q.drug_id===ie?{...Q,tabletsPerDay:(Q.tabletsPerDay??1)+1}:Q)),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`number-of-days-${ie}`,className:"dosage-label",children:"No. Days:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(Q=>Q.drug_id===ie?{...Q,numberOfDays:Math.max(1,(Q.numberOfDays??1)-1)}:Q)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`number-of-days-${ie}`,min:"1",value:ne.numberOfDays??1,onChange:Ee=>{const Q=parseInt(Ee.target.value,10);l(ye=>ye.map(me=>me.drug_id===ie?{...me,numberOfDays:isNaN(Q)?1:Math.max(1,Q)}:me))},onFocus:Ee=>Ee.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Ee=>Ee.map(Q=>Q.drug_id===ie?{...Q,numberOfDays:(Q.numberOfDays??1)+1}:Q)),className:"quantity-btn",children:"+"})]})]})]}),r.jsx("div",{className:"flex items-center mt-2",children:ne.pack&&se(ne.pack)&&r.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const Ee=se(ne.pack),Q=ne.looseQuantity??0;if(Ee&&Ee>0){const ye=Math.floor(Q/Ee),me=Q%Ee;return`(Subtract: ${ye} packs, ${me} loose)`}return""})()})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${ie}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${ie}`,placeholder:"e.g., 'After food', 'Twice a day'",value:ne.directions_to_use??"",onChange:Ee=>{const Q=Ee.target.value;l(ye=>ye.map(me=>(me.drug_id??me.name)===ie?{...me,directions_to_use:Q}:me))},className:"dosage-input text-sm w-full mt-1"})]})]},ie)})})]}),o.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",ae]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:b||o.length===0&&!(S!=null&&S.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${b||o.length===0&&!(S!=null&&S.trim())?"":"hover:opacity-90"}`,children:b?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},AOe=()=>{const t=v.useRef(null),e=v.useRef(null),[n,a]=v.useState(!1),[i,s]=v.useState(0),[o,l]=v.useState(!1),[c,d]=v.useState(!1),[f,p]=v.useState(null),g=30,x=100,b=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:!0});t.current&&(t.current.srcObject=_,d(!0),p(null))}catch(_){console.error("Error accessing camera:",_),p("Camera access denied. Please allow camera permissions to use motion detection."),d(!1)}},j=()=>{var T;const _=(T=t.current)==null?void 0:T.srcObject;_&&_.getTracks().forEach(C=>C.stop()),d(!1)};v.useEffect(()=>(b(),()=>j()),[]),v.useEffect(()=>{if(!c)return;let _;const T=e.current,C=t.current;if(!T||!C)return;const E=T.getContext("2d",{willReadFrequently:!0});if(!E)return;const k=320,P=240;T.width=k,T.height=P;let I=null;const R=()=>{if(C.readyState===C.HAVE_ENOUGH_DATA){E.drawImage(C,0,0,k,P);const q=E.getImageData(0,0,k,P).data;if(I){let F=0;for(let V=0;V<q.length;V+=4*4){const H=Math.abs(q[V]-I[V]),K=Math.abs(q[V+1]-I[V+1]),W=Math.abs(q[V+2]-I[V+2]);H+K+W>g&&F++}if(F>x){const V=Date.now();s(V),a(!0),o||l(!0)}else a(!1)}I=q}_=requestAnimationFrame(R)};return R(),()=>{cancelAnimationFrame(_)}},[c,o]);const S=()=>{l(!1)};return r.jsxs("div",{className:"motion-detect-container",style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{className:"status-header bg-white p-4 rounded-lg shadow-sm flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${c?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.jsx(jE,{size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Motion Detection Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:c?"Camera Active - Monitoring":"Camera Inactive"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${n?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(_c,{size:16}),r.jsx("span",{className:"font-medium",children:n?"Motion Detected!":"No Motion"})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${o?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(NE,{size:16}),r.jsx("span",{className:"font-medium",children:o?"AI Assistant Active":"AI Assistant Idle"})]})]})]}),f&&r.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:f}),r.jsxs("div",{className:"video-feed-container bg-black rounded-lg overflow-hidden relative shadow-lg",style:{maxWidth:"640px",margin:"0 auto"},children:[r.jsx("video",{ref:t,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",display:c?"block":"none"}}),r.jsx("canvas",{ref:e,style:{display:"none"}}),!c&&!f&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:r.jsxs("div",{className:"text-center",children:[r.jsx(jE,{size:48,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Connecting to camera..."})]})})]}),o&&r.jsx(sS,{onClose:S,patientData:null,tokenNumber:null,onAiSummaryChange:()=>{},lastMotionTimestamp:i,backgroundMode:!0})]})},EOe=async()=>{const t=await le("/api/staff");if(!t.ok)throw new Error("Failed to fetch staff");const e=await t.json();return e.staff||e||[]};function POe(){return LN({queryKey:[...Gt.staff.list,"doctors"],queryFn:EOe,staleTime:5*60*1e3,select:t=>t.filter(e=>e.role==="doctor"||e.role==="admin")})}const zA=({currentUser:t})=>{const[e,n]=v.useState("queue"),[a,i]=v.useState(""),[s,o]=v.useState(new Date),l=s.toISOString().split("T")[0],[c,d]=v.useState(!1),[f,p]=v.useState("list"),{data:g,isLoading:x,refetch:b}=nG(l),j=(g==null?void 0:g.list)||[],{data:S=[],isLoading:_}=POe(),T=dOe(),C=ds(),[E,k]=v.useState(null),[P,I]=v.useState(null),R=Ft(),z=zr(),q=()=>{b()};v.useEffect(()=>{const ce=new URLSearchParams(z.search).get("tab");ce&&B.find(Y=>Y.id===ce)&&n(ce)},[z.search]),v.useEffect(()=>{e==="queue"&&b()},[e,b]);const F=v.useCallback(async($,ce)=>{if(console.log(`Attempting to assign doctor ${ce} to queue ${$}`),I(null),k(null),!ce){console.log("No doctor ID provided, skipping assignment.");return}const xe=j.find($e=>$e.id===$);if(!xe){console.error(`Queue entry ${$} not found in local state.`),I("Queue entry not found.");return}if(xe.doctor_id===ce){console.log(`Queue ${$} already assigned to doctor ${ce}. Skipping.`);return}const Y=async $e=>{if(!$e||!$e.id||!$e.name){I("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",$e);return}const ze=async()=>{try{await T.mutateAsync({queueId:$,status:"waiting",doctorId:ce});const Le=S.find(oe=>oe.id===ce);return console.log(`Successfully assigned doctor ${Le==null?void 0:Le.name} to queue ${$}.`),!0}catch(Le){return console.error(`Error assigning doctor for queue ${$}:`,Le),I(`Failed to assign doctor: ${Le.message}`),!1}};$e.subscription_status==="active"?(console.log(`Patient ${$e.name} (ID: ${$e.id}) has active subscription. Assigning doctor directly.`),await ze()):(console.log(`Patient ${$e.name} (ID: ${$e.id}) does not have active subscription. Navigating to billing WITHOUT assigning doctor yet.`),R(`/dashboard/doctor-billing/${$}?doctorId=${ce}`))},Re=xe.Patient;if(Re&&Re.id&&Re.name)console.log("Patient details found in state. Proceeding with assignment."),await Y(Re);else{console.warn(`Patient details missing for queue entry ${$}. Fetching patient ${xe.patient_id}...`);try{const $e=await le(`/api/patients/${xe.patient_id}`);if(!$e.ok){const Le=await $e.json().catch(()=>({}));throw new Error(Le.message||`Failed to fetch patient details (status ${$e.status})`)}const ze=await $e.json();console.log("Successfully fetched patient details:",ze),await Y(ze)}catch($e){console.error(`Failed to fetch patient details for patient ID ${xe.patient_id}:`,$e),I(`Failed to fetch required patient details: ${$e.message}`)}}},[S,j,R,T]),V=$=>{$&&(C.prefetchQuery({queryKey:Gt.patients.context($),queryFn:async()=>{const ce=await le(`/api/patients/${$}/context`);if(!ce.ok)throw new Error("Failed to fetch patient context");return ce.json()},staleTime:5*60*1e3}),C.prefetchQuery({queryKey:Gt.patientDebts.balance($),queryFn:async()=>{const ce=await le(`/api/patient-debts/${$}/balance`);return ce.ok?ce.json():{netDebt:0}},staleTime:1*60*1e3}),C.prefetchQuery({queryKey:Gt.queue.latest($),queryFn:async()=>{const ce=await le(`/api/queue/patient/${$}/latest`);if(!ce.ok)throw new Error("Failed to fetch latest queue status");const xe=await ce.json();return xe!=null&&xe._id&&C.prefetchQuery({queryKey:Gt.queue.entry(xe._id),queryFn:async()=>{const Y=await le(`/api/queue/doctor/complaint/${xe._id}`);if(!Y.ok)throw new Error("Failed to fetch complaint record");return Y.json()},staleTime:1*60*1e3}),xe},staleTime:5e3}),C.prefetchQuery({queryKey:Gt.dental.records($),queryFn:async()=>{const ce=await le(`/api/dental/patient/${$}`);if(!ce.ok)throw new Error("Failed to fetch dental records");return ce.json()},staleTime:5*60*1e3}))},H=v.useMemo(()=>TO($=>V($),500),[]);v.useEffect(()=>()=>{H.cancel()},[H]);const K=async($,ce)=>{var Y;I(null);const xe=ce==="consulting"?"start consultation":"complete visit";try{await T.mutateAsync({queueId:$,status:ce,doctorId:ce==="consulting"&&((Y=j.find(Re=>Re.id===$))==null?void 0:Y.doctor_id)||void 0})}catch(Re){console.error(`Error trying to ${xe}:`,Re),I(`Failed to ${xe}: ${Re.message}`)}},W=async($,ce)=>{let xe="red";ce==="red"?xe="green":ce==="green"?xe="blue":ce==="blue"?xe=null:xe="red";try{if(!(await le(`/api/patients/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_code:xe})})).ok)throw new Error("Failed to update patient color");b()}catch(Y){console.error("Error updating patient color:",Y)}},B=[{id:"queue",label:"Queue",icon:r.jsx(Os,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(En,{size:20})},{id:"manage-admission",label:"Admissions",icon:r.jsx(EQ,{size:20})},{id:"all-patients",label:"Patients",icon:r.jsx(Pb,{size:20})},{id:"lab",label:"Lab",icon:r.jsx(Zj,{size:20})},{id:"custom-bill",label:"Bill",icon:r.jsx(Ps,{size:20})},{id:"medical",label:"Medical",icon:r.jsx(DX,{size:20})},{id:"motion-detect",label:"Motion",icon:r.jsx(jE,{size:20})},{id:"debt-management",label:"Debt",icon:r.jsx(cd,{size:20})},{id:"patient-files",label:"Files",icon:r.jsx(aa,{size:20})},{id:"clinic-files",label:"Clinic Files",icon:r.jsx(aa,{size:20})},{id:"add-order",label:"New Order",icon:r.jsx($o,{size:20})}],G=$=>{try{return new Date($).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},ee=j.filter($=>{var ce,xe;return(xe=(ce=$.Patient)==null?void 0:ce.name)==null?void 0:xe.toLowerCase().includes(a.toLowerCase())}),{openCommandBar:X}=Rc();return r.jsxs("div",{className:"reception-app",children:[P&&r.jsxs("div",{className:"reception-error",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:P})]}),r.jsx("div",{className:"reception-nav",children:B.map($=>r.jsxs("button",{className:`reception-nav-item ${e===$.id?"active":""}`,onClick:()=>{$.id==="newtons-ai"?X():n($.id)},children:[r.jsx("span",{children:$.icon}),$.label]},$.id))}),r.jsxs("div",{className:"reception-main",children:[e==="queue"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"reception-header",children:[r.jsxs("div",{className:"reception-actions",children:[r.jsxs("div",{className:"reception-search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patients...",className:"reception-search-input",value:a,onChange:$=>i($.target.value)}),r.jsx(En,{className:"reception-search-icon",size:18})]}),r.jsxs("div",{className:"reception-controls",children:[r.jsxs("div",{className:"reception-view-toggle",children:[r.jsxs("button",{className:`reception-toggle-option ${f==="list"?"active":""}`,onClick:()=>p("list"),title:"List View",children:[r.jsx(qz,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"List"})]}),r.jsxs("button",{className:`reception-toggle-option ${f==="timeline"?"active":""}`,onClick:()=>p("timeline"),title:"Timeline View",children:[r.jsx(GD,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"Timeline"})]})]}),r.jsx("div",{className:"reception-btn-icon",style:{width:"auto",padding:"0 10px",gap:"8px"},children:r.jsx("input",{type:"date",className:"bg-transparent border-none outline-none text-sm dark:text-white",value:s.toISOString().split("T")[0],onChange:$=>o(new Date($.target.value))})}),r.jsxs("button",{onClick:()=>d(!0),className:"reception-btn-primary",children:[r.jsx(Eb,{size:16}),r.jsx("span",{children:"Book Appointment"})]})]})]}),r.jsxs("div",{className:"reception-stats",children:[r.jsxs("div",{className:"reception-stat-card stat-waiting",children:[r.jsx("div",{className:"reception-stat-label",children:"Waiting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter($=>$.status==="waiting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-consulting",children:[r.jsx("div",{className:"reception-stat-label",children:"Consulting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter($=>$.status==="consulting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-completed",children:[r.jsx("div",{className:"reception-stat-label",children:"Completed"}),r.jsx("div",{className:"reception-stat-value",children:j.filter($=>$.status==="seen").length})]})]})]}),r.jsx(tG,{isOpen:c,onClose:()=>{d(!1),b()},onAppointmentBooked:q}),x&&j.length===0?r.jsx("div",{className:"reception-card",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:50,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{className:"hidden md:table-cell",children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:120,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map($=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:40,height:20})}),r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsx(te,{width:120,height:32})})]},$))})]})}):ee.length===0?r.jsx("div",{className:"empty-queue-message",children:a?"No patients found matching your search.":"Queue is empty."}):f==="timeline"?r.jsx(eG,{queueList:ee,onPatientClick:$=>R(`/dashboard/edit-complaint/${$.id}`)}):r.jsx("div",{className:"reception-card reception-table-wrapper",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"hidden-mobile",children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Phone"}),r.jsx("th",{className:"hidden-mobile",children:"Complaint"}),r.jsx("th",{className:"hidden-mobile",children:"Subscription"}),r.jsx("th",{className:"hidden-mobile",children:"Time"}),r.jsx("th",{className:"text-center",children:"Action"})]})}),r.jsx("tbody",{children:ee.map($=>{var ce,xe,Y,Re,$e,ze,Le,oe,Se,Ve,Ae,ue;return r.jsxs("tr",{onClick:()=>R(`/dashboard/edit-complaint/${$.id}`),onMouseEnter:()=>$.patient_id&&H($.patient_id),className:"reception-row",children:[r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsxs("span",{className:"queue-token",children:["#",$.token_no]})," "]}),r.jsx("td",{children:r.jsxs("div",{className:"patient-cell-content",children:[r.jsx("span",{className:"reception-color-dot",style:{backgroundColor:((ce=$.Patient)==null?void 0:ce.color_code)||"#cbd5e1"},onClick:Te=>{var se;Te.stopPropagation(),(se=$.Patient)!=null&&se.id&&W($.Patient.id,$.Patient.color_code)},title:"Click to change color"}),r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:((xe=$.Patient)==null?void 0:xe.name)||"N/A"}),r.jsxs("span",{className:"details",children:[(Y=$.Patient)!=null&&Y.age?`${$.Patient.age}y`:"",(Re=$.Patient)!=null&&Re.gender?`, ${$.Patient.gender}`:""]})]})]})}),r.jsxs("td",{className:"desktop-only",children:[" ",r.jsx("div",{className:"text-sm text-gray-500",children:(($e=$.Patient)==null?void 0:$e.phone)||"-"})," "]}),r.jsx("td",{className:"desktop-only",children:r.jsx("span",{className:"reception-badge badge-neutral",children:$.complaint||"-"})}),r.jsxs("td",{className:"desktop-only",children:[r.jsx("span",{className:`reception-badge ${((ze=$.Patient)==null?void 0:ze.subscription_status)==="active"?"badge-active":((Le=$.Patient)==null?void 0:Le.subscription_status)==="cancelled"||((oe=$.Patient)==null?void 0:oe.subscription_status)==="expired"?"badge-inactive":"badge-neutral"}`,children:((Se=$.Patient)==null?void 0:Se.subscription_status)??"None"}),$.Patient&&$.Patient.id&&$.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:Te=>{Te.stopPropagation(),$.Patient&&R(`/start-subscription/${$.Patient.id}`)},className:"btn-start-sub ml-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden-mobile text-sm text-gray-500",children:G($.createdAt)}),r.jsx("td",{className:"action-doctor-cell",children:E===$.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:Te=>Te.stopPropagation(),children:r.jsxs("select",{value:"",onChange:Te=>F($.id,Te.target.value),onBlur:()=>k(null),className:"doctor-select",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),_?r.jsx("option",{disabled:!0,children:"Loading..."}):S.length>0?S.map(Te=>r.jsx("option",{value:Te.id,children:Te.name},Te.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:Te=>Te.stopPropagation(),children:[$.status==="waiting"&&r.jsx(r.Fragment,{children:(Ve=$.User)!=null&&Ve.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:$.User.name}),r.jsx("button",{onClick:()=>K($.id,"consulting"),className:"btn-action btn-start",children:"Start"})]}):_?r.jsx(te,{width:80,height:20}):S.length===0?r.jsx("span",{className:"text-red-500 text-xs",children:"No docs"}):S.length===1?r.jsxs("button",{onClick:()=>F($.id,S[0].id),className:"btn-action btn-assign",children:["Assign ",S[0].name.split(" ")[0]]}):r.jsx("button",{onClick:()=>k($.id),className:"btn-action btn-assign",children:"Assign"})}),$.status==="consulting"&&r.jsxs(r.Fragment,{children:[((Ae=$.User)==null?void 0:Ae.name)&&r.jsx("span",{className:"doctor-name-display",children:$.User.name}),r.jsx("button",{onClick:()=>K($.id,"seen"),className:"btn-action btn-complete",children:"Complete"})]}),$.status==="seen"&&r.jsxs(r.Fragment,{children:[((ue=$.User)==null?void 0:ue.name)&&r.jsx("span",{className:"doctor-name-display",children:$.User.name}),r.jsx("span",{className:"text-gray-400 italic text-xs",children:"Done"})]}),$.status==="cancelled"&&r.jsx("span",{className:"text-red-500 italic text-xs",children:"Cancelled"})]})})]},$.id)})})]})})]}),e==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx(aG,{currentUser:t}),r.jsxs("button",{onClick:()=>R("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(En,{size:16}),"Search Lab Reports"]})]}),e==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx(xv,{})}),e==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx(MM,{})}),e==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(SD,{})}),e==="custom-bill"&&r.jsx("div",{className:"custom-bill-tab-content",children:r.jsx(rG,{})}),e==="medical"&&r.jsx("div",{className:"medical-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(yG,{})}),e==="motion-detect"&&r.jsx("div",{className:"motion-detect-tab-content",style:{height:"100%"},children:r.jsx(AOe,{})}),e==="debt-management"&&r.jsx("div",{className:"debt-management-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(IN,{})}),e==="patient-files"&&r.jsx("div",{className:"patient-files-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(xG,{})}),e==="clinic-files"&&r.jsx("div",{className:"clinic-files-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(RM,{})}),e==="add-order"&&r.jsx("div",{className:"add-order-tab-content",style:{height:"100%",overflow:"auto"},children:r.jsx(cw,{})})]})]})},vG=6048e5,DOe=864e5,bG=6e4,jG=36e5,_B=Symbol.for("constructDateFrom");function Vo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&_B in t?t[_B](e):t instanceof Date?new t.constructor(e):new Date(e)}function gi(t,e){return Vo(e||t,t)}function OOe(t,e,n){const a=gi(t,n==null?void 0:n.in);if(isNaN(e))return Vo(t,NaN);const i=a.getDate(),s=Vo(t,a.getTime());s.setMonth(a.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(a.setFullYear(s.getFullYear(),s.getMonth(),i),a)}let MOe={};function US(){return MOe}function bb(t,e){var l,c,d,f;const n=US(),a=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=gi(t,e==null?void 0:e.in),s=i.getDay(),o=(s<a?7:0)+s-a;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function RN(t,e){return bb(t,{...e,weekStartsOn:1})}function wG(t,e){const n=gi(t,e==null?void 0:e.in),a=n.getFullYear(),i=Vo(n,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const s=RN(i),o=Vo(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=RN(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=l.getTime()?a:a-1}function CB(t){const e=gi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function IOe(t,...e){const n=Vo.bind(null,e.find(a=>typeof a=="object"));return e.map(n)}function TB(t,e){const n=gi(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function ROe(t,e,n){const[a,i]=IOe(n==null?void 0:n.in,t,e),s=TB(a),o=TB(i),l=+s-CB(s),c=+o-CB(o);return Math.round((l-c)/DOe)}function LOe(t,e){const n=wG(t,e),a=Vo(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),RN(a)}function FOe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function TD(t){return!(!FOe(t)&&typeof t!="number"||isNaN(+gi(t)))}function $Oe(t,e){const n=gi(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const BOe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zOe=(t,e,n)=>{let a;const i=BOe[t];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function qA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const qOe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},UOe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VOe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},HOe={date:qA({formats:qOe,defaultWidth:"full"}),time:qA({formats:UOe,defaultWidth:"full"}),dateTime:qA({formats:VOe,defaultWidth:"full"})},GOe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},WOe=(t,e,n,a)=>GOe[t];function lv(t){return(e,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let i;if(a==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const KOe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YOe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},QOe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XOe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eMe=(t,e)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},tMe={ordinalNumber:eMe,era:lv({values:KOe,defaultWidth:"wide"}),quarter:lv({values:YOe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:lv({values:QOe,defaultWidth:"wide"}),day:lv({values:XOe,defaultWidth:"wide"}),dayPeriod:lv({values:JOe,defaultWidth:"wide",formattingValues:ZOe,defaultFormattingWidth:"wide"})};function cv(t){return(e,n={})=>{const a=n.width,i=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?rMe(l,p=>p.test(o)):nMe(l,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function nMe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function rMe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function aMe(t){return(e,n={})=>{const a=e.match(t.matchPattern);if(!a)return null;const i=a[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const iMe=/^(\d+)(th|st|nd|rd)?/i,sMe=/\d+/i,oMe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lMe={any:[/^b/i,/^(a|c)/i]},cMe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uMe={any:[/1/i,/2/i,/3/i,/4/i]},dMe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hMe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fMe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pMe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mMe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gMe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yMe={ordinalNumber:aMe({matchPattern:iMe,parsePattern:sMe,valueCallback:t=>parseInt(t,10)}),era:cv({matchPatterns:oMe,defaultMatchWidth:"wide",parsePatterns:lMe,defaultParseWidth:"any"}),quarter:cv({matchPatterns:cMe,defaultMatchWidth:"wide",parsePatterns:uMe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:cv({matchPatterns:dMe,defaultMatchWidth:"wide",parsePatterns:hMe,defaultParseWidth:"any"}),day:cv({matchPatterns:fMe,defaultMatchWidth:"wide",parsePatterns:pMe,defaultParseWidth:"any"}),dayPeriod:cv({matchPatterns:mMe,defaultMatchWidth:"any",parsePatterns:gMe,defaultParseWidth:"any"})},xMe={code:"en-US",formatDistance:zOe,formatLong:HOe,formatRelative:WOe,localize:tMe,match:yMe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vMe(t,e){const n=gi(t,e==null?void 0:e.in);return ROe(n,$Oe(n))+1}function bMe(t,e){const n=gi(t,e==null?void 0:e.in),a=+RN(n)-+LOe(n);return Math.round(a/vG)+1}function NG(t,e){var f,p,g,x;const n=gi(t,e==null?void 0:e.in),a=n.getFullYear(),i=US(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(g=i.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,o=Vo((e==null?void 0:e.in)||t,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const l=bb(o,e),c=Vo((e==null?void 0:e.in)||t,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const d=bb(c,e);return+n>=+l?a+1:+n>=+d?a:a-1}function jMe(t,e){var l,c,d,f;const n=US(),a=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=NG(t,e),s=Vo((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,a),s.setHours(0,0,0,0),bb(s,e)}function wMe(t,e){const n=gi(t,e==null?void 0:e.in),a=+bb(n,e)-+jMe(n,e);return Math.round(a/vG)+1}function xr(t,e){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return n+a}const Vu={y(t,e){const n=t.getFullYear(),a=n>0?n:1-n;return xr(e==="yy"?a%100:a,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):xr(n+1,2)},d(t,e){return xr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return xr(t.getHours()%12||12,e.length)},H(t,e){return xr(t.getHours(),e.length)},m(t,e){return xr(t.getMinutes(),e.length)},s(t,e){return xr(t.getSeconds(),e.length)},S(t,e){const n=e.length,a=t.getMilliseconds(),i=Math.trunc(a*Math.pow(10,n-3));return xr(i,e.length)}},Cm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},kB={G:function(t,e,n){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const a=t.getFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return Vu.y(t,e)},Y:function(t,e,n,a){const i=NG(t,a),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return xr(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):xr(s,e.length)},R:function(t,e){const n=wG(t);return xr(n,e.length)},u:function(t,e){const n=t.getFullYear();return xr(n,e.length)},Q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return xr(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return xr(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,n){const a=t.getMonth();switch(e){case"M":case"MM":return Vu.M(t,e);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,n){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return xr(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,n,a){const i=wMe(t,a);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):xr(i,e.length)},I:function(t,e,n){const a=bMe(t);return e==="Io"?n.ordinalNumber(a,{unit:"week"}):xr(a,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Vu.d(t,e)},D:function(t,e,n){const a=vMe(t);return e==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):xr(a,e.length)},E:function(t,e,n){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return xr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return xr(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const a=t.getDay(),i=a===0?7:a;switch(e){case"i":return String(i);case"ii":return xr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const a=t.getHours();let i;switch(a===12?i=Cm.noon:a===0?i=Cm.midnight:i=a/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const a=t.getHours();let i;switch(a>=17?i=Cm.evening:a>=12?i=Cm.afternoon:a>=4?i=Cm.morning:i=Cm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Vu.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Vu.H(t,e)},K:function(t,e,n){const a=t.getHours()%12;return e==="Ko"?n.ordinalNumber(a,{unit:"hour"}):xr(a,e.length)},k:function(t,e,n){let a=t.getHours();return a===0&&(a=24),e==="ko"?n.ordinalNumber(a,{unit:"hour"}):xr(a,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Vu.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Vu.s(t,e)},S:function(t,e){return Vu.S(t,e)},X:function(t,e,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return EB(a);case"XXXX":case"XX":return Wh(a);case"XXXXX":case"XXX":default:return Wh(a,":")}},x:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"x":return EB(a);case"xxxx":case"xx":return Wh(a);case"xxxxx":case"xxx":default:return Wh(a,":")}},O:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+AB(a,":");case"OOOO":default:return"GMT"+Wh(a,":")}},z:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+AB(a,":");case"zzzz":default:return"GMT"+Wh(a,":")}},t:function(t,e,n){const a=Math.trunc(+t/1e3);return xr(a,e.length)},T:function(t,e,n){return xr(+t,e.length)}};function AB(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=Math.trunc(a/60),s=a%60;return s===0?n+String(i):n+String(i)+e+xr(s,2)}function EB(t,e){return t%60===0?(t>0?"-":"+")+xr(Math.abs(t)/60,2):Wh(t,e)}function Wh(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=xr(Math.trunc(a/60),2),s=xr(a%60,2);return n+i+e+s}const PB=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},SG=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},NMe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return PB(t,e);let s;switch(a){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",PB(a,e)).replace("{{time}}",SG(i,e))},SMe={p:SG,P:NMe},_Me=/^D+$/,CMe=/^Y+$/,TMe=["D","DD","YY","YYYY"];function kMe(t){return _Me.test(t)}function AMe(t){return CMe.test(t)}function EMe(t,e,n){const a=PMe(t,e,n);if(console.warn(a),TMe.includes(t))throw new RangeError(a)}function PMe(t,e,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const DMe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,OMe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MMe=/^'([^]*?)'?$/,IMe=/''/g,RMe=/[a-zA-Z]/;function gf(t,e,n){var f,p,g,x;const a=US(),i=a.locale??xMe,s=a.firstWeekContainsDate??((p=(f=a.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=a.weekStartsOn??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=gi(t,n==null?void 0:n.in);if(!TD(l))throw new RangeError("Invalid time value");let c=e.match(OMe).map(b=>{const j=b[0];if(j==="p"||j==="P"){const S=SMe[j];return S(b,i.formatLong)}return b}).join("").match(DMe).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const j=b[0];if(j==="'")return{isToken:!1,value:LMe(b)};if(kB[j])return{isToken:!0,value:b};if(j.match(RMe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(b=>{if(!b.isToken)return b.value;const j=b.value;(AMe(j)||kMe(j))&&EMe(j,e,String(t));const S=kB[j[0]];return S(l,j,i.localize,d)}).join("")}function LMe(t){const e=t.match(MMe);return e?e[1].replace(IMe,"'"):t}function UA(t,e){return+gi(t)<+gi(e)}function DB(t,e){const n=()=>Vo(e==null?void 0:e.in,NaN),i=zMe(t);let s;if(i.date){const d=qMe(i.date,2);s=UMe(d.restDateString,d.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(i.time&&(l=VMe(i.time),isNaN(l)))return n();if(i.timezone){if(c=HMe(i.timezone),isNaN(c))return n()}else{const d=new Date(o+l),f=gi(0,e==null?void 0:e.in);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return gi(o+l+c,e==null?void 0:e.in)}const Kj={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},FMe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,$Me=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,BMe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zMe(t){const e={},n=t.split(Kj.dateTimeDelimiter);let a;if(n.length>2)return e;if(/:/.test(n[0])?a=n[0]:(e.date=n[0],a=n[1],Kj.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Kj.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){const i=Kj.timezone.exec(a);i?(e.time=a.replace(i[1],""),e.timezone=i[1]):e.time=a}return e}function qMe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(n);if(!a)return{year:NaN,restDateString:""};const i=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((a[1]||a[2]).length)}}function UMe(t,e){if(e===null)return new Date(NaN);const n=t.match(FMe);if(!n)return new Date(NaN);const a=!!n[4],i=uv(n[1]),s=uv(n[2])-1,o=uv(n[3]),l=uv(n[4]),c=uv(n[5])-1;if(a)return QMe(e,l,c)?GMe(e,l,c):new Date(NaN);{const d=new Date(0);return!KMe(e,s,o)||!YMe(e,i)?new Date(NaN):(d.setUTCFullYear(e,s,Math.max(i,o)),d)}}function uv(t){return t?parseInt(t):1}function VMe(t){const e=t.match($Me);if(!e)return NaN;const n=VA(e[1]),a=VA(e[2]),i=VA(e[3]);return XMe(n,a,i)?n*jG+a*bG+i*1e3:NaN}function VA(t){return t&&parseFloat(t.replace(",","."))||0}function HMe(t){if(t==="Z")return 0;const e=t.match(BMe);if(!e)return 0;const n=e[1]==="+"?-1:1,a=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return JMe(a,i)?n*(a*jG+i*bG):NaN}function GMe(t,e,n){const a=new Date(0);a.setUTCFullYear(t,0,4);const i=a.getUTCDay()||7,s=(e-1)*7+n+1-i;return a.setUTCDate(a.getUTCDate()+s),a}const WMe=[31,null,31,30,31,30,31,31,30,31,30,31];function _G(t){return t%400===0||t%4===0&&t%100!==0}function KMe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(WMe[e]||(_G(t)?29:28))}function YMe(t,e){return e>=1&&e<=(_G(t)?366:365)}function QMe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function XMe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function JMe(t,e){return e>=0&&e<=59}const LM=({isEmbedded:t=!1})=>{const{customColumnsConfig:e,refetch:n}=oS(),a=e.lab_tests||[],[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState(!1),[b,j]=v.useState(null),[S,_]=v.useState(!1),[T,C]=v.useState(null),E=v.useRef(null),[k,P]=v.useState(!1),[I,R]=v.useState(null),[z,q]=v.useState(!1),[F,V]=v.useState(!1),[H,K]=v.useState(null),[W,B]=v.useState({name:"",description:"",price:"",default_parameters:[]}),G=v.useCallback(async()=>{x(!0),j(null),C(null),R(null);try{const se=await le("/api/lab-tests");if(!se.ok)throw new Error(`HTTP error! status: ${se.status}`);const be=await se.json();d(be)}catch(se){console.error("Error fetching lab tests:",se),j(se.message||"Failed to fetch lab tests.")}finally{x(!1)}},[]);v.useEffect(()=>{G()},[G]);const ee=se=>{const{name:be,value:_e}=se.target;B(Ne=>({...Ne,[be]:_e}))},X=(se,be,_e)=>{const Ne=[...W.default_parameters],Z=Ne[se];if(be==="type")switch(Z.type=_e,_e){case"number":Z.defaultValue=0,Z.lower_limit=null,Z.upper_limit=null,Z.unit="";break;case"boolean":Z.defaultValue=!1,Z.lower_limit=void 0,Z.upper_limit=void 0,Z.unit=void 0;break;case"string":default:Z.defaultValue="",Z.lower_limit=void 0,Z.upper_limit=void 0,Z.unit=void 0;break}else be==="defaultValue"?Z.type==="number"?Z.defaultValue=parseFloat(_e)||0:(Z.type,Z.defaultValue=_e):be==="lower_limit"||be==="upper_limit"?Z[be]=_e===""?null:parseFloat(_e):Z[be]=_e;B(ge=>({...ge,default_parameters:Ne}))},$=()=>{B(se=>({...se,default_parameters:[...se.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},ce=se=>{B(be=>({...be,default_parameters:be.default_parameters.filter((_e,Ne)=>Ne!==se)}))},xe=async se=>{se.preventDefault(),x(!0),j(null);const be=H!==null,_e=be?`/api/lab-tests/${H}`:"/api/lab-tests",Ne=be?"PUT":"POST";try{const Z=await le(_e,{method:Ne,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:W.name,description:W.description,price:parseFloat(W.price),default_parameters:W.default_parameters})});if(!Z.ok){const ge=await Z.json();throw new Error(ge.message||`HTTP error! status: ${Z.status}`)}V(!1),K(null),B({name:"",description:"",price:"",default_parameters:[]}),G()}catch(Z){console.error(`Error ${be?"updating":"adding"} lab test:`,Z),j(Z.message||`Failed to ${be?"update":"add"} lab test.`)}finally{x(!1)}},Y=()=>{K(null),B({name:"",description:"",price:"",default_parameters:[]}),V(!0)},Re=se=>{if(H===se.id)K(null);else{K(se.id);const be=(se.default_parameters||[]).map(_e=>({..._e,unit:_e.unit||"",lower_limit:_e.lower_limit===void 0?null:_e.lower_limit,upper_limit:_e.upper_limit===void 0?null:_e.upper_limit}));B({name:se.name,description:se.description||"",price:se.price,default_parameters:be}),V(!1)}},$e=async se=>{if(window.confirm("Are you sure you want to delete this lab test?")){x(!0),j(null);try{const be=await le(`/api/lab-tests/${se}`,{method:"DELETE"});if(!be.ok){const _e=await be.json();throw new Error(_e.message||`HTTP error! status: ${be.status}`)}G()}catch(be){console.error("Error deleting lab test:",be),j(be.message||"Failed to delete lab test.")}finally{x(!1)}}},ze=()=>{V(!1),K(null),j(null),B({name:"",description:"",price:"",default_parameters:[]})},Le=async se=>{if(!se){C("No file selected.");return}_(!0),C(null),j(null);const be=new FormData;be.append("file",se);try{const _e=await le("/api/lab-tests/import",{method:"POST",body:be});if(!_e.ok){const Ne=await _e.json();throw new Error(Ne.message||`Import failed: ${_e.statusText}`)}G()}catch(_e){console.error("Error importing lab tests from Excel:",_e),C(_e.message||"Failed to import lab tests from Excel.")}finally{_(!1)}},oe=async se=>{if(se.target.files&&se.target.files[0]){const be=se.target.files[0];await Le(be),se.target&&(se.target.value="")}},Se=async se=>{const be=se==="xray"?"X-Ray":"biochemistry and pathology";if(window.confirm(`Are you sure you want to import default ${be} tests? This will add new tests and may duplicate existing ones if names match.`)){P(!0),R(null),j(null);try{const _e=await le("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:se})});if(!_e.ok){const Ne=await _e.json();throw new Error(Ne.message||`Default import failed: ${_e.statusText}`)}G()}catch(_e){console.error(`Error importing default ${se} lab tests:`,_e),R(_e.message||`Failed to import default ${se} lab tests.`)}finally{P(!1)}}},Ve=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){q(!0),j(null),C(null),R(null);try{const se=await le("/api/lab-tests/all",{method:"DELETE"});if(!se.ok){const be=await se.json();throw new Error(be.message||`Delete all failed: ${se.statusText}`)}G()}catch(se){console.error("Error deleting all lab tests:",se),j(se.message||"Failed to delete all lab tests.")}finally{q(!1)}}},Ae=g||S||k||z,ue=v.useMemo(()=>new co(c,{keys:["name","description","default_parameters.name"],threshold:.3,ignoreLocation:!0}),[c]),Te=v.useMemo(()=>f?ue.search(f).map(se=>se.item):c,[c,f,ue]);return r.jsxs("div",{className:`lab-inventory-card ${t?"embedded":""}`,style:t?{border:"none",boxShadow:"none",padding:0}:{},children:[!t&&r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsx("div",{className:"mb-4",style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:r.jsx("input",{type:"text",placeholder:"Search by test name...",value:f,onChange:se=>p(se.target.value),className:"lab-inventory-input",style:{maxWidth:"300px",marginRight:"10px"}})}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:Y,className:"lab-inventory-button",disabled:Ae,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var se;return(se=E.current)==null?void 0:se.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:S?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:E,onChange:oe,accept:".xlsx, .xls",style:{display:"none"},disabled:S}),r.jsx("button",{onClick:()=>Se("general"),className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:k?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:()=>Se("xray"),className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:k?"Importing X-Rays...":"Import X-Rays"}),r.jsx("button",{onClick:Ve,className:"lab-inventory-button lab-inventory-button-danger",disabled:Ae,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:z?"Deleting All...":"Delete All Tests"}),r.jsxs("button",{onClick:()=>s(!0),className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,title:"Manage Custom Columns",children:[r.jsx(dd,{size:16,style:{marginRight:"4px"}})," Columns"]}),r.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"auto"},children:[r.jsxs("button",{onClick:()=>l(!1),className:`view-mode-btn ${o?"":"active"}`,title:"List View",children:[r.jsx(Pb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>l(!0),className:`view-mode-btn ${o?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(vf,{size:18})," Excel"]})]})]}),b&&r.jsx("div",{className:"error-text mb-4",children:b}),T&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",T]}),I&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",I]}),F&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:xe,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:W.name,onChange:ee,className:"lab-inventory-input",required:!0,disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:W.description,onChange:ee,rows:3,className:"lab-inventory-input",disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:W.price,onChange:ee,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),W.default_parameters.map((se,be)=>{var _e,Ne;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:se.name,onChange:Z=>X(be,"name",Z.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:se.type,onChange:Z=>X(be,"type",Z.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),se.type==="boolean"?r.jsxs("select",{value:se.defaultValue.toString(),onChange:Z=>X(be,"defaultValue",Z.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:se.type==="number"?"number":"text",placeholder:"Default Value",value:se.defaultValue.toString(),onChange:Z=>X(be,"defaultValue",Z.target.value),className:"lab-inventory-input"}),se.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:se.lower_limit===null?"":((_e=se.lower_limit)==null?void 0:_e.toString())??"",onChange:Z=>X(be,"lower_limit",Z.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:se.upper_limit===null?"":((Ne=se.upper_limit)==null?void 0:Ne.toString())??"",onChange:Z=>X(be,"upper_limit",Z.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:se.unit||"",onChange:Z=>X(be,"unit",Z.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ce(be),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},be)}),r.jsx("button",{type:"button",onClick:$,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:ze,className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:Ae,children:g?"Saving...":"Add Test"})]})]})]}),Ae&&!F?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"mb-4 flex gap-2",children:[1,2,3,4,5].map(se=>r.jsx(te,{width:100,height:36},se))}),r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"}),r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(se=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:"60%",height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:"90%",height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(te,{width:40,height:20}),r.jsx(te,{width:50,height:20})]})})]},se))})]}),r.jsx("p",{className:"loading-text mt-2 text-sm italic text-gray-500",children:S?"Importing Excel data...":k?"Importing default data...":"Loading tests..."})]}):null,!Ae&&Te.length===0&&!b&&!T&&!I&&r.jsx("p",{className:"no-data-message",children:f?`No lab tests found matching "${f}".`:"No lab tests found. Add one or import from Excel to get started."}),o&&Te.length>0?r.jsx($b,{columns:[{key:"name",label:"Test Name",editable:!0,type:"text"},{key:"description",label:"Description",editable:!0,type:"text"},{key:"price",label:"Price",editable:!0,type:"number"}],data:Te,editable:!0,showRowNumbers:!0,title:"Lab Test Inventory",onSave:async se=>{const be=se.map(async _e=>{const Ne=c.find(Z=>Z.id===_e.id);if(Ne&&(Ne.name!==_e.name||Ne.price!==_e.price||Ne.description!==_e.description))return le(`/api/lab-tests/${_e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)})});try{await Promise.all(be),G()}catch(_e){alert("Error saving changes"),console.error(_e)}}}):!Ae&&Te.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:Te.map(se=>{const be=H===se.id,_e=se.price&&typeof se.price=="string"?parseFloat(se.price):NaN,Ne=isNaN(_e)?"0.00":_e.toFixed(2);return r.jsxs(Ce.Fragment,{children:[r.jsxs("tr",{onClick:()=>Re(se),style:{cursor:"pointer"},children:[r.jsx("td",{children:se.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:se.description||"-"}),r.jsxs("td",{children:["",Ne]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:Z=>{Z.stopPropagation(),Re(se)},className:"lab-inventory-link",disabled:Ae,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:Z=>{Z.stopPropagation(),$e(se.id)},className:"lab-inventory-link",disabled:Ae,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),a.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:a.map(Z=>{var ge;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[Z.label,":"]})," ",(ge=se.custom_fields)!=null&&ge[Z.key]?String(se.custom_fields[Z.key]):"-"]},Z.key)})})})}),be&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:xe,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:W.name,onChange:ee,className:"lab-inventory-input",required:!0,disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:W.description,onChange:ee,rows:3,className:"lab-inventory-input",disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:W.price,onChange:ee,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:Ae})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),W.default_parameters.map((Z,ge)=>{var de,ae;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:Z.name,onChange:ne=>X(ge,"name",ne.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:Z.type,onChange:ne=>X(ge,"type",ne.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),Z.type==="boolean"?r.jsxs("select",{value:Z.defaultValue.toString(),onChange:ne=>X(ge,"defaultValue",ne.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:Z.type==="number"?"number":"text",placeholder:"Default Value",value:Z.defaultValue.toString(),onChange:ne=>X(ge,"defaultValue",ne.target.value),className:"lab-inventory-input"}),Z.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:Z.lower_limit===null?"":((de=Z.lower_limit)==null?void 0:de.toString())??"",onChange:ne=>X(ge,"lower_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:Z.upper_limit===null?"":((ae=Z.upper_limit)==null?void 0:ae.toString())??"",onChange:ne=>X(ge,"upper_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:Z.unit||"",onChange:ne=>X(ge,"unit",ne.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ce(ge),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},ge)}),r.jsx("button",{type:"button",onClick:$,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:ze,className:"lab-inventory-button lab-inventory-button-secondary",disabled:Ae,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:Ae,children:g?"Saving...":"Update Test"})]})]})]})})})]},se.id)})})]})]}),r.jsx(IM,{isOpen:i,onClose:()=>s(!1),entityType:"lab_tests",entityLabel:"Lab Tests",currentConfig:e,onConfigUpdated:()=>{n()}})]})},ZMe=t=>{let e="";if(!t.report_content)return"No report content available.";e+=`*Report Date:* ${t.report_date?new Date(t.report_date).toLocaleDateString():"N/A"}

`;try{const n=JSON.parse(t.report_content);typeof n=="object"&&n!==null&&t.tests?t.tests.forEach((a,i)=>{e+=`*Test: ${a.name}*
`,n[a.id]?Object.entries(n[a.id]).forEach(([s,o])=>{var f;const l=(f=a.default_parameters)==null?void 0:f.find(p=>p.name===s);let c=String(o),d="";if(l){const p=l.unit?` _${l.unit}_`:"";if(l.type==="boolean"){const g=o===!0||o==="true";c=g?"*Reactive*":"Non-Reactive",g||(d="`Normal: Non-Reactive`")}else if(l.type==="number"){const g=typeof o=="string"?parseFloat(o):typeof o=="number"?o:NaN;if(l.lower_limit!=null||l.upper_limit!=null){let x=[];l.lower_limit!=null&&x.push(`${l.lower_limit}`),l.upper_limit!=null&&x.push(`${l.upper_limit}`),d=`\`Normal: ${x.join(" - ")}\`${p}`,!isNaN(g)&&(l.lower_limit!=null&&g<l.lower_limit||l.upper_limit!=null&&g>l.upper_limit)&&(c=`*${c}*`)}}l.unit&&(c+=p)}e+=`${s}: ${c}
`,d&&((l==null?void 0:l.type)==="boolean"&&(o===!0||o==="true")||(e+=`${d}
`))}):e+=`_No parameters reported for this test._
`,i<t.tests.length-1&&(e+=`
`)}):e+=t.report_content}catch{e+=t.report_content}return e},FM=t=>{var o;if(!((o=t==null?void 0:t.Patient)!=null&&o.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(t!=null&&t.report_content)){alert("Cannot share report: No report content is available to share.");return}const e=t.Patient.name||"Patient",n=ZMe(t),a=`Hello ${e},

Your lab report is ready.

${n}`,s=`https://wa.me/${eIe(t.Patient.phone)}?text=${encodeURIComponent(a)}`;window.open(s,"_blank")},eIe=t=>{let e=t.replace(/\D/g,"");const n=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,a=e.match(n);return a?e="91"+a[1]:e.startsWith("91")||(e="91"+e),e},OB=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState("orders"),[g,x]=v.useState(1),[b]=v.useState(20),[j,S]=v.useState(0),_=v.useMemo(()=>Math.ceil(j/b),[j,b]),T=v.useCallback(async(F=1,V="")=>{s(!0),d(null);try{const H=new URLSearchParams({page:String(F),limit:String(b)});V&&H.append("search",V);const K=await le(`/api/lab?${H.toString()}`);if(!K.ok)throw new Error(`HTTP error! status: ${K.status}`);const W=await K.json(),B=W.orders.map(G=>{var ee,X;return{id:G.id,labTokenNumber:String(G.lab_token_number??"N/A"),patientName:((ee=G.Patient)==null?void 0:ee.name)||"N/A",patientId:G.patient_id,patientTokenNumber:String(((X=G.Patient)==null?void 0:X.patient_token_number)??"N/A"),tests:(G.tests||[]).map($=>$.name||"Unknown Test"),date:gf(new Date(G.createdAt),"yyyy-MM-dd"),status:G.status,reportId:G.reportId,billId:G.billId}});e(B),S(W.totalCount),x(F)}catch(H){console.error("Failed to fetch lab orders:",H),d(H instanceof Error?H.message:"An unknown error occurred"),e([]),S(0)}finally{s(!1),l(!1)}},[b]);v.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${g}, Search term: "${n}"`),n.length===0||n.length>=2?(console.log(`Condition met (length ${n.length}). Fetching orders...`),T(g,n)):console.log(`Condition not met (length ${n.length}). Not fetching.`)},[T,g,n]),v.useEffect(()=>{const F=setTimeout(()=>{n.length>=2?g!==1&&x(1):n.length<2&&g!==1&&x(1)},1e3);return()=>{clearTimeout(F)}},[n]);const C=async(F,V)=>{console.log(`Updating order ${F} to status ${V}`);try{const H=await le(`/api/lab/${F}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:V})});if(!H.ok){const K=await H.json();throw new Error(K.message||`Failed to update status: ${H.status}`)}if(V==="completed"){const K=await le(`/api/lab/orders/${F}/report`);if(K.ok){const W=await K.json();FM(W)}}await T(g,n),console.log(`Order ${F} status updated to ${V}, refetching page ${g}`)}catch(H){console.error("Error updating status:",H),alert(`Failed to update status: ${H instanceof Error?H.message:"Unknown error"}`)}},{openCommandBar:E}=Rc(),k=Ft(),P=F=>{if(!F){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}F.billId?(console.log(`Navigating to existing bill for Bill ID: ${F.billId}, Patient: ${F.patientName}`),k("/billing",{state:{billId:F.billId,patientId:F.patientId,patientName:F.patientName,billType:"lab"}})):(console.log(`Navigating to LabBillingPage for Order ID: ${F.id}`),k(`/dashboard/lab-billing/${F.id}`))},I=F=>{F&&F.id?k(`/lab/report/${F.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},R=F=>{switch(F){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:F,className:"status-badge"}}};if(i&&o)return r.jsxs("div",{className:"admin-panel-container",children:[r.jsx("div",{className:"admin-nav-bar",children:[1,2,3,4].map(F=>r.jsx(te,{width:100,height:40,style:{borderRadius:"8px",margin:"0 8px"}},F))}),r.jsxs("div",{className:"admin-content-section",style:{padding:"20px"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx(te,{width:200,height:32}),r.jsx(te,{width:300,height:40})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(te,{width:150,height:32})})]},F))})]})})]})]});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(Br,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:c}),r.jsx("button",{onClick:()=>T(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const z=()=>{g>1&&x(F=>F-1)},q=()=>{g<_&&x(F=>F+1)};return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("div",{className:"admin-nav-bar",children:[r.jsxs("button",{onClick:()=>k(-1),className:"admin-nav-button",title:"Back",children:[r.jsx(sn,{})," Back"]}),r.jsxs("button",{onClick:()=>p("orders"),className:`admin-nav-button ${f==="orders"?"active":""}`,children:[r.jsx(SE,{})," Orders"]}),r.jsx("button",{onClick:()=>k("/create-lab-order"),className:"admin-nav-button",children:"Create New Lab Order"}),r.jsxs("button",{onClick:()=>p("inventory"),className:`admin-nav-button ${f==="inventory"?"active":""}`,children:[r.jsx(kQ,{})," Inventory"]}),r.jsxs("button",{onClick:()=>E(),className:"admin-nav-button",children:[r.jsx(HD,{})," Newton's AI"]})]}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[f==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:n,onChange:F=>a(F.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(En,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[i&&!c&&t.length===0&&[1,2,3,4,5].map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(te,{width:150,height:32})})]},F)),!i&&!c&&t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."})}),!i&&!c&&t.map(F=>{const V=R(F.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:F.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",F.patientTokenNumber]})]}),r.jsx("td",{children:F.tests.map((H,K)=>r.jsx("div",{children:H},K))}),r.jsx("td",{className:"hidden md:table-cell",children:F.date}),r.jsx("td",{children:r.jsx("span",{className:V.className,children:V.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[F.status==="pending"&&r.jsx("button",{onClick:()=>P(F),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),F.status==="billed"&&r.jsx("button",{onClick:()=>C(F.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),F.status==="collected"&&r.jsx("button",{onClick:()=>C(F.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(F.status==="processing"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>I(F),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>C(F.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(F.status==="completed"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>{F.id?k(`/lab/view-report/${F.id}`):(console.error("Attempted to view report for an order with no ID:",F),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},F.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[i&&!c&&t.length===0&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>r.jsx("div",{className:"lab-order-card",children:r.jsx(te,{width:"100%",height:150})},F))}),!i&&!c&&t.length===0&&r.jsx("div",{className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."}),!i&&!c&&t.map(F=>{const V=R(F.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:F.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",F.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:F.date})]}),r.jsx("span",{className:`${V.className} lab-card-status-pill`,children:V.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),F.tests.map((H,K)=>r.jsx("div",{className:"lab-card-test-item",children:H},K)),F.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[F.status==="pending"&&r.jsx("button",{onClick:()=>P(F),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),F.status==="billed"&&r.jsx("button",{onClick:()=>C(F.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),F.status==="collected"&&r.jsx("button",{onClick:()=>C(F.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(F.status==="processing"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>I(F),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>C(F.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(F.status==="completed"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>{F.id?k(`/lab/view-report/${F.id}`):(console.error("Attempted to view report for an order with no ID:",F),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},F.id)})]}),!i&&j>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(g-1)*b+1})," ","to"," ",r.jsx("strong",{children:Math.min(g*b,j)})," ","of"," ",r.jsx("strong",{children:j})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:z,disabled:g===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(Ab,{size:18})}),r.jsxs("span",{children:["Page ",g," of ",_]}),r.jsx("button",{onClick:q,disabled:g===_,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(pd,{size:18})})]})]})]}),f==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(LM,{})]})]})})," "]})},HA=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(null),c=Ft(),d=v.useRef(null),{openCommandBar:f}=Rc(),p=ds(),g=R=>{R&&(p.prefetchQuery({queryKey:Gt.patients.context(R),queryFn:async()=>{const z=await le(`/api/patients/${R}/context`);if(!z.ok)throw new Error("Failed to fetch patient context");return z.json()},staleTime:5*60*1e3}),p.prefetchQuery({queryKey:Gt.patientDebts.balance(R),queryFn:async()=>{const z=await le(`/api/patient-debts/${R}/balance`);return z.ok?z.json():{netDebt:0}},staleTime:1*60*1e3}),p.prefetchQuery({queryKey:Gt.queue.latest(R),queryFn:async()=>{const z=await le(`/api/queue/patient/${R}/latest`);if(!z.ok)throw new Error("Failed to fetch latest queue status");const q=await z.json();return q!=null&&q._id&&p.prefetchQuery({queryKey:Gt.queue.entry(q._id),queryFn:async()=>{const F=await le(`/api/queue/doctor/complaint/${q._id}`);if(!F.ok)throw new Error("Failed to fetch complaint record");return F.json()},staleTime:1*60*1e3}),q},staleTime:5e3}),p.prefetchQuery({queryKey:Gt.dental.records(R),queryFn:async()=>{const z=await le(`/api/dental/patient/${R}`);if(!z.ok)throw new Error("Failed to fetch dental records");return z.json()},staleTime:5*60*1e3}))},[x,b]=v.useState(1),[j,S]=v.useState(1),_=10,T=v.useCallback(async(R,z,q)=>{s(!0),l(null);try{let F=`/api/pharmacy-orders?page=${R}&limit=${z}`;q&&q.trim()!==""&&(F+=`&search=${encodeURIComponent(q.trim())}`);const V=await le(F);if(!V.ok)throw new Error(`Failed to fetch orders: ${V.statusText} (${V.status})`);const H=await V.json();H&&Array.isArray(H.orders)?(e(H.orders),S(H.totalPages||1),b(H.currentPage||R)):e([])}catch(F){console.error("Failed to fetch pharmacy orders:",F),l(F.message||"Failed to fetch orders."),e([])}finally{s(!1)}},[]);v.useEffect(()=>(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{T(n?1:x,_,n)},500),()=>{d.current&&clearTimeout(d.current)}),[n,x,T]);const C=R=>c(`/dashboard/edit-pharmacy-order/${R}`),E=R=>c(`/dashboard/edit-complaint/patient/${R.patientId}`),k=R=>{const z=t.find(q=>q.id===R);if(z){const q=z.medications.map(F=>({name:F.name,pack_quantity:F.pack_quantity,loose_quantity:F.loose_quantity,price:F.price??0,pack_price:F.pack_price,loose_price:F.loose_price,total_price:F.total_price,isLoose:F.isLoose,unit:F.unit,drug_id:F.drug_id?String(F.drug_id):null,tabletsPerDay:F.tabletsPerDay,numberOfDays:F.numberOfDays,directions_to_use:F.directions_to_use,discount_percentage:0,batch:F.batch,expiry_date:F.expiry_date}));c(`/dashboard/pharmacy-billing/${R}`,{state:{initialItems:q}})}},P=async(R,z)=>{const q=t.find(F=>F.id===R);if(q)try{const F=await le(`/api/pharmacy-orders/${R}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:z,medications:q.medications})});if(F.ok){const V=await F.json();e(H=>H.map(K=>K.id===V.id?{...K,status:V.status}:K))}}catch(F){console.error("Status update failed",F),alert("Failed to update status")}},I=R=>`pq-pill ${R}`;return r.jsxs("div",{className:"pq-container",children:[r.jsxs("div",{className:"pq-header",children:[r.jsxs("div",{className:"pq-nav-actions",children:[r.jsxs("button",{onClick:()=>c("/dashboard/add-order"),className:"pq-btn",children:[r.jsx(Ps,{})," Add Order"]}),r.jsxs("button",{onClick:()=>c("/dashboard/inventory"),className:"pq-btn",children:[r.jsx(ud,{})," Inventory"]}),r.jsxs("button",{onClick:()=>f(),className:"pq-btn",children:[r.jsx(HD,{})," Newton's AI"]}),r.jsxs("button",{onClick:()=>c("/dashboard/distributors"),className:"pq-btn",children:[r.jsx(ud,{})," Distributors"]})]}),r.jsxs("div",{className:"pq-search-wrap",children:[r.jsx(En,{className:"pq-search-icon"}),r.jsx("input",{className:"pq-search-input",placeholder:"Search orders...",value:n,onChange:R=>a(R.target.value)})]})]}),r.jsxs("div",{className:"pq-card",children:[r.jsxs("div",{className:"pq-card-content",children:[i&&t.length===0&&r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3].map(R=>r.jsx(te,{height:40,className:"mb-2"},R))}),o&&r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]}),!i&&!o&&t.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."}),!i&&t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pq-table-wrapper",children:r.jsxs("table",{className:"pq-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map(R=>r.jsxs("tr",{className:"pq-row",onClick:()=>E(R),onMouseEnter:()=>g(R.patientId),children:[r.jsxs("td",{children:[r.jsx("div",{className:"pq-text-bold",children:R.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",R.patientTokenNumber]})]}),r.jsx("td",{children:r.jsxs("div",{className:"pq-nested-table-wrap",children:[r.jsx("table",{className:"pq-nested-table",children:r.jsx("tbody",{children:R.medications.map((z,q)=>r.jsxs("tr",{children:[r.jsx("td",{className:"pq-text-bold",children:z.name}),r.jsxs("td",{children:[z.pack_quantity>0&&`Pack: ${z.pack_quantity} `,z.loose_quantity>0&&`Loose: ${z.loose_quantity}`]}),r.jsx("td",{className:"pq-text-sm",children:z.directions_to_use})]},q))})}),R.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"mt-1 text-xs opacity-75 pq-markdown",children:[r.jsx("strong",{children:"Note:"})," ",r.jsx(Nf,{remarkPlugins:[Sf],children:R.prescriptionForUnavailableDrugs})]})]})}),r.jsx("td",{className:"pq-text-sm",children:new Date(R.date).toLocaleDateString()}),r.jsxs("td",{className:"pq-text-mono pq-text-bold",children:["",Number(R.order_total||0).toFixed(2)]}),r.jsx("td",{children:r.jsx("span",{className:I(R.status),children:R.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pq-actions",children:[R.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:z=>{z.stopPropagation(),C(R.id)},className:"pq-action-btn pq-btn-edit",children:[r.jsx(Bi,{size:12})," Edit"]}),r.jsxs("button",{onClick:z=>{z.stopPropagation(),k(R.id)},className:"pq-action-btn pq-btn-bill",children:[r.jsx(cd,{size:12})," Bill"]})]}),R.status==="billed"&&r.jsxs("button",{onClick:z=>{z.stopPropagation(),P(R.id,"dispensed")},className:"pq-action-btn pq-btn-dispense",children:[r.jsx(Wo,{size:12})," Dispense"]}),(R.status==="pending"||R.status==="billed")&&r.jsx("button",{onClick:z=>{z.stopPropagation(),P(R.id,"cancelled")},className:"pq-action-btn pq-btn-cancel",children:"Cancel"}),r.jsx("button",{onClick:z=>{z.stopPropagation(),E(R)},onMouseEnter:()=>g(R.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})]})})]},R.id))})]})}),r.jsx("div",{className:"pq-card-list",children:t.map(R=>r.jsxs("div",{className:"pq-mobile-card",onClick:()=>E(R),onMouseEnter:()=>g(R.patientId),children:[r.jsxs("div",{className:"pq-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pq-text-bold",children:R.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",R.patientTokenNumber]})]}),r.jsx("span",{className:I(R.status),children:R.status})]}),r.jsx("div",{className:"mb-2",children:R.medications.slice(0,3).map((z,q)=>r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[z.name," (",z.pack_quantity>0?`${z.pack_quantity}p`:""," ",z.loose_quantity>0?`${z.loose_quantity}l`:"",")"]},q))}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("div",{className:"pq-text-mono pq-text-bold",children:["",Number(R.order_total||0).toFixed(2)]}),r.jsx("div",{className:"pq-actions",children:r.jsx("button",{onClick:z=>{z.stopPropagation(),E(R)},onMouseEnter:()=>g(R.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})})]})]},R.id))})]})]}),!i&&j>1&&r.jsxs("div",{className:"pq-footer px-4 pb-4",children:[r.jsxs("div",{className:"pq-page-info",children:["Page ",x," of ",j]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"pq-pagination-btn",disabled:x===1,onClick:()=>b(R=>Math.max(1,R-1)),children:r.jsx(Ab,{size:16})}),r.jsx("button",{className:"pq-pagination-btn",disabled:x===j,onClick:()=>b(R=>Math.min(j,R+1)),children:r.jsx(pd,{size:16})})]})]})]})]})},GA=10,tIe=3,CG=({isEmbedded:t=!1,initialSearch:e=""})=>{const n=Ft(),{customColumnsConfig:a,refetch:i}=oS(),s=a.drugs||[],[o,l]=v.useState(!1),[c,d]=v.useState(!1),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(e),[S,_]=v.useState(!0),[T,C]=v.useState(null),[E,k]=v.useState(new Set),[P,I]=v.useState("all"),R=async()=>{try{const ke=await le("/api/inventory/download-csv");if(!ke.ok)throw new Error(`Failed to download CSV: ${ke.statusText}`);const ot=await ke.blob(),Tt=window.URL.createObjectURL(ot),Ue=document.createElement("a");Ue.href=Tt,Ue.download="pharmacy_inventory.csv",document.body.appendChild(Ue),Ue.click(),Ue.remove(),window.URL.revokeObjectURL(Tt)}catch(ke){console.error("Failed to download CSV:",ke),C(ke.message||"Failed to download inventory CSV. Please try again.")}},[z,q]=v.useState(!1),[F,V]=v.useState(!1),[H,K]=v.useState(null),[W,B]=v.useState(!1),[G,ee]=v.useState(new Set),[X,$]=v.useState(1),ce=8,[xe,Y]=v.useState(null),[Re,$e]=v.useState(0),[ze,Le]=v.useState(!1),[oe,Se]=v.useState(null),[Ve,Ae]=v.useState(1),[ue,Te]=v.useState(!1),se=X*ce,be=se-ce,_e=g.slice(be,se),Ne=Math.ceil(g.length/ce);v.useEffect(()=>{$(1)},[b,P]);const Z=v.useCallback(async()=>{_(!0),C(null);try{const ke=await le("/api/drugs");if(!ke.ok)throw new Error(`Failed to fetch drugs: ${ke.statusText} (${ke.status})`);const ot=await ke.json();let Tt=Array.isArray(ot)?ot:ot.drugs||[];Tt=Tt.map(Ue=>({...Ue,mrp:parseFloat(String(Ue.mrp))||0,rate:Ue.rate!==null&&Ue.rate!==void 0?parseFloat(String(Ue.rate)):null,stock:parseInt(String(Ue.stock),10)||0,gst:Ue.gst!==null&&Ue.gst!==void 0?parseFloat(String(Ue.gst)):null,margin:Ue.margin!==null&&Ue.margin!==void 0?parseFloat(String(Ue.margin)):null,discount:Ue.discount!==null&&Ue.discount!==void 0?parseFloat(String(Ue.discount)):null})),p(Tt),x(Tt)}catch(ke){console.error("Failed to fetch drugs:",ke),C(ke.message||"Failed to load inventory. Please try again.")}finally{_(!1)}},[]);v.useEffect(()=>{Z()},[Z]),v.useEffect(()=>{e&&j(e)},[e]);const ge=v.useMemo(()=>new co(f,{keys:["name","brand_name","description","supplier","box_number"],threshold:.3,ignoreLocation:!0}),[f]);v.useEffect(()=>{let ke=f;b&&(ke=ge.search(b).map(Ue=>Ue.item));const ot=new Date,Tt=OOe(ot,tIe);P==="low-stock"?ke=ke.filter(Ue=>Ue.stock<=GA):P==="near-expiry"?ke=ke.filter(Ue=>{if(!Ue.expiry_date)return!1;const jt=DB(Ue.expiry_date);return TD(jt)&&UA(jt,Tt)&&!UA(jt,ot)}):P==="expired"&&(ke=ke.filter(Ue=>{if(!Ue.expiry_date)return!1;const jt=DB(Ue.expiry_date);return TD(jt)&&UA(jt,ot)})),x(ke)},[b,f,P,ge]);const de=()=>{q(!1),Y(null)},ae=ke=>{$e(parseInt(ke.target.value,10)||0)},ne=async ke=>{if(ke.preventDefault(),C(null),!xe||!xe.id||Re===0){C("No drug selected or adjustment amount is zero.");return}try{const ot=await le(`/api/drugs/${xe.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:Re})});if(!ot.ok){const Ue=await ot.json();throw new Error(Ue.message||`Failed to adjust stock: ${ot.statusText}`)}const Tt=await ot.json();p(Ue=>Ue.map(jt=>jt.id===Tt.id?Tt:jt)),de()}catch(ot){console.error("Failed to adjust stock:",ot),C(ot.message||"Failed to adjust stock. Please try again.")}},ie=ke=>{K(ke),V(!0)},je=()=>{V(!1),K(null)},Ee=async()=>{if(!H||!H.id){C("No drug selected for deletion.");return}_(!0),C(null);try{const ke=await le(`/api/drugs/${H.id}`,{method:"DELETE"});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete drug: ${ke.statusText}`)}Z(),je()}catch(ke){console.error("Failed to delete drug:",ke),C(ke.message||"Failed to delete drug. Please try again.")}finally{_(!1)}},Q=()=>{B(!0)},ye=()=>{B(!1)},[me,he]=v.useState(!1),De=()=>{G.size>0&&he(!0)},nt=()=>{he(!1)},Fe=async()=>{if(G.size===0){C("No drugs selected for deletion.");return}_(!0),C(null);try{const ke=await le("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(G)})});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete selected drugs: ${ke.statusText}`)}Z(),ee(new Set),nt()}catch(ke){console.error("Failed to delete selected drugs:",ke),C(ke.message||"Failed to delete selected drugs. Please try again.")}finally{_(!1)}},Ge=async()=>{_(!0),C(null);try{const ke=await le("/api/drugs/all",{method:"DELETE"});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete all drugs: ${ke.statusText}`)}Z(),ye()}catch(ke){console.error("Failed to delete all drugs:",ke),C(ke.message||"Failed to delete all drugs. Please try again.")}finally{_(!1)}},it=ke=>{if(!ke)return null;const ot=ke.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return ot?parseInt(ot[1],10):null},wt=ke=>{Se(ke),Ae(1),Le(!0)},we=()=>{Le(!1),Se(null),Ae(1)},Qe=ke=>{Ae(parseInt(ke.target.value,10)||0)},Xe=async ke=>{if(ke.preventDefault(),C(null),!oe||!oe.id||Ve<=0){C("No drug selected or invalid number of packs to convert.");return}const ot=it(oe.pack);if(!ot||ot<=0){C(`Cannot convert "${oe.name}" to loose. Invalid pack unit: ${oe.pack||"N/A"}.`);return}if(Ve>(oe.stock??0)){C(`Cannot convert ${Ve} packs. Only ${oe.stock??0} packs are in stock.`);return}try{const Tt=await le(`/api/drugs/${oe.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:Ve,packSize:ot})});if(!Tt.ok){const jt=await Tt.json();throw new Error(jt.message||`Failed to convert to loose: ${Tt.statusText}`)}const Ue=await Tt.json();p(jt=>jt.map(kt=>kt.id===Ue.id?Ue:kt)),we()}catch(Tt){console.error("Failed to convert to loose:",Tt),C(Tt.message||"Failed to convert to loose. Please try again.")}finally{_(!1)}},ct=()=>{Te(!0)},Ct=()=>{Te(!1)},bt=async()=>{_(!0),C(null);try{const ke=await le("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to add default medications: ${ke.statusText}`)}Z(),Ct()}catch(ke){console.error("Failed to add default medications:",ke),C(ke.message||"Failed to add default medications. Please try again.")}finally{_(!1)}};return S?r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsx("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[1,2,3,4].map(ke=>r.jsx(te,{width:120,height:36},ke))}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsx(te,{width:100,height:36}),[1,2,3,4].map(ke=>r.jsx(te,{width:120,height:36},ke))]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsx(te,{width:"100%",height:40,style:{maxWidth:"600px"}}),r.jsx(te,{width:150,height:40})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx(te,{width:20,height:20})}),r.jsx("th",{children:"DRUG DETAILS"}),r.jsx("th",{children:"PACK"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{className:"qty-header",children:"STOCK"}),r.jsx("th",{className:"mrp-header",children:"MRP"}),r.jsx("th",{className:"rate-header",children:"RATE"}),r.jsx("th",{children:"BOX"}),r.jsx("th",{children:"DISC %"}),r.jsx("th",{children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ke=>r.jsxs("tr",{children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx(te,{width:20,height:20})}),r.jsxs("td",{children:[r.jsx(te,{width:"80%",height:20}),r.jsx(te,{width:"40%",height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsxs("td",{children:[r.jsx(te,{width:40,height:20}),r.jsx(te,{width:60,height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:40,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(te,{width:20,height:20}),r.jsx(te,{width:20,height:20}),r.jsx(te,{width:20,height:20})]})})]},ke))})]})})]}):T?r.jsxs("div",{className:"error-indicator",children:["Error: ",T]}):r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline add-drug-button",children:[r.jsx(Ps,{size:18}),"Add New Drug"]}),r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline",children:[r.jsx(Ps,{size:18}),"Purchase Page"]}),r.jsxs("button",{onClick:()=>n("/dashboard/distributors"),className:"action-button-outline",children:[r.jsx(Ps,{size:18}),"Distributors"]}),r.jsxs("button",{onClick:()=>l(!0),className:"action-button-outline",title:"Manage Custom Columns",children:[r.jsx(dd,{size:18}),"Columns"]})]}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>d(!1),className:`view-mode-btn ${c?"":"active"}`,title:"List View",children:[r.jsx(Pb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>d(!0),className:`view-mode-btn ${c?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(vf,{size:18})," Excel"]})]}),r.jsx("button",{onClick:R,className:"action-button-outline",children:"Download CSV"}),r.jsxs("button",{onClick:ct,className:"action-button-outline",children:[r.jsx(Ps,{size:18}),"Import Defaults"]}),r.jsxs("button",{onClick:De,className:"action-button-outline delete-button-outline",disabled:G.size===0,children:[r.jsx(Wn,{size:18}),"Delete (",G.size,")"]}),r.jsxs("button",{onClick:Q,className:"action-button-outline delete-all-button-outline",children:[r.jsx(Wn,{size:18}),"Delete All"]})]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsxs("div",{className:"search-input-wrapper",style:{maxWidth:"600px"},children:[r.jsx(En,{size:20,className:"search-input-icon"}),r.jsx("input",{type:"text",placeholder:"Search drugs...",value:b,onChange:ke=>j(ke.target.value),className:"inventory-search-input"})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("select",{value:P,onChange:ke=>I(ke.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})})]}),c?r.jsx("div",{className:"inventory-table-container",style:{padding:"1rem"},children:r.jsx($b,{title:"Pharmacy Inventory",columns:[{key:"name",label:"Drug Name",type:"text",editable:!0},{key:"brand_name",label:"Brand Name",type:"text",editable:!0},{key:"pack",label:"Pack",type:"text",editable:!0},{key:"expiry_date",label:"Expiry",type:"date",editable:!0},{key:"stock",label:"Stock",type:"number",editable:!0},{key:"mrp",label:"MRP",type:"number",editable:!0},{key:"rate",label:"Rate",type:"number",editable:!0},{key:"box_number",label:"Box",type:"text",editable:!0},{key:"discount",label:"Discount %",type:"number",editable:!0},{key:"gst",label:"GST %",type:"number",editable:!0},{key:"supplier",label:"Supplier",type:"text",editable:!0}],data:g,onSave:async ke=>{try{for(const ot of ke)ot.id&&await le(`/api/drugs/${ot.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)});Z()}catch(ot){console.error("Failed to save:",ot),C(ot.message||"Failed to save changes")}},editable:!0,showRowNumbers:!0})}):r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx("input",{type:"checkbox",onChange:ke=>{if(ke.target.checked){const ot=new Set(g.map(Tt=>Tt.id));ee(ot)}else ee(new Set)},checked:G.size===g.length&&g.length>0,disabled:g.length===0})}),r.jsx("th",{className:"drug-name-header",children:"DRUG DETAILS"}),r.jsx("th",{className:"pack-header",children:"PACK"}),r.jsx("th",{className:"expiry-header",children:"EXPIRY"}),r.jsx("th",{className:"text-stock qty-header",children:"STOCK"}),r.jsx("th",{className:"text-price mrp-header",children:"MRP"}),r.jsx("th",{className:"text-cost rate-header",children:"RATE"}),r.jsx("th",{className:"box-number-header",children:"BOX"}),r.jsx("th",{className:"discount-header",children:"DISC %"}),r.jsx("th",{className:"margin-header",children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsxs("tbody",{children:[g.length===0&&r.jsx("tr",{className:"no-results-message",children:r.jsx("td",{colSpan:11,children:"No drugs found matching your search."})}),_e.map(ke=>r.jsxs(Ce.Fragment,{children:[r.jsxs("tr",{className:"drug-row",onClick:()=>{const ot=new Set(E);ot.has(ke.id)&&ke.id!==void 0?ot.delete(ke.id):ke.id!==void 0&&ot.add(ke.id),k(ot)},children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx("input",{type:"checkbox",onClick:ot=>ot.stopPropagation(),checked:G.has(ke.id),onChange:()=>{const ot=new Set(G);ot.has(ke.id)?ot.delete(ke.id):ot.add(ke.id),ee(ot)}})}),r.jsx("td",{className:"drug-name-cell",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("span",{className:"text-xs text-muted-foreground",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:ke.name})]})}),r.jsx("td",{className:"text-muted pack-cell",children:ke.pack||"-"}),r.jsx("td",{className:"text-muted",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"}),r.jsxs("td",{className:`text-stock ${ke.stock<=GA?"low-stock":""}`,children:[r.jsx("div",{style:{fontWeight:"bold"},children:ke.stock}),r.jsx("div",{className:"loose-quantity",children:ke.loose!==null&&ke.loose!==void 0?`${ke.loose} loose`:"0 loose"})]}),r.jsxs("td",{className:"text-muted text-price",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]}),r.jsx("td",{className:"text-muted text-cost",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"}),r.jsx("td",{className:"text-muted",children:ke.box_number||"-"}),r.jsx("td",{className:"text-muted",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"}),r.jsx("td",{className:"text-muted",children:(()=>{const ot=ke.mrp||0,Tt=ke.rate||0,Ue=ke.discount||0,jt=ke.gst||0,Kn=Tt*(1-Ue/100)*(1+jt/100),vt=ot-Kn;return`${(ot>0?vt/ot*100:0).toFixed(2)}%`})()}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:ot=>{ot.stopPropagation(),n(`/dashboard/inventory/edit/${ke.id}`)},className:"action-icon-button",title:"Edit Drug",children:r.jsx(Bi,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),ie(ke)},className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(Wn,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),Y(ke),q(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:r.jsx(TI,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),wt(ke)},className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!ke.pack||it(ke.pack)===null,children:r.jsx(PI,{size:16})})]})})]}),E.has(ke.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:11,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",ke.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",ke.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Batch:"})," ",ke.batch||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"HSN Code:"})," ",ke.hsn_code||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"MFG:"})," ",ke.mfg||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose Price:"}),(()=>{const ot=it(ke.pack);return ot&&ot>0&&typeof ke.mrp=="number"?`${(ke.mrp/ot).toFixed(2)}`:"N/A"})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"GST:"})," ",ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(ke.last_updated).toLocaleString()]}),s.length>0&&r.jsx("div",{className:"custom-fields-display",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px dashed var(--border-color)"},children:s.map(ot=>{var Tt;return r.jsxs("p",{children:[r.jsxs("strong",{children:[ot.label,":"]})," ",(Tt=ke.custom_fields)!=null&&Tt[ot.key]?String(ke.custom_fields[ot.key]):"-"]},ot.key)})})]})})})]},ke.id))]})]})}),r.jsx("div",{className:`inventory-grid-mobile ${t?"embedded":""}`,style:{display:c?"none":void 0},children:g.length===0?r.jsx("div",{className:"inventory-card-empty",children:"No drugs found matching your search."}):_e.map(ke=>r.jsxs("div",{className:"inventory-card",onClick:()=>{const ot=new Set(E);ot.has(ke.id)&&ke.id!==void 0?ot.delete(ke.id):ke.id!==void 0&&ot.add(ke.id),k(ot)},children:[r.jsxs("div",{className:"inventory-card-header",children:[r.jsxs("div",{className:"inventory-card-drug-info",children:[r.jsx("h4",{className:"inventory-card-drug-name",children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("div",{className:"inventory-card-brand-name",children:ke.name})]}),r.jsx("div",{className:"inventory-card-checkbox",onClick:ot=>ot.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:G.has(ke.id),onChange:()=>{const ot=new Set(G);ot.has(ke.id)?ot.delete(ke.id):ot.add(ke.id),ee(ot)}})})]}),r.jsxs("div",{className:"inventory-card-body",children:[r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Stock"}),r.jsxs("span",{className:`inventory-card-field-value stock-value ${ke.stock<=GA?"stock-low":""}`,children:[ke.stock,r.jsxs("span",{className:"inventory-card-loose",children:[" (",ke.loose??0," loose)"]})]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"MRP"}),r.jsxs("span",{className:"inventory-card-field-value price-value",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Pack"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.pack||"-"})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Expiry"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"})]})]}),E.has(ke.id)&&r.jsxs("div",{className:"inventory-card-expanded",children:[r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Rate"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Box"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.box_number||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Supplier"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.supplier||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Batch"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.batch||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"HSN Code"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.hsn_code||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Discount"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"GST"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"})]}),s.length>0&&s.map(ot=>{var Tt;return r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:ot.label}),r.jsx("span",{className:"inventory-card-expanded-value",children:(Tt=ke.custom_fields)!=null&&Tt[ot.key]?String(ke.custom_fields[ot.key]):"-"})]},ot.key)})]}),r.jsxs("div",{className:"inventory-card-actions",onClick:ot=>ot.stopPropagation(),children:[r.jsxs("button",{className:"inventory-card-action-btn btn-edit",onClick:()=>n(`/dashboard/inventory/edit/${ke.id}`),title:"Edit Drug",children:[r.jsx(Bi,{size:14}),"Edit"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-delete",onClick:()=>ie(ke),title:"Delete Drug",children:[r.jsx(Wn,{size:14}),"Delete"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-adjust",onClick:()=>{Y(ke),q(!0)},title:"Adjust Stock",children:[r.jsx(TI,{size:14}),"Adjust"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-convert",onClick:()=>wt(ke),title:"Convert to Loose",disabled:!ke.pack||it(ke.pack)===null,children:[r.jsx(PI,{size:14}),"Loose"]})]})]},ke.id))}),Ne>1&&r.jsxs("div",{className:"pagination-controls",style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",backgroundColor:"var(--card-bg, #fff)",borderTop:"1px solid var(--border-color)"},children:[r.jsx("button",{onClick:()=>$(ke=>Math.max(ke-1,1)),disabled:X===1,className:"pagination-button",children:"Previous"}),r.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Page ",X," of ",Ne]}),r.jsx("button",{onClick:()=>$(ke=>Math.min(ke+1,Ne)),disabled:X===Ne,className:"pagination-button",children:"Next"})]}),F&&H&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:je,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:H.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:je,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ee,className:"button-delete",children:"Delete"})]})]})}),z&&xe&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:de,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:xe.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Stock: ",xe.stock]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:ne,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:Re===0?"":Re,onChange:ae,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:de,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),W&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ye,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ye,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ge,className:"button-delete",children:"Delete All"})]})]})}),me&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:nt,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:G.size})," selected drug(s)? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:nt,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Fe,className:"button-delete",children:"Delete Selected"})]})]})}),ze&&oe&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:we,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Convert to Loose"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:oe.name||"Unnamed Drug"}),r.jsx("br",{}),"Pack Size: ",oe.pack,r.jsx("br",{}),"Current Stock: ",oe.stock," packs, ",oe.loose??0," loose units."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:Xe,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"packsToConvert",className:"form-label",children:"Packs to Convert"}),r.jsx("input",{type:"number",name:"packsToConvert",id:"packsToConvert",required:!0,step:"1",min:"1",max:oe.stock,value:Ve===0?"":Ve,onChange:Qe,className:"form-input"}),r.jsxs("p",{className:"form-help-text",children:["Converting ",Ve," pack(s) will add ",Ve*(it(oe.pack)||0)," loose units."]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:we,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Convert"})]})]})]})}),ue&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ct,className:"modal-close-button",children:r.jsx(Lt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),r.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ct,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:bt,className:"button-submit",children:"Add Defaults"})]})]})}),r.jsx(IM,{isOpen:o,onClose:()=>l(!1),entityType:"drugs",entityLabel:"Pharmacy Drugs",currentConfig:a,onConfigUpdated:()=>{i()}})]})},nIe=()=>{const t=Ft();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},TG=()=>{const{id:t}=$a(),e=Ft(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null),j=v.useCallback(async()=>{if(!t){l("Drug ID is missing."),s(!1);return}s(!0),l(null);try{const C=await le(`/api/drugs/${t}`);if(!C.ok){const k=await C.json();throw new Error(k.message||`Failed to fetch drug: ${C.statusText}`)}let E=await C.json();E={...E,name:E.name||"",brand_name:E.brand_name||"",mrp:parseFloat(String(E.mrp))||0,rate:E.rate!==null&&E.rate!==void 0?parseFloat(String(E.rate)):null,stock:parseInt(String(E.stock),10)||0,gst:E.gst!==null&&E.gst!==void 0?parseFloat(String(E.gst)):null,margin:E.margin!==null&&E.margin!==void 0?parseFloat(String(E.margin)):null,discount:E.discount!==null&&E.discount!==void 0?parseFloat(String(E.discount)):null,batch:E.batch||"",hsn_code:E.hsn_code||"",mfg:E.mfg||"",loose:E.loose!==null&&E.loose!==void 0?parseInt(String(E.loose),10):null},a(E)}catch(C){console.error("Failed to fetch drug:",C),l(C.message||"Failed to load drug data. Please try again.")}finally{s(!1)}},[t]);v.useEffect(()=>{j()},[j]),v.useEffect(()=>{const C=k=>{k.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var P;(P=b.current)==null||P.focus()},0),k.preventDefault()))},E=k=>{g.current&&!g.current.contains(k.target)&&p(!1)};return document.addEventListener("keydown",C),document.addEventListener("mousedown",E),()=>{document.removeEventListener("keydown",C),document.removeEventListener("mousedown",E)}},[f]);const S=C=>{const{name:E,value:k,type:P}=C.target;a(I=>I?{...I,[E]:P==="number"?parseFloat(k)||null:k}:null)},_=()=>{e(-1)},T=async C=>{if(C.preventDefault(),l(null),d(!0),!n||!n.id){l("Cannot edit drug: No drug data available."),d(!1);return}if(n.mrp===void 0||n.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const E={...n,name:n.name===""?null:n.name,brand_name:n.brand_name===""?null:n.brand_name,rate:n.rate===0?null:n.rate,expiry_date:n.expiry_date===""?null:n.expiry_date,gst:n.gst===0?null:n.gst,margin:n.margin===0?null:n.margin,discount:n.discount===0?null:n.discount,batch:n.batch===""?null:n.batch,hsn_code:n.hsn_code===""?null:n.hsn_code,mfg:n.mfg===""?null:n.mfg,loose:n.loose===0?null:n.loose};try{const k=await le(`/api/drugs/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!k.ok){const P=await k.json();throw new Error(P.message||`Failed to update drug: ${k.statusText}`)}await k.json(),e(-1)}catch(k){console.error("Failed to update drug:",k),l(k.message||"Failed to update drug. Please try again.")}finally{d(!1)}};return i?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):o&&!n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",o]})}):n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",n.name]}),r.jsx("button",{onClick:_,className:"cancel-button",title:"Go Back",children:r.jsx(Lt,{size:24})})]}),o&&r.jsx("div",{className:"error-message-submit",children:o}),r.jsxs("form",{onSubmit:T,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Dl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",value:n.name||"",onChange:S,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Dl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:n.brand_name||"",onChange:S,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Dl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"edit-mrp",required:!0,step:"0.01",min:"0",value:n.mrp||"",onChange:S,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Dl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"edit-stock",required:!0,step:"1",min:"0",value:n.stock||"",onChange:S,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"edit-pack",value:n.pack||"",onChange:S,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:n.expiry_date||"",onChange:S,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:n.box_number||"",onChange:S,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:n.description||"",onChange:S,className:"custom-text-input",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:n.supplier||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"edit-rate",step:"0.01",min:"0",value:n.rate??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:b})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:n.gst??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:n.margin??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:n.discount??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:n.batch||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:n.hsn_code||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:n.mfg||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),r.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:n.loose??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:_,disabled:c,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:20,children:c?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},rIe=({clinicId:t})=>{const e=Ft(),[n,a]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState([]),[f,p]=v.useState(!0),g=async()=>{try{const S=await le("/api/clinic-roles");if(S.ok){const _=await S.json();d(_)}}catch(S){console.error("Failed to fetch roles:",S)}finally{p(!1)}};v.useEffect(()=>{s(t?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly."),g()},[t]);const x=S=>{const{name:_,value:T}=S.target;a(C=>{const E={...C,[_]:T};return _==="role"&&T!=="doctor"&&(E.opd_fee=""),E})},b=async S=>{if(S.preventDefault(),s(null),!n.name||!n.email||!n.role||!n.password){s("Name, Email, Role, and Password are required.");return}if(!t){s("Clinic information is missing. Cannot add staff.");return}const _={...n,clinic_id:t,opd_fee:n.role==="doctor"&&n.opd_fee?parseFloat(String(n.opd_fee)):null};if(_.role==="doctor"&&n.opd_fee&&isNaN(_.opd_fee)){s("Invalid OPD Fee format. Please enter a number.");return}l(!0);try{const T=await le("/api/staff",{method:"POST",body:JSON.stringify(_)});if(!T.ok){const C=await T.json();throw new Error(C.message||"Server responded with an error")}e(-1)}catch(T){s(`Failed to add staff: ${T.message}`)}finally{l(!1)}},j=()=>{e(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:j,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(sn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Br,{size:18,className:"mr-2 text-red-500"}),i]}),r.jsxs("form",{onSubmit:b,className:`staff-form ${t?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:n.name||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:n.email||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:x,required:!0,disabled:o||!t||f,children:f?r.jsx("option",{value:"",children:"Loading roles..."}):c.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):c.map(S=>r.jsx("option",{value:S.key,children:S.name},S.key))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:n.password||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Create a password"})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:n.opd_fee||"",onChange:x,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:o||!t}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:o||!t,children:[o?r.jsx(oo,{size:18,className:"animate-spin mr-2"}):r.jsx(Vn,{size:18,className:"mr-2"}),o?"Adding...":"Add Staff Member"]})]})]})},aIe=()=>{const{id:t}=$a(),e=Ft(),[n,a]=v.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState([]),[S,_]=v.useState(!0),T=async()=>{try{const I=await le("/api/clinic-roles");if(I.ok){const R=await I.json();j(R)}}catch(I){console.error("Failed to fetch roles:",I)}finally{_(!1)}},C=v.useCallback(async()=>{if(!t){p("Staff ID is missing."),l(!1);return}l(!0),p(null),x(null);try{const I=await le(`/staff/${t}`);if(!I.ok){const z=await I.json();throw new Error(z.message||`HTTP error! status: ${I.status}`)}const R=await I.json();a({name:R.name,email:R.email,role:R.role,opd_fee:R.opd_fee??"",active:R.active})}catch(I){p(`Failed to load staff details: ${I.message}`)}finally{l(!1)}},[t]);v.useEffect(()=>{C(),T()},[C]);const E=I=>{const{name:R,value:z,type:q}=I.target;if(q==="checkbox"){const{checked:F}=I.target;a(V=>({...V,[R]:F}))}else a(F=>({...F,[R]:z}))},k=I=>{s(I.target.value)},P=async I=>{if(I.preventDefault(),!t){p("Staff ID is missing.");return}d(!0),p(null),x(null);const R={name:n.name,email:n.email,role:n.role,active:n.active};if(n.role==="doctor"){const z=n.opd_fee?parseFloat(String(n.opd_fee)):null;if(z!==null&&isNaN(z)){p("OPD Fee must be a valid number."),d(!1);return}R.opd_fee=z}else R.opd_fee=null;i.trim()!==""&&(R.password=i.trim());try{const z=await le(`/staff/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!z.ok){const q=await z.json();throw new Error(q.message||`HTTP error! status: ${z.status}`)}x("Staff details updated successfully!"),s(""),setTimeout(()=>e(-1),1500)}catch(z){p(`Failed to update staff: ${z.message}`)}finally{d(!1)}};return o?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(oo,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(sn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),f&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Br,{size:18,className:"mr-2 text-red-500"}),f,r.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),g&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}),g,r.jsx("button",{onClick:()=>x(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),r.jsxs("form",{onSubmit:P,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:E,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email||"",onChange:E,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:E,required:!0,disabled:S,children:S?r.jsx("option",{value:"",children:"Loading roles..."}):b.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]}):b.map(I=>r.jsx("option",{value:I.key,children:I.name},I.key))})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:n.opd_fee||"",onChange:E,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:n.active??!0,onChange:E}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:i,onChange:k,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(oo,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(cs,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},iIe=()=>{const{patientId:t}=$a(),e=Ft(),[n,a]=v.useState([]),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){d("Patient ID not provided.");return}l(!0),d(null);try{const g=await le(`/api/patients/${t}`);if(!g.ok)throw new Error(`Failed to fetch patient details: ${g.status}`);const x=await g.json();s({name:x.name,age:x.age,gender:x.gender});const b=await le(`/api/patients/${t}/complaints`);if(b.ok){const S=(await b.json()).sort((_,T)=>new Date(T.createdAt).getTime()-new Date(_.createdAt).getTime());a(S)}else if(b.status===404)a([]);else throw new Error(`Failed to fetch complaints: ${b.status}`)}catch(g){console.error("Error fetching past complaints or patient info:",g),d(`Failed to load data. ${g.message}`),a([]),s(null)}finally{l(!1)}})()},[t]);const f=p=>{navigator.clipboard.writeText(p).then(()=>console.log("Complaint copied to clipboard")).catch(g=>console.error("Failed to copy complaint: ",g))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:i.name})," (",i.age??"N/A"," / ",i.gender??"N/A",")"]}),c&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",c]}),o&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!o&&n.length===0&&!c&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!o&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(p.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.complaint}),r.jsx("button",{onClick:()=>f(p.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},p.id))})]})},sIe=t=>{if(t===0)return"Zero";const e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],a=l=>l===0?"":l<20?e[l]:l<100?n[Math.floor(l/10)]+(l%10?" "+e[l%10]:""):e[Math.floor(l/100)]+" Hundred"+(l%100?" and "+a(l%100):""),i=Math.floor(t),s=Math.round((t-i)*100);let o="";return i>=1e7&&(o+=a(Math.floor(i/1e7))+" Crore "),i>=1e5&&(o+=a(Math.floor(i%1e7/1e5))+" Lakh "),i>=1e3&&(o+=a(Math.floor(i%1e5/1e3))+" Thousand "),i>=100&&(o+=a(Math.floor(i%1e3/100))+" Hundred "),i%100&&(o+=(o?"and ":"")+a(i%100)),o=o.trim()+" Rupees",s>0&&(o+=" and "+a(s)+" Paise"),o+" Only"},oIe=t=>{const e=typeof t=="string"?parseInt(t,10):t;return`INV-${String(e).padStart(6,"0")}`},WA=500,MB="defaultConsultationFee",lIe=({patientId:t,billId:e,queueId:n,onBillCreated:a,onBillUpdated:i,initialItems:s=[],billType:o="other",relatedId:l,initialStatus:c="pending",initialDiscountPercentage:d=0,readOnlyMode:f=!1,doctorId:p,labOrderId:g,patientInsuranceType:x})=>{const[b,j]=v.useState(null),[S,_]=v.useState([]),T=v.useRef([]),[C,E]=v.useState(""),[k,P]=v.useState(""),[I,R]=v.useState(1),[z,q]=v.useState(d),[F,V]=v.useState("cash"),[H,K]=v.useState(!1),[W,B]=v.useState(null),[G,ee]=v.useState(!1),[X,$]=v.useState(!1),[ce,xe]=v.useState(!1),[Y,Re]=v.useState(null),[$e,ze]=v.useState([]),[Le,oe]=v.useState(null),[Se,Ve]=v.useState(""),[Ae,ue]=v.useState("cash"),[Te,se]=v.useState(!1),[be,_e]=v.useState(!1),[Ne,Z]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),ge=()=>{Ne.length<5&&Z(et=>[...et,{id:Date.now().toString(),method:"cash",amount:0}])},de=et=>{Ne.length>2&&Z(gt=>gt.filter(St=>St.id!==et))},ae=(et,gt,St)=>{Z(Ot=>Ot.map(Ln=>Ln.id===et?gt==="method"?{...Ln,method:St}:{...Ln,amount:Math.max(0,St)}:Ln))},ne=(et,gt)=>{const St=Ne.filter(Sn=>Sn.id!==et).reduce((Sn,Ln)=>Sn+Ln.amount,0),Ot=Math.max(0,gt-St);Z(Sn=>Sn.map(Ln=>Ln.id===et?{...Ln,amount:Ot}:Ln))},[ie,je]=v.useState(null),[Ee,Q]=v.useState(!1),[ye,me]=v.useState(WA),[he,De]=v.useState(WA.toString()),[nt,Fe]=v.useState(""),[Ge,it]=v.useState(""),[wt,we]=v.useState(""),[Qe,Xe]=v.useState(""),[ct,Ct]=v.useState(""),bt=e?"view_pay":"create";v.useEffect(()=>{const et=localStorage.getItem(MB),gt=et?parseFloat(et):WA;isNaN(gt)||(me(gt),De(gt.toString()))},[]);const ke=s.length===0;v.useEffect(()=>{t?(async()=>{K(!0),B(null);try{const gt=await le(`/api/patients/${t}`);if(!gt.ok){const Ot=await gt.json().catch(()=>({}));throw new Error(Ot.message||"Failed to fetch patient details")}const St=await gt.json();j(St)}catch(gt){B(`Failed to load patient details: ${gt.message}`),j(null)}finally{K(!1)}})():j(null)},[t]),v.useEffect(()=>{e?(async()=>{xe(!0),B(null),Re(null),ze([]),oe(null);try{const gt=await le(`/api/bills/${e}`);if(!gt.ok){const Ot=await gt.json().catch(()=>({}));throw new Error(Ot.message||"Failed to fetch bill details")}const St=await gt.json();if(!St.bill||!St.payments||!St.calculated)throw new Error("Invalid bill details structure.");Re(St.bill),ze(St.payments),oe(St.calculated),q(St.bill.discount_percentage!==void 0&&St.bill.discount_percentage!==null?parseFloat(St.bill.discount_percentage.toString()):0),St.bill.payment_mode&&V(St.bill.payment_mode),!b&&St.bill.patient_id&&ot(St.bill.patient_id.toString())}catch(gt){B(`Failed to load bill details: ${gt.message}`),Re(null),ze([]),oe(null)}finally{xe(!1)}})():(Re(null),ze([]),oe(null))},[e]),v.useEffect(()=>{(async()=>{try{const gt=await le("/api/clinics/settings");if(!gt.ok)throw new Error("Failed to fetch clinic settings");const St=await gt.json();Fe(St.upi_id||""),it(St.name||""),we(St.address||""),Xe(St.notes||"")}catch(gt){console.error("Error fetching clinic settings:",gt)}})()},[]);const ot=async et=>{K(!0);try{const gt=await le(`/api/patients/${et}`);if(!gt.ok)throw new Error("Failed to fetch patient");const St=await gt.json();j(St)}catch(gt){console.error("Error fetching patient details:",gt),j(null)}finally{K(!1)}},Tt=v.useCallback(async et=>{$(!0),B(null);const gt=et.filter(St=>St.drug_id!=null).map(async St=>{try{const Ot=await le(`/api/drugs/${St.drug_id}`);if(!Ot.ok)throw new Error(`Drug ${St.drug_id} not found.`);const Sn=await Ot.json();return{...St,price:Sn.price,total:Sn.price*St.quantity}}catch{return B(Sn=>`${Sn?Sn+"; ":""}Failed to fetch price for ${St.name}`),St}});try{const St=await Promise.all(gt);_(Ot=>{const Sn=new Map(St.map(Ln=>[Ln.id,Ln]));return Ot.map(Ln=>Sn.get(Ln.id)||Ln)})}catch{}finally{$(!1)}},[le]);v.useEffect(()=>{if(e){_([]),T.current=[];return}JSON.stringify(s)===JSON.stringify(T.current)||(async()=>{let St=[];if(s&&s.length>0)St=s.map((Ot,Sn)=>({...Ot,id:`initial-${Sn}-${Date.now()}`})),V(c==="paid"?"cash":x==="no_cash_insurance"?"no_cash_insurance":"cash"),q(d),o==="pharmacy"&&!f&&await Tt(St);else if(t&&ke&&o==="consultation"){let Ot=ye;if(p)try{const Sn=await le(`/api/staff/${p}`);if(!Sn.ok){const Na=await Sn.json().catch(()=>({}));throw new Error(Na.message||"Doctor not found or error fetching fee")}const Ln=await Sn.json();Ln.opd_fee!=null&&!isNaN(parseFloat(String(Ln.opd_fee)))&&parseFloat(String(Ln.opd_fee))>=0&&(Ot=parseFloat(String(Ln.opd_fee)))}catch(Sn){B(Ln=>`${Ln?Ln+"; ":""}Could not fetch doctor's fee, using default. (${Sn.message})`)}St=[{id:Date.now(),name:"Consultation Fee",price:Ot,quantity:1,total:Ot*1,drug_id:null}],V(x==="no_cash_insurance"?"no_cash_insurance":"cash")}else St=[],V(x==="no_cash_insurance"?"no_cash_insurance":"cash");_(St),T.current=s})()},[e,t,p,s,o,ye,ke,c,f,Tt,d,x]);const Ue=()=>{const et=parseFloat(k);if(!f)if(C&&!isNaN(et)&&et>=0&&I>0){if(C.trim().toLowerCase()==="consultation fee"&&S.some(St=>St.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const gt={id:Date.now(),name:C.trim(),price:et,quantity:I,total:et*I,drug_id:null};_([...S,gt]),E(""),P(""),R(1)}else alert("Invalid item details.")},jt=et=>{f||_(S.filter(gt=>gt.id!==et))},kt=v.useMemo(()=>{let et=S.reduce((gt,St)=>gt+St.total,0);return bt==="create"&&z>0&&(et=et*(1-z/100)),(Le==null?void 0:Le.totalDue)!==void 0&&(Le==null?void 0:Le.totalDue)!==null?Le.totalDue:et},[S,Le,z,bt]),Kn=v.useMemo(()=>S.reduce((et,gt)=>et+gt.total,0),[S]),vt=v.useMemo(()=>Kn*(z/100),[Kn,z]),Dt=v.useMemo(()=>(Le==null?void 0:Le.totalPaid)??0,[Le]),Vt=v.useMemo(()=>(Le==null?void 0:Le.balance)!==void 0&&(Le==null?void 0:Le.balance)!==null?Le.balance:kt-Dt,[Le,kt,Dt]);v.useEffect(()=>{if(kt>0&&nt){const et=`upi://pay?pa=${nt}&pn=${encodeURIComponent(Ge)}&am=${kt.toFixed(2)}&cu=INR`;Ct(et)}else Ct("")},[kt,nt,Ge]),v.useEffect(()=>{(async()=>{if(F==="credit"&&t){Q(!0);try{const gt=await le(`/api/patient-debts/${t}/balance`);if(gt.ok){const St=await gt.json();je(St.netDebt||0)}else je(0)}catch(gt){console.error("Error fetching patient debt:",gt),je(0)}finally{Q(!1)}}})()},[F,t]);const Yn=()=>{const et=parseFloat(he);!isNaN(et)&&et>=0?(me(et),localStorage.setItem(MB,et.toString())):alert("Invalid fee amount.")},vr=async(et,gt)=>{ee(!0),B(null);try{const St=await le("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:gt,billId:et})}),Ot=await St.json();if(!St.ok||!Ot.order)throw new Error(Ot.message||"Failed to create Razorpay order.");const{key_id:Sn,order:Ln}=Ot,Na={key:Sn,amount:Ln.amount,currency:Ln.currency,name:"Newtons Ai HMS Clinic",description:`Bill Payment for Patient ID: ${t}`,order_id:Ln.id,handler:async function(xi){try{const ho=await le("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:xi.razorpay_payment_id,razorpay_order_id:xi.razorpay_order_id,razorpay_signature:xi.razorpay_signature,billId:et})}),Td=await ho.json();if(ho.ok&&Td.success)a&&a(et),i&&i(),setTimeout(()=>window.print(),200);else throw new Error(Td.message||"Payment verification failed.")}catch(ho){B(`Payment verification failed: ${ho.message}. Contact support.`)}finally{ee(!1)}},prefill:{name:(b==null?void 0:b.name)||""},notes:{bill_id:et,patient_id:t},theme:{color:"#3399cc"},modal:{ondismiss:function(){B("Payment cancelled."),ee(!1)}}};if(window.Razorpay)new window.Razorpay(Na).open();else throw new Error("Razorpay SDK not loaded.")}catch(St){B(`Failed to initiate online payment: ${St.message}`),ee(!1)}},za=async()=>{if(!e){B("Bill ID is missing.");return}const et=be?Xr:parseFloat(Se);if(isNaN(et)||et<=0){B("Please enter a valid positive payment amount.");return}se(!0),B(null);try{if(be){for(const gt of Ne)if(gt.amount>0){const St=await le(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:gt.amount,payment_mode:gt.method})});if(!St.ok){const Ot=await St.json();throw new Error(Ot.message||`Failed to record ${gt.method} payment`)}}}else{const gt={amount_paid:et,payment_mode:Ae},St=await le(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(gt)}),Ot=await St.json();if(!St.ok)throw new Error(Ot.message||`Failed to record payment (Status: ${St.status})`)}Ve(""),be&&(Z([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),_e(!1)),i?i():console.log("Payment recorded.")}catch(gt){B(`Failed to record payment: ${gt.message}`)}finally{se(!1)}},Xr=Ne.reduce((et,gt)=>et+gt.amount,0),wa=Math.abs(Xr-(bt==="create"?kt:Xr))<.01,pn=be?Ne.some(et=>et.method==="credit"):bt==="create"?F==="credit":Ae==="credit",qr=async()=>{if(bt==="view_pay")return;if(!t){B("Patient ID is missing for creating a bill.");return}if(S.length===0){B("Cannot finalize an empty bill.");return}if(be&&Math.abs(Xr-kt)>.01){B(`Split payment total (${Xr.toFixed(2)}) must match the bill total (${kt.toFixed(2)}).`);return}ee(!0),B(null);const et=kt,gt=S.map(({id:Ot,...Sn})=>Sn),St={patientId:t,queueId:n||null,items:gt,amount:et,paymentMode:be?"split":F==="online"?"online":F,type:o,related_id:l||g||null,status:F==="online"?"pending":be||F?"paid":"pending",discountPercentage:z,labOrderId:g||null};if(be&&(St.splitPayments=Ne.map(Ot=>({method:Ot.method,amount:Ot.amount}))),F==="online"&&!be)try{const Ot=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Sn=await Ot.json();if(!Ot.ok)throw new Error(Sn.message||"Failed to create pending bill.");vr(Sn.id,Math.round(et*100))}catch(Ot){B(`Failed to create pending bill: ${Ot.message}`),ee(!1)}else{if(!F&&!be){B("Payment mode required."),ee(!1);return}setTimeout(()=>window.print(),200);try{const Ot=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Sn=await Ot.json();if(!Ot.ok)throw new Error(Sn.message||"Failed to create bill.");if(pn&&t){const Ln=be?Ne.filter(Na=>Na.method==="credit").reduce((Na,xi)=>Na+xi.amount,0):F==="credit"?et:0;if(Ln>0)try{await le(`/api/patient-debts/${t}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ln,related_bill_id:Sn.id,notes:`Bill #${Sn.id} (Credit Part)`})})}catch(Na){console.error("Failed to create debt entry:",Na)}}a&&a(Sn.id),ee(!1)}catch(Ot){B(`Failed to process bill: ${Ot.message}`),ee(!1)}}},Tn=(Y==null?void 0:Y.status)??c,Rn=bt==="view_pay"&&Y&&Tn==="pending";return!t&&!e?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):H||bt==="view_pay"&&ce?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):bt==="view_pay"&&!Y&&!ce&&W?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",W]}):bt==="create"&&!b&&!H&&W?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",W]}):r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:Ge?`${Ge}`:"Bill"}),(wt||Qe)&&r.jsxs("div",{className:"clinic-details-print",children:[wt&&r.jsx("span",{className:"small-text clinic-address",children:wt}),Qe&&r.jsx("span",{className:"small-text clinic-notes",children:Qe})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient"]})," ",(b==null?void 0:b.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]}),Y&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"# Invoice"})," ",oIe(Y.id)]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",b==null?void 0:b.name]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," ID"]})," ",b==null?void 0:b.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Age/Gender"]})," ",(b==null?void 0:b.age)??"N/A"," / ",(b==null?void 0:b.gender)??"N/A"]}),bt==="view_pay"&&Y&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx($o,{size:16})," Bill ID"]})," ",Y.id]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Bill Items"}),bt==="create"&&o==="pharmacy"&&!f&&S.some(et=>et.drug_id!=null)&&r.jsxs("button",{onClick:()=>Tt(S),disabled:X,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(_E,{size:14,className:`lucide ${X?"animate-spin":""}`}),X?"Refreshing...":"Refresh"]})]}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"}),bt==="create"&&!f&&r.jsx("th",{className:"no-print",children:"Action"})]})}),r.jsxs("tbody",{children:[bt==="create"&&S.map((et,gt)=>r.jsxs("tr",{children:[r.jsx("td",{children:gt+1}),r.jsx("td",{children:et.name}),r.jsx("td",{children:et.quantity}),r.jsxs("td",{children:["",et.price.toFixed(2)]}),r.jsxs("td",{children:["",et.total.toFixed(2)]}),!f&&r.jsx("td",{className:"no-print",children:typeof et.id=="number"&&et.name!=="Consultation Fee"?r.jsxs("button",{onClick:()=>jt(et.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx(Lt,{size:16})," "]}):r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(KX,{size:14})," "]})})]},et.id)),bt==="view_pay"&&Y&&Y.items.map((et,gt)=>r.jsxs("tr",{children:[r.jsx("td",{children:gt+1}),r.jsx("td",{children:et.name}),r.jsx("td",{children:et.quantity}),r.jsxs("td",{children:["",et.price.toFixed(2)]}),r.jsxs("td",{children:["",(et.total??et.price*et.quantity).toFixed(2)]})]},gt)),(bt==="create"&&S.length===0||bt==="view_pay"&&(Y==null?void 0:Y.items.length)===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"20px"},children:"No items added."})})]})]}),bt==="create"&&!f&&r.jsxs("div",{className:"add-item-form no-print",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item Description"}),r.jsx("input",{type:"text",value:C,onChange:et=>E(et.target.value),placeholder:"Service Name",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:I,onChange:et=>R(parseInt(et.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"100px"},children:[r.jsx("label",{children:"Price ()"}),r.jsx("input",{type:"number",value:k,onChange:et=>P(et.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:Ue,className:"add-item-button",children:"Add Item"}),o==="consultation"&&r.jsxs("div",{className:"default-fee-section",style:{marginLeft:"auto",display:"flex",alignItems:"flex-end",gap:"5px"},children:[r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{children:"Default Fee"}),r.jsx("input",{type:"number",value:he,onChange:et=>De(et.target.value),style:{width:"80px",padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}})]}),r.jsx("button",{onClick:Yn,className:"secondary-button",style:{padding:"10px"},children:r.jsx(cs,{size:16})})]})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Kn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",z,"%)"]}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",kt.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px dashed #ddd"},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9em",marginBottom:"5px"},children:"Payment Mode:"}),be?Ne.map((et,gt)=>et.amount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:et.method.toUpperCase()}),r.jsxs("span",{children:["",et.amount.toFixed(2)]})]},gt)):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:F?F.toUpperCase():"CASH"}),r.jsxs("span",{children:["",kt.toFixed(2)]})]}),bt==="view_pay"&&$e&&$e.length>0&&r.jsxs("div",{style:{marginTop:"5px"},children:[r.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:"Payment History:"}),$e.map(et=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8em"},children:[r.jsxs("span",{children:[et.payment_mode," (",new Date(et.payment_date).toLocaleDateString(),")"]}),r.jsxs("span",{children:["",et.amount_paid]})]},et.id))]})]}),pn&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",fontSize:"0.85em",fontWeight:500},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Prev. Debt:"}),r.jsxs("span",{children:["",(ie||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Net Payable:"}),r.jsxs("span",{children:["",((ie||0)+(be?Ne.filter(et=>et.method==="credit").reduce((et,gt)=>et+gt.amount,0):F==="credit"?kt:0)).toFixed(2)]})]})]})]}),ct&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(Fa,{value:ct,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Kn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),bt==="create"&&!f?r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:z,onChange:et=>q(parseFloat(et.target.value)||0),min:"0",max:"100",className:"discount-input-total"}),"%"]}):r.jsxs("span",{children:[z,"%"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Amount"}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",kt.toFixed(2)]})]}),bt==="view_pay"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"summary-row",style:{color:"green"},children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Dt.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",style:{color:"red",fontWeight:"bold"},children:[r.jsx("span",{children:"Balance Due"}),r.jsxs("span",{children:["",Vt.toFixed(2)]})]})]}),r.jsx("div",{className:"qr-code-container",children:ct?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:ct,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available."})}),bt==="create"&&r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>_e(!be),disabled:f||G,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:be?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:be?"rgba(79, 172, 254, 0.1)":"transparent",color:be?"#4facfe":"#666",cursor:f||G?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14})," Split"]})]}),be?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Xr.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:Ne.map((et,gt)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:gt+1}),r.jsxs("select",{value:et.method,onChange:St=>ae(et.id,"method",St.target.value),className:"split-payment-select",disabled:G,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:et.amount||"",onChange:St=>ae(et.id,"amount",parseFloat(St.target.value)||0),className:"split-payment-input",disabled:G})]}),Ne.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ne(et.id,kt),className:"split-payment-btn split-payment-btn-fill",title:"Fill",children:"Buy"}),r.jsx("button",{type:"button",onClick:()=>de(et.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Wn,{size:12})})]})]},et.id))}),Ne.length<5&&r.jsxs("button",{type:"button",onClick:ge,className:"split-payment-add-btn",disabled:G,children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Required:"}),r.jsxs("span",{style:{fontWeight:600},children:["",kt.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${wa?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:wa?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",Xr.toFixed(2)]})]})]})]}):r.jsxs("select",{id:"paymentMode",value:F,onChange:et=>V(et.target.value),className:"payment-mode-select",disabled:f||G,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"}),r.jsx("option",{value:"online",children:"Online (Razorpay)"})]})]}),bt==="create"&&F==="credit"&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Ee?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:ie&&ie>0?"#dc3545":"#28a745"},children:["",(ie||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"This Bill:"}),r.jsxs("strong",{children:["+ ",kt.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((ie||0)+kt).toFixed(2)]})]})]})]}),bt==="create"&&!f&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:qr,className:"primary-button",disabled:G||S.length===0,children:G?"Processing...":"Finalise and Bill"})}),bt==="view_pay"&&r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:()=>window.print(),className:"secondary-button",children:"Print Bill"}),Rn&&Vt>0&&r.jsxs("div",{className:"payment-recording-section",style:{marginTop:"20px",borderTop:"1px dashed #ccc",paddingTop:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("h3",{style:{fontSize:"1em",marginBottom:"0"},children:"Record Payment"}),r.jsxs("button",{type:"button",onClick:()=>_e(!be),disabled:Te,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",fontSize:"0.75rem",border:be?"1px solid #4facfe":"1px solid #ccc",borderRadius:"4px",backgroundColor:be?"rgba(79, 172, 254, 0.1)":"transparent",color:be?"#4facfe":"#666",cursor:Te?"not-allowed":"pointer"},children:[r.jsx(qo,{size:12})," Split"]})]}),be?r.jsxs("div",{className:"split-payment-wrapper",style:{marginBottom:"10px",fontSize:"0.9em"},children:[r.jsx("div",{className:"split-payment-list",children:Ne.map(et=>r.jsxs("div",{className:"split-payment-row",children:[r.jsxs("select",{value:et.method,onChange:gt=>ae(et.id,"method",gt.target.value),className:"split-payment-select",disabled:Te,style:{padding:"4px"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Ins."}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",style:{left:"5px",fontSize:"0.8em"},children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:et.amount||"",onChange:gt=>ae(et.id,"amount",parseFloat(gt.target.value)||0),className:"split-payment-input",style:{paddingLeft:"15px"},disabled:Te})]}),Ne.length>2&&r.jsx("button",{type:"button",onClick:()=>de(et.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Wn,{size:12})})]},et.id))}),Ne.length<5&&r.jsxs("button",{type:"button",onClick:ge,className:"split-payment-add-btn",disabled:Te,style:{fontSize:"0.8em",padding:"4px"},children:[r.jsx(Vn,{size:12})," Add"]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em",marginTop:"5px",color:"#666"},children:[r.jsxs("span",{children:["Paying: ",r.jsxs("strong",{children:["",Xr.toFixed(2)]})]}),r.jsxs("span",{style:{color:Xr>Vt?"red":"inherit"},children:["Max: ",Vt.toFixed(2)]})]})]}):r.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:Se,onChange:et=>Ve(et.target.value),placeholder:`Max ${Vt.toFixed(2)}`,className:"custom-text-input",style:{flex:1}}),r.jsxs("select",{value:Ae,onChange:et=>ue(et.target.value),className:"custom-select-input",style:{width:"auto"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("button",{onClick:za,disabled:Te||be&&Xr<=0||!be&&(!Se||parseFloat(Se)<=0),className:"primary-button",style:{width:"100%",fontSize:"0.9em"},children:Te?"Recording...":"Record Payment"})]})]})]})})]}),r.jsxs("div",{className:"amount-in-words-print print-only",children:[r.jsx("strong",{children:"Amount in Words:"})," ",sIe(bt==="view_pay"&&Y?Y.amount:kt)]}),r.jsxs("div",{className:"terms-conditions-print print-only",children:[r.jsx("h4",{children:"Terms & Conditions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Goods once sold will not be taken back or exchanged."}),r.jsx("li",{children:"All disputes are subject to local jurisdiction."}),r.jsx("li",{children:"Please retain this bill for future reference."})]})]}),r.jsxs("div",{className:"signature-section-print print-only",children:[r.jsx("div",{className:"receiver-sign",children:r.jsx("div",{className:"sign-line",children:"Receiver's Signature"})}),r.jsxs("div",{className:"authorized-sign",children:[r.jsxs("div",{className:"for-clinic",children:["For ",Ge||"Clinic"]}),r.jsx("div",{className:"sign-line",children:"Authorised Signatory"})]})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{className:"thank-you",children:"Thank you for your visit!"}),r.jsx("p",{className:"computer-generated",children:"This is a computer generated invoice and does not require a physical signature."})]})]})]})},cIe=()=>{const t=Ft(),e=zr(),{patientId:n,queueId:a,patientName:i,initialItems:s,billType:o,relatedId:l,initialStatus:c,initialDiscountPercentage:d,doctorId:f,billId:p,labOrderId:g}=e.state||{},[x,b]=v.useState(null),[j,S]=v.useState(null),[_,T]=v.useState(null),[C,E]=v.useState(null),[k,P]=v.useState(null),[I,R]=v.useState(null),[z,q]=v.useState(null),[F,V]=v.useState(null),[H,K]=v.useState(!0),[W,B]=v.useState(null),[G,ee]=v.useState(i||"");v.useEffect(()=>{if(!n){console.error("BillingPage loaded without required patientId in location state."),t("/");return}(async()=>{K(!0),B(null);try{let Re=n,$e=s||null,ze=c||null,Le=o||null,oe=l||null,Se=d!==void 0?parseFloat(d):null,Ve=i||null,Ae=null;if(p){console.log(`Fetching details for Bill ID: ${p}`);const ue=await le(`/api/bills/${p}`);if(!ue.ok){const se=await ue.json().catch(()=>({message:`Failed to fetch bill details for ID ${p}`}));throw new Error(se.message||`Failed to fetch bill details (Status: ${ue.status})`)}const Te=await ue.json();if(console.log("Fetched Bill Data:",Te),$e=Te.bill.items||[],ze=Te.bill.status||"pending",Le=Te.bill.type||null,oe=Te.bill.related_id||null,Se=Te.bill.discount_percentage!==void 0&&Te.bill.discount_percentage!==null?parseFloat(Te.bill.discount_percentage):0,Re=Te.bill.patient_id,E($e),P(ze),R(Le),q(oe),V(Se),Re){const se=await le(`/api/patients/${Re}`);if(se.ok){const be=await se.json();Ve=be.name,Ae=be.phone??null,T(be.insurance_type??null),ee(Ve),S(Ae)}else console.warn(`Could not fetch patient details for ID ${Re} from bill.`),ee("Patient (Not Found)")}else console.warn(`Bill ${p} does not have an associated patient_id.`),ee("Patient (Unknown)")}else if(g){console.log(`Fetching details for Lab Order ID: ${g}`);const ue=await le(`/api/lab/${g}`);if(!ue.ok){let se=`Failed to fetch lab order details (Status: ${ue.status} ${ue.statusText})`;try{se=(await ue.json()).message||se}catch{console.error("Response was not valid JSON:",await ue.text())}throw new Error(se)}const Te=await ue.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(Te,null,2)),$e=(Te.tests||[]).filter(se=>se&&typeof se.name=="string"&&se.price!==void 0&&se.id!==void 0).map(se=>{const be=parseFloat(se.price||"0"),_e=!isNaN(be)&&isFinite(be)?be:0;return{item_id:se.id,name:se.name,price:_e,quantity:1,total:_e*1,type:"lab_test"}}),$e&&$e.length===0&&(Te.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",Te.tests),B(se=>`${se?se+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),ze="pending",Le="lab",oe=g,Re=Te.patient_id,E($e),P(ze),R(Le),q(oe),Re){const se=await le(`/api/patients/${Re}`);if(se.ok){const be=await se.json();Ve=be.name,Ae=be.phone??null,T(be.insurance_type??null),ee(Ve),S(Ae)}else console.warn(`Could not fetch patient details for ID ${Re} from lab order.`),ee("Patient (Not Found)")}else console.warn(`Lab Order ${g} does not have an associated patient_id.`),ee("Patient (Unknown)")}else if(E(s||null),P(c||null),R(o||null),q(l||null),V(d!==void 0?parseFloat(d):null),ee(i||`ID ${n}`),Re){const ue=await le(`/api/patients/${Re}`);if(ue.ok){const Te=await ue.json();S(Te.phone??null),T(Te.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${Re}.`)}if(a){const ue=await le(`/api/queue/${a}`);if(ue.ok){const Te=await ue.json();b(Te.token_number)}else console.warn(`Could not fetch queue details for ID ${a}.`)}}catch(Re){console.error("Error fetching billing page details:",Re),B(`Failed to load details: ${Re.message}`),E(null),P(null),R(null),q(null),ee(i||""),S(null),b(null)}finally{K(!1)}})()},[n,p,g,a,t]);const X=Y=>{console.log(`Billing process completed for patient ID ${n}. New Bill ID: ${Y}`),t(-1)},$=()=>{console.log(`Bill updated for patient ID ${n}.`),t(-1)};if(!n)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(MI,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(H)return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx(te,{width:80,height:32})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx(te,{width:300,height:32})}),r.jsxs("div",{className:"patient-info-bar mb-6",style:{display:"flex",gap:"1rem",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:120,height:20}),r.jsx(te,{width:140,height:20})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 space-y-4",children:[r.jsx(te,{width:"100%",height:200,className:"rounded-lg"}),r.jsx(te,{width:"100%",height:150,className:"rounded-lg"})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(te,{width:"100%",height:300,className:"rounded-lg"})})]})]})]});if(W)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(MI,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:W}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>t(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const xe=(k??c)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(sn,{size:20,className:"lucide"})})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[p?"Bill Details":g?"Create Lab Bill":"Create Bill"," for Patient: ",G||`ID ${n}`]}),r.jsxs("div",{className:"patient-info-bar",children:[x!==null&&r.jsxs("span",{children:[r.jsx(Qa,{size:14,className:"lucide"})," Token: ",x]}),j&&r.jsxs("span",{children:[r.jsx(rg,{size:14,className:"lucide"})," Phone: ",j]}),g&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(ls,{size:14,className:"lucide"})," Lab Order: ",g.substring(0,8),"..."]}),!j&&x===null&&!g&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),_&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(LJ,{size:14,className:"lucide"})," Insurance: ",_.replace(/_/g," ").replace(/\b\w/g,Y=>Y.toUpperCase())]}),!j&&x===null&&!g&&!_&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(lIe,{patientId:n,labOrderId:g,queueId:a,onBillCreated:X,onBillUpdated:$,initialItems:C??s,billType:I??o,relatedId:z??l,initialStatus:k??c,initialDiscountPercentage:F??d,readOnlyMode:xe,doctorId:f,patientInsuranceType:_??void 0})]})]})},uIe=()=>{const{patientId:t}=$a(),e=Ft(),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState("");return v.useEffect(()=>{(async()=>{if(!t){l("Patient ID not provided in URL.");return}s(!0),l(null),a([]);try{try{const x=await le(`/api/patients/${t}`);if(x.ok){const b=await x.json();d(b.name)}}catch(x){console.warn("Could not fetch patient name:",x)}console.log(`Fetching pharmacy orders for patient ID: ${t}`);const p=await le(`/api/pharmacy-orders/patient/${t}`);if(!p.ok){const x=await p.json().catch(()=>({}));throw new Error(x.message||`HTTP error! status: ${p.status}`)}const g=await p.json();console.log("Fetched Pharmacy Orders:",g),a(g||[])}catch(p){console.error("Error fetching pharmacy orders:",p),l(`Failed to load pharmacy orders: ${p.message}`)}finally{s(!1)}})()},[t]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(sn,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(ud,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",c&&`for ${c}`]}),r.jsx("div",{})," "]}),i&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(te,{width:150,height:20}),r.jsx(te,{width:100,height:20})]}),r.jsx(te,{width:200,height:20,className:"mb-2"}),r.jsx(te,{width:180,height:20,className:"mb-3"}),r.jsx(te,{width:120,height:24,className:"mb-2"}),r.jsxs("div",{className:"space-y-1 ml-4",children:[r.jsx(te,{width:"80%",height:16}),r.jsx(te,{width:"70%",height:16}),r.jsx(te,{width:"60%",height:16})]})]},f))}),o&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:o}),!i&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!i&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(f.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",f.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",f.prescribedBy||"N/A"]}),f.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",f.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:f.medications.map((p,g)=>r.jsxs("li",{children:[p.name," - Qty: ",p.quantity,p.tabletsPerDay&&` (${p.tabletsPerDay} per day`,p.numberOfDays&&` for ${p.numberOfDays} days)`,!p.tabletsPerDay&&p.numberOfDays&&` (for ${p.numberOfDays} days)`,p.tabletsPerDay&&!p.numberOfDays&&")"]},g))})]},f.id))})]})},kG=()=>{const{orderId:t}=$a(),e=Ft(),[n,a]=v.useState(null),[i,s]=v.useState(null),[o,l]=v.useState([]),[c,d]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState([]),[b,j]=v.useState(null),[S,_]=v.useState(!1),[T,C]=v.useState(null),[E,k]=v.useState(!0);Yc();const P=v.useCallback(async()=>{k(!0);try{const B=await le(`/api/pharmacy-orders/${t}`);if(!B.ok)throw new Error("Failed to fetch order details");const G=await B.json();a(G),s({id:G.patientId,name:G.patientName||"N/A",token:G.patientTokenNumber}),C(G.prescriptionForUnavailableDrugs);const ee=G.medications.map(X=>{const $=z(X.pack),ce=X.pack_quantity*($??1)+X.loose_quantity;return{...X,isLoose:!0,loosePacks:X.pack_quantity,looseUnits:X.loose_quantity,looseQuantity:ce,pack_price:X.pack_price,loose_price:X.loose_price,total_price:X.total_price,pricePerLooseUnit:X.loose_price,originalPrice:X.pack_price,box_number:X.box_number,pack:X.pack,batch:X.batch,expiry_date:X.expiry_date,discount_percentage:X.discount_percentage}});d(ee)}catch(B){j("Could not load order details. "+B.message)}finally{k(!1)}},[t]),I=v.useCallback(async()=>{try{const B=await le("/api/drugs");if(!B.ok)throw new Error("Failed to fetch drugs");const G=await B.json(),ee=G.drugs||G||[];l(ee)}catch(B){j("Could not load drug list. "+B.message)}},[]);v.useEffect(()=>{P(),I()},[P,I]);const R=v.useMemo(()=>new co(o,{keys:["name","brand_name"],threshold:.3}),[o]);v.useEffect(()=>{if(!f){x([]);return}const B=R.search(f).map(G=>G.item);x(B.slice(0,10))},[f,R]);const z=B=>{if(!B)return null;const G=B.match(/(?:\d+x)?(\d+)/);return G?parseInt(G[1],10):null},q=B=>{if(c.some(G=>G.drug_id===B.id)){j(`${B.name||B.brand_name} is already in the order.`),setTimeout(()=>j(null),3e3),p(""),x([]);return}d(G=>[...G,{drug_id:B.id,name:B.name||B.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(B.mrp)||0,loose_price:(Number(B.mrp)||0)/(z(B.pack)||1),total_price:(Number(B.mrp)||0)/(z(B.pack)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:B.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(B.mrp)||0)/(z(B.pack)||1),originalPrice:Number(B.mrp)||0,pack:B.pack}]),p(""),x([])},F=B=>{d(G=>G.filter(ee=>(ee.drug_id??ee.name)!==B))},V=(B,G)=>{d(ee=>ee.map(X=>{if((X.drug_id??X.name)===B&&X.isLoose){const $=z(X.pack),ce=Math.max(0,G),xe=ce*($??1)+(X.looseUnits??0);return{...X,loosePacks:ce,looseQuantity:xe,pack_quantity:ce}}return X}))},H=(B,G)=>{d(ee=>ee.map(X=>{if((X.drug_id??X.name)===B&&X.isLoose){const $=z(X.pack),ce=Math.max(0,G),xe=(X.loosePacks??0)*($??1)+ce;return{...X,looseUnits:ce,looseQuantity:xe,loose_quantity:ce}}return X}))},K=async B=>{if(B.preventDefault(),j(null),_(!0),c.length===0&&!(T!=null&&T.trim())){j("Please add at least one medication or provide a prescription."),_(!1);return}const G=c.filter(X=>{const $=X.looseQuantity??0;return $<=0||X.stock!==void 0&&$>X.stock});if(G.length>0){j(`Invalid quantity or insufficient stock for: ${G.map(X=>X.name).join(", ")}`),_(!1);return}const ee={items:c.map(X=>({drug_id:X.drug_id??null,name:X.name,pack_quantity:X.loosePacks??0,loose_quantity:X.looseUnits??0,pack_price:X.pack_price??0,loose_price:X.loose_price??0,total_price:(X.loose_price??0)*(X.looseQuantity??0),discount_percentage:X.discount_percentage??0,directions_to_use:X.directions_to_use??null,tabletsPerDay:X.tabletsPerDay??1,numberOfDays:X.numberOfDays??1})),prescription_for_unavailable_drugs:T,order_total:W};try{const X=await le(`/api/pharmacy-orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)});if(!X.ok){const $=await X.json();throw new Error($.message||"Failed to update order")}e(-1)}catch(X){j(X.message||"Failed to update order. Please try again.")}finally{_(!1)}},W=v.useMemo(()=>c.reduce((B,G)=>{const ee=G.loose_price??0,X=G.looseQuantity??0;return B+ee*X},0),[c]);return E?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(te,{variant:"circular",width:40,height:40}),r.jsx(te,{width:300,height:32})]}),r.jsx("div",{className:"header-right",children:r.jsx(te,{width:100,height:32,style:{borderRadius:"16px"}})})]}),r.jsx("div",{className:"order-meta",style:{display:"flex",gap:"1rem",margin:"1rem 0"},children:r.jsx(te,{width:200,height:24})}),r.jsxs("div",{className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(te,{width:200,height:24})}),r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(te,{height:42})})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(te,{width:250,height:24})}),r.jsxs("div",{className:"table-container",style:{padding:"0 1rem 1rem"},children:[r.jsxs("div",{className:"table-header-row",style:{display:"flex",gap:"1rem",padding:"1rem"},children:[r.jsx(te,{width:"30%",height:20}),r.jsx(te,{width:"20%",height:20}),r.jsx(te,{width:"20%",height:20}),r.jsx(te,{width:"15%",height:20}),r.jsx(te,{width:"5%",height:20})]}),r.jsx("div",{className:"table-body",children:[1,2,3].map(B=>r.jsxs("div",{className:"table-row",style:{display:"flex",gap:"1rem",padding:"1rem",borderBottom:"1px solid #eee"},children:[r.jsxs("div",{style:{width:"30%"},children:[r.jsx(te,{width:"80%",height:20,className:"mb-2"}),r.jsx(te,{width:"40%",height:14})]}),r.jsx(te,{width:"20%",height:36}),r.jsx(te,{width:"20%",height:36}),r.jsx(te,{width:"15%",height:20,style:{alignSelf:"center"}}),r.jsx(te,{width:"5%",height:24,style:{alignSelf:"center"}})]},B))})]})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx(te,{width:180,height:24})}),r.jsx("div",{style:{padding:"1rem"},children:r.jsx(te,{height:80})})]}),r.jsx("div",{style:{marginTop:"20px"},children:r.jsx(te,{height:48,width:"100%"})})]})]})]}):n?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:r.jsx(sn,{size:20})}),r.jsxs("h2",{className:"page-title",children:["EDIT ORDER ",r.jsxs("span",{className:"text-gray-500 text-lg font-normal ml-2",children:[i==null?void 0:i.name," #",n.id.substring(0,4)]})]})]}),r.jsx("div",{className:"header-right",children:r.jsx("span",{className:"status-badge",children:n.status.toUpperCase()})})]}),r.jsx("div",{className:"order-meta",children:r.jsxs("span",{className:"order-date",children:[" Order Date: ",new Date(n.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})}),r.jsxs("form",{onSubmit:K,className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{children:" Find & Add Medication"})}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or brand...",value:f,onChange:B=>p(B.target.value),className:"search-input"}),f&&r.jsx("div",{className:"dropdown-results",children:g.length>0?r.jsx("ul",{children:g.map(B=>r.jsxs("li",{onClick:()=>q(B),className:"dropdown-item",children:[r.jsx("span",{className:"drug-name",children:B.name||B.brand_name}),r.jsxs("span",{className:"drug-meta",children:["(Stock: ",B.stock??"N/A",", MRP: ",Number(B.mrp||0).toFixed(2),")"]})]},B.id))}):r.jsxs("div",{className:"p-3 text-gray-500 text-sm",children:['No drugs found matching "',f,'"']})})]})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{children:[" Medications in Order ",r.jsxs("span",{className:"item-count",children:[c.length," items"]})]})}),c.length>0?r.jsxs("div",{className:"table-container",children:[r.jsxs("div",{className:"table-header-row",children:[r.jsx("div",{className:"col-medication",children:"MEDICATION"}),r.jsx("div",{className:"col-directions",children:"DIRECTIONS"}),r.jsx("div",{className:"col-quantity",children:"QUANTITY"}),r.jsx("div",{className:"col-subtotal",children:"SUBTOTAL"}),r.jsx("div",{className:"col-action"})]}),r.jsx("div",{className:"table-body",children:c.map(B=>{const G=B.drug_id??B.name;return r.jsxs("div",{className:"table-row",children:[r.jsxs("div",{className:"col-medication",children:[r.jsx("span",{className:"med-name",children:B.name}),B.pack&&r.jsx("span",{className:"med-unit text-xs text-gray-500 block",children:B.pack}),r.jsxs("div",{className:"stock-info",children:[" Stock: ",r.jsxs("span",{className:"stock-value",children:[" ",B.stock!==void 0?B.pack?`BOX OF ${z(B.pack)}`:B.stock:"N/A"]})]})]}),r.jsx("div",{className:"col-directions",children:r.jsx("input",{type:"text",placeholder:"1 tablet twice daily...",value:B.directions_to_use??"",onChange:ee=>{const X=ee.target.value;d($=>$.map(ce=>(ce.drug_id??ce.name)===G?{...ce,directions_to_use:X}:ce))},className:"directions-input"})}),r.jsx("div",{className:"col-quantity",children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"PACKS"}),r.jsx("input",{type:"number",min:"0",value:B.loosePacks||"",onChange:ee=>V(G,ee.target.value===""?0:parseInt(ee.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"LOOSE"}),r.jsx("input",{type:"number",min:"0",value:B.looseUnits||"",onChange:ee=>H(G,ee.target.value===""?0:parseInt(ee.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]})]})}),r.jsxs("div",{className:"col-subtotal",children:["",(Number((B.pricePerLooseUnit??0)*(B.looseQuantity??0))||0).toFixed(2)]}),r.jsx("div",{className:"col-action",children:r.jsx("button",{type:"button",onClick:()=>F(G),className:"delete-btn",title:"Remove Item",children:r.jsx(Wn,{size:18,strokeWidth:2.5})})})]},G)})})]}):r.jsx("div",{className:"empty-state",children:"No medications added. Search above to add."})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx("h3",{children:" Prescription Notes"})}),r.jsx("textarea",{rows:3,value:T??"",onChange:B=>C(B.target.value||null),placeholder:"Add notes about unavailable drugs...",className:"notes-input"})]}),r.jsxs("button",{type:"submit",disabled:S,className:"confirm-btn",style:{width:"100%",margin:"20px 0 0 0"},children:[r.jsx("span",{className:"check-icon",children:""})," ",S?"Updating...":"Confirm Changes"]}),b&&r.jsx("div",{className:"error-alert mt-4",children:b})]})]})]}):r.jsx("div",{className:"p-6 text-red-500 flex justify-center items-center h-screen",children:"Order not found or failed to load."})},dIe=(t,e,n,a="non-black")=>{if(isNaN(t)||isNaN(e)||t<=0||e<=0)return null;let i;return n==="female"?t<=.7?i=141*Math.pow(t/.7,-.329)*Math.pow(.993,e):i=141*Math.pow(t/.7,-1.209)*Math.pow(.993,e):t<=.9?i=141*Math.pow(t/.9,-.411)*Math.pow(.993,e):i=141*Math.pow(t/.9,-1.209)*Math.pow(.993,e),a==="black"&&(i*=1.018),parseFloat(i.toFixed(2))},hIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0||n>=400)return null;const a=t-e-n/5;return parseFloat(a.toFixed(2))},fIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},pIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},mIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=t-(e+n);return parseFloat(a.toFixed(2))},gIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=2*t+e/18+n/2.8;return parseFloat(a.toFixed(2))},yIe=t=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(t),IB=()=>{var _e,Ne;const{orderId:t}=$a(),e=Ft(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState(null),[S,_]=v.useState({}),[T,C]=v.useState(null),[E,k]=v.useState(!1),[P,I]=v.useState(""),[R,z]=v.useState(!1),[q,F]=v.useState(""),[V,H]=v.useState(""),[K,W]=v.useState(!1),[B,G]=v.useState(""),[ee,X]=v.useState([]),[$,ce]=v.useState(null),[xe,Y]=v.useState(!1),Re=v.useCallback(async()=>{var Z,ge;if(t){l(!0),p(null);try{const de=await le(`/api/lab/${t}`);if(!de.ok){const ie=await de.json().catch(()=>({message:`HTTP error! status: ${de.status}`}));throw new Error(ie.message||`HTTP error! status: ${de.status}`)}const ae=await de.json();if(a(ae),ae.createdAt)try{const ie=new Date(ae.createdAt),je=new Date(ie.getTime()-ie.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(je)}catch(ie){console.error("Error formatting date for edit:",ie)}if(ae.report_date)try{const ie=new Date(ae.report_date),je=new Date(ie.getTime()-ie.getTimezoneOffset()*6e4).toISOString().slice(0,16);F(je)}catch(ie){console.error("Error formatting report date for edit:",ie)}else{const ie=new Date,je=new Date(ie.getTime()-ie.getTimezoneOffset()*6e4).toISOString().slice(0,16);F(je)}ae.referral_doctor&&G(ae.referral_doctor),ae.Patient&&(x(ae.Patient.age??null),j(((Z=ae.Patient.gender)==null?void 0:Z.toLowerCase())==="f"||((ge=ae.Patient.gender)==null?void 0:ge.toLowerCase())==="female"?"female":"male")),ae.uploaded_by&&ce(ae.uploaded_by);const ne={};if(ae.tests&&ae.tests.forEach(ie=>{ne[ie.id]={},ie.default_parameters&&ie.default_parameters.length>0?ie.default_parameters.forEach(je=>{ne[ie.id][je.name]=je.defaultValue}):ne[ie.id].report_content=""}),ae.report_content)try{const ie=JSON.parse(ae.report_content);typeof ie=="object"&&ie!==null&&!Array.isArray(ie)?s(ie):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),s(ne))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),s(ne)}else s({})}catch(de){console.error("Failed to fetch lab order details:",de),p(de instanceof Error?de.message:"An unknown error occurred while fetching order details.")}finally{l(!1)}}},[t]);v.useEffect(()=>{t?Re():(p("No Order ID provided in the URL."),l(!1))},[t,Re]),v.useEffect(()=>{(async()=>{try{const ge=await le("/api/clinics/settings");if(ge.ok){const de=await ge.json();H(de.labLetterheadUrl||"")}}catch(ge){console.error("Error fetching clinic settings:",ge)}})()},[]),v.useEffect(()=>{(async()=>{try{const ge=await le("/staff");if(ge.ok){const de=await ge.json();X(de)}}catch(ge){console.error("Error fetching staff:",ge)}})()},[]);const $e=(Z,ge,de)=>{s(ae=>{var Xe,ct,Ct,bt,ke,ot,Tt,Ue,jt,kt,Kn,vt,Dt,Vt,Yn,vr,za,Xr,wa;const ne={...ae,[Z]:{...ae[Z],[ge]:de}},ie=parseFloat((Xe=ne[Z])==null?void 0:Xe.Creatinine),je=g,Ee=b;if(ge==="Creatinine"&&!isNaN(ie)&&je!==null&&Ee!==null){const pn=dIe(ie,je,Ee);pn!==null&&((ct=n==null?void 0:n.tests.find(Tn=>Tn.id===Z))!=null&&ct.default_parameters.find(Tn=>Tn.name==="eGFR"))&&(ne[Z].eGFR=pn)}const Q=parseFloat((Ct=ne[Z])==null?void 0:Ct["Total Cholesterol"]),ye=parseFloat((bt=ne[Z])==null?void 0:bt["HDL Cholesterol"]),me=parseFloat((ke=ne[Z])==null?void 0:ke.Triglycerides);if((ge==="Total Cholesterol"||ge==="HDL Cholesterol"||ge==="Triglycerides")&&!isNaN(Q)&&!isNaN(ye)&&!isNaN(me)){const pn=hIe(Q,ye,me);pn!==null&&((ot=n==null?void 0:n.tests.find(Tn=>Tn.id===Z))!=null&&ot.default_parameters.find(Tn=>Tn.name==="LDL Cholesterol"))&&(ne[Z]["LDL Cholesterol"]=pn)}const he=parseFloat((Tt=ne[Z])==null?void 0:Tt["Total Bilirubin"]),De=parseFloat((Ue=ne[Z])==null?void 0:Ue["Direct Bilirubin"]);if((ge==="Total Bilirubin"||ge==="Direct Bilirubin")&&!isNaN(he)&&!isNaN(De)){const pn=fIe(he,De);pn!==null&&((jt=n==null?void 0:n.tests.find(Tn=>Tn.id===Z))!=null&&jt.default_parameters.find(Tn=>Tn.name==="Indirect Bilirubin"))&&(ne[Z]["Indirect Bilirubin"]=pn)}const nt=parseFloat((kt=ne[Z])==null?void 0:kt["Total Protein"]),Fe=parseFloat((Kn=ne[Z])==null?void 0:Kn.Albumin);if((ge==="Total Protein"||ge==="Albumin")&&!isNaN(nt)&&!isNaN(Fe)){const pn=pIe(nt,Fe);pn!==null&&((vt=n==null?void 0:n.tests.find(Tn=>Tn.id===Z))!=null&&vt.default_parameters.find(Tn=>Tn.name==="Globulin"))&&(ne[Z].Globulin=pn)}const Ge=parseFloat((Dt=ne[Z])==null?void 0:Dt.Sodium),it=parseFloat((Vt=ne[Z])==null?void 0:Vt.Chloride),wt=parseFloat((Yn=ne[Z])==null?void 0:Yn.Bicarbonate);if((ge==="Sodium"||ge==="Chloride"||ge==="Bicarbonate")&&!isNaN(Ge)&&!isNaN(it)&&!isNaN(wt)){const pn=mIe(Ge,it,wt);pn!==null&&((vr=n==null?void 0:n.tests.find(Tn=>Tn.id===Z))!=null&&vr.default_parameters.find(Tn=>Tn.name==="Anion Gap"))&&(ne[Z]["Anion Gap"]=pn)}const we=parseFloat((za=ne[Z])==null?void 0:za.Glucose),Qe=parseFloat((Xr=ne[Z])==null?void 0:Xr.BUN);if((ge==="Sodium"||ge==="Glucose"||ge==="BUN")&&!isNaN(Ge)&&!isNaN(we)&&!isNaN(Qe)){const pn=gIe(Ge,we,Qe);pn!==null&&((wa=n==null?void 0:n.tests.find(Tn=>Tn.id===Z))!=null&&wa.default_parameters.find(Tn=>Tn.name==="Osmolality"))&&(ne[Z].Osmolality=pn)}return ne})},ze=async Z=>{const ge=i[Z]||{},de=n==null?void 0:n.tests.find(je=>je.id===Z);if(!de)return;const ae={};de.default_parameters&&de.default_parameters.forEach(je=>{ae[je.name]=je.defaultValue});const ne={...ae,...ge},ie={...i,[Z]:ne};s(ie),d(!0),p(null);try{const je=await le(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(ie),isPartial:!0,uploaded_by:$})});if(!je.ok)throw new Error(`Save failed: ${je.status}`)}catch(je){console.error("Error saving test report:",je),alert("Failed to save test report.")}finally{d(!1)}},Le=async(Z=null)=>{if(!n||!n.tests||!t){alert("Order details not loaded.");return}d(!0),p(null);try{let ge;if(Z===null){const ae={};n.tests.forEach(ne=>{const ie=i[ne.id]||{},je={};ne.default_parameters&&ne.default_parameters.forEach(Ee=>{Ee.defaultValue!==void 0&&Ee.defaultValue!==null&&(je[Ee.name]=Ee.defaultValue)}),ae[ne.id]={...je,...ie},(!ne.default_parameters||ne.default_parameters.length===0)&&!ae[ne.id].report_content&&(ae[ne.id].report_content="")}),ge=ae,s(ae)}else{const ae=i[Z]||{},ne=n.tests.find(Ee=>Ee.id===Z);if(!ne){d(!1);return}const ie={};ne.default_parameters&&ne.default_parameters.forEach(Ee=>{ie[Ee.name]=Ee.defaultValue});const je={...ie,...ae};ge={...i,[Z]:je},s(ge)}const de=await le(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(ge),isPartial:Z!==null,uploaded_by:$})});if(!de.ok)throw new Error(`Save failed: ${de.status}`);C(Z),setTimeout(()=>{window.print()},100)}catch(ge){console.error("Error saving before print:",ge),alert("Failed to save report before printing.")}finally{d(!1)}},oe=()=>{n&&FM(n)},Se=async()=>{if(!n||!n.tests){alert("Order details not loaded.");return}if(!t){alert("Cannot submit report without an Order ID.");return}const Z={};if(n.tests.forEach(ge=>{const de=i[ge.id]||{},ae={};ge.default_parameters&&ge.default_parameters.forEach(ne=>{ne.defaultValue!==void 0&&ne.defaultValue!==null&&(ae[ne.name]=ne.defaultValue)}),Z[ge.id]={...ae,...de},(!ge.default_parameters||ge.default_parameters.length===0)&&!Z[ge.id].report_content&&(Z[ge.id].report_content="")}),Object.keys(Z).length===0){alert("Report content cannot be empty.");return}s(Z),d(!0),p(null);try{const ge=await le(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(Z),uploaded_by:$})});if(!ge.ok){const de=await ge.json().catch(()=>({message:`Submission failed: ${ge.status}`}));throw new Error(de.message||`Submission failed: ${ge.status}`)}e(-1)}catch(ge){console.error("Error submitting report:",ge),p(ge instanceof Error?ge.message:"An unknown error occurred during submission.")}finally{d(!1)}},Ve=async()=>{if(!(!t||!P))try{const Z=await le(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(P).toISOString()})});if(!Z.ok)throw new Error("Failed to update date");const ge=await Z.json();ge.order&&a(de=>de?{...de,createdAt:ge.order.createdAt}:null),k(!1)}catch(Z){console.error("Failed to update date:",Z),alert("Failed to update date")}},Ae=async()=>{if(!(!t||!q))try{const Z=await le(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportDate:new Date(q).toISOString()})});if(!Z.ok)throw new Error("Failed to update report date");const ge=await Z.json();ge.order&&a(de=>de?{...de,report_date:ge.order.report_date}:null),z(!1)}catch(Z){console.error("Failed to update report date:",Z),alert("Failed to update report date")}},ue=async()=>{if(t)try{const Z=await le(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralDoctor:B})});if(!Z.ok)throw new Error("Failed to update referral doctor");const ge=await Z.json();ge.order&&(G(ge.order.referral_doctor||""),a(de=>de?{...de,referral_doctor:ge.order.referral_doctor}:null)),W(!1)}catch(Z){console.error("Failed to update referral doctor:",Z),alert("Failed to update referral doctor")}};if(o)return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[r.jsx(te,{width:200,height:28}),r.jsxs("div",{className:"header-actions",style:{display:"flex",gap:"8px"},children:[r.jsx(te,{width:80,height:32}),r.jsx(te,{width:80,height:32}),r.jsx(te,{width:80,height:32})]})]}),r.jsxs("div",{className:"lab-inventory-card no-print summary-card",style:{margin:"1rem",padding:"0"},children:[r.jsx("div",{className:"lab-inventory-header summary-header",style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:r.jsx(te,{width:120,height:20})}),r.jsxs("div",{className:"summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem"},children:[r.jsx(te,{height:24}),r.jsx(te,{height:24}),r.jsx(te,{height:24}),r.jsx(te,{height:24})]})]}),r.jsx("div",{className:"lab-tests-container no-print",style:{padding:"1rem"},children:[1,2].map(Z=>r.jsxs("div",{className:"test-card",style:{marginBottom:"1.5rem",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"white"},children:[r.jsxs("div",{className:"test-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsx(te,{width:250,height:24}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsx(te,{width:70,height:30}),r.jsx(te,{width:36,height:30})]})]}),r.jsx("div",{className:"parameter-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(ge=>r.jsxs("div",{className:"parameter-item",children:[r.jsx(te,{width:"30%",height:16,style:{marginBottom:"0.5rem"}}),r.jsx(te,{height:40})]},ge))})]},Z))})]})});if(f&&!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Br,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:f}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:r.jsx(sn,{size:16})})]})});if(!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Dl,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${t}.`}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:r.jsx(sn,{size:16})})]})});const Te=(_e=n==null?void 0:n.Patient)==null?void 0:_e.name,se=(Ne=n==null?void 0:n.Patient)==null?void 0:Ne.patient_token_number;return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",children:[r.jsx("h2",{children:"Enter Lab Report"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:r.jsx(sn,{size:16})}),r.jsxs("button",{onClick:()=>Le(null),className:"lab-inventory-button compact-btn",title:"Print Full Report",children:[r.jsx(bf,{size:16}),r.jsx("span",{className:"btn-text",children:"Print"})]}),r.jsxs("button",{onClick:oe,className:"lab-inventory-button whatsapp-btn compact-btn",title:"Share via WhatsApp",children:[r.jsx(Zz,{size:16}),r.jsx("span",{className:"btn-text",children:"Share"})]})]})]}),n&&r.jsxs("div",{className:"lab-inventory-card no-print summary-card",children:[r.jsxs("h3",{className:"lab-inventory-header summary-header",children:[r.jsx(Dl,{size:14})," Summary"]}),r.jsxs("div",{className:"summary-grid",children:[r.jsxs("div",{className:"summary-item",children:[r.jsx(Jn,{size:13,className:"icon"}),r.jsx("strong",{children:"Patient:"})," ",Te??"N/A"," (",se??"N/A",")"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(Jn,{size:13,className:"icon"}),r.jsx("strong",{children:"Age / Sex:"})," ",g??"N/A"," / ",b?b.charAt(0).toUpperCase()+b.slice(1):"N/A"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(CI,{size:13,className:"icon"}),r.jsx("strong",{children:"Ordered:"})," ",E?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:P,onChange:Z=>I(Z.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Ve,className:"icon-btn save",children:r.jsx(Ds,{size:12})}),r.jsx("button",{onClick:()=>k(!1),className:"icon-btn cancel",children:r.jsx(Lt,{size:12})})]}):r.jsxs(r.Fragment,{children:[gf(new Date(n.createdAt),"dd MMM, HH:mm"),r.jsx("button",{onClick:()=>k(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(ao,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(CI,{size:13,className:"icon"}),r.jsx("strong",{children:"Reported:"})," ",R?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:q,onChange:Z=>F(Z.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Ae,className:"icon-btn save",children:r.jsx(Ds,{size:12})}),r.jsx("button",{onClick:()=>z(!1),className:"icon-btn cancel",children:r.jsx(Lt,{size:12})})]}):r.jsxs(r.Fragment,{children:[n.report_date?gf(new Date(n.report_date),"dd MMM, HH:mm"):"Not Set",r.jsx("button",{onClick:()=>z(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(ao,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",style:{position:"relative"},children:[r.jsx(Jn,{size:13,className:"icon"}),r.jsx("strong",{children:"Ref. By:"})," ",K?r.jsxs("div",{className:"staff-search-wrapper",style:{display:"inline-block",position:"relative"},children:[r.jsx("input",{type:"text",value:B,onChange:Z=>{G(Z.target.value),Y(!0)},onFocus:()=>Y(!0),placeholder:"Enter ref name...",className:"lab-inventory-input date-input",style:{width:"180px",padding:"2px 8px",fontSize:"0.85rem"},autoFocus:!0}),r.jsx("button",{onClick:ue,className:"icon-btn save",children:r.jsx(Ds,{size:12})}),r.jsx("button",{onClick:()=>W(!1),className:"icon-btn cancel",children:r.jsx(Lt,{size:12})}),xe&&r.jsxs("div",{className:"staff-dropdown",style:{position:"absolute",top:"100%",left:0,width:"250px",maxHeight:"200px",overflowY:"auto",backgroundColor:"white",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",zIndex:1e3,marginTop:"4px"},children:[ee.filter(Z=>Z.name.toLowerCase().includes(B.toLowerCase())).map(Z=>r.jsxs("div",{className:"staff-option",style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",fontSize:"0.85rem"},onClick:()=>{G(Z.name),Y(!1)},children:[r.jsx("div",{style:{fontWeight:"600"},children:Z.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"#666"},children:Z.role})]},Z.id)),ee.filter(Z=>Z.name.toLowerCase().includes(B.toLowerCase())).length===0&&r.jsx("div",{style:{padding:"8px 12px",color:"#888",fontSize:"0.85rem"},children:"No staff found"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{onClick:()=>W(!0),style:{cursor:"pointer",borderBottom:"1px dashed #ccc"},children:B||"Add Ref"}),r.jsx("button",{onClick:()=>W(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(ao,{size:11})})]})]})]})]}),r.jsxs("div",{className:"lab-tests-container no-print",children:[n==null?void 0:n.tests.map(Z=>{var ge;return r.jsxs("div",{className:"test-card",children:[r.jsxs("div",{className:"test-header",children:[r.jsx("h4",{children:Z.name}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsxs("button",{type:"button",onClick:de=>{de.stopPropagation(),ze(Z.id)},className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:[r.jsx(cs,{size:14}),r.jsx("span",{className:"btn-text",children:"Save"})]}),r.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),Le(Z.id)},className:"lab-inventory-button compact-btn",title:"Print",children:r.jsx(bf,{size:14})})]})]}),r.jsx("div",{className:"test-parameters-body",children:Z.default_parameters&&Z.default_parameters.length>0?r.jsx("div",{className:"parameter-grid",children:Z.default_parameters.map(de=>{var Q,ye;const ae=(Q=i[Z.id])==null?void 0:Q[de.name],ne=ae!==void 0?ae:de.defaultValue??"",ie=de.type==="number"&&ne!==""&&(de.lower_limit!=null&&parseFloat(String(ne))<de.lower_limit||de.upper_limit!=null&&parseFloat(String(ne))>de.upper_limit),je=yIe(de.name),Ee=(ye=S[Z.id])==null?void 0:ye[de.name];return r.jsxs("div",{className:"parameter-item",children:[r.jsxs("label",{className:"parameter-label",htmlFor:`${Z.id}-${de.name}`,children:[de.name," ",de.unit&&r.jsxs("span",{className:"parameter-unit",children:["(",de.unit,")"]})]}),r.jsxs("div",{className:"input-wrapper",children:[de.type==="boolean"?r.jsxs("select",{id:`${Z.id}-${de.name}`,value:(ne==null?void 0:ne.toString())??"false",onChange:me=>$e(Z.id,de.name,me.target.value==="true"),className:"lab-inventory-input parameter-input",disabled:c,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${Z.id}-${de.name}`,type:de.type==="number"?"number":"text",value:ne,onChange:me=>$e(Z.id,de.name,me.target.value),className:`lab-inventory-input parameter-input ${ie?"abnormal-result":""} ${je?"calculated-input":""}`,disabled:c||je&&!Ee,placeholder:de.lower_limit!=null&&de.upper_limit!=null?`${de.lower_limit}-${de.upper_limit}`:""}),je&&r.jsx("button",{type:"button",onClick:()=>_(me=>({...me,[Z.id]:{...me[Z.id]||{},[de.name]:!Ee}})),className:"edit-calculated-btn",title:Ee?"Lock":"Edit",children:r.jsx(ao,{size:11})})]})]},de.name)})}):r.jsxs("div",{className:"parameter-item",style:{width:"100%"},children:[r.jsx("label",{className:"parameter-label",htmlFor:`${Z.id}-report_content`,children:"Results / Observations"}),r.jsx("textarea",{id:`${Z.id}-report_content`,value:((ge=i[Z.id])==null?void 0:ge.report_content)??"",onChange:de=>$e(Z.id,"report_content",de.target.value),className:"lab-inventory-input parameter-textarea",rows:3,placeholder:`Enter results for ${Z.name}...`,disabled:c})]})})]},Z.id)}),f&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(Br,{size:15,className:"inline mr-1"}),f]})]}),r.jsx("div",{className:"form-actions-footer no-print",children:r.jsx("button",{type:"button",onClick:Se,disabled:c,className:"lab-inventory-button lab-inventory-button-primary submit-btn",children:c?r.jsxs(r.Fragment,{children:[r.jsx(oo,{className:"animate-spin",size:16})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(cs,{size:16})," Save All"]})})}),r.jsxs("div",{className:"printable-only",children:[V&&r.jsx("div",{className:"print-letterhead-container",children:r.jsx("img",{src:V,alt:"Lab Letterhead",className:"print-letterhead-image"})}),n&&n.Patient&&r.jsxs("div",{style:{marginBottom:"20px",borderBottom:"1px solid #ccc",paddingBottom:"10px"},children:[r.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Lab Report"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"12px"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Patient Name:"})," ",n.Patient.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age / Sex:"})," ",g??"N/A"," / ",b?b.charAt(0).toUpperCase()+b.slice(1):"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. By:"})," ",B||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",gf(new Date(n.createdAt),"PPpp")]})]})]}),n==null?void 0:n.tests.filter(Z=>T===null||Z.id===T).map(Z=>{var ge;return r.jsxs("div",{style:{marginBottom:"20px",pageBreakInside:"avoid"},children:[r.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"5px"},children:Z.name}),Z.default_parameters&&Z.default_parameters.length>0?r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f9f9f9"},children:[r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Parameter"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Result"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Units"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Normal Range"})]})}),r.jsx("tbody",{children:Z.default_parameters.map(de=>{var Q;const ae=(Q=i[Z.id])==null?void 0:Q[de.name],ne=typeof ae=="string"?parseFloat(ae):typeof ae=="number"?ae:NaN,ie=de.type==="number"&&!isNaN(ne)&&ae!==""&&(de.lower_limit!=null&&ne<de.lower_limit||de.upper_limit!=null&&ne>de.upper_limit),je=de.type==="boolean"&&(ae===!0||ae==="true"),Ee=de.type==="boolean"?ae===!0||ae==="true"?"Reactive":"Non-Reactive":ae??"";return r.jsxs("tr",{children:[r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:de.name}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee",fontWeight:ie||je?"bold":"normal",color:ie?"red":je?"green":"inherit"},children:Ee}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:de.unit??""}),r.jsxs("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:[de.lower_limit!==null&&de.lower_limit!==void 0&&`> ${de.lower_limit}`,de.lower_limit!==null&&de.lower_limit!==void 0&&de.upper_limit!==null&&de.upper_limit!==void 0&&" - ",de.upper_limit!==null&&de.upper_limit!==void 0&&`< ${de.upper_limit}`]})]},de.name)})})]}):r.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"12px",padding:"10px"},children:((ge=i[Z.id])==null?void 0:ge.report_content)||"No report content entered."})]},Z.id)})]})]})})},xIe=()=>{const{orderId:t}=$a(),e=Ft(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(""),f=v.useCallback(async g=>{if(!g){l("No Order ID specified in the URL."),s(!1),a(null);return}s(!0),l(null),a(null);try{console.log(`Fetching order details for ID: ${g}`);const x=await le(`/api/lab/orders/${g}/report`);if(!x.ok){let j;try{j=await x.json()}catch{j={message:`Server returned status ${x.status}`}}throw console.error("Fetch order details error response:",j),new Error(j.message||`Failed to fetch order details: ${x.status}`)}const b=await x.json();if(console.log("Received order data:",b),!b)throw console.error("Invalid order data structure:",b),new Error("Invalid order data received from server.");a(b)}catch(x){console.error("Error fetching order details:",x),l(x instanceof Error?x.message:"An unknown error occurred while fetching the order details")}finally{s(!1)}},[le]);v.useEffect(()=>{f(t)},[t,f]),v.useEffect(()=>{(async()=>{try{const x=await le("/api/clinics/settings");if(x.ok){const b=await x.json();d(b.labLetterheadUrl||"")}}catch(x){console.error("Error fetching clinic settings:",x)}})()},[]);const p=()=>{n&&FM(n)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(Cr,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(En,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:r.jsx(sn,{size:16})}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(bf,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(Zz,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",t||"None Specified",")"]}),i&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),o&&!i&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(Br,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:o}),t&&r.jsx("button",{onClick:()=>f(t),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[c&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:c,alt:"Lab Letterhead",className:"print-letterhead-image"})}),!i&&!o&&(n==null?void 0:n.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Jn,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",n.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",n.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",n.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",n.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",n.Patient.id]}),n.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",n.Patient.phone]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. By:"})," ",n.referral_doctor||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Report Date:"})," ",n.report_date?new Date(n.report_date).toLocaleString():"N/A"]})]})]}),!i&&!o&&(n==null?void 0:n.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(aa,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const g=JSON.parse(n.report_content||"{}");return typeof g=="object"&&g!==null&&n.tests?n.tests.map(x=>r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:x.name}),g[x.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(g[x.id]).map(([b,j])=>{var k;const S=(k=x.default_parameters)==null?void 0:k.find(P=>P.name===b),_=typeof j=="string"?parseFloat(j):typeof j=="number"?j:NaN,T=(S==null?void 0:S.type)==="number"&&!isNaN(_)&&(S.lower_limit!=null&&_<S.lower_limit||S.upper_limit!=null&&_>S.upper_limit),C=(S==null?void 0:S.type)==="boolean"?j===!0||j==="true"?"Reactive":"Non-Reactive":String(j),E=(S==null?void 0:S.type)==="boolean"&&(j===!0||j==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:b}),r.jsxs("td",{className:`${T?"abnormal-result":""} ${E?"reactive-result":""}`,children:[C," ",S==null?void 0:S.unit]}),r.jsx("td",{children:S&&S.type==="number"&&(S.lower_limit!==null||S.upper_limit!==null)?r.jsxs(r.Fragment,{children:[S.lower_limit!=null&&` > ${S.lower_limit}`,S.lower_limit!=null&&S.upper_limit!=null&&" - ",S.upper_limit!=null&&` < ${S.upper_limit}`,S.unit&&` ${S.unit}`]}):((S==null?void 0:S.type)==="boolean","N/A")})]},b)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},x.id)):r.jsx(Nf,{remarkPlugins:[Sf],children:n.report_content})}catch{return r.jsx(Nf,{remarkPlugins:[Sf],children:n.report_content||"*No findings recorded.*"})}})()})]})]}),!i&&!o&&!(n!=null&&n.report_content)&&!(n!=null&&n.Patient)&&t&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",t,". The order might be processing, does not exist, or the ID is incorrect."]}),!t&&!i&&!o&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(Cr,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},vIe=()=>{const t=Ft(),[e,n]=v.useState(""),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(e);Yc(),v.useEffect(()=>{const j=setTimeout(()=>{f(e)},500);return()=>{clearTimeout(j)}},[e]),v.useEffect(()=>{p()},[d]);const p=async()=>{const j=e.trim();if(!j){o([]),c(null);return}i(!0),c(null),o([]),console.log(`Searching for: ${j}`);try{const S=await le("/api/lab");if(!S.ok){let P;try{P=await S.json()}catch{P={message:`Server returned status ${S.status}`}}throw console.error("Search fetch error response:",P),new Error(P.message||`HTTP error! status: ${S.status}`)}const{orders:_}=await S.json();console.log("Received lab orders for search:",_);const C=_.filter(P=>!!P.report_content).map(P=>{var I,R;return{id:P.id,labTokenNumber:String(P.lab_token_number??"N/A"),patientName:((I=P.Patient)==null?void 0:I.name)||"N/A",patientId:P.patient_id,patientTokenNumber:String(((R=P.Patient)==null?void 0:R.patient_token_number)??"N/A"),tests:(P.tests||[]).map(z=>z.name||"Unknown Test"),date:gf(new Date(P.createdAt),"yyyy-MM-dd"),status:P.status}}),E=new co(C,{keys:["patientName","labTokenNumber","patientTokenNumber","tests","id","patientId"],threshold:.3,ignoreLocation:!0}),k=e.trim()?E.search(e).map(P=>P.item):C;console.log("Filtered search results:",k),o(k),k.length===0&&j?c(`No matching reports found for "${j}".`):c(null)}catch(S){console.error("Failed to search lab reports:",S),c(S instanceof Error?S.message:"An unknown error occurred during search")}finally{i(!1)}},g=j=>{console.log(`Result clicked, navigating to view report for order ID: ${j}`),t(`/lab/view-report/${j}`)},x=j=>{switch(j){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:j,color:"text-gray-600 bg-gray-100"}}},b=j=>{switch(j){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(sn,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(En,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:e,onChange:j=>n(j.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[a&&r.jsx("div",{className:"loading-text",children:"Searching..."}),l&&!a&&r.jsxs("div",{className:"error-text",children:[r.jsx(Br,{size:20,className:"inline mr-2"})," ",l]}),s.length>0&&!a&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:s.map(j=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(j.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(lX,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),j.patientName," (Token: ",j.patientTokenNumber,")"]}),r.jsx("span",{className:b(j.status),children:x(j.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(aa,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",j.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(XJ,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",j.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx(GD,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",j.date]})]})]},j.id))}),!a&&s.length===0&&!l&&e.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',e,'".']}),!a&&s.length===0&&!l&&!e.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},bIe=()=>{const{patientId:t}=$a(),e=Ft(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(null),[f,p]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){l("Patient ID is missing from the URL."),s(!1);return}s(!0),l(null),a([]),p(null);try{const b=await le(`/api/patients/${t}`);if(b.ok){const _=await b.json();p(_.name||`Patient ID: ${t}`)}else console.warn(`Failed to fetch patient name for ID ${t}`),p(`Patient ID: ${t}`);const j=await le(`/api/lab/patient/${t}`);if(!j.ok){const _=await j.json().catch(()=>({}));throw new Error(_.message||`HTTP error! status: ${j.status}`)}const S=await j.json();a(S||[])}catch(b){console.error("Error fetching data:",b),l(`Failed to load data: ${b.message}`)}finally{s(!1)}})()},[t]);const g=x=>{x.report_content?e(`/lab/view-report/${x.id}`):e(`/lab/enter-report/${x.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",f?`for ${f}`:`for Patient ID: ${t}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!t){alert("Patient ID is missing. Cannot create a new report.");return}try{const x=await le("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:t})});if(!x.ok){const j=await x.json().catch(()=>({message:`Failed to create new lab order: ${x.status}`}));throw new Error(j.message||`Failed to create new lab order: ${x.status}`)}const b=await x.json();e(`/lab/enter-report/${b.newOrderId}`)}catch(x){console.error("Error creating new lab order:",x),alert(`Error creating new lab order: ${x.message}`)}},className:"lab-inventory-button",disabled:!t,title:t?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(Ps,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(sn,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:i?r.jsx("div",{className:"skeleton-reports-list",children:[1,2,3].map(x=>r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsx(te,{variant:"circular",width:24,height:24,style:{marginRight:"15px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx(te,{width:"40%",height:20,style:{marginBottom:"8px"}}),r.jsx(te,{width:"60%",height:16})]})]}),r.jsx("div",{style:{marginLeft:"10px"},children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})})]},x))}):o?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(aZ,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:o})]}):n.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(aa,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(Cr,{to:`/lab/create-order/${t}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):c?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",c.report_date?gf(new Date(c.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>d(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(sn,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(c.tests||[]).map(x=>x.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(Nf,{remarkPlugins:[Sf],children:c.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:n.map(x=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(x),tabIndex:0,onKeyPress:b=>b.key==="Enter"&&g(x),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(aa,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",gf(new Date(x.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",x.tests&&x.tests.length>0?x.tests.map(b=>b.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.status&&r.jsx("span",{className:wIe(x.status),children:jIe(x.status)}),r.jsx(pd,{size:20,style:{color:"#6c757d"}})]})]},x.id))})})]})})},jIe=t=>{if(!t)return"Unknown";switch(t.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t.charAt(0).toUpperCase()+t.slice(1)}},wIe=t=>{if(!t)return"status-badge";switch(t.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},AG=()=>{const t=Ft(),[e]=Tz(),n=e.get("search")||"",[a,i]=v.useState("pharmacy");return Yc(void 0,300),r.jsxs("div",{className:"inventory-management-container",style:{padding:"10px 15px",backgroundColor:"var(--background-color)",minHeight:"100vh"},children:[r.jsxs("div",{className:"inventory-header",style:{marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"action-icon-button",title:"Go Back",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-primary)"},children:r.jsx(sn,{size:20})}),r.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700",color:"var(--text-primary)"},children:"Inventory Management"})]}),r.jsxs("div",{className:"inventory-tabs",style:{display:"flex",gap:"4px",backgroundColor:"var(--card-bg, #f3f4f6)",padding:"3px",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("button",{onClick:()=>i("pharmacy"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="pharmacy"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="pharmacy"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="pharmacy"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="pharmacy"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="pharmacy"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx($o,{size:16}),"Pharmacy Stock"]}),r.jsxs("button",{onClick:()=>i("lab"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="lab"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="lab"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="lab"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="lab"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="lab"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(ls,{size:16}),"Lab Stock"]})]})]}),r.jsx("div",{className:"inventory-content",style:{backgroundColor:"var(--card-bg, #fff)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:a==="pharmacy"?r.jsx(CG,{isEmbedded:!0,initialSearch:n}):r.jsx(LM,{isEmbedded:!0})})]})},NIe=({fetchWithAuth:t})=>{const e=Ft(),[n,a]=v.useState(!0),[i,s]=v.useState([]),[o,l]=v.useState(null),[c,d]=v.useState(null),f=v.useCallback(async()=>{a(!0),l(null);try{const b=await(await t("/staff")).json();s(b.map(j=>({...j,id:j._id||j.id})))}catch(x){l(`Failed to load staff data: ${x.message}`),s([])}finally{a(!1)}},[t]);v.useEffect(()=>{f()},[f]),v.useEffect(()=>{if(c){const x=setTimeout(()=>d(null),5e3);return()=>clearTimeout(x)}},[c]);const p=x=>{switch(x){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},g=x=>{switch(x){case"doctor":return r.jsx(jf,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(eq,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx($o,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(ls,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(dd,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(Os,{size:16,className:"mr-2 text-gray-500"})}};return n?r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(te,{width:40,height:40,variant:"circular"}),r.jsx(te,{width:200,height:32})]}),r.jsx(te,{width:150,height:40})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(te,{width:80,height:32})})]},x))})]})})]}):r.jsxs("div",{className:"staff-page-container",children:[c&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[c.type==="success"?r.jsx(Wo,{size:18,className:"mr-2"}):r.jsx(Br,{size:18,className:"mr-2"}),r.jsx("span",{children:c.message}),r.jsx("button",{onClick:()=>d(null),className:"ml-auto text-xl font-bold",children:""})]}),o&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(Br,{size:18,className:"mr-2 text-red-500"}),o,r.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(sn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>e("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(Vn,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0&&!n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):i.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsx("td",{className:"hidden md:table-cell",children:x.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(x.role)}`,children:[g(x.role),x.role.charAt(0).toUpperCase()+x.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:x.role==="doctor"?x.opd_fee?parseFloat(String(x.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>e(`/dashboard/staff/edit/${x.id}`),className:"edit-link",disabled:x.role==="admin",title:"Edit Staff",children:[r.jsx(Bi,{size:16})," Edit"]})})]},x.id))})]})})]})},RB=()=>{var Te,se,be,_e,Ne,Z,ge,de,ae,ne,ie,je,Ee,Q,ye,me,he,De,nt;const{patientId:t,billId:e}=$a(),n=Ft(),[a,i]=v.useState(null),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(""),[p,g]=v.useState("cash"),[x,b]=v.useState(!1),[j,S]=v.useState(""),[_,T]=v.useState(""),[C,E]=v.useState(""),[k,P]=v.useState(""),[I,R]=v.useState([]),[z,q]=v.useState(""),[F,V]=v.useState(!1),[H,K]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),W=()=>{H.length<5&&K(Fe=>[...Fe,{id:Date.now().toString(),method:"cash",amount:0}])},B=Fe=>{H.length>2&&K(Ge=>Ge.filter(it=>it.id!==Fe))},G=(Fe,Ge,it)=>{K(wt=>wt.map(we=>we.id===Fe?Ge==="method"?{...we,method:it}:{...we,amount:Math.max(0,it)}:we))},ee=(Fe,Ge)=>{const it=H.filter(we=>we.id!==Fe).reduce((we,Qe)=>we+Qe.amount,0),wt=Math.max(0,Ge-it);K(we=>we.map(Qe=>Qe.id===Fe?{...Qe,amount:wt}:Qe))},[X,$]=v.useState([]),[ce,xe]=v.useState(0),Y=((Te=a==null?void 0:a.patient)==null?void 0:Te.insurance_type)==="no_cash_insurance";v.useEffect(()=>{g(Y?"no_cash_insurance":"cash")},[Y]),v.useEffect(()=>{e&&(async()=>{o(!0),c(null);try{const[Ge,it,wt]=await Promise.all([le(`/api/bills/${e}`),le("/api/clinics/settings").catch(()=>null),le(`/api/bills?patientId=${t}`).catch(()=>null)]);if(!Ge.ok)throw new Error(`HTTP error! status: ${Ge.status}`);const we=await Ge.json();if(!we||!we.bill||!we.calculated)throw new Error("Incomplete data structure received from backend.");if(we.bill.type!=="admission")throw new Error(`Unexpected bill type: ${we.bill.type}. Expected 'admission'.`);const Qe=Array.isArray(we.admissionPayments)?we.admissionPayments:[];if(i({...we.bill,amount:we.bill.amount,created_at:we.bill.createdAt||we.bill.created_at,items:(we.bill.items||[]).map(Xe=>({...Xe,price:parseFloat(Xe.price)||0,quantity:parseInt(Xe.quantity)||1})),AdmissionPayments:Qe,calculated:we.calculated,admissionRecord:we.admissionRecord,patient:we.bill.Patient?{id:we.bill.Patient.id,name:we.bill.Patient.name,admission_date:we.bill.Patient.admission_date,discharge_date:we.bill.Patient.discharge_date,token:we.bill.Patient.patient_token_number||we.bill.Patient.token,insurance_type:we.bill.Patient.insurance_type}:void 0}),it&&it.ok){const Xe=await it.json();S(Xe.name||""),T(Xe.address||""),E(Xe.notes||""),P(Xe.upi_id||"")}try{const Xe=await le(`/api/patients/${t}/admission-payments`);if(Xe.ok){const ct=await Xe.json();R(ct)}}catch(Xe){console.error("Failed to fetch payment history:",Xe)}if(wt&&wt.ok){const ct=((await wt.json()).bills||[]).filter(bt=>bt.type==="admission"&&bt.id!==e).map(bt=>{var ot,Tt;const ke=bt.AdmissionRecord;return{id:bt.id,amount:ke?parseFloat(ke.total_amount):parseFloat(bt.amount)||0,status:ke?ke.balance<=0||ke.status==="discharged"&&ke.balance<=0?"paid":"pending":bt.status,created_at:bt.createdAt||bt.created_at,admission_date:ke?ke.admission_date:((ot=bt.Patient)==null?void 0:ot.admission_date)||bt.admission_date,discharge_date:ke?ke.discharge_date:((Tt=bt.Patient)==null?void 0:Tt.discharge_date)||bt.discharge_date,admissionRecord:ke}});$(ct);const Ct=ct.filter(bt=>bt.admissionRecord?bt.admissionRecord.balance>0:bt.status!=="paid").reduce((bt,ke)=>ke.admissionRecord?bt+(typeof ke.admissionRecord.balance=="string"?parseFloat(ke.admissionRecord.balance):ke.admissionRecord.balance):bt+ke.amount,0);xe(Ct)}}catch(Ge){console.error("Failed to fetch admission bill details:",Ge),c(Ge instanceof Error?Ge.message:"An unknown error occurred")}finally{o(!1)}})()},[e,t]),v.useEffect(()=>{(async()=>{if(!e){if(!t){c("Patient ID is missing."),o(!1);return}try{o(!0);const Ge=await le(`/api/patients/${t}`);if(Ge.ok){const it=await Ge.json();if(it){if(it.admission_date&&!it.discharge_date){const we=await le(`/api/patients/${t}/active-bill?type=admission`);if(we.ok){const Qe=await we.json();if(Qe&&Qe.id){n(`/patient/${t}/admission-bill/${Qe.id}`,{replace:!0});return}}}i({id:0,patient_id:it.id,type:"admission",amount:"0",status:"pending",created_at:new Date().toISOString(),AdmissionPayments:[],calculated:{totalPaid:0,totalDue:0,balance:0,daysStayed:0,perDayCharge:0},patient:{id:it.id,name:it.name,admission_date:it.admission_date,discharge_date:it.discharge_date,token:it.token,insurance_type:it.insurance_type}});const wt=await le(`/api/bills?patientId=${t}`);if(wt.ok){const Qe=((await wt.json()).bills||[]).filter(Xe=>Xe.type==="admission").map(Xe=>{var Ct,bt;const ct=Xe.AdmissionRecord;return{id:Xe.id,amount:ct?parseFloat(ct.total_amount):parseFloat(Xe.amount)||0,status:ct?ct.balance<=0||ct.status==="discharged"&&ct.balance<=0?"paid":"pending":Xe.status,created_at:Xe.createdAt||Xe.created_at,admission_date:ct?ct.admission_date:((Ct=Xe.Patient)==null?void 0:Ct.admission_date)||Xe.admission_date,discharge_date:ct?ct.discharge_date:((bt=Xe.Patient)==null?void 0:bt.discharge_date)||Xe.discharge_date,admissionRecord:ct}});$(Qe)}}else c("Patient not found")}}catch(Ge){console.error("Error fetching patient status:",Ge),c("Failed to load patient details")}finally{o(!1)}}})()},[t,e,n]);const Re=async()=>{if(t){b(!0);try{const Fe=await le(`/api/patients/${t}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Fe.ok){const it=await Fe.json();throw new Error(it.message||"Failed to admit patient")}const Ge=await Fe.json();Ge.bill&&Ge.bill.id?n(`/patient/${t}/admission-bill/${Ge.bill.id}`):window.location.reload()}catch(Fe){c(Fe instanceof Error?Fe.message:"Failed to admit patient"),b(!1)}}},$e=async()=>{if(t&&window.confirm("Are you sure you want to discharge this patient? This will finalize the bill.")){b(!0);try{const Fe=await le(`/api/patients/${t}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Fe.ok){const Ge=await Fe.json();throw new Error(Ge.message||"Failed to discharge patient")}window.location.reload()}catch(Fe){c(Fe instanceof Error?Fe.message:"Failed to discharge patient"),b(!1)}}},ze=((se=a==null?void 0:a.patient)==null?void 0:se.admission_date)&&!((be=a==null?void 0:a.patient)!=null&&be.discharge_date),Le=!!((_e=a==null?void 0:a.patient)!=null&&_e.discharge_date);v.useEffect(()=>{var it,wt;const Ge=Number(((it=a==null?void 0:a.calculated)==null?void 0:it.balance)??((wt=a==null?void 0:a.admissionRecord)==null?void 0:wt.balance)??0)+ce;if(Ge>0&&k){const we=`upi://pay?pa=${k}&pn=${encodeURIComponent(j||"Clinic")}&am=${Ge.toFixed(2)}&cu=INR`;q(we)}else q("")},[a,ce,k,j]);const oe=H.reduce((Fe,Ge)=>Fe+Ge.amount,0),Se=async Fe=>{var we,Qe;Fe.preventDefault();const it=Number(((we=a==null?void 0:a.calculated)==null?void 0:we.balance)??((Qe=a==null?void 0:a.admissionRecord)==null?void 0:Qe.balance)??0)+ce,wt=F?oe:parseFloat(d);if(!t||wt<=0||wt>it+.1){c(`Please enter a valid amount. Max payable: ${it.toFixed(2)}`);return}c(null),b(!0);try{if(F){for(const Ct of H)if(Ct.amount>0){const bt=await le(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:Ct.amount,payment_mode:Ct.method})});if(!bt.ok){const ke=await bt.json();throw new Error(ke.message||`Failed to record ${Ct.method} payment`)}}}else{const Ct=await le(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(d),payment_mode:p})});if(!Ct.ok){const bt=await Ct.json();throw new Error(bt.message||`HTTP error! status: ${Ct.status}`)}}const ct=await(await le(`/api/bills/${e}`)).json();if(ct&&ct.bill&&ct.calculated&&ct.admissionPayments)i({...ct.bill,amount:parseFloat(ct.bill.amount),AdmissionPayments:ct.admissionPayments,calculated:ct.calculated,patient:ct.bill.Patient?{id:ct.bill.Patient.id,name:ct.bill.Patient.name,admission_date:ct.bill.Patient.admission_date,discharge_date:ct.bill.Patient.discharge_date,token:ct.bill.Patient.token,insurance_type:ct.bill.Patient.insurance_type}:void 0});else throw new Error("Invalid data structure received after payment submission.");f(""),g("cash"),F&&(K([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V(!1)),setTimeout(()=>{window.print()},100)}catch(Xe){console.error("Failed to submit payment:",Xe),c(Xe instanceof Error?Xe.message:"Failed to record payment")}finally{b(!1)}},Ve=()=>{window.print()};if(s)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(te,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]})]})]})})]})]})});if(l)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>n(-1),className:"back-button",children:r.jsx(sn,{size:20})}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"error-message-box",children:["Error: ",l]})]})});if(!a||!a.calculated)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"error-message-box",children:"No bill details found or data is incomplete."})});const Ae=Number(a.calculated&&a.calculated.balance!==void 0?a.calculated.balance:a.admissionRecord?a.admissionRecord.balance:0),ue=a.status==="paid"||Ae<=0;return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"ADMISSION BILL"}),r.jsx("h2",{className:"clinic-name-print",children:j||"Hospital"}),(_||C)&&r.jsxs("div",{className:"clinic-details-print",children:[_&&r.jsx("span",{className:"small-text clinic-address",children:_}),C&&r.jsx("span",{className:"small-text clinic-notes",children:C})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient"]})," ",((Ne=a.patient)==null?void 0:Ne.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((Z=a.patient)==null?void 0:Z.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(sn,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{children:"Patient Information"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[!ze&&!Le&&r.jsxs("button",{onClick:Re,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(VN,{size:16})," Admit Patient"]}),ze&&r.jsxs("button",{onClick:$e,disabled:x,className:"secondary-button",style:{fontSize:"0.85em",padding:"6px 12px",background:"#dc3545",color:"white"},children:[r.jsx(QX,{size:16})," Discharge"]}),Le&&r.jsxs("button",{onClick:Re,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(kJ,{size:16})," Re-Admit"]})]})]}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((ge=a.patient)==null?void 0:ge.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((de=a.patient)==null?void 0:de.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(DQ,{size:16})," Bill ID"]})," ",a.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Created"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Admission Charges Breakdown"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsxs("tbody",{children:[a.admissionRecord?r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]})]}),a.admissionRecord.days_stayed?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString(),a.admissionRecord.discharge_date?` - ${new Date(a.admissionRecord.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.admissionRecord.days_stayed," days"]}),r.jsxs("td",{children:["",Number(a.admissionRecord.per_day_charge).toFixed(2)]}),r.jsxs("td",{children:["",(Number(a.admissionRecord.days_stayed)*Number(a.admissionRecord.per_day_charge)).toFixed(2)]})]}):a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges (Ongoing)",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString()," - Today)"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]}):null]}):r.jsxs(r.Fragment,{children:[a.items&&a.items.length>0?a.items.map((Fe,Ge)=>r.jsxs("tr",{children:[r.jsx("td",{children:Ge+1}),r.jsx("td",{children:Fe.name}),r.jsx("td",{children:Fe.quantity}),r.jsxs("td",{children:["",Fe.price.toFixed(2)]}),r.jsxs("td",{children:["",(Fe.price*Fe.quantity).toFixed(2)]})]},`item-${Ge}`)):r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Initial Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]})]}),a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:(((ae=a.items)==null?void 0:ae.length)||1)+1}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",(ne=a.patient)!=null&&ne.admission_date?new Date(a.patient.admission_date).toLocaleDateString():"",(ie=a.patient)!=null&&ie.discharge_date?` - ${new Date(a.patient.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]})]}),r.jsxs("tr",{className:"subtotal-row current-admission-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Current Admission Total"}),r.jsxs("td",{children:["",Number(((je=a.calculated)==null?void 0:je.totalDue)??((Ee=a.admissionRecord)==null?void 0:Ee.total_amount)??0).toFixed(2)]})]}),X.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("tr",{className:"section-header-row previous-admissions-header",children:r.jsx("td",{colSpan:5,style:{fontWeight:600,textAlign:"center"},children:"Previous Admissions"})}),X.map((Fe,Ge)=>r.jsxs("tr",{className:Fe.status!=="paid"?"bill-row-unpaid":"bill-row-paid",children:[r.jsx("td",{children:Ge+1}),r.jsxs("td",{children:["Admission - ",Fe.admission_date?new Date(Fe.admission_date).toLocaleDateString():"N/A",Fe.discharge_date&&r.jsxs("small",{style:{display:"block",color:"inherit",opacity:.8,fontSize:"0.75em"},children:["Discharged: ",new Date(Fe.discharge_date).toLocaleDateString()]})]}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Fe.amount.toFixed(2)]}),r.jsxs("td",{className:Fe.status!=="paid"?"text-danger":"text-success",children:["",Fe.amount.toFixed(2),Fe.status==="paid"&&r.jsx("small",{style:{marginLeft:"4px"},children:"(Paid)"})]})]},Fe.id)),ce>0&&r.jsxs("tr",{className:"subtotal-row unpaid-balance-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Previous Unpaid Balance"}),r.jsxs("td",{children:["",ce.toFixed(2)]})]})]}),r.jsxs("tr",{className:`grand-total-row-dynamic ${ce>0?"grand-total-unpaid":"grand-total-paid"}`,children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"GRAND TOTAL"}),r.jsxs("td",{style:{fontSize:"1.1em"},children:["",(Number(((Q=a.calculated)==null?void 0:Q.totalDue)??((ye=a.admissionRecord)==null?void 0:ye.total_amount)??0)+ce).toFixed(2)]})]})]})]})]}),I.length>0&&r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Payment History"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DATE"}),r.jsx("th",{children:"MODE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsx("tbody",{children:I.map((Fe,Ge)=>{var it;return r.jsxs("tr",{children:[r.jsx("td",{children:Ge+1}),r.jsx("td",{children:Fe.payment_date?new Date(Fe.payment_date).toLocaleDateString():"N/A"}),r.jsx("td",{style:{textTransform:"capitalize"},children:((it=Fe.payment_mode)==null?void 0:it.replace(/_/g," "))||"N/A"}),r.jsxs("td",{children:["",(Number(Fe.amount_paid)||0).toFixed(2)]})]},Fe.id)})})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",Number(((me=a.calculated)==null?void 0:me.totalDue)??((he=a.admissionRecord)==null?void 0:he.total_amount)??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Number(((De=a.calculated)==null?void 0:De.totalPaid)??((nt=a.admissionRecord)==null?void 0:nt.total_paid)??0).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Balance Due: ",Ae.toFixed(2)]})})]}),z&&Ae>0&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(Fa,{value:z,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",(a.calculated.totalDue||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Days Stayed"}),r.jsx("span",{children:a.calculated.daysStayed??0})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{style:{color:"#28a745"},children:["",(a.calculated.totalPaid||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Balance Due"}),r.jsxs("strong",{style:{color:Ae>0?"#dc3545":"#28a745"},children:["",Ae.toFixed(2)]})]}),X.length>0&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #dee2e6"},children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",color:"#495057"},children:"Previous Admissions"}),X.map(Fe=>r.jsxs("div",{className:"summary-row",style:{fontSize:"0.8rem"},children:[r.jsxs("span",{style:{color:"#6c757d"},children:[Fe.admission_date?new Date(Fe.admission_date).toLocaleDateString():"N/A",Fe.status!=="paid"&&r.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"(Unpaid)"})]}),r.jsxs("span",{style:{color:Fe.status!=="paid"?"#dc3545":"#28a745"},children:["",Fe.amount.toFixed(2)]})]},Fe.id)),ce>0&&r.jsxs("div",{className:"summary-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e9ecef"},children:[r.jsx("strong",{style:{color:"#dc3545",fontSize:"0.875rem"},children:"Previous Balance"}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",ce.toFixed(2)]})]})]}),ce>0&&r.jsxs("div",{className:"summary-row grand-total-row",style:{marginTop:"0.75rem",background:"#fff3cd"},children:[r.jsx("strong",{style:{color:"#856404"},children:"Total Outstanding"}),r.jsxs("strong",{style:{color:"#856404"},children:["",(Ae+ce).toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:z&&Ae>0?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:z,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):Ae<=0?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#28a745"},children:[r.jsx(hv,{size:48}),r.jsx("p",{style:{marginTop:"10px",fontWeight:600},children:"Fully Paid"})]}):r.jsx("p",{children:"UPI QR code not available."})}),!ue&&r.jsxs("form",{onSubmit:Se,children:[r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>V(!F),disabled:x,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:F?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:F?"rgba(79, 172, 254, 0.1)":"transparent",color:F?"#4facfe":"#666",cursor:x?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),F?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",oe.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:H.map((Fe,Ge)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Ge+1}),r.jsxs("select",{value:Fe.method,onChange:it=>G(Fe.id,"method",it.target.value),className:"split-payment-select",disabled:x,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Fe.amount||"",onChange:it=>G(Fe.id,"amount",parseFloat(it.target.value)||0),className:"split-payment-input",disabled:x})]}),H.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ee(Fe.id,Ae+ce),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining balance",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>B(Fe.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},Fe.id))}),H.length<5&&r.jsxs("button",{type:"button",onClick:W,className:"split-payment-add-btn",disabled:x,children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Max Payable:"}),r.jsxs("span",{style:{fontWeight:600},children:["",(Ae+ce).toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${oe<=Ae+ce+.1?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:oe<=Ae+ce+.1?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",oe.toFixed(2)]})]}),oe>Ae+ce+.1&&r.jsx("div",{className:"split-payment-warning",children:" Amount exceeds balance!"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"payment-input-group",style:{marginBottom:"15px"},children:[r.jsx("label",{htmlFor:"paymentAmount",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Amount ()"}),r.jsx("input",{type:"number",id:"paymentAmount",value:d,onChange:Fe=>f(Fe.target.value),placeholder:`Max ${(Ae+ce).toFixed(2)}`,min:"0.01",step:"0.01",max:Ae+ce,className:"payment-mode-select",required:!0})]}),r.jsxs("div",{className:"payment-input-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:p,onChange:Fe=>g(Fe.target.value),className:"payment-mode-select",disabled:Y,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),Y&&r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"})]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{type:"button",onClick:Ve,className:"secondary-button print-preview-button",children:"Print Preview"}),r.jsx("button",{type:"submit",className:"primary-button",disabled:x||!F&&(!d||parseFloat(d)<=0||parseFloat(d)>Ae+ce)||F&&(oe<=0||oe>Ae+ce+.1),children:x?"Processing...":"Record Payment & Print"})]})]}),ue&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Ve,className:"secondary-button",children:"Print Bill"})})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for choosing our hospital!"}),r.jsx("p",{children:"This is a computer-generated bill and does not require a signature."})]})]})})},SIe=t=>{switch(t){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},_Ie=()=>{const{orderId:t}=$a(),e=Ft(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState({}),[g,x]=v.useState(""),[b,j]=v.useState(""),[S,_]=v.useState("cash"),T=v.useMemo(()=>(n==null?void 0:n.medications.reduce((F,V)=>{const H=V.total_price??0,K=H*(V.discount_percentage??0)/100;return F+H-K},0))??0,[n==null?void 0:n.medications]),C=5,E=v.useMemo(()=>!n||!n.medications?0:n.medications.reduce((F,V,H)=>{var X,$;const K=V.drug_id??`index-${H}`,W=((X=f[K])==null?void 0:X.pack)||0,B=(($=f[K])==null?void 0:$.loose)||0,G=V.pack_price??0,ee=V.loose_price??0;return F+W*G+B*ee},0),[n,f]),k=v.useCallback(async()=>{if(!t){l("Order ID is missing."),s(!1);return}s(!0),l(null);try{const F=await le(`/api/pharmacy-orders/${t}`);if(!F.ok)throw F.status===404?new Error(`Order with ID ${t} not found.`):new Error(`Failed to fetch order details: ${F.statusText} (${F.status})`);const V=await F.json();console.log("Fetched order data after return:",V);const K=V.medications.map(B=>B.pack_price&&B.loose_price&&B.loose_price>0?{...B,unitsPerPack:Math.round(B.pack_price/B.loose_price)}:{...B,unitsPerPack:0}).map(B=>({...B,discount_percentage:B.discount_percentage??0}));a({...V,medications:K});const W={};K.forEach((B,G)=>{const ee=B.drug_id??`index-${G}`;W[ee]={pack:0,loose:0}}),p(W)}catch(F){console.error("Failed to fetch order details:",F),l(F.message||"Failed to load order details.")}finally{s(!1)}},[t]);v.useEffect(()=>{k()},[k]),v.useEffect(()=>{(async()=>{try{const V=await le("/api/clinics/settings");if(!V.ok)throw new Error("Failed to fetch clinic settings");const H=await V.json();console.log("Fetched clinic settings:",H),x(H.upi_id||"")}catch(V){console.error("Error fetching clinic settings:",V)}})()},[]),v.useEffect(()=>{if((n==null?void 0:n.order_total)!==void 0&&n.order_total>0&&g){const F=`upi://pay?pa=${g}&pn=ClinicName&am=${n.order_total.toFixed(2)}&cu=INR`;j(F)}else j("")},[n==null?void 0:n.order_total,g]);const P=(F,V)=>{a(H=>{if(!H)return null;const K=H.medications.map((B,G)=>(B.drug_id??`index-${G}`)===F?{...B,discount_percentage:isNaN(V)?0:V}:B),W=K.reduce((B,G)=>{const ee=G.total_price??0,X=ee*(G.discount_percentage??0)/100;return B+ee-X},0);return{...H,medications:K,order_total:W}})},I=(F,V,H)=>{p(K=>{const W=H.unitsPerPack||0,G=H.pack_quantity*W+H.loose_quantity,ee=Math.max(0,Math.min(V,G));let X=0,$=ee;return W>0&&(X=Math.floor(ee/W),$=ee%W),{...K,[F]:{pack:X,loose:$}}})},R=async()=>{const F=n==null?void 0:n.medications.map((V,H)=>{var G,ee;const K=V.drug_id??`index-${H}`,W=((G=f[K])==null?void 0:G.pack)||0,B=((ee=f[K])==null?void 0:ee.loose)||0;return W>0||B>0?{drug_id:V.drug_id,name:V.name,pack_quantity:V.pack_quantity,loose_quantity:V.loose_quantity,returnPackQuantity:W,returnLooseQuantity:B}:null}).filter(V=>V!==null);if(!F||F.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!t){alert("Order ID is missing. Cannot process return.");return}if(!F){alert("Could not prepare items for return.");return}d(!0),l(null);try{const V=await le(`/api/pharmacy-orders/${t}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:F})}),H=await V.json();if(!V.ok)throw new Error(H.message||`Failed to process return: ${V.statusText}`);const K={};n==null||n.medications.forEach((W,B)=>{const G=W.drug_id??`index-${B}`;K[G]={pack:0,loose:0}}),p(K),k()}catch(V){console.error("Failed to process return:",V),l(V.message||"An error occurred while processing the return."),alert(`Error processing return: ${V.message||"Unknown error"}`)}finally{d(!1)}};if(i)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(o)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(sn,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",o]})]});if(!n)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(sn,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const z=()=>{window.print()},q=SIe(n.status);return r.jsx("div",{className:"pharmacy-order-details-page",children:r.jsxs("div",{className:"order-details-container printable-section",children:[r.jsxs("div",{className:"order-details-header no-print",children:[r.jsx("h1",{children:"Pharmacy Order Details"}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(sn,{size:20})}),r.jsxs("button",{onClick:z,className:"print-button",children:[r.jsx(bf,{size:18})," Print Bill"]})]})]}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{children:"Mahajan Pharmacy"}),r.jsxs("div",{className:"clinic-details-print",children:[r.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),r.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),r.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Token:"})," 12"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),r.jsxs("div",{className:"order-info-section no-print",children:[r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Order ID:"})," ",n.id]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Patient:"})," ",n.patientName||"N/A"," (",n.patientTokenNumber||"N/A",")"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Prescribed By:"})," ",n.prescribedBy||"N/A"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`status-pill ${q.text} ${q.bg}`,children:n.status})]})]}),r.jsxs("div",{className:"medications-section",children:[r.jsx("h2",{children:"Medications Ordered"}),n.medications.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PACK QTY"}),r.jsx("th",{children:"PACK PRICE"}),r.jsx("th",{children:"LOOSE QTY"}),r.jsx("th",{children:"LOOSE PRICE"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),r.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),r.jsx("tbody",{children:n.medications.map((F,V)=>{var X,$;const H=F.drug_id??`index-${V}`,K=F.total_price??0,W=K*(F.discount_percentage??0)/100,B=K-W,G=((X=f[H])==null?void 0:X.pack)||0,ee=(($=f[H])==null?void 0:$.loose)||0;return r.jsxs("tr",{children:[r.jsx("td",{children:F.name}),r.jsx("td",{children:F.pack_quantity??0}),r.jsx("td",{children:F.pack_price!=null?Number(F.pack_price).toFixed(2):"N/A"}),r.jsx("td",{children:F.loose_quantity??0}),r.jsx("td",{children:F.loose_price!=null?Number(F.loose_price).toFixed(2):"N/A"}),r.jsx("td",{children:F.price!=null?Number(F.price).toFixed(2):"N/A"})," ",r.jsx("td",{children:F.price!=null?Number(F.price).toFixed(2):"N/A"})," ",r.jsxs("td",{children:[r.jsx("input",{type:"number",value:F.discount_percentage??0,onChange:ce=>P(H,parseFloat(ce.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),r.jsxs("span",{className:"print-only",children:[F.discount_percentage??0,"%"]})]}),r.jsxs("td",{children:[C.toFixed(1),"%"]}),r.jsx("td",{children:B.toFixed(2)}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:F.pack_quantity,value:G,onChange:ce=>{const Y=(parseInt(ce.target.value,10)||0)*(F.unitsPerPack||0)+ee;I(H,Y,F)},className:"return-quantity-input"})}),r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:F.loose_quantity+F.pack_quantity*(F.unitsPerPack||0)-G*(F.unitsPerPack||0),value:ee,onChange:ce=>{const xe=parseInt(ce.target.value,10)||0,Y=G*(F.unitsPerPack||0)+xe;I(H,Y,F)},className:"return-quantity-input"})})]})]},H)})})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",T.toFixed(2)]})}),r.jsxs("div",{className:"order-total-section no-print",children:[r.jsx("span",{className:"total-label",children:"Order Total:"}),r.jsxs("span",{className:"total-amount",children:["",T.toFixed(2)]})]}),r.jsxs("div",{className:"payment-section no-print",children:[r.jsxs("div",{className:"payment-mode-group",children:[r.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),r.jsxs("select",{id:"paymentMode",value:S,onChange:F=>_(F.target.value),className:"payment-mode-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),b&&r.jsxs("div",{className:"qr-code-container",children:[r.jsx(Fa,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]})]}),(n.status==="dispensed"||n.status==="billed")&&n.medications.length>0&&r.jsxs("div",{className:"return-action-section no-print",children:[E>0&&r.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",E.toFixed(2)]}),r.jsx("button",{onClick:R,disabled:Object.values(f).every(F=>F.pack===0&&F.loose===0)||c,className:"process-return-button",children:c?r.jsxs(r.Fragment,{children:[r.jsx(_E,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(_E,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},CIe=async()=>{const t=await le("/subscriptions");if(!t.ok)throw new Error("Failed to fetch subscription plans");return await t.json()},TIe=async t=>{const e=await le(`/subscriptions/${t}`);if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(n.message||"Failed to fetch subscription plan details")}return await e.json()},kIe=async t=>{const e=await le("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(n.message||"Failed to create subscription plan")}return await e.json()},AIe=async(t,e)=>{const n=await le(`/subscriptions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(a.message||"Failed to update subscription plan")}return await n.json()},EIe=async t=>{const e=await le(`/subscriptions/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(n.message||"Failed to deactivate subscription plan")}return await e.json()},PIe=async(t,e)=>{const n=await le("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:t,planId:e})});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(a.message||"Failed to initiate Razorpay subscription")}return await n.json()},DIe=()=>{const t=Ft(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),d=v.useCallback(async()=>{i(!0),o(null);try{const p=await CIe();n(p)}catch(p){o(p.message||"Failed to fetch subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await EIe(p),c({type:"success",message:"Plan deactivated successfully!"}),d()}catch(g){o(g.message||"Failed to deactivate plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}):r.jsx(Br,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:16})}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>t("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(Vn,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(te,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(Bi,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Wn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},OIe=()=>{const t=Ft(),[e,n]=v.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const d=g=>{const{name:x,value:b}=g.target;n(j=>({...j,[x]:b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await kIe(e),c({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}):r.jsx(Br,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:r.jsx(sn,{size:16})}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},MIe=()=>{const{id:t}=$a(),e=Ft(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await TIe(t);a(T),s({name:T.name,description:T.description||"",price:T.price,period:T.period,interval:T.interval,razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:E}=T.target;s(k=>({...k,[C]:E}))},S=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await AIe(t,i),x({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const E=C.message||"Failed to update plan.";p(E),x({type:"error",message:E})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Wo,{size:18,className:"mr-2"}):r.jsx(Br,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:S,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval||1,onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:r.jsx(sn,{size:16})}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},IIe=()=>{const{patientId:t}=$a(),e=Ft(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(""),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState("manual"),[b,j]=v.useState(!1),[S,_]=v.useState(null),T=v.useCallback(async()=>{d(!0),p(null);try{const k=await le(`/api/patients/${t}`);if(!k.ok){const z=await k.json();throw new Error(z.message||"Failed to fetch patient details")}const P=await k.json();a(P);const I=await le("/api/subscriptions");if(!I.ok){const z=await I.json();throw new Error(z.message||"Failed to fetch subscription plans")}const R=await I.json();s(R.filter(z=>z.status==="active"))}catch(k){console.error("Error fetching data:",k),p(`Failed to load data: ${k.message}`)}finally{d(!1)}},[t]);v.useEffect(()=>{t?T():(p("Patient ID is missing."),d(!1))},[t,T]);const C=(k,P)=>{const I=new Date(k),R=P.interval||1;switch(P.period){case"daily":I.setDate(k.getDate()+R);break;case"weekly":I.setDate(k.getDate()+R*7);break;case"monthly":I.setMonth(k.getMonth()+R);break;case"yearly":I.setFullYear(k.getFullYear()+R);break;default:console.warn(`Unknown subscription period: ${P.period}. Defaulting to 1 month.`),I.setMonth(k.getMonth()+1)}return I},E=async()=>{if(!t||!o){_("Please select a subscription plan.");return}const k=i.find(P=>P.id===o);if(!k){_("Selected plan details not found.");return}j(!0),_(null);try{const P=new Date,I=C(P,k);if(g==="manual"){const R={subscription_plan_id:o,subscription_status:"active",subscription_start_date:P.toISOString(),subscription_end_date:I.toISOString(),subscription_payment_method:"manual"},z=await le(`/api/patients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!z.ok){const q=await z.json();throw new Error(q.message||"Failed to start subscription manually")}e("/all-patients")}else if(g==="razorpay"){console.log("Initiating Razorpay subscription for plan:",k);const R=await PIe(t,o);if(R&&R.short_url)window.location.href=R.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(P){console.error("Error starting subscription:",P),_(`Failed to start subscription: ${P.message}`),j(!1)}};return c?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):f?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:f})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(sn,{size:16})})]}):n?r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(sn,{size:16})}),r.jsxs("h1",{children:[r.jsx(Jn,{size:28})," ","Start Subscription for ",n.name]}),S&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:S})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),i.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:i.map(k=>r.jsxs("div",{className:`subscription-plan-card ${o===k.id?"selected-plan":""}`,onClick:()=>l(k.id),children:[r.jsx("h3",{children:k.name}),r.jsxs("p",{className:"price",children:["",k.price]}),r.jsxs("p",{className:"duration",children:["Every ",k.interval," ",k.period,k.interval>1?"s":""]}),k.description&&r.jsx("p",{children:k.description})]},k.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:g==="manual",onChange:()=>x("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:g==="razorpay",onChange:()=>x("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:E,disabled:!o||b||i.length===0,className:"subscription-btn",children:[b&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),b?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(sn,{size:16})})]})},RIe=()=>{const t=Ft(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),d=v.useCallback(async()=>{i(!0),o(null);try{const p=await OM();n(p)}catch(p){o(p.message||"Failed to fetch clinic subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await tDe(p),c({type:"success",message:"Clinic plan deactivated successfully!"}),d()}catch(g){o(g.message||"Failed to deactivate clinic plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}):r.jsx(Br,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(sn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>t("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(Vn,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(te,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/clinic-subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(Bi,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Wn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},LIe=()=>{const t=Ft(),[e,n]=v.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const d=g=>{const{name:x,value:b,type:j}=g.target;n(S=>({...S,[x]:j==="number"?parseFloat(b):b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await ZPe(e),c({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/clinic-subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create clinic plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Wo,{size:18,className:"mr-2 text-green-500"}):r.jsx(Br,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},FIe=()=>{const{id:t}=$a(),e=Ft(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await JPe(t);a(T),s({name:T.name,description:T.description||"",price:Number(T.price),period:T.period,interval:Number(T.interval),razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch clinic plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:E,type:k}=T.target;s(P=>({...P,[C]:k==="number"?parseFloat(E):E}))},S=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await eDe(t,i),x({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const E=C.message||"Failed to update clinic plan.";p(E),x({type:"error",message:E})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Wo,{size:18,className:"mr-2"}):r.jsx(Br,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Lt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:S,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval!==void 0?i.interval:"",onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},$Ie=()=>{const t=Ft(),[e,n]=v.useState([]),[a,i]=v.useState(""),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(null),x=v.useCallback(async()=>{c(null);try{const S=(await OM()).filter(_=>_.status==="active");n(S),S.length>0&&!a&&i(S[0].id)}catch(j){console.error("Error fetching plans:",j),c(`Failed to load subscription plans: ${j.message}`)}},[]);v.useEffect(()=>{(async()=>{o(!0);try{const S=await rDe();if(S&&S.short_url){window.location.href=S.short_url,c("You have a pending subscription. Redirecting to payment...");return}await x()}catch(S){console.error("Error during initial page load:",S),c(`An unexpected error occurred: ${S.message}`)}finally{o(!1)}})()},[x]);const b=async()=>{if(!a){g("Please select a clinic subscription plan.");return}const j=e.find(S=>S.id===a);if(!j){g("Selected plan details not found.");return}f(!0),g(null);try{console.log("Initiating Razorpay clinic subscription for plan:",j);const S=await nDe(a);if(S&&S.short_url)window.location.href=S.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(S){console.error("Error starting clinic subscription:",S),g(`Failed to start clinic subscription: ${S.message}`),f(!1)}};return s?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):l?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:16})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:16})}),r.jsxs("h1",{children:[r.jsx(UQ,{size:28}),"Buy Pro Plan for Clinic"]}),p&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:p})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),e.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:e.map(j=>r.jsxs("div",{className:`subscription-plan-card ${a===j.id?"selected-plan":""}`,onClick:()=>i(j.id),children:[r.jsx("h3",{children:j.name}),r.jsxs("p",{className:"price",children:["",Number(j.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",j.interval," ",j.period,j.interval>1?"s":""]}),j.description&&r.jsx("p",{children:j.description})]},j.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:b,disabled:!a||d||e.length===0,className:"subscription-btn",children:[d&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),d?"Initiating Payment...":"Buy Pro Plan"]})})]})},BIe=()=>{const t=Ft(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,S]=v.useState({name:"",email:"",password:"",role:"user"}),[_,T]=v.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[C,E]=v.useState(""),[k,P]=v.useState(""),[I,R]=v.useState(!1),[z,q]=v.useState(null),[F,V]=v.useState([]),[H,K]=v.useState(""),[W,B]=v.useState(!1),[G,ee]=v.useState(null);v.useEffect(()=>{const oe=setTimeout(()=>{P(C)},500);return()=>{clearTimeout(oe)}},[C]),v.useEffect(()=>{X(k)},[k]);const X=async(oe="")=>{i(!0);try{const Se=oe?`/api/users?search=${encodeURIComponent(oe)}`:"/api/users",Ae=await(await le(Se)).json();n(Ae),c(null)}catch(Se){c("Failed to fetch users."),console.error(Se)}finally{i(!1),o(!1)}},$=async oe=>{oe.preventDefault();try{await le("/users",{method:"POST",body:JSON.stringify(j)}),f(!1),S({name:"",email:"",password:"",role:"user"}),X()}catch(Se){c("Failed to add user."),console.error(Se)}},ce=async oe=>{if(oe.preventDefault(),!x)return;const{password:Se,confirmPassword:Ve,...Ae}=_,ue={...Ae};if(Se){if(Se.length<6){c("Password must be at least 6 characters long.");return}if(Se!==Ve){c("Passwords do not match.");return}ue.password=Se}try{await le(`/users/${x.id}`,{method:"PUT",body:JSON.stringify(ue)}),g(!1),b(null),T({..._,password:"",confirmPassword:""}),X()}catch(Te){c("Failed to update user."),console.error(Te)}},xe=async oe=>{if(window.confirm("Are you sure you want to delete this user?"))try{await le(`/users/${oe}`,{method:"DELETE"}),X()}catch(Se){c("Failed to delete user."),console.error(Se)}},Y=oe=>{b(oe),T({name:oe.name,email:oe.email,role:oe.role,password:"",confirmPassword:""}),g(!0)},Re=async()=>{B(!0);try{const oe=await OM();V(oe),oe.length>0&&K(oe[0].id),ee(null)}catch(oe){ee("Failed to fetch subscription plans."),console.error(oe)}finally{B(!1)}},$e=oe=>{q(oe),R(!0),Re()},ze=async oe=>{if(oe.preventDefault(),!z||!H){c("Please select a clinic and a plan.");return}try{await le("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:z,planId:H})}),R(!1),q(null),K(""),X(),c(null)}catch(Se){c("Failed to manually activate clinic subscription."),console.error(Se)}},Le=async oe=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await XPe(oe),X(),c(null)}catch(Se){c("Failed to cancel subscription."),console.error(Se)}};return a&&s?r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("div",{className:"back-button",style:{width:80,height:32},children:r.jsx(te,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(te,{width:200,height:32})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx(te,{width:"100%",height:40,style:{maxWidth:"300px"}}),r.jsx(te,{width:150,height:40})]}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(oe=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(te,{width:150,height:32})})]},oe))})]})]}):l&&s?r.jsx("div",{className:"error-message",children:l}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:C,onChange:oe=>E(oe.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>f(!0),className:"add-user-button",children:"Add New User"})]}),d&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>f(!1),children:""}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:$,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:j.name,onChange:oe=>S({...j,name:oe.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:j.email,onChange:oe=>S({...j,email:oe.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:j.password,onChange:oe=>S({...j,password:oe.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:j.role,onChange:oe=>S({...j,role:oe.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),p&&x&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>g(!1),children:""}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:ce,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:_.name,onChange:oe=>T({..._,name:oe.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:_.email,onChange:oe=>T({..._,email:oe.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:_.role,onChange:oe=>T({..._,role:oe.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"New Password (optional):"}),r.jsx("input",{type:"password",value:_.password,onChange:oe=>T({..._,password:oe.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm New Password:"}),r.jsx("input",{type:"password",value:_.confirmPassword,onChange:oe=>T({..._,confirmPassword:oe.target.value})})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),I&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>R(!1),children:""}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),W&&r.jsx("div",{children:"Loading plans..."}),G&&r.jsx("div",{className:"error-message",children:G}),!W&&!G&&F.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!W&&!G&&F.length>0&&r.jsxs("form",{onSubmit:ze,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:H,onChange:oe=>K(oe.target.value),required:!0,children:F.map(oe=>r.jsxs("option",{value:oe.id,children:[oe.name," - $",oe.price,"/",oe.interval," ",oe.period]},oe.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(oe=>{var ue,Te;const Se=oe.clinic_id||"N/A",Ve=((Te=(ue=oe.Clinic)==null?void 0:ue.ClinicSubscriptions)==null?void 0:Te.some(se=>se.status==="active"))??!1,Ae=Ve?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:oe.name}),r.jsx("td",{children:oe.email}),r.jsx("td",{children:oe.role}),r.jsx("td",{children:Se}),r.jsx("td",{children:Se!=="N/A"?r.jsx("span",{className:Ve?"pro-badge":"standard-badge",children:Ae}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>Y(oe),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>xe(oe.id),className:"delete-button",children:"Delete"}),oe.clinic_id&&!Ve&&r.jsx("button",{onClick:()=>$e(oe.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),oe.clinic_id&&Ve&&r.jsx("button",{onClick:()=>Le(oe.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},oe.id)})})]})]})},zIe="_modalOverlay_cydw9_3",qIe="_modalContent_cydw9_29",UIe="_modalHeader_cydw9_53",VIe="_modalTitle_cydw9_71",HIe="_modalCloseButton_cydw9_83",GIe="_modalBody_cydw9_111",WIe="_formGroup_cydw9_119",KIe="_inputField_cydw9_143",YIe="_errorText_cydw9_177",QIe="_successText_cydw9_195",XIe="_modalFooter_cydw9_213",JIe="_button_cydw9_229",ZIe="_buttonPrimary_cydw9_249",eRe="_buttonSecondary_cydw9_267",Pi={modalOverlay:zIe,modalContent:qIe,modalHeader:UIe,modalTitle:VIe,modalCloseButton:HIe,modalBody:GIe,formGroup:WIe,inputField:KIe,errorText:YIe,successText:QIe,modalFooter:XIe,button:JIe,buttonPrimary:ZIe,buttonSecondary:eRe},tRe=({isOpen:t,onClose:e})=>{const[n,a]=v.useState(""),[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState(null);Yc(void 0,t?200:99999),v.useEffect(()=>{t&&g()},[t]);const g=async()=>{s(!0),d(null);try{const b=await le("/api/global-settings/app_gemini_api_key");if(b.ok){const j=await b.json();a(j.value||"")}else b.status}catch(b){console.warn("Could not fetch existing key:",b)}finally{s(!1)}},x=async()=>{l(!0),d(null),p(null);try{if(!(await le("/api/global-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"app_gemini_api_key",value:n})})).ok)throw new Error("Failed to save API Key");p("API Key updated successfully!"),setTimeout(()=>{e(),p(null)},1500)}catch(b){d(b.message||"Error saving key")}finally{l(!1)}};return t?r.jsx("div",{className:Pi.modalOverlay,children:r.jsxs("div",{className:Pi.modalContent,children:[r.jsxs("div",{className:Pi.modalHeader,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Hz,{size:24}),r.jsx("h3",{className:Pi.modalTitle,children:"App Gemini API Key"})]}),r.jsx("button",{onClick:e,className:Pi.modalCloseButton,children:r.jsx(Lt,{size:20})})]}),r.jsxs("div",{className:Pi.modalBody,children:[c&&r.jsx("div",{className:Pi.errorText,children:c}),f&&r.jsx("div",{className:Pi.successText,children:f}),r.jsxs("div",{className:Pi.formGroup,children:[r.jsx("label",{htmlFor:"gemini-key",children:"Gemini API Key"}),i?r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}}):r.jsx("input",{type:"text",id:"gemini-key",value:n,onChange:b=>a(b.target.value),className:Pi.inputField,placeholder:"Enter Gemini API Key (AIza...)",disabled:o})]}),r.jsx("p",{style:{fontSize:"0.9em",color:"var(--secondary-text-color, #666)"},children:"This key will be used as a fallback for all clinics if their specific Gemini API key is not configured."})]}),r.jsxs("div",{className:Pi.modalFooter,children:[r.jsx("button",{onClick:e,className:`${Pi.button} ${Pi.buttonSecondary}`,disabled:o,children:"Cancel"}),r.jsx("button",{onClick:x,className:`${Pi.button} ${Pi.buttonPrimary}`,disabled:o,children:o?"Saving...":"Save Key"})]})]})}):null},nRe=()=>{const[t,e]=v.useState(!1);return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(dd,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(Cr,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(cd,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(Cr,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(Os,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]}),r.jsxs("div",{className:"admin-panel-card",onClick:()=>e(!0),style:{cursor:"pointer"},children:[r.jsx(Hz,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage App Gemini API Key"}),r.jsx("p",{children:"Update the fallback Gemini API key used by the application."})]})]}),r.jsx(tRe,{isOpen:t,onClose:()=>e(!1)})]})},KA="tutorialCurrentStep",rRe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,d;n(!0);try{const f=await le("/api/drugs/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default medications imported successfully!","pharmacyImport")}else t(!1,"Failed to import medications.")}catch{t(!1,"Error importing medications.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(oo,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(tg,{size:18})," Import Drugs"]})})]})},aRe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,d;n(!0);try{const f=await le("/api/lab-tests/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default lab tests imported successfully!","labImport")}else t(!1,"Failed to import lab tests.")}catch{t(!1,"Error importing lab tests.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(oo,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ls,{size:18})," Import Tests"]})})]})},iRe=({onOpenCommandBar:t})=>r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),r.jsx("button",{onClick:t,className:"tutorial-button primary large-button",children:r.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",r.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),YA=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:r.jsx(yw,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:r.jsx(tg,{size:48,className:"step-icon pharmacy"}),component:rRe,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:r.jsx(ls,{size:48,className:"step-icon lab"}),component:aRe,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:r.jsx(FQ,{size:48,className:"step-icon ai"}),component:iRe,actionText:null,isLast:!0}],sRe=({onClose:t,onMarkAsSeen:e})=>{const{openCommandBar:n}=Rc(),[a,i]=v.useState(()=>{const S=localStorage.getItem(KA);return S?parseInt(S,10):0}),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(null);v.useEffect(()=>{localStorage.setItem(KA,a.toString()),c(null)},[a]);const p=()=>{o(!0),setTimeout(()=>{i(S=>Math.min(S+1,YA.length-1)),o(!1)},300)},g=(S,_,T)=>{f(S),c(_),S&&(T==="pharmacyImport"||T==="labImport")&&setTimeout(p,1e3)},x=()=>{e(),t(),localStorage.removeItem(KA)},b=()=>{x(),setTimeout(()=>{n()},100)},j=YA[a];return r.jsx("div",{className:"tutorial-overlay",children:r.jsxs("div",{className:`tutorial-card ${s?"fade-out":"fade-in"}`,children:[r.jsxs("div",{className:"tutorial-visual",children:[r.jsx("div",{className:"icon-circle",children:j.icon}),r.jsx("div",{className:"step-indicators",children:YA.map((S,_)=>r.jsx("div",{className:`step-dot ${_===a?"active":""} ${_<a?"completed":""}`},_))})]}),r.jsxs("div",{className:"tutorial-content",children:[r.jsx("button",{className:"close-button",onClick:x,title:"Close Tutorial",children:r.jsx(Lt,{size:20})}),r.jsxs("div",{className:"text-content",children:[r.jsx("h2",{children:j.title}),r.jsx("p",{className:"description",children:j.description})]}),r.jsxs("div",{className:"interactive-area",children:[j.component?r.jsx(j.component,{onActionComplete:g,onOpenCommandBar:b}):null,l&&r.jsx("div",{className:`status-message ${d?"success":"error"}`,children:l})]}),r.jsxs("div",{className:"action-footer",children:[j.showSkip&&r.jsx("button",{onClick:p,className:"tutorial-button text-only",children:"Skip for now"}),j.actionText&&r.jsxs("button",{onClick:p,className:"tutorial-button primary",children:[j.actionText," ",r.jsx(pd,{size:16})]})]})]})]})})},oRe=({isOpen:t,onClose:e,onSuccess:n,medication:a,initialPatient:i,initialItems:s})=>{const[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState(null),[g,x]=v.useState(!1);Yc(void 0,t?200:99999),v.useEffect(()=>{if(t&&a){j([{id:Date.now(),medication_name:a.medicationName,drug_id:null,quantity:a.quantity,tablets_per_day:a.tabletsPerDay||1,number_of_days:a.numberOfDays||30,directions:a.directions||"",notes:a.notes||""}]),_(a.frequencyDays);try{const Le=new Date(a.nextDeliveryDate);isNaN(Le.getTime())||C(Le.toISOString().split("T")[0])}catch(Le){console.error("Error parsing date",Le)}p({id:a.patientId,name:a.patientName,phone:a.patientPhone,patient_token_number:a.patientToken})}else t&&(i||s)?(s&&s.length>0&&j(s),i&&p(i)):t&&!a&&!s&&(j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30),C(""),p(null),l(""))},[t,a,i,s]);const[b,j]=v.useState([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),[S,_]=v.useState(30),[T,C]=v.useState(""),[E,k]=v.useState(null),[P,I]=v.useState(""),[R,z]=v.useState([]),[q,F]=v.useState(!1),[V,H]=v.useState(!1),[K,W]=v.useState(null),B=v.useRef(null),G=v.useRef(null);v.useEffect(()=>{if(t){const Le=new Date;Le.setDate(Le.getDate()+30),C(Le.toISOString().split("T")[0])}},[t]);const ee=v.useCallback(async Le=>{if(!Le.trim()){d([]);return}x(!0);try{const oe=await le(`/api/patients?search=${encodeURIComponent(Le)}&limit=10`);if(oe.ok){const Se=await oe.json();d(Se.patients||[])}}catch(oe){console.error("Error searching patients:",oe)}finally{x(!1)}},[]);v.useEffect(()=>{B.current&&clearTimeout(B.current),o&&!f?B.current=setTimeout(()=>ee(o),300):d([])},[o,f,ee]);const X=v.useCallback(async Le=>{if(!Le.trim()){z([]);return}F(!0);try{const oe=await le(`/api/drugs?search=${encodeURIComponent(Le)}&limit=10`);if(oe.ok){const Se=await oe.json();z(Se.drugs||[])}}catch(oe){console.error("Error searching drugs:",oe)}finally{F(!1)}},[]);v.useEffect(()=>{G.current&&clearTimeout(G.current),P&&E!==null?G.current=setTimeout(()=>X(P),300):z([])},[P,E,X]);const $=Le=>{if(!Le)return 1;const oe=Le.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return oe?parseInt(oe[1],10):1},ce=Le=>{p(Le),l(`${Le.name} (${Le.patient_token_number})`),d([])},xe=(Le,oe)=>{const Se=[...b];Se[oe]={...Se[oe],medication_name:Le.name,drug_id:Le.id,pack_size:$(Le.pack),packs:0,loose:0,quantity:0},j(Se),k(null),I(""),z([])},Y=(Le,oe,Se)=>{const Ve=[...b],Ae={...Ve[Le]},ue=Ae.pack_size||1;if(oe==="packs"||oe==="loose"){const Te=parseInt(Se)||0;oe==="packs"&&(Ae.packs=Te),oe==="loose"&&(Ae.loose=Te);const se=Ae.packs||0,be=Ae.loose||0;Ae.quantity=se*ue+be}else if(oe==="tablets_per_day"||oe==="number_of_days"){oe==="tablets_per_day"&&(Ae.tablets_per_day=Se),oe==="number_of_days"&&(Ae.number_of_days=Se);const Te=parseFloat(Ae.tablets_per_day.toString())||0,se=parseInt(Ae.number_of_days.toString())||0,be=Math.ceil(Te*se);Ae.quantity=be,Ae.packs=Math.floor(be/ue),Ae.loose=be%ue}else Ae[oe]=Se;Ve[Le]=Ae,j(Ve)},Re=()=>{j([...b,{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:S,directions:"",notes:"",packs:0,loose:0,pack_size:1}])},$e=Le=>{b.length>1&&j(b.filter((oe,Se)=>Se!==Le))},ze=async Le=>{if(Le.preventDefault(),W(null),!f){W("Please select a patient.");return}if(b.some(Se=>!Se.medication_name||Se.quantity<=0)){W("Please ensure all items have a medication name and valid quantity.");return}H(!0);try{const Se={patient_id:f.id,items:b.map(Ae=>({medication_name:Ae.medication_name,drug_id:Ae.drug_id,quantity:Ae.quantity,tablets_per_day:Ae.tablets_per_day,number_of_days:Ae.number_of_days,directions:Ae.directions,notes:Ae.notes,frequency_days:S,next_delivery_date:T}))},Ve=await le("/api/recurring-medications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!Ve.ok){const Ae=await Ve.json();throw new Error(Ae.message+(Ae.error?": "+Ae.error:"")||"Failed to create recurring medication.")}n(),e(),p(null),l(""),j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30)}catch(Se){W(Se.message)}finally{H(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"add-recurring-modal",style:{maxWidth:"800px",width:"95%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Add Recurring Medication Order"}),r.jsx("button",{className:"close-btn",onClick:e,children:r.jsx(Lt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[K&&r.jsx("div",{className:"error-message",children:K}),r.jsxs("form",{onSubmit:ze,className:"recurring-form",children:[r.jsxs("div",{className:"order-settings-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsxs("label",{children:[r.jsx(Jn,{size:16})," Patient"]}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patient...",value:o,onChange:Le=>{l(Le.target.value),p(null)},className:f?"selected":"unselected"}),g&&r.jsx("span",{className:"spinner",children:"..."}),o&&!f&&c.length>0&&r.jsx("ul",{className:"suggestions-list",children:c.map(Le=>r.jsxs("li",{onClick:()=>ce(Le),children:[r.jsx("div",{className:"suggestion-name",children:Le.name}),r.jsxs("div",{className:"suggestion-details",children:[Le.phone,"  ",Le.patient_token_number]})]},Le.id))})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(Eb,{size:16})," Frequency"]}),r.jsxs("select",{value:S,onChange:Le=>{const oe=parseInt(Le.target.value);_(oe);const Se=new Date;Se.setDate(Se.getDate()+oe),C(Se.toISOString().split("T")[0]);const Ve=b.map(Ae=>({...Ae,number_of_days:oe}));j(Ve)},children:[r.jsx("option",{value:15,children:"Every 15 Days"}),r.jsx("option",{value:30,children:"Every 30 Days"}),r.jsx("option",{value:60,children:"Every 60 Days"}),r.jsx("option",{value:90,children:"Every 90 Days"})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(fa,{size:16})," Next Delivery"]}),r.jsx("input",{type:"date",value:T,onChange:Le=>C(Le.target.value)})]})]}),r.jsx("hr",{className:"divider"}),r.jsxs("div",{className:"items-header",children:[r.jsx("h4",{children:"Medications"}),r.jsxs("button",{type:"button",className:"add-item-btn",onClick:Re,children:[r.jsx(Vn,{size:14})," Add Drug"]})]}),r.jsx("div",{className:"items-list",children:b.map((Le,oe)=>r.jsxs("div",{className:"medication-item-row",children:[r.jsxs("div",{className:"row-top",children:[r.jsxs("div",{className:"form-group med-search-group",children:[r.jsx("label",{children:"Drug Name"}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drug...",value:E===oe?P:Le.medication_name,onFocus:()=>{k(oe),I(Le.medication_name)},onChange:Se=>{I(Se.target.value),Y(oe,"medication_name",Se.target.value)}}),E===oe&&q&&r.jsx("span",{className:"spinner",children:"..."}),E===oe&&P&&R.length>0&&r.jsx("ul",{className:"suggestions-list",children:R.map(Se=>r.jsxs("li",{onClick:()=>xe(Se,oe),children:[r.jsx("div",{className:"suggestion-name",children:Se.name}),r.jsxs("div",{className:"suggestion-details",children:["Stock: ",Se.stock]})]},Se.id))})]})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Tabs/Day"}),r.jsx("input",{type:"number",min:"0.5",step:"0.5",value:Le.tablets_per_day,onChange:Se=>Y(oe,"tablets_per_day",Se.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Days"}),r.jsx("input",{type:"number",min:"1",value:Le.number_of_days,onChange:Se=>Y(oe,"number_of_days",Se.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Packs"}),r.jsx("input",{type:"number",min:"0",value:Le.packs||"",onChange:Se=>Y(oe,"packs",Se.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Loose"}),r.jsx("input",{type:"number",min:"0",value:Le.loose||"",onChange:Se=>Y(oe,"loose",Se.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Total"}),r.jsx("input",{type:"number",value:Le.quantity,disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]}),r.jsx("button",{type:"button",className:"remove-btn",onClick:()=>$e(oe),disabled:b.length===1,children:r.jsx(Wn,{size:16})})]}),r.jsxs("div",{className:"row-bottom",children:[r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Directions (e.g. 1-0-1 after food)",value:Le.directions,onChange:Se=>Y(oe,"directions",Se.target.value)})}),r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Notes",value:Le.notes,onChange:Se=>Y(oe,"notes",Se.target.value)})})]})]},Le.id))}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-submit",disabled:V,children:V?"Creating...":"Create Recurring Order"})]})]})]})]})}):null},lRe=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(""),[c,d]=v.useState(1),[f,p]=v.useState(1),[g,x]=v.useState(0),[b,j]=v.useState(!1),[S,_]=v.useState(void 0),T=10,C=v.useRef(null);Yc();const E=v.useCallback(async(F,V)=>{a(!0),s(null);try{let H=`/api/recurring-medications?page=${F}&limit=${T}`;V&&(H+=`&search=${encodeURIComponent(V)}`);const K=await le(H);if(!K.ok)throw new Error("Failed to fetch recurring medications.");const W=await K.json();e(W.medications),p(W.totalPages),x(W.total),d(W.page)}catch(H){console.error(H),s(H.message||"An error occurred while fetching data.")}finally{a(!1)}},[]);v.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{E(c,o)},500),()=>{C.current&&clearTimeout(C.current)}),[o,c,E]);const k=F=>{l(F.target.value),d(1)},P=F=>{F>=1&&F<=f&&d(F)},I=F=>{_(F),j(!0)},R=()=>{E(c,o),j(!1),_(void 0)},z=F=>F===30?"Every 30 Days (Monthly)":F===15?"Every 15 Days":`Every ${F} Days`,q=F=>{switch(F){case"active":return"status-pill status-pill-active";case"paused":return"status-pill status-pill-paused";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill"}};return r.jsxs("div",{className:"refill-reminders-container",children:[r.jsxs("div",{className:"refill-header",children:[r.jsx("h3",{className:"refill-title",children:"Recurring Medications"}),r.jsxs("div",{className:"refill-actions",children:[r.jsxs("button",{className:"refill-action-button btn-add",onClick:()=>{_(void 0),j(!0)},children:[r.jsx(Ps,{size:16})," Add New"]}),r.jsxs("div",{className:"search-box",children:[r.jsx("input",{type:"text",placeholder:"Search patient, phone, medication...",value:o,onChange:k}),r.jsx(En,{size:18,className:"search-icon"})]})]})]}),i&&r.jsx("div",{className:"error-message-box",children:i}),r.jsx("div",{className:"refill-table-container",children:n?r.jsx("div",{className:"loading-pulse",children:"Loading..."}):t.length===0?r.jsx("div",{className:"empty-state",children:"No recurring medications found."}):r.jsx("div",{className:"refill-grouped-list",children:Object.values(t.reduce((F,V)=>{const H=V.patientId;return F[H]||(F[H]={patientId:V.patientId,patientName:V.patientName,patientPhone:V.patientPhone,patientToken:V.patientToken,medications:[]}),F[H].medications.push(V),F},{})).map(F=>r.jsxs("div",{className:"patient-medication-group-card",children:[r.jsxs("div",{className:"group-header",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("h4",{className:"patient-name",children:F.patientName}),r.jsxs("span",{className:"patient-meta",children:["Token: ",F.patientToken,"  Phone: ",F.patientPhone]})]}),r.jsx("div",{className:"group-actions"})]}),r.jsxs("table",{className:"refill-table group-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Medication"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Frequency"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:F.medications.map(V=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"med-name",children:V.medicationName}),(V.tabletsPerDay||V.numberOfDays||V.directions)&&r.jsxs("div",{className:"med-usage-details",style:{fontSize:"0.8em",color:"#666"},children:[V.tabletsPerDay&&r.jsxs("span",{children:[V.tabletsPerDay," tabs/day  "]}),V.numberOfDays&&r.jsxs("span",{children:[V.numberOfDays," days "]})]}),V.notes&&r.jsxs("div",{className:"med-notes",children:["Note: ",V.notes]})]}),r.jsx("td",{children:V.quantity}),r.jsx("td",{children:r.jsx("span",{className:"frequency-badge",children:z(V.frequencyDays)})}),r.jsx("td",{children:r.jsx("div",{className:"date-display",children:new Date(V.nextDeliveryDate).toLocaleDateString()})}),r.jsx("td",{children:r.jsx("span",{className:q(V.status),children:V.status})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",title:"Edit",onClick:()=>I(V),children:r.jsx(Bi,{size:16})}),r.jsx("button",{className:"action-btn delete",title:"Delete/Cancel",children:r.jsx(Wn,{size:16})})]})})]},V.id))})]})]},F.patientId))})}),!n&&f>1&&r.jsxs("div",{className:"pagination-container",children:[r.jsxs("span",{className:"pagination-info",children:["Page ",c," of ",f," (Total ",g,")"]}),r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("button",{onClick:()=>P(c-1),disabled:c===1,className:"page-btn",children:[r.jsx(Ab,{size:16})," Prev"]}),r.jsxs("button",{onClick:()=>P(c+1),disabled:c===f,className:"page-btn",children:["Next ",r.jsx(pd,{size:16})]})]})]}),r.jsx(oRe,{isOpen:b,onClose:()=>{j(!1),_(void 0)},onSuccess:R,medication:S})]})},cRe=()=>{const t=Ft(),e=zr();return v.useEffect(()=>{const n=new URLSearchParams(e.search),a=n.get("token"),i=n.get("caseDetails");a?(async()=>{try{const o=await le(`/api/patients?search=${a}&limit=1`);if(!o.ok)throw new Error("Failed to fetch patient by token");const c=(await o.json()).patients[0];if(!c)throw new Error("Patient with the given token not found");const d=await le(`/api/queue/patient/${c.id}/latest`);if(d.ok){const g=await d.json();if(g!=null&&g._id){t(`/dashboard/edit-complaint/${g._id}`,{state:{initialComplaint:i}});return}}const f=await le("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,complaint:i})});if(!f.ok)throw new Error("Failed to create queue entry");const p=await f.json();if(p!=null&&p.id)t(`/dashboard/edit-complaint/${p.id}`,{state:{initialComplaint:i}});else throw new Error("Failed to get ID from new queue entry.")}catch(o){console.error("Error handling complaint URL:",o),t("/dashboard/search-patient")}})():t("/dashboard/search-patient")},[e,t]),r.jsx("div",{children:"Loading..."})},LB=()=>{const t=Ft(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(null),[l,c]=v.useState(!1),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_,T]=v.useState(!1),[C,E]=v.useState(null),[k,P]=v.useState([]),[I,R]=v.useState(null),[z,q]=v.useState(""),[F,V]=v.useState(""),[H,K]=v.useState(""),[W,B]=v.useState(""),[G,ee]=v.useState(""),[X,$]=v.useState(""),[ce,xe]=v.useState(""),[Y,Re]=v.useState(""),[$e,ze]=v.useState(""),[Le,oe]=v.useState(""),[Se,Ve]=v.useState(""),[Ae,ue]=v.useState("cash"),Te=v.useCallback(async()=>{i(!0),o(null);try{const he=await le("/api/distributors");if(!he.ok)throw new Error(`Failed to fetch distributors: ${he.statusText}`);const De=await he.json();n(De)}catch(he){console.error("Failed to fetch distributors:",he),o(he.message||"Failed to load distributors.")}finally{i(!1)}},[]);v.useEffect(()=>{Te()},[Te]);const se=async he=>{he.preventDefault(),o(null);try{const De=await le("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:z,contact_person:F,phone:H,email:W,address:G,gst_number:X,drug_license_number:ce})});if(!De.ok){const nt=await De.json();throw new Error(nt.message||"Failed to add distributor.")}de(),Te()}catch(De){console.error("Error adding distributor:",De),o(De.message||"Failed to add distributor.")}},be=async he=>{if(he.preventDefault(),o(null),!!C)try{const De=await le(`/api/distributors/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:z,contact_person:F,phone:H,email:W,address:G,gst_number:X,drug_license_number:ce})});if(!De.ok){const nt=await De.json();throw new Error(nt.message||"Failed to update distributor.")}ne(),Te()}catch(De){console.error("Error updating distributor:",De),o(De.message||"Failed to update distributor.")}},_e=async()=>{if(o(null),!!C)try{const he=await le(`/api/distributors/${C.id}`,{method:"DELETE"});if(!he.ok){const De=await he.json();throw new Error(De.message||"Failed to delete distributor.")}je(),Te()}catch(he){console.error("Error deleting distributor:",he),o(he.message||"Failed to delete distributor.")}},Ne=v.useCallback(async he=>{o(null);try{const De=await le(`/api/distributors/${he}/payments`);if(!De.ok)throw new Error(`Failed to fetch payments: ${De.statusText}`);const Fe=(await De.json()).map(wt=>({...wt,order_value:parseFloat(wt.order_value),amount_paid:parseFloat(wt.amount_paid),balance_remaining:parseFloat(wt.balance_remaining)}));P(Fe);const Ge=await le(`/api/distributors/${he}/balance`);if(!Ge.ok)throw new Error(`Failed to fetch balance: ${Ge.statusText}`);const it=await Ge.json();R({totalOrderValue:parseFloat(it.totalOrderValue),totalAmountPaid:parseFloat(it.totalAmountPaid),remainingBalance:parseFloat(it.remainingBalance)})}catch(De){console.error("Error fetching payments/balance:",De),o(De.message||"Failed to load payments or balance.")}},[]),Z=async he=>{if(he.preventDefault(),o(null),!!C)try{const De=await le(`/api/distributors/${C.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:Y,order_value:parseFloat($e||"0"),amount_paid:parseFloat(Le||"0"),notes:Se,payment_mode:Ae})});if(!De.ok){const nt=await De.json();throw new Error(nt.message||"Failed to add payment.")}T(!1),await Ne(C.id),S(!0),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(De){console.error("Error adding payment:",De),o(De.message||"Failed to add payment.")}},ge=()=>{q(""),V(""),K(""),B(""),ee(""),$(""),xe(""),o(null),f(!0)},de=()=>{f(!1)},ae=he=>{E(he),q(he.name),V(he.contact_person||""),K(he.phone||""),B(he.email||""),ee(he.address||""),$(he.gst_number||""),xe(he.drug_license_number||""),o(null),g(!0)},ne=()=>{g(!1),E(null)},ie=he=>{E(he),o(null),b(!0)},je=()=>{b(!1),E(null)},Ee=he=>{E(he),Ne(he.id),o(null),S(!0)},Q=()=>{S(!1),E(null),P([]),R(null)},ye=he=>{E(he),Re(new Date().toISOString().split("T")[0]),ze("0"),oe("0"),Ve(""),ue("cash"),o(null),T(!0)},me=()=>{T(!1),E(null)};return a?r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",style:{marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(te,{width:80,height:36}),r.jsx(te,{width:200,height:32})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx(te,{width:150,height:36}),r.jsx(te,{width:150,height:36}),r.jsx(te,{width:180,height:36})]})]}),r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact Person"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(he=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:30})})]},he))})]})})]}):s?r.jsxs("div",{className:"error-indicator",children:["Error: ",s]}):r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>t(-1),className:"dmp-button dmp-button-secondary",title:"Go Back",children:[r.jsx(sn,{size:20})," Back"]}),r.jsx("h2",{children:"Distributor Management"})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("div",{className:"view-mode-toggle",style:{display:"flex",gap:"8px"},children:[r.jsxs("button",{onClick:()=>c(!1),className:`dmp-button ${l?"dmp-button-secondary":"dmp-button-primary"}`,title:"List View",children:[r.jsx(Pb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>c(!0),className:`dmp-button ${l?"dmp-button-primary":"dmp-button-secondary"}`,title:"Excel Mode (Edit)",children:[r.jsx(vf,{size:18})," Excel"]})]}),r.jsxs("button",{onClick:ge,className:"dmp-button dmp-button-primary",children:[r.jsx(Ps,{size:18}),"Add Distributor"]})]})]}),(()=>{const he=e.reduce((nt,Fe)=>nt+parseFloat(Fe.remainingBalance||"0"),0),De=he>=0;return r.jsxs("div",{className:"stats-container",children:[r.jsxs("div",{className:`stat-card ${De?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Total Balance"}),r.jsxs("span",{className:"value",children:["",he.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Distributors"}),r.jsx("span",{className:"value",children:e.length})]})]})})(),r.jsx("div",{className:"table-wrapper",children:l?r.jsx($b,{columns:[{key:"name",label:"Name",editable:!0,type:"text"},{key:"contact_person",label:"Contact Person",editable:!0,type:"text"},{key:"phone",label:"Phone",editable:!0,type:"text"},{key:"email",label:"Email",editable:!0,type:"text"},{key:"address",label:"Address",editable:!0,type:"text"},{key:"gst_number",label:"GST Number",editable:!0,type:"text"},{key:"drug_license_number",label:"Drug License",editable:!0,type:"text"}],data:e,editable:!0,showRowNumbers:!0,title:"Distributors",onSave:async he=>{const De=he.map(async nt=>{const Fe=e.find(Ge=>Ge.id===nt.id);if(Fe&&JSON.stringify(Fe)!==JSON.stringify(nt))return le(`/api/distributors/${nt.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)})});try{await Promise.all(De),Te()}catch(nt){alert("Error saving changes"),console.error(nt)}}}):r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name / Contact"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Tax / License"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"2rem",color:"var(--dmp-text-secondary)"},children:"No distributors found."})}):e.map(he=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"primary-text",children:he.name}),r.jsx("div",{className:"secondary-text",children:he.contact_person})]}),r.jsxs("td",{children:[r.jsx("div",{className:"secondary-text",children:he.phone||"-"}),r.jsx("div",{className:"secondary-text",children:he.email||"-"}),r.jsx("div",{className:"secondary-text",children:he.address||"-"})]}),r.jsxs("td",{children:[r.jsxs("div",{className:"secondary-text",children:["GST: ",he.gst_number||"-"]}),r.jsxs("div",{className:"secondary-text",children:["DL: ",he.drug_license_number||"-"]})]}),r.jsx("td",{children:r.jsxs("span",{className:`status-badge ${parseFloat(he.remainingBalance||"0")>0?"balance-ok":"balance-owed"}`,children:["",he.remainingBalance||"0.00"]})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>Ee(he),className:"dmp-button-icon",title:"View Payments & Balance",children:r.jsx(Lm,{size:18})}),r.jsx("button",{onClick:()=>ye(he),className:"dmp-button-icon",title:"Add Payment",children:r.jsx(xw,{size:18})}),r.jsx("button",{onClick:()=>ae(he),className:"dmp-button-icon edit",title:"Edit Distributor",children:r.jsx(Bi,{size:18})}),r.jsx("button",{onClick:()=>ie(he),className:"dmp-button-icon delete",title:"Delete Distributor",children:r.jsx(Wn,{size:18})})]})})]},he.id))})]})}),d&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:de,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Add New Distributor"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem",padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:s}),r.jsxs("form",{onSubmit:se,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"name",children:"Name:"}),r.jsx("input",{type:"text",id:"name",className:"dmp-input",style:{padding:"0.6rem"},value:z,onChange:he=>q(he.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"contact_person",className:"dmp-input",style:{padding:"0.6rem"},value:F,onChange:he=>V(he.target.value)})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"phone",className:"dmp-input",style:{padding:"0.6rem"},value:H,onChange:he=>K(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"email",children:"Email:"}),r.jsx("input",{type:"email",id:"email",className:"dmp-input",style:{padding:"0.6rem"},value:W,onChange:he=>B(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"address",children:"Address:"}),r.jsx("textarea",{id:"address",className:"dmp-textarea",style:{padding:"0.6rem",minHeight:"60px"},value:G,onChange:he=>ee(he.target.value)})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"gst_number",className:"dmp-input",style:{padding:"0.6rem"},value:X,onChange:he=>$(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"drug_license_number",children:"Drug License:"}),r.jsx("input",{type:"text",id:"drug_license_number",className:"dmp-input",style:{padding:"0.6rem"},value:ce,onChange:he=>xe(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("button",{type:"button",onClick:de,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Add Distributor"})]})]})]})}),p&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:ne,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Edit Distributor"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem",padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:s}),r.jsxs("form",{onSubmit:be,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-name",children:"Name:"}),r.jsx("input",{type:"text",id:"edit-name",className:"dmp-input",style:{padding:"0.6rem"},value:z,onChange:he=>q(he.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"edit-contact_person",className:"dmp-input",style:{padding:"0.6rem"},value:F,onChange:he=>V(he.target.value)})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"edit-phone",className:"dmp-input",style:{padding:"0.6rem"},value:H,onChange:he=>K(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-email",children:"Email:"}),r.jsx("input",{type:"email",id:"edit-email",className:"dmp-input",style:{padding:"0.6rem"},value:W,onChange:he=>B(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-address",children:"Address:"}),r.jsx("textarea",{id:"edit-address",className:"dmp-textarea",style:{padding:"0.6rem",minHeight:"60px"},value:G,onChange:he=>ee(he.target.value)})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"edit-gst_number",className:"dmp-input",style:{padding:"0.6rem"},value:X,onChange:he=>$(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-drug_license_number",children:"Drug License:"}),r.jsx("input",{type:"text",id:"edit-drug_license_number",className:"dmp-input",style:{padding:"0.6rem"},value:ce,onChange:he=>xe(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("button",{type:"button",onClick:ne,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Save Changes"})]})]})]})}),x&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:je,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Confirm Delete"}),r.jsxs("p",{children:['Are you sure you want to delete distributor "',C.name,'"?']}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:je,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:_e,className:"dmp-button dmp-button-primary",style:{backgroundColor:"var(--dmp-danger-color)"},children:"Delete"})]})]})}),j&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal printable-section",style:{maxWidth:"900px"},children:[r.jsx("button",{onClick:Q,className:"dmp-modal-close",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.5rem",marginBottom:"1rem"},children:[r.jsxs("h3",{className:"dmp-modal-title",style:{marginBottom:0},children:["Ledger: ",C.name]}),r.jsxs("button",{onClick:()=>window.print(),className:"dmp-button dmp-button-primary",style:{padding:"0.4rem 0.8rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"8px"},title:"Print Ledger",children:[r.jsx(bf,{size:14})," Print Ledger"]})]}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),I&&r.jsxs("div",{className:"stats-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem",marginBottom:"1.25rem"},children:[r.jsxs("div",{className:"stat-card",style:{padding:"0.75rem",border:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Order Value"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem"},children:["",I.totalOrderValue.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"stat-card",style:{padding:"0.75rem",border:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Total Paid"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem",color:"var(--dmp-success-color)"},children:["",I.totalAmountPaid.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:`stat-card ${I.remainingBalance>0?"positive":"negative"}`,style:{padding:"0.75rem",border:"1px solid",borderColor:I.remainingBalance>0?"rgba(0, 208, 132, 0.2)":"rgba(255, 77, 79, 0.2)",backgroundColor:I.remainingBalance>0?"rgba(0, 208, 132, 0.05)":"rgba(255, 77, 79, 0.05)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Balance"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem",color:I.remainingBalance>0?"var(--dmp-success-color)":"var(--dmp-danger-color)"},children:["",I.remainingBalance.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsx("h4",{style:{fontSize:"1rem",marginTop:"1rem",marginBottom:"0.5rem"},children:"Payment History"}),k.length===0?r.jsx("p",{children:"No payments recorded for this distributor."}):r.jsx("div",{className:"table-wrapper",style:{boxShadow:"none",border:"1px solid var(--dmp-bg-primary)"},children:r.jsxs("table",{className:"dmp-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Date"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Order"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Paid"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Balance"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Mode"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Notes"})]})}),r.jsx("tbody",{children:k.map(he=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(he.payment_date).toLocaleDateString()}),r.jsxs("td",{"data-label":"Order",style:{fontWeight:500},children:["",he.order_value.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsxs("td",{"data-label":"Paid",style:{fontWeight:500,color:"var(--dmp-success-color)"},children:["",he.amount_paid.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsxs("td",{"data-label":"Balance",style:{fontWeight:600},children:["",he.balance_remaining.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsx("td",{"data-label":"Mode",children:he.payment_mode?he.payment_mode.charAt(0).toUpperCase()+he.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:he.notes||"",children:he.notes||"-"})]},he.id))})]})}),r.jsx("div",{className:"dmp-modal-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",onClick:Q,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Close"})})]})}),_&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"420px"},children:[r.jsx("button",{onClick:me,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Add Payment"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:Z,children:[r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_date",children:"Date:"}),r.jsx("input",{type:"date",id:"payment_date",className:"dmp-input",value:Y,onChange:he=>Re(he.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_mode",children:"Mode:"}),r.jsxs("select",{id:"payment_mode",className:"dmp-select",value:Ae,onChange:he=>ue(he.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"order_value",children:"Order Value:"}),r.jsx("input",{type:"number",id:"order_value",className:"dmp-input",value:$e,onChange:he=>ze(he.target.value),step:"0.01"})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"amount_paid",children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount_paid",className:"dmp-input",value:Le,onChange:he=>oe(he.target.value),step:"0.01"})]})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",className:"dmp-textarea",value:Se,onChange:he=>Ve(he.target.value),rows:2,style:{resize:"none"}})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"1.25rem"},children:[r.jsx("button",{type:"button",onClick:me,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Add Payment"})]})]})]})})]})},Yj=t=>{if(!t)return"";let e=t.toLowerCase();return e=e.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),e=e.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),e=e.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),e},uRe=(t,e)=>{if(!t||!e||e.length===0)return;const n=Yj(t);let a=e.find(o=>Yj(o.name)===n);if(a)return a;let i=e.find(o=>Yj(o.name).includes(n));if(i)return i;let s=e.find(o=>n.includes(Yj(o.name)));if(s)return s},dRe=({isOpen:t,onClose:e,excelHeaders:n,onConfirm:a,availableFields:i})=>{const[s,o]=v.useState({});if(v.useEffect(()=>{t&&c()},[t,n,i]),!t)return null;const l=(f,p)=>{o(g=>({...g,[f]:p}))},c=()=>{const f={};n.forEach(p=>{const g=i.map(b=>({name:b})),x=uRe(p,g);x&&(f[p]=x.name)}),o(f)},d=()=>{const f={};for(const p in s)s[p]&&s[p]!=="none"&&(f[p]=s[p]);a(f),e()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content excel-mapping-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h3",{children:"Match File Columns"}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Lt,{size:18})})]}),r.jsx("p",{className:"modal-description",children:'Match file columns to app fields. Use "Auto Match" for suggestions.'}),r.jsx("div",{className:"modal-actions-top",children:r.jsx("button",{type:"button",onClick:c,className:"button-auto-match",children:"Auto Match"})}),r.jsxs("div",{className:"column-mapping-grid",children:[r.jsx("div",{className:"grid-header",children:"Excel Column"}),r.jsx("div",{className:"grid-header",children:"App Field"}),n.map((f,p)=>r.jsxs(Ce.Fragment,{children:[r.jsx("div",{className:"excel-header-cell",children:f}),r.jsx("div",{className:"app-field-cell",children:r.jsxs("select",{value:s[f]||"",onChange:g=>l(f,g.target.value),className:"app-field-select",children:[r.jsx("option",{value:"",children:"-- Select Field --"}),r.jsx("option",{value:"none",children:"None (Ignore Column)"}),i.map((g,x)=>r.jsx("option",{value:g,children:g==="name"?"Composition Name":g==="brand_name"?"Brand Name":g==="price"?"MRP":g==="buying_price"?"Rate":g==="unit"?"Pack":g==="batch"?"Batch":g==="hsn_code"?"HSN Code":g==="mfg"?"MFG":g==="loose_quantity"?"Loose":g.replace(/_/g," ").replace(/\b\w/g,b=>b.toUpperCase())},x))]})})]},p))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:d,className:"button-submit",children:"Confirm Mapping"})]})]})})},hRe=({entityType:t,config:e,values:n,onChange:a,className:i=""})=>{const o=(e[t]||[]).filter(c=>c.type!=="computed");if(o.length===0)return null;const l=c=>{const d=n[c.key]??"";switch(c.type){case"number":return r.jsx("input",{type:"number",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value===""?null:parseFloat(f.target.value)),className:"custom-text-input mt-1",placeholder:c.label,required:c.required});case"date":return r.jsx("input",{type:"date",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",required:c.required});case"boolean":return r.jsx("input",{type:"checkbox",id:`custom_${c.key}`,name:`custom_${c.key}`,checked:!!d,onChange:f=>a(c.key,f.target.checked),className:"custom-checkbox mt-1"});case"text":default:return r.jsx("input",{type:"text",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",placeholder:c.label,required:c.required})}};return r.jsxs("div",{className:`custom-fields-section ${i}`,children:[r.jsx("h4",{className:"custom-fields-title",children:"Custom Fields"}),r.jsx("div",{className:"custom-fields-grid",children:o.map(c=>r.jsxs("div",{className:"custom-field-item",children:[r.jsxs("label",{htmlFor:`custom_${c.key}`,className:"form-label",children:[c.label,c.required&&r.jsx("span",{className:"required-star",children:"*"})]}),l(c)]},c.key))})]})},fRe=({isOpen:t,onClose:e,onDrugAddedToPurchase:n,customColumnsConfig:a={}})=>{const[i,s]=v.useState({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null);v.useEffect(()=>{t&&(s({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),l(null),d(!1),p(!1))},[t]),v.useEffect(()=>{const T=E=>{E.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var k;(k=b.current)==null||k.focus()},0),E.preventDefault()))},C=E=>{g.current&&!g.current.contains(E.target)&&p(!1)};return document.addEventListener("keydown",T),document.addEventListener("mousedown",C),()=>{document.removeEventListener("keydown",T),document.removeEventListener("mousedown",C)}},[f]);const j=T=>{const{name:C,value:E,type:k}=T.target;s(P=>({...P,[C]:k==="number"?parseFloat(E)||null:E}))},S=(T,C)=>{s(E=>({...E,custom_fields:{...E.custom_fields,[T]:C}}))},_=T=>{if(T.preventDefault(),l(null),d(!0),i.mrp===void 0||i.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const C={...i,name:i.name===""?null:i.name,composition:i.composition===""?null:i.composition,rate:i.rate===0?null:i.rate,expiry_date:i.expiry_date===""?null:i.expiry_date,gst:i.gst===0?null:i.gst,margin:i.margin===0?null:i.margin,discount:i.discount===0?null:i.discount,brand_name:i.brand_name===""?null:i.brand_name,batch:i.batch===""?null:i.batch,hsn_code:i.hsn_code===""?null:i.hsn_code,mfg:i.mfg===""?null:i.mfg,loose:i.loose===0?null:i.loose,custom_fields:i.custom_fields||{}};n(C),d(!1),e()};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content add-drug-form-container",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:e,className:"cancel-button",title:"Close",children:r.jsx(Lt,{size:18})})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("form",{onSubmit:_,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid-2",children:[r.jsxs("div",{className:"span-2 form-group",children:[r.jsxs("label",{htmlFor:"name",className:"form-label",children:["Composition Name",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Dl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. Optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",value:i.name||"",onChange:j,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})]}),r.jsxs("div",{className:"span-2 form-group",children:[r.jsxs("label",{htmlFor:"brand_name",className:"form-label",children:["Brand Name",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Dl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. Optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:i.brand_name||"",onChange:j,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"mrp",className:"form-label",children:["MRP () *",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Dl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Price for the pack size."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"mrp",required:!0,step:"0.01",min:"0",value:i.mrp||"",onChange:j,className:"custom-text-input",placeholder:"0.00",tabIndex:3})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"stock",className:"form-label",children:["Quantity *",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Dl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Number of packs in stock."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,step:"1",min:"0",value:i.stock||"",onChange:j,className:"custom-text-input",placeholder:"0",tabIndex:4})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pack",className:"form-label",children:"Pack (e.g., strip)"}),r.jsx("input",{type:"text",name:"pack",id:"pack",value:i.pack||"",onChange:j,className:"custom-text-input",placeholder:"e.g., strip",tabIndex:5})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:i.expiry_date||"",onChange:j,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:i.box_number||"",onChange:j,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[r.jsxs("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},tabIndex:8,ref:x,children:["Others",r.jsx("span",{children:f?"":"+"})]}),f&&r.jsxs("div",{className:"form-grid-2",style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary, #f9fafb)",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("div",{className:"span-2 form-group",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:2,value:i.description||"",onChange:j,className:"custom-text-input",tabIndex:9,style:{minHeight:"60px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"rate",step:"0.01",min:"0",value:i.rate??"",onChange:j,placeholder:"Buying Price",className:"custom-text-input",tabIndex:10,ref:b})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:i.gst??"",onChange:j,placeholder:"5",className:"custom-text-input",tabIndex:11})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:i.margin??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:i.discount??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"batch",value:i.batch||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:14})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:i.hsn_code||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"mfg",value:i.mfg||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Qty"}),r.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:i.loose??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:17})]})]})]})]}),r.jsx("div",{style:{marginTop:"1rem"},children:r.jsx(hRe,{entityType:"drugs",config:a,values:i.custom_fields||{},onChange:S})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:e,disabled:c,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:19,children:c?"Adding...":"Add Drug"})]})]})]})}):null},pRe=({purchaseRows:t,onCellChange:e,onRemoveDrug:n,onAddEmptyRow:a})=>{const i=v.useRef(new Map),s=["name","mrp","stock","pack","expiry_date","rate","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],o=(l,c,d)=>{if(l.key==="Tab"){l.preventDefault();const f=s.indexOf(d);if(f!==-1){const p=(f+1)%s.length,g=s[p],x=i.current.get(`${c}-${g}`);x==null||x.focus()}}};return t.length===0?r.jsxs("div",{className:"no-drugs-message",children:[r.jsx("p",{children:"No drugs added to the purchase list yet."}),r.jsxs("button",{onClick:a,className:"action-button add-drug-to-table-button",children:[r.jsx(Ps,{size:18,className:"button-icon"}),"Add the first drug"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"purchase-drugs-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Composition Name"}),r.jsx("th",{children:"MRP ()"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Pack"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Rate ()"}),r.jsx("th",{children:"Brand Name"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{children:"GST (%)"}),r.jsx("th",{children:"Discount (%)"}),r.jsx("th",{children:"Margin (%)"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"HSN Code"}),r.jsx("th",{children:"MFG"}),r.jsx("th",{children:"Loose"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map((l,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("input",{type:"text",value:l.name||"",onChange:d=>e(d,l.id,"name"),onKeyDown:d=>o(d,l.id,"name"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.mrp||"",onChange:d=>e(d,l.id,"mrp"),onKeyDown:d=>o(d,l.id,"mrp"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-mrp`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.stock||"",onChange:d=>e(d,l.id,"stock"),onKeyDown:d=>o(d,l.id,"stock"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-stock`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.pack||"",onChange:d=>e(d,l.id,"pack"),onKeyDown:d=>o(d,l.id,"pack"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-pack`,d)}})}),r.jsx("td",{children:l.supplier||"N/A"}),r.jsx("td",{children:r.jsx("input",{type:"date",value:l.expiry_date||"",onChange:d=>e(d,l.id,"expiry_date"),onKeyDown:d=>o(d,l.id,"expiry_date"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-expiry_date`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.rate||"",onChange:d=>e(d,l.id,"rate"),onKeyDown:d=>o(d,l.id,"rate"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-rate`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.brand_name||"",onChange:d=>e(d,l.id,"brand_name"),onKeyDown:d=>o(d,l.id,"brand_name"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-brand_name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.box_number||"",onChange:d=>e(d,l.id,"box_number"),onKeyDown:d=>o(d,l.id,"box_number"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-box_number`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.gst||"",onChange:d=>e(d,l.id,"gst"),onKeyDown:d=>o(d,l.id,"gst"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-gst`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.discount||"",onChange:d=>e(d,l.id,"discount"),onKeyDown:d=>o(d,l.id,"discount"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-discount`,d)}})}),r.jsx("td",{children:(()=>{const d=l.mrp||0,f=l.rate||0,p=l.gst!==null&&l.gst!==void 0?l.gst/100*f:0,g=l.discount!==null&&l.discount!==void 0?l.discount/100*d:0,x=d-(f+p)-g;return`${(d>0?x/d*100:0).toFixed(2)}%`})()}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.batch||"",onChange:d=>e(d,l.id,"batch"),onKeyDown:d=>o(d,l.id,"batch"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-batch`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.hsn_code||"",onChange:d=>e(d,l.id,"hsn_code"),onKeyDown:d=>o(d,l.id,"hsn_code"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-hsn_code`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.mfg||"",onChange:d=>e(d,l.id,"mfg"),onKeyDown:d=>o(d,l.id,"mfg"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-mfg`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.loose||"",onChange:d=>e(d,l.id,"loose"),onKeyDown:d=>o(d,l.id,"loose"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-loose`,d)}})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>n(l.id),className:"delete-button",title:"Remove Item",children:r.jsx(Wn,{size:16})})})]},l.id||c))})]})})},mRe="_container_7ak2k_7",gRe="_header_7ak2k_207",yRe="_backButton_7ak2k_221",xRe="_title_7ak2k_265",vRe="_stickyActionBar_7ak2k_287",bRe="_actionRow_7ak2k_317",jRe="_inputWrapper_7ak2k_335",wRe="_inputIcon_7ak2k_345",NRe="_input_7ak2k_335",SRe="_quickDistributors_7ak2k_401",_Re="_distributorChip_7ak2k_417",CRe="_distributorChipIcon_7ak2k_463",TRe="_selectedInfo_7ak2k_473",kRe="_resultsDropdown_7ak2k_503",ARe="_resultItem_7ak2k_537",ERe="_buttonGroup_7ak2k_565",PRe="_button_7ak2k_565",DRe="_buttonPrimary_7ak2k_609",ORe="_buttonSecondary_7ak2k_631",MRe="_buttonAccent_7ak2k_653",IRe="_buttonDisabled_7ak2k_675",RRe="_tableSection_7ak2k_691",LRe="_cardTitle_7ak2k_707",FRe="_cardIcon_7ak2k_727",$Re="_footer_7ak2k_947",BRe="_totalValue_7ak2k_981",zRe="_footerControls_7ak2k_1005",qRe="_paidInputGroup_7ak2k_1017",URe="_paidLabel_7ak2k_1029",VRe="_paidInput_7ak2k_1017",HRe="_errorMsg_7ak2k_1075",hn={container:mRe,header:gRe,backButton:yRe,title:xRe,stickyActionBar:vRe,actionRow:bRe,inputWrapper:jRe,inputIcon:wRe,input:NRe,quickDistributors:SRe,distributorChip:_Re,distributorChipIcon:CRe,selectedInfo:TRe,resultsDropdown:kRe,resultItem:ARe,buttonGroup:ERe,button:PRe,buttonPrimary:DRe,buttonSecondary:ORe,buttonAccent:MRe,buttonDisabled:IRe,tableSection:RRe,cardTitle:LRe,cardIcon:FRe,footer:$Re,totalValue:BRe,footerControls:zRe,paidInputGroup:qRe,paidLabel:URe,paidInput:VRe,errorMsg:HRe},FB=()=>{const t=Ft(),{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f}=Ez(),[p,g]=v.useState(!1),[x,b]=v.useState(!0),j=v.useRef(null),S=v.useRef(null),[_,T]=v.useState(!1),C=v.useRef(null),[E,k]=v.useState(!1),[P,I]=v.useState([]),[R,z]=v.useState(null),[q,F]=v.useState(null),[V,H]=v.useState(!1),[K,W]=v.useState([]),B=["name","description","mrp","stock","pack","supplier","expiry_date","rate","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"];v.useEffect(()=>{(async()=>{b(!0);try{const _e=await le("/api/distributors?limit=4");if(_e.ok){const Ne=await _e.json();W(Array.isArray(Ne)?Ne.slice(0,4):[])}}catch(_e){console.error("Failed to fetch initial distributors",_e)}finally{b(!1)}})()},[]);const G=()=>{const _e={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",mrp:0,stock:0,pack:"",supplier:a?a.name:"",expiry_date:"",rate:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};n(Ne=>[...Ne,_e])},ee=async(be,_e)=>{if(!be){F("No file provided for import.");return}if(!a){F("Please select a distributor before importing.");return}g(!0),F(null);const Ne=new FormData;Ne.append("inventoryFile",be),Ne.append("columnMapping",JSON.stringify(_e));try{const Z=await le("/api/drugs/parse-excel",{method:"POST",body:Ne});if(!Z.ok){const de=await Z.json();throw new Error(de.message||`Failed to parse Excel file: ${Z.statusText}`)}const ge=await Z.json();n(de=>[...de,...ge.map(ae=>({...ae,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:a?a.name:ae.supplier}))])}catch(Z){console.error("Failed to parse Excel file:",Z),F(Z.message||"Failed to parse Excel file. Please check the file format and try again.")}finally{j.current&&(j.current.value=""),g(!1),z(null)}},X=async be=>{if(be.target.files&&be.target.files[0]){const _e=be.target.files[0];z(_e),F(null),g(!0);const Ne=new FormData;Ne.append("inventoryFile",_e);try{const Z=await le("/api/drugs/get-file-headers",{method:"POST",body:Ne});if(!Z.ok){const de=await Z.json();throw new Error(de.message||`Failed to get file headers: ${Z.statusText}`)}const{headers:ge}=await Z.json();I(ge),k(!0)}catch(Z){console.error("Failed to get file headers:",Z),F(Z.message||"Failed to read file headers. Please check the file format and try again."),z(null)}finally{g(!1)}}else z(null)},$=be=>{R?ee(R,be):F("No file selected for import after mapping."),k(!1)},ce=()=>{k(!1),I([]),z(null),j.current&&(j.current.value="")},xe=()=>{var be;(be=j.current)==null||be.click()},Y=async be=>{if(be.target.files&&be.target.files[0]){const _e=be.target.files[0];F(null),g(!0);const Ne=new FormData;Ne.append("file",_e),Ne.append("output_type","csv");const ge={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const de=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:ge,body:Ne});if(!de.ok){const me=await de.json();throw new Error(me.message||`Failed to extract data from image/PDF: ${de.statusText}`)}const ae=await de.json();if(!ae.success||!ae.content)throw new Error(ae.detail||"Nanonets API did not return expected content.");let ne=ae.content;ne=ne.split(`
`).filter(me=>!me.startsWith("#")&&me.trim()!=="").join(`
`);const je=new File([ne],"extracted_data.csv",{type:"text/csv"}),Ee=new FormData;Ee.append("inventoryFile",je);const Q=await le("/api/drugs/get-file-headers",{method:"POST",body:Ee});if(!Q.ok){const me=await Q.json();throw new Error(me.message||`Failed to get headers from extracted CSV: ${Q.statusText}`)}const{headers:ye}=await Q.json();I(ye),z(je),k(!0)}catch(de){console.error("Failed to extract data from image/PDF:",de),F(de.message||"Failed to extract data from image/PDF. Please check the file and try again.")}finally{S.current&&(S.current.value=""),g(!1)}}},Re=()=>{var be;(be=S.current)==null||be.click()},$e=()=>{if(!a){F("Please select a distributor before adding a drug manually.");return}H(!0)},ze=()=>{H(!1),F(null)},Le=be=>{n(_e=>[..._e,{...be,id:Date.now().toString(),supplier:a?a.name:be.supplier}]),ze()},oe=be=>{n(_e=>_e.filter(Ne=>Ne.id!==be))},Se=(be,_e,Ne)=>{const{value:Z}=be.target;n(ge=>ge.map(de=>{if(de.id===_e){let ae=Z;Ne==="expiry_date"?ae=Z.trim()===""?null:Z:["mrp","stock","rate","gst","margin","discount","loose"].includes(Ne)&&(ae=parseFloat(Z),isNaN(ae)&&(ae=null));const ne={...de,[Ne]:ae};return Ne==="name"&&a&&!ne.supplier&&(ne.supplier=a.name),ne}return de}))},Ve=v.useCallback(()=>e.reduce((be,_e)=>{const Ne=_e.stock||0,Z=_e.rate||0,ge=_e.gst||0,de=_e.discount||0;let ae=Z*(1-de/100),ne=Ne*ae;return ne+=ne*(ge/100),be+ne},0),[e]),Ae=async()=>{if(!a){F("Please select a distributor before submitting the purchase.");return}const be=e.filter(_e=>Object.values(_e).some(Ne=>typeof Ne=="string"&&Ne.trim()!==""||typeof Ne=="number"&&Ne!==0||Ne!=null&&typeof Ne!="string"&&typeof Ne!="number"));if(be.length===0){F("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),g(!1);return}g(!0),F(null);try{for(const ge of be){const de={...ge,expiry_date:ge.expiry_date===""?null:ge.expiry_date,distributorId:a.id},ae=await le("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(!ae.ok){const ne=await ae.json();throw new Error(ne.message||`Failed to add drug ${ge.name}: ${ae.statusText}`)}}const _e=Ve(),Ne=new Date().toISOString().split("T")[0],Z=await le(`/api/distributors/${a.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:Ne,order_value:_e,amount_paid:l,notes:"Payment from purchase page."})});if(!Z.ok){const ge=await Z.json();throw new Error(ge.message||`Failed to record distributor payment: ${Z.statusText}`)}n([]),i(null),o(""),c(0),t("/dashboard/inventory")}catch(_e){console.error("Failed to submit purchase:",_e),F(_e.message||"Failed to submit purchase. Please try again.")}finally{g(!1)}},ue=v.useCallback(async be=>{if(be.trim()===""){f([]);return}try{const _e=await le(`/api/distributors?search=${encodeURIComponent(be)}`);if(!_e.ok)throw new Error(`Failed to fetch distributors: ${_e.statusText}`);const Ne=await _e.json();f(Ne)}catch(_e){console.error("Failed to fetch distributors:",_e),F(_e.message||"Failed to load distributors.")}},[]),Te=be=>{const _e=be.target.value;o(_e),i(null),C.current&&clearTimeout(C.current),_e.trim()!==""?C.current=setTimeout(()=>{ue(_e),T(!0)},300):(f([]),T(!1))},se=be=>{i(be),o(be.name),T(!1),f([])};return v.useEffect(()=>{const be=_e=>{_e.target instanceof HTMLElement&&!_e.target.closest(`.${hn.inputWrapper}`)&&T(!1)};return document.addEventListener("mousedown",be),()=>{document.removeEventListener("mousedown",be),C.current&&clearTimeout(C.current)}},[]),r.jsxs("div",{className:hn.container,children:[r.jsxs("div",{className:hn.header,children:[r.jsx("button",{onClick:()=>t(-1),className:hn.backButton,title:"Go Back",children:r.jsx(sn,{size:24})}),r.jsx("h2",{className:hn.title,children:"Purchase Inventory"})]}),q&&r.jsxs("div",{className:hn.errorMsg,children:[r.jsx(Br,{size:20}),q]}),r.jsx("div",{className:hn.stickyActionBar,children:r.jsxs("div",{className:hn.actionRow,children:[r.jsxs("div",{style:{flex:1,minWidth:"300px",position:"relative"},children:[r.jsxs("div",{className:hn.inputWrapper,children:[r.jsx(En,{className:hn.inputIcon,size:20}),r.jsx("input",{type:"text",placeholder:"Search distributor...",value:s,onChange:Te,onFocus:()=>s.trim()!==""&&T(!0),className:hn.input}),_&&d.length>0&&r.jsx("ul",{className:hn.resultsDropdown,children:d.map(be=>r.jsx("li",{onClick:()=>se(be),className:hn.resultItem,children:be.name},be.id))})]}),x?r.jsx("div",{className:hn.quickDistributors,children:[1,2,3,4].map(be=>r.jsx(te,{width:100,height:32,style:{borderRadius:"16px"}},be))}):K.length>0&&!a&&r.jsx("div",{className:hn.quickDistributors,children:K.map(be=>r.jsxs("button",{className:hn.distributorChip,onClick:()=>se(be),children:[r.jsx(Jn,{className:hn.distributorChipIcon}),be.name]},be.id))}),a&&r.jsxs("div",{className:hn.selectedInfo,style:{marginTop:"0.5rem",marginBottom:0},children:[r.jsx(Wo,{size:18}),r.jsxs("span",{children:["Selected: ",r.jsx("strong",{children:a.name})]})]})]}),r.jsxs("div",{className:hn.buttonGroup,children:[r.jsx("input",{ref:j,type:"file",className:"sr-only",style:{display:"none"},accept:".xlsx, .xls, .csv",onChange:X}),r.jsx("input",{ref:S,type:"file",className:"sr-only",style:{display:"none"},accept:".pdf, .png, .jpg, .jpeg",onChange:Y}),r.jsxs("button",{onClick:xe,disabled:p||!a,className:`${hn.button} ${hn.buttonPrimary} ${p||!a?hn.buttonDisabled:""}`,title:a?"":"Select a distributor to import",children:[r.jsx(Dv,{size:18}),p?"Processing...":"Import Excel/CSV"]}),r.jsxs("button",{onClick:Re,disabled:p||!a,className:`${hn.button} ${hn.buttonSecondary} ${p||!a?hn.buttonDisabled:""}`,title:a?"":"Select a distributor",children:[r.jsx(aa,{size:18}),"Scan Image/PDF"]}),r.jsxs("button",{onClick:$e,disabled:!a,className:`${hn.button} ${hn.buttonAccent} ${a?"":hn.buttonDisabled}`,title:a?"":"Select a distributor",children:[r.jsx(Ps,{size:18}),"Add Manually"]})]})]})}),r.jsx(dRe,{isOpen:E,onClose:ce,excelHeaders:P,onConfirm:$,availableFields:B}),V&&r.jsx(fRe,{isOpen:V,onClose:ze,onDrugAddedToPurchase:Le}),r.jsxs("div",{className:hn.tableSection,children:[r.jsxs("div",{className:hn.cardTitle,children:[r.jsx(Db,{className:hn.cardIcon,size:24}),"Purchase Items (",e.length,")"]}),r.jsx(pRe,{purchaseRows:e,onCellChange:Se,onRemoveDrug:oe,onAddEmptyRow:G})]}),r.jsxs("div",{className:hn.footer,children:[r.jsxs("button",{onClick:G,className:`${hn.button} ${hn.buttonSecondary}`,children:[r.jsx(Ps,{size:18}),"Add New Row"]}),r.jsxs("div",{className:hn.footerControls,children:[r.jsxs("div",{className:hn.paidInputGroup,children:[r.jsx("label",{htmlFor:"amount-paid",className:hn.paidLabel,children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount-paid",value:l,onChange:be=>c(parseFloat(be.target.value)||0),placeholder:"0.00",className:hn.paidInput,step:"0.01",disabled:!a})]}),r.jsxs("div",{className:hn.totalValue,children:["Total: ",r.jsxs("span",{children:["",Ve().toFixed(2)]})]}),r.jsx("button",{onClick:Ae,disabled:p||e.length===0||!a,className:`${hn.button} ${hn.buttonPrimary} ${hn.submitButton} ${p||!a||e.length===0?hn.buttonDisabled:""}`,style:{padding:"0.8rem 1.5rem",fontSize:"1rem"},children:p?"Submitting...":"Complete Purchase"})]})]})]})},GRe=t=>{if(!t)return 1;const e=t.match(/(?:\d+x)?(\d+)/);return e&&e[1]?parseInt(e[1],10):1},WRe=()=>{const t=Ft(),e=zr(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(""),[E,k]=v.useState(""),[P,I]=v.useState(""),[R,z]=v.useState(0),q=v.useRef(!1),[F,V]=v.useState(null),[H,K]=v.useState(!1),[W,B]=v.useState(!1),[G,ee]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),X=()=>{G.length<5&&ee(Ne=>[...Ne,{id:Date.now().toString(),method:"cash",amount:0}])},$=Ne=>{G.length>2&&ee(Z=>Z.filter(ge=>ge.id!==Ne))},ce=(Ne,Z,ge)=>{ee(de=>{const ae=de.map(ne=>ne.id===Ne?Z==="method"?{...ne,method:ge}:{...ne,amount:Math.max(0,ge)}:ne);if(Z==="amount"&&ae.length===2){const ie=ae.findIndex(Q=>Q.id===Ne)===0?1:0,je=Math.max(0,ge),Ee=Ae-je;ae[ie]={...ae[ie],amount:Math.max(0,Ee)}}return ae})},xe=(Ne,Z)=>{const ge=G.filter(ae=>ae.id!==Ne).reduce((ae,ne)=>ae+ne.amount,0),de=Math.max(0,Z-ge);ee(ae=>ae.map(ne=>ne.id===Ne?{...ne,amount:de}:ne))},Y=Ne=>{const Z=Math.max(0,Math.min(100,isNaN(Ne)?0:Ne));q.current=!0,z(Z);const ge=i.map(de=>({...de,discount_percentage:Z}));s(ge)},Re=(Ne,Z)=>{const ge=[...i];ge[Ne].discount_percentage=isNaN(Z)?0:Z,s(ge)};v.useEffect(()=>{if(q.current){q.current=!1;return}const Ne=i.reduce((de,ae)=>de+(ae.total_price??0),0);if(Ne===0){z(0);return}const ge=i.reduce((de,ae)=>{const ie=(ae.total_price??0)*((ae.discount_percentage??0)/100);return de+ie},0)/Ne*100;z(de=>Math.abs(de-ge)>.01?ge:de)},[i]);const $e=async()=>{if(!n)return d("No order data available to bill."),null;if(i.length===0)return d("Cannot bill an empty order."),null;p(!0),d(null);try{const Ne=i.map(ie=>{const je=(ie.pricePerLooseUnit??0)*(ie.looseQuantity??0),Ee=je*((ie.discount_percentage??0)/100),Q=je-Ee;return{name:ie.name,pack_quantity:ie.loosePacks??0,loose_quantity:ie.looseUnits??0,price:ie.originalPrice??0,pack_price:ie.originalPrice??0,loose_price:ie.pricePerLooseUnit??0,total:Q,drug_id:ie.drug_id,discount_percentage:ie.discount_percentage??0,batch:ie.batch,expiry_date:ie.expiry_date}}),Z={patientId:n.patientId,queueId:n.id,items:Ne,amount:Ae,paymentMode:W?"split":g,type:"pharmacy",related_id:n.id,status:"paid",discountPercentage:R};W&&(Z.splitPayments=G.map(ie=>({method:ie.method,amount:ie.amount})));const ge=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}),de=await ge.json();if(!ge.ok||!de.id)throw new Error(de.message||"Failed to create bill.");const ae=await le(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:de.id,medications:i})});if(!ae.ok){const ie=await ae.text();throw new Error(`Failed to update pharmacy order status: ${ae.statusText} - ${ie}`)}a(ie=>ie?{...ie,status:"billed",bill_id:de.id}:null);const ne=W?G.filter(ie=>ie.method==="credit").reduce((ie,je)=>ie+je.amount,0):g==="credit"?Ae:0;if(ne>0)try{await le(`/api/patient-debts/${n.patientId}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:ne,related_bill_id:de.id,notes:`Pharmacy Bill #${de.id}`})})}catch(ie){console.error("Failed to create debt entry:",ie)}return t(`/dashboard/pharmacy-billing/${n.id}`,{replace:!0,state:{order:{...n,status:"billed",bill_id:de.id},initialItems:i}}),de.id}catch(Ne){return console.error("Billing process failed:",Ne),d(Ne.message||"Failed to mark order as billed. Please try again."),null}finally{p(!1)}},ze=async()=>{if(n)try{const Ne=await le(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed",medications:i})});if(!Ne.ok){const Z=await Ne.text();console.error("Failed to dispense order:",Z)}}catch(Ne){console.error("Error dispensing order:",Ne)}},Le=()=>{window.print()},oe=async()=>{await $e()&&(window.print(),await ze(),t(-1))};v.useEffect(()=>{const Ne=e.pathname.split("/"),Z=Ne[Ne.length-1];Z?(async()=>{try{l(!0);const[de,ae,ne]=await Promise.all([le(`/api/pharmacy-orders/${Z}`),le("/api/drugs").then(Q=>Q.ok?Q.json():null).catch(()=>null),le("/api/clinics/settings").then(Q=>Q.ok?Q.json():null).catch(()=>null)]);if(!de.ok)throw new Error("Failed to fetch pharmacy order details");const ie=await de.json();a(ie);let je=[];ae&&(je=ae.drugs||ae||[]),ne&&(_(ne.upi_id||""),C(ne.name||""),k(ne.address||""),I(ne.notes||""));const Ee=ie.medications.map(Q=>{const ye=GRe(Q.unit),me=(Q.pack_quantity??0)*ye+(Q.loose_quantity??0),he=je.find(wt=>Q.drug_id&&String(wt.id)===String(Q.drug_id)||wt.name.toLowerCase()===Q.name.toLowerCase()),De=Q.batch||(he==null?void 0:he.batch)||(he==null?void 0:he.batch_number),nt=Q.expiry_date||(he==null?void 0:he.expiry_date),Fe=Number(Q.pack_price)||Number(he==null?void 0:he.mrp)||0,Ge=Number(he==null?void 0:he.rate)||0;let it=Number(Q.loose_price)||0;return it===0&&(Fe>0&&ye>0?it=Fe/ye:Ge>0&&(it=Ge)),{...Q,isLoose:!0,loosePacks:Q.pack_quantity??0,looseUnits:Q.loose_quantity??0,looseQuantity:me,pack_price:Fe,loose_price:it,total_price:Number(Q.total_price)||it*me,pricePerLooseUnit:it,originalPrice:Fe,discount_percentage:Number(Q.discount_percentage)??0,directions_to_use:Q.directions_to_use,tabletsPerDay:Q.tabletsPerDay,numberOfDays:Q.numberOfDays,batch:De,expiry_date:nt}});s(Ee)}catch(de){console.error("Failed to fetch data:",de),d(de.message||"Failed to load order details.")}finally{l(!1)}})():(d("No pharmacy order ID provided."),l(!1))},[e.pathname]);const Se=v.useMemo(()=>i.reduce((Ne,Z)=>Ne+(Z.total_price??0),0),[i]),Ve=v.useMemo(()=>i.reduce((Ne,Z)=>{const de=(Z.total_price??0)*(Z.discount_percentage??0)/100;return Ne+de},0),[i]),Ae=v.useMemo(()=>Se-Ve,[Se,Ve]),ue=v.useMemo(()=>G.reduce((Ne,Z)=>Ne+Z.amount,0),[G]),Te=v.useMemo(()=>Ae-ue,[Ae,ue]),se=v.useMemo(()=>Math.abs(Te)<.01,[Te]),be=v.useMemo(()=>W?G.some(Ne=>Ne.method==="credit"&&Ne.amount>0):g==="credit",[W,G,g]),_e=v.useMemo(()=>W?G.filter(Ne=>Ne.method==="credit").reduce((Ne,Z)=>Ne+Z.amount,0):g==="credit"?Ae:0,[W,G,g,Ae]);return v.useEffect(()=>{if(Ae>0&&S){const Ne=`upi://pay?pa=${S}&pn=ClinicName&am=${Ae.toFixed(2)}&cu=INR`;j(Ne)}else j("")},[Ae,S]),v.useEffect(()=>{(async()=>{if(g==="credit"&&(n!=null&&n.patientId)){K(!0);try{const Z=await le(`/api/patient-debts/${n.patientId}/balance`);if(Z.ok){const ge=await Z.json();V(ge.netDebt||0)}else V(0)}catch(Z){console.error("Error fetching patient debt:",Z),V(0)}finally{K(!1)}}})()},[g,n==null?void 0:n.patientId]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(te,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:30,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:60,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(Ne=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:20,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:90,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})})]},Ne))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:28}),r.jsx(te,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(te,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T?`${T} Pharmacy`:"Pharmacy Bill"}),(E||P)&&r.jsxs("div",{className:"clinic-details-print",children:[E&&r.jsx("span",{className:"small-text clinic-address",children:E}),P&&r.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Pharmacy Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx($o,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Medications"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"BATCH"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{children:"QUANTITY"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((Ne,Z)=>{var ie;const ge=Ne.total_price??0,de=ge*(Ne.discount_percentage??0)/100,ae=ge-de;return r.jsxs("tr",{children:[r.jsx("td",{children:Z+1}),r.jsx("td",{children:Ne.name}),r.jsx("td",{children:Ne.batch||"N/A"}),r.jsx("td",{children:Ne.expiry_date?new Date(Ne.expiry_date).toLocaleDateString():"N/A"}),r.jsxs("td",{children:[r.jsxs("div",{children:["Packs: ",Ne.loosePacks??0]}),r.jsxs("div",{children:["Loose: ",Ne.looseUnits??0]})]}),r.jsx("td",{children:((ie=Ne.originalPrice)==null?void 0:ie.toFixed(2))??"N/A"}),r.jsx("td",{children:((Ne.pricePerLooseUnit??0)*(1-(Ne.discount_percentage??0)/100)).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:Ne.discount_percentage===0?"":Ne.discount_percentage,onChange:je=>Re(Z,parseFloat(je.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsxs("td",{children:[5 .toFixed(1),"%"]}),r.jsx("td",{children:ae.toFixed(2)})]},Z)})})]}):r.jsx("p",{children:"No medications in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Se.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",R.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"GST (Included)"}),r.jsxs("span",{children:["",(Ae*.05).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ae.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:W?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),W&&G.map((Ne,Z)=>Ne.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:Ne.method==="cash"?"Cash":Ne.method==="upi"?"UPI":Ne.method==="card"?"Card":Ne.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",Ne.amount.toFixed(2)]})]},Z))]}),F!==null&&(F>0||be)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(F??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(F??0).toFixed(2)]})]}),be&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",_e.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((F??0)+(be?_e:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:b,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Se.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:R===0?"":R,onChange:Ne=>Y(parseFloat(Ne.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ae.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>B(!W),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:W?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:W?"rgba(79, 172, 254, 0.1)":"transparent",color:W?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),W?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Ae.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:G.map((Ne,Z)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Z+1}),r.jsxs("select",{value:Ne.method,onChange:ge=>ce(Ne.id,"method",ge.target.value),className:`split-payment-select ${Ne.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Ne.amount||"",onChange:ge=>ce(Ne.id,"amount",parseFloat(ge.target.value)||0),className:`split-payment-input ${Ne.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),G.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>xe(Ne.id,Ae),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>$(Ne.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},Ne.id))}),G.length<5&&r.jsxs("button",{type:"button",onClick:X,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${se?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[se?"":Te>0?"":"",se?"Balanced":Te>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Te).toFixed(2)]})]}),!se&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",Ae.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:g,onChange:Ne=>x(Ne.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),be&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),H?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:F&&F>0?"#dc3545":"#28a745"},children:["",(F||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",_e.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((F||0)+_e).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[n.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Le,className:"secondary-button print-preview-button no-print",disabled:f||i.length===0,children:"Print Preview"}),r.jsx("button",{onClick:oe,className:"primary-button",disabled:f||i.length===0,children:f?"Processing...":"Finalise and Bill"})]}),n.status==="billed"&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${n.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},KRe=()=>{const t=Ft(),e=zr(),[n,a]=v.useState(null),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState(!0),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState("cash"),[T,C]=v.useState(""),[E,k]=v.useState(""),[P,I]=v.useState(""),[R,z]=v.useState(""),[q,F]=v.useState(""),[V,H]=v.useState(0),K=v.useRef(!1),[W,B]=v.useState(null),[G,ee]=v.useState(!1),[X,$]=v.useState(!1),[ce,xe]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Y=()=>{ce.length<5&&xe(de=>[...de,{id:Date.now().toString(),method:"cash",amount:0}])},Re=de=>{ce.length>2&&xe(ae=>ae.filter(ne=>ne.id!==de))},$e=(de,ae,ne)=>{xe(ie=>{const je=ie.map(Ee=>Ee.id===de?ae==="method"?{...Ee,method:ne}:{...Ee,amount:Math.max(0,ne)}:Ee);if(ae==="amount"&&je.length===2){const Q=je.findIndex(he=>he.id===de)===0?1:0,ye=Math.max(0,ne),me=se-ye;je[Q]={...je[Q],amount:Math.max(0,me)}}return je})},ze=(de,ae)=>{const ne=ce.filter(je=>je.id!==de).reduce((je,Ee)=>je+Ee.amount,0),ie=Math.max(0,ae-ne);xe(je=>je.map(Ee=>Ee.id===de?{...Ee,amount:ie}:Ee))},Le=de=>{const ae=Math.max(0,Math.min(100,isNaN(de)?0:de));K.current=!0,H(ae);const ne=c.map(ie=>({...ie,discount_percentage:ae}));d(ne)},oe=(de,ae)=>{const ne=[...c];ne[de].discount_percentage=isNaN(ae)?0:ae,d(ne)};v.useEffect(()=>{if(K.current){K.current=!1;return}const de=c.reduce((ie,je)=>ie+(je.price??0),0);if(de===0){H(0);return}const ne=c.reduce((ie,je)=>{const Q=(je.price??0)*((je.discount_percentage??0)/100);return ie+Q},0)/de*100;H(ie=>Math.abs(ie-ne)>.01?ne:ie)},[c]);const Se=async()=>{if(!n)return x("No order data available to bill."),null;if(c.length===0)return x("Cannot bill an empty order."),null;j(!0),x(null);try{const de=c.map(Q=>{const ye=Q.price,me=ye*((Q.discount_percentage??0)/100),he=ye-me;return{name:Q.name,price:Q.price,quantity:1,total:he,item_id:Q.id,type:"lab_test",discount_percentage:Q.discount_percentage??0}}),ae={patientId:n.patient_id,items:de,amount:se,paymentMode:X?"split":S,type:"lab",related_id:n.id,status:"paid",discountPercentage:V};X&&(ae.splitPayments=ce.map(Q=>({method:Q.method,amount:Q.amount})));const ne=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)}),ie=await ne.json();if(!ne.ok||!ie.id)throw new Error(ie.message||"Failed to create bill.");const je=await le(`/api/lab/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:ie.id})});if(!je.ok){const Q=await je.text();throw new Error(`Failed to update lab order status: ${je.statusText} - ${Q}`)}a(Q=>Q?{...Q,status:"billed",bill_id:ie.id}:null);const Ee=X?ce.filter(Q=>Q.method==="credit").reduce((Q,ye)=>Q+ye.amount,0):S==="credit"?se:0;if(Ee>0)try{await le(`/api/patient-debts/${n.patient_id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ee,related_bill_id:ie.id,notes:`Lab Bill #${ie.id}`})})}catch(Q){console.error("Failed to create debt entry:",Q)}return t(`/dashboard/lab-billing/${n.id}`,{replace:!0,state:{...e.state,order:{...n,status:"billed",bill_id:ie.id}}}),ie.id}catch(de){return console.error("Billing process failed:",de),x(de.message||"Failed to mark order as billed. Please try again."),null}finally{j(!1)}},Ve=()=>{window.print()},Ae=async()=>{await Se()&&(window.print(),t(-1))};v.useEffect(()=>{const de=e.pathname.split("/"),ae=de[de.length-1];ae?(async()=>{try{const[ie,je]=await Promise.all([le(`/api/lab/${ae}`),le("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ie.ok)throw new Error("Failed to fetch lab order details");const Ee=await ie.json();a(Ee);const Q=Ee.patient_id?le(`/api/patients/${Ee.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1});if(je.ok&&"json"in je){const he=await je.json();k(he.upi_id||""),I(he.name||""),z(he.address||""),F(he.notes||"")}const ye=await Q;if(ye.ok&&"json"in ye){const he=await ye.json();s(he.name),l(he.patient_token_number)}const me=Ee.tests.map(he=>({...he,price:typeof he.price=="string"?parseFloat(he.price):Number(he.price)||0,discount_percentage:0,total_price:typeof he.price=="string"?parseFloat(he.price):Number(he.price)||0}));d(me)}catch(ie){console.error("Failed to fetch data:",ie),x(ie.message||"Failed to load order details.")}finally{p(!1)}})():(x("No lab order ID provided."),p(!1))},[e.pathname]);const ue=v.useMemo(()=>c.reduce((de,ae)=>de+(ae.price??0),0),[c]),Te=v.useMemo(()=>c.reduce((de,ae)=>{const ie=(ae.price??0)*(ae.discount_percentage??0)/100;return de+ie},0),[c]),se=v.useMemo(()=>ue-Te,[ue,Te]),be=v.useMemo(()=>ce.reduce((de,ae)=>de+ae.amount,0),[ce]),_e=v.useMemo(()=>se-be,[se,be]),Ne=v.useMemo(()=>Math.abs(_e)<.01,[_e]),Z=v.useMemo(()=>X?ce.some(de=>de.method==="credit"&&de.amount>0):S==="credit",[X,ce,S]),ge=v.useMemo(()=>X?ce.filter(de=>de.method==="credit").reduce((de,ae)=>de+ae.amount,0):S==="credit"?se:0,[X,ce,S,se]);return v.useEffect(()=>{if(se>0&&E){const de=`upi://pay?pa=${E}&pn=ClinicName&am=${se.toFixed(2)}&cu=INR`;C(de)}else C("")},[se,E]),v.useEffect(()=>{(async()=>{if(Z&&(n!=null&&n.patient_id)){ee(!0);try{const ae=await le(`/api/patient-debts/${n.patient_id}/balance`);if(ae.ok){const ne=await ae.json();B(ne.netDebt||0)}else B(0)}catch(ae){console.error("Error fetching patient debt:",ae),B(0)}finally{ee(!1)}}})()},[Z,n==null?void 0:n.patient_id]),f?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(te,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(te,{width:200,height:20}),r.jsx(te,{width:150,height:20}),r.jsx(te,{width:180,height:20}),r.jsx(te,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:24}),r.jsx(te,{width:100,height:24})]}),r.jsx(te,{width:"100%",height:150})," ",r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})})]})]})}):g?r.jsxs("div",{className:"error-message-box",children:["Error: ",g]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:P?`${P} Lab`:"Lab Bill"}),(R||q)&&r.jsxs("div",{className:"clinic-details-print",children:[R&&r.jsx("span",{className:"small-text clinic-address",children:R}),q&&r.jsx("span",{className:"small-text clinic-notes",children:q})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:20})}),r.jsx("h1",{children:"Lab Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(ls,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Lab Tests"})}),c.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"TEST DESCRIPTION"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:c.map((de,ae)=>{const ne=de.price??0,ie=ne*(de.discount_percentage??0)/100,je=ne-ie;return r.jsxs("tr",{children:[r.jsx("td",{children:ae+1}),r.jsx("td",{children:de.name}),r.jsx("td",{children:typeof de.price=="number"?de.price.toFixed(2):Number(de.price||0).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:de.discount_percentage||"",onChange:Ee=>oe(ae,parseFloat(Ee.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:je.toFixed(2)})]},ae)})})]}):r.jsx("p",{children:"No tests in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",V.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Te.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",se.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:X?"Split Payment":S==="cash"?"Cash":S==="upi"?"UPI":S==="card"?"Card":S==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),X&&ce.map((de,ae)=>de.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:de.method==="cash"?"Cash":de.method==="upi"?"UPI":de.method==="card"?"Card":de.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",de.amount.toFixed(2)]})]},ae))]}),W!==null&&(W>0||Z)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(W??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(W??0).toFixed(2)]})]}),Z&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ge.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((W??0)+(Z?ge:0)).toFixed(2)]})]})]})]}),T&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${S!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:T,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Te.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:V===0?"":V,onChange:de=>Le(parseFloat(de.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:b||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",se.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:T?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:T,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>$(!X),disabled:b||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:X?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:X?"rgba(79, 172, 254, 0.1)":"transparent",color:X?"#4facfe":"#666",cursor:b||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),X?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",se.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:ce.map((de,ae)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ae+1}),r.jsxs("select",{value:de.method,onChange:ne=>$e(de.id,"method",ne.target.value),className:`split-payment-select ${de.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:de.amount||"",onChange:ne=>$e(de.id,"amount",parseFloat(ne.target.value)||0),className:`split-payment-input ${de.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed"})]}),ce.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ze(de.id,se),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>Re(de.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},de.id))}),ce.length<5&&r.jsxs("button",{type:"button",onClick:Y,className:"split-payment-add-btn",disabled:b||n.status==="billed",children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ne?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Ne?"":_e>0?"":"",Ne?"Balanced":_e>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(_e).toFixed(2)]})]}),!Ne&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",se.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:S,onChange:de=>_(de.target.value),className:"payment-mode-select",disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Z&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),G?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:W&&W>0?"#dc3545":"#28a745"},children:["",(W||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ge.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((W||0)+ge).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:Ve,className:"secondary-button print-preview-button no-print",disabled:b||c.length===0,children:"Print Preview"}),n.status!=="billed"&&r.jsx("button",{onClick:Ae,className:"primary-button",disabled:b||c.length===0,children:b?"Processing...":"Finalise and Bill"}),n.status==="billed"&&n.bill_id&&r.jsx("button",{onClick:()=>t("/billing",{state:{billId:n.bill_id}}),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})]}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},YRe=500,QRe=()=>{const t=Ft(),{queueId:e}=$a(),[n]=Tz(),a=n.get("doctorId"),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,d]=v.useState(null),[f,p]=v.useState(null),[g,x]=v.useState([]),[b,j]=v.useState(!0),[S,_]=v.useState(null),[T,C]=v.useState(!1),[E,k]=v.useState(!1),[P,I]=v.useState(null),[R,z]=v.useState("cash"),[q,F]=v.useState(""),[V,H]=v.useState(""),[K,W]=v.useState(""),[B,G]=v.useState(""),[ee,X]=v.useState(""),[$,ce]=v.useState(0),[xe,Y]=v.useState(null),[Re,$e]=v.useState(!1),[ze,Le]=v.useState(!1),[oe,Se]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ve=()=>{oe.length<5&&Se(Q=>[...Q,{id:Date.now().toString(),method:"cash",amount:0}])},Ae=Q=>{oe.length>2&&Se(ye=>ye.filter(me=>me.id!==Q))},ue=(Q,ye,me)=>{Se(he=>{const De=he.map(nt=>nt.id===Q?ye==="method"?{...nt,method:me}:{...nt,amount:Math.max(0,me)}:nt);if(ye==="amount"&&De.length===2){const Fe=De.findIndex(wt=>wt.id===Q)===0?1:0,Ge=Math.max(0,me),it=_e-Ge;De[Fe]={...De[Fe],amount:Math.max(0,it)}}return De})},Te=(Q,ye)=>{const me=oe.filter(De=>De.id!==Q).reduce((De,nt)=>De+nt.amount,0),he=Math.max(0,ye-me);Se(De=>De.map(nt=>nt.id===Q?{...nt,amount:he}:nt))};v.useEffect(()=>{(async()=>{if(!e){_("No queue ID provided."),j(!1);return}try{j(!0),_(null);const[ye,me]=await Promise.all([le(`/api/queue/${e}`),le("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ye.ok)throw new Error("Failed to fetch queue entry");const he=await ye.json();if(s(he),me.ok&&"json"in me){const it=await me.json();H(it.upi_id||""),W(it.name||""),G(it.address||""),X(it.notes||"")}const De=a||he.doctor_id,[nt,Fe]=await Promise.all([he.patient_id?le(`/api/patients/${he.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1}),De?le(`/api/staff/${De}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1})]);if(nt.ok&&"json"in nt){const it=await nt.json();l(it)}let Ge=YRe;if(De&&(p(De),Fe.ok&&"json"in Fe)){const it=await Fe.json();d(it),it.opd_fee!=null&&!isNaN(parseFloat(String(it.opd_fee)))&&(Ge=parseFloat(String(it.opd_fee)))}x([{name:"Consultation Fee",quantity:1,price:Ge,total:Ge,discount_percentage:0}])}catch(ye){console.error("Failed to fetch data:",ye),_(ye.message||"Failed to load billing details.")}finally{j(!1)}})()},[e,a]);const se=v.useMemo(()=>g.reduce((Q,ye)=>Q+ye.total,0),[g]),be=v.useMemo(()=>se*($/100),[se,$]),_e=v.useMemo(()=>se-be,[se,be]),Ne=v.useMemo(()=>oe.reduce((Q,ye)=>Q+ye.amount,0),[oe]),Z=v.useMemo(()=>_e-Ne,[_e,Ne]),ge=v.useMemo(()=>Math.abs(Z)<.01,[Z]),de=v.useMemo(()=>ze?oe.some(Q=>Q.method==="credit"&&Q.amount>0):R==="credit",[ze,oe,R]),ae=v.useMemo(()=>ze?oe.filter(Q=>Q.method==="credit").reduce((Q,ye)=>Q+ye.amount,0):R==="credit"?_e:0,[ze,oe,R,_e]);v.useEffect(()=>{if(_e>0&&V){const Q=`upi://pay?pa=${V}&pn=${encodeURIComponent(K)}&am=${_e.toFixed(2)}&cu=INR`;F(Q)}else F("")},[_e,V,K]),v.useEffect(()=>{(async()=>{if(de&&(o!=null&&o.id)){$e(!0);try{const ye=await le(`/api/patient-debts/${o.id}/balance`);if(ye.ok){const me=await ye.json();Y(me.netDebt||0)}else Y(0)}catch(ye){console.error("Error fetching patient debt:",ye),Y(0)}finally{$e(!1)}}})()},[de,o==null?void 0:o.id]);const ne=Q=>{const ye=Math.max(0,Math.min(100,isNaN(Q)?0:Q));ce(ye)},ie=async()=>{if(!i||!o)return _("Missing queue or patient data."),null;if(g.length===0)return _("Cannot create an empty bill."),null;C(!0),_(null);try{const Q=g.map(nt=>({name:nt.name,quantity:nt.quantity,price:nt.price,total:nt.total*(1-$/100)})),ye={patientId:o.id,queueId:i.id,items:Q,amount:_e,paymentMode:ze?"split":R,type:"consultation",related_id:i.id,status:"paid",discountPercentage:$};ze&&(ye.splitPayments=oe.map(nt=>({method:nt.method,amount:nt.amount})));const me=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ye)}),he=await me.json();if(!me.ok||!he.id)throw new Error(he.message||"Failed to create bill.");const De=ze?oe.filter(nt=>nt.method==="credit").reduce((nt,Fe)=>nt+Fe.amount,0):R==="credit"?_e:0;if(De>0)try{await le(`/api/patient-debts/${o.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:De,related_bill_id:he.id,notes:`Consultation Bill #${he.id}`})})}catch(nt){console.error("Failed to create debt entry:",nt)}if(f&&i.id)try{const nt={status:"waiting",doctorId:f},Fe=await le(`/api/queue/${i.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)});if(Fe.ok)console.log(`Doctor ${f} assigned to queue ${i.id} after billing.`);else{const Ge=await Fe.json();console.error("Failed to assign doctor to queue:",Ge.message)}}catch(nt){console.error("Error assigning doctor to queue:",nt)}return k(!0),I(he.id),he.id}catch(Q){return console.error("Billing process failed:",Q),_(Q.message||"Failed to create bill. Please try again."),null}finally{C(!1)}},je=()=>{window.print()},Ee=async()=>{await ie()&&(window.print(),t(-1))};return b?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(te,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(te,{width:200,height:20}),r.jsx(te,{width:150,height:20}),r.jsx(te,{width:180,height:20}),r.jsx(te,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:24}),r.jsx(te,{width:100,height:24})]}),r.jsx(te,{width:"100%",height:150})," ",r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})})]})]})}):S?r.jsxs("div",{className:"error-message-box",children:["Error: ",S]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:K||"Clinic Bill"}),(B||ee)&&r.jsxs("div",{className:"clinic-details-print",children:[B&&r.jsx("span",{className:"small-text clinic-address",children:B}),ee&&r.jsx("span",{className:"small-text clinic-notes",children:ee})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date().toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{size:20})}),r.jsx("h1",{children:"Consultation Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Patient ID"]})," ",(o==null?void 0:o.id)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date().toLocaleDateString()]}),c&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jf,{size:16})," Doctor"]})," ",c.name]}),i.complaint&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Complaint"})," ",i.complaint]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Bill Items"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((Q,ye)=>{const me=Q.total*($/100),he=Q.total-me;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:Q.name}),r.jsx("td",{children:Q.quantity}),r.jsxs("td",{children:["",Q.price.toFixed(2)]}),r.jsxs("td",{children:["",he.toFixed(2)]})]},ye)})})]}):r.jsx("p",{children:"No items in this bill."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",se.toFixed(2)]})]}),$>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",$.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",be.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",_e.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:ze?"Split Payment":R==="cash"?"Cash":R==="upi"?"UPI":R==="card"?"Card":R==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),ze&&oe.map((Q,ye)=>Q.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:Q.method==="cash"?"Cash":Q.method==="upi"?"UPI":Q.method==="card"?"Card":Q.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",Q.amount.toFixed(2)]})]},ye))]}),xe!==null&&(xe>0||de)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(xe??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(xe??0).toFixed(2)]})]}),de&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((xe??0)+(de?ae:0)).toFixed(2)]})]})]})]}),q&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${R!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:q,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",se.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["- ",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:$===0?"":$,onChange:Q=>ne(parseFloat(Q.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:T||E}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",_e.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:q?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:q,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>Le(!ze),disabled:T||E,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ze?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ze?"rgba(79, 172, 254, 0.1)":"transparent",color:ze?"#4facfe":"#666",cursor:T||E?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),ze?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",_e.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:oe.map((Q,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:Q.method,onChange:me=>ue(Q.id,"method",me.target.value),className:`split-payment-select ${Q.method==="credit"?"is-credit":""}`,disabled:T||E,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Q.amount||"",onChange:me=>ue(Q.id,"amount",parseFloat(me.target.value)||0),className:`split-payment-input ${Q.method==="credit"?"is-credit":""}`,disabled:T||E})]}),oe.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>Te(Q.id,_e),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>Ae(Q.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},Q.id))}),oe.length<5&&r.jsxs("button",{type:"button",onClick:Ve,className:"split-payment-add-btn",disabled:T||E,children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ne.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${ge?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[ge?"":Z>0?"":"",ge?"Balanced":Z>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Z).toFixed(2)]})]}),!ge&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",_e.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:R,onChange:Q=>z(Q.target.value),className:"payment-mode-select",disabled:T||E,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),de&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Re?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:xe&&xe>0?"#dc3545":"#28a745"},children:["",(xe||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ae.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((xe||0)+ae).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[!E&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:je,className:"secondary-button print-preview-button no-print",disabled:T||g.length===0,children:"Print Preview"}),r.jsx("button",{onClick:Ee,className:"primary-button",disabled:T||g.length===0,children:T?"Processing...":"Finalise and Bill"})]}),E&&P&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${P}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your visit!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No queue data available."})},XRe=({isOpen:t,onClose:e,onStaffAdded:n,clinicId:a,fetchWithAuth:i})=>{const[s,o]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState([]),[x,b]=v.useState(!1),j=v.useCallback(async()=>{b(!0);try{const T=await i("/api/clinic-roles");if(T.ok){const C=await T.json();g(C)}}catch(T){console.error("Failed to fetch roles:",T)}finally{b(!1)}},[i]);v.useEffect(()=>{t&&(j(),o({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),c(null))},[t,j]);const S=T=>{const{name:C,value:E}=T.target;o(k=>{const P={...k,[C]:E};return C==="role"&&E!=="doctor"&&(P.opd_fee=""),P})},_=async T=>{if(T.preventDefault(),c(null),!s.name||!s.email||!s.role||!s.password){c("Name, Email, Role, and Password are required.");return}if(!a){c("Clinic information is missing. Cannot add staff.");return}const C={...s,clinic_id:a,opd_fee:s.role==="doctor"&&s.opd_fee?parseFloat(String(s.opd_fee)):null};if(C.role==="doctor"&&s.opd_fee&&isNaN(C.opd_fee)){c("Invalid OPD Fee format. Please enter a number.");return}f(!0);try{const E=await i("/api/staff",{method:"POST",body:JSON.stringify(C)});if(!E.ok){const k=await E.json();throw new Error(k.message||"Server responded with an error")}n(),e()}catch(E){c(`Failed to add staff: ${E.message}`)}finally{f(!1)}};return t?r.jsx("div",{className:"staff-modal-overlay",children:r.jsxs("div",{className:"staff-modal-content",children:[r.jsxs("div",{className:"staff-modal-header",children:[r.jsx("h2",{className:"staff-modal-title",children:"Add New Staff"}),r.jsx("button",{onClick:e,className:"staff-modal-close",children:r.jsx(Lt,{size:20})})]}),l&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-3 py-2 rounded-lg relative mb-3 flex items-center",role:"alert",children:[r.jsx(Br,{size:14,className:"mr-2 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:l})]}),r.jsxs("form",{onSubmit:_,className:"space-y-3",children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Full Name"}),r.jsx("input",{type:"text",name:"name",value:s.name||"",onChange:S,required:!0,disabled:d,placeholder:"Full name",className:"custom-text-input"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:s.email||"",onChange:S,required:!0,disabled:d,placeholder:"Email",className:"custom-text-input"})]}),r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Password"}),r.jsx("input",{type:"password",name:"password",value:s.password||"",onChange:S,required:!0,disabled:d,placeholder:"Initial password",className:"custom-text-input"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Assign Role"}),r.jsx("select",{name:"role",value:s.role||"receptionist",onChange:S,required:!0,disabled:d||x,className:"custom-select-input",children:x?r.jsx("option",{value:"",children:"Loading..."}):p.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):p.map(T=>r.jsx("option",{value:T.key,children:T.name},T.key))})]}),s.role==="doctor"&&r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"OPD Fee ()"}),r.jsx("input",{type:"number",name:"opd_fee",value:s.opd_fee||"",onChange:S,step:"0.01",min:"0",placeholder:"e.g., 500",disabled:d,className:"custom-text-input"})]})]}),r.jsxs("div",{className:"staff-modal-footer",children:[r.jsx("button",{type:"button",onClick:e,className:"btn-compact border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:d,children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn-compact bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50",disabled:d,children:[d?r.jsx(oo,{size:16,className:"animate-spin mr-2"}):r.jsx(Vn,{size:16,className:"mr-2"}),d?"Adding...":"Add Staff"]})]})]})]})}):null},JRe=({staffId:t,isOpen:e,onClose:n,onStaffUpdated:a,fetchWithAuth:i})=>{const[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState([]),[j,S]=v.useState(!1),_=v.useCallback(async()=>{S(!0);try{const k=await i("/api/clinic-roles");if(k.ok){const P=await k.json();b(P)}}catch(k){console.error("Failed to fetch roles:",k)}finally{S(!1)}},[i]),T=v.useCallback(async()=>{if(t){f(!0),c(null);try{const k=await i(`/staff/${t}`);if(!k.ok)throw new Error("Failed to fetch staff member");const P=await k.json();o({...P,id:P._id||P.id,opd_fee:P.opd_fee!==null&&P.opd_fee!==void 0?parseFloat(String(P.opd_fee)).toFixed(2):""})}catch(k){c(`Failed to load staff data: ${k.message}`)}finally{f(!1)}}},[t,i]);v.useEffect(()=>{e&&t?(T(),_()):(o(null),c(null))},[e,t,T,_]);const C=k=>{const{name:P,value:I,type:R}=k.target;o(z=>{if(!z)return null;let q=I;R==="checkbox"&&(q=k.target.checked);const F={...z,[P]:q};return P==="role"&&I!=="doctor"&&(F.opd_fee=""),F})},E=async k=>{if(k.preventDefault(),!s||!t)return;if(c(null),!s.name||!s.email||!s.role){c("Name, Email, and Role are required.");return}const P={name:s.name,email:s.email,role:s.role,active:s.active,opd_fee:s.role==="doctor"&&s.opd_fee?parseFloat(String(s.opd_fee)):null};if(P.role==="doctor"&&s.opd_fee&&isNaN(P.opd_fee)){c("Invalid OPD Fee format. Please enter a number.");return}g(!0);try{const I=await i(`/staff/${t}`,{method:"PUT",body:JSON.stringify(P)});if(!I.ok){const R=await I.json();throw new Error(R.message||"Failed to update staff")}a(),n()}catch(I){c(`Failed to update staff: ${I.message}`)}finally{g(!1)}};return e?r.jsx("div",{className:"staff-modal-overlay",children:r.jsxs("div",{className:"staff-modal-content",children:[r.jsxs("div",{className:"staff-modal-header",children:[r.jsx("h3",{className:"staff-modal-title",children:"Edit Staff"}),r.jsx("button",{onClick:n,className:"staff-modal-close",children:r.jsx(Lt,{size:20})})]}),l&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-3 py-2 rounded-lg relative mb-3 flex items-center",role:"alert",children:[r.jsx(Br,{size:14,className:"mr-2 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:l})]}),d?r.jsxs("div",{className:"py-10 flex flex-col items-center justify-center text-gray-500",children:[r.jsx(oo,{size:28,className:"animate-spin mb-3 text-teal-600"}),r.jsx("p",{className:"text-sm",children:"Loading details..."})]}):s?r.jsxs("form",{onSubmit:E,className:"space-y-3",children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Full Name"}),r.jsx("input",{type:"text",name:"name",required:!0,value:s.name||"",onChange:C,className:"custom-text-input",disabled:p})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Role"}),r.jsx("select",{name:"role",required:!0,value:s.role||"",onChange:C,className:"custom-select-input",disabled:p||j,children:j?r.jsx("option",{value:"",children:"Loading..."}):x.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):x.map(k=>r.jsx("option",{value:k.key,children:k.name},k.key))})]}),r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Email"}),r.jsx("input",{type:"email",name:"email",required:!0,value:s.email||"",onChange:C,className:"custom-text-input",disabled:p})]})]}),s.role==="doctor"&&r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"OPD Fee ()"}),r.jsx("input",{type:"number",name:"opd_fee",value:s.opd_fee||"",onChange:C,className:"custom-text-input",step:"0.01",min:"0",placeholder:"e.g., 500",disabled:p})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[r.jsx("input",{type:"checkbox",id:"staff-active",name:"active",checked:s.active??!0,onChange:C,className:"w-3.5 h-3.5 rounded text-teal-600 focus:ring-teal-500"}),r.jsx("label",{htmlFor:"staff-active",className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:"Account Active"})]}),r.jsxs("div",{className:"staff-modal-footer",children:[r.jsx("button",{type:"button",onClick:n,className:"btn-compact border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:p,children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn-compact bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50",disabled:p,children:[p?r.jsx(oo,{size:16,className:"animate-spin mr-2"}):r.jsx(Wo,{size:16,className:"mr-2"}),p?"Saving...":"Save"]})]})]}):null]})}):null},ZRe=()=>{const[t,e]=v.useState(!0),[n,a]=v.useState([]),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState(null),[T,C]=v.useState(!1),E=(H,K)=>{x({type:H,message:K}),setTimeout(()=>x(null),3e3)},k=H=>{switch(H){case"doctor":return r.jsx(jf,{size:14,className:"text-blue-600"});case"receptionist":return r.jsx(eq,{size:14,className:"text-green-600"});case"pharmacy":return r.jsx($o,{size:14,className:"text-purple-600"});case"lab":return r.jsx(ls,{size:14,className:"text-yellow-600"});default:return r.jsx(dd,{size:14,className:"text-gray-500"})}},P=H=>{switch(H){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},I=v.useCallback(async()=>{e(!0);try{const H=await le("/staff");if(H.ok){const K=await H.json();a(K.map(W=>({...W,id:W._id||W.id})))}}catch(H){console.error("Error fetching staff:",H),E("error","Failed to load staff list")}finally{e(!1)}},[]),R=v.useCallback(async()=>{l(!0);try{const H=await le("/api/clinics/settings");if(H.ok){const K=await H.json();p({admissionCharge:parseFloat(K.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(K.perDayCharge||0).toFixed(2),otherCharges:parseFloat(K.otherCharges||0).toFixed(2),aiMemory:K.aiMemory||"",clinicWideSystemPrompt:K.clinicWideSystemPrompt||"",gemini_api_key:K.gemini_api_key||"",low_stock_threshold:K.low_stock_threshold!==void 0&&K.low_stock_threshold!==null?String(K.low_stock_threshold):"10",name:K.name||"",logoUrl:K.logoUrl||"",labLetterheadUrl:K.labLetterheadUrl||"",upi_id:K.upi_id||"",address:K.address||"",notes:K.notes||"",clinic_id:K.clinic_id,voice_ai_language:K.voice_ai_language||"en-US"})}}catch(H){console.error("Error fetching settings:",H),E("error","Failed to load settings")}finally{l(!1)}},[]);v.useEffect(()=>{I(),R()},[I,R]);const z=H=>{const{name:K,value:W}=H.target;p(B=>({...B,[K]:W}))},q=async()=>{d(!0);try{const H=parseFloat(f.admissionCharge),K=parseFloat(f.perDayCharge),W=parseFloat(f.otherCharges),B=parseInt(f.low_stock_threshold);if((await le("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:f.name,admissionCharge:H,perDayCharge:K,otherCharges:W,aiMemory:f.aiMemory,clinicWideSystemPrompt:f.clinicWideSystemPrompt,gemini_api_key:f.gemini_api_key,low_stock_threshold:B,logoUrl:f.logoUrl,labLetterheadUrl:f.labLetterheadUrl,upi_id:f.upi_id,address:f.address,notes:f.notes,voice_ai_language:f.voice_ai_language})})).ok)E("success","Changes saved successfully");else throw new Error("Failed to save")}catch(H){console.error("Error saving settings:",H),E("error","Failed to save settings")}finally{d(!1)}},F=n.filter(H=>H.name.toLowerCase().includes(i.toLowerCase())||H.role.toLowerCase().includes(i.toLowerCase())),V=async H=>{for(const K of H){const W=document.getElementById(K);W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),W.classList.add("ai-feedback-glow"),await new Promise(B=>setTimeout(B,1500)),W.classList.remove("ai-feedback-glow"))}};return r.jsxs("div",{className:"clinic-hub-container",children:[r.jsxs("header",{className:"clinic-hub-header",children:[r.jsxs("div",{className:"clinic-hub-title",children:[r.jsx("h1",{children:"Clinic Hub"}),r.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),r.jsxs("div",{className:"clinic-hub-actions",children:[g&&r.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${g.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.message}),r.jsxs("button",{className:"btn-add-staff",onClick:()=>j(!0),children:[r.jsx(Vn,{size:16})," Add Staff"]}),r.jsxs("button",{className:"btn-save-changes",onClick:q,disabled:c,children:[r.jsx(cs,{size:16})," ",c?"Saving...":"Save Changes"]})]})]}),r.jsxs("main",{className:"clinic-hub-content",children:[r.jsxs("div",{className:"team-directory-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Os,{size:18,className:"text-gray-500"}),r.jsxs("span",{className:"panel-title",children:["Team Directory (",n.length,")"]})]}),r.jsx("div",{className:"search-container",children:r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{size:16,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:i,onChange:H=>s(H.target.value)})]})}),r.jsx("div",{className:"team-list",children:t?r.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map(H=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(te,{variant:"circular",width:40,height:40}),r.jsxs("div",{className:"flex-1",children:[r.jsx(te,{width:120,height:16,className:"mb-1"}),r.jsx(te,{width:80,height:12})]})]},H))}):F.length===0?r.jsx("div",{className:"empty-state",children:"No staff found."}):F.map(H=>r.jsxs("div",{id:`staff-member-${H.id}`,className:"team-member-item",children:[r.jsx("div",{className:`member-avatar ${P(H.role)}`,children:H.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"member-info",children:[r.jsx("div",{className:"member-name",children:H.name}),r.jsxs("div",{className:"member-role",children:[k(H.role),H.role]})]}),r.jsx("span",{className:`member-status ${H.active?"status-active":"status-inactive"}`,children:H.active?"Active":"Inactive"}),r.jsx("button",{className:"btn-edit-member",onClick:()=>_(H.id),children:r.jsx(Bi,{size:16})})]},H.id))})]}),r.jsxs("div",{className:"config-console-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Gz,{size:18,className:"text-gray-500"}),r.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),o?r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):r.jsxs("div",{className:"config-content",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Kz,{size:16})," CLINIC IDENTITY & LOCATION"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Clinic Name"}),r.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:f.name,onChange:z})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Logo URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:f.logoUrl,onChange:z})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:f.labLetterheadUrl,onChange:z})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Address"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:f.address,onChange:z})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(cd,{size:16})," FINANCIAL OPERATIONS"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Admission Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:f.admissionCharge,onChange:z})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Per Day Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:f.perDayCharge,onChange:z})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Other Charges ()"}),r.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:f.otherCharges,onChange:z})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"UPI ID"}),r.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:f.upi_id,onChange:z})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(HD,{size:16})," INVENTORY & AI"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:f.low_stock_threshold,onChange:z})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Voice AI Language"}),r.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:f.voice_ai_language,onChange:H=>p(K=>({...K,voice_ai_language:H.target.value})),children:[r.jsx("option",{value:"en-US",children:"English"}),r.jsx("option",{value:"hi-IN",children:"Hindi"}),r.jsx("option",{value:"te-IN",children:"Telugu"}),r.jsx("option",{value:"bn-IN",children:"Bengali"}),r.jsx("option",{value:"mr-IN",children:"Marathi"}),r.jsx("option",{value:"ta-IN",children:"Tamil"}),r.jsx("option",{value:"gu-IN",children:"Gujarati"}),r.jsx("option",{value:"kn-IN",children:"Kannada"}),r.jsx("option",{value:"ml-IN",children:"Malayalam"}),r.jsx("option",{value:"pa-IN",children:"Punjabi"}),r.jsx("option",{value:"es-ES",children:"Spanish"}),r.jsx("option",{value:"fr-FR",children:"French"}),r.jsx("option",{value:"de-DE",children:"German"}),r.jsx("option",{value:"it-IT",children:"Italian"}),r.jsx("option",{value:"pt-PT",children:"Portuguese"}),r.jsx("option",{value:"ru-RU",children:"Russian"}),r.jsx("option",{value:"ja-JP",children:"Japanese"}),r.jsx("option",{value:"ko-KR",children:"Korean"}),r.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),r.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Gemini API Key"}),r.jsx("input",{type:"password",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:f.gemini_api_key,onChange:z,placeholder:"******************"})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),r.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:f.clinicWideSystemPrompt,onChange:z,placeholder:"Instructions for the AI..."})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),r.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:f.aiMemory,onChange:z,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),T&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:r.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:r.jsx(JH,{onClose:()=>C(!1),settings:f,staffList:n,onSettingsUpdate:R,onStaffUpdate:I,onHighlight:V})})}),r.jsx(XRe,{isOpen:b,onClose:()=>j(!1),onStaffAdded:I,clinicId:f.clinic_id,fetchWithAuth:le}),r.jsx(JRe,{staffId:S,isOpen:!!S,onClose:()=>_(null),onStaffUpdated:I,fetchWithAuth:le})]})},e4e="_container_13uqm_121",t4e="_header_13uqm_141",n4e="_title_13uqm_187",r4e="_controls_13uqm_203",a4e="_dateInputGroup_13uqm_231",i4e="_dateInputLabel_13uqm_255",s4e="_dateInput_13uqm_231",o4e="_section_13uqm_297",l4e="_sectionTitle_13uqm_325",c4e="_statsGrid_13uqm_351",u4e="_statCard_13uqm_365",d4e="_statTitle_13uqm_397",h4e="_statValue_13uqm_415",f4e="_statSubtitle_13uqm_431",p4e="_revenueGrid_13uqm_443",m4e="_revenueCard_13uqm_469",g4e="_revenueCardTitle_13uqm_485",y4e="_revenueCardList_13uqm_505",x4e="_revenueCardListItem_13uqm_517",v4e="_tableContainer_13uqm_557",b4e="_table_13uqm_557",j4e="_textRight_13uqm_639",w4e="_textGreen_13uqm_647",N4e="_textRed_13uqm_655",S4e="_loadingContainer_13uqm_673",_4e="_errorAlert_13uqm_693",C4e="_backButton_13uqm_759",T4e="_chartsGrid_13uqm_797",k4e="_chartCard_13uqm_823",A4e="_chartWrapper_13uqm_873",at={container:e4e,header:t4e,title:n4e,controls:r4e,dateInputGroup:a4e,dateInputLabel:i4e,dateInput:s4e,section:o4e,sectionTitle:l4e,statsGrid:c4e,statCard:u4e,statTitle:d4e,statValue:h4e,statSubtitle:f4e,revenueGrid:p4e,revenueCard:m4e,revenueCardTitle:g4e,revenueCardList:y4e,revenueCardListItem:x4e,tableContainer:v4e,table:b4e,textRight:j4e,textGreen:w4e,textRed:N4e,loadingContainer:S4e,errorAlert:_4e,backButton:C4e,chartsGrid:T4e,chartCard:k4e,chartWrapper:A4e},$B=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],QA=({active:t,payload:e,label:n})=>t&&e&&e.length?r.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-800",children:n}),e.map((a,i)=>r.jsxs("p",{style:{color:a.color},className:"text-sm",children:[a.name,": ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a.value)]},i))]}):null,E4e=()=>{const t=Ft(),e=zr(),n=new URLSearchParams(e.search),a=n.get("startDate"),i=n.get("endDate"),s=new Date().toISOString().split("T")[0],[o,l]=v.useState(a||s),[c,d]=v.useState(i||s),[f,p]=v.useState(!1),[g,x]=v.useState(null),{setAnalysisDateRange:b,analysisDateRange:j,setAnalysisData:S,registerAnalysisNavigator:_,registerAnalysisRefresher:T}=zN(),[C,E]=v.useState(0),[k,P]=v.useState(0),[I,R]=v.useState(0),[z,q]=v.useState(null),[F,V]=v.useState(null),[H,K]=v.useState(null),[W,B]=v.useState({reception:{},pharmacy:{},lab:{},dental:{}}),[G,ee]=v.useState(0),[X,$]=v.useState(null),[ce,xe]=v.useState([]),[Y,Re]=v.useState(null),[$e,ze]=v.useState(null),[Le,oe]=v.useState(null),[Se,Ve]=v.useState([]),[Ae,ue]=v.useState(null),[Te,se]=v.useState(0),be=v.useCallback(async(ge,de)=>{p(!0),x(null);const ae=ge||o,ne=de||c;if(E(0),P(0),R(0),q(null),V(null),K(null),B({reception:{},pharmacy:{},lab:{},dental:{}}),Re(null),Re(null),ee(0),$(null),xe([]),ze(null),oe(null),Ve([]),ue(null),se(0),!ae||!ne){x("Please select both start and end dates."),p(!1);return}try{const ie=Dde(),[je,Ee,Q,ye,me,he]=await Promise.all([le(`/api/bills?startDate=${o}&endDate=${c}&limit=10000`),le(`/api/payment/admission?startDate=${o}&endDate=${c}`),le(`/api/subscriptions/transactions/manual?startDate=${o}&endDate=${c}`),le(`/api/patient-debts/collections/analysis?startDate=${o}&endDate=${c}`),ie?le(`/api/inventory/comprehensive-analysis?startDate=${o}&endDate=${c}&clinicId=${ie}`):Promise.resolve(null),le(`/api/distributors/payments/analysis?startDate=${o}&endDate=${c}`)]);if(je.ok&&Ee.ok&&Q.ok){const De=await je.json(),nt=await Ee.json(),Fe=await Q.json(),Ge=De.bills||[],it=nt.admissionPayments||[],wt=Fe||[];let we={totalRevenue:0,totalCashCollected:0,revenueByType:{consultation:0,pharmacy:0,lab:0,dental:0,other:0},cashByMode:{},revenueByMode:{},detailedRevenue:{reception:{},pharmacy:{},lab:{},dental:{}},dailyRevenue:new Map,pharmacyReturns:0,discountByType:{reception:0,pharmacy:0,lab:0,dental:0,other:0},byUser:{}};const Qe=new Map,Xe=new Set;let ct=0,Ct=0,bt=0,ke=0;const ot=(vt,Dt)=>{const Vt=vt.split("T")[0];we.dailyRevenue.set(Vt,(we.dailyRevenue.get(Vt)||0)+Dt)},Tt=(vt,Dt,Vt,Yn,vr=!0)=>{const za=Dt.toLowerCase()==="credit";vr&&(we.totalRevenue+=vt,we.revenueByType.hasOwnProperty(Vt)?we.revenueByType[Vt]+=vt:we.revenueByType.other=(we.revenueByType.other||0)+vt,ot(Yn,vt),we.revenueByMode[Dt]=(we.revenueByMode[Dt]||0)+vt),za||(we.totalCashCollected+=vt,we.cashByMode[Dt]=(we.cashByMode[Dt]||0)+vt),vr&&(Vt==="pharmacy"?we.detailedRevenue.pharmacy[Dt]=(we.detailedRevenue.pharmacy[Dt]||0)+vt:Vt==="lab"?we.detailedRevenue.lab[Dt]=(we.detailedRevenue.lab[Dt]||0)+vt:Vt==="dental"?we.detailedRevenue.dental[Dt]=(we.detailedRevenue.dental[Dt]||0)+vt:Vt!=="debt"&&(we.detailedRevenue.reception[Dt]=(we.detailedRevenue.reception[Dt]||0)+vt)),Vt==="debt"&&(we.detailedRevenue.debt=we.detailedRevenue.debt||{},we.detailedRevenue.debt[Dt]=(we.detailedRevenue.debt[Dt]||0)+vt)};if(Ge.forEach(vt=>{var Dt,Vt,Yn,vr,za,Xr;if(vt.status==="paid"||vt.type==="pharmacy_return"){let wa=parseFloat(vt.amount.toString()),pn=vt.type||"other";if(pn==="pharmacy_return"&&(we.pharmacyReturns+=wa,pn="pharmacy"),vt.split_payments&&Array.isArray(vt.split_payments)&&vt.split_payments.length>0)vt.split_payments.forEach(Rn=>{const et=parseFloat(Rn.amount.toString()),gt=Rn.method||"Unknown",St=gt.toLowerCase()==="credit";we.totalRevenue+=et,we.revenueByType.hasOwnProperty(pn)?we.revenueByType[pn]+=et:we.revenueByType.other=(we.revenueByType.other||0)+et,ot(vt.createdAt,et),we.revenueByMode[gt]=(we.revenueByMode[gt]||0)+et,St||(we.totalCashCollected+=et,we.cashByMode[gt]=(we.cashByMode[gt]||0)+et),pn==="pharmacy"?we.detailedRevenue.pharmacy[gt]=(we.detailedRevenue.pharmacy[gt]||0)+et:pn==="lab"?we.detailedRevenue.lab[gt]=(we.detailedRevenue.lab[gt]||0)+et:pn==="dental"?we.detailedRevenue.dental[gt]=(we.detailedRevenue.dental[gt]||0)+et:we.detailedRevenue.reception[gt]=(we.detailedRevenue.reception[gt]||0)+et});else{const Rn=vt.payment_mode||"Unknown";Tt(wa,Rn,pn,vt.createdAt,!0)}let qr=0;if(vt.items&&Array.isArray(vt.items)&&(qr=vt.items.reduce((Rn,et)=>{const gt=et.discount_percentage||0;if(gt>0&&gt<100){const Ot=(et.total||et.total_price||0)*(gt/(100-gt));return Rn+Ot}return Rn},0)),qr>0){pn==="pharmacy"?we.discountByType.pharmacy+=qr:pn==="lab"?we.discountByType.lab+=qr:pn==="dental"?we.discountByType.dental+=qr:pn==="consultation"||pn==="other"?we.discountByType.reception+=qr:we.discountByType.other+=qr;const Rn=vt.created_by||((Dt=vt.Creator)==null?void 0:Dt.id)||"unknown";if(Rn!=="unknown"){const et=((Vt=vt.Creator)==null?void 0:Vt.name)||"Unknown User",gt=((Yn=vt.Creator)==null?void 0:Yn.role)||"unknown";we.byUser[Rn]||(we.byUser[Rn]={id:Rn,name:et,role:gt,revenue:0,cashFlow:0,discount:0}),we.byUser[Rn].discount+=qr}}const Tn=vt.created_by||((vr=vt.Creator)==null?void 0:vr.id)||"unknown";if(Tn!=="unknown"){const Rn=((za=vt.Creator)==null?void 0:za.name)||"Unknown User",et=((Xr=vt.Creator)==null?void 0:Xr.role)||"unknown";if(we.byUser[Tn]||(we.byUser[Tn]={id:Tn,name:Rn,role:et,revenue:0,cashFlow:0,discount:0}),we.byUser[Tn].revenue+=wa,!(vt.payment_mode==="credit"||vt.payment_mode==="no_cash_insurance")){let St=0;vt.split_payments&&vt.split_payments.length>0?vt.split_payments.forEach(Ot=>{Ot.method!=="credit"&&Ot.method!=="no_cash_insurance"&&(St+=parseFloat(Ot.amount.toString()))}):St=wa,we.byUser[Tn].cashFlow+=St}}if(vt.Patient){const Rn=vt.Patient.id,et=new Date(vt.Patient.createdAt||"2000-01-01")>=new Date(ae);et?bt+=wa:ke+=wa,Xe.has(Rn)||(Xe.add(Rn),et?ct++:Ct++)}vt.items&&Array.isArray(vt.items)&&vt.items.forEach(Rn=>{if(Rn.name){const et=Qe.get(Rn.name)||{count:0,revenue:0},gt=parseFloat((Rn.quantity||0).toString()),St=parseFloat((Rn.total||Rn.total_price||0).toString());Qe.set(Rn.name,{count:et.count+gt,revenue:et.revenue+St})}})}}),it.forEach(vt=>{Tt(parseFloat(vt.amount_paid.toString()),vt.payment_mode||"Unknown","consultation",vt.payment_date,!0)}),wt.forEach(vt=>{var Yn,vr;const Dt=parseFloat(((vr=(Yn=vt.subscriptionPlan)==null?void 0:Yn.price)==null?void 0:vr.toString())??"0"),Vt=vt.subscription_payment_method||"manual";Tt(Dt,Vt,"consultation",vt.subscription_start_date,!0)}),ye.ok){const Dt=(await ye.json()).paymentModeBreakdown||{};Object.entries(Dt).forEach(([Vt,Yn])=>{const vr=Number(Yn);Tt(vr,Vt,"debt","",!1)})}P(we.totalCashCollected),E(we.totalRevenue),R(we.pharmacyReturns),q(we.cashByMode),V(we.revenueByMode),K(we.revenueByType),B(we.detailedRevenue),ze(we.discountByType);const Ue=Object.values(we.byUser).sort((vt,Dt)=>Dt.revenue-vt.revenue);oe(Ue),ue({newPatients:ct,returningPatients:Ct,newPatientRevenue:bt,returningPatientRevenue:ke});const jt=Array.from(Qe.entries()).map(([vt,Dt])=>({name:vt,...Dt})).sort((vt,Dt)=>Dt.count-vt.count).slice(0,10);Ve(jt);const kt=Ge.length>0?we.totalRevenue/Ge.length:0;if(se(kt),he&&he.ok){const vt=await he.json();ee(vt.totalPaid||0),$(vt.paymentModeBreakdown||{})}const Kn=Array.from(we.dailyRevenue.entries()).sort((vt,Dt)=>new Date(vt[0]).getTime()-new Date(Dt[0]).getTime()).map(([vt,Dt])=>({date:vt,amount:Dt}));xe(Kn)}if(me&&me.ok){const De=await me.json();Re(De)}}catch(ie){console.error("Analysis Fetch Error:",ie),x("Failed to fetch analysis data. Please try again.")}finally{p(!1)}},[o,c]);v.useEffect(()=>{_(ge=>{const de=`analysis-${ge}`,ae=document.getElementById(de);ae&&(ae.scrollIntoView({behavior:"smooth",block:"center"}),ae.classList.add("ai-highlight-glow"),setTimeout(()=>ae.classList.remove("ai-highlight-glow"),2e3))})},[_]),v.useEffect(()=>{T(async()=>(await be(),null))},[T,be]),v.useEffect(()=>{if(j.startDate&&j.endDate){const ge=j.startDate.toISOString().split("T")[0],de=j.endDate.toISOString().split("T")[0];(ge!==o||de!==c)&&(l(ge),d(de))}},[j]),v.useEffect(()=>{const ge=new URLSearchParams(e.search),de=ge.get("section"),ae=ge.get("startDate"),ne=ge.get("endDate");if(ae&&ne){l(ae),d(ne);const ie=j.startDate?j.startDate.toISOString().split("T")[0]:null,je=j.endDate?j.endDate.toISOString().split("T")[0]:null;(ie!==ae||je!==ne)&&b({startDate:new Date(ae),endDate:new Date(ne)})}if(de){const ie=`analysis-${de}`;setTimeout(()=>{const je=document.getElementById(ie);je&&(je.scrollIntoView({behavior:"smooth",block:"center"}),je.classList.add("ai-highlight-glow"),setTimeout(()=>je.classList.remove("ai-highlight-glow"),2e3))},500)}},[e.search]),v.useEffect(()=>{be()},[o,c,be]),v.useEffect(()=>{!f&&(k>0||Y)&&S({totalRevenue:C,totalCashFlow:k,totalExpenses:G,netCashFlow:k-G,collectionsBreakdown:z,revenueBreakdown:F,inventoryValue:0,pharmacyRevenue:(H==null?void 0:H.pharmacy)||0,labRevenue:(H==null?void 0:H.lab)||0,dentalRevenue:(H==null?void 0:H.dental)||0,receptionRevenue:((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0),inventorySummary:Y?{totalItemsAnalyzed:Y.pharmacyAnalysis.length,netPositiveItems:Y.pharmacyAnalysis.filter(ge=>ge.net_change>0).length}:null})},[C,k,G,z,F,Y,H,f,S]);const _e=ge=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(ge),Ne=v.useMemo(()=>F?Object.entries(F).map(([ge,de])=>({name:ge,value:de})):[],[F]),Z=v.useMemo(()=>H?[{name:"Consultation",value:H.consultation},{name:"Pharmacy",value:H.pharmacy},{name:"Lab",value:H.lab},{name:"Dental",value:H.dental},{name:"Debt Collections",value:H.debt||0},{name:"Other",value:H.other||0}].filter(ge=>ge.value>0):[],[H]);return r.jsxs("div",{className:at.container,children:[r.jsxs("div",{className:at.header,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:at.backButton,title:"Go Back",children:[r.jsx(sn,{size:20})," Back"]}),r.jsx("h1",{className:at.title,children:"Analysis Dashboard"})]}),r.jsxs("div",{className:at.controls,children:[r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"From:"}),r.jsx("input",{type:"date",className:at.dateInput,value:o,onChange:ge=>{l(ge.target.value),c&&b({startDate:new Date(ge.target.value),endDate:new Date(c)})}})]}),r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"To:"}),r.jsx("input",{type:"date",className:at.dateInput,value:c,onChange:ge=>{d(ge.target.value),o&&b({startDate:new Date(o),endDate:new Date(ge.target.value)})}})]})]})]}),g&&r.jsxs("div",{className:at.errorAlert,children:[r.jsx(Br,{size:20}),r.jsx("span",{children:g})]}),!f&&r.jsxs("div",{children:[r.jsxs("section",{className:at.section,id:"analysis-expenses",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(xw,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Cash Flow Analysis"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Cash Inflow"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-success)"},children:_e(k)}),r.jsx("div",{className:at.statSubtitle,children:"Collections (Cash, UPI, etc.)"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Expenses"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-danger)"},children:_e(G)}),r.jsx("div",{className:at.statSubtitle,children:"Distributor Payments"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Net Cash Flow"}),r.jsx("div",{className:at.statValue,style:{color:k-G>=0?"var(--accent-success)":"var(--accent-danger)"},children:_e(k-G)}),r.jsx("div",{className:at.statSubtitle,children:"Inflow - Outflow"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Avg. Bill Value"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:_e(Te)}),r.jsx("div",{className:at.statSubtitle,children:"Per Visit Average"})]})]}),r.jsxs("div",{className:at.revenueGrid,style:{marginTop:"1rem"},children:[z&&Object.keys(z).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Collections Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(z).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]}),X&&Object.keys(X).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Expense Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(X).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]})]})]}),r.jsxs("section",{className:at.section,id:"analysis-financial",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(cd,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Financial Performance"})]}),r.jsx("div",{className:at.statsGrid,children:r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Revenue Generated"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:_e(C)}),r.jsx("div",{className:at.statSubtitle,children:"Billings & Services (Accrual)"})]})}),r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{children:"Revenue Trend (Daily)"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(ow,{width:"100%",height:300,children:r.jsxs(FPe,{data:ce,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"var(--accent-primary)",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"var(--accent-primary)",stopOpacity:.05})]})}),r.jsx(yb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(qc,{dataKey:"date",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Uc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:ge=>`${ge/1e3}k`}),r.jsx(Ii,{content:r.jsx(QA,{})}),r.jsx(Cd,{type:"monotone",dataKey:"amount",stroke:"var(--accent-primary)",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Payment Method Distribution"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(ow,{width:"100%",height:300,children:r.jsxs(WH,{children:[r.jsx(Vl,{data:Ne,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:Ne.map((ge,de)=>r.jsx(zb,{fill:$B[de%$B.length]},`cell-${de}`))}),r.jsx(Ii,{content:r.jsx(QA,{})}),r.jsx(Dc,{verticalAlign:"bottom",height:36,formatter:ge=>r.jsx("span",{style:{color:"var(--text-primary)"},children:ge})})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Revenue by Source"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(ow,{width:"100%",height:300,children:r.jsxs(GH,{data:Z,children:[r.jsx(yb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(qc,{dataKey:"name",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Uc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:ge=>`${ge/1e3}k`}),r.jsx(Ii,{content:r.jsx(QA,{}),cursor:{fill:"var(--bg-primary)"}}),r.jsx(_d,{dataKey:"value",fill:"var(--accent-success)",radius:[4,4,0,0]})]})})})]})]}),W&&r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(wE,{style:{color:"var(--text-secondary)"},size:20}),r.jsx("h3",{children:"Detailed Breakdown"})]}),W&&r.jsxs("div",{className:at.revenueGrid,children:[r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:_e(((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0))}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(W.reception).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:_e((H==null?void 0:H.pharmacy)||0)}),I<0&&r.jsxs("div",{className:`${at.textRed} text-sm mb-2`,children:["Returns: ",_e(I)]}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(W.pharmacy).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:_e((H==null?void 0:H.lab)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(W.lab).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:_e((H==null?void 0:H.dental)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(W.dental).map(([ge,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ge}),r.jsx("span",{children:_e(de)})]},ge))})]})]}),$e&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(vJ,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Revenue Lost Due to Discount"})]}),$e.reception>0||$e.pharmacy>0||$e.lab>0||$e.dental>0||$e.other>0?r.jsxs("div",{className:at.revenueGrid,children:[$e.reception>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.reception)})]}),$e.pharmacy>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.pharmacy)})]}),$e.lab>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.lab)})]}),$e.dental>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.dental)})]}),$e.other>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Others"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:_e($e.other)})]}),r.jsxs("div",{className:at.revenueCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Total Revenue Lost"}),r.jsx("div",{className:at.statValue,style:{fontSize:"2rem",color:"var(--accent-danger)",marginBottom:"0"},children:_e($e.reception+$e.pharmacy+$e.lab+$e.dental+$e.other)})]})]}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No discounts applied in this period."})]}),Le&&Le.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(Os,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"User Performance Breakdown"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"User"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Revenue"}),r.jsx("th",{children:"Cash Collected"}),r.jsx("th",{children:"Discount Given"})]})}),r.jsx("tbody",{children:Le.map(ge=>r.jsxs("tr",{children:[r.jsx("td",{children:ge.name}),r.jsx("td",{style:{textTransform:"capitalize"},children:ge.role}),r.jsx("td",{style:{color:"var(--accent-success)"},children:_e(ge.revenue)}),r.jsx("td",{children:_e(ge.cashFlow)}),r.jsx("td",{style:{color:"var(--accent-warning)"},children:_e(ge.discount)})]},ge.id))})]})})]}),Ae&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(Os,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"Patient Analytics"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"New Patients"}),r.jsx("div",{className:at.statValue,children:Ae.newPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-success)"},children:[_e(Ae.newPatientRevenue)," Rev"]})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Returning"}),r.jsx("div",{className:at.statValue,children:Ae.returningPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-primary)"},children:[_e(Ae.returningPatientRevenue)," Rev"]})]})]})]}),Se.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(ud,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Top Performing Items"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Quantity Sold"}),r.jsx("th",{children:"Revenue Generated"})]})}),r.jsx("tbody",{children:Se.map((ge,de)=>r.jsxs("tr",{children:[r.jsx("td",{children:ge.name}),r.jsx("td",{children:ge.count}),r.jsx("td",{style:{color:"var(--accent-success)"},children:_e(ge.revenue)})]},de))})]})})]})]}),r.jsxs("section",{className:at.section,id:"analysis-inventory",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(ud,{style:{color:"var(--accent-success)"},size:24}),r.jsx("h2",{children:"Inventory Movement"})]}),Y&&Y.pharmacyAnalysis.length>0?r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Stock In"}),r.jsx("th",{children:"Stock Out"}),r.jsx("th",{children:"Net Change"}),r.jsx("th",{className:at.textRight,children:"Est. Revenue"}),r.jsx("th",{className:at.textRight,children:"Est. Profit"})]})}),r.jsx("tbody",{children:Y.pharmacyAnalysis.map(ge=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600},children:ge.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:ge.supplier})]}),r.jsxs("td",{className:at.textGreen,children:["+",ge.quantity_in,Object.entries(ge.quantity_in_by_reason).map(([de,ae])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[de,": ",ae]},de))]}),r.jsxs("td",{className:at.textRed,children:["-",ge.quantity_out,Object.entries(ge.quantity_out_by_reason).map(([de,ae])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[de,": ",ae]},de))]}),r.jsx("td",{children:r.jsxs("span",{style:{fontWeight:600},className:ge.net_change>=0?at.textGreen:at.textRed,children:[ge.net_change>0?"+":"",ge.net_change]})}),r.jsx("td",{className:at.textRight,children:_e(ge.revenue)}),r.jsx("td",{className:`${at.textRight} ${ge.profit>=0?at.textGreen:at.textRed}`,children:_e(ge.profit)})]},ge.drug_id))})]})}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No inventory movement recorded for this period."})]})]}),f&&r.jsxs("div",{className:at.loadingContainer,style:{display:"block"},children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:200,height:24})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"80%",height:32}),r.jsx(te,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"80%",height:32}),r.jsx(te,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"80%",height:32}),r.jsx(te,{width:"40%",height:16})]})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx(te,{width:180,height:24,className:"mb-4"}),r.jsx(te,{width:"100%",height:250})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(te,{width:180,height:24,className:"mb-4"}),r.jsx(te,{width:"100%",height:200,variant:"circular",style:{margin:"0 auto"}})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(te,{width:180,height:24,className:"mb-4"}),r.jsx(te,{width:"100%",height:250})]})]})})]})]})},P4e=()=>{const t=Ft(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState({name:"",description:"",columns:[]}),g=async()=>{i(!0);try{const C=await le("/api/custom-tables");if(!C.ok)throw new Error("Failed to fetch tables");const E=await C.json();n(E)}catch(C){s(C.message)}finally{i(!1)}};v.useEffect(()=>{g()},[]);const x=C=>{C?(d(C),p({name:C.name,description:C.description,columns:[...C.columns]})):(d(null),p({name:"",description:"",columns:[]})),l(!0)},b=async()=>{try{const C=c?`/api/custom-tables/${c.id}`:"/api/custom-tables";if(!(await le(C,{method:c?"PUT":"POST",body:JSON.stringify(f)})).ok)throw new Error("Failed to save table");l(!1),g()}catch(C){alert(C.message)}},j=async C=>{if(confirm("Are you sure? This will delete all data in this table!"))try{await le(`/api/custom-tables/${C}`,{method:"DELETE"}),g()}catch(E){alert(E.message)}},S=()=>{p(C=>({...C,columns:[...C.columns,{key:`col_${Date.now()}`,label:"New Column",type:"text"}]}))},_=(C,E,k)=>{const P=[...f.columns];P[C]={...P[C],[E]:k},E==="label"&&(P[C].key=k.toLowerCase().replace(/[^a-z0-9]/g,"_")),p(I=>({...I,columns:P}))},T=C=>{p(E=>({...E,columns:E.columns.filter((k,P)=>P!==C)}))};return r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("h1",{children:[r.jsx(Db,{size:24})," Custom Tables Manager"]}),r.jsxs("button",{className:"primary-button",onClick:()=>x(),children:[r.jsx(Vn,{size:16})," Create New Table"]})]}),a?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"tables-grid",children:e.map(C=>r.jsxs("div",{className:"table-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:C.name}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>x(C),children:r.jsx(Bi,{size:16})}),r.jsx("button",{onClick:()=>j(C.id),className:"danger",children:r.jsx(Wn,{size:16})})]})]}),r.jsx("p",{className:"description",children:C.description||"No description"}),r.jsxs("div",{className:"column-preview",children:[C.columns.length," columns defined"]}),r.jsx("button",{className:"secondary-button",onClick:()=>t(`/custom-tables/${C.id}`),children:"View Data & Records"})]},C.id))}),o&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:c?"Edit Table":"Create New Table"}),r.jsx("button",{onClick:()=>l(!1),children:r.jsx(Lt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Table Name"}),r.jsx("input",{value:f.name,onChange:C=>p({...f,name:C.target.value}),placeholder:"e.g., Equipment Log"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value})})]}),r.jsxs("div",{className:"columns-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h3",{children:"Columns"}),r.jsx("button",{onClick:S,className:"icon-button",children:r.jsx(Vn,{size:16})})]}),f.columns.map((C,E)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{value:C.label,onChange:k=>_(E,"label",k.target.value),placeholder:"Column Name"}),r.jsxs("select",{value:C.type,onChange:k=>_(E,"type",k.target.value),children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>T(E),className:"danger",children:r.jsx(Wn,{size:14})})]},E))]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:b,className:"primary-button",children:"Save Table"})})]})})]})},D4e=()=>{const{id:t}=$a(),e=Ft(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState(!1),[b,j]=v.useState(null),[S,_]=v.useState({});v.useEffect(()=>{t&&T()},[t]);const T=async()=>{l(!0);try{const I=await le(`/api/custom-tables/${t}`);if(!I.ok)throw new Error("Failed to fetch table definition");const R=await I.json();a(R);const z=await le(`/api/custom-tables/${t}/records`);if(!z.ok)throw new Error("Failed to fetch records");const q=await z.json();s(q)}catch(I){d(I.message)}finally{l(!1)}},C=I=>{I?(j(I),_({...I.data})):(j(null),_({})),x(!0)},E=async()=>{try{const I=b?`/api/custom-tables/records/${b.id}`:`/api/custom-tables/${t}/records`;if(!(await le(I,{method:b?"PUT":"POST",body:JSON.stringify({data:S})})).ok)throw new Error("Failed to save record");x(!1),T()}catch(I){alert(I.message)}},k=async I=>{if(confirm("Delete this record?"))try{await le(`/api/custom-tables/records/${I}`,{method:"DELETE"}),T()}catch(R){alert(R.message)}},P=I=>{const R=S[I.key]||"";switch(I.type){case"boolean":return r.jsxs("select",{value:R,onChange:z=>_({...S,[I.key]:z.target.value}),children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"true",children:"Yes"}),r.jsx("option",{value:"false",children:"No"})]});case"number":return r.jsx("input",{type:"number",value:R,onChange:z=>_({...S,[I.key]:z.target.value})});case"date":return r.jsx("input",{type:"date",value:R,onChange:z=>_({...S,[I.key]:z.target.value})});default:return r.jsx("input",{type:"text",value:R,onChange:z=>_({...S,[I.key]:z.target.value})})}};return o?r.jsx("div",{className:"p-4",children:"Loading..."}):c||!n?r.jsxs("div",{className:"p-4 error",children:["Error: ",c||"Table not found"]}):r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[r.jsx("button",{onClick:()=>e("/custom-tables"),className:"icon-button",children:r.jsx(sn,{size:20})}),r.jsx("h1",{children:n.name})]}),r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>p(!1),className:`view-mode-btn ${f?"":"active"}`,title:"List View",children:[r.jsx(Pb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>p(!0),className:`view-mode-btn ${f?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(vf,{size:18})," Excel"]})]}),r.jsxs("button",{className:"primary-button",onClick:()=>C(),children:[r.jsx(Vn,{size:16})," Add Record"]})]}),r.jsx("div",{className:"table-wrapper",style:{background:"var(--bg-card)",borderRadius:"12px",padding:"20px",overflowX:"auto"},children:f?r.jsx($b,{columns:n.columns.map(I=>({key:I.key,label:I.label,editable:!0,type:I.type})),data:i.map(I=>({...I.data,id:I.id})),editable:!0,showRowNumbers:!0,title:n.name,onSave:async I=>{const R=I.map(async z=>{const q=i.find(F=>F.id===z.id);if(q&&JSON.stringify(q.data)!==JSON.stringify(z)){const{id:F,...V}=z;if(JSON.stringify(q.data)!==JSON.stringify(V))return le(`/api/custom-tables/records/${z.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:V})})}});try{await Promise.all(R),T()}catch(z){alert("Error saving changes"),console.error(z)}}}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[n.columns.map(I=>r.jsx("th",{style:{textAlign:"left",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:I.label},I.key)),r.jsx("th",{style:{width:"100px",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:n.columns.length+1,style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"No records yet"})}):i.map(I=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.columns.map(R=>r.jsx("td",{style:{padding:"12px"},children:R.type==="boolean"?I.data[R.key]==="true"?"Yes":"No":String(I.data[R.key]||"-")},R.key)),r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>C(I),className:"icon-button",children:r.jsx(Bi,{size:16})}),r.jsx("button",{onClick:()=>k(I.id),className:"icon-button",style:{color:"#dc3545"},children:r.jsx(Wn,{size:16})})]})})]},I.id))})]})}),g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:b?"Edit Record":"Add New Record"}),r.jsx("button",{onClick:()=>x(!1),children:r.jsx(Lt,{size:20})})]}),r.jsx("div",{className:"modal-body",children:n.columns.map(I=>r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:I.label}),P(I)]},I.key))}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:E,className:"primary-button",children:"Save Record"})})]})})]})},O4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(""),o=Ft();v.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await le("/api/dashboards");if(p.ok){const g=await p.json();e(g)}}catch(p){console.error("Error fetching dashboards:",p)}finally{a(!1)}},c=async(p,g)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await le(`/api/dashboards/${g}`,{method:"DELETE"}),e(t.filter(x=>x.id!==g))}catch(x){console.error("Error deleting dashboard:",x)}},d=p=>{try{const g=new Date(p);return g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:g.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},f=t.filter(p=>p.name.toLowerCase().includes(i.toLowerCase())||p.description&&p.description.toLowerCase().includes(i.toLowerCase()));return r.jsxs("div",{className:"custom-dashboards-container",children:[r.jsxs("div",{className:"cdp-header",children:[r.jsxs("div",{className:"cdp-title-row",children:[r.jsxs("div",{className:"cdp-title",children:[r.jsx("div",{className:"cdp-icon",children:r.jsx(vf,{size:20})}),r.jsxs("div",{children:[r.jsx("h1",{children:"Custom Dashboards"}),r.jsxs("span",{className:"cdp-subtitle",children:[t.length," dashboard",t.length!==1?"s":""]})]})]}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Vn,{size:16}),r.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),t.length>0&&r.jsxs("div",{className:"cdp-search",children:[r.jsx(En,{size:16}),r.jsx("input",{type:"text",placeholder:"Search dashboards...",value:i,onChange:p=>s(p.target.value)})]})]}),r.jsx("div",{className:"cdp-content",children:n?r.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(p=>r.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx(te,{width:18,height:18,variant:"circular"}),r.jsx(te,{width:80,height:12})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx(te,{width:"70%",height:24,style:{marginBottom:"8px"}}),r.jsx(te,{width:"90%",height:16})]}),r.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[r.jsx(te,{width:60,height:32}),r.jsx(te,{width:60,height:32}),r.jsx(te,{width:32,height:32})]})]},p))}):f.length===0?r.jsxs("div",{className:"cdp-empty",children:[r.jsx("div",{className:"cdp-empty-icon",children:r.jsx(ng,{size:48})}),i?r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No results found"}),r.jsx("p",{children:"Try a different search term"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No dashboards yet"}),r.jsx("p",{children:"Create your first custom dashboard to get started"}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Vn,{size:16})," Create Dashboard"]})]})]}):r.jsx("div",{className:"cdp-grid",children:f.map(p=>r.jsxs("div",{className:"cdp-card",onClick:()=>o(`/dashboards/${p.id}`),children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx("div",{className:"cdp-card-icon",children:r.jsx(ng,{size:18})}),r.jsx("div",{className:"cdp-card-meta",children:p.created_at&&r.jsxs("span",{className:"cdp-card-date",children:[r.jsx(fa,{size:12}),d(p.created_at)]})})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx("h3",{children:p.name}),r.jsx("p",{children:p.description||"No description"})]}),r.jsxs("div",{className:"cdp-card-footer",children:[r.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}`)},children:[r.jsx(Lm,{size:14}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}/edit`)},children:[r.jsx(Bi,{size:14}),r.jsx("span",{children:"Edit"})]}),r.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:g=>c(g,p.id),children:r.jsx(Wn,{size:14})})]})]},p.id))})})]})},M4e=({isOpen:t,onClose:e,onConfirm:n})=>{const[a,i]=v.useState({}),[s,o]=v.useState(""),[l,c]=v.useState(""),[d,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(!1);v.useEffect(()=>{t&&j()},[t]);const j=async()=>{b(!0);try{const I=await le("/api/dashboards/table-relations");if(I.ok){const R=await I.json();i(R);const z=Object.keys(R);z.length>0&&o(z[0])}}catch(I){console.error("Error fetching table relations:",I)}finally{b(!1)}},S=I=>{o(I),c(""),f([]),g([])},_=I=>{c(I),g([])},T=(I,R,z)=>{I.includes(z)?R(I.filter(q=>q!==z)):R([...I,z])},C=()=>{var I,R;if(!s||!l){alert("Please select both primary and related tables");return}if(d.length===0&&p.length===0){alert("Please select at least one column");return}n({primary:s,related:l,primaryColumns:d,relatedColumns:p,primaryLabel:((I=a[s])==null?void 0:I.label)||s,relatedLabel:((R=a[l])==null?void 0:R.label)||l}),e()};if(!t)return null;const E=a[s],k=(E==null?void 0:E.relations)||{},P=a[l];return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content join-builder-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsxs("h3",{children:[r.jsx(Wz,{size:18,style:{marginRight:"6px"}})," Join Tables Builder"]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Lt,{size:18})})]}),r.jsx("div",{className:"join-builder-body",children:x?r.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"var(--text-secondary, #64748b)"},children:"Loading tables..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"join-step-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 1:"})," Select Primary Table"]}),r.jsx("select",{value:s,onChange:I=>S(I.target.value),className:"join-select",children:Object.entries(a).filter(([I,R])=>Object.keys(R.relations).length>0).map(([I,R])=>r.jsx("option",{value:I,children:R.label},I))})]}),s&&Object.keys(k).length>0&&r.jsxs("div",{className:"join-step-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 2:"})," Select Related Table"]}),r.jsxs("select",{value:l,onChange:I=>_(I.target.value),className:"join-select",children:[r.jsx("option",{value:"",children:"-- Select --"}),Object.entries(k).map(([I,R])=>r.jsxs("option",{value:I,children:[R.label," (via ",R.foreignKey,")"]},I))]})]}),s&&E&&r.jsxs("div",{className:"join-step-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",E.label,":"]})}),r.jsx("div",{className:"columns-chip-container",children:E.columns.map(I=>r.jsxs("label",{className:`column-chip-label ${d.includes(I)?"primary-selected":"unselected"}`,children:[r.jsx("input",{type:"checkbox",checked:d.includes(I),onChange:()=>T(d,f,I),style:{display:"none"}}),I]},I))})]}),l&&P&&r.jsxs("div",{className:"join-step-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",P.label,":"]})}),r.jsx("div",{className:"columns-chip-container",children:P.columns.map(I=>r.jsxs("label",{className:`column-chip-label ${p.includes(I)?"related-selected":"unselected"}`,children:[r.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>T(p,g,I),style:{display:"none"}}),I]},I))})]}),(d.length>0||p.length>0)&&r.jsxs("div",{className:"join-preview-box",children:[r.jsx("span",{className:"join-preview-title",children:"Preview Columns:"}),r.jsxs("div",{className:"join-preview-content",children:[d.map(I=>r.jsxs("span",{className:"join-preview-primary",children:[E==null?void 0:E.label,".",I]},I)),p.map(I=>r.jsxs("span",{className:"join-preview-related",children:[P==null?void 0:P.label,".",I]},I))]})]})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"join-btn join-btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{className:"join-btn join-btn-primary",onClick:C,disabled:!l||x,children:"Create Joined Widget"})]})]})})},I4e=({isOpen:t,onClose:e,onCreated:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([{key:"name",label:"Name",type:"text"}]),[d,f]=v.useState(!1),p=()=>{c([...l,{key:"",label:"",type:"text"}])},g=j=>{c(l.filter((S,_)=>_!==j))},x=(j,S,_)=>{const T=[...l];T[j]={...T[j],[S]:_},S==="label"&&!T[j].key&&(T[j].key=_.toLowerCase().replace(/\s+/g,"_")),c(T)},b=async()=>{if(!a.trim()){alert("Table name is required");return}if(l.length===0||l.some(j=>!j.key||!j.label)){alert("All columns must have a key and label");return}f(!0);try{(await le("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,description:s,columns:l})})).ok?(n(),e(),i(""),o(""),c([{key:"name",label:"Name",type:"text"}])):alert("Failed to create table")}catch(j){console.error("Error creating table:",j),alert("Error creating table")}finally{f(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content create-table-modal-content",children:[r.jsxs("div",{className:"create-table-header",children:[r.jsxs("h3",{children:[r.jsx(Db,{size:20})," Create Custom Table"]}),r.jsx("button",{onClick:e,className:"close-btn",children:r.jsx(Lt,{size:20})})]}),r.jsxs("div",{className:"form-content",children:[r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Table Name *"}),r.jsx("input",{type:"text",value:a,onChange:j=>i(j.target.value),placeholder:"e.g., Patient Notes, Appointments",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),placeholder:"Optional description",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Columns"}),r.jsx("div",{className:"columns-container",children:l.map((j,S)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{type:"text",value:j.label,onChange:_=>x(S,"label",_.target.value),placeholder:"Column label",className:"modal-input column-label-input"}),r.jsx("input",{type:"text",value:j.key,onChange:_=>x(S,"key",_.target.value),placeholder:"key",className:"modal-input column-key-input"}),r.jsxs("select",{value:j.type,onChange:_=>x(S,"type",_.target.value),className:"column-type-select",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>g(S),className:"remove-col-btn",disabled:l.length<=1,children:r.jsx(Wn,{size:16})})]},S))}),r.jsxs("button",{onClick:p,className:"add-col-btn",children:[r.jsx(Vn,{size:14})," Add Column"]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:b,disabled:d,className:"create-button",children:d?"Creating...":"Create Table"})]})]})}):null},BB=()=>{const{id:t}=$a(),e=Ft(),n=!!t,[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([]),[d,f]=v.useState(!1),[p,g]=v.useState([]),[x,b]=v.useState(!1),[j,S]=v.useState("stat"),[_,T]=v.useState(""),[C,E]=v.useState("api:patients"),[k,P]=v.useState([]),[I,R]=v.useState(!1),[z,q]=v.useState(!1);v.useEffect(()=>{F(),n&&V()},[t]);const F=async()=>{try{const X=await le("/api/dashboards/data-sources");if(X.ok){const $=await X.json();g($),$.length>0&&E($[0].key)}}catch(X){console.error("Error fetching data sources:",X)}},V=async()=>{try{const X=await le(`/api/dashboards/${t}`);if(X.ok){const $=await X.json();i($.name),o($.description),c($.widgets||[])}}catch(X){console.error("Error fetching dashboard:",X)}},H=async()=>{if(!a.trim())return alert("Name is required");f(!0);try{const X={name:a,description:s,widgets:l},$=n?`/api/dashboards/${t}`:"/api/dashboards";(await le($,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)})).ok?e("/dashboards"):alert("Failed to save dashboard")}catch(X){console.error("Error saving dashboard:",X)}finally{f(!1)}},K=()=>{var ce;const X=p.find(xe=>xe.key===C),$={id:Date.now().toString(),type:j,title:_||(X==null?void 0:X.label)||"New Widget",dataSource:C,config:{columns:k.length>0?k:((ce=X==null?void 0:X.columns)==null?void 0:ce.slice(0,3))||[]}};c([...l,$]),b(!1),T(""),P([])},W=X=>{c(l.filter($=>$.id!==X))},B=X=>{E(X),P([])},G=p.find(X=>X.key===C),ee=X=>{const $={id:Date.now().toString(),type:"table",title:`${X.primaryLabel} + ${X.relatedLabel}`,dataSource:`dynamic:${X.primary}:${X.related}`,config:{primaryColumns:X.primaryColumns,relatedColumns:X.relatedColumns}};c([...l,$])};return r.jsxs("div",{className:"dashboard-builder-container",children:[r.jsxs("div",{className:"builder-header",children:[r.jsxs("button",{className:"back-btn",onClick:()=>e("/dashboards"),children:[r.jsx(sn,{size:16})," Back"]}),r.jsxs("div",{className:"title-inputs",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:a,onChange:X=>i(X.target.value),className:"dashboard-name-input"}),r.jsx("input",{type:"text",placeholder:"Description (Optional)",value:s,onChange:X=>o(X.target.value),className:"dashboard-desc-input"})]}),r.jsxs("button",{className:"primary-button",onClick:H,disabled:d,children:[r.jsx(cs,{size:16})," ",d?"Saving...":"Save Dashboard"]})]}),r.jsx("div",{className:"widgets-area",children:l.length===0?r.jsxs("div",{className:"empty-canvas",children:[r.jsx("p",{children:"Canvas is empty. Add a widget to start."}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"},children:[r.jsxs("button",{onClick:()=>b(!0),className:"add-widget-btn",children:[r.jsx(Vn,{size:16})," Add Widget"]}),r.jsxs("button",{onClick:()=>R(!0),className:"add-widget-btn",style:{background:"#2196F3"},children:[r.jsx(Wz,{size:16})," Create Joined Widget"]}),r.jsxs("button",{onClick:()=>q(!0),className:"add-widget-btn",style:{background:"#4CAF50"},children:[r.jsx(Db,{size:16})," Create Custom Table"]})]})]}):r.jsxs("div",{className:"widgets-grid",children:[l.map(X=>r.jsxs("div",{className:"widget-wrapper",children:[r.jsx("div",{className:"widget-actions-overlay",children:r.jsx("button",{onClick:()=>W(X.id),className:"remove-widget-btn",children:r.jsx(Wn,{size:14})})}),r.jsx(DM,{widget:X})]},X.id)),r.jsxs("div",{className:"add-more-card",onClick:()=>b(!0),children:[r.jsx(Vn,{size:24}),r.jsx("span",{children:"Add Widget"})]})]})}),x&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h3",{children:"Add Widget"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title (Optional)"}),r.jsx("input",{type:"text",placeholder:"Leave blank for auto-title",value:_,onChange:X=>T(X.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type"}),r.jsxs("select",{value:j,onChange:X=>S(X.target.value),children:[r.jsx("option",{value:"stat",children:"Statistic (Count)"}),r.jsx("option",{value:"table",children:"Table (List)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Data Source"}),r.jsxs("select",{value:C,onChange:X=>B(X.target.value),children:[r.jsx("optgroup",{label:"Single Tables",children:p.filter(X=>!X.isCustom&&!X.isJoin).map(X=>r.jsx("option",{value:X.key,children:X.label},X.key))}),p.some(X=>X.isJoin)&&r.jsx("optgroup",{label:"Joined Tables (Multi-Table)",children:p.filter(X=>X.isJoin).map(X=>r.jsx("option",{value:X.key,children:X.label},X.key))}),p.some(X=>X.isCustom)&&r.jsx("optgroup",{label:"Custom Tables",children:p.filter(X=>X.isCustom).map(X=>r.jsx("option",{value:X.key,children:X.label},X.key))})]}),G&&r.jsx("small",{style:{color:"#666"},children:G.description})]}),j==="table"&&(G==null?void 0:G.columns)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Columns to Display (select multiple)"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:G.columns.map(X=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:k.includes(X),onChange:$=>{$.target.checked?P([...k,X]):P(k.filter(ce=>ce!==X))}}),X]},X))})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>b(!1),children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:K,children:"Add"})]})]})}),r.jsx(M4e,{isOpen:I,onClose:()=>R(!1),onConfirm:ee}),r.jsx(I4e,{isOpen:z,onClose:()=>q(!1),onCreated:()=>F()})]})},R4e=()=>{const{id:t}=$a(),e=Ft(),[n,a]=v.useState(null);if(v.useEffect(()=>{(async()=>{try{const o=await le(`/api/dashboards/${t}`);if(o.ok){const l=await o.json();a(l)}}catch(o){console.error("Error fetching dashboard:",o)}})()},[t]),!n)return r.jsx("div",{className:"temp-dash-empty",children:"Loading..."});const i=n.widgets||[];return r.jsxs("div",{className:"saved-dash-container",children:[r.jsxs("div",{className:"saved-dash-header",children:[r.jsxs("div",{className:"saved-dash-title-group",children:[r.jsx("button",{className:"saved-dash-back-btn",onClick:()=>e("/dashboards"),children:r.jsx(sn,{size:16})}),r.jsx("div",{className:"saved-dash-icon",children:r.jsx(ng,{size:16})}),r.jsxs("div",{className:"saved-dash-title-text",children:[r.jsx("h2",{children:n.name}),n.description&&r.jsx("span",{className:"saved-dash-description",children:n.description})]})]}),r.jsx("div",{className:"saved-dash-actions",children:r.jsxs("button",{className:"saved-dash-edit-btn",onClick:()=>e(`/dashboards/${t}/edit`),children:[r.jsx(Bi,{size:12})," Edit"]})})]}),r.jsx("div",{className:"saved-dash-body",children:i.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets in this dashboard. Click Edit to add some!"}):r.jsx("div",{className:"temp-dash-grid",children:i.map((s,o)=>r.jsx(DM,{widget:s,autoHideEmptyColumns:!0},s.id||`view-widget-${o}`))})})]})},XA=["#8b5cf6","#3b82f6","#06b6d4","#10b981","#22c55e","#f59e0b","#f97316","#ef4444","#ec4899","#a855f7"],L4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState({name:"",key:"",color:"#6b7280",description:""}),[g,x]=v.useState(!1),b=async()=>{a(!0),s(null);try{const z=await le("/api/clinic-roles");if(z.ok){const q=await z.json();e(q)}else s("Failed to load roles")}catch{s("Failed to connect to server")}finally{a(!1)}};v.useEffect(()=>{b()},[]);const j=z=>z.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),S=z=>{p(q=>({...q,name:z,key:o?q.key:j(z)}))},_=async()=>{if(f.name.trim()){x(!0);try{const z=await le("/api/clinic-roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),key:f.key||j(f.name),color:f.color,description:f.description.trim()||null})});if(z.ok)await b(),d(!1),p({name:"",key:"",color:"#6b7280",description:""});else{const q=await z.json();s(q.message||"Failed to create role")}}catch{s("Failed to create role")}finally{x(!1)}}},T=async()=>{if(!(!o||!f.name.trim())){x(!0);try{const z=await le(`/api/clinic-roles/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),color:f.color,description:f.description.trim()||null})});if(z.ok)await b(),l(null),p({name:"",key:"",color:"#6b7280",description:""});else{const q=await z.json();s(q.message||"Failed to update role")}}catch{s("Failed to update role")}finally{x(!1)}}},C=async z=>{if(!z.isSystem&&window.confirm(`Delete role "${z.name}"? This cannot be undone.`))try{const q=await le(`/api/clinic-roles/${z.id}`,{method:"DELETE"});if(q.ok)await b();else{const F=await q.json();s(F.message||"Failed to delete role")}}catch{s("Failed to delete role")}},E=z=>{l(z),p({name:z.name,key:z.key,color:z.color,description:z.description||""}),d(!1)},k=()=>{d(!0),l(null),p({name:"",key:"",color:XA[Math.floor(Math.random()*XA.length)],description:""})},P=()=>{d(!1),l(null),p({name:"",key:"",color:"#6b7280",description:""})},I=t.filter(z=>z.isSystem),R=t.filter(z=>!z.isSystem);return r.jsxs("div",{className:"role-management-page",children:[r.jsxs("div",{className:"role-management-header",children:[r.jsxs("div",{className:"header-title",children:[r.jsx(ag,{size:28}),r.jsxs("div",{children:[r.jsx("h1",{children:"Role Management"}),r.jsx("p",{children:"Manage custom roles for your clinic staff"})]})]}),r.jsxs("button",{className:"create-role-btn",onClick:k,disabled:c,children:[r.jsx(Vn,{size:18}),"Create Custom Role"]})]}),i&&r.jsxs("div",{className:"role-error-banner",children:[r.jsx(Br,{size:18}),i,r.jsx("button",{onClick:()=>s(null),children:r.jsx(Lt,{size:16})})]}),(c||o)&&r.jsxs("div",{className:"role-form-card",children:[r.jsx("h3",{children:o?"Edit Role":"Create New Role"}),r.jsxs("div",{className:"role-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Name *"}),r.jsx("input",{type:"text",value:f.name,onChange:z=>S(z.target.value),placeholder:"e.g., Senior Doctor, Ward Nurse"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Key"}),r.jsx("input",{type:"text",value:f.key,onChange:z=>p(q=>({...q,key:z.target.value})),placeholder:"auto-generated",disabled:!!o})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:z=>p(q=>({...q,description:z.target.value})),placeholder:"Brief description of role responsibilities"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx(hJ,{size:14}),"Color"]}),r.jsxs("div",{className:"color-picker",children:[XA.map(z=>r.jsx("button",{className:`color-option ${f.color===z?"selected":""}`,style:{background:z},onClick:()=>p(q=>({...q,color:z}))},z)),r.jsx("input",{type:"color",value:f.color,onChange:z=>p(q=>({...q,color:z.target.value})),className:"custom-color-input"})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"cancel-btn",onClick:P,children:"Cancel"}),r.jsxs("button",{className:"save-btn",onClick:o?T:_,disabled:g||!f.name.trim(),children:[r.jsx(Ds,{size:16}),g?"Saving...":o?"Update Role":"Create Role"]})]})]})]}),r.jsxs("div",{className:"roles-container",children:[r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"System Roles"}),r.jsx("p",{className:"section-desc",children:"Default roles - can be customized but not deleted"}),n?r.jsx("div",{className:"roles-grid",children:[1,2,3].map(z=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",style:{marginBottom:"10px"},children:[r.jsx(te,{variant:"circular",width:12,height:12,style:{marginRight:"8px"}}),r.jsx(te,{width:100,height:20})]}),r.jsx(te,{width:80,height:16,style:{marginBottom:"10px"}}),r.jsx(te,{width:"100%",height:20}),r.jsx("div",{className:"role-actions",style:{marginTop:"15px"},children:r.jsx(te,{width:60,height:24})})]},z))}):r.jsx("div",{className:"roles-grid",children:I.map(z=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:z.color}}),r.jsx("span",{className:"role-name",children:z.name}),r.jsx("span",{className:"system-badge",children:"System"})]}),r.jsx("div",{className:"role-key",children:z.key}),z.description&&r.jsx("div",{className:"role-description",children:z.description}),r.jsx("div",{className:"role-actions",children:r.jsxs("button",{className:"edit-role-btn",onClick:()=>E(z),children:[r.jsx(ao,{size:14}),"Edit"]})})]},z.id))})]}),r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"Custom Roles"}),r.jsx("p",{className:"section-desc",children:"Roles created for your clinic"}),R.length===0?r.jsxs("div",{className:"no-roles",children:[r.jsx(ag,{size:32}),r.jsx("p",{children:"No custom roles created yet"}),r.jsxs("button",{onClick:k,children:[r.jsx(Vn,{size:16}),"Create your first custom role"]})]}):r.jsx("div",{className:"roles-grid",children:R.map(z=>r.jsxs("div",{className:"role-card custom",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:z.color}}),r.jsx("span",{className:"role-name",children:z.name})]}),r.jsx("div",{className:"role-key",children:z.key}),z.description&&r.jsx("div",{className:"role-description",children:z.description}),r.jsxs("div",{className:"role-actions",children:[r.jsxs("button",{className:"edit-role-btn",onClick:()=>E(z),children:[r.jsx(ao,{size:14}),"Edit"]}),r.jsxs("button",{className:"delete-role-btn",onClick:()=>C(z),children:[r.jsx(Wn,{size:14}),"Delete"]})]})]},z.id))})]})]})]})},F4e="_container_16815_47",$4e="_progressBar_16815_67",B4e="_sidebar_16815_97",z4e="_sidebarTitle_16815_161",q4e="_searchBox_16815_193",U4e="_searchInput_16815_203",V4e="_searchIcon_16815_237",H4e="_navSection_16815_255",G4e="_navSectionTitle_16815_263",W4e="_navLink_16815_287",K4e="_activeNavLink_16815_367",Y4e="_navLinkIcon_16815_387",Q4e="_content_16815_409",X4e="_header_16815_425",J4e="_headerContent_16815_493",Z4e="_title_16815_503",e3e="_subtitle_16815_563",t3e="_headerBadges_16815_575",n3e="_headerBadge_16815_575",r3e="_section_16815_625",a3e="_sectionTitle_16815_665",i3e="_sectionTitleIcon_16815_689",s3e="_sectionContent_16815_713",o3e="_featureList_16815_751",l3e="_featureItem_16815_767",c3e="_featureIcon_16815_799",u3e="_featureText_16815_813",d3e="_infoBox_16815_839",h3e="_infoBoxTitle_16815_881",f3e="_infoBoxContent_16815_903",p3e="_workflowList_16815_917",m3e="_kbd_16815_959",g3e="_moduleLinkBtn_16815_1179",y3e="_uiGrid_16815_1231",x3e="_uiCard_16815_1245",v3e="_uiLabel_16815_1277",b3e="_demoBtn_16815_1301",j3e="_demoBtnPrimary_16815_1323",w3e="_demoBtnSecondary_16815_1335",N3e="_demoBtnDanger_16815_1347",S3e="_demoBadge_16815_1361",_3e="_demoBadgeSuccess_16815_1385",C3e="_demoBadgeWarning_16815_1397",T3e="_demoBadgeError_16815_1409",k3e="_iconRow_16815_1421",A3e="_faqList_16815_1455",E3e="_faqItem_16815_1469",P3e="_faqQuestion_16815_1493",D3e="_faqIcon_16815_1523",O3e="_faqIconOpen_16815_1533",M3e="_faqAnswer_16815_1541",I3e="_footer_16815_1587",R3e="_footerText_16815_1605",L3e="_footerBrand_16815_1617",F3e="_floatingParticles_16815_1641",$3e="_particle_16815_1663",B3e="_headerLabel_16815_1817",z3e="_waveEmoji_16815_1845",q3e="_headerActions_16815_1857",U3e="_headerBtn_16815_1871",V3e="_headerBtnSecondary_16815_1913",H3e="_statsSection_16815_1963",G3e="_statCard_16815_1977",W3e="_statIcon_16815_2009",K3e="_statValue_16815_2039",Y3e="_statLabel_16815_2053",Q3e="_quickTipsSection_16815_2073",X3e="_quickTipsHeader_16815_2089",J3e="_tipNav_16815_2123",Z3e="_tipCard_16815_2185",e5e="_tipIcon_16815_2231",t5e="_tipContent_16815_2251",n5e="_tipIndicators_16815_2279",r5e="_tipIndicator_16815_2279",a5e="_tipIndicatorActive_16815_2323",i5e="_shortcutsGrid_16815_2343",s5e="_shortcutCard_16815_2357",o5e="_shortcutCardActive_16815_2383",l5e="_shortcutKeys_16815_2397",c5e="_kbdPlus_16815_2411",u5e="_kbdActive_16815_2423",d5e="_shortcutInfo_16815_2437",h5e="_shortcutAction_16815_2445",f5e="_shortcutDesc_16815_2459",p5e="_fabContainer_16815_3077",m5e="_fabButton_16815_3099",g5e="_fabContent_16815_3141",y5e="_contactRow_16815_3195",x5e="_contactIcon_16815_3213",v5e="_copyBtn_16815_3223",Me={container:F4e,progressBar:$4e,sidebar:B4e,sidebarTitle:z4e,searchBox:q4e,searchInput:U4e,searchIcon:V4e,navSection:H4e,navSectionTitle:G4e,navLink:W4e,activeNavLink:K4e,navLinkIcon:Y4e,content:Q4e,header:X4e,headerContent:J4e,title:Z4e,subtitle:e3e,headerBadges:t3e,headerBadge:n3e,section:r3e,sectionTitle:a3e,sectionTitleIcon:i3e,sectionContent:s3e,featureList:o3e,featureItem:l3e,featureIcon:c3e,featureText:u3e,infoBox:d3e,infoBoxTitle:h3e,infoBoxContent:f3e,workflowList:p3e,kbd:m3e,moduleLinkBtn:g3e,uiGrid:y3e,uiCard:x3e,uiLabel:v3e,demoBtn:b3e,demoBtnPrimary:j3e,demoBtnSecondary:w3e,demoBtnDanger:N3e,demoBadge:S3e,demoBadgeSuccess:_3e,demoBadgeWarning:C3e,demoBadgeError:T3e,iconRow:k3e,faqList:A3e,faqItem:E3e,faqQuestion:P3e,faqIcon:D3e,faqIconOpen:O3e,faqAnswer:M3e,footer:I3e,footerText:R3e,footerBrand:L3e,floatingParticles:F3e,particle:$3e,headerLabel:B3e,waveEmoji:z3e,headerActions:q3e,headerBtn:U3e,headerBtnSecondary:V3e,statsSection:H3e,statCard:G3e,statIcon:W3e,statValue:K3e,statLabel:Y3e,quickTipsSection:Q3e,quickTipsHeader:X3e,tipNav:J3e,tipCard:Z3e,tipIcon:e5e,tipContent:t5e,tipIndicators:n5e,tipIndicator:r5e,tipIndicatorActive:a5e,shortcutsGrid:i5e,shortcutCard:s5e,shortcutCardActive:o5e,shortcutKeys:l5e,kbdPlus:c5e,kbdActive:u5e,shortcutInfo:d5e,shortcutAction:h5e,shortcutDesc:f5e,fabContainer:p5e,fabButton:m5e,fabContent:g5e,contactRow:y5e,contactIcon:x5e,copyBtn:v5e},b5e=(t,e=2e3)=>{const[n,a]=v.useState(0),[i,s]=v.useState(!1),o=v.useRef(null);return v.useEffect(()=>{const l=new IntersectionObserver(([c])=>{c.isIntersecting&&s(!0)},{threshold:.3});return o.current&&l.observe(o.current),()=>l.disconnect()},[]),v.useEffect(()=>{if(!i)return;let l=null;const c=d=>{l||(l=d);const f=Math.min((d-l)/e,1);a(Math.floor(f*t)),f<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[i,t,e]),{count:n,ref:o}},j5e=()=>{const[t,e]=v.useState("getting-started"),[n,a]=v.useState(""),[i,s]=v.useState(0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(0),[g,x]=v.useState(null),b=v.useRef(null),j=v.useCallback(()=>{const R=document.documentElement.scrollHeight-window.innerHeight,z=window.scrollY/R*100;s(Math.min(z,100))},[]);v.useEffect(()=>{const R=()=>{const z=document.querySelectorAll("section[id]");let q="";z.forEach(F=>{const V=F.offsetTop;window.scrollY>=V-120&&(q=F.getAttribute("id")||"")}),q&&e(q),j()};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[j]);const S=R=>{const z=document.getElementById(R);z&&window.scrollTo({top:z.offsetTop-80,behavior:"smooth"})},_={navigation:[{id:"getting-started",label:"Getting Started",icon:OI},{id:"clinical-workflow",label:"Doctor Workflow",icon:tg},{id:"financial-mgmt",label:"Financial Control",icon:cd},{id:"analytics",label:"Analytics & Insights",icon:wE},{id:"pharmacy-inventory",label:"Pharmacy & Stock",icon:ud},{id:"advanced-lab",label:"Advanced Lab Mgmt",icon:ls},{id:"ipd-admission",label:"IPD & Admission",icon:jf},{id:"custom-data",label:"System Customization",icon:vf},{id:"admin",label:"Administration",icon:dd}],reference:[{id:"ui-reference",label:"Interface & UI",icon:Lm},{id:"troubleshooting",label:"Troubleshooting",icon:gj}]},T=R=>n?R.filter(z=>z.label.toLowerCase().includes(n.toLowerCase())):R,C=({id:R,label:z,Icon:q})=>r.jsxs("a",{className:`${Me.navLink} ${t===R?Me.activeNavLink:""}`,onClick:()=>S(R),children:[r.jsx(q,{className:Me.navLinkIcon,size:18}),z]}),E=[{question:"Bill not printing correctly?",answer:"Ensure pop-ups are not blocked in your browser. Also, check if your printer is properly configured in system settings. For thermal printers, verify the paper size matches the bill format."},{question:"Sync issues with data?",answer:"Make sure your internet connection is stable. The system auto-syncs when online. You can also manually trigger sync from the settings menu. If issues persist, try clearing browser cache."},{question:"How to reset my password?",answer:"Contact your clinic administrator who can reset your password from the Staff Management section. For security reasons, passwords cannot be self-reset without admin approval."},{question:"AI suggestions not appearing?",answer:'AI features require an active internet connection. Also ensure AI features are enabled in Clinic Settings under the "AI & Automation" tab.'},{question:"How do I record a partial payment for patient debt?",answer:"Navigate to Financial Control -> Patient Debts. Click on a patient's name to view their full transaction history. Use the payment recording form at the bottom to enter the amount paid and save."},{question:"How can I set up normal ranges for Lab tests?",answer:"Go to Advanced Lab Management -> Test Master. Click 'Edit' on a test, then go to the 'Parameters' tab. Here you can define min/max values, units, and default results."}],k=[{icon:AI,title:"Pro Tip: Voice Commands",description:'Use the AI Command Bar to speak naturally. Say "Create prescription for John" to get started instantly!',color:"#f59e0b"},{icon:RI,title:"Speed Boost",description:"Double-click any patient name in the queue to instantly open their full history.",color:"#8b5cf6"},{icon:ZJ,title:"Smart Billing",description:"The system auto-suggests medicine quantities based on prescription duration!",color:"#10b981"},{icon:II,title:"Favorites",description:"Star frequently prescribed medicines to access them from your quick-add panel.",color:"#ef4444"}];v.useEffect(()=>{const R=setInterval(()=>{p(z=>(z+1)%k.length)},5e3);return()=>clearInterval(R)},[k.length]);const P=[{icon:Os,value:1e4,suffix:"+",label:"Patients Managed",color:"#6366f1"},{icon:Eb,value:75,suffix:"%",label:"Time Saved",color:"#10b981"},{icon:nZ,value:99,suffix:".9%",label:"Uptime",color:"#f59e0b"},{icon:MX,value:50,suffix:"+",label:"Happy Clinics",color:"#ef4444"}],I=[{keys:["Ctrl","K"],action:"Open Command Bar",description:"Quick access to AI assistant and navigation"},{keys:["Ctrl","P"],action:"Quick Print",description:"Print current document or bill"},{keys:["Ctrl","S"],action:"Save Record",description:"Save current form or entry"},{keys:["Esc"],action:"Close Modal",description:"Close any open dialog or panel"}];return r.jsxs("div",{className:Me.container,children:[r.jsx("div",{className:Me.progressBar,style:{width:`${i}%`}}),r.jsxs("aside",{className:Me.sidebar,children:[r.jsxs("h2",{className:Me.sidebarTitle,children:[r.jsx(_I,{size:22}),"User Guide"]}),r.jsxs("div",{className:Me.searchBox,children:[r.jsx(En,{className:Me.searchIcon,size:16}),r.jsx("input",{type:"text",className:Me.searchInput,placeholder:"Search topics...",value:n,onChange:R=>a(R.target.value)})]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(aa,{size:12}),"Navigation"]}),T(_.navigation).map(R=>r.jsx(C,{id:R.id,label:R.label,Icon:R.icon},R.id))]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(II,{size:12}),"Reference"]}),T(_.reference).map(R=>r.jsx(C,{id:R.id,label:R.label,Icon:R.icon},R.id))]})]}),r.jsxs("main",{className:Me.content,ref:b,children:[r.jsxs("header",{className:Me.header,children:[r.jsxs("div",{className:Me.floatingParticles,children:[r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle})]}),r.jsxs("div",{className:Me.headerContent,children:[r.jsxs("div",{className:Me.headerLabel,children:[r.jsx(_I,{size:16}),"Complete Documentation"]}),r.jsxs("h1",{className:Me.title,children:["Master Newtons Ai HMS ",r.jsx("span",{className:Me.waveEmoji,children:""})]}),r.jsx("p",{className:Me.subtitle,children:"Your comprehensive guide to maximizing efficiency with the AI-Powered Health Management System. Master every feature and transform your clinical workflow."}),r.jsxs("div",{className:Me.headerBadges,children:[r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(ag,{size:14}),"HIPAA Compliant"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(yw,{size:14}),"AI Powered"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(NE,{size:14}),"Multi-Language"]})]}),r.jsxs("div",{className:Me.headerActions,children:[r.jsxs("button",{className:Me.headerBtn,onClick:()=>S("getting-started"),children:[r.jsx(Xz,{size:16}),"Get Started"]}),r.jsxs("button",{className:Me.headerBtnSecondary,onClick:()=>S("troubleshooting"),children:[r.jsx(gj,{size:16}),"Need Help?"]})]})]})]}),r.jsx("section",{className:Me.statsSection,children:P.map((R,z)=>{const{count:q,ref:F}=b5e(R.value);return r.jsxs("div",{className:Me.statCard,ref:F,children:[r.jsx("div",{className:Me.statIcon,style:{backgroundColor:`${R.color}15`,color:R.color},children:r.jsx(R.icon,{size:24})}),r.jsxs("div",{className:Me.statValue,style:{color:R.color},children:[q,R.suffix]}),r.jsx("div",{className:Me.statLabel,children:R.label})]},z)})}),r.jsxs("section",{className:Me.quickTipsSection,children:[r.jsxs("div",{className:Me.quickTipsHeader,children:[r.jsxs("h3",{children:[r.jsx(AI,{size:20})," Quick Tips"]}),r.jsxs("div",{className:Me.tipNav,children:[r.jsx("button",{onClick:()=>p(R=>(R-1+k.length)%k.length),children:r.jsx(Ab,{size:18})}),r.jsxs("span",{children:[f+1," / ",k.length]}),r.jsx("button",{onClick:()=>p(R=>(R+1)%k.length),children:r.jsx(pd,{size:18})})]})]}),r.jsxs("div",{className:Me.tipCard,children:[r.jsx("div",{className:Me.tipIcon,style:{backgroundColor:`${k[f].color}15`,color:k[f].color},children:Ce.createElement(k[f].icon,{size:28})}),r.jsxs("div",{className:Me.tipContent,children:[r.jsx("h4",{children:k[f].title}),r.jsx("p",{children:k[f].description})]})]},f),r.jsx("div",{className:Me.tipIndicators,children:k.map((R,z)=>r.jsx("button",{className:`${Me.tipIndicator} ${f===z?Me.tipIndicatorActive:""}`,onClick:()=>p(z)},z))})]}),r.jsxs("section",{id:"getting-started",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(OI,{size:18})}),"Getting Started"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Welcome to the Newtons Ai HMS. This guide will help you navigate and master the system's features, from clinical workflows to advanced financial analytics."}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(yw,{size:18}),"Multi-Platform Accessibility"]}),r.jsx("div",{className:Me.infoBoxContent,children:"Newtons Ai is a PWA (Progressive Web App). You can install it on your Desktop, Android, or iOS device for a native-like experience with faster performance and offline support."})]}),r.jsx("div",{className:Me.shortcutsGrid,children:I.map((R,z)=>r.jsxs("div",{className:`${Me.shortcutCard} ${g===R.action?Me.shortcutCardActive:""}`,onMouseEnter:()=>x(R.action),onMouseLeave:()=>x(null),children:[r.jsx("div",{className:Me.shortcutKeys,children:R.keys.map((q,F)=>r.jsxs(Ce.Fragment,{children:[r.jsx("kbd",{className:`${Me.kbd} ${g===R.action?Me.kbdActive:""}`,children:q}),F<R.keys.length-1&&r.jsx("span",{className:Me.kbdPlus,children:"+"})]},F))}),r.jsxs("div",{className:Me.shortcutInfo,children:[r.jsx("div",{className:Me.shortcutAction,children:R.action}),r.jsx("div",{className:Me.shortcutDesc,children:R.description})]})]},z))}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(fX,{size:14})," Smart Navigation"]}),r.jsxs("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:["Press ",r.jsx("kbd",{className:Me.kbd,children:"Ctrl"})," + ",r.jsx("kbd",{className:Me.kbd,children:"K"})," anywhere to open the Command Bar. Instantly jump to patients, bills, or settings."]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Os,{size:14})," Multi-Role Access"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"The system adapts to your role: Doctor, Receptionist, Pharmacist, or Lab Technician."})]})]})]})]}),r.jsxs("section",{id:"clinical-workflow",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(tg,{size:18})}),"Doctor Workflow & Live Queue"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"The Doctor Consultation Panel is optimized for speed and clarity, providing all necessary patient context at a single glance."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(_c,{size:14})," Live Queue Control"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Use the "Call Next" buttons to manage the patient flow. The system automatically marks seen patients and updates the waiting list.'}),r.jsx(Cr,{to:"/dashboard/doctor",className:Me.moduleLinkBtn,children:"Consultation Panel"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Pv,{size:14})," AI Patient Briefs"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:`" AI Brief" provides a summarized snapshot of the patient's current complaint and relevant history saving valuable consultation time.`})]})]}),r.jsx("h3",{children:"Comprehensive History"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(hv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Unified Timeline:"})," View past complaints, lab reports, and medications in a single, chronologically grouped view."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(jX,{size:16,className:Me.featureIcon,style:{color:"var(--guide-primary)"}}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"One-Click Action:"})," From the history view, copy past medications to new prescriptions or quickly re-order tests."]})]})]})]})]}),r.jsxs("section",{id:"financial-mgmt",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(cd,{size:18})}),"Financial Control & Debt Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Keep your clinic's finances healthy with precise billing and proactive debt management."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(xw,{size:14})," Debt Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Monitor all outstanding balances in the Patent Debt module. View individual transaction histories and record settlements."}),r.jsx(Cr,{to:"/dashboard/admin/patient-debts",className:Me.moduleLinkBtn,children:"Manage Debt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(aa,{size:14})," Custom Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Need to bill for something non-standard? Use the Custom Bill tool to create items on-the-fly."}),r.jsx(Cr,{to:"/create-custom-bill",className:Me.moduleLinkBtn,children:"Custom Bill"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(ag,{size:18}),"Payment Verification"]}),r.jsx("div",{className:Me.infoBoxContent,children:'The system tracks payment modes (Cash, UPI, Card, Credit). "Credit" sales are automatically added to the Patient Debt list for later follow-up.'})]})]})]}),r.jsxs("section",{id:"analytics",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(wE,{size:18})}),"Analytics & Insights"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Transition from simply managing data to understanding it. The Analysis Dashboard provides deep insights into your operations."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(_c,{size:14})," Revenue vs Cash Flow"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Compare Sales (Accrual) against actual Cash Collected (Cash Basis) to understand your true liquidity."}),r.jsx(Cr,{to:"/dashboard/analysis",className:Me.moduleLinkBtn,children:"Open Analysis"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(DI,{size:14})," Dept. Analysis"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"See exactly which departments (Pharmacy, Lab, OPD) are driving your clinic's growth."})]})]}),r.jsx("h3",{children:"Advanced Metrics"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(hv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Inventory Movement:"})," Analyze stock inflow vs outflow to predict future procurement needs."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(hv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Profit Estimation:"})," View estimated profits based on cost of goods sold (COGS) vs revenue generated."]})]})]})]})]}),r.jsxs("section",{id:"pharmacy-inventory",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(ud,{size:18})}),"Pharmacy & Inventory Tracking"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Maintain optimal stock levels and manage supplier relationships effortlessly."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(KD,{size:14})," Distributor Mgmt"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep a directory of suppliers, track payments made to them, and manage purchase entries."}),r.jsx(Cr,{to:"/dashboard/distributors",className:Me.moduleLinkBtn,children:"Distributors"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(MQ,{size:14})," Refill Reminders"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automatically notify patients when their chronic medication stock is about to run out."}),r.jsx(Cr,{to:"/refill-reminders",className:Me.moduleLinkBtn,children:"Refill Alerts"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(_c,{size:18}),"Stock-Out Alerts"]}),r.jsx("div",{className:Me.infoBoxContent,children:"High-demand items are highlighted when stock falls below your defined threshold, ensuring you never run out of critical medicines."})]})]})]}),r.jsxs("section",{id:"advanced-lab",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(ls,{size:18})}),"Advanced Lab Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Go beyond simple test lists. Configure complex diagnostic parameters with automated clinical validation."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(En,{size:14})," Multi-Parameter Search"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Find reports by Patient Name, ID, Token, or even specific Test Name. The intelligent search uses fuzzy matching."}),r.jsx(Cr,{to:"/lab/search-report",className:Me.moduleLinkBtn,children:"Find Reports"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(ls,{size:14})," Test Master"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define parametric data, normal ranges, and automated formatting for your reports."}),r.jsx(Cr,{to:"/lab-inventory",className:Me.moduleLinkBtn,children:"Configure Tests"})]})]})]})]}),r.jsxs("section",{id:"ipd-admission",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(jf,{size:18})}),"IPD & Admission Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Manage the full lifecycle of in-patient care, from the moment of admission to final discharge and billing."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Jn,{size:14})," In-Patient Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep track of all currently admitted patients, their ward assignments, and duration of stay."}),r.jsx(Cr,{to:"/manage-admission",className:Me.moduleLinkBtn,children:"Admission Mgmt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(xw,{size:14})," Cumulative Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automated daily room charges combined with services and medications consumed during the stay."})]})]}),r.jsx("h3",{children:"Workflow Steps"}),r.jsxs("ol",{className:Me.workflowList,children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Admit:"})," Register the patient and set the admission date and bed details."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Manage:"})," Record observations and clinical notes throughout the stay."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Discharge:"})," Finalize all pending charges and generate the discharge summary."]})]})]})]}),r.jsxs("section",{id:"custom-data",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(vf,{size:18})}),"System Customization"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Newtons Ai HMS is designed to be extensible. Create your own data structures and visualization tools."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Db,{size:14})," Custom Tables"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define new data types (e.g., Equipment Logs, Consent Forms). Support for text, number, date, and boolean."}),r.jsx(Cr,{to:"/custom-tables",className:Me.moduleLinkBtn,children:"Data Tables"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(DI,{size:14})," Custom Dashboards"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Build your own reporting views. Drag and drop widgets to visualize your performance."}),r.jsx(Cr,{to:"/dashboards",className:Me.moduleLinkBtn,children:"Manage Dashboards"})]})]})]})]}),r.jsxs("section",{id:"admin",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(dd,{size:18})}),"Administration"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Central command for clinic owners. Access critical functions and manage staff permissions."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Os,{size:14})," Staff & Permissions"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Add/edit staff and define exactly what each role can see and do in the system."}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[r.jsx(Cr,{to:"/dashboard/staff",className:Me.moduleLinkBtn,children:"Staff"}),r.jsx(Cr,{to:"/dashboard/roles",className:Me.moduleLinkBtn,children:"Roles"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(fa,{size:14})," Subscription Plans"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Manage your patients' subscription plans, billing cycles, and membership statuses."}),r.jsx(Cr,{to:"/dashboard/subscriptions",className:Me.moduleLinkBtn,children:"Subscriptions"})]})]})]})]}),r.jsxs("section",{id:"ui-reference",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(Lm,{size:18})}),"Interface & UI Reference"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Familiarize yourself with the common UI elements used throughout the application."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Action Buttons"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnPrimary}`,children:"Primary / Save"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnSecondary}`,children:"Secondary"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnDanger}`,children:"Danger / Delete"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Status Indicators"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeSuccess}`,children:[r.jsx(hv,{size:12}),"Paid / Completed"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeWarning}`,children:[r.jsx(RI,{size:12}),"Pending / Due"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeError}`,children:[r.jsx(gj,{size:12}),"Overdue / Failed"]})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Common Icons"}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Bi,{size:16})," ",r.jsx("span",{children:"Edit Record"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Wn,{size:16})," ",r.jsx("span",{children:"Delete Item"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Lm,{size:16})," ",r.jsx("span",{children:"View Details"})]})]})]})]})]}),r.jsxs("section",{id:"troubleshooting",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(gj,{size:18})}),"Troubleshooting & Support"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(NE,{size:18}),"Offline Support (PWA)"]}),r.jsxs("div",{className:Me.infoBoxContent,children:["Newtons Ai HMS is a ",r.jsx("strong",{children:"Progressive Web App (PWA)"}),'. Install it on your desktop or mobile home screen using the "Install" button in the header for faster loading and offline syncing of critical data.']})]}),r.jsxs("div",{className:Me.infoBox,style:{borderLeftColor:"var(--guide-accent)"},children:[r.jsxs("span",{className:Me.infoBoxTitle,style:{color:"var(--guide-accent)"},children:[r.jsx(sC,{size:18}),"Need Direct Support?"]}),r.jsx("div",{className:Me.infoBoxContent,children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(rg,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"+91 63631 11328"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(EI,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"shiva@newtons.in"})]})]})})]}),r.jsx("h3",{children:"Frequently Asked Questions"}),r.jsx("div",{className:Me.faqList,children:E.map((R,z)=>r.jsxs("div",{className:Me.faqItem,children:[r.jsxs("div",{className:Me.faqQuestion,onClick:()=>l(o===z?null:z),children:[r.jsx("span",{children:R.question}),r.jsx(Uz,{size:18,className:`${Me.faqIcon} ${o===z?Me.faqIconOpen:""}`})]}),o===z&&r.jsx("div",{className:Me.faqAnswer,children:R.answer})]},z))})]})]}),r.jsx("footer",{className:Me.footer,children:r.jsxs("p",{className:Me.footerText,children:[" ",new Date().getFullYear()," ",r.jsx("span",{className:Me.footerBrand,children:"Newtons Ai"}),". Empowering Healthcare through Intelligence."]})})]}),r.jsxs("div",{className:Me.fabContainer,children:[c&&r.jsxs("div",{className:Me.fabContent,children:[r.jsxs("h4",{children:[r.jsx(sC,{size:18}),"Customer Care"]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(rg,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"+91 63631 11328"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("+916363111328"),title:"Copy Phone",children:r.jsx(kI,{size:14})})]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(EI,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"shiva@newtons.in"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("shiva@newtons.in"),title:"Copy Email",children:r.jsx(kI,{size:14})})]})]}),r.jsx("button",{className:Me.fabButton,onClick:()=>d(!c),title:"Customer Support",children:c?r.jsx(Lt,{size:24}):r.jsx(sC,{size:24})})]})]})},w5e=t=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(t)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(t)?{type:"premolar",roots:1}:[6,11,22,27].includes(t)?{type:"canine",roots:1}:t>=1&&t<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(t)?{type:"molar",roots:2}:[43,48,53,58].includes(t)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(t)?{type:"incisor",roots:1}:{type:"incisor",roots:1},xc=({toothNumber:t,conditions:e=[],className:n,style:a,isSelected:i,bridgeConnectPrevious:s})=>{const{type:o}=w5e(t),l=t<=16||t>=41&&t<=50,c="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",d="M7,25 Q5,40 10,44 Q14,40 14,26",f="M29,25 Q31,40 26,44 Q22,40 22,26",p="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",g="M10,24 Q16,44 18,45 Q20,44 26,24",x="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",b="M10,25 Q18,48 26,25",j="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",S="M12,25 Q18,46 24,25";let _=c,T=[d,f];o==="incisor"?(_=j,T=[S]):o==="canine"?(_=x,T=[b]):o==="premolar"&&(_=p,T=[g]);const C=e.includes("condition-rct"),E=e.includes("condition-filling"),k=e.includes("condition-crown"),P=e.includes("condition-bridge"),I=e.includes("condition-extraction"),R=e.includes("condition-implant"),z=e.includes("condition-others"),q=C?"#e9d5ff":"#f3f4f6",F=I?"#fee2e2":"#ffffff",V=I?"#ef4444":P?"#0891b2":R?"#475569":z?"#f97316":k?"#b45309":i?"#3b82f6":"#6b7280",H=i||P||k||R||z?2:1.5,K=l?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return r.jsxs("svg",{viewBox:"0 0 36 50",className:n,style:{width:"100%",height:"100%",overflow:"visible",...a},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),r.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),r.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),r.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),r.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[r.jsx("stop",{offset:"0%",stopColor:"#475569"}),r.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),r.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),s&&r.jsx("path",{d:K,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),R?r.jsxs("g",{children:[r.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:V,strokeWidth:"1"}),r.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[r.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),r.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),r.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),r.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:V,strokeWidth:"1",rx:"1"})]}):r.jsx("g",{fill:q,stroke:V,strokeWidth:H,strokeLinejoin:"round",children:T.map((W,B)=>r.jsx("path",{d:W},B))}),C&&!R&&r.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:o==="molar"?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M12,28 L11,42"}),r.jsx("path",{d:"M24,28 L25,42"})]}):r.jsx("path",{d:"M18,25 L18,44"})}),r.jsx("path",{d:_,fill:P?"url(#bridgeGradient)":k?"url(#goldGradient)":F,stroke:V,strokeWidth:H,strokeLinejoin:"round"}),E&&!k&&!P&&!R&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),z&&!k&&!P&&!R&&!E&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#f97316",stroke:"#ea580c",strokeWidth:"1"}),I&&r.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[r.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),r.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},jb=(t,e="fdi")=>e==="universal"?t<=32?t.toString():t>=41&&t<=50?String.fromCharCode(65+(t-41)):t>=51&&t<=60?String.fromCharCode(75+(t-51)):t.toString():e==="fdi"?t>=1&&t<=8?(18-(t-1)).toString():t>=9&&t<=16?(21+(t-9)).toString():t>=17&&t<=24?(38-(t-17)).toString():t>=25&&t<=32?(41+(t-25)).toString():t>=41&&t<=45?(55-(t-41)).toString():t>=46&&t<=50?(61+(t-46)).toString():t>=51&&t<=55?(75-(t-51)).toString():t>=56&&t<=60?(81+(t-56)).toString():t.toString():t.toString(),EG=({selectedTeeth:t,toothConditions:e={},toothDetails:n={},onToothClick:a,onEditPastRecord:i,onPrint:s,numberingSystem:o="fdi"})=>{const[l,c]=Ce.useState("permanent"),d=Array.from({length:16},(_,T)=>T+1),f=Array.from({length:16},(_,T)=>32-T),p=Array.from({length:10},(_,T)=>41+T),g=Array.from({length:10},(_,T)=>60-T),[x,b]=Ce.useState(null),j=_=>{const T=e[_]||[],C=t.includes(_);let E=[],k="#9ca3af",P;const I=T.includes("condition-extraction");return C&&(k="#3b82f6"),T.includes("condition-filling")&&E.push("#60a5fa"),T.includes("condition-rct")&&E.push("#c084fc"),T.includes("condition-crown")&&(E.push("#fcd34d"),k="#d97706"),T.includes("condition-bridge")&&(E.push("#22d3ee"),k="#0891b2"),T.includes("condition-implant")&&(E.push("#94a3b8"),k="#475569"),T.includes("condition-extraction")&&(E.push("#fee2e2"),k="#ef4444"),T.includes("condition-others")&&(E.push("#ffedd5"),k="#f97316"),E.length===0&&C&&E.push("#eff6ff"),E.length===0&&E.push("#ffffff"),{fillColors:E,borderColor:k,overlayColor:P,isSelected:C,hasExtraction:I}},S=_=>{const{isSelected:T}=j(_),C=e[_]||[],E=n[_],k=_<=16||_>=41&&_<=50,P=C.includes("condition-bridge");let I=!1;if(P){let z=null;k?(_>1&&_<=16&&(z=_-1),_>41&&_<=50&&(z=_-1)):(_<32&&_>=17&&(z=_+1),_<60&&_>=51&&(z=_+1)),z!==null&&(e[z]||[]).includes("condition-bridge")&&(I=!0)}const R=jb(_,o);return r.jsxs("div",{onClick:()=>a(_),onMouseEnter:()=>b(_),onMouseLeave:()=>b(null),className:`tooth-item-container ${T?"selected":""}`,title:"",children:[r.jsx("div",{className:"tooth-number-label",children:R}),r.jsx("div",{className:"tooth-svg-wrapper",style:{transform:k?"rotate(180deg)":"none"},children:r.jsx(xc,{toothNumber:_,conditions:C,isSelected:T,bridgeConnectPrevious:I})}),x===_&&E&&E.length>0&&r.jsxs("div",{className:"tooth-tooltip-window",children:[r.jsxs("div",{className:"tooltip-header",children:["Tooth ",R]}),r.jsx("ul",{className:"tooltip-list",children:E.map((z,q)=>r.jsxs("li",{className:"tooltip-detail-item",children:[r.jsxs("span",{className:"detail-text",children:[z.name," ",r.jsxs("small",{children:["(",z.date,")"]})]}),z.isPast&&i&&r.jsx("button",{className:"tooltip-edit-btn",onClick:F=>{F.stopPropagation(),i(z.recordId)},title:"Edit this record",children:r.jsx(ao,{size:12})})]},q))})]})]},_)};return r.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[r.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[r.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[r.jsx("button",{className:`view-toggle-btn ${l==="permanent"?"active":""}`,onClick:()=>c("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="permanent"?"#fff":"transparent",boxShadow:l==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),r.jsx("button",{className:`view-toggle-btn ${l==="primary"?"active":""}`,onClick:()=>c("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="primary"?"#fff":"transparent",boxShadow:l==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),s&&r.jsxs("button",{onClick:_=>{_.stopPropagation(),s()},className:"chart-print-btn no-print",title:"Print Report",children:[r.jsx(bf,{size:16}),r.jsx("span",{children:"Print Report"})]})]}),r.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(0,8).map(_=>S(_)):p.slice(0,5).map(_=>S(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(8).map(_=>S(_)):p.slice(5).map(_=>S(_))})]}),r.jsxs("div",{className:"midline-divider",children:[r.jsx("div",{className:"divider-line"}),r.jsx("span",{className:"chart-label",children:"Midline"}),r.jsx("div",{className:"divider-line"})]}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(0,8).map(_=>S(_)):g.slice(0,5).map(_=>S(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(8).map(_=>S(_)):g.slice(5).map(_=>S(_))})]}),r.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),r.jsx("span",{children:"Healthy"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),r.jsx("span",{children:"Filling (Dot)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),r.jsx("span",{children:"RCT (Root Lines)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),r.jsx("span",{children:"Crown"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),r.jsx("span",{children:"Bridge"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),r.jsx("span",{children:"Implant"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),r.jsx("span",{children:"Extraction (X)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(xc,{toothNumber:1,conditions:["condition-others"],style:{width:16,height:22}})}),r.jsx("span",{children:"Others"})]})]}),r.jsxs("div",{className:"print-only-details-summary print-only",children:[r.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(n).length===0?r.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):r.jsxs("table",{className:"print-details-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Tooth"}),r.jsx("th",{children:"Procedure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:Object.entries(n).sort(([_],[T])=>parseInt(_)-parseInt(T)).map(([_,T])=>r.jsx(Ce.Fragment,{children:T.map((C,E)=>r.jsxs("tr",{children:[E===0?r.jsxs("td",{rowSpan:T.length,className:"tooth-cell",children:["Tooth ",jb(parseInt(_),o)]}):null,r.jsx("td",{children:C.name}),r.jsx("td",{children:C.date})]},`${_}-${E}`))},_))})]})]})]})},N5e=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,type:"general"}),[b,j]=v.useState(""),S=n.filter(P=>P.name.toLowerCase().includes(b.toLowerCase()));v.useEffect(()=>{_()},[]);const _=async()=>{s(!0);try{const P=await le("/api/dental/procedures");if(P.ok){const I=await P.json();a(I)}}catch(P){console.error(P)}finally{s(!1)}},T=async()=>{if(!(!g.name||!g.cost))try{(await le("/api/dental/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,type:"general"}),_(),e())}catch(P){console.error(P)}},C=async P=>{try{(await le(`/api/dental/procedures/${P}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),d({}),_(),e())}catch(I){console.error(I)}},E=async P=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await le(`/api/dental/procedures/${P}`,{method:"DELETE"})).ok&&(_(),e())}catch(I){console.error(I)}},k=P=>{l(P.id),d({name:P.name,cost:P.cost,type:P.type})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await le("/api/dental/procedures/import-defaults",{method:"POST"}),_(),e()}catch(P){console.error(P)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Lt,{size:20})})]})]}),r.jsx("div",{className:"mpm-search-container",children:r.jsxs("div",{className:"mpm-search-wrapper",children:[r.jsx(En,{className:"mpm-search-icon",size:18}),r.jsx("input",{type:"text",className:"mpm-search-input",placeholder:"Search procedures...",value:b,onChange:P=>j(P.target.value)}),b&&r.jsx("button",{className:"mpm-search-clear",onClick:()=>j(""),children:r.jsx(Lt,{size:16})})]})}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Type"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:S.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):S.map(P=>r.jsx("tr",{children:o===P.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:I=>d({...c,name:I.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsxs("select",{className:"edit-select",value:c.type||"general",onChange:I=>d({...c,type:I.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"}),r.jsx("option",{value:"others",children:"Others"})]})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:I=>d({...c,cost:parseFloat(I.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>C(P.id),className:"action-btn btn-save",title:"Save",children:r.jsx(cs,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Lt,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:P.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${P.type}`,children:P.type})}),r.jsxs("td",{style:{fontWeight:500},children:["",P.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>k(P),className:"action-btn btn-edit",title:"Edit",children:r.jsx(ao,{size:18})}),r.jsx("button",{onClick:()=>E(P.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Wn,{size:18})})]})]})},P.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:P=>x({...g,name:P.target.value})}),r.jsxs("select",{className:"form-select",value:g.type||"general",onChange:P=>x({...g,type:P.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"}),r.jsx("option",{value:"others",children:"Others"})]}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:P=>x({...g,cost:parseFloat(P.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:T,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Vn,{size:18})," Add New Procedure"]})})]})})},S5e=({toothNumber:t,procedures:e,history:n=[],onSelect:a,onClose:i,onManageProcedures:s,numberingSystem:o="universal"})=>{const[l,c]=v.useState(""),[d,f]=v.useState(n.length>0?"history":"add"),p=jb(t,o),g=v.useMemo(()=>e.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),[e,l]);return r.jsx("div",{className:"tooth-modal-overlay",children:r.jsxs("div",{className:"tooth-modal-content",children:[r.jsxs("div",{className:"tooth-modal-header",children:[r.jsxs("h3",{className:"tooth-modal-title",children:["Tooth ",p]}),r.jsx("button",{onClick:i,className:"tooth-modal-close-btn",children:r.jsx(Lt,{size:20})})]}),n.length>0&&r.jsxs("div",{className:"tooth-modal-tabs",children:[r.jsx("button",{className:`tooth-modal-tab ${d==="add"?"active":""}`,onClick:()=>f("add"),children:"Add Procedure"}),r.jsxs("button",{className:`tooth-modal-tab ${d==="history"?"active":""}`,onClick:()=>f("history"),children:["History (",n.length,")"]})]}),d==="add"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"tooth-modal-search-box",style:{display:"flex",gap:"8px",alignItems:"center"},children:[r.jsxs("div",{className:"tooth-modal-search-wrapper",style:{flex:1},children:[r.jsx(En,{size:16,className:"tooth-modal-search-icon"}),r.jsx("input",{type:"text",placeholder:"Search procedures...",value:l,onChange:x=>c(x.target.value),className:"tooth-modal-search-input",autoFocus:!0})]}),s&&r.jsxs("button",{onClick:s,className:"modal-manage-btn",title:"Manage Procedures",children:[r.jsx(tg,{size:16}),r.jsx("span",{children:"Manage"})]})]}),r.jsx("div",{className:"tooth-modal-list",children:g.length===0?r.jsx("div",{className:"tooth-modal-empty",children:"No procedures found."}):r.jsx("div",{className:"flex-col",children:g.map(x=>r.jsxs("button",{onClick:()=>a(x),className:"tooth-modal-item",children:[r.jsxs("div",{children:[r.jsx("div",{className:"tooth-modal-item-name",children:x.name}),r.jsx("div",{className:"tooth-modal-item-type",children:x.type})]}),r.jsxs("div",{className:"tooth-modal-item-cost-group",children:[r.jsxs("span",{children:["",x.cost]}),r.jsx(Vn,{size:16})]})]},x.id))})})]}),d==="history"&&r.jsx("div",{className:"tooth-modal-list",children:n.map((x,b)=>r.jsxs("div",{className:"tooth-modal-history-item",children:[r.jsx("div",{className:"tooth-modal-history-name",children:x.name}),r.jsxs("div",{className:"tooth-modal-history-date",children:[x.date," ",x.isPast?"(Past)":"(Current)"]})]},b))})]})})},_5e=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var Ne,Z,ge,de,ae,ne,ie,je,Ee;const[i,s]=v.useState(null),[o,l]=v.useState([]),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(!1),[b,j]=v.useState("cash"),[S,_]=v.useState(""),[T,C]=v.useState(""),[E,k]=v.useState(""),[P,I]=v.useState(""),[R,z]=v.useState(""),[q,F]=v.useState(!1),[V,H]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[K,W]=v.useState(0),B=v.useRef(!1),[G,ee]=v.useState(null),[X,$]=v.useState(!1),ce=()=>{const Q=V.map(me=>me.method),ye=["cash","upi","card","no_cash_insurance","credit"].filter(me=>!Q.includes(me));ye.length>0&&H([...V,{id:crypto.randomUUID(),method:ye[0],amount:0}])},xe=Q=>{V.length>2&&H(V.filter(ye=>ye.id!==Q))},Y=(Q,ye,me)=>{H(he=>{const De=he.map(nt=>nt.id===Q?ye==="method"?{...nt,method:me}:{...nt,amount:Math.max(0,me)}:nt);if(ye==="amount"&&De.length===2){const Fe=De.findIndex(wt=>wt.id===Q)===0?1:0,Ge=Math.max(0,me),it=Te-Ge;De[Fe]={...De[Fe],amount:Math.max(0,it)}}return De})},Re=Q=>{const ye=V.filter(he=>he.id!==Q).reduce((he,De)=>he+De.amount,0),me=Math.max(0,Te-ye);Y(Q,"amount",me)},$e=v.useMemo(()=>V.reduce((Q,ye)=>Q+ye.amount,0),[V]),ze=Q=>{const ye=Math.max(0,Math.min(100,isNaN(Q)?0:Q));B.current=!0,W(ye);const me=o.map(he=>({...he,discount_percentage:ye}));l(me)},Le=(Q,ye)=>{const me=[...o];me[Q].discount_percentage=isNaN(ye)?0:ye,l(me)};v.useEffect(()=>{if(B.current){B.current=!1;return}const Q=o.reduce((he,De)=>he+(De.price??0),0);if(Q===0){W(0);return}const me=o.reduce((he,De)=>{const Fe=(De.price??0)*((De.discount_percentage??0)/100);return he+Fe},0)/Q*100;W(he=>Math.abs(he-me)>.01?me:he)},[o]);const oe=async()=>{var Q,ye;if(!i)return p("No record data available to bill."),null;if(o.length===0)return p("Cannot bill an empty procedure list."),null;x(!0),p(null);try{const me=o.map(we=>{const Qe=we.price,Xe=Qe*((we.discount_percentage??0)/100),ct=Qe-Xe;return{name:we.name,price:we.price,quantity:1,total:ct,item_id:we.id||`proc_${Date.now()}`,type:"service",discount_percentage:we.discount_percentage??0}}),he=q?((Q=V[0])==null?void 0:Q.method)||"cash":b,De=q?V.map(we=>({method:we.method,amount:we.amount})):void 0,nt={patientId:i.patientId.id,items:me,amount:Te,paymentMode:he,splitPayments:De,type:"dental",related_id:i.id,status:"paid",discountPercentage:K},Fe=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)}),Ge=await Fe.json();if(!Fe.ok||!Ge.id)throw new Error(Ge.message||"Failed to create bill.");(await le(`/api/dental/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:Ge.id})})).ok||console.error("Failed to update dental record status"),s(we=>we?{...we,status:"billed",billId:Ge.id}:null);const wt=q?((ye=V.find(we=>we.method==="credit"))==null?void 0:ye.amount)||0:b==="credit"?Te:0;if(wt>0)try{await le(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:wt,related_bill_id:Ge.id,notes:`Dental Bill #${Ge.id}${q?" (Split Payment - Credit portion)":""}`})})}catch(we){console.error("Failed to create debt entry:",we)}return a&&a(),Ge.id}catch(me){return console.error("Billing process failed:",me),p(me.message||"Failed to create bill."),null}finally{x(!1)}},Se=()=>{window.print()},Ve=async()=>{await oe()&&setTimeout(()=>window.print(),800)};v.useEffect(()=>{t&&n&&(async()=>{d(!0);try{const[ye,me]=await Promise.all([le(`/api/dental/${n}`),le("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!ye.ok)throw new Error("Failed to fetch dental record");const he=await ye.json(),De={...he,patientId:he.Patient||he.patientId};if(s(De),me.ok){const Ge=await me.json();C(Ge.upi_id||""),k(Ge.name||""),I(Ge.address||""),z(Ge.notes||"")}const Fe=(De.selected_procedures||De.selectedProcedures||[]).map(Ge=>({...Ge,price:Ge.cost,discount_percentage:0}));l(Fe)}catch(ye){console.error("Failed to fetch data:",ye),p(ye.message)}finally{d(!1)}})()},[t,n]);const Ae=v.useMemo(()=>o.reduce((Q,ye)=>Q+(ye.price??0),0),[o]),ue=v.useMemo(()=>o.reduce((Q,ye)=>{const he=(ye.price??0)*(ye.discount_percentage??0)/100;return Q+he},0),[o]),Te=v.useMemo(()=>Ae-ue,[Ae,ue]),se=v.useMemo(()=>Te-$e,[Te,$e]),be=v.useMemo(()=>Math.abs(se)<.01,[se]);v.useEffect(()=>{if(q&&V.length>=1&&$e===0){const Q=[...V];Q[0].amount=Te,H(Q)}},[q,Te]),v.useEffect(()=>{if(Te>0&&T){const Q=`upi://pay?pa=${T}&pn=${encodeURIComponent(E)}&am=${Te.toFixed(2)}&cu=INR`;_(Q)}else _("")},[Te,T,E]);const _e=v.useMemo(()=>q?V.some(Q=>Q.method==="credit"):b==="credit",[q,V,b]);return v.useEffect(()=>{(async()=>{var ye;if(_e&&((ye=i==null?void 0:i.patientId)!=null&&ye.id)){$(!0);try{const me=await le(`/api/patient-debts/${i.patientId.id}/balance`);if(me.ok){const he=await me.json();ee(he.netDebt||0)}else ee(0)}catch{ee(0)}finally{$(!1)}}})()},[_e,(Ne=i==null?void 0:i.patientId)==null?void 0:Ne.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Dental Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Lt,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:c?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:30,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3].map(Q=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:20,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:90,height:20})})]},Q))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:28}),r.jsx(te,{width:100,height:28})]})]})]})})]})})}):f?r.jsxs("div",{className:"error-message-box",children:["Error: ",f]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:E||"Clinic Name"}),(P||R)&&r.jsxs("div",{className:"clinic-details-print",children:[P&&r.jsx("span",{className:"small-text clinic-address",children:P}),R&&r.jsx("span",{className:"small-text clinic-notes",children:R})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Z=i.patientId)==null?void 0:Z.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((ge=i.patientId)==null?void 0:ge.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((de=i.patientId)==null?void 0:de.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((ae=i.patientId)==null?void 0:ae.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(aa,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"dental-chart-section-modal",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Dental Chart"})}),r.jsx("div",{className:"chart-wrapper-modal",children:r.jsx(EG,{selectedTeeth:[],onToothClick:()=>{},toothConditions:(()=>{const Q={};return i.teeth&&i.teeth.forEach(ye=>{ye.procedures.forEach(me=>{var De,nt;const he=((De=i.selected_procedures)==null?void 0:De.find(Fe=>Fe.id===me))||((nt=i.selectedProcedures)==null?void 0:nt.find(Fe=>Fe.id===me));if(he&&he.type&&he.type!=="general"){Q[ye.toothNumber]||(Q[ye.toothNumber]=[]);const Fe=`condition-${he.type}`;Q[ye.toothNumber].includes(Fe)||Q[ye.toothNumber].push(Fe)}})}),Q})(),toothDetails:(()=>{const Q={};return i.teeth&&i.teeth.forEach(ye=>{Q[ye.toothNumber]||(Q[ye.toothNumber]=[]),ye.procedures.forEach(me=>{var De,nt;const he=((De=i.selected_procedures)==null?void 0:De.find(Fe=>Fe.id===me))||((nt=i.selectedProcedures)==null?void 0:nt.find(Fe=>Fe.id===me));he&&Q[ye.toothNumber].push({name:he.name,date:new Date(i.date||i.createdAt).toLocaleDateString()})})}),Q})()})})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),o.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:o.map((Q,ye)=>{const me=Q.price??0,he=me*(Q.discount_percentage??0)/100,De=me-he;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:Q.name}),r.jsx("td",{children:Q.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:Q.discount_percentage===0?"":Q.discount_percentage,onChange:nt=>Le(ye,parseFloat(nt.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:De.toFixed(2)})]},ye)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",K.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ue.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Te.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"12px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px"},children:"Payment Details:"}),q?r.jsx("div",{className:"split-payment-details-print",children:V.map(Q=>r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:Q.method.toUpperCase()}),r.jsxs("span",{children:["",Q.amount.toFixed(2)]})]},Q.id))}):r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Mode"}),r.jsx("span",{children:b.toUpperCase()})]})]}),(b==="credit"||q&&V.some(Q=>Q.method==="credit"))&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px",color:"#e53e3e"},children:"Credit/Debt Information:"}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Credit Amount"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",q?(((ne=V.find(Q=>Q.method==="credit"))==null?void 0:ne.amount)||0).toFixed(2):Te.toFixed(2)]})]}),(G??0)>0&&r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(G??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px",fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((G??0)+(q?((ie=V.find(Q=>Q.method==="credit"))==null?void 0:ie.amount)||0:Te)).toFixed(2)]})]})]})]}),S&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(q&&V.some(Q=>Q.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:S,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:K===0?"":K,onChange:Q=>ze(parseFloat(Q.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:g||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Te.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:S?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:S,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${q?"active":""}`,onClick:()=>F(!q),disabled:g||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:q?"2px solid #4facfe":"1px solid #ddd",background:q?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:q?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:q?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(qo,{size:14}),"Split Pay"]})]}),q?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(qo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",Te.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:V.map((Q,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:Q.method,onChange:me=>Y(Q.id,"method",me.target.value),className:`split-payment-select ${Q.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:Q.amount===0?"":Q.amount,onChange:me=>Y(Q.id,"amount",parseFloat(me.target.value)||0),placeholder:"0",className:`split-payment-input ${Q.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed"})]}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>Re(Q.id),className:"split-payment-btn split-payment-btn-fill",disabled:g||i.status==="billed",children:"Fill"}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>xe(Q.id),className:"split-payment-btn split-payment-btn-remove",disabled:g||i.status==="billed",children:r.jsx(Wn,{size:12})})]},Q.id))}),V.length<5&&r.jsxs("button",{type:"button",onClick:ce,className:"split-payment-add-btn",disabled:g||i.status==="billed",children:[r.jsx(Vn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",$e.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(se)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(se)<.01?"":se>0?"":"",Math.abs(se)<.01?"Balanced":se>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(se).toFixed(2)]})]}),!be&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",Te.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:Q=>j(Q.target.value),className:"payment-mode-select",disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),_e&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),X?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:G&&G>0?"#dc3545":"#28a745"},children:["",(G||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:q?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(q?((je=V.find(Q=>Q.method==="credit"))==null?void 0:je.amount)||0:Te).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((G||0)+(q?((Ee=V.find(Q=>Q.method==="credit"))==null?void 0:Ee.amount)||0:Te)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Se,className:"secondary-button print-preview-button no-print",disabled:g,children:"Print Preview"}),r.jsx("button",{onClick:Ve,className:"primary-button",disabled:g||q&&!be,children:g?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Ds,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:Se,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},zB=/^\+?[0-9\s\-().]{7,20}$/,C5e=/^[a-zA-Z\s'-]{2,}$/,T5e=()=>{const t=Ft(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState([]),[_,T]=v.useState(!0),[C,E]=v.useState(()=>{const me=localStorage.getItem("dentalNumberingSystem");return me==="fdi"||me==="universal"?me:"fdi"});v.useEffect(()=>{localStorage.setItem("dentalNumberingSystem",C)},[C]);const k=zr();v.useEffect(()=>{k.state&&k.state.patient&&Te(k.state.patient)},[k.state]);const[P,I]=v.useState([]),[R,z]=v.useState([]),[q,F]=v.useState({}),[V,H]=v.useState(""),[K,W]=v.useState(!1),[B,G]=v.useState("plan"),[ee,X]=v.useState([]),[$,ce]=v.useState([]),[xe,Y]=v.useState(!1),[Re,$e]=v.useState(!1),[ze,Le]=v.useState(null);v.useEffect(()=>{Se(),oe()},[]);const oe=async()=>{try{const me=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),he=await le(`/api/patients?${me.toString()}`);if(he.ok){const De=await he.json();S(De.patients||[])}}catch(me){console.error("Error fetching recent patients",me)}finally{T(!1)}},Se=async()=>{try{const me=await le("/api/dental/procedures");if(me.ok){const he=await me.json();ce(he)}}catch(me){console.error("Error fetching procedures",me)}};v.useEffect(()=>{(async()=>{if(!l){X([]),Le(null),H(""),z([]),F({}),I([]);return}try{const he=await le(`/api/dental/patient/${l.id}`);if(he.ok){const De=await he.json();X(De);const nt=new Date().toDateString(),Fe=De.find(Ge=>Ge.status==="draft"&&new Date(Ge.date||Ge.createdAt||Date.now()).toDateString()===nt);if(Fe){Le(Fe.id),H(Fe.notes||"");const Ge=Fe.selected_procedures.filter(we=>!Fe.teeth.some(Qe=>Qe.procedures.includes(we.id)));z(Ge.map(we=>({instanceId:crypto.randomUUID(),procedureId:we.id,name:we.name,price:we.cost,type:we.type})));const it={},wt=[];Fe.teeth.forEach(we=>{const Qe=we.procedures.map(Xe=>{const ct=Fe.selected_procedures.find(Ct=>Ct.id===Xe)||$.find(Ct=>Ct.id===Xe);return{instanceId:crypto.randomUUID(),procedureId:Xe,name:ct?ct.name:Xe,price:ct?ct.cost:0,type:ct?ct.type:"general"}});Qe.length>0&&(it[we.toothNumber]=Qe,wt.push(we.toothNumber))}),F(it),I(wt)}else Le(null),H(""),z([]),F({}),I([])}}catch(he){console.error("Error fetching history",he)}})()},[l,$]);const Ve=v.useMemo(()=>$l(async me=>{if(!me.trim()||me.length<2){i([]),o(!1);return}o(!0);try{const he=await le(`/api/patients?search=${encodeURIComponent(me)}&limit=10`);if(he.ok){const De=await he.json();i(De.patients||[])}}catch(he){console.error("Search error:",he)}finally{o(!1)}},300),[]);v.useEffect(()=>{Ve(e)},[e,Ve]);const Ae=me=>{const he=me.target.value;n(he),g(zB.test(he)),b(C5e.test(he)&&!zB.test(he))},ue=async me=>{if(!(!e||me==="phone"&&!p||me==="name"&&!x)){o(!0);try{const De=await le("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:me==="name"?e:"direct dental",phone:me==="phone"?e:null,age:null,gender:null,token:null})});if(De.ok){const nt=await De.json();Te({id:nt.id,name:nt.name,token:nt.token??null,age:nt.age??null,gender:nt.gender??null,phone:nt.phone})}else alert("Failed to create patient")}catch(he){console.error("Error creating patient:",he),alert("Error creating patient")}finally{o(!1)}}},Te=me=>{c(me),n(""),i([])},se=()=>{c(null),I([]),z([]),F({}),H("")},be=async me=>{if(!l)return;const he=await le(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)});if(he.ok)await he.json(),c(De=>De?{...De,...me}:null);else throw new Error("Failed to update")},[_e,Ne]=v.useState(null),Z=me=>{Ne(me)},ge=me=>{if(!_e)return;const he={instanceId:crypto.randomUUID(),procedureId:me.id,name:me.name,price:me.cost,type:me.type};F(De=>{const nt=De[_e]||[];return{...De,[_e]:[...nt,he]}}),I(De=>De.includes(_e)?De:[...De,_e]),Ne(null)},de=()=>{const me={},he={},De=(Ge,it)=>{me[Ge]||(me[Ge]=[]);const wt=`condition-${it}`;me[Ge].includes(wt)||me[Ge].push(wt)},nt=(Ge,it)=>{he[Ge]||(he[Ge]=[]),he[Ge].push(it)};return[...ee].sort((Ge,it)=>new Date(Ge.date).getTime()-new Date(it.date).getTime()).forEach(Ge=>{Ge.teeth&&Array.isArray(Ge.teeth)&&Ge.teeth.forEach(it=>{it.procedures.forEach(wt=>{var Qe;let we=(Qe=Ge.selected_procedures)==null?void 0:Qe.find(Xe=>Xe.id===wt);we||(we=$.find(Xe=>Xe.id===wt)),we&&we.type!=="general"?(De(it.toothNumber,we.type),nt(it.toothNumber,{name:we.name,date:new Date(Ge.date||Ge.createdAt||0).toLocaleDateString(),recordId:Ge.id,isPast:!0})):wt&&nt(it.toothNumber,{name:`Procedure: ${wt}`,date:new Date(Ge.date||Ge.createdAt||0).toLocaleDateString(),recordId:Ge.id,isPast:!0})})})}),Object.keys(q).forEach(Ge=>{const it=parseInt(Ge),wt=q[it];wt&&wt.length>0&&wt.forEach(we=>{we.type!=="general"&&(De(it,we.type),nt(it,{name:we.name,date:"Current",isPast:!1}))})}),{conditions:me,details:he}},{conditions:ae,details:ne}=v.useMemo(()=>de(),[ee,q,$]),ie=me=>{const he=ee.find(Ge=>Ge.id===me);if(!he)return;H(he.notes||"");const De=he.selected_procedures.filter(Ge=>!he.teeth.some(it=>it.procedures.includes(Ge.id)));z(De.map(Ge=>({instanceId:crypto.randomUUID(),procedureId:Ge.id,name:Ge.name,price:Ge.cost,type:Ge.type})));const nt={},Fe=[];he.teeth.forEach(Ge=>{const it=Ge.procedures.map(wt=>{const we=he.selected_procedures.find(Qe=>Qe.id===wt)||$.find(Qe=>Qe.id===wt);return{instanceId:crypto.randomUUID(),procedureId:wt,name:we?we.name:wt,price:we?we.cost:0,type:we?we.type:"general"}});it.length>0&&(nt[Ge.toothNumber]=it,Fe.push(Ge.toothNumber))}),F(nt),I(Fe),G("plan")},je=(me,he)=>{he?(F(De=>{const nt={...De};return nt[he]=(De[he]||[]).filter(Fe=>Fe.instanceId!==me),nt[he].length===0&&delete nt[he],nt}),I(De=>De)):z(De=>De.filter(nt=>nt.instanceId!==me))},Ee=(me,he,De)=>{De?F(nt=>({...nt,[De]:(nt[De]||[]).map(Fe=>Fe.instanceId===me?{...Fe,price:he}:Fe)})):z(nt=>nt.map(Fe=>Fe.instanceId===me?{...Fe,price:he}:Fe))},Q=()=>{window.print()},ye=async(me=!0)=>{var he;if(l){W(!0);try{const nt=[...R,...Object.values(q).flat()].map(we=>({id:we.procedureId,name:we.name,cost:we.price,type:we.type})),Ge=Object.keys(q).map(Number).map(we=>({toothNumber:we,procedures:(q[we]||[]).map(Qe=>Qe.procedureId),notes:V})),it={patientId:l.id,teeth:Ge,selectedProcedures:nt,notes:V};let wt;if(ze?((he=ee.find(Qe=>Qe.id===ze))==null?void 0:he.status)==="draft"?wt=await le(`/api/dental/${ze}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await le("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await le("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}),wt.ok){const we=await wt.json();Le(we.id);const Qe=await le(`/api/dental/patient/${l.id}`);if(Qe.ok){const Xe=await Qe.json();X(Xe)}me?$e(!0):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save dental record.")}catch(De){console.error(De),alert("Error saving record.")}finally{W(!1)}}};return r.jsxs("div",{className:"dental-page-container printable-section",children:[r.jsxs("header",{className:"dental-header",children:[r.jsxs("div",{className:"dental-title-group",children:[r.jsx(aa,{className:"dental-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"dental-title",children:"Dental Report"}),r.jsx("p",{className:"dental-subtitle",children:"Create new dental records and bills"})]}),r.jsxs("div",{className:"numbering-toggle",style:{marginLeft:"auto",marginRight:"16px",display:"flex",gap:"4px",background:"var(--dp-bg-sec)",padding:"4px",borderRadius:"8px"},children:[r.jsx("button",{onClick:()=>E("universal"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="universal"?"var(--dp-card-bg)":"transparent",boxShadow:C==="universal"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="universal"?"var(--dp-text)":"var(--dp-text-sec)"},children:"Universal"}),r.jsx("button",{onClick:()=>E("fdi"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="fdi"?"var(--dp-card-bg)":"transparent",boxShadow:C==="fdi"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="fdi"?"var(--dp-text)":"var(--dp-text-sec)"},children:"FDI"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(ao,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:se,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Lt,{size:16})})]}),r.jsxs("button",{onClick:()=>Y(!0),className:"header-manage-procs-btn no-print",title:"Manage Dental Procedures",children:[r.jsx(tg,{size:16}),r.jsx("span",{children:"Manage Procedures"})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(En,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"dental-search-input header-input",value:e,onChange:Ae}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(me=>r.jsxs("div",{onClick:()=>Te(me),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:me.name}),r.jsxs("div",{className:"patient-meta",children:[me.age," yrs / ",me.gender,"  ",me.phone]})]}),r.jsx(Jn,{size:16,color:"var(--dp-text-sec)"})]},me.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>ue(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"dental-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container",children:[!l&&r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--dp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(En,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"dental-search-input",value:e,onChange:Ae,autoFocus:!0}),s&&r.jsx("div",{className:"search-spinner"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(me=>r.jsxs("div",{onClick:()=>Te(me),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:me.name}),r.jsxs("div",{className:"patient-meta",children:[me.age," yrs / ",me.gender,"  ",me.phone]})]}),r.jsx(Jn,{size:18,color:"var(--dp-text-sec)"})]},me.id))})]}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{style:{color:"var(--dp-text-sec)",marginBottom:"15px"},children:['No patients found matching "',e,'".']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:(p||x)&&r.jsxs("button",{type:"button",onClick:()=>ue(p?"phone":"name"),className:"register-new-btn",style:{backgroundColor:"var(--dp-card-bg)",border:"1px solid var(--dp-primary)",padding:"8px 16px",borderRadius:"8px"},children:['Create "',e,'"']})})]}),!l&&r.jsx("div",{style:{marginTop:"32px"},children:r.jsx("button",{onClick:()=>Y(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage Procedures"})}),!l&&(_||j.length>0)&&r.jsxs("div",{className:"recent-registered-section",children:[r.jsx("div",{className:"recent-registered-label",children:"Recent Patients"}),r.jsx("div",{className:"recent-list",children:_?[1,2,3].map(me=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(te,{width:100,height:18}),r.jsx(te,{width:30,height:20})]}),r.jsx("div",{className:"recent-info",children:r.jsx(te,{width:80,height:14})})]},me)):j.map(me=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>Te(me),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:me.name||"New Patient"}),me.token&&r.jsxs("span",{className:"recent-token",children:["#",me.token]})]}),r.jsxs("div",{className:"recent-info",children:[me.age?`${me.age} yrs`:"",me.age&&me.gender?" / ":"",me.gender||""]})]},me.id))})]})]}),l&&r.jsx("div",{className:"dental-workspace",children:r.jsxs("div",{className:"dental-grid",children:[r.jsxs("div",{className:"chart-section",children:[r.jsx("div",{className:"dental-card chart-card-scroll",children:r.jsx(EG,{selectedTeeth:P,toothConditions:ae,toothDetails:ne,onToothClick:Z,onEditPastRecord:ie,onPrint:Q,numberingSystem:C})}),r.jsxs("div",{className:"dental-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("h4",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>ye(!1),disabled:K,title:"Save notes and procedures without billing",children:[r.jsx(cs,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:V,onChange:me=>H(me.target.value)})]})]}),r.jsx("div",{className:"dental-card procedures-section",children:r.jsxs("div",{className:"treatment-plan-container",style:{borderTop:"none"},children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{onClick:()=>G("plan"),className:B==="plan"?"active":"",children:"Treatment Plan"}),r.jsx("button",{onClick:()=>G("history"),className:B==="history"?"active":"",children:"Visit History"})]}),r.jsx("div",{className:"treatment-plan-list custom-scrollbar",children:B==="plan"?r.jsx(r.Fragment,{children:R.length===0&&Object.keys(q).length===0?r.jsx("div",{className:"no-print",style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"Select a tooth to add procedures."}):r.jsxs(r.Fragment,{children:[R.length>0&&r.jsxs("div",{className:"plan-group",children:[r.jsx("h4",{children:"General"}),R.map(me=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:me.name,children:me.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:me.price,onChange:he=>Ee(me.instanceId,parseFloat(he.target.value)||0),className:"cost-input"}),r.jsx("button",{onClick:()=>je(me.instanceId),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Lt,{size:14})})]})]},me.instanceId))]}),Object.entries(q).map(([me,he])=>he.length===0?null:r.jsxs("div",{className:"plan-group",children:[r.jsxs("h4",{children:["Tooth ",jb(parseInt(me),C)]}),he.map(De=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:De.name,children:De.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:De.price,onChange:nt=>Ee(De.instanceId,parseFloat(nt.target.value)||0,parseInt(me)),className:"cost-input"}),r.jsx("button",{onClick:()=>je(De.instanceId,parseInt(me)),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Lt,{size:14})})]})]},De.instanceId))]},me))]})}):r.jsx("div",{className:"history-list",children:ee.length===0?r.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"No past visits found."}):ee.map(me=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(me.date).toLocaleDateString()}),r.jsx("span",{className:"record-status",children:me.status})]}),r.jsxs("div",{className:"history-record-body",children:[me.teeth.map(he=>r.jsxs("div",{className:"history-tooth-group",children:[r.jsxs("strong",{children:["Tooth ",jb(he.toothNumber,C),":"]})," ",he.procedures.map(De=>{const nt=me.selected_procedures.find(Fe=>Fe.id===De)||$.find(Fe=>Fe.id===De);return nt?nt.name:De}).join(", ")]},he.toothNumber)),me.notes&&r.jsx("p",{className:"history-notes",children:r.jsxs("em",{children:["Notes: ",me.notes]})}),me.status==="billed"&&r.jsx("div",{className:"history-record-actions mt-3",children:r.jsxs("button",{onClick:()=>{Le(me.id),$e(!0)},className:"view-bill-btn",children:[r.jsx(aa,{size:14})," View Bill"]})})]})]},me.id))})}),r.jsx("div",{className:"action-footer",children:r.jsx("button",{onClick:()=>ye(!0),className:"save-btn",disabled:K||R.length===0&&Object.keys(q).length===0,children:K?"Saving...":"Save & Bill"})})]})})]})}),d&&l&&r.jsx(iG,{patient:l,onClose:()=>f(!1),onSave:be}),xe&&r.jsx(N5e,{onClose:()=>Y(!1),onUpdate:Se}),_e!==null&&r.jsx(S5e,{toothNumber:_e,procedures:$.map(me=>({id:me.id,name:me.name,cost:me.cost,type:me.type})),history:ne[_e]||[],onSelect:ge,onManageProcedures:()=>{Ne(null),Y(!0)},onClose:()=>Ne(null),numberingSystem:C}),r.jsx(_5e,{isOpen:Re,recordId:ze,onClose:()=>{$e(!1),se()},onBillingComplete:()=>{}})]})},k5e=()=>{var _e,Ne,Z,ge,de;const t=Ft(),e=zr(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(""),[E,k]=v.useState(""),[P,I]=v.useState(""),[R,z]=v.useState(!1),[q,F]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V=()=>{q.length<5&&F(ae=>[...ae,{id:Date.now().toString(),method:"cash",amount:0}])},H=ae=>{q.length>2&&F(ne=>ne.filter(ie=>ie.id!==ae))},K=(ae,ne,ie)=>{F(je=>{const Ee=je.map(Q=>Q.id===ae?ne==="method"?{...Q,method:ie}:{...Q,amount:Math.max(0,ie)}:Q);if(ne==="amount"&&Ee.length===2){const ye=Ee.findIndex(De=>De.id===ae)===0?1:0,me=Math.max(0,ie),he=Ve-me;Ee[ye]={...Ee[ye],amount:Math.max(0,he)}}return Ee})},W=(ae,ne)=>{const ie=q.filter(Ee=>Ee.id!==ae).reduce((Ee,Q)=>Ee+Q.amount,0),je=Math.max(0,ne-ie);F(Ee=>Ee.map(Q=>Q.id===ae?{...Q,amount:je}:Q))},[B,G]=v.useState(0),ee=v.useRef(!1),[X,$]=v.useState(null),[ce,xe]=v.useState(!1),Y=ae=>{const ne=Math.max(0,Math.min(100,isNaN(ae)?0:ae));ee.current=!0,G(ne);const ie=i.map(je=>({...je,discount_percentage:ne}));s(ie)},Re=(ae,ne)=>{const ie=[...i];ie[ae].discount_percentage=isNaN(ne)?0:ne,s(ie)};v.useEffect(()=>{if(ee.current){ee.current=!1;return}const ae=i.reduce((je,Ee)=>je+(Ee.price??0),0);if(ae===0){G(0);return}const ie=i.reduce((je,Ee)=>{const ye=(Ee.price??0)*((Ee.discount_percentage??0)/100);return je+ye},0)/ae*100;G(je=>Math.abs(je-ie)>.01?ie:je)},[i]);const $e=async()=>{if(!n)return d("No record data available to bill."),null;if(i.length===0)return d("Cannot bill an empty procedure list."),null;p(!0),d(null);try{const ae=i.map(ye=>{const me=ye.price,he=me*((ye.discount_percentage??0)/100),De=me-he;return{name:ye.name,price:ye.price,quantity:1,total:De,item_id:ye.id||`proc_${Date.now()}`,type:"service",discount_percentage:ye.discount_percentage??0}}),ne={patientId:n.patientId.id,items:ae,amount:Ve,paymentMode:R?"split":g,type:"dental",related_id:n.id,status:"paid",discountPercentage:B};R&&(ne.splitPayments=q.map(ye=>({method:ye.method,amount:ye.amount})));const ie=await le("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)}),je=await ie.json();if(!ie.ok||!je.id)throw new Error(je.message||"Failed to create bill.");(await le(`/api/dental/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:je.id})})).ok||console.error("Failed to update dental record status"),a(ye=>ye?{...ye,status:"billed",billId:je.id}:null);const Q=R?q.filter(ye=>ye.method==="credit").reduce((ye,me)=>ye+me.amount,0):g==="credit"?Ve:0;if(Q>0)try{await le(`/api/patient-debts/${n.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Q,related_bill_id:je.id,notes:`Dental Bill #${je.id}`})})}catch(ye){console.error("Failed to create debt entry:",ye)}return je.id}catch(ae){return console.error("Billing process failed:",ae),d(ae.message||"Failed to create bill."),null}finally{p(!1)}},ze=()=>{window.print()},Le=async()=>{await $e()&&setTimeout(()=>window.print(),500)};v.useEffect(()=>{const ae=e.pathname.split("/"),ne=ae[ae.length-1];ne?(async()=>{l(!0);try{const[je,Ee]=await Promise.all([le(`/api/dental/${ne}`),le("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!je.ok)throw new Error("Failed to fetch dental record");const Q=await je.json(),ye={...Q,patientId:Q.Patient||Q.patientId};if(a(ye),Ee.ok){const De=await Ee.json();_(De.upi_id||""),C(De.name||""),k(De.address||""),I(De.notes||"")}const he=(ye.selected_procedures||ye.selectedProcedures||[]).map(De=>({...De,price:De.cost,discount_percentage:0}));s(he)}catch(je){console.error("Failed to fetch data:",je),d(je.message)}finally{l(!1)}})():(d("No record ID provided."),l(!1))},[e.pathname]);const oe=v.useMemo(()=>i.reduce((ae,ne)=>ae+(ne.price??0),0),[i]),Se=v.useMemo(()=>i.reduce((ae,ne)=>{const je=(ne.price??0)*(ne.discount_percentage??0)/100;return ae+je},0),[i]),Ve=v.useMemo(()=>oe-Se,[oe,Se]),Ae=v.useMemo(()=>q.reduce((ae,ne)=>ae+ne.amount,0),[q]),ue=v.useMemo(()=>Ve-Ae,[Ve,Ae]),Te=v.useMemo(()=>Math.abs(ue)<.01,[ue]),se=v.useMemo(()=>R?q.some(ae=>ae.method==="credit"&&ae.amount>0):g==="credit",[R,q,g]),be=v.useMemo(()=>R?q.filter(ae=>ae.method==="credit").reduce((ae,ne)=>ae+ne.amount,0):g==="credit"?Ve:0,[R,q,g,Ve]);return v.useEffect(()=>{if(Ve>0&&S){const ae=`upi://pay?pa=${S}&pn=${encodeURIComponent(T)}&am=${Ve.toFixed(2)}&cu=INR`;j(ae)}else j("")},[Ve,S,T]),v.useEffect(()=>{(async()=>{var ne;if(se&&((ne=n==null?void 0:n.patientId)!=null&&ne.id)){xe(!0);try{const ie=await le(`/api/patient-debts/${n.patientId.id}/balance`);if(ie.ok){const je=await ie.json();$(je.netDebt||0)}else $(0)}catch{$(0)}finally{xe(!1)}}})()},[se,(_e=n==null?void 0:n.patientId)==null?void 0:_e.id]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(te,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:30,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(ae=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:20,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:90,height:20})})]},ae))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:28}),r.jsx(te,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(te,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T||"Clinic Name"}),(E||P)&&r.jsxs("div",{className:"clinic-details-print",children:[E&&r.jsx("span",{className:"small-text clinic-address",children:E}),P&&r.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Ne=n.patientId)==null?void 0:Ne.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((Z=n.patientId)==null?void 0:Z.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date(n.date||n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(sn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Dental Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((ge=n.patientId)==null?void 0:ge.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Qa,{size:16})," Token"]})," ",((de=n.patientId)==null?void 0:de.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(aa,{size:16})," Record ID"]})," ",n.id.substring(n.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(fa,{size:16})," Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((ae,ne)=>{const ie=ae.price??0,je=ie*(ae.discount_percentage??0)/100,Ee=ie-je;return r.jsxs("tr",{children:[r.jsx("td",{children:ne+1}),r.jsx("td",{children:ae.name}),r.jsx("td",{children:ae.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ae.discount_percentage===0?"":ae.discount_percentage,onChange:Q=>Re(ne,parseFloat(Q.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Ee.toFixed(2)})]},ne)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",oe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",B.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Se.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ve.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:R?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),R&&q.map((ae,ne)=>ae.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:ae.method==="cash"?"Cash":ae.method==="upi"?"UPI":ae.method==="card"?"Card":ae.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",ae.amount.toFixed(2)]})]},ne))]}),X!==null&&(X>0||se)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(X??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(X??0).toFixed(2)]})]}),se&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((X??0)+(se?be:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(Fa,{value:b,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",oe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Se.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:B===0?"":B,onChange:ae=>Y(parseFloat(ae.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ve.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(Fa,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>z(!R),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:R?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:R?"rgba(79, 172, 254, 0.1)":"transparent",color:R?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qo,{size:14}),"Split"]})]}),R?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Ve.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:q.map((ae,ne)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ne+1}),r.jsxs("select",{value:ae.method,onChange:ie=>K(ae.id,"method",ie.target.value),className:`split-payment-select ${ae.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ae.amount||"",onChange:ie=>K(ae.id,"amount",parseFloat(ie.target.value)||0),className:`split-payment-input ${ae.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),q.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>W(ae.id,Ve),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>H(ae.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},ae.id))}),q.length<5&&r.jsxs("button",{type:"button",onClick:V,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(Vn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ae.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Te?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Te?"":ue>0?"":"",Te?"Balanced":ue>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ue).toFixed(2)]})]}),!Te&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",Ve.toFixed(2)]})]})]}):r.jsxs("select",{value:g,onChange:ae=>x(ae.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),se&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),ce?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:X&&X>0?"#dc3545":"#28a745"},children:["",(X||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",be.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((X||0)+be).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:n.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ze,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:Le,className:"primary-button",disabled:f,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Ds,{size:20})," Bill Generated"]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})]}):r.jsx("div",{className:"error-message-box",children:"No record found."})},kD=v.lazy(()=>FN(()=>import("./AddPatientPage-D5OlJ-1m.js"),__vite__mapDeps([2,3]))),qB=v.lazy(()=>FN(()=>import("./EditComplaintPage-VtvaX7c7.js"),__vite__mapDeps([0,1])));function A5e(){const[t,e]=v.useState(!1),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),f=E=>{a(E),e(!0),E.role==="admin"&&!E.has_seen_tutorial&&d(!0)},p=()=>{e(!1),a(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};v.useEffect(()=>{const E=localStorage.getItem("authToken"),k=localStorage.getItem("currentUser");if(E&&k)try{const P=JSON.parse(k);a(P),e(!0),P.role==="admin"&&!P.has_seen_tutorial&&d(!0)}catch(P){console.error("Error parsing stored user data:",P),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}s(!1)},[]);const{data:g}=iDe(t&&!!n);v.useEffect(()=>{g?l(g):t||l(null)},[g,t]);const[x,b]=v.useState(null),[j,S]=v.useState(!1);v.useEffect(()=>{const E=k=>{k.preventDefault(),b(k),S(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",E),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),S(!1)),()=>{window.removeEventListener("beforeinstallprompt",E)}},[]),v.useEffect(()=>{const E=window.matchMedia("(prefers-color-scheme: dark)"),k=()=>{E.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return k(),E.addEventListener("change",k),()=>{E.removeEventListener("change",k),document.body.classList.remove("dark-mode")}},[]);const _=v.useCallback(async()=>{if(!x){console.log("Install prompt event not available.");return}const E=x;E.prompt();const{outcome:k}=await E.userChoice;console.log(`User response to the install prompt: ${k}`),b(null),S(!1)},[x]),T=async()=>{if(n)try{(await le(`/api/users/${n.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(a(k=>k?{...k,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...n,has_seen_tutorial:!0})),d(!1)):console.error("Failed to update tutorial status on backend.")}catch(E){console.error("Error marking tutorial as seen:",E)}};return i?r.jsx(Em,{}):r.jsx(JW,{clientId:"277898779560-33obduhn8r758rini4qagetdrupvisri.apps.googleusercontent.com",children:r.jsx(EY,{children:r.jsx(kY,{children:r.jsx(AY,{children:r.jsxs(yY,{children:[r.jsx(TY,{children:r.jsxs(Tm,{children:[r.jsx(yt,{path:"/login",element:t?r.jsx(Zt,{to:"/dashboard"}):r.jsx(PDe,{onLoginSuccess:f})}),r.jsx(yt,{path:"/register",element:t?r.jsx(Zt,{to:"/dashboard"}):r.jsx(DDe,{})}),r.jsx(yt,{path:"/handle-complaint-url",element:t?r.jsx(cRe,{}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/live-api",element:t?r.jsx(Zme,{}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/create-lab-order",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(aG,{currentUser:n})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/manage-admission",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(MM,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/lab/report/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(IB,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/lab/enter-report/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(IB,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/add-patient",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(v.Suspense,{fallback:r.jsx(Em,{}),children:r.jsx(kD,{})})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/billing",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(cIe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/edit-complaint/:recordId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(Em,{}),children:r.jsx(qB,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/edit-complaint/patient/:patientId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(Em,{}),children:r.jsx(qB,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/edit-pharmacy-order/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(kG,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/guide",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(j5e,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/clinic-files",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RM,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/*",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:E5e(n.role,n,le)}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/lab/view-report/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(xIe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/lab/search-report",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(vIe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/lab-reports",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(bIe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/pharmacy-orders",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(uIe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/inventory",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(AG,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/patient-debt",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(IN,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/inventory/add",element:t&&n?r.jsx(Zt,{to:"/dashboard/purchase",replace:!0}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/dental",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(T5e,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/medical",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(yG,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/dental-billing/:id",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(k5e,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/inventory/edit/:id",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(TG,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/lab-inventory",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(LM,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/complaints",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(iIe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/admission-bill/:billId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RB,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/patient/:patientId/admission-billing",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RB,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/start-subscription/:patientId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(IIe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/start-clinic-subscription",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx($Ie,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/refill-reminders",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(lRe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/create-custom-bill",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(rG,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/pharmacy-billing/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(WRe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/lab-billing/:orderId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(KRe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/doctor-billing/:queueId",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(QRe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/custom-tables",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(P4e,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/custom-tables/:id",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(D4e,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboards",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(O4e,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboards/new",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(BB,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboards/:id",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(R4e,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboards/:id/edit",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(BB,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/analysis",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(E4e,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/clinic-hub",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ZRe,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"/dashboard/files",element:t&&n?r.jsx(Nn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(xG,{})}):r.jsx(Zt,{to:"/login"})}),r.jsx(yt,{path:"*",element:r.jsx(Zt,{to:t?"/dashboard":"/login"})})]})}),c&&(n==null?void 0:n.role)==="admin"&&r.jsx(sRe,{onClose:()=>d(!1),onMarkAsSeen:T}),t&&n&&r.jsx(P5e,{user:n}),t&&n&&r.jsx(zPe,{user:n})]})})})})})}const E5e=(t,e,n)=>{switch(t){case"superadmin":return r.jsxs(Tm,{children:[r.jsx(yt,{index:!0,element:r.jsx(nRe,{})}),r.jsx(yt,{path:"clinic-subscriptions",element:r.jsx(RIe,{})}),r.jsx(yt,{path:"clinic-subscriptions/add",element:r.jsx(LIe,{})}),r.jsx(yt,{path:"clinic-subscriptions/edit/:id",element:r.jsx(FIe,{})}),r.jsx(yt,{path:"users",element:r.jsx(BIe,{})})," ",r.jsx(yt,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(Tm,{children:[r.jsx(yt,{index:!0,element:r.jsx(cOe,{})}),r.jsx(yt,{path:"search-patient",element:r.jsx(xv,{})}),r.jsx(yt,{path:"patients",element:r.jsx(SD,{})}),r.jsx(yt,{path:"doctor",element:r.jsx(Wj,{})}),r.jsx(yt,{path:"staff",element:r.jsx(NIe,{fetchWithAuth:n})}),r.jsx(yt,{path:"staff/add",element:r.jsx(rIe,{clinicId:e==null?void 0:e.clinic_id})}),r.jsx(yt,{path:"staff/edit/:id",element:r.jsx(aIe,{})}),r.jsx(yt,{path:"roles",element:r.jsx(L4e,{})}),r.jsx(yt,{path:"patients/add",element:r.jsx(v.Suspense,{fallback:r.jsx(Em,{}),children:r.jsx(kD,{})})}),r.jsx(yt,{path:"inventory",element:r.jsx(CG,{})}),r.jsx(yt,{path:"inventory/edit/:id",element:r.jsx(TG,{})}),r.jsx(yt,{path:"distributors",element:r.jsx(LB,{})}),r.jsx(yt,{path:"patient-debts",element:r.jsx(IN,{})})," ",r.jsx(yt,{path:"purchase",element:r.jsx(FB,{})})," ",r.jsx(yt,{path:"queue",element:r.jsx(Wj,{})}),r.jsx(yt,{path:"subscriptions",element:r.jsx(DIe,{})}),r.jsx(yt,{path:"subscriptions/add",element:r.jsx(OIe,{})}),r.jsx(yt,{path:"subscriptions/edit/:id",element:r.jsx(MIe,{})}),r.jsx(yt,{path:"manage-admission",element:r.jsx(MM,{})}),r.jsx(yt,{path:"reception",element:r.jsx(zA,{currentUser:e})}),r.jsx(yt,{path:"lab",element:r.jsx(OB,{})}),r.jsx(yt,{path:"pharmacy-queue",element:r.jsx(HA,{})}),r.jsx(yt,{path:"add-order",element:r.jsx(cw,{})}),r.jsx(yt,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(Tm,{children:[r.jsx(yt,{index:!0,element:r.jsx(Zt,{to:"search-patient",replace:!0})}),r.jsx(yt,{path:"search-patient",element:r.jsx(xv,{})}),r.jsx(yt,{path:"queue",element:r.jsx(Wj,{})}),r.jsx(yt,{path:":patientId",element:r.jsx(Wj,{})}),r.jsx(yt,{path:"add-patient",element:r.jsx(v.Suspense,{fallback:r.jsx(Em,{}),children:r.jsx(kD,{})})}),r.jsx(yt,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(Tm,{children:[r.jsx(yt,{index:!0,element:r.jsx(zA,{currentUser:e})}),r.jsx(yt,{path:"reception",element:r.jsx(zA,{currentUser:e})})," ",r.jsx(yt,{path:"all-patients",element:r.jsx(SD,{})}),r.jsx(yt,{path:"search-patient",element:r.jsx(xv,{})}),r.jsx(yt,{path:"clinic-files",element:r.jsx(RM,{})}),r.jsx(yt,{path:"add-order",element:r.jsx(cw,{})}),r.jsx(yt,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(OB,{});case"pharmacy":return r.jsxs(Tm,{children:[r.jsx(yt,{index:!0,element:r.jsx(HA,{})}),r.jsx(yt,{path:"pharmacy-queue",element:r.jsx(HA,{})})," ",r.jsx(yt,{path:"inventory",element:r.jsx(AG,{})}),r.jsx(yt,{path:"settings",element:r.jsx(nIe,{})}),r.jsx(yt,{path:"add-order",element:r.jsx(cw,{})}),r.jsx(yt,{path:"edit-pharmacy-order/:orderId",element:r.jsx(kG,{})}),r.jsx(yt,{path:"orders/:orderId",element:r.jsx(_Ie,{})}),r.jsx(yt,{path:"search-patient-records",element:r.jsx(xv,{})}),r.jsx(yt,{path:"distributors",element:r.jsx(LB,{})}),r.jsx(yt,{path:"patient-debts",element:r.jsx(IN,{})})," ",r.jsx(yt,{path:"purchase",element:r.jsx(FB,{})})," ",r.jsx(yt,{path:"*",element:r.jsx(Zt,{to:"/dashboard",replace:!0})})]});default:return r.jsxs("div",{children:["Unknown role (",t,") or dashboard not implemented."]},t)}},Nn=({user:t,onLogout:e,children:n,showInstallPrompt:a,onInstallClick:i,clinicProPlanStatus:s})=>{const o=Ft(),[l,c]=v.useState(!1),[d,f]=v.useState(window.innerWidth<=768),[p,g]=v.useState(null),[x,b]=v.useState(!1);v.useEffect(()=>GE.subscribe(T=>{b(T)}),[]),v.useEffect(()=>{const T=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const C=await le("/api/clinics/settings");if(C.ok){const E=await C.json();g(E.logoUrl)}else console.error("Failed to fetch clinic details for display:",C.statusText),g(null)}catch(C){console.error("Error fetching clinic details for display:",C),g(null)}else g(null)})()},[t==null?void 0:t.clinic_id]);const j=()=>{c(!l)},{toggleCommandBar:S,isOpen:_}=Rc();return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),o("/dashboard")},className:"logo-container",children:r.jsx("img",{src:p||"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("span",{className:"app-title-link",children:"Newtons Ai"}),r.jsxs("span",{className:"user-role-panel",children:["(",t.role.charAt(0).toUpperCase()+t.role.slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[a&&r.jsxs("button",{onClick:i,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),r.jsxs("a",{href:"https://store.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"shop-button",title:"Visit Store",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),r.jsx("span",{children:"Shop"})]}),!d&&r.jsxs("button",{onClick:()=>o("/dashboard/guide"),className:"guide-button",title:"User Guide",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),r.jsx("span",{children:"Guide"})]}),s&&(s.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>o("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),!_&&r.jsx("button",{onClick:S,className:"command-bar-button",title:"Search & Commands (Ctrl+K)",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"m21 21-4.3-4.3"})]})}),r.jsx("button",{className:"hamburger-icon",onClick:j,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),x&&r.jsx("div",{className:"global-loading-bar"})]}),r.jsxs("main",{className:"main-content",children:[r.jsx(RDe,{}),n]}),d?r.jsx(MDe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j,roleNavigation:XH}):r.jsx(ODe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j})]})},P5e=({user:t})=>{const{isOpen:e,closeAssistant:n}=zN(),a=Ft(),[i,s]=v.useState(null),[o,l]=v.useState([]);return v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const[d,f]=await Promise.all([le("/api/clinics/settings"),le("/api/staff")]);d.ok&&s(await d.json()),f.ok&&l(await f.json())}catch(d){console.error("Failed to fetch initial AI context",d)}})()},[t.clinic_id]),e?r.jsx("div",{className:"ai-assistant-wrapper",children:r.jsx(JH,{onClose:n,settings:i,staffList:o,onSettingsUpdate:()=>{},onStaffUpdate:()=>{},onHighlight:c=>{c.forEach(d=>{if(d.startsWith("navigate_")){const f=d.replace("navigate_","");a(`/dashboard/analysis?section=${f}`)}else{const f=document.getElementById(d);f&&(f.scrollIntoView({behavior:"smooth",block:"center"}),f.classList.add("ai-highlight-glow"),setTimeout(()=>f.classList.remove("ai-highlight-glow"),2e3))}})}})}):null};uW.createRoot(document.getElementById("root")).render(r.jsx(v.StrictMode,{children:r.jsx(IW,{client:KW,children:r.jsx(A5e,{})})}));export{oRe as $,sn as A,TOe as B,Eb as C,cd as D,Lm as E,co as F,wU as G,Qa as H,kOe as I,xc as J,jf as K,sS as L,Nf as M,En as N,kI as O,bf as P,Fa as Q,Ce as R,te as S,Wn as T,VN as U,EG as V,dd as W,Lt as X,WD as Y,qN as Z,SI as _,Yc as a,eq as b,dt as c,cs as d,NU as e,le as f,Hn as g,uRe as h,fa as i,r as j,Vn as k,Jn as l,UD as m,Sf as n,LN as o,Rc as p,Gt as q,v as r,$a as s,ds as t,Ft as u,zr as v,aa as w,Wo as x,eX as y,Uz as z};

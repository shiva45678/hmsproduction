const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditComplaintPage-ClwQgdUk.js","assets/EditComplaintPage-Db0NRUwT.css","assets/AddPatientPage-u-NKOyVF.js","assets/AddPatientPage-CvaX_3Vg.css"])))=>i.map(i=>d[i]);
var mW=Object.defineProperty;var JM=t=>{throw TypeError(t)};var gW=(t,e,n)=>e in t?mW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Nr=(t,e,n)=>gW(t,typeof e!="symbol"?e+"":e,n),J_=(t,e,n)=>e.has(t)||JM("Cannot "+n);var $e=(t,e,n)=>(J_(t,e,"read from private field"),n?n.call(t):e.get(t)),Ht=(t,e,n)=>e.has(t)?JM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Et=(t,e,n,a)=>(J_(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n),_n=(t,e,n)=>(J_(t,e,"access private method"),n);var x1=(t,e,n,a)=>({set _(i){Et(t,e,i,n)},get _(){return $e(t,e,a)}});function yW(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(a,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Z_={exports:{}},Wx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZM;function xW(){if(ZM)return Wx;ZM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:a,key:o,ref:i!==void 0?i:null,props:s}}return Wx.Fragment=e,Wx.jsx=n,Wx.jsxs=n,Wx}var eI;function vW(){return eI||(eI=1,Z_.exports=xW()),Z_.exports}var r=vW(),eC={exports:{}},jn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI;function bW(){if(tI)return jn;tI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(L){return L===null||typeof L!="object"?null:(L=p&&L[p]||L["@@iterator"],typeof L=="function"?L:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function w(L,te,me){this.props=L,this.context=te,this.refs=j,this.updater=me||x}w.prototype.isReactComponent={},w.prototype.setState=function(L,te){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,te,"setState")},w.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function _(){}_.prototype=w.prototype;function k(L,te,me){this.props=L,this.context=te,this.refs=j,this.updater=me||x}var C=k.prototype=new _;C.constructor=k,b(C,w.prototype),C.isPureReactComponent=!0;var A=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function I(L,te,me,X,Re,Se){return me=Se.ref,{$$typeof:t,type:L,key:te,ref:me!==void 0?me:null,props:Se}}function $(L,te){return I(L.type,te,void 0,void 0,void 0,L.props)}function U(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function B(L){var te={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(me){return te[me]})}var R=/\/+/g;function z(L,te){return typeof L=="object"&&L!==null&&L.key!=null?B(""+L.key):te.toString(36)}function G(){}function K(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(G,G):(L.status="pending",L.then(function(te){L.status==="pending"&&(L.status="fulfilled",L.value=te)},function(te){L.status==="pending"&&(L.status="rejected",L.reason=te)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Y(L,te,me,X,Re){var Se=typeof L;(Se==="undefined"||Se==="boolean")&&(L=null);var Ee=!1;if(L===null)Ee=!0;else switch(Se){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(L.$$typeof){case t:case e:Ee=!0;break;case h:return Ee=L._init,Y(Ee(L._payload),te,me,X,Re)}}if(Ee)return Re=Re(L),Ee=X===""?"."+z(L,0):X,A(Re)?(me="",Ee!=null&&(me=Ee.replace(R,"$&/")+"/"),Y(Re,te,me,"",function(_e){return _e})):Re!=null&&(U(Re)&&(Re=$(Re,me+(Re.key==null||L&&L.key===Re.key?"":(""+Re.key).replace(R,"$&/")+"/")+Ee)),te.push(Re)),1;Ee=0;var Fe=X===""?".":X+":";if(A(L))for(var le=0;le<L.length;le++)X=L[le],Se=Fe+z(X,le),Ee+=Y(X,te,me,Se,Re);else if(le=m(L),typeof le=="function")for(L=le.call(L),le=0;!(X=L.next()).done;)X=X.value,Se=Fe+z(X,le++),Ee+=Y(X,te,me,Se,Re);else if(Se==="object"){if(typeof L.then=="function")return Y(K(L),te,me,X,Re);throw te=String(L),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function q(L,te,me){if(L==null)return L;var X=[],Re=0;return Y(L,X,"","",function(Se){return te.call(me,Se,Re++)}),X}function V(L){if(L._status===-1){var te=L._result;te=te(),te.then(function(me){(L._status===0||L._status===-1)&&(L._status=1,L._result=me)},function(me){(L._status===0||L._status===-1)&&(L._status=2,L._result=me)}),L._status===-1&&(L._status=0,L._result=te)}if(L._status===1)return L._result.default;throw L._result}var H=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Q(){}return jn.Children={map:q,forEach:function(L,te,me){q(L,function(){te.apply(this,arguments)},me)},count:function(L){var te=0;return q(L,function(){te++}),te},toArray:function(L){return q(L,function(te){return te})||[]},only:function(L){if(!U(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},jn.Component=w,jn.Fragment=n,jn.Profiler=i,jn.PureComponent=k,jn.StrictMode=a,jn.Suspense=c,jn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,jn.__COMPILER_RUNTIME={__proto__:null,c:function(L){return T.H.useMemoCache(L)}},jn.cache=function(L){return function(){return L.apply(null,arguments)}},jn.cloneElement=function(L,te,me){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var X=b({},L.props),Re=L.key,Se=void 0;if(te!=null)for(Ee in te.ref!==void 0&&(Se=void 0),te.key!==void 0&&(Re=""+te.key),te)!E.call(te,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&te.ref===void 0||(X[Ee]=te[Ee]);var Ee=arguments.length-2;if(Ee===1)X.children=me;else if(1<Ee){for(var Fe=Array(Ee),le=0;le<Ee;le++)Fe[le]=arguments[le+2];X.children=Fe}return I(L.type,Re,void 0,void 0,Se,X)},jn.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:s,_context:L},L},jn.createElement=function(L,te,me){var X,Re={},Se=null;if(te!=null)for(X in te.key!==void 0&&(Se=""+te.key),te)E.call(te,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(Re[X]=te[X]);var Ee=arguments.length-2;if(Ee===1)Re.children=me;else if(1<Ee){for(var Fe=Array(Ee),le=0;le<Ee;le++)Fe[le]=arguments[le+2];Re.children=Fe}if(L&&L.defaultProps)for(X in Ee=L.defaultProps,Ee)Re[X]===void 0&&(Re[X]=Ee[X]);return I(L,Se,void 0,void 0,null,Re)},jn.createRef=function(){return{current:null}},jn.forwardRef=function(L){return{$$typeof:l,render:L}},jn.isValidElement=U,jn.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:V}},jn.memo=function(L,te){return{$$typeof:u,type:L,compare:te===void 0?null:te}},jn.startTransition=function(L){var te=T.T,me={};T.T=me;try{var X=L(),Re=T.S;Re!==null&&Re(me,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(Q,H)}catch(Se){H(Se)}finally{T.T=te}},jn.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},jn.use=function(L){return T.H.use(L)},jn.useActionState=function(L,te,me){return T.H.useActionState(L,te,me)},jn.useCallback=function(L,te){return T.H.useCallback(L,te)},jn.useContext=function(L){return T.H.useContext(L)},jn.useDebugValue=function(){},jn.useDeferredValue=function(L,te){return T.H.useDeferredValue(L,te)},jn.useEffect=function(L,te,me){var X=T.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(L,te)},jn.useId=function(){return T.H.useId()},jn.useImperativeHandle=function(L,te,me){return T.H.useImperativeHandle(L,te,me)},jn.useInsertionEffect=function(L,te){return T.H.useInsertionEffect(L,te)},jn.useLayoutEffect=function(L,te){return T.H.useLayoutEffect(L,te)},jn.useMemo=function(L,te){return T.H.useMemo(L,te)},jn.useOptimistic=function(L,te){return T.H.useOptimistic(L,te)},jn.useReducer=function(L,te,me){return T.H.useReducer(L,te,me)},jn.useRef=function(L){return T.H.useRef(L)},jn.useState=function(L){return T.H.useState(L)},jn.useSyncExternalStore=function(L,te,me){return T.H.useSyncExternalStore(L,te,me)},jn.useTransition=function(){return T.H.useTransition()},jn.version="19.1.0",jn}var nI;function FD(){return nI||(nI=1,eC.exports=bW()),eC.exports}var v=FD();const Te=Kn(v),rI=yW({__proto__:null,default:Te},[v]);var tC={exports:{}},Kx={},nC={exports:{}},rC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aI;function jW(){return aI||(aI=1,function(t){function e(q,V){var H=q.length;q.push(V);e:for(;0<H;){var Q=H-1>>>1,L=q[Q];if(0<i(L,V))q[Q]=V,q[H]=L,H=Q;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var V=q[0],H=q.pop();if(H!==V){q[0]=H;e:for(var Q=0,L=q.length,te=L>>>1;Q<te;){var me=2*(Q+1)-1,X=q[me],Re=me+1,Se=q[Re];if(0>i(X,H))Re<L&&0>i(Se,X)?(q[Q]=Se,q[Re]=H,Q=Re):(q[Q]=X,q[me]=H,Q=me);else if(Re<L&&0>i(Se,H))q[Q]=Se,q[Re]=H,Q=Re;else break e}}return V}function i(q,V){var H=q.sortIndex-V.sortIndex;return H!==0?H:q.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,p=null,m=3,x=!1,b=!1,j=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(q){for(var V=n(u);V!==null;){if(V.callback===null)a(u);else if(V.startTime<=q)a(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(u)}}function T(q){if(j=!1,A(q),!b)if(n(c)!==null)b=!0,E||(E=!0,z());else{var V=n(u);V!==null&&Y(T,V.startTime-q)}}var E=!1,I=-1,$=5,U=-1;function B(){return w?!0:!(t.unstable_now()-U<$)}function R(){if(w=!1,E){var q=t.unstable_now();U=q;var V=!0;try{e:{b=!1,j&&(j=!1,k(I),I=-1),x=!0;var H=m;try{t:{for(A(q),p=n(c);p!==null&&!(p.expirationTime>q&&B());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,m=p.priorityLevel;var L=Q(p.expirationTime<=q);if(q=t.unstable_now(),typeof L=="function"){p.callback=L,A(q),V=!0;break t}p===n(c)&&a(c),A(q)}else a(c);p=n(c)}if(p!==null)V=!0;else{var te=n(u);te!==null&&Y(T,te.startTime-q),V=!1}}break e}finally{p=null,m=H,x=!1}V=void 0}}finally{V?z():E=!1}}}var z;if(typeof C=="function")z=function(){C(R)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,K=G.port2;G.port1.onmessage=R,z=function(){K.postMessage(null)}}else z=function(){_(R,0)};function Y(q,V){I=_(function(){q(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var H=m;m=V;try{return q()}finally{m=H}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(q,V){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var H=m;m=q;try{return V()}finally{m=H}},t.unstable_scheduleCallback=function(q,V,H){var Q=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Q+H:Q):H=Q,q){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=H+L,q={id:h++,callback:V,priorityLevel:q,startTime:H,expirationTime:L,sortIndex:-1},H>Q?(q.sortIndex=H,e(u,q),n(c)===null&&q===n(u)&&(j?(k(I),I=-1):j=!0,Y(T,H-Q))):(q.sortIndex=L,e(c,q),b||x||(b=!0,E||(E=!0,z()))),q},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(q){var V=m;return function(){var H=m;m=V;try{return q.apply(this,arguments)}finally{m=H}}}}(rC)),rC}var iI;function wW(){return iI||(iI=1,nC.exports=jW()),nC.exports}var aC={exports:{}},hi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sI;function NW(){if(sI)return hi;sI=1;var t=FD();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,u,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:u,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return hi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,hi.createPortal=function(c,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(c,u,null,h)},hi.flushSync=function(c){var u=o.T,h=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=u,a.p=h,a.d.f()}},hi.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,a.d.C(c,u))},hi.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},hi.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var h=u.as,p=l(h,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?a.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:x}):h==="script"&&a.d.X(c,{crossOrigin:p,integrity:m,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},hi.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=l(u.as,u.crossOrigin);a.d.M(c,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&a.d.M(c)},hi.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,p=l(h,u.crossOrigin);a.d.L(c,h,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},hi.preloadModule=function(c,u){if(typeof c=="string")if(u){var h=l(u.as,u.crossOrigin);a.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else a.d.m(c)},hi.requestFormReset=function(c){a.d.r(c)},hi.unstable_batchedUpdates=function(c,u){return c(u)},hi.useFormState=function(c,u,h){return o.H.useFormState(c,u,h)},hi.useFormStatus=function(){return o.H.useHostTransitionStatus()},hi.version="19.1.0",hi}var oI;function yz(){if(oI)return aC.exports;oI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),aC.exports=NW(),aC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI;function SW(){if(lI)return Kx;lI=1;var t=wW(),e=FD(),n=yz();function a(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var f=d,g=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,(f.flags&4098)!==0&&(g=f.return),d=f.return;while(d)}return f.tag===3?g:null}function o(d){if(d.tag===13){var f=d.memoizedState;if(f===null&&(d=d.alternate,d!==null&&(f=d.memoizedState)),f!==null)return f.dehydrated}return null}function l(d){if(s(d)!==d)throw Error(a(188))}function c(d){var f=d.alternate;if(!f){if(f=s(d),f===null)throw Error(a(188));return f!==d?null:d}for(var g=d,S=f;;){var P=g.return;if(P===null)break;var F=P.alternate;if(F===null){if(S=P.return,S!==null){g=S;continue}break}if(P.child===F.child){for(F=P.child;F;){if(F===g)return l(P),d;if(F===S)return l(P),f;F=F.sibling}throw Error(a(188))}if(g.return!==S.return)g=P,S=F;else{for(var Z=!1,pe=P.child;pe;){if(pe===g){Z=!0,g=P,S=F;break}if(pe===S){Z=!0,S=P,g=F;break}pe=pe.sibling}if(!Z){for(pe=F.child;pe;){if(pe===g){Z=!0,g=F,S=P;break}if(pe===S){Z=!0,S=F,g=P;break}pe=pe.sibling}if(!Z)throw Error(a(189))}}if(g.alternate!==S)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?d:f}function u(d){var f=d.tag;if(f===5||f===26||f===27||f===6)return d;for(d=d.child;d!==null;){if(f=u(d),f!==null)return f;d=d.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function z(d){return d===null||typeof d!="object"?null:(d=R&&d[R]||d["@@iterator"],typeof d=="function"?d:null)}var G=Symbol.for("react.client.reference");function K(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===G?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case b:return"Fragment";case w:return"Profiler";case j:return"StrictMode";case T:return"Suspense";case E:return"SuspenseList";case U:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case x:return"Portal";case C:return(d.displayName||"Context")+".Provider";case k:return(d._context.displayName||"Context")+".Consumer";case A:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case I:return f=d.displayName||null,f!==null?f:K(d.type)||"Memo";case $:f=d._payload,d=d._init;try{return K(d(f))}catch{}}return null}var Y=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},Q=[],L=-1;function te(d){return{current:d}}function me(d){0>L||(d.current=Q[L],Q[L]=null,L--)}function X(d,f){L++,Q[L]=d.current,d.current=f}var Re=te(null),Se=te(null),Ee=te(null),Fe=te(null);function le(d,f){switch(X(Ee,f),X(Se,d),X(Re,null),f.nodeType){case 9:case 11:d=(d=f.documentElement)&&(d=d.namespaceURI)?Rr(d):0;break;default:if(d=f.tagName,f=f.namespaceURI)f=Rr(f),d=Vr(f,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}me(Re),X(Re,d)}function _e(){me(Re),me(Se),me(Ee)}function Ve(d){d.memoizedState!==null&&X(Fe,d);var f=Re.current,g=Vr(f,d.type);f!==g&&(X(Se,d),X(Re,g))}function De(d){Se.current===d&&(me(Re),me(Se)),Fe.current===d&&(me(Fe),Uu._currentValue=H)}var ue=Object.prototype.hasOwnProperty,Ae=t.unstable_scheduleCallback,ce=t.unstable_cancelCallback,be=t.unstable_shouldYield,ke=t.unstable_requestPaint,Ce=t.unstable_now,ne=t.unstable_getCurrentPriorityLevel,ye=t.unstable_ImmediatePriority,de=t.unstable_UserBlockingPriority,se=t.unstable_NormalPriority,re=t.unstable_LowPriority,oe=t.unstable_IdlePriority,je=t.log,Oe=t.unstable_setDisableYieldValue,J=null,xe=null;function ge(d){if(typeof je=="function"&&Oe(d),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(J,d)}catch{}}var he=Math.clz32?Math.clz32:Be,Ie=Math.log,nt=Math.LN2;function Be(d){return d>>>=0,d===0?32:31-(Ie(d)/nt|0)|0}var Ge=256,it=4194304;function wt(d){var f=d&42;if(f!==0)return f;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function we(d,f,g){var S=d.pendingLanes;if(S===0)return 0;var P=0,F=d.suspendedLanes,Z=d.pingedLanes;d=d.warmLanes;var pe=S&134217727;return pe!==0?(S=pe&~F,S!==0?P=wt(S):(Z&=pe,Z!==0?P=wt(Z):g||(g=pe&~d,g!==0&&(P=wt(g))))):(pe=S&~F,pe!==0?P=wt(pe):Z!==0?P=wt(Z):g||(g=S&~d,g!==0&&(P=wt(g)))),P===0?0:f!==0&&f!==P&&(f&F)===0&&(F=P&-P,g=f&-f,F>=g||F===32&&(g&4194048)!==0)?f:P}function Qe(d,f){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&f)===0}function Xe(d,f){switch(d){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ut(){var d=Ge;return Ge<<=1,(Ge&4194048)===0&&(Ge=256),d}function Ct(){var d=it;return it<<=1,(it&62914560)===0&&(it=4194304),d}function bt(d){for(var f=[],g=0;31>g;g++)f.push(d);return f}function Pe(d,f){d.pendingLanes|=f,f!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function ot(d,f,g,S,P,F){var Z=d.pendingLanes;d.pendingLanes=g,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=g,d.entangledLanes&=g,d.errorRecoveryDisabledLanes&=g,d.shellSuspendCounter=0;var pe=d.entanglements,Le=d.expirationTimes,Je=d.hiddenUpdates;for(g=Z&~g;0<g;){var dt=31-he(g),pt=1<<dt;pe[dt]=0,Le[dt]=-1;var tt=Je[dt];if(tt!==null)for(Je[dt]=null,dt=0;dt<tt.length;dt++){var Ze=tt[dt];Ze!==null&&(Ze.lane&=-536870913)}g&=~pt}S!==0&&kt(d,S,0),F!==0&&P===0&&d.tag!==0&&(d.suspendedLanes|=F&~(Z&~f))}function kt(d,f,g){d.pendingLanes|=f,d.suspendedLanes&=~f;var S=31-he(f);d.entangledLanes|=f,d.entanglements[S]=d.entanglements[S]|1073741824|g&4194090}function Ue(d,f){var g=d.entangledLanes|=f;for(d=d.entanglements;g;){var S=31-he(g),P=1<<S;P&f|d[S]&f&&(d[S]|=f),g&=~P}}function jt(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Tt(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Qn(){var d=V.p;return d!==0?d:(d=window.event,d===void 0?32:h1(d.type))}function vt(d,f){var g=V.p;try{return V.p=d,f()}finally{V.p=g}}var It=Math.random().toString(36).slice(2),Gt="__reactFiber$"+It,Xn="__reactProps$"+It,jr="__reactContainer$"+It,Va="__reactEvents$"+It,ta="__reactListeners$"+It,Sa="__reactHandles$"+It,gn="__reactResources$"+It,Gr="__reactMarker$"+It;function An(d){delete d[Gt],delete d[Xn],delete d[Va],delete d[ta],delete d[Sa]}function Fn(d){var f=d[Gt];if(f)return f;for(var g=d.parentNode;g;){if(f=g[jr]||g[Gt]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(d=e1(d);d!==null;){if(g=d[Gt])return g;d=e1(d)}return f}d=g,g=d.parentNode}return null}function et(d){if(d=d[Gt]||d[jr]){var f=d.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return d}return null}function yt(d){var f=d.tag;if(f===5||f===26||f===27||f===6)return d.stateNode;throw Error(a(33))}function St(d){var f=d[gn];return f||(f=d[gn]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Rt(d){d[Gr]=!0}var Cn=new Set,$n={};function _a(d,f){bi(d,f),bi(d+"Capture",f)}function bi(d,f){for($n[d]=f,d=0;d<f.length;d++)Cn.add(f[d])}var po=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Md={},Id={};function WS(d){return ue.call(Id,d)?!0:ue.call(Md,d)?!1:po.test(d)?Id[d]=!0:(Md[d]=!0,!1)}function Wf(d,f,g){if(WS(f))if(g===null)d.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":d.removeAttribute(f);return;case"boolean":var S=f.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){d.removeAttribute(f);return}}d.setAttribute(f,""+g)}}function Kf(d,f,g){if(g===null)d.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(f);return}d.setAttribute(f,""+g)}}function Bs(d,f,g,S){if(S===null)d.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(g);return}d.setAttributeNS(f,g,""+S)}}var Yf,ny;function Zc(d){if(Yf===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);Yf=f&&f[1]||"",ny=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yf+d+ny}var ry=!1;function ay(d,f){if(!d||ry)return"";ry=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(Ze){var tt=Ze}Reflect.construct(d,[],pt)}else{try{pt.call()}catch(Ze){tt=Ze}d.call(pt.prototype)}}else{try{throw Error()}catch(Ze){tt=Ze}(pt=d())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(Ze){if(Ze&&tt&&typeof Ze.stack=="string")return[Ze.stack,tt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=S.DetermineComponentFrameRoot(),Z=F[0],pe=F[1];if(Z&&pe){var Le=Z.split(`
`),Je=pe.split(`
`);for(P=S=0;S<Le.length&&!Le[S].includes("DetermineComponentFrameRoot");)S++;for(;P<Je.length&&!Je[P].includes("DetermineComponentFrameRoot");)P++;if(S===Le.length||P===Je.length)for(S=Le.length-1,P=Je.length-1;1<=S&&0<=P&&Le[S]!==Je[P];)P--;for(;1<=S&&0<=P;S--,P--)if(Le[S]!==Je[P]){if(S!==1||P!==1)do if(S--,P--,0>P||Le[S]!==Je[P]){var dt=`
`+Le[S].replace(" at new "," at ");return d.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",d.displayName)),dt}while(1<=S&&0<=P);break}}}finally{ry=!1,Error.prepareStackTrace=g}return(g=d?d.displayName||d.name:"")?Zc(g):""}function KS(d){switch(d.tag){case 26:case 27:case 5:return Zc(d.type);case 16:return Zc("Lazy");case 13:return Zc("Suspense");case 19:return Zc("SuspenseList");case 0:case 15:return ay(d.type,!1);case 11:return ay(d.type.render,!1);case 1:return ay(d.type,!0);case 31:return Zc("Activity");default:return""}}function iy(d){try{var f="";do f+=KS(d),d=d.return;while(d);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function ji(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function sy(d){var f=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function oy(d){var f=sy(d)?"checked":"value",g=Object.getOwnPropertyDescriptor(d.constructor.prototype,f),S=""+d[f];if(!d.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var P=g.get,F=g.set;return Object.defineProperty(d,f,{configurable:!0,get:function(){return P.call(this)},set:function(Z){S=""+Z,F.call(this,Z)}}),Object.defineProperty(d,f,{enumerable:g.enumerable}),{getValue:function(){return S},setValue:function(Z){S=""+Z},stopTracking:function(){d._valueTracker=null,delete d[f]}}}}function Qf(d){d._valueTracker||(d._valueTracker=oy(d))}function ly(d){if(!d)return!1;var f=d._valueTracker;if(!f)return!0;var g=f.getValue(),S="";return d&&(S=sy(d)?d.checked?"true":"false":d.value),d=S,d!==g?(f.setValue(d),!0):!1}function Yl(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var t0=/[\n"\\]/g;function Hi(d){return d.replace(t0,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Xf(d,f,g,S,P,F,Z,pe){d.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?d.type=Z:d.removeAttribute("type"),f!=null?Z==="number"?(f===0&&d.value===""||d.value!=f)&&(d.value=""+ji(f)):d.value!==""+ji(f)&&(d.value=""+ji(f)):Z!=="submit"&&Z!=="reset"||d.removeAttribute("value"),f!=null?Rd(d,Z,ji(f)):g!=null?Rd(d,Z,ji(g)):S!=null&&d.removeAttribute("value"),P==null&&F!=null&&(d.defaultChecked=!!F),P!=null&&(d.checked=P&&typeof P!="function"&&typeof P!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?d.name=""+ji(pe):d.removeAttribute("name")}function cy(d,f,g,S,P,F,Z,pe){if(F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(d.type=F),f!=null||g!=null){if(!(F!=="submit"&&F!=="reset"||f!=null))return;g=g!=null?""+ji(g):"",f=f!=null?""+ji(f):g,pe||f===d.value||(d.value=f),d.defaultValue=f}S=S??P,S=typeof S!="function"&&typeof S!="symbol"&&!!S,d.checked=pe?d.checked:!!S,d.defaultChecked=!!S,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(d.name=Z)}function Rd(d,f,g){f==="number"&&Yl(d.ownerDocument)===d||d.defaultValue===""+g||(d.defaultValue=""+g)}function eu(d,f,g,S){if(d=d.options,f){f={};for(var P=0;P<g.length;P++)f["$"+g[P]]=!0;for(g=0;g<d.length;g++)P=f.hasOwnProperty("$"+d[g].value),d[g].selected!==P&&(d[g].selected=P),P&&S&&(d[g].defaultSelected=!0)}else{for(g=""+ji(g),f=null,P=0;P<d.length;P++){if(d[P].value===g){d[P].selected=!0,S&&(d[P].defaultSelected=!0);return}f!==null||d[P].disabled||(f=d[P])}f!==null&&(f.selected=!0)}}function uy(d,f,g){if(f!=null&&(f=""+ji(f),f!==d.value&&(d.value=f),g==null)){d.defaultValue!==f&&(d.defaultValue=f);return}d.defaultValue=g!=null?""+ji(g):""}function Jf(d,f,g,S){if(f==null){if(S!=null){if(g!=null)throw Error(a(92));if(Y(S)){if(1<S.length)throw Error(a(93));S=S[0]}g=S}g==null&&(g=""),f=g}g=ji(f),d.defaultValue=g,S=d.textContent,S===g&&S!==""&&S!==null&&(d.value=S)}function Qo(d,f){if(f){var g=d.firstChild;if(g&&g===d.lastChild&&g.nodeType===3){g.nodeValue=f;return}}d.textContent=f}var tu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dy(d,f,g){var S=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?S?d.setProperty(f,""):f==="float"?d.cssFloat="":d[f]="":S?d.setProperty(f,g):typeof g!="number"||g===0||tu.has(f)?f==="float"?d.cssFloat=g:d[f]=(""+g).trim():d[f]=g+"px"}function hy(d,f,g){if(f!=null&&typeof f!="object")throw Error(a(62));if(d=d.style,g!=null){for(var S in g)!g.hasOwnProperty(S)||f!=null&&f.hasOwnProperty(S)||(S.indexOf("--")===0?d.setProperty(S,""):S==="float"?d.cssFloat="":d[S]="");for(var P in f)S=f[P],f.hasOwnProperty(P)&&g[P]!==S&&dy(d,P,S)}else for(var F in f)f.hasOwnProperty(F)&&dy(d,F,f[F])}function fy(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),r0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ld(d){return r0.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Zf=null;function py(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var nu=null,ru=null;function my(d){var f=et(d);if(f&&(d=f.stateNode)){var g=d[Xn]||null;e:switch(d=f.stateNode,f.type){case"input":if(Xf(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=d;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Hi(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var S=g[f];if(S!==d&&S.form===d.form){var P=S[Xn]||null;if(!P)throw Error(a(90));Xf(S,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name)}}for(f=0;f<g.length;f++)S=g[f],S.form===d.form&&ly(S)}break e;case"textarea":uy(d,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&eu(d,!!g.multiple,f,!1)}}}var gy=!1;function a0(d,f,g){if(gy)return d(f,g);gy=!0;try{var S=d(f);return S}finally{if(gy=!1,(nu!==null||ru!==null)&&(Zp(),nu&&(f=nu,d=ru,ru=nu=null,my(f),d)))for(f=0;f<d.length;f++)my(d[f])}}function Fd(d,f){var g=d.stateNode;if(g===null)return null;var S=g[Xn]||null;if(S===null)return null;g=S[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(d=d.type,S=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!S;break e;default:d=!1}if(d)return null;if(g&&typeof g!="function")throw Error(a(231,f,typeof g));return g}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$d=!1;if(mo)try{var Bd={};Object.defineProperty(Bd,"passive",{get:function(){$d=!0}}),window.addEventListener("test",Bd,Bd),window.removeEventListener("test",Bd,Bd)}catch{$d=!1}var Xo=null,yy=null,ep=null;function i0(){if(ep)return ep;var d,f=yy,g=f.length,S,P="value"in Xo?Xo.value:Xo.textContent,F=P.length;for(d=0;d<g&&f[d]===P[d];d++);var Z=g-d;for(S=1;S<=Z&&f[g-S]===P[F-S];S++);return ep=P.slice(d,1<S?1-S:void 0)}function cr(d){var f=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&f===13&&(d=13)):d=f,d===10&&(d=13),32<=d||d===13?d:0}function nr(){return!0}function s0(){return!1}function Za(d){function f(g,S,P,F,Z){this._reactName=g,this._targetInst=P,this.type=S,this.nativeEvent=F,this.target=Z,this.currentTarget=null;for(var pe in d)d.hasOwnProperty(pe)&&(g=d[pe],this[pe]=g?g(F):F[pe]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?nr:s0,this.isPropagationStopped=s0,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),f}var Ql={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=Za(Ql),zd=h({},Ql,{view:0,detail:0}),YS=Za(zd),np,xy,ea,au=h({},zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==ea&&(ea&&d.type==="mousemove"?(np=d.screenX-ea.screenX,xy=d.screenY-ea.screenY):xy=np=0,ea=d),np)},movementY:function(d){return"movementY"in d?d.movementY:xy}}),Jo=Za(au),o0=h({},au,{dataTransfer:0}),vy=Za(o0),Gi=h({},zd,{relatedTarget:0}),rp=Za(Gi),l0=h({},Ql,{animationName:0,elapsedTime:0,pseudoElement:0}),c0=Za(l0),u0=h({},Ql,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),d0=Za(u0),h0=h({},Ql,{data:0}),ei=Za(h0),QS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f0(d){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(d):(d=XS[d])?!!f[d]:!1}function zs(){return f0}var ap=h({},zd,{key:function(d){if(d.key){var f=QS[d.key]||d.key;if(f!=="Unidentified")return f}return d.type==="keypress"?(d=cr(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Wi[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(d){return d.type==="keypress"?cr(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?cr(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),by=Za(ap),Dr=h({},au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),go=Za(Dr),jy=h({},zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),JS=Za(jy),wy=h({},Ql,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZS=Za(wy),e_=h({},au,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),t_=Za(e_),p0=h({},Ql,{newState:0,oldState:0}),ip=Za(p0),iu=[9,13,27,32],Ny=mo&&"CompositionEvent"in window,su=null;mo&&"documentMode"in document&&(su=document.documentMode);var m0=mo&&"TextEvent"in window&&!su,sp=mo&&(!Ny||su&&8<su&&11>=su),op=" ",Sy=!1;function g0(d,f){switch(d){case"keyup":return iu.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lp(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Zo=!1;function n_(d,f){switch(d){case"compositionend":return lp(f);case"keypress":return f.which!==32?null:(Sy=!0,op);case"textInput":return d=f.data,d===op&&Sy?null:d;default:return null}}function y0(d,f){if(Zo)return d==="compositionend"||!Ny&&g0(d,f)?(d=i0(),ep=yy=Xo=null,Zo=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return sp&&f.locale!=="ko"?null:f.data;default:return null}}var wi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cp(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f==="input"?!!wi[d.type]:f==="textarea"}function ou(d,f,g,S){nu?ru?ru.push(S):ru=[S]:nu=S,f=sm(f,"onChange"),0<f.length&&(g=new tp("onChange","change",null,g,S),d.push({event:g,listeners:f}))}var lu=null,cu=null;function r_(d){Gj(d,0)}function up(d){var f=yt(d);if(ly(f))return d}function x0(d,f){if(d==="change")return f}var v0=!1;if(mo){var _y;if(mo){var el="oninput"in document;if(!el){var b0=document.createElement("div");b0.setAttribute("oninput","return;"),el=typeof b0.oninput=="function"}_y=el}else _y=!1;v0=_y&&(!document.documentMode||9<document.documentMode)}function j0(){lu&&(lu.detachEvent("onpropertychange",dp),cu=lu=null)}function dp(d){if(d.propertyName==="value"&&up(cu)){var f=[];ou(f,cu,d,py(d)),a0(r_,f)}}function w0(d,f,g){d==="focusin"?(j0(),lu=f,cu=g,lu.attachEvent("onpropertychange",dp)):d==="focusout"&&j0()}function tl(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return up(cu)}function hp(d,f){if(d==="click")return up(f)}function a_(d,f){if(d==="input"||d==="change")return up(f)}function i_(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var Ni=typeof Object.is=="function"?Object.is:i_;function qs(d,f){if(Ni(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var g=Object.keys(d),S=Object.keys(f);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var P=g[S];if(!ue.call(f,P)||!Ni(d[P],f[P]))return!1}return!0}function Ki(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Cy(d,f){var g=Ki(d);d=0;for(var S;g;){if(g.nodeType===3){if(S=d+g.textContent.length,d<=f&&S>=f)return{node:g,offset:f-d};d=S}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Ki(g)}}function N0(d,f){return d&&f?d===f?!0:d&&d.nodeType===3?!1:f&&f.nodeType===3?N0(d,f.parentNode):"contains"in d?d.contains(f):d.compareDocumentPosition?!!(d.compareDocumentPosition(f)&16):!1:!1}function S0(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var f=Yl(d.document);f instanceof d.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)d=f.contentWindow;else break;f=Yl(d.document)}return f}function ky(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f&&(f==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||f==="textarea"||d.contentEditable==="true")}var s_=mo&&"documentMode"in document&&11>=document.documentMode,uu=null,nl=null,He=null,st=!1;function rt(d,f,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;st||uu==null||uu!==Yl(S)||(S=uu,"selectionStart"in S&&ky(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),He&&qs(He,S)||(He=S,S=sm(nl,"onSelect"),0<S.length&&(f=new tp("onSelect","select",null,f,g),d.push({event:f,listeners:S}),f.target=uu)))}function At(d,f){var g={};return g[d.toLowerCase()]=f.toLowerCase(),g["Webkit"+d]="webkit"+f,g["Moz"+d]="moz"+f,g}var tn={animationend:At("Animation","AnimationEnd"),animationiteration:At("Animation","AnimationIteration"),animationstart:At("Animation","AnimationStart"),transitionrun:At("Transition","TransitionRun"),transitionstart:At("Transition","TransitionStart"),transitioncancel:At("Transition","TransitionCancel"),transitionend:At("Transition","TransitionEnd")},Un={},na={};mo&&(na=document.createElement("div").style,"AnimationEvent"in window||(delete tn.animationend.animation,delete tn.animationiteration.animation,delete tn.animationstart.animation),"TransitionEvent"in window||delete tn.transitionend.transition);function Vn(d){if(Un[d])return Un[d];if(!tn[d])return d;var f=tn[d],g;for(g in f)if(f.hasOwnProperty(g)&&g in na)return Un[d]=f[g];return d}var fp=Vn("animationend"),_0=Vn("animationiteration"),Si=Vn("animationstart"),pp=Vn("transitionrun"),o_=Vn("transitionstart"),du=Vn("transitioncancel"),qd=Vn("transitionend"),Ud=new Map,Jn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jn.push("scrollEnd");function ys(d,f){Ud.set(d,f),_a(f,[d])}var Ty=new WeakMap;function Ha(d,f){if(typeof d=="object"&&d!==null){var g=Ty.get(d);return g!==void 0?g:(f={value:d,source:f,stack:iy(f)},Ty.set(d,f),f)}return{value:d,source:f,stack:iy(f)}}var Yi=[],hu=0,Ay=0;function Xl(){for(var d=hu,f=Ay=hu=0;f<d;){var g=Yi[f];Yi[f++]=null;var S=Yi[f];Yi[f++]=null;var P=Yi[f];Yi[f++]=null;var F=Yi[f];if(Yi[f++]=null,S!==null&&P!==null){var Z=S.pending;Z===null?P.next=P:(P.next=Z.next,Z.next=P),S.pending=P}F!==0&&Vd(g,P,F)}}function xs(d,f,g,S){Yi[hu++]=d,Yi[hu++]=f,Yi[hu++]=g,Yi[hu++]=S,Ay|=S,d.lanes|=S,d=d.alternate,d!==null&&(d.lanes|=S)}function fu(d,f,g,S){return xs(d,f,g,S),Hd(d)}function Jl(d,f){return xs(d,null,null,f),Hd(d)}function Vd(d,f,g){d.lanes|=g;var S=d.alternate;S!==null&&(S.lanes|=g);for(var P=!1,F=d.return;F!==null;)F.childLanes|=g,S=F.alternate,S!==null&&(S.childLanes|=g),F.tag===22&&(d=F.stateNode,d===null||d._visibility&1||(P=!0)),d=F,F=F.return;return d.tag===3?(F=d.stateNode,P&&f!==null&&(P=31-he(g),d=F.hiddenUpdates,S=d[P],S===null?d[P]=[f]:S.push(f),f.lane=g|536870912),F):null}function Hd(d){if(50<Iu)throw Iu=0,Nx=null,Error(a(185));for(var f=d.return;f!==null;)d=f,f=d.return;return d.tag===3?d.stateNode:null}var Zl={};function mp(d,f,g,S){this.tag=d,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(d,f,g,S){return new mp(d,f,g,S)}function ec(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Ga(d,f){var g=d.alternate;return g===null?(g=ti(d.tag,f,d.key,d.mode),g.elementType=d.elementType,g.type=d.type,g.stateNode=d.stateNode,g.alternate=d,d.alternate=g):(g.pendingProps=f,g.type=d.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=d.flags&65011712,g.childLanes=d.childLanes,g.lanes=d.lanes,g.child=d.child,g.memoizedProps=d.memoizedProps,g.memoizedState=d.memoizedState,g.updateQueue=d.updateQueue,f=d.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=d.sibling,g.index=d.index,g.ref=d.ref,g.refCleanup=d.refCleanup,g}function Gd(d,f){d.flags&=65011714;var g=d.alternate;return g===null?(d.childLanes=0,d.lanes=f,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,f=g.dependencies,d.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),d}function gp(d,f,g,S,P,F){var Z=0;if(S=d,typeof d=="function")ec(d)&&(Z=1);else if(typeof d=="string")Z=F_(d,g,Re.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case U:return d=ti(31,g,f,P),d.elementType=U,d.lanes=F,d;case b:return tc(g.children,P,F,f);case j:Z=8,P|=24;break;case w:return d=ti(12,g,f,P|2),d.elementType=w,d.lanes=F,d;case T:return d=ti(13,g,f,P),d.elementType=T,d.lanes=F,d;case E:return d=ti(19,g,f,P),d.elementType=E,d.lanes=F,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case _:case C:Z=10;break e;case k:Z=9;break e;case A:Z=11;break e;case I:Z=14;break e;case $:Z=16,S=null;break e}Z=29,g=Error(a(130,d===null?"null":typeof d,"")),S=null}return f=ti(Z,g,f,P),f.elementType=d,f.type=S,f.lanes=F,f}function tc(d,f,g,S){return d=ti(7,d,S,f),d.lanes=g,d}function Py(d,f,g){return d=ti(6,d,null,f),d.lanes=g,d}function pu(d,f,g){return f=ti(4,d.children!==null?d.children:[],d.key,f),f.lanes=g,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}var yo=[],rl=0,yp=null,Wd=0,Qi=[],Xi=0,kr=null,Or=1,xo="";function nc(d,f){yo[rl++]=Wd,yo[rl++]=yp,yp=d,Wd=f}function Ey(d,f,g){Qi[Xi++]=Or,Qi[Xi++]=xo,Qi[Xi++]=kr,kr=d;var S=Or;d=xo;var P=32-he(S)-1;S&=~(1<<P),g+=1;var F=32-he(f)+P;if(30<F){var Z=P-P%5;F=(S&(1<<Z)-1).toString(32),S>>=Z,P-=Z,Or=1<<32-he(f)+P|g<<P|S,xo=F+d}else Or=1<<F|g<<P|S,xo=d}function Dy(d){d.return!==null&&(nc(d,1),Ey(d,1,0))}function Kd(d){for(;d===yp;)yp=yo[--rl],yo[rl]=null,Wd=yo[--rl],yo[rl]=null;for(;d===kr;)kr=Qi[--Xi],Qi[Xi]=null,xo=Qi[--Xi],Qi[Xi]=null,Or=Qi[--Xi],Qi[Xi]=null}var la=null,Mr=null,Pn=!1,vs=null,ni=!1,mu=Error(a(519));function Ji(d){var f=Error(a(418,""));throw al(Ha(f,d)),mu}function C0(d){var f=d.stateNode,g=d.type,S=d.memoizedProps;switch(f[Gt]=d,f[Xn]=S,g){case"dialog":Tn("cancel",f),Tn("close",f);break;case"iframe":case"object":case"embed":Tn("load",f);break;case"video":case"audio":for(g=0;g<Rh.length;g++)Tn(Rh[g],f);break;case"source":Tn("error",f);break;case"img":case"image":case"link":Tn("error",f),Tn("load",f);break;case"details":Tn("toggle",f);break;case"input":Tn("invalid",f),cy(f,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),Qf(f);break;case"select":Tn("invalid",f);break;case"textarea":Tn("invalid",f),Jf(f,S.value,S.defaultValue,S.children),Qf(f)}g=S.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||S.suppressHydrationWarning===!0||Yj(f.textContent,g)?(S.popover!=null&&(Tn("beforetoggle",f),Tn("toggle",f)),S.onScroll!=null&&Tn("scroll",f),S.onScrollEnd!=null&&Tn("scrollend",f),S.onClick!=null&&(f.onclick=om),f=!0):f=!1,f||Ji(d)}function k0(d){for(la=d.return;la;)switch(la.tag){case 5:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:la=la.return}}function Yd(d){if(d!==la)return!1;if(!Pn)return k0(d),Pn=!0,!1;var f=d.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=d.type,g=!(g!=="form"&&g!=="button")||cm(d.type,d.memoizedProps)),g=!g),g&&Mr&&Ji(d),k0(d),f===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));e:{for(d=d.nextSibling,f=0;d;){if(d.nodeType===8)if(g=d.data,g==="/$"){if(f===0){Mr=_s(d.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;d=d.nextSibling}Mr=null}}else f===27?(f=Mr,as(d.type)?(d=Lx,Lx=null,Mr=d):Mr=f):Mr=la?_s(d.stateNode.nextSibling):null;return!0}function Qd(){Mr=la=null,Pn=!1}function T0(){var d=vs;return d!==null&&(ui===null?ui=d:ui.push.apply(ui,d),vs=null),d}function al(d){vs===null?vs=[d]:vs.push(d)}var rc=te(null),il=null,fe=null;function _i(d,f,g){X(rc,f._currentValue),f._currentValue=g}function Zi(d){d._currentValue=rc.current,me(rc)}function ri(d,f,g){for(;d!==null;){var S=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),d===g)break;d=d.return}}function wn(d,f,g,S){var P=d.child;for(P!==null&&(P.return=d);P!==null;){var F=P.dependencies;if(F!==null){var Z=P.child;F=F.firstContext;e:for(;F!==null;){var pe=F;F=P;for(var Le=0;Le<f.length;Le++)if(pe.context===f[Le]){F.lanes|=g,pe=F.alternate,pe!==null&&(pe.lanes|=g),ri(F.return,g,d),S||(Z=null);break e}F=pe.next}}else if(P.tag===18){if(Z=P.return,Z===null)throw Error(a(341));Z.lanes|=g,F=Z.alternate,F!==null&&(F.lanes|=g),ri(Z,g,d),Z=null}else Z=P.child;if(Z!==null)Z.return=P;else for(Z=P;Z!==null;){if(Z===d){Z=null;break}if(P=Z.sibling,P!==null){P.return=Z.return,Z=P;break}Z=Z.return}P=Z}}function Xd(d,f,g,S){d=null;for(var P=f,F=!1;P!==null;){if(!F){if((P.flags&524288)!==0)F=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var Z=P.alternate;if(Z===null)throw Error(a(387));if(Z=Z.memoizedProps,Z!==null){var pe=P.type;Ni(P.pendingProps.value,Z.value)||(d!==null?d.push(pe):d=[pe])}}else if(P===Fe.current){if(Z=P.alternate,Z===null)throw Error(a(387));Z.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(d!==null?d.push(Uu):d=[Uu])}P=P.return}d!==null&&wn(f,d,g,S),f.flags|=262144}function xp(d){for(d=d.firstContext;d!==null;){if(!Ni(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function ac(d){il=d,fe=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Wr(d){return A0(il,d)}function vp(d,f){return il===null&&ac(d),A0(d,f)}function A0(d,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},fe===null){if(d===null)throw Error(a(308));fe=f,d.dependencies={lanes:0,firstContext:f},d.flags|=524288}else fe=fe.next=f;return g}var l_=typeof AbortController<"u"?AbortController:function(){var d=[],f=this.signal={aborted:!1,addEventListener:function(g,S){d.push(S)}};this.abort=function(){f.aborted=!0,d.forEach(function(g){return g()})}},c_=t.unstable_scheduleCallback,u_=t.unstable_NormalPriority,yr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oy(){return{controller:new l_,data:new Map,refCount:0}}function Jd(d){d.refCount--,d.refCount===0&&c_(u_,function(){d.controller.abort()})}var Zd=null,My=0,gu=0,ai=null;function d_(d,f){if(Zd===null){var g=Zd=[];My=0,gu=im(),ai={status:"pending",value:void 0,then:function(S){g.push(S)}}}return My++,f.then(P0,P0),f}function P0(){if(--My===0&&Zd!==null){ai!==null&&(ai.status="fulfilled");var d=Zd;Zd=null,gu=0,ai=null;for(var f=0;f<d.length;f++)(0,d[f])()}}function h_(d,f){var g=[],S={status:"pending",value:null,reason:null,then:function(P){g.push(P)}};return d.then(function(){S.status="fulfilled",S.value=f;for(var P=0;P<g.length;P++)(0,g[P])(f)},function(P){for(S.status="rejected",S.reason=P,P=0;P<g.length;P++)(0,g[P])(void 0)}),S}var E0=q.S;q.S=function(d,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&d_(d,f),E0!==null&&E0(d,f)};var ic=te(null);function vo(){var d=ic.current;return d!==null?d:wr.pooledCache}function bp(d,f){f===null?X(ic,ic.current):X(ic,f.pool)}function D0(){var d=vo();return d===null?null:{parent:yr._currentValue,pool:d}}var Wa=Error(a(460)),O0=Error(a(474)),jp=Error(a(542)),Iy={then:function(){}};function M0(d){return d=d.status,d==="fulfilled"||d==="rejected"}function wp(){}function Ry(d,f,g){switch(g=d[g],g===void 0?d.push(f):g!==f&&(f.then(wp,wp),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw d=f.reason,R0(d),d;default:if(typeof f.status=="string")f.then(wp,wp);else{if(d=wr,d!==null&&100<d.shellSuspendCounter)throw Error(a(482));d=f,d.status="pending",d.then(function(S){if(f.status==="pending"){var P=f;P.status="fulfilled",P.value=S}},function(S){if(f.status==="pending"){var P=f;P.status="rejected",P.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw d=f.reason,R0(d),d}throw yu=f,Wa}}var yu=null;function I0(){if(yu===null)throw Error(a(459));var d=yu;return yu=null,d}function R0(d){if(d===Wa||d===jp)throw Error(a(483))}var Us=!1;function sc(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xu(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function sl(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function bo(d,f,g){var S=d.updateQueue;if(S===null)return null;if(S=S.shared,(ar&2)!==0){var P=S.pending;return P===null?f.next=f:(f.next=P.next,P.next=f),S.pending=f,f=Hd(d),Vd(d,null,g),f}return xs(d,S,f,g),Hd(d)}function eh(d,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var S=f.lanes;S&=d.pendingLanes,g|=S,f.lanes=g,Ue(d,g)}}function bs(d,f){var g=d.updateQueue,S=d.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var P=null,F=null;if(g=g.firstBaseUpdate,g!==null){do{var Z={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};F===null?P=F=Z:F=F.next=Z,g=g.next}while(g!==null);F===null?P=F=f:F=F.next=f}else P=F=f;g={baseState:S.baseState,firstBaseUpdate:P,lastBaseUpdate:F,shared:S.shared,callbacks:S.callbacks},d.updateQueue=g;return}d=g.lastBaseUpdate,d===null?g.firstBaseUpdate=f:d.next=f,g.lastBaseUpdate=f}var th=!1;function js(){if(th){var d=ai;if(d!==null)throw d}}function Ma(d,f,g,S){th=!1;var P=d.updateQueue;Us=!1;var F=P.firstBaseUpdate,Z=P.lastBaseUpdate,pe=P.shared.pending;if(pe!==null){P.shared.pending=null;var Le=pe,Je=Le.next;Le.next=null,Z===null?F=Je:Z.next=Je,Z=Le;var dt=d.alternate;dt!==null&&(dt=dt.updateQueue,pe=dt.lastBaseUpdate,pe!==Z&&(pe===null?dt.firstBaseUpdate=Je:pe.next=Je,dt.lastBaseUpdate=Le))}if(F!==null){var pt=P.baseState;Z=0,dt=Je=Le=null,pe=F;do{var tt=pe.lane&-536870913,Ze=tt!==pe.lane;if(Ze?(Bn&tt)===tt:(S&tt)===tt){tt!==0&&tt===gu&&(th=!0),dt!==null&&(dt=dt.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Qt=d,Yt=pe;tt=f;var dr=g;switch(Yt.tag){case 1:if(Qt=Yt.payload,typeof Qt=="function"){pt=Qt.call(dr,pt,tt);break e}pt=Qt;break e;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=Yt.payload,tt=typeof Qt=="function"?Qt.call(dr,pt,tt):Qt,tt==null)break e;pt=h({},pt,tt);break e;case 2:Us=!0}}tt=pe.callback,tt!==null&&(d.flags|=64,Ze&&(d.flags|=8192),Ze=P.callbacks,Ze===null?P.callbacks=[tt]:Ze.push(tt))}else Ze={lane:tt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},dt===null?(Je=dt=Ze,Le=pt):dt=dt.next=Ze,Z|=tt;if(pe=pe.next,pe===null){if(pe=P.shared.pending,pe===null)break;Ze=pe,pe=Ze.next,Ze.next=null,P.lastBaseUpdate=Ze,P.shared.pending=null}}while(!0);dt===null&&(Le=pt),P.baseState=Le,P.firstBaseUpdate=Je,P.lastBaseUpdate=dt,F===null&&(P.shared.lanes=0),ml|=Z,d.lanes=Z,d.memoizedState=pt}}function L0(d,f){if(typeof d!="function")throw Error(a(191,d));d.call(f)}function Ly(d,f){var g=d.callbacks;if(g!==null)for(d.callbacks=null,d=0;d<g.length;d++)L0(g[d],f)}var oc=te(null),ol=te(0);function jo(d,f){d=Po,X(ol,d),X(oc,f),Po=d|f.baseLanes}function Np(){X(ol,Po),X(oc,oc.current)}function Fy(){Po=ol.current,me(oc),me(ol)}var ws=0,bn=null,rr=null,En=null,vu=!1,lc=!1,Ia=!1,bu=0,ll=0,es=null,F0=0;function Dn(){throw Error(a(321))}function nh(d,f){if(f===null)return!1;for(var g=0;g<f.length&&g<d.length;g++)if(!Ni(d[g],f[g]))return!1;return!0}function $y(d,f,g,S,P,F){return ws=F,bn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,q.H=d===null||d.memoizedState===null?X0:rx,Ia=!1,F=g(S,P),Ia=!1,lc&&(F=B0(f,g,S,P)),$0(d),F}function $0(d){q.H=fh;var f=rr!==null&&rr.next!==null;if(ws=0,En=rr=bn=null,vu=!1,ll=0,es=null,f)throw Error(a(300));d===null||ga||(d=d.dependencies,d!==null&&xp(d)&&(ga=!0))}function B0(d,f,g,S){bn=d;var P=0;do{if(lc&&(es=null),ll=0,lc=!1,25<=P)throw Error(a(301));if(P+=1,En=rr=null,d.updateQueue!=null){var F=d.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}q.H=J0,F=f(g,S)}while(lc);return F}function By(){var d=q.H,f=d.useState()[0];return f=typeof f.then=="function"?rh(f):f,d=d.useState()[0],(rr!==null?rr.memoizedState:null)!==d&&(bn.flags|=1024),f}function zy(){var d=bu!==0;return bu=0,d}function cc(d,f,g){f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~g}function Sp(d){if(vu){for(d=d.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}vu=!1}ws=0,En=rr=bn=null,lc=!1,ll=bu=0,es=null}function ii(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?bn.memoizedState=En=d:En=En.next=d,En}function ra(){if(rr===null){var d=bn.alternate;d=d!==null?d.memoizedState:null}else d=rr.next;var f=En===null?bn.memoizedState:En.next;if(f!==null)En=f,rr=d;else{if(d===null)throw bn.alternate===null?Error(a(467)):Error(a(310));rr=d,d={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},En===null?bn.memoizedState=En=d:En=En.next=d}return En}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rh(d){var f=ll;return ll+=1,es===null&&(es=[]),d=Ry(es,d,f),f=bn,(En===null?f.memoizedState:En.next)===null&&(f=f.alternate,q.H=f===null||f.memoizedState===null?X0:rx),d}function _p(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return rh(d);if(d.$$typeof===C)return Wr(d)}throw Error(a(438,String(d)))}function ah(d){var f=null,g=bn.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var S=bn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(P){return P.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=uc(),bn.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(d),S=0;S<d;S++)g[S]=B;return f.index++,g}function Vs(d,f){return typeof f=="function"?f(d):f}function Cp(d){var f=ra();return qy(f,rr,d)}function qy(d,f,g){var S=d.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=g;var P=d.baseQueue,F=S.pending;if(F!==null){if(P!==null){var Z=P.next;P.next=F.next,F.next=Z}f.baseQueue=P=F,S.pending=null}if(F=d.baseState,P===null)d.memoizedState=F;else{f=P.next;var pe=Z=null,Le=null,Je=f,dt=!1;do{var pt=Je.lane&-536870913;if(pt!==Je.lane?(Bn&pt)===pt:(ws&pt)===pt){var tt=Je.revertLane;if(tt===0)Le!==null&&(Le=Le.next={lane:0,revertLane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),pt===gu&&(dt=!0);else if((ws&tt)===tt){Je=Je.next,tt===gu&&(dt=!0);continue}else pt={lane:0,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Le===null?(pe=Le=pt,Z=F):Le=Le.next=pt,bn.lanes|=tt,ml|=tt;pt=Je.action,Ia&&g(F,pt),F=Je.hasEagerState?Je.eagerState:g(F,pt)}else tt={lane:pt,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Le===null?(pe=Le=tt,Z=F):Le=Le.next=tt,bn.lanes|=pt,ml|=pt;Je=Je.next}while(Je!==null&&Je!==f);if(Le===null?Z=F:Le.next=pe,!Ni(F,d.memoizedState)&&(ga=!0,dt&&(g=ai,g!==null)))throw g;d.memoizedState=F,d.baseState=Z,d.baseQueue=Le,S.lastRenderedState=F}return P===null&&(S.lanes=0),[d.memoizedState,S.dispatch]}function Uy(d){var f=ra(),g=f.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=d;var S=g.dispatch,P=g.pending,F=f.memoizedState;if(P!==null){g.pending=null;var Z=P=P.next;do F=d(F,Z.action),Z=Z.next;while(Z!==P);Ni(F,f.memoizedState)||(ga=!0),f.memoizedState=F,f.baseQueue===null&&(f.baseState=F),g.lastRenderedState=F}return[F,S]}function Vy(d,f,g){var S=bn,P=ra(),F=Pn;if(F){if(g===void 0)throw Error(a(407));g=g()}else g=f();var Z=!Ni((rr||P).memoizedState,g);Z&&(P.memoizedState=g,ga=!0),P=P.queue;var pe=Tp.bind(null,S,P,d);if(oh(2048,8,pe,[d]),P.getSnapshot!==f||Z||En!==null&&En.memoizedState.tag&1){if(S.flags|=2048,ju(9,Op(),z0.bind(null,S,P,g,f),null),wr===null)throw Error(a(349));F||(ws&124)!==0||kp(S,f,g)}return g}function kp(d,f,g){d.flags|=16384,d={getSnapshot:f,value:g},f=bn.updateQueue,f===null?(f=uc(),bn.updateQueue=f,f.stores=[d]):(g=f.stores,g===null?f.stores=[d]:g.push(d))}function z0(d,f,g,S){f.value=g,f.getSnapshot=S,Hy(f)&&Gy(d)}function Tp(d,f,g){return g(function(){Hy(f)&&Gy(d)})}function Hy(d){var f=d.getSnapshot;d=d.value;try{var g=f();return!Ni(d,g)}catch{return!0}}function Gy(d){var f=Jl(d,2);f!==null&&Pi(f,d,2)}function Ap(d){var f=ii();if(typeof d=="function"){var g=d;if(d=g(),Ia){ge(!0);try{g()}finally{ge(!1)}}}return f.memoizedState=f.baseState=d,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:d},f}function ih(d,f,g,S){return d.baseState=g,qy(d,rr,typeof S=="function"?S:Vs)}function f_(d,f,g,S,P){if(Lp(d))throw Error(a(485));if(d=f.action,d!==null){var F={payload:P,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){F.listeners.push(Z)}};q.T!==null?g(!0):F.isTransition=!1,S(F),g=f.pending,g===null?(F.next=f.pending=F,Wy(f,F)):(F.next=g.next,f.pending=g.next=F)}}function Wy(d,f){var g=f.action,S=f.payload,P=d.state;if(f.isTransition){var F=q.T,Z={};q.T=Z;try{var pe=g(P,S),Le=q.S;Le!==null&&Le(Z,pe),Ky(d,f,pe)}catch(Je){Pp(d,f,Je)}finally{q.T=F}}else try{F=g(P,S),Ky(d,f,F)}catch(Je){Pp(d,f,Je)}}function Ky(d,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){q0(d,f,S)},function(S){return Pp(d,f,S)}):q0(d,f,g)}function q0(d,f,g){f.status="fulfilled",f.value=g,U0(f),d.state=g,f=d.pending,f!==null&&(g=f.next,g===f?d.pending=null:(g=g.next,f.next=g,Wy(d,g)))}function Pp(d,f,g){var S=d.pending;if(d.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=g,U0(f),f=f.next;while(f!==S)}d.action=null}function U0(d){d=d.listeners;for(var f=0;f<d.length;f++)(0,d[f])()}function Ep(d,f){return f}function Yy(d,f){if(Pn){var g=wr.formState;if(g!==null){e:{var S=bn;if(Pn){if(Mr){t:{for(var P=Mr,F=ni;P.nodeType!==8;){if(!F){P=null;break t}if(P=_s(P.nextSibling),P===null){P=null;break t}}F=P.data,P=F==="F!"||F==="F"?P:null}if(P){Mr=_s(P.nextSibling),S=P.data==="F!";break e}}Ji(S)}S=!1}S&&(f=g[0])}}return g=ii(),g.memoizedState=g.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ep,lastRenderedState:f},g.queue=S,g=ex.bind(null,bn,S),S.dispatch=g,S=Ap(!1),F=tx.bind(null,bn,!1,S.queue),S=ii(),P={state:f,dispatch:null,action:d,pending:null},S.queue=P,g=f_.bind(null,bn,P,F,g),P.dispatch=g,S.memoizedState=d,[f,g,!1]}function Dp(d){var f=ra();return V0(f,rr,d)}function V0(d,f,g){if(f=qy(d,f,Ep)[0],d=Cp(Vs)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var S=rh(f)}catch(Z){throw Z===Wa?jp:Z}else S=f;f=ra();var P=f.queue,F=P.dispatch;return g!==f.memoizedState&&(bn.flags|=2048,ju(9,Op(),Qy.bind(null,P,g),null)),[S,F,d]}function Qy(d,f){d.action=f}function yn(d){var f=ra(),g=rr;if(g!==null)return V0(f,g,d);ra(),f=f.memoizedState,g=ra();var S=g.queue.dispatch;return g.memoizedState=d,[f,S,!1]}function ju(d,f,g,S){return d={tag:d,create:g,deps:S,inst:f,next:null},f=bn.updateQueue,f===null&&(f=uc(),bn.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=d.next=d:(S=g.next,g.next=d,d.next=S,f.lastEffect=d),d}function Op(){return{destroy:void 0,resource:void 0}}function wu(){return ra().memoizedState}function sh(d,f,g,S){var P=ii();S=S===void 0?null:S,bn.flags|=d,P.memoizedState=ju(1|f,Op(),g,S)}function oh(d,f,g,S){var P=ra();S=S===void 0?null:S;var F=P.memoizedState.inst;rr!==null&&S!==null&&nh(S,rr.memoizedState.deps)?P.memoizedState=ju(f,F,g,S):(bn.flags|=d,P.memoizedState=ju(1|f,F,g,S))}function H0(d,f){sh(8390656,8,d,f)}function Ci(d,f){oh(2048,8,d,f)}function G0(d,f){return oh(4,2,d,f)}function lh(d,f){return oh(4,4,d,f)}function Mp(d,f){if(typeof f=="function"){d=d();var g=f(d);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function Xy(d,f,g){g=g!=null?g.concat([d]):null,oh(4,4,Mp.bind(null,f,d),g)}function Ip(){}function si(d,f){var g=ra();f=f===void 0?null:f;var S=g.memoizedState;return f!==null&&nh(f,S[1])?S[0]:(g.memoizedState=[d,f],d)}function wo(d,f){var g=ra();f=f===void 0?null:f;var S=g.memoizedState;if(f!==null&&nh(f,S[1]))return S[0];if(S=d(),Ia){ge(!0);try{d()}finally{ge(!1)}}return g.memoizedState=[S,f],S}function ch(d,f,g){return g===void 0||(ws&1073741824)!==0?d.memoizedState=f:(d.memoizedState=g,d=_j(),bn.lanes|=d,ml|=d,g)}function Jy(d,f,g,S){return Ni(g,f)?g:oc.current!==null?(d=ch(d,g,S),Ni(d,f)||(ga=!0),d):(ws&42)===0?(ga=!0,d.memoizedState=g):(d=_j(),bn.lanes|=d,ml|=d,f)}function uh(d,f,g,S,P){var F=V.p;V.p=F!==0&&8>F?F:8;var Z=q.T,pe={};q.T=pe,tx(d,!1,f,g);try{var Le=P(),Je=q.S;if(Je!==null&&Je(pe,Le),Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var dt=h_(Le,S);dc(d,f,dt,La(d))}else dc(d,f,S,La(d))}catch(pt){dc(d,f,{then:function(){},status:"rejected",reason:pt},La())}finally{V.p=F,q.T=Z}}function W0(){}function dh(d,f,g,S){if(d.tag!==5)throw Error(a(476));var P=Zy(d).queue;uh(d,P,f,H,g===null?W0:function(){return Rp(d),g(S)})}function Zy(d){var f=d.memoizedState;if(f!==null)return f;f={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:H},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:g},next:null},d.memoizedState=f,d=d.alternate,d!==null&&(d.memoizedState=f),f}function Rp(d){var f=Zy(d).next.queue;dc(d,f,{},La())}function hh(){return Wr(Uu)}function No(){return ra().memoizedState}function K0(){return ra().memoizedState}function cl(d){for(var f=d.return;f!==null;){switch(f.tag){case 24:case 3:var g=La();d=sl(g);var S=bo(f,d,g);S!==null&&(Pi(S,f,g),eh(S,f,g)),f={cache:Oy()},d.payload=f;return}f=f.return}}function Y0(d,f,g){var S=La();g={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},Lp(d)?Q0(f,g):(g=fu(d,f,g,S),g!==null&&(Pi(g,d,S),nx(g,f,S)))}function ex(d,f,g){var S=La();dc(d,f,g,S)}function dc(d,f,g,S){var P={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(Lp(d))Q0(f,P);else{var F=d.alternate;if(d.lanes===0&&(F===null||F.lanes===0)&&(F=f.lastRenderedReducer,F!==null))try{var Z=f.lastRenderedState,pe=F(Z,g);if(P.hasEagerState=!0,P.eagerState=pe,Ni(pe,Z))return xs(d,f,P,0),wr===null&&Xl(),!1}catch{}finally{}if(g=fu(d,f,P,S),g!==null)return Pi(g,d,S),nx(g,f,S),!0}return!1}function tx(d,f,g,S){if(S={lane:2,revertLane:im(),action:S,hasEagerState:!1,eagerState:null,next:null},Lp(d)){if(f)throw Error(a(479))}else f=fu(d,g,S,2),f!==null&&Pi(f,d,2)}function Lp(d){var f=d.alternate;return d===bn||f!==null&&f===bn}function Q0(d,f){lc=vu=!0;var g=d.pending;g===null?f.next=f:(f.next=g.next,g.next=f),d.pending=f}function nx(d,f,g){if((g&4194048)!==0){var S=f.lanes;S&=d.pendingLanes,g|=S,f.lanes=g,Ue(d,g)}}var fh={readContext:Wr,use:_p,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useLayoutEffect:Dn,useInsertionEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useSyncExternalStore:Dn,useId:Dn,useHostTransitionStatus:Dn,useFormState:Dn,useActionState:Dn,useOptimistic:Dn,useMemoCache:Dn,useCacheRefresh:Dn},X0={readContext:Wr,use:_p,useCallback:function(d,f){return ii().memoizedState=[d,f===void 0?null:f],d},useContext:Wr,useEffect:H0,useImperativeHandle:function(d,f,g){g=g!=null?g.concat([d]):null,sh(4194308,4,Mp.bind(null,f,d),g)},useLayoutEffect:function(d,f){return sh(4194308,4,d,f)},useInsertionEffect:function(d,f){sh(4,2,d,f)},useMemo:function(d,f){var g=ii();f=f===void 0?null:f;var S=d();if(Ia){ge(!0);try{d()}finally{ge(!1)}}return g.memoizedState=[S,f],S},useReducer:function(d,f,g){var S=ii();if(g!==void 0){var P=g(f);if(Ia){ge(!0);try{g(f)}finally{ge(!1)}}}else P=f;return S.memoizedState=S.baseState=P,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:P},S.queue=d,d=d.dispatch=Y0.bind(null,bn,d),[S.memoizedState,d]},useRef:function(d){var f=ii();return d={current:d},f.memoizedState=d},useState:function(d){d=Ap(d);var f=d.queue,g=ex.bind(null,bn,f);return f.dispatch=g,[d.memoizedState,g]},useDebugValue:Ip,useDeferredValue:function(d,f){var g=ii();return ch(g,d,f)},useTransition:function(){var d=Ap(!1);return d=uh.bind(null,bn,d.queue,!0,!1),ii().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,f,g){var S=bn,P=ii();if(Pn){if(g===void 0)throw Error(a(407));g=g()}else{if(g=f(),wr===null)throw Error(a(349));(Bn&124)!==0||kp(S,f,g)}P.memoizedState=g;var F={value:g,getSnapshot:f};return P.queue=F,H0(Tp.bind(null,S,F,d),[d]),S.flags|=2048,ju(9,Op(),z0.bind(null,S,F,g,f),null),g},useId:function(){var d=ii(),f=wr.identifierPrefix;if(Pn){var g=xo,S=Or;g=(S&~(1<<32-he(S)-1)).toString(32)+g,f=""+f+"R"+g,g=bu++,0<g&&(f+="H"+g.toString(32)),f+=""}else g=F0++,f=""+f+"r"+g.toString(32)+"";return d.memoizedState=f},useHostTransitionStatus:hh,useFormState:Yy,useActionState:Yy,useOptimistic:function(d){var f=ii();f.memoizedState=f.baseState=d;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=tx.bind(null,bn,!0,g),g.dispatch=f,[d,f]},useMemoCache:ah,useCacheRefresh:function(){return ii().memoizedState=cl.bind(null,bn)}},rx={readContext:Wr,use:_p,useCallback:si,useContext:Wr,useEffect:Ci,useImperativeHandle:Xy,useInsertionEffect:G0,useLayoutEffect:lh,useMemo:wo,useReducer:Cp,useRef:wu,useState:function(){return Cp(Vs)},useDebugValue:Ip,useDeferredValue:function(d,f){var g=ra();return Jy(g,rr.memoizedState,d,f)},useTransition:function(){var d=Cp(Vs)[0],f=ra().memoizedState;return[typeof d=="boolean"?d:rh(d),f]},useSyncExternalStore:Vy,useId:No,useHostTransitionStatus:hh,useFormState:Dp,useActionState:Dp,useOptimistic:function(d,f){var g=ra();return ih(g,rr,d,f)},useMemoCache:ah,useCacheRefresh:K0},J0={readContext:Wr,use:_p,useCallback:si,useContext:Wr,useEffect:Ci,useImperativeHandle:Xy,useInsertionEffect:G0,useLayoutEffect:lh,useMemo:wo,useReducer:Uy,useRef:wu,useState:function(){return Uy(Vs)},useDebugValue:Ip,useDeferredValue:function(d,f){var g=ra();return rr===null?ch(g,d,f):Jy(g,rr.memoizedState,d,f)},useTransition:function(){var d=Uy(Vs)[0],f=ra().memoizedState;return[typeof d=="boolean"?d:rh(d),f]},useSyncExternalStore:Vy,useId:No,useHostTransitionStatus:hh,useFormState:yn,useActionState:yn,useOptimistic:function(d,f){var g=ra();return rr!==null?ih(g,rr,d,f):(g.baseState=d,[d,g.queue.dispatch])},useMemoCache:ah,useCacheRefresh:K0},ca=null,oi=0;function Fp(d){var f=oi;return oi+=1,ca===null&&(ca=[]),Ry(ca,d,f)}function ph(d,f){f=f.props.ref,d.ref=f!==void 0?f:null}function hc(d,f){throw f.$$typeof===p?Error(a(525)):(d=Object.prototype.toString.call(f),Error(a(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d)))}function fc(d){var f=d._init;return f(d._payload)}function ax(d){function f(We,qe){if(d){var Ye=We.deletions;Ye===null?(We.deletions=[qe],We.flags|=16):Ye.push(qe)}}function g(We,qe){if(!d)return null;for(;qe!==null;)f(We,qe),qe=qe.sibling;return null}function S(We){for(var qe=new Map;We!==null;)We.key!==null?qe.set(We.key,We):qe.set(We.index,We),We=We.sibling;return qe}function P(We,qe){return We=Ga(We,qe),We.index=0,We.sibling=null,We}function F(We,qe,Ye){return We.index=Ye,d?(Ye=We.alternate,Ye!==null?(Ye=Ye.index,Ye<qe?(We.flags|=67108866,qe):Ye):(We.flags|=67108866,qe)):(We.flags|=1048576,qe)}function Z(We){return d&&We.alternate===null&&(We.flags|=67108866),We}function pe(We,qe,Ye,ht){return qe===null||qe.tag!==6?(qe=Py(Ye,We.mode,ht),qe.return=We,qe):(qe=P(qe,Ye),qe.return=We,qe)}function Le(We,qe,Ye,ht){var Lt=Ye.type;return Lt===b?dt(We,qe,Ye.props.children,ht,Ye.key):qe!==null&&(qe.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===$&&fc(Lt)===qe.type)?(qe=P(qe,Ye.props),ph(qe,Ye),qe.return=We,qe):(qe=gp(Ye.type,Ye.key,Ye.props,null,We.mode,ht),ph(qe,Ye),qe.return=We,qe)}function Je(We,qe,Ye,ht){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==Ye.containerInfo||qe.stateNode.implementation!==Ye.implementation?(qe=pu(Ye,We.mode,ht),qe.return=We,qe):(qe=P(qe,Ye.children||[]),qe.return=We,qe)}function dt(We,qe,Ye,ht,Lt){return qe===null||qe.tag!==7?(qe=tc(Ye,We.mode,ht,Lt),qe.return=We,qe):(qe=P(qe,Ye),qe.return=We,qe)}function pt(We,qe,Ye){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=Py(""+qe,We.mode,Ye),qe.return=We,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case m:return Ye=gp(qe.type,qe.key,qe.props,null,We.mode,Ye),ph(Ye,qe),Ye.return=We,Ye;case x:return qe=pu(qe,We.mode,Ye),qe.return=We,qe;case $:var ht=qe._init;return qe=ht(qe._payload),pt(We,qe,Ye)}if(Y(qe)||z(qe))return qe=tc(qe,We.mode,Ye,null),qe.return=We,qe;if(typeof qe.then=="function")return pt(We,Fp(qe),Ye);if(qe.$$typeof===C)return pt(We,vp(We,qe),Ye);hc(We,qe)}return null}function tt(We,qe,Ye,ht){var Lt=qe!==null?qe.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Lt!==null?null:pe(We,qe,""+Ye,ht);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case m:return Ye.key===Lt?Le(We,qe,Ye,ht):null;case x:return Ye.key===Lt?Je(We,qe,Ye,ht):null;case $:return Lt=Ye._init,Ye=Lt(Ye._payload),tt(We,qe,Ye,ht)}if(Y(Ye)||z(Ye))return Lt!==null?null:dt(We,qe,Ye,ht,null);if(typeof Ye.then=="function")return tt(We,qe,Fp(Ye),ht);if(Ye.$$typeof===C)return tt(We,qe,vp(We,Ye),ht);hc(We,Ye)}return null}function Ze(We,qe,Ye,ht,Lt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return We=We.get(Ye)||null,pe(qe,We,""+ht,Lt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case m:return We=We.get(ht.key===null?Ye:ht.key)||null,Le(qe,We,ht,Lt);case x:return We=We.get(ht.key===null?Ye:ht.key)||null,Je(qe,We,ht,Lt);case $:var Nn=ht._init;return ht=Nn(ht._payload),Ze(We,qe,Ye,ht,Lt)}if(Y(ht)||z(ht))return We=We.get(Ye)||null,dt(qe,We,ht,Lt,null);if(typeof ht.then=="function")return Ze(We,qe,Ye,Fp(ht),Lt);if(ht.$$typeof===C)return Ze(We,qe,Ye,vp(qe,ht),Lt);hc(qe,ht)}return null}function Qt(We,qe,Ye,ht){for(var Lt=null,Nn=null,zt=qe,Xt=qe=0,va=null;zt!==null&&Xt<Ye.length;Xt++){zt.index>Xt?(va=zt,zt=null):va=zt.sibling;var Hn=tt(We,zt,Ye[Xt],ht);if(Hn===null){zt===null&&(zt=va);break}d&&zt&&Hn.alternate===null&&f(We,zt),qe=F(Hn,qe,Xt),Nn===null?Lt=Hn:Nn.sibling=Hn,Nn=Hn,zt=va}if(Xt===Ye.length)return g(We,zt),Pn&&nc(We,Xt),Lt;if(zt===null){for(;Xt<Ye.length;Xt++)zt=pt(We,Ye[Xt],ht),zt!==null&&(qe=F(zt,qe,Xt),Nn===null?Lt=zt:Nn.sibling=zt,Nn=zt);return Pn&&nc(We,Xt),Lt}for(zt=S(zt);Xt<Ye.length;Xt++)va=Ze(zt,We,Xt,Ye[Xt],ht),va!==null&&(d&&va.alternate!==null&&zt.delete(va.key===null?Xt:va.key),qe=F(va,qe,Xt),Nn===null?Lt=va:Nn.sibling=va,Nn=va);return d&&zt.forEach(function(_l){return f(We,_l)}),Pn&&nc(We,Xt),Lt}function Yt(We,qe,Ye,ht){if(Ye==null)throw Error(a(151));for(var Lt=null,Nn=null,zt=qe,Xt=qe=0,va=null,Hn=Ye.next();zt!==null&&!Hn.done;Xt++,Hn=Ye.next()){zt.index>Xt?(va=zt,zt=null):va=zt.sibling;var _l=tt(We,zt,Hn.value,ht);if(_l===null){zt===null&&(zt=va);break}d&&zt&&_l.alternate===null&&f(We,zt),qe=F(_l,qe,Xt),Nn===null?Lt=_l:Nn.sibling=_l,Nn=_l,zt=va}if(Hn.done)return g(We,zt),Pn&&nc(We,Xt),Lt;if(zt===null){for(;!Hn.done;Xt++,Hn=Ye.next())Hn=pt(We,Hn.value,ht),Hn!==null&&(qe=F(Hn,qe,Xt),Nn===null?Lt=Hn:Nn.sibling=Hn,Nn=Hn);return Pn&&nc(We,Xt),Lt}for(zt=S(zt);!Hn.done;Xt++,Hn=Ye.next())Hn=Ze(zt,We,Xt,Hn.value,ht),Hn!==null&&(d&&Hn.alternate!==null&&zt.delete(Hn.key===null?Xt:Hn.key),qe=F(Hn,qe,Xt),Nn===null?Lt=Hn:Nn.sibling=Hn,Nn=Hn);return d&&zt.forEach(function(Y_){return f(We,Y_)}),Pn&&nc(We,Xt),Lt}function dr(We,qe,Ye,ht){if(typeof Ye=="object"&&Ye!==null&&Ye.type===b&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case m:e:{for(var Lt=Ye.key;qe!==null;){if(qe.key===Lt){if(Lt=Ye.type,Lt===b){if(qe.tag===7){g(We,qe.sibling),ht=P(qe,Ye.props.children),ht.return=We,We=ht;break e}}else if(qe.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===$&&fc(Lt)===qe.type){g(We,qe.sibling),ht=P(qe,Ye.props),ph(ht,Ye),ht.return=We,We=ht;break e}g(We,qe);break}else f(We,qe);qe=qe.sibling}Ye.type===b?(ht=tc(Ye.props.children,We.mode,ht,Ye.key),ht.return=We,We=ht):(ht=gp(Ye.type,Ye.key,Ye.props,null,We.mode,ht),ph(ht,Ye),ht.return=We,We=ht)}return Z(We);case x:e:{for(Lt=Ye.key;qe!==null;){if(qe.key===Lt)if(qe.tag===4&&qe.stateNode.containerInfo===Ye.containerInfo&&qe.stateNode.implementation===Ye.implementation){g(We,qe.sibling),ht=P(qe,Ye.children||[]),ht.return=We,We=ht;break e}else{g(We,qe);break}else f(We,qe);qe=qe.sibling}ht=pu(Ye,We.mode,ht),ht.return=We,We=ht}return Z(We);case $:return Lt=Ye._init,Ye=Lt(Ye._payload),dr(We,qe,Ye,ht)}if(Y(Ye))return Qt(We,qe,Ye,ht);if(z(Ye)){if(Lt=z(Ye),typeof Lt!="function")throw Error(a(150));return Ye=Lt.call(Ye),Yt(We,qe,Ye,ht)}if(typeof Ye.then=="function")return dr(We,qe,Fp(Ye),ht);if(Ye.$$typeof===C)return dr(We,qe,vp(We,Ye),ht);hc(We,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint"?(Ye=""+Ye,qe!==null&&qe.tag===6?(g(We,qe.sibling),ht=P(qe,Ye),ht.return=We,We=ht):(g(We,qe),ht=Py(Ye,We.mode,ht),ht.return=We,We=ht),Z(We)):g(We,qe)}return function(We,qe,Ye,ht){try{oi=0;var Lt=dr(We,qe,Ye,ht);return ca=null,Lt}catch(zt){if(zt===Wa||zt===jp)throw zt;var Nn=ti(29,zt,null,We.mode);return Nn.lanes=ht,Nn.return=We,Nn}finally{}}}var pc=ax(!0),Z0=ax(!1),ki=te(null),Ka=null;function ts(d){var f=d.alternate;X(Kr,Kr.current&1),X(ki,d),Ka===null&&(f===null||oc.current!==null||f.memoizedState!==null)&&(Ka=d)}function ej(d){if(d.tag===22){if(X(Kr,Kr.current),X(ki,d),Ka===null){var f=d.alternate;f!==null&&f.memoizedState!==null&&(Ka=d)}}else So()}function So(){X(Kr,Kr.current),X(ki,ki.current)}function Hs(d){me(ki),Ka===d&&(Ka=null),me(Kr)}var Kr=te(0);function mh(d){for(var f=d;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||Qa(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Nu(d,f,g,S){f=d.memoizedState,g=g(S,f),g=g==null?f:h({},f,g),d.memoizedState=g,d.lanes===0&&(d.updateQueue.baseState=g)}var gh={enqueueSetState:function(d,f,g){d=d._reactInternals;var S=La(),P=sl(S);P.payload=f,g!=null&&(P.callback=g),f=bo(d,P,S),f!==null&&(Pi(f,d,S),eh(f,d,S))},enqueueReplaceState:function(d,f,g){d=d._reactInternals;var S=La(),P=sl(S);P.tag=1,P.payload=f,g!=null&&(P.callback=g),f=bo(d,P,S),f!==null&&(Pi(f,d,S),eh(f,d,S))},enqueueForceUpdate:function(d,f){d=d._reactInternals;var g=La(),S=sl(g);S.tag=2,f!=null&&(S.callback=f),f=bo(d,S,g),f!==null&&(Pi(f,d,g),eh(f,d,g))}};function yh(d,f,g,S,P,F,Z){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(S,F,Z):f.prototype&&f.prototype.isPureReactComponent?!qs(g,S)||!qs(P,F):!0}function tj(d,f,g,S){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,S),f.state!==d&&gh.enqueueReplaceState(f,f.state,null)}function ul(d,f){var g=f;if("ref"in f){g={};for(var S in f)S!=="ref"&&(g[S]=f[S])}if(d=d.defaultProps){g===f&&(g=h({},g));for(var P in d)g[P]===void 0&&(g[P]=d[P])}return g}var mc=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function ix(d){mc(d)}function $p(d){console.error(d)}function nj(d){mc(d)}function xh(d,f){try{var g=d.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function Gs(d,f,g){try{var S=d.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function Bp(d,f,g){return g=sl(g),g.tag=3,g.payload={element:null},g.callback=function(){xh(d,f)},g}function sx(d){return d=sl(d),d.tag=3,d}function rj(d,f,g,S){var P=g.type.getDerivedStateFromError;if(typeof P=="function"){var F=S.value;d.payload=function(){return P(F)},d.callback=function(){Gs(f,g,S)}}var Z=g.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(d.callback=function(){Gs(f,g,S),typeof P!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var pe=S.stack;this.componentDidCatch(S.value,{componentStack:pe!==null?pe:""})})}function aj(d,f,g,S,P){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=g.alternate,f!==null&&Xd(f,g,P,!0),g=ki.current,g!==null){switch(g.tag){case 13:return Ka===null?_x():g.alternate===null&&Yr===0&&(Yr=3),g.flags&=-257,g.flags|=65536,g.lanes=P,S===Iy?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([S]):f.add(S),Tx(d,S,P)),!1;case 22:return g.flags|=65536,S===Iy?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([S]):g.add(S)),Tx(d,S,P)),!1}throw Error(a(435,g.tag))}return Tx(d,S,P),_x(),!1}if(Pn)return f=ki.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=P,S!==mu&&(d=Error(a(422),{cause:S}),al(Ha(d,g)))):(S!==mu&&(f=Error(a(423),{cause:S}),al(Ha(f,g))),d=d.current.alternate,d.flags|=65536,P&=-P,d.lanes|=P,S=Ha(S,g),P=Bp(d.stateNode,S,P),bs(d,P),Yr!==4&&(Yr=2)),!1;var F=Error(a(520),{cause:S});if(F=Ha(F,g),Th===null?Th=[F]:Th.push(F),Yr!==4&&(Yr=2),f===null)return!0;S=Ha(S,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,d=P&-P,g.lanes|=d,d=Bp(g.stateNode,S,d),bs(g,d),!1;case 1:if(f=g.type,F=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(gl===null||!gl.has(F))))return g.flags|=65536,P&=-P,g.lanes|=P,P=sx(P),rj(P,d,g,S),bs(g,P),!1}g=g.return}while(g!==null);return!1}var ij=Error(a(461)),ga=!1;function Tr(d,f,g,S){f.child=d===null?Z0(f,null,g,S):pc(f,d.child,g,S)}function zp(d,f,g,S,P){g=g.render;var F=f.ref;if("ref"in S){var Z={};for(var pe in S)pe!=="ref"&&(Z[pe]=S[pe])}else Z=S;return ac(f),S=$y(d,f,g,Z,F,P),pe=zy(),d!==null&&!ga?(cc(d,f,P),_o(d,f,P)):(Pn&&pe&&Dy(f),f.flags|=1,Tr(d,f,S,P),f.child)}function qp(d,f,g,S,P){if(d===null){var F=g.type;return typeof F=="function"&&!ec(F)&&F.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=F,Up(d,f,F,S,P)):(d=gp(g.type,null,S,f,f.mode,P),d.ref=f.ref,d.return=f,f.child=d)}if(F=d.child,!Ns(d,P)){var Z=F.memoizedProps;if(g=g.compare,g=g!==null?g:qs,g(Z,S)&&d.ref===f.ref)return _o(d,f,P)}return f.flags|=1,d=Ga(F,S),d.ref=f.ref,d.return=f,f.child=d}function Up(d,f,g,S,P){if(d!==null){var F=d.memoizedProps;if(qs(F,S)&&d.ref===f.ref)if(ga=!1,f.pendingProps=S=F,Ns(d,P))(d.flags&131072)!==0&&(ga=!0);else return f.lanes=d.lanes,_o(d,f,P)}return Su(d,f,g,S,P)}function vh(d,f,g){var S=f.pendingProps,P=S.children,F=d!==null?d.memoizedState:null;if(S.mode==="hidden"){if((f.flags&128)!==0){if(S=F!==null?F.baseLanes|g:g,d!==null){for(P=f.child=d.child,F=0;P!==null;)F=F|P.lanes|P.childLanes,P=P.sibling;f.childLanes=F&~S}else f.childLanes=0,f.child=null;return gc(d,f,S,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},d!==null&&bp(f,F!==null?F.cachePool:null),F!==null?jo(f,F):Np(),ej(f);else return f.lanes=f.childLanes=536870912,gc(d,f,F!==null?F.baseLanes|g:g,g)}else F!==null?(bp(f,F.cachePool),jo(f,F),So(),f.memoizedState=null):(d!==null&&bp(f,null),Np(),So());return Tr(d,f,P,g),f.child}function gc(d,f,g,S){var P=vo();return P=P===null?null:{parent:yr._currentValue,pool:P},f.memoizedState={baseLanes:g,cachePool:P},d!==null&&bp(f,null),Np(),ej(f),d!==null&&Xd(d,f,S,!0),null}function Vt(d,f){var g=f.ref;if(g===null)d!==null&&d.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(a(284));(d===null||d.ref!==g)&&(f.flags|=4194816)}}function Su(d,f,g,S,P){return ac(f),g=$y(d,f,g,S,void 0,P),S=zy(),d!==null&&!ga?(cc(d,f,P),_o(d,f,P)):(Pn&&S&&Dy(f),f.flags|=1,Tr(d,f,g,P),f.child)}function Vp(d,f,g,S,P,F){return ac(f),f.updateQueue=null,g=B0(f,S,g,P),$0(d),S=zy(),d!==null&&!ga?(cc(d,f,F),_o(d,f,F)):(Pn&&S&&Dy(f),f.flags|=1,Tr(d,f,g,F),f.child)}function dl(d,f,g,S,P){if(ac(f),f.stateNode===null){var F=Zl,Z=g.contextType;typeof Z=="object"&&Z!==null&&(F=Wr(Z)),F=new g(S,F),f.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=gh,f.stateNode=F,F._reactInternals=f,F=f.stateNode,F.props=S,F.state=f.memoizedState,F.refs={},sc(f),Z=g.contextType,F.context=typeof Z=="object"&&Z!==null?Wr(Z):Zl,F.state=f.memoizedState,Z=g.getDerivedStateFromProps,typeof Z=="function"&&(Nu(f,g,Z,S),F.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(Z=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),Z!==F.state&&gh.enqueueReplaceState(F,F.state,null),Ma(f,S,F,P),js(),F.state=f.memoizedState),typeof F.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(d===null){F=f.stateNode;var pe=f.memoizedProps,Le=ul(g,pe);F.props=Le;var Je=F.context,dt=g.contextType;Z=Zl,typeof dt=="object"&&dt!==null&&(Z=Wr(dt));var pt=g.getDerivedStateFromProps;dt=typeof pt=="function"||typeof F.getSnapshotBeforeUpdate=="function",pe=f.pendingProps!==pe,dt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(pe||Je!==Z)&&tj(f,F,S,Z),Us=!1;var tt=f.memoizedState;F.state=tt,Ma(f,S,F,P),js(),Je=f.memoizedState,pe||tt!==Je||Us?(typeof pt=="function"&&(Nu(f,g,pt,S),Je=f.memoizedState),(Le=Us||yh(f,g,Le,S,tt,Je,Z))?(dt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(f.flags|=4194308)):(typeof F.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=Je),F.props=S,F.state=Je,F.context=Z,S=Le):(typeof F.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{F=f.stateNode,xu(d,f),Z=f.memoizedProps,dt=ul(g,Z),F.props=dt,pt=f.pendingProps,tt=F.context,Je=g.contextType,Le=Zl,typeof Je=="object"&&Je!==null&&(Le=Wr(Je)),pe=g.getDerivedStateFromProps,(Je=typeof pe=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(Z!==pt||tt!==Le)&&tj(f,F,S,Le),Us=!1,tt=f.memoizedState,F.state=tt,Ma(f,S,F,P),js();var Ze=f.memoizedState;Z!==pt||tt!==Ze||Us||d!==null&&d.dependencies!==null&&xp(d.dependencies)?(typeof pe=="function"&&(Nu(f,g,pe,S),Ze=f.memoizedState),(dt=Us||yh(f,g,dt,S,tt,Ze,Le)||d!==null&&d.dependencies!==null&&xp(d.dependencies))?(Je||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(S,Ze,Le),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(S,Ze,Le)),typeof F.componentDidUpdate=="function"&&(f.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof F.componentDidUpdate!="function"||Z===d.memoizedProps&&tt===d.memoizedState||(f.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||Z===d.memoizedProps&&tt===d.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=Ze),F.props=S,F.state=Ze,F.context=Le,S=dt):(typeof F.componentDidUpdate!="function"||Z===d.memoizedProps&&tt===d.memoizedState||(f.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||Z===d.memoizedProps&&tt===d.memoizedState||(f.flags|=1024),S=!1)}return F=S,Vt(d,f),S=(f.flags&128)!==0,F||S?(F=f.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:F.render(),f.flags|=1,d!==null&&S?(f.child=pc(f,d.child,null,P),f.child=pc(f,null,g,P)):Tr(d,f,g,P),f.memoizedState=F.state,d=f.child):d=_o(d,f,P),d}function sj(d,f,g,S){return Qd(),f.flags|=256,Tr(d,f,g,S),f.child}var bh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hp(d){return{baseLanes:d,cachePool:D0()}}function ya(d,f,g){return d=d!==null?d.childLanes&~g:0,f&&(d|=rs),d}function oj(d,f,g){var S=f.pendingProps,P=!1,F=(f.flags&128)!==0,Z;if((Z=F)||(Z=d!==null&&d.memoizedState===null?!1:(Kr.current&2)!==0),Z&&(P=!0,f.flags&=-129),Z=(f.flags&32)!==0,f.flags&=-33,d===null){if(Pn){if(P?ts(f):So(),Pn){var pe=Mr,Le;if(Le=pe){e:{for(Le=pe,pe=ni;Le.nodeType!==8;){if(!pe){pe=null;break e}if(Le=_s(Le.nextSibling),Le===null){pe=null;break e}}pe=Le}pe!==null?(f.memoizedState={dehydrated:pe,treeContext:kr!==null?{id:Or,overflow:xo}:null,retryLane:536870912,hydrationErrors:null},Le=ti(18,null,null,0),Le.stateNode=pe,Le.return=f,f.child=Le,la=f,Mr=null,Le=!0):Le=!1}Le||Ji(f)}if(pe=f.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))return Qa(pe)?f.lanes=32:f.lanes=536870912,null;Hs(f)}return pe=S.children,S=S.fallback,P?(So(),P=f.mode,pe=jh({mode:"hidden",children:pe},P),S=tc(S,P,g,null),pe.return=f,S.return=f,pe.sibling=S,f.child=pe,P=f.child,P.memoizedState=Hp(g),P.childLanes=ya(d,Z,g),f.memoizedState=bh,S):(ts(f),ox(f,pe))}if(Le=d.memoizedState,Le!==null&&(pe=Le.dehydrated,pe!==null)){if(F)f.flags&256?(ts(f),f.flags&=-257,f=lx(d,f,g)):f.memoizedState!==null?(So(),f.child=d.child,f.flags|=128,f=null):(So(),P=S.fallback,pe=f.mode,S=jh({mode:"visible",children:S.children},pe),P=tc(P,pe,g,null),P.flags|=2,S.return=f,P.return=f,S.sibling=P,f.child=S,pc(f,d.child,null,g),S=f.child,S.memoizedState=Hp(g),S.childLanes=ya(d,Z,g),f.memoizedState=bh,f=P);else if(ts(f),Qa(pe)){if(Z=pe.nextSibling&&pe.nextSibling.dataset,Z)var Je=Z.dgst;Z=Je,S=Error(a(419)),S.stack="",S.digest=Z,al({value:S,source:null,stack:null}),f=lx(d,f,g)}else if(ga||Xd(d,f,g,!1),Z=(g&d.childLanes)!==0,ga||Z){if(Z=wr,Z!==null&&(S=g&-g,S=(S&42)!==0?1:jt(S),S=(S&(Z.suspendedLanes|g))!==0?0:S,S!==0&&S!==Le.retryLane))throw Le.retryLane=S,Jl(d,S),Pi(Z,d,S),ij;pe.data==="$?"||_x(),f=lx(d,f,g)}else pe.data==="$?"?(f.flags|=192,f.child=d.child,f=null):(d=Le.treeContext,Mr=_s(pe.nextSibling),la=f,Pn=!0,vs=null,ni=!1,d!==null&&(Qi[Xi++]=Or,Qi[Xi++]=xo,Qi[Xi++]=kr,Or=d.id,xo=d.overflow,kr=f),f=ox(f,S.children),f.flags|=4096);return f}return P?(So(),P=S.fallback,pe=f.mode,Le=d.child,Je=Le.sibling,S=Ga(Le,{mode:"hidden",children:S.children}),S.subtreeFlags=Le.subtreeFlags&65011712,Je!==null?P=Ga(Je,P):(P=tc(P,pe,g,null),P.flags|=2),P.return=f,S.return=f,S.sibling=P,f.child=S,S=P,P=f.child,pe=d.child.memoizedState,pe===null?pe=Hp(g):(Le=pe.cachePool,Le!==null?(Je=yr._currentValue,Le=Le.parent!==Je?{parent:Je,pool:Je}:Le):Le=D0(),pe={baseLanes:pe.baseLanes|g,cachePool:Le}),P.memoizedState=pe,P.childLanes=ya(d,Z,g),f.memoizedState=bh,S):(ts(f),g=d.child,d=g.sibling,g=Ga(g,{mode:"visible",children:S.children}),g.return=f,g.sibling=null,d!==null&&(Z=f.deletions,Z===null?(f.deletions=[d],f.flags|=16):Z.push(d)),f.child=g,f.memoizedState=null,g)}function ox(d,f){return f=jh({mode:"visible",children:f},d.mode),f.return=d,d.child=f}function jh(d,f){return d=ti(22,d,null,f),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function lx(d,f,g){return pc(f,d.child,null,g),d=ox(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function cx(d,f,g){d.lanes|=f;var S=d.alternate;S!==null&&(S.lanes|=f),ri(d.return,f,g)}function ux(d,f,g,S,P){var F=d.memoizedState;F===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:P}:(F.isBackwards=f,F.rendering=null,F.renderingStartTime=0,F.last=S,F.tail=g,F.tailMode=P)}function lj(d,f,g){var S=f.pendingProps,P=S.revealOrder,F=S.tail;if(Tr(d,f,S.children,g),S=Kr.current,(S&2)!==0)S=S&1|2,f.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&cx(d,g,f);else if(d.tag===19)cx(d,g,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}S&=1}switch(X(Kr,S),P){case"forwards":for(g=f.child,P=null;g!==null;)d=g.alternate,d!==null&&mh(d)===null&&(P=g),g=g.sibling;g=P,g===null?(P=f.child,f.child=null):(P=g.sibling,g.sibling=null),ux(f,!1,P,g,F);break;case"backwards":for(g=null,P=f.child,f.child=null;P!==null;){if(d=P.alternate,d!==null&&mh(d)===null){f.child=P;break}d=P.sibling,P.sibling=g,g=P,P=d}ux(f,!0,g,null,F);break;case"together":ux(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function _o(d,f,g){if(d!==null&&(f.dependencies=d.dependencies),ml|=f.lanes,(g&f.childLanes)===0)if(d!==null){if(Xd(d,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(d!==null&&f.child!==d.child)throw Error(a(153));if(f.child!==null){for(d=f.child,g=Ga(d,d.pendingProps),f.child=g,g.return=f;d.sibling!==null;)d=d.sibling,g=g.sibling=Ga(d,d.pendingProps),g.return=f;g.sibling=null}return f.child}function Ns(d,f){return(d.lanes&f)!==0?!0:(d=d.dependencies,!!(d!==null&&xp(d)))}function Ya(d,f,g){switch(f.tag){case 3:le(f,f.stateNode.containerInfo),_i(f,yr,d.memoizedState.cache),Qd();break;case 27:case 5:Ve(f);break;case 4:le(f,f.stateNode.containerInfo);break;case 10:_i(f,f.type,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(ts(f),f.flags|=128,null):(g&f.child.childLanes)!==0?oj(d,f,g):(ts(f),d=_o(d,f,g),d!==null?d.sibling:null);ts(f);break;case 19:var P=(d.flags&128)!==0;if(S=(g&f.childLanes)!==0,S||(Xd(d,f,g,!1),S=(g&f.childLanes)!==0),P){if(S)return lj(d,f,g);f.flags|=128}if(P=f.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),X(Kr,Kr.current),S)break;return null;case 22:case 23:return f.lanes=0,vh(d,f,g);case 24:_i(f,yr,d.memoizedState.cache)}return _o(d,f,g)}function Gp(d,f,g){if(d!==null)if(d.memoizedProps!==f.pendingProps)ga=!0;else{if(!Ns(d,g)&&(f.flags&128)===0)return ga=!1,Ya(d,f,g);ga=(d.flags&131072)!==0}else ga=!1,Pn&&(f.flags&1048576)!==0&&Ey(f,Wd,f.index);switch(f.lanes=0,f.tag){case 16:e:{d=f.pendingProps;var S=f.elementType,P=S._init;if(S=P(S._payload),f.type=S,typeof S=="function")ec(S)?(d=ul(S,d),f.tag=1,f=dl(null,f,S,d,g)):(f.tag=0,f=Su(null,f,S,d,g));else{if(S!=null){if(P=S.$$typeof,P===A){f.tag=11,f=zp(null,f,S,d,g);break e}else if(P===I){f.tag=14,f=qp(null,f,S,d,g);break e}}throw f=K(S)||S,Error(a(306,f,""))}}return f;case 0:return Su(d,f,f.type,f.pendingProps,g);case 1:return S=f.type,P=ul(S,f.pendingProps),dl(d,f,S,P,g);case 3:e:{if(le(f,f.stateNode.containerInfo),d===null)throw Error(a(387));S=f.pendingProps;var F=f.memoizedState;P=F.element,xu(d,f),Ma(f,S,null,g);var Z=f.memoizedState;if(S=Z.cache,_i(f,yr,S),S!==F.cache&&wn(f,[yr],g,!0),js(),S=Z.element,F.isDehydrated)if(F={element:S,isDehydrated:!1,cache:Z.cache},f.updateQueue.baseState=F,f.memoizedState=F,f.flags&256){f=sj(d,f,S,g);break e}else if(S!==P){P=Ha(Error(a(424)),f),al(P),f=sj(d,f,S,g);break e}else{switch(d=f.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(Mr=_s(d.firstChild),la=f,Pn=!0,vs=null,ni=!0,g=Z0(f,null,S,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Qd(),S===P){f=_o(d,f,g);break e}Tr(d,f,S,g)}f=f.child}return f;case 26:return Vt(d,f),d===null?(g=a1(f.type,null,f.pendingProps,null))?f.memoizedState=g:Pn||(g=f.type,d=f.pendingProps,S=vc(Ee.current).createElement(g),S[Gt]=f,S[Xn]=d,ha(S,g,d),Rt(S),f.stateNode=S):f.memoizedState=a1(f.type,d.memoizedProps,f.pendingProps,d.memoizedState),null;case 27:return Ve(f),d===null&&Pn&&(S=f.stateNode=t1(f.type,f.pendingProps,Ee.current),la=f,ni=!0,P=Mr,as(f.type)?(Lx=P,Mr=_s(S.firstChild)):Mr=P),Tr(d,f,f.pendingProps.children,g),Vt(d,f),d===null&&(f.flags|=4194304),f.child;case 5:return d===null&&Pn&&((P=S=Mr)&&(S=Zj(S,f.type,f.pendingProps,ni),S!==null?(f.stateNode=S,la=f,Mr=_s(S.firstChild),ni=!1,P=!0):P=!1),P||Ji(f)),Ve(f),P=f.type,F=f.pendingProps,Z=d!==null?d.memoizedProps:null,S=F.children,cm(P,F)?S=null:Z!==null&&cm(P,Z)&&(f.flags|=32),f.memoizedState!==null&&(P=$y(d,f,By,null,null,g),Uu._currentValue=P),Vt(d,f),Tr(d,f,S,g),f.child;case 6:return d===null&&Pn&&((d=g=Mr)&&(g=dm(g,f.pendingProps,ni),g!==null?(f.stateNode=g,la=f,Mr=null,d=!0):d=!1),d||Ji(f)),null;case 13:return oj(d,f,g);case 4:return le(f,f.stateNode.containerInfo),S=f.pendingProps,d===null?f.child=pc(f,null,S,g):Tr(d,f,S,g),f.child;case 11:return zp(d,f,f.type,f.pendingProps,g);case 7:return Tr(d,f,f.pendingProps,g),f.child;case 8:return Tr(d,f,f.pendingProps.children,g),f.child;case 12:return Tr(d,f,f.pendingProps.children,g),f.child;case 10:return S=f.pendingProps,_i(f,f.type,S.value),Tr(d,f,S.children,g),f.child;case 9:return P=f.type._context,S=f.pendingProps.children,ac(f),P=Wr(P),S=S(P),f.flags|=1,Tr(d,f,S,g),f.child;case 14:return qp(d,f,f.type,f.pendingProps,g);case 15:return Up(d,f,f.type,f.pendingProps,g);case 19:return lj(d,f,g);case 31:return S=f.pendingProps,g=f.mode,S={mode:S.mode,children:S.children},d===null?(g=jh(S,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=Ga(d.child,S),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return vh(d,f,g);case 24:return ac(f),S=Wr(yr),d===null?(P=vo(),P===null&&(P=wr,F=Oy(),P.pooledCache=F,F.refCount++,F!==null&&(P.pooledCacheLanes|=g),P=F),f.memoizedState={parent:S,cache:P},sc(f),_i(f,yr,P)):((d.lanes&g)!==0&&(xu(d,f),Ma(f,null,null,g),js()),P=d.memoizedState,F=f.memoizedState,P.parent!==S?(P={parent:S,cache:S},f.memoizedState=P,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=P),_i(f,yr,S)):(S=F.cache,_i(f,yr,S),S!==P.cache&&wn(f,[yr],g,!0))),Tr(d,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(a(156,f.tag))}function Co(d){d.flags|=4}function Wp(d,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!fa(f)){if(f=ki.current,f!==null&&((Bn&4194048)===Bn?Ka!==null:(Bn&62914560)!==Bn&&(Bn&536870912)===0||f!==Ka))throw yu=Iy,O0;d.flags|=8192}}function Kp(d,f){f!==null&&(d.flags|=4),d.flags&16384&&(f=d.tag!==22?Ct():536870912,d.lanes|=f,Eu|=f)}function wh(d,f){if(!Pn)switch(d.tailMode){case"hidden":f=d.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?d.tail=null:g.sibling=null;break;case"collapsed":g=d.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:S.sibling=null}}function xr(d){var f=d.alternate!==null&&d.alternate.child===d.child,g=0,S=0;if(f)for(var P=d.child;P!==null;)g|=P.lanes|P.childLanes,S|=P.subtreeFlags&65011712,S|=P.flags&65011712,P.return=d,P=P.sibling;else for(P=d.child;P!==null;)g|=P.lanes|P.childLanes,S|=P.subtreeFlags,S|=P.flags,P.return=d,P=P.sibling;return d.subtreeFlags|=S,d.childLanes=g,f}function cj(d,f,g){var S=f.pendingProps;switch(Kd(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(f),null;case 1:return xr(f),null;case 3:return g=f.stateNode,S=null,d!==null&&(S=d.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),Zi(yr),_e(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(d===null||d.child===null)&&(Yd(f)?Co(f):d===null||d.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,T0())),xr(f),null;case 26:return g=f.memoizedState,d===null?(Co(f),g!==null?(xr(f),Wp(f,g)):(xr(f),f.flags&=-16777217)):g?g!==d.memoizedState?(Co(f),xr(f),Wp(f,g)):(xr(f),f.flags&=-16777217):(d.memoizedProps!==S&&Co(f),xr(f),f.flags&=-16777217),null;case 27:De(f),g=Ee.current;var P=f.type;if(d!==null&&f.stateNode!=null)d.memoizedProps!==S&&Co(f);else{if(!S){if(f.stateNode===null)throw Error(a(166));return xr(f),null}d=Re.current,Yd(f)?C0(f):(d=t1(P,S,g),f.stateNode=d,Co(f))}return xr(f),null;case 5:if(De(f),g=f.type,d!==null&&f.stateNode!=null)d.memoizedProps!==S&&Co(f);else{if(!S){if(f.stateNode===null)throw Error(a(166));return xr(f),null}if(d=Re.current,Yd(f))C0(f);else{switch(P=vc(Ee.current),d){case 1:d=P.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:d=P.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":d=P.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":d=P.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":d=P.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof S.is=="string"?P.createElement("select",{is:S.is}):P.createElement("select"),S.multiple?d.multiple=!0:S.size&&(d.size=S.size);break;default:d=typeof S.is=="string"?P.createElement(g,{is:S.is}):P.createElement(g)}}d[Gt]=f,d[Xn]=S;e:for(P=f.child;P!==null;){if(P.tag===5||P.tag===6)d.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===f)break e;for(;P.sibling===null;){if(P.return===null||P.return===f)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}f.stateNode=d;e:switch(ha(d,g,S),g){case"button":case"input":case"select":case"textarea":d=!!S.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Co(f)}}return xr(f),f.flags&=-16777217,null;case 6:if(d&&f.stateNode!=null)d.memoizedProps!==S&&Co(f);else{if(typeof S!="string"&&f.stateNode===null)throw Error(a(166));if(d=Ee.current,Yd(f)){if(d=f.stateNode,g=f.memoizedProps,S=null,P=la,P!==null)switch(P.tag){case 27:case 5:S=P.memoizedProps}d[Gt]=f,d=!!(d.nodeValue===g||S!==null&&S.suppressHydrationWarning===!0||Yj(d.nodeValue,g)),d||Ji(f)}else d=vc(d).createTextNode(S),d[Gt]=f,f.stateNode=d}return xr(f),null;case 13:if(S=f.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(P=Yd(f),S!==null&&S.dehydrated!==null){if(d===null){if(!P)throw Error(a(318));if(P=f.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(a(317));P[Gt]=f}else Qd(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;xr(f),P=!1}else P=T0(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=P),P=!0;if(!P)return f.flags&256?(Hs(f),f):(Hs(f),null)}if(Hs(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=S!==null,d=d!==null&&d.memoizedState!==null,g){S=f.child,P=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(P=S.alternate.memoizedState.cachePool.pool);var F=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(F=S.memoizedState.cachePool.pool),F!==P&&(S.flags|=2048)}return g!==d&&g&&(f.child.flags|=8192),Kp(f,f.updateQueue),xr(f),null;case 4:return _e(),d===null&&Ox(f.stateNode.containerInfo),xr(f),null;case 10:return Zi(f.type),xr(f),null;case 19:if(me(Kr),P=f.memoizedState,P===null)return xr(f),null;if(S=(f.flags&128)!==0,F=P.rendering,F===null)if(S)wh(P,!1);else{if(Yr!==0||d!==null&&(d.flags&128)!==0)for(d=f.child;d!==null;){if(F=mh(d),F!==null){for(f.flags|=128,wh(P,!1),d=F.updateQueue,f.updateQueue=d,Kp(f,d),f.subtreeFlags=0,d=g,g=f.child;g!==null;)Gd(g,d),g=g.sibling;return X(Kr,Kr.current&1|2),f.child}d=d.sibling}P.tail!==null&&Ce()>Du&&(f.flags|=128,S=!0,wh(P,!1),f.lanes=4194304)}else{if(!S)if(d=mh(F),d!==null){if(f.flags|=128,S=!0,d=d.updateQueue,f.updateQueue=d,Kp(f,d),wh(P,!0),P.tail===null&&P.tailMode==="hidden"&&!F.alternate&&!Pn)return xr(f),null}else 2*Ce()-P.renderingStartTime>Du&&g!==536870912&&(f.flags|=128,S=!0,wh(P,!1),f.lanes=4194304);P.isBackwards?(F.sibling=f.child,f.child=F):(d=P.last,d!==null?d.sibling=F:f.child=F,P.last=F)}return P.tail!==null?(f=P.tail,P.rendering=f,P.tail=f.sibling,P.renderingStartTime=Ce(),f.sibling=null,d=Kr.current,X(Kr,S?d&1|2:d&1),f):(xr(f),null);case 22:case 23:return Hs(f),Fy(),S=f.memoizedState!==null,d!==null?d.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(g&536870912)!==0&&(f.flags&128)===0&&(xr(f),f.subtreeFlags&6&&(f.flags|=8192)):xr(f),g=f.updateQueue,g!==null&&Kp(f,g.retryQueue),g=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==g&&(f.flags|=2048),d!==null&&me(ic),null;case 24:return g=null,d!==null&&(g=d.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),Zi(yr),xr(f),null;case 25:return null;case 30:return null}throw Error(a(156,f.tag))}function uj(d,f){switch(Kd(f),f.tag){case 1:return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return Zi(yr),_e(),d=f.flags,(d&65536)!==0&&(d&128)===0?(f.flags=d&-65537|128,f):null;case 26:case 27:case 5:return De(f),null;case 13:if(Hs(f),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(a(340));Qd()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return me(Kr),null;case 4:return _e(),null;case 10:return Zi(f.type),null;case 22:case 23:return Hs(f),Fy(),d!==null&&me(ic),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 24:return Zi(yr),null;case 25:return null;default:return null}}function dj(d,f){switch(Kd(f),f.tag){case 3:Zi(yr),_e();break;case 26:case 27:case 5:De(f);break;case 4:_e();break;case 13:Hs(f);break;case 19:me(Kr);break;case 10:Zi(f.type);break;case 22:case 23:Hs(f),Fy(),d!==null&&me(ic);break;case 24:Zi(yr)}}function Nh(d,f){try{var g=f.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var P=S.next;g=P;do{if((g.tag&d)===d){S=void 0;var F=g.create,Z=g.inst;S=F(),Z.destroy=S}g=g.next}while(g!==P)}}catch(pe){vr(f,f.return,pe)}}function hl(d,f,g){try{var S=f.updateQueue,P=S!==null?S.lastEffect:null;if(P!==null){var F=P.next;S=F;do{if((S.tag&d)===d){var Z=S.inst,pe=Z.destroy;if(pe!==void 0){Z.destroy=void 0,P=f;var Le=g,Je=pe;try{Je()}catch(dt){vr(P,Le,dt)}}}S=S.next}while(S!==F)}}catch(dt){vr(f,f.return,dt)}}function hj(d){var f=d.updateQueue;if(f!==null){var g=d.stateNode;try{Ly(f,g)}catch(S){vr(d,d.return,S)}}}function dx(d,f,g){g.props=ul(d.type,d.memoizedProps),g.state=d.memoizedState;try{g.componentWillUnmount()}catch(S){vr(d,f,S)}}function _u(d,f){try{var g=d.ref;if(g!==null){switch(d.tag){case 26:case 27:case 5:var S=d.stateNode;break;case 30:S=d.stateNode;break;default:S=d.stateNode}typeof g=="function"?d.refCleanup=g(S):g.current=S}}catch(P){vr(d,f,P)}}function Ws(d,f){var g=d.ref,S=d.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(P){vr(d,f,P)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(P){vr(d,f,P)}else g.current=null}function Yp(d){var f=d.type,g=d.memoizedProps,S=d.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&S.focus();break e;case"img":g.src?S.src=g.src:g.srcSet&&(S.srcset=g.srcSet)}}catch(P){vr(d,d.return,P)}}function Qp(d,f,g){try{var S=d.stateNode;T_(S,d.type,g,f),S[Xn]=f}catch(P){vr(d,d.return,P)}}function Cu(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&as(d.type)||d.tag===4}function Sh(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Cu(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&as(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Xp(d,f,g){var S=d.tag;if(S===5||S===6)d=d.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(d,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(d),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=om));else if(S!==4&&(S===27&&as(d.type)&&(g=d.stateNode,f=null),d=d.child,d!==null))for(Xp(d,f,g),d=d.sibling;d!==null;)Xp(d,f,g),d=d.sibling}function _h(d,f,g){var S=d.tag;if(S===5||S===6)d=d.stateNode,f?g.insertBefore(d,f):g.appendChild(d);else if(S!==4&&(S===27&&as(d.type)&&(g=d.stateNode),d=d.child,d!==null))for(_h(d,f,g),d=d.sibling;d!==null;)_h(d,f,g),d=d.sibling}function Ch(d){var f=d.stateNode,g=d.memoizedProps;try{for(var S=d.type,P=f.attributes;P.length;)f.removeAttributeNode(P[0]);ha(f,S,g),f[Gt]=d,f[Xn]=g}catch(F){vr(d,d.return,F)}}var Ks=!1,er=!1,ko=!1,fj=typeof WeakSet=="function"?WeakSet:Set,ua=null;function p_(d,f){if(d=d.containerInfo,Ss=mm,d=S0(d),ky(d)){if("selectionStart"in d)var g={start:d.selectionStart,end:d.selectionEnd};else e:{g=(g=d.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var P=S.anchorOffset,F=S.focusNode;S=S.focusOffset;try{g.nodeType,F.nodeType}catch{g=null;break e}var Z=0,pe=-1,Le=-1,Je=0,dt=0,pt=d,tt=null;t:for(;;){for(var Ze;pt!==g||P!==0&&pt.nodeType!==3||(pe=Z+P),pt!==F||S!==0&&pt.nodeType!==3||(Le=Z+S),pt.nodeType===3&&(Z+=pt.nodeValue.length),(Ze=pt.firstChild)!==null;)tt=pt,pt=Ze;for(;;){if(pt===d)break t;if(tt===g&&++Je===P&&(pe=Z),tt===F&&++dt===S&&(Le=Z),(Ze=pt.nextSibling)!==null)break;pt=tt,tt=pt.parentNode}pt=Ze}g=pe===-1||Le===-1?null:{start:pe,end:Le}}else g=null}g=g||{start:0,end:0}}else g=null;for(lm={focusedElem:d,selectionRange:g},mm=!1,ua=f;ua!==null;)if(f=ua,d=f.child,(f.subtreeFlags&1024)!==0&&d!==null)d.return=f,ua=d;else for(;ua!==null;){switch(f=ua,F=f.alternate,d=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&F!==null){d=void 0,g=f,P=F.memoizedProps,F=F.memoizedState,S=g.stateNode;try{var Qt=ul(g.type,P,g.elementType===g.type);d=S.getSnapshotBeforeUpdate(Qt,F),S.__reactInternalSnapshotBeforeUpdate=d}catch(Yt){vr(g,g.return,Yt)}}break;case 3:if((d&1024)!==0){if(d=f.stateNode.containerInfo,g=d.nodeType,g===9)Rx(d);else if(g===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":Rx(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(a(163))}if(d=f.sibling,d!==null){d.return=f.return,ua=d;break}ua=f.return}}function pj(d,f,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:fl(d,g),S&4&&Nh(5,g);break;case 1:if(fl(d,g),S&4)if(d=g.stateNode,f===null)try{d.componentDidMount()}catch(Z){vr(g,g.return,Z)}else{var P=ul(g.type,f.memoizedProps);f=f.memoizedState;try{d.componentDidUpdate(P,f,d.__reactInternalSnapshotBeforeUpdate)}catch(Z){vr(g,g.return,Z)}}S&64&&hj(g),S&512&&_u(g,g.return);break;case 3:if(fl(d,g),S&64&&(d=g.updateQueue,d!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{Ly(d,f)}catch(Z){vr(g,g.return,Z)}}break;case 27:f===null&&S&4&&Ch(g);case 26:case 5:fl(d,g),f===null&&S&4&&Yp(g),S&512&&_u(g,g.return);break;case 12:fl(d,g);break;case 13:fl(d,g),S&4&&yj(d,g),S&64&&(d=g.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(g=nm.bind(null,g),Fu(d,g))));break;case 22:if(S=g.memoizedState!==null||Ks,!S){f=f!==null&&f.memoizedState!==null||er,P=Ks;var F=er;Ks=S,(er=f)&&!F?Ao(d,g,(g.subtreeFlags&8772)!==0):fl(d,g),Ks=P,er=F}break;case 30:break;default:fl(d,g)}}function mj(d){var f=d.alternate;f!==null&&(d.alternate=null,mj(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&An(f)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Ir=null,li=!1;function To(d,f,g){for(g=g.child;g!==null;)gj(d,f,g),g=g.sibling}function gj(d,f,g){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(J,g)}catch{}switch(g.tag){case 26:er||Ws(g,f),To(d,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:er||Ws(g,f);var S=Ir,P=li;as(g.type)&&(Ir=g.stateNode,li=!1),To(d,f,g),Lh(g.stateNode),Ir=S,li=P;break;case 5:er||Ws(g,f);case 6:if(S=Ir,P=li,Ir=null,To(d,f,g),Ir=S,li=P,Ir!==null)if(li)try{(Ir.nodeType===9?Ir.body:Ir.nodeName==="HTML"?Ir.ownerDocument.body:Ir).removeChild(g.stateNode)}catch(F){vr(g,f,F)}else try{Ir.removeChild(g.stateNode)}catch(F){vr(g,f,F)}break;case 18:Ir!==null&&(li?(d=Ir,um(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,g.stateNode),Hh(d)):um(Ir,g.stateNode));break;case 4:S=Ir,P=li,Ir=g.stateNode.containerInfo,li=!0,To(d,f,g),Ir=S,li=P;break;case 0:case 11:case 14:case 15:er||hl(2,g,f),er||hl(4,g,f),To(d,f,g);break;case 1:er||(Ws(g,f),S=g.stateNode,typeof S.componentWillUnmount=="function"&&dx(g,f,S)),To(d,f,g);break;case 21:To(d,f,g);break;case 22:er=(S=er)||g.memoizedState!==null,To(d,f,g),er=S;break;default:To(d,f,g)}}function yj(d,f){if(f.memoizedState===null&&(d=f.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Hh(d)}catch(g){vr(f,f.return,g)}}function m_(d){switch(d.tag){case 13:case 19:var f=d.stateNode;return f===null&&(f=d.stateNode=new fj),f;case 22:return d=d.stateNode,f=d._retryCache,f===null&&(f=d._retryCache=new fj),f;default:throw Error(a(435,d.tag))}}function hx(d,f){var g=m_(d);f.forEach(function(S){var P=j_.bind(null,d,S);g.has(S)||(g.add(S),S.then(P,P))})}function Ti(d,f){var g=f.deletions;if(g!==null)for(var S=0;S<g.length;S++){var P=g[S],F=d,Z=f,pe=Z;e:for(;pe!==null;){switch(pe.tag){case 27:if(as(pe.type)){Ir=pe.stateNode,li=!1;break e}break;case 5:Ir=pe.stateNode,li=!1;break e;case 3:case 4:Ir=pe.stateNode.containerInfo,li=!0;break e}pe=pe.return}if(Ir===null)throw Error(a(160));gj(F,Z,P),Ir=null,li=!1,F=P.alternate,F!==null&&(F.return=null),P.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)fx(f,d),f=f.sibling}var ns=null;function fx(d,f){var g=d.alternate,S=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Ti(f,d),ci(d),S&4&&(hl(3,d,d.return),Nh(3,d),hl(5,d,d.return));break;case 1:Ti(f,d),ci(d),S&512&&(er||g===null||Ws(g,g.return)),S&64&&Ks&&(d=d.updateQueue,d!==null&&(S=d.callbacks,S!==null&&(g=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:var P=ns;if(Ti(f,d),ci(d),S&512&&(er||g===null||Ws(g,g.return)),S&4){var F=g!==null?g.memoizedState:null;if(S=d.memoizedState,g===null)if(S===null)if(d.stateNode===null){e:{S=d.type,g=d.memoizedProps,P=P.ownerDocument||P;t:switch(S){case"title":F=P.getElementsByTagName("title")[0],(!F||F[Gr]||F[Gt]||F.namespaceURI==="http://www.w3.org/2000/svg"||F.hasAttribute("itemprop"))&&(F=P.createElement(S),P.head.insertBefore(F,P.querySelector("head > title"))),ha(F,S,g),F[Gt]=d,Rt(F),S=F;break e;case"link":var Z=o1("link","href",P).get(S+(g.href||""));if(Z){for(var pe=0;pe<Z.length;pe++)if(F=Z[pe],F.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&F.getAttribute("rel")===(g.rel==null?null:g.rel)&&F.getAttribute("title")===(g.title==null?null:g.title)&&F.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){Z.splice(pe,1);break t}}F=P.createElement(S),ha(F,S,g),P.head.appendChild(F);break;case"meta":if(Z=o1("meta","content",P).get(S+(g.content||""))){for(pe=0;pe<Z.length;pe++)if(F=Z[pe],F.getAttribute("content")===(g.content==null?null:""+g.content)&&F.getAttribute("name")===(g.name==null?null:g.name)&&F.getAttribute("property")===(g.property==null?null:g.property)&&F.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&F.getAttribute("charset")===(g.charSet==null?null:g.charSet)){Z.splice(pe,1);break t}}F=P.createElement(S),ha(F,S,g),P.head.appendChild(F);break;default:throw Error(a(468,S))}F[Gt]=d,Rt(F),S=F}d.stateNode=S}else l1(P,d.type,d.stateNode);else d.stateNode=s1(P,S,d.memoizedProps);else F!==S?(F===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):F.count--,S===null?l1(P,d.type,d.stateNode):s1(P,S,d.memoizedProps)):S===null&&d.stateNode!==null&&Qp(d,d.memoizedProps,g.memoizedProps)}break;case 27:Ti(f,d),ci(d),S&512&&(er||g===null||Ws(g,g.return)),g!==null&&S&4&&Qp(d,d.memoizedProps,g.memoizedProps);break;case 5:if(Ti(f,d),ci(d),S&512&&(er||g===null||Ws(g,g.return)),d.flags&32){P=d.stateNode;try{Qo(P,"")}catch(Ze){vr(d,d.return,Ze)}}S&4&&d.stateNode!=null&&(P=d.memoizedProps,Qp(d,P,g!==null?g.memoizedProps:P)),S&1024&&(ko=!0);break;case 6:if(Ti(f,d),ci(d),S&4){if(d.stateNode===null)throw Error(a(162));S=d.memoizedProps,g=d.stateNode;try{g.nodeValue=S}catch(Ze){vr(d,d.return,Ze)}}break;case 3:if(qu=null,P=ns,ns=dn(f.containerInfo),Ti(f,d),ns=P,ci(d),S&4&&g!==null&&g.memoizedState.isDehydrated)try{Hh(f.containerInfo)}catch(Ze){vr(d,d.return,Ze)}ko&&(ko=!1,xj(d));break;case 4:S=ns,ns=dn(d.stateNode.containerInfo),Ti(f,d),ci(d),ns=S;break;case 12:Ti(f,d),ci(d);break;case 13:Ti(f,d),ci(d),d.child.flags&8192&&d.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(bx=Ce()),S&4&&(S=d.updateQueue,S!==null&&(d.updateQueue=null,hx(d,S)));break;case 22:P=d.memoizedState!==null;var Le=g!==null&&g.memoizedState!==null,Je=Ks,dt=er;if(Ks=Je||P,er=dt||Le,Ti(f,d),er=dt,Ks=Je,ci(d),S&8192)e:for(f=d.stateNode,f._visibility=P?f._visibility&-2:f._visibility|1,P&&(g===null||Le||Ks||er||yc(d)),g=null,f=d;;){if(f.tag===5||f.tag===26){if(g===null){Le=g=f;try{if(F=Le.stateNode,P)Z=F.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{pe=Le.stateNode;var pt=Le.memoizedProps.style,tt=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;pe.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Ze){vr(Le,Le.return,Ze)}}}else if(f.tag===6){if(g===null){Le=f;try{Le.stateNode.nodeValue=P?"":Le.memoizedProps}catch(Ze){vr(Le,Le.return,Ze)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===d)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break e;for(;f.sibling===null;){if(f.return===null||f.return===d)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}S&4&&(S=d.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,hx(d,g))));break;case 19:Ti(f,d),ci(d),S&4&&(S=d.updateQueue,S!==null&&(d.updateQueue=null,hx(d,S)));break;case 30:break;case 21:break;default:Ti(f,d),ci(d)}}function ci(d){var f=d.flags;if(f&2){try{for(var g,S=d.return;S!==null;){if(Cu(S)){g=S;break}S=S.return}if(g==null)throw Error(a(160));switch(g.tag){case 27:var P=g.stateNode,F=Sh(d);_h(d,F,P);break;case 5:var Z=g.stateNode;g.flags&32&&(Qo(Z,""),g.flags&=-33);var pe=Sh(d);_h(d,pe,Z);break;case 3:case 4:var Le=g.stateNode.containerInfo,Je=Sh(d);Xp(d,Je,Le);break;default:throw Error(a(161))}}catch(dt){vr(d,d.return,dt)}d.flags&=-3}f&4096&&(d.flags&=-4097)}function xj(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var f=d;xj(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),d=d.sibling}}function fl(d,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)pj(d,f.alternate,f),f=f.sibling}function yc(d){for(d=d.child;d!==null;){var f=d;switch(f.tag){case 0:case 11:case 14:case 15:hl(4,f,f.return),yc(f);break;case 1:Ws(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&dx(f,f.return,g),yc(f);break;case 27:Lh(f.stateNode);case 26:case 5:Ws(f,f.return),yc(f);break;case 22:f.memoizedState===null&&yc(f);break;case 30:yc(f);break;default:yc(f)}d=d.sibling}}function Ao(d,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,P=d,F=f,Z=F.flags;switch(F.tag){case 0:case 11:case 15:Ao(P,F,g),Nh(4,F);break;case 1:if(Ao(P,F,g),S=F,P=S.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(Je){vr(S,S.return,Je)}if(S=F,P=S.updateQueue,P!==null){var pe=S.stateNode;try{var Le=P.shared.hiddenCallbacks;if(Le!==null)for(P.shared.hiddenCallbacks=null,P=0;P<Le.length;P++)L0(Le[P],pe)}catch(Je){vr(S,S.return,Je)}}g&&Z&64&&hj(F),_u(F,F.return);break;case 27:Ch(F);case 26:case 5:Ao(P,F,g),g&&S===null&&Z&4&&Yp(F),_u(F,F.return);break;case 12:Ao(P,F,g);break;case 13:Ao(P,F,g),g&&Z&4&&yj(P,F);break;case 22:F.memoizedState===null&&Ao(P,F,g),_u(F,F.return);break;case 30:break;default:Ao(P,F,g)}f=f.sibling}}function px(d,f){var g=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),d=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(d=f.memoizedState.cachePool.pool),d!==g&&(d!=null&&d.refCount++,g!=null&&Jd(g))}function mx(d,f){d=null,f.alternate!==null&&(d=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==d&&(f.refCount++,d!=null&&Jd(d))}function Ys(d,f,g,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)vj(d,f,g,S),f=f.sibling}function vj(d,f,g,S){var P=f.flags;switch(f.tag){case 0:case 11:case 15:Ys(d,f,g,S),P&2048&&Nh(9,f);break;case 1:Ys(d,f,g,S);break;case 3:Ys(d,f,g,S),P&2048&&(d=null,f.alternate!==null&&(d=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==d&&(f.refCount++,d!=null&&Jd(d)));break;case 12:if(P&2048){Ys(d,f,g,S),d=f.stateNode;try{var F=f.memoizedProps,Z=F.id,pe=F.onPostCommit;typeof pe=="function"&&pe(Z,f.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Le){vr(f,f.return,Le)}}else Ys(d,f,g,S);break;case 13:Ys(d,f,g,S);break;case 23:break;case 22:F=f.stateNode,Z=f.alternate,f.memoizedState!==null?F._visibility&2?Ys(d,f,g,S):kh(d,f):F._visibility&2?Ys(d,f,g,S):(F._visibility|=2,ku(d,f,g,S,(f.subtreeFlags&10256)!==0)),P&2048&&px(Z,f);break;case 24:Ys(d,f,g,S),P&2048&&mx(f.alternate,f);break;default:Ys(d,f,g,S)}}function ku(d,f,g,S,P){for(P=P&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var F=d,Z=f,pe=g,Le=S,Je=Z.flags;switch(Z.tag){case 0:case 11:case 15:ku(F,Z,pe,Le,P),Nh(8,Z);break;case 23:break;case 22:var dt=Z.stateNode;Z.memoizedState!==null?dt._visibility&2?ku(F,Z,pe,Le,P):kh(F,Z):(dt._visibility|=2,ku(F,Z,pe,Le,P)),P&&Je&2048&&px(Z.alternate,Z);break;case 24:ku(F,Z,pe,Le,P),P&&Je&2048&&mx(Z.alternate,Z);break;default:ku(F,Z,pe,Le,P)}f=f.sibling}}function kh(d,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=d,S=f,P=S.flags;switch(S.tag){case 22:kh(g,S),P&2048&&px(S.alternate,S);break;case 24:kh(g,S),P&2048&&mx(S.alternate,S);break;default:kh(g,S)}f=f.sibling}}var Ra=8192;function Tu(d){if(d.subtreeFlags&Ra)for(d=d.child;d!==null;)bj(d),d=d.sibling}function bj(d){switch(d.tag){case 26:Tu(d),d.flags&Ra&&d.memoizedState!==null&&B_(ns,d.memoizedState,d.memoizedProps);break;case 5:Tu(d);break;case 3:case 4:var f=ns;ns=dn(d.stateNode.containerInfo),Tu(d),ns=f;break;case 22:d.memoizedState===null&&(f=d.alternate,f!==null&&f.memoizedState!==null?(f=Ra,Ra=16777216,Tu(d),Ra=f):Tu(d));break;default:Tu(d)}}function jj(d){var f=d.alternate;if(f!==null&&(d=f.child,d!==null)){f.child=null;do f=d.sibling,d.sibling=null,d=f;while(d!==null)}}function Au(d){var f=d.deletions;if((d.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var S=f[g];ua=S,Nj(S,d)}jj(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)wj(d),d=d.sibling}function wj(d){switch(d.tag){case 0:case 11:case 15:Au(d),d.flags&2048&&hl(9,d,d.return);break;case 3:Au(d);break;case 12:Au(d);break;case 22:var f=d.stateNode;d.memoizedState!==null&&f._visibility&2&&(d.return===null||d.return.tag!==13)?(f._visibility&=-3,Jp(d)):Au(d);break;default:Au(d)}}function Jp(d){var f=d.deletions;if((d.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var S=f[g];ua=S,Nj(S,d)}jj(d)}for(d=d.child;d!==null;){switch(f=d,f.tag){case 0:case 11:case 15:hl(8,f,f.return),Jp(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,Jp(f));break;default:Jp(f)}d=d.sibling}}function Nj(d,f){for(;ua!==null;){var g=ua;switch(g.tag){case 0:case 11:case 15:hl(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Jd(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,ua=S;else e:for(g=d;ua!==null;){S=ua;var P=S.sibling,F=S.return;if(mj(S),S===g){ua=null;break e}if(P!==null){P.return=F,ua=P;break e}ua=F}}}var g_={getCacheForType:function(d){var f=Wr(yr),g=f.data.get(d);return g===void 0&&(g=d(),f.data.set(d,g)),g}},gx=typeof WeakMap=="function"?WeakMap:Map,ar=0,wr=null,kn=null,Bn=0,ir=0,Ai=null,pl=!1,Pu=!1,yx=!1,Po=0,Yr=0,ml=0,xc=0,xx=0,rs=0,Eu=0,Th=null,ui=null,vx=!1,bx=0,Du=1/0,Ah=null,gl=null,Ca=0,yl=null,Ou=null,Mu=0,jx=0,wx=null,Sj=null,Iu=0,Nx=null;function La(){if((ar&2)!==0&&Bn!==0)return Bn&-Bn;if(q.T!==null){var d=gu;return d!==0?d:im()}return Qn()}function _j(){rs===0&&(rs=(Bn&536870912)===0||Pn?ut():536870912);var d=ki.current;return d!==null&&(d.flags|=32),rs}function Pi(d,f,g){(d===wr&&(ir===2||ir===9)||d.cancelPendingCommit!==null)&&(Ru(d,0),xl(d,Bn,rs,!1)),Pe(d,g),((ar&2)===0||d!==wr)&&(d===wr&&((ar&2)===0&&(xc|=g),Yr===4&&xl(d,Bn,rs,!1)),Qs(d))}function Cj(d,f,g){if((ar&6)!==0)throw Error(a(327));var S=!g&&(f&124)===0&&(f&d.expiredLanes)===0||Qe(d,f),P=S?v_(d,f):Cx(d,f,!0),F=S;do{if(P===0){Pu&&!S&&xl(d,f,0,!1);break}else{if(g=d.current.alternate,F&&!y_(g)){P=Cx(d,f,!1),F=!1;continue}if(P===2){if(F=f,d.errorRecoveryDisabledLanes&F)var Z=0;else Z=d.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){f=Z;e:{var pe=d;P=Th;var Le=pe.current.memoizedState.isDehydrated;if(Le&&(Ru(pe,Z).flags|=256),Z=Cx(pe,Z,!1),Z!==2){if(yx&&!Le){pe.errorRecoveryDisabledLanes|=F,xc|=F,P=4;break e}F=ui,ui=P,F!==null&&(ui===null?ui=F:ui.push.apply(ui,F))}P=Z}if(F=!1,P!==2)continue}}if(P===1){Ru(d,0),xl(d,f,0,!0);break}e:{switch(S=d,F=P,F){case 0:case 1:throw Error(a(345));case 4:if((f&4194048)!==f)break;case 6:xl(S,f,rs,!pl);break e;case 2:ui=null;break;case 3:case 5:break;default:throw Error(a(329))}if((f&62914560)===f&&(P=bx+300-Ce(),10<P)){if(xl(S,f,rs,!pl),we(S,0,!0)!==0)break e;S.timeoutHandle=Qj(kj.bind(null,S,g,ui,Ah,vx,f,rs,xc,Eu,pl,F,2,-0,0),P);break e}kj(S,g,ui,Ah,vx,f,rs,xc,Eu,pl,F,0,-0,0)}}break}while(!0);Qs(d)}function kj(d,f,g,S,P,F,Z,pe,Le,Je,dt,pt,tt,Ze){if(d.timeoutHandle=-1,pt=f.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(xa={stylesheets:null,count:0,unsuspend:$_},bj(f),pt=z_(),pt!==null)){d.cancelPendingCommit=pt(Ph.bind(null,d,f,F,g,S,P,Z,pe,Le,dt,1,tt,Ze)),xl(d,F,Z,!Je);return}Ph(d,f,F,g,S,P,Z,pe,Le)}function y_(d){for(var f=d;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var P=g[S],F=P.getSnapshot;P=P.value;try{if(!Ni(F(),P))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function xl(d,f,g,S){f&=~xx,f&=~xc,d.suspendedLanes|=f,d.pingedLanes&=~f,S&&(d.warmLanes|=f),S=d.expirationTimes;for(var P=f;0<P;){var F=31-he(P),Z=1<<F;S[F]=-1,P&=~Z}g!==0&&kt(d,g,f)}function Zp(){return(ar&6)===0?(Oh(0),!1):!0}function Sx(){if(kn!==null){if(ir===0)var d=kn.return;else d=kn,fe=il=null,Sp(d),ca=null,oi=0,d=kn;for(;d!==null;)dj(d.alternate,d),d=d.return;kn=null}}function Ru(d,f){var g=d.timeoutHandle;g!==-1&&(d.timeoutHandle=-1,P_(g)),g=d.cancelPendingCommit,g!==null&&(d.cancelPendingCommit=null,g()),Sx(),wr=d,kn=g=Ga(d.current,null),Bn=f,ir=0,Ai=null,pl=!1,Pu=Qe(d,f),yx=!1,Eu=rs=xx=xc=ml=Yr=0,ui=Th=null,vx=!1,(f&8)!==0&&(f|=f&32);var S=d.entangledLanes;if(S!==0)for(d=d.entanglements,S&=f;0<S;){var P=31-he(S),F=1<<P;f|=d[P],S&=~F}return Po=f,Xl(),g}function Tj(d,f){bn=null,q.H=fh,f===Wa||f===jp?(f=I0(),ir=3):f===O0?(f=I0(),ir=4):ir=f===ij?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Ai=f,kn===null&&(Yr=1,xh(d,Ha(f,d.current)))}function Aj(){var d=q.H;return q.H=fh,d===null?fh:d}function Pj(){var d=q.A;return q.A=g_,d}function _x(){Yr=4,pl||(Bn&4194048)!==Bn&&ki.current!==null||(Pu=!0),(ml&134217727)===0&&(xc&134217727)===0||wr===null||xl(wr,Bn,rs,!1)}function Cx(d,f,g){var S=ar;ar|=2;var P=Aj(),F=Pj();(wr!==d||Bn!==f)&&(Ah=null,Ru(d,f)),f=!1;var Z=Yr;e:do try{if(ir!==0&&kn!==null){var pe=kn,Le=Ai;switch(ir){case 8:Sx(),Z=6;break e;case 3:case 2:case 9:case 6:ki.current===null&&(f=!0);var Je=ir;if(ir=0,Ai=null,Lu(d,pe,Le,Je),g&&Pu){Z=0;break e}break;default:Je=ir,ir=0,Ai=null,Lu(d,pe,Le,Je)}}x_(),Z=Yr;break}catch(dt){Tj(d,dt)}while(!0);return f&&d.shellSuspendCounter++,fe=il=null,ar=S,q.H=P,q.A=F,kn===null&&(wr=null,Bn=0,Xl()),Z}function x_(){for(;kn!==null;)kx(kn)}function v_(d,f){var g=ar;ar|=2;var S=Aj(),P=Pj();wr!==d||Bn!==f?(Ah=null,Du=Ce()+500,Ru(d,f)):Pu=Qe(d,f);e:do try{if(ir!==0&&kn!==null){f=kn;var F=Ai;t:switch(ir){case 1:ir=0,Ai=null,Lu(d,f,F,1);break;case 2:case 9:if(M0(F)){ir=0,Ai=null,Dj(f);break}f=function(){ir!==2&&ir!==9||wr!==d||(ir=7),Qs(d)},F.then(f,f);break e;case 3:ir=7;break e;case 4:ir=5;break e;case 7:M0(F)?(ir=0,Ai=null,Dj(f)):(ir=0,Ai=null,Lu(d,f,F,7));break;case 5:var Z=null;switch(kn.tag){case 26:Z=kn.memoizedState;case 5:case 27:var pe=kn;if(!Z||fa(Z)){ir=0,Ai=null;var Le=pe.sibling;if(Le!==null)kn=Le;else{var Je=pe.return;Je!==null?(kn=Je,em(Je)):kn=null}break t}}ir=0,Ai=null,Lu(d,f,F,5);break;case 6:ir=0,Ai=null,Lu(d,f,F,6);break;case 8:Sx(),Yr=6;break e;default:throw Error(a(462))}}Ej();break}catch(dt){Tj(d,dt)}while(!0);return fe=il=null,q.H=S,q.A=P,ar=g,kn!==null?0:(wr=null,Bn=0,Xl(),Yr)}function Ej(){for(;kn!==null&&!be();)kx(kn)}function kx(d){var f=Gp(d.alternate,d,Po);d.memoizedProps=d.pendingProps,f===null?em(d):kn=f}function Dj(d){var f=d,g=f.alternate;switch(f.tag){case 15:case 0:f=Vp(g,f,f.pendingProps,f.type,void 0,Bn);break;case 11:f=Vp(g,f,f.pendingProps,f.type.render,f.ref,Bn);break;case 5:Sp(f);default:dj(g,f),f=kn=Gd(f,Po),f=Gp(g,f,Po)}d.memoizedProps=d.pendingProps,f===null?em(d):kn=f}function Lu(d,f,g,S){fe=il=null,Sp(f),ca=null,oi=0;var P=f.return;try{if(aj(d,P,f,g,Bn)){Yr=1,xh(d,Ha(g,d.current)),kn=null;return}}catch(F){if(P!==null)throw kn=P,F;Yr=1,xh(d,Ha(g,d.current)),kn=null;return}f.flags&32768?(Pn||S===1?d=!0:Pu||(Bn&536870912)!==0?d=!1:(pl=d=!0,(S===2||S===9||S===3||S===6)&&(S=ki.current,S!==null&&S.tag===13&&(S.flags|=16384))),Oj(f,d)):em(f)}function em(d){var f=d;do{if((f.flags&32768)!==0){Oj(f,pl);return}d=f.return;var g=cj(f.alternate,f,Po);if(g!==null){kn=g;return}if(f=f.sibling,f!==null){kn=f;return}kn=f=d}while(f!==null);Yr===0&&(Yr=5)}function Oj(d,f){do{var g=uj(d.alternate,d);if(g!==null){g.flags&=32767,kn=g;return}if(g=d.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(d=d.sibling,d!==null)){kn=d;return}kn=d=g}while(d!==null);Yr=6,kn=null}function Ph(d,f,g,S,P,F,Z,pe,Le){d.cancelPendingCommit=null;do tm();while(Ca!==0);if((ar&6)!==0)throw Error(a(327));if(f!==null){if(f===d.current)throw Error(a(177));if(F=f.lanes|f.childLanes,F|=Ay,ot(d,g,F,Z,pe,Le),d===wr&&(kn=wr=null,Bn=0),Ou=f,yl=d,Mu=g,jx=F,wx=P,Sj=S,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,zj(se,function(){return Fj(),null})):(d.callbackNode=null,d.callbackPriority=0),S=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||S){S=q.T,q.T=null,P=V.p,V.p=2,Z=ar,ar|=4;try{p_(d,f,g)}finally{ar=Z,V.p=P,q.T=S}}Ca=1,Mj(),Ij(),Rj()}}function Mj(){if(Ca===1){Ca=0;var d=yl,f=Ou,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=q.T,q.T=null;var S=V.p;V.p=2;var P=ar;ar|=4;try{fx(f,d);var F=lm,Z=S0(d.containerInfo),pe=F.focusedElem,Le=F.selectionRange;if(Z!==pe&&pe&&pe.ownerDocument&&N0(pe.ownerDocument.documentElement,pe)){if(Le!==null&&ky(pe)){var Je=Le.start,dt=Le.end;if(dt===void 0&&(dt=Je),"selectionStart"in pe)pe.selectionStart=Je,pe.selectionEnd=Math.min(dt,pe.value.length);else{var pt=pe.ownerDocument||document,tt=pt&&pt.defaultView||window;if(tt.getSelection){var Ze=tt.getSelection(),Qt=pe.textContent.length,Yt=Math.min(Le.start,Qt),dr=Le.end===void 0?Yt:Math.min(Le.end,Qt);!Ze.extend&&Yt>dr&&(Z=dr,dr=Yt,Yt=Z);var We=Cy(pe,Yt),qe=Cy(pe,dr);if(We&&qe&&(Ze.rangeCount!==1||Ze.anchorNode!==We.node||Ze.anchorOffset!==We.offset||Ze.focusNode!==qe.node||Ze.focusOffset!==qe.offset)){var Ye=pt.createRange();Ye.setStart(We.node,We.offset),Ze.removeAllRanges(),Yt>dr?(Ze.addRange(Ye),Ze.extend(qe.node,qe.offset)):(Ye.setEnd(qe.node,qe.offset),Ze.addRange(Ye))}}}}for(pt=[],Ze=pe;Ze=Ze.parentNode;)Ze.nodeType===1&&pt.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<pt.length;pe++){var ht=pt[pe];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}mm=!!Ss,lm=Ss=null}finally{ar=P,V.p=S,q.T=g}}d.current=f,Ca=2}}function Ij(){if(Ca===2){Ca=0;var d=yl,f=Ou,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=q.T,q.T=null;var S=V.p;V.p=2;var P=ar;ar|=4;try{pj(d,f.alternate,f)}finally{ar=P,V.p=S,q.T=g}}Ca=3}}function Rj(){if(Ca===4||Ca===3){Ca=0,ke();var d=yl,f=Ou,g=Mu,S=Sj;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Ca=5:(Ca=0,Ou=yl=null,Lj(d,d.pendingLanes));var P=d.pendingLanes;if(P===0&&(gl=null),Tt(g),f=f.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(J,f,void 0,(f.current.flags&128)===128)}catch{}if(S!==null){f=q.T,P=V.p,V.p=2,q.T=null;try{for(var F=d.onRecoverableError,Z=0;Z<S.length;Z++){var pe=S[Z];F(pe.value,{componentStack:pe.stack})}}finally{q.T=f,V.p=P}}(Mu&3)!==0&&tm(),Qs(d),P=d.pendingLanes,(g&4194090)!==0&&(P&42)!==0?d===Nx?Iu++:(Iu=0,Nx=d):Iu=0,Oh(0)}}function Lj(d,f){(d.pooledCacheLanes&=f)===0&&(f=d.pooledCache,f!=null&&(d.pooledCache=null,Jd(f)))}function tm(d){return Mj(),Ij(),Rj(),Fj()}function Fj(){if(Ca!==5)return!1;var d=yl,f=jx;jx=0;var g=Tt(Mu),S=q.T,P=V.p;try{V.p=32>g?32:g,q.T=null,g=wx,wx=null;var F=yl,Z=Mu;if(Ca=0,Ou=yl=null,Mu=0,(ar&6)!==0)throw Error(a(331));var pe=ar;if(ar|=4,wj(F.current),vj(F,F.current,Z,g),ar=pe,Oh(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(J,F)}catch{}return!0}finally{V.p=P,q.T=S,Lj(d,f)}}function $j(d,f,g){f=Ha(g,f),f=Bp(d.stateNode,f,2),d=bo(d,f,2),d!==null&&(Pe(d,2),Qs(d))}function vr(d,f,g){if(d.tag===3)$j(d,d,g);else for(;f!==null;){if(f.tag===3){$j(f,d,g);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(gl===null||!gl.has(S))){d=Ha(g,d),g=sx(2),S=bo(f,g,2),S!==null&&(rj(g,S,f,d),Pe(S,2),Qs(S));break}}f=f.return}}function Tx(d,f,g){var S=d.pingCache;if(S===null){S=d.pingCache=new gx;var P=new Set;S.set(f,P)}else P=S.get(f),P===void 0&&(P=new Set,S.set(f,P));P.has(g)||(yx=!0,P.add(g),d=b_.bind(null,d,f,g),f.then(d,d))}function b_(d,f,g){var S=d.pingCache;S!==null&&S.delete(f),d.pingedLanes|=d.suspendedLanes&g,d.warmLanes&=~g,wr===d&&(Bn&g)===g&&(Yr===4||Yr===3&&(Bn&62914560)===Bn&&300>Ce()-bx?(ar&2)===0&&Ru(d,0):xx|=g,Eu===Bn&&(Eu=0)),Qs(d)}function Bj(d,f){f===0&&(f=Ct()),d=Jl(d,f),d!==null&&(Pe(d,f),Qs(d))}function nm(d){var f=d.memoizedState,g=0;f!==null&&(g=f.retryLane),Bj(d,g)}function j_(d,f){var g=0;switch(d.tag){case 13:var S=d.stateNode,P=d.memoizedState;P!==null&&(g=P.retryLane);break;case 19:S=d.stateNode;break;case 22:S=d.stateNode._retryCache;break;default:throw Error(a(314))}S!==null&&S.delete(f),Bj(d,g)}function zj(d,f){return Ae(d,f)}var Eh=null,vl=null,rm=!1,Dh=!1,am=!1,bl=0;function Qs(d){d!==vl&&d.next===null&&(vl===null?Eh=vl=d:vl=vl.next=d),Dh=!0,rm||(rm=!0,Ax())}function Oh(d,f){if(!am&&Dh){am=!0;do for(var g=!1,S=Eh;S!==null;){if(d!==0){var P=S.pendingLanes;if(P===0)var F=0;else{var Z=S.suspendedLanes,pe=S.pingedLanes;F=(1<<31-he(42|d)+1)-1,F&=P&~(Z&~pe),F=F&201326741?F&201326741|1:F?F|2:0}F!==0&&(g=!0,Uj(S,F))}else F=Bn,F=we(S,S===wr?F:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(F&3)===0||Qe(S,F)||(g=!0,Uj(S,F));S=S.next}while(g);am=!1}}function w_(){Mh()}function Mh(){Dh=rm=!1;var d=0;bl!==0&&(A_()&&(d=bl),bl=0);for(var f=Ce(),g=null,S=Eh;S!==null;){var P=S.next,F=Ih(S,f);F===0?(S.next=null,g===null?Eh=P:g.next=P,P===null&&(vl=g)):(g=S,(d!==0||(F&3)!==0)&&(Dh=!0)),S=P}Oh(d)}function Ih(d,f){for(var g=d.suspendedLanes,S=d.pingedLanes,P=d.expirationTimes,F=d.pendingLanes&-62914561;0<F;){var Z=31-he(F),pe=1<<Z,Le=P[Z];Le===-1?((pe&g)===0||(pe&S)!==0)&&(P[Z]=Xe(pe,f)):Le<=f&&(d.expiredLanes|=pe),F&=~pe}if(f=wr,g=Bn,g=we(d,d===f?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),S=d.callbackNode,g===0||d===f&&(ir===2||ir===9)||d.cancelPendingCommit!==null)return S!==null&&S!==null&&ce(S),d.callbackNode=null,d.callbackPriority=0;if((g&3)===0||Qe(d,g)){if(f=g&-g,f===d.callbackPriority)return f;switch(S!==null&&ce(S),Tt(g)){case 2:case 8:g=de;break;case 32:g=se;break;case 268435456:g=oe;break;default:g=se}return S=qj.bind(null,d),g=Ae(g,S),d.callbackPriority=f,d.callbackNode=g,f}return S!==null&&S!==null&&ce(S),d.callbackPriority=2,d.callbackNode=null,2}function qj(d,f){if(Ca!==0&&Ca!==5)return d.callbackNode=null,d.callbackPriority=0,null;var g=d.callbackNode;if(tm()&&d.callbackNode!==g)return null;var S=Bn;return S=we(d,d===wr?S:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),S===0?null:(Cj(d,S,f),Ih(d,Ce()),d.callbackNode!=null&&d.callbackNode===g?qj.bind(null,d):null)}function Uj(d,f){if(tm())return null;Cj(d,f,!0)}function Ax(){E_(function(){(ar&6)!==0?Ae(ye,w_):Mh()})}function im(){return bl===0&&(bl=ut()),bl}function Vj(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Ld(""+d)}function Hj(d,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,d.id&&g.setAttribute("form",d.id),f.parentNode.insertBefore(g,f),d=new FormData(d),g.parentNode.removeChild(g),d}function N_(d,f,g,S,P){if(f==="submit"&&g&&g.stateNode===P){var F=Vj((P[Xn]||null).action),Z=S.submitter;Z&&(f=(f=Z[Xn]||null)?Vj(f.formAction):Z.getAttribute("formAction"),f!==null&&(F=f,Z=null));var pe=new tp("action","action",null,S,P);d.push({event:pe,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(bl!==0){var Le=Z?Hj(P,Z):new FormData(P);dh(g,{pending:!0,data:Le,method:P.method,action:F},null,Le)}}else typeof F=="function"&&(pe.preventDefault(),Le=Z?Hj(P,Z):new FormData(P),dh(g,{pending:!0,data:Le,method:P.method,action:F},F,Le))},currentTarget:P}]})}}for(var Px=0;Px<Jn.length;Px++){var Ex=Jn[Px],S_=Ex.toLowerCase(),__=Ex[0].toUpperCase()+Ex.slice(1);ys(S_,"on"+__)}ys(fp,"onAnimationEnd"),ys(_0,"onAnimationIteration"),ys(Si,"onAnimationStart"),ys("dblclick","onDoubleClick"),ys("focusin","onFocus"),ys("focusout","onBlur"),ys(pp,"onTransitionRun"),ys(o_,"onTransitionStart"),ys(du,"onTransitionCancel"),ys(qd,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_a("onBeforeInput",["compositionend","keypress","textInput","paste"]),_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rh));function Gj(d,f){f=(f&4)!==0;for(var g=0;g<d.length;g++){var S=d[g],P=S.event;S=S.listeners;e:{var F=void 0;if(f)for(var Z=S.length-1;0<=Z;Z--){var pe=S[Z],Le=pe.instance,Je=pe.currentTarget;if(pe=pe.listener,Le!==F&&P.isPropagationStopped())break e;F=pe,P.currentTarget=Je;try{F(P)}catch(dt){mc(dt)}P.currentTarget=null,F=Le}else for(Z=0;Z<S.length;Z++){if(pe=S[Z],Le=pe.instance,Je=pe.currentTarget,pe=pe.listener,Le!==F&&P.isPropagationStopped())break e;F=pe,P.currentTarget=Je;try{F(P)}catch(dt){mc(dt)}P.currentTarget=null,F=Le}}}}function Tn(d,f){var g=f[Va];g===void 0&&(g=f[Va]=new Set);var S=d+"__bubble";g.has(S)||(Wj(f,d,2,!1),g.add(S))}function Dx(d,f,g){var S=0;f&&(S|=4),Wj(g,d,S,f)}var di="_reactListening"+Math.random().toString(36).slice(2);function Ox(d){if(!d[di]){d[di]=!0,Cn.forEach(function(g){g!=="selectionchange"&&(C_.has(g)||Dx(g,!1,d),Dx(g,!0,d))});var f=d.nodeType===9?d:d.ownerDocument;f===null||f[di]||(f[di]=!0,Dx("selectionchange",!1,f))}}function Wj(d,f,g,S){switch(h1(f)){case 2:var P=V_;break;case 8:P=Vu;break;default:P=Ux}g=P.bind(null,f,g,d),P=void 0,!$d||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(P=!0),S?P!==void 0?d.addEventListener(f,g,{capture:!0,passive:P}):d.addEventListener(f,g,!0):P!==void 0?d.addEventListener(f,g,{passive:P}):d.addEventListener(f,g,!1)}function Eo(d,f,g,S,P){var F=S;if((f&1)===0&&(f&2)===0&&S!==null)e:for(;;){if(S===null)return;var Z=S.tag;if(Z===3||Z===4){var pe=S.stateNode.containerInfo;if(pe===P)break;if(Z===4)for(Z=S.return;Z!==null;){var Le=Z.tag;if((Le===3||Le===4)&&Z.stateNode.containerInfo===P)return;Z=Z.return}for(;pe!==null;){if(Z=Fn(pe),Z===null)return;if(Le=Z.tag,Le===5||Le===6||Le===26||Le===27){S=F=Z;continue e}pe=pe.parentNode}}S=S.return}a0(function(){var Je=F,dt=py(g),pt=[];e:{var tt=Ud.get(d);if(tt!==void 0){var Ze=tp,Qt=d;switch(d){case"keypress":if(cr(g)===0)break e;case"keydown":case"keyup":Ze=by;break;case"focusin":Qt="focus",Ze=rp;break;case"focusout":Qt="blur",Ze=rp;break;case"beforeblur":case"afterblur":Ze=rp;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=vy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=JS;break;case fp:case _0:case Si:Ze=c0;break;case qd:Ze=ZS;break;case"scroll":case"scrollend":Ze=YS;break;case"wheel":Ze=t_;break;case"copy":case"cut":case"paste":Ze=d0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=go;break;case"toggle":case"beforetoggle":Ze=ip}var Yt=(f&4)!==0,dr=!Yt&&(d==="scroll"||d==="scrollend"),We=Yt?tt!==null?tt+"Capture":null:tt;Yt=[];for(var qe=Je,Ye;qe!==null;){var ht=qe;if(Ye=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Ye===null||We===null||(ht=Fd(qe,We),ht!=null&&Yt.push(ln(qe,ht,Ye))),dr)break;qe=qe.return}0<Yt.length&&(tt=new Ze(tt,Qt,null,g,dt),pt.push({event:tt,listeners:Yt}))}}if((f&7)===0){e:{if(tt=d==="mouseover"||d==="pointerover",Ze=d==="mouseout"||d==="pointerout",tt&&g!==Zf&&(Qt=g.relatedTarget||g.fromElement)&&(Fn(Qt)||Qt[jr]))break e;if((Ze||tt)&&(tt=dt.window===dt?dt:(tt=dt.ownerDocument)?tt.defaultView||tt.parentWindow:window,Ze?(Qt=g.relatedTarget||g.toElement,Ze=Je,Qt=Qt?Fn(Qt):null,Qt!==null&&(dr=s(Qt),Yt=Qt.tag,Qt!==dr||Yt!==5&&Yt!==27&&Yt!==6)&&(Qt=null)):(Ze=null,Qt=Je),Ze!==Qt)){if(Yt=Jo,ht="onMouseLeave",We="onMouseEnter",qe="mouse",(d==="pointerout"||d==="pointerover")&&(Yt=go,ht="onPointerLeave",We="onPointerEnter",qe="pointer"),dr=Ze==null?tt:yt(Ze),Ye=Qt==null?tt:yt(Qt),tt=new Yt(ht,qe+"leave",Ze,g,dt),tt.target=dr,tt.relatedTarget=Ye,ht=null,Fn(dt)===Je&&(Yt=new Yt(We,qe+"enter",Qt,g,dt),Yt.target=Ye,Yt.relatedTarget=dr,ht=Yt),dr=ht,Ze&&Qt)t:{for(Yt=Ze,We=Qt,qe=0,Ye=Yt;Ye;Ye=da(Ye))qe++;for(Ye=0,ht=We;ht;ht=da(ht))Ye++;for(;0<qe-Ye;)Yt=da(Yt),qe--;for(;0<Ye-qe;)We=da(We),Ye--;for(;qe--;){if(Yt===We||We!==null&&Yt===We.alternate)break t;Yt=da(Yt),We=da(We)}Yt=null}else Yt=null;Ze!==null&&Qr(pt,tt,Ze,Yt,!1),Qt!==null&&dr!==null&&Qr(pt,dr,Qt,Yt,!0)}}e:{if(tt=Je?yt(Je):window,Ze=tt.nodeName&&tt.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&tt.type==="file")var Lt=x0;else if(cp(tt))if(v0)Lt=a_;else{Lt=tl;var Nn=w0}else Ze=tt.nodeName,!Ze||Ze.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Je&&fy(Je.elementType)&&(Lt=x0):Lt=hp;if(Lt&&(Lt=Lt(d,Je))){ou(pt,Lt,g,dt);break e}Nn&&Nn(d,tt,Je),d==="focusout"&&Je&&tt.type==="number"&&Je.memoizedProps.value!=null&&Rd(tt,"number",tt.value)}switch(Nn=Je?yt(Je):window,d){case"focusin":(cp(Nn)||Nn.contentEditable==="true")&&(uu=Nn,nl=Je,He=null);break;case"focusout":He=nl=uu=null;break;case"mousedown":st=!0;break;case"contextmenu":case"mouseup":case"dragend":st=!1,rt(pt,g,dt);break;case"selectionchange":if(s_)break;case"keydown":case"keyup":rt(pt,g,dt)}var zt;if(Ny)e:{switch(d){case"compositionstart":var Xt="onCompositionStart";break e;case"compositionend":Xt="onCompositionEnd";break e;case"compositionupdate":Xt="onCompositionUpdate";break e}Xt=void 0}else Zo?g0(d,g)&&(Xt="onCompositionEnd"):d==="keydown"&&g.keyCode===229&&(Xt="onCompositionStart");Xt&&(sp&&g.locale!=="ko"&&(Zo||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&Zo&&(zt=i0()):(Xo=dt,yy="value"in Xo?Xo.value:Xo.textContent,Zo=!0)),Nn=sm(Je,Xt),0<Nn.length&&(Xt=new ei(Xt,d,null,g,dt),pt.push({event:Xt,listeners:Nn}),zt?Xt.data=zt:(zt=lp(g),zt!==null&&(Xt.data=zt)))),(zt=m0?n_(d,g):y0(d,g))&&(Xt=sm(Je,"onBeforeInput"),0<Xt.length&&(Nn=new ei("onBeforeInput","beforeinput",null,g,dt),pt.push({event:Nn,listeners:Xt}),Nn.data=zt)),N_(pt,d,Je,g,dt)}Gj(pt,f)})}function ln(d,f,g){return{instance:d,listener:f,currentTarget:g}}function sm(d,f){for(var g=f+"Capture",S=[];d!==null;){var P=d,F=P.stateNode;if(P=P.tag,P!==5&&P!==26&&P!==27||F===null||(P=Fd(d,g),P!=null&&S.unshift(ln(d,P,F)),P=Fd(d,f),P!=null&&S.push(ln(d,P,F))),d.tag===3)return S;d=d.return}return[]}function da(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function Qr(d,f,g,S,P){for(var F=f._reactName,Z=[];g!==null&&g!==S;){var pe=g,Le=pe.alternate,Je=pe.stateNode;if(pe=pe.tag,Le!==null&&Le===S)break;pe!==5&&pe!==26&&pe!==27||Je===null||(Le=Je,P?(Je=Fd(g,F),Je!=null&&Z.unshift(ln(g,Je,Le))):P||(Je=Fd(g,F),Je!=null&&Z.push(ln(g,Je,Le)))),g=g.return}Z.length!==0&&d.push({event:f,listeners:Z})}var k_=/\r\n?/g,jl=/\u0000|\uFFFD/g;function Kj(d){return(typeof d=="string"?d:""+d).replace(k_,`
`).replace(jl,"")}function Yj(d,f){return f=Kj(f),Kj(d)===f}function om(){}function ur(d,f,g,S,P,F){switch(g){case"children":typeof S=="string"?f==="body"||f==="textarea"&&S===""||Qo(d,S):(typeof S=="number"||typeof S=="bigint")&&f!=="body"&&Qo(d,""+S);break;case"className":Kf(d,"class",S);break;case"tabIndex":Kf(d,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Kf(d,g,S);break;case"style":hy(d,S,F);break;case"data":if(f!=="object"){Kf(d,"data",S);break}case"src":case"href":if(S===""&&(f!=="a"||g!=="href")){d.removeAttribute(g);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){d.removeAttribute(g);break}S=Ld(""+S),d.setAttribute(g,S);break;case"action":case"formAction":if(typeof S=="function"){d.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof F=="function"&&(g==="formAction"?(f!=="input"&&ur(d,f,"name",P.name,P,null),ur(d,f,"formEncType",P.formEncType,P,null),ur(d,f,"formMethod",P.formMethod,P,null),ur(d,f,"formTarget",P.formTarget,P,null)):(ur(d,f,"encType",P.encType,P,null),ur(d,f,"method",P.method,P,null),ur(d,f,"target",P.target,P,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){d.removeAttribute(g);break}S=Ld(""+S),d.setAttribute(g,S);break;case"onClick":S!=null&&(d.onclick=om);break;case"onScroll":S!=null&&Tn("scroll",d);break;case"onScrollEnd":S!=null&&Tn("scrollend",d);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(g=S.__html,g!=null){if(P.children!=null)throw Error(a(60));d.innerHTML=g}}break;case"multiple":d.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":d.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){d.removeAttribute("xlink:href");break}g=Ld(""+S),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?d.setAttribute(g,""+S):d.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?d.setAttribute(g,""):d.removeAttribute(g);break;case"capture":case"download":S===!0?d.setAttribute(g,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?d.setAttribute(g,S):d.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?d.setAttribute(g,S):d.removeAttribute(g);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?d.removeAttribute(g):d.setAttribute(g,S);break;case"popover":Tn("beforetoggle",d),Tn("toggle",d),Wf(d,"popover",S);break;case"xlinkActuate":Bs(d,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Bs(d,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Bs(d,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Bs(d,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Bs(d,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Bs(d,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Bs(d,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Bs(d,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Bs(d,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Wf(d,"is",S);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=n0.get(g)||g,Wf(d,g,S))}}function Mx(d,f,g,S,P,F){switch(g){case"style":hy(d,S,F);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(g=S.__html,g!=null){if(P.children!=null)throw Error(a(60));d.innerHTML=g}}break;case"children":typeof S=="string"?Qo(d,S):(typeof S=="number"||typeof S=="bigint")&&Qo(d,""+S);break;case"onScroll":S!=null&&Tn("scroll",d);break;case"onScrollEnd":S!=null&&Tn("scrollend",d);break;case"onClick":S!=null&&(d.onclick=om);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$n.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(P=g.endsWith("Capture"),f=g.slice(2,P?g.length-7:void 0),F=d[Xn]||null,F=F!=null?F[g]:null,typeof F=="function"&&d.removeEventListener(f,F,P),typeof S=="function")){typeof F!="function"&&F!==null&&(g in d?d[g]=null:d.hasAttribute(g)&&d.removeAttribute(g)),d.addEventListener(f,S,P);break e}g in d?d[g]=S:S===!0?d.setAttribute(g,""):Wf(d,g,S)}}}function ha(d,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tn("error",d),Tn("load",d);var S=!1,P=!1,F;for(F in g)if(g.hasOwnProperty(F)){var Z=g[F];if(Z!=null)switch(F){case"src":S=!0;break;case"srcSet":P=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,f));default:ur(d,f,F,Z,g,null)}}P&&ur(d,f,"srcSet",g.srcSet,g,null),S&&ur(d,f,"src",g.src,g,null);return;case"input":Tn("invalid",d);var pe=F=Z=P=null,Le=null,Je=null;for(S in g)if(g.hasOwnProperty(S)){var dt=g[S];if(dt!=null)switch(S){case"name":P=dt;break;case"type":Z=dt;break;case"checked":Le=dt;break;case"defaultChecked":Je=dt;break;case"value":F=dt;break;case"defaultValue":pe=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(a(137,f));break;default:ur(d,f,S,dt,g,null)}}cy(d,F,pe,Le,Je,Z,P,!1),Qf(d);return;case"select":Tn("invalid",d),S=Z=F=null;for(P in g)if(g.hasOwnProperty(P)&&(pe=g[P],pe!=null))switch(P){case"value":F=pe;break;case"defaultValue":Z=pe;break;case"multiple":S=pe;default:ur(d,f,P,pe,g,null)}f=F,g=Z,d.multiple=!!S,f!=null?eu(d,!!S,f,!1):g!=null&&eu(d,!!S,g,!0);return;case"textarea":Tn("invalid",d),F=P=S=null;for(Z in g)if(g.hasOwnProperty(Z)&&(pe=g[Z],pe!=null))switch(Z){case"value":S=pe;break;case"defaultValue":P=pe;break;case"children":F=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(91));break;default:ur(d,f,Z,pe,g,null)}Jf(d,S,P,F),Qf(d);return;case"option":for(Le in g)if(g.hasOwnProperty(Le)&&(S=g[Le],S!=null))switch(Le){case"selected":d.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:ur(d,f,Le,S,g,null)}return;case"dialog":Tn("beforetoggle",d),Tn("toggle",d),Tn("cancel",d),Tn("close",d);break;case"iframe":case"object":Tn("load",d);break;case"video":case"audio":for(S=0;S<Rh.length;S++)Tn(Rh[S],d);break;case"image":Tn("error",d),Tn("load",d);break;case"details":Tn("toggle",d);break;case"embed":case"source":case"link":Tn("error",d),Tn("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in g)if(g.hasOwnProperty(Je)&&(S=g[Je],S!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,f));default:ur(d,f,Je,S,g,null)}return;default:if(fy(f)){for(dt in g)g.hasOwnProperty(dt)&&(S=g[dt],S!==void 0&&Mx(d,f,dt,S,g,void 0));return}}for(pe in g)g.hasOwnProperty(pe)&&(S=g[pe],S!=null&&ur(d,f,pe,S,g,null))}function T_(d,f,g,S){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var P=null,F=null,Z=null,pe=null,Le=null,Je=null,dt=null;for(Ze in g){var pt=g[Ze];if(g.hasOwnProperty(Ze)&&pt!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":Le=pt;default:S.hasOwnProperty(Ze)||ur(d,f,Ze,null,S,pt)}}for(var tt in S){var Ze=S[tt];if(pt=g[tt],S.hasOwnProperty(tt)&&(Ze!=null||pt!=null))switch(tt){case"type":F=Ze;break;case"name":P=Ze;break;case"checked":Je=Ze;break;case"defaultChecked":dt=Ze;break;case"value":Z=Ze;break;case"defaultValue":pe=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(a(137,f));break;default:Ze!==pt&&ur(d,f,tt,Ze,S,pt)}}Xf(d,Z,pe,Le,Je,dt,F,P);return;case"select":Ze=Z=pe=tt=null;for(F in g)if(Le=g[F],g.hasOwnProperty(F)&&Le!=null)switch(F){case"value":break;case"multiple":Ze=Le;default:S.hasOwnProperty(F)||ur(d,f,F,null,S,Le)}for(P in S)if(F=S[P],Le=g[P],S.hasOwnProperty(P)&&(F!=null||Le!=null))switch(P){case"value":tt=F;break;case"defaultValue":pe=F;break;case"multiple":Z=F;default:F!==Le&&ur(d,f,P,F,S,Le)}f=pe,g=Z,S=Ze,tt!=null?eu(d,!!g,tt,!1):!!S!=!!g&&(f!=null?eu(d,!!g,f,!0):eu(d,!!g,g?[]:"",!1));return;case"textarea":Ze=tt=null;for(pe in g)if(P=g[pe],g.hasOwnProperty(pe)&&P!=null&&!S.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:ur(d,f,pe,null,S,P)}for(Z in S)if(P=S[Z],F=g[Z],S.hasOwnProperty(Z)&&(P!=null||F!=null))switch(Z){case"value":tt=P;break;case"defaultValue":Ze=P;break;case"children":break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(91));break;default:P!==F&&ur(d,f,Z,P,S,F)}uy(d,tt,Ze);return;case"option":for(var Qt in g)if(tt=g[Qt],g.hasOwnProperty(Qt)&&tt!=null&&!S.hasOwnProperty(Qt))switch(Qt){case"selected":d.selected=!1;break;default:ur(d,f,Qt,null,S,tt)}for(Le in S)if(tt=S[Le],Ze=g[Le],S.hasOwnProperty(Le)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Le){case"selected":d.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:ur(d,f,Le,tt,S,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in g)tt=g[Yt],g.hasOwnProperty(Yt)&&tt!=null&&!S.hasOwnProperty(Yt)&&ur(d,f,Yt,null,S,tt);for(Je in S)if(tt=S[Je],Ze=g[Je],S.hasOwnProperty(Je)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(a(137,f));break;default:ur(d,f,Je,tt,S,Ze)}return;default:if(fy(f)){for(var dr in g)tt=g[dr],g.hasOwnProperty(dr)&&tt!==void 0&&!S.hasOwnProperty(dr)&&Mx(d,f,dr,void 0,S,tt);for(dt in S)tt=S[dt],Ze=g[dt],!S.hasOwnProperty(dt)||tt===Ze||tt===void 0&&Ze===void 0||Mx(d,f,dt,tt,S,Ze);return}}for(var We in g)tt=g[We],g.hasOwnProperty(We)&&tt!=null&&!S.hasOwnProperty(We)&&ur(d,f,We,null,S,tt);for(pt in S)tt=S[pt],Ze=g[pt],!S.hasOwnProperty(pt)||tt===Ze||tt==null&&Ze==null||ur(d,f,pt,tt,S,Ze)}var Ss=null,lm=null;function vc(d){return d.nodeType===9?d:d.ownerDocument}function Rr(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vr(d,f){if(d===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&f==="foreignObject"?0:d}function cm(d,f){return d==="textarea"||d==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Ix=null;function A_(){var d=window.event;return d&&d.type==="popstate"?d===Ix?!1:(Ix=d,!0):(Ix=null,!1)}var Qj=typeof setTimeout=="function"?setTimeout:void 0,P_=typeof clearTimeout=="function"?clearTimeout:void 0,Xj=typeof Promise=="function"?Promise:void 0,E_=typeof queueMicrotask=="function"?queueMicrotask:typeof Xj<"u"?function(d){return Xj.resolve(null).then(d).catch(Jj)}:Qj;function Jj(d){setTimeout(function(){throw d})}function as(d){return d==="head"}function um(d,f){var g=f,S=0,P=0;do{var F=g.nextSibling;if(d.removeChild(g),F&&F.nodeType===8)if(g=F.data,g==="/$"){if(0<S&&8>S){g=S;var Z=d.ownerDocument;if(g&1&&Lh(Z.documentElement),g&2&&Lh(Z.body),g&4)for(g=Z.head,Lh(g),Z=g.firstChild;Z;){var pe=Z.nextSibling,Le=Z.nodeName;Z[Gr]||Le==="SCRIPT"||Le==="STYLE"||Le==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||g.removeChild(Z),Z=pe}}if(P===0){d.removeChild(F),Hh(f);return}P--}else g==="$"||g==="$?"||g==="$!"?P++:S=g.charCodeAt(0)-48;else S=0;g=F}while(g);Hh(f)}function Rx(d){var f=d.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Rx(g),An(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}d.removeChild(g)}}function Zj(d,f,g,S){for(;d.nodeType===1;){var P=g;if(d.nodeName.toLowerCase()!==f.toLowerCase()){if(!S&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(S){if(!d[Gr])switch(f){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(F=d.getAttribute("rel"),F==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(F!==P.rel||d.getAttribute("href")!==(P.href==null||P.href===""?null:P.href)||d.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin)||d.getAttribute("title")!==(P.title==null?null:P.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(F=d.getAttribute("src"),(F!==(P.src==null?null:P.src)||d.getAttribute("type")!==(P.type==null?null:P.type)||d.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin))&&F&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(f==="input"&&d.type==="hidden"){var F=P.name==null?null:""+P.name;if(P.type==="hidden"&&d.getAttribute("name")===F)return d}else return d;if(d=_s(d.nextSibling),d===null)break}return null}function dm(d,f,g){if(f==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!g||(d=_s(d.nextSibling),d===null))return null;return d}function Qa(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function Fu(d,f){var g=d.ownerDocument;if(d.data!=="$?"||g.readyState==="complete")f();else{var S=function(){f(),g.removeEventListener("DOMContentLoaded",S)};g.addEventListener("DOMContentLoaded",S),d._reactRetry=S}}function _s(d){for(;d!=null;d=d.nextSibling){var f=d.nodeType;if(f===1||f===3)break;if(f===8){if(f=d.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return d}var Lx=null;function e1(d){d=d.previousSibling;for(var f=0;d;){if(d.nodeType===8){var g=d.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return d;f--}else g==="/$"&&f++}d=d.previousSibling}return null}function t1(d,f,g){switch(f=vc(g),d){case"html":if(d=f.documentElement,!d)throw Error(a(452));return d;case"head":if(d=f.head,!d)throw Error(a(453));return d;case"body":if(d=f.body,!d)throw Error(a(454));return d;default:throw Error(a(451))}}function Lh(d){for(var f=d.attributes;f.length;)d.removeAttributeNode(f[0]);An(d)}var Ei=new Map,Xs=new Set;function dn(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var Js=V.d;V.d={f:is,r:n1,D:D_,C:r1,L:hm,m:O_,X:I_,S:M_,M:R_};function is(){var d=Js.f(),f=Zp();return d||f}function n1(d){var f=et(d);f!==null&&f.tag===5&&f.type==="form"?Rp(f):Js.r(d)}var $u=typeof document>"u"?null:document;function Zn(d,f,g){var S=$u;if(S&&typeof f=="string"&&f){var P=Hi(f);P='link[rel="'+d+'"][href="'+P+'"]',typeof g=="string"&&(P+='[crossorigin="'+g+'"]'),Xs.has(P)||(Xs.add(P),d={rel:d,crossOrigin:g,href:f},S.querySelector(P)===null&&(f=S.createElement("link"),ha(f,"link",d),Rt(f),S.head.appendChild(f)))}}function D_(d){Js.D(d),Zn("dns-prefetch",d,null)}function r1(d,f){Js.C(d,f),Zn("preconnect",d,f)}function hm(d,f,g){Js.L(d,f,g);var S=$u;if(S&&d&&f){var P='link[rel="preload"][as="'+Hi(f)+'"]';f==="image"&&g&&g.imageSrcSet?(P+='[imagesrcset="'+Hi(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(P+='[imagesizes="'+Hi(g.imageSizes)+'"]')):P+='[href="'+Hi(d)+'"]';var F=P;switch(f){case"style":F=Bu(d);break;case"script":F=zu(d)}Ei.has(F)||(d=h({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:d,as:f},g),Ei.set(F,d),S.querySelector(P)!==null||f==="style"&&S.querySelector(Fh(F))||f==="script"&&S.querySelector($h(F))||(f=S.createElement("link"),ha(f,"link",d),Rt(f),S.head.appendChild(f)))}}function O_(d,f){Js.m(d,f);var g=$u;if(g&&d){var S=f&&typeof f.as=="string"?f.as:"script",P='link[rel="modulepreload"][as="'+Hi(S)+'"][href="'+Hi(d)+'"]',F=P;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":F=zu(d)}if(!Ei.has(F)&&(d=h({rel:"modulepreload",href:d},f),Ei.set(F,d),g.querySelector(P)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector($h(F)))return}S=g.createElement("link"),ha(S,"link",d),Rt(S),g.head.appendChild(S)}}}function M_(d,f,g){Js.S(d,f,g);var S=$u;if(S&&d){var P=St(S).hoistableStyles,F=Bu(d);f=f||"default";var Z=P.get(F);if(!Z){var pe={loading:0,preload:null};if(Z=S.querySelector(Fh(F)))pe.loading=5;else{d=h({rel:"stylesheet",href:d,"data-precedence":f},g),(g=Ei.get(F))&&Bh(d,g);var Le=Z=S.createElement("link");Rt(Le),ha(Le,"link",d),Le._p=new Promise(function(Je,dt){Le.onload=Je,Le.onerror=dt}),Le.addEventListener("load",function(){pe.loading|=1}),Le.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,fm(Z,f,S)}Z={type:"stylesheet",instance:Z,count:1,state:pe},P.set(F,Z)}}}function I_(d,f){Js.X(d,f);var g=$u;if(g&&d){var S=St(g).hoistableScripts,P=zu(d),F=S.get(P);F||(F=g.querySelector($h(P)),F||(d=h({src:d,async:!0},f),(f=Ei.get(P))&&Fx(d,f),F=g.createElement("script"),Rt(F),ha(F,"link",d),g.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},S.set(P,F))}}function R_(d,f){Js.M(d,f);var g=$u;if(g&&d){var S=St(g).hoistableScripts,P=zu(d),F=S.get(P);F||(F=g.querySelector($h(P)),F||(d=h({src:d,async:!0,type:"module"},f),(f=Ei.get(P))&&Fx(d,f),F=g.createElement("script"),Rt(F),ha(F,"link",d),g.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},S.set(P,F))}}function a1(d,f,g,S){var P=(P=Ee.current)?dn(P):null;if(!P)throw Error(a(446));switch(d){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=Bu(g.href),g=St(P).hoistableStyles,S=g.get(f),S||(S={type:"style",instance:null,count:0,state:null},g.set(f,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){d=Bu(g.href);var F=St(P).hoistableStyles,Z=F.get(d);if(Z||(P=P.ownerDocument||P,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},F.set(d,Z),(F=P.querySelector(Fh(d)))&&!F._p&&(Z.instance=F,Z.state.loading=5),Ei.has(d)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ei.set(d,g),F||L_(P,d,g,Z.state))),f&&S===null)throw Error(a(528,""));return Z}if(f&&S!==null)throw Error(a(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=zu(g),g=St(P).hoistableScripts,S=g.get(f),S||(S={type:"script",instance:null,count:0,state:null},g.set(f,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,d))}}function Bu(d){return'href="'+Hi(d)+'"'}function Fh(d){return'link[rel="stylesheet"]['+d+"]"}function i1(d){return h({},d,{"data-precedence":d.precedence,precedence:null})}function L_(d,f,g,S){d.querySelector('link[rel="preload"][as="style"]['+f+"]")?S.loading=1:(f=d.createElement("link"),S.preload=f,f.addEventListener("load",function(){return S.loading|=1}),f.addEventListener("error",function(){return S.loading|=2}),ha(f,"link",g),Rt(f),d.head.appendChild(f))}function zu(d){return'[src="'+Hi(d)+'"]'}function $h(d){return"script[async]"+d}function s1(d,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var S=d.querySelector('style[data-href~="'+Hi(g.href)+'"]');if(S)return f.instance=S,Rt(S),S;var P=h({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return S=(d.ownerDocument||d).createElement("style"),Rt(S),ha(S,"style",P),fm(S,g.precedence,d),f.instance=S;case"stylesheet":P=Bu(g.href);var F=d.querySelector(Fh(P));if(F)return f.state.loading|=4,f.instance=F,Rt(F),F;S=i1(g),(P=Ei.get(P))&&Bh(S,P),F=(d.ownerDocument||d).createElement("link"),Rt(F);var Z=F;return Z._p=new Promise(function(pe,Le){Z.onload=pe,Z.onerror=Le}),ha(F,"link",S),f.state.loading|=4,fm(F,g.precedence,d),f.instance=F;case"script":return F=zu(g.src),(P=d.querySelector($h(F)))?(f.instance=P,Rt(P),P):(S=g,(P=Ei.get(F))&&(S=h({},g),Fx(S,P)),d=d.ownerDocument||d,P=d.createElement("script"),Rt(P),ha(P,"link",S),d.head.appendChild(P),f.instance=P);case"void":return null;default:throw Error(a(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(S=f.instance,f.state.loading|=4,fm(S,g.precedence,d));return f.instance}function fm(d,f,g){for(var S=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),P=S.length?S[S.length-1]:null,F=P,Z=0;Z<S.length;Z++){var pe=S[Z];if(pe.dataset.precedence===f)F=pe;else if(F!==P)break}F?F.parentNode.insertBefore(d,F.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(d,f.firstChild))}function Bh(d,f){d.crossOrigin==null&&(d.crossOrigin=f.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=f.referrerPolicy),d.title==null&&(d.title=f.title)}function Fx(d,f){d.crossOrigin==null&&(d.crossOrigin=f.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=f.referrerPolicy),d.integrity==null&&(d.integrity=f.integrity)}var qu=null;function o1(d,f,g){if(qu===null){var S=new Map,P=qu=new Map;P.set(g,S)}else P=qu,S=P.get(g),S||(S=new Map,P.set(g,S));if(S.has(d))return S;for(S.set(d,null),g=g.getElementsByTagName(d),P=0;P<g.length;P++){var F=g[P];if(!(F[Gr]||F[Gt]||d==="link"&&F.getAttribute("rel")==="stylesheet")&&F.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=F.getAttribute(f)||"";Z=d+Z;var pe=S.get(Z);pe?pe.push(F):S.set(Z,[F])}}return S}function l1(d,f,g){d=d.ownerDocument||d,d.head.insertBefore(g,f==="title"?d.querySelector("head > title"):null)}function F_(d,f,g){if(g===1||f.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return d=f.disabled,typeof f.precedence=="string"&&d==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function fa(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var xa=null;function $_(){}function B_(d,f,g){if(xa===null)throw Error(a(475));var S=xa;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var P=Bu(g.href),F=d.querySelector(Fh(P));if(F){d=F._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(S.count++,S=zh.bind(S),d.then(S,S)),f.state.loading|=4,f.instance=F,Rt(F);return}F=d.ownerDocument||d,g=i1(g),(P=Ei.get(P))&&Bh(g,P),F=F.createElement("link"),Rt(F);var Z=F;Z._p=new Promise(function(pe,Le){Z.onload=pe,Z.onerror=Le}),ha(F,"link",g),f.instance=F}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(f,d),(d=f.state.preload)&&(f.state.loading&3)===0&&(S.count++,f=zh.bind(S),d.addEventListener("load",f),d.addEventListener("error",f))}}function z_(){if(xa===null)throw Error(a(475));var d=xa;return d.stylesheets&&d.count===0&&$x(d,d.stylesheets),0<d.count?function(f){var g=setTimeout(function(){if(d.stylesheets&&$x(d,d.stylesheets),d.unsuspend){var S=d.unsuspend;d.unsuspend=null,S()}},6e4);return d.unsuspend=f,function(){d.unsuspend=null,clearTimeout(g)}}:null}function zh(){if(this.count--,this.count===0){if(this.stylesheets)$x(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var pm=null;function $x(d,f){d.stylesheets=null,d.unsuspend!==null&&(d.count++,pm=new Map,f.forEach(q_,d),pm=null,zh.call(d))}function q_(d,f){if(!(f.state.loading&4)){var g=pm.get(d);if(g)var S=g.get(null);else{g=new Map,pm.set(d,g);for(var P=d.querySelectorAll("link[data-precedence],style[data-precedence]"),F=0;F<P.length;F++){var Z=P[F];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(g.set(Z.dataset.precedence,Z),S=Z)}S&&g.set(null,S)}P=f.instance,Z=P.getAttribute("data-precedence"),F=g.get(Z)||S,F===S&&g.set(null,P),g.set(Z,P),this.count++,S=zh.bind(this),P.addEventListener("load",S),P.addEventListener("error",S),F?F.parentNode.insertBefore(P,F.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(P,d.firstChild)),f.state.loading|=4}}var Uu={$$typeof:C,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function U_(d,f,g,S,P,F,Z,pe){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=S,this.onUncaughtError=P,this.onCaughtError=F,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function c1(d,f,g,S,P,F,Z,pe,Le,Je,dt,pt){return d=new U_(d,f,g,Z,pe,Le,Je,pt),f=1,F===!0&&(f|=24),F=ti(3,null,null,f),d.current=F,F.stateNode=d,f=Oy(),f.refCount++,d.pooledCache=f,f.refCount++,F.memoizedState={element:S,isDehydrated:g,cache:f},sc(F),d}function u1(d){return d?(d=Zl,d):Zl}function Bx(d,f,g,S,P,F){P=u1(P),S.context===null?S.context=P:S.pendingContext=P,S=sl(f),S.payload={element:g},F=F===void 0?null:F,F!==null&&(S.callback=F),g=bo(d,S,f),g!==null&&(Pi(g,d,f),eh(g,d,f))}function zx(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var g=d.retryLane;d.retryLane=g!==0&&g<f?g:f}}function qx(d,f){zx(d,f),(d=d.alternate)&&zx(d,f)}function d1(d){if(d.tag===13){var f=Jl(d,67108864);f!==null&&Pi(f,d,67108864),qx(d,67108864)}}var mm=!0;function V_(d,f,g,S){var P=q.T;q.T=null;var F=V.p;try{V.p=2,Ux(d,f,g,S)}finally{V.p=F,q.T=P}}function Vu(d,f,g,S){var P=q.T;q.T=null;var F=V.p;try{V.p=8,Ux(d,f,g,S)}finally{V.p=F,q.T=P}}function Ux(d,f,g,S){if(mm){var P=Vx(S);if(P===null)Eo(d,f,S,gm,g),f1(d,S);else if(G_(P,d,f,g,S))S.stopPropagation();else if(f1(d,S),f&4&&-1<H_.indexOf(d)){for(;P!==null;){var F=et(P);if(F!==null)switch(F.tag){case 3:if(F=F.stateNode,F.current.memoizedState.isDehydrated){var Z=wt(F.pendingLanes);if(Z!==0){var pe=F;for(pe.pendingLanes|=2,pe.entangledLanes|=2;Z;){var Le=1<<31-he(Z);pe.entanglements[1]|=Le,Z&=~Le}Qs(F),(ar&6)===0&&(Du=Ce()+500,Oh(0))}}break;case 13:pe=Jl(F,2),pe!==null&&Pi(pe,F,2),Zp(),qx(F,2)}if(F=Vx(S),F===null&&Eo(d,f,S,gm,g),F===P)break;P=F}P!==null&&S.stopPropagation()}else Eo(d,f,S,null,g)}}function Vx(d){return d=py(d),Hx(d)}var gm=null;function Hx(d){if(gm=null,d=Fn(d),d!==null){var f=s(d);if(f===null)d=null;else{var g=f.tag;if(g===13){if(d=o(f),d!==null)return d;d=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;d=null}else f!==d&&(d=null)}}return gm=d,null}function h1(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ye:return 2;case de:return 8;case se:case re:return 32;case oe:return 268435456;default:return 32}default:return 32}}var ym=!1,Do=null,wl=null,Nl=null,qh=new Map,Uh=new Map,Sl=[],H_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f1(d,f){switch(d){case"focusin":case"focusout":Do=null;break;case"dragenter":case"dragleave":wl=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":qh.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uh.delete(f.pointerId)}}function Vh(d,f,g,S,P,F){return d===null||d.nativeEvent!==F?(d={blockedOn:f,domEventName:g,eventSystemFlags:S,nativeEvent:F,targetContainers:[P]},f!==null&&(f=et(f),f!==null&&d1(f)),d):(d.eventSystemFlags|=S,f=d.targetContainers,P!==null&&f.indexOf(P)===-1&&f.push(P),d)}function G_(d,f,g,S,P){switch(f){case"focusin":return Do=Vh(Do,d,f,g,S,P),!0;case"dragenter":return wl=Vh(wl,d,f,g,S,P),!0;case"mouseover":return Nl=Vh(Nl,d,f,g,S,P),!0;case"pointerover":var F=P.pointerId;return qh.set(F,Vh(qh.get(F)||null,d,f,g,S,P)),!0;case"gotpointercapture":return F=P.pointerId,Uh.set(F,Vh(Uh.get(F)||null,d,f,g,S,P)),!0}return!1}function p1(d){var f=Fn(d.target);if(f!==null){var g=s(f);if(g!==null){if(f=g.tag,f===13){if(f=o(g),f!==null){d.blockedOn=f,vt(d.priority,function(){if(g.tag===13){var S=La();S=jt(S);var P=Jl(g,S);P!==null&&Pi(P,g,S),qx(g,S)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){d.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}d.blockedOn=null}function xm(d){if(d.blockedOn!==null)return!1;for(var f=d.targetContainers;0<f.length;){var g=Vx(d.nativeEvent);if(g===null){g=d.nativeEvent;var S=new g.constructor(g.type,g);Zf=S,g.target.dispatchEvent(S),Zf=null}else return f=et(g),f!==null&&d1(f),d.blockedOn=g,!1;f.shift()}return!0}function m1(d,f,g){xm(d)&&g.delete(f)}function W_(){ym=!1,Do!==null&&xm(Do)&&(Do=null),wl!==null&&xm(wl)&&(wl=null),Nl!==null&&xm(Nl)&&(Nl=null),qh.forEach(m1),Uh.forEach(m1)}function vm(d,f){d.blockedOn===f&&(d.blockedOn=null,ym||(ym=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,W_)))}var bm=null;function g1(d){bm!==d&&(bm=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){bm===d&&(bm=null);for(var f=0;f<d.length;f+=3){var g=d[f],S=d[f+1],P=d[f+2];if(typeof S!="function"){if(Hx(S||g)===null)continue;break}var F=et(g);F!==null&&(d.splice(f,3),f-=3,dh(F,{pending:!0,data:P,method:g.method,action:S},S,P))}}))}function Hh(d){function f(Le){return vm(Le,d)}Do!==null&&vm(Do,d),wl!==null&&vm(wl,d),Nl!==null&&vm(Nl,d),qh.forEach(f),Uh.forEach(f);for(var g=0;g<Sl.length;g++){var S=Sl[g];S.blockedOn===d&&(S.blockedOn=null)}for(;0<Sl.length&&(g=Sl[0],g.blockedOn===null);)p1(g),g.blockedOn===null&&Sl.shift();if(g=(d.ownerDocument||d).$$reactFormReplay,g!=null)for(S=0;S<g.length;S+=3){var P=g[S],F=g[S+1],Z=P[Xn]||null;if(typeof F=="function")Z||g1(g);else if(Z){var pe=null;if(F&&F.hasAttribute("formAction")){if(P=F,Z=F[Xn]||null)pe=Z.formAction;else if(Hx(P)!==null)continue}else pe=Z.action;typeof pe=="function"?g[S+1]=pe:(g.splice(S,3),S-=3),g1(g)}}}function Gx(d){this._internalRoot=d}jm.prototype.render=Gx.prototype.render=function(d){var f=this._internalRoot;if(f===null)throw Error(a(409));var g=f.current,S=La();Bx(g,S,d,f,null,null)},jm.prototype.unmount=Gx.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var f=d.containerInfo;Bx(d.current,2,null,d,null,null),Zp(),f[jr]=null}};function jm(d){this._internalRoot=d}jm.prototype.unstable_scheduleHydration=function(d){if(d){var f=Qn();d={blockedOn:null,target:d,priority:f};for(var g=0;g<Sl.length&&f!==0&&f<Sl[g].priority;g++);Sl.splice(g,0,d),g===0&&p1(d)}};var y1=e.version;if(y1!=="19.1.0")throw Error(a(527,y1,"19.1.0"));V.findDOMNode=function(d){var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(a(188)):(d=Object.keys(d).join(","),Error(a(268,d)));return d=c(f),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var K_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wm.isDisabled&&wm.supportsFiber)try{J=wm.inject(K_),xe=wm}catch{}}return Kx.createRoot=function(d,f){if(!i(d))throw Error(a(299));var g=!1,S="",P=ix,F=$p,Z=nj,pe=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(P=f.onUncaughtError),f.onCaughtError!==void 0&&(F=f.onCaughtError),f.onRecoverableError!==void 0&&(Z=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(pe=f.unstable_transitionCallbacks)),f=c1(d,1,!1,null,null,g,S,P,F,Z,pe,null),d[jr]=f.current,Ox(d),new Gx(f)},Kx.hydrateRoot=function(d,f,g){if(!i(d))throw Error(a(299));var S=!1,P="",F=ix,Z=$p,pe=nj,Le=null,Je=null;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(P=g.identifierPrefix),g.onUncaughtError!==void 0&&(F=g.onUncaughtError),g.onCaughtError!==void 0&&(Z=g.onCaughtError),g.onRecoverableError!==void 0&&(pe=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Le=g.unstable_transitionCallbacks),g.formState!==void 0&&(Je=g.formState)),f=c1(d,1,!0,f,g??null,S,P,F,Z,pe,Le,Je),f.context=u1(null),g=f.current,S=La(),S=jt(S),P=sl(S),P.callback=null,bo(g,P,S),g=S,f.current.lanes=g,Pe(f,g),Qs(f),d[jr]=f.current,Ox(d),new jm(f)},Kx.version="19.1.0",Kx}var cI;function _W(){if(cI)return tC.exports;cI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tC.exports=SW(),tC.exports}var CW=_W(),$g=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kW={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ed,LD,sz,TW=(sz=class{constructor(){Ht(this,ed,kW);Ht(this,LD,!1)}setTimeoutProvider(t){Et(this,ed,t)}setTimeout(t,e){return $e(this,ed).setTimeout(t,e)}clearTimeout(t){$e(this,ed).clearTimeout(t)}setInterval(t,e){return $e(this,ed).setInterval(t,e)}clearInterval(t){$e(this,ed).clearInterval(t)}},ed=new WeakMap,LD=new WeakMap,sz),nf=new TW;function AW(t){setTimeout(t,0)}var Sf=typeof window>"u"||"Deno"in globalThis;function Ii(){}function PW(t,e){return typeof t=="function"?t(e):t}function iP(t){return typeof t=="number"&&t>=0&&t!==1/0}function xz(t,e){return Math.max(t+(e||0)-Date.now(),0)}function hd(t,e){return typeof t=="function"?t(e):t}function no(t,e){return typeof t=="function"?t(e):t}function uI(t,e){const{type:n="all",exact:a,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(a){if(e.queryHash!==$D(o,e.options))return!1}else if(!Iv(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function dI(t,e){const{exact:n,status:a,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(_f(e.options.mutationKey)!==_f(s))return!1}else if(!Iv(e.options.mutationKey,s))return!1}return!(a&&e.state.status!==a||i&&!i(e))}function $D(t,e){return((e==null?void 0:e.queryKeyHashFn)||_f)(t)}function _f(t){return JSON.stringify(t,(e,n)=>sP(n)?Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{}):n)}function Iv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Iv(t[n],e[n])):!1}var EW=Object.prototype.hasOwnProperty;function vz(t,e,n=0){if(t===e)return t;if(n>500)return e;const a=hI(t)&&hI(e);if(!a&&!(sP(t)&&sP(e)))return e;const s=(a?t:Object.keys(t)).length,o=a?e:Object.keys(e),l=o.length,c=a?new Array(l):{};let u=0;for(let h=0;h<l;h++){const p=a?h:o[h],m=t[p],x=e[p];if(m===x){c[p]=m,(a?h<s:EW.call(t,p))&&u++;continue}if(m===null||x===null||typeof m!="object"||typeof x!="object"){c[p]=x;continue}const b=vz(m,x,n+1);c[p]=b,b===m&&u++}return s===l&&u===s?t:c}function gw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function hI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function sP(t){if(!fI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!fI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function fI(t){return Object.prototype.toString.call(t)==="[object Object]"}function DW(t){return new Promise(e=>{nf.setTimeout(e,t)})}function oP(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?vz(t,e):e}function OW(t,e,n=0){const a=[...t,e];return n&&a.length>n?a.slice(1):a}function MW(t,e,n=0){const a=[e,...t];return n&&a.length>n?a.slice(0,-1):a}var BD=Symbol();function bz(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===BD?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function zD(t,e){return typeof t=="function"?t(...e):!!t}function IW(t,e,n){let a=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),a||(a=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var uf,td,Km,oz,RW=(oz=class extends $g{constructor(){super();Ht(this,uf);Ht(this,td);Ht(this,Km);Et(this,Km,e=>{if(!Sf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$e(this,td)||this.setEventListener($e(this,Km))}onUnsubscribe(){var e;this.hasListeners()||((e=$e(this,td))==null||e.call(this),Et(this,td,void 0))}setEventListener(e){var n;Et(this,Km,e),(n=$e(this,td))==null||n.call(this),Et(this,td,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){$e(this,uf)!==e&&(Et(this,uf,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof $e(this,uf)=="boolean"?$e(this,uf):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},uf=new WeakMap,td=new WeakMap,Km=new WeakMap,oz),qD=new RW;function lP(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function a(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{a({status:"fulfilled",value:i}),t(i)},n.reject=i=>{a({status:"rejected",reason:i}),e(i)},n}var LW=AW;function FW(){let t=[],e=0,n=l=>{l()},a=l=>{l()},i=LW;const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{a(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{i=l}}}var Aa=FW(),Ym,nd,Qm,lz,$W=(lz=class extends $g{constructor(){super();Ht(this,Ym,!0);Ht(this,nd);Ht(this,Qm);Et(this,Qm,e=>{if(!Sf&&window.addEventListener){const n=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}})}onSubscribe(){$e(this,nd)||this.setEventListener($e(this,Qm))}onUnsubscribe(){var e;this.hasListeners()||((e=$e(this,nd))==null||e.call(this),Et(this,nd,void 0))}setEventListener(e){var n;Et(this,Qm,e),(n=$e(this,nd))==null||n.call(this),Et(this,nd,e(this.setOnline.bind(this)))}setOnline(e){$e(this,Ym)!==e&&(Et(this,Ym,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return $e(this,Ym)}},Ym=new WeakMap,nd=new WeakMap,Qm=new WeakMap,lz),yw=new $W;function BW(t){return Math.min(1e3*2**t,3e4)}function jz(t){return(t??"online")==="online"?yw.isOnline():!0}var cP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function wz(t){let e=!1,n=0,a;const i=lP(),s=()=>i.status!=="pending",o=j=>{var w;if(!s()){const _=new cP(j);m(_),(w=t.onCancel)==null||w.call(t,_)}},l=()=>{e=!0},c=()=>{e=!1},u=()=>qD.isFocused()&&(t.networkMode==="always"||yw.isOnline())&&t.canRun(),h=()=>jz(t.networkMode)&&t.canRun(),p=j=>{s()||(a==null||a(),i.resolve(j))},m=j=>{s()||(a==null||a(),i.reject(j))},x=()=>new Promise(j=>{var w;a=_=>{(s()||u())&&j(_)},(w=t.onPause)==null||w.call(t)}).then(()=>{var j;a=void 0,s()||(j=t.onContinue)==null||j.call(t)}),b=()=>{if(s())return;let j;const w=n===0?t.initialPromise:void 0;try{j=w??t.fn()}catch(_){j=Promise.reject(_)}Promise.resolve(j).then(p).catch(_=>{var E;if(s())return;const k=t.retry??(Sf?0:3),C=t.retryDelay??BW,A=typeof C=="function"?C(n,_):C,T=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,_);if(e||!T){m(_);return}n++,(E=t.onFail)==null||E.call(t,n,_),DW(A).then(()=>u()?void 0:x()).then(()=>{e?m(_):b()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?b():x().then(b),i)}}var df,cz,Nz=(cz=class{constructor(){Ht(this,df)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),iP(this.gcTime)&&Et(this,df,nf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Sf?1/0:5*60*1e3))}clearGcTimeout(){$e(this,df)&&(nf.clearTimeout($e(this,df)),Et(this,df,void 0))}},df=new WeakMap,cz),hf,Xm,to,ff,Fa,Ab,pf,Ro,Sc,uz,zW=(uz=class extends Nz{constructor(e){super();Ht(this,Ro);Ht(this,hf);Ht(this,Xm);Ht(this,to);Ht(this,ff);Ht(this,Fa);Ht(this,Ab);Ht(this,pf);Et(this,pf,!1),Et(this,Ab,e.defaultOptions),this.setOptions(e.options),this.observers=[],Et(this,ff,e.client),Et(this,to,$e(this,ff).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Et(this,hf,mI(this.options)),this.state=e.state??$e(this,hf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=$e(this,Fa))==null?void 0:e.promise}setOptions(e){if(this.options={...$e(this,Ab),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=mI(this.options);n.data!==void 0&&(this.setState(pI(n.data,n.dataUpdatedAt)),Et(this,hf,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$e(this,to).remove(this)}setData(e,n){const a=oP(this.state.data,e,this.options);return _n(this,Ro,Sc).call(this,{data:a,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),a}setState(e,n){_n(this,Ro,Sc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var a,i;const n=(a=$e(this,Fa))==null?void 0:a.promise;return(i=$e(this,Fa))==null||i.cancel(e),n?n.then(Ii).catch(Ii):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($e(this,hf))}isActive(){return this.observers.some(e=>no(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===BD||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>hd(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!xz(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=$e(this,Fa))==null||n.continue()}onOnline(){var n;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=$e(this,Fa))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),$e(this,to).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||($e(this,Fa)&&($e(this,pf)?$e(this,Fa).cancel({revert:!0}):$e(this,Fa).cancelRetry()),this.scheduleGc()),$e(this,to).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_n(this,Ro,Sc).call(this,{type:"invalidate"})}async fetch(e,n){var c,u,h,p,m,x,b,j,w,_,k,C;if(this.state.fetchStatus!=="idle"&&((c=$e(this,Fa))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if($e(this,Fa))return $e(this,Fa).continueRetry(),$e(this,Fa).promise}if(e&&this.setOptions(e),!this.options.queryFn){const A=this.observers.find(T=>T.options.queryFn);A&&this.setOptions(A.options)}const a=new AbortController,i=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(Et(this,pf,!0),a.signal)})},s=()=>{const A=bz(this.options,n),E=(()=>{const I={client:$e(this,ff),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return Et(this,pf,!1),this.options.persister?this.options.persister(A,E,this):A(E)},l=(()=>{const A={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:$e(this,ff),state:this.state,fetchFn:s};return i(A),A})();(u=this.options.behavior)==null||u.onFetch(l,this),Et(this,Xm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&_n(this,Ro,Sc).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Et(this,Fa,wz({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:A=>{A instanceof cP&&A.revert&&this.setState({...$e(this,Xm),fetchStatus:"idle"}),a.abort()},onFail:(A,T)=>{_n(this,Ro,Sc).call(this,{type:"failed",failureCount:A,error:T})},onPause:()=>{_n(this,Ro,Sc).call(this,{type:"pause"})},onContinue:()=>{_n(this,Ro,Sc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const A=await $e(this,Fa).start();if(A===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(A),(x=(m=$e(this,to).config).onSuccess)==null||x.call(m,A,this),(j=(b=$e(this,to).config).onSettled)==null||j.call(b,A,this.state.error,this),A}catch(A){if(A instanceof cP){if(A.silent)return $e(this,Fa).promise;if(A.revert){if(this.state.data===void 0)throw A;return this.state.data}}throw _n(this,Ro,Sc).call(this,{type:"error",error:A}),(_=(w=$e(this,to).config).onError)==null||_.call(w,A,this),(C=(k=$e(this,to).config).onSettled)==null||C.call(k,this.state.data,A,this),A}finally{this.scheduleGc()}}},hf=new WeakMap,Xm=new WeakMap,to=new WeakMap,ff=new WeakMap,Fa=new WeakMap,Ab=new WeakMap,pf=new WeakMap,Ro=new WeakSet,Sc=function(e){const n=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...Sz(a.data,this.options),fetchMeta:e.meta??null};case"success":const i={...a,...pI(e.data,e.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Et(this,Xm,e.manual?i:void 0),i;case"error":const s=e.error;return{...a,error:s,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=n(this.state),Aa.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),$e(this,to).notify({query:this,type:"updated",action:e})})},uz);function Sz(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jz(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function pI(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function mI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,a=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var os,Wn,Pb,Oi,mf,Jm,Cc,rd,Eb,Zm,eg,gf,yf,ad,tg,gr,gv,uP,dP,hP,fP,pP,mP,gP,_z,dz,qW=(dz=class extends $g{constructor(e,n){super();Ht(this,gr);Ht(this,os);Ht(this,Wn);Ht(this,Pb);Ht(this,Oi);Ht(this,mf);Ht(this,Jm);Ht(this,Cc);Ht(this,rd);Ht(this,Eb);Ht(this,Zm);Ht(this,eg);Ht(this,gf);Ht(this,yf);Ht(this,ad);Ht(this,tg,new Set);this.options=n,Et(this,os,e),Et(this,rd,null),Et(this,Cc,lP()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($e(this,Wn).addObserver(this),gI($e(this,Wn),this.options)?_n(this,gr,gv).call(this):this.updateResult(),_n(this,gr,fP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return yP($e(this,Wn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return yP($e(this,Wn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,_n(this,gr,pP).call(this),_n(this,gr,mP).call(this),$e(this,Wn).removeObserver(this)}setOptions(e){const n=this.options,a=$e(this,Wn);if(this.options=$e(this,os).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof no(this.options.enabled,$e(this,Wn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");_n(this,gr,gP).call(this),$e(this,Wn).setOptions(this.options),n._defaulted&&!gw(this.options,n)&&$e(this,os).getQueryCache().notify({type:"observerOptionsUpdated",query:$e(this,Wn),observer:this});const i=this.hasListeners();i&&yI($e(this,Wn),a,this.options,n)&&_n(this,gr,gv).call(this),this.updateResult(),i&&($e(this,Wn)!==a||no(this.options.enabled,$e(this,Wn))!==no(n.enabled,$e(this,Wn))||hd(this.options.staleTime,$e(this,Wn))!==hd(n.staleTime,$e(this,Wn)))&&_n(this,gr,uP).call(this);const s=_n(this,gr,dP).call(this);i&&($e(this,Wn)!==a||no(this.options.enabled,$e(this,Wn))!==no(n.enabled,$e(this,Wn))||s!==$e(this,ad))&&_n(this,gr,hP).call(this,s)}getOptimisticResult(e){const n=$e(this,os).getQueryCache().build($e(this,os),e),a=this.createResult(n,e);return VW(this,a)&&(Et(this,Oi,a),Et(this,Jm,this.options),Et(this,mf,$e(this,Wn).state)),a}getCurrentResult(){return $e(this,Oi)}trackResult(e,n){return new Proxy(e,{get:(a,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&$e(this,Cc).status==="pending"&&$e(this,Cc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,i))})}trackProp(e){$e(this,tg).add(e)}getCurrentQuery(){return $e(this,Wn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=$e(this,os).defaultQueryOptions(e),a=$e(this,os).getQueryCache().build($e(this,os),n);return a.fetch().then(()=>this.createResult(a,n))}fetch(e){return _n(this,gr,gv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),$e(this,Oi)))}createResult(e,n){var U;const a=$e(this,Wn),i=this.options,s=$e(this,Oi),o=$e(this,mf),l=$e(this,Jm),u=e!==a?e.state:$e(this,Pb),{state:h}=e;let p={...h},m=!1,x;if(n._optimisticResults){const B=this.hasListeners(),R=!B&&gI(e,n),z=B&&yI(e,a,n,i);(R||z)&&(p={...p,...Sz(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:b,errorUpdatedAt:j,status:w}=p;x=p.data;let _=!1;if(n.placeholderData!==void 0&&x===void 0&&w==="pending"){let B;s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(B=s.data,_=!0):B=typeof n.placeholderData=="function"?n.placeholderData((U=$e(this,eg))==null?void 0:U.state.data,$e(this,eg)):n.placeholderData,B!==void 0&&(w="success",x=oP(s==null?void 0:s.data,B,n),m=!0)}if(n.select&&x!==void 0&&!_)if(s&&x===(o==null?void 0:o.data)&&n.select===$e(this,Eb))x=$e(this,Zm);else try{Et(this,Eb,n.select),x=n.select(x),x=oP(s==null?void 0:s.data,x,n),Et(this,Zm,x),Et(this,rd,null)}catch(B){Et(this,rd,B)}$e(this,rd)&&(b=$e(this,rd),x=$e(this,Zm),j=Date.now(),w="error");const k=p.fetchStatus==="fetching",C=w==="pending",A=w==="error",T=C&&k,E=x!==void 0,$={status:w,fetchStatus:p.fetchStatus,isPending:C,isSuccess:w==="success",isError:A,isInitialLoading:T,isLoading:T,data:x,dataUpdatedAt:p.dataUpdatedAt,error:b,errorUpdatedAt:j,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:k,isRefetching:k&&!C,isLoadingError:A&&!E,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:A&&E,isStale:UD(e,n),refetch:this.refetch,promise:$e(this,Cc),isEnabled:no(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const B=$.data!==void 0,R=$.status==="error"&&!B,z=Y=>{R?Y.reject($.error):B&&Y.resolve($.data)},G=()=>{const Y=Et(this,Cc,$.promise=lP());z(Y)},K=$e(this,Cc);switch(K.status){case"pending":e.queryHash===a.queryHash&&z(K);break;case"fulfilled":(R||$.data!==K.value)&&G();break;case"rejected":(!R||$.error!==K.reason)&&G();break}}return $}updateResult(){const e=$e(this,Oi),n=this.createResult($e(this,Wn),this.options);if(Et(this,mf,$e(this,Wn).state),Et(this,Jm,this.options),$e(this,mf).data!==void 0&&Et(this,eg,$e(this,Wn)),gw(n,e))return;Et(this,Oi,n);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!$e(this,tg).size)return!0;const o=new Set(s??$e(this,tg));return this.options.throwOnError&&o.add("error"),Object.keys($e(this,Oi)).some(l=>{const c=l;return $e(this,Oi)[c]!==e[c]&&o.has(c)})};_n(this,gr,_z).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&_n(this,gr,fP).call(this)}},os=new WeakMap,Wn=new WeakMap,Pb=new WeakMap,Oi=new WeakMap,mf=new WeakMap,Jm=new WeakMap,Cc=new WeakMap,rd=new WeakMap,Eb=new WeakMap,Zm=new WeakMap,eg=new WeakMap,gf=new WeakMap,yf=new WeakMap,ad=new WeakMap,tg=new WeakMap,gr=new WeakSet,gv=function(e){_n(this,gr,gP).call(this);let n=$e(this,Wn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ii)),n},uP=function(){_n(this,gr,pP).call(this);const e=hd(this.options.staleTime,$e(this,Wn));if(Sf||$e(this,Oi).isStale||!iP(e))return;const a=xz($e(this,Oi).dataUpdatedAt,e)+1;Et(this,gf,nf.setTimeout(()=>{$e(this,Oi).isStale||this.updateResult()},a))},dP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($e(this,Wn)):this.options.refetchInterval)??!1},hP=function(e){_n(this,gr,mP).call(this),Et(this,ad,e),!(Sf||no(this.options.enabled,$e(this,Wn))===!1||!iP($e(this,ad))||$e(this,ad)===0)&&Et(this,yf,nf.setInterval(()=>{(this.options.refetchIntervalInBackground||qD.isFocused())&&_n(this,gr,gv).call(this)},$e(this,ad)))},fP=function(){_n(this,gr,uP).call(this),_n(this,gr,hP).call(this,_n(this,gr,dP).call(this))},pP=function(){$e(this,gf)&&(nf.clearTimeout($e(this,gf)),Et(this,gf,void 0))},mP=function(){$e(this,yf)&&(nf.clearInterval($e(this,yf)),Et(this,yf,void 0))},gP=function(){const e=$e(this,os).getQueryCache().build($e(this,os),this.options);if(e===$e(this,Wn))return;const n=$e(this,Wn);Et(this,Wn,e),Et(this,Pb,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},_z=function(e){Aa.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n($e(this,Oi))}),$e(this,os).getQueryCache().notify({query:$e(this,Wn),type:"observerResultsUpdated"})})},dz);function UW(t,e){return no(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function gI(t,e){return UW(t,e)||t.state.data!==void 0&&yP(t,e,e.refetchOnMount)}function yP(t,e,n){if(no(e.enabled,t)!==!1&&hd(e.staleTime,t)!=="static"){const a=typeof n=="function"?n(t):n;return a==="always"||a!==!1&&UD(t,e)}return!1}function yI(t,e,n,a){return(t!==e||no(a.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&UD(t,n)}function UD(t,e){return no(e.enabled,t)!==!1&&t.isStaleByTime(hd(e.staleTime,t))}function VW(t,e){return!gw(t.getCurrentResult(),e)}function xI(t){return{onFetch:(e,n)=>{var h,p,m,x,b;const a=e.options,i=(m=(p=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,s=((x=e.state.data)==null?void 0:x.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let j=!1;const w=C=>{IW(C,()=>e.signal,()=>j=!0)},_=bz(e.options,e.fetchOptions),k=async(C,A,T)=>{if(j)return Promise.reject();if(A==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:A,direction:T?"backward":"forward",meta:e.options.meta};return w(R),R})(),$=await _(I),{maxPages:U}=e.options,B=T?MW:OW;return{pages:B(C.pages,$,U),pageParams:B(C.pageParams,A,U)}};if(i&&s.length){const C=i==="backward",A=C?HW:vI,T={pages:s,pageParams:o},E=A(a,T);l=await k(T,E,C)}else{const C=t??s.length;do{const A=c===0?o[0]??a.initialPageParam:vI(a,l);if(c>0&&A==null)break;l=await k(l,A),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var j,w;return(w=(j=e.options).persister)==null?void 0:w.call(j,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function vI(t,{pages:e,pageParams:n}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,n[a],n):void 0}function HW(t,{pages:e,pageParams:n}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,n[0],n):void 0}var Db,Tl,Mi,xf,Al,Ku,hz,GW=(hz=class extends Nz{constructor(e){super();Ht(this,Al);Ht(this,Db);Ht(this,Tl);Ht(this,Mi);Ht(this,xf);Et(this,Db,e.client),this.mutationId=e.mutationId,Et(this,Mi,e.mutationCache),Et(this,Tl,[]),this.state=e.state||Cz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){$e(this,Tl).includes(e)||($e(this,Tl).push(e),this.clearGcTimeout(),$e(this,Mi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Et(this,Tl,$e(this,Tl).filter(n=>n!==e)),this.scheduleGc(),$e(this,Mi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){$e(this,Tl).length||(this.state.status==="pending"?this.scheduleGc():$e(this,Mi).remove(this))}continue(){var e;return((e=$e(this,xf))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,u,h,p,m,x,b,j,w,_,k,C,A,T,E,I,$,U;const n=()=>{_n(this,Al,Ku).call(this,{type:"continue"})},a={client:$e(this,Db),meta:this.options.meta,mutationKey:this.options.mutationKey};Et(this,xf,wz({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:(B,R)=>{_n(this,Al,Ku).call(this,{type:"failed",failureCount:B,error:R})},onPause:()=>{_n(this,Al,Ku).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$e(this,Mi).canRun(this)}));const i=this.state.status==="pending",s=!$e(this,xf).canStart();try{if(i)n();else{_n(this,Al,Ku).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(o=$e(this,Mi).config).onMutate)==null?void 0:l.call(o,e,this,a));const R=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,e,a));R!==this.state.context&&_n(this,Al,Ku).call(this,{type:"pending",context:R,variables:e,isPaused:s})}const B=await $e(this,xf).start();return await((p=(h=$e(this,Mi).config).onSuccess)==null?void 0:p.call(h,B,e,this.state.context,this,a)),await((x=(m=this.options).onSuccess)==null?void 0:x.call(m,B,e,this.state.context,a)),await((j=(b=$e(this,Mi).config).onSettled)==null?void 0:j.call(b,B,null,this.state.variables,this.state.context,this,a)),await((_=(w=this.options).onSettled)==null?void 0:_.call(w,B,null,e,this.state.context,a)),_n(this,Al,Ku).call(this,{type:"success",data:B}),B}catch(B){try{await((C=(k=$e(this,Mi).config).onError)==null?void 0:C.call(k,B,e,this.state.context,this,a))}catch(R){Promise.reject(R)}try{await((T=(A=this.options).onError)==null?void 0:T.call(A,B,e,this.state.context,a))}catch(R){Promise.reject(R)}try{await((I=(E=$e(this,Mi).config).onSettled)==null?void 0:I.call(E,void 0,B,this.state.variables,this.state.context,this,a))}catch(R){Promise.reject(R)}try{await((U=($=this.options).onSettled)==null?void 0:U.call($,void 0,B,e,this.state.context,a))}catch(R){Promise.reject(R)}throw _n(this,Al,Ku).call(this,{type:"error",error:B}),B}finally{$e(this,Mi).runNext(this)}}},Db=new WeakMap,Tl=new WeakMap,Mi=new WeakMap,xf=new WeakMap,Al=new WeakSet,Ku=function(e){const n=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Aa.batch(()=>{$e(this,Tl).forEach(a=>{a.onMutationUpdate(e)}),$e(this,Mi).notify({mutation:this,type:"updated",action:e})})},hz);function Cz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var kc,Lo,Ob,fz,WW=(fz=class extends $g{constructor(e={}){super();Ht(this,kc);Ht(this,Lo);Ht(this,Ob);this.config=e,Et(this,kc,new Set),Et(this,Lo,new Map),Et(this,Ob,0)}build(e,n,a){const i=new GW({client:e,mutationCache:this,mutationId:++x1(this,Ob)._,options:e.defaultMutationOptions(n),state:a});return this.add(i),i}add(e){$e(this,kc).add(e);const n=v1(e);if(typeof n=="string"){const a=$e(this,Lo).get(n);a?a.push(e):$e(this,Lo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if($e(this,kc).delete(e)){const n=v1(e);if(typeof n=="string"){const a=$e(this,Lo).get(n);if(a)if(a.length>1){const i=a.indexOf(e);i!==-1&&a.splice(i,1)}else a[0]===e&&$e(this,Lo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=v1(e);if(typeof n=="string"){const a=$e(this,Lo).get(n),i=a==null?void 0:a.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var a;const n=v1(e);if(typeof n=="string"){const i=(a=$e(this,Lo).get(n))==null?void 0:a.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Aa.batch(()=>{$e(this,kc).forEach(e=>{this.notify({type:"removed",mutation:e})}),$e(this,kc).clear(),$e(this,Lo).clear()})}getAll(){return Array.from($e(this,kc))}find(e){const n={exact:!0,...e};return this.getAll().find(a=>dI(n,a))}findAll(e={}){return this.getAll().filter(n=>dI(e,n))}notify(e){Aa.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Aa.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ii))))}},kc=new WeakMap,Lo=new WeakMap,Ob=new WeakMap,fz);function v1(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Tc,id,ls,Ac,Fc,nw,xP,pz,KW=(pz=class extends $g{constructor(n,a){super();Ht(this,Fc);Ht(this,Tc);Ht(this,id);Ht(this,ls);Ht(this,Ac);Et(this,Tc,n),this.setOptions(a),this.bindMethods(),_n(this,Fc,nw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const a=this.options;this.options=$e(this,Tc).defaultMutationOptions(n),gw(this.options,a)||$e(this,Tc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:$e(this,ls),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&_f(a.mutationKey)!==_f(this.options.mutationKey)?this.reset():((i=$e(this,ls))==null?void 0:i.state.status)==="pending"&&$e(this,ls).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=$e(this,ls))==null||n.removeObserver(this)}onMutationUpdate(n){_n(this,Fc,nw).call(this),_n(this,Fc,xP).call(this,n)}getCurrentResult(){return $e(this,id)}reset(){var n;(n=$e(this,ls))==null||n.removeObserver(this),Et(this,ls,void 0),_n(this,Fc,nw).call(this),_n(this,Fc,xP).call(this)}mutate(n,a){var i;return Et(this,Ac,a),(i=$e(this,ls))==null||i.removeObserver(this),Et(this,ls,$e(this,Tc).getMutationCache().build($e(this,Tc),this.options)),$e(this,ls).addObserver(this),$e(this,ls).execute(n)}},Tc=new WeakMap,id=new WeakMap,ls=new WeakMap,Ac=new WeakMap,Fc=new WeakSet,nw=function(){var a;const n=((a=$e(this,ls))==null?void 0:a.state)??Cz();Et(this,id,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},xP=function(n){Aa.batch(()=>{var a,i,s,o,l,c,u,h;if($e(this,Ac)&&this.hasListeners()){const p=$e(this,id).variables,m=$e(this,id).context,x={client:$e(this,Tc),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(i=(a=$e(this,Ac)).onSuccess)==null||i.call(a,n.data,p,m,x)}catch(b){Promise.reject(b)}try{(o=(s=$e(this,Ac)).onSettled)==null||o.call(s,n.data,null,p,m,x)}catch(b){Promise.reject(b)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=$e(this,Ac)).onError)==null||c.call(l,n.error,p,m,x)}catch(b){Promise.reject(b)}try{(h=(u=$e(this,Ac)).onSettled)==null||h.call(u,void 0,n.error,p,m,x)}catch(b){Promise.reject(b)}}}this.listeners.forEach(p=>{p($e(this,id))})})},pz),Pl,mz,YW=(mz=class extends $g{constructor(e={}){super();Ht(this,Pl);this.config=e,Et(this,Pl,new Map)}build(e,n,a){const i=n.queryKey,s=n.queryHash??$D(i,n);let o=this.get(s);return o||(o=new zW({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:a,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){$e(this,Pl).has(e.queryHash)||($e(this,Pl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=$e(this,Pl).get(e.queryHash);n&&(e.destroy(),n===e&&$e(this,Pl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Aa.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $e(this,Pl).get(e)}getAll(){return[...$e(this,Pl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(a=>uI(n,a))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(a=>uI(e,a)):n}notify(e){Aa.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Aa.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Aa.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pl=new WeakMap,mz),ia,sd,od,ng,rg,ld,ag,ig,gz,QW=(gz=class{constructor(t={}){Ht(this,ia);Ht(this,sd);Ht(this,od);Ht(this,ng);Ht(this,rg);Ht(this,ld);Ht(this,ag);Ht(this,ig);Et(this,ia,t.queryCache||new YW),Et(this,sd,t.mutationCache||new WW),Et(this,od,t.defaultOptions||{}),Et(this,ng,new Map),Et(this,rg,new Map),Et(this,ld,0)}mount(){x1(this,ld)._++,$e(this,ld)===1&&(Et(this,ag,qD.subscribe(async t=>{t&&(await this.resumePausedMutations(),$e(this,ia).onFocus())})),Et(this,ig,yw.subscribe(async t=>{t&&(await this.resumePausedMutations(),$e(this,ia).onOnline())})))}unmount(){var t,e;x1(this,ld)._--,$e(this,ld)===0&&((t=$e(this,ag))==null||t.call(this),Et(this,ag,void 0),(e=$e(this,ig))==null||e.call(this),Et(this,ig,void 0))}isFetching(t){return $e(this,ia).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return $e(this,sd).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$e(this,ia).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=$e(this,ia).build(this,e),a=n.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(hd(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return $e(this,ia).findAll(t).map(({queryKey:e,state:n})=>{const a=n.data;return[e,a]})}setQueryData(t,e,n){const a=this.defaultQueryOptions({queryKey:t}),i=$e(this,ia).get(a.queryHash),s=i==null?void 0:i.state.data,o=PW(e,s);if(o!==void 0)return $e(this,ia).build(this,a).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Aa.batch(()=>$e(this,ia).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=$e(this,ia).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=$e(this,ia);Aa.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=$e(this,ia);return Aa.batch(()=>(n.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},a=Aa.batch(()=>$e(this,ia).findAll(t).map(i=>i.cancel(n)));return Promise.all(a).then(Ii).catch(Ii)}invalidateQueries(t,e={}){return Aa.batch(()=>($e(this,ia).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},a=Aa.batch(()=>$e(this,ia).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Ii)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(a).then(Ii)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=$e(this,ia).build(this,e);return n.isStaleByTime(hd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ii).catch(Ii)}fetchInfiniteQuery(t){return t.behavior=xI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ii).catch(Ii)}ensureInfiniteQueryData(t){return t.behavior=xI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return yw.isOnline()?$e(this,sd).resumePausedMutations():Promise.resolve()}getQueryCache(){return $e(this,ia)}getMutationCache(){return $e(this,sd)}getDefaultOptions(){return $e(this,od)}setDefaultOptions(t){Et(this,od,t)}setQueryDefaults(t,e){$e(this,ng).set(_f(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...$e(this,ng).values()],n={};return e.forEach(a=>{Iv(t,a.queryKey)&&Object.assign(n,a.defaultOptions)}),n}setMutationDefaults(t,e){$e(this,rg).set(_f(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...$e(this,rg).values()],n={};return e.forEach(a=>{Iv(t,a.mutationKey)&&Object.assign(n,a.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...$e(this,od).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=$D(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===BD&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...$e(this,od).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){$e(this,ia).clear(),$e(this,sd).clear()}},ia=new WeakMap,sd=new WeakMap,od=new WeakMap,ng=new WeakMap,rg=new WeakMap,ld=new WeakMap,ag=new WeakMap,ig=new WeakMap,gz),kz=v.createContext(void 0),ps=t=>{const e=v.useContext(kz);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},XW=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(kz.Provider,{value:t,children:e})),Tz=v.createContext(!1),JW=()=>v.useContext(Tz);Tz.Provider;function ZW(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var eK=v.createContext(ZW()),tK=()=>v.useContext(eK),nK=(t,e,n)=>{const a=n!=null&&n.state.error&&typeof t.throwOnError=="function"?zD(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||a)&&(e.isReset()||(t.retryOnMount=!1))},rK=t=>{v.useEffect(()=>{t.clearReset()},[t])},aK=({result:t,errorResetBoundary:e,throwOnError:n,query:a,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&a&&(i&&t.data===void 0||zD(n,[t.error,a])),iK=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...i)=>n(a(...i)):n(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},sK=(t,e)=>t.isLoading&&t.isFetching&&!e,oK=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,bI=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function lK(t,e,n){var m,x,b,j;const a=JW(),i=tK(),s=ps(),o=s.defaultQueryOptions(t);(x=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||x.call(m,o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",iK(o),nK(o,i,l),rK(i);const c=!s.getQueryCache().get(o.queryHash),[u]=v.useState(()=>new e(s,o)),h=u.getOptimisticResult(o),p=!a&&t.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(w=>{const _=p?u.subscribe(Aa.batchCalls(w)):Ii;return u.updateResult(),_},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),v.useEffect(()=>{u.setOptions(o)},[o,u]),oK(o,h))throw bI(o,u,i);if(aK({result:h,errorResetBoundary:i,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw h.error;if((j=(b=s.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||j.call(b,o,h),o.experimental_prefetchInRender&&!Sf&&sK(h,a)){const w=c?bI(o,u,i):l==null?void 0:l.promise;w==null||w.catch(Ii).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?h:u.trackResult(h)}function qN(t,e){return lK(t,qW)}function cK(t,e){const n=ps(),[a]=v.useState(()=>new KW(n,t));v.useEffect(()=>{a.setOptions(t)},[a,t]);const i=v.useSyncExternalStore(v.useCallback(o=>a.subscribe(Aa.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),s=v.useCallback((o,l)=>{a.mutate(o,l).catch(Ii)},[a]);if(i.error&&zD(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const uK=new QW({defaultOptions:{queries:{staleTime:0,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!1}}}),Kt={clinicSettings:["clinicSettings"],clinicSubscription:["clinicSubscription"],patients:{all:["patients"],list:t=>["patients","list",t],detail:t=>["patients","detail",t],context:t=>["patients","context",t]},queue:{all:["queue"],today:["queue","today"],entry:t=>["queue","entry",t],latest:t=>["queue","patient",t,"latest"]},staff:{all:["staff"],list:["staff","list"],detail:t=>["staff","detail",t]},pharmacyOrders:{all:["pharmacyOrders"],detail:t=>["pharmacyOrders","detail",t],byPatient:t=>["pharmacyOrders","patient",t]},labOrders:{all:["labOrders"],detail:t=>["labOrders","detail",t],byPatient:t=>["labOrders","patient",t]},drugs:{all:["drugs"],list:["drugs","list"],detail:t=>["drugs","detail",t]},labTests:{all:["labTests"],list:["labTests","list"]},patientDebts:{balance:t=>["patientDebts","balance",t]},dental:{records:t=>["dental","records",t]}},dK="modulepreload",hK=function(t){return"/"+t},jI={},UN=function(e,n,a){let i=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(n.map(u=>{if(u=hK(u),u in jI)return;jI[u]=!0;const h=u.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":dK,h||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((x,b)=>{m.addEventListener("load",x),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},Im=({message:t="Newtons Ai HMS",fullScreen:e=!1})=>r.jsx("div",{className:`loading-container ${e?"fullscreen":""}`,children:r.jsxs("div",{className:"loading-content",children:[r.jsxs("div",{className:"spinner-ring",children:[r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{})]}),r.jsx("div",{className:"loading-title",children:t}),e&&r.jsx("div",{className:"loading-subtitle",children:"Optimizing your experience..."})]})});function fK(t={}){const{nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i}=t,[s,o]=v.useState(!1),l=v.useRef(a);l.current=a;const c=v.useRef(i);return c.current=i,v.useEffect(()=>{const u=document.createElement("script");return u.src="https://accounts.google.com/gsi/client",n&&(u.src+=`?hl=${n}`),u.async=!0,u.defer=!0,u.nonce=e,u.onload=()=>{var h;o(!0),(h=l.current)===null||h===void 0||h.call(l)},u.onerror=()=>{var h;o(!1),(h=c.current)===null||h===void 0||h.call(c)},document.body.appendChild(u),()=>{document.body.removeChild(u)}},[e]),s}const Az=v.createContext(null);function pK({clientId:t,nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i,children:s}){const o=fK({nonce:e,onScriptLoadSuccess:a,onScriptLoadError:i,locale:n}),l=v.useMemo(()=>({locale:n,clientId:t,scriptLoadedSuccessfully:o}),[t,o]);return Te.createElement(Az.Provider,{value:l},s)}function mK(){const t=v.useContext(Az);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function gK(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const yK={large:40,medium:32,small:20};function xK({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:a,type:i="standard",theme:s="outline",size:o="large",text:l,shape:c,logo_alignment:u,width:h,click_listener:p,state:m,containerProps:x,...b}){const j=v.useRef(null),{clientId:w,locale:_,scriptLoadedSuccessfully:k}=mK(),C=v.useRef(t);C.current=t;const A=v.useRef(e);A.current=e;const T=v.useRef(a);return T.current=a,v.useEffect(()=>{var E,I,$,U,B,R,z,G,K;if(k)return($=(I=(E=window==null?void 0:window.google)===null||E===void 0?void 0:E.accounts)===null||I===void 0?void 0:I.id)===null||$===void 0||$.initialize({client_id:w,callback:Y=>{var q;if(!(Y!=null&&Y.credential))return(q=A.current)===null||q===void 0?void 0:q.call(A);const{credential:V,select_by:H}=Y;C.current({credential:V,clientId:gK(Y),select_by:H})},...b}),(R=(B=(U=window==null?void 0:window.google)===null||U===void 0?void 0:U.accounts)===null||B===void 0?void 0:B.id)===null||R===void 0||R.renderButton(j.current,{type:i,theme:s,size:o,text:l,shape:c,logo_alignment:u,width:h,locale:_,click_listener:p,state:m}),n&&((K=(G=(z=window==null?void 0:window.google)===null||z===void 0?void 0:z.accounts)===null||G===void 0?void 0:G.id)===null||K===void 0||K.prompt(T.current)),()=>{var Y,q,V;n&&((V=(q=(Y=window==null?void 0:window.google)===null||Y===void 0?void 0:Y.accounts)===null||q===void 0?void 0:q.id)===null||V===void 0||V.cancel())}},[w,k,n,i,s,o,l,c,u,h,_]),Te.createElement("div",{...x,ref:j,style:{height:yK[o],...x==null?void 0:x.style}})}var Yx={},wI;function vK(){if(wI)return Yx;wI=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.parse=o,Yx.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function o(m,x){const b=new s,j=m.length;if(j<2)return b;const w=(x==null?void 0:x.decode)||h;let _=0;do{const k=m.indexOf("=",_);if(k===-1)break;const C=m.indexOf(";",_),A=C===-1?j:C;if(k>A){_=m.lastIndexOf(";",k-1)+1;continue}const T=l(m,_,k),E=c(m,k,T),I=m.slice(T,E);if(b[I]===void 0){let $=l(m,k+1,A),U=c(m,A,$);const B=w(m.slice($,U));b[I]=B}_=A+1}while(_<j);return b}function l(m,x,b){do{const j=m.charCodeAt(x);if(j!==32&&j!==9)return x}while(++x<b);return b}function c(m,x,b){for(;x>b;){const j=m.charCodeAt(--x);if(j!==32&&j!==9)return x+1}return b}function u(m,x,b){const j=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(m))throw new TypeError(`argument name is invalid: ${m}`);const w=j(x);if(!e.test(w))throw new TypeError(`argument val is invalid: ${x}`);let _=m+"="+w;if(!b)return _;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);_+="; Max-Age="+b.maxAge}if(b.domain){if(!n.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);_+="; Domain="+b.domain}if(b.path){if(!a.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);_+="; Path="+b.path}if(b.expires){if(!p(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);_+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(_+="; HttpOnly"),b.secure&&(_+="; Secure"),b.partitioned&&(_+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return _}function h(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function p(m){return i.call(m)==="[object Date]"}return Yx}vK();var NI="popstate";function bK(t={}){function e(a,i){let{pathname:s,search:o,hash:l}=a.location;return vP("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){return typeof i=="string"?i:Rv(i)}return wK(e,n,null,t)}function Jr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jK(){return Math.random().toString(36).substring(2,10)}function SI(t,e){return{usr:t.state,key:t.key,idx:e}}function vP(t,e,n=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Bg(e):e,state:n,key:e&&e.key||a||jK()}}function Rv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Bg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function wK(t,e,n,a={}){let{window:i=document.defaultView,v5Compat:s=!1}=a,o=i.history,l="POP",c=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function p(){l="POP";let w=h(),_=w==null?null:w-u;u=w,c&&c({action:l,location:j.location,delta:_})}function m(w,_){l="PUSH";let k=vP(j.location,w,_);u=h()+1;let C=SI(k,u),A=j.createHref(k);try{o.pushState(C,"",A)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(A)}s&&c&&c({action:l,location:j.location,delta:1})}function x(w,_){l="REPLACE";let k=vP(j.location,w,_);u=h();let C=SI(k,u),A=j.createHref(k);o.replaceState(C,"",A),s&&c&&c({action:l,location:j.location,delta:0})}function b(w){return NK(w)}let j={get action(){return l},get location(){return t(i,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(NI,p),c=w,()=>{i.removeEventListener(NI,p),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let _=b(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:x,go(w){return o.go(w)}};return j}function NK(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Jr(n,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Rv(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function Pz(t,e,n="/"){return SK(t,e,n,!1)}function SK(t,e,n,a){let i=typeof e=="string"?Bg(e):e,s=$c(i.pathname||"/",n);if(s==null)return null;let o=Ez(t);_K(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=RK(s);l=MK(o[c],u,a)}return l}function Ez(t,e=[],n=[],a=""){let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Jr(c.relativePath.startsWith(a),`Absolute route path "${c.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(a.length));let u=Oc([a,c.relativePath]),h=n.concat(c);s.children&&s.children.length>0&&(Jr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Ez(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:DK(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of Dz(s.path))i(s,o,c)}),e}function Dz(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(a.length===0)return i?[s,""]:[s];let o=Dz(a.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function _K(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:OK(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var CK=/^:[\w-]+$/,kK=3,TK=2,AK=1,PK=10,EK=-2,_I=t=>t==="*";function DK(t,e){let n=t.split("/"),a=n.length;return n.some(_I)&&(a+=EK),e&&(a+=TK),n.filter(i=>!_I(i)).reduce((i,s)=>i+(CK.test(s)?kK:s===""?AK:PK),a)}function OK(t,e){return t.length===e.length&&t.slice(0,-1).every((a,i)=>a===e[i])?t[t.length-1]-e[e.length-1]:0}function MK(t,e,n=!1){let{routesMeta:a}=t,i={},s="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],u=l===a.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=xw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!p&&u&&n&&!a[a.length-1].route.index&&(p=xw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Oc([s,p.pathname]),pathnameBase:BK(Oc([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Oc([s,p.pathnameBase]))}return o}function xw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=IK(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:a.reduce((u,{paramName:h,isOptional:p},m)=>{if(h==="*"){let b=l[m]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[m];return p&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function IK(t,e=!1,n=!0){lo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function RK(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lo(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function $c(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function LK(t,e="/"){let{pathname:n,search:a="",hash:i=""}=typeof t=="string"?Bg(t):t;return{pathname:n?n.startsWith("/")?n:FK(n,e):e,search:zK(a),hash:qK(i)}}function FK(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function iC(t,e,n,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $K(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function VD(t){let e=$K(t);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function HD(t,e,n,a=!1){let i;typeof t=="string"?i=Bg(t):(i={...t},Jr(!i.pathname||!i.pathname.includes("?"),iC("?","pathname","search",i)),Jr(!i.pathname||!i.pathname.includes("#"),iC("#","pathname","hash",i)),Jr(!i.search||!i.search.includes("#"),iC("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!a&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=LK(i,l),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var Oc=t=>t.join("/").replace(/\/\/+/g,"/"),BK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Oz=["POST","PUT","PATCH","DELETE"];new Set(Oz);var VK=["GET",...Oz];new Set(VK);var zg=v.createContext(null);zg.displayName="DataRouter";var VN=v.createContext(null);VN.displayName="DataRouterState";var Mz=v.createContext({isTransitioning:!1});Mz.displayName="ViewTransition";var HK=v.createContext(new Map);HK.displayName="Fetchers";var GK=v.createContext(null);GK.displayName="Await";var Go=v.createContext(null);Go.displayName="Navigation";var Mb=v.createContext(null);Mb.displayName="Location";var Wo=v.createContext({outlet:null,matches:[],isDataRoute:!1});Wo.displayName="Route";var GD=v.createContext(null);GD.displayName="RouteError";function WK(t,{relative:e}={}){Jr(qg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=v.useContext(Go),{hash:i,pathname:s,search:o}=Ib(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Oc([n,s])),a.createHref({pathname:l,search:o,hash:i})}function qg(){return v.useContext(Mb)!=null}function Ur(){return Jr(qg(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Mb).location}var Iz="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rz(t){v.useContext(Go).static||v.useLayoutEffect(t)}function Mt(){let{isDataRoute:t}=v.useContext(Wo);return t?sY():KK()}function KK(){Jr(qg(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(zg),{basename:e,navigator:n}=v.useContext(Go),{matches:a}=v.useContext(Wo),{pathname:i}=Ur(),s=JSON.stringify(VD(a)),o=v.useRef(!1);return Rz(()=>{o.current=!0}),v.useCallback((c,u={})=>{if(lo(o.current,Iz),!o.current)return;if(typeof c=="number"){n.go(c);return}let h=HD(c,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Oc([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,s,i,t])}v.createContext(null);function Da(){let{matches:t}=v.useContext(Wo),e=t[t.length-1];return e?e.params:{}}function Ib(t,{relative:e}={}){let{matches:n}=v.useContext(Wo),{pathname:a}=Ur(),i=JSON.stringify(VD(n));return v.useMemo(()=>HD(t,JSON.parse(i),a,e==="path"),[t,i,a,e])}function YK(t,e){return Lz(t,e)}function Lz(t,e,n,a){var k;Jr(qg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=v.useContext(Go),{matches:o}=v.useContext(Wo),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";Fz(u,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=Ur(),x;if(e){let C=typeof e=="string"?Bg(e):e;Jr(h==="/"||((k=C.pathname)==null?void 0:k.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=m;let b=x.pathname||"/",j=b;if(h!=="/"){let C=h.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=!s&&n&&n.matches&&n.matches.length>0?n.matches:Pz(t,{pathname:j});lo(p||w!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),lo(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=eY(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Oc([h,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:Oc([h,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,a);return e&&_?v.createElement(Mb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function QK(){let t=iY(),e=UK(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}var XK=v.createElement(QK,null),JK=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Wo.Provider,{value:this.props.routeContext},v.createElement(GD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZK({routeContext:t,match:e,children:n}){let a=v.useContext(zg);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Wo.Provider,{value:t},n)}function eY(t,e=[],n=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Jr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:p}=n,m=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||m){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,h)=>{let p,m=!1,x=null,b=null;n&&(p=s&&u.route.id?s[u.route.id]:void 0,x=u.route.errorElement||XK,o&&(l<0&&h===0?(Fz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,b=null):l===h&&(m=!0,b=u.route.hydrateFallbackElement||null)));let j=e.concat(i.slice(0,h+1)),w=()=>{let _;return p?_=x:m?_=b:u.route.Component?_=v.createElement(u.route.Component,null):u.route.element?_=u.route.element:_=c,v.createElement(ZK,{match:u,routeContext:{outlet:c,matches:j,isDataRoute:n!=null},children:_})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?v.createElement(JK,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):w()},null)}function WD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tY(t){let e=v.useContext(zg);return Jr(e,WD(t)),e}function nY(t){let e=v.useContext(VN);return Jr(e,WD(t)),e}function rY(t){let e=v.useContext(Wo);return Jr(e,WD(t)),e}function KD(t){let e=rY(t),n=e.matches[e.matches.length-1];return Jr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function aY(){return KD("useRouteId")}function iY(){var a;let t=v.useContext(GD),e=nY("useRouteError"),n=KD("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[n]}function sY(){let{router:t}=tY("useNavigate"),e=KD("useNavigate"),n=v.useRef(!1);return Rz(()=>{n.current=!0}),v.useCallback(async(i,s={})=>{lo(n.current,Iz),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var CI={};function Fz(t,e,n){!e&&!CI[t]&&(CI[t]=!0,lo(!1,n))}v.memo(oY);function oY({routes:t,future:e,state:n}){return Lz(t,void 0,n,e)}function qt({to:t,replace:e,state:n,relative:a}){Jr(qg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=v.useContext(Go);lo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(Wo),{pathname:o}=Ur(),l=Mt(),c=HD(t,VD(s),o,a==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:a})},[l,u,a,e,n]),null}function gt(t){Jr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lY({basename:t="/",children:e=null,location:n,navigationType:a="POP",navigator:i,static:s=!1}){Jr(!qg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Bg(n));let{pathname:c="/",search:u="",hash:h="",state:p=null,key:m="default"}=n,x=v.useMemo(()=>{let b=$c(c,o);return b==null?null:{location:{pathname:b,search:u,hash:h,state:p,key:m},navigationType:a}},[o,c,u,h,p,m,a]);return lo(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(Go.Provider,{value:l},v.createElement(Mb.Provider,{children:e,value:x}))}function Om({children:t,location:e}){return YK(bP(t),e)}function bP(t,e=[]){let n=[];return v.Children.forEach(t,(a,i)=>{if(!v.isValidElement(a))return;let s=[...e,i];if(a.type===v.Fragment){n.push.apply(n,bP(a.props.children,s));return}Jr(a.type===gt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jr(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||s.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=bP(a.props.children,s)),n.push(o)}),n}var rw="get",aw="application/x-www-form-urlencoded";function HN(t){return t!=null&&typeof t.tagName=="string"}function cY(t){return HN(t)&&t.tagName.toLowerCase()==="button"}function uY(t){return HN(t)&&t.tagName.toLowerCase()==="form"}function dY(t){return HN(t)&&t.tagName.toLowerCase()==="input"}function hY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fY(t,e){return t.button===0&&(!e||e==="_self")&&!hY(t)}function jP(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let a=t[n];return e.concat(Array.isArray(a)?a.map(i=>[n,i]):[[n,a]])},[]))}function pY(t,e){let n=jP(t);return e&&e.forEach((a,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var b1=null;function mY(){if(b1===null)try{new FormData(document.createElement("form"),0),b1=!1}catch{b1=!0}return b1}var gY=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sC(t){return t!=null&&!gY.has(t)?(lo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${aw}"`),null):t}function yY(t,e){let n,a,i,s,o;if(uY(t)){let l=t.getAttribute("action");a=l?$c(l,e):null,n=t.getAttribute("method")||rw,i=sC(t.getAttribute("enctype"))||aw,s=new FormData(t)}else if(cY(t)||dY(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(a=c?$c(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||rw,i=sC(t.getAttribute("formenctype"))||sC(l.getAttribute("enctype"))||aw,s=new FormData(l,t),!mY()){let{name:u,type:h,value:p}=t;if(h==="image"){let m=u?`${u}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else u&&s.append(u,p)}}else{if(HN(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rw,a=null,i=aw,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:a,method:n.toLowerCase(),encType:i,formData:s,body:o}}function YD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function xY(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vY(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function bY(t,e,n){let a=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await xY(s,n);return o.links?o.links():[]}return[]}));return SY(a.flat(1).filter(vY).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function kI(t,e,n,a,i,s){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var h;return n[u].pathname!==c.pathname||((h=n[u].route.path)==null?void 0:h.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var p;let h=a.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function jY(t,e,{includeHydrateFallback:n}={}){return wY(t.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function wY(t){return[...new Set(t)]}function NY(t){let e={},n=Object.keys(t).sort();for(let a of n)e[a]=t[a];return e}function SY(t,e){let n=new Set;return new Set(e),t.reduce((a,i)=>{let s=JSON.stringify(NY(i));return n.has(s)||(n.add(s),a.push({key:s,link:i})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _Y=new Set([100,101,204,205]);function CY(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&$c(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function $z(){let t=v.useContext(zg);return YD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kY(){let t=v.useContext(VN);return YD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var QD=v.createContext(void 0);QD.displayName="FrameworkContext";function Bz(){let t=v.useContext(QD);return YD(t,"You must render this element inside a <HydratedRouter> element"),t}function TY(t,e){let n=v.useContext(QD),[a,i]=v.useState(!1),[s,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:p}=e,m=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let j=_=>{_.forEach(k=>{o(k.isIntersecting)})},w=new IntersectionObserver(j,{threshold:.5});return m.current&&w.observe(m.current),()=>{w.disconnect()}}},[t]),v.useEffect(()=>{if(a){let j=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(j)}}},[a]);let x=()=>{i(!0)},b=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:Qx(l,x),onBlur:Qx(c,b),onMouseEnter:Qx(u,x),onMouseLeave:Qx(h,b),onTouchStart:Qx(p,x)}]:[!1,m,{}]}function Qx(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function AY({page:t,...e}){let{router:n}=$z(),a=v.useMemo(()=>Pz(n.routes,t,n.basename),[n.routes,t,n.basename]);return a?v.createElement(EY,{page:t,matches:a,...e}):null}function PY(t){let{manifest:e,routeModules:n}=Bz(),[a,i]=v.useState([]);return v.useEffect(()=>{let s=!1;return bY(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),a}function EY({page:t,matches:e,...n}){let a=Ur(),{manifest:i,routeModules:s}=Bz(),{basename:o}=$z(),{loaderData:l,matches:c}=kY(),u=v.useMemo(()=>kI(t,e,c,i,a,"data"),[t,e,c,i,a]),h=v.useMemo(()=>kI(t,e,c,i,a,"assets"),[t,e,c,i,a]),p=v.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let b=new Set,j=!1;if(e.forEach(_=>{var C;let k=i.routes[_.route.id];!k||!k.hasLoader||(!u.some(A=>A.route.id===_.route.id)&&_.route.id in l&&((C=s[_.route.id])!=null&&C.shouldRevalidate)||k.hasClientLoader?j=!0:b.add(_.route.id))}),b.size===0)return[];let w=CY(t,o);return j&&b.size>0&&w.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[o,l,a,i,u,e,t,s]),m=v.useMemo(()=>jY(h,i),[h,i]),x=PY(h);return v.createElement(v.Fragment,null,p.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),m.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:j})=>v.createElement("link",{key:b,...j})))}function DY(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var zz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zz&&(window.__reactRouterVersion="7.6.0")}catch{}function OY({basename:t,children:e,window:n}){let a=v.useRef();a.current==null&&(a.current=bK({window:n,v5Compat:!0}));let i=a.current,[s,o]=v.useState({action:i.action,location:i.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>i.listen(l),[i,l]),v.createElement(lY,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var qz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lr=v.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:i,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:p,...m},x){let{basename:b}=v.useContext(Go),j=typeof u=="string"&&qz.test(u),w,_=!1;if(typeof u=="string"&&j&&(w=u,zz))try{let U=new URL(window.location.href),B=u.startsWith("//")?new URL(U.protocol+u):new URL(u),R=$c(B.pathname,b);B.origin===U.origin&&R!=null?u=R+B.search+B.hash:_=!0}catch{lo(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=WK(u,{relative:i}),[C,A,T]=TY(a,m),E=LY(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:p});function I(U){e&&e(U),U.defaultPrevented||E(U)}let $=v.createElement("a",{...m,...T,href:w||k,onClick:_||s?e:I,ref:DY(x,A),target:c,"data-discover":!j&&n==="render"?"true":void 0});return C&&!j?v.createElement(v.Fragment,null,$,v.createElement(AY,{page:k})):$});lr.displayName="Link";var MY=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:i=!1,style:s,to:o,viewTransition:l,children:c,...u},h){let p=Ib(o,{relative:u.relative}),m=Ur(),x=v.useContext(VN),{navigator:b,basename:j}=v.useContext(Go),w=x!=null&&qY(p)&&l===!0,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,k=m.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(k=k.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&j&&(C=$c(C,j)||C);const A=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=k===_||!i&&k.startsWith(_)&&k.charAt(A)==="/",E=C!=null&&(C===_||!i&&C.startsWith(_)&&C.charAt(_.length)==="/"),I={isActive:T,isPending:E,isTransitioning:w},$=T?e:void 0,U;typeof a=="function"?U=a(I):U=[a,T?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(I):s;return v.createElement(lr,{...u,"aria-current":$,className:U,ref:h,style:B,to:o,viewTransition:l},typeof c=="function"?c(I):c)});MY.displayName="NavLink";var IY=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:i,state:s,method:o=rw,action:l,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:p,...m},x)=>{let b=BY(),j=zY(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&qz.test(l),k=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let A=C.nativeEvent.submitter,T=(A==null?void 0:A.getAttribute("formmethod"))||o;b(A||C.currentTarget,{fetcherKey:e,method:T,navigate:n,replace:i,state:s,relative:u,preventScrollReset:h,viewTransition:p})};return v.createElement("form",{ref:x,method:w,action:j,onSubmit:a?c:k,...m,"data-discover":!_&&t==="render"?"true":void 0})});IY.displayName="Form";function RY(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Uz(t){let e=v.useContext(zg);return Jr(e,RY(t)),e}function LY(t,{target:e,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=Mt(),c=Ur(),u=Ib(t,{relative:s});return v.useCallback(h=>{if(fY(h,e)){h.preventDefault();let p=n!==void 0?n:Rv(c)===Rv(u);l(t,{replace:p,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,u,n,a,e,t,i,s,o])}function Vz(t){lo(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(jP(t)),n=v.useRef(!1),a=Ur(),i=v.useMemo(()=>pY(a.search,n.current?null:e.current),[a.search]),s=Mt(),o=v.useCallback((l,c)=>{const u=jP(typeof l=="function"?l(i):l);n.current=!0,s("?"+u,c)},[s,i]);return[i,o]}var FY=0,$Y=()=>`__${String(++FY)}__`;function BY(){let{router:t}=Uz("useSubmit"),{basename:e}=v.useContext(Go),n=aY();return v.useCallback(async(a,i={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=yY(a,e);if(i.navigate===!1){let h=i.fetcherKey||$Y();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function zY(t,{relative:e}={}){let{basename:n}=v.useContext(Go),a=v.useContext(Wo);Jr(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),s={...Ib(t||".",{relative:e})},o=Ur();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let h=l.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Oc([n,s.pathname])),Rv(s)}function qY(t,e={}){let n=v.useContext(Mz);Jr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Uz("useViewTransitionState"),i=Ib(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=$c(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=$c(n.nextLocation.pathname,a)||n.nextLocation.pathname;return xw(i.pathname,o)!=null||xw(i.pathname,s)!=null}[..._Y];var XD=yz();class UY extends v.Component{constructor(){super(...arguments);Nr(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){console.error("Uncaught error:",n,a)}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const Hz=v.createContext(void 0),VY=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState({startDate:null,endDate:null}),[s,o]=v.useState(null),[l,c]=v.useState(null),[u,h]=v.useState(null),p=v.useCallback(()=>n(!0),[]),m=v.useCallback(()=>n(!1),[]),x=v.useCallback(()=>n(A=>!A),[]),b=v.useCallback(A=>{h(()=>A)},[]),j=v.useCallback(A=>{u?u(A):console.warn("Analysis navigator not registered")},[u]),[w,_]=v.useState(null),k=v.useCallback(A=>{_(()=>A)},[]),C=v.useCallback(async()=>w?await w():(console.warn("Analysis refresher not registered"),null),[w]);return r.jsx(Hz.Provider,{value:{isOpen:e,openAssistant:p,closeAssistant:m,toggleAssistant:x,analysisDateRange:a,setAnalysisDateRange:i,analysisData:s,setAnalysisData:o,analysisNavigate:j,registerAnalysisNavigator:b,refreshAnalysis:C,registerAnalysisRefresher:k,pageContext:l,setPageContext:c},children:t})},GN=()=>{const t=v.useContext(Hz);if(t===void 0)throw new Error("useClinicAssistantContext must be used within a ClinicAssistantProvider");return t},Gz=v.createContext(void 0),HY=({children:t})=>{const[e,n]=v.useState([]),[a,i]=v.useState(null),[s,o]=v.useState(""),[l,c]=v.useState(0),[u,h]=v.useState([]),p=v.useCallback(j=>{n(w=>[...w,j])},[]),m=v.useCallback((j,w)=>{n(_=>_.map(k=>k.id===j?{...k,...w}:k))},[]),x=v.useCallback(j=>{n(w=>w.filter(_=>_.id!==j))},[]),b=v.useCallback(()=>{n([]),i(null),o(""),c(0),h([])},[]);return r.jsx(Gz.Provider,{value:{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:u,setDistributors:h,addPurchaseRow:p,updatePurchaseRow:m,removePurchaseRow:x,resetPurchase:b},children:t})},Wz=()=>{const t=v.useContext(Gz);if(!t)throw new Error("usePurchaseContext must be used within a PurchaseProvider");return t},Kz=v.createContext(void 0),GY=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(""),s=v.useCallback(()=>n(!0),[]),o=v.useCallback(()=>n(!1),[]),l=v.useCallback(()=>n(c=>!c),[]);return v.useEffect(()=>{const c=u=>{(u.ctrlKey||u.metaKey)&&u.key==="k"&&(u.preventDefault(),l()),u.key==="Escape"&&e&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,l,o]),r.jsx(Kz.Provider,{value:{isOpen:e,openCommandBar:s,closeCommandBar:o,toggleCommandBar:l,preFilledQuery:a,setPreFilledQuery:i},children:t})},Bc=()=>{const t=v.useContext(Kz);if(t===void 0)throw new Error("useCommandBar must be used within a CommandBarProvider");return t};function zc(t){return Array.isArray?Array.isArray(t):Xz(t)==="[object Array]"}function WY(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function KY(t){return t==null?"":WY(t)}function Ml(t){return typeof t=="string"}function Yz(t){return typeof t=="number"}function YY(t){return t===!0||t===!1||QY(t)&&Xz(t)=="[object Boolean]"}function Qz(t){return typeof t=="object"}function QY(t){return Qz(t)&&t!==null}function Ds(t){return t!=null}function oC(t){return!t.trim().length}function Xz(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const XY="Incorrect 'index' type",JY=t=>`Invalid value for key ${t}`,ZY=t=>`Pattern length exceeds max of ${t}.`,eQ=t=>`Missing ${t} property in key`,tQ=t=>`Property 'weight' in key '${t}' must be a positive integer`,TI=Object.prototype.hasOwnProperty;class nQ{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(a=>{let i=Jz(a);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(a=>{a.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Jz(t){let e=null,n=null,a=null,i=1,s=null;if(Ml(t)||zc(t))a=t,e=AI(t),n=wP(t);else{if(!TI.call(t,"name"))throw new Error(eQ("name"));const o=t.name;if(a=o,TI.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(tQ(o));e=AI(o),n=wP(o),s=t.getFn}return{path:e,id:n,weight:i,src:a,getFn:s}}function AI(t){return zc(t)?t:t.split(".")}function wP(t){return zc(t)?t.join("."):t}function rQ(t,e){let n=[],a=!1;const i=(s,o,l)=>{if(Ds(s))if(!o[l])n.push(s);else{let c=o[l];const u=s[c];if(!Ds(u))return;if(l===o.length-1&&(Ml(u)||Yz(u)||YY(u)))n.push(KY(u));else if(zc(u)){a=!0;for(let h=0,p=u.length;h<p;h+=1)i(u[h],o,l+1)}else o.length&&i(u,o,l+1)}};return i(t,Ml(e)?e.split("."):e,0),a?n:n[0]}const aQ={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},iQ={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},sQ={location:0,threshold:.6,distance:100},oQ={useExtendedSearch:!1,getFn:rQ,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var cn={...iQ,...aQ,...sQ,...oQ};const lQ=/[^ ]+/g;function cQ(t=1,e=3){const n=new Map,a=Math.pow(10,e);return{get(i){const s=i.match(lQ).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),l=parseFloat(Math.round(o*a)/a);return n.set(s,l),l},clear(){n.clear()}}}class JD{constructor({getFn:e=cn.getFn,fieldNormWeight:n=cn.fieldNormWeight}={}){this.norm=cQ(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,a)=>{this._keysMap[n.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ml(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Ml(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,a=this.size();n<a;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Ds(e)||oC(e))return;let a={v:e,i:n,n:this.norm.get(e)};this.records.push(a)}_addObject(e,n){let a={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(Ds(o)){if(zc(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:h}=c.pop();if(Ds(h))if(Ml(h)&&!oC(h)){let p={v:h,i:u,n:this.norm.get(h)};l.push(p)}else zc(h)&&h.forEach((p,m)=>{c.push({nestedArrIndex:m,value:p})})}a.$[s]=l}else if(Ml(o)&&!oC(o)){let l={v:o,n:this.norm.get(o)};a.$[s]=l}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function Zz(t,e,{getFn:n=cn.getFn,fieldNormWeight:a=cn.fieldNormWeight}={}){const i=new JD({getFn:n,fieldNormWeight:a});return i.setKeys(t.map(Jz)),i.setSources(e),i.create(),i}function uQ(t,{getFn:e=cn.getFn,fieldNormWeight:n=cn.fieldNormWeight}={}){const{keys:a,records:i}=t,s=new JD({getFn:e,fieldNormWeight:n});return s.setKeys(a),s.setIndexRecords(i),s}function j1(t,{errors:e=0,currentLocation:n=0,expectedLocation:a=0,distance:i=cn.distance,ignoreLocation:s=cn.ignoreLocation}={}){const o=e/t.length;if(s)return o;const l=Math.abs(a-n);return i?o+l/i:l?1:o}function dQ(t=[],e=cn.minMatchCharLength){let n=[],a=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let l=t[s];l&&a===-1?a=s:!l&&a!==-1&&(i=s-1,i-a+1>=e&&n.push([a,i]),a=-1)}return t[s-1]&&s-a>=e&&n.push([a,s-1]),n}const ef=32;function hQ(t,e,n,{location:a=cn.location,distance:i=cn.distance,threshold:s=cn.threshold,findAllMatches:o=cn.findAllMatches,minMatchCharLength:l=cn.minMatchCharLength,includeMatches:c=cn.includeMatches,ignoreLocation:u=cn.ignoreLocation}={}){if(e.length>ef)throw new Error(ZY(ef));const h=e.length,p=t.length,m=Math.max(0,Math.min(a,p));let x=s,b=m;const j=l>1||c,w=j?Array(p):[];let _;for(;(_=t.indexOf(e,b))>-1;){let I=j1(e,{currentLocation:_,expectedLocation:m,distance:i,ignoreLocation:u});if(x=Math.min(I,x),b=_+h,j){let $=0;for(;$<h;)w[_+$]=1,$+=1}}b=-1;let k=[],C=1,A=h+p;const T=1<<h-1;for(let I=0;I<h;I+=1){let $=0,U=A;for(;$<U;)j1(e,{errors:I,currentLocation:m+U,expectedLocation:m,distance:i,ignoreLocation:u})<=x?$=U:A=U,U=Math.floor((A-$)/2+$);A=U;let B=Math.max(1,m-U+1),R=o?p:Math.min(m+U,p)+h,z=Array(R+2);z[R+1]=(1<<I)-1;for(let K=R;K>=B;K-=1){let Y=K-1,q=n[t.charAt(Y)];if(j&&(w[Y]=+!!q),z[K]=(z[K+1]<<1|1)&q,I&&(z[K]|=(k[K+1]|k[K])<<1|1|k[K+1]),z[K]&T&&(C=j1(e,{errors:I,currentLocation:Y,expectedLocation:m,distance:i,ignoreLocation:u}),C<=x)){if(x=C,b=Y,b<=m)break;B=Math.max(1,2*m-b)}}if(j1(e,{errors:I+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:u})>x)break;k=z}const E={isMatch:b>=0,score:Math.max(.001,C)};if(j){const I=dQ(w,l);I.length?c&&(E.indices=I):E.isMatch=!1}return E}function fQ(t){let e={};for(let n=0,a=t.length;n<a;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<a-n-1}return e}const vw=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class eq{constructor(e,{location:n=cn.location,threshold:a=cn.threshold,distance:i=cn.distance,includeMatches:s=cn.includeMatches,findAllMatches:o=cn.findAllMatches,minMatchCharLength:l=cn.minMatchCharLength,isCaseSensitive:c=cn.isCaseSensitive,ignoreDiacritics:u=cn.ignoreDiacritics,ignoreLocation:h=cn.ignoreLocation}={}){if(this.options={location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:h},e=c?e:e.toLowerCase(),e=u?vw(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(x,b)=>{this.chunks.push({pattern:x,alphabet:fQ(x),startIndex:b})},m=this.pattern.length;if(m>ef){let x=0;const b=m%ef,j=m-b;for(;x<j;)p(this.pattern.substr(x,ef),x),x+=ef;if(b){const w=m-ef;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=a?vw(e):e,this.pattern===e){let j={isMatch:!0,score:0};return i&&(j.indices=[[0,e.length-1]]),j}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:h}=this.options;let p=[],m=0,x=!1;this.chunks.forEach(({pattern:j,alphabet:w,startIndex:_})=>{const{isMatch:k,score:C,indices:A}=hQ(e,j,w,{location:s+_,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:i,ignoreLocation:h});k&&(x=!0),m+=C,k&&A&&(p=[...p,...A])});let b={isMatch:x,score:x?m/this.chunks.length:1};return x&&i&&(b.indices=p),b}}class bd{constructor(e){this.pattern=e}static isMultiMatch(e){return PI(e,this.multiRegex)}static isSingleMatch(e){return PI(e,this.singleRegex)}search(){}}function PI(t,e){const n=t.match(e);return n?n[1]:null}class pQ extends bd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class mQ extends bd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const a=e.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class gQ extends bd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class yQ extends bd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class xQ extends bd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class vQ extends bd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class tq extends bd{constructor(e,{location:n=cn.location,threshold:a=cn.threshold,distance:i=cn.distance,includeMatches:s=cn.includeMatches,findAllMatches:o=cn.findAllMatches,minMatchCharLength:l=cn.minMatchCharLength,isCaseSensitive:c=cn.isCaseSensitive,ignoreDiacritics:u=cn.ignoreDiacritics,ignoreLocation:h=cn.ignoreLocation}={}){super(e),this._bitapSearch=new eq(e,{location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class nq extends bd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,a;const i=[],s=this.pattern.length;for(;(a=e.indexOf(this.pattern,n))>-1;)n=a+s,i.push([a,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const NP=[pQ,nq,gQ,yQ,vQ,xQ,mQ,tq],EI=NP.length,bQ=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,jQ="|";function wQ(t,e={}){return t.split(jQ).map(n=>{let a=n.trim().split(bQ).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=a.length;s<o;s+=1){const l=a[s];let c=!1,u=-1;for(;!c&&++u<EI;){const h=NP[u];let p=h.isMultiMatch(l);p&&(i.push(new h(p,e)),c=!0)}if(!c)for(u=-1;++u<EI;){const h=NP[u];let p=h.isSingleMatch(l);if(p){i.push(new h(p,e));break}}}return i})}const NQ=new Set([tq.type,nq.type]);class SQ{constructor(e,{isCaseSensitive:n=cn.isCaseSensitive,ignoreDiacritics:a=cn.ignoreDiacritics,includeMatches:i=cn.includeMatches,minMatchCharLength:s=cn.minMatchCharLength,ignoreLocation:o=cn.ignoreLocation,findAllMatches:l=cn.findAllMatches,location:c=cn.location,threshold:u=cn.threshold,distance:h=cn.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:u,distance:h},e=n?e:e.toLowerCase(),e=a?vw(e):e,this.pattern=e,this.query=wQ(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:i,ignoreDiacritics:s}=this.options;e=i?e:e.toLowerCase(),e=s?vw(e):e;let o=0,l=[],c=0;for(let u=0,h=n.length;u<h;u+=1){const p=n[u];l.length=0,o=0;for(let m=0,x=p.length;m<x;m+=1){const b=p[m],{isMatch:j,indices:w,score:_}=b.search(e);if(j){if(o+=1,c+=_,a){const k=b.constructor.type;NQ.has(k)?l=[...l,...w]:l.push(w)}}else{c=0,o=0,l.length=0;break}}if(o){let m={isMatch:!0,score:c/o};return a&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const SP=[];function _Q(...t){SP.push(...t)}function _P(t,e){for(let n=0,a=SP.length;n<a;n+=1){let i=SP[n];if(i.condition(t,e))return new i(t,e)}return new eq(t,e)}const bw={AND:"$and",OR:"$or"},CP={PATH:"$path",PATTERN:"$val"},kP=t=>!!(t[bw.AND]||t[bw.OR]),CQ=t=>!!t[CP.PATH],kQ=t=>!zc(t)&&Qz(t)&&!kP(t),DI=t=>({[bw.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function rq(t,e,{auto:n=!0}={}){const a=i=>{let s=Object.keys(i);const o=CQ(i);if(!o&&s.length>1&&!kP(i))return a(DI(i));if(kQ(i)){const c=o?i[CP.PATH]:s[0],u=o?i[CP.PATTERN]:i[c];if(!Ml(u))throw new Error(JY(c));const h={keyId:wP(c),pattern:u};return n&&(h.searcher=_P(u,e)),h}let l={children:[],operator:s[0]};return s.forEach(c=>{const u=i[c];zc(u)&&u.forEach(h=>{l.children.push(a(h))})}),l};return kP(t)||(t=DI(t)),a(t)}function TQ(t,{ignoreFieldNorm:e=cn.ignoreFieldNorm}){t.forEach(n=>{let a=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;a*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:s))}),n.score=a})}function AQ(t,e){const n=t.matches;e.matches=[],Ds(n)&&n.forEach(a=>{if(!Ds(a.indices)||!a.indices.length)return;const{indices:i,value:s}=a;let o={indices:i,value:s};a.key&&(o.key=a.key.src),a.idx>-1&&(o.refIndex=a.idx),e.matches.push(o)})}function PQ(t,e){e.score=t.score}function EQ(t,e,{includeMatches:n=cn.includeMatches,includeScore:a=cn.includeScore}={}){const i=[];return n&&i.push(AQ),a&&i.push(PQ),t.map(s=>{const{idx:o}=s,l={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(s,l)}),l})}class ho{constructor(e,n={},a){this.options={...cn,...n},this.options.useExtendedSearch,this._keyStore=new nQ(this.options.keys),this.setCollection(e,a)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof JD))throw new Error(XY);this._myIndex=n||Zz(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Ds(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let a=0,i=this._docs.length;a<i;a+=1){const s=this._docs[a];e(s,a)&&(this.removeAt(a),a-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:a,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=Ml(e)?Ml(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return TQ(c,{ignoreFieldNorm:l}),s&&c.sort(o),Yz(n)&&n>-1&&(c=c.slice(0,n)),EQ(c,this._docs,{includeMatches:a,includeScore:i})}_searchStringList(e){const n=_P(e,this.options),{records:a}=this._myIndex,i=[];return a.forEach(({v:s,i:o,n:l})=>{if(!Ds(s))return;const{isMatch:c,score:u,indices:h}=n.searchIn(s);c&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:l,indices:h}]})}),i}_searchLogical(e){const n=rq(e,this.options),a=(l,c,u)=>{if(!l.children){const{keyId:p,searcher:m}=l,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:m});return x&&x.length?[{idx:u,item:c,matches:x}]:[]}const h=[];for(let p=0,m=l.children.length;p<m;p+=1){const x=l.children[p],b=a(x,c,u);if(b.length)h.push(...b);else if(l.operator===bw.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:c})=>{if(Ds(l)){let u=a(n,l,c);u.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),u.forEach(({matches:h})=>{s[c].matches.push(...h)}))}}),o}_searchObjectList(e){const n=_P(e,this.options),{keys:a,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!Ds(o))return;let c=[];a.forEach((u,h)=>{c.push(...this._findMatches({key:u,value:o[h],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:e,value:n,searcher:a}){if(!Ds(n))return[];let i=[];if(zc(n))n.forEach(({v:s,i:o,n:l})=>{if(!Ds(s))return;const{isMatch:c,score:u,indices:h}=a.searchIn(s);c&&i.push({score:u,key:e,value:s,idx:o,norm:l,indices:h})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:u}=a.searchIn(s);l&&i.push({score:c,key:e,value:s,norm:o,indices:u})}return i}}ho.version="7.1.0";ho.createIndex=Zz;ho.parseIndex=uQ;ho.config=cn;ho.parseQuery=rq;_Q(SQ);var lC,OI;function DQ(){if(OI)return lC;OI=1;var t="Expected a function",e=NaN,n="[object Symbol]",a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof io=="object"&&io&&io.Object===Object&&io,u=typeof self=="object"&&self&&self.Object===Object&&self,h=c||u||Function("return this")(),p=Object.prototype,m=p.toString,x=Math.max,b=Math.min,j=function(){return h.Date.now()};function w(T,E,I){var $,U,B,R,z,G,K=0,Y=!1,q=!1,V=!0;if(typeof T!="function")throw new TypeError(t);E=A(E)||0,_(I)&&(Y=!!I.leading,q="maxWait"in I,B=q?x(A(I.maxWait)||0,E):B,V="trailing"in I?!!I.trailing:V);function H(Fe){var le=$,_e=U;return $=U=void 0,K=Fe,R=T.apply(_e,le),R}function Q(Fe){return K=Fe,z=setTimeout(me,E),Y?H(Fe):R}function L(Fe){var le=Fe-G,_e=Fe-K,Ve=E-le;return q?b(Ve,B-_e):Ve}function te(Fe){var le=Fe-G,_e=Fe-K;return G===void 0||le>=E||le<0||q&&_e>=B}function me(){var Fe=j();if(te(Fe))return X(Fe);z=setTimeout(me,L(Fe))}function X(Fe){return z=void 0,V&&$?H(Fe):($=U=void 0,R)}function Re(){z!==void 0&&clearTimeout(z),K=0,$=G=U=z=void 0}function Se(){return z===void 0?R:X(j())}function Ee(){var Fe=j(),le=te(Fe);if($=arguments,U=this,G=Fe,le){if(z===void 0)return Q(G);if(q)return z=setTimeout(me,E),H(G)}return z===void 0&&(z=setTimeout(me,E)),R}return Ee.cancel=Re,Ee.flush=Se,Ee}function _(T){var E=typeof T;return!!T&&(E=="object"||E=="function")}function k(T){return!!T&&typeof T=="object"}function C(T){return typeof T=="symbol"||k(T)&&m.call(T)==n}function A(T){if(typeof T=="number")return T;if(C(T))return e;if(_(T)){var E=typeof T.valueOf=="function"?T.valueOf():T;T=_(E)?E+"":E}if(typeof T!="string")return T===0?T:+T;T=T.replace(a,"");var I=s.test(T);return I||o.test(T)?l(T.slice(2),I?2:8):i.test(T)?e:+T}return lC=w,lC}var OQ=DQ();const ql=Kn(OQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),MI=t=>{const e=IQ(t);return e.charAt(0).toUpperCase()+e.slice(1)},aq=(...t)=>t.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:s,iconNode:o,...l},c)=>v.createElement("svg",{ref:c,...RQ,width:e,height:e,stroke:t,strokeWidth:a?Number(n)*24/Number(e):n,className:aq("lucide",i),...l},[...o.map(([u,h])=>v.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=(t,e)=>{const n=v.forwardRef(({className:a,...i},s)=>v.createElement(LQ,{ref:s,iconNode:e,className:aq(`lucide-${MQ(MI(t))}`,`lucide-${t}`,a),...i}));return n.displayName=MI(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],El=ct("activity",FQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],iq=ct("align-justify",$Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],II=ct("arrow-down",BQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],en=ct("arrow-left",zQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],UQ=ct("arrow-right",qQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],TP=ct("arrow-up",VQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],GQ=ct("beaker",HQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],KQ=ct("bed-double",WQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],QQ=ct("bed",YQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],JQ=ct("bell",XQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],RI=ct("book-open",ZQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Cf=ct("bot",eX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],nX=ct("brain-circuit",tX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],ZD=ct("brain",rX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],iX=ct("briefcase-medical",aX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],oX=ct("building",sX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],LI=ct("calendar-check-2",lX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],WN=ct("calendar-days",cX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qr=ct("calendar",uX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],AP=ct("camera",dX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],PP=ct("chart-pie",hX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Is=ct("check",fX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sq=ct("chevron-down",pX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Bf=ct("chevron-left",mX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Vl=ct("chevron-right",gX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xX=ct("chevron-up",yX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zr=ct("circle-alert",vX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ko=ct("circle-check-big",bX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Cl=ct("circle-check",jX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],w1=ct("circle-help",wX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],FI=ct("circle-minus",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],cs=ct("circle-plus",SX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],CX=ct("circle-user",_X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],sg=ct("clipboard-list",kX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Nv=ct("clipboard",TX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ug=ct("clock",AX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],EX=ct("command",PX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$I=ct("copy",DX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Sv=ct("credit-card",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],pd=ct("dollar-sign",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],RX=ct("download",IX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qm=ct("eye",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],$X=ct("file-check",FX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ar=ct("file-text",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],rf=ct("file",zX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],oq=ct("film",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],hs=ct("flask-conical",UX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Lv=ct("funnel",VX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],EP=ct("globe",HX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],kf=ct("grid-3x3",GX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],za=ct("hash",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],YX=ct("heart-pulse",KX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],XX=ct("heart",QX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],BI=ct("history",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],DP=ct("house",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],jw=ct("image",eJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Il=ct("info",tJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],eO=ct("key",nJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],og=ct("layout-dashboard",rJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],lq=ct("layout-grid",aJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],zI=ct("lightbulb",iJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sJ=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],cq=ct("link",sJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Rb=ct("list",oJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],co=ct("loader-circle",lJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],uJ=ct("loader",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hJ=ct("lock",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],uq=ct("log-out",fJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],qI=ct("mail",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],tO=ct("map-pin",mJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],dq=ct("maximize-2",gJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],cC=ct("message-circle",yJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],vJ=ct("mic-off",xJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],KN=ct("mic",bJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],wJ=ct("minimize-2",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],SJ=ct("monitor",NJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],hq=ct("music",_J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],UI=ct("package-open",CJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],md=ct("package",kJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],AJ=ct("palette",TJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],VI=ct("panels-top-left",PJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],nO=ct("paperclip",EJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],OJ=ct("pause",DJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ms=ct("pen",MJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],RJ=ct("percent",IJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Fv=ct("phone",LJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],oo=ct("pill",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],fq=ct("play",$J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ln=ct("plus",BJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Tf=ct("printer",zJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],OP=ct("refresh-cw",qJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],HI=ct("rocket",UJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],HJ=ct("rotate-ccw",VJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],pq=ct("rotate-cw",GJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qi=ct("save",WJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],fn=ct("search",KJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Lb=ct("send",YJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],GI=ct("server-crash",QJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gd=ct("settings",XJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],mq=ct("share-2",JJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],eZ=ct("shield-check",ZJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],lg=ct("shield",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],MP=ct("shopping-cart",nZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],iw=ct("smile",rZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ww=ct("sparkles",aZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Uo=ct("split",iZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ui=ct("square-pen",sZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],lZ=ct("square",oZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],WI=ct("star",cZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Af=ct("stethoscope",uZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Fb=ct("table",dZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],fZ=ct("tag",hZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],mZ=ct("target",pZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zn=ct("trash-2",gZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],xZ=ct("trending-up",yZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bZ=ct("triangle-alert",vZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],rO=ct("truck",jZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],$v=ct("upload",wZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],gq=ct("user-check",NZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],vf=ct("user-plus",SZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qn=ct("user",_Z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],zi=ct("users",CZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],TZ=ct("video",kZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AZ=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Nw=ct("wallet",AZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ot=ct("x",PZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],KI=ct("zap",EZ);function DZ(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const OZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,MZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,IZ={};function YI(t,e){return(IZ.jsx?MZ:OZ).test(t)}const RZ=/[ \t\n\f\r]/g;function LZ(t){return typeof t=="object"?t.type==="text"?QI(t.value):!1:QI(t)}function QI(t){return t.replace(RZ,"")===""}class $b{constructor(e,n,a){this.normal=n,this.property=e,a&&(this.space=a)}}$b.prototype.normal={};$b.prototype.property={};$b.prototype.space=void 0;function yq(t,e){const n={},a={};for(const i of t)Object.assign(n,i.property),Object.assign(a,i.normal);return new $b(n,a,e)}function IP(t){return t.toLowerCase()}class ms{constructor(e,n){this.attribute=n,this.property=e}}ms.prototype.attribute="";ms.prototype.booleanish=!1;ms.prototype.boolean=!1;ms.prototype.commaOrSpaceSeparated=!1;ms.prototype.commaSeparated=!1;ms.prototype.defined=!1;ms.prototype.mustUseProperty=!1;ms.prototype.number=!1;ms.prototype.overloadedBoolean=!1;ms.prototype.property="";ms.prototype.spaceSeparated=!1;ms.prototype.space=void 0;let FZ=0;const vn=zf(),ba=zf(),xq=zf(),_t=zf(),Lr=zf(),Um=zf(),Ts=zf();function zf(){return 2**++FZ}const RP=Object.freeze(Object.defineProperty({__proto__:null,boolean:vn,booleanish:ba,commaOrSpaceSeparated:Ts,commaSeparated:Um,number:_t,overloadedBoolean:xq,spaceSeparated:Lr},Symbol.toStringTag,{value:"Module"})),uC=Object.keys(RP);class aO extends ms{constructor(e,n,a,i){let s=-1;if(super(e,n),XI(this,"space",i),typeof a=="number")for(;++s<uC.length;){const o=uC[s];XI(this,uC[s],(a&RP[o])===RP[o])}}}aO.prototype.defined=!0;function XI(t,e,n){n&&(t[e]=n)}function Vg(t){const e={},n={};for(const[a,i]of Object.entries(t.properties)){const s=new aO(a,t.transform(t.attributes||{},a),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),e[a]=s,n[IP(a)]=a,n[IP(s.attribute)]=a}return new $b(e,n,t.space)}const vq=Vg({properties:{ariaActiveDescendant:null,ariaAtomic:ba,ariaAutoComplete:null,ariaBusy:ba,ariaChecked:ba,ariaColCount:_t,ariaColIndex:_t,ariaColSpan:_t,ariaControls:Lr,ariaCurrent:null,ariaDescribedBy:Lr,ariaDetails:null,ariaDisabled:ba,ariaDropEffect:Lr,ariaErrorMessage:null,ariaExpanded:ba,ariaFlowTo:Lr,ariaGrabbed:ba,ariaHasPopup:null,ariaHidden:ba,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Lr,ariaLevel:_t,ariaLive:null,ariaModal:ba,ariaMultiLine:ba,ariaMultiSelectable:ba,ariaOrientation:null,ariaOwns:Lr,ariaPlaceholder:null,ariaPosInSet:_t,ariaPressed:ba,ariaReadOnly:ba,ariaRelevant:null,ariaRequired:ba,ariaRoleDescription:Lr,ariaRowCount:_t,ariaRowIndex:_t,ariaRowSpan:_t,ariaSelected:ba,ariaSetSize:_t,ariaSort:null,ariaValueMax:_t,ariaValueMin:_t,ariaValueNow:_t,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function bq(t,e){return e in t?t[e]:e}function jq(t,e){return bq(t,e.toLowerCase())}const $Z=Vg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Um,acceptCharset:Lr,accessKey:Lr,action:null,allow:null,allowFullScreen:vn,allowPaymentRequest:vn,allowUserMedia:vn,alt:null,as:null,async:vn,autoCapitalize:null,autoComplete:Lr,autoFocus:vn,autoPlay:vn,blocking:Lr,capture:null,charSet:null,checked:vn,cite:null,className:Lr,cols:_t,colSpan:null,content:null,contentEditable:ba,controls:vn,controlsList:Lr,coords:_t|Um,crossOrigin:null,data:null,dateTime:null,decoding:null,default:vn,defer:vn,dir:null,dirName:null,disabled:vn,download:xq,draggable:ba,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:vn,formTarget:null,headers:Lr,height:_t,hidden:vn,high:_t,href:null,hrefLang:null,htmlFor:Lr,httpEquiv:Lr,id:null,imageSizes:null,imageSrcSet:null,inert:vn,inputMode:null,integrity:null,is:null,isMap:vn,itemId:null,itemProp:Lr,itemRef:Lr,itemScope:vn,itemType:Lr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:vn,low:_t,manifest:null,max:null,maxLength:_t,media:null,method:null,min:null,minLength:_t,multiple:vn,muted:vn,name:null,nonce:null,noModule:vn,noValidate:vn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:vn,optimum:_t,pattern:null,ping:Lr,placeholder:null,playsInline:vn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:vn,referrerPolicy:null,rel:Lr,required:vn,reversed:vn,rows:_t,rowSpan:_t,sandbox:Lr,scope:null,scoped:vn,seamless:vn,selected:vn,shadowRootClonable:vn,shadowRootDelegatesFocus:vn,shadowRootMode:null,shape:null,size:_t,sizes:null,slot:null,span:_t,spellCheck:ba,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_t,step:null,style:null,tabIndex:_t,target:null,title:null,translate:null,type:null,typeMustMatch:vn,useMap:null,value:ba,width:_t,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Lr,axis:null,background:null,bgColor:null,border:_t,borderColor:null,bottomMargin:_t,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:vn,declare:vn,event:null,face:null,frame:null,frameBorder:null,hSpace:_t,leftMargin:_t,link:null,longDesc:null,lowSrc:null,marginHeight:_t,marginWidth:_t,noResize:vn,noHref:vn,noShade:vn,noWrap:vn,object:null,profile:null,prompt:null,rev:null,rightMargin:_t,rules:null,scheme:null,scrolling:ba,standby:null,summary:null,text:null,topMargin:_t,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_t,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:vn,disableRemotePlayback:vn,prefix:null,property:null,results:_t,security:null,unselectable:null},space:"html",transform:jq}),BZ=Vg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ts,accentHeight:_t,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_t,amplitude:_t,arabicForm:null,ascent:_t,attributeName:null,attributeType:null,azimuth:_t,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_t,by:null,calcMode:null,capHeight:_t,className:Lr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_t,diffuseConstant:_t,direction:null,display:null,dur:null,divisor:_t,dominantBaseline:null,download:vn,dx:null,dy:null,edgeMode:null,editable:null,elevation:_t,enableBackground:null,end:null,event:null,exponent:_t,externalResourcesRequired:null,fill:null,fillOpacity:_t,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Um,g2:Um,glyphName:Um,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_t,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_t,horizOriginX:_t,horizOriginY:_t,id:null,ideographic:_t,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_t,k:_t,k1:_t,k2:_t,k3:_t,k4:_t,kernelMatrix:Ts,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_t,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_t,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_t,overlineThickness:_t,paintOrder:null,panose1:null,path:null,pathLength:_t,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Lr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_t,pointsAtY:_t,pointsAtZ:_t,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ts,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ts,rev:Ts,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ts,requiredFeatures:Ts,requiredFonts:Ts,requiredFormats:Ts,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_t,specularExponent:_t,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_t,strikethroughThickness:_t,string:null,stroke:null,strokeDashArray:Ts,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_t,strokeOpacity:_t,strokeWidth:null,style:null,surfaceScale:_t,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ts,tabIndex:_t,tableValues:null,target:null,targetX:_t,targetY:_t,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ts,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_t,underlineThickness:_t,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_t,values:null,vAlphabetic:_t,vMathematical:_t,vectorEffect:null,vHanging:_t,vIdeographic:_t,version:null,vertAdvY:_t,vertOriginX:_t,vertOriginY:_t,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_t,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:bq}),wq=Vg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Nq=Vg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:jq}),Sq=Vg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),zZ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},qZ=/[A-Z]/g,JI=/-[a-z]/g,UZ=/^data[-\w.:]+$/i;function VZ(t,e){const n=IP(e);let a=e,i=ms;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&UZ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(JI,GZ);a="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!JI.test(s)){let o=s.replace(qZ,HZ);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=aO}return new i(a,e)}function HZ(t){return"-"+t.toLowerCase()}function GZ(t){return t.charAt(1).toUpperCase()}const WZ=yq([vq,$Z,wq,Nq,Sq],"html"),iO=yq([vq,BZ,wq,Nq,Sq],"svg");function KZ(t){return t.join(" ").trim()}var Nm={},dC,ZI;function YZ(){if(ZI)return dC;ZI=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,u="/",h="*",p="",m="comment",x="declaration";dC=function(j,w){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];w=w||{};var _=1,k=1;function C(G){var K=G.match(e);K&&(_+=K.length);var Y=G.lastIndexOf(c);k=~Y?G.length-Y:k+G.length}function A(){var G={line:_,column:k};return function(K){return K.position=new T(G),$(),K}}function T(G){this.start=G,this.end={line:_,column:k},this.source=w.source}T.prototype.content=j;function E(G){var K=new Error(w.source+":"+_+":"+k+": "+G);if(K.reason=G,K.filename=w.source,K.line=_,K.column=k,K.source=j,!w.silent)throw K}function I(G){var K=G.exec(j);if(K){var Y=K[0];return C(Y),j=j.slice(Y.length),K}}function $(){I(n)}function U(G){var K;for(G=G||[];K=B();)K!==!1&&G.push(K);return G}function B(){var G=A();if(!(u!=j.charAt(0)||h!=j.charAt(1))){for(var K=2;p!=j.charAt(K)&&(h!=j.charAt(K)||u!=j.charAt(K+1));)++K;if(K+=2,p===j.charAt(K-1))return E("End of comment missing");var Y=j.slice(2,K-2);return k+=2,C(Y),j=j.slice(K),k+=2,G({type:m,comment:Y})}}function R(){var G=A(),K=I(a);if(K){if(B(),!I(i))return E("property missing ':'");var Y=I(s),q=G({type:x,property:b(K[0].replace(t,p)),value:Y?b(Y[0].replace(t,p)):p});return I(o),q}}function z(){var G=[];U(G);for(var K;K=R();)K!==!1&&(G.push(K),U(G));return G}return $(),z()};function b(j){return j?j.replace(l,p):p}return dC}var eR;function QZ(){if(eR)return Nm;eR=1;var t=Nm&&Nm.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.default=n;var e=t(YZ());function n(a,i){var s=null;if(!a||typeof a!="string")return s;var o=(0,e.default)(a),l=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var u=c.property,h=c.value;l?i(u,h,c):h&&(s=s||{},s[u]=h)}}),s}return Nm}var Xx={},tR;function XZ(){if(tR)return Xx;tR=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(u){return!u||n.test(u)||t.test(u)},o=function(u,h){return h.toUpperCase()},l=function(u,h){return"".concat(h,"-")},c=function(u,h){return h===void 0&&(h={}),s(u)?u:(u=u.toLowerCase(),h.reactCompat?u=u.replace(i,l):u=u.replace(a,l),u.replace(e,o))};return Xx.camelCase=c,Xx}var Jx,nR;function JZ(){if(nR)return Jx;nR=1;var t=Jx&&Jx.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(QZ()),n=XZ();function a(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return a.default=a,Jx=a,Jx}var ZZ=JZ();const eee=Kn(ZZ),_q=Cq("end"),sO=Cq("start");function Cq(t){return e;function e(n){const a=n&&n.position&&n.position[t]||{};if(typeof a.line=="number"&&a.line>0&&typeof a.column=="number"&&a.column>0)return{line:a.line,column:a.column,offset:typeof a.offset=="number"&&a.offset>-1?a.offset:void 0}}}function tee(t){const e=sO(t),n=_q(t);if(e&&n)return{start:e,end:n}}function _v(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?rR(t.position):"start"in t||"end"in t?rR(t):"line"in t||"column"in t?LP(t):""}function LP(t){return aR(t&&t.line)+":"+aR(t&&t.column)}function rR(t){return LP(t&&t.start)+"-"+LP(t&&t.end)}function aR(t){return t&&typeof t=="number"?t:1}class vi extends Error{constructor(e,n,a){super(),typeof n=="string"&&(a=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof a=="string"){const c=a.indexOf(":");c===-1?s.ruleId=a:(s.source=a.slice(0,c),s.ruleId=a.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=_v(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}vi.prototype.file="";vi.prototype.name="";vi.prototype.reason="";vi.prototype.message="";vi.prototype.stack="";vi.prototype.column=void 0;vi.prototype.line=void 0;vi.prototype.ancestors=void 0;vi.prototype.cause=void 0;vi.prototype.fatal=void 0;vi.prototype.place=void 0;vi.prototype.ruleId=void 0;vi.prototype.source=void 0;const oO={}.hasOwnProperty,nee=new Map,ree=/[A-Z]/g,aee=new Set(["table","tbody","thead","tfoot","tr"]),iee=new Set(["td","th"]),kq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function see(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let a;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");a=pee(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");a=fee(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:a,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?iO:WZ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=Tq(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function Tq(t,e,n){if(e.type==="element")return oee(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return lee(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return uee(t,e,n);if(e.type==="mdxjsEsm")return cee(t,e);if(e.type==="root")return dee(t,e,n);if(e.type==="text")return hee(t,e)}function oee(t,e,n){const a=t.schema;let i=a;e.tagName.toLowerCase()==="svg"&&a.space==="html"&&(i=iO,t.schema=i),t.ancestors.push(e);const s=Pq(t,e.tagName,!1),o=mee(t,e);let l=cO(t,e);return aee.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!LZ(c):!0})),Aq(t,o,s,e),lO(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function lee(t,e){if(e.data&&e.data.estree&&t.evaluater){const a=e.data.estree.body[0];return a.type,t.evaluater.evaluateExpression(a.expression)}Bv(t,e.position)}function cee(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Bv(t,e.position)}function uee(t,e,n){const a=t.schema;let i=a;e.name==="svg"&&a.space==="html"&&(i=iO,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:Pq(t,e.name,!0),o=gee(t,e),l=cO(t,e);return Aq(t,o,s,e),lO(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function dee(t,e,n){const a={};return lO(a,cO(t,e)),t.create(e,t.Fragment,a,n)}function hee(t,e){return e.value}function Aq(t,e,n,a){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=a)}function lO(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function fee(t,e,n){return a;function a(i,s,o,l){const u=Array.isArray(o.children)?n:e;return l?u(s,o,l):u(s,o)}}function pee(t,e){return n;function n(a,i,s,o){const l=Array.isArray(s.children),c=sO(a);return e(i,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function mee(t,e){const n={};let a,i;for(i in e.properties)if(i!=="children"&&oO.call(e.properties,i)){const s=yee(t,i,e.properties[i]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&iee.has(e.tagName)?a=l:n[o]=l}}if(a){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=a}return n}function gee(t,e){const n={};for(const a of e.attributes)if(a.type==="mdxJsxExpressionAttribute")if(a.data&&a.data.estree&&t.evaluater){const s=a.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Bv(t,e.position);else{const i=a.name;let s;if(a.value&&typeof a.value=="object")if(a.value.data&&a.value.data.estree&&t.evaluater){const l=a.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Bv(t,e.position);else s=a.value===null?!0:a.value;n[i]=s}return n}function cO(t,e){const n=[];let a=-1;const i=t.passKeys?new Map:nee;for(;++a<e.children.length;){const s=e.children[a];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=i.get(c)||0;o=c+"-"+u,i.set(c,u+1)}}const l=Tq(t,s,o);l!==void 0&&n.push(l)}return n}function yee(t,e,n){const a=VZ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=a.commaSeparated?DZ(n):KZ(n)),a.property==="style"){let i=typeof n=="object"?n:xee(t,String(n));return t.stylePropertyNameCase==="css"&&(i=vee(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&a.space?zZ[a.property]||a.property:a.attribute,n]}}function xee(t,e){try{return eee(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const a=n,i=new vi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=kq+"#cannot-parse-style-attribute",i}}function Pq(t,e,n){let a;if(!n)a={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const l=YI(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}a=o}else a=YI(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(a.type==="Literal"){const i=a.value;return oO.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(a);Bv(t)}function Bv(t,e){const n=new vi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=kq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function vee(t){const e={};let n;for(n in t)oO.call(t,n)&&(e[bee(n)]=t[n]);return e}function bee(t){let e=t.replace(ree,jee);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function jee(t){return"-"+t.toLowerCase()}const hC={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},wee={};function uO(t,e){const n=wee,a=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Eq(t,a,i)}function Eq(t,e,n){if(Nee(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return iR(t.children,e,n)}return Array.isArray(t)?iR(t,e,n):""}function iR(t,e,n){const a=[];let i=-1;for(;++i<t.length;)a[i]=Eq(t[i],e,n);return a.join("")}function Nee(t){return!!(t&&typeof t=="object")}const sR=document.createElement("i");function dO(t){const e="&"+t+";";sR.innerHTML=e;const n=sR.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Rs(t,e,n,a){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,a.length<1e4)o=Array.from(a),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<a.length;)o=a.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function ro(t,e){return t.length>0?(Rs(t,t.length,0,e),t):e}const oR={}.hasOwnProperty;function Dq(t){const e={};let n=-1;for(;++n<t.length;)See(e,t[n]);return e}function See(t,e){let n;for(n in e){const i=(oR.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){oR.call(i,o)||(i[o]=[]);const l=s[o];_ee(i[o],Array.isArray(l)?l:l?[l]:[])}}}function _ee(t,e){let n=-1;const a=[];for(;++n<e.length;)(e[n].add==="after"?t:a).push(e[n]);Rs(t,0,0,a)}function Oq(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function zo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Li=jd(/[A-Za-z]/),yi=jd(/[\dA-Za-z]/),Cee=jd(/[#-'*+\--9=?A-Z^-~]/);function Sw(t){return t!==null&&(t<32||t===127)}const FP=jd(/\d/),kee=jd(/[\dA-Fa-f]/),Tee=jd(/[!-/:-@[-`{-~]/);function Jt(t){return t!==null&&t<-2}function Er(t){return t!==null&&(t<0||t===32)}function In(t){return t===-2||t===-1||t===32}const YN=jd(new RegExp("\\p{P}|\\p{S}","u")),Pf=jd(/\s/);function jd(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Hg(t){const e=[];let n=-1,a=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&yi(t.charCodeAt(n+1))&&yi(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(a,n),encodeURIComponent(o)),a=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(a)}function Yn(t,e,n,a){const i=a?a-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return In(c)?(t.enter(n),l(c)):e(c)}function l(c){return In(c)&&s++<i?(t.consume(c),l):(t.exit(n),e(c))}}const Aee={tokenize:Pee};function Pee(t){const e=t.attempt(this.parser.constructs.contentInitial,a,i);let n;return e;function a(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Yn(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Jt(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const Eee={tokenize:Dee},lR={tokenize:Oee};function Dee(t){const e=this,n=[];let a=0,i,s,o;return l;function l(C){if(a<n.length){const A=n[a];return e.containerState=A[1],t.attempt(A[0].continuation,c,u)(C)}return u(C)}function c(C){if(a++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&k();const A=e.events.length;let T=A,E;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){E=e.events[T][1].end;break}_(a);let I=A;for(;I<e.events.length;)e.events[I][1].end={...E},I++;return Rs(e.events,T+1,0,e.events.slice(A)),e.events.length=I,u(C)}return l(C)}function u(C){if(a===n.length){if(!i)return m(C);if(i.currentConstruct&&i.currentConstruct.concrete)return b(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(lR,h,p)(C)}function h(C){return i&&k(),_(a),m(C)}function p(C){return e.parser.lazy[e.now().line]=a!==n.length,o=e.now().offset,b(C)}function m(C){return e.containerState={},t.attempt(lR,x,b)(C)}function x(C){return a++,n.push([e.currentConstruct,e.containerState]),m(C)}function b(C){if(C===null){i&&k(),_(0),t.consume(C);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),j(C)}function j(C){if(C===null){w(t.exit("chunkFlow"),!0),_(0),t.consume(C);return}return Jt(C)?(t.consume(C),w(t.exit("chunkFlow")),a=0,e.interrupt=void 0,l):(t.consume(C),j)}function w(C,A){const T=e.sliceStream(C);if(A&&T.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(T),e.parser.lazy[C.start.line]){let E=i.events.length;for(;E--;)if(i.events[E][1].start.offset<o&&(!i.events[E][1].end||i.events[E][1].end.offset>o))return;const I=e.events.length;let $=I,U,B;for(;$--;)if(e.events[$][0]==="exit"&&e.events[$][1].type==="chunkFlow"){if(U){B=e.events[$][1].end;break}U=!0}for(_(a),E=I;E<e.events.length;)e.events[E][1].end={...B},E++;Rs(e.events,$+1,0,e.events.slice(I)),e.events.length=E}}function _(C){let A=n.length;for(;A-- >C;){const T=n[A];e.containerState=T[1],T[0].exit.call(e,t)}n.length=C}function k(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Oee(t,e,n){return Yn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function cg(t){if(t===null||Er(t)||Pf(t))return 1;if(YN(t))return 2}function QN(t,e,n){const a=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!a.includes(s)&&(e=s(e,n),a.push(s))}return e}const $P={name:"attention",resolveAll:Mee,tokenize:Iee};function Mee(t,e){let n=-1,a,i,s,o,l,c,u,h;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(a=n;a--;)if(t[a][0]==="exit"&&t[a][1].type==="attentionSequence"&&t[a][1]._open&&e.sliceSerialize(t[a][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[a][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[a][1].end.offset-t[a][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[a][1].end.offset-t[a][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[a][1].end},m={...t[n][1].start};cR(p,-c),cR(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[a][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:c>1?"strongText":"emphasisText",start:{...t[a][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[a][1].end={...o.start},t[n][1].start={...l.end},u=[],t[a][1].end.offset-t[a][1].start.offset&&(u=ro(u,[["enter",t[a][1],e],["exit",t[a][1],e]])),u=ro(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=ro(u,QN(e.parser.constructs.insideSpan.null,t.slice(a+1,n),e)),u=ro(u,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(h=2,u=ro(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):h=0,Rs(t,a-1,n-a+3,u),n=a+u.length-h-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Iee(t,e){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,i=cg(a);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const u=t.exit("attentionSequence"),h=cg(c),p=!h||h===2&&i||n.includes(c),m=!i||i===2&&h||n.includes(a);return u._open=!!(s===42?p:p&&(i||!m)),u._close=!!(s===42?m:m&&(h||!p)),e(c)}}function cR(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Ree={name:"autolink",tokenize:Lee};function Lee(t,e,n){let a=0;return i;function i(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(x){return Li(x)?(t.consume(x),o):x===64?n(x):u(x)}function o(x){return x===43||x===45||x===46||yi(x)?(a=1,l(x)):u(x)}function l(x){return x===58?(t.consume(x),a=0,c):(x===43||x===45||x===46||yi(x))&&a++<32?(t.consume(x),l):(a=0,u(x))}function c(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||Sw(x)?n(x):(t.consume(x),c)}function u(x){return x===64?(t.consume(x),h):Cee(x)?(t.consume(x),u):n(x)}function h(x){return yi(x)?p(x):n(x)}function p(x){return x===46?(t.consume(x),a=0,h):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):m(x)}function m(x){if((x===45||yi(x))&&a++<63){const b=x===45?m:p;return t.consume(x),b}return n(x)}}const Bb={partial:!0,tokenize:Fee};function Fee(t,e,n){return a;function a(s){return In(s)?Yn(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Jt(s)?e(s):n(s)}}const Mq={continuation:{tokenize:Bee},exit:zee,name:"blockQuote",tokenize:$ee};function $ee(t,e,n){const a=this;return i;function i(o){if(o===62){const l=a.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return In(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function Bee(t,e,n){const a=this;return i;function i(o){return In(o)?Yn(t,s,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(Mq,e,n)(o)}}function zee(t){t.exit("blockQuote")}const Iq={name:"characterEscape",tokenize:qee};function qee(t,e,n){return a;function a(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return Tee(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const Rq={name:"characterReference",tokenize:Uee};function Uee(t,e,n){const a=this;let i=0,s,o;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=yi,h(p))}function u(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=kee,h):(t.enter("characterReferenceValue"),s=7,o=FP,h(p))}function h(p){if(p===59&&i){const m=t.exit("characterReferenceValue");return o===yi&&!dO(a.sliceSerialize(m))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(p)&&i++<s?(t.consume(p),h):n(p)}}const uR={partial:!0,tokenize:Hee},dR={concrete:!0,name:"codeFenced",tokenize:Vee};function Vee(t,e,n){const a=this,i={partial:!0,tokenize:T};let s=0,o=0,l;return c;function c(E){return u(E)}function u(E){const I=a.events[a.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),h(E)}function h(E){return E===l?(o++,t.consume(E),h):o<3?n(E):(t.exit("codeFencedFenceSequence"),In(E)?Yn(t,p,"whitespace")(E):p(E))}function p(E){return E===null||Jt(E)?(t.exit("codeFencedFence"),a.interrupt?e(E):t.check(uR,j,A)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(E))}function m(E){return E===null||Jt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(E)):In(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Yn(t,x,"whitespace")(E)):E===96&&E===l?n(E):(t.consume(E),m)}function x(E){return E===null||Jt(E)?p(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===null||Jt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(E)):E===96&&E===l?n(E):(t.consume(E),b)}function j(E){return t.attempt(i,A,w)(E)}function w(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),_}function _(E){return s>0&&In(E)?Yn(t,k,"linePrefix",s+1)(E):k(E)}function k(E){return E===null||Jt(E)?t.check(uR,j,A)(E):(t.enter("codeFlowValue"),C(E))}function C(E){return E===null||Jt(E)?(t.exit("codeFlowValue"),k(E)):(t.consume(E),C)}function A(E){return t.exit("codeFenced"),e(E)}function T(E,I,$){let U=0;return B;function B(Y){return E.enter("lineEnding"),E.consume(Y),E.exit("lineEnding"),R}function R(Y){return E.enter("codeFencedFence"),In(Y)?Yn(E,z,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):z(Y)}function z(Y){return Y===l?(E.enter("codeFencedFenceSequence"),G(Y)):$(Y)}function G(Y){return Y===l?(U++,E.consume(Y),G):U>=o?(E.exit("codeFencedFenceSequence"),In(Y)?Yn(E,K,"whitespace")(Y):K(Y)):$(Y)}function K(Y){return Y===null||Jt(Y)?(E.exit("codeFencedFence"),I(Y)):$(Y)}}}function Hee(t,e,n){const a=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}const fC={name:"codeIndented",tokenize:Wee},Gee={partial:!0,tokenize:Kee};function Wee(t,e,n){const a=this;return i;function i(u){return t.enter("codeIndented"),Yn(t,s,"linePrefix",5)(u)}function s(u){const h=a.events[a.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):Jt(u)?t.attempt(Gee,o,c)(u):(t.enter("codeFlowValue"),l(u))}function l(u){return u===null||Jt(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),l)}function c(u){return t.exit("codeIndented"),e(u)}}function Kee(t,e,n){const a=this;return i;function i(o){return a.parser.lazy[a.now().line]?n(o):Jt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Yn(t,s,"linePrefix",5)(o)}function s(o){const l=a.events[a.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Jt(o)?i(o):n(o)}}const Yee={name:"codeText",previous:Xee,resolve:Qee,tokenize:Jee};function Qee(t){let e=t.length-4,n=3,a,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(a=n;++a<e;)if(t[a][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(a=n-1,e++;++a<=e;)i===void 0?a!==e&&t[a][1].type!=="lineEnding"&&(i=a):(a===e||t[a][1].type==="lineEnding")&&(t[i][1].type="codeTextData",a!==i+2&&(t[i][1].end=t[a-1][1].end,t.splice(i+2,a-i-2),e-=a-i-2,a=i+2),i=void 0);return t}function Xee(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Jee(t,e,n){let a=0,i,s;return o;function o(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),a++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(s=t.enter("codeTextSequence"),i=0,h(p)):Jt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),u(p))}function u(p){return p===null||p===32||p===96||Jt(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),u)}function h(p){return p===96?(t.consume(p),i++,h):i===a?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(s.type="codeTextData",u(p))}}class Zee{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const a=n??Number.POSITIVE_INFINITY;return a<this.left.length?this.left.slice(e,a):e>this.left.length?this.right.slice(this.right.length-a+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-a+this.left.length).reverse())}splice(e,n,a){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return a&&Zx(this.left,a),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Zx(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Zx(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Zx(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Zx(this.left,n.reverse())}}}function Zx(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Lq(t){const e={};let n=-1,a,i,s,o,l,c,u;const h=new Zee(t);for(;++n<h.length;){for(;n in e;)n=e[n];if(a=h.get(n),n&&a[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=a[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(a[0]==="enter")a[1].contentType&&(Object.assign(e,ete(h,n)),n=e[n],u=!0);else if(a[1]._container){for(s=n,i=void 0;s--;)if(o=h.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(a[1].end={...h.get(i)[1].start},l=h.slice(i,n),l.unshift(a),h.splice(i,n-i+1,l))}}return Rs(t,0,Number.POSITIVE_INFINITY,h.slice(0)),!u}function ete(t,e){const n=t.get(e)[1],a=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=a.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let h,p,m=-1,x=n,b=0,j=0;const w=[j];for(;x;){for(;t.get(++i)[1]!==x;);s.push(i),x._tokenizer||(h=a.sliceStream(x),x.next||h.push(null),p&&o.defineSkip(x.start),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=x,x=x.next}for(x=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(j=m+1,w.push(j),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(o.events=[],x?(x._tokenizer=void 0,x.previous=void 0):w.pop(),m=w.length;m--;){const _=l.slice(w[m],w[m+1]),k=s.pop();c.push([k,k+_.length-1]),t.splice(k,2,_)}for(c.reverse(),m=-1;++m<c.length;)u[b+c[m][0]]=b+c[m][1],b+=c[m][1]-c[m][0]-1;return u}const tte={resolve:rte,tokenize:ate},nte={partial:!0,tokenize:ite};function rte(t){return Lq(t),t}function ate(t,e){let n;return a;function a(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):Jt(l)?t.check(nte,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function ite(t,e,n){const a=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Yn(t,s,"linePrefix")}function s(o){if(o===null||Jt(o))return n(o);const l=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(a.parser.constructs.flow,n,e)(o)}}function Fq(t,e,n,a,i,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let h=0;return p;function p(_){return _===60?(t.enter(a),t.enter(i),t.enter(s),t.consume(_),t.exit(s),m):_===null||_===32||_===41||Sw(_)?n(_):(t.enter(a),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),j(_))}function m(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(a),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),x(_))}function x(_){return _===62?(t.exit("chunkString"),t.exit(l),m(_)):_===null||_===60||Jt(_)?n(_):(t.consume(_),_===92?b:x)}function b(_){return _===60||_===62||_===92?(t.consume(_),x):x(_)}function j(_){return!h&&(_===null||_===41||Er(_))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(a),e(_)):h<u&&_===40?(t.consume(_),h++,j):_===41?(t.consume(_),h--,j):_===null||_===32||_===40||Sw(_)?n(_):(t.consume(_),_===92?w:j)}function w(_){return _===40||_===41||_===92?(t.consume(_),j):j(_)}}function $q(t,e,n,a,i,s){const o=this;let l=0,c;return u;function u(x){return t.enter(a),t.enter(i),t.consume(x),t.exit(i),t.enter(s),h}function h(x){return l>999||x===null||x===91||x===93&&!c||x===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(x):x===93?(t.exit(s),t.enter(i),t.consume(x),t.exit(i),t.exit(a),e):Jt(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),h):(t.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||x===91||x===93||Jt(x)||l++>999?(t.exit("chunkString"),h(x)):(t.consume(x),c||(c=!In(x)),x===92?m:p)}function m(x){return x===91||x===92||x===93?(t.consume(x),l++,p):p(x)}}function Bq(t,e,n,a,i,s){let o;return l;function l(m){return m===34||m===39||m===40?(t.enter(a),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,c):n(m)}function c(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(a),e):(t.enter(s),u(m))}function u(m){return m===o?(t.exit(s),c(o)):m===null?n(m):Jt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),Yn(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===o||m===null||Jt(m)?(t.exit("chunkString"),u(m)):(t.consume(m),m===92?p:h)}function p(m){return m===o||m===92?(t.consume(m),h):h(m)}}function Cv(t,e){let n;return a;function a(i){return Jt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,a):In(i)?Yn(t,a,n?"linePrefix":"lineSuffix")(i):e(i)}}const ste={name:"definition",tokenize:lte},ote={partial:!0,tokenize:cte};function lte(t,e,n){const a=this;let i;return s;function s(x){return t.enter("definition"),o(x)}function o(x){return $q.call(a,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return i=zo(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),c):n(x)}function c(x){return Er(x)?Cv(t,u)(x):u(x)}function u(x){return Fq(t,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function h(x){return t.attempt(ote,p,p)(x)}function p(x){return In(x)?Yn(t,m,"whitespace")(x):m(x)}function m(x){return x===null||Jt(x)?(t.exit("definition"),a.parser.defined.push(i),e(x)):n(x)}}function cte(t,e,n){return a;function a(l){return Er(l)?Cv(t,i)(l):n(l)}function i(l){return Bq(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return In(l)?Yn(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Jt(l)?e(l):n(l)}}const ute={name:"hardBreakEscape",tokenize:dte};function dte(t,e,n){return a;function a(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Jt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const hte={name:"headingAtx",resolve:fte,tokenize:pte};function fte(t,e){let n=t.length-2,a=3,i,s;return t[a][1].type==="whitespace"&&(a+=2),n-2>a&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&t[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(i={type:"atxHeadingText",start:t[a][1].start,end:t[n][1].end},s={type:"chunkText",start:t[a][1].start,end:t[n][1].end,contentType:"text"},Rs(t,a,n-a+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function pte(t,e,n){let a=0;return i;function i(h){return t.enter("atxHeading"),s(h)}function s(h){return t.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&a++<6?(t.consume(h),o):h===null||Er(h)?(t.exit("atxHeadingSequence"),l(h)):n(h)}function l(h){return h===35?(t.enter("atxHeadingSequence"),c(h)):h===null||Jt(h)?(t.exit("atxHeading"),e(h)):In(h)?Yn(t,l,"whitespace")(h):(t.enter("atxHeadingText"),u(h))}function c(h){return h===35?(t.consume(h),c):(t.exit("atxHeadingSequence"),l(h))}function u(h){return h===null||h===35||Er(h)?(t.exit("atxHeadingText"),l(h)):(t.consume(h),u)}}const mte=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hR=["pre","script","style","textarea"],gte={concrete:!0,name:"htmlFlow",resolveTo:vte,tokenize:bte},yte={partial:!0,tokenize:wte},xte={partial:!0,tokenize:jte};function vte(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function bte(t,e,n){const a=this;let i,s,o,l,c;return u;function u(X){return h(X)}function h(X){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(X),p}function p(X){return X===33?(t.consume(X),m):X===47?(t.consume(X),s=!0,j):X===63?(t.consume(X),i=3,a.interrupt?e:L):Li(X)?(t.consume(X),o=String.fromCharCode(X),w):n(X)}function m(X){return X===45?(t.consume(X),i=2,x):X===91?(t.consume(X),i=5,l=0,b):Li(X)?(t.consume(X),i=4,a.interrupt?e:L):n(X)}function x(X){return X===45?(t.consume(X),a.interrupt?e:L):n(X)}function b(X){const Re="CDATA[";return X===Re.charCodeAt(l++)?(t.consume(X),l===Re.length?a.interrupt?e:z:b):n(X)}function j(X){return Li(X)?(t.consume(X),o=String.fromCharCode(X),w):n(X)}function w(X){if(X===null||X===47||X===62||Er(X)){const Re=X===47,Se=o.toLowerCase();return!Re&&!s&&hR.includes(Se)?(i=1,a.interrupt?e(X):z(X)):mte.includes(o.toLowerCase())?(i=6,Re?(t.consume(X),_):a.interrupt?e(X):z(X)):(i=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(X):s?k(X):C(X))}return X===45||yi(X)?(t.consume(X),o+=String.fromCharCode(X),w):n(X)}function _(X){return X===62?(t.consume(X),a.interrupt?e:z):n(X)}function k(X){return In(X)?(t.consume(X),k):B(X)}function C(X){return X===47?(t.consume(X),B):X===58||X===95||Li(X)?(t.consume(X),A):In(X)?(t.consume(X),C):B(X)}function A(X){return X===45||X===46||X===58||X===95||yi(X)?(t.consume(X),A):T(X)}function T(X){return X===61?(t.consume(X),E):In(X)?(t.consume(X),T):C(X)}function E(X){return X===null||X===60||X===61||X===62||X===96?n(X):X===34||X===39?(t.consume(X),c=X,I):In(X)?(t.consume(X),E):$(X)}function I(X){return X===c?(t.consume(X),c=null,U):X===null||Jt(X)?n(X):(t.consume(X),I)}function $(X){return X===null||X===34||X===39||X===47||X===60||X===61||X===62||X===96||Er(X)?T(X):(t.consume(X),$)}function U(X){return X===47||X===62||In(X)?C(X):n(X)}function B(X){return X===62?(t.consume(X),R):n(X)}function R(X){return X===null||Jt(X)?z(X):In(X)?(t.consume(X),R):n(X)}function z(X){return X===45&&i===2?(t.consume(X),q):X===60&&i===1?(t.consume(X),V):X===62&&i===4?(t.consume(X),te):X===63&&i===3?(t.consume(X),L):X===93&&i===5?(t.consume(X),Q):Jt(X)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(yte,me,G)(X)):X===null||Jt(X)?(t.exit("htmlFlowData"),G(X)):(t.consume(X),z)}function G(X){return t.check(xte,K,me)(X)}function K(X){return t.enter("lineEnding"),t.consume(X),t.exit("lineEnding"),Y}function Y(X){return X===null||Jt(X)?G(X):(t.enter("htmlFlowData"),z(X))}function q(X){return X===45?(t.consume(X),L):z(X)}function V(X){return X===47?(t.consume(X),o="",H):z(X)}function H(X){if(X===62){const Re=o.toLowerCase();return hR.includes(Re)?(t.consume(X),te):z(X)}return Li(X)&&o.length<8?(t.consume(X),o+=String.fromCharCode(X),H):z(X)}function Q(X){return X===93?(t.consume(X),L):z(X)}function L(X){return X===62?(t.consume(X),te):X===45&&i===2?(t.consume(X),L):z(X)}function te(X){return X===null||Jt(X)?(t.exit("htmlFlowData"),me(X)):(t.consume(X),te)}function me(X){return t.exit("htmlFlow"),e(X)}}function jte(t,e,n){const a=this;return i;function i(o){return Jt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}function wte(t,e,n){return a;function a(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Bb,e,n)}}const Nte={name:"htmlText",tokenize:Ste};function Ste(t,e,n){const a=this;let i,s,o;return l;function l(L){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(L),c}function c(L){return L===33?(t.consume(L),u):L===47?(t.consume(L),T):L===63?(t.consume(L),C):Li(L)?(t.consume(L),$):n(L)}function u(L){return L===45?(t.consume(L),h):L===91?(t.consume(L),s=0,b):Li(L)?(t.consume(L),k):n(L)}function h(L){return L===45?(t.consume(L),x):n(L)}function p(L){return L===null?n(L):L===45?(t.consume(L),m):Jt(L)?(o=p,V(L)):(t.consume(L),p)}function m(L){return L===45?(t.consume(L),x):p(L)}function x(L){return L===62?q(L):L===45?m(L):p(L)}function b(L){const te="CDATA[";return L===te.charCodeAt(s++)?(t.consume(L),s===te.length?j:b):n(L)}function j(L){return L===null?n(L):L===93?(t.consume(L),w):Jt(L)?(o=j,V(L)):(t.consume(L),j)}function w(L){return L===93?(t.consume(L),_):j(L)}function _(L){return L===62?q(L):L===93?(t.consume(L),_):j(L)}function k(L){return L===null||L===62?q(L):Jt(L)?(o=k,V(L)):(t.consume(L),k)}function C(L){return L===null?n(L):L===63?(t.consume(L),A):Jt(L)?(o=C,V(L)):(t.consume(L),C)}function A(L){return L===62?q(L):C(L)}function T(L){return Li(L)?(t.consume(L),E):n(L)}function E(L){return L===45||yi(L)?(t.consume(L),E):I(L)}function I(L){return Jt(L)?(o=I,V(L)):In(L)?(t.consume(L),I):q(L)}function $(L){return L===45||yi(L)?(t.consume(L),$):L===47||L===62||Er(L)?U(L):n(L)}function U(L){return L===47?(t.consume(L),q):L===58||L===95||Li(L)?(t.consume(L),B):Jt(L)?(o=U,V(L)):In(L)?(t.consume(L),U):q(L)}function B(L){return L===45||L===46||L===58||L===95||yi(L)?(t.consume(L),B):R(L)}function R(L){return L===61?(t.consume(L),z):Jt(L)?(o=R,V(L)):In(L)?(t.consume(L),R):U(L)}function z(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(t.consume(L),i=L,G):Jt(L)?(o=z,V(L)):In(L)?(t.consume(L),z):(t.consume(L),K)}function G(L){return L===i?(t.consume(L),i=void 0,Y):L===null?n(L):Jt(L)?(o=G,V(L)):(t.consume(L),G)}function K(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||Er(L)?U(L):(t.consume(L),K)}function Y(L){return L===47||L===62||Er(L)?U(L):n(L)}function q(L){return L===62?(t.consume(L),t.exit("htmlTextData"),t.exit("htmlText"),e):n(L)}function V(L){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),H}function H(L){return In(L)?Yn(t,Q,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):Q(L)}function Q(L){return t.enter("htmlTextData"),o(L)}}const hO={name:"labelEnd",resolveAll:Tte,resolveTo:Ate,tokenize:Pte},_te={tokenize:Ete},Cte={tokenize:Dte},kte={tokenize:Ote};function Tte(t){let e=-1;const n=[];for(;++e<t.length;){const a=t[e][1];if(n.push(t[e]),a.type==="labelImage"||a.type==="labelLink"||a.type==="labelEnd"){const i=a.type==="labelImage"?4:2;a.type="data",e+=i}}return t.length!==n.length&&Rs(t,0,t.length,n),t}function Ate(t,e){let n=t.length,a=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){a=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},h={type:"labelText",start:{...t[s+a+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",u,e]],l=ro(l,t.slice(s+1,s+a+3)),l=ro(l,[["enter",h,e]]),l=ro(l,QN(e.parser.constructs.insideSpan.null,t.slice(s+a+4,o-3),e)),l=ro(l,[["exit",h,e],t[o-2],t[o-1],["exit",u,e]]),l=ro(l,t.slice(o+1)),l=ro(l,[["exit",c,e]]),Rs(t,s,t.length,l),t}function Pte(t,e,n){const a=this;let i=a.events.length,s,o;for(;i--;)if((a.events[i][1].type==="labelImage"||a.events[i][1].type==="labelLink")&&!a.events[i][1]._balanced){s=a.events[i][1];break}return l;function l(m){return s?s._inactive?p(m):(o=a.parser.defined.includes(zo(a.sliceSerialize({start:s.end,end:a.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),c):n(m)}function c(m){return m===40?t.attempt(_te,h,o?h:p)(m):m===91?t.attempt(Cte,h,o?u:p)(m):o?h(m):p(m)}function u(m){return t.attempt(kte,h,p)(m)}function h(m){return e(m)}function p(m){return s._balanced=!0,n(m)}}function Ete(t,e,n){return a;function a(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),i}function i(p){return Er(p)?Cv(t,s)(p):s(p)}function s(p){return p===41?h(p):Fq(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return Er(p)?Cv(t,c)(p):h(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?Bq(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function u(p){return Er(p)?Cv(t,h)(p):h(p)}function h(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function Dte(t,e,n){const a=this;return i;function i(l){return $q.call(a,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return a.parser.defined.includes(zo(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function Ote(t,e,n){return a;function a(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const Mte={name:"labelStartImage",resolveAll:hO.resolveAll,tokenize:Ite};function Ite(t,e,n){const a=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(l):e(l)}}const Rte={name:"labelStartLink",resolveAll:hO.resolveAll,tokenize:Lte};function Lte(t,e,n){const a=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(o):e(o)}}const pC={name:"lineEnding",tokenize:Fte};function Fte(t,e){return n;function n(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Yn(t,e,"linePrefix")}}const sw={name:"thematicBreak",tokenize:$te};function $te(t,e,n){let a=0,i;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,l(u)}function l(u){return u===i?(t.enter("thematicBreakSequence"),c(u)):a>=3&&(u===null||Jt(u))?(t.exit("thematicBreak"),e(u)):n(u)}function c(u){return u===i?(t.consume(u),a++,c):(t.exit("thematicBreakSequence"),In(u)?Yn(t,l,"whitespace")(u):l(u))}}const ss={continuation:{tokenize:Ute},exit:Hte,name:"list",tokenize:qte},Bte={partial:!0,tokenize:Gte},zte={partial:!0,tokenize:Vte};function qte(t,e,n){const a=this,i=a.events[a.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(x){const b=a.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!a.containerState.marker||x===a.containerState.marker:FP(x)){if(a.containerState.type||(a.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(sw,n,u)(x):u(x);if(!a.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(x)}return n(x)}function c(x){return FP(x)&&++o<10?(t.consume(x),c):(!a.interrupt||o<2)&&(a.containerState.marker?x===a.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),u(x)):n(x)}function u(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||x,t.check(Bb,a.interrupt?n:h,t.attempt(Bte,m,p))}function h(x){return a.containerState.initialBlankLine=!0,s++,m(x)}function p(x){return In(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),m):n(x)}function m(x){return a.containerState.size=s+a.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function Ute(t,e,n){const a=this;return a.containerState._closeFlow=void 0,t.check(Bb,i,s);function i(l){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,Yn(t,e,"listItemIndent",a.containerState.size+1)(l)}function s(l){return a.containerState.furtherBlankLines||!In(l)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,o(l)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,t.attempt(zte,e,o)(l))}function o(l){return a.containerState._closeFlow=!0,a.interrupt=void 0,Yn(t,t.attempt(ss,e,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Vte(t,e,n){const a=this;return Yn(t,i,"listItemIndent",a.containerState.size+1);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===a.containerState.size?e(s):n(s)}}function Hte(t){t.exit(this.containerState.type)}function Gte(t,e,n){const a=this;return Yn(t,i,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=a.events[a.events.length-1];return!In(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const fR={name:"setextUnderline",resolveTo:Wte,tokenize:Kte};function Wte(t,e){let n=t.length,a,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){a=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[a][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[a][1],e]),t[a][1].end={...t[s][1].end}):t[a][1]=o,t.push(["exit",o,e]),t}function Kte(t,e,n){const a=this;let i;return s;function s(u){let h=a.events.length,p;for(;h--;)if(a.events[h][1].type!=="lineEnding"&&a.events[h][1].type!=="linePrefix"&&a.events[h][1].type!=="content"){p=a.events[h][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||p)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===i?(t.consume(u),l):(t.exit("setextHeadingLineSequence"),In(u)?Yn(t,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Jt(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const Yte={tokenize:Qte};function Qte(t){const e=this,n=t.attempt(Bb,a,t.attempt(this.parser.constructs.flowInitial,i,Yn(t,t.attempt(this.parser.constructs.flow,i,t.attempt(tte,i)),"linePrefix")));return n;function a(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Xte={resolveAll:qq()},Jte=zq("string"),Zte=zq("text");function zq(t){return{resolveAll:qq(t==="text"?ene:void 0),tokenize:e};function e(n){const a=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(h){return u(h)?s(h):l(h)}function l(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return u(h)?(n.exit("data"),s(h)):(n.consume(h),c)}function u(h){if(h===null)return!0;const p=i[h];let m=-1;if(p)for(;++m<p.length;){const x=p[m];if(!x.previous||x.previous.call(a,a.previous))return!0}return!1}}}function qq(t){return e;function e(n,a){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,a):n}}function ene(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const a=t[n-1][1],i=e.sliceStream(a);let s=i.length,o=-1,l=0,c;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const u={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:a.start._bufferIndex+o,_index:a.start._index+s,line:a.end.line,column:a.end.column-l,offset:a.end.offset-l},end:{...a.end}};a.end={...u.start},a.start.offset===a.end.offset?Object.assign(a,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const tne={42:ss,43:ss,45:ss,48:ss,49:ss,50:ss,51:ss,52:ss,53:ss,54:ss,55:ss,56:ss,57:ss,62:Mq},nne={91:ste},rne={[-2]:fC,[-1]:fC,32:fC},ane={35:hte,42:sw,45:[fR,sw],60:gte,61:fR,95:sw,96:dR,126:dR},ine={38:Rq,92:Iq},sne={[-5]:pC,[-4]:pC,[-3]:pC,33:Mte,38:Rq,42:$P,60:[Ree,Nte],91:Rte,92:[ute,Iq],93:hO,95:$P,96:Yee},one={null:[$P,Xte]},lne={null:[42,95]},cne={null:[]},une=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:lne,contentInitial:nne,disable:cne,document:tne,flow:ane,flowInitial:rne,insideSpan:one,string:ine,text:sne},Symbol.toStringTag,{value:"Module"}));function dne(t,e,n){let a={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const c={attempt:I(T),check:I(E),consume:k,enter:C,exit:A,interrupt:I(E,{interrupt:!0})},u={code:null,containerState:{},defineSkip:j,events:[],now:b,parser:t,previous:null,sliceSerialize:m,sliceStream:x,write:p};let h=e.tokenize.call(u,c);return e.resolveAll&&s.push(e),u;function p(R){return o=ro(o,R),w(),o[o.length-1]!==null?[]:($(e,0),u.events=QN(s,u.events,u),u.events)}function m(R,z){return fne(x(R),z)}function x(R){return hne(o,R)}function b(){const{_bufferIndex:R,_index:z,line:G,column:K,offset:Y}=a;return{_bufferIndex:R,_index:z,line:G,column:K,offset:Y}}function j(R){i[R.line]=R.column,B()}function w(){let R;for(;a._index<o.length;){const z=o[a._index];if(typeof z=="string")for(R=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===R&&a._bufferIndex<z.length;)_(z.charCodeAt(a._bufferIndex));else _(z)}}function _(R){h=h(R)}function k(R){Jt(R)?(a.line++,a.column=1,a.offset+=R===-3?2:1,B()):R!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===o[a._index].length&&(a._bufferIndex=-1,a._index++)),u.previous=R}function C(R,z){const G=z||{};return G.type=R,G.start=b(),u.events.push(["enter",G,u]),l.push(G),G}function A(R){const z=l.pop();return z.end=b(),u.events.push(["exit",z,u]),z}function T(R,z){$(R,z.from)}function E(R,z){z.restore()}function I(R,z){return G;function G(K,Y,q){let V,H,Q,L;return Array.isArray(K)?me(K):"tokenize"in K?me([K]):te(K);function te(Ee){return Fe;function Fe(le){const _e=le!==null&&Ee[le],Ve=le!==null&&Ee.null,De=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(Ve)?Ve:Ve?[Ve]:[]];return me(De)(le)}}function me(Ee){return V=Ee,H=0,Ee.length===0?q:X(Ee[H])}function X(Ee){return Fe;function Fe(le){return L=U(),Q=Ee,Ee.partial||(u.currentConstruct=Ee),Ee.name&&u.parser.constructs.disable.null.includes(Ee.name)?Se():Ee.tokenize.call(z?Object.assign(Object.create(u),z):u,c,Re,Se)(le)}}function Re(Ee){return R(Q,L),Y}function Se(Ee){return L.restore(),++H<V.length?X(V[H]):q}}}function $(R,z){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&Rs(u.events,z,u.events.length-z,R.resolve(u.events.slice(z),u)),R.resolveTo&&(u.events=R.resolveTo(u.events,u))}function U(){const R=b(),z=u.previous,G=u.currentConstruct,K=u.events.length,Y=Array.from(l);return{from:K,restore:q};function q(){a=R,u.previous=z,u.currentConstruct=G,u.events.length=K,l=Y,B()}}function B(){a.line in i&&a.column<2&&(a.column=i[a.line],a.offset+=i[a.line]-1)}}function hne(t,e){const n=e.start._index,a=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(a,s)];else{if(o=t.slice(n,i),a>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(a):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function fne(t,e){let n=-1;const a=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,a.push(o)}return a.join("")}function pne(t){const a={constructs:Dq([une,...(t||{}).extensions||[]]),content:i(Aee),defined:[],document:i(Eee),flow:i(Yte),lazy:{},string:i(Jte),text:i(Zte)};return a;function i(s){return o;function o(l){return dne(a,s,l)}}}function mne(t){for(;!Lq(t););return t}const pR=/[\0\t\n\r]/g;function gne(){let t=1,e="",n=!0,a;return i;function i(s,o,l){const c=[];let u,h,p,m,x;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,e="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(pR.lastIndex=p,u=pR.exec(s),m=u&&u.index!==void 0?u.index:s.length,x=s.charCodeAt(m),!u){e=s.slice(p);break}if(x===10&&p===m&&a)c.push(-3),a=void 0;else switch(a&&(c.push(-5),a=void 0),p<m&&(c.push(s.slice(p,m)),t+=m-p),x){case 0:{c.push(65533),t++;break}case 9:{for(h=Math.ceil(t/4)*4,c.push(-2);t++<h;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:a=!0,t=1}p=m+1}return l&&(a&&c.push(-5),e&&c.push(e),c.push(null)),c}}const yne=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function xne(t){return t.replace(yne,vne)}function vne(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Oq(n.slice(s?2:1),s?16:10)}return dO(n)||t}const Uq={}.hasOwnProperty;function bne(t,e,n){return typeof e!="string"&&(n=e,e=void 0),jne(n)(mne(pne(n).document().write(gne()(t,e,!0))))}function jne(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ye),autolinkProtocol:U,autolinkEmail:U,atxHeading:s(be),blockQuote:s(Ve),characterEscape:U,characterReference:U,codeFenced:s(De),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(De,o),codeText:s(ue,o),codeTextData:U,data:U,codeFlowValue:U,definition:s(Ae),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ce),hardBreakEscape:s(ke),hardBreakTrailing:s(ke),htmlFlow:s(Ce,o),htmlFlowData:U,htmlText:s(Ce,o),htmlTextData:U,image:s(ne),label:o,link:s(ye),listItem:s(se),listItemValue:m,listOrdered:s(de,p),listUnordered:s(de),paragraph:s(re),reference:X,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(be),strong:s(oe),thematicBreak:s(Oe)},exit:{atxHeading:c(),atxHeadingSequence:T,autolink:c(),autolinkEmail:_e,autolinkProtocol:le,blockQuote:c(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:Se,characterReferenceMarkerNumeric:Se,characterReferenceValue:Ee,characterReference:Fe,codeFenced:c(w),codeFencedFence:j,codeFencedFenceInfo:x,codeFencedFenceMeta:b,codeFlowValue:B,codeIndented:c(_),codeText:c(Y),codeTextData:B,data:B,definition:c(),definitionDestinationString:A,definitionLabelString:k,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(z),hardBreakTrailing:c(z),htmlFlow:c(G),htmlFlowData:B,htmlText:c(K),htmlTextData:B,image:c(V),label:Q,labelText:H,lineEnding:R,link:c(q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Re,resourceDestinationString:L,resourceTitleString:te,resource:me,setextHeading:c($),setextHeadingLineSequence:I,setextHeadingText:E,strong:c(),thematicBreak:c()}};Vq(e,(t||{}).mdastExtensions||[]);const n={};return a;function a(J){let xe={type:"root",children:[]};const ge={stack:[xe],tokenStack:[],config:e,enter:l,exit:u,buffer:o,resume:h,data:n},he=[];let Ie=-1;for(;++Ie<J.length;)if(J[Ie][1].type==="listOrdered"||J[Ie][1].type==="listUnordered")if(J[Ie][0]==="enter")he.push(Ie);else{const nt=he.pop();Ie=i(J,nt,Ie)}for(Ie=-1;++Ie<J.length;){const nt=e[J[Ie][0]];Uq.call(nt,J[Ie][1].type)&&nt[J[Ie][1].type].call(Object.assign({sliceSerialize:J[Ie][2].sliceSerialize},ge),J[Ie][1])}if(ge.tokenStack.length>0){const nt=ge.tokenStack[ge.tokenStack.length-1];(nt[1]||mR).call(ge,void 0,nt[0])}for(xe.position={start:Hu(J.length>0?J[0][1].start:{line:1,column:1,offset:0}),end:Hu(J.length>0?J[J.length-2][1].end:{line:1,column:1,offset:0})},Ie=-1;++Ie<e.transforms.length;)xe=e.transforms[Ie](xe)||xe;return xe}function i(J,xe,ge){let he=xe-1,Ie=-1,nt=!1,Be,Ge,it,wt;for(;++he<=ge;){const we=J[he];switch(we[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{we[0]==="enter"?Ie++:Ie--,wt=void 0;break}case"lineEndingBlank":{we[0]==="enter"&&(Be&&!wt&&!Ie&&!it&&(it=he),wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wt=void 0}if(!Ie&&we[0]==="enter"&&we[1].type==="listItemPrefix"||Ie===-1&&we[0]==="exit"&&(we[1].type==="listUnordered"||we[1].type==="listOrdered")){if(Be){let Qe=he;for(Ge=void 0;Qe--;){const Xe=J[Qe];if(Xe[1].type==="lineEnding"||Xe[1].type==="lineEndingBlank"){if(Xe[0]==="exit")continue;Ge&&(J[Ge][1].type="lineEndingBlank",nt=!0),Xe[1].type="lineEnding",Ge=Qe}else if(!(Xe[1].type==="linePrefix"||Xe[1].type==="blockQuotePrefix"||Xe[1].type==="blockQuotePrefixWhitespace"||Xe[1].type==="blockQuoteMarker"||Xe[1].type==="listItemIndent"))break}it&&(!Ge||it<Ge)&&(Be._spread=!0),Be.end=Object.assign({},Ge?J[Ge][1].start:we[1].end),J.splice(Ge||he,0,["exit",Be,we[2]]),he++,ge++}if(we[1].type==="listItemPrefix"){const Qe={type:"listItem",_spread:!1,start:Object.assign({},we[1].start),end:void 0};Be=Qe,J.splice(he,0,["enter",Qe,we[2]]),he++,ge++,it=void 0,wt=!0}}}return J[xe][1]._spread=nt,ge}function s(J,xe){return ge;function ge(he){l.call(this,J(he),he),xe&&xe.call(this,he)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(J,xe,ge){this.stack[this.stack.length-1].children.push(J),this.stack.push(J),this.tokenStack.push([xe,ge||void 0]),J.position={start:Hu(xe.start),end:void 0}}function c(J){return xe;function xe(ge){J&&J.call(this,ge),u.call(this,ge)}}function u(J,xe){const ge=this.stack.pop(),he=this.tokenStack.pop();if(he)he[0].type!==J.type&&(xe?xe.call(this,J,he[0]):(he[1]||mR).call(this,J,he[0]));else throw new Error("Cannot close `"+J.type+"` ("+_v({start:J.start,end:J.end})+"): its not open");ge.position.end=Hu(J.end)}function h(){return uO(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function m(J){if(this.data.expectingFirstListItemValue){const xe=this.stack[this.stack.length-2];xe.start=Number.parseInt(this.sliceSerialize(J),10),this.data.expectingFirstListItemValue=void 0}}function x(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.lang=J}function b(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.meta=J}function j(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.value=J.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.value=J.replace(/(\r?\n|\r)$/g,"")}function k(J){const xe=this.resume(),ge=this.stack[this.stack.length-1];ge.label=xe,ge.identifier=zo(this.sliceSerialize(J)).toLowerCase()}function C(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.title=J}function A(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.url=J}function T(J){const xe=this.stack[this.stack.length-1];if(!xe.depth){const ge=this.sliceSerialize(J).length;xe.depth=ge}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function I(J){const xe=this.stack[this.stack.length-1];xe.depth=this.sliceSerialize(J).codePointAt(0)===61?1:2}function $(){this.data.setextHeadingSlurpLineEnding=void 0}function U(J){const ge=this.stack[this.stack.length-1].children;let he=ge[ge.length-1];(!he||he.type!=="text")&&(he=je(),he.position={start:Hu(J.start),end:void 0},ge.push(he)),this.stack.push(he)}function B(J){const xe=this.stack.pop();xe.value+=this.sliceSerialize(J),xe.position.end=Hu(J.end)}function R(J){const xe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ge=xe.children[xe.children.length-1];ge.position.end=Hu(J.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(xe.type)&&(U.call(this,J),B.call(this,J))}function z(){this.data.atHardBreak=!0}function G(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.value=J}function K(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.value=J}function Y(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.value=J}function q(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=xe,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function V(){const J=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";J.type+="Reference",J.referenceType=xe,delete J.url,delete J.title}else delete J.identifier,delete J.label;this.data.referenceType=void 0}function H(J){const xe=this.sliceSerialize(J),ge=this.stack[this.stack.length-2];ge.label=xne(xe),ge.identifier=zo(xe).toLowerCase()}function Q(){const J=this.stack[this.stack.length-1],xe=this.resume(),ge=this.stack[this.stack.length-1];if(this.data.inReference=!0,ge.type==="link"){const he=J.children;ge.children=he}else ge.alt=xe}function L(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.url=J}function te(){const J=this.resume(),xe=this.stack[this.stack.length-1];xe.title=J}function me(){this.data.inReference=void 0}function X(){this.data.referenceType="collapsed"}function Re(J){const xe=this.resume(),ge=this.stack[this.stack.length-1];ge.label=xe,ge.identifier=zo(this.sliceSerialize(J)).toLowerCase(),this.data.referenceType="full"}function Se(J){this.data.characterReferenceType=J.type}function Ee(J){const xe=this.sliceSerialize(J),ge=this.data.characterReferenceType;let he;ge?(he=Oq(xe,ge==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):he=dO(xe);const Ie=this.stack[this.stack.length-1];Ie.value+=he}function Fe(J){const xe=this.stack.pop();xe.position.end=Hu(J.end)}function le(J){B.call(this,J);const xe=this.stack[this.stack.length-1];xe.url=this.sliceSerialize(J)}function _e(J){B.call(this,J);const xe=this.stack[this.stack.length-1];xe.url="mailto:"+this.sliceSerialize(J)}function Ve(){return{type:"blockquote",children:[]}}function De(){return{type:"code",lang:null,meta:null,value:""}}function ue(){return{type:"inlineCode",value:""}}function Ae(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ce(){return{type:"emphasis",children:[]}}function be(){return{type:"heading",depth:0,children:[]}}function ke(){return{type:"break"}}function Ce(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function ye(){return{type:"link",title:null,url:"",children:[]}}function de(J){return{type:"list",ordered:J.type==="listOrdered",start:null,spread:J._spread,children:[]}}function se(J){return{type:"listItem",spread:J._spread,checked:null,children:[]}}function re(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function je(){return{type:"text",value:""}}function Oe(){return{type:"thematicBreak"}}}function Hu(t){return{line:t.line,column:t.column,offset:t.offset}}function Vq(t,e){let n=-1;for(;++n<e.length;){const a=e[n];Array.isArray(a)?Vq(t,a):wne(t,a)}}function wne(t,e){let n;for(n in e)if(Uq.call(e,n))switch(n){case"canContainEols":{const a=e[n];a&&t[n].push(...a);break}case"transforms":{const a=e[n];a&&t[n].push(...a);break}case"enter":case"exit":{const a=e[n];a&&Object.assign(t[n],a);break}}}function mR(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+_v({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+_v({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+_v({start:e.start,end:e.end})+") is still open")}function Nne(t){const e=this;e.parser=n;function n(a){return bne(a,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Sne(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function _ne(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Cne(t,e){const n=e.value?e.value+`
`:"",a={};e.lang&&(a.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function kne(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Tne(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Ane(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",a=String(e.identifier).toUpperCase(),i=Hg(a.toLowerCase()),s=t.footnoteOrder.indexOf(a);let o,l=t.footnoteCounts.get(a);l===void 0?(l=0,t.footnoteOrder.push(a),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(a,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,u),t.applyData(e,u)}function Pne(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Ene(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Hq(t,e){const n=e.referenceType;let a="]";if(n==="collapsed"?a+="[]":n==="full"&&(a+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+a}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=a:i.push({type:"text",value:a}),i}function Dne(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return Hq(t,e);const i={src:Hg(a.url||""),alt:e.alt};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function One(t,e){const n={src:Hg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,a),t.applyData(e,a)}function Mne(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,a),t.applyData(e,a)}function Ine(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return Hq(t,e);const i={href:Hg(a.url||"")};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function Rne(t,e){const n={href:Hg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function Lne(t,e,n){const a=t.all(e),i=n?Fne(n):Gq(e),s={},o=[];if(typeof e.checked=="boolean"){const h=a[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},a.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<a.length;){const h=a[l];(i||l!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?o.push(...h.children):o.push(h)}const c=a[a.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function Fne(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let a=-1;for(;!e&&++a<n.length;)e=Gq(n[a])}return e}function Gq(t){const e=t.spread;return e??t.children.length>1}function $ne(t,e){const n={},a=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<a.length;){const o=a[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(a,!0)};return t.patch(e,s),t.applyData(e,s)}function Bne(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function zne(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function qne(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Une(t,e){const n=t.all(e),a=n.shift(),i=[];if(a){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([a],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=sO(e.children[1]),c=_q(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function Vne(t,e,n){const a=n?n.children:void 0,s=(a?a.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let c=-1;const u=[];for(;++c<l;){const p=e.children[c],m={},x=o?o[c]:void 0;x&&(m.align=x);let b={type:"element",tagName:s,properties:m,children:[]};p&&(b.children=t.all(p),t.patch(p,b),b=t.applyData(p,b)),u.push(b)}const h={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,h),t.applyData(e,h)}function Hne(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const gR=9,yR=32;function Gne(t){const e=String(t),n=/\r?\n|\r/g;let a=n.exec(e),i=0;const s=[];for(;a;)s.push(xR(e.slice(i,a.index),i>0,!0),a[0]),i=a.index+a[0].length,a=n.exec(e);return s.push(xR(e.slice(i),i>0,!1)),s.join("")}function xR(t,e,n){let a=0,i=t.length;if(e){let s=t.codePointAt(a);for(;s===gR||s===yR;)a++,s=t.codePointAt(a)}if(n){let s=t.codePointAt(i-1);for(;s===gR||s===yR;)i--,s=t.codePointAt(i-1)}return i>a?t.slice(a,i):""}function Wne(t,e){const n={type:"text",value:Gne(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Kne(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Yne={blockquote:Sne,break:_ne,code:Cne,delete:kne,emphasis:Tne,footnoteReference:Ane,heading:Pne,html:Ene,imageReference:Dne,image:One,inlineCode:Mne,linkReference:Ine,link:Rne,listItem:Lne,list:$ne,paragraph:Bne,root:zne,strong:qne,table:Une,tableCell:Hne,tableRow:Vne,text:Wne,thematicBreak:Kne,toml:N1,yaml:N1,definition:N1,footnoteDefinition:N1};function N1(){}const Wq=-1,XN=0,kv=1,_w=2,fO=3,pO=4,mO=5,gO=6,Kq=7,Yq=8,vR=typeof self=="object"?self:globalThis,Qne=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),a=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case XN:case Wq:return n(o,i);case kv:{const l=n([],i);for(const c of o)l.push(a(c));return l}case _w:{const l=n({},i);for(const[c,u]of o)l[a(c)]=a(u);return l}case fO:return n(new Date(o),i);case pO:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case mO:{const l=n(new Map,i);for(const[c,u]of o)l.set(a(c),a(u));return l}case gO:{const l=n(new Set,i);for(const c of o)l.add(a(c));return l}case Kq:{const{name:l,message:c}=o;return n(new vR[l](c),i)}case Yq:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new vR[s](o),i)};return a},bR=t=>Qne(new Map,t)(0),Sm="",{toString:Xne}={},{keys:Jne}=Object,ev=t=>{const e=typeof t;if(e!=="object"||!t)return[XN,e];const n=Xne.call(t).slice(8,-1);switch(n){case"Array":return[kv,Sm];case"Object":return[_w,Sm];case"Date":return[fO,Sm];case"RegExp":return[pO,Sm];case"Map":return[mO,Sm];case"Set":return[gO,Sm];case"DataView":return[kv,n]}return n.includes("Array")?[kv,n]:n.includes("Error")?[Kq,n]:[_w,n]},S1=([t,e])=>t===XN&&(e==="function"||e==="symbol"),Zne=(t,e,n,a)=>{const i=(o,l)=>{const c=a.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=ev(o);switch(l){case XN:{let h=o;switch(c){case"bigint":l=Yq,h=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return i([Wq],o)}return i([l,h],o)}case kv:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),i([c,[...m]],o)}const h=[],p=i([l,h],o);for(const m of o)h.push(s(m));return p}case _w:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const h=[],p=i([l,h],o);for(const m of Jne(o))(t||!S1(ev(o[m])))&&h.push([s(m),s(o[m])]);return p}case fO:return i([l,o.toISOString()],o);case pO:{const{source:h,flags:p}=o;return i([l,{source:h,flags:p}],o)}case mO:{const h=[],p=i([l,h],o);for(const[m,x]of o)(t||!(S1(ev(m))||S1(ev(x))))&&h.push([s(m),s(x)]);return p}case gO:{const h=[],p=i([l,h],o);for(const m of o)(t||!S1(ev(m)))&&h.push(s(m));return p}}const{message:u}=o;return i([l,{name:c,message:u}],o)};return s},jR=(t,{json:e,lossy:n}={})=>{const a=[];return Zne(!(e||n),!!e,new Map,a)(t),a},Cw=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?bR(jR(t,e)):structuredClone(t):(t,e)=>bR(jR(t,e));function ere(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function tre(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function nre(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||ere,a=t.options.footnoteBackLabel||tre,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[c]);if(!u)continue;const h=t.all(u),p=String(u.identifier).toUpperCase(),m=Hg(p.toLowerCase());let x=0;const b=[],j=t.footnoteCounts.get(p);for(;j!==void 0&&++x<=j;){b.length>0&&b.push({type:"text",value:" "});let k=typeof n=="string"?n:n(c,x);typeof k=="string"&&(k={type:"text",value:k}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof a=="string"?a:a(c,x),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const w=h[h.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const k=w.children[w.children.length-1];k&&k.type==="text"?k.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...b)}else h.push(...b);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(h,!0)};t.patch(u,_),l.push(_)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Cw(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const JN=function(t){if(t==null)return sre;if(typeof t=="function")return ZN(t);if(typeof t=="object")return Array.isArray(t)?rre(t):are(t);if(typeof t=="string")return ire(t);throw new Error("Expected function, string, or object as test")};function rre(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=JN(t[n]);return ZN(a);function a(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function are(t){const e=t;return ZN(n);function n(a){const i=a;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function ire(t){return ZN(e);function e(n){return n&&n.type===t}}function ZN(t){return e;function e(n,a,i){return!!(ore(n)&&t.call(this,n,typeof a=="number"?a:void 0,i||void 0))}}function sre(){return!0}function ore(t){return t!==null&&typeof t=="object"&&"type"in t}const Qq=[],lre=!0,BP=!1,cre="skip";function Xq(t,e,n,a){let i;typeof e=="function"&&typeof n!="function"?(a=n,n=e):i=e;const s=JN(i),o=a?-1:1;l(t,void 0,[])();function l(c,u,h){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const x=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return m;function m(){let x=Qq,b,j,w;if((!e||s(c,u,h[h.length-1]||void 0))&&(x=ure(n(c,h)),x[0]===BP))return x;if("children"in c&&c.children){const _=c;if(_.children&&x[0]!==cre)for(j=(a?_.children.length:-1)+o,w=h.concat(_);j>-1&&j<_.children.length;){const k=_.children[j];if(b=l(k,j,w)(),b[0]===BP)return b;j=typeof b[1]=="number"?b[1]:j+o}}return x}}}function ure(t){return Array.isArray(t)?t:typeof t=="number"?[lre,t]:t==null?Qq:[t]}function yO(t,e,n,a){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=a),Xq(t,s,l,i);function l(c,u){const h=u[u.length-1],p=h?h.children.indexOf(c):void 0;return o(c,p,h)}}const zP={}.hasOwnProperty,dre={};function hre(t,e){const n=e||dre,a=new Map,i=new Map,s=new Map,o={...Yne,...n.handlers},l={all:u,applyData:pre,definitionById:a,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:fre,wrap:gre};return yO(t,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?a:i,m=String(h.identifier).toUpperCase();p.has(m)||p.set(m,h)}}),l;function c(h,p){const m=h.type,x=l.handlers[m];if(zP.call(l.handlers,m)&&x)return x(l,h,p);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in h){const{children:j,...w}=h,_=Cw(w);return _.children=l.all(h),_}return Cw(h)}return(l.options.unknownHandler||mre)(l,h,p)}function u(h){const p=[];if("children"in h){const m=h.children;let x=-1;for(;++x<m.length;){const b=l.one(m[x],h);if(b){if(x&&m[x-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=wR(b.value)),!Array.isArray(b)&&b.type==="element")){const j=b.children[0];j&&j.type==="text"&&(j.value=wR(j.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function fre(t,e){t.position&&(e.position=tee(t))}function pre(t,e){let n=e;if(t&&t.data){const a=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof a=="string")if(n.type==="element")n.tagName=a;else{const o="children"in n?n.children:[n];n={type:"element",tagName:a,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Cw(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function mre(t,e){const n=e.data||{},a="value"in e&&!(zP.call(n,"hProperties")||zP.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function gre(t,e){const n=[];let a=-1;for(e&&n.push({type:"text",value:`
`});++a<t.length;)a&&n.push({type:"text",value:`
`}),n.push(t[a]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function wR(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function NR(t,e){const n=hre(t,e),a=n.one(t,void 0),i=nre(n),s=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function yre(t,e){return t&&"run"in t?async function(n,a){const i=NR(n,{file:a,...e});await t.run(i,a)}:function(n,a){return NR(n,{file:a,...t||e})}}function SR(t){if(t)throw t}var mC,_R;function xre(){if(_R)return mC;_R=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},s=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var h=t.call(u,"constructor"),p=u.constructor&&u.constructor.prototype&&t.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!h&&!p)return!1;var m;for(m in u);return typeof m>"u"||t.call(u,m)},o=function(u,h){n&&h.name==="__proto__"?n(u,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):u[h.name]=h.newValue},l=function(u,h){if(h==="__proto__")if(t.call(u,h)){if(a)return a(u,h).value}else return;return u[h]};return mC=function c(){var u,h,p,m,x,b,j=arguments[0],w=1,_=arguments.length,k=!1;for(typeof j=="boolean"&&(k=j,j=arguments[1]||{},w=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});w<_;++w)if(u=arguments[w],u!=null)for(h in u)p=l(j,h),m=l(u,h),j!==m&&(k&&m&&(s(m)||(x=i(m)))?(x?(x=!1,b=p&&i(p)?p:[]):b=p&&s(p)?p:{},o(j,{name:h,newValue:c(k,b,m)})):typeof m<"u"&&o(j,{name:h,newValue:m}));return j},mC}var vre=xre();const gC=Kn(vre);function qP(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function bre(){const t=[],e={run:n,use:a};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...u){const h=t[++s];let p=-1;if(c){o(c);return}for(;++p<i.length;)(u[p]===null||u[p]===void 0)&&(u[p]=i[p]);i=u,h?jre(h,l)(...u):o(null,...u)}}function a(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function jre(t,e){let n;return a;function a(...o){const l=t.length>o.length;let c;l&&o.push(i);try{c=t.apply(this,o)}catch(u){const h=u;if(l&&n)throw h;return i(h)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}const kl={basename:wre,dirname:Nre,extname:Sre,join:_re,sep:"/"};function wre(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');zb(t);let n=0,a=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1);return a<0?"":t.slice(n,a)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(a=i):(l=-1,a=o));return n===a?a=o:a<0&&(a=t.length),t.slice(n,a)}function Nre(t){if(zb(t),t.length===0)return".";let e=-1,n=t.length,a;for(;--n;)if(t.codePointAt(n)===47){if(a){e=n;break}}else a||(a=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Sre(t){zb(t);let e=t.length,n=-1,a=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){a=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===a+1?"":t.slice(i,n)}function _re(...t){let e=-1,n;for(;++e<t.length;)zb(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Cre(n)}function Cre(t){zb(t);const e=t.codePointAt(0)===47;let n=kre(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function kre(t,e){let n="",a=0,i=-1,s=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||a!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",a=0):(n=n.slice(0,c),a=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",a=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",a=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),a=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function zb(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Tre={cwd:Are};function Are(){return"/"}function UP(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Pre(t){if(typeof t=="string")t=new URL(t);else if(!UP(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Ere(t)}function Ere(t){if(t.hostname!==""){const a=new TypeError('File URL host must be "localhost" or empty on darwin');throw a.code="ERR_INVALID_FILE_URL_HOST",a}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const a=e.codePointAt(n+2);if(a===70||a===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const yC=["history","path","basename","stem","extname","dirname"];class Jq{constructor(e){let n;e?UP(e)?n={path:e}:typeof e=="string"||Dre(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Tre.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let a=-1;for(;++a<yC.length;){const s=yC[a];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)yC.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?kl.basename(this.path):void 0}set basename(e){vC(e,"basename"),xC(e,"basename"),this.path=kl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?kl.dirname(this.path):void 0}set dirname(e){CR(this.basename,"dirname"),this.path=kl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?kl.extname(this.path):void 0}set extname(e){if(xC(e,"extname"),CR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=kl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){UP(e)&&(e=Pre(e)),vC(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?kl.basename(this.path,this.extname):void 0}set stem(e){vC(e,"stem"),xC(e,"stem"),this.path=kl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,a){const i=this.message(e,n,a);throw i.fatal=!0,i}info(e,n,a){const i=this.message(e,n,a);return i.fatal=void 0,i}message(e,n,a){const i=new vi(e,n,a);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function xC(t,e){if(t&&t.includes(kl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+kl.sep+"`")}function vC(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function CR(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Dre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Ore=function(t){const a=this.constructor.prototype,i=a[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,a),s},Mre={}.hasOwnProperty;class xO extends Ore{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=bre()}copy(){const e=new xO;let n=-1;for(;++n<this.attachers.length;){const a=this.attachers[n];e.use(...a)}return e.data(gC(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(wC("data",this.frozen),this.namespace[e]=n,this):Mre.call(this.namespace,e)&&this.namespace[e]||void 0:e?(wC("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...a]=this.attachers[this.freezeIndex];if(a[0]===!1)continue;a[0]===!0&&(a[0]=void 0);const i=n.call(e,...a);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=_1(e),a=this.parser||this.Parser;return bC("parse",a),a(String(n),n)}process(e,n){const a=this;return this.freeze(),bC("process",this.parser||this.Parser),jC("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=_1(e),c=a.parse(l);a.run(c,l,function(h,p,m){if(h||!p||!m)return u(h);const x=p,b=a.stringify(x,m);Lre(b)?m.value=b:m.result=b,u(h,m)});function u(h,p){h||!p?o(h):s?s(p):n(void 0,p)}}}processSync(e){let n=!1,a;return this.freeze(),bC("processSync",this.parser||this.Parser),jC("processSync",this.compiler||this.Compiler),this.process(e,i),TR("processSync","process",n),a;function i(s,o){n=!0,SR(s),a=o}}run(e,n,a){kR(e),this.freeze();const i=this.transformers;return!a&&typeof n=="function"&&(a=n,n=void 0),a?s(void 0,a):new Promise(s);function s(o,l){const c=_1(n);i.run(e,c,u);function u(h,p,m){const x=p||e;h?l(h):o?o(x):a(void 0,x,m)}}}runSync(e,n){let a=!1,i;return this.run(e,n,s),TR("runSync","run",a),i;function s(o,l){SR(o),i=l,a=!0}}stringify(e,n){this.freeze();const a=_1(n),i=this.compiler||this.Compiler;return jC("stringify",i),kR(e),i(e,a)}use(e,...n){const a=this.attachers,i=this.namespace;if(wC("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[h,...p]=u;c(h,p)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(i.settings=gC(!0,i.settings,u.settings))}function l(u){let h=-1;if(u!=null)if(Array.isArray(u))for(;++h<u.length;){const p=u[h];s(p)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,h){let p=-1,m=-1;for(;++p<a.length;)if(a[p][0]===u){m=p;break}if(m===-1)a.push([u,...h]);else if(h.length>0){let[x,...b]=h;const j=a[m][1];qP(j)&&qP(x)&&(x=gC(!0,j,x)),a[m]=[u,x,...b]}}}}const Ire=new xO().freeze();function bC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function jC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function wC(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function kR(t){if(!qP(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function TR(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function _1(t){return Rre(t)?t:new Jq(t)}function Rre(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Lre(t){return typeof t=="string"||Fre(t)}function Fre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const $re="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",AR=[],PR={allowDangerousHtml:!0},Bre=/^(https?|ircs?|mailto|xmpp)$/i,zre=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function yd(t){const e=qre(t),n=Ure(t);return Vre(e.runSync(e.parse(n),n),t)}function qre(t){const e=t.rehypePlugins||AR,n=t.remarkPlugins||AR,a=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...PR}:PR;return Ire().use(Nne).use(n).use(yre,a).use(e)}function Ure(t){const e=t.children||"",n=new Jq;return typeof e=="string"&&(n.value=e),n}function Vre(t,e){const n=e.allowedElements,a=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||Hre;for(const h of zre)Object.hasOwn(e,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+$re+h.id,void 0);return yO(t,u),see(t,{Fragment:r.Fragment,components:i,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function u(h,p,m){if(h.type==="raw"&&m&&typeof p=="number")return o?m.children.splice(p,1):m.children[p]={type:"text",value:h.value},p;if(h.type==="element"){let x;for(x in hC)if(Object.hasOwn(hC,x)&&Object.hasOwn(h.properties,x)){const b=h.properties[x],j=hC[x];(j===null||j.includes(h.tagName))&&(h.properties[x]=c(String(b||""),x,h))}}if(h.type==="element"){let x=n?!n.includes(h.tagName):s?s.includes(h.tagName):!1;if(!x&&a&&typeof p=="number"&&(x=!a(h,p,m)),x&&m&&typeof p=="number")return l&&h.children?m.children.splice(p,1,...h.children):m.children.splice(p,1),p}}}function Hre(t){const e=t.indexOf(":"),n=t.indexOf("?"),a=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||a!==-1&&e>a||Bre.test(t.slice(0,e))?t:""}function ER(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let a=0,i=n.indexOf(e);for(;i!==-1;)a++,i=n.indexOf(e,i+e.length);return a}function Gre(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Wre(t,e,n){const i=JN((n||{}).ignore||[]),s=Kre(e);let o=-1;for(;++o<s.length;)Xq(t,"text",l);function l(u,h){let p=-1,m;for(;++p<h.length;){const x=h[p],b=m?m.children:void 0;if(i(x,b?b.indexOf(x):void 0,m))return;m=x}if(m)return c(u,h)}function c(u,h){const p=h[h.length-1],m=s[o][0],x=s[o][1];let b=0;const w=p.children.indexOf(u);let _=!1,k=[];m.lastIndex=0;let C=m.exec(u.value);for(;C;){const A=C.index,T={index:C.index,input:C.input,stack:[...h,u]};let E=x(...C,T);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?m.lastIndex=A+1:(b!==A&&k.push({type:"text",value:u.value.slice(b,A)}),Array.isArray(E)?k.push(...E):E&&k.push(E),b=A+C[0].length,_=!0),!m.global)break;C=m.exec(u.value)}return _?(b<u.value.length&&k.push({type:"text",value:u.value.slice(b)}),p.children.splice(w,1,...k)):k=[u],w+k.length}}function Kre(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let a=-1;for(;++a<n.length;){const i=n[a];e.push([Yre(i[0]),Qre(i[1])])}return e}function Yre(t){return typeof t=="string"?new RegExp(Gre(t),"g"):t}function Qre(t){return typeof t=="function"?t:function(){return t}}const NC="phrasing",SC=["autolink","link","image","label"];function Xre(){return{transforms:[aae],enter:{literalAutolink:Zre,literalAutolinkEmail:_C,literalAutolinkHttp:_C,literalAutolinkWww:_C},exit:{literalAutolink:rae,literalAutolinkEmail:nae,literalAutolinkHttp:eae,literalAutolinkWww:tae}}}function Jre(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:NC,notInConstruct:SC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:NC,notInConstruct:SC},{character:":",before:"[ps]",after:"\\/",inConstruct:NC,notInConstruct:SC}]}}function Zre(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function _C(t){this.config.enter.autolinkProtocol.call(this,t)}function eae(t){this.config.exit.autolinkProtocol.call(this,t)}function tae(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function nae(t){this.config.exit.autolinkEmail.call(this,t)}function rae(t){this.exit(t)}function aae(t){Wre(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,iae],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),sae]],{ignore:["link","linkReference"]})}function iae(t,e,n,a,i){let s="";if(!Zq(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!oae(n)))return!1;const o=lae(n+a);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function sae(t,e,n,a){return!Zq(a,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function oae(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function lae(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],a=n.indexOf(")");const i=ER(t,"(");let s=ER(t,")");for(;a!==-1&&i>s;)t+=n.slice(0,a+1),n=n.slice(a+1),a=n.indexOf(")"),s++;return[t,n]}function Zq(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Pf(n)||YN(n))&&(!e||n!==47)}eU.peek=yae;function cae(){this.buffer()}function uae(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function dae(){this.buffer()}function hae(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function fae(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function pae(t){this.exit(t)}function mae(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function gae(t){this.exit(t)}function yae(){return"["}function eU(t,e,n,a){const i=n.createTracker(a);let s=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=i.move("]"),s}function xae(){return{enter:{gfmFootnoteCallString:cae,gfmFootnoteCall:uae,gfmFootnoteDefinitionLabelString:dae,gfmFootnoteDefinition:hae},exit:{gfmFootnoteCallString:fae,gfmFootnoteCall:pae,gfmFootnoteDefinitionLabelString:mae,gfmFootnoteDefinition:gae}}}function vae(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:eU},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(a,i,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),h=s.enter("label");return c+=l.move(s.safe(s.associationId(a),{before:c,after:"]"})),h(),c+=l.move("]:"),a.children&&a.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(a,l.current()),e?tU:bae))),u(),c}}function bae(t,e,n){return e===0?t:tU(t,e,n)}function tU(t,e,n){return(n?"":"    ")+t}const jae=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];nU.peek=Cae;function wae(){return{canContainEols:["delete"],enter:{strikethrough:Sae},exit:{strikethrough:_ae}}}function Nae(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:jae}],handlers:{delete:nU}}}function Sae(t){this.enter({type:"delete",children:[]},t)}function _ae(t){this.exit(t)}function nU(t,e,n,a){const i=n.createTracker(a),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Cae(){return"~"}function kae(t){return t.length}function Tae(t,e){const n=e||{},a=(n.align||[]).concat(),i=n.stringLength||kae,s=[],o=[],l=[],c=[];let u=0,h=-1;for(;++h<t.length;){const j=[],w=[];let _=-1;for(t[h].length>u&&(u=t[h].length);++_<t[h].length;){const k=Aae(t[h][_]);if(n.alignDelimiters!==!1){const C=i(k);w[_]=C,(c[_]===void 0||C>c[_])&&(c[_]=C)}j.push(k)}o[h]=j,l[h]=w}let p=-1;if(typeof a=="object"&&"length"in a)for(;++p<u;)s[p]=DR(a[p]);else{const j=DR(a);for(;++p<u;)s[p]=j}p=-1;const m=[],x=[];for(;++p<u;){const j=s[p];let w="",_="";j===99?(w=":",_=":"):j===108?w=":":j===114&&(_=":");let k=n.alignDelimiters===!1?1:Math.max(1,c[p]-w.length-_.length);const C=w+"-".repeat(k)+_;n.alignDelimiters!==!1&&(k=w.length+k+_.length,k>c[p]&&(c[p]=k),x[p]=k),m[p]=C}o.splice(1,0,m),l.splice(1,0,x),h=-1;const b=[];for(;++h<o.length;){const j=o[h],w=l[h];p=-1;const _=[];for(;++p<u;){const k=j[p]||"";let C="",A="";if(n.alignDelimiters!==!1){const T=c[p]-(w[p]||0),E=s[p];E===114?C=" ".repeat(T):E===99?T%2?(C=" ".repeat(T/2+.5),A=" ".repeat(T/2-.5)):(C=" ".repeat(T/2),A=C):A=" ".repeat(T)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(C),_.push(k),n.alignDelimiters!==!1&&_.push(A),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==u-1)&&_.push("|")}b.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return b.join(`
`)}function Aae(t){return t==null?"":String(t)}function DR(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Pae(t,e,n,a){const i=n.enter("blockquote"),s=n.createTracker(a);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Eae);return i(),o}function Eae(t,e,n){return">"+(n?"":" ")+t}function Dae(t,e){return OR(t,e.inConstruct,!0)&&!OR(t,e.notInConstruct,!1)}function OR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let a=-1;for(;++a<e.length;)if(t.includes(e[a]))return!0;return!1}function MR(t,e,n,a){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Dae(n.stack,n.unsafe[i]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function Oae(t,e){const n=String(t);let a=n.indexOf(e),i=a,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===i?++s>o&&(o=s):s=1,i=a+e.length,a=n.indexOf(e,i);return o}function Mae(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Iae(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Rae(t,e,n,a){const i=Iae(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Mae(t,n)){const p=n.enter("codeIndented"),m=n.indentLines(s,Lae);return p(),m}const l=n.createTracker(a),c=i.repeat(Math.max(Oae(s,i)+1,3)),u=n.enter("codeFenced");let h=l.move(c);if(t.lang){const p=n.enter(`codeFencedLang${o}`);h+=l.move(n.safe(t.lang,{before:h,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${o}`);h+=l.move(" "),h+=l.move(n.safe(t.meta,{before:h,after:`
`,encode:["`"],...l.current()})),p()}return h+=l.move(`
`),s&&(h+=l.move(s+`
`)),h+=l.move(c),u(),h}function Lae(t,e,n){return(n?"":"    ")+t}function vO(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Fae(t,e,n,a){const i=vO(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(a);let u=c.move("[");return u+=c.move(n.safe(n.associationId(t),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=c.move(" "+i),u+=c.move(n.safe(t.title,{before:u,after:i,...c.current()})),u+=c.move(i),l()),o(),u}function $ae(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function zv(t){return"&#x"+t.toString(16).toUpperCase()+";"}function kw(t,e,n){const a=cg(t),i=cg(e);return a===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:a===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}rU.peek=Bae;function rU(t,e,n,a){const i=$ae(n),s=n.enter("emphasis"),o=n.createTracker(a),l=o.move(i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const u=c.charCodeAt(0),h=kw(a.before.charCodeAt(a.before.length-1),u,i);h.inside&&(c=zv(u)+c.slice(1));const p=c.charCodeAt(c.length-1),m=kw(a.after.charCodeAt(0),p,i);m.inside&&(c=c.slice(0,-1)+zv(p));const x=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+x}function Bae(t,e,n){return n.options.emphasis||"*"}function zae(t,e){let n=!1;return yO(t,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return n=!0,BP}),!!((!t.depth||t.depth<3)&&uO(t)&&(e.options.setext||n))}function qae(t,e,n,a){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(a);if(zae(t,n)){const h=n.enter("headingSetext"),p=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return p(),h(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=zv(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}aU.peek=Uae;function aU(t){return t.value||""}function Uae(){return"<"}iU.peek=Vae;function iU(t,e,n,a){const i=vO(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(a);let u=c.move("![");return u+=c.move(n.safe(t.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=c.move(" "+i),u+=c.move(n.safe(t.title,{before:u,after:i,...c.current()})),u+=c.move(i),l()),u+=c.move(")"),o(),u}function Vae(){return"!"}sU.peek=Hae;function sU(t,e,n,a){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("![");const u=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=h,s(),i==="full"||!u||u!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Hae(){return"!"}oU.peek=Gae;function oU(t,e,n){let a=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(a);)i+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(a);){let u=c.index;a.charCodeAt(u)===10&&a.charCodeAt(u-1)===13&&u--,a=a.slice(0,u)+" "+a.slice(c.index+1)}}return i+a+i}function Gae(){return"`"}function lU(t,e){const n=uO(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}cU.peek=Wae;function cU(t,e,n,a){const i=vO(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(a);let l,c;if(lU(t,n)){const h=n.stack;n.stack=[],l=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(t,{before:p,after:">",...o.current()})),p+=o.move(">"),l(),n.stack=h,p}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),u+=o.move(" "+i),u+=o.move(n.safe(t.title,{before:u,after:i,...o.current()})),u+=o.move(i),c()),u+=o.move(")"),l(),u}function Wae(t,e,n){return lU(t,n)?"<":"["}uU.peek=Kae;function uU(t,e,n,a){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("[");const u=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=h,s(),i==="full"||!u||u!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Kae(){return"["}function bO(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Yae(t){const e=bO(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Qae(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function dU(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Xae(t,e,n,a){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?Qae(n):bO(n);const l=t.ordered?o==="."?")":".":Yae(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const h=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),dU(n)===o&&h){let p=-1;for(;++p<t.children.length;){const m=t.children[p];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(t,a);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),u}function Jae(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Zae(t,e,n,a){const i=Jae(n);let s=n.bulletCurrent||bO(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(a);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,l.current()),h);return c(),u;function h(p,m,x){return m?(x?"":" ".repeat(o))+p:(x?s:s+" ".repeat(o-s.length))+p}}function eie(t,e,n,a){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,a);return s(),i(),o}const tie=JN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function nie(t,e,n,a){return(t.children.some(function(o){return tie(o)})?n.containerPhrasing:n.containerFlow).call(n,t,a)}function rie(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}hU.peek=aie;function hU(t,e,n,a){const i=rie(n),s=n.enter("strong"),o=n.createTracker(a),l=o.move(i+i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const u=c.charCodeAt(0),h=kw(a.before.charCodeAt(a.before.length-1),u,i);h.inside&&(c=zv(u)+c.slice(1));const p=c.charCodeAt(c.length-1),m=kw(a.after.charCodeAt(0),p,i);m.inside&&(c=c.slice(0,-1)+zv(p));const x=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:h.outside},l+c+x}function aie(t,e,n){return n.options.strong||"*"}function iie(t,e,n,a){return n.safe(t.value,a)}function sie(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function oie(t,e,n){const a=(dU(n)+(n.options.ruleSpaces?" ":"")).repeat(sie(n));return n.options.ruleSpaces?a.slice(0,-1):a}const fU={blockquote:Pae,break:MR,code:Rae,definition:Fae,emphasis:rU,hardBreak:MR,heading:qae,html:aU,image:iU,imageReference:sU,inlineCode:oU,link:cU,linkReference:uU,list:Xae,listItem:Zae,paragraph:eie,root:nie,strong:hU,text:iie,thematicBreak:oie};function lie(){return{enter:{table:cie,tableData:IR,tableHeader:IR,tableRow:die},exit:{codeText:hie,table:uie,tableData:CC,tableHeader:CC,tableRow:CC}}}function cie(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function uie(t){this.exit(t),this.data.inTable=void 0}function die(t){this.enter({type:"tableRow",children:[]},t)}function CC(t){this.exit(t)}function IR(t){this.enter({type:"tableCell",children:[]},t)}function hie(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,fie));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function fie(t,e){return e==="|"?e:t}function pie(t){const e=t||{},n=e.tableCellPadding,a=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:c,tableRow:l}};function o(x,b,j,w){return u(h(x,j,w),x.align)}function l(x,b,j,w){const _=p(x,j,w),k=u([_]);return k.slice(0,k.indexOf(`
`))}function c(x,b,j,w){const _=j.enter("tableCell"),k=j.enter("phrasing"),C=j.containerPhrasing(x,{...w,before:s,after:s});return k(),_(),C}function u(x,b){return Tae(x,{align:b,alignDelimiters:a,padding:n,stringLength:i})}function h(x,b,j){const w=x.children;let _=-1;const k=[],C=b.enter("table");for(;++_<w.length;)k[_]=p(w[_],b,j);return C(),k}function p(x,b,j){const w=x.children;let _=-1;const k=[],C=b.enter("tableRow");for(;++_<w.length;)k[_]=c(w[_],x,b,j);return C(),k}function m(x,b,j){let w=fU.inlineCode(x,b,j);return j.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function mie(){return{exit:{taskListCheckValueChecked:RR,taskListCheckValueUnchecked:RR,paragraph:yie}}}function gie(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:xie}}}function RR(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function yie(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const a=n.children[0];if(a&&a.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const l=i[s];if(l.type==="paragraph"){o=l;break}}o===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}}this.exit(t)}function xie(t,e,n,a){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(a);s&&l.move(o);let c=fU.listItem(t,e,n,{...a,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(h){return h+o}}function vie(){return[Xre(),xae(),wae(),lie(),mie()]}function bie(t){return{extensions:[Jre(),vae(t),Nae(),pie(t),gie()]}}const jie={tokenize:kie,partial:!0},pU={tokenize:Tie,partial:!0},mU={tokenize:Aie,partial:!0},gU={tokenize:Pie,partial:!0},wie={tokenize:Eie,partial:!0},yU={name:"wwwAutolink",tokenize:_ie,previous:vU},xU={name:"protocolAutolink",tokenize:Cie,previous:bU},Kc={name:"emailAutolink",tokenize:Sie,previous:jU},Hl={};function Nie(){return{text:Hl}}let Gh=48;for(;Gh<123;)Hl[Gh]=Kc,Gh++,Gh===58?Gh=65:Gh===91&&(Gh=97);Hl[43]=Kc;Hl[45]=Kc;Hl[46]=Kc;Hl[95]=Kc;Hl[72]=[Kc,xU];Hl[104]=[Kc,xU];Hl[87]=[Kc,yU];Hl[119]=[Kc,yU];function Sie(t,e,n){const a=this;let i,s;return o;function o(p){return!VP(p)||!jU.call(a,a.previous)||jO(a.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(p))}function l(p){return VP(p)?(t.consume(p),l):p===64?(t.consume(p),c):n(p)}function c(p){return p===46?t.check(wie,h,u)(p):p===45||p===95||yi(p)?(s=!0,t.consume(p),c):h(p)}function u(p){return t.consume(p),i=!0,c}function h(p){return s&&i&&Li(a.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function _ie(t,e,n){const a=this;return i;function i(o){return o!==87&&o!==119||!vU.call(a,a.previous)||jO(a.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(jie,t.attempt(pU,t.attempt(mU,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Cie(t,e,n){const a=this;let i="",s=!1;return o;function o(p){return(p===72||p===104)&&bU.call(a,a.previous)&&!jO(a.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),t.consume(p),l):n(p)}function l(p){if(Li(p)&&i.length<5)return i+=String.fromCodePoint(p),t.consume(p),l;if(p===58){const m=i.toLowerCase();if(m==="http"||m==="https")return t.consume(p),c}return n(p)}function c(p){return p===47?(t.consume(p),s?u:(s=!0,c)):n(p)}function u(p){return p===null||Sw(p)||Er(p)||Pf(p)||YN(p)?n(p):t.attempt(pU,t.attempt(mU,h),n)(p)}function h(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function kie(t,e,n){let a=0;return i;function i(o){return(o===87||o===119)&&a<3?(a++,t.consume(o),i):o===46&&a===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Tie(t,e,n){let a,i,s;return o;function o(u){return u===46||u===95?t.check(gU,c,l)(u):u===null||Er(u)||Pf(u)||u!==45&&YN(u)?c(u):(s=!0,t.consume(u),o)}function l(u){return u===95?a=!0:(i=a,a=void 0),t.consume(u),o}function c(u){return i||a||!s?n(u):e(u)}}function Aie(t,e){let n=0,a=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&a<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(gU,e,s)(o):o===null||Er(o)||Pf(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&a++,t.consume(o),i}}function Pie(t,e,n){return a;function a(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),a):l===38?(t.consume(l),s):l===93?(t.consume(l),i):l===60||l===null||Er(l)||Pf(l)?e(l):n(l)}function i(l){return l===null||l===40||l===91||Er(l)||Pf(l)?e(l):a(l)}function s(l){return Li(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),a):Li(l)?(t.consume(l),o):n(l)}}function Eie(t,e,n){return a;function a(s){return t.consume(s),i}function i(s){return yi(s)?n(s):e(s)}}function vU(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Er(t)}function bU(t){return!Li(t)}function jU(t){return!(t===47||VP(t))}function VP(t){return t===43||t===45||t===46||t===95||yi(t)}function jO(t){let e=t.length,n=!1;for(;e--;){const a=t[e][1];if((a.type==="labelLink"||a.type==="labelImage")&&!a._balanced){n=!0;break}if(a._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Die={tokenize:Bie,partial:!0};function Oie(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Lie,continuation:{tokenize:Fie},exit:$ie}},text:{91:{name:"gfmFootnoteCall",tokenize:Rie},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Mie,resolveTo:Iie}}}}function Mie(t,e,n){const a=this;let i=a.events.length;const s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let o;for(;i--;){const c=a.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=zo(a.sliceSerialize({start:o.end,end:a.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function Iie(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const a={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",a,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",a,e]];return t.splice(n,t.length-n+1,...l),t}function Rie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s=0,o;return l;function l(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(p){if(s>999||p===93&&!o||p===null||p===91||Er(p))return n(p);if(p===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return i.includes(zo(a.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Er(p)||(o=!0),s++,t.consume(p),p===92?h:u}function h(p){return p===91||p===92||p===93?(t.consume(p),s++,u):u(p)}}function Lie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(b){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(b){return b===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",h):n(b)}function h(b){if(o>999||b===93&&!l||b===null||b===91||Er(b))return n(b);if(b===93){t.exit("chunkString");const j=t.exit("gfmFootnoteDefinitionLabelString");return s=zo(a.sliceSerialize(j)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return Er(b)||(l=!0),o++,t.consume(b),b===92?p:h}function p(b){return b===91||b===92||b===93?(t.consume(b),o++,h):h(b)}function m(b){return b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),i.includes(s)||i.push(s),Yn(t,x,"gfmFootnoteDefinitionWhitespace")):n(b)}function x(b){return e(b)}}function Fie(t,e,n){return t.check(Bb,e,t.attempt(Die,e,n))}function $ie(t){t.exit("gfmFootnoteDefinition")}function Bie(t,e,n){const a=this;return Yn(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function zie(t){let n=(t||{}).singleTilde;const a={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}};function i(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},m=[["enter",h,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",p,l]],x=l.parser.constructs.insideSpan.null;x&&Rs(m,m.length,0,QN(x,o.slice(u+1,c),l)),Rs(m,m.length,0,[["exit",p,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",h,l]]),Rs(o,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,h=this.events;let p=0;return m;function m(b){return u===126&&h[h.length-1][1].type!=="characterEscape"?c(b):(o.enter("strikethroughSequenceTemporary"),x(b))}function x(b){const j=cg(u);if(b===126)return p>1?c(b):(o.consume(b),p++,x);if(p<2&&!n)return c(b);const w=o.exit("strikethroughSequenceTemporary"),_=cg(b);return w._open=!_||_===2&&!!j,w._close=!j||j===2&&!!_,l(b)}}}class qie{constructor(){this.map=[]}add(e,n,a){Uie(this,e,n,a)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const a=[];for(;n>0;)n-=1,a.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];a.push(e.slice()),e.length=0;let i=a.pop();for(;i;){for(const s of i)e.push(s);i=a.pop()}this.map.length=0}}function Uie(t,e,n,a){let i=0;if(!(n===0&&a.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...a);return}i+=1}t.map.push([e,n,a])}}function Vie(t,e){let n=!1;const a=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&a.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=a.length-1;a[s]=a[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return a}function Hie(){return{flow:{null:{name:"table",tokenize:Gie,resolveAll:Wie}}}}function Gie(t,e,n){const a=this;let i=0,s=0,o;return l;function l(B){let R=a.events.length-1;for(;R>-1;){const K=a.events[R][1].type;if(K==="lineEnding"||K==="linePrefix")R--;else break}const z=R>-1?a.events[R][1].type:null,G=z==="tableHead"||z==="tableRow"?E:c;return G===E&&a.parser.lazy[a.now().line]?n(B):G(B)}function c(B){return t.enter("tableHead"),t.enter("tableRow"),u(B)}function u(B){return B===124||(o=!0,s+=1),h(B)}function h(B){return B===null?n(B):Jt(B)?s>1?(s=0,a.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),x):n(B):In(B)?Yn(t,h,"whitespace")(B):(s+=1,o&&(o=!1,i+=1),B===124?(t.enter("tableCellDivider"),t.consume(B),t.exit("tableCellDivider"),o=!0,h):(t.enter("data"),p(B)))}function p(B){return B===null||B===124||Er(B)?(t.exit("data"),h(B)):(t.consume(B),B===92?m:p)}function m(B){return B===92||B===124?(t.consume(B),p):p(B)}function x(B){return a.interrupt=!1,a.parser.lazy[a.now().line]?n(B):(t.enter("tableDelimiterRow"),o=!1,In(B)?Yn(t,b,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):b(B))}function b(B){return B===45||B===58?w(B):B===124?(o=!0,t.enter("tableCellDivider"),t.consume(B),t.exit("tableCellDivider"),j):T(B)}function j(B){return In(B)?Yn(t,w,"whitespace")(B):w(B)}function w(B){return B===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(B),t.exit("tableDelimiterMarker"),_):B===45?(s+=1,_(B)):B===null||Jt(B)?A(B):T(B)}function _(B){return B===45?(t.enter("tableDelimiterFiller"),k(B)):T(B)}function k(B){return B===45?(t.consume(B),k):B===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(B),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C(B))}function C(B){return In(B)?Yn(t,A,"whitespace")(B):A(B)}function A(B){return B===124?b(B):B===null||Jt(B)?!o||i!==s?T(B):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(B)):T(B)}function T(B){return n(B)}function E(B){return t.enter("tableRow"),I(B)}function I(B){return B===124?(t.enter("tableCellDivider"),t.consume(B),t.exit("tableCellDivider"),I):B===null||Jt(B)?(t.exit("tableRow"),e(B)):In(B)?Yn(t,I,"whitespace")(B):(t.enter("data"),$(B))}function $(B){return B===null||B===124||Er(B)?(t.exit("data"),I(B)):(t.consume(B),B===92?U:$)}function U(B){return B===92||B===124?(t.consume(B),$):$(B)}}function Wie(t,e){let n=-1,a=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,h,p;const m=new qie;for(;++n<t.length;){const x=t[n],b=x[1];x[0]==="enter"?b.type==="tableHead"?(l=!1,c!==0&&(LR(m,e,c,u,h),h=void 0,c=0),u={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},m.add(n,0,[["enter",u,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(a=!0,p=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},m.add(n,0,[["enter",h,e]])),i=b.type==="tableDelimiterRow"?2:h?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(a=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=C1(m,e,s,i,void 0,p),s=[0,0,0,0]),o[2]=n)):b.type==="tableCellDivider"&&(a?a=!1:(s[1]!==0&&(o[0]=o[1],p=C1(m,e,s,i,void 0,p)),s=o,o=[s[1],n,0,0])):b.type==="tableHead"?(l=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],p=C1(m,e,s,i,n,p)):o[1]!==0&&(p=C1(m,e,o,i,n,p)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&LR(m,e,c,u,h),m.consume(e.events),n=-1;++n<e.events.length;){const x=e.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=Vie(e.events,n))}return t}function C1(t,e,n,a,i,s){const o=a===1?"tableHeader":a===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Mm(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=Mm(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=Mm(e.events,n[2]),h=Mm(e.events,n[3]),p={type:l,start:Object.assign({},u),end:Object.assign({},h)};if(t.add(n[2],0,[["enter",p,e]]),a!==2){const m=e.events[n[2]],x=e.events[n[3]];if(m[1].end=Object.assign({},x[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,j=n[3]-n[2]-1;t.add(b,j,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return i!==void 0&&(s.end=Object.assign({},Mm(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function LR(t,e,n,a,i){const s=[],o=Mm(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),a.end=Object.assign({},o),s.push(["exit",a,e]),t.add(n+1,0,s)}function Mm(t,e){const n=t[e],a=n[0]==="enter"?"start":"end";return n[1][a]}const Kie={name:"tasklistCheck",tokenize:Qie};function Yie(){return{text:{91:Kie}}}function Qie(t,e,n){const a=this;return i;function i(c){return a.previous!==null||!a._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return Er(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Jt(c)?e(c):In(c)?t.check({tokenize:Xie},e,n)(c):n(c)}}function Xie(t,e,n){return Yn(t,a,"whitespace");function a(i){return i===null?n(i):e(i)}}function Jie(t){return Dq([Nie(),Oie(),zie(t),Hie(),Yie()])}const Zie={};function xd(t){const e=this,n=t||Zie,a=e.data(),i=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),o=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);i.push(Jie(n)),s.push(vie()),o.push(bie(n))}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ese,tse;function nse(){return{geminiUrl:ese,vertexUrl:tse}}function rse(t,e,n){var a,i,s;if(!(!((a=t.httpOptions)===null||a===void 0)&&a.baseUrl)){const o=nse();return t.vertexai?(i=o.vertexUrl)!==null&&i!==void 0?i:e:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qb{}function un(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(a,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function O(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let u=0;u<c.length;u++){const h=c[u];O(h,e.slice(s+1),n[u])}else for(const u of c)O(u,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];O(c[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const a=e[e.length-1],i=t[a];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else t[a]=n}function D(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const a=e[n];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(o=>D(o,e.slice(n+1))):void 0}else return}else t=t[a]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function wU(t,e){const n=Zr(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function NU(t,e){return Array.isArray(e)?e.map(n=>Tw(t,n)):[Tw(t,e)]}function Tw(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function ase(t,e){const n=Tw(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function ise(t,e){const n=Tw(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function FR(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function SU(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>FR(t,n)):[FR(t,e)]}function HP(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function $R(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function BR(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function us(t,e){if(e==null)throw new Error("ContentUnion is required");return HP(e)?e:{role:"user",parts:SU(t,e)}}function _U(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const a=us(t,n);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(t.isVertexAI()){const n=us(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>us(t,n)):[us(t,e)]}function wd(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if($R(e)||BR(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[us(t,e)]}const n=[],a=[],i=HP(e[0]);for(const s of e){const o=HP(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)n.push(s);else{if($R(s)||BR(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");a.push(s)}}return i||n.push({role:"user",parts:SU(t,a)}),n}function CU(t,e){return e}function kU(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function eS(t,e){return e}function tS(t,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function sse(t,e,n,a=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===a;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Nd(t,e){if(typeof e!="string")throw new Error("name must be a string");return sse(t,e,"cachedContents")}function TU(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Sd(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function ose(t){return t!=null&&typeof t=="object"&&"name"in t}function lse(t){return t!=null&&typeof t=="object"&&"video"in t}function cse(t){return t!=null&&typeof t=="object"&&"uri"in t}function AU(t,e){var n;let a;if(ose(e)&&(a=e.name),!(cse(e)&&(a=e.uri,a===void 0))&&!(lse(e)&&(a=(n=e.video)===null||n===void 0?void 0:n.uri,a===void 0))){if(typeof e=="string"&&(a=e),a===void 0)throw new Error("Could not extract file name from the provided input.");if(a.startsWith("https://")){const s=a.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${a}`);a=s[0]}else a.startsWith("files/")&&(a=a.split("files/")[1]);return a}}function PU(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function EU(t,e){for(const n of["models","tunedModels","publisherModels"])if(use(e,n))return e[n];return[]}function use(t,e){return t!==null&&typeof t=="object"&&e in t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dse(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function hse(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],dse(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const h=D(e,["text"]);return h!=null&&O(n,["text"],h),n}function zR(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>hse(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function fse(){return{}}function pse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function mse(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],pse(t,a)),n}function gse(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],fse());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],mse(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function yse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function xse(t,e){const n={},a=D(e,["functionCallingConfig"]);if(a!=null&&O(n,["functionCallingConfig"],yse(t,a)),D(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function vse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);n!==void 0&&s!=null&&O(n,["expireTime"],s);const o=D(e,["displayName"]);n!==void 0&&o!=null&&O(n,["displayName"],o);const l=D(e,["contents"]);if(n!==void 0&&l!=null){let p=wd(t,l);Array.isArray(p)&&(p=p.map(m=>zR(t,m))),O(n,["contents"],p)}const c=D(e,["systemInstruction"]);n!==void 0&&c!=null&&O(n,["systemInstruction"],zR(t,us(t,c)));const u=D(e,["tools"]);if(n!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>gse(t,m))),O(n,["tools"],p)}const h=D(e,["toolConfig"]);return n!==void 0&&h!=null&&O(n,["toolConfig"],xse(t,h)),a}function bse(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],wU(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],vse(t,i,n)),n}function jse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],Nd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function wse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],Nd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Nse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);return n!==void 0&&s!=null&&O(n,["expireTime"],s),a}function Sse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],Nd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Nse(t,i,n)),n}function _se(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function Cse(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],_se(t,a,n)),n}function kse(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Tse(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],kse(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const h=D(e,["functionResponse"]);h!=null&&O(n,["functionResponse"],h);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function qR(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Tse(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Ase(){return{}}function Pse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Ese(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Pse(t,a)),n}function Dse(){return{}}function Ose(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function Mse(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],Ose(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function Ise(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],Mse(t,a)),n}function Rse(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Ase());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],Ese(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],Dse());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],Ise(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const u=D(e,["functionDeclarations"]);return u!=null&&O(n,["functionDeclarations"],u),n}function Lse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function Fse(t,e){const n={},a=D(e,["latitude"]);a!=null&&O(n,["latitude"],a);const i=D(e,["longitude"]);return i!=null&&O(n,["longitude"],i),n}function $se(t,e){const n={},a=D(e,["latLng"]);return a!=null&&O(n,["latLng"],Fse(t,a)),n}function Bse(t,e){const n={},a=D(e,["functionCallingConfig"]);a!=null&&O(n,["functionCallingConfig"],Lse(t,a));const i=D(e,["retrievalConfig"]);return i!=null&&O(n,["retrievalConfig"],$se(t,i)),n}function zse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);n!==void 0&&s!=null&&O(n,["expireTime"],s);const o=D(e,["displayName"]);n!==void 0&&o!=null&&O(n,["displayName"],o);const l=D(e,["contents"]);if(n!==void 0&&l!=null){let p=wd(t,l);Array.isArray(p)&&(p=p.map(m=>qR(t,m))),O(n,["contents"],p)}const c=D(e,["systemInstruction"]);n!==void 0&&c!=null&&O(n,["systemInstruction"],qR(t,us(t,c)));const u=D(e,["tools"]);if(n!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>Rse(t,m))),O(n,["tools"],p)}const h=D(e,["toolConfig"]);return n!==void 0&&h!=null&&O(n,["toolConfig"],Bse(t,h)),a}function qse(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],wU(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],zse(t,i,n)),n}function Use(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],Nd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Vse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],Nd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Hse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);return n!==void 0&&s!=null&&O(n,["expireTime"],s),a}function Gse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],Nd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Hse(t,i,n)),n}function Wse(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function Kse(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Wse(t,a,n)),n}function ow(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["model"]);s!=null&&O(n,["model"],s);const o=D(e,["createTime"]);o!=null&&O(n,["createTime"],o);const l=D(e,["updateTime"]);l!=null&&O(n,["updateTime"],l);const c=D(e,["expireTime"]);c!=null&&O(n,["expireTime"],c);const u=D(e,["usageMetadata"]);return u!=null&&O(n,["usageMetadata"],u),n}function Yse(){return{}}function Qse(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>ow(t,o))),O(n,["cachedContents"],s)}return n}function lw(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["model"]);s!=null&&O(n,["model"],s);const o=D(e,["createTime"]);o!=null&&O(n,["createTime"],o);const l=D(e,["updateTime"]);l!=null&&O(n,["updateTime"],l);const c=D(e,["expireTime"]);c!=null&&O(n,["expireTime"],c);const u=D(e,["usageMetadata"]);return u!=null&&O(n,["usageMetadata"],u),n}function Xse(){return{}}function Jse(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>lw(t,o))),O(n,["cachedContents"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ug;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ug||(ug={}));class nS{constructor(e,n,a,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,a,i)}init(e,n,a){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};a?typeof a=="object"?o=Object.assign({},a):o=a:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var UR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(UR||(UR={}));var VR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(VR||(VR={}));var HR;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(HR||(HR={}));var GR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(GR||(GR={}));var WR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(WR||(WR={}));var KR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(KR||(KR={}));var YR;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(YR||(YR={}));var dg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"})(dg||(dg={}));var QR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY"})(QR||(QR={}));var XR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(XR||(XR={}));var JR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(JR||(JR={}));var ZR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(ZR||(ZR={}));var e4;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(e4||(e4={}));var vd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(vd||(vd={}));var t4;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(t4||(t4={}));var GP;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(GP||(GP={}));var n4;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(n4||(n4={}));var r4;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(r4||(r4={}));var a4;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(a4||(a4={}));var i4;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(i4||(i4={}));var s4;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(s4||(s4={}));var o4;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(o4||(o4={}));var l4;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(l4||(l4={}));var c4;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(c4||(c4={}));var u4;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(u4||(u4={}));var d4;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(d4||(d4={}));var h4;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(h4||(h4={}));var f4;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(f4||(f4={}));var p4;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(p4||(p4={}));var m4;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(m4||(m4={}));var g4;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(g4||(g4={}));var y4;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(y4||(y4={}));var x4;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(x4||(x4={}));var v4;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(v4||(v4={}));class k1{get text(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const p=[];for(const m of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,b]of Object.entries(m))x!=="text"&&x!=="thought"&&(b!==null||b!==void 0)&&p.push(x);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const p of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[m,x]of Object.entries(p))m!=="inlineData"&&(x!==null||x!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,a,i,s,o,l,c,u;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,a,i,s,o,l,c,u;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.output}}class b4{}class j4{}class Zse{}class eoe{}class w4{}class N4{}class S4{}class toe{}class _4{}class C4{}class k4{}class noe{}class WP{constructor(e){const n={};for(const a of e.headers.entries())n[a[0]]=a[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class roe{}class aoe{}class ioe{get text(){var e,n,a;let i="",s=!1;const o=[];for(const l of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[c,u]of Object.entries(l))c!=="text"&&c!=="thought"&&u!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,i+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,a;let i="";const s=[];for(const o of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class soe extends qb{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new nS(ug.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(n),n)}async create(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=qse(this.apiClient,e);return l=un("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>lw(this.apiClient,h))}else{const u=bse(this.apiClient,e);return l=un("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>ow(this.apiClient,h))}}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Use(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>lw(this.apiClient,h))}else{const u=jse(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>ow(this.apiClient,h))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Vse(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(()=>{const h=Xse(),p=new C4;return Object.assign(p,h),p})}else{const u=wse(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(()=>{const h=Yse(),p=new C4;return Object.assign(p,h),p})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Gse(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>lw(this.apiClient,h))}else{const u=Sse(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>ow(this.apiClient,h))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Kse(this.apiClient,e);return l=un("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Jse(this.apiClient,h),m=new k4;return Object.assign(m,p),m})}else{const u=Cse(this.apiClient,e);return l=un("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Qse(this.apiClient,h),m=new k4;return Object.assign(m,p),m})}}}function T4(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],a=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mi(t){return this instanceof mi?(this.v=t,this):new mi(t)}function Aw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(x){return function(b){return Promise.resolve(b).then(x,p)}}function l(x,b){a[x]&&(i[x]=function(j){return new Promise(function(w,_){s.push([x,j,w,_])>1||c(x,j)})},b&&(i[x]=b(i[x])))}function c(x,b){try{u(a[x](b))}catch(j){m(s[0][3],j)}}function u(x){x.value instanceof mi?Promise.resolve(x.value.v).then(h,p):m(s[0][2],x)}function h(x){c("next",x)}function p(x){c("throw",x)}function m(x,b){x(b),s.shift(),s.length&&c(s[0][0],s[0][1])}}function KP(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof T4=="function"?T4(t):t[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(s){n[s]=t[s]&&function(o){return new Promise(function(l,c){o=t[s](o),i(l,c,o.done,o.value)})}}function i(s,o,l,c){Promise.resolve(c).then(function(u){s({value:u,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ooe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:DU(n)}function DU(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function loe(t){if(t.length!==0){if(t[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function coe(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let a=0,i=t[0];for(;a<n;)if(t[a].role==="user")i=t[a],a++;else{const s=[];let o=!0;for(;a<n&&t[a].role==="model";)s.push(t[a]),o&&!DU(t[a])&&(o=!1),a++;o&&(e.push(i),e.push(...s))}return e}class uoe{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new doe(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class doe{constructor(e,n,a,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=a,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),loe(s)}async sendMessage(e){var n;await this.sendPromise;const a=us(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o;const c=(o=(s=(await i).candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=c?[c]:[];this.recordHistory(a,u)})(),await this.sendPromise,i}async sendMessageStream(e){var n;await this.sendPromise;const a=us(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,a)}getHistory(e=!1){return e?coe(this.history):this.history}processStreamResponse(e,n){var a,i;return Aw(this,arguments,function*(){var o,l,c,u;const h=[];try{for(var p=!0,m=KP(e),x;x=yield mi(m.next()),o=x.done,!o;p=!0){u=x.value,p=!1;const b=u;if(ooe(b)){const j=(i=(a=b.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content;j!==void 0&&h.push(j)}yield yield mi(b)}}catch(b){l={error:b}}finally{try{!p&&!o&&(c=m.return)&&(yield mi(c.call(m)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(e,n){let a=[];n.length>0&&n.every(i=>i.role==="model")?a=n:a.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hoe(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function foe(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],hoe(t,a,n)),n}function poe(t,e){const n={},a=D(e,["details"]);a!=null&&O(n,["details"],a);const i=D(e,["message"]);i!=null&&O(n,["message"],i);const s=D(e,["code"]);return s!=null&&O(n,["code"],s),n}function moe(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["mimeType"]);s!=null&&O(n,["mimeType"],s);const o=D(e,["sizeBytes"]);o!=null&&O(n,["sizeBytes"],o);const l=D(e,["createTime"]);l!=null&&O(n,["createTime"],l);const c=D(e,["expirationTime"]);c!=null&&O(n,["expirationTime"],c);const u=D(e,["updateTime"]);u!=null&&O(n,["updateTime"],u);const h=D(e,["sha256Hash"]);h!=null&&O(n,["sha256Hash"],h);const p=D(e,["uri"]);p!=null&&O(n,["uri"],p);const m=D(e,["downloadUri"]);m!=null&&O(n,["downloadUri"],m);const x=D(e,["state"]);x!=null&&O(n,["state"],x);const b=D(e,["source"]);b!=null&&O(n,["source"],b);const j=D(e,["videoMetadata"]);j!=null&&O(n,["videoMetadata"],j);const w=D(e,["error"]);return w!=null&&O(n,["error"],poe(t,w)),n}function goe(t,e){const n={},a=D(e,["file"]);a!=null&&O(n,["file"],moe(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function yoe(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","file"],AU(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function xoe(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","file"],AU(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function voe(t,e){const n={},a=D(e,["details"]);a!=null&&O(n,["details"],a);const i=D(e,["message"]);i!=null&&O(n,["message"],i);const s=D(e,["code"]);return s!=null&&O(n,["code"],s),n}function YP(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["mimeType"]);s!=null&&O(n,["mimeType"],s);const o=D(e,["sizeBytes"]);o!=null&&O(n,["sizeBytes"],o);const l=D(e,["createTime"]);l!=null&&O(n,["createTime"],l);const c=D(e,["expirationTime"]);c!=null&&O(n,["expirationTime"],c);const u=D(e,["updateTime"]);u!=null&&O(n,["updateTime"],u);const h=D(e,["sha256Hash"]);h!=null&&O(n,["sha256Hash"],h);const p=D(e,["uri"]);p!=null&&O(n,["uri"],p);const m=D(e,["downloadUri"]);m!=null&&O(n,["downloadUri"],m);const x=D(e,["state"]);x!=null&&O(n,["state"],x);const b=D(e,["source"]);b!=null&&O(n,["source"],b);const j=D(e,["videoMetadata"]);j!=null&&O(n,["videoMetadata"],j);const w=D(e,["error"]);return w!=null&&O(n,["error"],voe(t,w)),n}function boe(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>YP(t,o))),O(n,["files"],s)}return n}function joe(){return{}}function woe(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Noe extends qb{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new nS(ug.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>YP(this.apiClient,n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=foe(this.apiClient,e);return s=un("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const u=boe(this.apiClient,c),h=new noe;return Object.assign(h,u),h})}}async createInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=goe(this.apiClient,e);return s=un("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=joe(),u=new roe;return Object.assign(u,c),u})}}async get(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=yoe(this.apiClient,e);return s=un("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>YP(this.apiClient,c))}}async delete(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=xoe(this.apiClient,e);return s=un("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=woe(),u=new aoe;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Soe(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function _oe(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Coe(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Soe(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const h=D(e,["text"]);return h!=null&&O(n,["text"],h),n}function koe(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],_oe(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const h=D(e,["functionResponse"]);h!=null&&O(n,["functionResponse"],h);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function Toe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Coe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Aoe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>koe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Poe(){return{}}function Eoe(){return{}}function Doe(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Ooe(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Moe(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Doe(t,a)),n}function Ioe(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Ooe(t,a)),n}function Roe(){return{}}function Loe(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function Foe(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],Loe(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function $oe(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],Foe(t,a)),n}function Boe(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Poe());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],Moe(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function zoe(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Eoe());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],Ioe(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],Roe());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],$oe(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const u=D(e,["functionDeclarations"]);return u!=null&&O(n,["functionDeclarations"],u),n}function qoe(t,e){const n={},a=D(e,["handle"]);if(a!=null&&O(n,["handle"],a),D(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function Uoe(t,e){const n={},a=D(e,["handle"]);a!=null&&O(n,["handle"],a);const i=D(e,["transparent"]);return i!=null&&O(n,["transparent"],i),n}function A4(){return{}}function P4(){return{}}function Voe(t,e){const n={},a=D(e,["disabled"]);a!=null&&O(n,["disabled"],a);const i=D(e,["startOfSpeechSensitivity"]);i!=null&&O(n,["startOfSpeechSensitivity"],i);const s=D(e,["endOfSpeechSensitivity"]);s!=null&&O(n,["endOfSpeechSensitivity"],s);const o=D(e,["prefixPaddingMs"]);o!=null&&O(n,["prefixPaddingMs"],o);const l=D(e,["silenceDurationMs"]);return l!=null&&O(n,["silenceDurationMs"],l),n}function Hoe(t,e){const n={},a=D(e,["disabled"]);a!=null&&O(n,["disabled"],a);const i=D(e,["startOfSpeechSensitivity"]);i!=null&&O(n,["startOfSpeechSensitivity"],i);const s=D(e,["endOfSpeechSensitivity"]);s!=null&&O(n,["endOfSpeechSensitivity"],s);const o=D(e,["prefixPaddingMs"]);o!=null&&O(n,["prefixPaddingMs"],o);const l=D(e,["silenceDurationMs"]);return l!=null&&O(n,["silenceDurationMs"],l),n}function Goe(t,e){const n={},a=D(e,["automaticActivityDetection"]);a!=null&&O(n,["automaticActivityDetection"],Voe(t,a));const i=D(e,["activityHandling"]);i!=null&&O(n,["activityHandling"],i);const s=D(e,["turnCoverage"]);return s!=null&&O(n,["turnCoverage"],s),n}function Woe(t,e){const n={},a=D(e,["automaticActivityDetection"]);a!=null&&O(n,["automaticActivityDetection"],Hoe(t,a));const i=D(e,["activityHandling"]);i!=null&&O(n,["activityHandling"],i);const s=D(e,["turnCoverage"]);return s!=null&&O(n,["turnCoverage"],s),n}function Koe(t,e){const n={},a=D(e,["targetTokens"]);return a!=null&&O(n,["targetTokens"],a),n}function Yoe(t,e){const n={},a=D(e,["targetTokens"]);return a!=null&&O(n,["targetTokens"],a),n}function Qoe(t,e){const n={},a=D(e,["triggerTokens"]);a!=null&&O(n,["triggerTokens"],a);const i=D(e,["slidingWindow"]);return i!=null&&O(n,["slidingWindow"],Koe(t,i)),n}function Xoe(t,e){const n={},a=D(e,["triggerTokens"]);a!=null&&O(n,["triggerTokens"],a);const i=D(e,["slidingWindow"]);return i!=null&&O(n,["slidingWindow"],Yoe(t,i)),n}function Joe(t,e,n){const a={},i=D(e,["generationConfig"]);n!==void 0&&i!=null&&O(n,["setup","generationConfig"],i);const s=D(e,["responseModalities"]);n!==void 0&&s!=null&&O(n,["setup","generationConfig","responseModalities"],s);const o=D(e,["temperature"]);n!==void 0&&o!=null&&O(n,["setup","generationConfig","temperature"],o);const l=D(e,["topP"]);n!==void 0&&l!=null&&O(n,["setup","generationConfig","topP"],l);const c=D(e,["topK"]);n!==void 0&&c!=null&&O(n,["setup","generationConfig","topK"],c);const u=D(e,["maxOutputTokens"]);n!==void 0&&u!=null&&O(n,["setup","generationConfig","maxOutputTokens"],u);const h=D(e,["mediaResolution"]);n!==void 0&&h!=null&&O(n,["setup","generationConfig","mediaResolution"],h);const p=D(e,["seed"]);n!==void 0&&p!=null&&O(n,["setup","generationConfig","seed"],p);const m=D(e,["speechConfig"]);n!==void 0&&m!=null&&O(n,["setup","generationConfig","speechConfig"],m);const x=D(e,["systemInstruction"]);n!==void 0&&x!=null&&O(n,["setup","systemInstruction"],Toe(t,us(t,x)));const b=D(e,["tools"]);if(n!==void 0&&b!=null){let A=tS(t,b);Array.isArray(A)&&(A=A.map(T=>Boe(t,eS(t,T)))),O(n,["setup","tools"],A)}const j=D(e,["sessionResumption"]);n!==void 0&&j!=null&&O(n,["setup","sessionResumption"],qoe(t,j));const w=D(e,["inputAudioTranscription"]);n!==void 0&&w!=null&&O(n,["setup","inputAudioTranscription"],A4());const _=D(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&O(n,["setup","outputAudioTranscription"],A4());const k=D(e,["realtimeInputConfig"]);n!==void 0&&k!=null&&O(n,["setup","realtimeInputConfig"],Goe(t,k));const C=D(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&O(n,["setup","contextWindowCompression"],Qoe(t,C)),a}function Zoe(t,e,n){const a={},i=D(e,["generationConfig"]);n!==void 0&&i!=null&&O(n,["setup","generationConfig"],i);const s=D(e,["responseModalities"]);n!==void 0&&s!=null&&O(n,["setup","generationConfig","responseModalities"],s);const o=D(e,["temperature"]);n!==void 0&&o!=null&&O(n,["setup","generationConfig","temperature"],o);const l=D(e,["topP"]);n!==void 0&&l!=null&&O(n,["setup","generationConfig","topP"],l);const c=D(e,["topK"]);n!==void 0&&c!=null&&O(n,["setup","generationConfig","topK"],c);const u=D(e,["maxOutputTokens"]);n!==void 0&&u!=null&&O(n,["setup","generationConfig","maxOutputTokens"],u);const h=D(e,["mediaResolution"]);n!==void 0&&h!=null&&O(n,["setup","generationConfig","mediaResolution"],h);const p=D(e,["seed"]);n!==void 0&&p!=null&&O(n,["setup","generationConfig","seed"],p);const m=D(e,["speechConfig"]);n!==void 0&&m!=null&&O(n,["setup","generationConfig","speechConfig"],m);const x=D(e,["systemInstruction"]);n!==void 0&&x!=null&&O(n,["setup","systemInstruction"],Aoe(t,us(t,x)));const b=D(e,["tools"]);if(n!==void 0&&b!=null){let A=tS(t,b);Array.isArray(A)&&(A=A.map(T=>zoe(t,eS(t,T)))),O(n,["setup","tools"],A)}const j=D(e,["sessionResumption"]);n!==void 0&&j!=null&&O(n,["setup","sessionResumption"],Uoe(t,j));const w=D(e,["inputAudioTranscription"]);n!==void 0&&w!=null&&O(n,["setup","inputAudioTranscription"],P4());const _=D(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&O(n,["setup","outputAudioTranscription"],P4());const k=D(e,["realtimeInputConfig"]);n!==void 0&&k!=null&&O(n,["setup","realtimeInputConfig"],Woe(t,k));const C=D(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&O(n,["setup","contextWindowCompression"],Xoe(t,C)),a}function ele(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["setup","model"],Zr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Joe(t,i,n)),n}function tle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["setup","model"],Zr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Zoe(t,i,n)),n}function nle(){return{}}function rle(){return{}}function ale(){return{}}function ile(){return{}}function sle(t,e){const n={},a=D(e,["media"]);a!=null&&O(n,["mediaChunks"],NU(t,a));const i=D(e,["audio"]);i!=null&&O(n,["audio"],ise(t,i));const s=D(e,["audioStreamEnd"]);s!=null&&O(n,["audioStreamEnd"],s);const o=D(e,["video"]);o!=null&&O(n,["video"],ase(t,o));const l=D(e,["text"]);return l!=null&&O(n,["text"],l),D(e,["activityStart"])!=null&&O(n,["activityStart"],nle()),D(e,["activityEnd"])!=null&&O(n,["activityEnd"],ale()),n}function ole(t,e){const n={},a=D(e,["media"]);if(a!=null&&O(n,["mediaChunks"],NU(t,a)),D(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=D(e,["audioStreamEnd"]);if(i!=null&&O(n,["audioStreamEnd"],i),D(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(D(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return D(e,["activityStart"])!=null&&O(n,["activityStart"],rle()),D(e,["activityEnd"])!=null&&O(n,["activityEnd"],ile()),n}function lle(){return{}}function cle(){return{}}function ule(t,e){const n={},a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function dle(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function hle(t,e){const n={},a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],ule(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const h=D(e,["text"]);return h!=null&&O(n,["text"],h),n}function fle(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],dle(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const h=D(e,["functionResponse"]);h!=null&&O(n,["functionResponse"],h);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function ple(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>hle(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function mle(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>fle(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function E4(t,e){const n={},a=D(e,["text"]);a!=null&&O(n,["text"],a);const i=D(e,["finished"]);return i!=null&&O(n,["finished"],i),n}function D4(t,e){const n={},a=D(e,["text"]);a!=null&&O(n,["text"],a);const i=D(e,["finished"]);return i!=null&&O(n,["finished"],i),n}function gle(t,e){const n={},a=D(e,["modelTurn"]);a!=null&&O(n,["modelTurn"],ple(t,a));const i=D(e,["turnComplete"]);i!=null&&O(n,["turnComplete"],i);const s=D(e,["interrupted"]);s!=null&&O(n,["interrupted"],s);const o=D(e,["groundingMetadata"]);o!=null&&O(n,["groundingMetadata"],o);const l=D(e,["generationComplete"]);l!=null&&O(n,["generationComplete"],l);const c=D(e,["inputTranscription"]);c!=null&&O(n,["inputTranscription"],E4(t,c));const u=D(e,["outputTranscription"]);return u!=null&&O(n,["outputTranscription"],E4(t,u)),n}function yle(t,e){const n={},a=D(e,["modelTurn"]);a!=null&&O(n,["modelTurn"],mle(t,a));const i=D(e,["turnComplete"]);i!=null&&O(n,["turnComplete"],i);const s=D(e,["interrupted"]);s!=null&&O(n,["interrupted"],s);const o=D(e,["groundingMetadata"]);o!=null&&O(n,["groundingMetadata"],o);const l=D(e,["generationComplete"]);l!=null&&O(n,["generationComplete"],l);const c=D(e,["inputTranscription"]);c!=null&&O(n,["inputTranscription"],D4(t,c));const u=D(e,["outputTranscription"]);return u!=null&&O(n,["outputTranscription"],D4(t,u)),n}function xle(t,e){const n={},a=D(e,["id"]);a!=null&&O(n,["id"],a);const i=D(e,["args"]);i!=null&&O(n,["args"],i);const s=D(e,["name"]);return s!=null&&O(n,["name"],s),n}function vle(t,e){const n={},a=D(e,["args"]);a!=null&&O(n,["args"],a);const i=D(e,["name"]);return i!=null&&O(n,["name"],i),n}function ble(t,e){const n={},a=D(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>xle(t,s))),O(n,["functionCalls"],i)}return n}function jle(t,e){const n={},a=D(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>vle(t,s))),O(n,["functionCalls"],i)}return n}function wle(t,e){const n={},a=D(e,["ids"]);return a!=null&&O(n,["ids"],a),n}function Nle(t,e){const n={},a=D(e,["ids"]);return a!=null&&O(n,["ids"],a),n}function T1(t,e){const n={},a=D(e,["modality"]);a!=null&&O(n,["modality"],a);const i=D(e,["tokenCount"]);return i!=null&&O(n,["tokenCount"],i),n}function A1(t,e){const n={},a=D(e,["modality"]);a!=null&&O(n,["modality"],a);const i=D(e,["tokenCount"]);return i!=null&&O(n,["tokenCount"],i),n}function Sle(t,e){const n={},a=D(e,["promptTokenCount"]);a!=null&&O(n,["promptTokenCount"],a);const i=D(e,["cachedContentTokenCount"]);i!=null&&O(n,["cachedContentTokenCount"],i);const s=D(e,["responseTokenCount"]);s!=null&&O(n,["responseTokenCount"],s);const o=D(e,["toolUsePromptTokenCount"]);o!=null&&O(n,["toolUsePromptTokenCount"],o);const l=D(e,["thoughtsTokenCount"]);l!=null&&O(n,["thoughtsTokenCount"],l);const c=D(e,["totalTokenCount"]);c!=null&&O(n,["totalTokenCount"],c);const u=D(e,["promptTokensDetails"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(b=>T1(t,b))),O(n,["promptTokensDetails"],x)}const h=D(e,["cacheTokensDetails"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(b=>T1(t,b))),O(n,["cacheTokensDetails"],x)}const p=D(e,["responseTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>T1(t,b))),O(n,["responseTokensDetails"],x)}const m=D(e,["toolUsePromptTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(b=>T1(t,b))),O(n,["toolUsePromptTokensDetails"],x)}return n}function _le(t,e){const n={},a=D(e,["promptTokenCount"]);a!=null&&O(n,["promptTokenCount"],a);const i=D(e,["cachedContentTokenCount"]);i!=null&&O(n,["cachedContentTokenCount"],i);const s=D(e,["candidatesTokenCount"]);s!=null&&O(n,["responseTokenCount"],s);const o=D(e,["toolUsePromptTokenCount"]);o!=null&&O(n,["toolUsePromptTokenCount"],o);const l=D(e,["thoughtsTokenCount"]);l!=null&&O(n,["thoughtsTokenCount"],l);const c=D(e,["totalTokenCount"]);c!=null&&O(n,["totalTokenCount"],c);const u=D(e,["promptTokensDetails"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(j=>A1(t,j))),O(n,["promptTokensDetails"],b)}const h=D(e,["cacheTokensDetails"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(j=>A1(t,j))),O(n,["cacheTokensDetails"],b)}const p=D(e,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(j=>A1(t,j))),O(n,["responseTokensDetails"],b)}const m=D(e,["toolUsePromptTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(j=>A1(t,j))),O(n,["toolUsePromptTokensDetails"],b)}const x=D(e,["trafficType"]);return x!=null&&O(n,["trafficType"],x),n}function Cle(t,e){const n={},a=D(e,["timeLeft"]);return a!=null&&O(n,["timeLeft"],a),n}function kle(t,e){const n={},a=D(e,["timeLeft"]);return a!=null&&O(n,["timeLeft"],a),n}function Tle(t,e){const n={},a=D(e,["newHandle"]);a!=null&&O(n,["newHandle"],a);const i=D(e,["resumable"]);i!=null&&O(n,["resumable"],i);const s=D(e,["lastConsumedClientMessageIndex"]);return s!=null&&O(n,["lastConsumedClientMessageIndex"],s),n}function Ale(t,e){const n={},a=D(e,["newHandle"]);a!=null&&O(n,["newHandle"],a);const i=D(e,["resumable"]);i!=null&&O(n,["resumable"],i);const s=D(e,["lastConsumedClientMessageIndex"]);return s!=null&&O(n,["lastConsumedClientMessageIndex"],s),n}function Ple(t,e){const n={};D(e,["setupComplete"])!=null&&O(n,["setupComplete"],lle());const i=D(e,["serverContent"]);i!=null&&O(n,["serverContent"],gle(t,i));const s=D(e,["toolCall"]);s!=null&&O(n,["toolCall"],ble(t,s));const o=D(e,["toolCallCancellation"]);o!=null&&O(n,["toolCallCancellation"],wle(t,o));const l=D(e,["usageMetadata"]);l!=null&&O(n,["usageMetadata"],Sle(t,l));const c=D(e,["goAway"]);c!=null&&O(n,["goAway"],Cle(t,c));const u=D(e,["sessionResumptionUpdate"]);return u!=null&&O(n,["sessionResumptionUpdate"],Tle(t,u)),n}function Ele(t,e){const n={};D(e,["setupComplete"])!=null&&O(n,["setupComplete"],cle());const i=D(e,["serverContent"]);i!=null&&O(n,["serverContent"],yle(t,i));const s=D(e,["toolCall"]);s!=null&&O(n,["toolCall"],jle(t,s));const o=D(e,["toolCallCancellation"]);o!=null&&O(n,["toolCallCancellation"],Nle(t,o));const l=D(e,["usageMetadata"]);l!=null&&O(n,["usageMetadata"],_le(t,l));const c=D(e,["goAway"]);c!=null&&O(n,["goAway"],kle(t,c));const u=D(e,["sessionResumptionUpdate"]);return u!=null&&O(n,["sessionResumptionUpdate"],Ale(t,u)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dle(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Ole(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Dle(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const h=D(e,["text"]);return h!=null&&O(n,["text"],h),n}function rS(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Ole(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Mle(t,e){const n={};if(D(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=D(e,["category"]);a!=null&&O(n,["category"],a);const i=D(e,["threshold"]);return i!=null&&O(n,["threshold"],i),n}function Ile(){return{}}function Rle(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Lle(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Rle(t,a)),n}function Fle(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Ile());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],Lle(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function $le(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function Ble(t,e){const n={},a=D(e,["functionCallingConfig"]);if(a!=null&&O(n,["functionCallingConfig"],$le(t,a)),D(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function zle(t,e){const n={},a=D(e,["voiceName"]);return a!=null&&O(n,["voiceName"],a),n}function qle(t,e){const n={},a=D(e,["prebuiltVoiceConfig"]);return a!=null&&O(n,["prebuiltVoiceConfig"],zle(t,a)),n}function Ule(t,e){const n={},a=D(e,["voiceConfig"]);a!=null&&O(n,["voiceConfig"],qle(t,a));const i=D(e,["languageCode"]);return i!=null&&O(n,["languageCode"],i),n}function Vle(t,e){const n={},a=D(e,["includeThoughts"]);a!=null&&O(n,["includeThoughts"],a);const i=D(e,["thinkingBudget"]);return i!=null&&O(n,["thinkingBudget"],i),n}function Hle(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],rS(t,us(t,i)));const s=D(e,["temperature"]);s!=null&&O(a,["temperature"],s);const o=D(e,["topP"]);o!=null&&O(a,["topP"],o);const l=D(e,["topK"]);l!=null&&O(a,["topK"],l);const c=D(e,["candidateCount"]);c!=null&&O(a,["candidateCount"],c);const u=D(e,["maxOutputTokens"]);u!=null&&O(a,["maxOutputTokens"],u);const h=D(e,["stopSequences"]);h!=null&&O(a,["stopSequences"],h);const p=D(e,["responseLogprobs"]);p!=null&&O(a,["responseLogprobs"],p);const m=D(e,["logprobs"]);m!=null&&O(a,["logprobs"],m);const x=D(e,["presencePenalty"]);x!=null&&O(a,["presencePenalty"],x);const b=D(e,["frequencyPenalty"]);b!=null&&O(a,["frequencyPenalty"],b);const j=D(e,["seed"]);j!=null&&O(a,["seed"],j);const w=D(e,["responseMimeType"]);w!=null&&O(a,["responseMimeType"],w);const _=D(e,["responseSchema"]);if(_!=null&&O(a,["responseSchema"],CU(t,_)),D(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(D(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=D(e,["safetySettings"]);if(n!==void 0&&k!=null){let B=k;Array.isArray(B)&&(B=B.map(R=>Mle(t,R))),O(n,["safetySettings"],B)}const C=D(e,["tools"]);if(n!==void 0&&C!=null){let B=tS(t,C);Array.isArray(B)&&(B=B.map(R=>Fle(t,eS(t,R)))),O(n,["tools"],B)}const A=D(e,["toolConfig"]);if(n!==void 0&&A!=null&&O(n,["toolConfig"],Ble(t,A)),D(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=D(e,["cachedContent"]);n!==void 0&&T!=null&&O(n,["cachedContent"],Nd(t,T));const E=D(e,["responseModalities"]);E!=null&&O(a,["responseModalities"],E);const I=D(e,["mediaResolution"]);I!=null&&O(a,["mediaResolution"],I);const $=D(e,["speechConfig"]);if($!=null&&O(a,["speechConfig"],Ule(t,kU(t,$))),D(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=D(e,["thinkingConfig"]);return U!=null&&O(a,["thinkingConfig"],Vle(t,U)),a}function O4(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["contents"]);if(i!=null){let o=wd(t,i);Array.isArray(o)&&(o=o.map(l=>rS(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["generationConfig"],Hle(t,s,n)),n}function Gle(t,e,n){const a={},i=D(e,["taskType"]);n!==void 0&&i!=null&&O(n,["requests[]","taskType"],i);const s=D(e,["title"]);n!==void 0&&s!=null&&O(n,["requests[]","title"],s);const o=D(e,["outputDimensionality"]);if(n!==void 0&&o!=null&&O(n,["requests[]","outputDimensionality"],o),D(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(D(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function Wle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["contents"]);i!=null&&O(n,["requests[]","content"],_U(t,i));const s=D(e,["config"]);s!=null&&O(n,["config"],Gle(t,s,n));const o=D(e,["model"]);return o!==void 0&&O(n,["requests[]","model"],Zr(t,o)),n}function Kle(t,e,n){const a={};if(D(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(D(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=D(e,["numberOfImages"]);n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i);const s=D(e,["aspectRatio"]);n!==void 0&&s!=null&&O(n,["parameters","aspectRatio"],s);const o=D(e,["guidanceScale"]);if(n!==void 0&&o!=null&&O(n,["parameters","guidanceScale"],o),D(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=D(e,["safetyFilterLevel"]);n!==void 0&&l!=null&&O(n,["parameters","safetySetting"],l);const c=D(e,["personGeneration"]);n!==void 0&&c!=null&&O(n,["parameters","personGeneration"],c);const u=D(e,["includeSafetyAttributes"]);n!==void 0&&u!=null&&O(n,["parameters","includeSafetyAttributes"],u);const h=D(e,["includeRaiReason"]);n!==void 0&&h!=null&&O(n,["parameters","includeRaiReason"],h);const p=D(e,["language"]);n!==void 0&&p!=null&&O(n,["parameters","language"],p);const m=D(e,["outputMimeType"]);n!==void 0&&m!=null&&O(n,["parameters","outputOptions","mimeType"],m);const x=D(e,["outputCompressionQuality"]);if(n!==void 0&&x!=null&&O(n,["parameters","outputOptions","compressionQuality"],x),D(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(D(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function Yle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],Kle(t,s,n)),n}function Qle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Zr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Xle(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);n!==void 0&&o!=null&&O(n,["_query","filter"],o);const l=D(e,["queryBase"]);return n!==void 0&&l!=null&&O(n,["_url","models_url"],PU(t,l)),a}function Jle(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Xle(t,a,n)),n}function Zle(t,e,n){const a={},i=D(e,["displayName"]);n!==void 0&&i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);n!==void 0&&s!=null&&O(n,["description"],s);const o=D(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&O(n,["defaultCheckpointId"],o),a}function ece(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Zr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Zle(t,i,n)),n}function tce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Zr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function nce(t,e){const n={};if(D(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(D(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(D(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function rce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["contents"]);if(i!=null){let o=wd(t,i);Array.isArray(o)&&(o=o.map(l=>rS(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],nce(t,s)),n}function ace(t,e){const n={};if(D(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=D(e,["imageBytes"]);a!=null&&O(n,["bytesBase64Encoded"],Sd(t,a));const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function ice(t,e,n){const a={},i=D(e,["numberOfVideos"]);if(n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i),D(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(D(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=D(e,["durationSeconds"]);if(n!==void 0&&s!=null&&O(n,["parameters","durationSeconds"],s),D(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=D(e,["aspectRatio"]);if(n!==void 0&&o!=null&&O(n,["parameters","aspectRatio"],o),D(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=D(e,["personGeneration"]);if(n!==void 0&&l!=null&&O(n,["parameters","personGeneration"],l),D(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=D(e,["negativePrompt"]);if(n!==void 0&&c!=null&&O(n,["parameters","negativePrompt"],c),D(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function sce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["image"]);s!=null&&O(n,["instances[0]","image"],ace(t,s));const o=D(e,["config"]);return o!=null&&O(n,["config"],ice(t,o,n)),n}function oce(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function lce(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],oce(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const h=D(e,["functionResponse"]);h!=null&&O(n,["functionResponse"],h);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function Gg(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>lce(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function cce(t,e){const n={},a=D(e,["featureSelectionPreference"]);return a!=null&&O(n,["featureSelectionPreference"],a),n}function uce(t,e){const n={},a=D(e,["method"]);a!=null&&O(n,["method"],a);const i=D(e,["category"]);i!=null&&O(n,["category"],i);const s=D(e,["threshold"]);return s!=null&&O(n,["threshold"],s),n}function dce(){return{}}function hce(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function fce(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],hce(t,a)),n}function pce(){return{}}function mce(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function gce(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],mce(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function yce(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],gce(t,a)),n}function OU(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],dce());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],fce(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],pce());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],yce(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const u=D(e,["functionDeclarations"]);return u!=null&&O(n,["functionDeclarations"],u),n}function xce(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function vce(t,e){const n={},a=D(e,["latitude"]);a!=null&&O(n,["latitude"],a);const i=D(e,["longitude"]);return i!=null&&O(n,["longitude"],i),n}function bce(t,e){const n={},a=D(e,["latLng"]);return a!=null&&O(n,["latLng"],vce(t,a)),n}function jce(t,e){const n={},a=D(e,["functionCallingConfig"]);a!=null&&O(n,["functionCallingConfig"],xce(t,a));const i=D(e,["retrievalConfig"]);return i!=null&&O(n,["retrievalConfig"],bce(t,i)),n}function wce(t,e){const n={},a=D(e,["voiceName"]);return a!=null&&O(n,["voiceName"],a),n}function Nce(t,e){const n={},a=D(e,["prebuiltVoiceConfig"]);return a!=null&&O(n,["prebuiltVoiceConfig"],wce(t,a)),n}function Sce(t,e){const n={},a=D(e,["voiceConfig"]);a!=null&&O(n,["voiceConfig"],Nce(t,a));const i=D(e,["languageCode"]);return i!=null&&O(n,["languageCode"],i),n}function _ce(t,e){const n={},a=D(e,["includeThoughts"]);a!=null&&O(n,["includeThoughts"],a);const i=D(e,["thinkingBudget"]);return i!=null&&O(n,["thinkingBudget"],i),n}function Cce(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],Gg(t,us(t,i)));const s=D(e,["temperature"]);s!=null&&O(a,["temperature"],s);const o=D(e,["topP"]);o!=null&&O(a,["topP"],o);const l=D(e,["topK"]);l!=null&&O(a,["topK"],l);const c=D(e,["candidateCount"]);c!=null&&O(a,["candidateCount"],c);const u=D(e,["maxOutputTokens"]);u!=null&&O(a,["maxOutputTokens"],u);const h=D(e,["stopSequences"]);h!=null&&O(a,["stopSequences"],h);const p=D(e,["responseLogprobs"]);p!=null&&O(a,["responseLogprobs"],p);const m=D(e,["logprobs"]);m!=null&&O(a,["logprobs"],m);const x=D(e,["presencePenalty"]);x!=null&&O(a,["presencePenalty"],x);const b=D(e,["frequencyPenalty"]);b!=null&&O(a,["frequencyPenalty"],b);const j=D(e,["seed"]);j!=null&&O(a,["seed"],j);const w=D(e,["responseMimeType"]);w!=null&&O(a,["responseMimeType"],w);const _=D(e,["responseSchema"]);_!=null&&O(a,["responseSchema"],CU(t,_));const k=D(e,["routingConfig"]);k!=null&&O(a,["routingConfig"],k);const C=D(e,["modelSelectionConfig"]);C!=null&&O(a,["modelConfig"],cce(t,C));const A=D(e,["safetySettings"]);if(n!==void 0&&A!=null){let K=A;Array.isArray(K)&&(K=K.map(Y=>uce(t,Y))),O(n,["safetySettings"],K)}const T=D(e,["tools"]);if(n!==void 0&&T!=null){let K=tS(t,T);Array.isArray(K)&&(K=K.map(Y=>OU(t,eS(t,Y)))),O(n,["tools"],K)}const E=D(e,["toolConfig"]);n!==void 0&&E!=null&&O(n,["toolConfig"],jce(t,E));const I=D(e,["labels"]);n!==void 0&&I!=null&&O(n,["labels"],I);const $=D(e,["cachedContent"]);n!==void 0&&$!=null&&O(n,["cachedContent"],Nd(t,$));const U=D(e,["responseModalities"]);U!=null&&O(a,["responseModalities"],U);const B=D(e,["mediaResolution"]);B!=null&&O(a,["mediaResolution"],B);const R=D(e,["speechConfig"]);R!=null&&O(a,["speechConfig"],Sce(t,kU(t,R)));const z=D(e,["audioTimestamp"]);z!=null&&O(a,["audioTimestamp"],z);const G=D(e,["thinkingConfig"]);return G!=null&&O(a,["thinkingConfig"],_ce(t,G)),a}function M4(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["contents"]);if(i!=null){let o=wd(t,i);Array.isArray(o)&&(o=o.map(l=>Gg(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["generationConfig"],Cce(t,s,n)),n}function kce(t,e,n){const a={},i=D(e,["taskType"]);n!==void 0&&i!=null&&O(n,["instances[]","task_type"],i);const s=D(e,["title"]);n!==void 0&&s!=null&&O(n,["instances[]","title"],s);const o=D(e,["outputDimensionality"]);n!==void 0&&o!=null&&O(n,["parameters","outputDimensionality"],o);const l=D(e,["mimeType"]);n!==void 0&&l!=null&&O(n,["instances[]","mimeType"],l);const c=D(e,["autoTruncate"]);return n!==void 0&&c!=null&&O(n,["parameters","autoTruncate"],c),a}function Tce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["contents"]);i!=null&&O(n,["instances[]","content"],_U(t,i));const s=D(e,["config"]);return s!=null&&O(n,["config"],kce(t,s,n)),n}function Ace(t,e,n){const a={},i=D(e,["outputGcsUri"]);n!==void 0&&i!=null&&O(n,["parameters","storageUri"],i);const s=D(e,["negativePrompt"]);n!==void 0&&s!=null&&O(n,["parameters","negativePrompt"],s);const o=D(e,["numberOfImages"]);n!==void 0&&o!=null&&O(n,["parameters","sampleCount"],o);const l=D(e,["aspectRatio"]);n!==void 0&&l!=null&&O(n,["parameters","aspectRatio"],l);const c=D(e,["guidanceScale"]);n!==void 0&&c!=null&&O(n,["parameters","guidanceScale"],c);const u=D(e,["seed"]);n!==void 0&&u!=null&&O(n,["parameters","seed"],u);const h=D(e,["safetyFilterLevel"]);n!==void 0&&h!=null&&O(n,["parameters","safetySetting"],h);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const m=D(e,["includeSafetyAttributes"]);n!==void 0&&m!=null&&O(n,["parameters","includeSafetyAttributes"],m);const x=D(e,["includeRaiReason"]);n!==void 0&&x!=null&&O(n,["parameters","includeRaiReason"],x);const b=D(e,["language"]);n!==void 0&&b!=null&&O(n,["parameters","language"],b);const j=D(e,["outputMimeType"]);n!==void 0&&j!=null&&O(n,["parameters","outputOptions","mimeType"],j);const w=D(e,["outputCompressionQuality"]);n!==void 0&&w!=null&&O(n,["parameters","outputOptions","compressionQuality"],w);const _=D(e,["addWatermark"]);n!==void 0&&_!=null&&O(n,["parameters","addWatermark"],_);const k=D(e,["enhancePrompt"]);return n!==void 0&&k!=null&&O(n,["parameters","enhancePrompt"],k),a}function Pce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],Ace(t,s,n)),n}function wO(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["gcsUri"],a);const i=D(e,["imageBytes"]);i!=null&&O(n,["bytesBase64Encoded"],Sd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Ece(t,e){const n={},a=D(e,["maskMode"]);a!=null&&O(n,["maskMode"],a);const i=D(e,["segmentationClasses"]);i!=null&&O(n,["maskClasses"],i);const s=D(e,["maskDilation"]);return s!=null&&O(n,["dilation"],s),n}function Dce(t,e){const n={},a=D(e,["controlType"]);a!=null&&O(n,["controlType"],a);const i=D(e,["enableControlImageComputation"]);return i!=null&&O(n,["computeControl"],i),n}function Oce(t,e){const n={},a=D(e,["styleDescription"]);return a!=null&&O(n,["styleDescription"],a),n}function Mce(t,e){const n={},a=D(e,["subjectType"]);a!=null&&O(n,["subjectType"],a);const i=D(e,["subjectDescription"]);return i!=null&&O(n,["subjectDescription"],i),n}function Ice(t,e){const n={},a=D(e,["referenceImage"]);a!=null&&O(n,["referenceImage"],wO(t,a));const i=D(e,["referenceId"]);i!=null&&O(n,["referenceId"],i);const s=D(e,["referenceType"]);s!=null&&O(n,["referenceType"],s);const o=D(e,["maskImageConfig"]);o!=null&&O(n,["maskImageConfig"],Ece(t,o));const l=D(e,["controlImageConfig"]);l!=null&&O(n,["controlImageConfig"],Dce(t,l));const c=D(e,["styleImageConfig"]);c!=null&&O(n,["styleImageConfig"],Oce(t,c));const u=D(e,["subjectImageConfig"]);return u!=null&&O(n,["subjectImageConfig"],Mce(t,u)),n}function Rce(t,e,n){const a={},i=D(e,["outputGcsUri"]);n!==void 0&&i!=null&&O(n,["parameters","storageUri"],i);const s=D(e,["negativePrompt"]);n!==void 0&&s!=null&&O(n,["parameters","negativePrompt"],s);const o=D(e,["numberOfImages"]);n!==void 0&&o!=null&&O(n,["parameters","sampleCount"],o);const l=D(e,["aspectRatio"]);n!==void 0&&l!=null&&O(n,["parameters","aspectRatio"],l);const c=D(e,["guidanceScale"]);n!==void 0&&c!=null&&O(n,["parameters","guidanceScale"],c);const u=D(e,["seed"]);n!==void 0&&u!=null&&O(n,["parameters","seed"],u);const h=D(e,["safetyFilterLevel"]);n!==void 0&&h!=null&&O(n,["parameters","safetySetting"],h);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const m=D(e,["includeSafetyAttributes"]);n!==void 0&&m!=null&&O(n,["parameters","includeSafetyAttributes"],m);const x=D(e,["includeRaiReason"]);n!==void 0&&x!=null&&O(n,["parameters","includeRaiReason"],x);const b=D(e,["language"]);n!==void 0&&b!=null&&O(n,["parameters","language"],b);const j=D(e,["outputMimeType"]);n!==void 0&&j!=null&&O(n,["parameters","outputOptions","mimeType"],j);const w=D(e,["outputCompressionQuality"]);n!==void 0&&w!=null&&O(n,["parameters","outputOptions","compressionQuality"],w);const _=D(e,["editMode"]);n!==void 0&&_!=null&&O(n,["parameters","editMode"],_);const k=D(e,["baseSteps"]);return n!==void 0&&k!=null&&O(n,["parameters","editConfig","baseSteps"],k),a}function Lce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Ice(t,c))),O(n,["instances[0]","referenceImages"],l)}const o=D(e,["config"]);return o!=null&&O(n,["config"],Rce(t,o,n)),n}function Fce(t,e,n){const a={},i=D(e,["includeRaiReason"]);n!==void 0&&i!=null&&O(n,["parameters","includeRaiReason"],i);const s=D(e,["outputMimeType"]);n!==void 0&&s!=null&&O(n,["parameters","outputOptions","mimeType"],s);const o=D(e,["outputCompressionQuality"]);n!==void 0&&o!=null&&O(n,["parameters","outputOptions","compressionQuality"],o);const l=D(e,["numberOfImages"]);n!==void 0&&l!=null&&O(n,["parameters","sampleCount"],l);const c=D(e,["mode"]);return n!==void 0&&c!=null&&O(n,["parameters","mode"],c),a}function $ce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["image"]);i!=null&&O(n,["instances[0]","image"],wO(t,i));const s=D(e,["upscaleFactor"]);s!=null&&O(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=D(e,["config"]);return o!=null&&O(n,["config"],Fce(t,o,n)),n}function Bce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Zr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function zce(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);n!==void 0&&o!=null&&O(n,["_query","filter"],o);const l=D(e,["queryBase"]);return n!==void 0&&l!=null&&O(n,["_url","models_url"],PU(t,l)),a}function qce(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],zce(t,a,n)),n}function Uce(t,e,n){const a={},i=D(e,["displayName"]);n!==void 0&&i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);n!==void 0&&s!=null&&O(n,["description"],s);const o=D(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&O(n,["defaultCheckpointId"],o),a}function Vce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Uce(t,i,n)),n}function Hce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Zr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Gce(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],Gg(t,us(t,i)));const s=D(e,["tools"]);if(n!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>OU(t,c))),O(n,["tools"],l)}const o=D(e,["generationConfig"]);return n!==void 0&&o!=null&&O(n,["generationConfig"],o),a}function Wce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["contents"]);if(i!=null){let o=wd(t,i);Array.isArray(o)&&(o=o.map(l=>Gg(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],Gce(t,s,n)),n}function Kce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["contents"]);if(i!=null){let o=wd(t,i);Array.isArray(o)&&(o=o.map(l=>Gg(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],s),n}function Yce(t,e,n){const a={},i=D(e,["numberOfVideos"]);n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i);const s=D(e,["outputGcsUri"]);n!==void 0&&s!=null&&O(n,["parameters","storageUri"],s);const o=D(e,["fps"]);n!==void 0&&o!=null&&O(n,["parameters","fps"],o);const l=D(e,["durationSeconds"]);n!==void 0&&l!=null&&O(n,["parameters","durationSeconds"],l);const c=D(e,["seed"]);n!==void 0&&c!=null&&O(n,["parameters","seed"],c);const u=D(e,["aspectRatio"]);n!==void 0&&u!=null&&O(n,["parameters","aspectRatio"],u);const h=D(e,["resolution"]);n!==void 0&&h!=null&&O(n,["parameters","resolution"],h);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const m=D(e,["pubsubTopic"]);n!==void 0&&m!=null&&O(n,["parameters","pubsubTopic"],m);const x=D(e,["negativePrompt"]);n!==void 0&&x!=null&&O(n,["parameters","negativePrompt"],x);const b=D(e,["enhancePrompt"]);return n!==void 0&&b!=null&&O(n,["parameters","enhancePrompt"],b),a}function Qce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Zr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["image"]);s!=null&&O(n,["instances[0]","image"],wO(t,s));const o=D(e,["config"]);return o!=null&&O(n,["config"],Yce(t,o,n)),n}function Xce(t,e){const n={},a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Jce(t,e){const n={},a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Xce(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const u=D(e,["functionResponse"]);u!=null&&O(n,["functionResponse"],u);const h=D(e,["text"]);return h!=null&&O(n,["text"],h),n}function Zce(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Jce(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function eue(t,e){const n={},a=D(e,["citationSources"]);return a!=null&&O(n,["citations"],a),n}function tue(t,e){const n={},a=D(e,["content"]);a!=null&&O(n,["content"],Zce(t,a));const i=D(e,["citationMetadata"]);i!=null&&O(n,["citationMetadata"],eue(t,i));const s=D(e,["tokenCount"]);s!=null&&O(n,["tokenCount"],s);const o=D(e,["finishReason"]);o!=null&&O(n,["finishReason"],o);const l=D(e,["avgLogprobs"]);l!=null&&O(n,["avgLogprobs"],l);const c=D(e,["groundingMetadata"]);c!=null&&O(n,["groundingMetadata"],c);const u=D(e,["index"]);u!=null&&O(n,["index"],u);const h=D(e,["logprobsResult"]);h!=null&&O(n,["logprobsResult"],h);const p=D(e,["safetyRatings"]);return p!=null&&O(n,["safetyRatings"],p),n}function I4(t,e){const n={},a=D(e,["candidates"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>tue(t,c))),O(n,["candidates"],l)}const i=D(e,["modelVersion"]);i!=null&&O(n,["modelVersion"],i);const s=D(e,["promptFeedback"]);s!=null&&O(n,["promptFeedback"],s);const o=D(e,["usageMetadata"]);return o!=null&&O(n,["usageMetadata"],o),n}function nue(t,e){const n={},a=D(e,["values"]);return a!=null&&O(n,["values"],a),n}function rue(){return{}}function aue(t,e){const n={},a=D(e,["embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>nue(t,o))),O(n,["embeddings"],s)}return D(e,["metadata"])!=null&&O(n,["metadata"],rue()),n}function iue(t,e){const n={},a=D(e,["bytesBase64Encoded"]);a!=null&&O(n,["imageBytes"],Sd(t,a));const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function MU(t,e){const n={},a=D(e,["safetyAttributes","categories"]);a!=null&&O(n,["categories"],a);const i=D(e,["safetyAttributes","scores"]);i!=null&&O(n,["scores"],i);const s=D(e,["contentType"]);return s!=null&&O(n,["contentType"],s),n}function sue(t,e){const n={},a=D(e,["_self"]);a!=null&&O(n,["image"],iue(t,a));const i=D(e,["raiFilteredReason"]);i!=null&&O(n,["raiFilteredReason"],i);const s=D(e,["_self"]);return s!=null&&O(n,["safetyAttributes"],MU(t,s)),n}function oue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>sue(t,o))),O(n,["generatedImages"],s)}const i=D(e,["positivePromptSafetyAttributes"]);return i!=null&&O(n,["positivePromptSafetyAttributes"],MU(t,i)),n}function lue(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["updateTime"]);return s!=null&&O(n,["updateTime"],s),n}function QP(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);s!=null&&O(n,["description"],s);const o=D(e,["version"]);o!=null&&O(n,["version"],o);const l=D(e,["_self"]);l!=null&&O(n,["tunedModelInfo"],lue(t,l));const c=D(e,["inputTokenLimit"]);c!=null&&O(n,["inputTokenLimit"],c);const u=D(e,["outputTokenLimit"]);u!=null&&O(n,["outputTokenLimit"],u);const h=D(e,["supportedGenerationMethods"]);return h!=null&&O(n,["supportedActions"],h),n}function cue(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["_self"]);if(i!=null){let s=EU(t,i);Array.isArray(s)&&(s=s.map(o=>QP(t,o))),O(n,["models"],s)}return n}function uue(){return{}}function due(t,e){const n={},a=D(e,["totalTokens"]);a!=null&&O(n,["totalTokens"],a);const i=D(e,["cachedContentTokenCount"]);return i!=null&&O(n,["cachedContentTokenCount"],i),n}function hue(t,e){const n={},a=D(e,["video","uri"]);a!=null&&O(n,["uri"],a);const i=D(e,["video","encodedVideo"]);i!=null&&O(n,["videoBytes"],Sd(t,i));const s=D(e,["encoding"]);return s!=null&&O(n,["mimeType"],s),n}function fue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],hue(t,a)),n}function pue(t,e){const n={},a=D(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>fue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function mue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response","generateVideoResponse"]);return l!=null&&O(n,["response"],pue(t,l)),n}function gue(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function yue(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],gue(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const u=D(e,["functionCall"]);u!=null&&O(n,["functionCall"],u);const h=D(e,["functionResponse"]);h!=null&&O(n,["functionResponse"],h);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function xue(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>yue(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function vue(t,e){const n={},a=D(e,["citations"]);return a!=null&&O(n,["citations"],a),n}function bue(t,e){const n={},a=D(e,["content"]);a!=null&&O(n,["content"],xue(t,a));const i=D(e,["citationMetadata"]);i!=null&&O(n,["citationMetadata"],vue(t,i));const s=D(e,["finishMessage"]);s!=null&&O(n,["finishMessage"],s);const o=D(e,["finishReason"]);o!=null&&O(n,["finishReason"],o);const l=D(e,["avgLogprobs"]);l!=null&&O(n,["avgLogprobs"],l);const c=D(e,["groundingMetadata"]);c!=null&&O(n,["groundingMetadata"],c);const u=D(e,["index"]);u!=null&&O(n,["index"],u);const h=D(e,["logprobsResult"]);h!=null&&O(n,["logprobsResult"],h);const p=D(e,["safetyRatings"]);return p!=null&&O(n,["safetyRatings"],p),n}function R4(t,e){const n={},a=D(e,["candidates"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>bue(t,h))),O(n,["candidates"],u)}const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["responseId"]);s!=null&&O(n,["responseId"],s);const o=D(e,["modelVersion"]);o!=null&&O(n,["modelVersion"],o);const l=D(e,["promptFeedback"]);l!=null&&O(n,["promptFeedback"],l);const c=D(e,["usageMetadata"]);return c!=null&&O(n,["usageMetadata"],c),n}function jue(t,e){const n={},a=D(e,["truncated"]);a!=null&&O(n,["truncated"],a);const i=D(e,["token_count"]);return i!=null&&O(n,["tokenCount"],i),n}function wue(t,e){const n={},a=D(e,["values"]);a!=null&&O(n,["values"],a);const i=D(e,["statistics"]);return i!=null&&O(n,["statistics"],jue(t,i)),n}function Nue(t,e){const n={},a=D(e,["billableCharacterCount"]);return a!=null&&O(n,["billableCharacterCount"],a),n}function Sue(t,e){const n={},a=D(e,["predictions[]","embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>wue(t,o))),O(n,["embeddings"],s)}const i=D(e,["metadata"]);return i!=null&&O(n,["metadata"],Nue(t,i)),n}function _ue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["gcsUri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["imageBytes"],Sd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function IU(t,e){const n={},a=D(e,["safetyAttributes","categories"]);a!=null&&O(n,["categories"],a);const i=D(e,["safetyAttributes","scores"]);i!=null&&O(n,["scores"],i);const s=D(e,["contentType"]);return s!=null&&O(n,["contentType"],s),n}function NO(t,e){const n={},a=D(e,["_self"]);a!=null&&O(n,["image"],_ue(t,a));const i=D(e,["raiFilteredReason"]);i!=null&&O(n,["raiFilteredReason"],i);const s=D(e,["_self"]);s!=null&&O(n,["safetyAttributes"],IU(t,s));const o=D(e,["prompt"]);return o!=null&&O(n,["enhancedPrompt"],o),n}function Cue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>NO(t,o))),O(n,["generatedImages"],s)}const i=D(e,["positivePromptSafetyAttributes"]);return i!=null&&O(n,["positivePromptSafetyAttributes"],IU(t,i)),n}function kue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>NO(t,s))),O(n,["generatedImages"],i)}return n}function Tue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>NO(t,s))),O(n,["generatedImages"],i)}return n}function Aue(t,e){const n={},a=D(e,["endpoint"]);a!=null&&O(n,["name"],a);const i=D(e,["deployedModelId"]);return i!=null&&O(n,["deployedModelId"],i),n}function Pue(t,e){const n={},a=D(e,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["updateTime"]);return s!=null&&O(n,["updateTime"],s),n}function Eue(t,e){const n={},a=D(e,["checkpointId"]);a!=null&&O(n,["checkpointId"],a);const i=D(e,["epoch"]);i!=null&&O(n,["epoch"],i);const s=D(e,["step"]);return s!=null&&O(n,["step"],s),n}function XP(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);s!=null&&O(n,["description"],s);const o=D(e,["versionId"]);o!=null&&O(n,["version"],o);const l=D(e,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(x=>Aue(t,x))),O(n,["endpoints"],m)}const c=D(e,["labels"]);c!=null&&O(n,["labels"],c);const u=D(e,["_self"]);u!=null&&O(n,["tunedModelInfo"],Pue(t,u));const h=D(e,["defaultCheckpointId"]);h!=null&&O(n,["defaultCheckpointId"],h);const p=D(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(x=>Eue(t,x))),O(n,["checkpoints"],m)}return n}function Due(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["_self"]);if(i!=null){let s=EU(t,i);Array.isArray(s)&&(s=s.map(o=>XP(t,o))),O(n,["models"],s)}return n}function Oue(){return{}}function Mue(t,e){const n={},a=D(e,["totalTokens"]);return a!=null&&O(n,["totalTokens"],a),n}function Iue(t,e){const n={},a=D(e,["tokensInfo"]);return a!=null&&O(n,["tokensInfo"],a),n}function Rue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["uri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["videoBytes"],Sd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Lue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Rue(t,a)),n}function Fue(t,e){const n={},a=D(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Lue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function $ue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response"]);return l!=null&&O(n,["response"],Fue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bue="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function zue(t,e,n){const a=new ioe;let i;if(n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),t.isVertexAI()){const s=Ele(t,i);Object.assign(a,s)}else{const s=Ple(t,i);Object.assign(a,s)}e(a)}class que{constructor(e,n,a){this.apiClient=e,this.auth=n,this.webSocketFactory=a}async connect(e){var n,a,i,s;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const u=Gue(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u);else{const A=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${A}`}let h=()=>{};const p=new Promise(A=>{h=A}),m=e.callbacks,x=function(){var A;(A=m==null?void 0:m.onopen)===null||A===void 0||A.call(m),h({})},b=this.apiClient,j={onopen:x,onmessage:A=>{zue(b,m.onmessage,A)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(A){},onclose:(a=m==null?void 0:m.onclose)!==null&&a!==void 0?a:function(A){}},w=this.webSocketFactory.create(c,Hue(u),j);w.connect(),await p;let _=Zr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const A=this.apiClient.getProject(),T=this.apiClient.getLocation();_=`projects/${A}/locations/${T}/`+_}let k={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[vd.AUDIO]}:e.config.responseModalities=[vd.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=tle(this.apiClient,C):k=ele(this.apiClient,C),delete k.config,w.send(JSON.stringify(k)),new Vue(w,this.apiClient)}}const Uue={turnComplete:!0};class Vue{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let a=[];try{a=wd(e,n.turns),e.isVertexAI()?a=a.map(i=>Gg(e,i)):a=a.map(i=>rS(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:a,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let a=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?a=n.functionResponses:a=[n.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const s of a){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Bue)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},Uue),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ole(this.apiClient,e)}:n={realtimeInput:sle(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Hue(t){const e={};return t.forEach((n,a)=>{e[a]=n}),e}function Gue(t){const e=new Headers;for(const[n,a]of Object.entries(t))e.append(n,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wue extends qb{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(a=>{var i;let s;const o=[];if(a!=null&&a.generatedImages)for(const c of a.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s}:l={generatedImages:o},l}),this.list=async n=>{var a;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((a=o.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new nS(ug.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const a={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(a.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async n=>{let a={numberOfImages:1,mode:"upscale"};n.config&&(a=Object.assign(Object.assign({},a),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:a};return await this.upscaleImageInternal(i)}}async generateContentInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=M4(this.apiClient,e);return l=un("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>{const p=R4(this.apiClient,h),m=new k1;return Object.assign(m,p),m})}else{const u=O4(this.apiClient,e);return l=un("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=I4(this.apiClient,h),m=new k1;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=M4(this.apiClient,e);l=un("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const h=this.apiClient;return o=h.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(p){return Aw(this,arguments,function*(){var m,x,b,j;try{for(var w=!0,_=KP(p),k;k=yield mi(_.next()),m=k.done,!m;w=!0){j=k.value,w=!1;const A=R4(h,yield mi(j.json())),T=new k1;Object.assign(T,A),yield yield mi(T)}}catch(C){x={error:C}}finally{try{!w&&!m&&(b=_.return)&&(yield mi(b.call(_)))}finally{if(x)throw x.error}}})})}else{const u=O4(this.apiClient,e);l=un("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const h=this.apiClient;return o=h.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return Aw(this,arguments,function*(){var m,x,b,j;try{for(var w=!0,_=KP(p),k;k=yield mi(_.next()),m=k.done,!m;w=!0){j=k.value,w=!1;const A=I4(h,yield mi(j.json())),T=new k1;Object.assign(T,A),yield yield mi(T)}}catch(C){x={error:C}}finally{try{!w&&!m&&(b=_.return)&&(yield mi(b.call(_)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Tce(this.apiClient,e);return l=un("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Sue(this.apiClient,h),m=new b4;return Object.assign(m,p),m})}else{const u=Wle(this.apiClient,e);return l=un("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=aue(this.apiClient,h),m=new b4;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Pce(this.apiClient,e);return l=un("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Cue(this.apiClient,h),m=new j4;return Object.assign(m,p),m})}else{const u=Yle(this.apiClient,e);return l=un("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=oue(this.apiClient,h),m=new j4;return Object.assign(m,p),m})}}async editImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Lce(this.apiClient,e);return s=un("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const u=kue(this.apiClient,c),h=new Zse;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=$ce(this.apiClient,e);return s=un("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Tue(this.apiClient,c),h=new eoe;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Bce(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>XP(this.apiClient,h))}else{const u=Qle(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>QP(this.apiClient,h))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=qce(this.apiClient,e);return l=un("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Due(this.apiClient,h),m=new w4;return Object.assign(m,p),m})}else{const u=Jle(this.apiClient,e);return l=un("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=cue(this.apiClient,h),m=new w4;return Object.assign(m,p),m})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Vce(this.apiClient,e);return l=un("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>XP(this.apiClient,h))}else{const u=ece(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>QP(this.apiClient,h))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Hce(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(()=>{const h=Oue(),p=new N4;return Object.assign(p,h),p})}else{const u=tce(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(()=>{const h=uue(),p=new N4;return Object.assign(p,h),p})}}async countTokens(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Wce(this.apiClient,e);return l=un("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Mue(this.apiClient,h),m=new S4;return Object.assign(m,p),m})}else{const u=rce(this.apiClient,e);return l=un("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=due(this.apiClient,h),m=new S4;return Object.assign(m,p),m})}}async computeTokens(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Kce(this.apiClient,e);return s=un("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Iue(this.apiClient,c),h=new toe;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Qce(this.apiClient,e);return l=un("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>$ue(this.apiClient,h))}else{const u=sce(this.apiClient,e);return l=un("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>mue(this.apiClient,h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kue(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["_url","operationName"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Yue(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["_url","operationName"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Que(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["operationName"],a);const i=D(e,["resourceName"]);i!=null&&O(n,["_url","resourceName"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],s),n}function Xue(t,e){const n={},a=D(e,["video","uri"]);a!=null&&O(n,["uri"],a);const i=D(e,["video","encodedVideo"]);i!=null&&O(n,["videoBytes"],Sd(t,i));const s=D(e,["encoding"]);return s!=null&&O(n,["mimeType"],s),n}function Jue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Xue(t,a)),n}function Zue(t,e){const n={},a=D(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Jue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function ede(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response","generateVideoResponse"]);return l!=null&&O(n,["response"],Zue(t,l)),n}function tde(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["uri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["videoBytes"],Sd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function nde(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],tde(t,a)),n}function rde(t,e){const n={},a=D(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>nde(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function L4(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response"]);return l!=null&&O(n,["response"],rde(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ade extends qb{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,a=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;return a&&"httpOptions"in a&&(s=a.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:a})}async getVideosOperationInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Yue(this.apiClient,e);return l=un("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>L4(this.apiClient,h))}else{const u=Kue(this.apiClient,e);return l=un("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>ede(this.apiClient,h))}}async fetchPredictVideosOperationInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Que(this.apiClient,e);return s=un("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>L4(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ide="Content-Type",sde="X-Server-Timeout",ode="User-Agent",lde="x-goog-api-client",cde="0.14.1",ude=`google-genai-sdk/${cde}`,dde="v1beta1",hde="v1beta",F4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class RU extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class JP extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class fde{constructor(e){var n,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:dde,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:hde,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,a){const i=[this.getRequestUrlInternal(n)];return a&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))i.searchParams.append(o,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const a=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?a[i]=Object.assign(Object.assign({},a[i]),s):s!==void 0&&(a[i]=s);return a}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,a){if(n&&n.timeout||a){const i=new AbortController,s=i.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>i.abort(),n.timeout),a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await $4(i),new WP(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await $4(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Aw(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield mi(i.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(c);try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),x=m.status,b=m.code,j=`got status: ${x}. ${JSON.stringify(p)}`;if(b>=400&&b<500)throw new RU(j);if(b>=500&&b<600)throw new JP(j)}}catch(p){const m=p;if(m.name==="ClientError"||m.name==="ServerError")throw p}o+=u;let h=o.match(F4);for(;h;){const p=h[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield mi(new WP(m)),o=o.slice(h[0].length),h=o.match(F4)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},n=ude+" "+this.clientOptions.userAgentExtra;return e[ode]=n,e[lde]=n,e[ide]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))n.append(a,i);e.timeout&&e.timeout>0&&n.append(sde,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var a;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const l=(a=n==null?void 0:n.mimeType)!==null&&a!==void 0?a:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var a;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:un("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(a=o==null?void 0:o.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function $4(t){var e;if(t===void 0)throw new JP("response is undefined");if(!t.ok){const n=t.status,a=t.statusText;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=`got status: ${n} ${a}. ${JSON.stringify(i)}`;throw n>=400&&n<500?new RU(s):n>=500&&n<600?new JP(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function mde(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);return n!==void 0&&o!=null&&O(n,["_query","filter"],o),a}function gde(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],mde(t,a,n)),n}function yde(t,e){const n={},a=D(e,["textInput"]);a!=null&&O(n,["textInput"],a);const i=D(e,["output"]);return i!=null&&O(n,["output"],i),n}function xde(t,e){const n={};if(D(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=D(e,["examples"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>yde(t,s))),O(n,["examples","examples"],i)}return n}function vde(t,e,n){const a={};if(D(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=D(e,["tunedModelDisplayName"]);if(n!==void 0&&i!=null&&O(n,["displayName"],i),D(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=D(e,["epochCount"]);n!==void 0&&s!=null&&O(n,["tuningTask","hyperparameters","epochCount"],s);const o=D(e,["learningRateMultiplier"]);if(o!=null&&O(a,["tuningTask","hyperparameters","learningRateMultiplier"],o),D(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(D(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=D(e,["batchSize"]);n!==void 0&&l!=null&&O(n,["tuningTask","hyperparameters","batchSize"],l);const c=D(e,["learningRate"]);return n!==void 0&&c!=null&&O(n,["tuningTask","hyperparameters","learningRate"],c),a}function bde(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["trainingDataset"]);i!=null&&O(n,["tuningTask","trainingData"],xde(t,i));const s=D(e,["config"]);return s!=null&&O(n,["config"],vde(t,s,n)),n}function jde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function wde(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);return n!==void 0&&o!=null&&O(n,["_query","filter"],o),a}function Nde(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],wde(t,a,n)),n}function Sde(t,e,n){const a={},i=D(e,["gcsUri"]);if(n!==void 0&&i!=null&&O(n,["supervisedTuningSpec","trainingDatasetUri"],i),D(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function _de(t,e){const n={},a=D(e,["gcsUri"]);return a!=null&&O(n,["validationDatasetUri"],a),n}function Cde(t,e,n){const a={},i=D(e,["validationDataset"]);n!==void 0&&i!=null&&O(n,["supervisedTuningSpec"],_de(t,i));const s=D(e,["tunedModelDisplayName"]);n!==void 0&&s!=null&&O(n,["tunedModelDisplayName"],s);const o=D(e,["description"]);n!==void 0&&o!=null&&O(n,["description"],o);const l=D(e,["epochCount"]);n!==void 0&&l!=null&&O(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=D(e,["learningRateMultiplier"]);n!==void 0&&c!=null&&O(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const u=D(e,["exportLastCheckpointOnly"]);n!==void 0&&u!=null&&O(n,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const h=D(e,["adapterSize"]);if(n!==void 0&&h!=null&&O(n,["supervisedTuningSpec","hyperParameters","adapterSize"],h),D(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(D(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return a}function kde(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["trainingDataset"]);i!=null&&O(n,["supervisedTuningSpec","trainingDatasetUri"],Sde(t,i,n));const s=D(e,["config"]);return s!=null&&O(n,["config"],Cde(t,s,n)),n}function Tde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["model"],a);const i=D(e,["name"]);return i!=null&&O(n,["endpoint"],i),n}function LU(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["state"]);i!=null&&O(n,["state"],TU(t,i));const s=D(e,["createTime"]);s!=null&&O(n,["createTime"],s);const o=D(e,["tuningTask","startTime"]);o!=null&&O(n,["startTime"],o);const l=D(e,["tuningTask","completeTime"]);l!=null&&O(n,["endTime"],l);const c=D(e,["updateTime"]);c!=null&&O(n,["updateTime"],c);const u=D(e,["description"]);u!=null&&O(n,["description"],u);const h=D(e,["baseModel"]);h!=null&&O(n,["baseModel"],h);const p=D(e,["_self"]);p!=null&&O(n,["tunedModel"],Tde(t,p));const m=D(e,["distillationSpec"]);m!=null&&O(n,["distillationSpec"],m);const x=D(e,["experiment"]);x!=null&&O(n,["experiment"],x);const b=D(e,["labels"]);b!=null&&O(n,["labels"],b);const j=D(e,["pipelineJob"]);j!=null&&O(n,["pipelineJob"],j);const w=D(e,["tunedModelDisplayName"]);return w!=null&&O(n,["tunedModelDisplayName"],w),n}function Ade(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>LU(t,o))),O(n,["tuningJobs"],s)}return n}function Pde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);return o!=null&&O(n,["error"],o),n}function Ede(t,e){const n={},a=D(e,["checkpointId"]);a!=null&&O(n,["checkpointId"],a);const i=D(e,["epoch"]);i!=null&&O(n,["epoch"],i);const s=D(e,["step"]);s!=null&&O(n,["step"],s);const o=D(e,["endpoint"]);return o!=null&&O(n,["endpoint"],o),n}function Dde(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],a);const i=D(e,["endpoint"]);i!=null&&O(n,["endpoint"],i);const s=D(e,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Ede(t,l))),O(n,["checkpoints"],o)}return n}function ZP(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["state"]);i!=null&&O(n,["state"],TU(t,i));const s=D(e,["createTime"]);s!=null&&O(n,["createTime"],s);const o=D(e,["startTime"]);o!=null&&O(n,["startTime"],o);const l=D(e,["endTime"]);l!=null&&O(n,["endTime"],l);const c=D(e,["updateTime"]);c!=null&&O(n,["updateTime"],c);const u=D(e,["error"]);u!=null&&O(n,["error"],u);const h=D(e,["description"]);h!=null&&O(n,["description"],h);const p=D(e,["baseModel"]);p!=null&&O(n,["baseModel"],p);const m=D(e,["tunedModel"]);m!=null&&O(n,["tunedModel"],Dde(t,m));const x=D(e,["supervisedTuningSpec"]);x!=null&&O(n,["supervisedTuningSpec"],x);const b=D(e,["tuningDataStats"]);b!=null&&O(n,["tuningDataStats"],b);const j=D(e,["encryptionSpec"]);j!=null&&O(n,["encryptionSpec"],j);const w=D(e,["partnerModelTuningSpec"]);w!=null&&O(n,["partnerModelTuningSpec"],w);const _=D(e,["distillationSpec"]);_!=null&&O(n,["distillationSpec"],_);const k=D(e,["experiment"]);k!=null&&O(n,["experiment"],k);const C=D(e,["labels"]);C!=null&&O(n,["labels"],C);const A=D(e,["pipelineJob"]);A!=null&&O(n,["pipelineJob"],A);const T=D(e,["tunedModelDisplayName"]);return T!=null&&O(n,["tunedModelDisplayName"],T),n}function Ode(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>ZP(t,o))),O(n,["tuningJobs"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mde extends qb{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new nS(ug.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const a=await this.tuneMldevInternal(n);let i="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?i=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(i=a.name.split("/operations/")[0]),{name:i,state:GP.JOB_STATE_QUEUED}}}}async getInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=jde(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>ZP(this.apiClient,h))}else{const u=pde(this.apiClient,e);return l=un("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>LU(this.apiClient,h))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Nde(this.apiClient,e);return l=un("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Ode(this.apiClient,h),m=new _4;return Object.assign(m,p),m})}else{const u=gde(this.apiClient,e);return l=un("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=Ade(this.apiClient,h),m=new _4;return Object.assign(m,p),m})}}async tuneInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=kde(this.apiClient,e);return s=un("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>ZP(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=bde(this.apiClient,e);return s=un("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>Pde(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ide{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Rde=1024*1024*8,Lde=3,Fde=1e3,$de=2,kC="x-goog-upload-status";async function Bde(t,e,n){var a,i,s;let o=0,l=0,c=new WP(new Response),u="upload";for(o=t.size;l<o;){const p=Math.min(Rde,o-l),m=t.slice(l,l+p);l+p>=o&&(u+=", finalize");let x=0,b=Fde;for(;x<Lde&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((a=c==null?void 0:c.headers)===null||a===void 0)&&a[kC]));)x++,await qde(b),b=b*$de;if(l+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[kC])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[kC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function zde(t){return{size:t.size,type:t.type}}function qde(t){return new Promise(e=>setTimeout(e,t))}class Ude{async upload(e,n,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Bde(e,n,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zde(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vde{create(e,n,a){return new Hde(e,n,a)}}class Hde{constructor(e,n,a){this.url=e,this.headers=n,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B4="x-goog-api-key";class Gde{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(B4)===null&&e.append(B4,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wde="gl-node/";class SO{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const a=rse(e,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const i=new Gde(this.apiKey);this.apiClient=new fde({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Wde+"web",uploader:new Ude,downloader:new Ide}),this.models=new Wue(this.apiClient),this.live=new que(this.apiClient,i,new Vde),this.chats=new uoe(this.models,this.apiClient),this.caches=new soe(this.apiClient),this.files=new Noe(this.apiClient),this.operations=new ade(this.apiClient),this.tunings=new Mde(this.apiClient)}}const Kde=()=>{const t=localStorage.getItem("currentClinicId");return t||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},_O=()=>localStorage.getItem("authToken");class Yde{constructor(){Nr(this,"listeners",[]);Nr(this,"activeRequests",0)}subscribe(e){return this.listeners.push(e),e(this.activeRequests>0),()=>this.unsubscribe(e)}unsubscribe(e){this.listeners=this.listeners.filter(n=>n!==e)}notify(e){e?this.activeRequests++:this.activeRequests=Math.max(0,this.activeRequests-1);const n=this.activeRequests>0;this.listeners.forEach(a=>a(n))}}const eE=new Yde,Qde="https://backend.newtons.in",Xde=()=>localStorage.getItem("authToken"),ie=async(t,e={})=>{const n=Xde(),a={...e.headers};n&&(a.Authorization=`Bearer ${n}`),!(e.body instanceof FormData)&&!a["Content-Type"]&&(a["Content-Type"]="application/json");const i=a;let s=t.startsWith("/")?t:`/${t}`;s.startsWith("/api/")||(s=`/api${s}`);const o=`${Qde}${s}`;eE.notify(!0);try{console.log(`Making API call to: ${o}`);const l=await fetch(o,{...e,headers:i});if(l.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!l.ok){let c=`HTTP error! status: ${l.status}`;try{const u=await l.json();c=(u==null?void 0:u.message)||(u==null?void 0:u.error)||c}catch{}throw console.error(`API Error: ${l.status} ${l.statusText} - ${c}`),new Error(c)}return l}catch(l){throw l instanceof TypeError&&l.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",l):console.error("API Fetch Error:",l),l}finally{eE.notify(!1)}},TC="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Jde="models/gemini-3-flash-preview",Zde=`You are an intelligent Clinic Hub Assistant for a Clinic Management System. Your role is to help the Clinic Administrator or Doctor manage their clinic ecosystem efficiently.

You have access to the current state of the clinic settings and the staff list. You can perform actions to update these settings or manage staff members.

**Capabilities:**
1.  **View Settings & Staff:** User can ask about current charges, clinic details, or staff members. Answer based on the provided context.
2.  **Update Settings:** Change fees, clinic name, address, etc.
3.  **Manage Staff:** Add new staff members or update existing ones.
4.  **Voice AI Settings:** Update the \`voice_ai_language\` for the Live API Assistant. Available codes:
    -   India: \`en-US\` (English), \`hi-IN\` (Hindi), \`te-IN\` (Telugu), \`bn-IN\` (Bengali), \`mr-IN\` (Marathi), \`ta-IN\` (Tamil), \`gu-IN\` (Gujarati), \`kn-IN\` (Kannada), \`ml-IN\` (Malayalam), \`pa-IN\` (Punjabi)
    -   Global: \`es-ES\` (Spanish), \`fr-FR\` (French), \`de-DE\` (German), \`it-IT\` (Italian), \`pt-PT\` (Portuguese), \`ru-RU\` (Russian), \`ja-JP\` (Japanese), \`ko-KR\` (Korean), \`zh-CN\` (Chinese), \`ar-SA\` (Arabic).
5.  **Analyze Financials & Inventory:** Access the Analysis Dashboard to view revenue, expenses, and inventory movement. Set date ranges to filter data.
6.  **Manage Inventory:** Update pharmacy tokens (drugs) and lab tests. You will reference items by their **Serial Number** as provided in the context.
7.  **Purchase Management:** Search for distributors, select one, and build a purchase order by adding items. You can add multiple items at once. Editing items uses Serial Numbers.
8.  **Looping & Reasoning:** You should think step-by-step. If a user request involves multiple steps or if you need to check something after an action, you can continue the loop.
9.  **Follow-up:** If critical information is missing, ask the user.
10.  **Manage Custom Columns:** You can add or remove custom columns/fields for various entities (patients, drugs, lab_tests). Use the \`manage_custom_columns\` action.
11.  **Custom Fields Data:** When searching or updating items (like drugs or patients), pay attention to their \`custom_fields\`. You can update these fields using the \`update_drug\` (or similar) action by passing a \`custom_fields\` object with key-value pairs. Keys must match the \`key\` defined in the Clinic Settings.
12.  **Custom Tables:** You can create entirely new tables to track anything (e.g., "Gym Members", "Diet Plans"). Use \`create_custom_table\`. You can then add rows to these tables using \`add_table_row\` (requires Table ID) and update them with \`update_table_row\`. meaningful descriptions are helpful.
13.  **Dashboards:** You can create persistent custom dashboards using \`create_custom_dashboard\` or show a specialized temporary view using \`render_temporary_dashboard\`.
     - Use \`render_temporary_dashboard\` when the user asks to "show", "view", or "see" data (e.g., "Show me John's meds").
     - Use \`create_custom_dashboard\` when the user explicitly asks to "create a dashboard" or "save a view".
     - **Data Sources:** Use the provided "Dashboard Data Sources" context to know valid keys (e.g., \`api:patients\`, \`table:123\`).
       - **Advanced Features:** You can add **Charts** (bar, line, pie) and **Filters** to widgets.
       - **Filters (SERVER-SIDE):** Use the \`filters\` array in config. Filters are applied on the server for efficiency.
         - **Supported Operators:**
           - \`equals\` or \`eq\`: Exact match
           - \`neq\` or \`not_equals\`: Not equal
           - \`contains\` or \`like\`: Case-insensitive substring match
           - \`starts_with\`: Value starts with
           - \`ends_with\`: Value ends with
           - \`gt\` or \`greater_than\`: Greater than
           - \`gte\`: Greater than or equal
           - \`lt\` or \`less_than\`: Less than
           - \`lte\`: Less than or equal
           - \`in\`: Value in array (value should be array)
           - \`not_in\`: Value not in array
           - \`is_null\`: Field is null
           - \`is_not_null\`: Field is not null
           - \`between\`: Value between two values (value should be [min, max])
         - **Filterable Fields:** The "Dashboard Data Sources" in context includes a \`filterableFields\` list for each source. You **MUST** use these fields.
           - **Mixed Tables:** Sources like \`api:pharmacy-orders\` or \`api:lab-orders\` support filtering by associated **Patient** data using \`patient_name\`, \`patient_phone\`, and \`token\`.
         - **Example 1:** User: "Show pharmacy orders for John" -> Action: \`render_temporary_dashboard\` with widget config: \`filters: [{ field: 'patient_name', operator: 'contains', value: 'John' }]\`
         - **Example 2:** User: "Show orders for Token 123" -> \`filters: [{ field: 'token', operator: 'equals', value: 123 }]\`
         - **Example 3:** \`filters: [{ field: 'expiry_date', operator: 'lt', value: '2024-01-01' }, { field: 'stock', operator: 'gt', value: 0 }]\`
         - Smartly infer dates for "expired" (lt today), "expiring this week" (between today and next week), etc.
       - **Charts:** Set \`type: 'chart'\`. Config requires \`chartType\`, \`xAxisKey\` (category), \`dataKey\` (value).

**Interpretation Rules:**
- **Analysis Dates:** When the user asks for analysis (financial or inventory) for a specific time range (e.g., "last month", "yesterday"), you **MUST** include \`startDate\` and \`endDate\` in the \`navigate_to\` action for \`/dashboard/analysis\`.
- If the user says "add drug", "buy medicine", or "new stock", they **usually mean "Add Item to Purchase Order"** (use \`add_purchase_items\` or navigate to \`/dashboard/purchase\`).
- **Prerequisite:** If you are using ANY purchase tools (\`add_purchase_items\`, \`search_distributor_purchase\`, \`set_distributor_purchase\`, \`edit_purchase_items\`), you **MUST** include a \`navigate_to\` action with \`page: "/dashboard/purchase"\` as the **FIRST** action in your list, unless you are already on that page.
- **ONLY** use \`update_drug\` (create) if the user explicitly says "create new drug definition" or "add to master inventory".
- The correct route for purchasing is \`/dashboard/purchase\`.

- **Drug Name & Brand Handling (CRITICAL):**
  - "Name" refers to the **Composition Name** (or Generic Name).
  - "Brand Name" refers to the **Brand Name**.
  - **Auto-Computation:** If the user provides a *Brand Name* (e.g., "Tab Dolo 650"), you **MUST** automatically:
    1.  Infer the **Composition** (e.g., "Tab Paracetamol 650mg") and use it for the "name" field.
    2.  Use the provided brand for the "brand_name" field (e.g., "Dolo 650").
    3.  Infer the **pack size** if implied (e.g., "1x10") and use it for the "pack" field.
  - If the user provides only a Brand Name and you cannot confidently infer the Composition, you **MUST** use \`ask_followup_question\` to ask the user for the composition.
  - Apply this logic to both \`add_purchase_items\` and \`update_drug\` actions.

- **Inventory Navigation:** If you execute "update_drug" or "search_pharmacy_inventory", you **MUST** include a "navigate_to" action for "/dashboard/inventory". If you searched for or updated a specific term, append it as "?search=Term" (e.g. "/dashboard/inventory?search=Paracetamol").
- **Lab Navigation:** If you execute "update_lab_test", you **MUST** include a "navigate_to" action for "/lab-inventory", unless you are already on that page.

**Action Tools:**
You can perform the following actions. Return a JSON array of actions.

\`\`\`json
[
    {
        "action": "update_clinic_settings",
        "updates": {
            "admissionCharge": "number string",
            "perDayCharge": "number string",
            "otherCharges": "number string",
            "name": "string",
            "address": "string",
            "notes": "string",
            "logoUrl": "string",
            "upi_id": "string",
            "low_stock_threshold": number,
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "gemini_api_key": "string",
            "voice_ai_language": "string (e.g. 'en-US', 'te-IN')"
        }
    },
    {
        "action": "create_staff_member",
        "staff": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null
        }
    },
    {
        "action": "update_staff_member",
        "id": "string | number",
        "updates": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null,
            "active": boolean
        }
    },
    {
        "action": "set_analysis_dates",
        "startDate": "YYYY-MM-DD",
        "endDate": "YYYY-MM-DD"
    },
    {
        "action": "navigate_to",
        "page": "/dashboard/inventory" | "/lab-inventory" | "/dashboard/queue" | "/dashboard/staff" | "/dashboard/purchase" | "/dashboard/analysis" | "/dashboard/clinic-hub" | "/billing" | "/dashboard/patients",
        "section": "financial" | "inventory" | "string (optional)",
        "startDate": "YYYY-MM-DD (optional, for analysis page)",
        "endDate": "YYYY-MM-DD (optional, for analysis page)"
    },
    {
        "action": "highlight_section",
        "elementId": "string"
    },
    {
        "action": "refresh_analysis"
    },
    {
        "action": "ask_followup_question",
        "question": "string"
    },
    {
        "action": "search_pharmacy_inventory",
        "query": "string (name, brand, or composition)"
    },
    {
        "action": "update_drug",
        "id": "number",
        "updates": {
            "name": "string",
            "brand_name": "string",
            "description": "string",
            "mrp": "number (MRP)",
            "stock": "number",
            "pack": "string (e.g. strip, bottle)",
            "supplier": "string",
            "expiry_date": "YYYY-MM-DD",
            "rate": "number",
            "box_number": "string",
            "gst": "number",
            "margin": "number",
            "discount": "number",
            "batch": "string",
            "hsn_code": "string",
            "mfg": "string",
            "mfg": "string",
            "loose": "number",
            "custom_fields": "object { key: value } (Optional: Update custom field values)"
        }
    },
    {
        "action": "update_lab_test",
        "serial_number": 1,
        "updates": {
            "name": "string",
            "price": "number",
            "description": "string",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit }"
        }
    },
    {
        "action": "search_lab_inventory",
        "query": "string (test name or description)"
    },
    {
        "action": "create_lab_test",
        "test": {
            "name": "string",
            "price": "number",
            "description": "string (optional)",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit } (optional)"
        }
    },
    {
        "action": "search_distributor_purchase",
        "query": "string"
    },
    {
        "action": "set_distributor_purchase",
        "distributorId": "string"
    },
    {
        "action": "add_purchase_items",
        "items": [
            {
                "name": "string (Composition Name)",
                "brand_name": "string",
                "stock": "number (quantity)",
                "rate": "number (buying price)",
                "mrp": "number",
                "pack": "string",
                "expiry_date": "YYYY-MM-DD",
                "batch": "string",
                "discount": "number",
                "gst": "number"
            }
        ]
    },
    {
        "action": "edit_purchase_items",
        "updates": [
            {
                "serial_number": "number (The Row # from context)",
                "field": "string (name, stock, rate, etc.)",
                "value": "string | number"
            }
        ]
    },
    {
        "action": "end_task",
        "summary": "string"
    },
    {
        "action": "open_new_case",
        "name": "string (Patient Name)",
        "age": "number (optional)",
        "gender": "M | F | O (optional)",
        "phone": "string (optional)",
        "complaint": "string (The medical complaint/reason)"
    },
    {
        "action": "manage_custom_columns",
        "entity": "patients" | "drugs" | "lab_tests",
        "operation": "add" | "remove",
        "column": {
            "label": "string",
            "type": "text" | "number" | "date" | "boolean",
            "required": boolean
        }
    },
    {
        "action": "create_custom_table",
        "name": "string",
        "description": "string (optional)",
        "columns": [
            {
                "label": "string",
                "type": "text" | "number" | "date" | "boolean",
                "required": boolean
            }
        ]
    },
    {
        "action": "add_table_row",
        "tableId": "string (The ID of the custom table)",
        "data": "object { key: value } (Keys must match column keys derived from labels)"
    },
    {
        "tableId": "string",
        "recordId": "string (The ID of the row/record to update)",
        "data": "object { key: value } (Updates to apply)"
    },
    {
        "action": "create_custom_dashboard",
        "name": "string",
        "description": "string (optional)",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string (one of the keys from Dashboard Data Sources, e.g. api:patients, table:xyz)",
                "config": "object { columns?: string[], label?: string, chartType?: 'bar'|'line'|'pie', xAxisKey?: string, dataKey?: string, filters?: Array<{field, operator, value}> }"
            }
        ]
    },
    {
        "action": "render_temporary_dashboard",
        "title": "string",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string",
                "config": "object { columns?: [], label?, chartType?, xAxisKey?, dataKey?, filters?: [] }"
            }
        ]
    }
]
\`\`\`

**Navigation Reference:**
- **Pharmacy Inventory:** \`/dashboard/inventory\`
- **Lab Inventory:** \`/lab-inventory\`
- **Doctor Queue:** \`/dashboard/queue\`
- **Staff Management:** \`/dashboard/staff\`
- **All Patients:** \`/dashboard/patients\`
- **Billing:** \`/billing\`
- **Purchase Page:** \`/dashboard/purchase\`
- **Analysis:** \`/dashboard/analysis\`
- **Clinic Hub:** \`/dashboard/clinic-hub\`
\`\`\`

**Rules:**
-   **Always** return a JSON array as the last part of your response.
-   If the user's request is satisfied, use the \`end_task\` action with a summary of what was done.
-   If you need more info, use \`ask_followup_question\`.
-   If you perform an action (like updating settings), and there's nothing else to do *immediately* but you want to confirm it's done, you can return the action. The system will execute it and call you back with the result. Then you can \`end_task\`.
-   For \`create_staff_member\`, if password is not provided by user, generate a secure random password and mention it in the summary.
-   Update numeric strings as strings (e.g., "500.00").
-   **CRITICAL DO's and DON'Ts:**
    -   **DO NOT** fill in empty fields (like \`gemini_api_key\`, \`logoUrl\`, \`upi_id\`, etc.) with fake, placeholder, or example data.
    -   **ONLY** update fields that the user *intentionally* asked to change.
    -   **PRESERVE** existing values for any fields not explicitly mentioned in the user's request.
    -   If a field is empty and the user didn't ask to set it, **leave it empty**.
    -   Do not invent values.
`;async function ehe(){var n;if(!_O()&&TC)return TC;let e=null;try{const a=await ie("/api/clinics/gemini-api-keys");if(a.ok){const s=(await a.json()).keys||[];if(s.length>0){const o=s[Math.floor(Math.random()*s.length)];return console.log(`[ClinicHub] Using random clinic Gemini key from pool of ${s.length} keys.`),o}}}catch(a){console.warn("Could not fetch clinic multi-key pool.",a)}try{const a=await ie("/api/clinics/settings");if(a.ok){const i=await a.json();(n=i.gemini_api_key)!=null&&n.trim()&&(e=i.gemini_api_key.trim())}}catch(a){console.warn("Error fetching updated key",a)}if(e)return e;try{const a=await ie("/api/global-settings/gemini-api-keys");if(a.ok){const s=(await a.json()).keys||[];if(s.length>0){const o=s[Math.floor(Math.random()*s.length)];return console.log(`[ClinicHub] Using random Gemini key from pool of ${s.length} keys.`),o}}}catch(a){console.warn("Could not fetch multi-key pool.",a)}try{const a=await ie("/api/global-settings/app_gemini_api_key");if(a.ok){const s=(await a.json()).value;if(s&&s.trim()!=="")return s.trim()}}catch(a){console.warn("Could not fetch global API key.",a)}return TC}async function the(t,e,n=[],a){var h,p,m,x,b,j;let i=(h=e.settings)==null?void 0:h.gemini_api_key;if(!i||!i.trim())try{i=await ehe()}catch(w){console.warn("Using fallback key or failing:",w)}if(!i)throw new Error("No Gemini API Key provided in settings or environment.");const s=new SO({apiKey:i}),o=[];o.push({role:"user",parts:[{text:Zde}]}),o.push({role:"model",parts:[{text:"Understood. I am ready to assist with Clinic Hub management."}]}),n.forEach(w=>{o.push({role:w.role,parts:[{text:w.text}]})});const u=[{text:`
    Context:
    ${`
    --- Current Clinic Context ---
    Settings: ${JSON.stringify(e.settings,null,2)}
    
    Custom Columns Configuration: ${JSON.stringify(e.settings.custom_columns_config||{},null,2)}

    Custom Tables (Available for adding/editing rows): ${JSON.stringify(e.customTables||[],null,2)}
    
    Dashboard Data Sources (Use these keys for widgets): ${JSON.stringify(e.dashboardDataSources||[],null,2)}

    --- DYNAMIC CONTEXT DATA (Configured tables with <200 rows) ---
    ${Object.entries(e.dynamicContextData||{}).map(([w,_])=>{const k=(_.data||[]).slice(0,50).map((C,A)=>({_sn:A+1,...C}));return`${_.label||w} (${_.count||0} records): ${JSON.stringify(k,null,2)}`}).join(`

`)}
    --- END DYNAMIC CONTEXT ---

    Staff List: ${JSON.stringify(e.staffList.map(w=>({id:w.id||w._id,name:w.name,role:w.role,email:w.email,active:w.active,opd_fee:w.opd_fee})),null,2)}
    
    Previous Action Results (if any): ${JSON.stringify(e.actionResults||[],null,2)}

    Analysis Data (if active): ${JSON.stringify(e.analysisData||{},null,2)}

    Pharmacy Inventory: ${e.pharmacyInventory?JSON.stringify(e.pharmacyInventory,null,2):"Not loaded. Use 'search_pharmacy_inventory' to find items."}

    Distributors List: ${JSON.stringify((e.distributors||[]).map(w=>({serial_number:w.serial_number,name:w.name,contact_person:w.contact_person,phone:w.phone,remainingBalance:w.remainingBalance})),null,2)}

    Lab Tests Inventory: ${JSON.stringify((e.labInventory||[]).map(w=>({serial:w.serial_number,name:w.name,price:w.price,description:w.description,default_parameters:w.default_parameters})),null,2)}

    Current Purchase Page Rows: ${JSON.stringify((e.purchaseRows||[]).map((w,_)=>({serial_number:_+1,name:w.name,stock:w.stock,rate:w.rate,mrp:w.mrp,net_value:(w.stock*w.rate).toFixed(2)})),null,2)}

    Current Application Page Context: ${e.pageContext?JSON.stringify(e.pageContext,null,2):"Unknown/General Dashboard"}
    `}

    User Query/Input:
    ${t}
    `}];if(a){const w=a.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");u.push({inlineData:{data:w,mimeType:"image/jpeg"}})}o.push({role:"user",parts:u});try{const w={model:Jde,contents:o,generationConfig:{temperature:.7,maxOutputTokens:2048,responseMimeType:"text/plain"}},_=await s.models.generateContentStream(w);let k="";for await(const C of _){const A=C;A.text&&typeof A.text=="function"?k+=A.text():(j=(b=(x=(m=(p=A.candidates)==null?void 0:p[0])==null?void 0:m.content)==null?void 0:x.parts)==null?void 0:b[0])!=null&&j.text&&(k+=A.candidates[0].content.parts[0].text)}if(!k)throw new Error("Empty response from AI");return k}catch(w){throw console.error("Gemini Interaction Error:",w),new Error("Failed to communicate with AI Assistant.")}}const CO=({settings:t,staffList:e,onSettingsUpdate:n,onStaffUpdate:a,onHighlight:i,enableDynamicContext:s=!1})=>{const o=Mt(),l=ps(),{setAnalysisDateRange:c,analysisData:u,analysisNavigate:h,refreshAnalysis:p,pageContext:m}=GN(),{setDistributors:x,setSelectedDistributor:b,setSearchTerm:j,addPurchaseRow:w,updatePurchaseRow:_,distributors:k,purchaseRows:C}=Wz(),[A,T]=v.useState(""),E=v.useRef(u),I=v.useRef(C);v.useEffect(()=>{E.current=u},[u]),v.useEffect(()=>{I.current=C},[C]);const[$,U]=v.useState([]),[B,R]=v.useState([]),[z,G]=v.useState([]),[K,Y]=v.useState(!1),[q,V]=v.useState(null),H=v.useRef(!1),Q=v.useRef(0),L=5,te=()=>{H.current=!1,Y(!1),G(De=>[...De,{role:"system",text:" Task stopped by user."}])},me=De=>{const ue=new FileReader;ue.onloadend=()=>{V(ue.result)},ue.readAsDataURL(De)},X=()=>{V(null)},[Re,Se]=v.useState(null),Ee=()=>Se(null),Fe=async(De,ue)=>{if(!Re)return;const Ae={name:De,description:ue,widgets:Re.widgets};if(!(await ie("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ae)})).ok)throw new Error("Failed to save dashboard");Se(null)},le=async(De,ue,Ae=[],ce)=>{var be,ke,Ce;if(H.current){if(Q.current+=1,Q.current>L){G(ne=>[...ne,{role:"system",text:" Task limit reached. Stopping automatically."}]),Y(!1),H.current=!1;return}try{let ne=t,ye=e,de=[],se=[],re=[],oe=[],je=[];try{const[we,Qe]=await Promise.all([ie("/api/clinics/settings"),ie("/staff")]);if(we.ok&&Qe.ok){const Xe=await we.json(),ut=await Qe.json(),[Ct,bt,Pe,ot]=await Promise.all([ie("/api/drugs"),ie("/api/lab-tests"),ie("/api/distributors"),ie("/api/custom-tables"),ie("/api/dashboards/data-sources")]);if(Ct.ok){const kt=await Ct.json();de=kt.drugs||kt||[]}if(bt.ok){const Ue=(await bt.json()).map((jt,Tt)=>({...jt,serial_number:Tt+1}));se=Ue,U(Ue)}if(Pe.ok&&(re=(await Pe.json()||[]).map((Ue,jt)=>({...Ue,serial_number:jt+1}))),ot.ok){const kt=await ot.json();oe=kt,R(kt)}try{const kt=await ie("/api/dashboards/data-sources");kt.ok&&(je=await kt.json())}catch(kt){console.warn("Failed to fetch dashboard sources",kt)}ne={...Xe,admissionCharge:parseFloat(Xe.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(Xe.perDayCharge||0).toFixed(2),otherCharges:parseFloat(Xe.otherCharges||0).toFixed(2),aiMemory:Xe.aiMemory||"",clinicWideSystemPrompt:Xe.clinicWideSystemPrompt||"",gemini_api_key:Xe.gemini_api_key||"",low_stock_threshold:Xe.low_stock_threshold!==void 0&&Xe.low_stock_threshold!==null?String(Xe.low_stock_threshold):"10",name:Xe.name||"",logoUrl:Xe.logoUrl||"",upi_id:Xe.upi_id||"",address:Xe.address||"",notes:Xe.notes||"",clinic_id:Xe.clinic_id},ye=ut.map(kt=>({...kt,id:kt._id||kt.id}))}}catch(we){console.warn("Failed to fetch fresh context for AI loop, falling back to props",we)}let Oe={};if(s)try{const we=await ie("/api/ai-context/data");we.ok&&(Oe=await we.json())}catch(we){console.warn("Failed to fetch dynamic AI context",we)}const J={settings:ne,staffList:ye,analysisData:E.current,pharmacyInventory:de.length>50?void 0:de,labInventory:se,distributors:re,purchaseRows:I.current,actionResults:Ae,pageContext:m||void 0,customTables:oe,dashboardDataSources:je,dynamicContextData:Oe},xe=ue.filter(we=>we.role!=="system"),ge=await the(De,J,xe,ce);if(!H.current)return;let he=[];try{const we=ge.match(/\[[\s\S]*\]/);if(we)he=JSON.parse(we[0]);else{G(Qe=>[...Qe,{role:"model",text:ge}]),Y(!1),H.current=!1;return}}catch(we){console.error("Failed to parse AI response",we),G(Qe=>[...Qe,{role:"model",text:"I'm having trouble processing that. Please try again."}]),Y(!1),H.current=!1;return}const Ie=[];let nt=[],Be=[];for(const we of he){if(!H.current)break;if(we.action==="end_task"){G(Qe=>[...Qe,{role:"model",text:we.summary}]),Y(!1),H.current=!1;return}if(we.action==="ask_followup_question"){G(Qe=>[...Qe,{role:"model",text:we.question}]),Y(!1),H.current=!1;return}try{if(we.action==="update_clinic_settings"){const Qe=we.updates;Object.keys(Qe).forEach(Ct=>nt.push(`setting-${Ct}`));const Xe={...ne,...Qe},ut={...Xe,admissionCharge:parseFloat(Xe.admissionCharge),perDayCharge:parseFloat(Xe.perDayCharge),otherCharges:parseFloat(Xe.otherCharges),low_stock_threshold:parseInt(Xe.low_stock_threshold)};await ie("/api/clinics/settings",{method:"PUT",body:JSON.stringify(ut)}),n&&n(),Ie.push({action:"update_clinic_settings",status:"success"}),Be.push({role:"system",text:" Updated clinic settings"})}if(we.action==="create_staff_member"&&(await ie("/api/staff",{method:"POST",body:JSON.stringify({...we.staff,clinic_id:ne.clinic_id})}),a&&a(),Ie.push({action:"create_staff_member",status:"success",name:we.staff.name}),Be.push({role:"system",text:` Created staff member: ${we.staff.name}`})),we.action==="update_staff_member"){const Qe=we.id;await ie(`/api/staff/${Qe}`,{method:"PUT",body:JSON.stringify(we.updates)}),a&&a(),nt.push(`staff-member-${Qe}`),Ie.push({action:"update_staff_member",status:"success",id:Qe}),Be.push({role:"system",text:" Updated staff member details"})}if(we.action==="set_analysis_dates"){const{startDate:Qe,endDate:Xe}=we;c({startDate:new Date(Qe),endDate:new Date(Xe)}),Ie.push({action:"set_analysis_dates",status:"success",startDate:Qe,endDate:Xe}),Be.push({role:"system",text:` Set analysis dates: ${Qe} to ${Xe}`})}if(we.action==="navigate_to"){let Qe=we.page;if(we.page&&we.page.includes("analysis")&&we.startDate&&we.endDate){const Xe=Qe.includes("?")?"&":"?";Qe=`${Qe}${Xe}startDate=${we.startDate}&endDate=${we.endDate}`}else we.page&&we.page.includes("analysis")&&((be=E.current)!=null&&be.startDate)&&((ke=E.current)!=null&&ke.endDate);o(Qe),we.section&&setTimeout(()=>h(we.section),500),Ie.push({action:"navigate_to",status:"success",page:Qe}),Be.push({role:"system",text:` Navigated to ${Qe}`})}if(we.action==="highlight_section"&&(nt.push(we.elementId),Ie.push({action:"highlight_section",status:"success",id:we.elementId})),we.action==="refresh_analysis"){Be.push({role:"system",text:" Refreshing analysis data..."});const Qe=await p();Qe?(E.current=Qe,Ie.push({action:"refresh_analysis",status:"success",summary:"Data refreshed successfully"}),Be.push({role:"system",text:" Analysis data refreshed"})):(Ie.push({action:"refresh_analysis",status:"error",error:"No data returned"}),Be.push({role:"system",text:" Failed to refresh analysis data"}))}if(we.action==="search_pharmacy_inventory"){const Qe=we.query.toLowerCase(),Xe=de.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Qe)||Ct.brand_name&&Ct.brand_name.toLowerCase().includes(Qe)||Ct.description&&Ct.description.toLowerCase().includes(Qe)),ut=Xe.slice(0,10);Ie.push({action:"search_pharmacy_inventory",status:"success",count:Xe.length,results:ut}),Xe.length>0?Be.push({role:"system",text:` Found ${Xe.length} matches for "${we.query}". Showing top ${ut.length}.`}):Be.push({role:"system",text:` No matches found for "${we.query}"`})}if(we.action==="update_drug"){const Qe=we.id;try{const Xe=de.find(bt=>bt.id===Qe);if(!Xe)throw new Error(`Drug with ID ${Qe} not found.`);const ut={...we.updates};ut.custom_fields&&(ut.custom_fields={...Xe.custom_fields||{},...ut.custom_fields});const Ct={...Xe,...ut};await ie(`/api/drugs/${Qe}`,{method:"PUT",body:JSON.stringify(Ct)}),Ie.push({action:"update_drug",status:"success",id:Qe,updates:we.updates}),Be.push({role:"system",text:` Updated drug: ${Xe.name}`}),Se({title:`Updated: ${Xe.name}`,widgets:[{id:"edited-drug",type:"table",title:`Drug Updated: ${Xe.name}`,dataSource:"api:drugs",config:{filters:[{field:"id",operator:"equals",value:Qe}],columns:["name","brand_name","stock","mrp","expiry_date","pack"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Xe){Ie.push({action:"update_drug",status:"error",error:Xe.message}),Be.push({role:"system",text:` Failed to update drug: ${Xe.message}`})}}if(we.action==="update_lab_test"){const Qe=se.find(Xe=>Xe.serial_number===we.serial_number);if(Qe){const Xe={...Qe,...we.updates};await ie(`/api/lab-tests/${Qe.id}`,{method:"PUT",body:JSON.stringify(Xe)}),Ie.push({action:"update_lab_test",status:"success",item:Qe.name}),Be.push({role:"system",text:` Updated lab test: ${Qe.name}`}),Se({title:`Updated: ${Qe.name}`,widgets:[{id:"edited-lab-test",type:"table",title:`Lab Test Updated: ${Qe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Qe.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}else Ie.push({action:"update_lab_test",status:"error",error:`Test with serial ${we.serial_number} not found`}),Be.push({role:"system",text:` Lab test with serial ${we.serial_number} not found`})}if(we.action==="search_lab_inventory"){const Qe=we.query.toLowerCase(),Xe=se.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Qe)||Ct.description&&Ct.description.toLowerCase().includes(Qe)),ut=Xe.slice(0,10);Ie.push({action:"search_lab_inventory",status:"success",count:Xe.length,results:ut.map(Ct=>({serial_number:Ct.serial_number,id:Ct.id,name:Ct.name,price:Ct.price,description:Ct.description}))}),Xe.length>0?Be.push({role:"system",text:` Found ${Xe.length} lab tests for "${we.query}". Showing top ${ut.length}.`}):Be.push({role:"system",text:` No lab tests found for "${we.query}"`})}if(we.action==="create_lab_test")try{const Qe=we.test,Xe={name:Qe.name,price:parseFloat(Qe.price)||0,description:Qe.description||"",default_parameters:Qe.default_parameters||[]},ut=await ie("/api/lab-tests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)});if(!ut.ok){const bt=await ut.json();throw new Error(bt.message||"Failed to create lab test")}const Ct=await ut.json();Ie.push({action:"create_lab_test",status:"success",id:Ct.id,name:Qe.name}),Be.push({role:"system",text:` Created lab test: ${Qe.name}`}),Se({title:`Created: ${Qe.name}`,widgets:[{id:"created-lab-test",type:"table",title:`New Lab Test: ${Qe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Ct.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Qe){Ie.push({action:"create_lab_test",status:"error",error:Qe.message}),Be.push({role:"system",text:` Failed to create lab test: ${Qe.message}`})}if(we.action==="search_distributor_purchase"){const Qe=we.query,Xe=await ie(`/api/distributors?search=${encodeURIComponent(Qe)}`);if(Xe.ok){const ut=await Xe.json();x(ut),j(Qe),Ie.push({action:"search_distributor_purchase",status:"success",count:ut.length,results:ut}),Be.push({role:"system",text:` Found ${ut.length} distributors for "${Qe}"`})}else Ie.push({action:"search_distributor_purchase",status:"error",error:Xe.statusText}),Be.push({role:"system",text:" Failed to search distributors"})}if(we.action==="set_distributor_purchase"){const Qe=we.distributorId;let Xe=k.find(ut=>ut.id===Qe);Xe?(b(Xe),j(Xe.name),Ie.push({action:"set_distributor_purchase",status:"success",distributor:Xe.name}),Be.push({role:"system",text:` Selected distributor: ${Xe.name}`})):(Ie.push({action:"set_distributor_purchase",status:"error",error:"Distributor not found in current search results. Please search first."}),Be.push({role:"system",text:" Distributor not found. Please search first."}))}if(we.action==="add_purchase_items"){const Qe=we.items;let Xe=0;Qe.forEach(ut=>{const bt={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:ut.name||"",composition:ut.composition||"",description:ut.description||"",mrp:ut.mrp||0,stock:ut.stock||0,pack:ut.pack||"",supplier:"",expiry_date:ut.expiry_date||"",rate:ut.rate||0,box_number:ut.box_number||"",gst:ut.gst||0,margin:ut.margin||0,discount:ut.discount||0,brand_name:ut.brand_name||"",batch:ut.batch||"",hsn_code:ut.hsn_code||"",mfg:ut.mfg||"",loose:ut.loose||0,last_updated:"",created_at:""};w(bt),Xe++}),Ie.push({action:"add_purchase_items",status:"success",count:Xe}),Be.push({role:"system",text:` Added ${Xe} items to purchase list`})}if(we.action==="edit_purchase_items"){const Qe=we.updates;let Xe=0;const ut=I.current||[];Qe.forEach(Ct=>{if(Ct.serial_number){const bt=Ct.serial_number-1,Pe=ut[bt];Pe&&Pe.id?(_(Pe.id,{[Ct.field]:Ct.value}),Xe++):(console.warn(`Row with serial number ${Ct.serial_number} not found.`),Be.push({role:"system",text:` Row #${Ct.serial_number} not found.`}))}}),Ie.push({action:"edit_purchase_items",status:"success",count:Xe}),Be.push({role:"system",text:` Updated ${Xe} items`})}if(we.action==="open_new_case"){const{name:Qe,age:Xe,gender:ut,complaint:Ct,phone:bt}=we;try{const Pe=await ie("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Qe||"New Patient",age:Xe||null,gender:ut||null,phone:bt||null,address:null})});if(!Pe.ok){const Tt=await Pe.json().catch(()=>({}));throw Pe.status===403&&((Ce=Tt.message)!=null&&Ce.includes("Patient limit"))?new Error(`Patient limit reached: ${Tt.message}`):new Error(Tt.message||"Failed to create patient")}const ot=await Pe.json();if(!ot||!ot.id)throw new Error("Created patient has no ID");const kt=await ie("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:ot.id,complaint:Ct||"New Case"})});if(!kt.ok)throw new Error("Failed to create queue entry");const Ue=await kt.json(),jt=ot.id;jt&&(l.prefetchQuery({queryKey:Kt.patients.context(jt),queryFn:()=>ie(`/api/patients/${jt}/context`).then(Tt=>Tt.json()),staleTime:1e3*60*5}),l.prefetchQuery({queryKey:Kt.patientDebts.balance(jt),queryFn:()=>ie(`/api/patient-debts/${jt}/balance`).then(Tt=>Tt.json()),staleTime:1e3*60}),l.prefetchQuery({queryKey:Kt.queue.latest(jt),queryFn:()=>ie(`/api/queue/patient/${jt}/latest`).then(Tt=>Tt.json()),staleTime:1e3*5})),o(`/dashboard/edit-complaint/${Ue.id}`,{state:{initialComplaint:Ct}}),Ie.push({action:"open_new_case",status:"success",patientId:ot.id,queueId:Ue.id}),Be.push({role:"system",text:` Opened new case for ${Qe}`}),Y(!1),H.current=!1;return}catch(Pe){Pe.message.includes("Patient limit")&&(o("/start-clinic-subscription"),Be.push({role:"system",text:" Patient limit reached. Redirecting to subscription."})),Ie.push({action:"open_new_case",status:"error",error:Pe.message}),Be.push({role:"system",text:` Failed to open new case: ${Pe.message}`})}}if(we.action==="manage_custom_columns"){const{entity:Qe,operation:Xe,column:ut}=we,Ct=ne.custom_columns_config||{drugs:[],patients:[],lab_tests:[]};let Pe=[...Ct[Qe]||[]];if(Xe==="add"){const kt=ut.label.toLowerCase().replace(/[^a-z0-9]/g,"_");Pe.some(Ue=>Ue.key===kt)||Pe.push({...ut,key:kt})}else if(Xe==="remove"){const kt=ut.label.toLowerCase().replace(/[^a-z0-9]/g,"_");Pe=Pe.filter(Ue=>Ue.key!==kt&&Ue.label!==ut.label)}const ot={...Ct,[Qe]:Pe};await ie("/api/clinics/settings",{method:"PUT",body:JSON.stringify({...ne,custom_columns_config:ot})}),n&&n(),Ie.push({action:"manage_custom_columns",status:"success",entity:Qe,operation:Xe,column:ut.label}),Be.push({role:"system",text:` ${Xe==="add"?"Added":"Removed"} custom column '${ut.label}' for ${Qe}`})}if(we.action==="create_custom_table"){const{name:Qe,description:Xe,columns:ut}=we,Ct=ut.map(ot=>({...ot,key:ot.label.toLowerCase().replace(/[^a-z0-9]/g,"_")})),bt=await ie("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Qe,description:Xe,columns:Ct})});if(!bt.ok)throw new Error("Failed to create table");const Pe=await bt.json();R(ot=>[...ot,Pe]),Ie.push({action:"create_custom_table",status:"success",tableId:Pe.id}),Be.push({role:"system",text:` Created custom table: ${Qe}`})}if(we.action==="add_table_row"){const{tableId:Qe,data:Xe}=we;if(!(await ie(`/api/custom-tables/${Qe}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Xe})})).ok)throw new Error("Failed to add row");Ie.push({action:"add_table_row",status:"success"}),Be.push({role:"system",text:" Added row to table"})}if(we.action==="update_table_row"){const{recordId:Qe,data:Xe}=we;if(!(await ie(`/api/custom-tables/records/${Qe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Xe})})).ok)throw new Error("Failed to update row");Ie.push({action:"update_table_row",status:"success"}),Be.push({role:"system",text:" Updated row"})}if(we.action==="create_custom_dashboard"){const{name:Qe,description:Xe,widgets:ut}=we,Ct=await ie("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Qe,description:Xe,widgets:ut})});if(!Ct.ok)throw new Error("Failed to create dashboard");const bt=await Ct.json();Ie.push({action:"create_custom_dashboard",status:"success",id:bt.id}),Be.push({role:"system",text:` Created dashboard: ${Qe}`})}we.action==="render_temporary_dashboard"&&(Se({title:we.title,widgets:we.widgets}),Ie.push({action:"render_temporary_dashboard",status:"success"}),Be.push({role:"system",text:` Showing temporary dashboard: ${we.title}`}))}catch(Qe){console.error("Action execution failed",we,Qe),Ie.push({action:we.action,status:"error",error:Qe.message}),Be.push({role:"system",text:` Failed to execute action: ${we.action}`})}}nt.length>0&&i&&setTimeout(()=>i(nt),500),Be.length>0&&G(we=>[...we,...Be]);const Ge=[...Ae,...Ie],it=`Reflecting on previous actions: ${JSON.stringify(Ie)}. What is the next step? If done, call end_task.`,wt=[...ue,...Be,{role:"model",text:ge},{role:"user",text:it}];await le(it,wt,Ge,void 0)}catch(ne){console.error(ne),G(ye=>[...ye,{role:"model",text:"Something went wrong."}]),Y(!1),H.current=!1}}},_e=v.useCallback(()=>{G([]),T(""),Y(!1),H.current=!1,Q.current=0,V(null)},[]);return{chatQuery:A,setChatQuery:T,chatHistory:z,isProcessing:K,handleSendMessage:De=>{const ue=De!==void 0?De:A;if(!ue.trim()&&!q)return;H.current=!0,Y(!0),Q.current=0;const Ae={role:"user",text:ue};q&&(Ae.text+=" [Image Attached]"),G(be=>[...be,Ae]);const ce=q||void 0;T(""),V(null),le(ue,z,[],ce)},refreshChat:_e,stopGeneration:te,selectedImage:q,handleImageSelect:me,clearImage:X,temporaryDashboard:Re,closeTemporaryDashboard:Ee,saveTemporaryDashboard:Fe}},ee=({className:t="",width:e,height:n,variant:a="rectangular",animate:i=!0,style:s={}})=>{const o={width:e,height:n,...s};return r.jsx("div",{className:`skeleton skeleton-${a} ${i?"skeleton-animate":""} ${t}`,style:o})};var AC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var z4;function nhe(){return z4||(z4=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=i(s,a(l)))}return s}function a(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)e.call(s,l)&&s[l]&&(o=i(o,l));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(AC)),AC.exports}var rhe=nhe();const cd=Kn(rhe);function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function ahe(t,e){if(Ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ef(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FU(t){var e=ahe(t,"string");return Ef(e)=="symbol"?e:e+""}function yv(t,e,n){return(e=FU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q4(Object(n),!0).forEach(function(a){yv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ihe(t){if(Array.isArray(t))return t}function she(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function tE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function $U(t,e){if(t){if(typeof t=="string")return tE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tE(t,e):void 0}}function ohe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mc(t,e){return ihe(t)||she(t,e)||$U(t,e)||ohe()}function lhe(t,e){if(t==null)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;n[a]=t[a]}return n}function Yc(t,e){if(t==null)return{};var n,a,i=lhe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var che=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function uhe(t){var e=t.defaultInputValue,n=e===void 0?"":e,a=t.defaultMenuIsOpen,i=a===void 0?!1:a,s=t.defaultValue,o=s===void 0?null:s,l=t.inputValue,c=t.menuIsOpen,u=t.onChange,h=t.onInputChange,p=t.onMenuClose,m=t.onMenuOpen,x=t.value,b=Yc(t,che),j=v.useState(l!==void 0?l:n),w=Mc(j,2),_=w[0],k=w[1],C=v.useState(c!==void 0?c:i),A=Mc(C,2),T=A[0],E=A[1],I=v.useState(x!==void 0?x:o),$=Mc(I,2),U=$[0],B=$[1],R=v.useCallback(function(H,Q){typeof u=="function"&&u(H,Q),B(H)},[u]),z=v.useCallback(function(H,Q){var L;typeof h=="function"&&(L=h(H,Q)),k(L!==void 0?L:H)},[h]),G=v.useCallback(function(){typeof m=="function"&&m(),E(!0)},[m]),K=v.useCallback(function(){typeof p=="function"&&p(),E(!1)},[p]),Y=l!==void 0?l:_,q=c!==void 0?c:T,V=x!==void 0?x:U;return Zt(Zt({},b),{},{inputValue:Y,menuIsOpen:q,onChange:R,onInputChange:z,onMenuClose:K,onMenuOpen:G,value:V})}function sn(){return sn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},sn.apply(null,arguments)}function dhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U4(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,FU(a.key),a)}}function hhe(t,e,n){return e&&U4(t.prototype,e),n&&U4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nE(t,e){return nE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nE(t,e)}function fhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nE(t,e)}function Pw(t){return Pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pw(t)}function BU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BU=function(){return!!t})()}function phe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mhe(t,e){if(e&&(Ef(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return phe(t)}function ghe(t){var e=BU();return function(){var n,a=Pw(t);if(e){var i=Pw(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return mhe(this,n)}}function yhe(t){if(Array.isArray(t))return tE(t)}function xhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kO(t){return yhe(t)||xhe(t)||$U(t)||vhe()}function bhe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function jhe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var whe=function(){function t(n){var a=this;this._insertTag=function(i){var s;a.tags.length===0?a.insertionPoint?s=a.insertionPoint.nextSibling:a.prepend?s=a.container.firstChild:s=a.before:s=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(i,s),a.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(a){a.forEach(this._insertTag)},e.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(jhe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=bhe(i);try{s.insertRule(a,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(a));this.ctr++},e.flush=function(){this.tags.forEach(function(a){var i;return(i=a.parentNode)==null?void 0:i.removeChild(a)}),this.tags=[],this.ctr=0},t}(),fi="-ms-",Ew="-moz-",sr="-webkit-",zU="comm",TO="rule",AO="decl",Nhe="@import",qU="@keyframes",She="@layer",_he=Math.abs,aS=String.fromCharCode,Che=Object.assign;function khe(t,e){return Ja(t,0)^45?(((e<<2^Ja(t,0))<<2^Ja(t,1))<<2^Ja(t,2))<<2^Ja(t,3):0}function UU(t){return t.trim()}function The(t,e){return(t=e.exec(t))?t[0]:t}function or(t,e,n){return t.replace(e,n)}function rE(t,e){return t.indexOf(e)}function Ja(t,e){return t.charCodeAt(e)|0}function qv(t,e,n){return t.slice(e,n)}function Dl(t){return t.length}function PO(t){return t.length}function P1(t,e){return e.push(t),t}function Ahe(t,e){return t.map(e).join("")}var iS=1,hg=1,VU=0,fs=0,wa=0,Wg="";function sS(t,e,n,a,i,s,o){return{value:t,root:e,parent:n,type:a,props:i,children:s,line:iS,column:hg,length:o,return:""}}function tv(t,e){return Che(sS("",null,null,"",null,null,0),t,{length:-t.length},e)}function Phe(){return wa}function Ehe(){return wa=fs>0?Ja(Wg,--fs):0,hg--,wa===10&&(hg=1,iS--),wa}function Ls(){return wa=fs<VU?Ja(Wg,fs++):0,hg++,wa===10&&(hg=1,iS++),wa}function Fl(){return Ja(Wg,fs)}function cw(){return fs}function Ub(t,e){return qv(Wg,t,e)}function Uv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function HU(t){return iS=hg=1,VU=Dl(Wg=t),fs=0,[]}function GU(t){return Wg="",t}function uw(t){return UU(Ub(fs-1,aE(t===91?t+2:t===40?t+1:t)))}function Dhe(t){for(;(wa=Fl())&&wa<33;)Ls();return Uv(t)>2||Uv(wa)>3?"":" "}function Ohe(t,e){for(;--e&&Ls()&&!(wa<48||wa>102||wa>57&&wa<65||wa>70&&wa<97););return Ub(t,cw()+(e<6&&Fl()==32&&Ls()==32))}function aE(t){for(;Ls();)switch(wa){case t:return fs;case 34:case 39:t!==34&&t!==39&&aE(wa);break;case 40:t===41&&aE(t);break;case 92:Ls();break}return fs}function Mhe(t,e){for(;Ls()&&t+wa!==57;)if(t+wa===84&&Fl()===47)break;return"/*"+Ub(e,fs-1)+"*"+aS(t===47?t:Ls())}function Ihe(t){for(;!Uv(Fl());)Ls();return Ub(t,fs)}function Rhe(t){return GU(dw("",null,null,null,[""],t=HU(t),0,[0],t))}function dw(t,e,n,a,i,s,o,l,c){for(var u=0,h=0,p=o,m=0,x=0,b=0,j=1,w=1,_=1,k=0,C="",A=i,T=s,E=a,I=C;w;)switch(b=k,k=Ls()){case 40:if(b!=108&&Ja(I,p-1)==58){rE(I+=or(uw(k),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=uw(k);break;case 9:case 10:case 13:case 32:I+=Dhe(b);break;case 92:I+=Ohe(cw()-1,7);continue;case 47:switch(Fl()){case 42:case 47:P1(Lhe(Mhe(Ls(),cw()),e,n),c);break;default:I+="/"}break;case 123*j:l[u++]=Dl(I)*_;case 125*j:case 59:case 0:switch(k){case 0:case 125:w=0;case 59+h:_==-1&&(I=or(I,/\f/g,"")),x>0&&Dl(I)-p&&P1(x>32?H4(I+";",a,n,p-1):H4(or(I," ","")+";",a,n,p-2),c);break;case 59:I+=";";default:if(P1(E=V4(I,e,n,u,h,i,l,C,A=[],T=[],p),s),k===123)if(h===0)dw(I,e,E,E,A,s,p,l,T);else switch(m===99&&Ja(I,3)===110?100:m){case 100:case 108:case 109:case 115:dw(t,E,E,a&&P1(V4(t,E,E,0,0,i,l,C,i,A=[],p),T),i,T,p,l,a?A:T);break;default:dw(I,E,E,E,[""],T,0,l,T)}}u=h=x=0,j=_=1,C=I="",p=o;break;case 58:p=1+Dl(I),x=b;default:if(j<1){if(k==123)--j;else if(k==125&&j++==0&&Ehe()==125)continue}switch(I+=aS(k),k*j){case 38:_=h>0?1:(I+="\f",-1);break;case 44:l[u++]=(Dl(I)-1)*_,_=1;break;case 64:Fl()===45&&(I+=uw(Ls())),m=Fl(),h=p=Dl(C=I+=Ihe(cw())),k++;break;case 45:b===45&&Dl(I)==2&&(j=0)}}return s}function V4(t,e,n,a,i,s,o,l,c,u,h){for(var p=i-1,m=i===0?s:[""],x=PO(m),b=0,j=0,w=0;b<a;++b)for(var _=0,k=qv(t,p+1,p=_he(j=o[b])),C=t;_<x;++_)(C=UU(j>0?m[_]+" "+k:or(k,/&\f/g,m[_])))&&(c[w++]=C);return sS(t,e,n,i===0?TO:l,c,u,h)}function Lhe(t,e,n){return sS(t,e,n,zU,aS(Phe()),qv(t,2,-2),0)}function H4(t,e,n,a){return sS(t,e,n,AO,qv(t,0,a),qv(t,a+1,-1),a)}function Vm(t,e){for(var n="",a=PO(t),i=0;i<a;i++)n+=e(t[i],i,t,e)||"";return n}function Fhe(t,e,n,a){switch(t.type){case She:if(t.children.length)break;case Nhe:case AO:return t.return=t.return||t.value;case zU:return"";case qU:return t.return=t.value+"{"+Vm(t.children,a)+"}";case TO:t.value=t.props.join(",")}return Dl(n=Vm(t.children,a))?t.return=t.value+"{"+n+"}":""}function $he(t){var e=PO(t);return function(n,a,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,a,i,s)||"";return o}}function Bhe(t){return function(e){e.root||(e=e.return)&&t(e)}}function zhe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var qhe=function(e,n,a){for(var i=0,s=0;i=s,s=Fl(),i===38&&s===12&&(n[a]=1),!Uv(s);)Ls();return Ub(e,fs)},Uhe=function(e,n){var a=-1,i=44;do switch(Uv(i)){case 0:i===38&&Fl()===12&&(n[a]=1),e[a]+=qhe(fs-1,n,a);break;case 2:e[a]+=uw(i);break;case 4:if(i===44){e[++a]=Fl()===58?"&\f":"",n[a]=e[a].length;break}default:e[a]+=aS(i)}while(i=Ls());return e},Vhe=function(e,n){return GU(Uhe(HU(e),n))},G4=new WeakMap,Hhe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,a=e.parent,i=e.column===a.column&&e.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!G4.get(a))&&!i){G4.set(e,!0);for(var s=[],o=Vhe(n,s),l=a.props,c=0,u=0;c<o.length;c++)for(var h=0;h<l.length;h++,u++)e.props[u]=s[c]?o[c].replace(/&\f/g,l[h]):l[h]+" "+o[c]}}},Ghe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function WU(t,e){switch(khe(t,e)){case 5103:return sr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return sr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return sr+t+Ew+t+fi+t+t;case 6828:case 4268:return sr+t+fi+t+t;case 6165:return sr+t+fi+"flex-"+t+t;case 5187:return sr+t+or(t,/(\w+).+(:[^]+)/,sr+"box-$1$2"+fi+"flex-$1$2")+t;case 5443:return sr+t+fi+"flex-item-"+or(t,/flex-|-self/,"")+t;case 4675:return sr+t+fi+"flex-line-pack"+or(t,/align-content|flex-|-self/,"")+t;case 5548:return sr+t+fi+or(t,"shrink","negative")+t;case 5292:return sr+t+fi+or(t,"basis","preferred-size")+t;case 6060:return sr+"box-"+or(t,"-grow","")+sr+t+fi+or(t,"grow","positive")+t;case 4554:return sr+or(t,/([^-])(transform)/g,"$1"+sr+"$2")+t;case 6187:return or(or(or(t,/(zoom-|grab)/,sr+"$1"),/(image-set)/,sr+"$1"),t,"")+t;case 5495:case 3959:return or(t,/(image-set\([^]*)/,sr+"$1$`$1");case 4968:return or(or(t,/(.+:)(flex-)?(.*)/,sr+"box-pack:$3"+fi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+sr+t+t;case 4095:case 3583:case 4068:case 2532:return or(t,/(.+)-inline(.+)/,sr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Dl(t)-1-e>6)switch(Ja(t,e+1)){case 109:if(Ja(t,e+4)!==45)break;case 102:return or(t,/(.+:)(.+)-([^]+)/,"$1"+sr+"$2-$3$1"+Ew+(Ja(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~rE(t,"stretch")?WU(or(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ja(t,e+1)!==115)break;case 6444:switch(Ja(t,Dl(t)-3-(~rE(t,"!important")&&10))){case 107:return or(t,":",":"+sr)+t;case 101:return or(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+sr+(Ja(t,14)===45?"inline-":"")+"box$3$1"+sr+"$2$3$1"+fi+"$2box$3")+t}break;case 5936:switch(Ja(t,e+11)){case 114:return sr+t+fi+or(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return sr+t+fi+or(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return sr+t+fi+or(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return sr+t+fi+t+t}return t}var Whe=function(e,n,a,i){if(e.length>-1&&!e.return)switch(e.type){case AO:e.return=WU(e.value,e.length);break;case qU:return Vm([tv(e,{value:or(e.value,"@","@"+sr)})],i);case TO:if(e.length)return Ahe(e.props,function(s){switch(The(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Vm([tv(e,{props:[or(s,/:(read-\w+)/,":"+Ew+"$1")]})],i);case"::placeholder":return Vm([tv(e,{props:[or(s,/:(plac\w+)/,":"+sr+"input-$1")]}),tv(e,{props:[or(s,/:(plac\w+)/,":"+Ew+"$1")]}),tv(e,{props:[or(s,/:(plac\w+)/,fi+"input-$1")]})],i)}return""})}},Khe=[Whe],Yhe=function(e){var n=e.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(j){var w=j.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var i=e.stylisPlugins||Khe,s={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(j){for(var w=j.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)s[w[_]]=!0;l.push(j)});var c,u=[Hhe,Ghe];{var h,p=[Fhe,Bhe(function(j){h.insert(j)})],m=$he(u.concat(i,p)),x=function(w){return Vm(Rhe(w),m)};c=function(w,_,k,C){h=k,x(w?w+"{"+_.styles+"}":_.styles),C&&(b.inserted[_.name]=!0)}}var b={key:n,sheet:new whe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return b.sheet.hydrate(l),b},PC={exports:{}},hr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W4;function Qhe(){if(W4)return hr;W4=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,a=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,h=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,m=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,j=t?Symbol.for("react.block"):60121,w=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,k=t?Symbol.for("react.scope"):60119;function C(T){if(typeof T=="object"&&T!==null){var E=T.$$typeof;switch(E){case e:switch(T=T.type,T){case c:case u:case a:case s:case i:case p:return T;default:switch(T=T&&T.$$typeof,T){case l:case h:case b:case x:case o:return T;default:return E}}case n:return E}}}function A(T){return C(T)===u}return hr.AsyncMode=c,hr.ConcurrentMode=u,hr.ContextConsumer=l,hr.ContextProvider=o,hr.Element=e,hr.ForwardRef=h,hr.Fragment=a,hr.Lazy=b,hr.Memo=x,hr.Portal=n,hr.Profiler=s,hr.StrictMode=i,hr.Suspense=p,hr.isAsyncMode=function(T){return A(T)||C(T)===c},hr.isConcurrentMode=A,hr.isContextConsumer=function(T){return C(T)===l},hr.isContextProvider=function(T){return C(T)===o},hr.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===e},hr.isForwardRef=function(T){return C(T)===h},hr.isFragment=function(T){return C(T)===a},hr.isLazy=function(T){return C(T)===b},hr.isMemo=function(T){return C(T)===x},hr.isPortal=function(T){return C(T)===n},hr.isProfiler=function(T){return C(T)===s},hr.isStrictMode=function(T){return C(T)===i},hr.isSuspense=function(T){return C(T)===p},hr.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===a||T===u||T===s||T===i||T===p||T===m||typeof T=="object"&&T!==null&&(T.$$typeof===b||T.$$typeof===x||T.$$typeof===o||T.$$typeof===l||T.$$typeof===h||T.$$typeof===w||T.$$typeof===_||T.$$typeof===k||T.$$typeof===j)},hr.typeOf=C,hr}var K4;function Xhe(){return K4||(K4=1,PC.exports=Qhe()),PC.exports}var EC,Y4;function Jhe(){if(Y4)return EC;Y4=1;var t=Xhe(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=a,s[t.Memo]=i;function o(b){return t.isMemo(b)?i:s[b.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;function x(b,j,w){if(typeof j!="string"){if(m){var _=p(j);_&&_!==m&&x(b,_,w)}var k=c(j);u&&(k=k.concat(u(j)));for(var C=o(b),A=o(j),T=0;T<k.length;++T){var E=k[T];if(!n[E]&&!(w&&w[E])&&!(A&&A[E])&&!(C&&C[E])){var I=h(j,E);try{l(b,E,I)}catch{}}}}return b}return EC=x,EC}Jhe();var Zhe=!0;function efe(t,e,n){var a="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(a+=i+" ")}),a}var KU=function(e,n,a){var i=e.key+"-"+n.name;(a===!1||Zhe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},tfe=function(e,n,a){KU(e,n,a);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function nfe(t){for(var e=0,n,a=0,i=t.length;i>=4;++a,i-=4)n=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(a+2)&255)<<16;case 2:e^=(t.charCodeAt(a+1)&255)<<8;case 1:e^=t.charCodeAt(a)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var rfe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},afe=/[A-Z]|^ms/g,ife=/_EMO_([^_]+?)_([^]*?)_EMO_/g,YU=function(e){return e.charCodeAt(1)===45},Q4=function(e){return e!=null&&typeof e!="boolean"},DC=zhe(function(t){return YU(t)?t:t.replace(afe,"-$&").toLowerCase()}),X4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(ife,function(a,i,s){return Ol={name:i,styles:s,next:Ol},i})}return rfe[e]!==1&&!YU(e)&&typeof n=="number"&&n!==0?n+"px":n};function Vv(t,e,n){if(n==null)return"";var a=n;if(a.__emotion_styles!==void 0)return a;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Ol={name:i.name,styles:i.styles,next:Ol},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Ol={name:o.name,styles:o.styles,next:Ol},o=o.next;var l=s.styles+";";return l}return sfe(t,e,n)}case"function":{if(t!==void 0){var c=Ol,u=n(t);return Ol=c,Vv(t,e,u)}break}}var h=n;return h}function sfe(t,e,n){var a="";if(Array.isArray(n))for(var i=0;i<n.length;i++)a+=Vv(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var l=o;Q4(l)&&(a+=DC(s)+":"+X4(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var c=0;c<o.length;c++)Q4(o[c])&&(a+=DC(s)+":"+X4(s,o[c])+";");else{var u=Vv(t,e,o);switch(s){case"animation":case"animationName":{a+=DC(s)+":"+u+";";break}default:a+=s+"{"+u+"}"}}}return a}var J4=/label:\s*([^\s;{]+)\s*(;|$)/g,Ol;function QU(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,i="";Ol=void 0;var s=t[0];if(s==null||s.raw===void 0)a=!1,i+=Vv(n,e,s);else{var o=s;i+=o[0]}for(var l=1;l<t.length;l++)if(i+=Vv(n,e,t[l]),a){var c=s;i+=c[l]}J4.lastIndex=0;for(var u="",h;(h=J4.exec(i))!==null;)u+="-"+h[1];var p=nfe(i)+u;return{name:p,styles:i,next:Ol}}var ofe=function(e){return e()},lfe=rI.useInsertionEffect?rI.useInsertionEffect:!1,cfe=lfe||ofe,XU=v.createContext(typeof HTMLElement<"u"?Yhe({key:"css"}):null);XU.Provider;var ufe=function(e){return v.forwardRef(function(n,a){var i=v.useContext(XU);return e(n,i,a)})},dfe=v.createContext({}),EO={}.hasOwnProperty,iE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",hfe=function(e,n){var a={};for(var i in n)EO.call(n,i)&&(a[i]=n[i]);return a[iE]=e,a},ffe=function(e){var n=e.cache,a=e.serialized,i=e.isStringTag;return KU(n,a,i),cfe(function(){return tfe(n,a,i)}),null},pfe=ufe(function(t,e,n){var a=t.css;typeof a=="string"&&e.registered[a]!==void 0&&(a=e.registered[a]);var i=t[iE],s=[a],o="";typeof t.className=="string"?o=efe(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var l=QU(s,void 0,v.useContext(dfe));o+=e.key+"-"+l.name;var c={};for(var u in t)EO.call(t,u)&&u!=="css"&&u!==iE&&(c[u]=t[u]);return c.className=o,n&&(c.ref=n),v.createElement(v.Fragment,null,v.createElement(ffe,{cache:e,serialized:l,isStringTag:typeof i=="string"}),v.createElement(i,c))}),mfe=pfe,Wt=function(e,n){var a=arguments;if(n==null||!EO.call(n,"css"))return v.createElement.apply(void 0,a);var i=a.length,s=new Array(i);s[0]=mfe,s[1]=hfe(e,n);for(var o=2;o<i;o++)s[o]=a[o];return v.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(Wt||(Wt={}));function DO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return QU(e)}function gfe(){var t=DO.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function yfe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const xfe=Math.min,vfe=Math.max,Dw=Math.round,E1=Math.floor,Ow=t=>({x:t,y:t});function bfe(t){const{x:e,y:n,width:a,height:i}=t;return{width:a,height:i,top:n,left:e,right:e+a,bottom:n+i,x:e,y:n}}function oS(){return typeof window<"u"}function JU(t){return e9(t)?(t.nodeName||"").toLowerCase():"#document"}function qc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ZU(t){var e;return(e=(e9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function e9(t){return oS()?t instanceof Node||t instanceof qc(t).Node:!1}function jfe(t){return oS()?t instanceof Element||t instanceof qc(t).Element:!1}function OO(t){return oS()?t instanceof HTMLElement||t instanceof qc(t).HTMLElement:!1}function Z4(t){return!oS()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof qc(t).ShadowRoot}const wfe=new Set(["inline","contents"]);function t9(t){const{overflow:e,overflowX:n,overflowY:a,display:i}=MO(t);return/auto|scroll|overlay|hidden|clip/.test(e+a+n)&&!wfe.has(i)}function Nfe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Sfe=new Set(["html","body","#document"]);function _fe(t){return Sfe.has(JU(t))}function MO(t){return qc(t).getComputedStyle(t)}function Cfe(t){if(JU(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Z4(t)&&t.host||ZU(t);return Z4(e)?e.host:e}function n9(t){const e=Cfe(t);return _fe(e)?t.ownerDocument?t.ownerDocument.body:t.body:OO(e)&&t9(e)?e:n9(e)}function Mw(t,e,n){var a;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=n9(t),s=i===((a=t.ownerDocument)==null?void 0:a.body),o=qc(i);if(s){const l=sE(o);return e.concat(o,o.visualViewport||[],t9(i)?i:[],l&&n?Mw(l):[])}return e.concat(i,Mw(i,[],n))}function sE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function kfe(t){const e=MO(t);let n=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const i=OO(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:a,l=Dw(n)!==s||Dw(a)!==o;return l&&(n=s,a=o),{width:n,height:a,$:l}}function IO(t){return jfe(t)?t:t.contextElement}function e3(t){const e=IO(t);if(!OO(e))return Ow(1);const n=e.getBoundingClientRect(),{width:a,height:i,$:s}=kfe(e);let o=(s?Dw(n.width):n.width)/a,l=(s?Dw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Tfe=Ow(0);function Afe(t){const e=qc(t);return!Nfe()||!e.visualViewport?Tfe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Pfe(t,e,n){return!1}function t3(t,e,n,a){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),s=IO(t);let o=Ow(1);e&&(o=e3(t));const l=Pfe()?Afe(s):Ow(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,h=i.width/o.x,p=i.height/o.y;if(s){const m=qc(s),x=a;let b=m,j=sE(b);for(;j&&a&&x!==b;){const w=e3(j),_=j.getBoundingClientRect(),k=MO(j),C=_.left+(j.clientLeft+parseFloat(k.paddingLeft))*w.x,A=_.top+(j.clientTop+parseFloat(k.paddingTop))*w.y;c*=w.x,u*=w.y,h*=w.x,p*=w.y,c+=C,u+=A,b=qc(j),j=sE(b)}}return bfe({width:h,height:p,x:c,y:u})}function r9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Efe(t,e){let n=null,a;const i=ZU(t);function s(){var l;clearTimeout(a),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=t.getBoundingClientRect(),{left:h,top:p,width:m,height:x}=u;if(l||e(),!m||!x)return;const b=E1(p),j=E1(i.clientWidth-(h+m)),w=E1(i.clientHeight-(p+x)),_=E1(h),C={rootMargin:-b+"px "+-j+"px "+-w+"px "+-_+"px",threshold:vfe(0,xfe(1,c))||1};let A=!0;function T(E){const I=E[0].intersectionRatio;if(I!==c){if(!A)return o();I?o(!1,I):a=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!r9(u,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(T,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(T,C)}n.observe(t)}return o(!0),s}function Dfe(t,e,n,a){a===void 0&&(a={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,u=IO(t),h=i||s?[...u?Mw(u):[],...Mw(e)]:[];h.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=u&&l?Efe(u,n):null;let m=-1,x=null;o&&(x=new ResizeObserver(_=>{let[k]=_;k&&k.target===u&&x&&(x.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),n()}),u&&!c&&x.observe(u),x.observe(e));let b,j=c?t3(t):null;c&&w();function w(){const _=t3(t);j&&!r9(j,_)&&n(),j=_,b=requestAnimationFrame(w)}return n(),()=>{var _;h.forEach(k=>{i&&k.removeEventListener("scroll",n),s&&k.removeEventListener("resize",n)}),p==null||p(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(b)}}var oE=v.useLayoutEffect,Ofe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Iw=function(){};function Mfe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function Ife(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var s=[].concat(a);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(Mfe(t,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var n3=function(e){return Vfe(e)?e.filter(Boolean):Ef(e)==="object"&&e!==null?[e]:[]},a9=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Yc(e,Ofe);return Zt({},n)},oa=function(e,n,a){var i=e.cx,s=e.getStyles,o=e.getClassNames,l=e.className;return{css:s(n,e),className:i(a??{},o(n,e),l)}};function lS(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function Rfe(t){return lS(t)?window.innerHeight:t.clientHeight}function i9(t){return lS(t)?window.pageYOffset:t.scrollTop}function Rw(t,e){if(lS(t)){window.scrollTo(0,e);return}t.scrollTop=e}function Lfe(t){var e=getComputedStyle(t),n=e.position==="absolute",a=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&a.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function Ffe(t,e,n,a){return n*((t=t/a-1)*t*t+1)+e}function D1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Iw,i=i9(t),s=e-i,o=10,l=0;function c(){l+=o;var u=Ffe(l,i,s,n);Rw(t,u),l<n?window.requestAnimationFrame(c):a(t)}c()}function r3(t,e){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=e.offsetHeight/3;a.bottom+i>n.bottom?Rw(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):a.top-i<n.top&&Rw(t,Math.max(e.offsetTop-i,0))}function $fe(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function a3(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Bfe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var s9=!1,zfe={get passive(){return s9=!0}},O1=typeof window<"u"?window:{};O1.addEventListener&&O1.removeEventListener&&(O1.addEventListener("p",Iw,zfe),O1.removeEventListener("p",Iw,!1));var qfe=s9;function Ufe(t){return t!=null}function Vfe(t){return Array.isArray(t)}function M1(t,e,n){return t?e:n}var Hfe=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var l=Mc(o,1),c=l[0];return!a.includes(c)});return s.reduce(function(o,l){var c=Mc(l,2),u=c[0],h=c[1];return o[u]=h,o},{})},Gfe=["children","innerProps"],Wfe=["children","innerProps"];function Kfe(t){var e=t.maxHeight,n=t.menuEl,a=t.minHeight,i=t.placement,s=t.shouldScroll,o=t.isFixedPosition,l=t.controlHeight,c=Lfe(n),u={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return u;var h=c.getBoundingClientRect(),p=h.height,m=n.getBoundingClientRect(),x=m.bottom,b=m.height,j=m.top,w=n.offsetParent.getBoundingClientRect(),_=w.top,k=o?window.innerHeight:Rfe(c),C=i9(c),A=parseInt(getComputedStyle(n).marginBottom,10),T=parseInt(getComputedStyle(n).marginTop,10),E=_-T,I=k-j,$=E+C,U=p-C-j,B=x-k+C+A,R=C+j-T,z=160;switch(i){case"auto":case"bottom":if(I>=b)return{placement:"bottom",maxHeight:e};if(U>=b&&!o)return s&&D1(c,B,z),{placement:"bottom",maxHeight:e};if(!o&&U>=a||o&&I>=a){s&&D1(c,B,z);var G=o?I-A:U-A;return{placement:"bottom",maxHeight:G}}if(i==="auto"||o){var K=e,Y=o?E:$;return Y>=a&&(K=Math.min(Y-A-l,e)),{placement:"top",maxHeight:K}}if(i==="bottom")return s&&Rw(c,B),{placement:"bottom",maxHeight:e};break;case"top":if(E>=b)return{placement:"top",maxHeight:e};if($>=b&&!o)return s&&D1(c,R,z),{placement:"top",maxHeight:e};if(!o&&$>=a||o&&E>=a){var q=e;return(!o&&$>=a||o&&E>=a)&&(q=o?E-T:$-T),s&&D1(c,R,z),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}function Yfe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var o9=function(e){return e==="auto"?"bottom":e},Qfe=function(e,n){var a,i=e.placement,s=e.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return Zt((a={label:"menu"},yv(a,Yfe(i),"100%"),yv(a,"position","absolute"),yv(a,"width","100%"),yv(a,"zIndex",1),a),n?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},l9=v.createContext(null),Xfe=function(e){var n=e.children,a=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,l=e.menuShouldScrollIntoView,c=e.theme,u=v.useContext(l9)||{},h=u.setPortalPlacement,p=v.useRef(null),m=v.useState(i),x=Mc(m,2),b=x[0],j=x[1],w=v.useState(null),_=Mc(w,2),k=_[0],C=_[1],A=c.spacing.controlHeight;return oE(function(){var T=p.current;if(T){var E=o==="fixed",I=l&&!E,$=Kfe({maxHeight:i,menuEl:T,minHeight:a,placement:s,shouldScroll:I,isFixedPosition:E,controlHeight:A});j($.maxHeight),C($.placement),h==null||h($.placement)}},[i,s,o,l,a,h,A]),n({ref:p,placerProps:Zt(Zt({},e),{},{placement:k||o9(s),maxHeight:b})})},Jfe=function(e){var n=e.children,a=e.innerRef,i=e.innerProps;return Wt("div",sn({},oa(e,"menu",{menu:!0}),{ref:a},i),n)},Zfe=Jfe,epe=function(e,n){var a=e.maxHeight,i=e.theme.spacing.baseUnit;return Zt({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},tpe=function(e){var n=e.children,a=e.innerProps,i=e.innerRef,s=e.isMulti;return Wt("div",sn({},oa(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},a),n)},c9=function(e,n){var a=e.theme,i=a.spacing.baseUnit,s=a.colors;return Zt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},npe=c9,rpe=c9,ape=function(e){var n=e.children,a=n===void 0?"No options":n,i=e.innerProps,s=Yc(e,Gfe);return Wt("div",sn({},oa(Zt(Zt({},s),{},{children:a,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),a)},ipe=function(e){var n=e.children,a=n===void 0?"Loading...":n,i=e.innerProps,s=Yc(e,Wfe);return Wt("div",sn({},oa(Zt(Zt({},s),{},{children:a,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),a)},spe=function(e){var n=e.rect,a=e.offset,i=e.position;return{left:n.left,position:i,top:a,width:n.width,zIndex:1}},ope=function(e){var n=e.appendTo,a=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,l=e.menuPosition,c=v.useRef(null),u=v.useRef(null),h=v.useState(o9(o)),p=Mc(h,2),m=p[0],x=p[1],b=v.useMemo(function(){return{setPortalPlacement:x}},[]),j=v.useState(null),w=Mc(j,2),_=w[0],k=w[1],C=v.useCallback(function(){if(i){var I=$fe(i),$=l==="fixed"?0:window.pageYOffset,U=I[m]+$;(U!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&k({offset:U,rect:I})}},[i,l,m,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);oE(function(){C()},[C]);var A=v.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),i&&c.current&&(u.current=Dfe(i,c.current,C,{elementResize:"ResizeObserver"in window}))},[i,C]);oE(function(){A()},[A]);var T=v.useCallback(function(I){c.current=I,A()},[A]);if(!n&&l!=="fixed"||!_)return null;var E=Wt("div",sn({ref:T},oa(Zt(Zt({},e),{},{offset:_.offset,position:l,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),a);return Wt(l9.Provider,{value:b},n?XD.createPortal(E,n):E)},lpe=function(e){var n=e.isDisabled,a=e.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},cpe=function(e){var n=e.children,a=e.innerProps,i=e.isDisabled,s=e.isRtl;return Wt("div",sn({},oa(e,"container",{"--is-disabled":i,"--is-rtl":s}),a),n)},upe=function(e,n){var a=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Zt({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},dpe=function(e){var n=e.children,a=e.innerProps,i=e.isMulti,s=e.hasValue;return Wt("div",sn({},oa(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),a),n)},hpe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},fpe=function(e){var n=e.children,a=e.innerProps;return Wt("div",sn({},oa(e,"indicatorsContainer",{indicators:!0}),a),n)},i3,ppe=["size"],mpe=["innerProps","isRtl","size"],gpe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},u9=function(e){var n=e.size,a=Yc(e,ppe);return Wt("svg",sn({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:gpe},a))},RO=function(e){return Wt(u9,sn({size:20},e),Wt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},d9=function(e){return Wt(u9,sn({size:20},e),Wt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},h9=function(e,n){var a=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Zt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:a?o.neutral60:o.neutral20,padding:s*2,":hover":{color:a?o.neutral80:o.neutral40}})},ype=h9,xpe=function(e){var n=e.children,a=e.innerProps;return Wt("div",sn({},oa(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),n||Wt(d9,null))},vpe=h9,bpe=function(e){var n=e.children,a=e.innerProps;return Wt("div",sn({},oa(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),n||Wt(RO,null))},jpe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Zt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:a?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},wpe=function(e){var n=e.innerProps;return Wt("span",sn({},n,oa(e,"indicatorSeparator",{"indicator-separator":!0})))},Npe=gfe(i3||(i3=yfe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Spe=function(e,n){var a=e.isFocused,i=e.size,s=e.theme,o=s.colors,l=s.spacing.baseUnit;return Zt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:a?o.neutral60:o.neutral20,padding:l*2})},OC=function(e){var n=e.delay,a=e.offset;return Wt("span",{css:DO({animation:"".concat(Npe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},_pe=function(e){var n=e.innerProps,a=e.isRtl,i=e.size,s=i===void 0?4:i,o=Yc(e,mpe);return Wt("div",sn({},oa(Zt(Zt({},o),{},{innerProps:n,isRtl:a,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Wt(OC,{delay:0,offset:a}),Wt(OC,{delay:160,offset:!0}),Wt(OC,{delay:320,offset:!a}))},Cpe=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return Zt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:a?o.neutral5:o.neutral0,borderColor:a?o.neutral10:i?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},kpe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,l=e.menuIsOpen;return Wt("div",sn({ref:s},oa(e,"control",{control:!0,"control--is-disabled":a,"control--is-focused":i,"control--menu-is-open":l}),o,{"aria-disabled":a||void 0}),n)},Tpe=kpe,Ape=["data"],Ppe=function(e,n){var a=e.theme.spacing;return n?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},Epe=function(e){var n=e.children,a=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,l=e.headingProps,c=e.innerProps,u=e.label,h=e.theme,p=e.selectProps;return Wt("div",sn({},oa(e,"group",{group:!0}),c),Wt(o,sn({},l,{selectProps:p,theme:h,getStyles:i,getClassNames:s,cx:a}),u),Wt("div",null,n))},Dpe=function(e,n){var a=e.theme,i=a.colors,s=a.spacing;return Zt({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},Ope=function(e){var n=a9(e);n.data;var a=Yc(n,Ape);return Wt("div",sn({},oa(e,"groupHeading",{"group-heading":!0}),a))},Mpe=Epe,Ipe=["innerRef","isDisabled","isHidden","inputClassName"],Rpe=function(e,n){var a=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,l=s.colors;return Zt(Zt({visibility:a?"hidden":"visible",transform:i?"translateZ(0)":""},Lpe),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},f9={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Lpe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Zt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},f9)},Fpe=function(e){return Zt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},f9)},$pe=function(e){var n=e.cx,a=e.value,i=a9(e),s=i.innerRef,o=i.isDisabled,l=i.isHidden,c=i.inputClassName,u=Yc(i,Ipe);return Wt("div",sn({},oa(e,"input",{"input-container":!0}),{"data-value":a||""}),Wt("input",sn({className:n({input:!0},c),ref:s,style:Fpe(l),disabled:o},u)))},Bpe=$pe,zpe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors;return Zt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},qpe=function(e,n){var a=e.theme,i=a.borderRadius,s=a.colors,o=e.cropWithEllipsis;return Zt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Upe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors,l=e.isFocused;return Zt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},p9=function(e){var n=e.children,a=e.innerProps;return Wt("div",a,n)},Vpe=p9,Hpe=p9;function Gpe(t){var e=t.children,n=t.innerProps;return Wt("div",sn({role:"button"},n),e||Wt(RO,{size:14}))}var Wpe=function(e){var n=e.children,a=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,l=e.removeProps,c=e.selectProps,u=a.Container,h=a.Label,p=a.Remove;return Wt(u,{data:i,innerProps:Zt(Zt({},oa(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},Wt(h,{data:i,innerProps:Zt({},oa(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),Wt(p,{data:i,innerProps:Zt(Zt({},oa(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},Kpe=Wpe,Ype=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,l=o.spacing,c=o.colors;return Zt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?c.primary:i?c.primary25:"transparent",color:a?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:s?c.primary:c.primary50}})},Qpe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,l=e.innerProps;return Wt("div",sn({},oa(e,"option",{option:!0,"option--is-disabled":a,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":a},l),n)},Xpe=Qpe,Jpe=function(e,n){var a=e.theme,i=a.spacing,s=a.colors;return Zt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Zpe=function(e){var n=e.children,a=e.innerProps;return Wt("div",sn({},oa(e,"placeholder",{placeholder:!0}),a),n)},eme=Zpe,tme=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return Zt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:a?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},nme=function(e){var n=e.children,a=e.isDisabled,i=e.innerProps;return Wt("div",sn({},oa(e,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),i),n)},rme=nme,ame={ClearIndicator:bpe,Control:Tpe,DropdownIndicator:xpe,DownChevron:d9,CrossIcon:RO,Group:Mpe,GroupHeading:Ope,IndicatorsContainer:fpe,IndicatorSeparator:wpe,Input:Bpe,LoadingIndicator:_pe,Menu:Zfe,MenuList:tpe,MenuPortal:ope,LoadingMessage:ipe,NoOptionsMessage:ape,MultiValue:Kpe,MultiValueContainer:Vpe,MultiValueLabel:Hpe,MultiValueRemove:Gpe,Option:Xpe,Placeholder:eme,SelectContainer:cpe,SingleValue:rme,ValueContainer:dpe},ime=function(e){return Zt(Zt({},ame),e.components)},s3=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function sme(t,e){return!!(t===e||s3(t)&&s3(e))}function ome(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!sme(t[n],e[n]))return!1;return!0}function lme(t,e){e===void 0&&(e=ome);var n=null;function a(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return a.clear=function(){n=null},a}var cme={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ume=function(e){return Wt("span",sn({css:cme},e))},o3=ume,dme={guidance:function(e){var n=e.isSearchable,a=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,a=e.label,i=a===void 0?"":a,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,a=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,l=e.selectValue,c=e.isDisabled,u=e.isSelected,h=e.isAppleDevice,p=function(j,w){return j&&j.length?"".concat(j.indexOf(w)+1," of ").concat(j.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(p(l,a),".");if(n==="menu"&&h){var m=c?" disabled":"",x="".concat(u?" selected":"").concat(m);return"".concat(o).concat(x,", ").concat(p(i,a),".")}return""},onFilter:function(e){var n=e.inputValue,a=e.resultsMessage;return"".concat(a).concat(n?" for search term "+n:"",".")}},hme=function(e){var n=e.ariaSelection,a=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,l=e.selectValue,c=e.selectProps,u=e.id,h=e.isAppleDevice,p=c.ariaLiveMessages,m=c.getOptionLabel,x=c.inputValue,b=c.isMulti,j=c.isOptionDisabled,w=c.isSearchable,_=c.menuIsOpen,k=c.options,C=c.screenReaderStatus,A=c.tabSelectsValue,T=c.isLoading,E=c["aria-label"],I=c["aria-live"],$=v.useMemo(function(){return Zt(Zt({},dme),p||{})},[p]),U=v.useMemo(function(){var Y="";if(n&&$.onChange){var q=n.option,V=n.options,H=n.removedValue,Q=n.removedValues,L=n.value,te=function(le){return Array.isArray(le)?null:le},me=H||q||te(L),X=me?m(me):"",Re=V||Q||void 0,Se=Re?Re.map(m):[],Ee=Zt({isDisabled:me&&j(me,l),label:X,labels:Se},n);Y=$.onChange(Ee)}return Y},[n,$,j,l,m]),B=v.useMemo(function(){var Y="",q=a||i,V=!!(a&&l&&l.includes(a));if(q&&$.onFocus){var H={focused:q,label:m(q),isDisabled:j(q,l),isSelected:V,options:s,context:q===a?"menu":"value",selectValue:l,isAppleDevice:h};Y=$.onFocus(H)}return Y},[a,i,m,j,$,s,l,h]),R=v.useMemo(function(){var Y="";if(_&&k.length&&!T&&$.onFilter){var q=C({count:s.length});Y=$.onFilter({inputValue:x,resultsMessage:q})}return Y},[s,x,_,$,k,C,T]),z=(n==null?void 0:n.action)==="initial-input-focus",G=v.useMemo(function(){var Y="";if($.guidance){var q=i?"value":_?"menu":"input";Y=$.guidance({"aria-label":E,context:q,isDisabled:a&&j(a,l),isMulti:b,isSearchable:w,tabSelectsValue:A,isInitialFocus:z})}return Y},[E,a,i,b,j,w,_,$,l,A,z]),K=Wt(v.Fragment,null,Wt("span",{id:"aria-selection"},U),Wt("span",{id:"aria-focused"},B),Wt("span",{id:"aria-results"},R),Wt("span",{id:"aria-guidance"},G));return Wt(v.Fragment,null,Wt(o3,{id:u},z&&K),Wt(o3,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!z&&K))},fme=hme,lE=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],pme=new RegExp("["+lE.map(function(t){return t.letters}).join("")+"]","g"),m9={};for(var MC=0;MC<lE.length;MC++)for(var IC=lE[MC],RC=0;RC<IC.letters.length;RC++)m9[IC.letters[RC]]=IC.base;var g9=function(e){return e.replace(pme,function(n){return m9[n]})},mme=lme(g9),l3=function(e){return e.replace(/^\s+|\s+$/g,"")},gme=function(e){return"".concat(e.label," ").concat(e.value)},yme=function(e){return function(n,a){if(n.data.__isNew__)return!0;var i=Zt({ignoreCase:!0,ignoreAccents:!0,stringify:gme,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,l=i.stringify,c=i.trim,u=i.matchFrom,h=c?l3(a):a,p=c?l3(l(n)):l(n);return s&&(h=h.toLowerCase(),p=p.toLowerCase()),o&&(h=mme(h),p=g9(p)),u==="start"?p.substr(0,h.length)===h:p.indexOf(h)>-1}},xme=["innerRef"];function vme(t){var e=t.innerRef,n=Yc(t,xme),a=Hfe(n,"onExited","in","enter","exit","appear");return Wt("input",sn({ref:e},a,{css:DO({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var bme=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function jme(t){var e=t.isEnabled,n=t.onBottomArrive,a=t.onBottomLeave,i=t.onTopArrive,s=t.onTopLeave,o=v.useRef(!1),l=v.useRef(!1),c=v.useRef(0),u=v.useRef(null),h=v.useCallback(function(w,_){if(u.current!==null){var k=u.current,C=k.scrollTop,A=k.scrollHeight,T=k.clientHeight,E=u.current,I=_>0,$=A-T-C,U=!1;$>_&&o.current&&(a&&a(w),o.current=!1),I&&l.current&&(s&&s(w),l.current=!1),I&&_>$?(n&&!o.current&&n(w),E.scrollTop=A,U=!0,o.current=!0):!I&&-_>C&&(i&&!l.current&&i(w),E.scrollTop=0,U=!0,l.current=!0),U&&bme(w)}},[n,a,i,s]),p=v.useCallback(function(w){h(w,w.deltaY)},[h]),m=v.useCallback(function(w){c.current=w.changedTouches[0].clientY},[]),x=v.useCallback(function(w){var _=c.current-w.changedTouches[0].clientY;h(w,_)},[h]),b=v.useCallback(function(w){if(w){var _=qfe?{passive:!1}:!1;w.addEventListener("wheel",p,_),w.addEventListener("touchstart",m,_),w.addEventListener("touchmove",x,_)}},[x,m,p]),j=v.useCallback(function(w){w&&(w.removeEventListener("wheel",p,!1),w.removeEventListener("touchstart",m,!1),w.removeEventListener("touchmove",x,!1))},[x,m,p]);return v.useEffect(function(){if(e){var w=u.current;return b(w),function(){j(w)}}},[e,b,j]),function(w){u.current=w}}var c3=["boxSizing","height","overflow","paddingRight","position"],u3={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function d3(t){t.cancelable&&t.preventDefault()}function h3(t){t.stopPropagation()}function f3(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function p3(){return"ontouchstart"in window||navigator.maxTouchPoints}var m3=!!(typeof window<"u"&&window.document&&window.document.createElement),nv=0,_m={capture:!1,passive:!1};function wme(t){var e=t.isEnabled,n=t.accountForScrollbars,a=n===void 0?!0:n,i=v.useRef({}),s=v.useRef(null),o=v.useCallback(function(c){if(m3){var u=document.body,h=u&&u.style;if(a&&c3.forEach(function(b){var j=h&&h[b];i.current[b]=j}),a&&nv<1){var p=parseInt(i.current.paddingRight,10)||0,m=document.body?document.body.clientWidth:0,x=window.innerWidth-m+p||0;Object.keys(u3).forEach(function(b){var j=u3[b];h&&(h[b]=j)}),h&&(h.paddingRight="".concat(x,"px"))}u&&p3()&&(u.addEventListener("touchmove",d3,_m),c&&(c.addEventListener("touchstart",f3,_m),c.addEventListener("touchmove",h3,_m))),nv+=1}},[a]),l=v.useCallback(function(c){if(m3){var u=document.body,h=u&&u.style;nv=Math.max(nv-1,0),a&&nv<1&&c3.forEach(function(p){var m=i.current[p];h&&(h[p]=m)}),u&&p3()&&(u.removeEventListener("touchmove",d3,_m),c&&(c.removeEventListener("touchstart",f3,_m),c.removeEventListener("touchmove",h3,_m)))}},[a]);return v.useEffect(function(){if(e){var c=s.current;return o(c),function(){l(c)}}},[e,o,l]),function(c){s.current=c}}var Nme=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},Sme={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function _me(t){var e=t.children,n=t.lockEnabled,a=t.captureEnabled,i=a===void 0?!0:a,s=t.onBottomArrive,o=t.onBottomLeave,l=t.onTopArrive,c=t.onTopLeave,u=jme({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),h=wme({isEnabled:n}),p=function(x){u(x),h(x)};return Wt(v.Fragment,null,n&&Wt("div",{onClick:Nme,css:Sme}),e(p))}var Cme={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},kme=function(e){var n=e.name,a=e.onFocus;return Wt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:Cme,value:"",onChange:function(){}})},Tme=kme;function LO(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Ame(){return LO(/^iPhone/i)}function y9(){return LO(/^Mac/i)}function Pme(){return LO(/^iPad/i)||y9()&&navigator.maxTouchPoints>1}function Eme(){return Ame()||Pme()}function Dme(){return y9()||Eme()}var Ome=function(e){return e.label},Mme=function(e){return e.label},Ime=function(e){return e.value},Rme=function(e){return!!e.isDisabled},Lme={clearIndicator:vpe,container:lpe,control:Cpe,dropdownIndicator:ype,group:Ppe,groupHeading:Dpe,indicatorsContainer:hpe,indicatorSeparator:jpe,input:Rpe,loadingIndicator:Spe,loadingMessage:rpe,menu:Qfe,menuList:epe,menuPortal:spe,multiValue:zpe,multiValueLabel:qpe,multiValueRemove:Upe,noOptionsMessage:npe,option:Ype,placeholder:Jpe,singleValue:tme,valueContainer:upe},Fme={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},$me=4,x9=4,Bme=38,zme=x9*2,qme={baseUnit:x9,controlHeight:Bme,menuGutter:zme},LC={borderRadius:$me,colors:Fme,spacing:qme},Ume={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:a3(),captureMenuScroll:!a3(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:yme(),formatGroupLabel:Ome,getOptionLabel:Mme,getOptionValue:Ime,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Rme,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Bfe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function g3(t,e,n,a){var i=j9(t,e,n),s=w9(t,e,n),o=b9(t,e),l=Lw(t,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:l,index:a}}function hw(t,e){return t.options.map(function(n,a){if("options"in n){var i=n.options.map(function(o,l){return g3(t,o,e,l)}).filter(function(o){return x3(t,o)});return i.length>0?{type:"group",data:n,options:i,index:a}:void 0}var s=g3(t,n,e,a);return x3(t,s)?s:void 0}).filter(Ufe)}function v9(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,kO(n.options.map(function(a){return a.data}))):e.push(n.data),e},[])}function y3(t,e){return t.reduce(function(n,a){return a.type==="group"?n.push.apply(n,kO(a.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(a.index,"-").concat(i.index)}}))):n.push({data:a.data,id:"".concat(e,"-").concat(a.index)}),n},[])}function Vme(t,e){return v9(hw(t,e))}function x3(t,e){var n=t.inputValue,a=n===void 0?"":n,i=e.data,s=e.isSelected,o=e.label,l=e.value;return(!S9(t)||!s)&&N9(t,{label:o,value:l,data:i},a)}function Hme(t,e){var n=t.focusedValue,a=t.selectValue,i=a.indexOf(n);if(i>-1){var s=e.indexOf(n);if(s>-1)return n;if(i<e.length)return e[i]}return null}function Gme(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var FC=function(e,n){var a,i=(a=e.find(function(s){return s.data===n}))===null||a===void 0?void 0:a.id;return i||null},b9=function(e,n){return e.getOptionLabel(n)},Lw=function(e,n){return e.getOptionValue(n)};function j9(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function w9(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var a=Lw(t,e);return n.some(function(i){return Lw(t,i)===a})}function N9(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var S9=function(e){var n=e.hideSelectedOptions,a=e.isMulti;return n===void 0?a:n},Wme=1,_9=function(t){fhe(n,t);var e=ghe(n);function n(a){var i;if(dhe(this,n),i=e.call(this,a),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(c){i.controlRef=c},i.focusedOptionRef=null,i.getFocusedOptionRef=function(c){i.focusedOptionRef=c},i.menuListRef=null,i.getMenuListRef=function(c){i.menuListRef=c},i.inputRef=null,i.getInputRef=function(c){i.inputRef=c},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(c,u){var h=i.props,p=h.onChange,m=h.name;u.name=m,i.ariaOnChange(c,u),p(c,u)},i.setValue=function(c,u,h){var p=i.props,m=p.closeMenuOnSelect,x=p.isMulti,b=p.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:b}),m&&(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(c,{action:u,option:h})},i.selectOption=function(c){var u=i.props,h=u.blurInputOnSelect,p=u.isMulti,m=u.name,x=i.state.selectValue,b=p&&i.isOptionSelected(c,x),j=i.isOptionDisabled(c,x);if(b){var w=i.getOptionValue(c);i.setValue(x.filter(function(_){return i.getOptionValue(_)!==w}),"deselect-option",c)}else if(!j)p?i.setValue([].concat(kO(x),[c]),"select-option",c):i.setValue(c,"select-option");else{i.ariaOnChange(c,{action:"select-option",option:c,name:m});return}h&&i.blurInput()},i.removeValue=function(c){var u=i.props.isMulti,h=i.state.selectValue,p=i.getOptionValue(c),m=h.filter(function(b){return i.getOptionValue(b)!==p}),x=M1(u,m,m[0]||null);i.onChange(x,{action:"remove-value",removedValue:c}),i.focusInput()},i.clearValue=function(){var c=i.state.selectValue;i.onChange(M1(i.props.isMulti,[],null),{action:"clear",removedValues:c})},i.popValue=function(){var c=i.props.isMulti,u=i.state.selectValue,h=u[u.length-1],p=u.slice(0,u.length-1),m=M1(c,p,p[0]||null);h&&i.onChange(m,{action:"pop-value",removedValue:h})},i.getFocusedOptionId=function(c){return FC(i.state.focusableOptionsWithIds,c)},i.getFocusableOptionsWithIds=function(){return y3(hw(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return Ife.apply(void 0,[i.props.classNamePrefix].concat(u))},i.getOptionLabel=function(c){return b9(i.props,c)},i.getOptionValue=function(c){return Lw(i.props,c)},i.getStyles=function(c,u){var h=i.props.unstyled,p=Lme[c](u,h);p.boxSizing="border-box";var m=i.props.styles[c];return m?m(p,u):p},i.getClassNames=function(c,u){var h,p;return(h=(p=i.props.classNames)[c])===null||h===void 0?void 0:h.call(p,u)},i.getElementId=function(c){return"".concat(i.state.instancePrefix,"-").concat(c)},i.getComponents=function(){return ime(i.props)},i.buildCategorizedOptions=function(){return hw(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return v9(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(c,u){i.setState({ariaSelection:Zt({value:c},u)})},i.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(c){i.blockOptionHover=!1},i.onControlMouseDown=function(c){if(!c.defaultPrevented){var u=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&i.onMenuClose():u&&i.openMenu("first"):(u&&(i.openAfterFocus=!0),i.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},i.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!i.props.isDisabled){var u=i.props,h=u.isMulti,p=u.menuIsOpen;i.focusInput(),p?(i.setState({inputIsHiddenAfterUpdate:!h}),i.onMenuClose()):i.openMenu("first"),c.preventDefault()}},i.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(i.clearValue(),c.preventDefault(),i.openAfterFocus=!1,c.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(c){typeof i.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&lS(c.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(c)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(c){var u=c.touches,h=u&&u.item(0);h&&(i.initialTouchX=h.clientX,i.initialTouchY=h.clientY,i.userIsDragging=!1)},i.onTouchMove=function(c){var u=c.touches,h=u&&u.item(0);if(h){var p=Math.abs(h.clientX-i.initialTouchX),m=Math.abs(h.clientY-i.initialTouchY),x=5;i.userIsDragging=p>x||m>x}},i.onTouchEnd=function(c){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(c.target)&&i.menuListRef&&!i.menuListRef.contains(c.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(c){i.userIsDragging||i.onControlMouseDown(c)},i.onClearIndicatorTouchEnd=function(c){i.userIsDragging||i.onClearIndicatorMouseDown(c)},i.onDropdownIndicatorTouchEnd=function(c){i.userIsDragging||i.onDropdownIndicatorMouseDown(c)},i.handleInputChange=function(c){var u=i.props.inputValue,h=c.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(h,{action:"input-change",prevInputValue:u}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(c){i.props.onFocus&&i.props.onFocus(c),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(c){var u=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(c),i.onInputChange("",{action:"input-blur",prevInputValue:u}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(c){if(!(i.blockOptionHover||i.state.focusedOption===c)){var u=i.getFocusableOptions(),h=u.indexOf(c);i.setState({focusedOption:c,focusedOptionId:h>-1?i.getFocusedOptionId(c):null})}},i.shouldHideSelectedOptions=function(){return S9(i.props)},i.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),i.focus()},i.onKeyDown=function(c){var u=i.props,h=u.isMulti,p=u.backspaceRemovesValue,m=u.escapeClearsValue,x=u.inputValue,b=u.isClearable,j=u.isDisabled,w=u.menuIsOpen,_=u.onKeyDown,k=u.tabSelectsValue,C=u.openMenuOnFocus,A=i.state,T=A.focusedOption,E=A.focusedValue,I=A.selectValue;if(!j&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(i.blockOptionHover=!0,c.key){case"ArrowLeft":if(!h||x)return;i.focusValue("previous");break;case"ArrowRight":if(!h||x)return;i.focusValue("next");break;case"Delete":case"Backspace":if(x)return;if(E)i.removeValue(E);else{if(!p)return;h?i.popValue():b&&i.clearValue()}break;case"Tab":if(i.isComposing||c.shiftKey||!w||!k||!T||C&&i.isOptionSelected(T,I))return;i.selectOption(T);break;case"Enter":if(c.keyCode===229)break;if(w){if(!T||i.isComposing)return;i.selectOption(T);break}return;case"Escape":w?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:x}),i.onMenuClose()):b&&m&&i.clearValue();break;case" ":if(x)return;if(!w){i.openMenu("first");break}if(!T)return;i.selectOption(T);break;case"ArrowUp":w?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":w?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!w)return;i.focusOption("pageup");break;case"PageDown":if(!w)return;i.focusOption("pagedown");break;case"Home":if(!w)return;i.focusOption("first");break;case"End":if(!w)return;i.focusOption("last");break;default:return}c.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Wme),i.state.selectValue=n3(a.value),a.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),l=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[l],i.state.focusedOptionId=FC(s,o[l])}return i}return hhe(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&r3(this.menuListRef,this.focusedOptionRef),Dme()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&i.isDisabled||c&&l&&!i.menuIsOpen)&&this.focusInput(),c&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(r3(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,u=this.buildFocusableOptions(),h=i==="first"?0:u.length-1;if(!this.props.isMulti){var p=u.indexOf(l[0]);p>-1&&(h=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[h],focusedOptionId:this.getFocusedOptionId(u[h])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var u=o.length-1,h=-1;if(o.length){switch(i){case"previous":c===0?h=0:c===-1?h=u:h=c-1;break;case"next":c>-1&&c<u&&(h=c+1);break}this.setState({inputIsHidden:h!==-1,focusedValue:o[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,u=l.indexOf(o);o||(u=-1),i==="up"?c=u>0?u-1:l.length-1:i==="down"?c=(u+1)%l.length:i==="pageup"?(c=u-s,c<0&&(c=0)):i==="pagedown"?(c=u+s,c>l.length-1&&(c=l.length-1)):i==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(LC):Zt(Zt({},LC),this.props.theme):LC}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,u=this.selectOption,h=this.setValue,p=this.props,m=p.isMulti,x=p.isRtl,b=p.options,j=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:j,isMulti:m,isRtl:x,options:b,selectOption:u,selectProps:p,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return j9(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return w9(this.props,i,s)}},{key:"filterOption",value:function(i,s){return N9(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,l=i.inputId,c=i.inputValue,u=i.tabIndex,h=i.form,p=i.menuIsOpen,m=i.required,x=this.getComponents(),b=x.Input,j=this.state,w=j.inputIsHidden,_=j.ariaSelection,k=this.commonProps,C=l||this.getElementId("input"),A=Zt(Zt(Zt({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":m,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?v.createElement(b,sn({},k,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:s,isHidden:w,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:h,type:"text",value:c},A)):v.createElement(vme,sn({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Iw,onFocus:this.onInputFocus,disabled:s,tabIndex:u,inputMode:"none",form:h,value:""},A))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,u=s.MultiValueRemove,h=s.SingleValue,p=s.Placeholder,m=this.commonProps,x=this.props,b=x.controlShouldRenderValue,j=x.isDisabled,w=x.isMulti,_=x.inputValue,k=x.placeholder,C=this.state,A=C.selectValue,T=C.focusedValue,E=C.isFocused;if(!this.hasValue()||!b)return _?null:v.createElement(p,sn({},m,{key:"placeholder",isDisabled:j,isFocused:E,innerProps:{id:this.getElementId("placeholder")}}),k);if(w)return A.map(function($,U){var B=$===T,R="".concat(i.getOptionLabel($),"-").concat(i.getOptionValue($));return v.createElement(o,sn({},m,{components:{Container:l,Label:c,Remove:u},isFocused:B,isDisabled:j,key:R,index:U,removeProps:{onClick:function(){return i.removeValue($)},onTouchEnd:function(){return i.removeValue($)},onMouseDown:function(G){G.preventDefault()}},data:$}),i.formatOptionLabel($,"value"))});if(_)return null;var I=A[0];return v.createElement(h,sn({},m,{data:I,isDisabled:j}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,h=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||u)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,sn({},o,{innerProps:p,isFocused:h}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,h=this.state.isFocused;if(!s||!u)return null;var p={"aria-hidden":"true"};return v.createElement(s,sn({},o,{innerProps:p,isDisabled:c,isFocused:h}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused;return v.createElement(o,sn({},l,{isDisabled:c,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,sn({},o,{innerProps:u,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,u=s.MenuList,h=s.MenuPortal,p=s.LoadingMessage,m=s.NoOptionsMessage,x=s.Option,b=this.commonProps,j=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,k=w.inputValue,C=w.isLoading,A=w.loadingMessage,T=w.minMenuHeight,E=w.maxMenuHeight,I=w.menuIsOpen,$=w.menuPlacement,U=w.menuPosition,B=w.menuPortalTarget,R=w.menuShouldBlockScroll,z=w.menuShouldScrollIntoView,G=w.noOptionsMessage,K=w.onMenuScrollToTop,Y=w.onMenuScrollToBottom;if(!I)return null;var q=function(X,Re){var Se=X.type,Ee=X.data,Fe=X.isDisabled,le=X.isSelected,_e=X.label,Ve=X.value,De=j===Ee,ue=Fe?void 0:function(){return i.onOptionHover(Ee)},Ae=Fe?void 0:function(){return i.selectOption(Ee)},ce="".concat(i.getElementId("option"),"-").concat(Re),be={id:ce,onClick:Ae,onMouseMove:ue,onMouseOver:ue,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:le};return v.createElement(x,sn({},b,{innerProps:be,data:Ee,isDisabled:Fe,isSelected:le,key:ce,label:_e,type:Se,value:Ve,isFocused:De,innerRef:De?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(X.data,"menu"))},V;if(this.hasOptions())V=this.getCategorizedOptions().map(function(me){if(me.type==="group"){var X=me.data,Re=me.options,Se=me.index,Ee="".concat(i.getElementId("group"),"-").concat(Se),Fe="".concat(Ee,"-heading");return v.createElement(o,sn({},b,{key:Ee,data:X,options:Re,Heading:l,headingProps:{id:Fe,data:me.data},label:i.formatGroupLabel(me.data)}),me.options.map(function(le){return q(le,"".concat(Se,"-").concat(le.index))}))}else if(me.type==="option")return q(me,"".concat(me.index))});else if(C){var H=A({inputValue:k});if(H===null)return null;V=v.createElement(p,b,H)}else{var Q=G({inputValue:k});if(Q===null)return null;V=v.createElement(m,b,Q)}var L={minMenuHeight:T,maxMenuHeight:E,menuPlacement:$,menuPosition:U,menuShouldScrollIntoView:z},te=v.createElement(Xfe,sn({},b,L),function(me){var X=me.ref,Re=me.placerProps,Se=Re.placement,Ee=Re.maxHeight;return v.createElement(c,sn({},b,L,{innerRef:X,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:C,placement:Se}),v.createElement(_me,{captureEnabled:_,onTopArrive:K,onBottomArrive:Y,lockEnabled:R},function(Fe){return v.createElement(u,sn({},b,{innerRef:function(_e){i.getMenuListRef(_e),Fe(_e)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:C,maxHeight:Ee,focusedOption:j}),V)}))});return B||U==="fixed"?v.createElement(h,sn({},b,{appendTo:B,controlElement:this.controlRef,menuPlacement:$,menuPosition:U}),te):te}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,u=s.name,h=s.required,p=this.state.selectValue;if(h&&!this.hasValue()&&!l)return v.createElement(Tme,{name:u,onFocus:this.onValueInputFocus});if(!(!u||l))if(c)if(o){var m=p.map(function(j){return i.getOptionValue(j)}).join(o);return v.createElement("input",{name:u,type:"hidden",value:m})}else{var x=p.length>0?p.map(function(j,w){return v.createElement("input",{key:"i-".concat(w),name:u,type:"hidden",value:i.getOptionValue(j)})}):v.createElement("input",{name:u,type:"hidden",value:""});return v.createElement("div",null,x)}else{var b=p[0]?this.getOptionValue(p[0]):"";return v.createElement("input",{name:u,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,u=s.isFocused,h=s.selectValue,p=this.getFocusableOptions();return v.createElement(fme,sn({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:u,selectValue:h,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,l=i.SelectContainer,c=i.ValueContainer,u=this.props,h=u.className,p=u.id,m=u.isDisabled,x=u.menuIsOpen,b=this.state.isFocused,j=this.commonProps=this.getCommonProps();return v.createElement(l,sn({},j,{className:h,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:m,isFocused:b}),this.renderLiveRegion(),v.createElement(s,sn({},j,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:m,isFocused:b,menuIsOpen:x}),v.createElement(c,sn({},j,{isDisabled:m}),this.renderPlaceholderOrValue(),this.renderInput()),v.createElement(o,sn({},j,{isDisabled:m}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,u=s.ariaSelection,h=s.isFocused,p=s.prevWasFocused,m=s.instancePrefix,x=i.options,b=i.value,j=i.menuIsOpen,w=i.inputValue,_=i.isMulti,k=n3(b),C={};if(o&&(b!==o.value||x!==o.options||j!==o.menuIsOpen||w!==o.inputValue)){var A=j?Vme(i,k):[],T=j?y3(hw(i,k),"".concat(m,"-option")):[],E=l?Hme(s,k):null,I=Gme(s,A),$=FC(T,I);C={selectValue:k,focusedOption:I,focusedOptionId:$,focusableOptionsWithIds:T,focusedValue:E,clearFocusValueOnUpdate:!1}}var U=c!=null&&i!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},B=u,R=h&&p;return h&&!R&&(B={value:M1(_,k,k[0]||null),options:k,action:"initial-input-focus"},R=!p),(u==null?void 0:u.action)==="initial-input-focus"&&(B=null),Zt(Zt(Zt({},C),U),{},{prevProps:i,ariaSelection:B,prevWasFocused:R})}}]),n}(v.Component);_9.defaultProps=Ume;var Kme=v.forwardRef(function(t,e){var n=uhe(t);return v.createElement(_9,sn({ref:e},n))}),C9=Kme;const Cm=new Map,k9=(()=>{const t=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async e=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),e!=null&&e.id&&Cm.has(e.id)){const i=Cm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&Cm.set(e.id,a),a}catch{if(await t,e!=null&&e.id&&Cm.has(e.id)){const i=Cm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&Cm.set(e.id,a),a}}})();function Yme(t){var e=atob(t),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n.buffer}const Qme=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,T9=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,I1=new Map,cE=(t,e)=>{const n=new Blob([`registerProcessor("${t}", ${e})`],{type:"application/javascript"});return URL.createObjectURL(n)};var $C={exports:{}},v3;function Xme(){return v3||(v3=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function s(c,u,h,p,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,p||c,m),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],h,p;if(this._eventsCount===0)return u;for(p in h=this._events)e.call(h,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},l.prototype.listeners=function(u){var h=n?n+u:u,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,x=p.length,b=new Array(x);m<x;m++)b[m]=p[m].fn;return b},l.prototype.listenerCount=function(u){var h=n?n+u:u,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,h,p,m,x,b){var j=n?n+u:u;if(!this._events[j])return!1;var w=this._events[j],_=arguments.length,k,C;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,h),!0;case 3:return w.fn.call(w.context,h,p),!0;case 4:return w.fn.call(w.context,h,p,m),!0;case 5:return w.fn.call(w.context,h,p,m,x),!0;case 6:return w.fn.call(w.context,h,p,m,x,b),!0}for(C=1,k=new Array(_-1);C<_;C++)k[C-1]=arguments[C];w.fn.apply(w.context,k)}else{var A=w.length,T;for(C=0;C<A;C++)switch(w[C].once&&this.removeListener(u,w[C].fn,void 0,!0),_){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,h);break;case 3:w[C].fn.call(w[C].context,h,p);break;case 4:w[C].fn.call(w[C].context,h,p,m);break;default:if(!k)for(T=1,k=new Array(_-1);T<_;T++)k[T-1]=arguments[T];w[C].fn.apply(w[C].context,k)}}return!0},l.prototype.on=function(u,h,p){return s(this,u,h,p,!1)},l.prototype.once=function(u,h,p){return s(this,u,h,p,!0)},l.prototype.removeListener=function(u,h,p,m){var x=n?n+u:u;if(!this._events[x])return this;if(!h)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===h&&(!m||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,w=[],_=b.length;j<_;j++)(b[j].fn!==h||m&&!b[j].once||p&&b[j].context!==p)&&w.push(b[j]);w.length?this._events[x]=w.length===1?w[0]:w:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var h;return u?(h=n?n+u:u,this._events[h]&&o(this,h)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}($C)),$C.exports}var Jme=Xme();const A9=Kn(Jme);function Zme(t){for(var e="",n=new Uint8Array(t),a=n.byteLength,i=0;i<a;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}class P9 extends A9{constructor(n=16e3){super();Nr(this,"stream");Nr(this,"audioContext");Nr(this,"source");Nr(this,"recording",!1);Nr(this,"recordingWorklet");Nr(this,"vuWorklet");Nr(this,"starting",null);this.sampleRate=n}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async n=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await k9({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const a="audio-recorder-worklet",i=cE(a,Qme);await this.audioContext.audioWorklet.addModule(i),this.recordingWorklet=new AudioWorkletNode(this.audioContext,a),this.recordingWorklet.port.onmessage=async o=>{const l=o.data.data.int16arrayBuffer;if(l){const c=Zme(l);this.emit("data",c)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(cE(s,T9)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=o=>{this.emit("volume",o.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,n(),this.starting=null})}stop(){const n=()=>{var a,i;(a=this.source)==null||a.disconnect(),(i=this.stream)==null||i.getTracks().forEach(s=>s.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(n);return}n()}}const ege=3,tge=({active:t,volume:e,hover:n})=>{const a=v.useRef([]);return v.useEffect(()=>{let i=null;const s=()=>{a.current.forEach((o,l)=>{o&&(o.style.height=`${Math.min(24,4+e*(l===1?400:60))}px`)}),i=window.setTimeout(s,100)};return s(),()=>clearTimeout(i)},[e]),r.jsx("div",{className:cd("audioPulse",{active:t,hover:n}),children:Array(ege).fill(null).map((i,s)=>r.jsx("div",{ref:o=>{a.current[s]=o},style:{animationDelay:`${s*133}ms`}},s))})};var xv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var nge=xv.exports,b3;function rge(){return b3||(b3=1,function(t,e){(function(){var n,a="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",p=1,m=2,x=4,b=1,j=2,w=1,_=2,k=4,C=8,A=16,T=32,E=64,I=128,$=256,U=512,B=30,R="...",z=800,G=16,K=1,Y=2,q=3,V=1/0,H=9007199254740991,Q=17976931348623157e292,L=NaN,te=4294967295,me=te-1,X=te>>>1,Re=[["ary",I],["bind",w],["bindKey",_],["curry",C],["curryRight",A],["flip",U],["partial",T],["partialRight",E],["rearg",$]],Se="[object Arguments]",Ee="[object Array]",Fe="[object AsyncFunction]",le="[object Boolean]",_e="[object Date]",Ve="[object DOMException]",De="[object Error]",ue="[object Function]",Ae="[object GeneratorFunction]",ce="[object Map]",be="[object Number]",ke="[object Null]",Ce="[object Object]",ne="[object Promise]",ye="[object Proxy]",de="[object RegExp]",se="[object Set]",re="[object String]",oe="[object Symbol]",je="[object Undefined]",Oe="[object WeakMap]",J="[object WeakSet]",xe="[object ArrayBuffer]",ge="[object DataView]",he="[object Float32Array]",Ie="[object Float64Array]",nt="[object Int8Array]",Be="[object Int16Array]",Ge="[object Int32Array]",it="[object Uint8Array]",wt="[object Uint8ClampedArray]",we="[object Uint16Array]",Qe="[object Uint32Array]",Xe=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,Ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,Pe=/[&<>"']/g,ot=RegExp(bt.source),kt=RegExp(Pe.source),Ue=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,Tt=/<%=([\s\S]+?)%>/g,Qn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,It=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gt=/[\\^$.*+?()[\]{}|]/g,Xn=RegExp(Gt.source),jr=/^\s+/,Va=/\s/,ta=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sa=/\{\n\/\* \[wrapped with (.+)\] \*/,gn=/,? & /,Gr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,An=/[()=,{}\[\]\/\s]/,Fn=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yt=/\w*$/,St=/^[-+]0x[0-9a-f]+$/i,Rt=/^0b[01]+$/i,Cn=/^\[object .+?Constructor\]$/,$n=/^0o[0-7]+$/i,_a=/^(?:0|[1-9]\d*)$/,bi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,po=/($^)/,Md=/['\n\r\u2028\u2029\\]/g,Id="\\ud800-\\udfff",WS="\\u0300-\\u036f",Wf="\\ufe20-\\ufe2f",Kf="\\u20d0-\\u20ff",Bs=WS+Wf+Kf,Yf="\\u2700-\\u27bf",ny="a-z\\xdf-\\xf6\\xf8-\\xff",Zc="\\xac\\xb1\\xd7\\xf7",ry="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ay="\\u2000-\\u206f",KS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",iy="A-Z\\xc0-\\xd6\\xd8-\\xde",ji="\\ufe0e\\ufe0f",sy=Zc+ry+ay+KS,oy="[']",Qf="["+Id+"]",ly="["+sy+"]",Yl="["+Bs+"]",t0="\\d+",Hi="["+Yf+"]",Xf="["+ny+"]",cy="[^"+Id+sy+t0+Yf+ny+iy+"]",Rd="\\ud83c[\\udffb-\\udfff]",eu="(?:"+Yl+"|"+Rd+")",uy="[^"+Id+"]",Jf="(?:\\ud83c[\\udde6-\\uddff]){2}",Qo="[\\ud800-\\udbff][\\udc00-\\udfff]",tu="["+iy+"]",dy="\\u200d",hy="(?:"+Xf+"|"+cy+")",fy="(?:"+tu+"|"+cy+")",n0="(?:"+oy+"(?:d|ll|m|re|s|t|ve))?",r0="(?:"+oy+"(?:D|LL|M|RE|S|T|VE))?",Ld=eu+"?",Zf="["+ji+"]?",py="(?:"+dy+"(?:"+[uy,Jf,Qo].join("|")+")"+Zf+Ld+")*",nu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ru="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",my=Zf+Ld+py,gy="(?:"+[Hi,Jf,Qo].join("|")+")"+my,a0="(?:"+[uy+Yl+"?",Yl,Jf,Qo,Qf].join("|")+")",Fd=RegExp(oy,"g"),mo=RegExp(Yl,"g"),$d=RegExp(Rd+"(?="+Rd+")|"+a0+my,"g"),Bd=RegExp([tu+"?"+Xf+"+"+n0+"(?="+[ly,tu,"$"].join("|")+")",fy+"+"+r0+"(?="+[ly,tu+hy,"$"].join("|")+")",tu+"?"+hy+"+"+n0,tu+"+"+r0,ru,nu,t0,gy].join("|"),"g"),Xo=RegExp("["+dy+Id+Bs+ji+"]"),yy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ep=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],i0=-1,cr={};cr[he]=cr[Ie]=cr[nt]=cr[Be]=cr[Ge]=cr[it]=cr[wt]=cr[we]=cr[Qe]=!0,cr[Se]=cr[Ee]=cr[xe]=cr[le]=cr[ge]=cr[_e]=cr[De]=cr[ue]=cr[ce]=cr[be]=cr[Ce]=cr[de]=cr[se]=cr[re]=cr[Oe]=!1;var nr={};nr[Se]=nr[Ee]=nr[xe]=nr[ge]=nr[le]=nr[_e]=nr[he]=nr[Ie]=nr[nt]=nr[Be]=nr[Ge]=nr[ce]=nr[be]=nr[Ce]=nr[de]=nr[se]=nr[re]=nr[oe]=nr[it]=nr[wt]=nr[we]=nr[Qe]=!0,nr[De]=nr[ue]=nr[Oe]=!1;var s0={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Za={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ql={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zd=parseFloat,YS=parseInt,np=typeof io=="object"&&io&&io.Object===Object&&io,xy=typeof self=="object"&&self&&self.Object===Object&&self,ea=np||xy||Function("return this")(),au=e&&!e.nodeType&&e,Jo=au&&!0&&t&&!t.nodeType&&t,o0=Jo&&Jo.exports===au,vy=o0&&np.process,Gi=function(){try{var He=Jo&&Jo.require&&Jo.require("util").types;return He||vy&&vy.binding&&vy.binding("util")}catch{}}(),rp=Gi&&Gi.isArrayBuffer,l0=Gi&&Gi.isDate,c0=Gi&&Gi.isMap,u0=Gi&&Gi.isRegExp,d0=Gi&&Gi.isSet,h0=Gi&&Gi.isTypedArray;function ei(He,st,rt){switch(rt.length){case 0:return He.call(st);case 1:return He.call(st,rt[0]);case 2:return He.call(st,rt[0],rt[1]);case 3:return He.call(st,rt[0],rt[1],rt[2])}return He.apply(st,rt)}function QS(He,st,rt,At){for(var tn=-1,Un=He==null?0:He.length;++tn<Un;){var na=He[tn];st(At,na,rt(na),He)}return At}function Wi(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At&&st(He[rt],rt,He)!==!1;);return He}function XS(He,st){for(var rt=He==null?0:He.length;rt--&&st(He[rt],rt,He)!==!1;);return He}function f0(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(!st(He[rt],rt,He))return!1;return!0}function zs(He,st){for(var rt=-1,At=He==null?0:He.length,tn=0,Un=[];++rt<At;){var na=He[rt];st(na,rt,He)&&(Un[tn++]=na)}return Un}function ap(He,st){var rt=He==null?0:He.length;return!!rt&&iu(He,st,0)>-1}function by(He,st,rt){for(var At=-1,tn=He==null?0:He.length;++At<tn;)if(rt(st,He[At]))return!0;return!1}function Dr(He,st){for(var rt=-1,At=He==null?0:He.length,tn=Array(At);++rt<At;)tn[rt]=st(He[rt],rt,He);return tn}function go(He,st){for(var rt=-1,At=st.length,tn=He.length;++rt<At;)He[tn+rt]=st[rt];return He}function jy(He,st,rt,At){var tn=-1,Un=He==null?0:He.length;for(At&&Un&&(rt=He[++tn]);++tn<Un;)rt=st(rt,He[tn],tn,He);return rt}function JS(He,st,rt,At){var tn=He==null?0:He.length;for(At&&tn&&(rt=He[--tn]);tn--;)rt=st(rt,He[tn],tn,He);return rt}function wy(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(st(He[rt],rt,He))return!0;return!1}var ZS=sp("length");function e_(He){return He.split("")}function t_(He){return He.match(Gr)||[]}function p0(He,st,rt){var At;return rt(He,function(tn,Un,na){if(st(tn,Un,na))return At=Un,!1}),At}function ip(He,st,rt,At){for(var tn=He.length,Un=rt+(At?1:-1);At?Un--:++Un<tn;)if(st(He[Un],Un,He))return Un;return-1}function iu(He,st,rt){return st===st?i_(He,st,rt):ip(He,su,rt)}function Ny(He,st,rt,At){for(var tn=rt-1,Un=He.length;++tn<Un;)if(At(He[tn],st))return tn;return-1}function su(He){return He!==He}function m0(He,st){var rt=He==null?0:He.length;return rt?lp(He,st)/rt:L}function sp(He){return function(st){return st==null?n:st[He]}}function op(He){return function(st){return He==null?n:He[st]}}function Sy(He,st,rt,At,tn){return tn(He,function(Un,na,Vn){rt=At?(At=!1,Un):st(rt,Un,na,Vn)}),rt}function g0(He,st){var rt=He.length;for(He.sort(st);rt--;)He[rt]=He[rt].value;return He}function lp(He,st){for(var rt,At=-1,tn=He.length;++At<tn;){var Un=st(He[At]);Un!==n&&(rt=rt===n?Un:rt+Un)}return rt}function Zo(He,st){for(var rt=-1,At=Array(He);++rt<He;)At[rt]=st(rt);return At}function n_(He,st){return Dr(st,function(rt){return[rt,He[rt]]})}function y0(He){return He&&He.slice(0,Cy(He)+1).replace(jr,"")}function wi(He){return function(st){return He(st)}}function cp(He,st){return Dr(st,function(rt){return He[rt]})}function ou(He,st){return He.has(st)}function lu(He,st){for(var rt=-1,At=He.length;++rt<At&&iu(st,He[rt],0)>-1;);return rt}function cu(He,st){for(var rt=He.length;rt--&&iu(st,He[rt],0)>-1;);return rt}function r_(He,st){for(var rt=He.length,At=0;rt--;)He[rt]===st&&++At;return At}var up=op(s0),x0=op(Za);function v0(He){return"\\"+tp[He]}function _y(He,st){return He==null?n:He[st]}function el(He){return Xo.test(He)}function b0(He){return yy.test(He)}function j0(He){for(var st,rt=[];!(st=He.next()).done;)rt.push(st.value);return rt}function dp(He){var st=-1,rt=Array(He.size);return He.forEach(function(At,tn){rt[++st]=[tn,At]}),rt}function w0(He,st){return function(rt){return He(st(rt))}}function tl(He,st){for(var rt=-1,At=He.length,tn=0,Un=[];++rt<At;){var na=He[rt];(na===st||na===h)&&(He[rt]=h,Un[tn++]=rt)}return Un}function hp(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=At}),rt}function a_(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=[At,At]}),rt}function i_(He,st,rt){for(var At=rt-1,tn=He.length;++At<tn;)if(He[At]===st)return At;return-1}function Ni(He,st,rt){for(var At=rt+1;At--;)if(He[At]===st)return At;return At}function qs(He){return el(He)?S0(He):ZS(He)}function Ki(He){return el(He)?ky(He):e_(He)}function Cy(He){for(var st=He.length;st--&&Va.test(He.charAt(st)););return st}var N0=op(Ql);function S0(He){for(var st=$d.lastIndex=0;$d.test(He);)++st;return st}function ky(He){return He.match($d)||[]}function s_(He){return He.match(Bd)||[]}var uu=function He(st){st=st==null?ea:nl.defaults(ea.Object(),st,nl.pick(ea,ep));var rt=st.Array,At=st.Date,tn=st.Error,Un=st.Function,na=st.Math,Vn=st.Object,fp=st.RegExp,_0=st.String,Si=st.TypeError,pp=rt.prototype,o_=Un.prototype,du=Vn.prototype,qd=st["__core-js_shared__"],Ud=o_.toString,Jn=du.hasOwnProperty,ys=0,Ty=function(){var y=/[^.]+$/.exec(qd&&qd.keys&&qd.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Ha=du.toString,Yi=Ud.call(Vn),hu=ea._,Ay=fp("^"+Ud.call(Jn).replace(Gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xl=o0?st.Buffer:n,xs=st.Symbol,fu=st.Uint8Array,Jl=Xl?Xl.allocUnsafe:n,Vd=w0(Vn.getPrototypeOf,Vn),Hd=Vn.create,Zl=du.propertyIsEnumerable,mp=pp.splice,ti=xs?xs.isConcatSpreadable:n,ec=xs?xs.iterator:n,Ga=xs?xs.toStringTag:n,Gd=function(){try{var y=dl(Vn,"defineProperty");return y({},"",{}),y}catch{}}(),gp=st.clearTimeout!==ea.clearTimeout&&st.clearTimeout,tc=At&&At.now!==ea.Date.now&&At.now,Py=st.setTimeout!==ea.setTimeout&&st.setTimeout,pu=na.ceil,yo=na.floor,rl=Vn.getOwnPropertySymbols,yp=Xl?Xl.isBuffer:n,Wd=st.isFinite,Qi=pp.join,Xi=w0(Vn.keys,Vn),kr=na.max,Or=na.min,xo=At.now,nc=st.parseInt,Ey=na.random,Dy=pp.reverse,Kd=dl(st,"DataView"),la=dl(st,"Map"),Mr=dl(st,"Promise"),Pn=dl(st,"Set"),vs=dl(st,"WeakMap"),ni=dl(Vn,"create"),mu=vs&&new vs,Ji={},C0=ko(Kd),k0=ko(la),Yd=ko(Mr),Qd=ko(Pn),T0=ko(vs),al=xs?xs.prototype:n,rc=al?al.valueOf:n,il=al?al.toString:n;function fe(y){if(Vr(y)&&!ln(y)&&!(y instanceof wn)){if(y instanceof ri)return y;if(Jn.call(y,"__wrapped__"))return ua(y)}return new ri(y)}var _i=function(){function y(){}return function(N){if(!Rr(N))return{};if(Hd)return Hd(N);y.prototype=N;var M=new y;return y.prototype=n,M}}();function Zi(){}function ri(y,N){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!N,this.__index__=0,this.__values__=n}fe.templateSettings={escape:Ue,evaluate:jt,interpolate:Tt,variable:"",imports:{_:fe}},fe.prototype=Zi.prototype,fe.prototype.constructor=fe,ri.prototype=_i(Zi.prototype),ri.prototype.constructor=ri;function wn(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function Xd(){var y=new wn(this.__wrapped__);return y.__actions__=ca(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=ca(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=ca(this.__views__),y}function xp(){if(this.__filtered__){var y=new wn(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function ac(){var y=this.__wrapped__.value(),N=this.__dir__,M=ln(y),W=N<0,ae=M?y.length:0,ve=oj(0,ae,this.__views__),Me=ve.start,ze=ve.end,Ke=ze-Me,ft=W?ze:Me-1,mt=this.__iteratees__,xt=mt.length,Pt=0,Bt=Or(Ke,this.__takeCount__);if(!M||!W&&ae==Ke&&Bt==Ke)return W0(y,this.__actions__);var nn=[];e:for(;Ke--&&Pt<Bt;){ft+=N;for(var Sn=-1,rn=y[ft];++Sn<xt;){var On=mt[Sn],Gn=On.iteratee,Cs=On.type,Di=Gn(rn);if(Cs==Y)rn=Di;else if(!Di){if(Cs==K)continue e;break e}}nn[Pt++]=rn}return nn}wn.prototype=_i(Zi.prototype),wn.prototype.constructor=wn;function Wr(y){var N=-1,M=y==null?0:y.length;for(this.clear();++N<M;){var W=y[N];this.set(W[0],W[1])}}function vp(){this.__data__=ni?ni(null):{},this.size=0}function A0(y){var N=this.has(y)&&delete this.__data__[y];return this.size-=N?1:0,N}function l_(y){var N=this.__data__;if(ni){var M=N[y];return M===c?n:M}return Jn.call(N,y)?N[y]:n}function c_(y){var N=this.__data__;return ni?N[y]!==n:Jn.call(N,y)}function u_(y,N){var M=this.__data__;return this.size+=this.has(y)?0:1,M[y]=ni&&N===n?c:N,this}Wr.prototype.clear=vp,Wr.prototype.delete=A0,Wr.prototype.get=l_,Wr.prototype.has=c_,Wr.prototype.set=u_;function yr(y){var N=-1,M=y==null?0:y.length;for(this.clear();++N<M;){var W=y[N];this.set(W[0],W[1])}}function Oy(){this.__data__=[],this.size=0}function Jd(y){var N=this.__data__,M=xu(N,y);if(M<0)return!1;var W=N.length-1;return M==W?N.pop():mp.call(N,M,1),--this.size,!0}function Zd(y){var N=this.__data__,M=xu(N,y);return M<0?n:N[M][1]}function My(y){return xu(this.__data__,y)>-1}function gu(y,N){var M=this.__data__,W=xu(M,y);return W<0?(++this.size,M.push([y,N])):M[W][1]=N,this}yr.prototype.clear=Oy,yr.prototype.delete=Jd,yr.prototype.get=Zd,yr.prototype.has=My,yr.prototype.set=gu;function ai(y){var N=-1,M=y==null?0:y.length;for(this.clear();++N<M;){var W=y[N];this.set(W[0],W[1])}}function d_(){this.size=0,this.__data__={hash:new Wr,map:new(la||yr),string:new Wr}}function P0(y){var N=Su(this,y).delete(y);return this.size-=N?1:0,N}function h_(y){return Su(this,y).get(y)}function E0(y){return Su(this,y).has(y)}function ic(y,N){var M=Su(this,y),W=M.size;return M.set(y,N),this.size+=M.size==W?0:1,this}ai.prototype.clear=d_,ai.prototype.delete=P0,ai.prototype.get=h_,ai.prototype.has=E0,ai.prototype.set=ic;function vo(y){var N=-1,M=y==null?0:y.length;for(this.__data__=new ai;++N<M;)this.add(y[N])}function bp(y){return this.__data__.set(y,c),this}function D0(y){return this.__data__.has(y)}vo.prototype.add=vo.prototype.push=bp,vo.prototype.has=D0;function Wa(y){var N=this.__data__=new yr(y);this.size=N.size}function O0(){this.__data__=new yr,this.size=0}function jp(y){var N=this.__data__,M=N.delete(y);return this.size=N.size,M}function Iy(y){return this.__data__.get(y)}function M0(y){return this.__data__.has(y)}function wp(y,N){var M=this.__data__;if(M instanceof yr){var W=M.__data__;if(!la||W.length<i-1)return W.push([y,N]),this.size=++M.size,this;M=this.__data__=new ai(W)}return M.set(y,N),this.size=M.size,this}Wa.prototype.clear=O0,Wa.prototype.delete=jp,Wa.prototype.get=Iy,Wa.prototype.has=M0,Wa.prototype.set=wp;function Ry(y,N){var M=ln(y),W=!M&&Eo(y),ae=!M&&!W&&jl(y),ve=!M&&!W&&!ae&&Fu(y),Me=M||W||ae||ve,ze=Me?Zo(y.length,_0):[],Ke=ze.length;for(var ft in y)(N||Jn.call(y,ft))&&!(Me&&(ft=="length"||ae&&(ft=="offset"||ft=="parent")||ve&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||Ns(ft,Ke)))&&ze.push(ft);return ze}function yu(y){var N=y.length;return N?y[Dp(0,N-1)]:n}function I0(y,N){return Ch(ca(y),js(N,0,y.length))}function R0(y){return Ch(ca(y))}function Us(y,N,M){(M!==n&&!di(y[N],M)||M===n&&!(N in y))&&bs(y,N,M)}function sc(y,N,M){var W=y[N];(!(Jn.call(y,N)&&di(W,M))||M===n&&!(N in y))&&bs(y,N,M)}function xu(y,N){for(var M=y.length;M--;)if(di(y[M][0],N))return M;return-1}function sl(y,N,M,W){return jo(y,function(ae,ve,Me){N(W,ae,M(ae),Me)}),W}function bo(y,N){return y&&oi(N,fa(N),y)}function eh(y,N){return y&&oi(N,xa(N),y)}function bs(y,N,M){N=="__proto__"&&Gd?Gd(y,N,{configurable:!0,enumerable:!0,value:M,writable:!0}):y[N]=M}function th(y,N){for(var M=-1,W=N.length,ae=rt(W),ve=y==null;++M<W;)ae[M]=ve?n:Bh(y,N[M]);return ae}function js(y,N,M){return y===y&&(M!==n&&(y=y<=M?y:M),N!==n&&(y=y>=N?y:N)),y}function Ma(y,N,M,W,ae,ve){var Me,ze=N&p,Ke=N&m,ft=N&x;if(M&&(Me=ae?M(y,W,ae,ve):M(y)),Me!==n)return Me;if(!Rr(y))return y;var mt=ln(y);if(mt){if(Me=lx(y),!ze)return ca(y,Me)}else{var xt=ya(y),Pt=xt==ue||xt==Ae;if(jl(y))return ex(y,ze);if(xt==Ce||xt==Se||Pt&&!ae){if(Me=Ke||Pt?{}:cx(y),!ze)return Ke?ph(y,eh(Me,y)):Fp(y,bo(Me,y))}else{if(!nr[xt])return ae?y:{};Me=ux(y,xt,ze)}}ve||(ve=new Wa);var Bt=ve.get(y);if(Bt)return Bt;ve.set(y,Me),Zj(y)?y.forEach(function(rn){Me.add(Ma(rn,N,M,rn,y,ve))}):cm(y)&&y.forEach(function(rn,On){Me.set(On,Ma(rn,N,M,On,y,ve))});var nn=ft?Ke?qp:zp:Ke?xa:fa,Sn=mt?n:nn(y);return Wi(Sn||y,function(rn,On){Sn&&(On=rn,rn=y[On]),sc(Me,On,Ma(rn,N,M,On,y,ve))}),Me}function L0(y){var N=fa(y);return function(M){return Ly(M,y,N)}}function Ly(y,N,M){var W=M.length;if(y==null)return!W;for(y=Vn(y);W--;){var ae=M[W],ve=N[ae],Me=y[ae];if(Me===n&&!(ae in y)||!ve(Me))return!1}return!0}function oc(y,N,M){if(typeof y!="function")throw new Si(o);return Cu(function(){y.apply(n,M)},N)}function ol(y,N,M,W){var ae=-1,ve=ap,Me=!0,ze=y.length,Ke=[],ft=N.length;if(!ze)return Ke;M&&(N=Dr(N,wi(M))),W?(ve=by,Me=!1):N.length>=i&&(ve=ou,Me=!1,N=new vo(N));e:for(;++ae<ze;){var mt=y[ae],xt=M==null?mt:M(mt);if(mt=W||mt!==0?mt:0,Me&&xt===xt){for(var Pt=ft;Pt--;)if(N[Pt]===xt)continue e;Ke.push(mt)}else ve(N,xt,W)||Ke.push(mt)}return Ke}var jo=ax(Ia),Np=ax(bu,!0);function Fy(y,N){var M=!0;return jo(y,function(W,ae,ve){return M=!!N(W,ae,ve),M}),M}function ws(y,N,M){for(var W=-1,ae=y.length;++W<ae;){var ve=y[W],Me=N(ve);if(Me!=null&&(ze===n?Me===Me&&!Qa(Me):M(Me,ze)))var ze=Me,Ke=ve}return Ke}function bn(y,N,M,W){var ae=y.length;for(M=dn(M),M<0&&(M=-M>ae?0:ae+M),W=W===n||W>ae?ae:dn(W),W<0&&(W+=ae),W=M>W?0:Js(W);M<W;)y[M++]=N;return y}function rr(y,N){var M=[];return jo(y,function(W,ae,ve){N(W,ae,ve)&&M.push(W)}),M}function En(y,N,M,W,ae){var ve=-1,Me=y.length;for(M||(M=_o),ae||(ae=[]);++ve<Me;){var ze=y[ve];N>0&&M(ze)?N>1?En(ze,N-1,M,W,ae):go(ae,ze):W||(ae[ae.length]=ze)}return ae}var vu=pc(),lc=pc(!0);function Ia(y,N){return y&&vu(y,N,fa)}function bu(y,N){return y&&lc(y,N,fa)}function ll(y,N){return zs(N,function(M){return Ss(y[M])})}function es(y,N){N=No(N,y);for(var M=0,W=N.length;y!=null&&M<W;)y=y[er(N[M++])];return M&&M==W?y:n}function F0(y,N,M){var W=N(y);return ln(y)?W:go(W,M(y))}function Dn(y){return y==null?y===n?je:ke:Ga&&Ga in Vn(y)?sj(y):hj(y)}function nh(y,N){return y>N}function $y(y,N){return y!=null&&Jn.call(y,N)}function $0(y,N){return y!=null&&N in Vn(y)}function B0(y,N,M){return y>=Or(N,M)&&y<kr(N,M)}function By(y,N,M){for(var W=M?by:ap,ae=y[0].length,ve=y.length,Me=ve,ze=rt(ve),Ke=1/0,ft=[];Me--;){var mt=y[Me];Me&&N&&(mt=Dr(mt,wi(N))),Ke=Or(mt.length,Ke),ze[Me]=!M&&(N||ae>=120&&mt.length>=120)?new vo(Me&&mt):n}mt=y[0];var xt=-1,Pt=ze[0];e:for(;++xt<ae&&ft.length<Ke;){var Bt=mt[xt],nn=N?N(Bt):Bt;if(Bt=M||Bt!==0?Bt:0,!(Pt?ou(Pt,nn):W(ft,nn,M))){for(Me=ve;--Me;){var Sn=ze[Me];if(!(Sn?ou(Sn,nn):W(y[Me],nn,M)))continue e}Pt&&Pt.push(nn),ft.push(Bt)}}return ft}function zy(y,N,M,W){return Ia(y,function(ae,ve,Me){N(W,M(ae),ve,Me)}),W}function cc(y,N,M){N=No(N,y),y=_u(y,N);var W=y==null?y:y[er(Ra(N))];return W==null?n:ei(W,y,M)}function Sp(y){return Vr(y)&&Dn(y)==Se}function ii(y){return Vr(y)&&Dn(y)==xe}function ra(y){return Vr(y)&&Dn(y)==_e}function uc(y,N,M,W,ae){return y===N?!0:y==null||N==null||!Vr(y)&&!Vr(N)?y!==y&&N!==N:rh(y,N,M,W,uc,ae)}function rh(y,N,M,W,ae,ve){var Me=ln(y),ze=ln(N),Ke=Me?Ee:ya(y),ft=ze?Ee:ya(N);Ke=Ke==Se?Ce:Ke,ft=ft==Se?Ce:ft;var mt=Ke==Ce,xt=ft==Ce,Pt=Ke==ft;if(Pt&&jl(y)){if(!jl(N))return!1;Me=!0,mt=!1}if(Pt&&!mt)return ve||(ve=new Wa),Me||Fu(y)?aj(y,N,M,W,ae,ve):ij(y,N,Ke,M,W,ae,ve);if(!(M&b)){var Bt=mt&&Jn.call(y,"__wrapped__"),nn=xt&&Jn.call(N,"__wrapped__");if(Bt||nn){var Sn=Bt?y.value():y,rn=nn?N.value():N;return ve||(ve=new Wa),ae(Sn,rn,M,W,ve)}}return Pt?(ve||(ve=new Wa),ga(y,N,M,W,ae,ve)):!1}function _p(y){return Vr(y)&&ya(y)==ce}function ah(y,N,M,W){var ae=M.length,ve=ae,Me=!W;if(y==null)return!ve;for(y=Vn(y);ae--;){var ze=M[ae];if(Me&&ze[2]?ze[1]!==y[ze[0]]:!(ze[0]in y))return!1}for(;++ae<ve;){ze=M[ae];var Ke=ze[0],ft=y[Ke],mt=ze[1];if(Me&&ze[2]){if(ft===n&&!(Ke in y))return!1}else{var xt=new Wa;if(W)var Pt=W(ft,mt,Ke,y,N,xt);if(!(Pt===n?uc(mt,ft,b|j,W,xt):Pt))return!1}}return!0}function Vs(y){if(!Rr(y)||Kp(y))return!1;var N=Ss(y)?Ay:Cn;return N.test(ko(y))}function Cp(y){return Vr(y)&&Dn(y)==de}function qy(y){return Vr(y)&&ya(y)==se}function Uy(y){return Vr(y)&&vc(y.length)&&!!cr[Dn(y)]}function Vy(y){return typeof y=="function"?y:y==null?Ze:typeof y=="object"?ln(y)?Ap(y[0],y[1]):Gy(y):Hn(y)}function kp(y){if(!xr(y))return Xi(y);var N=[];for(var M in Vn(y))Jn.call(y,M)&&M!="constructor"&&N.push(M);return N}function z0(y){if(!Rr(y))return hl(y);var N=xr(y),M=[];for(var W in y)W=="constructor"&&(N||!Jn.call(y,W))||M.push(W);return M}function Tp(y,N){return y<N}function Hy(y,N){var M=-1,W=da(y)?rt(y.length):[];return jo(y,function(ae,ve,Me){W[++M]=N(ae,ve,Me)}),W}function Gy(y){var N=Vp(y);return N.length==1&&N[0][2]?uj(N[0][0],N[0][1]):function(M){return M===y||ah(M,y,N)}}function Ap(y,N){return Gp(y)&&cj(N)?uj(er(y),N):function(M){var W=Bh(M,y);return W===n&&W===N?qu(M,y):uc(N,W,b|j)}}function ih(y,N,M,W,ae){y!==N&&vu(N,function(ve,Me){if(ae||(ae=new Wa),Rr(ve))f_(y,N,Me,M,ih,W,ae);else{var ze=W?W(Yp(y,Me),ve,Me+"",y,N,ae):n;ze===n&&(ze=ve),Us(y,Me,ze)}},xa)}function f_(y,N,M,W,ae,ve,Me){var ze=Yp(y,M),Ke=Yp(N,M),ft=Me.get(Ke);if(ft){Us(y,M,ft);return}var mt=ve?ve(ze,Ke,M+"",y,N,Me):n,xt=mt===n;if(xt){var Pt=ln(Ke),Bt=!Pt&&jl(Ke),nn=!Pt&&!Bt&&Fu(Ke);mt=Ke,Pt||Bt||nn?ln(ze)?mt=ze:Qr(ze)?mt=ca(ze):Bt?(xt=!1,mt=ex(Ke,!0)):nn?(xt=!1,mt=nx(Ke,!0)):mt=[]:as(Ke)||Eo(Ke)?(mt=ze,Eo(ze)?mt=n1(ze):(!Rr(ze)||Ss(ze))&&(mt=cx(Ke))):xt=!1}xt&&(Me.set(Ke,mt),ae(mt,Ke,W,ve,Me),Me.delete(Ke)),Us(y,M,mt)}function Wy(y,N){var M=y.length;if(M)return N+=N<0?M:0,Ns(N,M)?y[N]:n}function Ky(y,N,M){N.length?N=Dr(N,function(ve){return ln(ve)?function(Me){return es(Me,ve.length===1?ve[0]:ve)}:ve}):N=[Ze];var W=-1;N=Dr(N,wi(Vt()));var ae=Hy(y,function(ve,Me,ze){var Ke=Dr(N,function(ft){return ft(ve)});return{criteria:Ke,index:++W,value:ve}});return g0(ae,function(ve,Me){return X0(ve,Me,M)})}function q0(y,N){return Pp(y,N,function(M,W){return qu(y,W)})}function Pp(y,N,M){for(var W=-1,ae=N.length,ve={};++W<ae;){var Me=N[W],ze=es(y,Me);M(ze,Me)&&wu(ve,No(Me,y),ze)}return ve}function U0(y){return function(N){return es(N,y)}}function Ep(y,N,M,W){var ae=W?Ny:iu,ve=-1,Me=N.length,ze=y;for(y===N&&(N=ca(N)),M&&(ze=Dr(y,wi(M)));++ve<Me;)for(var Ke=0,ft=N[ve],mt=M?M(ft):ft;(Ke=ae(ze,mt,Ke,W))>-1;)ze!==y&&mp.call(ze,Ke,1),mp.call(y,Ke,1);return y}function Yy(y,N){for(var M=y?N.length:0,W=M-1;M--;){var ae=N[M];if(M==W||ae!==ve){var ve=ae;Ns(ae)?mp.call(y,ae,1):ch(y,ae)}}return y}function Dp(y,N){return y+yo(Ey()*(N-y+1))}function V0(y,N,M,W){for(var ae=-1,ve=kr(pu((N-y)/(M||1)),0),Me=rt(ve);ve--;)Me[W?ve:++ae]=y,y+=M;return Me}function Qy(y,N){var M="";if(!y||N<1||N>H)return M;do N%2&&(M+=y),N=yo(N/2),N&&(y+=y);while(N);return M}function yn(y,N){return Sh(dx(y,N,Ze),y+"")}function ju(y){return yu(Vu(y))}function Op(y,N){var M=Vu(y);return Ch(M,js(N,0,M.length))}function wu(y,N,M,W){if(!Rr(y))return y;N=No(N,y);for(var ae=-1,ve=N.length,Me=ve-1,ze=y;ze!=null&&++ae<ve;){var Ke=er(N[ae]),ft=M;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return y;if(ae!=Me){var mt=ze[Ke];ft=W?W(mt,Ke,ze):n,ft===n&&(ft=Rr(mt)?mt:Ns(N[ae+1])?[]:{})}sc(ze,Ke,ft),ze=ze[Ke]}return y}var sh=mu?function(y,N){return mu.set(y,N),y}:Ze,oh=Gd?function(y,N){return Gd(y,"toString",{configurable:!0,enumerable:!1,value:Je(N),writable:!0})}:Ze;function H0(y){return Ch(Vu(y))}function Ci(y,N,M){var W=-1,ae=y.length;N<0&&(N=-N>ae?0:ae+N),M=M>ae?ae:M,M<0&&(M+=ae),ae=N>M?0:M-N>>>0,N>>>=0;for(var ve=rt(ae);++W<ae;)ve[W]=y[W+N];return ve}function G0(y,N){var M;return jo(y,function(W,ae,ve){return M=N(W,ae,ve),!M}),!!M}function lh(y,N,M){var W=0,ae=y==null?W:y.length;if(typeof N=="number"&&N===N&&ae<=X){for(;W<ae;){var ve=W+ae>>>1,Me=y[ve];Me!==null&&!Qa(Me)&&(M?Me<=N:Me<N)?W=ve+1:ae=ve}return ae}return Mp(y,N,Ze,M)}function Mp(y,N,M,W){var ae=0,ve=y==null?0:y.length;if(ve===0)return 0;N=M(N);for(var Me=N!==N,ze=N===null,Ke=Qa(N),ft=N===n;ae<ve;){var mt=yo((ae+ve)/2),xt=M(y[mt]),Pt=xt!==n,Bt=xt===null,nn=xt===xt,Sn=Qa(xt);if(Me)var rn=W||nn;else ft?rn=nn&&(W||Pt):ze?rn=nn&&Pt&&(W||!Bt):Ke?rn=nn&&Pt&&!Bt&&(W||!Sn):Bt||Sn?rn=!1:rn=W?xt<=N:xt<N;rn?ae=mt+1:ve=mt}return Or(ve,me)}function Xy(y,N){for(var M=-1,W=y.length,ae=0,ve=[];++M<W;){var Me=y[M],ze=N?N(Me):Me;if(!M||!di(ze,Ke)){var Ke=ze;ve[ae++]=Me===0?0:Me}}return ve}function Ip(y){return typeof y=="number"?y:Qa(y)?L:+y}function si(y){if(typeof y=="string")return y;if(ln(y))return Dr(y,si)+"";if(Qa(y))return il?il.call(y):"";var N=y+"";return N=="0"&&1/y==-1/0?"-0":N}function wo(y,N,M){var W=-1,ae=ap,ve=y.length,Me=!0,ze=[],Ke=ze;if(M)Me=!1,ae=by;else if(ve>=i){var ft=N?null:nj(y);if(ft)return hp(ft);Me=!1,ae=ou,Ke=new vo}else Ke=N?[]:ze;e:for(;++W<ve;){var mt=y[W],xt=N?N(mt):mt;if(mt=M||mt!==0?mt:0,Me&&xt===xt){for(var Pt=Ke.length;Pt--;)if(Ke[Pt]===xt)continue e;N&&Ke.push(xt),ze.push(mt)}else ae(Ke,xt,M)||(Ke!==ze&&Ke.push(xt),ze.push(mt))}return ze}function ch(y,N){return N=No(N,y),y=_u(y,N),y==null||delete y[er(Ra(N))]}function Jy(y,N,M,W){return wu(y,N,M(es(y,N)),W)}function uh(y,N,M,W){for(var ae=y.length,ve=W?ae:-1;(W?ve--:++ve<ae)&&N(y[ve],ve,y););return M?Ci(y,W?0:ve,W?ve+1:ae):Ci(y,W?ve+1:0,W?ae:ve)}function W0(y,N){var M=y;return M instanceof wn&&(M=M.value()),jy(N,function(W,ae){return ae.func.apply(ae.thisArg,go([W],ae.args))},M)}function dh(y,N,M){var W=y.length;if(W<2)return W?wo(y[0]):[];for(var ae=-1,ve=rt(W);++ae<W;)for(var Me=y[ae],ze=-1;++ze<W;)ze!=ae&&(ve[ae]=ol(ve[ae]||Me,y[ze],N,M));return wo(En(ve,1),N,M)}function Zy(y,N,M){for(var W=-1,ae=y.length,ve=N.length,Me={};++W<ae;){var ze=W<ve?N[W]:n;M(Me,y[W],ze)}return Me}function Rp(y){return Qr(y)?y:[]}function hh(y){return typeof y=="function"?y:Ze}function No(y,N){return ln(y)?y:Gp(y,N)?[y]:Ks(Zn(y))}var K0=yn;function cl(y,N,M){var W=y.length;return M=M===n?W:M,!N&&M>=W?y:Ci(y,N,M)}var Y0=gp||function(y){return ea.clearTimeout(y)};function ex(y,N){if(N)return y.slice();var M=y.length,W=Jl?Jl(M):new y.constructor(M);return y.copy(W),W}function dc(y){var N=new y.constructor(y.byteLength);return new fu(N).set(new fu(y)),N}function tx(y,N){var M=N?dc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.byteLength)}function Lp(y){var N=new y.constructor(y.source,yt.exec(y));return N.lastIndex=y.lastIndex,N}function Q0(y){return rc?Vn(rc.call(y)):{}}function nx(y,N){var M=N?dc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.length)}function fh(y,N){if(y!==N){var M=y!==n,W=y===null,ae=y===y,ve=Qa(y),Me=N!==n,ze=N===null,Ke=N===N,ft=Qa(N);if(!ze&&!ft&&!ve&&y>N||ve&&Me&&Ke&&!ze&&!ft||W&&Me&&Ke||!M&&Ke||!ae)return 1;if(!W&&!ve&&!ft&&y<N||ft&&M&&ae&&!W&&!ve||ze&&M&&ae||!Me&&ae||!Ke)return-1}return 0}function X0(y,N,M){for(var W=-1,ae=y.criteria,ve=N.criteria,Me=ae.length,ze=M.length;++W<Me;){var Ke=fh(ae[W],ve[W]);if(Ke){if(W>=ze)return Ke;var ft=M[W];return Ke*(ft=="desc"?-1:1)}}return y.index-N.index}function rx(y,N,M,W){for(var ae=-1,ve=y.length,Me=M.length,ze=-1,Ke=N.length,ft=kr(ve-Me,0),mt=rt(Ke+ft),xt=!W;++ze<Ke;)mt[ze]=N[ze];for(;++ae<Me;)(xt||ae<ve)&&(mt[M[ae]]=y[ae]);for(;ft--;)mt[ze++]=y[ae++];return mt}function J0(y,N,M,W){for(var ae=-1,ve=y.length,Me=-1,ze=M.length,Ke=-1,ft=N.length,mt=kr(ve-ze,0),xt=rt(mt+ft),Pt=!W;++ae<mt;)xt[ae]=y[ae];for(var Bt=ae;++Ke<ft;)xt[Bt+Ke]=N[Ke];for(;++Me<ze;)(Pt||ae<ve)&&(xt[Bt+M[Me]]=y[ae++]);return xt}function ca(y,N){var M=-1,W=y.length;for(N||(N=rt(W));++M<W;)N[M]=y[M];return N}function oi(y,N,M,W){var ae=!M;M||(M={});for(var ve=-1,Me=N.length;++ve<Me;){var ze=N[ve],Ke=W?W(M[ze],y[ze],ze,M,y):n;Ke===n&&(Ke=y[ze]),ae?bs(M,ze,Ke):sc(M,ze,Ke)}return M}function Fp(y,N){return oi(y,bh(y),N)}function ph(y,N){return oi(y,Hp(y),N)}function hc(y,N){return function(M,W){var ae=ln(M)?QS:sl,ve=N?N():{};return ae(M,y,Vt(W,2),ve)}}function fc(y){return yn(function(N,M){var W=-1,ae=M.length,ve=ae>1?M[ae-1]:n,Me=ae>2?M[2]:n;for(ve=y.length>3&&typeof ve=="function"?(ae--,ve):n,Me&&Ya(M[0],M[1],Me)&&(ve=ae<3?n:ve,ae=1),N=Vn(N);++W<ae;){var ze=M[W];ze&&y(N,ze,W,ve)}return N})}function ax(y,N){return function(M,W){if(M==null)return M;if(!da(M))return y(M,W);for(var ae=M.length,ve=N?ae:-1,Me=Vn(M);(N?ve--:++ve<ae)&&W(Me[ve],ve,Me)!==!1;);return M}}function pc(y){return function(N,M,W){for(var ae=-1,ve=Vn(N),Me=W(N),ze=Me.length;ze--;){var Ke=Me[y?ze:++ae];if(M(ve[Ke],Ke,ve)===!1)break}return N}}function Z0(y,N,M){var W=N&w,ae=ts(y);function ve(){var Me=this&&this!==ea&&this instanceof ve?ae:y;return Me.apply(W?M:this,arguments)}return ve}function ki(y){return function(N){N=Zn(N);var M=el(N)?Ki(N):n,W=M?M[0]:N.charAt(0),ae=M?cl(M,1).join(""):N.slice(1);return W[y]()+ae}}function Ka(y){return function(N){return jy(P(Do(N).replace(Fd,"")),y,"")}}function ts(y){return function(){var N=arguments;switch(N.length){case 0:return new y;case 1:return new y(N[0]);case 2:return new y(N[0],N[1]);case 3:return new y(N[0],N[1],N[2]);case 4:return new y(N[0],N[1],N[2],N[3]);case 5:return new y(N[0],N[1],N[2],N[3],N[4]);case 6:return new y(N[0],N[1],N[2],N[3],N[4],N[5]);case 7:return new y(N[0],N[1],N[2],N[3],N[4],N[5],N[6])}var M=_i(y.prototype),W=y.apply(M,N);return Rr(W)?W:M}}function ej(y,N,M){var W=ts(y);function ae(){for(var ve=arguments.length,Me=rt(ve),ze=ve,Ke=gc(ae);ze--;)Me[ze]=arguments[ze];var ft=ve<3&&Me[0]!==Ke&&Me[ve-1]!==Ke?[]:tl(Me,Ke);if(ve-=ft.length,ve<M)return ix(y,N,Kr,ae.placeholder,n,Me,ft,n,n,M-ve);var mt=this&&this!==ea&&this instanceof ae?W:y;return ei(mt,this,Me)}return ae}function So(y){return function(N,M,W){var ae=Vn(N);if(!da(N)){var ve=Vt(M,3);N=fa(N),M=function(ze){return ve(ae[ze],ze,ae)}}var Me=y(N,M,W);return Me>-1?ae[ve?N[Me]:Me]:n}}function Hs(y){return Tr(function(N){var M=N.length,W=M,ae=ri.prototype.thru;for(y&&N.reverse();W--;){var ve=N[W];if(typeof ve!="function")throw new Si(o);if(ae&&!Me&&vh(ve)=="wrapper")var Me=new ri([],!0)}for(W=Me?W:M;++W<M;){ve=N[W];var ze=vh(ve),Ke=ze=="wrapper"?Up(ve):n;Ke&&Wp(Ke[0])&&Ke[1]==(I|C|T|$)&&!Ke[4].length&&Ke[9]==1?Me=Me[vh(Ke[0])].apply(Me,Ke[3]):Me=ve.length==1&&Wp(ve)?Me[ze]():Me.thru(ve)}return function(){var ft=arguments,mt=ft[0];if(Me&&ft.length==1&&ln(mt))return Me.plant(mt).value();for(var xt=0,Pt=M?N[xt].apply(this,ft):mt;++xt<M;)Pt=N[xt].call(this,Pt);return Pt}})}function Kr(y,N,M,W,ae,ve,Me,ze,Ke,ft){var mt=N&I,xt=N&w,Pt=N&_,Bt=N&(C|A),nn=N&U,Sn=Pt?n:ts(y);function rn(){for(var On=arguments.length,Gn=rt(On),Cs=On;Cs--;)Gn[Cs]=arguments[Cs];if(Bt)var Di=gc(rn),ks=r_(Gn,Di);if(W&&(Gn=rx(Gn,W,ae,Bt)),ve&&(Gn=J0(Gn,ve,Me,Bt)),On-=ks,Bt&&On<ft){var pa=tl(Gn,Di);return ix(y,N,Kr,rn.placeholder,M,Gn,pa,ze,Ke,ft-On)}var Oo=xt?M:this,bc=Pt?Oo[y]:y;return On=Gn.length,ze?Gn=Ws(Gn,ze):nn&&On>1&&Gn.reverse(),mt&&Ke<On&&(Gn.length=Ke),this&&this!==ea&&this instanceof rn&&(bc=Sn||ts(bc)),bc.apply(Oo,Gn)}return rn}function mh(y,N){return function(M,W){return zy(M,y,N(W),{})}}function Nu(y,N){return function(M,W){var ae;if(M===n&&W===n)return N;if(M!==n&&(ae=M),W!==n){if(ae===n)return W;typeof M=="string"||typeof W=="string"?(M=si(M),W=si(W)):(M=Ip(M),W=Ip(W)),ae=y(M,W)}return ae}}function gh(y){return Tr(function(N){return N=Dr(N,wi(Vt())),yn(function(M){var W=this;return y(N,function(ae){return ei(ae,W,M)})})})}function yh(y,N){N=N===n?" ":si(N);var M=N.length;if(M<2)return M?Qy(N,y):N;var W=Qy(N,pu(y/qs(N)));return el(N)?cl(Ki(W),0,y).join(""):W.slice(0,y)}function tj(y,N,M,W){var ae=N&w,ve=ts(y);function Me(){for(var ze=-1,Ke=arguments.length,ft=-1,mt=W.length,xt=rt(mt+Ke),Pt=this&&this!==ea&&this instanceof Me?ve:y;++ft<mt;)xt[ft]=W[ft];for(;Ke--;)xt[ft++]=arguments[++ze];return ei(Pt,ae?M:this,xt)}return Me}function ul(y){return function(N,M,W){return W&&typeof W!="number"&&Ya(N,M,W)&&(M=W=n),N=Xs(N),M===n?(M=N,N=0):M=Xs(M),W=W===n?N<M?1:-1:Xs(W),V0(N,M,W,y)}}function mc(y){return function(N,M){return typeof N=="string"&&typeof M=="string"||(N=is(N),M=is(M)),y(N,M)}}function ix(y,N,M,W,ae,ve,Me,ze,Ke,ft){var mt=N&C,xt=mt?Me:n,Pt=mt?n:Me,Bt=mt?ve:n,nn=mt?n:ve;N|=mt?T:E,N&=~(mt?E:T),N&k||(N&=-4);var Sn=[y,N,ae,Bt,xt,nn,Pt,ze,Ke,ft],rn=M.apply(n,Sn);return Wp(y)&&Qp(rn,Sn),rn.placeholder=W,Xp(rn,y,N)}function $p(y){var N=na[y];return function(M,W){if(M=is(M),W=W==null?0:Or(dn(W),292),W&&Wd(M)){var ae=(Zn(M)+"e").split("e"),ve=N(ae[0]+"e"+(+ae[1]+W));return ae=(Zn(ve)+"e").split("e"),+(ae[0]+"e"+(+ae[1]-W))}return N(M)}}var nj=Pn&&1/hp(new Pn([,-0]))[1]==V?function(y){return new Pn(y)}:Lt;function xh(y){return function(N){var M=ya(N);return M==ce?dp(N):M==se?a_(N):n_(N,y(N))}}function Gs(y,N,M,W,ae,ve,Me,ze){var Ke=N&_;if(!Ke&&typeof y!="function")throw new Si(o);var ft=W?W.length:0;if(ft||(N&=-97,W=ae=n),Me=Me===n?Me:kr(dn(Me),0),ze=ze===n?ze:dn(ze),ft-=ae?ae.length:0,N&E){var mt=W,xt=ae;W=ae=n}var Pt=Ke?n:Up(y),Bt=[y,N,M,W,ae,mt,xt,ve,Me,ze];if(Pt&&Nh(Bt,Pt),y=Bt[0],N=Bt[1],M=Bt[2],W=Bt[3],ae=Bt[4],ze=Bt[9]=Bt[9]===n?Ke?0:y.length:kr(Bt[9]-ft,0),!ze&&N&(C|A)&&(N&=-25),!N||N==w)var nn=Z0(y,N,M);else N==C||N==A?nn=ej(y,N,ze):(N==T||N==(w|T))&&!ae.length?nn=tj(y,N,M,W):nn=Kr.apply(n,Bt);var Sn=Pt?sh:Qp;return Xp(Sn(nn,Bt),y,N)}function Bp(y,N,M,W){return y===n||di(y,du[M])&&!Jn.call(W,M)?N:y}function sx(y,N,M,W,ae,ve){return Rr(y)&&Rr(N)&&(ve.set(N,y),ih(y,N,n,sx,ve),ve.delete(N)),y}function rj(y){return as(y)?n:y}function aj(y,N,M,W,ae,ve){var Me=M&b,ze=y.length,Ke=N.length;if(ze!=Ke&&!(Me&&Ke>ze))return!1;var ft=ve.get(y),mt=ve.get(N);if(ft&&mt)return ft==N&&mt==y;var xt=-1,Pt=!0,Bt=M&j?new vo:n;for(ve.set(y,N),ve.set(N,y);++xt<ze;){var nn=y[xt],Sn=N[xt];if(W)var rn=Me?W(Sn,nn,xt,N,y,ve):W(nn,Sn,xt,y,N,ve);if(rn!==n){if(rn)continue;Pt=!1;break}if(Bt){if(!wy(N,function(On,Gn){if(!ou(Bt,Gn)&&(nn===On||ae(nn,On,M,W,ve)))return Bt.push(Gn)})){Pt=!1;break}}else if(!(nn===Sn||ae(nn,Sn,M,W,ve))){Pt=!1;break}}return ve.delete(y),ve.delete(N),Pt}function ij(y,N,M,W,ae,ve,Me){switch(M){case ge:if(y.byteLength!=N.byteLength||y.byteOffset!=N.byteOffset)return!1;y=y.buffer,N=N.buffer;case xe:return!(y.byteLength!=N.byteLength||!ve(new fu(y),new fu(N)));case le:case _e:case be:return di(+y,+N);case De:return y.name==N.name&&y.message==N.message;case de:case re:return y==N+"";case ce:var ze=dp;case se:var Ke=W&b;if(ze||(ze=hp),y.size!=N.size&&!Ke)return!1;var ft=Me.get(y);if(ft)return ft==N;W|=j,Me.set(y,N);var mt=aj(ze(y),ze(N),W,ae,ve,Me);return Me.delete(y),mt;case oe:if(rc)return rc.call(y)==rc.call(N)}return!1}function ga(y,N,M,W,ae,ve){var Me=M&b,ze=zp(y),Ke=ze.length,ft=zp(N),mt=ft.length;if(Ke!=mt&&!Me)return!1;for(var xt=Ke;xt--;){var Pt=ze[xt];if(!(Me?Pt in N:Jn.call(N,Pt)))return!1}var Bt=ve.get(y),nn=ve.get(N);if(Bt&&nn)return Bt==N&&nn==y;var Sn=!0;ve.set(y,N),ve.set(N,y);for(var rn=Me;++xt<Ke;){Pt=ze[xt];var On=y[Pt],Gn=N[Pt];if(W)var Cs=Me?W(Gn,On,Pt,N,y,ve):W(On,Gn,Pt,y,N,ve);if(!(Cs===n?On===Gn||ae(On,Gn,M,W,ve):Cs)){Sn=!1;break}rn||(rn=Pt=="constructor")}if(Sn&&!rn){var Di=y.constructor,ks=N.constructor;Di!=ks&&"constructor"in y&&"constructor"in N&&!(typeof Di=="function"&&Di instanceof Di&&typeof ks=="function"&&ks instanceof ks)&&(Sn=!1)}return ve.delete(y),ve.delete(N),Sn}function Tr(y){return Sh(dx(y,n,ci),y+"")}function zp(y){return F0(y,fa,bh)}function qp(y){return F0(y,xa,Hp)}var Up=mu?function(y){return mu.get(y)}:Lt;function vh(y){for(var N=y.name+"",M=Ji[N],W=Jn.call(Ji,N)?M.length:0;W--;){var ae=M[W],ve=ae.func;if(ve==null||ve==y)return ae.name}return N}function gc(y){var N=Jn.call(fe,"placeholder")?fe:y;return N.placeholder}function Vt(){var y=fe.iteratee||Qt;return y=y===Qt?Vy:y,arguments.length?y(arguments[0],arguments[1]):y}function Su(y,N){var M=y.__data__;return Co(N)?M[typeof N=="string"?"string":"hash"]:M.map}function Vp(y){for(var N=fa(y),M=N.length;M--;){var W=N[M],ae=y[W];N[M]=[W,ae,cj(ae)]}return N}function dl(y,N){var M=_y(y,N);return Vs(M)?M:n}function sj(y){var N=Jn.call(y,Ga),M=y[Ga];try{y[Ga]=n;var W=!0}catch{}var ae=Ha.call(y);return W&&(N?y[Ga]=M:delete y[Ga]),ae}var bh=rl?function(y){return y==null?[]:(y=Vn(y),zs(rl(y),function(N){return Zl.call(y,N)}))}:Q_,Hp=rl?function(y){for(var N=[];y;)go(N,bh(y)),y=Vd(y);return N}:Q_,ya=Dn;(Kd&&ya(new Kd(new ArrayBuffer(1)))!=ge||la&&ya(new la)!=ce||Mr&&ya(Mr.resolve())!=ne||Pn&&ya(new Pn)!=se||vs&&ya(new vs)!=Oe)&&(ya=function(y){var N=Dn(y),M=N==Ce?y.constructor:n,W=M?ko(M):"";if(W)switch(W){case C0:return ge;case k0:return ce;case Yd:return ne;case Qd:return se;case T0:return Oe}return N});function oj(y,N,M){for(var W=-1,ae=M.length;++W<ae;){var ve=M[W],Me=ve.size;switch(ve.type){case"drop":y+=Me;break;case"dropRight":N-=Me;break;case"take":N=Or(N,y+Me);break;case"takeRight":y=kr(y,N-Me);break}}return{start:y,end:N}}function ox(y){var N=y.match(Sa);return N?N[1].split(gn):[]}function jh(y,N,M){N=No(N,y);for(var W=-1,ae=N.length,ve=!1;++W<ae;){var Me=er(N[W]);if(!(ve=y!=null&&M(y,Me)))break;y=y[Me]}return ve||++W!=ae?ve:(ae=y==null?0:y.length,!!ae&&vc(ae)&&Ns(Me,ae)&&(ln(y)||Eo(y)))}function lx(y){var N=y.length,M=new y.constructor(N);return N&&typeof y[0]=="string"&&Jn.call(y,"index")&&(M.index=y.index,M.input=y.input),M}function cx(y){return typeof y.constructor=="function"&&!xr(y)?_i(Vd(y)):{}}function ux(y,N,M){var W=y.constructor;switch(N){case xe:return dc(y);case le:case _e:return new W(+y);case ge:return tx(y,M);case he:case Ie:case nt:case Be:case Ge:case it:case wt:case we:case Qe:return nx(y,M);case ce:return new W;case be:case re:return new W(y);case de:return Lp(y);case se:return new W;case oe:return Q0(y)}}function lj(y,N){var M=N.length;if(!M)return y;var W=M-1;return N[W]=(M>1?"& ":"")+N[W],N=N.join(M>2?", ":" "),y.replace(ta,`{
/* [wrapped with `+N+`] */
`)}function _o(y){return ln(y)||Eo(y)||!!(ti&&y&&y[ti])}function Ns(y,N){var M=typeof y;return N=N??H,!!N&&(M=="number"||M!="symbol"&&_a.test(y))&&y>-1&&y%1==0&&y<N}function Ya(y,N,M){if(!Rr(M))return!1;var W=typeof N;return(W=="number"?da(M)&&Ns(N,M.length):W=="string"&&N in M)?di(M[N],y):!1}function Gp(y,N){if(ln(y))return!1;var M=typeof y;return M=="number"||M=="symbol"||M=="boolean"||y==null||Qa(y)?!0:vt.test(y)||!Qn.test(y)||N!=null&&y in Vn(N)}function Co(y){var N=typeof y;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?y!=="__proto__":y===null}function Wp(y){var N=vh(y),M=fe[N];if(typeof M!="function"||!(N in wn.prototype))return!1;if(y===M)return!0;var W=Up(M);return!!W&&y===W[0]}function Kp(y){return!!Ty&&Ty in y}var wh=qd?Ss:X_;function xr(y){var N=y&&y.constructor,M=typeof N=="function"&&N.prototype||du;return y===M}function cj(y){return y===y&&!Rr(y)}function uj(y,N){return function(M){return M==null?!1:M[y]===N&&(N!==n||y in Vn(M))}}function dj(y){var N=Mh(y,function(W){return M.size===u&&M.clear(),W}),M=N.cache;return N}function Nh(y,N){var M=y[1],W=N[1],ae=M|W,ve=ae<(w|_|I),Me=W==I&&M==C||W==I&&M==$&&y[7].length<=N[8]||W==(I|$)&&N[7].length<=N[8]&&M==C;if(!(ve||Me))return y;W&w&&(y[2]=N[2],ae|=M&w?0:k);var ze=N[3];if(ze){var Ke=y[3];y[3]=Ke?rx(Ke,ze,N[4]):ze,y[4]=Ke?tl(y[3],h):N[4]}return ze=N[5],ze&&(Ke=y[5],y[5]=Ke?J0(Ke,ze,N[6]):ze,y[6]=Ke?tl(y[5],h):N[6]),ze=N[7],ze&&(y[7]=ze),W&I&&(y[8]=y[8]==null?N[8]:Or(y[8],N[8])),y[9]==null&&(y[9]=N[9]),y[0]=N[0],y[1]=ae,y}function hl(y){var N=[];if(y!=null)for(var M in Vn(y))N.push(M);return N}function hj(y){return Ha.call(y)}function dx(y,N,M){return N=kr(N===n?y.length-1:N,0),function(){for(var W=arguments,ae=-1,ve=kr(W.length-N,0),Me=rt(ve);++ae<ve;)Me[ae]=W[N+ae];ae=-1;for(var ze=rt(N+1);++ae<N;)ze[ae]=W[ae];return ze[N]=M(Me),ei(y,this,ze)}}function _u(y,N){return N.length<2?y:es(y,Ci(N,0,-1))}function Ws(y,N){for(var M=y.length,W=Or(N.length,M),ae=ca(y);W--;){var ve=N[W];y[W]=Ns(ve,M)?ae[ve]:n}return y}function Yp(y,N){if(!(N==="constructor"&&typeof y[N]=="function")&&N!="__proto__")return y[N]}var Qp=_h(sh),Cu=Py||function(y,N){return ea.setTimeout(y,N)},Sh=_h(oh);function Xp(y,N,M){var W=N+"";return Sh(y,lj(W,fj(ox(W),M)))}function _h(y){var N=0,M=0;return function(){var W=xo(),ae=G-(W-M);if(M=W,ae>0){if(++N>=z)return arguments[0]}else N=0;return y.apply(n,arguments)}}function Ch(y,N){var M=-1,W=y.length,ae=W-1;for(N=N===n?W:N;++M<N;){var ve=Dp(M,ae),Me=y[ve];y[ve]=y[M],y[M]=Me}return y.length=N,y}var Ks=dj(function(y){var N=[];return y.charCodeAt(0)===46&&N.push(""),y.replace(It,function(M,W,ae,ve){N.push(ae?ve.replace(Fn,"$1"):W||M)}),N});function er(y){if(typeof y=="string"||Qa(y))return y;var N=y+"";return N=="0"&&1/y==-1/0?"-0":N}function ko(y){if(y!=null){try{return Ud.call(y)}catch{}try{return y+""}catch{}}return""}function fj(y,N){return Wi(Re,function(M){var W="_."+M[0];N&M[1]&&!ap(y,W)&&y.push(W)}),y.sort()}function ua(y){if(y instanceof wn)return y.clone();var N=new ri(y.__wrapped__,y.__chain__);return N.__actions__=ca(y.__actions__),N.__index__=y.__index__,N.__values__=y.__values__,N}function p_(y,N,M){(M?Ya(y,N,M):N===n)?N=1:N=kr(dn(N),0);var W=y==null?0:y.length;if(!W||N<1)return[];for(var ae=0,ve=0,Me=rt(pu(W/N));ae<W;)Me[ve++]=Ci(y,ae,ae+=N);return Me}function pj(y){for(var N=-1,M=y==null?0:y.length,W=0,ae=[];++N<M;){var ve=y[N];ve&&(ae[W++]=ve)}return ae}function mj(){var y=arguments.length;if(!y)return[];for(var N=rt(y-1),M=arguments[0],W=y;W--;)N[W-1]=arguments[W];return go(ln(M)?ca(M):[M],En(N,1))}var Ir=yn(function(y,N){return Qr(y)?ol(y,En(N,1,Qr,!0)):[]}),li=yn(function(y,N){var M=Ra(N);return Qr(M)&&(M=n),Qr(y)?ol(y,En(N,1,Qr,!0),Vt(M,2)):[]}),To=yn(function(y,N){var M=Ra(N);return Qr(M)&&(M=n),Qr(y)?ol(y,En(N,1,Qr,!0),n,M):[]});function gj(y,N,M){var W=y==null?0:y.length;return W?(N=M||N===n?1:dn(N),Ci(y,N<0?0:N,W)):[]}function yj(y,N,M){var W=y==null?0:y.length;return W?(N=M||N===n?1:dn(N),N=W-N,Ci(y,0,N<0?0:N)):[]}function m_(y,N){return y&&y.length?uh(y,Vt(N,3),!0,!0):[]}function hx(y,N){return y&&y.length?uh(y,Vt(N,3),!0):[]}function Ti(y,N,M,W){var ae=y==null?0:y.length;return ae?(M&&typeof M!="number"&&Ya(y,N,M)&&(M=0,W=ae),bn(y,N,M,W)):[]}function ns(y,N,M){var W=y==null?0:y.length;if(!W)return-1;var ae=M==null?0:dn(M);return ae<0&&(ae=kr(W+ae,0)),ip(y,Vt(N,3),ae)}function fx(y,N,M){var W=y==null?0:y.length;if(!W)return-1;var ae=W-1;return M!==n&&(ae=dn(M),ae=M<0?kr(W+ae,0):Or(ae,W-1)),ip(y,Vt(N,3),ae,!0)}function ci(y){var N=y==null?0:y.length;return N?En(y,1):[]}function xj(y){var N=y==null?0:y.length;return N?En(y,V):[]}function fl(y,N){var M=y==null?0:y.length;return M?(N=N===n?1:dn(N),En(y,N)):[]}function yc(y){for(var N=-1,M=y==null?0:y.length,W={};++N<M;){var ae=y[N];W[ae[0]]=ae[1]}return W}function Ao(y){return y&&y.length?y[0]:n}function px(y,N,M){var W=y==null?0:y.length;if(!W)return-1;var ae=M==null?0:dn(M);return ae<0&&(ae=kr(W+ae,0)),iu(y,N,ae)}function mx(y){var N=y==null?0:y.length;return N?Ci(y,0,-1):[]}var Ys=yn(function(y){var N=Dr(y,Rp);return N.length&&N[0]===y[0]?By(N):[]}),vj=yn(function(y){var N=Ra(y),M=Dr(y,Rp);return N===Ra(M)?N=n:M.pop(),M.length&&M[0]===y[0]?By(M,Vt(N,2)):[]}),ku=yn(function(y){var N=Ra(y),M=Dr(y,Rp);return N=typeof N=="function"?N:n,N&&M.pop(),M.length&&M[0]===y[0]?By(M,n,N):[]});function kh(y,N){return y==null?"":Qi.call(y,N)}function Ra(y){var N=y==null?0:y.length;return N?y[N-1]:n}function Tu(y,N,M){var W=y==null?0:y.length;if(!W)return-1;var ae=W;return M!==n&&(ae=dn(M),ae=ae<0?kr(W+ae,0):Or(ae,W-1)),N===N?Ni(y,N,ae):ip(y,su,ae,!0)}function bj(y,N){return y&&y.length?Wy(y,dn(N)):n}var jj=yn(Au);function Au(y,N){return y&&y.length&&N&&N.length?Ep(y,N):y}function wj(y,N,M){return y&&y.length&&N&&N.length?Ep(y,N,Vt(M,2)):y}function Jp(y,N,M){return y&&y.length&&N&&N.length?Ep(y,N,n,M):y}var Nj=Tr(function(y,N){var M=y==null?0:y.length,W=th(y,N);return Yy(y,Dr(N,function(ae){return Ns(ae,M)?+ae:ae}).sort(fh)),W});function g_(y,N){var M=[];if(!(y&&y.length))return M;var W=-1,ae=[],ve=y.length;for(N=Vt(N,3);++W<ve;){var Me=y[W];N(Me,W,y)&&(M.push(Me),ae.push(W))}return Yy(y,ae),M}function gx(y){return y==null?y:Dy.call(y)}function ar(y,N,M){var W=y==null?0:y.length;return W?(M&&typeof M!="number"&&Ya(y,N,M)?(N=0,M=W):(N=N==null?0:dn(N),M=M===n?W:dn(M)),Ci(y,N,M)):[]}function wr(y,N){return lh(y,N)}function kn(y,N,M){return Mp(y,N,Vt(M,2))}function Bn(y,N){var M=y==null?0:y.length;if(M){var W=lh(y,N);if(W<M&&di(y[W],N))return W}return-1}function ir(y,N){return lh(y,N,!0)}function Ai(y,N,M){return Mp(y,N,Vt(M,2),!0)}function pl(y,N){var M=y==null?0:y.length;if(M){var W=lh(y,N,!0)-1;if(di(y[W],N))return W}return-1}function Pu(y){return y&&y.length?Xy(y):[]}function yx(y,N){return y&&y.length?Xy(y,Vt(N,2)):[]}function Po(y){var N=y==null?0:y.length;return N?Ci(y,1,N):[]}function Yr(y,N,M){return y&&y.length?(N=M||N===n?1:dn(N),Ci(y,0,N<0?0:N)):[]}function ml(y,N,M){var W=y==null?0:y.length;return W?(N=M||N===n?1:dn(N),N=W-N,Ci(y,N<0?0:N,W)):[]}function xc(y,N){return y&&y.length?uh(y,Vt(N,3),!1,!0):[]}function xx(y,N){return y&&y.length?uh(y,Vt(N,3)):[]}var rs=yn(function(y){return wo(En(y,1,Qr,!0))}),Eu=yn(function(y){var N=Ra(y);return Qr(N)&&(N=n),wo(En(y,1,Qr,!0),Vt(N,2))}),Th=yn(function(y){var N=Ra(y);return N=typeof N=="function"?N:n,wo(En(y,1,Qr,!0),n,N)});function ui(y){return y&&y.length?wo(y):[]}function vx(y,N){return y&&y.length?wo(y,Vt(N,2)):[]}function bx(y,N){return N=typeof N=="function"?N:n,y&&y.length?wo(y,n,N):[]}function Du(y){if(!(y&&y.length))return[];var N=0;return y=zs(y,function(M){if(Qr(M))return N=kr(M.length,N),!0}),Zo(N,function(M){return Dr(y,sp(M))})}function Ah(y,N){if(!(y&&y.length))return[];var M=Du(y);return N==null?M:Dr(M,function(W){return ei(N,n,W)})}var gl=yn(function(y,N){return Qr(y)?ol(y,N):[]}),Ca=yn(function(y){return dh(zs(y,Qr))}),yl=yn(function(y){var N=Ra(y);return Qr(N)&&(N=n),dh(zs(y,Qr),Vt(N,2))}),Ou=yn(function(y){var N=Ra(y);return N=typeof N=="function"?N:n,dh(zs(y,Qr),n,N)}),Mu=yn(Du);function jx(y,N){return Zy(y||[],N||[],sc)}function wx(y,N){return Zy(y||[],N||[],wu)}var Sj=yn(function(y){var N=y.length,M=N>1?y[N-1]:n;return M=typeof M=="function"?(y.pop(),M):n,Ah(y,M)});function Iu(y){var N=fe(y);return N.__chain__=!0,N}function Nx(y,N){return N(y),y}function La(y,N){return N(y)}var _j=Tr(function(y){var N=y.length,M=N?y[0]:0,W=this.__wrapped__,ae=function(ve){return th(ve,y)};return N>1||this.__actions__.length||!(W instanceof wn)||!Ns(M)?this.thru(ae):(W=W.slice(M,+M+(N?1:0)),W.__actions__.push({func:La,args:[ae],thisArg:n}),new ri(W,this.__chain__).thru(function(ve){return N&&!ve.length&&ve.push(n),ve}))});function Pi(){return Iu(this)}function Cj(){return new ri(this.value(),this.__chain__)}function kj(){this.__values__===n&&(this.__values__=Ei(this.value()));var y=this.__index__>=this.__values__.length,N=y?n:this.__values__[this.__index__++];return{done:y,value:N}}function y_(){return this}function xl(y){for(var N,M=this;M instanceof Zi;){var W=ua(M);W.__index__=0,W.__values__=n,N?ae.__wrapped__=W:N=W;var ae=W;M=M.__wrapped__}return ae.__wrapped__=y,N}function Zp(){var y=this.__wrapped__;if(y instanceof wn){var N=y;return this.__actions__.length&&(N=new wn(this)),N=N.reverse(),N.__actions__.push({func:La,args:[gx],thisArg:n}),new ri(N,this.__chain__)}return this.thru(gx)}function Sx(){return W0(this.__wrapped__,this.__actions__)}var Ru=hc(function(y,N,M){Jn.call(y,M)?++y[M]:bs(y,M,1)});function Tj(y,N,M){var W=ln(y)?f0:Fy;return M&&Ya(y,N,M)&&(N=n),W(y,Vt(N,3))}function Aj(y,N){var M=ln(y)?zs:rr;return M(y,Vt(N,3))}var Pj=So(ns),_x=So(fx);function Cx(y,N){return En(Ph(y,N),1)}function x_(y,N){return En(Ph(y,N),V)}function v_(y,N,M){return M=M===n?1:dn(M),En(Ph(y,N),M)}function Ej(y,N){var M=ln(y)?Wi:jo;return M(y,Vt(N,3))}function kx(y,N){var M=ln(y)?XS:Np;return M(y,Vt(N,3))}var Dj=hc(function(y,N,M){Jn.call(y,M)?y[M].push(N):bs(y,M,[N])});function Lu(y,N,M,W){y=da(y)?y:Vu(y),M=M&&!W?dn(M):0;var ae=y.length;return M<0&&(M=kr(ae+M,0)),dm(y)?M<=ae&&y.indexOf(N,M)>-1:!!ae&&iu(y,N,M)>-1}var em=yn(function(y,N,M){var W=-1,ae=typeof N=="function",ve=da(y)?rt(y.length):[];return jo(y,function(Me){ve[++W]=ae?ei(N,Me,M):cc(Me,N,M)}),ve}),Oj=hc(function(y,N,M){bs(y,M,N)});function Ph(y,N){var M=ln(y)?Dr:Hy;return M(y,Vt(N,3))}function Mj(y,N,M,W){return y==null?[]:(ln(N)||(N=N==null?[]:[N]),M=W?n:M,ln(M)||(M=M==null?[]:[M]),Ky(y,N,M))}var Ij=hc(function(y,N,M){y[M?0:1].push(N)},function(){return[[],[]]});function Rj(y,N,M){var W=ln(y)?jy:Sy,ae=arguments.length<3;return W(y,Vt(N,4),M,ae,jo)}function Lj(y,N,M){var W=ln(y)?JS:Sy,ae=arguments.length<3;return W(y,Vt(N,4),M,ae,Np)}function tm(y,N){var M=ln(y)?zs:rr;return M(y,Ih(Vt(N,3)))}function Fj(y){var N=ln(y)?yu:ju;return N(y)}function $j(y,N,M){(M?Ya(y,N,M):N===n)?N=1:N=dn(N);var W=ln(y)?I0:Op;return W(y,N)}function vr(y){var N=ln(y)?R0:H0;return N(y)}function Tx(y){if(y==null)return 0;if(da(y))return dm(y)?qs(y):y.length;var N=ya(y);return N==ce||N==se?y.size:kp(y).length}function b_(y,N,M){var W=ln(y)?wy:G0;return M&&Ya(y,N,M)&&(N=n),W(y,Vt(N,3))}var Bj=yn(function(y,N){if(y==null)return[];var M=N.length;return M>1&&Ya(y,N[0],N[1])?N=[]:M>2&&Ya(N[0],N[1],N[2])&&(N=[N[0]]),Ky(y,En(N,1),[])}),nm=tc||function(){return ea.Date.now()};function j_(y,N){if(typeof N!="function")throw new Si(o);return y=dn(y),function(){if(--y<1)return N.apply(this,arguments)}}function zj(y,N,M){return N=M?n:N,N=y&&N==null?y.length:N,Gs(y,I,n,n,n,n,N)}function Eh(y,N){var M;if(typeof N!="function")throw new Si(o);return y=dn(y),function(){return--y>0&&(M=N.apply(this,arguments)),y<=1&&(N=n),M}}var vl=yn(function(y,N,M){var W=w;if(M.length){var ae=tl(M,gc(vl));W|=T}return Gs(y,W,N,M,ae)}),rm=yn(function(y,N,M){var W=w|_;if(M.length){var ae=tl(M,gc(rm));W|=T}return Gs(N,W,y,M,ae)});function Dh(y,N,M){N=M?n:N;var W=Gs(y,C,n,n,n,n,n,N);return W.placeholder=Dh.placeholder,W}function am(y,N,M){N=M?n:N;var W=Gs(y,A,n,n,n,n,n,N);return W.placeholder=am.placeholder,W}function bl(y,N,M){var W,ae,ve,Me,ze,Ke,ft=0,mt=!1,xt=!1,Pt=!0;if(typeof y!="function")throw new Si(o);N=is(N)||0,Rr(M)&&(mt=!!M.leading,xt="maxWait"in M,ve=xt?kr(is(M.maxWait)||0,N):ve,Pt="trailing"in M?!!M.trailing:Pt);function Bt(pa){var Oo=W,bc=ae;return W=ae=n,ft=pa,Me=y.apply(bc,Oo),Me}function nn(pa){return ft=pa,ze=Cu(On,N),mt?Bt(pa):Me}function Sn(pa){var Oo=pa-Ke,bc=pa-ft,XM=N-Oo;return xt?Or(XM,ve-bc):XM}function rn(pa){var Oo=pa-Ke,bc=pa-ft;return Ke===n||Oo>=N||Oo<0||xt&&bc>=ve}function On(){var pa=nm();if(rn(pa))return Gn(pa);ze=Cu(On,Sn(pa))}function Gn(pa){return ze=n,Pt&&W?Bt(pa):(W=ae=n,Me)}function Cs(){ze!==n&&Y0(ze),ft=0,W=Ke=ae=ze=n}function Di(){return ze===n?Me:Gn(nm())}function ks(){var pa=nm(),Oo=rn(pa);if(W=arguments,ae=this,Ke=pa,Oo){if(ze===n)return nn(Ke);if(xt)return Y0(ze),ze=Cu(On,N),Bt(Ke)}return ze===n&&(ze=Cu(On,N)),Me}return ks.cancel=Cs,ks.flush=Di,ks}var Qs=yn(function(y,N){return oc(y,1,N)}),Oh=yn(function(y,N,M){return oc(y,is(N)||0,M)});function w_(y){return Gs(y,U)}function Mh(y,N){if(typeof y!="function"||N!=null&&typeof N!="function")throw new Si(o);var M=function(){var W=arguments,ae=N?N.apply(this,W):W[0],ve=M.cache;if(ve.has(ae))return ve.get(ae);var Me=y.apply(this,W);return M.cache=ve.set(ae,Me)||ve,Me};return M.cache=new(Mh.Cache||ai),M}Mh.Cache=ai;function Ih(y){if(typeof y!="function")throw new Si(o);return function(){var N=arguments;switch(N.length){case 0:return!y.call(this);case 1:return!y.call(this,N[0]);case 2:return!y.call(this,N[0],N[1]);case 3:return!y.call(this,N[0],N[1],N[2])}return!y.apply(this,N)}}function qj(y){return Eh(2,y)}var Uj=K0(function(y,N){N=N.length==1&&ln(N[0])?Dr(N[0],wi(Vt())):Dr(En(N,1),wi(Vt()));var M=N.length;return yn(function(W){for(var ae=-1,ve=Or(W.length,M);++ae<ve;)W[ae]=N[ae].call(this,W[ae]);return ei(y,this,W)})}),Ax=yn(function(y,N){var M=tl(N,gc(Ax));return Gs(y,T,n,N,M)}),im=yn(function(y,N){var M=tl(N,gc(im));return Gs(y,E,n,N,M)}),Vj=Tr(function(y,N){return Gs(y,$,n,n,n,N)});function Hj(y,N){if(typeof y!="function")throw new Si(o);return N=N===n?N:dn(N),yn(y,N)}function N_(y,N){if(typeof y!="function")throw new Si(o);return N=N==null?0:kr(dn(N),0),yn(function(M){var W=M[N],ae=cl(M,0,N);return W&&go(ae,W),ei(y,this,ae)})}function Px(y,N,M){var W=!0,ae=!0;if(typeof y!="function")throw new Si(o);return Rr(M)&&(W="leading"in M?!!M.leading:W,ae="trailing"in M?!!M.trailing:ae),bl(y,N,{leading:W,maxWait:N,trailing:ae})}function Ex(y){return zj(y,1)}function S_(y,N){return Ax(hh(N),y)}function __(){if(!arguments.length)return[];var y=arguments[0];return ln(y)?y:[y]}function Rh(y){return Ma(y,x)}function C_(y,N){return N=typeof N=="function"?N:n,Ma(y,x,N)}function Gj(y){return Ma(y,p|x)}function Tn(y,N){return N=typeof N=="function"?N:n,Ma(y,p|x,N)}function Dx(y,N){return N==null||Ly(y,N,fa(N))}function di(y,N){return y===N||y!==y&&N!==N}var Ox=mc(nh),Wj=mc(function(y,N){return y>=N}),Eo=Sp(function(){return arguments}())?Sp:function(y){return Vr(y)&&Jn.call(y,"callee")&&!Zl.call(y,"callee")},ln=rt.isArray,sm=rp?wi(rp):ii;function da(y){return y!=null&&vc(y.length)&&!Ss(y)}function Qr(y){return Vr(y)&&da(y)}function k_(y){return y===!0||y===!1||Vr(y)&&Dn(y)==le}var jl=yp||X_,Kj=l0?wi(l0):ra;function Yj(y){return Vr(y)&&y.nodeType===1&&!as(y)}function om(y){if(y==null)return!0;if(da(y)&&(ln(y)||typeof y=="string"||typeof y.splice=="function"||jl(y)||Fu(y)||Eo(y)))return!y.length;var N=ya(y);if(N==ce||N==se)return!y.size;if(xr(y))return!kp(y).length;for(var M in y)if(Jn.call(y,M))return!1;return!0}function ur(y,N){return uc(y,N)}function Mx(y,N,M){M=typeof M=="function"?M:n;var W=M?M(y,N):n;return W===n?uc(y,N,n,M):!!W}function ha(y){if(!Vr(y))return!1;var N=Dn(y);return N==De||N==Ve||typeof y.message=="string"&&typeof y.name=="string"&&!as(y)}function T_(y){return typeof y=="number"&&Wd(y)}function Ss(y){if(!Rr(y))return!1;var N=Dn(y);return N==ue||N==Ae||N==Fe||N==ye}function lm(y){return typeof y=="number"&&y==dn(y)}function vc(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=H}function Rr(y){var N=typeof y;return y!=null&&(N=="object"||N=="function")}function Vr(y){return y!=null&&typeof y=="object"}var cm=c0?wi(c0):_p;function Ix(y,N){return y===N||ah(y,N,Vp(N))}function A_(y,N,M){return M=typeof M=="function"?M:n,ah(y,N,Vp(N),M)}function Qj(y){return Jj(y)&&y!=+y}function P_(y){if(wh(y))throw new tn(s);return Vs(y)}function Xj(y){return y===null}function E_(y){return y==null}function Jj(y){return typeof y=="number"||Vr(y)&&Dn(y)==be}function as(y){if(!Vr(y)||Dn(y)!=Ce)return!1;var N=Vd(y);if(N===null)return!0;var M=Jn.call(N,"constructor")&&N.constructor;return typeof M=="function"&&M instanceof M&&Ud.call(M)==Yi}var um=u0?wi(u0):Cp;function Rx(y){return lm(y)&&y>=-9007199254740991&&y<=H}var Zj=d0?wi(d0):qy;function dm(y){return typeof y=="string"||!ln(y)&&Vr(y)&&Dn(y)==re}function Qa(y){return typeof y=="symbol"||Vr(y)&&Dn(y)==oe}var Fu=h0?wi(h0):Uy;function _s(y){return y===n}function Lx(y){return Vr(y)&&ya(y)==Oe}function e1(y){return Vr(y)&&Dn(y)==J}var t1=mc(Tp),Lh=mc(function(y,N){return y<=N});function Ei(y){if(!y)return[];if(da(y))return dm(y)?Ki(y):ca(y);if(ec&&y[ec])return j0(y[ec]());var N=ya(y),M=N==ce?dp:N==se?hp:Vu;return M(y)}function Xs(y){if(!y)return y===0?y:0;if(y=is(y),y===V||y===-1/0){var N=y<0?-1:1;return N*Q}return y===y?y:0}function dn(y){var N=Xs(y),M=N%1;return N===N?M?N-M:N:0}function Js(y){return y?js(dn(y),0,te):0}function is(y){if(typeof y=="number")return y;if(Qa(y))return L;if(Rr(y)){var N=typeof y.valueOf=="function"?y.valueOf():y;y=Rr(N)?N+"":N}if(typeof y!="string")return y===0?y:+y;y=y0(y);var M=Rt.test(y);return M||$n.test(y)?YS(y.slice(2),M?2:8):St.test(y)?L:+y}function n1(y){return oi(y,xa(y))}function $u(y){return y?js(dn(y),-9007199254740991,H):y===0?y:0}function Zn(y){return y==null?"":si(y)}var D_=fc(function(y,N){if(xr(N)||da(N)){oi(N,fa(N),y);return}for(var M in N)Jn.call(N,M)&&sc(y,M,N[M])}),r1=fc(function(y,N){oi(N,xa(N),y)}),hm=fc(function(y,N,M,W){oi(N,xa(N),y,W)}),O_=fc(function(y,N,M,W){oi(N,fa(N),y,W)}),M_=Tr(th);function I_(y,N){var M=_i(y);return N==null?M:bo(M,N)}var R_=yn(function(y,N){y=Vn(y);var M=-1,W=N.length,ae=W>2?N[2]:n;for(ae&&Ya(N[0],N[1],ae)&&(W=1);++M<W;)for(var ve=N[M],Me=xa(ve),ze=-1,Ke=Me.length;++ze<Ke;){var ft=Me[ze],mt=y[ft];(mt===n||di(mt,du[ft])&&!Jn.call(y,ft))&&(y[ft]=ve[ft])}return y}),a1=yn(function(y){return y.push(n,sx),ei(zh,n,y)});function Bu(y,N){return p0(y,Vt(N,3),Ia)}function Fh(y,N){return p0(y,Vt(N,3),bu)}function i1(y,N){return y==null?y:vu(y,Vt(N,3),xa)}function L_(y,N){return y==null?y:lc(y,Vt(N,3),xa)}function zu(y,N){return y&&Ia(y,Vt(N,3))}function $h(y,N){return y&&bu(y,Vt(N,3))}function s1(y){return y==null?[]:ll(y,fa(y))}function fm(y){return y==null?[]:ll(y,xa(y))}function Bh(y,N,M){var W=y==null?n:es(y,N);return W===n?M:W}function Fx(y,N){return y!=null&&jh(y,N,$y)}function qu(y,N){return y!=null&&jh(y,N,$0)}var o1=mh(function(y,N,M){N!=null&&typeof N.toString!="function"&&(N=Ha.call(N)),y[N]=M},Je(Ze)),l1=mh(function(y,N,M){N!=null&&typeof N.toString!="function"&&(N=Ha.call(N)),Jn.call(y,N)?y[N].push(M):y[N]=[M]},Vt),F_=yn(cc);function fa(y){return da(y)?Ry(y):kp(y)}function xa(y){return da(y)?Ry(y,!0):z0(y)}function $_(y,N){var M={};return N=Vt(N,3),Ia(y,function(W,ae,ve){bs(M,N(W,ae,ve),W)}),M}function B_(y,N){var M={};return N=Vt(N,3),Ia(y,function(W,ae,ve){bs(M,ae,N(W,ae,ve))}),M}var z_=fc(function(y,N,M){ih(y,N,M)}),zh=fc(function(y,N,M,W){ih(y,N,M,W)}),pm=Tr(function(y,N){var M={};if(y==null)return M;var W=!1;N=Dr(N,function(ve){return ve=No(ve,y),W||(W=ve.length>1),ve}),oi(y,qp(y),M),W&&(M=Ma(M,p|m|x,rj));for(var ae=N.length;ae--;)ch(M,N[ae]);return M});function $x(y,N){return Uu(y,Ih(Vt(N)))}var q_=Tr(function(y,N){return y==null?{}:q0(y,N)});function Uu(y,N){if(y==null)return{};var M=Dr(qp(y),function(W){return[W]});return N=Vt(N),Pp(y,M,function(W,ae){return N(W,ae[0])})}function U_(y,N,M){N=No(N,y);var W=-1,ae=N.length;for(ae||(ae=1,y=n);++W<ae;){var ve=y==null?n:y[er(N[W])];ve===n&&(W=ae,ve=M),y=Ss(ve)?ve.call(y):ve}return y}function c1(y,N,M){return y==null?y:wu(y,N,M)}function u1(y,N,M,W){return W=typeof W=="function"?W:n,y==null?y:wu(y,N,M,W)}var Bx=xh(fa),zx=xh(xa);function qx(y,N,M){var W=ln(y),ae=W||jl(y)||Fu(y);if(N=Vt(N,4),M==null){var ve=y&&y.constructor;ae?M=W?new ve:[]:Rr(y)?M=Ss(ve)?_i(Vd(y)):{}:M={}}return(ae?Wi:Ia)(y,function(Me,ze,Ke){return N(M,Me,ze,Ke)}),M}function d1(y,N){return y==null?!0:ch(y,N)}function mm(y,N,M){return y==null?y:Jy(y,N,hh(M))}function V_(y,N,M,W){return W=typeof W=="function"?W:n,y==null?y:Jy(y,N,hh(M),W)}function Vu(y){return y==null?[]:cp(y,fa(y))}function Ux(y){return y==null?[]:cp(y,xa(y))}function Vx(y,N,M){return M===n&&(M=N,N=n),M!==n&&(M=is(M),M=M===M?M:0),N!==n&&(N=is(N),N=N===N?N:0),js(is(y),N,M)}function gm(y,N,M){return N=Xs(N),M===n?(M=N,N=0):M=Xs(M),y=is(y),B0(y,N,M)}function Hx(y,N,M){if(M&&typeof M!="boolean"&&Ya(y,N,M)&&(N=M=n),M===n&&(typeof N=="boolean"?(M=N,N=n):typeof y=="boolean"&&(M=y,y=n)),y===n&&N===n?(y=0,N=1):(y=Xs(y),N===n?(N=y,y=0):N=Xs(N)),y>N){var W=y;y=N,N=W}if(M||y%1||N%1){var ae=Ey();return Or(y+ae*(N-y+zd("1e-"+((ae+"").length-1))),N)}return Dp(y,N)}var h1=Ka(function(y,N,M){return N=N.toLowerCase(),y+(M?ym(N):N)});function ym(y){return S(Zn(y).toLowerCase())}function Do(y){return y=Zn(y),y&&y.replace(bi,up).replace(mo,"")}function wl(y,N,M){y=Zn(y),N=si(N);var W=y.length;M=M===n?W:js(dn(M),0,W);var ae=M;return M-=N.length,M>=0&&y.slice(M,ae)==N}function Nl(y){return y=Zn(y),y&&kt.test(y)?y.replace(Pe,x0):y}function qh(y){return y=Zn(y),y&&Xn.test(y)?y.replace(Gt,"\\$&"):y}var Uh=Ka(function(y,N,M){return y+(M?"-":"")+N.toLowerCase()}),Sl=Ka(function(y,N,M){return y+(M?" ":"")+N.toLowerCase()}),H_=ki("toLowerCase");function f1(y,N,M){y=Zn(y),N=dn(N);var W=N?qs(y):0;if(!N||W>=N)return y;var ae=(N-W)/2;return yh(yo(ae),M)+y+yh(pu(ae),M)}function Vh(y,N,M){y=Zn(y),N=dn(N);var W=N?qs(y):0;return N&&W<N?y+yh(N-W,M):y}function G_(y,N,M){y=Zn(y),N=dn(N);var W=N?qs(y):0;return N&&W<N?yh(N-W,M)+y:y}function p1(y,N,M){return M||N==null?N=0:N&&(N=+N),nc(Zn(y).replace(jr,""),N||0)}function xm(y,N,M){return(M?Ya(y,N,M):N===n)?N=1:N=dn(N),Qy(Zn(y),N)}function m1(){var y=arguments,N=Zn(y[0]);return y.length<3?N:N.replace(y[1],y[2])}var W_=Ka(function(y,N,M){return y+(M?"_":"")+N.toLowerCase()});function vm(y,N,M){return M&&typeof M!="number"&&Ya(y,N,M)&&(N=M=n),M=M===n?te:M>>>0,M?(y=Zn(y),y&&(typeof N=="string"||N!=null&&!um(N))&&(N=si(N),!N&&el(y))?cl(Ki(y),0,M):y.split(N,M)):[]}var bm=Ka(function(y,N,M){return y+(M?" ":"")+S(N)});function g1(y,N,M){return y=Zn(y),M=M==null?0:js(dn(M),0,y.length),N=si(N),y.slice(M,M+N.length)==N}function Hh(y,N,M){var W=fe.templateSettings;M&&Ya(y,N,M)&&(N=n),y=Zn(y),N=hm({},N,W,Bp);var ae=hm({},N.imports,W.imports,Bp),ve=fa(ae),Me=cp(ae,ve),ze,Ke,ft=0,mt=N.interpolate||po,xt="__p += '",Pt=fp((N.escape||po).source+"|"+mt.source+"|"+(mt===Tt?et:po).source+"|"+(N.evaluate||po).source+"|$","g"),Bt="//# sourceURL="+(Jn.call(N,"sourceURL")?(N.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++i0+"]")+`
`;y.replace(Pt,function(rn,On,Gn,Cs,Di,ks){return Gn||(Gn=Cs),xt+=y.slice(ft,ks).replace(Md,v0),On&&(ze=!0,xt+=`' +
__e(`+On+`) +
'`),Di&&(Ke=!0,xt+=`';
`+Di+`;
__p += '`),Gn&&(xt+=`' +
((__t = (`+Gn+`)) == null ? '' : __t) +
'`),ft=ks+rn.length,rn}),xt+=`';
`;var nn=Jn.call(N,"variable")&&N.variable;if(!nn)xt=`with (obj) {
`+xt+`
}
`;else if(An.test(nn))throw new tn(l);xt=(Ke?xt.replace(Xe,""):xt).replace(ut,"$1").replace(Ct,"$1;"),xt="function("+(nn||"obj")+`) {
`+(nn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ze?", __e = _.escape":"")+(Ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xt+`return __p
}`;var Sn=F(function(){return Un(ve,Bt+"return "+xt).apply(n,Me)});if(Sn.source=xt,ha(Sn))throw Sn;return Sn}function Gx(y){return Zn(y).toLowerCase()}function jm(y){return Zn(y).toUpperCase()}function y1(y,N,M){if(y=Zn(y),y&&(M||N===n))return y0(y);if(!y||!(N=si(N)))return y;var W=Ki(y),ae=Ki(N),ve=lu(W,ae),Me=cu(W,ae)+1;return cl(W,ve,Me).join("")}function K_(y,N,M){if(y=Zn(y),y&&(M||N===n))return y.slice(0,Cy(y)+1);if(!y||!(N=si(N)))return y;var W=Ki(y),ae=cu(W,Ki(N))+1;return cl(W,0,ae).join("")}function wm(y,N,M){if(y=Zn(y),y&&(M||N===n))return y.replace(jr,"");if(!y||!(N=si(N)))return y;var W=Ki(y),ae=lu(W,Ki(N));return cl(W,ae).join("")}function d(y,N){var M=B,W=R;if(Rr(N)){var ae="separator"in N?N.separator:ae;M="length"in N?dn(N.length):M,W="omission"in N?si(N.omission):W}y=Zn(y);var ve=y.length;if(el(y)){var Me=Ki(y);ve=Me.length}if(M>=ve)return y;var ze=M-qs(W);if(ze<1)return W;var Ke=Me?cl(Me,0,ze).join(""):y.slice(0,ze);if(ae===n)return Ke+W;if(Me&&(ze+=Ke.length-ze),um(ae)){if(y.slice(ze).search(ae)){var ft,mt=Ke;for(ae.global||(ae=fp(ae.source,Zn(yt.exec(ae))+"g")),ae.lastIndex=0;ft=ae.exec(mt);)var xt=ft.index;Ke=Ke.slice(0,xt===n?ze:xt)}}else if(y.indexOf(si(ae),ze)!=ze){var Pt=Ke.lastIndexOf(ae);Pt>-1&&(Ke=Ke.slice(0,Pt))}return Ke+W}function f(y){return y=Zn(y),y&&ot.test(y)?y.replace(bt,N0):y}var g=Ka(function(y,N,M){return y+(M?" ":"")+N.toUpperCase()}),S=ki("toUpperCase");function P(y,N,M){return y=Zn(y),N=M?n:N,N===n?b0(y)?s_(y):t_(y):y.match(N)||[]}var F=yn(function(y,N){try{return ei(y,n,N)}catch(M){return ha(M)?M:new tn(M)}}),Z=Tr(function(y,N){return Wi(N,function(M){M=er(M),bs(y,M,vl(y[M],y))}),y});function pe(y){var N=y==null?0:y.length,M=Vt();return y=N?Dr(y,function(W){if(typeof W[1]!="function")throw new Si(o);return[M(W[0]),W[1]]}):[],yn(function(W){for(var ae=-1;++ae<N;){var ve=y[ae];if(ei(ve[0],this,W))return ei(ve[1],this,W)}})}function Le(y){return L0(Ma(y,p))}function Je(y){return function(){return y}}function dt(y,N){return y==null||y!==y?N:y}var pt=Hs(),tt=Hs(!0);function Ze(y){return y}function Qt(y){return Vy(typeof y=="function"?y:Ma(y,p))}function Yt(y){return Gy(Ma(y,p))}function dr(y,N){return Ap(y,Ma(N,p))}var We=yn(function(y,N){return function(M){return cc(M,y,N)}}),qe=yn(function(y,N){return function(M){return cc(y,M,N)}});function Ye(y,N,M){var W=fa(N),ae=ll(N,W);M==null&&!(Rr(N)&&(ae.length||!W.length))&&(M=N,N=y,y=this,ae=ll(N,fa(N)));var ve=!(Rr(M)&&"chain"in M)||!!M.chain,Me=Ss(y);return Wi(ae,function(ze){var Ke=N[ze];y[ze]=Ke,Me&&(y.prototype[ze]=function(){var ft=this.__chain__;if(ve||ft){var mt=y(this.__wrapped__),xt=mt.__actions__=ca(this.__actions__);return xt.push({func:Ke,args:arguments,thisArg:y}),mt.__chain__=ft,mt}return Ke.apply(y,go([this.value()],arguments))})}),y}function ht(){return ea._===this&&(ea._=hu),this}function Lt(){}function Nn(y){return y=dn(y),yn(function(N){return Wy(N,y)})}var zt=gh(Dr),Xt=gh(f0),va=gh(wy);function Hn(y){return Gp(y)?sp(er(y)):U0(y)}function _l(y){return function(N){return y==null?n:es(y,N)}}var Y_=ul(),WG=ul(!0);function Q_(){return[]}function X_(){return!1}function KG(){return{}}function YG(){return""}function QG(){return!0}function XG(y,N){if(y=dn(y),y<1||y>H)return[];var M=te,W=Or(y,te);N=Vt(N),y-=te;for(var ae=Zo(W,N);++M<y;)N(M);return ae}function JG(y){return ln(y)?Dr(y,er):Qa(y)?[y]:ca(Ks(Zn(y)))}function ZG(y){var N=++ys;return Zn(y)+N}var eW=Nu(function(y,N){return y+N},0),tW=$p("ceil"),nW=Nu(function(y,N){return y/N},1),rW=$p("floor");function aW(y){return y&&y.length?ws(y,Ze,nh):n}function iW(y,N){return y&&y.length?ws(y,Vt(N,2),nh):n}function sW(y){return m0(y,Ze)}function oW(y,N){return m0(y,Vt(N,2))}function lW(y){return y&&y.length?ws(y,Ze,Tp):n}function cW(y,N){return y&&y.length?ws(y,Vt(N,2),Tp):n}var uW=Nu(function(y,N){return y*N},1),dW=$p("round"),hW=Nu(function(y,N){return y-N},0);function fW(y){return y&&y.length?lp(y,Ze):0}function pW(y,N){return y&&y.length?lp(y,Vt(N,2)):0}return fe.after=j_,fe.ary=zj,fe.assign=D_,fe.assignIn=r1,fe.assignInWith=hm,fe.assignWith=O_,fe.at=M_,fe.before=Eh,fe.bind=vl,fe.bindAll=Z,fe.bindKey=rm,fe.castArray=__,fe.chain=Iu,fe.chunk=p_,fe.compact=pj,fe.concat=mj,fe.cond=pe,fe.conforms=Le,fe.constant=Je,fe.countBy=Ru,fe.create=I_,fe.curry=Dh,fe.curryRight=am,fe.debounce=bl,fe.defaults=R_,fe.defaultsDeep=a1,fe.defer=Qs,fe.delay=Oh,fe.difference=Ir,fe.differenceBy=li,fe.differenceWith=To,fe.drop=gj,fe.dropRight=yj,fe.dropRightWhile=m_,fe.dropWhile=hx,fe.fill=Ti,fe.filter=Aj,fe.flatMap=Cx,fe.flatMapDeep=x_,fe.flatMapDepth=v_,fe.flatten=ci,fe.flattenDeep=xj,fe.flattenDepth=fl,fe.flip=w_,fe.flow=pt,fe.flowRight=tt,fe.fromPairs=yc,fe.functions=s1,fe.functionsIn=fm,fe.groupBy=Dj,fe.initial=mx,fe.intersection=Ys,fe.intersectionBy=vj,fe.intersectionWith=ku,fe.invert=o1,fe.invertBy=l1,fe.invokeMap=em,fe.iteratee=Qt,fe.keyBy=Oj,fe.keys=fa,fe.keysIn=xa,fe.map=Ph,fe.mapKeys=$_,fe.mapValues=B_,fe.matches=Yt,fe.matchesProperty=dr,fe.memoize=Mh,fe.merge=z_,fe.mergeWith=zh,fe.method=We,fe.methodOf=qe,fe.mixin=Ye,fe.negate=Ih,fe.nthArg=Nn,fe.omit=pm,fe.omitBy=$x,fe.once=qj,fe.orderBy=Mj,fe.over=zt,fe.overArgs=Uj,fe.overEvery=Xt,fe.overSome=va,fe.partial=Ax,fe.partialRight=im,fe.partition=Ij,fe.pick=q_,fe.pickBy=Uu,fe.property=Hn,fe.propertyOf=_l,fe.pull=jj,fe.pullAll=Au,fe.pullAllBy=wj,fe.pullAllWith=Jp,fe.pullAt=Nj,fe.range=Y_,fe.rangeRight=WG,fe.rearg=Vj,fe.reject=tm,fe.remove=g_,fe.rest=Hj,fe.reverse=gx,fe.sampleSize=$j,fe.set=c1,fe.setWith=u1,fe.shuffle=vr,fe.slice=ar,fe.sortBy=Bj,fe.sortedUniq=Pu,fe.sortedUniqBy=yx,fe.split=vm,fe.spread=N_,fe.tail=Po,fe.take=Yr,fe.takeRight=ml,fe.takeRightWhile=xc,fe.takeWhile=xx,fe.tap=Nx,fe.throttle=Px,fe.thru=La,fe.toArray=Ei,fe.toPairs=Bx,fe.toPairsIn=zx,fe.toPath=JG,fe.toPlainObject=n1,fe.transform=qx,fe.unary=Ex,fe.union=rs,fe.unionBy=Eu,fe.unionWith=Th,fe.uniq=ui,fe.uniqBy=vx,fe.uniqWith=bx,fe.unset=d1,fe.unzip=Du,fe.unzipWith=Ah,fe.update=mm,fe.updateWith=V_,fe.values=Vu,fe.valuesIn=Ux,fe.without=gl,fe.words=P,fe.wrap=S_,fe.xor=Ca,fe.xorBy=yl,fe.xorWith=Ou,fe.zip=Mu,fe.zipObject=jx,fe.zipObjectDeep=wx,fe.zipWith=Sj,fe.entries=Bx,fe.entriesIn=zx,fe.extend=r1,fe.extendWith=hm,Ye(fe,fe),fe.add=eW,fe.attempt=F,fe.camelCase=h1,fe.capitalize=ym,fe.ceil=tW,fe.clamp=Vx,fe.clone=Rh,fe.cloneDeep=Gj,fe.cloneDeepWith=Tn,fe.cloneWith=C_,fe.conformsTo=Dx,fe.deburr=Do,fe.defaultTo=dt,fe.divide=nW,fe.endsWith=wl,fe.eq=di,fe.escape=Nl,fe.escapeRegExp=qh,fe.every=Tj,fe.find=Pj,fe.findIndex=ns,fe.findKey=Bu,fe.findLast=_x,fe.findLastIndex=fx,fe.findLastKey=Fh,fe.floor=rW,fe.forEach=Ej,fe.forEachRight=kx,fe.forIn=i1,fe.forInRight=L_,fe.forOwn=zu,fe.forOwnRight=$h,fe.get=Bh,fe.gt=Ox,fe.gte=Wj,fe.has=Fx,fe.hasIn=qu,fe.head=Ao,fe.identity=Ze,fe.includes=Lu,fe.indexOf=px,fe.inRange=gm,fe.invoke=F_,fe.isArguments=Eo,fe.isArray=ln,fe.isArrayBuffer=sm,fe.isArrayLike=da,fe.isArrayLikeObject=Qr,fe.isBoolean=k_,fe.isBuffer=jl,fe.isDate=Kj,fe.isElement=Yj,fe.isEmpty=om,fe.isEqual=ur,fe.isEqualWith=Mx,fe.isError=ha,fe.isFinite=T_,fe.isFunction=Ss,fe.isInteger=lm,fe.isLength=vc,fe.isMap=cm,fe.isMatch=Ix,fe.isMatchWith=A_,fe.isNaN=Qj,fe.isNative=P_,fe.isNil=E_,fe.isNull=Xj,fe.isNumber=Jj,fe.isObject=Rr,fe.isObjectLike=Vr,fe.isPlainObject=as,fe.isRegExp=um,fe.isSafeInteger=Rx,fe.isSet=Zj,fe.isString=dm,fe.isSymbol=Qa,fe.isTypedArray=Fu,fe.isUndefined=_s,fe.isWeakMap=Lx,fe.isWeakSet=e1,fe.join=kh,fe.kebabCase=Uh,fe.last=Ra,fe.lastIndexOf=Tu,fe.lowerCase=Sl,fe.lowerFirst=H_,fe.lt=t1,fe.lte=Lh,fe.max=aW,fe.maxBy=iW,fe.mean=sW,fe.meanBy=oW,fe.min=lW,fe.minBy=cW,fe.stubArray=Q_,fe.stubFalse=X_,fe.stubObject=KG,fe.stubString=YG,fe.stubTrue=QG,fe.multiply=uW,fe.nth=bj,fe.noConflict=ht,fe.noop=Lt,fe.now=nm,fe.pad=f1,fe.padEnd=Vh,fe.padStart=G_,fe.parseInt=p1,fe.random=Hx,fe.reduce=Rj,fe.reduceRight=Lj,fe.repeat=xm,fe.replace=m1,fe.result=U_,fe.round=dW,fe.runInContext=He,fe.sample=Fj,fe.size=Tx,fe.snakeCase=W_,fe.some=b_,fe.sortedIndex=wr,fe.sortedIndexBy=kn,fe.sortedIndexOf=Bn,fe.sortedLastIndex=ir,fe.sortedLastIndexBy=Ai,fe.sortedLastIndexOf=pl,fe.startCase=bm,fe.startsWith=g1,fe.subtract=hW,fe.sum=fW,fe.sumBy=pW,fe.template=Hh,fe.times=XG,fe.toFinite=Xs,fe.toInteger=dn,fe.toLength=Js,fe.toLower=Gx,fe.toNumber=is,fe.toSafeInteger=$u,fe.toString=Zn,fe.toUpper=jm,fe.trim=y1,fe.trimEnd=K_,fe.trimStart=wm,fe.truncate=d,fe.unescape=f,fe.uniqueId=ZG,fe.upperCase=g,fe.upperFirst=S,fe.each=Ej,fe.eachRight=kx,fe.first=Ao,Ye(fe,function(){var y={};return Ia(fe,function(N,M){Jn.call(fe.prototype,M)||(y[M]=N)}),y}(),{chain:!1}),fe.VERSION=a,Wi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){fe[y].placeholder=fe}),Wi(["drop","take"],function(y,N){wn.prototype[y]=function(M){M=M===n?1:kr(dn(M),0);var W=this.__filtered__&&!N?new wn(this):this.clone();return W.__filtered__?W.__takeCount__=Or(M,W.__takeCount__):W.__views__.push({size:Or(M,te),type:y+(W.__dir__<0?"Right":"")}),W},wn.prototype[y+"Right"]=function(M){return this.reverse()[y](M).reverse()}}),Wi(["filter","map","takeWhile"],function(y,N){var M=N+1,W=M==K||M==q;wn.prototype[y]=function(ae){var ve=this.clone();return ve.__iteratees__.push({iteratee:Vt(ae,3),type:M}),ve.__filtered__=ve.__filtered__||W,ve}}),Wi(["head","last"],function(y,N){var M="take"+(N?"Right":"");wn.prototype[y]=function(){return this[M](1).value()[0]}}),Wi(["initial","tail"],function(y,N){var M="drop"+(N?"":"Right");wn.prototype[y]=function(){return this.__filtered__?new wn(this):this[M](1)}}),wn.prototype.compact=function(){return this.filter(Ze)},wn.prototype.find=function(y){return this.filter(y).head()},wn.prototype.findLast=function(y){return this.reverse().find(y)},wn.prototype.invokeMap=yn(function(y,N){return typeof y=="function"?new wn(this):this.map(function(M){return cc(M,y,N)})}),wn.prototype.reject=function(y){return this.filter(Ih(Vt(y)))},wn.prototype.slice=function(y,N){y=dn(y);var M=this;return M.__filtered__&&(y>0||N<0)?new wn(M):(y<0?M=M.takeRight(-y):y&&(M=M.drop(y)),N!==n&&(N=dn(N),M=N<0?M.dropRight(-N):M.take(N-y)),M)},wn.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},wn.prototype.toArray=function(){return this.take(te)},Ia(wn.prototype,function(y,N){var M=/^(?:filter|find|map|reject)|While$/.test(N),W=/^(?:head|last)$/.test(N),ae=fe[W?"take"+(N=="last"?"Right":""):N],ve=W||/^find/.test(N);ae&&(fe.prototype[N]=function(){var Me=this.__wrapped__,ze=W?[1]:arguments,Ke=Me instanceof wn,ft=ze[0],mt=Ke||ln(Me),xt=function(On){var Gn=ae.apply(fe,go([On],ze));return W&&Pt?Gn[0]:Gn};mt&&M&&typeof ft=="function"&&ft.length!=1&&(Ke=mt=!1);var Pt=this.__chain__,Bt=!!this.__actions__.length,nn=ve&&!Pt,Sn=Ke&&!Bt;if(!ve&&mt){Me=Sn?Me:new wn(this);var rn=y.apply(Me,ze);return rn.__actions__.push({func:La,args:[xt],thisArg:n}),new ri(rn,Pt)}return nn&&Sn?y.apply(this,ze):(rn=this.thru(xt),nn?W?rn.value()[0]:rn.value():rn)})}),Wi(["pop","push","shift","sort","splice","unshift"],function(y){var N=pp[y],M=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",W=/^(?:pop|shift)$/.test(y);fe.prototype[y]=function(){var ae=arguments;if(W&&!this.__chain__){var ve=this.value();return N.apply(ln(ve)?ve:[],ae)}return this[M](function(Me){return N.apply(ln(Me)?Me:[],ae)})}}),Ia(wn.prototype,function(y,N){var M=fe[N];if(M){var W=M.name+"";Jn.call(Ji,W)||(Ji[W]=[]),Ji[W].push({name:N,func:M})}}),Ji[Kr(n,_).name]=[{name:"wrapper",func:n}],wn.prototype.clone=Xd,wn.prototype.reverse=xp,wn.prototype.value=ac,fe.prototype.at=_j,fe.prototype.chain=Pi,fe.prototype.commit=Cj,fe.prototype.next=kj,fe.prototype.plant=xl,fe.prototype.reverse=Zp,fe.prototype.toJSON=fe.prototype.valueOf=fe.prototype.value=Sx,fe.prototype.first=fe.prototype.head,ec&&(fe.prototype[ec]=y_),fe},nl=uu();Jo?((Jo.exports=nl)._=nl,au._=nl):ea._=nl}).call(nge)}(xv,xv.exports)),xv.exports}var E9=rge();class age{constructor(e){Nr(this,"sampleRate",24e3);Nr(this,"bufferSize",7680);Nr(this,"audioQueue",[]);Nr(this,"isPlaying",!1);Nr(this,"isStreamComplete",!1);Nr(this,"checkInterval",null);Nr(this,"scheduledTime",0);Nr(this,"initialBufferTime",.1);Nr(this,"gainNode");Nr(this,"source");Nr(this,"endOfQueueAudioSource",null);Nr(this,"onComplete",()=>{});this.context=e,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(e,n,a){let i=I1.get(this.context);if(i&&i[e])return i[e].handlers.push(a),Promise.resolve(this);i||(I1.set(this.context,{}),i=I1.get(this.context)),i[e]={handlers:[a]};const s=cE(e,n);await this.context.audioWorklet.addModule(s);const o=new AudioWorkletNode(this.context,e);return i[e].node=o,this}_processPCM16Chunk(e){const n=new Float32Array(e.length/2),a=new DataView(e.buffer);for(let i=0;i<e.length/2;i++)try{const s=a.getInt16(i*2,!0);n[i]=s/32768}catch(s){console.error(s)}return n}addPCM16(e){this.isStreamComplete=!1;let n=this._processPCM16Chunk(e);for(;n.length>=this.bufferSize;){const a=n.slice(0,this.bufferSize);this.audioQueue.push(a),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const n=this.context.createBuffer(1,e.length,this.sampleRate);return n.getChannelData(0).set(e),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),a=this.createAudioBuffer(n),i=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=i,i.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===i&&(this.endOfQueueAudioSource=null,this.onComplete())}),i.buffer=a,i.connect(this.gainNode);const s=I1.get(this.context);s&&Object.entries(s).forEach(([,l])=>{const{node:c,handlers:u}=l;c&&(i.connect(c),c.port.onmessage=function(h){u.forEach(p=>{p.call(c.port,h)})},c.connect(this.context.destination))});const o=Math.max(this.scheduledTime,this.context.currentTime);i.start(o),this.scheduledTime=o+a.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function ige(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"screen",start:async()=>{const l=await navigator.mediaDevices.getDisplayMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}function sge(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"webcam",start:async()=>{const l=await navigator.mediaDevices.getUserMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}class oge extends A9{constructor(n){super();Nr(this,"client");Nr(this,"_status","disconnected");Nr(this,"_session",null);Nr(this,"_model",null);Nr(this,"config",null);this.client=new SO(n),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(n,a){const i={date:new Date,type:n,message:a};this.emit("log",i)}async connect(n,a){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=a,this._model=n;const i={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:n,config:a,callbacks:i})}catch(s){return console.error("Error connecting to GenAI Live:",s),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var n;return this.session?((n=this.session)==null||n.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(n){this.log("server.error",n.message),this.emit("error",n)}onclose(n){this.log("server.close",`disconnected ${n.reason?`with reason: ${n.reason}`:""}`),this.emit("close",n)}async onmessage(n){var a;if(n.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(n.toolCall){this.log("server.toolCall",n),this.emit("toolcall",n.toolCall);return}if(n.toolCallCancellation){this.log("server.toolCallCancellation",n),this.emit("toolcallcancellation",n.toolCallCancellation);return}if(n.serverContent){const{serverContent:i}=n;if("interrupted"in i){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in i&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in i){let s=((a=i.modelTurn)==null?void 0:a.parts)||[];const o=s.filter(h=>{var p;return h.inlineData&&((p=h.inlineData.mimeType)==null?void 0:p.startsWith("audio/pcm"))}),l=o.map(h=>{var p;return(p=h.inlineData)==null?void 0:p.data}),c=E9.difference(s,o);if(l.forEach(h=>{if(h){const p=Yme(h);this.emit("audio",p),this.log("server.audio",`buffer (${p.byteLength})`)}}),!c.length)return;s=c;const u={modelTurn:{parts:s}};this.emit("content",u),this.log("server.content",n)}}else console.log("received unmatched message",n)}sendRealtimeInput(n){var o;let a=!1,i=!1;for(const l of n)if((o=this.session)==null||o.sendRealtimeInput({media:l}),l.mimeType.includes("audio")&&(a=!0),l.mimeType.includes("image")&&(i=!0),a&&i)break;const s=a&&i?"audio + video":a?"audio":i?"video":"unknown";this.log("client.realtimeInput",s)}sendToolResponse(n){var a;n.functionResponses&&n.functionResponses.length&&((a=this.session)==null||a.sendToolResponse({functionResponses:n.functionResponses}),this.log("client.toolResponse",n))}send(n,a=!0){var i;(i=this.session)==null||i.sendClientContent({turns:n,turnComplete:a}),this.log("client.send",{turns:Array.isArray(n)?n:[n],turnComplete:a})}}function lge(t){const e=v.useMemo(()=>new oge(t),[t]),n=v.useRef(null),[a,i]=v.useState("models/gemini-2.5-flash-live-preview"),[s,o]=v.useState({}),[l,c]=v.useState(!1),[u,h]=v.useState(0),p=null;v.useEffect(()=>{n.current||k9({id:"audio-out"}).then(b=>{n.current=new age(b),n.current.addWorklet("vumeter-out",T9,j=>{h(j.data.volume)}).then(()=>{})})},[n]),v.useEffect(()=>{const b=()=>{c(!0)},j=()=>{c(!1)},w=A=>{console.error("error",A)},_=()=>{var A;return(A=n.current)==null?void 0:A.stop()},k=A=>{var T;return(T=n.current)==null?void 0:T.addPCM16(new Uint8Array(A))},C=()=>{};return e.on("error",w).on("open",b).on("close",j).on("interrupted",_).on("audio",k).on("content",C),()=>{e.off("error",w).off("open",b).off("close",j).off("interrupted",_).off("audio",k).off("content",C).disconnect()}},[e]);const m=v.useCallback(async()=>{if(!s)throw new Error("config has not been set");e.disconnect(),await e.connect(a,s)},[e,s,a]),x=v.useCallback(async()=>{e.disconnect(),c(!1)},[c,e]);return{client:e,config:s,setConfig:o,model:a,setModel:i,connected:l,connect:m,disconnect:x,volume:u,aiSummary:p}}const D9=v.createContext(void 0),O9=({options:t,children:e})=>{const n=lge(t);return r.jsx(D9.Provider,{value:n,children:e})},_d=()=>{const t=v.useContext(D9);if(!t)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return t};function cge(){const{config:t,setConfig:e}=_d(),[n,a]=v.useState({value:"audio",label:"audio"}),i=v.useCallback(s=>{e({...t,responseModalities:[s==="audio"?vd.AUDIO:vd.TEXT]})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(C9,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:n,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:s=>{a(s),s&&(s.value==="audio"||s.value==="text")&&i(s.value)}})]})}const j3=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function uge(){const{config:t,setConfig:e}=_d();v.useEffect(()=>{var l,c,u;const s=((u=(c=(l=t.speechConfig)==null?void 0:l.voiceConfig)==null?void 0:c.prebuiltVoiceConfig)==null?void 0:u.voiceName)||"Atari02";a({value:s,label:s})},[t]);const[n,a]=v.useState(j3[5]),i=v.useCallback(s=>{e({...t,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(C9,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:n,defaultValue:n,options:j3,onChange:s=>{a(s),s&&i(s.value)}})]})}function dge(){const[t,e]=v.useState(!1),{config:n,setConfig:a,connected:i}=_d(),s=v.useMemo(()=>Array.isArray(n.tools)?n.tools.filter(u=>Array.isArray(u.functionDeclarations)).map(u=>u.functionDeclarations).filter(u=>!!u).flat():[],[n]),o=v.useMemo(()=>{var u;return n.systemInstruction?typeof n.systemInstruction=="string"?n.systemInstruction:Array.isArray(n.systemInstruction)?n.systemInstruction.map(h=>typeof h=="string"?h:h.text).join(`
`):typeof n.systemInstruction=="object"&&"parts"in n.systemInstruction&&((u=n.systemInstruction.parts)==null?void 0:u.map(h=>h.text).join(`
`))||"":""},[n]),l=v.useCallback(u=>{const h={...n,systemInstruction:u.target.value};a(h)},[n,a]),c=v.useCallback((u,h)=>{var m;const p={...n,tools:((m=n.tools)==null?void 0:m.map(x=>{const b=x;return Array.isArray(b.functionDeclarations)?{...x,functionDeclarations:b.functionDeclarations.map(j=>j.name===u?{...j,description:h}:j)}:x}))||[]};a(p)},[n,a]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>e(!t),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:t?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${i?"disabled":""}`,children:[i&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(cge,{}),r.jsx(uge,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:l,value:o}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:s.map((u,h)=>{var p;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:u.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((p=u.parameters)==null?void 0:p.properties)||{}).map((m,x)=>r.jsx("span",{children:m},x))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:u.description,onBlur:m=>c(u.name,m.target.value)},`fd-${u.description}`)]},`function-${h}`)})})})]})})]})}const w3=v.memo(({isStreaming:t,onIcon:e,offIcon:n,start:a,stop:i})=>t?r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:e})}):r.jsx("button",{className:"action-button",onClick:a,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}));function hge({videoRef:t,children:e,onVideoStreamChange:n=()=>{},supportsVideo:a,enableEditingSettings:i}){const s=[sge(),ige()],[o,l]=v.useState(null),[c,u]=s,[h,p]=v.useState(0),[m]=v.useState(()=>new P9),[x,b]=v.useState(!1),j=v.useRef(null),w=v.useRef(null),{client:_,connected:k,connect:C,disconnect:A,volume:T}=_d();v.useEffect(()=>{!k&&w.current&&w.current.focus()},[k]),v.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(h*200,8))}px`)},[h]),v.useEffect(()=>{const I=$=>{_.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:$}])};return k&&!x&&m?m.on("data",I).on("volume",p).start():m.stop(),()=>{m.off("data",I).off("volume",p)}},[k,_,x,m]),v.useEffect(()=>{t.current&&(t.current.srcObject=o);let I=-1;function $(){const U=t.current,B=j.current;if(!U||!B)return;const R=B.getContext("2d");if(B.width=U.videoWidth*.25,B.height=U.videoHeight*.25,B.width+B.height>0){R.drawImage(U,0,0,B.width,B.height);const z=B.toDataURL("image/jpeg",1),G=z.slice(z.indexOf(",")+1,1/0);_.sendRealtimeInput([{mimeType:"image/jpeg",data:G}])}k&&(I=window.setTimeout($,1e3/.5))}return k&&o!==null&&requestAnimationFrame($),()=>{clearTimeout(I)}},[k,o,_,t]);const E=I=>async()=>{if(I){const $=await I.start();l($),n($)}else l(null),n(null);s.filter($=>$!==I).forEach($=>$.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:j}),r.jsxs("nav",{className:cd("actions-nav",{disabled:!k}),children:[r.jsx("button",{className:cd("action-button mic-button",{recording:!x&&k}),onClick:()=>b(!x),children:x?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx(tge,{volume:T,active:k,hover:!1})}),a&&r.jsxs(r.Fragment,{children:[r.jsx(w3,{isStreaming:u.isStreaming,start:E(u),stop:E(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(w3,{isStreaming:c.isStreaming,start:E(c),stop:E(),onIcon:"videocam_off",offIcon:"videocam"})]}),e]}),r.jsxs("div",{className:cd("connection-container",{connected:k}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:w,className:cd("action-button connect-toggle",{connected:k}),onClick:k?A:C,children:r.jsx("span",{className:"material-symbols-outlined filled",children:k?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),i?r.jsx(dge,{}):""]})}const N3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:dg.OBJECT,properties:{summary:{type:dg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},fge=({patientData:t,tokenNumber:e})=>{const[n,a]=v.useState(""),{client:i,setConfig:s,setModel:o}=_d();return v.useEffect(()=>{o("models/gemini-2.5-flash-live-preview"),s({responseModalities:[vd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[N3]}]})},[s,o]),v.useEffect(()=>{const l=c=>{if(!c.functionCalls)return;const u=c.functionCalls.find(h=>h.name===N3.name);if(u){const h=u.args.summary;a(h)}c.functionCalls.length&&setTimeout(()=>{var h;return i.sendToolResponse({functionResponses:(h=c.functionCalls)==null?void 0:h.map(p=>({response:{output:{success:!0}},id:p.id,name:p.name}))})},200)};return i.on("toolcall",l),()=>{i.off("toolcall",l)}},[i]),v.useEffect(()=>{if(n){const l=encodeURIComponent(n);e?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${e}&caseDetails=${l}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${l}`}},[n,e]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),e&&r.jsxs("h2",{children:["Token Number: ",e]}),t&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(t,null,2)})]}),n&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:n})]})]})},S3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function pge(){if(!_O())return console.warn("No auth token found, using default Live API key."),S3;try{const e=await ie("/api/clinics/gemini-api-keys");if(e.ok){const a=(await e.json()).keys||[];if(a.length>0){const i=a[Math.floor(Math.random()*a.length)];return console.log(`[LiveApiPage] Using random clinic Gemini key from pool of ${a.length} keys.`),i}}}catch(e){console.warn("Could not fetch clinic multi-key pool.",e)}try{const e=await ie("/api/clinics/gemini-api-key");if(e.ok){const a=(await e.json()).geminiApiKey;if(a)return a}}catch(e){console.error("Failed to fetch clinic-specific Live API key:",e)}try{const e=await ie("/api/global-settings/gemini-api-keys");if(e.ok){const a=(await e.json()).keys||[];if(a.length>0){const i=a[Math.floor(Math.random()*a.length)];return console.log(`[LiveApiPage] Using random Gemini key from pool of ${a.length} keys.`),i}}}catch(e){console.warn("Could not fetch multi-key pool.",e)}return console.warn("Clinic-specific Live API key not found, using default."),S3}function mge(){const t=v.useRef(null),[e,n]=v.useState(null),[a,i]=v.useState(null);return v.useEffect(()=>{(async()=>{try{const o=await pge();i({apiKey:o})}catch(o){console.error("Error setting Live API options:",o)}})()},[]),a?r.jsx("div",{className:"App",children:r.jsx(O9,{options:a,children:r.jsx(gge,{videoRef:t,setVideoStream:n,videoStream:e})})}):r.jsx("div",{children:"Loading Live API settings..."})}const gge=({videoRef:t,setVideoStream:e,videoStream:n})=>{const[a,i]=v.useState(null),[s,o]=v.useState(null),{connected:l,client:c,connect:u,config:h,model:p}=_d(),[m,x]=v.useState(""),b=v.useRef(null),[j,w]=v.useState(!1);v.useEffect(()=>{const k=window.matchMedia("(prefers-color-scheme: dark)"),C=A=>{document.documentElement.setAttribute("data-theme",A.matches?"dark":"light")};return C(k),k.addEventListener("change",C),()=>k.removeEventListener("change",C)},[]),v.useEffect(()=>{const k=new URLSearchParams(window.location.search),C={};for(const[A,T]of k.entries())A==="token_number"?o(T):C[A]=T;i(C)},[]),v.useEffect(()=>{Object.keys(h).length>0&&p&&u()},[u,h,p]),v.useEffect(()=>{if(l&&a&&!j){const k=JSON.stringify(a,null,2);c.send([{text:k}]),x(""),w(!0)}},[l,a,c,j]),v.useEffect(()=>{a&&x(JSON.stringify(a,null,2))},[a]);const _=()=>{c.send([{text:m}]),x(""),b.current&&(b.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx(fge,{patientData:a,tokenNumber:s}),r.jsx("video",{className:cd("stream",{hidden:!t.current||!n}),ref:t,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:cd("input-container",{disabled:!l}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:b,onKeyDown:k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),k.stopPropagation(),_())},onChange:k=>x(k.target.value),value:m}),r.jsx("span",{className:cd("input-content-placeholder",{hidden:m.length}),children:"Typesomething..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:_,children:"send"})]})}),r.jsx(hge,{videoRef:t,supportsVideo:!0,onVideoStreamChange:e,enableEditingSettings:!0})]})})},_3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",M9=({isActive:t,volume:e,size:n="normal"})=>{const a=t&&e>.01,i=a?Math.max(3,Math.min(12,3+e*30)):3,s=n==="mini";return r.jsx("div",{className:`ai-avatar-container ${t?"active":""} ${s?"mini":""}`,children:r.jsxs("svg",{viewBox:"0 0 200 200",className:"ai-avatar-svg",children:[r.jsxs("defs",{children:[r.jsxs("radialGradient",{id:`avatarGlow${s?"Mini":""}`,cx:"50%",cy:"50%",r:"50%",children:[r.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:a?.5:t?.3:.1}),r.jsx("stop",{offset:"100%",stopColor:"#059669",stopOpacity:"0"})]}),r.jsxs("linearGradient",{id:`hairGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#1e1b4b"}),r.jsx("stop",{offset:"100%",stopColor:"#312e81"})]}),r.jsxs("linearGradient",{id:`skinGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd5ce"}),r.jsx("stop",{offset:"100%",stopColor:"#f9bbb2"})]}),r.jsxs("linearGradient",{id:`coatGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),r.jsx("stop",{offset:"100%",stopColor:"#f1f5f9"})]}),r.jsxs("linearGradient",{id:`scrubsGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#0ea5e9"}),r.jsx("stop",{offset:"100%",stopColor:"#0284c7"})]})]}),r.jsx("circle",{cx:"100",cy:"100",r:"95",fill:`url(#avatarGlow${s?"Mini":""})`,className:"avatar-glow"}),r.jsx("circle",{cx:"100",cy:"100",r:"85",fill:"#ecfdf5",stroke:"#a7f3d0",strokeWidth:"2"}),r.jsx("ellipse",{cx:"100",cy:"185",rx:"55",ry:"35",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#e2e8f0",strokeWidth:"1"}),r.jsx("path",{d:"M75 155 L85 175 L90 155",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#cbd5e1",strokeWidth:"1"}),r.jsx("path",{d:"M125 155 L115 175 L110 155",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#cbd5e1",strokeWidth:"1"}),r.jsx("path",{d:"M90 155 L100 165 L110 155 L110 175 L90 175 Z",fill:`url(#scrubsGradient${s?"Mini":""})`}),r.jsx("path",{d:"M70 165 Q65 155 75 145",stroke:"#374151",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M130 165 Q135 155 125 145",stroke:"#374151",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),r.jsx("circle",{cx:"70",cy:"168",r:"5",fill:"#374151"}),r.jsx("circle",{cx:"70",cy:"168",r:"3",fill:"#6b7280"}),r.jsx("circle",{cx:"130",cy:"168",r:"5",fill:"#374151"}),r.jsx("circle",{cx:"130",cy:"168",r:"3",fill:"#6b7280"}),r.jsx("path",{d:"M77 145 Q85 140 90 145",stroke:"#374151",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M123 145 Q115 140 110 145",stroke:"#374151",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"100",cy:"70",rx:"42",ry:"35",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("rect",{x:"90",y:"130",width:"20",height:"25",fill:`url(#skinGradient${s?"Mini":""})`,rx:"5"}),r.jsx("ellipse",{cx:"100",cy:"92",rx:"35",ry:"38",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("path",{d:"M58 75 Q60 90 65 95 L68 85 Q65 75 58 75",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M142 75 Q140 90 135 95 L132 85 Q135 75 142 75",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M60 70 Q80 50 115 55 Q135 60 140 70 Q120 45 80 45 Q60 55 60 70",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M78 80 Q84 78 90 80",stroke:"#3d3d5c",strokeWidth:"1.2",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M110 80 Q116 78 122 80",stroke:"#3d3d5c",strokeWidth:"1.2",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"84",cy:"90",rx:"9",ry:"10",fill:"white"}),r.jsx("ellipse",{cx:"116",cy:"90",rx:"9",ry:"10",fill:"white"}),r.jsx("circle",{cx:"84",cy:"91",r:"6",fill:"#2d4a3e",children:r.jsx("animate",{attributeName:"cy",values:"91;90;91",dur:"4s",repeatCount:"indefinite"})}),r.jsx("circle",{cx:"116",cy:"91",r:"6",fill:"#2d4a3e",children:r.jsx("animate",{attributeName:"cy",values:"91;90;91",dur:"4s",repeatCount:"indefinite"})}),r.jsx("circle",{cx:"84",cy:"91",r:"3",fill:"#1a1a2e"}),r.jsx("circle",{cx:"116",cy:"91",r:"3",fill:"#1a1a2e"}),r.jsx("ellipse",{cx:"86",cy:"88",rx:"2.5",ry:"3",fill:"white"}),r.jsx("ellipse",{cx:"118",cy:"88",rx:"2.5",ry:"3",fill:"white"}),r.jsx("circle",{cx:"82",cy:"93",r:"1",fill:"white",opacity:"0.7"}),r.jsx("circle",{cx:"114",cy:"93",r:"1",fill:"white",opacity:"0.7"}),r.jsx("ellipse",{cx:"70",cy:"102",rx:"7",ry:"4",fill:"#ffb5b5",opacity:"0.5"}),r.jsx("ellipse",{cx:"130",cy:"102",rx:"7",ry:"4",fill:"#ffb5b5",opacity:"0.5"}),r.jsx("path",{d:"M100 97 L99 102",stroke:"#daa89b",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"100",cy:"112",rx:a?5:6,ry:i,fill:"#d4726a"}),!a&&r.jsx("path",{d:"M94 110 Q100 116 106 110",stroke:"#d4726a",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"63",cy:"90",rx:"4",ry:"6",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("ellipse",{cx:"137",cy:"90",rx:"4",ry:"6",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("circle",{cx:"135",cy:"165",r:"8",fill:"#ef4444"}),r.jsx("rect",{x:"133",y:"160",width:"4",height:"10",fill:"white",rx:"1"}),r.jsx("rect",{x:"130",y:"163",width:"10",height:"4",fill:"white",rx:"1"}),a&&r.jsxs(r.Fragment,{children:[r.jsxs("circle",{cx:"100",cy:"100",r:"90",stroke:"#10b981",strokeWidth:"2",fill:"none",opacity:"0.6",children:[r.jsx("animate",{attributeName:"r",values:"90;95;90",dur:"1.5s",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"opacity",values:"0.6;0.2;0.6",dur:"1.5s",repeatCount:"indefinite"})]}),r.jsxs("circle",{cx:"100",cy:"100",r:"95",stroke:"#34d399",strokeWidth:"1.5",fill:"none",opacity:"0.4",children:[r.jsx("animate",{attributeName:"r",values:"95;100;95",dur:"1.5s",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"opacity",values:"0.4;0.1;0.4",dur:"1.5s",repeatCount:"indefinite"})]})]})]})})},yge=v.forwardRef(({videoRef:t,supportsVideo:e,onVideoStreamChange:n,textInput:a,onSubmitTextInput:i},s)=>{var E;const{connected:o,connect:l,disconnect:c,client:u,volume:h}=_d(),[p,m]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState(!1),[_]=v.useState(()=>new P9),k=async()=>{o?await c():(await l(),a.trim()&&i())};v.useEffect(()=>{const I=$=>{u.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:$}])};return o&&!p?_.on("data",I).start():_.stop(),()=>{_.off("data",I),_.stop()}},[o,u,p,_]);const C=v.useCallback(async()=>{if(x)T==null||T.getTracks().forEach(I=>I.stop()),n(null),b(!1);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),b(!0)}catch(I){console.error("Error accessing webcam:",I),b(!1)}},[x,n,t]),A=v.useCallback(async()=>{if(j)T==null||T.getTracks().forEach(I=>I.stop()),n(null),w(!1);else try{const I=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),w(!0)}catch(I){console.error("Error accessing screen share:",I),w(!1)}},[j,n,t]),T=(E=t.current)==null?void 0:E.srcObject;return v.useEffect(()=>()=>{T&&T.getTracks().forEach(I=>I.stop())},[T]),v.useImperativeHandle(s,()=>({handleConnect:k})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>m(!p),disabled:!o,className:`live-api-control-button ${o&&!p?"mic-active":"mic-inactive"}`,"aria-label":p?"Unmute microphone":"Mute microphone",children:p?r.jsx(vJ,{className:"w-5 h-5"}):r.jsx(KN,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-mini-avatar-container",children:r.jsx(M9,{isActive:o,volume:h,size:"mini"})}),e&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:A,disabled:!o,className:`live-api-control-button ${j?"video-active":"video-inactive"}`,"aria-label":j?"Stop screen share":"Start screen share",children:r.jsx(SJ,{className:"w-5 h-5"})}),r.jsx("button",{onClick:C,disabled:!o,className:`live-api-control-button ${x?"video-active":"video-inactive"}`,"aria-label":x?"Turn off webcam":"Turn on webcam",children:r.jsx(TZ,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${o?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:o?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:k,className:`live-api-connect-button ${o?"connected":"disconnected"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(OJ,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(fq,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),xge=({tokenNumber:t,aiSummary:e,clinicName:n,isActive:a,volume:i})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-avatar-section",children:[r.jsx(M9,{isActive:a,volume:i}),r.jsx("div",{className:"avatar-status-text",children:a?"Listening...":"Ready to assist"})]}),r.jsxs("div",{className:"hospital-reception-info-section",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:n.charAt(0)})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"hospital-reception-title",children:[n," AI"]}),r.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",n," Reception Assistant"]})]})]}),t&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:t})]}),e&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:e})]})]})]}),C3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:dg.OBJECT,properties:{summary:{type:dg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},vge=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:i,voiceAiLanguage:s,lastMotionTimestamp:o,backgroundMode:l})=>{const c=v.useRef(null),u=v.useRef(null),[h,p]=v.useState(null),[m,x]=v.useState("hi"),{client:b,connected:j,setConfig:w,setModel:_,disconnect:k,connect:C,volume:A}=_d(),T=v.useRef(!1),E=v.useRef(Date.now()),I=v.useRef(!1);v.useEffect(()=>{T.current=j,j&&(E.current=Date.now(),I.current=!1)},[j]),v.useEffect(()=>{if(o){if(E.current=Date.now(),T.current)return;j||C()}},[o,C,j]),v.useEffect(()=>{if(!o||!j)return;const K=setInterval(()=>{const q=Date.now()-E.current;q>25e3&&q<3e4&&!I.current&&(I.current=!0,b.send([{text:"I'll be here if you need more help!"}])),q>3e4&&(console.log("No motion for 30s. Disconnecting session."),k(),t())},1e3);return()=>clearInterval(K)},[o,j,b,k,t]);const $=v.useMemo(()=>{let K=`Your job is to:

If patient details like name, age, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (Name, Age) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's Name and Age only. Do not ask for their phone number.

    You should guess the patient's sex based on their voice or appearance.

For every visit, collect the patient's history by asking questions.

CRITICAL WORKFLOW - DO NOT USE THE 'case_summary' TOOL YET.

Phase 1: History Collection (MANDATORY LOOP)
Once you have the basics, you MUST ask the patient about their complaints.
- Ask clarifying questions to understand the onset, duration, severity, and associated symptoms.
- DO NOT just accept a one-line complaint.
- Loop your questions until you are confident you have a complete medical history.

Phase 2: Billing Check Protocol
ONLY after you are confident you have the complete history, proceed to the Billing Check Protocol immediately:
1. Ask: 'Would you like to get the tests done?'
   - IF PATIENT SAYS YES: STOP questioning. Do NOT mention medications (they will get them after reports).
     Result -> Lab: Yes, Pharmacy: No.
   - IF PATIENT SAYS NO: Ask: 'Would you like to get the medications?'
     - IF YES: Result -> Lab: No, Pharmacy: Yes.
     - IF NO: Result -> Lab: No, Pharmacy: No.

Phase 3: Final Summary
Only AFTER establishing the billing preferences as per the logic above, you MUST call the 'case_summary' tool IMMEDIATELY.

CRITICAL INSTRUCTION: DO NOT output the summary as spoken text or thoughts. You MUST using the function call \`case_summary\`.

The 'case_summary' MUST be comprehensive and include:
- Patient Name, Age, Sex
- Medical History & Complaints
- Billing Preferences (e.g., 'Billing Preference: Lab - Yes, Pharmacy - No')

Do not call the tool multiple times. Wait until you have ALL the info, then generate the single final summary tool call. Do not say goodbye before calling the tool.`;e&&(K+=`

Patient Data: ${JSON.stringify(e,null,2)}`);const q={"en-US":"English","hi-IN":"Hindi","te-IN":"Telugu","bn-IN":"Bengali","mr-IN":"Marathi","ta-IN":"Tamil","gu-IN":"Gujarati","kn-IN":"Kannada","ml-IN":"Malayalam","pa-IN":"Punjabi","es-ES":"Spanish","fr-FR":"French","de-DE":"German","it-IT":"Italian","pt-PT":"Portuguese","ru-RU":"Russian","ja-JP":"Japanese","ko-KR":"Korean","zh-CN":"Chinese","ar-SA":"Arabic"}[s]||"English";return K+=` You should always speak in ${q}.`,s==="te-IN"&&(K+=" Dont write the telugu words in english."),{responseModalities:[vd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:K}]},tools:[{functionDeclarations:[C3]}]}},[e,s]);v.useEffect(()=>{if(_("models/gemini-2.5-flash-native-audio-preview-12-2025"),w($),!o){const K=setTimeout(()=>{u.current&&!j&&u.current.handleConnect()},2e3);return()=>clearTimeout(K)}},[w,_,$,j,o]),v.useEffect(()=>()=>{j&&k()},[j,k]);const[U,B]=v.useState(null);v.useEffect(()=>{const K=Y=>{if(!Y.functionCalls)return;const q=Y.functionCalls.find(V=>V.name===C3.name);if(q){const V=q.args.summary;B(V),a(V),setTimeout(()=>{k(),t()},1e3)}Y.functionCalls.length&&setTimeout(()=>{var V;return b.sendToolResponse({functionResponses:(V=Y.functionCalls)==null?void 0:V.map(H=>({response:{output:{success:!0}},id:H.id,name:H.name}))})},200)};return b.on("toolcall",K),()=>{b.off("toolcall",K)}},[b,a]);const R=()=>{m.trim()&&(b.send([{text:m}]),x(""))},z=K=>{K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),R())},G=async()=>{B(null),a(null),x("hi"),j?(k(),setTimeout(()=>{C()},500)):C()};return r.jsx("div",{className:"live-api-modal-overlay",style:l?{opacity:0,pointerEvents:"none",position:"absolute",zIndex:-1}:{},children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:i.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:i}),r.jsxs("p",{className:"live-api-modal-subtitle",children:[i," Hospital Assistant"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:G,className:"live-api-modal-close-button",title:"Refresh Session","aria-label":"Refresh session",children:r.jsx(pq,{className:"w-5 h-5"})}),r.jsx("button",{onClick:t,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx(Ot,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(xge,{patientData:e,tokenNumber:n,aiSummary:U,clinicName:i,isActive:j,volume:A}),h&&r.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:m,onChange:K=>x(K.target.value),onKeyDown:z,placeholder:"Type your message here...",disabled:!j,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:R,disabled:!j||!m.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx(Lb,{className:"w-5 h-5"})})]})}),r.jsx(yge,{ref:u,videoRef:c,supportsVideo:!0,onVideoStreamChange:p,textInput:m,onSubmitTextInput:R})]})})]})})},cS=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,lastMotionTimestamp:i,backgroundMode:s})=>{const[o,l]=v.useState(null),[c,u]=v.useState("Newtons Ai"),[h,p]=v.useState("en-US"),[m,x]=v.useState(!0);if(v.useEffect(()=>{(async()=>{try{let w=null,_="Newtons Ai",k="en-US";try{try{const A=await ie("/api/clinics/gemini-api-keys");if(A.ok){const E=(await A.json()).keys||[];E.length>0&&(w=E[Math.floor(Math.random()*E.length)],console.log(`[LiveAPI] Using random clinic Gemini key from pool of ${E.length} keys.`))}}catch(A){console.warn("Could not fetch clinic multi-key pool",A)}const C=await ie("/api/clinics/settings");if(C.ok){const A=await C.json();A.name&&A.name!==""&&(_=A.name),!w&&A.gemini_api_key&&A.gemini_api_key.trim()!==""&&(w=A.gemini_api_key.trim()),A.voice_ai_language&&(k=A.voice_ai_language)}}catch(C){console.warn("Failed to fetch clinic settings",C)}if(u(_),p(k),w)l(w);else{try{const C=await ie("/api/global-settings/gemini-api-keys");if(C.ok){const T=(await C.json()).keys||[];if(T.length>0){const E=T[Math.floor(Math.random()*T.length)];console.log(`[LiveAPI] Using random Gemini key from pool of ${T.length} keys.`),l(E);return}}}catch(C){console.warn("Failed to fetch multi-key pool",C)}try{const C=await ie("/api/global-settings/app_gemini_api_key");if(C.ok){const A=await C.json();if(A.value&&A.value.trim()!==""){l(A.value.trim());return}}}catch(C){console.warn("Failed to fetch global key fallback",C)}l(_3)}}catch(w){console.error("Unexpected error in getSettings:",w),l(_3)}finally{x(!1)}})()},[]),m)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsx("div",{className:"live-api-modal-header",style:{borderBottom:"none"},children:r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx(ee,{variant:"circular",width:40,height:40}),r.jsxs("div",{style:{marginLeft:"12px"},children:[r.jsx(ee,{width:120,height:24}),r.jsx(ee,{width:180,height:14,style:{marginTop:"4px"}})]})]})}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx(ee,{variant:"circular",width:64,height:64,style:{margin:"0 auto"}}),r.jsx(ee,{width:200,height:32,style:{margin:"16px auto 8px"}}),r.jsx(ee,{width:250,height:16,style:{margin:"0 auto"}})]}),r.jsxs("div",{className:"hospital-reception-token-card",style:{background:"transparent",boxShadow:"none"},children:[r.jsx(ee,{width:140,height:20,style:{margin:"0 auto 8px"}}),r.jsx(ee,{width:100,height:48,style:{margin:"0 auto"}})]})]})}),r.jsx("div",{className:"live-api-control-tray",style:{position:"relative"},children:r.jsx("div",{className:"live-api-control-tray-inner",style:{justifyContent:"center"},children:r.jsx("div",{className:"live-api-loading-text",children:"Initializing AI Assistant..."})})})]})});if(!o)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Error: API Key not available."})})});const b={apiKey:o};return r.jsx(O9,{options:b,children:r.jsx(vge,{onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:c,voiceAiLanguage:h,lastMotionTimestamp:i,backgroundMode:s})})},uS=()=>{const[t,e]=v.useState(null),[n,a]=v.useState(!0),[i,s]=v.useState(null),o=v.useCallback(async()=>{a(!0),s(null);try{const c=await ie("/api/clinics/settings");if(!c.ok)throw new Error("Failed to fetch clinic settings");const u=await c.json();e(u)}catch(c){s(c instanceof Error?c.message:"An error occurred")}finally{a(!1)}},[]);v.useEffect(()=>{o()},[o]);const l=(t==null?void 0:t.custom_columns_config)||{};return{settings:t,customColumnsConfig:l,loading:n,error:i,refetch:o}},bge="_overlay_79cew_5",jge="_overlayMinimized_79cew_55",wge="_modal_79cew_65",Nge="_minimized_79cew_97",Sge="_contentWrapper_79cew_113",_ge="_exiting_79cew_161",Cge="_header_79cew_183",kge="_inputWrapper_79cew_197",Tge="_inputContainer_79cew_215",Age="_minimizedSearchIcon_79cew_273",Pge="_input_79cew_197",Ege="_controlsGroup_79cew_347",Dge="_iconButton_79cew_373",Oge="_sendButton_79cew_413",Mge="_dragBar_79cew_459",Ige="_dragBarTitle_79cew_489",Rge="_dragBarControls_79cew_519",Lge="_dragBarControlsRight_79cew_537",Fge="_newChatBtn_79cew_553",$ge="_windowControlBtn_79cew_589",Bge="_content_79cew_113",zge="_overlayContent_79cew_687",qge="_section_79cew_711",Uge="_sectionTitle_79cew_723",Vge="_recentList_79cew_743",Hge="_recentPill_79cew_767",Gge="_recentName_79cew_807",Wge="_recentToken_79cew_819",Kge="_recentInfo_79cew_837",Yge="_examplesGrid_79cew_849",Qge="_exampleCard_79cew_861",Xge="_exampleIcon_79cew_897",Jge="_exampleText_79cew_905",Zge="_chatSectionFill_79cew_919",eye="_chatMessagesFill_79cew_935",tye="_chatBubble_79cew_955",nye="_chatBubbleUser_79cew_975",rye="_chatBubbleModel_79cew_991",aye="_chatBubbleSystem_79cew_1009",iye="_processing_79cew_1025",sye="_spinner_79cew_1043",oye="_resultItem_79cew_1065",lye="_resultName_79cew_1093",cye="_resultToken_79cew_1103",uye="_resultDetails_79cew_1115",dye="_noResults_79cew_1125",Ft={overlay:bge,overlayMinimized:jge,modal:wge,minimized:Nge,contentWrapper:Sge,exiting:_ge,header:Cge,inputWrapper:kge,inputContainer:Tge,minimizedSearchIcon:Age,input:Pge,controlsGroup:Ege,iconButton:Dge,sendButton:Oge,dragBar:Mge,dragBarTitle:Ige,dragBarControls:Rge,dragBarControlsRight:Lge,newChatBtn:Fge,windowControlBtn:$ge,content:Bge,overlayContent:zge,section:qge,sectionTitle:Uge,recentList:Vge,recentPill:Hge,recentName:Gge,recentToken:Wge,recentInfo:Kge,examplesGrid:Yge,exampleCard:Qge,exampleIcon:Xge,exampleText:Jge,chatSectionFill:Zge,chatMessagesFill:eye,chatBubble:tye,chatBubbleUser:nye,chatBubbleModel:rye,chatBubbleSystem:aye,processing:iye,spinner:sye,resultItem:oye,resultName:lye,resultToken:cye,resultDetails:uye,noResults:dye};var BC,k3;function Cd(){if(k3)return BC;k3=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return BC=t,BC}var zC,T3;function I9(){if(T3)return zC;T3=1;var t=typeof io=="object"&&io&&io.Object===Object&&io;return zC=t,zC}var qC,A3;function Gl(){if(A3)return qC;A3=1;var t=I9(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return qC=n,qC}var UC,P3;function hye(){if(P3)return UC;P3=1;var t=Gl(),e=function(){return t.Date.now()};return UC=e,UC}var VC,E3;function fye(){if(E3)return VC;E3=1;var t=/\s/;function e(n){for(var a=n.length;a--&&t.test(n.charAt(a)););return a}return VC=e,VC}var HC,D3;function pye(){if(D3)return HC;D3=1;var t=fye(),e=/^\s+/;function n(a){return a&&a.slice(0,t(a)+1).replace(e,"")}return HC=n,HC}var GC,O3;function Vb(){if(O3)return GC;O3=1;var t=Gl(),e=t.Symbol;return GC=e,GC}var WC,M3;function mye(){if(M3)return WC;M3=1;var t=Vb(),e=Object.prototype,n=e.hasOwnProperty,a=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),c=o[i];try{o[i]=void 0;var u=!0}catch{}var h=a.call(o);return u&&(l?o[i]=c:delete o[i]),h}return WC=s,WC}var KC,I3;function gye(){if(I3)return KC;I3=1;var t=Object.prototype,e=t.toString;function n(a){return e.call(a)}return KC=n,KC}var YC,R3;function Qc(){if(R3)return YC;R3=1;var t=Vb(),e=mye(),n=gye(),a="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:a:s&&s in Object(l)?e(l):n(l)}return YC=o,YC}var QC,L3;function Xc(){if(L3)return QC;L3=1;function t(e){return e!=null&&typeof e=="object"}return QC=t,QC}var XC,F3;function Kg(){if(F3)return XC;F3=1;var t=Qc(),e=Xc(),n="[object Symbol]";function a(i){return typeof i=="symbol"||e(i)&&t(i)==n}return XC=a,XC}var JC,$3;function R9(){if($3)return JC;$3=1;var t=pye(),e=Cd(),n=Kg(),a=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return a;if(e(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=e(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=t(u);var p=s.test(u);return p||o.test(u)?l(u.slice(2),p?2:8):i.test(u)?a:+u}return JC=c,JC}var ZC,B3;function L9(){if(B3)return ZC;B3=1;var t=Cd(),e=hye(),n=R9(),a="Expected a function",i=Math.max,s=Math.min;function o(l,c,u){var h,p,m,x,b,j,w=0,_=!1,k=!1,C=!0;if(typeof l!="function")throw new TypeError(a);c=n(c)||0,t(u)&&(_=!!u.leading,k="maxWait"in u,m=k?i(n(u.maxWait)||0,c):m,C="trailing"in u?!!u.trailing:C);function A(G){var K=h,Y=p;return h=p=void 0,w=G,x=l.apply(Y,K),x}function T(G){return w=G,b=setTimeout($,c),_?A(G):x}function E(G){var K=G-j,Y=G-w,q=c-K;return k?s(q,m-Y):q}function I(G){var K=G-j,Y=G-w;return j===void 0||K>=c||K<0||k&&Y>=m}function $(){var G=e();if(I(G))return U(G);b=setTimeout($,E(G))}function U(G){return b=void 0,C&&h?A(G):(h=p=void 0,x)}function B(){b!==void 0&&clearTimeout(b),w=0,h=j=p=b=void 0}function R(){return b===void 0?x:U(e())}function z(){var G=e(),K=I(G);if(h=arguments,p=this,j=G,K){if(b===void 0)return T(j);if(k)return clearTimeout(b),b=setTimeout($,c),A(j)}return b===void 0&&(b=setTimeout($,c)),x}return z.cancel=B,z.flush=R,z}return ZC=o,ZC}var yye=L9();const FO=Kn(yye),Hb=({columns:t,data:e,onSave:n,onRowAdd:a,onRowDelete:i,onRowClick:s,onRowHover:o,editable:l=!0,showRowNumbers:c=!0,title:u})=>{const[h,p]=v.useState(e),[m,x]=v.useState(null),[b,j]=v.useState(""),[w,_]=v.useState(""),[k,C]=v.useState(null),[A,T]=v.useState(!1),[E,I]=v.useState(new Set);Te.useEffect(()=>{p(e),T(!1)},[e]);const $=v.useMemo(()=>{let q=[...h];if(w.trim()){const V=w.toLowerCase();q=q.filter(H=>Object.values(H).some(Q=>Q!=null&&String(Q).toLowerCase().includes(V)))}return k&&q.sort((V,H)=>{const Q=V[k.key],L=H[k.key];return Q==null?1:L==null?-1:Q<L?k.direction==="asc"?-1:1:Q>L?k.direction==="asc"?1:-1:0}),q},[h,w,k]),U=(q,V)=>{var Q;if(!l)return;const H=t.find(L=>L.key===V);(H==null?void 0:H.editable)!==!1&&(x({row:q,col:V}),j(String(((Q=h[q])==null?void 0:Q[V])??"")))},B=()=>{var q;if(m){const V=[...h],H=t.find(L=>L.key===m.col);let Q=b;(H==null?void 0:H.type)==="number"&&(Q=parseFloat(Q)||0),(H==null?void 0:H.type)==="boolean"&&(Q=Q.toLowerCase()==="true"||Q==="1"),((q=V[m.row])==null?void 0:q[m.col])!==Q&&(V[m.row]={...V[m.row],[m.col]:Q},p(V),T(!0))}x(null)},R=q=>{if(q.key==="Enter")B();else if(q.key==="Escape")x(null);else if(q.key==="Tab"&&(q.preventDefault(),B(),m)){const V=t.findIndex(Q=>Q.key===m.col),H=t[V+1];H?setTimeout(()=>U(m.row,H.key),0):m.row<h.length-1&&setTimeout(()=>U(m.row+1,t[0].key),0)}},z=q=>{C(V=>(V==null?void 0:V.key)===q?V.direction==="asc"?{key:q,direction:"desc"}:null:{key:q,direction:"asc"})},G=()=>{n&&(n(h),T(!1))},K=()=>{const q=t.map(me=>me.label).join(","),V=h.map(me=>t.map(X=>{const Re=me[X.key];return typeof Re=="string"&&Re.includes(",")?`"${Re}"`:Re}).join(",")),H=[q,...V].join(`
`),Q=new Blob([H],{type:"text/csv"}),L=URL.createObjectURL(Q),te=document.createElement("a");te.href=L,te.download=`${u||"data"}.csv`,te.click()},Y=q=>{const V=new Set(E);V.has(q)?V.delete(q):V.add(q),I(V)};return r.jsxs("div",{className:"excel-grid",children:[r.jsxs("div",{className:"excel-toolbar",children:[r.jsxs("div",{className:"excel-search",children:[r.jsx("input",{type:"text",placeholder:" Search...",value:w,onChange:q=>_(q.target.value)}),w&&r.jsx("button",{className:"clear-search",onClick:()=>_(""),children:r.jsx(Ot,{size:14})})]}),r.jsxs("div",{className:"excel-actions",children:[a&&r.jsxs("button",{onClick:a,className:"excel-btn",title:"Add Row",children:[r.jsx(Ln,{size:16})," Add"]}),r.jsxs("button",{onClick:K,className:"excel-btn",title:"Export CSV",children:[r.jsx(RX,{size:16})," Export"]}),l&&n&&r.jsxs("button",{onClick:G,className:`excel-btn save-btn ${A?"has-changes":""}`,disabled:!A,title:"Save Changes",children:[r.jsx(qi,{size:16})," Save"]})]})]}),r.jsxs("div",{className:"excel-status",children:[w&&r.jsxs("span",{children:["Showing ",$.length," of ",h.length]}),A&&r.jsx("span",{className:"unsaved-indicator",children:" Unsaved changes"})]}),r.jsx("div",{className:"excel-table-wrapper",children:r.jsxs("table",{className:"excel-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[c&&r.jsx("th",{className:"row-num-header",children:"#"}),t.map(q=>r.jsx("th",{onClick:()=>z(q.key),style:{width:q.width,cursor:"pointer"},children:r.jsxs("div",{className:"th-content",children:[q.label,(k==null?void 0:k.key)===q.key&&(k.direction==="asc"?r.jsx(xX,{size:14}):r.jsx(sq,{size:14}))]})},q.key)),i&&r.jsx("th",{className:"action-col",children:""})]})}),r.jsx("tbody",{children:$.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:t.length+(c?1:0)+(i?1:0),className:"no-data",children:"No data found"})}):$.map((q,V)=>r.jsxs("tr",{className:`${E.has(V)?"selected":""} ${s?"clickable-row":""}`,onClick:()=>s&&s(q,V),onMouseEnter:()=>o&&o(q,V),style:s?{cursor:"pointer"}:void 0,children:[c&&r.jsx("td",{className:"row-num",onClick:()=>Y(V),children:V+1}),t.map(H=>r.jsx("td",{onClick:()=>U(V,H.key),className:`
                                                ${(m==null?void 0:m.row)===V&&(m==null?void 0:m.col)===H.key?"editing":""}
                                                ${H.editable===!1?"read-only":""}
                                            `,children:(m==null?void 0:m.row)===V&&(m==null?void 0:m.col)===H.key?r.jsx("input",{type:H.type==="number"?"number":"text",value:b,onChange:Q=>j(Q.target.value),onBlur:B,onKeyDown:R,autoFocus:!0}):r.jsx("span",{children:q[H.key]??""})},H.key)),i&&r.jsx("td",{className:"action-col",children:r.jsx("button",{className:"delete-row",onClick:()=>i(V),children:r.jsx(Ot,{size:14})})})]},q.id||V))})]})}),r.jsxs("div",{className:"excel-footer",children:[r.jsxs("span",{children:[h.length," rows"]}),E.size>0&&r.jsxs("span",{children:[E.size," selected"]})]})]})};function F9(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=F9(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function mn(){for(var t,e,n=0,a="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=F9(t))&&(a&&(a+=" "),a+=e);return a}var e2,z3;function gs(){if(z3)return e2;z3=1;var t=Array.isArray;return e2=t,e2}var t2,q3;function $O(){if(q3)return t2;q3=1;var t=gs(),e=Kg(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:a.test(s)||!n.test(s)||o!=null&&s in Object(o)}return t2=i,t2}var n2,U3;function BO(){if(U3)return n2;U3=1;var t=Qc(),e=Cd(),n="[object AsyncFunction]",a="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==a||c==i||c==n||c==s}return n2=o,n2}var r2,V3;function xye(){if(V3)return r2;V3=1;var t=Gl(),e=t["__core-js_shared__"];return r2=e,r2}var a2,H3;function vye(){if(H3)return a2;H3=1;var t=xye(),e=function(){var a=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function n(a){return!!e&&e in a}return a2=n,a2}var i2,G3;function $9(){if(G3)return i2;G3=1;var t=Function.prototype,e=t.toString;function n(a){if(a!=null){try{return e.call(a)}catch{}try{return a+""}catch{}}return""}return i2=n,i2}var s2,W3;function bye(){if(W3)return s2;W3=1;var t=BO(),e=vye(),n=Cd(),a=$9(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,h=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!n(m)||e(m))return!1;var x=t(m)?h:s;return x.test(a(m))}return s2=p,s2}var o2,K3;function jye(){if(K3)return o2;K3=1;function t(e,n){return e==null?void 0:e[n]}return o2=t,o2}var l2,Y3;function qf(){if(Y3)return l2;Y3=1;var t=bye(),e=jye();function n(a,i){var s=e(a,i);return t(s)?s:void 0}return l2=n,l2}var c2,Q3;function dS(){if(Q3)return c2;Q3=1;var t=qf(),e=t(Object,"create");return c2=e,c2}var u2,X3;function wye(){if(X3)return u2;X3=1;var t=dS();function e(){this.__data__=t?t(null):{},this.size=0}return u2=e,u2}var d2,J3;function Nye(){if(J3)return d2;J3=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return d2=t,d2}var h2,Z3;function Sye(){if(Z3)return h2;Z3=1;var t=dS(),e="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return a.call(o,s)?o[s]:void 0}return h2=i,h2}var f2,e5;function _ye(){if(e5)return f2;e5=1;var t=dS(),e=Object.prototype,n=e.hasOwnProperty;function a(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return f2=a,f2}var p2,t5;function Cye(){if(t5)return p2;t5=1;var t=dS(),e="__lodash_hash_undefined__";function n(a,i){var s=this.__data__;return this.size+=this.has(a)?0:1,s[a]=t&&i===void 0?e:i,this}return p2=n,p2}var m2,n5;function kye(){if(n5)return m2;n5=1;var t=wye(),e=Nye(),n=Sye(),a=_ye(),i=Cye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,m2=s,m2}var g2,r5;function Tye(){if(r5)return g2;r5=1;function t(){this.__data__=[],this.size=0}return g2=t,g2}var y2,a5;function zO(){if(a5)return y2;a5=1;function t(e,n){return e===n||e!==e&&n!==n}return y2=t,y2}var x2,i5;function hS(){if(i5)return x2;i5=1;var t=zO();function e(n,a){for(var i=n.length;i--;)if(t(n[i][0],a))return i;return-1}return x2=e,x2}var v2,s5;function Aye(){if(s5)return v2;s5=1;var t=hS(),e=Array.prototype,n=e.splice;function a(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return v2=a,v2}var b2,o5;function Pye(){if(o5)return b2;o5=1;var t=hS();function e(n){var a=this.__data__,i=t(a,n);return i<0?void 0:a[i][1]}return b2=e,b2}var j2,l5;function Eye(){if(l5)return j2;l5=1;var t=hS();function e(n){return t(this.__data__,n)>-1}return j2=e,j2}var w2,c5;function Dye(){if(c5)return w2;c5=1;var t=hS();function e(n,a){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,a])):i[s][1]=a,this}return w2=e,w2}var N2,u5;function fS(){if(u5)return N2;u5=1;var t=Tye(),e=Aye(),n=Pye(),a=Eye(),i=Dye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,N2=s,N2}var S2,d5;function qO(){if(d5)return S2;d5=1;var t=qf(),e=Gl(),n=t(e,"Map");return S2=n,S2}var _2,h5;function Oye(){if(h5)return _2;h5=1;var t=kye(),e=fS(),n=qO();function a(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return _2=a,_2}var C2,f5;function Mye(){if(f5)return C2;f5=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return C2=t,C2}var k2,p5;function pS(){if(p5)return k2;p5=1;var t=Mye();function e(n,a){var i=n.__data__;return t(a)?i[typeof a=="string"?"string":"hash"]:i.map}return k2=e,k2}var T2,m5;function Iye(){if(m5)return T2;m5=1;var t=pS();function e(n){var a=t(this,n).delete(n);return this.size-=a?1:0,a}return T2=e,T2}var A2,g5;function Rye(){if(g5)return A2;g5=1;var t=pS();function e(n){return t(this,n).get(n)}return A2=e,A2}var P2,y5;function Lye(){if(y5)return P2;y5=1;var t=pS();function e(n){return t(this,n).has(n)}return P2=e,P2}var E2,x5;function Fye(){if(x5)return E2;x5=1;var t=pS();function e(n,a){var i=t(this,n),s=i.size;return i.set(n,a),this.size+=i.size==s?0:1,this}return E2=e,E2}var D2,v5;function UO(){if(v5)return D2;v5=1;var t=Oye(),e=Iye(),n=Rye(),a=Lye(),i=Fye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,D2=s,D2}var O2,b5;function B9(){if(b5)return O2;b5=1;var t=UO(),e="Expected a function";function n(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var u=a.apply(this,o);return s.cache=c.set(l,u)||c,u};return s.cache=new(n.Cache||t),s}return n.Cache=t,O2=n,O2}var M2,j5;function $ye(){if(j5)return M2;j5=1;var t=B9(),e=500;function n(a){var i=t(a,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return M2=n,M2}var I2,w5;function Bye(){if(w5)return I2;w5=1;var t=$ye(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,u){s.push(c?u.replace(n,"$1"):l||o)}),s});return I2=a,I2}var R2,N5;function VO(){if(N5)return R2;N5=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=Array(i);++a<i;)s[a]=n(e[a],a,e);return s}return R2=t,R2}var L2,S5;function zye(){if(S5)return L2;S5=1;var t=Vb(),e=VO(),n=gs(),a=Kg(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(a(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return L2=o,L2}var F2,_5;function z9(){if(_5)return F2;_5=1;var t=zye();function e(n){return n==null?"":t(n)}return F2=e,F2}var $2,C5;function q9(){if(C5)return $2;C5=1;var t=gs(),e=$O(),n=Bye(),a=z9();function i(s,o){return t(s)?s:e(s,o)?[s]:n(a(s))}return $2=i,$2}var B2,k5;function mS(){if(k5)return B2;k5=1;var t=Kg();function e(n){if(typeof n=="string"||t(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return B2=e,B2}var z2,T5;function HO(){if(T5)return z2;T5=1;var t=q9(),e=mS();function n(a,i){i=t(i,a);for(var s=0,o=i.length;a!=null&&s<o;)a=a[e(i[s++])];return s&&s==o?a:void 0}return z2=n,z2}var q2,A5;function U9(){if(A5)return q2;A5=1;var t=HO();function e(n,a,i){var s=n==null?void 0:t(n,a);return s===void 0?i:s}return q2=e,q2}var qye=U9();const Fs=Kn(qye);var U2,P5;function Uye(){if(P5)return U2;P5=1;function t(e){return e==null}return U2=t,U2}var Vye=Uye();const hn=Kn(Vye);var V2,E5;function Hye(){if(E5)return V2;E5=1;var t=Qc(),e=gs(),n=Xc(),a="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==a}return V2=i,V2}var Gye=Hye();const Df=Kn(Gye);var Wye=BO();const on=Kn(Wye);var Kye=Cd();const Yg=Kn(Kye);var H2={exports:{}},fr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D5;function Yye(){if(D5)return fr;D5=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function j(w){if(typeof w=="object"&&w!==null){var _=w.$$typeof;switch(_){case t:switch(w=w.type,w){case n:case i:case a:case u:case h:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case c:case m:case p:case s:return w;default:return _}}case e:return _}}}return fr.ContextConsumer=o,fr.ContextProvider=s,fr.Element=t,fr.ForwardRef=c,fr.Fragment=n,fr.Lazy=m,fr.Memo=p,fr.Portal=e,fr.Profiler=i,fr.StrictMode=a,fr.Suspense=u,fr.SuspenseList=h,fr.isAsyncMode=function(){return!1},fr.isConcurrentMode=function(){return!1},fr.isContextConsumer=function(w){return j(w)===o},fr.isContextProvider=function(w){return j(w)===s},fr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},fr.isForwardRef=function(w){return j(w)===c},fr.isFragment=function(w){return j(w)===n},fr.isLazy=function(w){return j(w)===m},fr.isMemo=function(w){return j(w)===p},fr.isPortal=function(w){return j(w)===e},fr.isProfiler=function(w){return j(w)===i},fr.isStrictMode=function(w){return j(w)===a},fr.isSuspense=function(w){return j(w)===u},fr.isSuspenseList=function(w){return j(w)===h},fr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===i||w===a||w===u||w===h||w===x||typeof w=="object"&&w!==null&&(w.$$typeof===m||w.$$typeof===p||w.$$typeof===s||w.$$typeof===o||w.$$typeof===c||w.$$typeof===b||w.getModuleId!==void 0)},fr.typeOf=j,fr}var O5;function Qye(){return O5||(O5=1,H2.exports=Yye()),H2.exports}var Xye=Qye(),G2,M5;function V9(){if(M5)return G2;M5=1;var t=Qc(),e=Xc(),n="[object Number]";function a(i){return typeof i=="number"||e(i)&&t(i)==n}return G2=a,G2}var W2,I5;function Jye(){if(I5)return W2;I5=1;var t=V9();function e(n){return t(n)&&n!=+n}return W2=e,W2}var Zye=Jye();const Qg=Kn(Zye);var exe=V9();const txe=Kn(exe);var Fi=function(e){return e===0?0:e>0?1:-1},af=function(e){return Df(e)&&e.indexOf("%")===e.length-1},Nt=function(e){return txe(e)&&!Qg(e)},nxe=function(e){return hn(e)},Ea=function(e){return Nt(e)||Df(e)},rxe=0,Uf=function(e){var n=++rxe;return"".concat(e||"").concat(n)},$i=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Nt(e)&&!Df(e))return a;var s;if(af(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Qg(s)&&(s=a),i&&s>n&&(s=n),s},Zu=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},axe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,a={},i=0;i<n;i++)if(!a[e[i]])a[e[i]]=!0;else return!0;return!1},Pa=function(e,n){return Nt(e)&&Nt(n)?function(a){return e+a*(n-e)}:function(){return n}};function Fw(t,e,n){return!t||!t.length?null:t.find(function(a){return a&&(typeof e=="function"?e(a):Fs(a,e))===n})}var ixe=function(e,n){return Nt(e)&&Nt(n)?e-n:Df(e)&&Df(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Hm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var a in e)if({}.hasOwnProperty.call(e,a)&&!{}.hasOwnProperty.call(t,a))return!1;return!0}function uE(t){"@babel/helpers - typeof";return uE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uE(t)}var sxe=["viewBox","children"],oxe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],R5=["points","pathLength"],K2={svg:sxe,polygon:R5,polyline:R5},GO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],$w=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(v.isValidElement(e)&&(a=e.props),!Yg(a))return null;var i={};return Object.keys(a).forEach(function(s){GO.includes(s)&&(i[s]=n||function(o){return a[s](a,o)})}),i},lxe=function(e,n,a){return function(i){return e(n,a,i),null}},Of=function(e,n,a){if(!Yg(e)||uE(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];GO.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=lxe(o,n,a))}),i},cxe=["children"],uxe=["children"];function L5(t,e){if(t==null)return{};var n=dxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function dxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function dE(t){"@babel/helpers - typeof";return dE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dE(t)}var F5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ic=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},$5=null,Y2=null,WO=function t(e){if(e===$5&&Array.isArray(Y2))return Y2;var n=[];return v.Children.forEach(e,function(a){hn(a)||(Xye.isFragment(a)?n=n.concat(t(a.props.children)):n.push(a))}),Y2=n,$5=e,n};function $s(t,e){var n=[],a=[];return Array.isArray(e)?a=e.map(function(i){return Ic(i)}):a=[Ic(e)],WO(t).forEach(function(i){var s=Fs(i,"type.displayName")||Fs(i,"type.name");a.indexOf(s)!==-1&&n.push(i)}),n}function Es(t,e){var n=$s(t,e);return n&&n[0]}var B5=function(e){if(!e||!e.props)return!1;var n=e.props,a=n.width,i=n.height;return!(!Nt(a)||a<=0||!Nt(i)||i<=0)},hxe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],fxe=function(e){return e&&e.type&&Df(e.type)&&hxe.indexOf(e.type)>=0},H9=function(e){return e&&dE(e)==="object"&&"clipDot"in e},pxe=function(e,n,a,i){var s,o=(s=K2==null?void 0:K2[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!on(e)&&(i&&o.includes(n)||oxe.includes(n))||a&&GO.includes(n)},Ut=function(e,n,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(v.isValidElement(e)&&(i=e.props),!Yg(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;pxe((l=i)===null||l===void 0?void 0:l[o],o,n,a)&&(s[o]=i[o])}),s},hE=function t(e,n){if(e===n)return!0;var a=v.Children.count(e);if(a!==v.Children.count(n))return!1;if(a===0)return!0;if(a===1)return z5(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<a;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!z5(s,o))return!1}return!0},z5=function(e,n){if(hn(e)&&hn(n))return!0;if(!hn(e)&&!hn(n)){var a=e.props||{},i=a.children,s=L5(a,cxe),o=n.props||{},l=o.children,c=L5(o,uxe);return i&&l?Hm(s,c)&&hE(i,l):!i&&!l?Hm(s,c):!1}return!1},q5=function(e,n){var a=[],i={};return WO(e).forEach(function(s,o){if(fxe(s))a.push(s);else if(s){var l=Ic(s.type),c=n[l]||{},u=c.handler,h=c.once;if(u&&(!h||!i[l])){var p=u(s,l,o);a.push(p),i[l]=!0}}}),a},mxe=function(e){var n=e&&e.type;return n&&F5[n]?F5[n]:null},gxe=function(e,n){return WO(n).indexOf(e)},yxe=["children","width","height","viewBox","className","style","title","desc"];function fE(){return fE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},fE.apply(this,arguments)}function xxe(t,e){if(t==null)return{};var n=vxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function vxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function pE(t){var e=t.children,n=t.width,a=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,u=xxe(t,yxe),h=i||{width:n,height:a,x:0,y:0},p=mn("recharts-surface",s);return Te.createElement("svg",fE({},Ut(u,!0,"svg"),{className:p,width:n,height:a,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),Te.createElement("title",null,l),Te.createElement("desc",null,c),e)}var bxe=["children","className"];function mE(){return mE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},mE.apply(this,arguments)}function jxe(t,e){if(t==null)return{};var n=wxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function wxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var Rn=Te.forwardRef(function(t,e){var n=t.children,a=t.className,i=jxe(t,bxe),s=mn("recharts-layer",a);return Te.createElement("g",mE({className:s},Ut(i,!0),{ref:e}),n)}),qo=function(e,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s]},Q2,U5;function Nxe(){if(U5)return Q2;U5=1;function t(e,n,a){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),a=a>s?s:a,a<0&&(a+=s),s=n>a?0:a-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}return Q2=t,Q2}var X2,V5;function Sxe(){if(V5)return X2;V5=1;var t=Nxe();function e(n,a,i){var s=n.length;return i=i===void 0?s:i,!a&&i>=s?n:t(n,a,i)}return X2=e,X2}var J2,H5;function G9(){if(H5)return J2;H5=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(u){return l.test(u)}return J2=c,J2}var Z2,G5;function _xe(){if(G5)return Z2;G5=1;function t(e){return e.split("")}return Z2=t,Z2}var ek,W5;function Cxe(){if(W5)return ek;W5=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",h="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=u+"?",j="["+s+"]?",w="(?:"+x+"(?:"+[h,p,m].join("|")+")"+j+b+")*",_=j+b+w,k="(?:"+[h+l+"?",l,p,m,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+k+_,"g");function A(T){return T.match(C)||[]}return ek=A,ek}var tk,K5;function kxe(){if(K5)return tk;K5=1;var t=_xe(),e=G9(),n=Cxe();function a(i){return e(i)?n(i):t(i)}return tk=a,tk}var nk,Y5;function Txe(){if(Y5)return nk;Y5=1;var t=Sxe(),e=G9(),n=kxe(),a=z9();function i(s){return function(o){o=a(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),u=l?t(l,1).join(""):o.slice(1);return c[s]()+u}}return nk=i,nk}var rk,Q5;function Axe(){if(Q5)return rk;Q5=1;var t=Txe(),e=t("toUpperCase");return rk=e,rk}var Pxe=Axe();const gS=Kn(Pxe);function $r(t){return function(){return t}}const W9=Math.cos,Bw=Math.sin,Yo=Math.sqrt,zw=Math.PI,yS=2*zw,gE=Math.PI,yE=2*gE,Xh=1e-6,Exe=yE-Xh;function K9(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Dxe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return K9;const n=10**e;return function(a){this._+=a[0];for(let i=1,s=a.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}class Oxe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?K9:Dxe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,a,i){this._append`Q${+e},${+n},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(e,n,a,i,s,o){this._append`C${+e},${+n},${+a},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,a,i,s){if(e=+e,n=+n,a=+a,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=a-e,u=i-n,h=o-e,p=l-n,m=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>Xh)if(!(Math.abs(p*c-u*h)>Xh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let x=a-o,b=i-l,j=c*c+u*u,w=x*x+b*b,_=Math.sqrt(j),k=Math.sqrt(m),C=s*Math.tan((gE-Math.acos((j+m-w)/(2*_*k)))/2),A=C/k,T=C/_;Math.abs(A-1)>Xh&&this._append`L${e+A*h},${n+A*p}`,this._append`A${s},${s},0,0,${+(p*x>h*b)},${this._x1=e+T*c},${this._y1=n+T*u}`}}arc(e,n,a,i,s,o){if(e=+e,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(i),c=a*Math.sin(i),u=e+l,h=n+c,p=1^o,m=o?i-s:s-i;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Xh||Math.abs(this._y1-h)>Xh)&&this._append`L${u},${h}`,a&&(m<0&&(m=m%yE+yE),m>Exe?this._append`A${a},${a},0,1,${p},${e-l},${n-c}A${a},${a},0,1,${p},${this._x1=u},${this._y1=h}`:m>Xh&&this._append`A${a},${a},0,${+(m>=gE)},${p},${this._x1=e+a*Math.cos(s)},${this._y1=n+a*Math.sin(s)}`)}rect(e,n,a,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function KO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);e=a}return t},()=>new Oxe(e)}function YO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Y9(t){this._context=t}Y9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function xS(t){return new Y9(t)}function Q9(t){return t[0]}function X9(t){return t[1]}function J9(t,e){var n=$r(!0),a=null,i=xS,s=null,o=KO(l);t=typeof t=="function"?t:t===void 0?Q9:$r(t),e=typeof e=="function"?e:e===void 0?X9:$r(e);function l(c){var u,h=(c=YO(c)).length,p,m=!1,x;for(a==null&&(s=i(x=o())),u=0;u<=h;++u)!(u<h&&n(p=c[u],u,c))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(p,u,c),+e(p,u,c));if(x)return s=null,x+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:$r(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:$r(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:$r(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,a!=null&&(s=i(a)),l):i},l.context=function(c){return arguments.length?(c==null?a=s=null:s=i(a=c),l):a},l}function R1(t,e,n){var a=null,i=$r(!0),s=null,o=xS,l=null,c=KO(u);t=typeof t=="function"?t:t===void 0?Q9:$r(+t),e=typeof e=="function"?e:$r(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?X9:$r(+n);function u(p){var m,x,b,j=(p=YO(p)).length,w,_=!1,k,C=new Array(j),A=new Array(j);for(s==null&&(l=o(k=c())),m=0;m<=j;++m){if(!(m<j&&i(w=p[m],m,p))===_)if(_=!_)x=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=m-1;b>=x;--b)l.point(C[b],A[b]);l.lineEnd(),l.areaEnd()}_&&(C[m]=+t(w,m,p),A[m]=+e(w,m,p),l.point(a?+a(w,m,p):C[m],n?+n(w,m,p):A[m]))}if(k)return l=null,k+""||null}function h(){return J9().defined(i).curve(o).context(s)}return u.x=function(p){return arguments.length?(t=typeof p=="function"?p:$r(+p),a=null,u):t},u.x0=function(p){return arguments.length?(t=typeof p=="function"?p:$r(+p),u):t},u.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:$r(+p),u):a},u.y=function(p){return arguments.length?(e=typeof p=="function"?p:$r(+p),n=null,u):e},u.y0=function(p){return arguments.length?(e=typeof p=="function"?p:$r(+p),u):e},u.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:$r(+p),u):n},u.lineX0=u.lineY0=function(){return h().x(t).y(e)},u.lineY1=function(){return h().x(t).y(n)},u.lineX1=function(){return h().x(a).y(e)},u.defined=function(p){return arguments.length?(i=typeof p=="function"?p:$r(!!p),u):i},u.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),u):o},u.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),u):s},u}class Z9{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Mxe(t){return new Z9(t,!0)}function Ixe(t){return new Z9(t,!1)}const QO={draw(t,e){const n=Yo(e/zw);t.moveTo(n,0),t.arc(0,0,n,0,yS)}},Rxe={draw(t,e){const n=Yo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},e7=Yo(1/3),Lxe=e7*2,Fxe={draw(t,e){const n=Yo(e/Lxe),a=n*e7;t.moveTo(0,-n),t.lineTo(a,0),t.lineTo(0,n),t.lineTo(-a,0),t.closePath()}},$xe={draw(t,e){const n=Yo(e),a=-n/2;t.rect(a,a,n,n)}},Bxe=.8908130915292852,t7=Bw(zw/10)/Bw(7*zw/10),zxe=Bw(yS/10)*t7,qxe=-W9(yS/10)*t7,Uxe={draw(t,e){const n=Yo(e*Bxe),a=zxe*n,i=qxe*n;t.moveTo(0,-n),t.lineTo(a,i);for(let s=1;s<5;++s){const o=yS*s/5,l=W9(o),c=Bw(o);t.lineTo(c*n,-l*n),t.lineTo(l*a-c*i,c*a+l*i)}t.closePath()}},ak=Yo(3),Vxe={draw(t,e){const n=-Yo(e/(ak*3));t.moveTo(0,n*2),t.lineTo(-ak*n,-n),t.lineTo(ak*n,-n),t.closePath()}},Zs=-.5,eo=Yo(3)/2,xE=1/Yo(12),Hxe=(xE/2+1)*3,Gxe={draw(t,e){const n=Yo(e/Hxe),a=n/2,i=n*xE,s=a,o=n*xE+n,l=-s,c=o;t.moveTo(a,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Zs*a-eo*i,eo*a+Zs*i),t.lineTo(Zs*s-eo*o,eo*s+Zs*o),t.lineTo(Zs*l-eo*c,eo*l+Zs*c),t.lineTo(Zs*a+eo*i,Zs*i-eo*a),t.lineTo(Zs*s+eo*o,Zs*o-eo*s),t.lineTo(Zs*l+eo*c,Zs*c-eo*l),t.closePath()}};function Wxe(t,e){let n=null,a=KO(i);t=typeof t=="function"?t:$r(t||QO),e=typeof e=="function"?e:$r(e===void 0?64:+e);function i(){let s;if(n||(n=s=a()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:$r(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:$r(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function qw(){}function Uw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function n7(t){this._context=t}n7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Uw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Uw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Kxe(t){return new n7(t)}function r7(t){this._context=t}r7.prototype={areaStart:qw,areaEnd:qw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Uw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Yxe(t){return new r7(t)}function a7(t){this._context=t}a7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Uw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Qxe(t){return new a7(t)}function i7(t){this._context=t}i7.prototype={areaStart:qw,areaEnd:qw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Xxe(t){return new i7(t)}function X5(t){return t<0?-1:1}function J5(t,e,n){var a=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(a||i<0&&-0),o=(n-t._y1)/(i||a<0&&-0),l=(s*i+o*a)/(a+i);return(X5(s)+X5(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function Z5(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ik(t,e,n){var a=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-a)/3;t._context.bezierCurveTo(a+l,i+l*e,s-l,o-l*n,s,o)}function Vw(t){this._context=t}Vw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ik(this,this._t0,Z5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ik(this,Z5(this,n=J5(this,t,e)),n);break;default:ik(this,this._t0,n=J5(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function s7(t){this._context=new o7(t)}(s7.prototype=Object.create(Vw.prototype)).point=function(t,e){Vw.prototype.point.call(this,e,t)};function o7(t){this._context=t}o7.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,a,i,s){this._context.bezierCurveTo(e,t,a,n,s,i)}};function Jxe(t){return new Vw(t)}function Zxe(t){return new s7(t)}function l7(t){this._context=t}l7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var a=eL(t),i=eL(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(a[0][s],i[0][s],a[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function eL(t){var e,n=t.length-1,a,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)a=i[e]/s[e-1],s[e]-=a,o[e]-=a*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function eve(t){return new l7(t)}function vS(t,e){this._context=t,this._t=e}vS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function tve(t){return new vS(t,.5)}function nve(t){return new vS(t,0)}function rve(t){return new vS(t,1)}function fg(t,e){if((o=t.length)>1)for(var n=1,a,i,s=t[e[0]],o,l=s.length;n<o;++n)for(i=s,s=t[e[n]],a=0;a<l;++a)s[a][1]+=s[a][0]=isNaN(i[a][1])?i[a][0]:i[a][1]}function vE(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function ave(t,e){return t[e]}function ive(t){const e=[];return e.key=t,e}function sve(){var t=$r([]),e=vE,n=fg,a=ave;function i(s){var o=Array.from(t.apply(this,arguments),ive),l,c=o.length,u=-1,h;for(const p of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+a(p,o[l].key,u,s)]).data=p;for(l=0,h=YO(e(o));l<c;++l)o[h[l]].index=l;return n(o,h),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:$r(Array.from(s)),i):t},i.value=function(s){return arguments.length?(a=typeof s=="function"?s:$r(+s),i):a},i.order=function(s){return arguments.length?(e=s==null?vE:typeof s=="function"?s:$r(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??fg,i):n},i}function ove(t,e){if((a=t.length)>0){for(var n,a,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<a;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<a;++n)t[n][i][1]/=o}fg(t,e)}}function lve(t,e){if((i=t.length)>0){for(var n=0,a=t[e[0]],i,s=a.length;n<s;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}fg(t,e)}}function cve(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,a=1,i,s,o;a<s;++a){for(var l=0,c=0,u=0;l<o;++l){for(var h=t[e[l]],p=h[a][1]||0,m=h[a-1][1]||0,x=(p-m)/2,b=0;b<l;++b){var j=t[e[b]],w=j[a][1]||0,_=j[a-1][1]||0;x+=w-_}c+=p,u+=x*p}i[a-1][1]+=i[a-1][0]=n,c&&(n-=u/c)}i[a-1][1]+=i[a-1][0]=n,fg(t,e)}}function Hv(t){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(t)}var uve=["type","size","sizeType"];function bE(){return bE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},bE.apply(this,arguments)}function tL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function nL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tL(Object(n),!0).forEach(function(a){dve(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function dve(t,e,n){return e=hve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hve(t){var e=fve(t,"string");return Hv(e)=="symbol"?e:e+""}function fve(t,e){if(Hv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Hv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pve(t,e){if(t==null)return{};var n=mve(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function mve(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var c7={symbolCircle:QO,symbolCross:Rxe,symbolDiamond:Fxe,symbolSquare:$xe,symbolStar:Uxe,symbolTriangle:Vxe,symbolWye:Gxe},gve=Math.PI/180,yve=function(e){var n="symbol".concat(gS(e));return c7[n]||QO},xve=function(e,n,a){if(n==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*gve;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},vve=function(e,n){c7["symbol".concat(gS(e))]=n},XO=function(e){var n=e.type,a=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=pve(e,uve),u=nL(nL({},c),{},{type:a,size:s,sizeType:l}),h=function(){var w=yve(a),_=Wxe().type(w).size(xve(s,l,a));return _()},p=u.className,m=u.cx,x=u.cy,b=Ut(u,!0);return m===+m&&x===+x&&s===+s?Te.createElement("path",bE({},b,{className:mn("recharts-symbols",p),transform:"translate(".concat(m,", ").concat(x,")"),d:h()})):null};XO.registerSymbol=vve;function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}function jE(){return jE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},jE.apply(this,arguments)}function rL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function bve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(n),!0).forEach(function(a){Gv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function jve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wve(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,d7(a.key),a)}}function Nve(t,e,n){return e&&wve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sve(t,e,n){return e=Hw(e),_ve(t,u7()?Reflect.construct(e,n||[],Hw(t).constructor):e.apply(t,n))}function _ve(t,e){if(e&&(pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cve(t)}function Cve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u7=function(){return!!t})()}function Hw(t){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hw(t)}function kve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wE(t,e)}function wE(t,e){return wE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},wE(t,e)}function Gv(t,e,n){return e=d7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d7(t){var e=Tve(t,"string");return pg(e)=="symbol"?e:e+""}function Tve(t,e){if(pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mo=32,JO=function(t){function e(){return jve(this,e),Sve(this,e,arguments)}return kve(e,t),Nve(e,[{key:"renderIcon",value:function(a){var i=this.props.inactiveColor,s=Mo/2,o=Mo/6,l=Mo/3,c=a.inactive?i:a.color;if(a.type==="plainline")return Te.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:s,x2:Mo,y2:s,className:"recharts-legend-icon"});if(a.type==="line")return Te.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Mo,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(a.type==="rect")return Te.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Mo/8,"h").concat(Mo,"v").concat(Mo*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Te.isValidElement(a.legendIcon)){var u=bve({},a);return delete u.legendIcon,Te.cloneElement(a.legendIcon,u)}return Te.createElement(XO,{fill:c,cx:s,cy:s,size:Mo,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,h={x:0,y:0,width:Mo,height:Mo},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(x,b){var j=x.formatter||c,w=mn(Gv(Gv({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var _=on(x.value)?null:x.value;qo(!on(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var k=x.inactive?u:x.color;return Te.createElement("li",jE({className:w,style:p,key:"legend-item-".concat(b)},Of(a.props,x,b)),Te.createElement(pE,{width:o,height:o,viewBox:h,style:m},a.renderIcon(x)),Te.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},j?j(_,x,b):_))})}},{key:"render",value:function(){var a=this.props,i=a.payload,s=a.layout,o=a.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Te.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(v.PureComponent);Gv(JO,"displayName","Legend");Gv(JO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var sk,aL;function Ave(){if(aL)return sk;aL=1;var t=fS();function e(){this.__data__=new t,this.size=0}return sk=e,sk}var ok,iL;function Pve(){if(iL)return ok;iL=1;function t(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}return ok=t,ok}var lk,sL;function Eve(){if(sL)return lk;sL=1;function t(e){return this.__data__.get(e)}return lk=t,lk}var ck,oL;function Dve(){if(oL)return ck;oL=1;function t(e){return this.__data__.has(e)}return ck=t,ck}var uk,lL;function Ove(){if(lL)return uk;lL=1;var t=fS(),e=qO(),n=UO(),a=200;function i(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<a-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return uk=i,uk}var dk,cL;function h7(){if(cL)return dk;cL=1;var t=fS(),e=Ave(),n=Pve(),a=Eve(),i=Dve(),s=Ove();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=a,o.prototype.has=i,o.prototype.set=s,dk=o,dk}var hk,uL;function Mve(){if(uL)return hk;uL=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return hk=e,hk}var fk,dL;function Ive(){if(dL)return fk;dL=1;function t(e){return this.__data__.has(e)}return fk=t,fk}var pk,hL;function f7(){if(hL)return pk;hL=1;var t=UO(),e=Mve(),n=Ive();function a(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return a.prototype.add=a.prototype.push=e,a.prototype.has=n,pk=a,pk}var mk,fL;function p7(){if(fL)return mk;fL=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(e[a],a,e))return!0;return!1}return mk=t,mk}var gk,pL;function m7(){if(pL)return gk;pL=1;function t(e,n){return e.has(n)}return gk=t,gk}var yk,mL;function g7(){if(mL)return yk;mL=1;var t=f7(),e=p7(),n=m7(),a=1,i=2;function s(o,l,c,u,h,p){var m=c&a,x=o.length,b=l.length;if(x!=b&&!(m&&b>x))return!1;var j=p.get(o),w=p.get(l);if(j&&w)return j==l&&w==o;var _=-1,k=!0,C=c&i?new t:void 0;for(p.set(o,l),p.set(l,o);++_<x;){var A=o[_],T=l[_];if(u)var E=m?u(T,A,_,l,o,p):u(A,T,_,o,l,p);if(E!==void 0){if(E)continue;k=!1;break}if(C){if(!e(l,function(I,$){if(!n(C,$)&&(A===I||h(A,I,c,u,p)))return C.push($)})){k=!1;break}}else if(!(A===T||h(A,T,c,u,p))){k=!1;break}}return p.delete(o),p.delete(l),k}return yk=s,yk}var xk,gL;function Rve(){if(gL)return xk;gL=1;var t=Gl(),e=t.Uint8Array;return xk=e,xk}var vk,yL;function Lve(){if(yL)return vk;yL=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i,s){a[++n]=[s,i]}),a}return vk=t,vk}var bk,xL;function ZO(){if(xL)return bk;xL=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i){a[++n]=i}),a}return bk=t,bk}var jk,vL;function Fve(){if(vL)return jk;vL=1;var t=Vb(),e=Rve(),n=zO(),a=g7(),i=Lve(),s=ZO(),o=1,l=2,c="[object Boolean]",u="[object Date]",h="[object Error]",p="[object Map]",m="[object Number]",x="[object RegExp]",b="[object Set]",j="[object String]",w="[object Symbol]",_="[object ArrayBuffer]",k="[object DataView]",C=t?t.prototype:void 0,A=C?C.valueOf:void 0;function T(E,I,$,U,B,R,z){switch($){case k:if(E.byteLength!=I.byteLength||E.byteOffset!=I.byteOffset)return!1;E=E.buffer,I=I.buffer;case _:return!(E.byteLength!=I.byteLength||!R(new e(E),new e(I)));case c:case u:case m:return n(+E,+I);case h:return E.name==I.name&&E.message==I.message;case x:case j:return E==I+"";case p:var G=i;case b:var K=U&o;if(G||(G=s),E.size!=I.size&&!K)return!1;var Y=z.get(E);if(Y)return Y==I;U|=l,z.set(E,I);var q=a(G(E),G(I),U,B,R,z);return z.delete(E),q;case w:if(A)return A.call(E)==A.call(I)}return!1}return jk=T,jk}var wk,bL;function y7(){if(bL)return wk;bL=1;function t(e,n){for(var a=-1,i=n.length,s=e.length;++a<i;)e[s+a]=n[a];return e}return wk=t,wk}var Nk,jL;function $ve(){if(jL)return Nk;jL=1;var t=y7(),e=gs();function n(a,i,s){var o=i(a);return e(a)?o:t(o,s(a))}return Nk=n,Nk}var Sk,wL;function Bve(){if(wL)return Sk;wL=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=0,o=[];++a<i;){var l=e[a];n(l,a,e)&&(o[s++]=l)}return o}return Sk=t,Sk}var _k,NL;function zve(){if(NL)return _k;NL=1;function t(){return[]}return _k=t,_k}var Ck,SL;function qve(){if(SL)return Ck;SL=1;var t=Bve(),e=zve(),n=Object.prototype,a=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return a.call(o,l)}))}:e;return Ck=s,Ck}var kk,_L;function Uve(){if(_L)return kk;_L=1;function t(e,n){for(var a=-1,i=Array(e);++a<e;)i[a]=n(a);return i}return kk=t,kk}var Tk,CL;function Vve(){if(CL)return Tk;CL=1;var t=Qc(),e=Xc(),n="[object Arguments]";function a(i){return e(i)&&t(i)==n}return Tk=a,Tk}var Ak,kL;function eM(){if(kL)return Ak;kL=1;var t=Vve(),e=Xc(),n=Object.prototype,a=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&a.call(o,"callee")&&!i.call(o,"callee")};return Ak=s,Ak}var vv={exports:{}},Pk,TL;function Hve(){if(TL)return Pk;TL=1;function t(){return!1}return Pk=t,Pk}vv.exports;var AL;function x7(){return AL||(AL=1,function(t,e){var n=Gl(),a=Hve(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||a;t.exports=u}(vv,vv.exports)),vv.exports}var Ek,PL;function tM(){if(PL)return Ek;PL=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(a,i){var s=typeof a;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(a))&&a>-1&&a%1==0&&a<i}return Ek=n,Ek}var Dk,EL;function nM(){if(EL)return Dk;EL=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Dk=e,Dk}var Ok,DL;function Gve(){if(DL)return Ok;DL=1;var t=Qc(),e=nM(),n=Xc(),a="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",h="[object Number]",p="[object Object]",m="[object RegExp]",x="[object Set]",b="[object String]",j="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",k="[object Float32Array]",C="[object Float64Array]",A="[object Int8Array]",T="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",$="[object Uint8ClampedArray]",U="[object Uint16Array]",B="[object Uint32Array]",R={};R[k]=R[C]=R[A]=R[T]=R[E]=R[I]=R[$]=R[U]=R[B]=!0,R[a]=R[i]=R[w]=R[s]=R[_]=R[o]=R[l]=R[c]=R[u]=R[h]=R[p]=R[m]=R[x]=R[b]=R[j]=!1;function z(G){return n(G)&&e(G.length)&&!!R[t(G)]}return Ok=z,Ok}var Mk,OL;function v7(){if(OL)return Mk;OL=1;function t(e){return function(n){return e(n)}}return Mk=t,Mk}var bv={exports:{}};bv.exports;var ML;function Wve(){return ML||(ML=1,function(t,e){var n=I9(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,o=s&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(bv,bv.exports)),bv.exports}var Ik,IL;function b7(){if(IL)return Ik;IL=1;var t=Gve(),e=v7(),n=Wve(),a=n&&n.isTypedArray,i=a?e(a):t;return Ik=i,Ik}var Rk,RL;function Kve(){if(RL)return Rk;RL=1;var t=Uve(),e=eM(),n=gs(),a=x7(),i=tM(),s=b7(),o=Object.prototype,l=o.hasOwnProperty;function c(u,h){var p=n(u),m=!p&&e(u),x=!p&&!m&&a(u),b=!p&&!m&&!x&&s(u),j=p||m||x||b,w=j?t(u.length,String):[],_=w.length;for(var k in u)(h||l.call(u,k))&&!(j&&(k=="length"||x&&(k=="offset"||k=="parent")||b&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||i(k,_)))&&w.push(k);return w}return Rk=c,Rk}var Lk,LL;function Yve(){if(LL)return Lk;LL=1;var t=Object.prototype;function e(n){var a=n&&n.constructor,i=typeof a=="function"&&a.prototype||t;return n===i}return Lk=e,Lk}var Fk,FL;function j7(){if(FL)return Fk;FL=1;function t(e,n){return function(a){return e(n(a))}}return Fk=t,Fk}var $k,$L;function Qve(){if($L)return $k;$L=1;var t=j7(),e=t(Object.keys,Object);return $k=e,$k}var Bk,BL;function Xve(){if(BL)return Bk;BL=1;var t=Yve(),e=Qve(),n=Object.prototype,a=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))a.call(s,l)&&l!="constructor"&&o.push(l);return o}return Bk=i,Bk}var zk,zL;function Gb(){if(zL)return zk;zL=1;var t=BO(),e=nM();function n(a){return a!=null&&e(a.length)&&!t(a)}return zk=n,zk}var qk,qL;function bS(){if(qL)return qk;qL=1;var t=Kve(),e=Xve(),n=Gb();function a(i){return n(i)?t(i):e(i)}return qk=a,qk}var Uk,UL;function Jve(){if(UL)return Uk;UL=1;var t=$ve(),e=qve(),n=bS();function a(i){return t(i,n,e)}return Uk=a,Uk}var Vk,VL;function Zve(){if(VL)return Vk;VL=1;var t=Jve(),e=1,n=Object.prototype,a=n.hasOwnProperty;function i(s,o,l,c,u,h){var p=l&e,m=t(s),x=m.length,b=t(o),j=b.length;if(x!=j&&!p)return!1;for(var w=x;w--;){var _=m[w];if(!(p?_ in o:a.call(o,_)))return!1}var k=h.get(s),C=h.get(o);if(k&&C)return k==o&&C==s;var A=!0;h.set(s,o),h.set(o,s);for(var T=p;++w<x;){_=m[w];var E=s[_],I=o[_];if(c)var $=p?c(I,E,_,o,s,h):c(E,I,_,s,o,h);if(!($===void 0?E===I||u(E,I,l,c,h):$)){A=!1;break}T||(T=_=="constructor")}if(A&&!T){var U=s.constructor,B=o.constructor;U!=B&&"constructor"in s&&"constructor"in o&&!(typeof U=="function"&&U instanceof U&&typeof B=="function"&&B instanceof B)&&(A=!1)}return h.delete(s),h.delete(o),A}return Vk=i,Vk}var Hk,HL;function ebe(){if(HL)return Hk;HL=1;var t=qf(),e=Gl(),n=t(e,"DataView");return Hk=n,Hk}var Gk,GL;function tbe(){if(GL)return Gk;GL=1;var t=qf(),e=Gl(),n=t(e,"Promise");return Gk=n,Gk}var Wk,WL;function w7(){if(WL)return Wk;WL=1;var t=qf(),e=Gl(),n=t(e,"Set");return Wk=n,Wk}var Kk,KL;function nbe(){if(KL)return Kk;KL=1;var t=qf(),e=Gl(),n=t(e,"WeakMap");return Kk=n,Kk}var Yk,YL;function rbe(){if(YL)return Yk;YL=1;var t=ebe(),e=qO(),n=tbe(),a=w7(),i=nbe(),s=Qc(),o=$9(),l="[object Map]",c="[object Object]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",m="[object DataView]",x=o(t),b=o(e),j=o(n),w=o(a),_=o(i),k=s;return(t&&k(new t(new ArrayBuffer(1)))!=m||e&&k(new e)!=l||n&&k(n.resolve())!=u||a&&k(new a)!=h||i&&k(new i)!=p)&&(k=function(C){var A=s(C),T=A==c?C.constructor:void 0,E=T?o(T):"";if(E)switch(E){case x:return m;case b:return l;case j:return u;case w:return h;case _:return p}return A}),Yk=k,Yk}var Qk,QL;function abe(){if(QL)return Qk;QL=1;var t=h7(),e=g7(),n=Fve(),a=Zve(),i=rbe(),s=gs(),o=x7(),l=b7(),c=1,u="[object Arguments]",h="[object Array]",p="[object Object]",m=Object.prototype,x=m.hasOwnProperty;function b(j,w,_,k,C,A){var T=s(j),E=s(w),I=T?h:i(j),$=E?h:i(w);I=I==u?p:I,$=$==u?p:$;var U=I==p,B=$==p,R=I==$;if(R&&o(j)){if(!o(w))return!1;T=!0,U=!1}if(R&&!U)return A||(A=new t),T||l(j)?e(j,w,_,k,C,A):n(j,w,I,_,k,C,A);if(!(_&c)){var z=U&&x.call(j,"__wrapped__"),G=B&&x.call(w,"__wrapped__");if(z||G){var K=z?j.value():j,Y=G?w.value():w;return A||(A=new t),C(K,Y,_,k,A)}}return R?(A||(A=new t),a(j,w,_,k,C,A)):!1}return Qk=b,Qk}var Xk,XL;function rM(){if(XL)return Xk;XL=1;var t=abe(),e=Xc();function n(a,i,s,o,l){return a===i?!0:a==null||i==null||!e(a)&&!e(i)?a!==a&&i!==i:t(a,i,s,o,n,l)}return Xk=n,Xk}var Jk,JL;function ibe(){if(JL)return Jk;JL=1;var t=h7(),e=rM(),n=1,a=2;function i(s,o,l,c){var u=l.length,h=u,p=!c;if(s==null)return!h;for(s=Object(s);u--;){var m=l[u];if(p&&m[2]?m[1]!==s[m[0]]:!(m[0]in s))return!1}for(;++u<h;){m=l[u];var x=m[0],b=s[x],j=m[1];if(p&&m[2]){if(b===void 0&&!(x in s))return!1}else{var w=new t;if(c)var _=c(b,j,x,s,o,w);if(!(_===void 0?e(j,b,n|a,c,w):_))return!1}}return!0}return Jk=i,Jk}var Zk,ZL;function N7(){if(ZL)return Zk;ZL=1;var t=Cd();function e(n){return n===n&&!t(n)}return Zk=e,Zk}var eT,e6;function sbe(){if(e6)return eT;e6=1;var t=N7(),e=bS();function n(a){for(var i=e(a),s=i.length;s--;){var o=i[s],l=a[o];i[s]=[o,l,t(l)]}return i}return eT=n,eT}var tT,t6;function S7(){if(t6)return tT;t6=1;function t(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==void 0||e in Object(a))}}return tT=t,tT}var nT,n6;function obe(){if(n6)return nT;n6=1;var t=ibe(),e=sbe(),n=S7();function a(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return nT=a,nT}var rT,r6;function lbe(){if(r6)return rT;r6=1;function t(e,n){return e!=null&&n in Object(e)}return rT=t,rT}var aT,a6;function cbe(){if(a6)return aT;a6=1;var t=q9(),e=eM(),n=gs(),a=tM(),i=nM(),s=mS();function o(l,c,u){c=t(c,l);for(var h=-1,p=c.length,m=!1;++h<p;){var x=s(c[h]);if(!(m=l!=null&&u(l,x)))break;l=l[x]}return m||++h!=p?m:(p=l==null?0:l.length,!!p&&i(p)&&a(x,p)&&(n(l)||e(l)))}return aT=o,aT}var iT,i6;function ube(){if(i6)return iT;i6=1;var t=lbe(),e=cbe();function n(a,i){return a!=null&&e(a,i,t)}return iT=n,iT}var sT,s6;function dbe(){if(s6)return sT;s6=1;var t=rM(),e=U9(),n=ube(),a=$O(),i=N7(),s=S7(),o=mS(),l=1,c=2;function u(h,p){return a(h)&&i(p)?s(o(h),p):function(m){var x=e(m,h);return x===void 0&&x===p?n(m,h):t(p,x,l|c)}}return sT=u,sT}var oT,o6;function Xg(){if(o6)return oT;o6=1;function t(e){return e}return oT=t,oT}var lT,l6;function hbe(){if(l6)return lT;l6=1;function t(e){return function(n){return n==null?void 0:n[e]}}return lT=t,lT}var cT,c6;function fbe(){if(c6)return cT;c6=1;var t=HO();function e(n){return function(a){return t(a,n)}}return cT=e,cT}var uT,u6;function pbe(){if(u6)return uT;u6=1;var t=hbe(),e=fbe(),n=$O(),a=mS();function i(s){return n(s)?t(a(s)):e(s)}return uT=i,uT}var dT,d6;function Wl(){if(d6)return dT;d6=1;var t=obe(),e=dbe(),n=Xg(),a=gs(),i=pbe();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?a(o)?e(o[0],o[1]):t(o):i(o)}return dT=s,dT}var hT,h6;function _7(){if(h6)return hT;h6=1;function t(e,n,a,i){for(var s=e.length,o=a+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return hT=t,hT}var fT,f6;function mbe(){if(f6)return fT;f6=1;function t(e){return e!==e}return fT=t,fT}var pT,p6;function gbe(){if(p6)return pT;p6=1;function t(e,n,a){for(var i=a-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return pT=t,pT}var mT,m6;function ybe(){if(m6)return mT;m6=1;var t=_7(),e=mbe(),n=gbe();function a(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return mT=a,mT}var gT,g6;function xbe(){if(g6)return gT;g6=1;var t=ybe();function e(n,a){var i=n==null?0:n.length;return!!i&&t(n,a,0)>-1}return gT=e,gT}var yT,y6;function vbe(){if(y6)return yT;y6=1;function t(e,n,a){for(var i=-1,s=e==null?0:e.length;++i<s;)if(a(n,e[i]))return!0;return!1}return yT=t,yT}var xT,x6;function bbe(){if(x6)return xT;x6=1;function t(){}return xT=t,xT}var vT,v6;function jbe(){if(v6)return vT;v6=1;var t=w7(),e=bbe(),n=ZO(),a=1/0,i=t&&1/n(new t([,-0]))[1]==a?function(s){return new t(s)}:e;return vT=i,vT}var bT,b6;function wbe(){if(b6)return bT;b6=1;var t=f7(),e=xbe(),n=vbe(),a=m7(),i=jbe(),s=ZO(),o=200;function l(c,u,h){var p=-1,m=e,x=c.length,b=!0,j=[],w=j;if(h)b=!1,m=n;else if(x>=o){var _=u?null:i(c);if(_)return s(_);b=!1,m=a,w=new t}else w=u?[]:j;e:for(;++p<x;){var k=c[p],C=u?u(k):k;if(k=h||k!==0?k:0,b&&C===C){for(var A=w.length;A--;)if(w[A]===C)continue e;u&&w.push(C),j.push(k)}else m(w,C,h)||(w!==j&&w.push(C),j.push(k))}return j}return bT=l,bT}var jT,j6;function Nbe(){if(j6)return jT;j6=1;var t=Wl(),e=wbe();function n(a,i){return a&&a.length?e(a,t(i,2)):[]}return jT=n,jT}var Sbe=Nbe();const w6=Kn(Sbe);function C7(t,e,n){return e===!0?w6(t,n):on(e)?w6(t,e):t}function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}var _be=["ref"];function N6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function jc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N6(Object(n),!0).forEach(function(a){jS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Cbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S6(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,T7(a.key),a)}}function kbe(t,e,n){return e&&S6(t.prototype,e),n&&S6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tbe(t,e,n){return e=Gw(e),Abe(t,k7()?Reflect.construct(e,n||[],Gw(t).constructor):e.apply(t,n))}function Abe(t,e){if(e&&(mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pbe(t)}function Pbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k7=function(){return!!t})()}function Gw(t){return Gw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gw(t)}function Ebe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NE(t,e)}function NE(t,e){return NE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},NE(t,e)}function jS(t,e,n){return e=T7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T7(t){var e=Dbe(t,"string");return mg(e)=="symbol"?e:e+""}function Dbe(t,e){if(mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(mg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Obe(t,e){if(t==null)return{};var n=Mbe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Mbe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Ibe(t){return t.value}function Rbe(t,e){if(Te.isValidElement(t))return Te.cloneElement(t,e);if(typeof t=="function")return Te.createElement(t,e);e.ref;var n=Obe(e,_be);return Te.createElement(JO,n)}var _6=1,Rc=function(t){function e(){var n;Cbe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=Tbe(this,e,[].concat(i)),jS(n,"lastBoundingBox",{width:-1,height:-1}),n}return Ebe(e,t),kbe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>_6||Math.abs(i.height-this.lastBoundingBox.height)>_6)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,a&&a(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?jc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,h=i.chartHeight,p,m;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&s==="vertical"){var x=this.getBBoxSnapshot();p={left:((u||0)-x.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();m={top:((h||0)-b.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return jc(jc({},p),m)}},{key:"render",value:function(){var a=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,h=i.payload,p=jc(jc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Te.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){a.wrapperNode=x}},Rbe(s,jc(jc({},this.props),{},{payload:C7(h,u,Ibe)})))}}],[{key:"getWithHeight",value:function(a,i){var s=jc(jc({},this.defaultProps),a.props),o=s.layout;return o==="vertical"&&Nt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||i}:null}}])}(v.PureComponent);jS(Rc,"displayName","Legend");jS(Rc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var wT,C6;function Lbe(){if(C6)return wT;C6=1;var t=Vb(),e=eM(),n=gs(),a=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(a&&s&&s[a])}return wT=i,wT}var NT,k6;function A7(){if(k6)return NT;k6=1;var t=y7(),e=Lbe();function n(a,i,s,o,l){var c=-1,u=a.length;for(s||(s=e),l||(l=[]);++c<u;){var h=a[c];i>0&&s(h)?i>1?n(h,i-1,s,o,l):t(l,h):o||(l[l.length]=h)}return l}return NT=n,NT}var ST,T6;function Fbe(){if(T6)return ST;T6=1;function t(e){return function(n,a,i){for(var s=-1,o=Object(n),l=i(n),c=l.length;c--;){var u=l[e?c:++s];if(a(o[u],u,o)===!1)break}return n}}return ST=t,ST}var _T,A6;function $be(){if(A6)return _T;A6=1;var t=Fbe(),e=t();return _T=e,_T}var CT,P6;function P7(){if(P6)return CT;P6=1;var t=$be(),e=bS();function n(a,i){return a&&t(a,i,e)}return CT=n,CT}var kT,E6;function Bbe(){if(E6)return kT;E6=1;var t=Gb();function e(n,a){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=a?o:-1,c=Object(i);(a?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return kT=e,kT}var TT,D6;function aM(){if(D6)return TT;D6=1;var t=P7(),e=Bbe(),n=e(t);return TT=n,TT}var AT,O6;function E7(){if(O6)return AT;O6=1;var t=aM(),e=Gb();function n(a,i){var s=-1,o=e(a)?Array(a.length):[];return t(a,function(l,c,u){o[++s]=i(l,c,u)}),o}return AT=n,AT}var PT,M6;function zbe(){if(M6)return PT;M6=1;function t(e,n){var a=e.length;for(e.sort(n);a--;)e[a]=e[a].value;return e}return PT=t,PT}var ET,I6;function qbe(){if(I6)return ET;I6=1;var t=Kg();function e(n,a){if(n!==a){var i=n!==void 0,s=n===null,o=n===n,l=t(n),c=a!==void 0,u=a===null,h=a===a,p=t(a);if(!u&&!p&&!l&&n>a||l&&c&&h&&!u&&!p||s&&c&&h||!i&&h||!o)return 1;if(!s&&!l&&!p&&n<a||p&&i&&o&&!s&&!l||u&&i&&o||!c&&o||!h)return-1}return 0}return ET=e,ET}var DT,R6;function Ube(){if(R6)return DT;R6=1;var t=qbe();function e(n,a,i){for(var s=-1,o=n.criteria,l=a.criteria,c=o.length,u=i.length;++s<c;){var h=t(o[s],l[s]);if(h){if(s>=u)return h;var p=i[s];return h*(p=="desc"?-1:1)}}return n.index-a.index}return DT=e,DT}var OT,L6;function Vbe(){if(L6)return OT;L6=1;var t=VO(),e=HO(),n=Wl(),a=E7(),i=zbe(),s=v7(),o=Ube(),l=Xg(),c=gs();function u(h,p,m){p.length?p=t(p,function(j){return c(j)?function(w){return e(w,j.length===1?j[0]:j)}:j}):p=[l];var x=-1;p=t(p,s(n));var b=a(h,function(j,w,_){var k=t(p,function(C){return C(j)});return{criteria:k,index:++x,value:j}});return i(b,function(j,w){return o(j,w,m)})}return OT=u,OT}var MT,F6;function Hbe(){if(F6)return MT;F6=1;function t(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}return MT=t,MT}var IT,$6;function Gbe(){if($6)return IT;$6=1;var t=Hbe(),e=Math.max;function n(a,i,s){return i=e(i===void 0?a.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),u=Array(c);++l<c;)u[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=s(u),t(a,this,h)}}return IT=n,IT}var RT,B6;function Wbe(){if(B6)return RT;B6=1;function t(e){return function(){return e}}return RT=t,RT}var LT,z6;function D7(){if(z6)return LT;z6=1;var t=qf(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return LT=e,LT}var FT,q6;function Kbe(){if(q6)return FT;q6=1;var t=Wbe(),e=D7(),n=Xg(),a=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return FT=a,FT}var $T,U6;function Ybe(){if(U6)return $T;U6=1;var t=800,e=16,n=Date.now;function a(i){var s=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return $T=a,$T}var BT,V6;function Qbe(){if(V6)return BT;V6=1;var t=Kbe(),e=Ybe(),n=e(t);return BT=n,BT}var zT,H6;function Xbe(){if(H6)return zT;H6=1;var t=Xg(),e=Gbe(),n=Qbe();function a(i,s){return n(e(i,s,t),i+"")}return zT=a,zT}var qT,G6;function wS(){if(G6)return qT;G6=1;var t=zO(),e=Gb(),n=tM(),a=Cd();function i(s,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return qT=i,qT}var UT,W6;function Jbe(){if(W6)return UT;W6=1;var t=A7(),e=Vbe(),n=Xbe(),a=wS(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&a(s,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return UT=i,UT}var Zbe=Jbe();const iM=Kn(Zbe);function Wv(t){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wv(t)}function SE(){return SE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},SE.apply(this,arguments)}function e0e(t,e){return a0e(t)||r0e(t,e)||n0e(t,e)||t0e()}function t0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n0e(t,e){if(t){if(typeof t=="string")return K6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K6(t,e)}}function K6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function a0e(t){if(Array.isArray(t))return t}function Y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function VT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(n),!0).forEach(function(a){i0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function i0e(t,e,n){return e=s0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s0e(t){var e=o0e(t,"string");return Wv(e)=="symbol"?e:e+""}function o0e(t,e){if(Wv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Wv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l0e(t){return Array.isArray(t)&&Ea(t[0])&&Ea(t[1])?t.join(" ~ "):t}var c0e=function(e){var n=e.separator,a=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,h=e.payload,p=e.formatter,m=e.itemSorter,x=e.wrapperClassName,b=e.labelClassName,j=e.label,w=e.labelFormatter,_=e.accessibilityLayer,k=_===void 0?!1:_,C=function(){if(h&&h.length){var z={padding:0,margin:0},G=(m?iM(h,m):h).map(function(K,Y){if(K.type==="none")return null;var q=VT({display:"block",paddingTop:4,paddingBottom:4,color:K.color||"#000"},l),V=K.formatter||p||l0e,H=K.value,Q=K.name,L=H,te=Q;if(V&&L!=null&&te!=null){var me=V(H,Q,K,Y,h);if(Array.isArray(me)){var X=e0e(me,2);L=X[0],te=X[1]}else L=me}return Te.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:q},Ea(te)?Te.createElement("span",{className:"recharts-tooltip-item-name"},te):null,Ea(te)?Te.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Te.createElement("span",{className:"recharts-tooltip-item-value"},L),Te.createElement("span",{className:"recharts-tooltip-item-unit"},K.unit||""))});return Te.createElement("ul",{className:"recharts-tooltip-item-list",style:z},G)}return null},A=VT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),T=VT({margin:0},u),E=!hn(j),I=E?j:"",$=mn("recharts-default-tooltip",x),U=mn("recharts-tooltip-label",b);E&&w&&h!==void 0&&h!==null&&(I=w(j,h));var B=k?{role:"status","aria-live":"assertive"}:{};return Te.createElement("div",SE({className:$,style:A},B),Te.createElement("p",{className:U,style:T},Te.isValidElement(I)?I:"".concat(I)),C())};function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}function L1(t,e,n){return e=u0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u0e(t){var e=d0e(t,"string");return Kv(e)=="symbol"?e:e+""}function d0e(t,e){if(Kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Kv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rv="recharts-tooltip-wrapper",h0e={visibility:"hidden"};function f0e(t){var e=t.coordinate,n=t.translateX,a=t.translateY;return mn(rv,L1(L1(L1(L1({},"".concat(rv,"-right"),Nt(n)&&e&&Nt(e.x)&&n>=e.x),"".concat(rv,"-left"),Nt(n)&&e&&Nt(e.x)&&n<e.x),"".concat(rv,"-bottom"),Nt(a)&&e&&Nt(e.y)&&a>=e.y),"".concat(rv,"-top"),Nt(a)&&e&&Nt(e.y)&&a<e.y))}function Q6(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&Nt(s[a]))return s[a];var h=n[a]-l-i,p=n[a]+i;if(e[a])return o[a]?h:p;if(o[a]){var m=h,x=c[a];return m<x?Math.max(p,c[a]):Math.max(h,c[a])}var b=p+l,j=c[a]+u;return b>j?Math.max(h,c[a]):Math.max(p,c[a])}function p0e(t){var e=t.translateX,n=t.translateY,a=t.useTranslate3d;return{transform:a?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function m0e(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,h,p;return o.height>0&&o.width>0&&n?(h=Q6({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=Q6({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=p0e({translateX:h,translateY:p,useTranslate3d:l})):u=h0e,{cssProperties:u,cssClasses:f0e({translateX:h,translateY:p,coordinate:n})}}function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function X6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function J6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X6(Object(n),!0).forEach(function(a){CE(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function g0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y0e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,M7(a.key),a)}}function x0e(t,e,n){return e&&y0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function v0e(t,e,n){return e=Ww(e),b0e(t,O7()?Reflect.construct(e,n||[],Ww(t).constructor):e.apply(t,n))}function b0e(t,e){if(e&&(gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j0e(t)}function j0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O7=function(){return!!t})()}function Ww(t){return Ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ww(t)}function w0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_E(t,e)}function _E(t,e){return _E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},_E(t,e)}function CE(t,e,n){return e=M7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M7(t){var e=N0e(t,"string");return gg(e)=="symbol"?e:e+""}function N0e(t,e){if(gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Z6=1,S0e=function(t){function e(){var n;g0e(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=v0e(this,e,[].concat(i)),CE(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),CE(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&u!==void 0?u:0}})}}),n}return w0e(e,t),x0e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>Z6||Math.abs(a.height-this.state.lastBoundingBox.height)>Z6)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,h=i.coordinate,p=i.hasPayload,m=i.isAnimationActive,x=i.offset,b=i.position,j=i.reverseDirection,w=i.useTranslate3d,_=i.viewBox,k=i.wrapperStyle,C=m0e({allowEscapeViewBox:o,coordinate:h,offsetTopLeft:x,position:b,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:_}),A=C.cssClasses,T=C.cssProperties,E=J6(J6({transition:m&&s?"transform ".concat(l,"ms ").concat(c):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},k);return Te.createElement("div",{tabIndex:-1,className:A,style:E,ref:function($){a.wrapperNode=$}},u)}}])}(v.PureComponent),_0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},kd={isSsr:_0e()};function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function eF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function tF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eF(Object(n),!0).forEach(function(a){sM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function C0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k0e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,R7(a.key),a)}}function T0e(t,e,n){return e&&k0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function A0e(t,e,n){return e=Kw(e),P0e(t,I7()?Reflect.construct(e,n||[],Kw(t).constructor):e.apply(t,n))}function P0e(t,e){if(e&&(yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E0e(t)}function E0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I7=function(){return!!t})()}function Kw(t){return Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kw(t)}function D0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kE(t,e)}function kE(t,e){return kE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},kE(t,e)}function sM(t,e,n){return e=R7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R7(t){var e=O0e(t,"string");return yg(e)=="symbol"?e:e+""}function O0e(t,e){if(yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(yg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function M0e(t){return t.dataKey}function I0e(t,e){return Te.isValidElement(t)?Te.cloneElement(t,e):typeof t=="function"?Te.createElement(t,e):Te.createElement(c0e,e)}var Ri=function(t){function e(){return C0e(this,e),A0e(this,e,arguments)}return D0e(e,t),T0e(e,[{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,h=i.coordinate,p=i.filterNull,m=i.isAnimationActive,x=i.offset,b=i.payload,j=i.payloadUniqBy,w=i.position,_=i.reverseDirection,k=i.useTranslate3d,C=i.viewBox,A=i.wrapperStyle,T=b??[];p&&T.length&&(T=C7(b.filter(function(I){return I.value!=null&&(I.hide!==!0||a.props.includeHidden)}),j,M0e));var E=T.length>0;return Te.createElement(S0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:s,coordinate:h,hasPayload:E,offset:x,position:w,reverseDirection:_,useTranslate3d:k,viewBox:C,wrapperStyle:A},I0e(u,tF(tF({},this.props),{},{payload:T})))}}])}(v.PureComponent);sM(Ri,"displayName","Tooltip");sM(Ri,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!kd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var HT,nF;function R0e(){if(nF)return HT;nF=1;var t=L9(),e=Cd(),n="Expected a function";function a(i,s,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,s,{leading:l,maxWait:s,trailing:c})}return HT=a,HT}var L0e=R0e();const L7=Kn(L0e);function Yv(t){"@babel/helpers - typeof";return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yv(t)}function rF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function F1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rF(Object(n),!0).forEach(function(a){F0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rF(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function F0e(t,e,n){return e=$0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $0e(t){var e=B0e(t,"string");return Yv(e)=="symbol"?e:e+""}function B0e(t,e){if(Yv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Yv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z0e(t,e){return H0e(t)||V0e(t,e)||U0e(t,e)||q0e()}function q0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U0e(t,e){if(t){if(typeof t=="string")return aF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aF(t,e)}}function aF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function V0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function H0e(t){if(Array.isArray(t))return t}var fw=v.forwardRef(function(t,e){var n=t.aspect,a=t.initialDimension,i=a===void 0?{width:-1,height:-1}:a,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,h=u===void 0?0:u,p=t.minHeight,m=t.maxHeight,x=t.children,b=t.debounce,j=b===void 0?0:b,w=t.id,_=t.className,k=t.onResize,C=t.style,A=C===void 0?{}:C,T=v.useRef(null),E=v.useRef();E.current=k,v.useImperativeHandle(e,function(){return Object.defineProperty(T.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),T.current},configurable:!0})});var I=v.useState({containerWidth:i.width,containerHeight:i.height}),$=z0e(I,2),U=$[0],B=$[1],R=v.useCallback(function(G,K){B(function(Y){var q=Math.round(G),V=Math.round(K);return Y.containerWidth===q&&Y.containerHeight===V?Y:{containerWidth:q,containerHeight:V}})},[]);v.useEffect(function(){var G=function(Q){var L,te=Q[0].contentRect,me=te.width,X=te.height;R(me,X),(L=E.current)===null||L===void 0||L.call(E,me,X)};j>0&&(G=L7(G,j,{trailing:!0,leading:!1}));var K=new ResizeObserver(G),Y=T.current.getBoundingClientRect(),q=Y.width,V=Y.height;return R(q,V),K.observe(T.current),function(){K.disconnect()}},[R,j]);var z=v.useMemo(function(){var G=U.containerWidth,K=U.containerHeight;if(G<0||K<0)return null;qo(af(o)||af(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),qo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Y=af(o)?G:o,q=af(c)?K:c;n&&n>0&&(Y?q=Y/n:q&&(Y=q*n),m&&q>m&&(q=m)),qo(Y>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,q,o,c,h,p,n);var V=!Array.isArray(x)&&Ic(x.type).endsWith("Chart");return Te.Children.map(x,function(H){return Te.isValidElement(H)?v.cloneElement(H,F1({width:Y,height:q},V?{style:F1({height:"100%",width:"100%",maxHeight:q,maxWidth:Y},H.props.style)}:{})):H})},[n,x,c,m,p,h,U,o]);return Te.createElement("div",{id:w?"".concat(w):void 0,className:mn("recharts-responsive-container",_),style:F1(F1({},A),{},{width:o,height:c,minWidth:h,minHeight:p,maxHeight:m}),ref:T},z)}),Wb=function(e){return null};Wb.displayName="Cell";function Qv(t){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qv(t)}function iF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function TE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iF(Object(n),!0).forEach(function(a){G0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iF(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function G0e(t,e,n){return e=W0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W0e(t){var e=K0e(t,"string");return Qv(e)=="symbol"?e:e+""}function K0e(t,e){if(Qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var km={widthCache:{},cacheCount:0},Y0e=2e3,Q0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},sF="recharts_measurement_span";function X0e(t){var e=TE({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Tv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||kd.isSsr)return{width:0,height:0};var a=X0e(n),i=JSON.stringify({text:e,copyStyle:a});if(km.widthCache[i])return km.widthCache[i];try{var s=document.getElementById(sF);s||(s=document.createElement("span"),s.setAttribute("id",sF),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=TE(TE({},Q0e),a);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return km.widthCache[i]=c,++km.cacheCount>Y0e&&(km.cacheCount=0,km.widthCache={}),c}catch{return{width:0,height:0}}},J0e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Xv(t){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(t)}function Yw(t,e){return nje(t)||tje(t,e)||eje(t,e)||Z0e()}function Z0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eje(t,e){if(t){if(typeof t=="string")return oF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oF(t,e)}}function oF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function tje(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function nje(t){if(Array.isArray(t))return t}function rje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lF(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,ije(a.key),a)}}function aje(t,e,n){return e&&lF(t.prototype,e),n&&lF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ije(t){var e=sje(t,"string");return Xv(e)=="symbol"?e:e+""}function sje(t,e){if(Xv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Xv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oje=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,lje=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,F7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},cje=Object.keys(F7),Rm="NaN";function uje(t,e){return t*F7[e]}var $1=function(){function t(e,n){rje(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!oje.test(n)&&(this.num=NaN,this.unit=""),cje.includes(n)&&(this.num=uje(e,n),this.unit="px")}return aje(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,i=(a=lje.exec(n))!==null&&a!==void 0?a:[],s=Yw(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function $7(t){if(t.includes(Rm))return Rm;for(var e=t;e.includes("*")||e.includes("/");){var n,a=(n=cF.exec(e))!==null&&n!==void 0?n:[],i=Yw(a,4),s=i[1],o=i[2],l=i[3],c=$1.parse(s??""),u=$1.parse(l??""),h=o==="*"?c.multiply(u):c.divide(u);if(h.isNaN())return Rm;e=e.replace(cF,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,m=(p=uF.exec(e))!==null&&p!==void 0?p:[],x=Yw(m,4),b=x[1],j=x[2],w=x[3],_=$1.parse(b??""),k=$1.parse(w??""),C=j==="+"?_.add(k):_.subtract(k);if(C.isNaN())return Rm;e=e.replace(uF,C.toString())}return e}var dF=/\(([^()]*)\)/;function dje(t){for(var e=t;e.includes("(");){var n=dF.exec(e),a=Yw(n,2),i=a[1];e=e.replace(dF,$7(i))}return e}function hje(t){var e=t.replace(/\s+/g,"");return e=dje(e),e=$7(e),e}function fje(t){try{return hje(t)}catch{return Rm}}function GT(t){var e=fje(t.slice(5,-1));return e===Rm?"":e}var pje=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],mje=["dx","dy","angle","className","breakAll"];function AE(){return AE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},AE.apply(this,arguments)}function hF(t,e){if(t==null)return{};var n=gje(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function gje(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function fF(t,e){return bje(t)||vje(t,e)||xje(t,e)||yje()}function yje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xje(t,e){if(t){if(typeof t=="string")return pF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pF(t,e)}}function pF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function vje(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function bje(t){if(Array.isArray(t))return t}var B7=/[ \f\n\r\t\v\u2028\u2029]+/,z7=function(e){var n=e.children,a=e.breakAll,i=e.style;try{var s=[];hn(n)||(a?s=n.toString().split(""):s=n.toString().split(B7));var o=s.map(function(c){return{word:c,width:Tv(c,i).width}}),l=a?0:Tv("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},jje=function(e,n,a,i,s){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,h=Nt(o),p=l,m=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(q,V){var H=V.word,Q=V.width,L=q[q.length-1];if(L&&(i==null||s||L.width+Q+a<Number(i)))L.words.push(H),L.width+=Q+a;else{var te={words:[H],width:Q};q.push(te)}return q},[])},x=m(n),b=function(Y){return Y.reduce(function(q,V){return q.width>V.width?q:V})};if(!h)return x;for(var j="",w=function(Y){var q=p.slice(0,Y),V=z7({breakAll:u,style:c,children:q+j}).wordsWithComputedWidth,H=m(V),Q=H.length>o||b(H).width>Number(i);return[Q,H]},_=0,k=p.length-1,C=0,A;_<=k&&C<=p.length-1;){var T=Math.floor((_+k)/2),E=T-1,I=w(E),$=fF(I,2),U=$[0],B=$[1],R=w(T),z=fF(R,1),G=z[0];if(!U&&!G&&(_=T+1),U&&G&&(k=T-1),!U&&G){A=B;break}C++}return A||x},mF=function(e){var n=hn(e)?[]:e.toString().split(B7);return[{words:n}]},wje=function(e){var n=e.width,a=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((n||a)&&!kd.isSsr){var c,u,h=z7({breakAll:o,children:i,style:s});if(h){var p=h.wordsWithComputedWidth,m=h.spaceWidth;c=p,u=m}else return mF(i);return jje({breakAll:o,children:i,maxLines:l,style:s},c,u,n,a)}return mF(i)},gF="#808080",Mf=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,h=e.scaleToFit,p=h===void 0?!1:h,m=e.textAnchor,x=m===void 0?"start":m,b=e.verticalAnchor,j=b===void 0?"end":b,w=e.fill,_=w===void 0?gF:w,k=hF(e,pje),C=v.useMemo(function(){return wje({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:p,style:k.style,width:k.width})},[k.breakAll,k.children,k.maxLines,p,k.style,k.width]),A=k.dx,T=k.dy,E=k.angle,I=k.className,$=k.breakAll,U=hF(k,mje);if(!Ea(a)||!Ea(s))return null;var B=a+(Nt(A)?A:0),R=s+(Nt(T)?T:0),z;switch(j){case"start":z=GT("calc(".concat(u,")"));break;case"middle":z=GT("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:z=GT("calc(".concat(C.length-1," * -").concat(l,")"));break}var G=[];if(p){var K=C[0].width,Y=k.width;G.push("scale(".concat((Nt(Y)?Y/K:1)/K,")"))}return E&&G.push("rotate(".concat(E,", ").concat(B,", ").concat(R,")")),G.length&&(U.transform=G.join(" ")),Te.createElement("text",AE({},Ut(U,!0),{x:B,y:R,className:mn("recharts-text",I),textAnchor:x,fill:_.includes("url")?gF:_}),C.map(function(q,V){var H=q.words.join($?"":" ");return Te.createElement("tspan",{x:B,dy:V===0?z:l,key:"".concat(H,"-").concat(V)},H)}))};function fd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nje(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oM(t){let e,n,a;t.length!==2?(e=fd,n=(l,c)=>fd(t(l),c),a=(l,c)=>t(l)-c):(e=t===fd||t===Nje?t:Sje,n=t,a=t);function i(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const p=u+h>>>1;n(l[p],c)<0?u=p+1:h=p}while(u<h)}return u}function s(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const p=u+h>>>1;n(l[p],c)<=0?u=p+1:h=p}while(u<h)}return u}function o(l,c,u=0,h=l.length){const p=i(l,c,u,h-1);return p>u&&a(l[p-1],c)>-a(l[p],c)?p-1:p}return{left:i,center:o,right:s}}function Sje(){return 0}function q7(t){return t===null?NaN:+t}function*_je(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Cje=oM(fd),Kb=Cje.right;oM(q7).center;class yF extends Map{constructor(e,n=Aje){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[a,i]of e)this.set(a,i)}get(e){return super.get(xF(this,e))}has(e){return super.has(xF(this,e))}set(e,n){return super.set(kje(this,e),n)}delete(e){return super.delete(Tje(this,e))}}function xF({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):n}function kje({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):(t.set(a,n),n)}function Tje({_intern:t,_key:e},n){const a=e(n);return t.has(a)&&(n=t.get(a),t.delete(a)),n}function Aje(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Pje(t=fd){if(t===fd)return U7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const a=t(e,n);return a||a===0?a:(t(n,n)===0)-(t(e,e)===0)}}function U7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Eje=Math.sqrt(50),Dje=Math.sqrt(10),Oje=Math.sqrt(2);function Qw(t,e,n){const a=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(a)),s=a/Math.pow(10,i),o=s>=Eje?10:s>=Dje?5:s>=Oje?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?Qw(t,e,n*2):[l,c,u]}function PE(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const a=e<t,[i,s,o]=a?Qw(e,t,n):Qw(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function EE(t,e,n){return e=+e,t=+t,n=+n,Qw(t,e,n)[2]}function DE(t,e,n){e=+e,t=+t,n=+n;const a=e<t,i=a?EE(e,t,n):EE(t,e,n);return(a?-1:1)*(i<0?1/-i:i)}function vF(t,e){let n;for(const a of t)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function bF(t,e){let n;for(const a of t)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function V7(t,e,n=0,a=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(t.length-1,a)),!(n<=e&&e<=a))return t;for(i=i===void 0?U7:Pje(i);a>n;){if(a-n>600){const c=a-n+1,u=e-n+1,h=Math.log(c),p=.5*Math.exp(2*h/3),m=.5*Math.sqrt(h*p*(c-p)/c)*(u-c/2<0?-1:1),x=Math.max(n,Math.floor(e-u*p/c+m)),b=Math.min(a,Math.floor(e+(c-u)*p/c+m));V7(t,e,x,b,i)}const s=t[e];let o=n,l=a;for(av(t,n,e),i(t[a],s)>0&&av(t,n,a);o<l;){for(av(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?av(t,n,l):(++l,av(t,l,a)),l<=e&&(n=l+1),e<=l&&(a=l-1)}return t}function av(t,e,n){const a=t[e];t[e]=t[n],t[n]=a}function Mje(t,e,n){if(t=Float64Array.from(_je(t)),!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return bF(t);if(e>=1)return vF(t);var a,i=(a-1)*e,s=Math.floor(i),o=vF(V7(t,s).subarray(0,s+1)),l=bF(t.subarray(s+1));return o+(l-o)*(i-s)}}function Ije(t,e,n=q7){if(!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return+n(t[0],0,t);if(e>=1)return+n(t[a-1],a-1,t);var a,i=(a-1)*e,s=Math.floor(i),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function Rje(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var a=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++a<i;)s[a]=t+a*n;return s}function fo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Jc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const OE=Symbol("implicit");function lM(){var t=new yF,e=[],n=[],a=OE;function i(s){let o=t.get(s);if(o===void 0){if(a!==OE)return a;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new yF;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return lM(e,n).unknown(a)},fo.apply(i,arguments),i}function Jv(){var t=lM().unknown(void 0),e=t.domain,n=t.range,a=0,i=1,s,o,l=!1,c=0,u=0,h=.5;delete t.unknown;function p(){var m=e().length,x=i<a,b=x?i:a,j=x?a:i;s=(j-b)/Math.max(1,m-c+u*2),l&&(s=Math.floor(s)),b+=(j-b-s*(m-c))*h,o=s*(1-c),l&&(b=Math.round(b),o=Math.round(o));var w=Rje(m).map(function(_){return b+s*_});return n(x?w.reverse():w)}return t.domain=function(m){return arguments.length?(e(m),p()):e()},t.range=function(m){return arguments.length?([a,i]=m,a=+a,i=+i,p()):[a,i]},t.rangeRound=function(m){return[a,i]=m,a=+a,i=+i,l=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(m){return arguments.length?(l=!!m,p()):l},t.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),p()):c},t.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),p()):c},t.paddingOuter=function(m){return arguments.length?(u=+m,p()):u},t.align=function(m){return arguments.length?(h=Math.max(0,Math.min(1,m)),p()):h},t.copy=function(){return Jv(e(),[a,i]).round(l).paddingInner(c).paddingOuter(u).align(h)},fo.apply(p(),arguments)}function H7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return H7(e())},t}function Av(){return H7(Jv.apply(null,arguments).paddingInner(1))}function cM(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function G7(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function Yb(){}var Zv=.7,Xw=1/Zv,Gm="\\s*([+-]?\\d+)\\s*",eb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lje=/^#([0-9a-f]{3,8})$/,Fje=new RegExp(`^rgb\\(${Gm},${Gm},${Gm}\\)$`),$je=new RegExp(`^rgb\\(${$l},${$l},${$l}\\)$`),Bje=new RegExp(`^rgba\\(${Gm},${Gm},${Gm},${eb}\\)$`),zje=new RegExp(`^rgba\\(${$l},${$l},${$l},${eb}\\)$`),qje=new RegExp(`^hsl\\(${eb},${$l},${$l}\\)$`),Uje=new RegExp(`^hsla\\(${eb},${$l},${$l},${eb}\\)$`),jF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cM(Yb,tb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:wF,formatHex:wF,formatHex8:Vje,formatHsl:Hje,formatRgb:NF,toString:NF});function wF(){return this.rgb().formatHex()}function Vje(){return this.rgb().formatHex8()}function Hje(){return W7(this).formatHsl()}function NF(){return this.rgb().formatRgb()}function tb(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Lje.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?SF(e):n===3?new ds(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?B1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?B1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Fje.exec(t))?new ds(e[1],e[2],e[3],1):(e=$je.exec(t))?new ds(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Bje.exec(t))?B1(e[1],e[2],e[3],e[4]):(e=zje.exec(t))?B1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=qje.exec(t))?kF(e[1],e[2]/100,e[3]/100,1):(e=Uje.exec(t))?kF(e[1],e[2]/100,e[3]/100,e[4]):jF.hasOwnProperty(t)?SF(jF[t]):t==="transparent"?new ds(NaN,NaN,NaN,0):null}function SF(t){return new ds(t>>16&255,t>>8&255,t&255,1)}function B1(t,e,n,a){return a<=0&&(t=e=n=NaN),new ds(t,e,n,a)}function Gje(t){return t instanceof Yb||(t=tb(t)),t?(t=t.rgb(),new ds(t.r,t.g,t.b,t.opacity)):new ds}function ME(t,e,n,a){return arguments.length===1?Gje(t):new ds(t,e,n,a??1)}function ds(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}cM(ds,ME,G7(Yb,{brighter(t){return t=t==null?Xw:Math.pow(Xw,t),new ds(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Zv:Math.pow(Zv,t),new ds(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ds(bf(this.r),bf(this.g),bf(this.b),Jw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_F,formatHex:_F,formatHex8:Wje,formatRgb:CF,toString:CF}));function _F(){return`#${sf(this.r)}${sf(this.g)}${sf(this.b)}`}function Wje(){return`#${sf(this.r)}${sf(this.g)}${sf(this.b)}${sf((isNaN(this.opacity)?1:this.opacity)*255)}`}function CF(){const t=Jw(this.opacity);return`${t===1?"rgb(":"rgba("}${bf(this.r)}, ${bf(this.g)}, ${bf(this.b)}${t===1?")":`, ${t})`}`}function Jw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function sf(t){return t=bf(t),(t<16?"0":"")+t.toString(16)}function kF(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Bo(t,e,n,a)}function W7(t){if(t instanceof Bo)return new Bo(t.h,t.s,t.l,t.opacity);if(t instanceof Yb||(t=tb(t)),!t)return new Bo;if(t instanceof Bo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,i=Math.min(e,n,a),s=Math.max(e,n,a),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-a)/l+(n<a)*6:n===s?o=(a-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Bo(o,l,c,t.opacity)}function Kje(t,e,n,a){return arguments.length===1?W7(t):new Bo(t,e,n,a??1)}function Bo(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}cM(Bo,Kje,G7(Yb,{brighter(t){return t=t==null?Xw:Math.pow(Xw,t),new Bo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Zv:Math.pow(Zv,t),new Bo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,i=2*n-a;return new ds(WT(t>=240?t-240:t+120,i,a),WT(t,i,a),WT(t<120?t+240:t-120,i,a),this.opacity)},clamp(){return new Bo(TF(this.h),z1(this.s),z1(this.l),Jw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jw(this.opacity);return`${t===1?"hsl(":"hsla("}${TF(this.h)}, ${z1(this.s)*100}%, ${z1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function TF(t){return t=(t||0)%360,t<0?t+360:t}function z1(t){return Math.max(0,Math.min(1,t||0))}function WT(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const uM=t=>()=>t;function Yje(t,e){return function(n){return t+n*e}}function Qje(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}function Xje(t){return(t=+t)==1?K7:function(e,n){return n-e?Qje(e,n,t):uM(isNaN(e)?n:e)}}function K7(t,e){var n=e-t;return n?Yje(t,n):uM(isNaN(t)?e:t)}const AF=function t(e){var n=Xje(e);function a(i,s){var o=n((i=ME(i)).r,(s=ME(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),u=K7(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=c(h),i.opacity=u(h),i+""}}return a.gamma=t,a}(1);function Jje(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,a=e.slice(),i;return function(s){for(i=0;i<n;++i)a[i]=t[i]*(1-s)+e[i]*s;return a}}function Zje(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function e1e(t,e){var n=e?e.length:0,a=t?Math.min(n,t.length):0,i=new Array(a),s=new Array(n),o;for(o=0;o<a;++o)i[o]=Jg(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<a;++o)s[o]=i[o](l);return s}}function t1e(t,e){var n=new Date;return t=+t,e=+e,function(a){return n.setTime(t*(1-a)+e*a),n}}function Zw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function n1e(t,e){var n={},a={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Jg(t[i],e[i]):a[i]=e[i];return function(s){for(i in n)a[i]=n[i](s);return a}}var IE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,KT=new RegExp(IE.source,"g");function r1e(t){return function(){return t}}function a1e(t){return function(e){return t(e)+""}}function i1e(t,e){var n=IE.lastIndex=KT.lastIndex=0,a,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(a=IE.exec(t))&&(i=KT.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(a=a[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Zw(a,i)})),n=KT.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?a1e(c[0].x):r1e(e):(e=c.length,function(u){for(var h=0,p;h<e;++h)l[(p=c[h]).i]=p.x(u);return l.join("")})}function Jg(t,e){var n=typeof e,a;return e==null||n==="boolean"?uM(e):(n==="number"?Zw:n==="string"?(a=tb(e))?(e=a,AF):i1e:e instanceof tb?AF:e instanceof Date?t1e:Zje(e)?Jje:Array.isArray(e)?e1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?n1e:Zw)(t,e)}function dM(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function s1e(t,e){e===void 0&&(e=t,t=Jg);for(var n=0,a=e.length-1,i=e[0],s=new Array(a<0?0:a);n<a;)s[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return s[l](o-l)}}function o1e(t){return function(){return t}}function eN(t){return+t}var PF=[0,1];function Bi(t){return t}function RE(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:o1e(isNaN(e)?NaN:.5)}function l1e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(a){return Math.max(t,Math.min(e,a))}}function c1e(t,e,n){var a=t[0],i=t[1],s=e[0],o=e[1];return i<a?(a=RE(i,a),s=n(o,s)):(a=RE(a,i),s=n(s,o)),function(l){return s(a(l))}}function u1e(t,e,n){var a=Math.min(t.length,e.length)-1,i=new Array(a),s=new Array(a),o=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<a;)i[o]=RE(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=Kb(t,l,1,a)-1;return s[c](i[c](l))}}function Qb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function NS(){var t=PF,e=PF,n=Jg,a,i,s,o=Bi,l,c,u;function h(){var m=Math.min(t.length,e.length);return o!==Bi&&(o=l1e(t[0],t[m-1])),l=m>2?u1e:c1e,c=u=null,p}function p(m){return m==null||isNaN(m=+m)?s:(c||(c=l(t.map(a),e,n)))(a(o(m)))}return p.invert=function(m){return o(i((u||(u=l(e,t.map(a),Zw)))(m)))},p.domain=function(m){return arguments.length?(t=Array.from(m,eN),h()):t.slice()},p.range=function(m){return arguments.length?(e=Array.from(m),h()):e.slice()},p.rangeRound=function(m){return e=Array.from(m),n=dM,h()},p.clamp=function(m){return arguments.length?(o=m?!0:Bi,h()):o!==Bi},p.interpolate=function(m){return arguments.length?(n=m,h()):n},p.unknown=function(m){return arguments.length?(s=m,p):s},function(m,x){return a=m,i=x,h()}}function hM(){return NS()(Bi,Bi)}function d1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function tN(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,a=t.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+t.slice(n+1)]}function xg(t){return t=tN(Math.abs(t)),t?t[1]:NaN}function h1e(t,e){return function(n,a){for(var i=n.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>a));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function f1e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var p1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nb(t){if(!(e=p1e.exec(t)))throw new Error("invalid format: "+t);var e;return new fM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}nb.prototype=fM.prototype;function fM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}fM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function m1e(t){e:for(var e=t.length,n=1,a=-1,i;n<e;++n)switch(t[n]){case".":a=i=n;break;case"0":a===0&&(a=n),i=n;break;default:if(!+t[n])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(i+1):t}var Y7;function g1e(t,e){var n=tN(t,e);if(!n)return t+"";var a=n[0],i=n[1],s=i-(Y7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=a.length;return s===o?a:s>o?a+new Array(s-o+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+tN(t,Math.max(0,e+s-1))[0]}function EF(t,e){var n=tN(t,e);if(!n)return t+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const DF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:d1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>EF(t*100,e),r:EF,s:g1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function OF(t){return t}var MF=Array.prototype.map,IF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function y1e(t){var e=t.grouping===void 0||t.thousands===void 0?OF:h1e(MF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?OF:f1e(MF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(p){p=nb(p);var m=p.fill,x=p.align,b=p.sign,j=p.symbol,w=p.zero,_=p.width,k=p.comma,C=p.precision,A=p.trim,T=p.type;T==="n"?(k=!0,T="g"):DF[T]||(C===void 0&&(C=12),A=!0,T="g"),(w||m==="0"&&x==="=")&&(w=!0,m="0",x="=");var E=j==="$"?n:j==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",I=j==="$"?a:/[%p]/.test(T)?o:"",$=DF[T],U=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function B(R){var z=E,G=I,K,Y,q;if(T==="c")G=$(R)+G,R="";else{R=+R;var V=R<0||1/R<0;if(R=isNaN(R)?c:$(Math.abs(R),C),A&&(R=m1e(R)),V&&+R==0&&b!=="+"&&(V=!1),z=(V?b==="("?b:l:b==="-"||b==="("?"":b)+z,G=(T==="s"?IF[8+Y7/3]:"")+G+(V&&b==="("?")":""),U){for(K=-1,Y=R.length;++K<Y;)if(q=R.charCodeAt(K),48>q||q>57){G=(q===46?i+R.slice(K+1):R.slice(K))+G,R=R.slice(0,K);break}}}k&&!w&&(R=e(R,1/0));var H=z.length+R.length+G.length,Q=H<_?new Array(_-H+1).join(m):"";switch(k&&w&&(R=e(Q+R,Q.length?_-G.length:1/0),Q=""),x){case"<":R=z+R+G+Q;break;case"=":R=z+Q+R+G;break;case"^":R=Q.slice(0,H=Q.length>>1)+z+R+G+Q.slice(H);break;default:R=Q+z+R+G;break}return s(R)}return B.toString=function(){return p+""},B}function h(p,m){var x=u((p=nb(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(xg(m)/3)))*3,j=Math.pow(10,-b),w=IF[8+b/3];return function(_){return x(j*_)+w}}return{format:u,formatPrefix:h}}var q1,pM,Q7;x1e({thousands:",",grouping:[3],currency:["$",""]});function x1e(t){return q1=y1e(t),pM=q1.format,Q7=q1.formatPrefix,q1}function v1e(t){return Math.max(0,-xg(Math.abs(t)))}function b1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xg(e)/3)))*3-xg(Math.abs(t)))}function j1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xg(e)-xg(t))+1}function X7(t,e,n,a){var i=DE(t,e,n),s;switch(a=nb(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return a.precision==null&&!isNaN(s=b1e(i,o))&&(a.precision=s),Q7(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(s=j1e(i,Math.max(Math.abs(t),Math.abs(e))))&&(a.precision=s-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(s=v1e(i))&&(a.precision=s-(a.type==="%")*2);break}}return pM(a)}function Td(t){var e=t.domain;return t.ticks=function(n){var a=e();return PE(a[0],a[a.length-1],n??10)},t.tickFormat=function(n,a){var i=e();return X7(i[0],i[i.length-1],n??10,a)},t.nice=function(n){n==null&&(n=10);var a=e(),i=0,s=a.length-1,o=a[i],l=a[s],c,u,h=10;for(l<o&&(u=o,o=l,l=u,u=i,i=s,s=u);h-- >0;){if(u=EE(o,l,n),u===c)return a[i]=o,a[s]=l,e(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function nN(){var t=hM();return t.copy=function(){return Qb(t,nN())},fo.apply(t,arguments),Td(t)}function J7(t){var e;function n(a){return a==null||isNaN(a=+a)?e:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(t=Array.from(a,eN),n):t.slice()},n.unknown=function(a){return arguments.length?(e=a,n):e},n.copy=function(){return J7(t).unknown(e)},t=arguments.length?Array.from(t,eN):[0,1],Td(n)}function Z7(t,e){t=t.slice();var n=0,a=t.length-1,i=t[n],s=t[a],o;return s<i&&(o=n,n=a,a=o,o=i,i=s,s=o),t[n]=e.floor(i),t[a]=e.ceil(s),t}function RF(t){return Math.log(t)}function LF(t){return Math.exp(t)}function w1e(t){return-Math.log(-t)}function N1e(t){return-Math.exp(-t)}function S1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function _1e(t){return t===10?S1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function C1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function FF(t){return(e,n)=>-t(-e,n)}function mM(t){const e=t(RF,LF),n=e.domain;let a=10,i,s;function o(){return i=C1e(a),s=_1e(a),n()[0]<0?(i=FF(i),s=FF(s),t(w1e,N1e)):t(RF,LF),e}return e.base=function(l){return arguments.length?(a=+l,o()):a},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],h=c[c.length-1];const p=h<u;p&&([u,h]=[h,u]);let m=i(u),x=i(h),b,j;const w=l==null?10:+l;let _=[];if(!(a%1)&&x-m<w){if(m=Math.floor(m),x=Math.ceil(x),u>0){for(;m<=x;++m)for(b=1;b<a;++b)if(j=m<0?b/s(-m):b*s(m),!(j<u)){if(j>h)break;_.push(j)}}else for(;m<=x;++m)for(b=a-1;b>=1;--b)if(j=m>0?b/s(-m):b*s(m),!(j<u)){if(j>h)break;_.push(j)}_.length*2<w&&(_=PE(u,h,w))}else _=PE(m,x,Math.min(x-m,w)).map(s);return p?_.reverse():_},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=nb(c)).precision==null&&(c.trim=!0),c=pM(c)),l===1/0)return c;const u=Math.max(1,a*l/e.ticks().length);return h=>{let p=h/s(Math.round(i(h)));return p*a<a-.5&&(p*=a),p<=u?c(h):""}},e.nice=()=>n(Z7(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function eV(){const t=mM(NS()).domain([1,10]);return t.copy=()=>Qb(t,eV()).base(t.base()),fo.apply(t,arguments),t}function $F(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function BF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function gM(t){var e=1,n=t($F(e),BF(e));return n.constant=function(a){return arguments.length?t($F(e=+a),BF(e)):e},Td(n)}function tV(){var t=gM(NS());return t.copy=function(){return Qb(t,tV()).constant(t.constant())},fo.apply(t,arguments)}function zF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function k1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function T1e(t){return t<0?-t*t:t*t}function yM(t){var e=t(Bi,Bi),n=1;function a(){return n===1?t(Bi,Bi):n===.5?t(k1e,T1e):t(zF(n),zF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,a()):n},Td(e)}function xM(){var t=yM(NS());return t.copy=function(){return Qb(t,xM()).exponent(t.exponent())},fo.apply(t,arguments),t}function A1e(){return xM.apply(null,arguments).exponent(.5)}function qF(t){return Math.sign(t)*t*t}function P1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function nV(){var t=hM(),e=[0,1],n=!1,a;function i(s){var o=P1e(t(s));return isNaN(o)?a:n?Math.round(o):o}return i.invert=function(s){return t.invert(qF(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,eN)).map(qF)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return nV(t.domain(),e).round(n).clamp(t.clamp()).unknown(a)},fo.apply(i,arguments),Td(i)}function rV(){var t=[],e=[],n=[],a;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=Ije(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?a:e[Kb(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(fd),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.quantiles=function(){return n.slice()},s.copy=function(){return rV().domain(t).range(e).unknown(a)},fo.apply(s,arguments)}function aV(){var t=0,e=1,n=1,a=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[Kb(a,c,0,n)]:s}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,a[0]]:u>=n?[a[n-1],e]:[a[u-1],a[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return aV().domain([t,e]).range(i).unknown(s)},fo.apply(Td(o),arguments)}function iV(){var t=[.5],e=[0,1],n,a=1;function i(s){return s!=null&&s<=s?e[Kb(t,s,0,a)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),a=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),a=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return iV().domain(t).range(e).unknown(n)},fo.apply(i,arguments)}const YT=new Date,QT=new Date;function Oa(t,e,n,a){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},i.filter=s=>Oa(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(YT.setTime(+s),QT.setTime(+o),t(YT),t(QT),Math.floor(n(YT,QT))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(a?o=>a(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const rN=Oa(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);rN.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Oa(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):rN);rN.range;const Pc=1e3,so=Pc*60,Ec=so*60,Uc=Ec*24,vM=Uc*7,UF=Uc*30,XT=Uc*365,of=Oa(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Pc)},(t,e)=>(e-t)/Pc,t=>t.getUTCSeconds());of.range;const bM=Oa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pc)},(t,e)=>{t.setTime(+t+e*so)},(t,e)=>(e-t)/so,t=>t.getMinutes());bM.range;const jM=Oa(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*so)},(t,e)=>(e-t)/so,t=>t.getUTCMinutes());jM.range;const wM=Oa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pc-t.getMinutes()*so)},(t,e)=>{t.setTime(+t+e*Ec)},(t,e)=>(e-t)/Ec,t=>t.getHours());wM.range;const NM=Oa(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ec)},(t,e)=>(e-t)/Ec,t=>t.getUTCHours());NM.range;const Xb=Oa(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*so)/Uc,t=>t.getDate()-1);Xb.range;const SS=Oa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Uc,t=>t.getUTCDate()-1);SS.range;const sV=Oa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Uc,t=>Math.floor(t/Uc));sV.range;function Vf(t){return Oa(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*so)/vM)}const _S=Vf(0),aN=Vf(1),E1e=Vf(2),D1e=Vf(3),vg=Vf(4),O1e=Vf(5),M1e=Vf(6);_S.range;aN.range;E1e.range;D1e.range;vg.range;O1e.range;M1e.range;function Hf(t){return Oa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/vM)}const CS=Hf(0),iN=Hf(1),I1e=Hf(2),R1e=Hf(3),bg=Hf(4),L1e=Hf(5),F1e=Hf(6);CS.range;iN.range;I1e.range;R1e.range;bg.range;L1e.range;F1e.range;const SM=Oa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());SM.range;const _M=Oa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());_M.range;const Vc=Oa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Vc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Oa(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Vc.range;const Hc=Oa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Hc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Oa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Hc.range;function oV(t,e,n,a,i,s){const o=[[of,1,Pc],[of,5,5*Pc],[of,15,15*Pc],[of,30,30*Pc],[s,1,so],[s,5,5*so],[s,15,15*so],[s,30,30*so],[i,1,Ec],[i,3,3*Ec],[i,6,6*Ec],[i,12,12*Ec],[a,1,Uc],[a,2,2*Uc],[n,1,vM],[e,1,UF],[e,3,3*UF],[t,1,XT]];function l(u,h,p){const m=h<u;m&&([u,h]=[h,u]);const x=p&&typeof p.range=="function"?p:c(u,h,p),b=x?x.range(u,+h+1):[];return m?b.reverse():b}function c(u,h,p){const m=Math.abs(h-u)/p,x=oM(([,,w])=>w).right(o,m);if(x===o.length)return t.every(DE(u/XT,h/XT,p));if(x===0)return rN.every(Math.max(DE(u,h,p),1));const[b,j]=o[m/o[x-1][2]<o[x][2]/m?x-1:x];return b.every(j)}return[l,c]}const[$1e,B1e]=oV(Hc,_M,CS,sV,NM,jM),[z1e,q1e]=oV(Vc,SM,_S,Xb,wM,bM);function JT(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ZT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function iv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function U1e(t){var e=t.dateTime,n=t.date,a=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=sv(i),h=ov(i),p=sv(s),m=ov(s),x=sv(o),b=ov(o),j=sv(l),w=ov(l),_=sv(c),k=ov(c),C={a:V,A:H,b:Q,B:L,c:null,d:YF,e:YF,f:hwe,g:wwe,G:Swe,H:cwe,I:uwe,j:dwe,L:lV,m:fwe,M:pwe,p:te,q:me,Q:JF,s:ZF,S:mwe,u:gwe,U:ywe,V:xwe,w:vwe,W:bwe,x:null,X:null,y:jwe,Y:Nwe,Z:_we,"%":XF},A={a:X,A:Re,b:Se,B:Ee,c:null,d:QF,e:QF,f:Awe,g:$we,G:zwe,H:Cwe,I:kwe,j:Twe,L:uV,m:Pwe,M:Ewe,p:Fe,q:le,Q:JF,s:ZF,S:Dwe,u:Owe,U:Mwe,V:Iwe,w:Rwe,W:Lwe,x:null,X:null,y:Fwe,Y:Bwe,Z:qwe,"%":XF},T={a:B,A:R,b:z,B:G,c:K,d:WF,e:WF,f:iwe,g:GF,G:HF,H:KF,I:KF,j:twe,L:awe,m:ewe,M:nwe,p:U,q:Z1e,Q:owe,s:lwe,S:rwe,u:K1e,U:Y1e,V:Q1e,w:W1e,W:X1e,x:Y,X:q,y:GF,Y:HF,Z:J1e,"%":swe};C.x=E(n,C),C.X=E(a,C),C.c=E(e,C),A.x=E(n,A),A.X=E(a,A),A.c=E(e,A);function E(_e,Ve){return function(De){var ue=[],Ae=-1,ce=0,be=_e.length,ke,Ce,ne;for(De instanceof Date||(De=new Date(+De));++Ae<be;)_e.charCodeAt(Ae)===37&&(ue.push(_e.slice(ce,Ae)),(Ce=VF[ke=_e.charAt(++Ae)])!=null?ke=_e.charAt(++Ae):Ce=ke==="e"?" ":"0",(ne=Ve[ke])&&(ke=ne(De,Ce)),ue.push(ke),ce=Ae+1);return ue.push(_e.slice(ce,Ae)),ue.join("")}}function I(_e,Ve){return function(De){var ue=iv(1900,void 0,1),Ae=$(ue,_e,De+="",0),ce,be;if(Ae!=De.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Ve&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(ce=ZT(iv(ue.y,0,1)),be=ce.getUTCDay(),ce=be>4||be===0?iN.ceil(ce):iN(ce),ce=SS.offset(ce,(ue.V-1)*7),ue.y=ce.getUTCFullYear(),ue.m=ce.getUTCMonth(),ue.d=ce.getUTCDate()+(ue.w+6)%7):(ce=JT(iv(ue.y,0,1)),be=ce.getDay(),ce=be>4||be===0?aN.ceil(ce):aN(ce),ce=Xb.offset(ce,(ue.V-1)*7),ue.y=ce.getFullYear(),ue.m=ce.getMonth(),ue.d=ce.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),be="Z"in ue?ZT(iv(ue.y,0,1)).getUTCDay():JT(iv(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(be+5)%7:ue.w+ue.U*7-(be+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,ZT(ue)):JT(ue)}}function $(_e,Ve,De,ue){for(var Ae=0,ce=Ve.length,be=De.length,ke,Ce;Ae<ce;){if(ue>=be)return-1;if(ke=Ve.charCodeAt(Ae++),ke===37){if(ke=Ve.charAt(Ae++),Ce=T[ke in VF?Ve.charAt(Ae++):ke],!Ce||(ue=Ce(_e,De,ue))<0)return-1}else if(ke!=De.charCodeAt(ue++))return-1}return ue}function U(_e,Ve,De){var ue=u.exec(Ve.slice(De));return ue?(_e.p=h.get(ue[0].toLowerCase()),De+ue[0].length):-1}function B(_e,Ve,De){var ue=x.exec(Ve.slice(De));return ue?(_e.w=b.get(ue[0].toLowerCase()),De+ue[0].length):-1}function R(_e,Ve,De){var ue=p.exec(Ve.slice(De));return ue?(_e.w=m.get(ue[0].toLowerCase()),De+ue[0].length):-1}function z(_e,Ve,De){var ue=_.exec(Ve.slice(De));return ue?(_e.m=k.get(ue[0].toLowerCase()),De+ue[0].length):-1}function G(_e,Ve,De){var ue=j.exec(Ve.slice(De));return ue?(_e.m=w.get(ue[0].toLowerCase()),De+ue[0].length):-1}function K(_e,Ve,De){return $(_e,e,Ve,De)}function Y(_e,Ve,De){return $(_e,n,Ve,De)}function q(_e,Ve,De){return $(_e,a,Ve,De)}function V(_e){return o[_e.getDay()]}function H(_e){return s[_e.getDay()]}function Q(_e){return c[_e.getMonth()]}function L(_e){return l[_e.getMonth()]}function te(_e){return i[+(_e.getHours()>=12)]}function me(_e){return 1+~~(_e.getMonth()/3)}function X(_e){return o[_e.getUTCDay()]}function Re(_e){return s[_e.getUTCDay()]}function Se(_e){return c[_e.getUTCMonth()]}function Ee(_e){return l[_e.getUTCMonth()]}function Fe(_e){return i[+(_e.getUTCHours()>=12)]}function le(_e){return 1+~~(_e.getUTCMonth()/3)}return{format:function(_e){var Ve=E(_e+="",C);return Ve.toString=function(){return _e},Ve},parse:function(_e){var Ve=I(_e+="",!1);return Ve.toString=function(){return _e},Ve},utcFormat:function(_e){var Ve=E(_e+="",A);return Ve.toString=function(){return _e},Ve},utcParse:function(_e){var Ve=I(_e+="",!0);return Ve.toString=function(){return _e},Ve}}}var VF={"-":"",_:" ",0:"0"},Ua=/^\s*\d+/,V1e=/^%/,H1e=/[\\^$*+?|[\]().{}]/g;function tr(t,e,n){var a=t<0?"-":"",i=(a?-t:t)+"",s=i.length;return a+(s<n?new Array(n-s+1).join(e)+i:i)}function G1e(t){return t.replace(H1e,"\\$&")}function sv(t){return new RegExp("^(?:"+t.map(G1e).join("|")+")","i")}function ov(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function W1e(t,e,n){var a=Ua.exec(e.slice(n,n+1));return a?(t.w=+a[0],n+a[0].length):-1}function K1e(t,e,n){var a=Ua.exec(e.slice(n,n+1));return a?(t.u=+a[0],n+a[0].length):-1}function Y1e(t,e,n){var a=Ua.exec(e.slice(n,n+2));return a?(t.U=+a[0],n+a[0].length):-1}function Q1e(t,e,n){var a=Ua.exec(e.slice(n,n+2));return a?(t.V=+a[0],n+a[0].length):-1}function X1e(t,e,n){var a=Ua.exec(e.slice(n,n+2));return a?(t.W=+a[0],n+a[0].length):-1}function HF(t,e,n){var a=Ua.exec(e.slice(n,n+4));return a?(t.y=+a[0],n+a[0].length):-1}function GF(t,e,n){var a=Ua.exec(e.slice(n,n+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function J1e(t,e,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function Z1e(t,e,n){var a=Ua.exec(e.slice(n,n+1));return a?(t.q=a[0]*3-3,n+a[0].length):-1}function ewe(t,e,n){var a=Ua.exec(e.slice(n,n+2));return a?(t.m=a[0]-1,n+a[0].length):-1}function WF(t,e,n){var a=Ua.exec(e.slice(n,n+2));return a?(t.d=+a[0],n+a[0].length):-1}function twe(t,e,n){var a=Ua.exec(e.slice(n,n+3));return a?(t.m=0,t.d=+a[0],n+a[0].length):-1}function KF(t,e,n){var a=Ua.exec(e.slice(n,n+2));return a?(t.H=+a[0],n+a[0].length):-1}function nwe(t,e,n){var a=Ua.exec(e.slice(n,n+2));return a?(t.M=+a[0],n+a[0].length):-1}function rwe(t,e,n){var a=Ua.exec(e.slice(n,n+2));return a?(t.S=+a[0],n+a[0].length):-1}function awe(t,e,n){var a=Ua.exec(e.slice(n,n+3));return a?(t.L=+a[0],n+a[0].length):-1}function iwe(t,e,n){var a=Ua.exec(e.slice(n,n+6));return a?(t.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function swe(t,e,n){var a=V1e.exec(e.slice(n,n+1));return a?n+a[0].length:-1}function owe(t,e,n){var a=Ua.exec(e.slice(n));return a?(t.Q=+a[0],n+a[0].length):-1}function lwe(t,e,n){var a=Ua.exec(e.slice(n));return a?(t.s=+a[0],n+a[0].length):-1}function YF(t,e){return tr(t.getDate(),e,2)}function cwe(t,e){return tr(t.getHours(),e,2)}function uwe(t,e){return tr(t.getHours()%12||12,e,2)}function dwe(t,e){return tr(1+Xb.count(Vc(t),t),e,3)}function lV(t,e){return tr(t.getMilliseconds(),e,3)}function hwe(t,e){return lV(t,e)+"000"}function fwe(t,e){return tr(t.getMonth()+1,e,2)}function pwe(t,e){return tr(t.getMinutes(),e,2)}function mwe(t,e){return tr(t.getSeconds(),e,2)}function gwe(t){var e=t.getDay();return e===0?7:e}function ywe(t,e){return tr(_S.count(Vc(t)-1,t),e,2)}function cV(t){var e=t.getDay();return e>=4||e===0?vg(t):vg.ceil(t)}function xwe(t,e){return t=cV(t),tr(vg.count(Vc(t),t)+(Vc(t).getDay()===4),e,2)}function vwe(t){return t.getDay()}function bwe(t,e){return tr(aN.count(Vc(t)-1,t),e,2)}function jwe(t,e){return tr(t.getFullYear()%100,e,2)}function wwe(t,e){return t=cV(t),tr(t.getFullYear()%100,e,2)}function Nwe(t,e){return tr(t.getFullYear()%1e4,e,4)}function Swe(t,e){var n=t.getDay();return t=n>=4||n===0?vg(t):vg.ceil(t),tr(t.getFullYear()%1e4,e,4)}function _we(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tr(e/60|0,"0",2)+tr(e%60,"0",2)}function QF(t,e){return tr(t.getUTCDate(),e,2)}function Cwe(t,e){return tr(t.getUTCHours(),e,2)}function kwe(t,e){return tr(t.getUTCHours()%12||12,e,2)}function Twe(t,e){return tr(1+SS.count(Hc(t),t),e,3)}function uV(t,e){return tr(t.getUTCMilliseconds(),e,3)}function Awe(t,e){return uV(t,e)+"000"}function Pwe(t,e){return tr(t.getUTCMonth()+1,e,2)}function Ewe(t,e){return tr(t.getUTCMinutes(),e,2)}function Dwe(t,e){return tr(t.getUTCSeconds(),e,2)}function Owe(t){var e=t.getUTCDay();return e===0?7:e}function Mwe(t,e){return tr(CS.count(Hc(t)-1,t),e,2)}function dV(t){var e=t.getUTCDay();return e>=4||e===0?bg(t):bg.ceil(t)}function Iwe(t,e){return t=dV(t),tr(bg.count(Hc(t),t)+(Hc(t).getUTCDay()===4),e,2)}function Rwe(t){return t.getUTCDay()}function Lwe(t,e){return tr(iN.count(Hc(t)-1,t),e,2)}function Fwe(t,e){return tr(t.getUTCFullYear()%100,e,2)}function $we(t,e){return t=dV(t),tr(t.getUTCFullYear()%100,e,2)}function Bwe(t,e){return tr(t.getUTCFullYear()%1e4,e,4)}function zwe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?bg(t):bg.ceil(t),tr(t.getUTCFullYear()%1e4,e,4)}function qwe(){return"+0000"}function XF(){return"%"}function JF(t){return+t}function ZF(t){return Math.floor(+t/1e3)}var Tm,hV,fV;Uwe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Uwe(t){return Tm=U1e(t),hV=Tm.format,Tm.parse,fV=Tm.utcFormat,Tm.utcParse,Tm}function Vwe(t){return new Date(t)}function Hwe(t){return t instanceof Date?+t:+new Date(+t)}function CM(t,e,n,a,i,s,o,l,c,u){var h=hM(),p=h.invert,m=h.domain,x=u(".%L"),b=u(":%S"),j=u("%I:%M"),w=u("%I %p"),_=u("%a %d"),k=u("%b %d"),C=u("%B"),A=u("%Y");function T(E){return(c(E)<E?x:l(E)<E?b:o(E)<E?j:s(E)<E?w:a(E)<E?i(E)<E?_:k:n(E)<E?C:A)(E)}return h.invert=function(E){return new Date(p(E))},h.domain=function(E){return arguments.length?m(Array.from(E,Hwe)):m().map(Vwe)},h.ticks=function(E){var I=m();return t(I[0],I[I.length-1],E??10)},h.tickFormat=function(E,I){return I==null?T:u(I)},h.nice=function(E){var I=m();return(!E||typeof E.range!="function")&&(E=e(I[0],I[I.length-1],E??10)),E?m(Z7(I,E)):h},h.copy=function(){return Qb(h,CM(t,e,n,a,i,s,o,l,c,u))},h}function Gwe(){return fo.apply(CM(z1e,q1e,Vc,SM,_S,Xb,wM,bM,of,hV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Wwe(){return fo.apply(CM($1e,B1e,Hc,_M,CS,SS,NM,jM,of,fV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kS(){var t=0,e=1,n,a,i,s,o=Bi,l=!1,c;function u(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(s(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),a=s(e=+e),i=n===a?0:1/(a-n),u):[t,e]},u.clamp=function(p){return arguments.length?(l=!!p,u):l},u.interpolator=function(p){return arguments.length?(o=p,u):o};function h(p){return function(m){var x,b;return arguments.length?([x,b]=m,o=p(x,b),u):[o(0),o(1)]}}return u.range=h(Jg),u.rangeRound=h(dM),u.unknown=function(p){return arguments.length?(c=p,u):c},function(p){return s=p,n=p(t),a=p(e),i=n===a?0:1/(a-n),u}}function Ad(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function pV(){var t=Td(kS()(Bi));return t.copy=function(){return Ad(t,pV())},Jc.apply(t,arguments)}function mV(){var t=mM(kS()).domain([1,10]);return t.copy=function(){return Ad(t,mV()).base(t.base())},Jc.apply(t,arguments)}function gV(){var t=gM(kS());return t.copy=function(){return Ad(t,gV()).constant(t.constant())},Jc.apply(t,arguments)}function kM(){var t=yM(kS());return t.copy=function(){return Ad(t,kM()).exponent(t.exponent())},Jc.apply(t,arguments)}function Kwe(){return kM.apply(null,arguments).exponent(.5)}function yV(){var t=[],e=Bi;function n(a){if(a!=null&&!isNaN(a=+a))return e((Kb(t,a,1)-1)/(t.length-1))}return n.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let i of a)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(fd),n},n.interpolator=function(a){return arguments.length?(e=a,n):e},n.range=function(){return t.map((a,i)=>e(i/(t.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(i,s)=>Mje(t,s/a))},n.copy=function(){return yV(e).domain(t)},Jc.apply(n,arguments)}function TS(){var t=0,e=.5,n=1,a=1,i,s,o,l,c,u=Bi,h,p=!1,m;function x(j){return isNaN(j=+j)?m:(j=.5+((j=+h(j))-s)*(a*j<a*s?l:c),u(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([t,e,n]=j,i=h(t=+t),s=h(e=+e),o=h(n=+n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x):[t,e,n]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(u=j,x):u};function b(j){return function(w){var _,k,C;return arguments.length?([_,k,C]=w,u=s1e(j,[_,k,C]),x):[u(0),u(.5),u(1)]}}return x.range=b(Jg),x.rangeRound=b(dM),x.unknown=function(j){return arguments.length?(m=j,x):m},function(j){return h=j,i=j(t),s=j(e),o=j(n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x}}function xV(){var t=Td(TS()(Bi));return t.copy=function(){return Ad(t,xV())},Jc.apply(t,arguments)}function vV(){var t=mM(TS()).domain([.1,1,10]);return t.copy=function(){return Ad(t,vV()).base(t.base())},Jc.apply(t,arguments)}function bV(){var t=gM(TS());return t.copy=function(){return Ad(t,bV()).constant(t.constant())},Jc.apply(t,arguments)}function TM(){var t=yM(TS());return t.copy=function(){return Ad(t,TM()).exponent(t.exponent())},Jc.apply(t,arguments)}function Ywe(){return TM.apply(null,arguments).exponent(.5)}const e$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Jv,scaleDiverging:xV,scaleDivergingLog:vV,scaleDivergingPow:TM,scaleDivergingSqrt:Ywe,scaleDivergingSymlog:bV,scaleIdentity:J7,scaleImplicit:OE,scaleLinear:nN,scaleLog:eV,scaleOrdinal:lM,scalePoint:Av,scalePow:xM,scaleQuantile:rV,scaleQuantize:aV,scaleRadial:nV,scaleSequential:pV,scaleSequentialLog:mV,scaleSequentialPow:kM,scaleSequentialQuantile:yV,scaleSequentialSqrt:Kwe,scaleSequentialSymlog:gV,scaleSqrt:A1e,scaleSymlog:tV,scaleThreshold:iV,scaleTime:Gwe,scaleUtc:Wwe,tickFormat:X7},Symbol.toStringTag,{value:"Module"}));var eA,t$;function AS(){if(t$)return eA;t$=1;var t=Kg();function e(n,a,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=a(l);if(c!=null&&(u===void 0?c===c&&!t(c):i(c,u)))var u=c,h=l}return h}return eA=e,eA}var tA,n$;function jV(){if(n$)return tA;n$=1;function t(e,n){return e>n}return tA=t,tA}var nA,r$;function Qwe(){if(r$)return nA;r$=1;var t=AS(),e=jV(),n=Xg();function a(i){return i&&i.length?t(i,n,e):void 0}return nA=a,nA}var Xwe=Qwe();const ud=Kn(Xwe);var rA,a$;function wV(){if(a$)return rA;a$=1;function t(e,n){return e<n}return rA=t,rA}var aA,i$;function Jwe(){if(i$)return aA;i$=1;var t=AS(),e=wV(),n=Xg();function a(i){return i&&i.length?t(i,n,e):void 0}return aA=a,aA}var Zwe=Jwe();const PS=Kn(Zwe);var iA,s$;function eNe(){if(s$)return iA;s$=1;var t=VO(),e=Wl(),n=E7(),a=gs();function i(s,o){var l=a(s)?t:n;return l(s,e(o,3))}return iA=i,iA}var sA,o$;function tNe(){if(o$)return sA;o$=1;var t=A7(),e=eNe();function n(a,i){return t(e(a,i),1)}return sA=n,sA}var nNe=tNe();const rNe=Kn(nNe);var oA,l$;function aNe(){if(l$)return oA;l$=1;var t=rM();function e(n,a){return t(n,a)}return oA=e,oA}var iNe=aNe();const If=Kn(iNe);var Zg=1e9,sNe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PM,Xr=!0,uo="[DecimalError] ",jf=uo+"Invalid argument: ",AM=uo+"Exponent out of range: ",ey=Math.floor,Jh=Math.pow,oNe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Os,$a=1e7,Hr=7,NV=9007199254740991,sN=ey(NV/Hr),$t={};$t.absoluteValue=$t.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};$t.comparedTo=$t.cmp=function(t){var e,n,a,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(a=s.d.length,i=t.d.length,e=0,n=a<i?a:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return a===i?0:a>i^s.s<0?1:-1};$t.decimalPlaces=$t.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Hr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};$t.dividedBy=$t.div=function(t){return Lc(this,new this.constructor(t))};$t.dividedToIntegerBy=$t.idiv=function(t){var e=this,n=e.constructor;return Pr(Lc(e,new n(t),0,1),n.precision)};$t.equals=$t.eq=function(t){return!this.cmp(t)};$t.exponent=function(){return Na(this)};$t.greaterThan=$t.gt=function(t){return this.cmp(t)>0};$t.greaterThanOrEqualTo=$t.gte=function(t){return this.cmp(t)>=0};$t.isInteger=$t.isint=function(){return this.e>this.d.length-2};$t.isNegative=$t.isneg=function(){return this.s<0};$t.isPositive=$t.ispos=function(){return this.s>0};$t.isZero=function(){return this.s===0};$t.lessThan=$t.lt=function(t){return this.cmp(t)<0};$t.lessThanOrEqualTo=$t.lte=function(t){return this.cmp(t)<1};$t.logarithm=$t.log=function(t){var e,n=this,a=n.constructor,i=a.precision,s=i+5;if(t===void 0)t=new a(10);else if(t=new a(t),t.s<1||t.eq(Os))throw Error(uo+"NaN");if(n.s<1)throw Error(uo+(n.s?"NaN":"-Infinity"));return n.eq(Os)?new a(0):(Xr=!1,e=Lc(rb(n,s),rb(t,s),s),Xr=!0,Pr(e,i))};$t.minus=$t.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?CV(e,t):SV(e,(t.s=-t.s,t))};$t.modulo=$t.mod=function(t){var e,n=this,a=n.constructor,i=a.precision;if(t=new a(t),!t.s)throw Error(uo+"NaN");return n.s?(Xr=!1,e=Lc(n,t,0,1).times(t),Xr=!0,n.minus(e)):Pr(new a(n),i)};$t.naturalExponential=$t.exp=function(){return _V(this)};$t.naturalLogarithm=$t.ln=function(){return rb(this)};$t.negated=$t.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};$t.plus=$t.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?SV(e,t):CV(e,(t.s=-t.s,t))};$t.precision=$t.sd=function(t){var e,n,a,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(jf+t);if(e=Na(i)+1,a=i.d.length-1,n=a*Hr+1,a=i.d[a],a){for(;a%10==0;a/=10)n--;for(a=i.d[0];a>=10;a/=10)n++}return t&&e>n?e:n};$t.squareRoot=$t.sqrt=function(){var t,e,n,a,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(uo+"NaN")}for(t=Na(l),Xr=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Rl(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ey((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),a=new c(e)):a=new c(i.toString()),n=c.precision,i=o=n+3;;)if(s=a,a=s.plus(Lc(l,s,o+2)).times(.5),Rl(s.d).slice(0,o)===(e=Rl(a.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Pr(s,n+1,0),s.times(s).eq(l)){a=s;break}}else if(e!="9999")break;o+=4}return Xr=!0,Pr(a,n)};$t.times=$t.mul=function(t){var e,n,a,i,s,o,l,c,u,h=this,p=h.constructor,m=h.d,x=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,n=h.e+t.e,c=m.length,u=x.length,c<u&&(s=m,m=x,x=s,o=c,c=u,u=o),s=[],o=c+u,a=o;a--;)s.push(0);for(a=u;--a>=0;){for(e=0,i=c+a;i>a;)l=s[i]+x[a]*m[i-a-1]+e,s[i--]=l%$a|0,e=l/$a|0;s[i]=(s[i]+e)%$a|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Xr?Pr(t,p.precision):t};$t.toDecimalPlaces=$t.todp=function(t,e){var n=this,a=n.constructor;return n=new a(n),t===void 0?n:(Ul(t,0,Zg),e===void 0?e=a.rounding:Ul(e,0,8),Pr(n,t+Na(n)+1,e))};$t.toExponential=function(t,e){var n,a=this,i=a.constructor;return t===void 0?n=Rf(a,!0):(Ul(t,0,Zg),e===void 0?e=i.rounding:Ul(e,0,8),a=Pr(new i(a),t+1,e),n=Rf(a,!0,t+1)),n};$t.toFixed=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?Rf(i):(Ul(t,0,Zg),e===void 0?e=s.rounding:Ul(e,0,8),a=Pr(new s(i),t+Na(i)+1,e),n=Rf(a.abs(),!1,t+Na(a)+1),i.isneg()&&!i.isZero()?"-"+n:n)};$t.toInteger=$t.toint=function(){var t=this,e=t.constructor;return Pr(new e(t),Na(t)+1,e.rounding)};$t.toNumber=function(){return+this};$t.toPower=$t.pow=function(t){var e,n,a,i,s,o,l=this,c=l.constructor,u=12,h=+(t=new c(t));if(!t.s)return new c(Os);if(l=new c(l),!l.s){if(t.s<1)throw Error(uo+"Infinity");return l}if(l.eq(Os))return l;if(a=c.precision,t.eq(Os))return Pr(l,a);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=h<0?-h:h)<=NV){for(i=new c(Os),e=Math.ceil(a/Hr+4),Xr=!1;n%2&&(i=i.times(l),u$(i.d,e)),n=ey(n/2),n!==0;)l=l.times(l),u$(l.d,e);return Xr=!0,t.s<0?new c(Os).div(i):Pr(i,a)}}else if(s<0)throw Error(uo+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Xr=!1,i=t.times(rb(l,a+u)),Xr=!0,i=_V(i),i.s=s,i};$t.toPrecision=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?(n=Na(i),a=Rf(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ul(t,1,Zg),e===void 0?e=s.rounding:Ul(e,0,8),i=Pr(new s(i),t,e),n=Na(i),a=Rf(i,t<=n||n<=s.toExpNeg,t)),a};$t.toSignificantDigits=$t.tosd=function(t,e){var n=this,a=n.constructor;return t===void 0?(t=a.precision,e=a.rounding):(Ul(t,1,Zg),e===void 0?e=a.rounding:Ul(e,0,8)),Pr(new a(n),t,e)};$t.toString=$t.valueOf=$t.val=$t.toJSON=$t[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Na(t),n=t.constructor;return Rf(t,e<=n.toExpNeg||e>=n.toExpPos)};function SV(t,e){var n,a,i,s,o,l,c,u,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Xr?Pr(e,p):e;if(c=t.d,u=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(a=c,s=-s,l=u.length):(a=u,i=o,l=c.length),o=Math.ceil(p/Hr),l=o>l?o+1:l+1,s>l&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,a=u,u=c,c=a),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/$a|0,c[s]%=$a;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Xr?Pr(e,p):e}function Ul(t,e,n){if(t!==~~t||t<e||t>n)throw Error(jf+t)}function Rl(t){var e,n,a,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)a=t[e]+"",n=Hr-a.length,n&&(s+=Ju(n)),s+=a;o=t[e],a=o+"",n=Hr-a.length,n&&(s+=Ju(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Lc=function(){function t(a,i){var s,o=0,l=a.length;for(a=a.slice();l--;)s=a[l]*i+o,a[l]=s%$a|0,o=s/$a|0;return o&&a.unshift(o),a}function e(a,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(a[l]!=i[l]){c=a[l]>i[l]?1:-1;break}return c}function n(a,i,s){for(var o=0;s--;)a[s]-=o,o=a[s]<i[s]?1:0,a[s]=o*$a+a[s]-i[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,i,s,o){var l,c,u,h,p,m,x,b,j,w,_,k,C,A,T,E,I,$,U=a.constructor,B=a.s==i.s?1:-1,R=a.d,z=i.d;if(!a.s)return new U(a);if(!i.s)throw Error(uo+"Division by zero");for(c=a.e-i.e,I=z.length,T=R.length,x=new U(B),b=x.d=[],u=0;z[u]==(R[u]||0);)++u;if(z[u]>(R[u]||0)&&--c,s==null?k=s=U.precision:o?k=s+(Na(a)-Na(i))+1:k=s,k<0)return new U(0);if(k=k/Hr+2|0,u=0,I==1)for(h=0,z=z[0],k++;(u<T||h)&&k--;u++)C=h*$a+(R[u]||0),b[u]=C/z|0,h=C%z|0;else{for(h=$a/(z[0]+1)|0,h>1&&(z=t(z,h),R=t(R,h),I=z.length,T=R.length),A=I,j=R.slice(0,I),w=j.length;w<I;)j[w++]=0;$=z.slice(),$.unshift(0),E=z[0],z[1]>=$a/2&&++E;do h=0,l=e(z,j,I,w),l<0?(_=j[0],I!=w&&(_=_*$a+(j[1]||0)),h=_/E|0,h>1?(h>=$a&&(h=$a-1),p=t(z,h),m=p.length,w=j.length,l=e(p,j,m,w),l==1&&(h--,n(p,I<m?$:z,m))):(h==0&&(l=h=1),p=z.slice()),m=p.length,m<w&&p.unshift(0),n(j,p,w),l==-1&&(w=j.length,l=e(z,j,I,w),l<1&&(h++,n(j,I<w?$:z,w))),w=j.length):l===0&&(h++,j=[0]),b[u++]=h,l&&j[0]?j[w++]=R[A]||0:(j=[R[A]],w=1);while((A++<T||j[0]!==void 0)&&k--)}return b[0]||b.shift(),x.e=c,Pr(x,o?s+Na(x)+1:s)}}();function _V(t,e){var n,a,i,s,o,l,c=0,u=0,h=t.constructor,p=h.precision;if(Na(t)>16)throw Error(AM+Na(t));if(!t.s)return new h(Os);for(Xr=!1,l=p,o=new h(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(a=Math.log(Jh(2,u))/Math.LN10*2+5|0,l+=a,n=i=s=new h(Os),h.precision=l;;){if(i=Pr(i.times(t),l),n=n.times(++c),o=s.plus(Lc(i,n,l)),Rl(o.d).slice(0,l)===Rl(s.d).slice(0,l)){for(;u--;)s=Pr(s.times(s),l);return h.precision=p,e==null?(Xr=!0,Pr(s,p)):s}s=o}}function Na(t){for(var e=t.e*Hr,n=t.d[0];n>=10;n/=10)e++;return e}function lA(t,e,n){if(e>t.LN10.sd())throw Xr=!0,n&&(t.precision=n),Error(uo+"LN10 precision limit exceeded");return Pr(new t(t.LN10),e)}function Ju(t){for(var e="";t--;)e+="0";return e}function rb(t,e){var n,a,i,s,o,l,c,u,h,p=1,m=10,x=t,b=x.d,j=x.constructor,w=j.precision;if(x.s<1)throw Error(uo+(x.s?"NaN":"-Infinity"));if(x.eq(Os))return new j(0);if(e==null?(Xr=!1,u=w):u=e,x.eq(10))return e==null&&(Xr=!0),lA(j,u);if(u+=m,j.precision=u,n=Rl(b),a=n.charAt(0),s=Na(x),Math.abs(s)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)x=x.times(t),n=Rl(x.d),a=n.charAt(0),p++;s=Na(x),a>1?(x=new j("0."+n),s++):x=new j(a+"."+n.slice(1))}else return c=lA(j,u+2,w).times(s+""),x=rb(new j(a+"."+n.slice(1)),u-m).plus(c),j.precision=w,e==null?(Xr=!0,Pr(x,w)):x;for(l=o=x=Lc(x.minus(Os),x.plus(Os),u),h=Pr(x.times(x),u),i=3;;){if(o=Pr(o.times(h),u),c=l.plus(Lc(o,new j(i),u)),Rl(c.d).slice(0,u)===Rl(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(lA(j,u+2,w).times(s+""))),l=Lc(l,new j(p),u),j.precision=w,e==null?(Xr=!0,Pr(l,w)):l;l=c,i+=2}}function c$(t,e){var n,a,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(n<0&&(n=a),n+=+e.slice(a+1),e=e.substring(0,a)):n<0&&(n=e.length),a=0;e.charCodeAt(a)===48;)++a;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(a,i),e){if(i-=a,n=n-a-1,t.e=ey(n/Hr),t.d=[],a=(n+1)%Hr,n<0&&(a+=Hr),a<i){for(a&&t.d.push(+e.slice(0,a)),i-=Hr;a<i;)t.d.push(+e.slice(a,a+=Hr));e=e.slice(a),a=Hr-e.length}else a-=i;for(;a--;)e+="0";if(t.d.push(+e),Xr&&(t.e>sN||t.e<-sN))throw Error(AM+n)}else t.s=0,t.e=0,t.d=[0];return t}function Pr(t,e,n){var a,i,s,o,l,c,u,h,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(a=e-o,a<0)a+=Hr,i=e,u=p[h=0];else{if(h=Math.ceil((a+1)/Hr),s=p.length,h>=s)return t;for(u=s=p[h],o=1;s>=10;s/=10)o++;a%=Hr,i=a-Hr+o}if(n!==void 0&&(s=Jh(10,o-i-1),l=u/s%10|0,c=e<0||p[h+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?i>0?u/Jh(10,o-i):0:p[h-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(s=Na(t),p.length=1,e=e-s-1,p[0]=Jh(10,(Hr-e%Hr)%Hr),t.e=ey(-e/Hr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(a==0?(p.length=h,s=1,h--):(p.length=h+1,s=Jh(10,Hr-a),p[h]=i>0?(u/Jh(10,o-i)%Jh(10,i)|0)*s:0),c)for(;;)if(h==0){(p[0]+=s)==$a&&(p[0]=1,++t.e);break}else{if(p[h]+=s,p[h]!=$a)break;p[h--]=0,s=1}for(a=p.length;p[--a]===0;)p.pop();if(Xr&&(t.e>sN||t.e<-sN))throw Error(AM+Na(t));return t}function CV(t,e){var n,a,i,s,o,l,c,u,h,p,m=t.constructor,x=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Xr?Pr(e,x):e;if(c=t.d,p=e.d,a=e.e,u=t.e,c=c.slice(),o=u-a,o){for(h=o<0,h?(n=c,o=-o,l=p.length):(n=p,a=u,l=c.length),i=Math.max(Math.ceil(x/Hr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=p.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){h=c[i]<p[i];break}o=0}for(h&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(s=i;s&&c[--s]===0;)c[s]=$a-1;--c[s],c[i]+=$a}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(e.d=c,e.e=a,Xr?Pr(e,x):e):new m(0)}function Rf(t,e,n){var a,i=Na(t),s=Rl(t.d),o=s.length;return e?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ju(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ju(-i-1)+s,n&&(a=n-o)>0&&(s+=Ju(a))):i>=o?(s+=Ju(i+1-o),n&&(a=n-i-1)>0&&(s=s+"."+Ju(a))):((a=i+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(i+1===o&&(s+="."),s+=Ju(a))),t.s<0?"-"+s:s}function u$(t,e){if(t.length>e)return t.length=e,!0}function kV(t){var e,n,a;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(jf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return c$(o,s.toString())}else if(typeof s!="string")throw Error(jf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,oNe.test(s))c$(o,s);else throw Error(jf+s)}if(i.prototype=$t,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=kV,i.config=i.set=lNe,t===void 0&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<a.length;)t.hasOwnProperty(n=a[e++])||(t[n]=this[n]);return i.config(t),i}function lNe(t){if(!t||typeof t!="object")throw Error(uo+"Object expected");var e,n,a,i=["precision",1,Zg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((a=t[n=i[e]])!==void 0)if(ey(a)===a&&a>=i[e+1]&&a<=i[e+2])this[n]=a;else throw Error(jf+n+": "+a);if((a=t[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(jf+n+": "+a);return this}var PM=kV(sNe);Os=new PM(1);const Cr=PM;function cNe(t){return fNe(t)||hNe(t)||dNe(t)||uNe()}function uNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dNe(t,e){if(t){if(typeof t=="string")return LE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LE(t,e)}}function hNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function fNe(t){if(Array.isArray(t))return LE(t)}function LE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var pNe=function(e){return e},TV={},AV=function(e){return e===TV},d$=function(e){return function n(){return arguments.length===0||arguments.length===1&&AV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},mNe=function t(e,n){return e===1?n:d$(function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==TV}).length;return o>=e?n.apply(void 0,i):t(e-o,d$(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var h=i.map(function(p){return AV(p)?c.shift():p});return n.apply(void 0,cNe(h).concat(c))}))})},ES=function(e){return mNe(e.length,e)},FE=function(e,n){for(var a=[],i=e;i<n;++i)a[i-e]=i;return a},gNe=ES(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),yNe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(!n.length)return pNe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},$E=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},PV=function(e){var n=null,a=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,a=e.apply(void 0,s)),a}};function xNe(t){var e;return t===0?e=1:e=Math.floor(new Cr(t).abs().log(10).toNumber())+1,e}function vNe(t,e,n){for(var a=new Cr(t),i=0,s=[];a.lt(e)&&i<1e5;)s.push(a.toNumber()),a=a.add(n),i++;return s}var bNe=ES(function(t,e,n){var a=+t,i=+e;return a+n*(i-a)}),jNe=ES(function(t,e,n){var a=e-+t;return a=a||1/0,(n-t)/a}),wNe=ES(function(t,e,n){var a=e-+t;return a=a||1/0,Math.max(0,Math.min(1,(n-t)/a))});const DS={rangeStep:vNe,getDigitCount:xNe,interpolateNumber:bNe,uninterpolateNumber:jNe,uninterpolateTruncation:wNe};function BE(t){return _Ne(t)||SNe(t)||EV(t)||NNe()}function NNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function _Ne(t){if(Array.isArray(t))return zE(t)}function ab(t,e){return TNe(t)||kNe(t,e)||EV(t,e)||CNe()}function CNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EV(t,e){if(t){if(typeof t=="string")return zE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zE(t,e)}}function zE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function kNe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],a=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));a=!0);}catch(c){i=!0,s=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function TNe(t){if(Array.isArray(t))return t}function DV(t){var e=ab(t,2),n=e[0],a=e[1],i=n,s=a;return n>a&&(i=a,s=n),[i,s]}function OV(t,e,n){if(t.lte(0))return new Cr(0);var a=DS.getDigitCount(t.toNumber()),i=new Cr(10).pow(a),s=t.div(i),o=a!==1?.05:.1,l=new Cr(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new Cr(Math.ceil(c))}function ANe(t,e,n){var a=1,i=new Cr(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(a=new Cr(10).pow(DS.getDigitCount(t)-1),i=new Cr(Math.floor(i.div(a).toNumber())).mul(a)):s>1&&(i=new Cr(Math.floor(t)))}else t===0?i=new Cr(Math.floor((e-1)/2)):n||(i=new Cr(Math.floor(t)));var o=Math.floor((e-1)/2),l=yNe(gNe(function(c){return i.add(new Cr(c-o).mul(a)).toNumber()}),FE);return l(0,e)}function MV(t,e,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Cr(0),tickMin:new Cr(0),tickMax:new Cr(0)};var s=OV(new Cr(e).sub(t).div(n-1),a,i),o;t<=0&&e>=0?o=new Cr(0):(o=new Cr(t).add(e).div(2),o=o.sub(new Cr(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new Cr(e).sub(o).div(s).toNumber()),u=l+c+1;return u>n?MV(t,e,n,a,i+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:s,tickMin:o.sub(new Cr(l).mul(s)),tickMax:o.add(new Cr(c).mul(s))})}function PNe(t){var e=ab(t,2),n=e[0],a=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=DV([n,a]),c=ab(l,2),u=c[0],h=c[1];if(u===-1/0||h===1/0){var p=h===1/0?[u].concat(BE(FE(0,i-1).map(function(){return 1/0}))):[].concat(BE(FE(0,i-1).map(function(){return-1/0})),[h]);return n>a?$E(p):p}if(u===h)return ANe(u,i,s);var m=MV(u,h,o,s),x=m.step,b=m.tickMin,j=m.tickMax,w=DS.rangeStep(b,j.add(new Cr(.1).mul(x)),x);return n>a?$E(w):w}function ENe(t,e){var n=ab(t,2),a=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=DV([a,i]),l=ab(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[a,i];if(c===u)return[c];var h=Math.max(e,2),p=OV(new Cr(u).sub(c).div(h-1),s,0),m=[].concat(BE(DS.rangeStep(new Cr(c),new Cr(u).sub(new Cr(.99).mul(p)),p)),[u]);return a>i?$E(m):m}var DNe=PV(PNe),ONe=PV(ENe),MNe="Invariant failed";function Lf(t,e){throw new Error(MNe)}var INe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oN.apply(this,arguments)}function RNe(t,e){return BNe(t)||$Ne(t,e)||FNe(t,e)||LNe()}function LNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FNe(t,e){if(t){if(typeof t=="string")return h$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h$(t,e)}}function h$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function $Ne(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function BNe(t){if(Array.isArray(t))return t}function zNe(t,e){if(t==null)return{};var n=qNe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function qNe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function UNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VNe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,LV(a.key),a)}}function HNe(t,e,n){return e&&VNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GNe(t,e,n){return e=lN(e),WNe(t,IV()?Reflect.construct(e,n||[],lN(t).constructor):e.apply(t,n))}function WNe(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KNe(t)}function KNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IV=function(){return!!t})()}function lN(t){return lN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lN(t)}function YNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qE(t,e)}function qE(t,e){return qE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},qE(t,e)}function RV(t,e,n){return e=LV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LV(t){var e=QNe(t,"string");return jg(e)=="symbol"?e:e+""}function QNe(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(jg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Jb=function(t){function e(){return UNe(this,e),GNe(this,e,arguments)}return YNe(e,t),HNe(e,[{key:"render",value:function(){var a=this.props,i=a.offset,s=a.layout,o=a.width,l=a.dataKey,c=a.data,u=a.dataPointFormatter,h=a.xAxis,p=a.yAxis,m=zNe(a,INe),x=Ut(m,!1);this.props.direction==="x"&&h.type!=="number"&&Lf();var b=c.map(function(j){var w=u(j,l),_=w.x,k=w.y,C=w.value,A=w.errorVal;if(!A)return null;var T=[],E,I;if(Array.isArray(A)){var $=RNe(A,2);E=$[0],I=$[1]}else E=I=A;if(s==="vertical"){var U=h.scale,B=k+i,R=B+o,z=B-o,G=U(C-E),K=U(C+I);T.push({x1:K,y1:R,x2:K,y2:z}),T.push({x1:G,y1:B,x2:K,y2:B}),T.push({x1:G,y1:R,x2:G,y2:z})}else if(s==="horizontal"){var Y=p.scale,q=_+i,V=q-o,H=q+o,Q=Y(C-E),L=Y(C+I);T.push({x1:V,y1:L,x2:H,y2:L}),T.push({x1:q,y1:Q,x2:q,y2:L}),T.push({x1:V,y1:Q,x2:H,y2:Q})}return Te.createElement(Rn,oN({className:"recharts-errorBar",key:"bar-".concat(T.map(function(te){return"".concat(te.x1,"-").concat(te.x2,"-").concat(te.y1,"-").concat(te.y2)}))},x),T.map(function(te){return Te.createElement("line",oN({},te,{key:"line-".concat(te.x1,"-").concat(te.x2,"-").concat(te.y1,"-").concat(te.y2)}))}))});return Te.createElement(Rn,{className:"recharts-errorBars"},b)}}])}(Te.Component);RV(Jb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});RV(Jb,"displayName","ErrorBar");function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function f$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Wh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f$(Object(n),!0).forEach(function(a){XNe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function XNe(t,e,n){return e=JNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JNe(t){var e=ZNe(t,"string");return ib(e)=="symbol"?e:e+""}function ZNe(t,e){if(ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ib(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FV=function(e){var n=e.children,a=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=Es(n,Rc);if(!o)return null;var l=Rc.defaultProps,c=l!==void 0?Wh(Wh({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(a||[]).reduce(function(h,p){var m=p.item,x=p.props,b=x.sectors||x.data||[];return h.concat(b.map(function(j){return{type:o.props.iconType||m.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):u=(a||[]).map(function(h){var p=h.item,m=p.type.defaultProps,x=m!==void 0?Wh(Wh({},m),p.props):{},b=x.dataKey,j=x.name,w=x.legendType,_=x.hide;return{inactive:_,dataKey:b,type:c.iconType||w||"square",color:EM(p),value:j||b,payload:x}}),Wh(Wh(Wh({},c),Rc.getWithHeight(o,i)),{},{payload:u,item:o})};function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}function p$(t){return rSe(t)||nSe(t)||tSe(t)||eSe()}function eSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tSe(t,e){if(t){if(typeof t=="string")return UE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UE(t,e)}}function nSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rSe(t){if(Array.isArray(t))return UE(t)}function UE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function m$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function sa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(n),!0).forEach(function(a){Wm(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Wm(t,e,n){return e=aSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aSe(t){var e=iSe(t,"string");return sb(e)=="symbol"?e:e+""}function iSe(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(sb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ma(t,e,n){return hn(t)||hn(e)?n:Ea(e)?Fs(t,e,n):on(e)?e(t):n}function Pv(t,e,n,a){var i=rNe(t,function(l){return ma(l,e)});if(n==="number"){var s=i.filter(function(l){return Nt(l)||parseFloat(l)});return s.length?[PS(s),ud(s)]:[1/0,-1/0]}var o=a?i.filter(function(l){return!hn(l)}):i;return o.map(function(l){return Ea(l)||l instanceof Date?l:""})}var sSe=function(e){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var h=u>0?i[u-1].coordinate:i[l-1].coordinate,p=i[u].coordinate,m=u>=l-1?i[0].coordinate:i[u+1].coordinate,x=void 0;if(Fi(p-h)!==Fi(m-p)){var b=[];if(Fi(m-p)===Fi(c[1]-c[0])){x=m;var j=p+c[1]-c[0];b[0]=Math.min(j,(j+h)/2),b[1]=Math.max(j,(j+h)/2)}else{x=h;var w=m+c[1]-c[0];b[0]=Math.min(p,(w+p)/2),b[1]=Math.max(p,(w+p)/2)}var _=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>_[0]&&e<=_[1]||e>=b[0]&&e<=b[1]){o=i[u].index;break}}else{var k=Math.min(h,m),C=Math.max(h,m);if(e>(k+p)/2&&e<=(C+p)/2){o=i[u].index;break}}}else for(var A=0;A<l;A++)if(A===0&&e<=(a[A].coordinate+a[A+1].coordinate)/2||A>0&&A<l-1&&e>(a[A].coordinate+a[A-1].coordinate)/2&&e<=(a[A].coordinate+a[A+1].coordinate)/2||A===l-1&&e>(a[A].coordinate+a[A-1].coordinate)/2){o=a[A].index;break}return o},EM=function(e){var n,a=e,i=a.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?sa(sa({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},oSe=function(e){var n=e.barSize,a=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var h=s[l[c]].stackGroups,p=Object.keys(h),m=0,x=p.length;m<x;m++){var b=h[p[m]],j=b.items,w=b.cateAxisId,_=j.filter(function(I){return Ic(I.type).indexOf("Bar")>=0});if(_&&_.length){var k=_[0].type.defaultProps,C=k!==void 0?sa(sa({},k),_[0].props):_[0].props,A=C.barSize,T=C[w];o[T]||(o[T]=[]);var E=hn(A)?n:A;o[T].push({item:_[0],stackList:_.slice(1),barSize:hn(E)?void 0:$i(E,a,0)})}}return o},lSe=function(e){var n=e.barGap,a=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=$i(n,i,0,!0),h,p=[];if(o[0].barSize===+o[0].barSize){var m=!1,x=i/c,b=o.reduce(function(A,T){return A+T.barSize||0},0);b+=(c-1)*u,b>=i&&(b-=(c-1)*u,u=0),b>=i&&x>0&&(m=!0,x*=.9,b=c*x);var j=(i-b)/2>>0,w={offset:j-u,size:0};h=o.reduce(function(A,T){var E={item:T.item,position:{offset:w.offset+w.size+u,size:m?x:T.barSize}},I=[].concat(p$(A),[E]);return w=I[I.length-1].position,T.stackList&&T.stackList.length&&T.stackList.forEach(function($){I.push({item:$,position:w})}),I},p)}else{var _=$i(a,i,0,!0);i-2*_-(c-1)*u<=0&&(u=0);var k=(i-2*_-(c-1)*u)/c;k>1&&(k>>=0);var C=l===+l?Math.min(k,l):k;h=o.reduce(function(A,T,E){var I=[].concat(p$(A),[{item:T.item,position:{offset:_+(k+u)*E+(k-C)/2,size:C}}]);return T.stackList&&T.stackList.length&&T.stackList.forEach(function($){I.push({item:$,position:I[I.length-1].position})}),I},p)}return h},cSe=function(e,n,a,i){var s=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),u=FV({children:s,legendWidth:c});if(u){var h=i||{},p=h.width,m=h.height,x=u.align,b=u.verticalAlign,j=u.layout;if((j==="vertical"||j==="horizontal"&&b==="middle")&&x!=="center"&&Nt(e[x]))return sa(sa({},e),{},Wm({},x,e[x]+(p||0)));if((j==="horizontal"||j==="vertical"&&x==="center")&&b!=="middle"&&Nt(e[b]))return sa(sa({},e),{},Wm({},b,e[b]+(m||0)))}return e},uSe=function(e,n,a){return hn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},$V=function(e,n,a,i,s){var o=n.props.children,l=$s(o,Jb).filter(function(u){return uSe(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,h){var p=ma(h,a);if(hn(p))return u;var m=Array.isArray(p)?[PS(p),ud(p)]:[p,p],x=c.reduce(function(b,j){var w=ma(h,j,0),_=m[0]-Math.abs(Array.isArray(w)?w[0]:w),k=m[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(_,b[0]),Math.max(k,b[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},dSe=function(e,n,a,i,s){var o=n.map(function(l){return $V(e,l,a,s,i)}).filter(function(l){return!hn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},BV=function(e,n,a,i,s){var o=n.map(function(c){var u=c.props.dataKey;return a==="number"&&u&&$V(e,c,u,i)||Pv(e,u,a,s)});if(a==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var h=0,p=u.length;h<p;h++)l[u[h]]||(l[u[h]]=!0,c.push(u[h]));return c},[])},zV=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},qV=function(e,n,a,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===a&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(a),l},Dc=function(e,n,a){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||a)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Fi(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var h=(e.ticks||e.niceTicks).map(function(p){var m=s?s.indexOf(p):p;return{coordinate:i(m)+u,value:p,offset:u}});return h.filter(function(p){return!Qg(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,m){return{coordinate:i(p)+u,value:p,index:m,offset:u}}):i.ticks&&!a?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+u,value:p,offset:u}}):i.domain().map(function(p,m){return{coordinate:i(p)+u,value:s?s[p]:p,index:m,offset:u}})},cA=new WeakMap,U1=function(e,n){if(typeof n!="function")return e;cA.has(e)||cA.set(e,new WeakMap);var a=cA.get(e);if(a.has(n))return a.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,i),i},UV=function(e,n,a){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Jv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:nN(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:Av(),realScaleType:"point"}:s==="category"?{scale:Jv(),realScaleType:"band"}:{scale:nN(),realScaleType:"linear"};if(Df(i)){var c="scale".concat(gS(i));return{scale:(e$[c]||Av)(),realScaleType:e$[c]?c:"point"}}return on(i)?{scale:i}:{scale:Av(),realScaleType:"point"}},g$=1e-4,VV=function(e){var n=e.domain();if(!(!n||n.length<=2)){var a=n.length,i=e.range(),s=Math.min(i[0],i[1])-g$,o=Math.max(i[0],i[1])+g$,l=e(n[0]),c=e(n[a-1]);(l<s||l>o||c<s||c>o)&&e.domain([n[0],n[a-1]])}},hSe=function(e,n){if(!e)return null;for(var a=0,i=e.length;a<i;a++)if(e[a].item===n)return e[a].position;return null},fSe=function(e,n){if(!n||n.length!==2||!Nt(n[0])||!Nt(n[1]))return e;var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Nt(e[0])||e[0]<a)&&(s[0]=a),(!Nt(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<a&&(s[1]=a),s},pSe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0,l=0;l<n;++l){var c=Qg(e[l][a][1])?e[l][a][0]:e[l][a][1];c>=0?(e[l][a][0]=s,e[l][a][1]=s+c,s=e[l][a][1]):(e[l][a][0]=o,e[l][a][1]=o+c,o=e[l][a][1])}},mSe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0;o<n;++o){var l=Qg(e[o][a][1])?e[o][a][0]:e[o][a][1];l>=0?(e[o][a][0]=s,e[o][a][1]=s+l,s=e[o][a][1]):(e[o][a][0]=0,e[o][a][1]=0)}},gSe={sign:pSe,expand:ove,none:fg,silhouette:lve,wiggle:cve,positive:mSe},ySe=function(e,n,a){var i=n.map(function(l){return l.props.dataKey}),s=gSe[a],o=sve().keys(i).value(function(l,c){return+ma(l,c,0)}).order(vE).offset(s);return o(e)},xSe=function(e,n,a,i,s,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(p,m){var x,b=(x=m.type)!==null&&x!==void 0&&x.defaultProps?sa(sa({},m.type.defaultProps),m.props):m.props,j=b.stackId,w=b.hide;if(w)return p;var _=b[a],k=p[_]||{hasStack:!1,stackGroups:{}};if(Ea(j)){var C=k.stackGroups[j]||{numericAxisId:a,cateAxisId:i,items:[]};C.items.push(m),k.hasStack=!0,k.stackGroups[j]=C}else k.stackGroups[Uf("_stackId_")]={numericAxisId:a,cateAxisId:i,items:[m]};return sa(sa({},p),{},Wm({},_,k))},c),h={};return Object.keys(u).reduce(function(p,m){var x=u[m];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(j,w){var _=x.stackGroups[w];return sa(sa({},j),{},Wm({},w,{numericAxisId:a,cateAxisId:i,items:_.items,stackedData:ySe(e,_.items,s)}))},b)}return sa(sa({},p),{},Wm({},m,x))},h)},HV=function(e,n){var a=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=a||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var h=DNe(u,s,l);return e.domain([PS(h),ud(h)]),{niceTicks:h}}if(s&&i==="number"){var p=e.domain(),m=ONe(p,s,l);return{niceTicks:m}}return null};function cN(t){var e=t.axis,n=t.ticks,a=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!hn(i[e.dataKey])){var l=Fw(n,"value",i[e.dataKey]);if(l)return l.coordinate+a/2}return n[s]?n[s].coordinate+a/2:null}var c=ma(i,hn(o)?e.dataKey:o);return hn(c)?null:e.scale(c)}var y$=function(e){var n=e.axis,a=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return a[l]?a[l].coordinate+i:null;var c=ma(o,n.dataKey,n.domain[l]);return hn(c)?null:n.scale(c)-s/2+i},vSe=function(e){var n=e.numericAxis,a=n.scale.domain();if(n.type==="number"){var i=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);return i<=0&&s>=0?0:s<0?s:i}return a[0]},bSe=function(e,n){var a,i=(a=e.type)!==null&&a!==void 0&&a.defaultProps?sa(sa({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Ea(s)){var o=n[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},jSe=function(e){return e.reduce(function(n,a){return[PS(a.concat([n[0]]).filter(Nt)),ud(a.concat([n[1]]).filter(Nt))]},[1/0,-1/0])},GV=function(e,n,a){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(u,h){var p=jSe(h.slice(n,a+1));return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},x$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,v$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VE=function(e,n,a){if(on(e))return e(n,a);if(!Array.isArray(e))return n;var i=[];if(Nt(e[0]))i[0]=a?e[0]:Math.min(e[0],n[0]);else if(x$.test(e[0])){var s=+x$.exec(e[0])[1];i[0]=n[0]-s}else on(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Nt(e[1]))i[1]=a?e[1]:Math.max(e[1],n[1]);else if(v$.test(e[1])){var o=+v$.exec(e[1])[1];i[1]=n[1]+o}else on(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},uN=function(e,n,a){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!a||i>0)return i}if(e&&n&&n.length>=2){for(var s=iM(n,function(p){return p.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],h=s[l-1];o=Math.min((u.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},b$=function(e,n,a){return!e||!e.length||If(e,Fs(a,"type.defaultProps.domain"))?n:e},WV=function(e,n){var a=e.type.defaultProps?sa(sa({},e.type.defaultProps),e.props):e.props,i=a.dataKey,s=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,u=a.chartType,h=a.hide;return sa(sa({},Ut(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:EM(e),value:ma(n,i),type:c,payload:n,chartType:u,hide:h})};function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function j$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function _c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(n),!0).forEach(function(a){KV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function KV(t,e,n){return e=wSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wSe(t){var e=NSe(t,"string");return ob(e)=="symbol"?e:e+""}function NSe(t,e){if(ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ob(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SSe(t,e){return TSe(t)||kSe(t,e)||CSe(t,e)||_Se()}function _Se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CSe(t,e){if(t){if(typeof t=="string")return w$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w$(t,e)}}function w$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function kSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function TSe(t){if(Array.isArray(t))return t}var dN=Math.PI/180,ASe=function(e){return e*180/Math.PI},Br=function(e,n,a,i){return{x:e+Math.cos(-dN*i)*a,y:n+Math.sin(-dN*i)*a}},YV=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},PSe=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,h=$i(e.cx,o,o/2),p=$i(e.cy,l,l/2),m=YV(o,l,a),x=$i(e.innerRadius,m,0),b=$i(e.outerRadius,m,m*.8),j=Object.keys(n);return j.reduce(function(w,_){var k=n[_],C=k.domain,A=k.reversed,T;if(hn(k.range))i==="angleAxis"?T=[c,u]:i==="radiusAxis"&&(T=[x,b]),A&&(T=[T[1],T[0]]);else{T=k.range;var E=T,I=SSe(E,2);c=I[0],u=I[1]}var $=UV(k,s),U=$.realScaleType,B=$.scale;B.domain(C).range(T),VV(B);var R=HV(B,_c(_c({},k),{},{realScaleType:U})),z=_c(_c(_c({},k),R),{},{range:T,radius:b,realScaleType:U,scale:B,cx:h,cy:p,innerRadius:x,outerRadius:b,startAngle:c,endAngle:u});return _c(_c({},w),{},KV({},_,z))},{})},ESe=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(a-s,2)+Math.pow(i-o,2))},DSe=function(e,n){var a=e.x,i=e.y,s=n.cx,o=n.cy,l=ESe({x:a,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(a-s)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:ASe(u),angleInRadian:u}},OSe=function(e){var n=e.startAngle,a=e.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:a-o*360}},MSe=function(e,n){var a=n.startAngle,i=n.endAngle,s=Math.floor(a/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},N$=function(e,n){var a=e.x,i=e.y,s=DSe({x:a,y:i},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var h=OSe(n),p=h.startAngle,m=h.endAngle,x=l,b;if(p<=m){for(;x>m;)x-=360;for(;x<p;)x+=360;b=x>=p&&x<=m}else{for(;x>p;)x-=360;for(;x<m;)x+=360;b=x>=m&&x<=p}return b?_c(_c({},n),{},{radius:o,angle:MSe(x,n)}):null},QV=function(e){return!v.isValidElement(e)&&!on(e)&&typeof e!="boolean"?e.className:""};function lb(t){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(t)}var ISe=["offset"];function RSe(t){return BSe(t)||$Se(t)||FSe(t)||LSe()}function LSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FSe(t,e){if(t){if(typeof t=="string")return HE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HE(t,e)}}function $Se(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BSe(t){if(Array.isArray(t))return HE(t)}function HE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function zSe(t,e){if(t==null)return{};var n=qSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function qSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function S$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S$(Object(n),!0).forEach(function(a){USe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function USe(t,e,n){return e=VSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VSe(t){var e=HSe(t,"string");return lb(e)=="symbol"?e:e+""}function HSe(t,e){if(lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(lb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cb(){return cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cb.apply(this,arguments)}var GSe=function(e){var n=e.value,a=e.formatter,i=hn(e.children)?n:e.children;return on(a)?a(i):i},WSe=function(e,n){var a=Fi(n-e),i=Math.min(Math.abs(n-e),360);return a*i},KSe=function(e,n,a){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,u=c.cx,h=c.cy,p=c.innerRadius,m=c.outerRadius,x=c.startAngle,b=c.endAngle,j=c.clockWise,w=(p+m)/2,_=WSe(x,b),k=_>=0?1:-1,C,A;i==="insideStart"?(C=x+k*o,A=j):i==="insideEnd"?(C=b-k*o,A=!j):i==="end"&&(C=b+k*o,A=j),A=_<=0?A:!A;var T=Br(u,h,w,C),E=Br(u,h,w,C+(A?1:-1)*359),I="M".concat(T.x,",").concat(T.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(A?0:1,`,
    `).concat(E.x,",").concat(E.y),$=hn(e.id)?Uf("recharts-radial-line-"):e.id;return Te.createElement("text",cb({},a,{dominantBaseline:"central",className:mn("recharts-radial-bar-label",l)}),Te.createElement("defs",null,Te.createElement("path",{id:$,d:I})),Te.createElement("textPath",{xlinkHref:"#".concat($)},n))},YSe=function(e){var n=e.viewBox,a=e.offset,i=e.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,h=s.startAngle,p=s.endAngle,m=(h+p)/2;if(i==="outside"){var x=Br(o,l,u+a,m),b=x.x,j=x.y;return{x:b,y:j,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var w=(c+u)/2,_=Br(o,l,w,m),k=_.x,C=_.y;return{x:k,y:C,textAnchor:"middle",verticalAnchor:"middle"}},QSe=function(e){var n=e.viewBox,a=e.parentViewBox,i=e.offset,s=e.position,o=n,l=o.x,c=o.y,u=o.width,h=o.height,p=h>=0?1:-1,m=p*i,x=p>0?"end":"start",b=p>0?"start":"end",j=u>=0?1:-1,w=j*i,_=j>0?"end":"start",k=j>0?"start":"end";if(s==="top"){var C={x:l+u/2,y:c-p*i,textAnchor:"middle",verticalAnchor:x};return Ta(Ta({},C),a?{height:Math.max(c-a.y,0),width:u}:{})}if(s==="bottom"){var A={x:l+u/2,y:c+h+m,textAnchor:"middle",verticalAnchor:b};return Ta(Ta({},A),a?{height:Math.max(a.y+a.height-(c+h),0),width:u}:{})}if(s==="left"){var T={x:l-w,y:c+h/2,textAnchor:_,verticalAnchor:"middle"};return Ta(Ta({},T),a?{width:Math.max(T.x-a.x,0),height:h}:{})}if(s==="right"){var E={x:l+u+w,y:c+h/2,textAnchor:k,verticalAnchor:"middle"};return Ta(Ta({},E),a?{width:Math.max(a.x+a.width-E.x,0),height:h}:{})}var I=a?{width:u,height:h}:{};return s==="insideLeft"?Ta({x:l+w,y:c+h/2,textAnchor:k,verticalAnchor:"middle"},I):s==="insideRight"?Ta({x:l+u-w,y:c+h/2,textAnchor:_,verticalAnchor:"middle"},I):s==="insideTop"?Ta({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:b},I):s==="insideBottom"?Ta({x:l+u/2,y:c+h-m,textAnchor:"middle",verticalAnchor:x},I):s==="insideTopLeft"?Ta({x:l+w,y:c+m,textAnchor:k,verticalAnchor:b},I):s==="insideTopRight"?Ta({x:l+u-w,y:c+m,textAnchor:_,verticalAnchor:b},I):s==="insideBottomLeft"?Ta({x:l+w,y:c+h-m,textAnchor:k,verticalAnchor:x},I):s==="insideBottomRight"?Ta({x:l+u-w,y:c+h-m,textAnchor:_,verticalAnchor:x},I):Yg(s)&&(Nt(s.x)||af(s.x))&&(Nt(s.y)||af(s.y))?Ta({x:l+$i(s.x,u),y:c+$i(s.y,h),textAnchor:"end",verticalAnchor:"end"},I):Ta({x:l+u/2,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},I)},XSe=function(e){return"cx"in e&&Nt(e.cx)};function Ba(t){var e=t.offset,n=e===void 0?5:e,a=zSe(t,ISe),i=Ta({offset:n},a),s=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,h=i.className,p=h===void 0?"":h,m=i.textBreakAll;if(!s||hn(l)&&hn(c)&&!v.isValidElement(u)&&!on(u))return null;if(v.isValidElement(u))return v.cloneElement(u,i);var x;if(on(u)){if(x=v.createElement(u,i),v.isValidElement(x))return x}else x=GSe(i);var b=XSe(s),j=Ut(i,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return KSe(i,x,j);var w=b?YSe(i):QSe(i);return Te.createElement(Mf,cb({className:mn("recharts-label",p)},j,w,{breakAll:m}),x)}Ba.displayName="Label";var XV=function(e){var n=e.cx,a=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,h=e.outerRadius,p=e.x,m=e.y,x=e.top,b=e.left,j=e.width,w=e.height,_=e.clockWise,k=e.labelViewBox;if(k)return k;if(Nt(j)&&Nt(w)){if(Nt(p)&&Nt(m))return{x:p,y:m,width:j,height:w};if(Nt(x)&&Nt(b))return{x,y:b,width:j,height:w}}return Nt(p)&&Nt(m)?{x:p,y:m,width:0,height:0}:Nt(n)&&Nt(a)?{cx:n,cy:a,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:h||c||l||0,clockWise:_}:e.viewBox?e.viewBox:{}},JSe=function(e,n){return e?e===!0?Te.createElement(Ba,{key:"label-implicit",viewBox:n}):Ea(e)?Te.createElement(Ba,{key:"label-implicit",viewBox:n,value:e}):v.isValidElement(e)?e.type===Ba?v.cloneElement(e,{key:"label-implicit",viewBox:n}):Te.createElement(Ba,{key:"label-implicit",content:e,viewBox:n}):on(e)?Te.createElement(Ba,{key:"label-implicit",content:e,viewBox:n}):Yg(e)?Te.createElement(Ba,cb({viewBox:n},e,{key:"label-implicit"})):null:null},ZSe=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var i=e.children,s=XV(e),o=$s(i,Ba).map(function(c,u){return v.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!a)return o;var l=JSe(e.label,n||s);return[l].concat(RSe(o))};Ba.parseViewBox=XV;Ba.renderCallByParent=ZSe;var uA,_$;function e_e(){if(_$)return uA;_$=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return uA=t,uA}var t_e=e_e();const n_e=Kn(t_e);function ub(t){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(t)}var r_e=["valueAccessor"],a_e=["data","dataKey","clockWise","id","textBreakAll"];function i_e(t){return c_e(t)||l_e(t)||o_e(t)||s_e()}function s_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o_e(t,e){if(t){if(typeof t=="string")return GE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GE(t,e)}}function l_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function c_e(t){if(Array.isArray(t))return GE(t)}function GE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},hN.apply(this,arguments)}function C$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function k$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(n),!0).forEach(function(a){u_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function u_e(t,e,n){return e=d_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d_e(t){var e=h_e(t,"string");return ub(e)=="symbol"?e:e+""}function h_e(t,e){if(ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ub(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T$(t,e){if(t==null)return{};var n=f_e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function f_e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var p_e=function(e){return Array.isArray(e.value)?n_e(e.value):e.value};function Bl(t){var e=t.valueAccessor,n=e===void 0?p_e:e,a=T$(t,r_e),i=a.data,s=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,u=T$(a,a_e);return!i||!i.length?null:Te.createElement(Rn,{className:"recharts-label-list"},i.map(function(h,p){var m=hn(s)?n(h,p):ma(h&&h.payload,s),x=hn(l)?{}:{id:"".concat(l,"-").concat(p)};return Te.createElement(Ba,hN({},Ut(h,!0),u,x,{parentViewBox:h.parentViewBox,value:m,textBreakAll:c,viewBox:Ba.parseViewBox(hn(o)?h:k$(k$({},h),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Bl.displayName="LabelList";function m_e(t,e){return t?t===!0?Te.createElement(Bl,{key:"labelList-implicit",data:e}):Te.isValidElement(t)||on(t)?Te.createElement(Bl,{key:"labelList-implicit",data:e,content:t}):Yg(t)?Te.createElement(Bl,hN({data:e},t,{key:"labelList-implicit"})):null:null}function g_e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=$s(a,Bl).map(function(o,l){return v.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=m_e(t.label,e);return[s].concat(i_e(i))}Bl.renderCallByParent=g_e;function db(t){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(t)}function WE(){return WE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},WE.apply(this,arguments)}function A$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function P$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A$(Object(n),!0).forEach(function(a){y_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function y_e(t,e,n){return e=x_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x_e(t){var e=v_e(t,"string");return db(e)=="symbol"?e:e+""}function v_e(t,e){if(db(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(db(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b_e=function(e,n){var a=Fi(n-e),i=Math.min(Math.abs(n-e),359.999);return a*i},V1=function(e){var n=e.cx,a=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,h=c*(l?1:-1)+i,p=Math.asin(c/h)/dN,m=u?s:s+o*p,x=Br(n,a,h,m),b=Br(n,a,i,m),j=u?s-o*p:s,w=Br(n,a,h*Math.cos(p*dN),j);return{center:x,circleTangency:b,lineTangency:w,theta:p}},JV=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=b_e(o,l),u=o+c,h=Br(n,a,s,o),p=Br(n,a,s,u),m="M ".concat(h.x,",").concat(h.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var x=Br(n,a,i,o),b=Br(n,a,i,u);m+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else m+="L ".concat(n,",").concat(a," Z");return m},j_e=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,h=e.endAngle,p=Fi(h-u),m=V1({cx:n,cy:a,radius:s,angle:u,sign:p,cornerRadius:o,cornerIsExternal:c}),x=m.circleTangency,b=m.lineTangency,j=m.theta,w=V1({cx:n,cy:a,radius:s,angle:h,sign:-p,cornerRadius:o,cornerIsExternal:c}),_=w.circleTangency,k=w.lineTangency,C=w.theta,A=c?Math.abs(u-h):Math.abs(u-h)-j-C;if(A<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):JV({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:u,endAngle:h});var T="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(p<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(k.x,",").concat(k.y,`
  `);if(i>0){var E=V1({cx:n,cy:a,radius:i,angle:u,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=E.circleTangency,$=E.lineTangency,U=E.theta,B=V1({cx:n,cy:a,radius:i,angle:h,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),R=B.circleTangency,z=B.lineTangency,G=B.theta,K=c?Math.abs(u-h):Math.abs(u-h)-U-G;if(K<0&&o===0)return"".concat(T,"L").concat(n,",").concat(a,"Z");T+="L".concat(z.x,",").concat(z.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(K>180),",").concat(+(p>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat($.x,",").concat($.y,"Z")}else T+="L".concat(n,",").concat(a,"Z");return T},w_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZV=function(e){var n=P$(P$({},w_e),e),a=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,h=n.startAngle,p=n.endAngle,m=n.className;if(o<s||h===p)return null;var x=mn("recharts-sector",m),b=o-s,j=$i(l,b,0,!0),w;return j>0&&Math.abs(h-p)<360?w=j_e({cx:a,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,b/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:h,endAngle:p}):w=JV({cx:a,cy:i,innerRadius:s,outerRadius:o,startAngle:h,endAngle:p}),Te.createElement("path",WE({},Ut(n,!0),{className:x,d:w,role:"img"}))};function hb(t){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hb(t)}function KE(){return KE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},KE.apply(this,arguments)}function E$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function D$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E$(Object(n),!0).forEach(function(a){N_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function N_e(t,e,n){return e=S_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S_e(t){var e=__e(t,"string");return hb(e)=="symbol"?e:e+""}function __e(t,e){if(hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(hb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O$={curveBasisClosed:Yxe,curveBasisOpen:Qxe,curveBasis:Kxe,curveBumpX:Mxe,curveBumpY:Ixe,curveLinearClosed:Xxe,curveLinear:xS,curveMonotoneX:Jxe,curveMonotoneY:Zxe,curveNatural:eve,curveStep:tve,curveStepAfter:rve,curveStepBefore:nve},H1=function(e){return e.x===+e.x&&e.y===+e.y},lv=function(e){return e.x},cv=function(e){return e.y},C_e=function(e,n){if(on(e))return e;var a="curve".concat(gS(e));return(a==="curveMonotone"||a==="curveBump")&&n?O$["".concat(a).concat(n==="vertical"?"Y":"X")]:O$[a]||xS},k_e=function(e){var n=e.type,a=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,h=C_e(a,l),p=u?s.filter(function(j){return H1(j)}):s,m;if(Array.isArray(o)){var x=u?o.filter(function(j){return H1(j)}):o,b=p.map(function(j,w){return D$(D$({},j),{},{base:x[w]})});return l==="vertical"?m=R1().y(cv).x1(lv).x0(function(j){return j.base.x}):m=R1().x(lv).y1(cv).y0(function(j){return j.base.y}),m.defined(H1).curve(h),m(b)}return l==="vertical"&&Nt(o)?m=R1().y(cv).x1(lv).x0(o):Nt(o)?m=R1().x(lv).y1(cv).y0(o):m=J9().x(lv).y(cv),m.defined(H1).curve(h),m(p)},wf=function(e){var n=e.className,a=e.points,i=e.path,s=e.pathRef;if((!a||!a.length)&&!i)return null;var o=a&&a.length?k_e(e):i;return v.createElement("path",KE({},Ut(e,!1),$w(e),{className:mn("recharts-curve",n),d:o,ref:s}))},dA={exports:{}},hA,M$;function T_e(){if(M$)return hA;M$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return hA=t,hA}var fA,I$;function A_e(){if(I$)return fA;I$=1;var t=T_e();function e(){}function n(){}return n.resetWarningCache=e,fA=function(){function a(o,l,c,u,h,p){if(p!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}a.isRequired=a;function i(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},fA}var R$;function P_e(){return R$||(R$=1,dA.exports=A_e()()),dA.exports}var E_e=P_e();const pr=Kn(E_e);var D_e=Object.getOwnPropertyNames,O_e=Object.getOwnPropertySymbols,M_e=Object.prototype.hasOwnProperty;function L$(t,e){return function(a,i,s){return t(a,i,s)&&e(a,i,s)}}function G1(t){return function(n,a,i){if(!n||!a||typeof n!="object"||typeof a!="object")return t(n,a,i);var s=i.cache,o=s.get(n),l=s.get(a);if(o&&l)return o===a&&l===n;s.set(n,a),s.set(a,n);var c=t(n,a,i);return s.delete(n),s.delete(a),c}}function F$(t){return D_e(t).concat(O_e(t))}var I_e=Object.hasOwn||function(t,e){return M_e.call(t,e)};function Gf(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var R_e="__v",L_e="__o",F_e="_owner",$$=Object.getOwnPropertyDescriptor,B$=Object.keys;function $_e(t,e,n){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!n.equals(t[a],e[a],a,a,t,e,n))return!1;return!0}function B_e(t,e){return Gf(t.getTime(),e.getTime())}function z_e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function q_e(t,e){return t===e}function z$(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=e.entries(),h=!1,p=0;(l=u.next())&&!l.done;){if(i[p]){p++;continue}var m=o.value,x=l.value;if(n.equals(m[0],x[0],c,p,t,e,n)&&n.equals(m[1],x[1],m[0],x[0],t,e,n)){h=i[p]=!0;break}p++}if(!h)return!1;c++}return!0}var U_e=Gf;function V_e(t,e,n){var a=B$(t),i=a.length;if(B$(e).length!==i)return!1;for(;i-- >0;)if(!eH(t,e,n,a[i]))return!1;return!0}function uv(t,e,n){var a=F$(t),i=a.length;if(F$(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=a[i],!eH(t,e,n,s)||(o=$$(t,s),l=$$(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function H_e(t,e){return Gf(t.valueOf(),e.valueOf())}function G_e(t,e){return t.source===e.source&&t.flags===e.flags}function q$(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),u=!1,h=0;(l=c.next())&&!l.done;){if(!i[h]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){u=i[h]=!0;break}h++}if(!u)return!1}return!0}function W_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function K_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function eH(t,e,n,a){return(a===F_e||a===L_e||a===R_e)&&(t.$$typeof||e.$$typeof)?!0:I_e(e,a)&&n.equals(t[a],e[a],a,a,t,e,n)}var Y_e="[object Arguments]",Q_e="[object Boolean]",X_e="[object Date]",J_e="[object Error]",Z_e="[object Map]",eCe="[object Number]",tCe="[object Object]",nCe="[object RegExp]",rCe="[object Set]",aCe="[object String]",iCe="[object URL]",sCe=Array.isArray,U$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,V$=Object.assign,oCe=Object.prototype.toString.call.bind(Object.prototype.toString);function lCe(t){var e=t.areArraysEqual,n=t.areDatesEqual,a=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,h=t.areSetsEqual,p=t.areTypedArraysEqual,m=t.areUrlsEqual;return function(b,j,w){if(b===j)return!0;if(b==null||j==null)return!1;var _=typeof b;if(_!==typeof j)return!1;if(_!=="object")return _==="number"?o(b,j,w):_==="function"?i(b,j,w):!1;var k=b.constructor;if(k!==j.constructor)return!1;if(k===Object)return l(b,j,w);if(sCe(b))return e(b,j,w);if(U$!=null&&U$(b))return p(b,j,w);if(k===Date)return n(b,j,w);if(k===RegExp)return u(b,j,w);if(k===Map)return s(b,j,w);if(k===Set)return h(b,j,w);var C=oCe(b);return C===X_e?n(b,j,w):C===nCe?u(b,j,w):C===Z_e?s(b,j,w):C===rCe?h(b,j,w):C===tCe?typeof b.then!="function"&&typeof j.then!="function"&&l(b,j,w):C===iCe?m(b,j,w):C===J_e?a(b,j,w):C===Y_e?l(b,j,w):C===Q_e||C===eCe||C===aCe?c(b,j,w):!1}}function cCe(t){var e=t.circular,n=t.createCustomConfig,a=t.strict,i={areArraysEqual:a?uv:$_e,areDatesEqual:B_e,areErrorsEqual:z_e,areFunctionsEqual:q_e,areMapsEqual:a?L$(z$,uv):z$,areNumbersEqual:U_e,areObjectsEqual:a?uv:V_e,arePrimitiveWrappersEqual:H_e,areRegExpsEqual:G_e,areSetsEqual:a?L$(q$,uv):q$,areTypedArraysEqual:a?uv:W_e,areUrlsEqual:K_e};if(n&&(i=V$({},i,n(i))),e){var s=G1(i.areArraysEqual),o=G1(i.areMapsEqual),l=G1(i.areObjectsEqual),c=G1(i.areSetsEqual);i=V$({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function uCe(t){return function(e,n,a,i,s,o,l){return t(e,n,l)}}function dCe(t){var e=t.circular,n=t.comparator,a=t.createState,i=t.equals,s=t.strict;if(a)return function(c,u){var h=a(),p=h.cache,m=p===void 0?e?new WeakMap:void 0:p,x=h.meta;return n(c,u,{cache:m,equals:i,meta:x,strict:s})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var hCe=Pd();Pd({strict:!0});Pd({circular:!0});Pd({circular:!0,strict:!0});Pd({createInternalComparator:function(){return Gf}});Pd({strict:!0,createInternalComparator:function(){return Gf}});Pd({circular:!0,createInternalComparator:function(){return Gf}});Pd({circular:!0,createInternalComparator:function(){return Gf},strict:!0});function Pd(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,a=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=cCe(t),c=lCe(l),u=a?a(c):uCe(c);return dCe({circular:n,comparator:c,createState:i,equals:u,strict:o})}function fCe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function H$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):fCe(i)};requestAnimationFrame(a)}function YE(t){"@babel/helpers - typeof";return YE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YE(t)}function pCe(t){return xCe(t)||yCe(t)||gCe(t)||mCe()}function mCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gCe(t,e){if(t){if(typeof t=="string")return G$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G$(t,e)}}function G$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function yCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xCe(t){if(Array.isArray(t))return t}function vCe(){var t={},e=function(){return null},n=!1,a=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=pCe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){H$(i.bind(null,u),c);return}i(c),H$(i.bind(null,u));return}YE(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,a(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function fb(t){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fb(t)}function W$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function K$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(n),!0).forEach(function(a){tH(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function tH(t,e,n){return e=bCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bCe(t){var e=jCe(t,"string");return fb(e)==="symbol"?e:String(e)}function jCe(t,e){if(fb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(fb(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wCe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(a,i){return a.filter(function(s){return i.includes(s)})})},NCe=function(e){return e},SCe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Ev=function(e,n){return Object.keys(n).reduce(function(a,i){return K$(K$({},a),{},tH({},i,e(i,n[i])))},{})},Y$=function(e,n,a){return e.map(function(i){return"".concat(SCe(i)," ").concat(n,"ms ").concat(a)}).join(",")};function _Ce(t,e){return TCe(t)||kCe(t,e)||nH(t,e)||CCe()}function CCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function TCe(t){if(Array.isArray(t))return t}function ACe(t){return DCe(t)||ECe(t)||nH(t)||PCe()}function PCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nH(t,e){if(t){if(typeof t=="string")return QE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QE(t,e)}}function ECe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DCe(t){if(Array.isArray(t))return QE(t)}function QE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var fN=1e-4,rH=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},aH=function(e,n){return e.map(function(a,i){return a*Math.pow(n,i)}).reduce(function(a,i){return a+i})},Q$=function(e,n){return function(a){var i=rH(e,n);return aH(i,a)}},OCe=function(e,n){return function(a){var i=rH(e,n),s=[].concat(ACe(i.map(function(o,l){return o*l}).slice(1)),[0]);return aH(s,a)}},X$=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),h=_Ce(u,4);i=h[0],s=h[1],o=h[2],l=h[3]}}}var p=Q$(i,o),m=Q$(s,l),x=OCe(i,o),b=function(_){return _>1?1:_<0?0:_},j=function(_){for(var k=_>1?1:_,C=k,A=0;A<8;++A){var T=p(C)-k,E=x(C);if(Math.abs(T-k)<fN||E<fN)return m(C);C=b(C-T/E)}return m(C)};return j.isStepper=!1,j},MCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,a=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(h,p,m){var x=-(h-p)*a,b=m*s,j=m+(x-b)*l/1e3,w=m*l/1e3+h;return Math.abs(w-p)<fN&&Math.abs(j)<fN?[p,0]:[w,j]};return c.isStepper=!0,c.dt=l,c},ICe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return X$(i);case"spring":return MCe();default:if(i.split("(")[0]==="cubic-bezier")return X$(i)}return typeof i=="function"?i:null};function pb(t){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(t)}function J$(t){return FCe(t)||LCe(t)||iH(t)||RCe()}function RCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FCe(t){if(Array.isArray(t))return JE(t)}function Z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Xa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(n),!0).forEach(function(a){XE(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function XE(t,e,n){return e=$Ce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ce(t){var e=BCe(t,"string");return pb(e)==="symbol"?e:String(e)}function BCe(t,e){if(pb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(pb(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zCe(t,e){return VCe(t)||UCe(t,e)||iH(t,e)||qCe()}function qCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iH(t,e){if(t){if(typeof t=="string")return JE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JE(t,e)}}function JE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function UCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function VCe(t){if(Array.isArray(t))return t}var pN=function(e,n,a){return e+(n-e)*a},ZE=function(e){var n=e.from,a=e.to;return n!==a},HCe=function t(e,n,a){var i=Ev(function(s,o){if(ZE(o)){var l=e(o.from,o.to,o.velocity),c=zCe(l,2),u=c[0],h=c[1];return Xa(Xa({},o),{},{from:u,velocity:h})}return o},n);return a<1?Ev(function(s,o){return ZE(o)?Xa(Xa({},o),{},{velocity:pN(o.velocity,i[s].velocity,a),from:pN(o.from,i[s].from,a)}):o},n):t(e,i,a-1)};const GCe=function(t,e,n,a,i){var s=wCe(t,e),o=s.reduce(function(w,_){return Xa(Xa({},w),{},XE({},_,[t[_],e[_]]))},{}),l=s.reduce(function(w,_){return Xa(Xa({},w),{},XE({},_,{from:t[_],velocity:0,to:e[_]}))},{}),c=-1,u,h,p=function(){return null},m=function(){return Ev(function(_,k){return k.from},l)},x=function(){return!Object.values(l).filter(ZE).length},b=function(_){u||(u=_);var k=_-u,C=k/n.dt;l=HCe(n,l,C),i(Xa(Xa(Xa({},t),e),m())),u=_,x()||(c=requestAnimationFrame(p))},j=function(_){h||(h=_);var k=(_-h)/a,C=Ev(function(T,E){return pN.apply(void 0,J$(E).concat([n(k)]))},o);if(i(Xa(Xa(Xa({},t),e),C)),k<1)c=requestAnimationFrame(p);else{var A=Ev(function(T,E){return pN.apply(void 0,J$(E).concat([n(1)]))},o);i(Xa(Xa(Xa({},t),e),A))}};return p=n.isStepper?b:j,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}var WCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function KCe(t,e){if(t==null)return{};var n=YCe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function YCe(t,e){if(t==null)return{};var n={},a=Object.keys(t),i,s;for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function pA(t){return ZCe(t)||JCe(t)||XCe(t)||QCe()}function QCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XCe(t,e){if(t){if(typeof t=="string")return eD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eD(t,e)}}function JCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZCe(t){if(Array.isArray(t))return eD(t)}function eD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function e8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e8(Object(n),!0).forEach(function(a){jv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function jv(t,e,n){return e=sH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t2e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,sH(a.key),a)}}function n2e(t,e,n){return e&&t2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sH(t){var e=r2e(t,"string");return wg(e)==="symbol"?e:String(e)}function r2e(t,e){if(wg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(wg(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tD(t,e)}function tD(t,e){return tD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},tD(t,e)}function i2e(t){var e=s2e();return function(){var a=mN(t),i;if(e){var s=mN(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return nD(this,i)}}function nD(t,e){if(e&&(wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rD(t)}function rD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mN(t){return mN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mN(t)}var Vo=function(t){a2e(n,t);var e=i2e(n);function n(a,i){var s;e2e(this,n),s=e.call(this,a,i);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,h=o.to,p=o.steps,m=o.children,x=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(rD(s)),s.changeStyle=s.changeStyle.bind(rD(s)),!l||x<=0)return s.state={style:{}},typeof m=="function"&&(s.state={style:h}),nD(s);if(p&&p.length)s.state={style:p[0].style};else if(u){if(typeof m=="function")return s.state={style:u},nD(s);s.state={style:c?jv({},c,u):u}}else s.state={style:{}};return s}return n2e(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,h=s.to,p=s.from,m=this.state.style;if(l){if(!o){var x={style:c?jv({},c,h):h};this.state&&m&&(c&&m[c]!==h||!c&&m!==h)&&this.setState(x);return}if(!(hCe(i.to,h)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=b||u?p:i.to;if(this.state&&m){var w={style:c?jv({},c,j):j};(c&&m[c]!==j||!c&&m!==j)&&this.setState(w)}this.runAnimation(Io(Io({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,u=i.easing,h=i.begin,p=i.onAnimationEnd,m=i.onAnimationStart,x=GCe(o,l,ICe(u),c,this.changeStyle),b=function(){s.stopJSAnimation=x()};this.manager.start([m,h,b,c,p])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],h=u.style,p=u.duration,m=p===void 0?0:p,x=function(j,w,_){if(_===0)return j;var k=w.duration,C=w.easing,A=C===void 0?"ease":C,T=w.style,E=w.properties,I=w.onAnimationEnd,$=_>0?o[_-1]:w,U=E||Object.keys(T);if(typeof A=="function"||A==="spring")return[].concat(pA(j),[s.runJSAnimation.bind(s,{from:$.style,to:T,duration:k,easing:A}),k]);var B=Y$(U,k,A),R=Io(Io(Io({},$.style),T),{},{transition:B});return[].concat(pA(j),[R,k,I]).filter(NCe)};return this.manager.start([c].concat(pA(o.reduce(x,[h,Math.max(m,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=vCe());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,h=i.onAnimationStart,p=i.onAnimationEnd,m=i.steps,x=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(i);return}if(m.length>1){this.runStepAnimation(i);return}var j=l?jv({},l,c):c,w=Y$(Object.keys(j),o,u);b.start([h,s,Io(Io({},j),{},{transition:w}),o,p])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=KCe(i,WCe),u=v.Children.count(s),h=this.state.style;if(typeof s=="function")return s(h);if(!l||u===0||o<=0)return s;var p=function(x){var b=x.props,j=b.style,w=j===void 0?{}:j,_=b.className,k=v.cloneElement(x,Io(Io({},c),{},{style:Io(Io({},w),h),className:_}));return k};return u===1?p(v.Children.only(s)):Te.createElement("div",null,v.Children.map(s,function(m){return p(m)}))}}]),n}(v.PureComponent);Vo.displayName="Animate";Vo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Vo.propTypes={from:pr.oneOfType([pr.object,pr.string]),to:pr.oneOfType([pr.object,pr.string]),attributeName:pr.string,duration:pr.number,begin:pr.number,easing:pr.oneOfType([pr.string,pr.func]),steps:pr.arrayOf(pr.shape({duration:pr.number.isRequired,style:pr.object.isRequired,easing:pr.oneOfType([pr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pr.func]),properties:pr.arrayOf("string"),onAnimationEnd:pr.func})),children:pr.oneOfType([pr.node,pr.func]),isActive:pr.bool,canBegin:pr.bool,onAnimationEnd:pr.func,shouldReAnimate:pr.bool,onAnimationStart:pr.func,onAnimationReStart:pr.func};function mb(t){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(t)}function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},gN.apply(this,arguments)}function o2e(t,e){return d2e(t)||u2e(t,e)||c2e(t,e)||l2e()}function l2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c2e(t,e){if(t){if(typeof t=="string")return t8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t8(t,e)}}function t8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function u2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function d2e(t){if(Array.isArray(t))return t}function n8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function r8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n8(Object(n),!0).forEach(function(a){h2e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function h2e(t,e,n){return e=f2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f2e(t){var e=p2e(t,"string");return mb(e)=="symbol"?e:e+""}function p2e(t,e){if(mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(mb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a8=function(e,n,a,i,s){var o=Math.min(Math.abs(a)/2,Math.abs(i)/2),l=i>=0?1:-1,c=a>=0?1:-1,u=i>=0&&a>=0||i<0&&a<0?1:0,h;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],m=0,x=4;m<x;m++)p[m]=s[m]>o?o:s[m];h="M".concat(e,",").concat(n+l*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(u,",").concat(e+c*p[0],",").concat(n)),h+="L ".concat(e+a-c*p[1],",").concat(n),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(u,`,
        `).concat(e+a,",").concat(n+l*p[1])),h+="L ".concat(e+a,",").concat(n+i-l*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(u,`,
        `).concat(e+a-c*p[2],",").concat(n+i)),h+="L ".concat(e+c*p[3],",").concat(n+i),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-l*p[3])),h+="Z"}else if(o>0&&s===+s&&s>0){var b=Math.min(o,s);h="M ".concat(e,",").concat(n+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+c*b,",").concat(n,`
            L `).concat(e+a-c*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+a,",").concat(n+l*b,`
            L `).concat(e+a,",").concat(n+i-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+a-c*b,",").concat(n+i,`
            L `).concat(e+c*b,",").concat(n+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e,",").concat(n+i-l*b," Z")}else h="M ".concat(e,",").concat(n," h ").concat(a," v ").concat(i," h ").concat(-a," Z");return h},m2e=function(e,n){if(!e||!n)return!1;var a=e.x,i=e.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),h=Math.max(s,s+l),p=Math.min(o,o+c),m=Math.max(o,o+c);return a>=u&&a<=h&&i>=p&&i<=m}return!1},g2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DM=function(e){var n=r8(r8({},g2e),e),a=v.useRef(),i=v.useState(-1),s=o2e(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var A=a.current.getTotalLength();A&&l(A)}catch{}},[]);var c=n.x,u=n.y,h=n.width,p=n.height,m=n.radius,x=n.className,b=n.animationEasing,j=n.animationDuration,w=n.animationBegin,_=n.isAnimationActive,k=n.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||p!==+p||h===0||p===0)return null;var C=mn("recharts-rectangle",x);return k?Te.createElement(Vo,{canBegin:o>0,from:{width:h,height:p,x:c,y:u},to:{width:h,height:p,x:c,y:u},duration:j,animationEasing:b,isActive:k},function(A){var T=A.width,E=A.height,I=A.x,$=A.y;return Te.createElement(Vo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:j,isActive:_,easing:b},Te.createElement("path",gN({},Ut(n,!0),{className:C,d:a8(I,$,T,E,m),ref:a})))}):Te.createElement("path",gN({},Ut(n,!0),{className:C,d:a8(c,u,h,p,m)}))},y2e=["points","className","baseLinePoints","connectNulls"];function Lm(){return Lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Lm.apply(this,arguments)}function x2e(t,e){if(t==null)return{};var n=v2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function v2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function i8(t){return N2e(t)||w2e(t)||j2e(t)||b2e()}function b2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j2e(t,e){if(t){if(typeof t=="string")return aD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aD(t,e)}}function w2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function N2e(t){if(Array.isArray(t))return aD(t)}function aD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var s8=function(e){return e&&e.x===+e.x&&e.y===+e.y},S2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(a){s8(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),s8(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Dv=function(e,n){var a=S2e(e);n&&(a=[a.reduce(function(s,o){return[].concat(i8(s),i8(o))},[])]);var i=a.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(i,"Z"):i},_2e=function(e,n,a){var i=Dv(e,a);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Dv(n.reverse(),a).slice(1))},C2e=function(e){var n=e.points,a=e.className,i=e.baseLinePoints,s=e.connectNulls,o=x2e(e,y2e);if(!n||!n.length)return null;var l=mn("recharts-polygon",a);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=_2e(n,i,s);return Te.createElement("g",{className:l},Te.createElement("path",Lm({},Ut(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?Te.createElement("path",Lm({},Ut(o,!0),{fill:"none",d:Dv(n,s)})):null,c?Te.createElement("path",Lm({},Ut(o,!0),{fill:"none",d:Dv(i,s)})):null)}var h=Dv(n,s);return Te.createElement("path",Lm({},Ut(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",className:l,d:h}))};function iD(){return iD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},iD.apply(this,arguments)}var Zb=function(e){var n=e.cx,a=e.cy,i=e.r,s=e.className,o=mn("recharts-dot",s);return n===+n&&a===+a&&i===+i?v.createElement("circle",iD({},Ut(e,!1),$w(e),{className:o,cx:n,cy:a,r:i})):null};function gb(t){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}var k2e=["x","y","top","left","width","height","className"];function sD(){return sD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},sD.apply(this,arguments)}function o8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function T2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o8(Object(n),!0).forEach(function(a){A2e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function A2e(t,e,n){return e=P2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P2e(t){var e=E2e(t,"string");return gb(e)=="symbol"?e:e+""}function E2e(t,e){if(gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D2e(t,e){if(t==null)return{};var n=O2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function O2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var M2e=function(e,n,a,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(a)},I2e=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,h=e.width,p=h===void 0?0:h,m=e.height,x=m===void 0?0:m,b=e.className,j=D2e(e,k2e),w=T2e({x:a,y:s,top:l,left:u,width:p,height:x},j);return!Nt(a)||!Nt(s)||!Nt(p)||!Nt(x)||!Nt(l)||!Nt(u)?null:Te.createElement("path",sD({},Ut(w,!0),{className:mn("recharts-cross",b),d:M2e(a,s,p,x,l,u)}))},mA,l8;function R2e(){if(l8)return mA;l8=1;var t=AS(),e=jV(),n=Wl();function a(i,s){return i&&i.length?t(i,n(s,2),e):void 0}return mA=a,mA}var L2e=R2e();const F2e=Kn(L2e);var gA,c8;function $2e(){if(c8)return gA;c8=1;var t=AS(),e=Wl(),n=wV();function a(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return gA=a,gA}var B2e=$2e();const z2e=Kn(B2e);var q2e=["cx","cy","angle","ticks","axisLine"],U2e=["ticks","tick","angle","tickFormatter","stroke"];function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function Ov(){return Ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Ov.apply(this,arguments)}function u8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Kh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u8(Object(n),!0).forEach(function(a){OS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function d8(t,e){if(t==null)return{};var n=V2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function V2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function H2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,lH(a.key),a)}}function G2e(t,e,n){return e&&h8(t.prototype,e),n&&h8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function W2e(t,e,n){return e=yN(e),K2e(t,oH()?Reflect.construct(e,n||[],yN(t).constructor):e.apply(t,n))}function K2e(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y2e(t)}function Y2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oH=function(){return!!t})()}function yN(t){return yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yN(t)}function Q2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oD(t,e)}function oD(t,e){return oD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},oD(t,e)}function OS(t,e,n){return e=lH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lH(t){var e=X2e(t,"string");return Ng(e)=="symbol"?e:e+""}function X2e(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ng(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var MS=function(t){function e(){return H2e(this,e),W2e(this,e,arguments)}return Q2e(e,t),G2e(e,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Br(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=F2e(l,function(h){return h.coordinate||0}),u=z2e(l,function(h){return h.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=a.axisLine,u=d8(a,q2e),h=l.reduce(function(b,j){return[Math.min(b[0],j.coordinate),Math.max(b[1],j.coordinate)]},[1/0,-1/0]),p=Br(i,s,h[0],o),m=Br(i,s,h[1],o),x=Kh(Kh(Kh({},Ut(u,!1)),{},{fill:"none"},Ut(c,!1)),{},{x1:p.x,y1:p.y,x2:m.x,y2:m.y});return Te.createElement("line",Ov({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,h=d8(i,U2e),p=this.getTickTextAnchor(),m=Ut(h,!1),x=Ut(o,!1),b=s.map(function(j,w){var _=a.getTickValueCoord(j),k=Kh(Kh(Kh(Kh({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},m),{},{stroke:"none",fill:u},x),{},{index:w},_),{},{payload:j});return Te.createElement(Rn,Ov({className:mn("recharts-polar-radius-axis-tick",QV(o)),key:"tick-".concat(j.coordinate)},Of(a.props,j,w)),e.renderTickItem(o,k,c?c(j.value,w):j.value))});return Te.createElement(Rn,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:Te.createElement(Rn,{className:mn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Ba.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Te.isValidElement(a)?o=Te.cloneElement(a,i):on(a)?o=a(i):o=Te.createElement(Mf,Ov({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(v.PureComponent);OS(MS,"displayName","PolarRadiusAxis");OS(MS,"axisType","radiusAxis");OS(MS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function tf(){return tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},tf.apply(this,arguments)}function f8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Yh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f8(Object(n),!0).forEach(function(a){IS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function J2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,uH(a.key),a)}}function Z2e(t,e,n){return e&&p8(t.prototype,e),n&&p8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eke(t,e,n){return e=xN(e),tke(t,cH()?Reflect.construct(e,n||[],xN(t).constructor):e.apply(t,n))}function tke(t,e){if(e&&(Sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nke(t)}function nke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cH=function(){return!!t})()}function xN(t){return xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xN(t)}function rke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lD(t,e)}function lD(t,e){return lD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},lD(t,e)}function IS(t,e,n){return e=uH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uH(t){var e=ake(t,"string");return Sg(e)=="symbol"?e:e+""}function ake(t,e){if(Sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ike=Math.PI/180,ske=1e-5,RS=function(t){function e(){return J2e(this,e),eke(this,e,arguments)}return rke(e,t),Z2e(e,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,h=u||8,p=Br(s,o,l,a.coordinate),m=Br(s,o,l+(c==="inner"?-1:1)*h,a.coordinate);return{x1:p.x,y1:p.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*ike),o;return s>ske?o=i==="outer"?"start":"end":s<-1e-5?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,l=a.axisLine,c=a.axisLineType,u=Yh(Yh({},Ut(this.props,!1)),{},{fill:"none"},Ut(l,!1));if(c==="circle")return Te.createElement(Zb,tf({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var h=this.props.ticks,p=h.map(function(m){return Br(i,s,o,m.coordinate)});return Te.createElement(C2e,tf({className:"recharts-polar-angle-axis-line"},u,{points:p}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,h=Ut(this.props,!1),p=Ut(o,!1),m=Yh(Yh({},h),{},{fill:"none"},Ut(l,!1)),x=s.map(function(b,j){var w=a.getTickLineCoord(b),_=a.getTickTextAnchor(b),k=Yh(Yh(Yh({textAnchor:_},h),{},{stroke:"none",fill:u},p),{},{index:j,payload:b,x:w.x2,y:w.y2});return Te.createElement(Rn,tf({className:mn("recharts-polar-angle-axis-tick",QV(o)),key:"tick-".concat(b.coordinate)},Of(a.props,b,j)),l&&Te.createElement("line",tf({className:"recharts-polar-angle-axis-tick-line"},m,w)),o&&e.renderTickItem(o,k,c?c(b.value,j):b.value))});return Te.createElement(Rn,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:Te.createElement(Rn,{className:mn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Te.isValidElement(a)?o=Te.cloneElement(a,i):on(a)?o=a(i):o=Te.createElement(Mf,tf({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(v.PureComponent);IS(RS,"displayName","PolarAngleAxis");IS(RS,"axisType","angleAxis");IS(RS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var yA,m8;function oke(){if(m8)return yA;m8=1;var t=j7(),e=t(Object.getPrototypeOf,Object);return yA=e,yA}var xA,g8;function lke(){if(g8)return xA;g8=1;var t=Qc(),e=oke(),n=Xc(),a="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function u(h){if(!n(h)||t(h)!=a)return!1;var p=e(h);if(p===null)return!0;var m=l.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==c}return xA=u,xA}var cke=lke();const uke=Kn(cke);var vA,y8;function dke(){if(y8)return vA;y8=1;var t=Qc(),e=Xc(),n="[object Boolean]";function a(i){return i===!0||i===!1||e(i)&&t(i)==n}return vA=a,vA}var hke=dke();const fke=Kn(hke);function yb(t){"@babel/helpers - typeof";return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yb(t)}function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},vN.apply(this,arguments)}function pke(t,e){return xke(t)||yke(t,e)||gke(t,e)||mke()}function mke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gke(t,e){if(t){if(typeof t=="string")return x8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x8(t,e)}}function x8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function yke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function xke(t){if(Array.isArray(t))return t}function v8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function b8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v8(Object(n),!0).forEach(function(a){vke(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function vke(t,e,n){return e=bke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bke(t){var e=jke(t,"string");return yb(e)=="symbol"?e:e+""}function jke(t,e){if(yb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(yb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j8=function(e,n,a,i,s){var o=a-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+a,",").concat(n),l+="L ".concat(e+a-o/2,",").concat(n+s),l+="L ".concat(e+a-o/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},wke={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Nke=function(e){var n=b8(b8({},wke),e),a=v.useRef(),i=v.useState(-1),s=pke(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var C=a.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,u=n.y,h=n.upperWidth,p=n.lowerWidth,m=n.height,x=n.className,b=n.animationEasing,j=n.animationDuration,w=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||p!==+p||m!==+m||h===0&&p===0||m===0)return null;var k=mn("recharts-trapezoid",x);return _?Te.createElement(Vo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:h,lowerWidth:p,height:m,x:c,y:u},duration:j,animationEasing:b,isActive:_},function(C){var A=C.upperWidth,T=C.lowerWidth,E=C.height,I=C.x,$=C.y;return Te.createElement(Vo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:j,easing:b},Te.createElement("path",vN({},Ut(n,!0),{className:k,d:j8(I,$,A,T,E),ref:a})))}):Te.createElement("g",null,Te.createElement("path",vN({},Ut(n,!0),{className:k,d:j8(c,u,h,p,m)})))},Ske=["option","shapeType","propTransformer","activeClassName","isActive"];function xb(t){"@babel/helpers - typeof";return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xb(t)}function _ke(t,e){if(t==null)return{};var n=Cke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Cke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function w8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function bN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w8(Object(n),!0).forEach(function(a){kke(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function kke(t,e,n){return e=Tke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tke(t){var e=Ake(t,"string");return xb(e)=="symbol"?e:e+""}function Ake(t,e){if(xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(xb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pke(t,e){return bN(bN({},e),t)}function Eke(t,e){return t==="symbols"}function N8(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Te.createElement(DM,n);case"trapezoid":return Te.createElement(Nke,n);case"sector":return Te.createElement(ZV,n);case"symbols":if(Eke(e))return Te.createElement(XO,n);break;default:return null}}function Dke(t){return v.isValidElement(t)?t.props:t}function dH(t){var e=t.option,n=t.shapeType,a=t.propTransformer,i=a===void 0?Pke:a,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=_ke(t,Ske),u;if(v.isValidElement(e))u=v.cloneElement(e,bN(bN({},c),Dke(e)));else if(on(e))u=e(c);else if(uke(e)&&!fke(e)){var h=i(e,c);u=Te.createElement(N8,{shapeType:n,elementProps:h})}else{var p=c;u=Te.createElement(N8,{shapeType:n,elementProps:p})}return l?Te.createElement(Rn,{className:o},u):u}function LS(t,e){return e!=null&&"trapezoids"in t.props}function FS(t,e){return e!=null&&"sectors"in t.props}function vb(t,e){return e!=null&&"points"in t.props}function Oke(t,e){var n,a,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.y)||t.y===e.y;return i&&s}function Mke(t,e){var n=t.endAngle===e.endAngle,a=t.startAngle===e.startAngle;return n&&a}function Ike(t,e){var n=t.x===e.x,a=t.y===e.y,i=t.z===e.z;return n&&a&&i}function Rke(t,e){var n;return LS(t,e)?n=Oke:FS(t,e)?n=Mke:vb(t,e)&&(n=Ike),n}function Lke(t,e){var n;return LS(t,e)?n="trapezoids":FS(t,e)?n="sectors":vb(t,e)&&(n="points"),n}function Fke(t,e){if(LS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(FS(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return vb(t,e)?e.payload:{}}function $ke(t){var e=t.activeTooltipItem,n=t.graphicalItem,a=t.itemData,i=Lke(n,e),s=Fke(n,e),o=a.filter(function(c,u){var h=If(s,c),p=n.props[i].filter(function(b){var j=Rke(n,e);return j(b,e)}),m=n.props[i].indexOf(p[p.length-1]),x=u===m;return h&&x}),l=a.indexOf(o[o.length-1]);return l}var pw;function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function Fm(){return Fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Fm.apply(this,arguments)}function S8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S8(Object(n),!0).forEach(function(a){ao(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Bke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,fH(a.key),a)}}function zke(t,e,n){return e&&_8(t.prototype,e),n&&_8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qke(t,e,n){return e=jN(e),Uke(t,hH()?Reflect.construct(e,n||[],jN(t).constructor):e.apply(t,n))}function Uke(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vke(t)}function Vke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hH=function(){return!!t})()}function jN(t){return jN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jN(t)}function Hke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cD(t,e)}function cD(t,e){return cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},cD(t,e)}function ao(t,e,n){return e=fH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fH(t){var e=Gke(t,"string");return _g(e)=="symbol"?e:e+""}function Gke(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(_g(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kl=function(t){function e(n){var a;return Bke(this,e),a=qke(this,e,[n]),ao(a,"pieRef",null),ao(a,"sectorRefs",[]),ao(a,"id",Uf("recharts-pie-")),ao(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),on(i)&&i()}),ao(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),on(i)&&i()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return Hke(e,t),zke(e,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,h=Ut(this.props,!1),p=Ut(o,!1),m=Ut(l,!1),x=o&&o.offsetRadius||20,b=a.map(function(j,w){var _=(j.startAngle+j.endAngle)/2,k=Br(j.cx,j.cy,j.outerRadius+x,_),C=Fr(Fr(Fr(Fr({},h),j),{},{stroke:"none"},p),{},{index:w,textAnchor:e.getTextAnchor(k.x,j.cx)},k),A=Fr(Fr(Fr(Fr({},h),j),{},{fill:"none",stroke:j.fill},m),{},{index:w,points:[Br(j.cx,j.cy,j.outerRadius,_),k]}),T=c;return hn(c)&&hn(u)?T="value":hn(c)&&(T=u),Te.createElement(Rn,{key:"label-".concat(j.startAngle,"-").concat(j.endAngle,"-").concat(j.midAngle,"-").concat(w)},l&&e.renderLabelLineItem(l,A,"line"),e.renderLabelItem(o,C,ma(j,T)))});return Te.createElement(Rn,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return a.map(function(u,h){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&a.length!==1)return null;var p=i.isActiveIndex(h),m=c&&i.hasActiveIndex()?c:null,x=p?o:m,b=Fr(Fr({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return Te.createElement(Rn,Fm({ref:function(w){w&&!i.sectorRefs.includes(w)&&i.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},Of(i.props,u,h),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(h)}),Te.createElement(dH,Fm({option:x,isActive:p,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,h=i.animationId,p=this.state,m=p.prevSectors,x=p.prevIsAnimationActive;return Te.createElement(Vo,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var j=b.t,w=[],_=s&&s[0],k=_.startAngle;return s.forEach(function(C,A){var T=m&&m[A],E=A>0?Fs(C,"paddingAngle",0):0;if(T){var I=Pa(T.endAngle-T.startAngle,C.endAngle-C.startAngle),$=Fr(Fr({},C),{},{startAngle:k+E,endAngle:k+I(j)+E});w.push($),k=$.endAngle}else{var U=C.endAngle,B=C.startAngle,R=Pa(0,U-B),z=R(j),G=Fr(Fr({},C),{},{startAngle:k+E,endAngle:k+z+E});w.push(G),k=G.endAngle}}),Te.createElement(Rn,null,a.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!If(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,u=i.cx,h=i.cy,p=i.innerRadius,m=i.outerRadius,x=i.isAnimationActive,b=this.state.isAnimationFinished;if(s||!o||!o.length||!Nt(u)||!Nt(h)||!Nt(p)||!Nt(m))return null;var j=mn("recharts-pie",l);return Te.createElement(Rn,{tabIndex:this.props.rootTabIndex,className:j,ref:function(_){a.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),Ba.renderCallByParent(this.props,null,!1),(!x||b)&&Bl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i,s){if(Te.isValidElement(a))return Te.cloneElement(a,i);if(on(a))return a(i);var o=mn("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Te.createElement(wf,Fm({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,i,s){if(Te.isValidElement(a))return Te.cloneElement(a,i);var o=s;if(on(a)&&(o=a(i),Te.isValidElement(o)))return o;var l=mn("recharts-pie-label-text",typeof a!="boolean"&&!on(a)?a.className:"");return Te.createElement(Mf,Fm({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(v.PureComponent);pw=Kl;ao(Kl,"displayName","Pie");ao(Kl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!kd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ao(Kl,"parseDeltaAngle",function(t,e){var n=Fi(e-t),a=Math.min(Math.abs(e-t),360);return n*a});ao(Kl,"getRealPieData",function(t){var e=t.data,n=t.children,a=Ut(t,!1),i=$s(n,Wb);return e&&e.length?e.map(function(s,o){return Fr(Fr(Fr({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return Fr(Fr({},a),s.props)}):[]});ao(Kl,"parseCoordinateOfPie",function(t,e){var n=e.top,a=e.left,i=e.width,s=e.height,o=YV(i,s),l=a+$i(t.cx,i,i/2),c=n+$i(t.cy,s,s/2),u=$i(t.innerRadius,o,0),h=$i(t.outerRadius,o,o*.8),p=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:p}});ao(Kl,"getComposedData",function(t){var e=t.item,n=t.offset,a=e.type.defaultProps!==void 0?Fr(Fr({},e.type.defaultProps),e.props):e.props,i=pw.getRealPieData(a);if(!i||!i.length)return null;var s=a.cornerRadius,o=a.startAngle,l=a.endAngle,c=a.paddingAngle,u=a.dataKey,h=a.nameKey,p=a.valueKey,m=a.tooltipType,x=Math.abs(a.minAngle),b=pw.parseCoordinateOfPie(a,n),j=pw.parseDeltaAngle(o,l),w=Math.abs(j),_=u;hn(u)&&hn(p)?(qo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):hn(u)&&(qo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=p);var k=i.filter(function($){return ma($,_,0)!==0}).length,C=(w>=360?k:k-1)*c,A=w-k*x-C,T=i.reduce(function($,U){var B=ma(U,_,0);return $+(Nt(B)?B:0)},0),E;if(T>0){var I;E=i.map(function($,U){var B=ma($,_,0),R=ma($,h,U),z=(Nt(B)?B:0)/T,G;U?G=I.endAngle+Fi(j)*c*(B!==0?1:0):G=o;var K=G+Fi(j)*((B!==0?x:0)+z*A),Y=(G+K)/2,q=(b.innerRadius+b.outerRadius)/2,V=[{name:R,value:B,payload:$,dataKey:_,type:m}],H=Br(b.cx,b.cy,q,Y);return I=Fr(Fr(Fr({percent:z,cornerRadius:s,name:R,tooltipPayload:V,midAngle:Y,middleRadius:q,tooltipPosition:H},$),b),{},{value:ma($,_),startAngle:G,endAngle:K,payload:$,paddingAngle:Fi(j)*c}),I})}return Fr(Fr({},b),{},{sectors:E,data:i})});var bA,C8;function Wke(){if(C8)return bA;C8=1;var t=Math.ceil,e=Math.max;function n(a,i,s,o){for(var l=-1,c=e(t((i-a)/(s||1)),0),u=Array(c);c--;)u[o?c:++l]=a,a+=s;return u}return bA=n,bA}var jA,k8;function pH(){if(k8)return jA;k8=1;var t=R9(),e=1/0,n=17976931348623157e292;function a(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*n}return i===i?i:0}return jA=a,jA}var wA,T8;function Kke(){if(T8)return wA;T8=1;var t=Wke(),e=wS(),n=pH();function a(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return wA=a,wA}var NA,A8;function Yke(){if(A8)return NA;A8=1;var t=Kke(),e=t();return NA=e,NA}var Qke=Yke();const wN=Kn(Qke);function bb(t){"@babel/helpers - typeof";return bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bb(t)}function P8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function E8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P8(Object(n),!0).forEach(function(a){mH(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function mH(t,e,n){return e=Xke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xke(t){var e=Jke(t,"string");return bb(e)=="symbol"?e:e+""}function Jke(t,e){if(bb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(bb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zke=["Webkit","Moz","O","ms"],eTe=function(e,n){var a=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=Zke.reduce(function(s,o){return E8(E8({},s),{},mH({},o+a,n))},{});return i[e]=n,i};function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function NN(){return NN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},NN.apply(this,arguments)}function D8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function SA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(n),!0).forEach(function(a){Ps(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function tTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,yH(a.key),a)}}function nTe(t,e,n){return e&&O8(t.prototype,e),n&&O8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rTe(t,e,n){return e=SN(e),aTe(t,gH()?Reflect.construct(e,n||[],SN(t).constructor):e.apply(t,n))}function aTe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iTe(t)}function iTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gH=function(){return!!t})()}function SN(t){return SN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SN(t)}function sTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uD(t,e)}function uD(t,e){return uD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},uD(t,e)}function Ps(t,e,n){return e=yH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yH(t){var e=oTe(t,"string");return Cg(e)=="symbol"?e:e+""}function oTe(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lTe=function(e){var n=e.data,a=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Av().domain(wN(0,c)).range([s,s+o-l]),h=u.domain().map(function(p){return u(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(a),endX:u(i),scale:u,scaleValues:h}},M8=function(e){return e.changedTouches&&!!e.changedTouches.length},kg=function(t){function e(n){var a;return tTe(this,e),a=rTe(this,e,[n]),Ps(a,"handleDrag",function(i){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(i):a.state.isSlideMoving&&a.handleSlideDrag(i)}),Ps(a,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&a.handleDrag(i.changedTouches[0])}),Ps(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=a.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),a.detachDragEndListener()}),Ps(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Ps(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Ps(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Ps(a,"handleSlideDragStart",function(i){var s=M8(i)?i.changedTouches[0]:i;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return sTe(e,t),nTe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var i=a.startX,s=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,h=u.length-1,p=Math.min(i,s),m=Math.max(i,s),x=e.getIndexInRange(o,p),b=e.getIndexInRange(o,m);return{startIndex:x-x%c,endIndex:b===h?h:b-b%c}}},{key:"getTextOfTick",value:function(a){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=ma(s[a],l,a);return on(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,h=c.width,p=c.travellerWidth,m=c.startIndex,x=c.endIndex,b=c.onChange,j=a.pageX-s;j>0?j=Math.min(j,u+h-p-l,u+h-p-o):j<0&&(j=Math.max(j,u-o,u-l));var w=this.getIndex({startX:o+j,endX:l+j});(w.startIndex!==m||w.endIndex!==x)&&b&&b(w),this.setState({startX:o+j,endX:l+j,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,i){var s=M8(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],h=this.props,p=h.x,m=h.width,x=h.travellerWidth,b=h.onChange,j=h.gap,w=h.data,_={startX:this.state.startX,endX:this.state.endX},k=a.pageX-s;k>0?k=Math.min(k,p+m-x-u):k<0&&(k=Math.max(k,p-u)),_[o]=u+k;var C=this.getIndex(_),A=C.startIndex,T=C.endIndex,E=function(){var $=w.length-1;return o==="startX"&&(l>c?A%j===0:T%j===0)||l<c&&T===$||o==="endX"&&(l>c?T%j===0:A%j===0)||l>c&&T===$};this.setState(Ps(Ps({},o,u+k),"brushMoveStartX",a.pageX),function(){b&&E()&&b(C)})}},{key:"handleTravellerMoveKeyboard",value:function(a,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,h=this.state[i],p=l.indexOf(h);if(p!==-1){var m=p+a;if(!(m===-1||m>=l.length)){var x=l[m];i==="startX"&&x>=u||i==="endX"&&x<=c||this.setState(Ps({},i,x),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.fill,u=a.stroke;return Te.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.data,u=a.children,h=a.padding,p=v.Children.only(u);return p?Te.cloneElement(p,{x:i,y:s,width:o,height:l,margin:h,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,i){var s,o,l=this,c=this.props,u=c.y,h=c.travellerWidth,p=c.height,m=c.traveller,x=c.ariaLabel,b=c.data,j=c.startIndex,w=c.endIndex,_=Math.max(a,this.props.x),k=SA(SA({},Ut(this.props,!1)),{},{x:_,y:u,width:h,height:p}),C=x||"Min value: ".concat((s=b[j])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=b[w])===null||o===void 0?void 0:o.name);return Te.createElement(Rn,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(T){["ArrowLeft","ArrowRight"].includes(T.key)&&(T.preventDefault(),T.stopPropagation(),l.handleTravellerMoveKeyboard(T.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(m,k))}},{key:"renderSlide",value:function(a,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,h=Math.min(a,i)+u,p=Math.max(Math.abs(i-a)-u,0);return Te.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:h,y:o,width:p,height:l})}},{key:"renderText",value:function(){var a=this.props,i=a.startIndex,s=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,u=a.stroke,h=this.state,p=h.startX,m=h.endX,x=5,b={pointerEvents:"none",fill:u};return Te.createElement(Rn,{className:"recharts-brush-texts"},Te.createElement(Mf,NN({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,m)-x,y:o+l/2},b),this.getTextOfTick(i)),Te.createElement(Mf,NN({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,m)+c+x,y:o+l/2},b),this.getTextOfTick(s)))}},{key:"render",value:function(){var a=this.props,i=a.data,s=a.className,o=a.children,l=a.x,c=a.y,u=a.width,h=a.height,p=a.alwaysShowText,m=this.state,x=m.startX,b=m.endX,j=m.isTextActive,w=m.isSlideMoving,_=m.isTravellerMoving,k=m.isTravellerFocused;if(!i||!i.length||!Nt(l)||!Nt(c)||!Nt(u)||!Nt(h)||u<=0||h<=0)return null;var C=mn("recharts-brush",s),A=Te.Children.count(o)===1,T=eTe("userSelect","none");return Te.createElement(Rn,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:T},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(j||w||_||k||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var i=a.x,s=a.y,o=a.width,l=a.height,c=a.stroke,u=Math.floor(s+l/2)-1;return Te.createElement(Te.Fragment,null,Te.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),Te.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),Te.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,i){var s;return Te.isValidElement(a)?s=Te.cloneElement(a,i):on(a)?s=a(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(a,i){var s=a.data,o=a.width,l=a.x,c=a.travellerWidth,u=a.updateId,h=a.startIndex,p=a.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return SA({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?lTe({data:s,width:o,x:l,travellerWidth:c,startIndex:h,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var m=i.scale.domain().map(function(x){return i.scale(x)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(a.startIndex),endX:i.scale(a.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(a,i){for(var s=a.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>i?l=c:o=c}return i>=a[l]?l:o}}])}(v.PureComponent);Ps(kg,"displayName","Brush");Ps(kg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var _A,I8;function cTe(){if(I8)return _A;I8=1;var t=aM();function e(n,a){var i;return t(n,function(s,o,l){return i=a(s,o,l),!i}),!!i}return _A=e,_A}var CA,R8;function uTe(){if(R8)return CA;R8=1;var t=p7(),e=Wl(),n=cTe(),a=gs(),i=wS();function s(o,l,c){var u=a(o)?t:n;return c&&i(o,l,c)&&(l=void 0),u(o,e(l,3))}return CA=s,CA}var dTe=uTe();const hTe=Kn(dTe);var zl=function(e,n){var a=e.alwaysShow,i=e.ifOverflow;return a&&(i="extendDomain"),i===n},kA,L8;function fTe(){if(L8)return kA;L8=1;var t=D7();function e(n,a,i){a=="__proto__"&&t?t(n,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[a]=i}return kA=e,kA}var TA,F8;function pTe(){if(F8)return TA;F8=1;var t=fTe(),e=P7(),n=Wl();function a(i,s){var o={};return s=n(s,3),e(i,function(l,c,u){t(o,c,s(l,c,u))}),o}return TA=a,TA}var mTe=pTe();const gTe=Kn(mTe);var AA,$8;function yTe(){if($8)return AA;$8=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(!n(e[a],a,e))return!1;return!0}return AA=t,AA}var PA,B8;function xTe(){if(B8)return PA;B8=1;var t=aM();function e(n,a){var i=!0;return t(n,function(s,o,l){return i=!!a(s,o,l),i}),i}return PA=e,PA}var EA,z8;function vTe(){if(z8)return EA;z8=1;var t=yTe(),e=xTe(),n=Wl(),a=gs(),i=wS();function s(o,l,c){var u=a(o)?t:e;return c&&i(o,l,c)&&(l=void 0),u(o,n(l,3))}return EA=s,EA}var bTe=vTe();const xH=Kn(bTe);var jTe=["x","y"];function jb(t){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jb(t)}function dD(){return dD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},dD.apply(this,arguments)}function q8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function dv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q8(Object(n),!0).forEach(function(a){wTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function wTe(t,e,n){return e=NTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NTe(t){var e=STe(t,"string");return jb(e)=="symbol"?e:e+""}function STe(t,e){if(jb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(jb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Te(t,e){if(t==null)return{};var n=CTe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function CTe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function kTe(t,e){var n=t.x,a=t.y,i=_Te(t,jTe),s="".concat(n),o=parseInt(s,10),l="".concat(a),c=parseInt(l,10),u="".concat(e.height||i.height),h=parseInt(u,10),p="".concat(e.width||i.width),m=parseInt(p,10);return dv(dv(dv(dv(dv({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:h,width:m,name:e.name,radius:e.radius})}function U8(t){return Te.createElement(dH,dD({shapeType:"rectangle",propTransformer:kTe,activeClassName:"recharts-active-bar"},t))}var TTe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,i){if(typeof e=="number")return e;var s=Nt(a)||nxe(a);return s?e(a,i):(s||Lf(),n)}},ATe=["value","background"],vH;function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function PTe(t,e){if(t==null)return{};var n=ETe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function ETe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function _N(){return _N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_N.apply(this,arguments)}function V8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ja(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(n),!0).forEach(function(a){dd(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function DTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,jH(a.key),a)}}function OTe(t,e,n){return e&&H8(t.prototype,e),n&&H8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function MTe(t,e,n){return e=CN(e),ITe(t,bH()?Reflect.construct(e,n||[],CN(t).constructor):e.apply(t,n))}function ITe(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RTe(t)}function RTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bH=function(){return!!t})()}function CN(t){return CN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CN(t)}function LTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hD(t,e)}function hD(t,e){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},hD(t,e)}function dd(t,e,n){return e=jH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jH(t){var e=FTe(t,"string");return Tg(e)=="symbol"?e:e+""}function FTe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Tg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ed=function(t){function e(){var n;DTe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=MTe(this,e,[].concat(i)),dd(n,"state",{isAnimationFinished:!1}),dd(n,"id",Uf("recharts-bar-")),dd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),dd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return LTe(e,t),OTe(e,[{key:"renderRectanglesStatically",value:function(a){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,h=Ut(this.props,!1);return a&&a.map(function(p,m){var x=m===c,b=x?u:o,j=ja(ja(ja({},h),p),{},{isActive:x,option:b,index:m,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Te.createElement(Rn,_N({className:"recharts-bar-rectangle"},Of(i.props,p,m),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(m)}),Te.createElement(U8,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,h=i.animationEasing,p=i.animationId,m=this.state.prevData;return Te.createElement(Vo,{begin:c,duration:u,isActive:l,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,j=s.map(function(w,_){var k=m&&m[_];if(k){var C=Pa(k.x,w.x),A=Pa(k.y,w.y),T=Pa(k.width,w.width),E=Pa(k.height,w.height);return ja(ja({},w),{},{x:C(b),y:A(b),width:T(b),height:E(b)})}if(o==="horizontal"){var I=Pa(0,w.height),$=I(b);return ja(ja({},w),{},{y:w.y+w.height-$,height:$})}var U=Pa(0,w.width),B=U(b);return ja(ja({},w),{},{width:B})});return Te.createElement(Rn,null,a.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var a=this.props,i=a.data,s=a.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!If(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var a=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=Ut(this.props.background,!1);return s.map(function(u,h){u.value;var p=u.background,m=PTe(u,ATe);if(!p)return null;var x=ja(ja(ja(ja(ja({},m),{},{fill:"#eee"},p),c),Of(a.props,u,h)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:h,className:"recharts-bar-background-rectangle"});return Te.createElement(U8,_N({key:"background-bar-".concat(h),option:a.props.background,isActive:h===l},x))})}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,h=s.children,p=$s(h,Jb);if(!p)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,x=function(w,_){var k=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:k,errorVal:ma(w,_)}},b={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Te.createElement(Rn,b,p.map(function(j){return Te.cloneElement(j,{key:"error-bar-".concat(i,"-").concat(j.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:x})}))}},{key:"render",value:function(){var a=this.props,i=a.hide,s=a.data,o=a.className,l=a.xAxis,c=a.yAxis,u=a.left,h=a.top,p=a.width,m=a.height,x=a.isAnimationActive,b=a.background,j=a.id;if(i||!s||!s.length)return null;var w=this.state.isAnimationFinished,_=mn("recharts-bar",o),k=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,A=k||C,T=hn(j)?this.id:j;return Te.createElement(Rn,{className:_},k||C?Te.createElement("defs",null,Te.createElement("clipPath",{id:"clipPath-".concat(T)},Te.createElement("rect",{x:k?u:u-p/2,y:C?h:h-m/2,width:k?p:p*2,height:C?m:m*2}))):null,Te.createElement(Rn,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(T,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,T),(!x||w)&&Bl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:i.curData}:a.data!==i.curData?{curData:a.data}:null}}])}(v.PureComponent);vH=Ed;dd(Ed,"displayName","Bar");dd(Ed,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!kd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});dd(Ed,"getComposedData",function(t){var e=t.props,n=t.item,a=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,h=t.dataStartIndex,p=t.displayedData,m=t.offset,x=hSe(a,n);if(!x)return null;var b=e.layout,j=n.type.defaultProps,w=j!==void 0?ja(ja({},j),n.props):n.props,_=w.dataKey,k=w.children,C=w.minPointSize,A=b==="horizontal"?o:s,T=u?A.scale.domain():null,E=vSe({numericAxis:A}),I=$s(k,Wb),$=p.map(function(U,B){var R,z,G,K,Y,q;u?R=fSe(u[h+B],T):(R=ma(U,_),Array.isArray(R)||(R=[E,R]));var V=TTe(C,vH.defaultProps.minPointSize)(R[1],B);if(b==="horizontal"){var H,Q=[o.scale(R[0]),o.scale(R[1])],L=Q[0],te=Q[1];z=y$({axis:s,ticks:l,bandSize:i,offset:x.offset,entry:U,index:B}),G=(H=te??L)!==null&&H!==void 0?H:void 0,K=x.size;var me=L-te;if(Y=Number.isNaN(me)?0:me,q={x:z,y:o.y,width:K,height:o.height},Math.abs(V)>0&&Math.abs(Y)<Math.abs(V)){var X=Fi(Y||V)*(Math.abs(V)-Math.abs(Y));G-=X,Y+=X}}else{var Re=[s.scale(R[0]),s.scale(R[1])],Se=Re[0],Ee=Re[1];if(z=Se,G=y$({axis:o,ticks:c,bandSize:i,offset:x.offset,entry:U,index:B}),K=Ee-Se,Y=x.size,q={x:s.x,y:G,width:s.width,height:Y},Math.abs(V)>0&&Math.abs(K)<Math.abs(V)){var Fe=Fi(K||V)*(Math.abs(V)-Math.abs(K));K+=Fe}}return ja(ja(ja({},U),{},{x:z,y:G,width:K,height:Y,value:u?R:R[1],payload:U,background:q},I&&I[B]&&I[B].props),{},{tooltipPayload:[WV(n,U)],tooltipPosition:{x:z+K/2,y:G+Y/2}})});return ja({data:$,layout:b},m)});function wb(t){"@babel/helpers - typeof";return wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wb(t)}function $Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,wH(a.key),a)}}function BTe(t,e,n){return e&&G8(t.prototype,e),n&&G8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function W8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Fo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W8(Object(n),!0).forEach(function(a){$S(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function $S(t,e,n){return e=wH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wH(t){var e=zTe(t,"string");return wb(e)=="symbol"?e:e+""}function zTe(t,e){if(wb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(wb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OM=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.layout,u=e.children,h=Object.keys(n),p={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},m=!!Es(u,Ed);return h.reduce(function(x,b){var j=n[b],w=j.orientation,_=j.domain,k=j.padding,C=k===void 0?{}:k,A=j.mirror,T=j.reversed,E="".concat(w).concat(A?"Mirror":""),I,$,U,B,R;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var z=_[1]-_[0],G=1/0,K=j.categoricalDomain.sort(ixe);if(K.forEach(function(Re,Se){Se>0&&(G=Math.min((Re||0)-(K[Se-1]||0),G))}),Number.isFinite(G)){var Y=G/z,q=j.layout==="vertical"?a.height:a.width;if(j.padding==="gap"&&(I=Y*q/2),j.padding==="no-gap"){var V=$i(e.barCategoryGap,Y*q),H=Y*q/2;I=H-V-(H-V)/q*V}}}i==="xAxis"?$=[a.left+(C.left||0)+(I||0),a.left+a.width-(C.right||0)-(I||0)]:i==="yAxis"?$=c==="horizontal"?[a.top+a.height-(C.bottom||0),a.top+(C.top||0)]:[a.top+(C.top||0)+(I||0),a.top+a.height-(C.bottom||0)-(I||0)]:$=j.range,T&&($=[$[1],$[0]]);var Q=UV(j,s,m),L=Q.scale,te=Q.realScaleType;L.domain(_).range($),VV(L);var me=HV(L,Fo(Fo({},j),{},{realScaleType:te}));i==="xAxis"?(R=w==="top"&&!A||w==="bottom"&&A,U=a.left,B=p[E]-R*j.height):i==="yAxis"&&(R=w==="left"&&!A||w==="right"&&A,U=p[E]-R*j.width,B=a.top);var X=Fo(Fo(Fo({},j),me),{},{realScaleType:te,x:U,y:B,scale:L,width:i==="xAxis"?a.width:j.width,height:i==="yAxis"?a.height:j.height});return X.bandSize=uN(X,me),!j.hide&&i==="xAxis"?p[E]+=(R?-1:1)*X.height:j.hide||(p[E]+=(R?-1:1)*X.width),Fo(Fo({},x),{},$S({},b,X))},{})},NH=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(a,s),y:Math.min(i,o),width:Math.abs(s-a),height:Math.abs(o-i)}},qTe=function(e){var n=e.x1,a=e.y1,i=e.x2,s=e.y2;return NH({x:n,y:a},{x:i,y:s})},SH=function(){function t(e){$Te(this,t),this.scale=e}return BTe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.bandAware,s=a.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),i=a[0],s=a[a.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();$S(SH,"EPS",1e-4);var MM=function(e){var n=Object.keys(e).reduce(function(a,i){return Fo(Fo({},a),{},$S({},i,SH.create(e[i])))},{});return Fo(Fo({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return gTe(i,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return xH(i,function(s,o){return n[o].isInRange(s)})}})};function UTe(t){return(t%180+180)%180}var VTe=function(e){var n=e.width,a=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=UTe(i),o=s*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},DA,K8;function HTe(){if(K8)return DA;K8=1;var t=Wl(),e=Gb(),n=bS();function a(i){return function(s,o,l){var c=Object(s);if(!e(s)){var u=t(o,3);s=n(s),o=function(p){return u(c[p],p,c)}}var h=i(s,o,l);return h>-1?c[u?s[h]:h]:void 0}}return DA=a,DA}var OA,Y8;function GTe(){if(Y8)return OA;Y8=1;var t=pH();function e(n){var a=t(n),i=a%1;return a===a?i?a-i:a:0}return OA=e,OA}var MA,Q8;function WTe(){if(Q8)return MA;Q8=1;var t=_7(),e=Wl(),n=GTe(),a=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var u=l==null?0:n(l);return u<0&&(u=a(c+u,0)),t(s,e(o,3),u)}return MA=i,MA}var IA,X8;function KTe(){if(X8)return IA;X8=1;var t=HTe(),e=WTe(),n=t(e);return IA=n,IA}var YTe=KTe();const QTe=Kn(YTe);var XTe=B9();const JTe=Kn(XTe);var ZTe=JTe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),IM=v.createContext(void 0),RM=v.createContext(void 0),_H=v.createContext(void 0),CH=v.createContext({}),kH=v.createContext(void 0),TH=v.createContext(0),AH=v.createContext(0),J8=function(e){var n=e.state,a=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,h=ZTe(s);return Te.createElement(IM.Provider,{value:a},Te.createElement(RM.Provider,{value:i},Te.createElement(CH.Provider,{value:s},Te.createElement(_H.Provider,{value:h},Te.createElement(kH.Provider,{value:o},Te.createElement(TH.Provider,{value:u},Te.createElement(AH.Provider,{value:c},l)))))))},eAe=function(){return v.useContext(kH)},PH=function(e){var n=v.useContext(IM);n==null&&Lf();var a=n[e];return a==null&&Lf(),a},tAe=function(){var e=v.useContext(IM);return Zu(e)},nAe=function(){var e=v.useContext(RM),n=QTe(e,function(a){return xH(a.domain,Number.isFinite)});return n||Zu(e)},EH=function(e){var n=v.useContext(RM);n==null&&Lf();var a=n[e];return a==null&&Lf(),a},rAe=function(){var e=v.useContext(_H);return e},aAe=function(){return v.useContext(CH)},LM=function(){return v.useContext(AH)},FM=function(){return v.useContext(TH)};function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function iAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,OH(a.key),a)}}function oAe(t,e,n){return e&&sAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lAe(t,e,n){return e=kN(e),cAe(t,DH()?Reflect.construct(e,n||[],kN(t).constructor):e.apply(t,n))}function cAe(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uAe(t)}function uAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DH=function(){return!!t})()}function kN(t){return kN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kN(t)}function dAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fD(t,e)}function fD(t,e){return fD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},fD(t,e)}function Z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function eB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z8(Object(n),!0).forEach(function(a){$M(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function $M(t,e,n){return e=OH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OH(t){var e=hAe(t,"string");return Ag(e)=="symbol"?e:e+""}function hAe(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ag(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fAe(t,e){return yAe(t)||gAe(t,e)||mAe(t,e)||pAe()}function pAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mAe(t,e){if(t){if(typeof t=="string")return tB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tB(t,e)}}function tB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function gAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function yAe(t){if(Array.isArray(t))return t}function pD(){return pD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pD.apply(this,arguments)}var xAe=function(e,n){var a;return Te.isValidElement(e)?a=Te.cloneElement(e,n):on(e)?a=e(n):a=Te.createElement("line",pD({},n,{className:"recharts-reference-line-line"})),a},vAe=function(e,n,a,i,s,o,l,c,u){var h=s.x,p=s.y,m=s.width,x=s.height;if(a){var b=u.y,j=e.y.apply(b,{position:o});if(zl(u,"discard")&&!e.y.isInRange(j))return null;var w=[{x:h+m,y:j},{x:h,y:j}];return c==="left"?w.reverse():w}if(n){var _=u.x,k=e.x.apply(_,{position:o});if(zl(u,"discard")&&!e.x.isInRange(k))return null;var C=[{x:k,y:p+x},{x:k,y:p}];return l==="top"?C.reverse():C}if(i){var A=u.segment,T=A.map(function(E){return e.apply(E,{position:o})});return zl(u,"discard")&&hTe(T,function(E){return!e.isInRange(E)})?null:T}return null};function bAe(t){var e=t.x,n=t.y,a=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=eAe(),h=PH(i),p=EH(s),m=rAe();if(!u||!m)return null;qo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=MM({x:h.scale,y:p.scale}),b=Ea(e),j=Ea(n),w=a&&a.length===2,_=vAe(x,b,j,w,m,t.position,h.orientation,p.orientation,t);if(!_)return null;var k=fAe(_,2),C=k[0],A=C.x,T=C.y,E=k[1],I=E.x,$=E.y,U=zl(t,"hidden")?"url(#".concat(u,")"):void 0,B=eB(eB({clipPath:U},Ut(t,!0)),{},{x1:A,y1:T,x2:I,y2:$});return Te.createElement(Rn,{className:mn("recharts-reference-line",l)},xAe(o,B),Ba.renderCallByParent(t,qTe({x1:A,y1:T,x2:I,y2:$})))}var BM=function(t){function e(){return iAe(this,e),lAe(this,e,arguments)}return dAe(e,t),oAe(e,[{key:"render",value:function(){return Te.createElement(bAe,this.props)}}])}(Te.Component);$M(BM,"displayName","ReferenceLine");$M(BM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function mD(){return mD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},mD.apply(this,arguments)}function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function nB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function rB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(n),!0).forEach(function(a){BS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function jAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,IH(a.key),a)}}function NAe(t,e,n){return e&&wAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function SAe(t,e,n){return e=TN(e),_Ae(t,MH()?Reflect.construct(e,n||[],TN(t).constructor):e.apply(t,n))}function _Ae(t,e){if(e&&(Pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CAe(t)}function CAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MH=function(){return!!t})()}function TN(t){return TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TN(t)}function kAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gD(t,e)}function gD(t,e){return gD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},gD(t,e)}function BS(t,e,n){return e=IH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IH(t){var e=TAe(t,"string");return Pg(e)=="symbol"?e:e+""}function TAe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var AAe=function(e){var n=e.x,a=e.y,i=e.xAxis,s=e.yAxis,o=MM({x:i.scale,y:s.scale}),l=o.apply({x:n,y:a},{bandAware:!0});return zl(e,"discard")&&!o.isInRange(l)?null:l},zS=function(t){function e(){return jAe(this,e),SAe(this,e,arguments)}return kAe(e,t),NAe(e,[{key:"render",value:function(){var a=this.props,i=a.x,s=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,u=Ea(i),h=Ea(s);if(qo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!h)return null;var p=AAe(this.props);if(!p)return null;var m=p.x,x=p.y,b=this.props,j=b.shape,w=b.className,_=zl(this.props,"hidden")?"url(#".concat(c,")"):void 0,k=rB(rB({clipPath:_},Ut(this.props,!0)),{},{cx:m,cy:x});return Te.createElement(Rn,{className:mn("recharts-reference-dot",w)},e.renderDot(j,k),Ba.renderCallByParent(this.props,{x:m-o,y:x-o,width:2*o,height:2*o}))}}])}(Te.Component);BS(zS,"displayName","ReferenceDot");BS(zS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});BS(zS,"renderDot",function(t,e){var n;return Te.isValidElement(t)?n=Te.cloneElement(t,e):on(t)?n=t(e):n=Te.createElement(Zb,mD({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function yD(){return yD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},yD.apply(this,arguments)}function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function aB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function iB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aB(Object(n),!0).forEach(function(a){qS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function PAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,LH(a.key),a)}}function DAe(t,e,n){return e&&EAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OAe(t,e,n){return e=AN(e),MAe(t,RH()?Reflect.construct(e,n||[],AN(t).constructor):e.apply(t,n))}function MAe(t,e){if(e&&(Eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IAe(t)}function IAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RH=function(){return!!t})()}function AN(t){return AN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AN(t)}function RAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xD(t,e)}function xD(t,e){return xD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},xD(t,e)}function qS(t,e,n){return e=LH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LH(t){var e=LAe(t,"string");return Eg(e)=="symbol"?e:e+""}function LAe(t,e){if(Eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var FAe=function(e,n,a,i,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,h=s.xAxis,p=s.yAxis;if(!h||!p)return null;var m=MM({x:h.scale,y:p.scale}),x={x:e?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:a?m.y.apply(c,{position:"start"}):m.y.rangeMin},b={x:n?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:i?m.y.apply(u,{position:"end"}):m.y.rangeMax};return zl(s,"discard")&&(!m.isInRange(x)||!m.isInRange(b))?null:NH(x,b)},US=function(t){function e(){return PAe(this,e),OAe(this,e,arguments)}return RAe(e,t),DAe(e,[{key:"render",value:function(){var a=this.props,i=a.x1,s=a.x2,o=a.y1,l=a.y2,c=a.className,u=a.alwaysShow,h=a.clipPathId;qo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Ea(i),m=Ea(s),x=Ea(o),b=Ea(l),j=this.props.shape;if(!p&&!m&&!x&&!b&&!j)return null;var w=FAe(p,m,x,b,this.props);if(!w&&!j)return null;var _=zl(this.props,"hidden")?"url(#".concat(h,")"):void 0;return Te.createElement(Rn,{className:mn("recharts-reference-area",c)},e.renderRect(j,iB(iB({clipPath:_},Ut(this.props,!0)),w)),Ba.renderCallByParent(this.props,w))}}])}(Te.Component);qS(US,"displayName","ReferenceArea");qS(US,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});qS(US,"renderRect",function(t,e){var n;return Te.isValidElement(t)?n=Te.cloneElement(t,e):on(t)?n=t(e):n=Te.createElement(DM,yD({},e,{className:"recharts-reference-area-rect"})),n});function FH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var a=[],i=0;i<t.length;i+=e)a.push(t[i]);return a}function $Ae(t,e,n){var a={width:t.width+e.width,height:t.height+e.height};return VTe(a,n)}function BAe(t,e,n){var a=n==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:a?i:s,end:a?i+o:s+l}:{start:a?i+o:s+l,end:a?i:s}}function PN(t,e,n,a,i){if(t*e<t*a||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-a)>=0&&t*(e+t*s/2-i)<=0}function zAe(t,e){return FH(t,e+1)}function qAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=e.start,l=e.end,c=0,u=1,h=o,p=function(){var b=a==null?void 0:a[c];if(b===void 0)return{v:FH(a,u)};var j=c,w,_=function(){return w===void 0&&(w=n(b,j)),w},k=b.coordinate,C=c===0||PN(t,k,_,h,l);C||(c=0,h=o,u+=1),C&&(h=k+t*(_()/2+i),c+=u)},m;u<=s.length;)if(m=p(),m)return m.v;return[]}function Nb(t){"@babel/helpers - typeof";return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nb(t)}function sB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sB(Object(n),!0).forEach(function(a){UAe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function UAe(t,e,n){return e=VAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VAe(t){var e=HAe(t,"string");return Nb(e)=="symbol"?e:e+""}function HAe(t,e){if(Nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Nb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=s.length,l=e.start,c=e.end,u=function(m){var x=s[m],b,j=function(){return b===void 0&&(b=n(x,m)),b};if(m===o-1){var w=t*(x.coordinate+t*j()/2-c);s[m]=x=pi(pi({},x),{},{tickCoord:w>0?x.coordinate-w*t:x.coordinate})}else s[m]=x=pi(pi({},x),{},{tickCoord:x.coordinate});var _=PN(t,x.tickCoord,j,l,c);_&&(c=x.tickCoord-t*(j()/2+i),s[m]=pi(pi({},x),{},{isShow:!0}))},h=o-1;h>=0;h--)u(h);return s}function WAe(t,e,n,a,i,s){var o=(a||[]).slice(),l=o.length,c=e.start,u=e.end;if(s){var h=a[l-1],p=n(h,l-1),m=t*(h.coordinate+t*p/2-u);o[l-1]=h=pi(pi({},h),{},{tickCoord:m>0?h.coordinate-m*t:h.coordinate});var x=PN(t,h.tickCoord,function(){return p},c,u);x&&(u=h.tickCoord-t*(p/2+i),o[l-1]=pi(pi({},h),{},{isShow:!0}))}for(var b=s?l-1:l,j=function(k){var C=o[k],A,T=function(){return A===void 0&&(A=n(C,k)),A};if(k===0){var E=t*(C.coordinate-t*T()/2-c);o[k]=C=pi(pi({},C),{},{tickCoord:E<0?C.coordinate-E*t:C.coordinate})}else o[k]=C=pi(pi({},C),{},{tickCoord:C.coordinate});var I=PN(t,C.tickCoord,T,c,u);I&&(c=C.tickCoord+t*(T()/2+i),o[k]=pi(pi({},C),{},{isShow:!0}))},w=0;w<b;w++)j(w);return o}function zM(t,e,n){var a=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,h=t.unit,p=t.angle;if(!i||!i.length||!a)return[];if(Nt(c)||kd.isSsr)return zAe(i,typeof c=="number"&&Nt(c)?c:0);var m=[],x=l==="top"||l==="bottom"?"width":"height",b=h&&x==="width"?Tv(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},j=function(C,A){var T=on(u)?u(C.value,A):C.value;return x==="width"?$Ae(Tv(T,{fontSize:e,letterSpacing:n}),b,p):Tv(T,{fontSize:e,letterSpacing:n})[x]},w=i.length>=2?Fi(i[1].coordinate-i[0].coordinate):1,_=BAe(s,w,x);return c==="equidistantPreserveStart"?qAe(w,_,j,i,o):(c==="preserveStart"||c==="preserveStartEnd"?m=WAe(w,_,j,i,o,c==="preserveStartEnd"):m=GAe(w,_,j,i,o),m.filter(function(k){return k.isShow}))}var KAe=["viewBox"],YAe=["viewBox"],QAe=["ticks"];function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function $m(){return $m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},$m.apply(this,arguments)}function oB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ka(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oB(Object(n),!0).forEach(function(a){qM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function RA(t,e){if(t==null)return{};var n=XAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function XAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function JAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lB(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,BH(a.key),a)}}function ZAe(t,e,n){return e&&lB(t.prototype,e),n&&lB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ePe(t,e,n){return e=EN(e),tPe(t,$H()?Reflect.construct(e,n||[],EN(t).constructor):e.apply(t,n))}function tPe(t,e){if(e&&(Dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nPe(t)}function nPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $H(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($H=function(){return!!t})()}function EN(t){return EN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},EN(t)}function rPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vD(t,e)}function vD(t,e){return vD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},vD(t,e)}function qM(t,e,n){return e=BH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BH(t){var e=aPe(t,"string");return Dg(e)=="symbol"?e:e+""}function aPe(t,e){if(Dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ty=function(t){function e(n){var a;return JAe(this,e),a=ePe(this,e,[n]),a.state={fontSize:"",letterSpacing:""},a}return rPe(e,t),ZAe(e,[{key:"shouldComponentUpdate",value:function(a,i){var s=a.viewBox,o=RA(a,KAe),l=this.props,c=l.viewBox,u=RA(l,YAe);return!Hm(s,c)||!Hm(o,u)||!Hm(i,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var i=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,h=i.tickSize,p=i.mirror,m=i.tickMargin,x,b,j,w,_,k,C=p?-1:1,A=a.tickSize||h,T=Nt(a.tickCoord)?a.tickCoord:a.coordinate;switch(u){case"top":x=b=a.coordinate,w=o+ +!p*c,j=w-C*A,k=j-C*m,_=T;break;case"left":j=w=a.coordinate,b=s+ +!p*l,x=b-C*A,_=x-C*m,k=T;break;case"right":j=w=a.coordinate,b=s+ +p*l,x=b+C*A,_=x+C*m,k=T;break;default:x=b=a.coordinate,w=o+ +p*c,j=w+C*A,k=j+C*m,_=T;break}return{line:{x1:x,y1:j,x2:b,y2:w},tick:{x:_,y:k}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.orientation,u=a.mirror,h=a.axisLine,p=ka(ka(ka({},Ut(this.props,!1)),Ut(h,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);p=ka(ka({},p),{},{x1:i,y1:s+m*l,x2:i+o,y2:s+m*l})}else{var x=+(c==="left"&&!u||c==="right"&&u);p=ka(ka({},p),{},{x1:i+x*o,y1:s,x2:i+x*o,y2:s+l})}return Te.createElement("line",$m({},p,{className:mn("recharts-cartesian-axis-line",Fs(h,"className"))}))}},{key:"renderTicks",value:function(a,i,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,h=l.tick,p=l.tickFormatter,m=l.unit,x=zM(ka(ka({},this.props),{},{ticks:a}),i,s),b=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),w=Ut(this.props,!1),_=Ut(h,!1),k=ka(ka({},w),{},{fill:"none"},Ut(c,!1)),C=x.map(function(A,T){var E=o.getTickLineCoord(A),I=E.line,$=E.tick,U=ka(ka(ka(ka({textAnchor:b,verticalAnchor:j},w),{},{stroke:"none",fill:u},_),$),{},{index:T,payload:A,visibleTicksCount:x.length,tickFormatter:p});return Te.createElement(Rn,$m({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Of(o.props,A,T)),c&&Te.createElement("line",$m({},k,I,{className:mn("recharts-cartesian-axis-tick-line",Fs(c,"className"))})),h&&e.renderTickItem(h,U,"".concat(on(p)?p(A.value,T):A.value).concat(m||"")))});return Te.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var a=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,h=i.hide;if(h)return null;var p=this.props,m=p.ticks,x=RA(p,QAe),b=m;return on(c)&&(b=m&&m.length>0?c(this.props):c(x)),o<=0||l<=0||!b||!b.length?null:Te.createElement(Rn,{className:mn("recharts-cartesian-axis",u),ref:function(w){a.layerReference=w}},s&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Ba.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,i,s){var o,l=mn(i.className,"recharts-cartesian-axis-tick-value");return Te.isValidElement(a)?o=Te.cloneElement(a,ka(ka({},i),{},{className:l})):on(a)?o=a(ka(ka({},i),{},{className:l})):o=Te.createElement(Mf,$m({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(v.Component);qM(ty,"displayName","CartesianAxis");qM(ty,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var iPe=["x1","y1","x2","y2","key"],sPe=["offset"];function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}function cB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function gi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(n),!0).forEach(function(a){oPe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function oPe(t,e,n){return e=lPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lPe(t){var e=cPe(t,"string");return Ff(e)=="symbol"?e:e+""}function cPe(t,e){if(Ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ff(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},lf.apply(this,arguments)}function uB(t,e){if(t==null)return{};var n=uPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function uPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var dPe=function(e){var n=e.fill;if(!n||n==="none")return null;var a=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return Te.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function zH(t,e){var n;if(Te.isValidElement(t))n=Te.cloneElement(t,e);else if(on(t))n=t(e);else{var a=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=uB(e,iPe),u=Ut(c,!1);u.offset;var h=uB(u,sPe);n=Te.createElement("line",lf({},h,{x1:a,y1:i,x2:s,y2:o,fill:"none",key:l}))}return n}function hPe(t){var e=t.x,n=t.width,a=t.horizontal,i=a===void 0?!0:a,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=gi(gi({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return zH(i,u)});return Te.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function fPe(t){var e=t.y,n=t.height,a=t.vertical,i=a===void 0?!0:a,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=gi(gi({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return zH(i,u)});return Te.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function pPe(t){var e=t.horizontalFill,n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var h=l.map(function(m){return Math.round(m+i-i)}).sort(function(m,x){return m-x});i!==h[0]&&h.unshift(0);var p=h.map(function(m,x){var b=!h[x+1],j=b?i+o-m:h[x+1]-m;if(j<=0)return null;var w=x%e.length;return Te.createElement("rect",{key:"react-".concat(x),y:m,x:a,height:j,width:s,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Te.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function mPe(t){var e=t.vertical,n=e===void 0?!0:e,a=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!a||!a.length)return null;var h=u.map(function(m){return Math.round(m+s-s)}).sort(function(m,x){return m-x});s!==h[0]&&h.unshift(0);var p=h.map(function(m,x){var b=!h[x+1],j=b?s+l-m:h[x+1]-m;if(j<=0)return null;var w=x%a.length;return Te.createElement("rect",{key:"react-".concat(x),x:m,y:o,width:j,height:c,stroke:"none",fill:a[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Te.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var gPe=function(e,n){var a=e.xAxis,i=e.width,s=e.height,o=e.offset;return qV(zM(gi(gi(gi({},ty.defaultProps),a),{},{ticks:Dc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},yPe=function(e,n){var a=e.yAxis,i=e.width,s=e.height,o=e.offset;return qV(zM(gi(gi(gi({},ty.defaultProps),a),{},{ticks:Dc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},Am={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Sb(t){var e,n,a,i,s,o,l=LM(),c=FM(),u=aAe(),h=gi(gi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Am.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Am.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:Am.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Am.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Am.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Am.verticalFill,x:Nt(t.x)?t.x:u.left,y:Nt(t.y)?t.y:u.top,width:Nt(t.width)?t.width:u.width,height:Nt(t.height)?t.height:u.height}),p=h.x,m=h.y,x=h.width,b=h.height,j=h.syncWithTicks,w=h.horizontalValues,_=h.verticalValues,k=tAe(),C=nAe();if(!Nt(x)||x<=0||!Nt(b)||b<=0||!Nt(p)||p!==+p||!Nt(m)||m!==+m)return null;var A=h.verticalCoordinatesGenerator||gPe,T=h.horizontalCoordinatesGenerator||yPe,E=h.horizontalPoints,I=h.verticalPoints;if((!E||!E.length)&&on(T)){var $=w&&w.length,U=T({yAxis:C?gi(gi({},C),{},{ticks:$?w:C.ticks}):void 0,width:l,height:c,offset:u},$?!0:j);qo(Array.isArray(U),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ff(U),"]")),Array.isArray(U)&&(E=U)}if((!I||!I.length)&&on(A)){var B=_&&_.length,R=A({xAxis:k?gi(gi({},k),{},{ticks:B?_:k.ticks}):void 0,width:l,height:c,offset:u},B?!0:j);qo(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ff(R),"]")),Array.isArray(R)&&(I=R)}return Te.createElement("g",{className:"recharts-cartesian-grid"},Te.createElement(dPe,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),Te.createElement(hPe,lf({},h,{offset:u,horizontalPoints:E,xAxis:k,yAxis:C})),Te.createElement(fPe,lf({},h,{offset:u,verticalPoints:I,xAxis:k,yAxis:C})),Te.createElement(pPe,lf({},h,{horizontalPoints:E})),Te.createElement(mPe,lf({},h,{verticalPoints:I})))}Sb.displayName="CartesianGrid";var xPe=["type","layout","connectNulls","ref"],vPe=["key"];function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function dB(t,e){if(t==null)return{};var n=bPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function bPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Mv(){return Mv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Mv.apply(this,arguments)}function hB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function As(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hB(Object(n),!0).forEach(function(a){$o(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Pm(t){return SPe(t)||NPe(t)||wPe(t)||jPe()}function jPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wPe(t,e){if(t){if(typeof t=="string")return bD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bD(t,e)}}function NPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SPe(t){if(Array.isArray(t))return bD(t)}function bD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _Pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fB(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,UH(a.key),a)}}function CPe(t,e,n){return e&&fB(t.prototype,e),n&&fB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kPe(t,e,n){return e=DN(e),TPe(t,qH()?Reflect.construct(e,n||[],DN(t).constructor):e.apply(t,n))}function TPe(t,e){if(e&&(Og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return APe(t)}function APe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qH=function(){return!!t})()}function DN(t){return DN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},DN(t)}function PPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jD(t,e)}function jD(t,e){return jD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},jD(t,e)}function $o(t,e,n){return e=UH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UH(t){var e=EPe(t,"string");return Og(e)=="symbol"?e:e+""}function EPe(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Og(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var e0=function(t){function e(){var n;_Pe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=kPe(this,e,[].concat(i)),$o(n,"state",{isAnimationFinished:!0,totalLength:0}),$o(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),$o(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(_,k){return _+k});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var h=Math.floor(o/u),p=o%u,m=l-o,x=[],b=0,j=0;b<c.length;j+=c[b],++b)if(j+c[b]>p){x=[].concat(Pm(c.slice(0,b)),[p-j]);break}var w=x.length%2===0?[0,m]:[m];return[].concat(Pm(e.repeat(c,h)),Pm(x),w).map(function(_){return"".concat(_,"px")}).join(", ")}),$o(n,"id",Uf("recharts-line-")),$o(n,"pathRef",function(o){n.mainCurve=o}),$o(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),$o(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return PPe(e,t),CPe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,h=s.children,p=$s(h,Jb);if(!p)return null;var m=function(j,w){return{x:j.x,y:j.y,value:j.value,errorVal:ma(j.payload,w)}},x={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Te.createElement(Rn,x,p.map(function(b){return Te.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,h=l.dataKey,p=Ut(this.props,!1),m=Ut(c,!0),x=u.map(function(j,w){var _=As(As(As({key:"dot-".concat(w),r:3},p),m),{},{index:w,cx:j.x,cy:j.y,value:j.value,dataKey:h,payload:j.payload,points:u});return e.renderDotItem(c,_)}),b={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Te.createElement(Rn,Mv({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(a,i,s,o){var l=this.props,c=l.type,u=l.layout,h=l.connectNulls;l.ref;var p=dB(l,xPe),m=As(As(As({},Ut(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:a},o),{},{type:c,layout:u,connectNulls:h});return Te.createElement(wf,Mv({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,h=o.animationBegin,p=o.animationDuration,m=o.animationEasing,x=o.animationId,b=o.animateNewValues,j=o.width,w=o.height,_=this.state,k=_.prevPoints,C=_.totalLength;return Te.createElement(Vo,{begin:h,duration:p,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var T=A.t;if(k){var E=k.length/l.length,I=l.map(function(z,G){var K=Math.floor(G*E);if(k[K]){var Y=k[K],q=Pa(Y.x,z.x),V=Pa(Y.y,z.y);return As(As({},z),{},{x:q(T),y:V(T)})}if(b){var H=Pa(j*2,z.x),Q=Pa(w/2,z.y);return As(As({},z),{},{x:H(T),y:Q(T)})}return As(As({},z),{},{x:z.x,y:z.y})});return s.renderCurveStatically(I,a,i)}var $=Pa(0,C),U=$(T),B;if(c){var R="".concat(c).split(/[,\s]+/gim).map(function(z){return parseFloat(z)});B=s.getStrokeDasharray(U,C,R)}else B=s.generateSimpleStrokeDasharray(C,U);return s.renderCurveStatically(l,a,i,{strokeDasharray:B})})}},{key:"renderCurve",value:function(a,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,h=c.totalLength;return l&&o&&o.length&&(!u&&h>0||!If(u,o))?this.renderCurveWithAnimation(a,i):this.renderCurveStatically(o,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.xAxis,h=i.yAxis,p=i.top,m=i.left,x=i.width,b=i.height,j=i.isAnimationActive,w=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,k=l.length===1,C=mn("recharts-line",c),A=u&&u.allowDataOverflow,T=h&&h.allowDataOverflow,E=A||T,I=hn(w)?this.id:w,$=(a=Ut(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},U=$.r,B=U===void 0?3:U,R=$.strokeWidth,z=R===void 0?2:R,G=H9(o)?o:{},K=G.clipDot,Y=K===void 0?!0:K,q=B*2+z;return Te.createElement(Rn,{className:C},A||T?Te.createElement("defs",null,Te.createElement("clipPath",{id:"clipPath-".concat(I)},Te.createElement("rect",{x:A?m:m-x/2,y:T?p:p-b/2,width:A?x:x*2,height:T?b:b*2})),!Y&&Te.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Te.createElement("rect",{x:m-q/2,y:p-q/2,width:x+q,height:b+q}))):null,!k&&this.renderCurve(E,I),this.renderErrorBar(E,I),(k||o)&&this.renderDots(E,Y,I),(!j||_)&&Bl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,i){for(var s=a.length%2!==0?[].concat(Pm(a),[0]):a,o=[],l=0;l<i;++l)o=[].concat(Pm(o),Pm(s));return o}},{key:"renderDotItem",value:function(a,i){var s;if(Te.isValidElement(a))s=Te.cloneElement(a,i);else if(on(a))s=a(i);else{var o=i.key,l=dB(i,vPe),c=mn("recharts-line-dot",typeof a!="boolean"?a.className:"");s=Te.createElement(Zb,Mv({key:o},l,{className:c}))}return s}}])}(v.PureComponent);$o(e0,"displayName","Line");$o(e0,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!kd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});$o(e0,"getComposedData",function(t){var e=t.props,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,u=t.offset,h=e.layout,p=c.map(function(m,x){var b=ma(m,o);return h==="horizontal"?{x:cN({axis:n,ticks:i,bandSize:l,entry:m,index:x}),y:hn(b)?null:a.scale(b),value:b,payload:m}:{x:hn(b)?null:n.scale(b),y:cN({axis:a,ticks:s,bandSize:l,entry:m,index:x}),value:b,payload:m}});return As({points:p,layout:h},u)});var DPe=["layout","type","stroke","connectNulls","isRange","ref"],OPe=["key"],VH;function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function HH(t,e){if(t==null)return{};var n=MPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function MPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cf.apply(this,arguments)}function pB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Yu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pB(Object(n),!0).forEach(function(a){Ll(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function IPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mB(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,WH(a.key),a)}}function RPe(t,e,n){return e&&mB(t.prototype,e),n&&mB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function LPe(t,e,n){return e=ON(e),FPe(t,GH()?Reflect.construct(e,n||[],ON(t).constructor):e.apply(t,n))}function FPe(t,e){if(e&&(Mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Pe(t)}function $Pe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GH=function(){return!!t})()}function ON(t){return ON=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ON(t)}function BPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wD(t,e)}function wD(t,e){return wD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},wD(t,e)}function Ll(t,e,n){return e=WH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WH(t){var e=zPe(t,"string");return Mg(e)=="symbol"?e:e+""}function zPe(t,e){if(Mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Mg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Dd=function(t){function e(){var n;IPe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=LPe(this,e,[].concat(i)),Ll(n,"state",{isAnimationFinished:!0}),Ll(n,"id",Uf("recharts-area-")),Ll(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),on(o)&&o()}),Ll(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),on(o)&&o()}),n}return BPe(e,t),RPe(e,[{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,h=c.points,p=c.dataKey,m=Ut(this.props,!1),x=Ut(u,!0),b=h.map(function(w,_){var k=Yu(Yu(Yu({key:"dot-".concat(_),r:3},m),x),{},{index:_,cx:w.x,cy:w.y,dataKey:p,value:w.value,payload:w.payload,points:h});return e.renderDotItem(u,k)}),j={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Te.createElement(Rn,cf({className:"recharts-area-dots"},j),b)}},{key:"renderHorizontalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,u=o[o.length-1].x,h=a*Math.abs(c-u),p=ud(o.map(function(m){return m.y||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(ud(s.map(function(m){return m.y||0})),p)),Nt(p)?Te.createElement("rect",{x:c<u?c:c-h,y:0,width:h,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,u=o[o.length-1].y,h=a*Math.abs(c-u),p=ud(o.map(function(m){return m.x||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(ud(s.map(function(m){return m.x||0})),p)),Nt(p)?Te.createElement("rect",{x:0,y:c<u?c:c-h,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(a){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,i,s,o){var l=this.props,c=l.layout,u=l.type,h=l.stroke,p=l.connectNulls,m=l.isRange;l.ref;var x=HH(l,DPe);return Te.createElement(Rn,{clipPath:s?"url(#clipPath-".concat(o,")"):null},Te.createElement(wf,cf({},Ut(x,!0),{points:a,connectNulls:p,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),h!=="none"&&Te.createElement(wf,cf({},Ut(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:a})),h!=="none"&&m&&Te.createElement(wf,cf({},Ut(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,h=o.animationBegin,p=o.animationDuration,m=o.animationEasing,x=o.animationId,b=this.state,j=b.prevPoints,w=b.prevBaseLine;return Te.createElement(Vo,{begin:h,duration:p,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var k=_.t;if(j){var C=j.length/l.length,A=l.map(function($,U){var B=Math.floor(U*C);if(j[B]){var R=j[B],z=Pa(R.x,$.x),G=Pa(R.y,$.y);return Yu(Yu({},$),{},{x:z(k),y:G(k)})}return $}),T;if(Nt(c)&&typeof c=="number"){var E=Pa(w,c);T=E(k)}else if(hn(c)||Qg(c)){var I=Pa(w,0);T=I(k)}else T=c.map(function($,U){var B=Math.floor(U*C);if(w[B]){var R=w[B],z=Pa(R.x,$.x),G=Pa(R.y,$.y);return Yu(Yu({},$),{},{x:z(k),y:G(k)})}return $});return s.renderAreaStatically(A,T,a,i)}return Te.createElement(Rn,null,Te.createElement("defs",null,Te.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(k))),Te.createElement(Rn,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,a,i)))})}},{key:"renderArea",value:function(a,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,h=u.prevPoints,p=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!h&&m>0||!If(h,o)||!If(p,l))?this.renderAreaWithAnimation(a,i):this.renderAreaStatically(o,l,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.top,h=i.left,p=i.xAxis,m=i.yAxis,x=i.width,b=i.height,j=i.isAnimationActive,w=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,k=l.length===1,C=mn("recharts-area",c),A=p&&p.allowDataOverflow,T=m&&m.allowDataOverflow,E=A||T,I=hn(w)?this.id:w,$=(a=Ut(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},U=$.r,B=U===void 0?3:U,R=$.strokeWidth,z=R===void 0?2:R,G=H9(o)?o:{},K=G.clipDot,Y=K===void 0?!0:K,q=B*2+z;return Te.createElement(Rn,{className:C},A||T?Te.createElement("defs",null,Te.createElement("clipPath",{id:"clipPath-".concat(I)},Te.createElement("rect",{x:A?h:h-x/2,y:T?u:u-b/2,width:A?x:x*2,height:T?b:b*2})),!Y&&Te.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Te.createElement("rect",{x:h-q/2,y:u-q/2,width:x+q,height:b+q}))):null,k?null:this.renderArea(E,I),(o||k)&&this.renderDots(E,Y,I),(!j||_)&&Bl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:a.points!==i.curPoints||a.baseLine!==i.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(v.PureComponent);VH=Dd;Ll(Dd,"displayName","Area");Ll(Dd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!kd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ll(Dd,"getBaseValue",function(t,e,n,a){var i=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(Nt(l)&&typeof l=="number")return l;var c=i==="horizontal"?a:n,u=c.scale.domain();if(c.type==="number"){var h=Math.max(u[0],u[1]),p=Math.min(u[0],u[1]);return l==="dataMin"?p:l==="dataMax"||h<0?h:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Ll(Dd,"getComposedData",function(t){var e=t.props,n=t.item,a=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,h=t.dataStartIndex,p=t.displayedData,m=t.offset,x=e.layout,b=u&&u.length,j=VH.getBaseValue(e,n,a,i),w=x==="horizontal",_=!1,k=p.map(function(A,T){var E;b?E=u[h+T]:(E=ma(A,c),Array.isArray(E)?_=!0:E=[j,E]);var I=E[1]==null||b&&ma(A,c)==null;return w?{x:cN({axis:a,ticks:s,bandSize:l,entry:A,index:T}),y:I?null:i.scale(E[1]),value:E,payload:A}:{x:I?null:a.scale(E[1]),y:cN({axis:i,ticks:o,bandSize:l,entry:A,index:T}),value:E,payload:A}}),C;return b||_?C=k.map(function(A){var T=Array.isArray(A.value)?A.value[0]:null;return w?{x:A.x,y:T!=null&&A.y!=null?i.scale(T):null}:{x:T!=null?a.scale(T):null,y:A.y}}):C=w?i.scale(j):a.scale(j),Yu({points:k,baseLine:C,layout:x,isRange:_},m)});Ll(Dd,"renderDotItem",function(t,e){var n;if(Te.isValidElement(t))n=Te.cloneElement(t,e);else if(on(t))n=t(e);else{var a=mn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=HH(e,OPe);n=Te.createElement(Zb,cf({},s,{key:i,className:a}))}return n});function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function qPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UPe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,QH(a.key),a)}}function VPe(t,e,n){return e&&UPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function HPe(t,e,n){return e=MN(e),GPe(t,KH()?Reflect.construct(e,n||[],MN(t).constructor):e.apply(t,n))}function GPe(t,e){if(e&&(Ig(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WPe(t)}function WPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KH=function(){return!!t})()}function MN(t){return MN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},MN(t)}function KPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ND(t,e)}function ND(t,e){return ND=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},ND(t,e)}function YH(t,e,n){return e=QH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QH(t){var e=YPe(t,"string");return Ig(e)=="symbol"?e:e+""}function YPe(t,e){if(Ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ig(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function SD(){return SD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},SD.apply(this,arguments)}function QPe(t){var e=t.xAxisId,n=LM(),a=FM(),i=PH(e);return i==null?null:v.createElement(ty,SD({},i,{className:mn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return Dc(o,!0)}}))}var Gc=function(t){function e(){return qPe(this,e),HPe(this,e,arguments)}return KPe(e,t),VPe(e,[{key:"render",value:function(){return v.createElement(QPe,this.props)}}])}(v.Component);YH(Gc,"displayName","XAxis");YH(Gc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function XPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JPe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,ZH(a.key),a)}}function ZPe(t,e,n){return e&&JPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eEe(t,e,n){return e=IN(e),tEe(t,XH()?Reflect.construct(e,n||[],IN(t).constructor):e.apply(t,n))}function tEe(t,e){if(e&&(Rg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nEe(t)}function nEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XH=function(){return!!t})()}function IN(t){return IN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},IN(t)}function rEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_D(t,e)}function _D(t,e){return _D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},_D(t,e)}function JH(t,e,n){return e=ZH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZH(t){var e=aEe(t,"string");return Rg(e)=="symbol"?e:e+""}function aEe(t,e){if(Rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Rg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function CD(){return CD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},CD.apply(this,arguments)}var iEe=function(e){var n=e.yAxisId,a=LM(),i=FM(),s=EH(n);return s==null?null:v.createElement(ty,CD({},s,{className:mn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:i},ticksGenerator:function(l){return Dc(l,!0)}}))},Wc=function(t){function e(){return XPe(this,e),eEe(this,e,arguments)}return rEe(e,t),ZPe(e,[{key:"render",value:function(){return v.createElement(iEe,this.props)}}])}(v.Component);JH(Wc,"displayName","YAxis");JH(Wc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function gB(t){return cEe(t)||lEe(t)||oEe(t)||sEe()}function sEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oEe(t,e){if(t){if(typeof t=="string")return kD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kD(t,e)}}function lEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cEe(t){if(Array.isArray(t))return kD(t)}function kD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var TD=function(e,n,a,i,s){var o=$s(e,BM),l=$s(e,zS),c=[].concat(gB(o),gB(l)),u=$s(e,US),h="".concat(i,"Id"),p=i[0],m=n;if(c.length&&(m=c.reduce(function(j,w){if(w.props[h]===a&&zl(w.props,"extendDomain")&&Nt(w.props[p])){var _=w.props[p];return[Math.min(j[0],_),Math.max(j[1],_)]}return j},m)),u.length){var x="".concat(p,"1"),b="".concat(p,"2");m=u.reduce(function(j,w){if(w.props[h]===a&&zl(w.props,"extendDomain")&&Nt(w.props[x])&&Nt(w.props[b])){var _=w.props[x],k=w.props[b];return[Math.min(j[0],_,k),Math.max(j[1],_,k)]}return j},m)}return s&&s.length&&(m=s.reduce(function(j,w){return Nt(w)?[Math.min(j[0],w),Math.max(j[1],w)]:j},m)),m},LA={exports:{}},yB;function uEe(){return yB||(yB=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function s(c,u,h,p,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,p||c,m),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],h,p;if(this._eventsCount===0)return u;for(p in h=this._events)e.call(h,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},l.prototype.listeners=function(u){var h=n?n+u:u,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,x=p.length,b=new Array(x);m<x;m++)b[m]=p[m].fn;return b},l.prototype.listenerCount=function(u){var h=n?n+u:u,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,h,p,m,x,b){var j=n?n+u:u;if(!this._events[j])return!1;var w=this._events[j],_=arguments.length,k,C;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,h),!0;case 3:return w.fn.call(w.context,h,p),!0;case 4:return w.fn.call(w.context,h,p,m),!0;case 5:return w.fn.call(w.context,h,p,m,x),!0;case 6:return w.fn.call(w.context,h,p,m,x,b),!0}for(C=1,k=new Array(_-1);C<_;C++)k[C-1]=arguments[C];w.fn.apply(w.context,k)}else{var A=w.length,T;for(C=0;C<A;C++)switch(w[C].once&&this.removeListener(u,w[C].fn,void 0,!0),_){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,h);break;case 3:w[C].fn.call(w[C].context,h,p);break;case 4:w[C].fn.call(w[C].context,h,p,m);break;default:if(!k)for(T=1,k=new Array(_-1);T<_;T++)k[T-1]=arguments[T];w[C].fn.apply(w[C].context,k)}}return!0},l.prototype.on=function(u,h,p){return s(this,u,h,p,!1)},l.prototype.once=function(u,h,p){return s(this,u,h,p,!0)},l.prototype.removeListener=function(u,h,p,m){var x=n?n+u:u;if(!this._events[x])return this;if(!h)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===h&&(!m||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,w=[],_=b.length;j<_;j++)(b[j].fn!==h||m&&!b[j].once||p&&b[j].context!==p)&&w.push(b[j]);w.length?this._events[x]=w.length===1?w[0]:w:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var h;return u?(h=n?n+u:u,this._events[h]&&o(this,h)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(LA)),LA.exports}var dEe=uEe();const hEe=Kn(dEe);var FA=new hEe,$A="recharts.syncMouseEvents";function _b(t){"@babel/helpers - typeof";return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_b(t)}function fEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,eG(a.key),a)}}function mEe(t,e,n){return e&&pEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BA(t,e,n){return e=eG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eG(t){var e=gEe(t,"string");return _b(e)=="symbol"?e:e+""}function gEe(t,e){if(_b(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(_b(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yEe=function(){function t(){fEe(this,t),BA(this,"activeIndex",0),BA(this,"coordinateList",[]),BA(this,"layout","horizontal")}return mEe(t,[{key:"setDetails",value:function(n){var a,i=n.coordinateList,s=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,h=n.offset,p=h===void 0?null:h,m=n.mouseHandlerCallback,x=m===void 0?null:m;this.coordinateList=(a=s??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((a=window)===null||a===void 0?void 0:a.scrollY)||0,p=s+c+u,m=o+this.offset.top+l/2+h;this.mouseHandlerCallback({pageX:p,pageY:m})}}}])}();function xEe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var a=t==null?void 0:t[0],i=t==null?void 0:t[1];if(a&&i&&Nt(a)&&Nt(i))return!0}return!1}function vEe(t,e,n,a){var i=a/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?a:n.width-1,height:t==="horizontal"?n.height-1:a}}function tG(t){var e=t.cx,n=t.cy,a=t.radius,i=t.startAngle,s=t.endAngle,o=Br(e,n,a,i),l=Br(e,n,a,s);return{points:[o,l],cx:e,cy:n,radius:a,startAngle:i,endAngle:s}}function bEe(t,e,n){var a,i,s,o;if(t==="horizontal")a=e.x,s=a,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,a=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,h=e.outerRadius,p=e.angle,m=Br(l,c,u,p),x=Br(l,c,h,p);a=m.x,i=m.y,s=x.x,o=x.y}else return tG(e);return[{x:a,y:i},{x:s,y:o}]}function Cb(t){"@babel/helpers - typeof";return Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cb(t)}function xB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function W1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xB(Object(n),!0).forEach(function(a){jEe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function jEe(t,e,n){return e=wEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wEe(t){var e=NEe(t,"string");return Cb(e)=="symbol"?e:e+""}function NEe(t,e){if(Cb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Cb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SEe(t){var e,n,a=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,h=t.tooltipAxisBandSize,p=t.layout,m=t.chartName,x=(e=a.props.cursor)!==null&&e!==void 0?e:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!x||!s||!o||m!=="ScatterChart"&&i!=="axis")return null;var b,j=wf;if(m==="ScatterChart")b=o,j=I2e;else if(m==="BarChart")b=vEe(p,o,c,h),j=DM;else if(p==="radial"){var w=tG(o),_=w.cx,k=w.cy,C=w.radius,A=w.startAngle,T=w.endAngle;b={cx:_,cy:k,startAngle:A,endAngle:T,innerRadius:C,outerRadius:C},j=ZV}else b={points:bEe(p,o,c)},j=wf;var E=W1(W1(W1(W1({stroke:"#ccc",pointerEvents:"none"},c),b),Ut(x,!1)),{},{payload:l,payloadIndex:u,className:mn("recharts-tooltip-cursor",x.className)});return v.isValidElement(x)?v.cloneElement(x,E):v.createElement(j,E)}var _Ee=["item"],CEe=["children","className","width","height","style","compact","title","desc"];function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function Bm(){return Bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Bm.apply(this,arguments)}function vB(t,e){return AEe(t)||TEe(t,e)||rG(t,e)||kEe()}function kEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function AEe(t){if(Array.isArray(t))return t}function bB(t,e){if(t==null)return{};var n=PEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function PEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function EEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,aG(a.key),a)}}function OEe(t,e,n){return e&&DEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MEe(t,e,n){return e=RN(e),IEe(t,nG()?Reflect.construct(e,n||[],RN(t).constructor):e.apply(t,n))}function IEe(t,e){if(e&&(Lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return REe(t)}function REe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nG=function(){return!!t})()}function RN(t){return RN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},RN(t)}function LEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AD(t,e)}function AD(t,e){return AD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},AD(t,e)}function Fg(t){return BEe(t)||$Ee(t)||rG(t)||FEe()}function FEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rG(t,e){if(t){if(typeof t=="string")return PD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PD(t,e)}}function $Ee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BEe(t){if(Array.isArray(t))return PD(t)}function PD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function jB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jB(Object(n),!0).forEach(function(a){an(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function an(t,e,n){return e=aG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aG(t){var e=zEe(t,"string");return Lg(e)=="symbol"?e:e+""}function zEe(t,e){if(Lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Lg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qEe={xAxis:["bottom","top"],yAxis:["left","right"]},UEe={width:"100%",height:"100%"},iG={x:0,y:0};function K1(t){return t}var VEe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},HEe=function(e,n,a,i){var s=n.find(function(h){return h&&h.index===a});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return lt(lt(lt({},i),Br(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=i.angle;return lt(lt(lt({},i),Br(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return iG},VS=function(e,n){var a=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(a??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Fg(l),Fg(u)):l},[]);return o.length>0?o:e&&e.length&&Nt(i)&&Nt(s)?e.slice(i,s+1):[]};function sG(t){return t==="number"?[0,"auto"]:void 0}var ED=function(e,n,a,i){var s=e.graphicalItems,o=e.tooltipAxis,l=VS(n,e);return a<0||!s||!s.length||a>=l.length?null:s.reduce(function(c,u){var h,p=(h=u.props.data)!==null&&h!==void 0?h:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=a&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;m=Fw(x,o.dataKey,i)}else m=p&&p[a]||l[a];return m?[].concat(Fg(c),[WV(u,m)]):c},[])},wB=function(e,n,a,i){var s=i||{x:e.chartX,y:e.chartY},o=VEe(s,a),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,h=sSe(o,l,u,c);if(h>=0&&u){var p=u[h]&&u[h].value,m=ED(e,n,h,p),x=HEe(a,l,h,s);return{activeTooltipIndex:h,activeLabel:p,activePayload:m,activeCoordinate:x}}return null},GEe=function(e,n){var a=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,h=e.layout,p=e.children,m=e.stackOffset,x=zV(h,s);return a.reduce(function(b,j){var w,_=j.type.defaultProps!==void 0?lt(lt({},j.type.defaultProps),j.props):j.props,k=_.type,C=_.dataKey,A=_.allowDataOverflow,T=_.allowDuplicatedCategory,E=_.scale,I=_.ticks,$=_.includeHidden,U=_[o];if(b[U])return b;var B=VS(e.data,{graphicalItems:i.filter(function(me){var X,Re=o in me.props?me.props[o]:(X=me.type.defaultProps)===null||X===void 0?void 0:X[o];return Re===U}),dataStartIndex:c,dataEndIndex:u}),R=B.length,z,G,K;xEe(_.domain,A,k)&&(z=VE(_.domain,null,A),x&&(k==="number"||E!=="auto")&&(K=Pv(B,C,"category")));var Y=sG(k);if(!z||z.length===0){var q,V=(q=_.domain)!==null&&q!==void 0?q:Y;if(C){if(z=Pv(B,C,k),k==="category"&&x){var H=axe(z);T&&H?(G=z,z=wN(0,R)):T||(z=b$(V,z,j).reduce(function(me,X){return me.indexOf(X)>=0?me:[].concat(Fg(me),[X])},[]))}else if(k==="category")T?z=z.filter(function(me){return me!==""&&!hn(me)}):z=b$(V,z,j).reduce(function(me,X){return me.indexOf(X)>=0||X===""||hn(X)?me:[].concat(Fg(me),[X])},[]);else if(k==="number"){var Q=dSe(B,i.filter(function(me){var X,Re,Se=o in me.props?me.props[o]:(X=me.type.defaultProps)===null||X===void 0?void 0:X[o],Ee="hide"in me.props?me.props.hide:(Re=me.type.defaultProps)===null||Re===void 0?void 0:Re.hide;return Se===U&&($||!Ee)}),C,s,h);Q&&(z=Q)}x&&(k==="number"||E!=="auto")&&(K=Pv(B,C,"category"))}else x?z=wN(0,R):l&&l[U]&&l[U].hasStack&&k==="number"?z=m==="expand"?[0,1]:GV(l[U].stackGroups,c,u):z=BV(B,i.filter(function(me){var X=o in me.props?me.props[o]:me.type.defaultProps[o],Re="hide"in me.props?me.props.hide:me.type.defaultProps.hide;return X===U&&($||!Re)}),k,h,!0);if(k==="number")z=TD(p,z,U,s,I),V&&(z=VE(V,z,A));else if(k==="category"&&V){var L=V,te=z.every(function(me){return L.indexOf(me)>=0});te&&(z=L)}}return lt(lt({},b),{},an({},U,lt(lt({},_),{},{axisType:s,domain:z,categoricalDomain:K,duplicateDomain:G,originalDomain:(w=_.domain)!==null&&w!==void 0?w:Y,isCategorical:x,layout:h})))},{})},WEe=function(e,n){var a=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,h=e.layout,p=e.children,m=VS(e.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:u}),x=m.length,b=zV(h,s),j=-1;return a.reduce(function(w,_){var k=_.type.defaultProps!==void 0?lt(lt({},_.type.defaultProps),_.props):_.props,C=k[o],A=sG("number");if(!w[C]){j++;var T;return b?T=wN(0,x):l&&l[C]&&l[C].hasStack?(T=GV(l[C].stackGroups,c,u),T=TD(p,T,C,s)):(T=VE(A,BV(m,a.filter(function(E){var I,$,U=o in E.props?E.props[o]:(I=E.type.defaultProps)===null||I===void 0?void 0:I[o],B="hide"in E.props?E.props.hide:($=E.type.defaultProps)===null||$===void 0?void 0:$.hide;return U===C&&!B}),"number",h),i.defaultProps.allowDataOverflow),T=TD(p,T,C,s)),lt(lt({},w),{},an({},C,lt(lt({axisType:s},i.defaultProps),{},{hide:!0,orientation:Fs(qEe,"".concat(s,".").concat(j%2),null),domain:T,originalDomain:A,isCategorical:b,layout:h})))}return w},{})},KEe=function(e,n){var a=n.axisType,i=a===void 0?"xAxis":a,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,h=e.children,p="".concat(i,"Id"),m=$s(h,s),x={};return m&&m.length?x=GEe(e,{axes:m,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(x=WEe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),x},YEe=function(e){var n=Zu(e),a=Dc(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:iM(a,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:uN(n,a)}},NB=function(e){var n=e.children,a=e.defaultShowTooltip,i=Es(n,kg),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},QEe=function(e){return!e||!e.length?!1:e.some(function(n){var a=Ic(n&&n.type);return a&&a.indexOf("Bar")>=0})},SB=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},XEe=function(e,n){var a=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=a.width,h=a.height,p=a.children,m=a.margin||{},x=Es(p,kg),b=Es(p,Rc),j=Object.keys(c).reduce(function(T,E){var I=c[E],$=I.orientation;return!I.mirror&&!I.hide?lt(lt({},T),{},an({},$,T[$]+I.width)):T},{left:m.left||0,right:m.right||0}),w=Object.keys(o).reduce(function(T,E){var I=o[E],$=I.orientation;return!I.mirror&&!I.hide?lt(lt({},T),{},an({},$,Fs(T,"".concat($))+I.height)):T},{top:m.top||0,bottom:m.bottom||0}),_=lt(lt({},w),j),k=_.bottom;x&&(_.bottom+=x.props.height||kg.defaultProps.height),b&&n&&(_=cSe(_,i,a,n));var C=u-_.left-_.right,A=h-_.top-_.bottom;return lt(lt({brushBottom:k},_),{},{width:Math.max(C,0),height:Math.max(A,0)})},JEe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},HS=function(e){var n=e.chartName,a=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,h=e.formatAxisMap,p=e.defaultProps,m=function(_,k){var C=k.graphicalItems,A=k.stackGroups,T=k.offset,E=k.updateId,I=k.dataStartIndex,$=k.dataEndIndex,U=_.barSize,B=_.layout,R=_.barGap,z=_.barCategoryGap,G=_.maxBarSize,K=SB(B),Y=K.numericAxisName,q=K.cateAxisName,V=QEe(C),H=[];return C.forEach(function(Q,L){var te=VS(_.data,{graphicalItems:[Q],dataStartIndex:I,dataEndIndex:$}),me=Q.type.defaultProps!==void 0?lt(lt({},Q.type.defaultProps),Q.props):Q.props,X=me.dataKey,Re=me.maxBarSize,Se=me["".concat(Y,"Id")],Ee=me["".concat(q,"Id")],Fe={},le=c.reduce(function(se,re){var oe=k["".concat(re.axisType,"Map")],je=me["".concat(re.axisType,"Id")];oe&&oe[je]||re.axisType==="zAxis"||Lf();var Oe=oe[je];return lt(lt({},se),{},an(an({},re.axisType,Oe),"".concat(re.axisType,"Ticks"),Dc(Oe)))},Fe),_e=le[q],Ve=le["".concat(q,"Ticks")],De=A&&A[Se]&&A[Se].hasStack&&bSe(Q,A[Se].stackGroups),ue=Ic(Q.type).indexOf("Bar")>=0,Ae=uN(_e,Ve),ce=[],be=V&&oSe({barSize:U,stackGroups:A,totalSize:JEe(le,q)});if(ue){var ke,Ce,ne=hn(Re)?G:Re,ye=(ke=(Ce=uN(_e,Ve,!0))!==null&&Ce!==void 0?Ce:ne)!==null&&ke!==void 0?ke:0;ce=lSe({barGap:R,barCategoryGap:z,bandSize:ye!==Ae?ye:Ae,sizeList:be[Ee],maxBarSize:ne}),ye!==Ae&&(ce=ce.map(function(se){return lt(lt({},se),{},{position:lt(lt({},se.position),{},{offset:se.position.offset-ye/2})})}))}var de=Q&&Q.type&&Q.type.getComposedData;de&&H.push({props:lt(lt({},de(lt(lt({},le),{},{displayedData:te,props:_,dataKey:X,item:Q,bandSize:Ae,barPosition:ce,offset:T,stackedData:De,layout:B,dataStartIndex:I,dataEndIndex:$}))),{},an(an(an({key:Q.key||"item-".concat(L)},Y,le[Y]),q,le[q]),"animationId",E)),childIndex:gxe(Q,_.children),item:Q})}),H},x=function(_,k){var C=_.props,A=_.dataStartIndex,T=_.dataEndIndex,E=_.updateId;if(!B5({props:C}))return null;var I=C.children,$=C.layout,U=C.stackOffset,B=C.data,R=C.reverseStackOrder,z=SB($),G=z.numericAxisName,K=z.cateAxisName,Y=$s(I,a),q=xSe(B,Y,"".concat(G,"Id"),"".concat(K,"Id"),U,R),V=c.reduce(function(me,X){var Re="".concat(X.axisType,"Map");return lt(lt({},me),{},an({},Re,KEe(C,lt(lt({},X),{},{graphicalItems:Y,stackGroups:X.axisType===G&&q,dataStartIndex:A,dataEndIndex:T}))))},{}),H=XEe(lt(lt({},V),{},{props:C,graphicalItems:Y}),k==null?void 0:k.legendBBox);Object.keys(V).forEach(function(me){V[me]=h(C,V[me],H,me.replace("Map",""),n)});var Q=V["".concat(K,"Map")],L=YEe(Q),te=m(C,lt(lt({},V),{},{dataStartIndex:A,dataEndIndex:T,updateId:E,graphicalItems:Y,stackGroups:q,offset:H}));return lt(lt({formattedGraphicalItems:te,graphicalItems:Y,offset:H,stackGroups:q},L),V)},b=function(w){function _(k){var C,A,T;return EEe(this,_),T=MEe(this,_,[k]),an(T,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),an(T,"accessibilityManager",new yEe),an(T,"handleLegendBBoxUpdate",function(E){if(E){var I=T.state,$=I.dataStartIndex,U=I.dataEndIndex,B=I.updateId;T.setState(lt({legendBBox:E},x({props:T.props,dataStartIndex:$,dataEndIndex:U,updateId:B},lt(lt({},T.state),{},{legendBBox:E}))))}}),an(T,"handleReceiveSyncEvent",function(E,I,$){if(T.props.syncId===E){if($===T.eventEmitterSymbol&&typeof T.props.syncMethod!="function")return;T.applySyncEvent(I)}}),an(T,"handleBrushChange",function(E){var I=E.startIndex,$=E.endIndex;if(I!==T.state.dataStartIndex||$!==T.state.dataEndIndex){var U=T.state.updateId;T.setState(function(){return lt({dataStartIndex:I,dataEndIndex:$},x({props:T.props,dataStartIndex:I,dataEndIndex:$,updateId:U},T.state))}),T.triggerSyncEvent({dataStartIndex:I,dataEndIndex:$})}}),an(T,"handleMouseEnter",function(E){var I=T.getMouseInfo(E);if(I){var $=lt(lt({},I),{},{isTooltipActive:!0});T.setState($),T.triggerSyncEvent($);var U=T.props.onMouseEnter;on(U)&&U($,E)}}),an(T,"triggeredAfterMouseMove",function(E){var I=T.getMouseInfo(E),$=I?lt(lt({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};T.setState($),T.triggerSyncEvent($);var U=T.props.onMouseMove;on(U)&&U($,E)}),an(T,"handleItemMouseEnter",function(E){T.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),an(T,"handleItemMouseLeave",function(){T.setState(function(){return{isTooltipActive:!1}})}),an(T,"handleMouseMove",function(E){E.persist(),T.throttleTriggeredAfterMouseMove(E)}),an(T,"handleMouseLeave",function(E){T.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};T.setState(I),T.triggerSyncEvent(I);var $=T.props.onMouseLeave;on($)&&$(I,E)}),an(T,"handleOuterEvent",function(E){var I=mxe(E),$=Fs(T.props,"".concat(I));if(I&&on($)){var U,B;/.*touch.*/i.test(I)?B=T.getMouseInfo(E.changedTouches[0]):B=T.getMouseInfo(E),$((U=B)!==null&&U!==void 0?U:{},E)}}),an(T,"handleClick",function(E){var I=T.getMouseInfo(E);if(I){var $=lt(lt({},I),{},{isTooltipActive:!0});T.setState($),T.triggerSyncEvent($);var U=T.props.onClick;on(U)&&U($,E)}}),an(T,"handleMouseDown",function(E){var I=T.props.onMouseDown;if(on(I)){var $=T.getMouseInfo(E);I($,E)}}),an(T,"handleMouseUp",function(E){var I=T.props.onMouseUp;if(on(I)){var $=T.getMouseInfo(E);I($,E)}}),an(T,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&T.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),an(T,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&T.handleMouseDown(E.changedTouches[0])}),an(T,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&T.handleMouseUp(E.changedTouches[0])}),an(T,"handleDoubleClick",function(E){var I=T.props.onDoubleClick;if(on(I)){var $=T.getMouseInfo(E);I($,E)}}),an(T,"handleContextMenu",function(E){var I=T.props.onContextMenu;if(on(I)){var $=T.getMouseInfo(E);I($,E)}}),an(T,"triggerSyncEvent",function(E){T.props.syncId!==void 0&&FA.emit($A,T.props.syncId,E,T.eventEmitterSymbol)}),an(T,"applySyncEvent",function(E){var I=T.props,$=I.layout,U=I.syncMethod,B=T.state.updateId,R=E.dataStartIndex,z=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)T.setState(lt({dataStartIndex:R,dataEndIndex:z},x({props:T.props,dataStartIndex:R,dataEndIndex:z,updateId:B},T.state)));else if(E.activeTooltipIndex!==void 0){var G=E.chartX,K=E.chartY,Y=E.activeTooltipIndex,q=T.state,V=q.offset,H=q.tooltipTicks;if(!V)return;if(typeof U=="function")Y=U(H,E);else if(U==="value"){Y=-1;for(var Q=0;Q<H.length;Q++)if(H[Q].value===E.activeLabel){Y=Q;break}}var L=lt(lt({},V),{},{x:V.left,y:V.top}),te=Math.min(G,L.x+L.width),me=Math.min(K,L.y+L.height),X=H[Y]&&H[Y].value,Re=ED(T.state,T.props.data,Y),Se=H[Y]?{x:$==="horizontal"?H[Y].coordinate:te,y:$==="horizontal"?me:H[Y].coordinate}:iG;T.setState(lt(lt({},E),{},{activeLabel:X,activeCoordinate:Se,activePayload:Re,activeTooltipIndex:Y}))}else T.setState(E)}),an(T,"renderCursor",function(E){var I,$=T.state,U=$.isTooltipActive,B=$.activeCoordinate,R=$.activePayload,z=$.offset,G=$.activeTooltipIndex,K=$.tooltipAxisBandSize,Y=T.getTooltipEventType(),q=(I=E.props.active)!==null&&I!==void 0?I:U,V=T.props.layout,H=E.key||"_recharts-cursor";return Te.createElement(SEe,{key:H,activeCoordinate:B,activePayload:R,activeTooltipIndex:G,chartName:n,element:E,isActive:q,layout:V,offset:z,tooltipAxisBandSize:K,tooltipEventType:Y})}),an(T,"renderPolarAxis",function(E,I,$){var U=Fs(E,"type.axisType"),B=Fs(T.state,"".concat(U,"Map")),R=E.type.defaultProps,z=R!==void 0?lt(lt({},R),E.props):E.props,G=B&&B[z["".concat(U,"Id")]];return v.cloneElement(E,lt(lt({},G),{},{className:mn(U,G.className),key:E.key||"".concat(I,"-").concat($),ticks:Dc(G,!0)}))}),an(T,"renderPolarGrid",function(E){var I=E.props,$=I.radialLines,U=I.polarAngles,B=I.polarRadius,R=T.state,z=R.radiusAxisMap,G=R.angleAxisMap,K=Zu(z),Y=Zu(G),q=Y.cx,V=Y.cy,H=Y.innerRadius,Q=Y.outerRadius;return v.cloneElement(E,{polarAngles:Array.isArray(U)?U:Dc(Y,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(B)?B:Dc(K,!0).map(function(L){return L.coordinate}),cx:q,cy:V,innerRadius:H,outerRadius:Q,key:E.key||"polar-grid",radialLines:$})}),an(T,"renderLegend",function(){var E=T.state.formattedGraphicalItems,I=T.props,$=I.children,U=I.width,B=I.height,R=T.props.margin||{},z=U-(R.left||0)-(R.right||0),G=FV({children:$,formattedGraphicalItems:E,legendWidth:z,legendContent:u});if(!G)return null;var K=G.item,Y=bB(G,_Ee);return v.cloneElement(K,lt(lt({},Y),{},{chartWidth:U,chartHeight:B,margin:R,onBBoxUpdate:T.handleLegendBBoxUpdate}))}),an(T,"renderTooltip",function(){var E,I=T.props,$=I.children,U=I.accessibilityLayer,B=Es($,Ri);if(!B)return null;var R=T.state,z=R.isTooltipActive,G=R.activeCoordinate,K=R.activePayload,Y=R.activeLabel,q=R.offset,V=(E=B.props.active)!==null&&E!==void 0?E:z;return v.cloneElement(B,{viewBox:lt(lt({},q),{},{x:q.left,y:q.top}),active:V,label:Y,payload:V?K:[],coordinate:G,accessibilityLayer:U})}),an(T,"renderBrush",function(E){var I=T.props,$=I.margin,U=I.data,B=T.state,R=B.offset,z=B.dataStartIndex,G=B.dataEndIndex,K=B.updateId;return v.cloneElement(E,{key:E.key||"_recharts-brush",onChange:U1(T.handleBrushChange,E.props.onChange),data:U,x:Nt(E.props.x)?E.props.x:R.left,y:Nt(E.props.y)?E.props.y:R.top+R.height+R.brushBottom-($.bottom||0),width:Nt(E.props.width)?E.props.width:R.width,startIndex:z,endIndex:G,updateId:"brush-".concat(K)})}),an(T,"renderReferenceElement",function(E,I,$){if(!E)return null;var U=T,B=U.clipPathId,R=T.state,z=R.xAxisMap,G=R.yAxisMap,K=R.offset,Y=E.type.defaultProps||{},q=E.props,V=q.xAxisId,H=V===void 0?Y.xAxisId:V,Q=q.yAxisId,L=Q===void 0?Y.yAxisId:Q;return v.cloneElement(E,{key:E.key||"".concat(I,"-").concat($),xAxis:z[H],yAxis:G[L],viewBox:{x:K.left,y:K.top,width:K.width,height:K.height},clipPathId:B})}),an(T,"renderActivePoints",function(E){var I=E.item,$=E.activePoint,U=E.basePoint,B=E.childIndex,R=E.isRange,z=[],G=I.props.key,K=I.item.type.defaultProps!==void 0?lt(lt({},I.item.type.defaultProps),I.item.props):I.item.props,Y=K.activeDot,q=K.dataKey,V=lt(lt({index:B,dataKey:q,cx:$.x,cy:$.y,r:4,fill:EM(I.item),strokeWidth:2,stroke:"#fff",payload:$.payload,value:$.value},Ut(Y,!1)),$w(Y));return z.push(_.renderActiveDot(Y,V,"".concat(G,"-activePoint-").concat(B))),U?z.push(_.renderActiveDot(Y,lt(lt({},V),{},{cx:U.x,cy:U.y}),"".concat(G,"-basePoint-").concat(B))):R&&z.push(null),z}),an(T,"renderGraphicChild",function(E,I,$){var U=T.filterFormatItem(E,I,$);if(!U)return null;var B=T.getTooltipEventType(),R=T.state,z=R.isTooltipActive,G=R.tooltipAxis,K=R.activeTooltipIndex,Y=R.activeLabel,q=T.props.children,V=Es(q,Ri),H=U.props,Q=H.points,L=H.isRange,te=H.baseLine,me=U.item.type.defaultProps!==void 0?lt(lt({},U.item.type.defaultProps),U.item.props):U.item.props,X=me.activeDot,Re=me.hide,Se=me.activeBar,Ee=me.activeShape,Fe=!!(!Re&&z&&V&&(X||Se||Ee)),le={};B!=="axis"&&V&&V.props.trigger==="click"?le={onClick:U1(T.handleItemMouseEnter,E.props.onClick)}:B!=="axis"&&(le={onMouseLeave:U1(T.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:U1(T.handleItemMouseEnter,E.props.onMouseEnter)});var _e=v.cloneElement(E,lt(lt({},U.props),le));function Ve(re){return typeof G.dataKey=="function"?G.dataKey(re.payload):null}if(Fe)if(K>=0){var De,ue;if(G.dataKey&&!G.allowDuplicatedCategory){var Ae=typeof G.dataKey=="function"?Ve:"payload.".concat(G.dataKey.toString());De=Fw(Q,Ae,Y),ue=L&&te&&Fw(te,Ae,Y)}else De=Q==null?void 0:Q[K],ue=L&&te&&te[K];if(Ee||Se){var ce=E.props.activeIndex!==void 0?E.props.activeIndex:K;return[v.cloneElement(E,lt(lt(lt({},U.props),le),{},{activeIndex:ce})),null,null]}if(!hn(De))return[_e].concat(Fg(T.renderActivePoints({item:U,activePoint:De,basePoint:ue,childIndex:K,isRange:L})))}else{var be,ke=(be=T.getItemByXY(T.state.activeCoordinate))!==null&&be!==void 0?be:{graphicalItem:_e},Ce=ke.graphicalItem,ne=Ce.item,ye=ne===void 0?E:ne,de=Ce.childIndex,se=lt(lt(lt({},U.props),le),{},{activeIndex:de});return[v.cloneElement(ye,se),null,null]}return L?[_e,null,null]:[_e,null]}),an(T,"renderCustomized",function(E,I,$){return v.cloneElement(E,lt(lt({key:"recharts-customized-".concat($)},T.props),T.state))}),an(T,"renderMap",{CartesianGrid:{handler:K1,once:!0},ReferenceArea:{handler:T.renderReferenceElement},ReferenceLine:{handler:K1},ReferenceDot:{handler:T.renderReferenceElement},XAxis:{handler:K1},YAxis:{handler:K1},Brush:{handler:T.renderBrush,once:!0},Bar:{handler:T.renderGraphicChild},Line:{handler:T.renderGraphicChild},Area:{handler:T.renderGraphicChild},Radar:{handler:T.renderGraphicChild},RadialBar:{handler:T.renderGraphicChild},Scatter:{handler:T.renderGraphicChild},Pie:{handler:T.renderGraphicChild},Funnel:{handler:T.renderGraphicChild},Tooltip:{handler:T.renderCursor,once:!0},PolarGrid:{handler:T.renderPolarGrid,once:!0},PolarAngleAxis:{handler:T.renderPolarAxis},PolarRadiusAxis:{handler:T.renderPolarAxis},Customized:{handler:T.renderCustomized}}),T.clipPathId="".concat((C=k.id)!==null&&C!==void 0?C:Uf("recharts"),"-clip"),T.throttleTriggeredAfterMouseMove=L7(T.triggeredAfterMouseMove,(A=k.throttleDelay)!==null&&A!==void 0?A:1e3/60),T.state={},T}return LEe(_,w),OEe(_,[{key:"componentDidMount",value:function(){var C,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,A=C.children,T=C.data,E=C.height,I=C.layout,$=Es(A,Ri);if($){var U=$.props.defaultIndex;if(!(typeof U!="number"||U<0||U>this.state.tooltipTicks.length-1)){var B=this.state.tooltipTicks[U]&&this.state.tooltipTicks[U].value,R=ED(this.state,T,U,B),z=this.state.tooltipTicks[U].coordinate,G=(this.state.offset.top+E)/2,K=I==="horizontal",Y=K?{x:z,y:G}:{y:z,x:G},q=this.state.formattedGraphicalItems.find(function(H){var Q=H.item;return Q.type.name==="Scatter"});q&&(Y=lt(lt({},Y),q.props.points[U].tooltipPosition),R=q.props.points[U].tooltipPayload);var V={activeTooltipIndex:U,isTooltipActive:!0,activeLabel:B,activePayload:R,activeCoordinate:Y};this.setState(V),this.renderCursor($),this.accessibilityManager.setIndex(U)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var T,E;this.accessibilityManager.setDetails({offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(C){hE([Es(C.children,Ri)],[Es(this.props.children,Ri)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Es(this.props.children,Ri);if(C&&typeof C.props.shared=="boolean"){var A=C.props.shared?"axis":"item";return l.indexOf(A)>=0?A:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var A=this.container,T=A.getBoundingClientRect(),E=J0e(T),I={chartX:Math.round(C.pageX-E.left),chartY:Math.round(C.pageY-E.top)},$=T.width/A.offsetWidth||1,U=this.inRange(I.chartX,I.chartY,$);if(!U)return null;var B=this.state,R=B.xAxisMap,z=B.yAxisMap,G=this.getTooltipEventType(),K=wB(this.state,this.props.data,this.props.layout,U);if(G!=="axis"&&R&&z){var Y=Zu(R).scale,q=Zu(z).scale,V=Y&&Y.invert?Y.invert(I.chartX):null,H=q&&q.invert?q.invert(I.chartY):null;return lt(lt({},I),{},{xValue:V,yValue:H},K)}return K?lt(lt({},I),K):null}},{key:"inRange",value:function(C,A){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,I=C/T,$=A/T;if(E==="horizontal"||E==="vertical"){var U=this.state.offset,B=I>=U.left&&I<=U.left+U.width&&$>=U.top&&$<=U.top+U.height;return B?{x:I,y:$}:null}var R=this.state,z=R.angleAxisMap,G=R.radiusAxisMap;if(z&&G){var K=Zu(z);return N$({x:I,y:$},K)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,A=this.getTooltipEventType(),T=Es(C,Ri),E={};T&&A==="axis"&&(T.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=$w(this.props,this.handleOuterEvent);return lt(lt({},I),E)}},{key:"addListener",value:function(){FA.on($A,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){FA.removeListener($A,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,A,T){for(var E=this.state.formattedGraphicalItems,I=0,$=E.length;I<$;I++){var U=E[I];if(U.item===C||U.props.key===C.key||A===Ic(U.item.type)&&T===U.childIndex)return U}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,A=this.state.offset,T=A.left,E=A.top,I=A.height,$=A.width;return Te.createElement("defs",null,Te.createElement("clipPath",{id:C},Te.createElement("rect",{x:T,y:E,height:I,width:$})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(A,T){var E=vB(T,2),I=E[0],$=E[1];return lt(lt({},A),{},an({},I,$.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(A,T){var E=vB(T,2),I=E[0],$=E[1];return lt(lt({},A),{},an({},I,$.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(C){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(C){var A=this.state,T=A.formattedGraphicalItems,E=A.activeItem;if(T&&T.length)for(var I=0,$=T.length;I<$;I++){var U=T[I],B=U.props,R=U.item,z=R.type.defaultProps!==void 0?lt(lt({},R.type.defaultProps),R.props):R.props,G=Ic(R.type);if(G==="Bar"){var K=(B.data||[]).find(function(H){return m2e(C,H)});if(K)return{graphicalItem:U,payload:K}}else if(G==="RadialBar"){var Y=(B.data||[]).find(function(H){return N$(C,H)});if(Y)return{graphicalItem:U,payload:Y}}else if(LS(U,E)||FS(U,E)||vb(U,E)){var q=$ke({graphicalItem:U,activeTooltipItem:E,itemData:z.data}),V=z.activeIndex===void 0?q:z.activeIndex;return{graphicalItem:lt(lt({},U),{},{childIndex:V}),payload:vb(U,E)?z.data[q]:U.props.data[q]}}}return null}},{key:"render",value:function(){var C=this;if(!B5(this))return null;var A=this.props,T=A.children,E=A.className,I=A.width,$=A.height,U=A.style,B=A.compact,R=A.title,z=A.desc,G=bB(A,CEe),K=Ut(G,!1);if(B)return Te.createElement(J8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Te.createElement(pE,Bm({},K,{width:I,height:$,title:R,desc:z}),this.renderClipPath(),q5(T,this.renderMap)));if(this.props.accessibilityLayer){var Y,q;K.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,K.role=(q=this.props.role)!==null&&q!==void 0?q:"application",K.onKeyDown=function(H){C.accessibilityManager.keyboardEvent(H)},K.onFocus=function(){C.accessibilityManager.focus()}}var V=this.parseEventsOfWrapper();return Te.createElement(J8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Te.createElement("div",Bm({className:mn("recharts-wrapper",E),style:lt({position:"relative",cursor:"default",width:I,height:$},U)},V,{ref:function(Q){C.container=Q}}),Te.createElement(pE,Bm({},K,{width:I,height:$,title:R,desc:z,style:UEe}),this.renderClipPath(),q5(T,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);an(b,"displayName",n),an(b,"defaultProps",lt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),an(b,"getDerivedStateFromProps",function(w,_){var k=w.dataKey,C=w.data,A=w.children,T=w.width,E=w.height,I=w.layout,$=w.stackOffset,U=w.margin,B=_.dataStartIndex,R=_.dataEndIndex;if(_.updateId===void 0){var z=NB(w);return lt(lt(lt({},z),{},{updateId:0},x(lt(lt({props:w},z),{},{updateId:0}),_)),{},{prevDataKey:k,prevData:C,prevWidth:T,prevHeight:E,prevLayout:I,prevStackOffset:$,prevMargin:U,prevChildren:A})}if(k!==_.prevDataKey||C!==_.prevData||T!==_.prevWidth||E!==_.prevHeight||I!==_.prevLayout||$!==_.prevStackOffset||!Hm(U,_.prevMargin)){var G=NB(w),K={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},Y=lt(lt({},wB(_,C,I)),{},{updateId:_.updateId+1}),q=lt(lt(lt({},G),K),Y);return lt(lt(lt({},q),x(lt({props:w},q),_)),{},{prevDataKey:k,prevData:C,prevWidth:T,prevHeight:E,prevLayout:I,prevStackOffset:$,prevMargin:U,prevChildren:A})}if(!hE(A,_.prevChildren)){var V,H,Q,L,te=Es(A,kg),me=te&&(V=(H=te.props)===null||H===void 0?void 0:H.startIndex)!==null&&V!==void 0?V:B,X=te&&(Q=(L=te.props)===null||L===void 0?void 0:L.endIndex)!==null&&Q!==void 0?Q:R,Re=me!==B||X!==R,Se=!hn(C),Ee=Se&&!Re?_.updateId:_.updateId+1;return lt(lt({updateId:Ee},x(lt(lt({props:w},_),{},{updateId:Ee,dataStartIndex:me,dataEndIndex:X}),_)),{},{prevChildren:A,dataStartIndex:me,dataEndIndex:X})}return null}),an(b,"renderActiveDot",function(w,_,k){var C;return v.isValidElement(w)?C=v.cloneElement(w,_):on(w)?C=w(_):C=Te.createElement(Zb,_),Te.createElement(Rn,{className:"recharts-active-dot",key:k},C)});var j=v.forwardRef(function(_,k){return Te.createElement(b,Bm({},_,{ref:k}))});return j.displayName=b.displayName,j},ZEe=HS({chartName:"LineChart",GraphicalChild:e0,axisComponents:[{axisType:"xAxis",AxisComp:Gc},{axisType:"yAxis",AxisComp:Wc}],formatAxisMap:OM}),oG=HS({chartName:"BarChart",GraphicalChild:Ed,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Gc},{axisType:"yAxis",AxisComp:Wc}],formatAxisMap:OM}),lG=HS({chartName:"PieChart",GraphicalChild:Kl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:RS},{axisType:"radiusAxis",AxisComp:MS}],formatAxisMap:PSe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),eDe=HS({chartName:"AreaChart",GraphicalChild:Dd,axisComponents:[{axisType:"xAxis",AxisComp:Gc},{axisType:"yAxis",AxisComp:Wc}],formatAxisMap:OM});const UM=({widget:t,className:e="",autoHideEmptyColumns:n=!1})=>{const a=Mt(),i=ps(),[s,o]=v.useState(null),[l,c]=v.useState(null),[u,h]=v.useState([]),[p,m]=v.useState(!1),[x,b]=v.useState(null),[j,w]=v.useState(""),[_,k]=v.useState(!1);v.useEffect(()=>{const I=async()=>{var $,U,B,R,z,G;m(!0),b(null);try{const K=t.dataSource,Y=(($=t.config)==null?void 0:$.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0;let q=[];if(Y&&(K.startsWith("api:")||K.startsWith("table:"))){const V=await ie("/api/dashboards/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:K,filters:t.config.filters})});if(V.ok){const H=await V.json();q=Array.isArray(H)?H:H.data||[],o(q)}else throw new Error("Failed to fetch filtered data")}else{let V="";const H={"api:patients":{url:"/api/patients?limit=50",dataKey:"patients"},"api:drugs":{url:"/api/drugs?limit=50",dataKey:"drugs"},"api:recurring-medications":{url:"/api/recurring-medications?limit=50"},"api:pharmacy-orders":{url:"/api/pharmacy/orders?limit=50",dataKey:"orders"},"api:lab-orders":{url:"/api/lab/orders?limit=50",dataKey:"orders"},"api:lab-tests":{url:"/api/lab/tests?limit=50",dataKey:"tests"},"api:queue":{url:"/api/queue?limit=50",dataKey:"queue"},"api:bills":{url:"/api/bills?limit=100",dataKey:"bills"}};if(H[K])V=H[K].url;else if(K.startsWith("join:"))V=`/api/dashboards/joined-data?join=${K.split(":")[1]}&limit=50`;else if(K.startsWith("dynamic:")){const L=K.split(":"),te=L[1],me=L[2],X=((B=(U=t.config)==null?void 0:U.primaryColumns)==null?void 0:B.join(","))||"",Re=((z=(R=t.config)==null?void 0:R.relatedColumns)==null?void 0:z.join(","))||"";V=`/api/dashboards/dynamic-join?primary=${te}&related=${me}&primaryCols=${X}&relatedCols=${Re}&limit=50`}else K.startsWith("table:")?V=`/api/custom-tables/${K.split(":")[1]}/records?limit=50`:V=`/api/${K.replace("api:","")}?limit=50`;const Q=await ie(V);if(Q.ok){const L=await Q.json();Array.isArray(L)?q=L:(G=H[K])!=null&&G.dataKey&&L[H[K].dataKey]?q=L[H[K].dataKey]:L.data?q=L.data:q=Object.values(L).find(me=>Array.isArray(me))||[],o(q)}else throw new Error(`Failed to fetch data from ${K}`)}if(t.type==="table"&&n&&q.length>0){const H=(t.config.columns||[...new Set(q.flatMap(Q=>Object.keys(Q)))]).filter(Q=>q.some(L=>{const te=L[Q];return te!=null&&te!==""&&(Array.isArray(te)?te.length>0:!0)}));h(H)}else h(t.config.columns||[])}catch(K){b(K.message)}finally{m(!1)}};t.dataSource&&I()},[t.dataSource,t.config]),v.useEffect(()=>{var R,z;if(!s||!Array.isArray(s)){c(s);return}let I=[...s];const $=t.dataSource,B=((R=t.config)==null?void 0:R.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0&&($.startsWith("api:")||$.startsWith("table:"));if((z=t.config)!=null&&z.filters&&Array.isArray(t.config.filters)&&!B&&(I=I.filter(G=>t.config.filters.every(K=>{const Y=G[K.field],q=K.value;switch(K.operator){case"equals":return Y==q;case"neq":return Y!=q;case"contains":return String(Y).toLowerCase().includes(String(q).toLowerCase());case"gt":return Y>q;case"lt":return Y<q;case"gte":return Y>=q;case"lte":return Y<=q;default:return!0}}))),j){const G=j.toLowerCase();I=I.filter(K=>Object.values(K).some(Y=>String(Y).toLowerCase().includes(G)))}c(I)},[s,t.config,j]);const C=I=>{I&&(i.prefetchQuery({queryKey:Kt.patients.context(I),queryFn:async()=>{const $=await ie(`/api/patients/${I}/context`);if(!$.ok)throw new Error("Failed to fetch patient context");return $.json()},staleTime:1e3*60*5}),i.prefetchQuery({queryKey:Kt.patientDebts.balance(I),queryFn:async()=>{const $=await ie(`/api/patient-debts/${I}/balance`);if(!$.ok)throw new Error("Failed to fetch patient debt");return $.json()},staleTime:1e3*60}),i.prefetchQuery({queryKey:Kt.queue.latest(I),queryFn:async()=>{const $=await ie(`/api/queue/patient/${I}/latest`);if(!$.ok){if($.status===404)return null;throw new Error("Failed to fetch queue status")}return $.json()},staleTime:1e3*5}))},A=v.useMemo(()=>FO(I=>C(I),500),[]);v.useEffect(()=>()=>{A.cancel()},[A]);const T=()=>{var $,U,B;if(p)return r.jsxs("div",{className:"widget-loading",children:[r.jsx(uJ,{className:"spin"})," Loading..."]});if(x)return r.jsxs("div",{className:"widget-error",children:["Error: ",x]});const I=l||[];if(t.type==="stat"){const R=Array.isArray(I)?I.length:0;return r.jsxs("div",{className:"widget-stat",children:[r.jsx("div",{className:"stat-value",children:R}),r.jsx("div",{className:"stat-label",children:(($=t.config)==null?void 0:$.label)||"Total Records"})]})}if(t.type==="chart"){if(!Array.isArray(I)||I.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const{chartType:R="bar",xAxisKey:z="name",dataKey:G="value"}=t.config,K=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return r.jsx("div",{style:{width:"100%",height:350,minHeight:200},children:r.jsx(fw,{width:"100%",height:"100%",children:R==="line"?r.jsxs(ZEe,{data:I,children:[r.jsx(Sb,{strokeDasharray:"3 3"}),r.jsx(Gc,{dataKey:z}),r.jsx(Wc,{}),r.jsx(Ri,{}),r.jsx(Rc,{}),r.jsx(e0,{type:"monotone",dataKey:G,stroke:"#8884d8",activeDot:{r:8}})]}):R==="pie"?r.jsxs(lG,{children:[r.jsx(Kl,{data:I,cx:"50%",cy:"50%",labelLine:!1,label:({name:Y,percent:q})=>`${Y} ${(q*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:G,nameKey:z,children:I.map((Y,q)=>r.jsx(Wb,{fill:K[q%K.length]},`cell-${q}`))}),r.jsx(Ri,{})]}):r.jsxs(oG,{data:I,children:[r.jsx(Sb,{strokeDasharray:"3 3"}),r.jsx(Gc,{dataKey:z}),r.jsx(Wc,{}),r.jsx(Ri,{}),r.jsx(Rc,{}),r.jsx(Ed,{dataKey:G,fill:"#82ca9d"})]})})})}if(t.type==="table"){if(!Array.isArray(I)||I.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const z=(u.length>0?u:((U=t.config)==null?void 0:U.columns)||(I[0]?Object.keys(I[0]).slice(0,5):[])).map(q=>({key:q,label:q.replace(/_/g," ").replace(/\b\w/g,V=>V.toUpperCase()),editable:!1})),G=async q=>{try{const V=t.dataSource;if(V.startsWith("table:")){const H=V.split(":")[1];for(const Q of q)Q.id&&await ie(`/api/custom-tables/${H}/records/${Q.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Q})})}else alert("Changes saved locally. Built-in table edits require specific API integration.")}catch(V){console.error("Error saving data:",V),alert("Failed to save changes")}};if(I.length<=10){const q=((B=t.config)==null?void 0:B.columns)||Object.keys(I[0]).filter(H=>!H.startsWith("_")&&H!=="id"),V=H=>{const Q=H.patient_id||H.patientId;Q&&a(`/dashboard/edit-complaint/patient/${Q}`)};return r.jsx("div",{className:"widget-detail-cards",children:I.map((H,Q)=>{const L=H.patient_id||H.patientId,te=!!L;return r.jsxs("div",{className:`detail-card ${te?"clickable":""}`,onClick:te?()=>V(H):void 0,onMouseEnter:()=>te&&A(L),style:te?{cursor:"pointer"}:void 0,children:[r.jsxs("div",{className:"detail-card-header",children:[r.jsx("span",{className:"detail-card-title",children:H.name||H.patient_name||H.title||H.brand_name||`Record ${Q+1}`}),H.token&&r.jsxs("span",{className:"detail-card-badge",children:["Token #",H.token]}),H.status&&r.jsx("span",{className:`detail-card-status status-${H.status.toLowerCase()}`,children:H.status})]}),r.jsx("div",{className:"detail-card-fields",children:q.map(me=>{const X=H[me];if(X==null||X===""||me==="name"||me==="title")return null;const Re=me.replace(/_/g," ").replace(/\b\w/g,Ee=>Ee.toUpperCase()),Se=typeof X=="object"?JSON.stringify(X):String(X);return r.jsxs("div",{className:"detail-field",children:[r.jsx("span",{className:"detail-field-label",children:Re}),r.jsx("span",{className:"detail-field-value",children:Se})]},me)})})]},H.id||Q)})})}const K=q=>{const V=q.patient_id||q.patientId;V&&a(`/dashboard/edit-complaint/patient/${V}`)},Y=q=>{const V=q.patient_id||q.patientId;V&&A(V)};return r.jsxs("div",{className:"widget-table-container",children:[r.jsxs("div",{className:"widget-table-search",children:[r.jsx(fn,{size:14}),r.jsx("input",{type:"text",placeholder:"Search...",value:j,onChange:q=>w(q.target.value)})]}),r.jsx(Hb,{columns:z,data:I,editable:!0,showRowNumbers:!0,title:"",onSave:G,onRowClick:K,onRowHover:Y})]})}return r.jsx("div",{children:"Unsupported widget type"})},E=r.jsxs("div",{className:`dashboard-widget ${e}`,children:[r.jsxs("div",{className:"widget-header",children:[r.jsx("h3",{children:t.title}),r.jsx("button",{className:"widget-expand-btn",onClick:()=>k(!0),title:"Expand",children:r.jsx(dq,{size:14})})]}),r.jsx("div",{className:"widget-content",children:T()})]});return r.jsxs(r.Fragment,{children:[E,_&&r.jsx("div",{className:"widget-modal-overlay",onClick:()=>k(!1),children:r.jsxs("div",{className:"widget-modal-content",onClick:I=>I.stopPropagation(),children:[r.jsxs("div",{className:"widget-modal-header",children:[r.jsx("h2",{children:t.title}),r.jsx("button",{onClick:()=>k(!1),className:"widget-modal-close",children:r.jsx(Ot,{size:20})})]}),r.jsx("div",{className:"widget-modal-body",children:T()})]})})]})},tDe=({isOpen:t,onClose:e,title:n,widgets:a,onSave:i})=>{const[s,o]=v.useState(!1),[l,c]=v.useState(n),[u,h]=v.useState(""),[p,m]=v.useState(!1);if(!t)return null;const x=async()=>{if(!(!i||!l.trim())){m(!0);try{await i(l,u),o(!1),e()}catch(b){console.error("Failed to save dashboard:",b),alert("Failed to save dashboard")}finally{m(!1)}}};return r.jsx("div",{className:"temp-dash-overlay",onClick:e,children:r.jsxs("div",{className:"temp-dash-modal",onClick:b=>b.stopPropagation(),children:[r.jsxs("div",{className:"temp-dash-header",children:[r.jsxs("div",{className:"temp-dash-title-group",children:[r.jsx("div",{className:"temp-dash-icon",children:r.jsx(og,{size:16})}),r.jsxs("div",{className:"temp-dash-title-text",children:[r.jsx("h2",{children:n}),r.jsxs("span",{className:"temp-dash-ai-badge",children:[r.jsx(ww,{size:8})," AI Generated"]})]})]}),r.jsxs("div",{className:"temp-dash-actions",children:[i&&!s&&r.jsxs("button",{onClick:()=>o(!0),className:"temp-dash-save-btn",children:[r.jsx(qi,{size:12})," Save"]}),r.jsx("button",{onClick:e,className:"temp-dash-close-btn",children:r.jsx(Ot,{size:16})})]})]}),s&&r.jsxs("div",{className:"temp-dash-save-form",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:l,onChange:b=>c(b.target.value),autoFocus:!0}),r.jsx("input",{type:"text",placeholder:"Description (optional)",value:u,onChange:b=>h(b.target.value)}),r.jsxs("div",{className:"temp-dash-save-actions",children:[r.jsx("button",{onClick:()=>o(!1),className:"temp-dash-cancel-btn",children:"Cancel"}),r.jsx("button",{onClick:x,className:"temp-dash-confirm-btn",disabled:p||!l.trim(),children:p?"Saving...":"Confirm"})]})]}),r.jsx("div",{className:"temp-dash-body",children:a.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets to display."}):r.jsx("div",{className:"temp-dash-grid",children:a.map((b,j)=>r.jsx(UM,{widget:b,isEditing:!1,autoHideEmptyColumns:!0},b.id||`widget-${j}`))})})]})})},_B=()=>UN(()=>import("./EditComplaintPage-ClwQgdUk.js"),__vite__mapDeps([0,1])),nDe=()=>UN(()=>import("./AddPatientPage-u-NKOyVF.js"),__vite__mapDeps([2,3])),Y1=[{name:"Dashboard",path:"/dashboard",icon:r.jsx(og,{size:16}),keywords:["home","main","analytics","stats"],roles:["all"]},{name:"Clinic Hub",path:"/dashboard/clinic-hub",icon:r.jsx(El,{size:16}),keywords:["central","hub","overview"],roles:["admin","superadmin"]},{name:"Analysis Dashboard",path:"/dashboard/analysis",icon:r.jsx(El,{size:16}),keywords:["reports","stats","finance","money"],roles:["admin","superadmin"]},{name:"Live AI Assistant",path:"/live-api",icon:r.jsx(Cf,{size:16}),keywords:["ai","chat","voice","assistant"],roles:["all"]},{name:"Clinic Subscriptions",path:"/dashboard/clinic-subscriptions",icon:r.jsx(El,{size:16}),keywords:["plans","billing","tenants"],roles:["superadmin"]},{name:"User Management",path:"/dashboard/users",icon:r.jsx(zi,{size:16}),keywords:["admins","clinics","accounts"],roles:["superadmin"]},{name:"Patient Search",path:"/dashboard/search-patient",icon:r.jsx(fn,{size:16}),keywords:["find","lookup","patient"],roles:["all"]},{name:"All Patients",path:"/dashboard/all-patients",icon:r.jsx(zi,{size:16}),keywords:["list","records","database"],roles:["admin","receptionist","doctor"]},{name:"Add New Patient",path:"/dashboard/add-patient",icon:r.jsx(vf,{size:16}),keywords:["register","new","create","onboard"],roles:["admin","receptionist","doctor"]},{name:"Admissions",path:"/manage-admission",icon:r.jsx(iX,{size:16}),keywords:["ipd","admit","discharge","rooms"],roles:["admin","doctor","receptionist"]},{name:"Appointment Queue",path:"/dashboard/reception",icon:r.jsx(zi,{size:16}),keywords:["queue","reception","waiting","appointments"],roles:["admin","receptionist","superadmin"]},{name:"Doctor Queue",path:"/dashboard/queue",icon:r.jsx(El,{size:16}),keywords:["waiting","patients","consultation"],roles:["admin","doctor","superadmin"]},{name:"Pharmacy Inventory",path:"/dashboard/inventory",icon:r.jsx(oo,{size:16}),keywords:["drugs","medicine","stock","pharmacy"],roles:["admin","pharmacy"]},{name:"Pharmacy Queue",path:"/dashboard/pharmacy-queue",icon:r.jsx(oo,{size:16}),keywords:["orders","billing","dispense"],roles:["admin","pharmacy","superadmin"]},{name:"Add New Drug",path:"/dashboard/inventory/add",icon:r.jsx(oo,{size:16}),keywords:["create","medicine","stock"],roles:["admin","pharmacy"]},{name:"Add Pharmacy Order",path:"/dashboard/add-order",icon:r.jsx(MP,{size:16}),keywords:["sell","bill","dispense"],roles:["admin","pharmacy"]},{name:"Refill Reminders",path:"/refill-reminders",icon:r.jsx(qr,{size:16}),keywords:["recurring","sms","alert"],roles:["admin","pharmacy"]},{name:"Distributors",path:"/dashboard/distributors",icon:r.jsx(rO,{size:16}),keywords:["suppliers","vendors","stock"],roles:["admin","pharmacy"]},{name:"Purchase",path:"/dashboard/purchase",icon:r.jsx(MP,{size:16}),keywords:["buy","procurement","stock"],roles:["admin","pharmacy"]},{name:"Lab Panel",path:"/dashboard/lab",icon:r.jsx(hs,{size:16}),keywords:["billing","orders","queue"],roles:["admin","lab","superadmin"]},{name:"Create Lab Order",path:"/create-lab-order",icon:r.jsx(hs,{size:16}),keywords:["test","pathology","diagnostics"],roles:["admin","doctor","lab"]},{name:"Search Lab Reports",path:"/lab/search-report",icon:r.jsx(fn,{size:16}),keywords:["results","history","find"],roles:["admin","doctor","lab"]},{name:"Lab Inventory",path:"/lab-inventory",icon:r.jsx(hs,{size:16}),keywords:["reagents","tests","stock"],roles:["admin","lab"]},{name:"Dental",path:"/dashboard/dental",icon:r.jsx(El,{size:16}),keywords:["teeth","dentist","chart","odontogram"],roles:["admin","doctor","superadmin"]},{name:"Create Custom Bill",path:"/create-custom-bill",icon:r.jsx(Ar,{size:16}),keywords:["invoice","custom","charge"],roles:["admin","receptionist"]},{name:"Billing History",path:"/billing",icon:r.jsx(Sv,{size:16}),keywords:["transactions","payments","history"],roles:["admin","receptionist"]},{name:"Patient Debt Management",path:"/dashboard/patient-debt",icon:r.jsx(Sv,{size:16}),keywords:["debt","due","outstanding","balance"],roles:["admin","pharmacy","receptionist"]},{name:"Custom Tables",path:"/custom-tables",icon:r.jsx(Ar,{size:16}),keywords:["database","sheets","custom data"],roles:["admin","superadmin"]},{name:"Custom Dashboards",path:"/dashboards",icon:r.jsx(og,{size:16}),keywords:["charts","reports","analytics"],roles:["admin","doctor","superadmin"]},{name:"Staff Management",path:"/dashboard/staff",icon:r.jsx(lg,{size:16}),keywords:["users","employees","roles","admin"],roles:["admin","superadmin"]},{name:"Role Management",path:"/dashboard/roles",icon:r.jsx(lg,{size:16}),keywords:["roles","permissions","access","custom roles"],roles:["admin","superadmin"]},{name:"Search Bills",path:"/search-bills",icon:r.jsx(Sv,{size:16}),keywords:["find","lookup","invoice","payment"],roles:["admin","receptionist"]},{name:"Clinic Files",path:"/dashboard/clinic-files",icon:r.jsx(Ar,{size:16}),keywords:["documents","reports","clinic data"],roles:["admin","receptionist"]},{name:"Medical Procedures",path:"/dashboard/medical",icon:r.jsx(El,{size:16}),keywords:["procedures","medical","treatments"],roles:["admin","doctor"]},{name:"Patient Files",path:"/dashboard/files",icon:r.jsx(Ar,{size:16}),keywords:["patient","documents","records"],roles:["admin","doctor","receptionist"]}],CB=[{icon:"",text:"Update Paracetamol stock to 100",roles:["admin","pharmacy"]},{icon:"",text:"Change CBC Test price to 350",roles:["admin","lab","superadmin"]},{icon:"",text:"Set Voice AI language to Hindi",roles:["all"]},{icon:"",text:"Show revenue for last month",roles:["admin","superadmin"]},{icon:"",text:"Purchase 50 strips of Aspirin",roles:["admin","pharmacy"]},{icon:"",text:"Update consultation fee to 500",roles:["admin","superadmin"]},{icon:"",text:"Add new staff member",roles:["admin","superadmin"]},{icon:"",text:"Register: John Doe, 25M, Fever",roles:["all"]},{icon:"",text:"Check Metformin availability",roles:["admin","pharmacy","doctor"]}],rDe=({user:t})=>{const{isOpen:e,closeCommandBar:n}=Bc(),a=Mt(),i=Ur(),s=v.useRef(null),[o,l]=v.useState(""),[c,u]=v.useState([]),[h,p]=v.useState([]),[m,x]=v.useState([]),[b,j]=v.useState(!1),[w,_]=v.useState(!0),[k,C]=v.useState(!0),{customColumnsConfig:A}=uS(),T=(A==null?void 0:A.patients)||[],[E,I]=v.useState(null),[$,U]=v.useState(!1),B=ps(),{chatHistory:R,isProcessing:z,handleSendMessage:G,setChatQuery:K,refreshChat:Y,selectedImage:q,handleImageSelect:V,clearImage:H,temporaryDashboard:Q,closeTemporaryDashboard:L,saveTemporaryDashboard:te}=CO({settings:{},staffList:[],enableDynamicContext:!1}),me=Ue=>{Ue&&(B.prefetchQuery({queryKey:Kt.patients.context(Ue),queryFn:async()=>{const jt=await ie(`/api/patients/${Ue}/context`);if(!jt.ok)throw new Error("Failed to fetch patient context");return jt.json()},staleTime:5*60*1e3}),B.prefetchQuery({queryKey:Kt.patientDebts.balance(Ue),queryFn:async()=>{const jt=await ie(`/api/patient-debts/${Ue}/balance`);return jt.ok?jt.json():{netDebt:0}},staleTime:1*60*1e3}),B.prefetchQuery({queryKey:Kt.queue.latest(Ue),queryFn:async()=>{const jt=await ie(`/api/queue/patient/${Ue}/latest`);if(!jt.ok)throw new Error("Failed to fetch latest queue status");const Tt=await jt.json();return Tt!=null&&Tt._id&&B.prefetchQuery({queryKey:Kt.queue.entry(Tt._id),queryFn:async()=>{const Qn=await ie(`/api/queue/doctor/complaint/${Tt._id}`);if(!Qn.ok)throw new Error("Failed to fetch complaint record");return Qn.json()},staleTime:1*60*1e3}),Tt},staleTime:5e3}),B.prefetchQuery({queryKey:Kt.dental.records(Ue),queryFn:async()=>{const jt=await ie(`/api/dental/patient/${Ue}`);if(!jt.ok)throw new Error("Failed to fetch dental records");return jt.json()},staleTime:5*60*1e3}))},X=v.useMemo(()=>t?Y1.filter(Ue=>Ue.roles.includes("all")||t.role&&Ue.roles.includes(t.role)):Y1,[t]),Re=v.useMemo(()=>t?CB.filter(Ue=>Ue.roles.includes("all")||t.role&&Ue.roles.includes(t.role)):CB,[t]),Se=v.useMemo(()=>new ho(X,{keys:["name","keywords"],threshold:.3}),[X]),[Ee,Fe]=v.useState(!1),[le,_e]=v.useState(!1),[Ve,De]=v.useState(!1);v.useEffect(()=>{if(e)Fe(!0),De(!1);else{De(!0);const Ue=setTimeout(()=>{Fe(!1),De(!1),Y()},200);return()=>clearTimeout(Ue)}},[e,Y]);const{setPageContext:ue}=GN();v.useEffect(()=>{if(e){const Ue=i.pathname,jt=Y1.find(Tt=>Tt.path===Ue)||Y1.find(Tt=>Ue.startsWith(Tt.path)&&Tt.path!=="/dashboard");ue(jt?{name:jt.name,path:Ue,data:{role:jt.roles}}:{name:"Current Page",path:Ue})}},[e,i.pathname,ue]);const Ae=v.useRef(null),ce=Ue=>{var Tt;const jt=(Tt=Ue.target.files)==null?void 0:Tt[0];jt&&V(jt)},[be,ke]=v.useState({x:0,y:0}),[Ce,ne]=v.useState(!1),ye=v.useRef({x:0,y:0}),de=v.useRef({x:0,y:0}),se=v.useRef(!1),re=v.useRef(null);v.useEffect(()=>{const Ue=Tt=>{if(!Ce)return;se.current=!0;const Qn=Tt.clientX-ye.current.x,vt=Tt.clientY-ye.current.y;let It=de.current.x+Qn,Gt=de.current.y+vt;if(re.current){const Xn=re.current.offsetWidth,jr=re.current.offsetHeight,Va=(window.innerWidth-Xn)/2,ta=(window.innerHeight-jr)/2,Sa=Math.max(0,Va),gn=Math.max(0,ta);It=Math.max(-Sa,Math.min(Sa,It)),Gt=Math.max(-gn,Math.min(gn,Gt))}ke({x:It,y:Gt})},jt=()=>{ne(!1)};return Ce&&(window.addEventListener("mousemove",Ue),window.addEventListener("mouseup",jt)),()=>{window.removeEventListener("mousemove",Ue),window.removeEventListener("mouseup",jt)}},[Ce]),v.useEffect(()=>{i.pathname==="/dashboard"&&(l(""),p([]),x([])),e&&(i.pathname==="/dashboard"?U(!1):U(!0))},[i.pathname]),v.useEffect(()=>{(h.length>0||m.length>0)&&$&&U(!1)},[h,m]),v.useEffect(()=>{if(e&&window.innerWidth<=768){window.history.pushState({commandBarOpen:!0},"");const Ue=jt=>{jt.preventDefault(),U(!0)};return window.addEventListener("popstate",Ue),()=>{window.removeEventListener("popstate",Ue)}}},[e]),v.useEffect(()=>{$||ke({x:0,y:0})},[$]),v.useEffect(()=>{K(o)},[o]),v.useEffect(()=>{e&&!$&&s.current&&setTimeout(()=>{if(s.current){s.current.focus();const Ue=s.current.value.length;Ue>0&&s.current.setSelectionRange(Ue,Ue)}},50)},[e,$]),v.useEffect(()=>{if(!e||$||!(window.innerWidth<=768))return;const jt=window.scrollY,Tt=document.body.style.overflow,Qn=document.documentElement.style.overflow,vt=document.body.style.position,It=document.body.style.top,Gt=document.body.style.width;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${jt}px`,document.body.style.width="100%",()=>{document.documentElement.style.overflow=Qn,document.body.style.overflow=Tt,document.body.style.position=vt,document.body.style.top=It,document.body.style.width=Gt,window.scrollTo(0,jt)}},[e,$]);const oe=Ue=>{!Ue.trim()&&!q||(U(!1),G(Ue),l(""),p([]),x([]))},{preFilledQuery:je,setPreFilledQuery:Oe}=Bc();v.useEffect(()=>{e&&je&&(l(je),setTimeout(()=>{oe(je),Oe("")},300))},[e,je,Oe]),v.useEffect(()=>{E&&(l(E),_e(!1),setTimeout(()=>oe(E),50),I(null))},[E]);const J=()=>{_e(!0)},xe=()=>{l(""),p([]),x([]),Y(),s.current&&s.current.focus()};v.useEffect(()=>{e&&(async()=>{_(!0);try{const jt=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),Tt=await ie(`/api/patients?${jt.toString()}`);if(Tt.ok){const Qn=await Tt.json();u(Qn.patients||[])}}catch(jt){console.error("Error fetching recent patients:",jt)}finally{_(!1)}})()},[e]);const ge=v.useMemo(()=>ql(async Ue=>{const jt=Ue.trim(),Tt=/^\d+$/.test(jt),Qn=jt.split(/\s+/).length;if(jt.length>1){const vt=Se.search(jt);x(vt.map(It=>It.item))}else x([]);if(jt.length<2||Tt&&jt.length>10||!Tt&&Qn>3){p([]),j(!1);return}j(!0);try{const vt=new URLSearchParams({search:encodeURIComponent(Ue),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),It=await ie(`/api/patients?${vt.toString()}`);if(It.ok){const Gt=await It.json();p(Gt.patients||[])}}catch(vt){console.error("Search error:",vt)}finally{j(!1),_B()}},300),[t]),he=Ue=>{const jt=Ue.target.value;l(jt),ge(jt)},Ie=Ue=>{Ue.id&&a(`/dashboard/edit-complaint/patient/${Ue.id}`)},nt=Ue=>{a(Ue.path)},Be=Ue=>{Ue.path==="/dashboard/add-patient"&&nDe()},Ge=Ue=>{l(Ue),setTimeout(()=>oe(Ue),50)},it=async()=>{if(o.trim()){j(!0);try{const Ue=await ie("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),age:null,gender:null,phone:null})});if(!Ue.ok){const vt=await Ue.json();throw new Error(vt.message||"Failed to create patient")}const jt=await Ue.json();let Tt=null;const Qn=await ie("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:jt.id,complaint:"Walk-in (Quick Create)"})});if(Qn.ok&&(Tt=(await Qn.json()).id),Tt)a(`/dashboard/edit-complaint/${Tt}`);else{const vt=await ie(`/api/queue/patient/${jt.id}/latest`);if(vt.ok){const It=await vt.json();It&&It._id&&a(`/dashboard/edit-complaint/${It._id}`)}}n()}catch(Ue){console.error("Failed to create patient:",Ue),alert("Failed to create patient. Please try again.")}finally{j(!1)}}},wt=Ue=>{o.trim()&&oe(o)},we=Ue=>{Ue.key==="Enter"&&!Ue.shiftKey&&(Ue.preventDefault(),wt())},Qe=Ue=>{Ue.target===Ue.currentTarget&&n()};if(!e&&!Ee)return null;const Xe=o.trim().length>0||(h.length>0||m.length>0)&&!b,ut=o.length===0&&h.length===0&&m.length===0,Ct=o.length>=3&&h.length===0&&m.length===0&&!b,bt=R.length>0||z,Pe=!bt||Xe,ot=bt&&Xe,kt=bt&&!k&&!$&&!Xe;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${Ft.overlay} ${$?Ft.overlayMinimized:""} ${Ve?Ft.exiting:""}`,onClick:Qe,children:r.jsxs("div",{ref:re,className:`${Ft.modal} ${$?Ft.minimized:""} ${kt?Ft.collapsed:""} ${Ve?Ft.exiting:""}`,style:{transform:`translate(${be.x}px, ${be.y}px)`,height:kt?"auto":void 0},onClick:()=>{se.current||($?U(!1):kt&&C(!0))},children:[r.jsxs("div",{className:Ft.dragBar,onMouseDown:Ue=>{Ue.target.closest("button")||(ne(!0),se.current=!1,ye.current={x:Ue.clientX,y:Ue.clientY},de.current={x:be.x,y:be.y})},children:[r.jsxs("div",{className:Ft.dragBarControls,children:[r.jsx("button",{className:Ft.windowControlBtn,onClick:n,title:"Close",children:r.jsx(Ot,{size:24,color:"#64748b"})}),r.jsx("button",{className:Ft.windowControlBtn,onClick:()=>U(!$),title:$?"Maximize":"Minimize",children:$?r.jsx(dq,{size:24,color:"#64748b"}):r.jsx(wJ,{size:24,color:"#64748b"})})]}),r.jsx("div",{className:Ft.dragBarTitle,children:bt?r.jsxs(r.Fragment,{children:[r.jsx(Cf,{size:14,className:"text-violet-600"}),r.jsx("span",{children:"AI Assistant"})]}):Xe?r.jsxs(r.Fragment,{children:[r.jsx(fn,{size:14,className:"text-blue-500"}),r.jsx("span",{children:"Search Results"})]}):r.jsx("span",{style:{opacity:.5,fontWeight:500},children:"Clinic Manager AI"})}),r.jsx("div",{className:Ft.dragBarControlsRight,children:r.jsx("button",{className:Ft.newChatBtn,onClick:xe,title:"New Chat",children:r.jsx(Ui,{size:20})})})]}),r.jsxs("div",{className:Ft.contentWrapper,children:[bt&&r.jsx("div",{className:Ft.chatSectionFill,children:r.jsxs("div",{className:Ft.chatMessagesFill,children:[R.map((Ue,jt)=>r.jsx("div",{className:`${Ft.chatBubble} ${Ue.role==="user"?Ft.chatBubbleUser:Ue.role==="model"?Ft.chatBubbleModel:Ft.chatBubbleSystem}`,children:Ue.role==="model"?r.jsx(yd,{remarkPlugins:[xd],children:Ue.text}):Ue.text},jt)),z&&r.jsxs("div",{className:Ft.processing,children:[r.jsx(co,{size:14,className:Ft.spinner}),"Thinking..."]})]})}),Pe&&r.jsxs("div",{className:ot?Ft.overlayContent:Ft.content,children:[ut&&!bt&&r.jsxs("div",{className:Ft.section,children:[r.jsx("div",{className:Ft.sectionTitle,children:"Newly Registered"}),r.jsx("div",{className:Ft.recentList,children:w?[1,2,3,4,5].map(Ue=>r.jsx(ee,{width:100,height:32,style:{borderRadius:"16px"}},Ue)):c.length>0?c.map(Ue=>r.jsxs("div",{className:Ft.recentPill,onClick:()=>Ie(Ue),onMouseEnter:()=>me(Ue.id),children:[r.jsx("span",{className:Ft.recentName,children:Ue.name||"Patient"}),r.jsxs("span",{className:Ft.recentToken,children:["#",Ue.token]}),r.jsxs("span",{className:Ft.recentInfo,children:[Ue.age?`${Ue.age}y`:""," ",Ue.gender||""]})]},Ue.id)):r.jsx("div",{className:Ft.recentInfo,style:{opacity:.5},children:"No recent patients found."})})]}),ut&&!bt&&r.jsxs("div",{className:Ft.section,children:[r.jsx("div",{className:Ft.sectionTitle,children:"Try Asking AI..."}),r.jsx("div",{className:Ft.examplesGrid,children:Re.map((Ue,jt)=>r.jsxs("div",{className:Ft.exampleCard,onClick:()=>Ge(Ue.text),children:[r.jsx("span",{className:Ft.exampleIcon,children:Ue.icon}),r.jsx("span",{className:Ft.exampleText,children:Ue.text})]},jt))})]}),b&&r.jsx("div",{className:Ft.section,children:r.jsxs("div",{className:Ft.processing,children:[r.jsx(co,{size:16,className:Ft.spinner}),"Searching..."]})}),m.length>0&&!b&&r.jsxs("div",{className:Ft.section,children:[r.jsx("div",{className:Ft.sectionTitle,children:"Pages Found"}),r.jsx("div",{className:Ft.resultsList,children:m.map((Ue,jt)=>r.jsxs("div",{className:Ft.resultItem,onClick:()=>nt(Ue),onMouseEnter:()=>Be(Ue),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{color:"#7c3aed"},children:Ue.icon}),r.jsx("span",{className:Ft.resultName,children:Ue.name})]}),r.jsx("span",{className:Ft.resultDetails,style:{fontSize:"0.7rem"},children:"Jump to page"})]},jt))})]}),Xe&&r.jsxs("div",{className:Ft.section,children:[r.jsx("div",{className:Ft.sectionTitle,children:"Patients Found"}),r.jsxs("div",{className:Ft.resultsList,children:[o.trim().length>0&&r.jsx("div",{className:Ft.resultItem,onClick:it,style:{border:"1px dashed #6366f1",backgroundColor:"#f5f3ff"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#8b5cf6",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(vf,{size:16})}),r.jsxs("div",{children:[r.jsxs("span",{className:Ft.resultName,style:{color:"#7c3aed"},children:['Create "',o,'"']}),r.jsx("div",{className:"text-xs text-violet-600 mt-0.5",children:"Add new patient"})]})]})}),h.map(Ue=>r.jsxs("div",{className:Ft.resultItem,onClick:()=>Ie(Ue),onMouseEnter:()=>{_B(),me(Ue.id)},children:[r.jsxs("div",{children:[r.jsxs("span",{className:Ft.resultToken,children:["[#",Ue.token,"]"]}),r.jsx("span",{className:Ft.resultName,children:Ue.name})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[Ue.age&&r.jsxs("span",{children:[Ue.age," Yrs"]}),Ue.gender&&r.jsx("span",{children:Ue.gender}),r.jsxs("span",{children:["ID: ",Ue.id.slice(-6).toUpperCase()]}),T.map(jt=>{var Qn;const Tt=(Qn=Ue.custom_fields)==null?void 0:Qn[jt.key];return Tt?r.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 border border-slate-200",children:[jt.label,": ",String(Tt)]},jt.key):null})]})]},Ue.id))]})]}),Ct&&!bt&&r.jsx("div",{className:Ft.section,children:r.jsxs("div",{className:Ft.noResults,children:["Press ",r.jsx("strong",{children:"Enter"}),' to send "',o,'" to AI Assistant']})})]})]}),r.jsxs("div",{className:Ft.header,children:[r.jsx("div",{className:Ft.inputWrapper,children:r.jsxs("div",{className:Ft.inputContainer,children:[r.jsx("div",{className:Ft.minimizedSearchIcon,children:r.jsx(fn,{size:24})}),r.jsx("textarea",{ref:Ue=>{s.current=Ue,Ue&&(Ue.style.height="auto",Ue.style.height=Math.min(Ue.scrollHeight,150)+"px")},className:Ft.input,placeholder:$?"Type here...":"Search (Name/Token/Phone), Ask AI, or Enter New Case (Name Age Sex Complaint)...",value:o,onChange:Ue=>{he(Ue),Ue.target.style.height="auto",Ue.target.style.height=Math.min(Ue.target.scrollHeight,150)+"px"},onKeyDown:we,onFocus:Ue=>{Ue.target.scrollIntoView=()=>{},setTimeout(()=>{re.current&&(re.current.scrollTop=re.current.scrollHeight)},100)},rows:1,disabled:z}),q&&r.jsxs("div",{style:{position:"relative",marginRight:"0.5rem"},children:[r.jsx("img",{src:q,alt:"Selected",style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #e2e8f0"}}),r.jsx("button",{onClick:H,style:{position:"absolute",top:-4,right:-4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",padding:"1px",cursor:"pointer",display:"flex"},children:r.jsx(Ot,{size:8})})]}),r.jsxs("div",{className:Ft.controlsGroup,children:[r.jsx("button",{className:Ft.iconButton,onClick:()=>{var Ue;return(Ue=Ae.current)==null?void 0:Ue.click()},title:"Attach Image",children:r.jsx(nO,{size:16})}),(o.trim().length>0||q)&&r.jsx("button",{className:`${Ft.iconButton} ${Ft.sendButton}`,onClick:()=>oe(o),title:"Send to AI",children:r.jsx(Lb,{size:16})}),r.jsx("button",{className:Ft.iconButton,onClick:J,title:"Voice Input",children:r.jsx(KN,{size:16})})]})]})}),r.jsx("input",{type:"file",ref:Ae,onChange:ce,accept:"image/*",style:{display:"none"}})]})]})}),le&&r.jsx(cS,{onClose:()=>_e(!1),patientData:null,tokenNumber:null,onAiSummaryChange:Ue=>{console.log("AI Summary:",Ue),I(Ue)}}),Q&&r.jsx(tDe,{isOpen:!!Q,onClose:L,title:Q.title,widgets:Q.widgets,onSave:te})]})};var cG={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},kB=Te.createContext&&Te.createContext(cG),aDe=["attr","size","title"];function iDe(t,e){if(t==null)return{};var n=sDe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function sDe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function LN(){return LN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},LN.apply(this,arguments)}function TB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function FN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TB(Object(n),!0).forEach(function(a){oDe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function oDe(t,e,n){return e=lDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lDe(t){var e=cDe(t,"string");return typeof e=="symbol"?e:e+""}function cDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uG(t){return t&&t.map((e,n)=>Te.createElement(e.tag,FN({key:n},e.attr),uG(e.child)))}function Vi(t){return e=>Te.createElement(uDe,LN({attr:FN({},t.attr)},e),uG(t.child))}function uDe(t){var e=n=>{var{attr:a,size:i,title:s}=t,o=iDe(t,aDe),l=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Te.createElement("svg",LN({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,o,{className:c,style:FN(FN({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Te.createElement("title",null,s),t.children)};return kB!==void 0?Te.createElement(kB.Consumer,null,n=>e(n)):e(cG)}function dDe(t){return Vi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function AB(t){return Vi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function wc(t){return Vi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function PB(t){return Vi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function zA(t){return Vi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function Qu(t){return Vi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Q1(t){return Vi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(t)}function Qh(t){return Vi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(t)}function hv(t){return Vi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(t)}function Xu(t){return Vi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function dG(t){return Vi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function EB(t){return Vi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function hDe(t){return Vi({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function X1(t){return Vi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function Em(t){return Vi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const hG={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Qu},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:Q1},{path:"/dashboard/users",name:"User Management",icon:Em}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Qu}]},{title:"Clinic Management",links:[{path:"/dashboard/clinic-hub",name:"Clinic Hub",icon:PB},{path:"/dashboard/staff",name:"Staff Management",icon:Em},{path:"/dashboard/roles",name:"Role Management",icon:X1},{path:"/dashboard/clinic-files",name:"Clinic Files",icon:wc},{path:"/custom-tables",name:"Custom Tables",icon:wc},{path:"/dashboards",name:"Custom Dashboards",icon:AB}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:Q1},{path:"/dashboard/patients",name:"All Patients",icon:Em},{path:"/dashboard/patients/search",name:"Search Patient",icon:Xu},{path:"/dashboard/files",name:"Patient Files",icon:wc}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:wc},{path:"/dashboard/inventory",name:"Inventory Management",icon:hv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:hv},{path:"/dashboard/distributors",name:"Distributor Management",icon:Em}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:EB},{path:"/dashboard/reception",name:"Appointment Queue",icon:Qu},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:Qh},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:Qh}]},{title:"Role Operations",links:[{path:"/manage-admission",name:"Admission Desk",icon:X1},{path:"/dashboard/pharmacy-queue",name:"Pharmacy Queue",icon:hv},{path:"/dashboard/lab",name:"Lab Panel",icon:zA},{path:"/billing",name:"Billing",icon:Qh},{path:"/create-custom-bill",name:"Custom Bill",icon:Qh},{path:"/search-bills",name:"Search Bills",icon:Xu},{path:"/dashboard/medical",name:"Medical Procedures",icon:wc}]},{title:"Help & Support",links:[{path:"/dashboard/guide",name:"User Guide",icon:dDe}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search-patient",name:"Patient Search",icon:Xu},{path:"/dashboard/add-patient",name:"Add Patient",icon:Q1},{path:"/manage-admission",name:"Manage Admission",icon:X1}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:zA},{path:"/billing",name:"Billing",icon:Qh},{path:"/dashboard/medical",name:"Medical Procedures",icon:wc}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:EB}]},{title:"Analytics",links:[{path:"/dashboards",name:"Custom Dashboards",icon:AB}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Appointment Queue",icon:Qu}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:Em},{path:"/dashboard/add-patient",name:"Add Patient",icon:Q1},{path:"/dashboard/search-patient",name:"Search Patient",icon:Xu}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:Qh},{path:"/search-bills",name:"Search Bills",icon:Xu},{path:"/manage-admission",name:"Manage Admission",icon:X1},{path:"/dashboard/clinic-files",name:"Clinic Files",icon:wc},{path:"/dashboard/patient-debt",name:"Patient Debt Management",icon:Qh}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Qu},{path:"/lab-inventory",name:"Lab Test Inventory",icon:zA},{path:"/lab/search-report",name:"Search Lab Report",icon:Xu}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Qu},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:hv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:hv},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:wc},{path:"/dashboard/distributors",name:"Distributor Management",icon:Em}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:wc},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:PB},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:Xu}]}],patient:[{title:"Patient Portal",links:[{path:"/patient-dashboard",name:"My Dashboard",icon:Qu}]}]},VM=async()=>{const t=await ie("/api/clinic-subscriptions/plans",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription plans")}return t.json()},fDe=async t=>{const e=await ie(`/api/clinic-subscriptions/cancel/${t}`,{method:"PUT"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to cancel clinic subscription")}return e.json()},pDe=async t=>{const e=await ie(`/api/clinic-subscriptions/plans/${t}`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to fetch clinic subscription plan")}return e.json()},mDe=async t=>{const e=await ie("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to create clinic subscription plan")}return e.json()},gDe=async(t,e)=>{const n=await ie(`/api/clinic-subscriptions/plans/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to update clinic subscription plan")}return n.json()},yDe=async t=>{const e=await ie(`/api/clinic-subscriptions/plans/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to deactivate clinic subscription plan")}return e.json()},xDe=async t=>{const e=await ie("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to initiate clinic subscription")}return e.json()},vDe=async()=>{try{const t=await ie("/api/clinic-subscriptions/pending",{method:"GET"});return t.ok?t.json():null}catch(t){return console.error("Error checking for pending subscription:",t),null}},bDe=async()=>{const t=await ie("/api/clinics/subscription-status",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription status")}return t.json()};function jDe(t=!0){return qN({queryKey:Kt.clinicSubscription,queryFn:bDe,enabled:t,staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!0})}const wDe="_container_c9bhr_3",NDe="_header_c9bhr_21",SDe="_titleGroup_c9bhr_41",_De="_title_c9bhr_41",CDe="_closeButton_c9bhr_59",kDe="_messageList_c9bhr_79",TDe="_emptyState_c9bhr_108",ADe="_emptyStateIcon_c9bhr_119",PDe="_exampleContainer_c9bhr_145",EDe="_exampleChip_c9bhr_153",DDe="_messageRow_c9bhr_176",ODe="_messageRowUser_c9bhr_194",MDe="_messageRowModel_c9bhr_198",IDe="_messageRowSystem_c9bhr_202",RDe="_bubble_c9bhr_208",LDe="_bubbleUser_c9bhr_224",FDe="_bubbleModel_c9bhr_234",$De="_bubbleSystem_c9bhr_247",BDe="_processingIndicator_c9bhr_330",zDe="_spin_c9bhr_343",qDe="_inputArea_c9bhr_358",UDe="_imagePreviewContainer_c9bhr_365",VDe="_inputContainer_c9bhr_376",HDe="_inputField_c9bhr_393",GDe="_sendButton_c9bhr_407",mr={container:wDe,header:NDe,titleGroup:SDe,title:_De,closeButton:CDe,messageList:kDe,emptyState:TDe,emptyStateIcon:ADe,exampleContainer:PDe,exampleChip:EDe,messageRow:DDe,messageRowUser:ODe,messageRowModel:MDe,messageRowSystem:IDe,bubble:RDe,bubbleUser:LDe,bubbleModel:FDe,bubbleSystem:$De,processingIndicator:BDe,spin:zDe,inputArea:qDe,imagePreviewContainer:UDe,inputContainer:VDe,inputField:HDe,sendButton:GDe},fG=({onClose:t,settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s})=>{const{chatQuery:o,setChatQuery:l,chatHistory:c,isProcessing:u,handleSendMessage:h,refreshChat:p,stopGeneration:m,selectedImage:x,handleImageSelect:b,clearImage:j}=CO({settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s}),w=v.useRef(null),_=v.useRef(null),k=()=>{var E;(E=w.current)==null||E.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{k()},[c,u]);const C=E=>{var $;const I=($=E.target.files)==null?void 0:$[0];I&&b(I)},A=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],T=E=>{l(E)};return r.jsxs("div",{className:mr.container,children:[r.jsxs("header",{className:mr.header,children:[r.jsxs("div",{className:mr.titleGroup,children:[r.jsx(Cf,{size:20,className:"text-violet-600"}),r.jsx("h3",{className:mr.title,children:"Clinic Assistant"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:p,className:mr.closeButton,title:"Refresh Chat",children:r.jsx(pq,{size:18})}),r.jsx("button",{onClick:t,className:mr.closeButton,title:"Close",children:r.jsx(Ot,{size:20})})]})]}),r.jsxs("div",{className:mr.messageList,children:[c.length===0&&r.jsxs("div",{className:mr.emptyState,children:[r.jsx(Cf,{size:48,className:mr.emptyStateIcon}),r.jsx("p",{children:"How can I help you manage the clinic today?"}),r.jsx("div",{className:mr.exampleContainer,children:A.map((E,I)=>r.jsx("button",{className:mr.exampleChip,onClick:()=>T(E),children:E},I))})]}),c.map((E,I)=>r.jsx("div",{className:`${mr.messageRow} ${E.role==="user"?mr.messageRowUser:E.role==="model"?mr.messageRowModel:mr.messageRowSystem}`,children:r.jsx("div",{className:`${mr.bubble} ${E.role==="user"?mr.bubbleUser:E.role==="model"?mr.bubbleModel:mr.bubbleSystem}`,children:E.role==="user"||E.role==="system"?E.text:r.jsx(yd,{remarkPlugins:[xd],children:E.text})})},I)),u&&r.jsx("div",{className:`${mr.messageRow} ${mr.messageRowModel}`,children:r.jsxs("div",{className:mr.processingIndicator,children:[r.jsx(co,{size:14,className:mr.spin}),"Thinking..."]})}),r.jsx("div",{ref:w})]}),r.jsxs("div",{className:mr.inputArea,children:[x&&r.jsxs("div",{className:mr.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[r.jsx("img",{src:x,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),r.jsx("button",{onClick:j,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:r.jsx(Ot,{size:12})})]}),r.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),r.jsxs("div",{className:mr.inputContainer,children:[r.jsx("input",{type:"file",ref:_,onChange:C,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:mr.sendButton,onClick:()=>{var E;return(E=_.current)==null?void 0:E.click()},disabled:u,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:r.jsx(nO,{size:18})}),r.jsx("input",{type:"text",className:mr.inputField,placeholder:"Type your request...",value:o,onChange:E=>l(E.target.value),onKeyDown:E=>E.key==="Enter"&&!u&&h(),disabled:u,autoFocus:!0}),u?r.jsx("button",{className:mr.sendButton,onClick:m,title:"Stop Generating",style:{color:"#ef4444"},children:r.jsx(lZ,{size:18,fill:"currentColor"})}):r.jsx("button",{className:mr.sendButton,onClick:()=>h(),disabled:!o.trim()&&!x,children:r.jsx(Lb,{size:18})})]})]})]})};function Od(t,e=100){const n=v.useRef(!1);v.useEffect(()=>{if(n.current)return;const a=setTimeout(()=>{const i=document,s=['input[type="text"]:not([disabled]):not([readonly])','input[type="search"]:not([disabled]):not([readonly])','input[type="email"]:not([disabled]):not([readonly])','input[type="tel"]:not([disabled]):not([readonly])','input[type="url"]:not([disabled]):not([readonly])',"input:not([type]):not([disabled]):not([readonly])"].join(", "),o=i.querySelectorAll(s),l=Array.from(o).filter(c=>{const u=window.getComputedStyle(c),h=c.getBoundingClientRect();return u.display!=="none"&&u.visibility!=="hidden"&&u.opacity!=="0"&&h.width>0&&h.height>0});if(l.length>0){const c=l[0];c.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{c.focus()},50),n.current=!0}},e);return()=>clearTimeout(a)},[t,e])}const WDe=({onLoginSuccess:t})=>{const[e,n]=v.useState(""),[a,i]=v.useState(""),[s,o]=v.useState(null),[l,c]=v.useState(!1),u=Mt();Od();const h=async x=>{x.preventDefault(),c(!0),o(null);try{const b=await ie("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!b.ok){let w=`Login failed with status: ${b.status}`;try{w=(await b.json()).message||w}catch{try{const k=await b.text();k&&(w=`${w} - ${k}`)}catch{}}throw new Error(w)}const j=await b.json();console.log("Login successful:",j),localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?u("/dashboard/queue"):u("/dashboard")}catch(b){console.error("Login failed:",b),o(b.message||"Login failed. Please check your credentials.")}finally{c(!1)}},p=async x=>{c(!0),o(null);try{const b=await ie("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x.credential})});if(!b.ok)throw new Error("Google Sign-In failed");const j=await b.json();localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?u("/dashboard/queue"):u("/dashboard")}catch(b){console.error("Google Login Error:",b),o("Google Sign-In failed. Please try again.")}finally{c(!1)}},m=()=>{console.error("Google Login Failed"),o("Google Sign-In was unsuccessful. Please try again.")};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Newtons AI HMS"}),r.jsx("p",{className:"auth-subtitle",children:"Sign in to continue"}),r.jsxs("form",{onSubmit:h,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>n(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"email",children:"Email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:x=>i(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"password",children:"Password"})]}),s&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:s})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:l,className:"auth-submit-button",children:l?"Signing in...":"Sign In"})})]}),r.jsx("div",{className:"google-login-container",children:r.jsx(xK,{onSuccess:p,onError:m,useOneTap:!0})}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Are you a patient?"," ",r.jsx(lr,{to:"/patient-login",className:"auth-navigation-link",children:"Patient Login"})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(lr,{to:"/register",className:"auth-navigation-link",children:"Create account"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},KDe=({onLoginSuccess:t})=>{const[e,n]=v.useState("login"),[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([]),[u,h]=v.useState(null),[p,m]=v.useState(!1),[x,b]=v.useState(""),[j,w]=v.useState(null),[_,k]=v.useState(""),[C,A]=v.useState([]),T=Mt();Te.useEffect(()=>{e==="clinic_search"&&C.length===0&&(async()=>{m(!0);try{const R=await ie("/api/clinics/search?query=Newton"),z=await R.json();R.ok&&A(z.clinics.slice(0,4))}catch(R){console.error("Failed to fetch clinic suggestions:",R)}finally{m(!1)}})()},[e,C.length]);const E=async B=>{B.preventDefault(),m(!0),h(null);try{const R=await ie("/api/auth/patient-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a,tokenNumber:s})}),z=await R.json();if(R.ok){const G={...z.patient,role:"patient"};localStorage.setItem("authToken",z.token),localStorage.setItem("currentUser",JSON.stringify(G)),t(G),T("/patient-dashboard")}else h(z.message||"Login failed. Please check your phone and token.")}catch{h("Connection error")}finally{m(!1)}},I=async B=>{B.preventDefault(),m(!0),h(null);try{const R=await ie("/api/auth/patient-lookup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a})}),z=await R.json();R.ok?(c(z.accounts),n("lookup")):h(z.message||"Lookup failed")}catch{h("Connection error")}finally{m(!1)}},$=async B=>{B.preventDefault(),m(!0),h(null);try{const R=await ie(`/api/clinics/search?query=${_}`),z=await R.json();R.ok?A(z.clinics):h(z.message||"Search failed")}catch{h("Connection error")}finally{m(!1)}},U=async B=>{if(B.preventDefault(),!!j){m(!0),h(null);try{const R=await ie("/api/auth/patient-register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:a,name:x,clinicId:j.id})}),z=await R.json();if(R.ok){const G={...z.patient,role:"patient"};localStorage.setItem("authToken",z.token),localStorage.setItem("currentUser",JSON.stringify(G)),t(G),alert(`Registration successful! Your unique Token Number is: ${z.patient_token_number}. Keep it safe for future logins.`),T("/patient-dashboard")}else h(z.message||"Registration failed")}catch{h("Connection error")}finally{m(!1)}}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Patient Portal"}),r.jsx("p",{className:"auth-subtitle",children:"Welcome back! Login to see your health history."}),u&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:u})}),e==="login"&&r.jsxs("form",{onSubmit:E,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"tel",required:!0,value:a,onChange:B=>i(B.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Phone Number"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"number",required:!0,value:s,onChange:B=>o(B.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Token Number"})]}),r.jsx("button",{type:"submit",disabled:p,className:"auth-submit-button",children:p?"Verifying...":"Login Now"}),r.jsx("div",{className:"auth-helper-links",style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.jsx("button",{type:"button",onClick:()=>n("clinic_search"),className:"auth-secondary-btn",style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0",background:"white",color:"#0f172a",fontWeight:600,cursor:"pointer"},children:"New Patient? Register Here"})})]}),e==="lookup"&&r.jsxs("div",{className:"auth-form",children:[r.jsxs("p",{className:"auth-subtitle",children:["Checking records for: ",r.jsx("b",{children:a||"none"})]}),a?r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",margin:"1rem 0"},children:l.length>0?l.map(B=>r.jsxs("div",{className:"auth-text-input",style:{textAlign:"left",padding:"1rem",height:"auto",background:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontWeight:600},children:B.patientName}),r.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:B.clinicName})]},B.patientId)):r.jsx("p",{style:{fontSize:"0.85rem",color:"#64748b"},children:"No existing records found. Please contact your clinic or register below."})}),r.jsx("button",{onClick:()=>n("login"),className:"auth-submit-button",children:"Back to Login"})]}):r.jsxs("form",{onSubmit:I,className:"auth-form",style:{width:"100%"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"tel",required:!0,value:a,onChange:B=>i(B.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Enter Phone Number"})]}),r.jsx("button",{type:"submit",disabled:p,className:"auth-submit-button",children:"Search"})]})]}),e==="clinic_search"&&r.jsxs("div",{className:"auth-form",children:[r.jsx("p",{className:"auth-subtitle",children:"Search for your clinic:"}),r.jsxs("form",{onSubmit:$,style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",width:"100%"},children:[r.jsxs("div",{className:"form-group",style:{flex:1,marginBottom:0},children:[r.jsx("input",{type:"text",required:!0,value:_,onChange:B=>k(B.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Clinic Name"})]}),r.jsx("button",{type:"submit",disabled:p,className:"auth-submit-button",style:{width:"auto",marginTop:0},children:"Go"})]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",maxHeight:"200px",overflowY:"auto",width:"100%"},children:C.map(B=>r.jsxs("button",{onClick:()=>{w(B),n("register")},className:"auth-text-input",style:{textAlign:"left",padding:"0.75rem",cursor:"pointer",height:"auto"},children:[r.jsx("div",{style:{fontWeight:600},children:B.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:B.address})]},B.id))}),r.jsx("button",{onClick:()=>n("login"),className:"auth-navigation-link",style:{background:"none",border:"none",cursor:"pointer",width:"100%",marginTop:"1rem"},children:"Back"})]}),e==="register"&&j&&r.jsxs("form",{onSubmit:U,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"text",required:!0,value:a,onChange:B=>i(B.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Phone Number"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{type:"text",required:!0,value:x,onChange:B=>b(B.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{children:"Full Name"})]}),r.jsx("button",{type:"submit",disabled:p,className:"auth-submit-button",children:p?"Registering...":"Register"}),r.jsx("button",{onClick:()=>n("clinic_search"),className:"auth-navigation-link",style:{background:"none",border:"none",cursor:"pointer",width:"100%",marginTop:"1rem"},children:"Back"})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Are you a Doctor/Staff?"," ",r.jsx(lr,{to:"/login",className:"auth-navigation-link",children:"Staff Login"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},YDe=`You are an expert OPD (Outpatient Department) medical assistant for a Doctor in a clinic in India. You will receive all the medical data of the patient including complaints (history), labs, pharmacy orders, etc., along with their date and time. Your primary goal is to assist the doctor and analyze patient chief complaints (Co), provide a structured clinical assessment including lab test suggestions (Lx), differential diagnoses (Dx), and a treatment plan (Tx). You have access to tools (actions) to order lab tests and pharmacy items, and update patient details.



**1. Definitions:**
   - Co: Chief complaints
   - Pt: Patient (assume living in India)
   - Lx: Laboratory tests
   - Dx: Differential Diagnosis
   - Tx: Treatment Plan

**2. Workflow:**
   - Analyze Co, generate Lx, Dx, and Tx sections as described below.
   - **Prioritization for Orders:** Always prioritize using \`edit_pharmacy_order\` or \`edit_lab_order\` if there are existing pending orders for the patient, before considering \`create_pharmacy_order\` or \`create_lab_order\`.
   - using edit_lab_order edits the lab order with the given serial numnber use to add new tests to the existing order or remove the tests from existing order, marking the status affects all tests in the order not only the test,always use this tool if there are pending lab orders instead of creating new orders.
   - using edit_pharmacy_order edits the pharmacy order with the given serial numnber to add new items to the existing order, update existing items, or remove items (either by \`items_to_remove\` or by setting \`quantity\` to 0). Always use this tool if there are pending pharmacy orders instead of creating new orders.
   - using bill_lab_order will navigate the user to the billing page for the specific lab order. Use this when the user expresses intent to bill a lab order.
   - using create_and_bill_lab_order will create a new lab order and immediately bill it (navigating to the print/bill screen). Use this when the user says "create and bill", "order and bill", or similar for NEW tests.
   - using bill_pharmacy_order will bill an existing pharmacy order (identified by serial number).
   - using create_and_bill_pharmacy_order will create a new pharmacy order and immediately bill it. Use this when the user says "prescribe and bill", "order and bill meds", etc.
   - using create_custom_bill will create a custom bill with arbitrary items (not from pharmacy/lab inventory), mark it as paid, and print it. Use this when the user wants to bill for services like consultation, dressing, procedures, or any custom charges.
   - If your Lx section suggests tests from the inventory, use the \`create_lab_order\` action, but only for tests that are both clinically required and have not already been ordered or are still pending. Skip tests that are already ordered and in pending.
   - If your Tx section prescribes medications, use the \`create_pharmacy_order\` action  but only for medications that are clinically required and have not already been prescribed or are still pending. Skip medications that are already dispensed or already ordered.
   - If your Tx section prescribes medications that are *not* available in the inventory, use the \`prescription_for_unavailable_drugs\` parameter within the \`create_pharmacy_order\` action to specify the prescription details. **IMPORTANT:** This string MUST be a **Markdown table** with columns: 'Drug Name', 'Quantity', 'Dosage', 'Directions'. Do not use plain text.
   - When ordering pharmacy items, specify both \`pack_quantity\` (number of full packs) and \`loose_quantity\` (number of individual units). The system will handle the conversion based on the drug's pack size.
   - **Patient Details Management:** Always store or update patient name, age, sex, and phone number using the \`update_patient_details\` action. If patient name, age, or sex is received as 'New Patient - Direct Entry', 'N/A', or blank, treat it as missing data; if the user input provides anything resembling a name, age, or sex (e.g., shiva 25m, robin 50m, priya 19f), update them using the \`update_patient_details\` action. If details are missing, you can ask the user for the missing details using the \`ask_followup_question\` action.
   - Always update new complaints of the patient using the \`add_complaint_history\` action.
   - If you generate a concise summary of the patient's current situation based on the interaction and history, use the \`update_case_summary\` action to save it.
   - Remember, when you use \`update_case_summary\`, the previous case summary will be replaced by the new one, so you can use it like a short-term memory to store other stuff that **keeps changing**, like the current treatment plan, plan of action, active problems, or current vitals, etc.
   - When you use \`add_complaint_history\`, it will add the complaint to the previous ones. You will be given all the previous complaints back in every query, so you can use it to store other long-term facts that do **not change**, like the history of a chronic illness, surgical history, allergies, or social history, etc.
   - while placing or editing a pharmacy order make sure to set the \`pack_quantity\` and \`loose_quantity\` right.
   - Use the \`update_clinic_ai_memory\` action to store or update **various types of clinic-wide persistent information in a concise way**. This can include 'summaries of common patient encounters'+'summeries of previous **Clinic-wide AI Memory**'(e.g., 'Patient X, 50m, chronic gastritis, last visit YYYY-MM-DD, prescribed Z, follow-up in N days'+'**Clinic-wide AI Memory** summary'), notes on local health trends, common diagnostic patterns observed in the clinic, specific operational protocols. This memory is shared across all interactions for the clinic and helps tailor responses to its specific context over time.
    -   **Recurring Medications:**
        -   Use \`create_recurring_medication_order\` to add a new recurring medication.
        -   Use \`edit_recurring_medication_order\` to edit an existing recurring medication (using its serial number).
        -   Recurring medications are long-term prescriptions (e.g., for chronic conditions) that automatically re-order or remind.
    -   **Important: Preventing Loops** If you determine that no further actions are needed (e.g., you have already performed necessary actions, or the user's input does not require any specific action), you **MUST** use the \`end_task\` action. This explicitly signals that your task is complete and prevents the system from re-prompting you unnecessarily.
**3.**Multiple Actions:** You can perform multiple actions (like ordering labs AND meds, adding complaints, updating patient information, and asking a follow-up question) in a single response by including multiple action objects within the main JSON array.


**4. Chief Complaints (Co):**
   - Analyze the provided chief complaints.
   - Present them in a table with two columns: 'Relevant Complaint (Score 8-10)' and 'Irrelevant Complaint (Score 0-7)', based on clinical relevance.

**5. Lab Tests (Lx):**
   - Suggest the most probable basic lab tests based on the clinical picture, ordered by likelihood.
   - If a basic test is positive/abnormal, suggest relevant advanced tests.
   - **Inventory Check:** Compare suggested tests against the provided inventory list.
   - **Table 1: Available Lab Tests:** Present tests *available* in the inventory in a table with columns: '**Clinical Importance (High/Medium/Low)**', 'Lab Test'. If suggesting tests from this table, prepare to use the \`create_lab_order\` tool in your response.
   - **Table 2: Unavailable Lab Tests:** Present tests *not available* in the inventory in a separate table with columns: '**Clinical Importance (High/Medium/Low)**', 'Unavailable Basic Test'. Clearly state these are not orderable via the tool (generate Table 2 only when required tests are unavailable).

**6. Differential Diagnosis (Dx):**
   - List potential differential diagnoses.
   - Provide a confidence score (0-10) for each.
   - Present in a table with columns: 'Differential Diagnosis' and 'Confidence Score (0-10)'.

**7. Treatment Plan (Tx):**
   - Create a structured treatment plan including ideal medications based on the diagnosis.
   - **Inventory Check:** Compare prescribed medications against the provided inventory list.
   - **Table 1: Available Medications:** Present medications *available* in the inventory in a table with columns: 'Time Frame' (from and to dates), 'Treatment Goal', 'Intervention', 'Medication Type', 'Drug Form', 'Drug Name', 'Regimen (Dose, Freq)', 'Duration'. Before using the \`create_pharmacy_order\` tool, check if an order for the same drug has already been placed for this patient today. If an order already exists for today, do *not* create a duplicate order. If no order exists for today, prepare to use the \`create_pharmacy_order\` tool in your response.
   - **Table 2: Unavailable Medications:** Present medications *not available* in the inventory in a separate table with columns: 'Unavailable Drug Name', 'Ideal Regimen', 'Reasoning/Indication', '**Clinical Importance (High/Medium/Low)**', 'Suggested Available Substitute (from inventory, if possible)'. Clearly state these are not orderable via the tool (generate Table 2 only when required medications are unavailable in the inventory).

**8. Tools / Actions:**
   When you need to perform actions like ordering tests/meds, updating patient info, or adding history, use the following JSON array format. The response should ONLY contain this JSON array, nothing else.

   ****STRICT JSON****>>>>>>\`\`\`json
[
  { "action": "create_pharmacy_order", "items": [ { "name": "Drug Name", "pack_quantity": number, "loose_quantity": number, "tabletsPerDay": number | null, "numberOfDays": number | null, "directions_to_use": "string | null" } ], "prescription_for_unavailable_drugs": "string | null" },
  { "action": "edit_pharmacy_order", "serialNumber": number, "items": [ { "name": "Drug Name", "pack_quantity": number, "loose_quantity": number, "tabletsPerDay": number | null, "numberOfDays": number | null, "directions_to_use": "string | null" } ], "items_to_remove": [ { "drug_id": number | null, "name": "Drug Name" } ], "status": "pending" | "billed" | "dispensed" | "cancelled", "prescription_for_unavailable_drugs": "string | null" },
  { "action": "bill_pharmacy_order", "serialNumber": number },
  { "action": "create_and_bill_pharmacy_order", "items": [ { "name": "Drug Name", "pack_quantity": number, "loose_quantity": number, "tabletsPerDay": number | null, "numberOfDays": number | null, "directions_to_use": "string | null" } ], "prescription_for_unavailable_drugs": "string | null" },
  { "action": "create_lab_order", "tests": [ { "name": "Test Name" } ] },
  { "action": "edit_lab_order", "serialNumber": number, "tests": [ { "name": "Test Name" } ], "items_to_remove": [ { "id": number | string | null, "name": "Test Name" } ], "status": "pending" | "billed" | "collected" | "processing" | "report_ready" | "completed" | "cancelled" | "reported" },
  { "action": "create_lab_report", "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ] },
  { "action": "edit_lab_report", "serialNumber": number, "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ] },
  { "action": "create_lab_report", "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ] },
  { "action": "edit_lab_report", "serialNumber": number, "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ] },
  { "action": "edit_lab_order_and_create_report", "serialNumber": number, "tests": [ { "name": "Test Name", "parameters": [{ "name": "Parameter Name", "value": "Value" }] } ], "items_to_remove": [ { "id": number | string | null, "name": "Test Name" } ] },
  { "action": "create_and_bill_lab_order", "tests": [ { "name": "Test Name" } ] },
  { "action": "add_complaint_history", "complaint": "Specific past complaint text..." },
  { "action": "update_patient_details", "name": "New Name (optional)", "age": number (optional), "gender": "M" | "F" | "O" | null (optional), "phone_number": "string (optional)" },
  { "action": "update_case_summary", "summary": "Concise summary text..." },
  { "action": "update_clinic_ai_memory", "memory_content": "New clinic-wide AI memory content..." },
  { "action": "create_recurring_medication_order", "items": [ { "medication_name": "Drug Name", "drug_id": "string | null", "quantity": number, "frequency_days": number, "next_delivery_date": "YYYY-MM-DD", "tablets_per_day": number | null, "number_of_days": number | null, "directions": "string | null", "notes": "string | null" } ] },
  { "action": "edit_recurring_medication_order", "serialNumber": number, "updates": { "medication_name": "string (opt)", "quantity": number, "frequency_days": number, "status": "active" | "paused" | "stopped", "next_delivery_date": "YYYY-MM-DD", "number_of_days": number, "tablets_per_day": number, "directions": "string" } },
  { "action": "create_custom_bill", "items": [ { "name": "Item Name", "price": number, "quantity": number } ], "payment_mode": "cash" | "upi" | "card" },
  { "action": "end_task" }
]
\`\`\`

   - **Multiple Actions in One Response:** You can include multiple action objects within this single JSON array if several actions are required based on your analysis (e.g., adding history AND ordering labs).
   - **Prioritization Within the Array:** If including multiple actions, order them within the array according to this priority:
     1. \`add_complaint_history\`
     2. \`update_patient_details\`
     3. \`update_case_summary\`
     4. \`update_clinic_ai_memory\`
     5. \`create_lab_order\`
     6. \`edit_lab_order\`
     7. \`create_pharmacy_order\`
     8. \`edit_pharmacy_order\`
     9. \`bill_lab_order\`
   - **Structure:**
     The AI response can be a flat array of actions OR a list of "function call" objects containing grouped actions.
     **Option 1: Flat Array (Simple)**
     \`\`\`json
     [
       { "action": "add_complaint_history", ... },
       { "action": "create_lab_order", ... }
     ]
     \`\`\`
     **Option 2: Grouped Function Calls (Complex)**
     You can group actions under logical "function calls" if needed.
     \`\`\`json
     [
       {
         "function_call": "assess_patient",
         "actions": [
           { "action": "ask_followup_question", "question": "..." }
         ]
       },
       {
         "function_call": "prescribe_treatment",
         "actions": [
            { "action": "create_pharmacy_order", "items": [...] },
            { "action": "create_lab_order", "tests": [...] }
         ]
       }
     ]
     \`\`\`

   - **Example (Multiple Actions):**
     \`\`\`json
     [
       { "action": "add_complaint_history", "complaint": "Patient also reports mild fever since yesterday." },
       { "action": "create_lab_order", "tests": [ { "name": "CBC" } ] }
     ]
     \`\`\`

   - **\`ask_followup_question\`**: Use this action (either standalone or inside a group) only when you need clarification.
     \`\`\`json
     {
       "action": "ask_followup_question",
       "question": "Your clear, specific question here.",
       "options": ["Optional Answer 1", "Optional Answer 2"]
     }
     \`\`\`
     *Description:* Ask the user a question to gather additional information needed to complete the task. This tool should be used when you encounter ambiguities, need clarification, or require more details to proceed effectively. It allows for interactive problem-solving by enabling direct communication with the user. Use this tool judiciously to maintain a balance between gathering necessary information and avoiding excessive back-and-forth.
     *Parameters:*
       - question: (required) The question to ask the user. This should be a clear, specific question that addresses the information you need.
       - options: (optional) An array of 2-5 options for the user to choose from. Each option should be a string describing a possible answer. You may not always need to provide options, but it may be helpful in many cases where it can save the user from having to type out a response manually.
   - **\`bill_lab_order\`**: Use this action when the intention is to proceed to billing for a specific lab order.
     \`\`\`json
     { "action": "bill_lab_order", "serialNumber": number }
     \`\`\`
     *Description:* Initiates the billing process for a specific lab order, helping the user navigate to the billing screen.
     *Parameters:*
       - serialNumber: (required) The serial number of the lab order to bill.


**Important:**
- Ensure all tables are clearly formatted using Markdown.
- Strictly adhere to the inventory constraints for labs and medications when deciding whether to use \`create_lab_order\` or \`create_pharmacy_order\`.
- When using actions, provide ONLY the JSON array (or the single JSON object for \`ask_followup_question\`) as the *very last* part of your response, after all other content including tables. Do not include any other text after the JSON.

**Plan Mode:**
When the user asks a question about a patient's condition or general medical topics (not entering new medical data), respond in PLAN MODE. In this mode, focus on answering the user's inquiry, clarifying their request, brainstorming ideas, or architecting a solution (like exploring treatment options). Ask clarifying questions if needed. Present detailed plans or explanations **using clear table formats and markdown (like bolding) for easy readability**. Engage in back-and-back discussion to finalize details. Do not use action tools (\`create_lab_order\`, \`create_pharmacy_order\`, \`add_complaint_history\`, \`update_patient_details\`) while in PLAN MODE).`,DB="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",QDe="models/gemini-3-flash-preview";async function XDe(){if(!_O())return console.warn("No auth token found, using default Gemini API key."),DB;let e=null;try{const n=await ie("/api/clinics/gemini-api-keys");if(n.ok){const i=(await n.json()).keys||[];if(i.length>0){const s=i[Math.floor(Math.random()*i.length)];return console.log(`Using random clinic Gemini key from pool of ${i.length} keys.`),s}}}catch(n){console.warn("Could not fetch clinic multi-key pool.",n)}try{const n=await ie("/api/clinics/settings");if(n.ok){const a=await n.json();a.gemini_api_key&&a.gemini_api_key.trim()!==""&&(e=a.gemini_api_key.trim())}}catch(n){console.warn("Could not fetch clinic settings (or key missing), proceeding to global fallback.",n)}if(e)return e;try{const n=await ie("/api/global-settings/gemini-api-keys");if(n.ok){const i=(await n.json()).keys||[];if(i.length>0){const s=i[Math.floor(Math.random()*i.length)];return console.log(`Using random Gemini key from pool of ${i.length} keys.`),s}}}catch(n){console.warn("Could not fetch multi-key pool.",n)}try{const n=await ie("/api/global-settings/app_gemini_api_key");if(n.ok){const i=(await n.json()).value;if(i&&i.trim()!=="")return i.trim()}}catch(n){console.warn("Could not fetch global API key.",n)}return console.warn("Clinic-specific and global Gemini API keys not found, using default env var."),DB}let qA=null,OB=null;async function pG(){const t=await XDe();return(!qA||OB!==t)&&(qA=new SO({apiKey:t}),OB=t),qA}async function ULe(t,e){const{query:n,currentDateTime:a,patientName:i,patientAge:s,patientGender:o,case_summary:l,case_summary_last_updated:c,clinic_ai_memory:u,clinic_ai_memory_last_updated:h,clinic_wide_system_prompt:p,labHistory:m,pharmacyOrders:x,pastComplaints:b,pharmacyInventory:j,labInventory:w,recurringMedications:_}=t;let k=`Patient Complaint: ${n}`;if(l&&(k+=`

--- Case Summary (Provided by Doctor) ---
${l}`,c))try{const z=new Date(c).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});k+=`
(Last Updated: ${z})`}catch{console.warn(`Could not format case_summary_last_updated: ${c}`),k+=`
(Last Updated: ${c})`}if(i&&(k+=`

Patient Name: ${i}`),s!=null&&(k+=`
Patient Age: ${s}`),o&&(k+=`
Patient Gender: ${o}`),a)try{const z=new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});k+=`

Current Interaction Time: ${z}`}catch{console.warn(`Could not format currentDateTime: ${a}`),k+=`

Current Interaction Time: ${a}`}if(u&&(k+=`

--- Clinic-wide AI Memory/Context ---
${u}`,h))try{const z=new Date(h).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});k+=`
(Last Updated: ${z})`}catch{console.warn(`Could not format clinic_ai_memory_last_updated: ${h}`),k+=`
(Last Updated: ${h})`}let C="";m&&Array.isArray(m)&&m.length>0&&(C=`

--- Lab History (Orders & Reports) ---
`,m.forEach(z=>{let G="Unknown Date";try{G=new Date(z.orderDate).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date for lab order: ${z.orderDate}`)}if(C+=`
Order #${z.serialNumber} Date: ${G} (Status: ${z.status})
`,C+=`Tests: ${z.tests.map(K=>K.name).join(", ")}
`,z.report){let K="Unknown Date";try{K=new Date(z.report.reportDate).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date for lab report: ${z.report.reportDate}`)}C+=`  -> Report Date: ${K}
`,z.report.tests&&Array.isArray(z.report.tests)?(C+=`     Findings:
`,z.report.tests.forEach(Y=>{C+=`       - Test: ${Y.testName}
`,Y.parameters&&Array.isArray(Y.parameters)&&Y.parameters.forEach(q=>{C+=`         - ${q.name}: ${q.value} (Normal: ${q.normal_range})
`})})):(C+=`     Findings: ${z.report.reportContent||"N/A"}
`,z.report.error&&(C+=`     Note: ${z.report.error}
`))}C+=`---
`}),k+=C);let A="";x&&Array.isArray(x)&&x.length>0&&(A=`

--- Recent Pharmacy Orders ---
`,x.forEach(z=>{let G="Unknown Date/Time";try{G=new Date(z.date).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date/time for pharmacy order: ${z.date}`)}A+=`
Order #${z.serialNumber} Date/Time: ${G} (Status: ${z.status})
`,A+=`Prescribed By: ${z.prescribedBy||"N/A"}
`,z.dispensedBy&&(A+=`Dispensed By: ${z.dispensedBy}
`),A+=`Medications:
`,z.medications.forEach(K=>{A+=`  - ${K.name} (Qty: ${K.quantity}`,K.tabletsPerDay&&(A+=`, ${K.tabletsPerDay}/day`),K.numberOfDays&&(A+=` for ${K.numberOfDays} days`),A+=`)
`}),z.prescriptionForUnavailableDrugs&&(A+=`  Prescription for Unavailable Drugs: ${z.prescriptionForUnavailableDrugs}
`),A+=`---
`}),k+=A);let T="";_&&Array.isArray(_)&&_.length>0&&(T=`

--- Recurring Medications (Active) ---
`,_.forEach((z,G)=>{let K=`${G+1}. ${z.medicationName} (${z.frequencyDays} days)`;if(z.tabletsPerDay&&(K+=` - ${z.tabletsPerDay} tabs/day`),z.numberOfDays&&(K+=` for ${z.numberOfDays} days`),K+=` [Status: ${z.status}]`,z.nextDeliveryDate)try{const Y=new Date(z.nextDeliveryDate).toLocaleDateString();K+=` (Next: ${Y})`}catch{}T+=`${K}
`}),k+=T);let E="";b&&Array.isArray(b)&&b.length>0&&(E=`

--- Past Complaints History ---
`,b.forEach(z=>{let G="Unknown Date/Time";try{G=new Date(z.createdAt).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date/time for past complaint: ${z.createdAt}`)}E+=`
Date/Time: ${G}
Complaint: ${z.complaint||"N/A"}
---
`}),k+=E);let I="";j&&Array.isArray(j)&&j.length>0&&(I=`

--- Current Pharmacy Inventory (Stock Levels) ---
`,j.forEach(z=>{let G=`${z.stock??0} packs`;z.loose!==void 0&&z.loose!==null&&z.loose>0&&(G+=`, ${z.loose} loose`);let K=`- ${z.name} (Pack: ${z.pack??"N/A"}): ${G}`;const Y=[];z.brand_name&&Y.push(`Brand: ${z.brand_name}`),z.batch&&Y.push(`Batch: ${z.batch}`),z.expiry_date&&Y.push(`Exp: ${z.expiry_date}`),Y.length>0&&(K+=` [${Y.join(", ")}]`),I+=`${K}
`}),k+=I);let $="";w&&Array.isArray(w)&&w.length>0&&($=`

--- Available Lab Tests (with Parameters) ---
`,w.forEach(z=>{$+=`- ${z.name} (Price: ${z.price??"N/A"})
`,z.default_parameters&&Array.isArray(z.default_parameters)&&z.default_parameters.length>0&&z.default_parameters.forEach(G=>{let K=`    * ${G.name}`;G.unit&&(K+=` (${G.unit})`),G.normal_range?K+=` [Normal: ${G.normal_range}]`:G.lower_limit!==void 0&&G.upper_limit!==void 0&&G.lower_limit!==null&&G.upper_limit!==null&&(K+=` [Normal: ${G.lower_limit} - ${G.upper_limit}]`),$+=`${K}
`})}),k+=$);const U=[{text:YDe}];p&&p.trim()!==""&&U.push({text:`--- Additional Clinic-Specific Instructions ---
${p}`});const B=[{text:k}];if(e){const z=new FileReader,G=await new Promise((K,Y)=>{z.onloadend=()=>{typeof z.result=="string"?K(z.result.split(",")[1]):Y(new Error("Failed to read image file as base64."))},z.onerror=Y,z.readAsDataURL(e)});B.push({inlineData:{mimeType:e.type,data:G}})}const R=[];U.length>0&&R.push({role:"user",parts:U}),R.push({role:"user",parts:B});try{const z={model:QDe,contents:R,generationConfig:{temperature:.7,maxOutputTokens:1024,responseMimeType:"text/plain"}},K=await(await pG()).models.generateContentStream(z);let Y="";for await(const q of K)if(q&&typeof q.text=="function"){const V=q.text;V&&(Y+=V)}else q&&q.candidates&&q.candidates[0]&&q.candidates[0].content&&q.candidates[0].content.parts&&q.candidates[0].content.parts[0]&&q.candidates[0].content.parts[0].text&&(Y+=q.candidates[0].content.parts[0].text);if(Y&&Y.trim()!=="")return Y.trim();throw console.error("Empty or invalid response received from Gemini API stream."),new Error("Failed to get suggestion from AI (Gemini). Empty or invalid stream response.")}catch(z){console.error("Error calling Gemini API:",z);let G="Failed to get suggestion from Gemini.";throw z.message&&(G=`Error processing Gemini request: ${z.message}`),new Error(G)}}const JDe=`You are a helpful, empathetic, and clear medical assistant for a patient using the OPD Zero app.
Your goal is to answer the patient's questions about their medical history, lab results, and prescriptions based ONLY on the provided context.

**Guidelines:**
1.  **Audience:** You are talking directly to the patient or their family member. Use simple, non-medical language where possible. Explain medical terms if you must use them.
2.  **Tone:** Be reassuring, professional, and polite.
3.  **Scope:** Answer questions *only* using the information provided in the context (Lab Reports, Pharmacy Orders, Medical Visits).
4.  **No Diagnosis:** Do NOT diagnose new conditions or prescribe new medications. You are an AI assistant helping them understand existing records. If they ask for medical advice about a new problem, advise them to visit the clinic.
5.  **Context-Aware:** You will receive a filtered history for specific patients (e.g., just "Ramesh's" history). Answer specifically about that person.
6.  **Formatting:** Use Markdown to make your answers easy to read (lists, bold text for emphasis).
7.  **Safety:** If a user asks something harmful or completely unrelated to their medical records, politely decline.

**What you can do:**
- Explain what a specific lab test means (e.g., "What is HbA1c?").
- Summarize their last visit.
- List their active medications.
- Clarify instructions (e.g., "How do I take this medicine?" if instructions are in the record).
`,ZDe="models/gemini-3-flash-preview";async function eOe(t,e){var o,l,c,u,h;const{patientName:n,history:a}=e;let i=`Current Patient Context: **${n}**

`;!a||a.length===0?i+=`No medical history records found for this patient.
`:(i+=`Medical Records:
`,a.forEach(p=>{const m=new Date(p.date).toLocaleDateString();p.type==="medical"?i+=`- [${m}] Medical Visit at ${p.clinicName}: ${p.description}
`:p.type==="lab"?(i+=`- [${m}] Lab Report at ${p.clinicName}:
  Tests: ${p.description}
`,p.tests&&Array.isArray(p.tests)&&p.tests.forEach(x=>{i+=`    * ${x.testName}`,x.parameters&&x.parameters.forEach(b=>i+=` (${b.name}: ${b.value})`),i+=`
`}),p.report_content&&(i+=`  Summary: ${p.report_content}
`)):p.type==="pharmacy"&&(i+=`- [${m}] Pharmacy Order at ${p.clinicName} (${p.description})
`,p.medications&&Array.isArray(p.medications)&&p.medications.forEach(x=>{i+=`    * ${x.name} (Qty: ${x.quantity})
`}))}));const s=`Patient Question: "${t}"

${i}`;try{const m=await(await pG()).models.generateContent({model:ZDe,contents:[{role:"user",parts:[{text:JDe}]},{role:"model",parts:[{text:"Understood. I will act as a helpful medical assistant for the patient, following all the guidelines."}]},{role:"user",parts:[{text:s}]}],config:{maxOutputTokens:4096,temperature:.7}}),x=(h=(u=(c=(l=(o=m==null?void 0:m.candidates)==null?void 0:o[0])==null?void 0:l.content)==null?void 0:c.parts)==null?void 0:u[0])==null?void 0:h.text;if(x)return x;throw new Error("Empty response from AI.")}catch(p){throw console.error("Patient AI Chat Error:",p),new Error("I'm having trouble connecting right now. Please try again later.")}}const UA="pac_selectedPatients",tOe=({isOpen:t,onClose:e,initialPatientName:n,fullHistory:a,allPatientNames:i,initialSelectedNames:s,onSelectionChange:o})=>{const[l,c]=v.useState([]),[u,h]=v.useState(""),[p,m]=v.useState(!1),x=v.useRef(null),[b,j]=v.useState(s),w=v.useRef(null),[_,k]=v.useState(!0),[C,A]=v.useState([]),T=()=>{var z;(z=x.current)==null||z.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{if(t){let z=[];try{const K=localStorage.getItem(UA);K&&(z=JSON.parse(K))}catch{}const G=z.length>0?z.filter(K=>i.includes(K)):s;j(G),A(G),i.length>1&&G.length===0?k(!0):(k(!1),setTimeout(()=>{var K;return(K=w.current)==null?void 0:K.focus()},50),setTimeout(()=>{var K;return(K=w.current)==null?void 0:K.focus()},200))}},[t,s,i]),v.useEffect(()=>{if(t&&!_&&l.length===0){const z=b.length>0?b.join(" & "):n||"your";c([{role:"model",text:`Hello! I'm your digital health assistant. I can help answer questions about **${z}**'s medical records. What would you like to know?`}])}},[t,_,n,b]),v.useEffect(()=>{T()},[l,p]);const E=z=>{j(z);try{localStorage.setItem(UA,JSON.stringify(z))}catch{}o==null||o(z)},I=z=>{j(G=>{const K=G.includes(z)?G.filter(Y=>Y!==z):[...G,z];try{localStorage.setItem(UA,JSON.stringify(K))}catch{}return o==null||o(K),K})},$=z=>{A(G=>G.includes(z)?G.filter(K=>K!==z):[...G,z])},U=()=>{E(C),k(!1),c([]),setTimeout(()=>{var z;return(z=w.current)==null?void 0:z.focus()},100)},B=()=>b.length===0?a:a.filter(z=>b.includes(z.patientName)),R=async()=>{if(!u.trim()||p)return;const z=u.trim();h(""),c(G=>[...G,{role:"user",text:z}]),m(!0);try{const G=B(),Y={patientName:b.length>0?b.join(", "):n||"Patient",history:G},q=await eOe(z,Y);c(V=>[...V,{role:"model",text:q}])}catch{c(K=>[...K,{role:"model",text:"I'm sorry, I encountered an error while trying to answer your question. Please try again."}])}finally{m(!1)}};return t?_&&i.length>1?r.jsx("div",{className:"pac-overlay",children:r.jsxs("div",{className:"pac-window pac-selector-window",children:[r.jsx("div",{className:"pac-header",children:r.jsxs("div",{className:"pac-header-top",children:[r.jsxs("div",{className:"pac-title-row",children:[r.jsx("div",{className:"pac-avatar",children:r.jsx(zi,{size:24})}),r.jsxs("div",{className:"pac-title-text",children:[r.jsx("h3",{children:"Who do you want to ask about?"}),r.jsx("p",{className:"pac-subtitle",children:"Select patient(s) or continue with all"})]})]}),r.jsx("button",{onClick:e,className:"pac-close-btn",children:r.jsx(Ot,{size:20})})]})}),r.jsx("div",{className:"pac-selector-body",children:i.map(z=>r.jsxs("button",{className:`pac-patient-card ${C.includes(z)?"selected":""}`,onClick:()=>$(z),children:[r.jsx("div",{className:"pac-patient-icon",children:r.jsx(qn,{size:20})}),r.jsx("span",{className:"pac-patient-name",children:z}),r.jsx("div",{className:`pac-check ${C.includes(z)?"checked":""}`,children:C.includes(z)&&""})]},z))}),r.jsxs("div",{className:"pac-selector-footer",children:[r.jsxs("button",{className:"pac-start-btn secondary",onClick:()=>{A([]),U()},children:[r.jsx(zi,{size:16}),"Ask about all"]}),r.jsxs("button",{className:"pac-start-btn primary",disabled:C.length===0,onClick:U,children:["Continue",r.jsx(UQ,{size:16})]})]})]})}):r.jsx("div",{className:"pac-overlay",children:r.jsxs("div",{className:"pac-window",children:[r.jsxs("div",{className:"pac-header",children:[r.jsxs("div",{className:"pac-header-top",children:[r.jsxs("div",{className:"pac-title-row",children:[r.jsx("div",{className:"pac-avatar",children:r.jsx(Cf,{size:24})}),r.jsxs("div",{className:"pac-title-text",children:[r.jsx("h3",{children:"Ask AI"}),r.jsx("p",{className:"pac-subtitle",children:b.length===0?"All Records":b.join(", ")})]})]}),r.jsx("button",{onClick:e,className:"pac-close-btn",children:r.jsx(Ot,{size:20})})]}),r.jsxs("div",{className:"pac-filters",children:[r.jsx("button",{className:`pac-chip ${b.length===0?"active":""}`,onClick:()=>E([]),children:"All Records"}),i.map(z=>r.jsx("button",{className:`pac-chip ${b.includes(z)?"active":""}`,onClick:()=>I(z),children:z},z))]})]}),r.jsxs("div",{className:"pac-messages",children:[l.map((z,G)=>r.jsx("div",{className:`pac-msg-row ${z.role}`,children:r.jsx("div",{className:`pac-bubble ${z.role} pac-markdown`,children:r.jsx(yd,{remarkPlugins:[xd],components:{ul:({node:K,...Y})=>r.jsx("ul",{...Y}),ol:({node:K,...Y})=>r.jsx("ol",{...Y}),strong:({node:K,...Y})=>r.jsx("strong",{style:{fontWeight:700},...Y})},children:z.text})})},G)),p&&r.jsx("div",{className:"pac-msg-row model",children:r.jsxs("div",{className:"pac-typing",children:[r.jsx("div",{className:"pac-dot"}),r.jsx("div",{className:"pac-dot"}),r.jsx("div",{className:"pac-dot"})]})}),r.jsx("div",{ref:x})]}),r.jsx("div",{className:"pac-input-zone",children:r.jsxs("form",{className:"pac-input-wrapper",onSubmit:z=>{z.preventDefault(),R()},children:[r.jsx("input",{ref:w,type:"text",value:u,onChange:z=>h(z.target.value),placeholder:"Type a message...",className:"pac-input",autoFocus:!0}),r.jsx("button",{type:"submit",disabled:!u.trim()||p,className:"pac-send-btn",children:r.jsx(Lb,{size:18})})]})})]})}):null},nOe=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(()=>{try{const H=localStorage.getItem("pac_selectedPatients");if(H)return JSON.parse(H)}catch{}return[]}),[c,u]=v.useState([]),[h,p]=v.useState(null),[m,x]=v.useState(!1),[b,j]=v.useState(null),[w,_]=v.useState({name:"",age:"",gender:"M"}),[k,C]=v.useState(!1),A=Mt();v.useEffect(()=>{const H=localStorage.getItem("currentUser");if(!H){A("/patient-login");return}p(JSON.parse(H)),(async()=>{try{const L=await ie("/api/auth/patient-history/global");if(L.ok){const te=await L.json();e(te.history||[]),u(te.profiles||[])}else s("Failed to fetch medical records.")}catch(L){console.error("Error fetching patient history:",L),s("A server error occurred. Please try again later.")}finally{a(!1)}})()},[A]);const T=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),A("/patient-login")},E=Array.from(new Set(t.map(H=>H.patientName).filter(Boolean))),I=o.length===0?t:t.filter(H=>o.includes(H.patientName)),$=H=>{l(Q=>{const L=Q.includes(H)?Q.filter(te=>te!==H):[...Q,H];try{localStorage.setItem("pac_selectedPatients",JSON.stringify(L))}catch{}return L})},U=H=>{l(H);try{localStorage.setItem("pac_selectedPatients",JSON.stringify(H))}catch{}},B=(H,Q)=>{var me;H.stopPropagation();const L=c.filter(X=>X.name===Q);if(L.length===0)return;const te=L[0];j({...te,allIds:L.map(X=>X.id)}),_({name:te.name,age:((me=te.age)==null?void 0:me.toString())||"",gender:te.gender||"M"}),x(!0)},R=async H=>{if(H.preventDefault(),!(!b||!b.allIds)){a(!0);try{const Q=b.allIds.map(L=>ie(`/api/auth/patient/${L}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:w.name,age:w.age?parseInt(w.age):null,gender:w.gender})}));if(await Promise.all(Q),u(L=>L.map(te=>b.allIds.includes(te.id)?{...te,name:w.name,age:w.age,gender:w.gender}:te)),e(L=>L.map(te=>b.allIds.includes(te.patientId)?{...te,patientName:w.name}:te)),o.includes(b.name)&&l(L=>L.map(te=>te===b.name?w.name:te)),b.allIds.includes(h==null?void 0:h.id)){const L={...h,name:w.name};p(L),localStorage.setItem("currentUser",JSON.stringify(L))}x(!1)}catch(Q){console.error("Update error:",Q),alert("Failed to update some records. Please try again.")}finally{a(!1)}}},z=I.reduce((H,Q)=>{const L=new Date(Q.date).toISOString().split("T")[0],te=`${Q.clinicId}-${L}`;return H[te]||(H[te]={clinicId:Q.clinicId,clinicName:Q.clinicName,patientName:Q.patientName,date:L,items:[]}),H[te].items.push(Q),H},{}),G=Object.values(z).sort((H,Q)=>new Date(Q.date).getTime()-new Date(H.date).getTime()),K=H=>{const Q={year:"numeric",month:"short",day:"numeric"};return new Date(H).toLocaleDateString(void 0,Q)},Y=H=>{switch(H){case"lab":return r.jsx(Ar,{size:16});case"pharmacy":return r.jsx(oo,{size:16});case"medical":return r.jsx(BI,{size:16});default:return r.jsx(Ug,{size:16})}},q=H=>{if(!H.report_content||!H.tests)return null;try{const Q=JSON.parse(H.report_content||"{}");if(typeof Q=="object"&&Q!==null)return r.jsx("div",{className:"detail-table-container",children:H.tests.map(L=>r.jsxs("div",{className:"test-group",children:[r.jsx("h5",{className:"test-title",children:L.name}),Q[L.id]?r.jsxs("table",{className:"record-detail-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(Q[L.id]).map(([te,me])=>{var Re;const X=(Re=L.default_parameters)==null?void 0:Re.find(Se=>Se.name===te);return r.jsxs("tr",{children:[r.jsx("td",{children:te}),r.jsxs("td",{children:[String(me)," ",(X==null?void 0:X.unit)||""]}),r.jsx("td",{className:"normal-range",children:(X==null?void 0:X.normal_range)||"N/A"})]},te)})})]}):r.jsx("p",{className:"no-data",children:"No results recorded."})]},L.id))})}catch{return r.jsx("div",{className:"raw-content",children:H.report_content})}return null},V=H=>!H.medications||H.medications.length===0?null:r.jsx("div",{className:"detail-table-container",children:r.jsxs("table",{className:"record-detail-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Drug Name"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Dosage"}),r.jsx("th",{children:"Directions"})]})}),r.jsx("tbody",{children:H.medications.map((Q,L)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:Q.name})}),r.jsx("td",{children:Q.loose_quantity||Q.pack_quantity||"-"}),r.jsx("td",{children:Q.tabletsPerDay&&Q.numberOfDays?`${Q.tabletsPerDay} tab/day for ${Q.numberOfDays} days`:"-"}),r.jsx("td",{children:Q.directions_to_use||"-"})]},Q.id||L))})]})});return n?r.jsxs("div",{className:"patient-dashboard-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Loading your medical profile..."})]}):r.jsxs("div",{className:"patient-history-container",children:[r.jsxs("header",{className:"patient-history-header",children:[r.jsxs("div",{className:"header-content",children:[r.jsxs("div",{className:"welcome-section",children:[r.jsxs("h1",{children:["Hello, ",h==null?void 0:h.name]}),r.jsx("p",{className:"welcome-subtitle",children:"Unified Medical Records"})]}),r.jsx("button",{onClick:T,className:"logout-btn",title:"Logout",children:r.jsx(uq,{size:20})})]}),E.length>0&&r.jsx("div",{className:"name-filter-section",children:r.jsxs("div",{className:"name-filter-bar",children:[r.jsx("button",{className:`filter-chip ${o.length===0?"active":""}`,onClick:()=>l([]),children:"All Records"}),E.map(H=>r.jsxs("div",{className:`filter-chip-wrapper ${o.includes(H)?"active":""}`,children:[r.jsx("button",{className:"filter-chip-text",onClick:()=>$(H),children:H}),r.jsx("button",{className:"filter-chip-edit",onClick:Q=>B(Q,H),title:"Edit Profile",children:r.jsx(Ms,{size:12})})]},H)),r.jsxs("button",{className:"filter-chip ai-chip",onClick:()=>{console.log("Ask AI clicked, setting open to true"),C(!0)},children:[r.jsx(Cf,{size:14}),"Ask AI"]})]})})]}),m&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"edit-profile-modal glass-card",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Edit Profile"}),r.jsx("button",{onClick:()=>x(!1),className:"close-btn",children:r.jsx(Ot,{size:20})})]}),r.jsxs("form",{onSubmit:R,className:"edit-profile-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name"}),r.jsx("input",{type:"text",required:!0,value:w.name,onChange:H=>_({...w,name:H.target.value}),className:"modal-input"})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Age"}),r.jsx("input",{type:"number",value:w.age,onChange:H=>_({...w,age:H.target.value}),className:"modal-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Gender"}),r.jsxs("select",{value:w.gender,onChange:H=>_({...w,gender:H.target.value}),className:"modal-input",children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"cancel-btn",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:n,className:"save-btn",children:[r.jsx(qi,{size:16}),n?"Saving...":"Save Changes"]})]})]})]})}),r.jsxs("main",{className:"history-main",children:[i&&r.jsxs("div",{className:"error-card glass-card",children:[r.jsx(zr,{size:20}),r.jsx("p",{children:i})]}),G.length===0&&!i?r.jsxs("div",{className:"empty-state glass-card",children:[r.jsx(BI,{size:40}),r.jsx("h3",{children:"No records found"}),r.jsx("p",{children:"We couldn't find any medical records associated with your phone number."})]}):r.jsx("div",{className:"timeline-container",children:G.map(H=>r.jsxs("div",{className:"visit-card glass-card",children:[r.jsxs("div",{className:"visit-header",children:[r.jsxs("div",{className:"visit-clinic",children:[r.jsx(tO,{size:14}),r.jsxs("span",{children:[H.clinicName," ",H.patientName&&r.jsxs("span",{className:"patient-name-tag",children:["(",H.patientName,")"]})]})]}),r.jsxs("div",{className:"visit-date",children:[r.jsx(qr,{size:14}),r.jsx("span",{children:K(H.date)})]})]}),r.jsx("div",{className:"visit-items",children:H.items.map(Q=>r.jsxs("div",{className:"visit-item",children:[r.jsx("div",{className:`item-icon ${Q.type}-icon`,children:Y(Q.type)}),r.jsxs("div",{className:"item-details",children:[r.jsxs("div",{className:"item-meta",children:[r.jsx("span",{className:"item-type",children:Q.type}),r.jsx("span",{className:"item-time",children:new Date(Q.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.jsx("h4",{className:"item-main-title",children:Q.description||Q.title}),Q.type==="lab"&&q(Q),Q.type==="pharmacy"&&V(Q),Q.type==="medical"&&Q.description&&r.jsx("p",{className:"medical-desc",children:Q.description})]})]},`${Q.type}-${Q.id}`))})]},`${H.clinicId}-${H.date}`))})]}),r.jsx("footer",{className:"patient-footer",children:r.jsx("p",{children:"from Newtons AI"})}),r.jsx(tOe,{isOpen:k,onClose:()=>C(!1),initialPatientName:(h==null?void 0:h.name)||"Patient",fullHistory:t,allPatientNames:E,initialSelectedNames:o,onSelectionChange:U})]})},rOe=()=>{const[t,e]=v.useState(""),[n,a]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(null),[h,p]=v.useState(!1),m=Mt(),x=async b=>{b.preventDefault(),p(!0),u(null);try{const j=await ie("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:t,userName:n,userEmail:i,userPassword:o})}),w=await j.json();if(!j.ok)throw new Error(w.message||`HTTP error! status: ${j.status}`);console.log("Registration successful:",w),m("/login")}catch(j){console.error("Registration failed:",j),u(j.message||"Registration failed. Please try again.")}finally{p(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:t,onChange:b=>e(b.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:n,onChange:b=>a(b.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:i,onChange:b=>s(b.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"userEmail",children:"Email"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:o,onChange:b=>l(b.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"userPassword",children:"Password"})]}),c&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:c})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:h,className:"auth-submit-button",children:h?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(lr,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},aOe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i})=>{const s=Ur(),[o,l]=v.useState(""),c=hG[n]||[],[u,h]=v.useState(500),p=v.useRef(!1),m=v.useCallback(w=>{p.current=!0,w.preventDefault()},[]),x=v.useCallback(()=>{p.current=!1},[]),b=v.useCallback(w=>{if(p.current){const _=window.innerWidth-w.clientX;_>250&&_<window.innerWidth*.8&&h(_)}},[]);v.useEffect(()=>(window.addEventListener("mousemove",b),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",x)}),[b,x]);const j=c.map(w=>({...w,links:w.links.filter(_=>_.name.toLowerCase().includes(o.toLowerCase()))})).filter(w=>w.links.length>0);return r.jsxs("div",{className:`side-panel ${a?"open":""}`,style:{width:`${u}px`,right:a?"0":`-${u}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:m}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(lr,{to:"/dashboard",className:"home-button",onClick:i,children:r.jsx(Qu,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Xu,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:o,onChange:w=>l(w.target.value)})]}),r.jsx("button",{className:"close-button",onClick:i,children:""})]}),r.jsx("nav",{children:j.map((w,_)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:w.title}),r.jsx("ul",{className:"sub-page-list",children:w.links.map(k=>{const C=k.icon;return r.jsx("li",{children:r.jsxs(lr,{to:k.path,className:s.pathname===k.path?"active":"",onClick:i,children:[C&&r.jsx(C,{})," ",k.name]})},k.path)})})]},_))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(dG,{})," Logout"]})]})]})},iOe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i,roleNavigation:s})=>{const o=Ur(),l=s[n]||[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mobile-side-panel-overlay ${a?"open":""}`,onClick:i}),r.jsxs("div",{className:`mobile-side-panel ${a?"open":""}`,children:[r.jsxs("div",{className:"mobile-side-panel-header",children:[r.jsx("h3",{children:"Menu"}),r.jsx("button",{className:"close-button",onClick:i,children:r.jsx(hDe,{})})]}),r.jsx("nav",{children:l.map((c,u)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:c.title}),r.jsx("ul",{className:"sub-page-list",children:c.links.map(h=>{const p=h.icon;return r.jsx("li",{children:r.jsxs(lr,{to:h.path,className:o.pathname===h.path?"active":"",onClick:i,children:[p&&r.jsx(p,{})," ",h.name]})},h.path)})})]},u))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(dG,{})," Logout"]})]})]})]})},Gu={"/dashboard":{label:"Dashboard"},"/dashboard/staff":{label:"Staff Management",parent:"/dashboard"},"/dashboard/staff/add":{label:"Add Staff",parent:"/dashboard/staff"},"/dashboard/staff/edit":{label:"Edit Staff",parent:"/dashboard/staff"},"/dashboard/roles":{label:"Role Management",parent:"/dashboard"},"/dashboard/patients":{label:"All Patients",parent:"/dashboard"},"/dashboard/patients/add":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search-patient":{label:"Search Patient",parent:"/dashboard"},"/dashboard/clinic-hub":{label:"Clinic Hub",parent:"/dashboard"},"/dashboard/reception":{label:"Appointment Queue",parent:"/dashboard"},"/dashboard/pharmacy-queue":{label:"Pharmacy Queue",parent:"/dashboard"},"/dashboard/lab":{label:"Lab Panel",parent:"/dashboard"},"/dashboard/inventory":{label:"Inventory",parent:"/dashboard"},"/dashboard/inventory/add":{label:"Add Drug",parent:"/dashboard/inventory"},"/dashboard/inventory/edit":{label:"Edit Drug",parent:"/dashboard/inventory"},"/dashboard/purchase":{label:"Purchase",parent:"/dashboard"},"/dashboard/distributors":{label:"Distributors",parent:"/dashboard"},"/dashboard/patient-debts":{label:"Patient Debts",parent:"/dashboard"},"/dashboard/add-order":{label:"Add Pharmacy Order",parent:"/dashboard"},"/dashboard/edit-pharmacy-order":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/pharmacy-billing":{label:"Pharmacy Billing",parent:"/dashboard"},"/dashboard/analysis":{label:"Analysis",parent:"/dashboard"},"/dashboard/settings":{label:"Settings",parent:"/dashboard"},"/dashboard/search-patient-records":{label:"Search Records",parent:"/dashboard"},"/dashboard/queue":{label:"Queue",parent:"/dashboard"},"/dashboard/add-patient":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search":{label:"Patient Search",parent:"/dashboard"},"/dashboard/patients/search":{label:"Search Patient",parent:"/dashboard"},"/dashboard/subscriptions":{label:"Subscriptions",parent:"/dashboard"},"/dashboard/subscriptions/add":{label:"Add Plan",parent:"/dashboard/subscriptions"},"/dashboard/subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/subscriptions"},"/dashboard/clinic-subscriptions":{label:"Clinic Subscriptions",parent:"/dashboard"},"/dashboard/clinic-subscriptions/add":{label:"Add Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/clinic-subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/users":{label:"User Management",parent:"/dashboard"},"/dashboard/lab-billing":{label:"Lab Billing",parent:"/dashboard"},"/lab-inventory":{label:"Lab Inventory",parent:"/dashboard"},"/lab/search-report":{label:"Search Lab Report",parent:"/dashboard"},"/create-lab-order":{label:"Create Lab Order",parent:"/dashboard"},"/enter-lab-report":{label:"Enter Lab Report",parent:"/dashboard"},"/view-lab-report":{label:"View Lab Report",parent:"/dashboard"},"/lab/report/:id":{label:"Lab Report",parent:"/lab/search-report"},"/lab/enter-report/:id":{label:"Enter Report",parent:"/lab/search-report"},"/lab/view-report/:id":{label:"View Report",parent:"/lab/search-report"},"/billing":{label:"Billing",parent:"/dashboard"},"/dashboard/doctor-billing":{label:"Doctor Billing",parent:"/dashboard"},"/dashboard/doctor-billing/:id":{label:"Doctor Bill",parent:"/dashboard/doctor-billing"},"/create-custom-bill":{label:"Create Custom Bill",parent:"/dashboard"},"/patient":{label:"Patient",parent:"/dashboard"},"/patient/:id/admission-billing":{label:"Admission Billing",parent:"/manage-admission"},"/patient/:id/admission-bill":{label:"Admission Bill",parent:"/patient/:id/admission-billing"},"/patient/:id/lab-reports":{label:"Lab Reports",parent:"/patient"},"/patient/:id/pharmacy-orders":{label:"Pharmacy Orders",parent:"/patient"},"/patient/:id/complaints":{label:"Past Complaints",parent:"/patient"},"/edit-complaint":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/:id":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/patient/:id":{label:"New Complaint",parent:"/dashboard"},"/start-subscription":{label:"Start Subscription",parent:"/dashboard"},"/start-subscription/:id":{label:"Start Subscription",parent:"/dashboard"},"/manage-admission":{label:"Manage Admission",parent:"/dashboard"},"/dashboard/guide":{label:"User Guide",parent:"/dashboard"},"/custom-tables":{label:"Custom Tables",parent:"/dashboard"},"/custom-tables/:id":{label:"Table Records",parent:"/custom-tables"},"/dashboards":{label:"Dashboards",parent:"/dashboard"},"/dashboards/new":{label:"New Dashboard",parent:"/dashboards"},"/dashboards/:id":{label:"Dashboard View",parent:"/dashboards"},"/dashboards/:id/edit":{label:"Edit Dashboard",parent:"/dashboards"},"/dashboard/pharmacy-billing/:id":{label:"Pharmacy Bill",parent:"/dashboard/pharmacy-billing"},"/dashboard/lab-billing/:id":{label:"Lab Bill",parent:"/dashboard/lab-billing"},"/dashboard/edit-pharmacy-order/:id":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/orders/:id":{label:"Order Details",parent:"/dashboard/add-order"},"/refill-reminders":{label:"Refill Reminders",parent:"/dashboard"},"/start-clinic-subscription":{label:"Start Clinic Subscription",parent:"/dashboard"},"/dashboard/all-patients":{label:"All Patients",parent:"/dashboard"}},MB=t=>t.split("/").map(e=>{const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),a=/^\d+$/.test(e);return n||a?":id":e}).join("/"),sOe=t=>{if(Gu[t])return Gu[t].label;const e=MB(t);if(Gu[e])return Gu[e].label;const n=t.split("/"),a=n[n.length-1],i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a),s=/^\d+$/.test(a);if(i||s){const o=n.slice(0,-1).join("/"),l=MB(o);if(Gu[l])return Gu[l].label;if(Gu[o])return Gu[o].label}return a.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},oOe=()=>{const t=Ur(),e=v.useMemo(()=>{const n=t.pathname.split("/").filter(s=>s!=="");if(n.length===0||n[0]==="login"||n[0]==="registration")return[];const a=[];let i="";return n.forEach((s,o)=>{if(i+=`/${s}`,o===0&&s==="dashboard")a.push({label:"Home",path:"/dashboard",isLast:o===n.length-1});else if(s!=="dashboard"){const l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s),c=/^\d+$/.test(s);let u=sOe(i);(l||c)&&u.replace(/\s/g,"").toLowerCase()===s.replace(/[-_]/g,"").toLowerCase()&&(l?u=`#${s.substring(0,8)}`:c&&(u=`#${s}`)),a.push({label:u,path:i,isLast:o===n.length-1})}}),n[0]!=="dashboard"&&a.length>0&&a.unshift({label:"Home",path:"/dashboard",isLast:!1}),a},[t.pathname]);return e.length===0?null:r.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:r.jsx("ol",{className:"breadcrumb-list",children:e.map((n,a)=>r.jsxs("li",{className:"breadcrumb-item",children:[a>0&&r.jsx(Vl,{className:"breadcrumb-separator",size:14}),n.isLast?r.jsxs("span",{className:"breadcrumb-current","aria-current":"page",children:[a===0&&r.jsx(DP,{size:14,className:"breadcrumb-home-icon"}),n.label]}):r.jsxs(lr,{to:n.path,className:"breadcrumb-link",children:[a===0&&r.jsx(DP,{size:14,className:"breadcrumb-home-icon"}),n.label]})]},n.path))})})},lOe="_container_1bwyv_5",cOe="_visualContainer_1bwyv_33",uOe="_mobileDashboardGrid_1bwyv_49",dOe="_mobileDashboardItem_1bwyv_87",hOe="_mobileDashboardIcon_1bwyv_195",fOe="_mobileDashboardLabel_1bwyv_233",pOe="_brandTitle_1bwyv_331",mOe="_searchBar_1bwyv_387",gOe="_searchIconWrapper_1bwyv_435",yOe="_searchIcon_1bwyv_435",xOe="_placeholderText_1bwyv_459",vOe="_shortcutHint_1bwyv_479",bOe="_key_1bwyv_495",jOe="_plus_1bwyv_519",wOe="_micButtonWrapper_1bwyv_529",NOe="_micIcon_1bwyv_577",SOe="_newlyRegisteredSection_1bwyv_901",_Oe="_recentList_1bwyv_917",COe="_recentPatientPill_1bwyv_931",kOe="_recentNameContainer_1bwyv_957",TOe="_recentInfo_1bwyv_969",AOe="_newlyRegisteredLabel_1bwyv_1007",POe="_recentName_1bwyv_957",EOe="_recentToken_1bwyv_1171",Sr={container:lOe,visualContainer:cOe,mobileDashboardGrid:uOe,mobileDashboardItem:dOe,mobileDashboardIcon:hOe,mobileDashboardLabel:fOe,brandTitle:pOe,searchBar:mOe,searchIconWrapper:gOe,searchIcon:yOe,placeholderText:xOe,shortcutHint:vOe,key:bOe,plus:jOe,micButtonWrapper:wOe,micIcon:NOe,newlyRegisteredSection:SOe,recentList:_Oe,recentPatientPill:COe,recentNameContainer:kOe,recentInfo:TOe,newlyRegisteredLabel:AOe,recentName:POe,recentToken:EOe},DOe=[{label:"Doctor",icon:r.jsx(Af,{size:24}),path:"/dashboard/doctor"},{label:"Labs",icon:r.jsx(Nv,{size:24}),path:"/create-lab-order"},{label:"Clinic",icon:r.jsx(lq,{size:24}),path:"/dashboard/clinic-hub"},{label:"Inventory",icon:r.jsx(oo,{size:24}),path:"/dashboard/inventory"},{label:"Analysis",icon:r.jsx(Nv,{size:24}),path:"/dashboard/analysis"},{label:"Dental",icon:r.jsx(iw,{size:24}),path:"/dashboard/dental"},{label:"New Order",icon:r.jsx(oo,{size:24}),path:"/dashboard/add-order"},{label:"Files",icon:r.jsx(Nv,{size:24}),path:"/dashboard/files"},{label:"Clinic Files",icon:r.jsx(Ar,{size:24}),path:"/dashboard/clinic-files"},{label:"Distributors",icon:r.jsx(rO,{size:24}),path:"/dashboard/distributors"},{label:"Custom Bill",icon:r.jsx(Ar,{size:24}),path:"/create-custom-bill"},{label:"Search Bills",icon:r.jsx(fn,{size:24}),path:"/search-bills"},{label:"Patients",icon:r.jsx(zi,{size:24}),path:"/dashboard/patients"},{label:"Debts",icon:r.jsx(Sv,{size:24}),path:"/dashboard/patient-debts"}],OOe=()=>{const{openCommandBar:t,isOpen:e,setPreFilledQuery:n}=Bc(),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=Mt(),c=b=>{b.stopPropagation(),i(!0)};v.useEffect(()=>{s&&(i(!1),n&&n(s),t(),o(null))},[s,t,n]);const u=ps(),{data:h,isLoading:p}=qN({queryKey:["recentPatients"],queryFn:async()=>{const b=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),j=await ie(`/api/patients?${b.toString()}`);if(!j.ok)throw new Error("Failed to fetch recent patients");return j.json()},staleTime:60*1e3});v.useEffect(()=>{u.prefetchQuery({queryKey:Kt.clinicSettings,queryFn:async()=>{const b=await ie("/api/clinics/settings");if(!b.ok)throw new Error("Failed to fetch clinic settings");return b.json()},staleTime:30*60*1e3}),u.prefetchQuery({queryKey:Kt.drugs.all,queryFn:async()=>{const b=await ie("/api/drugs");if(!b.ok)throw new Error("Failed to fetch drugs");const j=await b.json();return j.drugs||j},staleTime:10*60*1e3}),u.prefetchQuery({queryKey:Kt.labTests.all,queryFn:async()=>{const b=await ie("/api/lab-tests");if(!b.ok)throw new Error("Failed to fetch lab tests");return b.json()},staleTime:10*60*1e3})},[u]);const m=(h==null?void 0:h.patients)||[],x=b=>{b&&(u.prefetchQuery({queryKey:Kt.patients.context(b),queryFn:async()=>{const j=await ie(`/api/patients/${b}/context`);if(!j.ok)throw new Error("Failed to fetch patient context");return j.json()},staleTime:5*60*1e3}),u.prefetchQuery({queryKey:Kt.dental.records(b),queryFn:async()=>{const j=await ie(`/api/dental/patient/${b}`);if(!j.ok)throw new Error("Failed to fetch dental records");return j.json()},staleTime:5*60*1e3}),u.prefetchQuery({queryKey:Kt.patientDebts.balance(b),queryFn:async()=>{const j=await ie(`/api/patient-debts/${b}/balance`);return j.ok?j.json():{netDebt:0}},staleTime:1*60*1e3}),u.prefetchQuery({queryKey:Kt.queue.latest(b),queryFn:async()=>{const j=await ie(`/api/queue/patient/${b}/latest`);if(!j.ok)throw new Error("Failed to fetch latest queue status");const w=await j.json();return w!=null&&w._id&&u.prefetchQuery({queryKey:Kt.queue.entry(w._id),queryFn:async()=>{const _=await ie(`/api/queue/doctor/complaint/${w._id}`);if(!_.ok)throw new Error("Failed to fetch complaint record");return _.json()},staleTime:1*60*1e3}),w},staleTime:5e3}))};return r.jsxs("div",{className:Sr.container,children:[r.jsx("div",{className:Sr.mobileDashboardGrid,children:DOe.map((b,j)=>r.jsxs("div",{className:Sr.mobileDashboardItem,onClick:()=>l(b.path),children:[r.jsx("div",{className:Sr.mobileDashboardIcon,children:b.icon}),r.jsx("span",{className:Sr.mobileDashboardLabel,children:b.label})]},j))}),r.jsxs("div",{className:Sr.visualContainer,children:[r.jsx("h1",{className:Sr.brandTitle,children:"Newtons Ai"}),!e&&r.jsxs("div",{className:Sr.searchBar,onClick:()=>t(),children:[r.jsx("div",{className:Sr.searchIconWrapper,children:r.jsx(fn,{className:Sr.searchIcon})}),r.jsx("span",{className:Sr.placeholderText,children:"Search or Ask AI..."}),r.jsx("div",{className:Sr.micButtonWrapper,onClick:c,children:r.jsx(KN,{className:Sr.micIcon})}),r.jsxs("div",{className:Sr.shortcutHint,children:[r.jsx("span",{className:Sr.key,children:"Ctrl"}),r.jsx("span",{className:Sr.plus,children:"+"}),r.jsx("span",{className:Sr.key,children:"K"})]})]})]}),!e&&(p||m.length>0)&&r.jsxs("div",{className:Sr.newlyRegisteredSection,children:[r.jsx("div",{className:Sr.newlyRegisteredLabel,children:"Newly Registered"}),r.jsx("div",{className:Sr.recentList,children:p?[1,2,3,4,5].map(b=>r.jsxs("div",{className:Sr.recentPatientPill,style:{cursor:"default"},children:[r.jsxs("div",{className:Sr.recentNameContainer,children:[r.jsx(ee,{width:100,height:18}),r.jsx(ee,{width:30,height:20})]}),r.jsx("div",{className:Sr.recentInfo,children:r.jsx(ee,{width:80,height:14})})]},b)):m.map(b=>r.jsxs("div",{className:Sr.recentPatientPill,onClick:()=>l(`/dashboard/edit-complaint/patient/${b.id}`),onMouseEnter:()=>b.id&&x(b.id),children:[r.jsxs("div",{className:Sr.recentNameContainer,children:[r.jsx("span",{className:Sr.recentName,children:b.name||"New Patient"}),r.jsxs("span",{className:Sr.recentToken,children:["#",b.token]})]}),r.jsxs("div",{className:Sr.recentInfo,children:[b.age?`${b.age} yrs`:"",b.age&&b.gender?" / ":"",b.gender||""]})]},b.id))})]}),a&&r.jsx(cS,{onClose:()=>i(!1),patientData:null,tokenNumber:null,onAiSummaryChange:o})]})},HM=({appointments:t=[],date:e,onSelectTime:n,onAppointmentClick:a})=>{const l=v.useMemo(()=>!t||!e?[]:t.filter(p=>{if(!p.createdAt)return!1;try{const m=new Date(p.createdAt),x=new Date(e);return isNaN(m.getTime())||isNaN(x.getTime())?!1:m.getDate()===x.getDate()&&m.getMonth()===x.getMonth()&&m.getFullYear()===x.getFullYear()}catch{return!1}}).map(p=>{const m=new Date(p.createdAt),x=m.getHours(),b=m.getMinutes(),j=(x-9)*60+b,w=12*60;let _=j/w*100;const C=20/w*100;return _<0&&(_=0),_>100&&(_=100),{...p,left:`${_}%`,width:`${C}%`,actualTime:m.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}),[t,e]),c=[];for(let h=9;h<=21;h+=2){const p=(h-9)/12*100;c.push({label:`${h>12?h-12:h} ${h>=12?"PM":"AM"}`,left:`${p}%`})}const u=h=>{if(!n)return;const p=h.currentTarget.getBoundingClientRect(),m=h.clientX-p.left,x=p.width,b=m/x,j=12*60,w=b*j,_=9+Math.floor(w/60),k=Math.floor(w%60),C=new Date(e);C.setHours(_),C.setMinutes(k),C.setSeconds(0),C.setMilliseconds(0),n(C)};return e?r.jsxs("div",{className:"appointment-timeline",children:[r.jsxs("div",{className:"timeline-header",children:[r.jsxs("span",{children:["Schedule for ",e.toLocaleDateString()]}),r.jsx("div",{className:"timeline-legend",children:r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-color occupied"}),r.jsx("span",{children:"Occupied"})]})})]}),r.jsx("div",{className:"timeline-track",onClick:u,style:{cursor:n?"pointer":"default"},children:l.map((h,p)=>{var m,x;return r.jsx("div",{className:"timeline-slot occupied",style:{left:h.left,width:h.width,pointerEvents:a?"auto":"none",cursor:a?"pointer":"default"},title:`${h.actualTime} - ${((m=h.Patient)==null?void 0:m.name)||"Patient"}`,onClick:b=>{a&&(b.stopPropagation(),a(h))},children:r.jsxs("div",{className:"timeline-slot-tooltip",children:[h.actualTime," - ",(x=h.Patient)==null?void 0:x.name," (Token: ",h.token_number||h.token_no,")"]})},h.id||p)})}),r.jsx("div",{className:"timeline-time-labels",children:c.map((h,p)=>r.jsx("div",{className:"time-label",style:{left:h.left},children:h.label},p))})]}):r.jsx("div",{className:"appointment-timeline-placeholder",children:"Invalid Date"})},MOe=async()=>{const t=await ie("/api/staff");if(!t.ok)throw new Error("Failed to fetch staff");const e=await t.json();return e.staff||e||[]};function mG(){return qN({queryKey:[...Kt.staff.list,"doctors"],queryFn:MOe,staleTime:5*60*1e3,select:t=>t.filter(e=>e.role==="doctor"||e.role==="admin")})}const IOe=({isOpen:t,onClose:e,currentDate:n,onTimeSelected:a})=>{const[i,s]=v.useState([]),[o,l]=v.useState(!1);return v.useEffect(()=>{t&&(async()=>{if(n){l(!0);try{const u=n.toISOString(),h=await ie(`/api/queue?date=${u}`);if(h.ok){const p=await h.json();s(p.list||[])}}catch(u){console.error("Error fetching day appointments:",u)}finally{l(!1)}}})()},[t,n]),t?r.jsx("div",{className:"modal-overlay",style:{zIndex:1200},children:r.jsxs("div",{className:"modal-content appointment-modal",style:{maxWidth:"600px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Select Time"}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx(Ot,{size:18})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"time-selection-header",style:{marginBottom:"15px"},children:[r.jsx(WN,{size:16,style:{display:"inline",marginRight:"5px"}}),"Showing appointments for: ",r.jsx("strong",{children:n.toLocaleDateString()})]}),o?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading timeline..."}):r.jsx(HM,{appointments:i,date:n,onSelectTime:c=>{a(c),e()}}),r.jsx("div",{className:"time-selection-footer",style:{marginTop:"15px",fontStyle:"italic"},children:"* Click on any free space in the timeline to select that time."})]})]})}):null},gG=({isOpen:t,onClose:e,onSuccess:n})=>{const a=Mt(),[i,s]=v.useState(""),[o,l]=v.useState([]),[c,u]=v.useState(null),[h,p]=v.useState(new Date),[m,x]=v.useState(""),[b,j]=v.useState(!1),[w,_]=v.useState(!1),[k,C]=v.useState(null),[A,T]=v.useState(!1),{data:E=[],isLoading:I}=mG();v.useEffect(()=>{if(t){s(""),l([]),u(null);const K=new Date;K.setHours(10,0,0,0),p(K),x(""),C(null)}},[t]);const $=Te.useMemo(()=>ql(async K=>{if(K.length<2){l([]),_(!1);return}_(!0);try{const Y=new URLSearchParams({search:encodeURIComponent(K),page:"1",limit:"10"}),q=await ie(`/api/patients?${Y.toString()}`);if(q.ok){const V=await q.json();l(V.patients||[])}}catch(Y){console.error("Error searching patients:",Y)}finally{_(!1)}},300),[]),U=K=>{const Y=K.target.value;s(Y),c&&u(null),Y.length>=2?(_(!0),$(Y)):l([])},B=K=>{u(K),s(K.name),l([])},R=async()=>{if(i.trim()){j(!0);try{const K=await ie("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.trim(),age:null,gender:null,phone:null})});if(!K.ok){const V=await K.json();throw new Error(V.message||"Failed to create patient")}const Y=await K.json(),q={id:Y.id,name:Y.name,phone:Y.phone,age:Y.age,gender:Y.gender,token:Y.token};B(q)}catch(K){console.error("Failed to create patient:",K),C(K.message||"Failed to create patient")}finally{j(!1)}}},z=K=>{const Y=K.target.value;if(!Y)return;const q=new Date(Y),V=h.getHours(),H=h.getMinutes();q.setHours(V,H,0,0),p(q)},G=async()=>{if(!c){C("Please select a patient.");return}j(!0),C(null);try{const K=await ie("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,date:h.toISOString(),doctorId:m||null,description:"Appointment"})});if(K.ok){const Y=await K.json();if(m&&c.subscription_status!=="active"){e(),a(`/dashboard/doctor-billing/${Y.id}?doctorId=${m}`);return}n(),e()}else{const Y=await K.json();throw new Error(Y.message||"Failed to book appointment")}}catch(K){console.error("Error booking appointment:",K),C(K.message||"Failed to book appointment.")}finally{j(!1)}};return t?r.jsxs("div",{className:"modal-overlay",children:[r.jsxs("div",{className:"modal-content appointment-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Book Appointment"}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx(Ot,{size:18})})]}),r.jsxs("div",{className:"modal-body",children:[k&&r.jsx("div",{className:"error-message",children:k}),r.jsxs("div",{className:"form-section",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Search Patient"}),r.jsx("div",{className:"search-input-wrapper",children:c?r.jsxs("div",{className:"modal-input selected-patient-display",children:[r.jsxs("div",{className:"patient-info-display",children:[r.jsx(qn,{size:18,color:"#0ea5e9"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",lineHeight:"1.2"},children:[r.jsx("span",{className:"name",children:c.name}),r.jsxs("span",{className:"details",children:[c.age?`${c.age} yrs`:"",c.gender?`  ${c.gender}`:"",c.phone?`  ${c.phone}`:""]})]})]}),r.jsx("button",{onClick:()=>{u(null),s("")},className:"clear-selection-btn",title:"Clear selection",children:r.jsx(Ot,{size:16})})]}):r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",placeholder:"Name, phone, or patient ID...",value:i,onChange:U,className:"modal-input",autoFocus:!0}),w&&r.jsx("div",{className:"spinner-sm",style:{right:"12px",position:"absolute"}}),(o.length>0||i.length>0&&!w)&&!c&&r.jsxs("div",{className:"search-results-dropdown",children:[i.trim().length>0&&!w&&r.jsx("div",{className:"search-result-item create-patient-item",onClick:R,children:r.jsxs("div",{className:"patient-info",children:[r.jsx("div",{className:"create-icon-wrapper",children:r.jsx(vf,{size:16})}),r.jsxs("div",{children:[r.jsxs("span",{className:"name",style:{color:"#7c3aed"},children:['Create "',i,'"']}),r.jsx("span",{className:"details",style:{color:"#8b5cf6"},children:"Add as new patient"})]})]})}),o.map(K=>r.jsxs("div",{className:"search-result-item",onClick:()=>B(K),children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:K.name}),r.jsxs("span",{className:"details",children:[K.age?`${K.age} yrs`:"",K.gender?`  ${K.gender}`:""]})]}),K.phone&&r.jsx("span",{className:"phone",children:K.phone})]},K.id))]})]})})]}),r.jsxs("div",{className:"form-group-row",style:{display:"flex",gap:"15px"},children:[r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsx("label",{children:"Date"}),r.jsx("div",{className:"date-input-wrapper",children:r.jsx("input",{type:"date",className:"modal-input",value:h.toISOString().split("T")[0],onChange:z})})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsx("label",{children:"Time"}),r.jsxs("div",{className:"time-selector-display modal-input",onClick:()=>T(!0),style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Ug,{size:16,color:"#64748b"}),h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),r.jsx("span",{style:{fontSize:"0.75rem",color:"#3b82f6",fontWeight:500},children:"Change"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Assign Doctor (Optional)"}),r.jsx("div",{className:"doctor-input-wrapper",children:r.jsxs("select",{className:"modal-input",value:m,onChange:K=>x(K.target.value),children:[r.jsx("option",{value:"",children:"Select Doctor..."}),I?r.jsx("option",{disabled:!0,children:"Loading doctors..."}):E.map(K=>r.jsx("option",{value:K.id,children:K.name},K.id))]})})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:G,className:"submit-button",disabled:b||!c,children:b?"Booking...":"Book Appointment"})]})]}),r.jsx(IOe,{isOpen:A,onClose:()=>T(!1),currentDate:h,onTimeSelected:K=>{p(K)}})]}):null},ROe=async t=>{const e=t?`/api/queue?date=${t}`:"/api/queue",n=await ie(e);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()};function yG(t){return qN({queryKey:["queue",t||"today"],queryFn:()=>ROe(t),staleTime:5e3,refetchInterval:7e3,placeholderData:e=>e,refetchOnMount:"always",refetchOnWindowFocus:!0})}function LOe(){const t=ps();return cK({mutationFn:async({queueId:e,status:n,doctorId:a})=>{const i=await ie(`/api/queue/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,doctorId:a})});if(!i.ok)throw new Error("Failed to update queue status");return i.json()},onSuccess:(e,{queueId:n})=>{t.invalidateQueries({queryKey:Kt.queue.today}),t.invalidateQueries({queryKey:Kt.queue.entry(n)})}})}const J1=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},FOe=t=>{if(!t)return"Unknown Date";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},VA=({title:t,icon:e,items:n,renderItemContent:a,isLoading:i,noDataText:s})=>{const o=v.useMemo(()=>{const l={};n.forEach(u=>{if(isNaN(u.date.getTime())){l["Unknown Date"]||(l["Unknown Date"]=[]),l["Unknown Date"].push(u);return}const h=FOe(u.originalDateString);l[h]||(l[h]=[]),l[h].push(u)});const c=Object.keys(l);return c.sort((u,h)=>{if(u==="Unknown Date")return 1;if(h==="Unknown Date")return-1;try{const p=b=>{const j=b.split(" ");if(j.length===3){const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(j[1]);if(_!==-1)return new Date(parseInt(j[2]),_,parseInt(j[0]))}return new Date(b)},m=p(u),x=p(h);if(!isNaN(m.getTime())&&!isNaN(x.getTime()))return x.getTime()-m.getTime()}catch(p){console.error("Error parsing date for sorting:",p)}return h.localeCompare(u)}),c.map(u=>({date:u,items:l[u]}))},[n]);return r.jsxs("div",{className:"dcp-group-card",children:[r.jsxs("h4",{className:"dcp-group-header",children:[e&&r.jsx(e,{size:14,className:"dcp-group-icon"}),t]}),r.jsxs("div",{className:"dcp-group-content",children:[i&&r.jsx("div",{className:"dcp-history-items",children:[1,2].map(l=>r.jsxs("div",{className:"dcp-history-item",style:{border:"none"},children:[r.jsx(ee,{width:"60%",height:16,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"30%",height:12})]},l))}),!i&&n.length===0&&r.jsx("p",{className:"dcp-history-empty",children:s}),!i&&n.length>0&&r.jsx("div",{children:o.map(({date:l,items:c})=>r.jsxs("div",{className:"dcp-date-group",children:[r.jsx("h5",{className:"dcp-date-label",children:l}),r.jsx("div",{className:"dcp-date-items",children:c.map((u,h)=>r.jsx("div",{className:"dcp-history-item",children:a(u)},`${u.type}-${u.originalDateString}-${h}`))})]},l))})]})]})},Z1=()=>{var Ve,De;const{openCommandBar:t}=Bc(),[e,n]=v.useState(new Date),[a,i]=v.useState("list"),[s,o]=v.useState(!1),l=e.toISOString().split("T")[0],{data:c,isLoading:u,refetch:h,isError:p}=yG(l),m=(c==null?void 0:c.list)||[],x=(c==null?void 0:c.summary)||{currentPatient:null,nextPatient:null,waitingCount:0},b=u,[j,w]=v.useState(!1),[_,k]=v.useState(null),C=()=>{h()},[A,T]=v.useState(null),[E,I]=v.useState(null),[$,U]=v.useState(null),[B,R]=v.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[z,G]=v.useState(!1),[K,Y]=v.useState(null),{patientId:q}=Da(),V=Mt(),H=ps(),Q=ue=>{ue&&(H.prefetchQuery({queryKey:Kt.patients.context(ue),queryFn:async()=>{const Ae=await ie(`/api/patients/${ue}/context`);if(!Ae.ok)throw new Error("Failed to fetch patient context");return Ae.json()},staleTime:5*60*1e3}),H.prefetchQuery({queryKey:Kt.patientDebts.balance(ue),queryFn:async()=>{const Ae=await ie(`/api/patient-debts/${ue}/balance`);return Ae.ok?Ae.json():{netDebt:0}},staleTime:1*60*1e3}),H.prefetchQuery({queryKey:Kt.queue.latest(ue),queryFn:async()=>{const Ae=await ie(`/api/queue/patient/${ue}/latest`);if(!Ae.ok)throw new Error("Failed to fetch latest queue status");const ce=await Ae.json();return ce!=null&&ce._id&&H.prefetchQuery({queryKey:Kt.queue.entry(ce._id),queryFn:async()=>{const be=await ie(`/api/queue/doctor/complaint/${ce._id}`);if(!be.ok)throw new Error("Failed to fetch complaint record");return be.json()},staleTime:1*60*1e3}),ce},staleTime:5e3}),H.prefetchQuery({queryKey:Kt.dental.records(ue),queryFn:async()=>{const Ae=await ie(`/api/dental/patient/${ue}`);if(!Ae.ok)throw new Error("Failed to fetch dental records");return Ae.json()},staleTime:5*60*1e3}))},L=v.useCallback(async ue=>{U(null),T(null),I(null),G(!0),Y(null),R({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const Ae=await ie(`/api/patients/${ue}`);if(!Ae.ok)throw new Error(`Patient details fetch failed (${Ae.status})`);const ce=await Ae.json();T(ce);const be=await ie(`/api/queue/patient/${ue}/latest`);if(!be.ok&&be.status!==404)throw new Error(`Queue entry fetch failed (${be.status})`);if(be.ok){const ke=await be.json();I(ke)}await te(ue)}catch(Ae){console.error("Error fetching specific patient data:",Ae),U(Ae.message||"Failed to load patient data."),Y(Ae.message||"Failed to load patient history.")}finally{G(!1)}},[]),te=v.useCallback(async ue=>{G(!0),Y(null);try{const[Ae,ce,be,ke]=await Promise.all([ie(`/api/queue/patient/${ue}/complaints`),ie(`/api/lab/patient/${ue}`),ie(`/api/lab/orders/patient/${ue}?status=pending`),ie(`/api/pharmacy-orders/patient/${ue}`)]),Ce=Ae.ok?await Ae.json():[],ne=ce.ok?await ce.json():[],ye=be.ok?await be.json():[],de=ke.ok?await ke.json():[];R({pastComplaints:Ce||[],labReports:ne||[],pendingLabOrders:ye||[],pharmacyOrders:de||[]})}catch(Ae){console.error("Error fetching patient history:",Ae),Y(Ae.message||"Failed to load patient history."),R({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{G(!1)}},[]);v.useEffect(()=>{q?L(q):(T(null),I(null),h())},[q,L,h]),v.useEffect(()=>{var ue;if(!q&&((ue=x.currentPatient)==null?void 0:ue.status)==="consulting"){const Ae=x.currentPatient._id;Ae&&V(`/dashboard/edit-complaint/${Ae}`)}},[q,x.currentPatient,V]),v.useEffect(()=>{var ue;!q&&((ue=x.currentPatient)!=null&&ue.patientId)?te(x.currentPatient.patientId):!q&&!x.currentPatient&&(R({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),G(!1),Y(null))},[q,(Ve=x.currentPatient)==null?void 0:Ve.patientId,te]);const me=((De=x.currentPatient)==null?void 0:De.patientId)||(q?parseInt(q,10):null),X=v.useMemo(()=>{if(!me||!B.pastComplaints)return[];const ue=B.pastComplaints.map(Ae=>({date:new Date(Ae.createdAt),type:"Complaint",data:Ae,originalDateString:Ae.createdAt})).filter(Ae=>!isNaN(Ae.date.getTime()));return ue.sort((Ae,ce)=>ce.date.getTime()-Ae.date.getTime()),ue},[me,B.pastComplaints]),Re=v.useMemo(()=>{if(!me)return[];const ue=[];return(B.pendingLabOrders??[]).forEach(Ae=>{const ce=new Date(Ae.createdAt);isNaN(ce.getTime())||ue.push({date:ce,type:"Lab Order (Pending)",data:Ae,originalDateString:Ae.createdAt})}),(B.labReports??[]).forEach(Ae=>{const ce=Ae.reportCreatedAt?new Date(Ae.reportCreatedAt):null;ce&&!isNaN(ce.getTime())&&ue.push({date:ce,type:"Lab Report",data:Ae,originalDateString:Ae.reportCreatedAt})}),ue.sort((Ae,ce)=>ce.date.getTime()-Ae.date.getTime()),ue},[me,B.pendingLabOrders,B.labReports]),Se=v.useMemo(()=>{if(!me||!B.pharmacyOrders)return[];const ue=B.pharmacyOrders.map(Ae=>({date:new Date(Ae.date),type:"Pharmacy Order",data:Ae,originalDateString:Ae.date})).filter(Ae=>!isNaN(Ae.date.getTime()));return ue.sort((Ae,ce)=>ce.date.getTime()-Ae.date.getTime()),ue},[me,B.pharmacyOrders]),Ee=async()=>{w(!0),k(null);try{await ie("/api/queue/doctor/next",{method:"POST"}),await h()}catch(ue){console.error("Error calling next patient:",ue),k(ue.message||"Failed to call next patient.")}finally{w(!1)}},Fe=ue=>{switch(ue){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return ue}},[le,_e]=v.useState("info");return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dcp-container",children:[r.jsxs("div",{className:"dcp-header-row",children:[r.jsx("button",{onClick:()=>V(-1),className:"dcp-back-btn",children:r.jsx(en,{size:20})}),r.jsx("h1",{className:"dcp-title",children:"Doctor Consultation Panel"})]}),q?r.jsxs(r.Fragment,{children:[$&&r.jsx("div",{className:"dcp-error",children:$}),A&&r.jsx("div",{className:"dcp-card dcp-card-violet",children:r.jsxs("div",{className:"dcp-card-content",children:[r.jsxs("div",{className:"dcp-mobile-tabs",children:[r.jsx("button",{className:`dcp-mobile-tab ${le==="info"?"active":""}`,onClick:()=>_e("info"),children:"Patient Record"}),r.jsx("button",{className:`dcp-mobile-tab ${le==="history"?"active":""}`,onClick:()=>_e("history"),children:"History"})]}),r.jsxs("div",{className:"dcp-flex-split",children:[r.jsxs("div",{className:`dcp-flex-half dcp-tab-info ${le==="info"?"":"hidden"}`,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("div",{className:"dcp-section-header dcp-section-header-violet",children:"Patient Record"}),r.jsxs("button",{onClick:()=>V("/dashboard/doctor"),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem"},children:[r.jsx(en,{size:12})," Back to Queue"]}),r.jsxs("button",{onClick:()=>V(`/dashboard/patients/${q}/bills`),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem",marginLeft:"10px"},children:[r.jsx(Ar,{size:12})," View Bills"]})]}),r.jsx("div",{className:"dcp-patient-name dcp-patient-name-gradient",children:A.name}),r.jsxs("div",{className:"dcp-patient-meta",style:{marginBottom:"12px"},children:[r.jsxs("span",{className:"dcp-patient-badge",children:[A.age||"N/A"," Yrs"]}),r.jsx("span",{className:"dcp-patient-badge",children:A.gender||"N/A"})]}),r.jsxs("div",{className:"dcp-activity-box",children:[r.jsx("div",{className:"dcp-activity-label",children:"Latest Activity"}),E?r.jsxs("div",{children:[r.jsxs("div",{className:"dcp-activity-content",children:[r.jsx("strong",{children:"Complaint:"})," ",E.complaint||r.jsx("span",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"None"})]}),r.jsxs("div",{style:{marginTop:"8px"},children:[r.jsx("span",{className:`dcp-status ${E.status==="consulting"?"dcp-status-consulting":E.status==="seen"?"dcp-status-seen":E.status==="waiting"?"dcp-status-waiting":""}`,children:Fe(E.status)}),E.status==="consulting"&&E._id&&r.jsx("button",{onClick:()=>V(`/dashboard/edit-complaint/${E._id}`),onMouseEnter:()=>Q(String(A.id)),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px",padding:"4px 12px"},children:"Resume"})]}),_&&r.jsx("div",{className:"dcp-error-card",style:{marginBottom:"16px"},children:_}),E.case_summary&&r.jsxs("div",{className:"dcp-ai-summary",style:{marginTop:"10px"},children:[r.jsx("div",{className:"dcp-ai-label",children:" AI Summary"}),r.jsx("p",{className:"dcp-ai-text",children:E.case_summary})]})]}):r.jsx("p",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"No queue entry found for this patient today."})]})]}),r.jsxs("div",{className:`dcp-flex-half dcp-history-section dcp-tab-history ${le==="history"?"":"hidden"} dcp-desktop-only`,children:[r.jsxs("div",{className:"dcp-history-header",children:[r.jsx("span",{className:"dcp-history-title",children:"Patient History"}),z&&r.jsx(ee,{width:60,height:14})]}),K&&r.jsx("div",{className:"dcp-error",children:K}),r.jsxs("div",{className:"dcp-history-scroll dcp-scrollbar",children:[r.jsx(VA,{title:"Past Complaints",icon:Ar,items:X,isLoading:z,noDataText:"No past complaints.",renderItemContent:ue=>r.jsxs("div",{children:[ue.data.complaint,r.jsx("div",{className:"dcp-history-timestamp",children:J1(ue.originalDateString)})]})}),r.jsx(VA,{title:"Lab Reports",icon:hs,items:Re,isLoading:z,noDataText:"No lab history.",renderItemContent:ue=>ue.type==="Lab Order (Pending)"?r.jsxs("div",{children:[r.jsx("span",{className:"dcp-type-pending",children:"Pending Order"}),r.jsx("div",{children:ue.data.tests.map(Ae=>Ae.name).join(", ")}),r.jsx("div",{className:"dcp-history-timestamp",children:J1(ue.originalDateString)})]}):r.jsxs("div",{children:[r.jsxs("span",{className:"dcp-type-report",children:["Report: ",ue.data.testName]}),r.jsxs("div",{style:{fontStyle:"italic"},children:['"',ue.data.reportFindings.substring(0,50),ue.data.reportFindings.length>50?"...":"",'"']}),r.jsx("div",{className:"dcp-history-timestamp",children:J1(ue.originalDateString)})]})}),r.jsx(VA,{title:"Medications",icon:md,items:Se,isLoading:z,noDataText:"No pharmacy history.",renderItemContent:ue=>r.jsxs("div",{children:[ue.data.medications.map(Ae=>`${Ae.name} (${Ae.pack_quantity||0}p ${Ae.loose_quantity||0}l)`).join(", "),r.jsxs("div",{className:"dcp-history-timestamp",children:[J1(ue.originalDateString),"  ",r.jsx("span",{style:{textTransform:"capitalize"},children:ue.data.status})]})]})}),X.length===0&&Re.length===0&&Se.length===0&&!z&&r.jsx("div",{className:"dcp-empty-state",children:"No history records found."})]})]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[p&&r.jsx("div",{className:"dcp-error",children:"Failed to fetch queue data."}),b&&!x.currentPatient?r.jsxs("div",{className:"dcp-card",style:{padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx(ee,{width:"40%",height:32}),r.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx(ee,{width:"60%",height:24}),r.jsx(ee,{width:"40%",height:16,style:{marginTop:"8px"}})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsx(ee,{width:"100%",height:80,style:{borderRadius:"12px"}})}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[r.jsx(ee,{width:180,height:40}),r.jsx(ee,{width:120,height:40})]})]}):r.jsx("div",{className:"dcp-empty-state",children:x.currentPatient?"Redirecting to consultation...":"No patient currently being seen. Use 'Call Next' or search for a patient record."})]}),r.jsxs("div",{className:"dcp-scheduler-section",children:[r.jsx("div",{className:"queue-header",children:r.jsx("div",{className:"queue-actions",children:r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${a==="list"?"active":""}`,onClick:()=>i("list"),title:"List View",children:r.jsx(iq,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${a==="timeline"?"active":""}`,onClick:()=>i("timeline"),title:"Timeline View",children:r.jsx(WN,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(qr,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:e.toISOString().split("T")[0],onChange:ue=>n(new Date(ue.target.value))})]}),r.jsxs("button",{onClick:()=>o(!0),className:"appointment-button",children:[r.jsx(Ug,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]}),r.jsx("button",{onClick:()=>t(),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px"},children:"Search Patient"})]})})}),r.jsx(gG,{isOpen:s,onClose:()=>{o(!1),h()},onSuccess:C}),u&&m.length===0?r.jsx("div",{style:{padding:"20px"},children:r.jsx(ee,{width:"100%",height:200})}):a==="timeline"?r.jsx(HM,{appointments:m,date:e,onAppointmentClick:ue=>V(`/dashboard/edit-complaint/${ue.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Details"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:m.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"20px"},children:"No appointments for this date."})}):m.map(ue=>{var Ae,ce,be;return r.jsxs("tr",{onClick:()=>V(`/dashboard/edit-complaint/${ue.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:["#",ue.token_no]}),r.jsx("td",{children:r.jsx("div",{className:"patient-info",children:r.jsx("span",{className:"name",children:(Ae=ue.Patient)==null?void 0:Ae.name})})}),r.jsxs("td",{className:"hidden-mobile",children:[(ce=ue.Patient)==null?void 0:ce.age,"y, ",(be=ue.Patient)==null?void 0:be.gender,"  ",ue.complaint||"-"]}),r.jsx("td",{children:r.jsx("span",{className:`dcp-status ${ue.status==="waiting"?"dcp-status-waiting":ue.status==="consulting"?"dcp-status-consulting":ue.status==="seen"?"dcp-status-seen":""}`,children:Fe(ue.status)})}),r.jsx("td",{children:r.jsx("button",{className:"dcp-btn dcp-btn-outline",style:{padding:"4px 8px",fontSize:"0.75rem"},children:"View"})})]},ue.id)})})]})})]}),r.jsxs("div",{className:"dcp-bottom-bar",children:[r.jsx("button",{onClick:Ee,disabled:j||b||!x.nextPatient||!!x.currentPatient,className:"dcp-btn dcp-btn-teal",children:"Call Next Patient"}),r.jsxs("div",{className:"dcp-waiting-count",children:[x.waitingCount," patients waiting"]})]})]})]})})},wv=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,u]=v.useState(!1),[h,p]=v.useState(null),m=v.useRef(null),[x,b]=v.useState(!1),[j,w]=v.useState(!1),[_,k]=v.useState(null),[C,A]=v.useState(null),[T,E]=v.useState([]),[I,$]=v.useState(!0),[U,B]=v.useState(!1);Od();const R=Mt(),z=Ur(),G=CO({settings:{},staffList:[]}),K=ps(),Y=ue=>{ue&&(K.prefetchQuery({queryKey:Kt.patients.context(ue),queryFn:async()=>{const Ae=await ie(`/api/patients/${ue}/context`);if(!Ae.ok)throw new Error("Failed to fetch patient context");return Ae.json()},staleTime:5*60*1e3}),K.prefetchQuery({queryKey:Kt.patientDebts.balance(ue),queryFn:async()=>{const Ae=await ie(`/api/patient-debts/${ue}/balance`);return Ae.ok?Ae.json():{netDebt:0}},staleTime:1*60*1e3}),K.prefetchQuery({queryKey:Kt.queue.latest(ue),queryFn:async()=>{const Ae=await ie(`/api/queue/patient/${ue}/latest`);if(!Ae.ok)throw new Error("Failed to fetch latest queue status");const ce=await Ae.json();return ce!=null&&ce._id&&K.prefetchQuery({queryKey:Kt.queue.entry(ce._id),queryFn:async()=>{const be=await ie(`/api/queue/doctor/complaint/${ce._id}`);if(!be.ok)throw new Error("Failed to fetch complaint record");return be.json()},staleTime:1*60*1e3}),ce},staleTime:5e3}),K.prefetchQuery({queryKey:Kt.dental.records(ue),queryFn:async()=>{const Ae=await ie(`/api/dental/patient/${ue}`);if(!Ae.ok)throw new Error("Failed to fetch dental records");return Ae.json()},staleTime:5*60*1e3}))},q=v.useMemo(()=>ql(ue=>Y(ue),500),[]);v.useEffect(()=>()=>{q.cancel()},[q]);const{selectedImage:V,handleImageSelect:H,clearImage:Q}=G,L=v.useRef(null),te=ue=>{var ce;const Ae=(ce=ue.target.files)==null?void 0:ce[0];Ae&&H(Ae)};v.useEffect(()=>{G.chatHistory.length>0&&U&&G.isProcessing},[G.chatHistory.length]),v.useEffect(()=>{(async()=>{$(!0);try{const Ae=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),ce=await ie(`/api/patients?${Ae.toString()}`);if(ce.ok){const be=await ce.json();E(be.patients||[])}}catch(Ae){console.error("Error fetching recent patients:",Ae)}finally{$(!1)}})()},[]),v.useEffect(()=>{G.setChatQuery(t)},[t]);const me=v.useCallback(async ue=>{if(!(ue||t).trim()){p("Please enter complaint details.");return}u(!0),p(null),ue&&ue!==G.chatQuery&&G.setChatQuery(ue);try{G.handleSendMessage(),e("")}catch(ce){console.error("AI Error:",ce),p("AI failed to process. Try again."),u(!1)}},[t,G]);v.useEffect(()=>{!G.isProcessing&&c&&u(!1)},[G.isProcessing,c]),v.useEffect(()=>{const ue=m.current;ue&&(ue.style.height="auto",ue.style.height=`${ue.scrollHeight}px`);const ce=new URLSearchParams(z.search).get("caseDetails");if(ce){const be=decodeURIComponent(ce);be!==t&&(e(be),b(!0))}},[z.search,t]),v.useEffect(()=>{x&&t.trim()&&(R(z.pathname,{replace:!0}),me(t),b(!1))},[x,t,me,R,z.pathname]),v.useEffect(()=>{const ue=m.current;ue&&(ue.style.height="auto",ue.style.height=`${ue.scrollHeight}px`)},[t]),v.useEffect(()=>{_&&(e(_),w(!1),G.setChatQuery(_),setTimeout(()=>G.handleSendMessage(),0),k(null))},[_,G]);const X=()=>{A({id:null,token:null,name:"New Case",age:null,gender:null}),w(!0)},Re=v.useMemo(()=>ql(async ue=>{const Ae=ue.trim(),ce=/^\d+$/.test(Ae),be=Ae.split(/\s+/).length;if(Ae.length<2||ce&&Ae.length>10||!ce&&be>2){a([]),s(!1),l(null);return}s(!0),l(null);try{const ke=new URLSearchParams({search:encodeURIComponent(ue),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),Ce=await ie(`/api/patients?${ke.toString()}`);if(!Ce.ok){const ye=await Ce.text();throw new Error(`API Error (${Ce.status}): ${ye||Ce.statusText}`)}const ne=await Ce.json();a(ne.patients)}catch(ke){console.error("Error searching patients:",ke),l(ke.message||"Failed to search patients."),a([])}finally{s(!1)}},300),[]),Se=ue=>{const Ae=ue.target.value;e(Ae);const ce=Ae.trim(),be=/^\d+$/.test(ce),ke=ce.split(/\s+/).length;ce.length>=2&&!(be&&ce.length>10||!be&&ke>2)?s(!0):(s(!1),a([])),Re(Ae)},Ee=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),t.trim()&&!i&&De())},Fe=async ue=>{ue&&ue.id&&R(`/dashboard/edit-complaint/patient/${ue.id}`)},le=[{icon:"",title:"Example: Fever & Cold",description:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough",text:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough"},{icon:"",title:"Example: Stomach Ache",description:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days",text:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days"}],_e=ue=>{e(ue),setTimeout(()=>{G.handleSendMessage(ue),e(""),a([])},50)},Ve=()=>{e(""),a([]),G.refreshChat()},De=()=>{!t.trim()&&!V||(Re.cancel(),G.handleSendMessage(t),e(""),a([]))};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsx("button",{onClick:()=>R("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"}),r.jsx("button",{onClick:()=>R(-1),className:"patient-search-button patient-search-button-back",children:r.jsx(en,{size:16})})]}),r.jsxs("div",{className:"patient-search-content-box",children:[o&&r.jsx("p",{className:"patient-search-error",children:o}),h&&r.jsx("p",{className:"patient-search-error",children:h}),I?r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:[1,2,3,4,5].map(ue=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(ee,{width:100,height:18}),r.jsx(ee,{width:30,height:14})]}),r.jsx("div",{className:"recent-info",children:r.jsx(ee,{width:60,height:12})})]},ue))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}):T.length>0&&r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:T.map(ue=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>Fe(ue),onMouseEnter:()=>ue.id&&q(ue.id),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:ue.name||"New Patient"}),r.jsxs("span",{className:"recent-token",children:["#",ue.token]})]}),r.jsxs("div",{className:"recent-info",children:[ue.age," yrs / ",ue.gender]})]},ue.id))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}),G.chatHistory.length===0&&n.length===0&&r.jsxs("div",{className:"example-cases-section",children:[r.jsxs("div",{className:"example-cases-header",children:[r.jsx("span",{className:"sparkles-icon",children:""}),r.jsx("h3",{children:"Try AI with Example Cases"})]}),r.jsx("div",{className:"example-cards-container",children:le.map((ue,Ae)=>r.jsxs("div",{className:"example-case-card",onClick:()=>_e(ue.text),children:[r.jsx("div",{className:"example-icon",children:ue.icon}),r.jsxs("div",{className:"example-content",children:[r.jsx("div",{className:"example-title",children:ue.title}),r.jsx("div",{className:"example-description",children:ue.description})]})]},Ae))})]})]}),G.chatHistory.length>0&&!c&&r.jsxs("div",{className:`ai-chat-overlay ${U?"minimized":""}`,children:[r.jsxs("div",{className:"ai-chat-header",children:[r.jsx("span",{children:"AI Assistant"}),r.jsx("div",{className:"ai-chat-controls",children:r.jsx("button",{className:"icon-btn",onClick:()=>Ve(),title:"Clear Chat",children:r.jsx(Ot,{size:16})})})]}),r.jsxs("div",{className:"ai-chat-messages",children:[G.chatHistory.map((ue,Ae)=>r.jsx("div",{className:`chat-bubble ${ue.role==="model"?"model":"user"}`,children:ue.role==="system"?r.jsx("i",{children:ue.text}):ue.text},Ae)),G.isProcessing&&r.jsx("div",{className:"chat-bubble model",children:"Typing..."})]})]}),n.length>0&&!c&&r.jsxs("div",{className:"patient-search-results-overlay",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"#64748b"},children:"Found Patients"}),r.jsx("button",{onClick:()=>a([]),style:{border:"none",background:"transparent",color:"#94a3b8",cursor:"pointer"},children:r.jsx(Ot,{size:14})})]}),n.map(ue=>r.jsxs("div",{onClick:()=>Fe(ue),onMouseEnter:()=>ue.id&&q(ue.id),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",ue.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:ue.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[ue.age?`${ue.age} yrs`:"",ue.age&&ue.gender?" / ":"",ue.gender||"N/A"]})]},ue.id))]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[r.jsxs("div",{className:"cmd-input-container",children:[V&&r.jsxs("div",{className:"cmd-image-preview",children:[r.jsx("img",{src:V,alt:"Selected"}),r.jsx("button",{className:"cmd-image-delete",onClick:Q,children:r.jsx(Ot,{size:12})})]}),r.jsx("textarea",{ref:m,placeholder:"Search (Name/Token/Phone), Ask AI, or Enter New Case...",value:t,onChange:Se,onKeyDown:Ee,className:"cmd-input",disabled:c||G.isProcessing,rows:1}),r.jsxs("div",{className:"cmd-controls-group",children:[r.jsx("input",{type:"file",ref:L,onChange:te,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:"cmd-icon-btn",onClick:()=>{var ue;return(ue=L.current)==null?void 0:ue.click()},title:"Attach Image",children:r.jsx(nO,{})}),r.jsx("button",{className:"cmd-icon-btn",onClick:X,title:"Voice Input",children:r.jsx(KN,{})}),(t.length>0||V)&&r.jsx("button",{className:"cmd-icon-btn send-btn",onClick:De,title:"Send",children:r.jsx(Lb,{})})]})]}),j&&r.jsx(cS,{onClose:()=>w(!1),patientData:C,tokenNumber:null,onAiSummaryChange:k})]})]})},GM=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(!1),c=Mt(),u=v.useRef(null);v.useEffect(()=>{const C=A=>{u.current&&!u.current.contains(A.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const h=v.useCallback(E9.debounce(async C=>{if(C.trim().length<2){a([]),s(!1);return}s(!0);try{const A=new URLSearchParams({search:encodeURIComponent(C),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),T=await ie(`/api/patients?${A.toString()}`);if(!T.ok)throw new Error("Failed to fetch patients");const E=await T.json();a(E.patients)}catch{a([])}finally{s(!1)}},400),[]);v.useEffect(()=>(t?(s(!0),h(t)):(a([]),h.cancel(),s(!1)),()=>h.cancel()),[t,h]);const p=C=>{c(`/patient/${encodeURIComponent(C.id)}/admission-billing`)},m=()=>{e(""),a([]),l(!1)},x=C=>C.slice(0,1).toUpperCase(),[b,j]=v.useState(!1),[w,_]=v.useState(!1),k=async()=>{_(!0);try{const C=await ie("/api/patients/discharge-all",{method:"POST"}),A=await C.json();C.ok?(alert(A.message),a([]),e("")):alert(A.message||"Failed to discharge patients")}catch(C){console.error("Bulk discharge error:",C),alert("An error occurred while processing bulk discharge.")}finally{_(!1),j(!1)}};return r.jsxs("div",{className:"ma-container",children:[r.jsxs("div",{className:"ma-header-section",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ma-title",children:"Manage Admission"}),r.jsx("p",{className:"ma-subtitle",children:"Search for a patient to admit, discharge, or view billing details"})]}),r.jsx("button",{className:"ma-discharge-all-btn",onClick:()=>j(!0),children:"Discharge Everyone"})]}),b&&r.jsx("div",{className:"ma-modal-overlay",children:r.jsxs("div",{className:"ma-modal-content",children:[r.jsx("h3",{children:"Confirm Bulk Discharge"}),r.jsxs("p",{children:["Are you sure you want to discharge ",r.jsx("strong",{children:"ALL"})," currently admitted patients?"]}),r.jsx("div",{className:"ma-modal-warning",children:r.jsx("p",{children:" This will finalize bills for all admitted patients."})}),r.jsxs("div",{className:"ma-modal-actions",children:[r.jsx("button",{className:"ma-modal-cancel",onClick:()=>j(!1),disabled:w,children:"Cancel"}),r.jsx("button",{className:"ma-modal-confirm",onClick:k,disabled:w,children:w?"Processing...":"Yes, Discharge All"})]})]})}),r.jsxs("div",{className:"ma-search-wrapper",ref:u,children:[i?r.jsxs("div",{className:"ma-loading-spinner",children:[r.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]}):r.jsx(fn,{className:"ma-search-icon",size:20}),r.jsx("input",{type:"text",value:t,onChange:C=>{e(C.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search by Name, Phone, or Token...",className:"ma-search-input",autoFocus:!0}),t&&r.jsx("div",{className:"ma-clear-icon",onClick:m,children:r.jsx(Ot,{size:18})}),r.jsxs("div",{className:`ma-results-dropdown ${o&&(n.length>0||i)?"open":""}`,children:[n.map(C=>{const A=C.admission_date&&!C.discharge_date;return r.jsxs("div",{onClick:()=>p(C),className:"ma-result-item",children:[r.jsxs("div",{className:"ma-patient-info",children:[r.jsx("div",{className:"ma-avatar",children:x(C.name)}),r.jsxs("div",{className:"ma-patient-text",children:[r.jsxs("h4",{children:[C.name,r.jsxs("span",{className:"ma-patient-token",children:["#",C.token]})]}),r.jsxs("p",{className:"ma-patient-subtext",children:[C.phone||"No phone","  ",C.age?`${C.age} Y`:"","  ",C.gender||""]})]})]}),r.jsx("div",{className:`ma-badge ${A?"ma-badge-admitted":"ma-badge-discharged"}`,children:A?"ADMITTED":"NOT ADMITTED"})]},C.id)}),t.length>2&&!i&&n.length===0&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:['No patients found matching "',t,'"']})]})]})]})},IB=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Yes/No"},{value:"computed",label:"Computed (Formula)"}],WM=({isOpen:t,onClose:e,entityType:n,entityLabel:a,currentConfig:i,onConfigUpdated:s})=>{const[o,l]=v.useState([]),[c,u]=v.useState(!1),[h,p]=v.useState(null),[m,x]=v.useState({key:"",label:"",type:"text",required:!1,formula:""});v.useEffect(()=>{t&&(l(i[n]||[]),p(null),x({key:"",label:"",type:"text",required:!1,formula:""}))},[t,i,n]);const b=k=>k.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),j=()=>{var C;if(!m.label.trim()){p("Column label is required");return}if(m.type==="computed"&&!((C=m.formula)!=null&&C.trim())){p("Formula is required for computed columns");return}const k=b(m.label);if(o.some(A=>A.key===k)){p("A column with this name already exists");return}l([...o,{...m,key:k}]),x({key:"",label:"",type:"text",required:!1,formula:""}),p(null)},w=k=>{l(o.filter(C=>C.key!==k))},_=async()=>{u(!0),p(null);try{const k={...i,[n]:o};if(!(await ie("/api/clinics/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_columns_config:k})})).ok)throw new Error("Failed to save custom columns");s(k),e()}catch(k){p(k.message||"Failed to save")}finally{u(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content manage-columns-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsxs("h2",{children:["Manage Custom Columns - ",a]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Ot,{size:18})})]}),h&&r.jsx("div",{className:"error-message",children:h}),r.jsxs("div",{className:"columns-list",children:[r.jsx("h4",{children:"Current Custom Columns"}),o.length===0?r.jsx("p",{className:"no-columns",children:"No custom columns defined yet."}):r.jsx("div",{style:{overflowX:"auto",borderRadius:"6px",border:"1px solid var(--border-color, #e5e7eb)"},children:r.jsxs("table",{className:"columns-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Label"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Details"}),r.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),r.jsx("tbody",{children:o.map(k=>{var C;return r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:500},children:k.label}),r.jsx("td",{children:((C=IB.find(A=>A.value===k.type))==null?void 0:C.label)||k.type}),r.jsx("td",{children:k.type==="computed"?r.jsx("code",{className:"computed-formula",children:k.formula}):r.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:k.required?"Required":"Optional"})}),r.jsx("td",{style:{textAlign:"center"},children:r.jsx("button",{onClick:()=>w(k.key),className:"remove-column-btn",title:"Remove Column",style:{padding:"0.2rem"},children:r.jsx(zn,{size:14})})})]},k.key)})})]})})]}),r.jsxs("div",{className:"add-column-section",children:[r.jsx("h4",{children:"Add New Column"}),r.jsxs("div",{className:"add-column-form",children:[r.jsx("input",{type:"text",placeholder:"Label (e.g., BMI)",value:m.label,onChange:k=>x({...m,label:k.target.value}),className:"column-input",style:{flex:1.5}}),r.jsx("select",{value:m.type,onChange:k=>x({...m,type:k.target.value}),className:"column-select",children:IB.map(k=>r.jsx("option",{value:k.value,children:k.label},k.value))}),m.type==="computed"?r.jsx("input",{type:"text",placeholder:"Formula (e.g. weight / (height * height))",value:m.formula||"",onChange:k=>x({...m,formula:k.target.value}),className:"column-input",style:{flex:2}}):r.jsxs("label",{className:"required-checkbox",children:[r.jsx("input",{type:"checkbox",checked:m.required,onChange:k=>x({...m,required:k.target.checked})}),r.jsx("span",{style:{fontSize:"0.8rem"},children:"Required"})]}),r.jsxs("button",{onClick:j,className:"add-column-btn",children:[r.jsx(Ln,{size:14})," Add"]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:e,className:"cancel-btn",disabled:c,children:"Cancel"}),r.jsxs("button",{onClick:_,className:"save-btn",disabled:c,children:[r.jsx(qi,{size:16})," ",c?"Saving...":"Save Changes"]})]})]})}):null},HA=15,DD=()=>{const t=Mt(),{customColumnsConfig:e,refetch:n}=uS(),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(!0),[u,h]=v.useState(null),[p,m]=v.useState(""),[x,b]=v.useState(1),[j,w]=v.useState(1),[_,k]=v.useState(0),[C,A]=v.useState("created_at"),T=ps(),E=ne=>{ne&&(T.prefetchQuery({queryKey:Kt.patients.context(ne),queryFn:async()=>{const ye=await ie(`/api/patients/${ne}/context`);if(!ye.ok)throw new Error("Failed to fetch patient context");return ye.json()},staleTime:5*60*1e3}),T.prefetchQuery({queryKey:Kt.patientDebts.balance(ne),queryFn:async()=>{const ye=await ie(`/api/patient-debts/${ne}/balance`);return ye.ok?ye.json():{netDebt:0}},staleTime:1*60*1e3}),T.prefetchQuery({queryKey:Kt.queue.latest(ne),queryFn:async()=>{const ye=await ie(`/api/queue/patient/${ne}/latest`);if(!ye.ok)throw new Error("Failed to fetch latest queue status");const de=await ye.json();return de!=null&&de._id&&T.prefetchQuery({queryKey:Kt.queue.entry(de._id),queryFn:async()=>{const se=await ie(`/api/queue/doctor/complaint/${de._id}`);if(!se.ok)throw new Error("Failed to fetch complaint record");return se.json()},staleTime:1*60*1e3}),de},staleTime:5e3}),T.prefetchQuery({queryKey:Kt.dental.records(ne),queryFn:async()=>{const ye=await ie(`/api/dental/patient/${ne}`);if(!ye.ok)throw new Error("Failed to fetch dental records");return ye.json()},staleTime:5*60*1e3}))},I=v.useMemo(()=>FO(ne=>E(ne),500),[]);v.useEffect(()=>()=>{I.cancel()},[I]);const[$,U]=v.useState("desc"),[B,R]=v.useState(""),[z,G]=v.useState(!1),[K,Y]=v.useState(null),[q,V]=v.useState([]),[H,Q]=v.useState(""),[L,te]=v.useState(!1),[me,X]=v.useState(null),[Re,Se]=v.useState(!0),[Ee,Fe]=v.useState(null),[le,_e]=v.useState(p);Od(),v.useEffect(()=>{const ne=setTimeout(()=>{_e(p),b(1)},500);return()=>{clearTimeout(ne)}},[p]);const Ve=v.useCallback(async()=>{Se(!0),Fe(null);try{const ne=await ie("/api/subscriptions");if(!ne.ok){let de=`Failed to fetch subscription plans (${ne.status})`;try{de=(await ne.json()).message||de}catch{}throw new Error(de)}const ye=await ne.json();V(ye)}catch(ne){console.error("Error fetching subscription plans:",ne),Fe(ne.message||"An unknown error occurred while fetching plans."),V([])}finally{Se(!1)}},[]),De=v.useCallback(async(ne,ye,de,se,re)=>{c(!0),h(null);try{const oe=new URLSearchParams({page:ne.toString(),limit:HA.toString(),sortBy:de,sortOrder:se});ye&&oe.append("search",ye),re&&oe.append("gender",re);const je=await ie(`/api/patients?${oe.toString()}`);if(!je.ok){const J=await je.json();throw new Error(J.message||"Failed to fetch patients")}const Oe=await je.json();o(Oe.patients),k(Oe.totalCount),b(Oe.currentPage),w(Oe.totalPages)}catch(oe){console.error("Error fetching patients:",oe),h(`Failed to load patients: ${oe.message}`),o([]),k(0),b(1),w(1)}finally{c(!1)}},[]);v.useEffect(()=>{De(x,le,C,$,B),Ve()},[x,le,C,$,B,De,Ve]);const ue=ne=>{const ye=C===ne&&$==="asc"?"desc":"asc";A(ne),U(ye),b(1)},Ae=ne=>{try{return new Date(ne).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},ce=()=>{G(!1),Y(null),Q(""),X(null),te(!1)},be=async(ne,ye)=>{o(de=>de.map(se=>se.id===ne?{...se,insurance_type:ye}:se));try{const de=await ie(`/api/patients/${ne}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:ye})});if(!de.ok){const se=await de.json();throw new Error(se.message||"Failed to update insurance type")}}catch(de){console.error("Error updating insurance type:",de),De(x,le,C,$,B)}},ke=(ne,ye)=>{const de=new Date(ne),se=ye.interval||1;switch(ye.period){case"daily":de.setDate(ne.getDate()+se);break;case"weekly":de.setDate(ne.getDate()+se*7);break;case"monthly":de.setMonth(ne.getMonth()+se);break;case"yearly":de.setFullYear(ne.getFullYear()+se);break;default:console.warn(`Unknown subscription period: ${ye.period}. Defaulting to 1 month.`),de.setMonth(ne.getMonth()+1)}return de},Ce=async()=>{if(!K||!H){X("Please select a subscription plan.");return}const ne=q.find(ye=>ye.id===H);if(!ne){X("Selected plan details not found.");return}te(!0),X(null);try{const ye=new Date,de=ke(ye,ne),se={subscription_plan_id:H,subscription_status:"active",subscription_start_date:ye.toISOString(),subscription_end_date:de.toISOString(),subscription_payment_method:"manual"},re=await ie(`/api/patients/${K.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!re.ok){const oe=await re.json();throw new Error(oe.message||"Failed to update patient subscription")}ce(),De(x,le,C,$,B)}catch(ye){console.error("Error starting subscription:",ye),X(`Failed to start subscription: ${ye.message}`)}finally{te(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("div",{className:"all-patients-header-section",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{size:16})}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(qn,{size:28}),"All Patients"]})]}),r.jsxs("div",{className:"controls-container",children:[!Re&&!Ee&&q.length>0&&r.jsx("div",{className:"compact-subscriptions",children:q.map(ne=>r.jsxs("span",{className:"plan-chip",title:`${ne.name}: ${ne.price} / ${ne.interval} ${ne.period}${ne.description?" - "+ne.description:""}`,children:[ne.name,": ",ne.price]},ne.id))}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:ne=>m(ne.target.value)}),r.jsx(fn,{className:"search-input-icon",size:16})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("div",{className:"filter-select-container",children:[r.jsx(Lv,{size:14,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:B,onChange:ne=>R(ne.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Gender"}),r.jsx("option",{value:"M",children:"M"}),r.jsx("option",{value:"F",children:"F"}),r.jsx("option",{value:"O",children:"O"})]})]})}),r.jsxs("button",{onClick:()=>i(!0),className:"action-button",title:"Manage Custom Columns",children:[r.jsx(gd,{size:14})," Columns"]})]})]}),u&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:u})]}),l?r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(ee,{width:50,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:40,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:60,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:120,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:80,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ne=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:40,height:20})}),r.jsx("td",{className:"patient-name",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(ee,{variant:"circular",width:24,height:24}),r.jsx(ee,{width:120,height:20})]})}),r.jsx("td",{children:r.jsx(ee,{width:30,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:30,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:32})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:32,style:{borderRadius:"4px"}})})]},ne))})]})}):s.length===0?r.jsx("div",{className:"empty-state",children:le?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ue("name"),children:["Name",C==="name"&&($==="asc"?r.jsx(TP,{size:14,className:"sort-icon"}):r.jsx(II,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ue("created_at"),children:["Registered On",C==="created_at"&&($==="asc"?r.jsx(TP,{size:14,className:"sort-icon"}):r.jsx(II,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:s.map(ne=>r.jsxs(Te.Fragment,{children:[r.jsxs("tr",{className:"patient-row clickable-row",onClick:()=>t(`/dashboard/edit-complaint/patient/${ne.id}`),onMouseEnter:()=>I(ne.id),children:[r.jsx("td",{children:ne.token??"-"}),r.jsx("td",{className:"patient-name",children:ne.name}),r.jsx("td",{children:ne.age??"-"}),r.jsx("td",{children:ne.gender??"-"}),r.jsx("td",{children:ne.phone??"-"}),r.jsx("td",{children:ne.address??"-"}),r.jsx("td",{children:Ae(ne.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${ne.subscription_status==="active"?"active":ne.subscription_status==="cancelled"||ne.subscription_status==="expired"?"inactive":"none"}`,children:ne.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:ne.insurance_type,onClick:ye=>ye.stopPropagation(),onChange:ye=>be(ne.id,ye.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:ye=>{ye.stopPropagation(),t(`/start-subscription/${ne.id}`)},className:"action-button",children:"Start Sub"})})]}),e.patients&&e.patients.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:10,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:e.patients.map(ye=>{var de;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[ye.label,":"]})," ",(de=ne.custom_fields)!=null&&de[ye.key]?String(ne.custom_fields[ye.key]):"-"]},ye.key)})})})})]},ne.id))})]})}),j>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(x-1)*HA+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(x*HA,_)})," ","of"," ",r.jsx("span",{className:"font-medium",children:_})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>b(ne=>Math.max(ne-1,1)),disabled:x===1||l,className:"pagination-button",children:[r.jsx(Bf,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:x})," of ",r.jsx("span",{className:"font-medium",children:j})]}),r.jsxs("button",{onClick:()=>b(ne=>Math.min(ne+1,j)),disabled:x===j||l,className:"pagination-button",children:["Next",r.jsx(Vl,{size:16,className:"next-icon"})]})]})]})]}),z&&K&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",K.name]}),r.jsx("button",{onClick:ce,className:"subscription-modal-close-button",children:r.jsx(Ot,{size:24})})]}),me&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:me})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:H,onChange:ne=>Q(ne.target.value),className:"form-select",disabled:L||Re||Ee!==null||q.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),Re?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):Ee?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):q.length>0?q.map(ne=>r.jsxs("option",{value:ne.id,children:[ne.name," - ",ne.price," (",ne.interval," ",ne.period,ne.interval>1?"s":"",")"]},ne.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),Ee&&r.jsx("p",{className:"error-message",children:Ee}),q.length===0&&!Re&&!Ee&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:ce,disabled:L,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:Ce,disabled:!H||L,className:"subscription-modal-button submit",children:L?"Starting...":"Start Subscription"})]})]})}),r.jsx(WM,{isOpen:a,onClose:()=>i(!1),entityType:"patients",entityLabel:"Patients",currentConfig:e,onConfigUpdated:()=>{n()}})]})},xG=()=>{const t=Mt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(!1),[u,h]=v.useState(!1),p=/^\+?[0-9\s\-().]{7,20}$/,m=v.useMemo(()=>ql(async _=>{if(_.trim().length<2){i([]),o(!1);return}o(!0);try{const k=new URLSearchParams({search:encodeURIComponent(_),page:"1",limit:"8",sortBy:"name",sortOrder:"asc"}),C=await ie(`/api/patients?${k.toString()}`);if(!C.ok)throw new Error("Failed to search");const A=await C.json();i(A.patients)}catch{i([])}finally{o(!1)}},300),[]),x=_=>{const k=_.target.value;n(k),c(p.test(k)),o(!0),h(!0),m(k)},b=v.useCallback(_=>{t("/billing",{state:{patientId:_.id,patientName:_.name}})},[t]),j=v.useCallback(async()=>{if(!(!e||!l)){o(!0);try{const k=await ie("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Direct Patient",phone:e,age:null,gender:null,token:null})});if(!k.ok)throw new Error("Failed to create patient");const C=await k.json();b(C)}catch(_){alert(`Error: ${_.message}`)}finally{o(!1)}}},[e,l,b]),w=_=>_.slice(0,1).toUpperCase();return r.jsxs("div",{className:"ccb-container",children:[r.jsxs("div",{className:"ccb-header-section",children:[r.jsx("button",{onClick:()=>t(-1),className:"ccb-back-button",title:"Go Back",children:r.jsx(en,{size:24})}),r.jsx("h1",{className:"ccb-title",children:"Create Custom Bill"}),r.jsx("p",{className:"ccb-subtitle",children:"Search for a patient to bill manually, or create a new one instantly."})]}),r.jsxs("div",{className:"ccb-search-wrapper",children:[r.jsx(fn,{className:"ccb-search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by Name, Phone, or Token...",value:e,onChange:x,onFocus:()=>h(!0),className:"ccb-search-input",autoFocus:!0}),e&&r.jsx("div",{className:"ccb-clear-icon",onClick:()=>{n(""),i([]),h(!1)},children:r.jsx(Ot,{size:18})}),r.jsxs("div",{className:`ccb-results-dropdown ${u&&(a.length>0||s||e.length>2&&a.length===0)?"open":""}`,children:[s&&r.jsx("div",{className:"p-4 flex justify-center items-center",children:r.jsx("div",{className:"ccb-spinner"})}),!s&&a.map(_=>r.jsxs("div",{onClick:()=>b(_),className:"ccb-result-item",children:[r.jsxs("div",{className:"ccb-patient-info",children:[r.jsx("div",{className:"ccb-avatar",children:w(_.name)}),r.jsxs("div",{className:"ccb-patient-details",children:[r.jsx("h4",{children:_.name}),r.jsxs("p",{className:"ccb-patient-meta",children:[_.phone||"No phone","  ",_.gender||"-","  ",_.age?`${_.age}y`:"-"]})]})]}),r.jsxs("span",{className:"ccb-token-badge",children:["#",_.token]})]},_.id)),!s&&a.length===0&&e.length>2&&r.jsxs("div",{className:"ccb-create-action",children:[r.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No patients found."}),l&&r.jsxs("button",{onClick:j,className:"ccb-create-btn w-full",children:["Create Patient with Phone ",e]})]})]})]})]})},vG=({currentUser:t})=>{const e=Mt(),n=ps(),[a,i]=v.useState("select_patient"),[s,o]=v.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=v.useState(null),[u,h]=v.useState([]),[p,m]=v.useState([]),[x,b]=v.useState(""),[j,w]=v.useState([]),[_,k]=v.useState(""),[C,A]=v.useState([]),[T,E]=v.useState(!1),[I,$]=v.useState(null),[U,B]=v.useState(null),[R,z]=v.useState(null),[G,K]=v.useState(!1),[Y,q]=v.useState(!1),[V,H]=v.useState(!1),Q=/^\+?[0-9\s\-().]{7,20}$/,L=/^[a-zA-Z\s'-]{2,}$/,te=v.useCallback(async()=>{if(!(u.length>0)){K(!0),z(null);try{const ce=await ie("/api/lab-tests");if(!ce.ok)throw new Error("Failed to fetch lab tests");const be=await ce.json();h(be)}catch(ce){console.error("Failed to fetch available lab tests:",ce),z("Could not load lab test list: "+ce.message),h([])}finally{K(!1)}}},[u.length]),me=ce=>{ce&&(n.prefetchQuery({queryKey:Kt.patients.context(ce),queryFn:async()=>{const be=await ie(`/api/patients/${ce}/context`);if(!be.ok)throw new Error("Failed to fetch patient context");return be.json()},staleTime:1e3*60*5}),n.prefetchQuery({queryKey:Kt.patientDebts.balance(ce),queryFn:async()=>{const be=await ie(`/api/patient-debts/${ce}/balance`);if(!be.ok)throw new Error("Failed to fetch patient debt");return be.json()},staleTime:1e3*60}),n.prefetchQuery({queryKey:Kt.queue.latest(ce),queryFn:async()=>{const be=await ie(`/api/queue/patient/${ce}/latest`);if(!be.ok){if(be.status===404)return null;throw new Error("Failed to fetch queue status")}return be.json()},staleTime:1e3*5}))},X=v.useMemo(()=>new ho(u,{keys:["name","description"],threshold:.3,ignoreLocation:!0}),[u]);v.useEffect(()=>{if(!x){w([]);return}const ce=X.search(x).map(be=>be.item);w(ce.slice(0,10))},[x,X]);const Re=v.useCallback(ce=>{const be={id:ce.id,name:ce.name,token:ce.token,age:ce.age,gender:ce.gender,phone:ce.phone};c(be),i("create_order"),m([]),b(""),w([]),z(null),te()},[te]),Se=v.useMemo(()=>ql(async ce=>{if(ce.trim().length<2){A([]),E(!1),$(null);return}E(!0),$(null);try{const be=new URLSearchParams({search:encodeURIComponent(ce),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),ke=await ie(`/api/patients?${be.toString()}`);if(!ke.ok){const ne=await ke.text();throw new Error(`API Error (${ke.status}): ${ne||ke.statusText}`)}const Ce=await ke.json();A(Ce.patients)}catch(be){console.error("Error searching lab patients:",be),$(be.message||"Failed to search lab patients."),A([])}finally{E(!1)}},300),[Q,L]),Ee=ce=>{const be=ce.target.value;k(be),q(Q.test(be)),H(L.test(be)&&!Q.test(be)),E(!0),Se(be)},Fe=v.useCallback(async ce=>{if(!_||ce==="phone"&&!Y||ce==="name"&&!V){$(`Invalid ${ce} to create a new patient.`);return}E(!0),$(null);try{const ke=await ie("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ce==="name"?_:"direct lab",phone:ce==="phone"?_:null,age:null,gender:null,token:null})});if(!ke.ok){const ne=await ke.json();throw new Error(ne.message||`Failed to create patient: ${ke.statusText}`)}const Ce=await ke.json();alert(`New patient "${Ce.name}" created with ${ce==="phone"?`phone ${Ce.phone}`:`name ${Ce.name}`}.`),Re({id:Ce.id,name:Ce.name,token:Ce.token??null,age:Ce.age??null,gender:Ce.gender??null,phone:Ce.phone})}catch(be){console.error("Error creating new patient:",be),$(be.message||"Failed to create new patient.")}finally{E(!1)}},[_,Y,V,Re]),le=()=>{i("select_patient"),c(null),k(""),A([]),$(null)},_e=ce=>{const{name:be,value:ke}=ce.target;o(Ce=>({...Ce,[be]:be==="age"?ke?parseInt(ke,10):void 0:ke}))},Ve=async ce=>{if(ce.preventDefault(),B(null),!s.name){B("Patient Name is required.");return}const be={name:s.name,age:s.age,gender:s.gender,phone:s.phone,address:s.address};try{const ke=await ie("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});if(!ke.ok){const ne=await ke.json();throw new Error(ne.message||`Failed to create patient: ${ke.statusText}`)}const Ce=await ke.json();Re({id:Ce.id,name:Ce.name,token:Ce.token??null,age:Ce.age??null,gender:Ce.gender??null,phone:Ce.phone})}catch(ke){console.error("Failed to create patient:",ke),B(ke.message||"Failed to create patient. Please try again.")}},De=ce=>{if(p.some(be=>be.id===ce.id)){z(`${ce.name} is already in the order.`),setTimeout(()=>z(null),3e3),b(""),w([]);return}m(be=>[...be,{...ce}]),b(""),w([])},ue=ce=>{m(be=>be.filter(ke=>ke.id!==ce))},Ae=async ce=>{if(ce.preventDefault(),z(null),!l){z("No patient selected.");return}if(p.length===0){z("No lab tests selected.");return}const be={patient_id:l.id,tests:p.map(ke=>({id:ke.id,name:ke.name,price:ke.price}))};console.log("Submitting Lab Order:",be);try{const ke=await ie("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});if(!ke.ok){const ye=await ke.json();throw console.error("API Error Data:",ye),new Error(ye.message||`Failed to create lab order: ${ke.statusText}`)}const Ce=await ke.json();console.log("Lab Order Creation Result:",Ce);let ne=l.queueId;if(!ne){const ye=await ie(`/api/queue/patient/${l.id}/latest`);if(ye.ok){const de=await ye.json();de!=null&&de._id&&(ne=de._id)}}if(!ne){const ye=await ie("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!ye.ok){const se=await ye.text();throw new Error(`Failed to create queue entry for redirection: ${se||ye.statusText}`)}const de=await ye.json();if(de!=null&&de.id)ne=de.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}(t==null?void 0:t.role)==="lab"?e("/dashboard"):e(`/dashboard/edit-complaint/${ne}`)}catch(ke){console.error("Failed to create lab order:",ke),z(ke.message||"Failed to create lab order.")}};return v.useEffect(()=>{te()},[te]),r.jsxs("div",{className:"create-lab-order-container",children:[r.jsxs("div",{className:"create-lab-order-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button","aria-label":"Go back",children:r.jsx(en,{size:20})}),r.jsx("h1",{className:"create-lab-order-title",children:"Create New Lab Order"}),r.jsx("div",{style:{width:"64px"}})," "]}),(a==="select_patient"||a==="create_patient")&&r.jsxs("div",{className:"glass-card",children:[a==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"header-with-action",children:r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Select Patient"})}),r.jsxs("div",{className:"search-container",children:[r.jsx(fn,{className:"search-icon",size:20}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No...",value:_,onChange:Ee,className:"modern-input",autoFocus:!0,autoComplete:"off"}),T&&r.jsx("div",{style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(ee,{width:80,height:14})})]}),T&&r.jsx("ul",{className:"patient-list",children:[1,2,3].map(ce=>r.jsxs("li",{className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx(ee,{width:120,height:20}),r.jsx(ee,{width:50,height:24,style:{borderRadius:"12px"}})]}),r.jsx("div",{className:"patient-details",children:r.jsx(ee,{width:200,height:16})})]},ce))}),I&&r.jsxs("div",{className:"error-message",children:[r.jsx(zr,{size:18}),I]}),C.length>0&&r.jsx("ul",{className:"patient-list",children:C.map(ce=>r.jsxs("li",{onClick:()=>Re(ce),onMouseEnter:()=>me(ce.id),className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("strong",{children:ce.name}),r.jsxs("span",{className:"token-badge",children:["#",ce.token||"N/A"]})]}),r.jsxs("div",{className:"patient-details",children:[ce.age?`${ce.age} yrs`:"",ce.gender?` / ${ce.gender}`:"",ce.phone?`  ${ce.phone}`:""]})]},ce.id))}),_.length>=2&&!T&&C.length===0&&!I&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{className:"no-data-message",style:{background:"none",border:"none",padding:0},children:['No patients found matching "',_,'".']}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},children:[Y&&r.jsxs("button",{type:"button",onClick:()=>Fe("phone"),className:"secondary-button",children:['Create "Direct Lab" Patient (Phone: ',_,")"]}),V&&r.jsxs("button",{type:"button",onClick:()=>Fe("name"),className:"secondary-button",children:["Create Patient (Name: ",_,")"]})]})]}),_.length<2&&!T&&r.jsx("div",{className:"info-message",children:"Start typing to search for a patient..."})]}),a==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"New Patient Registration"}),r.jsx("button",{onClick:le,className:"text-button",children:" Back to Search "})]}),U&&r.jsxs("div",{className:"error-message",children:[r.jsx(zr,{size:18}),U]}),r.jsxs("form",{onSubmit:Ve,children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-name",className:"form-label",children:"Patient Name *"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(qn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:s.name,onChange:_e,className:"modern-input",placeholder:"Enter full name"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:s.age??"",onChange:_e,className:"modern-input",style:{paddingLeft:"16px"},placeholder:"e.g. 30"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:s.gender??"",onChange:_e,className:"modern-input",style:{paddingLeft:"16px"},children:[r.jsx("option",{value:"",children:"Select Gender..."}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-phone",className:"form-label",children:"Phone Number"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Fv,{className:"search-icon",size:18}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:s.phone||"",onChange:_e,className:"modern-input",placeholder:"e.g. 9876543210"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-address",className:"form-label",children:"Address"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(tO,{className:"search-icon",size:18,style:{top:"20px"}}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:s.address||"",onChange:_e,className:"modern-input",style:{resize:"none"},placeholder:"Enter address (optional)"})]})]})]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:le,className:"secondary-button",children:" Cancel "}),r.jsxs("button",{type:"submit",className:"primary-button",children:[r.jsx(Ln,{size:18}),"Create & Proceed"]})]})]})]})]}),a==="create_order"&&l&&r.jsxs("div",{className:"glass-card",children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Create Lab Order"}),r.jsx("button",{onClick:le,className:"text-button",children:" Change Patient "})]}),r.jsxs("div",{className:"patient-summary",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(qn,{size:20,className:"highlight-primary"}),r.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:l.name})]}),r.jsxs("div",{className:"patient-details",style:{marginLeft:"30px",marginTop:"4px"},children:[l.age?`${l.age} yrs`:"Age N/A",l.gender&&`  ${l.gender}`,l.phone&&`  ${l.phone}`]})]}),R&&r.jsxs("div",{className:"error-message",children:[r.jsx(zr,{size:18}),R]}),r.jsxs("form",{onSubmit:Ae,children:[r.jsxs("div",{className:"form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",className:"form-label",children:"Add Lab Test"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[G?r.jsx("div",{style:{position:"absolute",right:"45px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(ee,{width:24,height:24,variant:"circular"})}):r.jsx(fn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search tests (e.g. CBC, Lipid Profile)...",value:x,onChange:ce=>b(ce.target.value),className:"modern-input",disabled:G,autoComplete:"off"}),G&&x&&r.jsx("div",{className:"search-results-dropdown",children:[1,2,3].map(ce=>r.jsxs("div",{className:"search-result-item",children:[r.jsx(ee,{width:"60%",height:20}),r.jsx(ee,{width:"20%",height:20})]},ce))}),x&&j.length>0&&r.jsx("div",{className:"search-results-dropdown",children:j.map(ce=>r.jsxs("div",{onClick:()=>De(ce),className:"search-result-item",children:[r.jsx("span",{style:{fontWeight:500},children:ce.name}),r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(ce.price).toFixed(2)]})]},ce.id))}),x&&j.length===0&&!G&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px",padding:"10px",fontSize:"0.9rem"},children:['No tests found matching "',x,'".']})]})]}),r.jsxs("div",{style:{marginTop:"30px"},children:[r.jsxs("h4",{className:"card-title",style:{fontSize:"1.1rem"},children:["Selected Tests (",p.length,")"]}),p.length===0?r.jsx("div",{className:"info-message",children:"No tests added yet. Search above to add tests."}):r.jsx("div",{className:"selected-tests-list",children:p.map(ce=>r.jsxs("div",{className:"selected-test-item",children:[r.jsx("div",{style:{flex:1},children:r.jsx("div",{style:{fontWeight:500},children:ce.name})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(ce.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ue(ce.id),className:"remove-button",title:"Remove Test",children:r.jsx(zn,{size:18})})]})]},ce.id))})]}),p.length>0&&r.jsxs("div",{className:"total-price",children:["Total: ",p.reduce((ce,be)=>ce+parseFloat(be.price),0).toFixed(2)]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:le,className:"secondary-button",children:" Cancel Order "}),r.jsxs("button",{type:"submit",disabled:p.length===0,className:"primary-button",children:[r.jsx(MP,{size:18}),"Create Lab Order"]})]})]})]})]})},bG=({patient:t,onClose:e,onSave:n})=>{const[a,i]=v.useState({name:t.name,age:t.age,gender:t.gender,phone:t.phone||""}),[s,o]=v.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{await n({...a,phone:a.phone||void 0}),e()}catch(u){console.error(u),alert("Failed to update patient")}finally{o(!1)}};return r.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:r.jsxs("div",{className:"modal-content",style:{backgroundColor:"var(--surface-color, white)",padding:"1.25rem",borderRadius:"var(--radius-lg, 12px)",width:"380px",maxWidth:"90%",boxShadow:"var(--shadow-lg, 0 10px 25px rgba(0,0,0,0.15))",border:"1px solid var(--border-color, #e2e8f0)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border-color, #e2e8f0)",marginBottom:"1rem"},children:[r.jsx("h3",{style:{margin:0,fontSize:"1.15rem",fontWeight:700,color:"var(--text-color, #333)"},children:"Edit Patient"}),r.jsx("button",{onClick:e,style:{border:"none",background:"none",cursor:"pointer",color:"var(--text-secondary, #666)",padding:"4px"},children:r.jsx(Ot,{size:18})})]}),r.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Full Name"}),r.jsx("input",{type:"text",value:a.name,onChange:c=>i({...a,name:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"},required:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Age"}),r.jsx("input",{type:"number",value:a.age||"",onChange:c=>i({...a,age:parseInt(c.target.value)||0}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Gender"}),r.jsxs("select",{value:a.gender||"",onChange:c=>i({...a,gender:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)",background:"white"},children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Phone Number"}),r.jsx("input",{type:"tel",value:a.phone,onChange:c=>i({...a,phone:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"},placeholder:"Optional"})]}),r.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--border-color, #e2e8f0)",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:e,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)",background:"none",fontSize:"0.9rem",cursor:"pointer"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"save-btn",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:"var(--primary-color, #3b82f6)",color:"white",fontSize:"0.9rem",fontWeight:500,display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},disabled:s,children:s?"Saving...":r.jsxs(r.Fragment,{children:[r.jsx(qi,{size:16})," Save Details"]})})]})]})]})})},RB=[{value:"general",label:"General"},{value:"diagnostic",label:"Diagnostic"},{value:"treatment",label:"Treatment"},{value:"minor_surgery",label:"Minor Surgery"}],$Oe=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState({}),[h,p]=v.useState(!1),[m,x]=v.useState({name:"",cost:0,category:"general"});v.useEffect(()=>{b()},[]);const b=async()=>{s(!0);try{const C=await ie("/api/medical/procedures");if(C.ok){const A=await C.json();a(A)}}catch(C){console.error(C)}finally{s(!1)}},j=async()=>{if(!(!m.name||!m.cost))try{(await ie("/api/medical/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok&&(p(!1),x({name:"",cost:0,category:"general"}),b(),e())}catch(C){console.error(C)}},w=async C=>{try{(await ie(`/api/medical/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),u({}),b(),e())}catch(A){console.error(A)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await ie(`/api/medical/procedures/${C}`,{method:"DELETE"})).ok&&(b(),e())}catch(A){console.error(A)}},k=C=>{l(C.id),u({name:C.name,cost:C.cost,category:C.category})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Medical Procedures"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await ie("/api/medical/procedures/import-defaults",{method:"POST"}),b(),e()}catch(C){console.error(C)}},className:"btn-secondary btn-compact",children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Ot,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{className:"p-20 text-center",children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"w-40",children:"Name"}),r.jsx("th",{className:"w-20",children:"Category"}),r.jsx("th",{className:"w-20",children:"Cost ()"}),r.jsx("th",{className:"w-20",children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"text-center p-20 text-muted",children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:A=>u({...c,name:A.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsx("select",{className:"edit-select",value:c.category||"general",onChange:A=>u({...c,category:A.target.value}),children:RB.map(A=>r.jsx("option",{value:A.value,children:A.label},A.value))})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:A=>u({...c,cost:parseFloat(A.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>w(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(qi,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Ot,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.category}`,children:C.category.replace("_"," ")})}),r.jsxs("td",{className:"fw-500",children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>k(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(Ms,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(zn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:h?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:m.name||"",onChange:C=>x({...m,name:C.target.value})}),r.jsx("select",{className:"form-select",value:m.category||"general",onChange:C=>x({...m,category:C.target.value}),children:RB.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:m.cost||"",onChange:C=>x({...m,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:j,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Ln,{size:18})," Add New Procedure"]})})]})})};var BOe=Object.defineProperty,$N=Object.getOwnPropertySymbols,jG=Object.prototype.hasOwnProperty,wG=Object.prototype.propertyIsEnumerable,LB=(t,e,n)=>e in t?BOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OD=(t,e)=>{for(var n in e||(e={}))jG.call(e,n)&&LB(t,n,e[n]);if($N)for(var n of $N(e))wG.call(e,n)&&LB(t,n,e[n]);return t},MD=(t,e)=>{var n={};for(var a in t)jG.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&$N)for(var a of $N(t))e.indexOf(a)<0&&wG.call(t,a)&&(n[a]=t[a]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var $f;(t=>{const e=class Mn{constructor(c,u,h,p){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<Mn.MIN_VERSION||c>Mn.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let b=0;b<this.size;b++)m.push(!1);for(let b=0;b<this.size;b++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(h);if(this.drawCodewords(x),p==-1){let b=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const w=this.getPenaltyScore();w<b&&(p=j,b=w),this.applyMask(j)}}i(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,u){const h=t.QrSegment.makeSegments(c);return Mn.encodeSegments(h,u)}static encodeBinary(c,u){const h=t.QrSegment.makeBytes(c);return Mn.encodeSegments([h],u)}static encodeSegments(c,u,h=1,p=40,m=-1,x=!0){if(!(Mn.MIN_VERSION<=h&&h<=p&&p<=Mn.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let b,j;for(b=h;;b++){const C=Mn.getNumDataCodewords(b,u)*8,A=o.getTotalBits(c,b);if(A<=C){j=A;break}if(b>=p)throw new RangeError("Data too long")}for(const C of[Mn.Ecc.MEDIUM,Mn.Ecc.QUARTILE,Mn.Ecc.HIGH])x&&j<=Mn.getNumDataCodewords(b,C)*8&&(u=C);let w=[];for(const C of c){n(C.mode.modeBits,4,w),n(C.numChars,C.mode.numCharCountBits(b),w);for(const A of C.getData())w.push(A)}i(w.length==j);const _=Mn.getNumDataCodewords(b,u)*8;i(w.length<=_),n(0,Math.min(4,_-w.length),w),n(0,(8-w.length%8)%8,w),i(w.length%8==0);for(let C=236;w.length<_;C^=253)n(C,8,w);let k=[];for(;k.length*8<w.length;)k.push(0);return w.forEach((C,A)=>k[A>>>3]|=C<<7-(A&7)),new Mn(b,u,k,m)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let h=0;h<u;h++)for(let p=0;p<u;p++)h==0&&p==0||h==0&&p==u-1||h==u-1&&p==0||this.drawAlignmentPattern(c[h],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let h=u;for(let m=0;m<10;m++)h=h<<1^(h>>>9)*1335;const p=(u<<10|h)^21522;i(p>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,a(p,m));this.setFunctionModule(8,7,a(p,6)),this.setFunctionModule(8,8,a(p,7)),this.setFunctionModule(7,8,a(p,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,a(p,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,a(p,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,a(p,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let h=0;h<12;h++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;i(u>>>18==0);for(let h=0;h<18;h++){const p=a(u,h),m=this.size-11+h%3,x=Math.floor(h/3);this.setFunctionModule(m,x,p),this.setFunctionModule(x,m,p)}}drawFinderPattern(c,u){for(let h=-4;h<=4;h++)for(let p=-4;p<=4;p++){const m=Math.max(Math.abs(p),Math.abs(h)),x=c+p,b=u+h;0<=x&&x<this.size&&0<=b&&b<this.size&&this.setFunctionModule(x,b,m!=2&&m!=4)}}drawAlignmentPattern(c,u){for(let h=-2;h<=2;h++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,u+h,Math.max(Math.abs(p),Math.abs(h))!=1)}setFunctionModule(c,u,h){this.modules[u][c]=h,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,h=this.errorCorrectionLevel;if(c.length!=Mn.getNumDataCodewords(u,h))throw new RangeError("Invalid argument");const p=Mn.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][u],m=Mn.ECC_CODEWORDS_PER_BLOCK[h.ordinal][u],x=Math.floor(Mn.getNumRawDataModules(u)/8),b=p-x%p,j=Math.floor(x/p);let w=[];const _=Mn.reedSolomonComputeDivisor(m);for(let C=0,A=0;C<p;C++){let T=c.slice(A,A+j-m+(C<b?0:1));A+=T.length;const E=Mn.reedSolomonComputeRemainder(T,_);C<b&&T.push(0),w.push(T.concat(E))}let k=[];for(let C=0;C<w[0].length;C++)w.forEach((A,T)=>{(C!=j-m||T>=b)&&k.push(A[C])});return i(k.length==x),k}drawCodewords(c){if(c.length!=Math.floor(Mn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let p=0;p<this.size;p++)for(let m=0;m<2;m++){const x=h-m,j=(h+1&2)==0?this.size-1-p:p;!this.isFunction[j][x]&&u<c.length*8&&(this.modules[j][x]=a(c[u>>>3],7-(u&7)),u++)}}i(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let h=0;h<this.size;h++){let p;switch(c){case 0:p=(h+u)%2==0;break;case 1:p=u%2==0;break;case 2:p=h%3==0;break;case 3:p=(h+u)%3==0;break;case 4:p=(Math.floor(h/3)+Math.floor(u/2))%2==0;break;case 5:p=h*u%2+h*u%3==0;break;case 6:p=(h*u%2+h*u%3)%2==0;break;case 7:p=((h+u)%2+h*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][h]&&p&&(this.modules[u][h]=!this.modules[u][h])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[m][w]==x?(b++,b==5?c+=Mn.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*Mn.PENALTY_N3),x=this.modules[m][w],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*Mn.PENALTY_N3}for(let m=0;m<this.size;m++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][m]==x?(b++,b==5?c+=Mn.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*Mn.PENALTY_N3),x=this.modules[w][m],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*Mn.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let x=0;x<this.size-1;x++){const b=this.modules[m][x];b==this.modules[m][x+1]&&b==this.modules[m+1][x]&&b==this.modules[m+1][x+1]&&(c+=Mn.PENALTY_N2)}let u=0;for(const m of this.modules)u=m.reduce((x,b)=>x+(b?1:0),u);const h=this.size*this.size,p=Math.ceil(Math.abs(u*20-h*10)/h)-1;return i(0<=p&&p<=9),c+=p*Mn.PENALTY_N4,i(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let h=[6];for(let p=this.size-7;h.length<c;p-=u)h.splice(1,0,p);return h}}static getNumRawDataModules(c){if(c<Mn.MIN_VERSION||c>Mn.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const h=Math.floor(c/7)+2;u-=(25*h-10)*h-55,c>=7&&(u-=36)}return i(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(Mn.getNumRawDataModules(c)/8)-Mn.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*Mn.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let p=0;p<c-1;p++)u.push(0);u.push(1);let h=1;for(let p=0;p<c;p++){for(let m=0;m<u.length;m++)u[m]=Mn.reedSolomonMultiply(u[m],h),m+1<u.length&&(u[m]^=u[m+1]);h=Mn.reedSolomonMultiply(h,2)}return u}static reedSolomonComputeRemainder(c,u){let h=u.map(p=>0);for(const p of c){const m=p^h.shift();h.push(0),u.forEach((x,b)=>h[b]^=Mn.reedSolomonMultiply(x,m))}return h}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let h=0;for(let p=7;p>=0;p--)h=h<<1^(h>>>7)*285,h^=(u>>>p&1)*c;return i(h>>>8==0),h}finderPenaltyCountPatterns(c){const u=c[1];i(u<=this.size*3);const h=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(h&&c[0]>=u*4&&c[6]>=u?1:0)+(h&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,h){return c&&(this.finderPenaltyAddHistory(u,h),u=0),u+=this.size,this.finderPenaltyAddHistory(u,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)u.push(l>>>h&1)}function a(l,c){return(l>>>c&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const s=class aa{constructor(c,u,h){if(this.mode=c,this.numChars=u,this.bitData=h,u<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(c){let u=[];for(const h of c)n(h,8,u);return new aa(aa.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!aa.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let h=0;h<c.length;){const p=Math.min(c.length-h,3);n(parseInt(c.substring(h,h+p),10),p*3+1,u),h+=p}return new aa(aa.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!aa.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],h;for(h=0;h+2<=c.length;h+=2){let p=aa.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h))*45;p+=aa.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h+1)),n(p,11,u)}return h<c.length&&n(aa.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h)),6,u),new aa(aa.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:aa.isNumeric(c)?[aa.makeNumeric(c)]:aa.isAlphanumeric(c)?[aa.makeAlphanumeric(c)]:[aa.makeBytes(aa.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,u);else if(c<16384)n(2,2,u),n(c,14,u);else if(c<1e6)n(6,3,u),n(c,21,u);else throw new RangeError("ECI assignment value out of range");return new aa(aa.Mode.ECI,0,u)}static isNumeric(c){return aa.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return aa.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let h=0;for(const p of c){const m=p.mode.numCharCountBits(u);if(p.numChars>=1<<m)return 1/0;h+=4+m+p.bitData.length}return h}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let h=0;h<c.length;h++)c.charAt(h)!="%"?u.push(c.charCodeAt(h)):(u.push(parseInt(c.substring(h+1,h+3),16)),h+=2);return u}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})($f||($f={}));(t=>{(e=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})($f||($f={}));(t=>{(e=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})($f||($f={}));var zm=$f;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var zOe={L:zm.QrCode.Ecc.LOW,M:zm.QrCode.Ecc.MEDIUM,Q:zm.QrCode.Ecc.QUARTILE,H:zm.QrCode.Ecc.HIGH},NG=128,SG="L",_G="#FFFFFF",CG="#000000",kG=!1,TG=1,qOe=4,UOe=0,VOe=.1;function AG(t,e=0){const n=[];return t.forEach(function(a,i){let s=null;a.forEach(function(o,l){if(!o&&s!==null){n.push(`M${s+e} ${i+e}h${l-s}v1H${s+e}z`),s=null;return}if(l===a.length-1){if(!o)return;s===null?n.push(`M${l+e},${i+e} h1v1H${l+e}z`):n.push(`M${s+e},${i+e} h${l+1-s}v1H${s+e}z`);return}o&&s===null&&(s=l)})}),n.join("")}function PG(t,e){return t.slice().map((n,a)=>a<e.y||a>=e.y+e.h?n:n.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function HOe(t,e,n,a){if(a==null)return null;const i=t.length+n*2,s=Math.floor(e*VOe),o=i/e,l=(a.width||s)*o,c=(a.height||s)*o,u=a.x==null?t.length/2-l/2:a.x*o,h=a.y==null?t.length/2-c/2:a.y*o,p=a.opacity==null?1:a.opacity;let m=null;if(a.excavate){let b=Math.floor(u),j=Math.floor(h),w=Math.ceil(l+u-b),_=Math.ceil(c+h-j);m={x:b,y:j,w,h:_}}const x=a.crossOrigin;return{x:u,y:h,h:c,w:l,excavation:m,opacity:p,crossOrigin:x}}function GOe(t,e){return e!=null?Math.max(Math.floor(e),0):t?qOe:UOe}function EG({value:t,level:e,minVersion:n,includeMargin:a,marginSize:i,imageSettings:s,size:o,boostLevel:l}){let c=Te.useMemo(()=>{const b=(Array.isArray(t)?t:[t]).reduce((j,w)=>(j.push(...zm.QrSegment.makeSegments(w)),j),[]);return zm.QrCode.encodeSegments(b,zOe[e],n,void 0,void 0,l)},[t,e,n,l]);const{cells:u,margin:h,numCells:p,calculatedImageSettings:m}=Te.useMemo(()=>{let x=c.getModules();const b=GOe(a,i),j=x.length+b*2,w=HOe(x,o,b,s);return{cells:x,margin:b,numCells:j,calculatedImageSettings:w}},[c,o,s,a,i]);return{qrcode:c,margin:h,cells:u,numCells:p,calculatedImageSettings:m}}var WOe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),qa=Te.forwardRef(function(e,n){const a=e,{value:i,size:s=NG,level:o=SG,bgColor:l=_G,fgColor:c=CG,includeMargin:u=kG,minVersion:h=TG,boostLevel:p,marginSize:m,imageSettings:x}=a,j=MD(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=j,_=MD(j,["style"]),k=x==null?void 0:x.src,C=Te.useRef(null),A=Te.useRef(null),T=Te.useCallback(K=>{C.current=K,typeof n=="function"?n(K):n&&(n.current=K)},[n]),[E,I]=Te.useState(!1),{margin:$,cells:U,numCells:B,calculatedImageSettings:R}=EG({value:i,level:o,minVersion:h,boostLevel:p,includeMargin:u,marginSize:m,imageSettings:x,size:s});Te.useEffect(()=>{if(C.current!=null){const K=C.current,Y=K.getContext("2d");if(!Y)return;let q=U;const V=A.current,H=R!=null&&V!==null&&V.complete&&V.naturalHeight!==0&&V.naturalWidth!==0;H&&R.excavation!=null&&(q=PG(U,R.excavation));const Q=window.devicePixelRatio||1;K.height=K.width=s*Q;const L=s/B*Q;Y.scale(L,L),Y.fillStyle=l,Y.fillRect(0,0,B,B),Y.fillStyle=c,WOe?Y.fill(new Path2D(AG(q,$))):U.forEach(function(te,me){te.forEach(function(X,Re){X&&Y.fillRect(Re+$,me+$,1,1)})}),R&&(Y.globalAlpha=R.opacity),H&&Y.drawImage(V,R.x+$,R.y+$,R.w,R.h)}}),Te.useEffect(()=>{I(!1)},[k]);const z=OD({height:s,width:s},w);let G=null;return k!=null&&(G=Te.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{I(!0)},ref:A,crossOrigin:R==null?void 0:R.crossOrigin})),Te.createElement(Te.Fragment,null,Te.createElement("canvas",OD({style:z,height:s,width:s,ref:T,role:"img"},_)),G)});qa.displayName="QRCodeCanvas";var KOe=Te.forwardRef(function(e,n){const a=e,{value:i,size:s=NG,level:o=SG,bgColor:l=_G,fgColor:c=CG,includeMargin:u=kG,minVersion:h=TG,boostLevel:p,title:m,marginSize:x,imageSettings:b}=a,j=MD(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:_,numCells:k,calculatedImageSettings:C}=EG({value:i,level:o,minVersion:h,boostLevel:p,includeMargin:u,marginSize:x,imageSettings:b,size:s});let A=_,T=null;b!=null&&C!=null&&(C.excavation!=null&&(A=PG(_,C.excavation)),T=Te.createElement("image",{href:b.src,height:C.h,width:C.w,x:C.x+w,y:C.y+w,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const E=AG(A,w);return Te.createElement("svg",OD({height:s,width:s,viewBox:`0 0 ${k} ${k}`,ref:n,role:"img"},j),!!m&&Te.createElement("title",null,m),Te.createElement("path",{fill:l,d:`M0,0 h${k}v${k}H0z`,shapeRendering:"crispEdges"}),Te.createElement("path",{fill:c,d:E,shapeRendering:"crispEdges"}),T)});KOe.displayName="QRCodeSVG";const YOe=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var ke,Ce,ne,ye,de,se,re;const[i,s]=v.useState(null),[o,l]=v.useState(!0),[c,u]=v.useState(null),[h,p]=v.useState(!1),[m,x]=v.useState([]),[b,j]=v.useState("cash"),[w,_]=v.useState(!1),[k,C]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[A,T]=v.useState(0),[E,I]=v.useState(""),[$,U]=v.useState(""),[B,R]=v.useState(""),[z,G]=v.useState(null),[K,Y]=v.useState(null),[q,V]=v.useState(!1),H=()=>{k.length>=5||C(oe=>[...oe,{id:crypto.randomUUID(),method:"cash",amount:0}])},Q=oe=>{k.length<=2||C(je=>je.filter(Oe=>Oe.id!==oe))},L=(oe,je,Oe)=>{C(J=>J.map(xe=>xe.id===oe?{...xe,[je]:Oe}:xe))},te=oe=>{const je=k.filter(J=>J.id!==oe).reduce((J,xe)=>J+xe.amount,0),Oe=Math.max(0,Ee-je);L(oe,"amount",Oe)},me=oe=>{const je=Math.min(100,Math.max(0,oe||0));T(je),x(Oe=>Oe.map(J=>({...J,discount_percentage:je})))},X=(oe,je)=>{const Oe=Math.min(100,Math.max(0,je||0));x(J=>J.map((xe,ge)=>ge===oe?{...xe,discount_percentage:Oe}:xe))},Re=v.useMemo(()=>m.reduce((oe,je)=>oe+(je.price??je.cost??0),0),[m]),Se=v.useMemo(()=>m.reduce((oe,je)=>{const J=(je.price??je.cost??0)*(je.discount_percentage??0)/100;return oe+J},0),[m]),Ee=Re-Se,Fe=v.useMemo(()=>k.reduce((oe,je)=>oe+je.amount,0),[k]),le=Ee-Fe,_e=Math.abs(le)<.01,Ve=v.useMemo(()=>w?k.some(oe=>oe.method==="credit"):b==="credit",[w,k,b]),De=async()=>{var oe,je;if(!i)return u("No record data available to bill."),null;if(m.length===0)return u("Cannot bill an empty procedure list."),null;p(!0),u(null);try{const Oe=m.map(Ge=>{const it=Ge.price??Ge.cost??0,wt=it*((Ge.discount_percentage??0)/100),we=it-wt;return{name:Ge.name,price:it,quantity:1,total:we,item_id:Ge.id||`proc_${Date.now()}`,type:"service",discount_percentage:Ge.discount_percentage??0}}),J=w?((oe=k[0])==null?void 0:oe.method)||"cash":b,xe=w?k.map(Ge=>({method:Ge.method,amount:Ge.amount})):void 0,ge={patientId:i.patientId.id,items:Oe,amount:Ee,paymentMode:J,splitPayments:xe,type:"consultation",related_id:i.id,status:"paid",discountPercentage:A},he=await ie("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)}),Ie=await he.json();if(!he.ok||!Ie.id)throw new Error(Ie.message||"Failed to create bill.");(await ie(`/api/medical/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:Ie.id})})).ok||console.error("Failed to update medical record status"),s(Ge=>Ge?{...Ge,status:"billed",billId:Ie.id}:null);const Be=w?((je=k.find(Ge=>Ge.method==="credit"))==null?void 0:je.amount)||0:b==="credit"?Ee:0;if(Be>0)try{await ie(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Be,related_bill_id:Ie.id,notes:`Medical Bill #${Ie.id}${w?" (Split Payment - Credit portion)":""}`})})}catch(Ge){console.error("Failed to create debt entry:",Ge)}return a&&a(),Ie.id}catch(Oe){return console.error("Billing process failed:",Oe),u(Oe.message||"Failed to create bill."),null}finally{p(!1)}},ue=()=>{window.print()},Ae=async()=>{await De()&&setTimeout(()=>window.print(),300)},ce=async()=>{if(n){l(!0),u(null);try{const oe=await ie(`/api/medical/${n}`);if(!oe.ok)throw new Error("Failed to fetch medical record");const je=await oe.json(),Oe=je.Patient||{},J={id:je.id,patientId:{id:Oe.id||je.patient_id,name:Oe.name||"Unknown",patient_token_number:Oe.patient_token_number,age:Oe.age,gender:Oe.gender},clinicId:je.clinic_id,selectedProcedures:je.selected_procedures||[],status:je.status,billId:je.bill_id,createdAt:je.createdAt||je.date,date:je.date,notes:je.notes};s(J);const xe=(je.selected_procedures||[]).map(ge=>({...ge,price:ge.cost,discount_percentage:0}));x(xe);try{const ge=await ie("/api/clinics/settings");if(ge.ok){const he=await ge.json();I(he.name||""),U(he.address||""),R(he.notes||""),he.upi_id&&G(`upi://pay?pa=${he.upi_id}&pn=${encodeURIComponent(he.name||"Clinic")}&cu=INR`)}}catch(ge){console.error("Failed to fetch clinic settings",ge)}}catch(oe){u(oe.message||"Failed to load record")}finally{l(!1)}}},be=async()=>{var oe;if((oe=i==null?void 0:i.patientId)!=null&&oe.id){V(!0);try{const je=await ie(`/api/patient-debts/patient/${i.patientId.id}/balance`);if(je.ok){const Oe=await je.json();Y(Oe.balance||0)}}catch(je){console.error("Failed to fetch patient debt",je)}finally{V(!1)}}};return v.useEffect(()=>{t&&n&&ce()},[t,n]),v.useEffect(()=>{var oe;(oe=i==null?void 0:i.patientId)!=null&&oe.id&&be()},[(ke=i==null?void 0:i.patientId)==null?void 0:ke.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Medical Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Ot,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:180,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:160,height:24})})}),r.jsx("div",{className:"space-y-4 p-5",children:r.jsx(ee,{width:100,height:20})})]})})]})})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"MEDICAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:E||"Clinic Name"}),($||B)&&r.jsxs("div",{className:"clinic-details-print",children:[$&&r.jsx("span",{className:"small-text clinic-address",children:$}),B&&r.jsx("span",{className:"small-text clinic-notes",children:B})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",((Ce=i.patientId)==null?void 0:Ce.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",((ne=i.patientId)==null?void 0:ne.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",((ye=i.patientId)==null?void 0:ye.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",((de=i.patientId)==null?void 0:de.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ar,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),m.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:m.map((oe,je)=>{const Oe=oe.price??oe.cost??0,J=Oe*(oe.discount_percentage??0)/100,xe=Oe-J;return r.jsxs("tr",{children:[r.jsx("td",{children:je+1}),r.jsx("td",{children:oe.name}),r.jsx("td",{children:Oe.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:oe.discount_percentage===0?"":oe.discount_percentage,onChange:ge=>X(je,parseFloat(ge.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:xe.toFixed(2)})]},je)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",A.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Se.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ee.toFixed(2)]})})]}),z&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(w&&k.some(oe=>oe.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(qa,{value:z,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Se.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:A===0?"":A,onChange:oe=>me(parseFloat(oe.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:h||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ee.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:z?r.jsxs(r.Fragment,{children:[r.jsx(qa,{value:z,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${w?"active":""}`,onClick:()=>_(!w),disabled:h||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:w?"2px solid #4facfe":"1px solid #ddd",background:w?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:w?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:w?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(Uo,{size:14}),"Split Pay"]})]}),w?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(Uo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",Ee.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:k.map((oe,je)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:je+1}),r.jsxs("select",{value:oe.method,onChange:Oe=>L(oe.id,"method",Oe.target.value),className:`split-payment-select ${oe.method==="credit"?"is-credit":""}`,disabled:h||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:oe.amount===0?"":oe.amount,onChange:Oe=>L(oe.id,"amount",parseFloat(Oe.target.value)||0),placeholder:"0",className:`split-payment-input ${oe.method==="credit"?"is-credit":""}`,disabled:h||i.status==="billed"})]}),k.length>2&&r.jsx("button",{type:"button",onClick:()=>te(oe.id),className:"split-payment-btn split-payment-btn-fill",disabled:h||i.status==="billed",children:"Fill"}),k.length>2&&r.jsx("button",{type:"button",onClick:()=>Q(oe.id),className:"split-payment-btn split-payment-btn-remove",disabled:h||i.status==="billed",children:r.jsx(zn,{size:12})})]},oe.id))}),k.length<5&&r.jsxs("button",{type:"button",onClick:H,className:"split-payment-add-btn",disabled:h||i.status==="billed",children:[r.jsx(Ln,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Fe.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(le)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(le)<.01?"":le>0?"":"",Math.abs(le)<.01?"Balanced":le>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(le).toFixed(2)]})]}),!_e&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",Ee.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:oe=>j(oe.target.value),className:"payment-mode-select",disabled:h||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),Ve&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),q?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:K&&K>0?"#dc3545":"#28a745"},children:["",(K||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:w?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(w?((se=k.find(oe=>oe.method==="credit"))==null?void 0:se.amount)||0:Ee).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((K||0)+(w?((re=k.find(oe=>oe.method==="credit"))==null?void 0:re.amount)||0:Ee)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ue,className:"secondary-button print-preview-button no-print",disabled:h,children:"Print Preview"}),r.jsx("button",{onClick:Ae,className:"primary-button",disabled:h||w&&!_e,children:h?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Is,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:ue,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},FB=/^\+?[0-9\s\-().]{7,20}$/,QOe=/^[a-zA-Z\s'-]{2,}$/,DG=()=>{const t=Mt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[u,h]=v.useState(!1),[p,m]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState([]),[_,k]=v.useState(!0),C=Ur();v.useEffect(()=>{C.state&&C.state.patient&&De(C.state.patient)},[C.state]);const[A,T]=v.useState([]),[E,I]=v.useState(""),[$,U]=v.useState(!1),[B,R]=v.useState("plan"),[z,G]=v.useState([]),[K,Y]=v.useState([]),[q,V]=v.useState(!1),[H,Q]=v.useState(""),[L,te]=v.useState(!1),[me,X]=v.useState(null),[Re,Se]=v.useState(null);v.useEffect(()=>{Fe(),Ee()},[]);const Ee=async()=>{try{const se=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),re=await ie(`/api/patients?${se.toString()}`);if(re.ok){const oe=await re.json();w(oe.patients||[])}}catch(se){console.error("Error fetching recent patients",se)}finally{k(!1)}},Fe=async()=>{try{const se=await ie("/api/medical/procedures");if(se.ok){const re=await se.json();Y(re)}}catch(se){console.error("Error fetching procedures",se)}};v.useEffect(()=>{(async()=>{if(!l){G([]),Se(null),I(""),T([]);return}try{const re=await ie(`/api/medical/patient/${l.id}`);if(re.ok){const oe=await re.json();G(oe);const je=new Date().toDateString(),Oe=oe.find(J=>J.status==="draft"&&new Date(J.date||J.createdAt||Date.now()).toDateString()===je);Oe?(Se(Oe.id),I(Oe.notes||""),T(Oe.selected_procedures.map(J=>({instanceId:crypto.randomUUID(),procedureId:J.id,name:J.name,price:J.cost,category:J.category})))):(Se(null),I(""),T([]))}}catch(re){console.error("Error fetching history",re)}})()},[l]);const le=v.useMemo(()=>ql(async se=>{if(!se.trim()||se.length<2){i([]),o(!1);return}o(!0);try{const re=await ie(`/api/patients?search=${encodeURIComponent(se)}&limit=10`);if(re.ok){const oe=await re.json();i(oe.patients||[])}}catch(re){console.error("Search error:",re)}finally{o(!1)}},300),[]);v.useEffect(()=>{le(e)},[e,le]);const _e=se=>{const re=se.target.value;n(re),m(FB.test(re)),b(QOe.test(re)&&!FB.test(re))},Ve=async se=>{if(!(!e||se==="phone"&&!p||se==="name"&&!x)){o(!0);try{const oe=await ie("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:se==="name"?e:"direct medical",phone:se==="phone"?e:null,age:null,gender:null,token:null})});if(oe.ok){const je=await oe.json();De({id:je.id,name:je.name,token:je.token??null,age:je.age??null,gender:je.gender??null,phone:je.phone})}else alert("Failed to create patient")}catch(re){console.error("Error creating patient:",re),alert("Error creating patient")}finally{o(!1)}}},De=se=>{c(se),n(""),i([])},ue=()=>{c(null),T([]),I("")},Ae=async se=>{if(!l)return;const re=await ie(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(re.ok)await re.json(),c(oe=>oe?{...oe,...se}:null);else throw new Error("Failed to update")},ce=se=>{const re={instanceId:crypto.randomUUID(),procedureId:se.id,name:se.name,price:se.cost,category:se.category};T(oe=>[...oe,re])},be=se=>{T(re=>re.filter(oe=>oe.instanceId!==se))},ke=(se,re)=>{T(oe=>oe.map(je=>je.instanceId===se?{...je,price:re}:je))},Ce=se=>{const re=z.find(oe=>oe.id===se);re&&(Se(re.id),I(re.notes||""),T(re.selected_procedures.map(oe=>({instanceId:crypto.randomUUID(),procedureId:oe.id,name:oe.name,price:oe.cost,category:oe.category}))),R("plan"))},ne=async(se=!0)=>{var re;if(l){U(!0);try{const oe=A.map(J=>({id:J.procedureId,name:J.name,cost:J.price,category:J.category})),je={patientId:l.id,selectedProcedures:oe,notes:E};let Oe;if(Re?((re=z.find(xe=>xe.id===Re))==null?void 0:re.status)==="draft"?Oe=await ie(`/api/medical/${Re}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}):Oe=await ie("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}):Oe=await ie("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}),Oe.ok){const J=await Oe.json();Se(J.id);const xe=await ie(`/api/medical/patient/${l.id}`);if(xe.ok){const ge=await xe.json();G(ge)}se?(X(J.id),te(!0)):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save medical record.")}catch(oe){console.error(oe),alert("Error saving record.")}finally{U(!1)}}},ye=v.useMemo(()=>A.reduce((se,re)=>se+re.price,0),[A]),de=v.useMemo(()=>{const se={};return K.filter(oe=>oe.name.toLowerCase().includes(H.toLowerCase())||oe.category.toLowerCase().includes(H.toLowerCase())).forEach(oe=>{const je=oe.category||"general";se[je]||(se[je]=[]),se[je].push(oe)}),se},[K,H]);return r.jsxs("div",{className:"medical-page-container printable-section",children:[r.jsxs("header",{className:"medical-header no-print",children:[r.jsxs("div",{className:"medical-title-group",children:[r.jsx(Af,{className:"medical-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"medical-title",children:"Medical Procedures"}),r.jsx("p",{className:"medical-subtitle",children:"Create medical procedure records and bills"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>h(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(Ms,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:ue,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Ot,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(fn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"medical-search-input header-input",value:e,onChange:_e}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(se=>r.jsxs("div",{onClick:()=>De(se),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:se.name}),r.jsxs("div",{className:"patient-meta",children:[se.age," yrs / ",se.gender,"  ",se.phone]})]}),r.jsx(qn,{size:16,color:"var(--mp-text-sec)"})]},se.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--mp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>Ve(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"medical-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container no-print",children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--mp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(fn,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"medical-search-input",value:e,onChange:_e}),s&&r.jsx("div",{className:"search-spinner"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(se=>r.jsxs("div",{onClick:()=>De(se),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:se.name}),r.jsxs("div",{className:"patient-meta",children:[se.age," yrs / ",se.gender,"  ",se.phone]})]}),r.jsx(qn,{size:16,color:"var(--mp-text-sec)"})]},se.id))})]}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown",style:{padding:"16px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--mp-text-sec)",marginBottom:"12px"},children:['No patients found for "',e,'"']}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[p&&r.jsxs("button",{type:"button",onClick:()=>Ve("phone"),className:"create-patient-btn",children:[r.jsx(Ln,{size:16})," Create patient with phone: ",e]}),x&&r.jsxs("button",{type:"button",onClick:()=>Ve("name"),className:"create-patient-btn",children:[r.jsx(Ln,{size:16})," Create patient: ",e]})]})]}),e.length<2&&r.jsxs("div",{className:"recent-patients-section",children:[r.jsx("h3",{children:"Recent Patients"}),_?r.jsx("div",{className:"recent-patients-list",children:[1,2,3].map(se=>r.jsx("div",{className:"recent-patient-chip skeleton",children:r.jsx(ee,{width:100,height:20})},se))}):r.jsx("div",{className:"recent-patients-list",children:j.map(se=>r.jsxs("button",{onClick:()=>De(se),className:"recent-patient-chip",children:[r.jsx("span",{className:"chip-avatar",children:se.name.charAt(0)}),r.jsx("span",{children:se.name})]},se.id))})]})]}),l&&r.jsx("div",{className:"medical-workspace no-print",children:r.jsxs("div",{className:"medical-grid",children:[r.jsxs("section",{className:"procedures-section no-print",children:[r.jsxs("div",{className:"medical-card procedures-container",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:"Available Procedures"}),r.jsx("button",{className:"manage-procedures-btn",onClick:()=>V(!0),children:"Manage"})]}),r.jsx("div",{className:"procedure-search-bar",style:{padding:"0 16px 12px 16px"},children:r.jsxs("div",{className:"search-input-wrapper header-variant",style:{background:"var(--mp-bg-sec)"},children:[r.jsx(fn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search procedures...",className:"medical-search-input header-input",value:H,onChange:se=>Q(se.target.value),style:{background:"transparent"}}),H&&r.jsx("button",{onClick:()=>Q(""),className:"clear-search-btn",style:{border:"none",background:"transparent",cursor:"pointer",color:"var(--mp-text-sec)"},children:r.jsx(Ot,{size:14})})]})}),r.jsx("div",{className:"procedures-list",children:Object.entries(de).map(([se,re])=>r.jsxs("div",{className:"procedure-category-group",children:[r.jsx("h4",{className:"category-label",children:se.replace("_"," ")}),re.map(oe=>r.jsxs("div",{onClick:()=>ce(oe),className:"procedure-item",children:[r.jsx("span",{className:"proc-name",children:oe.name}),r.jsxs("span",{className:"proc-cost",children:["",oe.cost]})]},oe.id))]},se))})]}),r.jsxs("div",{className:"medical-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("span",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>ne(!1),disabled:$,children:[r.jsx(qi,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:E,onChange:se=>I(se.target.value)})]})]}),r.jsx("section",{className:"plan-section no-print",children:r.jsxs("div",{className:"medical-card full-height",children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{className:B==="plan"?"active":"",onClick:()=>R("plan"),children:"Treatment Plan"}),r.jsx("button",{className:B==="history"?"active":"",onClick:()=>R("history"),children:"History"})]}),B==="plan"&&r.jsxs("div",{className:"treatment-plan-container",children:[r.jsx("div",{className:"treatment-plan-list",children:A.length===0?r.jsx("p",{className:"empty-plan-message no-print",children:"Click on procedures to add them to the treatment plan."}):A.map(se=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",children:se.name}),r.jsxs("div",{className:"plan-item-controls",children:[r.jsx("input",{type:"number",className:"cost-input",value:se.price,onChange:re=>ke(se.instanceId,parseFloat(re.target.value)||0)}),r.jsx("button",{className:"remove-proc-btn",onClick:()=>be(se.instanceId),children:r.jsx(zn,{size:14})})]})]},se.instanceId))}),A.length>0&&r.jsxs("div",{className:"plan-total",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{className:"total-amount",children:["",ye.toFixed(2)]})]})]}),B==="history"&&r.jsx("div",{className:"history-list",children:z.length===0?r.jsx("p",{className:"empty-plan-message",children:"No previous records found."}):z.map(se=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(se.date||se.createdAt||Date.now()).toLocaleDateString()}),r.jsx("span",{className:`record-status status-${se.status}`,children:se.status})]}),r.jsx("div",{className:"history-procedures",children:se.selected_procedures.map((re,oe)=>r.jsx("span",{className:"history-proc-tag",children:re.name},oe))}),se.notes&&r.jsxs("div",{className:"history-notes",children:[r.jsx("strong",{children:"Notes:"})," ",se.notes.substring(0,100),"..."]}),r.jsxs("div",{className:"history-record-actions",children:[se.status==="draft"&&r.jsxs("button",{className:"edit-record-btn",onClick:()=>Ce(se.id),children:[r.jsx(Ms,{size:14})," Edit"]}),se.bill_id&&r.jsxs("button",{className:"view-bill-btn",onClick:()=>{X(se.id),te(!0)},children:[r.jsx(Ar,{size:14})," View Bill"]})]})]},se.id))}),r.jsx("div",{className:"action-footer no-print",children:r.jsx("button",{className:"save-btn",onClick:()=>ne(!0),disabled:$||A.length===0,children:$?"Saving...":"Save & Bill"})})]})})]})}),u&&l&&r.jsx(bG,{patient:l,onClose:()=>h(!1),onSave:Ae}),q&&r.jsx($Oe,{onClose:()=>V(!1),onUpdate:Fe}),L&&me&&r.jsx(YOe,{isOpen:L,onClose:()=>te(!1),recordId:me,onBillingComplete:()=>{l&&ie(`/api/medical/patient/${l.id}`).then(se=>se.json()).then(se=>G(se)).catch(console.error)}})]})},XOe=({isOpen:t,onClose:e,patientId:n,patientName:a,onRecordPayment:i})=>{const[s,o]=v.useState([]),[l,c]=v.useState(null),[u,h]=v.useState(null),[p,m]=v.useState(!1),x=v.useCallback(async()=>{if(!(!t||!n)){m(!0),h(null);try{const j=await ie(`/api/patient-debts/${n}/transactions`);if(!j.ok)throw new Error(`Failed to fetch transactions: ${j.statusText}`);const _=(await j.json()).map(A=>({...A,debt_value:parseFloat(A.debt_value),amount_paid:parseFloat(A.amount_paid),balance_remaining:parseFloat(A.balance_remaining)}));o(_);const k=await ie(`/api/patient-debts/${n}/balance`);if(!k.ok)throw new Error(`Failed to fetch balance: ${k.statusText}`);const C=await k.json();c({patientId:C.patientId,patientName:C.patientName,totalDebtValue:parseFloat(C.totalDebtValue),totalAmountPaid:parseFloat(C.totalAmountPaid),netDebt:parseFloat(C.netDebt)})}catch(j){console.error("Error fetching transactions/balance:",j),h(j.message||"Failed to load transactions or balance.")}finally{m(!1)}}},[t,n]);if(v.useEffect(()=>{t&&x()},[t,x]),!t)return null;const b=r.jsxs("div",{id:"debt-history-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #debt-history-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: flex-start !important; /* Start from top for long lists */
                        overflow-y: auto !important;
                    }
                    #debt-history-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                        margin: 0 !important;
                        padding: 20px !important;
                    }
                    /* Ensure visibility of children */
                    #debt-history-modal-root * { visibility: visible !important; }
                    
                    /* Hide non-print elements */
                    .modal-close-button,
                    .view-button,
                    .modal-actions {
                        display: none !important;
                    }
                    
                    .balance-summary {
                         page-break-inside: avoid;
                    }
                    
                    .debt-table {
                        width: 100% !important;
                    }
                    
                    /* Reset table colors for print */
                    .debt-table th {
                        background-color: #f3f4f6 !important;
                        color: black !important;
                        -webkit-print-color-adjust: exact;
                    }
                }
            `}),r.jsxs("div",{className:"modal-content large-modal printable-section",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border-color)",paddingBottom:"0.75rem",marginBottom:"1rem"},children:[r.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:700,color:"var(--text-color)"},children:["Debt History: ",a]}),r.jsxs("button",{onClick:()=>window.print(),className:"action-text-button view-button",style:{padding:"0.4rem 0.8rem"},title:"Print Ledger",children:[r.jsx(Tf,{size:14})," ",r.jsx("span",{style:{fontSize:"0.85rem"},children:"Print Ledger"})]})]}),u&&r.jsx("div",{className:"modal-error-message",children:u}),p&&r.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}),!p&&l&&r.jsxs("div",{className:"balance-summary",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem"},children:[r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",backgroundColor:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Debt"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["",l.totalDebtValue.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",backgroundColor:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Paid"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--success-color)"},children:["",l.totalAmountPaid.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--success-color)",backgroundColor:l.netDebt>0?"rgba(239, 68, 68, 0.05)":"rgba(16, 185, 129, 0.05)",borderColor:l.netDebt>0?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Net Outstanding"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:800,color:l.netDebt>0?"var(--danger-color)":"var(--success-color)"},children:["",l.netDebt.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsx("h4",{style:{fontSize:"1rem",marginTop:"1.25rem",marginBottom:"0.75rem"},children:"Transaction History"}),!p&&s.length===0?r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"No transactions recorded for this patient."}):r.jsx("div",{className:"table-responsive",style:{marginTop:"0"},children:r.jsxs("table",{className:"debt-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Debt Added"}),r.jsx("th",{children:"Payment"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:s.map(j=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",style:{whiteSpace:"nowrap"},children:new Date(j.transaction_date).toLocaleDateString()}),r.jsx("td",{"data-label":"Debt Added",className:j.debt_value>0?"debt-added":"",style:{fontWeight:500},children:j.debt_value>0?`+ ${j.debt_value.toLocaleString("en-IN",{minimumFractionDigits:2})}`:"-"}),r.jsx("td",{"data-label":"Payment",className:j.amount_paid>0?"payment-received":"",style:{fontWeight:500},children:j.amount_paid>0?`- ${j.amount_paid.toLocaleString("en-IN",{minimumFractionDigits:2})}`:"-"}),r.jsxs("td",{"data-label":"Balance",style:{fontWeight:600},children:["",j.balance_remaining.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsx("td",{"data-label":"Mode",children:j.payment_mode?j.payment_mode.charAt(0).toUpperCase()+j.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:j.notes||"",children:j.notes||"-"})]},j.id))})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>{i()},className:"button-submit",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Record Payment"}),r.jsx("button",{type:"button",onClick:e,className:"button-cancel",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Close"})]})]})]});return XD.createPortal(b,document.body)},JOe=({isOpen:t,onClose:e,patientId:n,patientName:a,currentDebt:i,onPaymentSuccess:s})=>{const[o,l]=v.useState(""),[c,u]=v.useState(""),[h,p]=v.useState(""),[m,x]=v.useState("cash"),[b,j]=v.useState(null),[w,_]=v.useState(!1);v.useEffect(()=>{t&&(l(new Date().toISOString().split("T")[0]),u(""),p(""),x("cash"),j(null),_(!1))},[t]);const k=async A=>{if(A.preventDefault(),j(null),!n)return;const T=parseFloat(c||"0");if(T<=0){j("Payment amount must be greater than 0");return}_(!0);try{const E=await ie(`/api/patient-debts/${n}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:o,amount_paid:T,notes:h,payment_mode:m})});if(!E.ok){const I=await E.json();throw new Error(I.message||"Failed to add payment.")}s(),e(),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(E){console.error("Error adding payment:",E),j(E.message||"Failed to add payment.")}finally{_(!1)}};if(!t||!t)return null;const C=r.jsxs("div",{id:"add-payment-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                 /* Print styles for Add Payment Modal (if ever needed to print the form itself) */
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #add-payment-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: center !important;
                        justify-content: center !important;
                    }
                    #add-payment-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                    }
                    #add-payment-modal-root * { visibility: visible !important; }
                    .button-cancel, .button-submit, .modal-close-button { display: none !important; }
                }
            `}),r.jsxs("div",{className:"modal-content small-modal",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h3",{children:"Record Payment"}),r.jsxs("div",{className:"modal-header-subtitle",children:["Patient: ",a]})]}),r.jsxs("div",{className:"current-debt-info highlight-debt",children:[r.jsx("span",{children:"Outstanding Debt"}),r.jsxs("strong",{children:["",parseFloat(i).toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),b&&r.jsx("div",{className:"modal-error-message",children:b}),r.jsxs("form",{onSubmit:k,children:[r.jsxs("div",{className:"form-grid-2",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_date",children:"Date"}),r.jsx("input",{type:"date",id:"payment_date",value:o,onChange:A=>l(A.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_mode",children:"Mode"}),r.jsxs("select",{id:"payment_mode",value:m,onChange:A=>x(A.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid ()"}),r.jsx("input",{type:"number",id:"amount_paid",value:c,onChange:A=>u(A.target.value),step:"0.01",min:"0.01",className:"amount-input",placeholder:"0.00",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_notes",children:"Notes"}),r.jsx("textarea",{id:"payment_notes",value:h,onChange:A=>p(A.target.value),placeholder:"e.g., Partial payment via cash",className:"h-60"})]}),r.jsxs("div",{className:"modal-actions mt-0 pt-16",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",disabled:w,children:w?"Recording...":"Record Payment"})]})]})]})]});return XD.createPortal(C,document.body)},BN=()=>{const t=Mt(),e=ps(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(""),[h,p]=v.useState("debtHighToLow"),[m,x]=v.useState(!0),[b,j]=v.useState(""),[w,_]=v.useState(!1),[k,C]=v.useState(!1),[A,T]=v.useState(null),[E,I]=v.useState(0),$=v.useMemo(()=>{let q=[...n];m&&(q=q.filter(H=>parseFloat(H.netDebt)>0));const V=parseFloat(b);switch(!isNaN(V)&&V>0&&(q=q.filter(H=>parseFloat(H.netDebt)>=V)),h){case"name":q.sort((H,Q)=>H.name.localeCompare(Q.name));break;case"debtHighToLow":q.sort((H,Q)=>parseFloat(Q.netDebt)-parseFloat(H.netDebt));break;case"debtLowToHigh":q.sort((H,Q)=>parseFloat(H.netDebt)-parseFloat(Q.netDebt));break}return q},[n,m,b,h]),U=v.useCallback(async()=>{s(!0),l(null);try{const q=c?`/api/patient-debts?search=${encodeURIComponent(c)}`:"/api/patient-debts",V=await ie(q);if(!V.ok)throw new Error(`Failed to fetch patients with debt: ${V.statusText}`);const H=await V.json();a(H);const Q=H.reduce((L,te)=>L+parseFloat(te.netDebt||"0"),0);I(Q)}catch(q){console.error("Failed to fetch patients with debt:",q),l(q.message||"Failed to load patients with debt.")}finally{s(!1)}},[c]);v.useEffect(()=>{U()},[U]);const B=q=>{q&&(e.prefetchQuery({queryKey:Kt.patients.context(q),queryFn:async()=>{const V=await ie(`/api/patients/${q}/context`);if(!V.ok)throw new Error("Failed to fetch patient context");return V.json()},staleTime:1e3*60*5}),e.prefetchQuery({queryKey:Kt.patientDebts.balance(q),queryFn:async()=>{const V=await ie(`/api/patient-debts/${q}/balance`);if(!V.ok)throw new Error("Failed to fetch patient debt");return V.json()},staleTime:1e3*60}),e.prefetchQuery({queryKey:Kt.queue.latest(q),queryFn:async()=>{const V=await ie(`/api/queue/patient/${q}/latest`);if(!V.ok){if(V.status===404)return null;throw new Error("Failed to fetch queue status")}return V.json()},staleTime:1e3*5}))},R=v.useCallback(()=>{U()},[U]),z=q=>{T(q),_(!0)},G=()=>{_(!1),T(null)},K=q=>{T(q),C(!0)},Y=()=>{C(!1),T(null)};return i?r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(ee,{width:80,height:36}),r.jsx(ee,{width:200,height:32})]}),r.jsx(ee,{width:250,height:36})]}),r.jsxs("div",{className:"filter-container",children:[r.jsx(ee,{width:200,height:40}),r.jsx(ee,{width:120,height:40}),r.jsx(ee,{width:100,height:40}),r.jsx(ee,{width:150,height:40})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Total Debt Value"}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6].map(q=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:180,height:32})})]},q))})]})})]}):r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(en,{size:20})}),r.jsx("h2",{children:"Patient Debt Management"})]}),r.jsxs("div",{className:`total-debt-display ${E>0?"debt-positive":"debt-zero"}`,children:[r.jsx(pd,{size:20}),r.jsx("strong",{children:"Total Outstanding Debt:"})," ",E.toFixed(2)]})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("div",{className:"filter-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:c,onChange:q=>u(q.target.value),className:"filter-search-input"}),r.jsxs("select",{id:"sortBy",value:h,onChange:q=>p(q.target.value),className:"filter-select",title:"Sort by",children:[r.jsx("option",{value:"debtHighToLow",children:"Debt "}),r.jsx("option",{value:"debtLowToHigh",children:"Debt "}),r.jsx("option",{value:"name",children:"Name A-Z"})]}),r.jsx("input",{type:"number",id:"minDebt",value:b,onChange:q=>j(q.target.value),placeholder:"Min ",min:"0",className:"filter-number-input",title:"Minimum debt amount"}),r.jsxs("label",{className:"filter-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:m,onChange:q=>x(q.target.checked)}),"Outstanding only"]}),r.jsxs("span",{className:"filter-count",children:[$.length,"/",n.length]})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsxs("th",{children:[r.jsx(qn,{size:14})," Patient Name"]}),r.jsxs("th",{children:[r.jsx(Fv,{size:14})," Phone"]}),r.jsxs("th",{children:[r.jsx(Sv,{size:14})," Total Debt Value"]}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{className:"actions-cell",children:"Actions"})]})}),r.jsx("tbody",{children:$.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"no-results-message",children:c?"No patients found matching your search.":"No patients with outstanding debt."})}):$.map(q=>r.jsxs("tr",{onClick:()=>t(`/dashboard/edit-complaint/patient/${q.id}`),onMouseEnter:()=>B(q.id),style:{cursor:"pointer"},title:"Click to view patient details",children:[r.jsx("td",{"data-label":"Patient Name",children:r.jsxs("div",{className:"patient-name-cell",children:[r.jsx("strong",{children:q.name}),q.age&&q.gender&&r.jsxs("span",{className:"patient-meta",children:[q.age,"y / ",q.gender]})]})}),r.jsx("td",{"data-label":"Phone",children:q.phone||"-"}),r.jsxs("td",{"data-label":"Total Debt Value",children:["",q.totalDebtValue]}),r.jsxs("td",{"data-label":"Total Paid",className:"amount-paid",children:["",q.totalAmountPaid]}),r.jsxs("td",{"data-label":"Net Debt",className:parseFloat(q.netDebt)>0?"debt-outstanding":"debt-clear",children:["",q.netDebt]}),r.jsx("td",{className:"actions-cell",onClick:V=>V.stopPropagation(),children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsxs("button",{onClick:()=>z(q),className:"action-text-button view-button",title:"View Transactions",children:[r.jsx(qm,{size:16})," View History"]}),r.jsxs("button",{onClick:()=>K(q),className:"action-text-button add-payment-button",title:"Record Payment",children:[r.jsx(cs,{size:16})," Record Payment"]})]})})]},q.id))})]})}),w&&A&&r.jsx(XOe,{isOpen:w,onClose:G,patientId:A.id,patientName:A.name,onRecordPayment:()=>{G(),C(!0)}}),k&&A&&r.jsx(JOe,{isOpen:k,onClose:Y,patientId:A.id,patientName:A.name,currentDebt:A.netDebt,onPaymentSuccess:()=>{R(),_(!0)}})]})},OG=()=>{const t=Mt(),e=Ur(),[n,a]=v.useState(""),[i,s]=v.useState([]),[o,l]=v.useState(!1),[c,u]=v.useState(null),[h,p]=v.useState([]),[m,x]=v.useState([]),[b,j]=v.useState(!1),[w,_]=v.useState(!1),[k,C]=v.useState("idle"),[A,T]=v.useState(null),[E,I]=v.useState(""),$=v.useMemo(()=>ql(async le=>{if(le.trim().length<2){s([]),l(!1);return}l(!0);try{const _e=new URLSearchParams({search:encodeURIComponent(le),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Ve=await ie(`/api/patients?${_e.toString()}`);if(Ve.ok){const De=await Ve.json();s(De.patients||[])}}catch(_e){console.error("Search failed",_e)}finally{l(!1)}},300),[]),U=le=>{const _e=le.target.value;a(_e),_e.length>=2?(l(!0),$(_e)):(s([]),l(!1))},B=v.useCallback(async le=>{_(!0);try{const _e=await ie(`/api/patient-files/${le}`);if(_e.ok){const Ve=await _e.json();x(Ve)}}catch(_e){console.error("Failed to fetch files",_e)}finally{_(!1)}},[]),R=le=>{u({id:le.id,name:le.name,age:le.age,gender:le.gender,phone:le.phone,token:le.token}),a(""),I(""),s([]),T(null),C("idle"),p([]),B(le.id)},z=()=>{u(null),p([]),x([]),C("idle")};Te.useEffect(()=>{if(e.state&&e.state.patient){const le=e.state.patient;R(le)}},[e.state]);const G=le=>{if(le.target.files){const _e=Array.from(le.target.files);p(Ve=>[...Ve,..._e]),C("idle")}},K=le=>{p(_e=>_e.filter((Ve,De)=>De!==le))},Y=async le=>{if(confirm("Are you sure you want to delete this file?"))try{(await ie(`/api/patient-files/${le}`,{method:"DELETE"})).ok?x(Ve=>Ve.filter(De=>De.id!==le)):alert("Failed to delete file.")}catch(_e){console.error("Delete error",_e),alert("Error deleting file.")}},q=le=>le.startsWith("image/")?r.jsx(jw,{size:20}):le==="application/pdf"?r.jsx(Ar,{size:20}):le.startsWith("video/")?r.jsx(oq,{size:20}):le.startsWith("audio/")?r.jsx(hq,{size:20}):r.jsx(rf,{size:20}),V=le=>{if(le===0)return"0 Bytes";const _e=1024,Ve=["Bytes","KB","MB","GB"],De=Math.floor(Math.log(le)/Math.log(_e));return parseFloat((le/Math.pow(_e,De)).toFixed(2))+" "+Ve[De]},H=async()=>{if(!(!c||h.length===0)){j(!0),T(null),C("idle");try{const le=new FormData;h.forEach(Ve=>{le.append("files",Ve)});const _e=await ie(`/api/patient-files/${c.id}`,{method:"POST",body:le});if(_e.ok){C("success");const Ve=await _e.json();Ve.files&&x(De=>[...Ve.files,...De]),setTimeout(()=>{p([]),C("idle")},1500)}else throw new Error("Upload failed")}catch(le){console.error("Upload error",le),T("Failed to upload files. Please try again."),C("error")}finally{j(!1)}}},[Q,L]=v.useState(null),[te,me]=v.useState(""),X=v.useRef(null),Re=()=>{X.current&&(X.current.value="",X.current.click())},Se=le=>{L(le.id),me(le.original_name)},Ee=()=>{L(null),me("")},Fe=async le=>{if(te.trim())try{(await ie(`/api/patient-files/${le}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:te})})).ok?(x(Ve=>Ve.map(De=>De.id===le?{...De,original_name:te}:De)),L(null)):alert("Failed to rename file.")}catch(_e){console.error("Rename error",_e),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(en,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Patient Files"})]})}),c?r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"selected-patient-header",children:[r.jsx("div",{className:"patient-avatar",children:c.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"selected-patient-info",children:[r.jsx("h2",{className:"selected-patient-name",children:c.name}),r.jsxs("div",{className:"selected-patient-details",children:[r.jsxs("span",{children:["Token: #",c.token||"NA"]}),c.gender&&r.jsxs("span",{children:[" ",c.gender]}),c.age&&r.jsxs("span",{children:[" ",c.age," yrs"]}),c.phone&&r.jsxs("span",{children:[" ",c.phone]})]}),r.jsx("input",{ref:X,type:"file",multiple:!0,onChange:G,style:{display:"none"}})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Re,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx($v,{size:18}),r.jsx("span",{children:"Upload"})]}),r.jsx("button",{onClick:z,className:"secondary-btn change-patient-btn",children:"Change Patient"})]})]}),(m.length>0||w)&&r.jsxs("div",{className:"existing-files-section mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(rf,{className:"text-indigo-500",size:20}),"Uploaded Files (",m.length,")"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(fn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search in Drive...",value:E,onChange:le=>I(le.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),w?r.jsx("div",{className:"flex justify-center p-8",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(ee,{width:300,height:20}),r.jsx(ee,{width:300,height:20}),r.jsx(ee,{width:300,height:20})]})}):r.jsxs("div",{className:"file-grid",children:[m.filter(le=>le.original_name.toLowerCase().includes(E.toLowerCase())).map(le=>{const _e=le.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[_e?r.jsx("img",{src:le.url,alt:le.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:q(le.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:le.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-text-btn download",title:"Download",children:"Download"}),r.jsx("button",{onClick:()=>Se(le),className:"action-text-btn rename",title:"Rename",children:"Rename"}),r.jsx("button",{onClick:()=>Y(le.id),className:"action-text-btn delete",title:"Delete",children:"Delete"})]})]}),r.jsx("div",{className:"file-card-meta",children:Q===le.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:te,onChange:Ve=>me(Ve.target.value),className:"rename-input",autoFocus:!0,onKeyDown:Ve=>{Ve.key==="Enter"&&Fe(le.id),Ve.key==="Escape"&&Ee()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>Fe(le.id),className:"icon-btn text-green-600",children:r.jsx(Is,{size:14})}),r.jsx("button",{onClick:Ee,className:"icon-btn text-red-500",children:r.jsx(Ot,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:_e?r.jsx(jw,{size:16,className:"text-purple-500"}):q(le.mime_type)}),r.jsx("a",{href:le.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:le.original_name,children:le.original_name})]})})]},le.id)}),m.filter(le=>le.original_name.toLowerCase().includes(E.toLowerCase())).length===0&&E&&r.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(fn,{size:48,className:"text-slate-200"}),r.jsxs("p",{children:['No files found matching "',E,'"']})]})})]})]}),(h.length>0||k==="success"||A)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:h.length>0?"Pending Uploads":"Upload Status"}),A&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(zr,{size:20}),A]}),k==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Is,{size:20}),"Files uploaded successfully!"]}),h.length>0&&r.jsx("div",{className:"file-list",children:h.map((le,_e)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(rf,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:le.name,children:le.name}),r.jsx("div",{className:"file-size",children:V(le.size)})]}),r.jsx("button",{onClick:()=>K(_e),className:"remove-file-btn",title:"Remove file",children:r.jsx(Ot,{size:16})})]},_e))}),h.length>0&&r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{onClick:()=>p([]),className:"secondary-btn",disabled:b,children:"Clear"}),r.jsx("button",{onClick:H,className:"primary-btn",disabled:b,children:b?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx($v,{size:18}),"Upload ",h.length," File",h.length!==1?"s":""]})})]})]})]}):r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-slate-700",children:[r.jsx(fn,{className:"text-indigo-500"}),"Search Patient"]}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(fn,{className:"search-icon-files",size:20}),r.jsx("input",{type:"text",placeholder:"Enter patient name, phone, or token...",value:n,onChange:U,className:"search-input",autoFocus:!0})]}),o?r.jsx("div",{className:"patient-results-list",children:[1,2,3].map(le=>r.jsxs("div",{className:"patient-result-item",style:{cursor:"default"},children:[r.jsx(ee,{width:150,height:20}),r.jsx(ee,{width:100,height:16})]},le))}):i.length>0&&r.jsx("ul",{className:"patient-results-list",children:i.map(le=>r.jsxs("li",{className:"patient-result-item",onClick:()=>R(le),children:[r.jsxs("div",{children:[r.jsx("div",{className:"patient-name-text",children:le.name}),r.jsxs("div",{className:"patient-meta",children:[r.jsxs("span",{children:["#",le.token||"N/A"]}),le.gender&&r.jsx("span",{children:le.gender}),le.age&&r.jsxs("span",{children:[le.age," yrs"]})]})]}),r.jsx("div",{className:"patient-phone",children:le.phone})]},le.id))}),n.length>=2&&!o&&i.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"30px",color:"#94a3b8"},children:['No patients found matching "',n,'"']})]})]})},KM=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(!0),[u,h]=v.useState("idle"),[p,m]=v.useState(null),[x,b]=v.useState(""),j=v.useCallback(async()=>{c(!0);try{const Y=await ie("/api/clinic-files");if(Y.ok){const q=await Y.json();n(q)}}catch(Y){console.error("Failed to fetch clinic files",Y)}finally{c(!1)}},[]);v.useEffect(()=>{j()},[j]);const w=Y=>{if(Y.target.files){const q=Array.from(Y.target.files);i(V=>[...V,...q]),h("idle")}},_=Y=>{i(q=>q.filter((V,H)=>H!==Y))},k=async Y=>{if(confirm("Are you sure you want to delete this file?"))try{(await ie(`/api/clinic-files/${Y}`,{method:"DELETE"})).ok?n(V=>V.filter(H=>H.id!==Y)):alert("Failed to delete file.")}catch(q){console.error("Delete error",q),alert("Error deleting file.")}},C=Y=>Y.startsWith("image/")?r.jsx(jw,{size:20}):Y==="application/pdf"?r.jsx(Ar,{size:20}):Y.startsWith("video/")?r.jsx(oq,{size:20}):Y.startsWith("audio/")?r.jsx(hq,{size:20}):r.jsx(rf,{size:20}),A=Y=>{if(Y===0)return"0 Bytes";const q=1024,V=["Bytes","KB","MB","GB"],H=Math.floor(Math.log(Y)/Math.log(q));return parseFloat((Y/Math.pow(q,H)).toFixed(2))+" "+V[H]},T=async()=>{if(a.length!==0){o(!0),m(null),h("idle");try{const Y=new FormData;a.forEach(V=>{Y.append("files",V)});const q=await ie("/api/clinic-files",{method:"POST",body:Y});if(q.ok){h("success");const V=await q.json();V.files&&n(H=>[...V.files,...H]),setTimeout(()=>{i([]),h("idle")},1500)}else throw new Error("Upload failed")}catch(Y){console.error("Upload error",Y),m("Failed to upload files. Please try again."),h("error")}finally{o(!1)}}},[E,I]=v.useState(null),[$,U]=v.useState(""),B=v.useRef(null),R=()=>{B.current&&(B.current.value="",B.current.click())},z=Y=>{I(Y.id),U(Y.original_name)},G=()=>{I(null),U("")},K=async Y=>{if($.trim())try{(await ie(`/api/clinic-files/${Y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:$})})).ok?(n(V=>V.map(H=>H.id===Y?{...H,original_name:$}:H)),I(null)):alert("Failed to rename file.")}catch(q){console.error("Rename error",q),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(en,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Clinic Files"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:B,type:"file",multiple:!0,onChange:w,style:{display:"none"}}),r.jsxs("button",{onClick:R,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx($v,{size:18}),r.jsx("span",{children:"Upload Files"})]})]})]})}),r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(rf,{className:"text-indigo-500",size:20}),"Clinic Drive (",e.length," files)"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(fn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search files...",value:x,onChange:Y=>b(Y.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),l?r.jsx("div",{className:"file-grid",children:[1,2,3,4].map(Y=>r.jsxs("div",{className:"file-card-item",children:[r.jsx(ee,{height:150}),r.jsx("div",{className:"p-3",children:r.jsx(ee,{height:20,width:"80%"})})]},Y))}):r.jsxs("div",{className:"file-grid",children:[e.filter(Y=>Y.original_name.toLowerCase().includes(x.toLowerCase())).map(Y=>{const q=Y.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[q?r.jsx("img",{src:Y.url,alt:Y.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:C(Y.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:Y.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-text-btn download",title:"Download",children:"Download"}),r.jsx("button",{onClick:()=>z(Y),className:"action-text-btn rename",title:"Rename",children:"Rename"}),r.jsx("button",{onClick:()=>k(Y.id),className:"action-text-btn delete",title:"Delete",children:"Delete"})]})]}),r.jsx("div",{className:"file-card-meta",children:E===Y.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:$,onChange:V=>U(V.target.value),className:"rename-input",autoFocus:!0,onKeyDown:V=>{V.key==="Enter"&&K(Y.id),V.key==="Escape"&&G()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>K(Y.id),className:"icon-btn text-green-600",children:r.jsx(Is,{size:14})}),r.jsx("button",{onClick:G,className:"icon-btn text-red-500",children:r.jsx(Ot,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:q?r.jsx(jw,{size:16,className:"text-purple-500"}):C(Y.mime_type)}),r.jsx("a",{href:Y.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:Y.original_name,children:Y.original_name})]})})]},Y.id)}),e.filter(Y=>Y.original_name.toLowerCase().includes(x.toLowerCase())).length===0&&!l&&r.jsx("div",{className:"col-span-full text-center py-20 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(rf,{size:48,className:"text-slate-200"}),r.jsx("p",{children:x?`No files found matching "${x}"`:"This clinic's drive is empty. Upload some files!"})]})})]}),(a.length>0||u==="success"||p)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:a.length>0?"Pending Uploads":"Upload Status"}),p&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(zr,{size:20}),p]}),u==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Is,{size:20}),"Files uploaded successfully!"]}),a.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"file-list max-h-60 overflow-y-auto mb-6",children:a.map((Y,q)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(rf,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:Y.name,children:Y.name}),r.jsx("div",{className:"file-size",children:A(Y.size)})]}),r.jsx("button",{onClick:()=>_(q),className:"remove-file-btn",title:"Remove file",children:r.jsx(Ot,{size:16})})]},q))}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>i([]),className:"secondary-btn",disabled:s,children:"Clear All"}),r.jsx("button",{onClick:T,className:"primary-btn",disabled:s,children:s?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx($v,{size:18}),"Upload ",a.length," File",a.length!==1?"s":""]})})]})]})]})]})]})},mw=()=>{const t=Mt(),e=Ur(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState([]),[c,u]=v.useState(""),[h,p]=v.useState([]),[m,x]=v.useState(null),[b,j]=v.useState(!1),[w,_]=v.useState(null),[k,C]=v.useState(!0),[A,T]=v.useState(""),[E,I]=v.useState([]),[$,U]=v.useState(!1),[B,R]=v.useState(null),[z,G]=v.useState(!1),[K,Y]=v.useState(!1),[q,V]=v.useState([]),[H,Q]=v.useState(!1),[L,te]=v.useState(null),me=/^\+?[0-9\s\-().]{7,20}$/,X=/^[a-zA-Z\s'-]{2,}$/,Re=v.useCallback(async()=>{try{const re=await ie("/api/drugs");if(!re.ok)throw new Error("Failed to fetch drugs");const oe=await re.json(),je=oe.drugs||oe||[];s(je)}catch(re){console.error("Failed to fetch available drugs:",re),x("Could not load drug list. "+re.message)}},[]),Se=v.useCallback(async re=>{Q(!0),te(null);try{const oe=await ie(`/api/pharmacy-orders/patient/${re}`);if(!oe.ok){const Oe=await oe.json().catch(()=>({}));throw new Error(Oe.message||`HTTP error! status: ${oe.status}`)}const je=await oe.json();V(je||[])}catch(oe){console.error("Failed to fetch previous pharmacy orders:",oe),te(`Could not load previous orders: ${oe.message}`)}finally{Q(!1)}},[]);v.useEffect(()=>{var re;Re(),(re=e.state)!=null&&re.patient?_e(e.state.patient):C(!0)},[Re,e.state]),v.useEffect(()=>{n!=null&&n.id?Se(n.id):V([])},[n,Se]);const Ee=v.useMemo(()=>new ho(i,{keys:["name","brand_name"],threshold:.3}),[i]);v.useEffect(()=>{if(!c){p([]);return}const re=Ee.search(c).map(oe=>oe.item);p(re.slice(0,10))},[c,Ee]);const Fe=v.useMemo(()=>ql(async re=>{if(re.trim().length<2){I([]),U(!1),R(null);return}U(!0),R(null);try{const oe=new URLSearchParams({search:encodeURIComponent(re),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),je=await ie(`/api/patients?${oe.toString()}`);if(!je.ok){const J=await je.text();throw new Error(`API Error (${je.status}): ${J||je.statusText}`)}const Oe=await je.json();I(Oe.patients)}catch(oe){console.error("Error searching patients:",oe),R(oe.message||"Failed to search patients."),I([])}finally{U(!1)}},300),[me]),le=re=>{const oe=re.target.value;T(oe),G(me.test(oe)),Y(X.test(oe)&&!me.test(oe)),U(!0),Fe(oe)},_e=v.useCallback(re=>{a(re),C(!1),T(""),I([]),R(null)},[]),Ve=v.useCallback(async re=>{if(!A||re==="phone"&&!z||re==="name"&&!K){R(`Invalid ${re} to create a new patient.`);return}U(!0),R(null);try{const je=await ie("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:re==="name"?A:"direct pharmacy",phone:re==="phone"?A:null,age:null,gender:null,token:null})});if(!je.ok){const J=await je.json();throw new Error(J.message||`Failed to create patient: ${je.statusText}`)}const Oe=await je.json();alert(`New patient "${Oe.name}" created with ${re==="phone"?`phone ${Oe.phone}`:`name ${Oe.name}`}.`),_e(Oe)}catch(oe){console.error("Error creating new patient:",oe),R(oe.message||"Failed to create new patient.")}finally{U(!1)}},[A,z,K,_e]),De=()=>{a(null),C(!0),l([]),x(null),V([])},ue=re=>{if(o.some(oe=>oe.drug_id===re.id)){const oe=re.name||re.brand_name||"This drug";x(`${oe} is already in the order.`),setTimeout(()=>x(null),3e3),u(""),p([]);return}l(oe=>[...oe,{drug_id:re.id,name:re.name||re.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,mrp:Number(re.mrp)||0,originalMrp:Number(re.mrp)||0,stock:re.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(re.mrp)||0)/(ce(re.pack)||1),pack:re.pack}]),u(""),p([])},Ae=()=>{const re=c.trim();if(!re){x("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>x(null),3e3);return}t("/dashboard/inventory/add",{state:{initialDrugName:re}}),u(""),p([])},ce=re=>{if(!re)return null;const oe=re.match(/(?:\d+x)?(\d+)/);return oe?parseInt(oe[1],10):null},be=re=>{l(oe=>oe.filter(je=>(je.drug_id??je.name)!==re))},ke=(re,oe)=>{l(je=>je.map(Oe=>{if((Oe.drug_id??Oe.name)===re&&Oe.isLoose){const xe=ce(Oe.pack),ge=Math.max(0,oe),he=ge*(xe??1)+(Oe.looseUnits??0);return{...Oe,loosePacks:ge,looseQuantity:he,pack_quantity:ge}}return Oe}))},Ce=(re,oe)=>{l(je=>je.map(Oe=>{if((Oe.drug_id??Oe.name)===re&&Oe.isLoose){const xe=ce(Oe.pack),ge=Math.max(0,oe),he=(Oe.loosePacks??0)*(xe??1)+ge;return{...Oe,looseUnits:ge,looseQuantity:he}}return Oe}))},ne=re=>{const oe=[];re.medications.forEach(je=>{if(o.find(J=>J.drug_id&&je.drug_id&&J.drug_id===je.drug_id||J.name.toLowerCase()===je.name.toLowerCase()))l(J=>J.map(xe=>{if(xe.drug_id&&je.drug_id&&xe.drug_id===je.drug_id||xe.name.toLowerCase()===je.name.toLowerCase()){const ge=(xe.pack_quantity??0)+(je.pack_quantity??0),he=(xe.loose_quantity??0)+(je.loose_quantity??0),Ie=je.tabletsPerDay??xe.tabletsPerDay,nt=je.numberOfDays??xe.numberOfDays,Be=ce(xe.pack),Ge=ge*(Be??1)+he;return{...xe,pack_quantity:ge,loose_quantity:he,directions_to_use:je.directions_to_use??xe.directions_to_use,tabletsPerDay:Ie,numberOfDays:nt,looseQuantity:Ge,loosePacks:Math.floor(Ge/(Be??1)),looseUnits:Ge%(Be??1)}}return xe}));else{let J=je.drug_id,xe=je.drug_id?i.find(ge=>ge.id===je.drug_id):void 0;if(!J&&je.name){const ge=i.find(he=>he.name&&he.name.toLowerCase()===je.name.toLowerCase());ge&&(J=ge.id,xe=ge)}oe.push({drug_id:J,name:je.name,pack_quantity:je.pack_quantity??0,loose_quantity:je.loose_quantity??0,directions_to_use:je.directions_to_use,tabletsPerDay:je.tabletsPerDay??1,numberOfDays:je.numberOfDays??1,mrp:xe?xe.mrp:je.pack_price,originalMrp:xe?xe.mrp:je.pack_price,stock:xe?xe.stock:je.stock,isLoose:!0,loosePacks:0,looseUnits:(je.pack_quantity??0)*(ce((xe==null?void 0:xe.pack)||je.pack)??1)+(je.loose_quantity??0),looseQuantity:(je.pack_quantity??0)*(ce((xe==null?void 0:xe.pack)||je.pack)??1)+(je.loose_quantity??0),pricePerLooseUnit:(xe?Number(xe.mrp):Number(je.pack_price)||0)/(ce((xe==null?void 0:xe.pack)||je.pack)||1),pack:(xe==null?void 0:xe.pack)||je.pack})}}),l(je=>[...je,...oe]),re.prescriptionForUnavailableDrugs&&(!w||!w.includes(re.prescriptionForUnavailableDrugs))&&_(je=>je?`${je}

-- From Order ${re.id.substring(0,8)} --
${re.prescriptionForUnavailableDrugs}`:re.prescriptionForUnavailableDrugs),x("Medications from previous order added to current order."),setTimeout(()=>x(null),3e3)},ye=async re=>{if(re.preventDefault(),x(null),j(!0),!n){x("No patient selected for the order."),j(!1);return}if(o.length===0&&!(w!=null&&w.trim())){x("Please add at least one medication or provide a prescription for unavailable drugs."),j(!1);return}const oe=o.filter(Oe=>{const J=Oe.looseQuantity??0;return J<=0||Oe.stock!==void 0&&J>Oe.stock});if(oe.length>0){x(`Invalid quantity or insufficient stock for: ${oe.map(Oe=>Oe.name).join(", ")}`),j(!1);return}const je={patient_id:n.id,items:o.map(Oe=>{const J=Oe.mrp??0,xe=Oe.pricePerLooseUnit??0,ge=xe*(Oe.looseQuantity??0);return{drug_id:Oe.drug_id===void 0?null:Oe.drug_id,name:Oe.name,pack_quantity:Oe.loosePacks??0,loose_quantity:Oe.looseUnits??0,pack_price:J,loose_price:xe,total_price:ge,price:Oe.originalMrp??0,directions_to_use:Oe.directions_to_use===void 0?null:Oe.directions_to_use,tabletsPerDay:Oe.tabletsPerDay??1,numberOfDays:Oe.numberOfDays??1}}),order_total:de,prescription_for_unavailable_drugs:w};try{const Oe=await ie("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!Oe.ok){const J=await Oe.json();throw new Error(J.message||`Failed to create order: ${Oe.statusText}`)}t(-1)}catch(Oe){console.error("Failed to create pharmacy order:",Oe),x(Oe.message||"Failed to create order. Please try again.")}finally{j(!1)}},de=v.useMemo(()=>o.reduce((re,oe)=>{const je=oe.isLoose?oe.pricePerLooseUnit??0:oe.mrp??0,Oe=oe.isLoose?oe.looseQuantity??0:oe.quantity??0;return re+je*Oe},0),[o]),se=(Number(de)||0).toFixed(2);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(en,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),k&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:A,onChange:le,className:"custom-text-input mt-1",autoFocus:!0})]}),B&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:B})," ",$?r.jsx("div",{className:"patient-search-results items-loading mt-1",children:[1,2,3].map(re=>r.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(ee,{width:40,height:20}),r.jsx(ee,{width:120,height:20})]}),r.jsx("div",{className:"mt-1 sm:mt-0",children:r.jsx(ee,{width:150,height:16})})]})},re))}):E.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",E.map(re=>r.jsxs("li",{onClick:()=>_e({id:re.id,name:re.name,token:re.token,age:re.age,gender:re.gender,phone:re.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",re.token]}),re.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[re.age?`${re.age} yrs`:"Age N/A",re.gender?` / ${re.gender}`:" / Gender N/A",re.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",re.phone]})]})]}),re.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",re.phone]})]},re.id))]})]}),A.length>=2&&!$&&E.length===0&&!B&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',A,'".']}),z&&r.jsx("button",{type:"button",onClick:()=>Ve("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:$,children:'Create "direct pharmacy" Patient with this Phone'}),K&&r.jsx("button",{type:"button",onClick:()=>Ve("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:$,children:"Create Patient with this Name"})]}),A.length<2&&!$&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),n&&!k&&r.jsxs("form",{onSubmit:ye,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:n.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:n.token??"N/A"}),n.age&&`    Age: ${n.age}`,n.gender&&`    Gender: ${n.gender}`,n.phone&&`    Phone: ${n.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${n.id}`,children:["ID: ",n.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:De,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),m&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:m})," ",H?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:[1,2].map(re=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx(ee,{width:180,height:20}),r.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx(ee,{width:"90%",height:16}),r.jsx(ee,{width:"70%",height:16})]}),r.jsx(ee,{width:"100%",height:36,style:{borderRadius:"6px"}})]},re))})]}):L?r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:L}):q.length>0?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:q.map(re=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(re.date).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${re.status==="dispensed"?"bg-green-100 text-green-800":re.status==="pending"?"bg-yellow-100 text-yellow-800":re.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:re.status.charAt(0).toUpperCase()+re.status.slice(1)})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:re.medications.map((oe,je)=>r.jsxs("li",{children:[r.jsx("strong",{children:oe.name}),": ",oe.quantity," Qty",oe.directions_to_use&&` - Directions: ${oe.directions_to_use}`]},je))}),re.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),r.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",r.jsx(yd,{remarkPlugins:[xd],children:re.prescriptionForUnavailableDrugs})]})]}),r.jsxs("button",{type:"button",onClick:()=>ne(re),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[r.jsx(Ln,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},re.id))})]}):n&&r.jsx("div",{className:"content-section text-center py-4 mt-4",children:r.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:w??"",onChange:re=>_(re.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:c,onChange:re=>u(re.target.value),className:"custom-text-input mt-1"}),c&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",h.length>0&&r.jsxs("ul",{children:[" ",h.map(re=>r.jsxs("li",{onClick:()=>ue(re),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:re.name||re.brand_name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",re.stock??"N/A",", MRP: ",Number(re.mrp||0).toFixed(2),")"]})]},re.id))]}),c.trim()&&!i.some(re=>re.name&&re.name.toLowerCase()===c.trim().toLowerCase()||re.brand_name&&re.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsxs("div",{onClick:Ae,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',c.trim(),'" as new item']}),c.trim()&&h.length===0&&i.some(re=>re.name&&re.name.toLowerCase()===c.trim().toLowerCase()||re.brand_name&&re.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",o.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),o.length>0&&r.jsx("ul",{className:"space-y-4",children:o.map(re=>{const oe=re.drug_id??re.name,je=!re.drug_id;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${je?"custom":""}`,children:[" ",re.name,je?" (custom)":""]}),!je&&re.pricePerLooseUnit!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(re.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),re.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${re.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",re.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-packs-${oe}`,className:"dosage-label",children:"Packs:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>ke(oe,(re.loosePacks??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-packs-${oe}`,min:"0",value:re.loosePacks||"",onChange:Oe=>{const J=parseInt(Oe.target.value,10);ke(oe,isNaN(J)?0:J)},onFocus:Oe=>Oe.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>ke(oe,(re.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-units-${oe}`,className:"dosage-label",children:"Loose:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>Ce(oe,(re.looseUnits??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-units-${oe}`,min:"0",value:re.looseUnits||"",onChange:Oe=>{const J=parseInt(Oe.target.value,10);Ce(oe,isNaN(J)?0:J)},onFocus:Oe=>Oe.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>Ce(oe,(re.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),re.pack&&r.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",re.pack.split("x")[1]||re.pack," per pack)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((re.pricePerLooseUnit??0)*(re.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>be(oe),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(zn,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-per-day-${oe}`,className:"dosage-label",children:"Per Day:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Oe=>Oe.map(J=>J.drug_id===oe?{...J,tabletsPerDay:Math.max(1,(J.tabletsPerDay??1)-1)}:J)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`tablets-per-day-${oe}`,min:"1",value:re.tabletsPerDay??1,onChange:Oe=>{const J=parseInt(Oe.target.value,10);l(xe=>xe.map(ge=>ge.drug_id===oe?{...ge,tabletsPerDay:isNaN(J)?1:Math.max(1,J)}:ge))},onFocus:Oe=>Oe.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Oe=>Oe.map(J=>J.drug_id===oe?{...J,tabletsPerDay:(J.tabletsPerDay??1)+1}:J)),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`number-of-days-${oe}`,className:"dosage-label",children:"No. Days:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Oe=>Oe.map(J=>J.drug_id===oe?{...J,numberOfDays:Math.max(1,(J.numberOfDays??1)-1)}:J)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`number-of-days-${oe}`,min:"1",value:re.numberOfDays??1,onChange:Oe=>{const J=parseInt(Oe.target.value,10);l(xe=>xe.map(ge=>ge.drug_id===oe?{...ge,numberOfDays:isNaN(J)?1:Math.max(1,J)}:ge))},onFocus:Oe=>Oe.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Oe=>Oe.map(J=>J.drug_id===oe?{...J,numberOfDays:(J.numberOfDays??1)+1}:J)),className:"quantity-btn",children:"+"})]})]})]}),r.jsx("div",{className:"flex items-center mt-2",children:re.pack&&ce(re.pack)&&r.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const Oe=ce(re.pack),J=re.looseQuantity??0;if(Oe&&Oe>0){const xe=Math.floor(J/Oe),ge=J%Oe;return`(Subtract: ${xe} packs, ${ge} loose)`}return""})()})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${oe}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${oe}`,placeholder:"e.g., 'After food', 'Twice a day'",value:re.directions_to_use??"",onChange:Oe=>{const J=Oe.target.value;l(xe=>xe.map(ge=>(ge.drug_id??ge.name)===oe?{...ge,directions_to_use:J}:ge))},className:"dosage-input text-sm w-full mt-1"})]})]},oe)})})]}),o.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",se]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:b||o.length===0&&!(w!=null&&w.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${b||o.length===0&&!(w!=null&&w.trim())?"":"hover:opacity-90"}`,children:b?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},ZOe="_container_nka99_1",eMe="_header_nka99_21",tMe="_titleSection_nka99_39",nMe="_title_nka99_39",rMe="_backButton_nka99_65",aMe="_filters_nka99_105",iMe="_filterGroup_nka99_129",sMe="_input_nka99_153",oMe="_tableWrapper_nka99_185",lMe="_table_nka99_185",cMe="_row_nka99_249",uMe="_statusBadge_nka99_257",dMe="_statusPaid_nka99_275",hMe="_statusPending_nka99_285",fMe="_statusCancelled_nka99_295",pMe="_itemsList_nka99_305",mMe="_itemName_nka99_317",gMe="_itemDetail_nka99_325",yMe="_amount_nka99_335",xMe="_discount_nka99_345",vMe="_pagination_nka99_355",bMe="_paginationButtons_nka99_373",jMe="_pageButton_nka99_383",wMe="_emptyState_nka99_421",NMe="_createButton_nka99_489",Dt={container:ZOe,header:eMe,titleSection:tMe,title:nMe,backButton:rMe,filters:aMe,filterGroup:iMe,input:sMe,tableWrapper:oMe,table:lMe,row:cMe,statusBadge:uMe,statusPaid:dMe,statusPending:hMe,statusCancelled:fMe,itemsList:pMe,itemName:mMe,itemDetail:gMe,amount:yMe,discount:xMe,pagination:vMe,paginationButtons:bMe,pageButton:jMe,emptyState:wMe,createButton:NMe},GA=50,MG=()=>{const t=Mt(),e=Ur(),n=new URLSearchParams(e.search),a=n.get("startDate")||new Date().toISOString().split("T")[0],i=n.get("endDate")||new Date().toISOString().split("T")[0],[s,o]=v.useState([]),[l,c]=v.useState(!0),[u,h]=v.useState(null),[p,m]=v.useState(a),[x,b]=v.useState(i),[j,w]=v.useState(""),[_,k]=v.useState("all"),[C,A]=v.useState("all"),[T,E]=v.useState("all"),[I,$]=v.useState(1),U=async()=>{c(!0),h(null);try{const H=new URLSearchParams({startDate:p,endDate:x,limit:"5000"}),Q=await ie(`/api/bills?${H.toString()}`);if(!Q.ok){const te=await Q.json();throw new Error(te.message||"Failed to fetch bills")}const L=await Q.json();o(L.bills||[]),$(1)}catch(H){console.error("Fetch Bills Error:",H),h(H.message||"An error occurred while fetching bills.")}finally{c(!1)}};v.useEffect(()=>{U()},[p,x]);const B=v.useMemo(()=>{const H=new Set(s.map(Q=>Q.type));return Array.from(H).sort()},[s]),R=v.useMemo(()=>{const H=new Map;return s.forEach(Q=>{Q.Creator&&H.set(Q.Creator.id,Q.Creator.name)}),Array.from(H.entries()).map(([Q,L])=>({id:Q,name:L})).sort((Q,L)=>Q.name.localeCompare(L.name))},[s]),z=v.useMemo(()=>s.filter(H=>{var Q,L,te;if(_!=="all"&&H.status!==_||C!=="all"&&H.type!==C||T!=="all"&&((Q=H.Creator)==null?void 0:Q.id)!==T)return!1;if(j){const me=j.toLowerCase(),X=(((L=H.Patient)==null?void 0:L.name)||"").toLowerCase(),Re=(((te=H.Patient)==null?void 0:te.patient_token_number)||"").toString(),Se=(H.items||[]).map(Ee=>Ee.name.toLowerCase()).join(" ");if(!X.includes(me)&&!Re.includes(me)&&!Se.includes(me))return!1}return!0}),[s,j,_,C,T]),G=Math.ceil(z.length/GA),K=v.useMemo(()=>{const H=(I-1)*GA;return z.slice(H,H+GA)},[z,I]),Y=H=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(H),q=H=>new Date(H).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),V=H=>{var te;let Q=0;const L=parseFloat(((te=H.discount_percentage)==null?void 0:te.toString())||"0");return H.items&&Array.isArray(H.items)&&(Q+=H.items.reduce((me,X)=>{const Re=X.discount_percentage||0;if(Re>0){const Se=X.total||0;return me+Se*(Re/(100-Re))}return me},0)),L>0&&(Q+=H.amount*(L/(100-L))),Q};return r.jsxs("div",{className:Dt.container,children:[r.jsxs("div",{className:Dt.header,children:[r.jsxs("div",{className:Dt.titleSection,children:[r.jsxs("button",{onClick:()=>t(-1),className:Dt.backButton,children:[r.jsx(en,{size:18})," Back"]}),r.jsx("h1",{className:Dt.title,children:"Search Bills"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>t("/create-custom-bill"),className:Dt.createButton,children:[r.jsx(cs,{size:18})," Custom Bill"]}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:["Showing ",z.length," of ",s.length," bills"]})]})]}),r.jsxs("div",{className:Dt.filters,style:{gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))"},children:[r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(qr,{size:14})," From Date"]}),r.jsx("input",{type:"date",className:Dt.input,value:p,onChange:H=>m(H.target.value)})]}),r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(qr,{size:14})," To Date"]}),r.jsx("input",{type:"date",className:Dt.input,value:x,onChange:H=>b(H.target.value)})]}),r.jsxs("div",{className:Dt.filterGroup,style:{gridColumn:"span 2"},children:[r.jsxs("label",{children:[r.jsx(fn,{size:14})," Search Anything"]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:"text",className:Dt.input,placeholder:"Name, Token, Medicine...",value:j,onChange:H=>{w(H.target.value),$(1)},style:{paddingLeft:"2.5rem",width:"100%",boxSizing:"border-box"}}),r.jsx(fn,{size:16,style:{position:"absolute",left:"0.8rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}})]})]}),r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(Lv,{size:14})," Bill Type"]}),r.jsxs("select",{className:Dt.input,value:C,onChange:H=>{A(H.target.value),$(1)},children:[r.jsx("option",{value:"all",children:"All Types"}),B.map(H=>r.jsx("option",{value:H,children:H.toUpperCase()},H))]})]}),r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(qn,{size:14})," Created By"]}),r.jsxs("select",{className:Dt.input,value:T,onChange:H=>{E(H.target.value),$(1)},children:[r.jsx("option",{value:"all",children:"All Users"}),R.map(H=>r.jsx("option",{value:H.id,children:H.name},H.id))]})]}),r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(Lv,{size:14})," Status"]}),r.jsxs("select",{className:Dt.input,value:_,onChange:H=>{k(H.target.value),$(1)},children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"paid",children:"Paid"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),u&&r.jsx("div",{className:"error-alert",children:u}),r.jsxs("div",{className:Dt.tableWrapper,children:[r.jsxs("table",{className:Dt.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date & Time"}),r.jsx("th",{children:"Patient / Token"}),r.jsx("th",{children:"Items"}),r.jsx("th",{children:"Discount"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Created By"}),r.jsx("th",{children:"Status"})]})}),r.jsx("tbody",{children:l&&s.length===0?Array.from({length:5}).map((H,Q)=>r.jsx("tr",{children:r.jsx("td",{colSpan:7,children:r.jsx(ee,{height:40})})},Q)):K.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:Dt.emptyState,children:"No bills found matching filters."})}):K.map(H=>{var Q,L,te,me,X,Re;return r.jsxs("tr",{className:Dt.row,onClick:()=>{var Se;return t(`/dashboard/edit-complaint/patient/${(Se=H.Patient)==null?void 0:Se.id}`)},style:{cursor:"pointer"},children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:q(H.createdAt)}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:H.type.toUpperCase()})]}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:((Q=H.Patient)==null?void 0:Q.name)||"Unknown"}),r.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:[r.jsx(za,{size:12,style:{display:"inline"}})," ",((L=H.Patient)==null?void 0:L.patient_token_number)||"-"]})]}),r.jsx("td",{children:r.jsxs("div",{className:Dt.itemsList,children:[(te=H.items)==null?void 0:te.slice(0,3).map((Se,Ee)=>r.jsxs("div",{className:Dt.itemName,children:[Se.name," ",r.jsxs("span",{className:Dt.itemDetail,children:["x",Se.quantity]})]},Ee)),((me=H.items)==null?void 0:me.length)>3&&r.jsxs("div",{className:Dt.itemDetail,children:["+ ",H.items.length-3," more items"]})]})}),r.jsx("td",{children:r.jsx("div",{className:Dt.discount,children:Y(V(H))})}),r.jsxs("td",{children:[r.jsx("div",{className:Dt.amount,children:Y(H.amount)}),H.payment_mode&&r.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["via ",H.payment_mode.toUpperCase()]})]}),r.jsxs("td",{children:[r.jsx("div",{style:{fontSize:"0.85rem"},children:((X=H.Creator)==null?void 0:X.name)||"-"}),r.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:(Re=H.Creator)==null?void 0:Re.role})]}),r.jsx("td",{children:r.jsx("span",{className:`${Dt.statusBadge} ${H.status==="paid"?Dt.statusPaid:H.status==="pending"?Dt.statusPending:Dt.statusCancelled}`,children:H.status})})]},H.id)})})]}),G>1&&r.jsxs("div",{className:Dt.pagination,children:[r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:["Page ",I," of ",G," (",z.length," items)"]}),r.jsxs("div",{className:Dt.paginationButtons,children:[r.jsxs("button",{className:Dt.pageButton,disabled:I===1||l,onClick:H=>{H.stopPropagation(),$(Q=>Q-1)},children:[r.jsx(Bf,{size:16})," Previous"]}),r.jsxs("button",{className:Dt.pageButton,disabled:I===G||l,onClick:H=>{H.stopPropagation(),$(Q=>Q+1)},children:["Next ",r.jsx(Vl,{size:16})]})]})]})]})]})},SMe=()=>{const t=v.useRef(null),e=v.useRef(null),[n,a]=v.useState(!1),[i,s]=v.useState(0),[o,l]=v.useState(!1),[c,u]=v.useState(!1),[h,p]=v.useState(null),m=30,x=100,b=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:!0});t.current&&(t.current.srcObject=_,u(!0),p(null))}catch(_){console.error("Error accessing camera:",_),p("Camera access denied. Please allow camera permissions to use motion detection."),u(!1)}},j=()=>{var k;const _=(k=t.current)==null?void 0:k.srcObject;_&&_.getTracks().forEach(C=>C.stop()),u(!1)};v.useEffect(()=>(b(),()=>j()),[]),v.useEffect(()=>{if(!c)return;let _;const k=e.current,C=t.current;if(!k||!C)return;const A=k.getContext("2d",{willReadFrequently:!0});if(!A)return;const T=320,E=240;k.width=T,k.height=E;let I=null;const $=()=>{if(C.readyState===C.HAVE_ENOUGH_DATA){A.drawImage(C,0,0,T,E);const B=A.getImageData(0,0,T,E).data;if(I){let R=0;for(let z=0;z<B.length;z+=4*4){const G=Math.abs(B[z]-I[z]),K=Math.abs(B[z+1]-I[z+1]),Y=Math.abs(B[z+2]-I[z+2]);G+K+Y>m&&R++}if(R>x){const z=Date.now();s(z),a(!0),o||l(!0)}else a(!1)}I=B}_=requestAnimationFrame($)};return $(),()=>{cancelAnimationFrame(_)}},[c,o]);const w=()=>{l(!1)};return r.jsxs("div",{className:"motion-detect-container",style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{className:"status-header bg-white p-4 rounded-lg shadow-sm flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${c?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.jsx(AP,{size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Motion Detection Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:c?"Camera Active - Monitoring":"Camera Inactive"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${n?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(El,{size:16}),r.jsx("span",{className:"font-medium",children:n?"Motion Detected!":"No Motion"})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${o?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(EP,{size:16}),r.jsx("span",{className:"font-medium",children:o?"AI Assistant Active":"AI Assistant Idle"})]})]})]}),h&&r.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:h}),r.jsxs("div",{className:"video-feed-container bg-black rounded-lg overflow-hidden relative shadow-lg",style:{maxWidth:"640px",margin:"0 auto"},children:[r.jsx("video",{ref:t,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",display:c?"block":"none"}}),r.jsx("canvas",{ref:e,style:{display:"none"}}),!c&&!h&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:r.jsxs("div",{className:"text-center",children:[r.jsx(AP,{size:48,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Connecting to camera..."})]})})]}),o&&r.jsx(cS,{onClose:w,patientData:null,tokenNumber:null,onAiSummaryChange:()=>{},lastMotionTimestamp:i,backgroundMode:!0})]})},WA=({currentUser:t})=>{const[e,n]=v.useState("queue"),[a,i]=v.useState(""),[s,o]=v.useState(new Date),l=s.toISOString().split("T")[0],[c,u]=v.useState(!1),[h,p]=v.useState("list"),{data:m,isLoading:x,refetch:b}=yG(l),j=(m==null?void 0:m.list)||[],{data:w=[],isLoading:_}=mG(),k=LOe(),C=ps(),[A,T]=v.useState(null),[E,I]=v.useState(null),$=Mt(),U=Ur(),B=()=>{b()};v.useEffect(()=>{const te=new URLSearchParams(U.search).get("tab");te&&q.find(X=>X.id===te)&&n(te)},[U.search]),v.useEffect(()=>{e==="queue"&&b()},[e,b]);const R=v.useCallback(async(L,te)=>{if(console.log(`Attempting to assign doctor ${te} to queue ${L}`),I(null),T(null),!te){console.log("No doctor ID provided, skipping assignment.");return}const me=j.find(Se=>Se.id===L);if(!me){console.error(`Queue entry ${L} not found in local state.`),I("Queue entry not found.");return}if(me.doctor_id===te){console.log(`Queue ${L} already assigned to doctor ${te}. Skipping.`);return}const X=async Se=>{if(!Se||!Se.id||!Se.name){I("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",Se);return}const Ee=async()=>{try{await k.mutateAsync({queueId:L,status:"waiting",doctorId:te});const Fe=w.find(le=>le.id===te);return console.log(`Successfully assigned doctor ${Fe==null?void 0:Fe.name} to queue ${L}.`),!0}catch(Fe){return console.error(`Error assigning doctor for queue ${L}:`,Fe),I(`Failed to assign doctor: ${Fe.message}`),!1}};Se.subscription_status==="active"?(console.log(`Patient ${Se.name} (ID: ${Se.id}) has active subscription. Assigning doctor directly.`),await Ee()):(console.log(`Patient ${Se.name} (ID: ${Se.id}) does not have active subscription. Navigating to billing WITHOUT assigning doctor yet.`),$(`/dashboard/doctor-billing/${L}?doctorId=${te}`))},Re=me.Patient;if(Re&&Re.id&&Re.name)console.log("Patient details found in state. Proceeding with assignment."),await X(Re);else{console.warn(`Patient details missing for queue entry ${L}. Fetching patient ${me.patient_id}...`);try{const Se=await ie(`/api/patients/${me.patient_id}`);if(!Se.ok){const Fe=await Se.json().catch(()=>({}));throw new Error(Fe.message||`Failed to fetch patient details (status ${Se.status})`)}const Ee=await Se.json();console.log("Successfully fetched patient details:",Ee),await X(Ee)}catch(Se){console.error(`Failed to fetch patient details for patient ID ${me.patient_id}:`,Se),I(`Failed to fetch required patient details: ${Se.message}`)}}},[w,j,$,k]),z=L=>{L&&(C.prefetchQuery({queryKey:Kt.patients.context(L),queryFn:async()=>{const te=await ie(`/api/patients/${L}/context`);if(!te.ok)throw new Error("Failed to fetch patient context");return te.json()},staleTime:5*60*1e3}),C.prefetchQuery({queryKey:Kt.patientDebts.balance(L),queryFn:async()=>{const te=await ie(`/api/patient-debts/${L}/balance`);return te.ok?te.json():{netDebt:0}},staleTime:1*60*1e3}),C.prefetchQuery({queryKey:Kt.queue.latest(L),queryFn:async()=>{const te=await ie(`/api/queue/patient/${L}/latest`);if(!te.ok)throw new Error("Failed to fetch latest queue status");const me=await te.json();return me!=null&&me._id&&C.prefetchQuery({queryKey:Kt.queue.entry(me._id),queryFn:async()=>{const X=await ie(`/api/queue/doctor/complaint/${me._id}`);if(!X.ok)throw new Error("Failed to fetch complaint record");return X.json()},staleTime:1*60*1e3}),me},staleTime:5e3}),C.prefetchQuery({queryKey:Kt.dental.records(L),queryFn:async()=>{const te=await ie(`/api/dental/patient/${L}`);if(!te.ok)throw new Error("Failed to fetch dental records");return te.json()},staleTime:5*60*1e3}))},G=v.useMemo(()=>FO(L=>z(L),500),[]);v.useEffect(()=>()=>{G.cancel()},[G]);const K=async(L,te)=>{var X;I(null);const me=te==="consulting"?"start consultation":"complete visit";try{await k.mutateAsync({queueId:L,status:te,doctorId:te==="consulting"&&((X=j.find(Re=>Re.id===L))==null?void 0:X.doctor_id)||void 0})}catch(Re){console.error(`Error trying to ${me}:`,Re),I(`Failed to ${me}: ${Re.message}`)}},Y=async(L,te)=>{let me="red";te==="red"?me="green":te==="green"?me="blue":te==="blue"?me=null:me="red";try{if(!(await ie(`/api/patients/${L}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_code:me})})).ok)throw new Error("Failed to update patient color");b()}catch(X){console.error("Error updating patient color:",X)}},q=[{id:"queue",label:"Queue",icon:r.jsx(zi,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(fn,{size:20})},{id:"manage-admission",label:"Admissions",icon:r.jsx(KQ,{size:20})},{id:"all-patients",label:"Patients",icon:r.jsx(Rb,{size:20})},{id:"lab",label:"Lab",icon:r.jsx(Nv,{size:20})},{id:"custom-bill",label:"Bill",icon:r.jsx(cs,{size:20})},{id:"medical",label:"Medical",icon:r.jsx(YX,{size:20})},{id:"motion-detect",label:"Motion",icon:r.jsx(AP,{size:20})},{id:"debt-management",label:"Debt",icon:r.jsx(pd,{size:20})},{id:"patient-files",label:"Files",icon:r.jsx(Ar,{size:20})},{id:"clinic-files",label:"Clinic Files",icon:r.jsx(Ar,{size:20})},{id:"search-bills",label:"Search Bills",icon:r.jsx(fn,{size:20})},{id:"add-order",label:"New Order",icon:r.jsx(oo,{size:20})}],V=L=>{try{return new Date(L).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},H=j.filter(L=>{var te,me;return(me=(te=L.Patient)==null?void 0:te.name)==null?void 0:me.toLowerCase().includes(a.toLowerCase())}),{openCommandBar:Q}=Bc();return r.jsxs("div",{className:"reception-app",children:[E&&r.jsxs("div",{className:"reception-error",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:E})]}),r.jsx("div",{className:"reception-nav",children:q.map(L=>r.jsxs("button",{className:`reception-nav-item ${e===L.id?"active":""}`,onClick:()=>{L.id==="newtons-ai"?Q():n(L.id)},children:[r.jsx("span",{children:L.icon}),L.label]},L.id))}),r.jsxs("div",{className:"reception-main",children:[e==="queue"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"reception-header",children:[r.jsxs("div",{className:"reception-actions",children:[r.jsxs("div",{className:"reception-search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patients...",className:"reception-search-input",value:a,onChange:L=>i(L.target.value)}),r.jsx(fn,{className:"reception-search-icon",size:18})]}),r.jsxs("div",{className:"reception-controls",children:[r.jsxs("div",{className:"reception-view-toggle",children:[r.jsxs("button",{className:`reception-toggle-option ${h==="list"?"active":""}`,onClick:()=>p("list"),title:"List View",children:[r.jsx(iq,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"List"})]}),r.jsxs("button",{className:`reception-toggle-option ${h==="timeline"?"active":""}`,onClick:()=>p("timeline"),title:"Timeline View",children:[r.jsx(WN,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"Timeline"})]})]}),r.jsx("div",{className:"reception-btn-icon",style:{width:"auto",padding:"0 10px",gap:"8px"},children:r.jsx("input",{type:"date",className:"bg-transparent border-none outline-none text-sm dark:text-white",value:s.toISOString().split("T")[0],onChange:L=>o(new Date(L.target.value))})}),r.jsxs("button",{onClick:()=>u(!0),className:"reception-btn-primary",children:[r.jsx(Ug,{size:16}),r.jsx("span",{children:"Book Appointment"})]})]})]}),r.jsxs("div",{className:"reception-stats",children:[r.jsxs("div",{className:"reception-stat-card stat-waiting",children:[r.jsx("div",{className:"reception-stat-label",children:"Waiting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(L=>L.status==="waiting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-consulting",children:[r.jsx("div",{className:"reception-stat-label",children:"Consulting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(L=>L.status==="consulting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-completed",children:[r.jsx("div",{className:"reception-stat-label",children:"Completed"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(L=>L.status==="seen").length})]})]})]}),r.jsx(gG,{isOpen:c,onClose:()=>{u(!1),b()},onSuccess:B}),x&&j.length===0?r.jsx("div",{className:"reception-card",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(ee,{width:50,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{className:"hidden md:table-cell",children:r.jsx(ee,{width:80,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:120,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:40,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:120,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(ee,{width:60,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:120,height:32})})]},L))})]})}):H.length===0?r.jsx("div",{className:"empty-queue-message",children:a?"No patients found matching your search.":"Queue is empty."}):h==="timeline"?r.jsx(HM,{appointments:H,date:s,onAppointmentClick:L=>$(`/dashboard/edit-complaint/${L.id}`)}):r.jsx("div",{className:"reception-card reception-table-wrapper",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"hidden-mobile",children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Phone"}),r.jsx("th",{className:"hidden-mobile",children:"Complaint"}),r.jsx("th",{className:"hidden-mobile",children:"Subscription"}),r.jsx("th",{className:"hidden-mobile",children:"Time"}),r.jsx("th",{className:"text-center",children:"Action"})]})}),r.jsx("tbody",{children:H.map(L=>{var te,me,X,Re,Se,Ee,Fe,le,_e,Ve,De,ue;return r.jsxs("tr",{onClick:()=>$(`/dashboard/edit-complaint/${L.id}`),onMouseEnter:()=>L.patient_id&&G(L.patient_id),className:"reception-row",children:[r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsxs("span",{className:"queue-token",children:["#",L.token_no]})," "]}),r.jsx("td",{children:r.jsxs("div",{className:"patient-cell-content",children:[r.jsx("span",{className:"reception-color-dot",style:{backgroundColor:((te=L.Patient)==null?void 0:te.color_code)||"#cbd5e1"},onClick:Ae=>{var ce;Ae.stopPropagation(),(ce=L.Patient)!=null&&ce.id&&Y(L.Patient.id,L.Patient.color_code)},title:"Click to change color"}),r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:((me=L.Patient)==null?void 0:me.name)||"N/A"}),r.jsxs("span",{className:"details",children:[(X=L.Patient)!=null&&X.age?`${L.Patient.age}y`:"",(Re=L.Patient)!=null&&Re.gender?`, ${L.Patient.gender}`:""]})]})]})}),r.jsxs("td",{className:"desktop-only",children:[" ",r.jsx("div",{className:"text-sm text-gray-500",children:((Se=L.Patient)==null?void 0:Se.phone)||"-"})," "]}),r.jsx("td",{className:"desktop-only",children:r.jsx("span",{className:"reception-badge badge-neutral",children:L.complaint||"-"})}),r.jsxs("td",{className:"desktop-only",children:[r.jsx("span",{className:`reception-badge ${((Ee=L.Patient)==null?void 0:Ee.subscription_status)==="active"?"badge-active":((Fe=L.Patient)==null?void 0:Fe.subscription_status)==="cancelled"||((le=L.Patient)==null?void 0:le.subscription_status)==="expired"?"badge-inactive":"badge-neutral"}`,children:((_e=L.Patient)==null?void 0:_e.subscription_status)??"None"}),L.Patient&&L.Patient.id&&L.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),L.Patient&&$(`/start-subscription/${L.Patient.id}`)},className:"btn-start-sub ml-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden-mobile text-sm text-gray-500",children:V(L.createdAt)}),r.jsx("td",{className:"action-doctor-cell",children:A===L.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:Ae=>Ae.stopPropagation(),children:r.jsxs("select",{value:"",onChange:Ae=>R(L.id,Ae.target.value),onBlur:()=>T(null),className:"doctor-select",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),_?r.jsx("option",{disabled:!0,children:"Loading..."}):w.length>0?w.map(Ae=>r.jsx("option",{value:Ae.id,children:Ae.name},Ae.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:Ae=>Ae.stopPropagation(),children:[L.status==="waiting"&&r.jsx(r.Fragment,{children:(Ve=L.User)!=null&&Ve.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:L.User.name}),r.jsx("button",{onClick:()=>K(L.id,"consulting"),className:"btn-action btn-start",children:"Start"})]}):_?r.jsx(ee,{width:80,height:20}):w.length===0?r.jsx("span",{className:"text-red-500 text-xs",children:"No docs"}):w.length===1?r.jsxs("button",{onClick:()=>R(L.id,w[0].id),className:"btn-action btn-assign",children:["Assign ",w[0].name.split(" ")[0]]}):r.jsx("button",{onClick:()=>T(L.id),className:"btn-action btn-assign",children:"Assign"})}),L.status==="consulting"&&r.jsxs(r.Fragment,{children:[((De=L.User)==null?void 0:De.name)&&r.jsx("span",{className:"doctor-name-display",children:L.User.name}),r.jsx("button",{onClick:()=>K(L.id,"seen"),className:"btn-action btn-complete",children:"Complete"})]}),L.status==="seen"&&r.jsxs(r.Fragment,{children:[((ue=L.User)==null?void 0:ue.name)&&r.jsx("span",{className:"doctor-name-display",children:L.User.name}),r.jsx("span",{className:"text-gray-400 italic text-xs",children:"Done"})]}),L.status==="cancelled"&&r.jsx("span",{className:"text-red-500 italic text-xs",children:"Cancelled"})]})})]},L.id)})})]})})]}),e==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx(vG,{currentUser:t}),r.jsxs("button",{onClick:()=>$("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(fn,{size:16}),"Search Lab Reports"]})]}),e==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx(wv,{})}),e==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx(GM,{})}),e==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(DD,{})}),e==="custom-bill"&&r.jsx("div",{className:"custom-bill-tab-content",children:r.jsx(xG,{})}),e==="medical"&&r.jsx("div",{className:"medical-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(DG,{})}),e==="motion-detect"&&r.jsx("div",{className:"motion-detect-tab-content",style:{height:"100%"},children:r.jsx(SMe,{})}),e==="debt-management"&&r.jsx("div",{className:"debt-management-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(BN,{})}),e==="patient-files"&&r.jsx("div",{className:"patient-files-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(OG,{})}),e==="clinic-files"&&r.jsx("div",{className:"clinic-files-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(KM,{})}),e==="add-order"&&r.jsx("div",{className:"add-order-tab-content",style:{height:"100%",overflow:"auto"},children:r.jsx(mw,{})}),e==="search-bills"&&r.jsx("div",{className:"search-bills-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(MG,{})})]})]})},IG=6048e5,_Me=864e5,RG=6e4,LG=36e5,$B=Symbol.for("constructDateFrom");function Ho(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&$B in t?t[$B](e):t instanceof Date?new t.constructor(e):new Date(e)}function xi(t,e){return Ho(e||t,t)}function CMe(t,e,n){const a=xi(t,n==null?void 0:n.in);if(isNaN(e))return Ho(t,NaN);const i=a.getDate(),s=Ho(t,a.getTime());s.setMonth(a.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(a.setFullYear(s.getFullYear(),s.getMonth(),i),a)}let kMe={};function GS(){return kMe}function kb(t,e){var l,c,u,h;const n=GS(),a=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,i=xi(t,e==null?void 0:e.in),s=i.getDay(),o=(s<a?7:0)+s-a;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function zN(t,e){return kb(t,{...e,weekStartsOn:1})}function FG(t,e){const n=xi(t,e==null?void 0:e.in),a=n.getFullYear(),i=Ho(n,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const s=zN(i),o=Ho(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=zN(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=l.getTime()?a:a-1}function BB(t){const e=xi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function TMe(t,...e){const n=Ho.bind(null,e.find(a=>typeof a=="object"));return e.map(n)}function zB(t,e){const n=xi(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function AMe(t,e,n){const[a,i]=TMe(n==null?void 0:n.in,t,e),s=zB(a),o=zB(i),l=+s-BB(s),c=+o-BB(o);return Math.round((l-c)/_Me)}function PMe(t,e){const n=FG(t,e),a=Ho(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),zN(a)}function EMe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ID(t){return!(!EMe(t)&&typeof t!="number"||isNaN(+xi(t)))}function DMe(t,e){const n=xi(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const OMe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},MMe=(t,e,n)=>{let a;const i=OMe[t];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function KA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const IMe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},RMe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LMe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FMe={date:KA({formats:IMe,defaultWidth:"full"}),time:KA({formats:RMe,defaultWidth:"full"}),dateTime:KA({formats:LMe,defaultWidth:"full"})},$Me={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},BMe=(t,e,n,a)=>$Me[t];function fv(t){return(e,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let i;if(a==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const zMe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qMe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},UMe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},VMe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},HMe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},GMe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WMe=(t,e)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},KMe={ordinalNumber:WMe,era:fv({values:zMe,defaultWidth:"wide"}),quarter:fv({values:qMe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:fv({values:UMe,defaultWidth:"wide"}),day:fv({values:VMe,defaultWidth:"wide"}),dayPeriod:fv({values:HMe,defaultWidth:"wide",formattingValues:GMe,defaultFormattingWidth:"wide"})};function pv(t){return(e,n={})=>{const a=n.width,i=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?QMe(l,p=>p.test(o)):YMe(l,p=>p.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function YMe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function QMe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function XMe(t){return(e,n={})=>{const a=e.match(t.matchPattern);if(!a)return null;const i=a[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const JMe=/^(\d+)(th|st|nd|rd)?/i,ZMe=/\d+/i,eIe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tIe={any:[/^b/i,/^(a|c)/i]},nIe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rIe={any:[/1/i,/2/i,/3/i,/4/i]},aIe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iIe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sIe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},oIe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lIe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cIe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uIe={ordinalNumber:XMe({matchPattern:JMe,parsePattern:ZMe,valueCallback:t=>parseInt(t,10)}),era:pv({matchPatterns:eIe,defaultMatchWidth:"wide",parsePatterns:tIe,defaultParseWidth:"any"}),quarter:pv({matchPatterns:nIe,defaultMatchWidth:"wide",parsePatterns:rIe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pv({matchPatterns:aIe,defaultMatchWidth:"wide",parsePatterns:iIe,defaultParseWidth:"any"}),day:pv({matchPatterns:sIe,defaultMatchWidth:"wide",parsePatterns:oIe,defaultParseWidth:"any"}),dayPeriod:pv({matchPatterns:lIe,defaultMatchWidth:"any",parsePatterns:cIe,defaultParseWidth:"any"})},dIe={code:"en-US",formatDistance:MMe,formatLong:FMe,formatRelative:BMe,localize:KMe,match:uIe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hIe(t,e){const n=xi(t,e==null?void 0:e.in);return AMe(n,DMe(n))+1}function fIe(t,e){const n=xi(t,e==null?void 0:e.in),a=+zN(n)-+PMe(n);return Math.round(a/IG)+1}function $G(t,e){var h,p,m,x;const n=xi(t,e==null?void 0:e.in),a=n.getFullYear(),i=GS(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(m=i.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??1,o=Ho((e==null?void 0:e.in)||t,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const l=kb(o,e),c=Ho((e==null?void 0:e.in)||t,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const u=kb(c,e);return+n>=+l?a+1:+n>=+u?a:a-1}function pIe(t,e){var l,c,u,h;const n=GS(),a=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,i=$G(t,e),s=Ho((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,a),s.setHours(0,0,0,0),kb(s,e)}function mIe(t,e){const n=xi(t,e==null?void 0:e.in),a=+kb(n,e)-+pIe(n,e);return Math.round(a/IG)+1}function br(t,e){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return n+a}const Wu={y(t,e){const n=t.getFullYear(),a=n>0?n:1-n;return br(e==="yy"?a%100:a,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):br(n+1,2)},d(t,e){return br(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return br(t.getHours()%12||12,e.length)},H(t,e){return br(t.getHours(),e.length)},m(t,e){return br(t.getMinutes(),e.length)},s(t,e){return br(t.getSeconds(),e.length)},S(t,e){const n=e.length,a=t.getMilliseconds(),i=Math.trunc(a*Math.pow(10,n-3));return br(i,e.length)}},Dm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qB={G:function(t,e,n){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const a=t.getFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return Wu.y(t,e)},Y:function(t,e,n,a){const i=$G(t,a),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return br(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):br(s,e.length)},R:function(t,e){const n=FG(t);return br(n,e.length)},u:function(t,e){const n=t.getFullYear();return br(n,e.length)},Q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return br(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return br(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,n){const a=t.getMonth();switch(e){case"M":case"MM":return Wu.M(t,e);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,n){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return br(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,n,a){const i=mIe(t,a);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):br(i,e.length)},I:function(t,e,n){const a=fIe(t);return e==="Io"?n.ordinalNumber(a,{unit:"week"}):br(a,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Wu.d(t,e)},D:function(t,e,n){const a=hIe(t);return e==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):br(a,e.length)},E:function(t,e,n){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return br(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return br(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const a=t.getDay(),i=a===0?7:a;switch(e){case"i":return String(i);case"ii":return br(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const a=t.getHours();let i;switch(a===12?i=Dm.noon:a===0?i=Dm.midnight:i=a/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const a=t.getHours();let i;switch(a>=17?i=Dm.evening:a>=12?i=Dm.afternoon:a>=4?i=Dm.morning:i=Dm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Wu.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Wu.H(t,e)},K:function(t,e,n){const a=t.getHours()%12;return e==="Ko"?n.ordinalNumber(a,{unit:"hour"}):br(a,e.length)},k:function(t,e,n){let a=t.getHours();return a===0&&(a=24),e==="ko"?n.ordinalNumber(a,{unit:"hour"}):br(a,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Wu.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Wu.s(t,e)},S:function(t,e){return Wu.S(t,e)},X:function(t,e,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return VB(a);case"XXXX":case"XX":return Zh(a);case"XXXXX":case"XXX":default:return Zh(a,":")}},x:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"x":return VB(a);case"xxxx":case"xx":return Zh(a);case"xxxxx":case"xxx":default:return Zh(a,":")}},O:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+UB(a,":");case"OOOO":default:return"GMT"+Zh(a,":")}},z:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+UB(a,":");case"zzzz":default:return"GMT"+Zh(a,":")}},t:function(t,e,n){const a=Math.trunc(+t/1e3);return br(a,e.length)},T:function(t,e,n){return br(+t,e.length)}};function UB(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=Math.trunc(a/60),s=a%60;return s===0?n+String(i):n+String(i)+e+br(s,2)}function VB(t,e){return t%60===0?(t>0?"-":"+")+br(Math.abs(t)/60,2):Zh(t,e)}function Zh(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=br(Math.trunc(a/60),2),s=br(a%60,2);return n+i+e+s}const HB=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},BG=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},gIe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return HB(t,e);let s;switch(a){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",HB(a,e)).replace("{{time}}",BG(i,e))},yIe={p:BG,P:gIe},xIe=/^D+$/,vIe=/^Y+$/,bIe=["D","DD","YY","YYYY"];function jIe(t){return xIe.test(t)}function wIe(t){return vIe.test(t)}function NIe(t,e,n){const a=SIe(t,e,n);if(console.warn(a),bIe.includes(t))throw new RangeError(a)}function SIe(t,e,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _Ie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CIe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kIe=/^'([^]*?)'?$/,TIe=/''/g,AIe=/[a-zA-Z]/;function Nf(t,e,n){var h,p,m,x;const a=GS(),i=a.locale??dIe,s=a.firstWeekContainsDate??((p=(h=a.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=a.weekStartsOn??((x=(m=a.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,l=xi(t,n==null?void 0:n.in);if(!ID(l))throw new RangeError("Invalid time value");let c=e.match(CIe).map(b=>{const j=b[0];if(j==="p"||j==="P"){const w=yIe[j];return w(b,i.formatLong)}return b}).join("").match(_Ie).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const j=b[0];if(j==="'")return{isToken:!1,value:PIe(b)};if(qB[j])return{isToken:!0,value:b};if(j.match(AIe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(b=>{if(!b.isToken)return b.value;const j=b.value;(wIe(j)||jIe(j))&&NIe(j,e,String(t));const w=qB[j[0]];return w(l,j,i.localize,u)}).join("")}function PIe(t){const e=t.match(kIe);return e?e[1].replace(TIe,"'"):t}function YA(t,e){return+xi(t)<+xi(e)}function GB(t,e){const n=()=>Ho(e==null?void 0:e.in,NaN),i=MIe(t);let s;if(i.date){const u=IIe(i.date,2);s=RIe(u.restDateString,u.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(i.time&&(l=LIe(i.time),isNaN(l)))return n();if(i.timezone){if(c=FIe(i.timezone),isNaN(c))return n()}else{const u=new Date(o+l),h=xi(0,e==null?void 0:e.in);return h.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),h.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),h}return xi(o+l+c,e==null?void 0:e.in)}const ew={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},EIe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,DIe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,OIe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function MIe(t){const e={},n=t.split(ew.dateTimeDelimiter);let a;if(n.length>2)return e;if(/:/.test(n[0])?a=n[0]:(e.date=n[0],a=n[1],ew.timeZoneDelimiter.test(e.date)&&(e.date=t.split(ew.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){const i=ew.timezone.exec(a);i?(e.time=a.replace(i[1],""),e.timezone=i[1]):e.time=a}return e}function IIe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(n);if(!a)return{year:NaN,restDateString:""};const i=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((a[1]||a[2]).length)}}function RIe(t,e){if(e===null)return new Date(NaN);const n=t.match(EIe);if(!n)return new Date(NaN);const a=!!n[4],i=mv(n[1]),s=mv(n[2])-1,o=mv(n[3]),l=mv(n[4]),c=mv(n[5])-1;if(a)return UIe(e,l,c)?$Ie(e,l,c):new Date(NaN);{const u=new Date(0);return!zIe(e,s,o)||!qIe(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}}function mv(t){return t?parseInt(t):1}function LIe(t){const e=t.match(DIe);if(!e)return NaN;const n=QA(e[1]),a=QA(e[2]),i=QA(e[3]);return VIe(n,a,i)?n*LG+a*RG+i*1e3:NaN}function QA(t){return t&&parseFloat(t.replace(",","."))||0}function FIe(t){if(t==="Z")return 0;const e=t.match(OIe);if(!e)return 0;const n=e[1]==="+"?-1:1,a=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return HIe(a,i)?n*(a*LG+i*RG):NaN}function $Ie(t,e,n){const a=new Date(0);a.setUTCFullYear(t,0,4);const i=a.getUTCDay()||7,s=(e-1)*7+n+1-i;return a.setUTCDate(a.getUTCDate()+s),a}const BIe=[31,null,31,30,31,30,31,31,30,31,30,31];function zG(t){return t%400===0||t%4===0&&t%100!==0}function zIe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(BIe[e]||(zG(t)?29:28))}function qIe(t,e){return e>=1&&e<=(zG(t)?366:365)}function UIe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function VIe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function HIe(t,e){return e>=0&&e<=59}const YM=({isEmbedded:t=!1})=>{const{customColumnsConfig:e,refetch:n}=uS(),a=e.lab_tests||[],[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,u]=v.useState([]),[h,p]=v.useState(""),[m,x]=v.useState(!1),[b,j]=v.useState(null),[w,_]=v.useState(!1),[k,C]=v.useState(null),A=v.useRef(null),[T,E]=v.useState(!1),[I,$]=v.useState(null),[U,B]=v.useState(!1),[R,z]=v.useState(!1),[G,K]=v.useState(null),[Y,q]=v.useState({name:"",description:"",price:"",default_parameters:[]}),V=v.useCallback(async()=>{x(!0),j(null),C(null),$(null);try{const ce=await ie("/api/lab-tests");if(!ce.ok)throw new Error(`HTTP error! status: ${ce.status}`);const be=await ce.json();u(be)}catch(ce){console.error("Error fetching lab tests:",ce),j(ce.message||"Failed to fetch lab tests.")}finally{x(!1)}},[]);v.useEffect(()=>{V()},[V]);const H=ce=>{const{name:be,value:ke}=ce.target;q(Ce=>({...Ce,[be]:ke}))},Q=(ce,be,ke)=>{const Ce=[...Y.default_parameters],ne=Ce[ce];if(be==="type")switch(ne.type=ke,ke){case"number":ne.defaultValue=0,ne.lower_limit=null,ne.upper_limit=null,ne.unit="";break;case"boolean":ne.defaultValue=!1,ne.lower_limit=void 0,ne.upper_limit=void 0,ne.unit=void 0;break;case"string":default:ne.defaultValue="",ne.lower_limit=void 0,ne.upper_limit=void 0,ne.unit=void 0;break}else be==="defaultValue"?ne.type==="number"?ne.defaultValue=parseFloat(ke)||0:(ne.type,ne.defaultValue=ke):be==="lower_limit"||be==="upper_limit"?ne[be]=ke===""?null:parseFloat(ke):ne[be]=ke;q(ye=>({...ye,default_parameters:Ce}))},L=()=>{q(ce=>({...ce,default_parameters:[...ce.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},te=ce=>{q(be=>({...be,default_parameters:be.default_parameters.filter((ke,Ce)=>Ce!==ce)}))},me=async ce=>{ce.preventDefault(),x(!0),j(null);const be=G!==null,ke=be?`/api/lab-tests/${G}`:"/api/lab-tests",Ce=be?"PUT":"POST";try{const ne=await ie(ke,{method:Ce,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Y.name,description:Y.description,price:parseFloat(Y.price),default_parameters:Y.default_parameters})});if(!ne.ok){const ye=await ne.json();throw new Error(ye.message||`HTTP error! status: ${ne.status}`)}z(!1),K(null),q({name:"",description:"",price:"",default_parameters:[]}),V()}catch(ne){console.error(`Error ${be?"updating":"adding"} lab test:`,ne),j(ne.message||`Failed to ${be?"update":"add"} lab test.`)}finally{x(!1)}},X=()=>{K(null),q({name:"",description:"",price:"",default_parameters:[]}),z(!0)},Re=ce=>{if(G===ce.id)K(null);else{K(ce.id);const be=(ce.default_parameters||[]).map(ke=>({...ke,unit:ke.unit||"",lower_limit:ke.lower_limit===void 0?null:ke.lower_limit,upper_limit:ke.upper_limit===void 0?null:ke.upper_limit}));q({name:ce.name,description:ce.description||"",price:ce.price,default_parameters:be}),z(!1)}},Se=async ce=>{if(window.confirm("Are you sure you want to delete this lab test?")){x(!0),j(null);try{const be=await ie(`/api/lab-tests/${ce}`,{method:"DELETE"});if(!be.ok){const ke=await be.json();throw new Error(ke.message||`HTTP error! status: ${be.status}`)}V()}catch(be){console.error("Error deleting lab test:",be),j(be.message||"Failed to delete lab test.")}finally{x(!1)}}},Ee=()=>{z(!1),K(null),j(null),q({name:"",description:"",price:"",default_parameters:[]})},Fe=async ce=>{if(!ce){C("No file selected.");return}_(!0),C(null),j(null);const be=new FormData;be.append("file",ce);try{const ke=await ie("/api/lab-tests/import",{method:"POST",body:be});if(!ke.ok){const Ce=await ke.json();throw new Error(Ce.message||`Import failed: ${ke.statusText}`)}V()}catch(ke){console.error("Error importing lab tests from Excel:",ke),C(ke.message||"Failed to import lab tests from Excel.")}finally{_(!1)}},le=async ce=>{if(ce.target.files&&ce.target.files[0]){const be=ce.target.files[0];await Fe(be),ce.target&&(ce.target.value="")}},_e=async ce=>{const be=ce==="xray"?"X-Ray":"biochemistry and pathology";if(window.confirm(`Are you sure you want to import default ${be} tests? This will add new tests and may duplicate existing ones if names match.`)){E(!0),$(null),j(null);try{const ke=await ie("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:ce})});if(!ke.ok){const Ce=await ke.json();throw new Error(Ce.message||`Default import failed: ${ke.statusText}`)}V()}catch(ke){console.error(`Error importing default ${ce} lab tests:`,ke),$(ke.message||`Failed to import default ${ce} lab tests.`)}finally{E(!1)}}},Ve=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){B(!0),j(null),C(null),$(null);try{const ce=await ie("/api/lab-tests/all",{method:"DELETE"});if(!ce.ok){const be=await ce.json();throw new Error(be.message||`Delete all failed: ${ce.statusText}`)}V()}catch(ce){console.error("Error deleting all lab tests:",ce),j(ce.message||"Failed to delete all lab tests.")}finally{B(!1)}}},De=m||w||T||U,ue=v.useMemo(()=>new ho(c,{keys:["name","description","default_parameters.name"],threshold:.3,ignoreLocation:!0}),[c]),Ae=v.useMemo(()=>h?ue.search(h).map(ce=>ce.item):c,[c,h,ue]);return r.jsxs("div",{className:`lab-inventory-card ${t?"embedded":""}`,style:t?{border:"none",boxShadow:"none",padding:0}:{},children:[!t&&r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsx("div",{className:"mb-4",style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:r.jsx("input",{type:"text",placeholder:"Search by test name...",value:h,onChange:ce=>p(ce.target.value),className:"lab-inventory-input",style:{maxWidth:"300px",marginRight:"10px"}})}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:X,className:"lab-inventory-button",disabled:De,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var ce;return(ce=A.current)==null?void 0:ce.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:De,children:w?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:A,onChange:le,accept:".xlsx, .xls",style:{display:"none"},disabled:w}),r.jsx("button",{onClick:()=>_e("general"),className:"lab-inventory-button lab-inventory-button-secondary",disabled:De,children:T?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:()=>_e("xray"),className:"lab-inventory-button lab-inventory-button-secondary",disabled:De,children:T?"Importing X-Rays...":"Import X-Rays"}),r.jsx("button",{onClick:Ve,className:"lab-inventory-button lab-inventory-button-danger",disabled:De,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:U?"Deleting All...":"Delete All Tests"}),r.jsxs("button",{onClick:()=>s(!0),className:"lab-inventory-button lab-inventory-button-secondary",disabled:De,title:"Manage Custom Columns",children:[r.jsx(gd,{size:16,style:{marginRight:"4px"}})," Columns"]}),r.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"auto"},children:[r.jsxs("button",{onClick:()=>l(!1),className:`view-mode-btn ${o?"":"active"}`,title:"List View",children:[r.jsx(Rb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>l(!0),className:`view-mode-btn ${o?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(kf,{size:18})," Excel"]})]})]}),b&&r.jsx("div",{className:"error-text mb-4",children:b}),k&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",k]}),I&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",I]}),R&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:me,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:Y.name,onChange:H,className:"lab-inventory-input",required:!0,disabled:De})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:Y.description,onChange:H,rows:3,className:"lab-inventory-input",disabled:De})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:Y.price,onChange:H,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:De})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),Y.default_parameters.map((ce,be)=>{var ke,Ce;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:ce.name,onChange:ne=>Q(be,"name",ne.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:ce.type,onChange:ne=>Q(be,"type",ne.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),ce.type==="boolean"?r.jsxs("select",{value:ce.defaultValue.toString(),onChange:ne=>Q(be,"defaultValue",ne.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:ce.type==="number"?"number":"text",placeholder:"Default Value",value:ce.defaultValue.toString(),onChange:ne=>Q(be,"defaultValue",ne.target.value),className:"lab-inventory-input"}),ce.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:ce.lower_limit===null?"":((ke=ce.lower_limit)==null?void 0:ke.toString())??"",onChange:ne=>Q(be,"lower_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:ce.upper_limit===null?"":((Ce=ce.upper_limit)==null?void 0:Ce.toString())??"",onChange:ne=>Q(be,"upper_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:ce.unit||"",onChange:ne=>Q(be,"unit",ne.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>te(be),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},be)}),r.jsx("button",{type:"button",onClick:L,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Ee,className:"lab-inventory-button lab-inventory-button-secondary",disabled:De,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:De,children:m?"Saving...":"Add Test"})]})]})]}),De&&!R?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"mb-4 flex gap-2",children:[1,2,3,4,5].map(ce=>r.jsx(ee,{width:100,height:36},ce))}),r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"}),r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(ce=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:"60%",height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(ee,{width:"90%",height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(ee,{width:40,height:20}),r.jsx(ee,{width:50,height:20})]})})]},ce))})]}),r.jsx("p",{className:"loading-text mt-2 text-sm italic text-gray-500",children:w?"Importing Excel data...":T?"Importing default data...":"Loading tests..."})]}):null,!De&&Ae.length===0&&!b&&!k&&!I&&r.jsx("p",{className:"no-data-message",children:h?`No lab tests found matching "${h}".`:"No lab tests found. Add one or import from Excel to get started."}),o&&Ae.length>0?r.jsx(Hb,{columns:[{key:"name",label:"Test Name",editable:!0,type:"text"},{key:"description",label:"Description",editable:!0,type:"text"},{key:"price",label:"Price",editable:!0,type:"number"}],data:Ae,editable:!0,showRowNumbers:!0,title:"Lab Test Inventory",onSave:async ce=>{const be=ce.map(async ke=>{const Ce=c.find(ne=>ne.id===ke.id);if(Ce&&(Ce.name!==ke.name||Ce.price!==ke.price||Ce.description!==ke.description))return ie(`/api/lab-tests/${ke.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ke)})});try{await Promise.all(be),V()}catch(ke){alert("Error saving changes"),console.error(ke)}}}):!De&&Ae.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:Ae.map(ce=>{const be=G===ce.id,ke=ce.price&&typeof ce.price=="string"?parseFloat(ce.price):NaN,Ce=isNaN(ke)?"0.00":ke.toFixed(2);return r.jsxs(Te.Fragment,{children:[r.jsxs("tr",{onClick:()=>Re(ce),style:{cursor:"pointer"},children:[r.jsx("td",{children:ce.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:ce.description||"-"}),r.jsxs("td",{children:["",Ce]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:ne=>{ne.stopPropagation(),Re(ce)},className:"lab-inventory-link",disabled:De,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:ne=>{ne.stopPropagation(),Se(ce.id)},className:"lab-inventory-link",disabled:De,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),a.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:a.map(ne=>{var ye;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[ne.label,":"]})," ",(ye=ce.custom_fields)!=null&&ye[ne.key]?String(ce.custom_fields[ne.key]):"-"]},ne.key)})})})}),be&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:me,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:Y.name,onChange:H,className:"lab-inventory-input",required:!0,disabled:De})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:Y.description,onChange:H,rows:3,className:"lab-inventory-input",disabled:De})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:Y.price,onChange:H,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:De})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),Y.default_parameters.map((ne,ye)=>{var de,se;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:ne.name,onChange:re=>Q(ye,"name",re.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:ne.type,onChange:re=>Q(ye,"type",re.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),ne.type==="boolean"?r.jsxs("select",{value:ne.defaultValue.toString(),onChange:re=>Q(ye,"defaultValue",re.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:ne.type==="number"?"number":"text",placeholder:"Default Value",value:ne.defaultValue.toString(),onChange:re=>Q(ye,"defaultValue",re.target.value),className:"lab-inventory-input"}),ne.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:ne.lower_limit===null?"":((de=ne.lower_limit)==null?void 0:de.toString())??"",onChange:re=>Q(ye,"lower_limit",re.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:ne.upper_limit===null?"":((se=ne.upper_limit)==null?void 0:se.toString())??"",onChange:re=>Q(ye,"upper_limit",re.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:ne.unit||"",onChange:re=>Q(ye,"unit",re.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>te(ye),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},ye)}),r.jsx("button",{type:"button",onClick:L,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Ee,className:"lab-inventory-button lab-inventory-button-secondary",disabled:De,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:De,children:m?"Saving...":"Update Test"})]})]})]})})})]},ce.id)})})]})]}),r.jsx(WM,{isOpen:i,onClose:()=>s(!1),entityType:"lab_tests",entityLabel:"Lab Tests",currentConfig:e,onConfigUpdated:()=>{n()}})]})},GIe=t=>{let e="";if(!t.report_content)return"No report content available.";e+=`*Report Date:* ${t.report_date?new Date(t.report_date).toLocaleDateString():"N/A"}

`;try{const n=JSON.parse(t.report_content);typeof n=="object"&&n!==null&&t.tests?t.tests.forEach((a,i)=>{e+=`*Test: ${a.name}*
`,n[a.id]?Object.entries(n[a.id]).forEach(([s,o])=>{var h;const l=(h=a.default_parameters)==null?void 0:h.find(p=>p.name===s);let c=String(o),u="";if(l){const p=l.unit?` _${l.unit}_`:"";if(l.type==="boolean"){const m=o===!0||o==="true";c=m?"*Reactive*":"Non-Reactive",m||(u="`Normal: Non-Reactive`")}else if(l.type==="number"){const m=typeof o=="string"?parseFloat(o):typeof o=="number"?o:NaN;if(l.lower_limit!=null||l.upper_limit!=null){let x=[];l.lower_limit!=null&&x.push(`${l.lower_limit}`),l.upper_limit!=null&&x.push(`${l.upper_limit}`),u=`\`Normal: ${x.join(" - ")}\`${p}`,!isNaN(m)&&(l.lower_limit!=null&&m<l.lower_limit||l.upper_limit!=null&&m>l.upper_limit)&&(c=`*${c}*`)}}l.unit&&(c+=p)}e+=`${s}: ${c}
`,u&&((l==null?void 0:l.type)==="boolean"&&(o===!0||o==="true")||(e+=`${u}
`))}):e+=`_No parameters reported for this test._
`,i<t.tests.length-1&&(e+=`
`)}):e+=t.report_content}catch{e+=t.report_content}return e},QM=t=>{var o;if(!((o=t==null?void 0:t.Patient)!=null&&o.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(t!=null&&t.report_content)){alert("Cannot share report: No report content is available to share.");return}const e=t.Patient.name||"Patient",n=GIe(t),a=`Hello ${e},

Your lab report is ready.

${n}`,s=`https://wa.me/${WIe(t.Patient.phone)}?text=${encodeURIComponent(a)}`;window.open(s,"_blank")},WIe=t=>{let e=t.replace(/\D/g,"");const n=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,a=e.match(n);return a?e="91"+a[1]:e.startsWith("91")||(e="91"+e),e},WB=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(!0),[c,u]=v.useState(null),[h,p]=v.useState("orders"),[m,x]=v.useState(1),[b]=v.useState(20),[j,w]=v.useState(0),_=v.useMemo(()=>Math.ceil(j/b),[j,b]),k=v.useCallback(async(R=1,z="")=>{s(!0),u(null);try{const G=new URLSearchParams({page:String(R),limit:String(b)});z&&G.append("search",z);const K=await ie(`/api/lab?${G.toString()}`);if(!K.ok)throw new Error(`HTTP error! status: ${K.status}`);const Y=await K.json(),q=Y.orders.map(V=>{var H,Q;return{id:V.id,labTokenNumber:String(V.lab_token_number??"N/A"),patientName:((H=V.Patient)==null?void 0:H.name)||"N/A",patientId:V.patient_id,patientTokenNumber:String(((Q=V.Patient)==null?void 0:Q.patient_token_number)??"N/A"),tests:(V.tests||[]).map(L=>L.name||"Unknown Test"),date:Nf(new Date(V.createdAt),"yyyy-MM-dd"),status:V.status,reportId:V.reportId,billId:V.billId}});e(q),w(Y.totalCount),x(R)}catch(G){console.error("Failed to fetch lab orders:",G),u(G instanceof Error?G.message:"An unknown error occurred"),e([]),w(0)}finally{s(!1),l(!1)}},[b]);v.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${m}, Search term: "${n}"`),n.length===0||n.length>=2?(console.log(`Condition met (length ${n.length}). Fetching orders...`),k(m,n)):console.log(`Condition not met (length ${n.length}). Not fetching.`)},[k,m,n]),v.useEffect(()=>{const R=setTimeout(()=>{n.length>=2?m!==1&&x(1):n.length<2&&m!==1&&x(1)},1e3);return()=>{clearTimeout(R)}},[n]);const C=async(R,z)=>{console.log(`Updating order ${R} to status ${z}`);try{const G=await ie(`/api/lab/${R}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:z})});if(!G.ok){const K=await G.json();throw new Error(K.message||`Failed to update status: ${G.status}`)}if(z==="completed"){const K=await ie(`/api/lab/orders/${R}/report`);if(K.ok){const Y=await K.json();QM(Y)}}await k(m,n),console.log(`Order ${R} status updated to ${z}, refetching page ${m}`)}catch(G){console.error("Error updating status:",G),alert(`Failed to update status: ${G instanceof Error?G.message:"Unknown error"}`)}},{openCommandBar:A}=Bc(),T=Mt(),E=R=>{if(!R){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}R.billId?(console.log(`Navigating to existing bill for Bill ID: ${R.billId}, Patient: ${R.patientName}`),T("/billing",{state:{billId:R.billId,patientId:R.patientId,patientName:R.patientName,billType:"lab"}})):(console.log(`Navigating to LabBillingPage for Order ID: ${R.id}`),T(`/dashboard/lab-billing/${R.id}`))},I=R=>{R&&R.id?T(`/lab/report/${R.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},$=R=>{switch(R){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:R,className:"status-badge"}}};if(i&&o)return r.jsxs("div",{className:"admin-panel-container",children:[r.jsx("div",{className:"admin-nav-bar",children:[1,2,3,4].map(R=>r.jsx(ee,{width:100,height:40,style:{borderRadius:"8px",margin:"0 8px"}},R))}),r.jsxs("div",{className:"admin-content-section",style:{padding:"20px"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx(ee,{width:200,height:32}),r.jsx(ee,{width:300,height:40})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:150,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(R=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:120,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:180,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(ee,{width:150,height:32})})]},R))})]})})]})]});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(zr,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:c}),r.jsx("button",{onClick:()=>k(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const U=()=>{m>1&&x(R=>R-1)},B=()=>{m<_&&x(R=>R+1)};return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("div",{className:"admin-nav-bar",children:[r.jsxs("button",{onClick:()=>T(-1),className:"admin-nav-button",title:"Back",children:[r.jsx(en,{})," Back"]}),r.jsxs("button",{onClick:()=>p("orders"),className:`admin-nav-button ${h==="orders"?"active":""}`,children:[r.jsx(DP,{})," Orders"]}),r.jsx("button",{onClick:()=>T("/create-lab-order"),className:"admin-nav-button",children:"Create New Lab Order"}),r.jsxs("button",{onClick:()=>p("inventory"),className:`admin-nav-button ${h==="inventory"?"active":""}`,children:[r.jsx(GQ,{})," Inventory"]}),r.jsxs("button",{onClick:()=>A(),className:"admin-nav-button",children:[r.jsx(ZD,{})," Newton's AI"]})]}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[h==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:n,onChange:R=>a(R.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(fn,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[i&&!c&&t.length===0&&[1,2,3,4,5].map(R=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:120,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:180,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(ee,{width:150,height:32})})]},R)),!i&&!c&&t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."})}),!i&&!c&&t.map(R=>{const z=$(R.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:R.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",R.patientTokenNumber]})]}),r.jsx("td",{children:R.tests.map((G,K)=>r.jsx("div",{children:G},K))}),r.jsx("td",{className:"hidden md:table-cell",children:R.date}),r.jsx("td",{children:r.jsx("span",{className:z.className,children:z.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[R.status==="pending"&&r.jsx("button",{onClick:()=>E(R),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),R.status==="billed"&&r.jsx("button",{onClick:()=>C(R.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),R.status==="collected"&&r.jsx("button",{onClick:()=>C(R.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(R.status==="processing"||R.status==="report_ready"||R.status==="reported")&&r.jsx("button",{onClick:()=>I(R),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(R.status==="report_ready"||R.status==="reported")&&r.jsx("button",{onClick:()=>C(R.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(R.status==="completed"||R.status==="report_ready"||R.status==="reported")&&r.jsx("button",{onClick:()=>{R.id?T(`/lab/view-report/${R.id}`):(console.error("Attempted to view report for an order with no ID:",R),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},R.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[i&&!c&&t.length===0&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(R=>r.jsx("div",{className:"lab-order-card",children:r.jsx(ee,{width:"100%",height:150})},R))}),!i&&!c&&t.length===0&&r.jsx("div",{className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."}),!i&&!c&&t.map(R=>{const z=$(R.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:R.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",R.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:R.date})]}),r.jsx("span",{className:`${z.className} lab-card-status-pill`,children:z.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),R.tests.map((G,K)=>r.jsx("div",{className:"lab-card-test-item",children:G},K)),R.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[R.status==="pending"&&r.jsx("button",{onClick:()=>E(R),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),R.status==="billed"&&r.jsx("button",{onClick:()=>C(R.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),R.status==="collected"&&r.jsx("button",{onClick:()=>C(R.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(R.status==="processing"||R.status==="report_ready"||R.status==="reported")&&r.jsx("button",{onClick:()=>I(R),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(R.status==="report_ready"||R.status==="reported")&&r.jsx("button",{onClick:()=>C(R.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(R.status==="completed"||R.status==="report_ready"||R.status==="reported")&&r.jsx("button",{onClick:()=>{R.id?T(`/lab/view-report/${R.id}`):(console.error("Attempted to view report for an order with no ID:",R),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},R.id)})]}),!i&&j>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(m-1)*b+1})," ","to"," ",r.jsx("strong",{children:Math.min(m*b,j)})," ","of"," ",r.jsx("strong",{children:j})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:U,disabled:m===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(Bf,{size:18})}),r.jsxs("span",{children:["Page ",m," of ",_]}),r.jsx("button",{onClick:B,disabled:m===_,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(Vl,{size:18})})]})]})]}),h==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(YM,{})]})]})})," "]})},XA=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(null),c=Mt(),u=v.useRef(null),{openCommandBar:h}=Bc(),p=ps(),m=$=>{$&&(p.prefetchQuery({queryKey:Kt.patients.context($),queryFn:async()=>{const U=await ie(`/api/patients/${$}/context`);if(!U.ok)throw new Error("Failed to fetch patient context");return U.json()},staleTime:5*60*1e3}),p.prefetchQuery({queryKey:Kt.patientDebts.balance($),queryFn:async()=>{const U=await ie(`/api/patient-debts/${$}/balance`);return U.ok?U.json():{netDebt:0}},staleTime:1*60*1e3}),p.prefetchQuery({queryKey:Kt.queue.latest($),queryFn:async()=>{const U=await ie(`/api/queue/patient/${$}/latest`);if(!U.ok)throw new Error("Failed to fetch latest queue status");const B=await U.json();return B!=null&&B._id&&p.prefetchQuery({queryKey:Kt.queue.entry(B._id),queryFn:async()=>{const R=await ie(`/api/queue/doctor/complaint/${B._id}`);if(!R.ok)throw new Error("Failed to fetch complaint record");return R.json()},staleTime:1*60*1e3}),B},staleTime:5e3}),p.prefetchQuery({queryKey:Kt.dental.records($),queryFn:async()=>{const U=await ie(`/api/dental/patient/${$}`);if(!U.ok)throw new Error("Failed to fetch dental records");return U.json()},staleTime:5*60*1e3}))},[x,b]=v.useState(1),[j,w]=v.useState(1),_=10,k=v.useCallback(async($,U,B)=>{s(!0),l(null);try{let R=`/api/pharmacy-orders?page=${$}&limit=${U}`;B&&B.trim()!==""&&(R+=`&search=${encodeURIComponent(B.trim())}`);const z=await ie(R);if(!z.ok)throw new Error(`Failed to fetch orders: ${z.statusText} (${z.status})`);const G=await z.json();G&&Array.isArray(G.orders)?(e(G.orders),w(G.totalPages||1),b(G.currentPage||$)):e([])}catch(R){console.error("Failed to fetch pharmacy orders:",R),l(R.message||"Failed to fetch orders."),e([])}finally{s(!1)}},[]);v.useEffect(()=>(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{k(n?1:x,_,n)},500),()=>{u.current&&clearTimeout(u.current)}),[n,x,k]);const C=$=>c(`/dashboard/edit-pharmacy-order/${$}`),A=$=>c(`/dashboard/edit-complaint/patient/${$.patientId}`),T=$=>{const U=t.find(B=>B.id===$);if(U){const B=U.medications.map(R=>({name:R.name,pack_quantity:R.pack_quantity,loose_quantity:R.loose_quantity,price:R.price??0,pack_price:R.pack_price,loose_price:R.loose_price,total_price:R.total_price,isLoose:R.isLoose,unit:R.unit,drug_id:R.drug_id?String(R.drug_id):null,tabletsPerDay:R.tabletsPerDay,numberOfDays:R.numberOfDays,directions_to_use:R.directions_to_use,discount_percentage:0,batch:R.batch,expiry_date:R.expiry_date}));c(`/dashboard/pharmacy-billing/${$}`,{state:{initialItems:B}})}},E=async($,U)=>{const B=t.find(R=>R.id===$);if(B)try{const R=await ie(`/api/pharmacy-orders/${$}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:U,medications:B.medications})});if(R.ok){const z=await R.json();e(G=>G.map(K=>K.id===z.id?{...K,status:z.status}:K))}}catch(R){console.error("Status update failed",R),alert("Failed to update status")}},I=$=>`pq-pill ${$}`;return r.jsxs("div",{className:"pq-container",children:[r.jsxs("div",{className:"pq-header",children:[r.jsxs("div",{className:"pq-nav-actions",children:[r.jsxs("button",{onClick:()=>c("/dashboard/add-order"),className:"pq-btn",children:[r.jsx(cs,{})," Add Order"]}),r.jsxs("button",{onClick:()=>c("/dashboard/inventory"),className:"pq-btn",children:[r.jsx(md,{})," Inventory"]}),r.jsxs("button",{onClick:()=>h(),className:"pq-btn",children:[r.jsx(ZD,{})," Newton's AI"]}),r.jsxs("button",{onClick:()=>c("/dashboard/distributors"),className:"pq-btn",children:[r.jsx(md,{})," Distributors"]})]}),r.jsxs("div",{className:"pq-search-wrap",children:[r.jsx(fn,{className:"pq-search-icon"}),r.jsx("input",{className:"pq-search-input",placeholder:"Search orders...",value:n,onChange:$=>a($.target.value)})]})]}),r.jsxs("div",{className:"pq-card",children:[r.jsxs("div",{className:"pq-card-content",children:[i&&t.length===0&&r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3].map($=>r.jsx(ee,{height:40,className:"mb-2"},$))}),o&&r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]}),!i&&!o&&t.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."}),!i&&t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pq-table-wrapper",children:r.jsxs("table",{className:"pq-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map($=>r.jsxs("tr",{className:"pq-row",onClick:()=>A($),onMouseEnter:()=>m($.patientId),children:[r.jsxs("td",{children:[r.jsx("div",{className:"pq-text-bold",children:$.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",$.patientTokenNumber]})]}),r.jsx("td",{children:r.jsxs("div",{className:"pq-nested-table-wrap",children:[r.jsx("table",{className:"pq-nested-table",children:r.jsx("tbody",{children:$.medications.map((U,B)=>r.jsxs("tr",{children:[r.jsx("td",{className:"pq-text-bold",children:U.name}),r.jsxs("td",{children:[U.pack_quantity>0&&`Pack: ${U.pack_quantity} `,U.loose_quantity>0&&`Loose: ${U.loose_quantity}`]}),r.jsx("td",{className:"pq-text-sm",children:U.directions_to_use})]},B))})}),$.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"mt-1 text-xs opacity-75 pq-markdown",children:[r.jsx("strong",{children:"Note:"})," ",r.jsx(yd,{remarkPlugins:[xd],children:$.prescriptionForUnavailableDrugs})]})]})}),r.jsx("td",{className:"pq-text-sm",children:new Date($.date).toLocaleDateString()}),r.jsxs("td",{className:"pq-text-mono pq-text-bold",children:["",Number($.order_total||0).toFixed(2)]}),r.jsx("td",{children:r.jsx("span",{className:I($.status),children:$.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pq-actions",children:[$.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:U=>{U.stopPropagation(),C($.id)},className:"pq-action-btn pq-btn-edit",children:[r.jsx(Ui,{size:12})," Edit"]}),r.jsxs("button",{onClick:U=>{U.stopPropagation(),T($.id)},className:"pq-action-btn pq-btn-bill",children:[r.jsx(pd,{size:12})," Bill"]})]}),$.status==="billed"&&r.jsxs("button",{onClick:U=>{U.stopPropagation(),E($.id,"dispensed")},className:"pq-action-btn pq-btn-dispense",children:[r.jsx(Ko,{size:12})," Dispense"]}),($.status==="pending"||$.status==="billed")&&r.jsx("button",{onClick:U=>{U.stopPropagation(),E($.id,"cancelled")},className:"pq-action-btn pq-btn-cancel",children:"Cancel"}),r.jsx("button",{onClick:U=>{U.stopPropagation(),A($)},onMouseEnter:()=>m($.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})]})})]},$.id))})]})}),r.jsx("div",{className:"pq-card-list",children:t.map($=>r.jsxs("div",{className:"pq-mobile-card",onClick:()=>A($),onMouseEnter:()=>m($.patientId),children:[r.jsxs("div",{className:"pq-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pq-text-bold",children:$.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",$.patientTokenNumber]})]}),r.jsx("span",{className:I($.status),children:$.status})]}),r.jsx("div",{className:"mb-2",children:$.medications.slice(0,3).map((U,B)=>r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[U.name," (",U.pack_quantity>0?`${U.pack_quantity}p`:""," ",U.loose_quantity>0?`${U.loose_quantity}l`:"",")"]},B))}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("div",{className:"pq-text-mono pq-text-bold",children:["",Number($.order_total||0).toFixed(2)]}),r.jsx("div",{className:"pq-actions",children:r.jsx("button",{onClick:U=>{U.stopPropagation(),A($)},onMouseEnter:()=>m($.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})})]})]},$.id))})]})]}),!i&&j>1&&r.jsxs("div",{className:"pq-footer px-4 pb-4",children:[r.jsxs("div",{className:"pq-page-info",children:["Page ",x," of ",j]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"pq-pagination-btn",disabled:x===1,onClick:()=>b($=>Math.max(1,$-1)),children:r.jsx(Bf,{size:16})}),r.jsx("button",{className:"pq-pagination-btn",disabled:x===j,onClick:()=>b($=>Math.min(j,$+1)),children:r.jsx(Vl,{size:16})})]})]})]})]})},JA=10,KIe=3,qG=({isEmbedded:t=!1,initialSearch:e=""})=>{const n=Mt(),{customColumnsConfig:a,refetch:i}=uS(),s=a.drugs||[],[o,l]=v.useState(!1),[c,u]=v.useState(!1),[h,p]=v.useState([]),[m,x]=v.useState([]),[b,j]=v.useState(e),[w,_]=v.useState(!0),[k,C]=v.useState(null),[A,T]=v.useState(new Set),[E,I]=v.useState("all"),$=async()=>{try{const Pe=await ie("/api/inventory/download-csv");if(!Pe.ok)throw new Error(`Failed to download CSV: ${Pe.statusText}`);const ot=await Pe.blob(),kt=window.URL.createObjectURL(ot),Ue=document.createElement("a");Ue.href=kt,Ue.download="pharmacy_inventory.csv",document.body.appendChild(Ue),Ue.click(),Ue.remove(),window.URL.revokeObjectURL(kt)}catch(Pe){console.error("Failed to download CSV:",Pe),C(Pe.message||"Failed to download inventory CSV. Please try again.")}},[U,B]=v.useState(!1),[R,z]=v.useState(!1),[G,K]=v.useState(null),[Y,q]=v.useState(!1),[V,H]=v.useState(new Set),[Q,L]=v.useState(1),te=8,[me,X]=v.useState(null),[Re,Se]=v.useState(0),[Ee,Fe]=v.useState(!1),[le,_e]=v.useState(null),[Ve,De]=v.useState(1),[ue,Ae]=v.useState(!1),ce=Q*te,be=ce-te,ke=m.slice(be,ce),Ce=Math.ceil(m.length/te);v.useEffect(()=>{L(1)},[b,E]);const ne=v.useCallback(async()=>{_(!0),C(null);try{const Pe=await ie("/api/drugs");if(!Pe.ok)throw new Error(`Failed to fetch drugs: ${Pe.statusText} (${Pe.status})`);const ot=await Pe.json();let kt=Array.isArray(ot)?ot:ot.drugs||[];kt=kt.map(Ue=>({...Ue,mrp:parseFloat(String(Ue.mrp))||0,rate:Ue.rate!==null&&Ue.rate!==void 0?parseFloat(String(Ue.rate)):null,stock:parseInt(String(Ue.stock),10)||0,gst:Ue.gst!==null&&Ue.gst!==void 0?parseFloat(String(Ue.gst)):null,margin:Ue.margin!==null&&Ue.margin!==void 0?parseFloat(String(Ue.margin)):null,discount:Ue.discount!==null&&Ue.discount!==void 0?parseFloat(String(Ue.discount)):null})),p(kt),x(kt)}catch(Pe){console.error("Failed to fetch drugs:",Pe),C(Pe.message||"Failed to load inventory. Please try again.")}finally{_(!1)}},[]);v.useEffect(()=>{ne()},[ne]),v.useEffect(()=>{e&&j(e)},[e]);const ye=v.useMemo(()=>new ho(h,{keys:["name","brand_name","description","supplier","box_number"],threshold:.3,ignoreLocation:!0}),[h]);v.useEffect(()=>{let Pe=h;b&&(Pe=ye.search(b).map(Ue=>Ue.item));const ot=new Date,kt=CMe(ot,KIe);E==="low-stock"?Pe=Pe.filter(Ue=>Ue.stock<=JA):E==="near-expiry"?Pe=Pe.filter(Ue=>{if(!Ue.expiry_date)return!1;const jt=GB(Ue.expiry_date);return ID(jt)&&YA(jt,kt)&&!YA(jt,ot)}):E==="expired"&&(Pe=Pe.filter(Ue=>{if(!Ue.expiry_date)return!1;const jt=GB(Ue.expiry_date);return ID(jt)&&YA(jt,ot)})),x(Pe)},[b,h,E,ye]);const de=()=>{B(!1),X(null)},se=Pe=>{Se(parseInt(Pe.target.value,10)||0)},re=async Pe=>{if(Pe.preventDefault(),C(null),!me||!me.id||Re===0){C("No drug selected or adjustment amount is zero.");return}try{const ot=await ie(`/api/drugs/${me.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:Re})});if(!ot.ok){const Ue=await ot.json();throw new Error(Ue.message||`Failed to adjust stock: ${ot.statusText}`)}const kt=await ot.json();p(Ue=>Ue.map(jt=>jt.id===kt.id?kt:jt)),de()}catch(ot){console.error("Failed to adjust stock:",ot),C(ot.message||"Failed to adjust stock. Please try again.")}},oe=Pe=>{K(Pe),z(!0)},je=()=>{z(!1),K(null)},Oe=async()=>{if(!G||!G.id){C("No drug selected for deletion.");return}_(!0),C(null);try{const Pe=await ie(`/api/drugs/${G.id}`,{method:"DELETE"});if(!Pe.ok){const ot=await Pe.json();throw new Error(ot.message||`Failed to delete drug: ${Pe.statusText}`)}ne(),je()}catch(Pe){console.error("Failed to delete drug:",Pe),C(Pe.message||"Failed to delete drug. Please try again.")}finally{_(!1)}},J=()=>{q(!0)},xe=()=>{q(!1)},[ge,he]=v.useState(!1),Ie=()=>{V.size>0&&he(!0)},nt=()=>{he(!1)},Be=async()=>{if(V.size===0){C("No drugs selected for deletion.");return}_(!0),C(null);try{const Pe=await ie("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(V)})});if(!Pe.ok){const ot=await Pe.json();throw new Error(ot.message||`Failed to delete selected drugs: ${Pe.statusText}`)}ne(),H(new Set),nt()}catch(Pe){console.error("Failed to delete selected drugs:",Pe),C(Pe.message||"Failed to delete selected drugs. Please try again.")}finally{_(!1)}},Ge=async()=>{_(!0),C(null);try{const Pe=await ie("/api/drugs/all",{method:"DELETE"});if(!Pe.ok){const ot=await Pe.json();throw new Error(ot.message||`Failed to delete all drugs: ${Pe.statusText}`)}ne(),xe()}catch(Pe){console.error("Failed to delete all drugs:",Pe),C(Pe.message||"Failed to delete all drugs. Please try again.")}finally{_(!1)}},it=Pe=>{if(!Pe)return null;const ot=Pe.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return ot?parseInt(ot[1],10):null},wt=Pe=>{_e(Pe),De(1),Fe(!0)},we=()=>{Fe(!1),_e(null),De(1)},Qe=Pe=>{De(parseInt(Pe.target.value,10)||0)},Xe=async Pe=>{if(Pe.preventDefault(),C(null),!le||!le.id||Ve<=0){C("No drug selected or invalid number of packs to convert.");return}const ot=it(le.pack);if(!ot||ot<=0){C(`Cannot convert "${le.name}" to loose. Invalid pack unit: ${le.pack||"N/A"}.`);return}if(Ve>(le.stock??0)){C(`Cannot convert ${Ve} packs. Only ${le.stock??0} packs are in stock.`);return}try{const kt=await ie(`/api/drugs/${le.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:Ve,packSize:ot})});if(!kt.ok){const jt=await kt.json();throw new Error(jt.message||`Failed to convert to loose: ${kt.statusText}`)}const Ue=await kt.json();p(jt=>jt.map(Tt=>Tt.id===Ue.id?Ue:Tt)),we()}catch(kt){console.error("Failed to convert to loose:",kt),C(kt.message||"Failed to convert to loose. Please try again.")}finally{_(!1)}},ut=()=>{Ae(!0)},Ct=()=>{Ae(!1)},bt=async()=>{_(!0),C(null);try{const Pe=await ie("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!Pe.ok){const ot=await Pe.json();throw new Error(ot.message||`Failed to add default medications: ${Pe.statusText}`)}ne(),Ct()}catch(Pe){console.error("Failed to add default medications:",Pe),C(Pe.message||"Failed to add default medications. Please try again.")}finally{_(!1)}};return w?r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsx("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[1,2,3,4].map(Pe=>r.jsx(ee,{width:120,height:36},Pe))}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsx(ee,{width:100,height:36}),[1,2,3,4].map(Pe=>r.jsx(ee,{width:120,height:36},Pe))]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsx(ee,{width:"100%",height:40,style:{maxWidth:"600px"}}),r.jsx(ee,{width:150,height:40})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx(ee,{width:20,height:20})}),r.jsx("th",{children:"DRUG DETAILS"}),r.jsx("th",{children:"PACK"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{className:"qty-header",children:"STOCK"}),r.jsx("th",{className:"mrp-header",children:"MRP"}),r.jsx("th",{className:"rate-header",children:"RATE"}),r.jsx("th",{children:"BOX"}),r.jsx("th",{children:"DISC %"}),r.jsx("th",{children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(Pe=>r.jsxs("tr",{children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx(ee,{width:20,height:20})}),r.jsxs("td",{children:[r.jsx(ee,{width:"80%",height:20}),r.jsx(ee,{width:"40%",height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(ee,{width:60,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsxs("td",{children:[r.jsx(ee,{width:40,height:20}),r.jsx(ee,{width:60,height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:40,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:60,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:60,height:20})}),r.jsx("td",{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ee,{width:20,height:20}),r.jsx(ee,{width:20,height:20}),r.jsx(ee,{width:20,height:20})]})})]},Pe))})]})})]}):k?r.jsxs("div",{className:"error-indicator",children:["Error: ",k]}):r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline add-drug-button",children:[r.jsx(cs,{size:18}),"Add New Drug"]}),r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline",children:[r.jsx(cs,{size:18}),"Purchase Page"]}),r.jsxs("button",{onClick:()=>n("/dashboard/distributors"),className:"action-button-outline",children:[r.jsx(cs,{size:18}),"Distributors"]}),r.jsxs("button",{onClick:()=>l(!0),className:"action-button-outline",title:"Manage Custom Columns",children:[r.jsx(gd,{size:18}),"Columns"]})]}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>u(!1),className:`view-mode-btn ${c?"":"active"}`,title:"List View",children:[r.jsx(Rb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>u(!0),className:`view-mode-btn ${c?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(kf,{size:18})," Excel"]})]}),r.jsx("button",{onClick:$,className:"action-button-outline",children:"Download CSV"}),r.jsxs("button",{onClick:ut,className:"action-button-outline",children:[r.jsx(cs,{size:18}),"Import Defaults"]}),r.jsxs("button",{onClick:Ie,className:"action-button-outline delete-button-outline",disabled:V.size===0,children:[r.jsx(zn,{size:18}),"Delete (",V.size,")"]}),r.jsxs("button",{onClick:J,className:"action-button-outline delete-all-button-outline",children:[r.jsx(zn,{size:18}),"Delete All"]})]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsxs("div",{className:"search-input-wrapper",style:{maxWidth:"600px"},children:[r.jsx(fn,{size:20,className:"search-input-icon"}),r.jsx("input",{type:"text",placeholder:"Search drugs...",value:b,onChange:Pe=>j(Pe.target.value),className:"inventory-search-input"})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("select",{value:E,onChange:Pe=>I(Pe.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})})]}),c?r.jsx("div",{className:"inventory-table-container",style:{padding:"1rem"},children:r.jsx(Hb,{title:"Pharmacy Inventory",columns:[{key:"name",label:"Drug Name",type:"text",editable:!0},{key:"brand_name",label:"Brand Name",type:"text",editable:!0},{key:"pack",label:"Pack",type:"text",editable:!0},{key:"expiry_date",label:"Expiry",type:"date",editable:!0},{key:"stock",label:"Stock",type:"number",editable:!0},{key:"mrp",label:"MRP",type:"number",editable:!0},{key:"rate",label:"Rate",type:"number",editable:!0},{key:"box_number",label:"Box",type:"text",editable:!0},{key:"discount",label:"Discount %",type:"number",editable:!0},{key:"gst",label:"GST %",type:"number",editable:!0},{key:"supplier",label:"Supplier",type:"text",editable:!0}],data:m,onSave:async Pe=>{try{for(const ot of Pe)ot.id&&await ie(`/api/drugs/${ot.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)});ne()}catch(ot){console.error("Failed to save:",ot),C(ot.message||"Failed to save changes")}},editable:!0,showRowNumbers:!0})}):r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx("input",{type:"checkbox",onChange:Pe=>{if(Pe.target.checked){const ot=new Set(m.map(kt=>kt.id));H(ot)}else H(new Set)},checked:V.size===m.length&&m.length>0,disabled:m.length===0})}),r.jsx("th",{className:"drug-name-header",children:"DRUG DETAILS"}),r.jsx("th",{className:"pack-header",children:"PACK"}),r.jsx("th",{className:"expiry-header",children:"EXPIRY"}),r.jsx("th",{className:"text-stock qty-header",children:"STOCK"}),r.jsx("th",{className:"text-price mrp-header",children:"MRP"}),r.jsx("th",{className:"text-cost rate-header",children:"RATE"}),r.jsx("th",{className:"box-number-header",children:"BOX"}),r.jsx("th",{className:"discount-header",children:"DISC %"}),r.jsx("th",{className:"margin-header",children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsxs("tbody",{children:[m.length===0&&r.jsx("tr",{className:"no-results-message",children:r.jsx("td",{colSpan:11,children:"No drugs found matching your search."})}),ke.map(Pe=>r.jsxs(Te.Fragment,{children:[r.jsxs("tr",{className:"drug-row",onClick:()=>{const ot=new Set(A);ot.has(Pe.id)&&Pe.id!==void 0?ot.delete(Pe.id):Pe.id!==void 0&&ot.add(Pe.id),T(ot)},children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx("input",{type:"checkbox",onClick:ot=>ot.stopPropagation(),checked:V.has(Pe.id),onChange:()=>{const ot=new Set(V);ot.has(Pe.id)?ot.delete(Pe.id):ot.add(Pe.id),H(ot)}})}),r.jsx("td",{className:"drug-name-cell",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:Pe.brand_name||Pe.name||"-"}),Pe.brand_name&&Pe.name&&Pe.brand_name!==Pe.name&&r.jsx("span",{className:"text-xs text-muted-foreground",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:Pe.name})]})}),r.jsx("td",{className:"text-muted pack-cell",children:Pe.pack||"-"}),r.jsx("td",{className:"text-muted",children:Pe.expiry_date?new Date(Pe.expiry_date).toLocaleDateString("en-GB"):"-"}),r.jsxs("td",{className:`text-stock ${Pe.stock<=JA?"low-stock":""}`,children:[r.jsx("div",{style:{fontWeight:"bold"},children:Pe.stock}),r.jsx("div",{className:"loose-quantity",children:Pe.loose!==null&&Pe.loose!==void 0?`${Pe.loose} loose`:"0 loose"})]}),r.jsxs("td",{className:"text-muted text-price",children:["",typeof Pe.mrp=="number"?Pe.mrp.toFixed(2):"N/A"]}),r.jsx("td",{className:"text-muted text-cost",children:Pe.rate!==null&&Pe.rate!==void 0?`${Pe.rate.toFixed(2)}`:"-"}),r.jsx("td",{className:"text-muted",children:Pe.box_number||"-"}),r.jsx("td",{className:"text-muted",children:Pe.discount!==null&&Pe.discount!==void 0?`${Pe.discount.toFixed(2)}%`:"0.00%"}),r.jsx("td",{className:"text-muted",children:(()=>{const ot=Pe.mrp||0,kt=Pe.rate||0,Ue=Pe.discount||0,jt=Pe.gst||0,Qn=kt*(1-Ue/100)*(1+jt/100),vt=ot-Qn;return`${(ot>0?vt/ot*100:0).toFixed(2)}%`})()}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:ot=>{ot.stopPropagation(),n(`/dashboard/inventory/edit/${Pe.id}`)},className:"action-icon-button",title:"Edit Drug",children:r.jsx(Ui,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),oe(Pe)},className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(zn,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),X(Pe),B(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:r.jsx(FI,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),wt(Pe)},className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!Pe.pack||it(Pe.pack)===null,children:r.jsx(UI,{size:16})})]})})]}),A.has(Pe.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:11,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",Pe.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",Pe.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Batch:"})," ",Pe.batch||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"HSN Code:"})," ",Pe.hsn_code||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"MFG:"})," ",Pe.mfg||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose Price:"}),(()=>{const ot=it(Pe.pack);return ot&&ot>0&&typeof Pe.mrp=="number"?`${(Pe.mrp/ot).toFixed(2)}`:"N/A"})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"GST:"})," ",Pe.gst!==null&&Pe.gst!==void 0?`${Pe.gst.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(Pe.last_updated).toLocaleString()]}),s.length>0&&r.jsx("div",{className:"custom-fields-display",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px dashed var(--border-color)"},children:s.map(ot=>{var kt;return r.jsxs("p",{children:[r.jsxs("strong",{children:[ot.label,":"]})," ",(kt=Pe.custom_fields)!=null&&kt[ot.key]?String(Pe.custom_fields[ot.key]):"-"]},ot.key)})})]})})})]},Pe.id))]})]})}),r.jsx("div",{className:`inventory-grid-mobile ${t?"embedded":""}`,style:{display:c?"none":void 0},children:m.length===0?r.jsx("div",{className:"inventory-card-empty",children:"No drugs found matching your search."}):ke.map(Pe=>r.jsxs("div",{className:"inventory-card",onClick:()=>{const ot=new Set(A);ot.has(Pe.id)&&Pe.id!==void 0?ot.delete(Pe.id):Pe.id!==void 0&&ot.add(Pe.id),T(ot)},children:[r.jsxs("div",{className:"inventory-card-header",children:[r.jsxs("div",{className:"inventory-card-drug-info",children:[r.jsx("h4",{className:"inventory-card-drug-name",children:Pe.brand_name||Pe.name||"-"}),Pe.brand_name&&Pe.name&&Pe.brand_name!==Pe.name&&r.jsx("div",{className:"inventory-card-brand-name",children:Pe.name})]}),r.jsx("div",{className:"inventory-card-checkbox",onClick:ot=>ot.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:V.has(Pe.id),onChange:()=>{const ot=new Set(V);ot.has(Pe.id)?ot.delete(Pe.id):ot.add(Pe.id),H(ot)}})})]}),r.jsxs("div",{className:"inventory-card-body",children:[r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Stock"}),r.jsxs("span",{className:`inventory-card-field-value stock-value ${Pe.stock<=JA?"stock-low":""}`,children:[Pe.stock,r.jsxs("span",{className:"inventory-card-loose",children:[" (",Pe.loose??0," loose)"]})]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"MRP"}),r.jsxs("span",{className:"inventory-card-field-value price-value",children:["",typeof Pe.mrp=="number"?Pe.mrp.toFixed(2):"N/A"]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Pack"}),r.jsx("span",{className:"inventory-card-field-value",children:Pe.pack||"-"})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Expiry"}),r.jsx("span",{className:"inventory-card-field-value",children:Pe.expiry_date?new Date(Pe.expiry_date).toLocaleDateString("en-GB"):"-"})]})]}),A.has(Pe.id)&&r.jsxs("div",{className:"inventory-card-expanded",children:[r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Rate"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Pe.rate!==null&&Pe.rate!==void 0?`${Pe.rate.toFixed(2)}`:"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Box"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Pe.box_number||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Supplier"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Pe.supplier||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Batch"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Pe.batch||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"HSN Code"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Pe.hsn_code||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Discount"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Pe.discount!==null&&Pe.discount!==void 0?`${Pe.discount.toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"GST"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Pe.gst!==null&&Pe.gst!==void 0?`${Pe.gst.toFixed(2)}%`:"-"})]}),s.length>0&&s.map(ot=>{var kt;return r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:ot.label}),r.jsx("span",{className:"inventory-card-expanded-value",children:(kt=Pe.custom_fields)!=null&&kt[ot.key]?String(Pe.custom_fields[ot.key]):"-"})]},ot.key)})]}),r.jsxs("div",{className:"inventory-card-actions",onClick:ot=>ot.stopPropagation(),children:[r.jsxs("button",{className:"inventory-card-action-btn btn-edit",onClick:()=>n(`/dashboard/inventory/edit/${Pe.id}`),title:"Edit Drug",children:[r.jsx(Ui,{size:14}),"Edit"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-delete",onClick:()=>oe(Pe),title:"Delete Drug",children:[r.jsx(zn,{size:14}),"Delete"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-adjust",onClick:()=>{X(Pe),B(!0)},title:"Adjust Stock",children:[r.jsx(FI,{size:14}),"Adjust"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-convert",onClick:()=>wt(Pe),title:"Convert to Loose",disabled:!Pe.pack||it(Pe.pack)===null,children:[r.jsx(UI,{size:14}),"Loose"]})]})]},Pe.id))}),Ce>1&&r.jsxs("div",{className:"pagination-controls",style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",backgroundColor:"var(--card-bg, #fff)",borderTop:"1px solid var(--border-color)"},children:[r.jsx("button",{onClick:()=>L(Pe=>Math.max(Pe-1,1)),disabled:Q===1,className:"pagination-button",children:"Previous"}),r.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Page ",Q," of ",Ce]}),r.jsx("button",{onClick:()=>L(Pe=>Math.min(Pe+1,Ce)),disabled:Q===Ce,className:"pagination-button",children:"Next"})]}),R&&G&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:je,className:"modal-close-button",children:r.jsx(Ot,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:G.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),k&&r.jsx("div",{className:"modal-error-message",children:k}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:je,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Oe,className:"button-delete",children:"Delete"})]})]})}),U&&me&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:de,className:"modal-close-button",children:r.jsx(Ot,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:me.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Stock: ",me.stock]}),k&&r.jsx("div",{className:"modal-error-message",children:k}),r.jsxs("form",{onSubmit:re,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:Re===0?"":Re,onChange:se,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:de,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),Y&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:xe,className:"modal-close-button",children:r.jsx(Ot,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),k&&r.jsx("div",{className:"modal-error-message",children:k}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:xe,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ge,className:"button-delete",children:"Delete All"})]})]})}),ge&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:nt,className:"modal-close-button",children:r.jsx(Ot,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:V.size})," selected drug(s)? This action cannot be undone."]}),k&&r.jsx("div",{className:"modal-error-message",children:k}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:nt,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Be,className:"button-delete",children:"Delete Selected"})]})]})}),Ee&&le&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:we,className:"modal-close-button",children:r.jsx(Ot,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Convert to Loose"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:le.name||"Unnamed Drug"}),r.jsx("br",{}),"Pack Size: ",le.pack,r.jsx("br",{}),"Current Stock: ",le.stock," packs, ",le.loose??0," loose units."]}),k&&r.jsx("div",{className:"modal-error-message",children:k}),r.jsxs("form",{onSubmit:Xe,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"packsToConvert",className:"form-label",children:"Packs to Convert"}),r.jsx("input",{type:"number",name:"packsToConvert",id:"packsToConvert",required:!0,step:"1",min:"1",max:le.stock,value:Ve===0?"":Ve,onChange:Qe,className:"form-input"}),r.jsxs("p",{className:"form-help-text",children:["Converting ",Ve," pack(s) will add ",Ve*(it(le.pack)||0)," loose units."]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:we,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Convert"})]})]})]})}),ue&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ct,className:"modal-close-button",children:r.jsx(Ot,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),r.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),k&&r.jsx("div",{className:"modal-error-message",children:k}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ct,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:bt,className:"button-submit",children:"Add Defaults"})]})]})}),r.jsx(WM,{isOpen:o,onClose:()=>l(!1),entityType:"drugs",entityLabel:"Pharmacy Drugs",currentConfig:a,onConfigUpdated:()=>{i()}})]})},YIe=()=>{const t=Mt();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},UG=()=>{const{id:t}=Da(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(!1),[h,p]=v.useState(!1),m=v.useRef(null),x=v.useRef(null),b=v.useRef(null),j=v.useCallback(async()=>{if(!t){l("Drug ID is missing."),s(!1);return}s(!0),l(null);try{const C=await ie(`/api/drugs/${t}`);if(!C.ok){const T=await C.json();throw new Error(T.message||`Failed to fetch drug: ${C.statusText}`)}let A=await C.json();A={...A,name:A.name||"",brand_name:A.brand_name||"",mrp:parseFloat(String(A.mrp))||0,rate:A.rate!==null&&A.rate!==void 0?parseFloat(String(A.rate)):null,stock:parseInt(String(A.stock),10)||0,gst:A.gst!==null&&A.gst!==void 0?parseFloat(String(A.gst)):null,margin:A.margin!==null&&A.margin!==void 0?parseFloat(String(A.margin)):null,discount:A.discount!==null&&A.discount!==void 0?parseFloat(String(A.discount)):null,batch:A.batch||"",hsn_code:A.hsn_code||"",mfg:A.mfg||"",loose:A.loose!==null&&A.loose!==void 0?parseInt(String(A.loose),10):null},a(A)}catch(C){console.error("Failed to fetch drug:",C),l(C.message||"Failed to load drug data. Please try again.")}finally{s(!1)}},[t]);v.useEffect(()=>{j()},[j]),v.useEffect(()=>{const C=T=>{T.key==="Tab"&&x.current===document.activeElement&&(h||(p(!0),setTimeout(()=>{var E;(E=b.current)==null||E.focus()},0),T.preventDefault()))},A=T=>{m.current&&!m.current.contains(T.target)&&p(!1)};return document.addEventListener("keydown",C),document.addEventListener("mousedown",A),()=>{document.removeEventListener("keydown",C),document.removeEventListener("mousedown",A)}},[h]);const w=C=>{const{name:A,value:T,type:E}=C.target;a(I=>I?{...I,[A]:E==="number"?parseFloat(T)||null:T}:null)},_=()=>{e(-1)},k=async C=>{if(C.preventDefault(),l(null),u(!0),!n||!n.id){l("Cannot edit drug: No drug data available."),u(!1);return}if(n.mrp===void 0||n.stock===void 0){l("MRP and Stock Quantity are required."),u(!1);return}const A={...n,name:n.name===""?null:n.name,brand_name:n.brand_name===""?null:n.brand_name,rate:n.rate===0?null:n.rate,expiry_date:n.expiry_date===""?null:n.expiry_date,gst:n.gst===0?null:n.gst,margin:n.margin===0?null:n.margin,discount:n.discount===0?null:n.discount,batch:n.batch===""?null:n.batch,hsn_code:n.hsn_code===""?null:n.hsn_code,mfg:n.mfg===""?null:n.mfg,loose:n.loose===0?null:n.loose};try{const T=await ie(`/api/drugs/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!T.ok){const E=await T.json();throw new Error(E.message||`Failed to update drug: ${T.statusText}`)}await T.json(),e(-1)}catch(T){console.error("Failed to update drug:",T),l(T.message||"Failed to update drug. Please try again.")}finally{u(!1)}};return i?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):o&&!n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",o]})}):n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",n.name]}),r.jsx("button",{onClick:_,className:"cancel-button",title:"Go Back",children:r.jsx(Ot,{size:24})})]}),o&&r.jsx("div",{className:"error-message-submit",children:o}),r.jsxs("form",{onSubmit:k,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Il,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",value:n.name||"",onChange:w,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Il,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:n.brand_name||"",onChange:w,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Il,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"edit-mrp",required:!0,step:"0.01",min:"0",value:n.mrp||"",onChange:w,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Il,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"edit-stock",required:!0,step:"1",min:"0",value:n.stock||"",onChange:w,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"edit-pack",value:n.pack||"",onChange:w,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:n.expiry_date||"",onChange:w,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:n.box_number||"",onChange:w,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:m,children:[r.jsx("button",{type:"button",onClick:()=>p(!h),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),h&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:n.description||"",onChange:w,className:"custom-text-input",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:n.supplier||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"edit-rate",step:"0.01",min:"0",value:n.rate??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:b})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:n.gst??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:n.margin??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:n.discount??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:n.batch||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:n.hsn_code||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:n.mfg||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),r.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:n.loose??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:_,disabled:c,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:20,children:c?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},QIe=({clinicId:t})=>{const e=Mt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,u]=v.useState([]),[h,p]=v.useState(!0),m=async()=>{try{const w=await ie("/api/clinic-roles");if(w.ok){const _=await w.json();u(_)}}catch(w){console.error("Failed to fetch roles:",w)}finally{p(!1)}};v.useEffect(()=>{s(t?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly."),m()},[t]);const x=w=>{const{name:_,value:k}=w.target;a(C=>{const A={...C,[_]:k};return _==="role"&&k!=="doctor"&&(A.opd_fee=""),A})},b=async w=>{if(w.preventDefault(),s(null),!n.name||!n.email||!n.role||!n.password){s("Name, Email, Role, and Password are required.");return}if(!t){s("Clinic information is missing. Cannot add staff.");return}const _={...n,clinic_id:t,opd_fee:n.role==="doctor"&&n.opd_fee?parseFloat(String(n.opd_fee)):null};if(_.role==="doctor"&&n.opd_fee&&isNaN(_.opd_fee)){s("Invalid OPD Fee format. Please enter a number.");return}l(!0);try{const k=await ie("/api/staff",{method:"POST",body:JSON.stringify(_)});if(!k.ok){const C=await k.json();throw new Error(C.message||"Server responded with an error")}e(-1)}catch(k){s(`Failed to add staff: ${k.message}`)}finally{l(!1)}},j=()=>{e(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:j,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(en,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(zr,{size:18,className:"mr-2 text-red-500"}),i]}),r.jsxs("form",{onSubmit:b,className:`staff-form ${t?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:n.name||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:n.email||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:x,required:!0,disabled:o||!t||h,children:h?r.jsx("option",{value:"",children:"Loading roles..."}):c.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):c.map(w=>r.jsx("option",{value:w.key,children:w.name},w.key))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:n.password||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Create a password"})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:n.opd_fee||"",onChange:x,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:o||!t}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:o||!t,children:[o?r.jsx(co,{size:18,className:"animate-spin mr-2"}):r.jsx(Ln,{size:18,className:"mr-2"}),o?"Adding...":"Add Staff Member"]})]})]})},XIe=()=>{const{id:t}=Da(),e=Mt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,u]=v.useState(!1),[h,p]=v.useState(null),[m,x]=v.useState(null),[b,j]=v.useState([]),[w,_]=v.useState(!0),k=async()=>{try{const I=await ie("/api/clinic-roles");if(I.ok){const $=await I.json();j($)}}catch(I){console.error("Failed to fetch roles:",I)}finally{_(!1)}},C=v.useCallback(async()=>{if(!t){p("Staff ID is missing."),l(!1);return}l(!0),p(null),x(null);try{const I=await ie(`/staff/${t}`);if(!I.ok){const U=await I.json();throw new Error(U.message||`HTTP error! status: ${I.status}`)}const $=await I.json();a({name:$.name,email:$.email,role:$.role,opd_fee:$.opd_fee??"",active:$.active})}catch(I){p(`Failed to load staff details: ${I.message}`)}finally{l(!1)}},[t]);v.useEffect(()=>{C(),k()},[C]);const A=I=>{const{name:$,value:U,type:B}=I.target;if(B==="checkbox"){const{checked:R}=I.target;a(z=>({...z,[$]:R}))}else a(R=>({...R,[$]:U}))},T=I=>{s(I.target.value)},E=async I=>{if(I.preventDefault(),!t){p("Staff ID is missing.");return}u(!0),p(null),x(null);const $={name:n.name,email:n.email,role:n.role,active:n.active};if(n.role==="doctor"){const U=n.opd_fee?parseFloat(String(n.opd_fee)):null;if(U!==null&&isNaN(U)){p("OPD Fee must be a valid number."),u(!1);return}$.opd_fee=U}else $.opd_fee=null;i.trim()!==""&&($.password=i.trim());try{const U=await ie(`/staff/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!U.ok){const B=await U.json();throw new Error(B.message||`HTTP error! status: ${U.status}`)}x("Staff details updated successfully!"),s(""),setTimeout(()=>e(-1),1500)}catch(U){p(`Failed to update staff: ${U.message}`)}finally{u(!1)}};return o?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(co,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(en,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),h&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(zr,{size:18,className:"mr-2 text-red-500"}),h,r.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),m&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(Ko,{size:18,className:"mr-2 text-green-500"}),m,r.jsx("button",{onClick:()=>x(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),r.jsxs("form",{onSubmit:E,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:A,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email||"",onChange:A,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:A,required:!0,disabled:w,children:w?r.jsx("option",{value:"",children:"Loading roles..."}):b.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]}):b.map(I=>r.jsx("option",{value:I.key,children:I.name},I.key))})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:n.opd_fee||"",onChange:A,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:n.active??!0,onChange:A}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:i,onChange:T,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(co,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(qi,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},KB=()=>{const{patientId:t}=Da(),e=Mt(),[n,a]=v.useState([]),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,u]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){u("Patient ID not provided.");return}l(!0),u(null);try{const m=await ie(`/api/patients/${t}`);if(!m.ok)throw new Error(`Failed to fetch patient details: ${m.status}`);const x=await m.json();s({name:x.name,age:x.age,gender:x.gender});const b=await ie(`/api/patients/${t}/complaints`);if(b.ok){const w=(await b.json()).sort((_,k)=>new Date(k.createdAt).getTime()-new Date(_.createdAt).getTime());a(w)}else if(b.status===404)a([]);else throw new Error(`Failed to fetch complaints: ${b.status}`)}catch(m){console.error("Error fetching past complaints or patient info:",m),u(`Failed to load data. ${m.message}`),a([]),s(null)}finally{l(!1)}})()},[t]);const h=p=>{navigator.clipboard.writeText(p).then(()=>console.log("Complaint copied to clipboard")).catch(m=>console.error("Failed to copy complaint: ",m))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:i.name})," (",i.age??"N/A"," / ",i.gender??"N/A",")"]}),c&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",c]}),o&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!o&&n.length===0&&!c&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!o&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(p.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.complaint}),r.jsx("button",{onClick:()=>h(p.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},p.id))})]})},JIe=t=>{if(t===0)return"Zero";const e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],a=l=>l===0?"":l<20?e[l]:l<100?n[Math.floor(l/10)]+(l%10?" "+e[l%10]:""):e[Math.floor(l/100)]+" Hundred"+(l%100?" and "+a(l%100):""),i=Math.floor(t),s=Math.round((t-i)*100);let o="";return i>=1e7&&(o+=a(Math.floor(i/1e7))+" Crore "),i>=1e5&&(o+=a(Math.floor(i%1e7/1e5))+" Lakh "),i>=1e3&&(o+=a(Math.floor(i%1e5/1e3))+" Thousand "),i>=100&&(o+=a(Math.floor(i%1e3/100))+" Hundred "),i%100&&(o+=(o?"and ":"")+a(i%100)),o=o.trim()+" Rupees",s>0&&(o+=" and "+a(s)+" Paise"),o+" Only"},ZIe=t=>{const e=typeof t=="string"?parseInt(t,10):t;return`INV-${String(e).padStart(6,"0")}`},ZA=500,YB="defaultConsultationFee",eRe=({patientId:t,billId:e,queueId:n,onBillCreated:a,onBillUpdated:i,initialItems:s=[],billType:o="other",relatedId:l,initialStatus:c="pending",initialDiscountPercentage:u=0,readOnlyMode:h=!1,doctorId:p,labOrderId:m,patientInsuranceType:x})=>{const[b,j]=v.useState(null),[w,_]=v.useState([]),k=v.useRef([]),[C,A]=v.useState(""),[T,E]=v.useState(""),[I,$]=v.useState(1),[U,B]=v.useState(u),[R,z]=v.useState("cash"),[G,K]=v.useState(!1),[Y,q]=v.useState(null),[V,H]=v.useState(!1),[Q,L]=v.useState(!1),[te,me]=v.useState(!1),[X,Re]=v.useState(null),[Se,Ee]=v.useState([]),[Fe,le]=v.useState(null),[_e,Ve]=v.useState(""),[De,ue]=v.useState("cash"),[Ae,ce]=v.useState(!1),[be,ke]=v.useState(!1),[Ce,ne]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),ye=()=>{Ce.length<5&&ne(et=>[...et,{id:Date.now().toString(),method:"cash",amount:0}])},de=et=>{Ce.length>2&&ne(yt=>yt.filter(St=>St.id!==et))},se=(et,yt,St)=>{ne(Rt=>Rt.map($n=>$n.id===et?yt==="method"?{...$n,method:St}:{...$n,amount:Math.max(0,St)}:$n))},re=(et,yt)=>{const St=Ce.filter(Cn=>Cn.id!==et).reduce((Cn,$n)=>Cn+$n.amount,0),Rt=Math.max(0,yt-St);ne(Cn=>Cn.map($n=>$n.id===et?{...$n,amount:Rt}:$n))},[oe,je]=v.useState(null),[Oe,J]=v.useState(!1),[xe,ge]=v.useState(ZA),[he,Ie]=v.useState(ZA.toString()),[nt,Be]=v.useState(""),[Ge,it]=v.useState(""),[wt,we]=v.useState(""),[Qe,Xe]=v.useState(""),[ut,Ct]=v.useState(""),bt=e?"view_pay":"create";v.useEffect(()=>{const et=localStorage.getItem(YB),yt=et?parseFloat(et):ZA;isNaN(yt)||(ge(yt),Ie(yt.toString()))},[]);const Pe=s.length===0;v.useEffect(()=>{t?(async()=>{K(!0),q(null);try{const yt=await ie(`/api/patients/${t}`);if(!yt.ok){const Rt=await yt.json().catch(()=>({}));throw new Error(Rt.message||"Failed to fetch patient details")}const St=await yt.json();j(St)}catch(yt){q(`Failed to load patient details: ${yt.message}`),j(null)}finally{K(!1)}})():j(null)},[t]),v.useEffect(()=>{e?(async()=>{me(!0),q(null),Re(null),Ee([]),le(null);try{const yt=await ie(`/api/bills/${e}`);if(!yt.ok){const Rt=await yt.json().catch(()=>({}));throw new Error(Rt.message||"Failed to fetch bill details")}const St=await yt.json();if(!St.bill||!St.payments||!St.calculated)throw new Error("Invalid bill details structure.");Re(St.bill),Ee(St.payments),le(St.calculated),B(St.bill.discount_percentage!==void 0&&St.bill.discount_percentage!==null?parseFloat(St.bill.discount_percentage.toString()):0),St.bill.payment_mode&&z(St.bill.payment_mode),!b&&St.bill.patient_id&&ot(St.bill.patient_id.toString())}catch(yt){q(`Failed to load bill details: ${yt.message}`),Re(null),Ee([]),le(null)}finally{me(!1)}})():(Re(null),Ee([]),le(null))},[e]),v.useEffect(()=>{(async()=>{try{const yt=await ie("/api/clinics/settings");if(!yt.ok)throw new Error("Failed to fetch clinic settings");const St=await yt.json();Be(St.upi_id||""),it(St.name||""),we(St.address||""),Xe(St.notes||"")}catch(yt){console.error("Error fetching clinic settings:",yt)}})()},[]);const ot=async et=>{K(!0);try{const yt=await ie(`/api/patients/${et}`);if(!yt.ok)throw new Error("Failed to fetch patient");const St=await yt.json();j(St)}catch(yt){console.error("Error fetching patient details:",yt),j(null)}finally{K(!1)}},kt=v.useCallback(async et=>{L(!0),q(null);const yt=et.filter(St=>St.drug_id!=null).map(async St=>{try{const Rt=await ie(`/api/drugs/${St.drug_id}`);if(!Rt.ok)throw new Error(`Drug ${St.drug_id} not found.`);const Cn=await Rt.json();return{...St,price:Cn.price,total:Cn.price*St.quantity}}catch{return q(Cn=>`${Cn?Cn+"; ":""}Failed to fetch price for ${St.name}`),St}});try{const St=await Promise.all(yt);_(Rt=>{const Cn=new Map(St.map($n=>[$n.id,$n]));return Rt.map($n=>Cn.get($n.id)||$n)})}catch{}finally{L(!1)}},[ie]);v.useEffect(()=>{if(e){_([]),k.current=[];return}JSON.stringify(s)===JSON.stringify(k.current)||(async()=>{let St=[];if(s&&s.length>0)St=s.map((Rt,Cn)=>({...Rt,id:`initial-${Cn}-${Date.now()}`})),z(c==="paid"?"cash":x==="no_cash_insurance"?"no_cash_insurance":"cash"),B(u),o==="pharmacy"&&!h&&await kt(St);else if(t&&Pe&&o==="consultation"){let Rt=xe;if(p)try{const Cn=await ie(`/api/staff/${p}`);if(!Cn.ok){const _a=await Cn.json().catch(()=>({}));throw new Error(_a.message||"Doctor not found or error fetching fee")}const $n=await Cn.json();$n.opd_fee!=null&&!isNaN(parseFloat(String($n.opd_fee)))&&parseFloat(String($n.opd_fee))>=0&&(Rt=parseFloat(String($n.opd_fee)))}catch(Cn){q($n=>`${$n?$n+"; ":""}Could not fetch doctor's fee, using default. (${Cn.message})`)}St=[{id:Date.now(),name:"Consultation Fee",price:Rt,quantity:1,total:Rt*1,drug_id:null}],z(x==="no_cash_insurance"?"no_cash_insurance":"cash")}else St=[],z(x==="no_cash_insurance"?"no_cash_insurance":"cash");_(St),k.current=s})()},[e,t,p,s,o,xe,Pe,c,h,kt,u,x]);const Ue=()=>{const et=parseFloat(T);if(!h)if(C&&!isNaN(et)&&et>=0&&I>0){if(C.trim().toLowerCase()==="consultation fee"&&w.some(St=>St.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const yt={id:Date.now(),name:C.trim(),price:et,quantity:I,total:et*I,drug_id:null};_([...w,yt]),A(""),E(""),$(1)}else alert("Invalid item details.")},jt=et=>{h||_(w.filter(yt=>yt.id!==et))},Tt=v.useMemo(()=>{let et=w.reduce((yt,St)=>yt+St.total,0);return bt==="create"&&U>0&&(et=et*(1-U/100)),(Fe==null?void 0:Fe.totalDue)!==void 0&&(Fe==null?void 0:Fe.totalDue)!==null?Fe.totalDue:et},[w,Fe,U,bt]),Qn=v.useMemo(()=>w.reduce((et,yt)=>et+yt.total,0),[w]),vt=v.useMemo(()=>Qn*(U/100),[Qn,U]),It=v.useMemo(()=>(Fe==null?void 0:Fe.totalPaid)??0,[Fe]),Gt=v.useMemo(()=>(Fe==null?void 0:Fe.balance)!==void 0&&(Fe==null?void 0:Fe.balance)!==null?Fe.balance:Tt-It,[Fe,Tt,It]);v.useEffect(()=>{if(Tt>0&&nt){const et=`upi://pay?pa=${nt}&pn=${encodeURIComponent(Ge)}&am=${Tt.toFixed(2)}&cu=INR`;Ct(et)}else Ct("")},[Tt,nt,Ge]),v.useEffect(()=>{(async()=>{if(R==="credit"&&t){J(!0);try{const yt=await ie(`/api/patient-debts/${t}/balance`);if(yt.ok){const St=await yt.json();je(St.netDebt||0)}else je(0)}catch(yt){console.error("Error fetching patient debt:",yt),je(0)}finally{J(!1)}}})()},[R,t]);const Xn=()=>{const et=parseFloat(he);!isNaN(et)&&et>=0?(ge(et),localStorage.setItem(YB,et.toString())):alert("Invalid fee amount.")},jr=async(et,yt)=>{H(!0),q(null);try{const St=await ie("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:yt,billId:et})}),Rt=await St.json();if(!St.ok||!Rt.order)throw new Error(Rt.message||"Failed to create Razorpay order.");const{key_id:Cn,order:$n}=Rt,_a={key:Cn,amount:$n.amount,currency:$n.currency,name:"Newtons Ai HMS Clinic",description:`Bill Payment for Patient ID: ${t}`,order_id:$n.id,handler:async function(bi){try{const po=await ie("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:bi.razorpay_payment_id,razorpay_order_id:bi.razorpay_order_id,razorpay_signature:bi.razorpay_signature,billId:et})}),Md=await po.json();if(po.ok&&Md.success)a&&a(et),i&&i(),setTimeout(()=>window.print(),200);else throw new Error(Md.message||"Payment verification failed.")}catch(po){q(`Payment verification failed: ${po.message}. Contact support.`)}finally{H(!1)}},prefill:{name:(b==null?void 0:b.name)||""},notes:{bill_id:et,patient_id:t},theme:{color:"#3399cc"},modal:{ondismiss:function(){q("Payment cancelled."),H(!1)}}};if(window.Razorpay)new window.Razorpay(_a).open();else throw new Error("Razorpay SDK not loaded.")}catch(St){q(`Failed to initiate online payment: ${St.message}`),H(!1)}},Va=async()=>{if(!e){q("Bill ID is missing.");return}const et=be?ta:parseFloat(_e);if(isNaN(et)||et<=0){q("Please enter a valid positive payment amount.");return}ce(!0),q(null);try{if(be){for(const yt of Ce)if(yt.amount>0){const St=await ie(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:yt.amount,payment_mode:yt.method})});if(!St.ok){const Rt=await St.json();throw new Error(Rt.message||`Failed to record ${yt.method} payment`)}}}else{const yt={amount_paid:et,payment_mode:De},St=await ie(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(yt)}),Rt=await St.json();if(!St.ok)throw new Error(Rt.message||`Failed to record payment (Status: ${St.status})`)}Ve(""),be&&(ne([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),ke(!1)),i?i():console.log("Payment recorded.")}catch(yt){q(`Failed to record payment: ${yt.message}`)}finally{ce(!1)}},ta=Ce.reduce((et,yt)=>et+yt.amount,0),Sa=Math.abs(ta-(bt==="create"?Tt:ta))<.01,gn=be?Ce.some(et=>et.method==="credit"):bt==="create"?R==="credit":De==="credit",Gr=async()=>{if(bt==="view_pay")return;if(!t){q("Patient ID is missing for creating a bill.");return}if(w.length===0){q("Cannot finalize an empty bill.");return}if(be&&Math.abs(ta-Tt)>.01){q(`Split payment total (${ta.toFixed(2)}) must match the bill total (${Tt.toFixed(2)}).`);return}H(!0),q(null);const et=Tt,yt=w.map(({id:Rt,...Cn})=>Cn),St={patientId:t,queueId:n||null,items:yt,amount:et,paymentMode:be?"split":R==="online"?"online":R,type:o,related_id:l||m||null,status:R==="online"?"pending":be||R?"paid":"pending",discountPercentage:U,labOrderId:m||null};if(be&&(St.splitPayments=Ce.map(Rt=>({method:Rt.method,amount:Rt.amount}))),R==="online"&&!be)try{const Rt=await ie("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Cn=await Rt.json();if(!Rt.ok)throw new Error(Cn.message||"Failed to create pending bill.");jr(Cn.id,Math.round(et*100))}catch(Rt){q(`Failed to create pending bill: ${Rt.message}`),H(!1)}else{if(!R&&!be){q("Payment mode required."),H(!1);return}setTimeout(()=>window.print(),200);try{const Rt=await ie("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Cn=await Rt.json();if(!Rt.ok)throw new Error(Cn.message||"Failed to create bill.");if(gn&&t){const $n=be?Ce.filter(_a=>_a.method==="credit").reduce((_a,bi)=>_a+bi.amount,0):R==="credit"?et:0;if($n>0)try{await ie(`/api/patient-debts/${t}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:$n,related_bill_id:Cn.id,notes:`Bill #${Cn.id} (Credit Part)`})})}catch(_a){console.error("Failed to create debt entry:",_a)}}a&&a(Cn.id),H(!1)}catch(Rt){q(`Failed to process bill: ${Rt.message}`),H(!1)}}},An=(X==null?void 0:X.status)??c,Fn=bt==="view_pay"&&X&&An==="pending";return!t&&!e?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):G||bt==="view_pay"&&te?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):bt==="view_pay"&&!X&&!te&&Y?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",Y]}):bt==="create"&&!b&&!G&&Y?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",Y]}):r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:Ge?`${Ge}`:"Bill"}),(wt||Qe)&&r.jsxs("div",{className:"clinic-details-print",children:[wt&&r.jsx("span",{className:"small-text clinic-address",children:wt}),Qe&&r.jsx("span",{className:"small-text clinic-notes",children:Qe})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient"]})," ",(b==null?void 0:b.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]}),X&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"# Invoice"})," ",ZIe(X.id)]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",b==null?void 0:b.name]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," ID"]})," ",b==null?void 0:b.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Age/Gender"]})," ",(b==null?void 0:b.age)??"N/A"," / ",(b==null?void 0:b.gender)??"N/A"]}),bt==="view_pay"&&X&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(oo,{size:16})," Bill ID"]})," ",X.id]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Bill Items"}),bt==="create"&&o==="pharmacy"&&!h&&w.some(et=>et.drug_id!=null)&&r.jsxs("button",{onClick:()=>kt(w),disabled:Q,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(OP,{size:14,className:`lucide ${Q?"animate-spin":""}`}),Q?"Refreshing...":"Refresh"]})]}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"}),bt==="create"&&!h&&r.jsx("th",{className:"no-print",children:"Action"})]})}),r.jsxs("tbody",{children:[bt==="create"&&w.map((et,yt)=>r.jsxs("tr",{children:[r.jsx("td",{children:yt+1}),r.jsx("td",{children:et.name}),r.jsx("td",{children:et.quantity}),r.jsxs("td",{children:["",et.price.toFixed(2)]}),r.jsxs("td",{children:["",et.total.toFixed(2)]}),!h&&r.jsx("td",{className:"no-print",children:typeof et.id=="number"&&et.name!=="Consultation Fee"?r.jsxs("button",{onClick:()=>jt(et.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx(Ot,{size:16})," "]}):r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(hJ,{size:14})," "]})})]},et.id)),bt==="view_pay"&&X&&X.items.map((et,yt)=>r.jsxs("tr",{children:[r.jsx("td",{children:yt+1}),r.jsx("td",{children:et.name}),r.jsx("td",{children:et.quantity}),r.jsxs("td",{children:["",et.price.toFixed(2)]}),r.jsxs("td",{children:["",(et.total??et.price*et.quantity).toFixed(2)]})]},yt)),(bt==="create"&&w.length===0||bt==="view_pay"&&(X==null?void 0:X.items.length)===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"20px"},children:"No items added."})})]})]}),bt==="create"&&!h&&r.jsxs("div",{className:"add-item-form no-print",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item Description"}),r.jsx("input",{type:"text",value:C,onChange:et=>A(et.target.value),placeholder:"Service Name",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:I,onChange:et=>$(parseInt(et.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"100px"},children:[r.jsx("label",{children:"Price ()"}),r.jsx("input",{type:"number",value:T,onChange:et=>E(et.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:Ue,className:"add-item-button",children:"Add Item"}),o==="consultation"&&r.jsxs("div",{className:"default-fee-section",style:{marginLeft:"auto",display:"flex",alignItems:"flex-end",gap:"5px"},children:[r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{children:"Default Fee"}),r.jsx("input",{type:"number",value:he,onChange:et=>Ie(et.target.value),style:{width:"80px",padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}})]}),r.jsx("button",{onClick:Xn,className:"secondary-button",style:{padding:"10px"},children:r.jsx(qi,{size:16})})]})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Qn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",U,"%)"]}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Tt.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px dashed #ddd"},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9em",marginBottom:"5px"},children:"Payment Mode:"}),be?Ce.map((et,yt)=>et.amount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:et.method.toUpperCase()}),r.jsxs("span",{children:["",et.amount.toFixed(2)]})]},yt)):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:R?R.toUpperCase():"CASH"}),r.jsxs("span",{children:["",Tt.toFixed(2)]})]}),bt==="view_pay"&&Se&&Se.length>0&&r.jsxs("div",{style:{marginTop:"5px"},children:[r.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:"Payment History:"}),Se.map(et=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8em"},children:[r.jsxs("span",{children:[et.payment_mode," (",new Date(et.payment_date).toLocaleDateString(),")"]}),r.jsxs("span",{children:["",et.amount_paid]})]},et.id))]})]}),gn&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",fontSize:"0.85em",fontWeight:500},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Prev. Debt:"}),r.jsxs("span",{children:["",(oe||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Net Payable:"}),r.jsxs("span",{children:["",((oe||0)+(be?Ce.filter(et=>et.method==="credit").reduce((et,yt)=>et+yt.amount,0):R==="credit"?Tt:0)).toFixed(2)]})]})]})]}),ut&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(qa,{value:ut,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Qn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),bt==="create"&&!h?r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:U,onChange:et=>B(parseFloat(et.target.value)||0),min:"0",max:"100",className:"discount-input-total"}),"%"]}):r.jsxs("span",{children:[U,"%"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Amount"}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Tt.toFixed(2)]})]}),bt==="view_pay"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"summary-row",style:{color:"green"},children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",It.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",style:{color:"red",fontWeight:"bold"},children:[r.jsx("span",{children:"Balance Due"}),r.jsxs("span",{children:["",Gt.toFixed(2)]})]})]}),r.jsx("div",{className:"qr-code-container",children:ut?r.jsxs(r.Fragment,{children:[r.jsx(qa,{value:ut,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available."})}),bt==="create"&&r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>ke(!be),disabled:h||V,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:be?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:be?"rgba(79, 172, 254, 0.1)":"transparent",color:be?"#4facfe":"#666",cursor:h||V?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Uo,{size:14})," Split"]})]}),be?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ta.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:Ce.map((et,yt)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:yt+1}),r.jsxs("select",{value:et.method,onChange:St=>se(et.id,"method",St.target.value),className:"split-payment-select",disabled:V,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:et.amount||"",onChange:St=>se(et.id,"amount",parseFloat(St.target.value)||0),className:"split-payment-input",disabled:V})]}),Ce.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>re(et.id,Tt),className:"split-payment-btn split-payment-btn-fill",title:"Fill",children:"Buy"}),r.jsx("button",{type:"button",onClick:()=>de(et.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(zn,{size:12})})]})]},et.id))}),Ce.length<5&&r.jsxs("button",{type:"button",onClick:ye,className:"split-payment-add-btn",disabled:V,children:[r.jsx(Ln,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Required:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Tt.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Sa?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:Sa?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",ta.toFixed(2)]})]})]})]}):r.jsxs("select",{id:"paymentMode",value:R,onChange:et=>z(et.target.value),className:"payment-mode-select",disabled:h||V,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"}),r.jsx("option",{value:"online",children:"Online (Razorpay)"})]})]}),bt==="create"&&R==="credit"&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Oe?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:oe&&oe>0?"#dc3545":"#28a745"},children:["",(oe||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"This Bill:"}),r.jsxs("strong",{children:["+ ",Tt.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((oe||0)+Tt).toFixed(2)]})]})]})]}),bt==="create"&&!h&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Gr,className:"primary-button",disabled:V||w.length===0,children:V?"Processing...":"Finalise and Bill"})}),bt==="view_pay"&&r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:()=>window.print(),className:"secondary-button",children:"Print Bill"}),Fn&&Gt>0&&r.jsxs("div",{className:"payment-recording-section",style:{marginTop:"20px",borderTop:"1px dashed #ccc",paddingTop:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("h3",{style:{fontSize:"1em",marginBottom:"0"},children:"Record Payment"}),r.jsxs("button",{type:"button",onClick:()=>ke(!be),disabled:Ae,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",fontSize:"0.75rem",border:be?"1px solid #4facfe":"1px solid #ccc",borderRadius:"4px",backgroundColor:be?"rgba(79, 172, 254, 0.1)":"transparent",color:be?"#4facfe":"#666",cursor:Ae?"not-allowed":"pointer"},children:[r.jsx(Uo,{size:12})," Split"]})]}),be?r.jsxs("div",{className:"split-payment-wrapper",style:{marginBottom:"10px",fontSize:"0.9em"},children:[r.jsx("div",{className:"split-payment-list",children:Ce.map(et=>r.jsxs("div",{className:"split-payment-row",children:[r.jsxs("select",{value:et.method,onChange:yt=>se(et.id,"method",yt.target.value),className:"split-payment-select",disabled:Ae,style:{padding:"4px"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Ins."}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",style:{left:"5px",fontSize:"0.8em"},children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:et.amount||"",onChange:yt=>se(et.id,"amount",parseFloat(yt.target.value)||0),className:"split-payment-input",style:{paddingLeft:"15px"},disabled:Ae})]}),Ce.length>2&&r.jsx("button",{type:"button",onClick:()=>de(et.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(zn,{size:12})})]},et.id))}),Ce.length<5&&r.jsxs("button",{type:"button",onClick:ye,className:"split-payment-add-btn",disabled:Ae,style:{fontSize:"0.8em",padding:"4px"},children:[r.jsx(Ln,{size:12})," Add"]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em",marginTop:"5px",color:"#666"},children:[r.jsxs("span",{children:["Paying: ",r.jsxs("strong",{children:["",ta.toFixed(2)]})]}),r.jsxs("span",{style:{color:ta>Gt?"red":"inherit"},children:["Max: ",Gt.toFixed(2)]})]})]}):r.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:_e,onChange:et=>Ve(et.target.value),placeholder:`Max ${Gt.toFixed(2)}`,className:"custom-text-input",style:{flex:1}}),r.jsxs("select",{value:De,onChange:et=>ue(et.target.value),className:"custom-select-input",style:{width:"auto"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("button",{onClick:Va,disabled:Ae||be&&ta<=0||!be&&(!_e||parseFloat(_e)<=0),className:"primary-button",style:{width:"100%",fontSize:"0.9em"},children:Ae?"Recording...":"Record Payment"})]})]})]})})]}),r.jsxs("div",{className:"amount-in-words-print print-only",children:[r.jsx("strong",{children:"Amount in Words:"})," ",JIe(bt==="view_pay"&&X?X.amount:Tt)]}),r.jsxs("div",{className:"terms-conditions-print print-only",children:[r.jsx("h4",{children:"Terms & Conditions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Goods once sold will not be taken back or exchanged."}),r.jsx("li",{children:"All disputes are subject to local jurisdiction."}),r.jsx("li",{children:"Please retain this bill for future reference."})]})]}),r.jsxs("div",{className:"signature-section-print print-only",children:[r.jsx("div",{className:"receiver-sign",children:r.jsx("div",{className:"sign-line",children:"Receiver's Signature"})}),r.jsxs("div",{className:"authorized-sign",children:[r.jsxs("div",{className:"for-clinic",children:["For ",Ge||"Clinic"]}),r.jsx("div",{className:"sign-line",children:"Authorised Signatory"})]})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{className:"thank-you",children:"Thank you for your visit!"}),r.jsx("p",{className:"computer-generated",children:"This is a computer generated invoice and does not require a physical signature."})]})]})]})},tRe=()=>{const t=Mt(),e=Ur(),{patientId:n,queueId:a,patientName:i,initialItems:s,billType:o,relatedId:l,initialStatus:c,initialDiscountPercentage:u,doctorId:h,billId:p,labOrderId:m}=e.state||{},[x,b]=v.useState(null),[j,w]=v.useState(null),[_,k]=v.useState(null),[C,A]=v.useState(null),[T,E]=v.useState(null),[I,$]=v.useState(null),[U,B]=v.useState(null),[R,z]=v.useState(null),[G,K]=v.useState(!0),[Y,q]=v.useState(null),[V,H]=v.useState(i||"");v.useEffect(()=>{if(!n){console.error("BillingPage loaded without required patientId in location state."),t("/");return}(async()=>{K(!0),q(null);try{let Re=n,Se=s||null,Ee=c||null,Fe=o||null,le=l||null,_e=u!==void 0?parseFloat(u):null,Ve=i||null,De=null;if(p){console.log(`Fetching details for Bill ID: ${p}`);const ue=await ie(`/api/bills/${p}`);if(!ue.ok){const ce=await ue.json().catch(()=>({message:`Failed to fetch bill details for ID ${p}`}));throw new Error(ce.message||`Failed to fetch bill details (Status: ${ue.status})`)}const Ae=await ue.json();if(console.log("Fetched Bill Data:",Ae),Se=Ae.bill.items||[],Ee=Ae.bill.status||"pending",Fe=Ae.bill.type||null,le=Ae.bill.related_id||null,_e=Ae.bill.discount_percentage!==void 0&&Ae.bill.discount_percentage!==null?parseFloat(Ae.bill.discount_percentage):0,Re=Ae.bill.patient_id,A(Se),E(Ee),$(Fe),B(le),z(_e),Re){const ce=await ie(`/api/patients/${Re}`);if(ce.ok){const be=await ce.json();Ve=be.name,De=be.phone??null,k(be.insurance_type??null),H(Ve),w(De)}else console.warn(`Could not fetch patient details for ID ${Re} from bill.`),H("Patient (Not Found)")}else console.warn(`Bill ${p} does not have an associated patient_id.`),H("Patient (Unknown)")}else if(m){console.log(`Fetching details for Lab Order ID: ${m}`);const ue=await ie(`/api/lab/${m}`);if(!ue.ok){let ce=`Failed to fetch lab order details (Status: ${ue.status} ${ue.statusText})`;try{ce=(await ue.json()).message||ce}catch{console.error("Response was not valid JSON:",await ue.text())}throw new Error(ce)}const Ae=await ue.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(Ae,null,2)),Se=(Ae.tests||[]).filter(ce=>ce&&typeof ce.name=="string"&&ce.price!==void 0&&ce.id!==void 0).map(ce=>{const be=parseFloat(ce.price||"0"),ke=!isNaN(be)&&isFinite(be)?be:0;return{item_id:ce.id,name:ce.name,price:ke,quantity:1,total:ke*1,type:"lab_test"}}),Se&&Se.length===0&&(Ae.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",Ae.tests),q(ce=>`${ce?ce+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),Ee="pending",Fe="lab",le=m,Re=Ae.patient_id,A(Se),E(Ee),$(Fe),B(le),Re){const ce=await ie(`/api/patients/${Re}`);if(ce.ok){const be=await ce.json();Ve=be.name,De=be.phone??null,k(be.insurance_type??null),H(Ve),w(De)}else console.warn(`Could not fetch patient details for ID ${Re} from lab order.`),H("Patient (Not Found)")}else console.warn(`Lab Order ${m} does not have an associated patient_id.`),H("Patient (Unknown)")}else if(A(s||null),E(c||null),$(o||null),B(l||null),z(u!==void 0?parseFloat(u):null),H(i||`ID ${n}`),Re){const ue=await ie(`/api/patients/${Re}`);if(ue.ok){const Ae=await ue.json();w(Ae.phone??null),k(Ae.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${Re}.`)}if(a){const ue=await ie(`/api/queue/${a}`);if(ue.ok){const Ae=await ue.json();b(Ae.token_number)}else console.warn(`Could not fetch queue details for ID ${a}.`)}}catch(Re){console.error("Error fetching billing page details:",Re),q(`Failed to load details: ${Re.message}`),A(null),E(null),$(null),B(null),H(i||""),w(null),b(null)}finally{K(!1)}})()},[n,p,m,a,t]);const Q=X=>{console.log(`Billing process completed for patient ID ${n}. New Bill ID: ${X}`),t(-1)},L=()=>{console.log(`Bill updated for patient ID ${n}.`),t(-1)};if(!n)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(GI,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(G)return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx(ee,{width:80,height:32})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx(ee,{width:300,height:32})}),r.jsxs("div",{className:"patient-info-bar mb-6",style:{display:"flex",gap:"1rem",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:120,height:20}),r.jsx(ee,{width:140,height:20})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 space-y-4",children:[r.jsx(ee,{width:"100%",height:200,className:"rounded-lg"}),r.jsx(ee,{width:"100%",height:150,className:"rounded-lg"})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(ee,{width:"100%",height:300,className:"rounded-lg"})})]})]})]});if(Y)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(GI,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:Y}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>t(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const me=(T??c)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(en,{size:20,className:"lucide"})})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[p?"Bill Details":m?"Create Lab Bill":"Create Bill"," for Patient: ",V||`ID ${n}`]}),r.jsxs("div",{className:"patient-info-bar",children:[x!==null&&r.jsxs("span",{children:[r.jsx(za,{size:14,className:"lucide"})," Token: ",x]}),j&&r.jsxs("span",{children:[r.jsx(Fv,{size:14,className:"lucide"})," Phone: ",j]}),m&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(hs,{size:14,className:"lucide"})," Lab Order: ",m.substring(0,8),"..."]}),!j&&x===null&&!m&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),_&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(eZ,{size:14,className:"lucide"})," Insurance: ",_.replace(/_/g," ").replace(/\b\w/g,X=>X.toUpperCase())]}),!j&&x===null&&!m&&!_&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(eRe,{patientId:n,labOrderId:m,queueId:a,onBillCreated:Q,onBillUpdated:L,initialItems:C??s,billType:I??o,relatedId:U??l,initialStatus:T??c,initialDiscountPercentage:R??u,readOnlyMode:me,doctorId:h,patientInsuranceType:_??void 0})]})]})},QB=()=>{const{patientId:t}=Da(),e=Mt(),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,u]=v.useState("");return v.useEffect(()=>{(async()=>{if(!t){l("Patient ID not provided in URL.");return}s(!0),l(null),a([]);try{try{const x=await ie(`/api/patients/${t}`);if(x.ok){const b=await x.json();u(b.name)}}catch(x){console.warn("Could not fetch patient name:",x)}console.log(`Fetching pharmacy orders for patient ID: ${t}`);const p=await ie(`/api/pharmacy-orders/patient/${t}`);if(!p.ok){const x=await p.json().catch(()=>({}));throw new Error(x.message||`HTTP error! status: ${p.status}`)}const m=await p.json();console.log("Fetched Pharmacy Orders:",m),a(m||[])}catch(p){console.error("Error fetching pharmacy orders:",p),l(`Failed to load pharmacy orders: ${p.message}`)}finally{s(!1)}})()},[t]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(en,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(md,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",c&&`for ${c}`]}),r.jsx("div",{})," "]}),i&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(h=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(ee,{width:150,height:20}),r.jsx(ee,{width:100,height:20})]}),r.jsx(ee,{width:200,height:20,className:"mb-2"}),r.jsx(ee,{width:180,height:20,className:"mb-3"}),r.jsx(ee,{width:120,height:24,className:"mb-2"}),r.jsxs("div",{className:"space-y-1 ml-4",children:[r.jsx(ee,{width:"80%",height:16}),r.jsx(ee,{width:"70%",height:16}),r.jsx(ee,{width:"60%",height:16})]})]},h))}),o&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:o}),!i&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!i&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(h=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(h.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",h.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",h.prescribedBy||"N/A"]}),h.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",h.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:h.medications.map((p,m)=>r.jsxs("li",{children:[p.name," - Qty: ",p.quantity,p.tabletsPerDay&&` (${p.tabletsPerDay} per day`,p.numberOfDays&&` for ${p.numberOfDays} days)`,!p.tabletsPerDay&&p.numberOfDays&&` (for ${p.numberOfDays} days)`,p.tabletsPerDay&&!p.numberOfDays&&")"]},m))})]},h.id))})]})},VG=()=>{const{orderId:t}=Da(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState(null),[o,l]=v.useState([]),[c,u]=v.useState([]),[h,p]=v.useState(""),[m,x]=v.useState([]),[b,j]=v.useState(null),[w,_]=v.useState(!1),[k,C]=v.useState(null),[A,T]=v.useState(!0);Od();const E=v.useCallback(async()=>{T(!0);try{const q=await ie(`/api/pharmacy-orders/${t}`);if(!q.ok)throw new Error("Failed to fetch order details");const V=await q.json();a(V),s({id:V.patientId,name:V.patientName||"N/A",token:V.patientTokenNumber}),C(V.prescriptionForUnavailableDrugs);const H=V.medications.map(Q=>{const L=U(Q.pack),te=Q.pack_quantity*(L??1)+Q.loose_quantity;return{...Q,isLoose:!0,loosePacks:Q.pack_quantity,looseUnits:Q.loose_quantity,looseQuantity:te,pack_price:Q.pack_price,loose_price:Q.loose_price,total_price:Q.total_price,pricePerLooseUnit:Q.loose_price,originalPrice:Q.pack_price,box_number:Q.box_number,pack:Q.pack,batch:Q.batch,expiry_date:Q.expiry_date,discount_percentage:Q.discount_percentage}});u(H)}catch(q){j("Could not load order details. "+q.message)}finally{T(!1)}},[t]),I=v.useCallback(async()=>{try{const q=await ie("/api/drugs");if(!q.ok)throw new Error("Failed to fetch drugs");const V=await q.json(),H=V.drugs||V||[];l(H)}catch(q){j("Could not load drug list. "+q.message)}},[]);v.useEffect(()=>{E(),I()},[E,I]);const $=v.useMemo(()=>new ho(o,{keys:["name","brand_name"],threshold:.3}),[o]);v.useEffect(()=>{if(!h){x([]);return}const q=$.search(h).map(V=>V.item);x(q.slice(0,10))},[h,$]);const U=q=>{if(!q)return null;const V=q.match(/(?:\d+x)?(\d+)/);return V?parseInt(V[1],10):null},B=q=>{if(c.some(V=>V.drug_id===q.id)){j(`${q.name||q.brand_name} is already in the order.`),setTimeout(()=>j(null),3e3),p(""),x([]);return}u(V=>[...V,{drug_id:q.id,name:q.name||q.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(q.mrp)||0,loose_price:(Number(q.mrp)||0)/(U(q.pack)||1),total_price:(Number(q.mrp)||0)/(U(q.pack)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:q.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(q.mrp)||0)/(U(q.pack)||1),originalPrice:Number(q.mrp)||0,pack:q.pack}]),p(""),x([])},R=q=>{u(V=>V.filter(H=>(H.drug_id??H.name)!==q))},z=(q,V)=>{u(H=>H.map(Q=>{if((Q.drug_id??Q.name)===q&&Q.isLoose){const L=U(Q.pack),te=Math.max(0,V),me=te*(L??1)+(Q.looseUnits??0);return{...Q,loosePacks:te,looseQuantity:me,pack_quantity:te}}return Q}))},G=(q,V)=>{u(H=>H.map(Q=>{if((Q.drug_id??Q.name)===q&&Q.isLoose){const L=U(Q.pack),te=Math.max(0,V),me=(Q.loosePacks??0)*(L??1)+te;return{...Q,looseUnits:te,looseQuantity:me,loose_quantity:te}}return Q}))},K=async q=>{if(q.preventDefault(),j(null),_(!0),c.length===0&&!(k!=null&&k.trim())){j("Please add at least one medication or provide a prescription."),_(!1);return}const V=c.filter(Q=>{const L=Q.looseQuantity??0;return L<=0||Q.stock!==void 0&&L>Q.stock});if(V.length>0){j(`Invalid quantity or insufficient stock for: ${V.map(Q=>Q.name).join(", ")}`),_(!1);return}const H={items:c.map(Q=>({drug_id:Q.drug_id??null,name:Q.name,pack_quantity:Q.loosePacks??0,loose_quantity:Q.looseUnits??0,pack_price:Q.pack_price??0,loose_price:Q.loose_price??0,total_price:(Q.loose_price??0)*(Q.looseQuantity??0),discount_percentage:Q.discount_percentage??0,directions_to_use:Q.directions_to_use??null,tabletsPerDay:Q.tabletsPerDay??1,numberOfDays:Q.numberOfDays??1})),prescription_for_unavailable_drugs:k,order_total:Y};try{const Q=await ie(`/api/pharmacy-orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)});if(!Q.ok){const L=await Q.json();throw new Error(L.message||"Failed to update order")}e(-1)}catch(Q){j(Q.message||"Failed to update order. Please try again.")}finally{_(!1)}},Y=v.useMemo(()=>c.reduce((q,V)=>{const H=V.loose_price??0,Q=V.looseQuantity??0;return q+H*Q},0),[c]);return A?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(ee,{variant:"circular",width:40,height:40}),r.jsx(ee,{width:300,height:32})]}),r.jsx("div",{className:"header-right",children:r.jsx(ee,{width:100,height:32,style:{borderRadius:"16px"}})})]}),r.jsx("div",{className:"order-meta",style:{display:"flex",gap:"1rem",margin:"1rem 0"},children:r.jsx(ee,{width:200,height:24})}),r.jsxs("div",{className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(ee,{width:200,height:24})}),r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(ee,{height:42})})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(ee,{width:250,height:24})}),r.jsxs("div",{className:"table-container",style:{padding:"0 1rem 1rem"},children:[r.jsxs("div",{className:"table-header-row",style:{display:"flex",gap:"1rem",padding:"1rem"},children:[r.jsx(ee,{width:"30%",height:20}),r.jsx(ee,{width:"20%",height:20}),r.jsx(ee,{width:"20%",height:20}),r.jsx(ee,{width:"15%",height:20}),r.jsx(ee,{width:"5%",height:20})]}),r.jsx("div",{className:"table-body",children:[1,2,3].map(q=>r.jsxs("div",{className:"table-row",style:{display:"flex",gap:"1rem",padding:"1rem",borderBottom:"1px solid #eee"},children:[r.jsxs("div",{style:{width:"30%"},children:[r.jsx(ee,{width:"80%",height:20,className:"mb-2"}),r.jsx(ee,{width:"40%",height:14})]}),r.jsx(ee,{width:"20%",height:36}),r.jsx(ee,{width:"20%",height:36}),r.jsx(ee,{width:"15%",height:20,style:{alignSelf:"center"}}),r.jsx(ee,{width:"5%",height:24,style:{alignSelf:"center"}})]},q))})]})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx(ee,{width:180,height:24})}),r.jsx("div",{style:{padding:"1rem"},children:r.jsx(ee,{height:80})})]}),r.jsx("div",{style:{marginTop:"20px"},children:r.jsx(ee,{height:48,width:"100%"})})]})]})]}):n?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:r.jsx(en,{size:20})}),r.jsxs("h2",{className:"page-title",children:["EDIT ORDER ",r.jsxs("span",{className:"text-gray-500 text-lg font-normal ml-2",children:[i==null?void 0:i.name," #",n.id.substring(0,4)]})]})]}),r.jsx("div",{className:"header-right",children:r.jsx("span",{className:"status-badge",children:n.status.toUpperCase()})})]}),r.jsx("div",{className:"order-meta",children:r.jsxs("span",{className:"order-date",children:[" Order Date: ",new Date(n.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})}),r.jsxs("form",{onSubmit:K,className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{children:" Find & Add Medication"})}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or brand...",value:h,onChange:q=>p(q.target.value),className:"search-input"}),h&&r.jsx("div",{className:"dropdown-results",children:m.length>0?r.jsx("ul",{children:m.map(q=>r.jsxs("li",{onClick:()=>B(q),className:"dropdown-item",children:[r.jsx("span",{className:"drug-name",children:q.name||q.brand_name}),r.jsxs("span",{className:"drug-meta",children:["(Stock: ",q.stock??"N/A",", MRP: ",Number(q.mrp||0).toFixed(2),")"]})]},q.id))}):r.jsxs("div",{className:"p-3 text-gray-500 text-sm",children:['No drugs found matching "',h,'"']})})]})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{children:[" Medications in Order ",r.jsxs("span",{className:"item-count",children:[c.length," items"]})]})}),c.length>0?r.jsxs("div",{className:"table-container",children:[r.jsxs("div",{className:"table-header-row",children:[r.jsx("div",{className:"col-medication",children:"MEDICATION"}),r.jsx("div",{className:"col-directions",children:"DIRECTIONS"}),r.jsx("div",{className:"col-quantity",children:"QUANTITY"}),r.jsx("div",{className:"col-subtotal",children:"SUBTOTAL"}),r.jsx("div",{className:"col-action"})]}),r.jsx("div",{className:"table-body",children:c.map(q=>{const V=q.drug_id??q.name;return r.jsxs("div",{className:"table-row",children:[r.jsxs("div",{className:"col-medication",children:[r.jsx("span",{className:"med-name",children:q.name}),q.pack&&r.jsx("span",{className:"med-unit text-xs text-gray-500 block",children:q.pack}),r.jsxs("div",{className:"stock-info",children:[" Stock: ",r.jsxs("span",{className:"stock-value",children:[" ",q.stock!==void 0?q.pack?`BOX OF ${U(q.pack)}`:q.stock:"N/A"]})]})]}),r.jsx("div",{className:"col-directions",children:r.jsx("input",{type:"text",placeholder:"1 tablet twice daily...",value:q.directions_to_use??"",onChange:H=>{const Q=H.target.value;u(L=>L.map(te=>(te.drug_id??te.name)===V?{...te,directions_to_use:Q}:te))},className:"directions-input"})}),r.jsx("div",{className:"col-quantity",children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"PACKS"}),r.jsx("input",{type:"number",min:"0",value:q.loosePacks||"",onChange:H=>z(V,H.target.value===""?0:parseInt(H.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"LOOSE"}),r.jsx("input",{type:"number",min:"0",value:q.looseUnits||"",onChange:H=>G(V,H.target.value===""?0:parseInt(H.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]})]})}),r.jsxs("div",{className:"col-subtotal",children:["",(Number((q.pricePerLooseUnit??0)*(q.looseQuantity??0))||0).toFixed(2)]}),r.jsx("div",{className:"col-action",children:r.jsx("button",{type:"button",onClick:()=>R(V),className:"delete-btn",title:"Remove Item",children:r.jsx(zn,{size:18,strokeWidth:2.5})})})]},V)})})]}):r.jsx("div",{className:"empty-state",children:"No medications added. Search above to add."})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx("h3",{children:" Prescription Notes"})}),r.jsx("textarea",{rows:3,value:k??"",onChange:q=>C(q.target.value||null),placeholder:"Add notes about unavailable drugs...",className:"notes-input"})]}),r.jsxs("button",{type:"submit",disabled:w,className:"confirm-btn",style:{width:"100%",margin:"20px 0 0 0"},children:[r.jsx("span",{className:"check-icon",children:""})," ",w?"Updating...":"Confirm Changes"]}),b&&r.jsx("div",{className:"error-alert mt-4",children:b})]})]})]}):r.jsx("div",{className:"p-6 text-red-500 flex justify-center items-center h-screen",children:"Order not found or failed to load."})},nRe=(t,e,n,a="non-black")=>{if(isNaN(t)||isNaN(e)||t<=0||e<=0)return null;let i;return n==="female"?t<=.7?i=141*Math.pow(t/.7,-.329)*Math.pow(.993,e):i=141*Math.pow(t/.7,-1.209)*Math.pow(.993,e):t<=.9?i=141*Math.pow(t/.9,-.411)*Math.pow(.993,e):i=141*Math.pow(t/.9,-1.209)*Math.pow(.993,e),a==="black"&&(i*=1.018),parseFloat(i.toFixed(2))},rRe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0||n>=400)return null;const a=t-e-n/5;return parseFloat(a.toFixed(2))},aRe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},iRe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},sRe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=t-(e+n);return parseFloat(a.toFixed(2))},oRe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=2*t+e/18+n/2.8;return parseFloat(a.toFixed(2))},lRe=t=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(t),XB=()=>{var ke,Ce;const{orderId:t}=Da(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!0),[c,u]=v.useState(!1),[h,p]=v.useState(null),[m,x]=v.useState(null),[b,j]=v.useState(null),[w,_]=v.useState({}),[k,C]=v.useState(null),[A,T]=v.useState(!1),[E,I]=v.useState(""),[$,U]=v.useState(!1),[B,R]=v.useState(""),[z,G]=v.useState(""),[K,Y]=v.useState(!1),[q,V]=v.useState(""),[H,Q]=v.useState([]),[L,te]=v.useState(null),[me,X]=v.useState(!1),Re=v.useCallback(async()=>{var ne,ye;if(t){l(!0),p(null);try{const de=await ie(`/api/lab/${t}`);if(!de.ok){const oe=await de.json().catch(()=>({message:`HTTP error! status: ${de.status}`}));throw new Error(oe.message||`HTTP error! status: ${de.status}`)}const se=await de.json();if(a(se),se.createdAt)try{const oe=new Date(se.createdAt),je=new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(je)}catch(oe){console.error("Error formatting date for edit:",oe)}if(se.report_date)try{const oe=new Date(se.report_date),je=new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().slice(0,16);R(je)}catch(oe){console.error("Error formatting report date for edit:",oe)}else{const oe=new Date,je=new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().slice(0,16);R(je)}se.referral_doctor&&V(se.referral_doctor),se.Patient&&(x(se.Patient.age??null),j(((ne=se.Patient.gender)==null?void 0:ne.toLowerCase())==="f"||((ye=se.Patient.gender)==null?void 0:ye.toLowerCase())==="female"?"female":"male")),se.uploaded_by&&te(se.uploaded_by);const re={};if(se.tests&&se.tests.forEach(oe=>{re[oe.id]={},oe.default_parameters&&oe.default_parameters.length>0?oe.default_parameters.forEach(je=>{re[oe.id][je.name]=je.defaultValue}):re[oe.id].report_content=""}),se.report_content)try{const oe=JSON.parse(se.report_content);typeof oe=="object"&&oe!==null&&!Array.isArray(oe)?s(oe):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),s(re))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),s(re)}else s({})}catch(de){console.error("Failed to fetch lab order details:",de),p(de instanceof Error?de.message:"An unknown error occurred while fetching order details.")}finally{l(!1)}}},[t]);v.useEffect(()=>{t?Re():(p("No Order ID provided in the URL."),l(!1))},[t,Re]),v.useEffect(()=>{(async()=>{try{const ye=await ie("/api/clinics/settings");if(ye.ok){const de=await ye.json();G(de.labLetterheadUrl||"")}}catch(ye){console.error("Error fetching clinic settings:",ye)}})()},[]),v.useEffect(()=>{(async()=>{try{const ye=await ie("/staff");if(ye.ok){const de=await ye.json();Q(de)}}catch(ye){console.error("Error fetching staff:",ye)}})()},[]);const Se=(ne,ye,de)=>{s(se=>{var Xe,ut,Ct,bt,Pe,ot,kt,Ue,jt,Tt,Qn,vt,It,Gt,Xn,jr,Va,ta,Sa;const re={...se,[ne]:{...se[ne],[ye]:de}},oe=parseFloat((Xe=re[ne])==null?void 0:Xe.Creatinine),je=m,Oe=b;if(ye==="Creatinine"&&!isNaN(oe)&&je!==null&&Oe!==null){const gn=nRe(oe,je,Oe);gn!==null&&((ut=n==null?void 0:n.tests.find(An=>An.id===ne))!=null&&ut.default_parameters.find(An=>An.name==="eGFR"))&&(re[ne].eGFR=gn)}const J=parseFloat((Ct=re[ne])==null?void 0:Ct["Total Cholesterol"]),xe=parseFloat((bt=re[ne])==null?void 0:bt["HDL Cholesterol"]),ge=parseFloat((Pe=re[ne])==null?void 0:Pe.Triglycerides);if((ye==="Total Cholesterol"||ye==="HDL Cholesterol"||ye==="Triglycerides")&&!isNaN(J)&&!isNaN(xe)&&!isNaN(ge)){const gn=rRe(J,xe,ge);gn!==null&&((ot=n==null?void 0:n.tests.find(An=>An.id===ne))!=null&&ot.default_parameters.find(An=>An.name==="LDL Cholesterol"))&&(re[ne]["LDL Cholesterol"]=gn)}const he=parseFloat((kt=re[ne])==null?void 0:kt["Total Bilirubin"]),Ie=parseFloat((Ue=re[ne])==null?void 0:Ue["Direct Bilirubin"]);if((ye==="Total Bilirubin"||ye==="Direct Bilirubin")&&!isNaN(he)&&!isNaN(Ie)){const gn=aRe(he,Ie);gn!==null&&((jt=n==null?void 0:n.tests.find(An=>An.id===ne))!=null&&jt.default_parameters.find(An=>An.name==="Indirect Bilirubin"))&&(re[ne]["Indirect Bilirubin"]=gn)}const nt=parseFloat((Tt=re[ne])==null?void 0:Tt["Total Protein"]),Be=parseFloat((Qn=re[ne])==null?void 0:Qn.Albumin);if((ye==="Total Protein"||ye==="Albumin")&&!isNaN(nt)&&!isNaN(Be)){const gn=iRe(nt,Be);gn!==null&&((vt=n==null?void 0:n.tests.find(An=>An.id===ne))!=null&&vt.default_parameters.find(An=>An.name==="Globulin"))&&(re[ne].Globulin=gn)}const Ge=parseFloat((It=re[ne])==null?void 0:It.Sodium),it=parseFloat((Gt=re[ne])==null?void 0:Gt.Chloride),wt=parseFloat((Xn=re[ne])==null?void 0:Xn.Bicarbonate);if((ye==="Sodium"||ye==="Chloride"||ye==="Bicarbonate")&&!isNaN(Ge)&&!isNaN(it)&&!isNaN(wt)){const gn=sRe(Ge,it,wt);gn!==null&&((jr=n==null?void 0:n.tests.find(An=>An.id===ne))!=null&&jr.default_parameters.find(An=>An.name==="Anion Gap"))&&(re[ne]["Anion Gap"]=gn)}const we=parseFloat((Va=re[ne])==null?void 0:Va.Glucose),Qe=parseFloat((ta=re[ne])==null?void 0:ta.BUN);if((ye==="Sodium"||ye==="Glucose"||ye==="BUN")&&!isNaN(Ge)&&!isNaN(we)&&!isNaN(Qe)){const gn=oRe(Ge,we,Qe);gn!==null&&((Sa=n==null?void 0:n.tests.find(An=>An.id===ne))!=null&&Sa.default_parameters.find(An=>An.name==="Osmolality"))&&(re[ne].Osmolality=gn)}return re})},Ee=async ne=>{const ye=i[ne]||{},de=n==null?void 0:n.tests.find(je=>je.id===ne);if(!de)return;const se={};de.default_parameters&&de.default_parameters.forEach(je=>{se[je.name]=je.defaultValue});const re={...se,...ye},oe={...i,[ne]:re};s(oe),u(!0),p(null);try{const je=await ie(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(oe),isPartial:!0,uploaded_by:L})});if(!je.ok)throw new Error(`Save failed: ${je.status}`)}catch(je){console.error("Error saving test report:",je),alert("Failed to save test report.")}finally{u(!1)}},Fe=async(ne=null)=>{if(!n||!n.tests||!t){alert("Order details not loaded.");return}u(!0),p(null);try{let ye;if(ne===null){const se={};n.tests.forEach(re=>{const oe=i[re.id]||{},je={};re.default_parameters&&re.default_parameters.forEach(Oe=>{Oe.defaultValue!==void 0&&Oe.defaultValue!==null&&(je[Oe.name]=Oe.defaultValue)}),se[re.id]={...je,...oe},(!re.default_parameters||re.default_parameters.length===0)&&!se[re.id].report_content&&(se[re.id].report_content="")}),ye=se,s(se)}else{const se=i[ne]||{},re=n.tests.find(Oe=>Oe.id===ne);if(!re){u(!1);return}const oe={};re.default_parameters&&re.default_parameters.forEach(Oe=>{oe[Oe.name]=Oe.defaultValue});const je={...oe,...se};ye={...i,[ne]:je},s(ye)}const de=await ie(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(ye),isPartial:ne!==null,uploaded_by:L})});if(!de.ok)throw new Error(`Save failed: ${de.status}`);C(ne),setTimeout(()=>{window.print()},100)}catch(ye){console.error("Error saving before print:",ye),alert("Failed to save report before printing.")}finally{u(!1)}},le=()=>{n&&QM(n)},_e=async()=>{if(!n||!n.tests){alert("Order details not loaded.");return}if(!t){alert("Cannot submit report without an Order ID.");return}const ne={};if(n.tests.forEach(ye=>{const de=i[ye.id]||{},se={};ye.default_parameters&&ye.default_parameters.forEach(re=>{re.defaultValue!==void 0&&re.defaultValue!==null&&(se[re.name]=re.defaultValue)}),ne[ye.id]={...se,...de},(!ye.default_parameters||ye.default_parameters.length===0)&&!ne[ye.id].report_content&&(ne[ye.id].report_content="")}),Object.keys(ne).length===0){alert("Report content cannot be empty.");return}s(ne),u(!0),p(null);try{const ye=await ie(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(ne),uploaded_by:L})});if(!ye.ok){const de=await ye.json().catch(()=>({message:`Submission failed: ${ye.status}`}));throw new Error(de.message||`Submission failed: ${ye.status}`)}e(-1)}catch(ye){console.error("Error submitting report:",ye),p(ye instanceof Error?ye.message:"An unknown error occurred during submission.")}finally{u(!1)}},Ve=async()=>{if(!(!t||!E))try{const ne=await ie(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(E).toISOString()})});if(!ne.ok)throw new Error("Failed to update date");const ye=await ne.json();ye.order&&a(de=>de?{...de,createdAt:ye.order.createdAt}:null),T(!1)}catch(ne){console.error("Failed to update date:",ne),alert("Failed to update date")}},De=async()=>{if(!(!t||!B))try{const ne=await ie(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportDate:new Date(B).toISOString()})});if(!ne.ok)throw new Error("Failed to update report date");const ye=await ne.json();ye.order&&a(de=>de?{...de,report_date:ye.order.report_date}:null),U(!1)}catch(ne){console.error("Failed to update report date:",ne),alert("Failed to update report date")}},ue=async()=>{if(t)try{const ne=await ie(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralDoctor:q})});if(!ne.ok)throw new Error("Failed to update referral doctor");const ye=await ne.json();ye.order&&(V(ye.order.referral_doctor||""),a(de=>de?{...de,referral_doctor:ye.order.referral_doctor}:null)),Y(!1)}catch(ne){console.error("Failed to update referral doctor:",ne),alert("Failed to update referral doctor")}};if(o)return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[r.jsx(ee,{width:200,height:28}),r.jsxs("div",{className:"header-actions",style:{display:"flex",gap:"8px"},children:[r.jsx(ee,{width:80,height:32}),r.jsx(ee,{width:80,height:32}),r.jsx(ee,{width:80,height:32})]})]}),r.jsxs("div",{className:"lab-inventory-card no-print summary-card",style:{margin:"1rem",padding:"0"},children:[r.jsx("div",{className:"lab-inventory-header summary-header",style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:r.jsx(ee,{width:120,height:20})}),r.jsxs("div",{className:"summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem"},children:[r.jsx(ee,{height:24}),r.jsx(ee,{height:24}),r.jsx(ee,{height:24}),r.jsx(ee,{height:24})]})]}),r.jsx("div",{className:"lab-tests-container no-print",style:{padding:"1rem"},children:[1,2].map(ne=>r.jsxs("div",{className:"test-card",style:{marginBottom:"1.5rem",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"white"},children:[r.jsxs("div",{className:"test-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsx(ee,{width:250,height:24}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsx(ee,{width:70,height:30}),r.jsx(ee,{width:36,height:30})]})]}),r.jsx("div",{className:"parameter-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(ye=>r.jsxs("div",{className:"parameter-item",children:[r.jsx(ee,{width:"30%",height:16,style:{marginBottom:"0.5rem"}}),r.jsx(ee,{height:40})]},ye))})]},ne))})]})});if(h&&!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(zr,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:h}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:r.jsx(en,{size:16})})]})});if(!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Il,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${t}.`}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:r.jsx(en,{size:16})})]})});const Ae=(ke=n==null?void 0:n.Patient)==null?void 0:ke.name,ce=(Ce=n==null?void 0:n.Patient)==null?void 0:Ce.patient_token_number;return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",children:[r.jsx("h2",{children:"Enter Lab Report"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:r.jsx(en,{size:16})}),r.jsxs("button",{onClick:()=>Fe(null),className:"lab-inventory-button compact-btn",title:"Print Full Report",children:[r.jsx(Tf,{size:16}),r.jsx("span",{className:"btn-text",children:"Print"})]}),r.jsxs("button",{onClick:le,className:"lab-inventory-button whatsapp-btn compact-btn",title:"Share via WhatsApp",children:[r.jsx(mq,{size:16}),r.jsx("span",{className:"btn-text",children:"Share"})]})]})]}),n&&r.jsxs("div",{className:"lab-inventory-card no-print summary-card",children:[r.jsxs("h3",{className:"lab-inventory-header summary-header",children:[r.jsx(Il,{size:14})," Summary"]}),r.jsxs("div",{className:"summary-grid",children:[r.jsxs("div",{className:"summary-item",children:[r.jsx(qn,{size:13,className:"icon"}),r.jsx("strong",{children:"Patient:"})," ",Ae??"N/A"," (",ce??"N/A",")"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(qn,{size:13,className:"icon"}),r.jsx("strong",{children:"Age / Sex:"})," ",m??"N/A"," / ",b?b.charAt(0).toUpperCase()+b.slice(1):"N/A"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(LI,{size:13,className:"icon"}),r.jsx("strong",{children:"Ordered:"})," ",A?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:E,onChange:ne=>I(ne.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Ve,className:"icon-btn save",children:r.jsx(Is,{size:12})}),r.jsx("button",{onClick:()=>T(!1),className:"icon-btn cancel",children:r.jsx(Ot,{size:12})})]}):r.jsxs(r.Fragment,{children:[Nf(new Date(n.createdAt),"dd MMM, HH:mm"),r.jsx("button",{onClick:()=>T(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Ms,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(LI,{size:13,className:"icon"}),r.jsx("strong",{children:"Reported:"})," ",$?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:B,onChange:ne=>R(ne.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:De,className:"icon-btn save",children:r.jsx(Is,{size:12})}),r.jsx("button",{onClick:()=>U(!1),className:"icon-btn cancel",children:r.jsx(Ot,{size:12})})]}):r.jsxs(r.Fragment,{children:[n.report_date?Nf(new Date(n.report_date),"dd MMM, HH:mm"):"Not Set",r.jsx("button",{onClick:()=>U(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Ms,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",style:{position:"relative"},children:[r.jsx(qn,{size:13,className:"icon"}),r.jsx("strong",{children:"Ref. By:"})," ",K?r.jsxs("div",{className:"staff-search-wrapper",style:{display:"inline-block",position:"relative"},children:[r.jsx("input",{type:"text",value:q,onChange:ne=>{V(ne.target.value),X(!0)},onFocus:()=>X(!0),placeholder:"Enter ref name...",className:"lab-inventory-input date-input",style:{width:"180px",padding:"2px 8px",fontSize:"0.85rem"},autoFocus:!0}),r.jsx("button",{onClick:ue,className:"icon-btn save",children:r.jsx(Is,{size:12})}),r.jsx("button",{onClick:()=>Y(!1),className:"icon-btn cancel",children:r.jsx(Ot,{size:12})}),me&&r.jsxs("div",{className:"staff-dropdown",style:{position:"absolute",top:"100%",left:0,width:"250px",maxHeight:"200px",overflowY:"auto",backgroundColor:"white",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",zIndex:1e3,marginTop:"4px"},children:[H.filter(ne=>ne.name.toLowerCase().includes(q.toLowerCase())).map(ne=>r.jsxs("div",{className:"staff-option",style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",fontSize:"0.85rem"},onClick:()=>{V(ne.name),X(!1)},children:[r.jsx("div",{style:{fontWeight:"600"},children:ne.name}),r.jsx("div",{style:{fontSize:"0.75rem",color:"#666"},children:ne.role})]},ne.id)),H.filter(ne=>ne.name.toLowerCase().includes(q.toLowerCase())).length===0&&r.jsx("div",{style:{padding:"8px 12px",color:"#888",fontSize:"0.85rem"},children:"No staff found"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{onClick:()=>Y(!0),style:{cursor:"pointer",borderBottom:"1px dashed #ccc"},children:q||"Add Ref"}),r.jsx("button",{onClick:()=>Y(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Ms,{size:11})})]})]})]})]}),r.jsxs("div",{className:"lab-tests-container no-print",children:[n==null?void 0:n.tests.map(ne=>{var ye;return r.jsxs("div",{className:"test-card",children:[r.jsxs("div",{className:"test-header",children:[r.jsx("h4",{children:ne.name}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsxs("button",{type:"button",onClick:de=>{de.stopPropagation(),Ee(ne.id)},className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:[r.jsx(qi,{size:14}),r.jsx("span",{className:"btn-text",children:"Save"})]}),r.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),Fe(ne.id)},className:"lab-inventory-button compact-btn",title:"Print",children:r.jsx(Tf,{size:14})})]})]}),r.jsx("div",{className:"test-parameters-body",children:ne.default_parameters&&ne.default_parameters.length>0?r.jsx("div",{className:"parameter-grid",children:ne.default_parameters.map(de=>{var J,xe;const se=(J=i[ne.id])==null?void 0:J[de.name],re=se!==void 0?se:de.defaultValue??"",oe=de.type==="number"&&re!==""&&(de.lower_limit!=null&&parseFloat(String(re))<de.lower_limit||de.upper_limit!=null&&parseFloat(String(re))>de.upper_limit),je=lRe(de.name),Oe=(xe=w[ne.id])==null?void 0:xe[de.name];return r.jsxs("div",{className:"parameter-item",children:[r.jsxs("label",{className:"parameter-label",htmlFor:`${ne.id}-${de.name}`,children:[de.name," ",de.unit&&r.jsxs("span",{className:"parameter-unit",children:["(",de.unit,")"]})]}),r.jsxs("div",{className:"input-wrapper",children:[de.type==="boolean"?r.jsxs("select",{id:`${ne.id}-${de.name}`,value:(re==null?void 0:re.toString())??"false",onChange:ge=>Se(ne.id,de.name,ge.target.value==="true"),className:"lab-inventory-input parameter-input",disabled:c,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${ne.id}-${de.name}`,type:de.type==="number"?"number":"text",value:re,onChange:ge=>Se(ne.id,de.name,ge.target.value),className:`lab-inventory-input parameter-input ${oe?"abnormal-result":""} ${je?"calculated-input":""}`,disabled:c||je&&!Oe,placeholder:de.lower_limit!=null&&de.upper_limit!=null?`${de.lower_limit}-${de.upper_limit}`:""}),je&&r.jsx("button",{type:"button",onClick:()=>_(ge=>({...ge,[ne.id]:{...ge[ne.id]||{},[de.name]:!Oe}})),className:"edit-calculated-btn",title:Oe?"Lock":"Edit",children:r.jsx(Ms,{size:11})})]})]},de.name)})}):r.jsxs("div",{className:"parameter-item",style:{width:"100%"},children:[r.jsx("label",{className:"parameter-label",htmlFor:`${ne.id}-report_content`,children:"Results / Observations"}),r.jsx("textarea",{id:`${ne.id}-report_content`,value:((ye=i[ne.id])==null?void 0:ye.report_content)??"",onChange:de=>Se(ne.id,"report_content",de.target.value),className:"lab-inventory-input parameter-textarea",rows:3,placeholder:`Enter results for ${ne.name}...`,disabled:c})]})})]},ne.id)}),h&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(zr,{size:15,className:"inline mr-1"}),h]})]}),r.jsx("div",{className:"form-actions-footer no-print",children:r.jsx("button",{type:"button",onClick:_e,disabled:c,className:"lab-inventory-button lab-inventory-button-primary submit-btn",children:c?r.jsxs(r.Fragment,{children:[r.jsx(co,{className:"animate-spin",size:16})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(qi,{size:16})," Save All"]})})}),r.jsxs("div",{className:"printable-only",children:[z&&r.jsx("div",{className:"print-letterhead-container",children:r.jsx("img",{src:z,alt:"Lab Letterhead",className:"print-letterhead-image"})}),n&&n.Patient&&r.jsxs("div",{style:{marginBottom:"20px",borderBottom:"1px solid #ccc",paddingBottom:"10px"},children:[r.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Lab Report"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"12px"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Patient Name:"})," ",n.Patient.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age / Sex:"})," ",m??"N/A"," / ",b?b.charAt(0).toUpperCase()+b.slice(1):"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. By:"})," ",q||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",Nf(new Date(n.createdAt),"PPpp")]})]})]}),n==null?void 0:n.tests.filter(ne=>k===null||ne.id===k).map(ne=>{var ye;return r.jsxs("div",{style:{marginBottom:"20px",pageBreakInside:"avoid"},children:[r.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"5px"},children:ne.name}),ne.default_parameters&&ne.default_parameters.length>0?r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f9f9f9"},children:[r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Parameter"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Result"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Units"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Normal Range"})]})}),r.jsx("tbody",{children:ne.default_parameters.map(de=>{var J;const se=(J=i[ne.id])==null?void 0:J[de.name],re=typeof se=="string"?parseFloat(se):typeof se=="number"?se:NaN,oe=de.type==="number"&&!isNaN(re)&&se!==""&&(de.lower_limit!=null&&re<de.lower_limit||de.upper_limit!=null&&re>de.upper_limit),je=de.type==="boolean"&&(se===!0||se==="true"),Oe=de.type==="boolean"?se===!0||se==="true"?"Reactive":"Non-Reactive":se??"";return r.jsxs("tr",{children:[r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:de.name}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee",fontWeight:oe||je?"bold":"normal",color:oe?"red":je?"green":"inherit"},children:Oe}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:de.unit??""}),r.jsxs("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:[de.lower_limit!==null&&de.lower_limit!==void 0&&`> ${de.lower_limit}`,de.lower_limit!==null&&de.lower_limit!==void 0&&de.upper_limit!==null&&de.upper_limit!==void 0&&" - ",de.upper_limit!==null&&de.upper_limit!==void 0&&`< ${de.upper_limit}`]})]},de.name)})})]}):r.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"12px",padding:"10px"},children:((ye=i[ne.id])==null?void 0:ye.report_content)||"No report content entered."})]},ne.id)})]})]})})},cRe=()=>{const{orderId:t}=Da(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(""),h=v.useCallback(async m=>{if(!m){l("No Order ID specified in the URL."),s(!1),a(null);return}s(!0),l(null),a(null);try{console.log(`Fetching order details for ID: ${m}`);const x=await ie(`/api/lab/orders/${m}/report`);if(!x.ok){let j;try{j=await x.json()}catch{j={message:`Server returned status ${x.status}`}}throw console.error("Fetch order details error response:",j),new Error(j.message||`Failed to fetch order details: ${x.status}`)}const b=await x.json();if(console.log("Received order data:",b),!b)throw console.error("Invalid order data structure:",b),new Error("Invalid order data received from server.");a(b)}catch(x){console.error("Error fetching order details:",x),l(x instanceof Error?x.message:"An unknown error occurred while fetching the order details")}finally{s(!1)}},[ie]);v.useEffect(()=>{h(t)},[t,h]),v.useEffect(()=>{(async()=>{try{const x=await ie("/api/clinics/settings");if(x.ok){const b=await x.json();u(b.labLetterheadUrl||"")}}catch(x){console.error("Error fetching clinic settings:",x)}})()},[]);const p=()=>{n&&QM(n)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(lr,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(fn,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:r.jsx(en,{size:16})}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(Tf,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(mq,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",t||"None Specified",")"]}),i&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),o&&!i&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(zr,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:o}),t&&r.jsx("button",{onClick:()=>h(t),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[c&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:c,alt:"Lab Letterhead",className:"print-letterhead-image"})}),!i&&!o&&(n==null?void 0:n.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(qn,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",n.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",n.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",n.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",n.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",n.Patient.id]}),n.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",n.Patient.phone]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. By:"})," ",n.referral_doctor||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Report Date:"})," ",n.report_date?new Date(n.report_date).toLocaleString():"N/A"]})]})]}),!i&&!o&&(n==null?void 0:n.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Ar,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const m=JSON.parse(n.report_content||"{}");return typeof m=="object"&&m!==null&&n.tests?n.tests.map(x=>r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:x.name}),m[x.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(m[x.id]).map(([b,j])=>{var T;const w=(T=x.default_parameters)==null?void 0:T.find(E=>E.name===b),_=typeof j=="string"?parseFloat(j):typeof j=="number"?j:NaN,k=(w==null?void 0:w.type)==="number"&&!isNaN(_)&&(w.lower_limit!=null&&_<w.lower_limit||w.upper_limit!=null&&_>w.upper_limit),C=(w==null?void 0:w.type)==="boolean"?j===!0||j==="true"?"Reactive":"Non-Reactive":String(j),A=(w==null?void 0:w.type)==="boolean"&&(j===!0||j==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:b}),r.jsxs("td",{className:`${k?"abnormal-result":""} ${A?"reactive-result":""}`,children:[C," ",w==null?void 0:w.unit]}),r.jsx("td",{children:w&&w.type==="number"&&(w.lower_limit!==null||w.upper_limit!==null)?r.jsxs(r.Fragment,{children:[w.lower_limit!=null&&` > ${w.lower_limit}`,w.lower_limit!=null&&w.upper_limit!=null&&" - ",w.upper_limit!=null&&` < ${w.upper_limit}`,w.unit&&` ${w.unit}`]}):((w==null?void 0:w.type)==="boolean","N/A")})]},b)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},x.id)):r.jsx(yd,{remarkPlugins:[xd],children:n.report_content})}catch{return r.jsx(yd,{remarkPlugins:[xd],children:n.report_content||"*No findings recorded.*"})}})()})]})]}),!i&&!o&&!(n!=null&&n.report_content)&&!(n!=null&&n.Patient)&&t&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",t,". The order might be processing, does not exist, or the ID is incorrect."]}),!t&&!i&&!o&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(lr,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},uRe=()=>{const t=Mt(),[e,n]=v.useState(""),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(null),[u,h]=v.useState(e);Od(),v.useEffect(()=>{const j=setTimeout(()=>{h(e)},500);return()=>{clearTimeout(j)}},[e]),v.useEffect(()=>{p()},[u]);const p=async()=>{const j=e.trim();if(!j){o([]),c(null);return}i(!0),c(null),o([]),console.log(`Searching for: ${j}`);try{const w=await ie("/api/lab");if(!w.ok){let E;try{E=await w.json()}catch{E={message:`Server returned status ${w.status}`}}throw console.error("Search fetch error response:",E),new Error(E.message||`HTTP error! status: ${w.status}`)}const{orders:_}=await w.json();console.log("Received lab orders for search:",_);const C=_.filter(E=>!!E.report_content).map(E=>{var I,$;return{id:E.id,labTokenNumber:String(E.lab_token_number??"N/A"),patientName:((I=E.Patient)==null?void 0:I.name)||"N/A",patientId:E.patient_id,patientTokenNumber:String((($=E.Patient)==null?void 0:$.patient_token_number)??"N/A"),tests:(E.tests||[]).map(U=>U.name||"Unknown Test"),date:Nf(new Date(E.createdAt),"yyyy-MM-dd"),status:E.status}}),A=new ho(C,{keys:["patientName","labTokenNumber","patientTokenNumber","tests","id","patientId"],threshold:.3,ignoreLocation:!0}),T=e.trim()?A.search(e).map(E=>E.item):C;console.log("Filtered search results:",T),o(T),T.length===0&&j?c(`No matching reports found for "${j}".`):c(null)}catch(w){console.error("Failed to search lab reports:",w),c(w instanceof Error?w.message:"An unknown error occurred during search")}finally{i(!1)}},m=j=>{console.log(`Result clicked, navigating to view report for order ID: ${j}`),t(`/lab/view-report/${j}`)},x=j=>{switch(j){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:j,color:"text-gray-600 bg-gray-100"}}},b=j=>{switch(j){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(en,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(fn,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:e,onChange:j=>n(j.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[a&&r.jsx("div",{className:"loading-text",children:"Searching..."}),l&&!a&&r.jsxs("div",{className:"error-text",children:[r.jsx(zr,{size:20,className:"inline mr-2"})," ",l]}),s.length>0&&!a&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:s.map(j=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>m(j.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(CX,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),j.patientName," (Token: ",j.patientTokenNumber,")"]}),r.jsx("span",{className:b(j.status),children:x(j.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(Ar,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",j.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(fZ,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",j.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx(WN,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",j.date]})]})]},j.id))}),!a&&s.length===0&&!l&&e.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',e,'".']}),!a&&s.length===0&&!l&&!e.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},JB=()=>{const{patientId:t}=Da(),e=Mt(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(null),[h,p]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){l("Patient ID is missing from the URL."),s(!1);return}s(!0),l(null),a([]),p(null);try{const b=await ie(`/api/patients/${t}`);if(b.ok){const _=await b.json();p(_.name||`Patient ID: ${t}`)}else console.warn(`Failed to fetch patient name for ID ${t}`),p(`Patient ID: ${t}`);const j=await ie(`/api/lab/patient/${t}`);if(!j.ok){const _=await j.json().catch(()=>({}));throw new Error(_.message||`HTTP error! status: ${j.status}`)}const w=await j.json();a(w||[])}catch(b){console.error("Error fetching data:",b),l(`Failed to load data: ${b.message}`)}finally{s(!1)}})()},[t]);const m=x=>{x.report_content?e(`/lab/view-report/${x.id}`):e(`/lab/enter-report/${x.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",h?`for ${h}`:`for Patient ID: ${t}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!t){alert("Patient ID is missing. Cannot create a new report.");return}try{const x=await ie("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:t})});if(!x.ok){const j=await x.json().catch(()=>({message:`Failed to create new lab order: ${x.status}`}));throw new Error(j.message||`Failed to create new lab order: ${x.status}`)}const b=await x.json();e(`/lab/enter-report/${b.newOrderId}`)}catch(x){console.error("Error creating new lab order:",x),alert(`Error creating new lab order: ${x.message}`)}},className:"lab-inventory-button",disabled:!t,title:t?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(cs,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(en,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:i?r.jsx("div",{className:"skeleton-reports-list",children:[1,2,3].map(x=>r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsx(ee,{variant:"circular",width:24,height:24,style:{marginRight:"15px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx(ee,{width:"40%",height:20,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"60%",height:16})]})]}),r.jsx("div",{style:{marginLeft:"10px"},children:r.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})})]},x))}):o?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(bZ,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:o})]}):n.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Ar,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(lr,{to:`/lab/create-order/${t}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):c?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",c.report_date?Nf(new Date(c.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>u(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(en,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(c.tests||[]).map(x=>x.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(yd,{remarkPlugins:[xd],children:c.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:n.map(x=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>m(x),tabIndex:0,onKeyPress:b=>b.key==="Enter"&&m(x),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Ar,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",Nf(new Date(x.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",x.tests&&x.tests.length>0?x.tests.map(b=>b.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.status&&r.jsx("span",{className:hRe(x.status),children:dRe(x.status)}),r.jsx(Vl,{size:20,style:{color:"#6c757d"}})]})]},x.id))})})]})})},dRe=t=>{if(!t)return"Unknown";switch(t.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t.charAt(0).toUpperCase()+t.slice(1)}},hRe=t=>{if(!t)return"status-badge";switch(t.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},HG=()=>{const t=Mt(),[e]=Vz(),n=e.get("search")||"",[a,i]=v.useState("pharmacy");return Od(void 0,300),r.jsxs("div",{className:"inventory-management-container",style:{padding:"10px 15px",backgroundColor:"var(--background-color)",minHeight:"100vh"},children:[r.jsxs("div",{className:"inventory-header",style:{marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"action-icon-button",title:"Go Back",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-primary)"},children:r.jsx(en,{size:20})}),r.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700",color:"var(--text-primary)"},children:"Inventory Management"})]}),r.jsxs("div",{className:"inventory-tabs",style:{display:"flex",gap:"4px",backgroundColor:"var(--card-bg, #f3f4f6)",padding:"3px",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("button",{onClick:()=>i("pharmacy"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="pharmacy"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="pharmacy"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="pharmacy"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="pharmacy"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="pharmacy"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(oo,{size:16}),"Pharmacy Stock"]}),r.jsxs("button",{onClick:()=>i("lab"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="lab"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="lab"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="lab"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="lab"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="lab"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(hs,{size:16}),"Lab Stock"]})]})]}),r.jsx("div",{className:"inventory-content",style:{backgroundColor:"var(--card-bg, #fff)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:a==="pharmacy"?r.jsx(qG,{isEmbedded:!0,initialSearch:n}):r.jsx(YM,{isEmbedded:!0})})]})},fRe=({fetchWithAuth:t})=>{const e=Mt(),[n,a]=v.useState(!0),[i,s]=v.useState([]),[o,l]=v.useState(null),[c,u]=v.useState(null),h=v.useCallback(async()=>{a(!0),l(null);try{const b=await(await t("/staff")).json();s(b.map(j=>({...j,id:j._id||j.id})))}catch(x){l(`Failed to load staff data: ${x.message}`),s([])}finally{a(!1)}},[t]);v.useEffect(()=>{h()},[h]),v.useEffect(()=>{if(c){const x=setTimeout(()=>u(null),5e3);return()=>clearTimeout(x)}},[c]);const p=x=>{switch(x){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},m=x=>{switch(x){case"doctor":return r.jsx(Af,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(gq,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx(oo,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(hs,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(gd,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(zi,{size:16,className:"mr-2 text-gray-500"})}};return n?r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(ee,{width:40,height:40,variant:"circular"}),r.jsx(ee,{width:200,height:32})]}),r.jsx(ee,{width:150,height:40})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:120,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(ee,{width:180,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(ee,{width:60,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(ee,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:32})})]},x))})]})})]}):r.jsxs("div",{className:"staff-page-container",children:[c&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[c.type==="success"?r.jsx(Ko,{size:18,className:"mr-2"}):r.jsx(zr,{size:18,className:"mr-2"}),r.jsx("span",{children:c.message}),r.jsx("button",{onClick:()=>u(null),className:"ml-auto text-xl font-bold",children:""})]}),o&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(zr,{size:18,className:"mr-2 text-red-500"}),o,r.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(en,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>e("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(Ln,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0&&!n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):i.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsx("td",{className:"hidden md:table-cell",children:x.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(x.role)}`,children:[m(x.role),x.role.charAt(0).toUpperCase()+x.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:x.role==="doctor"?x.opd_fee?parseFloat(String(x.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>e(`/dashboard/staff/edit/${x.id}`),className:"edit-link",disabled:x.role==="admin",title:"Edit Staff",children:[r.jsx(Ui,{size:16})," Edit"]})})]},x.id))})]})})]})},ZB=()=>{var Ae,ce,be,ke,Ce,ne,ye,de,se,re,oe,je,Oe,J,xe,ge,he,Ie,nt;const{patientId:t,billId:e}=Da(),n=Mt(),[a,i]=v.useState(null),[s,o]=v.useState(!0),[l,c]=v.useState(null),[u,h]=v.useState(""),[p,m]=v.useState("cash"),[x,b]=v.useState(!1),[j,w]=v.useState(""),[_,k]=v.useState(""),[C,A]=v.useState(""),[T,E]=v.useState(""),[I,$]=v.useState([]),[U,B]=v.useState(""),[R,z]=v.useState(!1),[G,K]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Y=()=>{G.length<5&&K(Be=>[...Be,{id:Date.now().toString(),method:"cash",amount:0}])},q=Be=>{G.length>2&&K(Ge=>Ge.filter(it=>it.id!==Be))},V=(Be,Ge,it)=>{K(wt=>wt.map(we=>we.id===Be?Ge==="method"?{...we,method:it}:{...we,amount:Math.max(0,it)}:we))},H=(Be,Ge)=>{const it=G.filter(we=>we.id!==Be).reduce((we,Qe)=>we+Qe.amount,0),wt=Math.max(0,Ge-it);K(we=>we.map(Qe=>Qe.id===Be?{...Qe,amount:wt}:Qe))},[Q,L]=v.useState([]),[te,me]=v.useState(0),X=((Ae=a==null?void 0:a.patient)==null?void 0:Ae.insurance_type)==="no_cash_insurance";v.useEffect(()=>{m(X?"no_cash_insurance":"cash")},[X]),v.useEffect(()=>{e&&(async()=>{o(!0),c(null);try{const[Ge,it,wt]=await Promise.all([ie(`/api/bills/${e}`),ie("/api/clinics/settings").catch(()=>null),ie(`/api/bills?patientId=${t}`).catch(()=>null)]);if(!Ge.ok)throw new Error(`HTTP error! status: ${Ge.status}`);const we=await Ge.json();if(!we||!we.bill||!we.calculated)throw new Error("Incomplete data structure received from backend.");if(we.bill.type!=="admission")throw new Error(`Unexpected bill type: ${we.bill.type}. Expected 'admission'.`);const Qe=Array.isArray(we.admissionPayments)?we.admissionPayments:[];if(i({...we.bill,amount:we.bill.amount,created_at:we.bill.createdAt||we.bill.created_at,items:(we.bill.items||[]).map(Xe=>({...Xe,price:parseFloat(Xe.price)||0,quantity:parseInt(Xe.quantity)||1})),AdmissionPayments:Qe,calculated:we.calculated,admissionRecord:we.admissionRecord,patient:we.bill.Patient?{id:we.bill.Patient.id,name:we.bill.Patient.name,admission_date:we.bill.Patient.admission_date,discharge_date:we.bill.Patient.discharge_date,token:we.bill.Patient.patient_token_number||we.bill.Patient.token,insurance_type:we.bill.Patient.insurance_type}:void 0}),it&&it.ok){const Xe=await it.json();w(Xe.name||""),k(Xe.address||""),A(Xe.notes||""),E(Xe.upi_id||"")}try{const Xe=await ie(`/api/patients/${t}/admission-payments`);if(Xe.ok){const ut=await Xe.json();$(ut)}}catch(Xe){console.error("Failed to fetch payment history:",Xe)}if(wt&&wt.ok){const ut=((await wt.json()).bills||[]).filter(bt=>bt.type==="admission"&&bt.id!==e).map(bt=>{var ot,kt;const Pe=bt.AdmissionRecord;return{id:bt.id,amount:Pe?parseFloat(Pe.total_amount):parseFloat(bt.amount)||0,status:Pe?Pe.balance<=0||Pe.status==="discharged"&&Pe.balance<=0?"paid":"pending":bt.status,created_at:bt.createdAt||bt.created_at,admission_date:Pe?Pe.admission_date:((ot=bt.Patient)==null?void 0:ot.admission_date)||bt.admission_date,discharge_date:Pe?Pe.discharge_date:((kt=bt.Patient)==null?void 0:kt.discharge_date)||bt.discharge_date,admissionRecord:Pe}});L(ut);const Ct=ut.filter(bt=>bt.admissionRecord?bt.admissionRecord.balance>0:bt.status!=="paid").reduce((bt,Pe)=>Pe.admissionRecord?bt+(typeof Pe.admissionRecord.balance=="string"?parseFloat(Pe.admissionRecord.balance):Pe.admissionRecord.balance):bt+Pe.amount,0);me(Ct)}}catch(Ge){console.error("Failed to fetch admission bill details:",Ge),c(Ge instanceof Error?Ge.message:"An unknown error occurred")}finally{o(!1)}})()},[e,t]),v.useEffect(()=>{(async()=>{if(!e){if(!t){c("Patient ID is missing."),o(!1);return}try{o(!0);const Ge=await ie(`/api/patients/${t}`);if(Ge.ok){const it=await Ge.json();if(it){if(it.admission_date&&!it.discharge_date){const we=await ie(`/api/patients/${t}/active-bill?type=admission`);if(we.ok){const Qe=await we.json();if(Qe&&Qe.id){n(`/patient/${t}/admission-bill/${Qe.id}`,{replace:!0});return}}}i({id:0,patient_id:it.id,type:"admission",amount:"0",status:"pending",created_at:new Date().toISOString(),AdmissionPayments:[],calculated:{totalPaid:0,totalDue:0,balance:0,daysStayed:0,perDayCharge:0},patient:{id:it.id,name:it.name,admission_date:it.admission_date,discharge_date:it.discharge_date,token:it.token,insurance_type:it.insurance_type}});const wt=await ie(`/api/bills?patientId=${t}`);if(wt.ok){const Qe=((await wt.json()).bills||[]).filter(Xe=>Xe.type==="admission").map(Xe=>{var Ct,bt;const ut=Xe.AdmissionRecord;return{id:Xe.id,amount:ut?parseFloat(ut.total_amount):parseFloat(Xe.amount)||0,status:ut?ut.balance<=0||ut.status==="discharged"&&ut.balance<=0?"paid":"pending":Xe.status,created_at:Xe.createdAt||Xe.created_at,admission_date:ut?ut.admission_date:((Ct=Xe.Patient)==null?void 0:Ct.admission_date)||Xe.admission_date,discharge_date:ut?ut.discharge_date:((bt=Xe.Patient)==null?void 0:bt.discharge_date)||Xe.discharge_date,admissionRecord:ut}});L(Qe)}}else c("Patient not found")}}catch(Ge){console.error("Error fetching patient status:",Ge),c("Failed to load patient details")}finally{o(!1)}}})()},[t,e,n]);const Re=async()=>{if(t){b(!0);try{const Be=await ie(`/api/patients/${t}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Be.ok){const it=await Be.json();throw new Error(it.message||"Failed to admit patient")}const Ge=await Be.json();Ge.bill&&Ge.bill.id?n(`/patient/${t}/admission-bill/${Ge.bill.id}`):window.location.reload()}catch(Be){c(Be instanceof Error?Be.message:"Failed to admit patient"),b(!1)}}},Se=async()=>{if(t&&window.confirm("Are you sure you want to discharge this patient? This will finalize the bill.")){b(!0);try{const Be=await ie(`/api/patients/${t}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Be.ok){const Ge=await Be.json();throw new Error(Ge.message||"Failed to discharge patient")}window.location.reload()}catch(Be){c(Be instanceof Error?Be.message:"Failed to discharge patient"),b(!1)}}},Ee=((ce=a==null?void 0:a.patient)==null?void 0:ce.admission_date)&&!((be=a==null?void 0:a.patient)!=null&&be.discharge_date),Fe=!!((ke=a==null?void 0:a.patient)!=null&&ke.discharge_date);v.useEffect(()=>{var it,wt;const Ge=Number(((it=a==null?void 0:a.calculated)==null?void 0:it.balance)??((wt=a==null?void 0:a.admissionRecord)==null?void 0:wt.balance)??0)+te;if(Ge>0&&T){const we=`upi://pay?pa=${T}&pn=${encodeURIComponent(j||"Clinic")}&am=${Ge.toFixed(2)}&cu=INR`;B(we)}else B("")},[a,te,T,j]);const le=G.reduce((Be,Ge)=>Be+Ge.amount,0),_e=async Be=>{var we,Qe;Be.preventDefault();const it=Number(((we=a==null?void 0:a.calculated)==null?void 0:we.balance)??((Qe=a==null?void 0:a.admissionRecord)==null?void 0:Qe.balance)??0)+te,wt=R?le:parseFloat(u);if(!t||wt<=0||wt>it+.1){c(`Please enter a valid amount. Max payable: ${it.toFixed(2)}`);return}c(null),b(!0);try{if(R){for(const Ct of G)if(Ct.amount>0){const bt=await ie(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:Ct.amount,payment_mode:Ct.method})});if(!bt.ok){const Pe=await bt.json();throw new Error(Pe.message||`Failed to record ${Ct.method} payment`)}}}else{const Ct=await ie(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(u),payment_mode:p})});if(!Ct.ok){const bt=await Ct.json();throw new Error(bt.message||`HTTP error! status: ${Ct.status}`)}}const ut=await(await ie(`/api/bills/${e}`)).json();if(ut&&ut.bill&&ut.calculated&&ut.admissionPayments)i({...ut.bill,amount:parseFloat(ut.bill.amount),AdmissionPayments:ut.admissionPayments,calculated:ut.calculated,patient:ut.bill.Patient?{id:ut.bill.Patient.id,name:ut.bill.Patient.name,admission_date:ut.bill.Patient.admission_date,discharge_date:ut.bill.Patient.discharge_date,token:ut.bill.Patient.token,insurance_type:ut.bill.Patient.insurance_type}:void 0});else throw new Error("Invalid data structure received after payment submission.");h(""),m("cash"),R&&(K([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),z(!1)),setTimeout(()=>{window.print()},100)}catch(Xe){console.error("Failed to submit payment:",Xe),c(Xe instanceof Error?Xe.message:"Failed to record payment")}finally{b(!1)}},Ve=()=>{window.print()};if(s)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(ee,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(ee,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:150,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]})]})]})})]})]})});if(l)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>n(-1),className:"back-button",children:r.jsx(en,{size:20})}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"error-message-box",children:["Error: ",l]})]})});if(!a||!a.calculated)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"error-message-box",children:"No bill details found or data is incomplete."})});const De=Number(a.calculated&&a.calculated.balance!==void 0?a.calculated.balance:a.admissionRecord?a.admissionRecord.balance:0),ue=a.status==="paid"||De<=0;return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"ADMISSION BILL"}),r.jsx("h2",{className:"clinic-name-print",children:j||"Hospital"}),(_||C)&&r.jsxs("div",{className:"clinic-details-print",children:[_&&r.jsx("span",{className:"small-text clinic-address",children:_}),C&&r.jsx("span",{className:"small-text clinic-notes",children:C})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient"]})," ",((Ce=a.patient)==null?void 0:Ce.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",((ne=a.patient)==null?void 0:ne.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(en,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{children:"Patient Information"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[!Ee&&!Fe&&r.jsxs("button",{onClick:Re,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(vf,{size:16})," Admit Patient"]}),Ee&&r.jsxs("button",{onClick:Se,disabled:x,className:"secondary-button",style:{fontSize:"0.85em",padding:"6px 12px",background:"#dc3545",color:"white"},children:[r.jsx(uq,{size:16})," Discharge"]}),Fe&&r.jsxs("button",{onClick:Re,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(HJ,{size:16})," Re-Admit"]})]})]}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",((ye=a.patient)==null?void 0:ye.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",((de=a.patient)==null?void 0:de.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(QQ,{size:16})," Bill ID"]})," ",a.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Created"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Admission Charges Breakdown"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsxs("tbody",{children:[a.admissionRecord?r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]})]}),a.admissionRecord.days_stayed?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString(),a.admissionRecord.discharge_date?` - ${new Date(a.admissionRecord.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.admissionRecord.days_stayed," days"]}),r.jsxs("td",{children:["",Number(a.admissionRecord.per_day_charge).toFixed(2)]}),r.jsxs("td",{children:["",(Number(a.admissionRecord.days_stayed)*Number(a.admissionRecord.per_day_charge)).toFixed(2)]})]}):a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges (Ongoing)",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString()," - Today)"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]}):null]}):r.jsxs(r.Fragment,{children:[a.items&&a.items.length>0?a.items.map((Be,Ge)=>r.jsxs("tr",{children:[r.jsx("td",{children:Ge+1}),r.jsx("td",{children:Be.name}),r.jsx("td",{children:Be.quantity}),r.jsxs("td",{children:["",Be.price.toFixed(2)]}),r.jsxs("td",{children:["",(Be.price*Be.quantity).toFixed(2)]})]},`item-${Ge}`)):r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Initial Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]})]}),a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:(((se=a.items)==null?void 0:se.length)||1)+1}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",(re=a.patient)!=null&&re.admission_date?new Date(a.patient.admission_date).toLocaleDateString():"",(oe=a.patient)!=null&&oe.discharge_date?` - ${new Date(a.patient.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]})]}),r.jsxs("tr",{className:"subtotal-row current-admission-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Current Admission Total"}),r.jsxs("td",{children:["",Number(((je=a.calculated)==null?void 0:je.totalDue)??((Oe=a.admissionRecord)==null?void 0:Oe.total_amount)??0).toFixed(2)]})]}),Q.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("tr",{className:"section-header-row previous-admissions-header",children:r.jsx("td",{colSpan:5,style:{fontWeight:600,textAlign:"center"},children:"Previous Admissions"})}),Q.map((Be,Ge)=>r.jsxs("tr",{className:Be.status!=="paid"?"bill-row-unpaid":"bill-row-paid",children:[r.jsx("td",{children:Ge+1}),r.jsxs("td",{children:["Admission - ",Be.admission_date?new Date(Be.admission_date).toLocaleDateString():"N/A",Be.discharge_date&&r.jsxs("small",{style:{display:"block",color:"inherit",opacity:.8,fontSize:"0.75em"},children:["Discharged: ",new Date(Be.discharge_date).toLocaleDateString()]})]}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Be.amount.toFixed(2)]}),r.jsxs("td",{className:Be.status!=="paid"?"text-danger":"text-success",children:["",Be.amount.toFixed(2),Be.status==="paid"&&r.jsx("small",{style:{marginLeft:"4px"},children:"(Paid)"})]})]},Be.id)),te>0&&r.jsxs("tr",{className:"subtotal-row unpaid-balance-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Previous Unpaid Balance"}),r.jsxs("td",{children:["",te.toFixed(2)]})]})]}),r.jsxs("tr",{className:`grand-total-row-dynamic ${te>0?"grand-total-unpaid":"grand-total-paid"}`,children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"GRAND TOTAL"}),r.jsxs("td",{style:{fontSize:"1.1em"},children:["",(Number(((J=a.calculated)==null?void 0:J.totalDue)??((xe=a.admissionRecord)==null?void 0:xe.total_amount)??0)+te).toFixed(2)]})]})]})]})]}),I.length>0&&r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Payment History"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DATE"}),r.jsx("th",{children:"MODE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsx("tbody",{children:I.map((Be,Ge)=>{var it;return r.jsxs("tr",{children:[r.jsx("td",{children:Ge+1}),r.jsx("td",{children:Be.payment_date?new Date(Be.payment_date).toLocaleDateString():"N/A"}),r.jsx("td",{style:{textTransform:"capitalize"},children:((it=Be.payment_mode)==null?void 0:it.replace(/_/g," "))||"N/A"}),r.jsxs("td",{children:["",(Number(Be.amount_paid)||0).toFixed(2)]})]},Be.id)})})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",Number(((ge=a.calculated)==null?void 0:ge.totalDue)??((he=a.admissionRecord)==null?void 0:he.total_amount)??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Number(((Ie=a.calculated)==null?void 0:Ie.totalPaid)??((nt=a.admissionRecord)==null?void 0:nt.total_paid)??0).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Balance Due: ",De.toFixed(2)]})})]}),U&&De>0&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(qa,{value:U,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",(a.calculated.totalDue||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Days Stayed"}),r.jsx("span",{children:a.calculated.daysStayed??0})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{style:{color:"#28a745"},children:["",(a.calculated.totalPaid||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Balance Due"}),r.jsxs("strong",{style:{color:De>0?"#dc3545":"#28a745"},children:["",De.toFixed(2)]})]}),Q.length>0&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #dee2e6"},children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",color:"#495057"},children:"Previous Admissions"}),Q.map(Be=>r.jsxs("div",{className:"summary-row",style:{fontSize:"0.8rem"},children:[r.jsxs("span",{style:{color:"#6c757d"},children:[Be.admission_date?new Date(Be.admission_date).toLocaleDateString():"N/A",Be.status!=="paid"&&r.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"(Unpaid)"})]}),r.jsxs("span",{style:{color:Be.status!=="paid"?"#dc3545":"#28a745"},children:["",Be.amount.toFixed(2)]})]},Be.id)),te>0&&r.jsxs("div",{className:"summary-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e9ecef"},children:[r.jsx("strong",{style:{color:"#dc3545",fontSize:"0.875rem"},children:"Previous Balance"}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",te.toFixed(2)]})]})]}),te>0&&r.jsxs("div",{className:"summary-row grand-total-row",style:{marginTop:"0.75rem",background:"#fff3cd"},children:[r.jsx("strong",{style:{color:"#856404"},children:"Total Outstanding"}),r.jsxs("strong",{style:{color:"#856404"},children:["",(De+te).toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:U&&De>0?r.jsxs(r.Fragment,{children:[r.jsx(qa,{value:U,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):De<=0?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#28a745"},children:[r.jsx(Cl,{size:48}),r.jsx("p",{style:{marginTop:"10px",fontWeight:600},children:"Fully Paid"})]}):r.jsx("p",{children:"UPI QR code not available."})}),!ue&&r.jsxs("form",{onSubmit:_e,children:[r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>z(!R),disabled:x,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:R?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:R?"rgba(79, 172, 254, 0.1)":"transparent",color:R?"#4facfe":"#666",cursor:x?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Uo,{size:14}),"Split"]})]}),R?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",le.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:G.map((Be,Ge)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Ge+1}),r.jsxs("select",{value:Be.method,onChange:it=>V(Be.id,"method",it.target.value),className:"split-payment-select",disabled:x,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Be.amount||"",onChange:it=>V(Be.id,"amount",parseFloat(it.target.value)||0),className:"split-payment-input",disabled:x})]}),G.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>H(Be.id,De+te),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining balance",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>q(Be.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(zn,{size:12})})]})]},Be.id))}),G.length<5&&r.jsxs("button",{type:"button",onClick:Y,className:"split-payment-add-btn",disabled:x,children:[r.jsx(Ln,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Max Payable:"}),r.jsxs("span",{style:{fontWeight:600},children:["",(De+te).toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${le<=De+te+.1?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:le<=De+te+.1?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",le.toFixed(2)]})]}),le>De+te+.1&&r.jsx("div",{className:"split-payment-warning",children:" Amount exceeds balance!"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"payment-input-group",style:{marginBottom:"15px"},children:[r.jsx("label",{htmlFor:"paymentAmount",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Amount ()"}),r.jsx("input",{type:"number",id:"paymentAmount",value:u,onChange:Be=>h(Be.target.value),placeholder:`Max ${(De+te).toFixed(2)}`,min:"0.01",step:"0.01",max:De+te,className:"payment-mode-select",required:!0})]}),r.jsxs("div",{className:"payment-input-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:p,onChange:Be=>m(Be.target.value),className:"payment-mode-select",disabled:X,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),X&&r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"})]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{type:"button",onClick:Ve,className:"secondary-button print-preview-button",children:"Print Preview"}),r.jsx("button",{type:"submit",className:"primary-button",disabled:x||!R&&(!u||parseFloat(u)<=0||parseFloat(u)>De+te)||R&&(le<=0||le>De+te+.1),children:x?"Processing...":"Record Payment & Print"})]})]}),ue&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Ve,className:"secondary-button",children:"Print Bill"})})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for choosing our hospital!"}),r.jsx("p",{children:"This is a computer-generated bill and does not require a signature."})]})]})})},pRe=t=>{switch(t){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},mRe=()=>{const{orderId:t}=Da(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(!1),[h,p]=v.useState({}),[m,x]=v.useState(""),[b,j]=v.useState(""),[w,_]=v.useState("cash"),k=v.useMemo(()=>(n==null?void 0:n.medications.reduce((R,z)=>{const G=z.total_price??0,K=G*(z.discount_percentage??0)/100;return R+G-K},0))??0,[n==null?void 0:n.medications]),C=5,A=v.useMemo(()=>!n||!n.medications?0:n.medications.reduce((R,z,G)=>{var Q,L;const K=z.drug_id??`index-${G}`,Y=((Q=h[K])==null?void 0:Q.pack)||0,q=((L=h[K])==null?void 0:L.loose)||0,V=z.pack_price??0,H=z.loose_price??0;return R+Y*V+q*H},0),[n,h]),T=v.useCallback(async()=>{if(!t){l("Order ID is missing."),s(!1);return}s(!0),l(null);try{const R=await ie(`/api/pharmacy-orders/${t}`);if(!R.ok)throw R.status===404?new Error(`Order with ID ${t} not found.`):new Error(`Failed to fetch order details: ${R.statusText} (${R.status})`);const z=await R.json();console.log("Fetched order data after return:",z);const K=z.medications.map(q=>q.pack_price&&q.loose_price&&q.loose_price>0?{...q,unitsPerPack:Math.round(q.pack_price/q.loose_price)}:{...q,unitsPerPack:0}).map(q=>({...q,discount_percentage:q.discount_percentage??0}));a({...z,medications:K});const Y={};K.forEach((q,V)=>{const H=q.drug_id??`index-${V}`;Y[H]={pack:0,loose:0}}),p(Y)}catch(R){console.error("Failed to fetch order details:",R),l(R.message||"Failed to load order details.")}finally{s(!1)}},[t]);v.useEffect(()=>{T()},[T]),v.useEffect(()=>{(async()=>{try{const z=await ie("/api/clinics/settings");if(!z.ok)throw new Error("Failed to fetch clinic settings");const G=await z.json();console.log("Fetched clinic settings:",G),x(G.upi_id||"")}catch(z){console.error("Error fetching clinic settings:",z)}})()},[]),v.useEffect(()=>{if((n==null?void 0:n.order_total)!==void 0&&n.order_total>0&&m){const R=`upi://pay?pa=${m}&pn=ClinicName&am=${n.order_total.toFixed(2)}&cu=INR`;j(R)}else j("")},[n==null?void 0:n.order_total,m]);const E=(R,z)=>{a(G=>{if(!G)return null;const K=G.medications.map((q,V)=>(q.drug_id??`index-${V}`)===R?{...q,discount_percentage:isNaN(z)?0:z}:q),Y=K.reduce((q,V)=>{const H=V.total_price??0,Q=H*(V.discount_percentage??0)/100;return q+H-Q},0);return{...G,medications:K,order_total:Y}})},I=(R,z,G)=>{p(K=>{const Y=G.unitsPerPack||0,V=G.pack_quantity*Y+G.loose_quantity,H=Math.max(0,Math.min(z,V));let Q=0,L=H;return Y>0&&(Q=Math.floor(H/Y),L=H%Y),{...K,[R]:{pack:Q,loose:L}}})},$=async()=>{const R=n==null?void 0:n.medications.map((z,G)=>{var V,H;const K=z.drug_id??`index-${G}`,Y=((V=h[K])==null?void 0:V.pack)||0,q=((H=h[K])==null?void 0:H.loose)||0;return Y>0||q>0?{drug_id:z.drug_id,name:z.name,pack_quantity:z.pack_quantity,loose_quantity:z.loose_quantity,returnPackQuantity:Y,returnLooseQuantity:q}:null}).filter(z=>z!==null);if(!R||R.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!t){alert("Order ID is missing. Cannot process return.");return}if(!R){alert("Could not prepare items for return.");return}u(!0),l(null);try{const z=await ie(`/api/pharmacy-orders/${t}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:R})}),G=await z.json();if(!z.ok)throw new Error(G.message||`Failed to process return: ${z.statusText}`);const K={};n==null||n.medications.forEach((Y,q)=>{const V=Y.drug_id??`index-${q}`;K[V]={pack:0,loose:0}}),p(K),T()}catch(z){console.error("Failed to process return:",z),l(z.message||"An error occurred while processing the return."),alert(`Error processing return: ${z.message||"Unknown error"}`)}finally{u(!1)}};if(i)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(o)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(en,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",o]})]});if(!n)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(en,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const U=()=>{window.print()},B=pRe(n.status);return r.jsx("div",{className:"pharmacy-order-details-page",children:r.jsxs("div",{className:"order-details-container printable-section",children:[r.jsxs("div",{className:"order-details-header no-print",children:[r.jsx("h1",{children:"Pharmacy Order Details"}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(en,{size:20})}),r.jsxs("button",{onClick:U,className:"print-button",children:[r.jsx(Tf,{size:18})," Print Bill"]})]})]}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{children:"Mahajan Pharmacy"}),r.jsxs("div",{className:"clinic-details-print",children:[r.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),r.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),r.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Token:"})," 12"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),r.jsxs("div",{className:"order-info-section no-print",children:[r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Order ID:"})," ",n.id]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Patient:"})," ",n.patientName||"N/A"," (",n.patientTokenNumber||"N/A",")"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Prescribed By:"})," ",n.prescribedBy||"N/A"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`status-pill ${B.text} ${B.bg}`,children:n.status})]})]}),r.jsxs("div",{className:"medications-section",children:[r.jsx("h2",{children:"Medications Ordered"}),n.medications.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PACK QTY"}),r.jsx("th",{children:"PACK PRICE"}),r.jsx("th",{children:"LOOSE QTY"}),r.jsx("th",{children:"LOOSE PRICE"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),r.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),r.jsx("tbody",{children:n.medications.map((R,z)=>{var Q,L;const G=R.drug_id??`index-${z}`,K=R.total_price??0,Y=K*(R.discount_percentage??0)/100,q=K-Y,V=((Q=h[G])==null?void 0:Q.pack)||0,H=((L=h[G])==null?void 0:L.loose)||0;return r.jsxs("tr",{children:[r.jsx("td",{children:R.name}),r.jsx("td",{children:R.pack_quantity??0}),r.jsx("td",{children:R.pack_price!=null?Number(R.pack_price).toFixed(2):"N/A"}),r.jsx("td",{children:R.loose_quantity??0}),r.jsx("td",{children:R.loose_price!=null?Number(R.loose_price).toFixed(2):"N/A"}),r.jsx("td",{children:R.price!=null?Number(R.price).toFixed(2):"N/A"})," ",r.jsx("td",{children:R.price!=null?Number(R.price).toFixed(2):"N/A"})," ",r.jsxs("td",{children:[r.jsx("input",{type:"number",value:R.discount_percentage??0,onChange:te=>E(G,parseFloat(te.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),r.jsxs("span",{className:"print-only",children:[R.discount_percentage??0,"%"]})]}),r.jsxs("td",{children:[C.toFixed(1),"%"]}),r.jsx("td",{children:q.toFixed(2)}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:R.pack_quantity,value:V,onChange:te=>{const X=(parseInt(te.target.value,10)||0)*(R.unitsPerPack||0)+H;I(G,X,R)},className:"return-quantity-input"})}),r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:R.loose_quantity+R.pack_quantity*(R.unitsPerPack||0)-V*(R.unitsPerPack||0),value:H,onChange:te=>{const me=parseInt(te.target.value,10)||0,X=V*(R.unitsPerPack||0)+me;I(G,X,R)},className:"return-quantity-input"})})]})]},G)})})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",k.toFixed(2)]})}),r.jsxs("div",{className:"order-total-section no-print",children:[r.jsx("span",{className:"total-label",children:"Order Total:"}),r.jsxs("span",{className:"total-amount",children:["",k.toFixed(2)]})]}),r.jsxs("div",{className:"payment-section no-print",children:[r.jsxs("div",{className:"payment-mode-group",children:[r.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),r.jsxs("select",{id:"paymentMode",value:w,onChange:R=>_(R.target.value),className:"payment-mode-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),b&&r.jsxs("div",{className:"qr-code-container",children:[r.jsx(qa,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]})]}),(n.status==="dispensed"||n.status==="billed")&&n.medications.length>0&&r.jsxs("div",{className:"return-action-section no-print",children:[A>0&&r.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",A.toFixed(2)]}),r.jsx("button",{onClick:$,disabled:Object.values(h).every(R=>R.pack===0&&R.loose===0)||c,className:"process-return-button",children:c?r.jsxs(r.Fragment,{children:[r.jsx(OP,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(OP,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},gRe=async()=>{const t=await ie("/subscriptions");if(!t.ok)throw new Error("Failed to fetch subscription plans");return await t.json()},yRe=async t=>{const e=await ie(`/subscriptions/${t}`);if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(n.message||"Failed to fetch subscription plan details")}return await e.json()},xRe=async t=>{const e=await ie("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(n.message||"Failed to create subscription plan")}return await e.json()},vRe=async(t,e)=>{const n=await ie(`/subscriptions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(a.message||"Failed to update subscription plan")}return await n.json()},bRe=async t=>{const e=await ie(`/subscriptions/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(n.message||"Failed to deactivate subscription plan")}return await e.json()},jRe=async(t,e)=>{const n=await ie("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:t,planId:e})});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(a.message||"Failed to initiate Razorpay subscription")}return await n.json()},wRe=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),u=v.useCallback(async()=>{i(!0),o(null);try{const p=await gRe();n(p)}catch(p){o(p.message||"Failed to fetch subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{u()},[u]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const h=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await bRe(p),c({type:"success",message:"Plan deactivated successfully!"}),u()}catch(m){o(m.message||"Failed to deactivate plan."),c({type:"error",message:m.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ko,{size:18,className:"mr-2 text-green-500"}):r.jsx(zr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ot,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{size:16})}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>t("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(Ln,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:120,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(ee,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(Ui,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>h(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(zn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},NRe=()=>{const t=Mt(),[e,n]=v.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const m=setTimeout(()=>c(null),5e3);return()=>clearTimeout(m)}},[l]);const u=m=>{const{name:x,value:b}=m.target;n(j=>({...j,[x]:b}))},h=async m=>{if(m.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await xRe(e),c({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ko,{size:18,className:"mr-2 text-green-500"}):r.jsx(zr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ot,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:h,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:u,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:u,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:u})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:r.jsx(en,{size:16})}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},SRe=()=>{const{id:t}=Da(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,u]=v.useState(!0),[h,p]=v.useState(null),[m,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),u(!1);return}u(!0),p(null);try{const k=await yRe(t);a(k),s({name:k.name,description:k.description||"",price:k.price,period:k.period,interval:k.interval,razorpay_plan_id:k.razorpay_plan_id||"",status:k.status})}catch(k){p(k.message||"Failed to fetch plan details."),x({type:"error",message:k.message||"Failed to fetch plan details."})}finally{u(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(m){const k=setTimeout(()=>x(null),5e3);return()=>clearTimeout(k)}},[m]);const j=k=>{const{name:C,value:A}=k.target;s(T=>({...T,[C]:A}))},w=async k=>{if(k.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await vRe(t,i),x({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const A=C.message||"Failed to update plan.";p(A),x({type:"error",message:A})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):h&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:h}):n?r.jsxs("div",{className:"subscription-page-container",children:[m&&r.jsxs("div",{className:`${m.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[m.type==="success"?r.jsx(Ko,{size:18,className:"mr-2"}):r.jsx(zr,{size:18,className:"mr-2"}),r.jsx("span",{children:m.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Ot,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),h&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:h}),r.jsxs("form",{onSubmit:w,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval||1,onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:r.jsx(en,{size:16})}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},_Re=()=>{const{patientId:t}=Da(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(""),[c,u]=v.useState(!0),[h,p]=v.useState(null),[m,x]=v.useState("manual"),[b,j]=v.useState(!1),[w,_]=v.useState(null),k=v.useCallback(async()=>{u(!0),p(null);try{const T=await ie(`/api/patients/${t}`);if(!T.ok){const U=await T.json();throw new Error(U.message||"Failed to fetch patient details")}const E=await T.json();a(E);const I=await ie("/api/subscriptions");if(!I.ok){const U=await I.json();throw new Error(U.message||"Failed to fetch subscription plans")}const $=await I.json();s($.filter(U=>U.status==="active"))}catch(T){console.error("Error fetching data:",T),p(`Failed to load data: ${T.message}`)}finally{u(!1)}},[t]);v.useEffect(()=>{t?k():(p("Patient ID is missing."),u(!1))},[t,k]);const C=(T,E)=>{const I=new Date(T),$=E.interval||1;switch(E.period){case"daily":I.setDate(T.getDate()+$);break;case"weekly":I.setDate(T.getDate()+$*7);break;case"monthly":I.setMonth(T.getMonth()+$);break;case"yearly":I.setFullYear(T.getFullYear()+$);break;default:console.warn(`Unknown subscription period: ${E.period}. Defaulting to 1 month.`),I.setMonth(T.getMonth()+1)}return I},A=async()=>{if(!t||!o){_("Please select a subscription plan.");return}const T=i.find(E=>E.id===o);if(!T){_("Selected plan details not found.");return}j(!0),_(null);try{const E=new Date,I=C(E,T);if(m==="manual"){const $={subscription_plan_id:o,subscription_status:"active",subscription_start_date:E.toISOString(),subscription_end_date:I.toISOString(),subscription_payment_method:"manual"},U=await ie(`/api/patients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!U.ok){const B=await U.json();throw new Error(B.message||"Failed to start subscription manually")}e("/all-patients")}else if(m==="razorpay"){console.log("Initiating Razorpay subscription for plan:",T);const $=await jRe(t,o);if($&&$.short_url)window.location.href=$.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(E){console.error("Error starting subscription:",E),_(`Failed to start subscription: ${E.message}`),j(!1)}};return c?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):h?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:h})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(en,{size:16})})]}):n?r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(en,{size:16})}),r.jsxs("h1",{children:[r.jsx(qn,{size:28})," ","Start Subscription for ",n.name]}),w&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:w})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),i.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:i.map(T=>r.jsxs("div",{className:`subscription-plan-card ${o===T.id?"selected-plan":""}`,onClick:()=>l(T.id),children:[r.jsx("h3",{children:T.name}),r.jsxs("p",{className:"price",children:["",T.price]}),r.jsxs("p",{className:"duration",children:["Every ",T.interval," ",T.period,T.interval>1?"s":""]}),T.description&&r.jsx("p",{children:T.description})]},T.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:m==="manual",onChange:()=>x("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:m==="razorpay",onChange:()=>x("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:A,disabled:!o||b||i.length===0,className:"subscription-btn",children:[b&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),b?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(en,{size:16})})]})},CRe=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),u=v.useCallback(async()=>{i(!0),o(null);try{const p=await VM();n(p)}catch(p){o(p.message||"Failed to fetch clinic subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{u()},[u]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const h=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await yDe(p),c({type:"success",message:"Clinic plan deactivated successfully!"}),u()}catch(m){o(m.message||"Failed to deactivate clinic plan."),c({type:"error",message:m.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ko,{size:18,className:"mr-2 text-green-500"}):r.jsx(zr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ot,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(en,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>t("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(Ln,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:120,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(ee,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/clinic-subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(Ui,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>h(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(zn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},kRe=()=>{const t=Mt(),[e,n]=v.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const m=setTimeout(()=>c(null),5e3);return()=>clearTimeout(m)}},[l]);const u=m=>{const{name:x,value:b,type:j}=m.target;n(w=>({...w,[x]:j==="number"?parseFloat(b):b}))},h=async m=>{if(m.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await mDe(e),c({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/clinic-subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create clinic plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ko,{size:18,className:"mr-2 text-green-500"}):r.jsx(zr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ot,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:h,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:u,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:u,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:u})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},TRe=()=>{const{id:t}=Da(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,u]=v.useState(!0),[h,p]=v.useState(null),[m,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),u(!1);return}u(!0),p(null);try{const k=await pDe(t);a(k),s({name:k.name,description:k.description||"",price:Number(k.price),period:k.period,interval:Number(k.interval),razorpay_plan_id:k.razorpay_plan_id||"",status:k.status})}catch(k){p(k.message||"Failed to fetch clinic plan details."),x({type:"error",message:k.message||"Failed to fetch plan details."})}finally{u(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(m){const k=setTimeout(()=>x(null),5e3);return()=>clearTimeout(k)}},[m]);const j=k=>{const{name:C,value:A,type:T}=k.target;s(E=>({...E,[C]:T==="number"?parseFloat(A):A}))},w=async k=>{if(k.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await gDe(t,i),x({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const A=C.message||"Failed to update clinic plan.";p(A),x({type:"error",message:A})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):h&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:h}):n?r.jsxs("div",{className:"subscription-page-container",children:[m&&r.jsxs("div",{className:`${m.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[m.type==="success"?r.jsx(Ko,{size:18,className:"mr-2"}):r.jsx(zr,{size:18,className:"mr-2"}),r.jsx("span",{children:m.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Ot,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),h&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:h}),r.jsxs("form",{onSubmit:w,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval!==void 0?i.interval:"",onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},ARe=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(""),[s,o]=v.useState(!0),[l,c]=v.useState(null),[u,h]=v.useState(!1),[p,m]=v.useState(null),x=v.useCallback(async()=>{c(null);try{const w=(await VM()).filter(_=>_.status==="active");n(w),w.length>0&&!a&&i(w[0].id)}catch(j){console.error("Error fetching plans:",j),c(`Failed to load subscription plans: ${j.message}`)}},[]);v.useEffect(()=>{(async()=>{o(!0);try{const w=await vDe();if(w&&w.short_url){window.location.href=w.short_url,c("You have a pending subscription. Redirecting to payment...");return}await x()}catch(w){console.error("Error during initial page load:",w),c(`An unexpected error occurred: ${w.message}`)}finally{o(!1)}})()},[x]);const b=async()=>{if(!a){m("Please select a clinic subscription plan.");return}const j=e.find(w=>w.id===a);if(!j){m("Selected plan details not found.");return}h(!0),m(null);try{console.log("Initiating Razorpay clinic subscription for plan:",j);const w=await xDe(a);if(w&&w.short_url)window.location.href=w.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(w){console.error("Error starting clinic subscription:",w),m(`Failed to start clinic subscription: ${w.message}`),h(!1)}};return s?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):l?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{size:16})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{size:16})}),r.jsxs("h1",{children:[r.jsx(oX,{size:28}),"Buy Pro Plan for Clinic"]}),p&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:p})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),e.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:e.map(j=>r.jsxs("div",{className:`subscription-plan-card ${a===j.id?"selected-plan":""}`,onClick:()=>i(j.id),children:[r.jsx("h3",{children:j.name}),r.jsxs("p",{className:"price",children:["",Number(j.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",j.interval," ",j.period,j.interval>1?"s":""]}),j.description&&r.jsx("p",{children:j.description})]},j.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:b,disabled:!a||u||e.length===0,className:"subscription-btn",children:[u&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),u?"Initiating Payment...":"Buy Pro Plan"]})})]})},PRe=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(!0),[l,c]=v.useState(null),[u,h]=v.useState(!1),[p,m]=v.useState(!1),[x,b]=v.useState(null),[j,w]=v.useState({name:"",email:"",password:"",role:"user"}),[_,k]=v.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[C,A]=v.useState(""),[T,E]=v.useState(""),[I,$]=v.useState(!1),[U,B]=v.useState(null),[R,z]=v.useState([]),[G,K]=v.useState(""),[Y,q]=v.useState(!1),[V,H]=v.useState(null);v.useEffect(()=>{const le=setTimeout(()=>{E(C)},500);return()=>{clearTimeout(le)}},[C]),v.useEffect(()=>{Q(T)},[T]);const Q=async(le="")=>{i(!0);try{const _e=le?`/api/users?search=${encodeURIComponent(le)}`:"/api/users",De=await(await ie(_e)).json();n(De),c(null)}catch(_e){c("Failed to fetch users."),console.error(_e)}finally{i(!1),o(!1)}},L=async le=>{le.preventDefault();try{await ie("/users",{method:"POST",body:JSON.stringify(j)}),h(!1),w({name:"",email:"",password:"",role:"user"}),Q()}catch(_e){c("Failed to add user."),console.error(_e)}},te=async le=>{if(le.preventDefault(),!x)return;const{password:_e,confirmPassword:Ve,...De}=_,ue={...De};if(_e){if(_e.length<6){c("Password must be at least 6 characters long.");return}if(_e!==Ve){c("Passwords do not match.");return}ue.password=_e}try{await ie(`/users/${x.id}`,{method:"PUT",body:JSON.stringify(ue)}),m(!1),b(null),k({..._,password:"",confirmPassword:""}),Q()}catch(Ae){c("Failed to update user."),console.error(Ae)}},me=async le=>{if(window.confirm("Are you sure you want to delete this user?"))try{await ie(`/users/${le}`,{method:"DELETE"}),Q()}catch(_e){c("Failed to delete user."),console.error(_e)}},X=le=>{b(le),k({name:le.name,email:le.email,role:le.role,password:"",confirmPassword:""}),m(!0)},Re=async()=>{q(!0);try{const le=await VM();z(le),le.length>0&&K(le[0].id),H(null)}catch(le){H("Failed to fetch subscription plans."),console.error(le)}finally{q(!1)}},Se=le=>{B(le),$(!0),Re()},Ee=async le=>{if(le.preventDefault(),!U||!G){c("Please select a clinic and a plan.");return}try{await ie("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:U,planId:G})}),$(!1),B(null),K(""),Q(),c(null)}catch(_e){c("Failed to manually activate clinic subscription."),console.error(_e)}},Fe=async le=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await fDe(le),Q(),c(null)}catch(_e){c("Failed to cancel subscription."),console.error(_e)}};return a&&s?r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("div",{className:"back-button",style:{width:80,height:32},children:r.jsx(ee,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(ee,{width:200,height:32})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx(ee,{width:"100%",height:40,style:{maxWidth:"300px"}}),r.jsx(ee,{width:150,height:40})]}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(le=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:120,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:180,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(ee,{width:150,height:32})})]},le))})]})]}):l&&s?r.jsx("div",{className:"error-message",children:l}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{className:"w-4 h-4"})}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:C,onChange:le=>A(le.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>h(!0),className:"add-user-button",children:"Add New User"})]}),u&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>h(!1),children:""}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:L,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:j.name,onChange:le=>w({...j,name:le.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:j.email,onChange:le=>w({...j,email:le.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:j.password,onChange:le=>w({...j,password:le.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:j.role,onChange:le=>w({...j,role:le.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),p&&x&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>m(!1),children:""}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:te,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:_.name,onChange:le=>k({..._,name:le.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:_.email,onChange:le=>k({..._,email:le.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:_.role,onChange:le=>k({..._,role:le.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"New Password (optional):"}),r.jsx("input",{type:"password",value:_.password,onChange:le=>k({..._,password:le.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm New Password:"}),r.jsx("input",{type:"password",value:_.confirmPassword,onChange:le=>k({..._,confirmPassword:le.target.value})})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),I&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>$(!1),children:""}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),Y&&r.jsx("div",{children:"Loading plans..."}),V&&r.jsx("div",{className:"error-message",children:V}),!Y&&!V&&R.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!Y&&!V&&R.length>0&&r.jsxs("form",{onSubmit:Ee,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:G,onChange:le=>K(le.target.value),required:!0,children:R.map(le=>r.jsxs("option",{value:le.id,children:[le.name," - $",le.price,"/",le.interval," ",le.period]},le.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(le=>{var ue,Ae;const _e=le.clinic_id||"N/A",Ve=((Ae=(ue=le.Clinic)==null?void 0:ue.ClinicSubscriptions)==null?void 0:Ae.some(ce=>ce.status==="active"))??!1,De=Ve?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:le.name}),r.jsx("td",{children:le.email}),r.jsx("td",{children:le.role}),r.jsx("td",{children:_e}),r.jsx("td",{children:_e!=="N/A"?r.jsx("span",{className:Ve?"pro-badge":"standard-badge",children:De}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>X(le),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>me(le.id),className:"delete-button",children:"Delete"}),le.clinic_id&&!Ve&&r.jsx("button",{onClick:()=>Se(le.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),le.clinic_id&&Ve&&r.jsx("button",{onClick:()=>Fe(le.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},le.id)})})]})]})},ERe="_modalOverlay_1dths_3",DRe="_modalContent_1dths_29",ORe="_modalHeader_1dths_55",MRe="_modalTitle_1dths_73",IRe="_keyCount_1dths_85",RRe="_modalCloseButton_1dths_107",LRe="_modalBody_1dths_135",FRe="_description_1dths_147",$Re="_keysList_1dths_161",BRe="_emptyState_1dths_173",zRe="_keyItem_1dths_191",qRe="_keyInfo_1dths_223",URe="_keyIndex_1dths_237",VRe="_keyValue_1dths_251",HRe="_deleteButton_1dths_271",GRe="_addKeySection_1dths_319",WRe="_inputField_1dths_331",KRe="_errorText_1dths_365",YRe="_successText_1dths_385",QRe="_modalFooter_1dths_405",XRe="_button_1dths_421",JRe="_buttonPrimary_1dths_447",ZRe="_buttonSecondary_1dths_465",_r={modalOverlay:ERe,modalContent:DRe,modalHeader:ORe,modalTitle:MRe,keyCount:IRe,modalCloseButton:RRe,modalBody:LRe,description:FRe,keysList:$Re,emptyState:BRe,keyItem:zRe,keyInfo:qRe,keyIndex:URe,keyValue:VRe,deleteButton:HRe,addKeySection:GRe,inputField:WRe,errorText:KRe,successText:YRe,modalFooter:QRe,button:XRe,buttonPrimary:JRe,buttonSecondary:ZRe},e4e=t=>t.length<=8?"":t.substring(0,4)+""+t.substring(t.length-4),t4e=({isOpen:t,onClose:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(!1),[h,p]=v.useState(!1),[m,x]=v.useState(!1),[b,j]=v.useState(null),[w,_]=v.useState(null),[k,C]=v.useState(null);v.useEffect(()=>{t&&(A(),s(""),_(null),C(null))},[t]);const A=async()=>{u(!0),_(null);try{const U=await ie("/api/global-settings/gemini-api-keys");if(U.ok){const R=await U.json();a(R.keys||[])}const B=await ie("/api/global-settings/app_gemini_api_key");if(B.ok){const R=await B.json();l(R.value||"")}}catch(U){console.warn("Could not fetch settings:",U)}finally{u(!1)}},T=async()=>{x(!0),_(null),C(null);try{if(!(await ie("/api/global-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"app_gemini_api_key",value:o.trim()})})).ok)throw new Error("Failed to save Primary API Key");C("Primary key saved successfully!"),setTimeout(()=>C(null),2e3)}catch(U){_(U.message||"Error saving primary key")}finally{x(!1)}},E=async()=>{if(i.trim()){p(!0),_(null),C(null);try{const U=await ie("/api/global-settings/gemini-api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:i.trim()})});if(!U.ok){const R=await U.json();throw new Error(R.message||"Failed to add API Key")}const B=await U.json();a(B.keys),s(""),C("Key added successfully!"),setTimeout(()=>C(null),2e3)}catch(U){_(U.message||"Error adding key")}finally{p(!1)}}},I=async U=>{j(U),_(null),C(null);try{const B=await ie(`/api/global-settings/gemini-api-keys/${U}`,{method:"DELETE"});if(!B.ok)throw new Error("Failed to remove API Key");const R=await B.json();a(R.keys),C("Key removed successfully!"),setTimeout(()=>C(null),2e3)}catch(B){_(B.message||"Error removing key")}finally{j(null)}},$=U=>{U.key==="Enter"&&!h&&i.trim()&&E()};return t?r.jsx("div",{className:_r.modalOverlay,children:r.jsxs("div",{className:_r.modalContent,children:[r.jsxs("div",{className:_r.modalHeader,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(eO,{size:24}),r.jsx("h3",{className:_r.modalTitle,children:"Gemini API Keys"}),n.length>0&&r.jsx("span",{className:_r.keyCount,children:n.length})]}),r.jsx("button",{onClick:e,className:_r.modalCloseButton,children:r.jsx(Ot,{size:20})})]}),r.jsxs("div",{className:_r.modalBody,children:[w&&r.jsx("div",{className:_r.errorText,children:w}),k&&r.jsx("div",{className:_r.successText,children:k}),r.jsx("p",{className:_r.description,children:"Add multiple API keys below. A random key will be picked for each API call to distribute load."}),r.jsxs("div",{className:_r.addKeySection,style:{marginBottom:"20px",borderBottom:"1px solid #eee",paddingBottom:"20px"},children:[r.jsx("h4",{style:{margin:"0 0 10px 0",fontSize:"14px",color:"#555"},children:"Primary Global API Key"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("input",{type:"text",value:o,onChange:U=>l(U.target.value),className:_r.inputField,placeholder:"Enter Primary Gemini API Key",disabled:m}),r.jsx("button",{onClick:T,className:`${_r.button} ${_r.buttonPrimary}`,disabled:m,style:{minWidth:"80px"},children:m?"Saving...":"Save"})]}),r.jsx("p",{style:{fontSize:"11px",color:"#888",marginTop:"4px"},children:"Used as a fallback if no keys are available in the pool below."})]}),r.jsx("h4",{style:{margin:"0 0 10px 0",fontSize:"14px",color:"#555"},children:"Additional API Key Pool"}),r.jsx("div",{className:_r.keysList,children:c?r.jsxs(r.Fragment,{children:[r.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px",marginBottom:"8px"}}),r.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}):n.length===0?r.jsx("div",{className:_r.emptyState,children:"No additional API keys configured."}):n.map((U,B)=>r.jsxs("div",{className:_r.keyItem,children:[r.jsxs("div",{className:_r.keyInfo,children:[r.jsxs("span",{className:_r.keyIndex,children:["#",B+1]}),r.jsx("code",{className:_r.keyValue,children:e4e(U)})]}),r.jsx("button",{className:_r.deleteButton,onClick:()=>I(B),disabled:b===B,title:"Remove this key",children:r.jsx(zn,{size:16})})]},B))}),r.jsxs("div",{className:_r.addKeySection,children:[r.jsx("input",{type:"text",value:i,onChange:U=>s(U.target.value),onKeyDown:$,className:_r.inputField,placeholder:"Paste new Gemini API Key (AIza...)",disabled:h}),r.jsxs("button",{onClick:E,className:`${_r.button} ${_r.buttonPrimary}`,disabled:h||!i.trim(),children:[r.jsx(Ln,{size:16}),h?"Adding...":"Add"]})]})]}),r.jsx("div",{className:_r.modalFooter,children:r.jsx("button",{onClick:e,className:`${_r.button} ${_r.buttonSecondary}`,children:"Close"})})]})}):null},n4e=()=>{const[t,e]=v.useState(!1);return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(gd,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(lr,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(pd,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(lr,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(zi,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]}),r.jsxs("div",{className:"admin-panel-card",onClick:()=>e(!0),style:{cursor:"pointer"},children:[r.jsx(eO,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Gemini API Keys"}),r.jsx("p",{children:"Add, remove, and manage multiple Gemini API keys for the application."})]})]}),r.jsx(t4e,{isOpen:t,onClose:()=>e(!1)})]})},eP="tutorialCurrentStep",r4e=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,u;n(!0);try{const h=await ie("/api/drugs/import-defaults",{method:"POST"}),p=await h.json();if(h.ok){i(!0);const m=((c=p.details)==null?void 0:c.added)||0,x=((u=p.details)==null?void 0:u.updated)||0,b=`Added: ${m}, Updated: ${x}`;o(b),t(!0,"Default medications imported successfully!","pharmacyImport")}else t(!1,"Failed to import medications.")}catch{t(!1,"Error importing medications.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(co,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(sg,{size:18})," Import Drugs"]})})]})},a4e=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,u;n(!0);try{const h=await ie("/api/lab-tests/import-defaults",{method:"POST"}),p=await h.json();if(h.ok){i(!0);const m=((c=p.details)==null?void 0:c.added)||0,x=((u=p.details)==null?void 0:u.updated)||0,b=`Added: ${m}, Updated: ${x}`;o(b),t(!0,"Default lab tests imported successfully!","labImport")}else t(!1,"Failed to import lab tests.")}catch{t(!1,"Error importing lab tests.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(co,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(hs,{size:18})," Import Tests"]})})]})},i4e=({onOpenCommandBar:t})=>r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),r.jsx("button",{onClick:t,className:"tutorial-button primary large-button",children:r.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",r.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),tP=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:r.jsx(ww,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:r.jsx(sg,{size:48,className:"step-icon pharmacy"}),component:r4e,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:r.jsx(hs,{size:48,className:"step-icon lab"}),component:a4e,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:r.jsx(nX,{size:48,className:"step-icon ai"}),component:i4e,actionText:null,isLast:!0}],s4e=({onClose:t,onMarkAsSeen:e})=>{const{openCommandBar:n}=Bc(),[a,i]=v.useState(()=>{const w=localStorage.getItem(eP);return w?parseInt(w,10):0}),[s,o]=v.useState(!1),[l,c]=v.useState(null),[u,h]=v.useState(null);v.useEffect(()=>{localStorage.setItem(eP,a.toString()),c(null)},[a]);const p=()=>{o(!0),setTimeout(()=>{i(w=>Math.min(w+1,tP.length-1)),o(!1)},300)},m=(w,_,k)=>{h(w),c(_),w&&(k==="pharmacyImport"||k==="labImport")&&setTimeout(p,1e3)},x=()=>{e(),t(),localStorage.removeItem(eP)},b=()=>{x(),setTimeout(()=>{n()},100)},j=tP[a];return r.jsx("div",{className:"tutorial-overlay",children:r.jsxs("div",{className:`tutorial-card ${s?"fade-out":"fade-in"}`,children:[r.jsxs("div",{className:"tutorial-visual",children:[r.jsx("div",{className:"icon-circle",children:j.icon}),r.jsx("div",{className:"step-indicators",children:tP.map((w,_)=>r.jsx("div",{className:`step-dot ${_===a?"active":""} ${_<a?"completed":""}`},_))})]}),r.jsxs("div",{className:"tutorial-content",children:[r.jsx("button",{className:"close-button",onClick:x,title:"Close Tutorial",children:r.jsx(Ot,{size:20})}),r.jsxs("div",{className:"text-content",children:[r.jsx("h2",{children:j.title}),r.jsx("p",{className:"description",children:j.description})]}),r.jsxs("div",{className:"interactive-area",children:[j.component?r.jsx(j.component,{onActionComplete:m,onOpenCommandBar:b}):null,l&&r.jsx("div",{className:`status-message ${u?"success":"error"}`,children:l})]}),r.jsxs("div",{className:"action-footer",children:[j.showSkip&&r.jsx("button",{onClick:p,className:"tutorial-button text-only",children:"Skip for now"}),j.actionText&&r.jsxs("button",{onClick:p,className:"tutorial-button primary",children:[j.actionText," ",r.jsx(Vl,{size:16})]})]})]})]})})},o4e=({isOpen:t,onClose:e,onSuccess:n,medication:a,initialPatient:i,initialItems:s})=>{const[o,l]=v.useState(""),[c,u]=v.useState([]),[h,p]=v.useState(null),[m,x]=v.useState(!1);Od(void 0,t?200:99999),v.useEffect(()=>{if(t&&a){j([{id:Date.now(),medication_name:a.medicationName,drug_id:null,quantity:a.quantity,tablets_per_day:a.tabletsPerDay||1,number_of_days:a.numberOfDays||30,directions:a.directions||"",notes:a.notes||""}]),_(a.frequencyDays);try{const Fe=new Date(a.nextDeliveryDate);isNaN(Fe.getTime())||C(Fe.toISOString().split("T")[0])}catch(Fe){console.error("Error parsing date",Fe)}p({id:a.patientId,name:a.patientName,phone:a.patientPhone,patient_token_number:a.patientToken})}else t&&(i||s)?(s&&s.length>0&&j(s),i&&p(i)):t&&!a&&!s&&(j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30),C(""),p(null),l(""))},[t,a,i,s]);const[b,j]=v.useState([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),[w,_]=v.useState(30),[k,C]=v.useState(""),[A,T]=v.useState(null),[E,I]=v.useState(""),[$,U]=v.useState([]),[B,R]=v.useState(!1),[z,G]=v.useState(!1),[K,Y]=v.useState(null),q=v.useRef(null),V=v.useRef(null);v.useEffect(()=>{if(t){const Fe=new Date;Fe.setDate(Fe.getDate()+30),C(Fe.toISOString().split("T")[0])}},[t]);const H=v.useCallback(async Fe=>{if(!Fe.trim()){u([]);return}x(!0);try{const le=await ie(`/api/patients?search=${encodeURIComponent(Fe)}&limit=10`);if(le.ok){const _e=await le.json();u(_e.patients||[])}}catch(le){console.error("Error searching patients:",le)}finally{x(!1)}},[]);v.useEffect(()=>{q.current&&clearTimeout(q.current),o&&!h?q.current=setTimeout(()=>H(o),300):u([])},[o,h,H]);const Q=v.useCallback(async Fe=>{if(!Fe.trim()){U([]);return}R(!0);try{const le=await ie(`/api/drugs?search=${encodeURIComponent(Fe)}&limit=10`);if(le.ok){const _e=await le.json();U(_e.drugs||[])}}catch(le){console.error("Error searching drugs:",le)}finally{R(!1)}},[]);v.useEffect(()=>{V.current&&clearTimeout(V.current),E&&A!==null?V.current=setTimeout(()=>Q(E),300):U([])},[E,A,Q]);const L=Fe=>{if(!Fe)return 1;const le=Fe.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return le?parseInt(le[1],10):1},te=Fe=>{p(Fe),l(`${Fe.name} (${Fe.patient_token_number})`),u([])},me=(Fe,le)=>{const _e=[...b];_e[le]={..._e[le],medication_name:Fe.name,drug_id:Fe.id,pack_size:L(Fe.pack),packs:0,loose:0,quantity:0},j(_e),T(null),I(""),U([])},X=(Fe,le,_e)=>{const Ve=[...b],De={...Ve[Fe]},ue=De.pack_size||1;if(le==="packs"||le==="loose"){const Ae=parseInt(_e)||0;le==="packs"&&(De.packs=Ae),le==="loose"&&(De.loose=Ae);const ce=De.packs||0,be=De.loose||0;De.quantity=ce*ue+be}else if(le==="tablets_per_day"||le==="number_of_days"){le==="tablets_per_day"&&(De.tablets_per_day=_e),le==="number_of_days"&&(De.number_of_days=_e);const Ae=parseFloat(De.tablets_per_day.toString())||0,ce=parseInt(De.number_of_days.toString())||0,be=Math.ceil(Ae*ce);De.quantity=be,De.packs=Math.floor(be/ue),De.loose=be%ue}else De[le]=_e;Ve[Fe]=De,j(Ve)},Re=()=>{j([...b,{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:w,directions:"",notes:"",packs:0,loose:0,pack_size:1}])},Se=Fe=>{b.length>1&&j(b.filter((le,_e)=>_e!==Fe))},Ee=async Fe=>{if(Fe.preventDefault(),Y(null),!h){Y("Please select a patient.");return}if(b.some(_e=>!_e.medication_name||_e.quantity<=0)){Y("Please ensure all items have a medication name and valid quantity.");return}G(!0);try{const _e={patient_id:h.id,items:b.map(De=>({medication_name:De.medication_name,drug_id:De.drug_id,quantity:De.quantity,tablets_per_day:De.tablets_per_day,number_of_days:De.number_of_days,directions:De.directions,notes:De.notes,frequency_days:w,next_delivery_date:k}))},Ve=await ie("/api/recurring-medications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)});if(!Ve.ok){const De=await Ve.json();throw new Error(De.message+(De.error?": "+De.error:"")||"Failed to create recurring medication.")}n(),e(),p(null),l(""),j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30)}catch(_e){Y(_e.message)}finally{G(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"add-recurring-modal",style:{maxWidth:"800px",width:"95%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Add Recurring Medication Order"}),r.jsx("button",{className:"close-btn",onClick:e,children:r.jsx(Ot,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[K&&r.jsx("div",{className:"error-message",children:K}),r.jsxs("form",{onSubmit:Ee,className:"recurring-form",children:[r.jsxs("div",{className:"order-settings-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsxs("label",{children:[r.jsx(qn,{size:16})," Patient"]}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patient...",value:o,onChange:Fe=>{l(Fe.target.value),p(null)},className:h?"selected":"unselected"}),m&&r.jsx("span",{className:"spinner",children:"..."}),o&&!h&&c.length>0&&r.jsx("ul",{className:"suggestions-list",children:c.map(Fe=>r.jsxs("li",{onClick:()=>te(Fe),children:[r.jsx("div",{className:"suggestion-name",children:Fe.name}),r.jsxs("div",{className:"suggestion-details",children:[Fe.phone,"  ",Fe.patient_token_number]})]},Fe.id))})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(Ug,{size:16})," Frequency"]}),r.jsxs("select",{value:w,onChange:Fe=>{const le=parseInt(Fe.target.value);_(le);const _e=new Date;_e.setDate(_e.getDate()+le),C(_e.toISOString().split("T")[0]);const Ve=b.map(De=>({...De,number_of_days:le}));j(Ve)},children:[r.jsx("option",{value:15,children:"Every 15 Days"}),r.jsx("option",{value:30,children:"Every 30 Days"}),r.jsx("option",{value:60,children:"Every 60 Days"}),r.jsx("option",{value:90,children:"Every 90 Days"})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(qr,{size:16})," Next Delivery"]}),r.jsx("input",{type:"date",value:k,onChange:Fe=>C(Fe.target.value)})]})]}),r.jsx("hr",{className:"divider"}),r.jsxs("div",{className:"items-header",children:[r.jsx("h4",{children:"Medications"}),r.jsxs("button",{type:"button",className:"add-item-btn",onClick:Re,children:[r.jsx(Ln,{size:14})," Add Drug"]})]}),r.jsx("div",{className:"items-list",children:b.map((Fe,le)=>r.jsxs("div",{className:"medication-item-row",children:[r.jsxs("div",{className:"row-top",children:[r.jsxs("div",{className:"form-group med-search-group",children:[r.jsx("label",{children:"Drug Name"}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drug...",value:A===le?E:Fe.medication_name,onFocus:()=>{T(le),I(Fe.medication_name)},onChange:_e=>{I(_e.target.value),X(le,"medication_name",_e.target.value)}}),A===le&&B&&r.jsx("span",{className:"spinner",children:"..."}),A===le&&E&&$.length>0&&r.jsx("ul",{className:"suggestions-list",children:$.map(_e=>r.jsxs("li",{onClick:()=>me(_e,le),children:[r.jsx("div",{className:"suggestion-name",children:_e.name}),r.jsxs("div",{className:"suggestion-details",children:["Stock: ",_e.stock]})]},_e.id))})]})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Tabs/Day"}),r.jsx("input",{type:"number",min:"0.5",step:"0.5",value:Fe.tablets_per_day,onChange:_e=>X(le,"tablets_per_day",_e.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Days"}),r.jsx("input",{type:"number",min:"1",value:Fe.number_of_days,onChange:_e=>X(le,"number_of_days",_e.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Packs"}),r.jsx("input",{type:"number",min:"0",value:Fe.packs||"",onChange:_e=>X(le,"packs",_e.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Loose"}),r.jsx("input",{type:"number",min:"0",value:Fe.loose||"",onChange:_e=>X(le,"loose",_e.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Total"}),r.jsx("input",{type:"number",value:Fe.quantity,disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]}),r.jsx("button",{type:"button",className:"remove-btn",onClick:()=>Se(le),disabled:b.length===1,children:r.jsx(zn,{size:16})})]}),r.jsxs("div",{className:"row-bottom",children:[r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Directions (e.g. 1-0-1 after food)",value:Fe.directions,onChange:_e=>X(le,"directions",_e.target.value)})}),r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Notes",value:Fe.notes,onChange:_e=>X(le,"notes",_e.target.value)})})]})]},Fe.id))}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-submit",disabled:z,children:z?"Creating...":"Create Recurring Order"})]})]})]})]})}):null},l4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(""),[c,u]=v.useState(1),[h,p]=v.useState(1),[m,x]=v.useState(0),[b,j]=v.useState(!1),[w,_]=v.useState(void 0),k=10,C=v.useRef(null);Od();const A=v.useCallback(async(R,z)=>{a(!0),s(null);try{let G=`/api/recurring-medications?page=${R}&limit=${k}`;z&&(G+=`&search=${encodeURIComponent(z)}`);const K=await ie(G);if(!K.ok)throw new Error("Failed to fetch recurring medications.");const Y=await K.json();e(Y.medications),p(Y.totalPages),x(Y.total),u(Y.page)}catch(G){console.error(G),s(G.message||"An error occurred while fetching data.")}finally{a(!1)}},[]);v.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{A(c,o)},500),()=>{C.current&&clearTimeout(C.current)}),[o,c,A]);const T=R=>{l(R.target.value),u(1)},E=R=>{R>=1&&R<=h&&u(R)},I=R=>{_(R),j(!0)},$=()=>{A(c,o),j(!1),_(void 0)},U=R=>R===30?"Every 30 Days (Monthly)":R===15?"Every 15 Days":`Every ${R} Days`,B=R=>{switch(R){case"active":return"status-pill status-pill-active";case"paused":return"status-pill status-pill-paused";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill"}};return r.jsxs("div",{className:"refill-reminders-container",children:[r.jsxs("div",{className:"refill-header",children:[r.jsx("h3",{className:"refill-title",children:"Recurring Medications"}),r.jsxs("div",{className:"refill-actions",children:[r.jsxs("button",{className:"refill-action-button btn-add",onClick:()=>{_(void 0),j(!0)},children:[r.jsx(cs,{size:16})," Add New"]}),r.jsxs("div",{className:"search-box",children:[r.jsx("input",{type:"text",placeholder:"Search patient, phone, medication...",value:o,onChange:T}),r.jsx(fn,{size:18,className:"search-icon"})]})]})]}),i&&r.jsx("div",{className:"error-message-box",children:i}),r.jsx("div",{className:"refill-table-container",children:n?r.jsx("div",{className:"loading-pulse",children:"Loading..."}):t.length===0?r.jsx("div",{className:"empty-state",children:"No recurring medications found."}):r.jsx("div",{className:"refill-grouped-list",children:Object.values(t.reduce((R,z)=>{const G=z.patientId;return R[G]||(R[G]={patientId:z.patientId,patientName:z.patientName,patientPhone:z.patientPhone,patientToken:z.patientToken,medications:[]}),R[G].medications.push(z),R},{})).map(R=>r.jsxs("div",{className:"patient-medication-group-card",children:[r.jsxs("div",{className:"group-header",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("h4",{className:"patient-name",children:R.patientName}),r.jsxs("span",{className:"patient-meta",children:["Token: ",R.patientToken,"  Phone: ",R.patientPhone]})]}),r.jsx("div",{className:"group-actions"})]}),r.jsxs("table",{className:"refill-table group-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Medication"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Frequency"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:R.medications.map(z=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"med-name",children:z.medicationName}),(z.tabletsPerDay||z.numberOfDays||z.directions)&&r.jsxs("div",{className:"med-usage-details",style:{fontSize:"0.8em",color:"#666"},children:[z.tabletsPerDay&&r.jsxs("span",{children:[z.tabletsPerDay," tabs/day  "]}),z.numberOfDays&&r.jsxs("span",{children:[z.numberOfDays," days "]})]}),z.notes&&r.jsxs("div",{className:"med-notes",children:["Note: ",z.notes]})]}),r.jsx("td",{children:z.quantity}),r.jsx("td",{children:r.jsx("span",{className:"frequency-badge",children:U(z.frequencyDays)})}),r.jsx("td",{children:r.jsx("div",{className:"date-display",children:new Date(z.nextDeliveryDate).toLocaleDateString()})}),r.jsx("td",{children:r.jsx("span",{className:B(z.status),children:z.status})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",title:"Edit",onClick:()=>I(z),children:r.jsx(Ui,{size:16})}),r.jsx("button",{className:"action-btn delete",title:"Delete/Cancel",children:r.jsx(zn,{size:16})})]})})]},z.id))})]})]},R.patientId))})}),!n&&h>1&&r.jsxs("div",{className:"pagination-container",children:[r.jsxs("span",{className:"pagination-info",children:["Page ",c," of ",h," (Total ",m,")"]}),r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("button",{onClick:()=>E(c-1),disabled:c===1,className:"page-btn",children:[r.jsx(Bf,{size:16})," Prev"]}),r.jsxs("button",{onClick:()=>E(c+1),disabled:c===h,className:"page-btn",children:["Next ",r.jsx(Vl,{size:16})]})]})]}),r.jsx(o4e,{isOpen:b,onClose:()=>{j(!1),_(void 0)},onSuccess:$,medication:w})]})},c4e=()=>{const t=Mt(),e=Ur();return v.useEffect(()=>{const n=new URLSearchParams(e.search),a=n.get("token"),i=n.get("caseDetails");a?(async()=>{try{const o=await ie(`/api/patients?search=${a}&limit=1`);if(!o.ok)throw new Error("Failed to fetch patient by token");const c=(await o.json()).patients[0];if(!c)throw new Error("Patient with the given token not found");const u=await ie(`/api/queue/patient/${c.id}/latest`);if(u.ok){const m=await u.json();if(m!=null&&m._id){t(`/dashboard/edit-complaint/${m._id}`,{state:{initialComplaint:i}});return}}const h=await ie("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,complaint:i})});if(!h.ok)throw new Error("Failed to create queue entry");const p=await h.json();if(p!=null&&p.id)t(`/dashboard/edit-complaint/${p.id}`,{state:{initialComplaint:i}});else throw new Error("Failed to get ID from new queue entry.")}catch(o){console.error("Error handling complaint URL:",o),t("/dashboard/search-patient")}})():t("/dashboard/search-patient")},[e,t]),r.jsx("div",{children:"Loading..."})},ez=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(null),[l,c]=v.useState(!1),[u,h]=v.useState(!1),[p,m]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState(!1),[_,k]=v.useState(!1),[C,A]=v.useState(null),[T,E]=v.useState([]),[I,$]=v.useState(null),[U,B]=v.useState(""),[R,z]=v.useState(""),[G,K]=v.useState(""),[Y,q]=v.useState(""),[V,H]=v.useState(""),[Q,L]=v.useState(""),[te,me]=v.useState(""),[X,Re]=v.useState(""),[Se,Ee]=v.useState(""),[Fe,le]=v.useState(""),[_e,Ve]=v.useState(""),[De,ue]=v.useState("cash"),Ae=v.useCallback(async()=>{i(!0),o(null);try{const he=await ie("/api/distributors");if(!he.ok)throw new Error(`Failed to fetch distributors: ${he.statusText}`);const Ie=await he.json();n(Ie)}catch(he){console.error("Failed to fetch distributors:",he),o(he.message||"Failed to load distributors.")}finally{i(!1)}},[]);v.useEffect(()=>{Ae()},[Ae]);const ce=async he=>{he.preventDefault(),o(null);try{const Ie=await ie("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:U,contact_person:R,phone:G,email:Y,address:V,gst_number:Q,drug_license_number:te})});if(!Ie.ok){const nt=await Ie.json();throw new Error(nt.message||"Failed to add distributor.")}de(),Ae()}catch(Ie){console.error("Error adding distributor:",Ie),o(Ie.message||"Failed to add distributor.")}},be=async he=>{if(he.preventDefault(),o(null),!!C)try{const Ie=await ie(`/api/distributors/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:U,contact_person:R,phone:G,email:Y,address:V,gst_number:Q,drug_license_number:te})});if(!Ie.ok){const nt=await Ie.json();throw new Error(nt.message||"Failed to update distributor.")}re(),Ae()}catch(Ie){console.error("Error updating distributor:",Ie),o(Ie.message||"Failed to update distributor.")}},ke=async()=>{if(o(null),!!C)try{const he=await ie(`/api/distributors/${C.id}`,{method:"DELETE"});if(!he.ok){const Ie=await he.json();throw new Error(Ie.message||"Failed to delete distributor.")}je(),Ae()}catch(he){console.error("Error deleting distributor:",he),o(he.message||"Failed to delete distributor.")}},Ce=v.useCallback(async he=>{o(null);try{const Ie=await ie(`/api/distributors/${he}/payments`);if(!Ie.ok)throw new Error(`Failed to fetch payments: ${Ie.statusText}`);const Be=(await Ie.json()).map(wt=>({...wt,order_value:parseFloat(wt.order_value),amount_paid:parseFloat(wt.amount_paid),balance_remaining:parseFloat(wt.balance_remaining)}));E(Be);const Ge=await ie(`/api/distributors/${he}/balance`);if(!Ge.ok)throw new Error(`Failed to fetch balance: ${Ge.statusText}`);const it=await Ge.json();$({totalOrderValue:parseFloat(it.totalOrderValue),totalAmountPaid:parseFloat(it.totalAmountPaid),remainingBalance:parseFloat(it.remainingBalance)})}catch(Ie){console.error("Error fetching payments/balance:",Ie),o(Ie.message||"Failed to load payments or balance.")}},[]),ne=async he=>{if(he.preventDefault(),o(null),!!C)try{const Ie=await ie(`/api/distributors/${C.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:X,order_value:parseFloat(Se||"0"),amount_paid:parseFloat(Fe||"0"),notes:_e,payment_mode:De})});if(!Ie.ok){const nt=await Ie.json();throw new Error(nt.message||"Failed to add payment.")}k(!1),await Ce(C.id),w(!0),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(Ie){console.error("Error adding payment:",Ie),o(Ie.message||"Failed to add payment.")}},ye=()=>{B(""),z(""),K(""),q(""),H(""),L(""),me(""),o(null),h(!0)},de=()=>{h(!1)},se=he=>{A(he),B(he.name),z(he.contact_person||""),K(he.phone||""),q(he.email||""),H(he.address||""),L(he.gst_number||""),me(he.drug_license_number||""),o(null),m(!0)},re=()=>{m(!1),A(null)},oe=he=>{A(he),o(null),b(!0)},je=()=>{b(!1),A(null)},Oe=he=>{A(he),Ce(he.id),o(null),w(!0)},J=()=>{w(!1),A(null),E([]),$(null)},xe=he=>{A(he),Re(new Date().toISOString().split("T")[0]),Ee("0"),le("0"),Ve(""),ue("cash"),o(null),k(!0)},ge=()=>{k(!1),A(null)};return a?r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",style:{marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(ee,{width:80,height:36}),r.jsx(ee,{width:200,height:32})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx(ee,{width:150,height:36}),r.jsx(ee,{width:150,height:36}),r.jsx(ee,{width:180,height:36})]})]}),r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact Person"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(he=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:120,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:180,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:100,height:30})})]},he))})]})})]}):s?r.jsxs("div",{className:"error-indicator",children:["Error: ",s]}):r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>t(-1),className:"dmp-button dmp-button-secondary",title:"Go Back",children:[r.jsx(en,{size:20})," Back"]}),r.jsx("h2",{children:"Distributor Management"})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("div",{className:"view-mode-toggle",style:{display:"flex",gap:"8px"},children:[r.jsxs("button",{onClick:()=>c(!1),className:`dmp-button ${l?"dmp-button-secondary":"dmp-button-primary"}`,title:"List View",children:[r.jsx(Rb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>c(!0),className:`dmp-button ${l?"dmp-button-primary":"dmp-button-secondary"}`,title:"Excel Mode (Edit)",children:[r.jsx(kf,{size:18})," Excel"]})]}),r.jsxs("button",{onClick:ye,className:"dmp-button dmp-button-primary",children:[r.jsx(cs,{size:18}),"Add Distributor"]})]})]}),(()=>{const he=e.reduce((nt,Be)=>nt+parseFloat(Be.remainingBalance||"0"),0),Ie=he>=0;return r.jsxs("div",{className:"stats-container",children:[r.jsxs("div",{className:`stat-card ${Ie?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Total Balance"}),r.jsxs("span",{className:"value",children:["",he.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Distributors"}),r.jsx("span",{className:"value",children:e.length})]})]})})(),r.jsx("div",{className:"table-wrapper",children:l?r.jsx(Hb,{columns:[{key:"name",label:"Name",editable:!0,type:"text"},{key:"contact_person",label:"Contact Person",editable:!0,type:"text"},{key:"phone",label:"Phone",editable:!0,type:"text"},{key:"email",label:"Email",editable:!0,type:"text"},{key:"address",label:"Address",editable:!0,type:"text"},{key:"gst_number",label:"GST Number",editable:!0,type:"text"},{key:"drug_license_number",label:"Drug License",editable:!0,type:"text"}],data:e,editable:!0,showRowNumbers:!0,title:"Distributors",onSave:async he=>{const Ie=he.map(async nt=>{const Be=e.find(Ge=>Ge.id===nt.id);if(Be&&JSON.stringify(Be)!==JSON.stringify(nt))return ie(`/api/distributors/${nt.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)})});try{await Promise.all(Ie),Ae()}catch(nt){alert("Error saving changes"),console.error(nt)}}}):r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name / Contact"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Tax / License"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"2rem",color:"var(--dmp-text-secondary)"},children:"No distributors found."})}):e.map(he=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"primary-text",children:he.name}),r.jsx("div",{className:"secondary-text",children:he.contact_person})]}),r.jsxs("td",{children:[r.jsx("div",{className:"secondary-text",children:he.phone||"-"}),r.jsx("div",{className:"secondary-text",children:he.email||"-"}),r.jsx("div",{className:"secondary-text",children:he.address||"-"})]}),r.jsxs("td",{children:[r.jsxs("div",{className:"secondary-text",children:["GST: ",he.gst_number||"-"]}),r.jsxs("div",{className:"secondary-text",children:["DL: ",he.drug_license_number||"-"]})]}),r.jsx("td",{children:r.jsxs("span",{className:`status-badge ${parseFloat(he.remainingBalance||"0")>0?"balance-ok":"balance-owed"}`,children:["",he.remainingBalance||"0.00"]})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>Oe(he),className:"dmp-button-icon",title:"View Payments & Balance",children:r.jsx(qm,{size:18})}),r.jsx("button",{onClick:()=>xe(he),className:"dmp-button-icon",title:"Add Payment",children:r.jsx(Nw,{size:18})}),r.jsx("button",{onClick:()=>se(he),className:"dmp-button-icon edit",title:"Edit Distributor",children:r.jsx(Ui,{size:18})}),r.jsx("button",{onClick:()=>oe(he),className:"dmp-button-icon delete",title:"Delete Distributor",children:r.jsx(zn,{size:18})})]})})]},he.id))})]})}),u&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:de,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Add New Distributor"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem",padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:s}),r.jsxs("form",{onSubmit:ce,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"name",children:"Name:"}),r.jsx("input",{type:"text",id:"name",className:"dmp-input",style:{padding:"0.6rem"},value:U,onChange:he=>B(he.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"contact_person",className:"dmp-input",style:{padding:"0.6rem"},value:R,onChange:he=>z(he.target.value)})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"phone",className:"dmp-input",style:{padding:"0.6rem"},value:G,onChange:he=>K(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"email",children:"Email:"}),r.jsx("input",{type:"email",id:"email",className:"dmp-input",style:{padding:"0.6rem"},value:Y,onChange:he=>q(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"address",children:"Address:"}),r.jsx("textarea",{id:"address",className:"dmp-textarea",style:{padding:"0.6rem",minHeight:"60px"},value:V,onChange:he=>H(he.target.value)})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"gst_number",className:"dmp-input",style:{padding:"0.6rem"},value:Q,onChange:he=>L(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"drug_license_number",children:"Drug License:"}),r.jsx("input",{type:"text",id:"drug_license_number",className:"dmp-input",style:{padding:"0.6rem"},value:te,onChange:he=>me(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("button",{type:"button",onClick:de,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Add Distributor"})]})]})]})}),p&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:re,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Edit Distributor"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem",padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:s}),r.jsxs("form",{onSubmit:be,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-name",children:"Name:"}),r.jsx("input",{type:"text",id:"edit-name",className:"dmp-input",style:{padding:"0.6rem"},value:U,onChange:he=>B(he.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"edit-contact_person",className:"dmp-input",style:{padding:"0.6rem"},value:R,onChange:he=>z(he.target.value)})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"edit-phone",className:"dmp-input",style:{padding:"0.6rem"},value:G,onChange:he=>K(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-email",children:"Email:"}),r.jsx("input",{type:"email",id:"edit-email",className:"dmp-input",style:{padding:"0.6rem"},value:Y,onChange:he=>q(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-address",children:"Address:"}),r.jsx("textarea",{id:"edit-address",className:"dmp-textarea",style:{padding:"0.6rem",minHeight:"60px"},value:V,onChange:he=>H(he.target.value)})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"edit-gst_number",className:"dmp-input",style:{padding:"0.6rem"},value:Q,onChange:he=>L(he.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-drug_license_number",children:"Drug License:"}),r.jsx("input",{type:"text",id:"edit-drug_license_number",className:"dmp-input",style:{padding:"0.6rem"},value:te,onChange:he=>me(he.target.value)})]})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("button",{type:"button",onClick:re,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Save Changes"})]})]})]})}),x&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:je,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Confirm Delete"}),r.jsxs("p",{children:['Are you sure you want to delete distributor "',C.name,'"?']}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:je,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ke,className:"dmp-button dmp-button-primary",style:{backgroundColor:"var(--dmp-danger-color)"},children:"Delete"})]})]})}),j&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal printable-section",style:{maxWidth:"900px"},children:[r.jsx("button",{onClick:J,className:"dmp-modal-close",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.5rem",marginBottom:"1rem"},children:[r.jsxs("h3",{className:"dmp-modal-title",style:{marginBottom:0},children:["Ledger: ",C.name]}),r.jsxs("button",{onClick:()=>window.print(),className:"dmp-button dmp-button-primary",style:{padding:"0.4rem 0.8rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"8px"},title:"Print Ledger",children:[r.jsx(Tf,{size:14})," Print Ledger"]})]}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),I&&r.jsxs("div",{className:"stats-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem",marginBottom:"1.25rem"},children:[r.jsxs("div",{className:"stat-card",style:{padding:"0.75rem",border:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Order Value"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem"},children:["",I.totalOrderValue.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"stat-card",style:{padding:"0.75rem",border:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Total Paid"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem",color:"var(--dmp-success-color)"},children:["",I.totalAmountPaid.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:`stat-card ${I.remainingBalance>0?"positive":"negative"}`,style:{padding:"0.75rem",border:"1px solid",borderColor:I.remainingBalance>0?"rgba(0, 208, 132, 0.2)":"rgba(255, 77, 79, 0.2)",backgroundColor:I.remainingBalance>0?"rgba(0, 208, 132, 0.05)":"rgba(255, 77, 79, 0.05)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Balance"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem",color:I.remainingBalance>0?"var(--dmp-success-color)":"var(--dmp-danger-color)"},children:["",I.remainingBalance.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsx("h4",{style:{fontSize:"1rem",marginTop:"1rem",marginBottom:"0.5rem"},children:"Payment History"}),T.length===0?r.jsx("p",{children:"No payments recorded for this distributor."}):r.jsx("div",{className:"table-wrapper",style:{boxShadow:"none",border:"1px solid var(--dmp-bg-primary)"},children:r.jsxs("table",{className:"dmp-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Date"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Order"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Paid"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Balance"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Mode"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Notes"})]})}),r.jsx("tbody",{children:T.map(he=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(he.payment_date).toLocaleDateString()}),r.jsxs("td",{"data-label":"Order",style:{fontWeight:500},children:["",he.order_value.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsxs("td",{"data-label":"Paid",style:{fontWeight:500,color:"var(--dmp-success-color)"},children:["",he.amount_paid.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsxs("td",{"data-label":"Balance",style:{fontWeight:600},children:["",he.balance_remaining.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsx("td",{"data-label":"Mode",children:he.payment_mode?he.payment_mode.charAt(0).toUpperCase()+he.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:he.notes||"",children:he.notes||"-"})]},he.id))})]})}),r.jsx("div",{className:"dmp-modal-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",onClick:J,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Close"})})]})}),_&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"420px"},children:[r.jsx("button",{onClick:ge,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Add Payment"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:ne,children:[r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_date",children:"Date:"}),r.jsx("input",{type:"date",id:"payment_date",className:"dmp-input",value:X,onChange:he=>Re(he.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_mode",children:"Mode:"}),r.jsxs("select",{id:"payment_mode",className:"dmp-select",value:De,onChange:he=>ue(he.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"order_value",children:"Order Value:"}),r.jsx("input",{type:"number",id:"order_value",className:"dmp-input",value:Se,onChange:he=>Ee(he.target.value),step:"0.01"})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"amount_paid",children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount_paid",className:"dmp-input",value:Fe,onChange:he=>le(he.target.value),step:"0.01"})]})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",className:"dmp-textarea",value:_e,onChange:he=>Ve(he.target.value),rows:2,style:{resize:"none"}})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"1.25rem"},children:[r.jsx("button",{type:"button",onClick:ge,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Add Payment"})]})]})]})})]})},tw=t=>{if(!t)return"";let e=t.toLowerCase();return e=e.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),e=e.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),e=e.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),e},u4e=(t,e)=>{if(!t||!e||e.length===0)return;const n=tw(t);let a=e.find(o=>tw(o.name)===n);if(a)return a;let i=e.find(o=>tw(o.name).includes(n));if(i)return i;let s=e.find(o=>n.includes(tw(o.name)));if(s)return s},d4e=({isOpen:t,onClose:e,excelHeaders:n,onConfirm:a,availableFields:i})=>{const[s,o]=v.useState({});if(v.useEffect(()=>{t&&c()},[t,n,i]),!t)return null;const l=(h,p)=>{o(m=>({...m,[h]:p}))},c=()=>{const h={};n.forEach(p=>{const m=i.map(b=>({name:b})),x=u4e(p,m);x&&(h[p]=x.name)}),o(h)},u=()=>{const h={};for(const p in s)s[p]&&s[p]!=="none"&&(h[p]=s[p]);a(h),e()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content excel-mapping-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h3",{children:"Match File Columns"}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Ot,{size:18})})]}),r.jsx("p",{className:"modal-description",children:'Match file columns to app fields. Use "Auto Match" for suggestions.'}),r.jsx("div",{className:"modal-actions-top",children:r.jsx("button",{type:"button",onClick:c,className:"button-auto-match",children:"Auto Match"})}),r.jsxs("div",{className:"column-mapping-grid",children:[r.jsx("div",{className:"grid-header",children:"Excel Column"}),r.jsx("div",{className:"grid-header",children:"App Field"}),n.map((h,p)=>r.jsxs(Te.Fragment,{children:[r.jsx("div",{className:"excel-header-cell",children:h}),r.jsx("div",{className:"app-field-cell",children:r.jsxs("select",{value:s[h]||"",onChange:m=>l(h,m.target.value),className:"app-field-select",children:[r.jsx("option",{value:"",children:"-- Select Field --"}),r.jsx("option",{value:"none",children:"None (Ignore Column)"}),i.map((m,x)=>r.jsx("option",{value:m,children:m==="name"?"Composition Name":m==="brand_name"?"Brand Name":m==="price"?"MRP":m==="buying_price"?"Rate":m==="unit"?"Pack":m==="batch"?"Batch":m==="hsn_code"?"HSN Code":m==="mfg"?"MFG":m==="loose_quantity"?"Loose":m.replace(/_/g," ").replace(/\b\w/g,b=>b.toUpperCase())},x))]})})]},p))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:u,className:"button-submit",children:"Confirm Mapping"})]})]})})},h4e=({entityType:t,config:e,values:n,onChange:a,className:i=""})=>{const o=(e[t]||[]).filter(c=>c.type!=="computed");if(o.length===0)return null;const l=c=>{const u=n[c.key]??"";switch(c.type){case"number":return r.jsx("input",{type:"number",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:h=>a(c.key,h.target.value===""?null:parseFloat(h.target.value)),className:"custom-text-input mt-1",placeholder:c.label,required:c.required});case"date":return r.jsx("input",{type:"date",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:h=>a(c.key,h.target.value||null),className:"custom-text-input mt-1",required:c.required});case"boolean":return r.jsx("input",{type:"checkbox",id:`custom_${c.key}`,name:`custom_${c.key}`,checked:!!u,onChange:h=>a(c.key,h.target.checked),className:"custom-checkbox mt-1"});case"text":default:return r.jsx("input",{type:"text",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:h=>a(c.key,h.target.value||null),className:"custom-text-input mt-1",placeholder:c.label,required:c.required})}};return r.jsxs("div",{className:`custom-fields-section ${i}`,children:[r.jsx("h4",{className:"custom-fields-title",children:"Custom Fields"}),r.jsx("div",{className:"custom-fields-grid",children:o.map(c=>r.jsxs("div",{className:"custom-field-item",children:[r.jsxs("label",{htmlFor:`custom_${c.key}`,className:"form-label",children:[c.label,c.required&&r.jsx("span",{className:"required-star",children:"*"})]}),l(c)]},c.key))})]})},f4e=({isOpen:t,onClose:e,onDrugAddedToPurchase:n,customColumnsConfig:a={}})=>{const[i,s]=v.useState({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),[o,l]=v.useState(null),[c,u]=v.useState(!1),[h,p]=v.useState(!1),m=v.useRef(null),x=v.useRef(null),b=v.useRef(null);v.useEffect(()=>{t&&(s({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),l(null),u(!1),p(!1))},[t]),v.useEffect(()=>{const k=A=>{A.key==="Tab"&&x.current===document.activeElement&&(h||(p(!0),setTimeout(()=>{var T;(T=b.current)==null||T.focus()},0),A.preventDefault()))},C=A=>{m.current&&!m.current.contains(A.target)&&p(!1)};return document.addEventListener("keydown",k),document.addEventListener("mousedown",C),()=>{document.removeEventListener("keydown",k),document.removeEventListener("mousedown",C)}},[h]);const j=k=>{const{name:C,value:A,type:T}=k.target;s(E=>({...E,[C]:T==="number"?parseFloat(A)||null:A}))},w=(k,C)=>{s(A=>({...A,custom_fields:{...A.custom_fields,[k]:C}}))},_=k=>{if(k.preventDefault(),l(null),u(!0),i.mrp===void 0||i.stock===void 0){l("MRP and Stock Quantity are required."),u(!1);return}const C={...i,name:i.name===""?null:i.name,composition:i.composition===""?null:i.composition,rate:i.rate===0?null:i.rate,expiry_date:i.expiry_date===""?null:i.expiry_date,gst:i.gst===0?null:i.gst,margin:i.margin===0?null:i.margin,discount:i.discount===0?null:i.discount,brand_name:i.brand_name===""?null:i.brand_name,batch:i.batch===""?null:i.batch,hsn_code:i.hsn_code===""?null:i.hsn_code,mfg:i.mfg===""?null:i.mfg,loose:i.loose===0?null:i.loose,custom_fields:i.custom_fields||{}};n(C),u(!1),e()};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content add-drug-form-container",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:e,className:"cancel-button",title:"Close",children:r.jsx(Ot,{size:18})})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("form",{onSubmit:_,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid-2",children:[r.jsxs("div",{className:"span-2 form-group",children:[r.jsxs("label",{htmlFor:"name",className:"form-label",children:["Composition Name",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Il,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. Optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",value:i.name||"",onChange:j,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})]}),r.jsxs("div",{className:"span-2 form-group",children:[r.jsxs("label",{htmlFor:"brand_name",className:"form-label",children:["Brand Name",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Il,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. Optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:i.brand_name||"",onChange:j,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"mrp",className:"form-label",children:["MRP () *",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Il,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Price for the pack size."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"mrp",required:!0,step:"0.01",min:"0",value:i.mrp||"",onChange:j,className:"custom-text-input",placeholder:"0.00",tabIndex:3})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"stock",className:"form-label",children:["Quantity *",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Il,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Number of packs in stock."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,step:"1",min:"0",value:i.stock||"",onChange:j,className:"custom-text-input",placeholder:"0",tabIndex:4})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pack",className:"form-label",children:"Pack (e.g., strip)"}),r.jsx("input",{type:"text",name:"pack",id:"pack",value:i.pack||"",onChange:j,className:"custom-text-input",placeholder:"e.g., strip",tabIndex:5})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:i.expiry_date||"",onChange:j,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:i.box_number||"",onChange:j,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[r.jsxs("button",{type:"button",onClick:()=>p(!h),className:"form-button w-full text-left",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},tabIndex:8,ref:x,children:["Others",r.jsx("span",{children:h?"":"+"})]}),h&&r.jsxs("div",{className:"form-grid-2",style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary, #f9fafb)",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("div",{className:"span-2 form-group",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:2,value:i.description||"",onChange:j,className:"custom-text-input",tabIndex:9,style:{minHeight:"60px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"rate",step:"0.01",min:"0",value:i.rate??"",onChange:j,placeholder:"Buying Price",className:"custom-text-input",tabIndex:10,ref:b})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:i.gst??"",onChange:j,placeholder:"5",className:"custom-text-input",tabIndex:11})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:i.margin??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:i.discount??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"batch",value:i.batch||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:14})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:i.hsn_code||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"mfg",value:i.mfg||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Qty"}),r.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:i.loose??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:17})]})]})]})]}),r.jsx("div",{style:{marginTop:"1rem"},children:r.jsx(h4e,{entityType:"drugs",config:a,values:i.custom_fields||{},onChange:w})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:e,disabled:c,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:19,children:c?"Adding...":"Add Drug"})]})]})]})}):null},p4e=({purchaseRows:t,onCellChange:e,onRemoveDrug:n,onAddEmptyRow:a})=>{const i=v.useRef(new Map),s=["name","mrp","stock","pack","expiry_date","rate","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],o=(l,c,u)=>{if(l.key==="Tab"){l.preventDefault();const h=s.indexOf(u);if(h!==-1){const p=(h+1)%s.length,m=s[p],x=i.current.get(`${c}-${m}`);x==null||x.focus()}}};return t.length===0?r.jsxs("div",{className:"no-drugs-message",children:[r.jsx("p",{children:"No drugs added to the purchase list yet."}),r.jsxs("button",{onClick:a,className:"action-button add-drug-to-table-button",children:[r.jsx(cs,{size:18,className:"button-icon"}),"Add the first drug"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"purchase-drugs-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Composition Name"}),r.jsx("th",{children:"MRP ()"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Pack"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Rate ()"}),r.jsx("th",{children:"Brand Name"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{children:"GST (%)"}),r.jsx("th",{children:"Discount (%)"}),r.jsx("th",{children:"Margin (%)"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"HSN Code"}),r.jsx("th",{children:"MFG"}),r.jsx("th",{children:"Loose"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map((l,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("input",{type:"text",value:l.name||"",onChange:u=>e(u,l.id,"name"),onKeyDown:u=>o(u,l.id,"name"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-name`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.mrp||"",onChange:u=>e(u,l.id,"mrp"),onKeyDown:u=>o(u,l.id,"mrp"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-mrp`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.stock||"",onChange:u=>e(u,l.id,"stock"),onKeyDown:u=>o(u,l.id,"stock"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-stock`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.pack||"",onChange:u=>e(u,l.id,"pack"),onKeyDown:u=>o(u,l.id,"pack"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-pack`,u)}})}),r.jsx("td",{children:l.supplier||"N/A"}),r.jsx("td",{children:r.jsx("input",{type:"date",value:l.expiry_date||"",onChange:u=>e(u,l.id,"expiry_date"),onKeyDown:u=>o(u,l.id,"expiry_date"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-expiry_date`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.rate||"",onChange:u=>e(u,l.id,"rate"),onKeyDown:u=>o(u,l.id,"rate"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-rate`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.brand_name||"",onChange:u=>e(u,l.id,"brand_name"),onKeyDown:u=>o(u,l.id,"brand_name"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-brand_name`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.box_number||"",onChange:u=>e(u,l.id,"box_number"),onKeyDown:u=>o(u,l.id,"box_number"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-box_number`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.gst||"",onChange:u=>e(u,l.id,"gst"),onKeyDown:u=>o(u,l.id,"gst"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-gst`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.discount||"",onChange:u=>e(u,l.id,"discount"),onKeyDown:u=>o(u,l.id,"discount"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-discount`,u)}})}),r.jsx("td",{children:(()=>{const u=l.mrp||0,h=l.rate||0,p=l.gst!==null&&l.gst!==void 0?l.gst/100*h:0,m=l.discount!==null&&l.discount!==void 0?l.discount/100*u:0,x=u-(h+p)-m;return`${(u>0?x/u*100:0).toFixed(2)}%`})()}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.batch||"",onChange:u=>e(u,l.id,"batch"),onKeyDown:u=>o(u,l.id,"batch"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-batch`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.hsn_code||"",onChange:u=>e(u,l.id,"hsn_code"),onKeyDown:u=>o(u,l.id,"hsn_code"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-hsn_code`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.mfg||"",onChange:u=>e(u,l.id,"mfg"),onKeyDown:u=>o(u,l.id,"mfg"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-mfg`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.loose||"",onChange:u=>e(u,l.id,"loose"),onKeyDown:u=>o(u,l.id,"loose"),className:"editable-cell-input",ref:u=>{l.id&&i.current.set(`${l.id}-loose`,u)}})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>n(l.id),className:"delete-button",title:"Remove Item",children:r.jsx(zn,{size:16})})})]},l.id||c))})]})})},m4e="_container_7ak2k_7",g4e="_header_7ak2k_207",y4e="_backButton_7ak2k_221",x4e="_title_7ak2k_265",v4e="_stickyActionBar_7ak2k_287",b4e="_actionRow_7ak2k_317",j4e="_inputWrapper_7ak2k_335",w4e="_inputIcon_7ak2k_345",N4e="_input_7ak2k_335",S4e="_quickDistributors_7ak2k_401",_4e="_distributorChip_7ak2k_417",C4e="_distributorChipIcon_7ak2k_463",k4e="_selectedInfo_7ak2k_473",T4e="_resultsDropdown_7ak2k_503",A4e="_resultItem_7ak2k_537",P4e="_buttonGroup_7ak2k_565",E4e="_button_7ak2k_565",D4e="_buttonPrimary_7ak2k_609",O4e="_buttonSecondary_7ak2k_631",M4e="_buttonAccent_7ak2k_653",I4e="_buttonDisabled_7ak2k_675",R4e="_tableSection_7ak2k_691",L4e="_cardTitle_7ak2k_707",F4e="_cardIcon_7ak2k_727",$4e="_footer_7ak2k_947",B4e="_totalValue_7ak2k_981",z4e="_footerControls_7ak2k_1005",q4e="_paidInputGroup_7ak2k_1017",U4e="_paidLabel_7ak2k_1029",V4e="_paidInput_7ak2k_1017",H4e="_errorMsg_7ak2k_1075",pn={container:m4e,header:g4e,backButton:y4e,title:x4e,stickyActionBar:v4e,actionRow:b4e,inputWrapper:j4e,inputIcon:w4e,input:N4e,quickDistributors:S4e,distributorChip:_4e,distributorChipIcon:C4e,selectedInfo:k4e,resultsDropdown:T4e,resultItem:A4e,buttonGroup:P4e,button:E4e,buttonPrimary:D4e,buttonSecondary:O4e,buttonAccent:M4e,buttonDisabled:I4e,tableSection:R4e,cardTitle:L4e,cardIcon:F4e,footer:$4e,totalValue:B4e,footerControls:z4e,paidInputGroup:q4e,paidLabel:U4e,paidInput:V4e,errorMsg:H4e},tz=()=>{const t=Mt(),{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:u,setDistributors:h}=Wz(),[p,m]=v.useState(!1),[x,b]=v.useState(!0),j=v.useRef(null),w=v.useRef(null),[_,k]=v.useState(!1),C=v.useRef(null),[A,T]=v.useState(!1),[E,I]=v.useState([]),[$,U]=v.useState(null),[B,R]=v.useState(null),[z,G]=v.useState(!1),[K,Y]=v.useState([]),q=["name","description","mrp","stock","pack","supplier","expiry_date","rate","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"];v.useEffect(()=>{(async()=>{b(!0);try{const ke=await ie("/api/distributors?limit=4");if(ke.ok){const Ce=await ke.json();Y(Array.isArray(Ce)?Ce.slice(0,4):[])}}catch(ke){console.error("Failed to fetch initial distributors",ke)}finally{b(!1)}})()},[]);const V=()=>{const ke={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",mrp:0,stock:0,pack:"",supplier:a?a.name:"",expiry_date:"",rate:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};n(Ce=>[...Ce,ke])},H=async(be,ke)=>{if(!be){R("No file provided for import.");return}if(!a){R("Please select a distributor before importing.");return}m(!0),R(null);const Ce=new FormData;Ce.append("inventoryFile",be),Ce.append("columnMapping",JSON.stringify(ke));try{const ne=await ie("/api/drugs/parse-excel",{method:"POST",body:Ce});if(!ne.ok){const de=await ne.json();throw new Error(de.message||`Failed to parse Excel file: ${ne.statusText}`)}const ye=await ne.json();n(de=>[...de,...ye.map(se=>({...se,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:a?a.name:se.supplier}))])}catch(ne){console.error("Failed to parse Excel file:",ne),R(ne.message||"Failed to parse Excel file. Please check the file format and try again.")}finally{j.current&&(j.current.value=""),m(!1),U(null)}},Q=async be=>{if(be.target.files&&be.target.files[0]){const ke=be.target.files[0];U(ke),R(null),m(!0);const Ce=new FormData;Ce.append("inventoryFile",ke);try{const ne=await ie("/api/drugs/get-file-headers",{method:"POST",body:Ce});if(!ne.ok){const de=await ne.json();throw new Error(de.message||`Failed to get file headers: ${ne.statusText}`)}const{headers:ye}=await ne.json();I(ye),T(!0)}catch(ne){console.error("Failed to get file headers:",ne),R(ne.message||"Failed to read file headers. Please check the file format and try again."),U(null)}finally{m(!1)}}else U(null)},L=be=>{$?H($,be):R("No file selected for import after mapping."),T(!1)},te=()=>{T(!1),I([]),U(null),j.current&&(j.current.value="")},me=()=>{var be;(be=j.current)==null||be.click()},X=async be=>{if(be.target.files&&be.target.files[0]){const ke=be.target.files[0];R(null),m(!0);const Ce=new FormData;Ce.append("file",ke),Ce.append("output_type","csv");const ye={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const de=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:ye,body:Ce});if(!de.ok){const ge=await de.json();throw new Error(ge.message||`Failed to extract data from image/PDF: ${de.statusText}`)}const se=await de.json();if(!se.success||!se.content)throw new Error(se.detail||"Nanonets API did not return expected content.");let re=se.content;re=re.split(`
`).filter(ge=>!ge.startsWith("#")&&ge.trim()!=="").join(`
`);const je=new File([re],"extracted_data.csv",{type:"text/csv"}),Oe=new FormData;Oe.append("inventoryFile",je);const J=await ie("/api/drugs/get-file-headers",{method:"POST",body:Oe});if(!J.ok){const ge=await J.json();throw new Error(ge.message||`Failed to get headers from extracted CSV: ${J.statusText}`)}const{headers:xe}=await J.json();I(xe),U(je),T(!0)}catch(de){console.error("Failed to extract data from image/PDF:",de),R(de.message||"Failed to extract data from image/PDF. Please check the file and try again.")}finally{w.current&&(w.current.value=""),m(!1)}}},Re=()=>{var be;(be=w.current)==null||be.click()},Se=()=>{if(!a){R("Please select a distributor before adding a drug manually.");return}G(!0)},Ee=()=>{G(!1),R(null)},Fe=be=>{n(ke=>[...ke,{...be,id:Date.now().toString(),supplier:a?a.name:be.supplier}]),Ee()},le=be=>{n(ke=>ke.filter(Ce=>Ce.id!==be))},_e=(be,ke,Ce)=>{const{value:ne}=be.target;n(ye=>ye.map(de=>{if(de.id===ke){let se=ne;Ce==="expiry_date"?se=ne.trim()===""?null:ne:["mrp","stock","rate","gst","margin","discount","loose"].includes(Ce)&&(se=parseFloat(ne),isNaN(se)&&(se=null));const re={...de,[Ce]:se};return Ce==="name"&&a&&!re.supplier&&(re.supplier=a.name),re}return de}))},Ve=v.useCallback(()=>e.reduce((be,ke)=>{const Ce=ke.stock||0,ne=ke.rate||0,ye=ke.gst||0,de=ke.discount||0;let se=ne*(1-de/100),re=Ce*se;return re+=re*(ye/100),be+re},0),[e]),De=async()=>{if(!a){R("Please select a distributor before submitting the purchase.");return}const be=e.filter(ke=>Object.values(ke).some(Ce=>typeof Ce=="string"&&Ce.trim()!==""||typeof Ce=="number"&&Ce!==0||Ce!=null&&typeof Ce!="string"&&typeof Ce!="number"));if(be.length===0){R("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),m(!1);return}m(!0),R(null);try{for(const ye of be){const de={...ye,expiry_date:ye.expiry_date===""?null:ye.expiry_date,distributorId:a.id},se=await ie("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(!se.ok){const re=await se.json();throw new Error(re.message||`Failed to add drug ${ye.name}: ${se.statusText}`)}}const ke=Ve(),Ce=new Date().toISOString().split("T")[0],ne=await ie(`/api/distributors/${a.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:Ce,order_value:ke,amount_paid:l,notes:"Payment from purchase page."})});if(!ne.ok){const ye=await ne.json();throw new Error(ye.message||`Failed to record distributor payment: ${ne.statusText}`)}n([]),i(null),o(""),c(0),t("/dashboard/inventory")}catch(ke){console.error("Failed to submit purchase:",ke),R(ke.message||"Failed to submit purchase. Please try again.")}finally{m(!1)}},ue=v.useCallback(async be=>{if(be.trim()===""){h([]);return}try{const ke=await ie(`/api/distributors?search=${encodeURIComponent(be)}`);if(!ke.ok)throw new Error(`Failed to fetch distributors: ${ke.statusText}`);const Ce=await ke.json();h(Ce)}catch(ke){console.error("Failed to fetch distributors:",ke),R(ke.message||"Failed to load distributors.")}},[]),Ae=be=>{const ke=be.target.value;o(ke),i(null),C.current&&clearTimeout(C.current),ke.trim()!==""?C.current=setTimeout(()=>{ue(ke),k(!0)},300):(h([]),k(!1))},ce=be=>{i(be),o(be.name),k(!1),h([])};return v.useEffect(()=>{const be=ke=>{ke.target instanceof HTMLElement&&!ke.target.closest(`.${pn.inputWrapper}`)&&k(!1)};return document.addEventListener("mousedown",be),()=>{document.removeEventListener("mousedown",be),C.current&&clearTimeout(C.current)}},[]),r.jsxs("div",{className:pn.container,children:[r.jsxs("div",{className:pn.header,children:[r.jsx("button",{onClick:()=>t(-1),className:pn.backButton,title:"Go Back",children:r.jsx(en,{size:24})}),r.jsx("h2",{className:pn.title,children:"Purchase Inventory"})]}),B&&r.jsxs("div",{className:pn.errorMsg,children:[r.jsx(zr,{size:20}),B]}),r.jsx("div",{className:pn.stickyActionBar,children:r.jsxs("div",{className:pn.actionRow,children:[r.jsxs("div",{style:{flex:1,minWidth:"300px",position:"relative"},children:[r.jsxs("div",{className:pn.inputWrapper,children:[r.jsx(fn,{className:pn.inputIcon,size:20}),r.jsx("input",{type:"text",placeholder:"Search distributor...",value:s,onChange:Ae,onFocus:()=>s.trim()!==""&&k(!0),className:pn.input}),_&&u.length>0&&r.jsx("ul",{className:pn.resultsDropdown,children:u.map(be=>r.jsx("li",{onClick:()=>ce(be),className:pn.resultItem,children:be.name},be.id))})]}),x?r.jsx("div",{className:pn.quickDistributors,children:[1,2,3,4].map(be=>r.jsx(ee,{width:100,height:32,style:{borderRadius:"16px"}},be))}):K.length>0&&!a&&r.jsx("div",{className:pn.quickDistributors,children:K.map(be=>r.jsxs("button",{className:pn.distributorChip,onClick:()=>ce(be),children:[r.jsx(qn,{className:pn.distributorChipIcon}),be.name]},be.id))}),a&&r.jsxs("div",{className:pn.selectedInfo,style:{marginTop:"0.5rem",marginBottom:0},children:[r.jsx(Ko,{size:18}),r.jsxs("span",{children:["Selected: ",r.jsx("strong",{children:a.name})]})]})]}),r.jsxs("div",{className:pn.buttonGroup,children:[r.jsx("input",{ref:j,type:"file",className:"sr-only",style:{display:"none"},accept:".xlsx, .xls, .csv",onChange:Q}),r.jsx("input",{ref:w,type:"file",className:"sr-only",style:{display:"none"},accept:".pdf, .png, .jpg, .jpeg",onChange:X}),r.jsxs("button",{onClick:me,disabled:p||!a,className:`${pn.button} ${pn.buttonPrimary} ${p||!a?pn.buttonDisabled:""}`,title:a?"":"Select a distributor to import",children:[r.jsx($v,{size:18}),p?"Processing...":"Import Excel/CSV"]}),r.jsxs("button",{onClick:Re,disabled:p||!a,className:`${pn.button} ${pn.buttonSecondary} ${p||!a?pn.buttonDisabled:""}`,title:a?"":"Select a distributor",children:[r.jsx(Ar,{size:18}),"Scan Image/PDF"]}),r.jsxs("button",{onClick:Se,disabled:!a,className:`${pn.button} ${pn.buttonAccent} ${a?"":pn.buttonDisabled}`,title:a?"":"Select a distributor",children:[r.jsx(cs,{size:18}),"Add Manually"]})]})]})}),r.jsx(d4e,{isOpen:A,onClose:te,excelHeaders:E,onConfirm:L,availableFields:q}),z&&r.jsx(f4e,{isOpen:z,onClose:Ee,onDrugAddedToPurchase:Fe}),r.jsxs("div",{className:pn.tableSection,children:[r.jsxs("div",{className:pn.cardTitle,children:[r.jsx(Fb,{className:pn.cardIcon,size:24}),"Purchase Items (",e.length,")"]}),r.jsx(p4e,{purchaseRows:e,onCellChange:_e,onRemoveDrug:le,onAddEmptyRow:V})]}),r.jsxs("div",{className:pn.footer,children:[r.jsxs("button",{onClick:V,className:`${pn.button} ${pn.buttonSecondary}`,children:[r.jsx(cs,{size:18}),"Add New Row"]}),r.jsxs("div",{className:pn.footerControls,children:[r.jsxs("div",{className:pn.paidInputGroup,children:[r.jsx("label",{htmlFor:"amount-paid",className:pn.paidLabel,children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount-paid",value:l,onChange:be=>c(parseFloat(be.target.value)||0),placeholder:"0.00",className:pn.paidInput,step:"0.01",disabled:!a})]}),r.jsxs("div",{className:pn.totalValue,children:["Total: ",r.jsxs("span",{children:["",Ve().toFixed(2)]})]}),r.jsx("button",{onClick:De,disabled:p||e.length===0||!a,className:`${pn.button} ${pn.buttonPrimary} ${pn.submitButton} ${p||!a||e.length===0?pn.buttonDisabled:""}`,style:{padding:"0.8rem 1.5rem",fontSize:"1rem"},children:p?"Submitting...":"Complete Purchase"})]})]})]})},G4e=t=>{if(!t)return 1;const e=t.match(/(?:\d+x)?(\d+)/);return e&&e[1]?parseInt(e[1],10):1},W4e=()=>{const t=Mt(),e=Ur(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,u]=v.useState(null),[h,p]=v.useState(!1),[m,x]=v.useState("cash"),[b,j]=v.useState(""),[w,_]=v.useState(""),[k,C]=v.useState(""),[A,T]=v.useState(""),[E,I]=v.useState(""),[$,U]=v.useState(0),B=v.useRef(!1),[R,z]=v.useState(null),[G,K]=v.useState(!1),[Y,q]=v.useState(!1),[V,H]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Q=()=>{V.length<5&&H(Ce=>[...Ce,{id:Date.now().toString(),method:"cash",amount:0}])},L=Ce=>{V.length>2&&H(ne=>ne.filter(ye=>ye.id!==Ce))},te=(Ce,ne,ye)=>{H(de=>{const se=de.map(re=>re.id===Ce?ne==="method"?{...re,method:ye}:{...re,amount:Math.max(0,ye)}:re);if(ne==="amount"&&se.length===2){const oe=se.findIndex(J=>J.id===Ce)===0?1:0,je=Math.max(0,ye),Oe=De-je;se[oe]={...se[oe],amount:Math.max(0,Oe)}}return se})},me=(Ce,ne)=>{const ye=V.filter(se=>se.id!==Ce).reduce((se,re)=>se+re.amount,0),de=Math.max(0,ne-ye);H(se=>se.map(re=>re.id===Ce?{...re,amount:de}:re))},X=Ce=>{const ne=Math.max(0,Math.min(100,isNaN(Ce)?0:Ce));B.current=!0,U(ne);const ye=i.map(de=>({...de,discount_percentage:ne}));s(ye)},Re=(Ce,ne)=>{const ye=[...i];ye[Ce].discount_percentage=isNaN(ne)?0:ne,s(ye)};v.useEffect(()=>{if(B.current){B.current=!1;return}const Ce=i.reduce((de,se)=>de+(se.total_price??0),0);if(Ce===0){U(0);return}const ye=i.reduce((de,se)=>{const oe=(se.total_price??0)*((se.discount_percentage??0)/100);return de+oe},0)/Ce*100;U(de=>Math.abs(de-ye)>.01?ye:de)},[i]);const Se=async()=>{if(!n)return u("No order data available to bill."),null;if(i.length===0)return u("Cannot bill an empty order."),null;p(!0),u(null);try{const Ce=i.map(oe=>{const je=(oe.pricePerLooseUnit??0)*(oe.looseQuantity??0),Oe=je*((oe.discount_percentage??0)/100),J=je-Oe;return{name:oe.name,pack_quantity:oe.loosePacks??0,loose_quantity:oe.looseUnits??0,price:oe.originalPrice??0,pack_price:oe.originalPrice??0,loose_price:oe.pricePerLooseUnit??0,total:J,drug_id:oe.drug_id,discount_percentage:oe.discount_percentage??0,batch:oe.batch,expiry_date:oe.expiry_date}}),ne={patientId:n.patientId,queueId:n.id,items:Ce,amount:De,paymentMode:Y?"split":m,type:"pharmacy",related_id:n.id,status:"paid",discountPercentage:$};Y&&(ne.splitPayments=V.map(oe=>({method:oe.method,amount:oe.amount})));const ye=await ie("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)}),de=await ye.json();if(!ye.ok||!de.id)throw new Error(de.message||"Failed to create bill.");const se=await ie(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:de.id,medications:i})});if(!se.ok){const oe=await se.text();throw new Error(`Failed to update pharmacy order status: ${se.statusText} - ${oe}`)}a(oe=>oe?{...oe,status:"billed",bill_id:de.id}:null);const re=Y?V.filter(oe=>oe.method==="credit").reduce((oe,je)=>oe+je.amount,0):m==="credit"?De:0;if(re>0)try{await ie(`/api/patient-debts/${n.patientId}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:re,related_bill_id:de.id,notes:`Pharmacy Bill #${de.id}`})})}catch(oe){console.error("Failed to create debt entry:",oe)}return t(`/dashboard/pharmacy-billing/${n.id}`,{replace:!0,state:{order:{...n,status:"billed",bill_id:de.id},initialItems:i}}),de.id}catch(Ce){return console.error("Billing process failed:",Ce),u(Ce.message||"Failed to mark order as billed. Please try again."),null}finally{p(!1)}},Ee=async()=>{if(n)try{const Ce=await ie(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed",medications:i})});if(!Ce.ok){const ne=await Ce.text();console.error("Failed to dispense order:",ne)}}catch(Ce){console.error("Error dispensing order:",Ce)}},Fe=()=>{window.print()},le=async()=>{await Se()&&(window.print(),await Ee(),t(-1))};v.useEffect(()=>{const Ce=e.pathname.split("/"),ne=Ce[Ce.length-1];ne?(async()=>{try{l(!0);const[de,se,re]=await Promise.all([ie(`/api/pharmacy-orders/${ne}`),ie("/api/drugs").then(J=>J.ok?J.json():null).catch(()=>null),ie("/api/clinics/settings").then(J=>J.ok?J.json():null).catch(()=>null)]);if(!de.ok)throw new Error("Failed to fetch pharmacy order details");const oe=await de.json();a(oe);let je=[];se&&(je=se.drugs||se||[]),re&&(_(re.upi_id||""),C(re.name||""),T(re.address||""),I(re.notes||""));const Oe=oe.medications.map(J=>{const xe=G4e(J.unit),ge=(J.pack_quantity??0)*xe+(J.loose_quantity??0),he=je.find(wt=>J.drug_id&&String(wt.id)===String(J.drug_id)||wt.name.toLowerCase()===J.name.toLowerCase()),Ie=J.batch||(he==null?void 0:he.batch)||(he==null?void 0:he.batch_number),nt=J.expiry_date||(he==null?void 0:he.expiry_date),Be=Number(J.pack_price)||Number(he==null?void 0:he.mrp)||0,Ge=Number(he==null?void 0:he.rate)||0;let it=Number(J.loose_price)||0;return it===0&&(Be>0&&xe>0?it=Be/xe:Ge>0&&(it=Ge)),{...J,isLoose:!0,loosePacks:J.pack_quantity??0,looseUnits:J.loose_quantity??0,looseQuantity:ge,pack_price:Be,loose_price:it,total_price:Number(J.total_price)||it*ge,pricePerLooseUnit:it,originalPrice:Be,discount_percentage:Number(J.discount_percentage)??0,directions_to_use:J.directions_to_use,tabletsPerDay:J.tabletsPerDay,numberOfDays:J.numberOfDays,batch:Ie,expiry_date:nt}});s(Oe)}catch(de){console.error("Failed to fetch data:",de),u(de.message||"Failed to load order details.")}finally{l(!1)}})():(u("No pharmacy order ID provided."),l(!1))},[e.pathname]);const _e=v.useMemo(()=>i.reduce((Ce,ne)=>Ce+(ne.total_price??0),0),[i]),Ve=v.useMemo(()=>i.reduce((Ce,ne)=>{const de=(ne.total_price??0)*(ne.discount_percentage??0)/100;return Ce+de},0),[i]),De=v.useMemo(()=>_e-Ve,[_e,Ve]),ue=v.useMemo(()=>V.reduce((Ce,ne)=>Ce+ne.amount,0),[V]),Ae=v.useMemo(()=>De-ue,[De,ue]),ce=v.useMemo(()=>Math.abs(Ae)<.01,[Ae]),be=v.useMemo(()=>Y?V.some(Ce=>Ce.method==="credit"&&Ce.amount>0):m==="credit",[Y,V,m]),ke=v.useMemo(()=>Y?V.filter(Ce=>Ce.method==="credit").reduce((Ce,ne)=>Ce+ne.amount,0):m==="credit"?De:0,[Y,V,m,De]);return v.useEffect(()=>{if(De>0&&w){const Ce=`upi://pay?pa=${w}&pn=ClinicName&am=${De.toFixed(2)}&cu=INR`;j(Ce)}else j("")},[De,w]),v.useEffect(()=>{(async()=>{if(m==="credit"&&(n!=null&&n.patientId)){K(!0);try{const ne=await ie(`/api/patient-debts/${n.patientId}/balance`);if(ne.ok){const ye=await ne.json();z(ye.netDebt||0)}else z(0)}catch(ne){console.error("Error fetching patient debt:",ne),z(0)}finally{K(!1)}}})()},[m,n==null?void 0:n.patientId]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(ee,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(ee,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(ee,{width:30,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:60,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(Ce=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:20,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:180,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:70,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:70,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:90,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:60,height:20})})]},Ce))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:120,height:28}),r.jsx(ee,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(ee,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:k?`${k} Pharmacy`:"Pharmacy Bill"}),(A||E)&&r.jsxs("div",{className:"clinic-details-print",children:[A&&r.jsx("span",{className:"small-text clinic-address",children:A}),E&&r.jsx("span",{className:"small-text clinic-notes",children:E})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Pharmacy Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(oo,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Medications"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"BATCH"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{children:"QUANTITY"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((Ce,ne)=>{var oe;const ye=Ce.total_price??0,de=ye*(Ce.discount_percentage??0)/100,se=ye-de;return r.jsxs("tr",{children:[r.jsx("td",{children:ne+1}),r.jsx("td",{children:Ce.name}),r.jsx("td",{children:Ce.batch||"N/A"}),r.jsx("td",{children:Ce.expiry_date?new Date(Ce.expiry_date).toLocaleDateString():"N/A"}),r.jsxs("td",{children:[r.jsxs("div",{children:["Packs: ",Ce.loosePacks??0]}),r.jsxs("div",{children:["Loose: ",Ce.looseUnits??0]})]}),r.jsx("td",{children:((oe=Ce.originalPrice)==null?void 0:oe.toFixed(2))??"N/A"}),r.jsx("td",{children:((Ce.pricePerLooseUnit??0)*(1-(Ce.discount_percentage??0)/100)).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:Ce.discount_percentage===0?"":Ce.discount_percentage,onChange:je=>Re(ne,parseFloat(je.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsxs("td",{children:[5 .toFixed(1),"%"]}),r.jsx("td",{children:se.toFixed(2)})]},ne)})})]}):r.jsx("p",{children:"No medications in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",_e.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",$.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"GST (Included)"}),r.jsxs("span",{children:["",(De*.05).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",De.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:Y?"Split Payment":m==="cash"?"Cash":m==="upi"?"UPI":m==="card"?"Card":m==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),Y&&V.map((Ce,ne)=>Ce.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:Ce.method==="cash"?"Cash":Ce.method==="upi"?"UPI":Ce.method==="card"?"Card":Ce.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",Ce.amount.toFixed(2)]})]},ne))]}),R!==null&&(R>0||be)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(R??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(R??0).toFixed(2)]})]}),be&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ke.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((R??0)+(be?ke:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${m!=="upi"?"hide-on-screen":""}`,children:[r.jsx(qa,{value:b,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",_e.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:$===0?"":$,onChange:Ce=>X(parseFloat(Ce.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:h||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",De.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(qa,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>q(!Y),disabled:h||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:Y?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:Y?"rgba(79, 172, 254, 0.1)":"transparent",color:Y?"#4facfe":"#666",cursor:h||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Uo,{size:14}),"Split"]})]}),Y?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",De.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:V.map((Ce,ne)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ne+1}),r.jsxs("select",{value:Ce.method,onChange:ye=>te(Ce.id,"method",ye.target.value),className:`split-payment-select ${Ce.method==="credit"?"is-credit":""}`,disabled:h||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Ce.amount||"",onChange:ye=>te(Ce.id,"amount",parseFloat(ye.target.value)||0),className:`split-payment-input ${Ce.method==="credit"?"is-credit":""}`,disabled:h||n.status==="billed"})]}),V.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>me(Ce.id,De),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>L(Ce.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(zn,{size:12})})]})]},Ce.id))}),V.length<5&&r.jsxs("button",{type:"button",onClick:Q,className:"split-payment-add-btn",disabled:h||n.status==="billed",children:[r.jsx(Ln,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${ce?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[ce?"":Ae>0?"":"",ce?"Balanced":Ae>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Ae).toFixed(2)]})]}),!ce&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",De.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:m,onChange:Ce=>x(Ce.target.value),className:"payment-mode-select",disabled:h||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),be&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),G?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:R&&R>0?"#dc3545":"#28a745"},children:["",(R||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ke.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((R||0)+ke).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[n.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Fe,className:"secondary-button print-preview-button no-print",disabled:h||i.length===0,children:"Print Preview"}),r.jsx("button",{onClick:le,className:"primary-button",disabled:h||i.length===0,children:h?"Processing...":"Finalise and Bill"})]}),n.status==="billed"&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${n.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},K4e=()=>{const t=Mt(),e=Ur(),[n,a]=v.useState(null),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState([]),[h,p]=v.useState(!0),[m,x]=v.useState(null),[b,j]=v.useState(!1),[w,_]=v.useState("cash"),[k,C]=v.useState(""),[A,T]=v.useState(""),[E,I]=v.useState(""),[$,U]=v.useState(""),[B,R]=v.useState(""),[z,G]=v.useState(0),K=v.useRef(!1),[Y,q]=v.useState(null),[V,H]=v.useState(!1),[Q,L]=v.useState(!1),[te,me]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),X=()=>{te.length<5&&me(de=>[...de,{id:Date.now().toString(),method:"cash",amount:0}])},Re=de=>{te.length>2&&me(se=>se.filter(re=>re.id!==de))},Se=(de,se,re)=>{me(oe=>{const je=oe.map(Oe=>Oe.id===de?se==="method"?{...Oe,method:re}:{...Oe,amount:Math.max(0,re)}:Oe);if(se==="amount"&&je.length===2){const J=je.findIndex(he=>he.id===de)===0?1:0,xe=Math.max(0,re),ge=ce-xe;je[J]={...je[J],amount:Math.max(0,ge)}}return je})},Ee=(de,se)=>{const re=te.filter(je=>je.id!==de).reduce((je,Oe)=>je+Oe.amount,0),oe=Math.max(0,se-re);me(je=>je.map(Oe=>Oe.id===de?{...Oe,amount:oe}:Oe))},Fe=de=>{const se=Math.max(0,Math.min(100,isNaN(de)?0:de));K.current=!0,G(se);const re=c.map(oe=>({...oe,discount_percentage:se}));u(re)},le=(de,se)=>{const re=[...c];re[de].discount_percentage=isNaN(se)?0:se,u(re)};v.useEffect(()=>{if(K.current){K.current=!1;return}const de=c.reduce((oe,je)=>oe+(je.price??0),0);if(de===0){G(0);return}const re=c.reduce((oe,je)=>{const J=(je.price??0)*((je.discount_percentage??0)/100);return oe+J},0)/de*100;G(oe=>Math.abs(oe-re)>.01?re:oe)},[c]);const _e=async()=>{if(!n)return x("No order data available to bill."),null;if(c.length===0)return x("Cannot bill an empty order."),null;j(!0),x(null);try{const de=c.map(J=>{const xe=J.price,ge=xe*((J.discount_percentage??0)/100),he=xe-ge;return{name:J.name,price:J.price,quantity:1,total:he,item_id:J.id,type:"lab_test",discount_percentage:J.discount_percentage??0}}),se={patientId:n.patient_id,items:de,amount:ce,paymentMode:Q?"split":w,type:"lab",related_id:n.id,status:"paid",discountPercentage:z};Q&&(se.splitPayments=te.map(J=>({method:J.method,amount:J.amount})));const re=await ie("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)}),oe=await re.json();if(!re.ok||!oe.id)throw new Error(oe.message||"Failed to create bill.");const je=await ie(`/api/lab/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:oe.id})});if(!je.ok){const J=await je.text();throw new Error(`Failed to update lab order status: ${je.statusText} - ${J}`)}a(J=>J?{...J,status:"billed",bill_id:oe.id}:null);const Oe=Q?te.filter(J=>J.method==="credit").reduce((J,xe)=>J+xe.amount,0):w==="credit"?ce:0;if(Oe>0)try{await ie(`/api/patient-debts/${n.patient_id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Oe,related_bill_id:oe.id,notes:`Lab Bill #${oe.id}`})})}catch(J){console.error("Failed to create debt entry:",J)}return t(`/dashboard/lab-billing/${n.id}`,{replace:!0,state:{...e.state,order:{...n,status:"billed",bill_id:oe.id}}}),oe.id}catch(de){return console.error("Billing process failed:",de),x(de.message||"Failed to mark order as billed. Please try again."),null}finally{j(!1)}},Ve=()=>{window.print()},De=async()=>{await _e()&&(window.print(),t(-1))};v.useEffect(()=>{const de=e.pathname.split("/"),se=de[de.length-1];se?(async()=>{try{const[oe,je]=await Promise.all([ie(`/api/lab/${se}`),ie("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!oe.ok)throw new Error("Failed to fetch lab order details");const Oe=await oe.json();a(Oe);const J=Oe.patient_id?ie(`/api/patients/${Oe.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1});if(je.ok&&"json"in je){const he=await je.json();T(he.upi_id||""),I(he.name||""),U(he.address||""),R(he.notes||"")}const xe=await J;if(xe.ok&&"json"in xe){const he=await xe.json();s(he.name),l(he.patient_token_number)}const ge=Oe.tests.map(he=>({...he,price:typeof he.price=="string"?parseFloat(he.price):Number(he.price)||0,discount_percentage:0,total_price:typeof he.price=="string"?parseFloat(he.price):Number(he.price)||0}));u(ge)}catch(oe){console.error("Failed to fetch data:",oe),x(oe.message||"Failed to load order details.")}finally{p(!1)}})():(x("No lab order ID provided."),p(!1))},[e.pathname]);const ue=v.useMemo(()=>c.reduce((de,se)=>de+(se.price??0),0),[c]),Ae=v.useMemo(()=>c.reduce((de,se)=>{const oe=(se.price??0)*(se.discount_percentage??0)/100;return de+oe},0),[c]),ce=v.useMemo(()=>ue-Ae,[ue,Ae]),be=v.useMemo(()=>te.reduce((de,se)=>de+se.amount,0),[te]),ke=v.useMemo(()=>ce-be,[ce,be]),Ce=v.useMemo(()=>Math.abs(ke)<.01,[ke]),ne=v.useMemo(()=>Q?te.some(de=>de.method==="credit"&&de.amount>0):w==="credit",[Q,te,w]),ye=v.useMemo(()=>Q?te.filter(de=>de.method==="credit").reduce((de,se)=>de+se.amount,0):w==="credit"?ce:0,[Q,te,w,ce]);return v.useEffect(()=>{if(ce>0&&A){const de=`upi://pay?pa=${A}&pn=ClinicName&am=${ce.toFixed(2)}&cu=INR`;C(de)}else C("")},[ce,A]),v.useEffect(()=>{(async()=>{if(ne&&(n!=null&&n.patient_id)){H(!0);try{const se=await ie(`/api/patient-debts/${n.patient_id}/balance`);if(se.ok){const re=await se.json();q(re.netDebt||0)}else q(0)}catch(se){console.error("Error fetching patient debt:",se),q(0)}finally{H(!1)}}})()},[ne,n==null?void 0:n.patient_id]),h?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(ee,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(ee,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(ee,{width:200,height:20}),r.jsx(ee,{width:150,height:20}),r.jsx(ee,{width:180,height:20}),r.jsx(ee,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(ee,{width:"100%",height:40}),r.jsx(ee,{width:"100%",height:40}),r.jsx(ee,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:120,height:24}),r.jsx(ee,{width:100,height:24})]}),r.jsx(ee,{width:"100%",height:150})," ",r.jsx(ee,{width:"100%",height:40}),r.jsx(ee,{width:"100%",height:40})]})]})})]})]})}):m?r.jsxs("div",{className:"error-message-box",children:["Error: ",m]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:E?`${E} Lab`:"Lab Bill"}),($||B)&&r.jsxs("div",{className:"clinic-details-print",children:[$&&r.jsx("span",{className:"small-text clinic-address",children:$}),B&&r.jsx("span",{className:"small-text clinic-notes",children:B})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{size:20})}),r.jsx("h1",{children:"Lab Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(hs,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Lab Tests"})}),c.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"TEST DESCRIPTION"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:c.map((de,se)=>{const re=de.price??0,oe=re*(de.discount_percentage??0)/100,je=re-oe;return r.jsxs("tr",{children:[r.jsx("td",{children:se+1}),r.jsx("td",{children:de.name}),r.jsx("td",{children:typeof de.price=="number"?de.price.toFixed(2):Number(de.price||0).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:de.discount_percentage||"",onChange:Oe=>le(se,parseFloat(Oe.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:je.toFixed(2)})]},se)})})]}):r.jsx("p",{children:"No tests in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",z.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ae.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ce.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:Q?"Split Payment":w==="cash"?"Cash":w==="upi"?"UPI":w==="card"?"Card":w==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),Q&&te.map((de,se)=>de.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:de.method==="cash"?"Cash":de.method==="upi"?"UPI":de.method==="card"?"Card":de.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",de.amount.toFixed(2)]})]},se))]}),Y!==null&&(Y>0||ne)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(Y??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(Y??0).toFixed(2)]})]}),ne&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ye.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((Y??0)+(ne?ye:0)).toFixed(2)]})]})]})]}),k&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${w!=="upi"?"hide-on-screen":""}`,children:[r.jsx(qa,{value:k,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:z===0?"":z,onChange:de=>Fe(parseFloat(de.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:b||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ce.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:k?r.jsxs(r.Fragment,{children:[r.jsx(qa,{value:k,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>L(!Q),disabled:b||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:Q?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:Q?"rgba(79, 172, 254, 0.1)":"transparent",color:Q?"#4facfe":"#666",cursor:b||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Uo,{size:14}),"Split"]})]}),Q?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ce.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:te.map((de,se)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:se+1}),r.jsxs("select",{value:de.method,onChange:re=>Se(de.id,"method",re.target.value),className:`split-payment-select ${de.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:de.amount||"",onChange:re=>Se(de.id,"amount",parseFloat(re.target.value)||0),className:`split-payment-input ${de.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed"})]}),te.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>Ee(de.id,ce),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>Re(de.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(zn,{size:12})})]})]},de.id))}),te.length<5&&r.jsxs("button",{type:"button",onClick:X,className:"split-payment-add-btn",disabled:b||n.status==="billed",children:[r.jsx(Ln,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ce?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Ce?"":ke>0?"":"",Ce?"Balanced":ke>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ke).toFixed(2)]})]}),!Ce&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ce.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:w,onChange:de=>_(de.target.value),className:"payment-mode-select",disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),ne&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),V?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:Y&&Y>0?"#dc3545":"#28a745"},children:["",(Y||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ye.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((Y||0)+ye).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:Ve,className:"secondary-button print-preview-button no-print",disabled:b||c.length===0,children:"Print Preview"}),n.status!=="billed"&&r.jsx("button",{onClick:De,className:"primary-button",disabled:b||c.length===0,children:b?"Processing...":"Finalise and Bill"}),n.status==="billed"&&n.bill_id&&r.jsx("button",{onClick:()=>t("/billing",{state:{billId:n.bill_id}}),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})]}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},Y4e=500,Q4e=()=>{const t=Mt(),{queueId:e}=Da(),[n]=Vz(),a=n.get("doctorId"),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,u]=v.useState(null),[h,p]=v.useState(null),[m,x]=v.useState([]),[b,j]=v.useState(!0),[w,_]=v.useState(null),[k,C]=v.useState(!1),[A,T]=v.useState(!1),[E,I]=v.useState(null),[$,U]=v.useState("cash"),[B,R]=v.useState(""),[z,G]=v.useState(""),[K,Y]=v.useState(""),[q,V]=v.useState(""),[H,Q]=v.useState(""),[L,te]=v.useState(0),[me,X]=v.useState(null),[Re,Se]=v.useState(!1),[Ee,Fe]=v.useState(!1),[le,_e]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ve=()=>{le.length<5&&_e(J=>[...J,{id:Date.now().toString(),method:"cash",amount:0}])},De=J=>{le.length>2&&_e(xe=>xe.filter(ge=>ge.id!==J))},ue=(J,xe,ge)=>{_e(he=>{const Ie=he.map(nt=>nt.id===J?xe==="method"?{...nt,method:ge}:{...nt,amount:Math.max(0,ge)}:nt);if(xe==="amount"&&Ie.length===2){const Be=Ie.findIndex(wt=>wt.id===J)===0?1:0,Ge=Math.max(0,ge),it=ke-Ge;Ie[Be]={...Ie[Be],amount:Math.max(0,it)}}return Ie})},Ae=(J,xe)=>{const ge=le.filter(Ie=>Ie.id!==J).reduce((Ie,nt)=>Ie+nt.amount,0),he=Math.max(0,xe-ge);_e(Ie=>Ie.map(nt=>nt.id===J?{...nt,amount:he}:nt))};v.useEffect(()=>{(async()=>{if(!e){_("No queue ID provided."),j(!1);return}try{j(!0),_(null);const[xe,ge]=await Promise.all([ie(`/api/queue/${e}`),ie("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!xe.ok)throw new Error("Failed to fetch queue entry");const he=await xe.json();if(s(he),ge.ok&&"json"in ge){const it=await ge.json();G(it.upi_id||""),Y(it.name||""),V(it.address||""),Q(it.notes||"")}const Ie=a||he.doctor_id,[nt,Be]=await Promise.all([he.patient_id?ie(`/api/patients/${he.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1}),Ie?ie(`/api/staff/${Ie}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1})]);if(nt.ok&&"json"in nt){const it=await nt.json();l(it)}let Ge=Y4e;if(Ie&&(p(Ie),Be.ok&&"json"in Be)){const it=await Be.json();u(it),it.opd_fee!=null&&!isNaN(parseFloat(String(it.opd_fee)))&&(Ge=parseFloat(String(it.opd_fee)))}x([{name:"Consultation Fee",quantity:1,price:Ge,total:Ge,discount_percentage:0}])}catch(xe){console.error("Failed to fetch data:",xe),_(xe.message||"Failed to load billing details.")}finally{j(!1)}})()},[e,a]);const ce=v.useMemo(()=>m.reduce((J,xe)=>J+xe.total,0),[m]),be=v.useMemo(()=>ce*(L/100),[ce,L]),ke=v.useMemo(()=>ce-be,[ce,be]),Ce=v.useMemo(()=>le.reduce((J,xe)=>J+xe.amount,0),[le]),ne=v.useMemo(()=>ke-Ce,[ke,Ce]),ye=v.useMemo(()=>Math.abs(ne)<.01,[ne]),de=v.useMemo(()=>Ee?le.some(J=>J.method==="credit"&&J.amount>0):$==="credit",[Ee,le,$]),se=v.useMemo(()=>Ee?le.filter(J=>J.method==="credit").reduce((J,xe)=>J+xe.amount,0):$==="credit"?ke:0,[Ee,le,$,ke]);v.useEffect(()=>{if(ke>0&&z){const J=`upi://pay?pa=${z}&pn=${encodeURIComponent(K)}&am=${ke.toFixed(2)}&cu=INR`;R(J)}else R("")},[ke,z,K]),v.useEffect(()=>{(async()=>{if(de&&(o!=null&&o.id)){Se(!0);try{const xe=await ie(`/api/patient-debts/${o.id}/balance`);if(xe.ok){const ge=await xe.json();X(ge.netDebt||0)}else X(0)}catch(xe){console.error("Error fetching patient debt:",xe),X(0)}finally{Se(!1)}}})()},[de,o==null?void 0:o.id]);const re=J=>{const xe=Math.max(0,Math.min(100,isNaN(J)?0:J));te(xe)},oe=async()=>{if(!i||!o)return _("Missing queue or patient data."),null;if(m.length===0)return _("Cannot create an empty bill."),null;C(!0),_(null);try{const J=m.map(nt=>({name:nt.name,quantity:nt.quantity,price:nt.price,total:nt.total*(1-L/100)})),xe={patientId:o.id,queueId:i.id,items:J,amount:ke,paymentMode:Ee?"split":$,type:"consultation",related_id:i.id,status:"paid",discountPercentage:L};Ee&&(xe.splitPayments=le.map(nt=>({method:nt.method,amount:nt.amount})));const ge=await ie("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)}),he=await ge.json();if(!ge.ok||!he.id)throw new Error(he.message||"Failed to create bill.");const Ie=Ee?le.filter(nt=>nt.method==="credit").reduce((nt,Be)=>nt+Be.amount,0):$==="credit"?ke:0;if(Ie>0)try{await ie(`/api/patient-debts/${o.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ie,related_bill_id:he.id,notes:`Consultation Bill #${he.id}`})})}catch(nt){console.error("Failed to create debt entry:",nt)}if(h&&i.id)try{const nt={status:"waiting",doctorId:h},Be=await ie(`/api/queue/${i.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)});if(Be.ok)console.log(`Doctor ${h} assigned to queue ${i.id} after billing.`);else{const Ge=await Be.json();console.error("Failed to assign doctor to queue:",Ge.message)}}catch(nt){console.error("Error assigning doctor to queue:",nt)}return T(!0),I(he.id),he.id}catch(J){return console.error("Billing process failed:",J),_(J.message||"Failed to create bill. Please try again."),null}finally{C(!1)}},je=()=>{window.print()},Oe=async()=>{await oe()&&(window.print(),t(-1))};return b?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(ee,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(ee,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(ee,{width:200,height:20}),r.jsx(ee,{width:150,height:20}),r.jsx(ee,{width:180,height:20}),r.jsx(ee,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(ee,{width:"100%",height:40}),r.jsx(ee,{width:"100%",height:40}),r.jsx(ee,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:120,height:24}),r.jsx(ee,{width:100,height:24})]}),r.jsx(ee,{width:"100%",height:150})," ",r.jsx(ee,{width:"100%",height:40}),r.jsx(ee,{width:"100%",height:40})]})]})})]})]})}):w?r.jsxs("div",{className:"error-message-box",children:["Error: ",w]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:K||"Clinic Bill"}),(q||H)&&r.jsxs("div",{className:"clinic-details-print",children:[q&&r.jsx("span",{className:"small-text clinic-address",children:q}),H&&r.jsx("span",{className:"small-text clinic-notes",children:H})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date().toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{size:20})}),r.jsx("h1",{children:"Consultation Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Patient ID"]})," ",(o==null?void 0:o.id)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date().toLocaleDateString()]}),c&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Af,{size:16})," Doctor"]})," ",c.name]}),i.complaint&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Complaint"})," ",i.complaint]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Bill Items"})}),m.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:m.map((J,xe)=>{const ge=J.total*(L/100),he=J.total-ge;return r.jsxs("tr",{children:[r.jsx("td",{children:xe+1}),r.jsx("td",{children:J.name}),r.jsx("td",{children:J.quantity}),r.jsxs("td",{children:["",J.price.toFixed(2)]}),r.jsxs("td",{children:["",he.toFixed(2)]})]},xe)})})]}):r.jsx("p",{children:"No items in this bill."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ce.toFixed(2)]})]}),L>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",L.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",be.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ke.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:Ee?"Split Payment":$==="cash"?"Cash":$==="upi"?"UPI":$==="card"?"Card":$==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),Ee&&le.map((J,xe)=>J.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:J.method==="cash"?"Cash":J.method==="upi"?"UPI":J.method==="card"?"Card":J.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",J.amount.toFixed(2)]})]},xe))]}),me!==null&&(me>0||de)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(me??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(me??0).toFixed(2)]})]}),de&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",se.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((me??0)+(de?se:0)).toFixed(2)]})]})]})]}),B&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${$!=="upi"?"hide-on-screen":""}`,children:[r.jsx(qa,{value:B,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["- ",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:L===0?"":L,onChange:J=>re(parseFloat(J.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:k||A}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ke.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:B?r.jsxs(r.Fragment,{children:[r.jsx(qa,{value:B,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>Fe(!Ee),disabled:k||A,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:Ee?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:Ee?"rgba(79, 172, 254, 0.1)":"transparent",color:Ee?"#4facfe":"#666",cursor:k||A?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Uo,{size:14}),"Split"]})]}),Ee?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ke.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:le.map((J,xe)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:xe+1}),r.jsxs("select",{value:J.method,onChange:ge=>ue(J.id,"method",ge.target.value),className:`split-payment-select ${J.method==="credit"?"is-credit":""}`,disabled:k||A,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:J.amount||"",onChange:ge=>ue(J.id,"amount",parseFloat(ge.target.value)||0),className:`split-payment-input ${J.method==="credit"?"is-credit":""}`,disabled:k||A})]}),le.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>Ae(J.id,ke),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>De(J.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(zn,{size:12})})]})]},J.id))}),le.length<5&&r.jsxs("button",{type:"button",onClick:Ve,className:"split-payment-add-btn",disabled:k||A,children:[r.jsx(Ln,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ce.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${ye?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[ye?"":ne>0?"":"",ye?"Balanced":ne>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ne).toFixed(2)]})]}),!ye&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ke.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:$,onChange:J=>U(J.target.value),className:"payment-mode-select",disabled:k||A,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),de&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Re?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:me&&me>0?"#dc3545":"#28a745"},children:["",(me||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",se.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((me||0)+se).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[!A&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:je,className:"secondary-button print-preview-button no-print",disabled:k||m.length===0,children:"Print Preview"}),r.jsx("button",{onClick:Oe,className:"primary-button",disabled:k||m.length===0,children:k?"Processing...":"Finalise and Bill"})]}),A&&E&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${E}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your visit!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No queue data available."})},X4e=({isOpen:t,onClose:e,onStaffAdded:n,clinicId:a,fetchWithAuth:i})=>{const[s,o]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[l,c]=v.useState(null),[u,h]=v.useState(!1),[p,m]=v.useState([]),[x,b]=v.useState(!1),j=v.useCallback(async()=>{b(!0);try{const k=await i("/api/clinic-roles");if(k.ok){const C=await k.json();m(C)}}catch(k){console.error("Failed to fetch roles:",k)}finally{b(!1)}},[i]);v.useEffect(()=>{t&&(j(),o({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),c(null))},[t,j]);const w=k=>{const{name:C,value:A}=k.target;o(T=>{const E={...T,[C]:A};return C==="role"&&A!=="doctor"&&(E.opd_fee=""),E})},_=async k=>{if(k.preventDefault(),c(null),!s.name||!s.email||!s.role||!s.password){c("Name, Email, Role, and Password are required.");return}if(!a){c("Clinic information is missing. Cannot add staff.");return}const C={...s,clinic_id:a,opd_fee:s.role==="doctor"&&s.opd_fee?parseFloat(String(s.opd_fee)):null};if(C.role==="doctor"&&s.opd_fee&&isNaN(C.opd_fee)){c("Invalid OPD Fee format. Please enter a number.");return}h(!0);try{const A=await i("/api/staff",{method:"POST",body:JSON.stringify(C)});if(!A.ok){const T=await A.json();throw new Error(T.message||"Server responded with an error")}n(),e()}catch(A){c(`Failed to add staff: ${A.message}`)}finally{h(!1)}};return t?r.jsx("div",{className:"staff-modal-overlay",children:r.jsxs("div",{className:"staff-modal-content",children:[r.jsxs("div",{className:"staff-modal-header",children:[r.jsx("h2",{className:"staff-modal-title",children:"Add New Staff"}),r.jsx("button",{onClick:e,className:"staff-modal-close",children:r.jsx(Ot,{size:20})})]}),l&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-3 py-2 rounded-lg relative mb-3 flex items-center",role:"alert",children:[r.jsx(zr,{size:14,className:"mr-2 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:l})]}),r.jsxs("form",{onSubmit:_,className:"space-y-3",children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Full Name"}),r.jsx("input",{type:"text",name:"name",value:s.name||"",onChange:w,required:!0,disabled:u,placeholder:"Full name",className:"custom-text-input"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:s.email||"",onChange:w,required:!0,disabled:u,placeholder:"Email",className:"custom-text-input"})]}),r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Password"}),r.jsx("input",{type:"password",name:"password",value:s.password||"",onChange:w,required:!0,disabled:u,placeholder:"Initial password",className:"custom-text-input"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Assign Role"}),r.jsx("select",{name:"role",value:s.role||"receptionist",onChange:w,required:!0,disabled:u||x,className:"custom-select-input",children:x?r.jsx("option",{value:"",children:"Loading..."}):p.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):p.map(k=>r.jsx("option",{value:k.key,children:k.name},k.key))})]}),s.role==="doctor"&&r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"OPD Fee ()"}),r.jsx("input",{type:"number",name:"opd_fee",value:s.opd_fee||"",onChange:w,step:"0.01",min:"0",placeholder:"e.g., 500",disabled:u,className:"custom-text-input"})]})]}),r.jsxs("div",{className:"staff-modal-footer",children:[r.jsx("button",{type:"button",onClick:e,className:"btn-compact border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:u,children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn-compact bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50",disabled:u,children:[u?r.jsx(co,{size:16,className:"animate-spin mr-2"}):r.jsx(Ln,{size:16,className:"mr-2"}),u?"Adding...":"Add Staff"]})]})]})]})}):null},J4e=({staffId:t,isOpen:e,onClose:n,onStaffUpdated:a,fetchWithAuth:i})=>{const[s,o]=v.useState(null),[l,c]=v.useState(null),[u,h]=v.useState(!1),[p,m]=v.useState(!1),[x,b]=v.useState([]),[j,w]=v.useState(!1),_=v.useCallback(async()=>{w(!0);try{const T=await i("/api/clinic-roles");if(T.ok){const E=await T.json();b(E)}}catch(T){console.error("Failed to fetch roles:",T)}finally{w(!1)}},[i]),k=v.useCallback(async()=>{if(t){h(!0),c(null);try{const T=await i(`/staff/${t}`);if(!T.ok)throw new Error("Failed to fetch staff member");const E=await T.json();o({...E,id:E._id||E.id,opd_fee:E.opd_fee!==null&&E.opd_fee!==void 0?parseFloat(String(E.opd_fee)).toFixed(2):""})}catch(T){c(`Failed to load staff data: ${T.message}`)}finally{h(!1)}}},[t,i]);v.useEffect(()=>{e&&t?(k(),_()):(o(null),c(null))},[e,t,k,_]);const C=T=>{const{name:E,value:I,type:$}=T.target;o(U=>{if(!U)return null;let B=I;$==="checkbox"&&(B=T.target.checked);const R={...U,[E]:B};return E==="role"&&I!=="doctor"&&(R.opd_fee=""),R})},A=async T=>{if(T.preventDefault(),!s||!t)return;if(c(null),!s.name||!s.email||!s.role){c("Name, Email, and Role are required.");return}const E={name:s.name,email:s.email,role:s.role,active:s.active,opd_fee:s.role==="doctor"&&s.opd_fee?parseFloat(String(s.opd_fee)):null};if(E.role==="doctor"&&s.opd_fee&&isNaN(E.opd_fee)){c("Invalid OPD Fee format. Please enter a number.");return}m(!0);try{const I=await i(`/staff/${t}`,{method:"PUT",body:JSON.stringify(E)});if(!I.ok){const $=await I.json();throw new Error($.message||"Failed to update staff")}a(),n()}catch(I){c(`Failed to update staff: ${I.message}`)}finally{m(!1)}};return e?r.jsx("div",{className:"staff-modal-overlay",children:r.jsxs("div",{className:"staff-modal-content",children:[r.jsxs("div",{className:"staff-modal-header",children:[r.jsx("h3",{className:"staff-modal-title",children:"Edit Staff"}),r.jsx("button",{onClick:n,className:"staff-modal-close",children:r.jsx(Ot,{size:20})})]}),l&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-3 py-2 rounded-lg relative mb-3 flex items-center",role:"alert",children:[r.jsx(zr,{size:14,className:"mr-2 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:l})]}),u?r.jsxs("div",{className:"py-10 flex flex-col items-center justify-center text-gray-500",children:[r.jsx(co,{size:28,className:"animate-spin mb-3 text-teal-600"}),r.jsx("p",{className:"text-sm",children:"Loading details..."})]}):s?r.jsxs("form",{onSubmit:A,className:"space-y-3",children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Full Name"}),r.jsx("input",{type:"text",name:"name",required:!0,value:s.name||"",onChange:C,className:"custom-text-input",disabled:p})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Role"}),r.jsx("select",{name:"role",required:!0,value:s.role||"",onChange:C,className:"custom-select-input",disabled:p||j,children:j?r.jsx("option",{value:"",children:"Loading..."}):x.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):x.map(T=>r.jsx("option",{value:T.key,children:T.name},T.key))})]}),r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Email"}),r.jsx("input",{type:"email",name:"email",required:!0,value:s.email||"",onChange:C,className:"custom-text-input",disabled:p})]})]}),s.role==="doctor"&&r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"OPD Fee ()"}),r.jsx("input",{type:"number",name:"opd_fee",value:s.opd_fee||"",onChange:C,className:"custom-text-input",step:"0.01",min:"0",placeholder:"e.g., 500",disabled:p})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[r.jsx("input",{type:"checkbox",id:"staff-active",name:"active",checked:s.active??!0,onChange:C,className:"w-3.5 h-3.5 rounded text-teal-600 focus:ring-teal-500"}),r.jsx("label",{htmlFor:"staff-active",className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:"Account Active"})]}),r.jsxs("div",{className:"staff-modal-footer",children:[r.jsx("button",{type:"button",onClick:n,className:"btn-compact border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:p,children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn-compact bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50",disabled:p,children:[p?r.jsx(co,{size:16,className:"animate-spin mr-2"}):r.jsx(Ko,{size:16,className:"mr-2"}),p?"Saving...":"Save"]})]})]}):null]})}):null},Z4e=()=>{const[t,e]=v.useState(!0),[n,a]=v.useState([]),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,u]=v.useState(!1),[h,p]=v.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",gemini_api_keys:"[]",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[m,x]=v.useState(null),[b,j]=v.useState(!1),[w,_]=v.useState(null),[k,C]=v.useState([]),[A,T]=v.useState(""),[E,I]=v.useState(!1),[$,U]=v.useState(null),[B,R]=v.useState(!1),z=(Se,Ee)=>{x({type:Se,message:Ee}),setTimeout(()=>x(null),3e3)},G=Se=>{switch(Se){case"doctor":return r.jsx(Af,{size:14,className:"text-blue-600"});case"receptionist":return r.jsx(gq,{size:14,className:"text-green-600"});case"pharmacy":return r.jsx(oo,{size:14,className:"text-purple-600"});case"lab":return r.jsx(hs,{size:14,className:"text-yellow-600"});default:return r.jsx(gd,{size:14,className:"text-gray-500"})}},K=Se=>{switch(Se){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},Y=v.useCallback(async()=>{e(!0);try{const Se=await ie("/staff");if(Se.ok){const Ee=await Se.json();a(Ee.map(Fe=>({...Fe,id:Fe._id||Fe.id})))}}catch(Se){console.error("Error fetching staff:",Se),z("error","Failed to load staff list")}finally{e(!1)}},[]),q=v.useCallback(async()=>{l(!0);try{const Se=await ie("/api/clinics/settings");if(Se.ok){const Ee=await Se.json();p({admissionCharge:parseFloat(Ee.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(Ee.perDayCharge||0).toFixed(2),otherCharges:parseFloat(Ee.otherCharges||0).toFixed(2),aiMemory:Ee.aiMemory||"",clinicWideSystemPrompt:Ee.clinicWideSystemPrompt||"",gemini_api_key:Ee.gemini_api_key||"",gemini_api_keys:Ee.gemini_api_keys||"[]",low_stock_threshold:Ee.low_stock_threshold!==void 0&&Ee.low_stock_threshold!==null?String(Ee.low_stock_threshold):"10",name:Ee.name||"",logoUrl:Ee.logoUrl||"",labLetterheadUrl:Ee.labLetterheadUrl||"",upi_id:Ee.upi_id||"",address:Ee.address||"",notes:Ee.notes||"",clinic_id:Ee.clinic_id,voice_ai_language:Ee.voice_ai_language||"en-US"})}}catch(Se){console.error("Error fetching settings:",Se),z("error","Failed to load settings")}finally{l(!1)}},[]),V=v.useCallback(async()=>{try{const Se=await ie("/api/clinics/gemini-api-keys");if(Se.ok){const Ee=await Se.json();C(Ee.keys||[])}}catch(Se){console.warn("Could not fetch clinic Gemini keys:",Se)}},[]),H=async()=>{if(A.trim()){I(!0);try{const Se=await ie("/api/clinics/gemini-api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:A.trim()})});if(Se.ok){const Ee=await Se.json();C(Ee.keys),T(""),z("success","Gemini API key added")}else throw new Error("Failed to add key")}catch{z("error","Failed to add Gemini API key")}finally{I(!1)}}},Q=async Se=>{U(Se);try{const Ee=await ie(`/api/clinics/gemini-api-keys/${Se}`,{method:"DELETE"});if(Ee.ok){const Fe=await Ee.json();C(Fe.keys),z("success","Gemini API key removed")}else throw new Error("Failed to remove key")}catch{z("error","Failed to remove Gemini API key")}finally{U(null)}},L=Se=>Se.length<=8?"":Se.substring(0,4)+""+Se.substring(Se.length-4);v.useEffect(()=>{Y(),q(),V()},[Y,q,V]);const te=Se=>{const{name:Ee,value:Fe}=Se.target;p(le=>({...le,[Ee]:Fe}))},me=async()=>{u(!0);try{const Se=parseFloat(h.admissionCharge),Ee=parseFloat(h.perDayCharge),Fe=parseFloat(h.otherCharges),le=parseInt(h.low_stock_threshold);if((await ie("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:h.name,admissionCharge:Se,perDayCharge:Ee,otherCharges:Fe,aiMemory:h.aiMemory,clinicWideSystemPrompt:h.clinicWideSystemPrompt,gemini_api_key:h.gemini_api_key,low_stock_threshold:le,logoUrl:h.logoUrl,labLetterheadUrl:h.labLetterheadUrl,upi_id:h.upi_id,address:h.address,notes:h.notes,voice_ai_language:h.voice_ai_language})})).ok)z("success","Changes saved successfully");else throw new Error("Failed to save")}catch(Se){console.error("Error saving settings:",Se),z("error","Failed to save settings")}finally{u(!1)}},X=n.filter(Se=>Se.name.toLowerCase().includes(i.toLowerCase())||Se.role.toLowerCase().includes(i.toLowerCase())),Re=async Se=>{for(const Ee of Se){const Fe=document.getElementById(Ee);Fe&&(Fe.scrollIntoView({behavior:"smooth",block:"center"}),Fe.classList.add("ai-feedback-glow"),await new Promise(le=>setTimeout(le,1500)),Fe.classList.remove("ai-feedback-glow"))}};return r.jsxs("div",{className:"clinic-hub-container",children:[r.jsxs("header",{className:"clinic-hub-header",children:[r.jsxs("div",{className:"clinic-hub-title",children:[r.jsx("h1",{children:"Clinic Hub"}),r.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),r.jsxs("div",{className:"clinic-hub-actions",children:[m&&r.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${m.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.message}),r.jsxs("button",{className:"btn-add-staff",onClick:()=>j(!0),children:[r.jsx(Ln,{size:16})," Add Staff"]}),r.jsxs("button",{className:"btn-save-changes",onClick:me,disabled:c,children:[r.jsx(qi,{size:16})," ",c?"Saving...":"Save Changes"]})]})]}),r.jsxs("main",{className:"clinic-hub-content",children:[r.jsxs("div",{className:"team-directory-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(zi,{size:18,className:"text-gray-500"}),r.jsxs("span",{className:"panel-title",children:["Team Directory (",n.length,")"]})]}),r.jsx("div",{className:"search-container",children:r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(fn,{size:16,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:i,onChange:Se=>s(Se.target.value)})]})}),r.jsx("div",{className:"team-list",children:t?r.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map(Se=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ee,{variant:"circular",width:40,height:40}),r.jsxs("div",{className:"flex-1",children:[r.jsx(ee,{width:120,height:16,className:"mb-1"}),r.jsx(ee,{width:80,height:12})]})]},Se))}):X.length===0?r.jsx("div",{className:"empty-state",children:"No staff found."}):X.map(Se=>r.jsxs("div",{id:`staff-member-${Se.id}`,className:"team-member-item",children:[r.jsx("div",{className:`member-avatar ${K(Se.role)}`,children:Se.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"member-info",children:[r.jsx("div",{className:"member-name",children:Se.name}),r.jsxs("div",{className:"member-role",children:[G(Se.role),Se.role]})]}),r.jsx("span",{className:`member-status ${Se.active?"status-active":"status-inactive"}`,children:Se.active?"Active":"Inactive"}),r.jsx("button",{className:"btn-edit-member",onClick:()=>_(Se.id),children:r.jsx(Ui,{size:16})})]},Se.id))})]}),r.jsxs("div",{className:"config-console-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(lq,{size:18,className:"text-gray-500"}),r.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),o?r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(ee,{variant:"circular",width:24,height:24}),r.jsx(ee,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(ee,{variant:"circular",width:24,height:24}),r.jsx(ee,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):r.jsxs("div",{className:"config-content",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(tO,{size:16})," CLINIC IDENTITY & LOCATION"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Clinic Name"}),r.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:h.name,onChange:te})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Logo URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:h.logoUrl,onChange:te})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:h.labLetterheadUrl,onChange:te})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Address"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:h.address,onChange:te})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(pd,{size:16})," FINANCIAL OPERATIONS"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Admission Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:h.admissionCharge,onChange:te})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Per Day Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:h.perDayCharge,onChange:te})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Other Charges ()"}),r.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:h.otherCharges,onChange:te})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"UPI ID"}),r.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:h.upi_id,onChange:te})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(ZD,{size:16})," INVENTORY & AI"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:h.low_stock_threshold,onChange:te})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Voice AI Language"}),r.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:h.voice_ai_language,onChange:Se=>p(Ee=>({...Ee,voice_ai_language:Se.target.value})),children:[r.jsx("option",{value:"en-US",children:"English"}),r.jsx("option",{value:"hi-IN",children:"Hindi"}),r.jsx("option",{value:"te-IN",children:"Telugu"}),r.jsx("option",{value:"bn-IN",children:"Bengali"}),r.jsx("option",{value:"mr-IN",children:"Marathi"}),r.jsx("option",{value:"ta-IN",children:"Tamil"}),r.jsx("option",{value:"gu-IN",children:"Gujarati"}),r.jsx("option",{value:"kn-IN",children:"Kannada"}),r.jsx("option",{value:"ml-IN",children:"Malayalam"}),r.jsx("option",{value:"pa-IN",children:"Punjabi"}),r.jsx("option",{value:"es-ES",children:"Spanish"}),r.jsx("option",{value:"fr-FR",children:"French"}),r.jsx("option",{value:"de-DE",children:"German"}),r.jsx("option",{value:"it-IT",children:"Italian"}),r.jsx("option",{value:"pt-PT",children:"Portuguese"}),r.jsx("option",{value:"ru-RU",children:"Russian"}),r.jsx("option",{value:"ja-JP",children:"Japanese"}),r.jsx("option",{value:"ko-KR",children:"Korean"}),r.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),r.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Primary Gemini API Key"}),r.jsx("input",{type:"text",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:h.gemini_api_key,onChange:te,placeholder:"Enter your primary Gemini API key"}),r.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary, #888)",marginTop:"4px"},children:"This key is used if no keys are available in the pool below."})]}),r.jsxs("div",{className:"form-group full-width",style:{border:"1px solid var(--border-color, #e0e0e0)",borderRadius:"10px",padding:"14px"},children:[r.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px"},children:[r.jsx(eO,{size:14})," Gemini API Keys",k.length>0&&r.jsx("span",{style:{background:"var(--accent-color, #4f46e5)",color:"#fff",borderRadius:"10px",padding:"1px 8px",fontSize:"11px",fontWeight:600},children:k.length})]}),r.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary, #888)",marginBottom:"8px",lineHeight:"1.4"},children:"Add multiple keys for load distribution. A random key is selected per API call."}),k.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px",marginBottom:"10px"},children:k.map((Se,Ee)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"var(--bg-secondary, #f5f5f5)",borderRadius:"8px",padding:"6px 10px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:"var(--text-secondary, #888)"},children:["#",Ee+1]}),r.jsx("code",{style:{fontSize:"12px",fontFamily:"monospace",color:"var(--text-primary, #333)"},children:L(Se)})]}),r.jsx("button",{onClick:()=>Q(Ee),disabled:$===Ee,title:"Remove this key",style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",opacity:$===Ee?.5:1},children:r.jsx(zn,{size:14})})]},Ee))}):r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary, #999)",textAlign:"center",padding:"10px",background:"var(--bg-secondary, #f5f5f5)",borderRadius:"8px",marginBottom:"10px"},children:"No API keys configured. Add one below."}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("input",{type:"text",className:"form-input",value:A,onChange:Se=>T(Se.target.value),onKeyDown:Se=>{Se.key==="Enter"&&!E&&A.trim()&&H()},placeholder:"Paste Gemini API Key (AIza...)",disabled:E,style:{flex:1}}),r.jsxs("button",{onClick:H,disabled:E||!A.trim(),className:"btn-add-staff",style:{padding:"6px 14px",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",whiteSpace:"nowrap"},children:[r.jsx(Ln,{size:14}),E?"Adding...":"Add"]})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),r.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:h.clinicWideSystemPrompt,onChange:te,placeholder:"Instructions for the AI..."})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),r.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:h.aiMemory,onChange:te,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),B&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:r.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:r.jsx(fG,{onClose:()=>R(!1),settings:h,staffList:n,onSettingsUpdate:q,onStaffUpdate:Y,onHighlight:Re})})}),r.jsx(X4e,{isOpen:b,onClose:()=>j(!1),onStaffAdded:Y,clinicId:h.clinic_id,fetchWithAuth:ie}),r.jsx(J4e,{staffId:w,isOpen:!!w,onClose:()=>_(null),onStaffUpdated:Y,fetchWithAuth:ie})]})},e3e="_container_ei4ki_121",t3e="_header_ei4ki_141",n3e="_title_ei4ki_187",r3e="_controls_ei4ki_203",a3e="_dateInputGroup_ei4ki_231",i3e="_dateInputLabel_ei4ki_255",s3e="_dateInput_ei4ki_231",o3e="_section_ei4ki_297",l3e="_sectionTitle_ei4ki_325",c3e="_statsGrid_ei4ki_351",u3e="_statCard_ei4ki_365",d3e="_statTitle_ei4ki_397",h3e="_statValue_ei4ki_415",f3e="_statSubtitle_ei4ki_431",p3e="_revenueGrid_ei4ki_443",m3e="_revenueCard_ei4ki_469",g3e="_revenueCardTitle_ei4ki_485",y3e="_revenueCardList_ei4ki_505",x3e="_revenueCardListItem_ei4ki_517",v3e="_tableContainer_ei4ki_557",b3e="_table_ei4ki_557",j3e="_textRight_ei4ki_639",w3e="_textGreen_ei4ki_647",N3e="_textRed_ei4ki_655",S3e="_loadingContainer_ei4ki_673",_3e="_errorAlert_ei4ki_693",C3e="_backButton_ei4ki_759",k3e="_chartsGrid_ei4ki_797",T3e="_chartCard_ei4ki_823",A3e="_chartWrapper_ei4ki_873",P3e="_analysisActionButton_ei4ki_887",at={container:e3e,header:t3e,title:n3e,controls:r3e,dateInputGroup:a3e,dateInputLabel:i3e,dateInput:s3e,section:o3e,sectionTitle:l3e,statsGrid:c3e,statCard:u3e,statTitle:d3e,statValue:h3e,statSubtitle:f3e,revenueGrid:p3e,revenueCard:m3e,revenueCardTitle:g3e,revenueCardList:y3e,revenueCardListItem:x3e,tableContainer:v3e,table:b3e,textRight:j3e,textGreen:w3e,textRed:N3e,loadingContainer:S3e,errorAlert:_3e,backButton:C3e,chartsGrid:k3e,chartCard:T3e,chartWrapper:A3e,analysisActionButton:P3e},nz=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],nP=({active:t,payload:e,label:n})=>t&&e&&e.length?r.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-800",children:n}),e.map((a,i)=>r.jsxs("p",{style:{color:a.color},className:"text-sm",children:[a.name,": ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a.value)]},i))]}):null,E3e=()=>{const t=Mt(),e=Ur(),n=new URLSearchParams(e.search),a=n.get("startDate"),i=n.get("endDate"),s=new Date().toISOString().split("T")[0],[o,l]=v.useState(a||s),[c,u]=v.useState(i||s),[h,p]=v.useState(!1),[m,x]=v.useState(null),{setAnalysisDateRange:b,analysisDateRange:j,setAnalysisData:w,registerAnalysisNavigator:_,registerAnalysisRefresher:k}=GN(),[C,A]=v.useState(0),[T,E]=v.useState(0),[I,$]=v.useState(0),[U,B]=v.useState(null),[R,z]=v.useState(null),[G,K]=v.useState(null),[Y,q]=v.useState({reception:{},pharmacy:{},lab:{},dental:{}}),[V,H]=v.useState(0),[Q,L]=v.useState(null),[te,me]=v.useState([]),[X,Re]=v.useState(null),[Se,Ee]=v.useState(null),[Fe,le]=v.useState(null),[_e,Ve]=v.useState([]),[De,ue]=v.useState(null),[Ae,ce]=v.useState(0),be=v.useCallback(async(ye,de)=>{p(!0),x(null);const se=ye||o,re=de||c;if(A(0),E(0),$(0),B(null),z(null),K(null),q({reception:{},pharmacy:{},lab:{},dental:{}}),Re(null),Re(null),H(0),L(null),me([]),Ee(null),le(null),Ve([]),ue(null),ce(0),!se||!re){x("Please select both start and end dates."),p(!1);return}try{const oe=Kde(),[je,Oe,J,xe,ge,he]=await Promise.all([ie(`/api/bills?startDate=${o}&endDate=${c}&limit=10000`),ie(`/api/payment/admission?startDate=${o}&endDate=${c}`),ie(`/api/subscriptions/transactions/manual?startDate=${o}&endDate=${c}`),ie(`/api/patient-debts/collections/analysis?startDate=${o}&endDate=${c}`),oe?ie(`/api/inventory/comprehensive-analysis?startDate=${o}&endDate=${c}&clinicId=${oe}`):Promise.resolve(null),ie(`/api/distributors/payments/analysis?startDate=${o}&endDate=${c}`)]);if(je.ok&&Oe.ok&&J.ok){const Ie=await je.json(),nt=await Oe.json(),Be=await J.json(),Ge=Ie.bills||[],it=nt.admissionPayments||[],wt=Be||[];let we={totalRevenue:0,totalCashCollected:0,revenueByType:{consultation:0,pharmacy:0,lab:0,dental:0,other:0},cashByMode:{},revenueByMode:{},detailedRevenue:{reception:{},pharmacy:{},lab:{},dental:{}},dailyRevenue:new Map,pharmacyReturns:0,discountByType:{reception:0,pharmacy:0,lab:0,dental:0,other:0},byUser:{}};const Qe=new Map,Xe=new Set;let ut=0,Ct=0,bt=0,Pe=0;const ot=(vt,It)=>{const Gt=vt.split("T")[0];we.dailyRevenue.set(Gt,(we.dailyRevenue.get(Gt)||0)+It)},kt=(vt,It,Gt,Xn,jr=!0)=>{const Va=It.toLowerCase()==="credit";jr&&(we.totalRevenue+=vt,we.revenueByType.hasOwnProperty(Gt)?we.revenueByType[Gt]+=vt:we.revenueByType.other=(we.revenueByType.other||0)+vt,ot(Xn,vt),we.revenueByMode[It]=(we.revenueByMode[It]||0)+vt),Va||(we.totalCashCollected+=vt,we.cashByMode[It]=(we.cashByMode[It]||0)+vt),jr&&(Gt==="pharmacy"?we.detailedRevenue.pharmacy[It]=(we.detailedRevenue.pharmacy[It]||0)+vt:Gt==="lab"?we.detailedRevenue.lab[It]=(we.detailedRevenue.lab[It]||0)+vt:Gt==="dental"?we.detailedRevenue.dental[It]=(we.detailedRevenue.dental[It]||0)+vt:Gt!=="debt"&&(we.detailedRevenue.reception[It]=(we.detailedRevenue.reception[It]||0)+vt)),Gt==="debt"&&(we.detailedRevenue.debt=we.detailedRevenue.debt||{},we.detailedRevenue.debt[It]=(we.detailedRevenue.debt[It]||0)+vt)};if(Ge.forEach(vt=>{var It,Gt,Xn,jr,Va,ta;if(vt.status==="paid"||vt.type==="pharmacy_return"){let Sa=parseFloat(vt.amount.toString()),gn=vt.type||"other";if(gn==="pharmacy_return"&&(we.pharmacyReturns+=Sa,gn="pharmacy"),vt.split_payments&&Array.isArray(vt.split_payments)&&vt.split_payments.length>0)vt.split_payments.forEach(Fn=>{const et=parseFloat(Fn.amount.toString()),yt=Fn.method||"Unknown",St=yt.toLowerCase()==="credit";we.totalRevenue+=et,we.revenueByType.hasOwnProperty(gn)?we.revenueByType[gn]+=et:we.revenueByType.other=(we.revenueByType.other||0)+et,ot(vt.createdAt,et),we.revenueByMode[yt]=(we.revenueByMode[yt]||0)+et,St||(we.totalCashCollected+=et,we.cashByMode[yt]=(we.cashByMode[yt]||0)+et),gn==="pharmacy"?we.detailedRevenue.pharmacy[yt]=(we.detailedRevenue.pharmacy[yt]||0)+et:gn==="lab"?we.detailedRevenue.lab[yt]=(we.detailedRevenue.lab[yt]||0)+et:gn==="dental"?we.detailedRevenue.dental[yt]=(we.detailedRevenue.dental[yt]||0)+et:we.detailedRevenue.reception[yt]=(we.detailedRevenue.reception[yt]||0)+et});else{const Fn=vt.payment_mode||"Unknown";kt(Sa,Fn,gn,vt.createdAt,!0)}let Gr=0;if(vt.items&&Array.isArray(vt.items)&&(Gr=vt.items.reduce((Fn,et)=>{const yt=et.discount_percentage||0;if(yt>0&&yt<100){const Rt=(et.total||et.total_price||0)*(yt/(100-yt));return Fn+Rt}return Fn},0)),Gr>0){gn==="pharmacy"?we.discountByType.pharmacy+=Gr:gn==="lab"?we.discountByType.lab+=Gr:gn==="dental"?we.discountByType.dental+=Gr:gn==="consultation"||gn==="other"?we.discountByType.reception+=Gr:we.discountByType.other+=Gr;const Fn=vt.created_by||((It=vt.Creator)==null?void 0:It.id)||"unknown";if(Fn!=="unknown"){const et=((Gt=vt.Creator)==null?void 0:Gt.name)||"Unknown User",yt=((Xn=vt.Creator)==null?void 0:Xn.role)||"unknown";we.byUser[Fn]||(we.byUser[Fn]={id:Fn,name:et,role:yt,revenue:0,cashFlow:0,discount:0}),we.byUser[Fn].discount+=Gr}}const An=vt.created_by||((jr=vt.Creator)==null?void 0:jr.id)||"unknown";if(An!=="unknown"){const Fn=((Va=vt.Creator)==null?void 0:Va.name)||"Unknown User",et=((ta=vt.Creator)==null?void 0:ta.role)||"unknown";if(we.byUser[An]||(we.byUser[An]={id:An,name:Fn,role:et,revenue:0,cashFlow:0,discount:0}),we.byUser[An].revenue+=Sa,!(vt.payment_mode==="credit"||vt.payment_mode==="no_cash_insurance")){let St=0;vt.split_payments&&vt.split_payments.length>0?vt.split_payments.forEach(Rt=>{Rt.method!=="credit"&&Rt.method!=="no_cash_insurance"&&(St+=parseFloat(Rt.amount.toString()))}):St=Sa,we.byUser[An].cashFlow+=St}}if(vt.Patient){const Fn=vt.Patient.id,et=new Date(vt.Patient.createdAt||"2000-01-01")>=new Date(se);et?bt+=Sa:Pe+=Sa,Xe.has(Fn)||(Xe.add(Fn),et?ut++:Ct++)}vt.items&&Array.isArray(vt.items)&&vt.items.forEach(Fn=>{if(Fn.name){const et=Qe.get(Fn.name)||{count:0,revenue:0},yt=parseFloat((Fn.quantity||0).toString()),St=parseFloat((Fn.total||Fn.total_price||0).toString());Qe.set(Fn.name,{count:et.count+yt,revenue:et.revenue+St})}})}}),it.forEach(vt=>{kt(parseFloat(vt.amount_paid.toString()),vt.payment_mode||"Unknown","consultation",vt.payment_date,!0)}),wt.forEach(vt=>{var Xn,jr;const It=parseFloat(((jr=(Xn=vt.subscriptionPlan)==null?void 0:Xn.price)==null?void 0:jr.toString())??"0"),Gt=vt.subscription_payment_method||"manual";kt(It,Gt,"consultation",vt.subscription_start_date,!0)}),xe.ok){const It=(await xe.json()).paymentModeBreakdown||{};Object.entries(It).forEach(([Gt,Xn])=>{const jr=Number(Xn);kt(jr,Gt,"debt","",!1)})}E(we.totalCashCollected),A(we.totalRevenue),$(we.pharmacyReturns),B(we.cashByMode),z(we.revenueByMode),K(we.revenueByType),q(we.detailedRevenue),Ee(we.discountByType);const Ue=Object.values(we.byUser).sort((vt,It)=>It.revenue-vt.revenue);le(Ue),ue({newPatients:ut,returningPatients:Ct,newPatientRevenue:bt,returningPatientRevenue:Pe});const jt=Array.from(Qe.entries()).map(([vt,It])=>({name:vt,...It})).sort((vt,It)=>It.count-vt.count).slice(0,10);Ve(jt);const Tt=Ge.length>0?we.totalRevenue/Ge.length:0;if(ce(Tt),he&&he.ok){const vt=await he.json();H(vt.totalPaid||0),L(vt.paymentModeBreakdown||{})}const Qn=Array.from(we.dailyRevenue.entries()).sort((vt,It)=>new Date(vt[0]).getTime()-new Date(It[0]).getTime()).map(([vt,It])=>({date:vt,amount:It}));me(Qn)}if(ge&&ge.ok){const Ie=await ge.json();Re(Ie)}}catch(oe){console.error("Analysis Fetch Error:",oe),x("Failed to fetch analysis data. Please try again.")}finally{p(!1)}},[o,c]);v.useEffect(()=>{_(ye=>{const de=`analysis-${ye}`,se=document.getElementById(de);se&&(se.scrollIntoView({behavior:"smooth",block:"center"}),se.classList.add("ai-highlight-glow"),setTimeout(()=>se.classList.remove("ai-highlight-glow"),2e3))})},[_]),v.useEffect(()=>{k(async()=>(await be(),null))},[k,be]),v.useEffect(()=>{if(j.startDate&&j.endDate){const ye=j.startDate.toISOString().split("T")[0],de=j.endDate.toISOString().split("T")[0];(ye!==o||de!==c)&&(l(ye),u(de))}},[j]),v.useEffect(()=>{const ye=new URLSearchParams(e.search),de=ye.get("section"),se=ye.get("startDate"),re=ye.get("endDate");if(se&&re){l(se),u(re);const oe=j.startDate?j.startDate.toISOString().split("T")[0]:null,je=j.endDate?j.endDate.toISOString().split("T")[0]:null;(oe!==se||je!==re)&&b({startDate:new Date(se),endDate:new Date(re)})}if(de){const oe=`analysis-${de}`;setTimeout(()=>{const je=document.getElementById(oe);je&&(je.scrollIntoView({behavior:"smooth",block:"center"}),je.classList.add("ai-highlight-glow"),setTimeout(()=>je.classList.remove("ai-highlight-glow"),2e3))},500)}},[e.search]),v.useEffect(()=>{be()},[o,c,be]),v.useEffect(()=>{!h&&(T>0||X)&&w({totalRevenue:C,totalCashFlow:T,totalExpenses:V,netCashFlow:T-V,collectionsBreakdown:U,revenueBreakdown:R,inventoryValue:0,pharmacyRevenue:(G==null?void 0:G.pharmacy)||0,labRevenue:(G==null?void 0:G.lab)||0,dentalRevenue:(G==null?void 0:G.dental)||0,receptionRevenue:((G==null?void 0:G.consultation)||0)+((G==null?void 0:G.other)||0),inventorySummary:X?{totalItemsAnalyzed:X.pharmacyAnalysis.length,netPositiveItems:X.pharmacyAnalysis.filter(ye=>ye.net_change>0).length}:null})},[C,T,V,U,R,X,G,h,w]);const ke=ye=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(ye),Ce=v.useMemo(()=>R?Object.entries(R).map(([ye,de])=>({name:ye,value:de})):[],[R]),ne=v.useMemo(()=>G?[{name:"Consultation",value:G.consultation},{name:"Pharmacy",value:G.pharmacy},{name:"Lab",value:G.lab},{name:"Dental",value:G.dental},{name:"Debt Collections",value:G.debt||0},{name:"Other",value:G.other||0}].filter(ye=>ye.value>0):[],[G]);return r.jsxs("div",{className:at.container,children:[r.jsxs("div",{className:at.header,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:at.backButton,title:"Go Back",children:[r.jsx(en,{size:20})," Back"]}),r.jsx("h1",{className:at.title,children:"Analysis Dashboard"}),r.jsxs("button",{onClick:()=>t(`/search-bills?startDate=${o}&endDate=${c}`),className:at.analysisActionButton,title:"Search Bills",style:{marginLeft:"0.5rem"},children:[r.jsx(fn,{size:16})," Search Bills"]})]}),r.jsxs("div",{className:at.controls,children:[r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"From:"}),r.jsx("input",{type:"date",className:at.dateInput,value:o,onChange:ye=>{l(ye.target.value),c&&b({startDate:new Date(ye.target.value),endDate:new Date(c)})}})]}),r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"To:"}),r.jsx("input",{type:"date",className:at.dateInput,value:c,onChange:ye=>{u(ye.target.value),o&&b({startDate:new Date(o),endDate:new Date(ye.target.value)})}})]})]})]}),m&&r.jsxs("div",{className:at.errorAlert,children:[r.jsx(zr,{size:20}),r.jsx("span",{children:m})]}),!h&&r.jsxs("div",{children:[r.jsxs("section",{className:at.section,id:"analysis-expenses",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(Nw,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Cash Flow Analysis"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Cash Inflow"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-success)"},children:ke(T)}),r.jsx("div",{className:at.statSubtitle,children:"Collections (Cash, UPI, etc.)"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Expenses"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-danger)"},children:ke(V)}),r.jsx("div",{className:at.statSubtitle,children:"Distributor Payments"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Net Cash Flow"}),r.jsx("div",{className:at.statValue,style:{color:T-V>=0?"var(--accent-success)":"var(--accent-danger)"},children:ke(T-V)}),r.jsx("div",{className:at.statSubtitle,children:"Inflow - Outflow"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Avg. Bill Value"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:ke(Ae)}),r.jsx("div",{className:at.statSubtitle,children:"Per Visit Average"})]})]}),r.jsxs("div",{className:at.revenueGrid,style:{marginTop:"1rem"},children:[U&&Object.keys(U).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Collections Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(U).map(([ye,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ye}),r.jsx("span",{children:ke(de)})]},ye))})]}),Q&&Object.keys(Q).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Expense Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Q).map(([ye,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ye}),r.jsx("span",{children:ke(de)})]},ye))})]})]})]}),r.jsxs("section",{className:at.section,id:"analysis-financial",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(pd,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Financial Performance"})]}),r.jsx("div",{className:at.statsGrid,children:r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Revenue Generated"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:ke(C)}),r.jsx("div",{className:at.statSubtitle,children:"Billings & Services (Accrual)"})]})}),r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{children:"Revenue Trend (Daily)"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(fw,{width:"100%",height:300,children:r.jsxs(eDe,{data:te,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"var(--accent-primary)",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"var(--accent-primary)",stopOpacity:.05})]})}),r.jsx(Sb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(Gc,{dataKey:"date",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Wc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:ye=>`${ye/1e3}k`}),r.jsx(Ri,{content:r.jsx(nP,{})}),r.jsx(Dd,{type:"monotone",dataKey:"amount",stroke:"var(--accent-primary)",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Payment Method Distribution"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(fw,{width:"100%",height:300,children:r.jsxs(lG,{children:[r.jsx(Kl,{data:Ce,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:Ce.map((ye,de)=>r.jsx(Wb,{fill:nz[de%nz.length]},`cell-${de}`))}),r.jsx(Ri,{content:r.jsx(nP,{})}),r.jsx(Rc,{verticalAlign:"bottom",height:36,formatter:ye=>r.jsx("span",{style:{color:"var(--text-primary)"},children:ye})})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Revenue by Source"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(fw,{width:"100%",height:300,children:r.jsxs(oG,{data:ne,children:[r.jsx(Sb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(Gc,{dataKey:"name",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Wc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:ye=>`${ye/1e3}k`}),r.jsx(Ri,{content:r.jsx(nP,{}),cursor:{fill:"var(--bg-primary)"}}),r.jsx(Ed,{dataKey:"value",fill:"var(--accent-success)",radius:[4,4,0,0]})]})})})]})]}),Y&&r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(PP,{style:{color:"var(--text-secondary)"},size:20}),r.jsx("h3",{children:"Detailed Breakdown"})]}),Y&&r.jsxs("div",{className:at.revenueGrid,children:[r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:ke(((G==null?void 0:G.consultation)||0)+((G==null?void 0:G.other)||0))}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Y.reception).map(([ye,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ye}),r.jsx("span",{children:ke(de)})]},ye))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:ke((G==null?void 0:G.pharmacy)||0)}),I<0&&r.jsxs("div",{className:`${at.textRed} text-sm mb-2`,children:["Returns: ",ke(I)]}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Y.pharmacy).map(([ye,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ye}),r.jsx("span",{children:ke(de)})]},ye))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:ke((G==null?void 0:G.lab)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Y.lab).map(([ye,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ye}),r.jsx("span",{children:ke(de)})]},ye))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:ke((G==null?void 0:G.dental)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Y.dental).map(([ye,de])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:ye}),r.jsx("span",{children:ke(de)})]},ye))})]})]}),Se&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(RJ,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Revenue Lost Due to Discount"})]}),Se.reception>0||Se.pharmacy>0||Se.lab>0||Se.dental>0||Se.other>0?r.jsxs("div",{className:at.revenueGrid,children:[Se.reception>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ke(Se.reception)})]}),Se.pharmacy>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ke(Se.pharmacy)})]}),Se.lab>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ke(Se.lab)})]}),Se.dental>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ke(Se.dental)})]}),Se.other>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Others"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ke(Se.other)})]}),r.jsxs("div",{className:at.revenueCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Total Revenue Lost"}),r.jsx("div",{className:at.statValue,style:{fontSize:"2rem",color:"var(--accent-danger)",marginBottom:"0"},children:ke(Se.reception+Se.pharmacy+Se.lab+Se.dental+Se.other)})]})]}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No discounts applied in this period."})]}),Fe&&Fe.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(zi,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"User Performance Breakdown"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"User"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Revenue"}),r.jsx("th",{children:"Cash Collected"}),r.jsx("th",{children:"Discount Given"})]})}),r.jsx("tbody",{children:Fe.map(ye=>r.jsxs("tr",{children:[r.jsx("td",{children:ye.name}),r.jsx("td",{style:{textTransform:"capitalize"},children:ye.role}),r.jsx("td",{style:{color:"var(--accent-success)"},children:ke(ye.revenue)}),r.jsx("td",{children:ke(ye.cashFlow)}),r.jsx("td",{style:{color:"var(--accent-warning)"},children:ke(ye.discount)})]},ye.id))})]})})]}),De&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(zi,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"Patient Analytics"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"New Patients"}),r.jsx("div",{className:at.statValue,children:De.newPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-success)"},children:[ke(De.newPatientRevenue)," Rev"]})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Returning"}),r.jsx("div",{className:at.statValue,children:De.returningPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-primary)"},children:[ke(De.returningPatientRevenue)," Rev"]})]})]})]}),_e.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(md,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Top Performing Items"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Quantity Sold"}),r.jsx("th",{children:"Revenue Generated"})]})}),r.jsx("tbody",{children:_e.map((ye,de)=>r.jsxs("tr",{children:[r.jsx("td",{children:ye.name}),r.jsx("td",{children:ye.count}),r.jsx("td",{style:{color:"var(--accent-success)"},children:ke(ye.revenue)})]},de))})]})})]})]}),r.jsxs("section",{className:at.section,id:"analysis-inventory",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(md,{style:{color:"var(--accent-success)"},size:24}),r.jsx("h2",{children:"Inventory Movement"})]}),X&&X.pharmacyAnalysis.length>0?r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Stock In"}),r.jsx("th",{children:"Stock Out"}),r.jsx("th",{children:"Net Change"}),r.jsx("th",{className:at.textRight,children:"Est. Revenue"}),r.jsx("th",{className:at.textRight,children:"Est. Profit"})]})}),r.jsx("tbody",{children:X.pharmacyAnalysis.map(ye=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600},children:ye.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:ye.supplier})]}),r.jsxs("td",{className:at.textGreen,children:["+",ye.quantity_in,Object.entries(ye.quantity_in_by_reason).map(([de,se])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[de,": ",se]},de))]}),r.jsxs("td",{className:at.textRed,children:["-",ye.quantity_out,Object.entries(ye.quantity_out_by_reason).map(([de,se])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[de,": ",se]},de))]}),r.jsx("td",{children:r.jsxs("span",{style:{fontWeight:600},className:ye.net_change>=0?at.textGreen:at.textRed,children:[ye.net_change>0?"+":"",ye.net_change]})}),r.jsx("td",{className:at.textRight,children:ke(ye.revenue)}),r.jsx("td",{className:`${at.textRight} ${ye.profit>=0?at.textGreen:at.textRed}`,children:ke(ye.profit)})]},ye.drug_id))})]})}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No inventory movement recorded for this period."})]})]}),h&&r.jsxs("div",{className:at.loadingContainer,style:{display:"block"},children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(ee,{variant:"circular",width:24,height:24}),r.jsx(ee,{width:200,height:24})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx(ee,{width:"60%",height:20}),r.jsx(ee,{width:"80%",height:32}),r.jsx(ee,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(ee,{width:"60%",height:20}),r.jsx(ee,{width:"80%",height:32}),r.jsx(ee,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(ee,{width:"60%",height:20}),r.jsx(ee,{width:"80%",height:32}),r.jsx(ee,{width:"40%",height:16})]})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx(ee,{width:180,height:24,className:"mb-4"}),r.jsx(ee,{width:"100%",height:250})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(ee,{width:180,height:24,className:"mb-4"}),r.jsx(ee,{width:"100%",height:200,variant:"circular",style:{margin:"0 auto"}})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(ee,{width:180,height:24,className:"mb-4"}),r.jsx(ee,{width:"100%",height:250})]})]})})]})]})},D3e=()=>{const t=Mt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[,s]=v.useState(null),[o,l]=v.useState(!1),[c,u]=v.useState(null),[h,p]=v.useState({name:"",description:"",columns:[]}),m=async()=>{i(!0);try{const C=await ie("/api/custom-tables");if(!C.ok)throw new Error("Failed to fetch tables");const A=await C.json();n(A)}catch(C){s(C.message)}finally{i(!1)}};v.useEffect(()=>{m()},[]);const x=C=>{C?(u(C),p({name:C.name,description:C.description,columns:[...C.columns]})):(u(null),p({name:"",description:"",columns:[]})),l(!0)},b=async()=>{try{const C=c?`/api/custom-tables/${c.id}`:"/api/custom-tables";if(!(await ie(C,{method:c?"PUT":"POST",body:JSON.stringify(h)})).ok)throw new Error("Failed to save table");l(!1),m()}catch(C){alert(C.message)}},j=async C=>{if(confirm("Are you sure? This will delete all data in this table!"))try{await ie(`/api/custom-tables/${C}`,{method:"DELETE"}),m()}catch(A){alert(A.message)}},w=()=>{p(C=>({...C,columns:[...C.columns,{key:`col_${Date.now()}`,label:"New Column",type:"text"}]}))},_=(C,A,T)=>{const E=[...h.columns];E[C]={...E[C],[A]:T},A==="label"&&(E[C].key=T.toLowerCase().replace(/[^a-z0-9]/g,"_")),p(I=>({...I,columns:E}))},k=C=>{p(A=>({...A,columns:A.columns.filter((T,E)=>E!==C)}))};return r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("h1",{children:[r.jsx(Fb,{size:24})," Custom Tables Manager"]}),r.jsxs("button",{className:"primary-button",onClick:()=>x(),children:[r.jsx(Ln,{size:16})," Create New Table"]})]}),a?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"tables-grid",children:e.map(C=>r.jsxs("div",{className:"table-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:C.name}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>x(C),children:r.jsx(Ui,{size:16})}),r.jsx("button",{onClick:()=>j(C.id),className:"danger",children:r.jsx(zn,{size:16})})]})]}),r.jsx("p",{className:"description",children:C.description||"No description"}),r.jsxs("div",{className:"column-preview",children:[C.columns.length," columns defined"]}),r.jsx("button",{className:"secondary-button",onClick:()=>t(`/custom-tables/${C.id}`),children:"View Data & Records"})]},C.id))}),o&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:c?"Edit Table":"Create New Table"}),r.jsx("button",{onClick:()=>l(!1),children:r.jsx(Ot,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Table Name"}),r.jsx("input",{value:h.name,onChange:C=>p({...h,name:C.target.value}),placeholder:"e.g., Equipment Log"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{value:h.description,onChange:C=>p({...h,description:C.target.value})})]}),r.jsxs("div",{className:"columns-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h3",{children:"Columns"}),r.jsx("button",{onClick:w,className:"icon-button",children:r.jsx(Ln,{size:16})})]}),h.columns.map((C,A)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{value:C.label,onChange:T=>_(A,"label",T.target.value),placeholder:"Column Name"}),r.jsxs("select",{value:C.type,onChange:T=>_(A,"type",T.target.value),children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>k(A),className:"danger",children:r.jsx(zn,{size:14})})]},A))]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:b,className:"primary-button",children:"Save Table"})})]})})]})},O3e=()=>{const{id:t}=Da(),e=Mt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,u]=v.useState(null),[h,p]=v.useState(!1),[m,x]=v.useState(!1),[b,j]=v.useState(null),[w,_]=v.useState({});v.useEffect(()=>{t&&k()},[t]);const k=async()=>{l(!0);try{const I=await ie(`/api/custom-tables/${t}`);if(!I.ok)throw new Error("Failed to fetch table definition");const $=await I.json();a($);const U=await ie(`/api/custom-tables/${t}/records`);if(!U.ok)throw new Error("Failed to fetch records");const B=await U.json();s(B)}catch(I){u(I.message)}finally{l(!1)}},C=I=>{I?(j(I),_({...I.data})):(j(null),_({})),x(!0)},A=async()=>{try{const I=b?`/api/custom-tables/records/${b.id}`:`/api/custom-tables/${t}/records`;if(!(await ie(I,{method:b?"PUT":"POST",body:JSON.stringify({data:w})})).ok)throw new Error("Failed to save record");x(!1),k()}catch(I){alert(I.message)}},T=async I=>{if(confirm("Delete this record?"))try{await ie(`/api/custom-tables/records/${I}`,{method:"DELETE"}),k()}catch($){alert($.message)}},E=I=>{const $=w[I.key]||"";switch(I.type){case"boolean":return r.jsxs("select",{value:$,onChange:U=>_({...w,[I.key]:U.target.value}),children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"true",children:"Yes"}),r.jsx("option",{value:"false",children:"No"})]});case"number":return r.jsx("input",{type:"number",value:$,onChange:U=>_({...w,[I.key]:U.target.value})});case"date":return r.jsx("input",{type:"date",value:$,onChange:U=>_({...w,[I.key]:U.target.value})});default:return r.jsx("input",{type:"text",value:$,onChange:U=>_({...w,[I.key]:U.target.value})})}};return o?r.jsx("div",{className:"p-4",children:"Loading..."}):c||!n?r.jsxs("div",{className:"p-4 error",children:["Error: ",c||"Table not found"]}):r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[r.jsx("button",{onClick:()=>e("/custom-tables"),className:"icon-button",children:r.jsx(en,{size:20})}),r.jsx("h1",{children:n.name})]}),r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>p(!1),className:`view-mode-btn ${h?"":"active"}`,title:"List View",children:[r.jsx(Rb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>p(!0),className:`view-mode-btn ${h?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(kf,{size:18})," Excel"]})]}),r.jsxs("button",{className:"primary-button",onClick:()=>C(),children:[r.jsx(Ln,{size:16})," Add Record"]})]}),r.jsx("div",{className:"table-wrapper",style:{background:"var(--bg-card)",borderRadius:"12px",padding:"20px",overflowX:"auto"},children:h?r.jsx(Hb,{columns:n.columns.map(I=>({key:I.key,label:I.label,editable:!0,type:I.type})),data:i.map(I=>({...I.data,id:I.id})),editable:!0,showRowNumbers:!0,title:n.name,onSave:async I=>{const $=I.map(async U=>{const B=i.find(R=>R.id===U.id);if(B&&JSON.stringify(B.data)!==JSON.stringify(U)){const{id:R,...z}=U;if(JSON.stringify(B.data)!==JSON.stringify(z))return ie(`/api/custom-tables/records/${U.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:z})})}});try{await Promise.all($),k()}catch(U){alert("Error saving changes"),console.error(U)}}}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[n.columns.map(I=>r.jsx("th",{style:{textAlign:"left",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:I.label},I.key)),r.jsx("th",{style:{width:"100px",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:n.columns.length+1,style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"No records yet"})}):i.map(I=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.columns.map($=>r.jsx("td",{style:{padding:"12px"},children:$.type==="boolean"?I.data[$.key]==="true"?"Yes":"No":String(I.data[$.key]||"-")},$.key)),r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>C(I),className:"icon-button",children:r.jsx(Ui,{size:16})}),r.jsx("button",{onClick:()=>T(I.id),className:"icon-button",style:{color:"#dc3545"},children:r.jsx(zn,{size:16})})]})})]},I.id))})]})}),m&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:b?"Edit Record":"Add New Record"}),r.jsx("button",{onClick:()=>x(!1),children:r.jsx(Ot,{size:20})})]}),r.jsx("div",{className:"modal-body",children:n.columns.map(I=>r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:I.label}),E(I)]},I.key))}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:A,className:"primary-button",children:"Save Record"})})]})})]})},M3e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(""),o=Mt();v.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await ie("/api/dashboards");if(p.ok){const m=await p.json();e(m)}}catch(p){console.error("Error fetching dashboards:",p)}finally{a(!1)}},c=async(p,m)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await ie(`/api/dashboards/${m}`,{method:"DELETE"}),e(t.filter(x=>x.id!==m))}catch(x){console.error("Error deleting dashboard:",x)}},u=p=>{try{const m=new Date(p);return m.toLocaleDateString("en-US",{month:"short",day:"numeric",year:m.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},h=t.filter(p=>p.name.toLowerCase().includes(i.toLowerCase())||p.description&&p.description.toLowerCase().includes(i.toLowerCase()));return r.jsxs("div",{className:"custom-dashboards-container",children:[r.jsxs("div",{className:"cdp-header",children:[r.jsxs("div",{className:"cdp-title-row",children:[r.jsxs("div",{className:"cdp-title",children:[r.jsx("div",{className:"cdp-icon",children:r.jsx(kf,{size:20})}),r.jsxs("div",{children:[r.jsx("h1",{children:"Custom Dashboards"}),r.jsxs("span",{className:"cdp-subtitle",children:[t.length," dashboard",t.length!==1?"s":""]})]})]}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Ln,{size:16}),r.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),t.length>0&&r.jsxs("div",{className:"cdp-search",children:[r.jsx(fn,{size:16}),r.jsx("input",{type:"text",placeholder:"Search dashboards...",value:i,onChange:p=>s(p.target.value)})]})]}),r.jsx("div",{className:"cdp-content",children:n?r.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(p=>r.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx(ee,{width:18,height:18,variant:"circular"}),r.jsx(ee,{width:80,height:12})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx(ee,{width:"70%",height:24,style:{marginBottom:"8px"}}),r.jsx(ee,{width:"90%",height:16})]}),r.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[r.jsx(ee,{width:60,height:32}),r.jsx(ee,{width:60,height:32}),r.jsx(ee,{width:32,height:32})]})]},p))}):h.length===0?r.jsxs("div",{className:"cdp-empty",children:[r.jsx("div",{className:"cdp-empty-icon",children:r.jsx(og,{size:48})}),i?r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No results found"}),r.jsx("p",{children:"Try a different search term"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No dashboards yet"}),r.jsx("p",{children:"Create your first custom dashboard to get started"}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Ln,{size:16})," Create Dashboard"]})]})]}):r.jsx("div",{className:"cdp-grid",children:h.map(p=>r.jsxs("div",{className:"cdp-card",onClick:()=>o(`/dashboards/${p.id}`),children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx("div",{className:"cdp-card-icon",children:r.jsx(og,{size:18})}),r.jsx("div",{className:"cdp-card-meta",children:p.created_at&&r.jsxs("span",{className:"cdp-card-date",children:[r.jsx(qr,{size:12}),u(p.created_at)]})})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx("h3",{children:p.name}),r.jsx("p",{children:p.description||"No description"})]}),r.jsxs("div",{className:"cdp-card-footer",children:[r.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:m=>{m.stopPropagation(),o(`/dashboards/${p.id}`)},children:[r.jsx(qm,{size:14}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:m=>{m.stopPropagation(),o(`/dashboards/${p.id}/edit`)},children:[r.jsx(Ui,{size:14}),r.jsx("span",{children:"Edit"})]}),r.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:m=>c(m,p.id),children:r.jsx(zn,{size:14})})]})]},p.id))})})]})},I3e=({isOpen:t,onClose:e,onConfirm:n})=>{const[a,i]=v.useState({}),[s,o]=v.useState(""),[l,c]=v.useState(""),[u,h]=v.useState([]),[p,m]=v.useState([]),[x,b]=v.useState(!1);v.useEffect(()=>{t&&j()},[t]);const j=async()=>{b(!0);try{const I=await ie("/api/dashboards/table-relations");if(I.ok){const $=await I.json();i($);const U=Object.keys($);U.length>0&&o(U[0])}}catch(I){console.error("Error fetching table relations:",I)}finally{b(!1)}},w=I=>{o(I),c(""),h([]),m([])},_=I=>{c(I),m([])},k=(I,$,U)=>{I.includes(U)?$(I.filter(B=>B!==U)):$([...I,U])},C=()=>{var I,$;if(!s||!l){alert("Please select both primary and related tables");return}if(u.length===0&&p.length===0){alert("Please select at least one column");return}n({primary:s,related:l,primaryColumns:u,relatedColumns:p,primaryLabel:((I=a[s])==null?void 0:I.label)||s,relatedLabel:(($=a[l])==null?void 0:$.label)||l}),e()};if(!t)return null;const A=a[s],T=(A==null?void 0:A.relations)||{},E=a[l];return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content join-builder-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsxs("h3",{children:[r.jsx(cq,{size:18,style:{marginRight:"6px"}})," Join Tables Builder"]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Ot,{size:18})})]}),r.jsx("div",{className:"join-builder-body",children:x?r.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"var(--text-secondary, #64748b)"},children:"Loading tables..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"join-step-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 1:"})," Select Primary Table"]}),r.jsx("select",{value:s,onChange:I=>w(I.target.value),className:"join-select",children:Object.entries(a).filter(([I,$])=>Object.keys($.relations).length>0).map(([I,$])=>r.jsx("option",{value:I,children:$.label},I))})]}),s&&Object.keys(T).length>0&&r.jsxs("div",{className:"join-step-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 2:"})," Select Related Table"]}),r.jsxs("select",{value:l,onChange:I=>_(I.target.value),className:"join-select",children:[r.jsx("option",{value:"",children:"-- Select --"}),Object.entries(T).map(([I,$])=>r.jsxs("option",{value:I,children:[$.label," (via ",$.foreignKey,")"]},I))]})]}),s&&A&&r.jsxs("div",{className:"join-step-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",A.label,":"]})}),r.jsx("div",{className:"columns-chip-container",children:A.columns.map(I=>r.jsxs("label",{className:`column-chip-label ${u.includes(I)?"primary-selected":"unselected"}`,children:[r.jsx("input",{type:"checkbox",checked:u.includes(I),onChange:()=>k(u,h,I),style:{display:"none"}}),I]},I))})]}),l&&E&&r.jsxs("div",{className:"join-step-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",E.label,":"]})}),r.jsx("div",{className:"columns-chip-container",children:E.columns.map(I=>r.jsxs("label",{className:`column-chip-label ${p.includes(I)?"related-selected":"unselected"}`,children:[r.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>k(p,m,I),style:{display:"none"}}),I]},I))})]}),(u.length>0||p.length>0)&&r.jsxs("div",{className:"join-preview-box",children:[r.jsx("span",{className:"join-preview-title",children:"Preview Columns:"}),r.jsxs("div",{className:"join-preview-content",children:[u.map(I=>r.jsxs("span",{className:"join-preview-primary",children:[A==null?void 0:A.label,".",I]},I)),p.map(I=>r.jsxs("span",{className:"join-preview-related",children:[E==null?void 0:E.label,".",I]},I))]})]})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"join-btn join-btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{className:"join-btn join-btn-primary",onClick:C,disabled:!l||x,children:"Create Joined Widget"})]})]})})},R3e=({isOpen:t,onClose:e,onCreated:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([{key:"name",label:"Name",type:"text"}]),[u,h]=v.useState(!1),p=()=>{c([...l,{key:"",label:"",type:"text"}])},m=j=>{c(l.filter((w,_)=>_!==j))},x=(j,w,_)=>{const k=[...l];k[j]={...k[j],[w]:_},w==="label"&&!k[j].key&&(k[j].key=_.toLowerCase().replace(/\s+/g,"_")),c(k)},b=async()=>{if(!a.trim()){alert("Table name is required");return}if(l.length===0||l.some(j=>!j.key||!j.label)){alert("All columns must have a key and label");return}h(!0);try{(await ie("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,description:s,columns:l})})).ok?(n(),e(),i(""),o(""),c([{key:"name",label:"Name",type:"text"}])):alert("Failed to create table")}catch(j){console.error("Error creating table:",j),alert("Error creating table")}finally{h(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content create-table-modal-content",children:[r.jsxs("div",{className:"create-table-header",children:[r.jsxs("h3",{children:[r.jsx(Fb,{size:20})," Create Custom Table"]}),r.jsx("button",{onClick:e,className:"close-btn",children:r.jsx(Ot,{size:20})})]}),r.jsxs("div",{className:"form-content",children:[r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Table Name *"}),r.jsx("input",{type:"text",value:a,onChange:j=>i(j.target.value),placeholder:"e.g., Patient Notes, Appointments",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),placeholder:"Optional description",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Columns"}),r.jsx("div",{className:"columns-container",children:l.map((j,w)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{type:"text",value:j.label,onChange:_=>x(w,"label",_.target.value),placeholder:"Column label",className:"modal-input column-label-input"}),r.jsx("input",{type:"text",value:j.key,onChange:_=>x(w,"key",_.target.value),placeholder:"key",className:"modal-input column-key-input"}),r.jsxs("select",{value:j.type,onChange:_=>x(w,"type",_.target.value),className:"column-type-select",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>m(w),className:"remove-col-btn",disabled:l.length<=1,children:r.jsx(zn,{size:16})})]},w))}),r.jsxs("button",{onClick:p,className:"add-col-btn",children:[r.jsx(Ln,{size:14})," Add Column"]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:b,disabled:u,className:"create-button",children:u?"Creating...":"Create Table"})]})]})}):null},rz=()=>{const{id:t}=Da(),e=Mt(),n=!!t,[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([]),[u,h]=v.useState(!1),[p,m]=v.useState([]),[x,b]=v.useState(!1),[j,w]=v.useState("stat"),[_,k]=v.useState(""),[C,A]=v.useState("api:patients"),[T,E]=v.useState([]),[I,$]=v.useState(!1),[U,B]=v.useState(!1);v.useEffect(()=>{R(),n&&z()},[t]);const R=async()=>{try{const Q=await ie("/api/dashboards/data-sources");if(Q.ok){const L=await Q.json();m(L),L.length>0&&A(L[0].key)}}catch(Q){console.error("Error fetching data sources:",Q)}},z=async()=>{try{const Q=await ie(`/api/dashboards/${t}`);if(Q.ok){const L=await Q.json();i(L.name),o(L.description),c(L.widgets||[])}}catch(Q){console.error("Error fetching dashboard:",Q)}},G=async()=>{if(!a.trim())return alert("Name is required");h(!0);try{const Q={name:a,description:s,widgets:l},L=n?`/api/dashboards/${t}`:"/api/dashboards";(await ie(L,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)})).ok?e("/dashboards"):alert("Failed to save dashboard")}catch(Q){console.error("Error saving dashboard:",Q)}finally{h(!1)}},K=()=>{var te;const Q=p.find(me=>me.key===C),L={id:Date.now().toString(),type:j,title:_||(Q==null?void 0:Q.label)||"New Widget",dataSource:C,config:{columns:T.length>0?T:((te=Q==null?void 0:Q.columns)==null?void 0:te.slice(0,3))||[]}};c([...l,L]),b(!1),k(""),E([])},Y=Q=>{c(l.filter(L=>L.id!==Q))},q=Q=>{A(Q),E([])},V=p.find(Q=>Q.key===C),H=Q=>{const L={id:Date.now().toString(),type:"table",title:`${Q.primaryLabel} + ${Q.relatedLabel}`,dataSource:`dynamic:${Q.primary}:${Q.related}`,config:{primaryColumns:Q.primaryColumns,relatedColumns:Q.relatedColumns}};c([...l,L])};return r.jsxs("div",{className:"dashboard-builder-container",children:[r.jsxs("div",{className:"builder-header",children:[r.jsxs("button",{className:"back-btn",onClick:()=>e("/dashboards"),children:[r.jsx(en,{size:16})," Back"]}),r.jsxs("div",{className:"title-inputs",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:a,onChange:Q=>i(Q.target.value),className:"dashboard-name-input"}),r.jsx("input",{type:"text",placeholder:"Description (Optional)",value:s,onChange:Q=>o(Q.target.value),className:"dashboard-desc-input"})]}),r.jsxs("button",{className:"primary-button",onClick:G,disabled:u,children:[r.jsx(qi,{size:16})," ",u?"Saving...":"Save Dashboard"]})]}),r.jsx("div",{className:"widgets-area",children:l.length===0?r.jsxs("div",{className:"empty-canvas",children:[r.jsx("p",{children:"Canvas is empty. Add a widget to start."}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"},children:[r.jsxs("button",{onClick:()=>b(!0),className:"add-widget-btn",children:[r.jsx(Ln,{size:16})," Add Widget"]}),r.jsxs("button",{onClick:()=>$(!0),className:"add-widget-btn",style:{background:"#2196F3"},children:[r.jsx(cq,{size:16})," Create Joined Widget"]}),r.jsxs("button",{onClick:()=>B(!0),className:"add-widget-btn",style:{background:"#4CAF50"},children:[r.jsx(Fb,{size:16})," Create Custom Table"]})]})]}):r.jsxs("div",{className:"widgets-grid",children:[l.map(Q=>r.jsxs("div",{className:"widget-wrapper",children:[r.jsx("div",{className:"widget-actions-overlay",children:r.jsx("button",{onClick:()=>Y(Q.id),className:"remove-widget-btn",children:r.jsx(zn,{size:14})})}),r.jsx(UM,{widget:Q})]},Q.id)),r.jsxs("div",{className:"add-more-card",onClick:()=>b(!0),children:[r.jsx(Ln,{size:24}),r.jsx("span",{children:"Add Widget"})]})]})}),x&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h3",{children:"Add Widget"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title (Optional)"}),r.jsx("input",{type:"text",placeholder:"Leave blank for auto-title",value:_,onChange:Q=>k(Q.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type"}),r.jsxs("select",{value:j,onChange:Q=>w(Q.target.value),children:[r.jsx("option",{value:"stat",children:"Statistic (Count)"}),r.jsx("option",{value:"table",children:"Table (List)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Data Source"}),r.jsxs("select",{value:C,onChange:Q=>q(Q.target.value),children:[r.jsx("optgroup",{label:"Single Tables",children:p.filter(Q=>!Q.isCustom&&!Q.isJoin).map(Q=>r.jsx("option",{value:Q.key,children:Q.label},Q.key))}),p.some(Q=>Q.isJoin)&&r.jsx("optgroup",{label:"Joined Tables (Multi-Table)",children:p.filter(Q=>Q.isJoin).map(Q=>r.jsx("option",{value:Q.key,children:Q.label},Q.key))}),p.some(Q=>Q.isCustom)&&r.jsx("optgroup",{label:"Custom Tables",children:p.filter(Q=>Q.isCustom).map(Q=>r.jsx("option",{value:Q.key,children:Q.label},Q.key))})]}),V&&r.jsx("small",{style:{color:"#666"},children:V.description})]}),j==="table"&&(V==null?void 0:V.columns)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Columns to Display (select multiple)"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:V.columns.map(Q=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:T.includes(Q),onChange:L=>{L.target.checked?E([...T,Q]):E(T.filter(te=>te!==Q))}}),Q]},Q))})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>b(!1),children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:K,children:"Add"})]})]})}),r.jsx(I3e,{isOpen:I,onClose:()=>$(!1),onConfirm:H}),r.jsx(R3e,{isOpen:U,onClose:()=>B(!1),onCreated:()=>R()})]})},L3e=()=>{const{id:t}=Da(),e=Mt(),[n,a]=v.useState(null);if(v.useEffect(()=>{(async()=>{try{const o=await ie(`/api/dashboards/${t}`);if(o.ok){const l=await o.json();a(l)}}catch(o){console.error("Error fetching dashboard:",o)}})()},[t]),!n)return r.jsx("div",{className:"temp-dash-empty",children:"Loading..."});const i=n.widgets||[];return r.jsxs("div",{className:"saved-dash-container",children:[r.jsxs("div",{className:"saved-dash-header",children:[r.jsxs("div",{className:"saved-dash-title-group",children:[r.jsx("button",{className:"saved-dash-back-btn",onClick:()=>e("/dashboards"),children:r.jsx(en,{size:16})}),r.jsx("div",{className:"saved-dash-icon",children:r.jsx(og,{size:16})}),r.jsxs("div",{className:"saved-dash-title-text",children:[r.jsx("h2",{children:n.name}),n.description&&r.jsx("span",{className:"saved-dash-description",children:n.description})]})]}),r.jsx("div",{className:"saved-dash-actions",children:r.jsxs("button",{className:"saved-dash-edit-btn",onClick:()=>e(`/dashboards/${t}/edit`),children:[r.jsx(Ui,{size:12})," Edit"]})})]}),r.jsx("div",{className:"saved-dash-body",children:i.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets in this dashboard. Click Edit to add some!"}):r.jsx("div",{className:"temp-dash-grid",children:i.map((s,o)=>r.jsx(UM,{widget:s,autoHideEmptyColumns:!0},s.id||`view-widget-${o}`))})})]})},rP=["#8b5cf6","#3b82f6","#06b6d4","#10b981","#22c55e","#f59e0b","#f97316","#ef4444","#ec4899","#a855f7"],F3e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,u]=v.useState(!1),[h,p]=v.useState({name:"",key:"",color:"#6b7280",description:""}),[m,x]=v.useState(!1),b=async()=>{a(!0),s(null);try{const U=await ie("/api/clinic-roles");if(U.ok){const B=await U.json();e(B)}else s("Failed to load roles")}catch{s("Failed to connect to server")}finally{a(!1)}};v.useEffect(()=>{b()},[]);const j=U=>U.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),w=U=>{p(B=>({...B,name:U,key:o?B.key:j(U)}))},_=async()=>{if(h.name.trim()){x(!0);try{const U=await ie("/api/clinic-roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h.name.trim(),key:h.key||j(h.name),color:h.color,description:h.description.trim()||null})});if(U.ok)await b(),u(!1),p({name:"",key:"",color:"#6b7280",description:""});else{const B=await U.json();s(B.message||"Failed to create role")}}catch{s("Failed to create role")}finally{x(!1)}}},k=async()=>{if(!(!o||!h.name.trim())){x(!0);try{const U=await ie(`/api/clinic-roles/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h.name.trim(),color:h.color,description:h.description.trim()||null})});if(U.ok)await b(),l(null),p({name:"",key:"",color:"#6b7280",description:""});else{const B=await U.json();s(B.message||"Failed to update role")}}catch{s("Failed to update role")}finally{x(!1)}}},C=async U=>{if(!U.isSystem&&window.confirm(`Delete role "${U.name}"? This cannot be undone.`))try{const B=await ie(`/api/clinic-roles/${U.id}`,{method:"DELETE"});if(B.ok)await b();else{const R=await B.json();s(R.message||"Failed to delete role")}}catch{s("Failed to delete role")}},A=U=>{l(U),p({name:U.name,key:U.key,color:U.color,description:U.description||""}),u(!1)},T=()=>{u(!0),l(null),p({name:"",key:"",color:rP[Math.floor(Math.random()*rP.length)],description:""})},E=()=>{u(!1),l(null),p({name:"",key:"",color:"#6b7280",description:""})},I=t.filter(U=>U.isSystem),$=t.filter(U=>!U.isSystem);return r.jsxs("div",{className:"role-management-page",children:[r.jsxs("div",{className:"role-management-header",children:[r.jsxs("div",{className:"header-title",children:[r.jsx(lg,{size:28}),r.jsxs("div",{children:[r.jsx("h1",{children:"Role Management"}),r.jsx("p",{children:"Manage custom roles for your clinic staff"})]})]}),r.jsxs("button",{className:"create-role-btn",onClick:T,disabled:c,children:[r.jsx(Ln,{size:18}),"Create Custom Role"]})]}),i&&r.jsxs("div",{className:"role-error-banner",children:[r.jsx(zr,{size:18}),i,r.jsx("button",{onClick:()=>s(null),children:r.jsx(Ot,{size:16})})]}),(c||o)&&r.jsxs("div",{className:"role-form-card",children:[r.jsx("h3",{children:o?"Edit Role":"Create New Role"}),r.jsxs("div",{className:"role-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Name *"}),r.jsx("input",{type:"text",value:h.name,onChange:U=>w(U.target.value),placeholder:"e.g., Senior Doctor, Ward Nurse"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Key"}),r.jsx("input",{type:"text",value:h.key,onChange:U=>p(B=>({...B,key:U.target.value})),placeholder:"auto-generated",disabled:!!o})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:h.description,onChange:U=>p(B=>({...B,description:U.target.value})),placeholder:"Brief description of role responsibilities"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx(AJ,{size:14}),"Color"]}),r.jsxs("div",{className:"color-picker",children:[rP.map(U=>r.jsx("button",{className:`color-option ${h.color===U?"selected":""}`,style:{background:U},onClick:()=>p(B=>({...B,color:U}))},U)),r.jsx("input",{type:"color",value:h.color,onChange:U=>p(B=>({...B,color:U.target.value})),className:"custom-color-input"})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"cancel-btn",onClick:E,children:"Cancel"}),r.jsxs("button",{className:"save-btn",onClick:o?k:_,disabled:m||!h.name.trim(),children:[r.jsx(Is,{size:16}),m?"Saving...":o?"Update Role":"Create Role"]})]})]})]}),r.jsxs("div",{className:"roles-container",children:[r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"System Roles"}),r.jsx("p",{className:"section-desc",children:"Default roles - can be customized but not deleted"}),n?r.jsx("div",{className:"roles-grid",children:[1,2,3].map(U=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",style:{marginBottom:"10px"},children:[r.jsx(ee,{variant:"circular",width:12,height:12,style:{marginRight:"8px"}}),r.jsx(ee,{width:100,height:20})]}),r.jsx(ee,{width:80,height:16,style:{marginBottom:"10px"}}),r.jsx(ee,{width:"100%",height:20}),r.jsx("div",{className:"role-actions",style:{marginTop:"15px"},children:r.jsx(ee,{width:60,height:24})})]},U))}):r.jsx("div",{className:"roles-grid",children:I.map(U=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:U.color}}),r.jsx("span",{className:"role-name",children:U.name}),r.jsx("span",{className:"system-badge",children:"System"})]}),r.jsx("div",{className:"role-key",children:U.key}),U.description&&r.jsx("div",{className:"role-description",children:U.description}),r.jsx("div",{className:"role-actions",children:r.jsxs("button",{className:"edit-role-btn",onClick:()=>A(U),children:[r.jsx(Ms,{size:14}),"Edit"]})})]},U.id))})]}),r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"Custom Roles"}),r.jsx("p",{className:"section-desc",children:"Roles created for your clinic"}),$.length===0?r.jsxs("div",{className:"no-roles",children:[r.jsx(lg,{size:32}),r.jsx("p",{children:"No custom roles created yet"}),r.jsxs("button",{onClick:T,children:[r.jsx(Ln,{size:16}),"Create your first custom role"]})]}):r.jsx("div",{className:"roles-grid",children:$.map(U=>r.jsxs("div",{className:"role-card custom",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:U.color}}),r.jsx("span",{className:"role-name",children:U.name})]}),r.jsx("div",{className:"role-key",children:U.key}),U.description&&r.jsx("div",{className:"role-description",children:U.description}),r.jsxs("div",{className:"role-actions",children:[r.jsxs("button",{className:"edit-role-btn",onClick:()=>A(U),children:[r.jsx(Ms,{size:14}),"Edit"]}),r.jsxs("button",{className:"delete-role-btn",onClick:()=>C(U),children:[r.jsx(zn,{size:14}),"Delete"]})]})]},U.id))})]})]})]})},$3e="_container_1iykk_47",B3e="_progressBar_1iykk_67",z3e="_sidebar_1iykk_97",q3e="_sidebarTitle_1iykk_161",U3e="_searchBox_1iykk_193",V3e="_searchInput_1iykk_203",H3e="_searchIcon_1iykk_237",G3e="_navSection_1iykk_255",W3e="_navSectionTitle_1iykk_263",K3e="_navLink_1iykk_287",Y3e="_activeNavLink_1iykk_367",Q3e="_navLinkIcon_1iykk_387",X3e="_content_1iykk_409",J3e="_header_1iykk_425",Z3e="_headerContent_1iykk_493",e5e="_title_1iykk_503",t5e="_subtitle_1iykk_563",n5e="_heroVideoWrapper_1iykk_577",r5e="_heroVideo_1iykk_577",a5e="_headerBadges_1iykk_623",i5e="_headerBadge_1iykk_623",s5e="_section_1iykk_673",o5e="_sectionTitle_1iykk_713",l5e="_sectionTitleIcon_1iykk_737",c5e="_sectionContent_1iykk_761",u5e="_featureList_1iykk_799",d5e="_featureItem_1iykk_815",h5e="_featureIcon_1iykk_847",f5e="_featureText_1iykk_861",p5e="_infoBox_1iykk_887",m5e="_infoBoxTitle_1iykk_929",g5e="_infoBoxContent_1iykk_951",y5e="_workflowList_1iykk_965",x5e="_kbd_1iykk_1007",v5e="_moduleLinkBtn_1iykk_1227",b5e="_uiGrid_1iykk_1279",j5e="_uiCard_1iykk_1293",w5e="_uiLabel_1iykk_1325",N5e="_demoBtn_1iykk_1349",S5e="_demoBtnPrimary_1iykk_1371",_5e="_demoBtnSecondary_1iykk_1383",C5e="_demoBtnDanger_1iykk_1395",k5e="_demoBadge_1iykk_1409",T5e="_demoBadgeSuccess_1iykk_1433",A5e="_demoBadgeWarning_1iykk_1445",P5e="_demoBadgeError_1iykk_1457",E5e="_iconRow_1iykk_1469",D5e="_faqList_1iykk_1503",O5e="_faqItem_1iykk_1517",M5e="_faqQuestion_1iykk_1541",I5e="_faqIcon_1iykk_1571",R5e="_faqIconOpen_1iykk_1581",L5e="_faqAnswer_1iykk_1589",F5e="_footer_1iykk_1635",$5e="_footerText_1iykk_1653",B5e="_footerBrand_1iykk_1665",z5e="_floatingParticles_1iykk_1689",q5e="_particle_1iykk_1711",U5e="_headerLabel_1iykk_1865",V5e="_headerActions_1iykk_1905",H5e="_headerBtn_1iykk_1919",G5e="_headerBtnSecondary_1iykk_1961",W5e="_statsSection_1iykk_2011",K5e="_statCard_1iykk_2025",Y5e="_statIcon_1iykk_2057",Q5e="_statValue_1iykk_2087",X5e="_statLabel_1iykk_2101",J5e="_quickTipsSection_1iykk_2121",Z5e="_quickTipsHeader_1iykk_2137",eLe="_tipNav_1iykk_2171",tLe="_tipCard_1iykk_2233",nLe="_tipIcon_1iykk_2279",rLe="_tipContent_1iykk_2299",aLe="_tipIndicators_1iykk_2327",iLe="_tipIndicator_1iykk_2327",sLe="_tipIndicatorActive_1iykk_2371",oLe="_shortcutsGrid_1iykk_2391",lLe="_shortcutCard_1iykk_2405",cLe="_shortcutCardActive_1iykk_2431",uLe="_shortcutKeys_1iykk_2445",dLe="_kbdPlus_1iykk_2459",hLe="_kbdActive_1iykk_2471",fLe="_shortcutInfo_1iykk_2485",pLe="_shortcutAction_1iykk_2493",mLe="_shortcutDesc_1iykk_2507",gLe="_stepsContainer_1iykk_2527",yLe="_stepCard_1iykk_2543",xLe="_stepNumber_1iykk_2581",vLe="_stepBody_1iykk_2627",bLe="_sectionBadge_1iykk_2673",jLe="_backToTop_1iykk_2707",wLe="_fabContainer_1iykk_3399",NLe="_fabButton_1iykk_3421",SLe="_fabContent_1iykk_3463",_Le="_contactRow_1iykk_3517",CLe="_contactIcon_1iykk_3535",kLe="_copyBtn_1iykk_3545",Ne={container:$3e,progressBar:B3e,sidebar:z3e,sidebarTitle:q3e,searchBox:U3e,searchInput:V3e,searchIcon:H3e,navSection:G3e,navSectionTitle:W3e,navLink:K3e,activeNavLink:Y3e,navLinkIcon:Q3e,content:X3e,header:J3e,headerContent:Z3e,title:e5e,subtitle:t5e,heroVideoWrapper:n5e,heroVideo:r5e,headerBadges:a5e,headerBadge:i5e,section:s5e,sectionTitle:o5e,sectionTitleIcon:l5e,sectionContent:c5e,featureList:u5e,featureItem:d5e,featureIcon:h5e,featureText:f5e,infoBox:p5e,infoBoxTitle:m5e,infoBoxContent:g5e,workflowList:y5e,kbd:x5e,moduleLinkBtn:v5e,uiGrid:b5e,uiCard:j5e,uiLabel:w5e,demoBtn:N5e,demoBtnPrimary:S5e,demoBtnSecondary:_5e,demoBtnDanger:C5e,demoBadge:k5e,demoBadgeSuccess:T5e,demoBadgeWarning:A5e,demoBadgeError:P5e,iconRow:E5e,faqList:D5e,faqItem:O5e,faqQuestion:M5e,faqIcon:I5e,faqIconOpen:R5e,faqAnswer:L5e,footer:F5e,footerText:$5e,footerBrand:B5e,floatingParticles:z5e,particle:q5e,headerLabel:U5e,headerActions:V5e,headerBtn:H5e,headerBtnSecondary:G5e,statsSection:W5e,statCard:K5e,statIcon:Y5e,statValue:Q5e,statLabel:X5e,quickTipsSection:J5e,quickTipsHeader:Z5e,tipNav:eLe,tipCard:tLe,tipIcon:nLe,tipContent:rLe,tipIndicators:aLe,tipIndicator:iLe,tipIndicatorActive:sLe,shortcutsGrid:oLe,shortcutCard:lLe,shortcutCardActive:cLe,shortcutKeys:uLe,kbdPlus:dLe,kbdActive:hLe,shortcutInfo:fLe,shortcutAction:pLe,shortcutDesc:mLe,stepsContainer:gLe,stepCard:yLe,stepNumber:xLe,stepBody:vLe,sectionBadge:bLe,backToTop:jLe,fabContainer:wLe,fabButton:NLe,fabContent:SLe,contactRow:_Le,contactIcon:CLe,copyBtn:kLe},TLe=(t,e=2e3)=>{const[n,a]=v.useState(0),[i,s]=v.useState(!1),o=v.useRef(null);return v.useEffect(()=>{const l=new IntersectionObserver(([c])=>{c.isIntersecting&&s(!0)},{threshold:.3});return o.current&&l.observe(o.current),()=>l.disconnect()},[]),v.useEffect(()=>{if(!i)return;let l=null;const c=u=>{l||(l=u);const h=Math.min((u-l)/e,1);a(Math.floor(h*t)),h<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[i,t,e]),{count:n,ref:o}},ALe=()=>{const[t,e]=v.useState("getting-started"),[n,a]=v.useState(""),[i,s]=v.useState(0),[o,l]=v.useState(null),[c,u]=v.useState(!1),[h,p]=v.useState(0),[m,x]=v.useState(null),[b,j]=v.useState(!1),w=v.useRef(null),_=v.useCallback(()=>{const B=document.documentElement.scrollHeight-window.innerHeight,R=window.scrollY/B*100;s(Math.min(R,100))},[]);v.useEffect(()=>{const B=()=>{const R=document.querySelectorAll("section[id]");let z="";R.forEach(G=>{const K=G.offsetTop;window.scrollY>=K-120&&(z=G.getAttribute("id")||"")}),z&&e(z),j(window.scrollY>400),_()};return window.addEventListener("scroll",B),()=>window.removeEventListener("scroll",B)},[_]);const k=B=>{const R=document.getElementById(B);R&&window.scrollTo({top:R.offsetTop-80,behavior:"smooth"})},C={navigation:[{id:"getting-started",label:"Getting Started",icon:HI},{id:"reception",label:"Reception & Front Desk",icon:vf},{id:"clinical-workflow",label:"Doctor Workflow",icon:sg},{id:"dental-charting",label:"Dental & Charting",icon:iw},{id:"financial-mgmt",label:"Financial Control",icon:pd},{id:"analytics",label:"Analytics & Insights",icon:PP},{id:"pharmacy-inventory",label:"Pharmacy & Stock",icon:md},{id:"advanced-lab",label:"Advanced Lab Mgmt",icon:hs},{id:"ipd-admission",label:"IPD & Admission",icon:Af},{id:"custom-data",label:"System Customization",icon:kf},{id:"admin",label:"Administration",icon:gd}],reference:[{id:"ui-reference",label:"Interface & UI",icon:qm},{id:"troubleshooting",label:"Troubleshooting",icon:w1}]},A=B=>n?B.filter(R=>R.label.toLowerCase().includes(n.toLowerCase())):B,T=({id:B,label:R,Icon:z})=>r.jsxs("a",{className:`${Ne.navLink} ${t===B?Ne.activeNavLink:""}`,onClick:()=>k(B),children:[r.jsx(z,{className:Ne.navLinkIcon,size:18}),R]}),E=[{question:"Bill not printing correctly?",answer:'Ensure pop-ups are not blocked in your browser settings. For thermal printers, verify the paper size (e.g. 80mm) matches the bill format in Clinic Settings  Print Configuration. If using Chrome, try disabling "Print headers and footers" in the print dialog.'},{question:"Data not syncing across devices?",answer:"Newtons Ai requires a stable internet connection for real-time sync. Check your connection, then try a hard refresh (Ctrl+Shift+R). If data still appears stale, clear the browser cache. All data is safely stored on the server  nothing is lost."},{question:"How do I reset a staff member's password?",answer:"Only administrators can reset passwords. Go to Administration  Staff Management, find the user, click Edit, and set a new password. The staff member will use the new password on their next login."},{question:"AI suggestions or briefs not appearing?",answer:"AI features require an active internet connection and must be enabled in Clinic Settings  AI & Automation. If they are enabled but still missing, ensure the patient has at least one prior visit with recorded data for the AI to summarize."},{question:"How do I record a partial payment against patient debt?",answer:"Go to Financial Control  Patient Debts. Click on the patient's name to expand their transaction history. Use the payment form at the bottom to enter the partial amount, select the payment mode, and click Save. The remaining balance updates automatically."},{question:"How can I configure normal ranges for Lab tests?",answer:"Navigate to Lab Management  Test Master. Click Edit on any test, then open the Parameters tab. Here you can define min/max values, units, default results, and even gender/age-specific ranges. Abnormal results will be auto-highlighted in red on the report."},{question:"Can I use the system on my phone or tablet?",answer:'Yes! Newtons Ai HMS is a Progressive Web App (PWA). Open it in Chrome or Safari, tap the browser menu, and select "Install" or "Add to Home Screen". It will work like a native app with fast loading and push notifications.'},{question:"How do I add a new medicine to the pharmacy inventory?",answer:'Go to Pharmacy & Stock  Drug Inventory. Click "Add Drug" and fill in the name, composition, batch number, expiry date, MRP, and purchase price. You can also bulk-import medicines via the Excel Import feature.'}],I=[{icon:zI,title:"AI Command Bar",description:'Press Ctrl+K to open the command bar. Type naturally  "prescribe amoxicillin 500mg for 5 days"  and the AI handles the rest.',color:"#f59e0b"},{icon:KI,title:"Instant Patient Lookup",description:"Start typing a patient name or phone number anywhere in the search bar  results appear in real-time with zero page reloads.",color:"#8b5cf6"},{icon:mZ,title:"Smart Billing Auto-Fill",description:"When dispensing medicines, the system calculates quantity from the prescription dosage and duration  just verify and bill.",color:"#10b981"},{icon:WI,title:"Keyboard Power User",description:"Navigate the entire system without a mouse. Use Tab to move between fields, Enter to confirm, and Esc to close modals.",color:"#ef4444"}];v.useEffect(()=>{const B=setInterval(()=>{p(R=>(R+1)%I.length)},5e3);return()=>clearInterval(B)},[I.length]);const $=[{icon:zi,value:1e4,suffix:"+",label:"Patients Managed",color:"#6366f1"},{icon:Ug,value:75,suffix:"%",label:"Avg. Time Saved",color:"#10b981"},{icon:xZ,value:99,suffix:".9%",label:"System Uptime",color:"#f59e0b"},{icon:XX,value:50,suffix:"+",label:"Clinics Onboarded",color:"#ef4444"}],U=[{keys:["Ctrl","K"],action:"Open Command Bar",description:"Quick access to AI assistant and navigation"},{keys:["Ctrl","P"],action:"Quick Print",description:"Print current document or bill"},{keys:["Ctrl","S"],action:"Save Record",description:"Save current form or entry"},{keys:["Esc"],action:"Close Modal",description:"Close any open dialog or panel"}];return r.jsxs("div",{className:Ne.container,children:[r.jsx("div",{className:Ne.progressBar,style:{width:`${i}%`}}),r.jsxs("aside",{className:Ne.sidebar,children:[r.jsxs("h2",{className:Ne.sidebarTitle,children:[r.jsx(RI,{size:22}),"User Guide"]}),r.jsxs("div",{className:Ne.searchBox,children:[r.jsx(fn,{className:Ne.searchIcon,size:16}),r.jsx("input",{type:"text",className:Ne.searchInput,placeholder:"Search topics...",value:n,onChange:B=>a(B.target.value)})]}),r.jsxs("div",{className:Ne.navSection,children:[r.jsxs("span",{className:Ne.navSectionTitle,children:[r.jsx(Ar,{size:12}),"Navigation"]}),A(C.navigation).map(B=>r.jsx(T,{id:B.id,label:B.label,Icon:B.icon},B.id))]}),r.jsxs("div",{className:Ne.navSection,children:[r.jsxs("span",{className:Ne.navSectionTitle,children:[r.jsx(WI,{size:12}),"Reference"]}),A(C.reference).map(B=>r.jsx(T,{id:B.id,label:B.label,Icon:B.icon},B.id))]})]}),r.jsxs("main",{className:Ne.content,ref:w,children:[r.jsxs("header",{className:Ne.header,children:[r.jsxs("div",{className:Ne.floatingParticles,children:[r.jsx("div",{className:Ne.particle}),r.jsx("div",{className:Ne.particle}),r.jsx("div",{className:Ne.particle}),r.jsx("div",{className:Ne.particle}),r.jsx("div",{className:Ne.particle})]}),r.jsxs("div",{className:Ne.headerContent,children:[r.jsxs("div",{className:Ne.headerLabel,children:[r.jsx(RI,{size:16}),"Complete Documentation"]}),r.jsx("h1",{className:Ne.title,children:"Your Complete Guide to Newtons Ai HMS"}),r.jsx("p",{className:Ne.subtitle,children:"Everything you need to run your clinic faster, smarter, and with zero paperwork. From patient registration to analytics  master every module in minutes."}),r.jsx("div",{className:Ne.heroVideoWrapper,children:r.jsx("iframe",{className:Ne.heroVideo,src:"https://www.youtube.com/embed/POW5yMLH7yU?si=p9R6HJOo0Kkaop3N&vq=hd1440",title:"Newtons Ai HMS Guide",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}),r.jsxs("div",{className:Ne.headerBadges,children:[r.jsxs("span",{className:Ne.headerBadge,children:[r.jsx(lg,{size:14}),"HIPAA Compliant"]}),r.jsxs("span",{className:Ne.headerBadge,children:[r.jsx(ww,{size:14}),"AI Powered"]}),r.jsxs("span",{className:Ne.headerBadge,children:[r.jsx(EP,{size:14}),"Multi-Language"]})]}),r.jsxs("div",{className:Ne.headerActions,children:[r.jsxs("button",{className:Ne.headerBtn,onClick:()=>k("getting-started"),children:[r.jsx(fq,{size:16}),"Get Started"]}),r.jsxs("button",{className:Ne.headerBtnSecondary,onClick:()=>k("troubleshooting"),children:[r.jsx(w1,{size:16}),"Need Help?"]})]})]})]}),r.jsx("section",{className:Ne.statsSection,children:$.map((B,R)=>{const{count:z,ref:G}=TLe(B.value);return r.jsxs("div",{className:Ne.statCard,ref:G,children:[r.jsx("div",{className:Ne.statIcon,style:{backgroundColor:`${B.color}15`,color:B.color},children:r.jsx(B.icon,{size:24})}),r.jsxs("div",{className:Ne.statValue,style:{color:B.color},children:[z,B.suffix]}),r.jsx("div",{className:Ne.statLabel,children:B.label})]},R)})}),r.jsxs("section",{className:Ne.quickTipsSection,children:[r.jsxs("div",{className:Ne.quickTipsHeader,children:[r.jsxs("h3",{children:[r.jsx(zI,{size:20})," Quick Tips"]}),r.jsxs("div",{className:Ne.tipNav,children:[r.jsx("button",{onClick:()=>p(B=>(B-1+I.length)%I.length),children:r.jsx(Bf,{size:18})}),r.jsxs("span",{children:[h+1," / ",I.length]}),r.jsx("button",{onClick:()=>p(B=>(B+1)%I.length),children:r.jsx(Vl,{size:18})})]})]}),r.jsxs("div",{className:Ne.tipCard,children:[r.jsx("div",{className:Ne.tipIcon,style:{backgroundColor:`${I[h].color}15`,color:I[h].color},children:Te.createElement(I[h].icon,{size:28})}),r.jsxs("div",{className:Ne.tipContent,children:[r.jsx("h4",{children:I[h].title}),r.jsx("p",{children:I[h].description})]})]},h),r.jsx("div",{className:Ne.tipIndicators,children:I.map((B,R)=>r.jsx("button",{className:`${Ne.tipIndicator} ${h===R?Ne.tipIndicatorActive:""}`,onClick:()=>p(R)},R))})]}),r.jsxs("section",{id:"getting-started",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(HI,{size:18})}),"Getting Started",r.jsx("span",{className:Ne.sectionBadge,children:"01"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"Welcome to Newtons Ai HMS  the all-in-one platform that replaces paper registers, billing software, and lab management tools with a single intelligent system. Here's how to get up and running."}),r.jsx("h3",{children:"First Steps"}),r.jsxs("div",{className:Ne.stepsContainer,children:[r.jsxs("div",{className:Ne.stepCard,children:[r.jsx("div",{className:Ne.stepNumber,children:"1"}),r.jsxs("div",{className:Ne.stepBody,children:[r.jsx("strong",{children:"Log In & Set Up Your Clinic"}),r.jsx("p",{children:"Sign in with your admin credentials. Head to Administration  Clinic Settings to add your clinic name, logo, address, and GST details. This information appears on all printed bills and reports."})]})]}),r.jsxs("div",{className:Ne.stepCard,children:[r.jsx("div",{className:Ne.stepNumber,children:"2"}),r.jsxs("div",{className:Ne.stepBody,children:[r.jsx("strong",{children:"Add Your Staff"}),r.jsx("p",{children:"Go to Administration  Staff Management. Create accounts for doctors, receptionists, pharmacists, and lab technicians. Each role sees only what they need  no clutter."})]})]}),r.jsxs("div",{className:Ne.stepCard,children:[r.jsx("div",{className:Ne.stepNumber,children:"3"}),r.jsxs("div",{className:Ne.stepBody,children:[r.jsx("strong",{children:"Import Your Data"}),r.jsx("p",{children:`Bulk-import your drug inventory, lab test catalog, and patient records via Excel. Go to each module's settings and use the "Import from Excel" feature.`})]})]}),r.jsxs("div",{className:Ne.stepCard,children:[r.jsx("div",{className:Ne.stepNumber,children:"4"}),r.jsxs("div",{className:Ne.stepBody,children:[r.jsx("strong",{children:"Start Seeing Patients"}),r.jsx("p",{children:"Register your first patient at Reception, generate a token, and the doctor can start consulting immediately from their live queue."})]})]})]}),r.jsxs("div",{className:Ne.infoBox,children:[r.jsxs("span",{className:Ne.infoBoxTitle,children:[r.jsx(ww,{size:18}),"Install as an App (PWA)"]}),r.jsx("div",{className:Ne.infoBoxContent,children:`Newtons Ai is a Progressive Web App. Click the "Install" icon in your browser's address bar to add it to your desktop or phone home screen. It loads instantly and works even with poor connectivity.`})]}),r.jsx("div",{className:Ne.shortcutsGrid,children:U.map((B,R)=>r.jsxs("div",{className:`${Ne.shortcutCard} ${m===B.action?Ne.shortcutCardActive:""}`,onMouseEnter:()=>x(B.action),onMouseLeave:()=>x(null),children:[r.jsx("div",{className:Ne.shortcutKeys,children:B.keys.map((z,G)=>r.jsxs(Te.Fragment,{children:[r.jsx("kbd",{className:`${Ne.kbd} ${m===B.action?Ne.kbdActive:""}`,children:z}),G<B.keys.length-1&&r.jsx("span",{className:Ne.kbdPlus,children:"+"})]},G))}),r.jsxs("div",{className:Ne.shortcutInfo,children:[r.jsx("div",{className:Ne.shortcutAction,children:B.action}),r.jsx("div",{className:Ne.shortcutDesc,children:B.description})]})]},R))}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(EX,{size:14})," Smart Navigation"]}),r.jsxs("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:["Press ",r.jsx("kbd",{className:Ne.kbd,children:"Ctrl"})," + ",r.jsx("kbd",{className:Ne.kbd,children:"K"})," anywhere to open the AI Command Bar. Search patients, create bills, or navigate to any page instantly."]})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(zi,{size:14})," Role-Based Dashboards"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Each role (Doctor, Receptionist, Pharmacist, Lab Tech) gets a focused dashboard showing only what matters to them."})]})]})]})]}),r.jsxs("section",{id:"reception",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(vf,{size:18})}),"Reception & Front Desk",r.jsx("span",{className:Ne.sectionBadge,children:"02"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"The reception dashboard is the nerve center of your clinic. Register patients, generate tokens, manage appointments, and keep the waiting room informed  all from one screen."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(vf,{size:14})," Patient Registration"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Register new patients in seconds with name, age, gender, and phone number. Returning patients are auto-detected by phone number  no duplicate records."}),r.jsx(lr,{to:"/dashboard/reception",className:Ne.moduleLinkBtn,children:"Reception Panel"})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(Nv,{size:14})," Token & Queue"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Generate numbered tokens for each visit. Patients appear in the doctor's live queue automatically. Track who's waiting, who's been seen, and who's next."})]})]}),r.jsxs("ul",{className:Ne.featureList,children:[r.jsxs("li",{className:Ne.featureItem,children:[r.jsx(Cl,{size:16,className:Ne.featureIcon}),r.jsxs("div",{className:Ne.featureText,children:[r.jsx("strong",{children:"Appointment Booking:"})," Schedule future appointments with date/time slots. Patients receive reminders automatically."]})]}),r.jsxs("li",{className:Ne.featureItem,children:[r.jsx(Cl,{size:16,className:Ne.featureIcon}),r.jsxs("div",{className:Ne.featureText,children:[r.jsx("strong",{children:"Quick Vitals Entry:"})," Record blood pressure, temperature, weight, and SpO2 at reception so the doctor has it ready on-screen."]})]})]})]})]}),r.jsxs("section",{id:"clinical-workflow",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(sg,{size:18})}),"Doctor Workflow & Live Queue",r.jsx("span",{className:Ne.sectionBadge,children:"03"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"The Doctor Consultation Panel is built for speed. See your queue, pull up patient history, write prescriptions, and order labs  all without leaving the screen."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(El,{size:14})," Live Queue Control"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Patients appear in real-time as reception registers them. Click "Call Next" to advance the queue  the system auto-marks seen patients and updates the waiting list.'}),r.jsx(lr,{to:"/dashboard/doctor",className:Ne.moduleLinkBtn,children:"Consultation Panel"})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(Cf,{size:14})," AI Patient Briefs"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Click " AI Brief" on any patient to get an instant summary of their complaint history, recent labs, and ongoing medications  saving minutes per consult.'})]})]}),r.jsx("h3",{children:"Consultation Features"}),r.jsxs("ul",{className:Ne.featureList,children:[r.jsxs("li",{className:Ne.featureItem,children:[r.jsx(Cl,{size:16,className:Ne.featureIcon}),r.jsxs("div",{className:Ne.featureText,children:[r.jsx("strong",{children:"Unified Timeline:"})," View all past complaints, lab reports, prescriptions, and clinical notes in a single chronological view. No more switching tabs."]})]}),r.jsxs("li",{className:Ne.featureItem,children:[r.jsx($X,{size:16,className:Ne.featureIcon,style:{color:"var(--guide-primary)"}}),r.jsxs("div",{className:Ne.featureText,children:[r.jsx("strong",{children:"One-Click Repeat:"})," Copy past prescriptions into a new visit with a single click. Edit dosages or add new medicines on top."]})]}),r.jsxs("li",{className:Ne.featureItem,children:[r.jsx(Cl,{size:16,className:Ne.featureIcon}),r.jsxs("div",{className:Ne.featureText,children:[r.jsx("strong",{children:"Prescription Builder:"})," Type medicine names with auto-complete, set dosage, frequency, and duration. Print or share digitally."]})]})]})]})]}),r.jsxs("section",{id:"dental-charting",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(iw,{size:18})}),"Dental & Charting",r.jsx("span",{className:Ne.sectionBadge,children:"04"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"A full dental charting system built into the platform. Map procedures to individual teeth, track treatment plans, and maintain a visual record of every patient's oral health."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(iw,{size:14})," Interactive Tooth Chart"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Click on any tooth in the visual chart to add procedures, notes, or mark conditions. The chart updates in real-time with color-coded status indicators."}),r.jsx(lr,{to:"/dashboard/doctor",className:Ne.moduleLinkBtn,children:"Dental Panel"})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(Ar,{size:14})," Treatment Plans"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Create multi-visit treatment plans with cost estimates. Track which procedures are completed across visits and what remains."})]})]}),r.jsxs("ul",{className:Ne.featureList,children:[r.jsxs("li",{className:Ne.featureItem,children:[r.jsx(Cl,{size:16,className:Ne.featureIcon}),r.jsxs("div",{className:Ne.featureText,children:[r.jsx("strong",{children:"Procedure Library:"})," Manage your list of dental procedures with custom pricing. Add, edit, or remove procedures from the settings panel."]})]}),r.jsxs("li",{className:Ne.featureItem,children:[r.jsx(Cl,{size:16,className:Ne.featureIcon}),r.jsxs("div",{className:Ne.featureText,children:[r.jsx("strong",{children:"History Per Tooth:"})," View the complete procedure history for each tooth across all visits  ideal for tracking root canals, crowns, and restorations."]})]})]})]})]}),r.jsxs("section",{id:"financial-mgmt",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(pd,{size:18})}),"Financial Control & Debt Management",r.jsx("span",{className:Ne.sectionBadge,children:"05"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"Keep your clinic's finances healthy with precise billing and proactive debt management."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(Nw,{size:14})," Debt Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Monitor all outstanding balances in the Patent Debt module. View individual transaction histories and record settlements."}),r.jsx(lr,{to:"/dashboard/admin/patient-debts",className:Ne.moduleLinkBtn,children:"Manage Debt"})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(Ar,{size:14})," Custom Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Need to bill for something non-standard? Use the Custom Bill tool to create items on-the-fly."}),r.jsx(lr,{to:"/create-custom-bill",className:Ne.moduleLinkBtn,children:"Custom Bill"})]})]}),r.jsxs("div",{className:Ne.infoBox,children:[r.jsxs("span",{className:Ne.infoBoxTitle,children:[r.jsx(lg,{size:18}),"Payment Verification"]}),r.jsx("div",{className:Ne.infoBoxContent,children:'The system tracks payment modes (Cash, UPI, Card, Credit). "Credit" sales are automatically added to the Patient Debt list for later follow-up.'})]})]})]}),r.jsxs("section",{id:"analytics",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(PP,{size:18})}),"Analytics & Insights",r.jsx("span",{className:Ne.sectionBadge,children:"06"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"Transition from simply managing data to understanding it. The Analysis Dashboard provides deep insights into your operations."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(El,{size:14})," Revenue vs Cash Flow"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Compare Sales (Accrual) against actual Cash Collected (Cash Basis) to understand your true liquidity."}),r.jsx(lr,{to:"/dashboard/analysis",className:Ne.moduleLinkBtn,children:"Open Analysis"})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(VI,{size:14})," Dept. Analysis"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"See exactly which departments (Pharmacy, Lab, OPD) are driving your clinic's growth."})]})]}),r.jsx("h3",{children:"Advanced Metrics"}),r.jsxs("ul",{className:Ne.featureList,children:[r.jsxs("li",{className:Ne.featureItem,children:[r.jsx(Cl,{size:16,className:Ne.featureIcon}),r.jsxs("div",{className:Ne.featureText,children:[r.jsx("strong",{children:"Inventory Movement:"})," Analyze stock inflow vs outflow to predict future procurement needs."]})]}),r.jsxs("li",{className:Ne.featureItem,children:[r.jsx(Cl,{size:16,className:Ne.featureIcon}),r.jsxs("div",{className:Ne.featureText,children:[r.jsx("strong",{children:"Profit Estimation:"})," View estimated profits based on cost of goods sold (COGS) vs revenue generated."]})]})]})]})]}),r.jsxs("section",{id:"pharmacy-inventory",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(md,{size:18})}),"Pharmacy & Inventory Tracking",r.jsx("span",{className:Ne.sectionBadge,children:"07"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"Maintain optimal stock levels and manage supplier relationships effortlessly."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(rO,{size:14})," Distributor Mgmt"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep a directory of suppliers, track payments made to them, and manage purchase entries."}),r.jsx(lr,{to:"/dashboard/distributors",className:Ne.moduleLinkBtn,children:"Distributors"})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(JQ,{size:14})," Refill Reminders"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automatically notify patients when their chronic medication stock is about to run out."}),r.jsx(lr,{to:"/refill-reminders",className:Ne.moduleLinkBtn,children:"Refill Alerts"})]})]}),r.jsxs("div",{className:Ne.infoBox,children:[r.jsxs("span",{className:Ne.infoBoxTitle,children:[r.jsx(El,{size:18}),"Stock-Out Alerts"]}),r.jsx("div",{className:Ne.infoBoxContent,children:"High-demand items are highlighted when stock falls below your defined threshold, ensuring you never run out of critical medicines."})]})]})]}),r.jsxs("section",{id:"advanced-lab",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(hs,{size:18})}),"Advanced Lab Management",r.jsx("span",{className:Ne.sectionBadge,children:"08"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"Go beyond simple test lists. Configure complex diagnostic parameters with automated clinical validation."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(fn,{size:14})," Multi-Parameter Search"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Find reports by Patient Name, ID, Token, or even specific Test Name. The intelligent search uses fuzzy matching."}),r.jsx(lr,{to:"/lab/search-report",className:Ne.moduleLinkBtn,children:"Find Reports"})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(hs,{size:14})," Test Master"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define parametric data, normal ranges, and automated formatting for your reports."}),r.jsx(lr,{to:"/lab-inventory",className:Ne.moduleLinkBtn,children:"Configure Tests"})]})]})]})]}),r.jsxs("section",{id:"ipd-admission",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(Af,{size:18})}),"IPD & Admission Management",r.jsx("span",{className:Ne.sectionBadge,children:"09"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"Manage the full lifecycle of in-patient care, from the moment of admission to final discharge and billing."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(qn,{size:14})," In-Patient Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep track of all currently admitted patients, their ward assignments, and duration of stay."}),r.jsx(lr,{to:"/manage-admission",className:Ne.moduleLinkBtn,children:"Admission Mgmt"})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(Nw,{size:14})," Cumulative Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automated daily room charges combined with services and medications consumed during the stay."})]})]}),r.jsx("h3",{children:"Workflow Steps"}),r.jsxs("ol",{className:Ne.workflowList,children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Admit:"})," Register the patient and set the admission date and bed details."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Manage:"})," Record observations and clinical notes throughout the stay."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Discharge:"})," Finalize all pending charges and generate the discharge summary."]})]})]})]}),r.jsxs("section",{id:"custom-data",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(kf,{size:18})}),"System Customization",r.jsx("span",{className:Ne.sectionBadge,children:"10"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"Newtons Ai HMS is designed to be extensible. Create your own data structures and visualization tools."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(Fb,{size:14})," Custom Tables"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define new data types (e.g., Equipment Logs, Consent Forms). Support for text, number, date, and boolean."}),r.jsx(lr,{to:"/custom-tables",className:Ne.moduleLinkBtn,children:"Data Tables"})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(VI,{size:14})," Custom Dashboards"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Build your own reporting views. Drag and drop widgets to visualize your performance."}),r.jsx(lr,{to:"/dashboards",className:Ne.moduleLinkBtn,children:"Manage Dashboards"})]})]})]})]}),r.jsxs("section",{id:"admin",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(gd,{size:18})}),"Administration",r.jsx("span",{className:Ne.sectionBadge,children:"11"})]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"Central command for clinic owners. Access critical functions and manage staff permissions."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(zi,{size:14})," Staff & Permissions"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Add/edit staff and define exactly what each role can see and do in the system."}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[r.jsx(lr,{to:"/dashboard/staff",className:Ne.moduleLinkBtn,children:"Staff"}),r.jsx(lr,{to:"/dashboard/roles",className:Ne.moduleLinkBtn,children:"Roles"})]})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsxs("div",{className:Ne.uiLabel,children:[r.jsx(qr,{size:14})," Subscription Plans"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Manage your patients' subscription plans, billing cycles, and membership statuses."}),r.jsx(lr,{to:"/dashboard/subscriptions",className:Ne.moduleLinkBtn,children:"Subscriptions"})]})]})]})]}),r.jsxs("section",{id:"ui-reference",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(qm,{size:18})}),"Interface & UI Reference"]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsx("p",{children:"Familiarize yourself with the common UI elements used throughout the application."}),r.jsxs("div",{className:Ne.uiGrid,children:[r.jsxs("div",{className:Ne.uiCard,children:[r.jsx("div",{className:Ne.uiLabel,children:"Action Buttons"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{className:`${Ne.demoBtn} ${Ne.demoBtnPrimary}`,children:"Primary / Save"}),r.jsx("button",{className:`${Ne.demoBtn} ${Ne.demoBtnSecondary}`,children:"Secondary"}),r.jsx("button",{className:`${Ne.demoBtn} ${Ne.demoBtnDanger}`,children:"Danger / Delete"})]})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsx("div",{className:Ne.uiLabel,children:"Status Indicators"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{className:`${Ne.demoBadge} ${Ne.demoBadgeSuccess}`,children:[r.jsx(Cl,{size:12}),"Paid / Completed"]}),r.jsxs("div",{className:`${Ne.demoBadge} ${Ne.demoBadgeWarning}`,children:[r.jsx(KI,{size:12}),"Pending / Due"]}),r.jsxs("div",{className:`${Ne.demoBadge} ${Ne.demoBadgeError}`,children:[r.jsx(w1,{size:12}),"Overdue / Failed"]})]})]}),r.jsxs("div",{className:Ne.uiCard,children:[r.jsx("div",{className:Ne.uiLabel,children:"Common Icons"}),r.jsxs("div",{className:Ne.iconRow,children:[r.jsx(Ui,{size:16})," ",r.jsx("span",{children:"Edit Record"})]}),r.jsxs("div",{className:Ne.iconRow,children:[r.jsx(zn,{size:16})," ",r.jsx("span",{children:"Delete Item"})]}),r.jsxs("div",{className:Ne.iconRow,children:[r.jsx(qm,{size:16})," ",r.jsx("span",{children:"View Details"})]})]})]})]})]}),r.jsxs("section",{id:"troubleshooting",className:Ne.section,children:[r.jsxs("h2",{className:Ne.sectionTitle,children:[r.jsx("span",{className:Ne.sectionTitleIcon,children:r.jsx(w1,{size:18})}),"Troubleshooting & Support"]}),r.jsxs("div",{className:Ne.sectionContent,children:[r.jsxs("div",{className:Ne.infoBox,children:[r.jsxs("span",{className:Ne.infoBoxTitle,children:[r.jsx(EP,{size:18}),"Offline Support (PWA)"]}),r.jsxs("div",{className:Ne.infoBoxContent,children:["Newtons Ai HMS is a ",r.jsx("strong",{children:"Progressive Web App (PWA)"}),'. Install it on your desktop or mobile home screen using the "Install" button in the header for faster loading and offline syncing of critical data.']})]}),r.jsxs("div",{className:Ne.infoBox,style:{borderLeftColor:"var(--guide-accent)"},children:[r.jsxs("span",{className:Ne.infoBoxTitle,style:{color:"var(--guide-accent)"},children:[r.jsx(cC,{size:18}),"Need Direct Support?"]}),r.jsx("div",{className:Ne.infoBoxContent,children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Fv,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"+91 63631 11328"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(qI,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"shiva@newtons.in"})]})]})})]}),r.jsx("h3",{children:"Frequently Asked Questions"}),r.jsx("div",{className:Ne.faqList,children:E.map((B,R)=>r.jsxs("div",{className:Ne.faqItem,children:[r.jsxs("div",{className:Ne.faqQuestion,onClick:()=>l(o===R?null:R),children:[r.jsx("span",{children:B.question}),r.jsx(sq,{size:18,className:`${Ne.faqIcon} ${o===R?Ne.faqIconOpen:""}`})]}),o===R&&r.jsx("div",{className:Ne.faqAnswer,children:B.answer})]},R))})]})]}),r.jsx("footer",{className:Ne.footer,children:r.jsxs("p",{className:Ne.footerText,children:[" ",new Date().getFullYear()," ",r.jsx("span",{className:Ne.footerBrand,children:"Newtons Ai"}),". Empowering Healthcare through Intelligence."]})})]}),r.jsxs("div",{className:Ne.fabContainer,children:[c&&r.jsxs("div",{className:Ne.fabContent,children:[r.jsxs("h4",{children:[r.jsx(cC,{size:18}),"Customer Care"]}),r.jsxs("div",{className:Ne.contactRow,children:[r.jsx(Fv,{size:16,className:Ne.contactIcon}),r.jsx("span",{children:"+91 63631 11328"}),r.jsx("button",{className:Ne.copyBtn,onClick:()=>navigator.clipboard.writeText("+916363111328"),title:"Copy Phone",children:r.jsx($I,{size:14})})]}),r.jsxs("div",{className:Ne.contactRow,children:[r.jsx(qI,{size:16,className:Ne.contactIcon}),r.jsx("span",{children:"shiva@newtons.in"}),r.jsx("button",{className:Ne.copyBtn,onClick:()=>navigator.clipboard.writeText("shiva@newtons.in"),title:"Copy Email",children:r.jsx($I,{size:14})})]})]}),r.jsx("button",{className:Ne.fabButton,onClick:()=>u(!c),title:"Customer Support",children:c?r.jsx(Ot,{size:24}):r.jsx(cC,{size:24})})]}),b&&r.jsx("button",{className:Ne.backToTop,onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),title:"Back to top",children:r.jsx(TP,{size:20})})]})},PLe=t=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(t)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(t)?{type:"premolar",roots:1}:[6,11,22,27].includes(t)?{type:"canine",roots:1}:t>=1&&t<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(t)?{type:"molar",roots:2}:[43,48,53,58].includes(t)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(t)?{type:"incisor",roots:1}:{type:"incisor",roots:1},Nc=({toothNumber:t,conditions:e=[],className:n,style:a,isSelected:i,bridgeConnectPrevious:s})=>{const{type:o}=PLe(t),l=t<=16||t>=41&&t<=50,c="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",u="M7,25 Q5,40 10,44 Q14,40 14,26",h="M29,25 Q31,40 26,44 Q22,40 22,26",p="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",m="M10,24 Q16,44 18,45 Q20,44 26,24",x="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",b="M10,25 Q18,48 26,25",j="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",w="M12,25 Q18,46 24,25";let _=c,k=[u,h];o==="incisor"?(_=j,k=[w]):o==="canine"?(_=x,k=[b]):o==="premolar"&&(_=p,k=[m]);const C=e.includes("condition-rct"),A=e.includes("condition-filling"),T=e.includes("condition-crown"),E=e.includes("condition-bridge"),I=e.includes("condition-extraction"),$=e.includes("condition-implant"),U=e.includes("condition-others"),B=C?"#e9d5ff":"#f3f4f6",R=I?"#fee2e2":"#ffffff",z=I?"#ef4444":E?"#0891b2":$?"#475569":U?"#f97316":T?"#b45309":i?"#3b82f6":"#6b7280",G=i||E||T||$||U?2:1.5,K=l?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return r.jsxs("svg",{viewBox:"0 0 36 50",className:n,style:{width:"100%",height:"100%",overflow:"visible",...a},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),r.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),r.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),r.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),r.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[r.jsx("stop",{offset:"0%",stopColor:"#475569"}),r.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),r.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),s&&r.jsx("path",{d:K,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),$?r.jsxs("g",{children:[r.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:z,strokeWidth:"1"}),r.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[r.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),r.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),r.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),r.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:z,strokeWidth:"1",rx:"1"})]}):r.jsx("g",{fill:B,stroke:z,strokeWidth:G,strokeLinejoin:"round",children:k.map((Y,q)=>r.jsx("path",{d:Y},q))}),C&&!$&&r.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:o==="molar"?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M12,28 L11,42"}),r.jsx("path",{d:"M24,28 L25,42"})]}):r.jsx("path",{d:"M18,25 L18,44"})}),r.jsx("path",{d:_,fill:E?"url(#bridgeGradient)":T?"url(#goldGradient)":R,stroke:z,strokeWidth:G,strokeLinejoin:"round"}),A&&!T&&!E&&!$&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),U&&!T&&!E&&!$&&!A&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#f97316",stroke:"#ea580c",strokeWidth:"1"}),I&&r.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[r.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),r.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},Tb=(t,e="fdi")=>e==="universal"?t<=32?t.toString():t>=41&&t<=50?String.fromCharCode(65+(t-41)):t>=51&&t<=60?String.fromCharCode(75+(t-51)):t.toString():e==="fdi"?t>=1&&t<=8?(18-(t-1)).toString():t>=9&&t<=16?(21+(t-9)).toString():t>=17&&t<=24?(38-(t-17)).toString():t>=25&&t<=32?(41+(t-25)).toString():t>=41&&t<=45?(55-(t-41)).toString():t>=46&&t<=50?(61+(t-46)).toString():t>=51&&t<=55?(75-(t-51)).toString():t>=56&&t<=60?(81+(t-56)).toString():t.toString():t.toString(),GG=({selectedTeeth:t,toothConditions:e={},toothDetails:n={},onToothClick:a,onEditPastRecord:i,onPrint:s,numberingSystem:o="fdi"})=>{const[l,c]=Te.useState("permanent"),u=Array.from({length:16},(_,k)=>k+1),h=Array.from({length:16},(_,k)=>32-k),p=Array.from({length:10},(_,k)=>41+k),m=Array.from({length:10},(_,k)=>60-k),[x,b]=Te.useState(null),j=_=>{const k=e[_]||[],C=t.includes(_);let A=[],T="#9ca3af",E;const I=k.includes("condition-extraction");return C&&(T="#3b82f6"),k.includes("condition-filling")&&A.push("#60a5fa"),k.includes("condition-rct")&&A.push("#c084fc"),k.includes("condition-crown")&&(A.push("#fcd34d"),T="#d97706"),k.includes("condition-bridge")&&(A.push("#22d3ee"),T="#0891b2"),k.includes("condition-implant")&&(A.push("#94a3b8"),T="#475569"),k.includes("condition-extraction")&&(A.push("#fee2e2"),T="#ef4444"),k.includes("condition-others")&&(A.push("#ffedd5"),T="#f97316"),A.length===0&&C&&A.push("#eff6ff"),A.length===0&&A.push("#ffffff"),{fillColors:A,borderColor:T,overlayColor:E,isSelected:C,hasExtraction:I}},w=_=>{const{isSelected:k}=j(_),C=e[_]||[],A=n[_],T=_<=16||_>=41&&_<=50,E=C.includes("condition-bridge");let I=!1;if(E){let U=null;T?(_>1&&_<=16&&(U=_-1),_>41&&_<=50&&(U=_-1)):(_<32&&_>=17&&(U=_+1),_<60&&_>=51&&(U=_+1)),U!==null&&(e[U]||[]).includes("condition-bridge")&&(I=!0)}const $=Tb(_,o);return r.jsxs("div",{onClick:()=>a(_),onMouseEnter:()=>b(_),onMouseLeave:()=>b(null),className:`tooth-item-container ${k?"selected":""}`,title:"",children:[r.jsx("div",{className:"tooth-number-label",children:$}),r.jsx("div",{className:"tooth-svg-wrapper",style:{transform:T?"rotate(180deg)":"none"},children:r.jsx(Nc,{toothNumber:_,conditions:C,isSelected:k,bridgeConnectPrevious:I})}),x===_&&A&&A.length>0&&r.jsxs("div",{className:"tooth-tooltip-window",children:[r.jsxs("div",{className:"tooltip-header",children:["Tooth ",$]}),r.jsx("ul",{className:"tooltip-list",children:A.map((U,B)=>r.jsxs("li",{className:"tooltip-detail-item",children:[r.jsxs("span",{className:"detail-text",children:[U.name," ",r.jsxs("small",{children:["(",U.date,")"]})]}),U.isPast&&i&&r.jsx("button",{className:"tooltip-edit-btn",onClick:R=>{R.stopPropagation(),i(U.recordId)},title:"Edit this record",children:r.jsx(Ms,{size:12})})]},B))})]})]},_)};return r.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[r.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[r.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[r.jsx("button",{className:`view-toggle-btn ${l==="permanent"?"active":""}`,onClick:()=>c("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="permanent"?"#fff":"transparent",boxShadow:l==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),r.jsx("button",{className:`view-toggle-btn ${l==="primary"?"active":""}`,onClick:()=>c("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="primary"?"#fff":"transparent",boxShadow:l==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),s&&r.jsxs("button",{onClick:_=>{_.stopPropagation(),s()},className:"chart-print-btn no-print",title:"Print Report",children:[r.jsx(Tf,{size:16}),r.jsx("span",{children:"Print Report"})]})]}),r.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?u.slice(0,8).map(_=>w(_)):p.slice(0,5).map(_=>w(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?u.slice(8).map(_=>w(_)):p.slice(5).map(_=>w(_))})]}),r.jsxs("div",{className:"midline-divider",children:[r.jsx("div",{className:"divider-line"}),r.jsx("span",{className:"chart-label",children:"Midline"}),r.jsx("div",{className:"divider-line"})]}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?h.slice(0,8).map(_=>w(_)):m.slice(0,5).map(_=>w(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?h.slice(8).map(_=>w(_)):m.slice(5).map(_=>w(_))})]}),r.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Nc,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),r.jsx("span",{children:"Healthy"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Nc,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),r.jsx("span",{children:"Filling (Dot)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Nc,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),r.jsx("span",{children:"RCT (Root Lines)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Nc,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),r.jsx("span",{children:"Crown"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Nc,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),r.jsx("span",{children:"Bridge"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Nc,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),r.jsx("span",{children:"Implant"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Nc,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),r.jsx("span",{children:"Extraction (X)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Nc,{toothNumber:1,conditions:["condition-others"],style:{width:16,height:22}})}),r.jsx("span",{children:"Others"})]})]}),r.jsxs("div",{className:"print-only-details-summary print-only",children:[r.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(n).length===0?r.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):r.jsxs("table",{className:"print-details-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Tooth"}),r.jsx("th",{children:"Procedure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:Object.entries(n).sort(([_],[k])=>parseInt(_)-parseInt(k)).map(([_,k])=>r.jsx(Te.Fragment,{children:k.map((C,A)=>r.jsxs("tr",{children:[A===0?r.jsxs("td",{rowSpan:k.length,className:"tooth-cell",children:["Tooth ",Tb(parseInt(_),o)]}):null,r.jsx("td",{children:C.name}),r.jsx("td",{children:C.date})]},`${_}-${A}`))},_))})]})]})]})},ELe=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState({}),[h,p]=v.useState(!1),[m,x]=v.useState({name:"",cost:0,type:"general"}),[b,j]=v.useState(""),w=n.filter(E=>E.name.toLowerCase().includes(b.toLowerCase()));v.useEffect(()=>{_()},[]);const _=async()=>{s(!0);try{const E=await ie("/api/dental/procedures");if(E.ok){const I=await E.json();a(I)}}catch(E){console.error(E)}finally{s(!1)}},k=async()=>{if(!(!m.name||!m.cost))try{(await ie("/api/dental/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok&&(p(!1),x({name:"",cost:0,type:"general"}),_(),e())}catch(E){console.error(E)}},C=async E=>{try{(await ie(`/api/dental/procedures/${E}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),u({}),_(),e())}catch(I){console.error(I)}},A=async E=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await ie(`/api/dental/procedures/${E}`,{method:"DELETE"})).ok&&(_(),e())}catch(I){console.error(I)}},T=E=>{l(E.id),u({name:E.name,cost:E.cost,type:E.type})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await ie("/api/dental/procedures/import-defaults",{method:"POST"}),_(),e()}catch(E){console.error(E)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Ot,{size:20})})]})]}),r.jsx("div",{className:"mpm-search-container",children:r.jsxs("div",{className:"mpm-search-wrapper",children:[r.jsx(fn,{className:"mpm-search-icon",size:18}),r.jsx("input",{type:"text",className:"mpm-search-input",placeholder:"Search procedures...",value:b,onChange:E=>j(E.target.value)}),b&&r.jsx("button",{className:"mpm-search-clear",onClick:()=>j(""),children:r.jsx(Ot,{size:16})})]})}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Type"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:w.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):w.map(E=>r.jsx("tr",{children:o===E.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:I=>u({...c,name:I.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsxs("select",{className:"edit-select",value:c.type||"general",onChange:I=>u({...c,type:I.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"}),r.jsx("option",{value:"others",children:"Others"})]})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:I=>u({...c,cost:parseFloat(I.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>C(E.id),className:"action-btn btn-save",title:"Save",children:r.jsx(qi,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Ot,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:E.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${E.type}`,children:E.type})}),r.jsxs("td",{style:{fontWeight:500},children:["",E.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(E),className:"action-btn btn-edit",title:"Edit",children:r.jsx(Ms,{size:18})}),r.jsx("button",{onClick:()=>A(E.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(zn,{size:18})})]})]})},E.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:h?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:m.name||"",onChange:E=>x({...m,name:E.target.value})}),r.jsxs("select",{className:"form-select",value:m.type||"general",onChange:E=>x({...m,type:E.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"}),r.jsx("option",{value:"others",children:"Others"})]}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:m.cost||"",onChange:E=>x({...m,cost:parseFloat(E.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:k,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Ln,{size:18})," Add New Procedure"]})})]})})},DLe=({toothNumber:t,procedures:e,history:n=[],onSelect:a,onClose:i,onManageProcedures:s,numberingSystem:o="universal"})=>{const[l,c]=v.useState(""),[u,h]=v.useState(n.length>0?"history":"add"),p=Tb(t,o),m=v.useMemo(()=>e.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),[e,l]);return r.jsx("div",{className:"tooth-modal-overlay",children:r.jsxs("div",{className:"tooth-modal-content",children:[r.jsxs("div",{className:"tooth-modal-header",children:[r.jsxs("h3",{className:"tooth-modal-title",children:["Tooth ",p]}),r.jsx("button",{onClick:i,className:"tooth-modal-close-btn",children:r.jsx(Ot,{size:20})})]}),n.length>0&&r.jsxs("div",{className:"tooth-modal-tabs",children:[r.jsx("button",{className:`tooth-modal-tab ${u==="add"?"active":""}`,onClick:()=>h("add"),children:"Add Procedure"}),r.jsxs("button",{className:`tooth-modal-tab ${u==="history"?"active":""}`,onClick:()=>h("history"),children:["History (",n.length,")"]})]}),u==="add"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"tooth-modal-search-box",style:{display:"flex",gap:"8px",alignItems:"center"},children:[r.jsxs("div",{className:"tooth-modal-search-wrapper",style:{flex:1},children:[r.jsx(fn,{size:16,className:"tooth-modal-search-icon"}),r.jsx("input",{type:"text",placeholder:"Search procedures...",value:l,onChange:x=>c(x.target.value),className:"tooth-modal-search-input",autoFocus:!0})]}),s&&r.jsxs("button",{onClick:s,className:"modal-manage-btn",title:"Manage Procedures",children:[r.jsx(sg,{size:16}),r.jsx("span",{children:"Manage"})]})]}),r.jsx("div",{className:"tooth-modal-list",children:m.length===0?r.jsx("div",{className:"tooth-modal-empty",children:"No procedures found."}):r.jsx("div",{className:"flex-col",children:m.map(x=>r.jsxs("button",{onClick:()=>a(x),className:"tooth-modal-item",children:[r.jsxs("div",{children:[r.jsx("div",{className:"tooth-modal-item-name",children:x.name}),r.jsx("div",{className:"tooth-modal-item-type",children:x.type})]}),r.jsxs("div",{className:"tooth-modal-item-cost-group",children:[r.jsxs("span",{children:["",x.cost]}),r.jsx(Ln,{size:16})]})]},x.id))})})]}),u==="history"&&r.jsx("div",{className:"tooth-modal-list",children:n.map((x,b)=>r.jsxs("div",{className:"tooth-modal-history-item",children:[r.jsx("div",{className:"tooth-modal-history-name",children:x.name}),r.jsxs("div",{className:"tooth-modal-history-date",children:[x.date," ",x.isPast?"(Past)":"(Current)"]})]},b))})]})})},OLe=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var Ce,ne,ye,de,se,re,oe,je,Oe;const[i,s]=v.useState(null),[o,l]=v.useState([]),[c,u]=v.useState(!0),[h,p]=v.useState(null),[m,x]=v.useState(!1),[b,j]=v.useState("cash"),[w,_]=v.useState(""),[k,C]=v.useState(""),[A,T]=v.useState(""),[E,I]=v.useState(""),[$,U]=v.useState(""),[B,R]=v.useState(!1),[z,G]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[K,Y]=v.useState(0),q=v.useRef(!1),[V,H]=v.useState(null),[Q,L]=v.useState(!1),te=()=>{const J=z.map(ge=>ge.method),xe=["cash","upi","card","no_cash_insurance","credit"].filter(ge=>!J.includes(ge));xe.length>0&&G([...z,{id:crypto.randomUUID(),method:xe[0],amount:0}])},me=J=>{z.length>2&&G(z.filter(xe=>xe.id!==J))},X=(J,xe,ge)=>{G(he=>{const Ie=he.map(nt=>nt.id===J?xe==="method"?{...nt,method:ge}:{...nt,amount:Math.max(0,ge)}:nt);if(xe==="amount"&&Ie.length===2){const Be=Ie.findIndex(wt=>wt.id===J)===0?1:0,Ge=Math.max(0,ge),it=Ae-Ge;Ie[Be]={...Ie[Be],amount:Math.max(0,it)}}return Ie})},Re=J=>{const xe=z.filter(he=>he.id!==J).reduce((he,Ie)=>he+Ie.amount,0),ge=Math.max(0,Ae-xe);X(J,"amount",ge)},Se=v.useMemo(()=>z.reduce((J,xe)=>J+xe.amount,0),[z]),Ee=J=>{const xe=Math.max(0,Math.min(100,isNaN(J)?0:J));q.current=!0,Y(xe);const ge=o.map(he=>({...he,discount_percentage:xe}));l(ge)},Fe=(J,xe)=>{const ge=[...o];ge[J].discount_percentage=isNaN(xe)?0:xe,l(ge)};v.useEffect(()=>{if(q.current){q.current=!1;return}const J=o.reduce((he,Ie)=>he+(Ie.price??0),0);if(J===0){Y(0);return}const ge=o.reduce((he,Ie)=>{const Be=(Ie.price??0)*((Ie.discount_percentage??0)/100);return he+Be},0)/J*100;Y(he=>Math.abs(he-ge)>.01?ge:he)},[o]);const le=async()=>{var J,xe;if(!i)return p("No record data available to bill."),null;if(o.length===0)return p("Cannot bill an empty procedure list."),null;x(!0),p(null);try{const ge=o.map(we=>{const Qe=we.price,Xe=Qe*((we.discount_percentage??0)/100),ut=Qe-Xe;return{name:we.name,price:we.price,quantity:1,total:ut,item_id:we.id||`proc_${Date.now()}`,type:"service",discount_percentage:we.discount_percentage??0}}),he=B?((J=z[0])==null?void 0:J.method)||"cash":b,Ie=B?z.map(we=>({method:we.method,amount:we.amount})):void 0,nt={patientId:i.patientId.id,items:ge,amount:Ae,paymentMode:he,splitPayments:Ie,type:"dental",related_id:i.id,status:"paid",discountPercentage:K},Be=await ie("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)}),Ge=await Be.json();if(!Be.ok||!Ge.id)throw new Error(Ge.message||"Failed to create bill.");(await ie(`/api/dental/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:Ge.id})})).ok||console.error("Failed to update dental record status"),s(we=>we?{...we,status:"billed",billId:Ge.id}:null);const wt=B?((xe=z.find(we=>we.method==="credit"))==null?void 0:xe.amount)||0:b==="credit"?Ae:0;if(wt>0)try{await ie(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:wt,related_bill_id:Ge.id,notes:`Dental Bill #${Ge.id}${B?" (Split Payment - Credit portion)":""}`})})}catch(we){console.error("Failed to create debt entry:",we)}return a&&a(),Ge.id}catch(ge){return console.error("Billing process failed:",ge),p(ge.message||"Failed to create bill."),null}finally{x(!1)}},_e=()=>{window.print()},Ve=async()=>{await le()&&setTimeout(()=>window.print(),800)};v.useEffect(()=>{t&&n&&(async()=>{u(!0);try{const[xe,ge]=await Promise.all([ie(`/api/dental/${n}`),ie("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!xe.ok)throw new Error("Failed to fetch dental record");const he=await xe.json(),Ie={...he,patientId:he.Patient||he.patientId};if(s(Ie),ge.ok){const Ge=await ge.json();C(Ge.upi_id||""),T(Ge.name||""),I(Ge.address||""),U(Ge.notes||"")}const Be=(Ie.selected_procedures||Ie.selectedProcedures||[]).map(Ge=>({...Ge,price:Ge.cost,discount_percentage:0}));l(Be)}catch(xe){console.error("Failed to fetch data:",xe),p(xe.message)}finally{u(!1)}})()},[t,n]);const De=v.useMemo(()=>o.reduce((J,xe)=>J+(xe.price??0),0),[o]),ue=v.useMemo(()=>o.reduce((J,xe)=>{const he=(xe.price??0)*(xe.discount_percentage??0)/100;return J+he},0),[o]),Ae=v.useMemo(()=>De-ue,[De,ue]),ce=v.useMemo(()=>Ae-Se,[Ae,Se]),be=v.useMemo(()=>Math.abs(ce)<.01,[ce]);v.useEffect(()=>{if(B&&z.length>=1&&Se===0){const J=[...z];J[0].amount=Ae,G(J)}},[B,Ae]),v.useEffect(()=>{if(Ae>0&&k){const J=`upi://pay?pa=${k}&pn=${encodeURIComponent(A)}&am=${Ae.toFixed(2)}&cu=INR`;_(J)}else _("")},[Ae,k,A]);const ke=v.useMemo(()=>B?z.some(J=>J.method==="credit"):b==="credit",[B,z,b]);return v.useEffect(()=>{(async()=>{var xe;if(ke&&((xe=i==null?void 0:i.patientId)!=null&&xe.id)){L(!0);try{const ge=await ie(`/api/patient-debts/${i.patientId.id}/balance`);if(ge.ok){const he=await ge.json();H(he.netDebt||0)}else H(0)}catch{H(0)}finally{L(!1)}}})()},[ke,(Ce=i==null?void 0:i.patientId)==null?void 0:Ce.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Dental Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Ot,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:c?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(ee,{width:30,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3].map(J=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:20,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:180,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:70,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:70,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:90,height:20})})]},J))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:120,height:28}),r.jsx(ee,{width:100,height:28})]})]})]})})]})})}):h?r.jsxs("div",{className:"error-message-box",children:["Error: ",h]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:A||"Clinic Name"}),(E||$)&&r.jsxs("div",{className:"clinic-details-print",children:[E&&r.jsx("span",{className:"small-text clinic-address",children:E}),$&&r.jsx("span",{className:"small-text clinic-notes",children:$})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",((ne=i.patientId)==null?void 0:ne.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",((ye=i.patientId)==null?void 0:ye.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",((de=i.patientId)==null?void 0:de.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",((se=i.patientId)==null?void 0:se.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ar,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"dental-chart-section-modal",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Dental Chart"})}),r.jsx("div",{className:"chart-wrapper-modal",children:r.jsx(GG,{selectedTeeth:[],onToothClick:()=>{},toothConditions:(()=>{const J={};return i.teeth&&i.teeth.forEach(xe=>{xe.procedures.forEach(ge=>{var Ie,nt;const he=((Ie=i.selected_procedures)==null?void 0:Ie.find(Be=>Be.id===ge))||((nt=i.selectedProcedures)==null?void 0:nt.find(Be=>Be.id===ge));if(he&&he.type&&he.type!=="general"){J[xe.toothNumber]||(J[xe.toothNumber]=[]);const Be=`condition-${he.type}`;J[xe.toothNumber].includes(Be)||J[xe.toothNumber].push(Be)}})}),J})(),toothDetails:(()=>{const J={};return i.teeth&&i.teeth.forEach(xe=>{J[xe.toothNumber]||(J[xe.toothNumber]=[]),xe.procedures.forEach(ge=>{var Ie,nt;const he=((Ie=i.selected_procedures)==null?void 0:Ie.find(Be=>Be.id===ge))||((nt=i.selectedProcedures)==null?void 0:nt.find(Be=>Be.id===ge));he&&J[xe.toothNumber].push({name:he.name,date:new Date(i.date||i.createdAt).toLocaleDateString()})})}),J})()})})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),o.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:o.map((J,xe)=>{const ge=J.price??0,he=ge*(J.discount_percentage??0)/100,Ie=ge-he;return r.jsxs("tr",{children:[r.jsx("td",{children:xe+1}),r.jsx("td",{children:J.name}),r.jsx("td",{children:J.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:J.discount_percentage===0?"":J.discount_percentage,onChange:nt=>Fe(xe,parseFloat(nt.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Ie.toFixed(2)})]},xe)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",De.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",K.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ue.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ae.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"12px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px"},children:"Payment Details:"}),B?r.jsx("div",{className:"split-payment-details-print",children:z.map(J=>r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:J.method.toUpperCase()}),r.jsxs("span",{children:["",J.amount.toFixed(2)]})]},J.id))}):r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Mode"}),r.jsx("span",{children:b.toUpperCase()})]})]}),(b==="credit"||B&&z.some(J=>J.method==="credit"))&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px",color:"#e53e3e"},children:"Credit/Debt Information:"}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Credit Amount"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",B?(((re=z.find(J=>J.method==="credit"))==null?void 0:re.amount)||0).toFixed(2):Ae.toFixed(2)]})]}),(V??0)>0&&r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(V??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px",fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((V??0)+(B?((oe=z.find(J=>J.method==="credit"))==null?void 0:oe.amount)||0:Ae)).toFixed(2)]})]})]})]}),w&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(B&&z.some(J=>J.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(qa,{value:w,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",De.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:K===0?"":K,onChange:J=>Ee(parseFloat(J.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:m||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ae.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:w?r.jsxs(r.Fragment,{children:[r.jsx(qa,{value:w,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${B?"active":""}`,onClick:()=>R(!B),disabled:m||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:B?"2px solid #4facfe":"1px solid #ddd",background:B?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:B?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:B?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(Uo,{size:14}),"Split Pay"]})]}),B?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(Uo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",Ae.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:z.map((J,xe)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:xe+1}),r.jsxs("select",{value:J.method,onChange:ge=>X(J.id,"method",ge.target.value),className:`split-payment-select ${J.method==="credit"?"is-credit":""}`,disabled:m||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:J.amount===0?"":J.amount,onChange:ge=>X(J.id,"amount",parseFloat(ge.target.value)||0),placeholder:"0",className:`split-payment-input ${J.method==="credit"?"is-credit":""}`,disabled:m||i.status==="billed"})]}),z.length>2&&r.jsx("button",{type:"button",onClick:()=>Re(J.id),className:"split-payment-btn split-payment-btn-fill",disabled:m||i.status==="billed",children:"Fill"}),z.length>2&&r.jsx("button",{type:"button",onClick:()=>me(J.id),className:"split-payment-btn split-payment-btn-remove",disabled:m||i.status==="billed",children:r.jsx(zn,{size:12})})]},J.id))}),z.length<5&&r.jsxs("button",{type:"button",onClick:te,className:"split-payment-add-btn",disabled:m||i.status==="billed",children:[r.jsx(Ln,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Se.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(ce)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(ce)<.01?"":ce>0?"":"",Math.abs(ce)<.01?"Balanced":ce>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ce).toFixed(2)]})]}),!be&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",Ae.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:J=>j(J.target.value),className:"payment-mode-select",disabled:m||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),ke&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Q?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:V&&V>0?"#dc3545":"#28a745"},children:["",(V||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:B?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(B?((je=z.find(J=>J.method==="credit"))==null?void 0:je.amount)||0:Ae).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((V||0)+(B?((Oe=z.find(J=>J.method==="credit"))==null?void 0:Oe.amount)||0:Ae)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:_e,className:"secondary-button print-preview-button no-print",disabled:m,children:"Print Preview"}),r.jsx("button",{onClick:Ve,className:"primary-button",disabled:m||B&&!be,children:m?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Is,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:_e,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},az=/^\+?[0-9\s\-().]{7,20}$/,MLe=/^[a-zA-Z\s'-]{2,}$/,ILe=()=>{const t=Mt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[u,h]=v.useState(!1),[p,m]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState([]),[_,k]=v.useState(!0),[C,A]=v.useState(()=>{const ge=localStorage.getItem("dentalNumberingSystem");return ge==="fdi"||ge==="universal"?ge:"fdi"});v.useEffect(()=>{localStorage.setItem("dentalNumberingSystem",C)},[C]);const T=Ur();v.useEffect(()=>{T.state&&T.state.patient&&Ae(T.state.patient)},[T.state]);const[E,I]=v.useState([]),[$,U]=v.useState([]),[B,R]=v.useState({}),[z,G]=v.useState(""),[K,Y]=v.useState(!1),[q,V]=v.useState("plan"),[H,Q]=v.useState([]),[L,te]=v.useState([]),[me,X]=v.useState(!1),[Re,Se]=v.useState(!1),[Ee,Fe]=v.useState(null);v.useEffect(()=>{_e(),le()},[]);const le=async()=>{try{const ge=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),he=await ie(`/api/patients?${ge.toString()}`);if(he.ok){const Ie=await he.json();w(Ie.patients||[])}}catch(ge){console.error("Error fetching recent patients",ge)}finally{k(!1)}},_e=async()=>{try{const ge=await ie("/api/dental/procedures");if(ge.ok){const he=await ge.json();te(he)}}catch(ge){console.error("Error fetching procedures",ge)}};v.useEffect(()=>{(async()=>{if(!l){Q([]),Fe(null),G(""),U([]),R({}),I([]);return}try{const he=await ie(`/api/dental/patient/${l.id}`);if(he.ok){const Ie=await he.json();Q(Ie);const nt=new Date().toDateString(),Be=Ie.find(Ge=>Ge.status==="draft"&&new Date(Ge.date||Ge.createdAt||Date.now()).toDateString()===nt);if(Be){Fe(Be.id),G(Be.notes||"");const Ge=Be.selected_procedures.filter(we=>!Be.teeth.some(Qe=>Qe.procedures.includes(we.id)));U(Ge.map(we=>({instanceId:crypto.randomUUID(),procedureId:we.id,name:we.name,price:we.cost,type:we.type})));const it={},wt=[];Be.teeth.forEach(we=>{const Qe=we.procedures.map(Xe=>{const ut=Be.selected_procedures.find(Ct=>Ct.id===Xe)||L.find(Ct=>Ct.id===Xe);return{instanceId:crypto.randomUUID(),procedureId:Xe,name:ut?ut.name:Xe,price:ut?ut.cost:0,type:ut?ut.type:"general"}});Qe.length>0&&(it[we.toothNumber]=Qe,wt.push(we.toothNumber))}),R(it),I(wt)}else Fe(null),G(""),U([]),R({}),I([])}}catch(he){console.error("Error fetching history",he)}})()},[l,L]);const Ve=v.useMemo(()=>ql(async ge=>{if(!ge.trim()||ge.length<2){i([]),o(!1);return}o(!0);try{const he=await ie(`/api/patients?search=${encodeURIComponent(ge)}&limit=10`);if(he.ok){const Ie=await he.json();i(Ie.patients||[])}}catch(he){console.error("Search error:",he)}finally{o(!1)}},300),[]);v.useEffect(()=>{Ve(e)},[e,Ve]);const De=ge=>{const he=ge.target.value;n(he),m(az.test(he)),b(MLe.test(he)&&!az.test(he))},ue=async ge=>{if(!(!e||ge==="phone"&&!p||ge==="name"&&!x)){o(!0);try{const Ie=await ie("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ge==="name"?e:"direct dental",phone:ge==="phone"?e:null,age:null,gender:null,token:null})});if(Ie.ok){const nt=await Ie.json();Ae({id:nt.id,name:nt.name,token:nt.token??null,age:nt.age??null,gender:nt.gender??null,phone:nt.phone})}else alert("Failed to create patient")}catch(he){console.error("Error creating patient:",he),alert("Error creating patient")}finally{o(!1)}}},Ae=ge=>{c(ge),n(""),i([])},ce=()=>{c(null),I([]),U([]),R({}),G("")},be=async ge=>{if(!l)return;const he=await ie(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)});if(he.ok)await he.json(),c(Ie=>Ie?{...Ie,...ge}:null);else throw new Error("Failed to update")},[ke,Ce]=v.useState(null),ne=ge=>{Ce(ge)},ye=ge=>{if(!ke)return;const he={instanceId:crypto.randomUUID(),procedureId:ge.id,name:ge.name,price:ge.cost,type:ge.type};R(Ie=>{const nt=Ie[ke]||[];return{...Ie,[ke]:[...nt,he]}}),I(Ie=>Ie.includes(ke)?Ie:[...Ie,ke]),Ce(null)},de=()=>{const ge={},he={},Ie=(Ge,it)=>{ge[Ge]||(ge[Ge]=[]);const wt=`condition-${it}`;ge[Ge].includes(wt)||ge[Ge].push(wt)},nt=(Ge,it)=>{he[Ge]||(he[Ge]=[]),he[Ge].push(it)};return[...H].sort((Ge,it)=>new Date(Ge.date).getTime()-new Date(it.date).getTime()).forEach(Ge=>{Ge.teeth&&Array.isArray(Ge.teeth)&&Ge.teeth.forEach(it=>{it.procedures.forEach(wt=>{var Qe;let we=(Qe=Ge.selected_procedures)==null?void 0:Qe.find(Xe=>Xe.id===wt);we||(we=L.find(Xe=>Xe.id===wt)),we&&we.type!=="general"?(Ie(it.toothNumber,we.type),nt(it.toothNumber,{name:we.name,date:new Date(Ge.date||Ge.createdAt||0).toLocaleDateString(),recordId:Ge.id,isPast:!0})):wt&&nt(it.toothNumber,{name:`Procedure: ${wt}`,date:new Date(Ge.date||Ge.createdAt||0).toLocaleDateString(),recordId:Ge.id,isPast:!0})})})}),Object.keys(B).forEach(Ge=>{const it=parseInt(Ge),wt=B[it];wt&&wt.length>0&&wt.forEach(we=>{we.type!=="general"&&(Ie(it,we.type),nt(it,{name:we.name,date:"Current",isPast:!1}))})}),{conditions:ge,details:he}},{conditions:se,details:re}=v.useMemo(()=>de(),[H,B,L]),oe=ge=>{const he=H.find(Ge=>Ge.id===ge);if(!he)return;G(he.notes||"");const Ie=he.selected_procedures.filter(Ge=>!he.teeth.some(it=>it.procedures.includes(Ge.id)));U(Ie.map(Ge=>({instanceId:crypto.randomUUID(),procedureId:Ge.id,name:Ge.name,price:Ge.cost,type:Ge.type})));const nt={},Be=[];he.teeth.forEach(Ge=>{const it=Ge.procedures.map(wt=>{const we=he.selected_procedures.find(Qe=>Qe.id===wt)||L.find(Qe=>Qe.id===wt);return{instanceId:crypto.randomUUID(),procedureId:wt,name:we?we.name:wt,price:we?we.cost:0,type:we?we.type:"general"}});it.length>0&&(nt[Ge.toothNumber]=it,Be.push(Ge.toothNumber))}),R(nt),I(Be),V("plan")},je=(ge,he)=>{he?(R(Ie=>{const nt={...Ie};return nt[he]=(Ie[he]||[]).filter(Be=>Be.instanceId!==ge),nt[he].length===0&&delete nt[he],nt}),I(Ie=>Ie)):U(Ie=>Ie.filter(nt=>nt.instanceId!==ge))},Oe=(ge,he,Ie)=>{Ie?R(nt=>({...nt,[Ie]:(nt[Ie]||[]).map(Be=>Be.instanceId===ge?{...Be,price:he}:Be)})):U(nt=>nt.map(Be=>Be.instanceId===ge?{...Be,price:he}:Be))},J=()=>{window.print()},xe=async(ge=!0)=>{var he;if(l){Y(!0);try{const nt=[...$,...Object.values(B).flat()].map(we=>({id:we.procedureId,name:we.name,cost:we.price,type:we.type})),Ge=Object.keys(B).map(Number).map(we=>({toothNumber:we,procedures:(B[we]||[]).map(Qe=>Qe.procedureId),notes:z})),it={patientId:l.id,teeth:Ge,selectedProcedures:nt,notes:z};let wt;if(Ee?((he=H.find(Qe=>Qe.id===Ee))==null?void 0:he.status)==="draft"?wt=await ie(`/api/dental/${Ee}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await ie("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await ie("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}),wt.ok){const we=await wt.json();Fe(we.id);const Qe=await ie(`/api/dental/patient/${l.id}`);if(Qe.ok){const Xe=await Qe.json();Q(Xe)}ge?Se(!0):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save dental record.")}catch(Ie){console.error(Ie),alert("Error saving record.")}finally{Y(!1)}}};return r.jsxs("div",{className:"dental-page-container printable-section",children:[r.jsxs("header",{className:"dental-header",children:[r.jsxs("div",{className:"dental-title-group",children:[r.jsx(Ar,{className:"dental-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"dental-title",children:"Dental Report"}),r.jsx("p",{className:"dental-subtitle",children:"Create new dental records and bills"})]}),r.jsxs("div",{className:"numbering-toggle",style:{marginLeft:"auto",marginRight:"16px",display:"flex",gap:"4px",background:"var(--dp-bg-sec)",padding:"4px",borderRadius:"8px"},children:[r.jsx("button",{onClick:()=>A("universal"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="universal"?"var(--dp-card-bg)":"transparent",boxShadow:C==="universal"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="universal"?"var(--dp-text)":"var(--dp-text-sec)"},children:"Universal"}),r.jsx("button",{onClick:()=>A("fdi"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="fdi"?"var(--dp-card-bg)":"transparent",boxShadow:C==="fdi"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="fdi"?"var(--dp-text)":"var(--dp-text-sec)"},children:"FDI"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>h(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(Ms,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:ce,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Ot,{size:16})})]}),r.jsxs("button",{onClick:()=>X(!0),className:"header-manage-procs-btn no-print",title:"Manage Dental Procedures",children:[r.jsx(sg,{size:16}),r.jsx("span",{children:"Manage Procedures"})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(fn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"dental-search-input header-input",value:e,onChange:De}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(ge=>r.jsxs("div",{onClick:()=>Ae(ge),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:ge.name}),r.jsxs("div",{className:"patient-meta",children:[ge.age," yrs / ",ge.gender,"  ",ge.phone]})]}),r.jsx(qn,{size:16,color:"var(--dp-text-sec)"})]},ge.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>ue(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"dental-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container",children:[!l&&r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--dp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(fn,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"dental-search-input",value:e,onChange:De,autoFocus:!0}),s&&r.jsx("div",{className:"search-spinner"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(ge=>r.jsxs("div",{onClick:()=>Ae(ge),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:ge.name}),r.jsxs("div",{className:"patient-meta",children:[ge.age," yrs / ",ge.gender,"  ",ge.phone]})]}),r.jsx(qn,{size:18,color:"var(--dp-text-sec)"})]},ge.id))})]}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{style:{color:"var(--dp-text-sec)",marginBottom:"15px"},children:['No patients found matching "',e,'".']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:(p||x)&&r.jsxs("button",{type:"button",onClick:()=>ue(p?"phone":"name"),className:"register-new-btn",style:{backgroundColor:"var(--dp-card-bg)",border:"1px solid var(--dp-primary)",padding:"8px 16px",borderRadius:"8px"},children:['Create "',e,'"']})})]}),!l&&r.jsx("div",{style:{marginTop:"32px"},children:r.jsx("button",{onClick:()=>X(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage Procedures"})}),!l&&(_||j.length>0)&&r.jsxs("div",{className:"recent-registered-section",children:[r.jsx("div",{className:"recent-registered-label",children:"Recent Patients"}),r.jsx("div",{className:"recent-list",children:_?[1,2,3].map(ge=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(ee,{width:100,height:18}),r.jsx(ee,{width:30,height:20})]}),r.jsx("div",{className:"recent-info",children:r.jsx(ee,{width:80,height:14})})]},ge)):j.map(ge=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>Ae(ge),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:ge.name||"New Patient"}),ge.token&&r.jsxs("span",{className:"recent-token",children:["#",ge.token]})]}),r.jsxs("div",{className:"recent-info",children:[ge.age?`${ge.age} yrs`:"",ge.age&&ge.gender?" / ":"",ge.gender||""]})]},ge.id))})]})]}),l&&r.jsx("div",{className:"dental-workspace",children:r.jsxs("div",{className:"dental-grid",children:[r.jsxs("div",{className:"chart-section",children:[r.jsx("div",{className:"dental-card chart-card-scroll",children:r.jsx(GG,{selectedTeeth:E,toothConditions:se,toothDetails:re,onToothClick:ne,onEditPastRecord:oe,onPrint:J,numberingSystem:C})}),r.jsxs("div",{className:"dental-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("h4",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>xe(!1),disabled:K,title:"Save notes and procedures without billing",children:[r.jsx(qi,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:z,onChange:ge=>G(ge.target.value)})]})]}),r.jsx("div",{className:"dental-card procedures-section",children:r.jsxs("div",{className:"treatment-plan-container",style:{borderTop:"none"},children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{onClick:()=>V("plan"),className:q==="plan"?"active":"",children:"Treatment Plan"}),r.jsx("button",{onClick:()=>V("history"),className:q==="history"?"active":"",children:"Visit History"})]}),r.jsx("div",{className:"treatment-plan-list custom-scrollbar",children:q==="plan"?r.jsx(r.Fragment,{children:$.length===0&&Object.keys(B).length===0?r.jsx("div",{className:"no-print",style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"Select a tooth to add procedures."}):r.jsxs(r.Fragment,{children:[$.length>0&&r.jsxs("div",{className:"plan-group",children:[r.jsx("h4",{children:"General"}),$.map(ge=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:ge.name,children:ge.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:ge.price,onChange:he=>Oe(ge.instanceId,parseFloat(he.target.value)||0),className:"cost-input"}),r.jsx("button",{onClick:()=>je(ge.instanceId),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Ot,{size:14})})]})]},ge.instanceId))]}),Object.entries(B).map(([ge,he])=>he.length===0?null:r.jsxs("div",{className:"plan-group",children:[r.jsxs("h4",{children:["Tooth ",Tb(parseInt(ge),C)]}),he.map(Ie=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:Ie.name,children:Ie.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:Ie.price,onChange:nt=>Oe(Ie.instanceId,parseFloat(nt.target.value)||0,parseInt(ge)),className:"cost-input"}),r.jsx("button",{onClick:()=>je(Ie.instanceId,parseInt(ge)),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Ot,{size:14})})]})]},Ie.instanceId))]},ge))]})}):r.jsx("div",{className:"history-list",children:H.length===0?r.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"No past visits found."}):H.map(ge=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(ge.date).toLocaleDateString()}),r.jsx("span",{className:"record-status",children:ge.status})]}),r.jsxs("div",{className:"history-record-body",children:[ge.teeth.map(he=>r.jsxs("div",{className:"history-tooth-group",children:[r.jsxs("strong",{children:["Tooth ",Tb(he.toothNumber,C),":"]})," ",he.procedures.map(Ie=>{const nt=ge.selected_procedures.find(Be=>Be.id===Ie)||L.find(Be=>Be.id===Ie);return nt?nt.name:Ie}).join(", ")]},he.toothNumber)),ge.notes&&r.jsx("p",{className:"history-notes",children:r.jsxs("em",{children:["Notes: ",ge.notes]})}),ge.status==="billed"&&r.jsx("div",{className:"history-record-actions mt-3",children:r.jsxs("button",{onClick:()=>{Fe(ge.id),Se(!0)},className:"view-bill-btn",children:[r.jsx(Ar,{size:14})," View Bill"]})})]})]},ge.id))})}),r.jsx("div",{className:"action-footer",children:r.jsx("button",{onClick:()=>xe(!0),className:"save-btn",disabled:K||$.length===0&&Object.keys(B).length===0,children:K?"Saving...":"Save & Bill"})})]})})]})}),u&&l&&r.jsx(bG,{patient:l,onClose:()=>h(!1),onSave:be}),me&&r.jsx(ELe,{onClose:()=>X(!1),onUpdate:_e}),ke!==null&&r.jsx(DLe,{toothNumber:ke,procedures:L.map(ge=>({id:ge.id,name:ge.name,cost:ge.cost,type:ge.type})),history:re[ke]||[],onSelect:ye,onManageProcedures:()=>{Ce(null),X(!0)},onClose:()=>Ce(null),numberingSystem:C}),r.jsx(OLe,{isOpen:Re,recordId:Ee,onClose:()=>{Se(!1),ce()},onBillingComplete:()=>{}})]})},RLe=()=>{var ke,Ce,ne,ye,de;const t=Mt(),e=Ur(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,u]=v.useState(null),[h,p]=v.useState(!1),[m,x]=v.useState("cash"),[b,j]=v.useState(""),[w,_]=v.useState(""),[k,C]=v.useState(""),[A,T]=v.useState(""),[E,I]=v.useState(""),[$,U]=v.useState(!1),[B,R]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),z=()=>{B.length<5&&R(se=>[...se,{id:Date.now().toString(),method:"cash",amount:0}])},G=se=>{B.length>2&&R(re=>re.filter(oe=>oe.id!==se))},K=(se,re,oe)=>{R(je=>{const Oe=je.map(J=>J.id===se?re==="method"?{...J,method:oe}:{...J,amount:Math.max(0,oe)}:J);if(re==="amount"&&Oe.length===2){const xe=Oe.findIndex(Ie=>Ie.id===se)===0?1:0,ge=Math.max(0,oe),he=Ve-ge;Oe[xe]={...Oe[xe],amount:Math.max(0,he)}}return Oe})},Y=(se,re)=>{const oe=B.filter(Oe=>Oe.id!==se).reduce((Oe,J)=>Oe+J.amount,0),je=Math.max(0,re-oe);R(Oe=>Oe.map(J=>J.id===se?{...J,amount:je}:J))},[q,V]=v.useState(0),H=v.useRef(!1),[Q,L]=v.useState(null),[te,me]=v.useState(!1),X=se=>{const re=Math.max(0,Math.min(100,isNaN(se)?0:se));H.current=!0,V(re);const oe=i.map(je=>({...je,discount_percentage:re}));s(oe)},Re=(se,re)=>{const oe=[...i];oe[se].discount_percentage=isNaN(re)?0:re,s(oe)};v.useEffect(()=>{if(H.current){H.current=!1;return}const se=i.reduce((je,Oe)=>je+(Oe.price??0),0);if(se===0){V(0);return}const oe=i.reduce((je,Oe)=>{const xe=(Oe.price??0)*((Oe.discount_percentage??0)/100);return je+xe},0)/se*100;V(je=>Math.abs(je-oe)>.01?oe:je)},[i]);const Se=async()=>{if(!n)return u("No record data available to bill."),null;if(i.length===0)return u("Cannot bill an empty procedure list."),null;p(!0),u(null);try{const se=i.map(xe=>{const ge=xe.price,he=ge*((xe.discount_percentage??0)/100),Ie=ge-he;return{name:xe.name,price:xe.price,quantity:1,total:Ie,item_id:xe.id||`proc_${Date.now()}`,type:"service",discount_percentage:xe.discount_percentage??0}}),re={patientId:n.patientId.id,items:se,amount:Ve,paymentMode:$?"split":m,type:"dental",related_id:n.id,status:"paid",discountPercentage:q};$&&(re.splitPayments=B.map(xe=>({method:xe.method,amount:xe.amount})));const oe=await ie("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(re)}),je=await oe.json();if(!oe.ok||!je.id)throw new Error(je.message||"Failed to create bill.");(await ie(`/api/dental/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:je.id})})).ok||console.error("Failed to update dental record status"),a(xe=>xe?{...xe,status:"billed",billId:je.id}:null);const J=$?B.filter(xe=>xe.method==="credit").reduce((xe,ge)=>xe+ge.amount,0):m==="credit"?Ve:0;if(J>0)try{await ie(`/api/patient-debts/${n.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:J,related_bill_id:je.id,notes:`Dental Bill #${je.id}`})})}catch(xe){console.error("Failed to create debt entry:",xe)}return je.id}catch(se){return console.error("Billing process failed:",se),u(se.message||"Failed to create bill."),null}finally{p(!1)}},Ee=()=>{window.print()},Fe=async()=>{await Se()&&setTimeout(()=>window.print(),500)};v.useEffect(()=>{const se=e.pathname.split("/"),re=se[se.length-1];re?(async()=>{l(!0);try{const[je,Oe]=await Promise.all([ie(`/api/dental/${re}`),ie("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!je.ok)throw new Error("Failed to fetch dental record");const J=await je.json(),xe={...J,patientId:J.Patient||J.patientId};if(a(xe),Oe.ok){const Ie=await Oe.json();_(Ie.upi_id||""),C(Ie.name||""),T(Ie.address||""),I(Ie.notes||"")}const he=(xe.selected_procedures||xe.selectedProcedures||[]).map(Ie=>({...Ie,price:Ie.cost,discount_percentage:0}));s(he)}catch(je){console.error("Failed to fetch data:",je),u(je.message)}finally{l(!1)}})():(u("No record ID provided."),l(!1))},[e.pathname]);const le=v.useMemo(()=>i.reduce((se,re)=>se+(re.price??0),0),[i]),_e=v.useMemo(()=>i.reduce((se,re)=>{const je=(re.price??0)*(re.discount_percentage??0)/100;return se+je},0),[i]),Ve=v.useMemo(()=>le-_e,[le,_e]),De=v.useMemo(()=>B.reduce((se,re)=>se+re.amount,0),[B]),ue=v.useMemo(()=>Ve-De,[Ve,De]),Ae=v.useMemo(()=>Math.abs(ue)<.01,[ue]),ce=v.useMemo(()=>$?B.some(se=>se.method==="credit"&&se.amount>0):m==="credit",[$,B,m]),be=v.useMemo(()=>$?B.filter(se=>se.method==="credit").reduce((se,re)=>se+re.amount,0):m==="credit"?Ve:0,[$,B,m,Ve]);return v.useEffect(()=>{if(Ve>0&&w){const se=`upi://pay?pa=${w}&pn=${encodeURIComponent(k)}&am=${Ve.toFixed(2)}&cu=INR`;j(se)}else j("")},[Ve,w,k]),v.useEffect(()=>{(async()=>{var re;if(ce&&((re=n==null?void 0:n.patientId)!=null&&re.id)){me(!0);try{const oe=await ie(`/api/patient-debts/${n.patientId.id}/balance`);if(oe.ok){const je=await oe.json();L(je.netDebt||0)}else L(0)}catch{L(0)}finally{me(!1)}}})()},[ce,(ke=n==null?void 0:n.patientId)==null?void 0:ke.id]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(ee,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(ee,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(ee,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(ee,{width:30,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:150,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:80,height:20})}),r.jsx("th",{children:r.jsx(ee,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(se=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(ee,{width:20,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:180,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:70,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:70,height:20})}),r.jsx("td",{children:r.jsx(ee,{width:90,height:20})})]},se))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(ee,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:100,height:20}),r.jsx(ee,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ee,{width:120,height:28}),r.jsx(ee,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(ee,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:k||"Clinic Name"}),(A||E)&&r.jsxs("div",{className:"clinic-details-print",children:[A&&r.jsx("span",{className:"small-text clinic-address",children:A}),E&&r.jsx("span",{className:"small-text clinic-notes",children:E})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",((Ce=n.patientId)==null?void 0:Ce.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",((ne=n.patientId)==null?void 0:ne.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date(n.date||n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Dental Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qn,{size:16})," Patient Name"]})," ",((ye=n.patientId)==null?void 0:ye.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(za,{size:16})," Token"]})," ",((de=n.patientId)==null?void 0:de.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ar,{size:16})," Record ID"]})," ",n.id.substring(n.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(qr,{size:16})," Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((se,re)=>{const oe=se.price??0,je=oe*(se.discount_percentage??0)/100,Oe=oe-je;return r.jsxs("tr",{children:[r.jsx("td",{children:re+1}),r.jsx("td",{children:se.name}),r.jsx("td",{children:se.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:se.discount_percentage===0?"":se.discount_percentage,onChange:J=>Re(re,parseFloat(J.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Oe.toFixed(2)})]},re)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",le.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",q.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",_e.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ve.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:$?"Split Payment":m==="cash"?"Cash":m==="upi"?"UPI":m==="card"?"Card":m==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),$&&B.map((se,re)=>se.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:se.method==="cash"?"Cash":se.method==="upi"?"UPI":se.method==="card"?"Card":se.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",se.amount.toFixed(2)]})]},re))]}),Q!==null&&(Q>0||ce)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(Q??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(Q??0).toFixed(2)]})]}),ce&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((Q??0)+(ce?be:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${m!=="upi"?"hide-on-screen":""}`,children:[r.jsx(qa,{value:b,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",le.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",_e.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:q===0?"":q,onChange:se=>X(parseFloat(se.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:h||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ve.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(qa,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>U(!$),disabled:h||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:$?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:$?"rgba(79, 172, 254, 0.1)":"transparent",color:$?"#4facfe":"#666",cursor:h||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Uo,{size:14}),"Split"]})]}),$?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Ve.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:B.map((se,re)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:re+1}),r.jsxs("select",{value:se.method,onChange:oe=>K(se.id,"method",oe.target.value),className:`split-payment-select ${se.method==="credit"?"is-credit":""}`,disabled:h||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:se.amount||"",onChange:oe=>K(se.id,"amount",parseFloat(oe.target.value)||0),className:`split-payment-input ${se.method==="credit"?"is-credit":""}`,disabled:h||n.status==="billed"})]}),B.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>Y(se.id,Ve),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>G(se.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(zn,{size:12})})]})]},se.id))}),B.length<5&&r.jsxs("button",{type:"button",onClick:z,className:"split-payment-add-btn",disabled:h||n.status==="billed",children:[r.jsx(Ln,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",De.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ae?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Ae?"":ue>0?"":"",Ae?"Balanced":ue>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ue).toFixed(2)]})]}),!Ae&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",Ve.toFixed(2)]})]})]}):r.jsxs("select",{value:m,onChange:se=>x(se.target.value),className:"payment-mode-select",disabled:h||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),ce&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),te?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:Q&&Q>0?"#dc3545":"#28a745"},children:["",(Q||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",be.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((Q||0)+be).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:n.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Ee,className:"secondary-button print-preview-button no-print",disabled:h,children:"Print Preview"}),r.jsx("button",{onClick:Fe,className:"primary-button",disabled:h,children:h?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Is,{size:20})," Bill Generated"]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})]}):r.jsx("div",{className:"error-message-box",children:"No record found."})},aP=50,LLe=()=>{const t=Mt(),{patientId:e}=Da(),[n,a]=v.useState([]),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,u]=v.useState(null),[h,p]=v.useState(""),[m,x]=v.useState(""),[b,j]=v.useState(""),[w,_]=v.useState("all"),[k,C]=v.useState("all"),[A,T]=v.useState("all"),[E,I]=v.useState(1),$=async()=>{l(!0),u(null);try{const V=new URLSearchParams({patientId:e||"",limit:"5000"});h&&V.append("startDate",h),m&&V.append("endDate",m);const H=await ie(`/api/bills?${V.toString()}`);if(!H.ok){const te=await H.json();throw new Error(te.message||"Failed to fetch bills")}const L=(await H.json()).bills||[];a(L),L.length>0&&L[0].Patient&&s(L[0].Patient.name),I(1)}catch(V){console.error("Fetch Bills Error:",V),u(V.message||"An error occurred while fetching bills.")}finally{l(!1)}};v.useEffect(()=>{$()},[e,h,m]);const U=v.useMemo(()=>{const V=new Set(n.map(H=>H.type));return Array.from(V).sort()},[n]),B=v.useMemo(()=>{const V=new Map;return n.forEach(H=>{H.Creator&&V.set(H.Creator.id,H.Creator.name)}),Array.from(V.entries()).map(([H,Q])=>({id:H,name:Q})).sort((H,Q)=>H.name.localeCompare(Q.name))},[n]),R=v.useMemo(()=>n.filter(V=>{var H;if(w!=="all"&&V.status!==w||k!=="all"&&V.type!==k||A!=="all"&&((H=V.Creator)==null?void 0:H.id)!==A)return!1;if(b){const Q=b.toLowerCase();if(!(V.items||[]).map(te=>te.name.toLowerCase()).join(" ").includes(Q))return!1}return!0}),[n,b,w,k,A]),z=Math.ceil(R.length/aP),G=v.useMemo(()=>{const V=(E-1)*aP;return R.slice(V,V+aP)},[R,E]),K=V=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(V),Y=V=>new Date(V).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),q=V=>{var L;let H=0;const Q=parseFloat(((L=V.discount_percentage)==null?void 0:L.toString())||"0");return V.items&&Array.isArray(V.items)&&(H+=V.items.reduce((te,me)=>{const X=me.discount_percentage||0;if(X>0){const Re=me.total||0;return te+Re*(X/(100-X))}return te},0)),Q>0&&(H+=V.amount*(Q/(100-Q))),H};return r.jsxs("div",{className:Dt.container,children:[r.jsxs("div",{className:Dt.header,children:[r.jsxs("div",{className:Dt.titleSection,children:[r.jsxs("button",{onClick:()=>t(-1),className:Dt.backButton,children:[r.jsx(en,{size:18})," Back"]}),r.jsxs("h1",{className:Dt.title,children:["Bills for ",i||"Patient"]})]}),r.jsxs("div",{children:["Showing ",R.length," of ",n.length," results"]})]}),r.jsxs("div",{className:Dt.filters,style:{gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))"},children:[r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(qr,{size:14})," From Date"]}),r.jsx("input",{type:"date",className:Dt.input,value:h,onChange:V=>p(V.target.value)})]}),r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(qr,{size:14})," To Date"]}),r.jsx("input",{type:"date",className:Dt.input,value:m,onChange:V=>x(V.target.value)})]}),r.jsxs("div",{className:Dt.filterGroup,style:{gridColumn:"span 2"},children:[r.jsxs("label",{children:[r.jsx(fn,{size:14})," Search Medicines/Items"]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:"text",className:Dt.input,placeholder:"Enter medicine or item name...",value:b,onChange:V=>{j(V.target.value),I(1)},style:{paddingLeft:"2.5rem",width:"100%",boxSizing:"border-box"}}),r.jsx(fn,{size:16,style:{position:"absolute",left:"0.8rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}})]})]}),r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(Lv,{size:14})," Type"]}),r.jsxs("select",{className:Dt.input,value:k,onChange:V=>{C(V.target.value),I(1)},children:[r.jsx("option",{value:"all",children:"All Types"}),U.map(V=>r.jsx("option",{value:V,children:V.toUpperCase()},V))]})]}),r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(qn,{size:14})," Creator"]}),r.jsxs("select",{className:Dt.input,value:A,onChange:V=>{T(V.target.value),I(1)},children:[r.jsx("option",{value:"all",children:"All Users"}),B.map(V=>r.jsx("option",{value:V.id,children:V.name},V.id))]})]}),r.jsxs("div",{className:Dt.filterGroup,children:[r.jsxs("label",{children:[r.jsx(Lv,{size:14})," Status"]}),r.jsxs("select",{className:Dt.input,value:w,onChange:V=>{_(V.target.value),I(1)},children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"paid",children:"Paid"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),c&&r.jsx("div",{className:"error-alert",children:c}),r.jsxs("div",{className:Dt.tableWrapper,children:[r.jsxs("table",{className:Dt.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date & Time"}),r.jsx("th",{children:"Items"}),r.jsx("th",{children:"Discount"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Created By"}),r.jsx("th",{children:"Status"})]})}),r.jsx("tbody",{children:o&&n.length===0?Array.from({length:5}).map((V,H)=>r.jsx("tr",{children:r.jsx("td",{colSpan:6,children:r.jsx(ee,{height:40})})},H)):G.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:Dt.emptyState,children:"No bills found matching filters."})}):G.map(V=>{var H,Q,L,te;return r.jsxs("tr",{className:Dt.row,onClick:()=>t(`/dashboard/edit-complaint/patient/${e}`),style:{cursor:"pointer"},children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:500},children:Y(V.createdAt)}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:V.type.toUpperCase()})]}),r.jsx("td",{children:r.jsxs("div",{className:Dt.itemsList,children:[(H=V.items)==null?void 0:H.slice(0,3).map((me,X)=>r.jsxs("div",{className:Dt.itemName,children:[me.name," ",r.jsxs("span",{className:Dt.itemDetail,children:["x",me.quantity]})]},X)),((Q=V.items)==null?void 0:Q.length)>3&&r.jsxs("div",{className:Dt.itemDetail,children:["+ ",V.items.length-3," more items"]})]})}),r.jsx("td",{children:r.jsx("div",{className:Dt.discount,children:K(q(V))})}),r.jsxs("td",{children:[r.jsx("div",{className:Dt.amount,children:K(V.amount)}),V.payment_mode&&r.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["via ",V.payment_mode.toUpperCase()]})]}),r.jsxs("td",{children:[r.jsx("div",{style:{fontSize:"0.85rem"},children:((L=V.Creator)==null?void 0:L.name)||"-"}),r.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:(te=V.Creator)==null?void 0:te.role})]}),r.jsx("td",{children:r.jsx("span",{className:`${Dt.statusBadge} ${V.status==="paid"?Dt.statusPaid:V.status==="pending"?Dt.statusPending:Dt.statusCancelled}`,children:V.status})})]},V.id)})})]}),z>1&&r.jsxs("div",{className:Dt.pagination,children:[r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:["Page ",E," of ",z]}),r.jsxs("div",{className:Dt.paginationButtons,children:[r.jsxs("button",{className:Dt.pageButton,disabled:E===1||o,onClick:V=>{V.stopPropagation(),I(H=>H-1)},children:[r.jsx(Bf,{size:16})," Previous"]}),r.jsxs("button",{className:Dt.pageButton,disabled:E===z||o,onClick:V=>{V.stopPropagation(),I(H=>H+1)},children:["Next ",r.jsx(Vl,{size:16})]})]})]})]})]})},RD=v.lazy(()=>UN(()=>import("./AddPatientPage-u-NKOyVF.js"),__vite__mapDeps([2,3]))),iz=v.lazy(()=>UN(()=>import("./EditComplaintPage-ClwQgdUk.js"),__vite__mapDeps([0,1])));function FLe(){const[t,e]=v.useState(!1),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,u]=v.useState(!1),h=A=>{a(A),e(!0),A.role==="admin"&&!A.has_seen_tutorial&&u(!0)},p=()=>{e(!1),a(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};v.useEffect(()=>{const A=localStorage.getItem("authToken"),T=localStorage.getItem("currentUser");if(A&&T)try{const E=JSON.parse(T);a(E),e(!0),E.role==="admin"&&!E.has_seen_tutorial&&u(!0)}catch(E){console.error("Error parsing stored user data:",E),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}s(!1)},[]);const{data:m}=jDe(t&&!!n);v.useEffect(()=>{m?l(m):t||l(null)},[m,t]);const[x,b]=v.useState(null),[j,w]=v.useState(!1);v.useEffect(()=>{const A=T=>{T.preventDefault(),b(T),w(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",A),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),w(!1)),()=>{window.removeEventListener("beforeinstallprompt",A)}},[]),v.useEffect(()=>{const A=window.matchMedia("(prefers-color-scheme: dark)"),T=()=>{A.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return T(),A.addEventListener("change",T),()=>{A.removeEventListener("change",T),document.body.classList.remove("dark-mode")}},[]);const _=v.useCallback(async()=>{if(!x){console.log("Install prompt event not available.");return}const A=x;A.prompt();const{outcome:T}=await A.userChoice;console.log(`User response to the install prompt: ${T}`),b(null),w(!1)},[x]),k=async()=>{if(n)try{(await ie(`/api/users/${n.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(a(T=>T?{...T,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...n,has_seen_tutorial:!0})),u(!1)):console.error("Failed to update tutorial status on backend.")}catch(A){console.error("Error marking tutorial as seen:",A)}};return i?r.jsx(Im,{}):r.jsx(pK,{clientId:"277898779560-33obduhn8r758rini4qagetdrupvisri.apps.googleusercontent.com",children:r.jsx(GY,{children:r.jsx(VY,{children:r.jsx(HY,{children:r.jsxs(OY,{children:[r.jsx(UY,{children:r.jsxs(Om,{children:[r.jsx(gt,{path:"/login",element:t?r.jsx(qt,{to:"/dashboard"}):r.jsx(WDe,{onLoginSuccess:h})}),r.jsx(gt,{path:"/patient-login",element:t?r.jsx(qt,{to:"/dashboard"}):r.jsx(KDe,{onLoginSuccess:h})}),r.jsx(gt,{path:"/patient-dashboard",element:t&&(n==null?void 0:n.role)==="patient"?r.jsx(nOe,{}):r.jsx(qt,{to:"/patient-login"})}),r.jsx(gt,{path:"/patient/:patientId/lab-reports",element:t&&(n==null?void 0:n.role)==="patient"?r.jsx(JB,{}):r.jsx(qt,{to:"/patient-login"})}),r.jsx(gt,{path:"/patient/:patientId/pharmacy-orders",element:t&&(n==null?void 0:n.role)==="patient"?r.jsx(QB,{}):r.jsx(qt,{to:"/patient-login"})}),r.jsx(gt,{path:"/patient/:patientId/complaints",element:t&&(n==null?void 0:n.role)==="patient"?r.jsx(KB,{}):r.jsx(qt,{to:"/patient-login"})}),r.jsx(gt,{path:"/register",element:t?r.jsx(qt,{to:"/dashboard"}):r.jsx(rOe,{})}),r.jsx(gt,{path:"/handle-complaint-url",element:t?r.jsx(c4e,{}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/live-api",element:t?r.jsx(mge,{}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/create-lab-order",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(vG,{currentUser:n})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/manage-admission",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(GM,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/lab/report/:orderId",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(XB,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/lab/enter-report/:orderId",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(XB,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/add-patient",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(v.Suspense,{fallback:r.jsx(Im,{}),children:r.jsx(RD,{})})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/billing",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(tRe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/edit-complaint/:recordId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(Im,{}),children:r.jsx(iz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/edit-complaint/patient/:patientId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(Im,{}),children:r.jsx(iz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/edit-pharmacy-order/:orderId",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(VG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/guide",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ALe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/clinic-files",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(KM,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/*",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:$Le(n.role,n,ie)}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/lab/view-report/:orderId",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(cRe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/lab/search-report",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(uRe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/patient/:patientId/lab-reports",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(JB,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/patient/:patientId/pharmacy-orders",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(QB,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/inventory",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(HG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/patient-debt",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(BN,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/inventory/add",element:t&&n?r.jsx(qt,{to:"/dashboard/purchase",replace:!0}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/dental",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ILe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/medical",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(DG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/dental-billing/:id",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RLe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/inventory/edit/:id",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(UG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/lab-inventory",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(YM,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/patient/:patientId/complaints",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(KB,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/patient/:patientId/admission-bill/:billId",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ZB,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/search-bills",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(MG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/patient/:patientId/bills",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(LLe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/patient/:patientId/admission-billing",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ZB,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/start-subscription/:patientId",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(_Re,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/start-clinic-subscription",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ARe,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/refill-reminders",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(l4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/create-custom-bill",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(xG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/pharmacy-billing/:orderId",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(W4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/lab-billing/:orderId",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(K4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/doctor-billing/:queueId",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Q4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/custom-tables",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(D3e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/custom-tables/:id",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(O3e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboards",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(M3e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboards/new",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(rz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboards/:id",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(L3e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboards/:id/edit",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(rz,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/analysis",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(E3e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/clinic-hub",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Z4e,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"/dashboard/files",element:t&&n?r.jsx(xn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(OG,{})}):r.jsx(qt,{to:"/login"})}),r.jsx(gt,{path:"*",element:r.jsx(qt,{to:t?"/dashboard":"/login"})})]})}),c&&(n==null?void 0:n.role)==="admin"&&r.jsx(s4e,{onClose:()=>u(!1),onMarkAsSeen:k}),t&&n&&r.jsx(BLe,{user:n}),t&&n&&r.jsx(rDe,{user:n})]})})})})})}const $Le=(t,e,n)=>{switch(t){case"superadmin":return r.jsxs(Om,{children:[r.jsx(gt,{index:!0,element:r.jsx(n4e,{})}),r.jsx(gt,{path:"clinic-subscriptions",element:r.jsx(CRe,{})}),r.jsx(gt,{path:"clinic-subscriptions/add",element:r.jsx(kRe,{})}),r.jsx(gt,{path:"clinic-subscriptions/edit/:id",element:r.jsx(TRe,{})}),r.jsx(gt,{path:"users",element:r.jsx(PRe,{})})," ",r.jsx(gt,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(Om,{children:[r.jsx(gt,{index:!0,element:r.jsx(OOe,{})}),r.jsx(gt,{path:"search-patient",element:r.jsx(wv,{})}),r.jsx(gt,{path:"patients",element:r.jsx(DD,{})}),r.jsx(gt,{path:"doctor",element:r.jsx(Z1,{})}),r.jsx(gt,{path:"staff",element:r.jsx(fRe,{fetchWithAuth:n})}),r.jsx(gt,{path:"staff/add",element:r.jsx(QIe,{clinicId:e==null?void 0:e.clinic_id})}),r.jsx(gt,{path:"staff/edit/:id",element:r.jsx(XIe,{})}),r.jsx(gt,{path:"roles",element:r.jsx(F3e,{})}),r.jsx(gt,{path:"patients/add",element:r.jsx(v.Suspense,{fallback:r.jsx(Im,{}),children:r.jsx(RD,{})})}),r.jsx(gt,{path:"inventory",element:r.jsx(qG,{})}),r.jsx(gt,{path:"inventory/edit/:id",element:r.jsx(UG,{})}),r.jsx(gt,{path:"distributors",element:r.jsx(ez,{})}),r.jsx(gt,{path:"patient-debts",element:r.jsx(BN,{})})," ",r.jsx(gt,{path:"purchase",element:r.jsx(tz,{})})," ",r.jsx(gt,{path:"queue",element:r.jsx(Z1,{})}),r.jsx(gt,{path:"subscriptions",element:r.jsx(wRe,{})}),r.jsx(gt,{path:"subscriptions/add",element:r.jsx(NRe,{})}),r.jsx(gt,{path:"subscriptions/edit/:id",element:r.jsx(SRe,{})}),r.jsx(gt,{path:"manage-admission",element:r.jsx(GM,{})}),r.jsx(gt,{path:"reception",element:r.jsx(WA,{currentUser:e})}),r.jsx(gt,{path:"lab",element:r.jsx(WB,{})}),r.jsx(gt,{path:"pharmacy-queue",element:r.jsx(XA,{})}),r.jsx(gt,{path:"add-order",element:r.jsx(mw,{})}),r.jsx(gt,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(Om,{children:[r.jsx(gt,{index:!0,element:r.jsx(qt,{to:"search-patient",replace:!0})}),r.jsx(gt,{path:"search-patient",element:r.jsx(wv,{})}),r.jsx(gt,{path:"queue",element:r.jsx(Z1,{})}),r.jsx(gt,{path:":patientId",element:r.jsx(Z1,{})}),r.jsx(gt,{path:"add-patient",element:r.jsx(v.Suspense,{fallback:r.jsx(Im,{}),children:r.jsx(RD,{})})}),r.jsx(gt,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(Om,{children:[r.jsx(gt,{index:!0,element:r.jsx(WA,{currentUser:e})}),r.jsx(gt,{path:"reception",element:r.jsx(WA,{currentUser:e})})," ",r.jsx(gt,{path:"all-patients",element:r.jsx(DD,{})}),r.jsx(gt,{path:"search-patient",element:r.jsx(wv,{})}),r.jsx(gt,{path:"clinic-files",element:r.jsx(KM,{})}),r.jsx(gt,{path:"add-order",element:r.jsx(mw,{})}),r.jsx(gt,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(WB,{});case"pharmacy":return r.jsxs(Om,{children:[r.jsx(gt,{index:!0,element:r.jsx(XA,{})}),r.jsx(gt,{path:"pharmacy-queue",element:r.jsx(XA,{})})," ",r.jsx(gt,{path:"inventory",element:r.jsx(HG,{})}),r.jsx(gt,{path:"settings",element:r.jsx(YIe,{})}),r.jsx(gt,{path:"add-order",element:r.jsx(mw,{})}),r.jsx(gt,{path:"edit-pharmacy-order/:orderId",element:r.jsx(VG,{})}),r.jsx(gt,{path:"orders/:orderId",element:r.jsx(mRe,{})}),r.jsx(gt,{path:"search-patient-records",element:r.jsx(wv,{})}),r.jsx(gt,{path:"distributors",element:r.jsx(ez,{})}),r.jsx(gt,{path:"patient-debts",element:r.jsx(BN,{})})," ",r.jsx(gt,{path:"purchase",element:r.jsx(tz,{})})," ",r.jsx(gt,{path:"*",element:r.jsx(qt,{to:"/dashboard",replace:!0})})]});case"patient":return r.jsx(qt,{to:"/patient-dashboard",replace:!0});default:return r.jsxs("div",{children:["Unknown role (",t,") or dashboard not implemented."]},t)}},xn=({user:t,onLogout:e,children:n,showInstallPrompt:a,onInstallClick:i,clinicProPlanStatus:s})=>{const o=Mt(),[l,c]=v.useState(!1),[u,h]=v.useState(window.innerWidth<=768),[p,m]=v.useState(null),[x,b]=v.useState(!1);v.useEffect(()=>eE.subscribe(k=>{b(k)}),[]),v.useEffect(()=>{const k=()=>{h(window.innerWidth<=768)};return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const C=await ie("/api/clinics/settings");if(C.ok){const A=await C.json();m(A.logoUrl)}else console.error("Failed to fetch clinic details for display:",C.statusText),m(null)}catch(C){console.error("Error fetching clinic details for display:",C),m(null)}else m(null)})()},[t==null?void 0:t.clinic_id]);const j=()=>{c(!l)},{toggleCommandBar:w,isOpen:_}=Bc();return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:k=>{k.preventDefault(),o("/dashboard")},className:"logo-container",children:r.jsx("img",{src:p||"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("span",{className:"app-title-link",children:"Newtons Ai"}),r.jsxs("span",{className:"user-role-panel",children:["(",(t.role||"user").charAt(0).toUpperCase()+(t.role||"user").slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[a&&r.jsxs("button",{onClick:i,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),r.jsxs("a",{href:"https://store.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"shop-button",title:"Visit Store",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),r.jsx("span",{children:"Shop"})]}),!u&&r.jsxs("button",{onClick:()=>o("/dashboard/guide"),className:"guide-button",title:"User Guide",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),r.jsx("span",{children:"Guide"})]}),s&&(s.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>o("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),!_&&r.jsx("button",{onClick:w,className:"command-bar-button",title:"Search & Commands (Ctrl+K)",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"m21 21-4.3-4.3"})]})}),r.jsx("button",{className:"hamburger-icon",onClick:j,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),x&&r.jsx("div",{className:"global-loading-bar"})]}),r.jsxs("main",{className:"main-content",children:[r.jsx(oOe,{}),n]}),u?r.jsx(iOe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j,roleNavigation:hG}):r.jsx(aOe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j}),!u&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j}),!u&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j})]})},BLe=({user:t})=>{const{isOpen:e,closeAssistant:n}=GN(),a=Mt(),[i,s]=v.useState(null),[o,l]=v.useState([]);return v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const[u,h]=await Promise.all([ie("/api/clinics/settings"),ie("/api/staff")]);u.ok&&s(await u.json()),h.ok&&l(await h.json())}catch(u){console.error("Failed to fetch initial AI context",u)}})()},[t.clinic_id]),e?r.jsx("div",{className:"ai-assistant-wrapper",children:r.jsx(fG,{onClose:n,settings:i,staffList:o,onSettingsUpdate:()=>{},onStaffUpdate:()=>{},onHighlight:c=>{c.forEach(u=>{if(u.startsWith("navigate_")){const h=u.replace("navigate_","");a(`/dashboard/analysis?section=${h}`)}else{const h=document.getElementById(u);h&&(h.scrollIntoView({behavior:"smooth",block:"center"}),h.classList.add("ai-highlight-glow"),setTimeout(()=>h.classList.remove("ai-highlight-glow"),2e3))}})}})}):null};CW.createRoot(document.getElementById("root")).render(r.jsx(v.StrictMode,{children:r.jsx(XW,{client:uK,children:r.jsx(FLe,{})})}));export{TP as $,en as A,sq as B,Ug as C,pd as D,qm as E,ho as F,XOe as G,za as H,JOe as I,Nc as J,Af as K,cS as L,yd as M,lg as N,fn as O,Tf as P,qa as Q,Te as R,ee as S,zn as T,vf as U,$I as V,GG as W,Ot as X,gd as Y,nO as Z,KN as _,Od as a,o4e as a0,gq as b,ct as c,qi as d,ULe as e,ie as f,Kn as g,u4e as h,qr as i,r as j,Ln as k,qn as l,XD as m,Is as n,xd as o,qN as p,Kt as q,v as r,Bc as s,Da as t,Mt as u,ps as v,Ur as w,Ar as x,Ko as y,xX as z};

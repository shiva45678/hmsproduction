import{f as l,j as s,S as r}from"./index-DCOSVs-d.js";import{r as i,u as v}from"./react-vendor-Cc0P4_ZX.js";/* empty css                         */import{az as f,e as p,i as y,j as x,u as w,ag as C,m as D,aa as z}from"./ui-vendor-SmiJk_kJ.js";import"./utils-vendor-azd6ta8e.js";import"./ai-vendor-CB5T-uN5.js";import"./chart-vendor-BcjzKorn.js";const $=()=>{const[t,o]=i.useState([]),[m,j]=i.useState(!0),[c,u]=i.useState(""),d=v();i.useEffect(()=>{b()},[]);const b=async()=>{try{const e=await l("/api/dashboards");if(e.ok){const a=await e.json();o(a)}}catch(e){console.error("Error fetching dashboards:",e)}finally{j(!1)}},g=async(e,a)=>{if(e.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await l(`/api/dashboards/${a}`,{method:"DELETE"}),o(t.filter(n=>n.id!==a))}catch(n){console.error("Error deleting dashboard:",n)}},N=e=>{try{const a=new Date(e);return a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:a.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},h=t.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.description&&e.description.toLowerCase().includes(c.toLowerCase()));return s.jsxs("div",{className:"custom-dashboards-container",children:[s.jsxs("div",{className:"cdp-header",children:[s.jsxs("div",{className:"cdp-title-row",children:[s.jsxs("div",{className:"cdp-title",children:[s.jsx("div",{className:"cdp-icon",children:s.jsx(f,{size:20})}),s.jsxs("div",{children:[s.jsx("h1",{children:"Custom Dashboards"}),s.jsxs("span",{className:"cdp-subtitle",children:[t.length," dashboard",t.length!==1?"s":""]})]})]}),s.jsxs("button",{className:"cdp-create-btn",onClick:()=>d("/dashboards/new"),children:[s.jsx(p,{size:16}),s.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),t.length>0&&s.jsxs("div",{className:"cdp-search",children:[s.jsx(y,{size:16}),s.jsx("input",{type:"text",placeholder:"Search dashboards...",value:c,onChange:e=>u(e.target.value)})]})]}),s.jsx("div",{className:"cdp-content",children:m?s.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(e=>s.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[s.jsxs("div",{className:"cdp-card-header",children:[s.jsx(r,{width:18,height:18,variant:"circular"}),s.jsx(r,{width:80,height:12})]}),s.jsxs("div",{className:"cdp-card-body",children:[s.jsx(r,{width:"70%",height:24,style:{marginBottom:"8px"}}),s.jsx(r,{width:"90%",height:16})]}),s.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[s.jsx(r,{width:60,height:32}),s.jsx(r,{width:60,height:32}),s.jsx(r,{width:32,height:32})]})]},e))}):h.length===0?s.jsxs("div",{className:"cdp-empty",children:[s.jsx("div",{className:"cdp-empty-icon",children:s.jsx(x,{size:48})}),c?s.jsxs(s.Fragment,{children:[s.jsx("h3",{children:"No results found"}),s.jsx("p",{children:"Try a different search term"})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{children:"No dashboards yet"}),s.jsx("p",{children:"Create your first custom dashboard to get started"}),s.jsxs("button",{className:"cdp-create-btn",onClick:()=>d("/dashboards/new"),children:[s.jsx(p,{size:16})," Create Dashboard"]})]})]}):s.jsx("div",{className:"cdp-grid",children:h.map(e=>s.jsxs("div",{className:"cdp-card",onClick:()=>d(`/dashboards/${e.id}`),children:[s.jsxs("div",{className:"cdp-card-header",children:[s.jsx("div",{className:"cdp-card-icon",children:s.jsx(x,{size:18})}),s.jsx("div",{className:"cdp-card-meta",children:e.created_at&&s.jsxs("span",{className:"cdp-card-date",children:[s.jsx(w,{size:12}),N(e.created_at)]})})]}),s.jsxs("div",{className:"cdp-card-body",children:[s.jsx("h3",{children:e.name}),s.jsx("p",{children:e.description||"No description"})]}),s.jsxs("div",{className:"cdp-card-footer",children:[s.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:a=>{a.stopPropagation(),d(`/dashboards/${e.id}`)},children:[s.jsx(C,{size:14}),s.jsx("span",{children:"View"})]}),s.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:a=>{a.stopPropagation(),d(`/dashboards/${e.id}/edit`)},children:[s.jsx(D,{size:14}),s.jsx("span",{children:"Edit"})]}),s.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:a=>g(a,e.id),children:s.jsx(z,{size:14})})]})]},e.id))})})]})};export{$ as default};
